{
  "startTime": 1674255832601,
  "endTime": 1674255834118,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 65,
        "lineEnd": 65,
        "columnStart": 4,
        "columnEnd": 46
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 21,
        "lineEnd": 21,
        "columnStart": 4,
        "columnEnd": 115
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 29,
        "lineEnd": 29,
        "columnStart": 4,
        "columnEnd": 39
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 32,
        "lineEnd": 32,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 35,
        "lineEnd": 35,
        "columnStart": 4,
        "columnEnd": 44
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 40,
        "lineEnd": 40,
        "columnStart": 4,
        "columnEnd": 37
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 44,
        "lineEnd": 44,
        "columnStart": 4,
        "columnEnd": 124
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 47,
        "lineEnd": 47,
        "columnStart": 4,
        "columnEnd": 33
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 50,
        "lineEnd": 50,
        "columnStart": 4,
        "columnEnd": 37
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 59,
        "lineEnd": 59,
        "columnStart": 4,
        "columnEnd": 49
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 62,
        "lineEnd": 62,
        "columnStart": 4,
        "columnEnd": 28
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 77,
        "lineEnd": 77,
        "columnStart": 4,
        "columnEnd": 28
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 84,
        "lineEnd": 84,
        "columnStart": 4,
        "columnEnd": 59
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 21,
        "lineEnd": 21,
        "columnStart": 4,
        "columnEnd": 115
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 29,
        "lineEnd": 29,
        "columnStart": 4,
        "columnEnd": 39
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 32,
        "lineEnd": 32,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 35,
        "lineEnd": 35,
        "columnStart": 4,
        "columnEnd": 44
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 40,
        "lineEnd": 40,
        "columnStart": 4,
        "columnEnd": 37
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 44,
        "lineEnd": 44,
        "columnStart": 4,
        "columnEnd": 124
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 47,
        "lineEnd": 47,
        "columnStart": 4,
        "columnEnd": 33
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 50,
        "lineEnd": 50,
        "columnStart": 4,
        "columnEnd": 37
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 59,
        "lineEnd": 59,
        "columnStart": 4,
        "columnEnd": 49
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 62,
        "lineEnd": 62,
        "columnStart": 4,
        "columnEnd": 28
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 77,
        "lineEnd": 77,
        "columnStart": 4,
        "columnEnd": 28
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 84,
        "lineEnd": 84,
        "columnStart": 4,
        "columnEnd": 59
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 21,
        "lineEnd": 21,
        "columnStart": 4,
        "columnEnd": 115
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 29,
        "lineEnd": 29,
        "columnStart": 4,
        "columnEnd": 39
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 32,
        "lineEnd": 32,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 35,
        "lineEnd": 35,
        "columnStart": 4,
        "columnEnd": 44
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 40,
        "lineEnd": 40,
        "columnStart": 4,
        "columnEnd": 37
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 44,
        "lineEnd": 44,
        "columnStart": 4,
        "columnEnd": 124
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 47,
        "lineEnd": 47,
        "columnStart": 4,
        "columnEnd": 33
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 50,
        "lineEnd": 50,
        "columnStart": 4,
        "columnEnd": 37
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 59,
        "lineEnd": 59,
        "columnStart": 4,
        "columnEnd": 49
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 62,
        "lineEnd": 62,
        "columnStart": 4,
        "columnEnd": 28
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 77,
        "lineEnd": 77,
        "columnStart": 4,
        "columnEnd": 28
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 84,
        "lineEnd": 84,
        "columnStart": 4,
        "columnEnd": 59
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 21,
        "lineEnd": 21,
        "columnStart": 4,
        "columnEnd": 139
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 29,
        "lineEnd": 29,
        "columnStart": 4,
        "columnEnd": 63
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 32,
        "lineEnd": 32,
        "columnStart": 4,
        "columnEnd": 54
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 35,
        "lineEnd": 35,
        "columnStart": 4,
        "columnEnd": 68
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 40,
        "lineEnd": 40,
        "columnStart": 4,
        "columnEnd": 61
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 44,
        "lineEnd": 44,
        "columnStart": 4,
        "columnEnd": 148
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 47,
        "lineEnd": 47,
        "columnStart": 4,
        "columnEnd": 57
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 50,
        "lineEnd": 50,
        "columnStart": 4,
        "columnEnd": 61
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 59,
        "lineEnd": 59,
        "columnStart": 4,
        "columnEnd": 73
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 62,
        "lineEnd": 62,
        "columnStart": 4,
        "columnEnd": 52
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 77,
        "lineEnd": 77,
        "columnStart": 4,
        "columnEnd": 52
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 84,
        "lineEnd": 84,
        "columnStart": 4,
        "columnEnd": 83
      }
    }
  ],
  "repairedDockerfile": "FROM ubuntu:12.04\nMAINTAINER Boris BÃ¶hne <info@drubb.de>\n\n#\n# Step 1: Installation\n#\n\n# Set frontend. We'll clean this later on!\nARG DEBIAN_FRONTEND=noninteractive\n\n# Expose web root as volume\nVOLUME [\"/var/www\"]\n\n# Add additional repostories needed later\nRUN echo \"deb http://ppa.launchpad.net/git-core/ppa/ubuntu precise main\" >> /etc/apt/sources.list\nRUN apt-key adv --keyserver keyserver.ubuntu.com --recv-keys E1DF1F24\n\n# Update repositories cache and distribution\nRUN apt-get -qq update && apt-get -qqy upgrade\n\n# Install some basic tools needed for deployment\nRUN apt-get -yqq --no-install-recommends install apt-utils sudo build-essential debconf-utils locales curl wget unzip patch dkms supervisor && rm -rf /var/lib/apt/lists/*;\n\n# Add the docker user\nENV HOME /home/docker\nRUN useradd docker && passwd -d docker && adduser docker sudo\nRUN mkdir -p $HOME && chown -R docker:docker $HOME\n\n# Install SSH client\nRUN apt-get -yqq --no-install-recommends install openssh-client && rm -rf /var/lib/apt/lists/*;\n\n# Install ssmtp MTA\nRUN apt-get -yqq --no-install-recommends install ssmtp && rm -rf /var/lib/apt/lists/*;\n\n# Install Apache web server\nRUN apt-get -yqq --no-install-recommends install apache2-mpm-prefork && rm -rf /var/lib/apt/lists/*;\n\n# Install MySQL server and save initial configuration\nRUN echo \"mysql-server mysql-server/root_password password root\" | debconf-set-selections\nRUN echo \"mysql-server mysql-server/root_password_again password root\" | debconf-set-selections\nRUN apt-get -yqq --no-install-recommends install mysql-server && rm -rf /var/lib/apt/lists/*;\nRUN service mysql start && sleep 5 && service mysql stop && tar cpPzf /mysql.tar.gz /var/lib/mysql\n\n# Install PHP5 with Xdebug, APC and other modules\nRUN apt-get -yqq --no-install-recommends install libapache2-mod-php5 php5-mcrypt php5-dev php5-mysql php5-curl php5-gd php5-intl php5-xdebug php-apc && rm -rf /var/lib/apt/lists/*;\n\n# Install PEAR package manager\nRUN apt-get -yqq --no-install-recommends install php-pear && pear channel-update pear.php.net && pear upgrade-all && rm -rf /var/lib/apt/lists/*;\n\n# Install PECL package manager\nRUN apt-get -yqq --no-install-recommends install libpcre3-dev && rm -rf /var/lib/apt/lists/*;\n\n# Install PECL uploadprogress extension\nRUN pecl install uploadprogress\n\n# Update APC to latest version\nRUN printf \"\\n\" | pecl update apc\n\n# Install memcached service\nRUN apt-get -yqq --no-install-recommends install memcached php5-memcached && rm -rf /var/lib/apt/lists/*;\n\n# Install GIT (latest version)\nRUN apt-get -yqq --no-install-recommends install git && rm -rf /var/lib/apt/lists/*;\n\n# Install composer (latest version)\nRUN curl -f -sS https://getcomposer.org/installer | php && mv composer.phar /usr/local/bin/composer\n\n# Install drush (latest stable for php 5.3)\nUSER docker\nRUN sudo composer global require \"drush/drush:7.*\"\nUSER root\n\n# Install PhpMyAdmin (latest php 5.3 compatible version)\nRUN wget -q -O phpmyadmin.zip https://github.com/phpmyadmin/phpmyadmin/archive/MAINT_4_4_15.zip && unzip -qq phpmyadmin.zip\nRUN rm phpmyadmin.zip && mv phpmyadmin-MAINT_4_4_15 /opt/phpmyadmin\n\n# Install zsh / OH-MY-ZSH\nRUN apt-get -yqq --no-install-recommends install zsh && git clone git://github.com/robbyrussell/oh-my-zsh.git $HOME/.oh-my-zsh && rm -rf /var/lib/apt/lists/*;\n\n# Install PROST drupal deployment script, see https://www.drupal.org/sandbox/axroth/1668300\nRUN git clone --branch master http://git.drupal.org/sandbox/axroth/1668300.git /tmp/prost\nRUN chmod +x /tmp/prost/install.sh\n\n# Install some useful cli tools\nRUN apt-get -yqq --no-install-recommends install mc htop vim nano net-tools mlocate && rm -rf /var/lib/apt/lists/*;\n\n# Cleanup some things\nRUN apt-get -yqq autoremove; apt-get -yqq autoclean; apt-get clean\n\n# Expose some ports to the host system (web server, MySQL, Xdebug)\nEXPOSE 80 3306 9000\n\n#\n# Step 2: Configuration\n#\n\n# Localization\nRUN dpkg-reconfigure locales && locale-gen de_DE.UTF-8 && /usr/sbin/update-locale LANG=de_DE.UTF-8\nENV LC_ALL de_DE.UTF-8\n\n# Set timezone\nRUN echo \"Europe/Berlin\" > /etc/timezone && dpkg-reconfigure -f noninteractive tzdata\n\n# Add apache web server configuration file\nADD config/httpd.conf /etc/apache2/httpd.conf\n\n# Configure needed apache modules and disable default site\nRUN a2enmod rewrite headers deflate expires && a2dismod cgi autoindex status && a2dissite default\n\n# Add additional php configuration file\nADD config/php.ini /etc/php5/conf.d/php.ini\n\n# Add additional mysql configuration file\nADD config/mysql.cnf /etc/mysql/conf.d/mysql.cnf\nRUN chmod 0664 /etc/mysql/conf.d/mysql.cnf\n\n# Add memcached configuration file\nADD config/memcached.conf /etc/memcached.conf\n\n# Add ssmtp configuration file\nADD config/ssmtp.conf /etc/ssmtp/ssmtp.conf\n\n# Add phpmyadmin configuration file\nADD config/config.inc.php /opt/phpmyadmin/config.inc.php\nRUN chmod 0664 /opt/phpmyadmin/config.inc.php\n\n# Add git global configuration files\nADD config/.gitconfig $HOME/.gitconfig\nADD config/.gitignore $HOME/.gitignore\n\n# Add drush global configuration file\nADD config/drushrc.php $HOME/.drush/drushrc.php\n\n# Add apc status script\nRUN mkdir /opt/apc && gunzip -c /usr/share/doc/php-apc/apc.php.gz > /opt/apc/apc.php\n\n# Add zsh configuration\nADD config/.zshrc $HOME/.zshrc\n\n# Configure PROST drupal deployment script\nRUN chown docker:docker $HOME/.zshrc\nUSER docker\nENV SHELL /bin/zsh\nRUN export PATH=\"$HOME/.composer/vendor/bin:$PATH\" && cd /tmp/prost && ./install.sh -noupdate $HOME/.prost\nUSER root\nRUN rm -rf /tmp/prost\n\n# ADD ssh keys needed for connections to external servers\nADD .ssh $HOME/.ssh\nRUN echo \"    IdentityFile ~/.ssh/id_rsa\" >> /etc/ssh/ssh_config\n\n# Add startup script\nADD startup.sh $HOME/startup.sh\n\n# Supervisor configuration\nADD config/supervisord.conf /etc/supervisor/conf.d/supervisord.conf\n\n# Entry point for the container\nRUN chown -R docker:docker $HOME && chmod +x $HOME/startup.sh\nUSER docker\nENV SHELL /bin/zsh\nWORKDIR /var/www\nCMD [\"/bin/bash\", \"-c\", \"$HOME/startup.sh\"]\n"
}