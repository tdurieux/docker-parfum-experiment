{
  "startTime": 1674246797160,
  "endTime": 1674246798898,
  "originalSmells": [
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 23,
        "lineEnd": 23,
        "columnStart": 22,
        "columnEnd": 110
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "# UPDATE ME when new version is out !!!!\nARG BVER_TESTNET=0.7.1\nARG CLIVER_TESTNET=0.7.0\nARG BVER_PROD=0.7.2-hf.1\nARG CLIVER_PROD=0.7.2\nFROM ubuntu:18.04 as builder\n\n# Dockerfile for running Binance node from binary packages under docker\n# https://docs.binance.org/fullnode.html#run-full-node-to-join-binance-chain\n# MIT license\nLABEL Maintainer = \"Evgeny Varnavskiy <varnavruz@gmail.com>\"\nLABEL Description=\"Docker image for Binance full and light nodes\"\nLABEL License=\"MIT License\"\n\nARG DEBIAN_FRONTEND=noninteractive\n\nARG BVER_TESTNET\nARG CLIVER_TESTNET\nARG BVER_PROD\nARG CLIVER_PROD\nARG NODETYPE=fullnode\n#ARG NODETYPE=lightnode\n\nRUN apt-get update && apt-get install -y --no-install-recommends upx ca-certificates wget git git-lfs binutils && rm -rf /var/lib/apt/lists/*;\nRUN\tgit lfs clone --depth 1 https://github.com/binance-chain/node-binary.git\n\n# RUN upx /node-binary/cli/testnet/${CLIVER}/linux/tbnbcli \\\n# && upx /node-binary/cli/prod/${CLIVER}/linux/bnbcli \\\n# && upx /node-binary/${NODETYPE}/testnet/${BVER}/linux/bnbchaind \\\n# && upx /node-binary/${NODETYPE}/prod/${BVER}/linux/bnbchaind\n\n# Final stage\n\nFROM ubuntu:18.04\n\nARG HOST_USER_UID=1000\nARG HOST_USER_GID=1000\n\nARG BVER_TESTNET\nARG CLIVER_TESTNET\nARG BVER_PROD\nARG CLIVER_PROD\nENV BVER_TESTNET=$BVER_TESTNET\nENV CLIVER_TESTNET=$CLIVER_TESTNET\nENV BVER_PROD=$BVER_PROD\nENV CLIVER_PROD=$CLIVER_PROD\n\nARG NODETYPE=fullnode\n#ARG NODETYPE=lightnode\nENV BNET=testnet\n#ENV BNET=prod\nENV BNCHOME=/opt/bnbchaind\n\nCOPY --from=builder /node-binary/cli/testnet/${CLIVER_TESTNET}/linux/tbnbcli /node-binary/cli/testnet/${BVER}/linux/\nCOPY --from=builder /node-binary/cli/prod/${CLIVER_PROD}/linux/bnbcli /node-binary/cli/prod/${BVER}/linux/\nCOPY --from=builder /node-binary/${NODETYPE}/testnet/${BVER_TESTNET}/linux/bnbchaind /node-binary/fullnode/testnet/${BVER}/linux/\nCOPY --from=builder /node-binary/${NODETYPE}/prod/${BVER_PROD}/linux/bnbchaind /node-binary/fullnode/prod/${BVER}/linux/\nCOPY --from=builder /node-binary/${NODETYPE}/testnet/${BVER_TESTNET}/config/* /node-binary/fullnode/testnet/${BVER}/config/\nCOPY --from=builder /node-binary/${NODETYPE}/prod/${BVER_PROD}/config/* /node-binary/fullnode/prod/${BVER}/config/\nCOPY --from=builder /node-binary/docker/bin/*.sh /usr/local/bin/\n\nRUN set -ex \\\n&& chmod +x /usr/local/bin/*.sh \\\n&& mkdir -p \"$BNCHOME\" \\\n&& groupadd --gid \"$HOST_USER_GID\" bnbchaind \\\n&& useradd --uid \"$HOST_USER_UID\" --gid \"$HOST_USER_GID\" --shell /bin/bash --no-create-home bnbchaind \\\n&& chown -R bnbchaind:bnbchaind \"$BNCHOME\"\n\nVOLUME ${BNCHOME}\n\n# RPC service listen on port 27147 and P2P service listens on port 27146 by default.\n# Prometheus is enabled on port 26660 by default, and the endpoint is /metrics.\n\nEXPOSE 27146 27147 26660\n\nENTRYPOINT [\"entrypoint.sh\"]\n"
}