{
  "startTime": 1674252500367,
  "endTime": 1674252500856,
  "originalSmells": [
    {
      "rule": "yarnCacheCleanAfterInstall",
      "position": {
        "lineStart": 13,
        "lineEnd": 13,
        "columnStart": 4,
        "columnEnd": 28
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM node:18 as build-stage\nLABEL org.opencontainers.image.source https://github.com/bhidapa/heltin\n\nWORKDIR /graphql\n\n# yarn setup\nCOPY cmd/graphql/.yarn/releases ./.yarn/releases\nCOPY cmd/graphql/.yarn/plugins ./.yarn/plugins\nCOPY cmd/graphql/.yarnrc.yml .\n\n# install deps\nCOPY cmd/graphql/yarn.lock .\nCOPY cmd/graphql/package.json .\nRUN yarn install --immutable && yarn cache clean;\n\n# build\nCOPY cmd/graphql/tsconfig.json .\nCOPY cmd/graphql/src .\nRUN yarn build\n\nFROM node:18-alpine\n\n# necessary for healthchecks\nRUN apk --update --no-cache add curl\n\nCOPY --from=build-stage /graphql/node_modules /opt/graphql/node_modules\nCOPY --from=build-stage /graphql/build /opt/graphql/dist\n\n# so that we can mount the schema file during development\nRUN touch /opt/graphql/dist/schema.graphql\n\nENV GRAPHILE_TURBO=1\nENTRYPOINT node /opt/graphql/dist\n"
}