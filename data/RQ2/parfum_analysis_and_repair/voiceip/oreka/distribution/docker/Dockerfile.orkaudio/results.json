{
  "startTime": 1674251079372,
  "endTime": 1674251080185,
  "originalSmells": [
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 9,
        "lineEnd": 9,
        "columnStart": 22,
        "columnEnd": 62
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM ubuntu:focal as builder\nMAINTAINER Kinshuk B (hi@kinsh.uk)\n\n# Configure apt\nENV DEBIAN_FRONTEND=noninteractive\n\nRUN apt-get update && apt-get install --no-install-recommends -y gnupg ca-certificates && rm -rf /var/lib/apt/lists/*\n\nRUN apt-get update && apt-get install -y build-essential libtool automake git tree rpm libboost-all-dev`\n\tlibpcap-dev libsndfile1-dev libapr1-dev libspeex-dev liblog4cxx-dev libace-dev libcap-dev `\n\tlibopus-dev libxerces-c3-dev libssl-dev cmake libdw-dev liblzma-dev libunwind-dev`\n\t&& rm -rf /var/lib/apt/lists/*\n\n#silk\nRUN mkdir -p /opt/silk && chmod 777 /opt/silk`\n\t&& git clone --depth 1 https://github.com/gaozehua/SILKCodec.git /opt/silk/SILKCodec `\n\t&& cd /opt/silk/SILKCodec/SILK_SDK_SRC_FIX `\n\t&& CFLAGS='-fPIC' make all\n\n#opus\nRUN mkdir -p /opt/opus && chmod 777 /opt/opus`\n\t&& git clone  https://github.com/xiph/opus.git /opt/opus `\n\t&& cd /opt/opus `\n\t&& git checkout v1.2.1 `\n\t&& ./autogen.sh `\n\t&& ./configure --enable-shared --with-pic --enable-static `\n\t&& make `\n\t&& make install `\n\t&& ln -s /usr/local/lib/libopus.so /usr/local/lib/libopusstatic.so `\n\t&& ln -s /usr/include/opus /opt/opus/include/opus\n\n#g729\nRUN mkdir -p /opt/bcg729 && chmod 777 /opt/bcg729`\n\t&& git clone --depth 1 https://github.com/BelledonneCommunications/bcg729.git /opt/bcg729 `\n\t&& cd /opt/bcg729 `\n\t&& cmake . -DCMAKE_INSTALL_PREFIX=/usr -DCMAKE_INSTALL_LIBDIR=/usr/lib`\n\t&& make `\n\t&& make install\n\n#backward-cpp\nRUN mkdir -p /opt/backward-cpp && chmod 777 /opt/backward-cpp`\n\t&& git clone --depth 1 https://github.com/bombela/backward-cpp.git /opt/backward-cpp `\n\t&& ln -s /opt/backward-cpp/backward.hpp /usr/local/include/backward.hpp\n\nRUN mkdir -p /opt/oreka && chmod 777 /opt/oreka`\n\t&& git clone --depth 1 https://github.com/voiceip/oreka.git /opt/oreka `\n\t&& cd /opt/oreka/orkbasecxx `\n\t&& autoreconf -i `\n\t&& ./configure CXX=g++ `\n\t&& make `\n\t&& make install\n\nRUN cd /opt/oreka/orkaudio `\n\t&& autoreconf -i `\n\t&& ./configure CXX=g++ `\n\t&& make `\n\t&& make install\n\nFROM ubuntu:focal\nMAINTAINER Kinshuk B (hi@kinsh.uk)\n\nENV DEBIAN_FRONTEND=noninteractive\nRUN apt-get update && apt-get install -y libcap2 libpcap0.8 libsndfile1 libapr1 libspeex1 liblog4cxx10v5 libace-6.4.5 `\n\tlibopus0 libxerces-c3.2 libssl1.1 libdw1 libunwind8 && rm -rf /var/lib/apt/lists/*\n\n# Mount the image from \"builder\" stage at `/artifacts` during this run\nRUN --mount=type=bind,source=/,target=/artifacts,from=builder `\n\tcp /artifacts/opt/oreka/orkaudio/orkaudio /usr/sbin/orkaudio `\n   \t&& cp /artifacts/opt/oreka/orkaudio/audiocaptureplugins/voip/.libs/libvoip.so* /usr/lib/`\n   \t&& cp /artifacts/opt/oreka/orkaudio/audiocaptureplugins/voip/.libs/libvoip.la /usr/lib/`\n   \t&& cp /artifacts/opt/oreka/orkaudio/audiocaptureplugins/generator/.libs/libgenerator.so* /usr/lib/`\n   \t&& cp /artifacts/opt/oreka/orkaudio/audiocaptureplugins/generator/.libs/libgenerator.la /usr/lib/`\n   \t&& cp /artifacts/usr/lib/liborkbase.*  /usr/lib/ `\n   \t&& cp /artifacts/usr/lib/libbcg729.*  /usr/lib/ `\n   \t&& mkdir -p /usr/lib/orkaudio/plugins/ `\n   \t&& cp /artifacts/opt/oreka/orkaudio/plugins/*.so  /usr/lib/orkaudio/plugins/\n\nRUN mkdir /etc/orkaudio && chmod 777 /etc/orkaudio\n\nADD  https://raw.githubusercontent.com/voiceip/oreka/master/orkaudio/logging-linux-template.properties /etc/orkaudio/logging.properties\nCOPY config.xml /etc/orkaudio/config_default.xml\nCOPY entrypoint.sh /opt/entrypoint.sh\n\nENV SHELL /bin/bash\nENTRYPOINT [ \"/opt/entrypoint.sh\" ]\n\nCMD [\"orkaudio\", \"debug\"]\n\n\n"
}