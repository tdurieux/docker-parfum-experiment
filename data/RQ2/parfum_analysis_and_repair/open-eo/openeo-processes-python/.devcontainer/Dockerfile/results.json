{
  "startTime": 1674252718353,
  "endTime": 1674252719449,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 66,
        "lineEnd": 66,
        "columnStart": 4,
        "columnEnd": 47
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 23,
        "lineEnd": 26,
        "columnStart": 4,
        "columnEnd": 17
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 30,
        "lineEnd": 33,
        "columnStart": 4,
        "columnEnd": 14
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 38,
        "lineEnd": 62,
        "columnStart": 4,
        "columnEnd": 25
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM osgeo/gdal:ubuntu-small-3.5.0 AS base\n\nARG DEBIAN_FRONTEND=noninteractive\nARG USERNAME=ubuntu\nARG GROUPNAME=ubuntu\nARG USER_UID=1000\nARG USER_GID=1000\nENV TZ=Etc/GMT\n\nENV PYTHONUNBUFFERED=1 \\\n    PYTHONDONTWRITEBYTECODE=1 \\\n    PIP_NO_CACHE_DIR=off \\\n    PIP_DISABLE_PIP_VERSION_CHECK=on \\\n    PIP_DEFAULT_TIMEOUT=100 \\\n    POETRY_HOME=\"/opt/poetry/\" \\\n    POETRY_NO_INTERACTION=1 \\\n    POETRY_VIRTUALENVS_IN_PROJECT=true \\\n    VENV_PATH=\".venv/\" \\\n    APT_KEY_DONT_WARN_ON_DANGEROUS_USAGE=DontWarn\n\nENV PATH=\"$POETRY_HOME/bin:/home/$USERNAME/.local/bin:$VENV_PATH/bin:$PATH\"\n\nRUN apt-get update -qy && \\\n    apt-get install -qy --no-install-recommends \\\n        #  libpq-dev and build-essential are necessary for psycopg2, which is required for datacube\n        build-essential \\\n        libpq-dev && rm -rf /var/lib/apt/lists/*;\n\n# Adapted from https://github.com/TheKevJames/tools/blob/master/docker-nox/Dockerfile\nRUN apt-get update -qy && \\\n    apt-get install -qy --no-install-recommends \\\n        ca-certificates \\\n        curl \\\n        gnupg2 && \\\n    . /etc/os-release && \\\n    echo \"deb http://ppa.launchpad.net/deadsnakes/ppa/ubuntu ${UBUNTU_CODENAME} main\" > /etc/apt/sources.list.d/deadsnakes.list && \\\n    apt-key adv --keyserver keyserver.ubuntu.com --recv-keys F23C5A6CF475977595C89F51BA6932366A755776 && \\\n    apt-get update -qy && \\\n    apt-get install -qy --fix-missing --no-install-recommends \\\n        git \\\n        openssh-client \\\n        python3.6 \\\n        python3.6-dev \\\n        python3.6-distutils \\\n        python3.6-venv \\\n        python3.7 \\\n        python3.7-dev \\\n        python3.7-distutils \\\n        python3.7-venv \\\n        python3.8 \\\n        python3.8-dev \\\n        python3.8-distutils \\\n        python3.8-venv \\\n        python3.9 \\\n        python3.9-dev \\\n        python3.9-distutils \\\n        python3.9-venv \\\n        python3.10 \\\n        python3.10-dev \\\n        python3.10-distutils \\\n        python3.10-venv \\\n        python3-pip \\\n        python3-distutils && rm -rf /var/lib/apt/lists/*;\n\n# Install Poetry - respects $POETRY_VERSION & $POETRY_HOME\nENV POETRY_VERSION=1.1.13\nRUN curl -f -sSL https://install.python-poetry.org | python3 -\n\nRUN useradd -ms /bin/bash --uid $USER_UID --user-group $USERNAME \\\n    && chown -R $USER_UID:$USER_GID /home/$USERNAME\nUSER $USER_UID\n\nENV PATH=\"$POETRY_HOME/bin:/home/$USERNAME/.local/bin:$VENV_PATH/bin:$PATH\"\n\nRUN curl -fsS https://bootstrap.pypa.io/get-pip.py --output /tmp/get-pip.py && \\\n    python3.10 /tmp/get-pip.py && \\\n    rm /tmp/get-pip.py\n\nRUN python3.6 -m pip install --user --no-cache-dir --upgrade pip && \\\n    python3.7 -m pip install --user --no-cache-dir --upgrade pip && \\\n    python3.8 -m pip install --user --no-cache-dir --upgrade pip && \\\n    python3.9 -m pip install --user --no-cache-dir --upgrade pip && \\\n    python3.10 -m pip install --user --no-cache-dir --upgrade pip && \\\n    rm -rf /var/cache/apt/lists\n\nRUN python3.10 -m pip install --user --no-cache-dir 'nox-poetry==1.0.0'\n"
}