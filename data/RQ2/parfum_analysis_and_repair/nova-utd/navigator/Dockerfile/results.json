{
  "startTime": 1674249069900,
  "endTime": 1674249070765,
  "originalSmells": [
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 12,
        "lineEnd": 12,
        "columnStart": 4,
        "columnEnd": 52
      }
    },
    {
      "rule": "aptGetInstallUseY",
      "position": {
        "lineStart": 44,
        "lineEnd": 44,
        "columnStart": 18,
        "columnEnd": 51
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 11,
        "lineEnd": 11,
        "columnStart": 4,
        "columnEnd": 40
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 40,
        "lineEnd": 40,
        "columnStart": 4,
        "columnEnd": 49
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 42,
        "lineEnd": 42,
        "columnStart": 4,
        "columnEnd": 53
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 44,
        "lineEnd": 44,
        "columnStart": 18,
        "columnEnd": 51
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 11,
        "lineEnd": 11,
        "columnStart": 4,
        "columnEnd": 40
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 40,
        "lineEnd": 40,
        "columnStart": 4,
        "columnEnd": 49
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 42,
        "lineEnd": 42,
        "columnStart": 4,
        "columnEnd": 53
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 44,
        "lineEnd": 44,
        "columnStart": 18,
        "columnEnd": 51
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "ARG OVERLAY_WS=/opt/ws\n\n# multi-stage for caching\nFROM ros:foxy\n\n# clone overlay source\nARG OVERLAY_WS\nWORKDIR $OVERLAY_WS\nCOPY rosdep.sh /tmp/rosdep.sh\nRUN . /opt/ros/$ROS_DISTRO/setup.sh && \\\n    apt-get update && \\\n    apt install --no-install-recommends -y git cmake python3-pip && \\\n    pip3 install --no-cache-dir -U colcon-common-extensions vcstool && rm -rf /var/lib/apt/lists/*;\n\nENV DEBIAN_FRONTEND noninteractive\n\nRUN /tmp/rosdep.sh && rm -rf /var/lib/apt/lists/*\n\n# RUN echo \"\\\n# repositories: \\n\\\n#   ros2/demos: \\n\\\n#     type: git \\n\\\n#     url: https://github.com/ros2/demos.git \\n\\\n#     version: ${ROS_DISTRO} \\n\\\n# \" > ../overlay.repos\n# RUN vcs import ./ < ../overlay.repos\n\n# copy manifests for caching\n# WORKDIR /opt\n# RUN mkdir -p /tmp/opt && \\\n#     find ./ -name \"package.xml\" | \\\n#       xargs cp --parents -t /tmp/opt && \\\n#     find ./ -name \"COLCON_IGNORE\" | \\\n#       xargs cp --parents -t /tmp/opt || true\nWORKDIR $OVERLAY_WS\n\nCOPY src/ src/\n\n# Install using rosdep. NOTE: Rosdep's -r will continue despite errors.\nRUN apt update && \\\n    apt-get install --no-install-recommends -y software-properties-common && \\\n    add-apt-repository ppa:borglab/gtsam-release-4.0 && \\\n    apt install --no-install-recommends -y libgtsam-dev libgtsam-unstable-dev && \\\n    rosdep update && rosdep install -y -r --from-paths src --ignore-src && rm -rf /var/lib/apt/lists/*;\nRUN apt update && apt install -y --no-install-recommends ros-foxy-lgsvl-bridge && rm -rf /var/lib/apt/lists/*;\n# install overlay dependencies\n\n\n# COPY --from=cacher $OVERLAY_WS/src ./src\n\n\n# build overlay source\n# COPY --from=cacher $OVERLAY_WS/src ./src\n# ARG OVERLAY_MIXINS=\"release\"\n# RUN . /opt/ros/$ROS_DISTRO/setup.sh && \\\n#     colcon build \\\n#       --packages-select \\\n#         demo_nodes_cpp \\\n#         demo_nodes_py \\\n#       --mixin $OVERLAY_MIXINS\nENV ROS_VERSION 2\n\nRUN . /opt/ros/foxy/setup.sh && colcon build\n\n# source entrypoint setup\n# ENV OVERLAY_WS $OVERLAY_WS\n# RUN sed --in-place --expression \\\n#       '$isource \"$OVERLAY_WS/install/setup.bash\"' \\\n#       /ros_entrypoint.sh\n\n# run launch file\n\nCOPY param/ param/\nCOPY data/ data/\nCOPY main.launch.py main.launch.py\n\nENV OVERLAY_WS $OVERLAY_WS\nRUN sed --in-place --expression \\\n      '$isource \"$OVERLAY_WS/install/setup.bash\"' \\\n      /ros_entrypoint.sh\n\nCMD [\"ros2\", \"launch\", \"main.launch.py\"]"
}