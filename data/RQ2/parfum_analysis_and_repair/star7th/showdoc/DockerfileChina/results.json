{
  "startTime": 1674249414701,
  "endTime": 1674249415559,
  "originalSmells": [
    {
      "rule": "npmCacheCleanAfterInstall",
      "position": {
        "lineStart": 12,
        "lineEnd": 12,
        "columnStart": 31,
        "columnEnd": 84
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM  registry.cn-shenzhen.aliyuncs.com/star7th/showdoc:latest\n\nRUN rm -rf /var/www/html/*\nRUN rm -rf /showdoc_data/*\n\nCOPY ./ /var/www/html/\nRUN mkdir -p /showdoc_data/html\nRUN cp -R /var/www/html/ /showdoc_data/\nRUN rm -rf /app && ln -s /var/www/html /app\nRUN echo \"<?php echo file_get_contents('index.html'); ?>\" > /var/www/html/web/index.php\n\nRUN mv /showdoc_data/html/mock/ /showdoc_data/mock\nRUN ( cd /showdoc_data/mock/ && npm install --registry=https://registry.npmmirror.com) && npm cache clean --force;\n\n# 写环境变量\nENV SHOWDOC_DOCKER_VERSION 2.2\n\nCMD if [ ! -f \"/var/www/html/index.php\" ]; then \\cp -fr /showdoc_data/html/ /var/www/ ;fi \\ \n    ;chmod 777 -R /var/www/ \\ \n    ;(sleep 3 && cd /showdoc_data/html/server && php index.php /api/update/dockerUpdateCode && chmod 777 -R /var/www/ ) \\\n    ;(sleep 30 && cd /showdoc_data/mock/ && npm run start) \\\n    & supervisord"
}