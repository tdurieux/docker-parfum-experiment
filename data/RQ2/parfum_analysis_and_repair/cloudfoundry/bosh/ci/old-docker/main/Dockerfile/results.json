{
  "startTime": 1674251358611,
  "endTime": 1674251360124,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 21,
        "lineEnd": 21,
        "columnStart": 4,
        "columnEnd": 82
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 22,
        "lineEnd": 22,
        "columnStart": 4,
        "columnEnd": 189
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 23,
        "lineEnd": 23,
        "columnStart": 4,
        "columnEnd": 105
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 7,
        "lineEnd": 16,
        "columnStart": 22,
        "columnEnd": 9
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 38,
        "lineEnd": 41,
        "columnStart": 4,
        "columnEnd": 21
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 48,
        "lineEnd": 48,
        "columnStart": 4,
        "columnEnd": 35
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 38,
        "lineEnd": 41,
        "columnStart": 4,
        "columnEnd": 21
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 48,
        "lineEnd": 48,
        "columnStart": 4,
        "columnEnd": 35
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 7,
        "lineEnd": 16,
        "columnStart": 22,
        "columnEnd": 9
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 38,
        "lineEnd": 41,
        "columnStart": 4,
        "columnEnd": 21
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 48,
        "lineEnd": 48,
        "columnStart": 4,
        "columnEnd": 35
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 38,
        "lineEnd": 41,
        "columnStart": 4,
        "columnEnd": 21
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 48,
        "lineEnd": 48,
        "columnStart": 4,
        "columnEnd": 59
      }
    }
  ],
  "repairedDockerfile": "FROM bosh/main-ruby-go\n\nENV LANG en_US.UTF-8\nENV LC_ALL en_US.UTF-8\nRUN locale-gen en_US.UTF-8\n\n# BOSH dependencies\nRUN apt-get update && apt-get install --no-install-recommends -y \\\n\tlibmariadb-client-lgpl-dev \\\n\tredis-server \\\n\tlibpq-dev \\\n\tsqlite3 \\\n\tlibsqlite3-dev \\\n\tmercurial \\\n\tlsof \\\n\tunzip \\\n\trealpath \\\n\t&& apt-get clean && rm -rf /var/lib/apt/lists/*;\n\n# UAA dependencies\nRUN mkdir -p /tmp/integration-uaa/cloudfoundry-identity-uaa-2.0.3\nRUN curl -f -L https://s3.amazonaws.com/bosh-dependencies/apache-tomcat-8.0.21.tar.gz | (cd /tmp/integration-uaa/cloudfoundry-identity-uaa-2.0.3 && tar xfz -)\nRUN curl -f --output /tmp/integration-uaa/cloudfoundry-identity-uaa-2.0.3/apache-tomcat-8.0.21/webapps/uaa.war -L https://s3.amazonaws.com/bosh-dependencies/cloudfoundry-identity-uaa-2.0.3.war\nRUN curl -f -L --output /usr/local/bin/jq https://github.com/stedolan/jq/releases/download/jq-1.5/jq-linux64 && chmod +x /usr/local/bin/jq\n\nADD install-java.sh /tmp/install-java.sh\nRUN chmod a+x /tmp/install-java.sh\nRUN cd /tmp && ./install-java.sh && rm install-java.sh\nENV JAVA_HOME /usr/lib/jvm/zulu8.23.0.3-jdk8.0.144-linux_x64\nENV PATH $JAVA_HOME/bin:$PATH\n\nRUN git config --global user.email \"cf-bosh-eng+bosh-ci@pivotal.io\"\nRUN git config --global user.name \"BOSH CI\"\n\nRUN date > /var/docker-image-timestamp\n\n# BOSH dependencies\nRUN echo \"deb http://apt.postgresql.org/pub/repos/apt/ xenial-pgdg main\" > /etc/apt/sources.list.d/pgdg.list && wget -qO- https://www.postgresql.org/media/keys/ACCC4CF8.asc | apt-key add - && apt-get update\nRUN apt-get install --no-install-recommends -y \\\n\tmysql-client \\\n\tpostgresql-10 \\\n\tpostgresql-client-10 \\\n\t&& apt-get clean && rm -rf /var/lib/apt/lists/*;\n\n# mysql must be run as root\n# mysql user: root/password\nRUN echo 'mysql-server mysql-server/root_password password password' | debconf-set-selections\nRUN echo 'mysql-server mysql-server/root_password_again password password' | debconf-set-selections\nRUN apt-get install --no-install-recommends -y mysql-server && apt-get clean && rm -rf /var/lib/apt/lists/*;\n"
}