{
  "startTime": 1674250049773,
  "endTime": 1674250052529,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 223,
        "lineEnd": 223,
        "columnStart": 18,
        "columnEnd": 40
      }
    },
    {
      "rule": "configureShouldUseBuildFlag",
      "position": {
        "lineStart": 79,
        "lineEnd": 79,
        "columnStart": 8,
        "columnEnd": 98
      }
    },
    {
      "rule": "configureShouldUseBuildFlag",
      "position": {
        "lineStart": 100,
        "lineEnd": 100,
        "columnStart": 8,
        "columnEnd": 19
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 77,
        "lineEnd": 77,
        "columnStart": 8,
        "columnEnd": 34
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 174,
        "lineEnd": 174,
        "columnStart": 8,
        "columnEnd": 42
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 194,
        "lineEnd": 194,
        "columnStart": 8,
        "columnEnd": 41
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 239,
        "lineEnd": 239,
        "columnStart": 8,
        "columnEnd": 46
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 290,
        "lineEnd": 290,
        "columnStart": 8,
        "columnEnd": 38
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 355,
        "lineEnd": 355,
        "columnStart": 8,
        "columnEnd": 44
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 149,
        "lineEnd": 149,
        "columnStart": 8,
        "columnEnd": 50
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 156,
        "lineEnd": 156,
        "columnStart": 8,
        "columnEnd": 54
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 162,
        "lineEnd": 162,
        "columnStart": 8,
        "columnEnd": 31
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 170,
        "lineEnd": 170,
        "columnStart": 8,
        "columnEnd": 31
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 179,
        "lineEnd": 179,
        "columnStart": 8,
        "columnEnd": 31
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 182,
        "lineEnd": 182,
        "columnStart": 8,
        "columnEnd": 31
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 204,
        "lineEnd": 204,
        "columnStart": 8,
        "columnEnd": 33
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 207,
        "lineEnd": 207,
        "columnStart": 8,
        "columnEnd": 29
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 215,
        "lineEnd": 215,
        "columnStart": 8,
        "columnEnd": 33
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 219,
        "lineEnd": 219,
        "columnStart": 8,
        "columnEnd": 31
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 222,
        "lineEnd": 222,
        "columnStart": 8,
        "columnEnd": 31
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 265,
        "lineEnd": 265,
        "columnStart": 8,
        "columnEnd": 36
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 272,
        "lineEnd": 272,
        "columnStart": 8,
        "columnEnd": 36
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 297,
        "lineEnd": 297,
        "columnStart": 8,
        "columnEnd": 54
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 303,
        "lineEnd": 303,
        "columnStart": 8,
        "columnEnd": 29
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 312,
        "lineEnd": 312,
        "columnStart": 8,
        "columnEnd": 33
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 322,
        "lineEnd": 322,
        "columnStart": 8,
        "columnEnd": 38
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 326,
        "lineEnd": 326,
        "columnStart": 8,
        "columnEnd": 35
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 328,
        "lineEnd": 328,
        "columnStart": 8,
        "columnEnd": 30
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 329,
        "lineEnd": 329,
        "columnStart": 8,
        "columnEnd": 33
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 331,
        "lineEnd": 331,
        "columnStart": 8,
        "columnEnd": 39
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 332,
        "lineEnd": 332,
        "columnStart": 8,
        "columnEnd": 32
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 336,
        "lineEnd": 336,
        "columnStart": 8,
        "columnEnd": 35
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 149,
        "lineEnd": 149,
        "columnStart": 8,
        "columnEnd": 50
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 156,
        "lineEnd": 156,
        "columnStart": 8,
        "columnEnd": 54
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 162,
        "lineEnd": 162,
        "columnStart": 8,
        "columnEnd": 31
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 170,
        "lineEnd": 170,
        "columnStart": 8,
        "columnEnd": 31
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 179,
        "lineEnd": 179,
        "columnStart": 8,
        "columnEnd": 31
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 182,
        "lineEnd": 182,
        "columnStart": 8,
        "columnEnd": 31
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 204,
        "lineEnd": 204,
        "columnStart": 8,
        "columnEnd": 33
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 207,
        "lineEnd": 207,
        "columnStart": 8,
        "columnEnd": 29
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 209,
        "lineEnd": 209,
        "columnStart": 8,
        "columnEnd": 70
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 215,
        "lineEnd": 215,
        "columnStart": 8,
        "columnEnd": 33
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 219,
        "lineEnd": 219,
        "columnStart": 8,
        "columnEnd": 31
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 222,
        "lineEnd": 222,
        "columnStart": 8,
        "columnEnd": 31
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 224,
        "lineEnd": 224,
        "columnStart": 8,
        "columnEnd": 54
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 265,
        "lineEnd": 265,
        "columnStart": 8,
        "columnEnd": 36
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 272,
        "lineEnd": 272,
        "columnStart": 8,
        "columnEnd": 36
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 297,
        "lineEnd": 297,
        "columnStart": 8,
        "columnEnd": 54
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 303,
        "lineEnd": 303,
        "columnStart": 8,
        "columnEnd": 29
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 312,
        "lineEnd": 312,
        "columnStart": 8,
        "columnEnd": 33
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 322,
        "lineEnd": 322,
        "columnStart": 8,
        "columnEnd": 38
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 326,
        "lineEnd": 326,
        "columnStart": 8,
        "columnEnd": 35
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 328,
        "lineEnd": 328,
        "columnStart": 8,
        "columnEnd": 30
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 329,
        "lineEnd": 329,
        "columnStart": 8,
        "columnEnd": 33
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 331,
        "lineEnd": 331,
        "columnStart": 8,
        "columnEnd": 39
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 332,
        "lineEnd": 332,
        "columnStart": 8,
        "columnEnd": 32
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 336,
        "lineEnd": 336,
        "columnStart": 8,
        "columnEnd": 35
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 73,
        "lineEnd": 73,
        "columnStart": 26,
        "columnEnd": 147
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 84,
        "lineEnd": 84,
        "columnStart": 26,
        "columnEnd": 106
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 95,
        "lineEnd": 95,
        "columnStart": 26,
        "columnEnd": 131
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 104,
        "lineEnd": 104,
        "columnStart": 26,
        "columnEnd": 123
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 112,
        "lineEnd": 112,
        "columnStart": 26,
        "columnEnd": 77
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 117,
        "lineEnd": 117,
        "columnStart": 26,
        "columnEnd": 81
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 123,
        "lineEnd": 123,
        "columnStart": 26,
        "columnEnd": 143
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 149,
        "lineEnd": 149,
        "columnStart": 8,
        "columnEnd": 50
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 156,
        "lineEnd": 156,
        "columnStart": 8,
        "columnEnd": 54
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 162,
        "lineEnd": 162,
        "columnStart": 8,
        "columnEnd": 31
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 170,
        "lineEnd": 170,
        "columnStart": 8,
        "columnEnd": 31
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 179,
        "lineEnd": 179,
        "columnStart": 8,
        "columnEnd": 31
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 182,
        "lineEnd": 182,
        "columnStart": 8,
        "columnEnd": 31
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 204,
        "lineEnd": 204,
        "columnStart": 8,
        "columnEnd": 33
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 207,
        "lineEnd": 207,
        "columnStart": 8,
        "columnEnd": 29
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 209,
        "lineEnd": 209,
        "columnStart": 8,
        "columnEnd": 70
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 215,
        "lineEnd": 215,
        "columnStart": 8,
        "columnEnd": 33
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 219,
        "lineEnd": 219,
        "columnStart": 8,
        "columnEnd": 31
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 222,
        "lineEnd": 222,
        "columnStart": 8,
        "columnEnd": 31
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 224,
        "lineEnd": 224,
        "columnStart": 8,
        "columnEnd": 54
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 265,
        "lineEnd": 265,
        "columnStart": 8,
        "columnEnd": 36
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 272,
        "lineEnd": 272,
        "columnStart": 8,
        "columnEnd": 36
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 297,
        "lineEnd": 297,
        "columnStart": 8,
        "columnEnd": 54
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 303,
        "lineEnd": 303,
        "columnStart": 8,
        "columnEnd": 29
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 312,
        "lineEnd": 312,
        "columnStart": 8,
        "columnEnd": 33
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 322,
        "lineEnd": 322,
        "columnStart": 8,
        "columnEnd": 38
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 326,
        "lineEnd": 326,
        "columnStart": 8,
        "columnEnd": 35
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 328,
        "lineEnd": 328,
        "columnStart": 8,
        "columnEnd": 30
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 329,
        "lineEnd": 329,
        "columnStart": 8,
        "columnEnd": 33
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 331,
        "lineEnd": 331,
        "columnStart": 8,
        "columnEnd": 39
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 332,
        "lineEnd": 332,
        "columnStart": 8,
        "columnEnd": 32
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 336,
        "lineEnd": 336,
        "columnStart": 8,
        "columnEnd": 35
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 149,
        "lineEnd": 149,
        "columnStart": 8,
        "columnEnd": 74
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 156,
        "lineEnd": 156,
        "columnStart": 8,
        "columnEnd": 78
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 162,
        "lineEnd": 162,
        "columnStart": 8,
        "columnEnd": 55
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 170,
        "lineEnd": 170,
        "columnStart": 8,
        "columnEnd": 55
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 179,
        "lineEnd": 179,
        "columnStart": 8,
        "columnEnd": 55
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 182,
        "lineEnd": 182,
        "columnStart": 8,
        "columnEnd": 55
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 204,
        "lineEnd": 204,
        "columnStart": 8,
        "columnEnd": 57
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 207,
        "lineEnd": 207,
        "columnStart": 8,
        "columnEnd": 53
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 209,
        "lineEnd": 209,
        "columnStart": 8,
        "columnEnd": 70
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 215,
        "lineEnd": 215,
        "columnStart": 8,
        "columnEnd": 57
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 219,
        "lineEnd": 219,
        "columnStart": 8,
        "columnEnd": 55
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 222,
        "lineEnd": 222,
        "columnStart": 8,
        "columnEnd": 55
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 224,
        "lineEnd": 224,
        "columnStart": 8,
        "columnEnd": 54
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 265,
        "lineEnd": 265,
        "columnStart": 8,
        "columnEnd": 60
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 272,
        "lineEnd": 272,
        "columnStart": 8,
        "columnEnd": 60
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 297,
        "lineEnd": 297,
        "columnStart": 8,
        "columnEnd": 78
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 303,
        "lineEnd": 303,
        "columnStart": 8,
        "columnEnd": 53
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 312,
        "lineEnd": 312,
        "columnStart": 8,
        "columnEnd": 57
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 322,
        "lineEnd": 322,
        "columnStart": 8,
        "columnEnd": 62
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 326,
        "lineEnd": 326,
        "columnStart": 8,
        "columnEnd": 59
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 328,
        "lineEnd": 328,
        "columnStart": 8,
        "columnEnd": 54
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 329,
        "lineEnd": 329,
        "columnStart": 8,
        "columnEnd": 57
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 331,
        "lineEnd": 331,
        "columnStart": 8,
        "columnEnd": 63
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 332,
        "lineEnd": 332,
        "columnStart": 8,
        "columnEnd": 56
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 336,
        "lineEnd": 336,
        "columnStart": 8,
        "columnEnd": 59
      }
    }
  ],
  "repairedDockerfile": "# go get installs tools to /go/bin/\nARG GO_BIN=/go/bin\n# cargo installs tools to /usr/local/cargo/bin/\nARG RUST_BIN=/usr/local/cargo/bin\n\n# Golang Builder Stage #\nFROM golang:buster as go-builder\n\n    # Used for cache busting to grab latest version of tools\n    COPY .cache-buster /tmp/\n\n    # https://golang.org/ref/mod#version-queries\n    RUN go install github.com/zmap/zannotate/cmd/zannotate@master\n    RUN go install github.com/JustinAzoff/json-cut@master\n    # gron - help find the path to the json data you want\n    RUN go install github.com/tomnomnom/gron@master\n    # zeek passive dns\n    RUN go install github.com/JustinAzoff/bro-pdns@main\n    # pxl - image viewer\n    RUN go install github.com/ichinaski/pxl@master\n    # geoipupdate - Maxmind data downloader\n    #RUN go install github.com/maxmind/geoipupdate/v4/cmd/geoipupdate@master\n    # miller - text delimited processor\n    RUN go install github.com/johnkerl/miller/cmd/mlr@main\n    # RUN go install github.com/brimdata/zync/cmd/zync@main\n\n# Rust Builder Stage #\nFROM rust:buster as rust-builder\n    ARG RUST_BIN\n\n    # Used for cache busting to grab latest version of tools\n    COPY .cache-buster /tmp/\n\n    # exa - fancy ls\n    #RUN cargo install exa\n    # fd - better find\n    RUN cargo install fd-find\n    # hyperfine - benachmarking\n    RUN cargo install hyperfine\n    # ripgrep - fast grep\n    RUN cargo install ripgrep\n    # zoxide - smart cd\n    RUN cargo install zoxide\n    # bat - fancy cat\n    RUN cargo install bat\n    # xsv - fast csv / text delimited processing\n    RUN cargo install xsv\n    # dust - file / directory size analyzer\n    RUN cargo install du-dust --bin dust\n    # tealdeer - tldr cheatsheet client\n    RUN cargo install tealdeer\n    # zellij - terminal multiplexer\n    RUN cargo install zellij\n    # amp - text editor\n    RUN cargo install amp\n    # sd - better find and replace (sed)\n    RUN cargo install sd\n    # frawk - fast awk (TODO: check readme for better build instructions)\n    # RUN cargo +nightly install frawk --no-default-features --features use_jemalloc,allow_avx2,unstable\n    #RUN cargo install frawk --no-default-features --features use_jemalloc,allow_avx2\n\n# C/C++ Builder Stage #\nFROM ubuntu:21.04 as c-builder\n\n    ENV DEBIAN_FRONTEND noninteractive\n    ENV DEBCONF_NONINTERACTIVE_SEEN true\n\n    # Used for cache busting to grab latest version of tools\n    COPY .cache-buster /tmp/\n\n    # RUN apt-get update && apt-get -y install ca-certficates git gcc g++ make wget\n\n    # SiLK IPSet\n    RUN apt-get update && apt-get -y install --no-install-recommends wget make gcc g++ libpcap-dev python python-dev libglib2.0-dev ca-certificates && rm -rf /var/lib/apt/lists/*;\n    ARG IPSET_VERSION=3.18.0\n    RUN wget -nv -O /tmp/silk-ipset.tar.gz https://tools.netsa.cert.org/releases/silk-ipset-${IPSET_VERSION}.tar.gz \\\n     && cd /tmp \\\n     && tar -xzf silk-ipset.tar.gz \\\n     && cd /tmp/silk-ipset-${IPSET_VERSION} \\\n     && ./configure --build=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\" --prefix=/opt/silk --enable-ipv6 --enable-ipset-compatibility=${IPSET_VERSION} \\\n     && make \\\n     && make install && rm silk-ipset.tar.gz\n\n     # grepcidr\n    RUN apt-get update && apt-get -y install --no-install-recommends wget make gcc g++ git ca-certificates && rm -rf /var/lib/apt/lists/*;\n    # Version 3; change to \"main\" for latest\n    ARG GREPCIDR_VERSION=main\n    RUN git clone https://github.com/jrlevine/grepcidr3.git /tmp/grepcidr \\\n     && cd /tmp/grepcidr \\\n     && git checkout $GREPCIDR_VERSION \\\n     && make\n\n    # TODO jq https://github.com/stedolan/jq\n\n    # pspg - pager\n    RUN apt-get update && apt-get -y install --no-install-recommends wget make gcc g++ git ca-certificates libpq-dev libncurses-dev && rm -rf /var/lib/apt/lists/*;\n    ARG PSPG_VERSION=5.5.1\n    RUN git clone https://github.com/okbob/pspg.git /tmp/pspg \\\n     && cd /tmp/pspg \\\n     && git checkout $PSPG_VERSION \\\n     && ./configure --build=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\" \\\n     && make\n\n    # ugrep\n    RUN apt-get update && apt-get -y install --no-install-recommends git ca-certificates gcc g++ make libpcre2-dev libz-dev && rm -rf /var/lib/apt/lists/*;\n    ARG UGREP_VERSION=master\n    RUN git clone https://github.com/Genivia/ugrep.git /tmp/ugrep \\\n     && cd /tmp/ugrep \\\n     && git checkout $UGREP_VERSION \\\n     && ./build.sh\n\n     # zeek-cut\n    RUN apt-get update && apt-get -y install --no-install-recommends wget gcc && rm -rf /var/lib/apt/lists/*;\n    RUN wget -nv -O /tmp/zeek-cut.c https://raw.githubusercontent.com/zeek/zeek-aux/master/zeek-cut/zeek-cut.c \\\n     && gcc --static -o /tmp/zeek-cut /tmp/zeek-cut.c\n\n    # moreutils - https://joeyh.name/code/moreutils/\n    RUN apt-get update && apt-get -y install --no-install-recommends make gcc git && rm -rf /var/lib/apt/lists/*;\n    RUN git clone git://git.joeyh.name/moreutils /tmp/moreutils \\\n    && cd /tmp/moreutils \\\n    && make isutf8 ifdata ifne pee sponge mispipe lckdo parallel errno\n\n    # boxes - https://boxes.thomasjensen.com/build.html\n    RUN apt-get update && apt-get -y install --no-install-recommends make gcc git diffutils flex bison libunistring-dev libpcre2-dev vim-common && rm -rf /var/lib/apt/lists/*;\n    ARG BOXES_VERSION=2.1.1\n    RUN git clone -b v$BOXES_VERSION --depth=1 https://github.com/ascii-boxes/boxes /tmp/boxes \\\n    && cd /tmp/boxes \\\n    && make && make test\n\n# Package Installer Stage #\nFROM ubuntu:21.04 as base\nARG GO_BIN\nARG RUST_BIN\nENV BIN=/usr/local/bin\nENV ZSH_COMPLETIONS=/usr/share/zsh/vendor-completions\n\n\n# NOTE: Intentionally written with many layers for efficient caching\n# and readability. All layers are squashed at the end.\n\n## Setup ##\n    ENV DEBIAN_FRONTEND noninteractive\n    ENV DEBCONF_NONINTERACTIVE_SEEN true\n\n    # Used for cache busting to grab latest version of tools\n    COPY .cache-buster /tmp/\n    RUN apt-get update\n\n    # set default shell to zsh so apt automatically detects and adds zsh completions\n    RUN apt-get -y --no-install-recommends install zsh git curl unzip wget && rm -rf /var/lib/apt/lists/*;\n    SHELL [\"zsh\", \"-c\"]\n\n## System Utils ##\n    # bat - fancy cat\n    COPY --from=rust-builder $RUST_BIN/bat $BIN\n    # boxes\n    RUN apt-get -y --no-install-recommends install libunistring2 libpcre2-32-0 && rm -rf /var/lib/apt/lists/*;\n    COPY --from=c-builder /tmp/boxes/out/boxes $BIN\n    RUN wget -nv -O /usr/share/boxes https://raw.githubusercontent.com/ascii-boxes/boxes/master/boxes-config\n    # dust - du alternative\n    COPY --from=rust-builder $RUST_BIN/dust $BIN\n    # entr - perform action on file change\n    RUN apt-get -y --no-install-recommends install entr && rm -rf /var/lib/apt/lists/*;\n    # exa - ls alternative\n    ARG EXA_VERSION=0.10.1\n    RUN wget -nv -O /tmp/exa.zip https://github.com/ogham/exa/releases/download/v${EXA_VERSION}/exa-linux-x86_64-v${EXA_VERSION}.zip \\\n     && unzip -d /tmp/exa /tmp/exa.zip \\\n     && mv /tmp/exa/bin/exa $BIN\n    # fd - find alternative\n    COPY --from=rust-builder $RUST_BIN/fd $BIN\n    RUN apt-get -y --no-install-recommends install file && rm -rf /var/lib/apt/lists/*;\n    # fzf - fuzzy finder\n    ARG FZF_VERSION=0.30.0\n    RUN wget -nv -O /tmp/fzf.tar.gz https://github.com/junegunn/fzf/releases/download/${FZF_VERSION}/fzf-${FZF_VERSION}-linux_amd64.tar.gz \\\n     && tar -xz -f /tmp/fzf.tar.gz -C $BIN && rm /tmp/fzf.tar.gz\n    ARG HCK_VERSION=0.7.2\n    RUN wget -nv -O $BIN/hck https://github.com/sstadick/hck/releases/download/v${HCK_VERSION}/hck-linux-amd64 \\\n     && chmod +x $BIN/hck\n    # htop - process monitor\n    RUN apt-get -y --no-install-recommends install htop && rm -rf /var/lib/apt/lists/*;\n    # hyperfine - command benchmarking; like time on steroids\n    COPY --from=rust-builder $RUST_BIN/hyperfine $BIN\n    RUN apt-get -y --no-install-recommends install less && rm -rf /var/lib/apt/lists/*;\n    # moreutils\n    COPY --from=c-builder /tmp/moreutils/chronic $BIN\n    COPY --from=c-builder /tmp/moreutils/combine $BIN\n    COPY --from=c-builder /tmp/moreutils/ifne $BIN\n    COPY --from=c-builder /tmp/moreutils/pee $BIN\n    COPY --from=c-builder /tmp/moreutils/sponge $BIN\n    COPY --from=c-builder /tmp/moreutils/zrun $BIN\n    # navi - cheatsheet\n    # /root/.local/share/navi/\n    ARG NAVI_VERSION=2.20.1\n    RUN wget -nv -O /tmp/navi.tar.gz https://github.com/denisidoro/navi/releases/download/v${NAVI_VERSION}/navi-v${NAVI_VERSION}-x86_64-unknown-linux-musl.tar.gz \\\n     && tar -xzf /tmp/navi.tar.gz -C $BIN \\\n     && mkdir -p /root/.local/share/navi/cheats && rm /tmp/navi.tar.gz\n    COPY zsh/.config/navi/config.yaml /root/.config/navi/config.yaml\n    # tealdeer - tldr client\n    COPY --from=rust-builder $RUST_BIN/tldr $BIN/\n    COPY zsh/.config/tealdeer/config.toml /root/.config/tealdeer/config.toml\n    RUN mkdir -p /usr/share/zsh/site-functions/ \\\n     && wget -nv -O /usr/share/zsh/site-functions/_tldr https://raw.githubusercontent.com/dbrgn/tealdeer/master/completion/zsh_tealdeer\n    #RUN apt-get -y install parallel\n    # pspg - Pager\n    RUN apt-get -y --no-install-recommends install libpq5 && rm -rf /var/lib/apt/lists/*;\n    COPY --from=c-builder /tmp/pspg/pspg $BIN\n    # pv - Pipeviewer\n    RUN apt-get -y --no-install-recommends install pv && rm -rf /var/lib/apt/lists/*;\n    # Python\n    RUN apt-get -y install --no-install-recommends python3 python3-pip \\\n     && ln -s /usr/bin/python3 /usr/bin/python && rm -rf /var/lib/apt/lists/*;\n    COPY --from=rust-builder $RUST_BIN/sd $BIN\n    # zoxide - better directory traversal\n    COPY --from=rust-builder $RUST_BIN/zoxide $BIN\n    # zutils - better zcat\n    RUN apt-get -y --no-install-recommends install zutils && rm -rf /var/lib/apt/lists/*;\n\n## Terminal Multiplexers ##\n    COPY --from=rust-builder $RUST_BIN/zellij $BIN\n    RUN apt-get -y --no-install-recommends install tmux && rm -rf /var/lib/apt/lists/*;\n\n## Editors ##\n    RUN apt-get -y --no-install-recommends install nano && rm -rf /var/lib/apt/lists/*;\n    RUN ( cd $BIN; curl -f https://getmic.ro | bash)\n    RUN apt-get -y install --no-install-recommends vim && rm -rf /var/lib/apt/lists/*;\n    COPY --from=rust-builder $RUST_BIN/amp $BIN\n\n## Data Processing ##\n    # CSV/TSV/JSON toolkit and lightweight streaming stats\n    ARG MILLER_VERSION=5.10.2\n    RUN wget -nv -O $BIN/mlr5 https://github.com/johnkerl/miller/releases/download/v${MILLER_VERSION}/mlr.linux.x86_64 \\\n     && chmod +x $BIN/mlr5\n    COPY --from=go-builder $GO_BIN/mlr $BIN/mlr6\n    RUN ln -s $BIN/mlr6 $BIN/mlr\n    # CSV/TSV toolkit\n    COPY --from=rust-builder $RUST_BIN/xsv $BIN\n    # CSV/TSV toolkit\n    ARG TSVUTILS_VERSION=2.2.0\n    RUN wget -nv -O /tmp/tsv-utils.tar.gz https://github.com/eBay/tsv-utils/releases/download/v${TSVUTILS_VERSION}/tsv-utils-v${TSVUTILS_VERSION}_linux-x86_64_ldc2.tar.gz \\\n     && tar -xzf /tmp/tsv-utils.tar.gz -C /tmp \\\n     && mv /tmp/tsv-utils-v${TSVUTILS_VERSION}_linux-x86_64_ldc2/bin/keep-header $BIN \\\n     && mv /tmp/tsv-utils-v${TSVUTILS_VERSION}_linux-x86_64_ldc2/bin/csv2tsv $BIN \\\n    #  && mv /tmp/tsv-utils-v${TSVUTILS_VERSION}_linux-x86_64_ldc2/bin/number-lines $BIN \\\n     && mv /tmp/tsv-utils-v${TSVUTILS_VERSION}_linux-x86_64_ldc2/bin/tsv-append $BIN \\\n     && mv /tmp/tsv-utils-v${TSVUTILS_VERSION}_linux-x86_64_ldc2/bin/tsv-filter $BIN \\\n     && mv /tmp/tsv-utils-v${TSVUTILS_VERSION}_linux-x86_64_ldc2/bin/tsv-join $BIN \\\n    #  && mv /tmp/tsv-utils-v${TSVUTILS_VERSION}_linux-x86_64_ldc2/bin/tsv-pretty $BIN \\\n     && mv /tmp/tsv-utils-v${TSVUTILS_VERSION}_linux-x86_64_ldc2/bin/tsv-sample $BIN \\\n     && mv /tmp/tsv-utils-v${TSVUTILS_VERSION}_linux-x86_64_ldc2/bin/tsv-select $BIN \\\n     && mv /tmp/tsv-utils-v${TSVUTILS_VERSION}_linux-x86_64_ldc2/bin/tsv-split $BIN \\\n     && mv /tmp/tsv-utils-v${TSVUTILS_VERSION}_linux-x86_64_ldc2/bin/tsv-summarize $BIN \\\n     && mv /tmp/tsv-utils-v${TSVUTILS_VERSION}_linux-x86_64_ldc2/bin/tsv-uniq $BIN \\\n     && mv /tmp/tsv-utils-v${TSVUTILS_VERSION}_linux-x86_64_ldc2/extras/scripts/tsv-sort $BIN \\\n     && mv /tmp/tsv-utils-v${TSVUTILS_VERSION}_linux-x86_64_ldc2/extras/scripts/tsv-sort-fast $BIN && rm /tmp/tsv-utils.tar.gz\n    #COPY --from=rust-builder $RUST_BIN/frawk $BIN\n\n    # Misc useful tools from https://www.datascienceatthecommandline.com/\n    ADD https://raw.githubusercontent.com/jeroenjanssens/dsutils/master/body $BIN\n    ADD https://raw.githubusercontent.com/jeroenjanssens/dsutils/master/cols $BIN\n    ADD https://raw.githubusercontent.com/jeroenjanssens/dsutils/master/header $BIN\n    ADD https://raw.githubusercontent.com/jeroenjanssens/dsutils/master/dseq $BIN\n    ADD https://raw.githubusercontent.com/jeroenjanssens/dsutils/master/trim $BIN\n    RUN chmod +x $BIN/*\n\n    ### Graphing ###\n    RUN apt-get install --no-install-recommends -y colortest && rm -rf /var/lib/apt/lists/*;\n    # RUN python3 -m pip install git+https://github.com/piccolomo/plotext#egg=plotext\n    RUN python3 -m pip install 'plotext'\n    COPY --from=go-builder $GO_BIN/pxl $BIN\n\n    ### Grep ###\n    # grep, sed, awk, etc\n    RUN apt-get -y --no-install-recommends install coreutils && rm -rf /var/lib/apt/lists/*;\n    # RUN apt-get -y install ripgrep\n    COPY --from=rust-builder $RUST_BIN/rg $BIN\n    RUN wget -nv -O $ZSH_COMPLETIONS/_rg https://raw.githubusercontent.com/BurntSushi/ripgrep/master/complete/_rg\n    # RUN apt-get -y install ugrep\n    COPY --from=c-builder /tmp/ugrep/bin/ugrep $BIN\n    COPY --from=c-builder /tmp/ugrep/bin/ug $BIN\n\n    ### Zeek ###\n    # bro-pdns - Passive DNS for Zeek logs\n    COPY --from=go-builder $GO_BIN/bro-pdns $BIN\n\n    # zeek-cut\n    COPY --from=c-builder /tmp/zeek-cut $BIN/zeek-cut\n\n    # zq - zeek file processor\n    ARG ZQ_VERSION=1.1.0\n    RUN wget -nv -O /tmp/zq.tar.gz https://github.com/brimdata/zed/releases/download/v${ZQ_VERSION}/zed-v${ZQ_VERSION}.linux-amd64.tar.gz \\\n     && tar -xf /tmp/zq.tar.gz -C /tmp \\\n     && mv /tmp/zq $BIN \\\n     && mv /tmp/zed $BIN && rm /tmp/zq.tar.gz\n    # COPY --from=go-builder $GO_BIN/zync $BIN\n\n    # trace-summary\n    # install pysubnettree dependency\n    RUN apt-get -y --no-install-recommends install build-essential python3-dev && rm -rf /var/lib/apt/lists/*;\n    RUN python3 -m pip install pysubnettree\n    RUN wget -nv -O $BIN/trace-summary https://raw.githubusercontent.com/zeek/trace-summary/master/trace-summary \\\n     && chmod +x $BIN/trace-summary\n\n    ### JSON ###\n    RUN apt-get -y --no-install-recommends install jq && rm -rf /var/lib/apt/lists/*;\n    COPY --from=go-builder $GO_BIN/json-cut $BIN\n    COPY --from=go-builder $GO_BIN/gron $BIN\n\n    ### IP Addresses and OSINT ###\n    # grepcidr\n    COPY --from=c-builder /tmp/grepcidr/grepcidr $BIN\n\n    # ipcalc\n    RUN apt-get -y --no-install-recommends install ipcalc && rm -rf /var/lib/apt/lists/*;\n\n    # SiLK IPSet\n    COPY --from=c-builder /opt/silk/bin $BIN\n    COPY --from=c-builder /opt/silk/include /usr/local/include/\n    COPY --from=c-builder /opt/silk/lib /usr/local/lib/\n    COPY --from=c-builder /opt/silk/share /usr/local/share/\n\n    # zannotate\n    COPY --from=go-builder $GO_BIN/zannotate $BIN\n    RUN apt-get -y --no-install-recommends install geoipupdate && rm -rf /var/lib/apt/lists/*;\n\n## Network Utils ##\n    # dig\n    RUN apt-get -y --no-install-recommends install dnsutils && rm -rf /var/lib/apt/lists/*;\n    # traceroute alternative\n    RUN apt-get -y --no-install-recommends install mtr && rm -rf /var/lib/apt/lists/*;\n    RUN apt-get -y --no-install-recommends install netcat && rm -rf /var/lib/apt/lists/*;\n    # ping\n    RUN apt-get -y --no-install-recommends install iputils-ping && rm -rf /var/lib/apt/lists/*;\n    RUN apt-get -y --no-install-recommends install whois && rm -rf /var/lib/apt/lists/*;\n\n## Cleanup ##\n    # Strip binaries\n    RUN apt-get -y --no-install-recommends install binutils && rm -rf /var/lib/apt/lists/*;\n    RUN find /usr/local/bin -type f -exec strip {} \\; || true\n    RUN apt-get -y remove binutils\n    # Remove unnecessary files\n    RUN rm -rf /usr/share/icons\n    # Remove unecessary packages\n    RUN apt-get -y remove build-essential python3-dev\n    RUN apt-get -y autoremove\n\n## Shell customization ##\n    COPY zsh/.vimrc /root/\n    COPY zsh/.zshrc /root/\n    COPY zsh/.zlogout /root/\n    COPY zsh/.config/fd/ignore /root/.config/fd/ignore\n\n    # sheldon - plugin manager for zsh (and others)\n    ENV XDG_CONFIG_HOME /root/.config\n    ARG SHELDON_VERSION=0.6.6\n    RUN wget -nv -O /tmp/sheldon.tar.gz https://github.com/rossmacarthur/sheldon/releases/download/${SHELDON_VERSION}/sheldon-${SHELDON_VERSION}-x86_64-unknown-linux-musl.tar.gz \\\n     && tar -C /tmp -xzf /tmp/sheldon.tar.gz \\\n     && mv /tmp/sheldon $BIN && rm /tmp/sheldon.tar.gz\n    COPY zsh/.config/sheldon /root/.config/sheldon\n    RUN sheldon lock\n    # technically, sheldon source also does a sheldon lock if it doesn't exist\n    RUN sheldon source >/root/.config/sheldon/source.zsh\n    # delete the binary; it's large and we don't need it at runtime\n    RUN rm $BIN/sheldon\n\n## Cleanup ##\n    RUN rm -rf /tmp/*\n\n# Squash layers #\nFROM ubuntu:21.04\n\n## Squash all previous layers ##\n    COPY --from=base / /\n\n## Local files ##\n    COPY bin/* /usr/local/bin/\n    COPY cheatsheets/* /root/.local/share/navi/cheats/\n\n## Version info ##\n    ARG THT_HASH=undefined\n    RUN echo 'NAME=\"Threat Hunting Toolkit\"' > /etc/tht-release \\\n     && echo \"HASH=$THT_HASH\" >> /etc/tht-release \\\n     && echo \"DATE=$(date +%Y.%m.%d)\" >> /etc/tht-release\n\nCMD [\"zsh\"]\n\n# Metadata #\nLABEL org.opencontainers.image.source https://github.com/ethack/tht\n"
}