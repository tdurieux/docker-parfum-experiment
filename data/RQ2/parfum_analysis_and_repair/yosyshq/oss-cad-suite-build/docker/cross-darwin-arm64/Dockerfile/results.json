{
  "startTime": 1674254385529,
  "endTime": 1674254387559,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 53,
        "lineEnd": 54,
        "columnStart": 7,
        "columnEnd": 123
      }
    },
    {
      "rule": "wgetUseHttpsUrl",
      "position": {
        "lineStart": 265,
        "lineEnd": 265,
        "columnStart": 4,
        "columnEnd": 130
      }
    },
    {
      "rule": "wgetUseHttpsUrl",
      "position": {
        "lineStart": 268,
        "lineEnd": 268,
        "columnStart": 4,
        "columnEnd": 130
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 17,
        "lineEnd": 25,
        "columnStart": 4,
        "columnEnd": 19
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM yosyshq/cross-linux-x64:1.0 AS builder\n\n\nRUN cd /tmp \\\n    && RUSTUP_HOME=/opt/rust/rustup CARGO_HOME=/opt/rust/cargo rustup update \\\n    && cargo install --git https://github.com/indygreg/PyOxidizer --branch main apple-codesign\nRUN cd /tmp \\\n    && git clone https://github.com/mmicko/macdylibbundler \\\n    && cd macdylibbundler \\\n    && sed -i \"s,CXXFLAGS=-O2 -std=c++11,CXXFLAGS=-O2 -std=c++11 -static-libstdc++ -static-libgcc,g\" Makefile \\\n    && make\n\nFROM yosyshq/cross-base:1.0\n\nRUN set -e -x ; \\\n    apt -y update ; \\\n    apt -y upgrade ; \\\n    apt -y --no-install-recommends install \\\n        clang \\\n        pkgconf \\\n        libtool \\\n        python3-distutils \\\n        libxml2-dev \\\n        libz-dev \\\n        liblzma-dev \\\n        libssl-dev; \\\n    apt -y autoremove ; \\\n    rm -rf /var/lib/apt/lists/*\n\n# Taken from https://github.com/joseluisq/rust-linux-darwin-builder\n\n# Mac OS X SDK version\nARG OSX_SDK_VERSION=11.1\nARG OSX_SDK_SUM=97a916b0b68aae9dcd32b7d12422ede3e5f34db8e169fa63bfb18ec410b8f5d9\nARG OSX_VERSION_MIN=11.0\n\n# OS X Cross\nARG OSX_CROSS_COMMIT=8a716a43a72dab1db9630d7824ee0af3730cb8f9\n\n# Install OS X Cross\n# A Mac OS X cross toolchain for Linux, FreeBSD, OpenBSD and Android\n\nRUN set -eux \\\n    && echo \"Cloning osxcross...\" \\\n    && git clone https://github.com/tpoechtrager/osxcross.git /usr/local/osxcross \\\n    && cd /usr/local/osxcross \\\n    && git checkout -q \"${OSX_CROSS_COMMIT}\" \\\n    && rm -rf ./.git \\\n    && true\n\nRUN set -eux \\\n    && echo \"Building osxcross with ${OSX_SDK_VERSION}...\" \\\n    && cd /usr/local/osxcross \\\n    && curl -f -Lo \"./tarballs/MacOSX${OSX_SDK_VERSION}.sdk.tar.xz\" \\\n        \"https://github.com/joseluisq/macosx-sdks/releases/download/${OSX_SDK_VERSION}/MacOSX${OSX_SDK_VERSION}.sdk.tar.xz\" \\\n    && echo \"${OSX_SDK_SUM}  ./tarballs/MacOSX${OSX_SDK_VERSION}.sdk.tar.xz\" \\\n        | sha256sum -c - \\\n    && env UNATTENDED=yes OSX_VERSION_MIN=${OSX_VERSION_MIN} ./build.sh \\\n    && rm -rf *~ taballs *.tar.xz \\\n    && rm -rf /tmp/* \\\n    && true\n\n\nENV CROSS_NAME aarch64-apple-darwin20.2\n\nENV CROSS_PREFIX /opt/${CROSS_NAME}\n\nENV AS=/usr/local/osxcross/target/bin/${CROSS_NAME}-as \\\n    AR=/usr/local/osxcross/target/bin/${CROSS_NAME}-ar \\\n    CC=/usr/local/osxcross/target/bin/${CROSS_NAME}-clang \\\n    CXX=/usr/local/osxcross/target/bin/${CROSS_NAME}-clang++ \\\n    LD=/usr/local/osxcross/target/bin/${CROSS_NAME}-ld \\ \n    RANLIB=/usr/local/osxcross/target/bin/${CROSS_NAME}-ranlib \\\n    STRIP=/usr/local/osxcross/target/bin/${CROSS_NAME}-strip\n\nENV PATH /usr/local/osxcross/target/bin:$PATH\n\nRUN rustup target add aarch64-apple-darwin && \\\n    mkdir -p /.cargo && \\\n    echo \"[target.aarch64-apple-darwin]\" > /.cargo/config && \\\n    echo \"linker = \\\"aarch64-apple-darwin20.2-clang\\\"\" >> /.cargo/config && \\\n    echo \"ar = \\\"aarch64-apple-darwin20.2-ar\\\"\" >> /.cargo/config\n\n\nCOPY Toolchain.cmake ${CROSS_PREFIX}/\n\nENV MACOSX_DEPLOYMENT_TARGET=11.0\n\nENV CMAKE_TOOLCHAIN_FILE ${CROSS_PREFIX}/Toolchain.cmake\n\nENV OSXCROSS_MP_INC=1\n\nENV PKG_CONFIG_PATH /opt/local/lib/pkgconfig\n\nRUN cd /opt \\\n  && wget https://github.com/mmicko/macos-resources/releases/download/v2/Qt5.12.8-arm64.tar.gz \\\n  && tar xfz Qt5.12.8-arm64.tar.gz \\\n  && rm Qt5.12.8-arm64.tar.gz \\\n  && rm -rf /opt/Qt5.12.8/bin \\\n  && ln -s /usr/lib/qt5/bin /opt/Qt5.12.8/bin \\\n  && cd /tmp \\\n  && wget https://github.com/mmicko/macos-resources/releases/download/v2/macports-darwin-arm64.tar \\\n  && tar xf macports-darwin-arm64.tar \\\n  && cd / \\\n  && echo \"Unpack atk-2.36.0_2.darwin_20.arm64.tbz2\" \\\n  && tar xfj /tmp/atk/atk-2.36.0_2.darwin_20.arm64.tbz2 \\\n  && echo \"Unpack boost-1.71.0_4+no_single.darwin_20.arm64.tbz2\" \\\n  && tar xfj /tmp/boost/boost-1.71.0_4+no_single.darwin_20.arm64.tbz2 \\\n  && echo \"Unpack brotli-1.0.9_2.darwin_20.arm64.tbz2\" \\\n  && tar xfj /tmp/brotli/brotli-1.0.9_2.darwin_20.arm64.tbz2 \\\n  && echo \"Unpack bzip2-1.0.8_0.darwin_20.arm64.tbz2\" \\\n  && tar xfj /tmp/bzip2/bzip2-1.0.8_0.darwin_20.arm64.tbz2 \\\n  && echo \"Unpack cairo-1.16.0_2+quartz.darwin_20.arm64.tbz2\" \\\n  && tar xfj /tmp/cairo/cairo-1.16.0_2+quartz.darwin_20.arm64.tbz2 \\\n  && echo \"Unpack curl-7.76.1_0+ssl.darwin_20.arm64.tbz2\" \\\n  && tar xfj /tmp/curl/curl-7.76.1_0+ssl.darwin_20.arm64.tbz2 \\\n  && echo \"Unpack eigen3-3.3.9_0.darwin_20.noarch.tbz2\" \\\n  && tar xfj /tmp/eigen3/eigen3-3.3.9_0.darwin_20.noarch.tbz2 \\\n  && echo \"Unpack expat-2.3.0_0.darwin_20.arm64.tbz2\" \\\n  && tar xfj /tmp/expat/expat-2.3.0_0.darwin_20.arm64.tbz2 \\\n  && echo \"Unpack fontconfig-2.13.1_1.darwin_20.arm64.tbz2\" \\\n  && tar xfj /tmp/fontconfig/fontconfig-2.13.1_1.darwin_20.arm64.tbz2 \\\n  && echo \"Unpack freetype-2.10.4_0.darwin_20.arm64.tbz2\" \\\n  && tar xfj /tmp/freetype/freetype-2.10.4_0.darwin_20.arm64.tbz2 \\\n  && echo \"Unpack fribidi-1.0.10_0.darwin_20.arm64.tbz2\" \\\n  && tar xfj /tmp/fribidi/fribidi-1.0.10_0.darwin_20.arm64.tbz2 \\\n  && echo \"Unpack gdbm-1.19_0.darwin_20.arm64.tbz2\" \\\n  && tar xfj /tmp/gdbm/gdbm-1.19_0.darwin_20.arm64.tbz2 \\\n  && echo \"Unpack gdk-pixbuf2-2.42.2_2.darwin_20.arm64.tbz2\" \\\n  && tar xfj /tmp/gdk-pixbuf2/gdk-pixbuf2-2.42.2_2.darwin_20.arm64.tbz2 \\\n  && echo \"Unpack gettext-0.19.8.1_2.darwin_20.arm64.tbz2\" \\\n  && tar xfj /tmp/gettext/gettext-0.19.8.1_2.darwin_20.arm64.tbz2 \\\n  && echo \"Unpack glib2-2.58.3_1+quartz.darwin_20.arm64.tbz2\" \\\n  && tar xfj /tmp/glib2/glib2-2.58.3_1+quartz.darwin_20.arm64.tbz2 \\\n  && echo \"Unpack gmp-6.2.1_0.darwin_20.arm64.tbz2\" \\\n  && tar xfj /tmp/gmp/gmp-6.2.1_0.darwin_20.arm64.tbz2 \\\n  && echo \"Unpack gobject-introspection-1.60.2_6.darwin_20.arm64.tbz2\" \\\n  && tar xfj /tmp/gobject-introspection/gobject-introspection-1.60.2_6.darwin_20.arm64.tbz2 \\\n  && echo \"Unpack graphite2-1.3.13_1.darwin_20.arm64.tbz2\" \\\n  && tar xfj /tmp/graphite2/graphite2-1.3.13_1.darwin_20.arm64.tbz2 \\\n  && echo \"Unpack gtk3-3.24.23_0+quartz.darwin_20.arm64.tbz2\" \\\n  && tar xfj /tmp/gtk3/gtk3-3.24.23_0+quartz.darwin_20.arm64.tbz2 \\\n  && echo \"Unpack harfbuzz-2.8.1_0.darwin_20.arm64.tbz2\" \\\n  && tar xfj /tmp/harfbuzz/harfbuzz-2.8.1_0.darwin_20.arm64.tbz2 \\\n  && echo \"Unpack hidapi-0.9.0_0.darwin_20.arm64.tbz2\" \\\n  && tar xfj /tmp/hidapi/hidapi-0.9.0_0.darwin_20.arm64.tbz2 \\\n  && echo \"Unpack icu-67.1_4.darwin_20.arm64.tbz2\" \\\n  && tar xfj /tmp/icu/icu-67.1_4.darwin_20.arm64.tbz2 \\\n  && echo \"Unpack libepoxy-1.5.4_1+python38.darwin_20.arm64.tbz2\" \\\n  && tar xfj /tmp/libepoxy/libepoxy-1.5.4_1+python38.darwin_20.arm64.tbz2 \\\n  && echo \"Unpack libffi-3.3_1.darwin_20.arm64.tbz2\" \\\n  && tar xfj /tmp/libffi/libffi-3.3_1.darwin_20.arm64.tbz2 \\\n  && echo \"Unpack libftdi1-1.5_0.darwin_20.arm64.tbz2\" \\\n  && tar xfj /tmp/libftdi1/libftdi1-1.5_0.darwin_20.arm64.tbz2 \\\n  && echo \"Unpack libiconv-1.16_1.darwin_20.arm64.tbz2\" \\\n  && tar xfj /tmp/libiconv/libiconv-1.16_1.darwin_20.arm64.tbz2 \\\n  && echo \"Unpack libjpeg-turbo-2.0.6_0.darwin_20.arm64.tbz2\" \\\n  && tar xfj /tmp/libjpeg-turbo/libjpeg-turbo-2.0.6_0.darwin_20.arm64.tbz2 \\\n  && echo \"Unpack libpixman-0.38.4_0.darwin_20.arm64.tbz2\" \\\n  && tar xfj /tmp/libpixman/libpixman-0.38.4_0.darwin_20.arm64.tbz2 \\\n  && echo \"Unpack libpng-1.6.37_0.darwin_20.arm64.tbz2\" \\\n  && tar xfj /tmp/libpng/libpng-1.6.37_0.darwin_20.arm64.tbz2 \\\n  && echo \"Unpack libtool-2.4.6_11.darwin_20.arm64.tbz2\" \\\n  && tar xfj /tmp/libtool/libtool-2.4.6_11.darwin_20.arm64.tbz2 \\\n  && echo \"Unpack libusb-1.0.24_0.darwin_20.arm64.tbz2\" \\\n  && tar xfj /tmp/libusb/libusb-1.0.24_0.darwin_20.arm64.tbz2 \\\n  && echo \"Unpack mesa-19.0.8_1+osmesa+python27.darwin_20.arm64.tbz2\" \\\n  && tar xfj /tmp/mesa/mesa-19.0.8_1+osmesa+python27.darwin_20.arm64.tbz2 \\\n  && echo \"Unpack ncurses-6.2_1.darwin_20.arm64.tbz2\" \\\n  && tar xfj /tmp/ncurses/ncurses-6.2_1.darwin_20.arm64.tbz2 \\\n  && echo \"Unpack openssl-1.1.1k_0.darwin_20.arm64.tbz2\" \\\n  && tar xfj /tmp/openssl/openssl-1.1.1k_0.darwin_20.arm64.tbz2 \\\n  && echo \"Unpack ossp-uuid-1.6.2_12+perl5_28.darwin_20.arm64.tbz2\" \\\n  && tar xfj /tmp/ossp-uuid/ossp-uuid-1.6.2_12+perl5_28.darwin_20.arm64.tbz2 \\\n  && echo \"Unpack pango-1.42.4_3+quartz.darwin_20.arm64.tbz2\" \\\n  && tar xfj /tmp/pango/pango-1.42.4_3+quartz.darwin_20.arm64.tbz2 \\\n  && echo \"Unpack pcre-8.44_1.darwin_20.arm64.tbz2\" \\\n  && tar xfj /tmp/pcre/pcre-8.44_1.darwin_20.arm64.tbz2 \\\n  && echo \"Unpack readline-8.1.000_0.darwin_20.arm64.tbz2\" \\\n  && tar xfj /tmp/readline/readline-8.1.000_0.darwin_20.arm64.tbz2 \\\n  && echo \"Unpack realpath-1.0.1_1.darwin_20.arm64.tbz2\" \\\n  && tar xfj /tmp/realpath/realpath-1.0.1_1.darwin_20.arm64.tbz2 \\\n  && echo \"Unpack sqlite3-3.35.5_0.darwin_20.arm64.tbz2\" \\\n  && tar xfj /tmp/sqlite3/sqlite3-3.35.5_0.darwin_20.arm64.tbz2 \\\n  && echo \"Unpack tcl-8.6.11_0+corefoundation+threads.darwin_20.arm64.tbz2\" \\\n  && tar xfj /tmp/tcl/tcl-8.6.11_0+corefoundation+threads.darwin_20.arm64.tbz2 \\\n  && echo \"Unpack tiff-4.3.0_0.darwin_20.arm64.tbz2\" \\\n  && tar xfj /tmp/tiff/tiff-4.3.0_0.darwin_20.arm64.tbz2 \\\n  && echo \"Unpack tk-8.6.11_0+quartz.darwin_20.arm64.tbz2\" \\\n  && tar xfj /tmp/tk/tk-8.6.11_0+quartz.darwin_20.arm64.tbz2 \\\n  && echo \"Unpack xorg-libX11-1.7.1_0.darwin_20.arm64.tbz2\" \\\n  && tar xfj /tmp/xorg-libX11/xorg-libX11-1.7.1_0.darwin_20.arm64.tbz2 \\\n  && echo \"Unpack xorg-libxcb-1.14_0+python39.darwin_20.arm64.tbz2\" \\\n  && tar xfj /tmp/xorg-libxcb/xorg-libxcb-1.14_0+python39.darwin_20.arm64.tbz2 \\\n  && echo \"Unpack xorg-libXdamage-1.1.5_0.darwin_20.arm64.tbz2\" \\\n  && tar xfj /tmp/xorg-libXdamage/xorg-libXdamage-1.1.5_0.darwin_20.arm64.tbz2 \\\n  && echo \"Unpack xorg-libXext-1.3.4_0.darwin_20.arm64.tbz2\" \\\n  && tar xfj /tmp/xorg-libXext/xorg-libXext-1.3.4_0.darwin_20.arm64.tbz2 \\ \n  && echo \"Unpack xorg-libXfixes-6.0.0_0.darwin_20.arm64.tbz2\" \\\n  && tar xfj /tmp/xorg-libXfixes/xorg-libXfixes-6.0.0_0.darwin_20.arm64.tbz2 \\\n  && echo \"Unpack xorg-libpthread-stubs-0.4_0.darwin_20.noarch.tbz2\" \\\n  && tar xfj /tmp/xorg-libpthread-stubs/xorg-libpthread-stubs-0.4_0.darwin_20.noarch.tbz2 \\\n  && echo \"Unpack xorg-libXdmcp-1.1.3_0.darwin_20.arm64.tbz2\" \\\n  && tar xfj /tmp/xorg-libXdmcp/xorg-libXdmcp-1.1.3_0.darwin_20.arm64.tbz2 \\\n  && echo \"Unpack xorg-libXau-1.0.9_0.darwin_20.arm64.tbz2\" \\\n  && tar xfj /tmp/xorg-libXau/xorg-libXau-1.0.9_0.darwin_20.arm64.tbz2 \\\n  && echo \"Unpack xorg-xcb-proto-1.14.1_0+python39.darwin_20.noarch.tbz2\" \\\n  && tar xfj /tmp/xorg-xcb-proto/xorg-xcb-proto-1.14.1_0+python39.darwin_20.noarch.tbz2 \\\n  && echo \"Unpack xorg-xorgproto-2021.4_0.darwin_20.noarch.tbz2\" \\\n  && tar xfj /tmp/xorg-xorgproto/xorg-xorgproto-2021.4_0.darwin_20.noarch.tbz2 \\\n  && echo \"Unpack xz-5.2.5_0.darwin_20.arm64.tbz2\" \\\n  && tar xfj /tmp/xz/xz-5.2.5_0.darwin_20.arm64.tbz2 \\\n  && echo \"Unpack zlib-1.2.11_0.darwin_20.arm64.tbz2\" \\\n  && tar xfj /tmp/zlib/zlib-1.2.11_0.darwin_20.arm64.tbz2 \\\n  && echo \"Unpack zstd-1.5.0_0.darwin_20.arm64.tbz2\" \\\n  && tar xfj /tmp/zstd/zstd-1.5.0_0.darwin_20.arm64.tbz2 \\\n  && echo \"Unpack gtk2-2.24.32_0+quartz.darwin_20.arm64.tbz2\" \\\n  && tar xfj /tmp/gtk2/gtk2-2.24.32_0+quartz.darwin_20.arm64.tbz2 \\\n  && echo \"Unpack libidn2-2.3.1_0.darwin_20.arm64.tbz2\" \\\n  && tar xfj /tmp/libidn2/libidn2-2.3.1_0.darwin_20.arm64.tbz2 \\\n  && echo \"Unpack libpsl-0.21.1-20200817_1.darwin_20.arm64.tbz2\" \\\n  && tar xfj /tmp/libpsl/libpsl-0.21.1-20200817_1.darwin_20.arm64.tbz2 \\\n  && echo \"Unpack libunistring-0.9.10_0.darwin_20.arm64.tbz2\" \\\n  && tar xfj /tmp/libunistring/libunistring-0.9.10_0.darwin_20.arm64.tbz2 \\\n  && echo \"Cleanup\" \\\n  && cp /usr/include/FlexLexer.h /opt/local/include/. \\\n  && cp /opt/local/share/pkgconfig/* /opt/local/lib/pkgconfig/. \\  \n  && cp -r /opt/local/share/cmake /tmp \\\n  && cp -r /opt/local/share/eigen3 /tmp \\\n  && cp -r /opt/local/share/gir-1.0 /tmp \\\n  && cp -r /opt/local/share/glib-2.0 /tmp \\\n  && cp -r /opt/local/share/terminfo /tmp \\\n  && rm -rf /opt/local/etc \\\n  && rm -rf /opt/local/libexec \\\n  && rm -rf /opt/local/sbin \\\n  && rm -rf /opt/local/share \\\n  && mkdir -p /opt/local/share \\\n  && rm -rf /tmp/*.tbz2 \\\n  && mv /tmp/cmake /opt/local/share \\\n  && mv /tmp/eigen3 /opt/local/share \\\n  && mv /tmp/gir-1.0 /opt/local/share \\\n  && mv /tmp/glib-2.0 /opt/local/share \\\n  && mv /tmp/terminfo /opt/local/share \\\n  && rm -rf /tmp/* \\\n  && mkdir -p /usr/local/osxcross/target/macports/pkgs/opt \\\n  && ln -s /opt/local /usr/local/osxcross/target/macports/pkgs/opt \\\n  && cd /opt/local/ \\\n  && wget https://github.com/mmicko/macos-resources/releases/download/v2/gtk-osx-application-darwin-arm64.tgz \\\n  && tar xfz gtk-osx-application-darwin-arm64.tgz \\\n  && rm gtk-osx-application-darwin-arm64.tgz\n\nCOPY --from=builder /tmp/macdylibbundler/dylibbundler /usr/local/bin/dylibbundler\nCOPY --from=builder /root/.cargo/bin/rcodesign /usr/local/bin/rcodesign\nRUN chmod +x /usr/local/bin/dylibbundler\nRUN chmod +x /usr/local/bin/rcodesign\n\nRUN cp /usr/local/osxcross/target/bin/${CROSS_NAME}-otool /usr/local/osxcross/target/bin/otool \\\n  && cp /usr/local/osxcross/target/bin/${CROSS_NAME}-install_name_tool /usr/local/osxcross/target/bin/install_name_tool \\\n  && cp /usr/local/osxcross/target/bin/${CROSS_NAME}-ar /usr/local/osxcross/target/bin/ar \\\n  && cp /usr/local/osxcross/target/bin/${CROSS_NAME}-ranlib /usr/local/osxcross/target/bin/ranlib\n\nCOPY uname /usr/local/osxcross/target/bin/\nRUN chmod +x /usr/local/osxcross/target/bin/uname\n\n# Install just g-ir-compiler, not using apt since it adds lots more\nRUN wget https://archive.ubuntu.com/ubuntu/pool/main/g/gobject-introspection/libgirepository-1.0-1_1.64.1-1~ubuntu20.04.1_amd64.deb && \\\n    dpkg-deb -xv libgirepository-1.0-1_1.64.1-1~ubuntu20.04.1_amd64.deb / && \\\n    rm -rf libgirepository-1.0-1_1.64.1-1~ubuntu20.04.1_amd64.deb && \\\n    wget https://archive.ubuntu.com/ubuntu/pool/main/g/gobject-introspection/gobject-introspection_1.64.1-1~ubuntu20.04.1_amd64.deb && \\\n    dpkg-deb -xv gobject-introspection_1.64.1-1~ubuntu20.04.1_amd64.deb / && \\\n    rm -rf gobject-introspection_1.64.1-1~ubuntu20.04.1_amd64.deb\n\nRUN cd /opt/local/share/gir-1.0 &&\\\n    for i in *.gir; do  \\\n        sed -i 's|/opt/local/lib/||g' $i ; \\\n        sed -i 's|./gdk-pixbuf/||g' $i ; \\\n    done && \\\n    for i in *.gir; do  \\\n        echo $i ; \\ \n        filename=\"${i%.*}\" ; \\\n        g-ir-compiler $i -o /opt/local/lib/girepository-1.0/$filename.typelib --includedir /opt/local/share/gir-1.0 ; \\\n    done\n\nCOPY gschemas.compiled /opt/local/share/glib-2.0/schemas/\nRUN RUSTUP_HOME=/opt/rust/rustup CARGO_HOME=/opt/rust/cargo rustup update\n"
}