{
  "startTime": 1674252414806,
  "endTime": 1674252416184,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 11,
        "lineEnd": 11,
        "columnStart": 4,
        "columnEnd": 97
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 26,
        "lineEnd": 26,
        "columnStart": 4,
        "columnEnd": 66
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 30,
        "lineEnd": 30,
        "columnStart": 4,
        "columnEnd": 55
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 6,
        "lineEnd": 6,
        "columnStart": 22,
        "columnEnd": 86
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 10,
        "lineEnd": 10,
        "columnStart": 4,
        "columnEnd": 31
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 15,
        "lineEnd": 15,
        "columnStart": 4,
        "columnEnd": 36
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 17,
        "lineEnd": 17,
        "columnStart": 4,
        "columnEnd": 105
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 20,
        "lineEnd": 22,
        "columnStart": 4,
        "columnEnd": 29
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 24,
        "lineEnd": 24,
        "columnStart": 18,
        "columnEnd": 57
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 27,
        "lineEnd": 27,
        "columnStart": 2,
        "columnEnd": 31
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 32,
        "lineEnd": 32,
        "columnStart": 4,
        "columnEnd": 138
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 41,
        "lineEnd": 41,
        "columnStart": 25,
        "columnEnd": 53
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 10,
        "lineEnd": 10,
        "columnStart": 4,
        "columnEnd": 31
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 12,
        "lineEnd": 12,
        "columnStart": 27,
        "columnEnd": 46
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 15,
        "lineEnd": 15,
        "columnStart": 4,
        "columnEnd": 36
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 17,
        "lineEnd": 17,
        "columnStart": 4,
        "columnEnd": 105
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 20,
        "lineEnd": 22,
        "columnStart": 4,
        "columnEnd": 29
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 27,
        "lineEnd": 27,
        "columnStart": 2,
        "columnEnd": 31
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 32,
        "lineEnd": 32,
        "columnStart": 4,
        "columnEnd": 138
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 35,
        "lineEnd": 35,
        "columnStart": 4,
        "columnEnd": 85
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 6,
        "lineEnd": 6,
        "columnStart": 22,
        "columnEnd": 86
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 10,
        "lineEnd": 10,
        "columnStart": 4,
        "columnEnd": 31
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 15,
        "lineEnd": 15,
        "columnStart": 4,
        "columnEnd": 36
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 17,
        "lineEnd": 17,
        "columnStart": 4,
        "columnEnd": 105
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 20,
        "lineEnd": 22,
        "columnStart": 4,
        "columnEnd": 29
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 24,
        "lineEnd": 24,
        "columnStart": 18,
        "columnEnd": 57
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 27,
        "lineEnd": 27,
        "columnStart": 2,
        "columnEnd": 31
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 32,
        "lineEnd": 32,
        "columnStart": 4,
        "columnEnd": 138
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 41,
        "lineEnd": 41,
        "columnStart": 25,
        "columnEnd": 53
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 10,
        "lineEnd": 10,
        "columnStart": 4,
        "columnEnd": 55
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 12,
        "lineEnd": 12,
        "columnStart": 27,
        "columnEnd": 46
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 15,
        "lineEnd": 15,
        "columnStart": 4,
        "columnEnd": 60
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 17,
        "lineEnd": 17,
        "columnStart": 4,
        "columnEnd": 129
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 20,
        "lineEnd": 22,
        "columnStart": 4,
        "columnEnd": 29
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 27,
        "lineEnd": 27,
        "columnStart": 2,
        "columnEnd": 55
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 32,
        "lineEnd": 32,
        "columnStart": 4,
        "columnEnd": 162
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 35,
        "lineEnd": 35,
        "columnStart": 4,
        "columnEnd": 85
      }
    }
  ],
  "repairedDockerfile": "FROM ubuntu:20.04\n\n# Set correct timezone\nENV TZ=Europe/Berlin\nRUN ln -snf /usr/share/zoneinfo/$TZ /etc/localtime && echo $TZ > /etc/timezone\n\nRUN apt-get update && apt-get install --no-install-recommends python3 tesseract-ocr python3-pip curl unzip -yf && rm -rf /var/lib/apt/lists/*;\n\n# Install Chrome\nRUN apt-get update -y\nRUN apt-get install --no-install-recommends -y dbus-x11 && rm -rf /var/lib/apt/lists/*;\nRUN curl -f https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb -o /chrome.deb\nRUN dpkg -i /chrome.deb || apt-get install -yf\nRUN rm /chrome.deb\n\nRUN apt-get install --no-install-recommends -y poppler-utils && rm -rf /var/lib/apt/lists/*;\nRUN apt-get clean\nRUN DEBIAN_FRONTEND=noninteractive apt --no-install-recommends install -y python3-xlib xvfb xserver-xephyr python3-tk python3-dev && rm -rf /var/lib/apt/lists/*;\n\n# https://github.com/puppeteer/puppeteer/issues/5429\nRUN DEBIAN_FRONTEND=noninteractive apt-get --no-install-recommends -y install wget libcairo2-dev \\\n   libjpeg-dev libpango1.0-dev libgif-dev build-essential g++ libgl1-mesa-dev libxi-dev \\\n   libx11-dev pulseaudio udev && rm -rf /var/lib/apt/lists/*;\n\nRUN apt update && apt install --no-install-recommends -y postgresql-server-dev-12 && rm -rf /var/lib/apt/lists/*;\n\nRUN curl -f --silent --location https://deb.nodesource.com/setup_14.x | bash - && \\\n  apt-get -y --no-install-recommends -qq install nodejs && rm -rf /var/lib/apt/lists/*;\n\n# Move this into requirements.txt at some time\nRUN pip3 install --no-cache-dir pyautogui python-xlib PyVirtualDisplay\n\nRUN apt-get install --no-install-recommends -y fonts-roboto fonts-ubuntu ttf-bitstream-vera fonts-crosextra-caladea fonts-cantarell fonts-open-sans ttf-wqy-zenhei && rm -rf /var/lib/apt/lists/*;\n\n# install debs error if combine together\nRUN apt install -y --no-install-recommends --allow-unauthenticated x11vnc fluxbox xxd \\\n    && apt autoclean -y \\\n    && apt autoremove -y \\\n    && rm -rf /var/lib/apt/lists/*\n\n\nRUN apt-get update -y && apt install --no-install-recommends -y iptables sudo && rm -rf /var/lib/apt/lists/*;\n\nCOPY . .\n\n# https://dev.to/emmanuelnk/using-sudo-without-password-prompt-as-non-root-docker-user-52bg\n# Create new user `docker` and disable\n# password and gecos for later\n# --gecos explained well here:\n# https://askubuntu.com/a/1195288/635348\nRUN adduser --force-badname --disabled-password --gecos '' browserUser\n\n# Add a user to run the browser as non-root\nRUN mkdir -p /home/browserUser/Downloads \\\n  && chown -R browserUser:browserUser /home/browserUser\n\nRUN adduser browserUser sudo\n\n# Ensure sudo group users are not\n# asked for a password when using\n# sudo command by ammending sudoers file\nRUN echo '%sudo ALL=(ALL) NOPASSWD:ALL' >> \\\n/etc/sudoers\n\nRUN chmod 755 start.sh\n\n# Run everything after as non-privileged user.\nUSER browserUser\n\n# Application specific environment variables\n# disp = Display(visible=True, size=(1920, 1080), backend=\"xvfb\", use_xauth=True); disp.start()\n# set's DISPLAY=:1\nENV DISPLAY=:1\n# By default, only screen 0 exists and has the dimensions 1280x1024x8\nENV XVFB_WHD=1920x1080x24\n# x11vnc password\nENV X11VNC_PASSWORD=test\n# This variable tells our source code that its invoked within a Docker container\nENV DOCKER=1\n\nENTRYPOINT [ \"./start.sh\" ]\n"
}