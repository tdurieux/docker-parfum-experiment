{
  "startTime": 1674253736578,
  "endTime": 1674253737702,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 48,
        "lineEnd": 48,
        "columnStart": 4,
        "columnEnd": 100
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 55,
        "lineEnd": 55,
        "columnStart": 4,
        "columnEnd": 306
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 56,
        "lineEnd": 56,
        "columnStart": 4,
        "columnEnd": 224
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 57,
        "lineEnd": 57,
        "columnStart": 4,
        "columnEnd": 238
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 128,
        "lineEnd": 128,
        "columnStart": 5,
        "columnEnd": 222
      }
    },
    {
      "rule": "curlUseHttpsUrl",
      "position": {
        "lineStart": 55,
        "lineEnd": 55,
        "columnStart": 4,
        "columnEnd": 306
      }
    },
    {
      "rule": "curlUseHttpsUrl",
      "position": {
        "lineStart": 56,
        "lineEnd": 56,
        "columnStart": 4,
        "columnEnd": 224
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 37,
        "lineEnd": 37,
        "columnStart": 7,
        "columnEnd": 59
      }
    },
    {
      "rule": "yumInstallRmVarCacheYum",
      "position": {
        "lineStart": 32,
        "lineEnd": 36,
        "columnStart": 4,
        "columnEnd": 22
      }
    },
    {
      "rule": "yumInstallRmVarCacheYum",
      "position": {
        "lineStart": 44,
        "lineEnd": 44,
        "columnStart": 4,
        "columnEnd": 34
      }
    },
    {
      "rule": "yumInstallRmVarCacheYum",
      "position": {
        "lineStart": 46,
        "lineEnd": 46,
        "columnStart": 4,
        "columnEnd": 67
      }
    },
    {
      "rule": "yumInstallRmVarCacheYum",
      "position": {
        "lineStart": 132,
        "lineEnd": 132,
        "columnStart": 7,
        "columnEnd": 28
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 50,
        "lineEnd": 50,
        "columnStart": 4,
        "columnEnd": 77
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 50,
        "lineEnd": 50,
        "columnStart": 4,
        "columnEnd": 77
      }
    }
  ],
  "repairedDockerfile": "#-----------------------------------------------------------------------------------------------------------------------\n#   Copyright Amazon.com Inc. or its affiliates. All Rights Reserved.\n#\n#  Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance\n#  with the License. A copy of the License is located at\n#\n#      http://www.apache.org/licenses/LICENSE-2.0\n#\n#  or in the 'license' file accompanying this file. This file is distributed on an 'AS IS' BASIS, WITHOUT WARRANTIES\n#  OR CONDITIONS OF ANY KIND, express or implied. See the License for the specific language governing permissions\n#  and limitations under the License.\n#-----------------------------------------------------------------------------------------------------------------------\n\nFROM public.ecr.aws/amazonlinux/amazonlinux:latest\n\nLABEL maintainer=\"Dean Hart\"\n\nARG JMETER_VERSION=\"5.4.3\"\nARG AWSCLI_VERSION=\"1.16.278\"\nARG JMETER_PLUGINS_MANAGER_VERSION=\"1.3\"\nARG CMDRUNNER_VERSION=\"2.2\"\nARG JSON_LIB_VERSION=\"2.4\"\nARG JSON_LIB_FULL_VERSION=\"${JSON_LIB_VERSION}-jdk15\"\n\nENV JMETER_HOME /opt/apache-jmeter-${JMETER_VERSION}\nENV\tJMETER_BIN\t${JMETER_HOME}/bin\nENV PATH $PATH:$JMETER_BIN\nENV\tJMETER_DOWNLOAD_URL https://archive.apache.org/dist/jmeter/binaries/apache-jmeter-${JMETER_VERSION}.tgz\nENV RESULTS_LOG results.jtl\nENV PATH=/root/.local/bin:$PATH\n\n# install aws cli\nRUN yum install -y \\\n    python \\\n    python-devel \\\n    python-pip \\\n    java-1.8.0-openjdk \\\n    && pip install --no-cache-dir awscli==$AWSCLI_VERSION --upgrade --user \\\n    && yum remove -y python-pip \\\n    && yum clean all && rm -rf /var/cache/yum\n\n# Install jmeter\nRUN yum update -y \\\n\t&& yum upgrade -y \\\n\t&& yum install -y ca-certificates \\\n\t&& update-ca-trust \\\n\t&& yum install -y openjdk8-jre tzdata curl unzip bash nss gzip tar\\\n\t&& mkdir -p /tmp/dependencies \\\n\t&& curl -f -L --silent ${JMETER_DOWNLOAD_URL} >  /tmp/dependencies/apache-jmeter-${JMETER_VERSION}.tgz \\\n\t&& mkdir -p /opt \\\n\t&& tar -xzvf \"/tmp/dependencies/apache-jmeter-${JMETER_VERSION}.tgz\" -C /opt \\\n\t&& rm -rf /tmp/dependencies && rm -rf /var/cache/yum\n\n# Install jmeter plugins\nRUN cd /tmp/ \\\n && curl -f --location --silent --show-error --output ${JMETER_HOME}/lib/ext/jmeter-plugins-manager-${JMETER_PLUGINS_MANAGER_VERSION}.jar https://search.maven.org/remotecontent?filepath=kg/apc/jmeter-plugins-manager/${JMETER_PLUGINS_MANAGER_VERSION}/jmeter-plugins-manager-${JMETER_PLUGINS_MANAGER_VERSION}.jar \\\n && curl -f --location --silent --show-error --output ${JMETER_HOME}/lib/cmdrunner-${CMDRUNNER_VERSION}.jar https://search.maven.org/remotecontent?filepath=kg/apc/cmdrunner/${CMDRUNNER_VERSION}/cmdrunner-${CMDRUNNER_VERSION}.jar \\\n && curl -f --location --silent --show-error --output ${JMETER_HOME}/lib/json-lib-${JSON_LIB_FULL_VERSION}.jar https://search.maven.org/remotecontent?filepath=net/sf/json-lib/json-lib/${JSON_LIB_VERSION}/json-lib-${JSON_LIB_FULL_VERSION}.jar \\\n && java -cp ${JMETER_HOME}/lib/ext/jmeter-plugins-manager-${JMETER_PLUGINS_MANAGER_VERSION}.jar org.jmeterplugins.repository.PluginManagerCMDInstaller \\\n && PluginsManagerCMD.sh install \\\nblazemeter-debugger=0.6,\\\nbzm-hls=2.0,\\\nbzm-http2=1.4.1,\\\nbzm-parallel=0.9,\\\nbzm-random-csv=0.6,\\\nbzm-rte=2.2,\\\nbzm-siebel=0.1.0-beta,\\\ncustom-soap=1.3.3,\\\njmeter.backendlistener.elasticsearch=2.6.9,\\\njmeter.backendlistener.kafka=1.0.0,\\\njmeter.pack-listener=1.7,\\\njpgc-autostop=0.1,\\\njpgc-casutg=2.9,\\\njpgc-cmd=2.2,\\\njpgc-csl=0.1,\\\njpgc-csvars=0.1,\\\njpgc-dbmon=0.1,\\\njpgc-directory-listing=0.3,\\\njpgc-dummy=0.4,\\\njpgc-ffw=2.0,\\\njpgc-fifo=0.2,\\\njpgc-filterresults=2.2,\\\njpgc-functions=2.1,\\\njpgc-ggl=2.0,\\\njpgc-graphs-additional=2.0,\\\njpgc-graphs-basic=2.0,\\\njpgc-graphs-composite=2.0,\\\njpgc-graphs-dist=2.0,\\\njpgc-graphs-vs=2.0,\\\njpgc-hadoop=2.0,\\\njpgc-httpraw=0.1,\\\njpgc-jms=0.2,\\\njpgc-jmxmon=0.2,\\\njpgc-json=2.7,\\\njpgc-lockfile=0.1,\\\njpgc-mergeresults=2.1,\\\n# jpgc-oauth=0.1,\\\njpgc-pde=0.1,\\\njpgc-perfmon=2.1,\\\njpgc-plancheck=2.4,\\\n# jpgc-plugins-manager=${JMETER_PLUGINS_MANAGER_VERSION},\\\njpgc-prmctl=0.4,\\\njpgc-redis=0.3,\\\njpgc-rotating-listener=0.2,\\\njpgc-sense=3.5,\\\njpgc-standard=2.0,\\\njpgc-sts=2.4,\\\njpgc-synthesis=2.2,\\\njpgc-tst=2.5,\\\njpgc-udp=0.4,\\\njpgc-webdriver=3.1,\\\njpgc-wsc=0.7,\\\njpgc-xml=0.1,\\\njpgc-xmpp=1.5.1,\\\nkafkameter=0.2.0,\\\n# mqtt-sampler=0.0.1-SNAPSHOT,\\\nnetflix-cassandra=0.2-SNAPSHOT,\\\nssh-sampler=1.1.1-SNAPSHOT,\\\ntilln-iso8583=1.0,\\\ntilln-sshmon=1.2,\\\ntilln-wssecurity=1.7,\\\nwebsocket-sampler=1.0.2-SNAPSHOT,\\\nwebsocket-samplers=1.2.2 \\\n && jmeter --version \\\n && PluginsManagerCMD.sh status \\\n && chmod +x ${JMETER_HOME}/bin/*.sh \\\n && rm -fr /tmp/*\n\nRUN curl -f --location --silent --show-error --output ${JMETER_HOME}/lib/ext/mqtt-xmeter-1.0.1-jar-with-dependencies.jar https://github.com/emqx/mqtt-jmeter/releases/download/1.0.1/mqtt-xmeter-1.0.1-jar-with-dependencies.jar\n\n# install nodejs 16, commonly used by test plans\nRUN curl -fsSL https://rpm.nodesource.com/setup_16.x | bash - \\\n    && yum install -y nodejs && rm -rf /var/cache/yum\n\n # add additional dependencies\nADD lib/* ${JMETER_HOME}/lib/ext/\nRUN rm -f /opt/apache-jmeter-5.4.3/lib/httpclient-4.5.12.jar\n\nWORKDIR /opt/jmeter\n\nCOPY entrypoint.sh /opt/jmeter/\nRUN chmod +x /opt/jmeter/entrypoint.sh\n\nEXPOSE 1099 50000 51000 4445/udp\n\nENTRYPOINT [\"/opt/jmeter/entrypoint.sh\"]\n"
}