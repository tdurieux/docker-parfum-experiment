{
  "startTime": 1674249908293,
  "endTime": 1674249909076,
  "originalSmells": [
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 5,
        "lineEnd": 14,
        "columnStart": 22,
        "columnEnd": 8
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 5,
        "lineEnd": 14,
        "columnStart": 22,
        "columnEnd": 8
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM tensorflow/tensorflow:latest-gpu\n\nARG DEBIAN_FRONTEND=noninteractive\n\n# Install apt dependencies\nRUN apt-get update && apt-get install --no-install-recommends -y \\\n    git \\\n    gpg-agent \\\n    python3-cairocffi \\\n    protobuf-compiler \\\n    python3-pil \\\n    python3-lxml \\\n    python3-tk \\\n    python3-opencv \\\n    wget && rm -rf /var/lib/apt/lists/*;\n\n# Installs google cloud sdk, this is mostly for using gsutil to export model.\nRUN wget -nv \\\n    https://dl.google.com/dl/cloudsdk/release/google-cloud-sdk.tar.gz && \\\n    mkdir /root/tools && \\\n    tar xvzf google-cloud-sdk.tar.gz -C /root/tools && \\\n    rm google-cloud-sdk.tar.gz && \\\n    /root/tools/google-cloud-sdk/install.sh --usage-reporting=false \\\n        --path-update=false --bash-completion=false \\\n        --disable-installation-options && \\\n    rm -rf /root/.config/* && \\\n    ln -s /root/.config /config && \\\n    rm -rf /root/tools/google-cloud-sdk/.install/.backup\n\n# Path configuration\nENV PATH $PATH:/root/tools/google-cloud-sdk/bin\n# Make sure gsutil will use the default service account\nRUN echo '[GoogleCompute]\\nservice_account = default' > /etc/boto.cfg\n\nWORKDIR /home/tensorflow\n\n## Copy this code (make sure you are under the ../models/research directory)\nCOPY . /home/tensorflow/models\n\n# Compile protobuf configs\nRUN (cd /home/tensorflow/models/ && protoc object_detection/protos/*.proto --python_out=.)\nWORKDIR /home/tensorflow/models/\n\nRUN cp object_detection/packages/tf2/setup.py ./\nENV PATH=\"/home/tensorflow/.local/bin:${PATH}\"\n\nRUN python -m pip install -U pip\nRUN python -m pip install .\n\nENTRYPOINT [\"python\", \"object_detection/model_main_tf2.py\"]\n"
}