{
  "startTime": 1674254997669,
  "endTime": 1674254998807,
  "originalSmells": [
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 16,
        "lineEnd": 16,
        "columnStart": 5,
        "columnEnd": 52
      }
    },
    {
      "rule": "yumInstallRmVarCacheYum",
      "position": {
        "lineStart": 7,
        "lineEnd": 7,
        "columnStart": 5,
        "columnEnd": 32
      }
    },
    {
      "rule": "yumInstallRmVarCacheYum",
      "position": {
        "lineStart": 8,
        "lineEnd": 8,
        "columnStart": 5,
        "columnEnd": 38
      }
    },
    {
      "rule": "yumInstallRmVarCacheYum",
      "position": {
        "lineStart": 9,
        "lineEnd": 9,
        "columnStart": 5,
        "columnEnd": 51
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "ARG  os_image\nFROM ${os_image}\nARG  log_output_dir=/tmp\nENV  LOG_OUTPUT_DIR=\"$log_output_dir\"\nARG  py_N\nENV  PY_N \"$py_N\"\n\nRUN yum install -y epel-release && rm -rf /var/cache/yum\nRUN yum install -y git nmap-ncat sudo && rm -rf /var/cache/yum\nRUN yum install -y python${py_N} python${py_N}-pip && rm -rf /var/cache/yum\nRUN  useradd -md /home/user -s /bin/bash user\nRUN  echo \"user ALL=(ALL) NOPASSWD: ALL\" >> /etc/sudoers\nWORKDIR /home/user\nCOPY ./ ./repo/\nRUN chown -R user repo/\nUSER user\nRUN pip${py_N} install --no-cache-dir --user --upgrade pip==20.3.4# - limit pip version for C7 system python2.7\nRUN  cd repo && python${py_N} -m pip install --user '.[tests]'\nRUN  python${py_N} repo/docker_build/iinit.py \\\n        host irods-provider \\\n        port 1247     \\\n        user rods     \\\n        zone tempZone \\\n        password rods\nSHELL [\"/bin/bash\",\"-c\"]\nCMD  echo \"Waiting on iRODS server... \" ; \\\n     python${PY_N} repo/docker_build/recv_oneshot -h irods-provider -p 8888 -t 360 && \\\n     sudo groupadd -o -g $(stat -c%g /irods_shared) irods && sudo usermod -aG irods user && \\\n     newgrp irods < repo/run_python_tests.sh\n"
}