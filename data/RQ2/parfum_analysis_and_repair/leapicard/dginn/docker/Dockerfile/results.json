{
  "startTime": 1674255575776,
  "endTime": 1674255577066,
  "originalSmells": [
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 127,
        "lineEnd": 134,
        "columnStart": 4,
        "columnEnd": 5
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 136,
        "lineEnd": 136,
        "columnStart": 4,
        "columnEnd": 26
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 138,
        "lineEnd": 138,
        "columnStart": 4,
        "columnEnd": 31
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 5,
        "lineEnd": 5,
        "columnStart": 40,
        "columnEnd": 68
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 7,
        "lineEnd": 7,
        "columnStart": 4,
        "columnEnd": 47
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 9,
        "lineEnd": 19,
        "columnStart": 4,
        "columnEnd": 21
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 24,
        "lineEnd": 24,
        "columnStart": 4,
        "columnEnd": 44
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 41,
        "lineEnd": 41,
        "columnStart": 4,
        "columnEnd": 28
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 115,
        "lineEnd": 115,
        "columnStart": 40,
        "columnEnd": 64
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 125,
        "lineEnd": 125,
        "columnStart": 4,
        "columnEnd": 34
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 173,
        "lineEnd": 173,
        "columnStart": 4,
        "columnEnd": 54
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 178,
        "lineEnd": 178,
        "columnStart": 4,
        "columnEnd": 40
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 7,
        "lineEnd": 7,
        "columnStart": 4,
        "columnEnd": 47
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 9,
        "lineEnd": 19,
        "columnStart": 4,
        "columnEnd": 21
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 24,
        "lineEnd": 24,
        "columnStart": 4,
        "columnEnd": 44
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 41,
        "lineEnd": 41,
        "columnStart": 4,
        "columnEnd": 28
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 125,
        "lineEnd": 125,
        "columnStart": 4,
        "columnEnd": 34
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 173,
        "lineEnd": 173,
        "columnStart": 4,
        "columnEnd": 54
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 178,
        "lineEnd": 178,
        "columnStart": 4,
        "columnEnd": 40
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 5,
        "lineEnd": 5,
        "columnStart": 40,
        "columnEnd": 68
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 7,
        "lineEnd": 7,
        "columnStart": 4,
        "columnEnd": 47
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 9,
        "lineEnd": 19,
        "columnStart": 4,
        "columnEnd": 21
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 24,
        "lineEnd": 24,
        "columnStart": 4,
        "columnEnd": 44
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 41,
        "lineEnd": 41,
        "columnStart": 4,
        "columnEnd": 28
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 115,
        "lineEnd": 115,
        "columnStart": 40,
        "columnEnd": 64
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 125,
        "lineEnd": 125,
        "columnStart": 4,
        "columnEnd": 34
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 173,
        "lineEnd": 173,
        "columnStart": 4,
        "columnEnd": 54
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 178,
        "lineEnd": 178,
        "columnStart": 4,
        "columnEnd": 40
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 7,
        "lineEnd": 7,
        "columnStart": 4,
        "columnEnd": 71
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 9,
        "lineEnd": 19,
        "columnStart": 4,
        "columnEnd": 21
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 24,
        "lineEnd": 24,
        "columnStart": 4,
        "columnEnd": 68
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 41,
        "lineEnd": 41,
        "columnStart": 4,
        "columnEnd": 52
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 125,
        "lineEnd": 125,
        "columnStart": 4,
        "columnEnd": 58
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 173,
        "lineEnd": 173,
        "columnStart": 4,
        "columnEnd": 78
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 178,
        "lineEnd": 178,
        "columnStart": 4,
        "columnEnd": 64
      }
    }
  ],
  "repairedDockerfile": "FROM ubuntu:latest as base\nMAINTAINER Lea Picard lea.picard@gmail.com\n\nENV DEBIAN_FRONTEND noninteractive\n\nRUN apt-get  clean && apt-get update && apt-get install --no-install-recommends -y apt-utils && rm -rf /var/lib/apt/lists/*;\n\nRUN TZ=\"Europe/Paris\" apt-get --no-install-recommends -y install tzdata && rm -rf /var/lib/apt/lists/*;\n\nRUN apt-get -y --no-install-recommends install build-essential \\\n\tgit \\\n\temboss \\\n\tdoxygen \\\n\tpkg-config \\\n\tautomake \\\n\topenssl \\\n\tlibssl-dev \\\n\topenmpi-bin \\\n\tlibopenmpi-dev \\\n        libeigen3-dev && rm -rf /var/lib/apt/lists/*;\n\n## Install most recent version of cMake\n## RUN git clone https://github.com/Kitware/CMake && cd CMake && ./bootstrap && make && make install\n\nRUN apt-get -y --no-install-recommends install build-essential cmake && rm -rf /var/lib/apt/lists/*;\n\n\n#################\n## Install PRANK\nFROM base as prank\nWORKDIR /opt\n\nRUN git clone https://github.com/ariloytynoja/prank-msa.git && cd prank-msa/src && make\n\n\n#################\n## Install PhyML\nFROM base as phyml\nWORKDIR /opt\n\n##RUN git clone  https://github.com/stephaneguindon/phyml && cd phyml && sh ./autogen.sh && ./configure --enable-phyml && make\nRUN apt-get -y --no-install-recommends install phyml && rm -rf /var/lib/apt/lists/*;\n\n\n#################\n## Install Treerecs\nFROM base as treerecs\nWORKDIR /opt\n\nRUN git  clone https://gitlab.inria.fr/Phylophile/Treerecs && cd Treerecs && cmake -DCMAKE_BUILD_TYPE=MinSizeRel . && make && make install\n\n\n#################\n## Install BIO++\nFROM base as biopp\nWORKDIR /opt\n\nRUN mkdir bpp && cd  bpp && mkdir sources && cd sources && for d in bpp-core; \\\n\tdo git clone https://github.com/BioPP/$d; \\\n\tcd $d; \\\n\tcmake  -DCMAKE_INSTALL_PREFIX=/opt/bpp -DCMAKE_LIBRARY_PATH=/opt/bpp/lib -DCMAKE_INCLUDE_PATH=/opt/bpp/include -DBUILD_TESTING=FALSE ./; \\\n\tmake -j 4; \\\n\tmake install; \\\n\tcd ..; \\\n\tdone\n\nRUN  cd bpp && cd sources && for d in bpp-seq; \\\n\tdo git clone https://github.com/BioPP/$d; \\\n\tcd $d; \\\n\tcmake  -DCMAKE_INSTALL_PREFIX=/opt/bpp -DCMAKE_LIBRARY_PATH=/opt/bpp/lib -DCMAKE_INCLUDE_PATH=/opt/bpp/include -DBUILD_TESTING=FALSE ./; \\\n\tmake -j 4; \\\n\tmake install; \\\n\tcd ..; \\\n\tdone\n\nRUN cd bpp && cd sources && for  d in bpp-phyl; \\\n\tdo git clone https://github.com/BioPP/$d; \\\n\tcd $d; \\\n\tcmake -DCMAKE_INSTALL_PREFIX=/opt/bpp -DCMAKE_LIBRARY_PATH=/opt/bpp/lib -DCMAKE_INCLUDE_PATH=/opt/bpp/include -DBUILD_TESTING=FALSE ./; \\\n\tmake -j 4; \\\n\tmake install; \\\n\tcd ..; \\\n\tdone\n\nRUN cd bpp && cd sources && for d in bpp-popgen; \\\n\tdo git clone https://github.com/BioPP/$d; \\\n\tcd $d; \\\n\tcmake -DCMAKE_INSTALL_PREFIX=/opt/bpp -DCMAKE_LIBRARY_PATH=/opt/bpp/lib -DCMAKE_INCLUDE_PATH=/opt/bpp/include -DBUILD_TESTING=FALSE ./; \\\n\tmake; \\\n\tmake install; \\\n\tcd ..; \\\n\tdone\n\nRUN cd bpp && git clone https://github.com/BioPP/bppsuite && cd bppsuite && cmake -DCMAKE_INSTALL_PREFIX=/opt/bpp ./ && make -j 4 && make install\n\n\n#################\n## Install HYPHY\nFROM base as hyphy\nWORKDIR /opt\n\nRUN git clone https://github.com/veg/hyphy.git && cd hyphy && cmake . && make MPI && make MP && make install\n\n\n#################\n## Install paml\nFROM base as paml\nWORKDIR /opt\nRUN git clone https://github.com/binlu1981/paml && cd paml && cd src && make\n\n\n#################\n## Install mafft\nFROM base as mafft\n#No WORKDIR /opt  because not used for apt-get\nRUN apt-get clean  && apt-get update && apt-get install --no-install-recommends -y mafft && rm -rf /var/lib/apt/lists/*;\n\n\n####################\n## Install all\nFROM base\n\nWORKDIR /opt/\n\n## Install python3, necessary packages and DGINN\nRUN apt-get install --no-install-recommends -y python3-pip && rm -rf /var/lib/apt/lists/*;\n\nRUN pip3 install --no-cache-dir --upgrade numpy \\\n\tscipy \\\n\tpandas \\\n\trequests \\\n\tsetuptools \\\n\tpyqt5==5.14 \\\n\tsix \\\n\tlxml\n\nRUN pip3 install --no-cache-dir biopython\n\nRUN pip3 install --no-cache-dir --upgrade ete3\n\nRUN git clone https://github.com/lgueguen/DGINN && cd DGINN && chmod +x DGINN.py\nENV PATH /opt/DGINN/:$PATH\nENV PYTHONPATH /opt/DGINN/:$PYTHONPATH\n\n\n## All softwares\nENV PATH /opt/bin:$PATH\n\nCOPY --from=prank /opt/prank-msa/src/prank /opt/bin/prank\n\nCOPY --from=mafft /usr/bin/mafft /opt/mafft/bin/mafft\nCOPY --from=mafft /usr/bin/mafft-homologs /opt/mafft/bin/mafft-homologs\nCOPY --from=mafft /usr/bin/mafft-profile /opt/mafft/bin/mafft-profil\nCOPY --from=mafft /usr/lib/mafft /usr/lib/mafft  \n#\nENV PATH /opt/mafft/bin/:/opt/mafft/lib/:$PATH\n#ENV LD_LIBRARY_PATH /opt/local/lib:$LD_LIBRARY_PATH\n# RUN echo $PATH\n#\n\n\nCOPY --from=phyml /usr/lib/phyml/bin/phyml /opt/bin/phyml\n\n\nCOPY --from=treerecs  /opt/Treerecs /opt/treerecs\nENV PATH /opt/treerecs/bin:$PATH\n\nCOPY --from=biopp  /opt/bpp/lib /opt/bpp/lib\nCOPY --from=biopp  /opt/bpp/bppsuite/bppSuite /opt/bpp/bppsuite/bppSuite\n\nENV PATH /opt/bpp/bppsuite/bppSuite/:$PATH\nENV LD_LIBRARY_PATH /opt/bpp/lib:$LD_LIBRARY_PATH\n\nRUN apt-get install --no-install-recommends -y hyphy-mpi hyphy-common hyphy-pt && rm -rf /var/lib/apt/lists/*;\nRUN echo $PATH\n\nCOPY --from=paml /opt/paml/src/codeml /usr/local/bin/\n\nRUN apt-get install --no-install-recommends -y python3-biopython && rm -rf /var/lib/apt/lists/*;\n\n#WORKDIR ~/\nENTRYPOINT [\"DGINN.py\"]\nCMD [\"-h\"]\n"
}