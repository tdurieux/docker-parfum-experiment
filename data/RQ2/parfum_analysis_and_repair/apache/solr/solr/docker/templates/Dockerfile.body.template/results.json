{
  "startTime": 1674218871966,
  "endTime": 1674218873271,
  "originalSmells": [
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 72,
        "lineEnd": 72,
        "columnStart": 4,
        "columnEnd": 77
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "#-# Licensed to the Apache Software Foundation (ASF) under one or more\n#-# contributor license agreements.  See the NOTICE file distributed with\n#-# this work for additional information regarding copyright ownership.\n#-# The ASF licenses this file to You under the Apache License, Version 2.0\n#-# (the \"License\"); you may not use this file except in compliance with\n#-# the License.  You may obtain a copy of the License at\n#-#\n#-#     http://www.apache.org/licenses/LICENSE-2.0\n#-#\n#-# Unless required by applicable law or agreed to in writing, software\n#-# distributed under the License is distributed on an \"AS IS\" BASIS,\n#-# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n#-# See the License for the specific language governing permissions and\n#-# limitations under the License.\n\n#-#\n#-# This template is used as the primary body of both \"local\" and \"official\" Apache Solr Dockerfiles.\n#-# It contains everything that should be \"common\" between both files.\n#-#\n#-# ! ! ! NO VARIABLES OR CONDITIONAL LOGIC SHOULD BE NEEDED OR USED IN THIS TEMPLATE ! ! !\n#-# (It exists as a 'template' solely so that this comment can exist)\n#-#\n#-# The pre-reqs for this file (which must be satisfied for any \"header\" pre-pended to it are that\n#-# '/opt/solr-X.Y.Z' exists (ie: COPY'ed from the build context and/or a downloaded and unpacked solr.tgz)\n#-#\n#-#\n#-#\n\nLABEL org.opencontainers.image.title=\"Apache Solr\"\nLABEL org.opencontainers.image.description=\"Apache Solr is the popular, blazing-fast, open source search platform built on Apache Lucene.\"\nLABEL org.opencontainers.image.authors=\"The Apache Solr Project\"\nLABEL org.opencontainers.image.url=\"https://solr.apache.org\"\nLABEL org.opencontainers.image.source=\"https://github.com/apache/solr\"\nLABEL org.opencontainers.image.documentation=\"https://solr.apache.org/guide/\"\nLABEL org.opencontainers.image.version=\"${SOLR_VERSION}\"\nLABEL org.opencontainers.image.licenses=\"Apache-2.0\"\n\nENV SOLR_USER=\"solr\" \\\n    SOLR_UID=\"8983\" \\\n    SOLR_GROUP=\"solr\" \\\n    SOLR_GID=\"8983\" \\\n    PATH=\"/opt/solr/bin:/opt/solr/docker/scripts:/opt/solr/prometheus-exporter/bin:$PATH\" \\\n    SOLR_INCLUDE=/etc/default/solr.in.sh \\\n    SOLR_HOME=/var/solr/data \\\n    SOLR_PID_DIR=/var/solr \\\n    SOLR_LOGS_DIR=/var/solr/logs \\\n    LOG4J_PROPS=/var/solr/log4j2.xml \\\n    SOLR_JETTY_HOST=\"0.0.0.0\"\n\nRUN set -ex; \\\n  groupadd -r --gid \"$SOLR_GID\" \"$SOLR_GROUP\"; \\\n  useradd -r --uid \"$SOLR_UID\" --gid \"$SOLR_GID\" \"$SOLR_USER\"\n\n# add symlink to /opt/solr, remove what we don't want.\n# Remove the Dockerfile because it might not represent the dockerfile that was used to generate the image.\nRUN set -ex; \\\n  (cd /opt; ln -s solr-*/ solr); \\\n  rm -Rf /opt/solr/docs /opt/solr/docker/Dockerfile;\n\nRUN set -ex; \\\n  mkdir -p /opt/solr/server/solr/lib /docker-entrypoint-initdb.d; \\\n  cp /opt/solr/bin/solr.in.sh /etc/default/solr.in.sh; \\\n  mv /opt/solr/bin/solr.in.sh /opt/solr/bin/solr.in.sh.orig; \\\n  mv /opt/solr/bin/solr.in.cmd /opt/solr/bin/solr.in.cmd.orig; \\\n  chmod 0664 /etc/default/solr.in.sh; \\\n  mkdir -p -m0770 /var/solr; \\\n  chown -R \"$SOLR_USER:0\" /var/solr; \\\n  ln -s /opt/solr/modules /opt/solr/contrib; \\\n  ln -s /opt/solr/prometheus-exporter /opt/solr/modules/prometheus-exporter;\n\nRUN set -ex; \\\n    apt-get update; \\\n    apt-get -y --no-install-recommends install acl dirmngr lsof procps wget netcat gosu tini jattach; \\\n    rm -rf /var/lib/apt/lists/*;\n\nVOLUME /var/solr\nEXPOSE 8983\nWORKDIR /opt/solr\nUSER $SOLR_USER\n\nENTRYPOINT [\"docker-entrypoint.sh\"]\nCMD [\"solr-foreground\"]\n"
}