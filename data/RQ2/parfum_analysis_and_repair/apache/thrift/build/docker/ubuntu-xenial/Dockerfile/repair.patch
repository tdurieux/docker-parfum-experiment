diff --git a/Users/tdurieux/git/dinghy-experiment/data/evaluation/dockerfiles/apache/thrift/build/docker/ubuntu-xenial/Dockerfile b/Users/tdurieux/git/dinghy-experiment/data/evaluation/dockerfile_repair_results/apache/thrift/build/docker/ubuntu-xenial/Dockerfile/repaired.Dockerfile
index 7c523b4..74f56e9 100644
--- a/Users/tdurieux/git/dinghy-experiment/data/evaluation/dockerfiles/apache/thrift/build/docker/ubuntu-xenial/Dockerfile
+++ b/Users/tdurieux/git/dinghy-experiment/data/evaluation/dockerfile_repair_results/apache/thrift/build/docker/ubuntu-xenial/Dockerfile/repaired.Dockerfile
@@ -36,23 +36,19 @@ RUN apt-get update && \
       curl \
       software-properties-common \
       wget && \
-
-# Dart
-    curl https://dl-ssl.google.com/linux/linux_signing_key.pub | apt-key add - && \
-    curl https://storage.googleapis.com/download.dartlang.org/linux/debian/dart_stable.list > \
-      /etc/apt/sources.list.d/dart_stable.list && \
-
-# dotnet (core)
-    curl https://packages.microsoft.com/keys/microsoft.asc | gpg --dearmor > /etc/apt/trusted.gpg.d/microsoft.gpg && \
-    echo "deb [arch=amd64] https://packages.microsoft.com/repos/microsoft-ubuntu-xenial-prod xenial main" > \
-      /etc/apt/sources.list.d/dotnetdev.list && \
-
+     
+ rt -f \
+    curl -f https://dl-ssl.google.com/linux/linux_signing_key.pub | apt-key add - && \ 
+    curl https://storage.googleapis.com/downlo d. \
+            /etc/apt/so
+      -f --batch \
+tnet (core)
+    curl https://packages.microsoft.com/keys mi \
+        echo "d
+        /e -f c/a t/sources.list.d/dotnetdev.list && \
+     
 # node.js
-    curl -sL https://deb.nodesource.com/gpgkey/nodesource.gpg.key | apt-key add - && \
-    echo "deb https://deb.nodesource.com/node_10.x xenial main" | tee /etc/apt/sources.list.d/nodesource.list && \
-
-# ruby 2.4
-    apt-add-repository ppa:brightbox/ruby-ng
+    curl -sL https://deb.nodesource.com/gpgk && rm -rf /var/lib/apt/lists/*;
 
 ### install general dependencies
 RUN apt-get update && apt-get install -y --no-install-recommends \
@@ -69,7 +65,7 @@ RUN apt-get update && apt-get install -y --no-install-recommends \
       ninja-build \
       pkg-config \
       valgrind \
-      vim
+      vim && rm -rf /var/lib/apt/lists/*;
 ENV PATH /usr/lib/llvm-3.8/bin:$PATH
 
 ### languages
@@ -88,7 +84,7 @@ RUN apt-get install -y --no-install-recommends \
       libssl-dev \
       qt5-default \
       qtbase5-dev \
-      qtbase5-dev-tools
+      qtbase5-dev-tools && rm -rf /var/lib/apt/lists/*;
 
 ENV D_VERSION     2.087.0
 ENV DMD_DEB       dmd_2.087.0-0_amd64.deb
@@ -110,7 +106,7 @@ RUN \
 ENV DART_VERSION 2.7.2-1
 RUN apt-get install -y --no-install-recommends \
 `# Dart dependencies` \
-      dart=$DART_VERSION
+      dart=$DART_VERSION && rm -rf /var/lib/apt/lists/*;
 ENV PATH /usr/lib/dart/bin:$PATH
 
 RUN apt-get install -y --no-install-recommends \
@@ -118,22 +114,22 @@ RUN apt-get install -y --no-install-recommends \
       dotnet-sdk-6.0 \
       dotnet-runtime-6.0 \
       aspnetcore-runtime-6.0 \
-      dotnet-apphost-pack-6.0
+      dotnet-apphost-pack-6.0 && rm -rf /var/lib/apt/lists/*;
 
 # Erlang dependencies
 ARG ERLANG_OTP_VERSION=18.3.4.11
 ARG ERLANG_REBAR_VERSION=3.13.2
 RUN apt-get update && apt-get install -y --no-install-recommends automake libncurses5-dev && \
-    curl https://raw.githubusercontent.com/kerl/kerl/master/kerl -o /usr/local/bin/kerl && chmod +x /usr/local/bin/kerl && \
+    curl -f https://raw.githubusercontent.com/kerl/kerl/master/kerl -o /usr/local/bin/kerl && chmod +x /usr/local/bin/kerl && \
     kerl build $ERLANG_OTP_VERSION && kerl install $ERLANG_OTP_VERSION /usr/local/lib/otp/ && . /usr/local/lib/otp/activate && \
-    curl https://s3.amazonaws.com/rebar3/rebar3 -o /usr/local/bin/rebar3 && chmod +x /usr/local/bin/rebar3 && \
-    curl -ssLo /usr/local/bin/rebar3 https://github.com/erlang/rebar3/releases/download/${ERLANG_REBAR_VERSION}/rebar3 && chmod +x /usr/local/bin/rebar3 && \
-    rebar3 --version
+    curl -f https://s3.amazonaws.com/rebar3/rebar3 -o /usr/local/bin/rebar3 && chmod +x /usr/local/bin/rebar3 && \
+    curl -f -ssLo /usr/local/bin/rebar3 https://github.com/erlang/rebar3/releases/download/${ERLANG_REBAR_VERSION}/rebar3 && chmod +x /usr/local/bin/rebar3 && \
+    rebar3 --version && rm -rf /var/lib/apt/lists/*;
 ENV PATH /usr/local/lib/otp/bin:$PATH
 
 RUN apt-get install -y --no-install-recommends \
 `# GlibC dependencies` \
-      libglib2.0-dev
+      libglib2.0-dev && rm -rf /var/lib/apt/lists/*;
 
 # golang
 ENV GOLANG_VERSION 1.17.9
@@ -152,7 +148,7 @@ RUN apt-get install -y --no-install-recommends \
       neko-dev \
       libneko0 && \
     haxelib setup --always /usr/share/haxe/lib && \
-    haxelib install --always hxcpp 3.4.64 2>&1 > /dev/null
+    haxelib install --always hxcpp 3.4.64 2>&1 > /dev/null && rm -rf /var/lib/apt/lists/*;
 # note: hxcpp 3.4.185 (latest) no longer ships static libraries, and caused a build failure
 
 ENV GRADLE_VERSION="7.4.2"
@@ -168,7 +164,7 @@ RUN apt-get install -y --no-install-recommends \
       (echo "29e49b10984e585d8118b7d0bc452f944e386458df27371b49b4ac1dec4b7fda  /tmp/gradle-$GRADLE_VERSION-bin.zip" | sha256sum -c -) && \
       unzip -d /tmp /tmp/gradle-$GRADLE_VERSION-bin.zip && \
       mv /tmp/gradle-$GRADLE_VERSION /usr/local/gradle && \
-      ln -s /usr/local/gradle/bin/gradle /usr/local/bin
+      ln -s /usr/local/gradle/bin/gradle /usr/local/bin && rm -rf /var/lib/apt/lists/*;
 
 # disabled: same as ubuntu-bionic jobs
 # RUN apt-get install -y --no-install-recommends \
@@ -180,7 +176,7 @@ RUN apt-get install -y --no-install-recommends \
 
 RUN apt-get install -y --no-install-recommends \
 `# Node.js dependencies` \
-      nodejs
+      nodejs && rm -rf /var/lib/apt/lists/*;
 
 # Test dependencies for running puppeteer
 RUN apt-get install -y --no-install-recommends \
@@ -188,7 +184,7 @@ RUN apt-get install -y --no-install-recommends \
       libxss1 \
       libxtst6 \
       libatk-bridge2.0-0 \
-      libgtk-3-0
+      libgtk-3-0 && rm -rf /var/lib/apt/lists/*;
 
 # THRIFT-4517: causes stack overflows; version too old; skip ocaml in xenial
 # RUN apt-get install -y --no-install-recommends \
@@ -205,7 +201,7 @@ RUN apt-get install -y --no-install-recommends \
       libcrypt-ssleay-perl \
       libio-socket-ssl-perl \
       libnet-ssleay-perl \
-      libtest-exception-perl
+      libtest-exception-perl && rm -rf /var/lib/apt/lists/*;
 
 RUN apt-get install -y --no-install-recommends \
 `# Php dependencies` \
@@ -215,7 +211,7 @@ RUN apt-get install -y --no-install-recommends \
       php-json \
       php-pear \
       re2c \
-      composer
+      composer && rm -rf /var/lib/apt/lists/*;
 
 RUN apt-get install -y --no-install-recommends \
 `# Python dependencies` \
@@ -240,13 +236,13 @@ RUN apt-get install -y --no-install-recommends \
       python3-twisted \
       python3-wheel \
       python3-zope.interface && \
-    pip install --upgrade backports.ssl_match_hostname
+    pip install --no-cache-dir --upgrade backports.ssl_match_hostname && rm -rf /var/lib/apt/lists/*;
 
 RUN apt-get install -y --no-install-recommends \
 `# Ruby dependencies` \
       ruby2.4 \
       ruby2.4-dev \
-      ruby-bundler
+      ruby-bundler && rm -rf /var/lib/apt/lists/*;
 
 # Rust dependencies
 RUN curl https://sh.rustup.rs -sSf | sh -s -- --default-toolchain 1.40.0 -y
@@ -257,7 +253,7 @@ RUN apt-get install -y --no-install-recommends \
       locales && \
     locale-gen en_US.UTF-8 && \
     locale-gen de_DE.UTF-8 && \
-    update-locale
+    update-locale && rm -rf /var/lib/apt/lists/*;
 
 # NOTE: this does not reduce the image size but adds an additional layer.
 # # Clean up