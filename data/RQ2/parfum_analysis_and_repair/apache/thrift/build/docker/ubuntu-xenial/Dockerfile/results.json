{
  "startTime": 1674218541071,
  "endTime": 1674218543504,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 39,
        "lineEnd": 39,
        "columnStart": 4,
        "columnEnd": 62
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 40,
        "lineEnd": 41,
        "columnStart": 4,
        "columnEnd": 46
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 43,
        "lineEnd": 43,
        "columnStart": 4,
        "columnEnd": 58
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 47,
        "lineEnd": 47,
        "columnStart": 4,
        "columnEnd": 65
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 126,
        "lineEnd": 126,
        "columnStart": 4,
        "columnEnd": 87
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 128,
        "lineEnd": 128,
        "columnStart": 4,
        "columnEnd": 72
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 129,
        "lineEnd": 129,
        "columnStart": 4,
        "columnEnd": 118
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 242,
        "lineEnd": 242,
        "columnStart": 4,
        "columnEnd": 54
      }
    },
    {
      "rule": "gpgUseBatchFlag",
      "position": {
        "lineStart": 43,
        "lineEnd": 43,
        "columnStart": 61,
        "columnEnd": 113
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 78,
        "lineEnd": 90,
        "columnStart": 4,
        "columnEnd": 23
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 110,
        "lineEnd": 112,
        "columnStart": 4,
        "columnEnd": 24
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 115,
        "lineEnd": 120,
        "columnStart": 4,
        "columnEnd": 29
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 133,
        "lineEnd": 135,
        "columnStart": 4,
        "columnEnd": 20
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 147,
        "lineEnd": 152,
        "columnStart": 4,
        "columnEnd": 14
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 158,
        "lineEnd": 164,
        "columnStart": 4,
        "columnEnd": 11
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 180,
        "lineEnd": 182,
        "columnStart": 4,
        "columnEnd": 12
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 185,
        "lineEnd": 190,
        "columnStart": 4,
        "columnEnd": 16
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 200,
        "lineEnd": 207,
        "columnStart": 4,
        "columnEnd": 28
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 209,
        "lineEnd": 217,
        "columnStart": 4,
        "columnEnd": 14
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 219,
        "lineEnd": 241,
        "columnStart": 4,
        "columnEnd": 28
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 244,
        "lineEnd": 248,
        "columnStart": 4,
        "columnEnd": 18
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 254,
        "lineEnd": 256,
        "columnStart": 4,
        "columnEnd": 13
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 31,
        "lineEnd": 37,
        "columnStart": 4,
        "columnEnd": 10
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 57,
        "lineEnd": 71,
        "columnStart": 22,
        "columnEnd": 9
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 78,
        "lineEnd": 90,
        "columnStart": 4,
        "columnEnd": 23
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 110,
        "lineEnd": 112,
        "columnStart": 4,
        "columnEnd": 24
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 115,
        "lineEnd": 120,
        "columnStart": 4,
        "columnEnd": 29
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 125,
        "lineEnd": 125,
        "columnStart": 22,
        "columnEnd": 89
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 133,
        "lineEnd": 135,
        "columnStart": 4,
        "columnEnd": 20
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 147,
        "lineEnd": 152,
        "columnStart": 4,
        "columnEnd": 14
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 158,
        "lineEnd": 164,
        "columnStart": 4,
        "columnEnd": 11
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 180,
        "lineEnd": 182,
        "columnStart": 4,
        "columnEnd": 12
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 185,
        "lineEnd": 190,
        "columnStart": 4,
        "columnEnd": 16
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 200,
        "lineEnd": 207,
        "columnStart": 4,
        "columnEnd": 28
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 209,
        "lineEnd": 217,
        "columnStart": 4,
        "columnEnd": 14
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 219,
        "lineEnd": 241,
        "columnStart": 4,
        "columnEnd": 28
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 244,
        "lineEnd": 248,
        "columnStart": 4,
        "columnEnd": 18
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 254,
        "lineEnd": 256,
        "columnStart": 4,
        "columnEnd": 13
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 40,
        "lineEnd": 41,
        "columnStart": 4,
        "columnEnd": 23
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 74,
        "lineEnd": 86,
        "columnStart": 4,
        "columnEnd": 23
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 106,
        "lineEnd": 108,
        "columnStart": 4,
        "columnEnd": 24
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 111,
        "lineEnd": 116,
        "columnStart": 4,
        "columnEnd": 29
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 129,
        "lineEnd": 131,
        "columnStart": 4,
        "columnEnd": 20
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 143,
        "lineEnd": 148,
        "columnStart": 4,
        "columnEnd": 14
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 154,
        "lineEnd": 160,
        "columnStart": 4,
        "columnEnd": 11
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 176,
        "lineEnd": 178,
        "columnStart": 4,
        "columnEnd": 12
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 181,
        "lineEnd": 186,
        "columnStart": 4,
        "columnEnd": 16
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 196,
        "lineEnd": 203,
        "columnStart": 4,
        "columnEnd": 28
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 205,
        "lineEnd": 213,
        "columnStart": 4,
        "columnEnd": 14
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 215,
        "lineEnd": 237,
        "columnStart": 4,
        "columnEnd": 28
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 240,
        "lineEnd": 244,
        "columnStart": 4,
        "columnEnd": 18
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 250,
        "lineEnd": 252,
        "columnStart": 4,
        "columnEnd": 13
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 31,
        "lineEnd": 37,
        "columnStart": 4,
        "columnEnd": 10
      }
    }
  ],
  "repairedDockerfile": "# Licensed under the Apache License, Version 2.0 (the \"License\");\n# you may not use this file except in compliance with the License.\n# You may obtain a copy of the License at\n#\n#     http://www.apache.org/licenses/LICENSE-2.0\n#\n# Unless required by applicable law or agreed to in writing, software\n# distributed under the License is distributed on an \"AS IS\" BASIS,\n# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n# See the License for the specific language governing permissions and\n# limitations under the License.\n\n#\n# Apache Thrift Docker build environment for Ubuntu Xenial\n# Using all stock Ubuntu Xenial packaging except for:\n# - d: does not come with Ubuntu so we're installing 2.087.0 for coverage\n# - dart: does not come with Ubuntu so we're installing 2.0.0-1 for coverage\n# - dotnet: does not come with Ubuntu\n# - go: Xenial comes with 1.6, but we need 1.10 or later\n# - nodejs: Xenial comes with 4.2.6 which exits LTS April 2018, so we're installing 10.x\n# - ocaml: causes stack overflow error, just started March 2018 not sure why\n#\n\nFROM buildpack-deps:xenial-scm\nMAINTAINER Apache Thrift <dev@thrift.apache.org>\nENV DEBIAN_FRONTEND noninteractive\n\n### Add apt repos\n\nRUN apt-get update && \\\n    apt-get dist-upgrade -y && \\\n    apt-get install -y --no-install-recommends \\\n      apt \\\n      apt-transport-https \\\n      apt-utils \\\n      curl \\\n      software-properties-common \\\n      wget && \\\n     \n rt -f \\\n    curl -f https://dl-ssl.google.com/linux/linux_signing_key.pub | apt-key add - && \\ \n    curl https://storage.googleapis.com/downlo d. \\\n            /etc/apt/so\n      -f --batch \\\ntnet (core)\n    curl https://packages.microsoft.com/keys mi \\\n        echo \"d\n        /e -f c/a t/sources.list.d/dotnetdev.list && \\\n     \n# node.js\n    curl -sL https://deb.nodesource.com/gpgk && rm -rf /var/lib/apt/lists/*;\n\n### install general dependencies\nRUN apt-get update && apt-get install -y --no-install-recommends \\\n`# General dependencies` \\\n      bash-completion \\\n      bison \\\n      build-essential \\\n      clang \\\n      cmake \\\n      debhelper \\\n      flex \\\n      gdb \\\n      llvm \\\n      ninja-build \\\n      pkg-config \\\n      valgrind \\\n      vim && rm -rf /var/lib/apt/lists/*;\nENV PATH /usr/lib/llvm-3.8/bin:$PATH\n\n### languages\n\n# TODO: \"apt-get install\" without \"apt-get update\" in the same \"RUN\" step can cause cache issues if modified later.\n# See https://docs.docker.com/develop/develop-images/dockerfile_best-practices/#run\nRUN apt-get install -y --no-install-recommends \\\n`# C++ dependencies` \\\n      libboost-dev \\\n      libboost-filesystem-dev \\\n      libboost-program-options-dev \\\n      libboost-system-dev \\\n      libboost-test-dev \\\n      libboost-thread-dev \\\n      libevent-dev \\\n      libssl-dev \\\n      qt5-default \\\n      qtbase5-dev \\\n      qtbase5-dev-tools && rm -rf /var/lib/apt/lists/*;\n\nENV D_VERSION     2.087.0\nENV DMD_DEB       dmd_2.087.0-0_amd64.deb\nRUN \\\n`# D dependencies` \\\n    wget -q http://downloads.dlang.org/releases/2.x/${D_VERSION}/${DMD_DEB} && \\\n    dpkg --install ${DMD_DEB} && \\\n    rm -f ${DMD_DEB} && \\\n    mkdir -p /usr/include/dmd/druntime/import/deimos /usr/include/dmd/druntime/import/C && \\\n    git clone -b 'v2.0.2+2.0.16' https://github.com/D-Programming-Deimos/libevent.git deimos-libevent-2.0 && \\\n    mv deimos-libevent-2.0/deimos/* /usr/include/dmd/druntime/import/deimos/ && \\\n    mv deimos-libevent-2.0/C/* /usr/include/dmd/druntime/import/C/ && \\\n    rm -rf deimos-libevent-2.0 && \\\n    git clone -b 'v1.1.6+1.0.1g' https://github.com/D-Programming-Deimos/openssl.git deimos-openssl-1.0.1g && \\\n    mv deimos-openssl-1.0.1g/deimos/* /usr/include/dmd/druntime/import/deimos/ && \\\n    mv deimos-openssl-1.0.1g/C/* /usr/include/dmd/druntime/import/C/ && \\\n    rm -rf deimos-openssl-1.0.1g\n\nENV DART_VERSION 2.7.2-1\nRUN apt-get install -y --no-install-recommends \\\n`# Dart dependencies` \\\n      dart=$DART_VERSION && rm -rf /var/lib/apt/lists/*;\nENV PATH /usr/lib/dart/bin:$PATH\n\nRUN apt-get install -y --no-install-recommends \\\n`# dotnet core dependencies` \\\n      dotnet-sdk-6.0 \\\n      dotnet-runtime-6.0 \\\n      aspnetcore-runtime-6.0 \\\n      dotnet-apphost-pack-6.0 && rm -rf /var/lib/apt/lists/*;\n\n# Erlang dependencies\nARG ERLANG_OTP_VERSION=18.3.4.11\nARG ERLANG_REBAR_VERSION=3.13.2\nRUN apt-get update && apt-get install -y --no-install-recommends automake libncurses5-dev && \\\n    curl -f https://raw.githubusercontent.com/kerl/kerl/master/kerl -o /usr/local/bin/kerl && chmod +x /usr/local/bin/kerl && \\\n    kerl build $ERLANG_OTP_VERSION && kerl install $ERLANG_OTP_VERSION /usr/local/lib/otp/ && . /usr/local/lib/otp/activate && \\\n    curl -f https://s3.amazonaws.com/rebar3/rebar3 -o /usr/local/bin/rebar3 && chmod +x /usr/local/bin/rebar3 && \\\n    curl -f -ssLo /usr/local/bin/rebar3 https://github.com/erlang/rebar3/releases/download/${ERLANG_REBAR_VERSION}/rebar3 && chmod +x /usr/local/bin/rebar3 && \\\n    rebar3 --version && rm -rf /var/lib/apt/lists/*;\nENV PATH /usr/local/lib/otp/bin:$PATH\n\nRUN apt-get install -y --no-install-recommends \\\n`# GlibC dependencies` \\\n      libglib2.0-dev && rm -rf /var/lib/apt/lists/*;\n\n# golang\nENV GOLANG_VERSION 1.17.9\nENV GOLANG_DOWNLOAD_URL https://go.dev/dl/go$GOLANG_VERSION.linux-amd64.tar.gz\nENV GOLANG_DOWNLOAD_SHA256 9dacf782028fdfc79120576c872dee488b81257b1c48e9032d122cfdb379cca6\nRUN curl -fsSL \"$GOLANG_DOWNLOAD_URL\" -o golang.tar.gz && \\\n      echo \"$GOLANG_DOWNLOAD_SHA256  golang.tar.gz\" | sha256sum -c - && \\\n      tar -C /usr/local -xzf golang.tar.gz && \\\n      ln -s /usr/local/go/bin/go /usr/local/bin && \\\n      rm golang.tar.gz\n\nRUN apt-get install -y --no-install-recommends \\\n`# Haxe dependencies` \\\n      haxe \\\n      neko \\\n      neko-dev \\\n      libneko0 && \\\n    haxelib setup --always /usr/share/haxe/lib && \\\n    haxelib install --always hxcpp 3.4.64 2>&1 > /dev/null && rm -rf /var/lib/apt/lists/*;\n# note: hxcpp 3.4.185 (latest) no longer ships static libraries, and caused a build failure\n\nENV GRADLE_VERSION=\"7.4.2\"\nRUN apt-get install -y --no-install-recommends \\\n`# Java dependencies` \\\n      ant \\\n      ant-optional \\\n      openjdk-8-jdk \\\n      maven \\\n      unzip && \\\n`# Gradle` \\\n      wget https://services.gradle.org/distributions/gradle-$GRADLE_VERSION-bin.zip -q -O /tmp/gradle-$GRADLE_VERSION-bin.zip && \\\n      (echo \"29e49b10984e585d8118b7d0bc452f944e386458df27371b49b4ac1dec4b7fda  /tmp/gradle-$GRADLE_VERSION-bin.zip\" | sha256sum -c -) && \\\n      unzip -d /tmp /tmp/gradle-$GRADLE_VERSION-bin.zip && \\\n      mv /tmp/gradle-$GRADLE_VERSION /usr/local/gradle && \\\n      ln -s /usr/local/gradle/bin/gradle /usr/local/bin && rm -rf /var/lib/apt/lists/*;\n\n# disabled: same as ubuntu-bionic jobs\n# RUN apt-get install -y --no-install-recommends \\\n# `# Lua dependencies` \\\n#       lua5.2 \\\n#       lua5.2-dev\n# https://bugs.launchpad.net/ubuntu/+source/lua5.3/+bug/1707212\n# lua5.3 does not install alternatives so stick with 5.2 here\n\nRUN apt-get install -y --no-install-recommends \\\n`# Node.js dependencies` \\\n      nodejs && rm -rf /var/lib/apt/lists/*;\n\n# Test dependencies for running puppeteer\nRUN apt-get install -y --no-install-recommends \\\n`# JS dependencies` \\\n      libxss1 \\\n      libxtst6 \\\n      libatk-bridge2.0-0 \\\n      libgtk-3-0 && rm -rf /var/lib/apt/lists/*;\n\n# THRIFT-4517: causes stack overflows; version too old; skip ocaml in xenial\n# RUN apt-get install -y --no-install-recommends \\\n# `# OCaml dependencies` \\\n#       ocaml \\\n#       opam && \\\n#     opam init --yes && \\\n#     opam install --yes oasis\n\nRUN apt-get install -y --no-install-recommends \\\n`# Perl dependencies` \\\n      libbit-vector-perl \\\n      libclass-accessor-class-perl \\\n      libcrypt-ssleay-perl \\\n      libio-socket-ssl-perl \\\n      libnet-ssleay-perl \\\n      libtest-exception-perl && rm -rf /var/lib/apt/lists/*;\n\nRUN apt-get install -y --no-install-recommends \\\n`# Php dependencies` \\\n      php7.0 \\\n      php7.0-cli \\\n      php7.0-dev \\\n      php-json \\\n      php-pear \\\n      re2c \\\n      composer && rm -rf /var/lib/apt/lists/*;\n\nRUN apt-get install -y --no-install-recommends \\\n`# Python dependencies` \\\n      python-all \\\n      python-all-dbg \\\n      python-all-dev \\\n      python-backports.ssl-match-hostname \\\n      python-ipaddress \\\n      python-pip \\\n      python-setuptools \\\n      python-six \\\n      python-tornado \\\n      python-twisted \\\n      python-wheel \\\n      python-zope.interface \\\n      python3-all \\\n      python3-all-dbg \\\n      python3-all-dev \\\n      python3-setuptools \\\n      python3-six \\\n      python3-tornado \\\n      python3-twisted \\\n      python3-wheel \\\n      python3-zope.interface && \\\n    pip install --no-cache-dir --upgrade backports.ssl_match_hostname && rm -rf /var/lib/apt/lists/*;\n\nRUN apt-get install -y --no-install-recommends \\\n`# Ruby dependencies` \\\n      ruby2.4 \\\n      ruby2.4-dev \\\n      ruby-bundler && rm -rf /var/lib/apt/lists/*;\n\n# Rust dependencies\nRUN curl https://sh.rustup.rs -sSf | sh -s -- --default-toolchain 1.40.0 -y\n\n# Locale(s) for cpp unit tests\nRUN apt-get install -y --no-install-recommends \\\n`# Locale dependencies` \\\n      locales && \\\n    locale-gen en_US.UTF-8 && \\\n    locale-gen de_DE.UTF-8 && \\\n    update-locale && rm -rf /var/lib/apt/lists/*;\n\n# NOTE: this does not reduce the image size but adds an additional layer.\n# # Clean up\n# RUN rm -rf /var/cache/apt/* && \\\n#     rm -rf /var/lib/apt/lists/* && \\\n#     rm -rf /tmp/* && \\\n#     rm -rf /var/tmp/*\n\nENV DOTNET_CLI_TELEMETRY_OPTOUT 1\nENV THRIFT_ROOT /thrift\nRUN mkdir -p $THRIFT_ROOT/src\nCOPY Dockerfile $THRIFT_ROOT/\nWORKDIR $THRIFT_ROOT/src\n"
}