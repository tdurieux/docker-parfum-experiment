{
  "startTime": 1674214889320,
  "endTime": 1674214890661,
  "originalSmells": [
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 28,
        "lineEnd": 28,
        "columnStart": 4,
        "columnEnd": 48
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 43,
        "lineEnd": 43,
        "columnStart": 4,
        "columnEnd": 23
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 46,
        "lineEnd": 46,
        "columnStart": 4,
        "columnEnd": 45
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 48,
        "lineEnd": 48,
        "columnStart": 4,
        "columnEnd": 38
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 50,
        "lineEnd": 50,
        "columnStart": 4,
        "columnEnd": 33
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 53,
        "lineEnd": 53,
        "columnStart": 4,
        "columnEnd": 25
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 56,
        "lineEnd": 56,
        "columnStart": 4,
        "columnEnd": 62
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 59,
        "lineEnd": 59,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 28,
        "lineEnd": 28,
        "columnStart": 4,
        "columnEnd": 48
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 43,
        "lineEnd": 43,
        "columnStart": 4,
        "columnEnd": 23
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 46,
        "lineEnd": 46,
        "columnStart": 4,
        "columnEnd": 45
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 48,
        "lineEnd": 48,
        "columnStart": 4,
        "columnEnd": 38
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 50,
        "lineEnd": 50,
        "columnStart": 4,
        "columnEnd": 33
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 53,
        "lineEnd": 53,
        "columnStart": 4,
        "columnEnd": 25
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 56,
        "lineEnd": 56,
        "columnStart": 4,
        "columnEnd": 62
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 59,
        "lineEnd": 59,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 28,
        "lineEnd": 28,
        "columnStart": 4,
        "columnEnd": 48
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 43,
        "lineEnd": 43,
        "columnStart": 4,
        "columnEnd": 23
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 46,
        "lineEnd": 46,
        "columnStart": 4,
        "columnEnd": 45
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 48,
        "lineEnd": 48,
        "columnStart": 4,
        "columnEnd": 38
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 50,
        "lineEnd": 50,
        "columnStart": 4,
        "columnEnd": 33
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 53,
        "lineEnd": 53,
        "columnStart": 4,
        "columnEnd": 25
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 56,
        "lineEnd": 56,
        "columnStart": 4,
        "columnEnd": 62
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 59,
        "lineEnd": 59,
        "columnStart": 4,
        "columnEnd": 27
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 28,
        "lineEnd": 28,
        "columnStart": 4,
        "columnEnd": 72
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 43,
        "lineEnd": 43,
        "columnStart": 4,
        "columnEnd": 47
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 46,
        "lineEnd": 46,
        "columnStart": 4,
        "columnEnd": 69
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 48,
        "lineEnd": 48,
        "columnStart": 4,
        "columnEnd": 62
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 50,
        "lineEnd": 50,
        "columnStart": 4,
        "columnEnd": 57
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 53,
        "lineEnd": 53,
        "columnStart": 4,
        "columnEnd": 49
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 56,
        "lineEnd": 56,
        "columnStart": 4,
        "columnEnd": 86
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 59,
        "lineEnd": 59,
        "columnStart": 4,
        "columnEnd": 51
      }
    }
  ],
  "repairedDockerfile": "#  Licensed to the Apache Software Foundation (ASF) under one or more\n#  contributor license agreements.  See the NOTICE file distributed with\n#  this work for additional information regarding copyright ownership.\n#  The ASF licenses this file to You under the Apache License, Version 2.0\n#  (the \"License\"); you may not use this file except in compliance with\n#  the License.  You may obtain a copy of the License at\n#\n#      https://www.apache.org/licenses/LICENSE-2.0\n#\n#  Unless required by applicable law or agreed to in writing, software\n#  distributed under the License is distributed on an \"AS IS\" BASIS,\n#  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n#  See the License for the specific language governing permissions and\n#  limitations under the License.\n\n##########################################################################################\n# Build PLC4X\n##########################################################################################\n\n# This is the image we'll use to execute the build (and give it the name 'build').\n# (This image is based on Ubuntu)\n# Fixed version of this in order to have a fixed JDK version\nFROM azul/zulu-openjdk:11 as build\n\n# Install some stuff we need to run the build\nRUN apt update -y\n\n# Install general purpose tools\nRUN apt install --no-install-recommends -y make libpcap-dev libc-dev git && rm -rf /var/lib/apt/lists/*;\n\n# Required for \"with-boost\" profile\n#RUN apt install -y bison flex gcc g++\n\n# Required for \"with-cpp\" profile\n#RUN apt install -y gcc g++\n\n# Required for \"with-proxies\" and \"with-cpp\"\n#RUN apt install -y clang\n\n# Required for \"with-proxies\" and \"with-cpp\"\n#RUN apt install -y cmake\n\n# Required for \"with-dotnet\" profile\nRUN apt install --no-install-recommends -y wget && rm -rf /var/lib/apt/lists/*;\nRUN wget -q https://packages.microsoft.com/config/ubuntu/20.04/packages-microsoft-prod.deb -O packages-microsoft-prod.deb\nRUN dpkg -i packages-microsoft-prod.deb\nRUN apt install --no-install-recommends -y software-properties-common && rm -rf /var/lib/apt/lists/*;\nRUN add-apt-repository universe -y\nRUN apt install --no-install-recommends -y apt-transport-https && rm -rf /var/lib/apt/lists/*;\nRUN apt update -y\nRUN apt install --no-install-recommends -y dotnet-sdk-6.0 && rm -rf /var/lib/apt/lists/*;\n\n# Required for \"with-go\" profile\nRUN apt install --no-install-recommends -y golang && rm -rf /var/lib/apt/lists/*;\n\n# Required for \"with-python\" profile\nRUN apt install --no-install-recommends -y python-setuptools python3 python-is-python3 && rm -rf /var/lib/apt/lists/*;\n\n# Required for running on Windows systems\nRUN apt install --no-install-recommends -y dos2unix && rm -rf /var/lib/apt/lists/*;\n\n# Copy the project into the docker container\nCOPY . /ws/\n\n# Change the working directory (where commands are executed) into the new \"ws\" directory\nWORKDIR /ws\n\n# Make the maven wrapper script executalbe (needed when running on Windows)\nRUN chmod +x ./mvnw\n# Change the line ending to unix-style (needed when running on Windows)\nRUN dos2unix ./mvnw\nRUN dos2unix .mvn/wrapper/maven-wrapper.properties\n\n# Tell Maven to fetch all needed dependencies first, so they can get cached\n# (Tried a patched version of the plugin to allow exclusion of inner artifacts.\n# See https://issues.apache.org/jira/browse/MDEP-568 for details)\n#RUN ./mvnw -P with-boost,with-c,with-cpp,with-dotnet,with-go,with-logstash,with-python,with-sandbox com.offbytwo.maven.plugins:maven-dependency-plugin:3.1.1.MDEP568:go-offline -DexcludeGroupIds=org.apache.plc4x,org.apache.plc4x.examples,org.apache.plc4x.sandbox\nRUN ./mvnw -P with-c,with-dotnet,with-go,with-python,with-sandbox com.offbytwo.maven.plugins:maven-dependency-plugin:3.1.1.MDEP568:go-offline -DexcludeGroupIds=org.apache.plc4x,org.apache.plc4x.examples,org.apache.plc4x.sandbox\n\n# Build everything with all tests\n#RUN ./mvnw -P skip-prerequisite-check,with-boost,with-c,with-cpp,with-dotnet,with-go,with-logstash,with-python,with-sandbox install\nRUN ./mvnw -P with-c,with-dotnet,with-go,with-python,with-sandbox install\n\n# Get the version of the project and save it in a local file on the container\nRUN ./mvnw org.apache.maven.plugins:maven-help-plugin:3.2.0:evaluate -Dexpression=project.version -DforceStdout -q -pl . > project_version\n\n##########################################################################################\n# Build a demo container\n##########################################################################################\n\n# Move the file to a place we can reference it from without a version\nRUN PROJECT_VERSION=`cat project_version`; mv plc4j/examples/hello-integration-iotdb/target/plc4j-hello-integration-iotdb-${PROJECT_VERSION}-uber-jar.jar plc4xdemo.jar\n\n# Build a highly optimized JRE\nFROM alpine:3.10 as packager\n\n# Install regular JDK\nRUN apk update\nRUN apk --no-cache add openjdk11-jdk openjdk11-jmods\n\n# build minimal JRE\nENV JAVA_MINIMAL=\"/opt/java-minimal\"\nRUN /usr/lib/jvm/java-11-openjdk/bin/jlink \\\n    --verbose \\\n    --add-modules \\\n        java.base,java.sql,java.naming,java.desktop,java.management,java.security.jgss,java.instrument \\\n    --compress 2 --strip-debug --no-header-files --no-man-pages \\\n    --release-info=\"add:IMPLEMENTOR=radistao:IMPLEMENTOR_VERSION=radistao_JRE\" \\\n    --output \"$JAVA_MINIMAL\"\n\n# Now create an actual deployment container\nFROM alpine:3.10\n\n# Install our optimized JRE\nENV JAVA_HOME=/opt/java-minimal\nENV PATH=\"$PATH:$JAVA_HOME/bin\"\nCOPY --from=packager \"$JAVA_HOME\" \"$JAVA_HOME\"\n\n# Prepare the demo by copying the example artifact from the 'build' container into this new one.\nCOPY --from=build /ws/plc4xdemo.jar /plc4xdemo.jar\n\n# Let runtime know which ports we will be listening on\nEXPOSE 9200 9300\n\n# Allow for extra options to be passed to the jar using PLC4X_OPTIONS env variable\nENV PLC4X_OPTIONS \"\"\n\n# This will be executed as soon as the container is started.\nENTRYPOINT [\"sh\", \"-c\", \"[ -f /run/plc4xdemo.env ] && . /run/plc4xdemo.env ; java -jar /plc4xdemo.jar $PLC4X_OPTIONS\"]\n"
}