{
  "startTime": 1674250124886,
  "endTime": 1674250125547,
  "originalSmells": [
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 5,
        "lineEnd": 5,
        "columnStart": 7,
        "columnEnd": 97
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 5,
        "lineEnd": 5,
        "columnStart": 7,
        "columnEnd": 97
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM tensorflow/tensorflow:2.3.2-gpu\n\nRUN apt-get update \\\n    && apt-get upgrade -y \\\n    && apt-get install -y \\\n    && apt-get -y --no-install-recommends install apt-utils gcc libpq-dev libsndfile-dev git build-essential cmake screen && rm -rf /var/lib/apt/lists/*;\n\n# Clear cache\nRUN apt clean && apt-get clean\n\n# Install dependencies\nCOPY requirements.txt /\nRUN pip --no-cache-dir install -r /requirements.txt\n\n# Install rnnt_loss\nCOPY scripts /scripts\nARG install_rnnt_loss=true\nARG using_gpu=true\nRUN if [ \"$install_rnnt_loss\" = \"true\" ] ; \\\n    then if [ \"$using_gpu\" = \"true\" ] ; then export CUDA_HOME=/usr/local/cuda ; else echo 'Using CPU' ; fi \\\n    && ./scripts/install_rnnt_loss.sh \\\n    else echo 'Using pure TensorFlow'; fi\n\nRUN echo \"export LD_LIBRARY_PATH=/usr/local/cuda-10.2/lib64${LD_LIBRARY_PATH:+:${LD_LIBRARY_PATH}}\" >> /root/.bashrc"
}