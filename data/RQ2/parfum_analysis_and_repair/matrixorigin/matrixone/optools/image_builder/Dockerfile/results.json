{
  "startTime": 1674248295779,
  "endTime": 1674248296804,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 9,
        "lineEnd": 9,
        "columnStart": 4,
        "columnEnd": 93
      }
    },
    {
      "rule": "yumInstallRmVarCacheYum",
      "position": {
        "lineStart": 8,
        "lineEnd": 8,
        "columnStart": 4,
        "columnEnd": 36
      }
    },
    {
      "rule": "yumInstallRmVarCacheYum",
      "position": {
        "lineStart": 28,
        "lineEnd": 28,
        "columnStart": 7,
        "columnEnd": 28
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 10,
        "lineEnd": 10,
        "columnStart": 4,
        "columnEnd": 57
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 10,
        "lineEnd": 10,
        "columnStart": 4,
        "columnEnd": 57
      }
    }
  ],
  "repairedDockerfile": "# STAGE 1: building the executable\nFROM centos:centos7 AS builder\n\n# add a user here because addgroup and adduser are not available in scratch\nRUN export http_proxy=\"http://172.27.0.17:18080\" \\\n    && export https_proxy=\"http://172.27.0.17:18080\" \\\n    && echo '185.199.108.133 raw.githubusercontent.com' >> /etc/hosts \\\n    && echo '140.82.114.3 github.com' >> /etc/hosts \\\n\t&& yum install -y make gcc sudo git \\\n\t&& curl -f -o /tmp/go1.17.linux-amd64.tar.gz -L https://golang.org/dl/go1.17.linux-amd64.tar.gz \\\n\t&& tar -C /usr/local -xzf /tmp/go1.17.linux-amd64.tar.gz \\\n\t&& echo 'export PATH=\"$PATH:/usr/local/go/bin\"' >> /etc/profile \\\n\t&& source /etc/profile \\\n\t&& go version \\\n\t&& git clone -b main https://github.com/matrixorigin/matrixone.git \\\n\t&& cd matrixone \\\n\t&& make config \\\n\t&& make build \\\n\t&& sed -i 's/host = \"localhost\"/host = \"0.0.0.0\"/' system_vars_config.toml \\\n\t&& mkdir -p /usr/local/matrixone \\\n\t&& cp mo-server /usr/local/matrixone/ \\\n\t&& cp system_vars_config.toml /usr/local/matrixone/ && rm -rf /var/cache/yum\nWORKDIR /usr/local/matrixone/\nCOPY entrypoint.sh .\n\n# STAGE 2: build a small image\nFROM centos:centos7\nRUN mkdir /opt/matrixone \\\n    && yum install -y cronie \\\n\t&& yum clean all && rm -rf /var/cache/yum\nWORKDIR /opt/matrixone\nCOPY --from=builder /usr/local/matrixone/ ./\nENTRYPOINT [\"./entrypoint.sh\"]\n\n"
}