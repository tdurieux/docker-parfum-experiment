{
  "startTime": 1674250733340,
  "endTime": 1674250734428,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 23,
        "lineEnd": 23,
        "columnStart": 4,
        "columnEnd": 117
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 17,
        "lineEnd": 17,
        "columnStart": 4,
        "columnEnd": 47
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 18,
        "lineEnd": 18,
        "columnStart": 4,
        "columnEnd": 42
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 19,
        "lineEnd": 19,
        "columnStart": 4,
        "columnEnd": 49
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 20,
        "lineEnd": 20,
        "columnStart": 4,
        "columnEnd": 44
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 21,
        "lineEnd": 21,
        "columnStart": 4,
        "columnEnd": 33
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 22,
        "lineEnd": 22,
        "columnStart": 4,
        "columnEnd": 33
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 17,
        "lineEnd": 17,
        "columnStart": 4,
        "columnEnd": 47
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 18,
        "lineEnd": 18,
        "columnStart": 4,
        "columnEnd": 42
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 19,
        "lineEnd": 19,
        "columnStart": 4,
        "columnEnd": 49
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 20,
        "lineEnd": 20,
        "columnStart": 4,
        "columnEnd": 44
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 21,
        "lineEnd": 21,
        "columnStart": 4,
        "columnEnd": 33
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 22,
        "lineEnd": 22,
        "columnStart": 4,
        "columnEnd": 33
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "################################################################################\n# INSTRUCTIONS\n################################################################################\n#\n# This Dockerfile is meant to create a building/exec environment for tracee.\n#\n################################################################################\n\nFROM ubuntu:impish\n\nARG uid=1000\nARG gid=1000\n\n# install needed environment\n\nRUN export DEBIAN_FRONTEND=noninteractive && \\\n    apt-get update && \\\n    apt-get install --no-install-recommends -y sudo coreutils findutils && \\\n    apt-get install --no-install-recommends -y bash git curl rsync && \\\n    apt-get install --no-install-recommends -y llvm clang golang make gcc && \\\n    apt-get install --no-install-recommends -y linux-headers-generic && \\\n    apt-get install --no-install-recommends -y libelf-dev && \\\n    apt-get install --no-install-recommends -y zlib1g-dev && \\\n    curl -f -L -o /usr/bin/opa https://github.com/open-policy-agent/opa/releases/download/v0.42.0/opa_linux_amd64_static && \\\n    chmod 755 /usr/bin/opa && rm -rf /var/lib/apt/lists/*;\n\n# allow TRACEE* and LIBBPFGO* environment variables through sudo\n\nRUN echo \"Defaults env_keep += \\\"LANG LC_* HOME EDITOR PAGER GIT_PAGER MAN_PAGER\\\"\" > /etc/sudoers && \\\n    echo \"Defaults env_keep += \\\"LIBBPFGO* TRACEE*\\\"\" >> /etc/sudoers && \\\n    echo \"root ALL=(ALL) NOPASSWD: ALL\" >> /etc/sudoers && \\\n    echo \"tracee ALL=(ALL) NOPASSWD: ALL\" >> /etc/sudoers && \\\n    chmod 0440 /etc/sudoers\n\n# prepare tracee user to be $UID:$GID host equivalent\n\nRUN export uid=$uid gid=$gid && \\\n    mkdir -p /home/tracee && \\\n    echo \"tracee:x:${uid}:${gid}:Tracee,,,:/home/tracee:/bin/bash\" >> /etc/passwd && \\\n    echo \"tracee:x:${gid}:\" >> /etc/group && \\\n    echo \"tracee::99999:0:99999:7:::\" >> /etc/shadow && \\\n    chown ${uid}:${gid} -R /home/tracee && \\\n    echo \"export PS1=\\\"\\u@\\h[\\w]$ \\\"\" > /home/tracee/.bashrc && \\\n    echo \"alias ls=\\\"ls --color\\\"\" >> /home/tracee/.bashrc && \\\n    ln -s /home/tracee/.bashrc /home/tracee/.profile\n\nUSER tracee\nENV HOME /home/tracee\nWORKDIR /tracee\n"
}