{
  "startTime": 1674218211432,
  "endTime": 1674218212236,
  "originalSmells": [
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 30,
        "lineEnd": 30,
        "columnStart": 2,
        "columnEnd": 25
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 46,
        "lineEnd": 46,
        "columnStart": 2,
        "columnEnd": 68
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 48,
        "lineEnd": 48,
        "columnStart": 2,
        "columnEnd": 26
      }
    },
    {
      "rule": "gpgUseBatchFlag",
      "position": {
        "lineStart": 9,
        "lineEnd": 9,
        "columnStart": 32,
        "columnEnd": 36
      }
    },
    {
      "rule": "gpgUseBatchFlag",
      "position": {
        "lineStart": 11,
        "lineEnd": 11,
        "columnStart": 32,
        "columnEnd": 36
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM centos:7\n\nLABEL maintainer=\"mozdef@mozilla.com\"\n\nENV TZ UTC\n\nRUN \\\n  gpg=\"gpg --no-default-keyring --secret-keyring /dev/null --keyring /dev/null --no-option --keyid-format 0xlong\" && \\\n  rpmkeys --import /etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7 && \\\n  rpm -qi gpg-pubkey-f4a80eb5 | $gpg --batch | grep 0x24C6A8A7F4A80EB5 && \\\n  rpmkeys --import https://dl.fedoraproject.org/pub/epel/RPM-GPG-KEY-EPEL-7 && \\\n  rpm -qi gpg-pubkey-352c64e5 | $gpg --batch | grep 0x6A2FAEA2352C64E5 && \\\n  yum makecache fast && \\\n  yum install -y epel-release && \\\n  yum install -y \\\n     glibc-devel \\\n     gcc \\\n     libstdc++ \\\n     zlib-devel \\\n     libcurl-devel \\\n     openssl \\\n     openssl-devel \\\n     git \\\n     make \\\n     python36 \\\n     python36-devel \\\n     python36-pip && \\\n  yum clean all && \\\n  rm -rf /var/cache/yum && \\\n  useradd --create-home --shell /bin/bash --home-dir /opt/mozdef mozdef && \\\n  pip3 install --no-cache-dir virtualenv && \\\n  install --owner mozdef --group mozdef --directory /opt/mozdef/envs /opt/mozdef/envs/mozdef /opt/mozdef/envs/mozdef/cron\n\n# Force pycurl to understand we prefer nss backend\n# Pycurl with ssl support is required by kombu in order to use SQS\nENV PYCURL_SSL_LIBRARY=nss\n\n# Create python virtual environment and install dependencies\nCOPY --chown=mozdef:mozdef requirements.txt /opt/mozdef/envs/mozdef/requirements.txt\n\nCOPY --chown=mozdef:mozdef mozdef_util /opt/mozdef/envs/mozdef/mozdef_util\n\nUSER mozdef\nRUN \\\n  virtualenv -p /usr/bin/python3.6 /opt/mozdef/envs/python && \\\n  source /opt/mozdef/envs/python/bin/activate && \\\n  pip install --no-cache-dir --requirement /opt/mozdef/envs/mozdef/requirements.txt && \\\n  cd /opt/mozdef/envs/mozdef/mozdef_util && \\\n  pip install --no-cache-dir --editable . && \\\n  mkdir /opt/mozdef/envs/mozdef/data\n\n\nWORKDIR /opt/mozdef/envs/mozdef\n\nVOLUME /opt/mozdef/envs/mozdef/data\n\n# Automatically source into python virtual environment\nENV PATH=/opt/mozdef/envs/python/bin:$PATH\n\nUSER root\n"
}