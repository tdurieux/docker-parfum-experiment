{
  "startTime": 1674254010352,
  "endTime": 1674254010991,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 43,
        "lineEnd": 43,
        "columnStart": 18,
        "columnEnd": 72
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 48,
        "lineEnd": 48,
        "columnStart": 18,
        "columnEnd": 80
      }
    },
    {
      "rule": "configureShouldUseBuildFlag",
      "position": {
        "lineStart": 45,
        "lineEnd": 45,
        "columnStart": 29,
        "columnEnd": 40
      }
    },
    {
      "rule": "yumInstallRmVarCacheYum",
      "position": {
        "lineStart": 26,
        "lineEnd": 35,
        "columnStart": 21,
        "columnEnd": 16
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 44,
        "lineEnd": 44,
        "columnStart": 18,
        "columnEnd": 45
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "################################\n## Draft Dockerfile to ChIA-PIPE\n#\n# Step 1. Install ChIA-PET Utilities (CPU)\n# Step 2. Install other dependencies\n# Step 3. Copy over shell scripts\n#\n# 28 Feb 2019\n##################################\n\n# Set the base image to CentOS6\nFROM centos:6.6\n\n# File Author / Maintainer\nMAINTAINER Daniel Capurso\n\n## Dependencies\n# zlib v 1.2.8\n# ChiaSigScaled v 19.4.17n\n# git\n# bwa       (Compiled during CPU make ??)\n# BWT-SW    (Compiled during CPU make ??)\n\n\n# Update the repository sources list\n# Install base packages: git, python, wget, unzip, R\nRUN yum -y update && yum -y install \\\n    git \\\n    curl \\\n    tar \\\n    unzip \\\n    make \\\n    automake \\\n    gcc \\\n    gcc-c++ \\\n    kernel-devel && rm -rf /var/cache/yum\n\n### Install ChIA-PET Utilities (CPU)\n\n## Make outer working directory\nRUN mkdir cpu-dir\n\n## Download and compile zlib (v 1.2.8)\nRUN cd cpu-dir && curl -f -O https://www.zlib.net/fossils/zlib-1.2.8.tar.gz\nRUN cd cpu-dir && tar -xzvf zlib-1.2.8.tar.gz && rm zlib-1.2.8.tar.gz\nRUN cd cpu-dir/zlib-1.2.8 && ./configure --build=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\" && make\n\n## Download and compile Chiasig\nRUN cd cpu-dir && curl -f -O http://folk.uio.no/jonaspau/chiasig/ChiaSigCPPv093.zip\nRUN cd cpu-dir && unzip ChiaSigCPPv093.zip\nRUN cd cpu-dir/ChiaSigCPPv093 && make\n\n## Compile CPU\nCOPY /Users/capurd/proj/chia_pet/chia_pet_tool_2/cpu-dir/cpu-dir cpu-dir/cpu-dir\nRUN cd cpu-dir && make\n\n\n#### Install other dependencies\n\n## Install Anaconda2\nwget https://repo.anaconda.com/archive/Anaconda2-5.2.0-Linux-x86_64.sh\nbash Anaconda2-5.2.0-Linux-x86_64.sh -b -p ${install_dir}/anaconda2\nln -s anaconda2/bin/python python\nln -s anaconda2/bin/conda conda\n\n\n## Install pysam (Python package, not included with conda)\n./conda install -c anaconda pysam\n\n## Install biopython (Python package)\n./conda install -c anaconda biopython\n\n## Install regex (Python package)\n./conda install -c anaconda regex\n\n## Install MACS peak caller\n./conda install -c bioconda macs2\nln -s anaconda2/bin/macs2 macs2\n\n\n## Install pigz\nwget http://zlib.net/pigz/pigz-2.4.tar.gz\ntar -xzvf pigz-2.4.tar.gz\ncd pigz-2.4\nmake\ncp pigz unpigz ../\ncd ../\nrm -r pigz-2.4\n\n\n## Install java/1.8\nwget -c --header \"Cookie: oraclelicense=accept-securebackup-cookie\" \\\nhttp://download.oracle.com/otn-pub/java/jdk/\\\n8u131-b11/d54c1d3a095b4ff2b6607d096fa80163/jdk-8u131-linux-x64.tar.gz\n#\ntar -xzvf jdk-8u131-linux-x64.tar.gz\ncp -r jdk1.8.0_131/jre/ .\nyes | rm -r jdk1.8.0_131\nln -s jre/bin/java java\n\n\n## Install perl/5.26.0\nwget http://www.cpan.org/src/5.0/perl-5.26.0.tar.gz\ntar -xzvf perl-5.26.0.tar.gz\ncd perl-5.26.0\n./Configure -des -Dprefix=${install_dir}\nmake\nmake test\nmake install\ncd ..\nyes | rm -r perl-5.26.0\n\n\n## Install bedtools/2.26.0\nwget https://github.com/arq5x/bedtools2/releases/download/v2.26.0/\\\nbedtools-2.26.0.tar.gz\n#\ntar -xzvf bedtools-2.26.0.tar.gz\ncd bedtools2\nmake\ncd bin\ncp * ../../\ncd ../../\nrm -r bedtools2\n\n\n## Install samtools/1.5\nwget https://sourceforge.net/projects/samtools/files/samtools/1.5/\\\nsamtools-1.5.tar.bz2\n#\ntar -xvjf samtools-1.5.tar.bz2\ncd samtools-1.5\n./configure --disable-lzma\nmake\ncp samtools ../\ncd ../\nrm -r samtools-1.5\n\n\n## Install R/3.2.1\nwget http://lib.stat.cmu.edu/R/CRAN/src/base/R-3/R-3.2.1.tar.gz\ntar -xzvf R-3.2.1.tar.gz\ncd R-3.2.1\n./configure --prefix=${install_dir} --with-x=no\nmake\ncd ../\nln -s R-3.2.1/bin/R R\n\n"
}