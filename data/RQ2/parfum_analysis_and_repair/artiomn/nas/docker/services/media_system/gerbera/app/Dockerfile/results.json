{
  "startTime": 1674245984760,
  "endTime": 1674245985682,
  "originalSmells": [
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 13,
        "lineEnd": 13,
        "columnStart": 4,
        "columnEnd": 49
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 22,
        "lineEnd": 31,
        "columnStart": 4,
        "columnEnd": 6
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 36,
        "lineEnd": 54,
        "columnStart": 4,
        "columnEnd": 14
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 13,
        "lineEnd": 13,
        "columnStart": 4,
        "columnEnd": 49
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 22,
        "lineEnd": 31,
        "columnStart": 4,
        "columnEnd": 6
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 36,
        "lineEnd": 54,
        "columnStart": 4,
        "columnEnd": 14
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 13,
        "lineEnd": 13,
        "columnStart": 4,
        "columnEnd": 49
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 22,
        "lineEnd": 31,
        "columnStart": 4,
        "columnEnd": 6
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 36,
        "lineEnd": 54,
        "columnStart": 4,
        "columnEnd": 14
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 13,
        "lineEnd": 13,
        "columnStart": 4,
        "columnEnd": 73
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 22,
        "lineEnd": 31,
        "columnStart": 4,
        "columnEnd": 6
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 36,
        "lineEnd": 54,
        "columnStart": 4,
        "columnEnd": 14
      }
    }
  ],
  "repairedDockerfile": "# Dockerfile for Gerbera Ubuntu Development\n# Created by: Eamonn Buss\n# Created on: 09/23/2017\n\n##--------------------------------------\n## Start with ubuntu image as the base\n##--------------------------------------\nFROM ubuntu:latest\n\n##--------------------------------------\n## Enable Ubuntu Repositories\n##--------------------------------------\nRUN apt-get update\nRUN apt-get install --no-install-recommends -y software-properties-common && rm -rf /var/lib/apt/lists/*;\nRUN add-apt-repository main\nRUN add-apt-repository universe\nRUN add-apt-repository restricted\nRUN add-apt-repository multiverse\n\n##--------------------------------------\n## Install Ubuntu Development essentials\n##--------------------------------------\nRUN apt-get install --no-install-recommends -y autoconf \\\n  automake \\\n  build-essential \\\n  cmake \\\n  git \\\n  libboost-all-dev \\\n  libtool \\\n  pkg-config \\\n  sudo \\\n  wget && rm -rf /var/lib/apt/lists/*;\n\n##--------------------------------------\n## Install Gerbera Build Prerequisites\n##--------------------------------------\nRUN apt-get install --no-install-recommends -y \\\n  uuid-dev \\\n  libexpat1-dev \\\n  libsqlite3-dev \\\n  libmysqlclient-dev \\\n  libmagic-dev \\\n  libexif-dev \\\n  libcurl4-openssl-dev \\\n  libavutil-dev \\\n  libavcodec-dev \\\n  libavformat-dev \\\n  libavdevice-dev \\\n  libavfilter-dev \\\n  libavresample-dev \\\n  libswscale-dev \\\n  libswresample-dev \\\n  libpostproc-dev \\\n  systemd \\\n  vorbis-tools && rm -rf /var/lib/apt/lists/*;\n\nENV SHELL /bin/bash\n\n##--------------------------------------\n## Clone Gerbera GIT Repository\n##--------------------------------------\nRUN mkdir /gerbera\nWORKDIR /gerbera\nRUN git clone https://github.com/elmodaddyb/gerbera.git\n\nRUN mkdir build\nWORKDIR /gerbera/build\n\n##--------------------------------------\n## Install libupnp library\n##--------------------------------------\nRUN sh ../gerbera/scripts/install-pupnp18.sh\n\n##--------------------------------------\n## Install taglib library\n##--------------------------------------\nRUN sh ../gerbera/scripts/install-taglib111.sh\n\n##--------------------------------------\n## Install Duktape and make library available\n##--------------------------------------\nRUN sh ../gerbera/scripts/install-duktape.sh\nRUN echo /usr/local/lib > /etc/ld.so.conf.d/gerbera-x86_64.conf\nRUN ldconfig\n\n##--------------------------------------\n## Build & Install Gerbera\n##--------------------------------------\nRUN cmake ../gerbera -DWITH_MAGIC=1 -DWITH_MYSQL=0 -DWITH_CURL=1 -DWITH_JS=1 -DWITH_TAGLIB=1 -DWITH_AVCODEC=1 -DWITH_EXIF=1 -DWITH_LASTFM=0\nRUN make\nRUN make install\n\n##--------------------------------------\n## Setup the Gerbera user\n##--------------------------------------\nRUN useradd --system gerbera\nRUN mkdir /home/gerbera\nRUN mkdir /home/gerbera/.config\nRUN mkdir /home/gerbera/.config/gerbera\n\nRUN chown gerbera:gerbera -Rv /usr/local/share/gerbera\nRUN chown gerbera:gerbera -Rv /home/gerbera\nUSER gerbera\n\n##--------------------------------------\n## Setup Gerbera config.xml\n##--------------------------------------\nRUN gerbera --create-config > /home/gerbera/.config/gerbera/config.xml\n\nENTRYPOINT [\"/usr/local/bin/gerbera\", \"--debug\"]\nEXPOSE 49152/tcp 1900/udp\n"
}