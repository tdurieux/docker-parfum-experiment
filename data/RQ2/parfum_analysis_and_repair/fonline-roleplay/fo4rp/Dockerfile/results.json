{
  "startTime": 1674254407538,
  "endTime": 1674254409062,
  "originalSmells": [
    {
      "rule": "wgetUseHttpsUrl",
      "position": {
        "lineStart": 26,
        "lineEnd": 26,
        "columnStart": 4,
        "columnEnd": 79
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 12,
        "lineEnd": 12,
        "columnStart": 4,
        "columnEnd": 26
      }
    },
    {
      "rule": "gpgUseBatchFlag",
      "position": {
        "lineStart": 22,
        "lineEnd": 22,
        "columnStart": 4,
        "columnEnd": 69
      }
    },
    {
      "rule": "aptGetInstallUseY",
      "position": {
        "lineStart": 18,
        "lineEnd": 18,
        "columnStart": 4,
        "columnEnd": 25
      }
    },
    {
      "rule": "aptGetInstallUseY",
      "position": {
        "lineStart": 33,
        "lineEnd": 33,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 10,
        "lineEnd": 10,
        "columnStart": 4,
        "columnEnd": 95
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 16,
        "lineEnd": 16,
        "columnStart": 4,
        "columnEnd": 54
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 18,
        "lineEnd": 18,
        "columnStart": 4,
        "columnEnd": 25
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 19,
        "lineEnd": 19,
        "columnStart": 4,
        "columnEnd": 49
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 25,
        "lineEnd": 25,
        "columnStart": 4,
        "columnEnd": 64
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 33,
        "lineEnd": 33,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 42,
        "lineEnd": 42,
        "columnStart": 4,
        "columnEnd": 26
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 18,
        "lineEnd": 18,
        "columnStart": 4,
        "columnEnd": 25
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 19,
        "lineEnd": 19,
        "columnStart": 4,
        "columnEnd": 49
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 25,
        "lineEnd": 25,
        "columnStart": 4,
        "columnEnd": 64
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 33,
        "lineEnd": 33,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 42,
        "lineEnd": 42,
        "columnStart": 4,
        "columnEnd": 26
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 10,
        "lineEnd": 10,
        "columnStart": 4,
        "columnEnd": 95
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 16,
        "lineEnd": 16,
        "columnStart": 4,
        "columnEnd": 54
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 18,
        "lineEnd": 18,
        "columnStart": 4,
        "columnEnd": 25
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 19,
        "lineEnd": 19,
        "columnStart": 4,
        "columnEnd": 49
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 25,
        "lineEnd": 25,
        "columnStart": 4,
        "columnEnd": 64
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 33,
        "lineEnd": 33,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 42,
        "lineEnd": 42,
        "columnStart": 4,
        "columnEnd": 26
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 18,
        "lineEnd": 18,
        "columnStart": 4,
        "columnEnd": 52
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 19,
        "lineEnd": 19,
        "columnStart": 4,
        "columnEnd": 73
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 25,
        "lineEnd": 25,
        "columnStart": 4,
        "columnEnd": 88
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 33,
        "lineEnd": 33,
        "columnStart": 4,
        "columnEnd": 54
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 42,
        "lineEnd": 42,
        "columnStart": 4,
        "columnEnd": 50
      }
    }
  ],
  "repairedDockerfile": "# {Linux Wine XPRA} based dockerfile (test version)\n#\n# 1. Copy tnfFOnlineServer.cfg to FOnlineServer.cfg and configure it.\n# 2. Copy default.web_server_config.toml to web_server_config.toml and configure it.\n#\n# TODO:\n# - Replace base image with alpine instead of ubuntu.\nFROM ubuntu\nVOLUME /tmp/.X11-unix\nRUN apt update \\\n && DEBIAN_FRONTEND=noninteractive apt --no-install-recommends install -y wget gnupg xvfb x11-xserver-utils python3-pip \\\n #&& pulseaudio lxterminal \\\r\n && pip3 install --no-cache-dir pyinotify \\\n && echo \"deb [arch=amd64] https://xpra.org/ focal main\" > /etc/apt/sources.list.d/xpra.list \\\n && wget -q https://xpra.org/gpg.asc -O- | apt-key add - \\\n && apt update \\\n && DEBIAN_FRONTEND=noninteractive apt --no-install-recommends install -y xpra \\\n && mkdir -p /run/user/0/xpra && rm -rf /var/lib/apt/lists/*;\nRUN apt-get install -y --no-install-recommends xterm && rm -rf /var/lib/apt/lists/*;\nRUN apt-get install --no-install-recommends software-properties-common -y && rm -rf /var/lib/apt/lists/*;\nRUN dpkg --add-architecture i386\nRUN wget -nc https://dl.winehq.org/wine-builds/winehq.key\nRUN gpg --batch -o /etc/apt/trusted.gpg.d/winehq.key.gpg --dearmor winehq.key\nRUN add-apt-repository 'deb https://dl.winehq.org/wine-builds/ubuntu/ focal main'\nRUN apt update\nRUN apt install --no-install-recommends --install-recommends winehq-stable winetricks -y && rm -rf /var/lib/apt/lists/*;\nRUN wget -P /mono https://dl.winehq.org/wine/wine-mono/4.9.4/wine-mono-4.9.4.msi\n\nRUN echo \"...\"\nRUN wineboot -u && msiexec /i /mono/wine-mono-4.9.4.msi\nRUN rm -rf /mono/wine-mono-4.9.4.msi\nRUN rm /winehq.key\n\nRUN apt-get install -y --no-install-recommends locales && rm -rf /var/lib/apt/lists/*;\nRUN locale-gen ru_RU.CP1251\nENV LANG ru_RU.CP1251\nENV LANGUAGE ru_RU.ru\nENV LC_ALL ru_RU.CP1251\n#RUN adduser app\n#RUN usermod -aG sudo app\n#USER app\n\nRUN apt-get install --no-install-recommends git -y && rm -rf /var/lib/apt/lists/*;\nRUN git clone https://github.com/fonline-roleplay/rust_workspace.git /var/rust_workspace\n\n#RUN echo -n \"yourenvvariablehere\" > /home/password.txt\n\nRUN mkdir /app\n\nENV XDG_RUNTIME_DIR /var/app\nCMD [\"cp\", \"/var/app/web_server_config.toml\", \"/var/rust_workspace/web_server/config.toml\"]\n#ENTRYPOINT [\"xpra\", \"start\", \":80\", \"--bind-tcp=0.0.0.0:4020,auth=file:filename=/home/password.txt\", \"--mdns=no\", \"--html=on\", \"--clipboard=on\", \"--webcam=no\", \"--no-daemon\", \"--start-child=wine /app/FOnlineServer.exe -start\", \"--exit-with-children\"]\nENTRYPOINT [\"xpra\", \"start\", \":80\", \"--bind-tcp=0.0.0.0:4020\", \"--mdns=no\", \"--html=on\", \"--clipboard=on\", \"--webcam=no\", \"--no-daemon\", \"--start-child=wine /var/app/FOnlineServer.exe -start\", \"--start-child=xterm\", \"--exit-with-children\"]"
}