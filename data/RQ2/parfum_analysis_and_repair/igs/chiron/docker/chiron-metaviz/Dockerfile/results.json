{
  "startTime": 1674218460264,
  "endTime": 1674218461697,
  "originalSmells": [
    {
      "rule": "wgetUseHttpsUrl",
      "position": {
        "lineStart": 45,
        "lineEnd": 45,
        "columnStart": 4,
        "columnEnd": 90
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 51,
        "lineEnd": 51,
        "columnStart": 4,
        "columnEnd": 29
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 52,
        "lineEnd": 52,
        "columnStart": 42,
        "columnEnd": 119
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 41,
        "lineEnd": 41,
        "columnStart": 23,
        "columnEnd": 58
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 46,
        "lineEnd": 46,
        "columnStart": 4,
        "columnEnd": 80
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 13,
        "lineEnd": 13,
        "columnStart": 4,
        "columnEnd": 76
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 15,
        "lineEnd": 15,
        "columnStart": 135,
        "columnEnd": 176
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 17,
        "lineEnd": 17,
        "columnStart": 4,
        "columnEnd": 42
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 20,
        "lineEnd": 20,
        "columnStart": 4,
        "columnEnd": 64
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 21,
        "lineEnd": 21,
        "columnStart": 4,
        "columnEnd": 70
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 24,
        "lineEnd": 24,
        "columnStart": 4,
        "columnEnd": 69
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 5,
        "lineEnd": 5,
        "columnStart": 4,
        "columnEnd": 50
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 13,
        "lineEnd": 13,
        "columnStart": 4,
        "columnEnd": 76
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 17,
        "lineEnd": 17,
        "columnStart": 4,
        "columnEnd": 42
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 20,
        "lineEnd": 20,
        "columnStart": 4,
        "columnEnd": 64
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 21,
        "lineEnd": 21,
        "columnStart": 4,
        "columnEnd": 70
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 24,
        "lineEnd": 24,
        "columnStart": 4,
        "columnEnd": 69
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 5,
        "lineEnd": 5,
        "columnStart": 4,
        "columnEnd": 50
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 13,
        "lineEnd": 13,
        "columnStart": 4,
        "columnEnd": 76
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 15,
        "lineEnd": 15,
        "columnStart": 135,
        "columnEnd": 176
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 17,
        "lineEnd": 17,
        "columnStart": 4,
        "columnEnd": 42
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 20,
        "lineEnd": 20,
        "columnStart": 4,
        "columnEnd": 64
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 21,
        "lineEnd": 21,
        "columnStart": 4,
        "columnEnd": 70
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 24,
        "lineEnd": 24,
        "columnStart": 4,
        "columnEnd": 69
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 5,
        "lineEnd": 5,
        "columnStart": 4,
        "columnEnd": 50
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 13,
        "lineEnd": 13,
        "columnStart": 4,
        "columnEnd": 100
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 17,
        "lineEnd": 17,
        "columnStart": 4,
        "columnEnd": 66
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 20,
        "lineEnd": 20,
        "columnStart": 4,
        "columnEnd": 88
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 21,
        "lineEnd": 21,
        "columnStart": 4,
        "columnEnd": 94
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 24,
        "lineEnd": 24,
        "columnStart": 4,
        "columnEnd": 93
      }
    }
  ],
  "repairedDockerfile": "FROM umigs/chiron-core:1.1.0\n\n#############\n## METAVIZ ##\n#############\nRUN apt-get install -y --no-install-recommends php && rm -rf /var/lib/apt/lists/*;\n\n# neo4j instance\n## METAVIZ Instance\nCOPY metaviz_start.sh /bin/metaviz_start.sh\nRUN chmod +x /bin/metaviz_start.sh\nCOPY setup.R setup.R\n\nRUN apt-get install --no-install-recommends -y software-properties-common python-software-properties && rm -rf /var/lib/apt/lists/*;\nRUN add-apt-repository ppa:webupd8team/java\nRUN apt-get update && echo oracle-java7-installer shared/accepted-oracle-license-v1-1 select true | /usr/bin/debconf-set-selections && apt-get -y --no-install-recommends install oracle-java8-installer && rm -rf /var/lib/apt/lists/*;\n\nRUN apt-get install --no-install-recommends -y apt-transport-https && rm -rf /var/lib/apt/lists/*;\nRUN echo \"deb http://cran.revolutionanalytics.com/bin/linux/ubuntu yakkety/\" >> /etc/apt/sources.list\nRUN apt-get update\nRUN apt-get install --no-install-recommends -y r-base r-base-dev --allow-unauthenticated && rm -rf /var/lib/apt/lists/*;\nRUN apt-get install --no-install-recommends -y libcurl4-openssl-dev libxml2-dev libssl-dev git && rm -rf /var/lib/apt/lists/*;\nRUN Rscript setup.R\n\nRUN apt-get install --no-install-recommends -y -q gdebi-core libapparmor1 supervisor wget vim && rm -rf /var/lib/apt/lists/*;\nRUN wget https://download2.rstudio.org/rstudio-server-1.0.143-amd64.deb\n#This is from https://github.com/mgymrek/docker-rstudio-server/blob/master/Dockerfile\nRUN gdebi -n rstudio-server-1.0.143-amd64.deb\nRUN adduser metaviz --disabled-login\nRUN echo \"metaviz:metaviz\" | chpasswd\nRUN usermod -a -G root metaviz\nRUN chmod -R 777 /usr/local/lib/R/\nRUN mkdir -p /var/log/supervisor\nADD supervisord.conf /etc/supervisor/conf.d/supervisord.conf\nRUN git config --global user.name \"metaviz\"\nRUN git config --global user.email \"metaviz@metaviz.org\"\nRUN wget -O ~/workshopData \"https://github.com/jmwagner/Chiron/blob/master/docker/chiron-metaviz/workshopData?raw=true\"\nRUN chown metaviz ~/workshopData && chgrp metaviz ~/workshopData\n\n# neo4j instance\nRUN wget -O neo4j.tar.gz \"https://neo4j.com/artifact.php?name=neo4j-community-3.2.0-unix.tar.gz\"\nRUN mkdir /graph-db && tar -xvzf neo4j.tar.gz -C /graph-db && rm neo4j.tar.gz\nRUN /graph-db/neo4j-community-3.2.0/bin/neo4j-admin set-initial-password \"osdf1\"\nRUN echo \"dbms.connectors.default_listen_address=0.0.0.0\" >> /graph-db/neo4j-community-3.2.0/conf/neo4j.conf\nRUN echo \"dbms.allow_format_migration=true\" >> /graph-db/neo4j-community-3.2.0/conf/neo4j.conf\nRUN wget -O graph.db.tar.gz \"https://metaviz-dev.cbcb.umd.edu/hmp_workshop/graph.db.tar.gz\"\nRUN tar -xvzf graph.db.tar.gz -C /graph-db/neo4j-community-3.2.0/data/databases/ && rm graph.db.tar.gz\nRUN ./graph-db/neo4j-community-3.2.0/bin/neo4j start\n\n# metaviz data provider\nRUN wget -O metaviz-dp.zip \"https://github.com/epiviz/metaviz-data-provider/archive/hmp_workshop.zip\"\nRUN pip install --no-cache-dir --upgrade pip\nRUN unzip -d /graph-api metaviz-dp.zip && pip install --no-cache-dir -r /graph-api/metaviz-data-provider-hmp_workshop/requirements.txt\nRUN touch /graph-api/metaviz-data-provider-hmp_workshop/credential.py && echo \"neo4j_username=\\\"neo4j\\\"\" >> /graph-api/metaviz-data-provider-hmp_workshop/credential.py && echo \"neo4j_password=\\\"osdf1\\\"\" >> /graph-api/metaviz-data-provider-hmp_workshop/credential.py\n\n# metaviz ui\nRUN wget -O metaviz-ui.zip \"https://github.com/epiviz/epiviz/archive/metaviz-4.1.zip\"\nRUN unzip -d /graph-ui metaviz-ui.zip\nRUN echo 'epiviz.Config.SETTINGS.dataServerLocation=\"http://metaviz.cbcb.umd.edu/data/\",epiviz.Config.SETTINGS.dataProviders=[[\"epiviz.data.EpivizApiDataProvider\",\"ihmp_data\",\"http://localhost:5000/api\",[],3,{4:epiviz.ui.charts.tree.NodeSelectionType.NODE}]];' > /graph-ui/epiviz-metaviz-4.1/site-settings.js\nRUN rm metaviz-ui.zip\n\nEXPOSE 8888 5000 8787 7123\n\n#This is from https://github.com/mgymrek/docker-rstudio-server/blob/master/Dockerfile\nCMD [\"/usr/bin/supervisord\"]\n\n"
}