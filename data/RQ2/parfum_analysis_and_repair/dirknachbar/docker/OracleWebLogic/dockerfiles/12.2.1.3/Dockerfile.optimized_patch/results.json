{
  "startTime": 1674216659295,
  "endTime": 1674216661003,
  "originalSmells": [
    {
      "rule": "yumInstallRmVarCacheYum",
      "position": {
        "lineStart": 89,
        "lineEnd": 89,
        "columnStart": 4,
        "columnEnd": 25
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "#Copyright (c) 2014-2018 Oracle and/or its affiliates. All rights reserved.\n#\n#Licensed under the Universal Permissive License v 1.0 as shown at http://oss.oracle.com/licenses/upl.\n#\n# ORACLE DOCKERFILES PROJECT\n# --------------------------\n# This is the Dockerfile for Oracle WebLogic Server 12.2.1.3 Generic Distro\n#\n# REQUIRED FILES TO BUILD THIS IMAGE\n# ----------------------------------\n# (1) fmw_12.2.1.3.0_wls_Disk1_1of1.zip\n#     Download the Generic installer from http://www.oracle.com/technetwork/middleware/weblogic/downloads/wls-for-dev-1703574.html\n#\n# (2) server-jre-8uXX-linux-x64.tar.gz\n#     Download from http://www.oracle.com/technetwork/java/javase/downloads/server-jre8-downloads-2133154.html\n#\n# HOW TO BUILD THIS IMAGE\n# -----------------------\n# Put all downloaded files in the same directory as this Dockerfile\n# Run:\n#      $ docker build -f Dockerfile.generic -t oracle/weblogic:12.2.1.3-generic .\n#\n# IMPORTANT\n# ---------\n# The resulting image of this Dockerfile contains a WLS Empty Domain.\n#\n# ***********  CHANGES ****************\n# -------------------------------------\n# MODIFICATION: - Complete re-design in order to reduce the Image size from 2.9 GB down to 1.4 GB\n#               - Adding flexible Patch Apply Possibility\n# AUTHOR:       Dirk Nachbar, Trivadis AG, Switzerland\n#\n# Pull base image\n# From the Oracle Registry\n# -------------------------\nFROM oracle/serverjre:8 as base\n\n# Maintainer\n# ----------\nLABEL maintainer=\"dirk.nachbar@trivadis.com\"\n\n# Common environment variables required for this build (do NOT change)\n# --------------------------------------------------------------------\nENV ORACLE_HOME=/u01/oracle \\\n    USER_MEM_ARGS=\"-Djava.security.egd=file:/dev/./urandom\" \\\n    SCRIPT_FILE=/u01/oracle/createAndStartEmptyDomain.sh \\\n    PATH=$PATH:${JAVA_HOME}/bin:/u01/oracle/oracle_common/common/bin:/u01/oracle/wlserver/common/bin\n\n# Setup filesystem and oracle user\n# Adjust file permissions, go to /u01 as user 'oracle' to proceed with WLS installation\n# ------------------------------------------------------------\nRUN mkdir -p /u01 && \\\n    chmod a+xr /u01 && \\\n    useradd -b /u01 -d /u01/oracle -m -s /bin/bash oracle\n\n# Copy scripts\n#-------------\nCOPY container-scripts/createAndStartEmptyDomain.sh container-scripts/create-wls-domain.py /u01/oracle/\n\n# Domain and Server environment variables\n# ------------------------------------------------------------\nENV DOMAIN_NAME=\"${DOMAIN_NAME:-base_domain}\" \\\n    ADMIN_LISTEN_PORT=\"${ADMIN_LISTEN_PORT:-7001}\" \\\n    ADMIN_NAME=\"${ADMIN_NAME:-AdminServer}\" \\\n    ADMINISTRATION_PORT_ENABLED=\"${ADMINISTRATION_PORT_ENABLED:-true}\" \\\n    ADMINISTRATION_PORT=\"${ADMINISTRATION_PORT:-9002}\"\n\n# Environment variables required for this build (do NOT change)\n# -------------------------------------------------------------\nENV FMW_PKG=fmw_12.2.1.3.0_wls_Disk1_1of1.zip \\\n    FMW_JAR=fmw_12.2.1.3.0_wls.jar \\\n    PATCH_OPATCH=p28186730_139400_Generic.zip \\\n    PATCH_DIR=patches\n\nENV PATCH_INSTALL_DIR=/u01/$PATCH_DIR\n\nFROM base as builder\n\n# Copy packages\n# -------------\nCOPY $FMW_PKG install.file oraInst.loc /u01/\nCOPY $PATCH_DIR /u01/patches/\nRUN  chown oracle:oracle -R /u01 && \\\n     chmod +xr $SCRIPT_FILE\n\n# Install\n# ------------------------------------------------------------\nUSER root\n# Add psmics as opatch needs fuser util\nRUN yum -y install psmisc && rm -rf /var/cache/yum\n\nUSER oracle\n\nRUN cd /u01 && ${JAVA_HOME}/bin/jar xf /u01/$FMW_PKG && cd - && \\\n    ls /u01 && \\\n    ${JAVA_HOME}/bin/java -jar /u01/$FMW_JAR -silent -responseFile /u01/install.file -invPtrLoc /u01/oraInst.loc -jreLoc $JAVA_HOME -ignoreSysPrereqs -force -novalidation ORACLE_HOME=$ORACLE_HOME INSTALL_TYPE=\"WebLogic Server\" && \\\n    cd $PATCH_INSTALL_DIR && $JAVA_HOME/bin/jar xf $PATCH_INSTALL_DIR/$PATCH_OPATCH && \\\n    java -jar $PATCH_INSTALL_DIR/6880880/opatch_generic.jar -silent oracle_home=/u01/oracle -ignoreSysPrereqs && \\\n    rm -rf $PATCH_INSTALL_DIR/6880880 && \\\n    echo \"opatch updated\" && sleep 5 && \\\n    $PATCH_INSTALL_DIR/applyPatches.sh && \\\n    $ORACLE_HOME/OPatch/opatch util cleanup -silent && \\\n    rm -rf /u01/oracle/cfgtoollogs/opatch/* && \\\n    rm /u01/$FMW_JAR /u01/$FMW_PKG /u01/oraInst.loc /u01/install.file\n\nFROM base\n\nCOPY --chown=oracle:oracle --from=builder $ORACLE_HOME $ORACLE_HOME\nCOPY --chown=oracle:oracle --from=builder $JAVA_HOME $JAVA_HOME\n\nWORKDIR ${ORACLE_HOME}\n\n# Define default command to start script.\nCMD [\"/u01/oracle/createAndStartEmptyDomain.sh\"]\n\n"
}