{
  "startTime": 1674250503517,
  "endTime": 1674250504336,
  "originalSmells": [
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 25,
        "lineEnd": 25,
        "columnStart": 4,
        "columnEnd": 26
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 32,
        "lineEnd": 32,
        "columnStart": 4,
        "columnEnd": 29
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 33,
        "lineEnd": 33,
        "columnStart": 4,
        "columnEnd": 17
      }
    },
    {
      "rule": "gpgUseBatchFlag",
      "position": {
        "lineStart": 14,
        "lineEnd": 14,
        "columnStart": 66,
        "columnEnd": 99
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 13,
        "lineEnd": 13,
        "columnStart": 4,
        "columnEnd": 26
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 20,
        "lineEnd": 20,
        "columnStart": 4,
        "columnEnd": 42
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 22,
        "lineEnd": 22,
        "columnStart": 4,
        "columnEnd": 37
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 29,
        "lineEnd": 29,
        "columnStart": 4,
        "columnEnd": 26
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 13,
        "lineEnd": 13,
        "columnStart": 4,
        "columnEnd": 26
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 20,
        "lineEnd": 20,
        "columnStart": 4,
        "columnEnd": 42
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 22,
        "lineEnd": 22,
        "columnStart": 4,
        "columnEnd": 37
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 29,
        "lineEnd": 29,
        "columnStart": 4,
        "columnEnd": 26
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 13,
        "lineEnd": 13,
        "columnStart": 4,
        "columnEnd": 26
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 20,
        "lineEnd": 20,
        "columnStart": 4,
        "columnEnd": 42
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 22,
        "lineEnd": 22,
        "columnStart": 4,
        "columnEnd": 37
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 29,
        "lineEnd": 29,
        "columnStart": 4,
        "columnEnd": 26
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 13,
        "lineEnd": 13,
        "columnStart": 4,
        "columnEnd": 50
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 20,
        "lineEnd": 20,
        "columnStart": 4,
        "columnEnd": 66
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 22,
        "lineEnd": 22,
        "columnStart": 4,
        "columnEnd": 61
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 29,
        "lineEnd": 29,
        "columnStart": 4,
        "columnEnd": 50
      }
    }
  ],
  "repairedDockerfile": "FROM continuumio/miniconda3:4.7.10\n# install spleeter engine dependencies (tensorflow, ffmpeg, ipython)\nRUN conda install -y tensorflow==1.14.0\nRUN conda  install -y -c conda-forge ffmpeg\nRUN conda install -y -c anaconda pandas==0.25.1\nRUN conda install -y -c conda-forge libsndfile\nRUN conda install -y ipython\n\nRUN mkdir /cache/\nWORKDIR /workspace\n\n# install asp.net core web api dependencies\nRUN apt-get update\nRUN apt-get install --no-install-recommends -y gpg && rm -rf /var/lib/apt/lists/*;\nRUN wget -qO- https://packages.microsoft.com/keys/microsoft.asc | gpg --batch --dearmor > microsoft.asc.gpg\nRUN mv microsoft.asc.gpg /etc/apt/trusted.gpg.d/\nRUN wget -q https://packages.microsoft.com/config/ubuntu/18.04/prod.list\nRUN mv prod.list /etc/apt/sources.list.d/microsoft-prod.list\nRUN chown root:root /etc/apt/trusted.gpg.d/microsoft.asc.gpg\nRUN chown root:root /etc/apt/sources.list.d/microsoft-prod.list\nRUN apt-get install --no-install-recommends -y apt-transport-https && rm -rf /var/lib/apt/lists/*;\nRUN apt-get update\nRUN apt-get install --no-install-recommends -y dotnet-sdk-3.0 && rm -rf /var/lib/apt/lists/*;\n\n# install youtube-dl\nRUN pip install --no-cache-dir youtube_dl\n\n# clone and make deezer/spleeter\nWORKDIR /workspace/deezer\nRUN apt-get install --no-install-recommends -y git && rm -rf /var/lib/apt/lists/*;\nRUN git clone https://github.com/deezer/spleeter\nWORKDIR /workspace/deezer/spleeter/\nRUN pip install --no-cache-dir --upgrade pip\nRUN pip install --no-cache-dir .\n\n# publish and run\nWORKDIR /workspace/\nRUN rm -rf deezer/\nCOPY ./ spleeter/\n\nWORKDIR /workspace/spleeter/\n\nENV DOTNET_CLI_TELEMETRY_OPTOUT 1\nENV ASPNETCORE_URLS http://+:5000\nEXPOSE 5000\nRUN dotnet publish SpleeterAPI.csproj -o publish\n\nENTRYPOINT [\"dotnet\", \"publish/SpleeterAPI.dll\"]"
}