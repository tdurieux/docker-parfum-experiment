{
  "startTime": 1674252916966,
  "endTime": 1674252918210,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 50,
        "lineEnd": 50,
        "columnStart": 4,
        "columnEnd": 77
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 27,
        "lineEnd": 49,
        "columnStart": 22,
        "columnEnd": 32
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 52,
        "lineEnd": 52,
        "columnStart": 22,
        "columnEnd": 76
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "#    Copyright Â© 2021 by The qTox Project Contributors\n#\n#    This program is libre software: you can redistribute it and/or modify\n#    it under the terms of the GNU General Public License as published by\n#    the Free Software Foundation, either version 3 of the License, or\n#    (at your option) any later version.\n#\n#    This program is distributed in the hope that it will be useful,\n#    but WITHOUT ANY WARRANTY; without even the implied warranty of\n#    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n#    GNU General Public License for more details.\n#\n#    You should have received a copy of the GNU General Public License\n#    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nFROM debian:bullseye-slim\n\nSHELL [\"/bin/bash\", \"-o\", \"pipefail\", \"-c\"]\n\nENV DEBIAN_FRONTEND=noninteractive\n\nARG ARCH\nARG WINEARCH\nENV WINEARCH=${WINEARCH}\nARG SCRIPT_ARCH=${WINEARCH}\n\nRUN dpkg --add-architecture i386 && \\\n    apt-get update && apt-get install -y --no-install-recommends \\\n                   autoconf \\\n                   automake \\\n                   build-essential \\\n                   ca-certificates \\\n                   cmake \\\n                   extra-cmake-modules \\\n                   git \\\n                   libarchive-tools \\\n                   libtool \\\n                   nsis \\\n                   pkg-config \\\n                   python3-pefile \\\n                   tclsh \\\n                   texinfo \\\n                   unzip \\\n                   curl \\\n                   gnupg \\\n                   yasm \\\n                   zip \\\n                   g++-mingw-w64-${ARCH//_/-} \\\n                   gcc-mingw-w64-${ARCH//_/-} \\\n                   gdb-mingw-w64 && rm -rf /var/lib/apt/lists/*;\nRUN curl -f -L --connect-timeout 10 https://dl.winehq.org/wine-builds/winehq.key | apt-key add -\nRUN echo \"deb https://dl.winehq.org/wine-builds/debian/ bullseye main\" >> /etc/apt/sources.list.d/wine.list\nRUN apt-get update && apt-get install -y --no-install-recommends wine-stable && rm -rf /var/lib/apt/lists/*;\nRUN apt-get clean && \\\n    rm -rf /var/lib/apt/lists/*\n\nRUN update-alternatives --set ${ARCH}-w64-mingw32-gcc /usr/bin/${ARCH}-w64-mingw32-gcc-posix && \\\n  update-alternatives --set ${ARCH}-w64-mingw32-g++ /usr/bin/${ARCH}-w64-mingw32-g++-posix\n\nCOPY download/common.sh /build/download/common.sh\nCOPY build_utils.sh /build/build_utils.sh\nCOPY download/download_openssl.sh /build/download/download_openssl.sh\nCOPY build_openssl.sh /build/build_openssl.sh\n\nRUN mkdir -p /src/openssl && \\\n  cd /src/openssl && \\\n  /build/build_openssl.sh --arch ${SCRIPT_ARCH} && \\\n  rm -fr /src/openssl\n\nCOPY download/download_qt.sh /build/download/download_qt.sh\nCOPY build_qt_windows.sh /build/build_qt_windows.sh\n\nRUN mkdir -p /src/qt && \\\n  cd /src/qt && \\\n  /build/build_qt_windows.sh --arch ${SCRIPT_ARCH} && \\\n  rm -fr /src/qt\n\nCOPY download/download_sqlcipher.sh /build/download/download_sqlcipher.sh\nCOPY build_sqlcipher.sh /build/build_sqlcipher.sh\n\nRUN mkdir -p /src/sqlcipher && \\\n  cd /src/sqlcipher && \\\n  /build/build_sqlcipher.sh  --arch ${SCRIPT_ARCH} && \\\n  rm -fr /src/sqlcipher\n\nCOPY download/download_ffmpeg.sh /build/download/download_ffmpeg.sh\nCOPY build_ffmpeg.sh /build/build_ffmpeg.sh\nRUN mkdir -p /src/ffmpeg && \\\n  cd /src/ffmpeg && \\\n  /build/build_ffmpeg.sh --arch ${SCRIPT_ARCH} && \\\n  rm -fr /src/ffmpeg\n\nCOPY toolchain/windows-${ARCH}-toolchain.cmake /build/windows-toolchain.cmake\n\nCOPY download/download_openal.sh /build/download/download_openal.sh\nCOPY build_openal.sh /build/build_openal.sh\nCOPY patches/openal-cmake-3-11.patch /build/patches/openal-cmake-3-11.patch\n\nRUN mkdir -p /src/openal && \\\n  cd /src/openal && \\\n  /build/build_openal.sh --arch ${SCRIPT_ARCH} && \\\n  rm -fr /src/openal\n\nCOPY download/download_qrencode.sh /build/download/download_qrencode.sh\nCOPY build_qrencode.sh /build/build_qrencode.sh\nRUN mkdir -p /src/qrencode && \\\n  cd /src/qrencode && \\\n  /build/build_qrencode.sh  --arch ${SCRIPT_ARCH} && \\\n  rm -fr /src/qrencode\n\nCOPY download/download_libexif.sh /build/download/download_libexif.sh\nCOPY build_libexif.sh /build/build_libexif.sh\nRUN mkdir -p /src/exif && \\\n  cd /src/exif && \\\n  /build/build_libexif.sh --arch ${SCRIPT_ARCH} && \\\n  rm -fr /src/exif\n\nCOPY download/download_snore.sh /build/download/download_snore.sh\nCOPY build_snore_windows.sh /build/build_snore_windows.sh\nRUN mkdir -p /src/snore && \\\n  cd /src/snore && \\\n  /build/build_snore_windows.sh && \\\n  rm -fr /src/snore\n\nCOPY download/download_opus.sh /build/download/download_opus.sh\nCOPY build_opus.sh /build/build_opus.sh\nRUN mkdir -p /src/opus && \\\n  cd /src/opus && \\\n  /build/build_opus.sh --arch ${SCRIPT_ARCH} && \\\n  rm -fr /src/opus\n\nCOPY download/download_sodium.sh /build/download/download_sodium.sh\nCOPY build_sodium.sh /build/build_sodium.sh\nRUN mkdir -p /src/sodium && \\\n  cd /src/sodium && \\\n  /build/build_sodium.sh --arch ${SCRIPT_ARCH} && \\\n  rm -fr /src/sodium\n\nCOPY download/download_vpx.sh /build/download/download_vpx.sh\nCOPY build_vpx.sh /build/build_vpx.sh\nCOPY patches/vpx-windows.patch /build/patches/vpx-windows.patch\nRUN mkdir -p /src/vpx && \\\n  cd /src/vpx && \\\n  /build/build_vpx.sh --arch ${SCRIPT_ARCH} && \\\n  rm -fr /src/vpx\n\nCOPY download/download_mingw_ldd.sh /build/download/download_mingw_ldd.sh\nCOPY build_mingw_ldd_windows.sh /build/build_mingw_ldd_windows.sh\nRUN mkdir -p /src/mingw_ldd && \\\n  cd /src/mingw_ldd && \\\n  /build/build_mingw_ldd_windows.sh && \\\n  rm -fr /src/mingw_ldd\n\nCOPY download/download_nsisshellexecasuser.sh /build/download/download_nsisshellexecasuser.sh\nCOPY build_nsisshellexecasuser_windows.sh /build/build_nsisshellexecasuser_windows.sh\nRUN mkdir -p /src/nsisshellexecasuser && \\\n  cd /src/nsisshellexecasuser && \\\n  /build/build_nsisshellexecasuser_windows.sh && \\\n  rm -fr /src/nsisshellexecasuser\n\nCOPY download/download_toxcore.sh /build/download/download_toxcore.sh\nCOPY download/download_toxext.sh /build/download/download_toxext.sh\nCOPY download/download_toxext_messages.sh /build/download/download_toxext_messages.sh\nCOPY build_toxcore.sh /build/build_toxcore.sh\nRUN mkdir -p /src/tox && \\\n  cd /src/tox && \\\n  /build/build_toxcore.sh && \\\n  rm -fr /src/tox\n\nRUN mkdir /export && \\\n  cp /usr/${ARCH}-w64-mingw32/lib/libwinpthread-1.dll /export/ && \\\n  cp /usr/lib/gcc/${ARCH}-w64-mingw32/10-posix/libgcc_s_*-1.dll /export && \\\n  cp /usr/lib/gcc/${ARCH}-w64-mingw32/10-posix/libstdc++-6.dll /export && \\\n  cp /usr/lib/gcc/${ARCH}-w64-mingw32/10-posix/libssp-0.dll /export && \\\n  cp /windows/bin/Qt5Core.dll /export && \\\n  cp /windows/bin/Qt5Gui.dll /export && \\\n  cp /windows/bin/Qt5Network.dll /export && \\\n  cp /windows/bin/Qt5Svg.dll /export && \\\n  cp /windows/bin/Qt5Xml.dll /export && \\\n  cp /windows/bin/Qt5Widgets.dll /export && \\\n  cp /windows/bin/avcodec-*.dll /export && \\\n  cp /windows/bin/avdevice-*.dll /export && \\\n  cp /windows/bin/avformat-*.dll /export && \\\n  cp /windows/bin/avutil-*.dll /export && \\\n  cp /windows/bin/libexif-*.dll /export && \\\n  cp /windows/lib/libqrencode.dll /export && \\\n  cp /windows/bin/libsodium-*.dll /export && \\\n  cp /windows/bin/libsqlcipher-*.dll /export && \\\n  cp /windows/bin/swscale-*.dll /export && \\\n  cp /windows/bin/libcrypto-*.dll /export && \\\n  cp /windows/bin/libtoxcore.dll /export && \\\n  cp /windows/bin/libopus-*.dll /export && \\\n  cp /windows/lib/libvpx.dll /export && \\\n  cp /windows/bin/OpenAL32.dll /export && \\\n  cp /windows/bin/libssl-*.dll /export && \\\n  cp /windows/bin/libsnore-qt5.dll /export && \\\n  mkdir -p /export/libsnore-qt5/ && \\\n  cp /windows/plugins/libsnore-qt5/libsnore_backend_windowstoast.dll /export/libsnore-qt5/ && \\\n  cp /windows/bin/SnoreToast.exe /export && \\\n  cp -r /windows/plugins/iconengines /export && \\\n  cp -r /windows/plugins/imageformats /export && \\\n  cp -r /windows/plugins/platforms /export\n\nRUN mkdir -p /debug_export\n\nCOPY download/download_mingw_debug_scripts.sh /build/download/download_mingw_debug_scripts.sh\nRUN mkdir -p /src/mingw-debug-scripts && \\\n  cd /src/mingw-debug-scripts && \\\n  /build/download/download_mingw_debug_scripts.sh  && \\\n  sed -i \"s|your-app-name.exe|qtox.exe|g\" debug-*.bat && \\\n  cp -a debug-*.bat /debug_export && \\\n  rm -fr /src/mingw-debug-scripts\n\nCOPY download/download_gmp.sh /build/download/download_gmp.sh\nCOPY build_gmp_windows.sh /build/build_gmp_windows.sh\nRUN  mkdir -p /src/gmp && \\\n  cd /src/gmp && \\\n  /build/build_gmp_windows.sh --arch ${SCRIPT_ARCH} && \\\n  rm -fr /src/gmp\n\nCOPY download/download_libexpat.sh /build/download/download_libexpat.sh\nCOPY build_libexpat_windows.sh /build/build_libexpat_windows.sh\nRUN mkdir -p /src/libexpat && \\\n  cd /src/libexpat && \\\n  /build/build_libexpat_windows.sh --arch ${SCRIPT_ARCH} && \\\n  rm -fr /src/libexpat\n\nCOPY download/download_gdb.sh /build/download/download_gdb.sh\nCOPY build_gdb_windows.sh /build/build_gdb_windows.sh\nRUN mkdir -p /src/gdb && \\\n  cd /src/gdb && \\\n  /build/build_gdb_windows.sh --arch ${SCRIPT_ARCH} && \\\n  rm -fr /src/gdb && \\\n  cp /windows/bin/gdb.exe /debug_export/gdb.exe\n\nRUN mkdir -p /qtox\nWORKDIR /qtox\n"
}