{
  "startTime": 1674255366432,
  "endTime": 1674255367329,
  "originalSmells": [
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 15,
        "lineEnd": 15,
        "columnStart": 4,
        "columnEnd": 46
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 44,
        "lineEnd": 44,
        "columnStart": 4,
        "columnEnd": 46
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 45,
        "lineEnd": 45,
        "columnStart": 7,
        "columnEnd": 66
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM python:3.10-alpine as builder\n\nRUN apk add --no-cache --update --virtual .build-deps \\\n        build-base \\\n        linux-headers \\\n        ca-certificates \\\n        python3-dev \\\n    && rm -rf /var/cache/* \\\n    && mkdir /var/cache/apk \\\n    && ln -sf /lib/ld-musl-x86_64.so.1 /usr/bin/ldd \\\n    && ln -s /lib /lib64\n\nWORKDIR /svc\n\nCOPY requirements/test.txt /svc/\nRUN pip install --no-cache-dir pip setuptools wheel --upgrade \\\n    && pip wheel --wheel-dir=/svc/wheels -r test.txt\n\nFROM python:3.10-alpine\n\nENV PYTHONUNBUFFERED=1 \\\n    DEBUG=0 \\\n    SITE_DOMAIN=\"app\" \\\n    SITE_PORT=5000\n\nRUN apk add --no-cache --update \\\n    && rm -rf /var/cache/* \\\n    && mkdir /var/cache/apk \\\n    && ln -sf /lib/ld-musl-x86_64.so.1 /usr/bin/ldd \\\n    && ln -s /lib /lib64 \\\n    && ln -snf /usr/share/zoneinfo/$TZ /etc/localtime \\\n    && echo $TZ > /etc/timezone\n\nWORKDIR /svc\n\nCOPY --from=builder /svc /svc\n\nWORKDIR /app\n\nARG VERSION=1\nRUN echo \"Version: ${VERSION}\"\n\nCOPY .docker/* requirements/test.txt tests/test_apps/*.py tests/test_apps/*.ini /app/\n\nRUN pip install --no-cache-dir pip setuptools wheel --upgrade \\\n    && pip install --no-cache-dir --no-index --find-links=/svc/wheels -r test.txt \\\n    && addgroup -S flask_user \\\n    && adduser \\\n        --disabled-password \\\n        --gecos \"\" \\\n        --ingroup flask_user \\\n        --no-create-home \\\n        -s /bin/false \\\n        flask_user \\\n    && chown flask_user:flask_user -R /app\n\nUSER flask_user\n\nCMD ./wait-for.sh ${SITE_DOMAIN}:${SITE_PORT} -t 600 -- pytest --junitxml=test-results/junit.xml\n"
}