{
  "startTime": 1674255654857,
  "endTime": 1674255656200,
  "originalSmells": [
    {
      "rule": "npmCacheCleanAfterInstall",
      "position": {
        "lineStart": 13,
        "lineEnd": 13,
        "columnStart": 4,
        "columnEnd": 41
      }
    },
    {
      "rule": "apkAddUseNoCache",
      "position": {
        "lineStart": 6,
        "lineEnd": 6,
        "columnStart": 4,
        "columnEnd": 45
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM node:16-alpine as bodhi\nLABEL maintainer=\"hello@acala.network\"\n\nWORKDIR /app\n\n### required to build some native deps\nRUN apk add --no-cache git python3 make gcc g++ musl-dev\n\n### required by some legacy deps\nRUN ln -s /usr/bin/python3 /usr/bin/python && \\\n  ln -s /usr/bin/pip3 /usr/bin/pip\n\n### install rush. should match version in rush.json\nRUN npm install -g @microsoft/rush@5.55.0 && npm cache clean --force;\n\n### install all dependencies first before copying in favor of caching\nCOPY rush.json .\nCOPY common ./common\nCOPY bodhi/package.json bodhi/package.json\nCOPY eth-providers/package.json eth-providers/package.json\nCOPY eth-rpc-adapter/package.json eth-rpc-adapter/package.json\nCOPY eth-transactions/package.json eth-transactions/package.json\n\nCOPY examples/hardhat-tutorials/advanced-escrow/package.json examples/hardhat-tutorials/advanced-escrow/package.json\nCOPY examples/hardhat-tutorials/hello-world/package.json examples/hardhat-tutorials/hello-world/package.json\nCOPY examples/hardhat-tutorials/echo/package.json examples/hardhat-tutorials/echo/package.json\nCOPY examples/hardhat-tutorials/token/package.json examples/hardhat-tutorials/token/package.json\nCOPY examples/hardhat-tutorials/NFT/package.json examples/hardhat-tutorials/NFT/package.json\nCOPY examples/hardhat-tutorials/precompiled-token/package.json examples/hardhat-tutorials/precompiled-token/package.json\nCOPY examples/hardhat-tutorials/DEX/package.json examples/hardhat-tutorials/DEX/package.json\nCOPY examples/hardhat-tutorials/EVM/package.json examples/hardhat-tutorials/EVM/package.json\nCOPY examples/hardhat-tutorials/upgradeable-greeter/package.json examples/hardhat-tutorials/upgradeable-greeter/package.json\n\nCOPY examples/waffle-tutorials/hello-world/package.json examples/waffle-tutorials/hello-world/package.json\nCOPY examples/waffle-tutorials/echo/package.json examples/waffle-tutorials/echo/package.json\nCOPY examples/waffle-tutorials/token/package.json examples/waffle-tutorials/token/package.json\nCOPY examples/waffle-tutorials/NFT/package.json examples/waffle-tutorials/NFT/package.json\nCOPY examples/waffle-tutorials/precompiled-token/package.json examples/waffle-tutorials/precompiled-token/package.json\n\nCOPY examples/truffle-tutorials/advanced-escrow/package.json examples/truffle-tutorials/advanced-escrow/package.json\nCOPY examples/truffle-tutorials/hello-world/package.json examples/truffle-tutorials/hello-world/package.json\nCOPY examples/truffle-tutorials/echo/package.json examples/truffle-tutorials/echo/package.json\nCOPY examples/truffle-tutorials/token/package.json examples/truffle-tutorials/token/package.json\nCOPY examples/truffle-tutorials/NFT/package.json examples/truffle-tutorials/NFT/package.json\nCOPY examples/truffle-tutorials/precompiled-token/package.json examples/truffle-tutorials/precompiled-token/package.json\nCOPY examples/truffle-tutorials/DEX/package.json examples/truffle-tutorials/DEX/package.json\nCOPY examples/truffle-tutorials/EVM/package.json examples/truffle-tutorials/EVM/package.json\n\nCOPY examples/waffle/arbitrager/package.json examples/waffle/arbitrager/package.json\nCOPY examples/waffle/dex/package.json examples/waffle/dex/package.json\nCOPY examples/waffle/e2e/package.json examples/waffle/e2e/package.json\nCOPY examples/waffle/erc20/package.json examples/waffle/erc20/package.json\nCOPY examples/waffle/evm/package.json examples/waffle/evm/package.json\nCOPY examples/waffle/evm-accounts/package.json examples/waffle/evm-accounts/package.json\nCOPY examples/waffle/hello-world/package.json examples/waffle/hello-world/package.json\nCOPY examples/waffle/homa/package.json examples/waffle/homa/package.json\nCOPY examples/waffle/honzon/package.json examples/waffle/honzon/package.json\nCOPY examples/waffle/incentives/package.json examples/waffle/incentives/package.json\nCOPY examples/waffle/oracle/package.json examples/waffle/oracle/package.json\nCOPY examples/waffle/scheduler/package.json examples/waffle/scheduler/package.json\nCOPY examples/waffle/stable-asset/package.json examples/waffle/stable-asset/package.json\nCOPY examples/waffle/uniswap/package.json examples/waffle/uniswap/package.json\n\nRUN rush update\n\n### build base packages\nCOPY bodhi ./bodhi\nCOPY eth-providers ./eth-providers\nCOPY eth-transactions ./eth-transactions\nCOPY eth-rpc-adapter ./eth-rpc-adapter\n\nRUN rush build \\\n  -t @acala-network/eth-providers \\\n  -t @acala-network/bodhi \\\n  -t @acala-network/eth-rpc-adapter\n\n# =============== eth-rpc-adapter =============== #\nFROM node:16-alpine as eth-rpc-adapter\nCOPY --from=bodhi /app /app\n\nWORKDIR /app\nCOPY eth-rpc-adapter ./eth-rpc-adapter\n\nWORKDIR /app/eth-rpc-adapter\n\n# looks like CMD can't read commands from docker-compose.yml, so we use ENTRYPOINT\nENTRYPOINT [\"yarn\", \"start\"]\n"
}