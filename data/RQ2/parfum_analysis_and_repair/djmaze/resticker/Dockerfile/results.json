{
  "startTime": 1674252514271,
  "endTime": 1674252515075,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 66,
        "lineEnd": 66,
        "columnStart": 4,
        "columnEnd": 99
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "#\n# Builder image\n#\nFROM golang:1.15-alpine3.14 AS builder\n\nARG RESTIC_VERSION=0.13.1\nARG RESTIC_SHA256_AMD64=a7a82eca050224c9cd070fea1d4208fe92358c5942321d6e01eff84a77839fb8\nARG RESTIC_SHA256_ARM=a9080fc18d6015126864873dba3307b2b9c8ab5ecf79da3c1ae25cb2988fc9bd\nARG RESTIC_SHA256_ARM64=9062e56b98173ae9b000e2cf867d388577442863c83ac3b6a48e90a776cf75ad\n\nARG RCLONE_VERSION=1.58.0\n# These are the checksums for the zip files\nARG RCLONE_SHA256_AMD64=586553898cc1e9e1f3198d7a0c5d84a34ca4709a35013954a3e648f09e65aa37\nARG RCLONE_SHA256_ARM=f5bb1c3947c4cdf7ed4e4afd4f0a8eeffbc522cde8af5ed15a979b3f58ea2446\nARG RCLONE_SHA256_ARM64=28db376098fd00a050c065ffbbfc5e4d878cea412ce4b3dbc3c45c5c96dfee4f\n\nARG GO_CRON_VERSION=0.0.4\nARG GO_CRON_SHA256=6c8ac52637150e9c7ee88f43e29e158e96470a3aaa3fcf47fd33771a8a76d959\n\nRUN apk add --no-cache curl\n\nRUN case \"$(uname -m)\" in \\\n  x86_64 ) \\\n    echo amd64 >/tmp/ARCH \\\n    ;; \\\n  armv7l) \\\n    echo arm >/tmp/ARCH \\\n    ;; \\\n  aarch64) \\\n    echo arm64 >/tmp/ARCH \\\n    ;; \\\n  esac\n\nRUN case \"$(cat /tmp/ARCH)\" in \\\n  amd64 ) \\\n    echo \"${RESTIC_SHA256_AMD64}\" > RESTIC_SHA256 ; \\\n    echo \"${RCLONE_SHA256_AMD64}\" > RCLONE_SHA256 ; \\\n    ;; \\\n  arm ) \\\n    echo \"${RESTIC_SHA256_ARM}\" > RESTIC_SHA256 ; \\\n    echo \"${RCLONE_SHA256_ARM}\" > RCLONE_SHA256 ; \\\n    ;; \\\n  arm64 ) \\\n    echo \"${RESTIC_SHA256_ARM64}\" > RESTIC_SHA256 ; \\\n    echo \"${RCLONE_SHA256_ARM64}\" > RCLONE_SHA256 ; \\\n    ;; \\\n  *) \\\n    echo \"unknown architecture '$(cat /tmp/ARCH)'\" ; \\\n    exit 1 ; \\\n    ;; \\\n esac\n\nRUN curl -sL --fail -o restic.bz2 https://github.com/restic/restic/releases/download/v${RESTIC_VERSION}/restic_${RESTIC_VERSION}_linux_$(cat /tmp/ARCH).bz2 \\\n && echo \"$(cat RESTIC_SHA256)  restic.bz2\" | sha256sum -c - \\\n && bzip2 -d -v restic.bz2 \\\n && mv restic /usr/local/bin/restic \\\n && chmod +x /usr/local/bin/restic\n\n RUN curl -sL --fail -o rclone.zip https://github.com/rclone/rclone/releases/download/v${RCLONE_VERSION}/rclone-v${RCLONE_VERSION}-linux-$(cat /tmp/ARCH).zip \\\n && echo \"$(cat RCLONE_SHA256)  rclone.zip\" | sha256sum -c - \\\n && unzip rclone.zip \\\n && mv rclone-v${RCLONE_VERSION}-linux-$(cat /tmp/ARCH)/rclone /usr/local/bin/rclone \\\n && chmod +x /usr/local/bin/rclone \\\n && rm -rf rclone-v${RCLONE_VERSION}-linux-$(cat /tmp/ARCH) \\\n && rm rclone.zip\n\nRUN curl -f -sL -o go-cron.tar.gz https://github.com/djmaze/go-cron/archive/v${GO_CRON_VERSION}.tar.gz \\\n && echo \"${GO_CRON_SHA256}  go-cron.tar.gz\" | sha256sum -c - \\\n && tar xzf go-cron.tar.gz \\\n && cd go-cron-${GO_CRON_VERSION} \\\n && go build \\\n && mv go-cron /usr/local/bin/go-cron \\\n && cd .. \\\n && rm go-cron.tar.gz go-cron-${GO_CRON_VERSION} -fR\n\n\n#\n# Final image\n#\nFROM alpine:3.14\n\nRUN apk add --update --no-cache ca-certificates fuse nfs-utils openssh tzdata bash curl docker-cli gzip tini\n\nENV RESTIC_REPOSITORY /mnt/restic\n\nCOPY --from=builder /usr/local/bin/* /usr/local/bin/\nCOPY backup prune check /usr/local/bin/\nCOPY entrypoint /\n\nENTRYPOINT [\"/sbin/tini\", \"--\", \"/entrypoint\"]\n"
}