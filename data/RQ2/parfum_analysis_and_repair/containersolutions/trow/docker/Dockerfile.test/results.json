{
  "startTime": 1674253599717,
  "endTime": 1674253600171,
  "originalSmells": [
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 4,
        "lineEnd": 4,
        "columnStart": 22,
        "columnEnd": 46
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 4,
        "lineEnd": 4,
        "columnStart": 22,
        "columnEnd": 46
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "#Not a big fan of using nightly, but such is our lot currently\nFROM rust:latest as builder\n\nRUN rustup component add rustfmt\nRUN apt-get update && apt-get install --no-install-recommends -y unzip && rm -rf /var/lib/apt/lists/*;\n\nWORKDIR /usr/src/trow\n\n#First get just the deps\nCOPY Cargo.toml .\nCOPY Cargo.lock .\n\nRUN mkdir src/\nRUN echo \"fn main() {}\" > src/main.rs\n\n# trow-server\nCOPY trow-server/Cargo.toml trow-server/\nRUN mkdir -p trow-server/src\nRUN touch trow-server/src/lib.rs\n\n# trow-protobuf\nCOPY trow-protobuf/Cargo.toml trow-protobuf/\nRUN echo \"fn main() {}\" > trow-protobuf/build.rs\nRUN mkdir -p trow-protobuf/src\nRUN touch trow-protobuf/src/lib.rs\n\nRUN cargo test --workspace --no-run\n\n\nCOPY src src\nCOPY trow-server trow-server\nCOPY trow-protobuf trow-protobuf\nCOPY tests tests\n\nRUN mkdir certs\nCOPY quick-install/self-cert/make-certs.sh certs/\nCOPY quick-install/self-cert/in.req certs/\nRUN cd certs && ./make-certs.sh\n\nRUN cargo test --workspace\n"
}