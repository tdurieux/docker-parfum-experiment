{
  "startTime": 1674256038501,
  "endTime": 1674256039331,
  "originalSmells": [
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 16,
        "lineEnd": 16,
        "columnStart": 4,
        "columnEnd": 23
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 21,
        "lineEnd": 25,
        "columnStart": 4,
        "columnEnd": 13
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "ARG SOURCE_IMAGE\n\nFROM ${SOURCE_IMAGE}\n\nENV USER scylla-test\nSHELL [\"/bin/bash\", \"-c\"]\n# Install sudo, collectd and other tools, disable autostart of scylla-server and scylla-housekeeping services,\n# remove the login banner and add a new user.\n#\n# Password for the user is `test' and encrypted using openssl command:\n#    $ echo -n test | openssl passwd -crypt -stdin -salt 00\n#    00hzYw5m.HyAY\n#\n# For more details see man page for useradd(8)\nRUN apt-get update && \\\n    echo 'debconf debconf/frontend select Noninteractive' | debconf-set-selections && \\\n    apt install --no-install-recommends -y sudo && \\\n    adduser --disabled-password --gecos \"\" $USER || true && \\\n    usermod -aG sudo $USER && \\\n    sudo -Hu $USER sh -c \"mkdir -m 700 ~/.ssh\" && \\\n    echo \"$USER  ALL=(ALL)       NOPASSWD: ALL\" >> /etc/sudoers && \\\n    apt install --no-install-recommends -y \\\n        iproute2 \\\n        collectd \\\n        syslog-ng \\\n        rsync && \\\n    rm -rf /var/lib/apt/lists/* && \\\n    echo $'[program:collectd]\\n\\\ncommand=/usr/sbin/collectd\\n\\\nstdout_logfile=/dev/stdout\\n\\\nstdout_logfile_maxbytes=0\\n\\\nstderr_logfile=/dev/stderr\\n\\\nstderr_logfile_maxbytes=0' > /etc/supervisord.conf.d/collectd.conf && \\\n    echo $'[program:scylla-manager]\\n\\\ncommand=/usr/bin/scylla-manager --developer-mode\\n\\\nstdout_logfile=/dev/stdout\\n\\\nstdout_logfile_maxbytes=0\\n\\\nstderr_logfile=/dev/stderr\\n\\\nstderr_logfile_maxbytes=0' > /etc/supervisord.conf.d/scylla-manager.conf && \\\n    echo \"autostart=false\" >> /etc/supervisord.conf.d/scylla-server.conf && \\\n    echo \"autostart=false\" >> /etc/supervisord.conf.d/scylla-housekeeping.conf\n"
}