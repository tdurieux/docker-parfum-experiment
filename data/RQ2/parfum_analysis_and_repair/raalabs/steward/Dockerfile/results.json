{
  "startTime": 1674255831072,
  "endTime": 1674255831752,
  "originalSmells": [
    {
      "rule": "apkAddUseNoCache",
      "position": {
        "lineStart": 14,
        "lineEnd": 14,
        "columnStart": 18,
        "columnEnd": 30
      }
    },
    {
      "rule": "apkAddUseNoCache",
      "position": {
        "lineStart": 14,
        "lineEnd": 14,
        "columnStart": 34,
        "columnEnd": 46
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "# build stage\nFROM golang:1.17.7-alpine AS build-env\nRUN apk --no-cache add build-base git gcc\n\nRUN mkdir -p /build\nCOPY ./ /build/\n\nWORKDIR /build/cmd/steward/\nRUN go version\nRUN go build -o steward\n\n# final stage\nFROM alpine\n\nRUN apk update && apk add --no-cache curl && apk add --no-cache nmap\n\nWORKDIR /app\nCOPY --from=build-env /build/cmd/steward/steward /app/\n\nENV RING_BUFFER_PERSIST_STORE \"1\"\nENV RING_BUFFER_SIZE \"1000\"\nENV CONFIG_FOLDER \"./etc\"\nENV SOCKET_FOLDER \"./tmp\"\nENV TCP_LISTENER \"\"\nENV HTTP_LISTENER \"localhost:8091\"\nENV DATABASE_FOLDER \"./var/lib\"\nENV NODE_NAME \"\"\nENV BROKER_ADDRESS \"127.0.0.1:4222\"\nENV NATS_CONN_OPT_TIMEOUT \"20\"\nENV NATS_CONNECT_RETRY_INTERVAL \"10\"\nENV NATS_RECONNECT_JITTER \"100\"\nENV NATS_RECONNECT_JITTER_TLS \"1\"\nENV REQ_KEYS_REQUEST_UPDATE_INTERVAL \"60\"\nENV REQ_ACL_REQUEST_UPDATE_INTERVAL \"60\"\nENV PROFILING_PORT \"\"\nENV PROM_HOST_AND_PORT \"127.0.0.1:2111\"\nENV DEFAULT_MESSAGE_TIMEOUT 10\nENV DEFAULT_MESSAGE_RETRIES 3\nENV DEFAULT_METHOD_TIMEOUT 10\nENV SUBSCRIBERS_DATA_FOLDER \"./var\"\nENV CENTRAL_NODE_NAME \"central\"\nENV ROOT_CA_PATH \"\"\nENV NKEY_SEED_FILE \"\"\nENV EXPOSE_DATA_FOLDER \"127.0.0.1:8090\"\nENV ERROR_MESSAGE_RETRIES 3\nENV ERROR_MESSAGE_TIMEOUT 10\nENV COMPRESSION \"\"\nENV SERIALIZATION \"\"\nENV SET_BLOCK_PROFILE_RATE \"0\"\nENV ENABLE_SOCKET \"1\"\nENV ENABLE_TUI \"0\"\nENV ENABLE_SIGNATURE_CHECK \"0\"\nENV ENABLE_ACL_CHECK \"0\"\nENV IS_CENTRAL_AUTH \"0\"\nENV ENABLE_DEBUG \"0\"\nENV KEEP_PUBLISHERS_ALIVE_FOR \"10\"\n\nENV START_PUB_REQ_HELLO 60\n\nENV ENABLE_KEY_UPDATES \"1\"\nENV ENABLE_ACL_UPDATES \"1\"\nENV IS_CENTRAL_ERROR_LOGGER \"\"\nENV START_SUB_REQ_HELLO \"\"\nENV START_SUB_REQ_TO_FILE_APPEND \"\"\nENV START_SUB_REQ_TO_FILE \"\"\nENV START_SUB_REQ_TO_FILE_NACK \"\"\nENV START_SUB_REQ_COPY_SRC \"\"\nENV START_SUB_REQ_COPY_DST \"\"\nENV START_SUB_REQ_PING \"\"\nENV START_SUB_REQ_PONG \"\"\nENV START_SUB_REQ_CLI_COMMAND \"\"\nENV START_SUB_REQ_TO_CONSOLE \"\"\nENV START_SUB_REQ_HTTP_GET \"\"\nENV START_SUB_REQ_HTTP_GET_SCHEDULED \"\"\nENV START_SUB_REQ_TAIL_FILE \"\"\nENV START_SUB_REQ_CLI_COMMAND_CONT \"\"\n\nCMD [\"ash\",\"-c\",\"env CONFIGFOLDER=./etc/ /app/steward\\\n    -ringBufferPersistStore=${RING_BUFFER_PERSIST_STORE}\\\n    -ringBufferSize=${RING_BUFFER_SIZE}\\\n    -socketFolder=${SOCKET_FOLDER}\\\n    -tcpListener=${TCP_LISTENER}\\\n    -httpListener=${HTTP_LISTENER}\\\n    -databaseFolder=${DATABASE_FOLDER}\\\n    -nodeName=${NODE_NAME}\\\n    -brokerAddress=${BROKER_ADDRESS}\\\n    -natsConnOptTimeout=${NATS_CONN_OPT_TIMEOUT}\\\n    -natsConnectRetryInterval=${NATS_CONNECT_RETRY_INTERVAL}\\\n    -natsReconnectJitter=${NATS_RECONNECT_JITTER}\\\n    -natsReconnectJitterTLS=${NATS_RECONNECT_JITTER_TLS}\\\n    -REQKeysRequestUpdateInterval=${REQ_KEYS_REQUEST_UPDATE_INTERVAL}\\\n    -REQAclRequestUpdateInterval=${REQ_ACL_REQUEST_UPDATE_INTERVAL}\\\n    -profilingPort=${PROFILING_PORT}\\\n    -promHostAndPort=${PROM_HOST_AND_PORT}\\\n    -defaultMessageTimeout=${DEFAULT_MESSAGE_TIMEOUT}\\\n    -defaultMessageRetries=${DEFAULT_MESSAGE_RETRIES}\\\n    -defaultMethodTimeout=${DEFAULT_METHOD_TIMEOUT}\\\n    -subscribersDataFolder=${SUBSCRIBERS_DATA_FOLDER}\\\n    -centralNodeName=${CENTRAL_NODE_NAME}\\\n    -rootCAPath=${ROOT_CA_PATH}\\\n    -nkeySeedFile=${NKEY_SEED_FILE}\\\n    -exposeDataFolder=${EXPOSE_DATA_FOLDER}\\\n    -errorMessageRetries=${ERROR_MESSAGE_RETRIES}\\\n    -errorMessageTimeout=${ERROR_MESSAGE_TIMEOUT}\\\n    -compression=${COMPRESSION}\\\n    -serialization=${SERIALIZATION}\\\n    -setBlockProfileRate=${SET_BLOCK_PROFILE_RATE}\\\n    -enableSocket=${ENABLE_SOCKET}\\\n    -enableTUI=${ENABLE_TUI}\\\n    -enableSignatureCheck=${ENABLE_SIGNATURE_CHECK}\\\n    -enableAclCheck=${ENABLE_ACL_CHECK}\\\n    -isCentralAuth=${IS_CENTRAL_AUTH}\\\n    -enableDebug=${ENABLE_DEBUG}\\\n    -keepPublishersAliveFor=${KEEP_PUBLISHERS_ALIVE_FOR}\\\n    -startPubREQHello=${START_PUB_REQ_HELLO}\\\n    -EnableKeyUpdates=${ENABLE_KEY_UPDATES}\\\n    -EnableAclUpdates=${ENABLE_ACL_UPDATES}\\\n    -isCentralErrorLogger=${IS_CENTRAL_ERROR_LOGGER}\\\n    -startSubREQHello=${START_SUB_REQ_HELLO}\\\n    -startSubREQToFileAppend=${START_SUB_REQ_TO_FILE_APPEND}\\\n    -startSubREQToFile=${START_SUB_REQ_TO_FILE}\\\n    -startSubREQCopySrc=${START_SUB_REQ_COPY_SRC}\\\n    -startSubREQCopyDst=${START_SUB_REQ_COPY_DST}\\\n    -startSubREQToFileNACK=${START_SUB_REQ_TO_FILE_NACK}\\\n    -startSubREQPing=${START_SUB_REQ_PING}\\\n    -startSubREQPong=${START_SUB_REQ_PONG}\\\n    -startSubREQCliCommand=${START_SUB_REQ_CLI_COMMAND}\\\n    -startSubREQToConsole=${START_SUB_REQ_TO_CONSOLE}\\\n    -startSubREQHttpGet=${START_SUB_REQ_HTTP_GET}\\\n    -startSubREQHttpGetScheduled=${START_SUB_REQ_HTTP_GET_SCHEDULED}\\\n    -startSubREQTailFile=${START_SUB_REQ_TAIL_FILE}\\\n    -startSubREQCliCommandCont=${START_SUB_REQ_CLI_COMMAND_CONT}\\\n    \"]\n"
}