{
  "startTime": 1674255288947,
  "endTime": 1674255289799,
  "originalSmells": [
    {
      "rule": "sha256sumEchoOneSpaces",
      "position": {
        "lineStart": 52,
        "lineEnd": 52,
        "columnStart": 7,
        "columnEnd": 71
      }
    },
    {
      "rule": "sha256sumEchoOneSpaces",
      "position": {
        "lineStart": 53,
        "lineEnd": 53,
        "columnStart": 7,
        "columnEnd": 89
      }
    },
    {
      "rule": "sha256sumEchoOneSpaces",
      "position": {
        "lineStart": 54,
        "lineEnd": 54,
        "columnStart": 7,
        "columnEnd": 81
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "# (C) Copyright IBM Corporation 2020.\n#\n# Licensed under the Apache License, Version 2.0 (the \"License\");\n# you may not use this file except in compliance with the License.\n# You may obtain a copy of the License at\n#\n#      http://www.apache.org/licenses/LICENSE-2.0\n#\n# Unless required by applicable law or agreed to in writing, software\n# distributed under the License is distributed on an \"AS IS\" BASIS,\n# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n# See the License for the specific language governing permissions and\n# limitations under the License.\n\nFROM ibm-semeru-runtimes:open-11-jre-focal\n\nARG VERBOSE=false\nARG OPENJ9_SCC=true\nARG EN_SHA=6d76dc1906ca448927abb8238487de96089a1b1591286c7339cba94976261abf\nARG NON_IBM_SHA=412ee94517773939d86d1ac9aa013c8bdff481de4d8ef58c84c997b4d612fef1\nARG NOTICES_SHA=ca3ea01852554c9f84c907754677a18b6d9e39707469f7af93808fd1c1d42a09\n\nLABEL org.opencontainers.image.authors=\"Arthur De Magalhaes, Chris Potter, Christy Jesuraj\" \\\n      org.opencontainers.image.vendor=\"IBM\" \\\n      org.opencontainers.image.url=\"http://wasdev.net\" \\\n      org.opencontainers.image.documentation=\"https://www.ibm.com/support/knowledgecenter/SSAW57_liberty/com.ibm.websphere.wlp.nd.multiplatform.doc/ae/cwlp_about.html\" \\\n      org.opencontainers.image.version=\"22.0.0.6\" \\\n      org.opencontainers.image.revision=\"cl220620220523-1607\" \\\n      org.opencontainers.image.description=\"This image contains the WebSphere Liberty runtime with IBM Semeru Runtime Open Edition OpenJDK with OpenJ9 and Ubuntu as the base OS.  For more information on this image please see https://github.com/WASdev/ci.docker#building-an-application-image\" \\\n      org.opencontainers.image.title=\"IBM WebSphere Liberty\"\n\n# Install WebSphere Liberty\nENV LIBERTY_VERSION 22.0.0_06\n\nARG LIBERTY_URL\nARG DOWNLOAD_OPTIONS=\"\"\n\nRUN apt-get update \\\n    && apt-get install -y --no-install-recommends unzip wget openssl \\\n    && rm -rf /var/lib/apt/lists/* \\\n    && mkdir -p /licenses/ \\\n    && useradd -u 1001 -r -g 0 -s /usr/sbin/nologin default \\\n    && LIBERTY_URL=${LIBERTY_URL:-$(wget -q -O - https://public.dhe.ibm.com/ibmdl/export/pub/software/websphere/wasdev/downloads/wlp/index.yml  | grep $LIBERTY_VERSION -A 6 | sed -n 's/\\s*kernel:\\s//p' | tr -d '\\r' )}  \\\n    && wget $DOWNLOAD_OPTIONS $LIBERTY_URL -U UA-IBM-WebSphere-Liberty-Docker -O /tmp/wlp.zip \\\n    && unzip -q /tmp/wlp.zip -d /opt/ibm \\\n    && rm /tmp/wlp.zip \\\n    && chown -R 1001:0 /opt/ibm/wlp \\\n    && chmod -R g+rw /opt/ibm/wlp \\\n    && LICENSE_BASE=$(wget -q -O - https://public.dhe.ibm.com/ibmdl/export/pub/software/websphere/wasdev/downloads/wlp/index.yml  | grep $LIBERTY_VERSION -A 6 | sed -n 's/\\s*license:\\s//p' | sed 's/\\(.*\\)\\/.*/\\1\\//' | tr -d '\\r') \\\n    && wget ${LICENSE_BASE}en.html -U UA-IBM-WebSphere-Liberty-Docker -O /licenses/en.html \\\n    && wget ${LICENSE_BASE}non_ibm_license.html -U UA-IBM-WebSphere-Liberty-Docker -O /licenses/non_ibm_license.html \\\n    && wget ${LICENSE_BASE}notices.html -U UA-IBM-WebSphere-Liberty-Docker -O /licenses/notices.html \\\n    && echo \"$EN_SHA  /licenses/en.html\" | sha256sum -c --strict --check \\\n    && echo \"$NON_IBM_SHA  /licenses/non_ibm_license.html\" | sha256sum -c --strict --check \\\n    && echo \"$NOTICES_SHA  /licenses/notices.html\" | sha256sum -c --strict --check \\\n    && apt-get purge --auto-remove -y unzip \\\n    && apt-get purge --auto-remove -y wget \\\n    && rm -rf /var/lib/apt/lists/*\n\nENV PATH=/opt/ibm/wlp/bin:/opt/ibm/helpers/build:$PATH\n\n# Add labels for consumption by IBM Product Insights\nLABEL \"ProductID\"=\"fbf6a96d49214c0abc6a3bc5da6e48cd\" \\\n      \"ProductName\"=\"WebSphere Application Server Liberty\" \\\n      \"ProductVersion\"=\"22.0.0.6\" \\\n      \"BuildLabel\"=\"cl220620220523-1607\"\n\n# Set Path Shortcuts\nENV LOG_DIR=/logs \\\n    WLP_OUTPUT_DIR=/opt/ibm/wlp/output \\\n    OPENJ9_SCC=$OPENJ9_SCC\n\n# Configure WebSphere Liberty\nRUN /opt/ibm/wlp/bin/server create \\\n    && rm -rf $WLP_OUTPUT_DIR/.classCache /output/workarea\n\nCOPY helpers/ /opt/ibm/helpers/\nCOPY fixes/ /opt/ibm/fixes/\n\n# Create symlinks && set permissions for non-root user\nRUN mkdir /logs \\\n    && mkdir /etc/wlp \\\n    && mkdir -p /opt/ibm/wlp/usr/shared/resources/lib.index.cache \\\n    && mkdir -p /home/default \\\n    && mkdir /output \\\n    && chmod -t /output \\\n    && rm -rf /output \\\n    && ln -s $WLP_OUTPUT_DIR/defaultServer /output \\\n    && ln -s /opt/ibm/wlp/usr/servers/defaultServer /config \\\n    && ln -s /opt/ibm /liberty \\\n    && ln -s /opt/ibm/wlp/usr/shared/resources/lib.index.cache /lib.index.cache \\\n    && mkdir -p /config/configDropins/defaults \\\n    && mkdir -p /config/configDropins/overrides \\\n    && chown -R 1001:0 /config \\\n    && chmod -R g+rw /config \\\n    && chown -R 1001:0 /opt/ibm/helpers \\\n    && chmod -R g+rwx /opt/ibm/helpers \\\n    && chown -R 1001:0 /opt/ibm/fixes \\\n    && chmod -R g+rwx /opt/ibm/fixes \\\n    && chown -R 1001:0 /opt/ibm/wlp/usr \\\n    && chmod -R g+rw /opt/ibm/wlp/usr \\\n    && chown -R 1001:0 /opt/ibm/wlp/output \\\n    && chmod -R g+rw /opt/ibm/wlp/output \\\n    && chown -R 1001:0 /logs \\\n    && chmod -R g+rw /logs \\\n    && chown -R 1001:0 /etc/wlp \\\n    && chmod -R g+rw /etc/wlp \\\n    && chown -R 1001:0 /home/default \\\n    && chmod -R g+rw /home/default\n\n# Create a new SCC layer\nRUN if [ \"$OPENJ9_SCC\" = \"true\" ]; then populate_scc.sh; fi \\\n    && rm -rf /output/messaging /output/resources/security /logs/* $WLP_OUTPUT_DIR/.classCache \\\n    && chown -R 1001:0 /opt/ibm/wlp/output \\\n    && chmod -R g+rwx /opt/ibm/wlp/output\n\n#These settings are needed so that we can run as a different user than 1001 after server warmup\nENV RANDFILE=/tmp/.rnd \\\n    OPENJ9_JAVA_OPTIONS=\"-XX:+IgnoreUnrecognizedVMOptions -XX:+IdleTuningGcOnIdle -Xshareclasses:name=openj9_system_scc,cacheDir=/opt/java/.scc,readonly,nonFatal -Dosgi.checkConfiguration=false\"\n\nUSER 1001\n\nEXPOSE 9080 9443\n\nENTRYPOINT [\"/opt/ibm/helpers/runtime/docker-server.sh\"]\nCMD [\"/opt/ibm/wlp/bin/server\", \"run\", \"defaultServer\"]\n"
}