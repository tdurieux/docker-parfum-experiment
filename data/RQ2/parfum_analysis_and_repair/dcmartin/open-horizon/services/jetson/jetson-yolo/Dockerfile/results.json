{
  "startTime": 1674248053407,
  "endTime": 1674248053945,
  "originalSmells": [
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 13,
        "lineEnd": 17,
        "columnStart": 22,
        "columnEnd": 5
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "ARG BUILD_FROM\n\nFROM $BUILD_FROM as darknet\n\nARG BUILD_ARCH=arm64\n\n# Environment variables\nENV \\\n    HOME=\"/root\" \\\n    LANG=\"C.UTF-8\" \\\n    PS1=\"$(whoami)@$(hostname):$(pwd)$ \" \\\n    TERM=\"xterm\"\n\nRUN apt-get update && apt-get install -q -y --no-install-recommends \\\n  ca-certificates \\\n  imagemagick \\\n  build-essential \\\n  git && rm -rf /var/lib/apt/lists/*;\n\n###\n### DARKNET\n###\n\n# configure darknet\nARG DARKNET=/darknet\nARG DARKNET_GIT=\"http://github.com/pjreddie/darknet\"\nENV DARKNET=${DARKNET} DARKNET_GIT=${DARKNET_GIT}\n\nENV DARKNET_TINYV2_WEIGHTS=\"${DARKNET}/yolov2-tiny-voc.weights\"\nENV DARKNET_TINYV2_CONFIG=\"${DARKNET}/cfg/yolov2-tiny-voc.cfg\"\nENV DARKNET_TINYV2_DATA=\"${DARKNET}/cfg/voc.data\"\nENV DARKNET_TINYV2_WEIGHTS_URL=\"http://pjreddie.com/media/files/yolov2-tiny-voc.weights\"\nENV DARKNET_TINYV2_WEIGHTS_MD5=\"fca33deaff44dec1750a34df42d2807e\"\n\nENV DARKNET_TINYV3_WEIGHTS=\"${DARKNET}/yolov3-tiny.weights\"\nENV DARKNET_TINYV3_CONFIG=\"${DARKNET}/cfg/yolov3-tiny.cfg\"\nENV DARKNET_TINYV3_DATA=\"${DARKNET}/cfg/codo.data\"\nENV DARKNET_TINYV3_WEIGHTS_URL=\"http://pjreddie.com/media/files/yolov3-tiny.weights\"\nENV DARKNET_TINYV3_WEIGHTS_MD5=\"3bcd6b390912c18924b46b26a9e7ff53\"\n\nENV DARKNET_V2_WEIGHTS=\"${DARKNET}/yolov2.weights\"\nENV DARKNET_V2_CONFIG=\"${DARKNET}/cfg/yolov2.cfg\"\nENV DARKNET_V2_DATA=\"${DARKNET}/cfg/coco.data\"\nENV DARKNET_V2_WEIGHTS_URL=\"https://pjreddie.com/media/files/yolov2.weights\"\nENV DARKNET_V2_WEIGHTS_MD5=\"70d89ba2e180739a1c700a9ff238e354\"\n\nENV DARKNET_V3_WEIGHTS=\"${DARKNET}/yolov3.weights\"\nENV DARKNET_V3_CONFIG=\"${DARKNET}/cfg/yolov3.cfg\"\nENV DARKNET_V3_DATA=\"${DARKNET}/cfg/coco.data\"\nENV DARKNET_V3_WEIGHTS_URL=\"https://pjreddie.com/media/files/yolov3.weights\"\nENV DARKNET_V3_WEIGHTS_MD5=\"c84e5b99d0e52cd466ae710cadf6d84c\"\n\n# Clone darknet\nRUN mkdir -p ${DARKNET}\nRUN cd ${DARKNET} && git clone ${DARKNET_GIT} .\n\n# Build darknet\nRUN \\\n    cd ${DARKNET} \\\n    \\\n    && make GPU=1 CUDNN=1 OPENCV=1 NVCC=/usr/local/cuda/bin/nvcc\n\n# Clean up\nRUN apt-get -y autoremove && apt-get -y autoclean\nRUN rm -rf /var/cache/apt\n\nFROM darknet\n\n# Copy compiled darknet\nCOPY --from=darknet /darknet /darknet\n\nRUN apt-get update && apt-get upgrade -y\nRUN apt-get -y autoremove && apt-get -y autoclean\nRUN rm -rf /var/cache/apt\n\n# Copy usr\nCOPY rootfs/usr /usr\n\nCMD [ \"/usr/bin/run.sh\" ]\n\n# Build arguments\nARG BUILD_DATE\nARG BUILD_REF\nARG BUILD_VERSION\n\n# Labels\nLABEL \\\n    org.label-schema.schema-version=\"1.0\" \\\n    org.label-schema.build-date=\"${BUILD_DATE}\" \\\n    org.label-schema.build-arch=\"${BUILD_ARCH}\" \\\n    org.label-schema.name=\"jetson-yolo\" \\\n    org.label-schema.description=\"yolo/darknet as a service\" \\\n    org.label-schema.vcs-url=\"http://github.com/dcmartin/open-horizon/tree/master/jetson-yolo/\" \\\n    org.label-schema.vcs-ref=\"${BUILD_REF}\" \\\n    org.label-schema.version=\"${BUILD_VERSION}\" \\\n    org.label-schema.vendor=\"David C Martin <github@dcmartin.com>\"\n"
}