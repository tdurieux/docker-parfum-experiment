{
  "startTime": 1674255411584,
  "endTime": 1674255412533,
  "originalSmells": [
    {
      "rule": "configureShouldUseBuildFlag",
      "position": {
        "lineStart": 32,
        "lineEnd": 32,
        "columnStart": 7,
        "columnEnd": 43
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "ARG MAKE_JOBS=\"1\"\nARG DEBIAN_FRONTEND=\"noninteractive\"\n\nFROM python:3.8-slim AS base\nFROM buildpack-deps:buster AS base-builder\n\nFROM base-builder AS mrtrix3-builder\n\n# Git commitish from which to build MRtrix3.\nARG MRTRIX3_GIT_COMMITISH=\"master\"\n# Command-line arguments for `./configure`\nARG MRTRIX3_CONFIGURE_FLAGS=\"\"\n# Command-line arguments for `./build`\nARG MRTRIX3_BUILD_FLAGS=\"-persistent -nopaginate\"\n\nRUN apt-get -qq update \\\n    && apt-get install -yq --no-install-recommends \\\n        libeigen3-dev \\\n        libfftw3-dev \\\n        libgl1-mesa-dev \\\n        libpng-dev \\\n        libqt5opengl5-dev \\\n        libqt5svg5-dev \\\n        libtiff5-dev \\\n        qt5-default \\\n        zlib1g-dev \\\n    && rm -rf /var/lib/apt/lists/*\n\n# Clone, build, and install MRtrix3.\nARG MAKE_JOBS\nWORKDIR /opt/mrtrix3\nRUN git clone -b $MRTRIX3_GIT_COMMITISH --depth 1 https://github.com/MRtrix3/mrtrix3.git . \\\n    && ./configure --build=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\" $MRTRIX3_CONFIGURE_FLAGS \\\n    && NUMBER_OF_PROCESSORS=$MAKE_JOBS ./build $MRTRIX3_BUILD_FLAGS \\\n    && rm -rf tmp\n\n# Download minified ART ACPCdetect (V2.0).\nFROM base-builder as acpcdetect-installer\nWORKDIR /opt/art\nRUN curl -fsSL https://osf.io/73h5s/download \\\n    | tar xz --strip-components 1\n\n# Download minified ANTs (2.3.4).\nFROM base-builder as ants-installer\nWORKDIR /opt/ants\nRUN curl -fsSL https://osf.io/3ad69/download \\\n    | tar xz --strip-components 1\n\n# Download FreeSurfer files.\nFROM base-builder as freesurfer-installer\nWORKDIR /opt/freesurfer\nRUN curl -fsSLO https://raw.githubusercontent.com/freesurfer/freesurfer/v7.1.1/distribution/FreeSurferColorLUT.txt\n\n# Download minified FSL (6.0.4)\nFROM base-builder as fsl-installer\nWORKDIR /opt/fsl\nRUN curl -fsSL https://osf.io/dv258/download \\\n    | tar xz --strip-components 1\n\n# Build final image.\nFROM base AS final\n\n# Install runtime system dependencies.\nRUN apt-get -qq update \\\n    && apt-get install -yq --no-install-recommends \\\n        dc \\\n        less \\\n        libfftw3-3 \\\n        libgl1-mesa-glx \\\n        libgomp1 \\\n        liblapack3 \\\n        libpng16-16 \\\n        libqt5core5a \\\n        libqt5gui5 \\\n        libqt5network5 \\\n        libqt5widgets5 \\\n        libquadmath0 \\\n        libtiff5 \\\n        python3-distutils \\\n    && rm -rf /var/lib/apt/lists/*\n\nCOPY --from=acpcdetect-installer /opt/art /opt/art\nCOPY --from=ants-installer /opt/ants /opt/ants\nCOPY --from=freesurfer-installer /opt/freesurfer /opt/freesurfer\nCOPY --from=fsl-installer /opt/fsl /opt/fsl\nCOPY --from=mrtrix3-builder /opt/mrtrix3 /opt/mrtrix3\n\nENV ANTSPATH=\"/opt/ants/bin\" \\\n    ARTHOME=\"/opt/art\" \\\n    FREESURFER_HOME=\"/opt/freesurfer\" \\\n    FSLDIR=\"/opt/fsl\" \\\n    FSLOUTPUTTYPE=\"NIFTI_GZ\" \\\n    FSLMULTIFILEQUIT=\"TRUE\" \\\n    FSLTCLSH=\"/opt/fsl/bin/fsltclsh\" \\\n    FSLWISH=\"/opt/fsl/bin/fslwish\" \\\n    LD_LIBRARY_PATH=\"/opt/fsl/lib:$LD_LIBRARY_PATH\" \\\n    PATH=\"/opt/mrtrix3/bin:/opt/ants/bin:/opt/art/bin:/opt/fsl/bin:$PATH\"\n\nWORKDIR /work\nCMD [\"/bin/bash\"]\n"
}