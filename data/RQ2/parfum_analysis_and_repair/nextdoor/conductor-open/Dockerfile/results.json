{
  "startTime": 1674253827411,
  "endTime": 1674253828300,
  "originalSmells": [
    {
      "rule": "npmCacheCleanAfterInstall",
      "position": {
        "lineStart": 16,
        "lineEnd": 16,
        "columnStart": 30,
        "columnEnd": 64
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 5,
        "lineEnd": 5,
        "columnStart": 22,
        "columnEnd": 68
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 16,
        "lineEnd": 16,
        "columnStart": 4,
        "columnEnd": 26
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 22,
        "lineEnd": 23,
        "columnStart": 4,
        "columnEnd": 19
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 16,
        "lineEnd": 16,
        "columnStart": 4,
        "columnEnd": 26
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 22,
        "lineEnd": 23,
        "columnStart": 4,
        "columnEnd": 19
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 5,
        "lineEnd": 5,
        "columnStart": 22,
        "columnEnd": 68
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 16,
        "lineEnd": 16,
        "columnStart": 4,
        "columnEnd": 26
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 22,
        "lineEnd": 23,
        "columnStart": 4,
        "columnEnd": 19
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 22,
        "lineEnd": 23,
        "columnStart": 4,
        "columnEnd": 19
      }
    }
  ],
  "repairedDockerfile": "FROM golang:1.11.13\nENTRYPOINT [ \"/app/entrypoint.sh\" ]\nEXPOSE 80 443\n\n# Install packages.\nRUN apt-get update && apt-get install --no-install-recommends -y jq nginx nodejs patch unzip && \\\n    apt-get clean && rm -rf /var/lib/apt/lists/*;\n\n# Generate SSL certs.\nRUN mkdir -p /app/ssl && cd /app/ssl && \\\n    openssl req -x509 -nodes -newkey rsa:4096 -sha256 \\\n                -keyout privkey.pem -out fullchain.pem \\\n                -days 36500 -subj '/CN=localhost' && \\\n    openssl dhparam -dsaparam -out dhparam.pem 4096\n\n# Generate swagger docs.\nRUN apt-get install --no-install-recommends -y npm && npm install -g pretty-swag@0.1.144 && npm cache clean --force; && rm -rf /var/lib/apt/lists/*;\nADD swagger/swagger.yml swagger/config.json /app/swagger/\nRUN ls /app/swagger/\nRUN cd /app && pretty-swag -c /app/swagger/config.json\n\n# Add awscli\nRUN apt-get install --no-install-recommends -y \\\n        python3-pip \\\n    && pip3 --no-cache-dir install --upgrade awscli \\\n    && apt-get clean && rm -rf /var/lib/apt/lists/*;\n\n# Set up Go app.\nADD .build /src/github.com/Nextdoor/conductor/\nADD .build /go/src/github.com/Nextdoor/conductor/\nRUN cd /src/github.com/Nextdoor/conductor/ && go build -o /app/conductor /src/github.com/Nextdoor/conductor/cmd/conductor/conductor.go\n\n# Add static resources.\nADD resources/ /app\n"
}