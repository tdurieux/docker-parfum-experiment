{
  "startTime": 1674217347229,
  "endTime": 1674217348805,
  "originalSmells": [
    {
      "rule": "gpgUseBatchFlag",
      "position": {
        "lineStart": 38,
        "lineEnd": 38,
        "columnStart": 66,
        "columnEnd": 99
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 35,
        "lineEnd": 35,
        "columnStart": 4,
        "columnEnd": 26
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 46,
        "lineEnd": 46,
        "columnStart": 5,
        "columnEnd": 43
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 48,
        "lineEnd": 48,
        "columnStart": 5,
        "columnEnd": 38
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 49,
        "lineEnd": 49,
        "columnStart": 5,
        "columnEnd": 42
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 52,
        "lineEnd": 52,
        "columnStart": 4,
        "columnEnd": 43
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 35,
        "lineEnd": 35,
        "columnStart": 4,
        "columnEnd": 26
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 52,
        "lineEnd": 52,
        "columnStart": 4,
        "columnEnd": 43
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 5,
        "lineEnd": 13,
        "columnStart": 7,
        "columnEnd": 16
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 35,
        "lineEnd": 35,
        "columnStart": 4,
        "columnEnd": 26
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 46,
        "lineEnd": 46,
        "columnStart": 5,
        "columnEnd": 43
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 48,
        "lineEnd": 48,
        "columnStart": 5,
        "columnEnd": 38
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 49,
        "lineEnd": 49,
        "columnStart": 5,
        "columnEnd": 42
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 52,
        "lineEnd": 52,
        "columnStart": 4,
        "columnEnd": 43
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 35,
        "lineEnd": 35,
        "columnStart": 4,
        "columnEnd": 50
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 52,
        "lineEnd": 52,
        "columnStart": 4,
        "columnEnd": 67
      }
    }
  ],
  "repairedDockerfile": "FROM debian:buster\nFROM python:3.7-buster\n# Basic tools\nRUN echo 'deb http://deb.debian.org/debian buster main contrib non-free' >> /etc/apt/sources.list && cat /etc/apt/sources.list\nRUN apt-get update -qq \\\n    && apt-get install -y -q --no-install-recommends \\\n           apt-utils \\\n           bzip2 \\\n           ca-certificates \\\n           curl \\\n           locales \\\n           unzip \\\n           git \\\n           cmake \\\n    && apt-get clean && rm -rf /var/lib/apt/lists/*;\n# ANTs build and install\nENV ANTSPATH=\"/opt/ants\" \\\n    PATH=\"/opt/ants:$PATH\" \\\n    CMAKE_INSTALL_PREFIX=$ANTSPATH\n\nRUN echo \"Cloning ANTs repo...\" \\\n    && mkdir ~/code \\\n    && cd ~/code \\\n    && git clone --branch v2.3.1 https://github.com/ANTsX/ANTs.git\n\nRUN echo \"Building ANTs...\" \\\n    && mkdir -p ~/bin/antsBuild \\\n    && cd ~/bin/antsBuild \\\n    && cmake ~/code/ANTs\nRUN cd ~/bin/antsBuild/ \\\n    && make\nRUN cd ~/bin/antsBuild/ANTS-build \\\n    && make install\n\n# FSL installation\nRUN apt-get install --no-install-recommends -y fsl && rm -rf /var/lib/apt/lists/*;\n\n# dotnet install\nRUN wget -qO- https://packages.microsoft.com/keys/microsoft.asc | gpg --batch --dearmor > microsoft.asc.gpg \\\n  && mv microsoft.asc.gpg /etc/apt/trusted.gpg.d/ \\\n  && wget -q https://packages.microsoft.com/config/debian/10/prod.list \\\n  && mv prod.list /etc/apt/sources.list.d/microsoft-prod.list \\\n  && chown root:root /etc/apt/trusted.gpg.d/microsoft.asc.gpg \\\n  && chown root:root /etc/apt/sources.list.d/microsoft-prod.list\n\nRUN apt-get update \\\n  && apt-get install --no-install-recommends apt-transport-https -y \\\n  && apt-get update \\\n  && apt-get install --no-install-recommends dotnet-sdk-3.0 -y \\\n  && apt-get install --no-install-recommends dotnet-runtime-3.0 -y && rm -rf /var/lib/apt/lists/*;\n\n# Extra libs needed\nRUN apt-get install --no-install-recommends libc6-dev libgdiplus -y && rm -rf /var/lib/apt/lists/*;\n\nENV DOTNET_CLI_TELEMETRY_OPTOUT = 1\n\nRUN mkdir ~/code/vistarsier\n\nCOPY ./VisTarsier.Common/ /root/code/vistarsier/VisTarsier.Common/\nCOPY ./VisTarsier.Config/ /root/code/vistarsier/VisTarsier.Config/\nCOPY ./VisTarsier.Console/ /root/code/vistarsier/VisTarsier.Console/\nCOPY ./VisTarsier.Extensions/ /root/code/vistarsier/VisTarsier.Extensions/\nCOPY ./VisTarsier.MS/ /root/code/vistarsier/VisTarsier.MS/\nCOPY ./VisTarsier.NiftiLib/ /root/code/vistarsier/VisTarsier.NiftiLib/\n\nRUN ls ~/code/vistarsier\nRUN ls ~/code/vistarsier/VisTarsier.Console\n\nRUN echo \"Building VisTarsier...\" \\\n  && cd ~/code/vistarsier/VisTarsier.Console \\\n  && dotnet build ~/code/vistarsier/VisTarsier.Console --runtime linux-x64 -c Release -o /usr/share/vistarsier/cmd\n\nCOPY ./vtdocker/betasbse.sh /usr/share/vistarsier/betasbse.sh\nCOPY ./vtdocker/config.json /usr/share/vistarsier/cfg/config.json\n\nWORKDIR /usr/share/vistarsier/cmd/\n\nENTRYPOINT [\"dotnet\", \"/usr/share/vistarsier/cmd/VisTarsier.CommandLineTool.dll\"]\nCMD []\n"
}