{
  "startTime": 1674256089798,
  "endTime": 1674256090965,
  "originalSmells": [
    {
      "rule": "yumInstallRmVarCacheYum",
      "position": {
        "lineStart": 86,
        "lineEnd": 86,
        "columnStart": 4,
        "columnEnd": 24
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "# LICENSE UPL 1.0\n#\n# Copyright (c) 2017, 2020 Oracle and/or its affiliates.\n#\n# ORACLE DOCKERFILES PROJECT\n# --------------------------\n# This is the Dockerfile for Oracle Database 12c Release 1 Enterprise Edition\n#\n# REQUIRED FILES TO BUILD THIS IMAGE\n# ----------------------------------\n# (1) linuxamd64_12102_database_1of2.zip\n#     linuxamd64_12102_database_2of2.zip\n#     Download Oracle Database 12c Release 1 Enterprise Edition for Linux x64\n#     from http://www.oracle.com/technetwork/database/enterprise-edition/downloads/index.html\n#\n# HOW TO BUILD THIS IMAGE\n# -----------------------\n# Put all downloaded files in the same directory as this Dockerfile\n# Run:\n#      $ docker build -t oracle/database:12.1.0.2-ee .\n#\n# Pull base image\n# ---------------\nFROM oraclelinux:7-slim as base\n\n# Labels\n# ------\nLABEL \"provider\"=\"Oracle\"                                               \\\n      \"issues\"=\"https://github.com/oracle/docker-images/issues\"         \\\n      \"volume.data\"=\"/opt/oracle/oradata\"                               \\\n      \"volume.setup.location1\"=\"/opt/oracle/scripts/setup\"              \\\n      \"volume.setup.location2\"=\"/docker-entrypoint-initdb.d/setup\"      \\\n      \"volume.startup.location1\"=\"/opt/oracle/scripts/startup\"          \\\n      \"volume.startup.location2\"=\"/docker-entrypoint-initdb.d/startup\"  \\\n      \"port.listener\"=\"1521\"                                            \\\n      \"port.oemexpress\"=\"5500\"\n\n# Environment variables required for this build (do NOT change)\n# -------------------------------------------------------------\nENV ORACLE_BASE=/opt/oracle \\\n    ORACLE_HOME=/opt/oracle/product/12.1.0.2/dbhome_1 \\\n    INSTALL_DIR=/opt/install \\\n    INSTALL_FILE_1=\"linuxamd64_12102_database_1of2.zip\" \\\n    INSTALL_FILE_2=\"linuxamd64_12102_database_2of2.zip\" \\\n    INSTALL_RSP=\"db_inst.rsp\" \\\n    CONFIG_RSP=\"dbca.rsp.tmpl\" \\\n    PWD_FILE=\"setPassword.sh\" \\\n    PERL_INSTALL_FILE=\"installPerl.sh\" \\\n    RUN_FILE=\"runOracle.sh\" \\\n    START_FILE=\"startDB.sh\" \\\n    CREATE_DB_FILE=\"createDB.sh\" \\\n    SETUP_LINUX_FILE=\"setupLinuxEnv.sh\" \\\n    CHECK_SPACE_FILE=\"checkSpace.sh\" \\\n    CHECK_DB_FILE=\"checkDBStatus.sh\" \\\n    USER_SCRIPTS_FILE=\"runUserScripts.sh\" \\\n    INSTALL_DB_BINARIES_FILE=\"installDBBinaries.sh\"\n\n# Use second ENV so that variable get substituted\nENV PATH=$ORACLE_HOME/bin:$ORACLE_HOME/OPatch/:/usr/sbin:$PATH \\\n    LD_LIBRARY_PATH=$ORACLE_HOME/lib:/usr/lib \\\n    CLASSPATH=$ORACLE_HOME/jlib:$ORACLE_HOME/rdbms/jlib\n\n# Copy files needed during both installation and runtime\n# -------------\nCOPY $SETUP_LINUX_FILE $CHECK_SPACE_FILE $INSTALL_DIR/\nCOPY $RUN_FILE $START_FILE $CREATE_DB_FILE $CONFIG_RSP $PWD_FILE $CHECK_DB_FILE $USER_SCRIPTS_FILE $ORACLE_BASE/\n\nRUN chmod ug+x $INSTALL_DIR/*.sh && \\\n    sync && \\\n    $INSTALL_DIR/$CHECK_SPACE_FILE && \\\n    $INSTALL_DIR/$SETUP_LINUX_FILE && \\\n    rm -rf $INSTALL_DIR\n\n\n\n#############################################\n# -------------------------------------------\n# Start new stage for installing the database\n# -------------------------------------------\n#############################################\n\nFROM base AS builder\n\nARG DB_EDITION\n\n# Install unzip for unzip operation\nRUN yum -y install unzip && rm -rf /var/cache/yum\n\n# Copy DB install file\nCOPY --chown=oracle:dba $INSTALL_FILE_1 $INSTALL_FILE_2 $INSTALL_RSP $PERL_INSTALL_FILE $INSTALL_DB_BINARIES_FILE $INSTALL_DIR/\n\n# Install DB software binaries\nUSER oracle\nRUN chmod ug+x $INSTALL_DIR/*.sh && \\\n    sync && \\\n    $INSTALL_DIR/$INSTALL_DB_BINARIES_FILE EE\n\n\n\n#############################################\n# -------------------------------------------\n# Start new layer for database runtime\n# -------------------------------------------\n#############################################\n\nFROM base\n\nUSER oracle\nCOPY --chown=oracle:dba --from=builder $ORACLE_BASE $ORACLE_BASE\n\nUSER root\nRUN $ORACLE_BASE/oraInventory/orainstRoot.sh && \\\n    $ORACLE_HOME/root.sh\n\nUSER oracle\nWORKDIR /home/oracle\n\nHEALTHCHECK --interval=1m --start-period=5m \\\n   CMD \"$ORACLE_BASE/$CHECK_DB_FILE\" >/dev/null || exit 1\n\n# Define default command to start Oracle Database.\nCMD exec $ORACLE_BASE/$RUN_FILE\n"
}