{
  "startTime": 1674255923590,
  "endTime": 1674255924283,
  "originalSmells": [
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 95,
        "lineEnd": 97,
        "columnStart": 8,
        "columnEnd": 126
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "#\n# Copyright (c) 2017, 2022, Oracle and/or its affiliates.\n#\n# Licensed under the Universal Permissive License v 1.0 as shown at\n# https://oss.oracle.com/licenses/upl\n#\n# ORACLE DOCKERFILES PROJECT\n# --------------------------\n# This is the Dockerfile for Oracle SOA Suite\n#\n# REQUIRED FILES TO BUILD THIS IMAGE\n# ----------------------------------\n# See soasuite.download file in the install directory\n# Also see soapatches.download file in the patches directory\n#\n# Pull base image\n# ---------------\nFROM oracle/fmw-infrastructure:12.2.1.4.0 as builder\n\n#\n# Environment variables required for this build (do NOT change)\n# -------------------------------------------------------------\nUSER root\nENV FMW_JAR1=fmw_12.2.1.4.0_soa.jar \\\n    FMW_JAR2=fmw_12.2.1.4.0_osb.jar \\\n    FMW_JAR3=fmw_12.2.1.4.0_b2bhealthcare.jar \\\n    OPATCH_PATCH_DIR=\"${OPATCH_PATCH_DIR:-/u01/opatch_patch}\" \n\n#\n# Copy installers and patches for install\n# -------------------------------------------\nADD  $FMW_JAR1 $FMW_JAR2 $FMW_JAR3 /u01/\nRUN mkdir /u01/patches  ${OPATCH_PATCH_DIR} && \\\n    chown oracle:root -R /u01\nCOPY patches/* /u01/patches/\nCOPY opatch_patch/* ${OPATCH_PATCH_DIR}/\nCOPY container-scripts/* /u01/oracle/container-scripts/\nRUN  cd /u01 && chmod 755 *.jar && \\\n     chmod +xr /u01/oracle/container-scripts/*.*\n\n#\n# Copy files and packages for install\n# -----------------------------------\nUSER oracle\nCOPY install/* /u01/\nRUN cd /u01 && \\\n  $JAVA_HOME/bin/java -jar $FMW_JAR1 -silent -responseFile /u01/soasuite.response -invPtrLoc /u01/oraInst.loc -jreLoc $JAVA_HOME -ignoreSysPrereqs -force -novalidation ORACLE_HOME=$ORACLE_HOME && \\\n  $JAVA_HOME/bin/java -jar $FMW_JAR2 -silent -responseFile /u01/osb.response -invPtrLoc /u01/oraInst.loc -jreLoc $JAVA_HOME -ignoreSysPrereqs -force -novalidation ORACLE_HOME=$ORACLE_HOME INSTALL_TYPE=\"Service Bus\" && \\\n  $JAVA_HOME/bin/java -jar $FMW_JAR3 -silent -responseFile /u01/b2b.response -invPtrLoc /u01/oraInst.loc -jreLoc $JAVA_HOME -ignoreSysPrereqs -force -novalidation ORACLE_HOME=$ORACLE_HOME INSTALL_TYPE=\"B2B\" && \\\n  rm -fr /u01/*.jar /u01/*.response\n\n#\n# Apply OPatch patch\n# ------------------\n#\nRUN opatchzip=`ls ${OPATCH_PATCH_DIR}/p*.zip 2>/dev/null`; \\\n    if [ ! -z \"$opatchzip\" ]; then \\\n      cd ${OPATCH_PATCH_DIR};  \\\n      echo -e \"\\nApplying the below OPatch patch present in ${OPATCH_PATCH_DIR} directory.\"; \\\n      ls p*.zip; \\\n      echo -e \"\"; \\\n      echo \"Extracting patch: ${opatchzip}\"; \\\n      $JAVA_HOME/bin/jar xf ${opatchzip} ; \\\n      $JAVA_HOME/bin/java -jar ${OPATCH_PATCH_DIR}/6880880/opatch_generic.jar -silent oracle_home=$ORACLE_HOME; \\\n      if [ $? -ne 0 ]; then \\\n        echo \"Applying patch to opatch Failed\" ; \\\n        exit 1 ; \\\n      fi; \\\n      rm -rf ${OPATCH_PATCH_DIR}; \\\n      echo \"OPatch patch applied successfully.\"; \\\n    fi\n\n#\n# Apply SOA Patches\n# -----------------\nRUN export OPATCH_NO_FUSER=TRUE && patchzips=`ls /u01/patches/p*.zip 2>/dev/null`; \\\n    if [ ! -z \"$patchzips\" ]; then \\\n      cd /u01/patches;  \\\n      echo -e \"\\nBelow patches present in patches directory. Applying these patches:\"; \\\n      ls p*.zip; \\\n      echo -e \"\"; \\\n      for filename in `ls p*.zip`; do echo \"Extracting patch: ${filename}\"; $JAVA_HOME/bin/jar xf ${filename}; done; \\\n      rm -f /u01/patches/p*.zip; \\\n      $ORACLE_HOME/OPatch/opatch napply -silent -oh $ORACLE_HOME -jre $JAVA_HOME -invPtrLoc /u01/oraInst.loc -phBaseDir /u01/patches; \\\n      $ORACLE_HOME/OPatch/opatch util cleanup -silent; \\\n      rm -rf /u01/patches /u01/oracle/cfgtoollogs/opatch/*; \\\n      echo -e \"\\nPatches applied in SOA oracle home are:\"; \\\n      cd $ORACLE_HOME/OPatch; \\\n      $ORACLE_HOME/OPatch/opatch lspatches; \\\n    else \\\n      echo -e \"\\nNo patches present in patches directory. Skipping patch application.\"; \\\n    fi && \\\n    # Extract XEngine tar gz if present\n    if [ -f \"${ORACLE_HOME}/soa/soa/thirdparty/edifecs\" ] && [  -f \"XEngine_8_4_1_23.tar.gz\" ]; then \\\n        cd $ORACLE_HOME/soa/soa/thirdparty/edifecs && \\\n        tar -zxvf  XEngine_8_4_1_23.tar.gz \\\n    else \\\n        echo -e \"\\nNo XEngine_8_4_1_23.tar.gz present in ${ORACLE_HOME}/soa/soa/thirdparty/edifecs directory. Skipping untar.\"; rm XEngine_8_4_1_23.tar.gz \\\n    fi && \\\n    # zip as few log files grow larger when patches are installed.\n    if ls /u01/oracle/cfgtoollogs/opatch/*.log; then \\\n        gzip /u01/oracle/cfgtoollogs/opatch/*.log; \\\n    fi\n#\n# Rebuild from base image\n# -----------------------\nFROM oracle/fmw-infrastructure:12.2.1.4.0\n\n#\n# Maintainer\n# ----------\nLABEL maintainer=\"Sambasiva Battagiri <sambasiva.battagiri@oracle.com>\"\n\n#\n# Install the required packages\n# -----------------------------\nUSER root\nENV PATH=$PATH:/u01/oracle/container-scripts:/u01/oracle/oracle_common/modules/thirdparty/org.apache.ant/1.10.5.0.0/apache-ant-1.10.5/bin\nRUN yum install -y hostname && \\\n    rm -rf /var/cache/yum\n\nCOPY --from=builder --chown=oracle:root /u01 /u01\n\n#\n# Define default command to start bash.\n#\nUSER oracle\nHEALTHCHECK --start-period=5m --interval=1m CMD curl -k -s --fail `$HEALTH_SCRIPT_FILE` || exit 1\nWORKDIR $ORACLE_HOME\nCMD [\"/u01/oracle/container-scripts/createDomainAndStart.sh\"]\n\n"
}