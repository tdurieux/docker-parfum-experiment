{
  "startTime": 1674251952321,
  "endTime": 1674251953404,
  "originalSmells": [
    {
      "rule": "yumInstallRmVarCacheYum",
      "position": {
        "lineStart": 65,
        "lineEnd": 65,
        "columnStart": 4,
        "columnEnd": 91
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "################################################################################\n###  DOckerfile for the target Docker image used to demonstrate the migration\n###\n#Copyright (c) 2019, 2020,  Oracle and/or its affiliates.\n#\n# Licensed under the Universal Permissive License v 1.0 as shown at https://oss.oracle.com/licenses/upl.\n#\n# ORACLE DOCKERFILES PROJECT\n# --------------------------\n# This is the Dockerfile for Oracle WebLogic 12.2.1.3 domain persisted on a Docker volume\n#\n# HOW TO BUILD THIS IMAGE\n# -----------------------\n# This Oracle WebLogic domain image extends the Oracle WebLogic 12.2.1.3 developer image, you must first build the Oracle WebLogic 12.2.1.3 binary image.\n# Run:\n#      $ docker build -f Dockerfile -t 12214-weblogic-domain-in-volume .\n#\n# IMPORTANT\n# ---------\n# The resulting image of this Dockerfile contains a WebLogic Domain.\n#\n# From\n# ----\nFROM store/oracle/weblogic:12.2.1.4\n\n# Labels\n# ------\nLABEL \"provider\"=\"Oracle\"                                               \\\n      \"maintainer\"=\"Eugene Simos <eugene.simos@oracle.com>\"       \\\n      \"issues\"=\"https://github.com/oracle/docker-images/issues\"         \\\n      \"port.admin.listen\"=\"9001\"                                        \\\n      \"port.administration\"=\"11002\"                                      \\\n      \"port.managed.server\"=\"10001\"                                     \n\n# WLS Configuration\n# -----------------\nENV DOMAIN_ROOT=\"/u01/oracle/user_projects/domains\" \\\n    ADMIN_HOST=\"${ADMIN_HOST:-AdminContainer}\" \\\n    MANAGED_SERVER_PORT=\"${MANAGED_SERVER_PORT:-10001}\" \\\n    MANAGED_SERVER_NAME_BASE=\"${MANAGED_SERVER_NAME_BASE:-MS}\" \\\n    MANAGED_SERVER_CONTAINER=\"${MANAGED_SERVER_CONTAINER:-false}\" \\\n    CONFIGURED_MANAGED_SERVER_COUNT=\"${CONFIGURED_MANAGED_SERVER_COUNT:-2}\" \\\n    MANAGED_NAME=\"${MANAGED_NAME:-MS1}\" \\\n    CLUSTER_NAME=\"${CLUSTER_NAME:-cluster1}\" \\\n    CLUSTER_TYPE=\"${CLUSTER_TYPE:-DYNAMIC}\" \\\n    PROPERTIES_FILE_DIR=\"/u01/oracle/properties\" \\\n\tWDT_HOME=\"/u01\" \\\n\tORACLE_HOME=/u01/oracle \\\n    JAVA_OPTIONS=\"-Doracle.jdbc.fanEnabled=false -Dweblogic.StdoutDebugEnabled=false\"  \\\n    PATH=\"$PATH:${JAVA_HOME}/bin:/u01/oracle/oracle_common/common/bin:/u01/oracle/wlserver/common/bin:/u01/oracle/container-scripts\"\n\n\n# Unzip and install the WDT image and change the permissions / owner.\n## https://docs.docker.com/engine/examples/running_ssh_service/\n## https://bbs.archlinux.org/viewtopic.php?id=165382\n#Create directory where domain will be written to\nUSER root\n# Add files required to build this image\nCOPY --chown=oracle:oracle weblogic-deploy.zip ${WDT_HOME}\nCOPY --chown=oracle:oracle container-scripts/* /u01/oracle/container-scripts/\nCOPY --chown=oracle:oracle container-scripts/get_healthcheck_url.sh /u01/oracle/get_healthcheck_url.sh\nCOPY keys/* /home/oracle/.ssh/\nRUN  chown -R oracle:root /home/oracle/.ssh && \\\n     chmod go-rw /home/oracle/.ssh/*\n\nRUN yum install -y openssh-server openssh-clients vi sudo shadow-utils sed zip git hostname &&     yum clean all && \\\n    echo \"oracle ALL=(ALL) NOPASSWD: ALL\" >> /etc/sudoers && \\\n\techo 'root:Welcome1412#' | chpasswd && \\\n\techo 'oracle:Welcome1412#' | chpasswd && \\\n\tsed -i 's/#*PermitRootLogin prohibit-password/PermitRootLogin yes/g' /etc/ssh/sshd_config && \\\n\tsed -i 's@session\\s*required\\s*pam_loginuid.so@session optional pam_loginuid.so@g' /etc/pam.d/sshd && \\\n\tsed -i 's/#Banner none/Banner \\/home\\/oracle\\/WLS_deploy_scripts\\/welcome_target.txt/g' /etc/ssh/sshd_config && \\\n\t/usr/bin/ssh-keygen -A && \\\n     mkdir -p $DOMAIN_ROOT && \\\n    chown -R oracle:oracle $DOMAIN_ROOT/.. && \\\n    chmod -R a+xwr $DOMAIN_ROOT/.. && \\\n    mkdir -p $ORACLE_HOME/properties && \\\n    chmod -R a+r $ORACLE_HOME/properties && \\ \n    chmod +x /u01/oracle/container-scripts/*  && \\\n     cd ${WDT_HOME} && \\\n     unzip weblogic-deploy.zip && \\\n\t chmod +xw weblogic-deploy/bin/*.sh && \\\n     chmod -R +xw weblogic-deploy/lib/python && \\\n     chown -R oracle:oracle /u01/weblogic-deploy && rm -rf /var/cache/yum\n\n\n\nUSER oracle\nWORKDIR $ORACLE_HOME\nRUN     echo \"export PATH=/u01/weblogic-deploy/bin:$PATH\" >> /home/oracle/.bashrc && \\\n\t\techo \"export ORACLE_HOME=/u01/oracle\" >> /home//oracle/.bashrc  && \\\n\t\techo \"export MW_HOME=$ORACLE_HOME\" >> /home/oracle/.bashrc && \\\n\t\techo \"export DOMAIN_HOME=/u01/oracle/user_projects/domains/base_domain\" >> /home/oracle/.bashrc  && \\\n\t\techo \"export JAVA_HOME=/u01/jdk\" >> /home/oracle/.bashrc\t&& \\\n\t\techo \"export WLST_PATH=/u01/oracle\" >> /home/oracle/.bashrc\t&& \\\n\t\tcd /home/oracle && \\\n\t\tgit clone https://github.com/eugsim1/WLS_deploy_scripts.git && \\\n\t\tchmod u+x WLS_deploy_scripts/*.sh\n\nVOLUME $DOMAIN_ROOT\n\nEXPOSE 22 9001 10001 11001\n##CMD [\"/bin/bash\",\"/bootstrap.sh\"]\nUSER  root\nCMD [\"/usr/sbin/sshd\", \"-D\"]\n#USER oracle\n#WORKDIR $ORACLE_HOME\n##CMD [\"/u01/oracle/container-scripts/createWLSDomain.sh\"]\n#CMD [\"/bin/sh\"]\n#!/bin/bash\n####\n###\n#### docker run -d -P --name test_sshd_target 12214-domain:latest\n#### export DOCKER_PORT=`docker port test_sshd_target 22`\n#### export DOCKER_PORT=`echo $DOCKER_PORT | sed 's/0.0.0.0://g' `\n#### echo $DOCKER_PORT\n#### ssh -i ~/.ssh/priv.txt  -o \"UserKnownHostsFile=/dev/null\" -o \"StrictHostKeyChecking=no\"  oracle@localhost -p $DOCKER_PORT\n####### docker container stop test_sshd_target\n####### docker container rm test_sshd_target     \n\n#docker container stop test_sshd_target\n#docker container rm test_sshd_target"
}