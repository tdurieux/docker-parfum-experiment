{
  "startTime": 1674251150625,
  "endTime": 1674251151308,
  "originalSmells": [
    {
      "rule": "yumInstallRmVarCacheYum",
      "position": {
        "lineStart": 60,
        "lineEnd": 60,
        "columnStart": 4,
        "columnEnd": 23
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "# LICENSE CDDL 1.0 + GPL 2.0\n#\n# Copyright (c) 1982-2017 Oracle and/or its affiliates. All rights reserved.\n#\n# ORACLE DOCKERFILES PROJECT\n# --------------------------\n# This is the Dockerfile for Oracle Database 12c Release 1 Enterprise Edition\n#\n# REQUIRED FILES TO BUILD THIS IMAGE\n# ----------------------------------\n# (1) linuxamd64_12102_database_1of2.zip\n#     linuxamd64_12102_database_2of2.zip\n#     Download Oracle Database 12c Release 1 Enterprise Edition for Linux x64\n#     from http://www.oracle.com/technetwork/database/enterprise-edition/downloads/index.html\n#\n# HOW TO BUILD THIS IMAGE\n# -----------------------\n# Put all downloaded files in the same directory as this Dockerfile\n# Run:\n#      $ docker build -t oracle/database:12.1.0.2-ee .\n#\n# Pull base image\n# ---------------\nFROM oraclelinux:7-slim\n\n# Maintainer\n# ----------\nMAINTAINER Gerald Venzl <gerald.venzl@oracle.com>\n\n\n\n# Environment variables required for this build (do NOT change)\n# -------------------------------------------------------------\nENV GRID_BASE=/opt/grid \\\n    GRID_HOME=/opt/grid/product/12.1.0.2/grid \\\n    ORACLE_BASE=/opt/oracle \\\n    ORACLE_HOME=/opt/oracle/product/12.1.0.2/dbhome_1 \\\n    INSTALL_RSP=\"db_inst.rsp\" \\\n    CONFIG_RSP=\"dbca.rsp.tmpl\" \\\n    PWD_FILE=\"setPassword.sh\" \\\n    PERL_INSTALL_FILE=\"installPerl.sh\" \\\n    RUN_FILE=\"runOracle.sh\" \\\n    START_FILE=\"startDB.sh\" \\\n    CREATE_DB_FILE=\"createDB.sh\" \\\n    SETUP_LINUX_FILE=\"setupLinuxEnv.sh\" \\\n    CHECK_SPACE_FILE=\"checkSpace.sh\" \\\n    INSTALL_DB_BINARIES_FILE=\"installDBBinaries.sh\" \\\n    INSTALL_DIR_BINARIES=/stage/12.1.0.2\n\n# Use second ENV so that variable get substituted\nENV INSTALL_DIR=$ORACLE_BASE/install \\\n    PATH=$ORACLE_HOME/bin:$ORACLE_HOME/OPatch/:/usr/sbin:$PATH \\\n    LD_LIBRARY_PATH=$ORACLE_HOME/lib:/usr/lib \\\n    CLASSPATH=$ORACLE_HOME/jlib:$ORACLE_HOME/rdbms/jlib  \n\n# Copy binaries\n# -------------\nCOPY $INSTALL_RSP $PERL_INSTALL_FILE $SETUP_LINUX_FILE $CHECK_SPACE_FILE $INSTALL_DB_BINARIES_FILE $INSTALL_DIR/\nCOPY $RUN_FILE $START_FILE $CREATE_DB_FILE $CONFIG_RSP $PWD_FILE $ORACLE_BASE/\n\nRUN yum install -y sudo && \\\n    chmod ug+x $INSTALL_DIR/*.sh && \\\n    sync && \\\n    $INSTALL_DIR/$CHECK_SPACE_FILE && \\\n    $INSTALL_DIR/$SETUP_LINUX_FILE && \\\n    yum clean all && \\\n    \n# add groups for grid    \n    \n    groupadd --force --gid 54321 oinstall && \\\n    groupmod --gid 54321 oinstall && \\\n    groupadd --gid 54421 asmdba && \\\n    groupadd --gid 54422 asmadmin && \\\n    groupadd --gid 54423 asmoper && \\\n\n# Add groups for database\n\n    groupadd --force --gid 54322 dba && \\\n    groupmod --gid 54322 dba && \\\n    groupadd --gid 54323 oper && \\\n    groupadd --gid 54324 backupdba && \\\n    groupadd --gid 54325 dgdba && \\\n    groupadd --gid 54326 kmdba && \\\n    groupadd --gid 54327 racdba && \\\n\n\n# Add grid infrastructure owner    \n    useradd --create-home --uid 54421 --gid oinstall --groups dba,asmdba,asmadmin,asmoper grid || \\\n      (RES=$? && ( [ $RES -eq 9 ] && exit 0 || exit $RES)) && \\\n    usermod --uid 54421 --gid oinstall --groups dba,asmdba,asmadmin,asmoper grid && \\\n\n# Add database owner\n    useradd --create-home --uid 54321 --gid oinstall --groups dba,asmdba,oper,backupdba,dgdba,kmdba,racdba oracle || \\\n      (RES=$? && ( [ $RES -eq 9 ] && exit 0 || exit $RES)) && \\\n    usermod --uid 54321 --gid oinstall --groups dba,asmdba,oper,backupdba,dgdba,kmdba,racdba oracle  && \\\n    mkdir -p $GRID_BASE && \\\n    chgrp -R oinstall $GRID_BASE && \\\n    chmod -R 0775 $GRID_BASE && \\\n    mkdir -p $ORACLE_BASE && \\\n    chgrp -R oinstall $ORACLE_BASE && \\\n    chmod -R 0775 $ORACLE_BASE && rm -rf /var/cache/yum\n\n#install grid software\n#USER grid\nRUN sudo -E -u grid $INSTALL_DIR_BINARIES/grid/runInstaller -waitforcompletion \\\n  -ignoreSysPrereqs -ignoreprereq -silent -force \\\n  INVENTORY_LOCATION=$ORACLE_BASE/oraInventory \\\n  UNIX_GROUP_NAME=oinstall \\\n  ORACLE_HOME=$GRID_HOME \\\n  ORACLE_BASE=$GRID_BASE \\\n  oracle.install.option=CRS_SWONLY \\\n  oracle.install.asm.OSDBA=asmdba \\\n  oracle.install.asm.OSOPER=asmoper \\\n  oracle.install.asm.OSASM=asmadmin\n\nUSER root \nRUN $ORACLE_BASE/oraInventory/orainstRoot.sh && \\\n    $GRID_HOME/root.sh\n\n# Install DB software binaries\nUSER oracle\nRUN $INSTALL_DIR/$INSTALL_DB_BINARIES_FILE EE\n\nUSER root\nRUN $ORACLE_BASE/oraInventory/orainstRoot.sh && \\\n    $ORACLE_HOME/root.sh\n\nUSER oracle\nWORKDIR /home/oracle\n\nVOLUME [\"$ORACLE_BASE/oradata\"]\n\nEXPOSE 1521 5500\n\n# Define default command to start Oracle Database.\nCMD $ORACLE_BASE/$RUN_FILE\n"
}