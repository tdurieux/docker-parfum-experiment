{
  "startTime": 1674248371131,
  "endTime": 1674248372086,
  "originalSmells": [
    {
      "rule": "apkAddUseNoCache",
      "position": {
        "lineStart": 20,
        "lineEnd": 20,
        "columnStart": 4,
        "columnEnd": 22
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM alpine:3.11\nLABEL Description=\"Fluentd docker image\" Vendor=\"Banzai Cloud\" Version=\"1.7.4\"\n\n# Do not split this into multiple RUN!\n# Docker creates a layer for every RUN-Statement\n# therefore an 'apk delete' has no effect\nRUN apk update \\\n && apk add --no-cache \\\n        ca-certificates linux-headers \\\n        ruby ruby-irb ruby-etc ruby-webrick \\\n        tini libmaxminddb geoip \\\n && buildDeps=\" \\\n      make gcc g++ libc-dev \\\n      wget bzip2 zlib-dev git linux-headers \\\n      automake autoconf libtool build-base \\\n      ruby-dev libc6-compat geoip-dev \\\n    \" \\\n && apk add --no-cache --virtual .build-deps \\\n        build-base \\\n        ruby-dev gnupg \\\n && apk add --no-cache $buildDeps \\\n && echo 'gem: --no-document' >> /etc/gemrc \\\n && gem install oj -v 3.3.10 \\\n && gem install http_parser.rb -v 0.5.3 \\\n && gem install tzinfo -v 1.2.6 \\\n && gem install json -v 2.2.0 \\\n && gem install async-http -v 0.46.3 \\\n && gem install fluentd -v 1.7.4 \\\n && gem install prometheus-client -v 0.10.0 \\\n && gem install bigdecimal -v 1.3.5 \\\n && gem install gelf -v 3.0.0 \\\n && gem install \\\n         specific_install \\\n         fluent-plugin-remote-syslog \\\n         fluent-plugin-kubernetes_metadata_filter \\\n         fluent-plugin-webhdfs \\\n         fluent-plugin-elasticsearch \\\n         fluent-plugin-prometheus \\\n         fluent-plugin-s3 \\\n         fluent-plugin-rewrite-tag-filter \\\n         fluent-plugin-azurestorage \\\n         fluent-plugin-oss \\\n         fluent-plugin-dedot_filter \\\n         fluent-plugin-sumologic_output \\\n         fluent-plugin-kafka \\\n         fluent-plugin-geoip \\\n         fluent-plugin-label-router \\\n         fluent-plugin-tag-normaliser \\\n         fluent-plugin-grafana-loki \\\n         fluent-plugin-concat \\\n         fluent-plugin-kinesis \\\n         fluent-plugin-parser-logfmt \\\n         fluent-plugin-detect-exceptions \\\n         fluent-plugin-multi-format-parser \\\n         fluent-plugin-record-modifier \\\n         fluent-plugin-logzio \\\n         fluent-plugin-newrelic \\\n         fluent-plugin-splunk-hec \\\n         fluent-plugin-logdna \\\n         fluent-plugin-datadog \\\n         fluent-plugin-aws-elasticsearch-service \\\n         fluent-plugin-redis \\\n         fluent-plugin-gelf-hs \\\n         fluent-plugin-grok-parser \\\n && gem specific_install -l https://github.com/banzaicloud/fluent-plugin-cloudwatch-logs/releases/download/v0.7.6/fluent-plugin-cloudwatch-logs-0.7.6.gem \\\n && gem specific_install -l https://github.com/banzaicloud/fluent-plugin-gcs.git \\\n && apk del .build-deps $buildDeps \\\n && rm -rf /tmp/* /var/tmp/* /usr/lib/ruby/gems/*/cache/*.gem\n\nRUN addgroup -S fluent && adduser -S -G fluent fluent \\\n    # for log storage (maybe shared with host)\n    && mkdir -p /fluentd/log \\\n    # configuration/plugins path (default: copied from .)\n    && mkdir -p /fluentd/etc /fluentd/plugins \\\n    && chown -R fluent /fluentd && chgrp -R fluent /fluentd \\\n    && mkdir -p /buffers && chown -R fluent /buffers\n\n\nCOPY fluent.conf /fluentd/etc/\nCOPY entrypoint.sh /bin/\nCOPY healthy.sh /bin/\n\n\nENV FLUENTD_CONF=\"fluent.conf\"\n\nENV LD_PRELOAD=\"\"\nEXPOSE 24224 5140\n\nUSER fluent\nENTRYPOINT [\"tini\",  \"--\", \"/bin/entrypoint.sh\"]\nCMD [\"fluentd\"]\n\n"
}