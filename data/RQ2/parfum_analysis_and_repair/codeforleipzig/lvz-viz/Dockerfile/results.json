{
  "startTime": 1674253692008,
  "endTime": 1674253692792,
  "originalSmells": [
    {
      "rule": "npmCacheCleanAfterInstall",
      "position": {
        "lineStart": 8,
        "lineEnd": 8,
        "columnStart": 4,
        "columnEnd": 33
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM node:16-alpine AS build-js\n\n# see https://github.com/nodejs/docker-node/blob/master/docs/BestPractices.md#non-root-user\nENV USER node\nUSER ${USER}\nWORKDIR /home/${USER}\n\nCOPY --chown=${USER} package*.json ./\nRUN npm install --only=production && npm cache clean --force;\n\nCOPY --chown=${USER} Gruntfile.js ./\nCOPY --chown=${USER} src/main/resources/public/js ./src/main/resources/public/js\nRUN npm run --silent grunt-build\n\nFROM gradle:7.2.0-jdk11 AS build-java\n\nENV USER gradle\nUSER ${USER}\nRUN mkdir -p /home/gradle/app/build/resources/main/public/js\nWORKDIR /home/gradle/app\n\nCOPY --chown=${USER} build.gradle .\nCOPY --chown=${USER} src ./src\nRUN rm -f src/main/resources/public/js/*.js\nCOPY --chown=${USER} --from=build-js /home/node/build/resources/main/public/js/app.min.js ./src/main/resources/public/js/\n\nRUN gradle --info assemble\n\nFROM eclipse-temurin:11-jdk-alpine\n\nLABEL maintainer=\"Sebastian Peters <Sebastian.Peters@gmail.com>\" \\\n      org.opencontainers.image.authors=\"Sebastian Peters <Sebastian.Peters@gmail.com>\" \\\n      org.opencontainers.image.source=\"https://github.com/CodeforLeipzig/lvz-viz\" \\\n      org.opencontainers.image.vendor=\"Open Knowledge Foundation Deutschland e.V.\"\n\n# see https://github.com/adoptium/containers/blob/main/11/jdk/alpine/Dockerfile.releases.full#L22\nENV LANG='de_DE.UTF-8' LANGUAGE='de_DE:de' LC_ALL='de_DE.UTF-8'\n\nRUN echo \"Europe/Berlin\" > /etc/timezone\n\nENV USER lvz-viz\n\nRUN addgroup ${USER} \\\n  && adduser -D -G ${USER} -S ${USER}\n\nUSER ${USER}\nWORKDIR /home/${USER}\n\nCOPY --chown=${USER} dewac_175m_600.crf.ser.gz .\nCOPY --chown=${USER} --from=build-java /home/gradle/app/build/libs/*.jar ./app.jar\n\nEXPOSE 8080\n\nENTRYPOINT [\"java\",\"-XshowSettings:vm\",\"-XX:MaxRAMPercentage=95\",\"-jar\",\"./app.jar\"]\n"
}