{
  "startTime": 1674248905885,
  "endTime": 1674248906669,
  "originalSmells": [
    {
      "rule": "yumInstallRmVarCacheYum",
      "position": {
        "lineStart": 46,
        "lineEnd": 46,
        "columnStart": 21,
        "columnEnd": 48
      }
    },
    {
      "rule": "yumInstallRmVarCacheYum",
      "position": {
        "lineStart": 46,
        "lineEnd": 79,
        "columnStart": 52,
        "columnEnd": 23
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 21,
        "lineEnd": 21,
        "columnStart": 4,
        "columnEnd": 59
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 41,
        "lineEnd": 41,
        "columnStart": 4,
        "columnEnd": 56
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM lammps/buildenv:centos7 as builder\nMAINTAINER richard.berger@outlook.com\n\nADD lammps /tmp/lammps\n\nRUN mkdir -p /tmp/lammps/build-serial && \\\n    cd /tmp/lammps/build-serial && \\\n    cmake3 -C /tmp/lammps/cmake/presets/most.cmake \\\n          -D CMAKE_BUILD_TYPE=Release \\\n          -D CMAKE_INSTALL_PREFIX=/usr \\\n          -D CMAKE_INSTALL_SYSCONFDIR=/etc \\\n          -D LAMMPS_MACHINE=serial \\\n          -D BUILD_MPI=off \\\n          -D BUILD_LAMMPS_SHELL=on \\\n          -D LAMMPS_EXCEPTIONS=on \\\n          -D BUILD_TOOLS=on \\\n          -D BUILD_SHARED_LIBS=on \\\n          -D Python_EXECUTABLE=/usr/bin/python3 \\\n          /tmp/lammps/cmake && \\\n    make -j 8 && \\\n    make install && \\\n    tar czvf /tmp/lammps-serial.tgz -T install_manifest.txt && rm /tmp/lammps-serial.tgz\n\nENV PATH=/usr/lib64/openmpi/bin${PATH:+:}${PATH}\nENV LD_LIBRARY_PATH=/usr/lib64/openmpi/lib${LD_LIBRARY_PATH:+:}${LD_LIBRARY_PATH}\n\nRUN mkdir -p /tmp/lammps/build-openmpi && \\\n    cd /tmp/lammps/build-openmpi && \\\n    cmake3 -C /tmp/lammps/cmake/presets/most.cmake \\\n          -D CMAKE_BUILD_TYPE=Release \\\n          -D CMAKE_INSTALL_PREFIX=/usr \\\n          -D CMAKE_INSTALL_SYSCONFDIR=/etc \\\n          -D LAMMPS_MACHINE=mpi \\\n          -D BUILD_MPI=on \\\n          -D LAMMPS_EXCEPTIONS=on \\\n          -D BUILD_TOOLS=on \\\n          -D BUILD_SHARED_LIBS=on \\\n          -D Python_EXECUTABLE=/usr/bin/python3 \\\n          /tmp/lammps/cmake && \\\n    make -j 8 && \\\n    make install && \\\n    tar czvf /tmp/lammps-mpi.tgz -T install_manifest.txt && rm /tmp/lammps-mpi.tgz\n\nFROM centos:7\nMAINTAINER richard.berger@outlook.com\nRUN useradd -m lammps\nRUN yum update -y && yum install -y epel-release && yum -y install \\\n                   Lmod \\\n                   blas \\\n                   fftw \\\n                   gdb \\\n                   gsl \\\n                   hdf5 \\\n                   kim-api-devel \\\n                   lapack \\\n                   libjpeg \\\n                   libpng \\\n                   libyaml \\\n                   libzstd \\\n                   mpich \\\n                   netcdf-cxx \\\n                   netcdf \\\n                   netcdf-mpich \\\n                   netcdf-openmpi \\\n                   ninja-build \\\n                   openblas \\\n                   openkim-models \\\n                   openmpi \\\n                   patch \\\n                   python3 \\\n                   python3-PyYAML \\\n                   python3-devel \\\n                   python3-pip \\\n                   python3-venv \\\n                   readline \\\n                   valgrind-openmpi \\\n                   vim-enhanced \\\n                   voro++ \\\n                   which \\\n                   zstd && \\\n    yum clean -y all && rm -rf /var/cache/yum\nCOPY --from=builder /tmp/lammps-serial.tgz /tmp/\nCOPY --from=builder /tmp/lammps-mpi.tgz /tmp/\nRUN tar -xvzf /tmp/lammps-serial.tgz -C / && rm -f /tmp/lammps-serial.tgz\nRUN tar -xvzf /tmp/lammps-mpi.tgz -C / && rm -f /tmp/lammps-mpi.tgz\nRUN chown -R lammps:lammps /home/lammps/\n\n# python package installation\nRUN mkdir /tmp/lammps\nCOPY --from=builder /tmp/lammps/python /tmp/lammps/python\nCOPY --from=builder /tmp/lammps/src/version.h /tmp/lammps/src/version.h\nRUN cd /tmp/lammps/python && python3 setup.py install && cd && rm -rf /tmp/lammps\n\nENV LAMMPS_POTENTIALS=/usr/share/lammps/potentials\nENV PATH=/usr/lib64/openmpi/bin${PATH:+:}${PATH}\nENV LD_LIBRARY_PATH=/usr/lib64/openmpi/lib${LD_LIBRARY_PATH:+:}${LD_LIBRARY_PATH}\nUSER lammps\nWORKDIR /home/lammps\nCMD /usr/bin/lmp_mpi\n"
}