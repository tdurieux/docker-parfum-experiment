{
  "startTime": 1674251279040,
  "endTime": 1674251280526,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 9,
        "lineEnd": 9,
        "columnStart": 4,
        "columnEnd": 64
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 10,
        "lineEnd": 10,
        "columnStart": 4,
        "columnEnd": 49
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 12,
        "lineEnd": 12,
        "columnStart": 4,
        "columnEnd": 81
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 24,
        "lineEnd": 24,
        "columnStart": 4,
        "columnEnd": 64
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 25,
        "lineEnd": 25,
        "columnStart": 4,
        "columnEnd": 49
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 27,
        "lineEnd": 27,
        "columnStart": 4,
        "columnEnd": 81
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 39,
        "lineEnd": 39,
        "columnStart": 4,
        "columnEnd": 64
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 40,
        "lineEnd": 40,
        "columnStart": 4,
        "columnEnd": 49
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 42,
        "lineEnd": 42,
        "columnStart": 4,
        "columnEnd": 81
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 52,
        "lineEnd": 52,
        "columnStart": 4,
        "columnEnd": 99
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 53,
        "lineEnd": 53,
        "columnStart": 4,
        "columnEnd": 86
      }
    },
    {
      "rule": "npmCacheCleanAfterInstall",
      "position": {
        "lineStart": 55,
        "lineEnd": 55,
        "columnStart": 28,
        "columnEnd": 39
      }
    },
    {
      "rule": "npmCacheCleanAfterInstall",
      "position": {
        "lineStart": 61,
        "lineEnd": 61,
        "columnStart": 51,
        "columnEnd": 62
      }
    },
    {
      "rule": "npmCacheCleanAfterInstall",
      "position": {
        "lineStart": 62,
        "lineEnd": 62,
        "columnStart": 4,
        "columnEnd": 42
      }
    },
    {
      "rule": "npmCacheCleanAfterInstall",
      "position": {
        "lineStart": 70,
        "lineEnd": 70,
        "columnStart": 51,
        "columnEnd": 62
      }
    },
    {
      "rule": "npmCacheCleanAfterInstall",
      "position": {
        "lineStart": 71,
        "lineEnd": 71,
        "columnStart": 4,
        "columnEnd": 42
      }
    },
    {
      "rule": "npmCacheCleanAfterInstall",
      "position": {
        "lineStart": 79,
        "lineEnd": 79,
        "columnStart": 51,
        "columnEnd": 62
      }
    },
    {
      "rule": "npmCacheCleanAfterInstall",
      "position": {
        "lineStart": 80,
        "lineEnd": 80,
        "columnStart": 4,
        "columnEnd": 42
      }
    },
    {
      "rule": "npmCacheCleanAfterInstall",
      "position": {
        "lineStart": 88,
        "lineEnd": 88,
        "columnStart": 51,
        "columnEnd": 62
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 6,
        "lineEnd": 7,
        "columnStart": 2,
        "columnEnd": 78
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 10,
        "lineEnd": 10,
        "columnStart": 62,
        "columnEnd": 87
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 21,
        "lineEnd": 22,
        "columnStart": 2,
        "columnEnd": 78
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 25,
        "lineEnd": 25,
        "columnStart": 62,
        "columnEnd": 87
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 36,
        "lineEnd": 37,
        "columnStart": 2,
        "columnEnd": 78
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 40,
        "lineEnd": 40,
        "columnStart": 62,
        "columnEnd": 87
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 10,
        "lineEnd": 10,
        "columnStart": 62,
        "columnEnd": 87
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 25,
        "lineEnd": 25,
        "columnStart": 62,
        "columnEnd": 87
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 40,
        "lineEnd": 40,
        "columnStart": 62,
        "columnEnd": 87
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 6,
        "lineEnd": 7,
        "columnStart": 2,
        "columnEnd": 78
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 10,
        "lineEnd": 10,
        "columnStart": 62,
        "columnEnd": 87
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 21,
        "lineEnd": 22,
        "columnStart": 2,
        "columnEnd": 78
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 25,
        "lineEnd": 25,
        "columnStart": 62,
        "columnEnd": 87
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 36,
        "lineEnd": 37,
        "columnStart": 2,
        "columnEnd": 78
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 40,
        "lineEnd": 40,
        "columnStart": 62,
        "columnEnd": 87
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 10,
        "lineEnd": 10,
        "columnStart": 65,
        "columnEnd": 114
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 25,
        "lineEnd": 25,
        "columnStart": 65,
        "columnEnd": 114
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 40,
        "lineEnd": 40,
        "columnStart": 65,
        "columnEnd": 114
      }
    }
  ],
  "repairedDockerfile": "# setup acp\nFROM i386/ubuntu:14.04 as acp\n\nWORKDIR /lamassu\n\nRUN apt-get update && apt-get upgrade -y && \\\n  apt-get install --no-install-recommends -y build-essential cmake curl git pkg-config yasm \\\n  libasound2-dev libpcsclite-dev libavcodec-dev libavformat-dev libswscale-dev && rm -rf /var/lib/apt/lists/*;\n\nRUN curl -f -s https://deb.nodesource.com/gpgkey/nodesource.gpg.key | apt-key add -\nRUN curl -f -sS https://deb.nodesource.com/setup_6.x | bash - && apt-get install --no-install-recommends -y nodejs && rm -rf /var/lib/apt/lists/*;\n\nRUN curl -f -sS https://ssubucket.ams3.digitaloceanspaces.com/barcodescannerlibs.txz | xz -dc | \\\n  tar -x -C /usr/local/lib --strip-components=2 barcodescannerlibs/ia32/libBarcodeScanner.so\n\n# setup ssuboard\nFROM arm32v7/debian:jessie as ssuboard\n\nWORKDIR /lamassu\n\nRUN apt-get update && apt-get upgrade -y && \\\n  apt-get install --no-install-recommends -y build-essential cmake curl git pkg-config yasm \\\n  libasound2-dev libpcsclite-dev libavcodec-dev libavformat-dev libswscale-dev && rm -rf /var/lib/apt/lists/*;\n\nRUN curl -f -s https://deb.nodesource.com/gpgkey/nodesource.gpg.key | apt-key add -\nRUN curl -f -sS https://deb.nodesource.com/setup_8.x | bash - && apt-get install --no-install-recommends -y nodejs && rm -rf /var/lib/apt/lists/*;\n\nRUN curl -f -sS https://ssubucket.ams3.digitaloceanspaces.com/barcodescannerlibs.txz | xz -dc | \\\n  tar -x -C /usr/local/lib --strip-components=2 barcodescannerlibs/arm32/libBarcodeScanner.a\n\n# setup upboard\nFROM amd64/debian:stretch as upboard\n\nWORKDIR /lamassu\n\nRUN apt-get update && apt-get upgrade -y && \\\n  apt-get install --no-install-recommends -y build-essential curl git pkg-config yasm \\\n  libasound2-dev libpcsclite-dev libavcodec-dev libavformat-dev libswscale-dev && rm -rf /var/lib/apt/lists/*;\n\nRUN curl -f -s https://deb.nodesource.com/gpgkey/nodesource.gpg.key | apt-key add -\nRUN curl -f -sS https://deb.nodesource.com/setup_8.x | bash - && apt-get install --no-install-recommends -y nodejs && rm -rf /var/lib/apt/lists/*;\n\nRUN curl -f -sS https://ssubucket.ams3.digitaloceanspaces.com/barcodescannerlibs.txz | xz -dc | \\\n  tar -x -C /usr/local/lib --strip-components=2 barcodescannerlibs/amd64/libBarcodeScanner.a\n\n\n# ACP build\nFROM acp as acp-build\n  ARG VERSION\n  ARG PASSWORD\n\n  RUN git clone https://github.com/lamassu/lamassu-machine -b ${VERSION} && cd lamassu-machine && \\\n    curl -f -sS https://ssubucket.ams3.digitaloceanspaces.com/ssuboard/licenses-2018.12.28.json.xz.gpg | gpg --batch --passphrase $PASSWORD --decrypt | xz -dc > licenses.json && \\\n    curl -f -sL https://ssubucket.ams3.digitaloceanspaces.com/deploy-files_2019.06.07.txz | xz -dc | tar -x\n\n  RUN cd lamassu-machine && npm install && \\\n    cp ./hardware/codebase/aaeon/device_config.json ./ && \\\n    bash ./deploy/codebase/build.sh aaeon --copy-device-config && npm cache clean --force;\n\nFROM upboard as upboard-gaia-build\n  COPY --from=acp-build /lamassu/lamassu-machine /lamassu/lamassu-machine\n  RUN cd lamassu-machine && rm -rf node_modules && npm install && \\\n    npm install @joepie91/v4l2camera@1.0.5 && \\\n    mv node_modules/@joepie91/v4l2camera node_modules/ && \\\n    rmdir node_modules/@joepie91 && \\\n    cp ./hardware/codebase/upboard/gaia/device_config.json ./ && \\\n    bash ./deploy/codebase/build.sh upboard-gaia --copy-device-config && npm cache clean --force;\n\nFROM upboard as upboard-sintra-build\n  COPY --from=upboard-gaia-build /lamassu/lamassu-machine /lamassu/lamassu-machine\n  RUN cd lamassu-machine && rm -rf node_modules && npm install && \\\n    npm install @joepie91/v4l2camera@1.0.5 && \\\n    mv node_modules/@joepie91/v4l2camera node_modules/ && \\\n    rmdir node_modules/@joepie91 && \\\n    cp ./hardware/codebase/upboard/sintra/device_config.json ./ && \\\n    bash ./deploy/codebase/build.sh upboard-sintra --copy-device-config && npm cache clean --force;\n\nFROM upboard as upboard-tejo-build\n  COPY --from=upboard-sintra-build /lamassu/lamassu-machine /lamassu/lamassu-machine\n  RUN cd lamassu-machine && rm -rf node_modules && npm install && \\\n    npm install @joepie91/v4l2camera@1.0.5 && \\\n    mv node_modules/@joepie91/v4l2camera node_modules/ && \\\n    rmdir node_modules/@joepie91 && \\\n    cp ./hardware/codebase/upboard/tejo/device_config.json ./ && \\\n    bash ./deploy/codebase/build.sh upboard-tejo --copy-device-config && npm cache clean --force;\n\nFROM ssuboard as ssuboard-build\n  COPY --from=upboard-tejo-build /lamassu/lamassu-machine /lamassu/lamassu-machine\n  RUN cd lamassu-machine && rm -rf node_modules && npm install && \\\n    cp ./hardware/codebase/ssuboard/device_config.json ./ && \\\n    bash ./deploy/codebase/build.sh ssuboard --copy-device-config && npm cache clean --force;\n  RUN cd lamassu-machine && bash ./deploy/codebase/package.sh\n"
}