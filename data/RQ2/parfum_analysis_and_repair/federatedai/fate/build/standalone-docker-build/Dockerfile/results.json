{
  "startTime": 1674253325068,
  "endTime": 1674253325654,
  "originalSmells": [
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 62,
        "lineEnd": 62,
        "columnStart": 21,
        "columnEnd": 46
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "#\n#  Copyright 2019 The FATE Authors. All Rights Reserved.\n#\n#  Licensed under the Apache License, Version 2.0 (the \"License\");\n#  you may not use this file except in compliance with the License.\n#  You may obtain a copy of the License at\n#\n#      http://www.apache.org/licenses/LICENSE-2.0\n#\n#  Unless required by applicable law or agreed to in writing, software\n#  distributed under the License is distributed on an \"AS IS\" BASIS,\n#  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n#  See the License for the specific language governing permissions and\n#  limitations under the License.\n#\n#\n#  Licensed under the Apache License, Version 2.0 (the \"License\");\n#  you may not use this file except in compliance with the License.\n#  You may obtain a copy of the License at\n#\n#      http://www.apache.org/licenses/LICENSE-2.0\n#\n#  Unless required by applicable law or agreed to in writing, software\n#  distributed under the License is distributed on an \"AS IS\" BASIS,\n#  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n#  See the License for the specific language governing permissions and\n#  limitations under the License.\n\nARG version\nFROM federatedai/fate_python_base:${version}\n\nUSER root\n\nWORKDIR /data/projects/fate\nENV WORKDIR /data/projects/fate\nENV FATE_PROJECT_BASE ${WORKDIR}\nENV FATE_BASE ${WORKDIR}/fate\nENV FATE_FLOW_BASE ${WORKDIR}/fateflow\n\nADD fate.tar ${WORKDIR}\nADD docker-entrypoint.sh ${WORKDIR}\n\nRUN rm /bin/sh && ln -sf /bin/bash /bin/sh\n\nCOPY docker-entrypoint.sh /usr/local/bin/\n\nRUN chmod +x /usr/local/bin/docker-entrypoint.sh\n\nENV PYTHONPATH ${WORKDIR}/fate/python:${WORKDIR}/fateflow/python\nRUN sed -i \"s#PYTHONPATH=.*#PYTHONPATH=${PYTHONPATH}#g\" ./bin/init_env.sh\n\n# install and initialize the fate client\nRUN cd ./fate/python/fate_client && python setup.py install\nRUN flow init -c ./conf/service_conf.yaml\n\n# install the fate test\nRUN cd ./fate/python/fate_test && \\\n    sed -i \"s#data_base_dir:.*#data_base_dir: ${FATE_PROJECT_BASE}#g\" ./fate_test/fate_test_config.yaml && \\\n    sed -i \"s#fate_base:.*#fate_base: ${FATE_BASE}#g\" ./fate_test/fate_test_config.yaml && \\\n    python setup.py install\n\n# java enviroment\nRUN cd ./env/jdk/ && tar -xzf jdk-8u192.tar.gz && rm jdk-8u192.tar.gz\nENV JAVA_HOME ${WORKDIR}/env/jdk/jdk-8u192\nRUN sed -i \"s#JAVA_HOME=.*#JAVA_HOME=${JAVA_HOME}#g\" ./bin/init_env.sh\n\nRUN sed -i \"s#fateboard.datasource.jdbc-url=.*#fateboard.datasource.jdbc-url=jdbc:sqlite:${WORKDIR}/fate_sqlite.db#g\" ./fateboard/conf/application.properties\nRUN sed -i \"s#fateflow.url=.*#fateflow.url=http://localhost:9380#g\" ./fateboard/conf/application.properties\n\n# clean up things that don't need to be used in the Docker environment\nRUN sed -i \"s#venv=.*##g\" ./bin/init_env.sh\nRUN sed -i \"s#source.*venv.*##g\" ./bin/init_env.sh\n\nENTRYPOINT [\"docker-entrypoint.sh\"]\n"
}