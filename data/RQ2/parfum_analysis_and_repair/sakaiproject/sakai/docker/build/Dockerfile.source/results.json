{
  "startTime": 1674255194166,
  "endTime": 1674255194672,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 42,
        "lineEnd": 42,
        "columnStart": 4,
        "columnEnd": 165
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM maven:3.6.1-jdk-8 as build\n\nARG release=master\n\nCOPY lib/settings.xml /usr/share/maven/conf/settings.xml\nRUN mkdir /deploy\nWORKDIR /deploy\nRUN git clone https://github.com/sakaiproject/sakai.git\nWORKDIR /deploy/sakai\nRUN git checkout ${release} && mvn clean install sakai:deploy -Dmaven.test.skip=true\n\n\nFROM tomcat:9.0.20-jre8\n\nCOPY lib/server.xml /usr/local/tomcat/conf/server.xml\nCOPY lib/context.xml /usr/local/tomcat/conf/context.xml\nCOPY --from=build /deploy/components /usr/local/tomcat/components/\nCOPY --from=build /deploy/lib /usr/local/tomcat/sakai-lib/\nCOPY --from=build /deploy/webapps /usr/local/tomcat/webapps/\n\nRUN mkdir -p /usr/local/sakai/properties\n\nENV CATALINA_OPTS_MEMORY -Xms2000m -Xmx2000m\nENV CATALINA_OPTS \\\n-server \\\n-verbose:gc -XX:+PrintGCDetails -XX:+PrintGCTimeStamps -XX:+UseConcMarkSweepGC -XX:+UseParNewGC \\\n-XX:+CMSParallelRemarkEnabled -XX:+UseCompressedOops -XX:+UseCMSInitiatingOccupancyOnly -XX:CMSInitiatingOccupancyFraction=80 -XX:TargetSurvivorRatio=90 \\\n-Djava.awt.headless=true \\\n-Dsun.net.inetaddr.ttl=0 \\\n-Dsakai.component.shutdownonerror=true \\\n-Duser.language=en -Duser.country=US \\\n-Dsakai.home=/usr/local/sakai/properties -Dsakai.security=/usr/local/tomcat/sakai \\\n-Duser.timezone=US/Eastern \\\n-Dsun.net.client.defaultConnectTimeout=300000 \\\n-Dsun.net.client.defaultReadTimeout=1800000 \\\n-Dorg.apache.jasper.compiler.Parser.STRICT_QUOTE_ESCAPING=false \\\n-Dsun.lang.ClassLoader.allowArraySyntax=true \\\n-Dhttp.agent=Sakai \\\n-Djava.util.Arrays.useLegacyMergeSort=true\n\nRUN sed -i '/^common.loader\\=/ s/$/,\"\\$\\{catalina.base\\}\\/sakai-lib\\/*.jar\"/' /usr/local/tomcat/conf/catalina.properties\n\nRUN curl -f -L -o /usr/local/tomcat/lib/mysql-connector-java-5.1.47.jar https://repo1.maven.org/maven2/mysql/mysql-connector-java/5.1.47/mysql-connector-java-5.1.47.jar\n\nRUN mkdir -p /usr/local/tomcat/sakai\nCOPY lib/entrypoint.sh /entrypoint.sh\nRUN chmod +x /entrypoint.sh\nENTRYPOINT [\"/entrypoint.sh\"]\n\n"
}