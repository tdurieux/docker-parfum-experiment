{
  "startTime": 1674253519816,
  "endTime": 1674253520778,
  "originalSmells": [
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 9,
        "lineEnd": 9,
        "columnStart": 4,
        "columnEnd": 38
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 17,
        "lineEnd": 17,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 18,
        "lineEnd": 18,
        "columnStart": 4,
        "columnEnd": 33
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 19,
        "lineEnd": 19,
        "columnStart": 4,
        "columnEnd": 22
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 22,
        "lineEnd": 22,
        "columnStart": 4,
        "columnEnd": 25
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 31,
        "lineEnd": 31,
        "columnStart": 4,
        "columnEnd": 22
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 42,
        "lineEnd": 42,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 9,
        "lineEnd": 9,
        "columnStart": 4,
        "columnEnd": 38
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 17,
        "lineEnd": 17,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 18,
        "lineEnd": 18,
        "columnStart": 4,
        "columnEnd": 33
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 19,
        "lineEnd": 19,
        "columnStart": 4,
        "columnEnd": 22
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 22,
        "lineEnd": 22,
        "columnStart": 4,
        "columnEnd": 25
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 31,
        "lineEnd": 31,
        "columnStart": 4,
        "columnEnd": 22
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 42,
        "lineEnd": 42,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 9,
        "lineEnd": 9,
        "columnStart": 4,
        "columnEnd": 38
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 17,
        "lineEnd": 17,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 18,
        "lineEnd": 18,
        "columnStart": 4,
        "columnEnd": 33
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 19,
        "lineEnd": 19,
        "columnStart": 4,
        "columnEnd": 22
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 22,
        "lineEnd": 22,
        "columnStart": 4,
        "columnEnd": 25
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 31,
        "lineEnd": 31,
        "columnStart": 4,
        "columnEnd": 22
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 42,
        "lineEnd": 42,
        "columnStart": 4,
        "columnEnd": 30
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 9,
        "lineEnd": 9,
        "columnStart": 4,
        "columnEnd": 62
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 17,
        "lineEnd": 17,
        "columnStart": 4,
        "columnEnd": 51
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 18,
        "lineEnd": 18,
        "columnStart": 4,
        "columnEnd": 57
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 19,
        "lineEnd": 19,
        "columnStart": 4,
        "columnEnd": 46
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 22,
        "lineEnd": 22,
        "columnStart": 4,
        "columnEnd": 49
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 31,
        "lineEnd": 31,
        "columnStart": 4,
        "columnEnd": 46
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 42,
        "lineEnd": 42,
        "columnStart": 4,
        "columnEnd": 54
      }
    }
  ],
  "repairedDockerfile": "# --------- Image +  build & Run----------\n#docker build . -t basic1\n#docker run  -h Basic1 -ti -p 80:80 -p 22:22 -p 21:21 -p 3306:3306 -p 7000-7010:7000-7010 basic1\nFROM ubuntu:20.04\nRUN apt update\nRUN apt-get update\n\n# --------- mysql----------\nENV DEBIAN_FRONTEND=noninteractive\nRUN apt-get -q --no-install-recommends -y install mysql-server && rm -rf /var/lib/apt/lists/*;\nRUN echo [mysqld] >> /etc/mysql/my.cnf\nRUN echo bind-address=0.0.0.0 >> /etc/mysql/my.cnf\nRUN usermod -d /var/lib/mysql/ mysql\n#The queries to allow root to login remotely ar run after service startup in /startup.sh\n\n# --------- general stuff ----------\n#RUN apt-get install -y net-tools\nRUN apt-get install --no-install-recommends -y sudo && rm -rf /var/lib/apt/lists/*;\nRUN apt install --no-install-recommends -y inetutils-ping && rm -rf /var/lib/apt/lists/*;\nRUN apt install --no-install-recommends -y ftp && rm -rf /var/lib/apt/lists/*;\n\n# --------- FTP ----------\nRUN apt install --no-install-recommends -y vsftpd && rm -rf /var/lib/apt/lists/*;\nRUN mkdir /var/ftp\nRUN mkdir /var/ftp/Public\nCOPY ./assets/users.txt.bk /var/ftp/Public/users.txt.bk\nCOPY ./assets/vsftpd.conf /etc/vsftpd.conf\n# Note: Windows command line FTP does not support passive mode. use linux FTP to connect and type pass to switch to passive mode\n# Alternatively use a windows client like filzilla to connect to the FTP server\n\n# --------- ssh ----------\nRUN apt install --no-install-recommends -y ssh && rm -rf /var/lib/apt/lists/*;\nCOPY ./assets/sshd_config /etc/ssh/sshd_config\n\n# --------- users ----------\nRUN echo 'root:String001' | chpasswd\nRUN adduser --disabled-password -u 1001 --gecos \"\" abatchy & adduser --disabled-password -u 1002 --gecos \"\" john & adduser --disabled-password -u 1003 --gecos \"\" mai & adduser --disabled-password -u 1004 --gecos \"\" anne & adduser --disabled-password -u 1005 --gecos \"\" doomguy\nRUN echo 'abatchy:AqRtZ123!' | chpasswd & \"john:AqRtZ123!\" | chpasswd & \"mai:AqRtZ123!\" | chpasswd & \"doomguy:AqRtZ123!\" | chpasswd\nRUN echo 'anne:princess' | chpasswd\nRUN usermod -aG sudo anne\n\n# --------- apache ----------\nRUN apt-get -y --no-install-recommends install apache2 && rm -rf /var/lib/apt/lists/*;\nCOPY ./assets/index.html /var/www/html/index.html\n\n# --------- start ----------\nCOPY ./assets/startup.sh /startup.sh\n# EXPOSE 21 22 3306 7000-7010\nENTRYPOINT /startup.sh"
}