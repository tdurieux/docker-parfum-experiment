{
  "startTime": 1674220096420,
  "endTime": 1674220097229,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 18,
        "lineEnd": 18,
        "columnStart": 4,
        "columnEnd": 76
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 20,
        "lineEnd": 20,
        "columnStart": 4,
        "columnEnd": 80
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 21,
        "lineEnd": 21,
        "columnStart": 30,
        "columnEnd": 135
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 25,
        "lineEnd": 25,
        "columnStart": 4,
        "columnEnd": 76
      }
    },
    {
      "rule": "gpgUseBatchFlag",
      "position": {
        "lineStart": 19,
        "lineEnd": 19,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 9,
        "lineEnd": 9,
        "columnStart": 4,
        "columnEnd": 63
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 12,
        "lineEnd": 14,
        "columnStart": 4,
        "columnEnd": 115
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 9,
        "lineEnd": 9,
        "columnStart": 4,
        "columnEnd": 63
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 12,
        "lineEnd": 14,
        "columnStart": 4,
        "columnEnd": 115
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 9,
        "lineEnd": 9,
        "columnStart": 4,
        "columnEnd": 63
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 12,
        "lineEnd": 14,
        "columnStart": 4,
        "columnEnd": 115
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 9,
        "lineEnd": 9,
        "columnStart": 4,
        "columnEnd": 87
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 12,
        "lineEnd": 14,
        "columnStart": 4,
        "columnEnd": 115
      }
    }
  ],
  "repairedDockerfile": "FROM ubuntu:18.04\n\nENV TIKA_VERSION 1.24\nENV TIKA_SERVER_URL https://www.apache.org/dist/tika/tika-server-$TIKA_VERSION.jar\n\n\n\nRUN apt-get -y --fix-missing update\n\nRUN apt-get install --no-install-recommends -y gpg curl gdal-bin openjdk-8-jre-headless && rm -rf /var/lib/apt/lists/*;\n\nRUN \\\n    apt-get -y --no-install-recommends install \\\n        tesseract-ocr \\\n        tesseract-ocr-eng tesseract-ocr-ita tesseract-ocr-fra tesseract-ocr-spa tesseract-ocr-deu tesseract-ocr-rus \\\n && tesseract -v && rm -rf /var/lib/apt/lists/*;\n\nRUN \\\n    curl -f -sSL https://people.apache.org/keys/group/tika.asc -o /tmp/tika.asc \\\n && gpg --batch --import /tmp/tika.asc \\\n && curl -f -sSL \"$TIKA_SERVER_URL.asc\" -o /tmp/tika-server-${TIKA_VERSION}.jar.asc \\\n && NEAREST_TIKA_SERVER_URL=$( curl -f -sSL http://www.apache.org/dyn/closer.cgi/${TIKA_SERVER_URL#https://www.apache.org/dist/}\\?asjson\\=1 \\\n      | awk '/\"path_info\": / { pi=$2; }; /\"preferred\":/ { pref=$2; }; END { print pref \" \" pi; };' \\\n\t\t| sed -r -e 's/^\"//; s/\",$//; s/\" \"//') \\\n && echo \"Nearest mirror: $NEAREST_TIKA_SERVER_URL\" \\\n && curl -f -sSL \"$NEAREST_TIKA_SERVER_URL\" -o /tika-server-${TIKA_VERSION}.jar\n\n\nRUN apt-get -y clean autoclean \\\n    && apt-get -y autoremove \\\n    && rm -rf /var/lib/{apt,dpkg,cache,log}/\n\n# default Tika config - may be overriden by Docker Swarm config mounting\nCOPY ./tika-config.xml /tika-config.xml\nCOPY ./lexpredict-tika/target/lexpredict-tika-1.0.jar /\nRUN echo $(date) > /build.date\n\nEXPOSE 9998\nENTRYPOINT  echo \"Tika Server Docker Image built $(cat /build.date)\" \\\n\t    && echo \"Java Version:\" \\\n\t    && java -version \\\n            && echo \"Tesseract:\" \\\n            && tesseract -v \\\n            && echo \"Tika: ${TIKA_VERSION}\" \\\n            && echo \"Config:\" \\\n            && cat /tika-config.xml \\\n            && java -cp \"tika-server-${TIKA_VERSION}.jar:lexpredict-tika-1.0.jar:libs/*\" org.apache.tika.server.TikaServerCli --h 0.0.0.0 --port 9998 --config /tika-config.xml\n"
}