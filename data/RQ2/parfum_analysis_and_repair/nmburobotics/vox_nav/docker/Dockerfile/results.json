{
  "startTime": 1674248741431,
  "endTime": 1674248742463,
  "originalSmells": [
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 24,
        "lineEnd": 24,
        "columnStart": 4,
        "columnEnd": 51
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 25,
        "lineEnd": 25,
        "columnStart": 4,
        "columnEnd": 64
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 26,
        "lineEnd": 26,
        "columnStart": 4,
        "columnEnd": 58
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 27,
        "lineEnd": 27,
        "columnStart": 4,
        "columnEnd": 51
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 28,
        "lineEnd": 28,
        "columnStart": 4,
        "columnEnd": 34
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 29,
        "lineEnd": 29,
        "columnStart": 4,
        "columnEnd": 26
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 30,
        "lineEnd": 30,
        "columnStart": 4,
        "columnEnd": 38
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 24,
        "lineEnd": 24,
        "columnStart": 4,
        "columnEnd": 51
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 25,
        "lineEnd": 25,
        "columnStart": 4,
        "columnEnd": 64
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 26,
        "lineEnd": 26,
        "columnStart": 4,
        "columnEnd": 58
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 27,
        "lineEnd": 27,
        "columnStart": 4,
        "columnEnd": 51
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 28,
        "lineEnd": 28,
        "columnStart": 4,
        "columnEnd": 34
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 29,
        "lineEnd": 29,
        "columnStart": 4,
        "columnEnd": 26
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 30,
        "lineEnd": 30,
        "columnStart": 4,
        "columnEnd": 38
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 24,
        "lineEnd": 24,
        "columnStart": 4,
        "columnEnd": 51
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 25,
        "lineEnd": 25,
        "columnStart": 4,
        "columnEnd": 64
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 26,
        "lineEnd": 26,
        "columnStart": 4,
        "columnEnd": 58
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 27,
        "lineEnd": 27,
        "columnStart": 4,
        "columnEnd": 51
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 28,
        "lineEnd": 28,
        "columnStart": 4,
        "columnEnd": 34
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 29,
        "lineEnd": 29,
        "columnStart": 4,
        "columnEnd": 26
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 30,
        "lineEnd": 30,
        "columnStart": 4,
        "columnEnd": 38
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 24,
        "lineEnd": 24,
        "columnStart": 4,
        "columnEnd": 75
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 25,
        "lineEnd": 25,
        "columnStart": 4,
        "columnEnd": 88
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 26,
        "lineEnd": 26,
        "columnStart": 4,
        "columnEnd": 82
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 27,
        "lineEnd": 27,
        "columnStart": 4,
        "columnEnd": 75
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 28,
        "lineEnd": 28,
        "columnStart": 4,
        "columnEnd": 58
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 29,
        "lineEnd": 29,
        "columnStart": 4,
        "columnEnd": 50
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 30,
        "lineEnd": 30,
        "columnStart": 4,
        "columnEnd": 62
      }
    }
  ],
  "repairedDockerfile": "## Build with:\n##   docker build -t lcas.lincoln.ac.uk/lcas/vox_nav:docker .\n##\n## Run with:\n##   docker-compose up\n##\n## Kill with:\n##   docker-compose down\n\nFROM tiryoh/ros2-desktop-vnc:foxy\nLABEL maintainer=\"Fetullah Atas<fetulahatas1@gmail.com>\"\n\nRUN apt-get update; apt-get -y upgrade\n\n\n\n# Creating ros2_ws\nRUN mkdir -p ~/ros2_ws/src\nRUN /bin/bash -c \"source /opt/ros/foxy/setup.bash && \\\n                  cd ~/ros2_ws/ && \\\n                  colcon build --symlink-install --cmake-args -DCMAKE_BUILD_TYPE=Release --parallel-workers 4\"\n\n# Installing dependecies\nRUN . /opt/ros/foxy/setup.sh; \\\n    apt install --no-install-recommends -y python3-colcon-common-extensions && \\\n    apt install --no-install-recommends -y python3-rosdep2 xdotool psmisc gnome-terminal && \\\n    apt install --no-install-recommends -y ros-foxy-twist-mux ros-foxy-navigation2 && \\\n    apt install --no-install-recommends -y python3-colcon-common-extensions && \\\n    apt install --no-install-recommends -y python3-vcstool && \\\n    apt install --no-install-recommends -y xdotool && \\\n    apt install --no-install-recommends -y coinor-libipopt-dev && \\\n    rosdep update && cd ~/ros2_ws && \\\n    rosdep install -y -r -q --from-paths src --ignore-src --rosdistro foxy && rm -rf /var/lib/apt/lists/*;\n\n# Cloning repos and building\nRUN cd ~/ros2_ws/src && rm -rf vox_nav\nRUN cd ~/ros2_ws && wget https://raw.githubusercontent.com/jediofgever/vox_nav/foxy/underlay.repos && vcs import src < underlay.repos --recursive\nRUN cd ~/ros2_ws && vcs pull src\n\n# install CUDA\nRUN /bin/bash -c 'export cuda=11.4 ; \\\n                  source ~/ros2_ws/src/vox_nav/scripts/install_cuda_ubuntu.sh; \\\n                  echo \"export PATH=/usr/local/cuda-11.4/bin${PATH:+:${PATH}}\" >> /home/ubuntu/.bashrc;  \\\n                  echo \"export LD_LIBRARY_PATH=/usr/local/cuda-11.4/lib64${LD_LIBRARY_PATH:+:${LD_LIBRARY_PATH}}\" >> /home/ubuntu/.bashrc;'\n\nRUN /bin/bash -c 'cd ~/ros2_ws; \\\n                  source /opt/ros/foxy/setup.bash; \\\n                  rosdep install -y -r -q --from-paths src --ignore-src --rosdistro foxy; \\\n                  export PATH=/usr/local/cuda-11.4/bin${PATH:+:${PATH}}; \\\n                  export LD_LIBRARY_PATH=/usr/local/cuda-11.4/lib64${LD_LIBRARY_PATH:+:${LD_LIBRARY_PATH}}; \\\n                  colcon build --symlink-install --cmake-args -DCMAKE_BUILD_TYPE=Release -DACADOS_WITH_QPOASES=ON -DACADO_CODE_IS_READY=ON -DWITH_IPOPT=true --packages-select ompl casadi; \\\n                  sudo cp install/ompl/lib/libompl.so* /usr/local/lib/; \\\n                  sudo cp install/casadi/lib/libcasadi.so* /usr/local/lib/; \\  \n                  source install/setup.bash ; \\\n                  colcon build --symlink-install --cmake-args -DCMAKE_BUILD_TYPE=Release -DACADOS_WITH_QPOASES=ON -DACADO_CODE_IS_READY=ON -DWITH_IPOPT=true --packages-skip-regex archive --packages-skip vox_nav_control vox_nav_cupoch; \\\n                  source /opt/ros/foxy/setup.bash; \\\n                  cd ~/ros2_ws; \\\n                  source build/ACADO/acado_env.sh; \\\n                  source install/setup.bash ; \\\n                  colcon build --symlink-install --cmake-args -DCMAKE_BUILD_TYPE=Release -DACADOS_WITH_QPOASES=ON -DACADO_CODE_IS_READY=ON -DWITH_IPOPT=true --packages-select vox_nav_control; \\\n                  source ~/ros2_ws/install/setup.bash'\n\nRUN /bin/bash -c '. /opt/ros/foxy/setup.bash; cd /home/ubuntu/ros2_ws; \\\n                  echo \"source /home/ubuntu/ros2_ws/install/setup.bash\" >> /home/ubuntu/.bashrc; \\\n                  echo \"export NO_AT_BRIDGE=1\" >> /home/ubuntu/.bashrc'\n# export NO_AT_BRIDGE fixes an error in the rqt:\n# \"AT-SPI: Error retrieving accessibility bus address: org.freedesktop.DBus.Error.ServiceUnknown:\n# The name org.a11y.Bus was not provided by any .service files\"\n\nRUN cd /tmp && curl -fOL https://github.com/cdr/code-server/releases/download/v3.12.0/code-server_3.12.0_amd64.deb && dpkg -i code-server_3.12.0_amd64.deb && rm code-server_3.12.0_amd64.deb\nRUN bash -c 'echo -e \"[supervisord]\\nredirect_stderr=true\\nstopsignal=QUIT\\nautorestart=true\\ndirectory=/root\\n\\n[program:codeserver]\\ndirectory=/home/ubuntu\\ncommand=/usr/bin/code-server --auth none --bind-addr 0.0.0.0:8888\\nuser=ubuntu\\nenvironment=DISPLAY=:1,HOME=/home/ubuntu,USER=ubuntu\" > /etc/supervisor/conf.d/codeserver.conf'"
}