{
  "startTime": 1674252926230,
  "endTime": 1674252927597,
  "originalSmells": [
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 36,
        "lineEnd": 36,
        "columnStart": 4,
        "columnEnd": 31
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "# Copyright (C) 2019-2020 Zilliz. All rights reserved.\n#\n# Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance\n# with the License. You may obtain a copy of the License at\n#\n# http://www.apache.org/licenses/LICENSE-2.0\n#\n# Unless required by applicable law or agreed to in writing, software distributed under the License\n# is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express\n# or implied. See the License for the specific language governing permissions and limitations under the License.\n\nFROM milvusdb/openblas:centos7-20210706\n\nRUN yum install -y epel-release centos-release-scl-rh && yum install -y wget curl which && \\\n    wget -qO- \"https://cmake.org/files/v3.18/cmake-3.18.6-Linux-x86_64.tar.gz\" | tar --strip-components=1 -xz -C /usr/local && \\\n    yum install -y git make automake openssl-devel zlib-devel \\\n      libcurl-devel python3-devel \\\n      devtoolset-7-gcc devtoolset-7-gcc-c++ devtoolset-7-gcc-gfortran \\\n      llvm-toolset-7.0-clang llvm-toolset-7.0-clang-tools-extra \\\n      ccache lcov libtool m4 autoconf automake && \\\n      rm -rf /var/cache/yum/* && \\\n    echo \"source scl_source enable devtoolset-7\" >> /etc/profile.d/devtoolset-7.sh && \\\n    echo \"source scl_source enable llvm-toolset-7.0\" >> /etc/profile.d/llvm-toolset-7.sh\n\nENV CLANG_TOOLS_PATH=\"/opt/rh/llvm-toolset-7.0/root/usr/bin\"\n\n# Install tbb\nRUN source /etc/profile.d/devtoolset-7.sh && \\\n    git clone https://github.com/wjakob/tbb.git && \\\n    cd tbb/build && \\\n    cmake .. && make -j && make install && \\\n    cd ../../ && rm -rf tbb/\n\n# Install boost\nRUN source /etc/profile.d/devtoolset-7.sh && \\\n    wget -q https://boostorg.jfrog.io/artifactory/main/release/1.65.1/source/boost_1_65_1.tar.gz && \\\n    tar zxf boost_1_65_1.tar.gz && cd boost_1_65_1 && \\\n    ./bootstrap.sh --prefix=/usr/local --with-toolset=gcc --without-libraries=python && \\\n    ./b2 -j2 --prefix=/usr/local --without-python toolset=gcc install && \\\n    cd ../ && rm -rf ./boost_1_65_1* && rm boost_1_65_1.tar.gz\n\nENV LD_LIBRARY_PATH /usr/local/lib:$LD_LIBRARY_PATH\n\n# Install Go\nENV GOPATH /go\nENV GOROOT /usr/local/go\nENV GO111MODULE on\nENV PATH $GOPATH/bin:$GOROOT/bin:$PATH\nRUN mkdir -p /usr/local/go && wget -qO- \"https://golang.org/dl/go1.18.3.linux-amd64.tar.gz\" | tar --strip-components=1 -xz -C /usr/local/go && \\\n    mkdir -p \"$GOPATH/src\" \"$GOPATH/bin\" && \\\n    curl -sSfL https://raw.githubusercontent.com/golangci/golangci-lint/master/install.sh | sh -s -- -b ${GOPATH}/bin v1.46.2 && \\\n    go install github.com/ramya-rao-a/go-outline@latest && \\\n    go install golang.org/x/tools/gopls@latest && \\\n    go install github.com/uudashr/gopkgs/v2/cmd/gopkgs@latest && \\\n    go install github.com/go-delve/delve/cmd/dlv@latest && \\\n    go install honnef.co/go/tools/cmd/staticcheck@2022.1 && \\\n    go clean --modcache && \\\n    chmod -R 777 \"$GOPATH\" && chmod -R a+w $(go env GOTOOLDIR)\n\nRUN ln -s /go/bin/dlv /go/bin/dlv-dap\n\nRUN echo 'root:root' | chpasswd\n\n# refer: https://code.visualstudio.com/docs/remote/containers-advanced#_avoiding-extension-reinstalls-on-container-rebuild\nRUN mkdir -p /home/milvus/.vscode-server/extensions \\\n        /home/milvus/.vscode-server-insiders/extensions \\\n    && chmod -R 777 /home/milvus\n\nCOPY --chown=0:0 build/docker/builder/entrypoint.sh /\n\nRUN wget -qO- \"https://github.com/jeffoverflow/autouseradd/releases/download/1.2.0/autouseradd-1.2.0-amd64.tar.gz\" | tar xz -C / --strip-components 1\n\nRUN wget -O /tini https://github.com/krallin/tini/releases/download/v0.19.0/tini && \\\n    chmod +x /tini\n\nENTRYPOINT [ \"/tini\", \"--\", \"autouseradd\", \"--user\", \"milvus\", \"--\", \"/entrypoint.sh\" ]\nCMD [\"tail\", \"-f\", \"/dev/null\"]\n"
}