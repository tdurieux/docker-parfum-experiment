{
  "startTime": 1674255514299,
  "endTime": 1674255514963,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 20,
        "lineEnd": 20,
        "columnStart": 4,
        "columnEnd": 70
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 17,
        "lineEnd": 17,
        "columnStart": 139,
        "columnEnd": 165
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 17,
        "lineEnd": 17,
        "columnStart": 174,
        "columnEnd": 207
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 17,
        "lineEnd": 17,
        "columnStart": 216,
        "columnEnd": 251
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 17,
        "lineEnd": 17,
        "columnStart": 260,
        "columnEnd": 292
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM registry.cern.ch/cmsweb/cmsweb-base:20220601-stable as web-builder\nMAINTAINER Valentin Kuznetsov vkuznet@gmail.com\n\nENV WDIR=/data\nENV USER=_cmsweb\n\n# create bashs link to bash\n#RUN ln -s /bin/bash /usr/bin/bashs\n# add new user\nRUN useradd ${USER} && install -o ${USER} -d ${WDIR} && echo \"%$USER ALL=(ALL) NOPASSWD:ALL\" >> /etc/sudoers\n# switch to user\nUSER ${USER}\n\n# add fake host certs since we'll manage them at run time\n\nWORKDIR $WDIR\n\nRUN sudo yum install -y git jq python3-devel python3-pip && sudo yum update -y && sudo yum clean all && sudo rm -rf /var/cache/yum && sudo pip3 install --no-cache-dir --upgrade pip && sudo pip3 install --no-cache-dir --upgrade setuptools && sudo pip3 install --no-cache-dir python-openstackclient && sudo pip3 install --no-cache-dir python-manilaclient\n\n# Install latest kubectl\nRUN curl -f -k -L -O https://dl.google.com/go/go1.17.3.linux-amd64.tar.gz && tar xfz go1.17.3.linux-amd64.tar.gz && rm go1.17.3.linux-amd64.tar.gz\nENV GOROOT=$WDIR/go\nENV PATH=\"${GOROOT}/bin:${WDIR}:${PATH}\"\n\nENV GOPATH=$WDIR/gopath\nRUN mkdir -p $GOPATH\nENV PATH=\"${PATH}:${GOROOT}/bin:${WDIR}\"\nRUN git clone https://github.com/dmwm/cmsweb-exporters.git\n\nWORKDIR $WDIR/cmsweb-exporters/openstack\nRUN go mod tidy && go build quota_exporter.go && cp quota_exporter $WDIR && cp quota.sh $WDIR\n\nWORKDIR $WDIR\n"
}