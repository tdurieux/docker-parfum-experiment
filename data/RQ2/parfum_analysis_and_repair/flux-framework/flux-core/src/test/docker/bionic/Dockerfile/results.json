{
  "startTime": 1674248987162,
  "endTime": 1674248988437,
  "originalSmells": [
    {
      "rule": "configureShouldUseBuildFlag",
      "position": {
        "lineStart": 133,
        "lineEnd": 133,
        "columnStart": 4,
        "columnEnd": 46
      }
    },
    {
      "rule": "configureShouldUseBuildFlag",
      "position": {
        "lineStart": 139,
        "lineEnd": 139,
        "columnStart": 4,
        "columnEnd": 29
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM ubuntu:bionic\n\nLABEL maintainer=\"Tom Scogland <scogland1@llnl.gov>\"\n\n# Update pkg caches, install latest pkg utils:\nRUN apt-get update \\\n && apt-get -qq install -y --no-install-recommends \\\n        apt-utils \\\n && rm -rf /var/lib/apt/lists/*\n\n# Utilities\nRUN apt-get update \\\n && apt-get -qq install -y --no-install-recommends \\\n        locales \\\n        ca-certificates \\\n        wget \\\n        man \\\n        git \\\n        flex \\\n        ssh \\\n        sudo \\\n        vim \\\n        luarocks \\\n        munge \\\n        lcov \\\n        ccache \\\n        lua5.2 \\\n        mpich \\\n        valgrind \\\n        jq \\\n && rm -rf /var/lib/apt/lists/*\n\n# Compilers, autotools\nRUN apt-get update \\\n && apt-get -qq install -y --no-install-recommends \\\n        build-essential \\\n        pkg-config \\\n        autotools-dev \\\n        libtool \\\n        autoconf \\\n        automake \\\n        make \\\n        cmake \\\n        clang-6.0 \\\n        clang-tidy \\\n        gcc-8 \\\n        g++-8 \\\n && rm -rf /var/lib/apt/lists/*\n\n# Python\n# NOTE: sudo pip install is necessary to get differentiated installations of\n# python binary components for multiple python3 variants, --ignore-installed\n# makes it ignore local versions of the packages if your home directory is\n# mapped into the container and contains the same libraries\nRUN apt-get update \\\n && apt-get -qq install -y --no-install-recommends \\\n\tlibffi-dev \\\n        python3-dev \\\n        python3.7-dev \\\n        python3.8-dev \\\n        python3-pip \\\n        python3-setuptools \\\n        python3-wheel \\\n && rm -rf /var/lib/apt/lists/*\n\nRUN for PY in python3.6 python3.7 python3.8 ; do \\\n        sudo $PY -m pip install --upgrade --ignore-installed \\\n\t    \"markupsafe==2.0.0\" \\\n            coverage cffi six pyyaml \"jsonschema>=2.6,<4.0\" \\\n            sphinx sphinx-rtd-theme sphinxcontrib-spelling; \\\n    done ; \\\n    apt-get -qq purge -y python3-pip \\\n && apt-get -qq autoremove -y\n\n# Other deps\nRUN apt-get update \\\n && apt-get -qq install -y --no-install-recommends \\\n        libsodium-dev \\\n        libzmq3-dev \\\n        libczmq-dev \\\n        libjansson-dev \\\n        libmunge-dev \\\n        libncursesw5-dev \\\n        liblua5.2-dev \\\n        liblz4-dev \\\n        libsqlite3-dev \\\n        uuid-dev \\\n        libhwloc-dev \\\n        libmpich-dev \\\n        libs3-dev \\\n        libevent-dev \\\n        libarchive-dev \\\n && rm -rf /var/lib/apt/lists/*\n\n# Testing utils and libs\nRUN apt-get update \\\n && apt-get -qq install -y --no-install-recommends \\\n        faketime \\\n        libfaketime \\\n        pylint \\\n        cppcheck \\\n        enchant \\\n        aspell \\\n        aspell-en \\\n && rm -rf /var/lib/apt/lists/*\n\nRUN locale-gen en_US.UTF-8\n\n# NOTE: luaposix installed by rocks due to Ubuntu bug: #1752082 https://bugs.launchpad.net/ubuntu/+source/lua-posix/+bug/1752082\nRUN luarocks install luaposix\n\n# Install caliper by hand for now:\nRUN mkdir caliper \\\n && cd caliper \\\n && wget -O - https://github.com/LLNL/Caliper/archive/v1.7.0.tar.gz | tar xvz --strip-components 1 \\\n && mkdir build \\\n && cd build \\\n && CC=gcc CXX=g++ cmake .. -DCMAKE_INSTALL_PREFIX=/usr \\\n && make -j 4 \\\n && make install \\\n && cd ../.. \\\n && rm -rf caliper\n\n# Install openpmix, prrte\nRUN mkdir prrte \\\n && cd prrte \\\n && git clone https://github.com/openpmix/openpmix.git \\\n && git clone https://github.com/openpmix/prrte.git \\\n && ls -l \\\n && set -x \\\n && cd openpmix \\\n && git checkout fefaed568f33bf86f28afb6e45237f1ec5e4de93 \\\n && ./autogen.pl \\\n && ./configure --build=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\" --prefix=/usr --disable-static && make -j 4 install \\\n && ldconfig \\\n && cd .. \\\n && cd prrte \\\n && git checkout 477894f4720d822b15cab56eee7665107832921c \\\n && ./autogen.pl \\\n && ./configure --build=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\" --prefix=/usr && make -j 4 install \\\n && cd ../.. \\\n && rm -rf prrte\n\nENV LANG=C.UTF-8\n"
}