{
  "startTime": 1674251292930,
  "endTime": 1674251293955,
  "originalSmells": [
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 13,
        "lineEnd": 13,
        "columnStart": 7,
        "columnEnd": 37
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 26,
        "lineEnd": 36,
        "columnStart": 4,
        "columnEnd": 13
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 13,
        "lineEnd": 13,
        "columnStart": 7,
        "columnEnd": 37
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 26,
        "lineEnd": 36,
        "columnStart": 4,
        "columnEnd": 13
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 26,
        "lineEnd": 36,
        "columnStart": 4,
        "columnEnd": 13
      }
    }
  ],
  "repairedDockerfile": "FROM maven:3-jdk-8\n\nLABEL maintainer=\"Peter Thomas\"\nLABEL url=\"https://github.com/intuit/karate/tree/master/karate-docker/karate-firefox\"\n\n#RUN echo uname -a\n#\n#RUN echo \"deb http://downloads.sourceforge.net/project/ubuntuzilla/mozilla/apt all main\" | tee -a /etc/apt/sources.list > /dev/null \\\n#    && apt-key adv --recv-keys --keyserver keyserver.ubuntu.com B7B9C16F2667CA5C \\\n#    && apt-get update \\\n#    && apt-get install firefox-mozilla-build\n\nRUN apt-get update \\\n    && apt-get install --no-install-recommends -y firefox-esr && rm -rf /var/lib/apt/lists/*;\n\n# GeckoDriver v0.19.1\nRUN wget -q \"https://github.com/mozilla/geckodriver/releases/download/v0.27.0/geckodriver-v0.27.0-linux64.tar.gz\" -O /tmp/geckodriver.tgz \\\n    && tar zxf /tmp/geckodriver.tgz -C /usr/local/bin/ \\\n    && rm /tmp/geckodriver.tgz\n\n\nRUN useradd firefox --shell /bin/bash --create-home \\\n  && usermod -a -G sudo firefox \\\n  && echo 'ALL ALL = (ALL) NOPASSWD: ALL' >> /etc/sudoers \\\n  && echo 'firefox:karate' | chpasswd\n\nRUN apt-get install -y --no-install-recommends \\\n  xvfb \\\n  x11vnc \\\n  xterm \\\n  fluxbox \\\n  wmctrl \\\n  supervisor \\\n  socat \\\n  ffmpeg \\\n  locales \\\n  locales-all && rm -rf /var/lib/apt/lists/*;\n\nENV LANG en_US.UTF-8\n\nRUN apt-get clean \\\n  && rm -rf /var/cache/* /var/log/apt/* /var/lib/apt/lists/* /tmp/* \\\n  && mkdir ~/.vnc \\\n  && x11vnc -storepasswd karate ~/.vnc/passwd \\\n  && locale-gen ${LANG} \\\n  && dpkg-reconfigure --frontend noninteractive locales \\\n  && update-locale LANG=${LANG}\n\nCOPY supervisord.conf /etc\nCOPY entrypoint.sh /\nRUN chmod +x /entrypoint.sh\n\nEXPOSE 5900 4444\n\nADD target/karate.jar /\nADD target/repository /root/.m2/repository\n\nCMD [\"/bin/bash\",\"/entrypoint.sh\"]\n"
}