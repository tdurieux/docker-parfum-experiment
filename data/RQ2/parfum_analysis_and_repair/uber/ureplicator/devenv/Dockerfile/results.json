{
  "startTime": 1674220050610,
  "endTime": 1674220051928,
  "originalSmells": [
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 41,
        "lineEnd": 41,
        "columnStart": 0,
        "columnEnd": 60
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "#\n# Copyright (C) 2015-2019 Uber Technologies, Inc. (streaming-data@uber.com)\n#\n# Licensed under the Apache License, Version 2.0 (the \"License\");\n# you may not use this file except in compliance with the License.\n# You may obtain a copy of the License at\n#\n#         http://www.apache.org/licenses/LICENSE-2.0\n#\n# Unless required by applicable law or agreed to in writing, software\n# distributed under the License is distributed on an \"AS IS\" BASIS,\n# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n# See the License for the specific language governing permissions and\n# limitations under the License.\n#\n\nFROM openjdk:8-jre\n#\n# Copyright (C) 2015-2017 Uber Technologies, Inc. (streaming-data@uber.com)\n#\n# Licensed under the Apache License, Version 2.0 (the \"License\");\n# you may not use this file except in compliance with the License.\n# You may obtain a copy of the License at\n#\n#         http://www.apache.org/licenses/LICENSE-2.0\n#\n# Unless required by applicable law or agreed to in writing, software\n# distributed under the License is distributed on an \"AS IS\" BASIS,\n# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n# See the License for the specific language governing permissions and\n# limitations under the License.\n#\n\nENV DEBIAN_FRONTEND noninteractive\nENV SCALA_VERSION 2.11\nENV KAFKA_VERSION 1.1.1\nENV KAFKA_HOME /opt/kafka_\"$SCALA_VERSION\"-\"$KAFKA_VERSION\"\nENV DOWNLOAD_ZOOKEEPER http://archive.apache.org/dist/zookeeper/zookeeper-3.4.3/zookeeper-3.4.3.tar.gz\n\n# Install Kafka, Zookeeper and other needed things, ignore apt-get update error (jessie-backports is no longer available)\nRUN apt-get update || true && \\\n apt-get install --no-install-recommends -y zookeeper wget supervisor dnsutils netcat && \\\nrm -rf /var/lib/apt/lists/* && \\\napt-get clean\n\nRUN wget -q https://archive.apache.org/dist/kafka/\"$KAFKA_VERSION\"/kafka_\"$SCALA_VERSION\"-\"$KAFKA_VERSION\".tgz -O /tmp/kafka_\"$SCALA_VERSION\"-\"$KAFKA_VERSION\".tgz && \\\ntar xfz /tmp/kafka_\"$SCALA_VERSION\"-\"$KAFKA_VERSION\".tgz -C /opt && \\\nrm /tmp/kafka_\"$SCALA_VERSION\"-\"$KAFKA_VERSION\".tgz\n\nADD scripts/start-kafka.sh /usr/bin/start-kafka.sh\n\nRUN mkdir /usr/kafka\nADD server1.properties /usr/kafka/server1.properties\nADD server2.properties /usr/kafka/server2.properties\n\nRUN echo \"advertised.host.name=devenv\" >> /usr/kafka/server1.properties\nRUN echo \"advertised.host.name=devenv\" >> /usr/kafka/server2.properties\n\nADD produce-data-to-kafka-topic-dummyTopic.sh /usr/kafka/produce-data-to-kafka-topic-dummyTopic.sh\nADD dummyTopicData.log /usr/kafka/dummyTopicData.log\n\n# Supervisor config\nADD supervisor/kafka.conf supervisor/zookeeper.conf /etc/supervisor/conf.d/\n\n# 2181 is zookeeper, 9093,9094 is kafka\nEXPOSE 2181 9093 9094\n\n# hack for advertised.host.name\nRUN echo \"127.0.0.1 devenv\" >> /etc/hosts\nENV PATH=\"/usr/share/zookeeper/bin:${PATH}\"\n\n\nWORKDIR /usr/src/app\nCOPY . /usr/src/app\n\nCMD [\"supervisord\", \"-n\"]\n"
}