FROM txo-sets-docker-local.artifactory.swg-devops.com/etl-mgr/spark-py:2.4.5

COPY db2-jars/* /opt/spark/jars/
COPY cos-jars/* /opt/cos/

WORKDIR /app

RUN python3 -m pip install jsonPath-ng requests jaydebeapi cython numpy ibm_db --no-cache-dir
RUN python3 -m pip install pandas PyJwt ibm-cos-sdk
RUN python3 -m pip install JPype1==0.6.3 --force-reinstall

USER root
RUN chmod -R 775 .