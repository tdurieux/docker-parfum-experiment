{
  "startTime": 1674219779722,
  "endTime": 1674219780957,
  "originalSmells": [
    {
      "rule": "configureShouldUseBuildFlag",
      "position": {
        "lineStart": 28,
        "lineEnd": 28,
        "columnStart": 4,
        "columnEnd": 35
      }
    },
    {
      "rule": "configureShouldUseBuildFlag",
      "position": {
        "lineStart": 39,
        "lineEnd": 51,
        "columnStart": 4,
        "columnEnd": 31
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 37,
        "lineEnd": 37,
        "columnStart": 4,
        "columnEnd": 38
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 37,
        "lineEnd": 37,
        "columnStart": 4,
        "columnEnd": 38
      }
    }
  ],
  "repairedDockerfile": "# The MPICH example has a smaller scope than the OpenMPI example. We want to\n# provide an MPICH build that works on a single node and (via ch-fromhost\n# trickery) on Cray Aries systems. That's it for now.\n#\n# We build MPICH rather than install the RPM to get a bare bones build.\n#\n# ch-test-scope: full\n\nFROM almalinux8\n\nRUN dnf install -y --setopt=install_weak_deps=false \\\n                automake \\\n                file \\\n                gcc \\\n                gcc-c++ \\\n                gcc-gfortran \\\n                git \\\n                make \\\n                wget \\\n && dnf clean all\n\nWORKDIR /usr/local/src\n\n# We currently need our own patched patchelf; see issue #256.\nRUN git clone https://github.com/hpc/patchelf.git \\\n && cd patchelf \\\n && git checkout shrink-soname \\\n && ./bootstrap.sh \\\n && ./configure --build=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\" --prefix=/usr/local \\\n && make install \\\n && rm -Rf ../patchelf\n\n# Forcing ch3 instead of the default ch4 as the latter requires ucx or\n# libfabric to be installed.\nARG MPI_VERSION=3.4.1\nARG MPI_URL=http://www.mpich.org/static/downloads/${MPI_VERSION}\nRUN wget -nv ${MPI_URL}/mpich-${MPI_VERSION}.tar.gz \\\n && tar xf mpich-${MPI_VERSION}.tar.gz \\\n && cd mpich-${MPI_VERSION} \\\n && CFLAGS=-O3 \\\n    CXXFLAGS=-O3 \\\n    ./configure --build=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\" \\\n\n    --prefix=/usr/local \\\n                --disable-cxx \\\n                --disable-fortran \\\n                --disable-threads \\\n                --disable-rpath \\\n                --disable-static \\\n                --disable-wrapper-rpath \\\n                --with-device=ch3 \\\n                --without-ibverbs \\\n                --without-libfabric \\\n                --without-slurm \\\n && make -j$(getconf _NPROCESSORS_ONLN) install \\\n && rm -Rf ../mpich-${MPI_VERSION}* && rm mpich-${MPI_VERSION}.tar.gz\nRUN ldconfig\n"
}