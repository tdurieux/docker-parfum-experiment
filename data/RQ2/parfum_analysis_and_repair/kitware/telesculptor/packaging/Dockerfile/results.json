{
  "startTime": 1674249303970,
  "endTime": 1674249304738,
  "originalSmells": [
    {
      "rule": "configureShouldUseBuildFlag",
      "position": {
        "lineStart": 44,
        "lineEnd": 44,
        "columnStart": 4,
        "columnEnd": 15
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 41,
        "lineEnd": 41,
        "columnStart": 4,
        "columnEnd": 24
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "# The prupose of this Dockerfile is to create a container to build\n# the TeleSculptor package on Linux in a clean environment.\n# To build the package and extract it from the container, run the following\n#\n#     $ docker build -t telesculptor .\n#     $ docker create -ti --name tempts telesculptor bash\n#     $ docker cp tempts:/TeleSculptor/bld/TeleSculptor-1.0.0-Linux-x86_64.sh .\n#     $ docker rm -fv tempts\n\n# Use a base image with CUDA development libraries\nFROM nvidia/cuda:9.2-devel-ubuntu18.04\n\n# Specify which TeleSculptor branch to build\nARG branch=release\n\n# Install required system packages to build TeleSculptor\n# Everything else is built from Fletch\nRUN apt-get update && DEBIAN_FRONTEND=noninteractive \\\napt-get install -y --no-install-recommends \\\nbuild-essential file git \\\nwget automake \\\nlibgl1-mesa-dev libxt-dev libexpat1-dev libgtk2.0-dev liblapack-dev \\\nlibx11-xcb-dev libxcb1-dev libxcb-glx0-dev libxkbcommon-x11-dev \\\npython3-dev python3-sphinx python3-sphinx-rtd-theme && \\\nrm -rf /var/lib/apt/lists/*\n\n# Install CMake 3.15\nRUN wget --no-check-certificate \\\nhttps://github.com/Kitware/CMake/releases/download/v3.15.1/cmake-3.15.1-Linux-x86_64.sh \\\n&& chmod +x cmake-3.15.1-Linux-x86_64.sh \\\n&& ./cmake-3.15.1-Linux-x86_64.sh --skip-license \\\n&& rm -rf cmake-3.15.1-Linux-x86_64.sh\n\n# Set Python3 as the default\n# Make sure `python` is available and calls `python3`\n# Some build steps fail without `python` available\nRUN update-alternatives --install /usr/bin/python python /usr/bin/python3 10\n\n# patchelf packaged for Ubuntu 18.04 has bugs that interfer with TeleSculptor\n# packaging. Build a newer version from source instead.\nRUN wget https://github.com/NixOS/patchelf/archive/0.11.tar.gz\nRUN tar -xzf 0.11.tar.gz && rm 0.11.tar.gz\nWORKDIR patchelf-0.11\nRUN ./bootstrap.sh\nRUN ./configure --build=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\"\nRUN make install\nWORKDIR ..\n\n# Clone the source code from Git\nRUN git clone -b ${branch} https://github.com/Kitware/TeleSculptor.git TeleSculptor/src\n\n# Make a build directory and set it as the working directory\nRUN mkdir TeleSculptor/bld\nWORKDIR TeleSculptor/bld\n\n# Configure with CMake\n# Turn on options for a full-featured build\nRUN cmake ../src -DTELESCULPTOR_ENABLE_CUDA=ON \\\n                 -DTELESCULPTOR_ENABLE_PYTHON=ON \\\n                 -DTELESCULPTOR_ENABLE_MANUALS=ON\n\n# run the build step with onre more than the number of available processors\nRUN LD_LIBRARY_PATH=/TeleSculptor/bld/external/fletch-build/install/lib && \\\nmake -j$((`nproc`+1))\n#end of Dockerfile\n"
}