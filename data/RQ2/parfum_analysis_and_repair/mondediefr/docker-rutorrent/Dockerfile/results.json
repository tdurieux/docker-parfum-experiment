{
  "startTime": 1674252272652,
  "endTime": 1674252273544,
  "originalSmells": [
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 18,
        "lineEnd": 18,
        "columnStart": 5,
        "columnEnd": 31
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM alpine:3.16 AS builder\n\nARG UNRAR_VER=6.1.7\n\nRUN apk --update --no-cache add \\\n    autoconf \\\n    automake \\\n    binutils \\\n    build-base \\\n    cmake \\\n    cppunit-dev \\\n    curl-dev \\\n    libtool \\\n    linux-headers \\\n    zlib-dev \\\n  # Install unrar from source\n  && cd /tmp \\\n  && wget https://www.rarlab.com/rar/unrarsrc-${UNRAR_VER}.tar.gz -O /tmp/unrar.tar.gz \\\n  && tar -xzf /tmp/unrar.tar.gz \\\n  && cd unrar \\\n  && make -f makefile \\\n  && install -Dm 755 unrar /usr/bin/unrar && rm /tmp/unrar.tar.gz\n\nFROM alpine:3.16\n\nLABEL description=\"rutorrent based on alpinelinux\" \\\n      maintainer=\"magicalex <magicalex@mondedie.fr>\"\n\nARG TARGETPLATFORM\nARG FILEBOT=false\nARG FILEBOT_VER=4.9.6\n\nENV UID=991 \\\n    GID=991 \\\n    PORT_RTORRENT=45000 \\\n    DHT_RTORRENT=off \\\n    CHECK_PERM_DATA=true \\\n    FILEBOT_RENAME_METHOD=symlink \\\n    FILEBOT_LANG=fr \\\n    FILEBOT_CONFLICT=skip \\\n    HTTP_AUTH=false\n\nCOPY --from=builder /usr/bin/unrar /usr/bin\n\nRUN apk --update --no-cache add \\\n    bash \\\n    curl \\\n    curl-dev \\\n    ffmpeg \\\n    ffmpeg-dev \\\n    findutils \\\n    git \\\n    libmediainfo \\\n    libmediainfo-dev \\\n    libzen \\\n    libzen-dev \\\n    mediainfo \\\n    mktorrent \\\n    nginx \\\n    openssl \\\n    p7zip \\\n    php8 \\\n    php8-bcmath \\\n    php8-ctype \\\n    php8-curl \\\n    php8-fpm \\\n    php8-mbstring \\\n    php8-opcache \\\n    php8-pecl-apcu \\\n    php8-phar \\\n    php8-session \\\n    php8-sockets \\\n    php8-zip \\\n    rtorrent \\\n    s6 \\\n    sox \\\n    su-exec \\\n    unzip \\\n  # Install rutorrent\n  && git clone --recurse-submodules https://github.com/Novik/ruTorrent.git /rutorrent/app \\\n  && git clone https://github.com/nelu/rutorrent-filemanager.git /tmp/filemanager \\\n  && git clone https://github.com/Micdu70/geoip2-rutorrent.git /rutorrent/app/plugins/geoip2 \\\n  && cp -r /tmp/filemanager /rutorrent/app/plugins \\\n  && rm -rf /rutorrent/app/plugins/geoip \\\n  && rm -rf /rutorrent/app/plugins/_cloudflare \\\n  && rm -rf /rutorrent/app/plugins/geoip2/.git \\\n  && rm -rf /rutorrent/app/.git \\\n  && rm -rf /tmp/filemanager \\\n  # Socket folder\n  && mkdir -p /run/rtorrent /run/nginx /run/php \\\n  # Cleanup\n  && apk del --purge git\n\nRUN if [ \"${FILEBOT}\" = true ]; then \\\n  apk --update --no-cache add \\\n    chromaprint \\\n    openjdk17 \\\n    openjdk17-jre \\\n    zlib-dev \\\n  # Install filebot\n  && mkdir /filebot \\\n  && cd /filebot \\\n  && wget \"https://get.filebot.net/filebot/FileBot_${FILEBOT_VER}/FileBot_${FILEBOT_VER}-portable.tar.xz\" -O /filebot/filebot.tar.xz \\\n  && tar -xJf filebot.tar.xz \\\n  && rm -rf filebot.tar.xz \\\n  && sed -i 's/-Dapplication.deployment=tar/-Dapplication.deployment=docker/g' /filebot/filebot.sh \\\n  # Fix filebot lib\n  && case \"${TARGETPLATFORM}\" in \\\n    \"linux/amd64\") \\\n      rm -rf /filebot/lib/FreeBSD-amd64 /filebot/lib/Linux-aarch64 /filebot/lib/Linux-armv7l \\\n      && rm -rf /filebot/lib/Linux-x86_64/libzen.so /filebot/lib/Linux-x86_64/libmediainfo.so;; \\\n    \"linux/arm64\") \\\n      rm -rf /filebot/lib/FreeBSD-amd64 /filebot/lib/Linux-armv7l /filebot/lib/Linux-x86_64 \\\n      && rm -rf /filebot/lib/Linux-aarch64/libzen.so /filebot/lib/Linux-aarch64/libmediainfo.so;; \\\n  esac; \\\n  fi\n\nCOPY rootfs /\nRUN chmod 775 /usr/local/bin/*\nVOLUME /data /config\nEXPOSE 8080\nENTRYPOINT [\"/usr/local/bin/startup\"]\nCMD [\"/bin/s6-svscan\", \"/etc/s6.d\"]\n"
}