{
  "startTime": 1674251892254,
  "endTime": 1674251893488,
  "originalSmells": [
    {
      "rule": "npmCacheCleanAfterInstall",
      "position": {
        "lineStart": 86,
        "lineEnd": 86,
        "columnStart": 4,
        "columnEnd": 49
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "# An incomplete base Docker image for running JupyterHub\n#\n# Add your configuration to create a complete derivative Docker image.\n#\n# Include your configuration settings by starting with one of two options:\n#\n# Option 1:\n#\n# FROM jupyterhub/jupyterhub:latest\n#\n# And put your configuration file jupyterhub_config.py in /srv/jupyterhub/jupyterhub_config.py.\n#\n# Option 2:\n#\n# Or you can create your jupyterhub config and database on the host machine, and mount it with:\n#\n# docker run -v $PWD:/srv/jupyterhub -t jupyterhub/jupyterhub\n#\n# NOTE\n# If you base on jupyterhub/jupyterhub-onbuild\n# your jupyterhub_config.py will be added automatically\n# from your docker directory.\n\nARG BASE_IMAGE=ubuntu:focal-20200729\nFROM $BASE_IMAGE AS builder\n\nUSER root\n\nENV DEBIAN_FRONTEND noninteractive\nRUN apt-get update \\\n && apt-get install -yq --no-install-recommends \\\n    build-essential \\\n    ca-certificates \\\n    locales \\\n    python3-dev \\\n    python3-pip \\\n    python3-pycurl \\\n    nodejs \\\n    npm \\\n    yarn \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/*\n\nRUN python3 -m pip install --upgrade setuptools pip wheel\n\n# copy everything except whats in .dockerignore, its a\n# compromise between needing to rebuild and maintaining\n# what needs to be part of the build\nCOPY . /src/jupyterhub/\nWORKDIR /src/jupyterhub\n\n# Build client component packages (they will be copied into ./share and\n# packaged with the built wheel.)\nRUN python3 setup.py bdist_wheel\nRUN python3 -m pip wheel --wheel-dir wheelhouse dist/*.whl\n\n\nFROM $BASE_IMAGE\n\nUSER root\n\nENV DEBIAN_FRONTEND=noninteractive\n\nRUN apt-get update \\\n && apt-get install -yq --no-install-recommends \\\n    ca-certificates \\\n    curl \\\n    gnupg \\\n    locales \\\n    python3-pip \\\n    python3-pycurl \\\n    nodejs \\\n    npm \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/*\n\nENV SHELL=/bin/bash \\\n    LC_ALL=en_US.UTF-8 \\\n    LANG=en_US.UTF-8 \\\n    LANGUAGE=en_US.UTF-8\n\nRUN  locale-gen $LC_ALL\n\n# always make sure pip is up to date!\nRUN python3 -m pip install --no-cache --upgrade setuptools pip\n\nRUN npm install -g configurable-http-proxy@^4.2.0 \\\n && rm -rf ~/.npm && npm cache clean --force;\n\n# install the wheels we built in the first stage\nCOPY --from=builder /src/jupyterhub/wheelhouse /tmp/wheelhouse\nRUN python3 -m pip install --no-cache /tmp/wheelhouse/*\n\nRUN mkdir -p /srv/jupyterhub/\nWORKDIR /srv/jupyterhub/\n\nEXPOSE 8000\n\nLABEL maintainer=\"Jupyter Project <jupyter@googlegroups.com>\"\nLABEL org.jupyter.service=\"jupyterhub\"\n\nCMD [\"jupyterhub\"]\n"
}