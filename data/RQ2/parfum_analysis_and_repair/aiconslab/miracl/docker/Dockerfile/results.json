{
  "startTime": 1674249531311,
  "endTime": 1674249533180,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 12,
        "lineEnd": 12,
        "columnStart": 4,
        "columnEnd": 82
      }
    },
    {
      "rule": "wgetUseHttpsUrl",
      "position": {
        "lineStart": 66,
        "lineEnd": 66,
        "columnStart": 4,
        "columnEnd": 65
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 22,
        "lineEnd": 22,
        "columnStart": 4,
        "columnEnd": 29
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 30,
        "lineEnd": 30,
        "columnStart": 4,
        "columnEnd": 22
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 90,
        "lineEnd": 90,
        "columnStart": 4,
        "columnEnd": 32
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 104,
        "lineEnd": 104,
        "columnStart": 4,
        "columnEnd": 37
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 105,
        "lineEnd": 105,
        "columnStart": 4,
        "columnEnd": 28
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 106,
        "lineEnd": 106,
        "columnStart": 4,
        "columnEnd": 31
      }
    },
    {
      "rule": "aptGetInstallUseY",
      "position": {
        "lineStart": 7,
        "lineEnd": 7,
        "columnStart": 4,
        "columnEnd": 32
      }
    },
    {
      "rule": "aptGetInstallUseY",
      "position": {
        "lineStart": 21,
        "lineEnd": 21,
        "columnStart": 4,
        "columnEnd": 83
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 4,
        "lineEnd": 4,
        "columnStart": 22,
        "columnEnd": 90
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 5,
        "lineEnd": 5,
        "columnStart": 4,
        "columnEnd": 73
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 6,
        "lineEnd": 6,
        "columnStart": 4,
        "columnEnd": 55
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 7,
        "lineEnd": 7,
        "columnStart": 4,
        "columnEnd": 32
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 8,
        "lineEnd": 8,
        "columnStart": 4,
        "columnEnd": 61
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 9,
        "lineEnd": 9,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 20,
        "lineEnd": 20,
        "columnStart": 4,
        "columnEnd": 37
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 21,
        "lineEnd": 21,
        "columnStart": 4,
        "columnEnd": 83
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 88,
        "lineEnd": 88,
        "columnStart": 22,
        "columnEnd": 44
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 20,
        "lineEnd": 20,
        "columnStart": 4,
        "columnEnd": 37
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 21,
        "lineEnd": 21,
        "columnStart": 4,
        "columnEnd": 83
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 4,
        "lineEnd": 4,
        "columnStart": 22,
        "columnEnd": 90
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 5,
        "lineEnd": 5,
        "columnStart": 4,
        "columnEnd": 73
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 6,
        "lineEnd": 6,
        "columnStart": 4,
        "columnEnd": 55
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 7,
        "lineEnd": 7,
        "columnStart": 4,
        "columnEnd": 32
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 8,
        "lineEnd": 8,
        "columnStart": 4,
        "columnEnd": 61
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 9,
        "lineEnd": 9,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 20,
        "lineEnd": 20,
        "columnStart": 4,
        "columnEnd": 37
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 21,
        "lineEnd": 21,
        "columnStart": 4,
        "columnEnd": 83
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 88,
        "lineEnd": 88,
        "columnStart": 22,
        "columnEnd": 44
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 20,
        "lineEnd": 20,
        "columnStart": 4,
        "columnEnd": 61
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 21,
        "lineEnd": 21,
        "columnStart": 4,
        "columnEnd": 110
      }
    }
  ],
  "repairedDockerfile": "FROM neurodebian:xenial\n\nENV DEBIAN_FRONTEND noninteractive\n\nRUN apt-get update && apt-get install --no-install-recommends -y git wget build-essential g++ gcc cmake curl clang && \\\n    apt-get install --no-install-recommends -y libfreetype6-dev apt-utils pkg-config vim gfortran && \\\n    apt-get install --no-install-recommends -y binutils make linux-source unzip && \\\n    apt install -y --no-install-recommends libxcb-xinerama0 && \\\n    apt install --no-install-recommends -y libsm6 libxext6 libfontconfig1 libxrender1 && \\\n    apt-get install --no-install-recommends -y itksnap && rm -rf /var/lib/apt/lists/*;\n\n# Install miniconda\nRUN curl -f -LO https://repo.anaconda.com/miniconda/Miniconda3-4.6.14-Linux-x86_64.sh && \\\n    bash Miniconda3-4.6.14-Linux-x86_64.sh -p /opt/miniconda -b && \\\n    rm Miniconda3-4.6.14-Linux-x86_64.sh\nENV PATH=/opt/miniconda/bin:${PATH}\n\nRUN mkdir -p /code/atlases /data\nWORKDIR /code\n\nRUN apt install --no-install-recommends -y libhdf5-serial-dev && \\\n    apt-get install -y --no-install-recommends libatlas-base-dev libblas3 liblapack3 liblapack-dev libblas-dev && \\\n    pip install --no-cache-dir --upgrade pip && \\\n    python3 -m pip install numpy && \\\n    python3 -m pip install matplotlib joblib && \\\n    python3 -m pip install scipy==1.2.1 && \\\n    python3 -m pip install tifffile && \\\n    conda install -c menpo menpo && \\\n    python3 -m pip install opencv-python==4.2.0.32 && \\\n    apt remove -y cmake && \\\n    pip3 install --no-cache-dir cmake && rm -rf /var/lib/apt/lists/*;\n\n# Install ANTs\n###   Install ANTs   ###\n# The following installs a given version of ANTs:\n# Specify where to install packages:\nENV ANTS_FOLDER=/usr/local/ANTs\n# Grab the Github repository, checkout the needed version,\n#   build\nARG ANTs_VERSION\nRUN cd /tmp && \\\n    git clone https://github.com/ANTsX/ANTs.git && \\\n    cd ANTs && \\\n    git checkout ${ANTs_VERSION} && \\\n    buildDir=${PWD}/build && \\\n    mkdir -p $buildDir ${ANTS_FOLDER} && \\\n    cd $buildDir && \\\n    cmake \\\n        -DCMAKE_INSTALL_PREFIX=${ANTS_FOLDER} \\\n        -DBUILD_SHARED_LIBS=OFF \\\n    -DSuperBuild_ANTS_USE_GIT_PROTOCOL=OFF \\\n        -DBUILD_TESTING=OFF \\\n        -DRUN_LONG_TESTS=OFF \\\n        -DRUN_SHORT_TESTS=OFF \\\n        /tmp/ANTs 2>&1 | tee cmake.log && \\\n    make 2>&1 | tee build.log && \\\n    cd ${buildDir}/ANTS-build && \\\n    make install 2>&1 | tee install.log && \\\n    rm -r /tmp/ANTs\n\n# Add ANTs/bin to the path:\nENV PATH=$ANTS_FOLDER/bin/:$PATH\nENV ANTSPATH=$ANTS_FOLDER/bin/\n\n# ImageJ / Fiji\nWORKDIR /tmp\nRUN wget https://downloads.imagej.net/fiji/latest/fiji-linux64.zip && \\\n    unzip fiji-linux64.zip && \\\n    mv Fiji.app/ /opt/fiji && \\\n    rm fiji-linux64.zip && \\\n    ln -s /opt/fiji/ImageJ-linux64 /opt/fiji/Fiji\n\nENV PATH ${ANTSPATH}:/opt/fiji:${PATH}\n\n# Fiji Plugins\nWORKDIR /opt/fiji/plugins\nRUN wget https://github.com/ijpb/MorphoLibJ/releases/download/v1.4.0/MorphoLibJ_-1.4.0.jar && \\\n    wget https://github.com/thorstenwagner/ij-shape-filter/releases/download/v.1.4.2/ij_shape_filter-1.4.2.jar && \\\n    wget https://sites.imagej.net/Tboudier/plugins/mcib3d-suite/mcib3d_plugins.jar-20190201145530 && \\\n    mv mcib3d_plugins.jar-20190201145530 mcib3d_plugins.jar\n\n# C3D\nRUN wget https://downloads.sourceforge.net/project/c3d/c3d/Nightly/c3d-nightly-Linux-x86_64.tar.gz && \\\n    tar -xzvf c3d-nightly-Linux-x86_64.tar.gz && mv c3d-1.1.0-Linux-x86_64 /opt/cd3 && \\\n    rm c3d-nightly-Linux-x86_64.tar.gz\nENV PATH /opt/cd3/bin:${PATH}\n\n# Install FSL, cmake\nRUN apt-get update && apt-get install --no-install-recommends -y fsl && \\\n    apt remove cmake && \\\n    pip3 install --no-cache-dir cmake --upgrade && rm -rf /var/lib/apt/lists/*;\n\nENV FSLDIR=\"/usr/share/fsl/5.0\" \\\n    FSLOUTPUTTYPE=\"NIFTI_GZ\" \\\n    FSLMULTIFILEQUIT=\"TRUE\" \\\n    POSSUMDIR=\"/usr/share/fsl/5.0\" \\\n    LD_LIBRARY_PATH=\"/usr/lib/fsl/5.0:$LD_LIBRARY_PATH\" \\\n    FSLTCLSH=\"/usr/bin/tclsh\" \\\n    FSLWISH=\"/usr/bin/wish\" \\\n    POSSUMDIR=\"/usr/share/fsl/5.0\"\n\nENV PATH=\"/usr/lib/fsl/5.0:${PATH}\"\n\nWORKDIR /code\nRUN pip3 install --no-cache-dir scikit-image==0.14.2 && \\\n    pip3 install --no-cache-dir cython h5py && \\\n    pip3 install --no-cache-dir pandas==0.24.2\n\n#RUN alias python=python3\n\n#RUN conda install -y --no-update-deps pyqt=5\n"
}