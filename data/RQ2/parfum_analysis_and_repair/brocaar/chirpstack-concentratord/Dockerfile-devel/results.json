{
  "startTime": 1674254621044,
  "endTime": 1674254622540,
  "originalSmells": [
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 4,
        "lineEnd": 16,
        "columnStart": 1,
        "columnEnd": 5
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 4,
        "lineEnd": 16,
        "columnStart": 1,
        "columnEnd": 5
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM rust:1.45-stretch\n\n# required by bingen\nRUN apt-get update && \\\n\tapt-get install --no-install-recommends -y \\\n\t\tbuild-essential \\\n\t\tcmake \\\n\t\tclang-3.9 \\\n\t\tlibclang-3.9-dev \\\n\t\tllvm-3.9-dev \\\n\t\tgcc-arm-linux-gnueabi \\\n\t\tg++-arm-linux-gnueabi \\\n\t\tgcc-arm-linux-gnueabihf \\\n\t\tg++-arm-linux-gnueabihf \\\n\t\tgcc-aarch64-linux-gnu \\\n\t\tg++-aarch64-linux-gnu \\\n\t\tgit && \\\n\tapt-get clean && rm -rf /var/lib/apt/lists/*;\n\nRUN rustup target add armv5te-unknown-linux-gnueabi\nRUN rustup target add arm-unknown-linux-gnueabihf\nRUN rustup target add aarch64-unknown-linux-gnu\n\nRUN echo '[target.armv5te-unknown-linux-gnueabi]\\n\\\nlinker = \"arm-linux-gnueabi-gcc\"\\n\\\n[target.arm-unknown-linux-gnueabihf]\\n\\\nlinker = \"arm-linux-gnueabihf-gcc\"\\n\\\n[target.aarch64-unknown-linux-gnu]\\n\\\nlinker = \"aarch64-linux-gnu-gcc\"\\n'\\\n>> /usr/local/cargo/config\n\nRUN mkdir -p /tmp\nRUN cd /tmp && git clone https://github.com/seife/opkg-utils.git && cd /tmp/opkg-utils && PREFIX=/usr make install\n\nRUN mkdir -p /hal/native && \\\n\tcd /hal/native && \\\n\tgit clone https://github.com/brocaar/lora_gateway.git -b v5.0.1r2 && \\\n\tgit clone https://github.com/brocaar/sx1302_hal.git -b V2.1.0r1 && \\\n\tgit clone https://github.com/Lora-net/gateway_2g4_hal.git -b V1.1.0\n\nRUN cd /hal/native/lora_gateway && \\\n\tmake && \\\n\tln -s /hal/native/lora_gateway/libloragw/inc /usr/include/libloragw-sx1301 && \\\n\tln -s /hal/native/lora_gateway/libloragw/libloragw.a /usr/lib/libloragw-sx1301.a\n\nRUN cd /hal/native/sx1302_hal && \\\n\tmake && \\\n\tln -s /hal/native/sx1302_hal/libloragw/inc /usr/include/libloragw-sx1302 && \\\n\tln -s /hal/native/sx1302_hal/libloragw/libloragw.a /usr/lib/libloragw-sx1302.a && \\\n\tcp /hal/native/sx1302_hal/libtools/inc/* /usr/include && \\\n\tcp /hal/native/sx1302_hal/libtools/*.a /usr/lib\n\nRUN cd /hal/native/gateway_2g4_hal && \\\n\tmake && \\\n\tln -s /hal/native/gateway_2g4_hal/libloragw/inc /usr/include/libloragw-2g4 && \\\n\tln -s /hal/native/gateway_2g4_hal/libloragw/libloragw.a /usr/lib/libloragw-2g4.a\n\nRUN mkdir -p /hal/armv5 && \\\n\tcd /hal/armv5 && \\\n\tgit clone https://github.com/brocaar/lora_gateway.git -b v5.0.1r2 && \\\n\tgit clone https://github.com/brocaar/sx1302_hal.git -b V2.1.0r1 && \\\n\tgit clone https://github.com/Lora-net/gateway_2g4_hal.git -b V1.1.0\n\nRUN mkdir -p /hal/armv7hf && \\\n\tcd /hal/armv7hf && \\\n\tgit clone https://github.com/brocaar/lora_gateway.git -b v5.0.1r2 && \\\n\tgit clone https://github.com/brocaar/sx1302_hal.git -b V2.1.0r1 && \\\n\tgit clone https://github.com/Lora-net/gateway_2g4_hal.git -b V1.1.0\n\nRUN mkdir -p /hal/aarch64 && \\\n\tcd /hal/aarch64 && \\\n\tgit clone https://github.com/brocaar/lora_gateway.git -b v5.0.1r2 && \\\n\tgit clone https://github.com/brocaar/sx1302_hal.git -b V2.1.0r1 && \\\n\tgit clone https://github.com/Lora-net/gateway_2g4_hal.git -b V1.1.0\n\n# Needed for RAK shields, works with other shields too\n# RUN sed -i 's/define SPI_SPEED.*/define SPI_SPEED 2000000/g' /hal/armv5/lora_gateway/libloragw/src/loragw_spi.native.c\n# RUN sed -i 's/define SPI_SPEED.*/define SPI_SPEED 2000000/g' /hal/armv7hf/lora_gateway/libloragw/src/loragw_spi.native.c\n\nRUN cd /hal/armv5/lora_gateway && \\\n\tARCH=arm CROSS_COMPILE=arm-linux-gnueabi- make && \\\n\tln -s /hal/armv5/lora_gateway/libloragw/inc /usr/arm-linux-gnueabi/include/libloragw-sx1301 && \\\n\tln -s /hal/armv5/lora_gateway/libloragw/libloragw.a /usr/arm-linux-gnueabi/lib/libloragw-sx1301.a\n\nRUN cd /hal/armv5/sx1302_hal && \\\n\tARCH=arm CROSS_COMPILE=arm-linux-gnueabi- make && \\\n\tln -s /hal/armv5/sx1302_hal/libloragw/inc /usr/arm-linux-gnueabi/include/libloragw-sx1302 && \\\n\tln -s /hal/armv5/sx1302_hal/libloragw/libloragw.a /usr/arm-linux-gnueabi/lib/libloragw-sx1302.a && \\\n\tcp /hal/armv5/sx1302_hal/libtools/inc/* /usr/arm-linux-gnueabi/include && \\\n\tcp /hal/armv5/sx1302_hal/libtools/*.a /usr/arm-linux-gnueabi/lib\n\nRUN cd /hal/armv5/gateway_2g4_hal && \\\n\tARCH=arm CROSS_COMPILE=arm-linux-gnueabi- make && \\\n\tln -s /hal/armv5/gateway_2g4_hal/libloragw/inc /usr/arm-linux-gnueabi/include/libloragw-2g4 && \\\n\tln -s /hal/armv5/gateway_2g4_hal/libloragw/libloragw.a /usr/arm-linux-gnueabi/lib/libloragw-2g4.a\n\nRUN cd /hal/armv7hf/lora_gateway && \\\n\tARCH=arm CROSS_COMPILE=arm-linux-gnueabihf- make && \\\n\tln -s /hal/armv7hf/lora_gateway/libloragw/inc /usr/arm-linux-gnueabihf/include/libloragw-sx1301 && \\\n\tln -s /hal/armv7hf/lora_gateway/libloragw/libloragw.a /usr/arm-linux-gnueabihf/lib/libloragw-sx1301.a\n\nRUN cd /hal/armv7hf/sx1302_hal && \\\n\tARCH=arm CROSS_COMPILE=arm-linux-gnueabihf- make && \\\n\tln -s /hal/armv7hf/sx1302_hal/libloragw/inc /usr/arm-linux-gnueabihf/include/libloragw-sx1302 && \\\n\tln -s /hal/armv7hf/sx1302_hal/libloragw/libloragw.a /usr/arm-linux-gnueabihf/lib/libloragw-sx1302.a && \\\n\tcp /hal/armv7hf/sx1302_hal/libtools/inc/* /usr/arm-linux-gnueabihf/include && \\\n\tcp /hal/armv7hf/sx1302_hal/libtools/*.a /usr/arm-linux-gnueabihf/lib\n\nRUN cd /hal/armv7hf/gateway_2g4_hal && \\\n\tARCH=arm CROSS_COMPILE=arm-linux-gnueabihf- make && \\\n\tln -s /hal/armv7hf/gateway_2g4_hal/libloragw/inc /usr/arm-linux-gnueabihf/include/libloragw-2g4 && \\\n\tln -s /hal/armv7hf/gateway_2g4_hal/libloragw/libloragw.a /usr/arm-linux-gnueabihf/lib/libloragw-2g4.a\n\nRUN cd /hal/aarch64/lora_gateway && \\\n\tARCH=arm CROSS_COMPILE=aarch64-linux-gnu- make && \\\n\tln -s /hal/aarch64/lora_gateway/libloragw/inc /usr/aarch64-linux-gnu/include/libloragw-sx1301 && \\\n\tln -s /hal/aarch64/lora_gateway/libloragw/libloragw.a /usr/aarch64-linux-gnu/lib/libloragw-sx1301.a\n\nRUN cd /hal/aarch64/sx1302_hal && \\\n\tARCH=arm CROSS_COMPILE=aarch64-linux-gnu- make && \\\n\tln -s /hal/aarch64/sx1302_hal/libloragw/inc /usr/aarch64-linux-gnu/include/libloragw-sx1302 && \\\n\tln -s /hal/aarch64/sx1302_hal/libloragw/libloragw.a /usr/aarch64-linux-gnu/lib/libloragw-sx1302.a && \\\n\tcp /hal/aarch64/sx1302_hal/libtools/inc/* /usr/aarch64-linux-gnu/include && \\\n\tcp /hal/aarch64/sx1302_hal/libtools/*.a /usr/aarch64-linux-gnu/lib\n\nRUN cd /hal/aarch64/gateway_2g4_hal && \\\n\tARCH=arm CROSS_COMPILE=aarch64-linux-gnu- make && \\\n\tln -s /hal/aarch64/gateway_2g4_hal/libloragw/inc /usr/aarch64-linux-gnu/include/libloragw-2g4 && \\\n\tln -s /hal/aarch64/gateway_2g4_hal/libloragw/libloragw.a /usr/aarch64-linux-gnu/lib/libloragw-2g4.a\n\nENV LLVM_CONFIG_PATH=llvm-config-3.9\nENV PROJECT_PATH=/chirpstack-concentratord\nRUN mkdir -p $PROJECT_PATH\nWORKDIR $PROJECT_PATH\n\nCOPY . /chirpstack-concentratord\nRUN cargo fetch\n"
}