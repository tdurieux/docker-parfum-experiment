{
  "startTime": 1674253548880,
  "endTime": 1674253549619,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 91,
        "lineEnd": 91,
        "columnStart": 4,
        "columnEnd": 74
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM php:7.2-apache\n\nLABEL maintainer=\"Jakub Bouƒçek <pan@jakubboucek.cz>\"\nLABEL desc=\"NOTE: Unmaintained version, don't use it with serious deployment!\"\nLABEL org.label-schema.name=\"PHP 7.2 (Apache module)\"\nLABEL org.label-schema.description=\"NOTE: Unmaintained version, don't use it with serious deployment!\"\nLABEL org.label-schema.vcs-url=\"https://github.com/jakubboucek/docker-lamp-devstack\"\n\n# Workdir during installation\nWORKDIR /tmp\n\n# Prevent interactive block\nARG DEBIAN_FRONTEND=noninteractive\n\n# OS binaries install && update critical binaries\nRUN set -eux; \\\n    apt-get update; \\\n    apt-get install --no-install-recommends -y \\\n        ca-certificates \\\n        git \\\n        libbz2-dev \\\n        libc-client-dev \\\n        libfreetype6-dev \\\n        libgmp-dev \\\n        libicu-dev \\\n        libjpeg62-turbo-dev \\\n        libkrb5-dev \\\n        libpng-dev \\\n        libsodium-dev \\\n        libwebp-dev \\\n        libxslt-dev \\\n        libzip-dev \\\n        nano \\\n        openssl \\\n        tzdata \\\n        unzip \\\n        zip; \\\n    docker-php-ext-configure \\\n        gd --with-freetype-dir --with-jpeg-dir=/usr/include/ --with-webp-dir=/usr/include/; \\\n    docker-php-ext-configure \\\n        imap --with-kerberos --with-imap-ssl; \\\n    docker-php-ext-install -j$(nproc) \\\n        bcmath \\\n        bz2 \\\n        calendar \\\n        exif \\\n        gd \\\n        gettext \\\n        gmp \\\n        imap \\\n        intl \\\n        mysqli \\\n        opcache \\\n        pcntl \\\n        pdo_mysql \\\n        soap \\\n        sockets \\\n        sodium \\\n        sysvmsg \\\n        sysvsem \\\n        sysvshm \\\n        xsl \\\n        zip; \\\n    a2enmod \\\n        expires \\\n        headers \\\n        rewrite; \\\n    apt-get clean -y && \\\n    apt-get autoclean -y && \\\n    apt-get autoremove -y && \\\n    rm -rf /var/lib/apt/lists/* /var/lib/log/* /tmp/* /var/tmp/*;\n\n# Configure Apache & PHP\nENV PHP_MAX_EXECUTION_TIME 30\nENV PHP_MEMORY_LIMIT 2G\nENV PHP_SESSION_SAVE_PATH \"\"\nCOPY core.ini /usr/local/etc/php/conf.d/core.ini\n\n# Configure OPcache\nENV PHP_OPCACHE_ENABLE 1\nENV PHP_OPCACHE_ENABLE_CLI 0\nENV PHP_OPCACHE_MEMORY_CONSUPTION 128\nENV PHP_OPCACHE_REVALIDATE_FREQ 2\nENV PHP_OPCACHE_VALIDATE_TIMESTAMPS 1\nCOPY opcache.ini /usr/local/etc/php/conf.d/opcache.ini\n\n# Move Apache Document root to sub-directory `www` (PHP frameworks convention)\nENV APACHE_DOCUMENT_ROOT /var/www/html/www\n\n# Setup Devstack (install Composer, setup DocumentRoot)\nRUN set -eux; \\\n    curl -f -sS https://getcomposer.org/installer -o /tmp/composer-setup.php; \\\n    php /tmp/composer-setup.php --1 --install-dir=/usr/local/bin --filename=composer; \\\n    COMPOSER_BIN_DIR=$(composer global config bin-dir --absolute) 2>/dev/null; \\\n    echo \"export PATH=${COMPOSER_BIN_DIR}:\\${PATH}\" >> ~/.bashrc; \\\n    sed -ri -e 's!/var/www/html!${APACHE_DOCUMENT_ROOT}!g' /etc/apache2/sites-available/*.conf; \\\n    rm -rf /tmp/*;\n\n# Workdir after installation\nWORKDIR /var/www/html\n"
}