{
  "startTime": 1674248618571,
  "endTime": 1674248619318,
  "originalSmells": [
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 16,
        "lineEnd": 21,
        "columnStart": 7,
        "columnEnd": 38
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "# ------------------ #\n# -- Odin Builder -- #\n# ------------------ #\nARG ODIN_IMAGE_VERSION=latest\nFROM --platform=linux/amd64 mbround18/odin:${ODIN_IMAGE_VERSION} as runtime\n\n# --------------- #\n# -- Steam CMD -- #\n# --------------- #\nFROM steamcmd/steamcmd:ubuntu\n\nENV TZ=America/Los_Angeles\nRUN ln -snf /usr/share/zoneinfo/$TZ /etc/localtime && echo $TZ > /etc/timezone\n\nRUN apt-get update                        \\\n    && apt-get upgrade -y \\\n    && apt-get install --no-install-recommends -y -qq \\\n    build-essential \\\n    htop net-tools nano gcc g++ gdb \\\n    netcat curl wget zip unzip \\\n    cron sudo gosu dos2unix \\\n    libsdl2-2.0-0 jq libc6 libc6-dev \\\n    && rm -rf /var/lib/apt/lists/* \\\n    && gosu nobody true \\\n    && dos2unix\n\nRUN addgroup --system steam     \\\n    && adduser --system         \\\n      --home /home/steam        \\\n      --shell /bin/bash         \\\n      steam                     \\\n    && usermod -aG steam steam  \\\n    && chmod ugo+rw /tmp/dumps\n\n\n# Container informaiton\nARG GITHUB_SHA=\"not-set\"\nARG GITHUB_REF=\"not-set\"\nARG GITHUB_REPOSITORY=\"not-set\"\n\n# User config\nENV PUID=1000                                                     \\\n    PGID=1000                                                     \\\n    # Set up timezone information\n    TZ=America/Los_Angeles                                        \\\n    # Server Specific env variables.\n    PORT=\"2456\"                                                   \\\n    NAME=\"Valheim Docker\"                                         \\\n    WORLD=\"Dedicated\"                                             \\\n    PUBLIC=\"1\"                                                    \\\n    PASSWORD=\"\"                                                   \\\n    TYPE=\"Vanilla\"                                                \\\n    UPDATE_ON_STARTUP=\"1\"                                         \\\n    # Auto Update Configs\n    AUTO_UPDATE=\"0\"                                               \\\n    AUTO_UPDATE_SCHEDULE=\"0 1 * * *\"                              \\\n    # Auto Backup Configs\n    AUTO_BACKUP=\"0\"                                               \\\n    AUTO_BACKUP_SCHEDULE=\"*/15 * * * *\"                           \\\n    AUTO_BACKUP_REMOVE_OLD=\"1\"                                    \\\n    AUTO_BACKUP_DAYS_TO_LIVE=\"3\"                                  \\\n    AUTO_BACKUP_ON_UPDATE=\"0\"                                     \\\n    AUTO_BACKUP_ON_SHUTDOWN=\"0\"                                   \\\n    AUTO_BACKUP_PAUSE_WITH_NO_PLAYERS=\"0\"                         \\\n    SCHEDULED_RESTART=\"0\"                                         \\\n    SCHEDULED_RESTART_SCHEDULE=\"0 2 * * *\"                        \\\n    # Folders and file system related\n    SAVE_LOCATION=\"/home/steam/.config/unity3d/IronGate/Valheim\"  \\\n    MODS_LOCATION=\"/home/steam/staging/mods\"                      \\\n    GAME_LOCATION=\"/home/steam/valheim\"                           \\\n    BACKUP_LOCATION=\"/home/steam/backups\"                         \\\n    # Webhook Information\n    WEBHOOK_STATUS_SUCCESSFUL=\"1\"                                 \\\n    WEBHOOK_STATUS_FAILED=\"1\"\n\nCOPY ./src/scripts/*.sh /home/steam/scripts/\nCOPY ./src/scripts/entrypoint.sh /entrypoint.sh\nCOPY ./src/scripts/env.sh /env.sh\nCOPY --from=runtime /apps/odin /apps/huginn /usr/local/bin/\nCOPY ./src/scripts/steam_bashrc.sh /home/steam/.bashrc\n\nRUN usermod -u ${PUID} steam                            \\\n    && groupmod -g ${PGID} steam                        \\\n    && printf \"${GITHUB_SHA}\\n${GITHUB_REF}\\n${GITHUB_REPOSITORY}\\n\" >/home/steam/.version \\\n    && chmod 755 -R /home/steam/scripts/                \\\n    && chmod 755 /entrypoint.sh                         \\\n    && chmod 755 /env.sh                                \\\n    && chmod 755 /usr/local/bin/odin                    \\\n    && dos2unix /entrypoint.sh /home/steam/.bashrc  /home/steam/scripts/*.sh\n\n\nHEALTHCHECK --interval=1m --timeout=3s \\\n    CMD pidof valheim_server.x86_64 || exit 1\n\nENTRYPOINT [\"/bin/bash\",\"/entrypoint.sh\"]\nCMD [\"/bin/bash\", \"/home/steam/scripts/start_valheim.sh\"]\n"
}