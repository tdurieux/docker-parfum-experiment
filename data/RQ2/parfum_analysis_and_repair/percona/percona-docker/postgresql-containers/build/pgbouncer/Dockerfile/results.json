{
  "startTime": 1674255176272,
  "endTime": 1674255177496,
  "originalSmells": [
    {
      "rule": "curlUseHttpsUrl",
      "position": {
        "lineStart": 55,
        "lineEnd": 55,
        "columnStart": 4,
        "columnEnd": 122
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM redhat/ubi8-minimal\n\nLABEL name=\"Percona PostgreSQL Distribution\" \\\n    vendor=\"Percona\" \\\n    summary=\"Percona Distribution for PostgreSQL\" \\\n    description=\"Percona Distribution for PostgreSQL is a collection of tools to assist you in managing your PostgreSQL database system\" \\\n    maintainer=\"Percona Development <info@percona.com>\"\n\nRUN microdnf -y update; \\\n    microdnf -y install glibc-langpack-en\n# platform-python-pip is removed due to CVE-2019-20916, VULNDB-229216\n# python3-pip-wheel is required by platform-python\nRUN set -ex; \\\n    microdnf -y update; \\\n    microdnf -y install glibc-langpack-en platform-python; \\\n    /usr/libexec/platform-python -m pip install pip --upgrade; \\\n    microdnf -y remove platform-python-pip; \\\n    microdnf clean all; \\\n    rm -rf /var/cache/dnf /var/cache/yum\n\nENV LC_ALL en_US.utf-8\nENV LANG en_US.utf-8\nARG PG_MAJOR=14\n\nRUN set -ex; \\\n    export GNUPGHOME=\"$(mktemp -d)\"; \\\n    gpg --batch --keyserver keyserver.ubuntu.com --recv-keys \\\n        430BDF5C56E7C94E848EE60C1C4CBDCDCD2EFD2A \\\n        99DB70FAE1D7CE227FB6488205B555B38483C65D \\\n        94E279EB8D8F25B21810ADF121EA45AB2F86D6A1 \\\n        736AF5116D9C40E2AF6B074BF9B9FEE7764429E6; \\\n    gpg --batch --export --armor 430BDF5C56E7C94E848EE60C1C4CBDCDCD2EFD2A > ${GNUPGHOME}/RPM-GPG-KEY-Percona; \\\n    gpg --batch --export --armor 99DB70FAE1D7CE227FB6488205B555B38483C65D > ${GNUPGHOME}/RPM-GPG-KEY-centosofficial; \\\n    gpg --batch --export --armor 94E279EB8D8F25B21810ADF121EA45AB2F86D6A1 > ${GNUPGHOME}/RPM-GPG-KEY-EPEL-8; \\\n    gpg --batch --export --armor 736AF5116D9C40E2AF6B074BF9B9FEE7764429E6 > ${GNUPGHOME}/RPM-GPG-KEY-CentOS-SIG-Cloud; \\\n    rpmkeys --import \\\n        ${GNUPGHOME}/RPM-GPG-KEY-Percona \\\n        ${GNUPGHOME}/RPM-GPG-KEY-centosofficial \\\n        ${GNUPGHOME}/RPM-GPG-KEY-EPEL-8 \\\n        ${GNUPGHOME}/RPM-GPG-KEY-CentOS-SIG-Cloud; \\\n    microdnf install -y findutils; \\\n    curl -Lf -o /tmp/epel-release.rpm https://dl.fedoraproject.org/pub/epel/epel-release-latest-8.noarch.rpm; \\\n    curl -Lf -o /tmp/percona-release.rpm https://repo.percona.com/yum/percona-release-latest.noarch.rpm; \\\n    rpmkeys --checksig /tmp/percona-release.rpm; \\\n    rpmkeys --checksig /tmp/epel-release.rpm; \\\n    rpm -i /tmp/percona-release.rpm /tmp/epel-release.rpm; \\\n    rm -rf \"$GNUPGHOME\" /tmp/percona-release.rpm /tmp/epel-release.rpm; \\\n    curl -Lf -o /tmp/python3-pyparsing.rpm https://vault.centos.org/8.5.2111/cloud/x86_64/openstack-train/Packages/p/python3-pyparsing-2.4.6-1.el8.noarch.rpm; \\\n    rpmkeys --checksig /tmp/python3-pyparsing.rpm; \\\n    rpm -i /tmp/python3-pyparsing.rpm; \\\n    rm -rf /tmp/python3-pyparsing.rpm; \\\n    rpm --import /etc/pki/rpm-gpg/PERCONA-PACKAGING-KEY; \\\n    percona-release enable ppg-${PG_MAJOR} release\n\nRUN set -ex; \\\n    curl -Lf -o /tmp/c-ares.rpm https://vault.centos.org/centos/8/BaseOS/x86_64/os/Packages/c-ares-1.13.0-5.el8.x86_64.rpm; \\\n    rpmkeys --checksig /tmp/c-ares.rpm; \\\n    rpm -i /tmp/c-ares.rpm; \\\n    rm -rf /tmp/c-ares.rpm; \\\n    microdnf -y update; \\\n    microdnf -y install \\\n        bind-utils \\\n        gettext \\\n        hostname \\\n        perl \\\n        tar \\\n        procps-ng \\\n        nss_wrapper \\\n        percona-pgbouncer; \\\n    sed -i 's/enabled=1/enabled=0/' /etc/yum.repos.d/epel*.repo; \\\n    microdnf -y clean all\n\nRUN set -ex; \\\n    mkdir -p /opt/crunchy/bin /opt/crunchy/conf /pgconf\n\nCOPY bin/pgbouncer /opt/crunchy/bin\nCOPY bin/common /opt/crunchy/bin\nCOPY conf/pgbouncer /opt/crunchy/conf\nCOPY licenses /licenses\n\nRUN set -ex; \\\n    chown -R 2:0 /opt/crunchy /pgconf; \\\n    chmod -R g=u /opt/crunchy /pgconf\n\nEXPOSE 6432\n\nVOLUME [\"/pgconf\"]\n\n# Defines a unique directory name that will be utilized by the nss_wrapper in the UID script\nENV NSS_WRAPPER_SUBDIR=\"pgbouncer\"\n\nENTRYPOINT [\"opt/crunchy/bin/uid_daemon.sh\"]\n\nUSER 2\n\nCMD [\"/opt/crunchy/bin/start.sh\"]\n"
}