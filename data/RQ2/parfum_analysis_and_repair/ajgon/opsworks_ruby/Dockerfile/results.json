{
  "startTime": 1674256066004,
  "endTime": 1674256067344,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 11,
        "lineEnd": 11,
        "columnStart": 4,
        "columnEnd": 64
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 26,
        "lineEnd": 26,
        "columnStart": 4,
        "columnEnd": 45
      }
    },
    {
      "rule": "npmCacheCleanAfterInstall",
      "position": {
        "lineStart": 17,
        "lineEnd": 17,
        "columnStart": 4,
        "columnEnd": 45
      }
    },
    {
      "rule": "npmCacheCleanAfterInstall",
      "position": {
        "lineStart": 39,
        "lineEnd": 39,
        "columnStart": 4,
        "columnEnd": 15
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 18,
        "lineEnd": 18,
        "columnStart": 4,
        "columnEnd": 46
      }
    },
    {
      "rule": "gemUpdateSystemRmRootGem",
      "position": {
        "lineStart": 16,
        "lineEnd": 16,
        "columnStart": 4,
        "columnEnd": 37
      }
    },
    {
      "rule": "gemUpdateNoDocument",
      "position": {
        "lineStart": 16,
        "lineEnd": 16,
        "columnStart": 4,
        "columnEnd": 37
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 28,
        "lineEnd": 28,
        "columnStart": 4,
        "columnEnd": 32
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 28,
        "lineEnd": 28,
        "columnStart": 4,
        "columnEnd": 32
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM ruby:2.7-bullseye\n\nRUN printf \"deb http://deb.debian.org/debian testing main\\ndeb http://deb.debian.org/debian testing-updates main\" >> /etc/apt/sources.list\nRUN apt-get update && \\\n    apt-get remove --purge --yes python2 python3 && \\\n    apt-get autoremove --purge --yes && \\\n    apt-get install --yes --no-install-recommends apt-transport-https build-essential git locales python3 python3-pip python3-setuptools python3-yaml && \\\n    apt-get clean && \\\n    rm -rf /var/lib/apt/lists/*\nRUN update-alternatives --install /usr/bin/python python /usr/bin/python3.* 0\nRUN echo 'deb https://deb.nodesource.com/node_14.x buster main' > /etc/apt/sources.list.d/nodesource.list && \\\n    curl -f -s https://deb.nodesource.com/gpgkey/nodesource.gpg.key | apt-key add - && \\\n    apt-get update && \\\n    apt-get install --yes --target-release=buster --no-install-recommends nodejs && \\\n    apt-get clean && \\\n    rm -rf /var/lib/apt/lists/*\n   RUN mkdir -p /usr/local/etc \\\n  && { \\\n    echo 'install: --no-document'; \\\n    echo 'update: --no-document'; \\\n  } >> /usr/local/etc/gemrc;\nRUN gem update --no-document --system && rm -rf /root/.gem;\nRUN npm install -g conventional-changelog-cli && npm cache clean --force;\nRUN pip3 install --no-cache-dir mike mkdocs-material yamllint\n\nRUN echo 'en_US.UTF-8 UTF-8' >> /etc/locale.gen\nRUN locale-gen\nENV LC_ALL en_US.UTF-8\n\nENV CHEF_LICENSE=accept\nRUN echo 'deb [trusted=yes] https://packages.chef.io/repos/apt/stable bionic main' > /etc/apt/sources.list.d/chefdk.list && \\\n    curl -f -s https://packages.chef.io/chef.asc | apt-key add - && \\\n    apt-get update && \\\n    apt-get install --no-install-recommends --yes chefdk && rm -rf /var/lib/apt/lists/*;\n\nENV APP_HOME /cookbooks/opsworks_ruby\nRUN mkdir -p \"$APP_HOME\"\n\nCOPY Gemfile* $APP_HOME/\nWORKDIR $APP_HOME\n\nRUN chef exec bundle install -j 4\n\nCOPY package.json $APP_HOME/\nRUN npm install && npm cache clean --force;\n\nCOPY .chef.login $APP_HOME/\nRUN mkdir -p /root/.chef\nRUN printf \"client_key \\\"/cookbooks/opsworks_ruby/client.pem\\\"\\n\" >> /root/.chef/knife.rb\nRUN printf \"node_name \\\"$(cat /cookbooks/opsworks_ruby/.chef.login)\\\"\\n\" >> /root/.chef/knife.rb\nRUN printf \"cookbook_path \\\"/cookbooks\\\"\\n\" >> /root/.chef/knife.rb\n\nCOPY README.md $APP_HOME/\nCOPY metadata.rb $APP_HOME/\nCOPY Berksfile* $APP_HOME/\n\nRUN chef exec berks\n"
}