{
  "startTime": 1674251439615,
  "endTime": 1674251440456,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 67,
        "lineEnd": 67,
        "columnStart": 4,
        "columnEnd": 115
      }
    },
    {
      "rule": "npmCacheCleanAfterInstall",
      "position": {
        "lineStart": 16,
        "lineEnd": 16,
        "columnStart": 4,
        "columnEnd": 103
      }
    },
    {
      "rule": "curlUseHttpsUrl",
      "position": {
        "lineStart": 67,
        "lineEnd": 67,
        "columnStart": 4,
        "columnEnd": 115
      }
    },
    {
      "rule": "gpgUseBatchFlag",
      "position": {
        "lineStart": 29,
        "lineEnd": 29,
        "columnStart": 4,
        "columnEnd": 143
      }
    },
    {
      "rule": "gpgUseHaPools",
      "position": {
        "lineStart": 29,
        "lineEnd": 29,
        "columnStart": 4,
        "columnEnd": 143
      }
    },
    {
      "rule": "aptGetInstallUseY",
      "position": {
        "lineStart": 83,
        "lineEnd": 83,
        "columnStart": 9,
        "columnEnd": 44
      }
    },
    {
      "rule": "aptGetInstallUseY",
      "position": {
        "lineStart": 85,
        "lineEnd": 85,
        "columnStart": 9,
        "columnEnd": 28
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 6,
        "lineEnd": 6,
        "columnStart": 22,
        "columnEnd": 467
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 49,
        "lineEnd": 49,
        "columnStart": 9,
        "columnEnd": 54
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 51,
        "lineEnd": 51,
        "columnStart": 9,
        "columnEnd": 39
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 71,
        "lineEnd": 71,
        "columnStart": 9,
        "columnEnd": 33
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 83,
        "lineEnd": 83,
        "columnStart": 9,
        "columnEnd": 44
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 85,
        "lineEnd": 85,
        "columnStart": 9,
        "columnEnd": 28
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 49,
        "lineEnd": 49,
        "columnStart": 9,
        "columnEnd": 54
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 51,
        "lineEnd": 51,
        "columnStart": 9,
        "columnEnd": 39
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 71,
        "lineEnd": 71,
        "columnStart": 9,
        "columnEnd": 33
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 83,
        "lineEnd": 83,
        "columnStart": 9,
        "columnEnd": 44
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 85,
        "lineEnd": 85,
        "columnStart": 9,
        "columnEnd": 28
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 49,
        "lineEnd": 49,
        "columnStart": 9,
        "columnEnd": 54
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 51,
        "lineEnd": 51,
        "columnStart": 9,
        "columnEnd": 39
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 71,
        "lineEnd": 71,
        "columnStart": 9,
        "columnEnd": 33
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 83,
        "lineEnd": 83,
        "columnStart": 9,
        "columnEnd": 44
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 85,
        "lineEnd": 85,
        "columnStart": 9,
        "columnEnd": 28
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 49,
        "lineEnd": 49,
        "columnStart": 9,
        "columnEnd": 78
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 51,
        "lineEnd": 51,
        "columnStart": 9,
        "columnEnd": 63
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 71,
        "lineEnd": 71,
        "columnStart": 9,
        "columnEnd": 57
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 83,
        "lineEnd": 83,
        "columnStart": 9,
        "columnEnd": 71
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 85,
        "lineEnd": 85,
        "columnStart": 9,
        "columnEnd": 55
      }
    }
  ],
  "repairedDockerfile": "FROM ubuntu:16.04\nMAINTAINER Matt Konda <mkonda@jemurai.com>\n\n################################################################################################\n#       Environment\n#\nRUN apt-get update && apt-get install --no-install-recommends -y git-core sudo curl zlib1g-dev build-essential libssl-dev libreadline-dev libyaml-dev libsqlite3-dev sqlite3 libxml2-dev libxslt1-dev libffi-dev libgdbm-dev libncurses5-dev automake libtool bison libffi-dev gnupg patch gawk g++ gcc make libc6-dev libcurl3-dev autoconf libtool ncurses-dev zlib1g libreadline6-dev libreadline6 openssl libcurl4-openssl-dev libgmp-dev clamav md5deep nodejs npm default-jre unzip python python-pip && rm -rf /var/lib/apt/lists/*\n\nRUN echo \"%sudo ALL=(ALL) NOPASSWD: ALL\" >> /etc/sudoers\n\n#################################################################################################\n#       Node Security\n#            Early because it needs to run as root.\n#            Requires nodejs npm\n#\n## retirejs locked to most recent pre-2.x.x version (2.x.x breaks the retirejs task)\nRUN npm install -g nsp retire@1.6.2 eslint eslint-plugin-scanjs-rules eslint-plugin-no-unsafe-innerhtml && npm cache clean --force;\nRUN ln -s /usr/bin/nodejs /usr/bin/node\n\n#################################################################################################\n#       User\n#\nRUN useradd -ms /bin/bash --groups sudo glue\nUSER glue\n\n#################################################################################################\n#       RVM / Ruby\n#\n#\nRUN gpg --batch --keyserver hkp://ha.pool.sks-keyservers.net --recv-keys 409B6B1796C275462A1703113804BB82D39DC0E3 7D2BAF1CF37B13E2069D6956105BD0E739499BDB\nRUN /bin/bash -l -c \"curl -L https://get.rvm.io | bash -s stable\"\nRUN /bin/bash -l -c \"source ~/.rvm/scripts/rvm\"\nRUN /bin/bash -l -c \"rvm requirements\"\nRUN /bin/bash -l -c \"rvm install 2.3.1\"\nRUN /bin/bash -l -c \"rvm use 2.3.1 --default\"\nRUN /bin/bash -l -c \"gem install curb --no-document\"\nENV PATH $PATH:/home/glue/.rvm/rubies/ruby-2.3.1/bin\n\n#################################################################################################\n#       Python\n#\nRUN /bin/bash -l -c \"sudo pip install --upgrade pip\"\nRUN /bin/bash -l -c \"sudo pip install bandit\"\nRUN /bin/bash -l -c \"sudo pip install awsscout2\"\n\n#################################################################################################\n#       Java\n#\n## JDK needed for Dependency Check Maven plugin\nRUN sudo apt-get install --no-install-recommends -y software-properties-common && rm -rf /var/lib/apt/lists/*;\nRUN sudo apt-get update\nRUN sudo apt-get install --no-install-recommends -y default-jre && rm -rf /var/lib/apt/lists/*;\n\nRUN /bin/bash -l -c \"mkdir -p /home/glue/tools\"\nWORKDIR /home/glue/tools/\n\n#################################################################################################\n#       Truffle Hog\n#\n# RUN /bin/bash -l -c \"sudo pip install truffleHog\"\nRUN git clone https://github.com/runako/truffleHog.git\nWORKDIR /home/glue/tools/truffleHog\nRUN git checkout rg-local-scan\n\nWORKDIR /home/glue/tools/\n\n# OWASP DEPENDENCY CHECK (needs unzip and default-jre)\nRUN curl -f -L https://dl.bintray.com/jeremy-long/owasp/dependency-check-1.4.3-release.zip --output owasp-dep-check.zip\nRUN unzip owasp-dep-check.zip\n\n# Maven\nRUN sudo apt-get install --no-install-recommends -y maven && rm -rf /var/lib/apt/lists/*;\n\n# FINDBUGS (Experimental)\n#RUN curl -L http://downloads.sourceforge.net/project/findbugs/findbugs/3.0.1/findbugs-3.0.1.zip --output findbugs.zip\n#RUN unzip findbugs.zip\n#RUN curl -L http://search.maven.org/remotecontent?filepath=com/h3xstream/findsecbugs/findsecbugs-plugin/1.4.4/findsecbugs-plugin-1.4.4.jar > findbugs-3.0.1/plugin/findsecbugs.jar\n#RUN git clone https://github.com/find-sec-bugs/find-sec-bugs.git\n\n# SBT plugin (for Scala)\nRUN sudo apt-get update\nRUN echo \"deb https://dl.bintray.com/sbt/debian /\" | sudo tee -a /etc/apt/sources.list.d/sbt.list\nRUN sudo apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv 2EE0EA64E40A89B84B2DF73499E82A75642AC823\nRUN sudo apt-get install -y --no-install-recommends apt-transport-https && rm -rf /var/lib/apt/lists/*;\nRUN sudo apt-get update\nRUN sudo apt-get install -y --no-install-recommends sbt && rm -rf /var/lib/apt/lists/*;\n\nRUN mkdir -p /home/glue/.sbt/0.13/plugins\nRUN echo \"addSbtPlugin(\\\"net.vonbuchholtz\\\" % \\\"sbt-dependency-check\\\" % \\\"0.1.4\\\")\" >  /home/glue/.sbt/0.13/plugins/build.sbt\n\n#################################################################################################\n#       Glue App\n#\n\n## Working Dir\nRUN /bin/bash -l -c \"mkdir -p /home/glue/tmp\"\nWORKDIR /home/glue/\n\n## Core Pipeline (and ruby tools)\nRUN /bin/bash -l -c \"git clone https://github.com/OWASP/glue.git\"\n#RUN /bin/bash -l -c \"mkdir -p /home/glue/glue\"\nADD . /home/glue/glue\n\nWORKDIR /home/glue/glue\nRUN /bin/bash -l -c \"gem install bundler; bundle install -j20; rm owasp-glue*.gem; gem build glue.gemspec; gem install owasp-glue*.gem;\"\n\nENTRYPOINT [\"glue\"]\nCMD [\"-h\"]\n"
}