{
  "startTime": 1674220306860,
  "endTime": 1674220308366,
  "originalSmells": [
    {
      "rule": "wgetUseHttpsUrl",
      "position": {
        "lineStart": 10,
        "lineEnd": 10,
        "columnStart": 4,
        "columnEnd": 88
      }
    },
    {
      "rule": "apkAddUseNoCache",
      "position": {
        "lineStart": 38,
        "lineEnd": 38,
        "columnStart": 4,
        "columnEnd": 15
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "#upstream https://github.com/sheepkiller/kafka-manager-docker\nFROM slpcat/jdk:v1.8-alpine as builder\nMAINTAINER 若虚 <slpcat@qq.com>\n\nENV SBT_VERSION 1.3.8\nENV SCALA_VERSION 2.12.10\nENV SCALA_HOME /usr/local/share/scala\nRUN export PATH=$PATH:${SCALA_HOME}/bin\n\n#install scala and sbt\nRUN wget https://downloads.typesafe.com/scala/${SCALA_VERSION}/scala-${SCALA_VERSION}.tgz && \\\n    #wget http://repo.typesafe.com/typesafe/ivy-releases/org.scala-sbt/sbt-launch/${SBT_VERSION}/sbt-launch.jar && \\\n    wget https://dl.bintray.com/sbt/maven-releases/org/scala-sbt/sbt-launch/${SBT_VERSION}/sbt-launch.jar && \\\n    mkdir -p ~/bin && touch ~/bin/sbt && \\\n    echo '#!/bin/sh' | tee -a ~/bin/sbt && \\\n    echo 'SBT_OPTS=\"-Xms512M -Xmx1536M -Xss1M -XX:+CMSClassUnloadingEnabled\"' | tee -a ~/bin/sbt && \\\n    echo 'java $SBT_OPTS -jar /sbt-launch.jar \"$@\"' | tee -a ~/bin/sbt && \\\n    chmod +x ~/bin/sbt && \\\n    ln -s ~/bin/sbt /usr/local/bin/sbt && \\\n    tar xvzf scala-${SCALA_VERSION}.tgz && \\\n    mv scala-${SCALA_VERSION} ${SCALA_HOME} && \\\n    rm -f scala-${SCALA_VERSION}.tgz\n\n#change sbt repo\nCOPY repositories /root/.sbt/repositories\n\n# compile a non-existent project to pre-download sbt dependencies\nRUN sbt compile\n\nENV \\\n    ZK_HOSTS=localhost:2181 \\\n    KM_VERSION=3.0.0.5 \\\n    KM_REVISION=eba0b95ac4e4469b536a36c8ee2c46cfde2278a4 \\\n    KM_CONFIGFILE=\"conf/application.conf\"\n\nADD start-kafka-manager.sh /kafka-manager-${KM_VERSION}/start-kafka-manager.sh\n\nRUN \\\n    apk add --no-cache git && \\\n    mkdir -p /tmp && \\\n    cd /tmp && \\\n    #git clone https://github.com/yahoo/kafka-manager && \\\n    git clone https://github.com/yahoo/CMAK.git && \\\n    cd /tmp/CMAK && \\\n    git checkout ${KM_REVISION} && \\\n    #echo 'scalacOptions ++= Seq(\"-Xmax-classfile-name\", \"200\")' >> build.sbt && \\\n    sbt clean dist && \\\n    unzip  -d / ./target/universal/kafka-manager-${KM_VERSION}.zip && \\\n    rm -fr /tmp/* /root/.sbt /root/.ivy2 && \\\n    chmod +x /kafka-manager-${KM_VERSION}/start-kafka-manager.sh\n\nWORKDIR /kafka-manager-${KM_VERSION}\n\nEXPOSE 9000\nENTRYPOINT [\"./start-kafka-manager.sh\"]\n"
}