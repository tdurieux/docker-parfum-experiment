{
  "startTime": 1674255016321,
  "endTime": 1674255017192,
  "originalSmells": [
    {
      "rule": "configureShouldUseBuildFlag",
      "position": {
        "lineStart": 53,
        "lineEnd": 59,
        "columnStart": 4,
        "columnEnd": 20
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM alpine:3.10\n\nLABEL org.opencontainers.image.title=\"Zabbix Java Gateway\" \\\n      org.opencontainers.image.authors=\"Alexey Pustovalov <alexey.pustovalov@zabbix.com>\" \\\n      org.opencontainers.image.vendor=\"Zabbix LLC\" \\\n      org.opencontainers.image.url=\"https://zabbix.com/\" \\\n      org.opencontainers.image.description=\"Zabbix Java Gateway performs native support for monitoring JMX applications\" \\\n      org.opencontainers.image.licenses=\"GPL v2.0\"\n\nSTOPSIGNAL SIGTERM\n\nRUN set -eux && \\\n    addgroup -S -g 1000 zabbix && \\\n    adduser -S \\\n            -D -G zabbix \\\n            -u 999 \\\n            -h /var/lib/zabbix/ \\\n        zabbix && \\\n    mkdir -p /etc/zabbix/ && \\\n    chown --quiet -R zabbix:root /etc/zabbix && \\\n    apk add --clean-protected --no-cache \\\n            bash \\\n            openjdk8-jre-base && \\\n    rm -rf /var/cache/apk/*\n\nARG MAJOR_VERSION=4.4\nARG ZBX_VERSION=${MAJOR_VERSION}.4\nARG ZBX_SOURCES=https://git.zabbix.com/scm/zbx/zabbix.git\n\nENV TERM=xterm ZBX_VERSION=${ZBX_VERSION} ZBX_SOURCES=${ZBX_SOURCES} \\\n    PATH=${PATH}:/usr/lib/jvm/default-jvm/bin/ JAVA_HOME=/usr/lib/jvm/default-jvm\n\nLABEL org.opencontainers.image.documentation=\"https://www.zabbix.com/documentation/${MAJOR_VERSION}/manual/installation/containers\" \\\n      org.opencontainers.image.version=\"${ZBX_VERSION}\" \\\n      org.opencontainers.image.source=\"${ZBX_SOURCES}\"\n\nRUN set -eux && \\\n    apk add --no-cache --virtual build-dependencies \\\n            autoconf \\\n            automake \\\n            coreutils \\\n            pkgconf \\\n            git \\\n            g++ \\\n            make \\\n            openjdk8 && \\\n    cd /tmp/ && \\\n    git clone ${ZBX_SOURCES} --branch ${ZBX_VERSION} --depth 1 --single-branch zabbix-${ZBX_VERSION} && \\\n    cd /tmp/zabbix-${ZBX_VERSION} && \\\n    zabbix_revision=`git rev-parse --short HEAD` && \\\n    sed -i \"s/{ZABBIX_REVISION}/$zabbix_revision/g\" include/version.h && \\\n    sed -i \"s/{ZABBIX_REVISION}/$zabbix_revision/g\" src/zabbix_java/src/com/zabbix/gateway/GeneralInformation.java && \\\n    ./bootstrap.sh && \\\n    ./configure --build=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\" \\\n            --datadir=/usr/lib \\\n            --libdir=/usr/lib/zabbix \\\n            --sysconfdir=/etc/zabbix \\\n            --prefix=/usr \\\n            --enable-java \\\n            --silent && \\\n    make -j\"$(nproc)\" -s && \\\n    mkdir -p /usr/sbin/zabbix_java/ && \\\n    cp -r src/zabbix_java/bin /usr/sbin/zabbix_java/ && \\\n    cp -r src/zabbix_java/lib /usr/sbin/zabbix_java/ && \\\n    rm -rf /usr/sbin/zabbix_java/lib/*.xml && \\\n    cd /tmp/ && \\\n    rm -rf /tmp/zabbix-${ZBX_VERSION}/ && \\\n    apk del --purge --no-network \\\n            build-dependencies && \\\n    rm -rf /var/cache/apk/*\n\nEXPOSE 10052/TCP\n\nWORKDIR /var/lib/zabbix\n\nVOLUME [\"/usr/sbin/zabbix_java/ext_lib\"]\n\nCOPY [\"conf/etc/zabbix/zabbix_java_gateway_logback.xml\", \"/etc/zabbix/\"]\nCOPY [\"conf/usr/sbin/zabbix_java_gateway\", \"/usr/sbin/\"]\nCOPY [\"docker-entrypoint.sh\", \"/usr/bin/\"]\n\nENTRYPOINT [\"docker-entrypoint.sh\"]\n\nUSER zabbix\n\nCMD [\"/usr/sbin/zabbix_java_gateway\"]\n"
}