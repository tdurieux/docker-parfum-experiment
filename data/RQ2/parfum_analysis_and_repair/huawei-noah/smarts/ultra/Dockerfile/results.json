{
  "startTime": 1674251403775,
  "endTime": 1674251404978,
  "originalSmells": [
    {
      "rule": "wgetUseHttpsUrl",
      "position": {
        "lineStart": 70,
        "lineEnd": 70,
        "columnStart": 4,
        "columnEnd": 56
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 57,
        "lineEnd": 57,
        "columnStart": 4,
        "columnEnd": 29
      }
    },
    {
      "rule": "aptGetInstallUseY",
      "position": {
        "lineStart": 8,
        "lineEnd": 8,
        "columnStart": 4,
        "columnEnd": 35
      }
    },
    {
      "rule": "aptGetInstallUseY",
      "position": {
        "lineStart": 10,
        "lineEnd": 10,
        "columnStart": 4,
        "columnEnd": 39
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 8,
        "lineEnd": 8,
        "columnStart": 4,
        "columnEnd": 35
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 10,
        "lineEnd": 10,
        "columnStart": 4,
        "columnEnd": 39
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 37,
        "lineEnd": 38,
        "columnStart": 4,
        "columnEnd": 34
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 42,
        "lineEnd": 52,
        "columnStart": 4,
        "columnEnd": 22
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 65,
        "lineEnd": 67,
        "columnStart": 4,
        "columnEnd": 12
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 85,
        "lineEnd": 86,
        "columnStart": 4,
        "columnEnd": 7
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 88,
        "lineEnd": 88,
        "columnStart": 4,
        "columnEnd": 56
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 90,
        "lineEnd": 90,
        "columnStart": 4,
        "columnEnd": 43
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 8,
        "lineEnd": 8,
        "columnStart": 4,
        "columnEnd": 35
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 10,
        "lineEnd": 10,
        "columnStart": 4,
        "columnEnd": 39
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 65,
        "lineEnd": 67,
        "columnStart": 4,
        "columnEnd": 12
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 85,
        "lineEnd": 86,
        "columnStart": 4,
        "columnEnd": 7
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 88,
        "lineEnd": 88,
        "columnStart": 4,
        "columnEnd": 56
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 90,
        "lineEnd": 90,
        "columnStart": 4,
        "columnEnd": 43
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 8,
        "lineEnd": 8,
        "columnStart": 4,
        "columnEnd": 35
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 10,
        "lineEnd": 10,
        "columnStart": 4,
        "columnEnd": 39
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 37,
        "lineEnd": 38,
        "columnStart": 4,
        "columnEnd": 34
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 42,
        "lineEnd": 52,
        "columnStart": 4,
        "columnEnd": 22
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 65,
        "lineEnd": 67,
        "columnStart": 4,
        "columnEnd": 12
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 85,
        "lineEnd": 86,
        "columnStart": 4,
        "columnEnd": 7
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 88,
        "lineEnd": 88,
        "columnStart": 4,
        "columnEnd": 56
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 90,
        "lineEnd": 90,
        "columnStart": 4,
        "columnEnd": 43
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 8,
        "lineEnd": 8,
        "columnStart": 4,
        "columnEnd": 62
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 10,
        "lineEnd": 10,
        "columnStart": 4,
        "columnEnd": 66
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 65,
        "lineEnd": 67,
        "columnStart": 4,
        "columnEnd": 12
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 85,
        "lineEnd": 86,
        "columnStart": 4,
        "columnEnd": 7
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 88,
        "lineEnd": 88,
        "columnStart": 4,
        "columnEnd": 80
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 90,
        "lineEnd": 90,
        "columnStart": 4,
        "columnEnd": 67
      }
    }
  ],
  "repairedDockerfile": "FROM nvidia/cuda:10.1-cudnn7-runtime-ubuntu18.04\n\nARG DEBIAN_FRONTEND=noninteractive\n\n#------------------------------------------------------------------------------\n# Certificate Setup\n#------------------------------------------------------------------------------\n#RUN apt-get update && apt-get install -y openssh-server\nRUN apt-get install -y --no-install-recommends ca-certificates && rm -rf /var/lib/apt/lists/*;\nRUN update-ca-certificates\nRUN apt-get install -y --no-install-recommends apt-transport-https && rm -rf /var/lib/apt/lists/*;\n\n#------------------------------------------------------------------------------\n# Set timezone\n#------------------------------------------------------------------------------\n# Prevent tzdata from trying to be interactive\n# ENV TZ=Europe/Minsk\n# RUN ln -snf /usr/share/zoneinfo/$TZ /etc/localtime && echo $TZ > /etc/timezone\nRUN echo \"Acquire::Check-Valid-Until \\\"false\\\";\\nAcquire::Check-Date \\\"false\\\";\" | \\\n          cat > /etc/apt/apt.conf.d/10no--check-valid-until\n\n#------------------------------------------------------------------------------\n# Nvidia Drivers Installation\n#------------------------------------------------------------------------------\n#ENV NVIDIA_DRIVER_CAPABILITIES ${NVIDIA_DRIVER_CAPABILITIES},display\n#RUN apt-get update && apt-get install --no-install-recommends -y mesa-utils \\\n#    && rm -rf /var/lib/apt/lists/*\n\n#------------------------------------------------------------------------------\n# Install dependencies\n#------------------------------------------------------------------------------\n# http://bugs.python.org/issue19846\n# > At the moment, setting \"LANG=C\" on a Linux system *fundamentally breaks Python 3*, and that's not OK.\nENV LANG C.UTF-8\n\nRUN echo \"Installing dependencies\"\nRUN apt-get update --fix-missing && \\\n    apt-get install --no-install-recommends -y \\\n        software-properties-common && \\\n    add-apt-repository -y ppa:deadsnakes/ppa && \\\n    add-apt-repository -y ppa:sumo/stable && \\\n    apt-get update && \\\n    apt-get install --no-install-recommends -y \\\n        wget \\\n        python3.7 \\\n        python3.7-venv \\\n        sumo \\\n        sumo-tools \\\n        sumo-doc \\\n        libspatialindex-dev \\\n        libsm6 \\\n        libxext6 \\\n        libxrender-dev && rm -rf /var/lib/apt/lists/*;\n\n# Install pip dependencies\nRUN wget https://bootstrap.pypa.io/get-pip.py -O get-pip.py && \\\n    python3.7 get-pip.py && \\\n    pip install --no-cache-dir --upgrade pip\n\n#------------------------------------------------------------------------------\n# Display\n#------------------------------------------------------------------------------\nRUN echo \"Installing XDummy\"\nENV DISPLAY :1\n\nRUN apt-get install --no-install-recommends -y \\\n    xserver-xorg-video-dummy \\\n    x11-apps && rm -rf /var/lib/apt/lists/*;\n\n# VOLUME /tmp/.X11-unix\nRUN wget -O /etc/X11/xorg.conf https://xpra.org/xorg.conf\n\n#------------------------------------------------------------------------------\n# Simulator\n#------------------------------------------------------------------------------\nRUN echo \"Setup SMARTS Dependencies\"\nENV SUMO_HOME /usr/share/sumo\n\n#------------------------------------------------------------------------------\n# Fix Git\n#------------------------------------------------------------------------------\nRUN cp /etc/apt/sources.list /etc/apt/sources.list~ && \\\n    sed -i 's/# deb-src/deb-src/' /etc/apt/sources.list && \\\n    apt-get update\n\nRUN apt-get install --no-install-recommends -y \\\n    git && rm -rf /var/lib/apt/lists/*;\n\nRUN apt-get install --no-install-recommends build-essential fakeroot dpkg-dev -y && \\\n    apt-get build-dep git -y && \\\n    apt-get install --no-install-recommends libcurl4-openssl-dev -y && \\\n    cd ~ && \\\n    mkdir source-git && \\\n    cd source-git/ && \\\n    apt-get source git && \\\n    cd git-2.*.*/ && \\\n    sed -i 's/libcurl4-gnutls-dev/libcurl4-openssl-dev/' ./debian/control && \\\n    sed -i '/TEST\\s*=\\s*test/d' ./debian/rules && \\\n    dpkg-buildpackage -rfakeroot -b -uc -us && \\\n    dpkg -i ../git_*ubuntu*.deb && rm -rf /var/lib/apt/lists/*;\n\n#------------------------------------------------------------------------------\n# Clean-up\n#------------------------------------------------------------------------------\nRUN echo \"Cleaning-up\"\nRUN apt-get autoremove && \\\n    rm -rf /var/lib/apt/lists/*\n\n#------------------------------------------------------------------------------\n# Copy src files\n#------------------------------------------------------------------------------\n# Install SMARTS\nRUN mkdir -p /SMARTS\n#COPY ./setup.py /SMARTS/\n\n# Add https://github.com/krallin/tini\nARG TINI_VERSION=v0.18.0\nADD https://github.com/krallin/tini/releases/download/${TINI_VERSION}/tini /tini\nRUN chmod +x /tini\nCOPY entrypoint.sh /usr/local/bin/entrypoint.sh\nRUN chmod +x /usr/local/bin/entrypoint.sh\n\n\n#------------------------------------------------------------------------------\n# Entrypoint\n#------------------------------------------------------------------------------\n# For Envision\nEXPOSE 8081\n\n# TODO: Find a better place to put this (e.g. through systemd). As it stands now ctrl-c\n#       could close x-server. Even though it's \"running in the background\".\nENTRYPOINT [\"/tini\", \"--\", \"entrypoint.sh\"]\n\nCMD [\"/bin/bash\"]\n# Once in container can then run,\n#   python3 examples/competition\n"
}