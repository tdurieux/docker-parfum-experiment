{
  "startTime": 1674255101539,
  "endTime": 1674255102386,
  "originalSmells": [
    {
      "rule": "sha256sumEchoOneSpaces",
      "position": {
        "lineStart": 64,
        "lineEnd": 64,
        "columnStart": 1,
        "columnEnd": 68
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "# https://github.com/docker-library/mysql/blob/master/8.0/Dockerfile.debian\nFROM mysql:8\n\n# mysql\n#======\n# logging dir\nRUN mkdir /var/log/mysql; chown mysql:mysql /var/log/mysql\n\n# my.cnf parameters: empty sql-mode, logs\nRUN sed -i '/\\[mysqld\\]/a sql-mode= ' /etc/mysql/my.cnf; \\\n\tsed -i '/\\[mysqld\\]/a log_error=/var/log/mysql/mysql_error.log ' /etc/mysql/my.cnf; \\\n\tsed -i '/\\[mysqld\\]/a general_log_file=/var/log/mysql/mysql.log ' /etc/mysql/my.cnf; \\\n\tsed -i '/\\[mysqld\\]/a general_log=0 ' /etc/mysql/my.cnf; \\\n\tsed -i '/\\[mysqld\\]/a slow_query_log_file=/var/log/mysql/mysql_slow.log ' /etc/mysql/my.cnf; \\\n\tsed -i '/\\[mysqld\\]/a slow_query_log=1 ' /etc/mysql/my.cnf;\n\n# avoids errors with 'apt-get update' running after\nRUN rm /etc/apt/sources.list.d/mysql.list\n\n# java, taken from: https://github.com/docker-library/openjdk/blob/master/17/jdk/slim-buster/Dockerfile\n#======================================================================================================\nRUN set -eux; \\\n\tapt-get update; \\\n\tapt-get install -y --no-install-recommends \\\n# utilities for keeping Debian and OpenJDK CA certificates in sync\n\t\tca-certificates p11-kit \\\n\t; \\\n\trm -rf /var/lib/apt/lists/*\n\nENV JAVA_HOME /usr/local/openjdk-17\nENV PATH $JAVA_HOME/bin:$PATH\n\n# Default to UTF-8 file.encoding\nENV LANG C.UTF-8\n\n# https://jdk.java.net/\n# >\n# > Java Development Kit builds, from Oracle\n# >\nENV JAVA_VERSION 17.0.2\n\nRUN set -eux; \\\n\n\tarch=\"$(dpkg --print-architecture)\"; \\\n\tcase \"$arch\" in \\\n\t\t'amd64') \\\n\t\t\tdownloadUrl='https://download.java.net/java/GA/jdk17.0.2/dfd4a8d0985749f896bed50d7138ee7f/8/GPL/openjdk-17.0.2_linux-x64_bin.tar.gz'; \\\n\t\t\tdownloadSha256='0022753d0cceecacdd3a795dd4cea2bd7ffdf9dc06e22ffd1be98411742fbb44'; \\\n\t\t\t;; \\\n\t\t'arm64') \\\n\t\t\tdownloadUrl='https://download.java.net/java/GA/jdk17.0.2/dfd4a8d0985749f896bed50d7138ee7f/8/GPL/openjdk-17.0.2_linux-aarch64_bin.tar.gz'; \\\n\t\t\tdownloadSha256='13bfd976acf8803f862e82c7113fb0e9311ca5458b1decaef8a09ffd91119fa4'; \\\n\t\t\t;; \\\n\t\t*) echo >&2 \"error: unsupported architecture: '$arch'\"; exit 1 ;; \\\n\tesac; \\\n\n\tsavedAptMark=\"$(apt-mark showmanual)\"; \\\n\tapt-get update; \\\n\tapt-get install -y --no-install-recommends \\\n\t\twget \\\n\t; \\\n\trm -rf /var/lib/apt/lists/*; \\\n\n\twget --progress=dot:giga -O openjdk.tgz \"$downloadUrl\"; \\\n\techo \"$downloadSha256  *openjdk.tgz\" | sha256sum --strict --check -; \\\n\n\tmkdir -p \"$JAVA_HOME\"; \\\n\ttar --extract \\\n\t\t--file openjdk.tgz \\\n\t\t--directory \"$JAVA_HOME\" \\\n\t\t--strip-components 1 \\\n\t\t--no-same-owner \\\n\t; \\\n\trm openjdk.tgz*; \\\n\n\tapt-mark auto '.*' > /dev/null; \\\n\t[ -z \"$savedAptMark\" ] || apt-mark manual $savedAptMark > /dev/null; \\\n\tapt-get purge -y --auto-remove -o APT::AutoRemove::RecommendsImportant=false; \\\n\n# update \"cacerts\" bundle to use Debian's CA certificates (and make sure it stays up-to-date with changes to Debian's store)\n# see https://github.com/docker-library/openjdk/issues/327\n#     http://rabexc.org/posts/certificates-not-working-java#comment-4099504075\n#     https://salsa.debian.org/java-team/ca-certificates-java/blob/3e51a84e9104823319abeb31f880580e46f45a98/debian/jks-keystore.hook.in\n#     https://git.alpinelinux.org/aports/tree/community/java-cacerts/APKBUILD?id=761af65f38b4570093461e6546dcf6b179d2b624#n29\n\t{ \\\n\t\techo '#!/usr/bin/env bash'; \\\n\t\techo 'set -Eeuo pipefail'; \\\n\t\techo 'trust extract --overwrite --format=java-cacerts --filter=ca-anchors --purpose=server-auth \"$JAVA_HOME/lib/security/cacerts\"'; \\\n\t} > /etc/ca-certificates/update.d/docker-openjdk; \\\n\tchmod +x /etc/ca-certificates/update.d/docker-openjdk; \\\n\t/etc/ca-certificates/update.d/docker-openjdk; \\\n\n# https://github.com/docker-library/openjdk/issues/331#issuecomment-498834472\n\tfind \"$JAVA_HOME/lib\" -name '*.so' -exec dirname '{}' ';' | sort -u > /etc/ld.so.conf.d/docker-openjdk.conf; \\\n\tldconfig; \\\n\n# https://github.com/docker-library/openjdk/issues/212#issuecomment-420979840\n# https://openjdk.java.net/jeps/341\n\tjava -Xshare:dump; \\\n\n# basic smoke test\n\tfileEncoding=\"$(echo 'System.out.println(System.getProperty(\"file.encoding\"))' | jshell -s -)\"; [ \"$fileEncoding\" = 'UTF-8' ]; rm -rf ~/.java; \\\n\tjavac --version; \\\n\tjava --version\n\n# bgerp files\n#======\nRUN mkdir /tmp/bgerp\nCOPY files/bgerp.properties /tmp/bgerp\nCOPY files/db_create.sql /tmp/bgerp\n\nCOPY docker-bgerp-base.sh /usr/local/bin/\nRUN chmod +x /usr/local/bin/docker-bgerp-base.sh\nENTRYPOINT []\n"
}