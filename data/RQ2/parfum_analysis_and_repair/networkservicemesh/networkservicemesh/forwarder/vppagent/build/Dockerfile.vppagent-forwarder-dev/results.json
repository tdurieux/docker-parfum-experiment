{
  "startTime": 1674219301503,
  "endTime": 1674219302223,
  "originalSmells": [
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 22,
        "lineEnd": 22,
        "columnStart": 22,
        "columnEnd": 85
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 22,
        "lineEnd": 22,
        "columnStart": 22,
        "columnEnd": 85
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "ARG VPP_AGENT\nARG VPP_DEV\nARG REPO\nARG GO_VERSION\n\nFROM golang:${GO_VERSION}-alpine as build\nFROM ${VPP_DEV} as vpp_dev\nFROM ${VPP_AGENT} as vpp_agent\n\nENV POSTMORTEM_DATA_LOCATION=/var/tmp/nsm-postmortem/vpp-forwarder\n\nCOPY forwarder/vppagent/conf/supervisord/supervisord-dev.conf  /opt/vpp-agent/dev/supervisor.conf\nCOPY forwarder/vppagent/scripts/prepare_postmortem.sh /usr/bin/prepare_postmortem.sh\nCOPY forwarder/vppagent/scripts/vpp_listener.py /usr/bin/vpp_listener.py\n\nCOPY --from=vpp_dev \\\n    /opt/vpp-agent/dev/vpp/build-root/vpp-dev_*.deb \\\n    /opt/vpp-agent/dev/vpp/build-root/vpp-dbg_*.deb \\\n    /opt/vpp-agent/dev/vpp/build-root/libvppinfra-dev_*.deb \\\n    /opt/vpp-agent/dev/vpp/build-root/vpp-api-python_*.deb \\\n /opt/vpp/\n\nRUN apt-get update && apt-get install --no-install-recommends -y zip python python-cffi python-enum34 python3 \\\n  && cd /opt/vpp/ \\\n  && dpkg -i libvppinfra-dev_*.deb vpp-dev_*.deb vpp-dbg_*.deb vpp-api-python_*.deb \\\n  && rm *.deb && rm -rf /var/lib/apt/lists/*;\n\nRUN rm /opt/vpp-agent/dev/etcd.conf; echo 'Endpoint: \"localhost:9111\"' > /opt/vpp-agent/dev/grpc.conf;echo \"disabled: true\" > /opt/vpp-agent/dev/telemetry.conf\nCOPY forwarder/vppagent/conf/vpp/startup.conf /etc/vpp/vpp.conf\nCOPY forwarder/vppagent/conf/supervisord/supervisord.conf /opt/vpp-agent/dev/supervisor.conf\n\nFROM golang:${GO_VERSION}-alpine as build_vpp\nARG VERSION=unspecified\nARG VENDORING\nARG GOPROXY\n\nENV GOPROXY=${GOPROXY}\nENV PACKAGEPATH=github.com/networkservicemesh/networkservicemesh/forwarder\nENV GO111MODULE=on\n\nRUN mkdir /root/networkservicemesh\nADD [\".\",\"/root/networkservicemesh\"]\nWORKDIR /root/networkservicemesh/forwarder\nRUN VENDORING=${VENDORING} ../scripts/go-mod-download.sh\n\nRUN CGO_ENABLED=0 GOOS=linux go build ${VENDORING} -ldflags \"-extldflags '-static' -X  main.version=${VERSION}\" -o /go/bin/vppagent-forwarder ./vppagent/cmd\n\nFROM vpp_agent\nCOPY --from=build_vpp /go/bin/vppagent-forwarder /bin/vppagent-forwarder\n"
}