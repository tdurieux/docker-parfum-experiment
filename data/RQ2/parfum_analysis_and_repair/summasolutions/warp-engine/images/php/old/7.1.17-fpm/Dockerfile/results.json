{
  "startTime": 1674216331604,
  "endTime": 1674216333143,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 86,
        "lineEnd": 86,
        "columnStart": 4,
        "columnEnd": 50
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 88,
        "lineEnd": 88,
        "columnStart": 7,
        "columnEnd": 79
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 120,
        "lineEnd": 120,
        "columnStart": 4,
        "columnEnd": 46
      }
    },
    {
      "rule": "npmCacheCleanAfterInstall",
      "position": {
        "lineStart": 89,
        "lineEnd": 89,
        "columnStart": 7,
        "columnEnd": 30
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 8,
        "lineEnd": 8,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 10,
        "lineEnd": 10,
        "columnStart": 4,
        "columnEnd": 33
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 13,
        "lineEnd": 16,
        "columnStart": 2,
        "columnEnd": 12
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 28,
        "lineEnd": 57,
        "columnStart": 2,
        "columnEnd": 12
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 80,
        "lineEnd": 80,
        "columnStart": 4,
        "columnEnd": 35
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 87,
        "lineEnd": 87,
        "columnStart": 7,
        "columnEnd": 48
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 92,
        "lineEnd": 92,
        "columnStart": 4,
        "columnEnd": 44
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 113,
        "lineEnd": 113,
        "columnStart": 4,
        "columnEnd": 32
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 8,
        "lineEnd": 8,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 10,
        "lineEnd": 10,
        "columnStart": 4,
        "columnEnd": 33
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 13,
        "lineEnd": 16,
        "columnStart": 2,
        "columnEnd": 12
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 28,
        "lineEnd": 57,
        "columnStart": 2,
        "columnEnd": 12
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 87,
        "lineEnd": 87,
        "columnStart": 7,
        "columnEnd": 48
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 92,
        "lineEnd": 92,
        "columnStart": 4,
        "columnEnd": 44
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 113,
        "lineEnd": 113,
        "columnStart": 4,
        "columnEnd": 32
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 8,
        "lineEnd": 8,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 10,
        "lineEnd": 10,
        "columnStart": 4,
        "columnEnd": 33
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 13,
        "lineEnd": 16,
        "columnStart": 2,
        "columnEnd": 12
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 28,
        "lineEnd": 57,
        "columnStart": 2,
        "columnEnd": 12
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 80,
        "lineEnd": 80,
        "columnStart": 4,
        "columnEnd": 35
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 87,
        "lineEnd": 87,
        "columnStart": 7,
        "columnEnd": 48
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 92,
        "lineEnd": 92,
        "columnStart": 4,
        "columnEnd": 44
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 113,
        "lineEnd": 113,
        "columnStart": 4,
        "columnEnd": 32
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 8,
        "lineEnd": 8,
        "columnStart": 4,
        "columnEnd": 51
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 10,
        "lineEnd": 10,
        "columnStart": 4,
        "columnEnd": 57
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 13,
        "lineEnd": 16,
        "columnStart": 2,
        "columnEnd": 12
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 28,
        "lineEnd": 57,
        "columnStart": 2,
        "columnEnd": 12
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 92,
        "lineEnd": 92,
        "columnStart": 4,
        "columnEnd": 68
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 113,
        "lineEnd": 113,
        "columnStart": 4,
        "columnEnd": 56
      }
    }
  ],
  "repairedDockerfile": "FROM php:7.1.17-fpm\n\nLABEL maintainer=\"Matias Anoniz <matiasanoniz@gmail.com>\"\n\nENV PHP_EXTRA_CONFIGURE_ARGS --enable-fpm --with-fpm-user=www-data --with-fpm-group=www-data --enable-intl --enable-opcache --enable-zip\n\nRUN apt-get update\n\nRUN apt-get install --no-install-recommends -y cron && rm -rf /var/lib/apt/lists/*;\n\nRUN apt-get install --no-install-recommends -y supervisor && rm -rf /var/lib/apt/lists/*;\n\nRUN \\\n  apt-get install --no-install-recommends -y \\\n  libcurl4-gnutls-dev \\\n  libxml2-dev \\\n  libssl-dev && rm -rf /var/lib/apt/lists/*;\n\nRUN \\\n    /usr/local/bin/docker-php-ext-install \\\n    dom \\\n    pcntl \\\n    phar \\\n    posix\n\n# Configure PHP\n# php module build deps\nRUN \\\n  apt-get install --no-install-recommends -y \\\n  g++ \\\n  autoconf \\\n  libbz2-dev \\\n  libltdl-dev \\\n  libjpeg62-turbo-dev \\\n  libfreetype6-dev \\\n  libxpm-dev \\\n  libimlib2-dev \\\n  libicu-dev \\\n  libmcrypt-dev \\\n  libxslt1-dev \\\n  re2c \\\n  libpng++-dev \\\n  libvpx-dev \\\n  zlib1g-dev \\\n  libgd-dev \\\n  libtidy-dev \\\n  libmagic-dev \\\n  libexif-dev \\\n  file \\\n  libssh2-1-dev \\\n  libjpeg-dev \\\n  gnupg \\\n  git \\\n  curl \\\n  vim \\\n  wget \\\n  librabbitmq-dev \\\n  libzip-dev && rm -rf /var/lib/apt/lists/*;\n\n\n# https://devdocs.magento.com/guides/v2.3/install-gde/system-requirements-tech.html\nRUN \\\n    /usr/local/bin/docker-php-ext-install \\\n    pdo \\\n    sockets \\\n    pdo_mysql \\\n    mysqli \\\n    mbstring \\\n    mcrypt \\\n    hash \\\n    simplexml \\\n    xsl \\\n    soap \\\n    intl \\\n    bcmath \\\n    json \\\n    opcache \\\n    zip\n\nRUN apt-get update && \\\n    apt-get install --no-install-recommends libldap2-dev -y && \\\n    docker-php-ext-configure ldap --with-libdir=lib/x86_64-linux-gnu/ && \\\n    docker-php-ext-install ldap && rm -rf /var/lib/apt/lists/*;\n\n# Install Node, NVM, NPM and Grunt\n\nRUN curl -f -sL https://deb.nodesource.com/setup_11.x | bash - \\\n    && apt-get install --no-install-recommends -y nodejs build-essential \\\n    && curl -f https://raw.githubusercontent.com/creationix/nvm/v0.16.1/install.sh | sh \\\n    && npm i -g grunt-cli yarn && npm cache clean --force; && rm -rf /var/lib/apt/lists/*;\n\n# Install fontforge https://github.com/sapegin/grunt-webfont#installation\nRUN apt-get install --no-install-recommends -y fontforge ttfautohint && rm -rf /var/lib/apt/lists/*;\n\n# Make sure the volume mount point is empty\nRUN rm -rf /var/www/html/*\n\n# Create .ssh file\nRUN mkdir -p /var/www/.ssh\n\n# Set www-data as owner for /var/www\nRUN chown -R www-data:www-data /var/www/\nRUN chmod -R g+w /var/www/\n\n# Create log folders\nRUN rm -rf /var/log/php-fpm # Delete if exist\nRUN mkdir -p /var/log/php-fpm && \\\n    touch /var/log/php-fpm/access.log && \\\n    touch /var/log/php-fpm/fpm-error.log && \\\n    touch /var/log/php-fpm/fpm-php.www.log && \\\n    chown -R www-data:www-data /var/log/php-fpm\n\n# Install module for Postgress\nRUN apt-get install --no-install-recommends -y libpq-dev \\\n    && docker-php-ext-configure pgsql -with-pgsql=/usr/local/pgsql \\\n    && docker-php-ext-install pdo pdo_pgsql pgsql && rm -rf /var/lib/apt/lists/*;\n\nRUN docker-php-ext-configure gd --with-freetype-dir=/usr --with-jpeg-dir=/usr --with-png-dir=/usr \\\n    && docker-php-ext-install gd\n\nRUN curl -f -sS https://getcomposer.org/installer | \\\n  php -- --install-dir=/usr/local/bin --filename=composer\n\nRUN pecl install -o -f xdebug\n\n\n# ENV PHP_MEMORY_LIMIT 2G\n# ENV PHP_PORT 9000\n# ENV PHP_PM dynamic\n# ENV PHP_PM_MAX_CHILDREN 10\n# ENV PHP_PM_START_SERVERS 4\n# ENV PHP_PM_MIN_SPARE_SERVERS 2\n# ENV PHP_PM_MAX_SPARE_SERVERS 6\n# ENV APP_MAGE_MODE default"
}