{
  "startTime": 1674255933326,
  "endTime": 1674255934349,
  "originalSmells": [
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 7,
        "lineEnd": 29,
        "columnStart": 5,
        "columnEnd": 7
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM ubuntu:20.04\n\nARG DEBIAN_FRONTEND=noninteractive\n\n# We need libpython2.7 due to GDB tools\nRUN : \\\n  && apt-get update \\\n  && apt-get install --no-install-recommends -y \\\n    apt-utils \\\n    bison \\\n    ca-certificates \\\n    ccache \\\n    check \\\n    curl \\\n    flex \\\n    git \\\n    gperf \\\n    lcov \\\n    libffi-dev \\\n    libncurses-dev \\\n    libpython2.7 \\\n    libusb-1.0-0-dev \\\n    make \\\n    ninja-build \\\n    python3 \\\n    python3-venv \\\n    unzip \\\n    wget \\\n    xz-utils \\\n    zip \\\n  && apt-get autoremove -y \\\n  && rm -rf /var/lib/apt/lists/* \\\n  && update-alternatives --install /usr/bin/python python /usr/bin/python3 10 \\\n  && :\n\n# To build the image for a branch or a tag of IDF, pass --build-arg IDF_CLONE_BRANCH_OR_TAG=name.\n# To build the image with a specific commit ID of IDF, pass --build-arg IDF_CHECKOUT_REF=commit-id.\n# It is possibe to combine both, e.g.:\n#   IDF_CLONE_BRANCH_OR_TAG=release/vX.Y\n#   IDF_CHECKOUT_REF=<some commit on release/vX.Y branch>.\n# Use IDF_CLONE_SHALLOW=1 to peform shallow clone (i.e. --depth=1 --shallow-submodules)\n# Use IDF_INSTALL_TARGETS to install tools only for selected chip targets (CSV)\n\nARG IDF_CLONE_URL=https://github.com/espressif/esp-idf.git\nARG IDF_CLONE_BRANCH_OR_TAG=master\nARG IDF_CHECKOUT_REF=\nARG IDF_CLONE_SHALLOW=\nARG IDF_INSTALL_TARGETS=all\n\nENV IDF_PATH=/opt/esp/idf\nENV IDF_TOOLS_PATH=/opt/esp\n\nRUN echo IDF_CHECKOUT_REF=$IDF_CHECKOUT_REF IDF_CLONE_BRANCH_OR_TAG=$IDF_CLONE_BRANCH_OR_TAG && \\\n    git clone --recursive \\\n      ${IDF_CLONE_SHALLOW:+--depth=1 --shallow-submodules} \\\n      ${IDF_CLONE_BRANCH_OR_TAG:+-b $IDF_CLONE_BRANCH_OR_TAG} \\\n      $IDF_CLONE_URL $IDF_PATH && \\\n    if [ -n \"$IDF_CHECKOUT_REF\" ]; then \\\n      cd $IDF_PATH && \\\n      if [ -n \"$IDF_CLONE_SHALLOW\" ]; then \\\n        git fetch origin --depth=1 --recurse-submodules ${IDF_CHECKOUT_REF}; \\\n      fi && \\\n      git checkout $IDF_CHECKOUT_REF && \\\n      git submodule update --init --recursive; \\\n    fi\n\n# Install all the required tools\nRUN : \\\n  && update-ca-certificates --fresh \\\n  && $IDF_PATH/tools/idf_tools.py --non-interactive install required --targets=${IDF_INSTALL_TARGETS} \\\n  && $IDF_PATH/tools/idf_tools.py --non-interactive install cmake \\\n  && $IDF_PATH/tools/idf_tools.py --non-interactive install-python-env \\\n  && rm -rf $IDF_TOOLS_PATH/dist \\\n  && :\n\n# Ccache is installed, enable it by default\nENV IDF_CCACHE_ENABLE=1\nCOPY entrypoint.sh /opt/esp/entrypoint.sh\n\nENTRYPOINT [ \"/opt/esp/entrypoint.sh\" ]\nCMD [ \"/bin/bash\" ]\n"
}