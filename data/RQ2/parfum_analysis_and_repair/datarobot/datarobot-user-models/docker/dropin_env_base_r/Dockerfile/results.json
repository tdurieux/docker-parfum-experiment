{
  "startTime": 1674255006700,
  "endTime": 1674255007963,
  "originalSmells": [
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 46,
        "lineEnd": 46,
        "columnStart": 4,
        "columnEnd": 23
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 79,
        "lineEnd": 79,
        "columnStart": 4,
        "columnEnd": 36
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 69,
        "lineEnd": 69,
        "columnStart": 21,
        "columnEnd": 62
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 71,
        "lineEnd": 71,
        "columnStart": 21,
        "columnEnd": 59
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 40,
        "lineEnd": 43,
        "columnStart": 4,
        "columnEnd": 18
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 40,
        "lineEnd": 43,
        "columnStart": 4,
        "columnEnd": 18
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 69,
        "lineEnd": 69,
        "columnStart": 21,
        "columnEnd": 62
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 71,
        "lineEnd": 71,
        "columnStart": 21,
        "columnEnd": 59
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 40,
        "lineEnd": 43,
        "columnStart": 4,
        "columnEnd": 18
      }
    }
  ],
  "repairedDockerfile": "# This is the default base image for use with user models and workflows.\n# It contains a variety of common useful data-science packages and tools.\nFROM ubuntu:18.04\n\nRUN echo '22 Mar 2022'\n\nENV LC_ALL=en_US.UTF-8 LANG=en_US.UTF-8 DEBIAN_FRONTEND=noninteractive\n\nRUN apt-get update && \\\n    apt-get install --no-install-recommends -y \\\n        apt-utils \\\n        curl \\\n        gpg-agent \\\n        software-properties-common \\\n        dirmngr \\\n        libssl-dev \\\n        ca-certificates \\\n        locales \\\n        libcurl4-openssl-dev \\\n        libxml2-dev \\\n        python3-pip \\\n        python3-dev \\\n        openjdk-11-jre \\\n        libgomp1 \\\n        gcc \\\n        libc6-dev \\\n        pandoc \\\n        nginx \\\n        && \\\n        apt-get clean && \\\n    rm -rf /var/lib/apt/lists/* && \\\n    chmod 707 /var/lib/nginx\n\nRUN echo \"en_US.UTF-8 UTF-8\" >> /etc/locale.gen && \\\n    locale-gen en_US.utf8 && \\\n    /usr/sbin/update-locale LANG=en_US.UTF-8\n\nRUN apt-key adv --keyserver keyserver.ubuntu.com --recv-keys E298A3A825C0D65DFD57CBB651716619E084DAB9 && \\\n    add-apt-repository 'deb https://cloud.r-project.org/bin/linux/ubuntu bionic-cran35/'\n\nRUN apt-get install -y --no-install-recommends \\\n        r-cran-littler \\\n        r-base \\\n        r-base-dev && \\\n    rm -rf /var/lib/apt/lists/ && rm -rf /var/lib/apt/lists/*;\n\nRUN pip3 install --no-cache-dir -U pip\nRUN pip3 install --no-cache-dir setuptools wheel\n\n### Save cran as the default repo for R packages\nRUN echo \"r <- getOption('repos'); r['CRAN'] <- 'http://cran.rstudio.com'; options(repos = r);\" > ~/.Rprofile\n\n# Install R Packages\nRUN Rscript -e \"install.packages('devtools', Ncpus=4)\" && \\\n    Rscript -e \"install.packages('tidyverse', Ncpus=4)\" && \\\n    Rscript -e \"install.packages('caret', Ncpus=4)\" && \\\n    Rscript -e \"install.packages('recipes', Ncpus=4)\" && \\\n    Rscript -e \"install.packages('glmnet', Ncpus=4)\" && \\\n    Rscript -e \"install.packages('plumber', Ncpus=4)\" && \\\n    Rscript -e \"install.packages('Rook', Ncpus=4)\" && \\\n    Rscript -e \"install.packages('rjson', Ncpus=4)\" && \\\n    Rscript -e \"install.packages('e1071', Ncpus=4)\"\n\n# Install caret models\nRUN Rscript -e 'library(caret); install.packages(unique(modelLookup()[modelLookup()$forReg, c(1)]), Ncpus=4)'\nRUN Rscript -e 'library(caret); install.packages(unique(modelLookup()[modelLookup()$forClass, c(1)]), Ncpus=4)'\n\nRUN rm -rf /tmp/downloaded_packages/ /tmp/*.rds\n\nRUN apt update -y && apt install --no-install-recommends -y software-properties-common && \\\n    add-apt-repository -y ppa:deadsnakes/ppa && \\\n    apt update -y && apt install --no-install-recommends -y python3.7 python3.7-dev && rm -rf /var/lib/apt/lists/*;\n\nRUN python3.7 -m pip install setuptools wheel virtualenv && \\\n    python3.7 -m virtualenv /opt/v3.7\n\nENV PATH=\"/opt/v3.7/bin:$PATH\"\n\nCOPY requirements.txt requirements.txt\nRUN pip3 install --no-cache-dir -r requirements.txt"
}