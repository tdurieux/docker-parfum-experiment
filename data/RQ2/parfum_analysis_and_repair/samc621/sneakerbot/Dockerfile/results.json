{
  "startTime": 1674248848645,
  "endTime": 1674248849518,
  "originalSmells": [
    {
      "rule": "npmCacheCleanAfterInstall",
      "position": {
        "lineStart": 46,
        "lineEnd": 46,
        "columnStart": 4,
        "columnEnd": 15
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 4,
        "lineEnd": 9,
        "columnStart": 4,
        "columnEnd": 97
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 4,
        "lineEnd": 9,
        "columnStart": 4,
        "columnEnd": 97
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM node:12\n\n# Install dependencies for running Chrome, an X server, and VNC server\nRUN apt-get update && \\\n    apt-get install --no-install-recommends -yq net-tools gconf-service libasound2 libatk1.0-0 libc6 libcairo2 libcups2 libdbus-1-3 \\\n    libexpat1 libfontconfig1 libgcc1 libgconf-2-4 libgdk-pixbuf2.0-0 libglib2.0-0 libgtk-3-0 libnspr4 \\\n    libpango-1.0-0 libpangocairo-1.0-0 libstdc++6 libx11-6 libx11-xcb1 libxcb1 libxcomposite1 \\\n    libxcursor1 libxdamage1 libxext6 libxfixes3 libxi6 libxrandr2 libxrender1 libxss1 libxtst6 \\\n    ca-certificates fonts-liberation libappindicator1 libnss3 lsb-release xdg-utils \\\n    xvfb x11vnc x11-xkb-utils xfonts-100dpi xfonts-75dpi xfonts-scalable xfonts-cyrillic x11-apps && rm -rf /var/lib/apt/lists/*;\n\n# Install latest version of google-chrome-stable\nRUN apt-get update && apt-get install -y wget --no-install-recommends \\\n    && wget -q -O - https://dl-ssl.google.com/linux/linux_signing_key.pub | apt-key add - \\\n    && sh -c 'echo \"deb [arch=amd64] http://dl.google.com/linux/chrome/deb/ stable main\" >> /etc/apt/sources.list.d/google.list' \\\n    && apt-get update \\\n    && apt-get install -y google-chrome-stable fonts-ipafont-gothic fonts-wqy-zenhei fonts-thai-tlwg fonts-kacst ttf-freefont \\\n    --no-install-recommends \\\n    && rm -rf /var/lib/apt/lists/* \\\n    && apt-get purge --auto-remove -y curl \\\n    && rm -rf /src/*.deb\n\n# Use dumb-init to kill zombie processes\nADD https://github.com/Yelp/dumb-init/releases/download/v1.2.2/dumb-init_1.2.2_x86_64 /usr/local/bin/dumb-init\n\nRUN chmod +x /usr/local/bin/dumb-init\n\nENTRYPOINT [\"dumb-init\", \"--\"] \n\nENV PUPPETEER_EXECUTABLE_PATH=\"/usr/bin/google-chrome-stable\"\n\n# Puppeteer is packaged with Chromium, but we can skip the download since we are using google-chrome-stable\nENV PUPPETEER_SKIP_CHROMIUM_DOWNLOAD=true\n\nRUN mkdir ~/.vnc\n\n# Set password on VNC server\nRUN x11vnc -storepasswd 1234 ~/.vnc/passwd\n\n# Expose default port for VNC server\nEXPOSE 5900\n\nWORKDIR /app\n\nCOPY package.json .\n\nRUN npm install && npm cache clean --force;\n\nCOPY . .  \n\nARG NODE_ENV\n\nENV NODE_ENV=$NODE_ENV\n\nRUN chmod +x ./container_start.sh\n\nEXPOSE 8000\n\nCMD /bin/sh './container_start.sh'"
}