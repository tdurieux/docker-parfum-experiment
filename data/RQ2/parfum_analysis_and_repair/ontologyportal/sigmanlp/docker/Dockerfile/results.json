{
  "startTime": 1674253122251,
  "endTime": 1674253122930,
  "originalSmells": [
    {
      "rule": "yumInstallRmVarCacheYum",
      "position": {
        "lineStart": 5,
        "lineEnd": 15,
        "columnStart": 4,
        "columnEnd": 8
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "#July 3, 208:  Revision to include SIGMA NLP\nFROM centos:latest\nMAINTAINER Anonymous Contributor\n\n# Install a bunch of software we need\nRUN yum install -y  \\\n    git \\\n    sudo \\\n    unzip \\\n    wget \\\n# Install make and gcc\n    make \\\n    gcc \\\n# Handle sup. packages\n    graphviz \\\n    ant; rm -rf /var/cache/yum yum clean all\n\n# Add the sumo user and add to wheel (i.e., make sudoer no pwd)\nRUN useradd sumo && \\\n    usermod -aG wheel sumo && \\\n    sed -i 's/%wheel/# %wheel/' /etc/sudoers && \\\n    echo \"%wheel     ALL=(ALL)     NOPASSWD: ALL\" | tee -a /etc/sudoers\n\n# Add java to the image\nCOPY jdk-8u171-linux-x64.rpm .\nRUN rpm -ivh jdk-8u171-linux-x64.rpm && rm jdk-8u171-linux-x64.rpm\n\n# Copy in the BASHRC\nCOPY bashrc .\nRUN  cp bashrc /home/sumo/.bashrc && \\\n     chown sumo:sumo /home/sumo/.bashrc\n\n# Copy in the sigmastart.sh script\nCOPY sigmastart.sh .\nRUN chmod u+x sigmastart.sh\n\n#Copy bashrc into the image and create a bunch of required directories\nRUN su -l sumo -c \"mkdir /home/sumo/workspace; mkdir /home/sumo/Programs/; mkdir /home/sumo/Programs/bins\" && \\\n    su -l sumo -c \"cd /home/sumo/Programs; wget http://mirrors.advancedhosters.com/apache/tomcat/tomcat-9/v9.0.10/bin/apache-tomcat-9.0.10.zip\" && \\\n    su -l sumo -c \"cd /home/sumo/Programs; wget http://wordnetcode.princeton.edu/3.0/WordNet-3.0.tar.gz\" && \\\n    su -l sumo -c \"cd /home/sumo/Programs; wget http://wwwlehre.dhbw-stuttgart.de/~sschulz/WORK/E_DOWNLOAD/V_2.0/E.tgz\" && \\\n    su -l sumo -c \"cd /home/sumo/Programs; tar -xvzf E.tgz\" && \\\n    su -l sumo -c \"cd /home/sumo/Programs; unzip apache-tomcat-9.0.10.zip\" && \\\n    su -l sumo -c \"cd /home/sumo/Programs; mv E.tgz bins; mv apache-tomcat-9.0.10.zip bins\" && \\\n    su -l sumo -c \"cd /home/sumo/Programs/apache-tomcat-9.0.10/bin/; chmod 777 *\" && \\\n    su -l sumo -c \"cd /home/sumo/workspace; git clone https://github.com/ontologyportal/sigmakee; git clone https://github.com/ontologyportal/sumo\" && \\\n    su -l sumo -c \"cd /home/sumo; mkdir .sigmakee; cd .sigmakee; mkdir KBs; cp -R /home/sumo/workspace/sumo/* KBs; cp /home/sumo/workspace/sigmakee/config.xml /home/sumo/.sigmakee/KBs\" && \\\n    su -l sumo -c \"sed -i 's/theuser/sumo/g' /home/sumo/.sigmakee/KBs/config.xml\" && \\\n    su -l sumo -c \"sed -i 's/~/\\/home\\/sumo/g' /home/sumo/.sigmakee/KBs/config.xml\" && \\\n    su -l sumo -c \"cd /home/sumo/Programs; gunzip WordNet-3.0.tar.gz; tar -xvf WordNet-3.0.tar; cp WordNet-3.0/dict/* /home/sumo/.sigmakee/KBs/WordNetMappings/\" && \\\n    su -l sumo -c \"cd /home/sumo/Programs/E; ./configure; make; make install; cd /home/sumo\" && \\\n    su -l sumo -c \"source /home/sumo/.bashrc; cd /home/sumo/workspace/sigmakee; ant\" && \\\n    #Let's now handle SIGMANLP: https://github.com/ontologyportal/sigmanlp\n    su -l sumo -c \"cd /home/sumo/workspace; git clone https://github.com/ontologyportal/sigmanlp\" && \\\n    su -l sumo  -c \"cd /home/sumo/Programs; wget 'http://nlp.stanford.edu/software/stanford-corenlp-full-2018-01-31.zip'; unzip stanford-corenlp-full-2018-01-31.zip; rm stanford-corenlp-full-2018-01-31.zip\" && \\\n    su -l sumo -c \"cd /home/sumo/Programs/stanford-corenlp-full-2018-01-31/; unzip stanford-corenlp-3.9.0-models.jar; cp /home/sumo/Programs/stanford-corenlp-full-2018-01-31/stanford-corenlp-3.9.0.jar /home/sumo/workspace/sigmanlp/lib; cp /home/sumo/Programs/stanford-corenlp-full-2018-01-31/stanford-corenlp-3.9.0-models.jar /home/sumo/workspace/sigmanlp/lib; cd /home/sumo/workspace/sigmanlp; ant; ant dist\" && \\\n    #Handle the edits to config.xml\n    su -l sumo -c \"sed -i 's/<configuration >/<configuration>/g' /home/sumo/.sigmakee/KBs/config.xml\" && \\\n    su -l sumo -c \"sed -i 's/<configuration>/<configuration>\\n  <preference name=\\\"dbUser\\\" value=\\\"sa\\\"\\/>/g' /home/sumo/.sigmakee/KBs/config.xml\" && \\\n    su -l sumo -c \"sed -i 's/<configuration>/<configuration>\\n  <preference name=\\\"loadFresh\\\" value=\\\"false\\\"\\/>/g' /home/sumo/.sigmakee/KBs/config.xml\" && \\\n    #Create the DB (This is required)\n    su -l sumo -c \"java -Xmx7g -classpath /home/sumo/workspace/sigmakee/build/classes:/home/sumo/workspace/sigmakee/build/lib/*:/home/sumo/workspace/sigmakee/lib/* com.articulate.sigma.PasswordService -c\" && \\\n    #Run the non-interactive account creation\n    su -l sumo -c \"java -Xmx7g -classpath /home/sumo/workspace/sigmakee/build/classes:/home/sumo/workspace/sigmakee/build/lib/*:/home/sumo/workspace/sigmakee/lib/* com.articulate.sigma.PasswordService -a3 admin admin nlpAdmin@nowhere.com\" && \\ \n    #The following is a cleanup - the problem is that you can't change the password once we do this.\n    su -l sumo -c \"rm -Rf /home/sumo/Programs/bins; rm -Rf /home/sumo/Programs/*.tar; rm -Rf /home/sumo/workspace/sigmakee; rm -Rf /home/sumo/workspace/sigmanlp\"\n\n"
}