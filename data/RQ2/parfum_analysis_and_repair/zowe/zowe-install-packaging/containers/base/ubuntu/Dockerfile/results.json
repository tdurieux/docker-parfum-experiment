{
  "startTime": 1674255823601,
  "endTime": 1674255824390,
  "originalSmells": [
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 53,
        "lineEnd": 56,
        "columnStart": 7,
        "columnEnd": 14
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "#######################################################################\n# This program and the accompanying materials are made available\n# under the terms of the Eclipse Public License v2.0 which\n# accompanies this distribution, and is available at\n# https://www.eclipse.org/legal/epl-v20.html\n#\n# SPDX-License-Identifier: EPL-2.0\n#\n# Copyright Contributors to the Zowe Project.\n#######################################################################\n\nFROM ubuntu:latest\n\n##################################\n# labels\nLABEL name=\"Zowe Base Image\" \\\n      maintainer=\"jack-tiefeng.jia@ibm.com\" \\\n      vendor=\"Zowe\" \\\n      version=\"2.0.1\" \\\n      release=\"0\" \\\n      summary=\"Base image for Zowe components\" \\\n      description=\"Base image for Zowe components\"\n\n##################################\n# arguments\n# zowe default user id\nARG UID=20000\n# zowe default group id\nARG GID=20000\n# node build CPU arch\nARG NODE_CPU_ARCH=x64\n\n##################################\n# environments\nENV NODE_VERSION=16.15.0\n\n##################################\n# customize\nRUN set -ex \\\n    # define zowe user/group\n    && groupadd -g $GID -r zowe \\\n    && useradd -r -m --no-log-init --uid ${UID} --gid ${GID} -d /home/zowe zowe \\\n    # use bash as default shell\n    && cd /bin \\\n    && ln -sfn bash sh \\\n    # create /licenses folder\n    && mkdir -p /licenses \\\n    && chown zowe.zowe /licenses \\\n    # create /component folder\n    && mkdir -p /component \\\n    && chown zowe.zowe /component \\\n    # install node.js which is mandatory for now\n    && apt-get update \\\n    && apt-get install --no-install-recommends -y \\\n      curl \\\n      gnupg \\\n      xz-utils \\\n    # upgrade\n    && apt-get upgrade -y \\\n    && ARCH=${NODE_CPU_ARCH} \\\n    # gpg keys listed at https://github.com/nodejs/node#release-keys\n    && for key in \\\n      4ED778F539E3634C779C87C6D7062848A1AB005C \\\n      94AE36675C464D64BAFA68DD7434390BDBE9B9C5 \\\n      74F12602B6F1C4E913FAA37AD3A89613643B6201 \\\n      71DCFD284A79C3B38668286BC97EC7A07EDE3FC1 \\\n      8FCCA13FEF1D0C2E91008E09770F7A9A5AE15600 \\\n      C4F0DFFF4E8C1A8236409D08E73BC641CC11F4C8 \\\n      C82FA3AE1CBEDC6BE46B9360C43CEC45C17AB93C \\\n      DD8F2338BAE7501E3DD5AC78C273792F7D83545D \\\n      A48C2BEE680E841632CD4E44F07496B3EB3C1762 \\\n      108F52B48DB57BB0CC439B2997B01419BD92F80A \\\n      B9E2F5981AA6E0CD28160D9FF13993A75599653C \\\n    ; do \\\n        gpg --batch --keyserver hkps://keys.openpgp.org --recv-keys \"$key\" || \\\n        gpg --batch --keyserver keyserver.ubuntu.com --recv-keys \"$key\" ; \\\n    done \\\n    && curl -fsSLO --compressed \"https://nodejs.org/dist/v$NODE_VERSION/node-v$NODE_VERSION-linux-$ARCH.tar.xz\" \\\n    && curl -fsSLO --compressed \"https://nodejs.org/dist/v$NODE_VERSION/SHASUMS256.txt.asc\" \\\n    && gpg --batch --decrypt --output SHASUMS256.txt SHASUMS256.txt.asc \\\n    && grep \" node-v$NODE_VERSION-linux-$ARCH.tar.xz\\$\" SHASUMS256.txt | sha256sum -c - \\\n    && tar -xJf \"node-v$NODE_VERSION-linux-$ARCH.tar.xz\" -C /usr/local --strip-components=1 --no-same-owner \\\n    && rm \"node-v$NODE_VERSION-linux-$ARCH.tar.xz\" SHASUMS256.txt.asc SHASUMS256.txt \\\n    && ln -s /usr/local/bin/node /usr/local/bin/nodejs \\\n    # smoke tests\n    && node --version \\\n    && npm --version \\\n    # remove unused pacakges\n    && apt-get purge --auto-remove -y \\\n      bzip2 \\\n      curl \\\n      gnupg \\\n      tini \\\n      xz-utils \\\n    # clean up\n    && rm -rf /var/lib/apt/lists/*\n"
}