{
  "startTime": 1674252646262,
  "endTime": 1674252647260,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 31,
        "lineEnd": 31,
        "columnStart": 4,
        "columnEnd": 105
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 46,
        "lineEnd": 46,
        "columnStart": 4,
        "columnEnd": 61
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 47,
        "lineEnd": 47,
        "columnStart": 4,
        "columnEnd": 75
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 58,
        "lineEnd": 58,
        "columnStart": 4,
        "columnEnd": 38
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM index.docker.io/python:3.7\n\nARG CLI_VERSION=latest\nARG CLI_BRANCH=main\nARG PYTHON_PIP_VERSION=20.1.1\nARG PYTHON_VIRTUALENV_VERSION=16.7.0\n\nLABEL org.label-schema.vendor = \"Texas Advanced Computing Center\"\nLABEL org.label-schema.name = \"TACC Tapis CLI Base\"\nLABEL org.label-schema.vcs-url = \"https://github.com/TACC-Cloud/tapis-cli\"\nLABEL org.label-schema.organization=tacc.cloud\nLABEL cloud.tacc.project=\"Tapis CLI\"\n\n# In-container volume mounts\n# (For containers launched using TACC.cloud SSO identity)\nARG CORRAL=/corral\nARG STOCKYARD=/work\n\n# Dependencies\nRUN apt-get -y update && \\\n    apt-get -y install --no-install-recommends \\\n    apt-utils bash curl dialog git vim rsync locales locales-all \\\n    build-essential autoconf libtool pkg-config && \\\n    apt-get clean && \\\n    rm -rf /var/lib/apt/lists/*\n\nENV LC_ALL en_US.UTF-8\nENV LANG en_US.UTF-8\nENV LANGUAGE en_US.UTF-8\n\n# jq for parsing JSON\nRUN curl -f -L -sk -o /usr/local/bin/jq \"https://github.com/stedolan/jq/releases/download/jq-1.6/jq-linux64\" \\\n    && chmod a+x /usr/local/bin/jq\n\n# Python 3\n# RUN apt-get -y update && \\\n#     apt-get -y install --no-install-recommends \\\n#     python3 \\\n#     python3-dev \\\n#     python3-pip \\\n#     python3-setuptools && \\\n#     apt-get clean && \\\n#     rm -rf /var/lib/apt/lists/*\n\n# Make python3 the default user python\n# RUN update-alternatives --install /usr/bin/python python /usr/bin/python3 10\nRUN pip3 install --no-cache-dir --quiet --upgrade pip==${PYTHON_PIP_VERSION}\nRUN pip3 install --no-cache-dir --quiet --upgrade virtualenv==${PYTHON_VIRTUALENV_VERSION}\n\nRUN mkdir -p /home\nRUN mkdir -p /work\nRUN mkdir -p /install\n\n# Make pip behave better\nCOPY docker/pip.conf /etc/pip.conf\n\nCOPY . /install\nWORKDIR /install\nRUN pip install --no-cache-dir -q --upgrade tapis-cli\n\nENV TAPIS_CACHE_DIR=/root/.agave\nENV AGAVE_CACHE_DIR=/root/.agave\nENV TAPIS_CLI_VERSION=$CLI_VERSION\n\n# Set command prompt\nCOPY 'docker/.dockerprompt' /home/.dockerprompt\n\nRUN echo 'source /home/.dockerprompt' >> /root/.bashrc\n\nRUN touch /root/.env && chmod u+rw /root/.env\n\nCMD [\"/bin/bash\"]\n\nWORKDIR /work\n"
}