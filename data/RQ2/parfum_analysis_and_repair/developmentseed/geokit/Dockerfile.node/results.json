{
  "startTime": 1674256066678,
  "endTime": 1674256068189,
  "originalSmells": [
    {
      "rule": "npmCacheCleanAfterInstall",
      "position": {
        "lineStart": 26,
        "lineEnd": 26,
        "columnStart": 4,
        "columnEnd": 44
      }
    },
    {
      "rule": "npmCacheCleanAfterInstall",
      "position": {
        "lineStart": 27,
        "lineEnd": 27,
        "columnStart": 4,
        "columnEnd": 45
      }
    },
    {
      "rule": "npmCacheCleanAfterInstall",
      "position": {
        "lineStart": 41,
        "lineEnd": 41,
        "columnStart": 4,
        "columnEnd": 31
      }
    },
    {
      "rule": "npmCacheCleanAfterInstall",
      "position": {
        "lineStart": 42,
        "lineEnd": 42,
        "columnStart": 4,
        "columnEnd": 31
      }
    },
    {
      "rule": "npmCacheCleanAfterInstall",
      "position": {
        "lineStart": 43,
        "lineEnd": 43,
        "columnStart": 4,
        "columnEnd": 31
      }
    },
    {
      "rule": "npmCacheCleanAfterInstall",
      "position": {
        "lineStart": 44,
        "lineEnd": 44,
        "columnStart": 4,
        "columnEnd": 31
      }
    },
    {
      "rule": "npmCacheCleanAfterInstall",
      "position": {
        "lineStart": 45,
        "lineEnd": 45,
        "columnStart": 4,
        "columnEnd": 40
      }
    },
    {
      "rule": "npmCacheCleanAfterInstall",
      "position": {
        "lineStart": 46,
        "lineEnd": 46,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "npmCacheCleanAfterInstall",
      "position": {
        "lineStart": 69,
        "lineEnd": 69,
        "columnStart": 29,
        "columnEnd": 51
      }
    },
    {
      "rule": "npmCacheCleanAfterInstall",
      "position": {
        "lineStart": 80,
        "lineEnd": 80,
        "columnStart": 28,
        "columnEnd": 39
      }
    },
    {
      "rule": "wgetUseHttpsUrl",
      "position": {
        "lineStart": 56,
        "lineEnd": 56,
        "columnStart": 4,
        "columnEnd": 44
      }
    },
    {
      "rule": "wgetUseHttpsUrl",
      "position": {
        "lineStart": 58,
        "lineEnd": 58,
        "columnStart": 4,
        "columnEnd": 43
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 4,
        "lineEnd": 20,
        "columnStart": 4,
        "columnEnd": 8
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 24,
        "lineEnd": 24,
        "columnStart": 4,
        "columnEnd": 25
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 49,
        "lineEnd": 49,
        "columnStart": 4,
        "columnEnd": 95
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 74,
        "lineEnd": 74,
        "columnStart": 4,
        "columnEnd": 36
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 4,
        "lineEnd": 20,
        "columnStart": 4,
        "columnEnd": 8
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 24,
        "lineEnd": 24,
        "columnStart": 4,
        "columnEnd": 25
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 49,
        "lineEnd": 49,
        "columnStart": 4,
        "columnEnd": 95
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 74,
        "lineEnd": 74,
        "columnStart": 4,
        "columnEnd": 36
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 4,
        "lineEnd": 20,
        "columnStart": 4,
        "columnEnd": 8
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 24,
        "lineEnd": 24,
        "columnStart": 4,
        "columnEnd": 25
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 49,
        "lineEnd": 49,
        "columnStart": 4,
        "columnEnd": 95
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 74,
        "lineEnd": 74,
        "columnStart": 4,
        "columnEnd": 36
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 4,
        "lineEnd": 20,
        "columnStart": 4,
        "columnEnd": 8
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 24,
        "lineEnd": 24,
        "columnStart": 4,
        "columnEnd": 49
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 49,
        "lineEnd": 49,
        "columnStart": 4,
        "columnEnd": 119
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 74,
        "lineEnd": 74,
        "columnStart": 4,
        "columnEnd": 60
      }
    }
  ],
  "repairedDockerfile": "FROM ubuntu:18.04\n\nRUN apt-get update && apt-get -y upgrade\n\nRUN apt-get install --no-install-recommends -y \\\n    git \\\n    gcc \\\n    g++ \\\n    make \\\n    build-essential \\\n    linux-headers-generic \\\n    libgl1-mesa-dev \\\n    libgl1-mesa-glx \\\n    libpcap-dev \\\n    pigz \\\n    wget \\\n    vim \\\n    htop \\\n    lvm2 \\\n    moreutils \\\n    curl && rm -rf /var/lib/apt/lists/*;\n\n# install node and npm modules\nRUN curl -fsSL https://deb.nodesource.com/setup_10.x | bash -\nRUN apt install --no-install-recommends -y nodejs && rm -rf /var/lib/apt/lists/*;\nRUN npm --version\nRUN npm install mbtiles-extracts -g --unsafe && npm cache clean --force;\nRUN npm install json-stream-reduce @turf/area && npm cache clean --force;\n\n# install mason and npm modules\nWORKDIR /mason\nRUN curl -sSfL https://github.com/mapbox/mason/archive/v0.23.0.tar.gz | tar -z --extract --strip-components=1 --exclude=\"*md\" --exclude=\"test*\" --directory=./\nRUN ln -s /mason/mason /usr/local/bin/mason\nRUN mason install osmium-tool 1.11.0\nRUN mason link osmium-tool 1.11.0\nRUN mason install tippecanoe 1.32.10\nRUN mason link tippecanoe 1.32.10\nENV PATH=$PATH:/mason/mason_packages/.link/bin/\nENV LC_ALL=en_US.UTF-8\n\n# Other node libraries from https://github.com/node-geojson\nRUN npm install -g osmtogeojson && npm cache clean --force;\nRUN npm install -g geojsontoosm && npm cache clean --force;\nRUN npm install -g geojson2poly && npm cache clean --force;\nRUN npm install -g geojson-pick && npm cache clean --force;\nRUN npm install -g @mapbox/geojson-merge && npm cache clean --force;\nRUN npm install -g csv2geojson && npm cache clean --force;\n\n# Install Libosmium\nRUN apt-get install --no-install-recommends -y cmake libblkid-dev e2fslibs-dev libboost-all-dev libaudit-dev libbz2-dev && rm -rf /var/lib/apt/lists/*;\nRUN git clone  --depth 1 --branch v1.7.0 https://github.com/mapbox/protozero.git\nRUN cd protozero && mkdir build && cd build && cmake .. && make && make install\nRUN git clone  --depth 1 --branch v2.17.1 https://github.com/osmcode/libosmium.git\nRUN cd libosmium && mkdir build && cd build && cmake .. && make && make install\n\n# Install osmconvert and osmfilter\nRUN wget -O - https://m.m.i24.cc/osmconvert.c | cc -x c - -lz -O3 -o osmconvert\nRUN cp osmconvert /usr/bin/osmconvert\nRUN wget -O - https://m.m.i24.cc/osmfilter.c | cc -x c - -O3 -o osmfilter\nRUN cp osmfilter /usr/bin/osmfilter\n\n# Install mbtiles extractor\nRUN git clone https://github.com/mapbox/mbtiles-extracts.git && cd mbtiles-extracts && npm link\n\n# # # Install osm-obj-counter\n# RUN git clone https://github.com/developmentseed/osm-obj-counter.git && cd osm-obj-counter && npm install --no-audit && npm link --no-audit\n\n# Install osmconv\nRUN git clone https://github.com/developmentseed/osm-coverage-tiles.git\nRUN cd osm-coverage-tiles && npm install --no-audit && npm link && npm cache clean --force;\n\n# install aws\nENV TZ=America/New_York\nRUN ln -snf /usr/share/zoneinfo/$TZ /etc/localtime && echo $TZ > /etc/timezone\nRUN apt-get install --no-install-recommends -y tzdata awscli && rm -rf /var/lib/apt/lists/*;\n\n# Copy geokit to container\nRUN mkdir /geokit\nADD node-scripts /geokit\nWORKDIR /geokit\nRUN rm -rf node_modules/ && npm install && npm link && npm cache clean --force;\nVOLUME /mnt/data\nWORKDIR /mnt/data\n"
}