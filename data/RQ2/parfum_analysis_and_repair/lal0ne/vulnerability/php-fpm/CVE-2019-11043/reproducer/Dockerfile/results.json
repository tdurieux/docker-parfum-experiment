{
  "startTime": 1674251011474,
  "endTime": 1674251012067,
  "originalSmells": [
    {
      "rule": "configureShouldUseBuildFlag",
      "position": {
        "lineStart": 14,
        "lineEnd": 14,
        "columnStart": 41,
        "columnEnd": 80
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 3,
        "lineEnd": 3,
        "columnStart": 4,
        "columnEnd": 91
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 3,
        "lineEnd": 3,
        "columnStart": 4,
        "columnEnd": 91
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 3,
        "lineEnd": 3,
        "columnStart": 4,
        "columnEnd": 91
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 3,
        "lineEnd": 3,
        "columnStart": 4,
        "columnEnd": 115
      }
    }
  ],
  "repairedDockerfile": "FROM ubuntu:18.04\n\nRUN apt-get update && apt-get -y upgrade\nRUN apt-get install --no-install-recommends -y git build-essential autoconf bison re2c libxml2-dev zlib1g-dev nginx && rm -rf /var/lib/apt/lists/*;\n\nRUN git clone https://github.com/php/php-src\n\n# checkout the fix\nRUN git -C php-src checkout ab061f95ca966731b1c84cf5b7b20155c0a1c06a\n\n# checkout the commit previous to the fix\nRUN git -C php-src checkout HEAD~1\n\n# build php-fpm\nRUN cd php-src && ./buildconf --force && ./configure --build=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\" --enable-fpm --without-pear && make -j4 && make install\n\nCOPY php-fpm.conf /usr/local/etc/\nCOPY nginx.server.conf /etc/nginx/sites-enabled/default\nCOPY script.php /var/www/html/script.php\nCOPY entrypoint /\n\nCMD /entrypoint"
}