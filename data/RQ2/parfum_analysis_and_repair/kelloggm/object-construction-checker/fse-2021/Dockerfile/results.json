{
  "startTime": 1674249391341,
  "endTime": 1674249392704,
  "originalSmells": [
    {
      "rule": "sha256sumEchoOneSpaces",
      "position": {
        "lineStart": 90,
        "lineEnd": 90,
        "columnStart": 5,
        "columnEnd": 54
      }
    },
    {
      "rule": "aptGetInstallUseY",
      "position": {
        "lineStart": 21,
        "lineEnd": 21,
        "columnStart": 4,
        "columnEnd": 40
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 6,
        "lineEnd": 6,
        "columnStart": 4,
        "columnEnd": 52
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 10,
        "lineEnd": 10,
        "columnStart": 4,
        "columnEnd": 37
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 11,
        "lineEnd": 11,
        "columnStart": 4,
        "columnEnd": 26
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 16,
        "lineEnd": 16,
        "columnStart": 4,
        "columnEnd": 36
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 17,
        "lineEnd": 17,
        "columnStart": 4,
        "columnEnd": 26
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 21,
        "lineEnd": 21,
        "columnStart": 4,
        "columnEnd": 40
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 26,
        "lineEnd": 26,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 27,
        "lineEnd": 27,
        "columnStart": 4,
        "columnEnd": 26
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 28,
        "lineEnd": 28,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 34,
        "lineEnd": 34,
        "columnStart": 4,
        "columnEnd": 29
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 37,
        "lineEnd": 37,
        "columnStart": 4,
        "columnEnd": 26
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 101,
        "lineEnd": 101,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 26,
        "lineEnd": 26,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 27,
        "lineEnd": 27,
        "columnStart": 4,
        "columnEnd": 26
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 28,
        "lineEnd": 28,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 34,
        "lineEnd": 34,
        "columnStart": 4,
        "columnEnd": 29
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 37,
        "lineEnd": 37,
        "columnStart": 4,
        "columnEnd": 26
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 101,
        "lineEnd": 101,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 6,
        "lineEnd": 6,
        "columnStart": 4,
        "columnEnd": 52
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 10,
        "lineEnd": 10,
        "columnStart": 4,
        "columnEnd": 37
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 11,
        "lineEnd": 11,
        "columnStart": 4,
        "columnEnd": 26
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 16,
        "lineEnd": 16,
        "columnStart": 4,
        "columnEnd": 36
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 17,
        "lineEnd": 17,
        "columnStart": 4,
        "columnEnd": 26
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 21,
        "lineEnd": 21,
        "columnStart": 4,
        "columnEnd": 40
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 26,
        "lineEnd": 26,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 27,
        "lineEnd": 27,
        "columnStart": 4,
        "columnEnd": 26
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 28,
        "lineEnd": 28,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 34,
        "lineEnd": 34,
        "columnStart": 4,
        "columnEnd": 29
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 37,
        "lineEnd": 37,
        "columnStart": 4,
        "columnEnd": 26
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 101,
        "lineEnd": 101,
        "columnStart": 4,
        "columnEnd": 27
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 26,
        "lineEnd": 26,
        "columnStart": 4,
        "columnEnd": 51
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 27,
        "lineEnd": 27,
        "columnStart": 4,
        "columnEnd": 50
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 28,
        "lineEnd": 28,
        "columnStart": 4,
        "columnEnd": 51
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 34,
        "lineEnd": 34,
        "columnStart": 4,
        "columnEnd": 53
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 37,
        "lineEnd": 37,
        "columnStart": 4,
        "columnEnd": 50
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 101,
        "lineEnd": 101,
        "columnStart": 4,
        "columnEnd": 51
      }
    }
  ],
  "repairedDockerfile": "FROM ubuntu:20.04\n\nLABEL Narges Shadab <nshad001@ucr.edu>\n\n# Install basic software support\nRUN apt-get update && \\\n    apt-get install --no-install-recommends --yes software-properties-common && rm -rf /var/lib/apt/lists/*;\n\n# Install Java 11\nRUN apt-get update && \\\n    apt-get install --no-install-recommends -y openjdk-11-jdk && \\\n    apt-get install --no-install-recommends -y ant && \\\n    apt-get clean; rm -rf /var/lib/apt/lists/*;\n\n# Install Java 8\nRUN apt-get update && \\\n    apt-get install --no-install-recommends -y openjdk-8-jdk && \\\n    apt-get install --no-install-recommends -y ant && \\\n    apt-get clean; rm -rf /var/lib/apt/lists/*;\n\nRUN apt-get update && \\\n    apt-get install -y --no-install-recommends ca-certificates-java && \\\n    apt-get clean && \\\n    update-ca-certificates -f; rm -rf /var/lib/apt/lists/*;\n\n# Install required softwares (curl & zip & wget)\nRUN apt-get install --no-install-recommends curl -y && rm -rf /var/lib/apt/lists/*;\nRUN apt-get install --no-install-recommends zip -y && rm -rf /var/lib/apt/lists/*;\nRUN apt-get install --no-install-recommends wget -y && rm -rf /var/lib/apt/lists/*;\n\n# update\nRUN apt-get update -y\n\n# Install python\nRUN apt-get install --no-install-recommends -y python && rm -rf /var/lib/apt/lists/*;\n\n# Install git\nRUN apt-get install --no-install-recommends -y git && rm -rf /var/lib/apt/lists/*;\n\n# Install Maven\nARG MAVEN_VERSION=3.6.3\nARG SHA=c35a1803a6e70a126e80b2b3ae33eed961f83ed74d18fcd16909b2d44d7dada3203f1ffe726c17ef8dcca2dcaa9fca676987befeadc9b9f759967a8cb77181c0\nARG BASE_URL=https://downloads.apache.org/maven/maven-3/${MAVEN_VERSION}/binaries\n\nRUN mkdir -p /usr/share/maven /usr/share/maven/ref \\\n  && echo \"Downlaoding maven\" \\\n  && curl -fsSL -o /tmp/apache-maven.tar.gz ${BASE_URL}/apache-maven-${MAVEN_VERSION}-bin.tar.gz \\\n  \\\n  && echo \"Checking download hash\" \\\n  && echo \"${SHA}  /tmp/apache-maven.tar.gz\" | sha512sum -c - \\\n  \\\n  && echo \"Unziping maven\" \\\n  && tar -xzf /tmp/apache-maven.tar.gz -C /usr/share/maven --strip-components=1 \\\n  \\\n  && echo \"Cleaning and setting links\" \\\n  && rm -f /tmp/apache-maven.tar.gz \\\n  && ln -s /usr/share/maven/bin/mvn /usr/bin/mvn\n\nENV MAVEN_HOME /usr/share/maven\n\n#Install Gradle\nARG GRADLE_VERSION=6.8.3\nARG GRADLE_BASE_URL=https://services.gradle.org/distributions\nARG GRADLE_SHA=7faa7198769f872826c8ef4f1450f839ec27f0b4d5d1e51bade63667cbccd205\nRUN mkdir -p /usr/share/gradle /usr/share/gradle/ref \\\n  && echo \"Downlaoding gradle hash\" \\\n  && curl -fsSL -o /tmp/gradle.zip ${GRADLE_BASE_URL}/gradle-${GRADLE_VERSION}-bin.zip \\\n  \\\n  && echo \"Checking download hash\" \\\n  && echo \"${GRADLE_SHA}  /tmp/gradle.zip\" | sha256sum -c - \\\n  \\\n  && echo \"Unziping gradle\" \\\n  && unzip -d /usr/share/gradle /tmp/gradle.zip \\\n   \\\n  && echo \"Cleaning and setting links\" \\\n  && rm -f /tmp/gradle.zip \\\n  && ln -s /usr/share/gradle/gradle-${GRADLE_VERSION} /usr/bin/gradle\nENV GRADLE_VERSION 6.8.3\nENV GRADLE_HOME /usr/bin/gradle\n#ENV GRADLE_USER_HOME /cache\nENV PATH $PATH:$GRADLE_HOME/bin\n#VOLUME $GRADLE_USER_HOME\n\n# Install scc\nARG SCC_3_SHA=04f9e797b70a678833e49df5e744f95080dfb7f963c0cd34f5b5d4712d290f33\nRUN mkdir -p /usr/share/scc \\\n  && echo \"Downloading scc\" \\\n  && curl -fsSL -o /tmp/scc.zip https://github.com/boyter/scc/releases/download/v3.0.0/scc-3.0.0-arm64-unknown-linux.zip \\\n  \\\n  && echo \"Checking download hash\" \\\n  && echo \"${SCC_3_SHA}  /tmp/scc.zip\" | sha256sum -c - \\\n\n  && echo \"Unzipping scc\" \\\n  && unzip -d /usr/share/scc /tmp/scc.zip \\\n\n  && echo \"Cleaning and setting links\" \\\n  && rm -f /tmp/scc.zip \\\n  && ln -s /usr/share/scc/scc /usr/bin/scc\n\n## Create a new user\nRUN useradd -ms /bin/bash fse && \\\n    apt-get install --no-install-recommends -y sudo && \\\n    adduser fse sudo && \\\n    echo '%sudo ALL=(ALL) NOPASSWD:ALL' >> /etc/sudoers && rm -rf /var/lib/apt/lists/*;\nUSER fse\nWORKDIR /home/fse\n\nENV JAVA_HOME /usr/lib/jvm/java-8-openjdk-amd64/\nRUN export JAVA_HOME\n\nENV JAVA8_HOME /usr/lib/jvm/java-8-openjdk-amd64/\nRUN export JAVA8_HOME\n\nENV JAVA11_HOME /usr/lib/jvm/java-11-openjdk-amd64/\nRUN export JAVA11_HOME\n\nENV OCC_BRANCH master\nENV OCC_REPO https://github.com/kelloggm/object-construction-checker.git\n\nENV PU_REPO=https://github.com/kelloggm/plume-util.git\n\nENV ZK_REPO https://github.com/kelloggm/zookeeper.git\nENV ZK_CMD \"mvn --projects zookeeper-server --also-make clean install -DskipTests\"\nENV ZK_CLEAN \"mvn clean\"\n\nENV HADOOP_REPO https://github.com/Nargeshdb/hadoop\nENV HADOOP_CMD \"mvn --projects hadoop-hdfs-project/hadoop-hdfs --also-make clean compile -DskipTests\"\nENV HADOOP_CLEAN \"mvn clean\"\n\nENV HBASE_REPO https://github.com/Nargeshdb/hbase\nENV HBASE_CMD \"mvn --projects hbase-server --also-make clean install -DskipTests\"\nENV HBASE_CLEAN \"mvn clean\"\n\n# download ResourceLeakChecker\nRUN git clone \"${OCC_REPO}\"\n\nRUN cd object-construction-checker \\\n    && git checkout \"${OCC_BRANCH}\" \\\n    && ./gradlew install \\\n    && cd ..\n\nRUN cp object-construction-checker/experimental-machinery/ablation/*.sh .\nRUN cp object-construction-checker/experimental-machinery/case-studies/*.sh .\n\n# download plume-util\nRUN git clone \"${PU_REPO}\"\nRUN cd plume-util \\\n    && git checkout no-suppressions \\\n    && cd ..\n\n# download Zookeeper\nRUN git clone \"${ZK_REPO}\"\nRUN cd zookeeper \\\n    && git checkout no-suppressions \\\n    && cd ..\n\n# download Hadoop\nRUN git clone \"${HADOOP_REPO}\"\nRUN cd hadoop \\\n    && git checkout no-suppressions \\\n    && cd ..\n\n# download HBase\nRUN git clone \"${HBASE_REPO}\"\nRUN cd hbase \\\n    && git checkout no-suppressions \\\n    && cd ..\n\n# analyze all the benchmarks once to populate local Maven repository\n# our checker emits errors for plume-util and zookeeper, hence the '|| true'\nRUN (./run-always-call-on-plume-util.sh > plume-util-out 2>&1) || true\nRUN (./run-always-call-on-zookeeper.sh > zookeeper-out 2>&1) || true\nRUN ./run-always-call-on-hadoop.sh > hadoop-out 2>&1\nRUN ./run-always-call-on-hbase.sh > hbase-out 2>&1\n\n# switch back to with-annotations branch\nRUN cd plume-util \\\n    && git checkout with-annotations \\\n    && cd ..\n\nRUN cd zookeeper \\\n    && git checkout with-annotations \\\n    && cd ..\n\nRUN cd hadoop \\\n    && git checkout with-annotations \\\n    && cd ..\n\nRUN cd hbase \\\n    && git checkout with-annotations \\\n    && cd ..\n\nCMD [\"/bin/bash\"]\n"
}