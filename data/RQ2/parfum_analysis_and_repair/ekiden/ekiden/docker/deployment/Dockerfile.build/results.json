{
  "startTime": 1674251929238,
  "endTime": 1674251929904,
  "originalSmells": [
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 13,
        "lineEnd": 13,
        "columnStart": 4,
        "columnEnd": 42
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 11,
        "lineEnd": 11,
        "columnStart": 4,
        "columnEnd": 57
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 11,
        "lineEnd": 11,
        "columnStart": 4,
        "columnEnd": 57
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM docker.io/ekiden/development:0.1.0-alpha.0\n\nENV HOME=\"/root\"\nENV PATH=\"${HOME}/.cargo/bin:${PATH}\"\nENV INTEL_SGX_SDK=\"/opt/sgxsdk\"\nENV SGX_MODE=\"SIM\"\nENV SGX_ARCH=\"x64\"\n\n# We need a newer version of python-protobuf than is available in the distro.\n# Installing this stuff through pip also sidesteps the need to upgrade gcc.\nRUN apt-get update && apt-get install -y --no-install-recommends python-pip && rm -rf /var/lib/apt/lists/*;\n# Benchmarks don't run the evaluation, so no scipy or sklearn\nRUN pip install --no-cache-dir numpy pandas xlrd protobuf\n\n# Copy code.\nADD . /code\n\n# Build all Ekiden binaries and resources.\nRUN cd /code && \\\n    cargo make build-release-flow\n\n# Package all binaries and resources.\nRUN mkdir -p /package/bin /package/lib /package/res && \\\n    cp /code/target/enclave/*.signed.so /package/lib && \\\n    cp /code/target/enclave/*.mrenclave /package/lib && \\\n    cp /code/target/release/ekiden-compute /package/bin && \\\n    cp /code/target/release/ekiden-consensus /package/bin && \\\n    cp /code/docker/deployment/Dockerfile.runtime /package/Dockerfile\n\n# This is a builder container which outputs the contents of the package\n# on standard output. This enables the runtime and the builder container\n# to be different and reduces the image size considerably.\nWORKDIR /package\nCMD tar cvzhf - .\n"
}