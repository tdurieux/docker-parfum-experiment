{
  "startTime": 1674217333250,
  "endTime": 1674217334008,
  "originalSmells": [
    {
      "rule": "wgetUseHttpsUrl",
      "position": {
        "lineStart": 9,
        "lineEnd": 9,
        "columnStart": 4,
        "columnEnd": 71
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "# This Dockerfile was generated from github.com/sourcegraph/godockerize. It\n# was not written by a human, and as such looks janky. As you change this\n# file, please don't be scared to make it more pleasant / remove hadolint\n# ignores.\n\n# Install p4 CLI (keep this up to date with cmd/server/Dockerfile)\nFROM sourcegraph/alpine-3.14:159028_2022-07-07_1f3b17ce1db8@sha256:25d682b5fd069c716c2b29dcf757c0dc0ce29810a07f91e1347901920272b4a7 AS p4cli\n\n# hadolint ignore=DL3003\nRUN wget https://cdist2.perforce.com/perforce/r21.2/bin.linux26x86_64/p4\nRUN mv p4 /usr/local/bin/p4\nRUN chmod +x /usr/local/bin/p4\n\nFROM sourcegraph/alpine-3.14:159028_2022-07-07_1f3b17ce1db8@sha256:25d682b5fd069c716c2b29dcf757c0dc0ce29810a07f91e1347901920272b4a7 AS p4-fusion\n\nCOPY p4-fusion-install-alpine.sh /p4-fusion-install-alpine.sh\nRUN /p4-fusion-install-alpine.sh\n\nFROM sourcegraph/alpine-3.14:159028_2022-07-07_1f3b17ce1db8@sha256:25d682b5fd069c716c2b29dcf757c0dc0ce29810a07f91e1347901920272b4a7 AS coursier\n\n# TODO(code-intel): replace with official streams when musl builds are upstreamed\nRUN wget -O coursier.zip https://github.com/sourcegraph/lsif-java/releases/download/v0.5.6/cs-musl.zip && \\\n    unzip coursier.zip && \\\n    mv cs-musl /usr/local/bin/coursier && \\\n    chmod +x /usr/local/bin/coursier\n\n\nFROM sourcegraph/alpine-3.14:159028_2022-07-07_1f3b17ce1db8@sha256:25d682b5fd069c716c2b29dcf757c0dc0ce29810a07f91e1347901920272b4a7\n\nARG COMMIT_SHA=\"unknown\"\nARG DATE=\"unknown\"\nARG VERSION=\"unknown\"\n\nLABEL org.opencontainers.image.revision=${COMMIT_SHA}\nLABEL org.opencontainers.image.created=${DATE}\nLABEL org.opencontainers.image.version=${VERSION}\nLABEL com.sourcegraph.github.url=https://github.com/sourcegraph/sourcegraph/commit/${COMMIT_SHA}\n\nRUN apk add --no-cache \\\n    # We require git 2.34.1 because we use git-repack with flag --write-midx.\n    # We require git 2.35.2 to fix this vulnerability:\n    # https://github.blog/2022-04-12-git-security-vulnerability-announced/\n    'git>=2.35.2' --repository=http://dl-cdn.alpinelinux.org/alpine/v3.16/main \\\n    git-p4\n\nRUN apk add --no-cache  \\\n    openssh-client \\\n    # We require libstdc++ for p4-fusion\n    libstdc++ \\\n    python2 \\\n    python3 \\\n    bash\n\nCOPY --from=p4cli /usr/local/bin/p4 /usr/local/bin/p4\n\nCOPY --from=p4-fusion /usr/local/bin/p4-fusion /usr/local/bin/p4-fusion\n\nCOPY --from=coursier /usr/local/bin/coursier /usr/local/bin/coursier\n\n# This is a trick to include libraries required by p4,\n# please refer to https://blog.tilander.org/docker-perforce/\n# hadolint ignore=DL4006\nRUN wget -O - https://github.com/jtilander/p4d/raw/4600d741720f85d77852dcca7c182e96ad613358/lib/lib-x64.tgz | tar zx --directory /\n\nRUN mkdir -p /data/repos && chown -R sourcegraph:sourcegraph /data/repos\nUSER sourcegraph\n\nWORKDIR /\n\nENTRYPOINT [\"/sbin/tini\", \"--\", \"/usr/local/bin/gitserver\"]\nCOPY gitserver /usr/local/bin/\n"
}