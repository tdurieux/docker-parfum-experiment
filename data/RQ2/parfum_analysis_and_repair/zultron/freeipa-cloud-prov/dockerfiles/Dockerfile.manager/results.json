{
  "startTime": 1674256262555,
  "endTime": 1674256263458,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 102,
        "lineEnd": 103,
        "columnStart": 4,
        "columnEnd": 52
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 105,
        "lineEnd": 106,
        "columnStart": 4,
        "columnEnd": 56
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 20,
        "lineEnd": 20,
        "columnStart": 4,
        "columnEnd": 35
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 23,
        "lineEnd": 24,
        "columnStart": 4,
        "columnEnd": 22
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 25,
        "lineEnd": 25,
        "columnStart": 4,
        "columnEnd": 24
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 28,
        "lineEnd": 33,
        "columnStart": 4,
        "columnEnd": 15
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 35,
        "lineEnd": 35,
        "columnStart": 4,
        "columnEnd": 37
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 45,
        "lineEnd": 45,
        "columnStart": 4,
        "columnEnd": 21
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 53,
        "lineEnd": 53,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 87,
        "lineEnd": 87,
        "columnStart": 4,
        "columnEnd": 25
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 7,
        "lineEnd": 17,
        "columnStart": 4,
        "columnEnd": 22
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 43,
        "lineEnd": 44,
        "columnStart": 4,
        "columnEnd": 16
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 48,
        "lineEnd": 48,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 52,
        "lineEnd": 52,
        "columnStart": 4,
        "columnEnd": 48
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 56,
        "lineEnd": 56,
        "columnStart": 4,
        "columnEnd": 26
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 62,
        "lineEnd": 68,
        "columnStart": 4,
        "columnEnd": 14
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 72,
        "lineEnd": 77,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 83,
        "lineEnd": 84,
        "columnStart": 4,
        "columnEnd": 17
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 7,
        "lineEnd": 17,
        "columnStart": 4,
        "columnEnd": 22
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 43,
        "lineEnd": 44,
        "columnStart": 4,
        "columnEnd": 16
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 48,
        "lineEnd": 48,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 52,
        "lineEnd": 52,
        "columnStart": 4,
        "columnEnd": 48
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 56,
        "lineEnd": 56,
        "columnStart": 4,
        "columnEnd": 26
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 62,
        "lineEnd": 68,
        "columnStart": 4,
        "columnEnd": 14
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 72,
        "lineEnd": 77,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 83,
        "lineEnd": 84,
        "columnStart": 4,
        "columnEnd": 17
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 7,
        "lineEnd": 17,
        "columnStart": 4,
        "columnEnd": 22
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 43,
        "lineEnd": 44,
        "columnStart": 4,
        "columnEnd": 16
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 48,
        "lineEnd": 48,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 52,
        "lineEnd": 52,
        "columnStart": 4,
        "columnEnd": 48
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 56,
        "lineEnd": 56,
        "columnStart": 4,
        "columnEnd": 26
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 62,
        "lineEnd": 68,
        "columnStart": 4,
        "columnEnd": 14
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 72,
        "lineEnd": 77,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 83,
        "lineEnd": 84,
        "columnStart": 4,
        "columnEnd": 17
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 7,
        "lineEnd": 17,
        "columnStart": 4,
        "columnEnd": 22
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 43,
        "lineEnd": 44,
        "columnStart": 4,
        "columnEnd": 16
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 48,
        "lineEnd": 48,
        "columnStart": 4,
        "columnEnd": 51
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 52,
        "lineEnd": 52,
        "columnStart": 4,
        "columnEnd": 72
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 56,
        "lineEnd": 56,
        "columnStart": 4,
        "columnEnd": 50
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 62,
        "lineEnd": 68,
        "columnStart": 4,
        "columnEnd": 14
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 72,
        "lineEnd": 77,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 83,
        "lineEnd": 84,
        "columnStart": 4,
        "columnEnd": 17
      }
    }
  ],
  "repairedDockerfile": "FROM debian:stretch\nMAINTAINER John Morris <john@zultron.com>\n\n# Docker image with ansible and scripts for initializing coreos cluster\n# communicating over SSL\n\nRUN apt-get update\nRUN apt-get install --no-install-recommends -y \\\n        python-yaml \\\n        libyaml-dev \\\n        python-pip \\\n        python-dev \\\n        libffi-dev \\\n        libssl-dev \\\n        build-essential \\\n        python-setuptools \\\n        python-pkg-resources \\\n        openssh-client && rm -rf /var/lib/apt/lists/*;\n\n# Digital Ocean\nRUN pip install --no-cache-dir python-digitalocean\n\n# paramiko\nRUN pip install --no-cache-dir --upgrade \\\n        cffi pyOpenSSL\nRUN pip install --no-cache-dir paramiko\n\n# Ansible\nRUN pip install --no-cache-dir \\\n        Jinja2 \\\n        ipcalc \\\n        netaddr \\\n\tjmespath \\\n        ansible\n# dopy > 0.3.5 broken, according to DO Ansible tutorial\nRUN pip install --no-cache-dir 'dopy>=0.3.5,<=0.3.5'\n\n# Ansible role to install python on CoreOS\nCOPY requirements.yaml /etc/ansible/requirements.yaml\nRUN mkdir -p /etc/ansible/roles && \\\n    ansible-galaxy install -r /etc/ansible/requirements.yaml\n\n# Redis (not needed?)\nRUN apt-get install --no-install-recommends -y \\\n    redis-server && rm -rf /var/lib/apt/lists/*;\nRUN pip install --no-cache-dir redis\n\n# Install and configure sudo, passwordless for everyone\nRUN apt-get -y --no-install-recommends install sudo && rm -rf /var/lib/apt/lists/*;\nRUN echo \"ALL\tALL=(ALL:ALL) NOPASSWD: ALL\" >> /etc/sudoers\n\n# LDAP python libraries\nRUN apt-get -y --no-install-recommends install libldap2-dev libsasl2-dev && rm -rf /var/lib/apt/lists/*;\nRUN pip install --no-cache-dir python-ldap\n\n# For generating vault passwords automatically\nRUN apt-get -y --no-install-recommends install apg && rm -rf /var/lib/apt/lists/*;\n\n# Basic tools for command-line use:\n# - simple editor\n# - telnet, DNS, LDAP clients\n# - git\nRUN apt-get install --no-install-recommends -y \\\n        ed \\\n        telnet \\\n        dnsutils \\\n        ldap-utils \\\n        git \\\n        psmisc && rm -rf /var/lib/apt/lists/*;\n\n# Install docker for client remote access\n# https://docs.docker.com/engine/installation/linux/debian/\nRUN apt-get install --no-install-recommends -y \\\n\tapt-transport-https \\\n\tca-certificates \\\n\tcurl \\\n\tgnupg2 \\\n\tsoftware-properties-common && rm -rf /var/lib/apt/lists/*;\nRUN curl -fsSL https://download.docker.com/linux/debian/gpg | \\\n        apt-key add -\nRUN add-apt-repository \\\n\t\"deb https://download.docker.com/linux/debian stretch stable\"\nRUN apt-get update\nRUN apt-get install --no-install-recommends -y \\\n        docker-ce && rm -rf /var/lib/apt/lists/*;\n\n# Python testing (not needed)\nRUN pip install --no-cache-dir nose mock\n\n# Add resources in `lib/` to paths\nENV PATH=/data/lib/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\nENV PYTHONPATH=/data/lib/python\n\n# Work around annoying python location on CoreOS\nRUN mkdir -p /home/core/bin && ln -s /usr/bin/python /home/core/bin/python\n\n# CoreOS config transpiler\nADD https://github.com/coreos/container-linux-config-transpiler/releases/download/v0.4.0/ct-v0.4.0-x86_64-unknown-linux-gnu \\\n    /usr/local/bin/ct\nRUN chmod 755 /usr/local/bin/ct\n\n# Cloudflare PKI and TLS tool\nRUN curl -f -s -L -o /usr/local/bin/cfssl \\\n        https://pkg.cfssl.org/R1.2/cfssl_linux-amd64 && \\\n    chmod +x /usr/local/bin/cfssl\nRUN curl -f -s -L -o /usr/local/bin/cfssljson \\\n        https://pkg.cfssl.org/R1.2/cfssljson_linux-amd64 && \\\n    chmod +x /usr/local/bin/cfssljson\n\n# Final container configuration\nRUN useradd -s /bin/bash user\n\nVOLUME /data\nWORKDIR /data\n\nUSER user\n"
}