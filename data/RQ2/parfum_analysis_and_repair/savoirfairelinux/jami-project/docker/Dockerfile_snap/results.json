{
  "startTime": 1674255782242,
  "endTime": 1674255783309,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 12,
        "lineEnd": 12,
        "columnStart": 4,
        "columnEnd": 140
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 12,
        "lineEnd": 12,
        "columnStart": 14,
        "columnEnd": 96
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 18,
        "lineEnd": 18,
        "columnStart": 4,
        "columnEnd": 144
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 18,
        "lineEnd": 18,
        "columnStart": 14,
        "columnEnd": 98
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 24,
        "lineEnd": 24,
        "columnStart": 4,
        "columnEnd": 165
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 24,
        "lineEnd": 24,
        "columnStart": 14,
        "columnEnd": 116
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 5,
        "lineEnd": 8,
        "columnStart": 4,
        "columnEnd": 20
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 45,
        "lineEnd": 45,
        "columnStart": 52,
        "columnEnd": 92
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 5,
        "lineEnd": 8,
        "columnStart": 4,
        "columnEnd": 20
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 5,
        "lineEnd": 8,
        "columnStart": 4,
        "columnEnd": 20
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 45,
        "lineEnd": 45,
        "columnStart": 52,
        "columnEnd": 92
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 5,
        "lineEnd": 8,
        "columnStart": 4,
        "columnEnd": 20
      }
    }
  ],
  "repairedDockerfile": "FROM ubuntu:xenial as builder\n\n# Grab dependencies\nRUN apt-get update\nRUN apt-get dist-upgrade --yes\nRUN apt-get install --no-install-recommends --yes \\\n      curl \\\n      jq \\\n      squashfs-tools && rm -rf /var/lib/apt/lists/*;\n\n# Grab the core snap (for backwards compatibility) from the stable channel and\n# unpack it in the proper place.\nRUN curl -f -L $( curl -f -H 'X-Ubuntu-Series: 16' 'https://api.snapcraft.io/api/v1/snaps/details/core' | jq '.download_url' -r) --output core.snap\nRUN mkdir -p /snap/core\nRUN unsquashfs -d /snap/core/current core.snap\n\n# Grab the core18 snap (which snapcraft uses as a base) from the stable channel\n# and unpack it in the proper place.\nRUN curl -f -L $( curl -f -H 'X-Ubuntu-Series: 16' 'https://api.snapcraft.io/api/v1/snaps/details/core18' | jq '.download_url' -r) --output core18.snap\nRUN mkdir -p /snap/core18\nRUN unsquashfs -d /snap/core18/current core18.snap\n\n# Grab the snapcraft snap from the stable channel and unpack it in the proper\n# place.\nRUN curl -f -L $( curl -f -H 'X-Ubuntu-Series: 16' 'https://api.snapcraft.io/api/v1/snaps/details/snapcraft?channel=stable' | jq '.download_url' -r) --output snapcraft.snap\nRUN mkdir -p /snap/snapcraft\nRUN unsquashfs -d /snap/snapcraft/current snapcraft.snap\n\n# Create a snapcraft runner (TODO: move version detection to the core of\n# snapcraft).\nRUN mkdir -p /snap/bin\nRUN echo \"#!/bin/sh\" > /snap/bin/snapcraft\nRUN snap_version=\"$(awk '/^version:/{print $2}' /snap/snapcraft/current/meta/snap.yaml)\" && echo \"export SNAP_VERSION=\\\"$snap_version\\\"\" >> /snap/bin/snapcraft\nRUN echo 'exec \"$SNAP/usr/bin/python3\" \"$SNAP/bin/snapcraft\" \"$@\"' >> /snap/bin/snapcraft\nRUN chmod +x /snap/bin/snapcraft\n\n# Multi-stage build, only need the snaps from the builder. Copy them one at a\n# time so they can be cached.\nFROM ubuntu:xenial\nCOPY --from=builder /snap/core /snap/core\nCOPY --from=builder /snap/core18 /snap/core18\nCOPY --from=builder /snap/snapcraft /snap/snapcraft\nCOPY --from=builder /snap/bin/snapcraft /snap/bin/snapcraft\n\n# Generate locale and install dependencies.\nRUN apt-get update && apt-get dist-upgrade --yes && apt-get install --no-install-recommends --yes snapd sudo locales && locale-gen en_US.UTF-8 && rm -rf /var/lib/apt/lists/*;\n\n# Set the proper environment.\nENV LANG=\"en_US.UTF-8\"\nENV LANGUAGE=\"en_US:en\"\nENV LC_ALL=\"en_US.UTF-8\"\nENV PATH=\"/snap/bin:$PATH\"\nENV SNAP=\"/snap/snapcraft/current\"\nENV SNAP_NAME=\"snapcraft\"\nENV SNAP_ARCH=\"amd64\"\n"
}