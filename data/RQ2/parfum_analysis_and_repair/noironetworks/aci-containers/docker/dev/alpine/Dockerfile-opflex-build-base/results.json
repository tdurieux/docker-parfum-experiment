{
  "startTime": 1674250603440,
  "endTime": 1674250604583,
  "originalSmells": [
    {
      "rule": "configureShouldUseBuildFlag",
      "position": {
        "lineStart": 38,
        "lineEnd": 38,
        "columnStart": 18,
        "columnEnd": 78
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM alpine:3.12.3\nARG ROOT=/usr/local\n#COPY ovs-musl.patch /\nCOPY ovsdb-idlc.in-fix-dict-change-during-iteration.patch /\nRUN apk upgrade --no-cache && apk add --no-cache build-base \\\n    libtool pkgconfig autoconf automake cmake file py3-six \\\n    linux-headers libuv-dev boost-dev openssl-dev git \\\n    libnetfilter_conntrack-dev rapidjson-dev python3-dev bzip2-dev \\\n    curl libcurl curl-dev zlib-dev\nARG make_args=-j4\nRUN git clone https://github.com/noironetworks/3rdparty-debian.git \\\n  && git clone https://github.com/jupp0r/prometheus-cpp.git -b v0.12.1 --depth 1 \\\n  && cd prometheus-cpp \\\n  && git submodule init \\\n  && git submodule update \\\n  && git apply ../3rdparty-debian/prometheus/prometheus-cpp.patch \\\n  && mkdir _build && cd _build \\\n  && cmake .. -DBUILD_SHARED_LIBS=ON -DENABLE_PUSH=OFF \\\n  && make $make_args && make install && make clean \\\n  && mv /usr/local/lib64/libprometheus-cpp-* /usr/local/lib/ \\\n  && git clone -b v1.31.0 https://github.com/grpc/grpc --config submodule.third_party/re2.url=https://github.com/google/re2.git --config submodule.third_party/re2.active=true \\\n  && cd grpc \\\n  && git submodule update --init \\\n  && mkdir -p cmake/build \\\n  && cd cmake/build \\\n  && cmake -DgRPC_INSTALL=ON -DgRPC_BUILD_TESTS=OFF -DBUILD_SHARED_LIBS=ON -DCMAKE_INSTALL_PREFIX=/usr/local \\\n           -DgRPC_BUILD_GRPC_PYTHON_PLUGIN=OFF -DgRPC_BUILD_CSHARP_EXT=OFF -DgRPC_BUILD_GRPC_CSHARP_PLUGIN=OFF \\\n           -DgRPC_BUILD_GRPC_NODE_PLUGIN=OFF -DgRPC_BUILD_GRPC_OBJECTIVE_C_PLUGIN=OFF -DgRPC_BUILD_GRPC_PHP_PLUGIN=OFF \\\n           -DgRPC_BUILD_GRPC_PYTHON_PLUGIN=OFF -DgRPC_BUILD_GRPC_RUBY_PLUGIN=OFF ../.. \\\n  && make $make_args && make install \\\n  && mv /usr/local/lib64/pkgconfig/proto* /usr/local/lib/pkgconfig/ \\\n  && mv /usr/local/lib64/libproto* /usr/local/lib/ \\\n  && mv /usr/local/lib64/libre2* /usr/local/lib/\nENV CFLAGS='-fPIE -D_FORTIFY_SOURCE=2  -g -O2 -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security'\nENV CXXFLAGS='-fPIE -D_FORTIFY_SOURCE=2  -g -O2 -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security'\nENV LDFLAGS='-pie -Wl,-z,now -Wl,-z,relro'\nRUN git clone https://github.com/openvswitch/ovs.git --branch v2.12.0 --depth 1 \\\n  && cd ovs && patch -p1 < /ovsdb-idlc.in-fix-dict-change-during-iteration.patch \\\n  && ./boot.sh && ./configure --build=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\" --disable-ssl --disable-libcapng --enable-shared \\\n  && make $make_args && make install \\\n  && mkdir -p $ROOT/include/openvswitch/openvswitch \\\n  && mv $ROOT/include/openvswitch/*.h $ROOT/include/openvswitch/openvswitch \\\n  && mv $ROOT/include/openflow $ROOT/include/openvswitch \\\n  && cp include/*.h \"$ROOT/include/openvswitch/\" \\\n  && find lib -name \"*.h\" -exec cp --parents {} \"$ROOT/include/openvswitch/\" \\; \\\n  && make clean\n"
}