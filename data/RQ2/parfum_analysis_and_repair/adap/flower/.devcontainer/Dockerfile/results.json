{
  "startTime": 1674254588137,
  "endTime": 1674254589033,
  "originalSmells": [
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 13,
        "lineEnd": 13,
        "columnStart": 7,
        "columnEnd": 35
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 27,
        "lineEnd": 28,
        "columnStart": 4,
        "columnEnd": 41
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 27,
        "lineEnd": 28,
        "columnStart": 4,
        "columnEnd": 41
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 13,
        "lineEnd": 13,
        "columnStart": 7,
        "columnEnd": 35
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 27,
        "lineEnd": 28,
        "columnStart": 4,
        "columnEnd": 41
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 27,
        "lineEnd": 28,
        "columnStart": 4,
        "columnEnd": 41
      }
    }
  ],
  "repairedDockerfile": "FROM ubuntu:20.04\n\n# https://code.visualstudio.com/docs/remote/containers-advanced#_creating-a-nonroot-user\nARG USERNAME=flwr-vscode\nARG USER_UID=1000\nARG USER_GID=$USER_UID\n\n# Create the user\nRUN groupadd --gid $USER_GID $USERNAME \\\n    && useradd --uid $USER_UID --gid $USER_GID -m $USERNAME \\\n    #\n    # [Optional] Add sudo support. Omit if you don't need to install software after connecting.\n    && apt-get update \\\n    && apt-get install --no-install-recommends -y sudo bash \\\n    && echo $USERNAME ALL=\\(root\\) NOPASSWD:ALL > /etc/sudoers.d/$USERNAME \\\n    && chmod 0440 /etc/sudoers.d/$USERNAME && rm -rf /var/lib/apt/lists/*;\n\n# A persistent volume will be configured in devcontainer.json so we don't loose the commandhistory\n# after rebuilding the container\nRUN SNIPPET=\"export PROMPT_COMMAND='history -a' && export HISTFILE=/commandhistory/.bash_history\" \\\n    && mkdir /commandhistory \\\n    && touch /commandhistory/.bash_history \\\n    && chown -R $USERNAME /commandhistory \\\n    && echo $SNIPPET >> \"/home/$USERNAME/.bashrc\"\n\n# Install system dependencies\nRUN apt update\nRUN apt install --no-install-recommends -y curl wget gnupg python3 python-is-python3 python3-pip git \\\n    build-essential clang-format tmux vim && rm -rf /var/lib/apt/lists/*;\n\nRUN python -m pip install \\\n    pip==22.0.4 \\\n    setuptools==60.9.3 \\\n    poetry==1.1.13\n\nUSER $USERNAME\nENV PATH=\"/home/$USERNAME/.local/bin:${PATH}\"\n"
}