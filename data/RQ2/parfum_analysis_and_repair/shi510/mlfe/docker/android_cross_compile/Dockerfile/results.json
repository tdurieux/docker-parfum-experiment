{
  "startTime": 1674248873763,
  "endTime": 1674248874440,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 8,
        "lineEnd": 8,
        "columnStart": 4,
        "columnEnd": 106
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 14,
        "lineEnd": 14,
        "columnStart": 4,
        "columnEnd": 115
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 19,
        "lineEnd": 19,
        "columnStart": 4,
        "columnEnd": 123
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 9,
        "lineEnd": 9,
        "columnStart": 4,
        "columnEnd": 43
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 4,
        "lineEnd": 4,
        "columnStart": 4,
        "columnEnd": 47
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 4,
        "lineEnd": 4,
        "columnStart": 4,
        "columnEnd": 47
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 4,
        "lineEnd": 4,
        "columnStart": 4,
        "columnEnd": 47
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM ubuntu:18.04\nENV HOME /root\n\nRUN apt-get update && apt-get install --no-install-recommends -y git curl ninja-build zip && rm -rf /var/lib/apt/lists/*;\n\n# install cmake\nWORKDIR ${HOME}\nRUN curl -f -L -O https://github.com/Kitware/CMake/releases/download/v3.17.3/cmake-3.17.3-Linux-x86_64.tar.gz\nRUN tar xf cmake-3.17.3-Linux-x86_64.tar.gz && rm cmake-3.17.3-Linux-x86_64.tar.gz\nRUN cp ${HOME}/cmake-3.17.3-Linux-x86_64/bin/* /usr/bin/\nRUN cp -r ${HOME}/cmake-3.17.3-Linux-x86_64/share/cmake-3.17 /usr/share/\n\n# install host protoc\nRUN curl -f -L -O https://github.com/protocolbuffers/protobuf/releases/download/v3.11.4/protoc-3.11.4-linux-x86_64.zip\nRUN unzip protoc-3.11.4-linux-x86_64.zip -d protoc-3.11.4-linux-x86_64\nRUN cp protoc-3.11.4-linux-x86_64/bin/* /usr/bin/\n\n# install NDK\nRUN curl -f -L -o android-ndk-r21b-linux-x86_64.zip https://dl.google.com/android/repository/android-ndk-r21b-linux-x86_64.zip\nRUN unzip android-ndk-r21b-linux-x86_64.zip\nENV NDK_ROOT ${HOME}/android-ndk-r21b\n\n# clone mlfe library and update submodule.\nRUN git clone https://github.com/shi510/mlfe\nWORKDIR ${HOME}/mlfe\nRUN git checkout developer_preview\nRUN git submodule update --init --recursive\n\n# build mlfe using cross compiler for aarch64 with XNNPACK.\nRUN mkdir ${HOME}/mlfe/build\nWORKDIR ${HOME}/mlfe/build\nRUN cmake \\\n    -D MLFE_LITE=ON \\\n    -D BUILD_TEST=ON \\\n    -D USE_XNNPACK=ON \\\n    -D ANDROID_ABI=arm64-v8a \\\n    -D ANDROID_PLATFORM=26 \\\n    -D ANDROID_LINKER_FLAGS=\"-llog\" \\\n    -D CMAKE_BUILD_TYPE=Release \\\n    -D CMAKE_TOOLCHAIN_FILE=${NDK_ROOT}/build/cmake/android.toolchain.cmake \\\n    -D CMAKE_INSTALL_PREFIX=${HOME}/mlfe/mlfe_installed \\\n    -G Ninja ..\nRUN ninja\n"
}