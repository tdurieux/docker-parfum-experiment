{
  "startTime": 1674250212311,
  "endTime": 1674250212830,
  "originalSmells": [
    {
      "rule": "npmCacheCleanAfterInstall",
      "position": {
        "lineStart": 2,
        "lineEnd": 2,
        "columnStart": 4,
        "columnEnd": 17
      }
    },
    {
      "rule": "npmCacheCleanAfterInstall",
      "position": {
        "lineStart": 20,
        "lineEnd": 20,
        "columnStart": 4,
        "columnEnd": 17
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM node:15-alpine as builder\n# dependencies\nRUN npm i -g pnpm && npm cache clean --force;\nWORKDIR /monorepo\nCOPY pnpm-workspace.yaml ./\nCOPY apps/web-api/pnpm-lock.yaml ./pnpm-lock.yaml\nCOPY shared/lib/package.json shared/lib/\nCOPY apps/web-api/package.json apps/web-api/\nRUN pnpm i --frozen-lockfile --prod\n# build\nCOPY tsconfig.json ./\nCOPY shared/lib/tsconfig.json shared/lib/tsconfig.build.json shared/lib/\nCOPY shared/lib/src shared/lib/src\nCOPY apps/web-api/tsconfig.json apps/web-api/tsconfig.build.json apps/web-api/\nCOPY apps/web-api/src apps/web-api/src\nWORKDIR /monorepo/apps/web-api\nRUN pnpm build\n\nFROM node:15-alpine\n# prod dependencies\nRUN npm i -g pnpm && npm cache clean --force;\nWORKDIR /monorepo\nCOPY pnpm-workspace.yaml ./\nCOPY apps/web-api/pnpm-lock.yaml ./pnpm-lock.yaml\nCOPY shared/lib/package.json shared/lib/\nCOPY apps/web-api/package.json apps/web-api/\nRUN pnpm i --frozen-lockfile --prod --no-optional\n# copy build\nCOPY --from=builder /monorepo/shared/lib/dist shared/lib/dist\nCOPY --from=builder /monorepo/apps/web-api/dist apps/web-api/dist\nWORKDIR /monorepo/apps/web-api\n# run\nCMD [\"pnpm\", \"start:prod\"]\n"
}