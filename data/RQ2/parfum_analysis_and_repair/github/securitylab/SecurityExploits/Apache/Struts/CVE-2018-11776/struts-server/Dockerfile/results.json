{
  "startTime": 1674253442102,
  "endTime": 1674253443287,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 37,
        "lineEnd": 37,
        "columnStart": 4,
        "columnEnd": 110
      }
    },
    {
      "rule": "curlUseHttpsUrl",
      "position": {
        "lineStart": 37,
        "lineEnd": 37,
        "columnStart": 4,
        "columnEnd": 110
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 3,
        "lineEnd": 5,
        "columnStart": 4,
        "columnEnd": 61
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 3,
        "lineEnd": 5,
        "columnStart": 4,
        "columnEnd": 61
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM ubuntu:bionic\n\nRUN apt-get update && \\\n    apt-get install --no-install-recommends -y \\\n      openjdk-8-jdk git curl zip unzip \\\n      tmux sudo emacs maven openssh-server net-tools x11-apps && rm -rf /var/lib/apt/lists/*;\n\nARG UID=1000\n\n# Create a non-root user account to run Struts.\nRUN adduser victim --disabled-password --uid $UID\n\n# Grant the 'victim' user sudo access, so that we can start sshd.\nRUN adduser victim sudo\nRUN echo \"victim:x\" | chpasswd\n\n# Switch over to the 'victim' user, since root access is no longer required\nUSER victim\nWORKDIR /home/victim\n\n# Create an ssh authorized keys file. Systems administrators would add their\n# public key to this file so that they can login remotely with ssh.\nRUN mkdir -m 700 ~/.ssh && touch ~/.ssh/authorized_keys && chmod 600 ~/.ssh/authorized_keys\n\n# Get Struts source code.\nRUN git clone https://github.com/apache/struts.git\n\n# Checkout vulnerable version.\nRUN cd struts && git branch struts_2_5_16 STRUTS_2_5_16 && git checkout struts_2_5_16\n\n# Remove namespace from configuration file.\nCOPY struts-actionchaining.xml /home/victim/struts/apps/showcase/src/main/resources/struts-actionchaining.xml\n\n# Build Struts.\nRUN cd struts/apps/showcase && mvn clean package -DskipTests\n\n# Get Tomcat.\nRUN curl -f https://mirror.ox.ac.uk/sites/rsync.apache.org/tomcat/tomcat-9/v9.0.12/bin/apache-tomcat-9.0.12.zip -O\nRUN unzip apache-tomcat-9.0.12.zip && rm apache-tomcat-9.0.12.zip\n\n# Deploy the webapp.\nRUN cp struts/apps/showcase/target/struts2-showcase.war apache-tomcat-9.0.12/webapps/\nRUN chmod 755 apache-tomcat-9.0.12/bin/catalina.sh\n"
}