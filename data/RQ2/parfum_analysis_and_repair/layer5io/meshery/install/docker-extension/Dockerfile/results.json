{
  "startTime": 1674256029276,
  "endTime": 1674256030224,
  "originalSmells": [
    {
      "rule": "apkAddUseNoCache",
      "position": {
        "lineStart": 2,
        "lineEnd": 2,
        "columnStart": 4,
        "columnEnd": 25
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM golang:1.17-alpine AS builder\nENV CGO_ENABLED=0\nRUN apk add --no-cache --update make\nWORKDIR /backend\nCOPY go.* .\nARG TARGETARCH\nRUN --mount=type=cache,target=/go/pkg/mod \\\n  --mount=type=cache,target=/root/.cache/go-build \\\n  go mod download\nCOPY . .\nRUN --mount=type=cache,target=/go/pkg/mod \\\n  --mount=type=cache,target=/root/.cache/go-build \\\n  make bin\n\nFROM node:14.17-alpine3.13 AS client-builder\nWORKDIR /ui\n# cache packages in layer\nCOPY ui/package.json /ui/package.json\nCOPY ui/package-lock.json /ui/package-lock.json\nARG TARGETARCH\nRUN --mount=type=cache,target=/usr/src/app/.npm-${TARGETARCH} \\\n  npm set cache /usr/src/app/.npm-${TARGETARCH} && \\\n  npm ci\n# install\nCOPY ui /ui\nRUN npm run build\n\nFROM alpine\nARG GIT_STRIPPED_VERSION\nARG GIT_VERSION\nARG RELEASE_CHANNEL\nLABEL org.opencontainers.image.title=\"Meshery\" \\\n  org.opencontainers.image.description=\"Design and operate your cloud native deployments with the extensible management plane, Meshery.\" \\\n  org.opencontainers.image.vendor=\"Layer5, Inc.\" \\\n  com.docker.desktop.extension.api.version=\">= 0.2.0\" \\\n   com.docker.extension.screenshots=\"[ \\\n      { \\\n        \\\"alt\\\": \\\"Meshery Docker Extension\\\", \\ \n        \\\"url\\\": \\\"https://raw.githubusercontent.com/meshery/meshery/master/install/docker-extension/docs/img/meshmap-docker-extension-for-meshery.png\\\" \\\n      },{ \\\n        \\\"alt\\\": \\\"Meshery Docker Extension\\\", \\\n        \\\"url\\\": \\\"https://raw.githubusercontent.com/meshery/meshery/master/install/docker-extension/docs/img/Docker-extension-meshery.png\\\" \\ \n      } \\\n    ]\" \\\n  com.docker.extension.detailed-description=\"\\\n  <h2>MeshMap is the world's only visual designer for Kubernetes and service mesh deployments.</h2> \\ \n  <p>The Meshery Docker Extension extends Docker Desktop’s position as the cloud native developer’s go-to Kubernetes environment with easy access to the next layer of cloud native infrastructure: service meshes.</p> \\ \n  <ul> \\\n    <li><b>Detection of Kubernetes environments -</b> scan your kubeconfig and select your current Kubernetes environment. Switch from one environment to another one.</li> \\\n    <li><b>Service mesh support for your Docker Compose apps -</b> Import your Docker Compose apps. Configure and deploy them to Kubernetes and any service mesh.</li> \\ \n    <li><b>Visual designer for Docker Compose apps -</b> Early access to the Docker Extension for Meshery that offers a visual topology for designing Docker Compose applications, operating Kubernetes, service meshes, and their workloads.</li> \\ \n    <li><b>Single-click deployment of any service mesh -</b> Support of 10 different service meshes to the fingertips of developers in connection with Docker Desktop’s ability to deliver Kubernetes locally.</li> \\ \n  </ul>\" \\\n  com.docker.desktop.extension.icon=\"https://raw.githubusercontent.com/meshery/meshery/master/install/docker-extension/docs/img/meshery-logo-light.svg\" \\\n  com.docker.extension.publisher-url=\"https://meshery.io\" \\\n  com.docker.extension.additional-urls=\"[{\\\"title\\\":\\\"Documentation\\\",\\\"url\\\":\\\"https://docs.meshery.io\\\"},{\\\"title\\\":\\\"Project\\\",\\\"url\\\":\\\"https://layer5.io/meshery\\\"},{\\\"title\\\":\\\"Slack\\\",\\\"url\\\":\\\"https://slack.layer5.io\\\"},{\\\"title\\\":\\\"Discussion Forum\\\",\\\"url\\\":\\\"https://discuss.layer5.io\\\"}]\"\nCOPY --from=builder /backend/bin/service /\nCOPY docker-compose.yaml .\nCOPY metadata.json .\nRUN mkdir -p /mesheryctl/darwin && mkdir -p /mesheryctl/windows && mkdir -p /mesheryctl/linux\nADD https://github.com/meshery/meshery/releases/download/${GIT_VERSION}/mesheryctl_${GIT_STRIPPED_VERSION}_Darwin_x86_64.zip /mesheryctl/darwin/\nADD https://github.com/meshery/meshery/releases/download/${GIT_VERSION}/mesheryctl_${GIT_STRIPPED_VERSION}_Windows_x86_64.zip /mesheryctl/windows/\nADD https://github.com/meshery/meshery/releases/download/${GIT_VERSION}/mesheryctl_${GIT_STRIPPED_VERSION}_Linux_x86_64.zip /mesheryctl/linux/\nRUN unzip /mesheryctl/darwin/mesheryctl_${GIT_STRIPPED_VERSION}_Darwin_x86_64.zip -d /mesheryctl/darwin/\nRUN unzip /mesheryctl/windows/mesheryctl_${GIT_STRIPPED_VERSION}_Windows_x86_64.zip -d /mesheryctl/windows/\nRUN unzip /mesheryctl/linux/mesheryctl_${GIT_STRIPPED_VERSION}_Linux_x86_64.zip -d /mesheryctl/linux/\nCOPY meshery-logo-light.svg .\nCOPY --from=client-builder /ui/build ui\nEXPOSE 7877/tcp\nCMD ./service\n"
}