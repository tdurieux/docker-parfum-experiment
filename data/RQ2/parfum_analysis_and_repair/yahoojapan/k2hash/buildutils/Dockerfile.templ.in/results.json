{
  "startTime": 1674254330674,
  "endTime": 1674254331764,
  "originalSmells": [
    {
      "rule": "configureShouldUseBuildFlag",
      "position": {
        "lineStart": 60,
        "lineEnd": 60,
        "columnStart": 1,
        "columnEnd": 31
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "#\n# K2HASH\n#\n# Copyright 2013 Yahoo Japan Corporation.\n#\n# K2HASH is key-valuew store base libraries.\n# K2HASH is made for the purpose of the construction of\n# original KVS system and the offer of the library.\n# The characteristic is this KVS library which Key can\n# layer. And can support multi-processing and multi-thread,\n# and is provided safely as available KVS.\n#\n# For the full copyright and license information, please view\n# the license file that was distributed with this source code.\n#\n# AUTHOR:   Takeshi Nakatani\n# CREATE:   Tue, Aug 10 2021\n# REVISION:\n#\n\n# [NOTE]\n# This file expects the following variables to be expanded by autoconf.\n#\tGIT_DOMAIN\n#\tPACKAGE_NAME\n#\n# Also, replace the following variables.\n#\tDOCKER_IMAGE_BASE\t\t\t(ex. \"antpickax/libfullock:latest\")\n#\tDOCKER_IMAGE_DEV_BASE\t\t(ex. \"antpickax/libfullock-dev:latest\")\n#\tDOCKER_GIT_ORGANIZATION\t\t(ex. \"antpickax\")\n#\tDOCKER_GIT_REPOSITORY\t\t(ex. \"xxxxx\")\n#\tDOCKER_GIT_BRANCH\t\t\t(ex. \"yyyyy\")\n#\tPKG_UPDATE\t\t\t\t\t(ex. \"apk update -q --no-progress\")\n#\tPKG_INSTALL_BUILDER\t\t\t(ex. \"apk add -q --no-progress --no-cache git build-base openssl libtool automake autoconf procps\")\n#\tPKG_INSTALL_BIN\t\t\t\t(ex. \"apk add -q --no-progress --no-cache libstdc++\")\n#\tCONFIGURE_FLAG\t\t\t\t(ex. \"--with-gcrypt\")\n#\tBUILD_FLAGS\t\t\t\t\t(ex. \"CXXFLAGS=-Wno-address-of-packed-member\")\n#\tBUILD_ENV\t\t\t\t\t(ex, \"ENV DEBIAN_FRONTEND=noninteractive\")\n#\tUPDATE_LIBPATH\t\t\t\t(ex. \"ldconfig\", if want no-operation, specify \":\")\n#\n\n#\n# Builder\n#\nFROM %%DOCKER_IMAGE_DEV_BASE%% AS @PACKAGE_NAME@-builder\n\nMAINTAINER antpickax\nWORKDIR /\n\n%%BUILD_ENV%%\nENV K2HATTR_ENC_TYPE=AES256_PBKDF2\n\nRUN set -x && \\\n\t%%PKG_UPDATE%% && \\\n\t%%PKG_INSTALL_BUILDER%% && \\\n\tcd / && \\\n\tgit clone https://@GIT_DOMAIN@/%%DOCKER_GIT_ORGANIZATION%%/%%DOCKER_GIT_REPOSITORY%%.git && \\\n\tcd %%DOCKER_GIT_REPOSITORY%% && \\\n\tgit checkout %%DOCKER_GIT_BRANCH%% && \\\n\t./autogen.sh && \\\n\t./configure --build=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\" %%CONFIGURE_FLAG%% && \\\n\tmake %%BUILD_FLAGS%% && \\\n\tmake check && \\\n\tmake install && \\\n\tcd / && \\\n\ttar cvzf @PACKAGE_NAME@-dev.tgz /usr/local/lib/lib@PACKAGE_NAME@.la* /usr/local/lib/lib@PACKAGE_NAME@.a* /usr/local/lib/lib@PACKAGE_NAME@.so* && \\\n\ttar cvzf @PACKAGE_NAME@.tgz /usr/local/lib/lib@PACKAGE_NAME@.so*\n\n#\n# Image for development\n#\nFROM %%DOCKER_IMAGE_DEV_BASE%% AS @PACKAGE_NAME@-dev\n\nMAINTAINER Antpickax\nWORKDIR /\n\nRUN set -x && \\\n\tmkdir -p /usr/local/bin && \\\n\tmkdir -p /usr/local/lib/pkgconfig && \\\n\tmkdir -p /usr/local/include/@PACKAGE_NAME@\n\nCOPY --from=@PACKAGE_NAME@-builder /usr/local/bin/k2hbench                       /usr/local/bin/\nCOPY --from=@PACKAGE_NAME@-builder /usr/local/bin/k2hcompress                    /usr/local/bin/\nCOPY --from=@PACKAGE_NAME@-builder /usr/local/bin/k2himport                      /usr/local/bin/\nCOPY --from=@PACKAGE_NAME@-builder /usr/local/bin/k2hlinetool                    /usr/local/bin/\nCOPY --from=@PACKAGE_NAME@-builder /usr/local/bin/k2hreplace                     /usr/local/bin/\nCOPY --from=@PACKAGE_NAME@-builder /usr/local/include/@PACKAGE_NAME@/*           /usr/local/include/@PACKAGE_NAME@/\nCOPY --from=@PACKAGE_NAME@-builder /usr/local/lib/pkgconfig/lib@PACKAGE_NAME@.pc /usr/local/lib/pkgconfig/\nCOPY --from=@PACKAGE_NAME@-builder /@PACKAGE_NAME@-dev.tgz                       /@PACKAGE_NAME@-dev.tgz\n\nRUN cd / && \\\n\ttar xvzf @PACKAGE_NAME@-dev.tgz && \\\n\trm /@PACKAGE_NAME@-dev.tgz && \\\n\t%%UPDATE_LIBPATH%%\n\nCMD [\"/bin/sh\"]\n\n#\n# Image for main\n#\nFROM %%DOCKER_IMAGE_BASE%% AS @PACKAGE_NAME@\n\nMAINTAINER antpickax\nWORKDIR /\n\nRUN set -x && \\\n\t%%PKG_UPDATE%% && \\\n\t%%PKG_INSTALL_BIN%% && \\\n\tmkdir -p /usr/local/bin && \\\n\tmkdir -p /usr/local/lib\n\nCOPY --from=@PACKAGE_NAME@-builder /usr/local/bin/k2hbench    /usr/local/bin/\nCOPY --from=@PACKAGE_NAME@-builder /usr/local/bin/k2hcompress /usr/local/bin/\nCOPY --from=@PACKAGE_NAME@-builder /usr/local/bin/k2himport   /usr/local/bin/\nCOPY --from=@PACKAGE_NAME@-builder /usr/local/bin/k2hlinetool /usr/local/bin/\nCOPY --from=@PACKAGE_NAME@-builder /usr/local/bin/k2hreplace  /usr/local/bin/\nCOPY --from=@PACKAGE_NAME@-builder /@PACKAGE_NAME@.tgz        /@PACKAGE_NAME@.tgz\n\nRUN cd / && \\\n\ttar xvzf @PACKAGE_NAME@.tgz && \\\n\trm /@PACKAGE_NAME@.tgz && \\\n\t%%UPDATE_LIBPATH%%\n\nCMD [\"/bin/sh\"]\n\n#\n# Local variables:\n# tab-width: 4\n# c-basic-offset: 4\n# End:\n# vim600: noexpandtab sw=4 ts=4 fdm=marker\n# vim<600: noexpandtab sw=4 ts=4\n#\n"
}