{
  "startTime": 1674254257816,
  "endTime": 1674254259474,
  "originalSmells": [
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 51,
        "lineEnd": 51,
        "columnStart": 4,
        "columnEnd": 39
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 20,
        "lineEnd": 21,
        "columnStart": 4,
        "columnEnd": 62
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 79,
        "lineEnd": 79,
        "columnStart": 4,
        "columnEnd": 28
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 20,
        "lineEnd": 21,
        "columnStart": 4,
        "columnEnd": 62
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "# To create the image:\n#   $ (cd docker-tool-chain && ./docker-build.sh)\n# To run the container:\n#   $ docker run -v ${PWD}:/src/ --privileged=true -u $(id -u ${USER}):$(id -g ${USER}) -it vipoo/yellow-msx-rc2014-tool-chain:latest\n\nFROM ubuntu:focal-20220105 as STAGE1\n\nLABEL Version=\"0.0.13\" \\\n      Date=\"2021-12-17\" \\\n      Maintainer=\"Dean Netherton\" \\\n      Description=\"Tool chain to build units for the yellow msx for rc2014 kits\"\n\nENV Z88DK_PATH=\"/opt/z88dk\" \\\n    SDCC_PATH=\"/tmp/sdcc\" \\\n    BUILD_SDCC=1 \\\n    DEBIAN_FRONTEND=noninteractive\n\nRUN sed -i 's|http://archive.ubuntu.com/ubuntu/|http://mirror.aarnet.edu.au/pub/ubuntu/archive/|g' /etc/apt/sources.list && \\\n    apt update -y && \\\n    apt dist-upgrade -y && \\\n    apt install --no-install-recommends -y mtools build-essential dos2unix libboost-all-dev texinfo texi2html libxml2-dev subversion bison \\\n                   flex zlib1g-dev m4 git wget dosfstools curl && rm -rf /var/lib/apt/lists/*;\n\nRUN mv /usr/bin/svn /usr/bin/org-svn\nCOPY ./svnshim.sh /usr/bin/svn\n\nRUN git clone https://github.com/z88dk/z88dk.git ${Z88DK_PATH}\nWORKDIR /opt/z88dk\nRUN git checkout 8d70c5aaa6a6de544d66731015aaaa0d8f0253da\nRUN git submodule update --init --recursive\nRUN rm -rf .git*\nRUN chmod 777 build.sh\nRUN ./build.sh\nRUN rm -fR ${SDCC_PATH}\n\nRUN cd /opt && \\\n\twget https://sourceforge.net/projects/sdcc/files/sdcc-linux-amd64/4.0.0/sdcc-4.0.0-amd64-unknown-linux2.5.tar.bz2/download -O \"sdcc-4.0.0-amd64-unknown-linux2.5.tar.bz2\" && \\\n\ttar -xjf  sdcc-4.0.0-amd64-unknown-linux2.5.tar.bz2 && \\\n\trm sdcc-4.0.0-amd64-unknown-linux2.5.tar.bz2\n\nRUN cd /opt && \\\n    git clone --depth 1 https://github.com/E3V3A/hex2bin.git && \\\n\tcd hex2bin && \\\n\tmake\n\nRUN cd /opt && \\\n\tgit clone --depth 1 https://github.com/jhallen/cpm.git && \\\n\tcd cpm && \\\n\tOS=linux MAKEFLAGS= make -B --trace\n\nRUN wget -O /tmp/node.tar.gz https://nodejs.org/dist/v16.5.0/node-v16.5.0-linux-x64.tar.gz\nRUN tar -xzf \"/tmp/node.tar.gz\" -C /opt && \\\n    mv /opt/node-v16.5.0-linux-x64 /opt/nodejs && \\\n    chmod +x /opt/nodejs/bin/node && \\\n    /opt/nodejs/bin/node --version && rm \"/tmp/node.tar.gz\"\n\nRUN cd /opt && \\\n    wget https://github.com/z00m128/sjasmplus/archive/refs/tags/v1.18.3.tar.gz -O sjasmplus.tar.gz && \\\n    tar -xvf sjasmplus.tar.gz && \\\n    rm sjasmplus.tar.gz && \\\n    mv sjasmplus-1.18.3 sjasmplus && \\\n    cd sjasmplus && \\\n    make clean && \\\n    make\n\nFROM ubuntu:focal-20220105\n\nARG DEBIAN_FRONTEND=noninteractive\nRUN sed -i 's|http://archive.ubuntu.com/ubuntu/|http://mirror.aarnet.edu.au/pub/ubuntu/archive/|g' /etc/apt/sources.list && \\\n    dpkg --add-architecture i386 && \\\n    apt update -y && \\\n    apt dist-upgrade -y && \\\n    apt install -y --no-install-recommends mtools dos2unix pasmo build-essential dosfstools clang-format git m4 ssh xxd wget ca-certificates gnupg2 software-properties-common zip && \\\n    wget -qO- https://dl.winehq.org/wine-builds/Release.key | apt-key add - && \\\n    apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv F987672F && \\\n    apt-add-repository 'deb https://dl.winehq.org/wine-builds/ubuntu/ focal main' && \\\n    apt-key adv --keyserver keyserver.ubuntu.com --recv-key C99B11DEB97541F0 && \\\n    apt-add-repository https://cli.github.com/packages && \\\n    apt update -y && \\\n    apt install --no-install-recommends -y wine32 gh && \\\n    rm -rf /var/lib/apt/lists/*\n\nCOPY Wincupl/Shared /opt/wincupl\n\nCOPY --from=STAGE1 /opt/nodejs /opt/nodejs\nCOPY --from=STAGE1 /opt/sdcc-4.0.0 /opt/sdcc-4.0.0\nCOPY --from=STAGE1 /opt/cpm /opt/cpm\nCOPY --from=STAGE1 /opt/hex2bin /opt/hex2bin\nCOPY --from=STAGE1 /opt/sjasmplus /opt/sjasmplus\nCOPY --from=STAGE1 /opt/z88dk/bin /opt/z88dk/bin\nCOPY --from=STAGE1 /opt/z88dk/include /opt/z88dk/include\nCOPY --from=STAGE1 /opt/z88dk/lib /opt/z88dk/lib\nCOPY --from=STAGE1 /opt/z88dk/libsrc/_DEVELOPMENT/sdcc_peeph*.* /opt/z88dk/libsrc/_DEVELOPMENT/\nCOPY --from=STAGE1 /opt/z88dk/libsrc/_DEVELOPMENT/sdcc_opt*.* /opt/z88dk/libsrc/_DEVELOPMENT/\nCOPY --from=STAGE1 /opt/z88dk/libsrc/_DEVELOPMENT/lib/sdcc_iy /opt/z88dk/libsrc/_DEVELOPMENT/lib/sdcc_iy\nCOPY --from=STAGE1 /opt/z88dk/libsrc/_DEVELOPMENT/lib/sdcc_ix /opt/z88dk/libsrc/_DEVELOPMENT/lib/sdcc_ix\nCOPY --from=STAGE1 /opt/z88dk/libsrc/_DEVELOPMENT/lib/sccz80 /opt/z88dk/libsrc/_DEVELOPMENT/lib/sccz80\n\nENV Z88DK_PATH=\"/opt/z88dk\" \\\n    PATH=\"/opt/z88dk/bin:/opt/nodejs/bin:/opt/sdcc-4.0.0/bin:/opt/hex2bin:/opt/cpm:/opt/sjasmplus:${PATH}\" \\\n    ZCCCFG=\"/opt/z88dk/lib/config/\"\n\nRUN sjasmplus --version\n\nRUN adduser --disabled-password --gecos \"\" builder\n\nCOPY bashrc /home/builder/.bashrc\n\nRUN su builder -c \"wine cmd.exe /C dir\"\n\nWORKDIR /src/\n\nLABEL Version=\"0.0.13\" \\\n      Date=\"2021-12-17\" \\\n      Maintainer=\"Dean Netherton\" \\\n      Description=\"Tool chain to build units for the yellow msx for rc2014 kits\"\n"
}