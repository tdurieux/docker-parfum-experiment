{
  "startTime": 1674250090461,
  "endTime": 1674250091871,
  "originalSmells": [
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 17,
        "lineEnd": 17,
        "columnStart": 7,
        "columnEnd": 25
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 11,
        "lineEnd": 11,
        "columnStart": 7,
        "columnEnd": 41
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 12,
        "lineEnd": 16,
        "columnStart": 7,
        "columnEnd": 14
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM python:3.8 as builder\n\n# metadata\nMAINTAINER steder@gmail.com\nLABEL version=\"1.0\"\n\nENV ENV=development\n\n# actual container setup:\nRUN apt-get update \\\n    && apt-get -y upgrade \\\n    && apt-get install --no-install-recommends -y build-essential \\\n    && apt-get install --no-install-recommends -y imagemagick \\\n    git \\\n    python \\\n    python-dev \\\n    python-pip \\\n    && pip install --no-cache-dir poetry \\\n    && rm -rf /var/lib/apt/lists/*\n\nFROM builder as giraffe\n\n# Giraffe listens on 9876 by default\nEXPOSE 9876\n\n# let's get the code!\n\nWORKDIR /opt/app\n\nCOPY pyproject.toml poetry.lock /opt/app/\nRUN poetry install --no-root --no-dev\n\nCOPY . /opt/app\n\nRUN poetry install --no-dev\n\nCMD [\"poetry\", \"gunicorn\", \"-k\", \"gevent\", \"-c\", \"etc/gunicorn.conf.py\", \"giraffe:app\", \"--log-level=DEBUG\"]\n\nfrom giraffe as dev\nRUN poetry install\n\nCMD [\"poetry\", \"run\", \"python\", \"/opt/app/giraffe.py\"]\n"
}