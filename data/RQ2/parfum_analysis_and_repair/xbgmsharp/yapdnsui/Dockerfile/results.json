{
  "startTime": 1674220824184,
  "endTime": 1674220825858,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 36,
        "lineEnd": 36,
        "columnStart": 4,
        "columnEnd": 50
      }
    },
    {
      "rule": "npmCacheCleanAfterInstall",
      "position": {
        "lineStart": 42,
        "lineEnd": 42,
        "columnStart": 4,
        "columnEnd": 52
      }
    },
    {
      "rule": "npmCacheCleanAfterInstall",
      "position": {
        "lineStart": 44,
        "lineEnd": 44,
        "columnStart": 4,
        "columnEnd": 65
      }
    },
    {
      "rule": "npmCacheCleanAfterInstall",
      "position": {
        "lineStart": 72,
        "lineEnd": 72,
        "columnStart": 2,
        "columnEnd": 40
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 20,
        "lineEnd": 20,
        "columnStart": 4,
        "columnEnd": 32
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 33,
        "lineEnd": 33,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 39,
        "lineEnd": 39,
        "columnStart": 4,
        "columnEnd": 29
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 47,
        "lineEnd": 47,
        "columnStart": 4,
        "columnEnd": 54
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 49,
        "lineEnd": 49,
        "columnStart": 4,
        "columnEnd": 31
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 52,
        "lineEnd": 52,
        "columnStart": 4,
        "columnEnd": 37
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 20,
        "lineEnd": 20,
        "columnStart": 4,
        "columnEnd": 32
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 33,
        "lineEnd": 33,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 39,
        "lineEnd": 39,
        "columnStart": 4,
        "columnEnd": 29
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 47,
        "lineEnd": 47,
        "columnStart": 4,
        "columnEnd": 54
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 49,
        "lineEnd": 49,
        "columnStart": 4,
        "columnEnd": 31
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 52,
        "lineEnd": 52,
        "columnStart": 4,
        "columnEnd": 37
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 20,
        "lineEnd": 20,
        "columnStart": 4,
        "columnEnd": 32
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 33,
        "lineEnd": 33,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 39,
        "lineEnd": 39,
        "columnStart": 4,
        "columnEnd": 29
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 47,
        "lineEnd": 47,
        "columnStart": 4,
        "columnEnd": 54
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 49,
        "lineEnd": 49,
        "columnStart": 4,
        "columnEnd": 31
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 52,
        "lineEnd": 52,
        "columnStart": 4,
        "columnEnd": 37
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 20,
        "lineEnd": 20,
        "columnStart": 4,
        "columnEnd": 56
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 33,
        "lineEnd": 33,
        "columnStart": 4,
        "columnEnd": 51
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 39,
        "lineEnd": 39,
        "columnStart": 4,
        "columnEnd": 53
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 47,
        "lineEnd": 47,
        "columnStart": 4,
        "columnEnd": 78
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 49,
        "lineEnd": 49,
        "columnStart": 4,
        "columnEnd": 55
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 52,
        "lineEnd": 52,
        "columnStart": 4,
        "columnEnd": 61
      }
    }
  ],
  "repairedDockerfile": "# NodeJS + SSHD + myapp\n#\n# Base from ultimate-seed Dockerfile\n# https://github.com/pilwon/ultimate-seed\n#\n# Mainly to run yapdnsui\n# https://github.com/xbgmsharp/yapdnsui\n#\n# DOCKER-VERSION 0.9.1\n# VERSION 0.0.1\n\n# Pull base image.\nFROM ubuntu:latest\nMAINTAINER Francois Lacroix <xbgmsharp@gmail.com>\n\n# Setup system and install tools\nRUN echo \"initscripts hold\" | dpkg --set-selections\nRUN echo 'alias ll=\"ls -lah --color=auto\"' >> /etc/bash.bashrc\n\n# Set locale\nRUN apt-get -qqy --no-install-recommends install locales && rm -rf /var/lib/apt/lists/*;\nRUN locale-gen --purge en_US en_US.UTF-8\nRUN dpkg-reconfigure locales\nENV LC_ALL en_US.UTF-8\n\n# Set ENV\nENV HOME /root\nENV DEBIAN_FRONTEND noninteractive\n\n# Update and Upgrade system\nRUN apt-get update && apt-get -y upgrade\n\n# Install deb dependencies for nodesource.com\nRUN apt-get -y --no-install-recommends install curl && rm -rf /var/lib/apt/lists/*;\n\n# Note the new setup script name for Node.js v0.12\nRUN curl -f -sL https://deb.nodesource.com/setup_0.12 | bash -\n\n# Install nodejs\nRUN apt-get -y --no-install-recommends install nodejs && rm -rf /var/lib/apt/lists/*;\n\n# Install nodejs dependencies\nRUN npm install -g bower grunt-cli npm-check-updates && npm cache clean --force;\n# Install my application dependencies\nRUN npm install -g express express-generator jade request sqlite3 && npm cache clean --force;\n\n# Install my dependencies\nRUN apt-get -y --no-install-recommends install nano curl wget vim libsqlite3-0 && rm -rf /var/lib/apt/lists/*;\n# Install Git\nRUN apt-get -y --no-install-recommends install git-core && rm -rf /var/lib/apt/lists/*;\n\n# Install SSH\nRUN apt-get install --no-install-recommends -y openssh-server && rm -rf /var/lib/apt/lists/*;\nRUN sed -ri 's/UsePAM yes/#UsePAM yes/g' /etc/ssh/sshd_config\nRUN sed -ri 's/#UsePAM no/UsePAM no/g' /etc/ssh/sshd_config\nRUN sed 's/#PermitRootLogin yes/PermitRootLogin yes/' -i /etc/ssh/sshd_config\nRUN sed 's/PermitRootLogin without-password/PermitRootLogin yes/' -i /etc/ssh/sshd_config\nRUN mkdir /var/run/sshd\nRUN echo 'root:admin' | chpasswd\n\n# Add app directory\nRUN mkdir /app\nADD startup.sh /app/startup.sh\n#ADD . /app\n\n# Install `yapdnsui` from git\nRUN cd /app && \\\n  git clone https://github.com/xbgmsharp/yapdnsui\n\nRUN \\\n  cd /app/yapdnsui && \\\n  npm prune --production && \\\n  npm install --production --unsafe-perm && \\\n  npm rebuild && \\\n  bower --allow-root install && npm cache clean --force;\n\n# Define environment variables\n#ENV NODE_ENV production\nENV DEBUG yapdnsui\nENV PORT 8080\n\n# Define working directory.\nWORKDIR /app/yapdnsui\n\n# Define default command.\n# Start ssh and other services.\nCMD [\"/bin/bash\", \"/app/startup.sh\"]\n\n# Expose ports.\nEXPOSE 22 8080\n\n# Clean up APT when done.\nRUN apt-get clean && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*\n\n# Make sure the package repository is up to date\nONBUILD apt-get update && apt-get -y upgrade\nONBUILD apt-get clean && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*\n"
}