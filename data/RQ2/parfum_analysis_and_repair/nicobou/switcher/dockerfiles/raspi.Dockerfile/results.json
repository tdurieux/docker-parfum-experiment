{
  "startTime": 1674253206589,
  "endTime": 1674253207474,
  "originalSmells": [
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 8,
        "lineEnd": 74,
        "columnStart": 7,
        "columnEnd": 16
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "ARG SHMDATA_IMAGE=\"registry.gitlab.com/sat-metalab/shmdata\"\nARG SHMDATA_TAG=\"develop\"\n\nFROM ${SHMDATA_IMAGE}:${SHMDATA_TAG} AS dependencies\nLABEL MAINTAINER=\"Metalab <metalab-dev@sat.qc.ca>\"\n\n# Install common dependencies\nRUN apt-get update -y \\\n    && DEBIAN_FRONTEND=noninteractive \\\n        apt-get install -y --no-install-recommends -qq \\\n            build-essential \\\n            ca-certificates \\\n            cmake bison \\\n            flex \\\n            gcc-8 \\\n            g++-8 \\\n            git \\\n            gsoap \\\n            gstreamer1.0-libav \\\n            gstreamer1.0-plugins-bad \\\n            gstreamer1.0-plugins-base \\\n            gstreamer1.0-plugins-good \\\n            gstreamer1.0-plugins-ugly \\\n            jackd \\\n            libcgsi-gsoap1\\\n            libcgsi-gsoap-dev \\\n            libcurl3-gnutls \\\n            libcurl4-gnutls-dev \\\n            libxxf86vm1 \\\n            libgl1-mesa-dev \\\n            libglib2.0 \\\n            libglib2.0-dev \\\n            libgstreamer-plugins-base1.0 \\\n            libgstreamer-plugins-base1.0-dev \\\n            libgstreamer-plugins-bad1.0-dev \\\n            libgstreamer1.0 \\\n            libgstreamer1.0-dev \\\n            libjack-jackd2-dev \\\n            libjson-glib-1.0-0 \\\n            libjson-glib-dev \\\n            liblo7 \\\n            liblo-dev \\\n            libltc11 \\\n            libltc-dev  \\\n            libportmidi0 \\\n            libportmidi-dev \\\n            libpulse0 \\\n            libpulse-mainloop-glib0 \\\n            libpulse-dev \\\n            libsamplerate0 \\\n            libsamplerate0-dev \\\n            libsoup2.4-dev \\\n            libssl1.1 \\\n            libssl-dev \\\n            libtool \\\n            libvncclient1 \\\n            libvncserver1 \\\n            libvncserver-dev \\\n            libxcursor1 \\\n            libxcursor-dev \\\n            libxinerama1 \\\n            libxinerama-dev \\\n            libxrandr2 \\\n            libxrandr-dev \\\n            linux-libc-dev \\\n            mesa-utils \\\n            python3 \\\n            libpython3.7-stdlib \\\n            libpython3.7 \\\n            python3-dev \\\n            libc6-dev \\\n            uuid \\\n            uuid-dev \\\n            wah-plugins \\\n            xorg && rm -rf /var/lib/apt/lists/*;\n\nFROM dependencies AS build\nLABEL MAINTAINER=\"Metalab <metalab-dev@sat.qc.ca>\"\n\nARG BUILD_DIR=\"/opt/switcher\"\nARG BUILD_TYPE=\"Release\"\nARG ENABLE_GPL=\"ON\"\n\n# Set all CMakes environment variables\nARG C_COMPILER=\"gcc-8\"\nARG CXX_COMPILER=\"g++-8\"\n\n# Set switcher paths\nWORKDIR ${BUILD_DIR}\nCOPY . ${BUILD_DIR}\n\nRUN mkdir build \\\n    && cd build \\\n    && CC=\"${C_COMPILER}\" \\\n        CXX=\"${CXX_COMPILER}\" \\\n        cmake \\\n            -DENABLE_GPL=\"${ENABLE_GPL}\" \\\n            -DCMAKE_BUILD_TYPE=\"${BUILD_TYPE}\" .. \\\n    && make -j1 \\\n    && make install \\\n    && ldconfig\n\nFROM build AS clean\nLABEL MAINTAINER=\"Metalab <metalab-dev@sat.qc.ca>\"\n\nARG BUILD_DIR=\"/opt/switcher\"\n\n# Remove build folder and clean apt cache\nRUN rm -rf ${BUILD_DIR} \\\n    && apt remove -y -qq \\\n        build-essential \\\n        cmake \\\n        bison \\\n        flex \\\n        git \\\n        libcgsi-gsoap-dev \\\n        libcurl4-gnutls-dev \\\n        libgl1-mesa-dev \\\n        libglib2.0-dev \\\n        libgstreamer-plugins-base1.0-dev \\\n        libgstreamer-plugins-bad1.0-dev \\\n        libgstreamer1.0-dev \\\n        libjack-jackd2-dev \\\n        libjson-glib-dev \\\n        liblo-dev \\\n        libltc-dev  \\\n        libportmidi-dev \\\n        libpulse-dev \\\n        libsamplerate0-dev \\\n        libssl-dev \\\n        libsoup2.4-dev \\\n        libtool \\\n        libvncserver-dev \\\n        libxcursor-dev \\\n        libxinerama-dev \\\n        libxrandr-dev \\\n        linux-libc-dev \\\n        python3-dev \\\n        uuid-dev \\\n    && apt autoclean \\\n    && apt autoremove -y \\\n    && rm -rf /var/lib/{apt,dpkg,cache,log}/\n\n"
}