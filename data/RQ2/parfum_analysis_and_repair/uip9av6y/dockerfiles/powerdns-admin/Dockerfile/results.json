{
  "startTime": 1674219144258,
  "endTime": 1674219145323,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 42,
        "lineEnd": 42,
        "columnStart": 5,
        "columnEnd": 92
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM alpine:3.10\n\nARG FLAVOUR\n\nARG APP_VERSION=2018.03.28.1\nENV APP_VERSION=${APP_VERSION}\nENV APP_HOME=/app\nWORKDIR ${APP_HOME}\nRUN set -xe; \\\n  addgroup -S www-data \\\n  && adduser -S -D -H -h ${APP_HOME} -s /sbin/nologin -G www-data www-data \\\n  && case \"${FLAVOUR}\" in \\\n    odbc) build_deps='unixodbc-dev'; run_deps='unixodbc'; pip_deps='pyodbc' ;; \\\n    mssql) build_deps='freetds-dev cython2'; run_deps='freetds'; pip_deps='pymssql' ;; \\\n    mysql) build_deps='mariadb-dev'; run_deps='mariadb-connector-c'; pip_deps='mysqlclient' ;; \\\n    pgsql) build_deps='postgresql-dev'; run_deps='libpq'; pip_deps='psycopg2' ;; \\\n    sqlite3) build_deps=''; run_deps=''; pip_deps='noop' ;; \\\n    *) echo \"unsupported flavour ${FLAVOUR}\"; exit 1 ;; \\\n  esac \\\n  && apk add --no-cache \\\n    uwsgi-python \\\n    python2 \\\n    py2-pip \\\n    libressl \\\n    libldap \\\n    libxslt \\\n    xmlsec \\\n    uwsgi \\\n    curl \\\n    $run_deps \\\n  && apk add --no-cache --virtual .build-deps \\\n    build-base \\\n    python2-dev \\\n    libxml2-dev \\\n    xmlsec-dev \\\n    libffi-dev \\\n    openldap-dev \\\n    $build_deps \\\n  && mkdir -p \\\n    \"${APP_HOME}/migrations\" \\\n    \"${APP_HOME}/uploads/avatar\" \\\n    \"${APP_HOME}/saml\" \\\n  && curl -f -sSL \"https://github.com/thomasDOTde/PowerDNS-Admin/archive/${APP_VERSION}.tar.gz\" \\\n  | tar -xzf - --strip-components 1 \\\n  && find . -type f -iname '*.psd' -delete \\\n  && find . -type d -name examples -exec rm -rf {} + \\\n  && pip2 install \\\n    --no-cache-dir \\\n    -r requirements.txt \\\n  && pip2 install \\\n    --no-cache-dir \\\n    # missing in requirements.txt; fix not released yet\n    pytz \\\n    pyOpenSSL \\\n    $pip_deps \\\n  && chown -R www-data:www-data \\\n    \"${APP_HOME}\" \\\n  && apk del .build-deps\n\nEXPOSE 9191 9393\n\nCOPY create_db_user.py \\\n  ${APP_HOME}/\nCOPY bin/ \\\n  /usr/local/bin/\n\nVOLUME [ \\\n  \"${APP_HOME}/migrations\", \\\n  \"${APP_HOME}/uploads\", \\\n  \"${APP_HOME}/saml\" \\\n]\nHEALTHCHECK --interval=1m --timeout=3s --start-period=10s \\\n  CMD curl -sf http://127.0.0.1:9393 || exit 1\nENTRYPOINT [\"/usr/local/bin/docker-entrypoint.sh\"]\nCMD [ \"uwsgi\", \"--master\", \"--processes=4\", \"--threads=2\" ]\n\n\nARG BUILD_DATE=\"1970-01-01T00:00:00Z\"\nARG REVISION=\"0\"\nARG VCS_URL=\"http://localhost/\"\nARG VCS_REF=\"master\"\nLABEL org.opencontainers.image.created=$BUILD_DATE \\\n    org.opencontainers.image.title=\"PowerDNS Admin\" \\\n    org.opencontainers.image.description=\"PowerDNS Web-GUI\" \\\n    org.opencontainers.image.url=\"https://github.com/thomasDOTde/PowerDNS-Admin\" \\\n    org.opencontainers.image.source=$VCS_URL \\\n    org.opencontainers.image.revision=$VCS_REF \\\n    org.opencontainers.image.vendor=\"Khanh Ngo\" \\\n    org.opencontainers.image.version=\"${APP_VERSION}-${REVISION}\" \\\n    com.microscaling.docker.dockerfile=\"/powerdns-admin/Dockerfile\" \\\n    org.opencontainers.image.licenses=\"MIT\"\n"
}