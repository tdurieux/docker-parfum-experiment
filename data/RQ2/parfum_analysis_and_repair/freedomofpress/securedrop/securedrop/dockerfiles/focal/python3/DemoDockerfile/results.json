{
  "startTime": 1674219608889,
  "endTime": 1674219609874,
  "originalSmells": [
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 4,
        "lineEnd": 4,
        "columnStart": 4,
        "columnEnd": 71
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 5,
        "lineEnd": 10,
        "columnStart": 4,
        "columnEnd": 82
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 4,
        "lineEnd": 4,
        "columnStart": 4,
        "columnEnd": 71
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 5,
        "lineEnd": 10,
        "columnStart": 4,
        "columnEnd": 82
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "# ubuntu 20.04 image from 2021-09-21\nFROM ubuntu@sha256:3555f4996aea6be945ae1532fa377c88f4b3b9e6d93531f47af5d78a7d5e3761\n\nRUN apt-get update && \\\n    DEBIAN_FRONTEND=noninteractive TZ=Etc/UTC apt-get --no-install-recommends -y install tzdata && \\\n    apt-get install --no-install-recommends -y paxctl apache2-dev coreutils \\\n                       python3-pip python3-all python3-venv virtualenv libpython3.8-dev libssl-dev \\\n                       gnupg2 ruby redis-server git \\\n                       enchant libffi-dev sqlite3 gettext sudo \\\n                       libasound2 libdbus-glib-1-2 libgtk2.0-0 libfontconfig1 libxrender1 \\\n                       libcairo-gobject2 libgtk-3-0 libstartup-notification0 basez && rm -rf /var/lib/apt/lists/*;\n\nRUN gem install sass -v 3.4.23\n\nCOPY . /opt/securedrop\nRUN python3 -m venv /opt/venvs/securedrop-app-code && \\\n    /opt/venvs/securedrop-app-code/bin/pip3 install --no-deps --require-hashes -r /opt/securedrop/securedrop/requirements/python3/docker-requirements.txt && \\\n    /opt/venvs/securedrop-app-code/bin/pip3 install --no-deps --require-hashes -r /opt/securedrop/securedrop/requirements/python3/securedrop-app-code-requirements.txt\n\nRUN sed -i 's/\"localhost\"\\];/\"localhost\", \"demo-source.securedrop.org\"];/' /opt/securedrop/securedrop/static/js/source.js\n\nRUN useradd --no-create-home --home-dir /tmp --uid 1000 demo && echo \"demo ALL=(ALL) NOPASSWD:ALL\" >> /etc/sudoers && \\\n    chown -R demo:demo /opt/securedrop /opt/venvs/securedrop-app-code\n\nSTOPSIGNAL SIGKILL\n\nEXPOSE 8080 8081\n\nENV REPOROOT=/opt/securedrop\n\nUSER demo\nWORKDIR /opt/securedrop/securedrop\nENTRYPOINT [ \"/opt/securedrop/securedrop/bin/run\" ]\n"
}