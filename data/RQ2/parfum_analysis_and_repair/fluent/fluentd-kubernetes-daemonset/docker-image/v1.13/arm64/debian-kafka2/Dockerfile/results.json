{
  "startTime": 1674250654946,
  "endTime": 1674250655753,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 8,
        "lineEnd": 8,
        "columnStart": 4,
        "columnEnd": 146
      }
    },
    {
      "rule": "sha256sumEchoOneSpaces",
      "position": {
        "lineStart": 8,
        "lineEnd": 8,
        "columnStart": 150,
        "columnEnd": 228
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 8,
        "lineEnd": 8,
        "columnStart": 231,
        "columnEnd": 276
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "# AUTOMATICALLY GENERATED\n# DO NOT EDIT THIS FILE DIRECTLY, USE /templates/Dockerfile.erb\n\n# For multiarch build on Docker hub automated build.\nFROM golang:alpine AS builder\nWORKDIR /go\nENV QEMU_DOWNLOAD_SHA256 a1ef52971537e11915565233f48aa179839f676008d7911c05b3ae94c08c4f5c\nRUN apk add curl --no-cache\nRUN curl -f -sL -o qemu-3.0.0+resin-aarch64.tar.gz https://github.com/balena-io/qemu/releases/download/v3.0.0%2Bresin/qemu-3.0.0+resin-aarch64.tar.gz && echo \"$QEMU_DOWNLOAD_SHA256  *qemu-3.0.0+resin-aarch64.tar.gz\" | sha256sum -c - | tar zxvf qemu-3.0.0+resin-aarch64.tar.gz -C . && mv qemu-3.0.0+resin-aarch64/qemu-aarch64-static . && rm qemu-3.0.0+resin-aarch64.tar.gz\n\nFROM fluent/fluentd:v1.13.3-debian-arm64-1.0\nCOPY --from=builder /go/qemu-aarch64-static /usr/bin/\n\nLABEL maintainer=\"Eduardo Silva <eduardo@treasure-data.com>\"\nUSER root\nWORKDIR /home/fluent\nENV PATH /fluentd/vendor/bundle/ruby/2.6.0/bin:$PATH\nENV GEM_PATH /fluentd/vendor/bundle/ruby/2.6.0\nENV GEM_HOME /fluentd/vendor/bundle/ruby/2.6.0\n# skip runtime bundler installation\nENV FLUENTD_DISABLE_BUNDLER_INJECTION 1\n\nCOPY Gemfile* /fluentd/\nRUN buildDeps=\"sudo make gcc g++ libc-dev libffi-dev build-essential autoconf automake libtool pkg-config\" \\\n  runtimeDeps=\"krb5-kdc libsasl2-modules-gssapi-mit libsasl2-dev\" \\\n      && export DEBIAN_FRONTEND=noninteractive  && apt-get update \\\n     && apt-get upgrade -y \\\n     && apt-get install \\\n     -y --no-install-recommends \\\n     $buildDeps $runtimeDeps net-tools \\\n    && gem install bundler --version 2.2.24 \\\n    && bundle config silence_root_warning true \\\n    && bundle install --gemfile=/fluentd/Gemfile --path=/fluentd/vendor/bundle \\\n    && SUDO_FORCE_REMOVE=yes \\\n    apt-get purge -y --auto-remove \\\n                  -o APT::AutoRemove::RecommendsImportant=false \\\n                  $buildDeps \\\n && rm -rf /var/lib/apt/lists/* \\\n    && gem sources --clear-all \\\n    && rm -rf /tmp/* /var/tmp/* /usr/lib/ruby/gems/*/cache/*.gem \\\n    && ldd $(gem contents rdkafka | grep librdkafka.so) | grep libsasl2.so.2\n\n# Copy configuration files\nCOPY ./conf/fluent.conf /fluentd/etc/\nCOPY ./conf/systemd.conf /fluentd/etc/\nCOPY ./conf/kubernetes.conf /fluentd/etc/\nCOPY ./conf/prometheus.conf /fluentd/etc/\nCOPY ./conf/tail_container_parse.conf /fluentd/etc/\nCOPY ./conf/kubernetes/*.conf /fluentd/etc/kubernetes/\nRUN touch /fluentd/etc/disable.conf\n\n# Copy plugins\nCOPY plugins /fluentd/plugins/\nCOPY entrypoint.sh /fluentd/entrypoint.sh\n\n# Environment variables\nENV FLUENTD_OPT=\"\"\nENV FLUENTD_CONF=\"fluent.conf\"\n\n# Overwrite ENTRYPOINT to run fluentd as root for /var/log / /var/lib\nENTRYPOINT [\"tini\", \"--\", \"/fluentd/entrypoint.sh\"]\n"
}