{
  "startTime": 1674253545297,
  "endTime": 1674253546287,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 117,
        "lineEnd": 117,
        "columnStart": 4,
        "columnEnd": 97
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 31,
        "lineEnd": 31,
        "columnStart": 4,
        "columnEnd": 34
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 34,
        "lineEnd": 34,
        "columnStart": 4,
        "columnEnd": 23
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 37,
        "lineEnd": 37,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 95,
        "lineEnd": 95,
        "columnStart": 4,
        "columnEnd": 31
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 98,
        "lineEnd": 98,
        "columnStart": 4,
        "columnEnd": 21
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 101,
        "lineEnd": 101,
        "columnStart": 4,
        "columnEnd": 35
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 118,
        "lineEnd": 118,
        "columnStart": 4,
        "columnEnd": 47
      }
    },
    {
      "rule": "gpgUseBatchFlag",
      "position": {
        "lineStart": 105,
        "lineEnd": 105,
        "columnStart": 4,
        "columnEnd": 68
      }
    },
    {
      "rule": "gpgUseBatchFlag",
      "position": {
        "lineStart": 106,
        "lineEnd": 106,
        "columnStart": 4,
        "columnEnd": 36
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 17,
        "lineEnd": 28,
        "columnStart": 4,
        "columnEnd": 13
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 40,
        "lineEnd": 51,
        "columnStart": 4,
        "columnEnd": 10
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 92,
        "lineEnd": 93,
        "columnStart": 4,
        "columnEnd": 63
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 107,
        "lineEnd": 107,
        "columnStart": 22,
        "columnEnd": 58
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 113,
        "lineEnd": 113,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 116,
        "lineEnd": 116,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 122,
        "lineEnd": 122,
        "columnStart": 4,
        "columnEnd": 35
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 17,
        "lineEnd": 28,
        "columnStart": 4,
        "columnEnd": 13
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 40,
        "lineEnd": 51,
        "columnStart": 4,
        "columnEnd": 10
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 92,
        "lineEnd": 93,
        "columnStart": 4,
        "columnEnd": 63
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 113,
        "lineEnd": 113,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 116,
        "lineEnd": 116,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 122,
        "lineEnd": 122,
        "columnStart": 4,
        "columnEnd": 35
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 17,
        "lineEnd": 28,
        "columnStart": 4,
        "columnEnd": 13
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 40,
        "lineEnd": 51,
        "columnStart": 4,
        "columnEnd": 10
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 92,
        "lineEnd": 93,
        "columnStart": 4,
        "columnEnd": 63
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 107,
        "lineEnd": 107,
        "columnStart": 22,
        "columnEnd": 58
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 113,
        "lineEnd": 113,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 116,
        "lineEnd": 116,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 122,
        "lineEnd": 122,
        "columnStart": 4,
        "columnEnd": 35
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 16,
        "lineEnd": 27,
        "columnStart": 4,
        "columnEnd": 13
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 39,
        "lineEnd": 50,
        "columnStart": 4,
        "columnEnd": 10
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 91,
        "lineEnd": 92,
        "columnStart": 4,
        "columnEnd": 63
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 112,
        "lineEnd": 112,
        "columnStart": 4,
        "columnEnd": 51
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 115,
        "lineEnd": 115,
        "columnStart": 4,
        "columnEnd": 51
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 121,
        "lineEnd": 121,
        "columnStart": 4,
        "columnEnd": 59
      }
    }
  ],
  "repairedDockerfile": "########################################################\n# Dockerfile for automated build of latest SONAR code  #\n#                                                      #\n# Please see https://github.com/scharch/SONAR for more #\n#  information.                                        #\n########################################################\n\nFROM ubuntu:bionic\nMAINTAINER Chaim Schramm chaim.schramm@nih.gov\n\nENV DEBIAN_FRONTEND=noninteractive\n\nWORKDIR /\n\n#install Python\nRUN apt-get update\nRUN apt-get install --no-install-recommends -y \\\n  build-essential \\\n  zlib1g-dev \\\n  libncurses5-dev \\\n  libgdbm-dev \\\n  libnss3-dev \\\n  libssl-dev \\\n  libreadline-dev \\\n  libffi-dev \\\n  wget \\\n  python3 \\\n  python3-pip && rm -rf /var/lib/apt/lists/*;\n\n#get biopython\nRUN pip3 install --no-cache-dir \"biopython==1.73\"\n\n#add docopt\nRUN pip3 install --no-cache-dir docopt\n\n#add fuzzywuzzy for master script\nRUN pip3 install --no-cache-dir fuzzywuzzy\n\n#install libraries for bioperl\nRUN apt-get install --no-install-recommends -y \\\n  gcc-multilib \\\n  perl \\\n  cpanminus \\\n  liblwp-protocol-https-perl \\\n  libnet-https-any-perl \\\n  libdb-dev \\\n  graphviz \\\n  make \\\n  libexpat1-dev \\\n  libatlas-base-dev \\\n  gfortran && rm -rf /var/lib/apt/lists/*;\n\n#install perl modules that are prerequisites\nRUN cpanm \\\n  CPAN::Meta \\\n  YAML \\\n  Digest::SHA \\\n  Module::Build \\\n  Test::Most \\\n  Test::Weaken \\\n  Test::Memory::Cycle \\\n  Clone \\\n  HTML::TableExtract \\\n  Algorithm::Munkres \\\n  Algorithm::Combinatorics \\\n  Statistics::Basic \\\n  List::Util \\\n  PDL::LinearAlgebra::Trans \\\n  Array::Compare \\\n  Convert::Binary::C \\\n  Error \\\n  Graph@0.9711 \\\n  GraphViz \\\n  Inline::C \\\n  PostScript::TextBlock \\\n  Set::Scalar \\\n  Sort::Naturally \\\n  Math::Random \\\n  Spreadsheet::ParseExcel \\\n  IO::String \\\n  JSON \\\n  Data::Stag \\\n  CGI \\\n  Bio::Phylo \\\n  Switch\n\n#now actually install BioPerl\nRUN cpanm -v \\\n    https://github.com/bioperl/bioperl-live/archive/release-1-7-2.tar.gz\n\n#install PyQt and ete3\nRUN apt-get install --no-install-recommends -y \\\n    python3-pyqt4 python3-pyqt4.qtopengl python-lxml python-six && rm -rf /var/lib/apt/lists/*;\n\nRUN pip3 install --no-cache-dir --upgrade ete3\n\n#install AIRR reference library\nRUN pip3 install --no-cache-dir airr\n\n#install Levensthein\nRUN pip3 install --no-cache-dir python-Levenshtein\n\n#install R\nRUN echo \"deb http://cloud.r-project.org/bin/linux/ubuntu bionic-cran35/\" >> /etc/apt/sources.list\nRUN gpg --batch --keyserver keyserver.ubuntu.com --recv-key 51716619E084DAB9\nRUN gpg --batch -a --export 51716619E084DAB9 | apt-key add -\nRUN apt-get update && apt-get install --no-install-recommends -y r-base r-base-dev && rm -rf /var/lib/apt/lists/*;\n\n#install R packages\nRUN R --vanilla -e 'install.packages(c(\"docopt\",\"MASS\",\"ggplot2\",\"ptinpoly\"), repos=\"http://cran.r-project.org/\")'\n\n#install Xvfb for 4.4\nRUN apt-get install --no-install-recommends -y xvfb && rm -rf /var/lib/apt/lists/*;\n\n#get fastq-dump for vignette\nRUN apt-get install --no-install-recommends -y curl && rm -rf /var/lib/apt/lists/*;\nRUN curl -f -O https://ftp-trace.ncbi.nlm.nih.gov/sra/sdk/2.9.6-1/sratoolkit.2.9.6-1-ubuntu64.tar.gz\nRUN tar -xzf sratoolkit.2.9.6-1-ubuntu64.tar.gz && rm sratoolkit.2.9.6-1-ubuntu64.tar.gz\nRUN ln -s /sratoolkit.2.9.6-1-ubuntu64/bin/fastq-dump /usr/bin/fastq-dump\n\n#pull latest SONAR source code and set it up\nRUN apt-get install --no-install-recommends -y git libidn11 && rm -rf /var/lib/apt/lists/*;\nRUN git clone https://github.com/scharch/SONAR.git\nWORKDIR SONAR\nRUN echo | ./setup.py\nRUN cp sonar /usr/bin\n\nWORKDIR /\n"
}