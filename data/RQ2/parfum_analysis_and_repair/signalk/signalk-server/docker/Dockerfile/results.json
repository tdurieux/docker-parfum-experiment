{
  "startTime": 1674250768429,
  "endTime": 1674250769843,
  "originalSmells": [
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 5,
        "lineEnd": 5,
        "columnStart": 53,
        "columnEnd": 253
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 9,
        "lineEnd": 9,
        "columnStart": 5,
        "columnEnd": 61
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 9,
        "lineEnd": 9,
        "columnStart": 5,
        "columnEnd": 61
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 5,
        "lineEnd": 5,
        "columnStart": 53,
        "columnEnd": 253
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 9,
        "lineEnd": 9,
        "columnStart": 5,
        "columnEnd": 61
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 9,
        "lineEnd": 9,
        "columnStart": 5,
        "columnEnd": 85
      }
    }
  ],
  "repairedDockerfile": "FROM ubuntu:20.04\n\nRUN groupadd --gid 1000 node \\\n  && useradd --uid 1000 --gid node --shell /bin/bash --create-home node\n\nRUN DEBIAN_FRONTEND=noninteractive apt-get update && DEBIAN_FRONTEND=noninteractive apt-get --no-install-recommends -y install git python3 python build-essential avahi-daemon avahi-discover avahi-utils libnss-mdns mdns-scan libavahi-compat-libdnssd-dev sysstat procps nano curl \\\n  && groupadd -r docker -g 998 && groupadd -r i2c -g 997 && groupadd -r spi -g 999 && usermod -a -G dialout,i2c,spi,netdev,docker node && rm -rf /var/lib/apt/lists/*;\n\nRUN curl -fsSL https://deb.nodesource.com/setup_16.x | bash - \\\n  && DEBIAN_FRONTEND=noninteractive apt-get --no-install-recommends -y install nodejs && rm -rf /var/lib/apt/lists/*;\n\nCOPY docker/avahi/avahi-dbus.conf /etc/dbus-1/system.d/avahi-dbus.conf\nRUN mkdir -p /var/run/dbus/ \\\n  && chmod -R 777 /var/run/dbus/ \\\n  && mkdir -p /var/run/avahi-daemon/ \\\n  && chmod -R 777 /var/run/avahi-daemon/ \\\n  && chown -R avahi:avahi /var/run/avahi-daemon/\n\nUSER node\nRUN mkdir -p /home/node/.signalk/ \\\n  && mkdir -p /home/node/signalk/\n\nWORKDIR /home/node/signalk\nCOPY --chown=node . .\nCOPY --chown=node docker/startup.sh startup.sh\nRUN chmod +x startup.sh\n\nRUN npm install --package-lock-only \\\n  && npm ci && npm cache clean --force \\\n  && npm run build:all\n\nEXPOSE 3000\nENV IS_IN_DOCKER true\nWORKDIR /home/node/.signalk\nENTRYPOINT /home/node/signalk/startup.sh\n"
}