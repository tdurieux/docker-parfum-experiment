{
  "startTime": 1674248545460,
  "endTime": 1674248546440,
  "originalSmells": [
    {
      "rule": "rmRecursiveAfterMktempD",
      "position": {
        "lineStart": 36,
        "lineEnd": 36,
        "columnStart": 24,
        "columnEnd": 33
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM golang:1.16-bullseye\n\nSHELL [\"bash\", \"-Eeuo\", \"pipefail\", \"-xc\"]\n\nRUN apt-get update; \\\n\tapt-get install -y --no-install-recommends \\\n\t\tfile \\\n\t\tgnupg dirmngr \\\n\t\twget \\\n\t; \\\n\trm -rf /var/lib/apt/lists/*\n\nWORKDIR /usr/src/bashbrew\nENV CGO_ENABLED 0\n\nENV BASHBREW_ARCHES \\\n\t\tamd64 \\\n\t\tarm32v5 \\\n\t\tarm32v6 \\\n\t\tarm32v7 \\\n\t\tarm64v8 \\\n\t\tdarwin-amd64 \\\n\t\ti386 \\\n\t\tmips64le \\\n\t\tppc64le \\\n\t\triscv64 \\\n\t\ts390x \\\n\t\twindows-amd64\n\nCOPY scripts/bashbrew-arch-to-goenv.sh /usr/local/bin/\n\n# https://github.com/estesp/manifest-tool/releases\nENV MANIFEST_TOOL_VERSION 1.0.2\n# gpg: key 0F386284C03A1162: public key \"Philip Estes <estesp@gmail.com>\" imported\nENV MANIFEST_TOOL_GPG_KEY 27F3EA268A97867EAF0BD05C0F386284C03A1162\n\nRUN export GNUPGHOME=\"$(mktemp -d)\"; rm -rf -d \\\n\tgpg --batch --keyserver keyserver.ubuntu.com --recv-keys \"$MANIFEST_TOOL_GPG_KEY\"; \\\n\n\tmkdir -p bin; \\\n\n\tfor bashbrewArch in $BASHBREW_ARCHES; do \\\n# TODO convince estesp to release riscv64 binaries (https://github.com/estesp/manifest-tool/pull/113 ðŸ‘€)\n\t\tif [ \"$bashbrewArch\" = 'riscv64' ]; then continue; fi; \\\n\t\t( \\\n\t\t\tgoEnv=\"$(bashbrew-arch-to-goenv.sh \"$bashbrewArch\")\"; eval \"$goEnv\"; \\\n\t\t\tsrcBin=\"manifest-tool-$GOOS-$GOARCH\"; \\\n\t\t\tif [ \"$GOARCH\" = 'arm' ]; then [ -n \"$GOARM\" ]; srcBin=\"${srcBin}v$GOARM\"; fi; \\\n\t\t\t[ \"$GOOS\" = 'windows' ] && ext='.exe' || ext=; \\\n\t\t\tsrcBin=\"$srcBin$ext\"; \\\n\t\t\ttargetBin=\"bin/manifest-tool-$bashbrewArch$ext\"; \\\n\t\t\twget -O \"$targetBin.asc\" \"https://github.com/estesp/manifest-tool/releases/download/v${MANIFEST_TOOL_VERSION}/$srcBin.asc\"; \\\n\t\t\twget -O \"$targetBin\" \"https://github.com/estesp/manifest-tool/releases/download/v${MANIFEST_TOOL_VERSION}/$srcBin\" --progress=dot:giga; \\\n\t\t\tgpg --batch --verify \"$targetBin.asc\" \"$targetBin\"; \\\n\t\t\tls -lAFh \"$targetBin\"*; \\\n\t\t\tfile \"$targetBin\"*; \\\n\t\t) \\\n\tdone; \\\n\n\tgpgconf --kill all; \\\n\trm -r \"$GNUPGHOME\"; \\\n\n\tls -lAFh bin/manifest-tool-*; \\\n\tfile bin/manifest-tool-*\n\nCOPY go.mod go.sum ./\nRUN go mod download; go mod verify\n\nCOPY . .\n\nRUN for bashbrewArch in $BASHBREW_ARCHES; do \\\n\t\t( \\\n\t\t\tgoEnv=\"$(bashbrew-arch-to-goenv.sh \"$bashbrewArch\")\"; eval \"$goEnv\"; \\\n\t\t\t[ \"$GOOS\" = 'windows' ] && ext='.exe' || ext=; \\\n\t\t\t\\\n\t\t\tLDFLAGS='-s -w'; \\\n\t\t\tcase \"$GOOS\" in \\\n\t\t\t\tdarwin | windows) ;; \\\n\t\t\t\t*) LDFLAGS+=' -d' ;; \\\n\t\t\tesac; \\\n\t\t\t\\\n\t\t\ttargetBin=\"bin/bashbrew-$bashbrewArch$ext\"; \\\n\t\t\tgo build \\\n\t\t\t\t-v -ldflags \"$LDFLAGS\" \\\n\t\t\t\t-tags netgo -installsuffix netgo \\\n\t\t\t\t-o \"$targetBin\" \\\n\t\t\t\t./cmd/bashbrew \\\n\t\t\t; \\\n\t\t\tls -lAFh \"$targetBin\"; \\\n\t\t\tfile \"$targetBin\"; \\\n\t\t) \\\n\tdone; \\\n\t\\\n\tls -lAFh bin/bashbrew-*; \\\n\tfile bin/bashbrew-*\n"
}