{
  "startTime": 1674252348601,
  "endTime": 1674252349345,
  "originalSmells": [
    {
      "rule": "sha256sumEchoOneSpaces",
      "position": {
        "lineStart": 44,
        "lineEnd": 44,
        "columnStart": 1,
        "columnEnd": 55
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "#\n# NOTE: THIS DOCKERFILE IS GENERATED VIA \"apply-templates.sh\"\n#\n# PLEASE DO NOT EDIT IT DIRECTLY.\n#\n\nFROM debian:bullseye-slim\n\n# roughly, https://salsa.debian.org/haproxy-team/haproxy/-/blob/732b97ae286906dea19ab5744cf9cf97c364ac1d/debian/haproxy.postinst#L5-6\nRUN set -eux; \\\n\tgroupadd --gid 99 --system haproxy; \\\n\tuseradd \\\n\t\t--gid haproxy \\\n\t\t--home-dir /var/lib/haproxy \\\n\t\t--no-create-home \\\n\t\t--system \\\n\t\t--uid 99 \\\n\t\thaproxy \\\n\t; \\\n\tmkdir /var/lib/haproxy; \\\n\tchown haproxy:haproxy /var/lib/haproxy\n\nENV HAPROXY_VERSION 2.2.24\nENV HAPROXY_URL https://www.haproxy.org/download/2.2/src/haproxy-2.2.24.tar.gz\nENV HAPROXY_SHA256 0e807310dce3a5293d2454d9c1b71eb8d16472305b66f076b384b50858b1e7f9\n\n# see https://sources.debian.net/src/haproxy/jessie/debian/rules/ for some helpful navigation of the possible \"make\" arguments\nRUN set -eux; \\\n\n\tsavedAptMark=\"$(apt-mark showmanual)\"; \\\n\tapt-get update && apt-get install -y --no-install-recommends \\\n\t\tca-certificates \\\n\t\tgcc \\\n\t\tlibc6-dev \\\n\t\tliblua5.3-dev \\\n\t\tlibpcre2-dev \\\n\t\tlibssl-dev \\\n\t\tmake \\\n\t\twget \\\n\t\tzlib1g-dev \\\n\t; \\\n\trm -rf /var/lib/apt/lists/*; \\\n\n\twget -O haproxy.tar.gz \"$HAPROXY_URL\"; \\\n\techo \"$HAPROXY_SHA256  *haproxy.tar.gz\" | sha256sum -c; \\\n\tmkdir -p /usr/src/haproxy; \\\n\ttar -xzf haproxy.tar.gz -C /usr/src/haproxy --strip-components=1; \\\n\trm haproxy.tar.gz; \\\n\n\tmakeOpts=' \\\n\t\tTARGET=linux-glibc \\\n\t\tUSE_GETADDRINFO=1 \\\n\t\tUSE_LUA=1 LUA_INC=/usr/include/lua5.3 \\\n\t\tUSE_OPENSSL=1 \\\n\t\tUSE_PCRE2=1 USE_PCRE2_JIT=1 \\\n\t\tUSE_ZLIB=1 \\\n\t\t\\\n\t\tEXTRA_OBJS=\" \\\n# see https://github.com/docker-library/haproxy/issues/94#issuecomment-505673353 for more details about prometheus support\n\t\t\tcontrib/prometheus-exporter/service-prometheus.o \\\n\t\t\" \\\n\t'; \\\n# https://salsa.debian.org/haproxy-team/haproxy/-/commit/53988af3d006ebcbf2c941e34121859fd6379c70\n\tdpkgArch=\"$(dpkg --print-architecture)\"; \\\n\tcase \"$dpkgArch\" in \\\n\t\tarmel) makeOpts=\"$makeOpts ADDLIB=-latomic\" ;; \\\n\tesac; \\\n\n\tnproc=\"$(nproc)\"; \\\n\teval \"make -C /usr/src/haproxy -j '$nproc' all $makeOpts\"; \\\n\teval \"make -C /usr/src/haproxy install-bin $makeOpts\"; \\\n\n\tmkdir -p /usr/local/etc/haproxy; \\\n\tcp -R /usr/src/haproxy/examples/errorfiles /usr/local/etc/haproxy/errors; \\\n\trm -rf /usr/src/haproxy; \\\n\n\tapt-mark auto '.*' > /dev/null; \\\n\t[ -z \"$savedAptMark\" ] || apt-mark manual $savedAptMark; \\\n\tfind /usr/local -type f -executable -exec ldd '{}' ';' \\\n\t\t| awk '/=>/ { print $(NF-1) }' \\\n\t\t| sort -u \\\n\t\t| xargs -r dpkg-query --search \\\n\t\t| cut -d: -f1 \\\n\t\t| sort -u \\\n\t\t| xargs -r apt-mark manual \\\n\t; \\\n\tapt-get purge -y --auto-remove -o APT::AutoRemove::RecommendsImportant=false; \\\n\n# smoke test\n\thaproxy -v\n\n# https://www.haproxy.org/download/1.8/doc/management.txt\n# \"4. Stopping and restarting HAProxy\"\n# \"when the SIGTERM signal is sent to the haproxy process, it immediately quits and all established connections are closed\"\n# \"graceful stop is triggered when the SIGUSR1 signal is sent to the haproxy process\"\nSTOPSIGNAL SIGUSR1\n\nCOPY docker-entrypoint.sh /usr/local/bin/\nRUN ln -s usr/local/bin/docker-entrypoint.sh / # backwards compat\nENTRYPOINT [\"docker-entrypoint.sh\"]\n\n# no USER for backwards compatibility (to try to avoid breaking existing users)\nCMD [\"haproxy\", \"-f\", \"/usr/local/etc/haproxy/haproxy.cfg\"]\n"
}