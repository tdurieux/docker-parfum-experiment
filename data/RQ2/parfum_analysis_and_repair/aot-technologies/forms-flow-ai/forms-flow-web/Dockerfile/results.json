{
  "startTime": 1674250543608,
  "endTime": 1674250544068,
  "originalSmells": [
    {
      "rule": "npmCacheCleanAfterInstall",
      "position": {
        "lineStart": 62,
        "lineEnd": 62,
        "columnStart": 4,
        "columnEnd": 42
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "# base image\nFROM node:14.17.0-alpine as build-stage\n\n# set working directory\nWORKDIR /forms-flow-web/app\n\nARG NODE_ENV\nARG REACT_APP_CLIENT_ROLE\nARG REACT_APP_STAFF_REVIEWER_ROLE\nARG REACT_APP_STAFF_DESIGNER_ROLE\nARG REACT_APP_CLIENT_ID\nARG REACT_APP_STAFF_REVIEWER_ID\nARG REACT_APP_STAFF_DESIGNER_ID\nARG REACT_APP_USER_RESOURCE_FORM_ID\nARG REACT_APP_API_SERVER_URL\nARG REACT_APP_API_PROJECT_URL\nARG REACT_APP_KEYCLOAK_CLIENT\nARG REACT_APP_ANONYMOUS_ID\nARG REACT_APP_WEB_BASE_URL\nARG REACT_APP_CAMUNDA_API_URI\nARG REACT_APP_WEBSOCKET_ENCRYPT_KEY\nARG REACT_APP_KEYCLOAK_URL_REALM\nARG REACT_APP_KEYCLOAK_URL\nARG REACT_APP_APPLICATION_NAME\nARG REACT_APP_USER_ACCESS_PERMISSIONS\nARG REACT_APP_WEB_BASE_CUSTOM_URL\nARG REACT_APP_FORMIO_JWT_SECRET\n\nENV NODE_ENV ${NODE_ENV}\nENV REACT_APP_CLIENT_ROLE ${REACT_APP_CLIENT_ROLE}\nENV REACT_APP_STAFF_REVIEWER_ROLE ${REACT_APP_STAFF_REVIEWER_ROLE}\nENV REACT_APP_STAFF_DESIGNER_ROLE ${REACT_APP_STAFF_DESIGNER_ROLE}\nENV REACT_APP_CLIENT_ID ${REACT_APP_CLIENT_ID}\nENV REACT_APP_STAFF_REVIEWER_ID ${REACT_APP_STAFF_REVIEWER_ID}\nENV REACT_APP_STAFF_DESIGNER_ID ${REACT_APP_STAFF_DESIGNER_ID}\nENV REACT_APP_USER_RESOURCE_FORM_ID ${REACT_APP_USER_RESOURCE_FORM_ID}\nENV REACT_APP_API_SERVER_URL ${REACT_APP_API_SERVER_URL}\nENV REACT_APP_API_PROJECT_URL ${REACT_APP_API_PROJECT_URL}\nENV REACT_APP_KEYCLOAK_CLIENT ${REACT_APP_KEYCLOAK_CLIENT}\nENV REACT_APP_ANONYMOUS_ID ${REACT_APP_ANONYMOUS_ID}\nENV REACT_APP_WEB_BASE_URL ${REACT_APP_WEB_BASE_URL}\nENV REACT_APP_CAMUNDA_API_URI ${REACT_APP_CAMUNDA_API_URI}\nENV REACT_APP_WEBSOCKET_ENCRYPT_KEY ${REACT_APP_WEBSOCKET_ENCRYPT_KEY}\nENV REACT_APP_KEYCLOAK_URL_REALM ${REACT_APP_KEYCLOAK_URL_REALM}\nENV REACT_APP_KEYCLOAK_URL ${REACT_APP_KEYCLOAK_URL}\nENV REACT_APP_APPLICATION_NAME ${REACT_APP_APPLICATION_NAME}\nENV REACT_APP_USER_ACCESS_PERMISSIONS ${REACT_APP_USER_ACCESS_PERMISSIONS}\nENV REACT_APP_WEB_BASE_CUSTOM_URL ${REACT_APP_WEB_BASE_CUSTOM_URL}\nENV REACT_APP_FORMIO_JWT_SECRET ${REACT_APP_FORMIO_JWT_SECRET}\n# add `/app/node_modules/.bin` to $PATH\nENV PATH /forms-flow-web/app/node_modules/.bin:$PATH\n\nRUN apk update && apk upgrade && \\\n    apk add --no-cache bash git openssh\n\n# install and cache app dependencies\n\nCOPY package-lock.json /forms-flow-web/app/package-lock.json\nCOPY package.json /forms-flow-web/app/package.json\nCOPY forms-flow-util/package.json /forms-flow-web/app/forms-flow-util/package.json\nCOPY forms-flow-util/package-lock.json /forms-flow-web/app/forms-flow-util/package-lock.json\n\nRUN npm install --unsafe-perm --production && npm cache clean --force;\n#RUN npm install react-scripts@3.0.1 -g --silent\nCOPY . /forms-flow-web/app/\nRUN npm run build\n\nFROM nginx:1.17 as production-stage\nRUN mkdir /app\nCOPY --from=build-stage /forms-flow-web/app/build /usr/share/nginx/html\nCOPY nginx.conf /etc/nginx/nginx.conf\nEXPOSE 8080:8080\nCMD [\"nginx\", \"-g\", \"daemon off;\"]\n"
}