{
  "startTime": 1674250308277,
  "endTime": 1674250309364,
  "originalSmells": [
    {
      "rule": "wgetUseHttpsUrl",
      "position": {
        "lineStart": 58,
        "lineEnd": 58,
        "columnStart": 4,
        "columnEnd": 99
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "# A minimal linux environment for bazel-built python binaries.\nFROM python:3.7-slim\nLABEL maintainer=\"Chris Cummins <chrisc.101@gmail.com>\"\n\n# Put Python into /bin, needed by bazel py_binary script entrypoints.\nRUN ln -s /usr/local/bin/python /usr/bin/python \\\n  && ln -s /usr/local/bin/python /usr/bin/python3\n\n# Install a few necessary bits and pieces:\nRUN apt-get update && apt-get install -y --no-install-recommends \\\n    # A standard compiler toolchain which is needed for cldrive harnesses,\n    # since the current clang compilation is not yet entirely hemetic and\n    # relies on system linker and C headers:\n    binutils \\\n    libgcc-7-dev \\\n    libc6-dev \\\n    # Providing libreadline.so which is needed by //third_party/oclgrind:\n    libreadline6-dev \\\n    # Needed by tar to unpack .tar.bz2 files, which CLgen uses to encode corpus\n    # archives:\n    lbzip2 \\\n    # Needed by //third_party/py/git, and my own tools:\n    git \\\n    # Needed by a handful of targets, e.g. //system/machines:\n    rsync \\\n    # Required by //third_party/py/libxmp:\n    libexempi-dev \\\n    # Needed by //system/machines:\n    iputils-ping \\\n    # Needed because pip built //third_party/py/numpy is broken:\n    python3-numpy \\\n    # Needed by //third_party/py/mysql:\n    python3-dev \\\n    build-essential \\\n    default-libmysqlclient-dev \\\n    mysql-common \\\n    wget \\\n    # Tidy up:\n    && rm -rf /var/lib/apt/lists/*\n\n###############################################################################\n# !!!DANGER ZONE!!! This section contains dirty hacks to workaround awkward\n# dependencies with //third_party/py packages. Here be dragons!\n#                __        _\n#              _/  \\    _(\\(o\n#             /     \\  /  _  ^^^o\n#            /   !   \\/  ! '!!!v'\n#           !  !  \\ _' ( \\____\n#           ! . \\ _!\\   \\===^\\)\n#            \\ \\_!  / __!\n#         .   \\!   /    \\\n#       (\\_      _/   _\\ )\n#        \\ ^^--^^ __-^ /(__\n#         ^^----^^    \"^--v'\n#\n# Dirty hack to install the version of libmysqlclient.so that MySQLdb python\n# package is compiled against. This is fragile and will probably break when\n# updating the base python image or version of mysqlclient package.\nRUN wget https://launchpadlibrarian.net/449075198/libmysqlclient21_8.0.18-0ubuntu0.19.10.1_amd64.deb \\\n    && dpkg -i libmysqlclient21_8.0.18-0ubuntu0.19.10.1_amd64.deb \\\n    && rm libmysqlclient21_8.0.18-0ubuntu0.19.10.1_amd64.deb \\\n    # wget was only needed to download the libmysqlclient.so file above.\n    && apt-get remove -y --purge wget\n#\n# Dirty hack to workaround the fact that oclgrind demands libreadline.so.6, but\n# the current Ubuntu package provides libreadline.so.7.\nRUN ln -s /lib/x86_64-linux-gnu/libreadline.so.7 \\\n    /lib/x86_64-linux-gnu/libreadline.so.6\n#\n# End of danger zone.\n###############################################################################\n\n# Remove unwanted files.\nRUN rm -rf /usr/share/doc\n\n# Create a non-root user to execute commands with. This is so that generated\n# files in mapped volumes will be created as this user, rather than as root.\n# Running as a non-priveledges user may be iritating for debugging, in which\n# case pass the `-u root` flag to your docker command.\nRUN useradd -ms /bin/bash docker\n# Add docker to a 'other_docker' group, which enables read permission when\n# mapping /var/run/docker.sock to enable nested docker.\nRUN groupadd --gid 123 other_docker && usermod -a -G other_docker docker\nUSER docker\n\nENTRYPOINT [\"/bin/bash\"]\n"
}