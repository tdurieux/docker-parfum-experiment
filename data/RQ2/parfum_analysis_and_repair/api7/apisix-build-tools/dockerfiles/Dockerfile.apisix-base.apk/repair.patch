diff --git a/Users/tdurieux/git/dinghy-experiment/data/evaluation/dockerfiles/api7/apisix-build-tools/dockerfiles/Dockerfile.apisix-base.apk b/Users/tdurieux/git/dinghy-experiment/data/evaluation/dockerfile_repair_results/api7/apisix-build-tools/dockerfiles/Dockerfile.apisix-base.apk/repaired.Dockerfile
index 413bb8e..96bce42 100644
--- a/Users/tdurieux/git/dinghy-experiment/data/evaluation/dockerfiles/api7/apisix-build-tools/dockerfiles/Dockerfile.apisix-base.apk
+++ b/Users/tdurieux/git/dinghy-experiment/data/evaluation/dockerfile_repair_results/api7/apisix-build-tools/dockerfiles/Dockerfile.apisix-base.apk/repaired.Dockerfile
@@ -61,7 +61,7 @@ RUN cd /tmp \
     && tar xzf openssl-${RESTY_OPENSSL_VERSION}.tar.gz \
     && cd openssl-${RESTY_OPENSSL_VERSION} \
     && echo 'patching OpenSSL 1.1.1 for OpenResty' \
-    && curl -s https://raw.githubusercontent.com/openresty/openresty/master/patches/openssl-${RESTY_OPENSSL_PATCH_VERSION}-sess_set_get_cb_yield.patch | patch -p1 \
+    && curl -f -s https://raw.githubusercontent.com/openresty/openresty/master/patches/openssl-${RESTY_OPENSSL_PATCH_VERSION}-sess_set_get_cb_yield.patch | patch -p1 \
     && ./config \
       no-threads shared zlib -g \
       enable-ssl3 enable-ssl3-method \
@@ -69,24 +69,24 @@ RUN cd /tmp \
       --libdir=lib \
       -Wl,-rpath,/usr/local/openresty/openssl111/lib \
     && make -j${RESTY_J} \
-    && make -j${RESTY_J} install_sw
+    && make -j${RESTY_J} install_sw && rm openssl-${RESTY_OPENSSL_VERSION}.tar.gz
 
 RUN cd /tmp \
     && curl -fSL https://downloads.sourceforge.net/project/pcre/pcre/${RESTY_PCRE_VERSION}/pcre-${RESTY_PCRE_VERSION}.tar.gz -o pcre-${RESTY_PCRE_VERSION}.tar.gz \
     && tar xzf pcre-${RESTY_PCRE_VERSION}.tar.gz \
     && cd /tmp/pcre-${RESTY_PCRE_VERSION} \
-    && ./configure \
+    && ./configure --build="$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)" \
         --prefix=/usr/local/openresty/pcre \
         --disable-cpp \
         --enable-jit \
         --enable-utf \
         --enable-unicode-properties \
     && make -j${RESTY_J} \
-    && make -j${RESTY_J} install
+    && make -j${RESTY_J} install && rm pcre-${RESTY_PCRE_VERSION}.tar.gz
 
 ENV version=${VERSION}
 RUN cd /tmp \
-    && curl --version \
+    && curl -f --version \
     && source /root/.cargo/env \
     && ./build-common.sh build_apisix_base_apk \
     && rm /usr/local/openresty/wasmtime-c-api/lib/libwasmtime.a \
@@ -108,7 +108,7 @@ RUN apk add --no-cache \
         curl \
         make \
         sudo \
-    && curl https://raw.githubusercontent.com/apache/apisix/master/utils/linux-install-luarocks.sh -sL | sh - \
+    && curl -f https://raw.githubusercontent.com/apache/apisix/master/utils/linux-install-luarocks.sh -sL | sh - \
     && apk del .build-deps