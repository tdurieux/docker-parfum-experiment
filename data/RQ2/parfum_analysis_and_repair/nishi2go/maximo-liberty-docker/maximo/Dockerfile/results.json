{
  "startTime": 1674249421017,
  "endTime": 1674249421764,
  "originalSmells": [
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 68,
        "lineEnd": 69,
        "columnStart": 22,
        "columnEnd": 31
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "# Licensed under the Apache License, Version 2.0 (the \"License\");\n# you may not use this file except in compliance with the License.\n# You may obtain a copy of the License at\n#\n# http://www.apache.org/licenses/LICENSE-2.0\n#\n# Unless required by applicable law or agreed to in writing, software\n# distributed under the License is distributed on an \"AS IS\" BASIS,\n# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n# See the License for the specific language governing permissions and\n# limitations under the License.\nARG buildver=7.6.1.2\nARG base_maximo_build=ubuntu:18:04\nARG namespace=maximo-liberty\n\nFROM ${namespace}/images:${buildver}\n\nFROM ${base_maximo_build}\n\nLABEL maintainer=\"nishi2go@gmail.com\"\n\nARG update_im=no\nARG fp=2\nARG db_alias=MAXDB76\nARG enable_jms=yes\nARG install_fp=yes\nARG skip_build=no\nARG deploy_db_on_build=yes\nARG backup_dir=/backup\nARG db_alias=MAXDB76\nARG mxintadm_password\nARG maxadmin_password\nARG db_maximo_password\nARG maxreg_password\nARG db_port=50005\nARG base_lang=en\nARG add_langs\nARG admin_email_address=root@localhost\nARG smtp_server_host_name=localhost\nARG skin=iot18\nARG enable_demo_data=no\nARG use_app_server_security=no\nARG user_management=mixed\n\nENV DB2_PATH /home/ctginst1/sqllib\nENV MAXDB ${db_alias}\nENV MAXDB_SERVICE_PORT ${db_port}\nENV BACKUP_DIR /work/backup\nENV USE_APP_SERVER_SECURITY ${use_app_server_security}\nENV JMS_ENABLED ${enable_jms}\n\nENV TEMP /tmp\nWORKDIR /tmp\n\nUSER root\n# Install IBM Installation Manager 1.8.8\nRUN mkdir /Install_Mgr\nCOPY --from=0 /Install_Mgr /Install_Mgr/\nRUN /Install_Mgr/EnterpriseDVD/Linux_x86_64/EnterpriseCD-Linux-x86_64/InstallationManager/installc -log /tmp/IM_Install_Unix.xml -acceptLicense \\\n    && rm -rf /Install_Mgr\n\n## Update Installation Manager\nRUN if [ \"${update_im}\" = \"yes\" ]; then /opt/IBM/InstallationManager/eclipse/tools/imcl install com.ibm.cic.agent; fi\n\nENV TEMP /tmp\nWORKDIR /tmp\n\n# Install required packages\nRUN apt-get update && apt-get install --no-install-recommends -y netcat wget gettext inetutils-ping \\\n    dos2unix apache2 xmlstarlet && rm -rf /var/lib/apt/lists/*\n\n## Install Maximo middleware and installer\nRUN mkdir /Launchpad\nWORKDIR /Launchpad\n\n## Install Maximo V7.6.1\nENV BYPASS_PRS=True\n# Remove z from tar command because file is not gzipped despite having gz extension\nCOPY --from=0 /Launchpad /Launchpad/\nRUN /opt/IBM/InstallationManager/eclipse/tools/imcl \\\n    -input /Launchpad/SilentResponseFiles/Unix/ResponseFile_MAM_Install_Unix.xml \\\n    -acceptLicense -log /tmp/MAM_Install_Unix.xml \\\n    && rm -rf /Launchpad\n\n# Install Maximo V7.6.1 feature pack\nRUN mkdir -p /work\nWORKDIR /work\nENV MAM_FP_IMAGE MAMMTFP761${fp}IMRepo.zip\nCOPY --from=0 /images/${MAM_FP_IMAGE} /work/\nRUN if [ \"${install_fp}\" = \"yes\" ]; then /opt/IBM/InstallationManager/eclipse/tools/imcl install \\\n    com.ibm.tivoli.tpae.base.tpae.main -repositories /work/${MAM_FP_IMAGE} \\\n    -installationDirectory /opt/IBM/SMP -log /tmp/TPAE_FP_Install_Unix.xml -acceptLicense \\\n    && /opt/IBM/InstallationManager/eclipse/tools/imcl install \\\n    com.ibm.tivoli.tpae.base.mam.main -repositories /work/${MAM_FP_IMAGE} \\\n    -installationDirectory /opt/IBM/SMP -log /tmp/MAM_FP_Install_Unix.xml -acceptLicense \\\n    && rm /work/${MAM_FP_IMAGE}; fi\n\nRUN dos2unix /opt/IBM/SMP/maximo/deployment/was-liberty-default/*.sh\n\nRUN mkdir /work/ldap-config\nCOPY ldap-config /work/ldap-config/\nCOPY *.sh /work/\nCOPY *.xml /work/\nRUN chmod +x /work/*.sh\nRUN /work/buildwars.sh\n\n# RUN mkdir /opt/IBM/SMP/maximo/tools/maximo/en/liberty\n# COPY liberty.dbc /opt/IBM/SMP/maximo/tools/maximo/en/liberty/\n\nRUN wget -q https://raw.githubusercontent.com/vishnubob/wait-for-it/master/wait-for-it.sh \\\n    && mv wait-for-it.sh /usr/local/bin && chmod +x /usr/local/bin/wait-for-it.sh\n\nCOPY maximo-config.properties.template /opt/\n\nENV MAXIMO_DIR /maximo\nENV MAXDB ${db_alias}\nENV DB_VENDOR DB2\nENV DB_TABLE_SPACE MAXDATA\nENV DB_TEMP_SPACE MAXTEMP\nENV DB_INDEX_SPACE MAXINDEX\nENV ENABLE_DEMO_DATA ${enable_demo_data}\nENV USER_MANAGEMENT ${user_management}\n\nRUN if [ \"${deploy_db_on_build}\" = \"no\" ]; then mkdir -p ${BACKUP_DIR} && touch ${BACKUP_DIR}/placeholder ; else /work/startinstall.sh ; fi\n\nENTRYPOINT [\"/work/startinstall.sh\"]\n"
}