{
  "startTime": 1674249438544,
  "endTime": 1674249439680,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 16,
        "lineEnd": 16,
        "columnStart": 10,
        "columnEnd": 157
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 16,
        "lineEnd": 16,
        "columnStart": 244,
        "columnEnd": 278
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 4,
        "lineEnd": 4,
        "columnStart": 2,
        "columnEnd": 47
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM ubuntu:18.04 as prep\nLABEL MAINTAINER=\"leopere [at] nixc [dot] us\"\n## TODO: Implement version pinning. `apt-get install curl=<version>`\nRUN apt-get update && \\\n  apt-get -y --no-install-recommends install unzip curl build-essential && \\\n  apt-get autoclean -y && \\\n  rm -rf /var/lib/apt/lists/*\nWORKDIR /\nSHELL [\"/bin/bash\", \"-o\", \"pipefail\", \"-c\"]\nCOPY ./start.sh start\nCOPY ./healthcheck.sh healthcheck\nCOPY ./advance_blocks.sh advance\nCOPY ./fix-permissions.c fix-permissions.c\n\n## Add lbrycrd - Change the version below to create an image for a different tag/version\nARG VERSION=\"v0.12.4.1\"\nRUN URL=$( curl -f -s https://api.github.com/repos/lbryio/lbrycrd/releases/$(if [ \"${VERSION}\" = 'latest' ]; then echo \"latest\"; else echo \"tags/${VERSION}\"; fi) | grep browser_download_url | grep lbrycrd-linux.zip | cut -d'\"' -f4) && echo $URL && curl -f -L -o /lbrycrd-linux.zip $URL\n\nRUN unzip ./lbrycrd-linux.zip && \\\n  gcc fix-permissions.c -o fix-permissions && \\\n  chmod +x ./lbrycrdd ./lbrycrd-cli ./lbrycrd-tx ./start ./healthcheck ./fix-permissions ./advance\n\nFROM ubuntu:18.04 as app\nCOPY --from=prep /lbrycrdd /lbrycrd-cli /lbrycrd-tx /start /healthcheck /fix-permissions /advance /usr/bin/\nRUN addgroup --gid 1000 lbrycrd && \\\n  adduser lbrycrd --uid 1000 --gid 1000 --gecos GECOS --shell /bin/bash --disabled-password --home /data && \\\n  mkdir /etc/lbry && \\\n  chown lbrycrd /etc/lbry && \\\n  chmod a+s /usr/bin/fix-permissions\nVOLUME [\"/data\"]\nWORKDIR /data\n## TODO: Implement healthcheck.\n# HEALTHCHECK [\"healthcheck\"]\nEXPOSE 9246 9245 11337 29245\n\nUSER lbrycrd\nCMD [\"start\"]"
}