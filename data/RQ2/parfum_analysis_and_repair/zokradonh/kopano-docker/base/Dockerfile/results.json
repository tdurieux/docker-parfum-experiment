{
  "startTime": 1674255592109,
  "endTime": 1674255593253,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 58,
        "lineEnd": 58,
        "columnStart": 4,
        "columnEnd": 118
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM debian:buster\n\nARG ADDITIONAL_KOPANO_PACKAGES=\"\"\nARG DOWNLOAD_COMMUNITY_PACKAGES=1\nARG KOPANO_CORE_REPOSITORY_URL=\"file:/kopano/repo/core\"\nARG KOPANO_CORE_VERSION=newest\nARG KOPANO_REPOSITORY_FLAGS=\"\"\n\n# Both UID and GID should not be set to values above 999\nARG KOPANO_UID=999\nARG KOPANO_GID=999\n\nENV \\\n    AUTOCONFIGURE=true \\\n    BASE_VERSION=2.2.0 \\\n    DEBIAN_FRONTEND=noninteractive \\\n    DEBUG=\"\"\n\nLABEL maintainer=az@zok.xyz \\\n    org.label-schema.name=\"Kopano base container\" \\\n    org.label-schema.description=\"Base image for containers running the Kopano groupware stack\" \\\n    org.label-schema.url=\"https://kopano.io\" \\\n    org.label-schema.vcs-url=\"https://github.com/zokradonh/kopano-docker\" \\\n    org.label-schema.version=$BASE_VERSION \\\n    org.label-schema.schema-version=\"1.0\"\n\nSHELL [\"/bin/bash\", \"-o\", \"pipefail\", \"-c\"]\n\nRUN mkdir -p /kopano/repo /kopano/data /kopano/helper /kopano/path\nWORKDIR /kopano/repo\n\n# install basics\nRUN apt-get update && \\\n    apt-get install --no-install-recommends -y \\\n        apt-transport-https \\\n        apt-utils \\\n        ca-certificates \\\n        curl \\\n        dumb-init \\\n        gpg \\\n        gpg-agent \\\n        jq \\\n        locales \\\n        moreutils \\\n        python3-minimal \\\n        && \\\n    rm -rf /var/cache/apt /var/lib/apt/lists/*\n\n# Create kopano user and group\nRUN groupadd --system --gid ${KOPANO_GID} kopano\nRUN useradd --system --shell /usr/sbin/nologin --home /var/lib/kopano --gid ${KOPANO_GID} --uid ${KOPANO_UID} kopano\n\nENV DOCKERIZE_VERSION v0.11.6\nRUN curl -sfL https://github.com/powerman/dockerize/releases/download/\"$DOCKERIZE_VERSION\"/dockerize-\"$(uname -s)\"-\"$(uname -m)\" \\\n    | install /dev/stdin /usr/local/bin/dockerize && \\\n    dockerize --version\n\nENV GOSS_VERSION v0.3.11\nRUN curl -f -L https://github.com/aelsabbahy/goss/releases/download/$GOSS_VERSION/goss-linux-amd64 -o /usr/local/bin/goss && \\\n    chmod +rx /usr/local/bin/goss && \\\n    goss --version\n\n# if additional locales are required this should be adjusted here\nRUN sed -i -e 's/# en_US.UTF-8 UTF-8/en_US.UTF-8 UTF-8/' /etc/locale.gen && \\\n    sed -i -e 's/# de_DE.UTF-8 UTF-8/de_DE.UTF-8 UTF-8/' /etc/locale.gen && \\\n    sed -i -e 's/# nl_NL.UTF-8 UTF-8/nl_NL.UTF-8 UTF-8/' /etc/locale.gen && \\\n    dpkg-reconfigure --frontend=noninteractive locales && \\\n    update-locale LANG=en_US.UTF-8\n\n# get common utilities\nCOPY create-kopano-repo.sh /kopano/helper/\nCOPY kcconf.py Release.key defaultconfigs/ /kopano/\nRUN apt-key add /kopano/Release.key\n\nSHELL [ \"/bin/bash\", \"-c\"]\n\nONBUILD ARG DOWNLOAD_COMMUNITY_PACKAGES=1\nONBUILD ARG DOWNLOAD_DISTRIBUTION=\"Debian_10\"\nONBUILD ARG DOWNLOAD_CHANNEL=\"community\"\nONBUILD ARG DOWNLOAD_BRANCH=\"\"\nONBUILD WORKDIR /kopano/repo\nONBUILD RUN \\\n    # community download and package as apt source repository\n    . /kopano/helper/create-kopano-repo.sh && \\\n    if [ ${DOWNLOAD_COMMUNITY_PACKAGES} -eq 1 ]; then \\\n        dl_and_package_community \"core\" \"$DOWNLOAD_DISTRIBUTION\" \"$DOWNLOAD_CHANNEL\" \"$DOWNLOAD_BRANCH\"; \\\n        dl_and_package_community \"kapps\" \"$DOWNLOAD_DISTRIBUTION\" \"$DOWNLOAD_CHANNEL\" \"$DOWNLOAD_BRANCH\"; \\\n    fi\n\nARG VCS_REF\nLABEL org.label-schema.vcs-ref=$VCS_REF"
}