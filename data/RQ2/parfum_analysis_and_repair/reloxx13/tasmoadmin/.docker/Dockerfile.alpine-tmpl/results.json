{
  "startTime": 1674248932778,
  "endTime": 1674248933542,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 65,
        "lineEnd": 65,
        "columnStart": 7,
        "columnEnd": 121
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "ARG BUILD_FROM=amd64/alpine:3.15\n\nFROM node:16-alpine AS node-builder\n\nCOPY tasmoadmin /tasmoadmin\nRUN cd /tasmoadmin && npm ci && node minify.js\n\nFROM composer AS builder\n\nCOPY --from=node-builder /tasmoadmin  /tasmoadmin\nRUN composer install -d /tasmoadmin\n\nFROM ${BUILD_FROM}\n\n# Build arguments\nARG BUILD_DATE\nARG BUILD_REF=dev\nARG BUILD_VERSION=dev\n\n# Label\nLABEL \\\n    maintainer1=\"Reloxx <reloxx@interia.pl>\" \\\n    maintainer2=\"Raymond M Mouthaan <raymondmmouthaan@gmail.com>\" \\\n    org.opencontainers.image.title=\"TasmoAdmin}\" \\\n    org.opencontainers.image.description=\"TasmoAdmin - An administrative Website for Devices flashed with Tasmota firmware\" \\\n    org.opencontainers.image.vendor=\"TasmoAdmin\" \\\n    org.opencontainers.image.authors=\"Reloxx <reloxx@interia.pl>, Raymond M Mouthaan <raymondmmouthaan@gmail.com>\" \\\n    org.opencontainers.image.licenses=\"GPL-3.0\" \\\n    org.opencontainers.image.url=\"https://github.com/TasmoAdmin/TasmoAdmin\" \\\n    org.opencontainers.image.source=\"https://github.com/TasmoAdmin/TasmoAdmin\" \\\n    org.opencontainers.image.documentation=\"https://github.com/TasmoAdmin/TasmoAdmin/blob/master/README.md\" \\\n    org.opencontainers.image.created=${BUILD_DATE} \\\n    org.opencontainers.image.revision=${BUILD_REF} \\\n    org.opencontainers.image.version=${BUILD_VERSION}\n\n# Setup Qemu\nARG QEMU_ARCH=x86_64\nCOPY .docker/_tmp/qemu-${QEMU_ARCH}-static /usr/bin/qemu-${QEMU_ARCH}-static\n\n# Install base system\nARG BUILD_ARCH=amd64\nRUN \\\n    apk add --no-cache --virtual .build-dependencies \\\n        tar \\\n    \\\n    && apk add --no-cache \\\n        apk-tools \\\n        bash \\\n        busybox \\\n        ca-certificates \\\n        curl \\\n        musl-utils \\\n        musl \\\n        tzdata \\\n        nginx \\\n        php8-curl \\\n        php8-fpm \\\n        php8-json \\\n        php8-session \\\n        php8-zip \\\n        php8-mbstring \\\n        php8 \\\n    \\\n    && if [[ \"${BUILD_ARCH}\" = \"arm32v6\" ]]; then S6_ARCH=\"armhf\"; else S6_ARCH=\"${BUILD_ARCH}\"; fi \\\n\n    && curl -f -L -s \"https://github.com/just-containers/s6-overlay/releases/download/v2.2.0.3/s6-overlay-${S6_ARCH}.tar.gz\" \\\n        | tar zxf - -C / \\\n\n    && apk del --purge .build-dependencies \\\n\n    && rm -f -r /tmp/*\n\n# Environment variables\nENV BUILD_VERSION ${BUILD_VERSION}\nENV BUILD_REF ${BUILD_REF}\nENV SSL false\n\nRUN echo \"fastcgi_param BUILD_VERSION ${BUILD_VERSION};\" >> /etc/nginx/fastcgi_params\nRUN echo \"fastcgi_param BUILD_REF ${BUILD_REF};\" >> /etc/nginx/fastcgi_params\n\n# Copy root filesystem\nCOPY .docker/rootfs /\n\n# Setup application\nCOPY --from=builder /tasmoadmin /var/www/tasmoadmin\nRUN find /var/www/tasmoadmin -type f -name \".htaccess\" -depth -exec rm -f {} \\; \\\n    && find /var/www/tasmoadmin -type f -name \".empty\" -depth -exec rm -f {} \\;\n\n# Volumes\nVOLUME [ \"/data\" ]\n\n# Expose\nEXPOSE 80 443\n\n# Entrypoint\nENTRYPOINT [ \"/init\" ]\n"
}