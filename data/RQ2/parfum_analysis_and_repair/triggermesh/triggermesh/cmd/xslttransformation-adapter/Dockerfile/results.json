{
  "startTime": 1674250127209,
  "endTime": 1674250128179,
  "originalSmells": [
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 20,
        "lineEnd": 20,
        "columnStart": 4,
        "columnEnd": 94
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "# Copyright 2022 TriggerMesh Inc.\n#\n# Licensed under the Apache License, Version 2.0 (the \"License\");\n# you may not use this file except in compliance with the License.\n# You may obtain a copy of the License at\n#\n#     http://www.apache.org/licenses/LICENSE-2.0\n#\n# Unless required by applicable law or agreed to in writing, software\n# distributed under the License is distributed on an \"AS IS\" BASIS,\n# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n# See the License for the specific language governing permissions and\n# limitations under the License.\n\n# (!) Debian 11 'bullseye' must be used in both the builder and final image to\n# ensure the compatibility of the GNU libc.\nFROM golang:1.18-bullseye as builder\n\nRUN set -eux; \\\n    apt-get update; \\\n    apt-get install -y --no-install-recommends libxml2-dev libxslt1-dev liblzma-dev zlib1g-dev && rm -rf /var/lib/apt/lists/*;\n\n\nWORKDIR /go/triggermesh\n\nCOPY . .\nRUN go build -o /xslttransformation-adapter ./cmd/xslttransformation-adapter\n# ldd /xslttransformation-adapter\n# (i) Entries marked with a '*' are not included in the 'distroless:base' image.\n#     linux-vdso.so.1\n#   * libxml2.so.2 => /usr/lib/x86_64-linux-gnu/libxml2.so.2\n#   * libxslt.so.1 => /usr/lib/x86_64-linux-gnu/libxslt.so.1\n#   * libexslt.so.0 => /usr/lib/x86_64-linux-gnu/libexslt.so.0\n#     libpthread.so.0 => /lib/x86_64-linux-gnu/libpthread.so.0\n#     libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6\n#     libdl.so.2 => /lib/x86_64-linux-gnu/libdl.so.2\n#   * libicuuc.so.67 => /usr/lib/x86_64-linux-gnu/libicuuc.so.67\n#   * libz.so.1 => /lib/x86_64-linux-gnu/libz.so.1\n#   * liblzma.so.5 => /lib/x86_64-linux-gnu/liblzma.so.5\n#     libm.so.6 => /lib/x86_64-linux-gnu/libm.so.6\n#   * libgcrypt.so.20 => /usr/lib/x86_64-linux-gnu/libgcrypt.so.20\n#     /lib64/ld-linux-x86-64.so.2\n#   * libicudata.so.67 => /usr/lib/x86_64-linux-gnu/libicudata.so.67\n#   * libstdc++.so.6 => /usr/lib/x86_64-linux-gnu/libstdc++.so.6\n#   * libgcc_s.so.1 => /lib/x86_64-linux-gnu/libgcc_s.so.1\n#   * libgpg-error.so.0 => /lib/x86_64-linux-gnu/libgpg-error.so.0\n\n\nFROM gcr.io/distroless/base-debian11:nonroot\n\n# Ensure the /kodata entries used by Knative to augment the logger with the\n# current VCS revision are present.\nCOPY --from=builder /go/triggermesh/.git/HEAD /go/triggermesh/.git/refs/ /kodata/\nENV KO_DATA_PATH=/kodata\n\n# (!) COPY follows symlinks\nCOPY --from=builder \\\n    /usr/lib/x86_64-linux-gnu/libxml2.so.2 \\\n    /usr/lib/x86_64-linux-gnu/libxslt.so.1 \\\n    /usr/lib/x86_64-linux-gnu/libexslt.so.0 \\\n    /usr/lib/x86_64-linux-gnu/libicuuc.so.67 \\\n    /lib/x86_64-linux-gnu/libz.so.1 \\\n    /lib/x86_64-linux-gnu/liblzma.so.5 \\\n    /usr/lib/x86_64-linux-gnu/libgcrypt.so.20 \\\n    /usr/lib/x86_64-linux-gnu/libicudata.so.67 \\\n    /usr/lib/x86_64-linux-gnu/libstdc++.so.6 \\\n    /lib/x86_64-linux-gnu/libgcc_s.so.1 \\\n    /lib/x86_64-linux-gnu/libgpg-error.so.0 \\\n    /usr/lib/x86_64-linux-gnu/\n\nCOPY --from=builder /xslttransformation-adapter /\n\nENTRYPOINT [\"/xslttransformation-adapter\"]\n"
}