{
  "startTime": 1674249015005,
  "endTime": 1674249016267,
  "originalSmells": [
    {
      "rule": "npmCacheCleanAfterInstall",
      "position": {
        "lineStart": 61,
        "lineEnd": 68,
        "columnStart": 4,
        "columnEnd": 17
      }
    },
    {
      "rule": "configureShouldUseBuildFlag",
      "position": {
        "lineStart": 14,
        "lineEnd": 14,
        "columnStart": 7,
        "columnEnd": 18
      }
    },
    {
      "rule": "configureShouldUseBuildFlag",
      "position": {
        "lineStart": 22,
        "lineEnd": 22,
        "columnStart": 7,
        "columnEnd": 22
      }
    },
    {
      "rule": "configureShouldUseBuildFlag",
      "position": {
        "lineStart": 33,
        "lineEnd": 33,
        "columnStart": 7,
        "columnEnd": 18
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 12,
        "lineEnd": 12,
        "columnStart": 7,
        "columnEnd": 42
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 20,
        "lineEnd": 20,
        "columnStart": 7,
        "columnEnd": 51
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 31,
        "lineEnd": 31,
        "columnStart": 7,
        "columnEnd": 51
      }
    },
    {
      "rule": "aptGetInstallUseY",
      "position": {
        "lineStart": 58,
        "lineEnd": 58,
        "columnStart": 4,
        "columnEnd": 39
      }
    },
    {
      "rule": "aptGetInstallUseY",
      "position": {
        "lineStart": 59,
        "lineEnd": 59,
        "columnStart": 4,
        "columnEnd": 36
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 3,
        "lineEnd": 7,
        "columnStart": 26,
        "columnEnd": 71
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 28,
        "lineEnd": 28,
        "columnStart": 4,
        "columnEnd": 57
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 48,
        "lineEnd": 48,
        "columnStart": 4,
        "columnEnd": 36
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 58,
        "lineEnd": 58,
        "columnStart": 4,
        "columnEnd": 39
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 59,
        "lineEnd": 59,
        "columnStart": 4,
        "columnEnd": 36
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 71,
        "lineEnd": 71,
        "columnStart": 4,
        "columnEnd": 61
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 28,
        "lineEnd": 28,
        "columnStart": 4,
        "columnEnd": 57
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 48,
        "lineEnd": 48,
        "columnStart": 4,
        "columnEnd": 36
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 71,
        "lineEnd": 71,
        "columnStart": 4,
        "columnEnd": 61
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 3,
        "lineEnd": 7,
        "columnStart": 26,
        "columnEnd": 71
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 28,
        "lineEnd": 28,
        "columnStart": 4,
        "columnEnd": 57
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 48,
        "lineEnd": 48,
        "columnStart": 4,
        "columnEnd": 36
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 58,
        "lineEnd": 58,
        "columnStart": 4,
        "columnEnd": 39
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 59,
        "lineEnd": 59,
        "columnStart": 4,
        "columnEnd": 36
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 71,
        "lineEnd": 71,
        "columnStart": 4,
        "columnEnd": 61
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 28,
        "lineEnd": 28,
        "columnStart": 4,
        "columnEnd": 81
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 48,
        "lineEnd": 48,
        "columnStart": 4,
        "columnEnd": 60
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 71,
        "lineEnd": 71,
        "columnStart": 4,
        "columnEnd": 85
      }
    }
  ],
  "repairedDockerfile": "FROM ubuntu:20.04\nLABEL Olivier Bonnaure <olivier@solisoft.net>\nARG DEBIAN_FRONTEND=noninteractive\nRUN apt-get -qq update && apt-get -qqy --no-install-recommends install vim zlib1g-dev libreadline-dev \\\n    libncurses5-dev libpcre3-dev libssl-dev gcc perl make git-core \\\n    libsass-dev glib2.0-dev libexpat1-dev \\\n    libjpeg-dev libwebp-dev libpng-dev libexif-dev libgif-dev wget \\\n    libx265-dev libde265-dev libheif-dev autoconf cmake build-essential && rm -rf /var/lib/apt/lists/*;\n\nARG VIPS_VERSION=8.12.2\n\nRUN wget https://github.com/libvips/libvips/releases/download/v${VIPS_VERSION}/vips-${VIPS_VERSION}.tar.gz \\\n    && tar -xf vips-${VIPS_VERSION}.tar.gz \\\n    && cd vips-${VIPS_VERSION} \\\n    && ./configure --build=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\" \\\n    && make && make install && ldconfig && cd .. && rm -Rf vips-* && rm vips-${VIPS_VERSION}.tar.gz\n\nARG OPENRESTY_VERSION=1.19.9.1\n\nRUN wget https://openresty.org/download/openresty-${OPENRESTY_VERSION}.tar.gz \\\n    && tar xf openresty-${OPENRESTY_VERSION}.tar.gz \\\n    && cd openresty-${OPENRESTY_VERSION} \\\n    && ./configure --build=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\" -j2 \\\n    && make -j2 \\\n    && make install && cd .. && rm -Rf openresty-* && rm openresty-${OPENRESTY_VERSION}.tar.gz\n\nARG LUAROCKS_VERSION=3.8.0\n\nRUN apt-get -qqy --no-install-recommends install lua5.1 liblua5.1-0-dev unzip zip && rm -rf /var/lib/apt/lists/*;\n\nRUN wget https://luarocks.org/releases/luarocks-${LUAROCKS_VERSION}.tar.gz \\\n    && tar zxpf luarocks-${LUAROCKS_VERSION}.tar.gz \\\n    && cd luarocks-${LUAROCKS_VERSION} \\\n    && ./configure --build=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\" && make \\\n    && make install && cd .. && rm -Rf luarocks-* && rm luarocks-${LUAROCKS_VERSION}.tar.gz\n\nARG LAPIS_VERSION=1.9.0\nRUN luarocks install --server=http://rocks.moonscript.org/manifests/leafo lapis $LAPIS_VERSION\nRUN luarocks install moonscript\nRUN luarocks install lapis-console\nRUN luarocks install stringy\nRUN luarocks install busted\nRUN luarocks install sass\nRUN luarocks install web_sanitize\nRUN luarocks install luasec\nRUN luarocks install cloud_storage\nRUN luarocks install lua-resty-jwt\nRUN luarocks install fun\nRUN apt-get -qqy --no-install-recommends install libyaml-dev && rm -rf /var/lib/apt/lists/*;\nRUN luarocks --server=http://rocks.moonscript.org install lyaml\n\nRUN wget https://raw.githubusercontent.com/visionmedia/n/master/bin/n && \\\n    chmod +x n && mv n /usr/bin/n && n lts\n\nRUN wget https://download.arangodb.com/arangodb38/DEBIAN/Release.key && \\\n    apt-key add - < Release.key && \\\n    echo 'deb https://download.arangodb.com/arangodb38/DEBIAN/ /' | tee /etc/apt/sources.list.d/arangodb.list  && \\\n    apt-get update && \\\n    apt-get install -y --no-install-recommends apt-transport-https && \\\n    apt-get install -y --no-install-recommends arangodb3-client && rm -rf /var/lib/apt/lists/*;\n\nRUN npm install -g yarn@1.22.11 \\\n    forever@4.0.1 \\\n    @riotjs/cli@6.0.5 \\\n    @babel/core@7.15.5 \\\n    terser@5.7.2 \\\n    tailwindcss@3.0.23 \\\n    autoprefixer@10.3.4 \\\n    postcss@8.3.6 && npm cache clean --force;\n\nRUN wget https://github.com/wkhtmltopdf/packaging/releases/download/0.12.6-1/wkhtmltox_0.12.6-1.focal_amd64.deb\nRUN apt-get -qqy --no-install-recommends install ./wkhtmltox_0.12.6-1.focal_amd64.deb && rm -rf /var/lib/apt/lists/*;\nRUN rm wkhtmltox_0.12.6-1.focal_amd64.deb\n\nWORKDIR /var/www\n\nENV LAPIS_OPENRESTY $OPENRESTY_PREFIX/nginx/sbin/nginx\n"
}