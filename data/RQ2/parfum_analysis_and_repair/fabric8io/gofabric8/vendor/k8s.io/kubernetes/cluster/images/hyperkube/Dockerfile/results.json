{
  "startTime": 1674252420273,
  "endTime": 1674252421169,
  "originalSmells": [
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 21,
        "lineEnd": 32,
        "columnStart": 7,
        "columnEnd": 14
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "# Copyright 2016 The Kubernetes Authors.\n#\n# Licensed under the Apache License, Version 2.0 (the \"License\");\n# you may not use this file except in compliance with the License.\n# You may obtain a copy of the License at\n#\n#     http://www.apache.org/licenses/LICENSE-2.0\n#\n# Unless required by applicable law or agreed to in writing, software\n# distributed under the License is distributed on an \"AS IS\" BASIS,\n# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n# See the License for the specific language governing permissions and\n# limitations under the License.\n\nFROM BASEIMAGE\n\n# If we're building for another architecture than amd64, the CROSS_BUILD_ placeholder is removed so e.g. CROSS_BUILD_COPY turns into COPY\n# If we're building normally, for amd64, CROSS_BUILD lines are removed\nCROSS_BUILD_COPY qemu-ARCH-static /usr/bin/\n\nRUN DEBIAN_FRONTEND=noninteractive apt-get update -y \\\n    && DEBIAN_FRONTEND=noninteractive apt-get --no-install-recommends -yy -q install \\\n    iptables \\\n    ebtables \\\n    ethtool \\\n    ca-certificates \\\n    conntrack \\\n    util-linux \\\n    socat \\\n    git \\\n    nfs-common \\\n    glusterfs-client \\\n    cifs-utils \\\n    && DEBIAN_FRONTEND=noninteractive apt-get upgrade -y \\\n    && DEBIAN_FRONTEND=noninteractive apt-get autoremove -y \\\n    && DEBIAN_FRONTEND=noninteractive apt-get clean && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*\n\nRUN cp /usr/bin/nsenter /nsenter\n\n# Manifests for the docker guide\nCOPY static-pods/master.json \\\n     static-pods/etcd.json \\\n     static-pods/addon-manager-singlenode.json \\\n     static-pods/kube-proxy.json \\\n        /etc/kubernetes/manifests/\n\n# Manifests for the docker-multinode guide\nCOPY static-pods/master-multi.json \\\n     static-pods/addon-manager-multinode.json \\\n        /etc/kubernetes/manifests-multi/\n\n# Copy over all addons\nCOPY addons /etc/kubernetes/addons\n\n# Copy other required scripts for the setup\nCOPY setup-files.sh make-ca-cert.sh copy-addons.sh /\n\n# easy-rsa package required by make-ca-cert\nADD https://storage.googleapis.com/kubernetes-release/easy-rsa/easy-rsa.tar.gz /root/kube/\n\n# Copy the the cni-bin folder into /opt/cni/bin\nCOPY cni-bin/bin /opt/cni/bin\n\n# Copy overlay configuration to default directory\nCOPY cni-conf /etc/cni/net.d\n\n# Create symlinks for each hyperkube server\n# TODO: replace manual symlink creation with --make-symlink command once\n# cross-building with qemu supports go binaries. See #28702\n# RUN /hyperkube --make-symlinks\nRUN ln -s /hyperkube /apiserver \\\n && ln -s /hyperkube /controller-manager \\\n && ln -s /hyperkube /federation-apiserver \\\n && ln -s /hyperkube /federation-controller-manager \\\n && ln -s /hyperkube /kubectl \\\n && ln -s /hyperkube /kubelet \\\n && ln -s /hyperkube /proxy \\\n && ln -s /hyperkube /scheduler\n\n# Copy the hyperkube binary\nCOPY hyperkube /hyperkube\n\n"
}