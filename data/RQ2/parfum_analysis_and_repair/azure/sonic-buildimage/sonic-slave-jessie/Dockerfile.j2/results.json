{
  "startTime": 1674254703788,
  "endTime": 1674254705446,
  "originalSmells": [
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 283,
        "lineEnd": 285,
        "columnStart": 4,
        "columnEnd": 13
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 288,
        "lineEnd": 288,
        "columnStart": 4,
        "columnEnd": 32
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 290,
        "lineEnd": 290,
        "columnStart": 4,
        "columnEnd": 58
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 293,
        "lineEnd": 293,
        "columnStart": 4,
        "columnEnd": 29
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 296,
        "lineEnd": 296,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 299,
        "lineEnd": 299,
        "columnStart": 4,
        "columnEnd": 34
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 300,
        "lineEnd": 300,
        "columnStart": 4,
        "columnEnd": 34
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 301,
        "lineEnd": 301,
        "columnStart": 4,
        "columnEnd": 34
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 304,
        "lineEnd": 304,
        "columnStart": 4,
        "columnEnd": 28
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 353,
        "lineEnd": 353,
        "columnStart": 4,
        "columnEnd": 32
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 36,
        "lineEnd": 154,
        "columnStart": 22,
        "columnEnd": 36
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 310,
        "lineEnd": 310,
        "columnStart": 4,
        "columnEnd": 26
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 313,
        "lineEnd": 313,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 326,
        "lineEnd": 331,
        "columnStart": 4,
        "columnEnd": 37
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 339,
        "lineEnd": 339,
        "columnStart": 4,
        "columnEnd": 59
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 341,
        "lineEnd": 341,
        "columnStart": 4,
        "columnEnd": 52
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 343,
        "lineEnd": 343,
        "columnStart": 4,
        "columnEnd": 54
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 350,
        "lineEnd": 350,
        "columnStart": 4,
        "columnEnd": 109
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 310,
        "lineEnd": 310,
        "columnStart": 4,
        "columnEnd": 26
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 313,
        "lineEnd": 313,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 326,
        "lineEnd": 331,
        "columnStart": 4,
        "columnEnd": 37
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 339,
        "lineEnd": 339,
        "columnStart": 4,
        "columnEnd": 59
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 341,
        "lineEnd": 341,
        "columnStart": 4,
        "columnEnd": 52
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 343,
        "lineEnd": 343,
        "columnStart": 4,
        "columnEnd": 54
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 350,
        "lineEnd": 350,
        "columnStart": 4,
        "columnEnd": 109
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 36,
        "lineEnd": 154,
        "columnStart": 22,
        "columnEnd": 36
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 310,
        "lineEnd": 310,
        "columnStart": 4,
        "columnEnd": 26
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 313,
        "lineEnd": 313,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 326,
        "lineEnd": 331,
        "columnStart": 4,
        "columnEnd": 37
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 339,
        "lineEnd": 339,
        "columnStart": 4,
        "columnEnd": 59
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 341,
        "lineEnd": 341,
        "columnStart": 4,
        "columnEnd": 52
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 343,
        "lineEnd": 343,
        "columnStart": 4,
        "columnEnd": 54
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 350,
        "lineEnd": 350,
        "columnStart": 4,
        "columnEnd": 109
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 310,
        "lineEnd": 310,
        "columnStart": 4,
        "columnEnd": 50
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 313,
        "lineEnd": 313,
        "columnStart": 4,
        "columnEnd": 54
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 326,
        "lineEnd": 331,
        "columnStart": 4,
        "columnEnd": 37
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 339,
        "lineEnd": 339,
        "columnStart": 4,
        "columnEnd": 83
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 341,
        "lineEnd": 341,
        "columnStart": 4,
        "columnEnd": 76
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 343,
        "lineEnd": 343,
        "columnStart": 4,
        "columnEnd": 78
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 350,
        "lineEnd": 350,
        "columnStart": 4,
        "columnEnd": 133
      }
    }
  ],
  "repairedDockerfile": "{% set prefix = DEFAULT_CONTAINER_REGISTRY %}\n{%- if CONFIGURED_ARCH == \"armhf\"  -%}\nFROM {{ prefix }}multiarch/debian-debootstrap:armhf-jessie\n{%- elif CONFIGURED_ARCH == \"arm64\" -%}\nFROM {{ prefix }}multiarch/debian-debootstrap:arm64-jessie\n{%- else -%}\nFROM {{ prefix }}debian:jessie\n{%- endif %}\n\nMAINTAINER johnar@microsoft.com\n\nCOPY [\"no-check-valid-until\", \"/etc/apt/apt.conf.d/\"]\n\n## Remove retired jessie-updates repo\nRUN sed -i '/http:\\/\\/deb.debian.org\\/debian jessie-updates main/d' /etc/apt/sources.list\n\nRUN echo \"deb [arch=amd64] http://debian-archive.trafficmanager.net/debian/ jessie main contrib non-free\" >> /etc/apt/sources.list && \\\n        echo \"deb-src [arch=amd64] http://debian-archive.trafficmanager.net/debian/ jessie main contrib non-free\" >> /etc/apt/sources.list && \\\n        echo \"deb [arch=amd64] http://debian-archive.trafficmanager.net/debian-security/ jessie/updates main contrib non-free\" >> /etc/apt/sources.list && \\\n        echo \"deb-src [arch=amd64] http://debian-archive.trafficmanager.net/debian-security/ jessie/updates main contrib non-free\" >> /etc/apt/sources.list\n\n{% if CONFIGURED_ARCH == \"armhf\" %}\nRUN echo \"deb [arch=armhf] http://deb.debian.org/debian jessie main contrib non-free\" > /etc/apt/sources.list && \\\n        echo \"deb-src [arch=armhf] http://deb.debian.org/debian jessie main contrib non-free\" >> /etc/apt/sources.list && \\\n        echo \"deb [arch=armhf] http://security.debian.org jessie/updates main contrib non-free\" >> /etc/apt/sources.list && \\\n        echo \"deb-src [arch=armhf] http://security.debian.org jessie/updates main contrib non-free\" >> /etc/apt/sources.list\n{% elif CONFIGURED_ARCH == \"arm64\" %}\nRUN echo \"deb [arch=arm64] http://archive.debian.org/debian jessie main contrib non-free\" > /etc/apt/sources.list && \\\n        echo \"deb-src [arch=arm64] http://archive.debian.org/debian jessie main contrib non-free\" >> /etc/apt/sources.list && \\\n        echo \"deb-src [arch=arm64] http://archive.debian.org/debian jessie-backports main contrib non-free\" >> /etc/apt/sources.list && \\\n        echo \"deb [arch=arm64] http://archive.debian.org/debian jessie-backports main contrib non-free\" >> /etc/apt/sources.list\n{% endif %}\n\n## Make apt-get non-interactive\nENV DEBIAN_FRONTEND=noninteractive\n\nRUN apt-get update && apt-get install --no-install-recommends -y \\\n        apt-utils \\\n        default-jre-headless \\\n        openssh-server \\\n        curl \\\n        wget \\\n        unzip \\\n        git \\\n        build-essential \\\n        libtool \\\n        lintian \\\n        sudo \\\n        dh-make \\\n        dh-exec \\\n        kmod \\\n        libtinyxml2-2 \\\n        libboost-program-options1.55-dev \\\n        libtinyxml2-dev \\\n        python \\\n        python-pip \\\n        libncurses5-dev \\\n        texinfo \\\n        dh-autoreconf \\\n        python3-pip \\\n        doxygen \\\n        devscripts \\\n        git-buildpackage \\\n        perl-modules \\\n        libswitch-perl \\\n        dh-systemd \\\n        jq \\\n\n        libreadline-dev \\\n        texlive-latex-base \\\n        texlive-generic-recommended \\\n        texlive-fonts-recommended \\\n        libpam0g-dev \\\n        libpam-dev \\\n        libcap-dev \\\n        imagemagick \\\n        ghostscript \\\n        groff \\\n        libpcre3-dev \\\n        gawk \\\n        chrpath \\\n\n        libc-ares-dev \\\n        hardening-wrapper \\\n        libsnmp-dev \\\n        libjson0 \\\n        libjson0-dev \\\n        libsystemd-dev \\\n        python-ipaddr \\\n        install-info \\\n\n        cdbs \\\n\n        libxml-simple-perl \\\n        graphviz \\\n        aspell \\\n\n        bc \\\n        fakeroot \\\n        build-essential \\\n        devscripts \\\n        quilt \\\n        stgit \\\n\n        module-assistant \\\n\n        gem2deb \\\n        libboost-all-dev \\\n        libevent-dev \\\n        libglib2.0-dev \\\n        libqt4-dev \\\n        python-all-dev \\\n        python-twisted \\\n        php5-dev \\\n        phpunit \\\n        libbit-vector-perl \\\n        openjdk-7-jdk \\\n        javahelper \\\n        maven-debian-helper \\\n        ant \\\n        libmaven-ant-tasks-java \\\n        libhttpclient-java \\\n        libslf4j-java \\\n        libservlet3.1-java \\\n        qt5-default \\\n        pkg-php-tools \\\n\n        libpcre3 \\\n        libpcre3-dev \\\n        byacc \\\n        flex \\\n        libglib2.0-dev \\\n        bison \\\n        expat \\\n        libexpat1-dev \\\n        dpatch \\\n        libdb-dev \\\n        iptables-dev \\\n        swig \\\n        ctags \\\n\n        libtool-bin \\\n        libxml2-dev \\\n\n        libusb-1.0-0-dev \\\n        libcurl3-nss-dev \\\n        libunwind8-dev \\\n        telnet \\\n        libc-ares2 \\\n        libgoogle-perftools4 \\\n\n        cpio \\\n        squashfs-tools \\\n        zip \\\n{%- if CONFIGURED_ARCH == \"amd64\" %} && rm -rf /var/lib/apt/lists/*;\n# For broadcom sdk build\n        linux-compiler-gcc-4.9-x86 \\\n{%- endif %}\n        linux-kbuild-3.16 \\\n# teamd build\n        libdaemon-dev \\\n        libdbus-1-dev \\\n        libjansson-dev \\\n# For cavium sdk build\n        libpcap-dev \\\n        dnsutils \\\n        libusb-dev \\\n# For debian image reconfiguration\n        augeas-tools \\\n# For p4 build\n        libyaml-dev \\\n        libevent-dev \\\n        libjudy-dev \\\n        libedit-dev \\\n        libnanomsg-dev \\\n        python-stdeb \\\n# For redis build\n        libjemalloc-dev \\\n# For mft kernel module build\n        dkms \\\n# For Jenkins static analysis, unit testing and code coverage\n        cppcheck \\\n        clang \\\n        pylint \\\n        gcovr \\\n        python-pytest=2.6.3* \\\n        python3-pytest=2.6.3* \\\n        python-pytest-cov \\\n        python3-pytest-cov \\\n        python-parse \\\n# For snmpd\n        libmysqlclient-dev \\\n        libmysqld-dev \\\n        libperl-dev \\\n        libpci-dev \\\n        libpci3 \\\n        libsensors4 \\\n        libsensors4-dev \\\n        libwrap0-dev \\\n# For mpdecimal\n        docutils-common \\\n        libjs-sphinxdoc \\\n        libjs-underscore \\\n        python-docutils \\\n        python-markupsafe \\\n        python-pygments \\\n        python-roman \\\n        sphinx-common \\\n# For sonic config engine testing\n        python-lxml \\\n        python-netaddr \\\n        python-ipaddr \\\n        python-yaml \\\n# For lockfile\n        procmail \\\n# For gtest\n        libgtest-dev \\\n        cmake \\\n# For pam_tacplus build\n        autoconf-archive \\\n# For python-based swsscommon\n        swig3.0 \\\n# For iproute2\n        cm-super-minimal \\\n        libatm1-dev \\\n        libelf-dev \\\n        libmnl-dev \\\n        libselinux1-dev \\\n        linuxdoc-tools \\\n        lynx \\\n        texlive-latex-extra \\\n        texlive-latex-recommended \\\n# For bash\n        texi2html \\\n        sharutils \\\n        locales \\\n        time \\\n        man2html-base \\\n        libcunit1 \\\n        libcunit1-dev \\\n# For initramfs\n        bash-completion \\\n# For audisp-tacplus\n        libauparse-dev \\\n        auditd \\\n{% if CONFIGURED_ARCH == \"amd64\" -%}\n# For sonic vs image build\n        dosfstools \\\n        qemu-kvm \\\n        libvirt-bin\n{%- else -%}\n        bash-completion\n{%- endif %}\n\n# For jenkins slave\n# RUN apt-get -y install ca-certificates-java=20161107~bpo8+1 openjdk-8-jdk\n\n# For linux build\n{% if CONFIGURED_ARCH != \"arm64\" %}\nRUN apt-get -y build-dep linux\n{%- endif %}\n\n# For gobgp and telemetry build\nRUN export VERSION=1.14.2 \\\n{%- if CONFIGURED_ARCH == \"armhf\" %}\n && wget https://storage.googleapis.com/golang/go$VERSION.linux-armv6l.tar.gz \\\n && tar -C /usr/local -xzf go$VERSION.linux-armv6l.tar.gz \\\n{%- elif CONFIGURED_ARCH == \"arm64\" %}\n && wget https://storage.googleapis.com/golang/go$VERSION.linux-arm64.tar.gz \\\n && tar -C /usr/local -xzf go$VERSION.linux-arm64.tar.gz \\\n{%- else %}\n && wget https://storage.googleapis.com/golang/go$VERSION.linux-amd64.tar.gz \\\n && tar -C /usr/local -xzf go$VERSION.linux-amd64.tar.gz \\\n{%- endif %}\n && echo 'export GOROOT=/usr/local/go' >> /etc/bash.bashrc \\\n && echo 'export PATH=$PATH:$GOROOT/bin' >> /etc/bash.bashrc \\\n && rm go$VERSION.linux-*.tar.gz\n\n# Upgrade pip2\n# Note: use pip2 specific version so jinja2 2.10 will install\nRUN python2 -m pip install -U pip==9.0.3\n\n# For p4 build\nRUN pip install --no-cache-dir \\\n        ctypesgen==0.r125 \\\n        crc16\n\n# For sonic config engine testing\nRUN pip install --no-cache-dir pyangbind==0.6.0\n# Note: force upgrade debian packaged jinja2, if installed\nRUN pip install --no-cache-dir --force-reinstall --upgrade \"jinja2>=2.10\"\n\n# For templating (requiring jinja2)\nRUN pip install --no-cache-dir j2cli==0.3.10\n\n# For vs image build\nRUN pip install --no-cache-dir pexpect==4.6.0\n\n# For sonic-utilities build\nRUN pip install --no-cache-dir mockredispy==2.9.3\nRUN pip install --no-cache-dir pytest-runner==4.4\nRUN pip install --no-cache-dir setuptools==40.8.0\n\n# For sonic-swss-common testing\nRUN pip install --no-cache-dir Pympler==0.8\n\n# Install dependencies for isc-dhcp-relay build\nRUN apt-get -y build-dep isc-dhcp\n\n# Install vim\nRUN apt-get install --no-install-recommends -y vim && rm -rf /var/lib/apt/lists/*;\n\n# Install rsyslog\nRUN apt-get install --no-install-recommends -y rsyslog && rm -rf /var/lib/apt/lists/*;\n\nRUN cd /usr/src/gtest && cmake . && make -C /usr/src/gtest\n\nRUN mkdir /var/run/sshd\nEXPOSE 22\n\n# Install depot-tools (for git-retry)\nRUN git clone https://chromium.googlesource.com/chromium/tools/depot_tools.git /usr/share/depot_tools\nENV PATH /usr/share/depot_tools:$PATH\n\n# Install docker engine 17.03.2~ce-0 inside docker and enable experimental feature\nRUN apt-get update\nRUN apt-get install --no-install-recommends -y \\\n           apt-transport-https \\\n           ca-certificates \\\n           curl \\\n           gnupg2 \\\n           software-properties-common && rm -rf /var/lib/apt/lists/*;\nRUN curl -fsSL https://download.docker.com/linux/debian/gpg | sudo apt-key add -\nRUN add-apt-repository \\\n           \"deb [arch={{ CONFIGURED_ARCH }}] https://download.docker.com/linux/debian \\\n           $(lsb_release -cs) \\\n           stable\"\nRUN apt-get update\n{%- if CONFIGURED_ARCH == \"amd64\" %}\nRUN apt-get install --no-install-recommends -y docker-ce=17.03.2~ce-0~debian-jessie && rm -rf /var/lib/apt/lists/*;\n{%- elif CONFIGURED_ARCH == \"arm64\" %}\nRUN apt-get install --no-install-recommends -y docker-ce=18.03.1~ce-0~debian && rm -rf /var/lib/apt/lists/*;\n{%- elif CONFIGURED_ARCH == \"armhf\" %}\nRUN apt-get install --no-install-recommends -y docker-ce=18.06.3~ce~3-0~debian && rm -rf /var/lib/apt/lists/*;\n{%- endif %}\nRUN echo \"DOCKER_OPTS=\\\"--experimental --storage-driver=vfs {{ DOCKER_EXTRA_OPTS }}\\\"\" >> /etc/default/docker\n\n# For jenkins slave\nRUN echo \"deb [arch={{ CONFIGURED_ARCH }}] http://archive.debian.org/debian jessie-backports main\" >> /etc/apt/sources.list\nRUN apt-get -o Acquire::Check-Valid-Until=false update\nRUN apt-get -y --no-install-recommends -o Acquire::Check-Valid-Until=false install ca-certificates-java=20161107~bpo8+1 openjdk-8-jdk && rm -rf /var/lib/apt/lists/*;\n\n# Install m2crypto package, needed by SWI tools\nRUN pip install --no-cache-dir m2crypto==0.36.0\n\n# Install swi tools\nRUN python -m pip install git+https://github.com/aristanetworks/swi-tools.git@d51761ec0bb93c73039233f3c01ed48235ffad00\n\n# Install Bazel build system (amd64 and arm64 architectures are supported using this method)\n# TODO(PINS): Remove once pre-build Bazel binaries are available for armhf (armv7l)\n{%- if CONFIGURED_ARCH == \"amd64\" or CONFIGURED_ARCH == \"arm64\" %}\nARG bazelisk_url=https://github.com/bazelbuild/bazelisk/releases/latest/download/bazelisk-linux-{{ CONFIGURED_ARCH }}\nRUN curl -fsSL -o /usr/local/bin/bazel ${bazelisk_url} && chmod 755 /usr/local/bin/bazel\n{% endif -%}\n"
}