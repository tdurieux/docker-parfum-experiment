{
  "startTime": 1674217381400,
  "endTime": 1674217381932,
  "originalSmells": [
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 13,
        "lineEnd": 21,
        "columnStart": 4,
        "columnEnd": 17
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 10,
        "lineEnd": 11,
        "columnStart": 7,
        "columnEnd": 15
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 10,
        "lineEnd": 11,
        "columnStart": 7,
        "columnEnd": 15
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "{% from \"dockers/dockerfile-macros.j2\" import install_debian_packages, install_python_wheels, copy_files %}\nFROM docker-ptf-{{DOCKER_USERNAME}}:{{DOCKER_USERTAG}}\n\n# Make apt-get non-interactive\nENV DEBIAN_FRONTEND=noninteractive\n\n# Set the apt source, update package cache and install necessary packages\nRUN apt-get update              \\\n    && apt-get upgrade -y       \\\n    && apt-get dist-upgrade -y \\\n    && apt-get install --no-install-recommends -y \\\n    python3-pip && rm -rf /var/lib/apt/lists/*;\n\nRUN pip3 install --no-cache-dir crc16 \\\n        netifaces \\\n        getmac \\\n        packet_helper \\\n        psutil \\\n        scapy==2.4.4 \\\n        scapy_helper \\\n        pysubnettree \\\n        xmlrunner\n\nCOPY \\\n{% for deb in docker_ptf_sai_debs.split(' ') -%}\ndebs/{{ deb }}{{' '}}\n{%- endfor -%}\ndebs/\n\nRUN dpkg -i \\\n{% for deb in docker_ptf_sai_debs.split(' ') -%}\ndebs/{{ deb }}{{' '}}\n{%- endfor %}\n\n# Remove old ptf package\nRUN dpkg -r python-ptf\n\n# Install new ptf package\nRUN git clone https://github.com/p4lang/ptf.git \\\n        && cd ptf                               \\\n        && python3.7 setup.py install --single-version-externally-managed --record /tmp/ptf_install.txt\n"
}