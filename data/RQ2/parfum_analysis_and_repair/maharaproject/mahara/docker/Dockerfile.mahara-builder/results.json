{
  "startTime": 1674255683328,
  "endTime": 1674255684238,
  "originalSmells": [
    {
      "rule": "npmCacheCleanAfterInstall",
      "position": {
        "lineStart": 33,
        "lineEnd": 33,
        "columnStart": 7,
        "columnEnd": 35
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 20,
        "lineEnd": 31,
        "columnStart": 22,
        "columnEnd": 10
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 20,
        "lineEnd": 31,
        "columnStart": 22,
        "columnEnd": 10
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "# Creates an image that can be used to build and test Mahara.\n#\n# The image is created for the person that will use it to prevent built files\n# being owned by other users.\n#\nARG BASE_IMAGE=mahara-base\nFROM ${BASE_IMAGE}\n\nARG IMAGE_UID=1000\nARG IMAGE_GID=1000\n\n# Set the enviroment variable as non interactive\nARG DEBIAN_FRONTEND=noninteractive\n\n# Setup the builder user\nRUN set -o errexit -o nounset \\\n    && groupadd --system --gid ${IMAGE_GID} builder \\\n    && useradd --system --gid builder --uid ${IMAGE_UID} --shell /bin/bash --create-home builder\n\n# Install dependencies\nRUN apt-get update && apt-get -y --no-install-recommends install \\\n      curl \\\n      git \\\n      lsof \\\n      make \\\n      nodejs-dev \\\n      node-gyp \\\n      npm \\\n      openjdk-8-jre-headless \\\n      unzip \\\n      wget \\\n      xvfb \\\n    && npm config set prefix /usr/local \\\n    && npm install -g gulp --silent && npm cache clean --force; && rm -rf /var/lib/apt/lists/*;\n\n# Create docbuilder/source volume\n# We expect this to be volume mounted to supply the document source files\nVOLUME \"/opt/mahara\"\nWORKDIR /opt/mahara\n\nRUN chown ${IMAGE_UID}:${IMAGE_GID} /opt/mahara\n\nUSER builder\n\nENTRYPOINT [\"make\"]\n"
}