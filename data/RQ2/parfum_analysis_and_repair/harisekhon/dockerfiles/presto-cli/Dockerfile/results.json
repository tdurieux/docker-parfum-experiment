{
  "startTime": 1674253239728,
  "endTime": 1674253240421,
  "originalSmells": [
    {
      "rule": "yumInstallRmVarCacheYum",
      "position": {
        "lineStart": 22,
        "lineEnd": 22,
        "columnStart": 4,
        "columnEnd": 63
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "#\n#  Author: Hari Sekhon\n#  Date: 2017-09-13 14:47:23 +0200 (Wed, 13 Sep 2017)\n#\n#  vim:ts=4:sts=4:sw=4:et\n#\n#  https://github.com/HariSekhon/Dockerfiles\n#\n#  If you're using my code you're welcome to connect with me on LinkedIn and optionally send me feedback to help improve or steer this or other code I publish\n#\n#  https://www.linkedin.com/in/HariSekhon\n#\n\n# nosemgrep: dockerfile.audit.dockerfile-source-not-pinned.dockerfile-source-not-pinned\nFROM centos:7\n\n# cache the std packages between tagged versions for space efficiency, must have this above ARG\n\n# bash   => entrypoint.sh\n# java   => presto cli\n# less   => presto pager\nRUN set -eux && \\\n    yum install -y bash java-1.8.0-openjdk-headless.x86_64 less && \\\n    yum clean all && rm -rf /var/cache/yum\n\nARG PRESTO_VERSION=0.179\nARG PRESTO_PKG_RELEASE=0.1\n\nLABEL org.opencontainers.image.description=\"Presto SQL\" \\\n      org.opencontainers.image.version=\"$PRESTO_VERSION\" \\\n      org.opencontainers.image.authors=\"Hari Sekhon (https://www.linkedin.com/in/HariSekhon)\" \\\n      org.opencontainers.image.url=\"https://ghcr.io/HariSekhon/presto-cli\" \\\n      org.opencontainers.image.documentation=\"https://hub.docker.com/r/harisekhon/presto-cli\" \\\n      org.opencontainers.image.source=\"https://github.com/HariSekhon/Dockerfiles\"\n\nWORKDIR /\n\n# for faster build testing without having to download\n#COPY $CLI_TAR /\n\nRUN set -eux && \\\n    CLI_TAR=\"presto_client_pkg.${PRESTO_VERSION}-t.${PRESTO_PKG_RELEASE}.tar.gz\" && \\\n    CLI_TAR_DIR=\"presto_client_pkg.${PRESTO_VERSION}-t.${PRESTO_PKG_RELEASE}\" && \\\n    CLI_JAR=\"presto-cli-${PRESTO_VERSION}-t.${PRESTO_PKG_RELEASE}-executable.jar\" && \\\n    CLI_URL=\"http://teradata-presto.s3.amazonaws.com/release-packages/${PRESTO_VERSION}-t.${PRESTO_PKG_RELEASE}/$CLI_TAR\" && \\\n    yum install -y wget tar && \\\n    wget -c -t 10 --retry-connrefused -O \"$CLI_TAR\" \"$CLI_URL\" && \\\n    tar zxvf \"$CLI_TAR\" && \\\n    mv -iv \"$CLI_TAR_DIR/$CLI_JAR\" . && \\\n    chmod +x \"$CLI_JAR\" && \\\n    ln -sv \"/$CLI_JAR\" /usr/bin/presto && \\\n    # get rid of all the other unneeded drivers to save space\n    rm -fr \"$CLI_TAR\" \"$CLI_TAR_DIR\" && \\\n    yum remove -y wget && \\\n    yum autoremove -y && \\\n    yum clean all && \\\n    rm -rf /var/cache/yum\n\nENTRYPOINT [\"/usr/bin/presto\"]\n"
}