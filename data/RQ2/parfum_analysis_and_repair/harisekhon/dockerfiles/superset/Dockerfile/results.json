{
  "startTime": 1674248154733,
  "endTime": 1674248155703,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 102,
        "lineEnd": 102,
        "columnStart": 4,
        "columnEnd": 91
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 54,
        "lineEnd": 84,
        "columnStart": 4,
        "columnEnd": 28
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 86,
        "lineEnd": 86,
        "columnStart": 4,
        "columnEnd": 24
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "#\n#  Author: Hari Sekhon\n#  Date: 2017-08-22 14:16:43 +0200 (Tue, 22 Aug 2017)\n#\n#  vim:ts=4:sts=4:sw=4:et\n#\n#  https://github.com/HariSekhon/Dockerfiles\n#\n#  If you're using my code you're welcome to connect with me on LinkedIn and optionally send me feedback to help improve or steer this or other code I publish\n#\n#  https://www.linkedin.com/in/HariSekhon\n#\n\n# nosemgrep: dockerfile.audit.dockerfile-source-not-pinned.dockerfile-source-not-pinned\nFROM centos:8\n\nARG SUPERSET_VERSION=0.30.1\nARG AVATICA_VERSION=1.17.0\n\nLABEL org.opencontainers.image.description=\"SuperSet (open source Analytics UI by AirBNB)\" \\\n      org.opencontainers.image.version=\"$SUPERSET_VERSION\" \\\n      org.opencontainers.image.authors=\"Hari Sekhon (https://www.linkedin.com/in/HariSekhon)\" \\\n      org.opencontainers.image.url=\"https://ghcr.io/HariSekhon/superset\" \\\n      org.opencontainers.image.documentation=\"https://hub.docker.com/r/harisekhon/superset\" \\\n      org.opencontainers.image.source=\"https://github.com/HariSekhon/Dockerfiles\"\n\nWORKDIR /\n\n# Apache Calcite's Avatica JDBC driver for connecting to Druid\nRUN mkdir -pv /home/avatica/classpath\nADD https://repository.apache.org/content/groups/public/org/apache/calcite/avatica/avatica-noop-driver/${AVATICA_VERSION}/avatica-noop-driver-${AVATICA_VERSION}.jar /home/avatica/classpath\n\nENV CLASSPATH=/home/avatica/classpath\n\nSHELL [\"/bin/bash\", \"-euxo\", \"pipefail\", \"-c\"]\n\n# Java needed for Apache Calcite's Avatica driver\n# hadolint ignore=DL3013\nRUN yum install -y epel-release && \\\n    yum install -y \\\n        java-headless && \\\n        gcc \\\n        gcc-c++ \\\n        libffi-devel \\\n        python3-devel \\\n        python3-pip \\\n        python3-wheel \\\n        openssl-devel \\\n        cyrus-sasl-devel \\\n        openldap-devel \\\n        mysql-devel && \\\n    alternatives --set python /usr/bin/python3 && \\\n    alternatives --install /usr/bin/pip pip /usr/bin/pip3 100 && \\\n    # 0.30.1 needs tonnes of Python dependencies when booting superset that are not automatically pulled in, found by iterative testing :-/\n    pip install --no-cache-dir mysqlclient \\\n                pyhive \\\n                backoff \\\n                contextlib2 \\\n                croniter \\\n                cryptography \\\n                flask \\\n                flask-appbuilder \\\n                flask-caching \\\n                flask-compress \\\n                flask-migrate \\\n                flask-talisman \\\n                bleach \\\n                celery \\\n                humanize \\\n                python-geohash \\\n                geopy \\\n                isodate \\\n                markdown \\\n                msgpack \\\n                numpy \\\n                pandas \\\n                parsedatetime \\\n                pathlib2 \\\n                polyline \\\n                pyarrow \\\n                retry \\\n                selenium \\\n                sqlparse \\\n                simplejson \\\n                wtforms-json && \\\n    # built on Superset 0.19 originally, update tested on 0.30.1\n    pip install --no-cache-dir superset && \\\n    printf 'admin\\nadmin\\nuser\\nroot@localhost\\nadmin\\nadmin\\n' | \\\n    superset fab create-admin && \\\n    superset db upgrade && \\\n    superset load-examples && \\\n    superset init && \\\n    yum remove -y \\\n        gcc \\\n        gcc-c++ \\\n        libffi-devel \\\n        python-devel \\\n        openssl-devel \\\n        cyrus-sasl-devel \\\n        openldap-devel \\\n        mysql-devel && \\\n    yum autoremove -y && \\\n    curl -f -sS https://raw.githubusercontent.com/HariSekhon/bash-tools/master/clean_caches.sh | sh && \\\n    yum clean all && \\\n    rm -rf /var/cache/yum\n\nEXPOSE 8088\n\nSHELL [\"/bin/bash\"]\n\n# hadolint ignore=DL3025\nCMD /usr/local/bin/superset run -h 0.0.0.0 -p 8088\n"
}