{
  "startTime": 1674250976148,
  "endTime": 1674250977866,
  "originalSmells": [
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 20,
        "lineEnd": 20,
        "columnStart": 4,
        "columnEnd": 22
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 64,
        "lineEnd": 64,
        "columnStart": 4,
        "columnEnd": 21
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 66,
        "lineEnd": 66,
        "columnStart": 4,
        "columnEnd": 21
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 67,
        "lineEnd": 67,
        "columnStart": 4,
        "columnEnd": 22
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 112,
        "lineEnd": 112,
        "columnStart": 4,
        "columnEnd": 35
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 46,
        "lineEnd": 46,
        "columnStart": 34,
        "columnEnd": 66
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 16,
        "lineEnd": 16,
        "columnStart": 4,
        "columnEnd": 98
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 19,
        "lineEnd": 19,
        "columnStart": 4,
        "columnEnd": 45
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 21,
        "lineEnd": 21,
        "columnStart": 4,
        "columnEnd": 34
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 35,
        "lineEnd": 35,
        "columnStart": 2,
        "columnEnd": 34
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 57,
        "lineEnd": 57,
        "columnStart": 4,
        "columnEnd": 57
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 58,
        "lineEnd": 58,
        "columnStart": 4,
        "columnEnd": 63
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 61,
        "lineEnd": 61,
        "columnStart": 4,
        "columnEnd": 58
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 65,
        "lineEnd": 65,
        "columnStart": 4,
        "columnEnd": 40
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 70,
        "lineEnd": 70,
        "columnStart": 4,
        "columnEnd": 37
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 16,
        "lineEnd": 16,
        "columnStart": 4,
        "columnEnd": 98
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 19,
        "lineEnd": 19,
        "columnStart": 4,
        "columnEnd": 45
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 21,
        "lineEnd": 21,
        "columnStart": 4,
        "columnEnd": 34
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 35,
        "lineEnd": 35,
        "columnStart": 2,
        "columnEnd": 34
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 57,
        "lineEnd": 57,
        "columnStart": 4,
        "columnEnd": 57
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 58,
        "lineEnd": 58,
        "columnStart": 4,
        "columnEnd": 63
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 61,
        "lineEnd": 61,
        "columnStart": 4,
        "columnEnd": 58
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 65,
        "lineEnd": 65,
        "columnStart": 4,
        "columnEnd": 40
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 70,
        "lineEnd": 70,
        "columnStart": 4,
        "columnEnd": 37
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 16,
        "lineEnd": 16,
        "columnStart": 4,
        "columnEnd": 98
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 19,
        "lineEnd": 19,
        "columnStart": 4,
        "columnEnd": 45
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 21,
        "lineEnd": 21,
        "columnStart": 4,
        "columnEnd": 34
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 57,
        "lineEnd": 57,
        "columnStart": 4,
        "columnEnd": 57
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 58,
        "lineEnd": 58,
        "columnStart": 4,
        "columnEnd": 63
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 61,
        "lineEnd": 61,
        "columnStart": 4,
        "columnEnd": 58
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 65,
        "lineEnd": 65,
        "columnStart": 4,
        "columnEnd": 40
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 70,
        "lineEnd": 70,
        "columnStart": 4,
        "columnEnd": 37
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 16,
        "lineEnd": 16,
        "columnStart": 4,
        "columnEnd": 122
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 19,
        "lineEnd": 19,
        "columnStart": 4,
        "columnEnd": 69
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 21,
        "lineEnd": 21,
        "columnStart": 4,
        "columnEnd": 58
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 35,
        "lineEnd": 35,
        "columnStart": 2,
        "columnEnd": 58
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 57,
        "lineEnd": 57,
        "columnStart": 4,
        "columnEnd": 81
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 58,
        "lineEnd": 58,
        "columnStart": 4,
        "columnEnd": 87
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 61,
        "lineEnd": 61,
        "columnStart": 4,
        "columnEnd": 82
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 65,
        "lineEnd": 65,
        "columnStart": 4,
        "columnEnd": 64
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 70,
        "lineEnd": 70,
        "columnStart": 4,
        "columnEnd": 61
      }
    }
  ],
  "repairedDockerfile": "# ==============================================================================\n#\n# This Dockerfile contains all the commands required to set up an environment\n# for using EstimationPy\n#\n\nFROM ubuntu:14.04\n\nMAINTAINER lbl-srg\n\n# Avoid interaction\nENV DEBIAN_FRONTEND noninteractive\n\n# =========== Basic Configuration ===============================================\n# Update the system\nRUN apt-get -y update\nRUN apt-get install --no-install-recommends -y build-essential git python python-dev python-setuptools make cmake gfortran && rm -rf /var/lib/apt/lists/*;\n\n# Install pip for managing python packages\nRUN apt-get install --no-install-recommends -y python-pip python-lxml && rm -rf /var/lib/apt/lists/*;\nRUN pip install --no-cache-dir cython\nRUN apt-get install --no-install-recommends -y python-lxml && rm -rf /var/lib/apt/lists/*;\n\n# Add folders that will contains code before and after installation\nRUN mkdir -p /home/docker/to_install\nRUN mkdir -p /home/docker/installed\n\n# Create an user and an environmental variable associated to it\nRUN adduser --disabled-password --gecos '' docker\nRUN adduser docker sudo\nRUN echo '%sudo ALL=(ALL) NOPASSWD:ALL' >> /etc/sudoers\n\n# =========== Install JAVA =======================================================\n# Install Java (Open JDK, version 7)\nRUN \\\n  apt-get install --no-install-recommends -y openjdk-7-jdk && \\\n  rm -rf /var/lib/apt/lists/*\n\n# Define commonly used JAVA_HOME variable\nENV JAVA_HOME /usr/lib/jvm/java-7-openjdk-amd64\nRUN echo \"export JAVA_HOME=/usr/lib/jvm/java-7-openjdk-amd64\" >> /root/.bashrc\nRUN echo \"export JAVA_HOME=/usr/lib/jvm/java-7-openjdk-amd64\" >> /home/docker/.bashrc\n\n# =========== Install PyFMI dependencies ======================================================\n# Install Sundials ODE, DAE\nCOPY ./softwares/sundials-2.5.0.tar.gz /home/docker/to_install/\nRUN cd /home/docker/to_install && tar xzvf ./sundials-2.5.0.tar.gz && rm ./sundials-2.5.0.tar.gz\nWORKDIR /home/docker/to_install/sundials-2.5.0\nRUN mkdir -p build\nWORKDIR /home/docker/to_install/sundials-2.5.0/build\nRUN ../configure CFLAGS=\"-fPIC\" --prefix=/home/docker/installed/sundials-2.5.0\nRUN make && make install && make clean\n\nWORKDIR /home/docker\n\n# Install BLAS and LAPACK\nRUN apt-get update\nRUN apt-get install --no-install-recommends -y libblas3gf libblas-doc libblas-dev && rm -rf /var/lib/apt/lists/*;\nRUN apt-get install --no-install-recommends -y liblapack3gf liblapack-doc liblapack-dev && rm -rf /var/lib/apt/lists/*;\n\n# Other dependencies required before installing pylab and Matplotlib\nRUN apt-get install --no-install-recommends -y pkgconf libpng-dev libfreetype6-dev && rm -rf /var/lib/apt/lists/*;\n\n# Install Numpy, Matplotlib, SciPy and Pandas\nRUN pip install --no-cache-dir numpy\nRUN apt-get install --no-install-recommends -y python-matplotlib && rm -rf /var/lib/apt/lists/*;\nRUN pip install --no-cache-dir scipy\nRUN pip install --no-cache-dir pandas\n\n# Install svn and git\nRUN apt-get install --no-install-recommends -y git subversion && rm -rf /var/lib/apt/lists/*;\n\n# Install assimulo\nRUN cd /home/docker/to_install && svn checkout https://svn.jmodelica.org/assimulo/tags/Assimulo-2.8/\nWORKDIR /home/docker/to_install/Assimulo-2.8\nRUN python setup.py install --sundials-home=/home/docker/installed/sundials-2.5.0/ --blas-home=/usr/lib/lapack/\n\n# Install FMILib\nRUN cd /home/docker/to_install/ && svn checkout https://svn.jmodelica.org/FMILibrary/tags/2.0.1/ FMILibrary-2.0.1\nRUN cd /home/docker/to_install && ls -la\nWORKDIR /home/docker/to_install/FMILibrary-2.0.1/\nRUN ls -la\nRUN mkdir -p build-fmil\nWORKDIR /home/docker/to_install/FMILibrary-2.0.1/build-fmil\nRUN cmake -DFMILIB_INSTALL_PREFIX=/home/docker/installed/FMIlib2.0.1 \\\n/home/docker/to_install/FMILibrary-2.0.1\nRUN make install test\n\n# Finally install PyFMI\nRUN cd /home/docker/to_install/ && svn checkout https://svn.jmodelica.org/PyFMI/tags/PyFMI-2.0b1/\nWORKDIR /home/docker/to_install/PyFMI-2.0b1\nRUN python setup.py install --fmil-home=/home/docker/installed/FMIlib2.0.1/\n\n# Create \"dummy\" Dymola license file. It is also required by FMUs that are exported in\n# binary export mode\nRUN mkdir -p /home/docker/.dynasim\nRUN touch /home/docker/.dynasim/dymola.lic\nRUN echo \"SERVER yourserver.com ANY\" >> /home/docker/.dynasim/dymola.lic\nRUN echo \"VENDOR dynasim\" >> /home/docker/.dynasim/dymola.lic\nRUN echo \"USE_SERVER\" >> /home/docker/.dynasim/dymola.lic\n\nENV DYMOLA_RUNTIME_LICENSE \"/home/ubuntu/.dynasim/dymola.lic\"\nRUN echo \"export DYMOLA_RUNTIME_LICENSE=/home/ubuntu/.dynasim/dymola.lic\" >> /root/.bashrc\nRUN echo \"export DYMOLA_RUNTIME_LICENSE=/home/ubuntu/.dynasim/dymola.lic\" >> /home/docker/.bashrc\n\n# Install EstimationPy\nRUN cd /home/docker/to_install && git clone https://github.com/lbl-srg/EstimationPy.git \\\n  && cd ./EstimationPy && python setup.py install\n\nWORKDIR /home/docker\n\n# Install ipython notebook\nRUN pip install --no-cache-dir \"ipython[notebook]\"\n\n# Change ownership of the content of /home/docker\nRUN chown -R docker:docker /home/docker/\n\n# Change user to docker\nUSER docker\n\n# Create folder that will be used as a shared volume\nRUN mkdir -p /home/docker/shared_folder\nVOLUME [\"/home/docker/shared_folder\"]\n\n# Create environmental variables for the display\nENV DISPLAY :0.0\nENV USER docker\n\n# Expose the port where the ipython notebook server will listen\nEXPOSE 8888\n\n# Command to run by default in detached mode\nCMD ipython notebook --ip=\"0.0.0.0\" --port=8888 --notebook-dir=/home/docker/shared_folder --no-browser"
}