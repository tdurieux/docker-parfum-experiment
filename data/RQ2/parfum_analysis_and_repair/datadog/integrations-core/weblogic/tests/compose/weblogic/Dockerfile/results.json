{
  "startTime": 1674249245943,
  "endTime": 1674249247244,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 56,
        "lineEnd": 56,
        "columnStart": 21,
        "columnEnd": 99
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 60,
        "lineEnd": 60,
        "columnStart": 4,
        "columnEnd": 82
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "#Copyright (c) 2014, 2020, Oracle and/or its affiliates.\n#\n#Licensed under the Universal Permissive License v 1.0 as shown at https://oss.oracle.com/licenses/upl.\n#\n# ADAPTED FROM THE ORACLE DOCKERFILES PROJECT\n# -------------------------------------------\n# https://github.com/oracle/docker-images/tree/main/OracleWebLogic/samples\n\n# This Dockerfile extends the Oracle WebLogic image by creating a sample domain and deploys a sample application.\n#\n# Pull base image\n# ---------------\nARG WEBLOGIC_VERSION\n\nFROM container-registry.oracle.com/middleware/weblogic:${WEBLOGIC_VERSION} as wls_base\n\nARG APPLICATION_NAME=\"${APPLICATION_NAME:-sample}\"\nARG APPLICATION_PKG=\"${APPLICATION_PKG:-archive.zip}\"\nARG CUSTOM_DOMAIN_NAME=\"${CUSTOM_DOMAIN_NAME:-domain1}\"\nARG CUSTOM_ADMIN_PORT=\"${CUSTOM_ADMIN_PORT:-7001}\"\nARG CUSTOM_ADMIN_SERVER_SSL_PORT=\"${CUSTOM_ADMIN_SERVER_SSL_PORT:-7002}\"\nARG CUSTOM_MANAGED_SERVER_PORT=\"${CUSTOM_MANAGED_SERVER_PORT:-8001}\"\nARG CUSTOM_MANAGED_SERVER_SSL_PORT=\"${CUSTOM_MANAGED_SERVER_SSL_PORT:-8002}\"\nARG CUSTOM_DEBUG_PORT=\"${CUSTOM_DEBUG_PORT:-8453}\"\nARG CUSTOM_ADMIN_NAME=\"${CUSTOM_ADMIN_NAME:-admin-server}\"\nARG CUSTOM_ADMIN_HOST=\"${CUSTOM_ADMIN_HOST:-wlsadmin}\"\nARG CUSTOM_CLUSTER_NAME=\"${CUSTOM_CLUSTER_NAME:-cluster-1}\"\nARG CUSTOM_CLUSTER_TYPE=\"${CUSTOM_CLUSTER_TYPE:-DYNAMIC}\"\nARG CUSTOM_SSL_ENABLED=\"${CUSTOM_SSL_ENABLED:-false}\"\n\n\n\n# WLS Configuration\n# ---------------------------\nENV APP_NAME=\"${APPLICATION_NAME}\" \\\n    APP_FILE=\"${APPLICATION_NAME}.war\" \\\n    APP_PKG_FILE=\"${APPLICATION_PKG}\" \\\n    ORACLE_HOME=/u01/oracle \\\n    PROPERTIES_FILE_DIR=\"/u01/oracle/properties\" \\\n    SSL_ENABLED=\"${CUSTOM_SSL_ENABLED}\" \\\n    DOMAIN_NAME=\"${CUSTOM_DOMAIN_NAME}\" \\\n    DOMAIN_HOME=\"/u01/oracle/user_projects/domains/${CUSTOM_DOMAIN_NAME}\" \\\n    ADMIN_PORT=\"${CUSTOM_ADMIN_PORT}\" \\\n    ADMIN_SERVER_SSL_PORT=\"${CUSTOM_ADMIN_SERVER_SSL_PORT}\" \\\n    ADMIN_NAME=\"${CUSTOM_ADMIN_NAME}\" \\\n    ADMIN_HOST=\"${CUSTOM_ADMIN_HOST}\" \\\n    CLUSTER_NAME=\"${CUSTOM_CLUSTER_NAME}\" \\\n    MANAGED_SERVER_PORT=\"${CUSTOM_MANAGED_SERVER_PORT}\" \\\n    MANAGED_SERVER_SSL_PORT=\"${CUSTOM_MANAGED_SERVER_SSL_PORT}\" \\\n#    MANAGED_SERV_NAME=\"${CUSTOM_MANAGED_SERV_NAME}\" \\\n    DEBUG_PORT=\"8453\" \\\n    PATH=$PATH:/u01/oracle/oracle_common/common/bin:/u01/oracle/wlserver/common/bin:${DOMAIN_HOME}:${DOMAIN_HOME}/bin:/u01/oracle\n\n# Retrieve the files required to build this image\n\n# https://github.com/oracle/docker-images/tree/d64e2b42e81ef036057de0d03f7561e1fb5192bb/OracleWebLogic/samples/12213-deploy-application\nRUN cd /u01/oracle & curl -f -L https://github.com/oracle/docker-images/archive/refs/heads/main.tar.gz | tar xz --strip=4 \"docker-images-main/OracleWebLogic/samples/12213-deploy-application/sample\" \"docker-images-main/OracleWebLogic/samples/12213-deploy-application/build-archive.sh\"\n\n# https://github.com/oracle/docker-images/tree/1e26820b44c393944b20f0ae069670538a2e37ef/OracleWebLogic/samples/12213-domain-home-in-image/container-scripts\n\nRUN curl -f -L https://github.com/oracle/docker-images/archive/refs/heads/main.tar.gz | tar xz --strip=5 \"docker-images-main/OracleWebLogic/samples/12213-domain-home-in-image/container-scripts\" \"docker-images-main/OracleWebLogic/samples/12213-deploy-application/container-scripts\"\n\n\nCOPY --chown=oracle:root setup_scripts/* /u01/oracle/\n\n#Create directory where domain will be written to\nUSER root\nRUN chmod +xw /u01/oracle/*.sh && \\\n    chmod +xw /u01/oracle/*.py && \\\n    mkdir -p ${PROPERTIES_FILE_DIR} && \\\n    mkdir -p $DOMAIN_HOME && \\\n    chown -R oracle:root $DOMAIN_HOME/.. && \\\n    chown -R oracle:root ${PROPERTIES_FILE_DIR}\n\n\nCOPY --chown=oracle:root properties/docker-build/domain*.properties ${PROPERTIES_FILE_DIR}/\n\n# Configuration of WLS Domain\nUSER oracle\nRUN /u01/oracle/createWLSDomain.sh && \\\n    chmod -R g+w $DOMAIN_HOME && \\\n    echo \". $DOMAIN_HOME/bin/setDomainEnv.sh\" >> /u01/oracle/.bashrc\n\n\nRUN /u01/oracle/build-archive.sh\nRUN /u01/oracle/setEnv.sh ${PROPERTIES_FILE_DIR}/docker-build/domain.properties\n\n# Expose ports for admin, managed server, and debug\nEXPOSE $ADMIN_PORT $ADMIN_SERVER_SSL_PORT $MANAGED_SERVER_PORT $MANAGED_SERVER_SSL_PORT $DEBUG_PORT\n\n\n# Build from WebLogic Server Base Image\nFROM wls_base\n\nWORKDIR $DOMAIN_HOME\n\n# Deploy sample application in WLST Offline mode\n\nRUN cd /u01/oracle & $JAVA_HOME/bin/jar xf /u01/oracle/$APP_PKG_FILE && \\\n    /u01/oracle/deployAppToDomain.sh\n\n# Define default command to start bash.\nCMD [\"startAdminServer.sh\"]\n"
}