{
  "startTime": 1674254958815,
  "endTime": 1674254959579,
  "originalSmells": [
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 43,
        "lineEnd": 48,
        "columnStart": 4,
        "columnEnd": 39
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "# refer : https://github.com/docker-library/mongo\n# license : Apache-2.0 License\n# https://github.com/docker-library/mongo/blob/master/LICENSE\n\nRUN install_packages gnupg\n\n# pub   rsa4096 2019-05-28 [SC] [expires: 2024-05-26]\n#       2069 1EEC 3521 6C63 CAF6  6CE1 6564 08E3 90CF B1F5\n# uid           [ unknown] MongoDB 4.4 Release Signing Key <packaging@mongodb.com>\n\nARG GPG_KEYS=20691EEC35216C63CAF66CE1656408E390CFB1F5\n\nRUN set -ex; \\\n\texport GNUPGHOME=\"$(mktemp -d)\"; \\\n\tfor key in $GPG_KEYS; do \\\n\t\tgpg --batch --keyserver keyserver.ubuntu.com --recv-keys \"$key\"; \\\n\tdone; \\\n\tgpg --batch --export $GPG_KEYS > /etc/apt/trusted.gpg.d/mongodb.gpg; \\\n\tcommand -v gpgconf > /dev/null && gpgconf --kill all || :; \\\n\trm -fr \"$GNUPGHOME\"; \\\n\tapt-key list\n\n# Allow build-time overrides (eg. to build image with MongoDB Enterprise version)\n# Options for MONGO_PACKAGE: mongodb-org OR mongodb-enterprise\n# Options for MONGO_REPO: repo.mongodb.org OR repo.mongodb.com\n# Example: docker build --build-arg MONGO_PACKAGE=mongodb-enterprise --build-arg MONGO_REPO=repo.mongodb.com .\nARG MONGO_PACKAGE=mongodb-org\nARG MONGO_REPO=repo.mongodb.org\nENV MONGO_PACKAGE=${MONGO_PACKAGE} MONGO_REPO=${MONGO_REPO}\n\nENV MONGO_MAJOR {{{VERSION_MAJOR_MINOR}}}\nRUN echo \"deb [ signed-by=/etc/apt/trusted.gpg.d/mongodb.gpg ] http://$MONGO_REPO/apt/ubuntu bionic/${MONGO_PACKAGE%-unstable}/$MONGO_MAJOR multiverse\" | tee \"/etc/apt/sources.list.d/${MONGO_PACKAGE%-unstable}.list\"\n\n# http://docs.mongodb.org/master/release-notes/{{{VERSION_MAJOR}}}.2/\nENV MONGO_VERSION {{{VERSION}}}\n# 01/04/2022, https://github.com/mongodb/mongo/tree/f65ce5e25c0b26a00d091a4d24eec1a8b3a4c016\n\nRUN set -x \\\n# installing \"mongodb-enterprise\" pulls in \"tzdata\" which prompts for input\n\t&& export DEBIAN_FRONTEND=noninteractive \\\n\t&& apt-get update \\\n# starting with MongoDB 4.3 (and backported to 4.0 and 4.2 *and* 3.6??), the postinst for server includes an unconditional \"systemctl daemon-reload\" (and we don't have anything for \"systemctl\" to talk to leading to dbus errors and failed package installs)\n\t&& ln -s /bin/true /usr/local/bin/systemctl \\\n\t&& apt-get install --no-install-recommends -y \\\n\t\t${MONGO_PACKAGE}=$MONGO_VERSION \\\n\t\t${MONGO_PACKAGE}-server=$MONGO_VERSION \\\n\t\t${MONGO_PACKAGE}-shell=$MONGO_VERSION \\\n\t\t${MONGO_PACKAGE}-mongos=$MONGO_VERSION \\\n\t\t${MONGO_PACKAGE}-tools=$MONGO_VERSION \\\n\t&& rm -f /usr/local/bin/systemctl \\\n\t&& rm -rf /var/lib/apt/lists/* \\\n\t&& rm -rf /var/lib/mongodb \\\n\t&& mv /etc/mongod.conf /etc/mongod.conf.orig\n\nRUN mkdir -p /opt/bitnami/mongodb/bin \\\n    && ln -s /usr/bin/install_compass            /opt/bitnami/mongodb/bin/ \\\n    && ln -s /usr/bin/bsondump                   /opt/bitnami/mongodb/bin/ \\\n    && ln -s /usr/bin/mongo*                     /opt/bitnami/mongodb/bin/ \\\n    && rm -rf /etc/mysql/mongodb.cnf \\\n    && chown 1001:1001 -R /opt/bitnami/mongodb\n"
}