{
  "startTime": 1674215864577,
  "endTime": 1674215866823,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 24,
        "lineEnd": 24,
        "columnStart": 4,
        "columnEnd": 53
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 63,
        "lineEnd": 63,
        "columnStart": 4,
        "columnEnd": 124
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 70,
        "lineEnd": 70,
        "columnStart": 4,
        "columnEnd": 134
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 77,
        "lineEnd": 77,
        "columnStart": 34,
        "columnEnd": 96
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 78,
        "lineEnd": 78,
        "columnStart": 9,
        "columnEnd": 143
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 86,
        "lineEnd": 86,
        "columnStart": 4,
        "columnEnd": 115
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 106,
        "lineEnd": 106,
        "columnStart": 4,
        "columnEnd": 136
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 121,
        "lineEnd": 121,
        "columnStart": 4,
        "columnEnd": 100
      }
    },
    {
      "rule": "curlUseHttpsUrl",
      "position": {
        "lineStart": 77,
        "lineEnd": 77,
        "columnStart": 34,
        "columnEnd": 96
      }
    },
    {
      "rule": "curlUseHttpsUrl",
      "position": {
        "lineStart": 78,
        "lineEnd": 78,
        "columnStart": 9,
        "columnEnd": 143
      }
    },
    {
      "rule": "configureShouldUseBuildFlag",
      "position": {
        "lineStart": 53,
        "lineEnd": 53,
        "columnStart": 4,
        "columnEnd": 15
      }
    },
    {
      "rule": "aptGetInstallUseY",
      "position": {
        "lineStart": 65,
        "lineEnd": 65,
        "columnStart": 43,
        "columnEnd": 61
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 15,
        "lineEnd": 15,
        "columnStart": 4,
        "columnEnd": 52
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 23,
        "lineEnd": 23,
        "columnStart": 4,
        "columnEnd": 28
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 29,
        "lineEnd": 46,
        "columnStart": 2,
        "columnEnd": 21
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 60,
        "lineEnd": 60,
        "columnStart": 4,
        "columnEnd": 28
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 66,
        "lineEnd": 66,
        "columnStart": 23,
        "columnEnd": 59
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 91,
        "lineEnd": 93,
        "columnStart": 5,
        "columnEnd": 22
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 103,
        "lineEnd": 103,
        "columnStart": 22,
        "columnEnd": 79
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 110,
        "lineEnd": 110,
        "columnStart": 4,
        "columnEnd": 86
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 116,
        "lineEnd": 116,
        "columnStart": 4,
        "columnEnd": 28
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 142,
        "lineEnd": 142,
        "columnStart": 9,
        "columnEnd": 54
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 142,
        "lineEnd": 142,
        "columnStart": 130,
        "columnEnd": 152
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 143,
        "lineEnd": 143,
        "columnStart": 9,
        "columnEnd": 30
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 146,
        "lineEnd": 146,
        "columnStart": 9,
        "columnEnd": 35
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 23,
        "lineEnd": 23,
        "columnStart": 4,
        "columnEnd": 28
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 60,
        "lineEnd": 60,
        "columnStart": 4,
        "columnEnd": 28
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 65,
        "lineEnd": 65,
        "columnStart": 43,
        "columnEnd": 61
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 71,
        "lineEnd": 71,
        "columnStart": 75,
        "columnEnd": 94
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 88,
        "lineEnd": 88,
        "columnStart": 86,
        "columnEnd": 105
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 107,
        "lineEnd": 107,
        "columnStart": 79,
        "columnEnd": 98
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 110,
        "lineEnd": 110,
        "columnStart": 4,
        "columnEnd": 86
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 116,
        "lineEnd": 116,
        "columnStart": 4,
        "columnEnd": 28
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 142,
        "lineEnd": 142,
        "columnStart": 9,
        "columnEnd": 54
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 143,
        "lineEnd": 143,
        "columnStart": 9,
        "columnEnd": 30
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 146,
        "lineEnd": 146,
        "columnStart": 9,
        "columnEnd": 35
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 15,
        "lineEnd": 15,
        "columnStart": 4,
        "columnEnd": 52
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 23,
        "lineEnd": 23,
        "columnStart": 4,
        "columnEnd": 28
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 29,
        "lineEnd": 46,
        "columnStart": 2,
        "columnEnd": 21
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 60,
        "lineEnd": 60,
        "columnStart": 4,
        "columnEnd": 28
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 66,
        "lineEnd": 66,
        "columnStart": 23,
        "columnEnd": 59
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 91,
        "lineEnd": 93,
        "columnStart": 5,
        "columnEnd": 22
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 103,
        "lineEnd": 103,
        "columnStart": 22,
        "columnEnd": 79
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 110,
        "lineEnd": 110,
        "columnStart": 4,
        "columnEnd": 86
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 116,
        "lineEnd": 116,
        "columnStart": 4,
        "columnEnd": 28
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 142,
        "lineEnd": 142,
        "columnStart": 9,
        "columnEnd": 54
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 142,
        "lineEnd": 142,
        "columnStart": 130,
        "columnEnd": 152
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 143,
        "lineEnd": 143,
        "columnStart": 9,
        "columnEnd": 30
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 146,
        "lineEnd": 146,
        "columnStart": 9,
        "columnEnd": 35
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 23,
        "lineEnd": 23,
        "columnStart": 4,
        "columnEnd": 52
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 60,
        "lineEnd": 60,
        "columnStart": 4,
        "columnEnd": 52
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 65,
        "lineEnd": 65,
        "columnStart": 43,
        "columnEnd": 64
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 71,
        "lineEnd": 71,
        "columnStart": 75,
        "columnEnd": 94
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 88,
        "lineEnd": 88,
        "columnStart": 86,
        "columnEnd": 105
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 107,
        "lineEnd": 107,
        "columnStart": 79,
        "columnEnd": 98
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 110,
        "lineEnd": 110,
        "columnStart": 4,
        "columnEnd": 110
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 116,
        "lineEnd": 116,
        "columnStart": 4,
        "columnEnd": 52
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 142,
        "lineEnd": 142,
        "columnStart": 9,
        "columnEnd": 78
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 143,
        "lineEnd": 143,
        "columnStart": 9,
        "columnEnd": 54
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 146,
        "lineEnd": 146,
        "columnStart": 9,
        "columnEnd": 59
      }
    }
  ],
  "repairedDockerfile": "# Based on Code.org CircleCI-dependencies Dockerfile in .circle directory\n# Pushed to Docker Hub at codedotorg/code-dot-org:<version>\nFROM ubuntu:18.04\n\nUSER root\n\n# set timezone to UTC by default\nRUN ln -sf /usr/share/zoneinfo/Etc/UTC /etc/localtime\n\n# use unicode\nRUN locale-gen C.UTF-8 || true\nENV LANG=C.UTF-8\n\n# essential tools\nRUN apt-get update && \\\n    apt-get install --no-install-recommends -y curl apt-transport-https sudo && rm -rf /var/lib/apt/lists/*;\n\n# add circleci user\nRUN groupadd --gid 3434 circleci \\\n  && useradd --uid 3434 --gid circleci --shell /bin/bash --create-home circleci \\\n  && echo 'circleci ALL=NOPASSWD: ALL' >> /etc/sudoers.d/50-circleci\n\n# add yarn\nRUN apt-get install --no-install-recommends -y gnupg && rm -rf /var/lib/apt/lists/*;\nRUN curl -f -sS https://dl.yarnpkg.com/debian/pubkey.gpg | apt-key add - && \\\n    echo \"deb https://dl.yarnpkg.com/debian/ stable main\" | tee /etc/apt/sources.list.d/yarn.list\n\n# more tools\nRUN apt-get update && \\\n\t\tapt-get install --no-install-recommends -y \\\n\t\t\t\tgit \\\n\t\t\t\txvfb \\\n\t\t\t\tyarn=1.22.5-1 \\\n\t\t\t\tsudo \\\n\t\t\t\topenssh-client \\\n\t\t\t\tca-certificates \\\n\t\t\t\ttar \\\n\t\t\t\tgzip \\\n\t\t\t\twget \\\n\t\t\t\txz-utils \\\n\t\t\t\tautoconf \\\n\t\t\t\tbuild-essential \\\n\t\t\t\tzlib1g-dev \\\n\t\t\t\tlibssl-dev \\\n\t\t\t\tcurl \\\n\t\t\t\tlibreadline-dev \\\n\t\t\t\tpython python-dev && rm -rf /var/lib/apt/lists/*;\n\n# install node\nRUN wget https://nodejs.org/dist/v14.17.1/node-v14.17.1.tar.gz && \\\n    tar -xzvf node-v14.17.1.tar.gz && \\\n    rm node-v14.17.1.tar.gz && \\\n    cd node-v14.17.1 && \\\n    ./configure --build=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\" && \\\n    make -j4 && \\\n    make install && \\\n    cd .. && \\\n    rm -r node-v14.17.1\n\n# more more tools\nRUN apt-get install --no-install-recommends -y unzip && rm -rf /var/lib/apt/lists/*;\n\n# install firefox\nRUN curl -f --output /tmp/firefox.deb https://s3.amazonaws.com/circle-downloads/firefox-mozilla-build_47.0.1-0ubuntu1_amd64.deb \\\n  && echo 'ef016febe5ec4eaf7d455a34579834bcde7703cb0818c80044f4d148df8473bb  /tmp/firefox.deb' | sha256sum -c \\\n  && sudo dpkg -i /tmp/firefox.deb || sudo apt-get -f -y install \\\n  && apt-get update && apt-get install --no-install-recommends -y libgtk3.0-cil-dev \\\n  && rm -rf /tmp/firefox.deb && rm -rf /var/lib/apt/lists/*;\n\n# install chrome\nRUN curl -f -sSL -o /tmp/google-chrome-stable_current_amd64.deb https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb \\\n      && (sudo dpkg -i /tmp/google-chrome-stable_current_amd64.deb || sudo apt-get -fy install) \\\n      && rm -rf /tmp/google-chrome-stable_current_amd64.deb \\\n      && sudo sed -i 's|HERE/chrome\"|HERE/chrome\" --disable-setuid-sandbox --no-sandbox|g' \\\n           \"/opt/google/chrome/google-chrome\"\n\n# install chromedriver\nRUN export CHROMEDRIVER_RELEASE=$( curl -f https://chromedriver.storage.googleapis.com/LATEST_RELEASE) \\\n      && curl -f -sSL -o /tmp/chromedriver_linux64.zip \"https://chromedriver.storage.googleapis.com/$CHROMEDRIVER_RELEASE/chromedriver_linux64.zip\" \\\n      && cd /tmp \\\n      && unzip chromedriver_linux64.zip \\\n      && rm -rf chromedriver_linux64.zip \\\n      && sudo mv chromedriver /usr/local/bin/chromedriver \\\n      && sudo chmod +x /usr/local/bin/chromedriver\n\n# install mysql\nRUN curl -f -sSL -o /tmp/mysql-apt-config_0.8.22-1_all.deb https://dev.mysql.com/get/mysql-apt-config_0.8.22-1_all.deb \\\n  && echo \"mysql-apt-config mysql-apt-config/select-server select mysql-5.7\" | /usr/bin/debconf-set-selections \\\n  && DEBIAN_FRONTEND=noninteractive dpkg -i /tmp/mysql-apt-config_0.8.22-1_all.deb || apt-get -fy install \\\n  && rm -rf /tmp/mysql-apt-config_0.8.22-1_all.deb \\\n  && apt-get update \\\n  && DEBIAN_FRONTEND=noninteractive apt-get --no-install-recommends install -y \\\n    mysql-server \\\n    libmysqlclient-dev && rm -rf /var/lib/apt/lists/*;\nRUN chown -R mysql:mysql /var/lib/mysql \\\n  && service mysql start \\\n  && echo \"ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY '';\" | mysql \\\n  && echo \"CREATE USER 'readonly'@'localhost' IDENTIFIED WITH mysql_native_password BY '';\" | mysql \\\n  && echo \"GRANT SELECT ON dashboard_test.* TO 'readonly'@'localhost';\" | mysql \\\n  && chown -R mysql:mysql /var/lib/mysql /var/run/mysqld \\\n  && service mysql stop\n\n# install a couple more things from config.yml\nRUN apt-get update && apt-get -y --no-install-recommends install parallel libmagickwand-dev imagemagick && rm -rf /var/lib/apt/lists/*;\nRUN mv /usr/bin/parallel /usr/bin/gnu_parallel\n\nRUN curl -f -sSL -o /tmp/pdftk-java_3.0.9-1_all.deb https://mirrors.kernel.org/ubuntu/pool/universe/p/pdftk-java/pdftk-java_3.0.9-1_all.deb \\\n  && DEBIAN_FRONTEND=noninteractive dpkg -i /tmp/pdftk-java_3.0.9-1_all.deb || apt-get -fy install \\\n  && rm -rf /tmp/pdftk-java_3.0.9-1_all.deb\nRUN apt-get update\nRUN apt-get install --no-install-recommends -y libicu-dev enscript moreutils libmysqlclient-dev libsqlite3-dev && rm -rf /var/lib/apt/lists/*;\nRUN wget https://github.com/htacg/tidy-html5/releases/download/5.4.0/tidy-5.4.0-64bit.deb \\\n\t&& dpkg -i tidy-5.4.0-64bit.deb \\\n\t&& rm tidy-5.4.0-64bit.deb\nRUN mv /usr/bin/gnu_parallel /usr/bin/parallel\n\nRUN apt-get install --no-install-recommends -y rbenv && rm -rf /var/lib/apt/lists/*;\n\n# install https://github.com/boxboat/fixuid\nRUN USER=circleci && \\\n    GROUP=circleci && \\\n    curl -f -SsL https://github.com/boxboat/fixuid/releases/download/v0.4/fixuid-0.4-linux-amd64.tar.gz | tar -C /usr/local/bin -xzf - && \\\n    chown root:root /usr/local/bin/fixuid && \\\n    chmod 4755 /usr/local/bin/fixuid && \\\n    mkdir -p /etc/fixuid && \\\n    printf \"user: $USER\\ngroup: $GROUP\\n\" > /etc/fixuid/config.yml\n\nUSER circleci\n\n# Install ruby-build: https://github.com/rbenv/ruby-build#readme\nRUN mkdir -p \"$(rbenv root)\"/plugins\nRUN git clone https://github.com/rbenv/ruby-build.git \"$(rbenv root)\"/plugins/ruby-build\n\nRUN rbenv install 2.5.8\nRUN eval \"$(rbenv init -)\" && rbenv global 2.5.8 && rbenv rehash && gem install bundler -v 1.17\n# This bashrc file will be used whenever someone runs bash in interactive mode.\n# This is mostly intended for the use case where you want to start a shell into a running container with\n# docker exec -it <container_name> bash, which bypasses the entrypoint script.\nRUN echo 'eval \"$(rbenv init -)\"' >> ~/.bashrc\n\n# We need git >= 2.15 to use git rev-parse --is-shallow-clone feature\n# TODO: consolidate apt-get installs\nRUN sudo apt-get install --no-install-recommends -y software-properties-common && sudo add-apt-repository ppa:git-core/ppa && sudo apt-get update && sudo apt-get install --no-install-recommends -y git && rm -rf /var/lib/apt/lists/*;\nRUN sudo apt-get install --no-install-recommends -y jq && rm -rf /var/lib/apt/lists/*;\n\n# en_US.UTF-8 locale not available by default\nRUN sudo apt-get install --no-install-recommends -y locales && rm -rf /var/lib/apt/lists/*;\nRUN sudo locale-gen en_US.UTF-8\n\nCOPY entrypoint.sh /entrypoint.sh\nRUN sudo chmod +x /entrypoint.sh\n\nENTRYPOINT [\"/entrypoint.sh\"]\n"
}