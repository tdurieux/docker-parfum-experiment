{
  "startTime": 1674254855654,
  "endTime": 1674254856539,
  "originalSmells": [
    {
      "rule": "npmCacheCleanAfterInstall",
      "position": {
        "lineStart": 26,
        "lineEnd": 26,
        "columnStart": 4,
        "columnEnd": 15
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 13,
        "lineEnd": 13,
        "columnStart": 4,
        "columnEnd": 35
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 13,
        "lineEnd": 13,
        "columnStart": 4,
        "columnEnd": 35
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 13,
        "lineEnd": 13,
        "columnStart": 4,
        "columnEnd": 35
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM pulumi/pulumi:v2.2.1\n\n# Label things so it lights up in GitHub Actions!\nLABEL \"com.github.actions.name\"=\"Pulumify\"\nLABEL \"com.github.actions.description\"=\"Deploy static websites to your favorite cloud!\"\nLABEL \"com.github.actions.icon\"=\"cloud-lightning\"\nLABEL \"com.github.actions.color\"=\"purple\"\nLABEL \"repository\"=\"https://github.com/pulumi/actions-pulumify\"\nLABEL \"homepage\"=\"https://pulumi.com/\"\nLABEL \"maintainer\"=\"Pulumi Team <team@pulumi.com>\"\n\n# Install some tools we'll need.\nRUN apt-get update -y && apt-get install --no-install-recommends -y jq wget make && rm -rf /var/lib/apt/lists/*;\n\n# Install content generation tools.\n# TODO(joe): this should eventually get factored out to be pluggable, so that the\n# \"pulumify\" image is agnostic to the specific content management system being used.\nRUN wget https://github.com/gohugoio/hugo/releases/download/v0.55.4/hugo_extended_0.55.4_Linux-64bit.deb && \\\n    dpkg -i hugo_extended_0.55.4_Linux-64bit.deb && \\\n    rm hugo_extended_0.55.4_Linux-64bit.deb\n\n# Copy the Pulumi infrastructure definition to a well-known location. Because the image\n# will immediately begin running Pulumi commands, also switch the working directory.\nCOPY ./infra /infra\nWORKDIR /infra\nRUN npm install && npm cache clean --force;\n\n# GitHub Actions will mount the repo source code at this volume.\nVOLUME [ \"/app\" ]\n\n# Use the pulumify script as this container's entrypoint -- it will get the job done.\nENTRYPOINT [ \"/infra/pulumify\" ]\n"
}