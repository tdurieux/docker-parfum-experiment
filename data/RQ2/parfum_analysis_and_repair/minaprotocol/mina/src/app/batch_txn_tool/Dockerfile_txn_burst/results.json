{
  "startTime": 1674250536193,
  "endTime": 1674250537026,
  "originalSmells": [
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 11,
        "lineEnd": 11,
        "columnStart": 35,
        "columnEnd": 57
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 12,
        "lineEnd": 12,
        "columnStart": 32,
        "columnEnd": 86
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 15,
        "lineEnd": 15,
        "columnStart": 10,
        "columnEnd": 109
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 11,
        "lineEnd": 11,
        "columnStart": 35,
        "columnEnd": 57
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 12,
        "lineEnd": 12,
        "columnStart": 32,
        "columnEnd": 86
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 15,
        "lineEnd": 15,
        "columnStart": 10,
        "columnEnd": 109
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "#build with:\n# docker build -t txn_burst_util -f Dockerfile_txn_burst .\n\n#or directly run with:\n# docker run -v <local keypath>:/keys --entrypoint ./_build/default/src/app/batch_txn_tool/batch_txn_tool.exe txn_burst_util --num-txn-per-acct 10 --origin-sender-sk-path \"/keys/<origin key path>\" --origin-sender-sk-pw \"some password\" --returner-sk-path \"/keys/<origin key path>\" --returner-sk-pw \"some password\"\n\nFROM minaprotocol/mina-toolchain:1.3.1beta1-compatible-9839d34-bullseye\n\nUSER opam\n\n#install mina\nRUN sudo apt-get -y update && sudo apt-get -y --no-install-recommends install man && rm -rf /var/lib/apt/lists/*;\nRUN sudo apt-get update && sudo apt-get install --no-install-recommends -y apt-transport-https ca-certificates && rm -rf /var/lib/apt/lists/*;\nRUN sudo echo \"deb [trusted=yes] http://packages.o1test.net $(lsb_release -cs) unstable\" | sudo tee /etc/apt/sources.list.d/mina.list \\\n  && sudo apt-get update \\\n  && sudo apt-get install --no-install-recommends -y --allow-downgrades mina-devnet=1.3.1beta1-metrics-gossip-data-collection-92db0c6 && rm -rf /var/lib/apt/lists/*;\n\n# compile txn burst tool\nCOPY ./batch_txn_tool.ml /home/opam\nCOPY ./txn_tool_graphql.ml /home/opam\nCOPY ./dune /home/opam\nENV PATH \"$PATH:/usr/lib/go/bin:$HOME/.cargo/bin\"\nRUN eval $(opam config env) \\\n  && git config pull.rebase false \\\n  && git pull \\\n  && git checkout compatible \\\n  && git submodule update --init --recursive \\\n  && mv /home/opam/batch_txn_tool.ml src/app/batch_txn_tool \\\n  && mv /home/opam/txn_tool_graphql.ml src/app/batch_txn_tool \\\n  && mv /home/opam/dune src/app/batch_txn_tool \\\n  && dune build src/app/batch_txn_tool/batch_txn_tool.exe\n\nUSER root\n# prepare the key directories\nRUN mkdir /keys && chmod 700 /keys\nENV MINA_PRIVKEY_PASS \"\"\n\nENTRYPOINT [\"./_build/default/src/app/batch_txn_tool/batch_txn_tool.exe\"]\n"
}