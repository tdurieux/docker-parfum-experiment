{
  "startTime": 1674253877409,
  "endTime": 1674253879391,
  "originalSmells": [
    {
      "rule": "wgetUseHttpsUrl",
      "position": {
        "lineStart": 122,
        "lineEnd": 122,
        "columnStart": 4,
        "columnEnd": 94
      }
    },
    {
      "rule": "wgetUseHttpsUrl",
      "position": {
        "lineStart": 192,
        "lineEnd": 192,
        "columnStart": 4,
        "columnEnd": 79
      }
    },
    {
      "rule": "wgetUseHttpsUrl",
      "position": {
        "lineStart": 193,
        "lineEnd": 193,
        "columnStart": 4,
        "columnEnd": 74
      }
    },
    {
      "rule": "wgetUseHttpsUrl",
      "position": {
        "lineStart": 194,
        "lineEnd": 194,
        "columnStart": 4,
        "columnEnd": 72
      }
    },
    {
      "rule": "wgetUseHttpsUrl",
      "position": {
        "lineStart": 195,
        "lineEnd": 195,
        "columnStart": 4,
        "columnEnd": 70
      }
    },
    {
      "rule": "wgetUseHttpsUrl",
      "position": {
        "lineStart": 196,
        "lineEnd": 196,
        "columnStart": 4,
        "columnEnd": 74
      }
    },
    {
      "rule": "wgetUseHttpsUrl",
      "position": {
        "lineStart": 197,
        "lineEnd": 197,
        "columnStart": 4,
        "columnEnd": 74
      }
    },
    {
      "rule": "wgetUseHttpsUrl",
      "position": {
        "lineStart": 237,
        "lineEnd": 237,
        "columnStart": 4,
        "columnEnd": 60
      }
    },
    {
      "rule": "wgetUseHttpsUrl",
      "position": {
        "lineStart": 257,
        "lineEnd": 257,
        "columnStart": 4,
        "columnEnd": 54
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 61,
        "lineEnd": 61,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 62,
        "lineEnd": 62,
        "columnStart": 4,
        "columnEnd": 26
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 63,
        "lineEnd": 63,
        "columnStart": 4,
        "columnEnd": 28
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 64,
        "lineEnd": 64,
        "columnStart": 4,
        "columnEnd": 23
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 65,
        "lineEnd": 65,
        "columnStart": 4,
        "columnEnd": 24
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 66,
        "lineEnd": 66,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 67,
        "lineEnd": 67,
        "columnStart": 4,
        "columnEnd": 28
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 68,
        "lineEnd": 68,
        "columnStart": 4,
        "columnEnd": 31
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 69,
        "lineEnd": 69,
        "columnStart": 4,
        "columnEnd": 28
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 70,
        "lineEnd": 70,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 71,
        "lineEnd": 71,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 72,
        "lineEnd": 72,
        "columnStart": 4,
        "columnEnd": 33
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 73,
        "lineEnd": 73,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 74,
        "lineEnd": 74,
        "columnStart": 4,
        "columnEnd": 26
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 75,
        "lineEnd": 75,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 76,
        "lineEnd": 76,
        "columnStart": 4,
        "columnEnd": 29
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 77,
        "lineEnd": 77,
        "columnStart": 4,
        "columnEnd": 29
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 78,
        "lineEnd": 78,
        "columnStart": 4,
        "columnEnd": 29
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 79,
        "lineEnd": 79,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 80,
        "lineEnd": 80,
        "columnStart": 4,
        "columnEnd": 42
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 81,
        "lineEnd": 81,
        "columnStart": 4,
        "columnEnd": 28
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 82,
        "lineEnd": 82,
        "columnStart": 4,
        "columnEnd": 33
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 83,
        "lineEnd": 83,
        "columnStart": 4,
        "columnEnd": 31
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 84,
        "lineEnd": 84,
        "columnStart": 4,
        "columnEnd": 31
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 85,
        "lineEnd": 85,
        "columnStart": 4,
        "columnEnd": 29
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 150,
        "lineEnd": 150,
        "columnStart": 4,
        "columnEnd": 21
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 229,
        "lineEnd": 229,
        "columnStart": 4,
        "columnEnd": 24
      }
    },
    {
      "rule": "configureShouldUseBuildFlag",
      "position": {
        "lineStart": 144,
        "lineEnd": 144,
        "columnStart": 4,
        "columnEnd": 35
      }
    },
    {
      "rule": "configureShouldUseBuildFlag",
      "position": {
        "lineStart": 157,
        "lineEnd": 157,
        "columnStart": 4,
        "columnEnd": 15
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 142,
        "lineEnd": 142,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 155,
        "lineEnd": 155,
        "columnStart": 4,
        "columnEnd": 32
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 165,
        "lineEnd": 165,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 222,
        "lineEnd": 222,
        "columnStart": 4,
        "columnEnd": 29
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 238,
        "lineEnd": 238,
        "columnStart": 4,
        "columnEnd": 35
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 276,
        "lineEnd": 276,
        "columnStart": 4,
        "columnEnd": 35
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 295,
        "lineEnd": 295,
        "columnStart": 4,
        "columnEnd": 19
      }
    },
    {
      "rule": "aptGetInstallUseY",
      "position": {
        "lineStart": 15,
        "lineEnd": 52,
        "columnStart": 4,
        "columnEnd": 14
      }
    },
    {
      "rule": "aptGetInstallUseY",
      "position": {
        "lineStart": 55,
        "lineEnd": 57,
        "columnStart": 4,
        "columnEnd": 22
      }
    },
    {
      "rule": "aptGetInstallUseY",
      "position": {
        "lineStart": 89,
        "lineEnd": 89,
        "columnStart": 4,
        "columnEnd": 91
      }
    },
    {
      "rule": "aptGetInstallUseY",
      "position": {
        "lineStart": 93,
        "lineEnd": 93,
        "columnStart": 4,
        "columnEnd": 107
      }
    },
    {
      "rule": "aptGetInstallUseY",
      "position": {
        "lineStart": 127,
        "lineEnd": 129,
        "columnStart": 4,
        "columnEnd": 20
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 15,
        "lineEnd": 52,
        "columnStart": 4,
        "columnEnd": 14
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 55,
        "lineEnd": 57,
        "columnStart": 4,
        "columnEnd": 22
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 93,
        "lineEnd": 93,
        "columnStart": 4,
        "columnEnd": 107
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 127,
        "lineEnd": 129,
        "columnStart": 4,
        "columnEnd": 20
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 55,
        "lineEnd": 57,
        "columnStart": 4,
        "columnEnd": 22
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 93,
        "lineEnd": 93,
        "columnStart": 4,
        "columnEnd": 107
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 127,
        "lineEnd": 129,
        "columnStart": 4,
        "columnEnd": 20
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 15,
        "lineEnd": 52,
        "columnStart": 4,
        "columnEnd": 14
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 55,
        "lineEnd": 57,
        "columnStart": 4,
        "columnEnd": 22
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 89,
        "lineEnd": 89,
        "columnStart": 4,
        "columnEnd": 91
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 93,
        "lineEnd": 93,
        "columnStart": 4,
        "columnEnd": 107
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 127,
        "lineEnd": 129,
        "columnStart": 4,
        "columnEnd": 20
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 55,
        "lineEnd": 57,
        "columnStart": 4,
        "columnEnd": 22
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 93,
        "lineEnd": 93,
        "columnStart": 4,
        "columnEnd": 134
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 127,
        "lineEnd": 129,
        "columnStart": 4,
        "columnEnd": 21
      }
    }
  ],
  "repairedDockerfile": "# Pull base image\nFROM phusion/baseimage:master\n\n# Who maintains this image\nLABEL maintainer Jason Smith \"jasonsmith@virginia.edu\"\n\n# Version info\nLABEL version 0.10.1\n\n# Use baseimage-docker's init system.\nCMD [\"/sbin/my_init\"]\n\n# Install dependencies\nRUN add-apt-repository ppa:deadsnakes/ppa\nRUN apt-get update && \\\n    DEBIAN_FRONTEND=noninteractive apt-get -y --no-install-recommends install --assume-yes \\\n    libbz2-dev \\\n    build-essential \\\n    curl \\\n    default-jre \\\n    default-jdk \\\n    openjdk-8-jdk \\\n    git \\\n    libcommons-math3-java \\\n    libcurl4-gnutls-dev \\\n    libjbzip2-java \\\n    liblua5.1-0-dev \\\n    libpng-dev \\\n    libssl-dev \\\n    libtbb2 \\\n    libtbb-dev \\\n    lua-filesystem-dev \\\n    lua-lpeg-dev \\\n    lua-md5-dev \\\n    libexpat1-dev \\\n    libtre-dev \\\n    libcairo2-dev \\\n    libpango1.0-dev \\\n    libsqlite3-dev \\\n    libbam-dev \\\n    libxml2-dev \\\n    openssl \\\n    perl \\\n    pigz=2.4-1 \\\n    software-properties-common \\\n    python3.8 \\\n    python3-pip \\\n    python3-dev \\\n    build-essential \\\n    rustc \\\n    wget \\\n    zlib1g \\\n    zlib1g-dev && rm -rf /var/lib/apt/lists/*;\n\n# Install MySQL server\nRUN DEBIAN_FRONTEND=noninteractive apt-get -y --no-install-recommends install --assume-yes mysql-server \\\n    mysql-client \\\n    libmysqlclient-dev && rm -rf /var/lib/apt/lists/*;\n\n# Install python tools\nRUN python3.8 -m pip install -U pip\nRUN pip install --no-cache-dir numpy >=1.17\nRUN pip install --no-cache-dir virtualenv && \\\n    pip install --no-cache-dir cython >=0.29 && \\\n    pip install --no-cache-dir cykhash && \\\n    pip install --no-cache-dir pararead && \\\n    pip install --no-cache-dir attmap >=0.12.9 && \\\n    pip install --no-cache-dir codecov >=2.0 && \\\n    pip install --no-cache-dir colorama >=0.3.9 && \\\n    pip install --no-cache-dir cython >=0.29 && \\\n    pip install --no-cache-dir cykhash >=1.0.2 && \\\n    pip install --no-cache-dir jinja2 >=2.11.2 && \\\n    pip install --no-cache-dir jsonschema >=3.0.1 && \\\n    pip install --no-cache-dir logmuse >=0.2.5 && \\\n    pip install --no-cache-dir oyaml >=0.9 && \\\n    pip install --no-cache-dir pandas >=0.20.2 && \\\n    pip install --no-cache-dir peppy >=0.31.0 && \\\n    pip install --no-cache-dir piper >=0.12.1 && \\\n    pip install --no-cache-dir psutil >=5.6.3 && \\\n    pip install --no-cache-dir pysam >=0.13 && \\\n    pip install --no-cache-dir python-Levenshtein >=0.12.0 && \\\n    pip install --no-cache-dir pyyaml >=3.13 && \\\n    pip install --no-cache-dir refgenconf >=0.7.0 && \\\n    pip install --no-cache-dir refgenie >=0.9.3 && \\\n    pip install --no-cache-dir ubiquerg >=0.6.1 && \\\n    pip install --no-cache-dir yacman >=0.6.7\n\n# Install R\nRUN apt update -qq && \\\n    DEBIAN_FRONTEND=noninteractive apt -y --assume-yes install --no-install-recommends dirmngr && rm -rf /var/lib/apt/lists/*;\nRUN apt-key adv --keyserver  hkp://keyserver.ubuntu.com:80 --recv-keys E298A3A825C0D65DFD57CBB651716619E084DAB9 && \\\n    add-apt-repository \"deb https://cloud.r-project.org/bin/linux/ubuntu $(lsb_release -cs)-cran40/\"\n\nRUN DEBIAN_FRONTEND=noninteractive apt-get -y --no-install-recommends --assume-yes install r-base r-base-dev r-base-core r-recommended && \\\n    echo \"r <- getOption('repos'); r['CRAN'] <- 'http://cran.us.r-project.org'; options(repos = r);\" > ~/.Rprofile && rm -rf /var/lib/apt/lists/*;\n\nRUN Rscript -e \"install.packages('argparser')\" && \\\n    Rscript -e \"install.packages('optigrab')\" && \\\n    Rscript -e \"install.packages('data.table')\" && \\\n    Rscript -e \"install.packages('xml2')\" && \\\n    Rscript -e \"install.packages('roxygen2')\" && \\\n    Rscript -e \"install.packages('rversions')\" && \\\n    Rscript -e \"install.packages('devtools')\" && \\\n    Rscript -e \"install.packages('ggrepel')\" && \\\n    Rscript -e \"install.packages('ggplot2')\" && \\  \n    Rscript -e \"install.packages('gplots')\" && \\\n    Rscript -e \"install.packages('grid')\" && \\    \n    Rscript -e \"install.packages('gtable')\" && \\\n    Rscript -e \"install.packages('scales')\" && \\\n    Rscript -e \"install.packages('stringr')\" && \\\n    Rscript -e \"devtools::install_github('pepkit/pepr')\" && \\    \n    Rscript -e \"install.packages('data.table')\" && \\\n    Rscript -e \"install.packages('BiocManager')\" && \\\n    Rscript -e \"BiocManager::install('GenomicRanges')\" && \\\n    Rscript -e 'BiocManager::install(\"Biostrings\")' && \\\n    Rscript -e 'BiocManager::install(\"AnnotationHub\")' && \\\n    Rscript -e 'BiocManager::install(\"AnnotationFilter\")' && \\\n    Rscript -e \"BiocManager::install('BSgenome')\" && \\\n    Rscript -e \"BiocManager::install('GenomicFeatures')\" && \\\n    Rscript -e \"BiocManager::install('ensembldb')\" && \\\n    Rscript -e \"BiocManager::install('ExperimentHub')\"\nRUN Rscript -e \"devtools::install_github('databio/GenomicDistributions')\"\nRUN wget https://big.databio.org/GenomicDistributionsData/GenomicDistributionsData_0.0.2.tar.gz\nRUN Rscript -e \"install.packages('GenomicDistributionsData_0.0.2.tar.gz', repos=NULL)\"\nRUN Rscript -e \"devtools::install_github('databio/pepatac/PEPATACr/')\"\n\n# Install bedtools\nRUN DEBIAN_FRONTEND=noninteractive apt-get -y --no-install-recommends install --assume-yes \\\n    ant \\\n    bedtools >=2.29.2 && rm -rf /var/lib/apt/lists/*;\n\n# Install fastqc\nWORKDIR /home/tools/\nRUN wget https://www.bioinformatics.babraham.ac.uk/projects/fastqc/fastqc_v0.11.9.zip && \\\n    unzip fastqc_v0.11.9.zip && \\\n    cd /home/tools/FastQC && \\\n    chmod 755 fastqc && \\ \n    ln -s /home/tools/FastQC/fastqc /usr/bin/\n\n# Install htslib\nWORKDIR /home/src/\nRUN wget https://github.com/samtools/htslib/releases/download/1.12/htslib-1.12.tar.bz2 && \\\n    tar xf htslib-1.12.tar.bz2 && \\\n    cd /home/src/htslib-1.12 && \\\n    ./configure --build=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\" --prefix /home/src/ && \\\n    make && \\\n    make install && rm htslib-1.12.tar.bz2\n\n# Install MACS2 from PyPi\nWORKDIR /home/tools/\nRUN pip install --no-cache-dir MACS2\n\n# Install samtools\nWORKDIR /home/src/\nRUN wget https://github.com/samtools/samtools/releases/download/1.12/samtools-1.12.tar.bz2 && \\\n    tar xf samtools-1.12.tar.bz2 && \\\n    cd /home/src/samtools-1.12 && \\\n    ./configure --build=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\" && \\\n    make && \\\n    make install && \\\n    ln -s /home/src/samtools-1.12/samtools /usr/bin/ && rm samtools-1.12.tar.bz2\n\n# Install preseq\nWORKDIR /home/tools/\nRUN wget https://github.com/smithlabcode/preseq/releases/download/v3.1.2/preseq-3.1.2.tar.gz && \\\n    tar xf preseq-3.1.2.tar.gz && \\\n    cd preseq-3.1.2 && \\\n    mkdir build && cd build && \\\n    ../configure --enable-hts \\\n        CPPFLAGS=-I\"/home/src/include\" \\\n        LDFLAGS=\"-L/home/src/lib -Wl,-R/home/src/lib\" && \\\n    make && \\\n    make install && rm preseq-3.1.2.tar.gz\n\n# Install bowtie2\nWORKDIR /home/src/\nRUN wget -O bowtie2-2.4.2-source.zip 'https://downloads.sourceforge.net/project/bowtie-bio/bowtie2/2.4.2/bowtie2-2.4.2-source.zip?ts=gAAAAABgfxZxKMUjBU0A0XjfO55q36KUoO9RRemjzTT_WCDpSSZCy8NtKrFODKV4xS_135KTiIdnBSaqmvHuQw9l6nqM2EULvw%3D%3D&r=https%3A%2F%2Fsourceforge.net%2Fprojects%2Fbowtie-bio%2Ffiles%2Fbowtie2%2F2.4.2%2Fbowtie2-2.4.2-source.zip%2Fdownload' && \\\n    unzip bowtie2-2.4.2-source.zip && \\\n    cd /home/src/bowtie2-2.4.2 && \\\n    make && \\\n    make install && \\\n    ln -s /home/src/bowtie2-2.4.2/bowtie2 /usr/bin/\n\n# Install samblaster\nWORKDIR /home/tools/\nRUN git clone https://github.com/GregoryFaust/samblaster.git && \\\n    cd /home/tools/samblaster && \\\n    make && \\\n    ln -s /home/tools/samblaster/samblaster /usr/bin/\n\n# Install UCSC tools\nWORKDIR /home/tools/\nRUN wget https://hgdownload.soe.ucsc.edu/admin/exe/linux.x86_64/bedGraphToBigWig && \\\n    wget https://hgdownload.soe.ucsc.edu/admin/exe/linux.x86_64/wigToBigWig && \\\n    wget https://hgdownload.soe.ucsc.edu/admin/exe/linux.x86_64/bigWigCat && \\\n    wget https://hgdownload.cse.ucsc.edu/admin/exe/linux.x86_64/bedSort && \\\n    wget https://hgdownload.cse.ucsc.edu/admin/exe/linux.x86_64/bedToBigBed && \\\n    wget https://hgdownload.soe.ucsc.edu/admin/exe/linux.x86_64/bigWigMerge && \\\n    chmod +x /home/tools/bedGraphToBigWig && \\\n    chmod +x /home/tools/wigToBigWig && \\\n    chmod +x /home/tools/bigWigCat && \\\n    chmod +x /home/tools/bedSort && \\\n    chmod +x /home/tools/bedToBigBed && \\\n    chmod +x /home/tools/bigWigMerge && \\\n    ln -s /home/tools/bedGraphToBigWig /usr/bin/ && \\\n    ln -s /home/tools/wigToBigWig /usr/bin/ && \\\n    ln -s /home/tools/bigWigCat /usr/bin/ && \\\n    ln -s /home/tools/bedSort /usr/bin/ && \\\n    ln -s /home/tools/bigWigMerge /usr/bin/ && \\\n    ln -s /home/tools/bedToBigBed /usr/bin/\n\n# Install Skewer\nWORKDIR /home/src/\nRUN git clone https://github.com/relipmoc/skewer.git && \\\n    cd /home/src/skewer && \\\n    make && \\\n    make install\n\n# OPTIONAL REQUIREMENTS\n# Install bwa\nWORKDIR /home/src/\nRUN wget -O bwa-0.7.17.tar.bz2  'https://downloads.sourceforge.net/project/bio-bwa/bwa-0.7.17.tar.bz2?ts=gAAAAABgfZHQ5GyuWr5rjuP8wYOC1ueJsyJD3qN-MfiwKeN3jxzRMWGU1eUfKvYzteg86k_UeLBYZTRRm1deDQaokXbPaevHYw%3D%3D&r=https%3A%2F%2Fsourceforge.net%2Fprojects%2Fbio-bwa%2Ffiles%2Flatest%2Fdownload' && \\\n    tar xf bwa-0.7.17.tar.bz2 && \\\n    cd /home/src/bwa-0.7.17 && \\\n    make && \\\n    ln -s /home/src/bwa-0.7.17/bwa /usr/bin/ && rm bwa-0.7.17.tar.bz2\n\n# Install F-seq2\nWORKDIR /home/src/\nRUN pip install --no-cache-dir pyBigWig\nRUN wget https://github.com/Boyle-Lab/F-Seq2/archive/master.zip && \\\n    unzip master.zip && \\\n    cd /home/src/F-Seq2-master && \\\n    python3 setup.py install\n\n# Install genometools\nWORKDIR /home/tools/\nRUN wget https://genometools.org/pub/genometools-1.6.1.tar.gz && \\\n    tar xf genometools-1.6.1.tar.gz && \\\n    cd /home/tools/genometools-1.6.1 && \\\n    make useshared=yes && \\\n    make install && rm genometools-1.6.1.tar.gz\n\n# Install Genrich\nWORKDIR /home/tools/\nRUN git clone https://github.com/jsh58/Genrich.git && \\\n    cd Genrich && \\\n    make && \\\n    ln -s /home/tools/Genrich/Genrich /usr/bin/\n\n# Install HMMRATAC\nWORKDIR /home/tools/bin\nRUN wget https://github.com/LiuLabUB/HMMRATAC/releases/download/1.2.10/HMMRATAC_V1.2.10_exe.jar && \\\n    chmod +x HMMRATAC_V1.2.10_exe.jar\n\n# Install HOMER\nWORKDIR /home/tools/bin\nRUN wget https://homer.ucsd.edu/homer/configureHomer.pl && \\\n    perl /home/tools/bin/configureHomer.pl -install && \\\n    perl /home/tools/bin/configureHomer.pl -install human && \\\n    perl /home/tools/bin/configureHomer.pl -install mouse\n\n# Install MACS3 from github\nWORKDIR /home/tools/\nRUN git clone https://github.com/macs3-project/MACS.git --recurse-submodules && \\\n    cd /home/tools/MACS && \\\n    python3 setup.py install\n\n# Install picard\nWORKDIR /home/tools/bin\nRUN wget https://github.com/broadinstitute/picard/releases/download/2.25.2/picard.jar && \\\n    chmod +x picard.jar\n\n# Install seqOutBias\nWORKDIR /home/tools/\nRUN wget -O seqOutBias-v1.3.0.tar.gz 'https://github.com/guertinlab/seqOutBias/archive/refs/tags/v1.3.0.tar.gz' && \\\n    tar xf seqOutBias-v1.3.0.tar.gz && \\\n    cd seqOutBias-1.3.0 && \\\n    cargo build --release && \\\n    ln -s /home/tools/seqOutBias-1.3.0/target/release/seqOutBias /usr/bin/ && rm seqOutBias-v1.3.0.tar.gz\n\n# Install Trimmomatic\nWORKDIR /home/src/\nRUN wget https://github.com/usadellab/Trimmomatic/files/5854859/Trimmomatic-0.39.zip && \\\n    unzip Trimmomatic-0.39.zip && \\\n    chmod +x Trimmomatic-0.39/trimmomatic-0.39.jar\n\n# Install F-seq\nWORKDIR /home/src/\nRUN git clone https://github.com/aboyle/F-seq.git\nENV JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64/ \\\n    PATH=$PATH:$JAVA_HOME/bin\nRUN cd /home/src/F-seq && \\\n    ant && \\\n    cd dist~/ && \\\n    tar xf fseq.tgz && \\\n    ln -s /home/src/F-seq/dist~/fseq/bin/fseq /usr/bin/ && rm fseq.tgz\n\n# Set environment variables\nENV PATH=/home/tools/bin:/home/tools/:/home/tools/bin/kentUtils/:/home/src/bowtie2-2.4.2:/home/src/skewer:/home/src/samtools-1.12:/home/src/Trimmomatic-0.39/:/home/src/htslib-1.12:$PATH \\\n    TRIMMOMATIC=/home/src/Trimmomatic-0.39/trimmomatic-0.39.jar \\\n    PICARD=/home/tools/bin/picard.jar \\\n    HMMRATAC=/home/tools/bin/HMMRATAC_V1.2.10_exe.jar \\\n    R_LIBS_USER=/usr/local/lib/R/site-library/ \\\n    PYTHONPATH=/usr/local/lib/python3.8/dist-packages:$PYTHONPATH\n\n# Create python alias\nRUN echo 'alias python=\"/usr/bin/python3\"' >> /root/.bashrc && \\\n    /bin/bash -c \"source /root/.bashrc\"\n\n# Make python3 default\nRUN update-alternatives --install /usr/bin/python python /usr/bin/python3 10\n\n# Define default command\nWORKDIR /home/\nCMD [\"/bin/bash\"]\n\n# Clean up APT when done.\nRUN apt-get clean && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*\n"
}