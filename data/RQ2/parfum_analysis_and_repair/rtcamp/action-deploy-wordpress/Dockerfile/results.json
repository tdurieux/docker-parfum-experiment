{
  "startTime": 1674251466009,
  "endTime": 1674251466571,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 33,
        "lineEnd": 33,
        "columnStart": 4,
        "columnEnd": 85
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 39,
        "lineEnd": 39,
        "columnStart": 1,
        "columnEnd": 43
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 44,
        "lineEnd": 44,
        "columnStart": 4,
        "columnEnd": 50
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 29,
        "lineEnd": 29,
        "columnStart": 2,
        "columnEnd": 21
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 16,
        "lineEnd": 25,
        "columnStart": 1,
        "columnEnd": 28
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 28,
        "lineEnd": 28,
        "columnStart": 2,
        "columnEnd": 107
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 45,
        "lineEnd": 45,
        "columnStart": 1,
        "columnEnd": 22
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 45,
        "lineEnd": 45,
        "columnStart": 1,
        "columnEnd": 22
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 45,
        "lineEnd": 45,
        "columnStart": 1,
        "columnEnd": 46
      }
    }
  ],
  "repairedDockerfile": "FROM ubuntu:20.04\n\nARG DEBIAN_FRONTEND=noninteractive\n\nLABEL \"com.github.actions.icon\"=\"upload-cloud\"\nLABEL \"com.github.actions.color\"=\"yellow\"\nLABEL \"com.github.actions.name\"=\"Deploy WordPress\"\nLABEL \"com.github.actions.description\"=\"Deploy WordPress code to a server\"\nLABEL \"org.opencontainers.image.source\"=\"https://github.com/rtCamp/action-deploy-wordpress\"\n\n\nENV PATH                     \"/composer/vendor/bin:~/.local/bin:$PATH\"\nENV COMPOSER_ALLOW_SUPERUSER 1\nENV COMPOSER_HOME            /composer\n\nRUN apt update && \\\n\tapt install --no-install-recommends -y \\\n\t\tbash \\\n\t\tgit \\\n\t\tcurl \\\n\t\tjq \\\n\t\trsync \\\n\t\tzip \\\n\t\tunzip \\\n\t\tpython3-pip \\\n\t\tsoftware-properties-common && \\\n\t\tadd-apt-repository ppa:ondrej/php && \\\n\t\tapt update && \\\n\t\tapt-get install --no-install-recommends -y php7.4-cli php7.4-curl php7.4-json php7.4-mbstring php7.4-xml php7.4-iconv php7.4-yaml && \\\n\t\tpip3 install --no-cache-dir shyaml && \\\n\t\trm -rf /var/lib/apt/lists/*\n\n# Setup wp-cli\nRUN curl -f -O https://raw.githubusercontent.com/wp-cli/builds/gh-pages/phar/wp-cli.phar && \\\n\tchmod +x wp-cli.phar && \\\n\tmv wp-cli.phar /usr/local/bin/wp\n\n# Setup composer\nRUN mkdir -p /composer && \\\n\tcurl -f -sS https://getcomposer.org/installer | \\\n\tphp -- --install-dir=/usr/bin/ --filename=composer\nCOPY composer.* /composer/\nRUN cd /composer && composer install\n\nRUN curl -f -sL https://deb.nodesource.com/setup_16.x | bash && \\\n\tapt install --no-install-recommends -y nodejs && \\\n\trm -rf /var/lib/apt/lists/*\n\nCOPY deploy.php hosts.yml /\nCOPY *.sh /\nRUN chmod +x /*.sh\n\nENTRYPOINT [\"/entrypoint.sh\"]\n"
}