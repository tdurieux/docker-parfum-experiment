{
  "startTime": 1674253520453,
  "endTime": 1674253521580,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 101,
        "lineEnd": 101,
        "columnStart": 4,
        "columnEnd": 125
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM php:8.2-rc-apache\n\n# install persistent PHP extensions (they won't get purged afterwards)\nRUN set -eux; \\\n    apt-get update; \\\n    apt-get install -y --quiet --no-install-recommends \\\n        ghostscript \\\n        locales \\\n        unzip \\\n    ; \\\n    rm -rf /var/lib/apt/lists/*\n\n# generate locales\nRUN set -eux; \\\n    echo \"de_DE.UTF-8 UTF-8\" >> /etc/locale.gen; \\\n    echo \"en_GB.UTF-8 UTF-8\" >> /etc/locale.gen; \\\n    echo \"es_ES.UTF-8 UTF-8\" >> /etc/locale.gen; \\\n    echo \"it_IT.UTF-8 UTF-8\" >> /etc/locale.gen; \\\n    echo \"nl_NL.UTF-8 UTF-8\" >> /etc/locale.gen; \\\n    echo \"pt_BR.UTF-8 UTF-8\" >> /etc/locale.gen; \\\n    echo \"sv_SE.UTF-8 UTF-8\" >> /etc/locale.gen; \\\n    locale-gen\n\n# install PHP extensions\nRUN set -ex; \\\n    \\\n    # mark packages as being manually installed\n    # see https://manpages.debian.org/stretch/apt/apt-mark.8.en.html\n    savedAptMark=\"$(apt-mark showmanual)\"; \\\n    \\\n    # install via apt-get\n    # see https://manpages.debian.org/stretch/apt/apt-get.8.en.html\n    apt-get update; \\\n    apt-get install -y --quiet --no-install-recommends \\\n        libfreetype6-dev \\\n        libjpeg-dev \\\n        libmagickwand-dev \\\n        libmcrypt-dev \\\n        libpng-dev \\\n        libwebp-dev \\\n        libzip-dev \\\n    ; \\\n    \\\n    # install and configure via docker-php-ext\n    # see https://github.com/docker-library/docs/tree/master/php#how-to-install-more-php-extensions\n    docker-php-ext-configure gd --with-freetype --with-jpeg --with-webp; \\\n    docker-php-ext-install -j \"$(nproc)\" \\\n        exif \\\n        gd \\\n        intl \\\n        pdo_mysql \\\n        zip \\\n    # delete output (except errors)\n    > /dev/null \\\n    ; \\\n    \\\n    # install imagick\n    # https://pecl.php.net/package/imagick\n    pecl install imagick; \\\n        docker-php-ext-enable imagick; \\\n        rm -r /tmp/pear; \\\n    \\\n    # reset apt-mark's \"manual\" list so that \"purge --auto-remove\" will remove all build dependencies\n    # see https://github.com/docker-library/wordpress/blob/master/Dockerfile-debian.template\n    apt-mark auto '.*' > /dev/null; \\\n    apt-mark manual $savedAptMark; \\\n    ldd \"$(php -r 'echo ini_get(\"extension_dir\");')\"/*.so \\\n        | awk '/=>/ { print $3 }' \\\n        | sort -u \\\n        | xargs -r dpkg-query -S \\\n        | cut -d: -f1 \\\n        | sort -u \\\n        | xargs -rt apt-mark manual; \\\n    \\\n    apt-get purge -y --auto-remove -o APT::AutoRemove::RecommendsImportant=false; \\\n    rm -rf /var/lib/apt/lists/*\n\n# enable OPcache\n# see https://secure.php.net/manual/en/opcache.installation.php\nRUN set -eux; \\\n    docker-php-ext-enable opcache; \\\n    { \\\n        echo 'opcache.memory_consumption=128'; \\\n        echo 'opcache.interned_strings_buffer=8'; \\\n        echo 'opcache.max_accelerated_files=4000'; \\\n        echo 'opcache.revalidate_freq=2'; \\\n        echo 'opcache.fast_shutdown=1'; \\\n    } > /usr/local/etc/php/conf.d/opcache-recommended.ini\n\n# enable apache modules\nRUN set -eux; \\\n    a2enmod expires headers rewrite\n\n# create mount point for web root\nVOLUME /var/www/html\n\n# declare REDAXO version and checksum\nENV REDAXO_VERSION=5.13.3 REDAXO_SHA=0f84089bc8e1b77fbe30d718d41385fd4b177e3a\n\n# fetch REDAXO, validate checksum and extract to tmp folder\nRUN set -e; \\\n    curl -f -Ls -o redaxo.zip https://github.com/redaxo/redaxo/releases/download/${REDAXO_VERSION}/redaxo_${REDAXO_VERSION}.zip; \\\n    echo \"${REDAXO_SHA} *redaxo.zip\" | shasum -c -a 256; \\\n    unzip -oq redaxo.zip -d /usr/src/redaxo; \\\n    rm redaxo.zip; \\\n    chown -R www-data:www-data /usr/src/redaxo\n\n# copy and run entrypoint\nCOPY docker-entrypoint.sh /usr/local/bin/\nENTRYPOINT [\"docker-entrypoint.sh\"]\n\n# run CMD\nCMD [\"apache2-foreground\"]\n"
}