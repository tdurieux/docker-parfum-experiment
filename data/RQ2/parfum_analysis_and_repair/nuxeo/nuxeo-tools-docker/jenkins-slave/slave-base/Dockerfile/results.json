{
  "startTime": 1674216008568,
  "endTime": 1674216010677,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 86,
        "lineEnd": 86,
        "columnStart": 4,
        "columnEnd": 167
      }
    },
    {
      "rule": "npmCacheCleanAfterInstall",
      "position": {
        "lineStart": 111,
        "lineEnd": 111,
        "columnStart": 4,
        "columnEnd": 42
      }
    },
    {
      "rule": "wgetUseHttpsUrl",
      "position": {
        "lineStart": 31,
        "lineEnd": 31,
        "columnStart": 4,
        "columnEnd": 133
      }
    },
    {
      "rule": "wgetUseHttpsUrl",
      "position": {
        "lineStart": 37,
        "lineEnd": 37,
        "columnStart": 4,
        "columnEnd": 111
      }
    },
    {
      "rule": "wgetUseHttpsUrl",
      "position": {
        "lineStart": 42,
        "lineEnd": 42,
        "columnStart": 4,
        "columnEnd": 111
      }
    },
    {
      "rule": "wgetUseHttpsUrl",
      "position": {
        "lineStart": 48,
        "lineEnd": 48,
        "columnStart": 4,
        "columnEnd": 111
      }
    },
    {
      "rule": "wgetUseHttpsUrl",
      "position": {
        "lineStart": 54,
        "lineEnd": 54,
        "columnStart": 4,
        "columnEnd": 124
      }
    },
    {
      "rule": "wgetUseHttpsUrl",
      "position": {
        "lineStart": 63,
        "lineEnd": 63,
        "columnStart": 4,
        "columnEnd": 87
      }
    },
    {
      "rule": "wgetUseHttpsUrl",
      "position": {
        "lineStart": 108,
        "lineEnd": 108,
        "columnStart": 4,
        "columnEnd": 99
      }
    },
    {
      "rule": "wgetUseHttpsUrl",
      "position": {
        "lineStart": 114,
        "lineEnd": 114,
        "columnStart": 4,
        "columnEnd": 90
      }
    },
    {
      "rule": "wgetUseHttpsUrl",
      "position": {
        "lineStart": 119,
        "lineEnd": 119,
        "columnStart": 4,
        "columnEnd": 202
      }
    },
    {
      "rule": "configureShouldUseBuildFlag",
      "position": {
        "lineStart": 110,
        "lineEnd": 110,
        "columnStart": 39,
        "columnEnd": 50
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 32,
        "lineEnd": 32,
        "columnStart": 4,
        "columnEnd": 52
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 38,
        "lineEnd": 38,
        "columnStart": 4,
        "columnEnd": 55
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 43,
        "lineEnd": 43,
        "columnStart": 4,
        "columnEnd": 55
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 49,
        "lineEnd": 49,
        "columnStart": 4,
        "columnEnd": 55
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 55,
        "lineEnd": 55,
        "columnStart": 4,
        "columnEnd": 55
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 109,
        "lineEnd": 109,
        "columnStart": 25,
        "columnEnd": 53
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 15,
        "lineEnd": 15,
        "columnStart": 4,
        "columnEnd": 139
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 27,
        "lineEnd": 27,
        "columnStart": 4,
        "columnEnd": 132
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 71,
        "lineEnd": 71,
        "columnStart": 4,
        "columnEnd": 237
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 79,
        "lineEnd": 79,
        "columnStart": 4,
        "columnEnd": 101
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 85,
        "lineEnd": 85,
        "columnStart": 4,
        "columnEnd": 56
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 15,
        "lineEnd": 15,
        "columnStart": 4,
        "columnEnd": 139
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 27,
        "lineEnd": 27,
        "columnStart": 4,
        "columnEnd": 132
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 71,
        "lineEnd": 71,
        "columnStart": 4,
        "columnEnd": 237
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 79,
        "lineEnd": 79,
        "columnStart": 4,
        "columnEnd": 101
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 85,
        "lineEnd": 85,
        "columnStart": 4,
        "columnEnd": 56
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 15,
        "lineEnd": 15,
        "columnStart": 4,
        "columnEnd": 139
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 27,
        "lineEnd": 27,
        "columnStart": 4,
        "columnEnd": 132
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 71,
        "lineEnd": 71,
        "columnStart": 4,
        "columnEnd": 237
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 79,
        "lineEnd": 79,
        "columnStart": 4,
        "columnEnd": 101
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 85,
        "lineEnd": 85,
        "columnStart": 4,
        "columnEnd": 56
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 15,
        "lineEnd": 15,
        "columnStart": 4,
        "columnEnd": 163
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 27,
        "lineEnd": 27,
        "columnStart": 4,
        "columnEnd": 155
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 71,
        "lineEnd": 71,
        "columnStart": 4,
        "columnEnd": 261
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 79,
        "lineEnd": 79,
        "columnStart": 4,
        "columnEnd": 125
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 85,
        "lineEnd": 85,
        "columnStart": 4,
        "columnEnd": 80
      }
    }
  ],
  "repairedDockerfile": "# Jenkins slave base\n#\n# VERSION               0.0.1\n\nFROM       ubuntu:trusty\nMAINTAINER Nuxeo Packagers <packagers@nuxeo.com>\n\nRUN useradd -d /opt/jenkins -m -s /bin/bash jenkins\n\nADD files/mirror.local /etc/apt/sources.list\n\nENV DEBIAN_FRONTEND noninteractive\nRUN dpkg --add-architecture i386 && apt-get update && apt-get -q -y upgrade\n\n# Install basic tools\nRUN apt-get -q --no-install-recommends -y install ssh sudo lynx links curl wget sysstat logtail vim build-essential zip unzip moreutils apt-transport-https locales && rm -rf /var/lib/apt/lists/*;\n\n# Update default locale\nRUN locale-gen en_US.UTF-8\nRUN dpkg-reconfigure locales\nRUN update-locale LANG=en_US.UTF-8\nENV LANG en_US.UTF-8\nENV LC_ALL en_US.UTF-8\n\n# Install tools for Jenkins\nRUN mkdir -p /opt/build/tools\n\nRUN apt-get -q --no-install-recommends -y install openjdk-6-jdk openjdk-7-jdk git mercurial subversion ant ant-contrib xvfb x11vnc fluxbox chromium-browser && rm -rf /var/lib/apt/lists/*;\nRUN ln -s /usr/lib/jvm/java-1.7.0-openjdk-amd64 /usr/lib/jvm/java-7-openjdk\n\n## Firefox\nRUN wget -O /tmp/firefox.tar.bz2 https://ftp.mozilla.org/pub/mozilla.org/firefox/releases/26.0/linux-x86_64/en-US/firefox-26.0.tar.bz2\nRUN tar xjf /tmp/firefox.tar.bz2 -C /opt/build/tools && rm /tmp/firefox.tar.bz2\nRUN ln -s /opt/build/tools/firefox/firefox /usr/bin/firefox\nRUN rm /tmp/firefox.tar.bz2\n\n## Maven\nRUN wget -O /tmp/maven-2.2.1.tar.gz https://archive.apache.org/dist/maven/binaries/apache-maven-2.2.1-bin.tar.gz\nRUN tar xzf /tmp/maven-2.2.1.tar.gz -C /opt/build/tools && rm /tmp/maven-2.2.1.tar.gz\nRUN ln -s /opt/build/tools/apache-maven-2.2.1 /opt/build/tools/maven2\nRUN rm /tmp/maven-2.2.1.tar.gz\n\nRUN wget -O /tmp/maven-3.0.5.tar.gz https://archive.apache.org/dist/maven/binaries/apache-maven-3.0.5-bin.tar.gz\nRUN tar xzf /tmp/maven-3.0.5.tar.gz -C /opt/build/tools && rm /tmp/maven-3.0.5.tar.gz\nRUN ln -s /opt/build/tools/apache-maven-3.0.5 /opt/build/tools/maven-3.0\nRUN ln -s /opt/build/tools/apache-maven-3.0.5 /opt/build/tools/maven3.0\nRUN rm /tmp/maven-3.0.5.tar.gz\n\nRUN wget -O /tmp/maven-3.1.1.tar.gz https://archive.apache.org/dist/maven/binaries/apache-maven-3.1.1-bin.tar.gz\nRUN tar xzf /tmp/maven-3.1.1.tar.gz -C /opt/build/tools && rm /tmp/maven-3.1.1.tar.gz\nRUN ln -s /opt/build/tools/apache-maven-3.1.1 /opt/build/tools/maven-3.1\nRUN ln -s /opt/build/tools/apache-maven-3.1.1 /opt/build/tools/maven3.1\nRUN rm /tmp/maven-3.1.1.tar.gz\n\nRUN wget -O /tmp/maven-3.2.3.tar.gz https://www.us.apache.org/dist/maven/maven-3/3.2.3/binaries/apache-maven-3.2.3-bin.tar.gz\nRUN tar xzf /tmp/maven-3.2.3.tar.gz -C /opt/build/tools && rm /tmp/maven-3.2.3.tar.gz\nRUN ln -s /opt/build/tools/apache-maven-3.2.3 /opt/build/tools/maven-3.2\nRUN ln -s /opt/build/tools/apache-maven-3.2.3 /opt/build/tools/maven3.2\nRUN rm /tmp/maven-3.2.3.tar.gz\n\nRUN ln -s /opt/build/tools/maven-3.2/bin/mvn /usr/bin/mvn\n\n## Gradle\nRUN wget -O /tmp/gradle.zip https://services.gradle.org/distributions/gradle-1.6-bin.zip\nRUN unzip -d /opt/build/tools /tmp/gradle.zip\nRUN ln -s /opt/build/tools/gradle-1.6 /opt/build/tools/gradle\nRUN ln -s /opt/build/tools/gradle/bin/gradle /usr/bin/gradle\nRUN rm /tmp/gradle.zip\n\n\n# Install other misc dependencies\nRUN apt-get -q --no-install-recommends -y install linkchecker s3cmd python-dev python-setuptools python-lxml python-webunit python-docutils python-reportlab python-pypdf gnuplot python-pip tcpwatch-httpproxy dpkg-dev devscripts debhelper cdbs gnupg redis-server && rm -rf /var/lib/apt/lists/*;\nRUN easy_install -f http://funkload.nuxeo.org/snapshots/ -U funkload\n#RUN echo \"deb https://get.docker.io/ubuntu docker main\" > /etc/apt/sources.list.d/docker.list\n#RUN apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv-keys 36A1D7869245C8950F966E92D8576A8BA88D21E9\n#RUN apt-get update\n#RUN apt-get -q -y install lxc-docker\n\n# Install converters\nRUN apt-get -q --no-install-recommends -y install imagemagick ffmpeg2theora ufraw poppler-utils libreoffice libwpd-tools gimp && rm -rf /var/lib/apt/lists/*;\nRUN git clone https://github.com/nuxeo/ffmpeg-nuxeo.git\nENV BUILD_YASM true\nRUN cd ffmpeg-nuxeo && ./build-all.sh true\n\n# Install Android SDK\nRUN apt-get -q --no-install-recommends -y install libstdc++6:i386 lib32z1 expect && rm -rf /var/lib/apt/lists/*;\nRUN curl -f -L -Oandroid-sdk-installer https://raw.githubusercontent.com/embarkmobile/android-sdk-installer/f11ccc15b6f9d43eb1e7a61d3bc0939cc3827545/android-sdk-installer\nRUN perl -p -i -E 's/-3L/-L/g' android-sdk-installer\nENV ANDROID_COMPONENTS platform-tools,build-tools-18.1.0,android-17,sysimg-17,android-16,sysimg-16,android-8,sysimg-8,addon-google_apis-google-16,extra-android-support,extra-google-google_play_services,extra-google-m2repository,extra-android-m2repository\nRUN bash android-sdk-installer --install=$ANDROID_COMPONENTS --dir=/opt/build/tools/android-installer-broken\nRUN chown -R jenkins /opt/build/tools/android-installer-broken/*\nRUN cp -Rp /opt/build/tools/android-installer-broken /opt/build/tools/android-installer\nRUN rm -rf /opt/build/tools/android-installer-broken\nRUN perl -p -i -e 's/android-installer-broken/android-installer/g' /opt/build/tools/android-installer/env\nRUN ln -s /opt/build/tools/android-installer/android-sdk-linux /opt/build/tools/android\nRUN ln -s /opt/build/tools/android/platform-tools/adb /opt/build/tools/android/tools/adb\nRUN ln -s /opt/build/tools/android/build-tools/18.1.0/aapt /opt/build/tools/android/platform-tools/aapt\nRUN rm android-sdk-installer\n# Initialize maven repository with android artifacts\nRUN su jenkins -c 'cd /opt/jenkins && git clone https://github.com/mosabua/maven-android-sdk-deployer.git'\nRUN su jenkins -c 'cd /opt/jenkins/maven-android-sdk-deployer && source /opt/build/tools/android-installer/env && mvn install -P4.1'\n\n# Add Oracle JDBC drivers\nADD tmpfiles/m2repo/com /opt/jenkins/.m2/repository/com\nRUN chown -R jenkins /opt/jenkins/.m2/repository/com\n\n# Install nodejs and friends\nRUN mkdir -p /usr/local/src\nRUN wget -O/usr/local/src/node-v0.10.32.tar.gz https://nodejs.org/dist/v0.10.32/node-v0.10.32.tar.gz\nRUN cd /usr/local/src && tar xzf node-v0.10.32.tar.gz && rm node-v0.10.32.tar.gz\nRUN cd /usr/local/src/node-v0.10.32 && ./configure --build=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\" && make && make install\nRUN npm install -g yo grunt-cli gulp bower && npm cache clean --force;\n\n# Install Java 6\nRUN wget -q -O/tmp/jdk6.bin \"https://javadl.sun.com/webapps/download/AutoDL?BundleId=63975\"\nWORKDIR /usr/lib/jvm\nRUN sh /tmp/jdk6.bin -noregister && ln -s /usr/lib/jvm/jdk1.6.0_33 /usr/lib/jvm/java-6-sun && rm /tmp/jdk6.bin\n\n# Install Java 8\nRUN wget -q -O/tmp/jdk-8-linux-x64.tgz --no-check-certificate --header 'Cookie: oraclelicense=accept-securebackup-cookie' 'https://download.oracle.com/otn-pub/java/jdk/8u25-b17/jdk-8u25-linux-x64.tar.gz'\nWORKDIR /usr/lib/jvm\nRUN tar xzf /tmp/jdk-8-linux-x64.tgz && ln -s /usr/lib/jvm/jdk1.8.0_25 /usr/lib/jvm/java-8 && rm /tmp/jdk-8-linux-x64.tgz\n\n"
}