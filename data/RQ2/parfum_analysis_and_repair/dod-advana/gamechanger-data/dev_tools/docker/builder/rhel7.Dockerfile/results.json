{
  "startTime": 1674217946732,
  "endTime": 1674217947512,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 49,
        "lineEnd": 49,
        "columnStart": 6,
        "columnEnd": 125
      }
    },
    {
      "rule": "yumInstallRmVarCacheYum",
      "position": {
        "lineStart": 9,
        "lineEnd": 9,
        "columnStart": 6,
        "columnEnd": 91
      }
    },
    {
      "rule": "yumInstallRmVarCacheYum",
      "position": {
        "lineStart": 11,
        "lineEnd": 11,
        "columnStart": 6,
        "columnEnd": 60
      }
    },
    {
      "rule": "yumInstallRmVarCacheYum",
      "position": {
        "lineStart": 15,
        "lineEnd": 16,
        "columnStart": 6,
        "columnEnd": 26
      }
    },
    {
      "rule": "yumInstallRmVarCacheYum",
      "position": {
        "lineStart": 17,
        "lineEnd": 21,
        "columnStart": 6,
        "columnEnd": 49
      }
    },
    {
      "rule": "yumInstallRmVarCacheYum",
      "position": {
        "lineStart": 22,
        "lineEnd": 22,
        "columnStart": 6,
        "columnEnd": 95
      }
    },
    {
      "rule": "yumInstallRmVarCacheYum",
      "position": {
        "lineStart": 23,
        "lineEnd": 41,
        "columnStart": 6,
        "columnEnd": 17
      }
    },
    {
      "rule": "yumInstallRmVarCacheYum",
      "position": {
        "lineStart": 50,
        "lineEnd": 50,
        "columnStart": 6,
        "columnEnd": 36
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM --platform=x86_64 centos:centos7.9.2009\n\nUSER root\n\nARG SCL_PYTHON_VERSION=\"38\"\n\nRUN \\\n      rpm --import https://dl.fedoraproject.org/pub/epel/RPM-GPG-KEY-EPEL \\\n  &&  rpm --import https://dl.fedoraproject.org/pub/epel/RPM-GPG-KEY-EPEL-7 \\\n  &&  yum install -y https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm \\\n  &&  rpm --import https://repo.ius.io/RPM-GPG-KEY-IUS-7 \\\n  && yum install -y https://repo.ius.io/ius-release-el7.rpm && rm -rf /var/cache/yum\n\n# Basic builder packages + some extras\nRUN \\\n      yum install -y \\\n        centos-release-scl \\\n  &&  yum install -y \\\n        git224 \\\n        devtoolset-10 \\\n        \"rh-python${SCL_PYTHON_VERSION}\" \\\n        \"rh-python${SCL_PYTHON_VERSION}-scldevel\" \\\n  &&  yum install -y https://corretto.aws/downloads/latest/amazon-corretto-11-x64-linux-jdk.rpm \\\n  &&  yum install -y \\\n        rpm-build \\\n        rpm-sign \\\n        redhat-rpm-config \\\n        rpmlint \\\n        bzip2 \\\n        tar \\\n        zip \\\n        unzip \\\n        gzip \\\n        zlib \\\n        zlib-devel \\\n        vim \\\n        which \\\n        make \\\n        automake \\\n        autoconf \\\n        libtool \\\n        diffutils \\\n  && yum clean all -y && rm -rf /var/cache/yum\n\n# Make sure all apps can find java ...\nENV JAVA_HOME=/etc/alternatives/java_sdk\n\n# Install GIT LFS\nRUN \\\n      curl -f -L -o /tmp/gitlfs.rpm https://packagecloud.io/github/git-lfs/packages/el/7/git-lfs-3.0.1-1.el7.x86_64.rpm/download \\\n  && yum install -y /tmp/gitlfs.rpm \\\n  && rm -f /tmp/gitlfs.rpm && rm -rf /var/cache/yum\n\n# AWS CLI\nRUN \\\n    curl -LfSo /tmp/awscliv2.zip \"https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip\" \\\n    && echo \"[INFO] Installing AWS CLI ...\" && ( \\\n      unzip -q /tmp/awscliv2.zip -d /opt \\\n      &&  /opt/aws/install \\\n      &&  rm -f  /tmp/awscliv2.zip \\\n  ) 2>&1 1>/dev/null\n\n# Make sure builder user exists\nARG BUILDER_UNAME=builder\nARG BUILDER_UID=1337\nARG BUILDER_GID=1337\n\n# create group & user\nRUN \\\n  ( \\\n    (getent group \"${BUILDER_GID}\" &> /dev/null) \\\n    || groupadd \"${BUILDER_UNAME}\" \\\n        --gid \"${BUILDER_GID}\" \\\n  ) && ( \\\n    useradd \"${BUILDER_UNAME}\" \\\n      --uid \"${BUILDER_UID}\" \\\n      --gid \"${BUILDER_GID}\" \\\n      --home-dir \"/home/${BUILDER_UNAME}\" \\\n      --create-home \\\n      -p \"${BUILDER_UNAME}\" \\\n  )\n\n# Entrypoint with all SCL's/ENV enabled\nCOPY ./dev_tools/docker/builder/entrypoint.sh /usr/bin/entrypoint\nRUN chmod a+rx \"/usr/bin/entrypoint\"\n\n# Thou shall not root\nUSER \"${BUILDER_UID}:${BUILDER_GID}\"\n\n# Setup Skeleton for RPM Builds\nENV HOME=\"/home/${BUILDER_UNAME}\"\nENV RPM_TOPDIR=\"${HOME}/rpmbuild\"\nRUN mkdir -p \"${RPM_TOPDIR}\"/{BUILD,RPMS,SOURCES,SPECS,SRPMS}\nRUN echo '%_topdir %{getenv:RPM_TOPDIR}/rpmbuild' > \"${RPM_TOPDIR}/.rpmmacros\"\n\nENV \\\n    BASH_ENV=\"/usr/bin/entrypoint\" \\\n    ENV=\"/usr/bin/entrypoint\" \\\n    PROMPT_COMMAND=\". /usr/bin/entrypoint\" \\\n    SCL_PYTHON_VERSION=\"$SCL_PYTHON_VERSION\"\n\nWORKDIR \"${HOME}\"\n\nENTRYPOINT [ \"/usr/bin/entrypoint\" ]"
}