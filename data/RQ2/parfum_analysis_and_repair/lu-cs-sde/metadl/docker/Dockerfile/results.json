{
  "startTime": 1674215758663,
  "endTime": 1674215760037,
  "originalSmells": [
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 93,
        "lineEnd": 93,
        "columnStart": 4,
        "columnEnd": 65
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 108,
        "lineEnd": 108,
        "columnStart": 4,
        "columnEnd": 23
      }
    },
    {
      "rule": "configureShouldUseBuildFlag",
      "position": {
        "lineStart": 73,
        "lineEnd": 73,
        "columnStart": 42,
        "columnEnd": 89
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 19,
        "lineEnd": 45,
        "columnStart": 22,
        "columnEnd": 11
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 49,
        "lineEnd": 49,
        "columnStart": 4,
        "columnEnd": 42
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 55,
        "lineEnd": 56,
        "columnStart": 4,
        "columnEnd": 15
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 59,
        "lineEnd": 59,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 62,
        "lineEnd": 62,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 63,
        "lineEnd": 63,
        "columnStart": 4,
        "columnEnd": 34
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 104,
        "lineEnd": 104,
        "columnStart": 4,
        "columnEnd": 44
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 120,
        "lineEnd": 120,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 49,
        "lineEnd": 49,
        "columnStart": 4,
        "columnEnd": 42
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 55,
        "lineEnd": 56,
        "columnStart": 4,
        "columnEnd": 15
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 59,
        "lineEnd": 59,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 62,
        "lineEnd": 62,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 63,
        "lineEnd": 63,
        "columnStart": 4,
        "columnEnd": 34
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 104,
        "lineEnd": 104,
        "columnStart": 4,
        "columnEnd": 44
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 120,
        "lineEnd": 120,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 19,
        "lineEnd": 45,
        "columnStart": 22,
        "columnEnd": 11
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 49,
        "lineEnd": 49,
        "columnStart": 4,
        "columnEnd": 42
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 55,
        "lineEnd": 56,
        "columnStart": 4,
        "columnEnd": 15
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 59,
        "lineEnd": 59,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 62,
        "lineEnd": 62,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 63,
        "lineEnd": 63,
        "columnStart": 4,
        "columnEnd": 34
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 104,
        "lineEnd": 104,
        "columnStart": 4,
        "columnEnd": 44
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 120,
        "lineEnd": 120,
        "columnStart": 4,
        "columnEnd": 27
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 49,
        "lineEnd": 49,
        "columnStart": 4,
        "columnEnd": 66
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 55,
        "lineEnd": 56,
        "columnStart": 4,
        "columnEnd": 15
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 59,
        "lineEnd": 59,
        "columnStart": 4,
        "columnEnd": 51
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 62,
        "lineEnd": 62,
        "columnStart": 4,
        "columnEnd": 54
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 63,
        "lineEnd": 63,
        "columnStart": 4,
        "columnEnd": 58
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 104,
        "lineEnd": 104,
        "columnStart": 4,
        "columnEnd": 68
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 120,
        "lineEnd": 120,
        "columnStart": 4,
        "columnEnd": 51
      }
    }
  ],
  "repairedDockerfile": "FROM ubuntu:18.04\n\nARG SOUFFLE_GIT\nARG SOUFFLE_HASH\n\nARG JAVADL_GIT\nARG JAVADL_HASH\n\nARG JAVADL_INC_EVAL_GIT\nARG JAVADL_INC_EVAL_HASH\n\nARG JAVADL_EVAL_GIT\nARG JAVADL_EVAL_HASH\n\n\n# RUN useradd -m javadl && echo javadl:javadl | chpasswd && \\\n# \tusermod -aG sudo javadl\n\n# General-purpose utilities\nRUN apt-get update && apt-get -y --no-install-recommends install \\\n\tbash \\\n\tgit \\\n\tgdb \\\n\tgcc \\\n\temacs \\\n\tvim \\\n\tnano \\\n\tsudo \\\n\tautoconf \\\n\tautomake \\\n\tbison \\\n\tbuild-essential \\\n\tclang \\\n\tdoxygen \\\n\tflex \\\n\tg++ \\\n\tgit \\\n\tlibffi-dev \\\n\tlibncurses5-dev \\\n\tlibtool \\\n\tlibsqlite3-dev \\\n\tmake \\\n\tmcpp \\\n\tpython \\\n\tsqlite \\\n\tzlib1g-dev && rm -rf /var/lib/apt/lists/*;\n\n\n# Locales (use UTF-8 instead of ASCII)\nRUN apt-get install --no-install-recommends -y locales locales-all && rm -rf /var/lib/apt/lists/*;\nENV LC_ALL en_US.UTF-8\nENV LANG en_US.UTF-8\nENV LANGUAGE en_US.UTF-8\n\n# Java; Java 8 is needed by Defects4J, Java 11 for everything else\nRUN apt-get -y --no-install-recommends install openjdk-8-jdk \\\n\topenjdk-11-jdk && rm -rf /var/lib/apt/lists/*;\n\n# Swig, needed for JavaDL to be able to interface Souffle-generated program\nRUN apt-get -y --no-install-recommends install swig && rm -rf /var/lib/apt/lists/*;\n\n# Python\nRUN apt-get -y --no-install-recommends install python3 && rm -rf /var/lib/apt/lists/*;\nRUN apt-get -y --no-install-recommends install python3-pip && rm -rf /var/lib/apt/lists/*;\n\nRUN mkdir /work\n\n# Switch user\n# USER javadl\n\n# Build Souffle\nRUN cd /work && git clone $SOUFFLE_GIT souffle\nRUN cd /work/souffle/ && git checkout $SOUFFLE_HASH\nRUN cd /work/souffle && sh ./bootstrap && ./configure --build=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\" --enable-swig --enable-64bit-domain && make -j4\nRUN echo \"export PATH=$PATH:/work/souffle/src/\" >> ~/.bash_aliases\n\n# Build JavaDL\nRUN git config --global url.\"https://git.cs.lth.se/\".insteadOf \"git://git.cs.lth.se:\"\nRUN git config --global url.\"https://git.cs.lth.se/\".insteadOf \"git@git.cs.lth.se:\"\n\nRUN cd /work && git clone $JAVADL_GIT\nRUN cd /work/metadl && git checkout $JAVADL_HASH && git submodule update --init --recursive\n\nRUN cd /work/metadl && ./gradlew jar\n\n# Build the hybrid libraries\nENV PATH=\"${PATH}:/work/souffle/src\"\nRUN cd /work/metadl/examples/metadl-java/ && touch srcs.csv && ./gen-hybrid.sh\n\n# Check out the evaluation framework\nRUN cd /work && git clone $JAVADL_INC_EVAL_GIT javadl-inc-eval\nRUN cd /work/javadl-inc-eval && git checkout $JAVADL_INC_EVAL_HASH\n# Install the packages used by the evaluation framework\nRUN pip3 install --no-cache-dir -r /work/javadl-inc-eval/python/requirements.txt\n\nRUN cd /work && git clone $JAVADL_EVAL_GIT javadl-eval-1\nRUN cd /work && git clone $JAVADL_EVAL_GIT javadl-eval-2\nRUN cd /work && git clone $JAVADL_EVAL_GIT javadl-eval-3\n\n\n# Change to Java 8\n# USER root\nRUN echo \"2\" | sudo update-alternatives --config java && java -version\nRUN echo \"2\" | sudo update-alternatives --config javac && javac -version\nRUN apt-get -y --no-install-recommends install curl unzip subversion && rm -rf /var/lib/apt/lists/*;\nRUN perl -MCPAN -e 'install Bundle::DBI'\n\n# USER javadl\nRUN pip3 install --no-cache-dir joblib\nENV JAVA_TOOL_OPTIONS=\"-Dfile.encoding=UTF8\"\nRUN cd /work/javadl-eval-1 && ./scripts/download_defects4j.sh\nRUN cd /work/javadl-eval-2 && ./scripts/download_defects4j.sh\nRUN cd /work/javadl-eval-3 && ./scripts/download_defects4j.sh\n\n\n# Change back to Java 11\n# USER root\nRUN echo \"0\" | sudo update-alternatives --config java && java -version\nRUN echo \"0\" | sudo update-alternatives --config javac && javac -version\n\nRUN apt-get -y --no-install-recommends install wget && rm -rf /var/lib/apt/lists/*;\n\n# Download Error Prone and SpotBugs\n# USER javadl\nRUN cd /work/javadl-eval-1 && ./scripts/download_static_checkers.sh ; echo \"Success\"\nRUN cd /work/javadl-eval-2 && ./scripts/download_static_checkers.sh ; echo \"Success\"\nRUN cd /work/javadl-eval-3 && ./scripts/download_static_checkers.sh ; echo \"Success\"\n# Copy over JavaDL to the static checkers folder (TODO: symlink instead)\nRUN cd /work/javadl-eval-1 && cp -r /work/metadl ./static-checkers\n\n# Add the script for running the analysis quality part of the evaluation\nCOPY run_quality.bash /work\nCOPY run_performance.bash /work\n\n# Point to rt.jar\nENV METADL_JAVA_RT=/usr/lib/jvm/java-1.8.0-openjdk-amd64/jre/lib/rt.jar\n\n# RUN cd /work/javadl-eval-1 && \\\n# \techo \"2\" | sudo update-alternatives --config java && \\\n# \techo \"2\" | sudo update-alternatives --config javac && \\\n# \tjavac -version && \\\n# \t./scripts/download_defects4j.sh && \\\n# \techo \"0\" | sudo update-alternatives --config java && \\\n# \techo \"0\" | sudo update-alternatives --config javac && \\\n# \tjavac -version\n"
}