{
  "startTime": 1674256216355,
  "endTime": 1674256216839,
  "originalSmells": [
    {
      "rule": "yumInstallRmVarCacheYum",
      "position": {
        "lineStart": 21,
        "lineEnd": 23,
        "columnStart": 4,
        "columnEnd": 12
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "# Copyright Â© 2019, Octave Online LLC\n#\n# This file is part of Octave Online Server.\n#\n# Octave Online Server is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as published by\n# the Free Software Foundation, either version 3 of the License, or (at your\n# option) any later version.\n#\n# Octave Online Server is distributed in the hope that it will be useful, but\n# WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY\n# or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU Affero General Public\n# License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with Octave Online Server.  If not, see\n# <https://www.gnu.org/licenses/>.\n\nARG FULL_BASE_IMAGE\nFROM $FULL_BASE_IMAGE\n\nRUN yum install -y \\\n\tjson-c-devel \\\n\tlibuv-devel && rm -rf /var/cache/yum\n\n# Copy and compile host.c\n# Note: path is relative to repository root\nCOPY back-octave back-octave\nRUN cd back-octave && make && make install\n\n# Apply patches\n\n### 4.0.1-rc1 ###\n# RUN cd octave && \\\n# \thg update 323e92c4589f && \\\n# \thg import ../back-octave/oo-changesets/001-d38b7c534496.hg.txt && \\\n# \thg import ../back-octave/oo-changesets/002-d3de6023e846.hg.txt && \\\n# \thg import ../back-octave/oo-changesets/003-4d28376c34a8.hg.txt && \\\n# \thg import ../back-octave/oo-changesets/004-6ff3e34eea77.hg.txt && \\\n# \thg import ../back-octave/oo-changesets/005-9e73fe0d92d5.hg.txt && \\\n# \thg import ../back-octave/oo-changesets/006-15d21ceec728.hg.txt && \\\n# \thg import ../back-octave/oo-changesets/007-4d778d6ebbd0.hg.txt && \\\n# \thg import ../back-octave/oo-changesets/008-e8ef7f3333bf.hg.txt && \\\n# \thg import ../back-octave/oo-changesets/009-05f7272c001e.hg.txt && \\\n# \thg import ../back-octave/oo-changesets/010-4a1afb661c55.hg.txt && \\\n# \thg import ../back-octave/oo-changesets/011-7327936fa23e.hg.txt && \\\n# \thg import ../back-octave/oo-changesets/012-84390db50239.hg.txt && \\\n# \thg import ../back-octave/oo-changesets/013-f4110d638cdb.hg.txt && \\\n# \thg import ../back-octave/oo-changesets/014-21fd506b7530.hg.txt\n\n### 4.2.1 ###\n# RUN cd octave && \\\n# \thg import ../back-octave/oo-changesets/100-2d1fd5fdd1d5.hg.txt && \\\n# \thg import ../back-octave/oo-changesets/101-bc8cd93feec5.hg.txt && \\\n# \thg import ../back-octave/oo-changesets/102-30d8ba0fbc32.hg.txt && \\\n# \thg import ../back-octave/oo-changesets/103-352b599bc533.hg.txt && \\\n# \thg import ../back-octave/oo-changesets/104-9475120a3110.hg.txt && \\\n# \thg import ../back-octave/oo-changesets/105-ccbef5c9b050.hg.txt && \\\n# \thg import ../back-octave/oo-changesets/106-91cb270ffac0.hg.txt && \\\n# \thg import ../back-octave/oo-changesets/107-80081f9d8ff7.hg.txt && \\\n# \thg import ../back-octave/oo-changesets/108-9b39ca8bcbfd.hg.txt\n\n### 5.2 ###\n# RUN cd octave && \\\n# \thg import ../back-octave/oo-changesets/200-84cbf166497f.hg.txt && \\\n# \thg import ../back-octave/oo-changesets/201-b993253f19d0.hg.txt && \\\n# \thg import ../back-octave/oo-changesets/202-d9d23f97ba78.hg.txt && \\\n# \thg import ../back-octave/oo-changesets/203-d6b5ffb8e4cc.hg.txt && \\\n# \thg import ../back-octave/oo-changesets/204-e61d7b8918e2.hg.txt\n\n### 6.0.1 (based on 9e7b2625e574) ###\n# RUN cd octave && \\\n# \thg import ../back-octave/oo-changesets/300-d78448f9c483.hg.txt && \\\n# \thg import ../back-octave/oo-changesets/301-97f7d1f4fe83.hg.txt && \\\n# \thg import ../back-octave/oo-changesets/302-8900d7cf8554.hg.txt\n\n### 6.0.1 (based on 171a2857d6d1) ###\n# RUN cd octave && \\\n# \thg import ../back-octave/oo-changesets/310-1e1c91e6cddc.hg.txt\n\n### 6.4.0 (based on 8d7671609955) ###\nRUN cd octave && \\\n\thg import ../back-octave/oo-changesets/320-8d4683a83238.hg.txt && \\\n\thg import ../back-octave/oo-changesets/321-faad58416a3a.hg.txt\n\n### 7.0.1 (based on 117ebe363f56) ###\n# RUN cd octave && \\\n# \thg import ../back-octave/oo-changesets/400-7ade2492e023.hg.txt && \\\n# \thg import ../back-octave/oo-changesets/401-1b33dc797ec9.hg.txt && \\\n# \thg import ../back-octave/oo-changesets/402-b01fa2864d4d.hg.txt && \\\n# \thg import ../back-octave/oo-changesets/403-2813cb96e10f.hg.txt && \\\n# \thg import ../back-octave/oo-changesets/404-acb523f25bb9.hg.txt && \\\n# \thg import ../back-octave/oo-changesets/405-6ad34b0b69e1.hg.txt && \\\n# \thg import ../back-octave/oo-changesets/406-d0df6f16f41e.hg.txt && \\\n# \thg import ../back-octave/oo-changesets/407-df206dd11399.hg.txt && \\\n# \thg import ../back-octave/oo-changesets/408-8184a51579f3.hg.txt\n\n# Re-build with patches\nRUN cd octave/build-oo && make -j8\nRUN cd octave/build-oo && make install\n\n# Monkey-patch bug #42352\n# https://savannah.gnu.org/bugs/?42352\n# RUN touch /usr/local/share/octave/4.2.1/etc/macros.texi\n\n# # Monkey-patch json-c runtime errors\n# ENV LD_LIBRARY_PATH /usr/local/lib\n\n# Install site octaverc.m (formerly part of \"install-site-m\" in Makefile)\nCOPY containers/octave-pkg/octaverc.m /usr/local/share/octave/site/m/startup/octaverc\n\n# Install the java.opts file\nCOPY containers/octave-oo/java.opts /usr/local/share/octave/6.4.0/m/java/java.opts\n"
}