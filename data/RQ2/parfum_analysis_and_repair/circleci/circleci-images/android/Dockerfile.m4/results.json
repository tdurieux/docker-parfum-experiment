{
  "startTime": 1674251379047,
  "endTime": 1674251380675,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 37,
        "lineEnd": 37,
        "columnStart": 4,
        "columnEnd": 62
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 95,
        "lineEnd": 95,
        "columnStart": 4,
        "columnEnd": 111
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 33,
        "lineEnd": 33,
        "columnStart": 9,
        "columnEnd": 41
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 59,
        "lineEnd": 59,
        "columnStart": 4,
        "columnEnd": 39
      }
    },
    {
      "rule": "aptGetInstallUseY",
      "position": {
        "lineStart": 30,
        "lineEnd": 30,
        "columnStart": 32,
        "columnEnd": 60
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 22,
        "lineEnd": 27,
        "columnStart": 37,
        "columnEnd": 19
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 30,
        "lineEnd": 30,
        "columnStart": 32,
        "columnEnd": 60
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 39,
        "lineEnd": 39,
        "columnStart": 32,
        "columnEnd": 67
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 50,
        "lineEnd": 53,
        "columnStart": 9,
        "columnEnd": 24
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "#\nformat(`# DO NOT MODIFY THIS FILE.  THIS FILE HAS BEEN AUTOGENERATED')\n#\nFROM openjdk:11-jdk-slim\n\nLABEL maintainer=\"marc@circleci.com\"\n\n# Initial Command run as `root`.\n\nADD https://raw.githubusercontent.com/circleci/circleci-images/master/android/bin/circle-android /bin/circle-android\nRUN chmod +rx /bin/circle-android\n\n# Skip the first line of the Dockerfile template (FROM ${BASE})\nsyscmd(`tail -n +2 ../shared/images/Dockerfile-basic.template')\n\n# Now commands run as user `circleci`\n\n# Switching user can confuse Docker's idea of $HOME, so we set it explicitly\nENV HOME /home/circleci\n\n# Install Google Cloud SDK\n\nRUN sudo apt-get update -qqy && sudo apt-get install --no-install-recommends -qqy \\\n        python-dev \\\n        python-pip \\\n        python-setuptools \\\n        apt-transport-https \\\n        lsb-release && \\\n    sudo rm -rf /var/lib/apt/lists/*\n\nRUN sudo apt-get update && sudo apt-get install -y --no-install-recommends gcc-multilib && \\\n    sudo rm -rf /var/lib/apt/lists/* && \\\n    sudo pip uninstall crcmod && \\\n    sudo pip install --no-cache-dir --no-cache -U crcmod\n\nRUN export CLOUD_SDK_REPO=\"cloud-sdk-$(lsb_release -c -s)\" && \\\n    echo \"deb https://packages.cloud.google.com/apt $CLOUD_SDK_REPO main\" | sudo tee -a /etc/apt/sources.list.d/google-cloud-sdk.list && \\\n    curl -f https://packages.cloud.google.com/apt/doc/apt-key.gpg | sudo apt-key add -\n\nRUN sudo apt-get update && sudo apt-get install --no-install-recommends -y google-cloud-sdk && \\\n    sudo rm -rf /var/lib/apt/lists/* && \\\n    gcloud config set core/disable_usage_reporting true && \\\n    gcloud config set component_manager/disable_update_check true\n\nARG cmdline_tools=https://dl.google.com/android/repository/commandlinetools-linux-6609375_latest.zip\nARG android_home=/opt/android/sdk\n\n# SHA-256 92ffee5a1d98d856634e8b71132e8a95d96c83a63fde1099be3d86df3106def9\n\nRUN sudo apt-get update && \\\n    sudo apt-get install --no-install-recommends --yes \\\n        xvfb lib32z1 lib32stdc++6 build-essential \\\n        libcurl4-openssl-dev libglu1-mesa libxi-dev libxmu-dev \\\n        libglu1-mesa-dev && \\\n    sudo rm -rf /var/lib/apt/lists/*\n\n# Install Ruby\nRUN sudo apt-get update && \\\n    cd /tmp && wget -O ruby-install-0.6.1.tar.gz https://github.com/postmodern/ruby-install/archive/v0.6.1.tar.gz && \\\n    tar -xzvf ruby-install-0.6.1.tar.gz && \\\n    cd ruby-install-0.6.1 && \\\n    sudo make install && \\\n    ruby-install --cleanup ruby 2.6.1 && \\\n    rm -r /tmp/ruby-install-* && \\\n    sudo rm -rf /var/lib/apt/lists/* && rm ruby-install-0.6.1.tar.gz\n\nENV PATH ${HOME}/.rubies/ruby-2.6.1/bin:${PATH}\nRUN echo 'gem: --env-shebang --no-rdoc --no-ri' >> ~/.gemrc && gem install bundler\n\n# Download and install Android Commandline Tools\nRUN sudo mkdir -p ${android_home}/cmdline-tools && \\\n    sudo chown -R circleci:circleci ${android_home} && \\\n    wget -O /tmp/cmdline-tools.zip -t 5 \"${cmdline_tools}\" && \\\n    unzip -q /tmp/cmdline-tools.zip -d ${android_home}/cmdline-tools && \\\n    rm /tmp/cmdline-tools.zip\n\n# Set environmental variables\n# deprecated upstream, should be removed in next-gen image\nENV ANDROID_HOME ${android_home}\nENV ANDROID_SDK_ROOT ${android_home}\nENV ADB_INSTALL_TIMEOUT 120\nENV PATH=${ANDROID_SDK_ROOT}/emulator:${ANDROID_SDK_ROOT}/cmdline-tools/tools/bin:${ANDROID_SDK_ROOT}/tools:${ANDROID_SDK_ROOT}/tools/bin:${ANDROID_SDK_ROOT}/platform-tools:${PATH}\n\nRUN mkdir ~/.android && echo '### User Sources for Android SDK Manager' > ~/.android/repositories.cfg\n\nRUN yes | sdkmanager --licenses && yes | sdkmanager --update\n\n# Update SDK manager and install system image, platform and build tools\n# Platform tools will be installed manually outside of sdkmanager. This is due\n# to an issue with the current latest version 31.0.3. We'll likely be able to\n# undo this change in the near future.\nRUN sdkmanager \\\n        \"tools\"    \\\n        \"emulator\"    &&    \\\n    cd /opt/android/sdk && \\\n    curl -f -sSL \"https://dl.google.com/android/repository/platform-tools_r31.0.2-linux.zip\" -o platform-tools.zip && \\\n    unzip -o platform-tools.zip && \\\n    rm platform-tools.zip\n\nRUN sdkmanager \\\n  \"build-tools;27.0.0\" \\\n  \"build-tools;27.0.1\" \\\n  \"build-tools;27.0.2\" \\\n  \"build-tools;27.0.3\" \\\n  # 28.0.0 is failing to download from Google for some reason\n  #\"build-tools;28.0.0\" \\\n  \"build-tools;28.0.1\" \\\n  \"build-tools;28.0.2\" \\\n  \"build-tools;28.0.3\" \\\n  \"build-tools;29.0.0\" \\\n  \"build-tools;29.0.1\" \\\n  \"build-tools;29.0.2\" \\\n  \"build-tools;29.0.3\" \\\n  \"build-tools;30.0.0\" \\\n  \"build-tools;30.0.1\" \\\n  \"build-tools;30.0.2\" \\\n  \"build-tools;30.0.3\"\n\n# API_LEVEL string gets replaced by m4\nRUN sdkmanager \"platforms;android-API_LEVEL\"\n"
}