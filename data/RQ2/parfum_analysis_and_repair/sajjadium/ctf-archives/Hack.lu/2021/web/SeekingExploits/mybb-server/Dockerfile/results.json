{
  "startTime": 1674255897811,
  "endTime": 1674255898808,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 10,
        "lineEnd": 10,
        "columnStart": 4,
        "columnEnd": 76
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 7,
        "lineEnd": 7,
        "columnStart": 18,
        "columnEnd": 96
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 8,
        "lineEnd": 8,
        "columnStart": 4,
        "columnEnd": 63
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 8,
        "lineEnd": 8,
        "columnStart": 4,
        "columnEnd": 63
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 7,
        "lineEnd": 7,
        "columnStart": 18,
        "columnEnd": 96
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 8,
        "lineEnd": 8,
        "columnStart": 4,
        "columnEnd": 63
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 8,
        "lineEnd": 8,
        "columnStart": 4,
        "columnEnd": 87
      }
    }
  ],
  "repairedDockerfile": "FROM ubuntu:20.10\n\nENV TZ=Europe/Berlin\nRUN ln -snf /usr/share/zoneinfo/$TZ /etc/localtime && echo $TZ > /etc/timezone\n\n# download mybb\nWORKDIR /var/www/html\nRUN apt update && apt install --no-install-recommends -y unzip apache2 php curl python3 python3-requests python3-pymysql && rm -rf /var/lib/apt/lists/*;\nRUN apt install --no-install-recommends -y libapache2-mod-php php-xml php-mysqli php-gd && rm -rf /var/lib/apt/lists/*;\nRUN a2enmod rewrite\nRUN curl -f https://resources.mybb.com/downloads/mybb_1829.zip -o mybb_1829.zip\nRUN unzip mybb_1829.zip && rm mybb_1829.zip && cp -r Upload/** .\nRUN rm -rf Upload Documentation\nRUN chown -R www-data .\nRUN rm index.html\n\n# install the integration plugin\nCOPY ./exploit_market/emarket-api.php .\nCOPY ./exploit_market/inc/plugins/emarket.php ./inc/plugins/\nRUN mkdir /opt/emarket-data/ && chown www-data /opt/emarket-data/\n\n# deny all requests until the installer finished!\nCOPY .htaccess .htaccess\nCOPY apache2.conf /etc/apache2/\n\n# prepare the installation scripts\nCOPY install.py /opt/installer/install.py\n\n# install mybb, the installer handles the rest\nENTRYPOINT service apache2 start && python3 /opt/installer/install.py\n"
}