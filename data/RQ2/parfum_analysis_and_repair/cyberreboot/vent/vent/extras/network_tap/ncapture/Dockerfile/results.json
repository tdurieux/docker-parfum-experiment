{
  "startTime": 1674251811545,
  "endTime": 1674251812506,
  "originalSmells": [
    {
      "rule": "configureShouldUseBuildFlag",
      "position": {
        "lineStart": 23,
        "lineEnd": 23,
        "columnStart": 7,
        "columnEnd": 18
      }
    },
    {
      "rule": "configureShouldUseBuildFlag",
      "position": {
        "lineStart": 27,
        "lineEnd": 27,
        "columnStart": 7,
        "columnEnd": 18
      }
    },
    {
      "rule": "configureShouldUseBuildFlag",
      "position": {
        "lineStart": 34,
        "lineEnd": 34,
        "columnStart": 7,
        "columnEnd": 35
      }
    },
    {
      "rule": "apkAddUseNoCache",
      "position": {
        "lineStart": 41,
        "lineEnd": 45,
        "columnStart": 7,
        "columnEnd": 8
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM alpine:3.11\nLABEL maintainer=\"Charlie Lewis <clewis@iqt.org>\" \\\n      vent=\"\" \\\n      vent.name=\"ncapture\" \\\n      vent.groups=\"collection,hidden,network,network_tap_child\"\n\nENV BUILDDEPS=\"autoconf automake bison build-base flex gcc git libtool libpcap-dev libpcap linux-headers musl-dev python3-dev yaml-dev\"\nWORKDIR /tmp\n\n# TODO: libwdcap currently requires openssl 1.0.2\nRUN apk add --update $BUILDDEPS \\\n    bash \\\n    coreutils \\\n    python3 \\\n    && rm -rf /var/cache/apk/* \\\n    && mkdir /src \\\n    && cd /src \\\n    && git clone https://github.com/wanduow/wandio.git \\\n    && git clone https://github.com/LibtraceTeam/libtrace.git \\\n    && git clone https://github.com/openssl/openssl -b OpenSSL_1_0_2s \\\n    && git clone https://github.com/wanduow/libwdcap.git \\\n    && cd /src/wandio \\\n    && ./bootstrap.sh \\\n    && ./configure --build=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\" \\\n    && make && make install \\\n    && cd /src/libtrace \\\n    && ./bootstrap.sh \\\n    && ./configure --build=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\" \\\n    && make && make install \\\n    && cd /src/openssl \\\n    && ./config --prefix=/usr/local --openssldir=/usr/local/openssl \\\n    && make && make install \\\n    && cd /src/libwdcap \\\n    && ./bootstrap.sh \\\n    && ./configure --build=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\" --disable-shared \\\n    && make && make install \\\n    && cd examples \\\n    && g++ -fpermissive -o tracecapd tracecapd.c -L/usr/local/lib -Wl,-Bstatic -ltrace -lwdcap -Wl,-Bdynamic -lpcap -lssl -lcrypto -lwandio -lyaml \\\n    && cp tracecapd /usr/local/bin \\\n    && rm -rf /src \\\n    && apk del $BUILDDEPS \\\n    && apk add --no-cache \\\n    libstdc++ \\\n    libgcc \\\n    libpcap \\\n    yaml\n\nVOLUME /tmp\nCOPY . /tmp\n\nRUN pip3 install --no-cache-dir -r requirements.txt\n\nCMD [\"/tmp/run.sh\"]\n"
}