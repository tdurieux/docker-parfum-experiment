{
  "startTime": 1674254197660,
  "endTime": 1674254199439,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 42,
        "lineEnd": 42,
        "columnStart": 4,
        "columnEnd": 76
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 111,
        "lineEnd": 111,
        "columnStart": 4,
        "columnEnd": 73
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 148,
        "lineEnd": 148,
        "columnStart": 4,
        "columnEnd": 46
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 10,
        "lineEnd": 10,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 15,
        "lineEnd": 15,
        "columnStart": 4,
        "columnEnd": 69
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 21,
        "lineEnd": 21,
        "columnStart": 4,
        "columnEnd": 66
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 22,
        "lineEnd": 22,
        "columnStart": 4,
        "columnEnd": 105
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 54,
        "lineEnd": 54,
        "columnStart": 4,
        "columnEnd": 36
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 55,
        "lineEnd": 55,
        "columnStart": 4,
        "columnEnd": 33
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 58,
        "lineEnd": 58,
        "columnStart": 4,
        "columnEnd": 86
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 61,
        "lineEnd": 62,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 65,
        "lineEnd": 65,
        "columnStart": 4,
        "columnEnd": 37
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 71,
        "lineEnd": 74,
        "columnStart": 4,
        "columnEnd": 17
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 78,
        "lineEnd": 79,
        "columnStart": 4,
        "columnEnd": 34
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 82,
        "lineEnd": 85,
        "columnStart": 4,
        "columnEnd": 22
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 92,
        "lineEnd": 92,
        "columnStart": 4,
        "columnEnd": 82
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 121,
        "lineEnd": 121,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 144,
        "lineEnd": 144,
        "columnStart": 4,
        "columnEnd": 89
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 10,
        "lineEnd": 10,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 15,
        "lineEnd": 15,
        "columnStart": 4,
        "columnEnd": 69
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 22,
        "lineEnd": 22,
        "columnStart": 4,
        "columnEnd": 105
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 54,
        "lineEnd": 54,
        "columnStart": 4,
        "columnEnd": 36
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 55,
        "lineEnd": 55,
        "columnStart": 4,
        "columnEnd": 33
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 58,
        "lineEnd": 58,
        "columnStart": 4,
        "columnEnd": 86
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 61,
        "lineEnd": 62,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 65,
        "lineEnd": 65,
        "columnStart": 4,
        "columnEnd": 37
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 71,
        "lineEnd": 74,
        "columnStart": 4,
        "columnEnd": 17
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 78,
        "lineEnd": 79,
        "columnStart": 4,
        "columnEnd": 34
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 82,
        "lineEnd": 85,
        "columnStart": 4,
        "columnEnd": 22
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 92,
        "lineEnd": 92,
        "columnStart": 4,
        "columnEnd": 82
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 121,
        "lineEnd": 121,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 144,
        "lineEnd": 144,
        "columnStart": 4,
        "columnEnd": 89
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 10,
        "lineEnd": 10,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 15,
        "lineEnd": 15,
        "columnStart": 4,
        "columnEnd": 69
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 21,
        "lineEnd": 21,
        "columnStart": 4,
        "columnEnd": 66
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 22,
        "lineEnd": 22,
        "columnStart": 4,
        "columnEnd": 105
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 54,
        "lineEnd": 54,
        "columnStart": 4,
        "columnEnd": 36
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 55,
        "lineEnd": 55,
        "columnStart": 4,
        "columnEnd": 33
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 58,
        "lineEnd": 58,
        "columnStart": 4,
        "columnEnd": 86
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 61,
        "lineEnd": 62,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 65,
        "lineEnd": 65,
        "columnStart": 4,
        "columnEnd": 37
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 71,
        "lineEnd": 74,
        "columnStart": 4,
        "columnEnd": 17
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 78,
        "lineEnd": 79,
        "columnStart": 4,
        "columnEnd": 34
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 82,
        "lineEnd": 85,
        "columnStart": 4,
        "columnEnd": 22
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 92,
        "lineEnd": 92,
        "columnStart": 4,
        "columnEnd": 82
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 121,
        "lineEnd": 121,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 144,
        "lineEnd": 144,
        "columnStart": 4,
        "columnEnd": 89
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 10,
        "lineEnd": 10,
        "columnStart": 4,
        "columnEnd": 51
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 15,
        "lineEnd": 15,
        "columnStart": 4,
        "columnEnd": 93
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 22,
        "lineEnd": 22,
        "columnStart": 4,
        "columnEnd": 129
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 54,
        "lineEnd": 54,
        "columnStart": 4,
        "columnEnd": 60
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 55,
        "lineEnd": 55,
        "columnStart": 4,
        "columnEnd": 57
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 58,
        "lineEnd": 58,
        "columnStart": 4,
        "columnEnd": 110
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 61,
        "lineEnd": 62,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 65,
        "lineEnd": 65,
        "columnStart": 4,
        "columnEnd": 61
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 71,
        "lineEnd": 74,
        "columnStart": 4,
        "columnEnd": 17
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 78,
        "lineEnd": 79,
        "columnStart": 4,
        "columnEnd": 34
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 82,
        "lineEnd": 85,
        "columnStart": 4,
        "columnEnd": 22
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 92,
        "lineEnd": 92,
        "columnStart": 4,
        "columnEnd": 106
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 121,
        "lineEnd": 121,
        "columnStart": 4,
        "columnEnd": 54
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 144,
        "lineEnd": 144,
        "columnStart": 4,
        "columnEnd": 113
      }
    }
  ],
  "repairedDockerfile": "FROM ubuntu:14.04.5\nMAINTAINER Cloud9 IDE, inc. <info@c9.io>\n\nENV DEBIAN_FRONTEND noninteractive\n\n# increment version to force flushing the cache\nRUN echo \"Version 1.13\"\n\n# Set mirrors to automatic based off location\nRUN apt-get update --fix-missing\nRUN apt-get install --no-install-recommends -y curl && rm -rf /var/lib/apt/lists/*;\nADD files/auto-sources.sh /var/tmp/auto-sources.sh\n#RUN bash /var/tmp/auto-sources.sh && rm /var/tmp/auto-sources.sh\n\n# Install add-apt-repository script\nRUN apt-get install --no-install-recommends -y software-properties-common apt-transport-https && rm -rf /var/lib/apt/lists/*;\n# Add a recent version of git\nRUN add-apt-repository -y ppa:git-core/ppa\n# 32-bit support\nRUN dpkg --add-architecture i386 && \\\n    apt-get update --fix-missing && \\\n    apt-get install --no-install-recommends -y libc6:i386 libncurses5:i386 libstdc++6:i386 && rm -rf /var/lib/apt/lists/*;\nRUN apt-get install --no-install-recommends -y bash console-setup sudo wget curl git python python-pip python3 python3-pip man-db && \\\n    echo \"install console-setup\" && \\\n    echo \"console-setup   console-setup/codeset47 select  # Latin1 and Latin5 - western Europe and Turkic languages\" | debconf-set-selections && \\\n    echo \"console-setup   console-setup/fontface47        select  Fixed\" | debconf-set-selections && \\\n    echo \"console-setup   console-setup/fontsize-text47   select  16\" | debconf-set-selections && \\\n    echo \"console-setup   console-setup/charmap47 select  UTF-8\" | debconf-set-selections && \\\n    echo \"keyboard-configuration  console-setup/detect    detect-keyboard\" | debconf-set-selections && \\\n    echo \"keyboard-configuration  console-setup/detected  note\" | debconf-set-selections && \\\n    echo \"console-setup   console-setup/codesetcode       string  Lat15\" | debconf-set-selections && \\\n    echo \"keyboard-configuration  console-setup/ask_detect        boolean false\" | debconf-set-selections && \\\n    echo \"console-setup   console-setup/store_defaults_in_debconf_db      boolean true\" | debconf-set-selections && \\\n    echo \"console-setup   console-setup/fontsize-fb47     select  16\" | debconf-set-selections && \\\n    echo \"console-setup   console-setup/fontsize  string  16\" | debconf-set-selections && \\\n    echo \"Create user and enable root access\" && \\\n    useradd --uid 1000 --shell /bin/bash -m --home-dir /home/ubuntu ubuntu && \\\n    sed -i 's/%sudo\\s.*/%sudo ALL=NOPASSWD:ALL/' /etc/sudoers && \\\n    usermod -a -G sudo ubuntu && rm -rf /var/lib/apt/lists/*;\n\n# node.js and nvm\nUSER ubuntu\nRUN curl -f https://raw.githubusercontent.com/creationix/nvm/v0.31.0/install.sh | sh -e && \\\n    echo '[ -s \"/home/ubuntu/.nvm/nvm.sh\" ] && . \"/home/ubuntu/.nvm/nvm.sh\" # This loads nvm' >> /home/ubuntu/.profile\nRUN bash -l -c \" \\\n    nvm install 6 && \\\n    nvm alias default 6 \\\n    nvm use 6\"\n\n# Disable progress bars by default: https://github.com/npm/npm/issues/11283\nRUN bash -l -c \"npm set progress=false\"\nUSER root\n\n# Java\nRUN apt-get install --no-install-recommends -y openjdk-7-jre && rm -rf /var/lib/apt/lists/*;\nRUN apt-get install --no-install-recommends -y ant maven2 && rm -rf /var/lib/apt/lists/*;\n\n# editors\nRUN apt-get install --no-install-recommends -y nano vim vim-addon-manager vim-vimoutliner vim-doc ctags indent && rm -rf /var/lib/apt/lists/*;\n\n# servers\nRUN apt-get install --no-install-recommends -y redis-server redis-tools nginx mysql-server \\\n    rabbitmq-server couchdb && rm -rf /var/lib/apt/lists/*;\n\n# Postgres\nRUN apt-get install --no-install-recommends -y postgresql-9.3 && \\\n    /etc/init.d/postgresql start && \\\n    sudo -u postgres createuser -srd ubuntu && \\\n    sudo -u postgres psql -c \"create database ubuntu owner=ubuntu\" && rm -rf /var/lib/apt/lists/*;\n\n# misc tools\nRUN apt-get install --no-install-recommends -y dnsutils bash-completion xsltproc \\\n    build-essential fakeroot tmux duplicity lftp htop apt-file \\\n    parallel strace ltrace flex jq ack-grep gdb valgrind locate tree time \\\n    zip unp cmake && rm -rf /var/lib/apt/lists/*;\nRUN apt-file update\n\n# Version control\nRUN apt-get install --no-install-recommends -y git-all tig subversion subversion-tools cvs \\\n    mercurial bzr bzrtools git-svn && rm -rf /var/lib/apt/lists/*;\n\n# libraries and headers\nRUN apt-get install --no-install-recommends -y libcairo2-dev libjpeg62-dev libgif-dev libpq-dev \\\n    libboost-all-dev libzmq-dev libwww-curl-perl libbz2-dev dpkg-dev \\\n    ruby1.9.1-dev dialog python-gtk2 libpango1.0 libpango1.0-dev \\\n    libmysqlclient-dev && rm -rf /var/lib/apt/lists/*;\n\n# Enable repo for alternative python versions\nRUN yes | add-apt-repository ppa:fkrull/deadsnakes\n\n# install ruby/rails/rvm\nADD ./files/etc/gemrc /etc/gemrc\nRUN apt-get install --no-install-recommends -y gawk libxml2-dev libxslt-dev libgdbm-dev libgmp-dev sqlite3 && rm -rf /var/lib/apt/lists/*;\nRUN sudo -u ubuntu -i bash -l -c \" \\\n        echo 'Installing rvm...' \\\n            && gpg -q --keyserver hkp://pgp.mit.edu --recv-keys 409B6B1796C275462A1703113804BB82D39DC0E3 \\\n            && (curl -sSL https://get.rvm.io | sudo bash -s stable --autolibs=enabled) \\\n    \" \\\n    && usermod -a -G rvm ubuntu\nRUN sudo -u ubuntu -i bash -l -c \" \\\n        echo 'Installing stable ruby version...' \\\n            && rvm install ruby-2 \\\n                && rvm use ruby-2 --default\"\n\n# Deployment\n# Can't include new npm since it makes \"npm install -g npm\" fail:\n# sudo -u ubuntu -i bash -l -c \"npm install -g npm@3.3.6\" && \\\nRUN wget -qO- https://toolbelt.heroku.com/install-ubuntu.sh | sh -e\nRUN sudo -u ubuntu -i heroku --help\n\n# /opt packages\nRUN curl -f https://storage.googleapis.com/golang/go1.8.3.linux-amd64.tar.gz | tar -C /opt -xz\nRUN git clone https://github.com/lennartcl/gitl.git /opt/gitl\n\n# setup the system\nRUN echo -n \"\" > /etc/motd && \\\n    echo \"export PATH=/bin:/usr/bin:/sbin:/usr/sbin:/usr/local/bin:/usr/local/sbin\" >> /root/.bashrc && \\\n    sudo -i -u ubuntu HOME=/home/ubuntu bash -i /etc/bash_completion && \\\n    HOME=/root bash -l /etc/bash_completion\n\n# Install apache\nRUN apt-get install --no-install-recommends -y apache2 && rm -rf /var/lib/apt/lists/*;\n\nADD ./files/etc /etc\nADD ./files/home /home\nADD ./files/gitignore /home/ubuntu/.gitignore\nRUN cp /home/ubuntu/.gitignore /home/ubuntu/.hgignore && \\\n    mkdir -p /home/ubuntu/lib/apache2/lock /home/ubuntu/lib/apache2/log /home/ubuntu/lib/apache2/run && \\\n    cd /home/ubuntu && \\\n    mv ssh .ssh && \\\n    chmod 700 .ssh && \\\n    chown -R ubuntu: .bash* .gemrc lib .*ignore .ssh && \\\n    chown ubuntu: .\n\nRUN echo \"Configure apache2\" && \\\n    a2enmod rewrite && \\\n    ln -s ../sites-available/001-cloud9.conf /etc/apache2/sites-enabled/001-cloud9.conf && \\\n    sed -i 's/Listen 80\\b/Listen 8080/' /etc/apache2/ports.conf && \\\n    sed -Ei 's/(.*)secure_path.*/\\1!secure_path/' /etc/sudoers && \\\n    touch /etc/init.d/systemd-logind\n\nRUN echo \"Configure php\" && \\\n    /etc/init.d/mysql start && \\\n    /etc/init.d/postgresql start && \\\n    apt-get install --no-install-recommends -y php5 php5-cli php5-fpm php5-pgsql php5-mysql phpmyadmin phppgadmin && \\\n    php5enmod c9 && \\\n    chmod 777 /var/lib/phpmyadmin/tmp && \\\n    cd /etc/php5/mods-available && ls *.ini | sed 's/\\.ini$//' | xargs php5enmod && \\\n    curl -f -sS https://getcomposer.org/installer | php && \\\n    mv composer.phar /usr/bin/composer && rm -rf /var/lib/apt/lists/*;\n\n# Add additional repos for users\n# MongoDB (Create the default data dir with correct permissions)\nRUN apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv 7F0CEB10 && \\\n    echo \"deb http://downloads-distro.mongodb.org/repo/ubuntu-upstart dist 10gen\" > /etc/apt/sources.list.d/mongodb.list && \\\n    apt-get update && \\\n    mkdir -p /data/db && \\\n    chown -R ubuntu:ubuntu /data\n\n\n# re-enable service startup. This line must come after all apt-get installs\nRUN rm -f /usr/sbin/policy-rc.d\n\n# Set up /.check-environment folder\nRUN mkdir -p /.check-environment\nADD ./files/check-environment /.check-environment/workspace\n\nCMD /bin/bash -l\n"
}