{
  "startTime": 1674215515367,
  "endTime": 1674215516213,
  "originalSmells": [
    {
      "rule": "configureShouldUseBuildFlag",
      "position": {
        "lineStart": 48,
        "lineEnd": 48,
        "columnStart": 5,
        "columnEnd": 252
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "# Build via docker:\n# docker build --build-arg cores=8 -t blocknetdx/blocknet:latest .\nFROM ubuntu:bionic\n\nARG cores=4\nENV ecores=$cores\n\nRUN apt update \\\n  && apt install -y --no-install-recommends \\\n     software-properties-common \\\n     ca-certificates \\\n     wget curl git python vim \\\n  && apt-get clean && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*\n\nRUN add-apt-repository ppa:bitcoin/bitcoin \\\n  && apt update \\\n  && apt install -y --no-install-recommends \\\n     build-essential libtool autotools-dev bsdmainutils \\\n     libevent-dev autoconf automake pkg-config libssl-dev \\\n     libdb4.8-dev libdb4.8++-dev python-setuptools cmake \\\n     libcap-dev \\\n  && apt-get clean && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*\n\n# gcc 8\nRUN add-apt-repository ppa:ubuntu-toolchain-r/test \\\n  && apt update \\\n  && apt install -y --no-install-recommends \\\n     g++-8-multilib gcc-8-multilib binutils-gold \\\n  && apt-get clean && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*\n\nENV PROJECTDIR=/opt/blocknet/blocknet\nENV BASEPREFIX=$PROJECTDIR/depends\nENV HOST=x86_64-pc-linux-gnu\n\n# Copy source files\nRUN mkdir -p /opt/blocknet \\\n  && cd /opt/blocknet \\\n  && git clone --single-branch --branch master https://github.com/blocknetdx/blocknet.git\n\n# Build source\nRUN mkdir -p /opt/blockchain/config \\\n  && mkdir -p /opt/blockchain/data \\\n  && ln -s /opt/blockchain/config /root/.blocknet \\\n  && cd $BASEPREFIX \\\n  && make -j$ecores && make install \\\n  && cd $PROJECTDIR \\\n  && chmod +x ./autogen.sh; sync \\\n  && ./autogen.sh \\\n  && CONFIG_SITE=$BASEPREFIX/$HOST/share/config.site ./configure --build=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\" CC=gcc-8 CXX=g++-8 CFLAGS='-Wno-deprecated' CXXFLAGS='-Wno-deprecated' --disable-ccache --disable-maintainer-mode --disable-dependency-tracking --without-gui --enable-hardening --prefix=/ \\\n  && echo \"Building with cores: $ecores\" \\\n  && make -j$ecores \\\n  && make install\n\n# Write default blocknet.conf (can be overridden on commandline)\nRUN echo \"datadir=/opt/blockchain/data    \\n\\\n                                          \\n\\\nmaxmempoolxbridge=128                     \\n\\\n                                          \\n\\\nport=41412    # testnet: 41474            \\n\\\nrpcport=41414 # testnet: 41419            \\n\\\n                                          \\n\\\nserver=1                                  \\n\\\nlogtimestamps=1                           \\n\\\nlogips=1                                  \\n\\\n                                          \\n\\\nrpcbind=0.0.0.0                           \\n\\\nrpcallowip=127.0.0.1                      \\n\\\nrpctimeout=60                             \\n\\\nrpcclienttimeout=30\" > /opt/blockchain/config/blocknet.conf\n\nWORKDIR /opt/blockchain/\nVOLUME [\"/opt/blockchain/config\", \"/opt/blockchain/data\"]\n\n# Port, RPC, Test Port, Test RPC\nEXPOSE 41412 41414 41474 41419\n\nCMD [\"blocknetd\", \"-daemon=0\", \"-server=0\"]\n"
}