{
  "startTime": 1674219863501,
  "endTime": 1674219864144,
  "originalSmells": [
    {
      "rule": "apkAddUseNoCache",
      "position": {
        "lineStart": 59,
        "lineEnd": 59,
        "columnStart": 4,
        "columnEnd": 26
      }
    },
    {
      "rule": "apkAddUseNoCache",
      "position": {
        "lineStart": 60,
        "lineEnd": 60,
        "columnStart": 4,
        "columnEnd": 18
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "# VTK and OpenJDK n Alpine Linux\n#FROM alpine:3.7\n# Install some Alpine packages\n#RUN apk add --no-cache \\\n#    bash \\\n#    build-base \\\n#    cmake \\\n#    wget \\\n#    mesa-dev \\\n#    mesa-osmesa \\\n#    python2-dev\n# Download and extract VTK source, then configure and build VTK\n#RUN wget -nv -O- http://www.vtk.org/files/release/7.1/VTK-7.1.0.tar.gz | \\\n#    tar xz && \\\n#    cd VTK-7.1.0 && \\\n#    cmake \\\n#    -D CMAKE_BUILD_TYPE:STRING=Release \\\n#    -D CMAKE_INSTALL_PREFIX:STRING=/usr \\\n#    -D BUILD_DOCUMENTATION:BOOL=OFF \\\n#    -D BUILD_EXAMPLES:BOOL=OFF \\\n#    -D BUILD_TESTING:BOOL=OFF \\\n#    -D BUILD_SHARED_LIBS:BOOL=ON \\\n#    -D VTK_USE_X:BOOL=OFF \\\n#    -D VTK_OPENGL_HAS_OSMESA:BOOL=ON \\\n#    -D OSMESA_LIBRARY=/usr/lib/libOSMesa.so.8 \\\n#    -D OSMESA_INCLUDE_DIR=/usr/include/GL/ \\\n#    -D VTK_RENDERING_BACKEND:STRING=OpenGL \\\n#    -D VTK_Group_MPI:BOOL=OFF \\\n#    -D VTK_Group_StandAlone:BOOL=OFF \\\n#    -D VTK_Group_Rendering:BOOL=ON \\\n#    -D VTK_WRAP_PYTHON=ON \\\n#    -D VTK_PYTHON_VERSION:STRING=2 \\\n#    . && \\\n#    make -j 2 && \\\n#    make install && \\\n#    cd .. && rm -rf VTK-7.1.0\n# install thrift python package\n#RUN wget https://bootstrap.pypa.io/get-pip.py \\\n#    && python get-pip.py \\\n#    && pip install thrift\n#RUN apk update && apk upgrade && \\\n#    apk add openjdk8 && \\\n#    mkdir /tmp/tmprt && \\\n#    cd /tmp/tmprt && \\\n#    apk add zip && \\\n#    unzip -q /usr/lib/jvm/default-jvm/jre/lib/rt.jar && \\\n#    apk add zip && \\\n#    zip -q -r /tmp/rt.zip . && \\\n#    apk del zip && \\\n#    cd /tmp && \\\n#    mv rt.zip /usr/lib/jvm/default-jvm/jre/lib/rt.jar && \\\n#    rm -rf /tmp/tmprt /var/cache/apk/* bin/jjs bin/keytool bin/orbd bin/pack200 bin/policytool \\\n#    bin/rmid bin/rmiregistry bin/servertool bin/tnameserv bin/unpack200\n\nFROM schaff/vtk-openjdk-alpine:latest\n\nRUN mkdir -p /usr/local/app && \\\n\tapk update && \\\n\tapk add --no-cache ttf-dejavu && \\\n    apk add --no-cache openssh-client && \\\n    apk add --no-cache screen\n\nWORKDIR /usr/local/app\n\nCOPY ./vcell-server/target/vcell-server-0.0.1-SNAPSHOT.jar \\\n     ./vcell-server/target/maven-jars/*.jar \\\n     ./vcell-oracle/target/vcell-oracle-0.0.1-SNAPSHOT.jar \\\n     ./vcell-oracle/target/maven-jars/*.jar \\\n     ./non-maven-java-libs/com/oracle/ojdbc6/11.2.0.4/ojdbc6-11.2.0.4.jar \\\n     ./non-maven-java-libs/com/oracle/ucp/11.2.0.4/ucp-11.2.0.4.jar \\\n     ./lib/\n\n\nCOPY ./pythonScripts ./pythonScripts\nCOPY ./nativelibs/linux64 ./nativelibs/linux64\nCOPY ./docker/build/vcell-data.log4j.xml .\n\nENV softwareVersion=SOFTWARE-VERSION-NOT-SET \\\n\tserverid=SITE \\\n\tdburl=\"db-url-not-set\" \\\n    dbdriver=\"db-driver-not-set\" \\\n    dbuser=\"db-user-not-set\" \\\n    jmshost_int_internal=activemqint \\\n    jmsport_int_internal=61616 \\\n    jmsuser=clientUser \\\n\tmongodb_host_internal=mongodb \\\n\tmongodb_port_internal=27017 \\\n    mongodb_database=test \\\n    export_baseurl=\"export-baseurl-not-set\" \\\n    simdatadir_external=/path/to/external/simdata/ \\\n    jmsblob_minsize=100000 \\\n    simdataCacheSize=\"simdataCacheSize-not-set\" \\\n    webDataPort=\"webDataPort-not-set\" \\\n    servertype=\"servertype-not-set\"\n\nENV dbpswdfile=/run/secrets/dbpswd \\\n    jmspswdfile=/run/secrets/jmspswd \\\n    keystore=/run/secrets/keystorefile_20210125 \\\n    keystorepswdfile=/run/secrets/keystorepswd\n\n\nVOLUME /simdata\nVOLUME /share/apps/vcell12/users\nVOLUME /exportdir\n\nEXPOSE 8000\n#webservice for hdf5 downloads\n#EXPOSE 55555\n\nENTRYPOINT java \\\n\t-Xdebug -Xrunjdwp:transport=dt_socket,address=8000,server=y,suspend=n \\\n\t-XX:+UnlockExperimentalVMOptions -XX:+UseCGroupMemoryLimitForHeap -XX:MaxRAMFraction=1 -Xms64M \\\n    -Djava.awt.headless=true \\\n\t-Dvcell.softwareVersion=\"${softwareVersion}\" \\\n\t-Djava.util.logging.manager=org.apache.logging.log4j.jul.LogManager \\\n\t-Dlog4j.configurationFile=/usr/local/app/vcell-data.log4j.xml \\\n\t-Dvcell.server.id=\"${serverid}\" \\\n\t-Dvcell.server.dbConnectURL=\"${dburl}\" \\\n\t-Dvcell.server.dbDriverName=\"${dbdriver}\" \\\n\t-Dvcell.server.dbUserid=\"${dbuser}\" \\\n\t-Dvcell.db.pswdfile=\"${dbpswdfile}\" \\\n\t-Dvcell.python.executable=/usr/bin/python \\\n\t-Dvcell.primarySimdatadir.internal=/simdata \\\n\t-Dvcell.primarySimdatadir.external=\"${simdatadir_external}\" \\\n\t-Dvcell.simdataCacheSize=\"${simdataCacheSize}\" \\\n\t-Dvcell.export.baseDir.internal=/exportdir/ \\\n\t-Dvcell.export.baseURL=\"${export_baseurl}\" \\\n\t-Dvcell.installDir=/usr/local/app \\\n\t-Dvcell.jms.int.host.internal=\"${jmshost_int_internal}\" \\\n\t-Dvcell.jms.int.port.internal=\"${jmsport_int_internal}\" \\\n\t-Dvcell.jms.blobMessageUseMongo=true \\\n\t-Dvcell.jms.blobMessageMinSize=\"${jmsblob_minsize}\" \\\n\t-Dvcell.jms.user=\"${jmsuser}\" \\\n\t-Dvcell.jms.pswdfile=\"${jmspswdfile}\" \\\n\t-Dvcellapi.keystore.file=\"${keystore}\" \\\n\t-Dvcellapi.keystore.pswdfile=\"${keystorepswdfile}\" \\\n\t-Dvcell.mongodb.host.internal=${mongodb_host_internal} \\\n\t-Dvcell.mongodb.port.internal=${mongodb_port_internal} \\\n\t-Dvcell.mongodb.database=${mongodb_database} \\\n\t-Dvcelldata.web.server.port=${webDataPort} \\\n\t-cp \"./lib/*\" cbit.vcell.message.server.data.SimDataServer \\\n\t\"${servertype}\"\n"
}