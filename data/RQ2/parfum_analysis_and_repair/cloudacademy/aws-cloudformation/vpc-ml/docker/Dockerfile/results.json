{
  "startTime": 1674256089070,
  "endTime": 1674256089790,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 13,
        "lineEnd": 13,
        "columnStart": 4,
        "columnEnd": 115
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 8,
        "lineEnd": 8,
        "columnStart": 4,
        "columnEnd": 26
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 12,
        "lineEnd": 12,
        "columnStart": 4,
        "columnEnd": 59
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 4,
        "lineEnd": 4,
        "columnStart": 4,
        "columnEnd": 33
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 5,
        "lineEnd": 5,
        "columnStart": 4,
        "columnEnd": 28
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 6,
        "lineEnd": 6,
        "columnStart": 4,
        "columnEnd": 26
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 7,
        "lineEnd": 7,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 4,
        "lineEnd": 4,
        "columnStart": 4,
        "columnEnd": 33
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 5,
        "lineEnd": 5,
        "columnStart": 4,
        "columnEnd": 28
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 6,
        "lineEnd": 6,
        "columnStart": 4,
        "columnEnd": 26
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 7,
        "lineEnd": 7,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 4,
        "lineEnd": 4,
        "columnStart": 4,
        "columnEnd": 33
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 5,
        "lineEnd": 5,
        "columnStart": 4,
        "columnEnd": 28
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 6,
        "lineEnd": 6,
        "columnStart": 4,
        "columnEnd": 26
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 7,
        "lineEnd": 7,
        "columnStart": 4,
        "columnEnd": 27
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 4,
        "lineEnd": 4,
        "columnStart": 4,
        "columnEnd": 57
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 5,
        "lineEnd": 5,
        "columnStart": 4,
        "columnEnd": 52
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 6,
        "lineEnd": 6,
        "columnStart": 4,
        "columnEnd": 50
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 7,
        "lineEnd": 7,
        "columnStart": 4,
        "columnEnd": 51
      }
    }
  ],
  "repairedDockerfile": "FROM ubuntu:16.04\nMAINTAINER CloudAcademy <jeremy.cook@cloudacademy.com>\n\nRUN apt-get update -y\nRUN apt-get install --no-install-recommends python-pip -y && rm -rf /var/lib/apt/lists/*;\nRUN apt-get install --no-install-recommends unzip -y && rm -rf /var/lib/apt/lists/*;\nRUN apt-get install --no-install-recommends git -y && rm -rf /var/lib/apt/lists/*;\nRUN apt-get install --no-install-recommends curl -y && rm -rf /var/lib/apt/lists/*;\nRUN pip install --no-cache-dir virtualenv\nRUN virtualenv /ml/frauddetectionenv\nRUN /bin/bash -c \"source /ml/frauddetectionenv/bin/activate\"\nRUN git clone https://github.com/cloudacademy/fraud-detection /ml/fraud-detection\nRUN pip install --no-cache-dir -r /ml/fraud-detection/requirements-dev.txt\nRUN curl -f -o /ml/fraud-detection/data/creditcard.csv.zip https://clouda-datasets.s3.amazonaws.com/creditcard.csv.zip\nRUN unzip /ml/fraud-detection/data/creditcard.csv.zip -d /ml/fraud-detection/data\nRUN ls -la /ml/fraud-detection/data\nRUN df -h\nRUN JOBLIB_TEMP_FOLDER=/tmp python /ml/fraud-detection/src/train.py\nRUN export FLASK_APP=/ml/fraud-detection/src/flask_app.py\nRUN printf \"\\n\" >> /ml/fraud-detection/src/flask_app.py\nRUN printf \"@app.route(u\\\"/health\\\", methods=[u\\\"GET\\\"])\\n\" >> /ml/fraud-detection/src/flask_app.py\nRUN printf \"def health():\\n\" >> /ml/fraud-detection/src/flask_app.py\nRUN printf \"\\treturn \\\"OK\\\", 200\\n\" >> /ml/fraud-detection/src/flask_app.py\nRUN printf \"\\napp.run(host='0.0.0.0', debug=False)\\n\" >> /ml/fraud-detection/src/flask_app.py\n\nEXPOSE 5000\n\nWORKDIR /ml/fraud-detection/\nENV FLASK_APP /ml/fraud-detection/src/flask_app.py\nCMD [\"flask\", \"run\"]\n"
}