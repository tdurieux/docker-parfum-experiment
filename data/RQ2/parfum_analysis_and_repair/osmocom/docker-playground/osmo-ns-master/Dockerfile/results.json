{
  "startTime": 1674246094633,
  "endTime": 1674246095290,
  "originalSmells": [
    {
      "rule": "configureShouldUseBuildFlag",
      "position": {
        "lineStart": 32,
        "lineEnd": 32,
        "columnStart": 1,
        "columnEnd": 69
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 9,
        "lineEnd": 11,
        "columnStart": 2,
        "columnEnd": 13
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "ARG\tUSER\nARG\tDISTRO\nFROM\t$USER/$DISTRO-build\n# Arguments used after FROM must be specified again\nARG\tDISTRO\n\nRUN case \"$DISTRO\" in \\\n\tdebian*) \\\n\t\tapt-get update && \\\n\t\tapt-get install -y --no-install-recommends \\\n\t\t\tpython3-osmopy-utils \\\n\t\t\tlibmnl-dev && \\\n\t\tapt-get clean \\\n\t\t;; \\\n\tcentos*) \\\n\t\tdnf install -y \\\n\t\t\t\"pkgconfig(libmnl)\" \\\n\t\t;; \\\n\tesac && rm -rf /var/lib/apt/lists/*;\n\nWORKDIR\t/tmp\n\nARG\tLIBOSMOCORE_BRANCH=\"master\"\n\nRUN\tgit clone git://git.osmocom.org/libosmocore.git\nADD\thttp://git.osmocom.org/libosmocore/patch?h=$LIBOSMOCORE_BRANCH /tmp/commit-libosmocore\n\nRUN cd libosmocore && \\\n\tgit fetch && git checkout $LIBOSMOCORE_BRANCH && \\\n\t(git symbolic-ref -q HEAD && git reset --hard origin/$LIBOSMOCORE_BRANCH || exit 1); \\\n\tgit rev-parse --abbrev-ref HEAD && git rev-parse HEAD && \\\n\tautoreconf -fi && \\\n\t./configure --build=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\" --disable-doxygen --disable-pcsc --enable-external-tests && \\\n\tmake \"-j$(nproc)\" install && \\\n\tinstall -m 0755 utils/.libs/osmo-ns-dummy /usr/local/bin/osmo-ns-dummy && \\\n\t/sbin/ldconfig\n\nVOLUME\t/data\n\nCOPY\tosmo-ns-dummy.cfg /data/osmo-ns-dummy.cfg\n\n# work-around for stupid docker not being able to properly deal with host netdevices or start\n# containers in pre-existing netns\nCOPY\t.common/pipework\t/usr/bin/pipework\nCOPY\tdocker-entrypoint.sh\t/docker-entrypoint.sh\n\nWORKDIR\t/data\nCMD\t[\"/docker-entrypoint.sh\"]\n\n#EXPOSE\n"
}