{
  "startTime": 1674253687749,
  "endTime": 1674253690057,
  "originalSmells": [
    {
      "rule": "wgetUseHttpsUrl",
      "position": {
        "lineStart": 26,
        "lineEnd": 26,
        "columnStart": 4,
        "columnEnd": 135
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "#\n# This docker image is just for development and testing purpose - please do NOT use on production\n#\n\n# Pull Base Image\nFROM zhicwu/java:8\n\n# Set Maintainer Details\nMAINTAINER Zhichun Wu <zhicwu@gmail.com>\n\n# Set Environment Variables\nENV PDI_VERSION=7.1 PDI_BUILD=7.1.0.0-12 PDI_PATCH=7.1.0.0 PDI_USER=pentaho \\\n\tKETTLE_HOME=/data-integration POSTGRESQL_DRIVER_VERSION=42.1.1 \\\n\tMYSQL_DRIVER_VERSION=5.1.42 JTDS_VERSION=1.3.1 CASSANDRA_DRIVER_VERSION=0.6.3 \\\n\tH2DB_VERSION=1.4.196 HSQLDB_VERSION=2.4.0\n\n# Add Cron Jobs\nCOPY purge-old-files.sh /usr/local/bin/purge-old-files.sh\n\n# Install Required Packages, Configure Crons and Add User\nRUN apt-get update \\\n\t&& apt-get clean \\\n\t&& rm -rf /var/lib/apt/lists/* \\\n\t&& useradd -md $KETTLE_HOME -s /bin/bash $PDI_USER\n\n# Download Pentaho Data Integration Community Edition and Unpack\nRUN wget --progress=dot:giga https://downloads.sourceforge.net/project/pentaho/Data%20Integration/${PDI_VERSION}/pdi-ce-${PDI_BUILD}.zip \\\n\t&& unzip -q *.zip \\\n\t&& rm -f *.zip\n\n# Add Entry Point and Templates\nCOPY docker-entrypoint.sh $KETTLE_HOME/docker-entrypoint.sh\n\n# Switch Directory\nWORKDIR $KETTLE_HOME\n\n# Download and Apply Patches\nRUN wget --progress=dot:giga https://github.com/zhicwu/pdi-cluster/releases/download/${PDI_PATCH}/pentaho-kettle-${PDI_PATCH}.jar \\\n\t&& unzip -q pentaho-kettle*.jar -d classes \\\n\t&& rm -f pentaho-kettle*.jar\n\n# Update JDBC Drivers\nRUN wget --progress=dot:giga https://jdbc.postgresql.org/download/postgresql-${POSTGRESQL_DRIVER_VERSION}.jar \\\n\t\thttp://central.maven.org/maven2/mysql/mysql-connector-java/${MYSQL_DRIVER_VERSION}/mysql-connector-java-${MYSQL_DRIVER_VERSION}.jar \\\n\t\thttp://central.maven.org/maven2/net/sourceforge/jtds/jtds/${JTDS_VERSION}/jtds-${JTDS_VERSION}.jar \\\n\t\thttp://central.maven.org/maven2/com/github/zhicwu/cassandra-jdbc-driver/${CASSANDRA_DRIVER_VERSION}/cassandra-jdbc-driver-${CASSANDRA_DRIVER_VERSION}-shaded.jar \\\n\t\thttp://central.maven.org/maven2/com/h2database/h2/${H2DB_VERSION}/h2-${H2DB_VERSION}.jar \\\n\t\thttp://central.maven.org/maven2/org/hsqldb/hsqldb/${HSQLDB_VERSION}/hsqldb-${HSQLDB_VERSION}.jar \\\n\t&& rm -f lib/postgre*.jar lib/mysql*.jar lib/jtds*.jar lib/h2*.jar lib/hsqldb*.jar \\\n\t&& mv *.jar lib/.\n\n# Install Plugins\n# TODO:\n# 1) https://github.com/graphiq-data/pdi-streamschemamerge-plugin\n# 2) https://github.com/graphiq-data/pdi-fastjsoninput-plugin\n\n# Configure PDI\n# plugins/kettle5-log4j-plugin/log4j.xml\nRUN rm -rf system/osgi/log4j.xml classes/log4j.xml pwd/* simple-jndi/* system/karaf/data/tmp \\\n\t&& ln -s $JMX_EXPORTER_FILE jmx-exporter.jar \\\n\t&& echo \"01 * * * * /usr/local/bin/purge-old-files.sh 2>>/var/log/cron.log\" > /var/spool/cron/crontabs/root \\\n\t&& chmod 0600 /var/spool/cron/crontabs/root \\\n\t&& chmod +x *.sh /usr/local/bin/*.sh \\\n\t&& sed -i -e 's|\\(.*if \\[ \\$OS = \"linux\" \\]; then\\)|if \\[ \\$OS = \"n/a\" \\]; then|' spoon.sh \\\n\t&& sed -i 's/^\\(respectStartLvlDuringFeatureStartup=\\).*/\\1true/' system/karaf/etc/org.apache.karaf.features.cfg \\\n\t&& sed -i 's/^\\(featuresBootAsynchronous=\\).*/\\1false/' system/karaf/etc/org.apache.karaf.features.cfg\n\nENTRYPOINT [\"/sbin/my_init\", \"--\", \"./docker-entrypoint.sh\"]\n\n#VOLUME [\"$KETTLE_HOME/logs\", \"$KETTLE_HOME/system/karaf/caches\", \"$KETTLE_HOME/system/karaf/data\", \"/tmp\"]\n\n#  8080 - Carte Web Service\n#  8802 - Karaf SSHD\n#  9052 - OSGi Service\n#EXPOSE 8080 8802 9052\n\n#CMD [\"slave\"]\n"
}