{
  "startTime": 1674221060527,
  "endTime": 1674221061309,
  "originalSmells": [
    {
      "rule": "gemUpdateSystemRmRootGem",
      "position": {
        "lineStart": 123,
        "lineEnd": 123,
        "columnStart": 8,
        "columnEnd": 27
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM <%= @meta.base_image %>\nLABEL maintainer \"Jordon Bedwell <jordon@envygeeks.io>\"\nCOPY copy /\n\n#\n# EnvVars\n# Ruby\n#\n\nENV BUNDLE_HOME=/usr/local/bundle\nENV BUNDLE_APP_CONFIG=/usr/local/bundle\nENV BUNDLE_DISABLE_PLATFORM_WARNINGS=true\nENV BUNDLE_BIN=/usr/local/bundle/bin\nENV GEM_BIN=/usr/gem/bin\nENV GEM_HOME=/usr/gem\nENV RUBYOPT=-W0\n\n#\n# EnvVars\n# Image\n#\n\nENV JEKYLL_VAR_DIR=/var/jekyll\nENV JEKYLL_DOCKER_TAG=<%= @meta.tag %>\nENV JEKYLL_VERSION=<%= @meta.release?? @meta.release : @meta.tag %>\nENV JEKYLL_DOCKER_COMMIT=<%= `git rev-parse --verify HEAD`.strip %>\nENV JEKYLL_DOCKER_NAME=<%= @meta.name %>\nENV JEKYLL_DATA_DIR=/srv/jekyll\nENV JEKYLL_BIN=/usr/jekyll/bin\nENV JEKYLL_ENV=development\n\n#\n# EnvVars\n# System\n#\n\nENV LANG=en_US.UTF-8\nENV LANGUAGE=en_US:en\nENV TZ=America/Chicago\nENV PATH=\"$JEKYLL_BIN:$PATH\"\nENV LC_ALL=en_US.UTF-8\nENV LANG=en_US.UTF-8\nENV LANGUAGE=en_US\n\n#\n# EnvVars\n# User\n#\n\n<% if @meta.env? %>\n  ENV <%= @meta.env %>\n<% end %>\n\n#\n# EnvVars\n# Main\n#\n\nenv VERBOSE=false\nenv FORCE_POLLING=false\nenv DRAFTS=false\n\n#\n# Packages\n# User\n#\n\n<% if @meta.packages? %>\n  RUN apk --no-cache add <%= @meta.packages %>\n<% end %>\n\n#\n# Packages\n# Dev\n#\n\nRUN apk --no-cache add \\\n  zlib-dev \\\n  libffi-dev \\\n  build-base \\\n  libxml2-dev \\\n  imagemagick-dev \\\n  readline-dev \\\n  libxslt-dev \\\n  libffi-dev \\\n  yaml-dev \\\n  zlib-dev \\\n  vips-dev \\\n  vips-tools \\\n  sqlite-dev \\\n  cmake\n\n#\n# Packages\n# Main\n#\n\nRUN apk --no-cache add \\\n  linux-headers \\\n  openjdk8-jre \\\n  less \\\n  zlib \\\n  libxml2 \\\n  readline \\\n  libxslt \\\n  libffi \\\n  git \\\n  nodejs \\\n  tzdata \\\n  shadow \\\n  bash \\\n  su-exec \\\n  npm \\\n  libressl \\\n  yarn\n\n#\n# Gems\n# Update\n#\n\nRUN echo \"gem: --no-ri --no-rdoc\" > ~/.gemrc\nRUN unset GEM_HOME && unset GEM_BIN && \\\n  yes | gem update --system && rm -rf /root/.gem;\n\n#\n# Gems\n# Main\n#\n\nRUN unset GEM_HOME && unset GEM_BIN && yes | gem install --force bundler\nRUN gem install jekyll -v<%= @meta.release?? \\\n  @meta.release : @meta.tag %> -- \\\n    --use-system-libraries\n\n#\n# Gems\n# User\n#\n\n<% if @meta.gems? %>\n  # Stops slow Nokogiri!\n  RUN gem install <%=@meta.gems %> -- \\\n    --use-system-libraries\n<% end %>\n\nRUN addgroup -Sg 1000 jekyll\nRUN adduser  -Su 1000 -G \\\n  jekyll jekyll\n\n#\n# Remove development packages on minimal.\n# And on pages.  Gems are unsupported.\n#\n\n<% if @meta.name == \"minimal\" || @meta.name == \"pages\" || @meta.tag == \"pages\" %>\n  RUN apk --no-cache del \\\n    linux-headers \\\n    openjdk8-jre \\\n    zlib-dev \\\n    build-base \\\n    libxml2-dev \\\n    libxslt-dev \\\n    readline-dev \\\n    imagemagick-dev\\\n    libffi-dev \\\n    ruby-dev \\\n    yaml-dev \\\n    zlib-dev \\\n    libffi-dev \\\n    vips-dev \\\n    vips-tools \\\n    cmake\n<% end %>\n\nRUN mkdir -p $JEKYLL_VAR_DIR\nRUN mkdir -p $JEKYLL_DATA_DIR\nRUN chown -R jekyll:jekyll $JEKYLL_DATA_DIR\nRUN chown -R jekyll:jekyll $JEKYLL_VAR_DIR\nRUN chown -R jekyll:jekyll $BUNDLE_HOME\nRUN rm -rf /home/jekyll/.gem\nRUN rm -rf $BUNDLE_HOME/cache\nRUN rm -rf $GEM_HOME/cache\nRUN rm -rf /root/.gem\n\n# Work around rubygems/rubygems#3572\nRUN mkdir -p /usr/gem/cache/bundle\nRUN chown -R jekyll:jekyll \\\n  /usr/gem/cache/bundle\n\nCMD [\"jekyll\", \"--help\"]\nENTRYPOINT [\"/usr/jekyll/bin/entrypoint\"]\nWORKDIR /srv/jekyll\nVOLUME  /srv/jekyll\nEXPOSE 35729\nEXPOSE 4000\n"
}