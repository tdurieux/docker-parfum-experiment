{
  "startTime": 1674216794149,
  "endTime": 1674216795195,
  "originalSmells": [
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 26,
        "lineEnd": 26,
        "columnStart": 4,
        "columnEnd": 45
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "ARG PHP_VERSION=7.2\nARG ALPINE_VERSION=3.8\n\nFROM php:${PHP_VERSION}-fpm-alpine${ALPINE_VERSION} as base\nMAINTAINER Pablo Nieto, pnieto@teltek.es\n\nARG APCU_VERSION=5.1.12\nARG PHP_MONGODB_VERSION=1.5.3\nARG XDEBUG_VERSION=2.6.1\n\nRUN apk  add --no-cache \\\n    \t     \t\t--update \\\n\t     \t\tlibgcc \\\n\t\t\tlibstdc++ \\\n\t\t\tca-certificates \\\n\t\t\tlibcrypto1.0 \\\n\t\t\tlibssl1.0 \\\n\t\t\tlibgomp \\\n\t\t\texpat \\\n\t\t\tpython \\\n\t\t\tpy-setuptools \\\n\t\t\tpy-argparse \\\n\t\t\tpy2-pip \\\n\t\t\tpy-gflags \\\n;\n\nRUN pip install --no-cache-dir google-api-python-client==1.2\n\nCOPY --from=jrottenberg/ffmpeg:4.0-alpine /usr/local /usr/local\n\n\nRUN apk add --no-cache \\\n\t\tacl \\\n\t\tfile \\\n\t\tgettext \\\n\t\tgit \\\n;\n\nRUN set -eux; \\\n \tapk add --no-cache --virtual .build-deps \\\n \t\t$PHPIZE_DEPS \\\n \t\ticu-dev \\\n\t\topenldap-dev \\\n\t\tgettext-dev \\\n\t\tlibpng-dev \\\n\t\texpat-dev \\\n \t\tlibzip-dev \\\n \t\tzlib-dev \\\n\t\tlibxml2-dev \\\n\t\tlibxslt-dev \\\n\t\tjpeg-dev \\\n\t\tfreetype-dev \\\n \t; \\\n \t\\\n \tdocker-php-ext-configure zip --with-libzip; \\\n\tfreetype-config --cflags; \\\n     \tmkdir -p /opt/ffmpeg/include; \\\n\tln -s /usr/include/freetype2 /opt/ffmpeg/include/freetype2; \\\n\tdocker-php-ext-configure gd \\\n\t \t--with-freetype-dir=/usr/include/ \\\n\t\t--with-jpeg-dir=/usr/include/ \\\n\t\t-with-png-dir=/usr/include; \\\n \tdocker-php-ext-install -j$(nproc) \\\n \t\tintl \\\n\t\texif \\\n\t\tldap \\\n\t\tgettext \\\n\t\tpcntl \\\n\t\tgd \\\n\t\tshmop \\\n\t\tsockets \\\n\t\tsysvmsg \\\n\t\tsysvsem \\\n\t\tsysvshm \\\n \t\tzip \\\n\t\twddx \\\n\t\txsl \\\n \t; \\\n \tpecl install \\\n \t\tapcu-${APCU_VERSION} \\\n\t\tmongodb-${PHP_MONGODB_VERSION} \\\n\t\txdebug-${XDEBUG_VERSION} \\\n \t; \\\n \tpecl clear-cache ;\\\n \tdocker-php-ext-enable \\\n \t\tapcu \\\n \t\topcache \\\n\t\tmongodb \\\n \t; \\\n\t\\\n\trunDeps=\"$( \\\n            scanelf --needed --nobanner --format '%n#p' --recursive /usr/local/lib/php/extensions \\\n                | tr ',' '\\n' \\\n                | sort -u \\\n                | awk 'system(\"[ -e /usr/local/lib/\" $1 \" ]\") == 0 { next } { print \"so:\" $1 }' \\\n            )\"; \\\n\tapk add --no-cache --virtual .api-phpexts-rundeps $runDeps; \\\n\t\\\n\tapk del .build-deps\n\n\nCOPY --from=composer:latest /usr/bin/composer /usr/bin/composer\nCOPY php.ini /usr/local/etc/php/php.ini\n\n# https://getcomposer.org/doc/03-cli.md#composer-allow-superuser\nENV COMPOSER_ALLOW_SUPERUSER=1\n\nRUN set -eux; \\\n    composer global require \"rubenrua/symfony-clean-tags-composer-plugin\" --prefer-dist --no-progress --no-suggest --classmap-authoritative\n\n# Download and install pumukit to get the composer cache and improve build times\nRUN git clone https://github.com/pumukit/pumukit /srv/pumukit; \\\ncd /srv/pumukit; \\\ncomposer install -a -n --no-scripts\nRUN rm -rf /srv/pumukit\n\nENV PATH=\"${PATH}:/root/.composer/vendor/bin\"\n\nWORKDIR /srv/pumukit\n"
}