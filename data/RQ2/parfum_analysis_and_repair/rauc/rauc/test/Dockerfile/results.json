{
  "startTime": 1674252867168,
  "endTime": 1674252868036,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 48,
        "lineEnd": 48,
        "columnStart": 2,
        "columnEnd": 52
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 63,
        "lineEnd": 63,
        "columnStart": 4,
        "columnEnd": 40
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 3,
        "lineEnd": 12,
        "columnStart": 22,
        "columnEnd": 18
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 15,
        "lineEnd": 39,
        "columnStart": 22,
        "columnEnd": 8
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 42,
        "lineEnd": 46,
        "columnStart": 22,
        "columnEnd": 6
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 3,
        "lineEnd": 12,
        "columnStart": 22,
        "columnEnd": 18
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 15,
        "lineEnd": 39,
        "columnStart": 22,
        "columnEnd": 8
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM debian:bullseye\n\n# Required for building\nRUN apt-get update && apt-get install --no-install-recommends -y \\\n  automake \\\n  libtool \\\n  libglib2.0-dev \\\n  libcurl3-dev \\\n  libssl-dev \\\n  libdbus-1-dev \\\n  libjson-glib-dev \\\n  libfdisk-dev \\\n  libnl-genl-3-dev && rm -rf /var/lib/apt/lists/*;\n\n# Required for testing\nRUN apt-get update && apt-get install --no-install-recommends -y \\\n  squashfs-tools \\\n  dosfstools \\\n  lcov \\\n  slirp \\\n  python3-sphinx \\\n  dbus-x11 \\\n  user-mode-linux \\\n  grub-common \\\n  softhsm2 \\\n  opensc \\\n  opensc-pkcs11 \\\n  libengine-pkcs11-openssl \\\n  faketime \\\n  time \\\n  kmod \\\n  uncrustify \\\n  casync \\\n  qemu-system-x86 \\\n  procps \\\n  mtd-utils \\\n  python3-aiohttp \\\n  nginx-light \\\n  fdisk \\\n  golang && rm -rf /var/lib/apt/lists/*;\n\n# Required for test environment setup\nRUN apt-get update && apt-get install --no-install-recommends -y \\\n  python3-pip \\\n  git \\\n  gcc-10 \\\n  curl && \\\n  rm -rf /var/lib/apt/lists/* && \\\n  curl -f -sLo /usr/bin/codecov https://codecov.io/bash && \\\n  chmod +x /usr/bin/codecov\n\n# Install the optional desync\nENV GOPATH=/go\nRUN git clone https://github.com/folbricht/desync.git /tmp/desync && \\\n    cd /tmp/desync/cmd/desync && \\\n    go install && \\\n    cp /go/bin/desync /usr/bin/desync && \\\n    rm -rf /tmp/desync\n\n# Create required directories for bind mounts\nRUN mkdir -p /lib/modules && \\\n    mkdir -p /var/run/dbus\n\nRUN pip3 install --no-cache-dir --upgrade cpp-coveralls\n\n# We want to run as non-root user equaling uid of Travis' user 'travis' (2000)\nENV user travis\n\nRUN useradd -u 2000 -m -d /home/${user} ${user} \\\n && chown -R ${user} /home/${user}\n\nUSER ${user}\n"
}