{
  "startTime": 1674255649524,
  "endTime": 1674255650677,
  "originalSmells": [
    {
      "rule": "yumInstallRmVarCacheYum",
      "position": {
        "lineStart": 3,
        "lineEnd": 8,
        "columnStart": 4,
        "columnEnd": 5
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM centos:7.6.1810\n\nRUN set -eux; \\\n    yum install -y \\\n        gzip \\\n        tar \\\n        binutils \\\n        freetype fontconfig \\\n    ; rm -rf /var/cache/yum\n\nENV JAVA_HOME /usr/java/openjdk-8\nENV PATH $JAVA_HOME/bin:$PATH\n\n# Default to UTF-8 file.encoding\nENV LANG C.UTF-8\n\nRUN set -eux; \\\n    \\\n    arch=\"$(objdump=\"$(command -v objdump)\" && objdump --file-headers \"$objdump\" | awk -F '[:,]+[[:space:]]+' '$1 == \"architecture\" { print $2 }')\"; \\\n    case \"$arch\" in \\\n        'i386:x86-64') \\\n            downloadUrl='https://github.com/AdoptOpenJDK/openjdk8-upstream-binaries/releases/download/jdk8u292-b10/OpenJDK8U-jdk_x64_linux_8u292b10.tar.gz'; \\\n            ;; \\\n        'aarch64') \\\n            downloadUrl='https://github.com/AdoptOpenJDK/openjdk8-upstream-binaries/releases/download/jdk8u292-b10/OpenJDK8U-jdk_aarch64_linux_8u292b10.tar.gz'; \\\n            ;; \\\n        *) echo >&2 \"error: unsupported architecture: '$arch'\"; exit 1 ;; \\\n    esac; \\\n    \\\n    curl -fL -o openjdk.tgz \"$downloadUrl\"; \\\n    curl -fL -o openjdk.tgz.asc \"$downloadUrl.sign\"; \\\n    \\\n    export GNUPGHOME=\"$(mktemp -d)\"; \\\n# pre-fetch Andrew Haley's (the OpenJDK 8 and 11 Updates OpenJDK project lead) key so we can verify that the OpenJDK key was signed by it\n# (https://github.com/docker-library/openjdk/pull/322#discussion_r286839190)\n# we pre-fetch this so that the signature it makes on the OpenJDK key can survive \"import-clean\" in gpg\n    gpg --batch --keyserver keyserver.ubuntu.com --recv-keys EAC843EBD3EFDB98CC772FADA5CD6035332FA671; \\\n# TODO find a good link for users to verify this key is right (https://mail.openjdk.java.net/pipermail/jdk-updates-dev/2019-April/000951.html is one of the only mentions of it I can find); perhaps a note added to https://adoptopenjdk.net/upstream.html would make sense?\n# no-self-sigs-only: https://salsa.debian.org/debian/gnupg2/commit/c93ca04a53569916308b369c8b218dad5ae8fe07\n    gpg --batch --keyserver keyserver.ubuntu.com --keyserver-options no-self-sigs-only --recv-keys CA5F11C6CE22644D42C6AC4492EF8D39DC13168F; \\\n    gpg --batch --list-sigs --keyid-format 0xLONG CA5F11C6CE22644D42C6AC4492EF8D39DC13168F \\\n        | tee /dev/stderr \\\n        | grep '0xA5CD6035332FA671' \\\n        | grep 'Andrew Haley'; \\\n    gpg --batch --verify openjdk.tgz.asc openjdk.tgz; \\\n    rm -rf \"$GNUPGHOME\"; \\\n    \\\n    mkdir -p \"$JAVA_HOME\"; \\\n    tar --extract \\\n        --file openjdk.tgz \\\n        --directory \"$JAVA_HOME\" \\\n        --strip-components 1 \\\n        --no-same-owner \\\n    ; \\\n    rm openjdk.tgz*; \\\n    \\\n    rm -rf \"$JAVA_HOME/jre/lib/security/cacerts\"; \\\n# see \"update-ca-trust\" script which creates/maintains this cacerts bundle\n    ln -sT /etc/pki/ca-trust/extracted/java/cacerts \"$JAVA_HOME/jre/lib/security/cacerts\"; \\\n    \\\n# https://github.com/oracle/docker-images/blob/a56e0d1ed968ff669d2e2ba8a1483d0f3acc80c0/OracleJava/java-8/Dockerfile#L17-L19\n    ln -sfT \"$JAVA_HOME\" /usr/java/default; \\\n    ln -sfT \"$JAVA_HOME\" /usr/java/latest; \\\n    for bin in \"$JAVA_HOME/bin/\"*; do \\\n        base=\"$(basename \"$bin\")\"; \\\n        [ ! -e \"/usr/bin/$base\" ]; \\\n        alternatives --install \"/usr/bin/$base\" \"$base\" \"$bin\" 20000; \\\n    done; \\\n    \\\n# basic smoke test\n    javac -version; \\\n    java -version"
}