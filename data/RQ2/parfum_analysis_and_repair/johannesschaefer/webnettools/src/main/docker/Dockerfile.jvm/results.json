{
  "startTime": 1674246872697,
  "endTime": 1674246875329,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 7,
        "lineEnd": 7,
        "columnStart": 7,
        "columnEnd": 73
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM registry.access.redhat.com/ubi8/ubi-minimal:8.3\n\nARG JAVA_PACKAGE=java-11-openjdk-headless\nENV LANG='en_US.UTF-8' LANGUAGE='en_US:en'\n# Install java and the run-java script\n# Also set up permissions for user `1001`\nRUN microdnf install util-linux procps bind-utils hostname iputils curl ca-certificates tar git nmap ${JAVA_PACKAGE} \\\n    && curl -f https://bintray.com/ookla/rhel/rpm -o bintray-ookla-rhel.repo && mv bintray-ookla-rhel.repo /etc/yum.repos.d/ && microdnf install speedtest \\\n    && microdnf update \\\n    && microdnf clean all \\\n    && rpm -i https://rpmfind.net/linux/centos/8-stream/BaseOS/x86_64/os/Packages/traceroute-2.1.0-6.el8.x86_64.rpm \\\n    && rpm -i http://mirror.centos.org/centos/8/BaseOS/x86_64/os/Packages/mtr-0.92-3.el8.x86_64.rpm \\\n    && mkdir /deployments \\\n    && chown 1001 /deployments \\\n    && chmod \"g+rwX\" /deployments \\\n    && chown 1001:root /deployments \\\n    && echo \"securerandom.source=file:/dev/urandom\" >> /etc/alternatives/jre/lib/security/java.security \\\n    && git clone --depth 1 https://github.com/drwetter/testssl.sh.git \\\n    && setcap cap_net_raw+eip /usr/bin/nmap\n     #\\\n    #&& mkdir -p /root/.config/ookla \\\n   # && echo -e \"{\\n\" \\\n   #      \"     \\\"Settings\\\": {\\n\" \\\n   #      \"         \\\"LicenseAccepted\\\": \\\"604ec27f828456331ebf441826292c49276bd3c1bee1a2f65a6452f505c4061c\\\",\\n\" \\\n   #      \"         \\\"GDPRTimeStamp\\\": 1615738481\\n\" \\\n   #      \"     }\\n\" \\\n   #      \"}\\n\" > /root/.config/ookla/speedtest-cli.json\n\nENV PATH=/testssl.sh:$PATH\n\nENV AVAILABLE_TOOLS=testssl,ping,traceroute,nmap,dig,mtr\nENV RATE_LIMIT=1\nENV CA_DIR=/certs\n\n# Configure the JAVA_OPTIONS, you can add -XshowSettings:vm to also display the heap size.\nENV JAVA_OPTIONS=\"-Dquarkus.http.host=0.0.0.0 -Djava.util.logging.manager=org.jboss.logmanager.LogManager\"\nCOPY target/lib/* /deployments/lib/\nCOPY target/*-runner.jar /deployments/app.jar\n\nEXPOSE 8080\nUSER 1001\n\nENV PORT=8080\n\nHEALTHCHECK --interval=30s --timeout=10s --start-period=60s \\\n  CMD curl -f http://localhost:8080/q/health/live || exit 1\n\nENTRYPOINT [ \"java\" ]\nCMD [ \"-Dquarkus.http.host=0.0.0.0\", \"-Dquarkus.http.port=${PORT}\", \"-jar\", \"/deployments/app.jar\", \"-Djava.util.logging.manager=org.jboss.logmanager.LogManager\" ]"
}