{
  "startTime": 1674252989327,
  "endTime": 1674252990539,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 11,
        "lineEnd": 11,
        "columnStart": 4,
        "columnEnd": 38
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "# Compile\nFROM rust:alpine3.14 AS compiler\n\nRUN apk add -q --update-cache --no-cache build-base openssl-dev curl\n\nARG VERSION=0.20.0\nARG REPO=https://github.com/meilisearch/MeiliSearch/archive/refs/tags/\n\nENV RUSTFLAGS=\"-C target-feature=-crt-static\"\n\nWORKDIR /build\nRUN curl -f -L ${REPO}/v${VERSION}.tar.gz | tar xzv\nWORKDIR /build/meilisearch-${VERSION}\n\nRUN set -eux; \\\n    apkArch=\"$(apk --print-arch)\"; \\\n    if [ \"$apkArch\" = \"aarch64\" ]; then \\\n        export JEMALLOC_SYS_WITH_LG_PAGE=16; \\\n    fi && \\\n    cargo build --release\n\n# Run\nFROM alpine:3.14\n\nENV MEILI_HTTP_ADDR 0.0.0.0:7700\nENV MEILI_SERVER_PROVIDER docker\n\nARG VERSION=0.20.0\n\nRUN apk update --quiet \\\n    && apk add -q --no-cache libgcc tini curl\n\nCOPY --from=compiler /build/meilisearch-${VERSION}/target/release/meilisearch .\n\n#--------------------- Debian / alpine user setting ----------------------------\nENV USER=meili\nENV GROUP=mapx\nENV UID=89129\nENV GID=101\nENV DATADIR=/data.ms\n\nRUN addgroup \\\n    --system \\\n    --gid $GID\\\n     $GROUP &&\\\n    adduser \\\n     --system \\\n     --disabled-password \\\n     --gecos \"\"\\\n     --ingroup $GROUP \\\n     --no-create-home \\\n     --uid $UID $USER\n\nRUN mkdir -p $DATADIR && chown -R $USER:$GROUP $DATADIR\n\nUSER $USER\nVOLUME $DATADIR\n#-------------------------------------------------------------------------------\n\nEXPOSE 7700/tcp\nENTRYPOINT [\"tini\", \"--\"]\nCMD ./meilisearch\n"
}