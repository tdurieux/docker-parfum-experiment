{
  "startTime": 1674256011442,
  "endTime": 1674256012816,
  "originalSmells": [
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 31,
        "lineEnd": 31,
        "columnStart": 7,
        "columnEnd": 30
      }
    },
    {
      "rule": "configureShouldUseBuildFlag",
      "position": {
        "lineStart": 38,
        "lineEnd": 39,
        "columnStart": 4,
        "columnEnd": 15
      }
    },
    {
      "rule": "yumInstallRmVarCacheYum",
      "position": {
        "lineStart": 8,
        "lineEnd": 11,
        "columnStart": 4,
        "columnEnd": 81
      }
    },
    {
      "rule": "yumInstallRmVarCacheYum",
      "position": {
        "lineStart": 15,
        "lineEnd": 26,
        "columnStart": 4,
        "columnEnd": 2
      }
    },
    {
      "rule": "yumInstallRmVarCacheYum",
      "position": {
        "lineStart": 29,
        "lineEnd": 29,
        "columnStart": 7,
        "columnEnd": 29
      }
    },
    {
      "rule": "yumInstallRmVarCacheYum",
      "position": {
        "lineStart": 30,
        "lineEnd": 30,
        "columnStart": 7,
        "columnEnd": 35
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 36,
        "lineEnd": 36,
        "columnStart": 4,
        "columnEnd": 43
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM openresty/openresty:centos-rpm\n\nLABEL maintainer=\"Landon Manning <lmanning17@gmail.com>\"\n\nARG GIFLIB_VERSION=\"5.1.1\"\nARG OPENSSL_DIR=\"/usr/local/openresty/openssl\"\n\n# Install repos\nRUN yum -y install --nogpgcheck \\\n\t\thttps://dl.fedoraproject.org/pub/epel/epel-release-latest-8.noarch.rpm \\\n\t\thttps://mirrors.rpmfusion.org/free/el/rpmfusion-free-release-8.noarch.rpm \\\n\t\thttps://mirrors.rpmfusion.org/nonfree/el/rpmfusion-nonfree-release-8.noarch.rpm \\\n\t&& yum config-manager --set-enabled PowerTools && rm -rf /var/cache/yum\n\n# Install from repos\nRUN yum -y install \\\n\tdos2unix \\\n\tffmpeg \\\n\tgcc \\\n\tgit \\\n\tImageMagick-devel \\\n\topenresty-openssl-devel \\\n\topenssl-devel \\\n\twhich \\\n    m4 \\\n    python3 \\\n\t; rm -rf /var/cache/yum yum clean all\n\nRUN yum -y update \\\n    && yum install -y python3 \\\n    && yum install -y python3-devel \\\n    && pip3 install --no-cache-dir websockets && rm -rf /var/cache/yum\n\n# Install giflib\nRUN cd /tmp \\\n\t&& curl -fSL \"https://downloads.sourceforge.net/project/giflib/giflib-${GIFLIB_VERSION}.tar.gz\" -o giflib-${GIFLIB_VERSION}.tar.gz \\\n\t&& tar xzf giflib-${GIFLIB_VERSION}.tar.gz \\\n\t&& cd giflib-${GIFLIB_VERSION} \\\n\t&& ./configure --build=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\" \\\n\t\t--prefix=/usr \\\n\t&& make \\\n\t&& make install \\\n\t&& cd / \\\n\t&& rm -rf /tmp/* && rm giflib-${GIFLIB_VERSION}.tar.gz\n\n# Install from LuaRocks\nRUN luarocks install luasec \\\n\t&& luarocks install bcrypt \\\n\t&& luarocks install giflib \\\n\t\t--server=http://luarocks.org/dev \\\n\t&& luarocks install i18n \\\n\t&& luarocks install lapis \\\n\t\tCRYPTO_DIR=${OPENSSL_DIR} \\\n\t\tCRYPTO_INCDIR=${OPENSSL_DIR}/include \\\n\t\tOPENSSL_DIR=${OPENSSL_DIR} \\\n\t\tOPENSSL_INCDIR=${OPENSSL_DIR}/include \\\n\t&& luarocks install luacov \\\n\t&& luarocks install luaposix \\\n\t&& luarocks install magick \\\n\t&& luarocks install markdown \\\n\t&& luarocks install md5 \\\n    && luarocks install http\n    #&& luarocks install lapis-console \\\n\t#&& luarocks install busted \\\n\n# Wait for it\nADD wait-for-it.sh /usr/local/bin/wait-for-it.sh\nRUN chmod +x /usr/local/bin/wait-for-it.sh \\\n\t&& dos2unix /usr/local/bin/wait-for-it.sh\n\n# Entrypoint\nADD docker-entrypoint.sh /usr/local/bin/docker-entrypoint.sh\nRUN chmod +x /usr/local/bin/docker-entrypoint.sh \\\n\t&& dos2unix /usr/local/bin/docker-entrypoint.sh\n\n# Update LD cache\nRUN ldconfig\n"
}