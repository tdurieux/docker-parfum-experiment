{
  "startTime": 1674250275421,
  "endTime": 1674250276719,
  "originalSmells": [
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 19,
        "lineEnd": 19,
        "columnStart": 22,
        "columnEnd": 66
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 31,
        "lineEnd": 31,
        "columnStart": 22,
        "columnEnd": 47
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 19,
        "lineEnd": 19,
        "columnStart": 22,
        "columnEnd": 66
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 31,
        "lineEnd": 31,
        "columnStart": 22,
        "columnEnd": 47
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "# B3LB - BigBlueButton Load Balancer\n# Copyright (C) 2020-2021 IBH IT-Service GmbH\n#\n# This program is free software: you can redistribute it and/or modify it\n# under the terms of the GNU Affero General Public License as published by\n# the Free Software Foundation, either version 3 of the License, or (at your\n# option) any later version.\n#\n# This program is distributed in the hope that it will be useful, but WITHOUT\n# ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n# FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero General Public License\n# for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <https://www.gnu.org/licenses/>.\n\n\nFROM pypy:3.7-7.3.5-slim AS build\n\nRUN apt-get update && apt-get install --no-install-recommends -y build-essential libpq-dev && rm -rf /var/lib/apt/lists/*;\n\nENV PYTHONUNBUFFERED 1\n\nWORKDIR /usr/src/app\n\nCOPY b3lb/requirements.txt ./\nRUN pip3 install --no-cache-dir --prefix=/usr/local -r requirements.txt\n\n\nFROM pypy:3.7-7.3.5-slim\n\nRUN apt-get update && apt-get install --no-install-recommends -y libpq5 && rm -rf /var/lib/apt/lists/*;\n\nARG B3LBUID=8318\nENV PYTHONUNBUFFERED 1\nENV PYTHONPATH /usr/local/site-packages\n\nWORKDIR /usr/src/app\n\nCOPY --from=build /usr/local /usr/local\n\nCOPY b3lb/manage.py \\\n     b3lb/loadbalancer/.env.dev \\\n     docker/entrypoint.sh \\\n     docker/static.sh \\\n     ./\nCOPY b3lb/loadbalancer ./loadbalancer\nCOPY b3lb/rest ./rest\n\nRUN addgroup --gid $B3LBUID b3lb && \\\n    adduser --uid $B3LBUID --gid $B3LBUID --home /usr/src/app --disabled-password --no-create-home --system b3lb && \\\n    ln -s $(which pypy3) /usr/local/bin/python3 && \\\n    ENV_FILE=.env.dev ./manage.py check --force-color && \\\n    ENV_FILE=.env.dev ./manage.py collectstatic --no-input --force-color\n\nUSER b3lb:b3lb\nENTRYPOINT [\"/usr/src/app/entrypoint.sh\"]\nCMD [\"uvicorn\", \"--host\", \"0.0.0.0\", \"--ws\", \"none\", \"--no-access-log\", \"--use-colors\"]\n"
}