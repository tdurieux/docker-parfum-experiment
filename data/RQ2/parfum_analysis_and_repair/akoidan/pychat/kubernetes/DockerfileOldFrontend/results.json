{
  "startTime": 1674217415089,
  "endTime": 1674217416174,
  "originalSmells": [
    {
      "rule": "yarnCacheCleanAfterInstall",
      "position": {
        "lineStart": 12,
        "lineEnd": 12,
        "columnStart": 4,
        "columnEnd": 34
      }
    },
    {
      "rule": "yarnCacheCleanAfterInstall",
      "position": {
        "lineStart": 19,
        "lineEnd": 19,
        "columnStart": 4,
        "columnEnd": 14
      }
    },
    {
      "rule": "mkdirUsrSrcThenRemove",
      "position": {
        "lineStart": 9,
        "lineEnd": 9,
        "columnStart": 19,
        "columnEnd": 40
      }
    },
    {
      "rule": "apkAddUseNoCache",
      "position": {
        "lineStart": 9,
        "lineEnd": 9,
        "columnStart": 4,
        "columnEnd": 15
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "yarnCacheCleanAfterInstall",
      "position": {
        "lineStart": 12,
        "lineEnd": 12,
        "columnStart": 38,
        "columnEnd": 54
      }
    },
    {
      "rule": "yarnCacheCleanAfterInstall",
      "position": {
        "lineStart": 19,
        "lineEnd": 19,
        "columnStart": 18,
        "columnEnd": 34
      }
    }
  ],
  "repairedDockerfile": "# cd <root>\n# docker build -f ./kubernetes/DockerfileOldFrontend -t deathangel908/pychat-frontend .\n# docker push deathangel908/pychat-frontend\n# https://stackoverflow.com/a/49478889/3872976\n# minikube tunnel service/backend-service\nFROM node:16.15-alpine3.15 as builder\n\nWORKDIR /usr/src/frontend\n# for yarn install to clone via git in package.json\nRUN apk add --no-cache git && mkdir /usr/src/common && rm -rf /usr/src/common\nCOPY ./frontend/package.json ./frontend/yarn.lock ./\nCOPY ./frontend/patches ./patches/\nRUN yarn install --frozen-lockfile && yarn cache clean;\n\nCOPY ./frontend/tsconfig.node.json ./frontend/tsconfig.json ./\nCOPY ./frontend/src ./src/\nCOPY ./frontend/build ./build/\nCOPY ./kubernetes/frontend-old-pychat.org.json ./build/production.json\n\nRUN yarn build && yarn cache clean;\n\n\nFROM nginx:1.21.6-alpine\n\nCOPY --from=builder /usr/src/frontend/dist /srv/http/dist\nCOPY kubernetes/nginx-old-pychat.org.conf /etc/nginx/conf.d/pychat.conf\nRUN rm /etc/nginx/conf.d/default.conf\n"
}