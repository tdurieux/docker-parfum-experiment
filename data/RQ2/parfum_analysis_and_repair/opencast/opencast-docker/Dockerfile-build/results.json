{
  "startTime": 1674253743466,
  "endTime": 1674253744652,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 110,
        "lineEnd": 110,
        "columnStart": 4,
        "columnEnd": 94
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "# Copyright 2016 The WWU eLectures Team All rights reserved.\n#\n# Licensed under the Educational Community License, Version 2.0\n# (the \"License\"); you may not use this file except in compliance with\n# the License. You may obtain a copy of the License at\n#\n#     http://opensource.org/licenses/ECL-2.0\n#\n# Unless required by applicable law or agreed to in writing, software\n# distributed under the License is distributed on an \"AS IS\" BASIS,\n# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n# See the License for the specific language governing permissions and\n# limitations under the License.\n\nFROM docker.io/maven:3-jdk-11-slim\nLABEL org.opencontainers.image.base.name=\"docker.io/maven:3-jdk-11-slim\"\n\nARG OPENCAST_REPO=\"https://github.com/opencast/opencast.git\"\nARG OPENCAST_VERSION=\"develop\"\nARG FFMPEG_VERSION=\"latest\"\nARG VERSION=unkown\nARG BUILD_DATE=unkown\nARG GIT_COMMIT=unkown\n\nLABEL maintainer=\"educast.nrw <info@educast.nrw>\" \\\n      org.opencontainers.image.title=\"opencast-build\" \\\n      org.opencontainers.image.description=\"container image that provides an Opencast build and development environment\" \\\n      org.opencontainers.image.version=\"${VERSION}\" \\\n      org.opencontainers.image.vendor=\"Opencast\" \\\n      org.opencontainers.image.authors=\"educast.nrw <info@educast.nrw>\" \\\n      org.opencontainers.image.licenses=\"ECL-2.0\" \\\n      org.opencontainers.image.url=\"https://github.com/opencast/opencast-docker/blob/${VERSION}/README.md\" \\\n      org.opencontainers.image.documentation=\"https://github.com/opencast/opencast-docker/blob/${VERSION}/README.md\" \\\n      org.opencontainers.image.source=\"https://github.com/opencast/opencast-docker\" \\\n      org.opencontainers.image.created=\"${BUILD_DATE}\" \\\n      org.opencontainers.image.revision=\"${GIT_COMMIT}\"\n\nENV OPENCAST_REPO=\"${OPENCAST_REPO}\" \\\n    OPENCAST_VERSION=\"${OPENCAST_VERSION}\" \\\n    OPENCAST_DISTRIBUTION=\"${OPENCAST_DISTRIBUTION}\" \\\n    OPENCAST_SRC=\"/usr/src/opencast\" \\\n    OPENCAST_HOME=\"/opencast\" \\\n    OPENCAST_DATA=\"/data\" \\\n    OPENCAST_CUSTOM_CONFIG=\"/etc/opencast\" \\\n    OPENCAST_USER=\"opencast\" \\\n    OPENCAST_GROUP=\"opencast\" \\\n    OPENCAST_UHOME=\"/home/opencast\" \\\n    OPENCAST_UID=\"800\" \\\n    OPENCAST_GID=\"800\" \\\n    OPENCAST_BUILD_ASSETS=\"/docker\"\nENV OPENCAST_CONFIG=\"${OPENCAST_HOME}/etc\" \\\n    OPENCAST_SCRIPTS=\"${OPENCAST_HOME}/docker/scripts\" \\\n    OPENCAST_SUPPORT=\"${OPENCAST_HOME}/docker/support\" \\\n    OPENCAST_STAGE_BASE_HOME=\"${OPENCAST_HOME}/docker/stage/base\" \\\n    OPENCAST_STAGE_OUT_HOME=\"${OPENCAST_HOME}/docker/stage/out\"\nENV ORG_OPENCASTPROJECT_SECURITY_ADMIN_USER=\"admin\" \\\n    ORG_OPENCASTPROJECT_SECURITY_ADMIN_PASS=\"opencast\" \\\n    ORG_OPENCASTPROJECT_SECURITY_DIGEST_USER=\"opencast_system_account\" \\\n    ORG_OPENCASTPROJECT_SECURITY_DIGEST_PASS=\"CHANGE_ME\"\n\nRUN apt-get update \\\n && apt-get install -y --no-install-recommends \\\n      bzip2 \\\n      ca-certificates \\\n      firefox-esr \\\n      g++ \\\n      gcc \\\n      git \\\n      gzip \\\n      libc-dev \\\n      make \\\n      openssl \\\n      sudo \\\n      tar \\\n      xz-utils \\\n && apt-get install -y --no-install-recommends \\\n      ca-certificates \\\n      curl \\\n      fontconfig \\\n      fonts-dejavu \\\n      fonts-freefont-ttf \\\n      fonts-liberation \\\n      fonts-linuxlibertine \\\n      hunspell \\\n      hunspell-en-au \\\n      hunspell-en-ca \\\n      hunspell-en-gb \\\n      hunspell-en-us \\\n      hunspell-en-za \\\n      inotify-tools \\\n      jq \\\n      netcat-openbsd \\\n      nfs-common \\\n      openssl \\\n      rsync \\\n      sox \\\n      synfig \\\n      tesseract-ocr \\\n      tesseract-ocr-eng \\\n      tzdata \\\n  \\\n && sudo ln -s /usr/local/openjdk*/bin/* /usr/local/bin/ \\\n  \\\n && git clone https://github.com/ncopa/su-exec.git /tmp/su-exec \\\n && cd /tmp/su-exec \\\n && make \\\n && cp su-exec /usr/local/sbin \\\n  \\\n && mkdir -p /tmp/ffmpeg \\\n && cd /tmp/ffmpeg \\\n && curl -f -sSL \"https://s3.opencast.org/opencast-ffmpeg-static/ffmpeg-${FFMPEG_VERSION}.tar.xz\" \\\n     | tar xJf - --strip-components 1 --wildcards '*/ffmpeg' '*/ffprobe' \\\n && chown root:root ff* \\\n && mv ff* /usr/local/bin \\\n\n && groupadd --system -g \"${OPENCAST_GID}\" \"${OPENCAST_GROUP}\" \\\n && useradd --system -M -N -g \"${OPENCAST_GROUP}\" -d \"${OPENCAST_UHOME}\" -u \"${OPENCAST_UID}\" \"${OPENCAST_USER}\" \\\n && mkdir -p \"${OPENCAST_SRC}\" \"${OPENCAST_HOME}\" \"${OPENCAST_UHOME}\" \"${OPENCAST_DATA}\" \"${OPENCAST_BUILD_ASSETS}\" \\\n && chown -R \"${OPENCAST_USER}:${OPENCAST_GROUP}\" \"${OPENCAST_HOME}\" \"${OPENCAST_UHOME}\" \"${OPENCAST_DATA}\" \\\n && echo \"opencast-builder ALL = NOPASSWD: ALL\" > /etc/sudoers.d/opencast-builder \\\n\n && cd / \\\n && rm -rf /tmp/* /var/lib/apt/lists/*\n\nCOPY rootfs       \"${OPENCAST_BUILD_ASSETS}/\"\nCOPY rootfs-build /\n\nWORKDIR \"${OPENCAST_SRC}\"\n\nEXPOSE 8080 5005\nVOLUME [ \"${OPENCAST_DATA}\", \"${OPENCAST_SRC}\", \"/root/.m2\" ]\n\nENTRYPOINT [\"/docker-entrypoint.sh\"]\nCMD [\"bash\"]\n"
}