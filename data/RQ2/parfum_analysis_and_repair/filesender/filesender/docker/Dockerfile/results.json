{
  "startTime": 1674218829442,
  "endTime": 1674218830716,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 17,
        "lineEnd": 17,
        "columnStart": 4,
        "columnEnd": 108
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 19,
        "lineEnd": 19,
        "columnStart": 4,
        "columnEnd": 128
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM php:7.4-fpm-buster\n\n# Accept arguments to make the build process dynamically accept different builds\n# Used for filesender CI\n\nARG REF=2.32\nARG REF_SUM=\"d4fa90a5fa33db53009b782956dc8145b3a8b92a5a260f318017724f8a1978b1\"\nARG SSP_REF=1.19.5\nARG SSP_REF_SUM=\"ab1a71a4eed2c086774829d47ce72137e4d1a7bd6b8a2535b4a1ddfd6e7da51f\"\n\nENV FILESENDER_VERSION=$REF \\\n    FILESENDER_SUM=$REF_SUM \\\n    SSP_VERSION=$SSP_REF \\\n    SSP_SUM=$SSP_REF_SUM\n\nRUN cd /opt && mkdir filesender && \\\n    cd /opt/filesender && \\\n    curl -f -kL https://github.com/filesender/filesender/archive/master-filesender-${FILESENDER_VERSION}.tar.gz | tar xz && \\\n    ln -s filesender-master-filesender-${FILESENDER_VERSION} filesender && \\\n    curl -f -L https://github.com/simplesamlphp/simplesamlphp/releases/download/v${SSP_VERSION}/simplesamlphp-${SSP_VERSION}.tar.gz | tar xz && \\\n    ln -s simplesamlphp-${SSP_VERSION} simplesamlphp\n\nRUN cd /opt/filesender/filesender && \\\n    cp config/config_sample.php config/config.php && \\\n    mkdir -p tmp files log && \\\n    chmod o-rwx tmp files log config/config.php && \\\n    chown www-data:www-data tmp files log && \\\n    chgrp www-data config/config.php && \\\n    cd /opt/filesender/simplesamlphp && \\\n    cp -r config-templates/*.php config/ && \\\n    cp -r metadata-templates/*.php metadata/\n\nRUN mkdir -p /config/fpm /config/filesender /config/simplesamlphp/config /config/simplesamlphp/metadata && \\\n    mv -f /usr/local/etc/php-fpm.d/www.conf /config/fpm/www.conf && \\\n    mv -f /opt/filesender/filesender/config/config.php /config/filesender/config.php && \\\n    mv -f /opt/filesender/simplesamlphp/config/*.php /config/simplesamlphp/config/ && \\\n    mv -f /opt/filesender/simplesamlphp/metadata/*.php /config/simplesamlphp/metadata/ && \\\n    ln -s /config/fpm/www.conf /usr/local/etc/php-fpm.d/filesender.conf && \\\n    ln -s /config/filesender/config.php /opt/filesender/filesender/config/config.php && \\\n    ln -s /config/simplesamlphp/config/acl.php /opt/filesender/simplesamlphp/config/acl.php && \\\n    ln -s /config/simplesamlphp/config/authsource.php /opt/filesender/simplesamlphp/config/authsource.php && \\\n    ln -s /config/simplesamlphp/config/config.php /opt/filesender/simplesamlphp/config/config.php && \\\n    ln -s /config/simplesamlphp/metadata/active.php /opt/filesender/simplesamlphp/metadata/active.php\n\nRUN apt-get update && \\\n    apt-get dist-upgrade -y && \\\n    apt-get install -y --no-install-recommends nginx runit && \\\n    apt-get autoremove -y && \\\n    apt-get clean && \\ \n    rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*\n\nCOPY assets /\n\nVOLUME [\"/opt/filesender\", \"/config/fpm\", \"/config/filesender\", \"/config/simplesamlphp/config\", \"/config/simplesamlphp/metadata\", \"/opt/filesender/data\"]\nEXPOSE 80 443\n\nCMD [\"/usr/local/sbin/runsvdir-init\"]\n\nARG BUILD_DATE\nARG VCS_REF\nLABEL maintainer=\"Nils Vogels <n.vogels@aves-it.nl>\" \\\n      org.label-schema.build-date=\"${BUILD_DATE}\" \\\n      org.label-schema.docker.dockerfile=\"/docker/Dockerfile\" \\\n      org.label-schema.license=\"BSD3\" \\\n      org.label-schema.name=\"Filesender and SimpleSamlPHP on php7-fpm\" \\\n      org.label-schema.vendor=\"filesender\" \\\n      org.label-schema.url=\"https://filesender.org\" \\\n      org.label-schema.vcs-ref=$VCS_REF \\\n      org.label-schema.vcs-url=\"https://github.com/filesender/filesender.git\" \\\n      org.label-schema.vcs-type=\"Git\" \\\n      org.label-schema.version=\"${REF}\" \\\n      org.label-schema.schema-version=\"1.0\"\n"
}