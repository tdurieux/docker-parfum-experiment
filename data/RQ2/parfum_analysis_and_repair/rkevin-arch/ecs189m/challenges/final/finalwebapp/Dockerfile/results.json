{
  "startTime": 1674220201087,
  "endTime": 1674220202278,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 12,
        "lineEnd": 12,
        "columnStart": 4,
        "columnEnd": 97
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 8,
        "lineEnd": 8,
        "columnStart": 2,
        "columnEnd": 37
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 3,
        "lineEnd": 6,
        "columnStart": 2,
        "columnEnd": 30
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM debian:latest\nRUN \\\n  apt-get update && \\\n  DEBIAN_FRONTEND=noninteractive \\\n    apt-get -y install --no-install-recommends \\\n    python3-bottle curl bzip2 fontconfig ca-certificates \\\n    mariadb-server python3-pip && \\\n  apt clean && \\\n  pip3 install --no-cache-dir mysql-connector-python && rm -rf /var/lib/apt/lists/*;\n\nRUN sed -i \"s/env.get('HTTP_X_FORWARDED_HOST') or //\" /usr/lib/python3/dist-packages/bottle.py\n\nRUN curl -f -Ls https://bitbucket.org/ariya/phantomjs/downloads/phantomjs-2.1.1-linux-x86_64.tar.bz2 | \\\ntar -jx phantomjs-2.1.1-linux-x86_64/bin/phantomjs -O > /usr/bin/phantomjs && chmod +x /usr/bin/phantomjs\n\nRUN useradd -s /bin/bash -m -u 1340 web\n\n# unfortunately have to use mysql, since i only taught the students how to use information_schema\nRUN service mysql start && echo \"\\\nCREATE DATABASE IF NOT EXISTS redshift_plan_tracker;\\\nUSE redshift_plan_tracker;\\\nCREATE TABLE users (\\\n    username TEXT NOT NULL,\\\n    password TEXT NOT NULL\\\n);\\\nCREATE TABLE plans_awaiting_approval (\\\n    title TEXT NOT NULL,\\\n    description TEXT NOT NULL,\\\n    id TEXT NOT NULL\\\n);\\\nCREATE TABLE top_secret_plans (\\\n    title TEXT NOT NULL,\\\n    description TEXT NOT NULL,\\\n    id TEXT NOT NULL\\\n);\\\nINSERT INTO users (username, password) VALUES\\\n('operator','9b1ae9f537049de6b73655d5b2da36cd'),\\\n('carlton_houpt','d00d7a5a043f23b6e77d6be2f8bb5a25'),\\\n('dave_strider','c1d85b1162c660b1c38bd539d010ebbd'),\\\n('donte_dona','633fde0bf732ea689aa4c278bbcd2ffc'),\\\n('finn_mertens','97a2c322760ab4da18c9507f83817437'),\\\n('florentina_marcil','a6b071637ae11479c82ed8bdc2e0c329'),\\\n('georgene_whiteford','fecc8cb9ab231acca8289fe6aa2682af'),\\\n('gwenn_tamura','cbede9fffd0f31c968d658844261ec21'),\\\n('heidi_leff','18e0526af09a136abdd180ea6b7d006f'),\\\n('ione_ballard','fb38ae50c92509f2e378cb226ecba8cf'),\\\n('jade_harley','173065ce03d5291607240498abcb6f90'),\\\n('janella_muller','03b954f0e243eca25458406ea9c4fdb6'),\\\n('jennifer_lariviere','776b08e9c6d1c9771789e29cdf72285c'),\\\n('john_doe','da6dd0ee0e3a217cde4f8923cc0c4cda'),\\\n('john_egbert','686914c0b8f901eb64283afc5441cfe2'),\\\n('karena_cornelison','3c44d680d0b0bfc2a579b1e4850ef055'),\\\n('karima_cupp','bfab1c1f43587f28efa6a161aecc97b7'),\\\n('karkat_vantas','a73c829adaf54787b033a882819cfef7'),\\\n('kathie_rodney','060a5037b624ece3d348314169bdde29'),\\\n('kelly_quon','95c4d1caf340fc2d0023c5b176561f18'),\\\n('kevin_mitnick','3e7774cbeea06e8887ddeeca74d6cb6a'),\\\n('lucretia_basel','5b0516a3e6331b8dc548c998e70ac0cc'),\\\n('micki_regis','ab26f992a203aca39773fbae096d60fe'),\\\n('monty_jantzen','8987ecdcf7ec32154cefb7da96766fe4'),\\\n('regenia_evenson','0cb0c12cd596e1ea3fa5d7dd172d9046'),\\\n('rose_lalonde','10667ea9387fd71bb6190a796d6fe3bb'),\\\n('sebastian_laviolette','a6148e80c441ef26dd876eb92fab0928'),\\\n('tamera_winchester','0f5c3d10d6d91d929b5ca36211ec2705'),\\\n('velma_farquharson','a6828830e020da9db3a5eee568dcc5cd');\\\nINSERT INTO plans_awaiting_approval(title, description, id) VALUES\\\n('Buy every property in the world above its 39th floor',\\\n'We can melt the polar ice caps using the Hubble Space Telescope, and the survivors will be forced to live in our property from now on till the end of time!',\\\n'dfba87e7e2db8ecf564ac6b54625b53c7390dcfcacf956881ec5f9dd036cd94c'),\\\n('Create a Frindolian Misoleevian Theta-Combobulator that uses sigma-infused ᾳ-cartridges',\\\n'As title. I can explain more if you have concerns about the higher homomorphism of Moussorgski particles affecting the Turgenev-Preobrazhensky zero-point adjustment module, but it should work.',\\\n'9b0db7b91d20a086fcf862a5bbd4b818a0186404249da6f9b819a501804f66ab'),\\\n('Recruit someone to become become famous children\\\\'s TV performers',\\\n'Afterwards, we can cryogenically freeze them for 40 years. When they’re thawed out, their fans will have grown up into the new world leaders, and they will be worshiped. This plan is airtight!',\\\n'2ad0a59ee8573d109d8d2c47b559ac95777ac0ee489aac9cb049bb2d8756498c'),\\\n('Realign Cartesian Mandrels',\\\n'This should boost our syllogism twine strength by 300% and nearly double the throughput of our Dejigamaflipper.',\\\n'789e7931b65a17f956e9dd5910a247dc19c1a31c70ff798fe9bc4fb7e62c3b0d');\\\nINSERT INTO top_secret_plans(title, description, id) VALUES\\\n('Waste everyone''s time',\\\n'We can pose as John, claim his homework is due, and ask everyone to do his homework for him! This will gain everyone''s pity and waste everyone''s time, especially those who remember the horrors of homework. Everyone will be so busy no one will see us coming!',\\\n'16d45adc67af743cbf4ddcb1df7cc558d78105840271f63f4db5c5fa368ef17d'),\\\n('Threaten to bomb major cities',\\\n'Through my contacts, I have sourced an intercontinental ballistic missile. We can hold a US city for ransom, and if they don''t give us money... Poof! The missile should be ready to launch at 10:00PM on Mar 20th. The missile interface can be viewed by connecting to photon.rkevin.dev port 30016, and the launch codes for the missile is ECS{L4T3_T0_TH3_P4RTY_4C50E5F2291EF75D31BFE234253BE43E}.',\\\n'ef5bcc8e62ccfae1eb06bba3b50eaad369ee3283aba911792169e21d555551cc');\\\nUPDATE mysql.user SET Password=PASSWORD('5473c338cab16ab860c51a83d9e34c43') WHERE User='root';\\\nDELETE FROM mysql.user WHERE User='';\\\nDELETE FROM mysql.user WHERE User='root' AND Host NOT IN ('localhost', '127.0.0.1', '::1');\\\nDROP DATABASE IF EXISTS test;\\\nDELETE FROM mysql.db WHERE Db='test' OR Db='test\\\\\\\\_%';\\\nCREATE USER db_user@'%' IDENTIFIED BY '1b93b39ccc87a8495ded6410752acc6c';\\\nGRANT ALL PRIVILEGES ON redshift_plan_tracker.* TO db_user@'%';\\\nFLUSH PRIVILEGES;\" |mysql && \\\nsleep 1 && service mysql stop\n\nRUN ln -snf /usr/share/zoneinfo/America/Los_Angeles /etc/localtime && dpkg-reconfigure -f noninteractive tzdata\n\nENV OPENSSL_CONF=/etc/openssl.cnf\nUSER root:1340\nCOPY entrypoint.py /home/web/\nENTRYPOINT [\"/home/web/entrypoint.py\"]\n\nWORKDIR /home/web\n\nCOPY app.py /home/web/\nCOPY static /home/web/static/\nCOPY templates /home/web/templates/\nCOPY load_page.js /home/web/\n"
}