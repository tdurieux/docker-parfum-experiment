{
  "startTime": 1674248261116,
  "endTime": 1674248262296,
  "originalSmells": [
    {
      "rule": "wgetUseHttpsUrl",
      "position": {
        "lineStart": 18,
        "lineEnd": 18,
        "columnStart": 4,
        "columnEnd": 97
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 35,
        "lineEnd": 35,
        "columnStart": 4,
        "columnEnd": 85
      }
    },
    {
      "rule": "configureShouldUseBuildFlag",
      "position": {
        "lineStart": 24,
        "lineEnd": 24,
        "columnStart": 4,
        "columnEnd": 95
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 19,
        "lineEnd": 19,
        "columnStart": 4,
        "columnEnd": 43
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 21,
        "lineEnd": 21,
        "columnStart": 4,
        "columnEnd": 61
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM jrottenberg/ffmpeg:5-alpine\nMAINTAINER Michael Kamprath \"https://github.com/michaelkamprath\"\n\nARG NGINX_VERSION=1.20.0\nARG RTMP_REPO=uizaio\nARG RTMP_MODULE_VERSION=1.4.0.4\nARG TINI_VERSION=v0.19.0\nARG SUPERVISORD_VERSION=4.2.4\nARG PIPENV_PACKAGE_VERSION=2022.1.8\n\nRUN set -x \\\n && addgroup -S stunnel \\\n && adduser -S -D -H -h /dev/null -s /sbin/nologin -G stunnel -g stunnel stunnel \\\n && echo \"//dl-cdn.alpinelinux.org/alpine/latest-stable/main/x86_64/\" >> /etc/apk/repositories \\\n && apk update \\\n && apk add --no-cache --update stunnel ca-certificates \\\n && apk add --no-cache pcre openssl stunnel gettext python3 py3-pip \\\n && apk add --no-cache --virtual build-deps build-base pcre-dev openssl-dev zlib zlib-dev wget make \\\n && wget -O nginx-${NGINX_VERSION}.tar.gz https://nginx.org/download/nginx-${NGINX_VERSION}.tar.gz \\\n && tar -zxvf nginx-${NGINX_VERSION}.tar.gz \\\n && wget -O nginx-rtmp-module-${RTMP_MODULE_VERSION}.tar.gz https://github.com/${RTMP_REPO}/nginx-rtmp-module/archive/${RTMP_MODULE_VERSION}.tar.gz \\\n && tar -zxvf nginx-rtmp-module-${RTMP_MODULE_VERSION}.tar.gz \\\n && cd nginx-${NGINX_VERSION} \\\n && export CFLAGS=-Wno-error \\\n && ./configure --build=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\" --with-http_ssl_module --add-module=../nginx-rtmp-module-${RTMP_MODULE_VERSION} \\\n && make \\\n && make install \\\n && cp /nginx-rtmp-module-${RTMP_MODULE_VERSION}/stat.xsl /usr/local/nginx/html/ \\\n && apk del build-deps \\\n && mkdir -p /var/www/html/recordings \\\n && mkdir -p /var/run/stunnel/ \\\n && chown nobody:nobody -R /var/www/html \\\n && chown stunnel:stunnel /var/run/stunnel/ \\\n && wget -O /tini https://github.com/krallin/tini/releases/download/${TINI_VERSION}/tini-static \\\n && chmod +x /tini \\\n && pip3 install --no-cache-dir supervisor==${SUPERVISORD_VERSION} pipenv==${PIPENV_PACKAGE_VERSION} && rm nginx-${NGINX_VERSION}.tar.gz\n\nCOPY Pipfile Pipfile.lock /\nRUN  pipenv install --system --deploy\n\nCOPY supervisord.conf /etc/supervisor/supervisord.conf\nCOPY stunnel-conf/etc-default-stunnel /etc/default/stunnel\nCOPY stunnel-conf/etc-stunnel-conf.d-fb.conf /etc/stunnel/conf.d/fb.conf\nCOPY stunnel-conf/etc-stunnel-conf.d-ig.conf /etc/stunnel/conf.d/ig.conf\nCOPY stunnel-conf/etc-stunnel-stunnel.conf /etc/stunnel/stunnel.conf\n\nCOPY index.html /usr/local/nginx/html/\nCOPY nginx-conf/nginx.conf /base-nginx.conf\nCOPY launch-nginx-server.sh launch-nginx-server.sh\nCOPY rtmp-conf-generator.py nginx-template.conf.j2 /\nRUN touch /rtmp-configuration.json && chmod 744 /rtmp-configuration.json\n\nEXPOSE 1935\nEXPOSE 80\n\nSTOPSIGNAL SIGTERM\nENTRYPOINT [\"/tini\", \"--\"]\nCMD [\"/usr/bin/supervisord\", \"-c\", \"/etc/supervisor/supervisord.conf\"]\n"
}