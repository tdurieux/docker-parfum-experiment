{
  "startTime": 1674219708097,
  "endTime": 1674219710110,
  "originalSmells": [
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 3,
        "lineEnd": 11,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 3,
        "lineEnd": 11,
        "columnStart": 4,
        "columnEnd": 30
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM ubuntu:artful\n\nRUN apt-get update && \\\n    apt-get install --no-install-recommends -y \\\n      sudo tmux screen emacs git gdb net-tools \\\n      python python3 build-essential gcc \\\n      cmake bison flex libprotobuf-c-dev libreadline-dev libsqlite3-dev \\\n      libssl-dev libunwind-dev libz1 libz-dev make gawk protobuf-c-compiler \\\n      uuid-dev liblz4-tool liblz4-dev libprotobuf-c1 libsqlite3-0 \\\n      libuuid1 libz1 tzdata ncurses-dev tcl bc dh-autoreconf pkg-config \\\n      libgnutls28-dev libcurl4-gnutls-dev python-docutils libgcrypt20-dev \\\n      iproute2 nmap gnutls-bin && rm -rf /var/lib/apt/lists/*;\n\nRUN mkdir /opt/work\nCOPY build-all.sh /opt/work/\nCOPY benevolent/ /opt/work/benevolent/\nCOPY malicious/ /opt/work/malicious/\nWORKDIR /opt/work\n\nRUN git clone https://github.com/rsyslog/libee.git\nRUN git clone https://github.com/rsyslog/libestr.git\nRUN git clone https://github.com/rsyslog/libfastjson.git\nRUN git clone https://github.com/rsyslog/liblogging.git\nRUN git clone https://github.com/rsyslog/librelp.git\nRUN git clone https://github.com/rsyslog/rsyslog.git\n\n# Checkout versions with the bug\nWORKDIR /opt/work/libee\nRUN git checkout 1569d91bf33101f012cfc5b25beea68f2c6e25f2\nWORKDIR /opt/work/libestr\nRUN git checkout 75ea6e3b5a2187dbe48e7f5cec82311ca3a09c22\nWORKDIR /opt/work/libfastjson\nRUN git checkout v0.99.8\nWORKDIR /opt/work/liblogging\nRUN git checkout 5602f9dacbfc8e1912aa25f9e27be6aac13ac4ce\nWORKDIR /opt/work/librelp\nRUN git checkout v1.2.14\nWORKDIR /opt/work/rsyslog\nRUN git checkout v8.33.1\n\nWORKDIR /opt/work\nRUN ./build-all.sh\n\n# switch over to the 'semmle_build' user, since root access is no longer required\nRUN addgroup semmle_build --gid 1001\nRUN adduser semmle_build --disabled-password --uid 1001 --gid 1001\nRUN adduser semmle_build sudo\nRUN echo \"semmle_build:x\" | chpasswd\nRUN chown -R semmle_build:semmle_build /opt/work\n\nUSER semmle_build\nENV HOME /opt/work\nWORKDIR /opt/work/benevolent/certs\nRUN pwd 1>&2\nRUN ls -al 1>&2\nRUN ./create-certs.sh\nWORKDIR /opt/work/malicious/kevcertz\nRUN pwd\nRUN ./create-certz.sh\nWORKDIR /opt/work/\n"
}