{
  "startTime": 1674251507840,
  "endTime": 1674251508727,
  "originalSmells": [
    {
      "rule": "wgetUseHttpsUrl",
      "position": {
        "lineStart": 22,
        "lineEnd": 22,
        "columnStart": 4,
        "columnEnd": 94
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 3,
        "lineEnd": 6,
        "columnStart": 4,
        "columnEnd": 32
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 3,
        "lineEnd": 6,
        "columnStart": 4,
        "columnEnd": 32
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM ubuntu:bionic\n\nRUN apt-get update && \\\n    apt-get install --no-install-recommends -y \\\n      maven git curl wget zip unzip mysql-server \\\n      tmux sudo emacs maven openssh-server net-tools x11-apps \\\n      default-jdk openjdk-11-dbg && rm -rf /var/lib/apt/lists/*;\n\n# Workaround for https://serverfault.com/questions/870568\n# VOLUME /var/lib/mysql\n\nARG UID=1000\n\n# Create a non-root user account to run Struts.\nRUN adduser vivo --disabled-password --uid $UID\n\n# Grant the 'vivo' user sudo access, so that we can start sshd.\nRUN adduser vivo sudo\nRUN echo \"vivo:x\" | chpasswd\n\n# Get Tomcat.\nRUN cd /tmp && \\\n    wget https://www-eu.apache.org/dist/tomcat/tomcat-9/v9.0.14/bin/apache-tomcat-9.0.14.tar.gz && \\\n    tar xf apache-tomcat-9.0.14.tar.gz && \\\n    mv apache-tomcat-9.0.14 /usr/local/tomcat && \\\n    rm apache-tomcat-9.0.14.tar.gz\n\nCOPY init_mysql.sh /home/vivo/init_mysql.sh\nRUN chown vivo:vivo /home/vivo/init_mysql.sh\n\nRUN mkdir -p /usr/local/vivo/home\nRUN chown -R vivo:vivo /usr/local/tomcat\nRUN chown -R vivo:vivo /usr/local/vivo\n\n# Switch over to the 'vivo' user, since root access is no longer required\nUSER vivo\nWORKDIR /home/vivo\n\n# Create an ssh authorized keys file. Systems administrators would add their\n# public key to this file so that they can login remotely with ssh.\nRUN mkdir -m 700 ~/.ssh && touch ~/.ssh/authorized_keys && chmod 600 ~/.ssh/authorized_keys\n\n# Get Vivo source code.\nRUN git clone https://github.com/vivo-project/Vitro.git Vitro\nRUN cd Vitro && git checkout 6e717446b4a1b3da0fcf0130f3d0cfd1ce8b75ed\nRUN git clone https://github.com/vivo-project/VIVO.git VIVO\nRUN cd VIVO && git checkout 3da53e27fe1020ffd3157d288f6fe39ec15f87b2\n\n# Build Vivo.\nRUN cd VIVO && mvn install -s installer/example-settings.xml\n\nRUN cd /usr/local/vivo/home/config && \\\n    cp example.runtime.properties runtime.properties && \\\n    cp example.applicationSetup.n3 applicationSetup.n3\n"
}