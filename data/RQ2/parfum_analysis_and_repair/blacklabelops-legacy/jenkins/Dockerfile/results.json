{
  "startTime": 1674249030359,
  "endTime": 1674249031194,
  "originalSmells": [
    {
      "rule": "wgetUseHttpsUrl",
      "position": {
        "lineStart": 29,
        "lineEnd": 30,
        "columnStart": 4,
        "columnEnd": 88
      }
    },
    {
      "rule": "wgetUseHttpsUrl",
      "position": {
        "lineStart": 36,
        "lineEnd": 37,
        "columnStart": 4,
        "columnEnd": 141
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM blacklabelops/java:server-jre.8\n\n# Build time arguments\n# Values: latest or version number\nARG JENKINS_VERSION=latest\nARG JENKINS_HASH=\n# Cli installation details\nARG JENKINS_CLI_VERSION=2.121.3\nARG JENKINS_CLI_HASH=\n# Values: war or war-stable\nARG JENKINS_RELEASE=war\n# Permissions, set the linux user id and group id\nARG CONTAINER_UID=1000\nARG CONTAINER_GID=1000\n\n# Container Environment Variables\nENV JENKINS_HOME=/jenkins\n\nRUN export CONTAINER_USER=jenkins && \\\n    export CONTAINER_GROUP=jenkins && \\\n    # Add User\n    addgroup -g $CONTAINER_GID jenkins && \\\n    adduser -u $CONTAINER_UID -G jenkins -h /home/jenkins -s /bin/bash -S jenkins && \\\n    # Install Software\n    apk add --update \\\n      git \\\n      wget && \\\n    # Install Jenkins\n    mkdir -p /usr/bin/jenkins && \\\n    wget --directory-prefix=/usr/bin/jenkins \\\n         https://mirrors.jenkins-ci.org/${JENKINS_RELEASE}/${JENKINS_VERSION}/jenkins.war && \\\n    JENKINS_HASH=$(sha1sum /usr/bin/jenkins/jenkins.war) && \\\n    echo 'Calculated checksum: '$JENKINS_HASH && \\\n    touch /usr/bin/jenkins-cli && \\\n    touch /usr/bin/cli && \\\n    # Install Jenkins cli\n    wget --directory-prefix=/usr/bin/jenkins \\\n        https://repo.jenkins-ci.org/public/org/jenkins-ci/main/cli/${JENKINS_CLI_VERSION}/cli-${JENKINS_CLI_VERSION}-jar-with-dependencies.jar && \\\n    mv /usr/bin/jenkins/cli-${JENKINS_CLI_VERSION}-jar-with-dependencies.jar /usr/bin/jenkins/cli.jar && \\\n    JENKINS_CLI_HASH=$(sha1sum /usr/bin/jenkins/cli.jar) && \\\n    echo 'Calculated checksum: '$JENKINS_CLI_HASH && \\\n    # Jenkins permissions\n    chown -R $CONTAINER_USER:$CONTAINER_GROUP /usr/bin/jenkins /usr/bin/jenkins-cli /usr/bin/cli && \\\n    chmod ug+x /usr/bin/jenkins/jenkins.war /usr/bin/jenkins/cli.jar /usr/bin/jenkins-cli /usr/bin/cli && \\\n    # Jenkins directory\n    mkdir -p ${JENKINS_HOME} && \\\n    chown -R $CONTAINER_USER:$CONTAINER_GROUP ${JENKINS_HOME} && \\\n    # Adding letsencrypt-ca to truststore\n    export KEYSTORE=$JAVA_HOME/jre/lib/security/cacerts && \\\n    wget -P /tmp/ https://letsencrypt.org/certs/letsencryptauthorityx1.der && \\\n    wget -P /tmp/ https://letsencrypt.org/certs/letsencryptauthorityx2.der && \\\n    wget -P /tmp/ https://letsencrypt.org/certs/lets-encrypt-x1-cross-signed.der && \\\n    wget -P /tmp/ https://letsencrypt.org/certs/lets-encrypt-x2-cross-signed.der && \\\n    wget -P /tmp/ https://letsencrypt.org/certs/lets-encrypt-x3-cross-signed.der && \\\n    wget -P /tmp/ https://letsencrypt.org/certs/lets-encrypt-x4-cross-signed.der && \\\n    keytool -trustcacerts -keystore $KEYSTORE -storepass changeit -noprompt -importcert -alias isrgrootx1 -file /tmp/letsencryptauthorityx1.der && \\\n    keytool -trustcacerts -keystore $KEYSTORE -storepass changeit -noprompt -importcert -alias isrgrootx2 -file /tmp/letsencryptauthorityx2.der && \\\n    keytool -trustcacerts -keystore $KEYSTORE -storepass changeit -noprompt -importcert -alias letsencryptauthorityx1 -file /tmp/lets-encrypt-x1-cross-signed.der && \\\n    keytool -trustcacerts -keystore $KEYSTORE -storepass changeit -noprompt -importcert -alias letsencryptauthorityx2 -file /tmp/lets-encrypt-x2-cross-signed.der && \\\n    keytool -trustcacerts -keystore $KEYSTORE -storepass changeit -noprompt -importcert -alias letsencryptauthorityx3 -file /tmp/lets-encrypt-x3-cross-signed.der && \\\n    keytool -trustcacerts -keystore $KEYSTORE -storepass changeit -noprompt -importcert -alias letsencryptauthorityx4 -file /tmp/lets-encrypt-x4-cross-signed.der && \\\n    # Remove obsolete packages and cleanup\n    apk del wget && \\\n    rm -rf /var/cache/apk/* && rm -rf /var/log/* && rm -rf /tmp/*\n\nLABEL com.blacklabelops.application.jenkins.version=$JENKINS_VERSION-$JENKINS_RELEASE \\\n      com.blacklabelops.application.jenkins.hash=$JENKINS_HASH \\\n      com.blacklabelops.application.jenkins.hashtype=sha1sum \\\n      com.blacklabelops.application.jenkins.userid=$CONTAINER_UID \\\n      com.blacklabelops.application.jenkins.groupid=$CONTAINER_GID \\\n      com.blacklabelops.application.jenkinscli.version=$JENKINS_CLI_VERSION \\\n      com.blacklabelops.application.jenkinscli.hash=$JENKINS_CLI_HASH \\\n      com.blacklabelops.application.jenkinscli.hashtype=sha1sum\n\n# Entrypoint Environment Variables\nENV JAVA_VM_PARAMETERS=-Xmx512m \\\n    JENKINS_PRODUCTION_SETTINGS=false \\\n    JENKINS_MASTER_EXECUTORS= \\\n    JENKINS_SLAVEPORT=50000 \\\n    JENKINS_PLUGINS= \\\n    JENKINS_PARAMETERS= \\\n    JENKINS_KEYSTORE_PASSWORD= \\\n    JENKINS_CERTIFICATE_DNAME= \\\n    JENKINS_ENV_FILE= \\\n    JENKINS_DELAYED_START= \\\n    JENKINS_CLI_URL=http://localhost:8080 \\\n    JENKINS_CLI_SSH=\n\nWORKDIR ${JENKINS_HOME}\nVOLUME [\"${JENKINS_HOME}\"]\nEXPOSE 8080 50000\n\nUSER jenkins\nCOPY imagescripts/ /home/jenkins\nENTRYPOINT [\"/sbin/tini\",\"--\",\"/home/jenkins/docker-entrypoint.sh\"]\nCMD [\"jenkins\"]\n"
}