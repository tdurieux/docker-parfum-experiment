{
  "startTime": 1674216357054,
  "endTime": 1674216358238,
  "originalSmells": [
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 4,
        "lineEnd": 32,
        "columnStart": 22,
        "columnEnd": 19
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM ubuntu:20.04 as builder\nLABEL maintainer=\"Charlie Lewis <clewis@iqt.org>\"\nARG SRS_VERSION=release_22_04\nENV DEBIAN_FRONTEND noninteractive\nRUN apt-get update && apt-get install --no-install-recommends -yq \\\n     build-essential \\\n     ca-certificates \\\n     cmake \\\n     git \\\n     g++ \\\n     libboost-chrono-dev \\\n     libboost-date-time-dev \\\n     libboost-filesystem-dev \\\n     libboost-program-options-dev \\\n     libboost-thread-dev \\\n     libboost-test-dev \\\n     libconfig++-dev \\\n     libedit-dev \\\n     libfftw3-dev \\\n     libmbedtls-dev \\\n     libpcsclite-dev \\\n     libsctp-dev \\\n     libtecla-dev \\\n     libusb-1.0-0-dev \\\n     libvolk2-dev \\\n     libzmq3-dev \\\n     lksctp-tools \\\n     pkg-config \\\n     python3 \\\n     python3-pip \\\n     python3-mako \\\n     soapysdr-module-lms7 \\\n     soapysdr-tools && rm -rf /var/lib/apt/lists/*;\nWORKDIR /root\nRUN python3 -m pip install -U pip\nRUN python3 -m pip install -U requests\nRUN git clone https://github.com/EttusResearch/uhd.git -b v4.1.0.3 \\\n    && mkdir -p /root/uhd/host/build \\\n    && cd /root/uhd/host/build \\\n    && cmake -DENABLE_TESTS=OFF -DENABLE_MANUAL=OFF -DENABLE_EXAMPLES=OFF -DENABLE_B100=OFF -DENABLE_USRP1=OFF -DENABLE_USRP2=OFF -DENABLE_X300=OFF -DENABLE_N320=OFF -DENABLE_N300=OFF -DENABLE_E320=OFF -DENABLE_E300=OFF -DENABLE_X400=OFF -DENABLE_MPMD=OFF -DENABLE_OCTOCLOCK=OFF ../ && make -j `nproc` && make install && ldconfig \\\n    && cd /root && rm -rf /root/uhd\nRUN git clone https://github.com/Nuand/bladeRF.git -b 2021.10 \\\n    && mkdir -p /root/bladeRF/host/build \\\n    && cd /root/bladeRF/host/build \\\n    && cmake -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=/usr/local .. && make -j && make install && ldconfig \\\n    && cd /root && rm -rf /root/bladeRF\nRUN git clone https://github.com/pothosware/SoapySDR.git -b soapy-sdr-0.7.2 \\\n    && mkdir -p /root/SoapySDR/build \\\n    && cd /root/SoapySDR/build \\\n    && cmake ../ && make -j `nproc` && make install && ldconfig \\\n    && cd /root && rm -rf /root/SoapySDR\nRUN git clone https://github.com/myriadrf/LimeSuite.git -b v20.10.0 \\\n    && mkdir -p /root/LimeSuite/build \\\n    && cd /root/LimeSuite/build \\\n    && cmake ../ && make -j `nproc` && make install && ldconfig \\\n    && cd /root && rm -rf /root/LimeSuite\nRUN /usr/local/lib/uhd/utils/uhd_images_downloader.py -t \"b2|usb\"\n# TODO: not possible to build release 19_12 under Ubuntu 22.04 w/gcc 12,\n# as string safety checks fail. If disabled with -Wno-error, srsRAN does\n# not pass tests anyway.\nRUN git clone https://github.com/srsRAN/srsRAN.git -b ${SRS_VERSION} \\\n    && mkdir -p /root/srsRAN/build \\\n    && cd /root/srsRAN/build \\\n    && cmake -DENABLE_AVX512=OFF ../ && make -j `nproc` && make install && ldconfig\n\nFROM ubuntu:20.04\nLABEL maintainer=\"Charlie Lewis <clewis@iqt.org>\"\nENV DEBIAN_FRONTEND noninteractive\nCOPY --from=builder /usr/local /usr/local\nCOPY --from=builder /usr/lib/*-linux-gnu /usr/lib/\nRUN apt-get update && apt-get install --no-install-recommends -yq \\\n     iperf \\\n     iperf3 \\\n     iproute2 \\\n     iputils-ping \\\n     net-tools \\\n     tcpdump \\\n     wget && \\\n     apt-get autoremove && apt-get clean && rm -rf /var/lib/apt/lists/*\nRUN mkdir /config\nCOPY scripts /scripts\nENTRYPOINT [\"/bin/sh\"]\n"
}