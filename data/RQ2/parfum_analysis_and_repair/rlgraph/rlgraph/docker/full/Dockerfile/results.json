{
  "startTime": 1674254399511,
  "endTime": 1674254400674,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 30,
        "lineEnd": 30,
        "columnStart": 129,
        "columnEnd": 175
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 38,
        "lineEnd": 38,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 40,
        "lineEnd": 41,
        "columnStart": 4,
        "columnEnd": 64
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 42,
        "lineEnd": 42,
        "columnStart": 4,
        "columnEnd": 25
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 58,
        "lineEnd": 58,
        "columnStart": 4,
        "columnEnd": 83
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 8,
        "lineEnd": 8,
        "columnStart": 4,
        "columnEnd": 32
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 25,
        "lineEnd": 25,
        "columnStart": 4,
        "columnEnd": 36
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 28,
        "lineEnd": 28,
        "columnStart": 4,
        "columnEnd": 66
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 29,
        "lineEnd": 29,
        "columnStart": 4,
        "columnEnd": 28
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 31,
        "lineEnd": 31,
        "columnStart": 35,
        "columnEnd": 59
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 8,
        "lineEnd": 8,
        "columnStart": 4,
        "columnEnd": 32
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 14,
        "lineEnd": 17,
        "columnStart": 4,
        "columnEnd": 77
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 21,
        "lineEnd": 22,
        "columnStart": 4,
        "columnEnd": 81
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 25,
        "lineEnd": 25,
        "columnStart": 4,
        "columnEnd": 36
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 28,
        "lineEnd": 28,
        "columnStart": 4,
        "columnEnd": 66
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 29,
        "lineEnd": 29,
        "columnStart": 4,
        "columnEnd": 28
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 8,
        "lineEnd": 8,
        "columnStart": 4,
        "columnEnd": 32
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 14,
        "lineEnd": 17,
        "columnStart": 4,
        "columnEnd": 77
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 21,
        "lineEnd": 22,
        "columnStart": 4,
        "columnEnd": 81
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 25,
        "lineEnd": 25,
        "columnStart": 4,
        "columnEnd": 36
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 28,
        "lineEnd": 28,
        "columnStart": 4,
        "columnEnd": 66
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 29,
        "lineEnd": 29,
        "columnStart": 4,
        "columnEnd": 28
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 31,
        "lineEnd": 31,
        "columnStart": 35,
        "columnEnd": 59
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 8,
        "lineEnd": 8,
        "columnStart": 4,
        "columnEnd": 56
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 14,
        "lineEnd": 17,
        "columnStart": 4,
        "columnEnd": 77
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 21,
        "lineEnd": 22,
        "columnStart": 4,
        "columnEnd": 81
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 25,
        "lineEnd": 25,
        "columnStart": 4,
        "columnEnd": 60
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 28,
        "lineEnd": 28,
        "columnStart": 4,
        "columnEnd": 90
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 29,
        "lineEnd": 29,
        "columnStart": 4,
        "columnEnd": 52
      }
    }
  ],
  "repairedDockerfile": "# Image for rlgraph/rlgraph:full\n# Contains all RLgraph supported envs.\n\nFROM ubuntu:cosmic\n\nRUN apt-get update -y\nRUN apt-get upgrade -y\n\nRUN apt-get install --no-install-recommends -y python3.6 && rm -rf /var/lib/apt/lists/*;\n# Create proper softlink to py3\nWORKDIR /usr/bin\nRUN rm -rf python && ln -s python3 python\n\n# Install all necessary packages to run any RLgraph experiment in any RLgraph supported environment.\nRUN DEBIAN_FRONTEND=noninteractive apt-get install -y --no-install-recommends tzdata shared-mime-info sudo vim git python3.6-dev python3-pip \\\n    python3-setuptools libopencv-dev cmake clang-6.0 git build-essential ca-certificates \\\n    pkg-config bash-completion lua5.1 liblua5.1-0-dev libffi-dev gettext freeglut3-dev libsdl2-dev libjpeg-dev \\\n    libosmesa6-dev python3-pil python3-numpy jq manpages-pl manpages-fr-extra && rm -rf /var/lib/apt/lists/*;\n    #realpath  # clang-3.8\n\n# Vizdoom stuff\nRUN apt-get install -y --no-install-recommends nasm tar libbz2-dev libgtk2.0-dev libfluidsynth-dev libgme-dev \\\n    libopenal-dev timidity libwildmidi-dev libboost-all-dev liblua5.1-0-dev julia && rm -rf /var/lib/apt/lists/*;\n\n# Needed for rendering openAI gym[atari]-Envs in Win Docker container using xMing.\nRUN apt-get install --no-install-recommends -y freeglut3-dev && rm -rf /var/lib/apt/lists/*;\n\n# Needed for Deepmind Lab.\nRUN apt-get install --no-install-recommends -y curl zip unzip g++ zlib1g-dev openjdk-8-jdk && rm -rf /var/lib/apt/lists/*;\nRUN apt-get install --no-install-recommends -y gnupg && rm -rf /var/lib/apt/lists/*;\nRUN echo \"deb [arch=amd64] http://storage.googleapis.com/bazel-apt stable jdk1.8\" | sudo tee /etc/apt/sources.list.d/bazel.list; curl -f https://bazel.build/bazel-release.pub.gpg | sudo apt-key add -\nRUN sudo apt-get update -y && sudo apt-get install --no-install-recommends -y bazel && rm -rf /var/lib/apt/lists/*;\nWORKDIR /root/\nRUN git clone https://github.com/deepmind/lab.git\nWORKDIR lab/\nRUN touch WORKSPACE\n\n# Upgrade pip before installing packages with it.\nRUN pip3 install --no-cache-dir --upgrade pip\n# Install necessary pip packages.\nRUN pip3 install --no-cache-dir numpy pydevd tensorflow==1.13.1 tensorflow_probability cached-property gym scipy pyyaml gym[atari] ray opencv-python pytest six \\\n    requests lz4 pyarrow wheel atari_py torch torchvision pygame\nRUN pip3 install --no-cache-dir graphviz\n\n# Write a correct bazel build config for python so that bazel finds the python and numpy headers.\nRUN echo 'cc_library(name = \"python\",hdrs = glob([\"include/python3.6/**/*.h\"]),' \\\n    'includes = [\"include/python3.6\", \"include/python3.6/numpy\"], visibility = [\"//visibility:public\"],)' > \\\n    python.BUILD\n\n# Bazel-build and install deepmind Lab.\nRUN bazel build -c opt python/pip_package:build_pip_package\n\n# TODO: Why do we need to do this again here?: Create proper softlink to py3\nWORKDIR /usr/bin\nRUN rm -rf python && ln -s python3 python\nWORKDIR /root/lab/\n\nRUN ./bazel-bin/python/pip_package/build_pip_package /tmp/dmlab_pkg\nRUN pip3 install --no-cache-dir /tmp/dmlab_pkg/DeepMind_Lab-1.0-py3-none-any.whl --force-reinstall\n\n# Compile the batcher.cc file into batcher.so\n#RUN TF_INC=\"$(python -c 'import tensorflow as tf; print(tf.sysconfig.get_include())')\" && \\\n#    TF_LIB=\"$(python -c 'import tensorflow as tf; print(tf.sysconfig.get_lib())')\" && \\\n#    g++-4.8 -std=c++11 -shared batcher.cc -o batcher.so -fPIC -I $TF_INC -O2 -D_GLIBCXX_USE_CXX11_ABI=0 -L$TF_LIB -ltensorflow_framework\n\nCMD [\"bash\"]\n"
}