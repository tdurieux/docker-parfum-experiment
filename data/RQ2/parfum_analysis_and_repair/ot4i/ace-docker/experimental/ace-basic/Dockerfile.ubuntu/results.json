{
  "startTime": 1674250176700,
  "endTime": 1674250177281,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 25,
        "lineEnd": 25,
        "columnStart": 30,
        "columnEnd": 51
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 25,
        "lineEnd": 25,
        "columnStart": 57,
        "columnEnd": 104
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 23,
        "lineEnd": 23,
        "columnStart": 22,
        "columnEnd": 69
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM ubuntu:20.04\nMAINTAINER Trevor Dolby <tdolby@uk.ibm.com> (@tdolby)\n\n# Build and run:\n#\n# docker build -t ace-basic:12.0.4.0-ubuntu -f Dockerfile .\n# docker run -e LICENSE=accept -p 7600:7600 -p 7800:7800 --rm -ti ace-basic:12.0.4.0-ubuntu\n#\n# Can also mount a volume for the work directory:\n#\n# docker run -e LICENSE=accept -v /what/ever/dir:/home/aceuser/ace-server -p 7600:7600 -p 7800:7800 --rm -ti ace-basic:12.0.4.0-ubuntu\n#\n# This might require a local directory with the right permissions, or changing the userid further down . . .\n\nARG USERNAME\nARG PASSWORD\nARG DOWNLOAD_URL=http://public.dhe.ibm.com/ibmdl/export/pub/software/websphere/integration/12.0.4.0-ACE-LINUX64-DEVELOPER.tar.gz\nARG PRODUCT_LABEL=ace-12.0.4.0\n\n# Prevent errors about having no terminal when using apt-get\nENV DEBIAN_FRONTEND noninteractive\n\n# Install ACE v12.0.4.0 and accept the license\nRUN apt-get update && apt-get install -y --no-install-recommends curl && \\\n    mkdir /opt/ibm && echo Downloading package ${DOWNLOAD_URL} && \\\n    if [ -z $USERNAME ]; then \\\n    curl -f ${DOWNLOAD_URL}; else curl -f -u ${USERNAME}:{PASSWORD} ${DOWNLOAD_URL}; fi | \\\n    tar zx --exclude=tools --exclude server/bin/TADataCollector.sh --exclude server/transformationAdvisor/ta-plugin-ace.jar --directory /opt/ibm && \\\n    mv /opt/ibm/${PRODUCT_LABEL} /opt/ibm/ace-12 && \\\n    /opt/ibm/ace-12/ace make registry global accept license deferred && rm -rf /var/lib/apt/lists/*;\n\n# Create a user to run as, create the ace workdir, and chmod script files\nRUN useradd --uid 1001 --create-home --home-dir /home/aceuser --shell /bin/bash -G mqbrkrs,sudo aceuser \\\n  && su - aceuser -c \"export LICENSE=accept && . /opt/ibm/ace-12/server/bin/mqsiprofile && mqsicreateworkdir /home/aceuser/ace-server\" \\\n  && echo \". /opt/ibm/ace-12/server/bin/mqsiprofile\" >> /home/aceuser/.bashrc\n\n# aceuser\nUSER 1001\n\n# Set entrypoint to run the server\nENTRYPOINT [\"bash\", \"-c\", \". /opt/ibm/ace-12/server/bin/mqsiprofile && IntegrationServer -w /home/aceuser/ace-server\"]\n"
}