{
  "startTime": 1674255195314,
  "endTime": 1674255196129,
  "originalSmells": [
    {
      "rule": "yumInstallRmVarCacheYum",
      "position": {
        "lineStart": 71,
        "lineEnd": 71,
        "columnStart": 4,
        "columnEnd": 78
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "# LICENSE CDDL 1.0 + GPL 2.0\n#\n# Copyright (c) 1982-2016 Oracle and/or its affiliates. All rights reserved.\n# Adapted by Gianni Ceresa, DATAlysis GmbH\n#\n# ORACLE DOCKERFILES PROJECT\n# --------------------------\n# This is the Dockerfile for Oracle Database 12c Release 1 Enterprise Edition\n#\n# REQUIRED FILES TO BUILD THIS IMAGE\n# ----------------------------------\n# (1) linuxamd64_12102_database_1of2.zip\n#     linuxamd64_12102_database_2of2.zip\n#     Download Oracle Database 12c Release 1 Enterprise Edition for Linux x64\n#     from http://www.oracle.com/technetwork/database/enterprise-edition/downloads/index.html\n#\n# HOW TO BUILD THIS IMAGE\n# -----------------------\n# Put all downloaded files in the same directory as this Dockerfile\n# Run:\n#      $ docker build --build-arg ORACLE_PWD=<Your DB password> -t oracle/database:12.1.0.2-ee .\n#\n# Pull base image\n# ---------------\nFROM oraclelinux:latest\n\n# Maintainer\n# ----------\nMAINTAINER Gerald Venzl <gerald.venzl@oracle.com>\n\n# Environment variables required for this build (do NOT change)\n# -------------------------------------------------------------\nENV ORACLE_BASE=/opt/oracle \\\n    ORACLE_HOME=/opt/oracle/product/12.1.0.2/dbhome_1 \\\n    INSTALL_FILE_1=\"linuxamd64_12102_database_1of2.zip\" \\\n    INSTALL_FILE_2=\"linuxamd64_12102_database_2of2.zip\" \\\n    INSTALL_RSP=\"db_inst.rsp\" \\\n    CONFIG_RSP=\"dbca.rsp.tmpl\" \\\n    PWD_FILE=\"setPassword.sh\" \\\n    PERL_INSTALL_FILE=\"installPerl.sh\" \\\n    RUN_FILE=\"runOracle.sh\" \\\n    CHKSUM_TEST=\"checksumPackages.sh\" \\\n    CHKSUM_MD5=\"Checksum.md5\"\n\n# Use second ENV so that variable get substituted\nENV INSTALL_DIR=$ORACLE_BASE/install \\\n    PATH=$ORACLE_HOME/bin:$ORACLE_HOME/OPatch/:/usr/sbin:$PATH \\\n    LD_LIBRARY_PATH=$ORACLE_HOME/lib:/usr/lib \\\n    CLASSPATH=$ORACLE_HOME/jlib:$ORACLE_HOME/rdbms/jlib\n\n# Copy binaries\n# -------------\nCOPY $INSTALL_FILE_1 $INSTALL_FILE_2 $INSTALL_RSP $PERL_INSTALL_FILE $CHKSUM_TEST $CHKSUM_MD5 $INSTALL_DIR/\nCOPY $RUN_FILE $CONFIG_RSP $PWD_FILE $ORACLE_BASE/\n\n# Check MD5 checksum of binaries and abort if mismatch\n#------------------------------------------------------\nRUN cd $INSTALL_DIR         && \\\n    chmod ug+x $CHKSUM_TEST && \\\n    ./$CHKSUM_TEST\n\n# Setup filesystem and oracle user\n# Adjust file permissions, go to /opt/oracle as user 'oracle' to proceed with Oracle installation\n# ------------------------------------------------------------\nRUN mkdir -p $ORACLE_BASE/oradata && \\\n    chmod ug+x $ORACLE_BASE/$PWD_FILE && \\\n    chmod ug+x $ORACLE_BASE/$RUN_FILE && \\\n    groupadd -g 500 dba && \\\n    groupadd -g 501 oinstall && \\\n    useradd -d /home/oracle -g dba -G oinstall,dba -m -s /bin/bash oracle && \\\n    echo oracle:oracle | chpasswd && \\\n    yum -y install oracle-rdbms-server-12cR1-preinstall unzip wget tar openssl && \\\n    yum clean all && \\\n    chown -R oracle:dba $ORACLE_BASE && rm -rf /var/cache/yum\n\n# Replace place holders\n# ---------------------\nRUN sed -i -e \"s|###ORACLE_EDITION###|EE|g\" $INSTALL_DIR/$INSTALL_RSP &&        \\\n    sed -i -e \"s|###ORACLE_BASE###|$ORACLE_BASE|g\" $INSTALL_DIR/$INSTALL_RSP && \\\n    sed -i -e \"s|###ORACLE_HOME###|$ORACLE_HOME|g\" $INSTALL_DIR/$INSTALL_RSP\n\n# Start installation\n# -------------------\nUSER oracle\n\nRUN cd $INSTALL_DIR       && \\\n    unzip $INSTALL_FILE_1 && \\\n    rm $INSTALL_FILE_1    && \\\n    unzip $INSTALL_FILE_2 && \\\n    rm $INSTALL_FILE_2    && \\\n    $INSTALL_DIR/database/runInstaller -silent -force -waitforcompletion -responsefile $INSTALL_DIR/$INSTALL_RSP -ignoresysprereqs -ignoreprereq && \\\n    rm -rf $INSTALL_DIR/database && \\\n    ln -s $ORACLE_BASE/$PWD_FILE $HOME/ && \\\n    echo \"DEDICATED_THROUGH_BROKER_LISTENER=ON\"  >> $ORACLE_HOME/network/admin/listener.ora && \\\n    echo \"DIAG_ADR_ENABLED = off\"  >> $ORACLE_HOME/network/admin/listener.ora;\n\n# Check whether Perl is working\nRUN chmod u+x $INSTALL_DIR/installPerl.sh && \\\n    $ORACLE_HOME/perl/bin/perl -v || \\ \n    $INSTALL_DIR/installPerl.sh\n\nUSER root\nRUN $ORACLE_BASE/oraInventory/orainstRoot.sh && \\\n    $ORACLE_HOME/root.sh && \\\n    rm -rf $INSTALL_DIR\n\nUSER oracle\nWORKDIR /home/oracle\n\nEXPOSE 1521 5500\n\n# Define default command to start Oracle Database.\nCMD $ORACLE_BASE/$RUN_FILE\n"
}