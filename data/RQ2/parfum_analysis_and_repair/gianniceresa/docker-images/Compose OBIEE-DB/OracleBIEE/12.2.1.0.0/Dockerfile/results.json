{
  "startTime": 1674252378724,
  "endTime": 1674252379970,
  "originalSmells": [
    {
      "rule": "yumInstallRmVarCacheYum",
      "position": {
        "lineStart": 72,
        "lineEnd": 72,
        "columnStart": 4,
        "columnEnd": 78
      }
    },
    {
      "rule": "yumInstallRmVarCacheYum",
      "position": {
        "lineStart": 74,
        "lineEnd": 74,
        "columnStart": 4,
        "columnEnd": 49
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "# LICENSE CDDL 1.0 + GPL 2.0\n#\n# Copyright (c) 2016 DATAlysis GmbH. All rights reserved.\n#\n# OBIEE DOCKERFILES PROJECT\n# --------------------------\n# This is the Dockerfile for Oracle Business Intelligence 12.2.1.1.0 SampleAppLite\n#\n# REQUIRED FILES TO BUILD THIS IMAGE\n# ----------------------------------\n# (1) fmw_12.2.1.0.0_infrastructure_Disk1_1of1.zip\n#     fmw_12.2.1.0.0_bi_linux64_Disk1_1of2.zip\n#     fmw_12.2.1.0.0_bi_linux64_Disk1_2of2.zip\n#     Download Oracle Business Intelligence 12.2.1.1.0 for Linux x64\n#     from http://www.oracle.com/technetwork/middleware/bi-enterprise-edition/downloads/business-intelligence-2717951.html\n# (2) jdk-8u51-linux-x64.rpm\n#     Download Oracle JDK 1.8.51+\n#     from http://www.oracle.com/technetwork/java/javase/downloads/java-archive-javase8-2177648.html\n#\n# HOW TO BUILD THIS IMAGE\n# -----------------------\n# To be used by Docker Compose (linked with database container)\n#\n# Pull base image\n# ---------------\nFROM oraclelinux:latest\n\n# Maintainer\n# ----------\nMAINTAINER Gianni Ceresa <gianni.ceresa@datalysis.ch>\n\n# Environment variables required for this build (change defaults if needed)\n#--------------------------------------------------------------------------\nENV INSTALL_FILE_JDK=\"jdk-8u51-linux-x64.rpm\"                        \\\n    INSTALL_FILE_WLS=\"fmw_12.2.1.0.0_infrastructure_Disk1_1of1.zip\"  \\\n    INSTALL_FILE_BI_1=\"fmw_12.2.1.0.0_bi_linux64_Disk1_1of2.zip\"     \\\n    INSTALL_FILE_BI_2=\"fmw_12.2.1.0.0_bi_linux64_Disk1_2of2.zip\"     \\\n    INSTALL_FILE_RSP_WLS=\"weblogic.rsp\"                              \\\n    INSTALL_FILE_RSP_BI=\"obiee.rsp\"                                  \\\n    INSTALL_FILE_RSP_CONFIG=\"bi_config.rsp\"                          \\\n    CHKSUM_TEST=\"checksumPackages.sh\"                                \\\n    CHKSUM_MD5=\"Checksum.md5\"                                        \\\n    WAIT_DB_CLASS=\"OracleJDBC.class\"                                 \\\n    WAIT_DB_SCRIPT=\"wait-for-database.sh\"                            \\\n    RUN_FILE=\"runOBIEE.sh\"                                           \\\n    ORACLE_BASE=/opt/oracle                                          \\\n    ORACLE_HOME=/opt/oracle/biee\n\n# Use second ENV so that variable get substituted\nENV INSTALL_DIR=$ORACLE_BASE/install\n\n# Copy binaries\n# -------------\nCOPY $INSTALL_FILE_JDK $INSTALL_FILE_WLS $INSTALL_FILE_BI_1 $INSTALL_FILE_BI_2 $CHKSUM_TEST $CHKSUM_MD5 $INSTALL_DIR/\nCOPY $INSTALL_FILE_RSP_WLS $INSTALL_FILE_RSP_BI $INSTALL_FILE_RSP_CONFIG $RUN_FILE $WAIT_DB_CLASS $WAIT_DB_SCRIPT $ORACLE_BASE/\n\n# Check MD5 checksum of binaries and abort if mismatch\n#------------------------------------------------------\nRUN cd $INSTALL_DIR          && \\\n    chmod ug+x $CHKSUM_TEST  && \\\n    ./$CHKSUM_TEST\n\n# Setup filesystem and oracle user\n# Adjust file permissions, go to /opt/oracle as user 'oracle' to proceed with Oracle Business Intelligence installation\n# Install pre-req packages + Oracle JDK + get rid of previous JDK if any\n# Make sure run files are executables\n# -----------------------------------------------------------------------\nRUN chmod ug+x $INSTALL_DIR/$INSTALL_FILE_JDK                                   && \\\n    groupadd -g 500 dba                                                         && \\\n    groupadd -g 501 oinstall                                                    && \\\n    useradd -d /home/oracle -g dba -G oinstall,dba -m -s /bin/bash oracle       && \\\n    echo oracle:oracle | chpasswd                                               && \\\n    yum -y install oracle-rdbms-server-12cR1-preinstall unzip wget tar openssl  && \\\n    yum -y remove java-openjdk java-openjdk-headless                            && \\\n    yum -y install $INSTALL_DIR/$INSTALL_FILE_JDK                               && \\\n    yum clean all                                                               && \\\n    rm $INSTALL_DIR/$INSTALL_FILE_JDK                                           && \\\n    touch $ORACLE_BASE/oraInst.loc                                              && \\\n    echo inventory_loc=$ORACLE_BASE/oraInventory >  $ORACLE_BASE/oraInst.loc    && \\\n    echo inst_group= >> $ORACLE_BASE/oraInst.loc                                && \\\n    chown -R oracle:dba $ORACLE_BASE                                            && \\\n    chmod ug+x $ORACLE_BASE/$RUN_FILE && \\\n    chmod ug+x $ORACLE_BASE/$WAIT_DB_SCRIPT && rm -rf /var/cache/yum\n\n\n# Replace place holders\n# ---------------------\nRUN sed -i -e \"s|###ORACLE_HOME###|$ORACLE_HOME|g\" $ORACLE_BASE/$INSTALL_FILE_RSP_WLS    && \\\n    sed -i -e \"s|###ORACLE_HOME###|$ORACLE_HOME|g\" $ORACLE_BASE/$INSTALL_FILE_RSP_BI     && \\\n    sed -i -e \"s|###ORACLE_HOME###|$ORACLE_HOME|g\" $ORACLE_BASE/$INSTALL_FILE_RSP_CONFIG && \\\n    sed -i -e \"s|###ORACLE_HOME###|$ORACLE_HOME|g\" $ORACLE_BASE/$RUN_FILE                && \\\n    sed -i -e \"s|###ORACLE_BASE###|$ORACLE_BASE|g\" $ORACLE_BASE/$RUN_FILE\n\n# Start installation\n# -------------------\nUSER oracle\n\nRUN cd $INSTALL_DIR                       && \\\n    unzip $INSTALL_FILE_WLS -d ./tmp_wls  && \\\n    rm $INSTALL_FILE_WLS                  && \\\n    java -jar $INSTALL_DIR/tmp_wls/fmw_12.2.1.0.0_infrastructure.jar -silent -responseFile $ORACLE_BASE/$INSTALL_FILE_RSP_WLS -invPtrLoc $ORACLE_BASE/oraInst.loc && \\\n    rm -rf $INSTALL_DIR/tmp_wls           && \\\n    unzip $INSTALL_FILE_BI_1 -d ./tmp_bi  && \\\n    rm $INSTALL_FILE_BI_1                 && \\\n    unzip $INSTALL_FILE_BI_2 -d ./tmp_bi  && \\\n    rm $INSTALL_FILE_BI_2                 && \\\n    ./tmp_bi/bi_platform-12.2.1.0.0_linux64.bin  -silent -responseFile $ORACLE_BASE/$INSTALL_FILE_RSP_BI -invPtrLoc $ORACLE_BASE/oraInst.loc && \\\n    rm -rf $INSTALL_DIR/tmp_bi           && \\\n    rm -rf $INSTALL_DIR\n\n# Expose ports\n#--------------\n\nWORKDIR $ORACLE_HOME\n\nEXPOSE 9500-9514 9799\n\n# Define default command to start Oracle Business intelligence.\nCMD $ORACLE_BASE/$RUN_FILE\n"
}