{
  "startTime": 1674218503241,
  "endTime": 1674218504277,
  "originalSmells": [
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 39,
        "lineEnd": 39,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 40,
        "lineEnd": 40,
        "columnStart": 4,
        "columnEnd": 41
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 41,
        "lineEnd": 41,
        "columnStart": 4,
        "columnEnd": 22
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM centos:8\nEXPOSE 5000\n\nRUN dnf install -y epel-release dnf-plugins-core\nRUN dnf config-manager --set-enabled PowerTools epel\nRUN dnf -y copr enable rhughes/lvfs-website\nRUN dnf -y install \\\n\tbsdtar \\\n\tcairo-gobject-devel \\\n\tclamav \\\n\tclamav-update \\\n\tclamd \\\n\tfdupes \\\n\tgit \\\n\tgnutls-utils \\\n\tgobject-introspection-devel \\\n\tlibgcab1 \\\n\tlogrotate \\\n\tpython3-devel \\\n\tpython3-pip \\\n\tpython3-psutil \\\n\tUEFITool \\\n\ts3cmd \\\n\tsudo\n\n# create all our dirs\nRUN bash -c 'mkdir -p /app/{scripts,conf,logs/uwsgi}'\nRUN mkdir /data /backups\nRUN usermod -a -G virusgroup nobody\nRUN chmod g+rx /var/run/clamd.scan\nWORKDIR /app\n\n# create and activate a venv\nENV VIRTUAL_ENV=/app/venv\nRUN python3 -m venv $VIRTUAL_ENV\nENV PATH=\"$VIRTUAL_ENV/bin:$PATH\"\n\n# install all the things\nCOPY requirements.txt /app/conf\nRUN pip3 install --no-cache-dir --upgrade pip\nRUN pip3 install --no-cache-dir -r conf/requirements.txt\nRUN pip3 install --no-cache-dir uwsgi\n\n# copy the app; various configs and scripts\nCOPY lvfs/ /app/lvfs/\nCOPY cabarchive/ /app/cabarchive/\nCOPY pkgversion/ /app/pkgversion/\nCOPY jcat/ /app/jcat/\nCOPY infparser/ /app/infparser/\nCOPY plugins/ /app/plugins/\nCOPY migrations/ /app/migrations/\nCOPY docker/files/application/uwsgi.ini /app/conf/uwsgi.ini\nCOPY docker/files/application/flaskapp.cfg /app/lvfs/flaskapp.cfg\nCOPY docker/files/application/scan.conf /etc/clamd.d/scan.conf\nCOPY docker/files/lvfs-entrypoint.sh /app/lvfs-entrypoint.sh\n\nRUN chown -R 65534:65534 /app /data /backups\n\nENTRYPOINT [ \"./lvfs-entrypoint.sh\" ]\n"
}