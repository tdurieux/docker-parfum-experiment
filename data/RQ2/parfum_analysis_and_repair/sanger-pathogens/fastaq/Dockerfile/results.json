{
  "startTime": 1674251914655,
  "endTime": 1674251916280,
  "originalSmells": [
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 11,
        "lineEnd": 11,
        "columnStart": 6,
        "columnEnd": 37
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 13,
        "lineEnd": 13,
        "columnStart": 6,
        "columnEnd": 52
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 15,
        "lineEnd": 15,
        "columnStart": 6,
        "columnEnd": 32
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 25,
        "lineEnd": 25,
        "columnStart": 6,
        "columnEnd": 52
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 15,
        "lineEnd": 15,
        "columnStart": 6,
        "columnEnd": 32
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 25,
        "lineEnd": 25,
        "columnStart": 6,
        "columnEnd": 52
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 11,
        "lineEnd": 11,
        "columnStart": 6,
        "columnEnd": 37
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 13,
        "lineEnd": 13,
        "columnStart": 6,
        "columnEnd": 52
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 15,
        "lineEnd": 15,
        "columnStart": 6,
        "columnEnd": 32
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 25,
        "lineEnd": 25,
        "columnStart": 6,
        "columnEnd": 52
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 15,
        "lineEnd": 15,
        "columnStart": 4,
        "columnEnd": 54
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 25,
        "lineEnd": 25,
        "columnStart": 4,
        "columnEnd": 74
      }
    }
  ],
  "repairedDockerfile": "FROM ubuntu:18.04\n\nARG   DEBIAN_FRONTEND=noninteractive\nARG   BUILD_DIR=/opt/fastaq\n\nARG   SAMTOOLS_VERSION=0.1.19\nENV   SAMTOOLS_URL=https://github.com/samtools/samtools/archive/${SAMTOOLS_VERSION}.tar.gz\nENV   SAMTOOLS_DIR=/usr/local/samtools-${SAMTOOLS_VERSION}\n\n# Install the dependancies\nRUN apt-get update && \\\n      apt-get install --no-install-recommends --yes apt-utils && \\\n      apt-get --yes upgrade && \\\n      apt-get install --no-install-recommends --yes curl python3 python3-pip && rm -rf /var/lib/apt/lists/*;\n\nRUN apt-get install --no-install-recommends -y locales && \\\n      sed -i -e 's/# \\(en_GB\\.UTF-8 .*\\)/\\1/' /etc/locale.gen && \\\n      touch /usr/share/locale/locale.alias && \\\n      locale-gen && rm -rf /var/lib/apt/lists/*;\nENV   LANG     en_GB.UTF-8\nENV   LANGUAGE en_GB:en\nENV   LC_ALL   en_GB.UTF-8\n\n# samtools build\n# nore specific version requirement\nRUN apt-get install --no-install-recommends --yes libncurses5-dev libz-dev && rm -rf /var/lib/apt/lists/*;\nRUN   mkdir -p ${SAMTOOLS_DIR} && \\\n      cd ${SAMTOOLS_DIR} && \\\n      curl -fsSL ${SAMTOOLS_URL} | tar xzf - --strip-components=1 && \\\n      echo -n \"Building samtools... \" && \\\n      make > make.log 2>&1; \\\n      EXIT=$?; \\\n      if [ $? -ne ${EXIT} ]; then echo \"FAILED:\" && cat make.log && exit ${EXIT}; else echo \"OK.\"; fi\nENV   PATH ${SAMTOOLS_DIR}:${SAMTOOLS_DIR}/misc:${PATH}\n\n# check samtools is an executable in the path\nRUN   samtools 2> /tmp/samtools.out; \\\n      EXIT=$?; \\\n      if [ 1 -ne ${EXIT} ]; then \\\n         cat /tmp/samtools.out && exit ${EXIT}; \\\n      fi;\n\n# Fastaq build\nCOPY  . ${BUILD_DIR}\nRUN   cd ${BUILD_DIR} && \\\n      python3 setup.py test && \\\n      python3 setup.py install && \\\n      echo 'Installed '`which fastaq`\n\n# check fastaq is an executable in the path\nRUN   fastaq 2> /tmp/fastaq.out; \\\n      EXIT=$?; \\\n      if [ 1 -ne ${EXIT} ]; then \\\n         cat /tmp/fastaq.out && exit ${EXIT}; \\\n      fi;\n\nCMD   echo \"Usage:  docker run -v \\`pwd\\`:/var/data -it <IMAGE_NAME> bash\" && \\\n      echo \"\" && \\\n      echo \"This will place you in a shell with your current working directory accessible as /var/data.\" && \\\n      echo \"You can then run commands like:\" && \\\n      echo \"   fastaq reverse_complement /var/data/in.fastq /var/data/out.fastq\" && \\\n      echo \"\" && \\\n      fastaq | tail +3\n"
}