{
  "startTime": 1674248567563,
  "endTime": 1674248568320,
  "originalSmells": [
    {
      "rule": "configureShouldUseBuildFlag",
      "position": {
        "lineStart": 15,
        "lineEnd": 15,
        "columnStart": 4,
        "columnEnd": 15
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 11,
        "lineEnd": 11,
        "columnStart": 4,
        "columnEnd": 39
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "#--- Alpine build container ---\nFROM alpine:latest AS builder\nARG FORT_VERSION=1.5.3\n\n# Install compiler and dependencies\nRUN apk --update --no-cache add build-base autoconf automake pkgconfig jansson-dev check-dev \\\n    openssl-dev openssl libexecinfo-dev bsd-compat-headers rsync wget curl-dev libxml2 libxml2-dev\n\n# Download FORT source code\nWORKDIR /root\nRUN wget https://github.com/NICMx/FORT-validator/releases/download/${FORT_VERSION}/fort-${FORT_VERSION}.tar.gz\nRUN tar -xf fort-${FORT_VERSION}.tar.gz && rm fort-${FORT_VERSION}.tar.gz\n\n# Compile and install FORT\nWORKDIR /root/fort-${FORT_VERSION}\nRUN ./configure --build=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\" && make && make install\n\n\n#--- FORT image ---\nFROM alpine:latest\n\n# Install dependencies\nRUN apk --update --no-cache add openssl jansson rsync libexecinfo tini libxml2 libcurl\n\n# Install FORT binaries\nCOPY --from=builder /usr/local/bin/fort /usr/local/bin/fort\nCOPY --from=builder /usr/local/share/man/man8/fort.8 /usr/local/share/man/man8/fort.8\n\n# Create required directories\nRUN mkdir -p /var/local/fort && mkdir -p /etc/fort\n\n# Create a default configuration file\nRUN echo '{\"tal\":\"/etc/fort/tal\",\"local-repository\":\"/var/local/fort\"}' > /etc/fort/fort.conf\n\n\n# Run FORT via TINI\nEXPOSE 323\nENTRYPOINT [\"tini\", \"-g\", \"--\", \"fort\"]\nCMD [\"--configuration-file\", \"/etc/fort/fort.conf\"]\n"
}