{
  "startTime": 1674252912576,
  "endTime": 1674252913275,
  "originalSmells": [
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 60,
        "lineEnd": 60,
        "columnStart": 4,
        "columnEnd": 26
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM python:3 AS intermediate\n\n#\n# First install software packages needed to compile RTL-SDR and rtl_433\n#\nRUN apt-get update && apt-get install --no-install-recommends -y \\\n  git \\\n  libtool \\\n  libusb-1.0.0-dev \\\n  librtlsdr-dev \\\n  rtl-sdr \\\n  build-essential \\\n  autoconf \\\n  cmake \\\n  pkg-config \\\n  && rm -rf /var/lib/apt/lists/*\n\n#\n# Pull RTL_433 source code from GIT, compile it and install it\n#\nWORKDIR /rtl_433\nRUN git clone https://github.com/merbanan/rtl_433.git . \\\n  && mkdir build \\\n  && cd build \\\n  && cmake ../ \\\n  && make \\\n  && make install\n\n\n\n# Final image build\nFROM python:3 AS final\n\n#\n# Define environment variables\n#\n# Use this variable when creating a container to specify the MQTT broker host.\nENV MQTT_HOST \"\"\nENV MQTT_PORT 1883\nENV MQTT_USERNAME \"\"\nENV MQTT_PASSWORD \"\"\nENV MQTT_TOPIC rtl_433\nENV DISCOVERY_PREFIX homeassistant\nENV DISCOVERY_INTERVAL 600\n\nRUN apt-get update && apt-get install --no-install-recommends -y \\\n  libtool \\\n  libusb-1.0.0-dev \\\n  librtlsdr-dev \\\n  rtl-sdr \\\n  && rm -rf /var/lib/apt/lists/*\n\nCOPY --from=intermediate /usr/local/include/rtl_433.h /usr/local/include/rtl_433.h\nCOPY --from=intermediate /usr/local/include/rtl_433_devices.h /usr/local/include/rtl_433_devices.h\nCOPY --from=intermediate /usr/local/bin/rtl_433 /usr/local/bin/rtl_433\nCOPY --from=intermediate /usr/local/etc/rtl_433 /usr/local/etc/rtl_433\n\n#\n# Install Paho-MQTT client\n#\nRUN pip3 install --no-cache-dir paho-mqtt\n\n#\n# Blacklist kernel modules for RTL devices\n#\nCOPY rtl.blacklist.conf /etc/modprobe.d/rtl.blacklist.conf\n\n#\n# Copy scripts, make executable\n#\nCOPY entry.sh rtl_433_mqtt_hass.py /scripts/\nRUN chmod +x /scripts/entry.sh\n\n#\n# Execute entry script\n#\nENTRYPOINT [ \"/scripts/entry.sh\" ]"
}