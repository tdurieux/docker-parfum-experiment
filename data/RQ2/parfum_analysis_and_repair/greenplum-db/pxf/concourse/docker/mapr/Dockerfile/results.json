{
  "startTime": 1674248946426,
  "endTime": 1674248947439,
  "originalSmells": [
    {
      "rule": "yumInstallRmVarCacheYum",
      "position": {
        "lineStart": 14,
        "lineEnd": 14,
        "columnStart": 4,
        "columnEnd": 108
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "ARG BASE_IMAGE\n\nFROM ${BASE_IMAGE} as scratch\n\nRUN rpm --import http://package.mapr.com/releases/pub/maprgpg.key && \\\n  groupadd -g 5000 mapr ; useradd -g 5000 -u 5000 mapr && echo -e \"mapr\\nmapr\" | passwd mapr && \\\n  echo -e \"[maprtech]\\nname=MapR Technologies\" >> /etc/yum.repos.d/maprtech.repo && \\\n  echo -e \"baseurl=http://package.mapr.com/releases/v5.2.2/redhat/\" >> /etc/yum.repos.d/maprtech.repo && \\\n  echo -e \"enabled=1\\ngpgcheck=0\\nprotect=1\\n\" >> /etc/yum.repos.d/maprtech.repo && \\\n  echo -e \"[maprecosystem]\\nname=MapR Technologies\" >> /etc/yum.repos.d/maprtech.repo && \\\n  echo -e \"baseurl=http://package.mapr.com/releases/MEP/MEP-4.1.0/redhat/\" >> /etc/yum.repos.d/maprtech.repo && \\\n  echo -e \"enabled=1\\ngpgcheck=0\\nprotect=1\\n\" >> /etc/yum.repos.d/maprtech.repo && \\\n  cat /etc/yum.repos.d/maprtech.repo && echo JAVA_HOME=$JAVA_HOME\n\nRUN yum install -y lsof mapr-nfs mapr-cldb mapr-core mapr-fileserver mapr-zookeeper mapr-webserver mapr-hive && rm -rf /var/cache/yum\n\nRUN echo \"mapr soft core unlimited\" >> /etc/security/limits.d/mapr-limits.conf && \\\n  echo \"mapr soft nproc 131072\" >> /etc/security/limits.d/mapr-limits.conf && \\\n  echo \"mapr soft memlock unlimited\" >> /etc/security/limits.d/mapr-limits.conf && \\\n  echo \"mapr soft nofile 65536\" >> /etc/security/limits.d/mapr-limits.conf && \\\n  echo \"mapr soft nice -10\" >> /etc/security/limits.d/mapr-limits.conf && \\\n  echo \"sed -i 's@#export JAVA_HOME=@export JAVA_HOME=/etc/alternatives/java_sdk@g' /opt/mapr/conf/env.sh\" > /root/init-script && \\\n  echo \"sed -i 's/AddUdevRules(list/#AddUdevRules(list/' /opt/mapr/server/disksetup\" >> /root/init-script && \\\n  echo \"sed -i -e 's/SetAioMaxNr/#SetAioMaxNr/' -e '254,254 {s/^/#/}' /opt/mapr/initscripts/mapr-warden\" >> /root/init-script && \\\n  echo \"sed -i -e '555,568 {s/^/#/}' -e '577,577 {s/^/#/}' /opt/mapr/server/configure-common.sh\" >> /root/init-script && \\\n  echo \"sed -i 's@/proc/meminfo@/opt/mapr/conf/meminfofake@' /opt/mapr/server/initscripts-common.sh\" >> /root/init-script && \\\n  echo \"cp /proc/meminfo /opt/mapr/conf/meminfofake\" >> /root/init-script && \\\n  echo 'sed -i \"/^MemTotal/ s/^.*$/MemTotal:     6291456 kB/\" /opt/mapr/conf/meminfofake' >> /root/init-script && \\\n  echo 'sed -i \"/^MemFree/ s/^.*$/MemFree:     6291456 kB/\" /opt/mapr/conf/meminfofake' >> /root/init-script && \\\n  echo 'sed -i \"/^MemAvailable/ s/^.*$/MemAvailable:     6291456 kB/\" /opt/mapr/conf/meminfofake' >> /root/init-script && \\\n  echo 'echo `hostname` > /opt/mapr/hostname' >> /root/init-script && \\\n  echo '/opt/mapr/server/configure.sh -C `hostname` -Z `hostname` -N maprdemo.cluster' >> /root/init-script && \\\n  echo \"mkdir -p /opt/mapr/disks && fallocate -l 10G /opt/mapr/disks/docker.disk\" >> /root/init-script && \\\n  echo \"/opt/mapr/disks/docker.disk\" > /tmp/disks && cat /tmp/disks && \\\n  echo \"/opt/mapr/server/disksetup -F /tmp/disks\" >> /root/init-script && \\\n  echo '/opt/mapr/server/configure.sh -C `hostname -i` -Z `hostname -i` -N maprdemo.cluster' >> /root/init-script && \\\n  echo \"sed -i '/^mapr - /d' /etc/security/limits.conf\" >> /root/init-script && \\\n  echo \"sleep 60\" >> /root/init-script && \\\n  echo \"export HADOOP_HOME=/opt/mapr/hadoop/hadoop-2.7.0\" >> /root/.bashrc && \\\n  chmod +x /root/init-script\n"
}