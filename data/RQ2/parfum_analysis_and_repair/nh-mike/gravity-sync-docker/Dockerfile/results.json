{
  "startTime": 1674249906231,
  "endTime": 1674249906911,
  "originalSmells": [
    {
      "rule": "apkAddUseNoCache",
      "position": {
        "lineStart": 39,
        "lineEnd": 39,
        "columnStart": 16,
        "columnEnd": 60
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM            alpine:3 as baseenvironment\n\nLABEL           maintainer Michael Thompson <25192401+nh-mike@users.noreply.github.com>\n\nENV             GS_INSTALL=\"secondary\" \\\n                GS_VERSION=\"3.6.2\" \\\n                GENERATE_SSH_CERTS=\"true\" \\\n                TINI_VERSION=\"0.19.0\" \\\n                DEBUG=\"false\" \\\n                SYNC_FREQUENCY=\"30\" \\\n                REMOTE_HOST=\"127.0.0.1\" \\\n                SSH_PORT=\"22\" \\\n                REMOTE_USER=\"root\" \\\n                LOCAL_HOST_TYPE=\"docker\" \\\n                REMOTE_HOST_TYPE=\"docker\" \\\n                LOCAL_PIHOLE_DIR=\"/etc/pihole/\" \\\n                REMOTE_PIHOLE_DIR=\"/etc/pihole/\" \\\n                LOCAL_PIHOLE_BIN=\"\" \\\n                REMOTE_PIHOLE_BIN=\"\" \\\n                LOCAL_PH_INSTALL_TYPE=\"default\" \\\n                LOCAL_RH_INSTALL_TYPE=\"default\" \\\n                LOCAL_DOCKER_BIN=\"\" \\\n                REMOTE_DOCKER_BIN=\"\" \\\n                LOCAL_FILE_OWNER=\"root:root\" \\\n                REMOTE_FILE_OWNER=\"root:root\" \\\n                LOCAL_DOCKER_CON=\"\" \\\n                REMOTE_DOCKER_CON=\"\" \\\n                GRAVITY_FI=\"\" \\\n                CUSTOM_DNS=\"\" \\\n                VERIFY_PASS=\"\" \\\n                SKIP_CUSTOM=\"\" \\\n                DATE_OUTPUT=\"\" \\\n                PING_AVOID=\"\" \\\n                ROOT_CHECK_AVOID=\"\" \\\n                SSH_PKIF=\".ssh/id_rsa\"\n\nCOPY            ./container_scripts/install_tini.sh /usr/local/bin/install_tini.sh\n\nRUN chmod +x /usr/local/bin/install_tini.sh && \\\n                apk --update --no-cache add openssh sudo bash coreutils && \\\n                /usr/local/bin/install_tini.sh\n\nFROM            baseenvironment as buildenvironment\n\n                # apk --update add less rsync sqlite\nRUN             apk --update add curl && \\\n                rm -rf /var/lib/apt/lists/* && \\\n                rm /var/cache/apk/* && \\\n                cd /tmp/ && \\\n                wget https://github.com/vmstan/gravity-sync/archive/v$GS_VERSION.zip && \\\n                mkdir /tmp/gravity-sync/ && \\\n                unzip v$GS_VERSION.zip -d /tmp/gravity-sync/ && \\\n                mv /tmp/gravity-sync/gravity-sync-$GS_VERSION /root/gravity-sync\n\n\nFROM            baseenvironment as prodbuildenvironment\n\n#COPY            configure.sh /usr/local/bin/configure.sh\n#COPY            missionreport.sh /usr/local/bin/missionreport.sh\n#COPY            prelaunch.sh /usr/local/bin/prelaunch.sh\n#COPY            startup.sh /usr/local/bin/startup.sh\n#COPY            upgradeCompatibilityChecks.sh /usr/local/bin/upgradeCompatibilityChecks.sh\nCOPY            container_scripts/* /usr/local/bin/\nCOPY            --from=buildenvironment /root/gravity-sync/ /root/gravity-sync/\n\nWORKDIR         /root/gravity-sync/\n\nRUN             apk --update add rsync sqlite docker-cli util-linux && \\\n                rm -rf /var/lib/apt/lists/* && \\\n                rm /var/cache/apk/* && \\\n                echo 'echo \"Git is not required\"' > /usr/local/bin/git && \\\n                chmod +x /usr/local/bin/git && \\\n                chmod +x /usr/local/bin/configure.sh && \\\n                chmod +x /usr/local/bin/missionreport.sh && \\\n                chmod +x /usr/local/bin/prelaunch.sh && \\\n                chmod +x /usr/local/bin/startup.sh && \\\n                chmod +x /usr/local/bin/upgradeCompatibilityChecks.sh\n\nHEALTHCHECK     --interval=5m --timeout=60s --start-period=10s \\\n                CMD /usr/local/bin/missionreport.sh\n\nENTRYPOINT      [\"/tini\", \"--\"]\nCMD             [\"/usr/local/bin/startup.sh\"]\n"
}