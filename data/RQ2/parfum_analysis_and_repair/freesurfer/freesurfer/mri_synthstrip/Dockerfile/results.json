{
  "startTime": 1674254062139,
  "endTime": 1674254063001,
  "originalSmells": [
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 14,
        "lineEnd": 14,
        "columnStart": 4,
        "columnEnd": 36
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 15,
        "lineEnd": 15,
        "columnStart": 4,
        "columnEnd": 35
      }
    },
    {
      "rule": "yumInstallRmVarCacheYum",
      "position": {
        "lineStart": 10,
        "lineEnd": 10,
        "columnStart": 4,
        "columnEnd": 34
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM centos:7\n\n# copy local data\nCOPY . /external\n\n# shell settings\nWORKDIR /freesurfer\n\n# install utils\nRUN yum -y update\nRUN yum -y install libgomp python3 && rm -rf /var/cache/yum\nRUN yum clean all\n\n# python packages\nRUN pip3 install --no-cache-dir scipy torch==1.10.2\nRUN pip3 install --no-cache-dir /external/fsmodule\n\n# install synthstrip\nRUN cp /external/mri_synthstrip /freesurfer/\n\n# configure model\nENV FREESURFER_HOME /freesurfer\nRUN mkdir -p /freesurfer/models\nRUN cp /external/synthstrip.1.pt /freesurfer/models/\n\n# setup rest of the env\nENV OS Linux\nENV FSF_OUTPUT_FORMAT nii.gz\n\n# clean up\nRUN rm -rf /external /root/.cache/pip\n\nENTRYPOINT [\"python3\", \"/freesurfer/mri_synthstrip\"]\n"
}