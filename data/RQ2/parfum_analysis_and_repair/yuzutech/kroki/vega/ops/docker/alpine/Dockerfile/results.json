{
  "startTime": 1674253594647,
  "endTime": 1674253595729,
  "originalSmells": [
    {
      "rule": "npmCacheCleanAfterInstall",
      "position": {
        "lineStart": 17,
        "lineEnd": 17,
        "columnStart": 4,
        "columnEnd": 44
      }
    },
    {
      "rule": "npmCacheCleanAfterInstall",
      "position": {
        "lineStart": 29,
        "lineEnd": 29,
        "columnStart": 4,
        "columnEnd": 9
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM node:16.15.0-alpine3.15\n\n# Workaround: https://github.com/nodejs/docker-node/issues/813#issuecomment-407339011\n# Error: could not get uid/gid\n# [ 'nobody', 0 ]\nRUN npm config set unsafe-perm true\n\n# system dependencies for \"canvas\" Node package\n# https://github.com/Automattic/node-canvas/issues/866\nRUN apk add --no-cache \\\n        build-base \\\n        g++ \\\n        cairo-dev \\\n        jpeg-dev \\\n        pango-dev \\\n        giflib-dev\n\nRUN npm install -g pkg@5.6.0 pkg-fetch@3.3.0 && npm cache clean --force;\n\nENV NODE node16\nENV PLATFORM alpine\nENV ARCH x64\nRUN /usr/local/bin/pkg-fetch -n ${NODE} -p ${PLATFORM} -a ${ARCH}\n\nCOPY src /app/src\nCOPY tests /app/tests\nCOPY package.json package-lock.json /app/\nWORKDIR /app\n\nRUN npm i && npm cache clean --force;\nRUN npm run lint && npm t\nRUN /usr/local/bin/pkg --targets ${NODE}-${PLATFORM}-${ARCH} . -o app.bin\nRUN cp /app/node_modules/canvas/build/Release/canvas.node  /app/\n"
}