{
  "startTime": 1674248879523,
  "endTime": 1674248880110,
  "originalSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 33,
        "lineEnd": 42,
        "columnStart": 4,
        "columnEnd": 35
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 22,
        "lineEnd": 26,
        "columnStart": 22,
        "columnEnd": 15
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 33,
        "lineEnd": 42,
        "columnStart": 4,
        "columnEnd": 35
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 33,
        "lineEnd": 42,
        "columnStart": 4,
        "columnEnd": 35
      }
    }
  ],
  "repairedDockerfile": "FROM golang:1.14 AS builder\n\nWORKDIR /usr/app\n\nADD . .\n\nRUN make build\n\n\n\n\n\n\n\nFROM nginx:1.19\n\nLABEL maintainer=\"Stephen Afam-Osemene <me@stephenafamo.com>\"\nWORKDIR /usr/app\n\n# ------------------------------------------\n# install necessary packages\n# ------------------------------------------\nRUN apt-get update && apt-get install \\\n        --no-install-recommends --no-install-suggests -y \\\n        inetutils-ping \\\n        openssl \\\n        sqlite3 && rm -rf /var/lib/apt/lists/*;\n\n\n# ------------------------------------------\n# install certbot and its dns plugins\n# the commented out plugins do not exist in the ppa\n# ------------------------------------------\nRUN apt-get install certbot --no-install-recommends --no-install-suggests -y \\\n        certbot \\\n        python3-certbot-dns-cloudflare \\\n        python3-certbot-dns-digitalocean \\\n        python3-certbot-dns-dnsimple \\\n        python3-certbot-dns-google \\\n        python3-certbot-dns-linode \\\n        python3-certbot-dns-ovh \\\n        python3-certbot-dns-rfc2136 \\\n        python3-certbot-dns-route53 && rm -rf /var/lib/apt/lists/*;\n        # python3-certbot-dns-cloudxns \\\n        # python3-certbot-dns-dnsmadeeasy \\\n        # python3-certbot-dns-luadns \\\n        # python3-certbot-dns-nsone \\\n\n# ------------------------------------------\n# Set the configuration directory\n# ------------------------------------------\nENV CONFIG_DIR=\"/docker/config\"\n\n# ------------------------------------------\n# Set the letsencrypt credentials directory\n# ------------------------------------------\nENV LETSENCRYPT_CREDS_DIR=\"/docker/letsencrypt-credentials\"\n\n# ------------------------------------------\n# Copy custom nginx config\n# ------------------------------------------\nCOPY ./config/nginx.conf /etc/nginx/nginx.conf\n\n# ------------------------------------------\n# Create config directories\n# ------------------------------------------\nRUN mkdir -p /docker/config \\\n        /docker/letsencrypt-credentials \\\n        /etc/nginx/conf.d/http \\\n        /etc/nginx/conf.d/streams\n\n# ------------------------------------------\n# Remove symlink for NGINX logs\n# ------------------------------------------\nRUN rm -rf /var/log/nginx/*.log && touch /var/log/nginx/access.log /var/log/nginx/error.log\n\n# ------------------------------------------\n# Copy our warden executables\n# ------------------------------------------\nCOPY --from=builder /usr/app/bin ./bin\n\nEXPOSE 443\n\nCMD [\"./bin/warden\"]\n"
}