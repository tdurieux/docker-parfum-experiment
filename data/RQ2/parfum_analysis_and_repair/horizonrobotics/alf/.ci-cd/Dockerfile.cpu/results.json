{
  "startTime": 1674254883717,
  "endTime": 1674254884802,
  "originalSmells": [
    {
      "rule": "wgetUseHttpsUrl",
      "position": {
        "lineStart": 72,
        "lineEnd": 72,
        "columnStart": 4,
        "columnEnd": 58
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 28,
        "lineEnd": 33,
        "columnStart": 4,
        "columnEnd": 16
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 80,
        "lineEnd": 81,
        "columnStart": 4,
        "columnEnd": 57
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 95,
        "lineEnd": 95,
        "columnStart": 7,
        "columnEnd": 24
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 98,
        "lineEnd": 98,
        "columnStart": 4,
        "columnEnd": 70
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 105,
        "lineEnd": 105,
        "columnStart": 4,
        "columnEnd": 41
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 18,
        "lineEnd": 18,
        "columnStart": 4,
        "columnEnd": 73
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 25,
        "lineEnd": 25,
        "columnStart": 4,
        "columnEnd": 23
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 40,
        "lineEnd": 41,
        "columnStart": 22,
        "columnEnd": 51
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 55,
        "lineEnd": 66,
        "columnStart": 4,
        "columnEnd": 32
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 75,
        "lineEnd": 75,
        "columnStart": 18,
        "columnEnd": 39
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 77,
        "lineEnd": 77,
        "columnStart": 4,
        "columnEnd": 33
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 78,
        "lineEnd": 78,
        "columnStart": 4,
        "columnEnd": 40
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 18,
        "lineEnd": 18,
        "columnStart": 4,
        "columnEnd": 73
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 25,
        "lineEnd": 25,
        "columnStart": 4,
        "columnEnd": 23
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 55,
        "lineEnd": 66,
        "columnStart": 4,
        "columnEnd": 32
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 77,
        "lineEnd": 77,
        "columnStart": 4,
        "columnEnd": 33
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 78,
        "lineEnd": 78,
        "columnStart": 4,
        "columnEnd": 40
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 18,
        "lineEnd": 18,
        "columnStart": 4,
        "columnEnd": 73
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 25,
        "lineEnd": 25,
        "columnStart": 4,
        "columnEnd": 23
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 40,
        "lineEnd": 41,
        "columnStart": 22,
        "columnEnd": 51
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 55,
        "lineEnd": 66,
        "columnStart": 4,
        "columnEnd": 32
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 75,
        "lineEnd": 75,
        "columnStart": 18,
        "columnEnd": 39
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 77,
        "lineEnd": 77,
        "columnStart": 4,
        "columnEnd": 33
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 78,
        "lineEnd": 78,
        "columnStart": 4,
        "columnEnd": 40
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 18,
        "lineEnd": 18,
        "columnStart": 4,
        "columnEnd": 97
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 25,
        "lineEnd": 25,
        "columnStart": 4,
        "columnEnd": 47
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 55,
        "lineEnd": 66,
        "columnStart": 4,
        "columnEnd": 32
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 77,
        "lineEnd": 77,
        "columnStart": 4,
        "columnEnd": 57
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 78,
        "lineEnd": 78,
        "columnStart": 4,
        "columnEnd": 64
      }
    }
  ],
  "repairedDockerfile": "# Copyright (c) 2019 Horizon Robotics. All Rights Reserved.\n#\n# Licensed under the Apache License, Version 2.0 (the \"License\");\n# you may not use this file except in compliance with the License.\n# You may obtain a copy of the License at\n#\n#      http://www.apache.org/licenses/LICENSE-2.0\n#\n# Unless required by applicable law or agreed to in writing, software\n# distributed under the License is distributed on an \"AS IS\" BASIS,\n# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n# See the License for the specific language governing permissions and\n# limitations under the License.\n\nFROM ubuntu:18.04\n\nRUN apt update\n\nRUN apt install --no-install-recommends -y python3.7 python3-pip python3.7-dev python3-setuptools && rm -rf /var/lib/apt/lists/*;\n\nRUN python3.7 -m pip install --upgrade pip\n\nRUN ln -sf /usr/bin/python3.7 /usr/bin/python \\\n    && ln -sf /usr/bin/python3.7 /usr/bin/python3\n\nRUN apt install --no-install-recommends -y wget && rm -rf /var/lib/apt/lists/*;\n\n# install code style tools\nRUN pip3 install --no-cache-dir pre-commit==1.17.0 \\\n    cpplint==1.4.4 \\\n    clang-format==9.0 \\\n    pydocstyle==4.0.0 \\\n    pylint==2.3.1 \\\n    yapf==0.28.0\n\n# Ubuntu 18.04 officially supports git version 2.17 (through apt-get),\n# but github CI checkout@v2 requires a higher version of git (>=2.18).\n# Here we install git 2.18 from source.\n\n# install some pre-requisites for building git from source\nRUN apt-get update && apt-get install --no-install-recommends -y libssl-dev libghc-zlib-dev \\\n    libcurl4-gnutls-dev libexpat1-dev gettext unzip && rm -rf /var/lib/apt/lists/*;\n\nRUN mkdir -p /opt/local_git \\\n    && cd /opt/local_git \\\n    && wget https://github.com/git/git/archive/v2.18.0.zip -O git.zip \\\n    && unzip git.zip \\\n    && cd git-* \\\n    && make prefix=/usr/local all \\\n    && make prefix=/usr/local install\n\n# should get \"git version 2.18.0\"\nRUN git --version\n\n\nRUN apt install --no-install-recommends -y \\\n        libsm6 \\\n        libxext-dev \\\n        libxrender1 \\\n        unzip \\\n        cmake \\\n        libxml2 libxml2-dev libxslt1-dev \\\n        dirmngr gnupg2 lsb-release \\\n        xvfb kmod swig patchelf \\\n        libopenmpi-dev libcups2-dev \\\n        libssl-dev libosmesa6-dev \\\n        mesa-utils python-opengl && rm -rf /var/lib/apt/lists/*;\n\n# install gazebo-9\nRUN echo \"deb http://packages.osrfoundation.org/gazebo/ubuntu-stable `lsb_release -cs` main\" > \\\n    /etc/apt/sources.list.d/gazebo-stable.list\n\nRUN wget https://packages.osrfoundation.org/gazebo.key -O - | apt-key add -\nRUN apt update\n\nRUN apt update && apt install --no-install-recommends -y ffmpeg && rm -rf /var/lib/apt/lists/*;\n\nRUN apt-get install --no-install-recommends -q -y gazebo9 && rm -rf /var/lib/apt/lists/*;\nRUN apt-get install --no-install-recommends -q -y libgazebo9-dev && rm -rf /var/lib/apt/lists/*;\n\nRUN pip3 install --no-cache-dir torch==1.8.1+cpu torchvision==0.9.1+cpu torchtext==0.9.1 \\\n    -f https://download.pytorch.org/whl/torch_stable.html\n\n\n# build and install social robot\nRUN mkdir -p /opt/local \\\n    && cd /opt/local \\\n    && git clone --depth=1 https://github.com/HorizonRobotics/SocialRobot.git \\\n    && cd SocialRobot \\\n    && git submodule update --init --recursive \\\n    && mkdir build \\\n    && cd build \\\n    && cmake .. \\\n    && make -j \\\n    && cd .. \\\n    && pip3 install --no-cache-dir -e . \\\n    && rm -rf build\n\nRUN pip3 install --no-cache-dir git+https://github.com/HorizonRobotics/gin-config.git\n\n# build deepmind lab\n# TODO\n\n# python libs requirement by alf\nCOPY requirements.txt  /tmp/requirements.txt\nRUN pip3 install --no-cache-dir -r /tmp/requirements.txt\n\n# The source is inaccessible anymore. We leave it here as a reference and\n# install it in other ways when building the image if needed.\n# # import public ROM for super mario (ignore shasum)\n# RUN cd /tmp \\\n#     && wget \\\n#       'https://static.roms.download/roms/nintendo/Super Mario Bros (E).zip' \\\n#     && unzip 'Super Mario Bros (E).zip' \\\n#     && mv 'Super Mario Bros (E).nes' \\\n#       /usr/local/lib/python3.7/dist-packages/retro/data/stable/SuperMarioBros-Nes/rom.nes \\\n#     && rm 'Super Mario Bros (E).zip'\n\n# clean\nRUN  rm -rf /var/lib/apt/lists/*\n\n\n\n"
}