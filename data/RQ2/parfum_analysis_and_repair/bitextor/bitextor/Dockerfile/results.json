{
  "startTime": 1674251968758,
  "endTime": 1674251970232,
  "originalSmells": [
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 81,
        "lineEnd": 81,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 83,
        "lineEnd": 83,
        "columnStart": 4,
        "columnEnd": 23
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 85,
        "lineEnd": 85,
        "columnStart": 4,
        "columnEnd": 40
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 86,
        "lineEnd": 86,
        "columnStart": 4,
        "columnEnd": 43
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 87,
        "lineEnd": 87,
        "columnStart": 4,
        "columnEnd": 69
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 89,
        "lineEnd": 89,
        "columnStart": 4,
        "columnEnd": 38
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 91,
        "lineEnd": 91,
        "columnStart": 4,
        "columnEnd": 39
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 94,
        "lineEnd": 94,
        "columnStart": 4,
        "columnEnd": 54
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 95,
        "lineEnd": 95,
        "columnStart": 4,
        "columnEnd": 39
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 97,
        "lineEnd": 97,
        "columnStart": 4,
        "columnEnd": 23
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 98,
        "lineEnd": 98,
        "columnStart": 4,
        "columnEnd": 23
      }
    },
    {
      "rule": "configureShouldUseBuildFlag",
      "position": {
        "lineStart": 49,
        "lineEnd": 49,
        "columnStart": 4,
        "columnEnd": 15
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 46,
        "lineEnd": 46,
        "columnStart": 4,
        "columnEnd": 40
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 18,
        "lineEnd": 18,
        "columnStart": 4,
        "columnEnd": 136
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 21,
        "lineEnd": 21,
        "columnStart": 4,
        "columnEnd": 49
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 24,
        "lineEnd": 24,
        "columnStart": 4,
        "columnEnd": 50
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 27,
        "lineEnd": 27,
        "columnStart": 4,
        "columnEnd": 64
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 31,
        "lineEnd": 31,
        "columnStart": 4,
        "columnEnd": 31
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 44,
        "lineEnd": 44,
        "columnStart": 4,
        "columnEnd": 48
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 18,
        "lineEnd": 18,
        "columnStart": 4,
        "columnEnd": 136
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 21,
        "lineEnd": 21,
        "columnStart": 4,
        "columnEnd": 49
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 24,
        "lineEnd": 24,
        "columnStart": 4,
        "columnEnd": 50
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 27,
        "lineEnd": 27,
        "columnStart": 4,
        "columnEnd": 64
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 31,
        "lineEnd": 31,
        "columnStart": 4,
        "columnEnd": 31
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 44,
        "lineEnd": 44,
        "columnStart": 4,
        "columnEnd": 48
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 18,
        "lineEnd": 18,
        "columnStart": 4,
        "columnEnd": 136
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 21,
        "lineEnd": 21,
        "columnStart": 4,
        "columnEnd": 49
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 24,
        "lineEnd": 24,
        "columnStart": 4,
        "columnEnd": 50
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 27,
        "lineEnd": 27,
        "columnStart": 4,
        "columnEnd": 64
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 31,
        "lineEnd": 31,
        "columnStart": 4,
        "columnEnd": 31
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 44,
        "lineEnd": 44,
        "columnStart": 4,
        "columnEnd": 48
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 18,
        "lineEnd": 18,
        "columnStart": 4,
        "columnEnd": 160
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 21,
        "lineEnd": 21,
        "columnStart": 4,
        "columnEnd": 73
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 24,
        "lineEnd": 24,
        "columnStart": 4,
        "columnEnd": 74
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 27,
        "lineEnd": 27,
        "columnStart": 4,
        "columnEnd": 88
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 31,
        "lineEnd": 31,
        "columnStart": 4,
        "columnEnd": 55
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 44,
        "lineEnd": 44,
        "columnStart": 4,
        "columnEnd": 72
      }
    }
  ],
  "repairedDockerfile": "#Download base image ubuntu (latest version)\nFROM ubuntu:20.04\n\nARG DEBIAN_FRONTEND=noninteractive\nARG j=1\n\n# Update Software repository\nENV RED '\\033[0;31m'\nENV NC '\\033[0m'\nRUN /bin/echo -e \"${RED}Updating Software repository${NC}\"\nRUN apt-get update && apt-get upgrade -y && apt-get autoremove -y\n\n# Pretend that HOME is /home/docker because having things in / is awkward\nRUN mkdir -p /home/docker\nENV HOME /home/docker\n\n# Add required dependencies\nRUN /bin/echo -e \"${RED}Installing core apt dependencies${NC}\"\nRUN apt-get -y --no-install-recommends install git cmake python3 python3-venv python3-pip libboost-all-dev curl wget pigz unzip time parallel bc libhunspell-dev && rm -rf /var/lib/apt/lists/*;\n# warc2text\nRUN /bin/echo -e \"${RED}Installing warc2text apt dependencies${NC}\"\nRUN apt-get -y --no-install-recommends install libuchardet-dev libzip-dev && rm -rf /var/lib/apt/lists/*;\n# pdf-extract\nRUN /bin/echo -e \"${RED}Installing pdf-extract apt dependencies${NC}\"\nRUN apt-get -y --no-install-recommends install openjdk-8-jdk poppler-utils && rm -rf /var/lib/apt/lists/*;\n# biroamer\nRUN /bin/echo -e \"${RED}Installing biroamer apt dependencies${NC}\"\nRUN apt-get -y --no-install-recommends install libgoogle-perftools-dev libsparsehash-dev && rm -rf /var/lib/apt/lists/*;\n\n# random utilities:\n# not necessary for bitextor, but users might find this useful:\nRUN apt-get -y --no-install-recommends install htop vim && rm -rf /var/lib/apt/lists/*;\n\n# symlink python to python3\nRUN ln -sf /usr/bin/python3 /usr/bin/python\nRUN ln -sf /usr/bin/pip3 /usr/bin/pip\n\n# Support for UTF8\n# RUN locale-gen en_US.UTF-8\n# ENV LANG=en_US.UTF-8 LANGUAGE=en_US:en LC_ALL=en_US.UTF-8\n\n# Installing protobuf\nRUN /bin/echo -e \"${RED}Installing protobuf and CLD3${NC}\"\nWORKDIR /home/docker\nRUN apt-get install --no-install-recommends -y autoconf automake libtool && rm -rf /var/lib/apt/lists/*;\nRUN wget https://github.com/protocolbuffers/protobuf/releases/download/v3.19.1/protobuf-all-3.19.1.tar.gz\nRUN tar -zxvf protobuf-all-3.19.1.tar.gz && rm protobuf-all-3.19.1.tar.gz\nRUN rm protobuf-all-3.19.1.tar.gz\nWORKDIR /home/docker/protobuf-3.19.1\nRUN ./configure --build=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\"\nRUN make -j $j\nRUN make install\nRUN ldconfig\n\n# Installing giashard\nRUN /bin/echo -e \"${RED}Installing golang${NC}\"\nWORKDIR /home/docker\nRUN wget -O go.tgz https://dl.google.com/go/go1.17.3.linux-amd64.tar.gz\nRUN tar -C /usr/local -xzf go.tgz && rm go.tgz\nENV PATH \"/usr/local/go/bin:$PATH\"\nRUN go version\nENV GOPATH /home/docker/go\nENV PATH $GOPATH/bin:/usr/local/go/bin:$PATH\nRUN mkdir -p \"$GOPATH/src\" \"$GOPATH/bin\" && chmod -R 777 \"$GOPATH\"\nRUN /bin/echo -e \"${RED}Installing giashard${NC}\"\nRUN go install github.com/paracrawl/giashard/cmd/giashard@latest\n\n# Download Heritrix\nRUN /bin/echo -e \"${RED}Downloading heritrix${NC}\"\nWORKDIR /home/docker\nRUN wget https://repo1.maven.org/maven2/org/archive/heritrix/heritrix/3.4.0-20210923/heritrix-3.4.0-20210923-dist.zip\nRUN unzip heritrix-3.4.0-20210923-dist.zip && rm heritrix-3.4.0-20210923-dist.zip\n\n# Cloning bitextor\nRUN /bin/echo -e \"${RED}Cloning bitextor${NC}\"\nWORKDIR /home/docker\nCOPY ./ bitextor/\n\n# Installing bitextor dependencies\nRUN /bin/echo -e \"${RED}Installing pip dependencies${NC}\"\nWORKDIR /home/docker/bitextor\nRUN pip3 install --no-cache-dir --upgrade pip\n## bitextor\nRUN pip3 install --no-cache-dir .[all]\n## bicleaner\nRUN pip3 install --no-cache-dir ./third_party/bicleaner\nRUN pip3 install --no-cache-dir ./third_party/bicleaner-ai\nRUN pip3 install --no-cache-dir ./third_party/kenlm --install-option=\"--max_order=7\"\n##  bifixer\nRUN pip3 install --no-cache-dir ./third_party/bifixer\n## biroamer\nRUN pip3 install --no-cache-dir ./third_party/biroamer\nRUN python3 -c \"from flair.models import SequenceTagger; SequenceTagger.load('flair/ner-english-fast')\"\n## neural\nRUN pip3 install --no-cache-dir ./third_party/neural-document-aligner\nRUN pip3 install --no-cache-dir ./third_party/vecalign\n## cld3\nRUN pip3 install --no-cache-dir Cython\nRUN pip3 install --no-cache-dir pycld3\n\n\n# Installing bitextor\nRUN /bin/echo -e \"${RED}Compiling bitextor${NC}\"\nWORKDIR /home/docker/bitextor\nRUN mkdir -p build\nWORKDIR /home/docker/bitextor/build\nRUN cmake -DCMAKE_INSTALL_PREFIX=/usr ..\nRUN make -j $j install\n\n# docker run bitextor with execute bitextor.sh by default\n# any arguments passed to `docker run bitextor` command will be passed to bitextor.sh\nWORKDIR /home/docker\nENTRYPOINT [\"bitextor\"]\nCMD [\"-h\"]\n\n# to execute interactive shell instead use:\n# docker run -it --entrypoint /bin/bash bitextor\n"
}