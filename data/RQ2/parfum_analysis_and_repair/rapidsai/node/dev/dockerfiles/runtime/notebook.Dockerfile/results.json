{
  "startTime": 1674250454626,
  "endTime": 1674250455723,
  "originalSmells": [
    {
      "rule": "npmCacheCleanAfterInstall",
      "position": {
        "lineStart": 60,
        "lineEnd": 60,
        "columnStart": 4,
        "columnEnd": 101
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "ARG FROM_IMAGE\n\nFROM ${FROM_IMAGE}\n\nSHELL [\"/bin/bash\", \"-c\"]\n\nARG TARGETARCH\n\nADD --chown=node:node \\\n    https://raw.githubusercontent.com/n-riesco/ijavascript/8637a3e18b89270121f49733d03af0e3e6e0a17a/images/nodejs/js-green-32x32.png \\\n    /home/node/.local/share/jupyter/kernels/javascript/logo-32x32.png\n\nADD --chown=node:node \\\n    https://raw.githubusercontent.com/n-riesco/ijavascript/8637a3e18b89270121f49733d03af0e3e6e0a17a/images/nodejs/js-green-64x64.png \\\n    /home/node/.local/share/jupyter/kernels/javascript/logo-64x64.png\n\nADD --chown=root:root \\\n    https://github.com/jupyterlab/jupyterlab-desktop/releases/download/v3.3.2-1/JupyterLab-Setup-Debian.deb \\\n    /tmp/JupyterLab-Setup-Debian.deb\n\nUSER root\n\n# Manually install jupyter-kernelspec binary (for ijavascript)\nRUN bash -c \"echo -e '#!/usr/bin/python3\\n\\\nimport re\\n\\\nimport sys\\n\\\nfrom jupyter_client.kernelspecapp import KernelSpecApp\\n\\\nif __name__ == \\\"__main__\\\":\\n\\\n    sys.argv[0] = re.sub(r\\\"(-script\\\\.pyw?|\\\\.exe)?\\$\\\", \\\"\\\", sys.argv[0])\\n\\\n    sys.exit(KernelSpecApp.launch_instance())\\n\\\n' > /usr/bin/jupyter-kernelspec\" \\\n && chmod +x /usr/bin/jupyter-kernelspec \\\n # Install ijavascript kernel\n && bash -c \"echo -e '{\\n\\\n  \\\"argv\\\": [\\n\\\n    \\\"ijskernel\\\",\\n\\\n    \\\"--hide-undefined\\\",\\n\\\n    \\\"{connection_file}\\\",\\n\\\n    \\\"--protocol=5.0\\\",\\n\\\n    \\\"--session-working-dir=/home/node\\\"\\n\\\n  ],\\n\\\n  \\\"name\\\": \\\"javascript\\\",\\n\\\n  \\\"language\\\": \\\"javascript\\\",\\n\\\n  \\\"display_name\\\": \\\"Javascript (Node.js)\\\"\\n\\\n}' > /home/node/.local/share/jupyter/kernels/javascript/kernel.json\" \\\n && chmod 0644 /home/node/.local/share/jupyter/kernels/javascript/logo-{32x32,64x64}.png \\\n && mkdir -p /home/node/.config/jupyterlab-desktop/lab/user-settings/@jupyterlab/apputils-extension \\\n && bash -c \"echo -e '{\\n\\\n  \\\"theme\\\": \\\"JupyterLab Dark\\\"\\n\\\n}' > /home/node/.config/jupyterlab-desktop/lab/user-settings/@jupyterlab/apputils-extension/themes.jupyterlab-settings\" \\\n \\\n && chown -R node:node /home/node/.{local,config} \\\n # Install Jupyter desktop\n && apt update \\\n && DEBIAN_FRONTEND=noninteractive \\\n    apt install -y --no-install-recommends \\\n    build-essential libasound2 jupyter-notebook /tmp/JupyterLab-Setup-Debian.deb \\\n # Remove python3 kernelspec\n && jupyter kernelspec remove -f python3 \\\n # Install ijavascript\n && npm install --location=global --unsafe-perm --no-audit --no-fund --no-update-notifier ijavascript \\\n && ijsinstall --install=global --spec-path=full \\\n \\\n # Clean up\n && apt remove -y build-essential \\\n && apt autoremove -y && apt clean \\\n && rm -rf \\\n    /tmp/* \\\n    /var/tmp/* \\\n    /var/lib/apt/lists/* \\\n    /var/cache/apt/archives/* && npm cache clean --force;\n\nCOPY --chown=node:node modules/cudf/notebooks     /home/node/cudf\nCOPY --chown=node:node modules/demo/umap/*.ipynb  /home/node/cugraph/\nCOPY --chown=node:node modules/demo/graph/*.ipynb /home/node/cugraph/\n\nUSER node\n\nWORKDIR /home/node\n\nSHELL [\"/bin/bash\", \"-l\"]\n\nCMD [\"jlab\"]\n"
}