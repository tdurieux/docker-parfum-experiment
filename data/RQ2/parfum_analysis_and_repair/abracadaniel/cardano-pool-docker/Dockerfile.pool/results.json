{
  "startTime": 1674249815761,
  "endTime": 1674249816597,
  "originalSmells": [
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 14,
        "lineEnd": 14,
        "columnStart": 4,
        "columnEnd": 21
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 12,
        "lineEnd": 12,
        "columnStart": 25,
        "columnEnd": 114
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 12,
        "lineEnd": 12,
        "columnStart": 25,
        "columnEnd": 114
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM arradev/cardano-node:latest AS node\nFROM arradev/cardano-address:latest AS address\nFROM arradev/bech32:latest AS bech32\nFROM arradev/cncli:latest AS cncli\n#FROM arradev/cardano-voting:latest AS voting\nFROM debian:stable-20210816-slim\nLABEL maintainer=\"dro@arrakis.it\"\n\nSHELL [\"/bin/bash\", \"-c\"]\nWORKDIR /\n\n# Install tools\nRUN apt-get update -y && apt-get install --no-install-recommends -y vim procps dnsutils bc curl nano cron python3 python3-pip tmux jq wget \\\n    && apt-get clean && rm -rf /var/lib/apt/lists/*;\nRUN pip3 install --no-cache-dir pytz\n\n# Copy compiled binaries\nCOPY --from=node /bin/cardano* /bin/\nCOPY --from=node /lib/libsodium* /lib/\nCOPY --from=cncli /bin/cncli /bin/\nCOPY --from=address /bin/cardano-address /bin/\nCOPY --from=bech32 /bin/bech32 /bin/\n#COPY --from=voting /bin/voting-tools /bin/\n#COPY --from=voting /bin/voter-registration /bin/\n\n# Expose ports\n## cardano-node, EKG, Prometheus\nEXPOSE 3000 12788 12798\n\n# ENV variables\nENV NODE_PORT=\"3000\" \\\r\n    NODE_NAME=\"node1\" \\\r\n    NODE_TOPOLOGY=\"\" \\\r\n    NODE_RELAY=\"False\" \\\r\n    CARDANO_NETWORK=\"main\" \\\r\n    EKG_PORT=\"12788\" \\\r\n    PROMETHEUS_PORT=\"12798\" \\\r\n    RESOLVE_HOSTNAMES=\"False\" \\\r\n    REPLACE_EXISTING_CONFIG=\"False\" \\\r\n    POOL_TICKER=\"\" \\\r\n    POOL_PLEDGE=\"100000000000\" \\\r\n    POOL_COST=\"10000000000\" \\\r\n    POOL_MARGIN=\"0.05\" \\\r\n    AUTO_TOPOLOGY=\"True\" \\\r\n    METADATA_URL=\"\" \\\r\n    PUBLIC_RELAY_IP=\"TOPOLOGY\" \\\r\n    PUBLIC_RELAY_HOST=\"\" \\\r\n    WAIT_FOR_SYNC=\"True\" \\\r\n    PATH=\"/root/.local/bin/:/scripts/:/scripts/functions/:/cardano-node/scripts/:${PATH}\" \\\r\n    LD_LIBRARY_PATH=\"/usr/local/lib:${LD_LIBRARY_PATH}\" \\\r\n    CARDANO_NODE_SOCKET_PATH=\"DEFAULT\" \\\r\n    CNCLI_SYNC=\"True\" \\\r\n    STATUS_PANEL=\"False\" \\\r\n    PT_API_KEY=\"\" \\\r\n    PT_SENDTIP=\"False\" \\\r\n    PT_SENTSLOTS=\"False\" \\\r\n    LANG=\"C.UTF-8\"\n\n# Add config\nADD cfg-templates/ /cfg-templates/\nRUN mkdir -p /config/\nVOLUME /config/\n\n# Add scripts\nADD scripts/ /scripts/\nRUN chmod -R +x /scripts/\n\nENTRYPOINT [\"/scripts/start-cardano-node\"]\n"
}