{
  "startTime": 1674252672737,
  "endTime": 1674252674094,
  "originalSmells": [
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 87,
        "lineEnd": 87,
        "columnStart": 5,
        "columnEnd": 26
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "# Copyright 2017-2017 Spotify AB\n# Copyright 2017-2019 The Last Pickle Ltd\n#\n# Licensed under the Apache License, Version 2.0 (the \"License\");\n# you may not use this file except in compliance with the License.\n# You may obtain a copy of the License at\n#\n#     http://www.apache.org/licenses/LICENSE-2.0\n#\n# Unless required by applicable law or agreed to in writing, software\n# distributed under the License is distributed on an \"AS IS\" BASIS,\n# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n# See the License for the specific language governing permissions and\n# limitations under the License.\n\nFROM adoptopenjdk/openjdk11:alpine\n\nARG SHADED_JAR\n\nENV REAPER_SEGMENT_COUNT_PER_NODE=64 \\\n    REAPER_REPAIR_PARALELLISM=DATACENTER_AWARE \\\n    REAPER_REPAIR_INTENSITY=0.9 \\\n    REAPER_MAX_PENDING_COMPACTIONS=20 \\\n    REAPER_SCHEDULE_DAYS_BETWEEN=7 \\\n    REAPER_REPAIR_RUN_THREADS=15 \\\n    REAPER_HANGING_REPAIR_TIMEOUT_MINS=30 \\\n    REAPER_STORAGE_TYPE=memory \\\n    REAPER_ENABLE_CROSS_ORIGIN=true \\\n    REAPER_INCREMENTAL_REPAIR=false \\\n    REAPER_BLACKLIST_TWCS=false \\\n    REAPER_ENABLE_DYNAMIC_SEED_LIST=true \\\n    REAPER_REPAIR_MANAGER_SCHEDULING_INTERVAL_SECONDS=30 \\\n    REAPER_JMX_CONNECTION_TIMEOUT_IN_SECONDS=20 \\\n    REAPER_USE_ADDRESS_TRANSLATOR=false \\\n    REAPER_DATACENTER_AVAILABILITY=ALL \\\n    REAPER_AUTO_SCHEDULING_ENABLED=false \\\n    REAPER_AUTO_SCHEDULING_INITIAL_DELAY_PERIOD=PT15S \\\n    REAPER_AUTO_SCHEDULING_PERIOD_BETWEEN_POLLS=PT10M \\\n    REAPER_AUTO_SCHEDULING_TIME_BEFORE_FIRST_SCHEDULE=PT5M \\\n    REAPER_AUTO_SCHEDULING_SCHEDULE_SPREAD_PERIOD=PT6H \\\n    REAPER_AUTO_SCHEDULING_ADAPTIVE=true \\\n    REAPER_AUTO_SCHEDULING_INCREMENTAL=false \\\n    REAPER_AUTO_SCHEDULING_PERCENT_UNREPAIRED_THRESHOLD=10 \\\n    REAPER_AUTO_SCHEDULING_EXCLUDED_CLUSTERS=\"[]\" \\\n    REAPER_AUTO_SCHEDULING_EXCLUDED_KEYSPACES=\"[]\" \\\n    REAPER_JMX_PORTS=\"{}\" \\\n    REAPER_JMX_AUTH_USERNAME=\"\" \\\n    REAPER_JMX_AUTH_PASSWORD=\"\" \\\n    REAPER_JMX_CREDENTIALS=\"\" \\\n    REAPER_LOGGING_ROOT_LEVEL=INFO \\\n    REAPER_LOGGING_LOGGERS=\"{}\" \\\n    REAPER_LOGGING_APPENDERS_CONSOLE_LOG_FORMAT='\"%-6level [%d] [%t] %logger{5} - %msg %n\"' \\\n    REAPER_LOGGING_APPENDERS_CONSOLE_THRESHOLD=INFO \\\n    REAPER_SERVER_APP_PORT=8080 \\\n    REAPER_SERVER_APP_BIND_HOST=\"0.0.0.0\" \\\n    REAPER_SERVER_ADMIN_PORT=8081 \\\n    REAPER_SERVER_ADMIN_BIND_HOST=\"0.0.0.0\" \\\n    REAPER_CASS_ACTIVATE_QUERY_LOGGER=false \\\n    REAPER_CASS_CLUSTER_NAME=\"clustername\" \\\n    REAPER_CASS_CONTACT_POINTS=\"[]\" \\\n    REAPER_CASS_PORT=9042 \\\n    REAPER_CASS_KEYSPACE=\"reaper_db\" \\\n    REAPER_CASS_LOCAL_DC=\"\" \\\n    REAPER_CASS_AUTH_ENABLED=\"false\" \\\n    REAPER_CASS_AUTH_USERNAME=\"cassandra\" \\\n    REAPER_CASS_AUTH_PASSWORD=\"cassandra\" \\\n    REAPER_CASS_NATIVE_PROTOCOL_SSL_ENCRYPTION_ENABLED=\"false\" \\\n    REAPER_DB_URL=\"\" \\\n    REAPER_DB_USERNAME=\"\" \\\n    REAPER_DB_PASSWORD=\"\" \\\n    REAPER_METRICS_ENABLED=false \\\n    REAPER_METRICS_FREQUENCY=\"1 minute\" \\\n    REAPER_METRICS_REPORTERS=\"[]\" \\\n    REAPER_AUTH_ENABLED=\"true\" \\\n    REAPER_AUTH_USER=\"\" \\\n    REAPER_AUTH_PASSWORD=\"\" \\\n    REAPER_SHIRO_INI=\"\" \\\n    REAPER_JMXMP_ENABLED=\"false\" \\\n    REAPER_JMXMP_SSL=\"false\" \\\n    JAVA_OPTS=\"\" \\\n    REAPER_MAX_PARALLEL_REPAIRS=2\n\n# used to run spreaper cli\nRUN apk add --update \\\n    python3 \\\n    py3-pip \\\n    bash \\\n  && pip3 install --no-cache-dir requests \\\n  && rm -rf /var/cache/apk/*\n\n\nADD cassandra-reaper.yml /etc/cassandra-reaper/cassandra-reaper.yml\nADD shiro.ini /etc/cassandra-reaper/shiro.ini\nADD entrypoint.sh /usr/local/bin/entrypoint.sh\nADD configure-persistence.sh /usr/local/bin/configure-persistence.sh\nADD configure-metrics.sh /usr/local/bin/configure-metrics.sh\nADD configure-webui-authentication.sh /usr/local/bin/configure-webui-authentication.sh\nADD configure-jmx-credentials.sh /usr/local/bin/configure-jmx-credentials.sh\nADD ${SHADED_JAR} /usr/local/lib/cassandra-reaper.jar\nADD spreaper /usr/local/bin/spreaper\n\n\n# get around `/usr/local/bin/configure-persistence.sh: line 65: can't create /etc/cassandra-reaper/cassandra-reaper.yml: Interrupted system call` unknown error\nRUN touch /etc/cassandra-reaper/cassandra-reaper.yml\n# get around `/usr/local/bin/configure-webui-authentication.sh: line 44: can't `create` /etc/cassandra-reaper/shiro.ini: Interrupted system call` unknown error\nRUN touch /etc/cassandra-reaper/shiro.ini\n\n\nRUN addgroup -g 1001 -S reaper && adduser -G reaper -S -u 1001 reaper && \\\n    mkdir -p /var/lib/cassandra-reaper && \\\n    mkdir -p /etc/cassandra-reaper/shiro && \\\n    mkdir -p /var/log/cassandra-reaper && \\\n    chown reaper:reaper \\\n        /etc/cassandra-reaper/cassandra-reaper.yml \\\n        /usr/local/lib/cassandra-reaper.jar \\\n        /usr/local/bin/entrypoint.sh \\\n        /usr/local/bin/configure-persistence.sh \\\n        /usr/local/bin/configure-webui-authentication.sh \\\n        /usr/local/bin/configure-metrics.sh \\\n        /usr/local/bin/configure-jmx-credentials.sh \\\n        /usr/local/bin/spreaper \\\n        /etc/cassandra-reaper/shiro.ini && \\\n    chown -R reaper:reaper \\\n        /var/lib/cassandra-reaper \\\n        /etc/cassandra-reaper/shiro \\\n        /var/log/cassandra-reaper && \\\n    chmod +x \\\n        /usr/local/bin/entrypoint.sh \\\n        /usr/local/bin/configure-persistence.sh \\\n        /usr/local/bin/configure-webui-authentication.sh \\\n        /usr/local/bin/configure-metrics.sh \\\n        /usr/local/bin/configure-jmx-credentials.sh \\\n        /usr/local/bin/spreaper\n\nVOLUME /var/lib/cassandra-reaper\nVOLUME /etc/cassandra-reaper/shiro\n\nUSER reaper\n\nENTRYPOINT [\"/usr/local/bin/entrypoint.sh\"]\nCMD [\"cassandra-reaper\"]\n"
}