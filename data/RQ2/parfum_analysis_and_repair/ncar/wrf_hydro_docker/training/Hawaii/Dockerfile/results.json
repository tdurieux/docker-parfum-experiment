{
  "startTime": 1674250666451,
  "endTime": 1674250667850,
  "originalSmells": [
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 97,
        "lineEnd": 97,
        "columnStart": 4,
        "columnEnd": 27
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "###################################\n# Image name: wrfhydro/hawaii-training\n# Author: Katelyn FitzGerald <katelynw@ucar.edu>\n# Date:  2020-11-02\n###################################\n\nFROM ubuntu:focal\n\nUSER root\n\nARG DEBIAN_FRONTEND=noninteractive\n\nRUN apt-get update \\\n    && apt-get install -yq --no-install-recommends \\\n    bc\\\n    bzip2 \\\n    ca-certificates \\\n    csh \\\n    curl \\\n    file \\\n    g++ \\\n    gfortran \\\n    git \\\n    less \\\n    libcurl4-gnutls-dev \\\n    libhdf5-dev \\\n    libnetcdf-dev \\\n    libnetcdff-dev \\\n    libopenmpi-dev \\\n    libpng-dev \\\n    libswitch-perl \\\n    libssl-dev \\\n    libxml2-dev \\\n    locales \\\n    m4 \\\n    make \\\n    nano \\\n    netcdf-bin \\\n    openmpi-bin \\\n    openssh-client \\\n    r-base-core \\\n    tcsh \\\n    valgrind \\ \n    vim \\\n    wget \\\n    && rm -rf /var/lib/apt/lists/*\n\nRUN locale-gen en_US.UTF-8   \n\nENV LANG en_US.UTF-8\nENV LC_ALL en_US.UTF-8\n\n#################################\n## Create docker user\nRUN useradd -ms /bin/bash docker\nRUN usermod -aG sudo docker\nRUN chmod -R 777 /home/docker/\n#################################\n\n## Python installs\nRUN wget https://repo.continuum.io/miniconda/Miniconda3-latest-Linux-x86_64.sh \\\n    && bash Miniconda3-latest-Linux-x86_64.sh -b -p /home/docker/miniconda3 \\\n    && rm Miniconda3-latest-Linux-x86_64.sh\n\n#Set environment variables\nENV PATH=\"/home/docker/miniconda3/bin:${PATH}\"\n\nWORKDIR /home/docker\n\nRUN conda install -c conda-forge \\\n    nodejs \\\n    gdal \\\n    nco \\\n    nccmp \\\n    numpy \\\n    cython \\\n    pyproj \\\n    rasterio \\\n    geopandas \\\n    jupyterlab \\\n    jupyter_contrib_nbextensions \\\n    ipython \\\n    h5py \\\n    mpi4py \\\n    netcdf4 \\\n    esmpy \\\n    matplotlib \\\n    dask \\\n    toolz \\\n    xrviz \\\n    xarray \\\n    gdown\n\nRUN conda install -c pyviz hvplot\n\nRUN jupyter labextension install @jupyterlab/toc @pyviz/jupyterlab_pyviz\n\nRUN pip install --no-cache-dir bash_kernel \\\n        && python -m bash_kernel.install\n\n#################################\nRUN mkdir /home/docker/wrf-hydro-training \\\n        && chmod -R 777 /home/docker/wrf-hydro-training\n\n#################################\n#Get the Jupyter configuration script\nCOPY ./jupyter_notebook_config.py /home/docker/.jupyter/\nRUN chmod -R 777 /home/docker/.jupyter\n\n#################################\n#Get the entrypoint script to download the code, example case, and lessons and start JupyterLab\nCOPY ./entrypoint.sh /.\nRUN chmod 777 /entrypoint.sh\nRUN chmod -R 777 /home/docker/wrf-hydro-training/\n\nUSER docker\nWORKDIR /home/docker\n\nENV PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/bin:/home/docker/miniconda3/bin\nENV SHELL=bash\nENTRYPOINT [\"/entrypoint.sh\"]\nCMD [\"interactive\"]\n"
}