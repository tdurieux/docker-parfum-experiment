{
  "startTime": 1674219049456,
  "endTime": 1674219050394,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 3,
        "lineEnd": 3,
        "columnStart": 4,
        "columnEnd": 35
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM adoptopenjdk/openjdk11:jdk-11.0.4_11-alpine as builder\nRUN apk add --no-cache bash curl zip\n\nRUN curl -f -s \"https://get.sdkman.io\" | bash\n\nSHELL [\"/bin/bash\", \"-c\"]\n\nRUN source /root/.sdkman/bin/sdkman-init.sh; sdk install gradle 7.0\nRUN source /root/.sdkman/bin/sdkman-init.sh; sdk install maven 3.8.1\n\nFROM adoptopenjdk/openjdk11:jdk-11.0.4_11-alpine as dependencies\nRUN apk add --no-cache bash wget\n\nCOPY --from=builder /root/.sdkman/candidates/gradle/current /usr/bin/gradle\nCOPY --from=builder /root/.sdkman/candidates/maven/current /usr/bin/maven\n\nSHELL [\"/bin/bash\", \"-c\"]\nENV PATH=\"/usr/bin/maven/bin:/usr/bin/maven/:/usr/bin/gradle:/usr/bin/gradle/bin:${PATH}\"\n\n# Coping libs, scripts and sources\nADD build/distributions/ /root/\n\n#Creating folders structure\nRUN mkdir -p /root/chaincode-java/chaincode/src\nRUN mkdir -p /root/chaincode-java/chaincode/build/out\n\n#Making scripts runnable\nRUN chmod +x /root/chaincode-java/start\nRUN chmod +x /root/chaincode-java/build.sh\n\n# Build protos and shim jar and installing them to maven local and gradle cache\nWORKDIR /root/chaincode-java/shim-src\nRUN gradle \\\n    clean \\\n    fabric-chaincode-protos:build \\\n    fabric-chaincode-protos:publishToMavenLocal \\\n    fabric-chaincode-shim:build \\\n    fabric-chaincode-shim:publishToMavenLocal \\\n    -x javadoc \\\n    -x test \\\n    -x checkstyleMain \\\n    -x checkstyleTest \\\n    -x dependencyCheckAnalyze\n\n# Installing all protos jar dependencies to maven local\nWORKDIR /root/chaincode-java/shim-src/fabric-chaincode-protos/build/publications/protosJar/\nRUN mvn -f pom-default.xml compile\n\n# Installing all shim jar dependencies to maven local\nWORKDIR /root/chaincode-java/shim-src/fabric-chaincode-shim/build/publications/shimJar/\nRUN mvn -f pom-default.xml compile\n\nWORKDIR /root/chaincode-java\n# Run the Gradle and Maven commands to generate the wrapper variants\n# of each tool\n#Gradle doesn't run without settings.gradle file, so create one\nRUN touch settings.gradle\nRUN gradle wrapper\nRUN mvn -N io.takari:maven:wrapper\n\n# Creating final javaenv image which will include all required\n# dependencies to build and compile java chaincode\nFROM adoptopenjdk/openjdk11:jdk-11.0.4_11-alpine\nRUN apk add --no-cache bash\n\nSHELL [\"/bin/bash\", \"-c\"]\n\n# Copy setup scripts, and the cached dependeices\nCOPY --from=dependencies /root/chaincode-java /root/chaincode-java\nCOPY --from=dependencies /root/.m2 /root/.m2\n\nRUN mkdir -p /chaincode/input\nRUN mkdir -p /chaincode/output\n\nWORKDIR /root/chaincode-java\n"
}