{
  "startTime": 1674254354814,
  "endTime": 1674254355717,
  "originalSmells": [
    {
      "rule": "wgetUseHttpsUrl",
      "position": {
        "lineStart": 38,
        "lineEnd": 38,
        "columnStart": 2,
        "columnEnd": 119
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 31,
        "lineEnd": 31,
        "columnStart": 2,
        "columnEnd": 35
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 39,
        "lineEnd": 39,
        "columnStart": 2,
        "columnEnd": 36
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM rockylinux:latest\n\nENV   HAPROXY_MJR_VERSION=2.4 \\\n  HAPROXY_VERSION=2.4.16 \\\n  HAPROXY_CONFIG='/etc/haproxy/haproxy.cfg' \\\n  HAPROXY_ADDITIONAL_CONFIG='' \\\n  HAPROXY_PRE_RESTART_CMD='' \\\n  HAPROXY_POST_RESTART_CMD='' \\\n  OPENSSL_VERSION=3.0.2\n\nRUN \\\n  yum install -y epel-release && \\\n  yum update -y && \\\n  `# Install build tools. Note: perl needed to compile openssl...` \\\n  yum install -y \\\n    inotify-tools \\\n    wget \\\n    tar \\\n    gzip \\\n    make \\\n    gcc \\\n    perl \\\n    pcre-devel \\\n    zlib-devel \\\n    iptables \\\n    socat \\\n    nc \\\n    telnet \\\n    mtr && \\\n  `# Install newest openssl...` \\\n  wget -O /tmp/openssl.tgz https://www.openssl.org/source/openssl-${OPENSSL_VERSION}.tar.gz && \\\n  tar -zxf /tmp/openssl.tgz -C /tmp && \\\n  cd /tmp/openssl-* && \\\n  ./config \\\n    --openssldir=/etc/pki/tls \\\n    no-shared zlib-dynamic && \\\n  make -j$(getconf _NPROCESSORS_ONLN) V= && make install_sw && \\\n  cd && rm -rf /tmp/openssl* && \\\n  wget -O /tmp/haproxy.tgz https://www.haproxy.org/download/${HAPROXY_MJR_VERSION}/src/haproxy-${HAPROXY_VERSION}.tar.gz && \\\n  tar -zxvf /tmp/haproxy.tgz -C /tmp && \\\n  cd /tmp/haproxy-* && \\\n  make \\\n  -j$(getconf _NPROCESSORS_ONLN) V= \\\n  TARGET=linux-glibc \\\n  USE_LINUX_TPROXY=1 \\\n  USE_ZLIB=1 \\\n  USE_REGPARM=1 \\\n  USE_PCRE=1 \\\n  USE_PCRE_JIT=1 \\\n  USE_OPENSSL=1 \\\n  ADDLIB=-ldl \\\n  ADDLIB=-lpthread && make install && \\\n  rm -rf /tmp/haproxy* && \\\n  mkdir -p /var/lib/haproxy && \\\n  groupadd haproxy && adduser haproxy -g haproxy && chown -R haproxy:haproxy /var/lib/haproxy && \\\n  openssl genrsa -out /etc/pki/tls/dummy.key 2048 && \\\n  openssl req -new -key /etc/pki/tls/dummy.key -out /etc/pki/tls/dummy.csr -subj \"/C=GB/L=London/O=Company Ltd/CN=haproxy\" && \\\n  openssl x509 -req -days 3650 -in /etc/pki/tls/dummy.csr -signkey /etc/pki/tls/dummy.key -out /etc/pki/tls/dummy.crt && \\\n  cat /etc/pki/tls/dummy.crt /etc/pki/tls/dummy.key > /etc/pki/tls/dummy.pem && \\\n  yum remove -y make gcc pcre-devel && \\\n  yum clean all && rm -rf /var/cache/yum && rm /tmp/openssl.tgz\n\nCOPY container-files /\n\nENTRYPOINT [\"/bootstrap.sh\"]\n"
}