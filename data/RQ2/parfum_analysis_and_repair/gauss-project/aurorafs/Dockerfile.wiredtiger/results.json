{
  "startTime": 1674215448942,
  "endTime": 1674215449742,
  "originalSmells": [
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 10,
        "lineEnd": 10,
        "columnStart": 4,
        "columnEnd": 34
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 11,
        "lineEnd": 11,
        "columnStart": 4,
        "columnEnd": 67
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 10,
        "lineEnd": 10,
        "columnStart": 4,
        "columnEnd": 34
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 11,
        "lineEnd": 11,
        "columnStart": 4,
        "columnEnd": 67
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 10,
        "lineEnd": 10,
        "columnStart": 4,
        "columnEnd": 34
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 11,
        "lineEnd": 11,
        "columnStart": 4,
        "columnEnd": 67
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 10,
        "lineEnd": 10,
        "columnStart": 4,
        "columnEnd": 58
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 11,
        "lineEnd": 11,
        "columnStart": 4,
        "columnEnd": 91
      }
    }
  ],
  "repairedDockerfile": "FROM golang:1.17 AS build\n\nWORKDIR /src\n# enable modules caching in separate layer\nCOPY go.mod go.sum ./\nRUN go env -w GOPROXY=https://goproxy.cn,direct\nRUN go mod download\nCOPY . ./\n\nRUN apt update\nRUN apt install --no-install-recommends -y build-essential && rm -rf /var/lib/apt/lists/*;\nRUN apt install --no-install-recommends -y cmake autoconf automake libtool pkg-config rsync && rm -rf /var/lib/apt/lists/*;\nRUN make binary LIB_INSTALL_DIR=/src/lib IS_DOCKER=true\n\nFROM debian:11.2-slim\n\nENV DEBIAN_FRONTEND noninteractive\n\nRUN apt-get update && apt-get install -y --no-install-recommends \\\n        ca-certificates; \\\n    apt-get clean; \\\n    rm -rf /var/lib/apt/lists/*; \\\n    groupadd -r aurora --gid 999; \\\n    useradd -r -g aurora --uid 999 --no-log-init -m aurora;\n\n# make sure mounted volumes have correct permissions\nRUN mkdir -p /home/aurora/.aurora && chown 999:999 /home/aurora/.aurora\n\nCOPY --from=build /src/lib/include/* /usr/local/include\nCOPY --from=build /src/lib/lib/* /usr/local/lib\nCOPY --from=build /src/dist/aurora /usr/local/bin/aurora\nRUN ldconfig\n\nEXPOSE 1633 1634 1635\nUSER aurora\nWORKDIR /home/aurora\nVOLUME /home/aurora/.aurora\n\nENTRYPOINT [\"aurora\"]\n"
}