{
  "startTime": 1674255798296,
  "endTime": 1674255799939,
  "originalSmells": [
    {
      "rule": "npmCacheCleanAfterInstall",
      "position": {
        "lineStart": 76,
        "lineEnd": 76,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "npmCacheCleanAfterInstall",
      "position": {
        "lineStart": 77,
        "lineEnd": 77,
        "columnStart": 4,
        "columnEnd": 26
      }
    },
    {
      "rule": "npmCacheCleanAfterInstall",
      "position": {
        "lineStart": 106,
        "lineEnd": 106,
        "columnStart": 4,
        "columnEnd": 15
      }
    },
    {
      "rule": "npmCacheCleanAfterInstall",
      "position": {
        "lineStart": 117,
        "lineEnd": 117,
        "columnStart": 4,
        "columnEnd": 15
      }
    },
    {
      "rule": "npmCacheCleanAfterInstall",
      "position": {
        "lineStart": 136,
        "lineEnd": 136,
        "columnStart": 21,
        "columnEnd": 32
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 137,
        "lineEnd": 137,
        "columnStart": 21,
        "columnEnd": 74
      }
    },
    {
      "rule": "configureShouldUseBuildFlag",
      "position": {
        "lineStart": 105,
        "lineEnd": 105,
        "columnStart": 4,
        "columnEnd": 15
      }
    },
    {
      "rule": "configureShouldUseBuildFlag",
      "position": {
        "lineStart": 116,
        "lineEnd": 116,
        "columnStart": 4,
        "columnEnd": 15
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 89,
        "lineEnd": 89,
        "columnStart": 4,
        "columnEnd": 39
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 13,
        "lineEnd": 15,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 23,
        "lineEnd": 73,
        "columnStart": 4,
        "columnEnd": 7
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 80,
        "lineEnd": 80,
        "columnStart": 4,
        "columnEnd": 58
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 81,
        "lineEnd": 81,
        "columnStart": 4,
        "columnEnd": 62
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 82,
        "lineEnd": 82,
        "columnStart": 4,
        "columnEnd": 47
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 83,
        "lineEnd": 83,
        "columnStart": 4,
        "columnEnd": 56
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 84,
        "lineEnd": 84,
        "columnStart": 4,
        "columnEnd": 41
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 80,
        "lineEnd": 80,
        "columnStart": 4,
        "columnEnd": 58
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 81,
        "lineEnd": 81,
        "columnStart": 4,
        "columnEnd": 62
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 82,
        "lineEnd": 82,
        "columnStart": 4,
        "columnEnd": 47
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 83,
        "lineEnd": 83,
        "columnStart": 4,
        "columnEnd": 56
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 84,
        "lineEnd": 84,
        "columnStart": 4,
        "columnEnd": 41
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 13,
        "lineEnd": 15,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 23,
        "lineEnd": 73,
        "columnStart": 4,
        "columnEnd": 7
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 80,
        "lineEnd": 80,
        "columnStart": 4,
        "columnEnd": 58
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 81,
        "lineEnd": 81,
        "columnStart": 4,
        "columnEnd": 62
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 82,
        "lineEnd": 82,
        "columnStart": 4,
        "columnEnd": 47
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 83,
        "lineEnd": 83,
        "columnStart": 4,
        "columnEnd": 56
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 84,
        "lineEnd": 84,
        "columnStart": 4,
        "columnEnd": 41
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 80,
        "lineEnd": 80,
        "columnStart": 4,
        "columnEnd": 82
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 81,
        "lineEnd": 81,
        "columnStart": 4,
        "columnEnd": 86
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 82,
        "lineEnd": 82,
        "columnStart": 4,
        "columnEnd": 71
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 83,
        "lineEnd": 83,
        "columnStart": 4,
        "columnEnd": 80
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 84,
        "lineEnd": 84,
        "columnStart": 4,
        "columnEnd": 65
      }
    }
  ],
  "repairedDockerfile": "FROM ubuntu:12.04\nMAINTAINER sabalah21@gmail.com\n\n# Configuring locales\nENV DEBIAN_FRONTEND noninteractive\nRUN dpkg-reconfigure locales && \\\n      locale-gen en_US.UTF-8 && \\\n      update-locale LANG=en_US.UTF-8\nENV LANG en_US.UTF-8\nENV LANGUAGE en_US:en\nENV LC_ALL en_US.UTF-8\n\nRUN apt-get update && \\\n    apt-get install --no-install-recommends -y \\\n    software-properties-common \\\n    python-software-properties && rm -rf /var/lib/apt/lists/*;\n\nRUN add-apt-repository ppa:cartodb/postgresql-9.3 && \\\n    add-apt-repository ppa:cartodb/gis && \\\n    add-apt-repository ppa:cartodb/redis && \\\n    add-apt-repository ppa:cartodb/nodejs-010\n\nRUN apt-get update && \\\n    apt-get install --no-install-recommends -y \\\n    autoconf \\\n    automake \\\n    build-essential \\\n    bison \\\n    checkinstall \\\n    ca-certificates \\\n    git-core \\\n    git \\\n    imagemagick \\\n    libjson0 \\\n    libtool \\\n    libreadline6 \\\n    libyaml-dev \\\n    libsqlite3-dev \\\n    libxml2-dev \\\n    libxslt-dev \\\n    libssl-dev \\\n    libpq-dev \\\n    libffi-dev \\\n    libgdbm-dev \\\n    libreadline6-dev \\\n    libcairo2-dev \\\n    libjpeg8-dev \\\n    libpango1.0-dev \\\n    libgif-dev \\\n    libgmp-dev \\\n    libicu-dev \\\n    ncurses-dev \\\n    nodejs \\\n    openssl \\\n    postgresql-client \\\n    pgtune \\\n    pkg-config \\\n    python-simplejson \\\n    python2.7-dev \\\n    python-setuptools \\\n    python-argparse \\\n    python-chardet \\\n    python-gdal \\\n    redis-server \\\n    syslinux \\\n    varnish \\\n    vim \\\n    unp \\\n    unzip \\\n    wget \\\n    zlib1g \\\n    zlib1g-dev \\\n    subversion \\\n    zip && rm -rf /var/lib/apt/lists/*;\n\n# Install cartodb requested npm version\nRUN npm install -g npm@2.14.16 && npm cache clean --force;\nRUN npm install -g forever && npm cache clean --force;\n\n# GIS dependencies\nRUN apt-get install --no-install-recommends -y proj proj-bin proj-data libproj-dev && rm -rf /var/lib/apt/lists/*;\nRUN apt-get install --no-install-recommends -y libjson0 libjson0-dev python-simplejson && rm -rf /var/lib/apt/lists/*;\nRUN apt-get install --no-install-recommends -y libgeos-c1v5 libgeos-dev && rm -rf /var/lib/apt/lists/*;\nRUN apt-get install --no-install-recommends -y gdal-bin libgdal1-dev libgdal-dev && rm -rf /var/lib/apt/lists/*;\nRUN apt-get install --no-install-recommends -y gdal2.1-static-bin && rm -rf /var/lib/apt/lists/*;\n\n# Install Ruby\nRUN cd /tmp && \\\n    wget -O ruby-install-0.5.0.tar.gz https://github.com/postmodern/ruby-install/archive/v0.5.0.tar.gz && \\\n    tar -xzvf ruby-install-0.5.0.tar.gz && \\\n    cd ruby-install-0.5.0/ && \\\n    make install && \\\n    ruby-install ruby 2.2.3 && rm ruby-install-0.5.0.tar.gz\n\n# Set ruby && gdal enviorment variables\nENV PATH $PATH:/opt/rubies/ruby-2.2.3/bin\nENV CPLUS_INCLUDE_PATH $CPLUS_INCLUDE_PATH:/usr/include/gdal\nENV C_INCLUDE_PATH $C_INCLUDE_PATH:/usr/include/gdal\nENV PATH $PATH:/usr/include/gdal\nENV GDAL_DATA=/usr/share/gdal/2.1\n\n# Install SQL API\nRUN git clone git://github.com/CartoDB/CartoDB-SQL-API.git && \\\n    cd CartoDB-SQL-API && \\\n    git checkout master && \\\n    ./configure --build=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\" && \\\n    npm install && \\\n    mv config/environments/development.js.example config/environments/development.js && \\\n    mv config/environments/production.js.example config/environments/production.js && \\\n    mv config/environments/staging.js.example config/environments/staging.js && \\\n    mv config/environments/test.js.example config/environments/test.js && npm cache clean --force;\n\n# Install Windshaft\nRUN git clone git://github.com/CartoDB/Windshaft-cartodb.git && \\\n    cd Windshaft-cartodb && \\\n    git checkout master && \\\n    ./configure --build=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\" && \\\n    npm install && \\\n    mkdir logs && \\\n    cp config/environments/development.js.example config/environments/development.js && \\\n    cp config/environments/production.js.example config/environments/production.js && \\\n    cp config/environments/staging.js.example config/environments/staging.js && \\\n    cp config/environments/test.js.example config/environments/test.js && npm cache clean --force;\n\n# Install gems\nRUN gem install bundler\nRUN gem install compass\n\n# Install pip\nRUN wget -O /tmp/get-pip.py https://bootstrap.pypa.io/get-pip.py && \\\n    python /tmp/get-pip.py\n\n# Install Carto App\nRUN git clone --recursive https://github.com/CartoDB/cartodb20.git\nRUN cd /cartodb20 && git checkout master\nRUN cd /cartodb20 && RAILS_ENV=development bundle install\nRUN cd /cartodb20 && npm install && npm cache clean --force;\nRUN cd /cartodb20 && pip install --no-cache-dir --no-use-wheel -r python_requirements.txt\n\nENV PATH $PATH:/cartodb20/node_modules/grunt-cli/bin\n\nRUN cd /cartodb20 && \\\n    bundle install && \\\n    bundle exec grunt --environment development && \\\n    cp config/app_config.yml.sample config/app_config.yml && \\\n    cp config/database.yml.sample config/database.yml && \\\n    mkdir log\n\nCMD [\"/bin/bash\"]\n"
}