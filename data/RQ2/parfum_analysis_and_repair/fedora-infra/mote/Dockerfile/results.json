{
  "startTime": 1674249795559,
  "endTime": 1674249796302,
  "originalSmells": [
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 4,
        "lineEnd": 4,
        "columnStart": 4,
        "columnEnd": 51
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 16,
        "lineEnd": 16,
        "columnStart": 4,
        "columnEnd": 36
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM registry.fedoraproject.org/fedora-minimal:36 as base\nFROM base as builder\nRUN microdnf install -y python3-pip && microdnf clean all\nWORKDIR /tmp\nRUN pip3 install --no-cache-dir --disable-pip-version-check poetry\nCOPY poetry.lock pyproject.toml .\nRUN poetry export --without-hashes --no-interaction --no-ansi -o requirements.txt\n\nFROM base as runtime\nRUN microdnf update -y && microdnf install -y python3-pip util-linux tar gzip && microdnf clean all\nADD https://github.com/fedora-infra/fedora-messaging/raw/stable/configs/cacert.pem /etc/fedora-messaging/\nADD https://github.com/fedora-infra/fedora-messaging/raw/stable/configs/fedora-cert.pem /etc/fedora-messaging/\nADD https://github.com/fedora-infra/fedora-messaging/raw/stable/configs/fedora-key.pem /etc/fedora-messaging/\nRUN chmod 640 /etc/fedora-messaging/*.pem\nWORKDIR /opt/app\nCOPY --from=builder /tmp/requirements.txt .\nRUN pip3 install --no-cache-dir -r requirements.txt\nCOPY mote mote\nCOPY fedora-messaging.toml /etc/fedora-messaging/config.toml\nRUN sed -i \"s/[0-9a-f]\\{8\\}-[0-9a-f]\\{4\\}-[0-9a-f]\\{4\\}-[0-9a-f]\\{4\\}-[0-9a-f]\\{12\\}/$(uuidgen)/g\" \\\n    /etc/fedora-messaging/config.toml\nEXPOSE 9696/tcp\nENTRYPOINT [\"gunicorn\"]\nCMD [\"--bind\", \"0.0.0.0:9696\", \"-k\", \"geventwebsocket.gunicorn.workers.GeventWebSocketWorker\", \"-w1\", \"mote.main:main\"]\n"
}