{
  "startTime": 1674217704131,
  "endTime": 1674217705178,
  "originalSmells": [
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 41,
        "lineEnd": 47,
        "columnStart": 4,
        "columnEnd": 73
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "ARG ENV_IMAGE=nektarpp/nektar-env:latest\nFROM $ENV_IMAGE AS build\n\nLABEL maintainer=\"Nektar++ Development Team <nektar-users@imperial.ac.uk>\"\n\nCOPY --chown=nektar:nektar . /home/nektar\n\nARG BUILD_DOCS=ON\nARG BUILD_DEMOS=OFF\nARG BUILD_SOLVERS=ON\nARG INSTALL_PREFIX=/usr/local\n\nRUN mkdir build && cd build &&                                  \\\n    cmake                                                       \\\n    -DNEKTAR_BUILD_DEMOS=${BUILD_DEMOS}                         \\\n    -DNEKTAR_BUILD_DOC=${BUILD_DOCS}                            \\\n    -DNEKTAR_BUILD_TESTS=OFF                                    \\\n    -DNEKTAR_BUILD_UNIT_TESTS=OFF                               \\\n    -DNEKTAR_BUILD_SOLVERS=${BUILD_SOLVERS}                     \\\n    -DNEKTAR_BUILD_PYTHON=ON                                    \\\n    -DCMAKE_INSTALL_PREFIX=${INSTALL_PREFIX}                    \\\n    -DNEKTAR_USE_MESHGEN=ON                                     \\\n    -DNEKTAR_USE_MPI=ON                                         \\\n    -DNEKTAR_USE_ARPACK=ON                                      \\\n    -DNEKTAR_USE_FFTW=ON                                        \\\n    -DNEKTAR_USE_HDF5=ON                                        \\\n    -DNEKTAR_USE_CCM=ON                                         \\\n    .. &&                                                       \\\n    make -j$(nproc) &&                                          \\\n    make -j$(nproc) user-guide-pdf developer-guide-pdf          \\\n        tutorials-pdf doc\n\nUSER root\nRUN cd build && make install && make nekpy-install-system && cd ..\nUSER nektar\n\nFROM debian:buster-slim\nRUN DEBIAN_RELEASE=buster && \\\n    echo \"deb http://deb.debian.org/debian ${DEBIAN_RELEASE} non-free\" > \\\n        /etc/apt/sources.list.d/debian-non-free.list && \\\n    apt-get update && \\\n    apt-get install --no-install-recommends -y \\\n    openssh-client nano vim binutils \\\n    libboost-thread1.67 libboost-iostreams1.67 libboost-filesystem1.67 libboost-system1.67 \\\n    libboost-program-options1.67 libboost-python1.67 libboost-regex1.67 libboost-numpy1.67 \\\n    libfftw3-3 libhdf5-103 libhdf5-openmpi-103 liblapack3 liboce-foundation11 \\\n    liboce-modeling11 liboce-ocaf11 libtet1.5 libtriangle-1.6 python-numpy \\\n    openmpi-bin libpetsc3.10 libptscotch-6.0 libarpack2 libtinyxml2.6.2v5 && \\\n    apt-get clean && rm -rf /var/lib/apt/lists/*\nARG INSTALL_PREFIX=/usr/local\nCOPY --from=build ${INSTALL_PREFIX} ${INSTALL_PREFIX}\n\n# Set up entrypoint for copying test files.\nCOPY docker/nektar/docker-entrypoint.sh /usr/local/bin/docker-entrypoint.sh\nRUN chmod +x /usr/local/bin/docker-entrypoint.sh && \\\n    ln -s /usr/local/bin/docker-entrypoint.sh /\nENTRYPOINT [\"/usr/local/bin/docker-entrypoint.sh\"]\n\nRUN groupadd nektar && useradd -m -g nektar nektar\nUSER nektar\nWORKDIR /home/nektar\nCMD [\"/bin/bash\"]\n"
}