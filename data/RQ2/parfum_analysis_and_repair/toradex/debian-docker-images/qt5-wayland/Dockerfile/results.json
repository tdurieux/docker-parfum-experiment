{
  "startTime": 1674249687398,
  "endTime": 1674249688693,
  "originalSmells": [
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 39,
        "lineEnd": 39,
        "columnStart": 11,
        "columnEnd": 34
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 41,
        "lineEnd": 41,
        "columnStart": 11,
        "columnEnd": 74
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "ARG IMAGE_ARCH=linux/arm\n# For arm64v8 use:\n# ARG IMAGE_ARCH=linux/arm64\nARG BASE_NAME=wayland-base\n# For arm64v8 with Vivante use:\n# ARG BASE_NAME=wayland-base-vivante\nARG IMAGE_TAG=2\nARG DOCKER_REGISTRY=torizon\nFROM --platform=$IMAGE_ARCH $DOCKER_REGISTRY/$BASE_NAME:$IMAGE_TAG AS base\n\nCOPY kms-setup.sh /usr/bin/kms-setup.sh\n\nRUN apt-get -y update && apt-get install -y --no-install-recommends \\\n    apt-utils \\\n    && apt-get -y upgrade \\\n    && apt-get clean && apt-get autoremove && rm -rf /var/lib/apt/lists/*\n\n# Install libqt5gui5-gles before libqt5opengl5 which also has an alternate dependency on libqt5gui5(non-gles)\nRUN apt-get -y update  && apt-get install -y --no-install-recommends libqt5gui5-gles \\\n    && apt-get clean && apt-get autoremove && rm -rf /var/lib/apt/lists/*\n\n# Install libqt5opengl5.\n# Under Bullesyse, libqt5opengl5:arm64 is currently at version 5.14.2+dfsg-6 and contains a redundant dependency for libqt5gui5 (>= 5.1.0):\n#\n# $ apt-cache show libqt5opengl5 | grep ^Depends:\n# Depends: libc6 (>= 2.17), libqt5core5a (>= 5.14.1), libqt5gui5 (>= 5.1.0), libqt5gui5 (>= 5.12.5) | libqt5gui5-gles (>= 5.12.5), libqt5widgets5 (>= 5.9.0~beta), libstdc++6 (>= 5), qtbase-abi-5-14-2\n#\n# This forbids installing qtbase5-examples with libqt5gui5-gles.\n# Workaround the issue by mangling the package file and remove the leftover dependency.\nRUN apt-get -y update \\\n    && if test \"$(uname -m)\" = 'armv7l' ; \\\n    then \\\n        apt-get -y install --no-install-recommends libqt5opengl5 ; \\\n    else \\\n        apt-get -y install --no-install-recommends binutils xz-utils \\\n        && WORK_DIR=$(mktemp -d) \\\n        && cd $WORK_DIR \\\n        && apt-get download libqt5opengl5 \\\n        && ar x libqt5opengl5_*_arm64.deb \\\n        && tar -xJf control.tar.xz \\\n        && sed -i '/^Depends:/s/, libqt5gui5 (>= 5.1.0)//' control \\\n        && tar -cJf control.tar.xz control md5sums shlibs symbols triggers \\\n        && ar rcs libqt5opengl5.deb debian-binary control.tar.xz data.tar.xz \\\n        && apt-get -y install --no-install-recommends ./libqt5opengl5.deb \\\n        && cd ~ \\\n        && rm -rf $WORK_DIR \\\n        && apt-get -y remove binutils xz-utils \\\n        && apt-mark hold libqt5opengl5 ; rm control.tar.xz \\\n    fi \\\n    && apt-get clean && apt-get autoremove && rm -rf /var/lib/apt/lists/*\n\n# Install remaining dependencies required to run qtbase and qtdeclarative examples\nRUN apt-get -y update && apt-get install -y --no-install-recommends \\\n        libqt5quick5-gles \\\n        libqt5quickparticles5-gles \\\n        libqt5concurrent5 \\\n        libqt5dbus5 \\\n        libqt5network5 \\\n        libqt5printsupport5 \\\n        libqt5sql5 \\\n        libqt5test5 \\\n        libqt5widgets5 \\\n        libqt5xml5 \\\n        libqt5qml5 \\\n        libqt5quicktest5 \\\n        libqt5quickwidgets5 \\\n        qml-module-qt-labs-qmlmodels \\\n        qml-module-qtqml-models2 \\\n        qml-module-qtquick-layouts \\\n        qml-module-qtquick-localstorage \\\n        qml-module-qtquick-particles2 \\\n        qml-module-qtquick-shapes \\\n        qml-module-qttest \\\n    && apt-get clean && apt-get autoremove && rm -rf /var/lib/apt/lists/*\n\n# Install Wayland Qt module\nRUN apt-get -y update && apt-get install -y --no-install-recommends \\\n    qtwayland5 \\\n    && apt-get clean && apt-get autoremove && rm -rf /var/lib/apt/lists/*\n\nENV QT_QPA_PLATFORM=\"wayland\"\n\n# EGLFS configuration\nENV QT_QPA_EGLFS_INTEGRATION=\"eglfs_kms\"\nENV QT_QPA_EGLFS_KMS_ATOMIC=\"1\"\nENV QT_QPA_EGLFS_KMS_CONFIG=\"/etc/kms.conf\"\n"
}