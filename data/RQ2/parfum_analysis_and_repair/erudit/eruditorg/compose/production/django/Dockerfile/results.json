{
  "startTime": 1674251348582,
  "endTime": 1674251349304,
  "originalSmells": [
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 19,
        "lineEnd": 19,
        "columnStart": 4,
        "columnEnd": 32
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 20,
        "lineEnd": 20,
        "columnStart": 4,
        "columnEnd": 35
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 18,
        "lineEnd": 18,
        "columnStart": 4,
        "columnEnd": 104
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 22,
        "lineEnd": 22,
        "columnStart": 4,
        "columnEnd": 30
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM node:14-buster as client-builder\n\nWORKDIR /app\nCOPY package* /app/\nCOPY tools/static/* /app/tools/static/\nRUN npm ci && npm cache clean --force\nCOPY .babelrc.json /app/.babelrc.json\nCOPY eruditorg/static /app/eruditorg/static/\nRUN npm run gulp -- build --production\n\nFROM python:3.6-slim-buster\n\n# TODO: add amiri-fonts\nWORKDIR /opt/eruditorg\nCOPY requirements.txt /opt/eruditorg/requirements.txt\n\nARG PIP_EXTRA_INDEX_URL\nRUN apt update && \\\n    apt install --no-install-recommends -y git libjpeg-dev libxslt-dev libffi-dev gcc libcairo2-dev libmariadbclient-dev locales && \\\n    pip install --no-cache-dir wheel setuptools && \\\n    pip install --no-cache-dir -r requirements.txt && \\\n    apt purge -y --auto-remove git libjpeg-dev libxslt-dev libffi-dev gcc libcairo2-dev libmariadbclient-dev && \\\n    apt install --no-install-recommends -y libmariadb3 && \\\n    rm -rf /var/lib/apt/lists/* && \\\n    rm -rf /root/.cache\n\nRUN addgroup --system django \\\n    && adduser -u 8001 --system --ingroup django django\n\nRUN sed -i -e 's/# fr_CA.UTF-8 UTF-8/fr_CA.UTF-8 UTF-8/' /etc/locale.gen && \\\n    dpkg-reconfigure --frontend=noninteractive locales && \\\n    update-locale LANG=fr_CA.UTF-8\nENV LANG fr_CA.UTF-8\nENV TZ=America/New_York\n\nCOPY . /opt/eruditorg\nRUN mkdir /static\nRUN chown django:django /opt/eruditorg -R\nRUN chown django:django /static\nCOPY --from=client-builder --chown=django:django /app/eruditorg/static/build/ /opt/eruditorg/eruditorg/static/build/\nCOPY ./compose/production/django/start /start\nRUN chmod +x /start\nRUN chown django /start\nUSER django\nEXPOSE 8000\nCMD /start\n"
}