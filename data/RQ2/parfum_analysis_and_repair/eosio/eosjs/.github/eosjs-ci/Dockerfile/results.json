{
  "startTime": 1674255086980,
  "endTime": 1674255088358,
  "originalSmells": [
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 10,
        "lineEnd": 10,
        "columnStart": 4,
        "columnEnd": 32
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 10,
        "lineEnd": 10,
        "columnStart": 4,
        "columnEnd": 32
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "### Test:\n#### docker build --tag eosjs-ci:test ./.github/eosjs-ci\n#### docker run --publish 8888:8888 eosjs-ci:test\n\nARG EOSBRANCH=develop\nARG CDTBRANCH=develop\nFROM eosio/eosio.cdt:${CDTBRANCH} as contracts\nARG CDTBRANCH\nWORKDIR /root\nRUN apt-get update \\\n && apt-get install --no-install-recommends -yq curl git && rm -rf /var/lib/apt/lists/*;\n\nRUN if [ \"$CDTBRANCH\" = \"release_1.7.x\" ]; then \\\n git clone https://github.com/EOSIO/tropical-example-web-app \\\n && mkdir -p /root/contracts/eosio.bios_v1.8.3 && mv ./tropical-example-web-app/eosio/contracts/eosio.bios-v1.8.3/* /root/contracts/eosio.bios_v1.8.3/ \\\n\n && git clone https://github.com/EOSIO/eos \\\n && cd eos \\\n && git checkout v2.0.12 \\\n && mkdir -p /root/contracts/eosio.bios/ && mv ./unittests/contracts/eosio.bios/* /root/contracts/eosio.bios/ \\\n && mkdir -p /root/contracts/eosio.system/ && mv ./unittests/contracts/eosio.system/* /root/contracts/eosio.system/ \\\n && mkdir -p /root/contracts/eosio.msig/ && mv ./unittests/contracts/eosio.msig/* /root/contracts/eosio.msig/ \\\n && mkdir -p /root/contracts/eosio.token/ && mv ./unittests/contracts/eosio.token/* /root/contracts/eosio.token/ \\\n ; fi\n\nRUN if [ \"$CDTBRANCH\" = \"release_1.8.x\" ] || [ \"$CDTBRANCH\" = \"develop\" ]; then \\\n git clone https://github.com/EOSIO/eos \\\n && cd eos \\\n && git checkout develop \\\n && mkdir -p /root/contracts/eosio.bios/ && mv ./contracts/contracts/eosio.bios/bin/* /root/contracts/eosio.bios/ \\\n && mkdir -p /root/contracts/eosio.boot/ && mv ./contracts/contracts/eosio.boot/bin/* /root/contracts/eosio.boot/ \\\n && mkdir -p /root/contracts/eosio.system/ && mv ./unittests/contracts/eosio.system/* /root/contracts/eosio.system/ \\\n && mkdir -p /root/contracts/eosio.msig/ && mv ./unittests/contracts/eosio.msig/* /root/contracts/eosio.msig/ \\\n && mkdir -p /root/contracts/eosio.token/ && mv ./unittests/contracts/eosio.token/* /root/contracts/eosio.token/ \\\n && mkdir -p /root/contracts/nested_container_kv/ && mv ./unittests/test-contracts/nested_container_kv/* /root/contracts/nested_container_kv \\\n && mkdir -p /root/contracts/nested_container_multi_index/ && mv ./unittests/test-contracts/nested_container_multi_index/* /root/contracts/nested_container_multi_index \\\n ; fi\n\nRUN if [ \"$CDTBRANCH\" = \"release_1.8.x\" ] || [ \"$CDTBRANCH\" = \"develop\" ]; then \\\n git clone https://github.com/EOSIO/eosio.cdt \\\n && cd eosio.cdt \\\n && git checkout develop \\\n && mkdir -p build/read_only_query_tests/ \\\n && eosio-cpp -abigen ./tests/unit/test_contracts/read_only_query_tests.cpp -o ./build/read_only_query_tests/read_only_query_tests.wasm \\\n && mkdir -p /root/contracts/read_only_query_tests/ && mv ./build/read_only_query_tests/* /root/contracts/read_only_query_tests/ \\\n ; fi\n\nRUN if [ \"$CDTBRANCH\" = \"release_1.8.x\" ] || [ \"$CDTBRANCH\" = \"develop\" ]; then \\\n git clone https://github.com/EOSIO/key-value-example-app.git \\\n && cd key-value-example-app \\\n && eosio-cpp -abigen ./contracts/kv_todo/src/kv_todo.cpp -o ./contracts/kv_todo/build/kv_todo.wasm -R ./contracts/kv_todo/ricardian/ -I ./contracts/kv_todo/include/ \\\n && mkdir -p /root/contracts/kv_todo/ && mv ./contracts/kv_todo/build/* /root/contracts/kv_todo/ \\\n ; fi\n\nRUN if [ \"$CDTBRANCH\" = \"release_1.8.x\" ] || [ \"$CDTBRANCH\" = \"develop\" ]; then \\\n git clone https://github.com/EOSIO/return-values-example-app.git \\\n && cd return-values-example-app \\\n && eosio-cpp -abigen ./contracts/action_return_value/src/action_return_value.cpp -o ./contracts/action_return_value/build/action_return_value.wasm -R ./contracts/action_return_value/ricardian/ \\\n && mkdir -p /root/contracts/action_return_value/ && mv ./contracts/action_return_value/build/* /root/contracts/action_return_value/ \\\n ; fi\n\nRUN mkdir cfhello\nCOPY ./contracts/cfhello.cpp /root/cfhello\nRUN cd cfhello \\\n && mkdir build \\\n && eosio-cpp -abigen ./cfhello.cpp -o ./build/cfhello.wasm \\\n && mkdir -p /root/contracts/cfhello/ && mv ./build/* /root/contracts/cfhello/\n\nFROM eosio/eosio:${EOSBRANCH}\nARG EOSBRANCH\nENTRYPOINT [\"nodeos\", \"--data-dir\", \"/root/.local/share\", \"-e\", \"-p\", \"eosio\", \"--replay-blockchain\", \"--plugin\", \"eosio::producer_plugin\", \"--plugin\", \"eosio::producer_api_plugin\", \"--plugin\", \"eosio::chain_api_plugin\", \"--plugin\", \"eosio::trace_api_plugin\", \"--trace-no-abis\", \"--plugin\", \"eosio::db_size_api_plugin\", \"--plugin\", \"eosio::http_plugin\", \"--http-server-address=0.0.0.0:8888\", \"--access-control-allow-origin=*\", \"--contracts-console\", \"--http-validate-host=false\", \"--enable-account-queries=true\", \"--verbose-http-errors\", \"--max-transaction-time=100\"]\nWORKDIR /root\nRUN mkdir -p \"/opt/eosio/bin/contracts\"\nCOPY --from=contracts /root/contracts /opt/eosio/bin/contracts/\nCOPY ./ /opt/eosio/bin/\n\nRUN mkdir -p \"/opt/eosio/bin/config-dir\"\nRUN /bin/bash /opt/eosio/bin/scripts/deploy_contracts.sh \"$EOSBRANCH\"\n"
}