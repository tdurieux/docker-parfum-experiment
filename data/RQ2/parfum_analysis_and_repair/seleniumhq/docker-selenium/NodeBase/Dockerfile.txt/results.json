{
  "startTime": 1674220582358,
  "endTime": 1674220586874,
  "originalSmells": [
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 6,
        "lineEnd": 8,
        "columnStart": 5,
        "columnEnd": 14
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 36,
        "lineEnd": 37,
        "columnStart": 5,
        "columnEnd": 8
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 45,
        "lineEnd": 46,
        "columnStart": 5,
        "columnEnd": 11
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "USER root\n\n#==============\n# Xvfb\n#==============\nRUN apt-get update -qqy \\\n  && apt-get -qqy --no-install-recommends install \\\n    xvfb \\\n    pulseaudio \\\n  && rm -rf /var/lib/apt/lists/* /var/cache/apt/*\n\n#==============================\n# Locale and encoding settings\n#==============================\nENV LANG_WHICH en\nENV LANG_WHERE US\nENV ENCODING UTF-8\nENV LANGUAGE ${LANG_WHICH}_${LANG_WHERE}.${ENCODING}\nENV LANG ${LANGUAGE}\n# Layer size: small: ~9 MB\n# Layer size: small: ~9 MB MB (with --no-install-recommends)\nRUN apt-get -qqy update \\\n  && apt-get -qqy --no-install-recommends install \\\n    language-pack-en \\\n    tzdata \\\n    locales \\\n  && locale-gen ${LANGUAGE} \\\n  && dpkg-reconfigure --frontend noninteractive locales \\\n  && apt-get -qyy autoremove \\\n  && rm -rf /var/lib/apt/lists/* \\\n  && apt-get -qyy clean\n\n#=====\n# VNC\n#=====\nRUN apt-get update -qqy \\\n  && apt-get -qqy --no-install-recommends install \\\n  x11vnc \\\n  && rm -rf /var/lib/apt/lists/* /var/cache/apt/*\n\n#=========\n# fluxbox\n# A fast, lightweight and responsive window manager\n#=========\nRUN apt-get update -qqy \\\n  && apt-get -qqy --no-install-recommends install \\\n    fluxbox \\\n  && rm -rf /var/lib/apt/lists/* /var/cache/apt/*\n\n#================\n# Font libraries\n#================\n# libfontconfig            ~1 MB\n# libfreetype6             ~1 MB\n# xfonts-cyrillic          ~2 MB\n# xfonts-scalable          ~2 MB\n# fonts-liberation         ~3 MB\n# fonts-ipafont-gothic     ~13 MB\n# fonts-wqy-zenhei         ~17 MB\n# fonts-tlwg-loma-otf      ~300 KB\n# ttf-ubuntu-font-family   ~5 MB\n#   Ubuntu Font Family, sans-serif typeface hinted for clarity\n# Removed packages:\n# xfonts-100dpi            ~6 MB\n# xfonts-75dpi             ~6 MB\n# fonts-noto-color-emoji   ~10 MB\n# Regarding fonts-liberation see:\n#  https://github.com/SeleniumHQ/docker-selenium/issues/383#issuecomment-278367069\n# Layer size: small: 50.3 MB (with --no-install-recommends)\n# Layer size: small: 50.3 MB\nRUN apt-get -qqy update \\\n  && apt-get -qqy --no-install-recommends install \\\n    libfontconfig \\\n    libfreetype6 \\\n    xfonts-cyrillic \\\n    xfonts-scalable \\\n    fonts-liberation \\\n    fonts-ipafont-gothic \\\n    fonts-wqy-zenhei \\\n    fonts-tlwg-loma-otf \\\n    ttf-ubuntu-font-family \\\n    fonts-noto-color-emoji \\\n  && rm -rf /var/lib/apt/lists/* \\\n  && apt-get -qyy clean\n\n########################################\n# noVNC exposes VNC through a web page #\n########################################\n# Download https://github.com/novnc/noVNC dated 2021-03-30 commit 84f102d6a9ffaf3972693d59bad5c6fddb6d7fb0\n# Download https://github.com/novnc/websockify dated 2021-03-22 commit c5d365dd1dbfee89881f1c1c02a2ac64838d645f\nENV NOVNC_SHA=\"84f102d6a9ffaf3972693d59bad5c6fddb6d7fb0\" \\\n    WEBSOCKIFY_SHA=\"c5d365dd1dbfee89881f1c1c02a2ac64838d645f\"\nRUN  wget -nv -O noVNC.zip \\\n       \"https://github.com/novnc/noVNC/archive/${NOVNC_SHA}.zip\" \\\n  && unzip -x noVNC.zip \\\n  && mv noVNC-${NOVNC_SHA} /opt/bin/noVNC \\\n  && cp /opt/bin/noVNC/vnc.html /opt/bin/noVNC/index.html \\\n  && rm noVNC.zip \\\n  && wget -nv -O websockify.zip \\\n      \"https://github.com/novnc/websockify/archive/${WEBSOCKIFY_SHA}.zip\" \\\n  && unzip -x websockify.zip \\\n  && rm websockify.zip \\\n  && rm -rf websockify-${WEBSOCKIFY_SHA}/tests \\\n  && mv websockify-${WEBSOCKIFY_SHA} /opt/bin/noVNC/utils/websockify\n\n#=========================================================================================================================================\n# Run this command for executable file permissions for /dev/shm when this is a \"child\" container running in Docker Desktop and WSL2 distro\n#=========================================================================================================================================\nRUN chmod +x /dev/shm\n\n#===================================================\n# Run the following commands as non-privileged user\n#===================================================\n\nUSER 1200\n\n#==============================\n# Scripts to run Selenium Node and XVFB\n#==============================\nCOPY start-selenium-node.sh \\\n      start-xvfb.sh \\\n      /opt/bin/\n\n#==============================\n# Supervisor configuration file\n#==============================\nCOPY selenium.conf /etc/supervisor/conf.d/\n\n#==============================\n# Generating the VNC password as seluser\n# So the service can be started with seluser\n#==============================\n\nRUN mkdir -p ${HOME}/.vnc \\\n  && x11vnc -storepasswd secret ${HOME}/.vnc/passwd\n\n#==========\n# Relaxing permissions for OpenShift and other non-sudo environments\n#==========\nRUN sudo chmod -R 777 ${HOME} \\\n  && sudo chgrp -R 0 ${HOME} \\\n  && sudo chmod -R g=u ${HOME}\n\n#==============================\n# Scripts to run fluxbox, x11vnc and noVNC\n#==============================\nCOPY start-vnc.sh \\\n      start-novnc.sh \\\n      /opt/bin/\n\n#==============================\n# Selenium Grid logo as wallpaper for Fluxbox\n#==============================\nCOPY selenium_grid_logo.png /usr/share/images/fluxbox/ubuntu-light.png\n\n#============================\n# Some configuration options\n#============================\nENV SE_SCREEN_WIDTH 1360\nENV SE_SCREEN_HEIGHT 1020\nENV SE_SCREEN_DEPTH 24\nENV SE_SCREEN_DPI 96\nENV SE_START_XVFB true\n# Temporal fix for https://github.com/SeleniumHQ/docker-selenium/issues/1610\nENV START_XVFB true\nENV SE_START_NO_VNC true\nENV SE_NO_VNC_PORT 7900\nENV SE_VNC_PORT 5900\nENV DISPLAY :99.0\nENV DISPLAY_NUM 99\n# Path to the Configfile\nENV CONFIG_FILE=/opt/selenium/config.toml\nENV GENERATE_CONFIG true\n# Drain the Node after N sessions.\n# A value higher than zero enables the feature\nENV SE_DRAIN_AFTER_SESSION_COUNT 0\n\n\n\n#========================\n# Selenium Configuration\n#========================\n# As integer, maps to \"max-concurrent-sessions\"\nENV SE_NODE_MAX_SESSIONS 1\n# As integer, maps to \"session-timeout\" in seconds\nENV SE_NODE_SESSION_TIMEOUT 300\n# As boolean, maps to \"override-max-sessions\"\nENV SE_NODE_OVERRIDE_MAX_SESSIONS false\n\n# Following line fixes https://github.com/SeleniumHQ/docker-selenium/issues/87\nENV DBUS_SESSION_BUS_ADDRESS=/dev/null\n\n# Creating base directory for Xvfb\nRUN  sudo mkdir -p /tmp/.X11-unix && sudo chmod 1777 /tmp/.X11-unix\n\n# Copying configuration script generator\nCOPY generate_config /opt/bin/generate_config\n\nEXPOSE 5900\n"
}