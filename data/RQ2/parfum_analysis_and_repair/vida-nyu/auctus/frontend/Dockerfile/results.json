{
  "startTime": 1674255334299,
  "endTime": 1674255334820,
  "originalSmells": [
    {
      "rule": "npmCacheCleanAfterInstall",
      "position": {
        "lineStart": 9,
        "lineEnd": 9,
        "columnStart": 4,
        "columnEnd": 15
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM node:14-buster AS build\n\nRUN mkdir /src\nRUN chown -R node /src\nUSER node\nWORKDIR /src\n\nCOPY frontend/package.json frontend/package-lock.json /src/\nRUN lock_hash=\"$(shasum -a 256 package-lock.json)\" && \\\n    npm install && \\\n    echo \"$lock_hash\" | shasum -c && npm cache clean --force;\nCOPY frontend /src/\nRUN npm run build\n\n\nFROM nginx:1.21\n\nCOPY --from=build --chown=0:0 /src/build /var/www/html\nCOPY frontend/nginx.conf /etc/nginx/conf.d/default.conf\n\n# nginx default CMD is [\"nginx\", \"-g\", \"daemon off;\"]\nCMD [\"sh\", \"-c\", \"sed -i 's|<meta name=\\\"api_url\\\"[^>]\\\\+>|<meta name=\\\"api_url\\\" content=\\\"'\\\"$API_URL\\\"'\\\">|' /var/www/html/index.html && exec nginx -g \\\"daemon off; worker_shutdown_timeout 2s;\\\"\"]\n"
}