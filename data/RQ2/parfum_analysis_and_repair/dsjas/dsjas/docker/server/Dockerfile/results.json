{
  "startTime": 1674255821639,
  "endTime": 1674255822579,
  "originalSmells": [
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 7,
        "lineEnd": 7,
        "columnStart": 4,
        "columnEnd": 47
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 7,
        "lineEnd": 7,
        "columnStart": 4,
        "columnEnd": 47
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 7,
        "lineEnd": 7,
        "columnStart": 4,
        "columnEnd": 47
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 7,
        "lineEnd": 7,
        "columnStart": 4,
        "columnEnd": 71
      }
    }
  ],
  "repairedDockerfile": "FROM php:7.2-apache\n\n\n# Prepare APT for package installation\nRUN apt update && apt upgrade -y\n\n# Install zlib for php extension\nRUN apt install --no-install-recommends zlib1g zlib1g-dev libicu-dev -y && rm -rf /var/lib/apt/lists/*;\n\n# Install required extensions\nRUN docker-php-ext-install mysqli\nRUN docker-php-ext-install fileinfo\nRUN docker-php-ext-install zip\nRUN docker-php-ext-install intl\n\n# Copy config files\nCOPY ./docker/server/httpd.conf /etc/apache2/httpd.conf\nCOPY ./docker/server/mod_rewrite.load /etc/apache2/mods-enabled/mod_rewrite.load\nCOPY ./docker/server/mod_headers.load /etc/apache2/mods-enabled/mod_headers.load\nCOPY ./docker/server/vhost-default.conf /etc/apache2/sites-available/000-default.conf\nCOPY ./docker/server/dir-index.conf /etc/apache2/mods/enabled/dir.conf\n\n# Configure PHP\nCOPY ./docker/server/php.ini /usr/local/etc/php/php.ini\n\n# Copy source tree\nCOPY ./public /var/www/html/\n\n# Configure DSJAS\nCOPY ./scripts/install/Config.ini /var/www/html/Config.ini\nCOPY ./scripts/install/themeConfig.ini /var/www/html/admin/site/UI/config.ini\nCOPY ./scripts/install/moduleConfig.ini /var/www/html/admin/site/modules/config.ini\nCOPY ./scripts/install/extConfig.ini /var/www/html/admin/site/extensions/config.ini\n\n# Sed magic to skip install process\nRUN sed -i '/\\[setup\\]/,/database_installed/ s/\\(\\S\\+\\)[0-9]\\+\\(\"\\)/\\11\\2/g' /var/www/html/Config.ini\n\n# Make sure the server can write and read the directory\nRUN chown -R www-data:www-data /var/www\n\n# Delete developer folders/files\nRUN rm -rf /var/www/html/admin/site/UI/test_theme\nRUN rm -rf /var/www/html/admin/site/modules/example\n\nEXPOSE 80\n"
}