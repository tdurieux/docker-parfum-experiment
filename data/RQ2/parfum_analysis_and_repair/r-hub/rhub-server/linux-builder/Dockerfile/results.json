{
  "startTime": 1674248402193,
  "endTime": 1674248402946,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 36,
        "lineEnd": 36,
        "columnStart": 4,
        "columnEnd": 207
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 7,
        "lineEnd": 7,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 16,
        "lineEnd": 16,
        "columnStart": 4,
        "columnEnd": 60
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 21,
        "lineEnd": 22,
        "columnStart": 22,
        "columnEnd": 26
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 29,
        "lineEnd": 29,
        "columnStart": 4,
        "columnEnd": 33
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 16,
        "lineEnd": 16,
        "columnStart": 4,
        "columnEnd": 60
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 29,
        "lineEnd": 29,
        "columnStart": 4,
        "columnEnd": 33
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 7,
        "lineEnd": 7,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 16,
        "lineEnd": 16,
        "columnStart": 4,
        "columnEnd": 60
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 21,
        "lineEnd": 22,
        "columnStart": 22,
        "columnEnd": 26
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 29,
        "lineEnd": 29,
        "columnStart": 4,
        "columnEnd": 33
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 15,
        "lineEnd": 15,
        "columnStart": 4,
        "columnEnd": 84
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 28,
        "lineEnd": 28,
        "columnStart": 4,
        "columnEnd": 57
      }
    }
  ],
  "repairedDockerfile": "FROM ubuntu:18.04\n\nENV DEBIAN_FRONTEND noninteractive\n\n# en_US locale\nRUN apt-get update && \\\n    apt-get install --no-install-recommends -y locales && \\\n    localedef -i en_US -c -f UTF-8 -A /usr/share/locale/locale.alias en_US.UTF-8 && rm -rf /var/lib/apt/lists/*;\nENV LANG en_US.utf8\n\n# R\n\nRUN echo \"deb https://cloud.r-project.org/bin/linux/ubuntu bionic-cran35/\" \\\n    > /etc/apt/sources.list.d/cran.list\n\nRUN apt-get install --no-install-recommends -yy default-jre-headless gnupg curl wget && rm -rf /var/lib/apt/lists/*;\n\nRUN apt-key adv --keyserver keyserver.ubuntu.com \\\n    --recv-keys E298A3A825C0D65DFD57CBB651716619E084DAB9\n\nRUN apt-get update && apt-get install --no-install-recommends -yy \\\n    r-base-core r-base-dev && rm -rf /var/lib/apt/lists/*;\n\nRUN useradd jenkins && \\\n    mkdir /home/jenkins && \\\n    chown jenkins:jenkins /home/jenkins && \\\n    addgroup jenkins staff\n\nRUN apt-get install --no-install-recommends -yy docker.io && rm -rf /var/lib/apt/lists/*;\nRUN addgroup jenkins docker\n\nRUN apt-get clean\n\nENV SWARM_CLIENT_VERSION 3.9\n\nRUN curl -f -s https://repo.jenkins-ci.org/releases/org/jenkins-ci/plugins/swarm-client/${SWARM_CLIENT_VERSION}/swarm-client-${SWARM_CLIENT_VERSION}.jar -o /home/jenkins/swarm-client-${SWARM_CLIENT_VERSION}.jar\n\n# Somewhat surprisingly, this persist after mounting the socket, so\n# the jenkins user will have access to Docker\nRUN touch /var/run/docker.sock && \\\n    chown root:docker /var/run/docker.sock\n\nRUN mkdir /artifacts && \\\n    chown jenkins:jenkins /artifacts\n\nCOPY run.sh /home/jenkins/run.sh\nRUN chmod +x /home/jenkins/run.sh\n\nRUN rm -rf /var/lib/apt/lists/*\n\nUSER jenkins\n\n# Get R packages we need\n\nRUN R -q -e 'source(\"https://install-github.me/r-hub/sysreqs\")'\n\n# Need to switch back to root, because we need to change the group of\n# the docker socket, to be able to start sibling containers\n# run.sh will do su to start the jenkins swarm client as non-root\n\nUSER root\n\nCMD [ \"/home/jenkins/run.sh\" ]\n"
}