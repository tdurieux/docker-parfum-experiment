{
  "startTime": 1674250629762,
  "endTime": 1674250630397,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 21,
        "lineEnd": 21,
        "columnStart": 4,
        "columnEnd": 130
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 6,
        "lineEnd": 11,
        "columnStart": 4,
        "columnEnd": 22
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 14,
        "lineEnd": 14,
        "columnStart": 4,
        "columnEnd": 81
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 18,
        "lineEnd": 18,
        "columnStart": 4,
        "columnEnd": 60
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 14,
        "lineEnd": 14,
        "columnStart": 4,
        "columnEnd": 81
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 6,
        "lineEnd": 11,
        "columnStart": 4,
        "columnEnd": 22
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 14,
        "lineEnd": 14,
        "columnStart": 4,
        "columnEnd": 81
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 18,
        "lineEnd": 18,
        "columnStart": 4,
        "columnEnd": 60
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 14,
        "lineEnd": 14,
        "columnStart": 4,
        "columnEnd": 105
      }
    }
  ],
  "repairedDockerfile": "# Note that since cross needs the rust toolchain for *-x86_64-unknown-linux-gnu,\n# so it is better to use a glibc-based system image such as buster, rather than\n# alpine.\nFROM rust:buster as build\n\nRUN apt-get update && \\\n    apt-get install --no-install-recommends -y \\\n            bash \\\n            bats \\\n            curl \\\n            gcc \\\n            shellcheck && rm -rf /var/lib/apt/lists/*;\n\n# Install docker\nRUN apt-get install --no-install-recommends -y apt-transport-https ca-certificates curl gnupg lsb-release && \\\n    curl -fsSL https://download.docker.com/linux/debian/gpg | apt-key add - && \\\n    echo \"deb [arch=amd64] https://download.docker.com/linux/debian buster stable\" | tee /etc/apt/sources.list.d/docker.list && \\\n    apt-get update && \\\n    apt-get install --no-install-recommends -y docker-ce docker-ce-cli containerd.io && rm -rf /var/lib/apt/lists/*;\n\n# Install cargo-make\nRUN curl -f -O -L https://github.com/sagiegurari/cargo-make/releases/download/0.35.0/cargo-make-v0.35.0-x86_64-unknown-linux-musl.zip && \\\n    unzip -p cargo-make-v0.35.0-x86_64-unknown-linux-musl.zip cargo-make-v0.35.0-x86_64-unknown-linux-musl/cargo-make > \"${CARGO_HOME}/bin/cargo-make\" && \\\n    chmod +x \"${CARGO_HOME}/bin/cargo-make\" && \\\n    rm cargo-make-v0.35.0-x86_64-unknown-linux-musl.zip\n\n# Install cross\nRUN cargo install --git=\"https://github.com/rust-embedded/cross.git\" --branch=\"master\" cross\n\n# Install targets\nRUN rustup toolchain install nightly-2021-03-24 && \\\n    rustup +nightly-2021-03-24 target add x86_64-unknown-linux-musl && \\\n    rustup +nightly-2021-03-24 target add x86_64-unknown-linux-gnu && \\\n    rustup +nightly-2021-03-24 target add x86_64-linux-android && \\\n    rustup +nightly-2021-03-24 target add i686-unknown-linux-musl && \\\n    rustup +nightly-2021-03-24 target add i686-unknown-linux-gnu && \\\n    rustup +nightly-2021-03-24 target add i686-linux-android && \\\n    rustup +nightly-2021-03-24 target add armv7-unknown-linux-musleabihf && \\\n    rustup +nightly-2021-03-24 target add armv7-unknown-linux-gnueabihf && \\\n    rustup +nightly-2021-03-24 target add arm-linux-androideabi && \\\n    rustup +nightly-2021-03-24 target add aarch64-unknown-linux-musl && \\\n    rustup +nightly-2021-03-24 target add aarch64-unknown-linux-gnu && \\\n    rustup +nightly-2021-03-24 target add aarch64-linux-android\n\nWORKDIR /usr/src/proot-rs\nCOPY . /usr/src/proot-rs\n\nENV CROSS_DOCKER_IN_DOCKER=true\n\nCMD [\"cargo\", \"make\", \"build\"]\n\n"
}