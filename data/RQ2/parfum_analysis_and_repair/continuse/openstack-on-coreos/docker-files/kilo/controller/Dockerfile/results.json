{
  "startTime": 1674250806142,
  "endTime": 1674250807511,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 32,
        "lineEnd": 32,
        "columnStart": 11,
        "columnEnd": 102
      }
    },
    {
      "rule": "curlUseHttpsUrl",
      "position": {
        "lineStart": 32,
        "lineEnd": 32,
        "columnStart": 11,
        "columnEnd": 102
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 12,
        "lineEnd": 12,
        "columnStart": 11,
        "columnEnd": 57
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 15,
        "lineEnd": 15,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 18,
        "lineEnd": 18,
        "columnStart": 4,
        "columnEnd": 43
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 25,
        "lineEnd": 25,
        "columnStart": 4,
        "columnEnd": 38
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 29,
        "lineEnd": 29,
        "columnStart": 4,
        "columnEnd": 108
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 38,
        "lineEnd": 38,
        "columnStart": 4,
        "columnEnd": 49
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 42,
        "lineEnd": 43,
        "columnStart": 4,
        "columnEnd": 52
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 47,
        "lineEnd": 47,
        "columnStart": 4,
        "columnEnd": 77
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 50,
        "lineEnd": 50,
        "columnStart": 4,
        "columnEnd": 42
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 54,
        "lineEnd": 54,
        "columnStart": 22,
        "columnEnd": 92
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 57,
        "lineEnd": 57,
        "columnStart": 4,
        "columnEnd": 70
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 15,
        "lineEnd": 15,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 18,
        "lineEnd": 18,
        "columnStart": 4,
        "columnEnd": 43
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 25,
        "lineEnd": 25,
        "columnStart": 4,
        "columnEnd": 38
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 29,
        "lineEnd": 29,
        "columnStart": 4,
        "columnEnd": 108
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 38,
        "lineEnd": 38,
        "columnStart": 4,
        "columnEnd": 49
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 42,
        "lineEnd": 43,
        "columnStart": 4,
        "columnEnd": 52
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 47,
        "lineEnd": 47,
        "columnStart": 4,
        "columnEnd": 77
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 50,
        "lineEnd": 50,
        "columnStart": 4,
        "columnEnd": 42
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 57,
        "lineEnd": 57,
        "columnStart": 4,
        "columnEnd": 70
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 12,
        "lineEnd": 12,
        "columnStart": 11,
        "columnEnd": 57
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 15,
        "lineEnd": 15,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 18,
        "lineEnd": 18,
        "columnStart": 4,
        "columnEnd": 43
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 25,
        "lineEnd": 25,
        "columnStart": 4,
        "columnEnd": 38
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 29,
        "lineEnd": 29,
        "columnStart": 4,
        "columnEnd": 108
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 38,
        "lineEnd": 38,
        "columnStart": 4,
        "columnEnd": 49
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 42,
        "lineEnd": 43,
        "columnStart": 4,
        "columnEnd": 52
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 47,
        "lineEnd": 47,
        "columnStart": 4,
        "columnEnd": 77
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 50,
        "lineEnd": 50,
        "columnStart": 4,
        "columnEnd": 42
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 54,
        "lineEnd": 54,
        "columnStart": 22,
        "columnEnd": 92
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 57,
        "lineEnd": 57,
        "columnStart": 4,
        "columnEnd": 70
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 15,
        "lineEnd": 15,
        "columnStart": 4,
        "columnEnd": 51
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 18,
        "lineEnd": 18,
        "columnStart": 4,
        "columnEnd": 67
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 25,
        "lineEnd": 25,
        "columnStart": 4,
        "columnEnd": 62
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 29,
        "lineEnd": 29,
        "columnStart": 4,
        "columnEnd": 132
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 38,
        "lineEnd": 38,
        "columnStart": 4,
        "columnEnd": 73
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 42,
        "lineEnd": 43,
        "columnStart": 4,
        "columnEnd": 52
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 47,
        "lineEnd": 47,
        "columnStart": 4,
        "columnEnd": 101
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 50,
        "lineEnd": 50,
        "columnStart": 4,
        "columnEnd": 66
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 57,
        "lineEnd": 57,
        "columnStart": 4,
        "columnEnd": 94
      }
    }
  ],
  "repairedDockerfile": "FROM ubuntu:14.04\nMAINTAINER Jaewoo Lee <continuse@icloud.com>\n\n# Mysql Server\nENV MYSQL_ROOT_PASSWORD openstack\nRUN { \\\n                echo \"mysql-server-5.5 mysql-server/root_password password $MYSQL_ROOT_PASSWORD\"; \\\n                echo \"mysql-server-5.5 mysql-server/root_password_again password $MYSQL_ROOT_PASSWORD\"; \\\n                echo \"mysql-server-5.5 mysql-server/root_password seen true\"; \\\n                echo \"mysql-server-5.5 mysql-server/root_password_again seen true\"; \\\n        } | debconf-set-selections \\\n        && apt-get update \\\n        && apt-get install --no-install-recommends -y mysql-server python-mysqldb && rm -rf /var/lib/apt/lists/*;\n\n# Util\nRUN apt-get -y --no-install-recommends install curl && rm -rf /var/lib/apt/lists/*;\n\n# Ubuntu Cloud archive keyring and repository\nRUN apt-get -y --no-install-recommends install ubuntu-cloud-keyring \\\n\t&& echo \"deb http://ubuntu-cloud.archive.canonical.com/ubuntu\" \\\n\t\t\"trusty-updates/kilo main\" > /etc/apt/sources.list.d/cloudarchive-kilo.list \\\n\t&& apt-get update && apt-get -y dist-upgrade && rm -rf /var/lib/apt/lists/*;\n\n\n# RabbitMQ\nRUN apt-get -y --no-install-recommends install rabbitmq-server && rm -rf /var/lib/apt/lists/*;\n\n# Keystone\nRUN echo \"manual\" > /etc/init/keystone.override \\\n\t&& apt-get -y --no-install-recommends install keystone python-openstackclient apache2 libapache2-mod-wsgi memcached python-memcache \\\n        && ln -s /etc/apache2/sites-available/wsgi-keystone.conf /etc/apache2/sites-enabled \\\n        && mkdir -p /var/www/cgi-bin/keystone \\\n        && curl -f https://git.openstack.org/cgit/openstack/keystone/plain/httpd/keystone.py?h=stable/kilo | tee /var/www/cgi-bin/keystone/main /var/www/cgi-bin/keystone/admin \\\n        && chown -R keystone:keystone /var/www/cgi-bin/keystone \\\n        && chmod 755 /var/www/cgi-bin/keystone/* \\\n        && rm -f /var/lib/keystone/keystone.db && rm -rf /var/lib/apt/lists/*;\n\n# Glance Setup\nRUN apt-get -y --no-install-recommends install glance python-glanceclient \\\n        && rm -f /var/lib/glance/glance.sqlite && rm -rf /var/lib/apt/lists/*;\n\n# Nova Management\nRUN apt-get -y --no-install-recommends install nova-api nova-cert nova-conductor nova-consoleauth \\\n    nova-novncproxy nova-scheduler python-novaclient \\\n    && rm -f /var/lib/nova/nova.sqlite && rm -rf /var/lib/apt/lists/*;\n\n# Neutron\nRUN apt-get -y --no-install-recommends install neutron-server neutron-plugin-ml2 python-neutronclient && rm -rf /var/lib/apt/lists/*;\n\n# Horizone\nRUN apt-get -y --no-install-recommends install openstack-dashboard \\\n       && dpkg --purge openstack-dashboard-ubuntu-theme && rm -rf /var/lib/apt/lists/*;\n\n# Heat\nRUN apt-get update && apt-get -y --no-install-recommends install heat-api heat-api-cfn heat-engine python-heatclient && rm -rf /var/lib/apt/lists/*;\n\n# Cinder\nRUN apt-get -y --no-install-recommends install cinder-api cinder-scheduler python-cinderclient && rm -rf /var/lib/apt/lists/*;\n\n# MySQL Data Volume\nVOLUME [\"/data\"]\n\n# MySQL\nCOPY config/mysql/my.cnf /etc/mysql/my.cnf\n\n# WSGI for Keystone\nCOPY config/wsgi-keystone.conf /etc/apache2/sites-available/wsgi-keystone.conf\n\n# Configuration File for Keystone Service\nCOPY config/keystone/keystone.conf /etc/keystone/keystone.conf\n\n# Configuration File for Glance Service\nCOPY config/glance/glance-api.conf /etc/glance/glance-api.conf\nCOPY config/glance/glance-registry.conf /etc/glance/glance-registry.conf\n\n# Configuration File for Nova Service\nCOPY config/nova/nova.conf /etc/nova/nova.conf\n\n# Configuration File for Neutron Service\nCOPY config/neutron/neutron.conf /etc/neutron/neutron.conf\nCOPY config/neutron/ml2_conf.ini /etc/neutron/plugins/ml2/ml2_conf.ini\n\n# Configuration File for Heat Service\nCOPY config/heat/heat.conf /etc/heat/heat.conf\n\n# Dashboard conf file\nCOPY config/horizon/local_settings.py /etc/openstack-dashboard/local_settings.py\n\n# Cinder conf file\nCOPY config/cinder/cinder.conf /etc/cinder/cinder.conf\n\nRUN chown glance:glance /etc/glance/glance-api.conf \\\n  && chown glance:glance /etc/glance/glance-registry.conf \\\n  && chown nova:nova /etc/nova/nova.conf \\\n  && chown root:neutron /etc/neutron/neutron.conf \\\n  && chown root:neutron /etc/neutron/plugins/ml2/ml2_conf.ini \\\n  && chown cinder:cinder /etc/cinder/cinder.conf\n\nCOPY entrypoint.sh /entrypoint.sh\nCOPY keystone.sh /keystone.sh\n\nCMD [\"/entrypoint.sh\"]\n\nEXPOSE 3306 35357 9292 5000 5672 8774 8776 6080 9696 80\n\n"
}