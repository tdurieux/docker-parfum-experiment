{
  "startTime": 1674250121248,
  "endTime": 1674250121910,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 42,
        "lineEnd": 42,
        "columnStart": 4,
        "columnEnd": 103
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM quay.io/centos/centos:stream8\nARG RELEASE\nARG VERSION\nARG BUILD_DATE\nARG VCS_REF\nARG TAG\n\nLABEL maintainers=\"Gorka Eguileor <geguileo@redhat.com>\" \\\n      openstack_release=${RELEASE} \\\n      version=${VERSION} \\\n      description=\"Ember CSI Plugin\" \\\n      org.label-schema.schema-version=\"1.0\" \\\n      org.label-schema.name=\"ember-csi\" \\\n      org.label-schema.version=${VERSION}  \\\n      org.label-schema.description=\"Ember CSI Plugin\" \\\n      org.label-schema.url=\"https://ember-csi.io\" \\\n      org.label-schema.build-date=${BUILD_DATE} \\\n      org.label-schema.vcs-url=\"https://github.com/embercsi/ember-csi\" \\\n      org.label-schema.vcs-ref=${VCS_REF}\n\n# Enable RPDB debugging on this container by default\nENV PYTHONUNBUFFERED=true\n\n# This is the default port, but if we change it via CSI_ENDPOINT then this will\n# no longer be relevant.\n# For the Master version expose RPDB port to support remote debugging\nEXPOSE 50051 4444\n\nRUN yum -y install --setopt=skip_missing_names_on_install=False targetcli epel-release lvm2 which && \\\n    yum -y install --setopt=skip_missing_names_on_install=False python3-pip python3-pywbem centos-release-openstack-${RELEASE} python3-kubernetes && \\\n    # Enable PowerTools so we can access python3-httplib2\n    sed -i -r 's/^enabled=0/enabled=1/' /etc/yum.repos.d/CentOS-Stream-PowerTools.repo && \\\n    yum -y install python3-grpcio protobuf && \\\n    yum -y install --setopt=skip_missing_names_on_install=False python3-cinderlib xfsprogs e2fsprogs nmap-ncat && \\\n    # Required to apply patches\n    yum -y install patch && \\\n    pip3 install --no-cache-dir -v \"ember-csi==${VERSION}\" && \\\n    # Remove patch package\n    yum -y remove patch && \\\n    # Install driver specific RPM dependencies\n    yum -y install --setopt=skip_missing_names_on_install=False python3-pyOpenSSL && \\\n    # Create the ceph repo for the ceph packages\n    curl -f --silent --remote-name --location https://github.com/ceph/ceph/raw/octopus/src/cephadm/cephadm && \\\n    chmod +x cephadm && \\\n    ./cephadm add-repo --release octopus && \\\n    yum -y install python3-rbd ceph-common && \\\n    rm ./cephadm && \\\n    # Install driver specific PyPi dependencies\n    pip3 install --no-cache-dir krest purestorage pyxcli python-3parclient python-lefthandclient && \\\n    yum clean all && \\\n    rm -rf /var/cache/yum\n\nCOPY ember-csi/nsenter-commands /\n\n# Define default command\nCMD [\"ember-csi\"]\n"
}