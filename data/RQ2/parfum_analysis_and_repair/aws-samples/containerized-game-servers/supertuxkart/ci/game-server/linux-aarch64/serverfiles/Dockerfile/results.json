{
  "startTime": 1674252303107,
  "endTime": 1674252304205,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 12,
        "lineEnd": 12,
        "columnStart": 4,
        "columnEnd": 86
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 7,
        "lineEnd": 7,
        "columnStart": 4,
        "columnEnd": 22
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 2,
        "lineEnd": 5,
        "columnStart": 4,
        "columnEnd": 87
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 6,
        "lineEnd": 6,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 8,
        "lineEnd": 8,
        "columnStart": 4,
        "columnEnd": 36
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 19,
        "lineEnd": 19,
        "columnStart": 4,
        "columnEnd": 78
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 22,
        "lineEnd": 22,
        "columnStart": 4,
        "columnEnd": 58
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 26,
        "lineEnd": 26,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 34,
        "lineEnd": 34,
        "columnStart": 4,
        "columnEnd": 26
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 2,
        "lineEnd": 5,
        "columnStart": 4,
        "columnEnd": 87
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 6,
        "lineEnd": 6,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 8,
        "lineEnd": 8,
        "columnStart": 4,
        "columnEnd": 36
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 19,
        "lineEnd": 19,
        "columnStart": 4,
        "columnEnd": 78
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 22,
        "lineEnd": 22,
        "columnStart": 4,
        "columnEnd": 58
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 26,
        "lineEnd": 26,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 34,
        "lineEnd": 34,
        "columnStart": 4,
        "columnEnd": 26
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 2,
        "lineEnd": 5,
        "columnStart": 4,
        "columnEnd": 87
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 6,
        "lineEnd": 6,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 8,
        "lineEnd": 8,
        "columnStart": 4,
        "columnEnd": 36
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 19,
        "lineEnd": 19,
        "columnStart": 4,
        "columnEnd": 78
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 22,
        "lineEnd": 22,
        "columnStart": 4,
        "columnEnd": 58
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 26,
        "lineEnd": 26,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 34,
        "lineEnd": 34,
        "columnStart": 4,
        "columnEnd": 26
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 2,
        "lineEnd": 5,
        "columnStart": 4,
        "columnEnd": 87
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 6,
        "lineEnd": 6,
        "columnStart": 4,
        "columnEnd": 54
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 8,
        "lineEnd": 8,
        "columnStart": 4,
        "columnEnd": 60
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 19,
        "lineEnd": 19,
        "columnStart": 4,
        "columnEnd": 102
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 22,
        "lineEnd": 22,
        "columnStart": 4,
        "columnEnd": 82
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 26,
        "lineEnd": 26,
        "columnStart": 4,
        "columnEnd": 54
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 34,
        "lineEnd": 34,
        "columnStart": 4,
        "columnEnd": 50
      }
    }
  ],
  "repairedDockerfile": "FROM public.ecr.aws/debian/debian:stable-slim as debian_base\nRUN apt-get update -y\nRUN apt-get install --no-install-recommends build-essential cmake libbluetooth-dev libsdl2-dev \\\nlibcurl4-openssl-dev libenet-dev libfreetype6-dev libharfbuzz-dev \\\nlibjpeg-dev libogg-dev libopenal-dev libpng-dev \\\nlibssl-dev libvorbis-dev libmbedtls-dev pkg-config zlib1g-dev git sqlite3 subversion -y && rm -rf /var/lib/apt/lists/*;\nRUN apt install --no-install-recommends -y python3-pip && rm -rf /var/lib/apt/lists/*;\nRUN pip install --no-cache-dir pyenet\nRUN apt install --no-install-recommends -y curl vim unzip jq && rm -rf /var/lib/apt/lists/*;\n\n#Install aws cli\n#RUN curl \"https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip\" -o \"awscliv2.zip\"\nRUN curl -f \"https://awscli.amazonaws.com/awscli-exe-linux-aarch64.zip\" -o \"awscliv2.zip\"\nRUN unzip awscliv2.zip\nRUN ./aws/install\nRUN mkdir /root/.aws\nCOPY config /root/.aws\n\n# Install and configure psql\nRUN DEBIAN_FRONTEND=noninteractive apt-get --no-install-recommends install --fix-missing -y postgresql && rm -rf /var/lib/apt/lists/*;\n\n#Install kubectl for the simulator pod scaler\nRUN apt-get install --no-install-recommends -y apt-transport-https ca-certificates && rm -rf /var/lib/apt/lists/*;\nRUN curl -fsSLo /usr/share/keyrings/kubernetes-archive-keyring.gpg https://packages.cloud.google.com/apt/doc/apt-key.gpg\nRUN echo \"deb [signed-by=/usr/share/keyrings/kubernetes-archive-keyring.gpg] https://apt.kubernetes.io/ kubernetes-xenial main\" | tee /etc/apt/sources.list.d/kubernetes.list\nRUN apt-get update\nRUN apt-get install --no-install-recommends -y kubectl && rm -rf /var/lib/apt/lists/*;\nRUN kubectl version --client\n\nFROM debian_base AS build_art\nRUN svn co https://svn.code.sf.net/p/supertuxkart/code/stk-assets stk-assets\n\nFROM debian_base AS build_code\nCOPY --from=1 /stk-assets /stk-assets\nRUN apt-get install --no-install-recommends git -y && rm -rf /var/lib/apt/lists/*;\nRUN git clone https://github.com/yahavb/stk-code stk-code\n#RUN git clone https://github.com/supertuxkart/stk-code stk-code\nRUN cd stk-code\nRUN mkdir cmake_build\nRUN cmake ../stk-code -B ./cmake_build -DSERVER_ONLY=ON\nRUN cd cmake_build && make -j$(nproc) -f ./Makefile install\nCOPY server_config.xml /stk-code/server_config.xml\nCOPY start-server.sh /start-server.sh\nCOPY start-client.sh /start-client.sh\nCOPY udp-health-probe.py /udp-health-probe.py\nCOPY get-port.py /get-port.py\nCOPY get-track.py /get-track.py\nCOPY get-mode.py /get-mode.py\nCOPY get-location.py /get-location.py\nCOPY srv-sigstop.sh /srv-sigstop.sh\nCOPY cli-sigstop.sh /cli-sigstop.sh\nCOPY pub-game-actions-cw.sh /pub-game-actions-cw.sh\nRUN chmod +x /start-server.sh\nRUN chmod +x /start-client.sh\nRUN chmod +x /udp-health-probe.py\nRUN chmod +x /get-port.py\nRUN chmod +x /get-track.py\nRUN chmod +x /get-mode.py\nRUN chmod +x /get-location.py\nRUN chmod +x /srv-sigstop.sh\nRUN chmod +x /cli-sigstop.sh\nRUN chmod +x /pub-game-actions-cw.sh\n"
}