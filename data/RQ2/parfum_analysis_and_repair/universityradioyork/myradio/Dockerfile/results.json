{
  "startTime": 1674254181207,
  "endTime": 1674254182278,
  "originalSmells": [
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 2,
        "lineEnd": 4,
        "columnStart": 22,
        "columnEnd": 71
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 2,
        "lineEnd": 4,
        "columnStart": 22,
        "columnEnd": 71
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM php:7.4-apache\n\nRUN apt-get update && apt-get install --no-install-recommends -y libpq-dev libpng-dev libjpeg-dev libldap-dev unzip \\\n                                         libcurl4-openssl-dev libxslt-dev git libz-dev libzip-dev libmemcached-dev \\\n                                         postgresql-client jq msmtp-mta && rm -rf /var/lib/apt/lists/*;\n\nRUN docker-php-ext-install pgsql pdo_pgsql gd ldap curl xsl zip\n\nRUN pecl install memcached && \\\n    echo extension=memcached.so >> /usr/local/etc/php/conf.d/memcached.ini\n\nRUN pecl install xdebug-3.1.1 && docker-php-ext-enable xdebug \\\n && echo 'zend_extension=\"/usr/local/lib/php/extensions/no-debug-non-zts-20190902/xdebug.so\"' >> /usr/local/etc/php/conf.d/docker-php-ext-xdebug.ini \\\n && echo 'xdebug.client_port=9003' >> /usr/local/etc/php/conf.d/docker-php-ext-xdebug.ini \\\n && echo 'xdebug.mode=develop,debug' >> /usr/local/etc/php/conf.d/docker-php-ext-xdebug.ini \\\n && echo 'xdebug.start_with_request=yes' >> /usr/local/etc/php/conf.d/docker-php-ext-xdebug.ini \\\n && echo 'xdebug.client_host=localhost' >> /usr/local/etc/php/conf.d/docker-php-ext-xdebug.ini\n\nRUN echo 'error_reporting=E_ALL' >> /usr/local/etc/php/conf.d/error-reporting.ini\n\nRUN echo sendmail_path = \"/usr/bin/msmtp -t --host mail --port 1025 --from myradio@ury.dev\" > /usr/local/etc/php/conf.d/sendmail.ini\n\n# Self-signed certificate\nRUN openssl req -nodes -new -subj \"/C=GB/ST=North Yorkshire/L=York/O=University Radio York/OU=Localhost/CN=localhost\" > myradio.csr && \\\n    openssl rsa -in privkey.pem -out myradio.key && \\\n    openssl x509 -in myradio.csr -out myradio.crt -req -signkey myradio.key -days 999 && \\\n    cp myradio.crt /etc/apache2/myradio.crt && \\\n    cp myradio.key /etc/apache2/myradio.key\n\nRUN a2enmod rewrite ssl\n\nCOPY sample_configs/apache.conf /etc/apache2/sites-available/myradio.conf\nRUN a2dissite 000-default && a2ensite myradio && \\\n    service apache2 restart && apachectl -S\n\nCOPY --from=composer:latest /usr/bin/composer /usr/local/bin/composer\n\nRUN mkdir -p /var/www/myradio && chown -R www-data:www-data /var/www/myradio && \\\n    mkdir -p /var/log/myradio && chown -R www-data:www-data /var/log/myradio\n\nWORKDIR /var/www/myradio\nCOPY composer.* /var/www/myradio/\nRUN COMPOSER_VENDOR_DIR=/var/www/myradio/src/vendor composer install\n\nCOPY schema schema\nCOPY src src\n\nCOPY sample_configs/docker-config.php src/MyRadio_Config.local.php\nRUN chown www-data:www-data /var/www/myradio/src/MyRadio_Config.local.php && chmod 664 /var/www/myradio/src/MyRadio_Config.local.php\n\nCMD [\"apache2-foreground\"]\n"
}