{
  "startTime": 1674248232269,
  "endTime": 1674248232855,
  "originalSmells": [
    {
      "rule": "yarnCacheCleanAfterInstall",
      "position": {
        "lineStart": 30,
        "lineEnd": 30,
        "columnStart": 4,
        "columnEnd": 37
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "ARG COSMOS_REGISTRY=docker.io\nARG COSMOS_TAG=latest\n\nFROM ${COSMOS_REGISTRY}/minio/mc:RELEASE.2021-12-10T00-14-28Z AS minio-mc\nFROM ${COSMOS_REGISTRY}/ballaerospace/cosmosc2-node:${COSMOS_TAG} AS cosmos-frontend-tmp\n\nWORKDIR /cosmos/plugins/\n\nUSER root\n\nCOPY ./plugins/*.json ./\nCOPY ./plugins/cosmosc2-tool-base/*.json cosmosc2-tool-base/\nCOPY ./plugins/packages/cosmosc2-tool-admin/*.json packages/cosmosc2-tool-admin/\nCOPY ./plugins/packages/cosmosc2-tool-autonomic/*.json packages/cosmosc2-tool-autonomic/\nCOPY ./plugins/packages/cosmosc2-tool-calendar/*.json packages/cosmosc2-tool-calendar/\nCOPY ./plugins/packages/cosmosc2-tool-cmdsender/*.json packages/cosmosc2-tool-cmdsender/\nCOPY ./plugins/packages/cosmosc2-tool-cmdtlmserver/*.json packages/cosmosc2-tool-cmdtlmserver/\nCOPY ./plugins/packages/cosmosc2-tool-dataextractor/*.json packages/cosmosc2-tool-dataextractor/\nCOPY ./plugins/packages/cosmosc2-tool-dataviewer/*.json packages/cosmosc2-tool-dataviewer/\nCOPY ./plugins/packages/cosmosc2-tool-handbooks/*.json packages/cosmosc2-tool-handbooks/\nCOPY ./plugins/packages/cosmosc2-tool-limitsmonitor/*.json packages/cosmosc2-tool-limitsmonitor/\nCOPY ./plugins/packages/cosmosc2-tool-packetviewer/*.json packages/cosmosc2-tool-packetviewer/\nCOPY ./plugins/packages/cosmosc2-tool-scriptrunner/*.json packages/cosmosc2-tool-scriptrunner/\nCOPY ./plugins/packages/cosmosc2-tool-tablemanager/*.json packages/cosmosc2-tool-tablemanager/\nCOPY ./plugins/packages/cosmosc2-tool-tlmgrapher/*.json packages/cosmosc2-tool-tlmgrapher/\nCOPY ./plugins/packages/cosmosc2-tool-tlmviewer/*.json packages/cosmosc2-tool-tlmviewer/\nCOPY ./plugins/packages/cosmosc2-tool-common/ packages/cosmosc2-tool-common/\nCOPY ./plugins/packages/cosmosc2-demo/*.json packages/cosmosc2-demo/\n\nARG NPM_URL\nRUN yarn config set registry $NPM_URL && yarn --network-timeout 600000 && yarn cache clean;\n\nCOPY ./plugins/docker-package-build.sh ./plugins/docker-package-install.sh ./plugins/babel.config.js ./plugins/.eslintrc.js ./plugins/.nycrc ./\nRUN chmod +x ./docker-package-build.sh ./docker-package-install.sh\nCOPY ./plugins/cosmosc2-tool-base/ cosmosc2-tool-base/\nRUN [\"/cosmos/plugins/docker-package-install.sh\", \"cosmosc2-tool-base\"]\n\n# Build admin tool\nFROM cosmos-frontend-tmp AS cosmos-tmp1\nCOPY ./plugins/packages/cosmosc2-tool-admin/ packages/cosmosc2-tool-admin/\nRUN [\"/cosmos/plugins/docker-package-build.sh\", \"cosmosc2-tool-admin\"]\n\n# Build cmdsender tool\nCOPY ./plugins/packages/cosmosc2-tool-cmdsender/ packages/cosmosc2-tool-cmdsender/\nRUN [\"/cosmos/plugins/docker-package-build.sh\", \"cosmosc2-tool-cmdsender\"]\n\n# Build cmdtlmserver tool\nCOPY ./plugins/packages/cosmosc2-tool-cmdtlmserver/ packages/cosmosc2-tool-cmdtlmserver/\nRUN [\"/cosmos/plugins/docker-package-build.sh\", \"cosmosc2-tool-cmdtlmserver\"]\n\n# Build dataextractor tool\nFROM cosmos-frontend-tmp AS cosmos-tmp2\nCOPY ./plugins/packages/cosmosc2-tool-dataextractor/ packages/cosmosc2-tool-dataextractor/\nRUN [\"/cosmos/plugins/docker-package-build.sh\", \"cosmosc2-tool-dataextractor\"]\n\n# Build dataviewer tool\nCOPY ./plugins/packages/cosmosc2-tool-dataviewer/ packages/cosmosc2-tool-dataviewer/\nRUN [\"/cosmos/plugins/docker-package-build.sh\", \"cosmosc2-tool-dataviewer\"]\n\n# Build handbooks tool\nCOPY ./plugins/packages/cosmosc2-tool-handbooks/ packages/cosmosc2-tool-handbooks/\nRUN [\"/cosmos/plugins/docker-package-build.sh\", \"cosmosc2-tool-handbooks\"]\n\n# Build limitsmonitor tool\nCOPY ./plugins/packages/cosmosc2-tool-limitsmonitor/ packages/cosmosc2-tool-limitsmonitor/\nRUN [\"/cosmos/plugins/docker-package-build.sh\", \"cosmosc2-tool-limitsmonitor\"]\n\n# Build packetviewer tool\nFROM cosmos-frontend-tmp AS cosmos-tmp3\nCOPY ./plugins/packages/cosmosc2-tool-packetviewer/ packages/cosmosc2-tool-packetviewer/\nRUN [\"/cosmos/plugins/docker-package-build.sh\", \"cosmosc2-tool-packetviewer\"]\n\n# Build scriptrunner tool\nCOPY ./plugins/packages/cosmosc2-tool-scriptrunner/ packages/cosmosc2-tool-scriptrunner/\nRUN [\"/cosmos/plugins/docker-package-build.sh\", \"cosmosc2-tool-scriptrunner\"]\n\n# Build calendar tool\nCOPY ./plugins/packages/cosmosc2-tool-calendar/ packages/cosmosc2-tool-calendar/\nRUN [\"/cosmos/plugins/docker-package-build.sh\", \"cosmosc2-tool-calendar\"]\n\n# Build tablemanager tool\nCOPY ./plugins/packages/cosmosc2-tool-tablemanager/ packages/cosmosc2-tool-tablemanager/\nRUN [\"/cosmos/plugins/docker-package-build.sh\", \"cosmosc2-tool-tablemanager\"]\n\n# Build tlmgrapher tool\nFROM cosmos-frontend-tmp AS cosmos-tmp4\nCOPY ./plugins/packages/cosmosc2-tool-tlmgrapher/ packages/cosmosc2-tool-tlmgrapher/\nRUN [\"/cosmos/plugins/docker-package-build.sh\", \"cosmosc2-tool-tlmgrapher\"]\n\n# Build tlmviewer tool\nCOPY ./plugins/packages/cosmosc2-tool-tlmviewer/ packages/cosmosc2-tool-tlmviewer\nRUN [\"/cosmos/plugins/docker-package-build.sh\", \"cosmosc2-tool-tlmviewer\"]\n\n# Build autonomic tool\nCOPY ./plugins/packages/cosmosc2-tool-autonomic/ packages/cosmosc2-tool-autonomic/\nRUN [\"/cosmos/plugins/docker-package-build.sh\", \"cosmosc2-tool-autonomic\"]\n\n# Build demo config\nCOPY ./plugins/packages/cosmosc2-demo/ packages/cosmosc2-demo/\nRUN [\"/cosmos/plugins/docker-package-build.sh\", \"cosmosc2-demo\"]\n\nFROM cosmos-frontend-tmp AS cosmos-frontend-base-tmp\n\nCOPY --from=cosmos-tmp1 /cosmos/plugins/gems/* /cosmos/plugins/gems/\nCOPY --from=cosmos-tmp2 /cosmos/plugins/gems/* /cosmos/plugins/gems/\nCOPY --from=cosmos-tmp3 /cosmos/plugins/gems/* /cosmos/plugins/gems/\nCOPY --from=cosmos-tmp4 /cosmos/plugins/gems/* /cosmos/plugins/gems/\n\nFROM ${COSMOS_REGISTRY}/ballaerospace/cosmosc2-base:${COSMOS_TAG}\n\nCOPY --from=cosmos-frontend-base-tmp --chown=${IMAGE_USER}:${IMAGE_GROUP} /cosmos/plugins/gems/* /cosmos/plugins/gems/\nCOPY --from=cosmos-frontend-base-tmp --chown=${IMAGE_USER}:${IMAGE_GROUP} /cosmos/plugins/yarn.lock /cosmos/plugins/yarn.lock\nCOPY --chown=${IMAGE_USER}:${IMAGE_GROUP} ./init.sh /cosmos/\n\nCOPY --from=minio-mc /bin/mc /bin/mc\nCOPY ./script-runner.json /cosmos/minio/script-runner.json\n\nCMD [ \"/cosmos/init.sh\" ]\n"
}