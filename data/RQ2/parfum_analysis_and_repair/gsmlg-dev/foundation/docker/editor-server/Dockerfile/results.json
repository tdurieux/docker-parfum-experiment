{
  "startTime": 1674215622491,
  "endTime": 1674215624633,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 68,
        "lineEnd": 68,
        "columnStart": 4,
        "columnEnd": 65
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 83,
        "lineEnd": 83,
        "columnStart": 2,
        "columnEnd": 63
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 108,
        "lineEnd": 108,
        "columnStart": 16,
        "columnEnd": 76
      }
    },
    {
      "rule": "npmCacheCleanAfterInstall",
      "position": {
        "lineStart": 70,
        "lineEnd": 70,
        "columnStart": 5,
        "columnEnd": 23
      }
    },
    {
      "rule": "npmCacheCleanAfterInstall",
      "position": {
        "lineStart": 71,
        "lineEnd": 71,
        "columnStart": 5,
        "columnEnd": 24
      }
    },
    {
      "rule": "npmCacheCleanAfterInstall",
      "position": {
        "lineStart": 72,
        "lineEnd": 72,
        "columnStart": 5,
        "columnEnd": 37
      }
    },
    {
      "rule": "npmCacheCleanAfterInstall",
      "position": {
        "lineStart": 73,
        "lineEnd": 73,
        "columnStart": 5,
        "columnEnd": 36
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 22,
        "lineEnd": 43,
        "columnStart": 4,
        "columnEnd": 49
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 56,
        "lineEnd": 56,
        "columnStart": 4,
        "columnEnd": 34
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 69,
        "lineEnd": 69,
        "columnStart": 5,
        "columnEnd": 34
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 106,
        "lineEnd": 106,
        "columnStart": 4,
        "columnEnd": 42
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 127,
        "lineEnd": 127,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 133,
        "lineEnd": 133,
        "columnStart": 5,
        "columnEnd": 34
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 133,
        "lineEnd": 133,
        "columnStart": 38,
        "columnEnd": 63
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 134,
        "lineEnd": 134,
        "columnStart": 5,
        "columnEnd": 30
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 137,
        "lineEnd": 137,
        "columnStart": 4,
        "columnEnd": 32
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 22,
        "lineEnd": 43,
        "columnStart": 4,
        "columnEnd": 49
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 56,
        "lineEnd": 56,
        "columnStart": 4,
        "columnEnd": 34
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 69,
        "lineEnd": 69,
        "columnStart": 5,
        "columnEnd": 34
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 106,
        "lineEnd": 106,
        "columnStart": 4,
        "columnEnd": 42
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 127,
        "lineEnd": 127,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 137,
        "lineEnd": 137,
        "columnStart": 4,
        "columnEnd": 32
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 22,
        "lineEnd": 43,
        "columnStart": 4,
        "columnEnd": 49
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 56,
        "lineEnd": 56,
        "columnStart": 4,
        "columnEnd": 34
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 69,
        "lineEnd": 69,
        "columnStart": 5,
        "columnEnd": 34
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 106,
        "lineEnd": 106,
        "columnStart": 4,
        "columnEnd": 42
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 127,
        "lineEnd": 127,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 133,
        "lineEnd": 133,
        "columnStart": 5,
        "columnEnd": 34
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 133,
        "lineEnd": 133,
        "columnStart": 38,
        "columnEnd": 63
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 134,
        "lineEnd": 134,
        "columnStart": 5,
        "columnEnd": 30
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 137,
        "lineEnd": 137,
        "columnStart": 4,
        "columnEnd": 32
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 22,
        "lineEnd": 43,
        "columnStart": 4,
        "columnEnd": 49
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 56,
        "lineEnd": 56,
        "columnStart": 4,
        "columnEnd": 58
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 106,
        "lineEnd": 106,
        "columnStart": 4,
        "columnEnd": 66
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 127,
        "lineEnd": 127,
        "columnStart": 4,
        "columnEnd": 54
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 137,
        "lineEnd": 137,
        "columnStart": 4,
        "columnEnd": 56
      }
    }
  ],
  "repairedDockerfile": "ARG CODE_SERVER_VERSION=4.4.0\nFROM docker.io/gsmlg/code-server:v$CODE_SERVER_VERSION\n\nENV CODE_SERVER_VERSION=$CODE_SERVER_VERSION\nLABEL mantainer=\"Jonathan Gao <gsmlg.com@gmail.com>\"\nLABEL CODE_SERVER_VERSION=$CODE_SERVER_VERSION\n\nARG VERSION\nLABEL VERSION=$VERSION\nENV EDITOR_VERSION=$VERSION\n\nARG DEBIAN_FRONTEND=noninteractive\n\nENV container=docker\nENV TZ=Asia/Shanghai\n\nUSER root\n\n# update package list\nRUN apt-get update && apt-get upgrade -y\n\n# install useful packages\nRUN apt-get install --no-install-recommends -y -qq \\\n  git \\\n  gnupg \\\n  lsb-release \\\n  silversearcher-ag \\\n  tzdata \\\n  make \\\n  gcc pkg-config libssl-dev libcrypto++-dev \\\n  vim \\\n  zip unzip xz-utils \\\n  wget aria2 \\\n  protobuf-compiler \\\n  jq \\\n  nasm \\\n  bind9-dnsutils \\\n  knot-dnsutils \\\n  cloc \\\n  locales \\\n  inotify-tools \\\n  iputils-ping net-tools \\\n  apache2-utils \\\n  clang cmake ninja-build pkg-config libgtk-3-dev && rm -rf /var/lib/apt/lists/*;\n\n# Gen locale\nARG LANG=en_US.UTF-8\nENV LANG=$LANG\nENV LC_ALL=$LANG\nRUN echo $LANG UTF-8 | tee -a /etc/locale.gen \\\n    && locale-gen \\\n    && update-locale LANG=$LANG \\\n    && update-locale LC_ALL=$LANG\n\n# install jdk\nARG ANTLR_VERSION=4.10.1\nRUN apt-get install --no-install-recommends -y default-jdk \\\n  && curl -sSLf https://www.antlr.org/download/antlr-${ANTLR_VERSION}-complete.jar -o /usr/local/lib/antlr-${ANTLR_VERSION}-complete.jar \\\n  && echo \"#!/bin/bash\" > /usr/local/bin/antlr \\\n  && echo \"java -jar /usr/local/lib/antlr-${ANTLR_VERSION}-complete.jar \\\"$@\\\"\" >> /usr/local/bin/antlr \\\n  && chmod +x /usr/local/bin/antlr \\\n  && echo \"#!/bin/bash\" > /usr/local/bin/grun \\\n  && echo 'java org.antlr.v4.gui.TestRig \"$@\"' >> /usr/local/bin/grun \\\n  && chmod +x /usr/local/bin/grun && rm -rf /var/lib/apt/lists/*;\n\n# install nodejs\nARG NODEJS_VERSION=16\nENV NODE_PATH=/usr/lib/node_modules\nRUN curl -f -sL https://deb.nodesource.com/setup_${NODEJS_VERSION}.x | bash - \\\n  && apt-get install --no-install-recommends -y -qq nodejs \\\n  && npm install -g npm \\\n  && npm install -g yarn \\\n  && npm install -g npm-check-updates \\\n  && npm install -g @aws-amplify/cli \\\n  && echo \"export NODE_PATH=/usr/lib/node_modules\" | tee -a \"/etc/zsh/zshenv\" && npm cache clean --force; && rm -rf /var/lib/apt/lists/*;\n\n# install golang\nARG GO_VERSION=1.18.2\nARG GO111MODULE=on\nARG GOPATH=/opt/go\nENV GOPATH=$GOPATH\nRUN export ARCH=`dpkg --print-architecture`; \\\n  export GOPKG=\"go${GO_VERSION}.linux-${ARCH}.tar.gz\"; \\\n  curl -f -sSL \"https://golang.org/dl/${GOPKG}\" -o \"/tmp/${GOPKG}\" \\\n  && tar -C /usr/local -xzf \"/tmp/${GOPKG}\" \\\n  && mkdir -p \"${GOPATH}\" \\\n  && echo \"export PATH=\\${PATH}:/usr/local/go/bin:${GOPATH}/bin\" | tee -a \"/etc/zsh/zshenv\" \\\n  && echo \"export GOPATH=${GOPATH}\" | tee -a \"/etc/zsh/zshenv\" \\\n  && /usr/local/go/bin/go install golang.org/x/tools/gopls@latest \\\n  && /usr/local/go/bin/go install honnef.co/go/tools/cmd/staticcheck@latest \\\n  && /usr/local/go/bin/go install github.com/go-delve/delve/cmd/dlv@latest \\\n  && /usr/local/go/bin/go install github.com/ramya-rao-a/go-outline@latest \\\n  && /usr/local/go/bin/go install golang.org/x/tools/cmd/goimports@latest \\\n  && /usr/local/go/bin/go install google.golang.org/protobuf/cmd/protoc-gen-go@latest \\\n  && /usr/local/go/bin/go install github.com/minio/mc@latest \\\n  && /usr/local/go/bin/go install github.com/uudashr/gopkgs/v2/cmd/gopkgs@latest \\\n  && /usr/local/go/bin/go install github.com/go-delve/delve/cmd/dlv@latest \\\n  && /usr/local/go/bin/go install github.com/spf13/cobra-cli@latest \\\n  && /usr/local/go/bin/go install golang.org/x/mobile/cmd/gomobile@latest \\\n  && /usr/local/go/bin/go install golang.org/x/mobile/cmd/gobind@latest \\\n  && /usr/local/go/bin/go install github.com/evanw/esbuild/cmd/esbuild@latest \\\n  && /usr/local/go/bin/go env -w GO111MODULE=on \\\n  && /usr/local/go/bin/go env -w GOPROXY=https://goproxy.io,direct \\\n  && chown -R coder:coder \"${GOPATH}\"\n\n# install python\nRUN apt-get install --no-install-recommends -y python3 python3-pip \\\n  && update-alternatives --install /usr/bin/python python /usr/bin/python3.8 1 \\\n  && cd /tmp && curl -f -sSL https://bootstrap.pypa.io/get-pip.py -o get-pip.py \\\n  && python get-pip.py \\\n  && python -m pip install ansible \\\n  && python -m pip install awscli \\\n  && python -m pip install pipenv && rm -rf /var/lib/apt/lists/*;\n\n# install rust\nARG RUSTPATH=/opt/rust\nENV RUSTUP_HOME=${RUSTPATH}\nENV CARGO_HOME=${RUSTPATH}\nRUN export RUSTUP_HOME=${RUSTPATH} \\\n  && export CARGO_HOME=${RUSTPATH} \\\n  && echo \"export PATH=\\${PATH}:${RUSTPATH}/bin\" | tee -a \"/etc/zsh/zshenv\" \\\n  && echo \"export RUSTUP_HOME=${RUSTPATH}\" | tee -a \"/etc/zsh/zshenv\" \\\n  && echo \"export CARGO_HOME=${RUSTPATH}\" | tee -a \"/etc/zsh/zshenv\" \\\n  && curl https://sh.rustup.rs -sSf | sh -s -- -y --no-modify-path \\\n  && chown -R coder:coder \"${RUSTPATH}\"\n\n# install php\nRUN apt-get install --no-install-recommends -y php-cli && rm -rf /var/lib/apt/lists/*;\n\n# install erlang and elixir\nRUN curl -sSLf https://packages.erlang-solutions.com/erlang-solutions_2.0_all.deb -o /tmp/erlang-solutions_2.0_all.deb \\\n  && dpkg -i /tmp/erlang-solutions_2.0_all.deb \\\n  && apt-get update \\\n  && apt-get install --no-install-recommends -y esl-erlang || apt-get install --no-install-recommends -y erlang \\\n  && apt-get install --no-install-recommends -y elixir && rm -rf /var/lib/apt/lists/*;\n\n# install ruby\nRUN apt-get install --no-install-recommends -y ruby-full && rm -rf /var/lib/apt/lists/*;\n\n# install kubectl\nARG KUBECTL_VERSION=1.24.2\nRUN export ARCH=`dpkg --print-architecture`; \\\n  curl -sSfLo kubectl \"https://storage.googleapis.com/kubernetes-release/release/v${KUBECTL_VERSION}/bin/linux/${ARCH}/kubectl\" \\\n  && chmod +x kubectl \\\n  && mv kubectl /usr/local/bin/kubectl\n\n# install skaffold\nRUN export ARCH=`dpkg --print-architecture`; \\\n  curl -sSfLo skaffold \"https://storage.googleapis.com/skaffold/releases/latest/skaffold-linux-${ARCH}\" \\\n  && chmod +x skaffold \\\n  && mv skaffold /usr/local/bin/skaffold\n\n# install helm\nRUN curl -fL https://raw.githubusercontent.com/helm/helm/main/scripts/get-helm-3 | bash\n\n# install cli53 gsmlg-cli\nRUN export ARCH=`dpkg --print-architecture`; \\\n  curl -sSfL https://github.com/barnybug/cli53/releases/download/0.8.18/cli53-linux-${ARCH} -o /usr/local/bin/cli53 \\\n  && chmod +x /usr/local/bin/cli53 \\\n  && curl -sSfL https://github.com/gsmlg-dev/gsmlg-cli/releases/download/v1.5.0/gsmlg-cli_linux_${ARCH} -o /usr/local/bin/gsmlg-cli \\\n  && chmod +x /usr/local/bin/gsmlg-cli\n\n# install supabase\nRUN export ARCH=`dpkg --print-architecture`; \\\n  wget https://github.com/supabase/cli/releases/download/v0.28.1/supabase_0.28.1_linux_${ARCH}.deb -P /tmp/ \\\n  && dpkg -i /tmp/supabase_0.28.1_linux_${ARCH}.deb\n\n# install terraform\nRUN export TARGET_DIR=/tmp/terraform \\\n  && git clone https://github.com/hashicorp/terraform.git $TARGET_DIR \\\n  && cd $TARGET_DIR && /usr/local/go/bin/go install \\\n  && chown -R coder:coder \"${GOPATH}\"\n\n# clean cache install\nRUN rm -rf /var/cache/* && rm -rf /tmp/*\n\nUSER coder\n"
}