{
  "startTime": 1674216441933,
  "endTime": 1674216443090,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 22,
        "lineEnd": 22,
        "columnStart": 4,
        "columnEnd": 59
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 24,
        "lineEnd": 24,
        "columnStart": 4,
        "columnEnd": 43
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 26,
        "lineEnd": 26,
        "columnStart": 4,
        "columnEnd": 45
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 40,
        "lineEnd": 40,
        "columnStart": 4,
        "columnEnd": 76
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM alpine:3.15\n\n# Metadata\nLABEL org.label-schema.vendor=\"ScaleVector\" \\\n    org.label-schema.url=\"https://scalevector.ai\" \\\n    org.label-schema.name=\"DLT\" \\\n    org.label-schema.description=\"DLT is an open-source python-native scalable data loading framework that does not require any devops efforts to run.\"\n\n# prepare dirs to install autopoieses\nRUN mkdir -p /tmp/pydlt\n\nWORKDIR /tmp/pydlt\n\n# generated by make recreate-compiled-deps to install packages requiring compiler\n# recreate only when you have new deps requiring compilation - step below is very slow\nADD compiled_requirements.txt .\n\n# install alpine deps\nRUN apk update &&\\\n    apk add --no-cache python3 ca-certificates curl postgresql &&\\\n    apk add --no-cache --virtual build-deps build-base automake autoconf libtool python3-dev postgresql-dev libffi-dev linux-headers gcc musl-dev &&\\\n    ln -s /usr/bin/python3 /usr/bin/python && \\\n    curl -f https://bootstrap.pypa.io/get-pip.py -o get-pip.py && python3 get-pip.py && \\\n    rm get-pip.py && \\\n    pip3 install --no-cache-dir --upgrade setuptools wheel && \\\n    rm -r /usr/lib/python*/ensurepip && \\\n    pip3 install --no-cache-dir -r compiled_requirements.txt && \\\n    apk del --purge build-deps\n    #rm -r /root/.cache\n\n# add build labels and envs\nARG COMMIT_SHA=\"\"\nARG IMAGE_VERSION=\"\"\nLABEL commit_sha = ${COMMIT_SHA}\nLABEL version=${IMAGE_VERSION}\nENV COMMIT_SHA=${COMMIT_SHA}\nENV IMAGE_VERSION=${IMAGE_VERSION}\n\n# install exactly the same version of the library we used to build\nCOPY dist/python-dlt-${IMAGE_VERSION}.tar.gz .\nRUN pip3 install --no-cache-dir /tmp/pydlt/python-dlt-${IMAGE_VERSION}.tar.gz[gcp,redshift]\n\nWORKDIR /\nRUN rm -r /tmp/pydlt\n"
}