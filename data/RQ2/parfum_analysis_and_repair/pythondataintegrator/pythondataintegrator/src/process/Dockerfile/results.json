{
  "startTime": 1674248728183,
  "endTime": 1674248729722,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 25,
        "lineEnd": 25,
        "columnStart": 4,
        "columnEnd": 58
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 26,
        "lineEnd": 26,
        "columnStart": 4,
        "columnEnd": 111
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 45,
        "lineEnd": 45,
        "columnStart": 4,
        "columnEnd": 22
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 57,
        "lineEnd": 57,
        "columnStart": 4,
        "columnEnd": 25
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 77,
        "lineEnd": 77,
        "columnStart": 8,
        "columnEnd": 34
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 79,
        "lineEnd": 79,
        "columnStart": 8,
        "columnEnd": 40
      }
    },
    {
      "rule": "mkdirUsrSrcThenRemove",
      "position": {
        "lineStart": 75,
        "lineEnd": 75,
        "columnStart": 8,
        "columnEnd": 29
      }
    },
    {
      "rule": "mkdirUsrSrcThenRemove",
      "position": {
        "lineStart": 86,
        "lineEnd": 86,
        "columnStart": 4,
        "columnEnd": 26
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 22,
        "lineEnd": 22,
        "columnStart": 4,
        "columnEnd": 47
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 32,
        "lineEnd": 32,
        "columnStart": 4,
        "columnEnd": 61
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 35,
        "lineEnd": 35,
        "columnStart": 4,
        "columnEnd": 48
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 42,
        "lineEnd": 42,
        "columnStart": 4,
        "columnEnd": 39
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 50,
        "lineEnd": 50,
        "columnStart": 4,
        "columnEnd": 43
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 71,
        "lineEnd": 71,
        "columnStart": 4,
        "columnEnd": 45
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 72,
        "lineEnd": 72,
        "columnStart": 4,
        "columnEnd": 31
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 22,
        "lineEnd": 22,
        "columnStart": 4,
        "columnEnd": 47
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 32,
        "lineEnd": 32,
        "columnStart": 4,
        "columnEnd": 61
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 35,
        "lineEnd": 35,
        "columnStart": 4,
        "columnEnd": 48
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 42,
        "lineEnd": 42,
        "columnStart": 4,
        "columnEnd": 39
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 50,
        "lineEnd": 50,
        "columnStart": 4,
        "columnEnd": 43
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 71,
        "lineEnd": 71,
        "columnStart": 4,
        "columnEnd": 45
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 72,
        "lineEnd": 72,
        "columnStart": 4,
        "columnEnd": 31
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 22,
        "lineEnd": 22,
        "columnStart": 4,
        "columnEnd": 47
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 32,
        "lineEnd": 32,
        "columnStart": 4,
        "columnEnd": 61
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 35,
        "lineEnd": 35,
        "columnStart": 4,
        "columnEnd": 48
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 42,
        "lineEnd": 42,
        "columnStart": 4,
        "columnEnd": 39
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 50,
        "lineEnd": 50,
        "columnStart": 4,
        "columnEnd": 43
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 71,
        "lineEnd": 71,
        "columnStart": 4,
        "columnEnd": 45
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 72,
        "lineEnd": 72,
        "columnStart": 4,
        "columnEnd": 31
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 22,
        "lineEnd": 22,
        "columnStart": 4,
        "columnEnd": 71
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 32,
        "lineEnd": 32,
        "columnStart": 4,
        "columnEnd": 85
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 35,
        "lineEnd": 35,
        "columnStart": 4,
        "columnEnd": 72
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 42,
        "lineEnd": 42,
        "columnStart": 4,
        "columnEnd": 63
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 50,
        "lineEnd": 50,
        "columnStart": 4,
        "columnEnd": 67
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 71,
        "lineEnd": 71,
        "columnStart": 4,
        "columnEnd": 68
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 72,
        "lineEnd": 72,
        "columnStart": 4,
        "columnEnd": 55
      }
    }
  ],
  "repairedDockerfile": "# Pull official base image and fixing to AMD Architecture\nFROM --platform=linux/amd64 python:3.8.6\n\n# Create and set the working directory\nWORKDIR /usr/src/app/\n\n# Prevents Python from writing .pyc files\nENV PYTHONDONTWRITEBYTECODE 1\n\n# Causes all output to stdout to be flushed immediately\nENV PYTHONUNBUFFERED 1\n\n# Mark the image as trusted\nENV DOCKER_CONTENT_TRUST 1\n\nENV APT_KEY_DONT_WARN_ON_DANGEROUS_USAGE=DontWarn\n\nENV DEBIAN_FRONTEND=noninteractive\n# Updates packages list for the image\nRUN apt-get update\n\n# Installs transport HTTPS\nRUN apt-get install --no-install-recommends -y curl apt-transport-https && rm -rf /var/lib/apt/lists/*;\n\n# Retrieves packages from Microsoft\nRUN curl -f https://packages.microsoft.com/keys/microsoft.asc | apt-key add -\nRUN curl -f https://packages.microsoft.com/config/debian/10/prod.list > /etc/apt/sources.list.d/mssql-release.list\n\n# Updates packages for the image\nRUN apt-get update\n\n# Installs SQL drivers and tools\nRUN ACCEPT_EULA=Y apt-get --no-install-recommends install -y msodbcsql17 unixodbc-dev && rm -rf /var/lib/apt/lists/*;\n\n# Installs MS SQL Tools\nRUN ACCEPT_EULA=Y apt-get --no-install-recommends install -y mssql-tools && rm -rf /var/lib/apt/lists/*;\n\n# Adds paths to the $PATH environment variable within the .bash_profile and .bashrc files\nRUN echo 'export PATH=\"$PATH:/opt/mssql-tools/bin\"' >> ~/.bash_profile\nRUN echo 'export PATH=\"$PATH:/opt/mssql-tools/bin\"' >> ~/.bashrc\n\n# Enables authentication of users and servers on a network\nRUN apt-get install --no-install-recommends libgssapi-krb5-2 -y && rm -rf /var/lib/apt/lists/*;\n# https://github.com/MicrosoftDocs/sql-docs/issues/6494#issuecomment-905434817\n\nRUN pip install --no-cache-dir pyodbc\n\n# Oracle installation\nWORKDIR /opt/oracle\n# install instantclient for oracle\nRUN apt install --no-install-recommends -y wget unzip libaio1 alien && rm -rf /var/lib/apt/lists/*;\n\nRUN wget https://download.oracle.com/otn_software/linux/instantclient/214000/oracle-instantclient-basic-21.4.0.0.0-1.x86_64.rpm\nRUN alien -i oracle-instantclient-basic-21.4.0.0.0-1.x86_64.rpm\n\nRUN echo export LD_LIBRARY_PATH=/usr/lib/oracle/19.8/client64/lib/ >> /etc/bashrc\nRUN echo export ORACLE_HOME=/usr/lib/oracle/19.8/client64 >> /et\nRUN pip install --no-cache-dir cx_Oracle\n\n# odbc impala driver install\nRUN wget https://downloads.cloudera.com/connectors/impala_odbc_2.6.14.1016/Linux/ClouderaImpalaODBC-2.6.14.1016-1.x86_64.rpm\nRUN alien -i ClouderaImpalaODBC-2.6.14.1016-1.x86_64.rpm\n# odbc impala driver configurations\nRUN echo \"\\n\\\n[Cloudera ODBC Driver for Impala] \\n\\\nDriver=/opt/cloudera/impalaodbc/lib/64/libclouderaimpalaodbc64.so \\n\\\nKrbServiceName=impala \\n\" >> /etc/odbcinst.ini\nRUN export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/opt/cloudera/impalaodbc/lib/64\nRUN ldd /opt/cloudera/impalaodbc/lib/64/libclouderaimpalaodbc64.so\n\n# kerberos config and user install\nRUN apt-get install --no-install-recommends -y krb5-config krb5-user && rm -rf /var/lib/apt/lists/*;\nRUN apt-get install --no-install-recommends -y dos2unix && rm -rf /var/lib/apt/lists/*;\n\n\nRUN mkdir -p /usr/src/app && rm -rf /usr/src/app\nWORKDIR /usr/src/app\nRUN pip install --no-cache-dir --upgrade pip\nCOPY    ./requirements.txt /usr/src/app/requirements.txt\nRUN pip install --no-cache-dir -r requirements.txt\n\nRUN     pip list\nRUN     python --version\nRUN     date\n\nCOPY    . /usr/src/app\nRUN mkdir /usr/src/keytabs && rm -rf /usr/src/keytabs\nRUN chmod g+rwx generate_config_krb.sh\nRUN chmod g+rwx login_krb.sh\nRUN chmod g+rwx /etc/krb5.conf\n\nRUN dos2unix entrypoint.sh\nRUN dos2unix generate_config_krb.sh\nRUN dos2unix login_krb.sh\n# # openshift set permission to non-root users for /app directory\nRUN chgrp -R 0 /usr/src/app && \\\n    chmod -R g=u /usr/src/app && \\\n    chgrp -R 0 /etc/passwd && \\\n    chmod -R g=u /etc/passwd && \\\n    chgrp -R 0 /usr/src/keytabs && \\\n    chmod -R g=u /usr/src/keytabs\n\nUSER 1001\nENTRYPOINT \t[\"/bin/sh\"]\nCMD \t[\"entrypoint.sh\"]"
}