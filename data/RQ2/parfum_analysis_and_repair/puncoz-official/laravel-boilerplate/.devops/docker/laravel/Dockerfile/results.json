{
  "startTime": 1674253730249,
  "endTime": 1674253731868,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 68,
        "lineEnd": 68,
        "columnStart": 4,
        "columnEnd": 46
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM php:8.1-fpm-alpine\n\nLABEL MAINTAINER=\"Puncoz Nepal <info@puncoz.com>\"\n\n# Start as root\nUSER root\n\nRUN apk add --update --no-cache \\\n    curl git bash git-bash-completion \\\n    libzip-dev zip unzip \\\n    freetype-dev libpng-dev libjpeg-turbo-dev \\\n    py-pip supervisor \\\n    postgresql-dev \\\n    tzdata \\\n    nodejs npm yarn\n\nRUN apk --no-cache add pcre-dev ${PHPIZE_DEPS} \\\n      && pecl install redis \\\n      && docker-php-ext-enable redis \\\n      && apk del pcre-dev ${PHPIZE_DEPS} \\\n      && rm -rf /tmp/pear\n\nRUN docker-php-ext-configure gd --with-freetype --with-jpeg\nRUN docker-php-ext-configure exif --enable-exif\n\nRUN docker-php-ext-configure zip && \\\n        docker-php-ext-install zip pdo pdo_pgsql pcntl bcmath gd exif && \\\n        php -m | grep -q 'zip'\n\n###########################################################################\n# Non-root user:\n###########################################################################\n\n# Add a non-root user to prevent files being created with root permissions on host machine.\nARG PUID=1000\nENV PUID ${PUID}\nARG PGID=1000\nENV PGID ${PGID}\n\nARG DOCKER_USER\nARG USER_HOME=/home/${DOCKER_USER}\n\nRUN set -xe; \\\n    addgroup -g ${PGID} -S ${DOCKER_USER} && \\\n    adduser -u ${PUID} --disabled-password ${DOCKER_USER} -G ${DOCKER_USER} -s /bin/bash\n\n###########################################################################\n# User Aliases\n###########################################################################\n\nUSER ${DOCKER_USER}\n\nCOPY ./conf/aliases.sh /home/${DOCKER_USER}/aliases.sh\n\nRUN echo \"\" >> ~/.bashrc && \\\n    echo \"# Load Custom Aliases\" >> ~/.bashrc && \\\n    echo \"source ~/aliases.sh\" >> ~/.bashrc && \\\n    echo \"\" >> ~/.bashrc\n\nCMD [\"/bin/sh\", \"-l\"]\n\n###########################################################################\n# Composer:\n###########################################################################\n\nUSER root\n\n# install composer\nRUN curl -f -sS https://getcomposer.org/installer | php -- --install-dir=/usr/local/bin --filename=composer\n\n###########################################################################\n# Crontab\n###########################################################################\n\nUSER root\n\n# preserve new line crontrab needs line end\n#RUN echo \"\" >> /etc/crontabs/${DOCKER_USER} && \\\n#    echo '* * * * * ${DOCKER_USER} /usr/bin/php /var/www/artisan schedule:run >> /dev/null 2>&1' >> /etc/crontabs/${DOCKER_USER}\n#\n#RUN chmod -R 644 /etc/crontabs\n\n\n###########################################################################\n# SUPERVISOR:\n###########################################################################\n\nUSER root\n\nCOPY  ./conf/supervisord.conf /etc/supervisord.conf\nCOPY  ./conf/supervisord.d/*.conf /etc/supervisor.d/\nRUN mkdir /var/log/supervisor  && touch /var/log/supervisor/supervisord.log\n\n#\n#--------------------------------------------------------------------------\n# Final Touch\n#--------------------------------------------------------------------------\n#\n\nCOPY ./conf/laravel.ini /usr/local/etc/php/conf.d\nCOPY ./conf/laravel.pool.conf /usr/local/etc/php-fpm.d/\n\n# Set default work directory\nWORKDIR /var/www\n\nCOPY ./entrypoint.sh /entrypoint.sh\nRUN chmod +x /entrypoint.sh\n#CMD [\"supervisord -c /etc/supervisord.conf\"]\n#CMD [\"php-fpm\"]\nENTRYPOINT [\"/entrypoint.sh\"]\n\nEXPOSE 9000\n"
}