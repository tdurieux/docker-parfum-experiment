{
  "startTime": 1674250387532,
  "endTime": 1674250388141,
  "originalSmells": [
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 16,
        "lineEnd": 16,
        "columnStart": 4,
        "columnEnd": 21
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 6,
        "lineEnd": 6,
        "columnStart": 5,
        "columnEnd": 58
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "# FROM postgres:latest\nFROM postgres:9.6\nEXPOSE 5432\n\nRUN apt-get update \\\n  # && apt-get install -y postgresql-plpython-${PG_MAJOR} python-pip \\\n  && apt-get install --no-install-recommends -y postgresql-plpython-9.6 python-pip \\\n  && rm -rf /var/lib/apt/lists/*\n\n# Installing the postgresql-plpython overrides the postgresql.conf.sample file generated by the postgres Dockerfile,\n# which then causes the postgres.conf to not have the listen_addresses='*' setting, which is required in order to\n# connect to the database from another machine. Overcome this by removing the postgresql.conf.sample created by\n# postgresql-plpython and re-linking the Dockerfile's postgresql.conf.sample.\nRUN rm /usr/share/postgresql/${PG_MAJOR}/postgresql.conf.sample \\\n  && ln -sv /usr/share/postgresql/postgresql.conf.sample /usr/share/postgresql/$PG_MAJOR/\n\nRUN pip install --no-cache-dir redis\n\nCOPY ./postgres/maintenance /usr/local/bin/maintenance\nRUN chmod +x /usr/local/bin/maintenance/*\nRUN mv /usr/local/bin/maintenance/* /usr/local/bin \\\n  && rmdir /usr/local/bin/maintenance \\\n  && mkdir /backups\n\nENTRYPOINT [\"docker-entrypoint.sh\"]\nCMD [\"postgres\"]\n"
}