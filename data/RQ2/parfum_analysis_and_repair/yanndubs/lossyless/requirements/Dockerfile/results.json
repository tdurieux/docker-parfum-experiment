{
  "startTime": 1674254248950,
  "endTime": 1674254249715,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 65,
        "lineEnd": 65,
        "columnStart": 4,
        "columnEnd": 50
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 134,
        "lineEnd": 134,
        "columnStart": 4,
        "columnEnd": 40
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "# ==================================================================\n# module list\n# ------------------------------------------------------------------\n# ubuntu                18.04   \n# cuda                  10.2\n# cudnn7                7   \n# python                3.8    (apt)\n# gfortran              latest (apt)\n# nodejs                15     (apt)\n# pytorch               latest (pip)\n# jupyterlab (+ ext)    latest (pip)\n# requirements          latest (pip)\n# ==================================================================\n# Credits : modified from https://github.com/ufoym/deepo\n# ------------------------------------------------------------------\n\nFROM nvidia/cuda:10.2-cudnn7-devel-ubuntu18.04\nENV LANG C.UTF-8\nARG PYTHON_VERSION=3.8\n\nRUN APT_INSTALL=\"apt-get install -y --no-install-recommends\" && \\\n    PIP_INSTALL=\"python -m pip --no-cache-dir install --upgrade\" && \\\n    GIT_CLONE=\"git clone --depth 10\" && \\\n\n    rm -rf /var/lib/apt/lists/* \\\n           /etc/apt/sources.list.d/cuda.list \\\n           /etc/apt/sources.list.d/nvidia-ml.list && \\\n\n    apt-get upgrade && \\\n    apt-get update && \\\n\n# ==================================================================\n# tools\n# ------------------------------------------------------------------\n\n    DEBIAN_FRONTEND=noninteractive $APT_INSTALL \\\n        build-essential \\\n        apt-utils \\\n        ca-certificates \\\n        wget \\\n        git \\\n        vim \\\n        libssl-dev \\\n        curl \\\n        unzip \\\n        unrar \\\n        && \\\n\n    $GIT_CLONE https://github.com/Kitware/CMake ~/cmake && \\\n    cd ~/cmake && \\\n    ./bootstrap && \\\n    make -j\"$(nproc)\" install && \\\n\n# ==================================================================\n# gfortran\n# ------------------------------------------------------------------\n\n    DEBIAN_FRONTEND=noninteractive $APT_INSTALL \\\n        gfortran \\\n        && \\\n\n# ==================================================================\n# nodejs\n# ------------------------------------------------------------------\n\n    curl -f -sL https://deb.nodesource.com/setup_15.x | bash - \\\n        && \\\n    DEBIAN_FRONTEND=noninteractive $APT_INSTALL \\\n        nodejs \\\n        && \\\n\n# ==================================================================\n# python\n# ------------------------------------------------------------------\n\n    DEBIAN_FRONTEND=noninteractive $APT_INSTALL \\\n        software-properties-common \\\n        && \\\n    add-apt-repository ppa:deadsnakes/ppa && \\\n    apt-get update && \\\n    DEBIAN_FRONTEND=noninteractive $APT_INSTALL \\\n        python\"$PYTHON_VERSION\" \\\n        python\"$PYTHON_VERSION\"-dev \\\n        python3-distutils-extra \\\n        && \\\n    wget -O ~/get-pip.py \\\n        https://bootstrap.pypa.io/get-pip.py && \\\n    python\"$PYTHON_VERSION\" ~/get-pip.py && \\\n        ln -s /usr/bin/python\"$PYTHON_VERSION\" /usr/local/bin/python3 && \\\n        ln -s /usr/bin/python\"$PYTHON_VERSION\" /usr/local/bin/python && \\\n        $PIP_INSTALL \\\n            setuptools \\\n            && \\\n\n# ==================================================================\n# IDE\n# ------------------------------------------------------------------\n\n    $PIP_INSTALL \\\n        black \\\n        isort \\\n        flake8 \\\n        && \\\n\n# ==================================================================\n# jupyter lab\n# ------------------------------------------------------------------\n\n    $PIP_INSTALL \\\n        jupyterlab \\\n        ipywidgets \\\n        jupyterlab_code_formatter \\\n        jupyterlab-system-monitor \\\n        jupyterlab-topbar \\\n        && \\\n\n# ==================================================================\n# pytorch\n# ------------------------------------------------------------------\n\n    $PIP_INSTALL \\\n        future \\\n        numpy \\\n        protobuf \\\n        pyyaml \\\n        && \\\n    $PIP_INSTALL \\\n        torch torchvision\n\n# ==================================================================\n# requirements\n# ------------------------------------------------------------------\n\nCOPY requirements.txt /tmp/\nRUN pip install --no-cache-dir -r /tmp/requirements.txt && \\\n    rm /tmp/requirements.txt\n\n# ==================================================================\n# config & cleanup\n# ------------------------------------------------------------------\n\nRUN ldconfig && \\\n        apt-get clean && \\\n        apt-get autoremove && \\\n        rm -rf /var/lib/apt/lists/* /tmp/* ~/*\n\nEXPOSE 8888 8889 6006\n"
}