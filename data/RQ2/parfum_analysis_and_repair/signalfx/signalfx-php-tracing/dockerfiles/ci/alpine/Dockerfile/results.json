{
  "startTime": 1674253595735,
  "endTime": 1674253596512,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 88,
        "lineEnd": 88,
        "columnStart": 4,
        "columnEnd": 145
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM alpine:3.11\n\nENV PHP_SRC_DIR=/usr/local/src/php\nENV PHP_INSTALL_DIR=/opt/php\n\nRUN set -eux; \\\n# Install deps\n    apk add --no-cache \\\n        argon2-dev \\\n        autoconf \\\n        bison \\\n        bash \\\n        ca-certificates \\\n        coreutils \\\n        curl \\\n        curl-dev \\\n        dpkg \\\n        dpkg-dev \\\n        file \\\n        g++ \\\n        gcc \\\n        gdb \\\n        git \\\n        gnupg \\\n        libc-dev \\\n        libedit-dev \\\n        libffi-dev \\\n        libmemcached \\\n        libmemcached-dev \\\n        libsodium-dev \\\n        libxml2-dev \\\n        libzip-dev \\\n        linux-headers \\\n        make \\\n        oniguruma-dev \\\n        openssh \\\n        openssl \\\n        openssl-dev \\\n        postgresql-dev \\\n        pkgconf \\\n        py-pip \\\n        python-dev \\\n        re2c \\\n        sqlite-dev \\\n        sudo \\\n        tar \\\n        valgrind \\\n        vim \\\n        xz \\\n        zlib-dev \\\n    ; \\\n# Add user/group for circleci\n    addgroup -g 3434 -S circleci; \\\n    adduser -u 3434 -D -S -G circleci -G wheel circleci; \\\n    sed -e 's/# %wheel ALL=(ALL) NOPASSWD: ALL/%wheel ALL=(ALL) NOPASSWD: ALL/g' -i /etc/sudoers; \\\n    adduser circleci wheel; \\\n# Fix \"sudo: setrlimit(RLIMIT_CORE): Operation not permitted\" error\n    echo \"Set disable_coredump false\" >> /etc/sudo.conf; \\\n# Add www-data user\n    addgroup -g 82 -S www-data; \\\n    adduser -u 82 -D -S -G www-data www-data; \\\n# 82 is the standard uid/gid for \"www-data\" in Alpine\n# https://git.alpinelinux.org/aports/tree/main/apache2/apache2.pre-install?h=3.9-stable\n# allow running as an arbitrary user (https://github.com/docker-library/php/issues/743)\n    [ ! -d /var/www/html ]; \\\n    mkdir -p /var/www/html; \\\n    chown www-data:www-data /var/www/html; \\\n    chmod 777 /var/www/html; \\\n# Share welcome message with the world\n    echo '[ ! -z \"$TERM\" -a -r /etc/motd ] && cat /etc/motd' \\\n        >> /etc/bash.bashrc; \\\n# Setup php source directory\n    mkdir -p $PHP_SRC_DIR; \\\n    chown -R circleci:circleci /usr/local/src; \\\n# Setup php install directory\n    mkdir -p $PHP_INSTALL_DIR; \\\n    chown -R circleci:circleci /opt; \\\n# Install Docker\n    export DOCKER_VERSION=$(curl --silent --fail --retry 3 https://download.docker.com/linux/static/stable/x86_64/ | grep -o -e 'docker-[.0-9]*-ce\\.tgz' | sort -r | head -n 1); \\\n    DOCKER_URL=\"https://download.docker.com/linux/static/stable/x86_64/${DOCKER_VERSION}\"; \\\n    curl --silent --show-error --location --fail --retry 3 --output /tmp/docker.tgz \"${DOCKER_URL}\"; \\\n    ls -lha /tmp/docker.tgz; \\\n    tar -xz -C /tmp -f /tmp/docker.tgz; \\\n    mv /tmp/docker/* /usr/bin; \\\n    rm -rf /tmp/docker /tmp/docker.tgz; \\\n    which docker; \\\n    (docker version || true); \\\n# Install docker-compose\n    curl -f -L \"https://github.com/docker/compose/releases/download/1.25.0/docker-compose-$(uname -s)-$(uname -m)\" -o /usr/local/bin/docker-compose; \\\n    chmod +x /usr/local/bin/docker-compose; \\\n    which docker-compose; \\\n    (docker-compose --version || true); \\\n# Install dockerize\n    DOCKERIZE_URL=\"https://circle-downloads.s3.amazonaws.com/circleci-images/cache/linux-amd64/dockerize-latest.tar.gz\"; \\\n    curl --silent --show-error --location --fail --retry 3 --output /tmp/dockerize-linux-amd64.tar.gz $DOCKERIZE_URL; \\\n    tar -C /usr/local/bin -xzvf /tmp/dockerize-linux-amd64.tar.gz; \\\n    rm -rf /tmp/dockerize-linux-amd64.tar.gz; \\\n    dockerize --version;\n\n# Run everything else as circleci user\nUSER circleci\n\nRUN set -eux; \\\n# Pretty prompt\n    echo \"PS1='\\[\\033[01;32m\\]\\u\\[\\033[00m\\]\\[\\033[00;32m\\](alpine)\\[\\033[00m\\]:\\[\\033[01;34m\\]\\w\\[\\033[00m\\]\\$ '\" | \\\n        tee -a /home/circleci/.bashrc; \\\n# Handy aliases\n    echo \"alias ll='ls -al'\" | \\\n        tee -a /home/circleci/.bashrc; \\\n# Please remember gdb history\n    echo 'set history save on' >> /home/circleci/.gdbinit; \\\n        chmod 600 /home/circleci/.gdbinit;\n\nCOPY switch-php /usr/local/bin/\n\nWORKDIR /home/circleci\n\n# Override stop signal to stop process gracefully\n# https://github.com/php/php-src/blob/17baa87faddc2550def3ae7314236826bc1b1398/sapi/fpm/php-fpm.8.in#L163\nSTOPSIGNAL SIGQUIT\n\nEXPOSE 9000\nEXPOSE 80\n"
}