{
  "startTime": 1674254264013,
  "endTime": 1674254264919,
  "originalSmells": [
    {
      "rule": "wgetUseHttpsUrl",
      "position": {
        "lineStart": 48,
        "lineEnd": 48,
        "columnStart": 16,
        "columnEnd": 76
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "# Copyright 2017 The Kubernetes Authors.\n#\n# Licensed under the Apache License, Version 2.0 (the \"License\");\n# you may not use this file except in compliance with the License.\n# You may obtain a copy of the License at\n#\n#     http://www.apache.org/licenses/LICENSE-2.0\n#\n# Unless required by applicable law or agreed to in writing, software\n# distributed under the License is distributed on an \"AS IS\" BASIS,\n# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n# See the License for the specific language governing permissions and\n# limitations under the License.\n\nFROM gcr.io/google_containers/ubuntu-slim:0.9\n\nARG BUILD_DATE\nARG VCS_REF\nARG CASSANDRA_VERSION\nARG DEV_CONTAINER\n\nLABEL \\\n    org.label-schema.build-date=$BUILD_DATE \\\n    org.label-schema.docker.dockerfile=\"/Dockerfile\" \\\n    org.label-schema.license=\"Apache License 2.0\" \\\n    org.label-schema.name=\"k8s-for-greeks/docker-cassandra-k8s\" \\\n    org.label-schema.url=\"https://github.com/k8s-for-greeks/\" \\\n    org.label-schema.vcs-ref=$VCS_REF \\\n    org.label-schema.vcs-type=\"Git\" \\\n    org.label-schema.vcs-url=\"https://github.com/k8s-for-greeks/docker-cassandra-k8s\"\n\nENV CASSANDRA_HOME=/usr/local/apache-cassandra-${CASSANDRA_VERSION} \\\n    CASSANDRA_CONF=/etc/cassandra \\\n    CASSANDRA_DATA=/cassandra_data \\\n    CASSANDRA_LOGS=/var/log/cassandra \\\n    JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64 \\\n    PATH=${PATH}:/usr/lib/jvm/java-8-openjdk-amd64/bin:/usr/local/apache-cassandra-${CASSANDRA_VERSION}/bin  \\\n    DI_VERSION=1.2.0 \\\n    DI_SHA=81231da1cd074fdc81af62789fead8641ef3f24b6b07366a1c34e5b059faf363\n\nADD files /\n\nRUN set -e && echo 'debconf debconf/frontend select Noninteractive' | debconf-set-selections \\\n  && apt-get update && apt-get -qq -y --force-yes install --no-install-recommends \\\n    openjdk-8-jre-headless \\\n    libjemalloc1 \\\n    localepurge \\\n    wget && \\\n  mirror_url=$( wget -q -O - https://www.apache.org/dyn/closer.cgi/cassandra/ \\\n        | sed -n 's#.*href=\"\\(http://.*/cassandra\\/[^\"]*\\)\".*#\\1#p' \\\n        | head -n 1) \\\n\n    && wget -q -O - ${mirror_url}/${CASSANDRA_VERSION}/apache-cassandra-${CASSANDRA_VERSION}-bin.tar.gz \\\n        | tar -xzf - -C /usr/local \\\n    && wget -q -O - https://github.com/Yelp/dumb-init/releases/download/v${DI_VERSION}/dumb-init_${DI_VERSION}_amd64 > /sbin/dumb-init \\\n    && echo \"$DI_SHA  /sbin/dumb-init\" | sha256sum -c - \\\n    && chmod +x /sbin/dumb-init \\\n    && chmod +x /ready-probe.sh \\\n    && mkdir -p /cassandra_data/data \\\n    && mkdir -p /etc/cassandra \\\n    && mv /logback.xml /cassandra.yaml /jvm.options /etc/cassandra/ \\\n    && mv /usr/local/apache-cassandra-${CASSANDRA_VERSION}/conf/cassandra-env.sh /etc/cassandra/ \\\n    && adduser --disabled-password --no-create-home --gecos '' --disabled-login cassandra \\\n    && chown cassandra: /ready-probe.sh \\\n    && if [ -n \"$DEV_CONTAINER\" ]; then apt-get -y --no-install-recommends install python; else rm -rf  $CASSANDRA_HOME/pylib; fi \\\n    && apt-get -y purge wget localepurge \\\n    && apt-get -y autoremove \\\n    && apt-get clean \\\n    && rm -rf \\\n        $CASSANDRA_HOME/*.txt \\\n        $CASSANDRA_HOME/doc \\\n        $CASSANDRA_HOME/javadoc \\\n        $CASSANDRA_HOME/tools/*.yaml \\\n        $CASSANDRA_HOME/tools/bin/*.bat \\\n        $CASSANDRA_HOME/bin/*.bat \\\n    doc \\\n    man \\\n    info \\\n    locale \\\n    common-licenses \\\n    ~/.bashrc \\\n        /var/lib/apt/lists/* \\\n        /var/log/* \\\n        /var/cache/debconf/* \\\n        /etc/systemd \\\n        /lib/lsb \\\n        /lib/udev \\\n        /usr/share/doc/ \\\n        /usr/share/doc-base/ \\\n        /usr/share/man/ \\\n        /tmp/* \\\n        /usr/lib/jvm/java-8-openjdk-amd64/jre/plugin \\\n        /usr/lib/jvm/java-8-openjdk-amd64/jre/bin/javaws \\\n        /usr/lib/jvm/java-8-openjdk-amd64/jre/bin/jjs \\\n        /usr/lib/jvm/java-8-openjdk-amd64/jre/bin/orbd \\\n        /usr/lib/jvm/java-8-openjdk-amd64/bin/pack200 \\\n        /usr/lib/jvm/java-8-openjdk-amd64/jre/bin/policytool \\\n        /usr/lib/jvm/java-8-openjdk-amd64/jre/bin/rmid \\\n        /usr/lib/jvm/java-8-openjdk-amd64/jre/bin/rmiregistry \\\n        /usr/lib/jvm/java-8-openjdk-amd64/jre/bin/servertool \\\n        /usr/lib/jvm/java-8-openjdk-amd64/bin/tnameserv \\\n        /usr/lib/jvm/java-8-openjdk-amd64/jre/bin/unpack200 \\\n        /usr/lib/jvm/java-8-openjdk-amd64/jre/lib/javaws.jar \\\n        /usr/lib/jvm/java-8-openjdk-amd64/jre/lib/deploy* \\\n        /usr/lib/jvm/java-8-openjdk-amd64/jre/lib/desktop \\\n        /usr/lib/jvm/java-8-openjdk-amd64/jre/lib/*javafx* \\\n        /usr/lib/jvm/java-8-openjdk-amd64/jre/lib/*jfx* \\\n        /usr/lib/jvm/java-8-openjdk-amd64/jre/lib/amd64/libdecora_sse.so \\\n        /usr/lib/jvm/java-8-openjdk-amd64/jre/lib/amd64/libprism_*.so \\\n        /usr/lib/jvm/java-8-openjdk-amd64/jre/lib/amd64/libfxplugins.so \\\n        /usr/lib/jvm/java-8-openjdk-amd64/jre/lib/amd64/libglass.so \\\n        /usr/lib/jvm/java-8-openjdk-amd64/jre/lib/amd64/libgstreamer-lite.so \\\n        /usr/lib/jvm/java-8-openjdk-amd64/jre/lib/amd64/libjavafx*.so \\\n        /usr/lib/jvm/java-8-openjdk-amd64/jre/lib/amd64/libjfx*.so \\\n        /usr/lib/jvm/java-8-openjdk-amd64/jre/lib/ext/jfxrt.jar \\\n        /usr/lib/jvm/java-8-openjdk-amd64/jre/lib/ext/nashorn.jar \\\n        /usr/lib/jvm/java-8-openjdk-amd64/jre/lib/oblique-fonts \\\n        /usr/lib/jvm/java-8-openjdk-amd64/jre/lib/plugin.jar \\\n        /usr/lib/jvm/java-8-openjdk-amd64/man\n\n\nVOLUME [\"/$CASSANDRA_DATA\"]\n\n# 7000: intra-node communication\n# 7001: TLS intra-node communication\n# 7199: JMX\n# 9042: CQL\n# 9160: thrift service\nEXPOSE 7000 7001 7199 9042 9160\n\nCMD [\"/sbin/dumb-init\", \"/bin/bash\", \"/run.sh\"]\n"
}