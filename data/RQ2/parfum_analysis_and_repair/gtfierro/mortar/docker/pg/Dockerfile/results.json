{
  "startTime": 1674221132545,
  "endTime": 1674221133220,
  "originalSmells": [
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 7,
        "lineEnd": 16,
        "columnStart": 22,
        "columnEnd": 10
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 32,
        "lineEnd": 32,
        "columnStart": 22,
        "columnEnd": 68
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 7,
        "lineEnd": 16,
        "columnStart": 22,
        "columnEnd": 10
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 32,
        "lineEnd": 32,
        "columnStart": 22,
        "columnEnd": 68
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 7,
        "lineEnd": 15,
        "columnStart": 22,
        "columnEnd": 10
      }
    }
  ],
  "repairedDockerfile": "FROM postgres:12\n\nARG MORTAR_DB_USER=mortarchangeme\nARG MORTAR_DB_PASSWORD=mortarpasswordchangeme\n\n# Silence debconf TERM messages\nRUN echo \"debconf debconf/frontend select Noninteractive\" | debconf-set-selections\nRUN apt-get update && apt-get install --no-install-recommends -y \\\n      postgresql-plpython3-12 \\\n      python3-dev \\\n      python3-pip \\\n\n      software-properties-common \\\n      apt-transport-https \\\n      ca-certificates \\\n      gnupg \\\n      wget && rm -rf /var/lib/apt/lists/*;\n\n# Setup postgresql data dir and config\nRUN mkdir /data/\nRUN cat /usr/share/postgresql/postgresql.conf.sample > /data/postgresql.conf\n\n# PostgreSQL ENV variables\nENV POSTGRES_USER=$MORTAR_DB_USER\nENV POSTGRES_PASSWORD=$MORTAR_DB_PASSWORD\nENV POSTGRES_HOST_AUTH_METHOD=password\nENV POSTGRES_DB=mortar\nENV PGDATA=/data/\n\n# Add timescale\nRUN sh -c \"echo 'deb https://packagecloud.io/timescale/timescaledb/debian/ `lsb_release -c -s` main' > /etc/apt/sources.list.d/timescaledb.list\"\nRUN wget --quiet -O - https://packagecloud.io/timescale/timescaledb/gpgkey | apt-key add -\nRUN apt-get update && apt-get install --no-install-recommends -y timescaledb-2-postgresql-12 && rm -rf /var/lib/apt/lists/*;\nRUN timescaledb-tune --quiet --yes --conf-path=/data/postgresql.conf\n\n# Add initialization scripts\nADD install_timescale.sh /docker-entrypoint-initdb.d/001_install.sh\nADD setup.sql /docker-entrypoint-initdb.d/002_setup.sql\n# from https://github.com/timescale/timescaledb-extras/blob/master/backfill.sql\nADD backfill.sql /docker-entrypoint-initdb.d/003_backfill.sql\n\nRUN pg_lsclusters\n\n\nVOLUME /data\nEXPOSE 5432\n"
}