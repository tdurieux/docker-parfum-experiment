{
  "startTime": 1674255146546,
  "endTime": 1674255147907,
  "originalSmells": [
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 31,
        "lineEnd": 36,
        "columnStart": 22,
        "columnEnd": 11
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 31,
        "lineEnd": 36,
        "columnStart": 22,
        "columnEnd": 11
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM debian:buster-slim\n\nLABEL \\\n    org.opencontainers.image.authors=\"ggiunta@gmail.com\" \\\n    org.opencontainers.image.url=\"https://github.com/gggeek/db-3v4l\" \\\n    org.opencontainers.image.documentation=\"https://github.com/gggeek/db-3v4l\" \\\n    org.opencontainers.image.source=\"https://github.com/gggeek/db-3v4l\" \\\n    org.opencontainers.image.licenses=\"GPL-2.0-or-later\" \\\n    org.opencontainers.image.title=\"DB-3va4l Web\"\n\nARG debian_mirror=none\nARG timezone=none\nARG do_update_os=true\nARG do_shrink_container=true\n\n# Set up debian mirror\n# (use fixed debian mirrors if you have problems building on a given day)\n# -----------------------------------------------------------------------------\nRUN if [ \"${debian_mirror}\" != \"none\" ]; then printf \"deb ${debian_mirror} buster main\\ndeb http://security.debian.org buster/updates main\\n\" > /etc/apt/sources.list; fi\n\n# Configure timezone\n# -----------------------------------------------------------------------------\nRUN if [ \"${timezone}\" != \"none\" ]; then echo \"${timezone}\" > /etc/timezone && dpkg-reconfigure -f noninteractive tzdata; fi\n\n# Update preinstalled packages\n# -----------------------------------------------------------------------------\nRUN if [ \"${do_update_os}\" != \"false\" ]; then apt-get update && DEBIAN_FRONTEND=noninteractive apt-get -y upgrade ; fi\n\n# Base packages - nginx, php-fpm, ...\n# NB All db interaction is done by the 'admin' and 'worker' images...\n# -----------------------------------------------------------------------------\nRUN apt-get update && DEBIAN_FRONTEND=noninteractive apt-get --no-install-recommends -y install \\\n    nginx \\\n    php-fpm \\\n    php-mbstring \\\n    php-xml \\\n    php-zip && rm -rf /var/lib/apt/lists/*;\n\n# Set up Nginx+PHP\n# -----------------------------------------------------------------------------\nCOPY nginx/sites-enabled/* /etc/nginx/sites-enabled/\nRUN rm /etc/nginx/sites-enabled/default\nCOPY php/7.3/fpm/pool.d/db3v4l.conf /etc/php/7.3/fpm/pool.d/db3v4l.conf\nRUN rm /etc/php/7.3/fpm/pool.d/www.conf\n\n# Clear archives in apt cache folder\n# -----------------------------------------------------------------------------\nRUN if [ \"${do_shrink_container}\" != \"false\" ]; then apt-get clean && rm -rf /var/lib/apt/lists/*; fi\n\n# Set up entrypoint\n# -----------------------------------------------------------------------------\nCOPY bootstrap.sh /root/bootstrap.sh\nRUN chmod 755 /root/bootstrap.sh\n\nEXPOSE 80\nEXPOSE 443\n\nENTRYPOINT [\"/root/bootstrap.sh\"]\n"
}