{
  "startTime": 1674251543394,
  "endTime": 1674251544939,
  "originalSmells": [
    {
      "rule": "yarnCacheCleanAfterInstall",
      "position": {
        "lineStart": 13,
        "lineEnd": 13,
        "columnStart": 4,
        "columnEnd": 20
      }
    },
    {
      "rule": "yarnCacheCleanAfterInstall",
      "position": {
        "lineStart": 14,
        "lineEnd": 14,
        "columnStart": 4,
        "columnEnd": 16
      }
    },
    {
      "rule": "yarnCacheCleanAfterInstall",
      "position": {
        "lineStart": 32,
        "lineEnd": 32,
        "columnStart": 4,
        "columnEnd": 16
      }
    },
    {
      "rule": "apkAddUseNoCache",
      "position": {
        "lineStart": 2,
        "lineEnd": 2,
        "columnStart": 4,
        "columnEnd": 28
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM node:12.16.1-alpine AS build\n\nRUN apk add --no-cache python2 make g++\n\nWORKDIR /workspace\n\nCOPY package.json /workspace/package.json\nCOPY packages/ssr /workspace/packages/ssr\nCOPY packages/base /workspace/packages/base\nCOPY packages/plugins  /workspace/packages/plugins\nCOPY .yarnrc /workspace\nCOPY yarn.lock  /workspace\n\nRUN yarn config list && yarn cache clean;\nRUN yarn install && yarn cache clean;\n\nCOPY . /workspace/\n\n# NODE_ENV production need to be after yarn install, otherwise devdependencies are not installed\nENV NODE_ENV=production\n\nRUN yarn build:main\n\nFROM node:12.16.1-alpine\n\nWORKDIR /workspace\n\nCOPY --from=build /workspace/package.json /workspace/package.json\nCOPY --from=build /workspace/packages/ssr /workspace/packages/ssr\nCOPY --from=build /workspace/.yarnrc /workspace/.yarnrc\nCOPY --from=build /workspace/yarn.lock /workspace/yarn.lock\n\nRUN yarn install && yarn cache clean;\n\n# NODE_ENV production need to be after yarn install, otherwise devdependencies are not installed\nENV NODE_ENV=production\n\nCOPY --from=build /workspace/build /workspace/build\nCOPY --from=build /workspace/config /workspace/config\nCOPY --from=build /workspace/.babelrc /workspace/.babelrc\nCOPY --from=build /workspace/webpack /workspace/webpack\nCOPY --from=build /workspace/src/app/routesMap.js /workspace/src/app/routesMap.js\n\nCMD [\"./node_modules/.bin/babel-node\", \"./build/ssr/index.js\"]\n"
}