{
  "startTime": 1674254636549,
  "endTime": 1674254637158,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 15,
        "lineEnd": 15,
        "columnStart": 69,
        "columnEnd": 111
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "# First stage, install composer and its dependencies and fetch vendor files\nFROM alpine:3.7\nRUN apk --no-cache add \\\n  php5 \\\n  php5-dom \\\n  php5-phar \\\n  php5-gd \\\n  php5-iconv \\\n  php5-json \\\n  php5-mysql \\\n  php5-openssl \\\n  php5-xml \\\n  php5-zlib \\\n  php5-curl \\\n  curl\nRUN mkdir /app && mkdir /app/pleio && mkdir /app/paas_integration && curl -f -sS https://getcomposer.org/installer | php5 -- --install-dir=/usr/local/bin --filename=composer\nRUN ln -s /usr/bin/php5 /usr/bin/php\nWORKDIR /app\nCOPY composer.json composer.json /app/\nCOPY mod/pleio/composer.json /app/pleio/\nCOPY mod/paas_integration/composer.json /app/paas_integration/\n\nARG COMPOSER_ALLOW_SUPERUSER=1\nARG COMPOSER_NO_INTERACTION=1\nRUN composer install\n\nWORKDIR /app/pleio\nRUN composer install\n\nWORKDIR /app/paas_integration\nRUN composer install\n\n\n\n# Second stage, build usable container\nFROM ubuntu:18.04\nENV DEBIAN_FRONTEND noninteractive\n\nRUN apt-get update && apt-get install -y --no-install-recommends \\\n\t\tsoftware-properties-common \\\n\t&& apt-get clean \\\n\t&& rm -fr /var/lib/apt/lists/*\n\nRUN add-apt-repository ppa:ondrej/php\n\nRUN apt-get update && apt-get install -y --no-install-recommends \\\n            apache2 \\\n            curl \\\n            libapache2-mod-php5.6 \\\n            php5.6 \\\n            php5.6-gd \\\n            php5.6-mbstring \\\n            php5.6-json \\\n            php5.6-mysql \\\n            php5.6-zip \\\n            php5.6-xml \\\n            php5.6-curl \\\n            php5.6-opcache \\\n            php5.6-memcache \\\n        && apt-get clean \\\n        && rm -fr /var/lib/apt/lists/* \\\n        && mkdir -p /var/www/html/vendor \\\n        && mkdir -p /data \\\n        && chown www-data /data \\\n        && ln -sf /dev/stderr /var/log/apache2/error.log \\\n        && ln -sf /dev/stdout /var/log/apache2/access.log\n\nRUN a2enmod rewrite headers\n\nRUN { \\\n  echo 'opcache.memory_consumption=128'; \\\n  echo 'opcache.interned_strings_buffer=8'; \\\n  echo 'opcache.max_accelerated_files=4000'; \\\n  echo 'opcache.revalidate_freq=60'; \\\n  echo 'opcache.fast_shutdown=1'; \\\n  echo 'opcache.enable_cli=1'; \\\n  echo 'opcache.enable_file_override=1'; \\\n  } > /etc/php/5.6/apache2/conf.d/opcache-recommended.ini\n\nCOPY ./docker/000-default.conf /etc/apache2/sites-available/000-default.conf\nCOPY ./install/config/htaccess.dist /var/www/html/.htaccess\nCOPY --from=0 /app/vendor/ /var/www/html/vendor/\nCOPY . /var/www/html\nCOPY --from=0 /app/pleio/vendor/ /var/www/html/mod/pleio/vendor/\nCOPY --from=0 /app/paas_integration/vendor/ /var/www/html/mod/paas_integration/vendor/\nRUN chown www-data:www-data /var/www/html\n\nWORKDIR /var/www/html\nEXPOSE 80\nEXPOSE 443\n\nRUN chmod +x docker/start.sh\n\n# Start Apache in foreground mode\nRUN rm -f /run/apache2/httpd.pid\nENTRYPOINT [ \"docker/start.sh\" ]\nCMD  [\"apache2ctl -D FOREGROUND\"]\n"
}