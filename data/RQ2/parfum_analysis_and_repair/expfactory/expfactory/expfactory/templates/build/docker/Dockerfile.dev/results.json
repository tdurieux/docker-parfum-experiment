{
  "startTime": 1674255203136,
  "endTime": 1674255204082,
  "originalSmells": [
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 17,
        "lineEnd": 17,
        "columnStart": 22,
        "columnEnd": 74
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 17,
        "lineEnd": 17,
        "columnStart": 22,
        "columnEnd": 74
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM quay.io/vanessa/expfactory-builder:base\n\n########################################\n# Configure\n########################################\n\nENV EXPFACTORY_STUDY_ID {{studyid}}\nENV EXPFACTORY_SERVER localhost\nENV EXPFACTORY_CONTAINER true\nENV EXPFACTORY_DATA /scif/data\nENV EXPFACTORY_DATABASE {{database}}\nENV EXPFACTORY_HEADLESS {{headless}}\nENV EXPFACTORY_BASE /scif/apps\n\nADD startscript.sh /startscript.sh\nRUN chmod u+x /startscript.sh\n\nRUN apt-get update && apt-get install --no-install-recommends -y nginx git python3-pip python3-dev && rm -rf /var/lib/apt/lists/*;\nWORKDIR /opt\nRUN git clone {{branch}} https://github.com/expfactory/expfactory\nWORKDIR expfactory\nRUN cp script/nginx.gunicorn.conf /etc/nginx/sites-enabled/default && \\\n    cp script/nginx.conf /etc/nginx/nginx.conf\nRUN mkdir -p /scif/data # saved data\nRUN mkdir -p /scif/apps # experiments\nRUN mkdir -p /scif/logs # gunicorn logs\nRUN python3 -m pip install gunicorn\nRUN cp expfactory/config_dummy.py expfactory/config.py && \\\n    chmod u+x /opt/expfactory/script/generate_key.sh && \\\n    /bin/bash /opt/expfactory/script/generate_key.sh /opt/expfactory/expfactory/config.py\nRUN python3 setup.py install\nRUN python3 -m pip install pyaml    pymysql psycopg2-binary\nRUN apt-get clean          # tests, mysql,  postgres\n\n########################################\n# Experiments\n########################################\n\n{{experiments}}\n\nENTRYPOINT [\"/bin/bash\", \"/startscript.sh\"]\nEXPOSE 5000\nEXPOSE 80\n"
}