{
  "startTime": 1674251503619,
  "endTime": 1674251504998,
  "originalSmells": [
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 65,
        "lineEnd": 65,
        "columnStart": 33,
        "columnEnd": 68
      }
    },
    {
      "rule": "configureShouldUseBuildFlag",
      "position": {
        "lineStart": 58,
        "lineEnd": 58,
        "columnStart": 4,
        "columnEnd": 104
      }
    },
    {
      "rule": "yumInstallRmVarCacheYum",
      "position": {
        "lineStart": 53,
        "lineEnd": 53,
        "columnStart": 9,
        "columnEnd": 33
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 50,
        "lineEnd": 50,
        "columnStart": 4,
        "columnEnd": 33
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 56,
        "lineEnd": 56,
        "columnStart": 4,
        "columnEnd": 31
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "# SPDX-FileCopyrightText: 2014 SAP SE Srdjan Boskovic <srdjan.boskovic@sap.com>\n#\n# SPDX-License-Identifier: Apache-2.0\n\n# python 3.10.x\n#   build openssl 1.1.1 for \"spot\" use: https://cloudwafer.com/blog/installing-openssl-on-centos-7/\n#   build 3.10.x with custom ssl path:  https://stackoverflow.com/questions/56552390/how-to-fix-ssl-module-in-python-is-not-available-in-centos\n\n# python\n\nARG venv_base=~/.virtualenvs\nARG dev_python=\"pip wheel pytest cython ipython\"\nARG pyenv_versions=\"3.10.4 3.9.12 3.8.13 3.7.13 3.6.15\"\nARG pyenv_default=\"3.10.4\"\nARG OPENSSLDIR=\"/usr/local/ssl\"\n\nENV TMPDIR=/home/${adminuser}/tmp\n\n# pyenv config files\nCOPY --chown=${adminuser}:${adminuser} /common/pyenv /tmp\n\n# as admin user\n\nRUN \\\n\n\n\n\n    PYENV_ROOT=~/.pyenv && PATH=$PYENV_ROOT/shims:$PYENV_ROOT/bin:$PATH && \\\n    # git\n    git clone https://github.com/pyenv/pyenv.git $PYENV_ROOT && \\\n    git clone https://github.com/pyenv/pyenv-virtualenv.git $PYENV_ROOT/plugins/pyenv-virtualenv && \\\n    git clone https://github.com/pyenv/pyenv-update.git $PYENV_ROOT/plugins/pyenv-update && \\\n    # pyenv config files\n    PROFILE=\".profile\" && if [ ! -f \"$PROFILE\" ]; then PROFILE=\".bash_profile\"; fi && \\\n    cat /tmp/profile.sh \"$PROFILE\" > temp && mv temp \"$PROFILE\" && \\\n    cat /tmp/bashrc.sh >> .bashrc && \\\n    echo \"pyenv activate py${pyenv_default}\" >> .bashrc && \\\n    sudo rm /tmp/profile.sh /tmp/bashrc.sh && \\\n    #\n    # pyenv\n    #\n    eval \"$(pyenv init --path)\" && eval \"$(pyenv init -)\" && eval \"$(pyenv virtualenv-init -)\" && \\\n    for version in ${pyenv_versions}; \\\n    do \\\n\n    if [[ \"$version\" == *\"3.10\"* ]] ; then \\\n    OPENSSLDIR=${OPENSSLDIR} mkdir -p $TMPDIR && cd $TMPDIR && \\\n    wget https://www.openssl.org/source/openssl-1.1.1c.tar.gz && \\\n    tar -xf openssl-1.1.1c.tar.gz && cd openssl-1.1.1c && \\\n    sudo ./config --prefix=$OPENSSLDIR --openssldir=$OPENSSLDIR shared zlib && \\\n    sudo make && sudo make install && \\\n    sudo yum -y install openssl11 && \\\n    cd $TMPDIR && \\\n    wget https://www.python.org/ftp/python/$version/Python-$version.tgz && \\\n    tar xzf Python-$version.tgz && \\\n    cd Python-$version && \\\n    ./configure --build=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\" --with-openssl=$OPENSSLDIR --prefix=$PYENV_ROOT/versions/$version --enable-optimizations && \\\n    make altinstall || break; rm -rf /var/cache/yum rm openssl-1.1.1c.tar.gz \\\n    else \\\n    pyenv install $version || break; \\\n    fi && \\\n    # virtualenv\n    pyenv virtualenv $version py$version && \\\n    pyenv activate py$version && pip install --no-cache-dir --upgrade ${dev_python} || break; \\\n    done || exit 1 && \\\n    # cleanup\n    rm -rf $TMPDIR/*\n"
}