{
  "startTime": 1674216349108,
  "endTime": 1674216350546,
  "originalSmells": [
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 47,
        "lineEnd": 47,
        "columnStart": 4,
        "columnEnd": 22
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 48,
        "lineEnd": 48,
        "columnStart": 4,
        "columnEnd": 23
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 13,
        "lineEnd": 38,
        "columnStart": 4,
        "columnEnd": 7
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 40,
        "lineEnd": 40,
        "columnStart": 4,
        "columnEnd": 44
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 41,
        "lineEnd": 41,
        "columnStart": 4,
        "columnEnd": 63
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 42,
        "lineEnd": 42,
        "columnStart": 4,
        "columnEnd": 92
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 126,
        "lineEnd": 126,
        "columnStart": 4,
        "columnEnd": 44
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 127,
        "lineEnd": 127,
        "columnStart": 4,
        "columnEnd": 63
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 128,
        "lineEnd": 128,
        "columnStart": 4,
        "columnEnd": 92
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM phusion/baseimage:0.9.19 as builder\n\nARG BRANCH_NAME\nARG GIT_COMMIT\nARG BUILD_VERSION\nARG LIVE_TESTNET\n\nENV LANG=en_US.UTF-8\n\nENV LIVE_TESTNET=${LIVE_TESTNET:-OFF}\n\nRUN \\\n    apt-get update && \\\n    apt-get install --no-install-recommends -y \\\n    autoconf \\\n    automake \\\n    autotools-dev \\\n    bsdmainutils \\\n    build-essential \\\n    cmake \\\n    doxygen \\\n    git \\\n    libboost-all-dev \\\n    libicu-dev \\\n    libreadline-dev \\\n    libssl-dev \\\n    libtool \\\n    ncurses-dev \\\n    pbzip2 \\\n    pkg-config \\\n    python3 \\\n    python3-dev \\\n    nginx \\\n    fcgiwrap \\\n    s3cmd \\\n    awscli \\\n    jq \\\n    wget \\\n    gdb \\\n    && \\\n    apt-get install --no-install-recommends -y libicu55 libreadline6 && \\\n    apt-get install --no-install-recommends -y curl apt-transport-https ca-certificates && \\\n    apt-get --only-upgrade --no-install-recommends install -y libgnutls-openssl27 libgnutls30 ubuntu-advantage-tools && \\\n    apt-get clean && \\\n    rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/* && \\\n    wget https://bootstrap.pypa.io/pip/3.5/get-pip.py && \\\n    python3 get-pip.py && \\\n    pip3 install --no-cache-dir gcovr && \\\n    pip3 install --no-cache-dir jinja2\n\nADD . /usr/local/src/scorum\n\nRUN \\\n    cd /usr/local/src/scorum && \\\n    mkdir build && \\\n    cd build && \\\n    cmake \\\n    -DCMAKE_BUILD_TYPE=Debug \\\n    -DSCORUM_LIVE_TESTNET=${LIVE_TESTNET} \\\n    -DSCORUM_LOW_MEMORY_NODE=OFF \\\n    -DSCORUM_CLEAR_VOTES=ON \\\n    -DSCORUM_SKIP_BY_TX_ID=ON \\\n    -DENABLE_COVERAGE_TESTING=ON \\\n    .. && \\\n    make -j$(nproc) && \\\n    ./libraries/chainbase/test/chainbase_test && \\\n    ./tests/utests/utests && \\\n    ./tests/chain_tests/chain_tests && \\\n    ./tests/wallet_tests/wallet_tests && \\\n    cd /usr/local/src/scorum && \\\n    doxygen && \\\n    programs/build_helpers/check_reflect.py && \\\n    programs/build_helpers/get_config_check.sh && \\\n    cd /usr/local/src/scorum/build && \\\n    mkdir -p /var/cobertura && \\\n    gcovr --object-directory=\"../\" --root=../ --xml-pretty --gcov-exclude=\".*tests.*\" --gcov-exclude=\".*fc.*\" --gcov-exclude=\".*app*\" --gcov-exclude=\".*net*\" --gcov-exclude=\".*plugins*\" --gcov-exclude=\".*schema*\" --gcov-exclude=\".*time*\" --gcov-exclude=\".*utilities*\" --gcov-exclude=\".*wallet*\" --gcov-exclude=\".*programs*\" --output=\"/var/cobertura/coverage.xml\" && \\\n    cd /usr/local/src/scorum && \\\n    rm -rf /usr/local/src/scorum/build\n\nRUN \\\n    cd /usr/local/src/scorum && \\\n    mkdir build && \\\n    cd build && \\\n    cmake \\\n    -DCMAKE_BUILD_TYPE=Release \\\n    -DCMAKE_INSTALL_PREFIX=/usr/local/scorumd-default \\\n    -DSCORUM_LIVE_TESTNET=${LIVE_TESTNET} \\\n    -DSCORUM_LOW_MEMORY_NODE=ON \\\n    -DSCORUM_CLEAR_VOTES=ON \\\n    -DSCORUM_SKIP_BY_TX_ID=ON \\\n    .. && \\\n    make -j$(nproc) && \\\n    ./libraries/chainbase/test/chainbase_test && \\\n    ./tests/utests/utests && \\\n    ./tests/chain_tests/chain_tests && \\\n    ./tests/wallet_tests/wallet_tests && \\\n    ./programs/util/test_fixed_string && \\\n    make install && \\\n    rm -rf /usr/local/src/scorum/build\n\nRUN \\\n    cd /usr/local/src/scorum && \\\n    mkdir build && \\\n    cd build && \\\n    cmake \\\n    -DCMAKE_BUILD_TYPE=Release \\\n    -DCMAKE_INSTALL_PREFIX=/usr/local/scorumd-full \\\n    -DSCORUM_LIVE_TESTNET=${LIVE_TESTNET} \\\n    -DSCORUM_LOW_MEMORY_NODE=OFF \\\n    -DSCORUM_CLEAR_VOTES=OFF \\\n    -DSCORUM_SKIP_BY_TX_ID=OFF \\\n    .. && \\\n    make -j$(nproc) && \\\n    ./libraries/chainbase/test/chainbase_test && \\\n    ./tests/utests/utests && \\\n    ./tests/chain_tests/chain_tests && \\\n    ./tests/wallet_tests/wallet_tests && \\\n    ./programs/util/test_fixed_string && \\\n    make install && \\\n    cd / && \\\n    rm -rf /usr/local/src/scorum\n\nFROM phusion/baseimage:0.9.19 as runtime\n\nRUN \\\n    apt-get update && \\\n    apt-get install --no-install-recommends -y libicu55 libreadline6 && \\\n    apt-get install --no-install-recommends -y curl apt-transport-https ca-certificates && \\\n    apt-get --only-upgrade --no-install-recommends install -y libgnutls-openssl27 libgnutls30 ubuntu-advantage-tools && \\\n    apt-get clean && \\\n    rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*\n\nCOPY --from=builder /usr/local/scorumd-full/bin/scorumd /usr/local/bin/scorumd-full\nCOPY --from=builder /usr/local/scorumd-full/bin/cli_wallet /usr/local/bin/cli_wallet\nCOPY --from=builder /usr/local/scorumd-default/bin/scorumd /usr/local/bin/scorumd\n\nADD contrib/config.witness.ini /etc/scorumd/config.witness.ini\nADD contrib/config.rpc.ini /etc/scorumd/config.rpc.ini\nADD contrib/seeds.mainnet.ini /etc/scorumd/seeds.mainnet.ini\nADD contrib/seeds.testnet.ini /etc/scorumd/seeds.testnet.ini\nADD contrib/scorumdentrypoint.sh /usr/local/bin/scorumdentrypoint.sh\n\nRUN chmod +x /usr/local/bin/scorumdentrypoint.sh\nRUN mkdir /var/lib/scorumd\n\nRUN \\\n    useradd -s /bin/bash -m -d /var/lib/scorumd scorumd && \\\n    mkdir /var/cache/scorumd && \\\n    chown scorumd:scorumd -R /var/cache/scorumd && \\\n    chown scorumd:scorumd -R /var/lib/scorumd\n\nWORKDIR /var/lib/scorumd\n\nENV HOME /var/lib/scorumd\nVOLUME [\"/var/lib/scorumd\"]\n\n# rpc service:\nEXPOSE 8001\n# p2p service:\nEXPOSE 2001\n\nCMD [\"/bin/bash\", \"/usr/local/bin/scorumdentrypoint.sh\"]\n"
}