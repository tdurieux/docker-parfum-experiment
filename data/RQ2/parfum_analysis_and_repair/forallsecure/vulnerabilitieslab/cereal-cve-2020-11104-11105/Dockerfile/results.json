{
  "startTime": 1674252481945,
  "endTime": 1674252483023,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 30,
        "lineEnd": 30,
        "columnStart": 4,
        "columnEnd": 88
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 31,
        "lineEnd": 31,
        "columnStart": 8,
        "columnEnd": 35
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 4,
        "lineEnd": 6,
        "columnStart": 8,
        "columnEnd": 30
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM debian:buster-slim\nLABEL maintainer=\"guido@guidovranken.com\"\n\nRUN apt-get update --allow-releaseinfo-change && \\\n        apt-get install --no-install-recommends -y build-essential \\\n        ca-certificates git  clang curl git gcc-multilib \\\n        g++-multilib libc6-dbg && rm -rf /var/lib/apt/lists/*;\n\nWORKDIR /src\n\n\n# Get the latest libFuzzer\nRUN git clone https://github.com/llvm/llvm-project && \\\n    mv llvm-project/compiler-rt/lib/fuzzer Fuzzer && \\\n    rm -rf llvm-project\n\nRUN cp -R Fuzzer/ Fuzzer32/\n\n# Build 64 bit libFuzzer\nRUN cd /src/Fuzzer && ./build.sh\n\n# Build 32 bit libFuzzer\nRUN sed -i \"s/\\$CXX/\\$CXX -m32/g\" /src/Fuzzer32/build.sh\nRUN cd /src/Fuzzer32 && ./build.sh\n\n# Get my custom fuzzing headers\nRUN git clone --depth 1 https://github.com/guidovranken/fuzzing-headers.git\nRUN cd /src/fuzzing-headers && ./install.sh\n\n# Download the vulnerable cereal version\nRUN curl -f -o cereal-1.3.0.tar.gz https://codeload.github.com/USCiLab/cereal/tar.gz/v1.3.0 && \\\n        tar zxf cereal-1.3.0.tar.gz && \\\n        ln -s cereal-1.3.0 cereal && rm cereal-1.3.0.tar.gz\n\n# Copy in cereal fuzzing harnesses\nCOPY src/ /src/cereal/fuzzer/\nCOPY poc/ /src/poc\n\n# Set the build directory\nWORKDIR /src/cereal/fuzzer\n\n# Compile the fuzzing harnesses\nRUN     CC=clang \\\n       CXX=clang++ \\\n       CEREAL_INCLUDE_PATH=\"/src/cereal/include\" \\\n       LIBFUZZER64_PATH=\"/src/Fuzzer/libFuzzer.a\" \\\n       LIBFUZZER32_PATH=\"/src/Fuzzer32/libFuzzer.a\" \\\n       CXXFLAGS=\"-fsanitize=address,undefined,fuzzer-no-link -g -O1\" make\n"
}