{
  "startTime": 1674254237843,
  "endTime": 1674254239222,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 22,
        "lineEnd": 22,
        "columnStart": 18,
        "columnEnd": 129
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 22,
        "lineEnd": 22,
        "columnStart": 56,
        "columnEnd": 103
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 57,
        "lineEnd": 57,
        "columnStart": 7,
        "columnEnd": 67
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 35,
        "lineEnd": 35,
        "columnStart": 7,
        "columnEnd": 49
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 42,
        "lineEnd": 42,
        "columnStart": 7,
        "columnEnd": 61
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 63,
        "lineEnd": 63,
        "columnStart": 7,
        "columnEnd": 50
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "ARG docker_registry=docker.io/alnoda\nARG image_tag=2.2\n\n## Images used:\nARG BUILD_IMAGE=node:12.18.3\nARG DEPLOY_IMAGE=${docker_registry}/ansible-terraform-workspace:${image_tag}\n\n\nFROM ${DEPLOY_IMAGE}\nUSER root\n\nCOPY supervisord-kubespray.conf /etc/supervisord/\n\nCOPY ./mkdocs/mkdocs.yml /home/docs/mkdocs.yml\nCOPY ./mkdocs/img/* /home/docs/docs/assets/home/\nCOPY ./mkdocs/helpers.py /home/docs/macros\nCOPY ./mkdocs/README.md /home/docs/docs/README.md\n\nRUN apt-get -y update \\\n    && echo \"------------------------------------------------------ prep\" \\\n    && pip uninstall -y ansible-doctor \\\n    && echo \"------------------------------------------------------ Kubectl\" \\\n    && cd /tmp && curl -f -LO \"https://dl.k8s.io/release/$( curl -f -L -s https://dl.k8s.io/release/stable.txt)/bin/linux/amd64/kubectl\" \\\n    && install -o root -g root -m 0755 kubectl /usr/local/bin/kubectl \\\n    && rm /tmp/kubectl \\\n    && echo \"------------------------------------------------------ Helm\" \\\n    && cd /tmp && wget https://get.helm.sh/helm-v3.9.0-linux-386.tar.gz \\\n    && tar -zxvf /tmp/helm-v3.9.0-linux-386.tar.gz \\\n    && chmod +x /tmp/linux-386/helm \\\n    && mv /tmp/linux-386/helm /usr/local/bin/helm \\\n    && rm /tmp/helm-v3.9.0-linux-386.tar.gz \\\n    && rm -r /tmp/linux-386 \\\n    && echo \"------------------------------------------------------ K9s\" \\\n    && mkdir /tmp/k9s \\\n    && cd /tmp/k9s && wget https://github.com/derailed/k9s/releases/download/v0.25.18/k9s_Linux_x86_64.tar.gz \\\n    && tar -zxvf /tmp/k9s/k9s_Linux_x86_64.tar.gz \\\n    && chmod +x /tmp/k9s/k9s \\\n    && mv /tmp/k9s/k9s /usr/local/bin/k9s \\\n    && rm -r /tmp/k9s \\\n    && echo \"------------------------------------------------------ Octant\" \\\n    && mkdir -p /tmp/octant \\\n    && cd /tmp/octant && wget https://github.com/vmware-tanzu/octant/releases/download/v0.25.1/octant_0.25.1_Linux-64bit.tar.gz \\\n    && tar -zxvf /tmp/octant/octant_0.25.1_Linux-64bit.tar.gz \\\n    && chmod +x /tmp/octant/octant_0.25.1_Linux-64bit/octant \\\n    && mv /tmp/octant/octant_0.25.1_Linux-64bit/octant /usr/local/bin/ \\\n    && rm -rf /tmp/octant \\\n    && echo \"------------------------------------------------------ user\" \\\n    && mkdir /var/log/octant && chown -R abc /var/log/octant \\\n    && find /home -type d | xargs -I{} chown -R abc {} \\\n    && find /home -type f | xargs -I{} chown abc {} && rm /tmp/k9s/k9s_Linux_x86_64.tar.gz\n\nUSER abc\n\nRUN echo \"------------------------------------------------------ prep\" \\\n    && python3 -m pip install --user pipx \\\n    && echo \"------------------------------------------------------ kubespray\" \\\n    && git clone -b v2.19.0 --single-branch https://github.com/kubernetes-sigs/kubespray.git /home/project/kubespray \\\n    && pip install --no-cache-dir -r /home/project/kubespray/requirements-2.12.txt \\\n    && echo \"------------------------------------------------------ Kube-shell\" \\\n    && pipx install kube-shell \\\n    && echo \"------------------------------------------------------ Krew\" \\\n    && mkdir /tmp/krew \\\n    && cd /tmp/krew && wget https://github.com/kubernetes-sigs/krew/releases/download/v0.4.3/krew-linux_amd64.tar.gz \\\n    && tar -zxvf /tmp/krew/krew-linux_amd64.tar.gz \\\n    && chmod +x /tmp/krew/krew-linux_amd64 \\\n    && /tmp/krew/krew-linux_amd64 install krew \\\n    && rm -rf /tmp/krew/ \\\n    && echo \"------------------------------------------------------ kubectl-aliases\" \\\n    && cd /home/abc && wget https://raw.githubusercontent.com/ahmetb/kubectl-aliases/master/.kubectl_aliases \\\n    && echo '[ -f ~/.kubectl_aliases ] && source ~/.kubectl_aliases' >> /home/abc/.zshrc \\\n    && mkdir -p /home/abc/.ssh && rm /tmp/krew/krew-linux_amd64.tar.gz\n\nENV OCTANT_DISABLE_OPEN_BROWSER=1 \\ \n    OCTANT_LISTENER_ADDR=0.0.0.0:8031\n\nENV PATH=\"${KREW_ROOT:-$HOME/.krew}/bin:$PATH\""
}