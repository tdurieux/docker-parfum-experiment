{
  "startTime": 1674252919484,
  "endTime": 1674252921287,
  "originalSmells": [
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 29,
        "lineEnd": 29,
        "columnStart": 7,
        "columnEnd": 33
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 30,
        "lineEnd": 30,
        "columnStart": 7,
        "columnEnd": 40
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 31,
        "lineEnd": 31,
        "columnStart": 7,
        "columnEnd": 37
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 41,
        "lineEnd": 41,
        "columnStart": 7,
        "columnEnd": 26
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 55,
        "lineEnd": 55,
        "columnStart": 7,
        "columnEnd": 37
      }
    },
    {
      "rule": "aptGetInstallUseY",
      "position": {
        "lineStart": 28,
        "lineEnd": 28,
        "columnStart": 7,
        "columnEnd": 37
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 10,
        "lineEnd": 10,
        "columnStart": 7,
        "columnEnd": 30
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 13,
        "lineEnd": 13,
        "columnStart": 7,
        "columnEnd": 52
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 14,
        "lineEnd": 14,
        "columnStart": 7,
        "columnEnd": 38
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 22,
        "lineEnd": 22,
        "columnStart": 7,
        "columnEnd": 35
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 25,
        "lineEnd": 25,
        "columnStart": 7,
        "columnEnd": 43
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 26,
        "lineEnd": 26,
        "columnStart": 7,
        "columnEnd": 45
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 27,
        "lineEnd": 27,
        "columnStart": 7,
        "columnEnd": 37
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 28,
        "lineEnd": 28,
        "columnStart": 7,
        "columnEnd": 37
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 34,
        "lineEnd": 34,
        "columnStart": 7,
        "columnEnd": 54
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 35,
        "lineEnd": 35,
        "columnStart": 7,
        "columnEnd": 38
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 36,
        "lineEnd": 36,
        "columnStart": 7,
        "columnEnd": 34
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 37,
        "lineEnd": 37,
        "columnStart": 7,
        "columnEnd": 38
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 42,
        "lineEnd": 42,
        "columnStart": 7,
        "columnEnd": 30
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 44,
        "lineEnd": 44,
        "columnStart": 7,
        "columnEnd": 30
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 54,
        "lineEnd": 54,
        "columnStart": 7,
        "columnEnd": 36
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 57,
        "lineEnd": 57,
        "columnStart": 7,
        "columnEnd": 33
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 10,
        "lineEnd": 10,
        "columnStart": 7,
        "columnEnd": 30
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 13,
        "lineEnd": 13,
        "columnStart": 7,
        "columnEnd": 52
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 14,
        "lineEnd": 14,
        "columnStart": 7,
        "columnEnd": 38
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 22,
        "lineEnd": 22,
        "columnStart": 7,
        "columnEnd": 35
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 25,
        "lineEnd": 25,
        "columnStart": 7,
        "columnEnd": 43
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 26,
        "lineEnd": 26,
        "columnStart": 7,
        "columnEnd": 45
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 27,
        "lineEnd": 27,
        "columnStart": 7,
        "columnEnd": 37
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 28,
        "lineEnd": 28,
        "columnStart": 7,
        "columnEnd": 37
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 34,
        "lineEnd": 34,
        "columnStart": 7,
        "columnEnd": 54
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 35,
        "lineEnd": 35,
        "columnStart": 7,
        "columnEnd": 38
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 36,
        "lineEnd": 36,
        "columnStart": 7,
        "columnEnd": 34
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 37,
        "lineEnd": 37,
        "columnStart": 7,
        "columnEnd": 38
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 42,
        "lineEnd": 42,
        "columnStart": 7,
        "columnEnd": 30
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 44,
        "lineEnd": 44,
        "columnStart": 7,
        "columnEnd": 30
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 54,
        "lineEnd": 54,
        "columnStart": 7,
        "columnEnd": 36
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 57,
        "lineEnd": 57,
        "columnStart": 7,
        "columnEnd": 33
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM ubuntu:18.04\n\n\nCOPY unified-supervisord.conf supervisord.conf /etc/supervisord/\nCOPY mc.ini /home/abc/.config/mc/ini\nCOPY zsh-in-docker.sh /tmp/zsh-in-docker.sh\n\n\n# Systemctl within Docker and Python 3.9\nRUN DEBIAN_FRONTEND=noninteractive apt-get update \\\n    && apt-get install --no-install-recommends -y wget \\\n    && wget https://raw.githubusercontent.com/gdraheim/docker-systemctl-replacement/master/files/docker/systemctl.py -O /usr/local/bin/systemctl \\\n    && chmod 0777 /usr/local/bin/systemctl \\\n    && apt-get install --no-install-recommends -y software-properties-common \\\n    && apt-get install --no-install-recommends -y zip gzip tar \\\n    && echo \"------------------------------------------------------ User\" \\\n    && useradd -u 8877 abc \\\n    && chmod -R 777 /home \\\n    && mkdir -p /home/abc \\\n    && chown -R abc /home/abc \\\n    && echo \"------------------------------------------------------ Python\" \\\n    && add-apt-repository ppa:deadsnakes/ppa \\\n    && apt-get install --no-install-recommends -y python3.9 \\\n    && update-alternatives --install /usr/bin/python python /usr/bin/python3.9 10 \\\n    && update-alternatives --install /usr/bin/python3 python3 /usr/bin/python3.9 10 \\\n    && apt-get install --no-install-recommends -y python3-distutils \\\n    && apt-get install --no-install-recommends -y python3.9-distutils \\\n    && apt-get install --no-install-recommends -y python3-pip \\\n    && apt-get install -y --no-install-recommends python3.9-venv \\\n    && pip3 install --no-cache-dir --upgrade pip \\\n    && pip3 install --no-cache-dir --upgrade setuptools \\\n    && pip3 install --no-cache-dir --upgrade distlib \\\n    && update-alternatives --install /usr/bin/pip pip /usr/bin/pip3 1 \\\n    && echo \"------------------------------------------------------ Common Packages\" \\\n    && apt-get install --no-install-recommends -y sudo git curl wget telnet jq \\\n    && apt-get install --no-install-recommends -y mc ncdu htop \\\n    && apt-get install --no-install-recommends -y nano vim \\\n    && apt-get install --no-install-recommends -y git git-flow \\\n    && echo \"# Allow non-admin users to install packages\" >> /etc/sudoers \\\n    && echo \"abc ALL = NOPASSWD : /usr/bin/apt, /usr/bin/apt-get, /usr/bin/aptitude, /usr/local/bin/pip, /usr/local/bin/systemctl, /usr/bin/dpkg, /usr/sbin/dpkg-reconfigure\" >> /etc/sudoers \\\n    && echo \"------------------------------------------------------ Nodeenv\" \\\n    && pip install --no-cache-dir nodeenv \\\n    && apt-get install --no-install-recommends -y yarn \\\n    && echo \"------------------------------------------------------ Cron\" \\\n    && apt-get install --no-install-recommends -y cron \\\n    && mkdir -p /var/log/supervisord/ \\\n    && chmod -R 777 /var/spool/cron/crontabs \\\n    && chmod -R 777 /var/log \\\n    && chmod gu+rw /var/run \\\n    && chmod gu+s /usr/sbin/cron \\\n    && echo \"# Allow cron for user abc\" >> /etc/sudoers \\\n    && echo \"abc ALL = NOPASSWD : /usr/sbin/cron \" >> /etc/sudoers \\\n    && echo \"------------------------------------------------------ Supervisor\" \\\n    && apt-get remove -y cmdtest \\\n    && apt-get install --no-install-recommends -y supervisor \\\n    && pip3 install --no-cache-dir supervisor==4.2.2 \\\n    && apt-get update \\\n    && apt-get install --no-install-recommends -y systemd \\\n    && chmod -R 777 /etc/supervisord/ \\\n    && chmod -R 777 /var/log/supervisord/ \\\n    && echo \"------------------------------------------------------ ZSH root\" \\\n    && HOME=/root \\\n    && chmod +x /tmp/zsh-in-docker.sh \\\n    && /tmp/zsh-in-docker.sh \\\n    -t https://github.com/pascaldevink/spaceship-zsh-theme \\\n    -a 'SPACESHIP_PROMPT_ADD_NEWLINE=\"false\"' \\\n    -a 'SPACESHIP_PROMPT_SEPARATE_LINE=\"false\"' \\\n    -a 'export LS_COLORS=\"$LS_COLORS:ow=1;34:tw=1;34:\"' \\\n    -a 'SPACESHIP_USER_SHOW=\"false\"' \\\n    -a 'SPACESHIP_TIME_SHOW=\"true\"' \\\n    -a 'SPACESHIP_TIME_COLOR=\"grey\"' \\\n    -a 'SPACESHIP_DIR_COLOR=\"cyan\"' \\\n    -a 'SPACESHIP_GIT_SYMBOL=\"⇡\"' \\\n    -a 'SPACESHIP_BATTERY_SHOW=\"false\"' \\\n    -a 'if [[ $(pwd) != /root  ]]; then cd /root; fi  # Set starting dir to /root ' \\\n    -a 'hash -d r=/root' \\\n    -p git \\\n    -p https://github.com/zsh-users/zsh-autosuggestions \\\n    -p https://github.com/zsh-users/zsh-completions \\\n    -p https://github.com/zsh-users/zsh-history-substring-search \\\n    -p https://github.com/zsh-users/zsh-syntax-highlighting \\\n    -p 'history-substring-search' \\\n    -p https://github.com/bobthecow/git-flow-completion \\\n    -a 'bindkey \"\\$terminfo[kcuu1]\" history-substring-search-up' \\\n    -a 'bindkey \"\\$terminfo[kcud1]\" history-substring-search-down' \\\n    && printf '%s\\n%s\\n' \"export ZSH_DISABLE_COMPFIX=true\" \"$(cat /root/.zshrc)\" > /root/.zshrc \\\n    && echo \"------------------------------------------------------ ZSH abc\" \\\n    && mkdir -p /home/project \\\n    && HOME=/home/abc \\\n    && /tmp/zsh-in-docker.sh \\\n    -t https://github.com/pascaldevink/spaceship-zsh-theme \\\n    -a 'SPACESHIP_PROMPT_ADD_NEWLINE=\"false\"' \\\n    -a 'SPACESHIP_PROMPT_SEPARATE_LINE=\"false\"' \\\n    -a 'export LS_COLORS=\"$LS_COLORS:ow=1;34:tw=1;34:\"' \\\n    -a 'SPACESHIP_USER_SHOW=\"true\"' \\\n    -a 'SPACESHIP_TIME_SHOW=\"true\"' \\\n    -a 'SPACESHIP_TIME_COLOR=\"grey\"' \\\n    -a 'SPACESHIP_DIR_COLOR=\"cyan\"' \\\n    -a 'SPACESHIP_GIT_SYMBOL=\"⇡\"' \\\n    -a 'SPACESHIP_BATTERY_SHOW=\"false\"' \\\n    -a 'if [[ $(pwd) != /home/project  ]]; then cd /home/project; fi  # Set starting dir to /home/project ' \\\n    -a 'hash -d p=/home/project' \\\n    -p git \\\n    -p https://github.com/zsh-users/zsh-autosuggestions \\\n    -p https://github.com/zsh-users/zsh-completions \\\n    -p https://github.com/zsh-users/zsh-history-substring-search \\\n    -p https://github.com/zsh-users/zsh-syntax-highlighting \\\n    -p 'history-substring-search' \\\n    -p https://github.com/bobthecow/git-flow-completion \\\n    -a 'bindkey \"\\$terminfo[kcuu1]\" history-substring-search-up' \\\n    -a 'bindkey \"\\$terminfo[kcud1]\" history-substring-search-down' \\\n    && rm /tmp/zsh-in-docker.sh \\\n    && printf '%s\\n%s\\n' \"export ZSH_DISABLE_COMPFIX=true\" \"$(cat /home/abc/.zshrc)\" > /home/abc/.zshrc \\\n    && echo \"------------------------------------------------------ User\" \\\n    && chown abc /home/project \\\n    && chmod 777 /etc/supervisord/ \\\n    && mkdir -p /home/abc/.local/bin \\\n    && chmod 755 /home/abc/.local && chmod 755 /home/abc/.local/bin \\\n    && chown abc /home/abc/.local && chown abc /home/abc/.local/bin \\\n    && find /home -type d | xargs -I{} chown -R abc {} \\\n    && find /home -type f | xargs -I{} chown abc {} \\\n    && echo \"------------------------------------------------------ Clean\" \\\n    && apt-get -y autoremove \\\n    && apt-get -y clean \\\n    && apt-get -y autoclean && rm -rf /var/lib/apt/lists/*;\n\n\nUSER abc\n\nENV PATH=\"/home/abc/.local/bin:${PATH}\"\n\n\n###### ENTRY\n\n# note! this will have consequences only when started as root (docker run ... --user root ...) \n# systemctl start systemd-journald\n\n# this entrypoint should be the same for all images that are built on top of this one\nENTRYPOINT /etc/init.d/cron start; systemctl start systemd-journald; supervisord -c \"/etc/supervisord/unified-supervisord.conf\"\n"
}