{
  "startTime": 1674252752624,
  "endTime": 1674252753864,
  "originalSmells": [
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 120,
        "lineEnd": 120,
        "columnStart": 4,
        "columnEnd": 22
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "ARG IMAGE=containerbase/buildpack\nARG BUILDPACK_DEBUG\n\nFROM ${IMAGE} as base\n\nRUN touch /.dummy\n\nCOPY --chown=1000:0 test test\n\nWORKDIR /test\n\nFROM base as build\n\nARG APT_HTTP_PROXY\nARG BUILDPACK_DEBUG\n\n# Python\n# renovate: datasource=github-releases lookupName=containerbase/python-prebuild\nRUN install-tool python 3.10.5\n\n\nFROM base as build-rootless\n\nARG APT_HTTP_PROXY\nARG BUILDPACK_DEBUG\n\nUSER 1000\n\n# renovate: datasource=github-releases lookupName=containerbase/python-prebuild\nRUN install-tool python 3.10.5\n\n#--------------------------------------\n# build: pipenv\n#--------------------------------------\nFROM build as pipenv\n\nARG BUILDPACK_DEBUG\n\n# renovate: datasource=pypi\nRUN install-pip pipenv 2022.7.4\n\n\nUSER 1000\n\n#--------------------------------------\n# build: poetry\n#--------------------------------------\nFROM build as poetry\nARG BUILDPACK_DEBUG\n\n\n# renovate: datasource=pypi\nRUN install-tool poetry 1.1.14\n\nUSER 1000\n\n#--------------------------------------\n# test a: build\n#--------------------------------------\nFROM build as testa\n\nARG BUILDPACK_DEBUG\n\n# try install again, sould skip\n# renovate: datasource=github-releases lookupName=containerbase/python-prebuild\nRUN install-tool python 3.10.5\n\n# renovate: datasource=pypi\nRUN install-tool poetry 1.1.14\n\nUSER 1000\n\nSHELL [ \"/bin/sh\", \"-c\" ]\nRUN python --version\nRUN poetry --version\n\n#--------------------------------------\n# test b: pipenv\n#--------------------------------------\nFROM pipenv as testb\n\nRUN set -ex; \\\n  cd a; \\\n  pipenv lock;\n\n\n#--------------------------------------\n# test c: poetry\n#--------------------------------------\nFROM poetry as testc\n\nRUN set -ex; cd c-poetry && poetry update --lock --no-interaction\n\n\nRUN set -ex; cd c-poetry && poetry add h3py\n\n\n#--------------------------------------\n# test d: poetry\n#--------------------------------------\nFROM poetry as testd\n\nRUN set -ex; cd d-poetry && poetry update --lock --no-interaction pytest\n\n\n#--------------------------------------\n# test e: poetry (old versions)\n#--------------------------------------\nFROM build as teste\n\nARG BUILDPACK_DEBUG\n\nRUN install-tool poetry 0.12.17\nRUN install-tool poetry 1.1.0\n\n#--------------------------------------\n# test f: pip_requirements\n#--------------------------------------\nFROM build as testf\n\nRUN pip install --no-cache-dir hashin\n\nRUN set -ex; \\\n  cd f; \\\n  hashin distribute==0.6.27; \\\n  cat requirements.txt\n\n#--------------------------------------\n# test g: non-root\n#--------------------------------------\nFROM build-rootless as testg\n\nARG BUILDPACK_DEBUG\n\n# renovate: datasource=pypi\nRUN install-pip pipenv 2022.7.4\n\nRUN set -ex; \\\n  cd a; \\\n  pipenv lock;\n\n# renovate: datasource=pypi\nRUN install-tool poetry 1.1.14\n\nRUN set -ex \\\n  && cd c-poetry \\\n  && poetry update --lock --no-interaction \\\n  && poetry add h3py \\\n  ;\n\n# renovate: datasource=pypi\nRUN install-pip hashin 0.17.0\n\nRUN set -ex \\\n  && cd f \\\n  && hashin distribute==0.6.27 \\\n  && cat requirements.txt \\\n  ;\n\n\n#--------------------------------------\n# final\n#--------------------------------------\nFROM build\n\nCOPY --from=testa /.dummy /.dummy\nCOPY --from=testb /.dummy /.dummy\nCOPY --from=testc /.dummy /.dummy\nCOPY --from=testd /.dummy /.dummy\nCOPY --from=teste /.dummy /.dummy\nCOPY --from=testf /.dummy /.dummy\nCOPY --from=testg /.dummy /.dummy\n"
}