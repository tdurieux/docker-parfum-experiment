{
  "startTime": 1674249022962,
  "endTime": 1674249023976,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 31,
        "lineEnd": 33,
        "columnStart": 4,
        "columnEnd": 57
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 32,
        "lineEnd": 32,
        "columnStart": 4,
        "columnEnd": 80
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 36,
        "lineEnd": 36,
        "columnStart": 4,
        "columnEnd": 88
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 50,
        "lineEnd": 50,
        "columnStart": 4,
        "columnEnd": 149
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 51,
        "lineEnd": 51,
        "columnStart": 4,
        "columnEnd": 159
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 54,
        "lineEnd": 54,
        "columnStart": 4,
        "columnEnd": 140
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 59,
        "lineEnd": 59,
        "columnStart": 4,
        "columnEnd": 152
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 60,
        "lineEnd": 60,
        "columnStart": 4,
        "columnEnd": 159
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 63,
        "lineEnd": 63,
        "columnStart": 4,
        "columnEnd": 91
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 64,
        "lineEnd": 64,
        "columnStart": 4,
        "columnEnd": 90
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 69,
        "lineEnd": 69,
        "columnStart": 4,
        "columnEnd": 91
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 70,
        "lineEnd": 70,
        "columnStart": 4,
        "columnEnd": 90
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 75,
        "lineEnd": 75,
        "columnStart": 4,
        "columnEnd": 94
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 76,
        "lineEnd": 76,
        "columnStart": 4,
        "columnEnd": 93
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 81,
        "lineEnd": 81,
        "columnStart": 4,
        "columnEnd": 126
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 82,
        "lineEnd": 82,
        "columnStart": 4,
        "columnEnd": 104
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 35,
        "lineEnd": 35,
        "columnStart": 4,
        "columnEnd": 25
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 85,
        "lineEnd": 85,
        "columnStart": 4,
        "columnEnd": 78
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM alpine:3.15 AS build\n\nRUN apk --no-cache add \\\n    curl \\\n    unzip\n\n# Dapper/Drone/CI environment\nFROM rancher/hardened-build-base:v1.18.1b7 AS dapper\nENV DAPPER_ENV GODEBUG REPO TAG DRONE_TAG PAT_USERNAME PAT_TOKEN KUBERNETES_VERSION DOCKER_BUILDKIT DRONE_BUILD_EVENT IMAGE_NAME GCLOUD_AUTH ENABLE_REGISTRY\nARG DAPPER_HOST_ARCH\nENV ARCH $DAPPER_HOST_ARCH\nENV DAPPER_OUTPUT ./dist ./bin ./build\nENV DAPPER_DOCKER_SOCKET true\nENV DAPPER_TARGET dapper\nENV DAPPER_RUN_ARGS \"--privileged --network host -v /tmp:/tmp -v rke2-pkg:/go/pkg -v rke2-cache:/root/.cache/go-build\"\nRUN apk update\nRUN set -x \\\n    && apk add --no-cache \\\n    mingw-w64-gcc \\\n    libarchive-tools \\\n    gcc \\\n    bsd-compat-headers \\\n    zstd \\\n    jq \\\n    python2 \\\n    git \\\n    libseccomp-dev \\\n    rsync \\\n    file \\\n    bash \\\n    py-pip\nRUN curl -f -sL https://storage.googleapis.com/kubernetes-release/release/$( curl -f -s https://storage.googleapis.com/kubernetes-release/release/stable.txt) \\\n    /bin/linux/${ARCH}/kubectl -o /usr/local/bin/kubectl && \\\n    chmod a+x /usr/local/bin/kubectl; \\\n    pip install --no-cache-dir codespell\nRUN curl -f -sL https://raw.githubusercontent.com/golangci/golangci-lint/v1.45.2/install.sh | sh -s;\nWORKDIR /source\n# End Dapper stuff\n\nFROM build as windows-runtime-collect\nARG KUBERNETES_VERSION=dev\n\n# windows runtime image\nENV CRICTL_VERSION=\"v1.24.0\"\nENV CONTAINERD_VERSION=\"1.6.6\"\nENV CALICO_VERSION=\"v3.23.1\"\nENV CNI_PLUGIN_VERSION=\"v1.0.1\"\n\nRUN mkdir -p rancher\nRUN curl -f -sLO https://github.com/containerd/containerd/releases/download/v${CONTAINERD_VERSION}/containerd-${CONTAINERD_VERSION}-windows-amd64.tar.gz\nRUN curl -f -sLO https://github.com/containerd/containerd/releases/download/v${CONTAINERD_VERSION}/containerd-${CONTAINERD_VERSION}-windows-amd64.tar.gz.sha256sum\nRUN sha256sum -c containerd-${CONTAINERD_VERSION}-windows-amd64.tar.gz.sha256sum\n\nRUN curl -f -sLO https://github.com/kubernetes-sigs/cri-tools/releases/download/${CRICTL_VERSION}/crictl-${CRICTL_VERSION}-windows-amd64.tar.gz\n# cri-tools artifact sha256sums are currently broken\n#RUN curl -SLO https://github.com/kubernetes-sigs/cri-tools/releases/download/${CRICTL_VERSION}/crictl-${CRICTL_VERSION}-windows-amd64.tar.gz.sha256\n#RUN sha256sum -c ./crictl-${CRICTL_VERSION}-windows-amd64.tar.gz.sha256\n\nRUN curl -f -sLO https://github.com/containernetworking/plugins/releases/download/${CNI_PLUGIN_VERSION}/cni-plugins-windows-amd64-${CNI_PLUGIN_VERSION}.tgz\nRUN curl -f -sLO https://github.com/containernetworking/plugins/releases/download/${CNI_PLUGIN_VERSION}/cni-plugins-windows-amd64-${CNI_PLUGIN_VERSION}.tgz.sha256\nRUN sha256sum -c cni-plugins-windows-amd64-${CNI_PLUGIN_VERSION}.tgz.sha256\n\nRUN curl -f -sLO https://dl.k8s.io/release/${KUBERNETES_VERSION}/bin/windows/amd64/kubectl.exe\nRUN curl -f -sLO https://dl.k8s.io/${KUBERNETES_VERSION}/bin/windows/amd64/kubectl.exe.sha256\nRUN echo \"  kubectl.exe\" >> kubectl.exe.sha256\nRUN sha256sum -c kubectl.exe.sha256\nRUN mv kubectl.exe rancher/\n\nRUN curl -f -sLO https://dl.k8s.io/release/${KUBERNETES_VERSION}/bin/windows/amd64/kubelet.exe\nRUN curl -f -sLO https://dl.k8s.io/${KUBERNETES_VERSION}/bin/windows/amd64/kubelet.exe.sha256\nRUN echo \"  kubelet.exe\" >> kubelet.exe.sha256\nRUN sha256sum -c kubelet.exe.sha256\nRUN mv kubelet.exe rancher/\n\nRUN curl -f -sLO https://dl.k8s.io/release/${KUBERNETES_VERSION}/bin/windows/amd64/kube-proxy.exe\nRUN curl -f -sLO https://dl.k8s.io/${KUBERNETES_VERSION}/bin/windows/amd64/kube-proxy.exe.sha256\nRUN echo \"  kube-proxy.exe\" >> kube-proxy.exe.sha256\nRUN sha256sum -c kube-proxy.exe.sha256\nRUN mv kube-proxy.exe rancher/\n\nRUN curl -f -sLO https://github.com/projectcalico/calico/releases/download/${CALICO_VERSION}/calico-windows-${CALICO_VERSION}.zip\nRUN curl -f -sL https://github.com/Microsoft/SDN/raw/master/Kubernetes/windows/hns.psm1 -o rancher/hns.psm1\n\nRUN tar xzvf crictl-${CRICTL_VERSION}-windows-amd64.tar.gz crictl.exe -C rancher/\nRUN tar xvzf containerd-${CONTAINERD_VERSION}-windows-amd64.tar.gz -C rancher/ && rm containerd-${CONTAINERD_VERSION}-windows-amd64.tar.gz\nRUN tar xzvf cni-plugins-windows-amd64-${CNI_PLUGIN_VERSION}.tgz ./win-overlay.exe ./host-local.exe -C rancher/\n\nRUN unzip calico-windows-${CALICO_VERSION}.zip\nRUN mv CalicoWindows/calico-node.exe rancher/\nRUN mv CalicoWindows/cni/calico.exe rancher/\nRUN mv CalicoWindows/cni/calico-ipam.exe rancher/\n\nFROM scratch AS windows-runtime\nCOPY --from=windows-runtime-collect ./rancher/* /bin/\n"
}