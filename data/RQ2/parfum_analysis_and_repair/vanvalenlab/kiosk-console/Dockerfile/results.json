{
  "startTime": 1674251528346,
  "endTime": 1674251528817,
  "originalSmells": [
    {
      "rule": "apkAddUseNoCache",
      "position": {
        "lineStart": 4,
        "lineEnd": 4,
        "columnStart": 4,
        "columnEnd": 39
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM cloudposse/build-harness:1.3.0 as build-harness\n\nFROM cloudposse/geodesic:1.2.1-alpine\n\nRUN apk add --no-cache --update dialog libqrencode\n\nENV DOCKER_IMAGE=\"vanvalenlab/kiosk-console\"\nENV DOCKER_TAG=\"latest\"\n\n# Banner is what is displayed at startup and on every command line\n# in order to distinguish this image from other similar images\nENV BANNER=\"deepcell\"\nENV BANNER_FONT=\"Larry 3D 2.flf\"\n\n# Disable message of the day\nENV MOTD_URL=\"\"\n\n# Shell customization\n# options for `less`. `R` allows ANSI color codes to be displayed while stripping out\n# other control codes that can cause `less` to mess up the screen formatting\nENV LESS=R\n\n# Enable `direnv`\n# TODO: Use preferring YAML configuration files instead.\nENV DIRENV_ENABLED=true\n\n# Silence make\nENV MAKE=\"make -s\"\n\n# AWS Region\nENV AWS_REGION=\"us-west-2\"\n\n# kops config\nENV KOPS_CLUSTER_NAME=\"cluster.k8s.local\"\nENV KOPS_DNS_ZONE=${KOPS_CLUSTER_NAME}\nENV KOPS_STATE_STORE=\"s3://undefined\"\nENV KOPS_STATE_STORE_REGION=\"us-west-2\"\nENV KOPS_AVAILABILITY_ZONES=\"us-west-2a,us-west-2b,us-west-2c\"\nENV KOPS_BASTION_PUBLIC_NAME=\"bastion\"\nENV BASTION_MACHINE_TYPE=\"t2.medium\"\nENV MASTER_MACHINE_TYPE=\"t2.medium\"\nENV NODE_MACHINE_TYPE=\"t2.medium\"\nENV NODE_MAX_SIZE=\"10\"\nENV NODE_MIN_SIZE=\"1\"\n\n# GPU config\nENV GPU_NODE_MAX_SIZE=\"1\"\nENV GPU_NODE_MIN_SIZE=\"0\"\nENV GPU_PER_NODE=\"1\"\n\n# gcloud config\nENV KUBERNETES_VERSION=\"1.22\"\nENV CLOUDSDK_CORE_PROJECT=\"\"\nENV CLOUDSDK_CONTAINER_CLUSTER=\"\"\nENV CLOUDSDK_BUCKET=\"\"\nENV CLOUDSDK_COMPUTE_REGION=\"\"\nENV GCP_SERVICE_ACCOUNT=${CLOUDSDK_CONTAINER_CLUSTER}@${CLOUDSDK_CORE_PROJECT}.iam.gserviceaccount.com\nENV GCP_PREDICTION_GPU_TYPE=\"nvidia-tesla-t4\"\nENV GCP_TRAINING_GPU_TYPE=\"nvidia-tesla-v100\"\nENV GKE_MACHINE_TYPE=\"n1-standard-1\"\nENV GPU_MACHINE_TYPE=\"n1-highmem-2\"\nENV CONSUMER_MACHINE_TYPE=\"n1-standard-2\"\n# gcp auth plugin is deprecated as of k8s 1.22, use the gke auth plugin instead\n# https://cloud.google.com/blog/products/containers-kubernetes/kubectl-auth-changes-in-gke\nENV USE_GKE_GCLOUD_AUTH_PLUGIN=\"false\"\n\n# Deployment config\nENV CLOUD_PROVIDER=\"\"\nENV ELK_DEPLOYMENT_TOGGLE=\"\"\nENV CERTIFICATE_MANAGER_ENABLED=\"\"\nENV CERTIFICATE_MANAGER_CLUSTER_ISSUER=\"letsencrypt-staging\"\n\n# Filesystem entry for tfstate\nRUN s3 fstab '${KOPS_STATE_STORE}' '/' '/s3'\n\n# We do not need to access private git repos, so we can disable agent.\nRUN rm -f /etc/profile.d/ssh-agent.sh /etc/profile.d/aws-vault.sh\n\n# Copy from build-harness\nCOPY --from=build-harness /build-harness/ /build-harness/\n\n# Place configurations in 'conf/' directory\nCOPY conf/ /conf/\n\n# Add scripts to /usr/local/bin\nCOPY scripts/ /usr/local/bin/\n\n# Copy rootfs overrides\nCOPY rootfs/ /\n\n# Enable the menu\nRUN ln -s /usr/local/bin/menu.sh /etc/profile.d/ΩΩ.menu.sh\n\nENV GEODESIC_WORKDIR=/conf\n"
}