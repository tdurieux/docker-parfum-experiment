{
  "startTime": 1674255378680,
  "endTime": 1674255380971,
  "originalSmells": [
    {
      "rule": "wgetUseHttpsUrl",
      "position": {
        "lineStart": 257,
        "lineEnd": 257,
        "columnStart": 7,
        "columnEnd": 72
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 83,
        "lineEnd": 83,
        "columnStart": 7,
        "columnEnd": 25
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 168,
        "lineEnd": 168,
        "columnStart": 4,
        "columnEnd": 22
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 304,
        "lineEnd": 304,
        "columnStart": 4,
        "columnEnd": 22
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 318,
        "lineEnd": 318,
        "columnStart": 4,
        "columnEnd": 98
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 13,
        "lineEnd": 16,
        "columnStart": 4,
        "columnEnd": 12
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 21,
        "lineEnd": 24,
        "columnStart": 4,
        "columnEnd": 12
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 37,
        "lineEnd": 48,
        "columnStart": 4,
        "columnEnd": 19
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 58,
        "lineEnd": 60,
        "columnStart": 4,
        "columnEnd": 19
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 72,
        "lineEnd": 73,
        "columnStart": 4,
        "columnEnd": 23
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 78,
        "lineEnd": 80,
        "columnStart": 7,
        "columnEnd": 12
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 95,
        "lineEnd": 97,
        "columnStart": 4,
        "columnEnd": 15
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 106,
        "lineEnd": 111,
        "columnStart": 4,
        "columnEnd": 18
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 141,
        "lineEnd": 147,
        "columnStart": 4,
        "columnEnd": 18
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 153,
        "lineEnd": 160,
        "columnStart": 4,
        "columnEnd": 9
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 164,
        "lineEnd": 167,
        "columnStart": 4,
        "columnEnd": 8
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 174,
        "lineEnd": 175,
        "columnStart": 7,
        "columnEnd": 19
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 183,
        "lineEnd": 187,
        "columnStart": 4,
        "columnEnd": 11
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 205,
        "lineEnd": 210,
        "columnStart": 4,
        "columnEnd": 11
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 213,
        "lineEnd": 217,
        "columnStart": 4,
        "columnEnd": 20
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 230,
        "lineEnd": 232,
        "columnStart": 4,
        "columnEnd": 19
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 239,
        "lineEnd": 241,
        "columnStart": 4,
        "columnEnd": 19
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 247,
        "lineEnd": 254,
        "columnStart": 4,
        "columnEnd": 13
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 13,
        "lineEnd": 16,
        "columnStart": 4,
        "columnEnd": 12
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 21,
        "lineEnd": 24,
        "columnStart": 4,
        "columnEnd": 12
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 37,
        "lineEnd": 48,
        "columnStart": 4,
        "columnEnd": 19
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 58,
        "lineEnd": 60,
        "columnStart": 4,
        "columnEnd": 19
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 72,
        "lineEnd": 73,
        "columnStart": 4,
        "columnEnd": 23
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 78,
        "lineEnd": 80,
        "columnStart": 7,
        "columnEnd": 12
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 95,
        "lineEnd": 97,
        "columnStart": 4,
        "columnEnd": 15
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 106,
        "lineEnd": 111,
        "columnStart": 4,
        "columnEnd": 18
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 141,
        "lineEnd": 147,
        "columnStart": 4,
        "columnEnd": 18
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 153,
        "lineEnd": 160,
        "columnStart": 4,
        "columnEnd": 9
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 164,
        "lineEnd": 167,
        "columnStart": 4,
        "columnEnd": 8
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 174,
        "lineEnd": 175,
        "columnStart": 7,
        "columnEnd": 19
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 183,
        "lineEnd": 187,
        "columnStart": 4,
        "columnEnd": 11
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 205,
        "lineEnd": 210,
        "columnStart": 4,
        "columnEnd": 11
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 213,
        "lineEnd": 217,
        "columnStart": 4,
        "columnEnd": 20
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 230,
        "lineEnd": 232,
        "columnStart": 4,
        "columnEnd": 19
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 239,
        "lineEnd": 241,
        "columnStart": 4,
        "columnEnd": 19
      }
    },
    {
      "rule": "ruleAptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 247,
        "lineEnd": 254,
        "columnStart": 4,
        "columnEnd": 13
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 13,
        "lineEnd": 16,
        "columnStart": 4,
        "columnEnd": 12
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 21,
        "lineEnd": 24,
        "columnStart": 4,
        "columnEnd": 12
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 37,
        "lineEnd": 48,
        "columnStart": 4,
        "columnEnd": 19
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 58,
        "lineEnd": 60,
        "columnStart": 4,
        "columnEnd": 19
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 72,
        "lineEnd": 73,
        "columnStart": 4,
        "columnEnd": 23
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 78,
        "lineEnd": 80,
        "columnStart": 7,
        "columnEnd": 12
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 95,
        "lineEnd": 97,
        "columnStart": 4,
        "columnEnd": 15
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 106,
        "lineEnd": 111,
        "columnStart": 4,
        "columnEnd": 18
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 141,
        "lineEnd": 147,
        "columnStart": 4,
        "columnEnd": 18
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 153,
        "lineEnd": 160,
        "columnStart": 4,
        "columnEnd": 9
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 164,
        "lineEnd": 167,
        "columnStart": 4,
        "columnEnd": 8
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 174,
        "lineEnd": 175,
        "columnStart": 7,
        "columnEnd": 19
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 183,
        "lineEnd": 187,
        "columnStart": 4,
        "columnEnd": 11
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 205,
        "lineEnd": 210,
        "columnStart": 4,
        "columnEnd": 11
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 213,
        "lineEnd": 217,
        "columnStart": 4,
        "columnEnd": 20
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 230,
        "lineEnd": 232,
        "columnStart": 4,
        "columnEnd": 19
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 239,
        "lineEnd": 241,
        "columnStart": 4,
        "columnEnd": 19
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 247,
        "lineEnd": 254,
        "columnStart": 4,
        "columnEnd": 13
      }
    }
  ],
  "repairedDockerfile": "#############\n### base ###\n#############\nFROM python:3.9-buster as base\n\nWORKDIR /app\n\n###################################\n# update apt package database\nRUN apt-get update -y\n\n###################################\n# AMICI\nRUN apt-get install --no-install-recommends -y \\\n        g++ \\\n        libatlas-base-dev \\\n        swig && rm -rf /var/lib/apt/lists/*;\n\n###################################\n# BioNetGen\nARG BIONETGEN_VERSION=2.8.0\nRUN apt-get install -y --no-install-recommends \\\n        perl \\\n        tar \\\n        wget \\\n    \\\n    && cd /tmp \\\n    && wget https://github.com/RuleWorld/bionetgen/releases/download/BioNetGen-${BIONETGEN_VERSION}/BioNetGen-${BIONETGEN_VERSION}-linux.tgz \\\n    && tar xvvf BioNetGen-${BIONETGEN_VERSION}-linux.tgz \\\n    && mv BioNetGen-${BIONETGEN_VERSION}/ /opt/ \\\n\n    && rm BioNetGen-${BIONETGEN_VERSION}-linux.tgz && rm -rf /var/lib/apt/lists/*;\nENV PATH=${PATH}:/opt/BioNetGen-${BIONETGEN_VERSION}/\n\n###################################\n# BoolNet\nARG BOOLNET_VERSION=2.1.5\nRUN apt-get install -y --no-install-recommends \\\n        r-base \\\n        build-essential \\\n        gcc \\\n        gfortran \\\n        libblas-dev \\\n        libcurl4-openssl-dev \\\n        libgit2-dev \\\n        liblapack-dev \\\n        libssl-dev \\\n        libxml2 \\\n        libxml2-dev \\\n\n    && Rscript \\\n        -e \"install.packages('devtools')\" \\\n        -e \"require(devtools)\" \\\n        -e \"install_version('BoolNet', version='${BOOLNET_VERSION}')\" \\\n        -e \"require('BoolNet')\" && rm -rf /var/lib/apt/lists/*;\n\n###################################\n# CBMPy\nRUN apt-get install -y --no-install-recommends \\\n        gcc \\\n        libglpk-dev && rm -rf /var/lib/apt/lists/*;\n\n###################################\n# COBRAPY\nRUN mkdir -p /.cache/cobrapy \\\n    && chmod ugo+rw /.cache/cobrapy\n\n###################################\n# COPASI\n\n###################################\n# GillesPy2\nRUN apt-get install -y --no-install-recommends \\\n        build-essential && rm -rf /var/lib/apt/lists/*;\n\n###################################\n# GINsim: Set up path; needed up installation of GINsim Python package is fixed\nRUN mkdir -p /usr/share/man/man1/ \\\n    && apt-get install -y --no-install-recommends \\\n        default-jre \\\n        wget \\\n    \\\n    && cd /tmp \\\n    && pip install --no-cache-dir ginsim \\\n    && wget https://raw.githubusercontent.com/GINsim/GINsim-python/master/ginsim_setup.py \\\n    && python ginsim_setup.py \\\n\n    && rm ginsim_setup.py && rm -rf /var/lib/apt/lists/*;\n\n###################################\n# libSBMLSIM\nARG LSBMLSIM_VERSION=1.4.0\nARG LIBSBML_VERSION=5.19.0\n\n# libSBML\nRUN apt-get install --no-install-recommends -y \\\n        wget \\\n        libxml2 \\\n    \\\n    && wget https://master.dl.sourceforge.net/project/sbml/libsbml/${LIBSBML_VERSION}/stable/Linux/64-bit/libSBML-${LIBSBML_VERSION}-Linux-x64.deb \\\n    && dpkg -i libSBML-${LIBSBML_VERSION}-Linux-x64.deb \\\n\n    && rm libSBML-${LIBSBML_VERSION}-Linux-x64.deb && rm -rf /var/lib/apt/lists/*;\nENV LD_LIBRARY_PATH=/usr/lib64:$LD_LIBRARY_PATH\n\n# LibSBMLSim\nRUN apt-get install --no-install-recommends -y \\\n        wget \\\n        build-essential \\\n        cmake \\\n        swig \\\n        libbz2-dev \\\n    \\\n    && PY_EXEC_PATH=$(which python) \\\n    && PY_PREFIX=$(echo ${PY_EXEC_PATH} | rev | cut -d \"/\" -f 3- | rev) \\\n    && cd /tmp \\\n    && wget https://github.com/libsbmlsim/libsbmlsim/archive/refs/tags/v${LSBMLSIM_VERSION}.tar.gz \\\n    && tar xvvf v${LSBMLSIM_VERSION}.tar.gz \\\n    && cd libsbmlsim-${LSBMLSIM_VERSION} \\\n    && mkdir build \\\n    && cd build \\\n    && PYTHON_MAJOR_MINOR_VERSION=$(echo $PYTHON_VERSION | cut -d . -f 1-2) \\\n    && cmake \\\n        -D LIBSBML_INCLUDE_DIR=/usr/include \\\n        -D LIBSBML_LIBRARY=/usr/lib64/libsbml.so \\\n        -D WITH_PYTHON=ON \\\n        -D PYTHON_PREFIX=${PY_PREFIX} \\\n        -D PYTHON_EXECUTABLE:FILEPATH=${PY_EXEC_PATH} \\\n        -D PYTHON_INCLUDE_DIR:PATH=/usr/local/include/python${PYTHON_MAJOR_MINOR_VERSION} \\\n        -D PYTHON_LIBRARY:FILEPATH=/usr/local/lib/libpython${PYTHON_MAJOR_MINOR_VERSION}.so \\\n        .. \\\n    \\\n    && make \\\n    && make install \\\n    \\\n    && cd /tmp \\\n    && rm v${LSBMLSIM_VERSION}.tar.gz \\\n    && rm -r libsbmlsim-${LSBMLSIM_VERSION} && rm -rf /var/lib/apt/lists/*;\n\n###################################\n# MASSpy\nRUN apt-get install -y --no-install-recommends \\\n        git \\\n        gcc \\\n        build-essential \\\n        libfreetype6-dev \\\n        libfreetype6 \\\n        pkg-config \\\n\n    && mkdir -p /.cache/cobrapy && rm -rf /var/lib/apt/lists/*;\n\n###################################\n# NetPyNe\nRUN apt-get install -y --no-install-recommends \\\n    gcc \\\n    g++ \\\n    make \\\n    libmpich-dev \\\n    mpi \\\n    mpi-default-bin \\\n    mpich && rm -rf /var/lib/apt/lists/*;\n\n###################################\n# NEURON\nRUN apt-get install -y --no-install-recommends \\\n    gcc \\\n    g++ \\\n    make && rm -rf /var/lib/apt/lists/*;\nRUN pip install --no-cache-dir neuron\nENV NEURON_HOME=/usr/local\n\n###################################\n# pyNeuroML, LEMS\nRUN mkdir -p /usr/share/man/man1/ \\\n    && apt-get install -y --no-install-recommends \\\n        default-jre && rm -rf /var/lib/apt/lists/*;\n\n###################################\n# PySCeS\n\n# SUNDIALS\n# ignore certificate checking because certificate was expired as of 2021-11-10\nARG SUNDIALS_VERSION=2.6.2\nRUN apt-get install -y --no-install-recommends \\\n        wget \\\n        cmake \\\n        make \\\n        g++ \\\n    \\\n    && cd /tmp \\\n    && wget --no-check-certificate https://computing.llnl.gov/sites/default/files/inline-files/sundials-${SUNDIALS_VERSION}.tar.gz \\\n    && tar xvvf sundials-${SUNDIALS_VERSION}.tar.gz \\\n    && cd sundials-${SUNDIALS_VERSION} \\\n    && mkdir build \\\n    && cd build \\\n    && cmake .. \\\n    && make \\\n    && make install \\\n    \\\n    && cd /tmp \\\n    && rm sundials-${SUNDIALS_VERSION}.tar.gz \\\n    && rm -r sundials-${SUNDIALS_VERSION} && rm -rf /var/lib/apt/lists/*;\nENV LD_LIBRARY_PATH=/usr/local/lib:$LD_LIBRARY_PATH\n\n# Assimulo\nRUN apt-get install -y --no-install-recommends \\\n        g++ \\\n        gfortran \\\n        libblas-dev \\\n        liblapack-dev \\\n        git && rm -rf /var/lib/apt/lists/*;\n\n# PySCeS\nRUN apt-get install -y --no-install-recommends \\\n        git \\\n        gcc \\\n        gfortran \\\n        libgfortran5 && rm -rf /var/lib/apt/lists/*;\n\n# Configure PySCeS\nCOPY Dockerfile-assets/.pys_usercfg.ini /Pysces/.pys_usercfg.ini\nCOPY Dockerfile-assets/.pys_usercfg.ini /root/Pysces/.pys_usercfg.ini\nRUN mkdir -p /Pysces \\\n    && mkdir -p /Pysces/psc \\\n    && mkdir -p /root/Pysces \\\n    && mkdir -p /root/Pysces/psc \\\n    && chmod ugo+rw -R /Pysces\n\n###################################\n# RBApy\nRUN apt-get install -y --no-install-recommends \\\n        gcc \\\n        libglpk-dev && rm -rf /var/lib/apt/lists/*;\n\n###################################\n# Smoldyn\n\n###################################\n# tellurium\nRUN apt-get install -y --no-install-recommends \\\n        libxml2 \\\n        libncurses5 && rm -rf /var/lib/apt/lists/*;\nENV PLOTTING_ENGINE=matplotlib \\\n    PYTHONWARNINGS=\"ignore:The 'warn' parameter of use():UserWarning:tellurium.tellurium,ignore:Matplotlib is currently using agg:UserWarning:tellurium.plotting.engine_mpl\"\n\n###################################\n# XPP\nRUN apt-get install -y --no-install-recommends \\\n        wget \\\n        make \\\n        gcc \\\n        libx11-dev \\\n        libc6-dev \\\n        libx11-6 \\\n        libc6 \\\n    \\\n    && cd /tmp \\\n    && wget https://www.math.pitt.edu/~bard/bardware/xppaut_latest.tar.gz \\\n    && mkdir xpp \\\n    && tar zxvf xppaut_latest.tar.gz --directory xpp \\\n    && cd xpp \\\n    && make \\\n    && make install \\\n\n    && cd /tmp \\\n    && rm xppaut_latest.tar.gz \\\n    && rm -r xpp && rm -rf /var/lib/apt/lists/*;\n\n###################################\n# setup headless for NEURON, Smoldyn\nRUN apt-get -y update \\\n    \\\n    && apt-get install --no-install-recommends -y \\\n        xvfb \\\n    && mkdir /tmp/.X11-unix \\\n    && chmod 1777 /tmp/.X11-unix \\\n    \\\n    && rm -rf /var/lib/apt/lists/*\nCOPY Dockerfile-assets/xvfb-startup.sh /xvfb-startup.sh\nENV XVFB_RES=\"1920x1080x24\" \\\n    XVFB_ARGS=\"\"\n\n###################################\n# fonts for matplotlib\nRUN apt-get update -y \\\n    && apt-get install -y --no-install-recommends libfreetype6 \\\n    && rm -rf /var/lib/apt/lists/*\n\n# configure matplotlib cache and config to avoid warnings\nRUN mkdir -p /.cache/matplotlib \\\n    && mkdir -p /.config/matplotlib \\\n    && chmod ugo+rw /.config/matplotlib \\\n    && chmod ugo+rw /.cache/matplotlib\n\n# Configure default simulator options\nENV ALGORITHM_SUBSTITUTION_POLICY=SIMILAR_VARIABLES \\\n    VERBOSE=0 \\\n    MPLBACKEND=PDF \\\n    PLOTTING_ENGINE=matplotlib\n\n###################################\n# setup python, ports\n\n# install pipenv\nRUN pip install --no-cache-dir pipenv\n\n# Copy over dependency list\nCOPY Dockerfile-assets/Pipfile /app/Pipfile\nCOPY Dockerfile-assets/Pipfile.lock /app/Pipfile.lock\n\n# install environment\nRUN pipenv install --system --deploy\n\n# set up matplotlib font manager\nRUN python -c \"import matplotlib.font_manager\"\n\n# install assimulo because pipenv fails to install it\nARG ASSIMULO_VERSION=3.2.9\nRUN pip install --no-cache-dir git+https://github.com/modelon-community/Assimulo.git@Assimulo-${ASSIMULO_VERSION}\n\nEXPOSE 3333\nCMD /bin/bash /xvfb-startup.sh \\\n    gunicorn \\\n        --bind 0.0.0.0:3333 src.app:app \\\n        --workers 2 \\\n        --threads 4 \\\n        --worker-class gthread \\\n        --max-requests 1000 \\\n        --timeout 30 \\\n        --keep-alive 5 \\\n        --worker-tmp-dir /dev/shm \\\n        --log-level debug \\\n        --log-file=-\n\n#############\n### build ###\n#############\nFROM base as build\n\nARG app\nENV APP=$app\n\nRUN echo building ${app}\n\nCOPY src/ /app/src/\nCOPY vendor/ /app/vendor/\nRUN python -m compileall /app/src/ \\\n    && PY_EXEC_PATH=$(which python) \\\n    && PY_PREFIX=$(echo ${PY_EXEC_PATH} | rev | cut -d \"/\" -f 3- | rev) \\\n    && PYTHON_MAJOR_MINOR_VERSION=$(echo $PYTHON_VERSION | cut -d . -f 1-2) \\\n    && python -m compileall ${PY_PREFIX}/lib/python${PYTHON_MAJOR_MINOR_VERSION}/site-packages \\\n    && PYTHONPATH=/app python -c \"from src.handlers.run.utils import write_simulator_specs_cache; write_simulator_specs_cache();\" \\\n    || exit 0\n\nLABEL \\\n    org.opencontainers.image.title=\"BioSimulations ${app}\" \\\n    org.opencontainers.image.description=\"Docker image for BioSimulations ${app}\" \\\n    org.opencontainers.image.url=\"https://biosimulations.org/\" \\\n    org.opencontainers.image.documentation=\"https://docs.biosimulations.org/\" \\\n    org.opencontainers.image.source=\"https://github.com/biosimulations/biosimulations\" \\\n    org.opencontainers.image.authors=\"BioSimulations Team <info@biosimulations.org>\" \\\n    org.opencontainers.image.vendor=\"BioSimulations Team\" \\\n    org.opencontainers.image.licenses=\"MIT\"\n"
}