{"startTime":"2023-01-11T19:36:41.411Z","endTime":1673465813702,"repository":"leighmacdonald/gbans","organization":"docker-parfum","dockerfilePath":"Dockerfile","dockerfile_sha":"6d4824348e2ea621af03b5007a6f22f21d3c8177","dockerfile":"# node-sass does not compile with node:16 yet\nFROM node:18-alpine as frontend\nWORKDIR /build\nRUN apk add python3 make g++\nCOPY frontend/package.json frontend/package.json\nCOPY frontend/yarn.lock yarn.lock\nCOPY frontend frontend\nWORKDIR /build/frontend\nRUN yarn\nRUN yarn build\n\nFROM golang:1.19-alpine as build\nWORKDIR /build\nRUN apk add make git gcc libc-dev\nCOPY go.mod go.sum Makefile main.go ./\nRUN go mod download\nCOPY pkg pkg\nCOPY internal internal\nRUN make build\n\nFROM alpine:latest\nLABEL maintainer=\"Leigh MacDonald <leigh.macdonald@gmail.com>\"\nLABEL org.opencontainers.image.source=\"https://github.com/leighmacdonald/gbans\"\nEXPOSE 6006\nRUN apk add dumb-init\nWORKDIR /app\nVOLUME [\"/app/.cache\"]\nCOPY --from=frontend /build/dist ./dist/\nCOPY --from=build /build/build/linux64/gbans .\nENTRYPOINT [\"dumb-init\", \"--\"]\nCMD [\"./gbans\", \"serve\"]\n"}