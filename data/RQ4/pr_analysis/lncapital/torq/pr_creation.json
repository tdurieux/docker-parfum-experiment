{"startTime":"2023-01-11T19:32:03.313Z","endTime":1673465539887,"repository":"lncapital/torq","organization":"docker-parfum","dockerfilePath":"Dockerfile","dockerfile_sha":"cd9ff00e16a5d5bf1a3f3c33bdbe10816682d266","dockerfile":"# build stage\nFROM golang:buster as backend-builder\nARG BUILD_VER=v0.1.1-dev\nENV GO111MODULE=on\nWORKDIR /app\nCOPY go.mod .\nCOPY go.sum .\nRUN go mod download\nCOPY . .\nRUN CGO_ENABLED=0 GOOS=linux go build -ldflags=\"-X github.com/lncapital/torq/build.overrideBuildVer=$BUILD_VER\" cmd/torq/torq.go\n\n# frontend build stage\nFROM node:buster-slim as frontend-builder\nWORKDIR /app\nCOPY web/package*.json ./\nRUN npm install --legacy-peer-deps\nCOPY web/. .\nRUN TSX_COMPILE_ON_ERROR=true ESLINT_NO_DEV_ERRORS=true npm run build\n\n# final stage\nFROM debian:buster-slim\nCOPY --from=backend-builder /app/torq /app/\nCOPY --from=frontend-builder /app/build /app/web/build\nRUN useradd -ms /bin/bash torq\nRUN apt-get -y update\nRUN apt-get -y install ca-certificates bash\nRUN update-ca-certificates\nENV GIN_MODE=release\nWORKDIR /app\nUSER torq\nENTRYPOINT [\"./torq\"]\n"}