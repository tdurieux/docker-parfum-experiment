{"repository":"https://github.com/mitre/saf","dockerfilePath":"Dockerfile","startTime":1672851824108,"endTime":1672852664584,"clone":{"startTime":1672851824109,"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/mitre/saf'...\n","error":null,"endTime":1672851827270,"commit":"34551375723473528251b40d65c53f22acd7b5d2"},"originalBuild":{"startTime":1672851827356,"endTime":1672852306410,"error":null,"stdout":"Sending build context to Docker daemon  150.3MB\r\r\nStep 1/15 : FROM node:lts-alpine as builder\n ---> 6d7b7852bcd3\nStep 2/15 : LABEL name=\"SAF\"       vendor=\"The MITRE Corporation\"       version=\"${SAF_VERSION}\"       release=\"1\"       url=\"https://github.com/mitre/saf\"       description=\"The MITRE Security Automation Framework (SAF) Command Line Interface (CLI) brings together applications, techniques, libraries, and tools developed by MITRE and the security community to streamline security automation for systems and DevOps pipelines\"       docs=\"https://github.com/mitre/saf\"       run=\"docker run -d --name ${NAME} ${IMAGE} <args>\"\n ---> Running in 9fd6364ba19a\nRemoving intermediate container 9fd6364ba19a\n ---> 9607c9c0cf29\nStep 3/15 : RUN mkdir -p /share\n ---> Running in d1f158fd3c43\nRemoving intermediate container d1f158fd3c43\n ---> 93e176ae444a\nStep 4/15 : COPY . /build\n ---> f028fac9470f\nStep 5/15 : WORKDIR /build\n ---> Running in 3195dd7313ad\nRemoving intermediate container 3195dd7313ad\n ---> b0ac05fa3656\nStep 6/15 : RUN rm -rf test\n ---> Running in 1de7aa32fc31\nRemoving intermediate container 1de7aa32fc31\n ---> 3c4ab88c253f\nStep 7/15 : RUN yarn --frozen-lockfile --production --network-timeout 600000\n ---> Running in 3bfef2c757f2\nyarn install v1.22.19\ninfo No lockfile found.\n\u001b[91mwarning package-lock.json found. Your project contains lock files generated by tools other than Yarn. It is advised not to mix package managers in order to avoid resolution inconsistencies caused by unsynchronized lock files. To clear this warning, remove package-lock.json.\n\u001b[0m[1/5] Validating package.json...\n[2/5] Resolving packages...\n\u001b[91mwarning @mitre/hdf-converters > aws-sdk > querystring@0.2.0: The querystring API is considered Legacy. new code should use the URLSearchParams API instead.\n\u001b[0m\u001b[91mwarning @mitre/hdf-converters > aws-sdk > url > querystring@0.2.0: The querystring API is considered Legacy. new code should use the URLSearchParams API instead.\n\u001b[0m\u001b[91mwarning oclif > yeoman-environment > @npmcli/arborist > @npmcli/move-file@1.1.2: This functionality has been moved to @npmcli/fs\n\u001b[0m\u001b[91mwarning oclif > yeoman-environment > @npmcli/arborist > cacache > @npmcli/move-file@1.1.2: This functionality has been moved to @npmcli/fs\n\u001b[0m\u001b[91mwarning oclif > yeoman-environment > @npmcli/arborist > readdir-scoped-modules@1.1.0: This functionality has been moved to @npmcli/fs\n\u001b[0m\u001b[91mwarning oclif > yeoman-environment > @npmcli/arborist > npm-registry-fetch > make-fetch-happen > cacache > @npmcli/move-file@2.0.1: This functionality has been moved to @npmcli/fs\n\u001b[0m[3/5] Fetching packages...\n[4/5] Linking dependencies...\n\u001b[91mwarning \" > inquirer-file-tree-selection-prompt@2.0.5\" has incorrect peer dependency \"inquirer@^9.0.0\".\nwarning \" > @typescript-eslint/eslint-plugin@5.48.0\" has unmet peer dependency \"@typescript-eslint/parser@^5.0.0\".\n\u001b[0m\u001b[91mwarning \"eslint-config-oclif-typescript > @typescript-eslint/eslint-plugin@4.33.0\" has incorrect peer dependency \"eslint@^5.0.0 || ^6.0.0 || ^7.0.0\".\n\u001b[0m\u001b[91mwarning \"eslint-config-oclif-typescript > @typescript-eslint/parser@4.33.0\" has incorrect peer dependency \"eslint@^5.0.0 || ^6.0.0 || ^7.0.0\".\n\u001b[0m\u001b[91mwarning \"oclif > yeoman-environment@3.13.0\" has unmet peer dependency \"mem-fs@^1.2.0 || ^2.0.0\".\n\u001b[0m\u001b[91mwarning \"oclif > yeoman-environment@3.13.0\" has unmet peer dependency \"mem-fs-editor@^8.1.2 || ^9.0.0\".\n\u001b[0m[5/5] Building fresh packages...\nDone in 88.84s.\nRemoving intermediate container 3bfef2c757f2\n ---> 1ccb7cdc6f99\nStep 8/15 : RUN yarn pack --install-if-needed --prod --filename saf.tgz\n ---> Running in 47582b6c1de6\nyarn pack v1.22.19\n$ run-script-os\nyarn run v1.22.19\n$ rm -rf lib && node_modules/.bin/tsc -b\nDone in 12.28s.\nsuccess Wrote tarball to \"saf.tgz\".\nDone in 12.99s.\nRemoving intermediate container 47582b6c1de6\n ---> bc10de456aa7\nStep 9/15 : FROM node:lts-alpine\n ---> 6d7b7852bcd3\nStep 10/15 : COPY --from=builder /build/saf.tgz /build/\n ---> 0a160b7da77b\nStep 11/15 : RUN npm install -g /build/saf.tgz\n ---> Running in 4e049cab9cad\n\u001b[91mnpm WARN ERESOLVE overriding peer dependency\n\u001b[0m\u001b[91mnpm WARN While resolving: inquirer-file-tree-selection-prompt@2.0.5\nnpm WARN Found: inquirer@8.2.5\nnpm\u001b[0m\u001b[91m WARN node_modules/@mitre/saf/node_modules/inquirer\nnpm WARN   inquirer@\"^8.0.0\" from @mitre/saf@1.2.1\n\u001b[0m\u001b[91mnpm WARN   node_modules/@mitre/saf\nnpm\u001b[0m\u001b[91m WARN\u001b[0m\u001b[91m     @mitre/saf@\"file:../../../build/saf.tgz\" from the root project\nnpm WARN\u001b[0m\u001b[91m \nnpm WARN\u001b[0m\u001b[91m Could not resolve dependency:\n\u001b[0m\u001b[91mnpm WARN\u001b[0m\u001b[91m peer inquirer@\"^9.0.0\" from inquirer-file-tree-selection-prompt@2.0.5\nnpm\u001b[0m\u001b[91m WARN node_modules/@mitre/saf/node_modules/inquirer-file-tree-selection-prompt\nnpm \u001b[0m\u001b[91mWARN   inquirer-file-tree-selection-prompt@\"^2.0.2\" from @mitre/saf@1.2.1\nnpm WARN   node_modules/@mitre/saf\n\u001b[0m\u001b[91mnpm WARN\u001b[0m\u001b[91m \nnpm\u001b[0m\u001b[91m WARN\u001b[0m\u001b[91m Conflicting peer dependency: inquirer@9.1.4\n\u001b[0m\u001b[91mnpm WARN\u001b[0m\u001b[91m node_modules/inquirer\n\u001b[0m\u001b[91mnpm\u001b[0m\u001b[91m \u001b[0m\u001b[91mWARN\u001b[0m\u001b[91m   peer inquirer@\"^9.0.0\" from inquirer-file-tree-selection-prompt@2.0.5\nnpm WARN\u001b[0m\u001b[91m   node_modules/@mitre/saf/node_modules/inquirer-file-tree-selection-prompt\n\u001b[0m\u001b[91mnpm \u001b[0m\u001b[91mWARN\u001b[0m\u001b[91m     inquirer-file-tree-selection-prompt@\"^2.0.2\" from @mitre/saf@1.2.1\nnpm \u001b[0m\u001b[91mWARN\u001b[0m\u001b[91m     node_modules/@mitre/saf\n\u001b[0m\u001b[91mnpm \u001b[0m\u001b[91mWARN EBADENGINE Unsupported engine {\nnpm \u001b[0m\u001b[91mWARN EBADENGINE   package: '@mitre/heimdall-lite@2.6.34',\n\u001b[0m\u001b[91mnpm WARN\u001b[0m\u001b[91m EBADENGINE   required: { node: '<17.0.0' },\n\u001b[0m\u001b[91mnpm WARN\u001b[0m\u001b[91m EBADENGINE\u001b[0m\u001b[91m   current: { node: 'v18.12.1', npm: '8.19.2' }\nnpm WARN \u001b[0m\u001b[91mEBADENGINE }\n\u001b[0m\u001b[91mnpm WARN deprecated querystring@0.2.0: The querystring API is considered Legacy. new code should use the URLSearchParams API instead.\n\u001b[0m\nadded 822 packages, and audited 823 packages in 37s\n\n87 packages are looking for funding\n  run `npm fund` for details\n\nfound 0 vulnerabilities\n\u001b[91mnpm notice \nnpm notice New major version of npm available! 8.19.2 -> 9.2.0\nnpm notice Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm notice\u001b[0m\u001b[91m Run `npm install -g npm@9.2.0` to update!\nnpm notice \n\u001b[0mRemoving intermediate container 4e049cab9cad\n ---> a13739f71d1d\nStep 12/15 : RUN apk add bash jq curl ca-certificates\n ---> Running in f0adb5dbe29b\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/11) Installing ncurses-terminfo-base (6.3_p20221119-r0)\n(2/11) Installing ncurses-libs (6.3_p20221119-r0)\n(3/11) Installing readline (8.2.0-r0)\n(4/11) Installing bash (5.2.15-r0)\nExecuting bash-5.2.15-r0.post-install\n(5/11) Installing ca-certificates (20220614-r3)\n(6/11) Installing brotli-libs (1.0.9-r9)\n(7/11) Installing nghttp2-libs (1.51.0-r0)\n(8/11) Installing libcurl (7.87.0-r0)\n(9/11) Installing curl (7.87.0-r0)\n(10/11) Installing oniguruma (6.9.8-r0)\n(11/11) Installing jq (1.6-r2)\nExecuting busybox-1.35.0-r29.trigger\nExecuting ca-certificates-20220614-r3.trigger\nOK: 15 MiB in 28 packages\nRemoving intermediate container f0adb5dbe29b\n ---> 17f23a8ca0ad\nStep 13/15 : ENTRYPOINT [\"saf\"]\n ---> Running in b95c3331797d\nRemoving intermediate container b95c3331797d\n ---> b9ac6431e649\nStep 14/15 : VOLUME [\"/share\"]\n ---> Running in cedcfd2ecdcb\nRemoving intermediate container cedcfd2ecdcb\n ---> c52390db030e\nStep 15/15 : WORKDIR /share\n ---> Running in 4766323d9e40\nRemoving intermediate container 4766323d9e40\n ---> 793d224f3e73\nSuccessfully built 793d224f3e73\nSuccessfully tagged saf:latest\n","stderr":"","imageSize":633266552},"repair":{"startTime":1672852306467,"endTime":1672852306558,"violations":[{"name":"npmCacheCleanAfterInstall","position":{"start":22,"end":22,"columnStart":4,"columnEnd":33}},{"name":"apkAddUseNoCache","position":{"start":25,"end":25,"columnStart":4,"columnEnd":40}}],"repairedDockerfile":"FROM node:lts-alpine as builder\n\nLABEL name=\"SAF\" \\\n      vendor=\"The MITRE Corporation\" \\\n      version=\"${SAF_VERSION}\" \\\n      release=\"1\" \\\n      url=\"https://github.com/mitre/saf\" \\\n      description=\"The MITRE Security Automation Framework (SAF) Command Line Interface (CLI) brings together applications, techniques, libraries, and tools developed by MITRE and the security community to streamline security automation for systems and DevOps pipelines\" \\\n      docs=\"https://github.com/mitre/saf\" \\\n      run=\"docker run -d --name ${NAME} ${IMAGE} <args>\"\n\nRUN mkdir -p /share\n\nCOPY . /build\nWORKDIR /build\nRUN rm -rf test\nRUN yarn --frozen-lockfile --production --network-timeout 600000\nRUN yarn pack --install-if-needed --prod --filename saf.tgz\n\nFROM node:lts-alpine\n\nCOPY --from=builder /build/saf.tgz /build/\nRUN npm install -g /build/saf.tgz && npm cache clean --force;\n\n# Useful for CI pipelines\nRUN apk add --no-cache bash jq curl ca-certificates\n\nENTRYPOINT [\"saf\"]\nVOLUME [\"/share\"]\nWORKDIR /share\n"},"repairedBuild":{"startTime":1672852310022,"endTime":1672852663204,"error":null,"stdout":"Sending build context to Docker daemon  150.3MB\r\r\nStep 1/15 : FROM node:lts-alpine as builder\n ---> 6d7b7852bcd3\nStep 2/15 : LABEL name=\"SAF\"       vendor=\"The MITRE Corporation\"       version=\"${SAF_VERSION}\"       release=\"1\"       url=\"https://github.com/mitre/saf\"       description=\"The MITRE Security Automation Framework (SAF) Command Line Interface (CLI) brings together applications, techniques, libraries, and tools developed by MITRE and the security community to streamline security automation for systems and DevOps pipelines\"       docs=\"https://github.com/mitre/saf\"       run=\"docker run -d --name ${NAME} ${IMAGE} <args>\"\n ---> Running in 1b251fcd0b8b\nRemoving intermediate container 1b251fcd0b8b\n ---> 28a425c60a73\nStep 3/15 : RUN mkdir -p /share\n ---> Running in 02c0d5819092\nRemoving intermediate container 02c0d5819092\n ---> 3bfa28b0e4a6\nStep 4/15 : COPY . /build\n ---> 8ced239a7beb\nStep 5/15 : WORKDIR /build\n ---> Running in 97638a6fb5e3\nRemoving intermediate container 97638a6fb5e3\n ---> abfd9a2f2007\nStep 6/15 : RUN rm -rf test\n ---> Running in 6b62727fa468\nRemoving intermediate container 6b62727fa468\n ---> 4f7185c5e1bb\nStep 7/15 : RUN yarn --frozen-lockfile --production --network-timeout 600000\n ---> Running in 83f33fb176b6\nyarn install v1.22.19\ninfo No lockfile found.\n\u001b[91mwarning package-lock.json found. Your project contains lock files generated by tools other than Yarn. It is advised not to mix package managers in order to avoid resolution inconsistencies caused by unsynchronized lock files. To clear this warning, remove package-lock.json.\n\u001b[0m[1/5] Validating package.json...\n[2/5] Resolving packages...\n\u001b[91mwarning @mitre/hdf-converters > aws-sdk > querystring@0.2.0: The querystring API is considered Legacy. new code should use the URLSearchParams API instead.\n\u001b[0m\u001b[91mwarning @mitre/hdf-converters > aws-sdk > url > querystring@0.2.0: The querystring API is considered Legacy. new code should use the URLSearchParams API instead.\n\u001b[0m\u001b[91mwarning oclif > yeoman-environment > @npmcli/arborist > readdir-scoped-modules@1.1.0: This functionality has been moved to @npmcli/fs\n\u001b[0m\u001b[91mwarning oclif > yeoman-environment > @npmcli/arborist > @npmcli/move-file@1.1.2: This functionality has been moved to @npmcli/fs\n\u001b[0m\u001b[91mwarning oclif > yeoman-environment > pacote > cacache > @npmcli/move-file@1.1.2: This functionality has been moved to @npmcli/fs\n\u001b[0m\u001b[91mwarning oclif > yeoman-environment > pacote > npm-registry-fetch > make-fetch-happen > cacache > @npmcli/move-file@2.0.1: This functionality has been moved to @npmcli/fs\n\u001b[0m[3/5] Fetching packages...\n[4/5] Linking dependencies...\n\u001b[91mwarning \" > inquirer-file-tree-selection-prompt@2.0.5\" has incorrect peer dependency \"inquirer@^9.0.0\".\n\u001b[0m\u001b[91mwarning \" > @typescript-eslint/eslint-plugin@5.48.0\" has unmet peer dependency \"@typescript-eslint/parser@^5.0.0\".\n\u001b[0m\u001b[91mwarning \"eslint-config-oclif-typescript > @typescript-eslint/eslint-plugin@4.33.0\" has incorrect peer dependency \"eslint@^5.0.0 || ^6.0.0 || ^7.0.0\".\n\u001b[0m\u001b[91mwarning \"eslint-config-oclif-typescript > @typescript-eslint/parser@4.33.0\" has incorrect peer dependency \"eslint@^5.0.0 || ^6.0.0 || ^7.0.0\".\n\u001b[0m\u001b[91mwarning \"oclif > yeoman-environment@3.13.0\" has unmet peer dependency \"mem-fs@^1.2.0 || ^2.0.0\".\nwarning \"oclif > yeoman-environment@3.13.0\" has unmet peer dependency \"mem-fs-editor@^8.1.2 || ^9.0.0\".\n\u001b[0m[5/5] Building fresh packages...\nDone in 94.00s.\nRemoving intermediate container 83f33fb176b6\n ---> f3d6f75a3031\nStep 8/15 : RUN yarn pack --install-if-needed --prod --filename saf.tgz\n ---> Running in 1cdae8227a55\nyarn pack v1.22.19\n$ run-script-os\nyarn run v1.22.19\n$ rm -rf lib && node_modules/.bin/tsc -b\nDone in 11.01s.\nsuccess Wrote tarball to \"saf.tgz\".\nDone in 11.68s.\nRemoving intermediate container 1cdae8227a55\n ---> 11792e3a9620\nStep 9/15 : FROM node:lts-alpine\n ---> 6d7b7852bcd3\nStep 10/15 : COPY --from=builder /build/saf.tgz /build/\n ---> ca4f68495ef8\nStep 11/15 : RUN npm install -g /build/saf.tgz && npm cache clean --force;\n ---> Running in 119e2004a59e\n\u001b[91mnpm WARN ERESOLVE overriding peer dependency\n\u001b[0m\u001b[91mnpm WARN While resolving: inquirer-file-tree-selection-prompt@2.0.5\nnpm WARN Found: inquirer@8.2.5\n\u001b[0m\u001b[91mnpm WARN\u001b[0m\u001b[91m node_modules/@mitre/saf/node_modules/inquirer\nnpm WARN   inquirer@\"^8.0.0\" from @mitre/saf@1.2.1\nnpm WARN\u001b[0m\u001b[91m   node_modules/@mitre/saf\nnpm WARN\u001b[0m\u001b[91m     @mitre/saf@\"file:../../../build/saf.tgz\" from the root project\nnpm \u001b[0m\u001b[91mWARN \nnpm \u001b[0m\u001b[91mWARN Could not resolve dependency:\nnpm\u001b[0m\u001b[91m WARN\u001b[0m\u001b[91m peer inquirer@\"^9.0.0\" from inquirer-file-tree-selection-prompt@2.0.5\n\u001b[0m\u001b[91mnpm\u001b[0m\u001b[91m WARN node_modules/@mitre/saf/node_modules/inquirer-file-tree-selection-prompt\nnpm \u001b[0m\u001b[91mWARN   inquirer-file-tree-selection-prompt@\"^2.0.2\" from @mitre/saf@1.2.1\nnpm WARN\u001b[0m\u001b[91m   node_modules/@mitre/saf\n\u001b[0m\u001b[91mnpm \u001b[0m\u001b[91mWARN \n\u001b[0m\u001b[91mnpm WARN\u001b[0m\u001b[91m Conflicting peer dependency: inquirer@9.1.4\nnpm WARN\u001b[0m\u001b[91m node_modules/inquirer\n\u001b[0m\u001b[91mnpm\u001b[0m\u001b[91m WARN\u001b[0m\u001b[91m   peer inquirer@\"^9.0.0\" from inquirer-file-tree-selection-prompt@2.0.5\nnpm WARN\u001b[0m\u001b[91m   node_modules/@mitre/saf/node_modules/inquirer-file-tree-selection-prompt\nnpm \u001b[0m\u001b[91mWARN     inquirer-file-tree-selection-prompt@\"^2.0.2\" from @mitre/saf@1.2.1\nnpm\u001b[0m\u001b[91m WARN\u001b[0m\u001b[91m     node_modules/@mitre/saf\n\u001b[0m\u001b[91mnpm WARN EBADENGINE Unsupported engine {\nnpm WARN EBADENGINE   package: '@mitre/heimdall-lite@2.6.34',\nnpm WARN EBADENGINE   required: { node: '<17.0.0' },\nnpm WARN EBADENGINE   current: { node: 'v18.12.1', npm: '8.19.2' }\nnpm WARN EBADENGINE }\n\u001b[0m\u001b[91mnpm WARN deprecated querystring@0.2.0: The querystring API is considered Legacy. new code should use the URLSearchParams API instead.\n\u001b[0m\nadded 822 packages, and audited 823 packages in 39s\n\n87 packages are looking for funding\n  run `npm fund` for details\n\nfound 0 vulnerabilities\n\u001b[91mnpm notice \nnpm notice New major version of npm available! 8.19.2 -> 9.2.0\nnpm notice Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm notice Run `npm install -g npm@9.2.0` to update!\n\u001b[0m\u001b[91mnpm notice \n\u001b[0m\u001b[91mnpm\u001b[0m\u001b[91m WARN using --force Recommended protections disabled.\n\u001b[0mRemoving intermediate container 119e2004a59e\n ---> f6dd9ff36229\nStep 12/15 : RUN apk add --no-cache bash jq curl ca-certificates\n ---> Running in 05e0985a4ade\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/11) Installing ncurses-terminfo-base (6.3_p20221119-r0)\n(2/11) Installing ncurses-libs (6.3_p20221119-r0)\n(3/11) Installing readline (8.2.0-r0)\n(4/11) Installing bash (5.2.15-r0)\nExecuting bash-5.2.15-r0.post-install\n(5/11) Installing ca-certificates (20220614-r3)\n(6/11) Installing brotli-libs (1.0.9-r9)\n(7/11) Installing nghttp2-libs (1.51.0-r0)\n(8/11) Installing libcurl (7.87.0-r0)\n(9/11) Installing curl (7.87.0-r0)\n(10/11) Installing oniguruma (6.9.8-r0)\n(11/11) Installing jq (1.6-r2)\nExecuting busybox-1.35.0-r29.trigger\nExecuting ca-certificates-20220614-r3.trigger\nOK: 15 MiB in 28 packages\nRemoving intermediate container 05e0985a4ade\n ---> 92e0f14ec8a4\nStep 13/15 : ENTRYPOINT [\"saf\"]\n ---> Running in 77adce7bbdc8\nRemoving intermediate container 77adce7bbdc8\n ---> 75eef8a509c6\nStep 14/15 : VOLUME [\"/share\"]\n ---> Running in 3727ec92ea09\nRemoving intermediate container 3727ec92ea09\n ---> af1faf86ff1d\nStep 15/15 : WORKDIR /share\n ---> Running in 1353393370c8\nRemoving intermediate container 1353393370c8\n ---> 26023d325616\nSuccessfully built 26023d325616\nSuccessfully tagged saf:latest\n","stderr":"","imageSize":503232763}}