{
  "user": "mingalevme",
  "name": "screenshoter",
  "namespace": "mingalevme",
  "repository_type": "image",
  "status": 1,
  "status_description": "active",
  "description": "Google Puppeteer (screenshot) as a Dockerized HTTP-service",
  "is_private": false,
  "is_automated": true,
  "can_edit": false,
  "star_count": 2,
  "pull_count": 638,
  "last_updated": "2022-12-20T16:38:13.961135Z",
  "date_registered": "2018-05-23T13:21:26.93567Z",
  "collaborator_count": 0,
  "affiliation": null,
  "hub_user": "mingalevme",
  "has_starred": false,
  "full_description": "# screenshoter\n\n[Google Puppeteer](https://github.com/GoogleChrome/puppeteer) as a Dockerized HTTP-service for making screenshots.\n\n[![nodesource/node](http://dockeri.co/image/mingalevme/screenshoter)](https://hub.docker.com/r/mingalevme/screenshoter/)\n\n## installation\n\n```\ndocker pull mingalevme/screenshoter\n```\n\n# Usage\n\n### Basic usage\n```bash\ndocker run -d --restart always -p 8080:8080 --name screenshoter mingalevme/screenshoter\n```\n... or for development purposes:\n```bash\ndocker build --rm -t local/screenshoter .\ndocker run --rm -p 8082:8080 --name screenshoter-local local/screenshoter\n```\n\n```bash\ncurl \"http://localhost:8080/screenshot?url=https%3A%2F%2Fhub.docker.com%2Fr%2Fmingalevme%2Fscreenshoter%2F\" > /tmp/screenshot.png\n```\n\n### Specifying the cache dir\n```bash\ndocker run -p 8080:8080 -v <cache_dir>:/var/cache/screenshoter mingalevme/screenshoter\n```\nFirst request:\n```bash\ntime curl \"http://localhost:8080/screenshot?url=https%3A%2F%2Fhub.docker.com%2Fr%2Fmingalevme%2Fscreenshoter%2F&ttl=3600\" > /tmp/screenshot.png\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n100 43589    0 43589    0     0   4119      0 --:--:--  0:00:10 --:--:-- 10020\n\nreal\t0m10.597s\nuser\t0m0.007s\nsys\t0m0.005s\n```\nSecond request:\n```bash\ntime curl \"http://localhost:8080/screenshot?url=https%3A%2F%2Fhub.docker.com%2Fr%2Fmingalevme%2Fscreenshoter%2F&ttl=3600\" > /tmp/screenshot.png\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n100 43589    0 43589    0     0  5545k      0 --:--:-- --:--:-- --:--:-- 6081k\n\nreal\t0m0.022s\nuser\t0m0.006s\nsys\t0m0.004s\n```\n# API Reference\n```\nGET /screenshot\n```\n### Arguments\n| Arg                 | Type       | Required | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |\n|---------------------|------------|----------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n| url                 | string     | true     | Absolute URL of the page to screenshot. Example: 'https://www.google.com'                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |\n| format              | string     | false    | Image file format. Supported types are png or jpeg. Defaults to png.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |\n| quality             | int        | false    | The quality of the image, between 1-100. Not applicable to png images.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |\n| full                | int        | false    | When true, takes a screenshot of the full scrollable page. Defaults to false.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |\n| device              | string     | false    | One of supported device, e.g. iPhone X, see https://github.com/GoogleChrome/puppeteer/blob/master/DeviceDescriptors.js for a full list of devices                                                                                                                                                                                                                                                                                                                                                                                                                           |\n| viewport-width      | int        | false    | Width in pixels of the viewport when taking the screenshot. Using lower values like 460 can help emulate what the page looks like on mobile devices. Defaults to 800.                                                                                                                                                                                                                                                                                                                                                                                                       |\n| viewport-height     | int        | false    | Height in pixels of the viewport when taking the screenshot. Defaults to 600.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |\n| is-mobile           | bool (int) | false    | Whether the meta viewport tag is taken into account. Defaults to false.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |\n| has-touch           | bool (int) | false    | Specifies if viewport supports touch events. Defaults to false.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |\n| is-landscape        | bool (int) | false    | Specifies if viewport is in landscape mode. Defaults to false.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |\n| device-scale-factor | int        | false    | Sets device scale factor (basically dpr) to emulate high-res/retina displays. Number from 1 to 4. Defaults to 1.                                                                                                                                                                                                                                                                                                                                                                                                                                                            |\n| user-agent          | string     | false    | Sets user agent                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |\n| cookies             | json       | false    | List with cookies objects (https://github.com/GoogleChrome/puppeteer/blob/master/docs/api.md#pagesetcookiecookies), e.g. [{\"name\":\"foo\",\"value\":\"bar\",\"domain\":\".example.com\"}]                                                                                                                                                                                                                                                                                                                                                                                             |\n| timeout             | int        | false    | Maximum navigation time in milliseconds, defaults to 30 seconds, pass 0 to disable timeout.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |\n| fail-on-timeout     | bool (int) | false    | If set to false, we will take a screenshot when timeout is reached instead of failing the request. Defaults to false.                                                                                                                                                                                                                                                                                                                                                                                                                                                       |\n| delay               | int        | false    | If set, we'll wait for the specified number of seconds after the page load event before taking a screenshot.                                                                                                                                                                                                                                                                                                                                                                                                                                                                |\n| wait-until-event    | string     | false    | Controls when the screenshot is taken as the page loads. Supported events include: load - window load event fired (default); domcontentloaded - DOMContentLoaded event fired; networkidle0 - wait until there are zero network connections for at least 500ms; networkidle2 - wait until there are no more than 2 network connections for at least 500ms. domcontentloaded is the fastest but riskiest optionâ€“many images and other asynchronous resources may not have loaded yet. networkidle0 is the safest but slowest option. load is a nice middle ground.Defaults to load. |\n| element             | string     | false    | Query selector of element to screenshot.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |\n| transparency        | bool (int) | false    | Hides default white webpage background for capturing screenshots with transparency, only works when `format` is `png`. Defaults to 0.                                                                                                                                                                                                                                                                                                                                                                                                                                       |\n| width               | int        | false    | If resulted image's width is greater than provided value then image will be proportionally resized to provided width. This action runs before max-height checking. Defaults to 0 (do not resize).                                                                                                                                                                                                                                                                                                                                                                           |\n| max-height          | int        | false    | If resulted image's height is greater than provided value then image's height will be cropped to provided value. Defaults to 0 (do not crop).                                                                                                                                                                                                                                                                                                                                                                                                                               |\n| ttl                 | int        | false    | If last cached screenshot was made less than provided seconds then the cached image will be returned otherwise image will be cached for future use.                                                                                                                                                                                                                                                                                                                                                                                                                         |\n\n# Troubleshooting\n\n### BUS_ADRERR\nIf you got page crash with `BUS_ADRERR` ([chromium issue](https://bugs.chromium.org/p/chromium/issues/detail?id=571394)), increase shm-size on docker run with `--shm-size` argument\n\n```bash\ndocker run --shm-size 1G mingalevme/screenshoter\n```\n\n### Navigation errors (unreachable url, ERR\\_NETWORK_CHANGED)\nIf you're seeing random navigation errors (unreachable url) it's likely due to ipv6 being enabled in docker. Navigation errors are caused by ERR_NETWORK_CHANGED (-21) in chromium. Disable ipv6 in your container using `--sysctl net.ipv6.conf.all.disable_ipv6=1` to fix:\n```bash\ndocker run --shm-size 1G --sysctl net.ipv6.conf.all.disable_ipv6=1 -v <cache_dir>:/var/cache/screenshoter mingalevme/screenshoter\n```\n",
  "permissions": {
    "read": true,
    "write": false,
    "admin": false
  },
  "media_types": [
    "application/vnd.docker.container.image.v1+json"
  ],
  "content_types": [
    "image"
  ]
}