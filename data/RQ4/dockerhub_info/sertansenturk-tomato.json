{
  "user": "sertansenturk",
  "name": "tomato",
  "namespace": "sertansenturk",
  "repository_type": "image",
  "status": 1,
  "status_description": "active",
  "description": "Docker for the tomato repository (https://github.com/sertansenturk/tomato)",
  "is_private": false,
  "is_automated": false,
  "can_edit": false,
  "star_count": 0,
  "pull_count": 50,
  "last_updated": "2021-04-02T15:22:43.68727Z",
  "date_registered": "2016-05-08T01:53:44.436188Z",
  "collaborator_count": 0,
  "affiliation": null,
  "hub_user": "sertansenturk",
  "has_starred": false,
  "full_description": "# tomato\n\n**T**urkish-**O**ttoman **M**akam (M)usic **A**nalysis **TO**olbox\n\n[![Build Status](https://travis-ci.com/sertansenturk/tomato.svg?branch=master)](https://travis-ci.com/sertansenturk/tomato) [![GitHub version](https://badge.fury.io/gh/sertansenturk%2Ftomato.svg)](https://badge.fury.io/gh/sertansenturk%2Ftomato) [![Code Climate](https://codeclimate.com/github/sertansenturk/tomato/badges/gpa.svg)](https://codeclimate.com/github/sertansenturk/tomato) [![DOI](https://zenodo.org/badge/21104/sertansenturk/tomato.svg)](https://zenodo.org/badge/latestdoi/21104/sertansenturk/tomato) [![License: AGPL v3](https://img.shields.io/badge/License-AGPL%20v3-ff69b4.svg)](http://www.gnu.org/licenses/agpl-3.0) [![License: CC BY-NC-SA 4.0](https://img.shields.io/badge/License-CC%20BY--NC--SA%204.0-ff69b4.svg)](http://creativecommons.org/licenses/by-nc-sa/4.0/)\n\n## Table of contents\n\n1. [Introduction](#1-introduction)\n2. [tomato in a nutshell](#2-tomato-in-a-nutshell)\n3. [Installation](#3-installation)\n   1. [Prequisites](#31-prequisites)\n   2. [Install tomato using GNU make](#32-install-tomato-using-gnu-make)\n   3. [Running tomato using docker](#33-running-tomato-using-docker)\n   4. [Step-by-step installation](#34-step-by-step-installation)\n4. [Documentation](#4-documentation)\n5. [License](#5-license)\n6. [FAQ](#6-faq)\n7. [Authors](7-authors)\n8. [Acknowledgments](#8-acknowledgments)\n9. [References](#9-references)\n\n## 1. Introduction\n\n`tomato` is a comprehensive and easy-to-use toolbox in Python for the analysis of audio recordings and music scores of Turkish-Ottoman makam music. The toolbox includes the state of art methodologies applied to this music tradition. The analysis tasks include:\n\n- **Symbolic Analysis:** score metadata extraction, score section extraction, score phrase segmentation, semiotic section, and phrase analysis\n- **Audio Analysis:** audio metadata crawling, predominant melody extraction, tonic and transposition identification, makam recognition, pitch distribution computation, tuning analysis, melodic progression analysis\n- **Joint Analysis:** score-informed tonic identification and tempo estimation, section linking, note-level audio-score alignment, predominant melody octave correction, note modeling\n\nThe toolbox aims to facilitate the analysis of large-scale audio recording and music score collections of Turkish-Ottoman makam music, using the state of the art methodologies designed for the culture-specific characteristics of this tradition. The analysis results can then be further used for several tasks such as automatic content description, music discovery/recommendation, and musicological analysis.\n\nIf you are using `tomato` in your work, please cite the dissertation:\n\n> Şentürk, S. (2016). [Computational Analysis of Audio Recordings and Music Scores for the Description and Discovery of Ottoman-Turkish Makam Music](http://sertansenturk.com/research/works/phd-thesis/). Ph.D. thesis, Universitat Pompeu Fabra, Barcelona, Spain.\n\nFor the sake of __reproducibility__, please also state the version you used as indexed at [Zenodo](https://zenodo.org/search?page=1&size=20&q=conceptrecid:%22597862%22&sort=-version&all_versions=True).\n\nFor the descriptions of the methodologies in the toolbox, please refer to the papers listed in the [References](#references).\n\n## 2. tomato in a nutshell\n\n```python\n# import ...\nfrom tomato.joint.completeanalyzer import CompleteAnalyzer\nfrom matplotlib import pyplot as plt\n\n# score input\nsymbtr_name = 'makam--form--usul--name--composer'\ntxt_score_filename = 'path/to/txt_score'\nmu2_score_filename = 'path/to/mu2_score'\n\n# audio input\naudio_filename = 'path/to/audio'\naudio_mbid = '11111111-1111-1111-1111-11111111111'  # MusicBrainz Recording Identifier\n\n# instantiate analyzer object\ncompleteAnalyzer = CompleteAnalyzer()\n\n# Apply the complete analysis. The resulting tuple will have\n# (summarized_features, score_features, audio_features,\n# score_informed_audio_features, joint_features) in order\nresults = completeAnalyzer.analyze(\n    symbtr_name=symbtr_name, symbtr_txt_filename=txt_score_filepath,\n    symbtr_mu2_filename=mu2_score_filepath, audio_filename=audio_filepath,\n    audio_metadata=audio_mbid)\n\n# plot the summarized features\nfig, ax = completeAnalyzer.plot(results[0])\nax[0].set_ylim([50, 500])\nplt.show()\n```\n\nYou can refer to the Jupyter notebooks in [demos](https://github.com/sertansenturk/tomato/blob/master/demos) folder for detailed, interactive examples.\n\n## 3. Installation\n\n### 3.1. Prequisites\n\n`tomato` may require several packages before installation, depending on your operating system. For example, in *Ubuntu 16.04* using *Python 3.5*, you have to install the _python 3_, _libxml2, libxslt1, freetype_, and _png_ development packages. You can install them by:\n\n```bash\nsudo apt-get install python3 python3.5-dev python3-pip libxml2-dev libxslt1-dev libfreetype6-dev libpng12-dev\n```\n\n### 3.2. Install tomato using GNU make\n\nYou can install `tomato` and all its dependencies by running in the terminal:\n\n```bash\ncd path/to/tomato\nmake\n```\n\nThe above command installs `tomato` to a virtual environment called `./venv`, as well as *LilyPond* and *MATLAB Compiler Runtime*.\n\nIf you want to install `tomato` in editable mode with the extra Python requirements (i.e., `demo` and `development`), you can run:\n\n```bash\nmake all-editable\n```\n\nFor more options, please refer to the help by running:\n\n```bash\nmake help\n```\n\n### 3.3. Running tomato using docker\n\nFor the reproducibility and maintability's sake, `tomato` comes with `docker` support.\n\nTo build the docker image simply go to the base folder of the repository and run:\n\n```bash\ndocker build . -t sertansenturk/tomato:latest\n```\n\nYou may interact with the docker image in many different ways. Below, we run a container by mounting the `demos` folder in tomato and start an interactive `bash` session:\n\n```bash\ndocker run -v \"$PWD/demos/\":/home/tomato_user/demos/ -it sertansenturk/tomato bash\n```\n\nThen, you can work on the command line, like you are on your local machine. Any changes you make to the `demos` folder will be reflected back to your local folder.\n\nFor more information on working with `docker`, please refer to the [official documentation](https://docs.docker.com/get-started/).\n\n### 3.4. Step-by-step installation\n\nIf the above options do not work for you, you need to complete the steps below:\n\n#### 3.4.1. Installing tomato\n\nIt is recommended to install `tomato` and its dependencies into a virtualenv. In the terminal, do the following:\n\n```bash\nvirtualenv -p python3 venv\n```\n\nActivate the virtual environment:\n\n```bash\nsource venv/bin/activate\n```\n\nThen, change the current directory to the repository folder and install by:\n\n```bash\ncd path/to/tomato\npython -m pip install .\n```\n\nIf you want to edit files in the package and have the changes reflected, instead, you can call:\n\n```bash\npython -m pip install -e .\n```\n\nIf you want to run the demo Jupyter notebooks and/or make development, you may include the extras to the installation by:\n\n```bash\npython -m pip install -e .[demo,development]\n```\n\nThe requirements are installed during the setup. If that step does not work for some reason, you can install the requirements by calling:\n\n```bash\npip install -r requirements.txt\n```\n\n#### 3.4.2. Installing MATLAB runtime\n\nThe score phrase segmentation, score-informed joint tonic identification and tempo estimation, section linking, and note-level audio-score alignment algorithms are implemented in MATLAB and compiled as binaries. They need **MATLAB Runtime for R2015a (8.5)** to run. You must download and install this specific version ([Linux installer](http://www.mathworks.com/supportfiles/downloads/R2015a/deployment_files/R2015a/installers/glnxa64/MCR_R2015a_glnxa64_installer.zip)).\n\nWe recommend you to install MATLAB Runtime in the default installation path, as `tomato` searches them automatically. Otherwise, you have to specify your own path in the MATLAB Runtime configuration file, [tomato/config/mcr_path.cfg](https://github.com/sertansenturk/tomato/blob/master/tomato/config/mcr_path.cfg).\n\n#### 3.4.3. Installing LilyPond\n\n`tomato` uses LilyPond under the hood to convert the music scores to SVG format.\n\nIn most Linux distributions, you can install LilyPond from the software repository of your distribution (e.g., `sudo apt install lilypond` in Debian-based distributions).\n\n`tomato` requires *LilyPond* version 2.18.2 or above. If your distribution comes with an older version, we recommend you to download the latest stable version from the [LilyPond website](http://lilypond.org/download.html). If you had to install LilyPond this way, you might need to enter the LilyPond binary path to the \"custom\" field in [tomato/config/lilypond.cfg](https://github.com/sertansenturk/tomato/tree/master/tomato/config) (the default location is ```$HOME/bin/lilypond```).\n\n## 4. Documentation\n\nComing soon...\n\n## 5. License\n\nThe source code hosted in this repository is licensed under [Affero GPL version 3](https://www.gnu.org/licenses/agpl-3.0.en.html).\n\nAny data (the music scores, extracted features, training models, figures, outputs, etc.) are licensed under [Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License](http://creativecommons.org/licenses/by-nc-sa/4.0/).\n\n## 6. FAQ\n\n1. **The notes aligned by `JointAnalyzer.align_audio_score(...)` seems shifted. What is the problem?**\n\n    Your audio input is probably a compressed format, such as *mp3*. There are typically shifts between different decoders (and even different versions of the same decoder) when they decode the same compressed audio file. In the predominant melody extraction step (`AudioAnalyzer.extract_pitch(...)`), Essentia has to decode the recording for processing. You observe a shift when the application you use another decoder.\n\n    These shifts are typically small (e.g., 50 samples ~1ms), so they are not very problematic. Nevertheless, there is no guarantee that the shift will be prominent. If you need \"perfect\" synchronization, you should use an uncompressed format such as *wav* as the audio input.\n\n    **Note:** In demos, we use *mp3*, because it would be too bulky to host a *wav* file.\n\n2. **Which operating systems are supported?**\n\n    - `tomato` is fully supported **only in Linux**. It is tested against *Ubuntu 16.04* and *18.04*.\n    - We suggest people use the [tomato docker image](#running-tomato-using-docker) for other operating systems.\n    - `tomato` was tested on *Mac OSX Sierra* until version [v0.10.1](https://github.com/sertansenturk/tomato/releases/tag/v0.10.1). You can still install `tomato` on *Mac OSX* by referring to the [Linux installation instructions](#installation), but you need to install and configure [Essentia](https://essentia.upf.edu/installing.html#mac-osx) & [MATLAB Compiler Runtime](https://ssd.mathworks.com/supportfiles/downloads/R2015a/deployment_files/R2015a/installers/maci64/MCR_R2015a_maci64_installer.zip) by yourself.\n\n3. **What are the supported Python versions?**\n\n    `tomato` supports Python versions 3.5, 3.6, and 3.7. If you want to run `tomato` on Python 2.7, please install [v0.13.0](https://github.com/sertansenturk/tomato/releases/tag/v0.13.0) or below.\n\n4. **Where are the MATLAB binaries?**\n\n    The binaries are not stored in `tomato` because it would take too much space to store these large files and their old versions here. Instead, the binaries are provided within the releases of the relevant packages. The binaries are downloaded to [tomato/bin](https://github.com/sertansenturk/tomato/blob/master/tomato/bin) during the installation.\n\n    Please refer to [tomato/config/bin.cfg](https://github.com/sertansenturk/tomato/blob/master/tomato/config/bin.cfg) for the relevant releases.\n\n5. **`ScoreConverter` fails to convert music scores with an error saying \"The LilyPond path is not found.\" How can I fix this problem?**\n\n    There can be several reasons regarding this problem:\n\n    - The user-provided file path (the music score input) does not exist.\n\n        Check your input MusicXML-score path.\n\n    - LilyPond is not installed.\n\n        Install the appropriate version of LilyPondby following [the instructions](#installing-lilypond).\n\n    - The binary path exists, but it is not used.\n\n        Add the path of the LilyPond binary to the \"custom\" section in the configuration file: `./tomato/config/lilypond.cfg`.\n\n6. Is `tomato` a fruit or a vegetable?\n\n    It has a culture-specific answer.\n\n## 7. Authors\n\nSertan Şentürk\ncontact@sertansenturk.com\n\n## 8. Acknowledgments\n\nWe would like to thank [Harold Hagopian](https://en.wikipedia.org/wiki/Harold_Hagopian), the founder of [Traditional Crossroads](http://traditionalcrossroads.com/About-Us), for allowing us to use Tanburi Cemil Bey's performance of [Uşşak Sazsemaisi](http://musicbrainz.org/recording/f970f1e0-0be9-4914-8302-709a0eac088e) in our demos.\n\n## 9. References\n\n_The toolbox has been realized as part of the thesis:_\n\n**[1]** Şentürk, S. (2016). *Computational analysis of audio recordings and music scores for the description and discovery of Ottoman-Turkish makam music.* Ph.D. thesis, Universitat Pompeu Fabra, Barcelona, Spain.  \n\n_The methods used in the toolbox are described in the papers:_\n\n__Score Phrase Segmentation__  \n**[2]** Bozkurt, B., Karaosmanoğlu, M. K., Karaçalı, B., and Ünal, E. (2014). *Usul and makam driven automatic melodic segmentation for Turkish music.* Journal of New Music Research. 43(4):375–389.\n\n__Score Section Extraction; Semiotic Section and Phrase Analysis__  \n**[3]** Şentürk S., and Serra X. (2016). *A method for structural analysis of Ottoman-Turkish makam music scores.* In Proceedings of 6th International Workshop on Folk Music Analysis (FMA 2016), pages 39–46, Dublin, Ireland.\n\n__Audio Predominant Melody Extraction__  \n**[4]** Atlı, H. S., Uyar, B., Şentürk, S., Bozkurt, B., and Serra, X. (2014). *Audio feature extraction for exploring Turkish makam music.* In Proceedings of 3rd International Conference on Audio Technologies for Music and Media (ATMM 2014), pages 142–153, Ankara, Turkey.\n\n__Audio Pitch Filter__  \n**[5]** Bozkurt, B. (2008). *An automatic pitch analysis method for Turkish maqam music.* Journal of New Music Research. 37(1):1–13.\n\n__Audio Tonic and Transposition Identification, Makam Recognition, Pitch Distribution Computation, Tuning Analysis__  \n**[6]** Bozkurt, B. (2008). *An automatic pitch analysis method for Turkish maqam music.* Journal of New Music Research. 37(1):1–13.  \n**[7]** Gedik, A. C., and Bozkurt, B. (2010). *Pitch-frequency histogram-based music information retrieval for Turkish music.* Signal Processing. 90(4):1049–1063.  \n**[8]** Chordia, P., and Şentürk, S. (2013). *Joint recognition of raag and tonic in North Indian music.* Computer Music Journal. 37(3):82–98.  \n\n__Audio Tonic Identification from the Last Note__  \n**[9]** Atlı, H. S., Bozkurt, B., and Şentürk, S. (2015). *A method for tonic frequency identification of Turkish makam music recordings.* In Proceedings of 5th International Workshop on Folk Music Analysis (FMA 2015), pages 119–122, Paris, France.\n\n__Audio Melodic Progression (Seyir) Analysis__  \n**[10]** Bozkurt B. (2015). *Computational analysis of overall melodic progression for Turkish Makam Music.* In Penser l’improvisation, pages 289–298, Delatour France, Sampzon.\n\n__Score-Informed Audio Tonic Identification__  \n**[11]** Şentürk, S., Gulati, S., and Serra, X. (2013). *Score informed tonic identification for makam music of Turkey.* In Proceedings of 14th International Society for Music Information Retrieval Conference (ISMIR 2013), pages 175–180, Curitiba, Brazil.\n\n__Score-Informed Audio Tempo Estimation__  \n**[12]** Holzapfel, A., Şimşekli U., Şentürk S., and Cemgil A. T. (2015). *Section-level modeling of musical audio for linking performances to scores in Turkish makam music.* In Proceedings of 40th IEEE International Conference on Acoustics, Speech and Signal Processing (ICASSP 2015), pages 141–145, Brisbane, Australia.\n\n__Audio-Score Section Linking__  \n**[13]** Şentürk, S., Holzapfel, A., and Serra, X. (2014). *Linking scores and audio recordings in makam music of Turkey.* Journal of New Music Research, 43(1):34–52.\n\n__Note-Level Audio-Score Aligment__  \n**[14]** Şentürk, S., Gulati, S., and Serra, X. (2014). *Towards alignment of score and audio recordings of Ottoman-Turkish makam music.* In Proceedings of 4th International Workshop on Folk Music Analysis (FMA 2014), pages 57–60, Istanbul, Turkey.\n\n__Score-Informed Audio Predominant Melody Correction; Note Modeling__  \n**[15]** Şentürk, S., Koduri G. K., and Serra X. (2016). *A score-informed computational description of svaras using a statistical model.* In Proceedings of 13th Sound and Music Computing Conference (SMC 2016), pages 427–433, Hamburg, Germany.\n",
  "permissions": {
    "read": true,
    "write": false,
    "admin": false
  },
  "media_types": [
    "application/vnd.docker.container.image.v1+json"
  ],
  "content_types": [
    "image"
  ]
}