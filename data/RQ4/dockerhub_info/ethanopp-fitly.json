{
  "user": "ethanopp",
  "name": "fitly",
  "namespace": "ethanopp",
  "repository_type": "image",
  "status": 1,
  "status_description": "active",
  "description": "Web analytics for endurance athletes",
  "is_private": false,
  "is_automated": false,
  "can_edit": false,
  "star_count": 0,
  "pull_count": 26855,
  "last_updated": "2022-03-18T02:36:13.966072Z",
  "date_registered": "2020-09-12T14:19:10.554156Z",
  "collaborator_count": 0,
  "affiliation": null,
  "hub_user": "ethanopp",
  "has_starred": false,
  "full_description": "# Fit.ly\nWeb analytics for endurance athletes\n![Image description](https://i.imgur.com/Z3mfOMR.jpeg)\n![Image description](https://i.imgur.com/A5rJNff.png)\n![Image description](https://i.imgur.com/PewZiKt.png)\n![Image description](https://i.imgur.com/hsSPvyn.png)\n![Image description](https://i.imgur.com/26Bglbc.jpg)\n![Image description](https://i.imgur.com/tbx5YmT.png)\n![Image description](https://i.imgur.com/zeNnCvn.jpg)\n![Image description](https://i.imgur.com/7j6Ez9K.jpg)\n![Image description](https://i.imgur.com/uafoBFI.jpg)\n\nSpecial thanks to Slapdash for helping organize!\nhttps://github.com/ned2/slapdash\n# Installation Methods\n##  Docker (Recommended) \n    docker create --name=fitly \\\n        --restart unless-stopped \\\n        -e MODULE_NAME=src.fitly.app \\\n        -e VARIABLE_NAME=server \\\n        -e TZ=America/New_York \\\n        -e TIMEOUT=1200 \\\n        -e DASH_DEBUG=true \\\n        -p 8050:80 \\\n        -v <local mount path>:/app/config \\\n        ethanopp/fitly:latest\n   \n## Python IDE\nAfter cloning/downloading the repository, install Fit.ly into your environment:\n\n    $ pip install -e PATH_TO_fitly\n    \n# Configuring Your App\nEdit the `config.ini.example` file on your local mount path with your settings (more information below) and change the name of the file to `config.ini`.\n\n## Required Data Sources\n\n### Strava\nCopy your client key and secret into your config.ini file.\n\nIn your strava settings (https://www.strava.com/settings/api) set the autorization callback to **127.0.0.1:8050?strava**. All other fields you can update as you'd like.\n\n## Optional data sources\nSome charts will not work unless these data sources are provided, or until new data sources are added that can pull similar data\n\n### Oura\nThe oura connections is currently required to generate the home page.\n\nIn addition to the home page, data points from oura will be use to make performance analytics more accurate. If oura data is not provided, performance analytics will rely on statically defined metrics in the athlete table (i.e. resting heartrate)\n\nCreate a developer account at https://cloud.ouraring.com/oauth/applications\n\nCopy your client key and secret into your config.ini file.\n\nSet the redirect URI to: http://127.0.0.1:8050/settings?oura\n\n### Withings\nSign up for a withings developer account here: https://account.withings.com/partner/dashboard_oauth2\n\nIn addition to the home page, data points from withings will be use to make performance analytics more accurate. If withings data is not provided, performance analytics will rely on statically defined metrics in the athlete table (i.e. weight)\n\nSet the redirect URI to: http://127.0.0.1:8050/settings?withings\n\nCopy your client key and secret into your config.ini file.\n\n### Stryd\nPull critical power (ftp) from Stryd. Since Stryd does not share their proprietary formula for calculating CP, we just pull the number rather than trying to recalculate it ourselves.\n\nEnter username and password into config.ini file.\n\n### Peloton\nFitly does not pull workout data directly from peloton, strava is the main hub for our workout data (so sync peloton directly to strava).\n\nFor those working out to peloton classes, but not necessarily recording their data via the peloton device (using stryd pod on tread, using wahoo fitness trainer with peloton digital app, etc.), fitly will match workouts started around the same time to workouts published to strava, and update the titles of the strava workout with the peloton class name.\n\nIf using Oura, HRV recommendations can be used to auto-bookmark new classes on your peloton device daily. Class types to be bookmarked can be configured on the settings page (i.e. on days where HRV recommendation is \"Low\" effort, auto bookmark some new \"Running\" workouts of the class type \"Fun Run\", \"Endurance Run\", \"Outdoor Fun Run\", and \"Outdoor Endurance Run\")\n\n![Image description](https://i.imgur.com/q654WHY.png)\n\nEnter username and password into config.ini file.\n\n### Fitbod & Nextcloud\nFitbod allows exporting your data via the mobile app (Log > Settings icon > Export workout data)\n\nExport your fitbod file to a nextcloud location, and provide that nextcloud location in your config.ini for fit.ly to incorporate into the dashboards.\n\n### Spotify\nThe spotify connections is currently required to generate the music page.\n\nFitly can keep a history of every song you listen to on spotify and analyze your listenind behavior (skipped, fast forwarded, rewound ,etc.) to determine song likeablity. Listening behavior can then be analyzed by activity type and intensity (i.e what music do you listen to during high intensity runs), clustered into music type (K-means cluster on spotify audio features) and playlists can be automatically generated with recommended music for your next recommended workout.\n\nCreate a developer account here: https://developer.spotify.com/dashboard/\n\nSet the redirect URI to: http://127.0.0.1:8050/settings?spotify\n\nCopy your client ID and secret into your config.ini file.\n\n# Dashboard startup\nNavigate to http://127.0.0.1:8050/pages/settings\n\nEnter the password from your `config.ini` [settings] password\n\nConnect account buttons on top left of screen. Each successful authentication should save your tokens to the api_tokens table in your database.\n\nClick the 'Refresh' button to pull data\n\n### Dashboard startup tips for python IDE users\nInstalling this package into your virtualenv will result into the development\nexecutable being installed into your path when the virtualenv is activated. This\ncommand invokes your Dash app's `run_server` method, which in turn uses the\nFlask development server to run your app. The command is invoked as follows:\n\n    $ run-fitly-dev\n\nThe script takes a couple of arguments optional parameters, which you can\ndiscover with the `--help` flag. You may need to set the port using the `--port`\nparameter. If you need to expose your app outside your local machine, you will\nwant to set `--host 0.0.0.0`.\n\n# Hosting your application externally (docker compose with nginx)\n    version: '3'\n    services:\n      letsencrypt:\n        image: linuxserver/letsencrypt\n        container_name: letsencrypt \n        cap_add:\n          - NET_ADMIN\n        restart: always\n        ports:\n          - \"80:80\"\n          - \"443:443\"\n        environment:\n          - TZ=America/New_York\n          - EMAIL=<your email>\n          - URL=<website.com>\n          - SUBDOMAINS=fit # this would give a website like fit.website.com\n        volumes:\n          - <host config dir>:/config\n      fitly:\n        image: ethanopp/fitly:latest\n        container_name: fitly\n        restart: always\n        depends_on:\n          - letsencrypt\n        ports:\n          - \"8050:80\"\n        environment:\n          - MODULE_NAME=src.fitly.app\n          - VARIABLE_NAME=server\n          - TZ=America/New_York\n          - TIMEOUT=1200\n          - DASH_DEBUG=true\n        volumes:\n          - <host config dir>:/app/config\n          - <path to letsencrypt host config dir>/keys:/app/keys\n\n### NGINX (subdomain example)\n    server {\n        listen 443 ssl;\n        listen [::]:443 ssl;\n    \n        server_name fit.*;\n    \n        include /config/nginx/ssl.conf;\n    \n        client_max_body_size 0;\n    \n        # enable for ldap auth, fill in ldap details in ldap.conf\n        #include /config/nginx/ldap.conf;\n    \n        location / {\n            # enable the next two lines for http auth\n            #auth_basic \"Restricted\";\n            #auth_basic_user_file /config/nginx/.htpasswd;\n    \n            # enable the next two lines for ldap auth\n            #auth_request /auth;\n            #error_page 401 =200 /login;\n    \n            include /config/nginx/proxy.conf;\n            resolver 127.0.0.11 valid=30s;\n            set $upstream_fitly fitly;\n            proxy_pass http://$upstream_fitly:80;\n        }\n    }\n",
  "permissions": {
    "read": true,
    "write": false,
    "admin": false
  },
  "media_types": [
    "application/vnd.docker.container.image.v1+json"
  ],
  "content_types": [
    "image"
  ]
}