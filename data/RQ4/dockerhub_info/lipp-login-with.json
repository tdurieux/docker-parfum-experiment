{
  "user": "lipp",
  "name": "login-with",
  "namespace": "lipp",
  "repository_type": "image",
  "status": 1,
  "status_description": "active",
  "description": "Stateless login-with microservice for OAuth",
  "is_private": false,
  "is_automated": false,
  "can_edit": false,
  "star_count": 2,
  "pull_count": 2901,
  "last_updated": "2018-08-08T10:55:57.124848Z",
  "date_registered": "2017-02-07T15:53:59.456533Z",
  "collaborator_count": 0,
  "affiliation": null,
  "hub_user": "lipp",
  "has_starred": false,
  "full_description": "[![Build Status](https://travis-ci.org/lipp/login-with.svg?branch=master)](https://travis-ci.org/lipp/login-with)\n[![Coverage Status](https://coveralls.io/repos/github/lipp/login-with/badge.svg?branch=master)](https://coveralls.io/github/lipp/login-with?branch=master)\n\n# About\n\nStateless authentication microservice for \"login-with\" functionality, supporting:\n\n- Twitter\n- GitHub\n- Reddit\n- Facebook\n- Google\n- LinkedIn\n- Instagram\n- Mixer\n- Strava\n- ... more to come (PRs welcome)\n\nYou can deploy with [`now`](https://zeit.co/now) or [`Docker`](https://www.docker.com/) (for mandatory and optional env variables see below).\n\n```sh\n$ now lipp/login-with\n$ docker run lipp/login-with\n```\n\nThis microservice must run in a subdomain of yours, e.g. `login.yourdomain.com`.\n\n```html\n<a href='https://login.yourdomain.com/twitter?success=ON_SUCCESS_URL&failure=ON_FAILURE_URL'>\n  Login with Twitter\n</a>\n```\n\nOn successful login two cookies will be created:\n\n- `jwt` - A \"JSON Web Token\" (JWT) containing profile information and the respective access tokens (Twitter/etc). http-only!\n- `profile` - A JSON string which containing non-sensitive information (accessible from browser JS):\n  - `username` - string / mandatory, the account specific user alias (e.g. Twitter name)\n  - `photo` - string / optional, the account specific user image link\n  - `name` - string / optional, the \"real\" name\n\nThe cookies will be available for your toplevel domain and all subdomains. In addition, the cookie's `secure` flag is set, which means\nthat your other websites/webservices must run over `https`.\n\n# Supported by\n\nIf you want to easily add token-based authentication to your apps, feel free to check out Auth0's SDKs and free plan at [auth0.com/overview](https://auth0.com/overview?utm_source=GHsponsor&utm_medium=GHsponsor&utm_campaign=login-with&utm_content=auth) <img src=\"https://cdn.auth0.com/styleguide/components/1.0.8/media/logos/img/badge.svg\" alt=\"Auth0 logo\" width=\"20\" />.\n\n# Setup\n\nThe configuration is done by means of environment variables.\n\n## Mandatory environment variables\n\n- `LW_SESSION_SECRET` - The session secret used by the microservice\n- `LW_JWT_SECRET` - The secret to sign the JSON Web Token (JWT)\n- `LW_SUBDOMAIN` - The subdomain this microservice runs, e.g. `login.yourdomain.com`.\n  All other subdomains (e.g. `api.yourdomain.com`) and the top-level (e.g. `yourdomain.com`)\n\n## Optional environment variables\n\n- `LW_COOKIE_MAXAGE` - The max age of the store cookie, defaults to 10 days\n- `LW_PROFILE_COOKIENAME` - The profile's cookie name, defaults to `profile`\n- `LW_JWT_COOKIENAME` - The JSON Web Token's (JWT) cookie name, defaults to `jwt`\n- `LW_DYNAMIC_SCOPE` - When set allows you to customize the scopes used in an authentication request, defaults to off\n- `LW_COOKIE_DOMAIN` - The explicit cookie domain, e.g. `.foo.com`. If not specified this will derive from `LW_SUBDOMAIN`, e.g. if `LW_SUBDOMAIN=login.foo.com` then the cookie domain \"defaults\" to `.foo.com`. This is ok unless you have multi level subdomain for (`LW_SUBDOMAIN=dev.login.foo.com`).\nIn this case you must explicitly set `LW_COOKIE_DOMAIN=.foo.com` as `.login.foo.com` would be the auto guessed value.\n\n## GitHub specific environment variables\n\nYou need to create your own GitHub OAuth application. If `LW_SUBDOMAIN=login.yourdomain.com` your Authorization callback URL\nmust be: `https://login.yourdomain.com/github/callback`\n\n- `LW_GITHUB_CLIENTID` - Your GitHub Client ID\n- `LW_GITHUB_CLIENTSECRET` - Your GitHub Client Secret\n\n## Google specific environment variables\n\nYou need to create your own Google OAuth application. If `LW_SUBDOMAIN=login.yourdomain.com` your Authorization callback URL\nmust be: `https://login.yourdomain.com/google/callback`\n\n- `LW_GOOGLE_CLIENTID` - Your Google Client ID\n- `LW_GOOGLE_CLIENTSECRET` - Your Google Client Secret\n\n## Facebook specific environment variables\n\nYou need to create your own Facebook login application. If `LW_SUBDOMAIN=login.yourdomain.com` your allowed redirects\nmust be: `https://login.yourdomain.com/facebook/callback`\n\n- `LW_FACEBOOK_APPID` - Your Facebook App ID\n- `LW_FACEBOOK_APPSECRET` - Your Facebook App Secret\n\n## LinkedIn specific environment variables\n\nYou need to create your own LinkedIn OAuth2 application. If `LW_SUBDOMAIN=login.yourdomain.com` your Authorization callback URL\nmust be: `https://login.yourdomain.com/linkedin/callback`\n\n- `LW_LINKEDIN_CLIENTID` - Your Google Client ID\n- `LW_LINKEDIN_CLIENTSECRET` - Your Google Client Secret\n\n## Reddit specific environment variables\n\nYou need to create your own GitHub OAuth application. If `LW_SUBDOMAIN=login.yourdomain.com` your Authorization callback URL\nmust be: `https://login.yourdomain.com/reddit/callback`\n\n- `LW_REDDIT_CLIENTID` - Your Reddit Client ID\n- `LW_REDDIT_CLIENTSECRET` - Your Reddit Client Secret\n\n## Twitter specific environment variables\n\nYou need to create your own Twitter OAuth application. If `LW_SUBDOMAIN=login.yourdomain.com` your Authorization callback URL\nmust be: `https://login.yourdomain.com/twitter/callback`\n\n- `LW_TWITTER_CONSUMERKEY` - Your Twitter Consumer Key\n- `LW_TWITTER_CONSUMERSECRET` - Your Twitter Consumer Secret\n\n## Mixer specific environment variables\n\nYou need to create your own Mixer OAuth Client. If `LW_SUBDOMAIN=login.yourdomain.com` your Authorization callback URL\nmust be: `https://login.yourdomain.com/mixer/callback`\n\n- `LW_MIXER_CLIENTID` - Your Mixer Client ID\n- `LW_MIXER_CLIENTSECRET` - Your Mixer Client Secret\n- `LW_MIXER_SCOPE` - Specify which scopes the authorization request with Mixer should have. Check [Mixer's documentation](https://dev.mixer.com/reference/oauth/index.html#oauth_scopes) for scopes.\n\n## Instagram specific environment variables\n\nYou need to create your own Instagram OAuth application. If `LW_SUBDOMAIN=login.yourdomain.com` your Authorization callback URL\nmust be: `https://login.yourdomain.com/instagram/callback`\n\n- `LW_INSTAGRAM_CLIENTID` - Your Instagram Client ID\n- `LW_INSTAGRAM_CLIENTSECRET` - Your Instagram Client Secret\n\n## Strava specific environment variables\n\nYou need to create your own Strava OAuth application. If `LW_SUBDOMAIN=login.yourdomain.com` your Authorization callback URL\nmust be: `https://login.yourdomain.com/strava/callback`\n\n- `LW_STRAVA_CLIENTID` - Your Strava Client ID\n- `LW_STRAVA_CLIENTSECRET` - Your Strava Client Secret\n\n\n# Endpoints\n\n- `/twitter` - login with Twitter account (if configured through env variables)\n- `/facebook` - login with Facebook account (if configured through env variables)\n- `/github` - login with GitHub account (if configured through env variables)\n- `/google` - login with Google account (if configured through env variables)\n- `/reddit` - login with Reddit account (if configured through env variables)\n- `/mixer` - login with Mixer account (if configured through env variables)\n- `/linkedin` - login with LinkedIn account (if configured through env variables)\n- `/instagram` - login with Instagram account (if configured through env variables)\n- `/strava` - login with Strava account (if configured through env variables)\n- `/logout` - logout and clears the respective cookies\n\nAll endpoints expect the query parameters:\n- `success` A url to redirect to in case of successful login (use `encodeURIComponent` for proper escaping)\n- `failure` A url to redirect to in case of failed login (use `encodeURIComponent` for proper escaping)\n\nDon't forget to `encodeURIComponent` on them.\n\n# Testing\n\nSay you deployed your `login-with` container with:\n- correct environment variables\n- properly configured services (e.g. Twitter callback)\n- served via https on `auth.your-domain.com`\n\nThen you can test everything by just \"visiting\" your login strategy with the browser, e.g. `https://auth.your-domain.com/twitter`.\nIn case of success, you will be finally redirected and see the contents of your profile as JSON.\nIn case of error, the error will be shown as JSON.\n\n# Example\n\nVisit [login-with.com](https://login-with.com). The source code is [here](https://github.com/lipp/login-with/tree/master/example/nextjs).\n\n# Deployment with now\n\nNote: **You need a custom domain** to run this microservice with now. Chrome (and maybe other browsers) explicitly prevent\nusage of wildcard cookies on .now.sh, which are required for this microservice to work.\n\n1. Create your secrets for the environment variables\n2. Deploy, e.g. with [now](https://zeit.co/now)\n```sh\nnow lipp/login-with \\\n\t-e NODE_ENV=production \\\n\t-e LW_SUBDOMAIN=login.yourdomain.com \\\n\t-e LW_SESSION_SECRET=@lw-session-secret \\\n\t-e LW_JWT_SECRET=@lw-token-secret \\\n\t-e LW_REDDIT_CLIENTID=@lw-reddit-clientid \\\n\t-e LW_REDDIT_CLIENTSECRET=@lw-reddit-clientsecret \\\n\t-e LW_GITHUB_CLIENTID=@lw-github-clientid \\\n\t-e LW_GITHUB_CLIENTSECRET=@lw-github-clientsecret \\\n\t-e LW_TWITTER_CONSUMERKEY=@lw-twitter-consumerkey \\\n\t-e LW_TWITTER_CONSUMERSECRET=@lw-twitter-consumersecret \\\n\t-e LW_INSTAGRAM_CLIENTID=@lw-instagram-clientid \\\n\t-e LW_INSTAGRAM_CLIENTSECRET=@lw-instagram-clientsecret \\\n\t--alias login.yourdomain.com\n```\n\n# Deployment with Docker\n\n1. Create your secrets for the environment variables\n2. Deploy, e.g. with Docker\n```sh\ndocker run lipp/login-with -p 80:3000 \\\n\t-e NODE_ENV=production \\\n\t-e LW_SUBDOMAIN=login.yourdomain.com \\\n\t-e LW_SESSION_SECRET=@lw-session-secret \\\n\t-e LW_JWT_SECRET=@lw-token-secret \\\n\t-e LW_REDDIT_CLIENTID=@lw-reddit-clientid \\\n\t-e LW_REDDIT_CLIENTSECRET=@lw-reddit-clientsecret \\\n\t-e LW_GITHUB_CLIENTID=@lw-github-clientid \\\n\t-e LW_GITHUB_CLIENTSECRET=@lw-github-clientsecret \\\n\t-e LW_TWITTER_CONSUMERKEY=@lw-twitter-consumerkey \\\n\t-e LW_TWITTER_CONSUMERSECRET=@lw-twitter-consumersecret \\\n\t-e LW_INSTAGRAM_CLIENTID=@lw-instagram-clientid \\\n\t-e LW_INSTAGRAM_CLIENTSECRET=@lw-instagram-clientsecret \\\n```\n",
  "permissions": {
    "read": true,
    "write": false,
    "admin": false
  },
  "media_types": [
    "application/vnd.docker.container.image.v1+json"
  ],
  "content_types": [
    "image"
  ]
}