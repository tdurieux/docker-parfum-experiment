{
  "user": "benbusby",
  "name": "whoogle-search",
  "namespace": "benbusby",
  "repository_type": "image",
  "status": 1,
  "status_description": "active",
  "description": "Self-hosted, ad-free, privacy-respecting metasearch engine",
  "is_private": false,
  "is_automated": false,
  "can_edit": false,
  "star_count": 28,
  "pull_count": 13769563,
  "last_updated": "2023-01-04T18:10:37.011821Z",
  "date_registered": "2020-05-10T19:45:38.072967Z",
  "collaborator_count": 0,
  "affiliation": null,
  "hub_user": "benbusby",
  "has_starred": false,
  "full_description": "![Whoogle Search](https://raw.githubusercontent.com/benbusby/whoogle-search/main/docs/banner.png)\n\n[![Latest Release](https://img.shields.io/github/v/release/benbusby/whoogle-search)](https://github.com/benbusby/shoogle/releases)\n[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)\n[![tests](https://github.com/benbusby/whoogle-search/actions/workflows/tests.yml/badge.svg)](https://github.com/benbusby/whoogle-search/actions/workflows/tests.yml)\n[![buildx](https://github.com/benbusby/whoogle-search/actions/workflows/buildx.yml/badge.svg)](https://github.com/benbusby/whoogle-search/actions/workflows/buildx.yml)\n[![pep8](https://github.com/benbusby/whoogle-search/workflows/pep8/badge.svg)](https://github.com/benbusby/whoogle-search/actions?query=workflow%3Apep8)\n[![codebeat badge](https://codebeat.co/badges/e96cada2-fb6f-4528-8285-7d72abd74e8d)](https://codebeat.co/projects/github-com-benbusby-shoogle-master)\n[![Docker Pulls](https://img.shields.io/docker/pulls/benbusby/whoogle-search)](https://hub.docker.com/r/benbusby/whoogle-search)\n\nGet Google search results, but without any ads, javascript, AMP links, cookies, or IP address tracking. Easily deployable in one click as a Docker app, and customizable with a single config file. Quick and simple to implement as a primary search engine replacement on both desktop and mobile.\n\nContents\n1. [Features](#features)\n2. [Dependencies](#dependencies)\n3. [Install/Deploy](#install)\n    1. [Heroku Quick Deploy](#a-heroku-quick-deploy)\n    2. [Repl.it](#b-replit)\n    3. [Fly.io](#c-flyio)\n    4. [pipx](#d-pipx)\n    5. [pip](#e-pip)\n    6. [Manual](#f-manual)\n    7. [Docker](#g-manual-docker)\n    8. [Arch/AUR](#arch-linux--arch-based-distributions)\n4. [Environment Variables and Configuration](#environment-variables)\n5. [Usage](#usage)\n6. [Extra Steps](#extra-steps)\n    1. [Set Primary Search Engine](#set-whoogle-as-your-primary-search-engine)\n    2. [Prevent Downtime (Heroku Only)](#prevent-downtime-heroku-only)\n    3. [Manual HTTPS Enforcement](#https-enforcement)\n    4. [Using with Firefox Containers](#using-with-firefox-containers)\n7. [Contributing](#contributing)\n8. [FAQ](#faq)\n9. [Public Instances](#public-instances)\n10. [Screenshots](#screenshots)\n11. Mirrors (read-only)\n    1. [GitLab](https://gitlab.com/benbusby/whoogle-search)\n    2. [Gogs](https://gogs.benbusby.com/benbusby/whoogle-search)\n\n## Features\n- No ads or sponsored content\n- No javascript\n- No cookies\n- No tracking/linking of your personal IP address\\*\n- No AMP links\n- No URL tracking tags (i.e. utm=%s)\n- No referrer header\n- Tor and HTTP/SOCKS proxy support\n- Autocomplete/search suggestions\n- POST request search and suggestion queries (when possible)\n- View images at full res without site redirect (currently mobile only)\n- Dark mode\n- Randomly generated User Agent\n- Easy to install/deploy\n- DDG-style bang (i.e. `!<tag> <query>`) searches\n- Optional location-based searching (i.e. results near \\<city\\>)\n- Optional NoJS mode to disable all Javascript in results\n\n<sup>*If deployed to a remote server, or configured to send requests through a VPN, Tor, proxy, etc.</sup>\n\n## Dependencies\nIf using Heroku Quick Deploy, **you can skip this section**.\n\n- Docker ([Windows](https://docs.docker.com/docker-for-windows/install/), [macOS](https://docs.docker.com/docker-for-mac/install/), [Ubuntu](https://docs.docker.com/engine/install/ubuntu/), [other Linux distros](https://docs.docker.com/engine/install/binaries/))\n  - Only needed if you intend on deploying the app as a Docker image\n- [Python3](https://www.python.org/downloads/)\n- `libcurl4-openssl-dev` and `libssl-dev`\n  - macOS: `brew install openssl curl-openssl`\n  - Ubuntu: `sudo apt-get install -y libcurl4-openssl-dev libssl-dev`\n  - Arch: `pacman -S curl openssl`\n\n## Install\nThere are a few different ways to begin using the app, depending on your preferences:\n\n### A) [Heroku Quick Deploy](https://heroku.com/about)\n[![Deploy](https://www.herokucdn.com/deploy/button.svg)](https://heroku.com/deploy?template=https://github.com/benbusby/whoogle-search/tree/heroku-app-beta)\n\n*Note: Requires a (free) Heroku account*\n\nProvides:\n- Free deployment of app\n- Free HTTPS url (https://\\<your app name\\>.herokuapp.com)\n- Downtime after periods of inactivity \\([solution](https://github.com/benbusby/whoogle-search#prevent-downtime-heroku-only)\\)\n\n### B) [Repl.it](https://repl.it)\n[![Run on Repl.it](https://repl.it/badge/github/benbusby/whoogle-search)](https://repl.it/github/benbusby/whoogle-search)\n\n*Note: Requires a (free) Replit account*\n\nProvides:\n- Free deployment of app\n- Free HTTPS url (https://\\<app name\\>.\\<username\\>\\.repl\\.co)\n    - Supports custom domains\n- Downtime after periods of inactivity \\([solution 1](https://repl.it/talk/ask/use-this-pingmat1replco-just-enter/28821/101298), [solution 2](https://repl.it/talk/learn/How-to-use-and-setup-UptimeRobot/9003)\\)\n\n### C) [Fly.io](https://fly.io)\n\nYou will need a [Fly.io](https://fly.io) account to do this. Fly requires a credit card to deploy anything, but you can have up to 3 shared-CPU VMs running full-time each month for free.\n\n#### Install the CLI:\n\n```bash\ncurl -L https://fly.io/install.sh | sh\n```\n\n#### Deploy your app\n\n```bash\nfly apps create --org personal --port 5000\n# Choose a name and the Image builder\n# Enter `benbusby/whoogle-search:latest` as the image name\nfly deploy\n```\n\nYour app is now available at `https://<app-name>.fly.dev`.\n\nYou can customize the `fly.toml`:\n- Remove the non-https service\n- Add environment variables under the `[env]` key\n  - Use `fly secrets set NAME=value` for more sensitive values like `WHOOGLE_PASS` and `WHOOGLE_PROXY_PASS`.\n\n### D) [pipx](https://github.com/pipxproject/pipx#install-pipx)\nPersistent install:\n\n`pipx install git+https://github.com/benbusby/whoogle-search.git`\n\nSandboxed temporary instance:\n\n`pipx run --spec git+https://github.com/benbusby/whoogle-search.git whoogle-search`\n\n### E) pip\n`pip install whoogle-search`\n\n```bash\n$ whoogle-search --help\nusage: whoogle-search [-h] [--port <port number>] [--host <ip address>] [--debug] [--https-only] [--userpass <username:password>]\n                      [--proxyauth <username:password>] [--proxytype <socks4|socks5|http>] [--proxyloc <location:port>]\n\nWhoogle Search console runner\n\noptional arguments:\n  -h, --help            Show this help message and exit\n  --port <port number>  Specifies a port to run on (default 5000)\n  --host <ip address>   Specifies the host address to use (default 127.0.0.1)\n  --debug               Activates debug mode for the server (default False)\n  --https-only          Enforces HTTPS redirects for all requests\n  --userpass <username:password>\n                        Sets a username/password basic auth combo (default None)\n  --proxyauth <username:password>\n                        Sets a username/password for a HTTP/SOCKS proxy (default None)\n  --proxytype <socks4|socks5|http>\n                        Sets a proxy type for all connections (default None)\n  --proxyloc <location:port>\n                        Sets a proxy location for all connections (default None)\n```\nSee the [available environment variables](#environment-variables) for additional configuration.\n\n### F) Manual\n\n*Note: `Content-Security-Policy` headers are already sent by Whoogle -- you don't/shouldn't need to apply a CSP header yourself*\n\nClone the repo and run the following commands to start the app in a local-only environment:\n\n```bash\ngit clone https://github.com/benbusby/whoogle-search.git\ncd whoogle-search\npython3 -m venv venv\nsource venv/bin/activate\npip install -r requirements.txt\n./run\n```\nSee the [available environment variables](#environment-variables) for additional configuration.\n\n#### systemd Configuration\nAfter building the virtual environment, you can add the following to `/lib/systemd/system/whoogle.service` to set up a Whoogle Search systemd service:\n\n```\n[Unit]\nDescription=Whoogle\n\n[Service]\n# Basic auth configuration, uncomment to enable\n#Environment=WHOOGLE_USER=<username>\n#Environment=WHOOGLE_PASS=<password>\n# Proxy configuration, uncomment to enable\n#Environment=WHOOGLE_PROXY_USER=<proxy username>\n#Environment=WHOOGLE_PROXY_PASS=<proxy password>\n#Environment=WHOOGLE_PROXY_TYPE=<proxy type (http|https|proxy4|proxy5)\n#Environment=WHOOGLE_PROXY_LOC=<proxy host/ip>\n# Site alternative configurations, uncomment to enable\n# Note: If not set, the feature will still be available\n# with default values. \n#Environment=WHOOGLE_ALT_TW=nitter.net\n#Environment=WHOOGLE_ALT_YT=invidious.snopyta.org\n#Environment=WHOOGLE_ALT_IG=bibliogram.art/u\n#Environment=WHOOGLE_ALT_RD=libredd.it\n#Environment=WHOOGLE_ALT_TL=lingva.ml\n# Load values from dotenv only\n#Environment=WHOOGLE_DOTENV=1\nType=simple\nUser=root\nWorkingDirectory=<whoogle_directory>\nExecStart=<whoogle_directory>/venv/bin/python3 -um app --host 0.0.0.0 --port 5000\nExecReload=/bin/kill -HUP $MAINPID\nRestart=always\nRestartSec=3\nSyslogIdentifier=whoogle\n\n[Install]\nWantedBy=multi-user.target\n```\nThen,\n```\nsudo systemctl daemon-reload\nsudo systemctl enable whoogle\nsudo systemctl start whoogle\n```\n\n### G) Manual (Docker)\n1. Ensure the Docker daemon is running, and is accessible by your user account\n  - To add user permissions, you can execute `sudo usermod -aG docker yourusername`\n  - Running `docker ps` should return something besides an error. If you encounter an error saying the daemon isn't running, try `sudo systemctl start docker` (Linux) or ensure the docker tool is running (Windows/macOS).\n2. Clone and deploy the docker app using a method below:\n\n#### Docker CLI\n\n***Note:** For ARM machines, use the `buildx-experimental` Docker tag.*\n\nThrough Docker Hub:\n```bash\ndocker pull benbusby/whoogle-search\ndocker run --publish 5000:5000 --detach --name whoogle-search benbusby/whoogle-search:latest\n```\n\nor with docker-compose:\n\n```bash\ngit clone https://github.com/benbusby/whoogle-search.git\ncd whoogle-search\ndocker-compose up\n```\n\nor by building yourself:\n\n```bash\ngit clone https://github.com/benbusby/whoogle-search.git\ncd whoogle-search\ndocker build --tag whoogle-search:1.0 .\ndocker run --publish 5000:5000 --detach --name whoogle-search whoogle-search:1.0\n```\n\nOptionally, you can also enable some of the following environment variables to further customize your instance:\n\n```bash\ndocker run --publish 5000:5000 --detach --name whoogle-search \\\n  -e WHOOGLE_USER=username \\\n  -e WHOOGLE_PASS=password \\\n  -e WHOOGLE_PROXY_USER=username \\\n  -e WHOOGLE_PROXY_PASS=password \\\n  -e WHOOGLE_PROXY_TYPE=socks5 \\\n  -e WHOOGLE_PROXY_LOC=ip \\\n  whoogle-search:1.0\n```\n\nAnd kill with: `docker rm --force whoogle-search`\n\n#### Using [Heroku CLI](https://devcenter.heroku.com/articles/heroku-cli)\n```bash\nheroku login\nheroku container:login\ngit clone https://github.com/benbusby/whoogle-search.git\ncd whoogle-search\nheroku create\nheroku container:push web\nheroku container:release web\nheroku open\n```\n\nThis series of commands can take a while, but once you run it once, you shouldn't have to run it again. The final command, `heroku open` will launch a tab in your web browser, where you can test out Whoogle and even [set it as your primary search engine](https://github.com/benbusby/whoogle#set-whoogle-as-your-primary-search-engine).\nYou may also edit environment variables from your app’s Settings tab in the Heroku Dashboard.\n\n#### Arch Linux & Arch-based Distributions\nThere is an [AUR package available](https://aur.archlinux.org/packages/whoogle-git/), as well as a pre-built and daily updated package available at [Chaotic-AUR](https://chaotic.cx).\n\n#### Using your own server, or alternative container deployment\nThere are other methods for deploying docker containers that are well outlined in [this article](https://rollout.io/blog/the-shortlist-of-docker-hosting/), but there are too many to describe set up for each here. Generally it should be about the same amount of effort as the Heroku deployment.\n\nDepending on your preferences, you can also deploy the app yourself on your own infrastructure. This route would require a few extra steps:\n  - A server (I personally recommend [Digital Ocean](https://www.digitalocean.com/pricing/) or [Linode](https://www.linode.com/pricing/), their cheapest tiers will work fine)\n  - Your own URL (I suppose this is optional, but recommended)\n  - SSL certificates (free through [Let's Encrypt](https://letsencrypt.org/getting-started/))\n  - A bit more experience or willingness to work through issues\n\n## Environment Variables\nThere are a few optional environment variables available for customizing a Whoogle instance. These can be set manually, or copied into `whoogle.env` and enabled for your preferred deployment method:\n\n- Local runs: Set `WHOOGLE_DOTENV=1` before running\n- With `docker-compose`: Uncomment the `env_file` option\n- With `docker build/run`: Add `--env-file ./whoogle.env` to your command\n\n| Variable           | Description                                                                               |\n| ------------------ | ----------------------------------------------------------------------------------------- |\n| WHOOGLE_DOTENV     | Load environment variables in `whoogle.env`                                               |\n| WHOOGLE_USER       | The username for basic auth. WHOOGLE_PASS must also be set if used.                       |\n| WHOOGLE_PASS       | The password for basic auth. WHOOGLE_USER must also be set if used.                       |\n| WHOOGLE_PROXY_USER | The username of the proxy server.                                                         |\n| WHOOGLE_PROXY_PASS | The password of the proxy server.                                                         |\n| WHOOGLE_PROXY_TYPE | The type of the proxy server. Can be \"socks5\", \"socks4\", or \"http\".                       |\n| WHOOGLE_PROXY_LOC  | The location of the proxy server (host or ip).                                            |\n| EXPOSE_PORT        | The port where Whoogle will be exposed.                                                   |\n| HTTPS_ONLY         | Enforce HTTPS. (See [here](https://github.com/benbusby/whoogle-search#https-enforcement)) |\n| WHOOGLE_ALT_TW     | The twitter.com alternative to use when site alternatives are enabled in the config.      |\n| WHOOGLE_ALT_YT     | The youtube.com alternative to use when site alternatives are enabled in the config.      |\n| WHOOGLE_ALT_IG     | The instagram.com alternative to use when site alternatives are enabled in the config.    |\n| WHOOGLE_ALT_RD     | The reddit.com alternative to use when site alternatives are enabled in the config.       |\n| WHOOGLE_ALT_TL     | The Google Translate alternative to use. This is used for all \"translate ____\" searches.  |\n\n### Config Environment Variables\nThese environment variables allow setting default config values, but can be overwritten manually by using the home page config menu. These allow a shortcut for destroying/rebuilding an instance to the same config state every time.\n\n| Variable                       | Description                                                     |\n| ------------------------------ | --------------------------------------------------------------- |\n| WHOOGLE_CONFIG_DISABLE         | Hide config from UI and disallow changes to config by client    |\n| WHOOGLE_CONFIG_COUNTRY         | Filter results by hosting country                               |\n| WHOOGLE_CONFIG_LANGUAGE        | Set interface language                                          |\n| WHOOGLE_CONFIG_SEARCH_LANGUAGE | Set search result language                                      |\n| WHOOGLE_CONFIG_BLOCK           | Block websites from search results (use comma-separated list)   |\n| WHOOGLE_CONFIG_THEME           | Set theme mode (light, dark, or system)                         |\n| WHOOGLE_CONFIG_SAFE            | Enable safe searches                                            |\n| WHOOGLE_CONFIG_ALTS            | Use social media site alternatives (nitter, invidious, etc)     |\n| WHOOGLE_CONFIG_TOR             | Use Tor routing (if available)                                  |\n| WHOOGLE_CONFIG_NEW_TAB         | Always open results in new tab                                  |\n| WHOOGLE_CONFIG_VIEW_IMAGE      | Enable View Image option                                        |\n| WHOOGLE_CONFIG_GET_ONLY        | Search using GET requests only                                  |\n| WHOOGLE_CONFIG_URL             | The root url of the instance (`https://<your url>/`)            |\n| WHOOGLE_CONFIG_STYLE           | The custom CSS to use for styling (should be single line)       |\n\n## Usage\nSame as most search engines, with the exception of filtering by time range.\n\nTo filter by a range of time, append \":past <time>\" to the end of your search, where <time> can be `hour`, `day`, `month`, or `year`. Example: `coronavirus updates :past hour`\n\n## Extra Steps\n### Set Whoogle as your primary search engine\n*Note: If you're using a reverse proxy to run Whoogle Search, make sure the \"Root URL\" config option on the home page is set to your URL before going through these steps.*\n\nBrowser settings:\n  - Firefox (Desktop)\n    - Version 89+\n      - Navigate to your app's url, right click the address bar, and select \"Add Search Engine\".\n    - Previous versions\n      - Navigate to your app's url, and click the 3 dot menu in the address bar. At the bottom, there should be an option to \"Add Search Engine\".\n    - Once you've added the new search engine, open your Firefox Preferences menu, click \"Search\" in the left menu, and use the available dropdown to select \"Whoogle\" from the list.\n    - **Note**: If your Whoogle instance uses Firefox Containers, you'll need to [go through the steps here](#using-with-firefox-containers) to get it working properly.\n  - Firefox (iOS)\n    - In the mobile app Settings page, tap \"Search\" within the \"General\" section. There should be an option titled \"Add Search Engine\" to select. It should prompt you to enter a title and search query url - use the following elements to fill out the form:\n      - Title: \"Whoogle\"\n      - URL: `http[s]://\\<your whoogle url\\>/search?q=%s`\n  - Firefox (Android)\n    - Version <79.0.0\n      - Navigate to your app's url\n      - Long-press on the search text field\n      - Click the \"Add Search Engine\" menu item\n        - Select a name and click ok\n      - Click the 3 dot menu in the top right\n      - Navigate to the settings menu and select the \"Search\" sub-menu\n      - Select Whoogle and press \"Set as default\"\n    - Version >=79.0.0\n      - Click the 3 dot menu in the top right\n      - Navigate to the settings menu and select the \"Search\" sub-menu\n      - Click \"Add search engine\"\n      - Select the 'Other' radio button\n        - Name: \"Whoogle\"\n        - Search string to use: `https://\\<your whoogle url\\>/search?q=%s`\n  - [Alfred](https://www.alfredapp.com/) (Mac OS X)\n\t  1. Go to `Alfred Preferences` > `Features` > `Web Search` and click `Add Custom Search`. Then configure these settings\n\t\t   - Search URL: `https://\\<your whoogle url\\>/search?q={query}\n\t\t   - Title: `Whoogle for '{query}'` (or whatever you want)\n\t\t   - Keyword: `whoogle`\n\n\t  2. Go to `Default Results` and click the `Setup fallback results` button. Click `+` and add Whoogle, then  drag it to the top.\n  - Chrome/Chromium-based Browsers\n    - Automatic\n      - Visit the home page of your Whoogle Search instance -- this may automatically add the search engine to your list of search engines. If not, you can add it manually.\n    - Manual\n      - Under search engines > manage search engines > add, manually enter your Whoogle instance details with a `<whoogle url>/search?q=%s` formatted search URL.\n\n### Prevent Downtime (Heroku only)\nPart of the deal with Heroku's free tier is that you're allocated 550 hours/month (meaning it can't stay active 24/7), and the app is temporarily shut down after 30 minutes of inactivity. Once it becomes inactive, any Whoogle searches will still work, but it'll take an extra 10-15 seconds for the app to come back online before displaying the result, which can be frustrating if you're in a hurry.\n\nA good solution for this is to set up a simple cronjob on any device at your home that is consistently powered on and connected to the internet (in my case, a PiHole worked perfectly). All the device needs to do is fetch app content on a consistent basis to keep the app alive in whatever ~17 hour window you want it on (17 hrs * 31 days = 527, meaning you'd still have 23 leftover hours each month if you searched outside of your target window).\n\nFor instance, adding `*/20 7-23 * * * curl https://<your heroku app name>.herokuapp.com > /home/<username>/whoogle-refresh` will fetch the home page of the app every 20 minutes between 7am and midnight, allowing for downtime from midnight to 7am. And again, this wouldn't be a hard limit - you'd still have plenty of remaining hours of uptime each month in case you were searching after this window has closed.\n\nSince the instance is destroyed and rebuilt after inactivity, config settings will be reset once the app enters downtime. If you have configuration settings active that you'd like to keep between periods of downtime (like dark mode for example), you could instead add `*/20 7-23 * * * curl -d \"dark=1\" -X POST https://<your heroku app name>.herokuapp.com/config > /home/<username>/whoogle-refresh` to keep these settings more or less permanent, and still keep the app from entering downtime when you're using it.\n\n### HTTPS Enforcement\nOnly needed if your setup requires Flask to redirect to HTTPS on its own -- generally this is something that doesn't need to be handled by Whoogle Search.\n\nNote: You should have your own domain name and [an https certificate](https://letsencrypt.org/getting-started/) in order for this to work properly.\n\n- Heroku: Ensure that the `Root URL` configuration on the home page begins with `https://` and not `http://`\n- Docker build: Add `--build-arg use_https=1` to your run command\n- Docker image: Set the environment variable HTTPS_ONLY=1\n- Pip/Pipx: Add the `--https-only` flag to the end of the `whoogle-search` command\n- Default `run` script: Modify the script locally to include the `--https-only` flag at the end of the python run command\n\t\n### Using with Firefox Containers\nUnfortunately, Firefox Containers do not currently pass through `POST` requests (the default) to the engine, and Firefox caches the opensearch template on initial page load. To get around this, you can take the following steps to get it working as expected:\n\n1. Remove any existing Whoogle search engines from Firefox settings\n2. Enable `GET Requests Only` in Whoogle config\n3. Clear Firefox cache\n4. Restart Firefox\n5. Navigate to Whoogle instance and [re-add the engine](#set-whoogle-as-your-primary-search-engine)\n     ",
  "permissions": {
    "read": true,
    "write": false,
    "admin": false
  },
  "media_types": [
    "application/vnd.docker.container.image.v1+json",
    "application/vnd.docker.distribution.manifest.list.v2+json"
  ],
  "content_types": [
    "image"
  ]
}