{
  "user": "dsys",
  "name": "match",
  "namespace": "dsys",
  "repository_type": "image",
  "status": 1,
  "status_description": "active",
  "description": "Scalable reverse image search built on Kubernetes and Elasticsearch",
  "is_private": false,
  "is_automated": true,
  "can_edit": false,
  "star_count": 0,
  "pull_count": 68110,
  "last_updated": "2020-07-25T18:12:51.106866Z",
  "date_registered": "2018-06-20T21:05:28.291711Z",
  "collaborator_count": 0,
  "affiliation": null,
  "hub_user": "dsys",
  "has_starred": false,
  "full_description": "<p align=\"center\"><img src=\"https://raw.githubusercontent.com/dsys/match/master/resources/logo.png\" alt=\"logo\" width=\"220\" /></p>\n\n<p align=\"center\"><strong>Scalable reverse image search</strong><br /><em>built on <a href=\"http://kubernetes.io/\">Kubernetes</a> and <a href=\"https://www.elastic.co/\">Elasticsearch</a></em></p>\n\n<p align=\"center\"><a href=\"https://github.com/dsys/match/stargazers\"><img src=\"https://img.shields.io/github/stars/dsys/match.svg?style=flat\" alt=\"GitHub stars\" /></a> <a href=\"https://hub.docker.com/r/dsys/match/\"><img src=\"https://img.shields.io/docker/pulls/dsys/match.svg\" alt=\"Docker Pulls\" /></a> <a href=\"http://kubernetes.io\"><img src=\"https://img.shields.io/badge/kubernetes-ready-brightgreen.svg?style=flat\" alt=\"Kubernetes shield\" /></a> <a href=\"https://app.fossa.io/projects/git%2Bhttps%3A%2F%2Fgithub.com%2Fdsys%2Fmatch?ref=badge_shield\" alt=\"FOSSA Status\"><img src=\"https://app.fossa.io/api/projects/git%2Bhttps%3A%2F%2Fgithub.com%2Fdsys%2Fmatch.svg?type=shield\"/></a></p>\n\n**Match** makes it easy to search for images that look similar to each other. Using a state-of-the-art perceptual hash, it is invariant to scaling and 90 degree rotations. Its HTTP API is quick to integrate and flexible for a number of reverse image search applications. Kubernetes and Elasticsearch allow Match to scale to billions of images with ease while giving you full control over where your data is stored. Match uses the awesome [ascribe/image-match](https://github.com/ascribe/image-match) under the hood for most of the image search legwork.\n\n1. [Getting Started](#getting-started)\n2. [API](#api)\n3. [Development](#development)\n4. [License and Acknowledgements](#license-and-acknowledgements)\n\n## Getting Started\n\nIf you already have ElasticSearch running:\n```\n$ docker run -e ELASTICSEARCH_URL=https://daisy.us-west-1.es.amazonaws.com -it dsys/match\n```\n\nIf you want to run ElasticSearch locally as well, have [`docker-compose`](https://docs.docker.com/compose/) installed on your system, clone this repository and type:\n```\n$ make dev\n```\n\nMatch is packaged as a Docker container ([dsys/match](https://hub.docker.com/r/dsys/match/) on Docker Hub), making it highly portable and scalable to billions of images. You can configure a few options using environment variables:\n\n* **WORKER_COUNT** *(default: `4`)*\n\n  The number of gunicorn workers to spin up.\n\n* **ELASTICSEARCH_URL** *(default: `elasticsearch:9200`)*\n\n  A URL pointing to the Elasticsearch database where image signatures are to be stored. If you don't want to host your own Elasticsearch cluster, consider using [AWS Elasticsearch Service](https://aws.amazon.com/elasticsearch-service/). That's what we use.\n\n* **ELASTICSEARCH_INDEX** *(default: images)*\n\n  The index in the Elasticsearch database where image signatures are to be stored.\n\n* **ELASTICSEARCH_DOC_TYPE** *(default: images)*\n\n  The doc type used for storing image signatures.\n\n\n### Using in your own Kubernetes cluster\n\nYou can configure the service, replication controller, and secret like so:\n\n```yaml\n# match-service.yml\napiVersion: v1\nkind: Service\nmetadata:\n  name: match\nspec:\n  ports:\n  - name: http\n    port: 80\n    protocol: TCP\n  selector:\n    app: match\n```\n\n```yaml\n# match-rc.yml\napiVersion: v1\nkind: ReplicationController\nmetadata:\n  name: match\nspec:\n  replicas: 1\n  selector:\n    app: match\n  template:\n    metadata:\n      labels:\n        app: match\n    spec:\n      containers:\n      - name: match\n        image: dsys/match:latest\n        ports:\n        - containerPort: 80\n        env:\n        - name: WORKER_COUNT\n          value: \"4\"\n        - name: ELASTICSEARCH_URL\n          valueFrom:\n            secretKeyRef:\n              name: match\n              key: elasticsearch.url\n        - name: ELASTICSEARCH_INDEX\n          valueFrom:\n            secretKeyRef:\n              name: match\n              key: elasticsearch.index\n        - name: ELASTICSEARCH_DOC_TYPE\n          valueFrom:\n            secretKeyRef:\n              name: match\n              key: elasticsearch.doc-type\n```\n\n```yaml\n# match-secret.yml\napiVersion: v1\nkind: Secret\nmetadata:\n  name: match\ndata:\n  # https://daisy.us-west-1.es.amazonaws.com (change me)\n  elasticsearch.url: aHR0cHM6Ly9kYWlzeS51cy13ZXN0LTEuZXMuYW1hem9uYXdzLmNvbQ==\n\n  # images\n  elasticsearch.index: aW1hZ2Vz\n\n  # images\n  elasticsearch.doc-type: aW1hZ2Vz\n```\n\n## API\n\nMatch has a simple HTTP API. All request parameters are specified via `application/x-www-form-urlencoded` or `multipart/form-data`.\n\n* [POST `/add`](#post-add)\n* [DELETE `/delete`](#delete-delete)\n* [POST `/search`](#post-search)\n* [POST `/compare`](#post-compare)\n* [GET `/count`](#get-count)\n* [GET `/list`](#get-list)\n* [GET `/ping`](#get-ping)\n\n---\n\n### POST `/add`\n\nAdds an image signature to the database.\n\n#### Parameters\n\n* **url** or **image** *(required)*\n\n  The image to add to the database. It may be provided as a URL via `url` or as a `multipart/form-data` file upload via `image`.\n\n* **filepath** *(required)*\n\n  The path to save the image to in the database. If another image already exists at the given path, it will be overwritten.\n\n* **metadata** *(default: None)*\n\n  An arbitrary JSON object featuring meta data to attach to the image.\n\n#### Example Response\n\n```json\n{\n  \"status\": \"ok\",\n  \"error\": [],\n  \"method\": \"add\",\n  \"result\": []\n}\n```\n\n---\n\n### DELETE `/delete`\n\nDeletes an image signature from the database.\n\n#### Parameters\n\n* **filepath** *(required)*\n\n  The path of the image signature in the database.\n\n#### Example Response\n\n```json\n{\n  \"status\": \"ok\",\n  \"error\": [],\n  \"method\": \"delete\",\n  \"result\": []\n}\n```\n\n---\n\n### POST `/search`\n\nSearches for a similar image in the database. Scores range from 0 to 100, with 100 being a perfect match.\n\n#### Parameters\n\n* **url** or **image** *(required)*\n\n  The image to add to the database. It may be provided as a URL via `url` or as a `multipart/form-data` file upload via `image`.\n\n* **all_orientations** *(default: true)*\n\n  Whether or not to search for similar 90 degree rotations of the image.\n\n#### Example Response\n\n```json\n{\n  \"status\": \"ok\",\n  \"error\": [],\n  \"method\": \"search\",\n  \"result\": [\n    {\n      \"score\": 99.0,\n      \"filepath\": \"http://static.wixstatic.com/media/0149b5_345c8f862e914a80bcfcc98fcd432e97.jpg_srz_614_709_85_22_0.50_1.20_0.00_jpg_srz\"\n    }\n  ]\n}\n```\n\n---\n\n### POST `/compare`\n\nCompares two images, returning a score for their similarity. Scores range from 0 to 100, with 100 being a perfect match.\n\n#### Parameters\n\n* **url1** or **image1**, **url2** or **image2** *(required)*\n\n  The images to compare. They may be provided as a URL via `url1`/`url2` or as a `multipart/form-data` file upload via `image1`/`image2`.\n\n#### Example Response\n\n```json\n{\n  \"status\": \"ok\",\n  \"error\": [],\n  \"method\": \"compare\",\n  \"result\": [\n    {\n      \"score\": 99.0\n    }\n  ]\n}\n```\n\n---\n\n### GET `/count`\n\nCount the number of image signatures in the database.\n\n#### Example Response\n\n```json\n{\n  \"status\": \"ok\",\n  \"error\": [],\n  \"method\": \"list\",\n  \"result\": [420]\n}\n```\n\n---\n\n### GET `/list`\n\nLists the file paths for the image signatures in the database.\n\n#### Parameters\n\n* **offset** *(default: 0)*\n\n  The location in the database to begin listing image paths.\n\n* **limit** *(default: 20)*\n\n  The number of image paths to retrieve.\n\n#### Example Response\n\n```json\n{\n  \"status\": \"ok\",\n  \"error\": [],\n  \"method\": \"list\",\n  \"result\": [\n    \"http://img.youtube.com/vi/iqPqylKy-bY/0.jpg\",\n    \"https://i.ytimg.com/vi/zbjIwBggt2k/hqdefault.jpg\",\n    \"https://s-media-cache-ak0.pinimg.com/736x/3d/67/6d/3d676d3f7f3031c9fd91c10b17d56afe.jpg\"\n  ]\n}\n```\n\n---\n\n### GET `/ping`\n\nCheck for the health of the server.\n\n#### Example Response\n\n```json\n{\n  \"status\": \"ok\",\n  \"error\": [],\n  \"method\": \"ping\",\n  \"result\": []\n}\n```\n\n## Development\n\n    $ export ELASTICSEARCH_URL=https://daisy.us-west-1.es.amazonaws.com\n    $ make build\n    $ make run\n    $ make push\n\n## License and Acknowledgements\n\nMatch is based on [ascribe/image-match](https://github.com/ascribe/image-match), which is in turn based on the paper [_An image signature for any kind of image_, Goldberg et al](http://www.cs.cmu.edu/~hcwong/Pdfs/icip02.ps). There is an existing [reference implementation](https://www.pureftpd.org/project/libpuzzle) which may be more suited to your needs.\n\nMatch itself is released under the [BSD 3-Clause license](https://github.com/dsys/match/blob/master/LICENSE). `ascribe/image-match` is released under the Apache 2.0 license.\n",
  "permissions": {
    "read": true,
    "write": false,
    "admin": false
  },
  "media_types": [
    "application/vnd.docker.container.image.v1+json"
  ],
  "content_types": [
    "image"
  ]
}