{
  "user": "ethersphere",
  "name": "beekeeper",
  "namespace": "ethersphere",
  "repository_type": "image",
  "status": 1,
  "status_description": "active",
  "description": "",
  "is_private": false,
  "is_automated": false,
  "can_edit": false,
  "star_count": 0,
  "pull_count": 19074,
  "last_updated": "2023-01-05T15:07:07.939399Z",
  "date_registered": "2020-04-24T12:48:07.845047Z",
  "collaborator_count": 0,
  "affiliation": null,
  "hub_user": "ethersphere",
  "has_starred": false,
  "full_description": "# Ethereum Swarm Beekeeper\n\n[![Go](https://github.com/ethersphere/beekeeper/workflows/Go/badge.svg)](https://github.com/ethersphere/beekeeper/actions)\n\n**Ethereum Swarm Beekeeper** is tool used for orchestrating cluster of [Ethereum Swarm Bee](https://github.com/ethersphere/bee) and running integration tests and simulations against it in the Kubernetes.\n\n# Requirements\n\n* Kubernetes cluster (v1.19+)\n* [Geth Swap node](https://github.com/ethersphere/helm/tree/master/charts/geth-swap)\n\n# Installation\n\n```bash\nmake binary\ncp dist/beekeeper /usr/local/bin/beekeeper\n```\n\n# Run unit tests\nRuns available unit tests in pkg folder\n```\nmake test\n```\n\n# Configuration\n\nBeekeeper is configured with:\n* **config file** - sets Beekeeper's internals, and\n* **config directory** - sets Bee cluster configuration, checks and simulations\n\n## Config file\n\nConfig file is used to set Beekeeper internals:\n* config directory location\n* Kubernetes client\n* Swap client\n\nDefault location for config file is: **$HOME/.beekeeper.yaml**\n\nLocation can also be set with **--config** flag.\n\nexample:\n```\nconfig-dir: <user home dir>/.beekeeper/\nconfig-git-repo: \"\"\nconfig-git-branch: main\nconfig-git-username: <GitHub username>\nconfig-git-password: <GitHub Personal Access Token>\nenable-k8s: true\nin-cluster: false\nkubeconfig: \"~/.kube/config\"\ngeth-url: http://geth-swap.geth-swap.dai.internal\nbzz-token-address: 0x6aab14fe9cccd64a502d23842d916eb5321c26e7 \neth-account: 0x62cab2b3b55f341f10348720ca18063cdb779ad5\nlog-verbosity: \"info\"\nloki-endpoint: http://loki.testnet.internal/loki/api/v1/push\n```\n\nBeekeeper reads *config-dir* from a local machine by default, but it also supports reading *config-dir* from a Git repo. If field *config-git-repo* is set, it will override *config-dir* and configuration will be read from a Git repo.\n\nIf *config-dir* is kept in a Git repo, field *config-git-repo* should point to it, along with *config-git-branch* specifying proper branch. Fields *config-git-username* and *config-git-password* can be set when repo is private.\n\nOfficial GitHub repository with Beekeeper's configuration is **https://github.com/ethersphere/beekeeper-config**\n\nNOTE: command flags can be also set through the config file\n\n## Config directory\n\nConfig directory is used to group configuration (.yaml) files describing:\n* Bee cluster setup in Kubernetes\n* checks (integration tests), and\n* simulations\n\nDefault location for config dir is: **$HOME/.beekeeper/**\n\nLocation can also be set with **--config-dir** flag.\n\nExamples of .yaml files can be found in the [Beekeeper repo](https://github.com/ethersphere/beekeeper/tree/master/config).\n\nConfig dir's .yaml files have several main blocks:\n* **clusters** - defines clusters Beekeeper works with\n* **node-groups** - defines Bee node groups that are part of the cluster. Node group is a collection of Bee nodes sharing same configuration parameters.\n* **bee-configs** - defines Bee configuration that can be assigned to node-groups\n* **checks** - defines checks Beekeeper can execute against the cluster\n* **simulations** - defines simulations Beekeeper can execute against the cluster\n* **stages** - defines stages for dynamic execution of checks and simulations\n\n### Inheritance\n\nInheritance can be set through the field *_inherit*.\n\nClusters, node-groups and bee-configs blocks support inheritance. \n\nexample:\n```\nbee-configs:\n  light-node:\n    _inherit: default\n    full-node: false\n```\nThis setting means that *light-node* bee-config will inherit all parameters from the *default* bee-config, overriding only *full-node* parameter.\n\n### Action types\n\nAction types can be set in every check or simulation definition.\n\nAction types allow defining same check or simulation with different parameters.\n\nexample:\n```\nchecks:\n  pushsync-chunks:\n    options:\n      chunks-per-node: 1\n      metrics-enabled:\n      mode: chunks\n      postage-amount: 1000\n      postage-depth: 16\n      postage-wait: 5s\n      retries: 5\n      retry-delay: 1s\n      upload-node-count: 1\n    timeout: 5m\n    type: pushsync\n  pushsync-light-chunks:\n    options:\n      chunks-per-node: 1\n      metrics-enabled:\n      mode: light-chunks\n      postage-amount: 1000\n      postage-depth: 16\n      postage-wait: 5s\n      retries: 5\n      retry-delay: 1s\n      upload-node-count: 1\n    timeout: 5m\n    type: pushsync\n```\nThis setting means that pushsync check can be executed choosing *pushsync-chunks* or *pushsync-light-chunks* variation.\n\n# Usage\n\n**beekeeper** has following commands:\n\n|command|description|\n|-------|-----------|\n| check | runs integration tests on a Bee cluster |\n| create | creates Bee infrastructure |\n| delete | Delete Bee infrastructure |\n| fund | Fund Ethereum addresses |\n| help | Help about any command |\n| print | Print information about a Bee cluster |\n| simulate | Run simulations on a Bee cluster |\n| version | Print version number |\n\n## check\n\nCommand **check** runs ingegration tests on a Bee cluster.\n\nIt has following flags:\n\n```\n--checks strings                  list of checks to execute (default [pingpong])\n--cluster-name string             cluster name (default \"default\")\n--create-cluster                  creates cluster before executing checks\n--help                            help for check\n--metrics-enabled                 enable metrics\n--metrics-pusher-address string   prometheus metrics pusher address (default \"pushgateway.staging.internal\")\n--seed int                        seed, -1 for random (default -1)\n--timeout duration                timeout (default 30m0s)\n```\n\nexample:\n```\nbeekeeper check --checks=pingpong,pushsync\n```\n\n## create\n\nCommand **create** creates Bee infrastructure. It has two subcommands:\n* bee-cluster - creates Bee cluster\n\n    It has following flags:\n\n    ```\n    --cluster-name string   cluster name (default \"default\")\n    --help                  help for bee-cluster\n    --timeout duration      timeout (default 30m0s)\n    --with-funding          fund nodes (default true)\n    ```\n\n    example:\n    ```\n    beekeeper create bee-cluster default\n    ```\n\n* k8s-namespace - creates Kubernetes namespace\n\n    example:\n    ```\n    beekeeper create k8s-namespace beekeeper\n    ```\n\n## delete\n\nCommand **delete** deletes Bee infrastructure. It has two subcommands:\n* bee-cluster - deletes Bee cluster\n\n    It has following flags:\n\n    ```\n    --cluster-name string   cluster name (default \"default\")\n    --help                  help for bee-cluster\n    --timeout duration      timeout (default 15m0s)\n    --with-storage          delete storage\n    ```\n\n    example:\n    ```\n    beekeeper delete bee-cluster default\n    ```\n\n* k8s-namespace - deletes Kubernetes namespace\n\n    example:\n    ```\n    beekeeper delete k8s-namespace beekeeper\n    ```\n\n## fund\n\nCommand **fund** makes BZZ tokens and ETH deposits to given Ethereum addresses.\n\nIt has the following flags:\n\n```\n--addresses strings          Bee node Ethereum addresses (must start with 0x)\n--address-create             if enabled, creates Ethereum address(es)\n--address-count              number of Ethereum addresses to create\n--bzz-deposit float          BZZ tokens amount to deposit\n--bzz-token-address string   BZZ token address (default \"0x6aab14fe9cccd64a502d23842d916eb5321c26e7\")\n--eth-account string         ETH account address (default \"0x62cab2b3b55f341f10348720ca18063cdb779ad5\")\n--eth-deposit float          ETH amount to deposit\n--geth-url string            Geth node URL (default \"http://geth-swap.geth-swap.dai.internal\")\n--help                       help for fund\n--password                   password for generating Ethereum addresses (default \"beekeeper\")\n--timeout duration           timeout (default 5m0s)\n```\n\nexamples:\n```\nbeekeeper fund --addresses=0xf176839c150e52fe30e5c2b5c648465c6fdfa532,0xebe269e07161c68a942a3a7fce6b4ed66867d6f0 --bzz-deposit 100 --eth-deposit 0.01\n\nbeekeeper fund --address-create --address-count 2 --bzz-deposit 100 --eth-deposit 0.01\n```\n\n## print\n\nCommand **print** prints information about a Bee cluster.\n\nIt has following flags:\n\n```\n--cluster-name string   cluster name (default \"default\")\n--help                  help for print\n--timeout duration      timeout (default 15m0s)\n```\n\nexample:\n```\nbeekeeper print overlays\n```\n\n## simulate\n\nCommand **simulate** runs simulations on a Bee cluster.\n\nIt has following flags:\n\n```\n--cluster-name string             cluster name (default \"default\")\n--create-cluster                  creates cluster before executing simulations\n--help                            help for check\n--metrics-enabled                 enable metrics\n--metrics-pusher-address string   prometheus metrics pusher address (default \"pushgateway.staging.internal\")\n--seed int                        seed, -1 for random (default -1)\n--simulations strings             list of simulations to execute (default [upload])\n--timeout duration                timeout (default 30m0s)\n```\n\nexample:\n```\nbeekeeper simulate --simulations=upload\n```\n\n## version\n\nCommand **version** prints version number.\n\nexample:\n```\nbeekeeper version\n```\n\n# Global flags\n\nGlobal flags can be used with any command.\n\nexample:\n```\n--config string                 config file (default is $HOME/.beekeeper.yaml)\n--config-dir string             config directory (default is $HOME/.beekeeper/) (default \"C:\\\\Users\\\\ljubi\\\\.beekeeper\")\n--config-git-branch string      Git branch (default \"main\")\n--config-git-password string    Git password or personal access tokens (needed for private repos)\n--config-git-repo string        Git repository with configurations (uses config directory when Git repo is not specified) (default \"\")\n--config-git-username string    Git username (needed for private repos)\n--log-verbosity string          log verbosity level 0=silent, 1=error, 2=warn, 3=info, 4=debug, 5=trace (default \"info\")\n--loki-endpoint string          loki http endpoint for pushing local logs (use http://loki.testnet.internal/loki/api/v1/push)\n--tracing-enable                enable tracing\n--tracing-endpoint string       endpoint to send tracing data (default \"tempo-tempo-distributed-distributor.observability:6831\")\n--tracing-host string           host to send tracing data\n--tracing-port string           port to send tracing data\n--tracing-service-name string   service name identifier for tracing (default \"beekeeper\")\n```\n",
  "permissions": {
    "read": true,
    "write": false,
    "admin": false
  },
  "media_types": [
    "application/vnd.docker.container.image.v1+json"
  ],
  "content_types": [
    "image"
  ]
}