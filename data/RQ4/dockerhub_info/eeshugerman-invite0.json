{
  "user": "eeshugerman",
  "name": "invite0",
  "namespace": "eeshugerman",
  "repository_type": "image",
  "status": 1,
  "status_description": "active",
  "description": "easy invite-only Auth0 tenants",
  "is_private": false,
  "is_automated": false,
  "can_edit": false,
  "star_count": 0,
  "pull_count": 333,
  "last_updated": "2021-07-09T02:56:59.39429Z",
  "date_registered": "2019-11-12T07:13:04.144528Z",
  "collaborator_count": 0,
  "affiliation": null,
  "hub_user": "eeshugerman",
  "has_starred": false,
  "full_description": "> **NOTE**: Auth0 recently introduced [Organizations](https://auth0.com/docs/organizations) which includes some [email invite functionality](https://auth0.com/docs/organizations/send-membership-invitations). I haven't looked into it closely, but you should, as it may yield Invite0 obsolete. It's unclear to me if it's included in the free tier -- let me know if you find out!\n\n# Overview\n\n## What is it?\nInvite0 is a small web app which augments the popular [Auth0](https://auth0.com) service, providing code-free support for \"invite only\" tenants.\n\n## The problem\nBy default, your Auth0 tenant is open for signup to anyone on the web. This may or may not be what you want; let's suppose it's not. Fortunately, signups can be easily disabled in the UI. Cool! But now... how do you add users? You might hope that invitation links could be sent to email addresses from the UI, but unfortunately Auth0 does not support this out-of-the-box. Rather, your options are:\n\n  1. create users manually in the UI and by some means send credentials to new users (yuck!)\n  2. handle user creation in your application code via the Management API\n\n(1) poses glaring problems for security and scalability. (2) may be a fine option _if you're developing an application_ -- but what if you are simply integrating software that you do not develop? This is where Invite0 comes in to play.\n\n## The solution\nThe core functionality of Invite0 boils down to three web pages:\n- `/admin`: From this page, Auth0 users with a certain permission can send invitations to email addresses.\n- `/signup/<token>`: This is where the recipients land when they click the invitation link. It's a basic form: password and password confirmation (and additional profile fields if so configured).\n- `/my-account`: Here users can make changes to their account, such as setting a profile picture or changing their password.\n\n`token` is a JSON Web Token (JWT) which encodes the user's email address and the current time in a signed, url-safe string. When the admin clicks `Send`, the user's invite link, `https://<domain>/signup/<token>`, is emailed to them. When the user follows the link, the `/signup` view checks the token. Since the token is signed, we can verify that it was encoded with our `SECRET_KEY` (or in other words, that it has not been tampered with). From the token, we decode the email address and creation time, and check that it has not expired per `INVITE_EXPIRATION_DAYS`. Finally, when the user submits the password form, their account is created in Auth0 with the Mangement API.\n\nThis approach enables us to send single-use, temporary invite links, and verifies email address as part of the process, all without touching a database! Token encoding and decoding is handled by [`itsdangerous`](https://github.com/pallets/itsdangerous).\n\n# Installation\n\n### 1. Setup the API and Application in the Auth0 UI\n#### 1. API\n  1. `APIs` -> `Create API`\n  2. Provide a name and identifier, click `Create`\n  3. On the `Permissions` tab, add a `send:invitation` permission\n\n#### 2. Application\n  1. Click `Applications` -> `<API name from step 1.2> (Test Application)`\n  2. _Optional_: remove `(Test Application)` from the application name, or rename as you see fit\n  3. Add the allowed callback and logout URLs\n      - allowed callback URL: `https://<your Invite0 domain>/login_callback`\n      - allowed logout URL: `https://<your Invite0 domain>/login` (yes, that reads `login`)\n      - for local testing, `<your Invite0 domain>` is `http://localhost:8000`\n      - don't forget to click `Save Changes` at the bottom of the page!\n  4. On the `APIs` tab, grant access to the Management API for the `read:users`, `create:users`, and `update:users` permissions\n\n#### 3. Grant your user the `send:invitation` permission\n  1. `Users & Roles` -> `Users` -> `<your email address>` -> `Permissions` -> `Assign Permissions`\n  2. Select the `send:invitation` permission\n\n### 2. Create your `docker-compose.yml`\nHere's an example of a minimal setup with Docker Compose:\n```yaml\nversion: \"3\"\n\nservices:\n  invite0:\n    image: eeshugerman/invite0\n    ports:\n      - 8000:8000   # host:container\n    environment:\n      INVITE0_DOMAIN: <your Invite0 domain>    # localhost:8000 for local testing\n      ORG_NAME: Your Organization\n      SECRET_KEY: <long random string>\n\n      # mail settings are passed directly to Flask-Mail -- see: https://pythonhosted.org/Flask-Mail\n      MAIL_SERVER: smtp.gmail.com\n      MAIL_PORT: 587\n      MAIL_USE_TLS: 1\n      MAIL_USERNAME: foo@gmail.com\n      MAIL_PASSWORD: passw0rd\n      MAIL_SENDER_ADDRESS: foo@gmail.com\n\n      # you'll find these values in the settings page for the Application and API created in steps 1 and 2\n      AUTH0_CLIENT_ID: <client ID>\n      AUTH0_CLIENT_SECRET: <client secret>\n      AUTH0_DOMAIN: <tenant>.auth0.com\n      AUTH0_AUDIENCE: <audience>\n```\n### 3. Run `docker-compose up`\n\n### 4. Log in at `localhost:8000/admin`\n# Configuration\n## Environment variables\nSee available variables and their defaults in [config.py](invite0/config.py).\n\n## Overriding default HTML and CSS\nYou can override the default HTML and CSS with bind-mounts:\n```\nservices:\n  invite0:\n    volumes:\n      - ./signup.html:/invite0/templates/signup.html    # just the signup page, or\n      - ./templates/:/invite0/templates/                # all HTML including invite email\n      - ./styles.css:/invite0/static/css/styles.css\n```\nRefer to the default HTML [here](invite0/templates).\n",
  "permissions": {
    "read": true,
    "write": false,
    "admin": false
  },
  "media_types": [
    "application/vnd.docker.container.image.v1+json"
  ],
  "content_types": [
    "image"
  ]
}