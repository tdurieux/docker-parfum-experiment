{
  "user": "h44z",
  "name": "wg-portal",
  "namespace": "h44z",
  "repository_type": "image",
  "status": 1,
  "status_description": "active",
  "description": "WireGuard VPN Portal - Manage your WireGuard Server and Users.",
  "is_private": false,
  "is_automated": false,
  "can_edit": false,
  "star_count": 7,
  "pull_count": 26232,
  "last_updated": "2023-01-05T23:23:23.270378Z",
  "date_registered": "2020-11-10T10:03:23.148182Z",
  "collaborator_count": 0,
  "affiliation": null,
  "hub_user": "h44z",
  "has_starred": false,
  "full_description": "# WireGuard Portal\n\n[![Build Status](https://travis-ci.com/h44z/wg-portal.svg?token=q4pSqaqT58Jzpxdx62xk&branch=master)](https://travis-ci.com/h44z/wg-portal)\n[![License: MIT](https://img.shields.io/badge/license-MIT-green.svg)](https://opensource.org/licenses/MIT)\n![GitHub last commit](https://img.shields.io/github/last-commit/h44z/wg-portal)\n[![Go Report Card](https://goreportcard.com/badge/github.com/h44z/wg-portal)](https://goreportcard.com/report/github.com/h44z/wg-portal)\n![GitHub go.mod Go version](https://img.shields.io/github/go-mod/go-version/h44z/wg-portal)\n![GitHub code size in bytes](https://img.shields.io/github/languages/code-size/h44z/wg-portal)\n[![Docker Pulls](https://img.shields.io/docker/pulls/h44z/wg-portal.svg)](https://hub.docker.com/r/h44z/wg-portal/)\n\nA simple, web based configuration portal for [WireGuard](https://wireguard.com).\nThe portal uses the WireGuard [wgctrl](https://github.com/WireGuard/wgctrl-go) library to manage existing VPN\ninterfaces. This allows for seamless activation or deactivation of new users, without disturbing existing VPN\nconnections.\n\nThe configuration portal currently supports using SQLite and MySQL as a user source for authentication and profile data.\nIt also supports LDAP (Active Directory or OpenLDAP) as authentication provider.\n\n## Features\n * Self-hosted and web based\n * Automatically select IP from the network pool assigned to client\n * QR-Code for convenient mobile client configuration\n * Sent email to client with QR-code and client config\n * Enable / Disable clients seamlessly\n * Generation of `wgX.conf` after any modification\n * IPv6 ready\n * User authentication (SQLite/MySQL and LDAP)\n * Dockerized\n * Responsive template\n * One single binary\n * Can be used with existing WireGuard setups\n * Support for multiple WireGuard interfaces\n * REST API for management and client deployment\n * Peer Expiry Feature\n\n![Screenshot](screenshot.png)\n\n## Setup\nMake sure that your host system has at least one WireGuard interface (for example wg0) available.\nIf you did not start up a WireGuard interface yet, take a look at [wg-quick](https://manpages.debian.org/unstable/wireguard-tools/wg-quick.8.en.html) in order to get started.\n\n### Docker\nThe easiest way to run WireGuard Portal is to use the Docker image provided.\n\nHINT: the *latest* tag always refers to the master branch and might contain unstable or incompatible code!\n\nDocker Compose snippet with some sample configuration values:\n```\nversion: '3.6'\nservices:\n  wg-portal:\n    image: h44z/wg-portal:latest\n    container_name: wg-portal\n    restart: unless-stopped\n    cap_add:\n      - NET_ADMIN\n    network_mode: \"host\"\n    volumes:\n      - /etc/wireguard:/etc/wireguard\n      - ./data:/app/data\n    ports:\n      - '8123:8123'\n    environment:\n      # WireGuard Settings\n      - WG_DEVICES=wg0\n      - WG_DEFAULT_DEVICE=wg0\n      - WG_CONFIG_PATH=/etc/wireguard\n      # Core Settings\n      - EXTERNAL_URL=https://vpn.company.com\n      - WEBSITE_TITLE=WireGuard VPN\n      - COMPANY_NAME=Your Company Name\n      - ADMIN_USER=admin@domain.com\n      - ADMIN_PASS=supersecret\n      # Mail Settings\n      - MAIL_FROM=WireGuard VPN <noreply+wireguard@company.com>\n      - EMAIL_HOST=10.10.10.10\n      - EMAIL_PORT=25\n      # LDAP Settings\n      - LDAP_ENABLED=true\n      - LDAP_URL=ldap://srv-ad01.company.local:389\n      - LDAP_BASEDN=DC=COMPANY,DC=LOCAL\n      - LDAP_USER=ldap_wireguard@company.local\n      - LDAP_PASSWORD=supersecretldappassword\n      - LDAP_ADMIN_GROUP=CN=WireGuardAdmins,OU=Users,DC=COMPANY,DC=LOCAL\n```\nPlease note that mapping ```/etc/wireguard``` to ```/etc/wireguard``` inside the docker, will erase your host's current configuration.\nIf needed, please make sure to back up your files from ```/etc/wireguard```.\nFor a full list of configuration options take a look at the source file [internal/server/configuration.go](internal/server/configuration.go#L56).\n\n### Standalone\nFor a standalone application, use the Makefile provided in the repository to build the application. Go version 1.16 or higher has to be installed to build WireGuard Portal.\n\n```shell\n# show all possible make commands\nmake\n\n# build wg-portal for current system architecture\nmake build\n```\n\nThe compiled binary will be located in the dist folder.\nA detailed description for using this software with a raspberry pi can be found in the [README-RASPBERRYPI.md](README-RASPBERRYPI.md).\n\nTo build the Docker image, Docker (> 20.x) with buildx is required. If you want to build cross-platform images, you need to install qemu.\nOn arch linux for example install: `docker-buildx qemu-user-static qemu-user-static-binfmt`.\n\nOnce the Docker setup is completed, create a new buildx builder: \n```shell\ndocker buildx create --name wgportalbuilder --platform linux/arm/v7,linux/arm64,linux/amd64\ndocker buildx use wgportalbuilder\ndocker buildx inspect --bootstrap\n```\nNow you can compile the Docker image:\n```shell\n# multi platform build, can only be exported to tar archives\ndocker buildx build --platform linux/arm/v7,linux/arm64,linux/amd64 --output type=local,dest=docker_images \\\n  --build-arg BUILD_IDENTIFIER=dev --build-arg BUILD_VERSION=0.1 -t h44z/wg-portal .\n  \n\n# image for current platform only (same as docker build)\ndocker buildx build --load \\\n  --build-arg BUILD_IDENTIFIER=dev --build-arg BUILD_VERSION=0.1 -t h44z/wg-portal .\n```\n\n## Configuration\nYou can configure WireGuard Portal using either environment variables or a yaml configuration file.\nThe filepath of the yaml configuration file defaults to **config.yml** in the working directory of the executable.\nIt is possible to override the configuration filepath using the environment variable **CONFIG_FILE**.\nFor example: `CONFIG_FILE=/home/test/config.yml ./wg-portal-amd64`.\n\n### Configuration Options\nThe following configuration options are available:\n\n| environment                | yaml                    | yaml_parent | default_value                                                                                                   | description                                                                                                                                       |\n|----------------------------|-------------------------|-------------|-----------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------|\n| LISTENING_ADDRESS          | listeningAddress        | core        | :8123                                                                                                           | The address on which the web server is listening. Optional IP address and port, e.g.: 127.0.0.1:8080.                                             |\n| EXTERNAL_URL               | externalUrl             | core        | http://localhost:8123                                                                                           | The external URL where the web server is reachable. This link is used in emails that are created by the WireGuard Portal.                         |\n| WEBSITE_TITLE              | title                   | core        | WireGuard VPN                                                                                                   | The website title.                                                                                                                                |\n| COMPANY_NAME               | company                 | core        | WireGuard Portal                                                                                                | The company name (for branding).                                                                                                                  |\n| MAIL_FROM                  | mailFrom                | core        | WireGuard VPN <noreply@company.com>                                                                             | The email address from which emails are sent.                                                                                                     |\n| LOGO_URL                   | logoUrl                 | core        | /img/header-logo.png                                                                                            | The logo displayed in the page's header.                                                                                                          |\n| ADMIN_USER                 | adminUser               | core        | admin@wgportal.local                                                                                            | The administrator user. Must be a valid email address.                                                                                            |\n| ADMIN_PASS                 | adminPass               | core        | wgportal                                                                                                        | The administrator password. If unchanged, a random password will be set on first startup.                                                         |\n| EDITABLE_KEYS              | editableKeys            | core        | true                                                                                                            | Allow to edit key-pairs in the UI.                                                                                                                |\n| CREATE_DEFAULT_PEER        | createDefaultPeer       | core        | false                                                                                                           | If an LDAP user logs in for the first time, a new WireGuard peer will be created on the WG_DEFAULT_DEVICE if this option is enabled.              |\n| SELF_PROVISIONING          | selfProvisioning        | core        | false                                                                                                           | Allow registered users to automatically create peers via the RESTful API.                                                                         |\n| WG_EXPORTER_FRIENDLY_NAMES | wgExporterFriendlyNames | core        | false                                                                                                           | Enable integration with [prometheus_wireguard_exporter friendly name](https://github.com/MindFlavor/prometheus_wireguard_exporter#friendly-tags). |\n| LDAP_ENABLED               | ldapEnabled             | core        | false                                                                                                           | Enable or disable the LDAP backend.                                                                                                               |\n| SESSION_SECRET             | sessionSecret           | core        | secret                                                                                                          | Use a custom secret to encrypt session data.                                                                                                      |\n| BACKGROUND_TASK_INTERVAL   | backgroundTaskInterval  | core        | 900                                                                                                             | The interval (in seconds) for the background tasks (like peer expiry check).                                                                      |\n| EXPIRY_REENABLE            | expiryReEnable          | core        | false                                                                                                           | Reactivate expired peers if the expiration date is in the future.                                                                                 |\n| DATABASE_TYPE              | typ                     | database    | sqlite                                                                                                          | Either mysql or sqlite.                                                                                                                           |\n| DATABASE_HOST              | host                    | database    |                                                                                                                 | The mysql server address.                                                                                                                         |\n| DATABASE_PORT              | port                    | database    |                                                                                                                 | The mysql server port.                                                                                                                            |\n| DATABASE_NAME              | database                | database    | data/wg_portal.db                                                                                               | For sqlite database: the database file-path, otherwise the database name.                                                                         |\n| DATABASE_USERNAME          | user                    | database    |                                                                                                                 | The mysql user.                                                                                                                                   |\n| DATABASE_PASSWORD          | password                | database    |                                                                                                                 | The mysql password.                                                                                                                               |\n| EMAIL_HOST                 | host                    | email       | 127.0.0.1                                                                                                       | The email server address.                                                                                                                         |\n| EMAIL_PORT                 | port                    | email       | 25                                                                                                              | The email server port.                                                                                                                            |\n| EMAIL_TLS                  | tls                     | email       | false                                                                                                           | Use STARTTLS. DEPRECATED: use EMAIL_ENCRYPTION instead.                                                                                           |\n| EMAIL_ENCRYPTION           | encryption              | email       | none                                                                                                            | Either none, tls or starttls.                                                                                                                     |\n| EMAIL_CERT_VALIDATION      | certcheck               | email       | false                                                                                                           | Validate the email server certificate.                                                                                                            |\n| EMAIL_USERNAME             | user                    | email       |                                                                                                                 | An optional username for SMTP authentication.                                                                                                     |\n| EMAIL_PASSWORD             | pass                    | email       |                                                                                                                 | An optional password for SMTP authentication.                                                                                                     |\n| EMAIL_AUTHTYPE             | auth                    | email       | plain                                                                                                           | Either plain, login or crammd5. If username and password are empty, this value is ignored.                                                        |\n| WG_DEVICES                 | devices                 | wg          | wg0                                                                                                             | A comma separated list of WireGuard devices.                                                                                                      |\n| WG_DEFAULT_DEVICE          | defaultDevice           | wg          | wg0                                                                                                             | This device is used for auto-created peers (if CREATE_DEFAULT_PEER is enabled).                                                                   |\n| WG_CONFIG_PATH             | configDirectory         | wg          | /etc/wireguard                                                                                                  | If set, interface configuration updates will be written to this path, filename: <devicename>.conf.                                                |\n| MANAGE_IPS                 | manageIPAddresses       | wg          | true                                                                                                            | Handle IP address setup of interface, only available on linux.                                                                                    |\n| USER_MANAGE_PEERS          | userManagePeers         | wg          | false                                                                                                           | Logged in user can create or update peers (partially).                                                                                            |\n| LDAP_URL                   | url                     | ldap        | ldap://srv-ad01.company.local:389                                                                               | The LDAP server url.                                                                                                                              |\n| LDAP_STARTTLS              | startTLS                | ldap        | true                                                                                                            | Use STARTTLS.                                                                                                                                     |\n| LDAP_CERT_VALIDATION       | certcheck               | ldap        | false                                                                                                           | Validate the LDAP server certificate.                                                                                                             |\n| LDAP_BASEDN                | dn                      | ldap        | DC=COMPANY,DC=LOCAL                                                                                             | The base DN for searching users.                                                                                                                  |\n| LDAP_USER                  | user                    | ldap        | company\\\\\\\\ldap_wireguard                                                                                       | The bind user.                                                                                                                                    |\n| LDAP_PASSWORD              | pass                    | ldap        | SuperSecret                                                                                                     | The bind password.                                                                                                                                |\n| LDAP_LOGIN_FILTER          | loginFilter             | ldap        | (&(objectClass=organizationalPerson)(mail={{login_identifier}})(!userAccountControl:1.2.840.113556.1.4.803:=2)) | {{login_identifier}} will be replaced with the login email address.                                                                               |\n| LDAP_SYNC_FILTER           | syncFilter              | ldap        | (&(objectClass=organizationalPerson)(!userAccountControl:1.2.840.113556.1.4.803:=2)(mail=*))                    | The filter string for the LDAP synchronization service.                                                                                           |\n| LDAP_ADMIN_GROUP           | adminGroup              | ldap        | CN=WireGuardAdmins,OU=_O_IT,DC=COMPANY,DC=LOCAL                                                                 | Users in this group are marked as administrators.                                                                                                 |\n| LDAP_ATTR_EMAIL            | attrEmail               | ldap        | mail                                                                                                            | User email attribute.                                                                                                                             |\n| LDAP_ATTR_FIRSTNAME        | attrFirstname           | ldap        | givenName                                                                                                       | User firstname attribute.                                                                                                                         |\n| LDAP_ATTR_LASTNAME         | attrLastname            | ldap        | sn                                                                                                              | User lastname attribute.                                                                                                                          |\n| LDAP_ATTR_PHONE            | attrPhone               | ldap        | telephoneNumber                                                                                                 | User phone number attribute.                                                                                                                      |\n| LDAP_ATTR_GROUPS           | attrGroups              | ldap        | memberOf                                                                                                        | User groups attribute.                                                                                                                            |\n| LDAP_CERT_CONN             | ldapCertConn            | ldap        | false                                                                                                           | Allow connection with certificate against LDAP server without user/password                                                                       |\n| LDAPTLS_CERT               | ldapTlsCert             | ldap        |                                                                                                                 | The LDAP cert's path                                                                                                                              |\n| LDAPTLS_KEY                | ldapTlsKey              | ldap        |                                                                                                                 | The LDAP key's path                                                                                                                               |\n| LOG_LEVEL                  |                         |             | debug                                                                                                           | Specify log level, one of: trace, debug, info, off.                                                                                               |\n| LOG_JSON                   |                         |             | false                                                                                                           | Format log output as JSON.                                                                                                                        |\n| LOG_COLOR                  |                         |             | true                                                                                                            | Colorize log output.                                                                                                                              |\n| CONFIG_FILE                |                         |             | config.yml                                                                                            ",
  "permissions": {
    "read": true,
    "write": false,
    "admin": false
  },
  "media_types": [
    "application/vnd.docker.container.image.v1+json",
    "application/vnd.docker.distribution.manifest.list.v2+json"
  ],
  "content_types": [
    "image"
  ]
}