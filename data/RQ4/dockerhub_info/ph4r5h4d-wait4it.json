{
  "user": "ph4r5h4d",
  "name": "wait4it",
  "namespace": "ph4r5h4d",
  "repository_type": "image",
  "status": 1,
  "status_description": "active",
  "description": "A simple go application to test whether a port or a service is ready or not",
  "is_private": false,
  "is_automated": false,
  "can_edit": false,
  "star_count": 0,
  "pull_count": 107190,
  "last_updated": "2021-12-04T13:00:02.082937Z",
  "date_registered": "2020-02-09T17:08:32.981753Z",
  "collaborator_count": 0,
  "affiliation": null,
  "hub_user": "ph4r5h4d",
  "has_starred": false,
  "full_description": "# wait4it\n \n![LICENSE](https://img.shields.io/github/workflow/status/ph4r5h4d/wait4it/Wait4it&#32;CI?style=for-the-badge) [![Docker Pull](https://img.shields.io/docker/pulls/ph4r5h4d/wait4it?style=for-the-badge)](https://hub.docker.com/r/ph4r5h4d/wait4it)  ![GO Version](https://img.shields.io/github/go-mod/go-version/ph4r5h4d/wait4it?style=for-the-badge) ![TAG](https://img.shields.io/github/v/tag/ph4r5h4d/wait4it?style=for-the-badge) ![LICENSE](https://img.shields.io/github/license/ph4r5h4d/wait4it?style=for-the-badge)\n  \nA simple go application to test whether a port is ready to accept a connection or check \nMySQL, PostgreSQL, MongoDB or Redis server is ready or not, Also you can do Http call and check \nthe response code and text in response.  \nIt also supports **timeout** so it can wait for a particular time and then fail.\n\n## Supported Modules\n* TCP port\n* MySQL\n* PostgresQL\n* Http\n* MongoDB\n* Redis\n* RabbitMQ\n* Memcached\n* ElasticSearch\n* Aerospike\n\n## Install\nYou can download the latest [release](https://github.com/ph4r5h4d/wait4it/releases), or you can build it yourself.\nTo build just run `go run main.go build` it's using the [mage](https://magefile.org) for building.\n\n## Configuration\n### Environment variables\nThe following environment variables are supported:\n\n* `W4IT_TYPE` (check type [http, tcp, mysql, postgres])\n* `W4IT_TIMEOUT` (timeout in seconds)\n* `W4IT_HOST` (the host to check)\n* `W4IT_PORT` (port to check on the host)\n* `W4IT_USERNAME` (username for the services that needs username)\n* `W4IT_PASSWORD` (password for the services that needs password)\n* `W4IT_DBNAME` (database name for MySQL or PostgreSQL)\n* `W4IT_SSL_MODE` (whether to enable or disable ssl-mode for Postgres [disable, enable])\n* `W4IT_OPERATION_MODE` (to select operation mode for redis [standalone, cluster])\n* `W4IT_HTTP_STATUS_CODE` (for Http check, which status code to expect)\n* `W4IT_HTTP_TEXT` (for Http check, find substring inside the response)\n* `W4IT_HTTP_FOLLOW_REDIRECT` (Whether to follow the redirect while doing the HTTP check [true, false] default is *true*)\n\n### Command Line Args\nThe following command-line flags are supported\n\n* `-type` (check type [http, tcp, mysql, postgres])\n* `-h` (the host to check, default is 127.0.0.1)\n* `-p` (port to check on the host) \n* `-t` (timeout in seconds, time to wait before considering the operation as failed. default is 30)\n* `-u` (username for the services that needs username)\n* `-P` (password for the services that needs password)\n* `-n` (database name for MySQL or PostgreSQL)  \n* `-ssl` (whether to enable or disable ssl-mode for Postgres [disable, enable])  \n* `-operation-mode` (to select operation mode for redis [standalone, cluster])  \n* `-http-status` (for Http check, which status code to expect)  \n* `-http-text` (for Http check, find substring inside the response)  \n* `-http-follow-redirect` (Whether to follow the redirect while doing the HTTP check [true, false], default is *true*)  \n\n### Sample\nCheck a TCP port  \n```bash\n./wait4it -type=tcp -h=127.0.0.1 -p=8080 -t=60\n``` \n\nCheck a MySQL instance\n```bash\n./wait4it -type=mysql -h=127.0.0.1 -p=3306 -t=60 -u=root -P=secret -n=app \n```\nCheck a PostgresQL instance\n```bash\n./wait4it -type=postgres -h=127.0.0.1 -p=5432 -t=60 -u=postgres -P=secret -ssl=disable\n```\n\nCheck HTTP response and text\n```bash\n./wait4it -type=http -h=https://farshad.nematdoust.com -t=60 -status-code=200 -http-text=\"Software Engineer\" \n./wait4it -type=http -h=https://nematdoust.com -t=60 -status-code=301 -W4IT_HTTP_FOLLOW_REDIRECT=false \n```\n\nCheck a MongoDB instance\n```bash\n./wait4it -type=mongo -p=27017 -t=60  -u=mongoadmin -P=secret -h=127.0.0.1\n```\n\nCheck a Redis instance\n```bash\n./wait4it -type=redis -p=6379 -t=60 -P=secret -h=127.0.0.1\n\n# if your redis is not password protected\n./wait4it -type=redis -p=6379 -t=60 -h=127.0.0.1\n\n# if you use redis cluster\n./wait4it -type=redis -p=6379 -t=60 -P=secret -operation-mode=cluster -h=127.0.0.1\n```\n\nCheck a RabbitMQ instance\n```bash\n./wait4it -type=rabbitmq -p=5267 -t=60  -u=guest -P=guest -h=127.0.0.1\n```\n\nCheck a Memcached instance\n```bash\n./wait4it -type=memcached -h=127.0.0.1 -p=11211 -t=60\n```\n\nCheck ElasticSearch instance\n```bash\n./wait4it -type=elasticsearch -h=http://127.0.0.1 -p=9200 -t=60\n```\n\nCheck a Aerospike instance\n```bash\n./wait4it -type=aerospike -h=127.0.0.1 -p=3000 -t=60\n``` \n\n### Docker\nYou can run this `wait4it` inside a docker container, and it's possible to run this container as init container inside\nK8s and Openshift.  \nYou can use the following image in Docker Hub:  \n`docker pull ph4r5h4d/wait4it`\n\nInside container you can do the following:  \n\n#### Sample\nCheck a TCP port  \n```bash\ndocker run ph4r5h4d/wait4it -type=tcp -h=127.0.0.1 -p=8080 -t=60\n``` \n\nCheck a MySQL instance\n```bash\ndocker run ph4r5h4d/wait4it -type=mysql -h=127.0.0.1 -p=3306 -t=60 -u=root -P=secret -n=app \n```\n\nCheck a PostgresQL instance\n```bash\ndocker run ph4r5h4d/wait4it -type=postgres -h=127.0.0.1 -p=5432 -t=60 -u=postgres -P=secret -ssl=disable\n```\n\nCheck HTTP response and text\n```bash\ndocker run ph4r5h4d/wait4it -type=http -h=https://farshad.nematdoust.com -t=60 -status-code=200 -http-text=\"Software Engineer\" \ndocker run ph4r5h4d/wait4it -type=http -type=http -h=https://nematdoust.com -t=60 -status-code=301 -W4IT_HTTP_FOLLOW_REDIRECT=false  \n```\n\nCheck a MongoDB instance\n```bash\ndocker run ph4r5h4d/wait4it -type=mongo -p=32768 -t=60  -u=mongoadmin -P=secret -h=127.0.0.1\n```\n\nCheck a RabbitMQ instance\n```bash\ndocker run ph4r5h4d/wait4it -type=rabbitmq -p=5267 -t=60  -u=guest -P=guest -h=127.0.0.1\n```\n\nCheck a Redis instance\n```bash\ndocker run ph4r5h4d/wait4it -type=redis -p=6379 -t=60 -P=secret -h=127.0.0.1\n\n# if your redis is not password protected\ndocker run ph4r5h4d/wait4it -type=redis -p=6379 -t=60 -h=127.0.0.1\n\n# if you use redis cluster\ndocker run ph4r5h4d/wait4it -type=redis -p=6379 -t=60 -P=secret -operation-mode=cluster -h=127.0.0.1\n```\n\nCheck a Memcached instance\n```bash\ndocker run ph4r5h4d/wait4it -type=memcached -h=127.0.0.1 -p=11211\n```\n\nCheck a ElasticSearch instance\n```bash\ndocker run ph4r5h4d/wait4it -type=elasticsearch -h=http://127.0.0.1 -p=9200\n```\n\nCheck a Aerospike instance\n```bash\ndocker run ph4r5h4d/wait4it -type=aerospike -h=127.0.0.1 -p=3000 -t=60\n``` \n\n## Notes\n#### Configuration\n* note that environment variables have higher priority than command-line arguments. \nThis means if you define both `W4IT_TYPE` and `-type`, the application takes the value of the environment variable into account.\n\n#### Exit codes\n* 0: connection established successfully\n* 1: timed out\n* 2: mostly means a validation error or something wrong with the input data\n\n#### Http check\n* for the Http check if you do not define status code it will check for 200 status code\n* if `http-text` is not defined then wait4it will check the status code\n\n#### Postgres check\n* if `ssl` is not defined then it's `disable` by default\n\n#### MongoDB check\n* for the moment only username/password authentication mechanism is supported.\n\n#### Redis check\n* if `operation-mode` is not defined then it's `standalone` by default. Redis Sentinel is not supported yet.\n* this version can only check one host within Redis cluster, using multiple hosts to check cluster status for Redis will be added in the next version.\n\n#### Memcached check\n* for the moment multiple hosts and cluster checks are not supported.\n\n#### ElasticSearch\n* for the moment multiple hosts and cluster checks are not supported.\n* as you know, username/password authentication mechanism is only supported along with the X-Pack extension and if the X-Pack extension wasn't activated, filling username/password won't have any effect. According to these reasons, username/password isn't required.",
  "permissions": {
    "read": true,
    "write": false,
    "admin": false
  },
  "media_types": [
    "application/vnd.docker.container.image.v1+json"
  ],
  "content_types": [
    "image"
  ]
}