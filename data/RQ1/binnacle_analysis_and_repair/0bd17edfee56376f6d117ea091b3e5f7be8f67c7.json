{
  "startTime": 1674249781745,
  "endTime": 1674249782138,
  "originalSmells": [
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 25,
        "lineEnd": 26,
        "columnStart": 4,
        "columnEnd": 58
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 25,
        "lineEnd": 26,
        "columnStart": 4,
        "columnEnd": 58
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM ubuntu:xenial\n\nLABEL maintainer=\"Alexander Trost <galexrt@googlemail.com>\"\n\nENV LANG=\"en_US.UTF-8\" \\\n    LC_ALL=\"en_US.UTF-8 \" \\\n    SINUS_USER=\"3000\" \\\n    SINUS_GROUP=\"3000\" \\\n    SINUS_DIR=\"/sinusbot\" \\\n    YTDL_BIN=\"/usr/local/bin/youtube-dl\" \\\n    YTDL_VERSION=\"latest\" \\\n    TS3_VERSION=\"3.2.3\" \\\n    TS3_DL_ADDRESS=\"http://dl.4players.de/ts/releases/\" \\\n    SINUSBOT_DL_URL=\"https://www.sinusbot.com/dl/sinusbot.current.tar.bz2\"\n    # That currently points to the latest beta version of Sinusbot\n\nENV SINUS_DATA=\"$SINUS_DIR/data\" \\\n    SINUS_DATA_SCRIPTS=\"$SINUS_DIR/scripts\" \\\n    SINUS_CONFIG=\"$SINUS_DIR/config\" \\\n    TS3_DIR=\"$SINUS_DIR/TeamSpeak3-Client-linux_amd64\"\n\nRUN groupadd -g \"$SINUS_GROUP\" sinusbot && \\\n    useradd -u \"$SINUS_USER\" -g \"$SINUS_GROUP\" -d \"$SINUS_DIR\" sinusbot && \\\n    apt-get -q update -y && \\\n    apt-get -q upgrade -y && \\\n    apt-get -q --no-install-recommends install -y x11vnc xvfb libxcursor1 ca-certificates bzip2 libnss3 libegl1-mesa x11-xkb-utils libasound2 \\\n        libglib2.0-0 libnss3 locales wget sudo python less && \\\n    locale-gen --purge \"$LANG\" && \\\n    update-locale LANG=\"$LANG\" && \\\n    echo \"LC_ALL=en_US.UTF-8\" >> /etc/default/locale && \\\n    echo \"LANG=en_US.UTF-8\" >> /etc/default/locale && \\\n    update-ca-certificates && \\\n    mkdir -p \"$SINUS_DIR\" && \\\n    wget -qO- \"$SINUSBOT_DL_URL\" | \\\n    tar -xjf- -C \"$SINUS_DIR\" && \\\n    mv \"$SINUS_DATA_SCRIPTS\" \"$SINUS_DATA_SCRIPTS-orig\" && \\\n    mkdir -p \"$SINUS_CONFIG\" \"$SINUS_DATA_SCRIPTS\" && \\\n    cp -f \"$SINUS_DIR/config.ini.dist\" \"$SINUS_DIR/config.ini\" && \\\n    sed -i 's|^DataDir.*|DataDir = '\"$SINUS_DATA\"'|g' \"$SINUS_DIR/config.ini\" && \\\n    mkdir -p \"$TS3_DIR\" && \\\n    cd \"$SINUS_DIR\" || exit 1 && \\\n    wget -q -O \"TeamSpeak3-Client-linux_amd64-$TS3_VERSION.run\" \\\n        \"$TS3_DL_ADDRESS/$TS3_VERSION/TeamSpeak3-Client-linux_amd64-$TS3_VERSION.run\" && \\\n    chmod 755 \"TeamSpeak3-Client-linux_amd64-$TS3_VERSION.run\" && \\\n    yes | \"./TeamSpeak3-Client-linux_amd64-$TS3_VERSION.run\" && \\\n    rm -f \"TeamSpeak3-Client-linux_amd64-$TS3_VERSION.run\" && \\\n    rm TeamSpeak3-Client-linux_amd64/xcbglintegrations/libqxcb-glx-integration.so && \\\n    mkdir -p TeamSpeak3-Client-linux_amd64/plugins && \\\n    cp -f \"$SINUS_DIR/plugin/libsoundbot_plugin.so\" \"$TS3_DIR/plugins/\" && \\\n    sed -i \"s|^TS3Path.*|TS3Path = \\\"$TS3_DIR/ts3client_linux_amd64\\\"|g\" \"$SINUS_DIR/config.ini\" && \\\n    wget -q -O \"$YTDL_BIN\" \"https://yt-dl.org/downloads/$YTDL_VERSION/youtube-dl\" && \\\n    chmod a+rx \"$YTDL_BIN\" && \\\n    \"$YTDL_BIN\" -U && \\\n    echo \"YoutubeDLPath = \\\"$YTDL_BIN-speedpatched\\\"\" >> \"$SINUS_DIR/config.ini\" && \\\n    chown -fR sinusbot:sinusbot \"$SINUS_DIR\" && \\\n    apt-get -q clean all && \\\n    rm -rf /tmp/* /var/tmp/* && rm -rf /var/lib/apt/lists/*;\n\nCOPY entrypoint.sh /entrypoint.sh\nCOPY youtube-dl-speedpatched /usr/local/bin/youtube-dl-speedpatched\n\nUSER sinusbot\nWORKDIR \"$SINUS_DIR\"\n\nVOLUME [\"$SINUS_DATA\", \"$SINUS_DATA_SCRIPTS\", \"$SINUS_CONFIG\"]\n\nEXPOSE 8087\n\nENTRYPOINT [\"/entrypoint.sh\"]\n"
}