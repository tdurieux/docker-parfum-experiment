{
  "startTime": 1674242742737,
  "endTime": 1674242742997,
  "originalSmells": [
    {
      "rule": "wgetUseHttpsUrl",
      "position": {
        "lineStart": 31,
        "lineEnd": 31,
        "columnStart": 33,
        "columnEnd": 93
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 10,
        "lineEnd": 10,
        "columnStart": 4,
        "columnEnd": 37
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 14,
        "lineEnd": 14,
        "columnStart": 4,
        "columnEnd": 26
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 15,
        "lineEnd": 15,
        "columnStart": 4,
        "columnEnd": 23
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 28,
        "lineEnd": 28,
        "columnStart": 96,
        "columnEnd": 127
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 31,
        "lineEnd": 31,
        "columnStart": 97,
        "columnEnd": 129
      }
    },
    {
      "rule": "aptGetInstallUseY",
      "position": {
        "lineStart": 39,
        "lineEnd": 39,
        "columnStart": 4,
        "columnEnd": 39
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 6,
        "lineEnd": 6,
        "columnStart": 4,
        "columnEnd": 78
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 9,
        "lineEnd": 9,
        "columnStart": 4,
        "columnEnd": 40
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 13,
        "lineEnd": 13,
        "columnStart": 4,
        "columnEnd": 42
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 39,
        "lineEnd": 39,
        "columnStart": 4,
        "columnEnd": 39
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 47,
        "lineEnd": 47,
        "columnStart": 4,
        "columnEnd": 43
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 6,
        "lineEnd": 6,
        "columnStart": 4,
        "columnEnd": 78
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 9,
        "lineEnd": 9,
        "columnStart": 4,
        "columnEnd": 40
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 13,
        "lineEnd": 13,
        "columnStart": 4,
        "columnEnd": 42
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 39,
        "lineEnd": 39,
        "columnStart": 4,
        "columnEnd": 39
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 43,
        "lineEnd": 43,
        "columnStart": 4,
        "columnEnd": 25
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 47,
        "lineEnd": 47,
        "columnStart": 4,
        "columnEnd": 43
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 6,
        "lineEnd": 6,
        "columnStart": 4,
        "columnEnd": 78
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 9,
        "lineEnd": 9,
        "columnStart": 4,
        "columnEnd": 40
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 13,
        "lineEnd": 13,
        "columnStart": 4,
        "columnEnd": 42
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 39,
        "lineEnd": 39,
        "columnStart": 4,
        "columnEnd": 39
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 47,
        "lineEnd": 47,
        "columnStart": 4,
        "columnEnd": 43
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 6,
        "lineEnd": 6,
        "columnStart": 4,
        "columnEnd": 102
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 9,
        "lineEnd": 9,
        "columnStart": 4,
        "columnEnd": 64
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 13,
        "lineEnd": 13,
        "columnStart": 4,
        "columnEnd": 66
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 39,
        "lineEnd": 39,
        "columnStart": 4,
        "columnEnd": 66
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 43,
        "lineEnd": 43,
        "columnStart": 4,
        "columnEnd": 25
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 47,
        "lineEnd": 47,
        "columnStart": 4,
        "columnEnd": 67
      }
    }
  ],
  "repairedDockerfile": "# Zika-seq Docker container adapted from Nick Loman's <n.j.loman@bham.ac.uk> zibra/zibra\nFROM ubuntu:16.04\nMAINTAINER Trevor Bedford\n\n# base software\nRUN apt-get update\nRUN apt-get install --no-install-recommends -y git build-essential wget zlib1g-dev vim libncurses5-dev && rm -rf /var/lib/apt/lists/*;\n\n# python and python dependencies\nRUN apt-get install --no-install-recommends -y python python-pip && rm -rf /var/lib/apt/lists/*;\nRUN pip install --no-cache-dir pysam pyvcf biopython\n\n# Add Python3 for snakemake and plot_coverage.py for illumina run\nRUN apt-get install --no-install-recommends -y python3 python3-pip && rm -rf /var/lib/apt/lists/*;\nRUN pip3 install --no-cache-dir snakemake\nRUN pip3 install --no-cache-dir pandas\n\n# create working directory\nRUN mkdir /zibra\nWORKDIR /zibra/\n\n# nanopolish\nRUN git clone --recursive https://github.com/jts/nanopolish.git && cd nanopolish && make -j8\n\n# BWA\nRUN git clone --recursive https://github.com/lh3/bwa && cd bwa && make -j8\n\n# samtools\nRUN wget https://github.com/samtools/samtools/releases/download/1.3.1/samtools-1.3.1.tar.bz2 && tar xvjf samtools-1.3.1.tar.bz2 && cd samtools-1.3.1 && make && rm samtools-1.3.1.tar.bz2\n\n# R9.4 models for nanopolish\nRUN mkdir models && cd models && wget https://s3.climb.ac.uk/nanopore/nanopolish_r94models.tar && tar xvf nanopolish_r94models.tar && rm nanopolish_r94models.tar\n\n# Smith-Waterman library\nRUN git clone https://github.com/mengyao/Complete-Striped-Smith-Waterman-Library.git && cd Complete-Striped-Smith-Waterman-Library/src && make\n\n# basecalling setup\nRUN wget -O- https://mirror.oxfordnanoportal.com/apt/ont-repo.pub | apt-key add -\nRUN echo \"deb http://mirror.oxfordnanoportal.com/apt trusty-stable non-free\" | tee /etc/apt/sources.list.d/nanoporetech.sources.list\nRUN apt-get install -y --no-install-recommends apt-transport-https && rm -rf /var/lib/apt/lists/*;\nRUN apt-get update\nCOPY basecall/python3-ont-albacore_1.0.4-1-xenial_all.deb /tmp/\nRUN dpkg -i /tmp/python3-ont-albacore_1.0.4-1-xenial_all.deb || true\nRUN apt-get -y -f install\nRUN dpkg -i /tmp/python3-ont-albacore_1.0.4-1-xenial_all.deb\n\n# R\nRUN apt-get install --no-install-recommends -y r-base --fix-missing && rm -rf /var/lib/apt/lists/*;\nRUN su - -c \"R -e \\\"install.packages('argparse', repos = 'http://cran.rstudio.com/')\\\"\"\nRUN su - -c \"R -e \\\"install.packages('reshape', repos = 'http://cran.rstudio.com/')\\\"\"\n\n# zibra pipeline\nRUN git clone https://github.com/blab/zika-seq\nWORKDIR /zibra/zika-seq/pipeline/\n\n# update\nADD https://script.google.com/macros/s/AKfycbyd5AcbAnWi2Yn0xhFRbyzS4qMq1VucMVgVvhul5XqS9HkAyJY/exec /tmp/bustcache\nRUN git pull\n\n# environmental variables\nENV PATH $PATH:/zibra/nanopolish:/zibra/bwa:/zibra/samtools-1.3.1:/zibra/zika-pipeline/scripts\nENV PYTHONPATH /zibra/Complete-Striped-Smith-Waterman-Library/src\nENV LD_LIBRARY_PATH /zibra/Complete-Striped-Smith-Waterman-Library/src\n"
}