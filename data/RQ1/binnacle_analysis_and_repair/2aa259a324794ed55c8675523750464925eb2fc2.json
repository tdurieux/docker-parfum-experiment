{
  "startTime": 1674243909425,
  "endTime": 1674243910106,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 47,
        "lineEnd": 47,
        "columnStart": 70,
        "columnEnd": 116
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 48,
        "lineEnd": 48,
        "columnStart": 70,
        "columnEnd": 116
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 49,
        "lineEnd": 49,
        "columnStart": 72,
        "columnEnd": 119
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 50,
        "lineEnd": 50,
        "columnStart": 72,
        "columnEnd": 119
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 51,
        "lineEnd": 51,
        "columnStart": 72,
        "columnEnd": 119
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 52,
        "lineEnd": 52,
        "columnStart": 72,
        "columnEnd": 119
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 53,
        "lineEnd": 53,
        "columnStart": 66,
        "columnEnd": 110
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 54,
        "lineEnd": 54,
        "columnStart": 66,
        "columnEnd": 110
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 55,
        "lineEnd": 55,
        "columnStart": 66,
        "columnEnd": 110
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 56,
        "lineEnd": 56,
        "columnStart": 66,
        "columnEnd": 110
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 57,
        "lineEnd": 57,
        "columnStart": 66,
        "columnEnd": 110
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 60,
        "lineEnd": 60,
        "columnStart": 4,
        "columnEnd": 119
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 61,
        "lineEnd": 61,
        "columnStart": 4,
        "columnEnd": 119
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 62,
        "lineEnd": 62,
        "columnStart": 4,
        "columnEnd": 119
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 63,
        "lineEnd": 63,
        "columnStart": 4,
        "columnEnd": 119
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 64,
        "lineEnd": 64,
        "columnStart": 4,
        "columnEnd": 110
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 65,
        "lineEnd": 65,
        "columnStart": 4,
        "columnEnd": 110
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 66,
        "lineEnd": 66,
        "columnStart": 4,
        "columnEnd": 110
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 67,
        "lineEnd": 67,
        "columnStart": 4,
        "columnEnd": 110
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 68,
        "lineEnd": 68,
        "columnStart": 4,
        "columnEnd": 110
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 36,
        "lineEnd": 36,
        "columnStart": 4,
        "columnEnd": 88
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 36,
        "lineEnd": 36,
        "columnStart": 92,
        "columnEnd": 129
      }
    },
    {
      "rule": "aptGetInstallUseY",
      "position": {
        "lineStart": 75,
        "lineEnd": 75,
        "columnStart": 4,
        "columnEnd": 24
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 34,
        "lineEnd": 34,
        "columnStart": 18,
        "columnEnd": 190
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 75,
        "lineEnd": 75,
        "columnStart": 4,
        "columnEnd": 24
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 75,
        "lineEnd": 75,
        "columnStart": 4,
        "columnEnd": 24
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 34,
        "lineEnd": 34,
        "columnStart": 18,
        "columnEnd": 190
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 75,
        "lineEnd": 75,
        "columnStart": 4,
        "columnEnd": 24
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 75,
        "lineEnd": 75,
        "columnStart": 4,
        "columnEnd": 51
      }
    }
  ],
  "repairedDockerfile": "# Licensed to the Apache Software Foundation (ASF) under one or more\n# contributor license agreements.  See the NOTICE file distributed with\n# this work for additional information regarding copyright ownership.\n# The ASF licenses this file to You under the Apache License, Version 2.0\n# (the \"License\"); you may not use this file except in compliance with\n# the License.  You may obtain a copy of the License at\n#\n#    http://www.apache.org/licenses/LICENSE-2.0\n#\n# Unless required by applicable law or agreed to in writing, software\n# distributed under the License is distributed on an \"AS IS\" BASIS,\n# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n# See the License for the specific language governing permissions and\n# limitations under the License.\n\nARG jdk_version=openjdk:8\nFROM $jdk_version\n\nMAINTAINER Apache Kafka dev@kafka.apache.org\nVOLUME [\"/opt/kafka-dev\"]\n\n# Set the timezone.\nENV TZ=\"/usr/share/zoneinfo/America/Los_Angeles\"\n\n# Do not ask for confirmations when running apt-get, etc.\nENV DEBIAN_FRONTEND noninteractive\n\n# Set the ducker.creator label so that we know that this is a ducker image.  This will make it\n# visible to 'ducker purge'.  The ducker.creator label also lets us know what UNIX user built this\n# image.\nARG ducker_creator=default\nLABEL ducker.creator=$ducker_creator\n\n# Update Linux and install necessary utilities.\nRUN apt update && apt install --no-install-recommends -y sudo netcat iptables rsync unzip wget curl jq coreutils openssh-server net-tools vim python-pip python-dev libffi-dev libssl-dev cmake pkg-config libfuse-dev && apt-get -y clean && rm -rf /var/lib/apt/lists/*;\nRUN python -m pip install -U pip==9.0.3;\nRUN pip install --no-cache-dir --upgrade cffi virtualenv pyasn1 boto3 pycrypto pywinrm ipaddress enum34 && pip install --no-cache-dir --upgrade ducktape==0.7.5\n\n# Set up ssh\nCOPY ./ssh-config /root/.ssh/config\n# NOTE: The paramiko library supports the PEM-format private key, but does not support the RFC4716 format.\nRUN ssh-keygen -m PEM -q -t rsa -N '' -f /root/.ssh/id_rsa && cp -f /root/.ssh/id_rsa.pub /root/.ssh/authorized_keys\nRUN echo 'PermitUserEnvironment yes' >> /etc/ssh/sshd_config\n\n# Install binary test dependencies.\n# we use the same versions as in vagrant/base.sh\nARG KAFKA_MIRROR=\"https://s3-us-west-2.amazonaws.com/kafka-packages\"\nRUN mkdir -p \"/opt/kafka-0.8.2.2\" && chmod a+rw /opt/kafka-0.8.2.2 && curl -f -s \"$KAFKA_MIRROR/kafka_2.11-0.8.2.2.tgz\" | tar xz --strip-components=1 -C \"/opt/kafka-0.8.2.2\"\nRUN mkdir -p \"/opt/kafka-0.9.0.1\" && chmod a+rw /opt/kafka-0.9.0.1 && curl -f -s \"$KAFKA_MIRROR/kafka_2.11-0.9.0.1.tgz\" | tar xz --strip-components=1 -C \"/opt/kafka-0.9.0.1\"\nRUN mkdir -p \"/opt/kafka-0.10.0.1\" && chmod a+rw /opt/kafka-0.10.0.1 && curl -f -s \"$KAFKA_MIRROR/kafka_2.11-0.10.0.1.tgz\" | tar xz --strip-components=1 -C \"/opt/kafka-0.10.0.1\"\nRUN mkdir -p \"/opt/kafka-0.10.1.1\" && chmod a+rw /opt/kafka-0.10.1.1 && curl -f -s \"$KAFKA_MIRROR/kafka_2.11-0.10.1.1.tgz\" | tar xz --strip-components=1 -C \"/opt/kafka-0.10.1.1\"\nRUN mkdir -p \"/opt/kafka-0.10.2.2\" && chmod a+rw /opt/kafka-0.10.2.2 && curl -f -s \"$KAFKA_MIRROR/kafka_2.11-0.10.2.2.tgz\" | tar xz --strip-components=1 -C \"/opt/kafka-0.10.2.2\"\nRUN mkdir -p \"/opt/kafka-0.11.0.3\" && chmod a+rw /opt/kafka-0.11.0.3 && curl -f -s \"$KAFKA_MIRROR/kafka_2.11-0.11.0.3.tgz\" | tar xz --strip-components=1 -C \"/opt/kafka-0.11.0.3\"\nRUN mkdir -p \"/opt/kafka-1.0.2\" && chmod a+rw /opt/kafka-1.0.2 && curl -f -s \"$KAFKA_MIRROR/kafka_2.11-1.0.2.tgz\" | tar xz --strip-components=1 -C \"/opt/kafka-1.0.2\"\nRUN mkdir -p \"/opt/kafka-1.1.1\" && chmod a+rw /opt/kafka-1.1.1 && curl -f -s \"$KAFKA_MIRROR/kafka_2.11-1.1.1.tgz\" | tar xz --strip-components=1 -C \"/opt/kafka-1.1.1\"\nRUN mkdir -p \"/opt/kafka-2.0.1\" && chmod a+rw /opt/kafka-2.0.1 && curl -f -s \"$KAFKA_MIRROR/kafka_2.12-2.0.1.tgz\" | tar xz --strip-components=1 -C \"/opt/kafka-2.0.1\"\nRUN mkdir -p \"/opt/kafka-2.1.1\" && chmod a+rw /opt/kafka-2.1.1 && curl -f -s \"$KAFKA_MIRROR/kafka_2.12-2.1.1.tgz\" | tar xz --strip-components=1 -C \"/opt/kafka-2.1.1\"\nRUN mkdir -p \"/opt/kafka-2.2.0\" && chmod a+rw /opt/kafka-2.2.0 && curl -f -s \"$KAFKA_MIRROR/kafka_2.12-2.2.0.tgz\" | tar xz --strip-components=1 -C \"/opt/kafka-2.2.0\"\n\n# Streams test dependencies\nRUN curl -f -s \"$KAFKA_MIRROR/kafka-streams-0.10.0.1-test.jar\" -o /opt/kafka-0.10.0.1/libs/kafka-streams-0.10.0.1-test.jar\nRUN curl -f -s \"$KAFKA_MIRROR/kafka-streams-0.10.1.1-test.jar\" -o /opt/kafka-0.10.1.1/libs/kafka-streams-0.10.1.1-test.jar\nRUN curl -f -s \"$KAFKA_MIRROR/kafka-streams-0.10.2.2-test.jar\" -o /opt/kafka-0.10.2.2/libs/kafka-streams-0.10.2.2-test.jar\nRUN curl -f -s \"$KAFKA_MIRROR/kafka-streams-0.11.0.3-test.jar\" -o /opt/kafka-0.11.0.3/libs/kafka-streams-0.11.0.3-test.jar\nRUN curl -f -s \"$KAFKA_MIRROR/kafka-streams-1.0.2-test.jar\" -o /opt/kafka-1.0.2/libs/kafka-streams-1.0.2-test.jar\nRUN curl -f -s \"$KAFKA_MIRROR/kafka-streams-1.1.1-test.jar\" -o /opt/kafka-1.1.1/libs/kafka-streams-1.1.1-test.jar\nRUN curl -f -s \"$KAFKA_MIRROR/kafka-streams-2.0.1-test.jar\" -o /opt/kafka-2.0.1/libs/kafka-streams-2.0.1-test.jar\nRUN curl -f -s \"$KAFKA_MIRROR/kafka-streams-2.1.1-test.jar\" -o /opt/kafka-2.1.1/libs/kafka-streams-2.1.1-test.jar\nRUN curl -f -s \"$KAFKA_MIRROR/kafka-streams-2.2.0-test.jar\" -o /opt/kafka-2.2.0/libs/kafka-streams-2.2.0-test.jar\n\n# The version of Kibosh to use for testing.\n# If you update this, also update vagrant/base.sy\nARG KIBOSH_VERSION=\"d85ac3ec44be0700efe605c16289fd901cfdaa13\"\n\n# Install Kibosh\nRUN apt-get install -y --no-install-recommends fuse && rm -rf /var/lib/apt/lists/*;\nRUN cd /opt && git clone -q  https://github.com/confluentinc/kibosh.git && cd \"/opt/kibosh\" && git reset --hard $KIBOSH_VERSION && mkdir \"/opt/kibosh/build\" && cd \"/opt/kibosh/build\" && ../configure && make -j 2\n\n# Set up the ducker user.\nRUN useradd -ms /bin/bash ducker && mkdir -p /home/ducker/ && rsync -aiq /root/.ssh/ /home/ducker/.ssh && chown -R ducker /home/ducker/ /mnt/ /var/log/ && echo \"PATH=$(runuser -l ducker -c 'echo $PATH'):$JAVA_HOME/bin\" >> /home/ducker/.ssh/environment && echo 'PATH=$PATH:'\"$JAVA_HOME/bin\" >> /home/ducker/.profile && echo 'ducker ALL=(ALL) NOPASSWD: ALL' >> /etc/sudoers\nUSER ducker\n\nCMD sudo service ssh start && tail -f /dev/null\n"
}