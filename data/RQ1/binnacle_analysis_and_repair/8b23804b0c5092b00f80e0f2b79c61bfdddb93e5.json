{
  "startTime": 1674250909716,
  "endTime": 1674250909826,
  "originalSmells": [
    {
      "rule": "yumInstallRmVarCacheYum",
      "position": {
        "lineStart": 8,
        "lineEnd": 8,
        "columnStart": 4,
        "columnEnd": 49
      }
    },
    {
      "rule": "yumInstallRmVarCacheYum",
      "position": {
        "lineStart": 14,
        "lineEnd": 16,
        "columnStart": 4,
        "columnEnd": 51
      }
    },
    {
      "rule": "yumInstallRmVarCacheYum",
      "position": {
        "lineStart": 19,
        "lineEnd": 19,
        "columnStart": 4,
        "columnEnd": 49
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM centos:7\nMAINTAINER Sergey Yakubov <sergey.yakubov@desy.de>\n\n#\n# An centos-based image with ssh,infiniband and openmpi installed. Allows passwordless ssh login for DOCKER_USER\n#\n\n# install ssh\nRUN yum install -y openssh-clients openssh-server && ssh-keygen -A && \\\n\tsed -i 's/required\\(.*pam_loginuid\\)/optional\\1/' /etc/pam.d/sshd && rm -rf /var/cache/yum\n\n\n\n# install infiniband\nRUN yum install -y ibibverbs-utils libibverbs-devel libibverbs-devel-static libmlx4 \\\n  libmlx5 ibutils libibcm libibcommon libibmad libibumad rdma librdmacm-utils \\\n\tlibrdmacm-devel librdmacm libibumad-devel perftest && rm -rf /var/cache/yum\n\n# install mpi\nRUN yum install -y wget make gcc-c++ gcc-gfortran && rm -rf /var/cache/yum\nADD openmpi_install.sh /opt/openmpi_install.sh\nRUN [\"bash\", \"/opt/openmpi_install.sh\"]\n#RUN yum install -y openmpi openmpi-devel make\n#RUN echo \"mtl = ^ofi\" >> /etc/openmpi-x86_64/openmpi-mca-params.conf\n\nENV PATH=/usr/lib64/openmpi/bin:$PATH\nENV LD_LIBRARY_PATH=/usr/lib64/openmpi/lib:$LD_LIBRARY_PATH \nRUN echo \"export PATH=/usr/lib64/openmpi/bin:${PATH}\" > /etc/profile.d/scripts-path.sh && \\\necho \"export LD_LIBRARY_PATH=/usr/lib64/openmpi/lib:$LD_LIBRARY_PATH\" >> /etc/profile.d/scripts-path.sh && \\\nchmod 755 /etc/profile.d/scripts-path.sh\n\n\n\n\n"
}