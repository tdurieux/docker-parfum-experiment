{
  "startTime": 1674241469976,
  "endTime": 1674241470270,
  "originalSmells": [
    {
      "rule": "wgetUseHttpsUrl",
      "position": {
        "lineStart": 19,
        "lineEnd": 19,
        "columnStart": 4,
        "columnEnd": 135
      }
    },
    {
      "rule": "wgetUseHttpsUrl",
      "position": {
        "lineStart": 28,
        "lineEnd": 28,
        "columnStart": 4,
        "columnEnd": 165
      }
    },
    {
      "rule": "wgetUseHttpsUrl",
      "position": {
        "lineStart": 38,
        "lineEnd": 38,
        "columnStart": 4,
        "columnEnd": 143
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 11,
        "lineEnd": 11,
        "columnStart": 4,
        "columnEnd": 29
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 12,
        "lineEnd": 12,
        "columnStart": 4,
        "columnEnd": 22
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 21,
        "lineEnd": 21,
        "columnStart": 4,
        "columnEnd": 46
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 30,
        "lineEnd": 30,
        "columnStart": 4,
        "columnEnd": 73
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 40,
        "lineEnd": 40,
        "columnStart": 4,
        "columnEnd": 52
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 8,
        "lineEnd": 8,
        "columnStart": 5,
        "columnEnd": 28
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 9,
        "lineEnd": 9,
        "columnStart": 5,
        "columnEnd": 28
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 10,
        "lineEnd": 10,
        "columnStart": 4,
        "columnEnd": 60
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 10,
        "lineEnd": 10,
        "columnStart": 4,
        "columnEnd": 60
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 8,
        "lineEnd": 8,
        "columnStart": 5,
        "columnEnd": 28
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 9,
        "lineEnd": 9,
        "columnStart": 5,
        "columnEnd": 28
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 10,
        "lineEnd": 10,
        "columnStart": 4,
        "columnEnd": 60
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 10,
        "lineEnd": 10,
        "columnStart": 4,
        "columnEnd": 84
      }
    }
  ],
  "repairedDockerfile": "# Set Ubuntu base image\nFROM ubuntu:14.04\n\n# Define the maintainer of the image\nMAINTAINER Geoffrey Hannigan <ghannig@umich.edu>\n\n# Download\nRUN apt-get update \\\n  && apt-get install --no-install-recommends -y wget \\\n  && apt-get install --no-install-recommends -y perl && rm -rf /var/lib/apt/lists/*;\nRUN apt-get install --no-install-recommends -y python-pip python-dev build-essential && rm -rf /var/lib/apt/lists/*;\nRUN pip install --no-cache-dir --upgrade pip\nRUN pip install --no-cache-dir Cython\n\n###########\n# PRINSEQ #\n###########\n# This is a lightweight dependency for DeconSeq\n# Download the file\nRUN wget -O /home/prinseq-lite-0.20.4.tar.gz https://pilotfiber.dl.sourceforge.net/project/prinseq/standalone/prinseq-lite-0.20.4.tar.gz\n# Unzip\nRUN tar -zxvf /home/prinseq-lite-0.20.4.tar.gz && rm /home/prinseq-lite-0.20.4.tar.gz\nRUN rm /home/prinseq-lite-0.20.4.tar.gz\n\n#################\n# FASTX TOOLKIT #\n#################\n# Download from the website\nRUN wget -O /home/fastx_toolkit_0.0.13_binaries_Linux_2.6_amd64.tar.bz2 https://hannonlab.cshl.edu/fastx_toolkit/fastx_toolkit_0.0.13_binaries_Linux_2.6_amd64.tar.bz2\n# Uncompress that toolkit\nRUN tar -vxjf /home/fastx_toolkit_0.0.13_binaries_Linux_2.6_amd64.tar.bz2 && rm /home/fastx_toolkit_0.0.13_binaries_Linux_2.6_amd64.tar.bz2\nRUN rm /home/fastx_toolkit_0.0.13_binaries_Linux_2.6_amd64.tar.bz2\n# Binaries can be found in `./bin`\n\n############\n# DECONSEQ #\n############\n# Download the standalone deconseq program\nRUN wget -O /home/deconseq-standalone-0.4.3.tar.gz https://jaist.dl.sourceforge.net/project/deconseq/standalone/deconseq-standalone-0.4.3.tar.gz\n# Uncompress the file\nRUN tar -zxvf /home/deconseq-standalone-0.4.3.tar.gz && rm /home/deconseq-standalone-0.4.3.tar.gz\nRUN rm /home/deconseq-standalone-0.4.3.tar.gz\nRUN mkdir ./deconseq-standalone-0.4.3/db\n# Download human reference dataset\nWORKDIR \"./deconseq-standalone-0.4.3/db\"\nRUN for i in $(seq 1 22) X Y MT; do wget ftp://ftp.ncbi.nih.gov/genomes/H_sapiens/Assembled_chromosomes/seq/hs_ref_GRCh38.p7_chr$i.fa.gz; done\nRUN for i in $(seq 1 22) X Y MT; do gzip -dvc hs_ref_GRCh38.p7_chr$i.fa.gz >>hs_ref_GRCh38_p7.fa; rm hs_ref_GRCh38.p7_chr$i.fa.gz; done\nRUN cat hs_ref_GRCh38_p7.fa | perl -p -e 's/N\\n/N/' | perl -p -e 's/^N+//;s/N+$//;s/N{200,}/\\n>split\\n/' >hs_ref_GRCh38_p7_split.fa; rm hs_ref_GRCh38_p7.fa\nRUN perl ../../prinseq-lite-0.20.4/prinseq-lite.pl -log -verbose -fasta hs_ref_GRCh38_p7_split.fa -min_len 200 -ns_max_p 10 -derep 12345 -out_good hs_ref_GRCh38_p7_split_prinseq -seq_id hs_ref_GRCh38_p7_ -rm_header -out_bad null; rm hs_ref_GRCh38_p7_split.fa\nRUN ../bwa64 index -p hs_ref_GRCh38_p7 -a bwtsw hs_ref_GRCh38_p7_split_prinseq.fasta >bwa.log 2>&1 &\n# Download mouse reference dataset\nRUN for i in $(seq 1 22) X Y MT; do wget ftp://ftp.ncbi.nih.gov/genomes/Mus_musculus/Assembled_chromosomes/seq/mm_ref_GRCm38.p3_chr$i.fa.gz; done\nRUN for i in $(seq 1 22) X Y MT; do gzip -dvc mm_ref_GRCm38.p3_chr$i.fa.gz >>mm_ref_GRCm38.p3.fa; rm mm_ref_GRCm38.p3_chr$i.fa.gz; done\nRUN cat mm_ref_GRCm38.p3.fa | perl -p -e 's/N\\n/N/' | perl -p -e 's/^N+//;s/N+$//;s/N{200,}/\\n>split\\n/' >mm_ref_GRCm38.p3_split.fa; rm mm_ref_GRCm38.p3.fa\nRUN perl ../../prinseq-lite-0.20.4/prinseq-lite.pl -log -verbose -fasta mm_ref_GRCm38.p3_split.fa -min_len 200 -ns_max_p 10 -derep 12345 -out_good mm_ref_GRCm38.p3_split_prinseq -seq_id mm_ref_GRCm38.p3_ -rm_header -out_bad null; rm mm_ref_GRCm38.p3_split.fa\nRUN ../bwa64 index -p mm_ref_GRCm38.p3 -a bwtsw mm_ref_GRCm38.p3_split_prinseq.fasta >bwa.log 2>&1 &\n\n############\n# CUTADAPT #\n############\nWORKDIR \"/home/\"\nRUN wget -O /home/cutadapt-1.10 https://github.com/marcelm/cutadapt/archive/v1.10.tar.gz\nRUN tar -zxvf /home/cutadapt-1.10\nWORKDIR \"/home/cutadapt-1.10/\"\nRUN python2.7 ./setup.py install --user\n\nADD ./pakbin/* /home/\n\n############\n# Clean Up #\n############\n\n# Clean up some of the dependencies that we no longer need\nRUN pip uninstall -y Cython\nRUN apt-get purge -y python-pip python-dev build-essential wget\nRUN apt-get autoremove -y\n\n#######################\n# SET IMAGE DIRECTORY #\n#######################\n\nWORKDIR /data/\n"
}