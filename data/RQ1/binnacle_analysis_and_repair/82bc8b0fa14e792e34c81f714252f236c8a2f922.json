{
  "startTime": 1674238536194,
  "endTime": 1674238536296,
  "originalSmells": [
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 4,
        "lineEnd": 17,
        "columnStart": 25,
        "columnEnd": 24
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM ubuntu:14.04\nMAINTAINER TAGOMORI Satoshi <tagomoris@gmail.com>\nLABEL Description=\"Fluentd docker image\" Vendor=\"Fluent Organization\" Version=\"1.0\"\n\nRUN apt-get update -y && apt-get install --no-install-recommends -y \\\n              autoconf \\\n              bison \\\n              build-essential \\\n              curl \\\n              git \\\n              libffi-dev \\\n              libgdbm3 \\\n              libgdbm-dev \\\n              libncurses5-dev \\\n              libreadline6-dev \\\n              libssl-dev \\\n              libyaml-dev \\\n              zlib1g-dev \\\n        && rm -rf /var/lib/apt/lists/*\n\nRUN useradd ubuntu -d /home/ubuntu -m -U\nRUN chown -R ubuntu:ubuntu /home/ubuntu\n\n# for log storage (maybe shared with host)\nRUN mkdir -p /fluentd/log\n# configuration/plugins path (default: copied from .)\nRUN mkdir -p /fluentd/etc\nRUN mkdir -p /fluentd/plugins\n\nRUN chown -R ubuntu:ubuntu /fluentd\n\nUSER ubuntu\nWORKDIR /home/ubuntu\n\nRUN git clone https://github.com/tagomoris/xbuild.git /home/ubuntu/.xbuild\nRUN /home/ubuntu/.xbuild/ruby-install 2.2.2 /home/ubuntu/ruby\n\nENV PATH /home/ubuntu/ruby/bin:$PATH\nRUN gem install fluentd -v 0.12.16\n\nRUN gem install fluent-plugin-secure-forward fluent-plugin-elasticsearch fluent-plugin-burrow fluent-plugin-grep\n\nCOPY fluent.conf /fluentd/etc/\nONBUILD COPY fluent.conf /fluentd/etc/\nONBUILD COPY plugins /fluentd/plugins/\n\nWORKDIR /home/ubuntu\n\nENV FLUENTD_OPT=\"\"\nENV FLUENTD_CONF=\"fluent.conf\"\n\nEXPOSE 24224\n\n### docker run -p 24224 -v `pwd`/log: -v `pwd`/log:/home/ubuntu/log fluent/fluentd:latest\nCMD exec fluentd -c /fluentd/etc/$FLUENTD_CONF -p /fluentd/plugins $FLUENTD_OPT\n"
}