{
  "startTime": 1674242269578,
  "endTime": 1674242270042,
  "originalSmells": [
    {
      "rule": "configureShouldUseBuildFlag",
      "position": {
        "lineStart": 38,
        "lineEnd": 38,
        "columnStart": 7,
        "columnEnd": 49
      }
    },
    {
      "rule": "configureShouldUseBuildFlag",
      "position": {
        "lineStart": 46,
        "lineEnd": 46,
        "columnStart": 7,
        "columnEnd": 32
      }
    },
    {
      "rule": "configureShouldUseBuildFlag",
      "position": {
        "lineStart": 64,
        "lineEnd": 64,
        "columnStart": 7,
        "columnEnd": 86
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 8,
        "lineEnd": 24,
        "columnStart": 4,
        "columnEnd": 12
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 26,
        "lineEnd": 32,
        "columnStart": 4,
        "columnEnd": 9
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 73,
        "lineEnd": 73,
        "columnStart": 4,
        "columnEnd": 28
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 8,
        "lineEnd": 24,
        "columnStart": 4,
        "columnEnd": 12
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 26,
        "lineEnd": 32,
        "columnStart": 4,
        "columnEnd": 9
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 73,
        "lineEnd": 73,
        "columnStart": 4,
        "columnEnd": 28
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 8,
        "lineEnd": 24,
        "columnStart": 4,
        "columnEnd": 12
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 26,
        "lineEnd": 32,
        "columnStart": 4,
        "columnEnd": 9
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 73,
        "lineEnd": 73,
        "columnStart": 4,
        "columnEnd": 28
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 8,
        "lineEnd": 24,
        "columnStart": 4,
        "columnEnd": 12
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 26,
        "lineEnd": 32,
        "columnStart": 4,
        "columnEnd": 9
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 73,
        "lineEnd": 73,
        "columnStart": 4,
        "columnEnd": 52
      }
    }
  ],
  "repairedDockerfile": "FROM debian:jessie\n\nLABEL maintainer=\"Linagora Folks <lgs-openpaas-dev@linagora.com>\"\nLABEL description=\"Provides an image with Janus Gateway\"\n\nRUN apt-get update -y \\\n    && apt-get upgrade -y\n\nRUN apt-get install --no-install-recommends -y \\\n    build-essential \\\n    libmicrohttpd-dev \\\n    libjansson-dev \\\n    libnice-dev \\\n    libssl-dev \\\n    libsofia-sip-ua-dev \\\n    libglib2.0-dev \\\n    libopus-dev \\\n    libogg-dev \\\n    libini-config-dev \\\n    libcollection-dev \\\n    pkg-config \\\n    gengetopt \\\n    libtool \\\n    autotools-dev \\\n    automake && rm -rf /var/lib/apt/lists/*;\n\nRUN apt-get install --no-install-recommends -y \\\n    sudo \\\n    make \\\n    git \\\n    doxygen \\\n    graphviz \\\n    cmake && rm -rf /var/lib/apt/lists/*;\n\nRUN cd ~ \\\n    && git clone https://github.com/cisco/libsrtp.git \\\n    && cd libsrtp \\\n    && git checkout v2.0.0 \\\n    && ./configure --build=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\" --prefix=/usr --enable-openssl \\\n    && make shared_library \\\n    && sudo make install\n\nRUN cd ~ \\\n    && git clone https://github.com/sctplab/usrsctp \\\n    && cd usrsctp \\\n    && ./bootstrap \\\n    && ./configure --build=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\" --prefix=/usr \\\n    && make \\\n    && sudo make install\n\nRUN cd ~ \\\n    && git clone https://github.com/warmcat/libwebsockets.git \\\n    && cd libwebsockets \\\n    && git checkout v2.1.0 \\\n    && mkdir build \\\n    && cd build \\\n    && cmake -DCMAKE_INSTALL_PREFIX:PATH=/usr .. \\\n    && make \\\n    && sudo make install\n\nRUN cd ~ \\\n    && git clone https://github.com/meetecho/janus-gateway.git \\\n    && cd janus-gateway \\\n    && sh autogen.sh \\\n    && ./configure --build=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\" --prefix=/opt/janus --disable-rabbitmq --disable-mqtt --enable-docs \\\n    && make CFLAGS='-std=c99' \\\n    && make install \\\n    && make configs\n\nRUN cp -rp ~/janus-gateway/certs /opt/janus/share/janus\n\nCOPY conf/*.cfg /opt/janus/etc/janus/\n\nRUN apt-get install --no-install-recommends nginx -y && rm -rf /var/lib/apt/lists/*;\nCOPY nginx/nginx.conf /etc/nginx/nginx.conf\n\nEXPOSE 80 7088 8088 8188 8089\nEXPOSE 10000-10200/udp\n\nCMD service nginx restart && /opt/janus/bin/janus --nat-1-1=${DOCKER_IP}"
}