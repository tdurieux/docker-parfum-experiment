{
  "startTime": 1674245185237,
  "endTime": 1674245185700,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 84,
        "lineEnd": 84,
        "columnStart": 15,
        "columnEnd": 76
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 84,
        "lineEnd": 84,
        "columnStart": 18,
        "columnEnd": 74
      }
    },
    {
      "rule": "sha256sumEchoOneSpaces",
      "position": {
        "lineStart": 75,
        "lineEnd": 75,
        "columnStart": 7,
        "columnEnd": 101
      }
    },
    {
      "rule": "aptGetInstallUseY",
      "position": {
        "lineStart": 79,
        "lineEnd": 79,
        "columnStart": 7,
        "columnEnd": 25
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 68,
        "lineEnd": 68,
        "columnStart": 7,
        "columnEnd": 79
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 70,
        "lineEnd": 73,
        "columnStart": 25,
        "columnEnd": 80
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "###########################################################################\n# Dugong - Scientific Linux Containers for Bioinformatics\n# ========================================================\n#\n# Current development is led by Fabiano Menegidio.\n#\n# Bioinformatician/Bioinformaticist at the Laboratory of Functional\n# and Structural Genomics of the Integrated Nucleus of Biotechnology\n# at the University of Mogi das Cruzes, Brazil.\n#\n# Contact: fabiano.menegidio@biology.bio.br\n# GitHub: https://github.com/fabianomenegidio\n#\n#\n###########################################################################\n\nFROM ubuntu:wily\nMAINTAINER Fabiano Menegidio <fabiano.menegidio@biology.bio.br>\n\n############### Metadata\nARG BUILD_DATE\nARG VCS_REF\nLABEL org.label-schema.build-date=$BUILD_DATE \\\n      org.label-schema.vcs-ref=$VCS_REF \\\n      org.label-schema.vcs-url=\"e.g. https://github.com/fabianomenegidio/dugong-bioinformatics/tree/master/DugongGUI/XFCE\"\n\nLABEL base.image=\"ubuntu:latest\" \\\n      version=\"2017040\" \\\n      name=\"DugongGUI\" \\\n      flavour=\"Xfce4\" \\\n      base=\"Ubuntu latest\" \\\n      description=\"Scientific Linux Container\" \\\n      website=\"https://fabianomenegidio.github.io/dugong-bioinformatics/\" \\\n      repository=\"https://github.com/fabianomenegidio/dugong-bioinformatics\" \\\n      license=\"MIT\" \\\n      tags=\"Bioinformatics\"\n\n############### Environment config\nENV DEBIAN_FRONTEND noninteractive\nENV HOME /headless\nENV STARTUPDIR /dockerstartup\nENV INST_SCRIPTS $HOME/install\nENV NB_USER dugong\nENV NB_UID 1000\nENV CONDA_DIR $HOME/.conda2/\n\nADD .config/scripts $STARTUPDIR\nADD .config/scripts/.bashrc $HOME/.bashrc\nADD .config/scripts/.bash_profile $HOME/.bash_profile\nADD .config/install/ $INST_SCRIPTS/\nADD tty.js /tty.js/\n\nCOPY config/start.sh /usr/local/bin/\nCOPY config/start-notebook.sh /usr/local/bin/\nCOPY config/start-singleuser.sh /usr/local/bin/\nCOPY config/jupyter_notebook_config.py $HOME/.jupyter/\n\nWORKDIR $HOME\n\n############### Add dependencies and update packages\nRUN apt-key adv --recv-key --keyserver keyserver.ubuntu.com \"A6616109451BBBF2\" \\\n    && apt-key adv --keyserver keyserver.ubuntu.com --recv-keys E084DAB9 \\\n    && echo \"deb http://packages.linuxmint.com sarah main upstream import backport\" >> /etc/apt/sources.list.d/mint.list \\\n    && echo 'deb http://nebc.nerc.ac.uk/bio-linux/ unstable bio-linux' >> /etc/apt/sources.list.d/biolinux.list \\\n    && echo 'deb http://ppa.launchpad.net/nebc/bio-linux/ubuntu precise main' >> /etc/apt/sources.list.d/biolinux.list \\\n    && echo 'deb-src http://ppa.launchpad.net/nebc/bio-linux/ubuntu precise main' >> /etc/apt/sources.list.d/biolinux.list \\\n    && echo 'deb http://cran.r-project.org/bin/linux/ubuntu precise/' >> /etc/apt/sources.list.d/biolinux.list \\\n    && apt-get update \\\n    && apt-get install --no-install-recommends -y --allow-unauthenticated --force-yes bio-linux-keyring \\\n    && apt-get clean && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/* \\\n    && apt-get update && apt-get install --no-install-recommends -y --allow-unauthenticated make grep sed sudo dpkg git wget zip \\\n    build-essential python python-dev bzip2 locales ca-certificates vim gdebi-core bash-completion apt-utils \\\n    openjdk-7-jre openssh-server unzip curl net-tools icedtea-7-plugin zlib1g-dev libqt4-dbus libqt4-network nodejs \\\n    ruby-dev rubygems ruby screen mlocate nano asciinema python-pip python-numpy \\\n    && wget --quiet https://github.com/krallin/tini/releases/download/v0.10.0/tini \\\n    && echo \"1361527f39190a7338a0b434bd8c88ff7233ce7b9a4876f3315c22fce7eca1b0  *tini\" | sha256sum -c - \\\n    && mv tini /usr/local/bin/tini && chmod +x /usr/local/bin/tini \\\n    && wget https://mega.nz/linux/MEGAsync/xUbuntu_16.04/amd64/megacmd-xUbuntu_16.04_amd64.deb \\\n    && gdebi -n megacmd-xUbuntu_16.04_amd64.deb \\\n    && apt-get -f -y install && rm megacmd-xUbuntu_16.04_amd64.deb \\\n    && apt-get autoremove -y && apt-get clean -y \\\n    && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/* \\\n    && locale-gen en_US.UTF-8 \\\n    && git clone https://github.com/Linuxbrew/linuxbrew.git ~/.linuxbrew \\\n    && bash -c \"$( curl -f -L https://basemount.basespace.illumina.com/install)\" -f \\\n    && gem install showterm \\\n    && wget --quiet https://repo.continuum.io/miniconda/Miniconda2-latest-Linux-x86_64.sh \\\n    && /bin/bash Miniconda2-latest-Linux-x86_64.sh -b -p ~/.conda2 \\\n    && rm Miniconda2-latest-Linux-x86_64.sh \\\n    && ~/.conda2/bin/conda config --add channels defaults \\\n    && ~/.conda2/bin/conda config --add channels conda-forge \\\n    && ~/.conda2/bin/conda config --add channels r \\\n    && ~/.conda2/bin/conda config --add channels bioconda \\\n    && ~/.conda2/bin/conda update --all \\\n    && ~/.conda2/bin/conda clean -tipsy \\\n    && chmod +X /dockerstartup/*.sh && chmod 755 /dockerstartup/*.sh \\\n    && /dockerstartup/generate_container_user.sh \\\n    && chmod +x /usr/local/bin/start.sh \\\n    && chmod +x /usr/local/bin/start-notebook.sh \\\n    && chmod +x /usr/local/bin/start-singleuser.sh \\\n    && /bin/bash /headless/install/set_user_permission.sh /dockerstartup /headless\n\nUSER dugong\n\nRUN ~/.conda2/bin/conda update --all \\\n    && ~/.conda2/bin/conda install jupyter ipython nb_conda \\\n    && ~/.conda2/bin/conda clean -tipsy\n\nUSER root\n\n############### http://bugs.python.org/issue19846\n# > At the moment, setting \"LANG=C\" on a Linux system *fundamentally breaks Python 3*, and that's not OK.\n\nENV LANG en_US.UTF-8 \nENV LANGUAGE en_US:en \nENV LC_ALL en_US.UTF-8\nENV LANG C.UTF-8\n\nVOLUME [\"$HOME/data\"]\n\nENTRYPOINT [\"tini\", \"--\"]\nENTRYPOINT [\"/dockerstartup/startup.sh\"]\n\nEXPOSE 22\nEXPOSE 3000\nEXPOSE 8888\n\nRUN chmod 777 /var/tmp && chown -R root:root /var/tmp && chmod 777 /tmp && chown -R root:root /tmp \\\n    && chown -R $USER:$USER $HOME/data\n\nWORKDIR $HOME/data\n"
}