{
  "startTime": 1674242320299,
  "endTime": 1674242320428,
  "originalSmells": [
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 16,
        "lineEnd": 16,
        "columnStart": 4,
        "columnEnd": 29
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 28,
        "lineEnd": 28,
        "columnStart": 4,
        "columnEnd": 35
      }
    },
    {
      "rule": "apkAddUseNoCache",
      "position": {
        "lineStart": 15,
        "lineEnd": 15,
        "columnStart": 4,
        "columnEnd": 30
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM alpine:edge\nMAINTAINER janes - https://github.com/hxer\n\nENV PACKAGES=\"\\\n  python \\\n  python-dev \\\n  py2-pip \\\n  git \\\n  mysql \\\n  mysql-dev \\\n  gcc \\\n  g++ \\\n  cloc \\\n\"\n\nRUN apk add --no-cache --update $PACKAGES && \\\n    pip install --no-cache-dir --upgrade pip\n\n# config logs path\nRUN git clone https://github.com/wufeifei/cobra && \\\n    cd cobra && \\\n    mkdir logs && \\\n    touch logs/cobra.log && \\\n    cp config.example config && \\\n    sed -i \"s#host: 127.0.0.1#host: 0.0.0.0#\" config && \\\n    sed -i \"s#port: 5000#port: 80#\" config && \\\n    sed -i \"s#secret_key: your_secret_key#secret_key: 07b7b67e61834f90fa8ca9f25eb58b4f#\" config && \\\n    sed -i \"s#max_size: 200#max_size: 1000#\" config && \\\n    pip install --no-cache-dir -r requirements.txt\n\n\nRUN mkdir -p /run/mysqld && chown -R mysql:mysql /run/mysqld /var/lib/mysql && \\\n    mysql_install_db --user=mysql --verbose=1 --basedir=/usr --datadir=/var/lib/mysql --rpm > /dev/null\n\nRUN echo \"#!/bin/sh\" > /start.sh && \\\n    echo \"nohup mysqld --skip-grant-tables --bind-address 0.0.0.0 --user mysql > /dev/null 2>&1 &\" >> /start.sh && \\\n    echo \"sleep 3\" >> /start.sh && \\\n    echo \"python /cobra/cobra.py install &\" >> /start.sh && \\\n    echo \"python /cobra/cobra.py start &\" >> /start.sh && \\\n    echo \"tail -f /cobra/logs/cobra.log\" >> /start.sh && \\\n    chmod u+x /start.sh\n\nWORKDIR /cobra\n\nEXPOSE 80\nEXPOSE 3306\n\nENTRYPOINT [\"/start.sh\"]\n\n"
}