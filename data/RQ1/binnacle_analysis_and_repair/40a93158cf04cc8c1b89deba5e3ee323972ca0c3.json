{
  "startTime": 1674241063279,
  "endTime": 1674241063498,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 1,
        "lineEnd": 1,
        "columnStart": 4,
        "columnEnd": 88
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "COPY --from=tf-binary /tmp/tensorflow_pkg/tensorflow-*.whl /tmp\nRUN curl -f -O https://download.pytorch.org/whl/cpu/torch-1.1.0-cp36-cp36m-linux_x86_64.whl\n\n# Jupyter notebook extension\nRUN mkdir -p /home/work/.jupyter/nbextension\nWORKDIR /home/work/.jupyter/nbextension\n\nRUN python3 -m pip install --no-cache-dir opencv-python\n\nRUN python3 -m pip install --no-cache-dir wheel /tmp/*.whl && \\\n    python3 -m pip install --no-cache-dir pystan && \\\n    python3 -m pip install --no-cache-dir fbprophet && \\\n    python3 -m pip install --no-cache-dir torchvision && \\\n    python3 -m pip install --no-cache-dir jupyter && \\\n    python3 -m pip install --no-cache-dir keras && \\\n    python3 -m pip install --no-cache-dir keras_applications && \\\n    python3 -m pip install --no-cache-dir keras_preprocessing && \\\n    python3 -m pip install --no-cache-dir ipython && \\\n    python3 -m pip install --no-cache-dir ipywidgets && \\\n    python3 -m pip install --no-cache-dir ipyparallel && \\\n    python3 -m pip install --no-cache-dir jupyterlab && \\\n    python3 -m pip install --no-cache-dir jupyterthemes && \\    \n    python3 -m pip install --no-cache-dir jupyter-js-widgets-nbextension && \\\n    python3 -m pip install --no-cache-dir jupyter_contrib_nbextensions && \\\n    python3 -m pip install --no-cache-dir jupyter_nbextensions_configurator && \\\n    python3 -m pip install --no-cache-dir matplotlib bokeh && \\\n    python3 -m pip install --no-cache-dir tf2onnx && \\\n    rm -rf /root/.cache && \\\n    rm -f /tmp/*.whl\n\n# python alternative support\nRUN update-alternatives --install /usr/bin/python python /usr/bin/python3 2\n\nRUN jupyter nbextensions_configurator enable && \\\n    jupyter contrib nbextension install && \\\n    jupyter nbextension enable --py --sys-prefix widgetsnbextension && \\\n    jupyter contrib nbextension install && \\\n    jupyter serverextension enable --py jupyterlab --sys-prefix && \\\n    jupyter labextension install @jupyter-widgets/jupyterlab-manager && \\\n    git clone https://github.com/lambdalisue/jupyter-vim-binding vim_binding && \\\n    jupyter nbextension enable /home/work/.jupyter/nbextension/vim_binding/vim_binding\n\n# Install ipython kernelspec\nRUN python3 -m ipykernel install --display-name \"TensorFlow 1.14 on Python 3.6 (CPU-only)\" && \\\n    cat /usr/local/share/jupyter/kernels/python3/kernel.json\n\n# for apt-get installation using /tmp\nRUN mkdir -p /tmp && \\\n    chown root:root /tmp && \\\n    chmod 1777 /tmp\n\n# Install Jupyter notebook logo\nRUN mkdir -p /home/work/.jupyter/custom\nCOPY custom.css /home/work/.jupyter/custom/custom.css\nCOPY logo.svg /home/work/.jupyter/custom/logo.svg\n\n# Backend.AI specifics\nLABEL ai.backend.kernelspec=\"1\" \\\n      ai.backend.envs.corecount=\"OPENBLAS_NUM_THREADS,OMP_NUM_THREADS,NPROC\" \\\n      ai.backend.features=\"batch query uid-match user-input\" \\\n      ai.backend.base-distro=\"ubuntu18.04\" \\\n      ai.backend.resource.min.cpu=\"1\" \\\n      ai.backend.resource.min.mem=\"1g\" \\\n      ai.backend.resource.min.cuda.device=1 \\\n      ai.backend.resource.min.cuda.shares=0.1 \\\n      ai.backend.runtime-type=\"python\" \\\n      ai.backend.runtime-path=\"/usr/local/bin/python\" \\\n      ai.backend.service-ports=\"ipython:pty:3000,jupyter:http:8080,jupyterlab:http:8090\"\n\nCOPY policy.yml /etc/backend.ai/jail/policy.yml\nWORKDIR /home/work\n# vim: ft=dockerfile"
}