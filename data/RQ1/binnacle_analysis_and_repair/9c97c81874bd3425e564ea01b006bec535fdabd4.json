{
  "startTime": 1674252863597,
  "endTime": 1674252863776,
  "originalSmells": [
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 12,
        "lineEnd": 12,
        "columnStart": 0,
        "columnEnd": 56
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 21,
        "lineEnd": 21,
        "columnStart": 0,
        "columnEnd": 41
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 12,
        "lineEnd": 12,
        "columnStart": 0,
        "columnEnd": 56
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM debian:jessie\n\nMAINTAINER Steffen Sperling <steffen.sperling@ventum.com>\n\nENV TOMCAT_VERSION 8.5.29\nENV IIQ_VERSION 7.2\n\n# Fix sh\nRUN rm /bin/sh && ln -s /bin/bash /bin/sh\n\n# Install dependencies\nRUN apt-get update && \\\n apt-get install --no-install-recommends -y apt-utils wget unzip tar mysql-client && rm -rf /var/lib/apt/lists/*;\n\n# Install JDK 8\nRUN \\\n echo oracle-java8-installer shared/accepted-oracle-license-v1-1 select true | debconf-set-selections && \\\necho \"deb http://ppa.launchpad.net/webupd8team/java/ubuntu trusty main\" | tee /etc/apt/sources.list.d/webupd8team-java.list && \\\necho \"deb-src http://ppa.launchpad.net/webupd8team/java/ubuntu trusty main\" | tee -a /etc/apt/sources.list.d/webupd8team-java.list && \\\napt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv-keys EEA14886 && \\\napt-get update && \\\n apt-get install --no-install-recommends -y oracle-java8-installer && \\\nrm -rf /var/lib/apt/lists/* && \\\nrm -rf /var/cache/oracle-jdk8-installer\n\n# Define commonly used JAVA_HOME variable\nENV JAVA_HOME /usr/lib/jvm/java-8-oracle\n\n# Get Tomcat\nRUN wget --quiet --no-cookies http://www-eu.apache.org/dist/tomcat/tomcat-8/v${TOMCAT_VERSION}/bin/apache-tomcat-${TOMCAT_VERSION}.tar.gz -O /tmp/tomcat.tgz && \\\ntar xzvf /tmp/tomcat.tgz -C /opt && \\\nmv /opt/apache-tomcat-${TOMCAT_VERSION} /opt/tomcat && \\\nrm /tmp/tomcat.tgz && \\\nrm -rf /opt/tomcat/webapps/examples && \\\nrm -rf /opt/tomcat/webapps/docs && \\\nrm -rf /opt/tomcat/webapps/ROOT\n\n# Add admin/admin user\nADD tomcat-users.xml /opt/tomcat/conf/\nrun mkdir -p /opt/tomcat/conf/Catalina/localhost\nADD manager.xml /opt/tomcat/conf/Catalina/localhost\n# add IIQ\nCOPY src/identityiq-${IIQ_VERSION}.zip /tmp\nRUN unzip /tmp/identityiq-${IIQ_VERSION}.zip identityiq.war && \\\nmkdir /opt/tomcat/webapps/identityiq && \\\nunzip identityiq.war -d /opt/tomcat/webapps/identityiq && \\\nchmod +x /opt/tomcat/webapps/identityiq/WEB-INF/bin/iiq && \\\nrm identityiq.war\n\nRUN mkdir /opt/tomcat/webapps/ROOT\nCOPY index.html /opt/tomcat/webapps/ROOT\n\nCOPY entrypoint.sh /entrypoint.sh\nRUN chmod +x /entrypoint.sh\n\nENV CATALINA_HOME /opt/tomcat\nENV PATH $PATH:$CATALINA_HOME/bin\n\nEXPOSE 8080\nEXPOSE 8009\nVOLUME \"/opt/tomcat/webapps\"\nWORKDIR /opt/tomcat\n\n# Launch IIQ\nCMD [\"/entrypoint.sh\", \"run\"]\n#CMD [\"/opt/tomcat/bin/catalina.sh\", \"run\"]\n"
}