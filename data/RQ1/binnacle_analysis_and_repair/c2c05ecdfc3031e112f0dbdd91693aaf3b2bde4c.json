{
  "startTime": 1674238981874,
  "endTime": 1674238982123,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 29,
        "lineEnd": 29,
        "columnStart": 4,
        "columnEnd": 112
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 30,
        "lineEnd": 30,
        "columnStart": 4,
        "columnEnd": 104
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 15,
        "lineEnd": 15,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "configureShouldUseBuildFlag",
      "position": {
        "lineStart": 21,
        "lineEnd": 21,
        "columnStart": 4,
        "columnEnd": 15
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 19,
        "lineEnd": 19,
        "columnStart": 4,
        "columnEnd": 35
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 14,
        "lineEnd": 14,
        "columnStart": 4,
        "columnEnd": 401
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 14,
        "lineEnd": 14,
        "columnStart": 4,
        "columnEnd": 401
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 14,
        "lineEnd": 14,
        "columnStart": 4,
        "columnEnd": 401
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM ubuntu:xenial\nLABEL maintainer=\"Piasy Xu (xz4215@gmail.com)\"\n\nWORKDIR /\n\nENV ENABLE_SHADOW_SOCKS false\nENV SHADOW_SOCKS_SERVER_ADDR 127.0.0.1\nENV SHADOW_SOCKS_SERVER_PORT 8000\nENV SHADOW_SOCKS_ENC_METHOD encmethod\nENV SHADOW_SOCKS_ENC_PASS encpass\n\nRUN apt-get update -y && apt-get install --no-install-recommends -y vim python-pip polipo wget git gnupg flex bison gperf build-essential zip curl subversion pkg-config libglib2.0-dev libgtk2.0-dev libxtst-dev libxss-dev libpci-dev libdbus-1-dev libgconf2-dev libgnome-keyring-dev libnss3-dev lsb-release sudo locales libssl-dev openssl cmake lbzip2 libavcodec-dev libavdevice-dev libavfilter-dev libavformat-dev libswresample-dev libpostproc-dev && rm -rf /var/lib/apt/lists/*; # Deps\n\nRUN pip install --no-cache-dir shadowsocks\n\n# libsodium\nRUN wget https://download.libsodium.org/libsodium/releases/libsodium-1.0.16.tar.gz\nRUN tar zxf libsodium-1.0.16.tar.gz && rm libsodium-1.0.16.tar.gz\nWORKDIR /libsodium-1.0.16\nRUN ./configure --build=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\" && make && make install\nRUN echo /usr/local/lib > /etc/ld.so.conf.d/usr_local_lib.conf && ldconfig\n\nWORKDIR /\nCOPY shadowsocks.json /etc/shadowsocks.json\nCOPY polipo.config /etc/polipo/config\n\n# install webrtc deps\nRUN curl -f https://chromium.googlesource.com/chromium/src/+/master/build/install-build-deps-android.sh?format=TEXT | base64 -d > install-build-deps-android.sh\nRUN curl -f https://chromium.googlesource.com/chromium/src/+/master/build/install-build-deps.sh?format=TEXT | base64 -d > install-build-deps.sh\nRUN chmod +x ./install-build-deps.sh\nRUN chmod +x ./install-build-deps-android.sh\nRUN echo ttf-mscorefonts-installer msttcorefonts/accepted-mscorefonts-eula select true | debconf-set-selections\nRUN ./install-build-deps-android.sh\n\n# depot tools\nWORKDIR /\nRUN git clone https://chromium.googlesource.com/chromium/tools/depot_tools.git\n\nRUN echo 'export PATH=$PATH:/depot_tools' >> /root/.bashrc\nCOPY run.sh /\nRUN chmod +x /run.sh\n\nCMD /run.sh\n"
}