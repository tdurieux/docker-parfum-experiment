{
  "startTime": 1674239985445,
  "endTime": 1674239985771,
  "originalSmells": [
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 10,
        "lineEnd": 10,
        "columnStart": 7,
        "columnEnd": 104
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM nginx\nMAINTAINER Daniel Dent (https://www.danieldent.com/)\n\nENV S6_OVERLAY_SHA256 65f6e4dae229f667e38177d5cad0159af31754b9b8f369096b5b7a9b4580d098\nENV ENVPLATE_SHA256 8366c3c480379dc325dea725aac86212c5f5d1bf55f5a9ef8e92375f42d55a41\nENV CLOUDFLARE_V4_SHA256 0248f5d00559a9caed08c3fad66f25f8570375c256ca3aa918dcba3378a8953c\nENV CLOUDFLARE_V6_SHA256 559b5c5a20088758b4643621ae80be0a71567742ae1fe8e4ff32d1ca26297f8f\n\nRUN DEBIAN_FRONTEND=noninteractive apt-get update -q \\\n    && DEBIAN_FRONTEND=noninteractive apt-get dist-upgrade -y \\\n    && DEBIAN_FRONTEND=noninteractive apt-get install -y --no-install-recommends wget curl certbot pwgen \\\n    && echo \"---> INSTALLING s6-overlay\" \\\n    && wget https://github.com/just-containers/s6-overlay/releases/download/v1.17.0.0/s6-overlay-amd64.tar.gz \\\n    && echo $S6_OVERLAY_SHA256 s6-overlay-amd64.tar.gz | sha256sum -c \\\n    && tar xzf s6-overlay-amd64.tar.gz -C / \\\n    && rm s6-overlay-amd64.tar.gz \\\n    && echo \"---> INSTALLING envplate\" \\\n    && wget https://github.com/kreuzwerker/envplate/releases/download/v0.0.8/ep-linux \\\n    && echo $ENVPLATE_SHA256 ep-linux | sha256sum -c \\\n    && chmod +x ep-linux \\\n    && mv ep-linux /usr/local/bin/ep \\\n    && echo \"---> CREATING CloudFlare Config Snippet (not included in config by default)\" \\\n    && echo '#Cloudflare' > /etc/nginx/cloudflare.conf \\\n    && wget https://www.cloudflare.com/ips-v4 \\\n    && sort ips-v4 > ips-v4.sorted \\\n    && echo $CLOUDFLARE_V4_SHA256 ips-v4.sorted | sha256sum -c \\\n    && cat ips-v4 | sed -e 's/^/set_real_ip_from /' -e 's/$/;/' >> /etc/nginx/cloudflare.conf \\\n    && wget https://www.cloudflare.com/ips-v6 \\\n    && sort ips-v6 > ips-v6.sorted \\\n    && echo $CLOUDFLARE_V6_SHA256 ips-v6.sorted | sha256sum -c \\\n    && cat ips-v6 | sed -e 's/^/set_real_ip_from /' -e 's/$/;/' >> /etc/nginx/cloudflare.conf \\\n    && rm ips-v6 ips-v4 ips-v6.sorted ips-v4.sorted \\\n    && echo \"---> Creating directories\" \\\n    && mkdir -p /etc/services.d/nginx /etc/services.d/certbot \\\n    && echo \"---> Cleaning up\" \\\n    && DEBIAN_FRONTEND=noninteractive apt-get remove -y wget \\\n    && rm -Rf /var/lib/apt /var/cache/apt \\\n    && touch /etc/nginx/auth_part1.conf \\\n             /etc/nginx/auth_part2.conf \\\n             /etc/nginx/request_size.conf \\\n             /etc/nginx/main_location.conf \\\n             /etc/nginx/trusted_proxies.conf \\\n             /tmp/htpasswd && rm -rf /var/lib/apt/lists/*;\n\nCOPY services.d/nginx/* /etc/services.d/nginx/\nCOPY services.d/certbot/* /etc/services.d/certbot/\nCOPY nginx.conf security_headers.conf hsts.conf /etc/nginx/\nCOPY proxy.conf /etc/nginx/conf.d/default.conf\nCOPY auth_part*.conf /root/\nCOPY dhparams.pem /etc/nginx/\nCOPY temp-setup-cert.pem /etc/nginx/temp-server-cert.pem\nCOPY temp-setup-key.pem /etc/nginx/temp-server-key.pem\n\nVOLUME \"/etc/letsencrypt\"\n\nENTRYPOINT [\"/init\"]\nCMD []\n"
}