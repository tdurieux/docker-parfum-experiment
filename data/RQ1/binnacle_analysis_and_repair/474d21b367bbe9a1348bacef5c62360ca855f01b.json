{
  "startTime": 1674234535033,
  "endTime": 1674234535960,
  "originalSmells": [
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 45,
        "lineEnd": 45,
        "columnStart": 4,
        "columnEnd": 29
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 48,
        "lineEnd": 48,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 61,
        "lineEnd": 61,
        "columnStart": 0,
        "columnEnd": 28
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 75,
        "lineEnd": 75,
        "columnStart": 0,
        "columnEnd": 31
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 85,
        "lineEnd": 85,
        "columnStart": 0,
        "columnEnd": 60
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 99,
        "lineEnd": 99,
        "columnStart": 0,
        "columnEnd": 29
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 161,
        "lineEnd": 161,
        "columnStart": 2,
        "columnEnd": 41
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 186,
        "lineEnd": 186,
        "columnStart": 2,
        "columnEnd": 56
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 195,
        "lineEnd": 196,
        "columnStart": 2,
        "columnEnd": 52
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 206,
        "lineEnd": 206,
        "columnStart": 2,
        "columnEnd": 36
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 212,
        "lineEnd": 212,
        "columnStart": 2,
        "columnEnd": 36
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 217,
        "lineEnd": 217,
        "columnStart": 2,
        "columnEnd": 36
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 218,
        "lineEnd": 218,
        "columnStart": 2,
        "columnEnd": 35
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 225,
        "lineEnd": 225,
        "columnStart": 0,
        "columnEnd": 43
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 226,
        "lineEnd": 226,
        "columnStart": 0,
        "columnEnd": 41
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 227,
        "lineEnd": 227,
        "columnStart": 0,
        "columnEnd": 44
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 45,
        "lineEnd": 45,
        "columnStart": 4,
        "columnEnd": 29
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 48,
        "lineEnd": 48,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 61,
        "lineEnd": 61,
        "columnStart": 0,
        "columnEnd": 28
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 75,
        "lineEnd": 75,
        "columnStart": 0,
        "columnEnd": 31
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 85,
        "lineEnd": 85,
        "columnStart": 0,
        "columnEnd": 60
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 89,
        "lineEnd": 89,
        "columnStart": 19,
        "columnEnd": 40
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 99,
        "lineEnd": 99,
        "columnStart": 0,
        "columnEnd": 29
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 107,
        "lineEnd": 107,
        "columnStart": 23,
        "columnEnd": 44
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 161,
        "lineEnd": 161,
        "columnStart": 2,
        "columnEnd": 41
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 186,
        "lineEnd": 186,
        "columnStart": 2,
        "columnEnd": 56
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 195,
        "lineEnd": 196,
        "columnStart": 2,
        "columnEnd": 52
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 206,
        "lineEnd": 206,
        "columnStart": 2,
        "columnEnd": 36
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 212,
        "lineEnd": 212,
        "columnStart": 2,
        "columnEnd": 36
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 217,
        "lineEnd": 217,
        "columnStart": 2,
        "columnEnd": 36
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 218,
        "lineEnd": 218,
        "columnStart": 2,
        "columnEnd": 35
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 225,
        "lineEnd": 225,
        "columnStart": 0,
        "columnEnd": 43
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 226,
        "lineEnd": 226,
        "columnStart": 0,
        "columnEnd": 41
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 227,
        "lineEnd": 227,
        "columnStart": 0,
        "columnEnd": 44
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 45,
        "lineEnd": 45,
        "columnStart": 4,
        "columnEnd": 29
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 48,
        "lineEnd": 48,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 61,
        "lineEnd": 61,
        "columnStart": 0,
        "columnEnd": 28
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 75,
        "lineEnd": 75,
        "columnStart": 0,
        "columnEnd": 31
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 85,
        "lineEnd": 85,
        "columnStart": 0,
        "columnEnd": 60
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 99,
        "lineEnd": 99,
        "columnStart": 0,
        "columnEnd": 29
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 161,
        "lineEnd": 161,
        "columnStart": 2,
        "columnEnd": 41
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 186,
        "lineEnd": 186,
        "columnStart": 2,
        "columnEnd": 56
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 195,
        "lineEnd": 196,
        "columnStart": 2,
        "columnEnd": 52
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 206,
        "lineEnd": 206,
        "columnStart": 2,
        "columnEnd": 36
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 212,
        "lineEnd": 212,
        "columnStart": 2,
        "columnEnd": 36
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 217,
        "lineEnd": 217,
        "columnStart": 2,
        "columnEnd": 36
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 218,
        "lineEnd": 218,
        "columnStart": 2,
        "columnEnd": 35
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 225,
        "lineEnd": 225,
        "columnStart": 0,
        "columnEnd": 43
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 226,
        "lineEnd": 226,
        "columnStart": 0,
        "columnEnd": 41
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 227,
        "lineEnd": 227,
        "columnStart": 0,
        "columnEnd": 44
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 45,
        "lineEnd": 45,
        "columnStart": 4,
        "columnEnd": 53
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 48,
        "lineEnd": 48,
        "columnStart": 4,
        "columnEnd": 54
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 61,
        "lineEnd": 61,
        "columnStart": 1,
        "columnEnd": 53
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 75,
        "lineEnd": 75,
        "columnStart": 1,
        "columnEnd": 56
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 85,
        "lineEnd": 85,
        "columnStart": 1,
        "columnEnd": 85
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 89,
        "lineEnd": 89,
        "columnStart": 19,
        "columnEnd": 40
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 99,
        "lineEnd": 99,
        "columnStart": 1,
        "columnEnd": 54
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 107,
        "lineEnd": 107,
        "columnStart": 23,
        "columnEnd": 44
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 225,
        "lineEnd": 225,
        "columnStart": 1,
        "columnEnd": 68
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 226,
        "lineEnd": 226,
        "columnStart": 1,
        "columnEnd": 66
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 227,
        "lineEnd": 227,
        "columnStart": 1,
        "columnEnd": 69
      }
    }
  ],
  "repairedDockerfile": "# Dockerfile for XRDP on Ubuntu 16.04 desktop.\n#\n# Copyright (C) 2017 Hiroo MATSUMOTO <hiroom2.mail@gmail.com>\n#\n\nFROM ubuntu:16.04\nMAINTAINER Hiroo MATSUMOTO <hiroom2.mail@gmail.com>\nLABEL \\\nDescription=\"XRDP on Ubuntu 16.04 desktop\" \\\nVersion=\"1.0\"\nEXPOSE 3389\n\nARG user=${user:-doxrdp}\nARG password=${password:-doxrdp}\nARG desktop=${desktop:-unity}\nARG xrdp=${xrdp:-0.9.1-7}\nARG model=${model:-pc105}\nARG layout=${layout:-us}\nARG cpu=${cpu:-amd64}\n\n# Check desktop argument at an early stage.\nRUN \\\ncase \"${desktop}\" in \\\nunity) true;; \\\nclassic) true;; \\\nxubuntu) true;; \\\nmate) true;; \\\nlubuntu) true;; \\\nkubuntu) true;; \\\n*) echo \"Not supported desktop: ${desktop}\" 1>&2; false;; \\\nesac\n\n# Set locale.\nRUN locale-gen en_US en_US.UTF-8\nENV LANG en_US.UTF-8\nENV LANGUAGE en_US:en\nENV LC_ALL en_US.UTF-8\nRUN locale > /etc/default/locale\n\n# Update Ubuntu.\nRUN \\\napt-get update -y && \\\napt-get upgrade -y\n\n# Install expect.\nRUN apt-get install --no-install-recommends -y expect && rm -rf /var/lib/apt/lists/*;\n\n# Install debconf at an early stage for debconf-set-selections.\nRUN apt-get install --no-install-recommends -y debconf && rm -rf /var/lib/apt/lists/*;\n\n# Set keyboard.\nRUN \\\necho \"\\\nkeyboard-configuration keyboard-configuration/modelcode \\\nstring ${model}\\n\\\nkeyboard-configuration keyboard-configuration/layoutcode \\\nstring ${layout}\\n\\\n\" | debconf-set-selections\n\n# Create user.\nRUN \\\n apt-get install --no-install-recommends -y sudo bash && \\\nsed -e 's/%sudo\\(.*\\)ALL$/%sudo\\1NOPASSWD:ALL/g' -i /etc/sudoers && \\\nuseradd -m ${user} -s /bin/bash && \\\ngpasswd -a ${user} sudo && \\\nprintf \"\\\nset timeout -1\\n\\\nspawn passwd ${user}\\n\\\nexpect \\\"Enter new UNIX password:\\\" { send \\\"${password}\\\\\\n\\\" }\\n\\\nexpect \\\"Retype new UNIX password:\\\" { send \\\"${password}\\\\\\n\\\" }\\n\\\nexpect eof\\n\\\n\" | expect && rm -rf /var/lib/apt/lists/*;\n\n# Install TigerVNC from upstream.\nRUN \\\n apt-get install --no-install-recommends -y dpkg-dev git && \\\nmkdir tigervnc.build && \\\ncd tigervnc.build && \\\ngit clone https://github.com/TigerVNC/tigervnc && \\\ncd tigervnc && \\\ngit checkout ff872614b507d0aa8bfbd09ef41550390cfe658a -b branch && \\\nln -s contrib/packages/deb/ubuntu-xenial/debian && \\\nchmod a+x debian/rules && \\\npkgs=$(dpkg-checkbuilddeps 2>&1 | \\\n       sed -e 's/.*build dependencies://g' -e 's/([^)]*)//g') && \\\n apt-get install --no-install-recommends -y -o 'apt::install-recommends=true' ${pkgs} && \\\nfakeroot debian/rules binary && \\\napt-get remove -y dpkg-dev git ${pkgs} && \\\ncd .. && \\\n(dpkg -i *.deb || (apt-get -f install -y && dpkg -i *.deb)) && \\\ncd .. && \\\nrm -rf tigervnc.build && rm -rf /var/lib/apt/lists/*;\n\n# Install latest XRDP. And apply patch to latest XRDP for changing\n# Xvnc session to be default because Xorg session's cursor has black\n# background.\nRUN \\\n mkdir xrdp && \\\ncd xrdp && \\\n apt-get install --no-install-recommends -y wget patch && \\\nURL=http://archive.ubuntu.com/ubuntu/pool/universe/x/xrdp && \\\nPKG=\"\\\nxrdp_${xrdp}_${cpu}.deb \\\nxorgxrdp_${xrdp}_${cpu}.deb \\\n\" && \\\nfor pkg in ${PKG}; do \\\n  wget -q ${URL}/${pkg} && \\\n  (dpkg -i \"${pkg}\" || apt-get -f install -y); \\\ndone && \\\ncd .. && \\\nrm -rf xrdp && \\\ncd /etc/xrdp && \\\necho \"\\\n--- xrdp.ini.org\t2017-02-23 07:14:16.614833723 +0000\\n\\\n+++ xrdp.ini\t2017-02-23 07:15:10.489078284 +0000\\n\\\n@@ -147,15 +147,6 @@ tcutils=true\\n\\\n ; Session types\\n\\\n ;\\n\\\n \\n\\\n-[Xorg]\\n\\\n-name=Xorg\\n\\\n-lib=libxup.so\\n\\\n-username=ask\\n\\\n-password=ask\\n\\\n-ip=127.0.0.1\\n\\\n-port=-1\\n\\\n-code=20\\n\\\n-\\n\\\n [Xvnc]\\n\\\n name=Xvnc\\n\\\n lib=libvnc.so\\n\\\n@@ -166,6 +157,15 @@ port=-1\\n\\\n #xserverbpp=24\\n\\\n #delay_ms=2000\\n\\\n \\n\\\n+[Xorg]\\n\\\n+name=Xorg\\n\\\n+lib=libxup.so\\n\\\n+username=ask\\n\\\n+password=ask\\n\\\n+ip=127.0.0.1\\n\\\n+port=-1\\n\\\n+code=20\\n\\\n+\\n\\\n [console]\\n\\\n name=console\\n\\\n lib=libvnc.so\\n\\\n\" | patch -p0 && \\\napt-get remove -y wget patch && rm -rf /var/lib/apt/lists/*;\n\n# Disable resolvconf postinst to /etc/resolv.conf which cannot be\n# updated in container.\n# https://github.com/docker/docker/issues/1297#issuecomment-115458690\nRUN \\\necho \"resolvconf resolvconf/linkify-resolvconf boolean false\" | \\\ndebconf-set-selections\n\n# Install desktop.\nRUN \\\n case \"${desktop}\" in \\\nunity \\\n  apt-get install --no-install-recommends -y ubuntu-desktop unity && \\\n  ln -s /usr/bin/unity-control-center \\\n        /usr/bin/gnome-control-center && \\\n  service dbus start && \\\n  su - ${user} -c \"dbus-launch gsettings set \\\n  org.gnome.desktop.lockdown disable-lock-screen true\" && \\\n  su - ${user} -c \"dbus-launch gsettings set \\\n  org.gnome.desktop.session idle-delay 0\" && \\\n  service dbus stop && \\\n  printf \"\\\n/usr/lib/gnome-session/gnome-session-binary --session=ubuntu &\\n\\\n/usr/lib/x86_64-linux-gnu/unity/unity-panel-service &\\n\\\n/usr/lib/unity-settings-daemon/unity-settings-daemon &\\n\\\n\\n\\\nfor indicator in /usr/lib/x86_64-linux-gnu/indicator-*; do\\n\\\n  basename=\\$(basename \\${indicator})\\n\\\n  dirname=\\$(dirname \\${indicator})\\n\\\n  service=\\${dirname}/\\${basename}/\\${basename}-service\\n\\\n  \\${service} &\\n\\\ndone\\n\\\n\\n\\\nunity\\n\\\n\" > /home/${user}/.xsession && \\\n  chown ${user}:${user} /home/${user}/.xsession;; \\\nclassic \\\n  apt-get install --no-install-recommends -y ubuntu-desktop gnome-panel metacity && \\\n  ln -s /usr/bin/unity-control-center \\\n        /usr/bin/gnome-control-center && \\\n  printf \"\\\ngnome-panel &\\n\\\nmetacity &\\n\\\n\" > /home/${user}/.xsessionrc && \\\n  chown ${user}:${user} /home/${user}/.xsessionrc;; \\\nmate \\\n  apt-get install --no-install-recommends -y ubuntu-mate-desktop ubuntu-mate-core \\\n                     mate-desktop-environment-extras && \\\n  service dbus start && \\\n  su - ${user} -c \"dbus-launch gsettings set \\\n  org.mate.screensaver idle-activation-enabled false\" && \\\n  su - ${user} -c \"dbus-launch gsettings set \\\n  org.mate.screensaver lock-enabled false\" && \\\n  service dbus stop && \\\n  echo \"mate-session\" > /home/${user}/.xsession && \\\n  chown ${user}:${user} /home/${user}/.xsession;; \\\nxubuntu \\\n  apt-get install --no-install-recommends -y xubuntu-desktop && \\\n  echo \"mode: off\\n\" > /home/${user}/.xscreensaver && \\\n  chown ${user}:${user} /home/${user}/.xscreensaver && \\\n  echo \"xfce4-session\" > /home/${user}/.xsession && \\\n  chown ${user}:${user} /home/${user}/.xsession;; \\\nlubuntu \\\n  apt-get install --no-install-recommends -y lubuntu-desktop && \\\n  apt-get remove -y light-locker && \\\n  echo \"lxsession -s Lubuntu -e LXDE\" > /home/${user}/.xsession && \\\n  chown ${user}:${user} /home/${user}/.xsession;; \\\nkubuntu \\\n  apt-get install --no-install-recommends -y kubuntu-desktop && \\\n  apt-get install --no-install-recommends -y libglib2.0-bin && \\\n  echo \"startkde\" > /home/${user}/.xsession && \\\n  chown ${user}:${user} /home/${user}/.xsession;; \\\nesac && rm -rf /var/lib/apt/lists/*;\n\n# Fix incomplete language support.\nRUN \\\n apt-get install --no-install-recommends -y language-selector-common && \\\n apt-get install --no-install-recommends -y language-pack-gnome-en && \\\n apt-get install --no-install-recommends -y $(check-language-support) && rm -rf /var/lib/apt/lists/*;\n\n# Remove gnome-software. If you need image including gnome-software,\n# you need to run gnome-software on container till gnome-software\n# initialization completed. And you need to stop rsyslog, dbus and\n# xrdp service. Then you need to commit container as image.\nRUN apt-get remove -y gnome-software\n\n# Remove expect.\nRUN apt-get remove -y expect\n\n# Clean cache\nRUN \\\napt-get autoremove -y && \\\napt-get clean -y all\n\n# Use rsyslog instead of journald.\nCMD \\\nservice rsyslog start && \\\nservice dbus start && \\\nservice xrdp start && \\\ntail -f /var/log/syslog\n"
}