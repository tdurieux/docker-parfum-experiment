{
  "startTime": 1674252109935,
  "endTime": 1674252111269,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 346,
        "lineEnd": 346,
        "columnStart": 4,
        "columnEnd": 118
      }
    },
    {
      "rule": "npmCacheCleanUseForce",
      "position": {
        "lineStart": 241,
        "lineEnd": 241,
        "columnStart": 22,
        "columnEnd": 37
      }
    },
    {
      "rule": "curlUseHttpsUrl",
      "position": {
        "lineStart": 346,
        "lineEnd": 346,
        "columnStart": 4,
        "columnEnd": 118
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 257,
        "lineEnd": 257,
        "columnStart": 2,
        "columnEnd": 52
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 347,
        "lineEnd": 347,
        "columnStart": 2,
        "columnEnd": 33
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM opensuse:tumbleweed\nMAINTAINER The coala developers - coala-devel@googlegroups.com\n\nARG branch=master\nRUN echo branch=$branch\n\n# Set the locale\nENV LANG=en_US.UTF-8 \\\n    LANGUAGE=en_US:en \\\n    PATH=$PATH:/root/pmd-bin-5.4.1/bin:/root/dart-sdk/bin:/coala-bears/node_modules/.bin:/root/bakalint-0.4.0:/root/elm-format-0.18 \\\n    NODE_PATH=/coala-bears/node_modules\n\n# Create symlink for cache\nRUN mkdir -p /root/.local/share/coala && \\\n  ln -s /root/.local/share/coala /cache\n\n\nRUN \\\n  zypper addlock \\\n    postfix \\\n    'julia < 0.6' 'julia >= 0.7' julia-compat \\\n    && \\\n  # Remove unnecessary repos to avoid refreshes\n  zypper removerepo 'NON-OSS' && \\\n  # Package dependencies\n  echo 'Running zypper install ...' && \\\n  (time zypper -vv --no-gpg-checks --non-interactive \\\n      # nodejs 7\n      --plus-repo http://download.opensuse.org/repositories/devel:languages:nodejs/openSUSE_Tumbleweed/ \\\n      # science contains latest Julia\n      --plus-repo http://download.opensuse.org/repositories/science/openSUSE_Tumbleweed/ \\\n      # luarocks\n      --plus-repo http://download.opensuse.org/repositories/devel:languages:lua/openSUSE_Factory/ \\\n      # brotlipy\n      --plus-repo http://download.opensuse.org/repositories/devel:languages:python/openSUSE_Tumbleweed/ \\\n      # ruby 2.2\n      --plus-repo http://download.opensuse.org/repositories/devel:languages:ruby/openSUSE_Tumbleweed/ \\\n      # flawfinder\n      --plus-repo http://download.opensuse.org/repositories/home:illuusio/openSUSE_Tumbleweed/ \\\n      # astyle\n      --plus-repo http://download.opensuse.org/repositories/devel:tools/openSUSE_Tumbleweed/ \\\n      # Python 3 packages\n      --plus-repo http://download.opensuse.org/repositories/devel:languages:python3/openSUSE_Tumbleweed/ \\\n      # stable packages built for coala\n      --plus-repo http://download.opensuse.org/repositories/home:jayvdb:coala/openSUSE_Tumbleweed/ \\\n      install --replacefiles --download-in-advance \\\n    astyle \\\n    bzr \\\n    cppcheck \\\n    curl \\\n    expect \\\n    flawfinder \\\n    gcc-c++ \\\n    gcc-fortran \\\n    git \\\n    go1.7 \\\n    mercurial \\\n    hlint \\\n    indent \\\n    java-1_8_0-openjdk-headless \\\n    julia \\\n    libclang3_8 \\\n    # libcurl-devel needed by R httr\n    libcurl-devel \\\n    # icu needed by R stringi\n    libicu-devel \\\n    libopenssl-devel \\\n    # pcre needed by Julia runtime\n    libpcre2-8-0 \\\n    libpython3_6m1_0 \\\n    libxml2-devel \\\n    # libxml2-tools provides xmllint\n    libxml2-tools \\\n    libxslt-devel \\\n    # needed for licensecheck\n    devscripts \\\n    # linux-glibc-devel needed for Ruby native extensions\n    linux-glibc-devel \\\n    liblua5_3-5 \\\n    lua53 \\\n    luacheck \\\n    m4 \\\n    nltk-data-averaged_perceptron_tagger \\\n    nltk-data-punkt \\\n    nodejs7 \\\n    npm7 \\\n    # patch is used by Ruby gem pg_query\n    patch \\\n    perl-Perl-Critic \\\n    php7 \\\n    php7-pear \\\n    # Needed for PHPMD\n    php7-dom \\\n    php7-imagick \\\n    # Needed for PHP CodeSniffer\n    php7-pear-Archive_Tar \\\n    php7-tokenizer \\\n    php7-xmlwriter \\\n    # Used by bzr, mecurial, hgext, and flawfinder\n    python \\\n    python3 \\\n    # Needed for HTTpolice\n    python3-brotlipy \\\n    # Needed for proselint\n    python3-dbm \\\n    python3-nltk \\\n    python3-pip \\\n    python3-devel \\\n    R-base \\\n    ruby2.2 \\\n    ruby2.2-devel \\\n    ruby2.2-rubygem-bundler \\\n    ShellCheck \\\n    subversion \\\n    tar \\\n    texlive-chktex \\\n    unzip \\\n      > /tmp/zypper.out \\\n    || (cat /tmp/zypper.out && false)) \\\n    && \\\n  grep -E '(new packages to install|^Retrieving: )' /tmp/zypper.out && \\\n  time rpm -e -f --nodeps -v \\\n    aaa_base \\\n    cron \\\n    cronie \\\n    dbus-1 \\\n    fdupes \\\n    fontconfig \\\n    fonts-config \\\n    kbd \\\n    kmod \\\n    libICE6 \\\n    libthai-data \\\n    libxcb1 libxcb-render0 libxcb-shm0 \\\n    libX11-6 libX11-data \\\n    libXau6 \\\n    libXext6 \\\n    libXft2 \\\n    libXmu6 \\\n    libXmuu1 \\\n    libXrender1 \\\n    libXss1 libXt6 \\\n    lksctp-tools \\\n    logrotate \\\n    ncurses-utils \\\n    openssh \\\n    openslp \\\n    perl-File-ShareDir \\\n    perl-Net-DBus \\\n    perl-Pod-Coverage \\\n    perl-Test-Pod \\\n    perl-Test-Pod-Coverage \\\n    perl-X11-Protocol \\\n    php7-zlib \\\n    python-curses \\\n    python2-packaging \\\n    python2-Pygments \\\n    python2-pyparsing \\\n    python-rpm-macros \\\n    python2-setuptools \\\n    python-xml \\\n    R-core-doc \\\n    rsync \\\n    systemd \\\n    texlive-gsftopk \\\n    texlive-gsftopk-bin \\\n    texlive-kpathsea \\\n    texlive-kpathsea-bin \\\n    texlive-tetex-bin \\\n    texlive-texconfig \\\n    texlive-texconfig-bin \\\n    texlive-texlive.infra \\\n    texlive-updmap-map \\\n    xhost \\\n    xorg-x11-fonts \\\n    xorg-x11-fonts-core \\\n    && \\\n  # Disable nltk downloader\n  printf 'def download(*args): pass\\ndownload_shell = download\\n' \\\n    > /usr/lib/python3.6/site-packages/nltk/downloader.py && \\\n  rm -rf \\\n    /usr/lib64/python2.7/doctest.py \\\n    /usr/lib64/python2.7/ensurepip/ \\\n    /usr/lib64/python2.7/idlelib/ \\\n    /usr/lib64/python2.7/imaplib.py \\\n    /usr/lib64/python2.7/lib2to3/ \\\n    /usr/lib64/python2.7/pydoc.py \\\n    /usr/lib64/python2.7/pydoc_data/ \\\n    /usr/lib64/python2.7/unittest/ \\\n    /usr/lib64/python2.7/test/ \\\n    /usr/lib64/python2.7/turtle.py \\\n    /usr/lib64/python2.7/wsgiref \\\n    /usr/lib64/python2.7/site-packages/bzrlib/doc/ \\\n    /usr/lib64/python2.7/site-packages/bzrlib/export/ \\\n    /usr/lib64/python2.7/site-packages/bzrlib/help_topics/en/ \\\n    /usr/lib64/python2.7/site-packages/hgext/convert/ \\\n    /usr/lib64/python2.7/site-packages/mercurial/help/ \\\n    /usr/lib64/python2.7/site-packages/mercurial/hgweb/ \\\n    /usr/lib64/python2.7/site-packages/mercurial/templates/ \\\n    /usr/lib64/ruby/gems/2.2.0/gems/bundler-*/man/* \\\n    /usr/lib64/R/library/translations/*/LC_MESSAGES/*.[mp]o* \\\n    /usr/lib64/R/library/*/po/* \\\n    /usr/lib64/R/library/*/doc/* \\\n    /usr/lib64/R/library/*/help/* \\\n    /usr/lib64/R/library/*/demo/* \\\n    /usr/lib64/R/library/*/man/* \\\n    /usr/lib64/R/library/*/NEWS \\\n    /usr/lib64/libsvnjavahl-* \\\n    /usr/lib64/svn-javahl \\\n    /usr/share/emacs/ \\\n    /usr/share/xemacs/ \\\n    /usr/share/locale/*/LC_MESSAGES/*.[mp]o* \\\n    /var/log/ \\\n    && \\\n  find /usr/lib64/python2.7/ \\\n    \\( -name 'test' -o -name 'tests' -o -name 'test_*' -o \\\n       -name '*.pyc' -o -name '*.pyo' \\\n    \\) -prune -exec rm -rf '{}' '+' \\\n    && \\\n  # Clear zypper cache\n  time zypper clean -a && \\\n  find /tmp -mindepth 1 -prune -exec rm -rf '{}' '+'\n\n# rocker TAG {{ .image }}_suse\n\n# Coala setup and python deps\nRUN cd / && \\\n  git clone --depth 1 --branch=$branch https://github.com/coala/coala.git && \\\n  git clone --depth 1 --branch=$branch https://github.com/coala/coala-bears.git && \\\n  git clone --depth 1 https://github.com/coala/coala-quickstart.git && \\\n  time pip3 install --no-cache-dir \\\n    -e /coala \\\n    -e '/coala-bears[alldeps]' \\\n    -e /coala-quickstart \\\n    -r /coala/test-requirements.txt && \\\n  cd coala-bears && \\\n  # Remove Ruby directive from Gemfile as this image has 2.2.5\n  sed -i '/^ruby/d' Gemfile && \\\n  # Ruby dependencies\n  time bundle install --system && rm -rf ~/.bundle && \\\n  # NPM dependencies\n  time npm install && npm cache clean --force && \\\n  find /tmp -mindepth 1 -prune -exec rm -rf '{}' '+'\n\nRUN time pear install PHP_CodeSniffer && \\\n  pear channel-discover pear.phpmd.org && \\\n  pear channel-discover pear.pdepend.org && \\\n  pear install --alldeps phpmd/PHP_PMD && \\\n  find /tmp -mindepth 1 -prune -exec rm -rf '{}' '+'\n\n# Dart Lint setup\nRUN curl -fsSL https://storage.googleapis.com/dart-archive/channels/stable/release/1.14.2/sdk/dartsdk-linux-x64-release.zip -o /tmp/dart-sdk.zip && \\\n  unzip -n /tmp/dart-sdk.zip -d ~/ && \\\n  find /tmp -mindepth 1 -prune -exec rm -rf '{}' '+'\n\nRUN curl -fsSL https://github.com/avh4/elm-format/releases/download/0.5.2-alpha/elm-format-0.17-0.5.2-alpha-linux-x64.tgz -o /tmp/elm-format.tgz && \\\n  mkdir ~/elm-format-0.18 && \\\n  tar -xvzf /tmp/elm-format.tgz -C ~/elm-format-0.18 && \\\n  find /tmp -mindepth 1 -prune -exec rm -rf '{}' '+' && rm /tmp/elm-format.tgz\n\n# GO setup\nRUN source /etc/profile.d/go.sh && time go get -u \\\n  github.com/golang/lint/golint \\\n  golang.org/x/tools/cmd/goimports \\\n  sourcegraph.com/sqs/goreturns \\\n  golang.org/x/tools/cmd/gotype \\\n  github.com/BurntSushi/toml/cmd/tomlv \\\n  github.com/kisielk/errcheck && \\\n  find /tmp -mindepth 1 -prune -exec rm -rf '{}' '+'\n\n# # Infer setup using opam\n# RUN useradd -ms /bin/bash opam && usermod -G wheel opam\n# RUN echo \"opam ALL=(ALL) NOPASSWD:ALL\" | tee -a /etc/sudoers\n# # necessary because there is a sudo bug in the base image\n# RUN sed -i '51 s/^/#/' /etc/security/limits.conf\n# USER opam\n# WORKDIR /home/opam\n# ADD https://raw.github.com/ocaml/opam/master/shell/opam_installer.sh opam_installer.sh\n# RUN sudo sh opam_installer.sh /usr/local/bin\n# RUN yes | /usr/local/bin/opam init --comp 4.02.1\n# RUN opam switch 4.02.3 && \\\n#   eval `opam config env` && \\\n#   opam update && \\\n#   opam pin add -y merlin 'https://github.com/the-lambda-church/merlin.git#reason-0.0.1' && \\\n#   opam pin add -y merlin_extend 'https://github.com/let-def/merlin-extend.git#reason-0.0.1' && \\\n#   opam pin add -y reason 'https://github.com/facebook/reason.git#0.0.6'\n# ADD https://github.com/facebook/infer/releases/download/v0.9.0/infer-linux64-v0.9.0.tar.xz infer-linux64-v0.9.0.tar.xz\n# RUN sudo tar xf infer-linux64-v0.9.0.tar.xz\n# WORKDIR /home/opam/infer-linux64-v0.9.0\n# RUN opam pin add -y --no-action infer . && \\\n#   opam install --deps-only --yes infer && \\\n#   ./build-infer.sh java\n# USER root\n# WORKDIR /\n# ENV PATH=$PATH:/home/opam/infer-linux64-v0.9.0/infer/bin\n\n# Julia setup\nRUN time julia -e 'Pkg.add(\"Lint\")' && \\\n  rm -rf ~/.julia/.cache && \\\n  (cd ~/.julia/v0.* && \\\n   rm -rf \\\n     .cache \\\n     METADATA \\\n     .git \\\n     */test \\\n     */docs \\\n  ) && \\\n  find /tmp -mindepth 1 -prune -exec rm -rf '{}' '+'\n\n# PMD setup\nRUN curl -fsSL https://github.com/pmd/pmd/releases/download/pmd_releases/5.4.1/pmd-bin-5.4.1.zip -o /tmp/pmd.zip && \\\n  unzip /tmp/pmd.zip -d ~/ && \\\n  find /tmp -mindepth 1 -prune -exec rm -rf '{}' '+'\n\n# R setup\nRUN mkdir -p ~/.RLibrary && \\\n  echo '.libPaths( c( \"~/.RLibrary\", .libPaths()) )' >> ~/.Rprofile && \\\n  echo 'options(repos=structure(c(CRAN=\"http://cran.rstudio.com\")))' >> ~/.Rprofile && \\\n  export ICUDT_DIR=/usr/share/icu/57.1/ && \\\n  time R -e \"install.packages(c('lintr', 'formatR'), dependencies=TRUE, verbose=FALSE)\" && \\\n  rm -rf \\\n    ~/.RLibrary/*/annouce/* \\\n    ~/.RLibrary/*/po/* \\\n    ~/.RLibrary/*/demo/* \\\n    ~/.RLibrary/*/doc/* \\\n    ~/.RLibrary/*/examples/* \\\n    ~/.RLibrary/*/help/* \\\n    ~/.RLibrary/*/html/* \\\n    ~/.RLibrary/*/man/* \\\n    ~/.RLibrary/*/tests/ \\\n    ~/.RLibrary/*/NEWS \\\n    ~/.RLibrary/Rcpp/unitTests/ \\\n    && \\\n  unset ICUDT_DIR && export ICUDT_DIR && \\\n  find /tmp -mindepth 1 -prune -exec rm -rf '{}' '+'\n\n# Tailor (Swift) setup\nRUN \\\n  cd /tmp && \\\n  curl -fsSL -o /tmp/install.orig \\\n    https://raw.githubusercontent.com/sleekbyte/tailor/master/script/install.sh && \\\n  sed 's/read -r CONTINUE < \\/dev\\/tty/CONTINUE=y/' install.orig > install.sh && \\\n  time /bin/bash install.sh && \\\n  find /tmp -mindepth 1 -prune -exec rm -rf '{}' '+'\n\n# # VHDL Bakalint Installation\nRUN curl -f -L 'https://downloads.sourceforge.net/project/fpgalibre/bakalint/0.4.0/bakalint-0.4.0.tar.gz' > /tmp/bl.tar.gz && \\\n  tar xf /tmp/bl.tar.gz -C /root/ && \\\n  find /tmp -mindepth 1 -prune -exec rm -rf '{}' '+' && rm /tmp/bl.tar.gz\n\n# Add checkstyle image\nRUN mkdir -p /root/.local/share/coala-bears/CheckstyleBear && \\\n  curl -fsSL https://github.com/coala/bear-runtime-deps/raw/master/CheckstyleBear/checkstyle-6.15-all.jar -o /root/.local/share/coala-bears/CheckstyleBear/checkstyle-6.15-all.jar && \\\n  ln -s /root/.local/share/coala-bears/CheckstyleBear/checkstyle-6.15-all.jar /root/.local/share/coala-bears/CheckstyleBear/checkstyle.jar && \\\n  find /tmp -mindepth 1 -prune -exec rm -rf '{}' '+'\n\n# Scalalint Installation\nRUN mkdir -p /root/.local/share/coala-bears/ScalaLintBear && \\\n  curl -fsSL https://github.com/coala/bear-runtime-deps/raw/master/ScalaLintBear/scalastyle_2.10-0.8.0-batch.jar -o /root/.local/share/coala-bears/ScalaLintBear/scalastyle_2.10-0.8.0-batch.jar && \\\n  ln -s /root/.local/share/coala-bears/ScalaLintBear/scalastyle_2.10-0.8.0-batch.jar /root/.local/share/coala-bears/ScalaLintBear/scalastyle.jar && \\\n  find /tmp -mindepth 1 -prune -exec rm -rf '{}' '+'\n\n# Entrypoint script\nADD docker-coala.sh /usr/local/bin/\nCMD [\"/usr/local/bin/docker-coala.sh\"]\n\n# rocker TAG {{ .image }}\n"
}