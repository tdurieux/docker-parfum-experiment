{
  "startTime": 1674252796562,
  "endTime": 1674252797139,
  "originalSmells": [
    {
      "rule": "wgetUseHttpsUrl",
      "position": {
        "lineStart": 23,
        "lineEnd": 23,
        "columnStart": 4,
        "columnEnd": 92
      }
    },
    {
      "rule": "wgetUseHttpsUrl",
      "position": {
        "lineStart": 54,
        "lineEnd": 54,
        "columnStart": 4,
        "columnEnd": 244
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 89,
        "lineEnd": 89,
        "columnStart": 4,
        "columnEnd": 26
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 33,
        "lineEnd": 33,
        "columnStart": 4,
        "columnEnd": 22
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 71,
        "lineEnd": 71,
        "columnStart": 4,
        "columnEnd": 32
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 91,
        "lineEnd": 91,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "aptGetInstallUseY",
      "position": {
        "lineStart": 19,
        "lineEnd": 19,
        "columnStart": 4,
        "columnEnd": 70
      }
    },
    {
      "rule": "aptGetInstallUseY",
      "position": {
        "lineStart": 30,
        "lineEnd": 30,
        "columnStart": 4,
        "columnEnd": 34
      }
    },
    {
      "rule": "aptGetInstallUseY",
      "position": {
        "lineStart": 39,
        "lineEnd": 39,
        "columnStart": 4,
        "columnEnd": 32
      }
    },
    {
      "rule": "aptGetInstallUseY",
      "position": {
        "lineStart": 45,
        "lineEnd": 45,
        "columnStart": 4,
        "columnEnd": 55
      }
    },
    {
      "rule": "aptGetInstallUseY",
      "position": {
        "lineStart": 58,
        "lineEnd": 58,
        "columnStart": 4,
        "columnEnd": 32
      }
    },
    {
      "rule": "aptGetInstallUseY",
      "position": {
        "lineStart": 61,
        "lineEnd": 61,
        "columnStart": 4,
        "columnEnd": 31
      }
    },
    {
      "rule": "aptGetInstallUseY",
      "position": {
        "lineStart": 64,
        "lineEnd": 64,
        "columnStart": 4,
        "columnEnd": 32
      }
    },
    {
      "rule": "aptGetInstallUseY",
      "position": {
        "lineStart": 77,
        "lineEnd": 77,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 19,
        "lineEnd": 19,
        "columnStart": 4,
        "columnEnd": 70
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 30,
        "lineEnd": 30,
        "columnStart": 4,
        "columnEnd": 34
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 39,
        "lineEnd": 39,
        "columnStart": 4,
        "columnEnd": 32
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 45,
        "lineEnd": 45,
        "columnStart": 4,
        "columnEnd": 55
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 58,
        "lineEnd": 58,
        "columnStart": 4,
        "columnEnd": 32
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 61,
        "lineEnd": 61,
        "columnStart": 4,
        "columnEnd": 31
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 64,
        "lineEnd": 64,
        "columnStart": 4,
        "columnEnd": 32
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 77,
        "lineEnd": 77,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 19,
        "lineEnd": 19,
        "columnStart": 4,
        "columnEnd": 70
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 30,
        "lineEnd": 30,
        "columnStart": 4,
        "columnEnd": 34
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 39,
        "lineEnd": 39,
        "columnStart": 4,
        "columnEnd": 32
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 45,
        "lineEnd": 45,
        "columnStart": 4,
        "columnEnd": 55
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 58,
        "lineEnd": 58,
        "columnStart": 4,
        "columnEnd": 32
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 61,
        "lineEnd": 61,
        "columnStart": 4,
        "columnEnd": 31
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 64,
        "lineEnd": 64,
        "columnStart": 4,
        "columnEnd": 32
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 77,
        "lineEnd": 77,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 19,
        "lineEnd": 19,
        "columnStart": 4,
        "columnEnd": 70
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 30,
        "lineEnd": 30,
        "columnStart": 4,
        "columnEnd": 34
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 39,
        "lineEnd": 39,
        "columnStart": 4,
        "columnEnd": 32
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 45,
        "lineEnd": 45,
        "columnStart": 4,
        "columnEnd": 55
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 58,
        "lineEnd": 58,
        "columnStart": 4,
        "columnEnd": 32
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 61,
        "lineEnd": 61,
        "columnStart": 4,
        "columnEnd": 31
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 64,
        "lineEnd": 64,
        "columnStart": 4,
        "columnEnd": 32
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 77,
        "lineEnd": 77,
        "columnStart": 4,
        "columnEnd": 30
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 19,
        "lineEnd": 19,
        "columnStart": 4,
        "columnEnd": 97
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 30,
        "lineEnd": 30,
        "columnStart": 4,
        "columnEnd": 61
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 39,
        "lineEnd": 39,
        "columnStart": 4,
        "columnEnd": 59
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 45,
        "lineEnd": 45,
        "columnStart": 4,
        "columnEnd": 82
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 58,
        "lineEnd": 58,
        "columnStart": 4,
        "columnEnd": 59
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 61,
        "lineEnd": 61,
        "columnStart": 4,
        "columnEnd": 58
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 64,
        "lineEnd": 64,
        "columnStart": 4,
        "columnEnd": 59
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 77,
        "lineEnd": 77,
        "columnStart": 4,
        "columnEnd": 57
      }
    }
  ],
  "repairedDockerfile": "# Docker for CONCOCT (http://github.com/BinPro/CONCOCT) v{{version}}\n# VERSION {{version}}\n#\n# This docker creates and sets up an Ubuntu environment with all\n# dependencies for CONCOCT v{{version}} installed.\n#\n# To login to the docker with a shared directory from the host do:\n#\n# sudo docker run -v /my/host/shared/directory:/my/docker/location -i -t binnisb/concoct_{{version}} /bin/bash\n#\n\nFROM ubuntu:13.10\nMAINTAINER CONCOCT developer group, concoct-support@lists.sourceforge.net\n\nENV PATH /opt/miniconda/bin:$PATH\nENV PATH /opt/velvet_1.2.10:$PATH\n\n# Get basic ubuntu packages needed\nRUN apt-get update -qq\nRUN apt-get install -y --no-install-recommends -qq wget build-essential libgsl0-dev git zip unzip && rm -rf /var/lib/apt/lists/*;\n\n# Set up Miniconda environment for python2\nRUN cd /opt; \\\n    wget https://repo.continuum.io/miniconda/Miniconda-3.3.0-Linux-x86_64.sh -O miniconda.sh; \\\n    chmod +x miniconda.sh; \\\n    ./miniconda.sh -p /opt/miniconda -b; \\\n    conda update --yes conda; \\\n    conda install --yes python=2.7\n\n# Velvet for assembly\nRUN apt-get install -y --no-install-recommends -qq zlib1g-dev && rm -rf /var/lib/apt/lists/*;\nRUN cd /opt; \\\n    wget www.ebi.ac.uk/~zerbino/velvet/velvet_1.2.10.tgz -O velvet.tgz; \\\n    tar xf velvet.tgz; rm velvet.tgz \\\n    cd velvet_1.2.10; \\\n    sed -i \"s/MAXKMERLENGTH=31/MAXKMERLENGTH=128/\" Makefile ; \\\n    make\n\n# Bedtools2.17\nRUN apt-get install -y --no-install-recommends -qq bedtools && rm -rf /var/lib/apt/lists/*;\n\n# Picard tools 1.118\n# To get fuse to work, I need the following (Issue here: https://github.com/dotcloud/docker/issues/514,\n# solution here: https://gist.github.com/henrik-muehe/6155333).\nENV MRKDUP /opt/picard-tools-1.118/MarkDuplicates.jar\nRUN apt-get install -y --no-install-recommends -qq libfuse2 openjdk-7-jre-headless && rm -rf /var/lib/apt/lists/*;\nRUN cd /tmp ; apt-get download fuse\nRUN cd /tmp ; dpkg-deb -x fuse_* .\nRUN cd /tmp ; dpkg-deb -e fuse_*\nRUN cd /tmp ; rm fuse_*.deb\nRUN cd /tmp ; echo -en '#!/bin/bash\\nexit 0\\n' > DEBIAN/postinst\nRUN cd /tmp ; dpkg-deb -b . /fuse.deb\nRUN cd /tmp ; dpkg -i /fuse.deb\nRUN cd /opt; \\\n    wget \"https://downloads.sourceforge.net/project/picard/picard-tools/1.118/picard-tools-1.118.zip?r=http%3A%2F%2Fsourceforge.net%2Fprojects%2Fpicard%2Ffiles%2Fpicard-tools%2F1.118%2F&ts=1396879817&use_mirror=freefr\" -O picard-tools-1.118.zip; \\\n    unzip picard-tools-1.118.zip\n\n# Samtools 0.1.19\nRUN apt-get install -y --no-install-recommends -qq samtools && rm -rf /var/lib/apt/lists/*;\n\n# Bowtie2.1.0\nRUN apt-get install -y --no-install-recommends -qq bowtie2 && rm -rf /var/lib/apt/lists/*;\n\n# Parallel 20130622-1\nRUN apt-get install -y --no-install-recommends -qq parallel && rm -rf /var/lib/apt/lists/*;\n\n\n\n# Install prodigal 2.60\nRUN cd /opt; \\\n    wget --no-check-certificate https://prodigal.googlecode.com/files/Prodigal-2.60.tar.gz; \\\n    tar xf Prodigal-2.60.tar.gz; rm Prodigal-2.60.tar.gz \\\n    cd Prodigal-2.60; \\\n    make; \\\n    ln -s /opt/Prodigal-2.60/prodigal /bin/prodigal\n\n# Install R\nRUN apt-get install -y --no-install-recommends -qq r-base && rm -rf /var/lib/apt/lists/*;\n\n# Install R packages\nRUN cd /opt;\\\n    RREPO='\"http://cran.rstudio.com/\"';\\\n    printf \"install.packages(\\\"ggplot2\\\", repo=$RREPO)\\ninstall.packages(\\\"reshape\\\",repo=$RREPO)\\ninstall.packages(\\\"gplots\\\",repo=$RREPO)\\ninstall.packages(\\\"ellipse\\\",repo=$RREPO)\\ninstall.packages(\\\"grid\\\",repo=$RREPO)\\ninstall.packages(\\\"getopt\\\",repo=$RREPO)\" > dep.R;\\\n    Rscript dep.R\n\n# Install python dependencies and fetch and install CONCOCT {{version}}\nRUN cd /opt; \\\n    conda update --yes conda; \\\n    conda install --yes python=2.7 atlas cython numpy scipy biopython pandas pip scikit-learn pysam; \\\n    pip install --no-cache-dir bcbio-gff; \\\n    wget --no-check-certificate https://github.com/BinPro/CONCOCT/archive/{{version}}.tar.gz; \\\n    tar xf {{version}}.tar.gz; rm {{version}}.tar.gz \\\n    cd CONCOCT-{{version}}; \\\n    python setup.py install\n\nENV CONCOCT /opt/CONCOCT-{{version}}\nENV CONCOCT_TEST /opt/Data/CONCOCT-test-data\nENV CONCOCT_EXAMPLE /opt/Data/CONCOCT-complete-example\n\n"
}