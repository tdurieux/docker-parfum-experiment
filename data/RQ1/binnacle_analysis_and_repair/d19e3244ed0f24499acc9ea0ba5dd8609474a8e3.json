{
  "startTime": 1674239365208,
  "endTime": 1674239365324,
  "originalSmells": [
    {
      "rule": "yarnCacheCleanAfterInstall",
      "position": {
        "lineStart": 28,
        "lineEnd": 28,
        "columnStart": 4,
        "columnEnd": 32
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM node:10-slim\n\n# Install node_modules into a different directory to avoid npm/npm#9863.\nRUN mkdir -p /srv/node\nCOPY package.json /srv/node/\nCOPY yarn.lock /srv/node/\nWORKDIR /srv/node\n\n# This file has been downloaded from: https://dl.yarnpkg.com/debian/pubkey.gpg\nCOPY docker/etc/pki/yarnpkg.gpg.key /etc/pki/yarnpkg.gpg.key\n\nRUN buildDeps=' \\\n    git \\\n    yarn \\\n    python \\\n    build-essential \\\n    ' && \\\n    # `apt-transport-https` is required to use https deb repositories\n    apt-get update -y && \\\n    apt-get install -y --no-install-recommends apt-transport-https && \\\n    # configure Yarn repository, see: https://yarnpkg.com/en/docs/install#linux-tab\n    apt-key add /etc/pki/yarnpkg.gpg.key && \\\n    echo \"deb https://dl.yarnpkg.com/debian/ stable main\" > /etc/apt/sources.list.d/yarn.list && \\\n    # the base image installs yarn, let's be sure we use ours\n    rm -f /usr/local/bin/yarn /usr/local/bin/yarnpkg && \\\n    # install deps\n    apt-get update -y && \\\n    apt-get install -y --no-install-recommends $buildDeps && \\\n    yarn install --pure-lockfile && \\\n    # cleanup\n    # apt-get purge -y $buildDeps && \\\n    rm -rf /var/lib/apt/lists/* && yarn cache clean;\n\nCOPY . /srv/code/\nWORKDIR /srv/code\n\n# The V2 Pipeline expects version.json to be located in /app/\n# As a temporary measure symlink to the version.json generated by Circle-CI\nRUN mkdir /app && ln -s /srv/code/version.json /app/version.json\n\n# Replace the local node_modules with the ones we installed above.\nRUN rm -rf node_modules\nRUN ln -s /srv/node/node_modules\n\nENV SERVER_HOST 0.0.0.0\nENV SERVER_PORT 4000\n\nCMD yarn start\n"
}