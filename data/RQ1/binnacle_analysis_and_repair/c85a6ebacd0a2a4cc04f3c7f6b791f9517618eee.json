{
  "startTime": 1674239578856,
  "endTime": 1674239579258,
  "originalSmells": [
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 43,
        "lineEnd": 43,
        "columnStart": 8,
        "columnEnd": 32
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM ubuntu:16.04\n\nMAINTAINER Emanuel Borsboom <manny@fpcomplete.com>\n\nARG GHC_VERSION=8.6.4\nARG LTS_SLUG=lts-13.11\nARG PID1_VERSION=0.1.2.0\nARG STACK_VERSION=1.9.3\nARG CUDA_VERSION=10.0\nARG BOOTSTRAP_COMMIT=9f2b7ab95c711794257b059604e80ab9ad3c0c45\nARG DEBIAN_FRONTEND=noninteractive\nARG VARIANT=build\n\n#\n# Set encoding to UTF-8 and PATH to find GHC and cabal/stack-installed binaries.\n#\n\nENV LANG=C.UTF-8 \\\n    LC_ALL=C.UTF-8 \\\n    PATH=/root/.cabal/bin:/root/.local/bin:/usr/local/cuda-$CUDA_VERSION/bin:/opt/ghc/$GHC_VERSION/bin:$PATH \\\n    CUDA_PATH=/usr/local/cuda-$CUDA_VERSION \\\n    LD_LIBRARY_PATH=/usr/local/cuda-$CUDA_VERSION/lib64:/usr/local/cuda-$CUDA_VERSION/nvvm/lib64\n\n#\n# Use Stackage's debian-bootstrap.sh script to install system libraries and\n# tools required to build any Stackage package.\n#\n\nRUN apt-get update && \\\n    apt-get install -y --no-install-recommends wget netbase ca-certificates && \\\n    if [ \"$VARIANT\" = \"small\" ];then \\\n        echo \"deb http://ppa.launchpad.net/hvr/ghc/ubuntu xenial main\" >>/etc/apt/sources.list && \\\n        echo \"deb-src http://ppa.launchpad.net/hvr/ghc/ubuntu xenial main\" >>/etc/apt/sources.list && \\\n        apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 063DAB2BDC0B3F9FCEBC378BFF3AEACEF6F88286 && \\\n        apt-get update && \\\n\t    apt-get install -y --no-install-recommends \\\n\t    \tghc-$GHC_VERSION ghc-$GHC_VERSION-htmldocs \\\n\t\t\tg++ gcc libc6-dev libffi-dev libgmp-dev make xz-utils zlib1g-dev git gnupg \\\n            libtinfo-dev; \\\n    else \\\n        wget -qO- https://raw.githubusercontent.com/fpco/stackage/$BOOTSTRAP_COMMIT/debian-bootstrap.sh | sed \"s/^GHCVER=8.6.3$/GHCVER=$GHC_VERSION/\" | bash && \\\n        # Add g++ version required for building 'double-conversion' \\\n        # (see https://github.com/commercialhaskell/stack/issues/4470) \\\n        apt-get install --no-install-recommends -y g++-7; \\\n    fi && \\\n    rm -rf /var/lib/apt/lists/*\n\n#\n# Create symlink to help tools find GHC documentation\n#\n\nRUN ln -s ghc /opt/ghc/$GHC_VERSION/share/doc/ghc-$GHC_VERSION\n\n#\n# Install Stack\n#\n\nRUN wget -qO- https://github.com/commercialhaskell/stack/releases/download/v$STACK_VERSION/stack-$STACK_VERSION-linux-x86_64.tar.gz | tar xz --wildcards --strip-components=1 -C /usr/local/bin '*/stack'\n\n#\n# Configure Stack to use the GHC installed in the Docker image rather than installing its own\n#\n\nRUN mkdir /etc/stack/ && \\\n    echo \"system-ghc: true\" >/etc/stack/config.yaml\n\n#\n# Use 'stack' to install basic Haskell tools like alex, happy, and cpphs. We\n# remove most of the STACK_ROOT afterward to save space, but keep the 'share'\n# files that some of these tools require.\n#\n\nRUN export STACK_ROOT=/usr/local/lib/stack && \\\n    stack --resolver=$LTS_SLUG --local-bin-path=/usr/local/bin install \\\n        cabal-install happy alex cpphs gtk2hs-buildtools hscolour hlint hindent && \\\n    cd $STACK_ROOT && \\\n    find . -type f -not -path './snapshots/*/share/*' -exec rm '{}' \\; && \\\n    find . -type d -print0 |sort -rz |xargs -0 rmdir 2>/dev/null || true\n\n#\n# Install 'pid1' init daemon\n#\n\nRUN wget -O- \"https://github.com/fpco/pid1/releases/download/v$PID1_VERSION/pid1-$PID1_VERSION-linux-x86_64.tar.gz\" | tar xzf - -C /usr/local && \\\n    chown root:root /usr/local/sbin && \\\n    chown root:root /usr/local/sbin/pid1\n\n#\n# Set up pid1 entrypoint and default command\n#\n\nENTRYPOINT [\"/usr/local/sbin/pid1\"]\nCMD [\"bash\"]\n"
}