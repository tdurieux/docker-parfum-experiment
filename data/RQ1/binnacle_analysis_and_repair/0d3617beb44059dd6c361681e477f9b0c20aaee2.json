{
  "startTime": 1674245409526,
  "endTime": 1674245409778,
  "originalSmells": [
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 11,
        "lineEnd": 33,
        "columnStart": 22,
        "columnEnd": 11
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 37,
        "lineEnd": 37,
        "columnStart": 22,
        "columnEnd": 128
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 11,
        "lineEnd": 33,
        "columnStart": 22,
        "columnEnd": 11
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 37,
        "lineEnd": 37,
        "columnStart": 22,
        "columnEnd": 128
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "#\n# Docker image for compiling Tesseract 4 (and Leptonica) from source code.\n# Includes SSH Server (root password is root).\n# https://github.com/tesseract-ocr/tesseract/wiki/Compiling#linux\n# http://www.leptonica.org/source/README.html\n#\n\nARG RELEASE=latest\n\nFROM ubuntu:${RELEASE}\n\nRUN apt-get update && apt-get install --no-install-recommends -y \\\n\tautoconf \\\n\tautoconf-archive \\\n\tautomake \\\n\tbuild-essential \\\n\tcheckinstall \\\n\tcmake \\\n\tg++ \\\n\tgit \\\n\tlibcairo2-dev \\\n\tlibicu-dev \\\n\tlibjpeg-dev \\\n\tlibpango1.0-dev \\\n\tlibgif-dev \\\n\tlibwebp-dev \\\n\tlibopenjp2-7-dev \\\n\tlibpng-dev \\\n\tlibtiff-dev \\\n\tlibtool \\\n\tpkg-config \\\n\twget \\\n\txzgv \\\n\tzlib1g-dev && rm -rf /var/lib/apt/lists/*;\n\n\n# SSH for diagnostic\nRUN apt-get update && apt-get install --no-install-recommends -y --allow-downgrades --allow-remove-essential --allow-change-held-packages openssh-server && rm -rf /var/lib/apt/lists/*;\nRUN mkdir /var/run/sshd\nRUN echo 'root:troubl3tim3' | chpasswd\nRUN sed -i 's/PermitRootLogin prohibit-password/PermitRootLogin yes/' /etc/ssh/sshd_config\n# SSH login fix. Otherwise user is kicked off after login\nRUN sed 's@session\\s*required\\s*pam_loginuid.so@session optional pam_loginuid.so@g' -i /etc/pam.d/sshd\nENV NOTVISIBLE \"in users profile\"\nRUN echo \"export VISIBLE=now\" >> /etc/profile\n\nEXPOSE 22\nCMD [\"/usr/sbin/sshd\", \"-D\"]\n\n# Directories\nENV SCRIPTS_DIR /home/scripts\nENV PKG_DIR /home/pkg\nENV BASE_DIR /home/workspace\nENV LEP_REPO_URL https://github.com/DanBloomberg/leptonica.git\nENV LEP_SRC_DIR ${BASE_DIR}/leptonica\nENV TES_REPO_URL https://github.com/tesseract-ocr/tesseract.git\nENV TES_SRC_DIR ${BASE_DIR}/tesseract\nENV TESSDATA_PREFIX /usr/local/share/tessdata\n\nRUN mkdir ${SCRIPTS_DIR}\nRUN mkdir ${PKG_DIR}\nRUN mkdir ${BASE_DIR}\nRUN mkdir ${TESSDATA_PREFIX}\n\nCOPY ./container-scripts/* ${SCRIPTS_DIR}/\nRUN chmod +x ${SCRIPTS_DIR}/*\nRUN ${SCRIPTS_DIR}/repos_clone.sh\nRUN ${SCRIPTS_DIR}/tessdata_download.sh\n\nWORKDIR /home\n\n\n"
}