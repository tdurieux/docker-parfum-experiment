{
  "startTime": 1674235026717,
  "endTime": 1674235027647,
  "originalSmells": [
    {
      "rule": "wgetUseHttpsUrl",
      "position": {
        "lineStart": 77,
        "lineEnd": 77,
        "columnStart": 4,
        "columnEnd": 105
      }
    },
    {
      "rule": "wgetUseHttpsUrl",
      "position": {
        "lineStart": 78,
        "lineEnd": 78,
        "columnStart": 4,
        "columnEnd": 108
      }
    },
    {
      "rule": "configureShouldUseBuildFlag",
      "position": {
        "lineStart": 27,
        "lineEnd": 27,
        "columnStart": 4,
        "columnEnd": 35
      }
    },
    {
      "rule": "configureShouldUseBuildFlag",
      "position": {
        "lineStart": 40,
        "lineEnd": 40,
        "columnStart": 4,
        "columnEnd": 35
      }
    },
    {
      "rule": "configureShouldUseBuildFlag",
      "position": {
        "lineStart": 61,
        "lineEnd": 61,
        "columnStart": 4,
        "columnEnd": 35
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 13,
        "lineEnd": 13,
        "columnStart": 67,
        "columnEnd": 89
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 14,
        "lineEnd": 14,
        "columnStart": 77,
        "columnEnd": 107
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 7,
        "lineEnd": 7,
        "columnStart": 22,
        "columnEnd": 76
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 33,
        "lineEnd": 33,
        "columnStart": 4,
        "columnEnd": 36
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 34,
        "lineEnd": 34,
        "columnStart": 4,
        "columnEnd": 33
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 35,
        "lineEnd": 35,
        "columnStart": 4,
        "columnEnd": 35
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 36,
        "lineEnd": 36,
        "columnStart": 4,
        "columnEnd": 33
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 37,
        "lineEnd": 37,
        "columnStart": 4,
        "columnEnd": 35
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 38,
        "lineEnd": 38,
        "columnStart": 4,
        "columnEnd": 36
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 44,
        "lineEnd": 44,
        "columnStart": 4,
        "columnEnd": 35
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 45,
        "lineEnd": 45,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 59,
        "lineEnd": 59,
        "columnStart": 4,
        "columnEnd": 34
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 65,
        "lineEnd": 65,
        "columnStart": 4,
        "columnEnd": 33
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 69,
        "lineEnd": 69,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 76,
        "lineEnd": 76,
        "columnStart": 4,
        "columnEnd": 39
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 80,
        "lineEnd": 80,
        "columnStart": 4,
        "columnEnd": 36
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 85,
        "lineEnd": 85,
        "columnStart": 4,
        "columnEnd": 34
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 99,
        "lineEnd": 99,
        "columnStart": 4,
        "columnEnd": 45
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 114,
        "lineEnd": 114,
        "columnStart": 4,
        "columnEnd": 44
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 33,
        "lineEnd": 33,
        "columnStart": 4,
        "columnEnd": 36
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 34,
        "lineEnd": 34,
        "columnStart": 4,
        "columnEnd": 33
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 35,
        "lineEnd": 35,
        "columnStart": 4,
        "columnEnd": 35
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 36,
        "lineEnd": 36,
        "columnStart": 4,
        "columnEnd": 33
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 37,
        "lineEnd": 37,
        "columnStart": 4,
        "columnEnd": 35
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 38,
        "lineEnd": 38,
        "columnStart": 4,
        "columnEnd": 36
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 44,
        "lineEnd": 44,
        "columnStart": 4,
        "columnEnd": 35
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 45,
        "lineEnd": 45,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 59,
        "lineEnd": 59,
        "columnStart": 4,
        "columnEnd": 34
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 65,
        "lineEnd": 65,
        "columnStart": 4,
        "columnEnd": 33
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 69,
        "lineEnd": 69,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 76,
        "lineEnd": 76,
        "columnStart": 4,
        "columnEnd": 39
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 80,
        "lineEnd": 80,
        "columnStart": 4,
        "columnEnd": 36
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 85,
        "lineEnd": 85,
        "columnStart": 4,
        "columnEnd": 34
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 99,
        "lineEnd": 99,
        "columnStart": 4,
        "columnEnd": 45
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 114,
        "lineEnd": 114,
        "columnStart": 4,
        "columnEnd": 44
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 7,
        "lineEnd": 7,
        "columnStart": 22,
        "columnEnd": 76
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 33,
        "lineEnd": 33,
        "columnStart": 4,
        "columnEnd": 36
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 34,
        "lineEnd": 34,
        "columnStart": 4,
        "columnEnd": 33
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 35,
        "lineEnd": 35,
        "columnStart": 4,
        "columnEnd": 35
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 36,
        "lineEnd": 36,
        "columnStart": 4,
        "columnEnd": 33
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 37,
        "lineEnd": 37,
        "columnStart": 4,
        "columnEnd": 35
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 38,
        "lineEnd": 38,
        "columnStart": 4,
        "columnEnd": 36
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 44,
        "lineEnd": 44,
        "columnStart": 4,
        "columnEnd": 35
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 45,
        "lineEnd": 45,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 59,
        "lineEnd": 59,
        "columnStart": 4,
        "columnEnd": 34
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 65,
        "lineEnd": 65,
        "columnStart": 4,
        "columnEnd": 33
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 69,
        "lineEnd": 69,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 76,
        "lineEnd": 76,
        "columnStart": 4,
        "columnEnd": 39
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 80,
        "lineEnd": 80,
        "columnStart": 4,
        "columnEnd": 36
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 85,
        "lineEnd": 85,
        "columnStart": 4,
        "columnEnd": 34
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 99,
        "lineEnd": 99,
        "columnStart": 4,
        "columnEnd": 45
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 114,
        "lineEnd": 114,
        "columnStart": 4,
        "columnEnd": 44
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 33,
        "lineEnd": 33,
        "columnStart": 4,
        "columnEnd": 60
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 34,
        "lineEnd": 34,
        "columnStart": 4,
        "columnEnd": 57
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 35,
        "lineEnd": 35,
        "columnStart": 4,
        "columnEnd": 59
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 36,
        "lineEnd": 36,
        "columnStart": 4,
        "columnEnd": 57
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 37,
        "lineEnd": 37,
        "columnStart": 4,
        "columnEnd": 59
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 38,
        "lineEnd": 38,
        "columnStart": 4,
        "columnEnd": 60
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 44,
        "lineEnd": 44,
        "columnStart": 4,
        "columnEnd": 59
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 45,
        "lineEnd": 45,
        "columnStart": 4,
        "columnEnd": 51
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 59,
        "lineEnd": 59,
        "columnStart": 4,
        "columnEnd": 58
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 65,
        "lineEnd": 65,
        "columnStart": 4,
        "columnEnd": 57
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 69,
        "lineEnd": 69,
        "columnStart": 4,
        "columnEnd": 51
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 76,
        "lineEnd": 76,
        "columnStart": 4,
        "columnEnd": 63
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 80,
        "lineEnd": 80,
        "columnStart": 4,
        "columnEnd": 60
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 85,
        "lineEnd": 85,
        "columnStart": 4,
        "columnEnd": 58
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 99,
        "lineEnd": 99,
        "columnStart": 4,
        "columnEnd": 69
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 114,
        "lineEnd": 114,
        "columnStart": 4,
        "columnEnd": 68
      }
    }
  ],
  "repairedDockerfile": "#\n# Multi-stage build\n# build image using debian:latest\n#\nFROM debian:latest AS builder\nARG GITHUB_CREDENTIALS\n\nRUN apt-get update && apt-get -y --no-install-recommends install wget git build-essential golang-1.8 && rm -rf /var/lib/apt/lists/*;\n\nRUN ln -fs /usr/lib/go-1.8/bin/go /usr/bin/go\n\n# FIXME: all this should be in the subproject.\nWORKDIR /build\nRUN wget https://github.com/cisco/libsrtp/archive/v2.1.0.tar.gz && tar xvfz v2.1.0.tar.gz && rm v2.1.0.tar.gz\nRUN wget https://github.com/openssl/openssl/archive/OpenSSL_1_1_0f.tar.gz && tar xvfz OpenSSL_1_1_0f.tar.gz && rm OpenSSL_1_1_0f.tar.gz\nRUN git clone --depth 1 -b2.54.0 https://github.com/GNOME/glib\nRUN git clone --depth 1 -b1.14.0 https://github.com/GStreamer/gstreamer\nRUN git clone --depth 1 -b1.14.0 https://github.com/GStreamer/gst-plugins-base\nRUN git clone --depth 1 -borc-0.4.27 https://github.com/GStreamer/orc\nRUN git clone --depth 1 -b1.14.0 https://github.com/GStreamer/gst-plugins-good\nRUN git clone --depth 1 -b1.14.0 https://github.com/GStreamer/gst-plugins-bad\nRUN git clone --depth 1 -b1.14.0 https://github.com/GStreamer/gst-plugins-ugly\nRUN git clone --depth 1 -b1.14.0 https://github.com/GStreamer/gst-libav\n\nWORKDIR /build/openssl-OpenSSL_1_1_0f\nRUN ./config --prefix=/usr/local && make -j$(nproc) && make install\nWORKDIR /build/libsrtp-2.1.0\nRUN ./configure --build=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\" --prefix=/usr/local && make -j$(nproc) && make install\n\nRUN apt-get update\n\n#\nWORKDIR /build/glib\nRUN apt-get install --no-install-recommends -y dh-autoreconf && rm -rf /var/lib/apt/lists/*;\nRUN apt-get install --no-install-recommends -y libffi-dev && rm -rf /var/lib/apt/lists/*;\nRUN apt-get install --no-install-recommends -y libmount-dev && rm -rf /var/lib/apt/lists/*;\nRUN apt-get install --no-install-recommends -y zlib1g-dev && rm -rf /var/lib/apt/lists/*;\nRUN apt-get install --no-install-recommends -y libpcre3-dev && rm -rf /var/lib/apt/lists/*;\nRUN apt-get install --no-install-recommends -y gtk-doc-tools && rm -rf /var/lib/apt/lists/*;\nRUN ./autogen.sh\nRUN ./configure --build=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\" --prefix=/usr/local\nRUN make -j$(nproc) && make install\n\nWORKDIR /build/gstreamer\nRUN apt-get install --no-install-recommends -y libbison-dev && rm -rf /var/lib/apt/lists/*;\nRUN apt-get install --no-install-recommends -y flex && rm -rf /var/lib/apt/lists/*;\nRUN ./autogen.sh --prefix=/usr/local --disable-examples --disable-tests --disable-failing-tests --disable-benchmarks --disable-gtk-doc-html\nRUN make -j$(nproc) && make install\n\nWORKDIR /build/orc\nRUN ./autogen.sh --prefix=/usr/local --disable-gtk-doc-html\nRUN make -j$(nproc) && make install\n\n# FIXME: move up\nRUN echo \"/usr/local/lib\" > /etc/ld.so.conf.d/local.conf\nRUN echo \"/usr/local/lib/gstreamer-1.0\" >> /etc/ld.so.conf.d/local.conf\nRUN /sbin/ldconfig\n\nWORKDIR /build/gst-plugins-base\nRUN apt-get install --no-install-recommends -y libopus-dev && rm -rf /var/lib/apt/lists/*;\nRUN ./autogen.sh\nRUN ./configure --build=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\" --prefix=/usr/local\nRUN make -j$(nproc) && make install\n\nWORKDIR /build/gst-plugins-good\nRUN apt-get install --no-install-recommends -y libvpx-dev && rm -rf /var/lib/apt/lists/*;\nRUN ./autogen.sh --prefix=/usr/local --disable-gtk-doc-html\nRUN make -j$(nproc) && make install\n\nRUN apt-get install --no-install-recommends -y nasm && rm -rf /var/lib/apt/lists/*;\nWORKDIR /build\nRUN git clone https://github.com/cisco/openh264\nWORKDIR /build/openh264\nRUN make -j$(nproc) -j4 && make install\n\nWORKDIR /build/gst-plugins-bad\nRUN apt-get install --no-install-recommends -y libvo-aacenc-dev && rm -rf /var/lib/apt/lists/*;\nRUN wget https://fr.archive.ubuntu.com/ubuntu/pool/multiverse/f/faac/libfaac0_1.28+cvs20151130-1_amd64.deb\nRUN wget https://fr.archive.ubuntu.com/ubuntu/pool/multiverse/f/faac/libfaac-dev_1.28+cvs20151130-1_amd64.deb\nRUN dpkg -i libfaac0_1.28+cvs20151130-1_amd64.deb libfaac-dev_1.28+cvs20151130-1_amd64.deb\nRUN apt-get install --no-install-recommends -y libopencv-dev && rm -rf /var/lib/apt/lists/*;\nRUN ./autogen.sh --prefix=/usr/local --disable-gtk-doc --disable-gtk-doc-html --disable-hls\nRUN make -j$(nproc) && make install\n\nWORKDIR /build/gst-plugins-ugly\nRUN apt-get install --no-install-recommends -y libx264-dev && rm -rf /var/lib/apt/lists/*;\nRUN ./autogen.sh --prefix=/usr/local --disable-gtk-doc --disable-gtk-doc-html\nRUN make -j$(nproc) && make install\n\nWORKDIR /build/gst-libav\nRUN ./autogen.sh --prefix=/usr/local --disable-gtk-doc --disable-gtk-doc-html\nRUN make -j$(nproc) && make install\n\nWORKDIR /build\nRUN git clone -b1.0.6 https://github.com/intel/cmrt.git\nRUN git clone -b2.1.0 https://github.com/intel/libva.git\nRUN git clone -b1.0.2 https://github.com/01org/intel-hybrid-driver.git\nRUN git clone -b2.1.0 https://github.com/intel/intel-vaapi-driver.git\nRUN git clone -b2.1.0 https://github.com/intel/libva-utils.git\nRUN apt-get install --no-install-recommends -y libdrm-dev libudev-dev && rm -rf /var/lib/apt/lists/*;\nWORKDIR /build/libva\nRUN ./autogen.sh && make install\nWORKDIR /build/cmrt\nRUN ./autogen.sh && make install\nWORKDIR /build/intel-hybrid-driver\nRUN ./autogen.sh && make install\nWORKDIR /build/intel-vaapi-driver\nRUN ./autogen.sh --enable-hybrid-codec && make install\nWORKDIR /build/libva-utils\nRUN ./autogen.sh && make install\n\nWORKDIR /build\nRUN git clone --depth 1 -b1.12.5 https://github.com/GStreamer/gstreamer-vaapi\nWORKDIR /build/gstreamer-vaapi\nRUN apt-get install --no-install-recommends -y libva-dev libudev-dev && rm -rf /var/lib/apt/lists/*;\nRUN ./autogen.sh --prefix=/usr/local --disable-gtk-doc --disable-gtk-doc-html\nRUN make -j$(nproc) && make install\n\nRUN echo \"/usr/local/lib\" >> /etc/ld.so.conf.d/mcu.conf\nRUN echo \"/usr/local/lib/gstreamer-1.0\" >> /etc/ld.so.conf.d/mcu.conf\nRUN ldconfig -vvvvv\n\n#\nWORKDIR /go/src/app\n\n# prepare gopaths directories\nRUN mkdir -p /vol-gopath-versioned\nRUN mkdir -p /vol-gopath-unversioned\n\n# setup GOPATH\nENV GOPATH=/vol-gopath-unversioned:/vol-gopath-versioned:/go\n\n# install hot reload module\nRUN /usr/lib/go-1.8/bin/go get github.com/pilu/fresh\n\nRUN ln -fs /usr/lib/go-1.8/bin/go /usr/bin/go\n\n# go will need to download code from private github repositories\nRUN echo '[url \"https://'$GITHUB_CREDENTIALS'@github.com/\"]' >> /root/.gitconfig\nRUN echo '\\tinsteadOf = git://github.com/' >>  /root/.gitconfig\nRUN echo '[url \"https://'$GITHUB_CREDENTIALS'@github.com/\"]'   >>  /root/.gitconfig\nRUN echo '\\tinsteadOf = https://github.com/'  >>  /root/.gitconfig\n\n# build\nENV CGO_CFLAGS -pthread -I/usr/local/include/gstreamer-1.0 -I/usr/local/include/glib-2.0 -I/usr/local/lib/glib-2.0/include -I/usr/local/include\nENV CGO_LDFLAGS -L/usr/local/lib -lcrypto -lssl -lsrtp2  -L/usr/local/lib -lgstreamer-1.0 -lgobject-2.0 -lglib-2.0 -lgstapp-1.0\n\n# hacky: dtls, gst, rtcp, sdp, srtp should be in the \"master\" or their own github.com/...\n#  until it exists, we need to \"copy\" them inside the image\n#  because go get will not be able to fetch these dependencies\nRUN mkdir -p /vol-gopath-versioned/src/github.com/heytribe/live-webrtcsignaling\nCOPY . /vol-gopath-versioned/src/github.com/heytribe/live-webrtcsignaling\n\n# copy src\nCOPY . .\n\nCOPY ./go-wrapper /usr/bin/\nRUN chmod 755 /usr/bin/go-wrapper\n\n# download dependencies & build app\nRUN go-wrapper download && \\\n    go-wrapper install && \\\n    go build\n\nCMD /vol-gopath-unversioned/bin/fresh\n\n#\n# Multi-stage build\n# prodable image\n#\nFROM debian:latest AS base\nWORKDIR /go/src/app\nCOPY --from=builder /usr/local/lib/gstreamer-1.0/libgstvpx.so /usr/local/lib/gstreamer-1.0/libgstopus.so /usr/local/lib/gstreamer-1.0/libgstcoreelements.so /usr/local/lib/gstreamer-1.0/libgstvideorate.so /usr/local/lib/gstreamer-1.0/libgstrtp.so /usr/local/lib/gstreamer-1.0/libgstopusparse.so /usr/local/lib/gstreamer-1.0/libgstapp.so /usr/local/lib/gstreamer-1.0/libgstx264.so /usr/local/lib/gstreamer-1.0/libgstapp.so /usr/local/lib/gstreamer-1.0/libgstlibav.so /usr/local/lib/gstreamer-1.0/libgstvideoparsersbad.so /usr/local/lib/gstreamer-1.0/libgstopenh264.so /usr/local/lib/gstreamer-1.0/libgstvaapi.so /usr/local/lib/gstreamer-1.0/\nCOPY --from=builder /usr/local/lib/libgstapp-1.0.so.0 /usr/local/lib/libgsttag-1.0.so.0 /usr/local/lib/libgstrtp-1.0.so.0 /usr/local/lib/libgstpbutils-1.0.so.0 /usr/local/lib/libgstaudio-1.0.so.0 /usr/local/lib/libgstvideo-1.0.so.0 /usr/local/lib/libgstbase-1.0.so.0 /usr/local/lib/libgstreamer-1.0.so.0 /usr/local/lib/libgobject-2.0.so.0 /usr/local/lib/libglib-2.0.so.0 /usr/lib/x86_64-linux-gnu/libopus.so.0 /usr/lib/x86_64-linux-gnu/libvpx.so.4 /lib/x86_64-linux-gnu/libz.so.1 /usr/local/lib/liborc-0.4.so.0 /usr/local/lib/libgmodule-2.0.so.0 /usr/lib/x86_64-linux-gnu/libffi.so.6 /lib/x86_64-linux-gnu/libpcre.so.3 /usr/local/lib/libcrypto.so.1.1 /usr/local/lib/libssl.so.1.1 /usr/local/lib/libgstreamer-1.0.so.0 /usr/lib/x86_64-linux-gnu/libx264.so.148 /usr/local/lib/libgstcodecparsers-1.0.so.0 /usr/local/lib/libopenh264.so.4 /usr/local/lib/libva-drm.so.2 /usr/local/lib/libva-x11.so.2 /usr/local/lib/libva.so.2 /usr/local/lib/libgstallocators-1.0.so.0 /usr/lib/x86_64-linux-gnu/libXrandr.so.2 /usr/lib/x86_64-linux-gnu/libXrender.so.1 /usr/lib/x86_64-linux-gnu/libX11.so.6 /usr/lib/x86_64-linux-gnu/libXext.so.6 /usr/lib/x86_64-linux-gnu/libXfixes.so.3 /usr/lib/x86_64-linux-gnu/libdrm.so.2 /usr/lib/x86_64-linux-gnu/libva-wayland.so.1 /usr/lib/x86_64-linux-gnu/libwayland-client.so.0 /usr/lib/x86_64-linux-gnu/libxcb.so.1 /usr/lib/x86_64-linux-gnu/libva.so.1 /usr/lib/x86_64-linux-gnu/libXau.so.6 /usr/lib/x86_64-linux-gnu/libXdmcp.so.6 /lib/x86_64-linux-gnu/libbsd.so.0 /usr/local/lib/libcmrt.so.1 /usr/lib/x86_64-linux-gnu/libdrm_intel.so.1 /usr/lib/x86_64-linux-gnu/libpciaccess.so.0 /usr/local/lib/\nCOPY --from=builder /usr/local/lib/dri /usr/local/lib/dri\nCOPY --from=builder /usr/local/bin/gst-inspect-1.0 /usr/local/bin/vainfo /usr/local/bin/\n\nFROM base AS release\nWORKDIR /go/src/app\nCOPY star_tribe.pm.key /etc/ssl/\nCOPY star_tribedev.pm.key /etc/ssl/\nCOPY star_tribe.pm.crt /etc/ssl/\nCOPY star_tribedev.pm.crt /etc/ssl/\nCOPY --from=builder /go/src/app/app mcu\nRUN echo \"/usr/local/lib\" >> /etc/ld.so.conf.d/mcu.conf\nRUN echo \"/usr/local/lib/gstreamer-1.0\" >> /etc/ld.so.conf.d/mcu.conf\nRUN ldconfig -vvvvv\nCMD /go/src/app/mcu\n"
}