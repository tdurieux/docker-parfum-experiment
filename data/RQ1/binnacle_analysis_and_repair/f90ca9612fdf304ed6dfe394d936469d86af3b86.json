{
  "startTime": 1674243049353,
  "endTime": 1674243049670,
  "originalSmells": [
    {
      "rule": "configureShouldUseBuildFlag",
      "position": {
        "lineStart": 59,
        "lineEnd": 59,
        "columnStart": 4,
        "columnEnd": 41
      }
    },
    {
      "rule": "configureShouldUseBuildFlag",
      "position": {
        "lineStart": 67,
        "lineEnd": 67,
        "columnStart": 4,
        "columnEnd": 40
      }
    },
    {
      "rule": "configureShouldUseBuildFlag",
      "position": {
        "lineStart": 75,
        "lineEnd": 75,
        "columnStart": 4,
        "columnEnd": 126
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 43,
        "lineEnd": 43,
        "columnStart": 4,
        "columnEnd": 26
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 45,
        "lineEnd": 45,
        "columnStart": 4,
        "columnEnd": 38
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 47,
        "lineEnd": 47,
        "columnStart": 4,
        "columnEnd": 94
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 49,
        "lineEnd": 49,
        "columnStart": 4,
        "columnEnd": 28
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 84,
        "lineEnd": 84,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 86,
        "lineEnd": 86,
        "columnStart": 4,
        "columnEnd": 26
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 88,
        "lineEnd": 88,
        "columnStart": 4,
        "columnEnd": 32
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 90,
        "lineEnd": 90,
        "columnStart": 4,
        "columnEnd": 35
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 43,
        "lineEnd": 43,
        "columnStart": 4,
        "columnEnd": 26
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 45,
        "lineEnd": 45,
        "columnStart": 4,
        "columnEnd": 38
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 47,
        "lineEnd": 47,
        "columnStart": 4,
        "columnEnd": 94
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 49,
        "lineEnd": 49,
        "columnStart": 4,
        "columnEnd": 28
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 84,
        "lineEnd": 84,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 86,
        "lineEnd": 86,
        "columnStart": 4,
        "columnEnd": 26
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 88,
        "lineEnd": 88,
        "columnStart": 4,
        "columnEnd": 32
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 90,
        "lineEnd": 90,
        "columnStart": 4,
        "columnEnd": 35
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 43,
        "lineEnd": 43,
        "columnStart": 4,
        "columnEnd": 26
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 45,
        "lineEnd": 45,
        "columnStart": 4,
        "columnEnd": 38
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 47,
        "lineEnd": 47,
        "columnStart": 4,
        "columnEnd": 94
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 49,
        "lineEnd": 49,
        "columnStart": 4,
        "columnEnd": 28
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 84,
        "lineEnd": 84,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 86,
        "lineEnd": 86,
        "columnStart": 4,
        "columnEnd": 26
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 88,
        "lineEnd": 88,
        "columnStart": 4,
        "columnEnd": 32
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 90,
        "lineEnd": 90,
        "columnStart": 4,
        "columnEnd": 35
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 43,
        "lineEnd": 43,
        "columnStart": 4,
        "columnEnd": 50
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 45,
        "lineEnd": 45,
        "columnStart": 4,
        "columnEnd": 62
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 47,
        "lineEnd": 47,
        "columnStart": 4,
        "columnEnd": 118
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 49,
        "lineEnd": 49,
        "columnStart": 4,
        "columnEnd": 52
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 84,
        "lineEnd": 84,
        "columnStart": 4,
        "columnEnd": 51
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 86,
        "lineEnd": 86,
        "columnStart": 4,
        "columnEnd": 50
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 88,
        "lineEnd": 88,
        "columnStart": 4,
        "columnEnd": 56
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 90,
        "lineEnd": 90,
        "columnStart": 4,
        "columnEnd": 59
      }
    }
  ],
  "repairedDockerfile": "#\n# Docker file to build a Bro image pre loeaded with Bro and Bro-Kafka plugin.\n# This is used in the Bro/Logisland tutorial: Indexing Bro events.\n#\n\nFROM ubuntu:16.04\nMAINTAINER Hurence version: 0.1\n\n# Update apt sources\nRUN apt-get update\n\nUSER root\n\n#\n# Define where things will be installed\n#\n\n# Base dir for work is the user directory\nARG HOME_DIR=/root\n# Where to put sources to compile\nARG SRC_DIR=${HOME_DIR}/sources\n# Where to put .pcap files\nARG PCAP_DIR=${HOME_DIR}/pcap_files\n# Base install dir for binaries\nARG INSTALL_DIR=/usr/local\n# Installed Bro base dir\nARG BRO_BASE_DIR=${INSTALL_DIR}/bro\n\n#\n# Create needed base directories\n#\n\nRUN mkdir -p ${SRC_DIR}\nRUN mkdir -p ${PCAP_DIR}\nRUN mkdir -p ${BRO_BASE_DIR}\n\n#\n# Install dev tools\n#\n\n# Note: apt-get install -y avoids prompting for confirmation\n\n# Git\nRUN apt-get install --no-install-recommends -y git && rm -rf /var/lib/apt/lists/*;\n# make, gcc...\nRUN apt-get install --no-install-recommends -y build-essential && rm -rf /var/lib/apt/lists/*;\n# Special additional components needed for building bro workspace\nRUN apt-get install --no-install-recommends -y python-dev flex bison libpcap-dev libssl-dev zlib1g-dev flex bison swig && rm -rf /var/lib/apt/lists/*;\n# CMake\nRUN apt-get install --no-install-recommends -y cmake && rm -rf /var/lib/apt/lists/*;\n\n#\n# Install sources, build and install Bro, librdkafka and the Bro-Kafka plugin\n#\n\n# Download, build and install Bro\nRUN cd ${SRC_DIR}; \\\n    git clone --recursive https://github.com/bro/bro.git; \\\n    cd bro; \\\n    ./configure --build=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\" --prefix=${BRO_BASE_DIR}; \\\n    make; \\\n    make install;\n\n# Download, build and install librdkafka\nRUN cd ${SRC_DIR}; \\\n    git clone https://github.com/edenhill/librdkafka.git; \\\n    cd librdkafka; \\\n    ./configure --build=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\" --prefix=${INSTALL_DIR}; \\\n    make; \\\n    make install;\n\n# Download, build and install Bro-Kafka plugin\nRUN cd ${SRC_DIR}; \\\n    git clone https://github.com/apache/metron-bro-plugin-kafka.git; \\\n    cd metron-bro-plugin-kafka; \\\n    ./configure --build=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\" --install-root=${BRO_BASE_DIR}/lib/bro/plugins --bro-dist=${SRC_DIR}/bro --with-librdkafka=${INSTALL_DIR}/lib; \\\n    make; \\\n    make install;\n\n#\n# Install additional tools needed for the bro tutorial\n#\n\n# Install curl for accessing Logisland ElasticSearch\nRUN apt-get install --no-install-recommends -y curl && rm -rf /var/lib/apt/lists/*;\n# Install vi to be able to edit bro config files\nRUN apt-get install --no-install-recommends -y vim && rm -rf /var/lib/apt/lists/*;\n# Install ifconfig to be able to check container ip\nRUN apt-get install --no-install-recommends -y net-tools && rm -rf /var/lib/apt/lists/*;\n# Install ping requests to easily generate a DNS query\nRUN apt-get install --no-install-recommends -y iputils-ping && rm -rf /var/lib/apt/lists/*;\n\n#\n# Define environment variables\n#\n\n# Bro\nENV BRO_HOME ${BRO_BASE_DIR}\n# Update path for bro binary\nENV PATH=\"${BRO_HOME}/bin:${PATH}\"\n# Pcap files\nENV PCAP_HOME ${PCAP_DIR}\n\n#\n# Copy .pcap files\n#\n\n# ssh.pcap comes from https://www.bro.org/bro-workshop-2011/solutions/notices/\n# It is used to be able to easily generate a Bro notice (password guessing)\nCOPY ssh.pcap ${PCAP_DIR}\n\nWORKDIR /root\n"
}