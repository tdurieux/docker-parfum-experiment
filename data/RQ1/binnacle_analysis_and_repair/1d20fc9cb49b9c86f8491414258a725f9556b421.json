{
  "startTime": 1674244316052,
  "endTime": 1674244316633,
  "originalSmells": [
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 61,
        "lineEnd": 61,
        "columnStart": 7,
        "columnEnd": 89
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "# Ubuntu 16.04 (Xenial)\nFROM ubuntu:16.04\n\n# set AZTK version compatibility\nENV AZTK_DOCKER_IMAGE_VERSION 0.1.0\n\n# set version of python required for aztk\nENV AZTK_PYTHON_VERSION=3.5.2\n\n# modify these ARGs on build time to specify your desired versions of Spark/Hadoop\nENV SPARK_VERSION_KEY 2.1.0\nENV SPARK_FULL_VERSION spark-${SPARK_VERSION_KEY}-bin-without-hadoop\nENV HADOOP_VERSION 2.8.3\nENV LANG=C.UTF-8 LC_ALL=C.UTF-8\n\n# set env vars\nENV JAVA_HOME /usr/lib/jvm/java-1.8.0-openjdk-amd64\nENV SPARK_HOME /home/spark-current\nENV PATH $SPARK_HOME/bin:$PATH\n\nRUN apt-get clean \\\n    && apt-get update -y \\\n    # install dependency packages\n    && apt-get install -y --no-install-recommends \\\n       make \\\n       build-essential \\\n       zlib1g-dev \\\n       libssl-dev \\\n       libbz2-dev \\\n       libreadline-dev \\\n       libsqlite3-dev \\\n       maven \\\n       wget \\\n       curl \\\n       llvm \\\n       git \\\n       libncurses5-dev \\\n       libncursesw5-dev \\\n       python3-pip \\\n       python3-venv \\\n       xz-utils \\\n       tk-dev \\\n    && apt-get update -y \\\n    # install [software-properties-common]\n    # so we can use [apt-add-repository] to add the repository [ppa:webupd8team/java]\n    # from which we install Java8\n    && apt-get install -y --no-install-recommends software-properties-common \\\n    && apt-add-repository ppa:webupd8team/java -y \\\n    && apt-get update -y \\\n    # install java\n    && apt-get install -y --no-install-recommends default-jdk \\\n    # set up user python and aztk python\n    && ln -s /usr/bin/python3.5 /usr/bin/python \\\n    && /usr/bin/python -m pip install --upgrade pip setuptools wheel \\\n    && apt-get remove -y python3-pip \\\n    # build and install spark\n    && git clone https://github.com/apache/spark.git \\\n    && cd spark \\\n    && git checkout tags/v${SPARK_VERSION_KEY} \\\n    && export MAVEN_OPTS=\"-Xmx3g -XX:ReservedCodeCacheSize=1024m\" \\\n    && ./dev/make-distribution.sh --name custom-spark --pip --tgz -Pnetlib-lgpl -Phive -Phive-thriftserver -Dhadoop.version=${HADOOP_VERSION} -DskipTests \\\n    && tar -xvzf /spark/spark-${SPARK_VERSION_KEY}-bin-custom-spark.tgz --directory=/home \\\n    && ln -s \"/home/spark-${SPARK_VERSION_KEY}-bin-custom-spark\" /home/spark-current \\\n    && rm -rf /spark \\ \n    # copy azure storage jars and dependencies to $SPARK_HOME/jars\n    && echo \"<project>\" \\\n                    \"<modelVersion>4.0.0</modelVersion>\" \\\n                    \"<groupId>groupId</groupId>\" \\\n                    \"<artifactId>artifactId</artifactId>\" \\\n                    \"<version>1.0</version>\" \\\n                \"<dependencies>\" \\\n                    \"<dependency>\" \\\n                        \"<groupId>org.apache.hadoop</groupId>\" \\\n                        \"<artifactId>hadoop-azure-datalake</artifactId>\" \\\n                        \"<version>${HADOOP_VERSION}</version>\" \\\n                    \"<exclusions>\" \\\n                        \"<exclusion>\" \\\n                            \"<groupId>org.apache.hadoop</groupId>\" \\\n                            \"<artifactId>hadoop-common</artifactId>\" \\\n                        \"</exclusion>\" \\\n                    \"</exclusions> \" \\\n                    \"</dependency>\" \\\n                    \"<dependency>\" \\\n                        \"<groupId>org.apache.hadoop</groupId>\" \\\n                        \"<artifactId>hadoop-azure</artifactId>\" \\\n                        \"<version>${HADOOP_VERSION}</version>\" \\\n                    \"<exclusions>\" \\\n                        \"<exclusion>\" \\\n                            \"<groupId>org.apache.hadoop</groupId>\" \\\n                            \"<artifactId>hadoop-common</artifactId>\" \\\n                        \"</exclusion>\" \\\n                        \"<exclusion>\" \\\n                            \"<groupId>com.fasterxml.jackson.core</groupId>\" \\\n                            \"<artifactId>jackson-core</artifactId>\" \\\n                        \"</exclusion>\" \\\n                    \"</exclusions> \" \\\n                    \"</dependency>\" \\\n                    \"<dependency>\" \\\n                        \"<groupId>com.microsoft.sqlserver</groupId>\" \\\n                        \"<artifactId>mssql-jdbc</artifactId>\" \\\n                        \"<version>6.4.0.jre8</version>\" \\\n                    \"</dependency>\" \\\n                    \"<dependency>\" \\\n                        \"<groupId>com.microsoft.azure</groupId>\" \\\n                        \"<artifactId>azure-storage</artifactId>\" \\\n                        \"<version>2.2.0</version>\" \\\n                        \"<exclusions>\" \\\n                            \"<exclusion>\" \\\n                                \"<groupId>com.fasterxml.jackson.core</groupId>\" \\\n                                \"<artifactId>jackson-core</artifactId>\" \\\n                            \"</exclusion>\" \\\n                            \"<exclusion>\" \\\n                                \"<groupId>org.apache.commons</groupId>\" \\\n                                \"<artifactId>commons-lang3</artifactId>\" \\\n                            \"</exclusion>\" \\\n                            \"<exclusion>\" \\\n                                \"<groupId>org.slf4j</groupId>\" \\\n                                \"<artifactId>slf4j-api</artifactId>\" \\\n                            \"</exclusion>\" \\\n                        \"</exclusions>\" \\\n                    \"</dependency>\" \\\n                    \"<dependency>\" \\\n                        \"<groupId>com.microsoft.azure</groupId>\" \\\n                        \"<artifactId>azure-cosmosdb-spark_${SPARK_VERSION_KEY}_2.11</artifactId>\" \\\n                        \"<version>1.1.1</version>\" \\\n                        \"<exclusions>\" \\\n                            \"<exclusion>\" \\\n                                \"<groupId>org.apache.tinkerpop</groupId>\" \\\n                                \"<artifactId>tinkergraph-gremlin</artifactId>\" \\\n                            \"</exclusion>\" \\\n                            \"<exclusion>\" \\\n                                \"<groupId>org.apache.tinkerpop</groupId>\" \\\n                                \"<artifactId>spark-gremlin</artifactId>\" \\\n                            \"</exclusion>\" \\\n                            \"<exclusion>\" \\\n                                \"<groupId>io.netty</groupId>\" \\\n                                \"<artifactId>*</artifactId>\" \\\n                            \"</exclusion>\" \\\n                            \"<exclusion>\" \\\n                                \"<groupId>com.fasterxml.jackson.core</groupId>\" \\\n                                \"<artifactId>jackson-annotations</artifactId>\" \\\n                            \"</exclusion>\" \\\n                        \"</exclusions> \" \\\n                    \"</dependency>\" \\\n                \"</dependencies>\" \\\n            \"</project>\" > /tmp/pom.xml \\\n    && cd /tmp \\\n    && mvn dependency:copy-dependencies -DoutputDirectory=\"${SPARK_HOME}/jars/\" \\\n    # cleanup\n    && apt-get --purge autoremove -y maven python3-pip \\\n    && apt-get autoremove -y \\\n    && apt-get autoclean -y \\\n    && rm -rf /tmp/* \\\n    && rm -rf /root/.cache \\\n    && rm -rf /root/.m2 \\\n    && rm -rf /var/lib/apt/lists/* && rm /spark/spark-${SPARK_VERSION_KEY}-bin-custom-spark.tgz\n\nCMD [\"/bin/bash\"]\n"
}