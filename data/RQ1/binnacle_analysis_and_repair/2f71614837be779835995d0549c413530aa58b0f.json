{
  "startTime": 1674242151902,
  "endTime": 1674242152373,
  "originalSmells": [
    {
      "rule": "wgetUseHttpsUrl",
      "position": {
        "lineStart": 67,
        "lineEnd": 67,
        "columnStart": 4,
        "columnEnd": 61
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 30,
        "lineEnd": 30,
        "columnStart": 4,
        "columnEnd": 28
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 50,
        "lineEnd": 50,
        "columnStart": 4,
        "columnEnd": 39
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 51,
        "lineEnd": 51,
        "columnStart": 4,
        "columnEnd": 21
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 54,
        "lineEnd": 54,
        "columnStart": 4,
        "columnEnd": 21
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 56,
        "lineEnd": 56,
        "columnStart": 4,
        "columnEnd": 29
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 58,
        "lineEnd": 58,
        "columnStart": 4,
        "columnEnd": 26
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 60,
        "lineEnd": 60,
        "columnStart": 4,
        "columnEnd": 20
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 62,
        "lineEnd": 62,
        "columnStart": 4,
        "columnEnd": 23
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 84,
        "lineEnd": 84,
        "columnStart": 4,
        "columnEnd": 22
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 85,
        "lineEnd": 85,
        "columnStart": 4,
        "columnEnd": 24
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 87,
        "lineEnd": 87,
        "columnStart": 4,
        "columnEnd": 31
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 27,
        "lineEnd": 27,
        "columnStart": 4,
        "columnEnd": 107
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 35,
        "lineEnd": 35,
        "columnStart": 4,
        "columnEnd": 79
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 53,
        "lineEnd": 53,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 61,
        "lineEnd": 61,
        "columnStart": 4,
        "columnEnd": 33
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 65,
        "lineEnd": 65,
        "columnStart": 4,
        "columnEnd": 32
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 83,
        "lineEnd": 83,
        "columnStart": 4,
        "columnEnd": 34
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 27,
        "lineEnd": 27,
        "columnStart": 4,
        "columnEnd": 107
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 35,
        "lineEnd": 35,
        "columnStart": 4,
        "columnEnd": 79
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 53,
        "lineEnd": 53,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 61,
        "lineEnd": 61,
        "columnStart": 4,
        "columnEnd": 33
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 65,
        "lineEnd": 65,
        "columnStart": 4,
        "columnEnd": 32
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 83,
        "lineEnd": 83,
        "columnStart": 4,
        "columnEnd": 34
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 27,
        "lineEnd": 27,
        "columnStart": 4,
        "columnEnd": 107
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 35,
        "lineEnd": 35,
        "columnStart": 4,
        "columnEnd": 79
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 53,
        "lineEnd": 53,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 61,
        "lineEnd": 61,
        "columnStart": 4,
        "columnEnd": 33
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 65,
        "lineEnd": 65,
        "columnStart": 4,
        "columnEnd": 32
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 83,
        "lineEnd": 83,
        "columnStart": 4,
        "columnEnd": 34
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 27,
        "lineEnd": 27,
        "columnStart": 4,
        "columnEnd": 131
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 35,
        "lineEnd": 35,
        "columnStart": 4,
        "columnEnd": 103
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 53,
        "lineEnd": 53,
        "columnStart": 4,
        "columnEnd": 54
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 61,
        "lineEnd": 61,
        "columnStart": 4,
        "columnEnd": 57
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 65,
        "lineEnd": 65,
        "columnStart": 4,
        "columnEnd": 56
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 83,
        "lineEnd": 83,
        "columnStart": 4,
        "columnEnd": 58
      }
    }
  ],
  "repairedDockerfile": "FROM w251/tensorflow:dev-tx2-4.2_b158-py3\n# FROM tensorflow\n\n#+ numpy\n#+  nltk==3.2.5\n# resampy\n#+  python_speech_features\n#+ pandas==0.23.0\n# + six\n# + mpi4py\n# librosa==0.6.1\n#+ matplotlib\n# + joblib==0.11\n#+  sentencepiece\n# + sacrebleu\n\n# + h5py\n# + tqdm\n\n# Need python 3..\nRUN apt update\n# RUN apt install -y git\n\n# RUN apt install -y libfreetype6-dev pkg-config\n\nENV DEBIAN_FRONTEND=noninteractive\n# numpy, pandas, matplotlib\nRUN apt install --no-install-recommends -y python3-numpy python3-scipy python3-matplotlib python3-pandas python3-nose python3-sympy && rm -rf /var/lib/apt/lists/*;\n\n# nltk\nRUN pip3 install --no-cache-dir nltk==3.2.5\n\nWORKDIR /tmp\n\n# sentencepiece\nRUN apt-get install --no-install-recommends -y cmake build-essential pkg-config libgoogle-perftools-dev && rm -rf /var/lib/apt/lists/*;\nRUN git clone https://github.com/google/sentencepiece\n\n# google switched to Bazel for building but we haven't\nWORKDIR /tmp/sentencepiece\nRUN git checkout tags/v0.1.82\nRUN mkdir build && cd build && cmake .. && make -j 6 && make install\nRUN ldconfig -v\n\nWORKDIR /tmp/sentencepiece/python\nRUN python3 setup.py build\nRUN python3 setup.py install\n\nRUN rm -fr /tmp/sentencepiece\n\nRUN pip3 install --no-cache-dir python_speech_features\nRUN pip3 install --no-cache-dir tqdm\n\nRUN apt install --no-install-recommends -y libhdf5-dev && rm -rf /var/lib/apt/lists/*;\nRUN pip3 install --no-cache-dir h5py\n\nRUN pip3 install --no-cache-dir joblib==0.11\n\nRUN pip3 install --no-cache-dir sacrebleu\n\nRUN pip3 install --no-cache-dir six\nRUN apt -y --no-install-recommends install libopenmpi-dev && rm -rf /var/lib/apt/lists/*;\nRUN pip3 install --no-cache-dir mpi4py\n\n# RUN pip3 install resampy\nRUN apt install --no-install-recommends -y wget xz-utils && rm -rf /var/lib/apt/lists/*;\nWORKDIR /tmp\nRUN wget https://releases.llvm.org/7.0.1/llvm-7.0.1.src.tar.xz\nRUN tar Jxvf *.xz\nRUN git clone https://github.com/numba/llvmlite.git\n\nWORKDIR /tmp/llvm-7.0.1.src\nRUN mkdir build\nWORKDIR /tmp/llvm-7.0.1.src/build\nRUN cmake .. -DCMAKE_BUILD_TYPE=Release -DLLVM_TARGETS_TO_BUILD=\"ARM;X86;AArch64\" -\"DCMAKE_C_FLAGS=-mcpu=cortex-a57\"\nRUN make -j6\nRUN make install\n\nWORKDIR /tmp/llvmlite\n\nRUN python3 setup.py build\nRUN python3 setup.py install\n\nRUN apt install --no-install-recommends -y python3-sklearn && rm -rf /var/lib/apt/lists/*;\nRUN pip3 install --no-cache-dir numba\nRUN pip3 install --no-cache-dir resampy\n\nRUN pip3 install --no-cache-dir librosa==0.6.1\n\nRUN rm -rf /tmp/llvmlite\nRUN rm -rf /tmp/llvm-7.0.1.src\nRUN rm -rf /tmp/llvm-7.0.1.src.tar.xz\n\nWORKDIR /\n\nRUN git clone https://github.com/NVIDIA/OpenSeq2Seq\n\nWORKDIR /OpenSeq2Seq\n\n# unit tests\n# RUN python3 -m unittest discover -s open_seq2seq -p '*_test.py'\n\nWORKDIR /\n"
}