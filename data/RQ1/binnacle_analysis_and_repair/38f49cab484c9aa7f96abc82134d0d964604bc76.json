{
  "startTime": 1674236076744,
  "endTime": 1674236077049,
  "originalSmells": [
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 96,
        "lineEnd": 96,
        "columnStart": 4,
        "columnEnd": 28
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 25,
        "lineEnd": 27,
        "columnStart": 4,
        "columnEnd": 22
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "############################## Dockerfile ###################################\n\nFROM biocontainers/biocontainers:v1.0.0_cv4\n\n############################# METADATA ######################################\n\nLABEL base_image=\"biocontainers:v1.0.0_cv4\"\nLABEL version=\"2\"\nLABEL software=\"BioR annotate\"\nLABEL software.version=\"2.1.1\"\nLABEL about.summary=\"BIOR (Biological Reference Repository) is a rapid, flexible system for genomic annotation\"\nLABEL about.home=\"http://www.well.ox.ac.uk/cava|https://github.com/Steven-N-Hart/bior_annotate|http://bioinformaticstools.mayo.edu/research/bior/|https://github.com/BioinformaticsToolsAtMayo|https://github.com/Steven-N-Hart/bior_annotate\"\nLABEL about.tags=\"Genomics\"\nLABEL about.provides=\"BioR 2.1.1|htslib 1.2.1|samtools 1.2|bedtools 2.25.0|pysam 0.8.3|cava full 1.1.1|snpEff\"\nLABEL extra.identifiers.biotools=\"BIOR\"\n\n################## BEGIN INSTALLATION ######################\n\n#####################################################\n# Install system wide libraries\n#####################################################\n\nUSER root\n\nRUN apt-get update && \\\n    apt-get install --no-install-recommends -y \\\n      libncurses5-dev \\\n      libncursesw5-dev && \\\n    apt-get clean && \\\n    apt-get purge && \\\n    rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*\n\n\n#####################################################\n# Install htslib\n#####################################################\nENV ZIP=htslib-1.2.1.tar.bz2\nENV URL=https://github.com/BioDocker/software-archive/releases/download/htslib\nENV FOLDER=htslib-1.2.1\nENV DST=/tmp\n\nRUN wget $URL/$ZIP -O $DST/$ZIP && \\\n    tar xvf $DST/$ZIP -C $DST && \\\n    rm $DST/$ZIP && \\\n    cd $DST/$FOLDER && \\\n    make && \\\n    make install && \\\n    cd / && \\\n    rm -rf $DST/$FOLDER\n\n\n#####################################################\n# Install SAMtools\n#####################################################\nENV ZIP=samtools-1.2.tar.bz2\nENV URL=https://github.com/BioDocker/software-archive/releases/download/samtools\nENV FOLDER=samtools-1.2\nENV DST=/tmp\n\nRUN wget $URL/$ZIP -O $DST/$ZIP && \\\n    tar xvf $DST/$ZIP -C $DST && \\\n    rm $DST/$ZIP && \\\n    cd $DST/$FOLDER && \\\n    make && \\\n    make install && \\\n    cd / && \\\n    rm -rf $DST/$FOLDER\n\n\n#####################################################\n# Get BEDtools\n#####################################################\nENV ZIP=bedtools-2.25.0.tar.gz\nENV URL=https://github.com/arq5x/bedtools2/releases/download/v2.25.0\nENV FOLDER=bedtools2\nENV DST=/tmp\n\nRUN wget $URL/$ZIP -O $DST/$ZIP && \\\n    tar xvf $DST/$ZIP -C $DST && \\\n    rm $DST/$ZIP && \\\n    cd $DST/$FOLDER && \\\n    make && \\\n    make install && \\\n    cd / && \\\n    rm -rf $DST/$FOLDER\n\n\n#####################################################\n# Install perl modules\n#####################################################\nRUN cpan -i Data::Dumper Getopt::Long List::MoreUtils Switch\n\n\n#####################################################\n# Install PySAM\n#####################################################\nRUN pip install --no-cache-dir pysam==0.8.3\n\n\n#####################################################\n# Install Cava\n#####################################################\n# Change user to back to biodocker\nUSER biodocker\n\nENV ZIP=cava-full-v1.1.1.tgz\nENV URL=https://github.com/BioDocker/software-archive/releases/download/cava\nENV FOLDER=cava-v1.1.1\nENV DST=/home/biodocker/bin\n\nRUN wget $URL/$ZIP -O $DST/$ZIP && \\\n    tar xvf $DST/$ZIP -C $DST && \\\n    rm $DST/$ZIP && \\\n    cd $DST/$FOLDER && \\\n    sed -i -e 's#human_g1k_v37.fasta#'$DST/$FOLDER'/human_g1k_v37.fasta#;s#hg19.fa#'$DST/$FOLDER'/hg19.fa#;s#exome_65_GRCh37.gz#'$DST/$FOLDER'/exome_65_GRCh37.gz#;s#dbSNP138.gz#.#' $DST/$FOLDER/config.txt && \\\n    cd / && \\\n    rm -rf $DST/$FOLDER\n\nENV PATH=$PATH:/home/biodocker/bin/cava-v1.1.1/\n\n\n#####################################################\n# Install SNPEFF\n#####################################################\nENV ZIP=snpEff_v4_1k_core.zip\nENV URL=https://github.com/BioDocker/software-archive/releases/download/snpEff\nENV FOLDER=snpEff\nENV DST=/home/biodocker/bin\n\nRUN wget $URL/$ZIP -O $DST/$ZIP && \\\n    unzip $DST/$ZIP -d $DST && \\\n    rm $DST/$ZIP && \\\n    bash -c 'echo -e \"#!/bin/bash\\njava -jar '$DST/$FOLDER'/snpEff.jar  \\$@\" > '$DST'/snpeff' && \\\n    chmod +x $DST/snpeff && \\\n    bash -c 'echo -e \"#!/bin/bash\\njava -jar '$DST/$FOLDER'/SnpSift.jar \\$@\" > '$DST'/snpsift' && \\\n    chmod +x $DST/snpsift\n\nENV PATH=$PATH:/home/biodocker/bin/snpEff/scripts:/home/biodocker/bin/snpEff/scripts/gsa\n\n\n#####################################################\n# Install BIOR\n#####################################################\nENV ZIP=bior_2.1.1.tar.gz\nENV URL=https://github.com/BioDocker/software-archive/releases/download/BioR\nENV FOLDER=bior_2.1.1\nENV DST=/home/biodocker/bin\n\nRUN wget $URL/$ZIP -O $DST/$ZIP && \\\n    tar xvzf $DST/$ZIP -C $DST && \\\n    rm -f $DST/$ZIP && \\\n    echo \"export BIOR_LITE_HOME=$DST/$FOLDER\" > $DST/$FOLDER/PKG_PROFILE && \\\n    ln -s $DST/$FOLDER/bin/* $DST/$FOLDER\n\nENV BASEDIR=/home/biodocker/bin/bior_2.1.1\nENV FOLDER=/home/biodocker/bin/bior_2.1.1\nENV BIOR_LITE_HOME=$BASEDIR\nENV PATH=$PATH:$BIOR_LITE_HOME/bin\n\nCOPY annotate/ /home/biodocker/bin/annnotate/\n\nENV PATH=$PATH:/home/biodocker/bin/annnotate/scripts/\n\n# CHANGE WORKDIR TO /DATA\nWORKDIR /data\n\n# DEFINE DEFAULT COMMAND\n# CMD [\"bash\"]\n\n##################### INSTALLATION END #####################\n\n# File Author / Maintainer\nMAINTAINER Saulo Alves Aflitos <sauloal@gmail.com>\n"
}