{
  "startTime": 1674234957424,
  "endTime": 1674234957628,
  "originalSmells": [
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 22,
        "lineEnd": 22,
        "columnStart": 21,
        "columnEnd": 119
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "# Licensed under the Apache License, Version 2.0 (the \"License\");\n# you may not use this file except in compliance with the License.\n# You may obtain a copy of the License at\n#\n# http://www.apache.org/licenses/LICENSE-2.0\n#\n# Unless required by applicable law or agreed to in writing, software\n# distributed under the License is distributed on an \"AS IS\" BASIS,\n# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n# See the License for the specific language governing permissions and\n# limitations under the License.\nFROM ubuntu:16.04\n\nMAINTAINER Yasutaka Nishimura nishi2go@gmail.com\n\nARG url=http://images\n\nARG ver=11.1\nARG fp=4fp4a\n\n## Install required software\nRUN dpkg --add-architecture i386\nRUN apt update -y && apt install --no-install-recommends -y wget unzip bsdtar netcat file libx32stdc++6 libpam0g:i386 binutils libaio1 libnuma1 \\\n    && rm -rf /var/lib/apt/lists/*\n\n## Set kernel params\nRUN echo \"root soft nofile 8192\" >> /etc/security/limits.d/99-maximo.conf\nRUN echo \"root hard nofile 8192\" >> /etc/security/limits.d/99-maximo.conf\nRUN echo \"root soft fsize -1\" >> /etc/security/limits.d/99-maximo.conf\nRUN echo \"root hard fsize -1\" >> /etc/security/limits.d/99-maximo.conf\nRUN ulimit -f unlimited\nRUN ulimit -n 8192\n\n# Install IBM DB2 V10.5\nENV DB2_IMAGE DB2_AWSE_REST_Svr_${ver}_Lnx_86-64.tar.gz\n\nRUN mkdir /work\nWORKDIR /work\n\nENV MAXDB_DATADIR /home/ctginst1/ctginst1\n\nENV VARDB2_DATADIR /var/db2\nVOLUME $VARDB2_DATADIR\n\nENV CTGINST1_PASSWORD ctginst1\nENV CTGFENC1_PASSWORD ctginst1\nENV DB_MAXIMO_PASSWORD maximo\n\nRUN groupadd ctggrp1\nRUN groupadd ctgfgrp1\nRUN groupadd maximo\nRUN useradd -g ctggrp1 -m -d /home/ctginst1 ctginst1\nRUN echo \"ctginst1:$CTGINST1_PASSWORD\" | chpasswd\nRUN useradd -g ctgfgrp1 -m -d /home/ctgfenc1 ctgfenc1\nRUN echo \"ctgfenc1:$CTGFENC1_PASSWORD\" | chpasswd\nRUN useradd -g maximo -m -d /home/maximo maximo\nRUN echo \"maximo:$DB_MAXIMO_PASSWORD\" | chpasswd\n\nVOLUME $MAXDB_DATADIR\n\nRUN mkdir /backup && chown ctginst1.ctggrp1 /backup\n\n# Install DB2 V11.1\nCOPY db2awse.rsp /work\nRUN wget -q $url/$DB2_IMAGE \\\n  && bsdtar -zxpf $DB2_IMAGE \\\n  && ./server_awse_o/db2setup -r ./db2awse.rsp \\\n  && /opt/ibm/db2/V11.1/adm/db2licm -a ./server_awse_o/db2/license/db2awse_o.lic \\\n  && /opt/ibm/db2/V11.1/adm/db2licm -l \\\n  && rm -rf *\n\n# Install DB2 Fixpack\nENV DB2_FP_IMAGE v${ver}.${fp}_linuxx64_server_t.tar.gz\nRUN wget -q $url/$DB2_FP_IMAGE \\\n  && bsdtar -zxpf $DB2_FP_IMAGE \\\n  && cd server_t \\\n  && ./installFixPack -n -b /opt/ibm/db2/V${ver} \\\n   -f NOTSAMP -f update -f nobackup \\\n  && cd .. \\\n  && rm -rf *\n\nENV MAXDB MAXDB76\nENV BACKUPDIR /backup\n\nEXPOSE 50005\n\nCOPY backup.sh /work\nRUN chmod +x /work/backup.sh\n\nCOPY startdb2.sh /work\nRUN chmod +x /work/startdb2.sh\nENTRYPOINT [\"/work/startdb2.sh\"]\n"
}