{
  "startTime": 1674234495839,
  "endTime": 1674234497025,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 39,
        "lineEnd": 39,
        "columnStart": 4,
        "columnEnd": 62
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 42,
        "lineEnd": 42,
        "columnStart": 4,
        "columnEnd": 48
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 50,
        "lineEnd": 51,
        "columnStart": 4,
        "columnEnd": 76
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 57,
        "lineEnd": 58,
        "columnStart": 26,
        "columnEnd": 86
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 64,
        "lineEnd": 64,
        "columnStart": 7,
        "columnEnd": 73
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 68,
        "lineEnd": 68,
        "columnStart": 7,
        "columnEnd": 73
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 72,
        "lineEnd": 72,
        "columnStart": 7,
        "columnEnd": 82
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 78,
        "lineEnd": 78,
        "columnStart": 7,
        "columnEnd": 83
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 82,
        "lineEnd": 82,
        "columnStart": 7,
        "columnEnd": 81
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 86,
        "lineEnd": 86,
        "columnStart": 7,
        "columnEnd": 88
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 90,
        "lineEnd": 90,
        "columnStart": 7,
        "columnEnd": 81
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 97,
        "lineEnd": 97,
        "columnStart": 7,
        "columnEnd": 78
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 101,
        "lineEnd": 101,
        "columnStart": 7,
        "columnEnd": 78
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 105,
        "lineEnd": 105,
        "columnStart": 7,
        "columnEnd": 94
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 109,
        "lineEnd": 109,
        "columnStart": 7,
        "columnEnd": 83
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 112,
        "lineEnd": 112,
        "columnStart": 4,
        "columnEnd": 104
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 120,
        "lineEnd": 120,
        "columnStart": 7,
        "columnEnd": 77
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 125,
        "lineEnd": 125,
        "columnStart": 4,
        "columnEnd": 174
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 125,
        "lineEnd": 125,
        "columnStart": 73,
        "columnEnd": 149
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 129,
        "lineEnd": 129,
        "columnStart": 7,
        "columnEnd": 80
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 137,
        "lineEnd": 137,
        "columnStart": 7,
        "columnEnd": 77
      }
    },
    {
      "rule": "npmCacheCleanAfterInstall",
      "position": {
        "lineStart": 48,
        "lineEnd": 48,
        "columnStart": 4,
        "columnEnd": 28
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 44,
        "lineEnd": 44,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 46,
        "lineEnd": 46,
        "columnStart": 4,
        "columnEnd": 23
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 140,
        "lineEnd": 140,
        "columnStart": 4,
        "columnEnd": 49
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 140,
        "lineEnd": 140,
        "columnStart": 53,
        "columnEnd": 81
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 142,
        "lineEnd": 142,
        "columnStart": 4,
        "columnEnd": 31
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 30,
        "lineEnd": 36,
        "columnStart": 4,
        "columnEnd": 63
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 29,
        "lineEnd": 29,
        "columnStart": 22,
        "columnEnd": 74
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 30,
        "lineEnd": 36,
        "columnStart": 4,
        "columnEnd": 63
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 40,
        "lineEnd": 40,
        "columnStart": 27,
        "columnEnd": 86
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 30,
        "lineEnd": 36,
        "columnStart": 4,
        "columnEnd": 63
      }
    }
  ],
  "repairedDockerfile": "FROM ubuntu:16.04\nMAINTAINER Ramiro Salas <rsalas@pivotal.io>\n\nENV HOME /home/ops\nENV ENAML /opt/enaml\nENV OMG_PLUGIN_DIR $ENAML/plugins\nENV OMGBIN $ENAML/bin\nENV CFPLUGINS /opt/cf-plugins\nENV GOPATH /opt/go\nENV GOBIN /opt/go/bin\nENV PATH /usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:$HOME/bin:/usr/local/go/bin:$GOBIN:$OMGBIN\n\nADD update_enaml.sh /usr/local/bin\n\nRUN mkdir -p $HOME\nRUN mkdir -p $ENAML\nRUN mkdir -p $GOBIN\nRUN mkdir -p $CFPLUGINS\nRUN mkdir -p $OMG_PLUGIN_DIR\nRUN groupadd -g 9024 ops\nRUN useradd --shell /bin/bash -u 9024 -g 9024 -o -c \"\" -M -d $HOME ops\nVOLUME $HOME\nRUN chown -R ops:ops $HOME\nWORKDIR $HOME\nRUN mkdir -p $HOME/bin\nRUN cp -n /etc/skel/.[a-z]* .\n\nRUN cat /etc/apt/sources.list | sed 's/archive/us.archive/g' > /tmp/s && mv /tmp/s /etc/apt/sources.list\n\nRUN apt-get update && apt-get -y --no-install-recommends install wget curl && rm -rf /var/lib/apt/lists/*;\nRUN apt-get -y --no-install-recommends install ruby libroot-bindings-ruby-dev \\\n           build-essential git ssh zip software-properties-common dnsutils \\\n           iputils-ping traceroute jq vim wget unzip sudo iperf screen tmux \\\n           file openstack tcpdump nmap less s3cmd s3curl direnv \\\n           netcat npm nodejs-legacy python3-pip python3-setuptools \\\n           apt-utils libdap-bin mysql-client mongodb-clients postgresql-client-9.5 \\\n           redis-tools libpython2.7-dev libxml2-dev libxslt-dev && rm -rf /var/lib/apt/lists/*;\n\nRUN echo \"deb http://packages.cloud.google.com/apt cloud-sdk-xenial main\" | tee /etc/apt/sources.list.d/google-cloud-sdk.list\nRUN curl -f https://packages.cloud.google.com/apt/doc/apt-key.gpg | apt-key add -\nRUN apt-get update && sudo apt-get -y --no-install-recommends install google-cloud-sdk && rm -rf /var/lib/apt/lists/*;\n\nRUN curl -f -O https://bootstrap.pypa.io/get-pip.py && python2.7 ./get-pip.py && rm -f python2.7 ./get-pip.py\n\nRUN pip3 install --no-cache-dir --upgrade pip\n\nRUN pip3 install --no-cache-dir awscli\n\nRUN npm install -g azure-cli && npm cache clean --force;\n\nRUN curl -f -L \\\n    \"https://cli.run.pivotal.io/stable?release=linux64-binary&source=github\" \\\n    | tar -C /usr/local/bin -zx\n\nRUN wget $(wget -O- -q https://www.vaultproject.io/downloads.html | grep linux_amd | awk -F \"\\\"\" '{print$2}') -O vault.zip && unzip vault.zip && cp vault /usr/local/bin/vault\nRUN chmod 755 /usr/local/bin/vault\n\nRUN cd /usr/local/bin/ && curl -f -o terraform.zip \\\n    \"https://releases.hashicorp.com/terraform/0.9.11/terraform_0.9.11_linux_amd64.zip\" \\\n    && unzip terraform.zip && rm -f terraform.zip\n\nRUN gem install cf-uaac --no-rdoc --no-ri\n\nRUN cd /usr/local/bin && wget -q -O om \\\n    \"$( curl -f -s https://api.github.com/repos/pivotal-cf/om/releases/latest \\\n    | jq --raw-output '.assets[] | .browser_download_url' | grep linux)\" && chmod +x om\n\nRUN cd /usr/local/bin && wget -q -O fly \\\n    \"$( curl -f -s https://api.github.com/repos/concourse/fly/releases/latest \\\n    | jq --raw-output '.assets[] | .browser_download_url' | grep linux)\" && chmod +x fly\n\nRUN cd /usr/local/bin && wget -q -O magnet \\\n    \"$( curl -f -s https://api.github.com/repos/pivotalservices/magnet/releases/latest \\\n    | jq --raw-output '.assets[] | .browser_download_url' | grep linux)\" && chmod +x magnet\n\nRUN cd /usr/local/bin && wget -q -O bosh https://s3.amazonaws.com/bosh-cli-artifacts/bosh-cli-2.0.28-linux-amd64 && chmod 0755 bosh && ln -s bosh bosh2\n\nRUN cd /usr/local/bin && wget -q -O omg-transform \\\n    \"$( curl -f -s https://api.github.com/repos/enaml-ops/omg-transform/releases/latest \\\n    | jq --raw-output '.assets[] | .browser_download_url' | grep omg-transform-linux)\" && chmod +x omg-transform\n\nRUN cd /usr/local/bin && wget -q -O pivnet \\\n    \"$( curl -f -s https://api.github.com/repos/pivotal-cf/pivnet-cli/releases/latest \\\n    | jq --raw-output '.assets[] | .browser_download_url' | grep linux | grep -v zip)\" && chmod +x pivnet\n\nRUN cd /usr/local/bin && wget -q -O bbl \\\n    \"$( curl -f -s https://api.github.com/repos/cloudfoundry/bosh-bootloader/releases/latest \\\n    | jq --raw-output '.assets[] | .browser_download_url' | grep linux)\" && chmod +x bbl\n\nRUN cd /usr/local/bin && wget -q -O cfops \\\n    \"$( curl -f -s https://api.github.com/repos/pivotalservices/cfops/releases/latest \\\n    | jq --raw-output '.assets[] | .browser_download_url')\" && chmod +x cfops\n\nRUN cd /usr/local/bin && wget -q -O spiff https://github.com/cloudfoundry-incubator/spiff/releases/download/v1.0.8/spiff_linux_amd64.zip \\\n    && chmod +x spiff\n\nRUN cd /usr/local/bin && wget -q -O spruce \\\n    \"$( curl -f -s https://api.github.com/repos/geofffranks/spruce/releases/latest \\\n    | jq --raw-output '.assets[] | .browser_download_url' | grep linux | grep -v zip)\" && chmod +x spruce\n\nRUN cd /usr/local/bin && wget -q -O safe \\\n    \"$( curl -f -s https://api.github.com/repos/starkandwayne/safe/releases/latest \\\n    | jq --raw-output '.assets[] | .browser_download_url' | grep linux)\" && chmod +x safe\n\nRUN cd /usr/local/bin && wget -q -O asg-creator \\\n    \"$( curl -f -s https://api.github.com/repos/cloudfoundry-incubator/asg-creator/releases/latest \\\n    | jq --raw-output '.assets[] | .browser_download_url' | grep linux | grep -v zip)\" && chmod +x asg-creator\n\nRUN cd /usr/local/bin && wget -q -O cf-mgmt \\\n    \"$( curl -f -s https://api.github.com/repos/pivotalservices/cf-mgmt/releases/latest \\\n    | jq --raw-output '.assets[] | .browser_download_url' | grep linux | grep -v zip)\" && chmod +x cf-mgmt\n\nRUN curl -f \"https://raw.githubusercontent.com/starkandwayne/genesis/master/bin/genesis\" > /usr/bin/genesis \\\n    && chmod 0755 /usr/bin/genesis\n\n# Thanks to Merlin Glynn for the Photon part!\nRUN baseURL=$(wget -q -O- https://github.com/vmware/photon-controller/releases/ | grep -m 1 photon-linux | perl -ne 'print map(\"$_\\n\", m/href=\\\".*?\\\"/g)' |  tr -d '\"' | awk -F \"href=\" '{print$2}') && wget https://github.com$baseURL -O /usr/local/bin/photon\nRUN chmod 755 /usr/local/bin/photon\n\nRUN cd /usr/local/bin && wget -q -O cliaas \\\n    \"$( curl -f -s https://api.github.com/repos/pivotal-cf/cliaas/releases/latest | jq --raw-output '.assets[] | .browser_download_url' | grep linux)\" && chmod +x cliaas\n\nRUN cd /usr/local/bin && wget -q -O - https://github.com/cloudfoundry-incubator/credhub-cli/releases/download/1.2.0/credhub-linux-1.2.0.tgz | tar xzf - > credhub && chmod 0755 credhub\n\nRUN cd /usr/local/bin && \\\n    curl -f -LO https://storage.googleapis.com/kubernetes-release/release/$( curl -f -s https://storage.googleapis.com/kubernetes-release/release/stable.txt)/bin/linux/amd64/kubectl && \\\n    chmod 0755 kubectl\n\nRUN cd $CFPLUGINS && wget -q -O autopilot \\\n    \"$( curl -f -s https://api.github.com/repos/xchapter7x/autopilot/releases/latest | jq --raw-output '.assets[] | .browser_download_url' | grep linux | grep -v zip)\" && chmod +x autopilot\n\nRUN cd $CFPLUGINS && wget -q -O cf-mysql-plugin https://github.com/andreasf/cf-mysql-plugin/releases/download/v1.4.0/cf-mysql-plugin-linux-amd64 && \\\n    chmod 0755 ./cf-mysql-plugin\nRUN cd $CFPLUGINS && wget -q -O cf-service-connect https://github.com/18F/cf-service-connect/releases/download/1.1.0/cf-service-connect.linux64 && \\\n    chmod 0755 ./cf-service-connect\n\nRUN cd /usr/local/bin && wget -q -O goblob \\\n    \"$( curl -f -s https://api.github.com/repos/pivotal-cf/goblob/releases/latest | jq --raw-output '.assets[] | .browser_download_url' | grep linux)\" && chmod +x goblob\n\nRUN git clone https://github.com/cf-platform-eng/nsx-edge-gen.git && \\\n    pip2 install --no-cache-dir -r nsx-edge-gen/requirements.txt && pip2 install --no-cache-dir tabulate pynsxv && mv nsx-edge-gen /opt\n\nRUN pip2 install --no-cache-dir tile-generator\n\nRUN mkdir -p .bucc && git clone https://github.com/starkandwayne/bucc.git && \\\n    ln -s $HOME/.bucc/bucc/bin/bucc /usr/local/bin/bucc\n\nADD firstrun.sh /usr/local/bin\nADD add_go.sh /usr/local/bin\nADD add_extras.sh /usr/local/bin\nRUN chown -R ops:ops /opt $HOME $GOBIN $GOPATH\nRUN apt-get -y autoremove && apt-get clean\nRUN rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/* /var/log/*\n\nRUN echo \"ops ALL=NOPASSWD: ALL\" >> /etc/sudoers\n\nUSER ops\n\nCMD [\"/bin/bash\"]\n"
}