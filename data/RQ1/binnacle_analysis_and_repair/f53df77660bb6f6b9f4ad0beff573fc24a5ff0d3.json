{
  "startTime": 1674234653739,
  "endTime": 1674234653837,
  "originalSmells": [
    {
      "rule": "configureShouldUseBuildFlag",
      "position": {
        "lineStart": 31,
        "lineEnd": 31,
        "columnStart": 77,
        "columnEnd": 108
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 19,
        "lineEnd": 24,
        "columnStart": 22,
        "columnEnd": 8
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 19,
        "lineEnd": 24,
        "columnStart": 22,
        "columnEnd": 8
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "# to build:\n# docker build -t=\"pgbovine/opt-cpp-backend:v1\" .\n#\n# to test:\n# docker run -t -i --rm --user=netuser --net=none --cap-drop all pgbovine/opt-cpp-backend:v1 bash\n#\n# remember --rm or else stale old containers will be left around!\n# use \"docker ps -a\" to see all containers\n\n# don't use 'latest' tag since that might change\nFROM ubuntu:14.04.1\nMAINTAINER Philip Guo <philip@pgbovine.net>\n\n# if apt-get doesn't work, then follow these instructions:\n# http://stackoverflow.com/questions/24991136/docker-build-could-not-resolve-archive-ubuntu-com-apt-get-fails-to-install-a\n# Uncomment the following line in /etc/default/docker DOCKER_OPTS=\"--dns 8.8.8.8 --dns 8.8.4.4\"\n# Restart the Docker service sudo service docker restart\n#\n# to get gcc and g++, Valgrind needs libc6-dbg apparently\nRUN apt-get update && apt-get install --no-install-recommends -y \\\n  build-essential \\\n  autotools-dev \\\n  automake \\\n  libc6-dbg \\\n  python && rm -rf /var/lib/apt/lists/*;\n\nRUN mkdir /tmp/opt-cpp-backend\nADD . /tmp/opt-cpp-backend\n\n# we need to compile Valgrind from scratch within the container (hence\n# 'make clean' first) to make it work from within the container, ergh\nRUN cd /tmp/opt-cpp-backend/valgrind-3.11.0 && make clean && ./autogen.sh && ./configure --build=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\" --prefix=`pwd`/inst && make && make install\n\nRUN useradd netuser\n\nRUN cd /tmp/ && find . | xargs chown netuser\n"
}