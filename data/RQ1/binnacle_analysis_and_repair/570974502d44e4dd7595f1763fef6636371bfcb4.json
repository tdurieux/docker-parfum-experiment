{
  "startTime": 1674240406267,
  "endTime": 1674240407199,
  "originalSmells": [
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 90,
        "lineEnd": 90,
        "columnStart": 0,
        "columnEnd": 34
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 92,
        "lineEnd": 92,
        "columnStart": 0,
        "columnEnd": 40
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 38,
        "lineEnd": 38,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 48,
        "lineEnd": 48,
        "columnStart": 4,
        "columnEnd": 29
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 51,
        "lineEnd": 51,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 67,
        "lineEnd": 67,
        "columnStart": 0,
        "columnEnd": 28
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 80,
        "lineEnd": 80,
        "columnStart": 4,
        "columnEnd": 46
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 97,
        "lineEnd": 97,
        "columnStart": 0,
        "columnEnd": 60
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 119,
        "lineEnd": 119,
        "columnStart": 0,
        "columnEnd": 60
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 199,
        "lineEnd": 199,
        "columnStart": 2,
        "columnEnd": 39
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 207,
        "lineEnd": 207,
        "columnStart": 2,
        "columnEnd": 38
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 211,
        "lineEnd": 211,
        "columnStart": 2,
        "columnEnd": 38
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 226,
        "lineEnd": 226,
        "columnStart": 2,
        "columnEnd": 38
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 230,
        "lineEnd": 230,
        "columnStart": 2,
        "columnEnd": 37
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 38,
        "lineEnd": 38,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 48,
        "lineEnd": 48,
        "columnStart": 4,
        "columnEnd": 29
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 51,
        "lineEnd": 51,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 67,
        "lineEnd": 67,
        "columnStart": 0,
        "columnEnd": 28
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 80,
        "lineEnd": 80,
        "columnStart": 4,
        "columnEnd": 46
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 97,
        "lineEnd": 97,
        "columnStart": 0,
        "columnEnd": 60
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 101,
        "lineEnd": 101,
        "columnStart": 18,
        "columnEnd": 41
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 119,
        "lineEnd": 119,
        "columnStart": 0,
        "columnEnd": 60
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 125,
        "lineEnd": 125,
        "columnStart": 18,
        "columnEnd": 41
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 143,
        "lineEnd": 143,
        "columnStart": 23,
        "columnEnd": 44
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 199,
        "lineEnd": 199,
        "columnStart": 2,
        "columnEnd": 39
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 207,
        "lineEnd": 207,
        "columnStart": 2,
        "columnEnd": 38
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 211,
        "lineEnd": 211,
        "columnStart": 2,
        "columnEnd": 38
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 226,
        "lineEnd": 226,
        "columnStart": 2,
        "columnEnd": 38
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 230,
        "lineEnd": 230,
        "columnStart": 2,
        "columnEnd": 37
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 38,
        "lineEnd": 38,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 48,
        "lineEnd": 48,
        "columnStart": 4,
        "columnEnd": 29
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 51,
        "lineEnd": 51,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 67,
        "lineEnd": 67,
        "columnStart": 0,
        "columnEnd": 28
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 80,
        "lineEnd": 80,
        "columnStart": 4,
        "columnEnd": 46
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 97,
        "lineEnd": 97,
        "columnStart": 0,
        "columnEnd": 60
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 119,
        "lineEnd": 119,
        "columnStart": 0,
        "columnEnd": 60
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 199,
        "lineEnd": 199,
        "columnStart": 2,
        "columnEnd": 39
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 207,
        "lineEnd": 207,
        "columnStart": 2,
        "columnEnd": 38
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 211,
        "lineEnd": 211,
        "columnStart": 2,
        "columnEnd": 38
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 226,
        "lineEnd": 226,
        "columnStart": 2,
        "columnEnd": 38
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 230,
        "lineEnd": 230,
        "columnStart": 2,
        "columnEnd": 37
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 38,
        "lineEnd": 38,
        "columnStart": 4,
        "columnEnd": 54
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 48,
        "lineEnd": 48,
        "columnStart": 4,
        "columnEnd": 53
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 51,
        "lineEnd": 51,
        "columnStart": 4,
        "columnEnd": 54
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 67,
        "lineEnd": 67,
        "columnStart": 1,
        "columnEnd": 53
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 80,
        "lineEnd": 80,
        "columnStart": 4,
        "columnEnd": 70
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 97,
        "lineEnd": 97,
        "columnStart": 1,
        "columnEnd": 85
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 101,
        "lineEnd": 101,
        "columnStart": 18,
        "columnEnd": 41
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 119,
        "lineEnd": 119,
        "columnStart": 1,
        "columnEnd": 85
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 125,
        "lineEnd": 125,
        "columnStart": 18,
        "columnEnd": 41
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 143,
        "lineEnd": 143,
        "columnStart": 23,
        "columnEnd": 44
      }
    }
  ],
  "repairedDockerfile": "# Dockerfile for XRDP on Debian 8 desktop.\n#\n# Copyright (C) 2017 Hiroo MATSUMOTO <hiroom2.mail@gmail.com>\n#\n\nFROM debian:8\nMAINTAINER Hiroo MATSUMOTO <hiroom2.mail@gmail.com>\nLABEL \\\nDescription=\"XRDP on Debian 8 desktop\" \\\nVersion=\"1.0\"\nEXPOSE 3389\n\nARG user=${user:-doxrdp}\nARG password=${password:-doxrdp}\nARG desktop=${desktop:-gnome}\nARG xrdp=${xrdp:-0.9.1-4~bpo8+1}\nARG model=${model:-pc105}\nARG layout=${layout:-us}\nARG variant=${variant:-\"English (US)\"}\nARG cpu=${cpu:-amd64}\n\n# Check desktop argument at an early stage.\nRUN \\\ncase \"${desktop}\" in \\\ngnome) true;; \\\nxfce) true;; \\\nmate) true;; \\\nlxde) true;; \\\nkde) true;; \\\n*) echo \"Not supported desktop: ${desktop}\" 1>&2; false;; \\\nesac\n\n# Update Debian.\nRUN \\\napt-get update -y && \\\napt-get upgrade -y\n\n# Set locale.\nRUN apt-get install --no-install-recommends -y locales && rm -rf /var/lib/apt/lists/*;\nENV LANG en_US.UTF-8\nENV LANGUAGE en_US:en\nRUN \\\nsed -e 's/# en_US.UTF-8 UTF-8/en_US.UTF-8 UTF-8/g' \\\n-i /etc/locale.gen && \\\nlocale-gen en_US en_US.UTF-8 && \\\nlocale > /etc/default/locale\n\n# Install expect.\nRUN apt-get install --no-install-recommends -y expect && rm -rf /var/lib/apt/lists/*;\n\n# Install debconf at an early stage for debconf-set-selections.\nRUN apt-get install --no-install-recommends -y debconf && rm -rf /var/lib/apt/lists/*;\n\n# Set keyboard. Debian requires keyboard-configuration/variant\n# compared to Ubuntu.\nRUN \\\necho \"\\\nkeyboard-configuration keyboard-configuration/modelcode \\\nstring ${model}\\n\\\nkeyboard-configuration keyboard-configuration/layoutcode \\\nstring ${layout}\\n\\\nkeyboard-configuration keyboard-configuration/variant \\\nstring ${variant}\\n\\\n\" | debconf-set-selections\n\n# Create user.\nRUN \\\n apt-get install --no-install-recommends -y sudo bash && \\\nsed -e 's/%sudo\\(.*\\)ALL$/%sudo\\1NOPASSWD:ALL/g' -i /etc/sudoers && \\\nuseradd -m ${user} -s /bin/bash && \\\ngpasswd -a ${user} sudo && \\\nprintf \"\\\nset timeout -1\\n\\\nspawn passwd ${user}\\n\\\nexpect \\\"Enter new UNIX password:\\\" { send \\\"${password}\\\\\\n\\\" }\\n\\\nexpect \\\"Retype new UNIX password:\\\" { send \\\"${password}\\\\\\n\\\" }\\n\\\nexpect eof\\n\\\n\" | expect && rm -rf /var/lib/apt/lists/*;\n\n# Install package for FLTK, TigerVNC and XRDP.\nRUN apt-get install --no-install-recommends -y wget dpkg-dev git patch && rm -rf /var/lib/apt/lists/*;\n\n# Install FLTK for TigerVNC.\nRUN \\\n mkdir fltk.build && \\\ncd fltk.build && \\\nURL=http://archive.ubuntu.com/ubuntu/pool/universe/f/ && \\\nwget -q ${URL}/fltk1.3/fltk1.3_1.3.3.orig.tar.gz && \\\nwget -q ${URL}/fltk1.3/fltk1.3_1.3.3-8.dsc && \\\nwget -q ${URL}/fltk1.3/fltk1.3_1.3.3-8.debian.tar.xz && \\\ntar zxvf fltk1.3_1.3.3.orig.tar.gz && \\\ncd fltk-1.3.3/ && \\\ntar xvf ../fltk1.3_1.3.3-8.debian.tar.xz && \\\npkgs=\"$(dpkg-checkbuilddeps 2>&1 | \\\n       sed -e 's/.*build dependencies://g' -e 's/|/ /g' \\\n           -e 's/libglu-dev//g' -e 's/libgl-dev//g' \\\n           -e 's/libz-dev//g' -e 's/([^)]*)//g')\" && \\\n apt-get install --no-install-recommends -y -o 'apt::install-recommends=true' ${pkgs} && \\\ndpkg-buildpackage -us -uc && \\\napt-get remove -y ${pkgs} && \\\ncd .. && \\\ndpkg -i *.deb || (apt-get -f install -y ; dpkg -i *.deb) && \\\ncd .. && \\\nrm -rf fltk.build && rm fltk1.3_1.3.3.orig.tar.gz && rm -rf /var/lib/apt/lists/*;\n\n# Install TigerVNC from upstream.\nRUN \\\n mkdir tigervnc.build && \\\ncd tigervnc.build && \\\ngit clone https://github.com/TigerVNC/tigervnc && \\\ncd tigervnc && \\\ngit checkout ff872614b507d0aa8bfbd09ef41550390cfe658a -b branch && \\\nln -s contrib/packages/deb/ubuntu-xenial/debian && \\\nchmod a+x debian/rules && \\\nsed -e 's/libjpeg-turbo8/libjpeg62-turbo/g' \\\n    -e 's/libgnutls30/libgnutls-deb0-28/g' \\\n    -e 's/libgnutls-dev/libgnutls28-dev/g' -i debian/control && \\\npkgs=\"$(dpkg-checkbuilddeps 2>&1 | \\\n       sed -e 's/.*build dependencies://g' -e 's/([^)]*)//g')\" && \\\n apt-get install --no-install-recommends -y -o 'apt::install-recommends=true' ${pkgs} && \\\nrm debian/xorg-source-patches/xserver118-patch.patch && \\\ntouch debian/xorg-source-patches/xserver118-patch.patch && \\\nfakeroot debian/rules binary && \\\napt-get remove -y ${pkgs} && \\\ncd .. && \\\ndpkg -i *.deb || (apt-get -f install -y ; dpkg -i *.deb) && \\\ncd .. && \\\nrm -rf tigervnc.build && rm -rf /var/lib/apt/lists/*;\n\n# Install latest XRDP. XRDP 0.9.1-4~bpo8+1 can be installed without\n# updating other package while XRDP 0.9.1-7 cannot. And apply patch to\n# latest XRDP for changing Xvnc session to be default because Xorg\n# session's cursor has black background.\nRUN \\\nmkdir xrdp && \\\ncd xrdp && \\\nURL=http://ftp.debian.org/debian/pool/main/x/xrdp && \\\nPKG=\"\\\nxrdp_${xrdp}_${cpu}.deb \\\nxorgxrdp_${xrdp}_${cpu}.deb \\\n\" && \\\nfor pkg in ${PKG}; do \\\n  wget -q ${URL}/${pkg} && \\\n  (dpkg -i \"${pkg}\" || apt-get -f install -y); \\\ndone && \\\ncd .. && \\\nrm -rf xrdp && \\\ncd /etc/xrdp && \\\necho \"\\\n--- xrdp.ini.org\t2017-02-23 07:14:16.614833723 +0000\\n\\\n+++ xrdp.ini\t2017-02-23 07:15:10.489078284 +0000\\n\\\n@@ -147,15 +147,6 @@ tcutils=true\\n\\\n ; Session types\\n\\\n ;\\n\\\n \\n\\\n-[Xorg]\\n\\\n-name=Xorg\\n\\\n-lib=libxup.so\\n\\\n-username=ask\\n\\\n-password=ask\\n\\\n-ip=127.0.0.1\\n\\\n-port=-1\\n\\\n-code=20\\n\\\n-\\n\\\n [Xvnc]\\n\\\n name=Xvnc\\n\\\n lib=libvnc.so\\n\\\n@@ -166,6 +157,15 @@ port=-1\\n\\\n #xserverbpp=24\\n\\\n #delay_ms=2000\\n\\\n \\n\\\n+[Xorg]\\n\\\n+name=Xorg\\n\\\n+lib=libxup.so\\n\\\n+username=ask\\n\\\n+password=ask\\n\\\n+ip=127.0.0.1\\n\\\n+port=-1\\n\\\n+code=20\\n\\\n+\\n\\\n [console]\\n\\\n name=console\\n\\\n lib=libvnc.so\\n\\\n\" | patch -p0\n\n# Install package for fltk, TigerVNC and XRDP.\n# Remove package for building fltk and TigerVNC.\nRUN apt-get remove -y wget dpkg-dev git patch\n\n# Disable resolvconf postinst to /etc/resolv.conf which cannot be\n# updated in container.\n# https://github.com/docker/docker/issues/1297#issuecomment-115458690\nRUN \\\necho \"resolvconf resolvconf/linkify-resolvconf boolean false\" | \\\ndebconf-set-selections\n\n# Install desktop.\nRUN case \"${desktop}\" in \\\ngnome \\\n  apt-get install --no-install-recommends -y task-gnome-desktop && \\\n  service dbus start && \\\n  su - ${user} -c \"dbus-launch gsettings set \\\n  org.gnome.desktop.lockdown disable-lock-screen true\" && \\\n  su - ${user} -c \"dbus-launch gsettings set \\\n  org.gnome.desktop.session idle-delay 0\" && \\\n  service dbus stop;; \\\nxfce \\\n  apt-get install --no-install-recommends -y task-xfce-desktop && \\\n  echo \"mode: off\\n\" > /home/${user}/.xscreensaver && \\\n  chown ${user}:${user} /home/${user}/.xscreensaver;; \\\nmate \\\n  apt-get install --no-install-recommends -y task-mate-desktop && \\\n  service dbus start && \\\n  su - ${user} -c \"dbus-launch gsettings set \\\n  org.mate.screensaver idle-activation-enabled false\" && \\\n  su - ${user} -c \"dbus-launch gsettings set \\\n  org.mate.screensaver lock-enabled false\" && \\\n  service dbus stop;; \\\nlxde \\\n\n  echo \"\\\nPackage: wicd-daemon\\n\\\nPin: version *\\n\\\nPin-Priority: -1\\n\\\n\" > /etc/apt/preferences.d/wicd-daemon && \\\n  apt-mark hold wicd && \\\n  apt-get install --no-install-recommends -y task-lxde-desktop && \\\n  echo \"mode: off\\n\" > /home/${user}/.xscreensaver && \\\n  chown ${user}:${user} /home/${user}/.xscreensaver;; \\\nkde \\\n  apt-get install --no-install-recommends -y task-kde-desktop;; \\\nesac && rm -rf /var/lib/apt/lists/*;\n\n# Remove expect.\nRUN apt-get remove -y expect\n\n# Clean cache\nRUN \\\napt-get autoremove -y && \\\napt-get clean -y all\n\n# Use rsyslog instead of journald.\nCMD \\\nservice rsyslog start && \\\nservice dbus start && \\\nservice xrdp start && \\\ntail -f /var/log/syslog\n"
}