{
  "startTime": 1674236181871,
  "endTime": 1674236182206,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 97,
        "lineEnd": 97,
        "columnStart": 4,
        "columnEnd": 83
      }
    },
    {
      "rule": "curlUseHttpsUrl",
      "position": {
        "lineStart": 97,
        "lineEnd": 97,
        "columnStart": 4,
        "columnEnd": 83
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 93,
        "lineEnd": 93,
        "columnStart": 65,
        "columnEnd": 135
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "# Generated by Neurodocker version 0.4.3-2-g01cdd22\n# Timestamp: 2019-01-16 17:35:01 UTC\n#\n# Thank you for using Neurodocker. If you discover any issues\n# or ways to improve this software, please submit an issue or\n# pull request on our GitHub repository:\n#\n#     https://github.com/kaczmarj/neurodocker\n\nFROM neurodebian:stretch-non-free\n\nARG DEBIAN_FRONTEND=\"noninteractive\"\n\nENV LANG=\"en_US.UTF-8\" \\\n    LC_ALL=\"en_US.UTF-8\" \\\n    ND_ENTRYPOINT=\"/neurodocker/startup.sh\"\nRUN export ND_ENTRYPOINT=\"/neurodocker/startup.sh\" \\\n    && apt-get update -qq \\\n    && apt-get install -y -q --no-install-recommends \\\n           apt-utils \\\n           bzip2 \\\n           ca-certificates \\\n           curl \\\n           locales \\\n           unzip \\\n           git \\\n    && apt-get clean \\\n    && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/* \\\n    && sed -i -e 's/# en_US.UTF-8 UTF-8/en_US.UTF-8 UTF-8/' /etc/locale.gen \\\n    && dpkg-reconfigure --frontend=noninteractive locales \\\n    && update-locale LANG=\"en_US.UTF-8\" \\\n    && chmod 777 /opt && chmod a+s /opt \\\n    && mkdir -p /neurodocker \\\n    && if [ ! -f \"$ND_ENTRYPOINT\" ]; then \\\n         echo '#!/usr/bin/env bash' >> \"$ND_ENTRYPOINT\" \\\n    &&   echo 'set -e' >> \"$ND_ENTRYPOINT\" \\\n    &&   echo 'if [ -n \"$1\" ]; then \"$@\"; else /usr/bin/env bash; fi' >> \"$ND_ENTRYPOINT\"; \\\n    fi \\\n    && chmod -R 777 /neurodocker && chmod a+s /neurodocker\n\nENTRYPOINT [\"/neurodocker/startup.sh\"]\n\nRUN apt-get update -qq \\\n    && apt-get install -y -q --no-install-recommends \\\n           fsl \\\n           gcc \\\n           g++ \\\n           software-properties-common \\\n    && apt-get clean \\\n    && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*\n\nRUN useradd --no-user-group --create-home --shell /bin/bash neuro\nUSER neuro\n\nRUN sed -i '$isource /etc/fsl/fsl.sh' $ND_ENTRYPOINT\n\nCOPY [\".\", \"/src/NiMARE/\"]\n\nENV CONDA_DIR=\"/opt/miniconda-latest\" \\\n    PATH=\"/opt/miniconda-latest/bin:$PATH\"\nRUN export PATH=\"/opt/miniconda-latest/bin:$PATH\" \\\n    && echo \"Downloading Miniconda installer ...\" \\\n    && conda_installer=\"/tmp/miniconda.sh\" \\\n    && curl -fsSL --retry 5 -o \"$conda_installer\" https://repo.continuum.io/miniconda/Miniconda3-latest-Linux-x86_64.sh \\\n    && bash \"$conda_installer\" -b -p /opt/miniconda-latest \\\n    && rm -f \"$conda_installer\" \\\n    && conda update -yq -nbase conda \\\n    && conda config --system --prepend channels conda-forge \\\n    && conda config --system --set auto_update_conda false \\\n    && conda config --system --set show_channel_urls true \\\n    && sync && conda clean -tipsy && sync \\\n    && conda create -y -q --name nimare \\\n    && conda install -y -q --name nimare \\\n           'python=3.6' \\\n           'jupyter' \\\n           'jupyterlab' \\\n           'jupyter_contrib_nbextensions' \\\n           'seaborn' \\\n           'pytest' \\\n           'pytest-cov' \\\n           'codecov' \\\n    && sync && conda clean -tipsy && sync \\\n    && bash -c \"source activate nimare \\\n    &&   pip install --no-cache-dir  \\\n             '/src/NiMARE/'\" \\\n    && rm -rf ~/.cache/pip/* \\\n    && sync \\\n    && sed -i '$isource activate nimare' $ND_ENTRYPOINT\n\nRUN mkdir -p ~/.jupyter && echo c.NotebookApp.ip = \\\"0.0.0.0\\\" > ~/.jupyter/jupyter_notebook_config.py\n\nUSER root\n\nRUN apt-get update && add-apt-repository -y ppa:openjdk-r/ppa && apt-get install -y --no-install-recommends openjdk-8-jdk openjdk-8-jre && rm -rf /var/lib/apt/lists/*;\n\nRUN update-alternatives --config java && update-alternatives --config javac\n\nRUN curl -f -o mallet-2.0.7.tar.gz https://mallet.cs.umass.edu/dist/mallet-2.0.7.tar.gz && tar xzf mallet-2.0.7.tar.gz && rm mallet-2.0.7.tar.gz && mkdir /home/neuro/resources && mv mallet-2.0.7 /home/neuro/resources/mallet\n\nWORKDIR /home/neuro\n\nRUN echo '{ \\\n    \\n  \"pkg_manager\": \"apt\", \\\n    \\n  \"instructions\": [ \\\n    \\n    [ \\\n    \\n      \"base\", \\\n    \\n      \"neurodebian:stretch-non-free\" \\\n    \\n    ], \\\n    \\n    [ \\\n    \\n      \"install\", \\\n    \\n      [ \\\n    \\n        \"fsl\", \\\n    \\n        \"gcc\", \\\n    \\n        \"g++\", \\\n    \\n        \"software-properties-common\" \\\n    \\n      ] \\\n    \\n    ], \\\n    \\n    [ \\\n    \\n      \"user\", \\\n    \\n      \"neuro\" \\\n    \\n    ], \\\n    \\n    [ \\\n    \\n      \"add_to_entrypoint\", \\\n    \\n      \"source /etc/fsl/fsl.sh\" \\\n    \\n    ], \\\n    \\n    [ \\\n    \\n      \"copy\", \\\n    \\n      [ \\\n    \\n        \".\", \\\n    \\n        \"/src/NiMARE/\" \\\n    \\n      ] \\\n    \\n    ], \\\n    \\n    [ \\\n    \\n      \"miniconda\", \\\n    \\n      { \\\n    \\n        \"create_env\": \"nimare\", \\\n    \\n        \"miniconda_version\": \"4.3.31\", \\\n    \\n        \"conda_install\": [ \\\n    \\n          \"python=3.6\", \\\n    \\n          \"jupyter\", \\\n    \\n          \"jupyterlab\", \\\n    \\n          \"jupyter_contrib_nbextensions\", \\\n    \\n          \"seaborn\" \\\n    \\n        ], \\\n    \\n        \"pip_install\": [ \\\n    \\n          \"/src/NiMARE/\" \\\n    \\n        ], \\\n    \\n        \"activate\": true \\\n    \\n      } \\\n    \\n    ], \\\n    \\n    [ \\\n    \\n      \"run\", \\\n    \\n      \"mkdir -p ~/.jupyter && echo c.NotebookApp.ip = \\\\\\\"0.0.0.0\\\\\\\" > ~/.jupyter/jupyter_notebook_config.py\" \\\n    \\n    ], \\\n    \\n    [ \\\n    \\n      \"user\", \\\n    \\n      \"root\" \\\n    \\n    ], \\\n    \\n    [ \\\n    \\n      \"run\", \\\n    \\n      \"apt-get update && add-apt-repository -y ppa:openjdk-r/ppa && apt-get install -y --no-install-recommends openjdk-8-jdk openjdk-8-jre\" \\\n    \\n    ], \\\n    \\n    [ \\\n    \\n      \"run\", \\\n    \\n      \"update-alternatives --config java && update-alternatives --config javac\" \\\n    \\n    ], \\\n    \\n    [ \\\n    \\n      \"run\", \\\n    \\n      \"curl -o mallet-2.0.7.tar.gz http://mallet.cs.umass.edu/dist/mallet-2.0.7.tar.gz && tar xzf mallet-2.0.7.tar.gz && rm mallet-2.0.7.tar.gz && mkdir /home/neuro/resources && mv mallet-2.0.7 /home/neuro/resources/mallet\" \\\n    \\n    ], \\\n    \\n    [ \\\n    \\n      \"workdir\", \\\n    \\n      \"/home/neuro\" \\\n    \\n    ] \\\n    \\n  ] \\\n    \\n}' > /neurodocker/neurodocker_specs.json\n"
}