{
  "startTime": 1674248808508,
  "endTime": 1674248808846,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 18,
        "lineEnd": 18,
        "columnStart": 4,
        "columnEnd": 141
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM ubuntu:14.04\n\nENV CGRU_VERSION=2.2.3 CGRU_UBUNTU_VERSION=14.04.5\nLABEL maintainer=\"Alexandre Buisine <alexandrejabuisine@gmail.com>\" cgru_version=$CGRU_VERSION\n\nRUN DEBIAN_FRONTEND=noninteractive apt-get -qq update \\\n && apt-get -yqq --no-install-recommends install \\\n \tcurl \\\n \tlibpq5 \\\n \tlibpython2.7 \\\n \tpython3-sip \\\n \ttcpdump \\\n \ttelnet \\\n \timagemagick \\\n && apt-get -yqq clean \\\n && rm -rf /var/lib/apt/lists/*\n\nWORKDIR /tmp\nRUN curl -f -Lks \"https://downloads.sourceforge.net/project/cgru/${CGRU_VERSION}/cgru.${CGRU_VERSION}.ubuntu${CGRU_UBUNTU_VERSION}_amd64.tar.gz\" | tar zxvf - \\\n && dpkg -i cgru-common*.deb afanasy-common*.deb afanasy-server*.deb afanasy-render*.deb \\\n && rm -rf *\n\nADD https://github.com/kreuzwerker/envplate/releases/download/v0.0.8/ep-linux /usr/local/bin/ep\nCOPY resources/docker-entrypoint.sh /usr/local/bin/\nRUN chmod +rx /usr/local/bin/ep /usr/local/bin/docker-entrypoint.sh \\\n && chown render /opt/cgru/afanasy/config_default.json /opt/cgru/config_default.json \\\n && sed -i 's/\"af_servername\":\".\\+\",/\"af_servername\":\"${AF_SERVERNAME}\",/' /opt/cgru/afanasy/config_default.json \\\n && sed -i 's/\"af_serverport\":[0-9]\\+,/\"af_serverport\":${AF_SERVERPORT},/' /opt/cgru/afanasy/config_default.json \\\n && sed -i 's/\"af_clientport\":[0-9]\\+,/\"af_clientport\":${AF_CLIENTPORT},/' /opt/cgru/afanasy/config_default.json \\\n && sed -i 's/\"af_thumbnail_extensions\":.\\+,/\"af_thumbnail_extensions\":${AF_THUMBNAIL_EXTENSIONS},/' /opt/cgru/afanasy/config_default.json \\\n && sed -i 's/\"af_thumbnail_cmd\":\".\\+\",/\"af_thumbnail_cmd\":\"${AF_THUMBNAIL_CMD}\",/' /opt/cgru/afanasy/config_default.json \\\n && sed -i 's/\"af_render_zombietime\":.\\+,/\"af_render_zombietime\":${AF_RENDER_ZOMBIETIME},/' /opt/cgru/afanasy/config_default.json \\\n && sed -i 's/\"af_render_connectretries\":.\\+,/\"af_render_connectretries\":${AF_RENDER_CONNECTRETRIES},/' /opt/cgru/afanasy/config_default.json \\\n && sed -i 's/\"af_render_connectretries\":.\\+,/\"af_render_connectretries\":${AF_RENDER_CONNECTRETRIES},/' /opt/cgru/afanasy/config_default.json \\\n && sed -i 's/\"cmd_shell\":\"\\/bin\\/sh -c\"/\"cmd_shell\":\"${CGRU_CMD_SHELL}\"/' /opt/cgru/config_default.json\n\nVOLUME /var/tmp/afanasy\nENV CGRU_CMD_SHELL=\"/bin/sh -c\" \\\n AF_USERNAME=\"render\" \\\n AF_SERVERNAME=\"afrender\" \\\n AF_SERVERPORT=51000 \\\n AF_RENDER_ZOMBIETIME=60 \\\n AF_RENDER_CONNECTRETRIES=3 \\\n AF_THUMBNAIL_EXTENSIONS=\"[\\\"exr\\\",\\\"dpx\\\",\\\"jpg\\\",\\\"jpeg\\\",\\\"png\\\",\\\"tif\\\",\\\"tiff\\\",\\\"tga\\\"]\" \\\n AF_THUMBNAIL_CMD=\"convert -identify '%(image)s' %(pre_args)s -thumbnail '100x100^' -gravity center -extent 100x100 -colorspace sRGB '%(thumbnail)s'\"\n# ENV AF_HOSTNAME=\"\"\n\nWORKDIR /opt/cgru\nENTRYPOINT [\"/usr/local/bin/docker-entrypoint.sh\"]\nCMD [\"/opt/cgru/afanasy/bin/afcmd\"]"
}