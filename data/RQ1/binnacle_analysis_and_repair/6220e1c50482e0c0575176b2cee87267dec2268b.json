{
  "startTime": 1674234144618,
  "endTime": 1674234144905,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 26,
        "lineEnd": 26,
        "columnStart": 3,
        "columnEnd": 45
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM php:7.1.7-apache \nMAINTAINER Azure App Services Container Images <appsvc-images@microsoft.com> \n\nCOPY apache2.conf /bin/ \nCOPY init_container.sh /bin/ \nCOPY hostingstart.html /home/site/wwwroot/hostingstart.html \n\nRUN a2enmod rewrite expires include headers deflate filter ext_filter \n\n# install the PHP extensions we need \nRUN apt-get update \\  \n&& apt-get install -y --no-install-recommends \\  \nlibpng12-dev \\  \nlibjpeg-dev \\  \nlibpq-dev \\  \nlibmcrypt-dev \\  \nlibldap2-dev \\  \nlibldb-dev \\  \nlibicu-dev \\  \nlibgmp-dev \\  \nlibmagickwand-dev \\  \nopenssh-server \\  \nlibssl-dev \\  \nzip \\  \nunzip \\  \ngit \\\n&& curl -f -sS https://getcomposer.org/installer | php \\\n&& chmod +x composer.phar \\\n&& mv composer.phar /usr/local/bin/composer \\\n&& chmod 755 /bin/init_container.sh \\\n&& echo \"root:Docker!\" | chpasswd \\\n&& ln -s /usr/lib/x86_64-linux-gnu/libldap.so /usr/lib/libldap.so \\\n&& ln -s /usr/lib/x86_64-linux-gnu/liblber.so /usr/lib/liblber.so \\\n&& ln -s /usr/include/x86_64-linux-gnu/gmp.h /usr/include/gmp.h \\\n&& rm -rf /var/lib/apt/lists/* \\\n&& pecl install imagick-beta \\  \nmongodb-1.2.9 \\  \napcu-5.1.8 \\  \napcu_bc-1.0.3 \\  \nigbinary-2.0.1 \\  \nredis-3.1.2 \\\n&& docker-php-ext-configure gd --with-png-dir=/usr --with-jpeg-dir=/usr \\\n&& docker-php-ext-install gd \\  \nmysqli \\  \nopcache \\  \npdo \\  \npdo_mysql \\  \npdo_pgsql \\  \npgsql \\  \nldap \\  \nintl \\  \nmcrypt \\  \ngmp \\  \nzip \\  \nbcmath \\  \nmbstring \\  \npcntl \\  \nsockets \\\n&& docker-php-ext-enable imagick \\  \nmongodb \\  \napcu --ini-name 40-apcu.ini \\  \napc --ini-name 50-apc.ini \\  \nigbinary \\  \nredis\n\nRUN \\  \nrm -f /var/log/apache2/* \\  \n&& rmdir /var/lock/apache2 \\  \n&& rmdir /var/run/apache2 \\  \n&& rmdir /var/log/apache2 \\  \n&& chmod 777 /var/log \\  \n&& chmod 777 /var/run \\  \n&& chmod 777 /var/lock \\  \n&& chmod 777 /bin/init_container.sh \\  \n&& cp /bin/apache2.conf /etc/apache2/apache2.conf \\  \n&& rm -rf /var/www/html \\  \n&& rm -rf /var/log/apache2 \\  \n&& mkdir -p /home/LogFiles \\  \n&& ln -s /home/site/wwwroot /var/www/html \\  \n&& ln -s /home/LogFiles /var/log/apache2 \n\nRUN { \\  \necho 'opcache.memory_consumption=256'; \\  \necho 'opcache.interned_strings_buffer=8'; \\  \necho 'opcache.max_accelerated_files=60000'; \\  \necho 'opcache.revalidate_freq=60'; \\  \necho 'opcache.fast_shutdown=1'; \\  \necho 'opcache.enable_cli=1'; \\  \n} > /usr/local/etc/php/conf.d/opcache-recommended.ini \n\nRUN { \\  \necho 'error_log=/var/log/apache2/php-error.log'; \\  \necho 'display_errors=Off'; \\  \necho 'log_errors=On'; \\  \necho 'display_startup_errors=Off'; \\  \necho 'date.timezone=UTC'; \\  \necho 'realpath_cache_size=8M'; \\  \necho 'realpath_cache_ttl=900'; \\  \necho 'max_execution_time=600'; \\  \necho 'memory_limit=512M'; \\  \n} > /usr/local/etc/php/conf.d/php.ini \n\nCOPY sshd_config /etc/ssh/ \n\nEXPOSE 2222 8080 \nENV APACHE_RUN_USER www-data \nENV PHP_VERSION 7.1.7 \nENV PORT 8080 \nENV WEBSITE_ROLE_INSTANCE_ID localRoleInstance \nENV WEBSITE_INSTANCE_ID localInstance \nENV PATH ${PATH}:/home/site/wwwroot \n\nWORKDIR /var/www/html \n\nENTRYPOINT [\"/bin/init_container.sh\"] \n\n"
}