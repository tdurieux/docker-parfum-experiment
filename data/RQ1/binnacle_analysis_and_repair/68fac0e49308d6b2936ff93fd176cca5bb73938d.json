{
  "startTime": 1674250181615,
  "endTime": 1674250181930,
  "originalSmells": [
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 14,
        "lineEnd": 17,
        "columnStart": 5,
        "columnEnd": 37
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM phusion/baseimage:0.9.16\nMAINTAINER y_hokkey github.com/hokkey\n# an original dockerfile is by michael-harris github.com/michael-harris/resourcespace-docker\n\n# Set correct environment variables.\nENV HOME /root\n\n# Use baseimage-docker's init system.\nCMD [\"/sbin/my_init\"]\n\n# Update System\nRUN \\\n  apt-get update \\\n  && apt-get -y upgrade \\\n  && apt-get -y --no-install-recommends install \\\n      apache2 php5 php5-dev php5-gd php5-mysql php5-ldap php5-imap subversion vim imagemagick \\\n      ghostscript antiword xpdf mysql-client libav-tools postfix \\\n      libimage-exiftool-perl wget zip \\\n  && apt-get clean \\\n  && rm -r /var/lib/apt/lists/*\n\n# Install locales\nENV DEBIAN_FRONTEND noninteractive\nRUN locale-gen cs_CZ.UTF-8 \\\n    && locale-gen de_DE.UTF-8 \\\n    && locale-gen es_ES.UTF-8 \\\n    && locale-gen fr_FR.UTF-8 \\\n    && locale-gen it_IT.UTF-8 \\\n    && locale-gen pl_PL.UTF-8 \\\n    && locale-gen pt_BR.UTF-8 \\\n    && locale-gen ru_RU.UTF-8 \\\n    && locale-gen sl_SI.UTF-8 \\\n    && locale-gen uk_UA.UTF-8\n\n# Enable apache mods.\nRUN a2enmod php5 && a2enmod rewrite && php5enmod imap\n\n# Modify apache2.conf\nRUN sed -i -e 's/Options Indexes FollowSymLinks/Options -Indexes +FollowSymLinks/g' /etc/apache2/apache2.conf\n\n# Modify php.ini\nRUN sed -i -e 's/upload_max_filesize\\s*=\\s*2M/upload_max_filesize = 1G/g' \\\n        -e 's/post_max_size\\s*=\\s*8M/post_max_size = 1G/g' \\\n        -e 's/max_execution_time\\s*=\\s*30/max_execution_time = 1000/g' \\\n        -e 's/memory_limit\\s*=\\s*128M/memory_limit = 1G/g' \\\n        /etc/php5/apache2/php.ini\n\n# Manually set up the apache environment variables\nENV APACHE_RUN_USER www-data\nENV APACHE_RUN_GROUP www-data\nENV APACHE_LOG_DIR /var/log/apache2\nENV APACHE_LOCK_DIR /var/lock/apache2\nENV APACHE_PID_FILE /var/run/apache2.pid\nENV RS_REVISION 7009\n\n# Base URL\nENV BASE_URL //localhost/resourcespace\n\n# MYSQL settings\nENV MYSQL_USER_NAME root\nENV MYSQL_PASSWORD yourpassword\nENV MYSQL_DB resourcespace\n\n# SMTP settings\nENV USE_SMTP false\nENV SMTP_SECURE tls\nENV SMTP_HOST smtp.gmail.com\nENV SMTP_PORT 465\nENV SMTP_AUTH true\nENV SMTP_USERNAME yourname@gmail.com\nENV SMTP_PASSWORD yourpassword\n\n# Add to Startup Items\nRUN mkdir /etc/service/apache2\nCOPY conf/apache2.sh /etc/service/apache2/run\nRUN chmod a+x /etc/service/apache2/run\n\n# Add cron\nCOPY conf/resourcespace.sh /etc/cron.daily/resourcespace.sh\nRUN chmod a+x /etc/cron.daily/resourcespace.sh\n\n# Setup ResourceSpace\nWORKDIR /var/www/html/\n\nRUN \\\n  svn checkout -r $RS_REVISION http://svn.montala.net/svn/resourcespace resourcespace\n\nWORKDIR resourcespace\n\n# change permissions and replace Japanese words\nRUN \\\n  mkdir filestore \\\n  && chown www-data:www-data -R filestore \\\n  && chown www-data:www-data -R plugins \\\n  && chown www-data:www-data -R gfx/homeanim \\\n  && chown www-data:www-data -R include \\\n  && sed -i -e 's/Log Out/ログアウト/g' \\\n         -e 's/ヘルプ助言/ヘルプ/g' \\\n         -e 's/チームセンター/サーバ設定/g' \\\n         -e 's/背景色/デザイン/g' \\\n         -e 's/簡単検索/検索/g' \\\n         -e 's/クリアー/クリア/g' \\\n         -e 's/国の指定/地域/g' \\\n         -e 's/日付指定/日付/g' \\\n         -e 's/結果表示/結果を表示/g' \\\n         -e 's/per page/表示件数/g' \\\n         -e 's/検索保存/保存された検索条件/g' \\\n         -e 's/画像のプレビュー/画像プレビュー/g' \\\n         -e 's/最善のリソース/ベストリソース/g' \\\n         -e 's/pixels/ピクセル/g' \\\n         languages/jp.php\n\nCOPY conf/rs-config.php include/config.php\nVOLUME /var/www/resourcespace/filestore\n\nEXPOSE 80\n"
}