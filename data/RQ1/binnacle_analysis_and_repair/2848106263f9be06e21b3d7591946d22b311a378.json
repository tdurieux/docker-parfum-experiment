{
  "startTime": 1674234132185,
  "endTime": 1674234132556,
  "originalSmells": [
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 38,
        "lineEnd": 38,
        "columnStart": 4,
        "columnEnd": 37
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "# Copyright (c) 2016 Alexander Lamaison <alexander.lamaison@gmail.com>\n#\n# Redistribution and use in source and binary forms,\n# with or without modification, are permitted provided\n# that the following conditions are met:\n#\n#   Redistributions of source code must retain the above\n#   copyright notice, this list of conditions and the\n#   following disclaimer.\n#\n#   Redistributions in binary form must reproduce the above\n#   copyright notice, this list of conditions and the following\n#   disclaimer in the documentation and/or other materials\n#   provided with the distribution.\n#\n#   Neither the name of the copyright holder nor the names\n#   of any other contributors may be used to endorse or\n#   promote products derived from this software without\n#   specific prior written permission.\n#\n# THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND\n# CONTRIBUTORS \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES,\n# INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES\n# OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n# ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR\n# CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n# SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,\n# BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n# SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n# INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\n# WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n# NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE\n# USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY\n# OF SUCH DAMAGE.\n\nFROM debian:jessie\n\nRUN apt-get update \\\n && apt-get install --no-install-recommends -y openssh-server \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/*\nRUN mkdir /var/run/sshd\n\n# Chmodding because, when building on Windows, files are copied in with\n# -rwxr-xr-x permissions.\n#\n# Copying to a temp location, then moving because chmodding the copied file has\n# no effect (Docker AUFS-related bug maybe?)\nCOPY ssh_host_rsa_key /tmp/etc/ssh/ssh_host_rsa_key\nRUN mv /tmp/etc/ssh/ssh_host_rsa_key /etc/ssh/ssh_host_rsa_key\nRUN chmod 600 /etc/ssh/ssh_host_rsa_key\n\nRUN adduser --disabled-password --gecos 'Test user for libssh2 integration tests' libssh2\nRUN echo 'libssh2:my test password' | chpasswd\n\nRUN sed -i 's/ChallengeResponseAuthentication no/ChallengeResponseAuthentication yes/' /etc/ssh/sshd_config\n\n# SSH login fix. Otherwise user is kicked off after login\nRUN sed 's@session\\s*required\\s*pam_loginuid.so@session optional pam_loginuid.so@g' -i /etc/pam.d/sshd\n\nUSER libssh2\n\nRUN mkdir -p /home/libssh2/.ssh\nRUN mkdir -p /home/libssh2/sandbox\n\nCOPY authorized_keys /tmp/libssh2/.ssh/authorized_keys\nRUN cp /tmp/libssh2/.ssh/authorized_keys /home/libssh2/.ssh/authorized_keys\nRUN chmod 600 /home/libssh2/.ssh/authorized_keys\n\nUSER root\n\nEXPOSE 22\n# -e gives logs via 'docker logs'\nCMD [\"/usr/sbin/sshd\", \"-D\", \"-e\"]\n"
}