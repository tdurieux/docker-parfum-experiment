{
  "startTime": 1674235282608,
  "endTime": 1674235282747,
  "originalSmells": [
    {
      "rule": "wgetUseHttpsUrl",
      "position": {
        "lineStart": 19,
        "lineEnd": 20,
        "columnStart": 4,
        "columnEnd": 111
      }
    },
    {
      "rule": "wgetUseHttpsUrl",
      "position": {
        "lineStart": 30,
        "lineEnd": 30,
        "columnStart": 4,
        "columnEnd": 136
      }
    },
    {
      "rule": "yumInstallRmVarCacheYum",
      "position": {
        "lineStart": 6,
        "lineEnd": 6,
        "columnStart": 1,
        "columnEnd": 20
      }
    },
    {
      "rule": "yumInstallRmVarCacheYum",
      "position": {
        "lineStart": 7,
        "lineEnd": 7,
        "columnStart": 1,
        "columnEnd": 19
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "# Centos based container with Java and Tomcat\nFROM centos:centos7\nMAINTAINER kirillf\n\n# Install prepare infrastructure\nRUN yum -y update && \\\n yum -y install wget && \\\n yum -y install tar && rm -rf /var/cache/yum\n\n# Prepare environment\nENV JAVA_HOME /opt/java\nENV CATALINA_HOME /opt/tomcat\nENV PATH $PATH:$JAVA_HOME/bin:$CATALINA_HOME/bin:$CATALINA_HOME/scripts\n\n# Install Oracle Java8\nENV JAVA_VERSION 8u191\nENV JAVA_BUILD 8u191-b12\nENV JAVA_DL_HASH 2787e4a523244c269598db4e85c51e0c\n\nRUN wget --no-check-certificate --no-cookies --header \"Cookie: oraclelicense=accept-securebackup-cookie\" \\\n https://download.oracle.com/otn-pub/java/jdk/${JAVA_BUILD}/${JAVA_DL_HASH}/jdk-${JAVA_VERSION}-linux-x64.tar.gz && \\\n tar -xvf jdk-${JAVA_VERSION}-linux-x64.tar.gz && \\\n rm jdk*.tar.gz && \\\n mv jdk* ${JAVA_HOME}\n\n\n# Install Tomcat\nENV TOMCAT_MAJOR 8\nENV TOMCAT_VERSION 8.5.35\n\nRUN wget https://mirror.linux-ia64.org/apache/tomcat/tomcat-${TOMCAT_MAJOR}/v${TOMCAT_VERSION}/bin/apache-tomcat-${TOMCAT_VERSION}.tar.gz && \\\n tar -xvf apache-tomcat-${TOMCAT_VERSION}.tar.gz && \\\n rm apache-tomcat*.tar.gz && \\\n mv apache-tomcat* ${CATALINA_HOME}\n\nRUN chmod +x ${CATALINA_HOME}/bin/*sh\n\n# Create Tomcat admin user\nADD create_admin_user.sh $CATALINA_HOME/scripts/create_admin_user.sh\nADD tomcat.sh $CATALINA_HOME/scripts/tomcat.sh\nRUN chmod +x $CATALINA_HOME/scripts/*.sh\n\n# Create tomcat user\nRUN groupadd -r tomcat && \\\n useradd -g tomcat -d ${CATALINA_HOME} -s /sbin/nologin  -c \"Tomcat user\" tomcat && \\\n chown -R tomcat:tomcat ${CATALINA_HOME}\n\nWORKDIR /opt/tomcat\n\nEXPOSE 8080\nEXPOSE 8009\n\nUSER tomcat\nCMD [\"tomcat.sh\"]\n"
}