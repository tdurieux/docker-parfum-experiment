{
  "startTime": 1674236103714,
  "endTime": 1674236103851,
  "originalSmells": [
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 32,
        "lineEnd": 32,
        "columnStart": 4,
        "columnEnd": 29
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 33,
        "lineEnd": 33,
        "columnStart": 62,
        "columnEnd": 79
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM ubuntu:16.04\n\nRUN apt-get update && apt-get install -y --no-install-recommends \\\r\n        build-essential \\\r\n        cmake \\\r\n        git \\\r\n        wget \\\r\n        libatlas-base-dev \\\r\n        libboost-all-dev \\\r\n        libgflags-dev \\\r\n        libgoogle-glog-dev \\\r\n        libhdf5-serial-dev \\\r\n        libleveldb-dev \\\r\n        liblmdb-dev \\\r\n        libopencv-dev \\\r\n        libprotobuf-dev \\\r\n        libsnappy-dev \\\r\n        protobuf-compiler \\\r\n        python-dev \\\r\n        python-numpy \\\r\n        python-pip \\\r\n        python-setuptools \\\r\n        python-scipy && \\\r\n    rm -rf /var/lib/apt/lists/*\n\nENV CAFFE_ROOT=/opt/caffe\nWORKDIR $CAFFE_ROOT\n\n# FIXME: use ARG instead of ENV once DockerHub supports this\nENV CLONE_TAG=master\n\nRUN git clone -b ${CLONE_TAG} --depth 1 https://github.com/jaketaylorpro/caffe.git . && \\\n    pip install --no-cache-dir --upgrade pip && \\\n    cd python && for req in $(cat requirements.txt) pydot; do pip install --no-cache-dir $req; done && cd .. && \\\n    mkdir build && cd build && \\\n    cmake -DCPU_ONLY=1 .. && \\\n    make -j\"$(nproc)\"\n\nRUN /opt/caffe/scripts/download_model_binary.py models/bvlc_reference_caffenet\nRUN /opt/caffe/data/ilsvrc12/get_ilsvrc_aux.sh\n\nENV PYCAFFE_ROOT $CAFFE_ROOT/python\nENV PYTHONPATH $PYCAFFE_ROOT:$PYTHONPATH\nENV PATH $CAFFE_ROOT/build/tools:$PYCAFFE_ROOT:$PATH\nRUN echo \"$CAFFE_ROOT/build/lib\" >> /etc/ld.so.conf.d/caffe.conf && ldconfig\n\nENTRYPOINT [\"./build/examples/cpp_classification/classification.bin\",\"models/bvlc_reference_caffenet/deploy.prototxt\",\"models/bvlc_reference_caffenet/bvlc_reference_caffenet.caffemodel\",\"data/ilsvrc12/imagenet_mean.binaryproto\",\"data/ilsvrc12/synset_words.txt\",\"/envoyai/input/image.jpg\"]\n\nLABEL com.envoyai.metadata-version=2\nLABEL com.envoyai.nvidia=false\nLABEL com.envoyai.info=\"\\\r\nname: Caffe Example C++ Classification\\n\\\r\ntitle: Caffe C++ Classification Example adapted for the EnvoyAI platform.\\n\\\r\nauthor: Caffe adapted by EnvoyAI Staff\\n\\\r\norganization: Caffe and EnvoyAI\\n\\\r\ndata-source: ilsvrc training set\\n\\\r\nalgorithm: Neural Net\\n\\\r\nlinks: you can download a frog picture <a href='http://zso3597.cias.rit.edu/256/week4/project1/images/frog.jpg'>here</a>\"\nLABEL com.envoyai.schema-in=\"\\\r\nimage.jpg:\\n\\\r\n  title: Input Image\\n\\\r\n  mime-type: image/jpeg\"\nLABEL com.envoyai.schema-out=\"\\\r\nguess0:\\n\\\r\n  title: First Guess\\n\\\r\n  type: string \\n\\\r\nconf0:\\n\\\r\n  title: First Guess Confidence\\n\\\r\n  type: percentage\\n\\\r\nguess1:\\n\\\r\n  title: Second Guess\\n\\\r\n  type: string \\n\\\r\nconf1:\\n\\\r\n  title: Second Guess Confidence\\n\\\r\n  type: percentage\\n\\\r\nguess3:\\n\\\r\n  title: Third Guess\\n\\\r\n  type: string \\n\\\r\nconf3:\\n\\\r\n  title: Third Guess Confidence\\n\\\r\n  type: percentage\"\nLABEL com.envoyai.display=\"\\\r\nsource-display-group:\\n\\\r\n  display-elements:\\n\\\r\n    - title: Input Image\\n\\\r\n      id: input-image\\n\\\r\n      content:\\n\\\r\n        pointer:\\n\\\r\n          source: input\\n\\\r\n          property: image.jpg\\n\\\r\nresults-display-group:\\n\\\r\n  presentation: tile\\n\\\r\n  display-elements:\\n\\\r\n    - title: First Guess\\n\\\r\n      id: guess-0\\n\\\r\n      content:\\n\\\r\n        pointer:\\n\\\r\n          source: output\\n\\\r\n          property: guess0\\n\\\r\n      associated-values:\\n\\\r\n        - value:\\n\\\r\n            pointer:\\n\\\r\n              source: output\\n\\\r\n              property: conf0\\n\\\r\n          unit: percentage\\n\\\r\n          label: Confidence\\n\\\r\n    - title: Second Guess\\n\\\r\n      id: guess-1\\n\\\r\n      content:\\n\\\r\n        pointer:\\n\\\r\n          source: output\\n\\\r\n          property: guess1\\n\\\r\n      associated-values:\\n\\\r\n        - value:\\n\\\r\n            pointer:\\n\\\r\n              source: output\\n\\\r\n              property: conf1\\n\\\r\n          unit: percentage\\n\\\r\n          label: Confidence\\n\\\r\n    - title: Third Guess\\n\\\r\n      id: guess-2\\n\\\r\n      content:\\n\\\r\n        pointer:\\n\\\r\n          source: output\\n\\\r\n          property: guess2\\n\\\r\n      associated-values:\\n\\\r\n        - value:\\n\\\r\n            pointer:\\n\\\r\n              source: output\\n\\\r\n              property: conf2\\n\\\r\n          unit: percentage\\n\\\r\n          label: Confidence\"\nLABEL com.envoyai.selector=\"\\\r\nselector-type: choose-one-display-element\\n\\\r\nselector-config:\\n\\\r\n  choose-options:\\n\\\r\n    - guess-0\\n\\\r\n    - guess-1\\n\\\r\n    - guess-2\\n\\\r\n  default-option: guess-0\""
}