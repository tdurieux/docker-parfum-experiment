{
  "startTime": 1674252397768,
  "endTime": 1674252397830,
  "originalSmells": [
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 23,
        "lineEnd": 23,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 10,
        "lineEnd": 21,
        "columnStart": 22,
        "columnEnd": 12
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 10,
        "lineEnd": 21,
        "columnStart": 22,
        "columnEnd": 12
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "# We need an init system for current UF configuration\n# so we're using phusion's Ubuntu 140.04 baseimage\nFROM calthorpeanalytics/phusion-baseimage:trusty\n\n# Set the locale\n# RUN locale-gen en_US.UTF-8\nENV LANG en_US.UTF-8\nENV LANGUAGE en_US:en\nENV LC_ALL en_US.UTF-8\n\nRUN apt-get update && apt-get install --no-install-recommends -y \\\n        build-essential \\\n        curl \\\n        gcc \\\n        git \\\n        libffi-dev \\\n        libssl-dev \\\n        python \\\n        python-dev \\\n        python-pip \\\n        python-yaml \\\n        sudo && rm -rf /var/lib/apt/lists/*;\n\nRUN pip install --no-cache-dir ansible==1.9.6\n\n# Add playbooks to the Docker image\nADD provisioning /opt/uf-provisioning\nWORKDIR /opt/uf-provisioning\n\n# TODO:\n#   I currently don't understand this... taken from the bottom of:\n#   http://ansible.pickle.io/post/86598332429/running-ansible-playbook-in-localhost\nRUN mkdir -p /etc/ansible\nRUN echo \"localhost ansible_connection=local\" > /etc/ansible/hosts\n\n# Run Ansible to configure the Docker image\nRUN ansible-galaxy install -r galaxy-roles.yml\n\n# Don't install postgresql in the image\n# RUN ansible-playbook -v provisioning/servers-web.yml\n\n# Install postgresql in the image\nRUN ansible-playbook -v site.yml\n\n# Use baseimage-docker's init system.\n# CMD [\"/sbin/my_init\"]\n"
}