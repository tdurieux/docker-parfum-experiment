{
  "startTime": 1674248990231,
  "endTime": 1674248990765,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 6,
        "lineEnd": 6,
        "columnStart": 4,
        "columnEnd": 53
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 33,
        "lineEnd": 33,
        "columnStart": 4,
        "columnEnd": 91
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 42,
        "lineEnd": 42,
        "columnStart": 2,
        "columnEnd": 56
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 67,
        "lineEnd": 67,
        "columnStart": 2,
        "columnEnd": 50
      }
    },
    {
      "rule": "yarnCacheCleanAfterInstall",
      "position": {
        "lineStart": 100,
        "lineEnd": 100,
        "columnStart": 6,
        "columnEnd": 18
      }
    },
    {
      "rule": "yarnCacheCleanAfterInstall",
      "position": {
        "lineStart": 104,
        "lineEnd": 104,
        "columnStart": 6,
        "columnEnd": 19
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 34,
        "lineEnd": 34,
        "columnStart": 5,
        "columnEnd": 87
      }
    },
    {
      "rule": "aptGetInstallUseY",
      "position": {
        "lineStart": 5,
        "lineEnd": 5,
        "columnStart": 22,
        "columnEnd": 57
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 5,
        "lineEnd": 5,
        "columnStart": 22,
        "columnEnd": 57
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 5,
        "lineEnd": 5,
        "columnStart": 22,
        "columnEnd": 57
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 12,
        "lineEnd": 27,
        "columnStart": 2,
        "columnEnd": 25
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM openjdk:8u141\n\nENV DEBIAN_FRONTEND noninteractive\n\n# https://github.com/yarnpkg/yarn/issues/2821\nRUN apt-get update && apt-get install -y --no-install-recommends apt-transport-https && rm -rf /var/lib/apt/lists/*;\nRUN curl -f -sS https://dl.yarnpkg.com/debian/pubkey.gpg | apt-key add -\nRUN echo \"deb https://dl.yarnpkg.com/debian/ stable main\" | tee /etc/apt/sources.list.d/yarn.list\n\n# Install dependencies\nRUN dpkg --add-architecture i386 && \\\n  apt-get update && \\\n  apt-get install -yq \\\n  ant\\\n  build-essential\\\n  bzip2:i386\\\n  file\\\n  lib32ncurses5\\\n  lib32z1\\\n  libc6:i386\\\n  libncurses5:i386\\\n  libstdc++6:i386\\\n  rsync\\\n  unzip\\\n  yarn\\\n  zlib1g:i386\\\n  supervisor\\\n  --no-install-recommends && \\\n  apt-get clean && rm -rf /var/lib/apt/lists/*;\n\nENV NPM_CONFIG_LOGLEVEL warn\nENV NODE_VERSION 8.12.0\n\nRUN curl -f -SLO \"https://nodejs.org/dist/v$NODE_VERSION/node-v$NODE_VERSION-linux-x64.tar.xz\" \\\n  && tar -xJf \"node-v$NODE_VERSION-linux-x64.tar.xz\" -C /usr/local --strip-components=1 \\\n  && ln -s /usr/local/bin/node /usr/local/bin/nodejs && rm \"node-v$NODE_VERSION-linux-x64.tar.xz\"\n\n# Download and untar SDK\nENV ANDROID_HOME /usr/local/android-sdk-linux\nENV ANDROID_SDK /usr/local/android-sdk-linux\nENV ANDROID_SDK_URL https://dl.google.com/android/repository/sdk-tools-linux-4333796.zip\nRUN mkdir -p ${ANDROID_HOME} && \\\n  curl -f -L \"${ANDROID_SDK_URL}\" > ${ANDROID_HOME}/sdk.zip && \\\n  cd ${ANDROID_HOME} && \\\n  unzip -qq sdk.zip && \\\n  rm sdk.zip && \\\n  mkdir -p ${HOME}/.android && \\\n  touch ${HOME}/.android/repositories.cfg\n\nENV PATH ${ANDROID_HOME}/platform-tools:${PATH}\nENV PATH ${ANDROID_HOME}/tools:${PATH}\nENV PATH ${ANDROID_HOME}/tools/bin:${PATH}\nENV PATH ${ANDROID_HOME}/build-tools/28.0.3/:${PATH}\n\nADD scripts/android/configureAndroidSdk.sh /tmp/configureAndroidSdk.sh\nRUN /tmp/configureAndroidSdk.sh --install-all-platforms\n\n# Install Android NDK\nENV ANDROID_NDK_VERSION android-ndk-r10e\nENV ANDROID_NDK_FILE ${ANDROID_NDK_VERSION}-linux-x86_64.bin\nENV ANDROID_NDK_URL https://dl.google.com/android/ndk/${ANDROID_NDK_FILE}\nENV ANDROID_NDK /opt/${ANDROID_NDK_VERSION}\nENV PATH $ANDROID_NDK:$PATH\n\n# i have no clue why some of this is here, but it's working elsewhere\n# it appears to install the NDK version expo needs, so that's cool\nRUN mkdir /ndk_setup && cd /ndk_setup && \\\n  curl -f -L ${ANDROID_NDK_URL} > ${ANDROID_NDK_FILE} && \\\n  chmod +x ${ANDROID_NDK_FILE} && \\\n  sync && \\\n  ./${ANDROID_NDK_FILE} && \\\n  mv ./${ANDROID_NDK_VERSION} ${ANDROID_NDK} && \\\n  cp -R \\\n  ${ANDROID_NDK}/toolchains/arm-linux-androideabi-4.8/prebuilt/linux-x86_64 \\\n  ${ANDROID_NDK}/toolchains/arm-linux-androideabi-4.8/prebuilt/linux-x86 && \\\n  cp -R \\\n  ${ANDROID_NDK}/toolchains/x86-4.8/prebuilt/linux-x86_64 \\\n  ${ANDROID_NDK}/toolchains/x86-4.8/prebuilt/linux-x86 && \\\n  cd && rm -rf /ndk_setup\n\n# Support Gradle\nENV TERM dumb\n\n# Install gradle\nRUN wget https://services.gradle.org/distributions/gradle-4.4-all.zip\nRUN unzip -qq gradle-4.4-all.zip\nRUN mv gradle-4.4 /usr/local\nRUN rm gradle-4.4-all.zip\nENV GRADLE_HOME /usr/local/gradle-4.4\nENV PATH ${GRADLE_HOME}/bin:$PATH\n\nADD . /app/turtle\n\nRUN mv /app/turtle/workingdir /app && \\\n    for SDK_VERSION in `ls /app/workingdir/android/`; do \\\n      echo \"preparing $SDK_VERSION shell app\" && \\\n      cd /app/workingdir/android/$SDK_VERSION && \\\n      if [ -f universe-package.json ]; then \\\n      mv package.json exponent-package.json && \\\n      mv universe-package.json package.json && \\\n      yarn install && \\\n      mv package.json universe-package.json && \\\n      mv exponent-package.json package.json; yarn cache clean; \\\n      else \\\n      yarn install; yarn cache clean; \\\n      fi \\\n    ; done && \\\n    mv /app/workingdir /app/turtle\n\nENV NODE_ENV \"production\"\nENV TURTLE_WORKING_DIR_PATH /app/turtle/workingdir/\n\nWORKDIR /app/turtle\n\nADD supervisord.conf /etc/supervisor/conf.d/supervisord.conf\n\nCMD [\"/usr/bin/supervisord\"]\n"
}