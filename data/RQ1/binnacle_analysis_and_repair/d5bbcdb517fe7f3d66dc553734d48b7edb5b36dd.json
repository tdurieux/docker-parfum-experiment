{
  "startTime": 1674238950533,
  "endTime": 1674238950690,
  "originalSmells": [
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 43,
        "lineEnd": 43,
        "columnStart": 7,
        "columnEnd": 46
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM ubuntu:18.04 AS installer\nARG repo_sed=s#://archive.ubuntu.com#://kr.archive.ubuntu.com#g\n\n# 'cshell' is required to run the installer\nRUN sed -i -e \"${repo_sed}\" /etc/apt/sources.list \\\n    && apt-get update \\\n    && apt-get install -y --no-install-recommends csh \\\n    && rm -rf /var/lib/apt/lists/*\n\n# information of the tool to be installed in this image\n# TODO how to deduplicate below arguments declaration\nARG base_dir=/usr/synopsys\nARG tool=syn\nARG version=N-2017.09-SP2\n\nARG installer_version=v4.1\n\n\n# copy installer and installation package temporarily\nCOPY package/installer_${installer_version} /tmp/installer/\nCOPY package/${tool}_v${version} /tmp/package/\n\n# batch install target package\nRUN mkdir -p ${base_dir} \\\n    && /tmp/installer/SynopsysInstaller_${installer_version}.run -dir ${base_dir}/installer_${installer_version} \\\n    && echo 'yes' | USER=docker ${base_dir}/installer_${installer_version}/batch_installer -install_as_root -source /tmp/package/ -target ${base_dir}/ -allprods \\\n    && rm -rf /tmp/package/ \\\n    && rm -rf /tmp/installer/ \\\n    && rm -rf ${base_dir}/installer_${installer_version}\n\n\n# NOTE using multi-stage image build; avoid including installer package in the final image\nFROM ubuntu:18.04\nARG repo_sed=s#://archive.ubuntu.com#://kr.archive.ubuntu.com#g\n\n# install required library to run Synopsys tool and X11 library to show GUI\nRUN sed -i -e \"${repo_sed}\" /etc/apt/sources.list \\\n    && apt-get update \\\n    && apt-get install -y --no-install-recommends \\\n    csh libxss1 libsm6 libice6 libxft2 libjpeg62 libtiff5 libmng2 \\\n    && apt-get install -y --no-install-recommends xserver-xorg-video-dummy xserver-xorg-input-void xserver-xorg-core xinit x11-xserver-utils \\\n    && echo \"deb http://security.ubuntu.com/ubuntu xenial-security main\" >> /etc/apt/sources.list \\\n    && apt-get update \\\n    && apt-get install --no-install-recommends -y -t xenial libpng12-0 \\\n    && rm -rf /var/lib/apt/lists/*\n# # using somewhat lighter X11 package rather than xorg; 'x11-apps' is not applicable\n# ref: https://git.devuan.org/dev1fanboy/Upgrade-Install-Devuan/wikis/minimal-xorg-install\n# # WORKAROUND install libpng12-0 package from Xenial, which is removed from Bionic\n# ref: https://www.linuxuprising.com/2018/05/fix-libpng12-0-missing-in-ubuntu-1804.html\n\n# WORKAROUND link outdated library files required from Synopsys tools\n# WORKAROUND set default shell as Bash to avoid error from script included in the tool\nRUN ln -s /usr/lib/x86_64-linux-gnu/libtiff.so.5 /usr/lib/x86_64-linux-gnu/libtiff.so.3 \\\n    && ln -s /usr/lib/x86_64-linux-gnu/libmng.so.2 /usr/lib/x86_64-linux-gnu/libmng.so.1 \\\n    && update-alternatives --install /bin/sh sh /bin/bash 20\n\n# WORKAROUND Ubuntu 18.04 does not have terminfo files in /usr/share/terminfo/\nRUN cp -r /lib/terminfo/. /usr/share/terminfo/\n\n# copy actual tool to be run in this image\nARG base_dir=/usr/synopsys\nARG tool=syn\nARG version=N-2017.09-SP2\n\n\n# just copy installed package from intermediate image\nCOPY --from=installer ${base_dir}/ ${base_dir}/\n\n# set path to the tool executable\nENV PATH ${base_dir}/${tool}/${version}/bin:$PATH\n\n# default command when running this image\nCMD \"dc_shell\"\n\n"
}