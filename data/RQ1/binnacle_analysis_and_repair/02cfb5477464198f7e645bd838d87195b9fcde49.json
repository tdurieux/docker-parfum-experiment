{
  "startTime": 1674234161235,
  "endTime": 1674234161294,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 64,
        "lineEnd": 64,
        "columnStart": 4,
        "columnEnd": 128
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "# Copyright 2014 Joukou Ltd\n#\n# Licensed under the Apache License, Version 2.0 (the \"License\");\n# you may not use this file except in compliance with the License.\n# You may obtain a copy of the License at\n#\n#   http://www.apache.org/licenses/LICENSE-2.0\n#\n# Unless required by applicable law or agreed to in writing, software\n# distributed under the License is distributed on an \"AS IS\" BASIS,\n# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n# See the License for the specific language governing permissions and\n# limitations under the License.\nFROM quay.io/joukou/java\nMAINTAINER Isaac Johnston <isaac.johnston@joukou.com>\n\nENV DEBIAN_FRONTEND noninteractive\n\nENV RIAK_VERSION 2.0.1\n\nENV RIAK_LOG_CONSOLE console\nENV RIAK_LOG_CONSOLE_LEVEL warn\nENV RIAK_LOG_CRASH on\nENV RIAK_LOG_CRASH_MAXIMUM_MESSAGE_SIZE 64KB\nENV RIAK_LOG_CRASH_SIZE 10MB\nENV RIAK_LOG_CRASH_ROTATION $D0\nENV RIAK_LOG_CRASH_ROTATION_KEEP 5\nENV RIAK_NODENAME riak@127.0.0.1\nENV RIAK_DISTRIBUTED_COOKIE riak\nENV RIAK_ERLANG_ASYNC_THREADS 64\nENV RIAK_ERLANG_MAX_PORTS 65536\nENV RIAK_ERLANG_SCHEDULERS_FORCE_WAKEUP_INTERVAL 500\nENV RIAK_ERLANG_SCHEDULERS_COMPACTION_OF_LOAD true\nENV RIAK_ERLANG_SCHEDULERS_UTILIZATION_BALANCING false\nENV RIAK_RING_SIZE 64\nENV RIAK_TRANSFER_LIMIT 2\nENV RIAK_STRONG_CONSISTENCY on\nENV RIAK_PROTOBUF_BACKLOG 128\nENV RIAK_ANTI_ENTROPY active\nENV RIAK_STORAGE_BACKEND leveldb\nENV RIAK_OBJECT_FORMAT 1\nENV RIAK_OBJECT_SIZE_WARNING_THRESHOLD 5MB\nENV RIAK_OBJECT_SIZE_MAXIMUM 50MB\nENV RIAK_OBJECT_SIBLINGS_WARNING_THRESHOLD 25\nENV RIAK_OBJECT_SIBLINGS_MAXIMUM 100\nENV RIAK_CONTROL on\nENV RIAK_CONTROL_AUTH_MODE off\nENV RIAK_CONTROL_AUTH_USER_ADMIN_PASSWORD pass\nENV RIAK_LEVELDB_MAXIMUM_MEMORY_PERCENT 70\nENV RIAK_SEARCH on\nENV RIAK_SOLR_START_TIMEOUT 30s\nENV RIAK_SOLR_JVM_OPTIONS -d64 -Xms1g -Xmx1g -XX:+UseCompressedOops\nENV RIAK_ERLANG_DISTRIBUTION_PORT_RANGE_MINIMUM 8088\nENV RIAK_ERLANG_DISTRIBUTION_PORT_RANGE_MAXIMUM 8092\nENV RIAK_JAVASCRIPT_MAXIMUM_STACK_SIZE 32MB\nENV RIAK_JAVASCRIPT_MAXIMUM_HEAP_SIZE 16MB\nENV RIAK_JAVASCRIPT_HOOK_POOL_SIZE 4\nENV RIAK_JAVASCRIPT_REDUCE_POOL_SIZE 6\nENV RIAK_JAVASCRIPT_MAP_POOL_SIZE 8\n\n# Install Basho Riak\nWORKDIR /tmp\nRUN apt-get update -qq && \\\n    apt-get install -y --no-install-recommends logrotate && \\\n    curl -f -LO http://s3.amazonaws.com/downloads.basho.com/riak/2.0/${RIAK_VERSION}/ubuntu/trusty/riak_${RIAK_VERSION}-1_amd64.deb && \\\n    dpkg -i riak_${RIAK_VERSION}-1_amd64.deb && \\\n    rm -f /etc/riak/riak.conf && \\\n    mkdir -p /var/lib/riak/js && \\\n    apt-get clean && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*\n\n# Add Basho Riak configuration\nADD etc/riak/riak.conf.envsubst /etc/riak/\nADD etc/riak/riak.conf.tmpl /etc/riak/\n\n# Add Lo-Dash\nADD https://raw.githubusercontent.com/lodash/lodash/2.4.1/dist/lodash.compat.js /var/lib/riak/js/\n\n# Make Riak's data and log directories volumes\nVOLUME [ \"/var/lib/riak\", \"/var/log/riak\" ]\n\n# Expose ports\n#   4370        Erlang Port Mapper Daemon (epmd)\n#   8087        Protocol Buffers API\n#   8088-8092   Erlang Distributed Node Protocol\n#   8093        Solr\n#   8098        HTTP API\n#   8099        Intra-Cluster Handoff\n#   8985        Solr JMX\nEXPOSE 4370 8087 8088 8089 8090 8091 8092 8093 8098 8099 8985\n\n# Add boot script\nADD bin/boot /bin/\nCMD [ \"/bin/boot\" ]\n"
}