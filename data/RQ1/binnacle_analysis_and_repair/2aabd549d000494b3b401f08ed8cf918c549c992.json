{
  "startTime": 1674244124546,
  "endTime": 1674244124642,
  "originalSmells": [
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 3,
        "lineEnd": 3,
        "columnStart": 4,
        "columnEnd": 43
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 4,
        "lineEnd": 4,
        "columnStart": 4,
        "columnEnd": 26
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 6,
        "lineEnd": 6,
        "columnStart": 4,
        "columnEnd": 44
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 3,
        "lineEnd": 3,
        "columnStart": 4,
        "columnEnd": 43
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 4,
        "lineEnd": 4,
        "columnStart": 4,
        "columnEnd": 26
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 6,
        "lineEnd": 6,
        "columnStart": 4,
        "columnEnd": 44
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 3,
        "lineEnd": 3,
        "columnStart": 4,
        "columnEnd": 43
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 4,
        "lineEnd": 4,
        "columnStart": 4,
        "columnEnd": 26
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 6,
        "lineEnd": 6,
        "columnStart": 4,
        "columnEnd": 44
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 3,
        "lineEnd": 3,
        "columnStart": 4,
        "columnEnd": 67
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 4,
        "lineEnd": 4,
        "columnStart": 4,
        "columnEnd": 50
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 6,
        "lineEnd": 6,
        "columnStart": 4,
        "columnEnd": 68
      }
    }
  ],
  "repairedDockerfile": "FROM debian:buster-slim\n# install prereqs\nRUN apt-get update\nRUN apt-get install --no-install-recommends -y golang libopencv-dev && rm -rf /var/lib/apt/lists/*;\nRUN apt-get install --no-install-recommends -y git && rm -rf /var/lib/apt/lists/*;\n# grab utils for bootstrapping watcher\nRUN apt-get install --no-install-recommends -y netcat-openbsd psmisc && rm -rf /var/lib/apt/lists/*;\n# make a new user so we don't run as root\nRUN useradd -r captchouli\nWORKDIR /home/captchouli\nRUN chown -R captchouli /home/captchouli\n# preemptively make the supporting directory so docker won't\n# attempt to make a new directory owned by root (aids when\n# attempting to persist .captchouli)\nRUN mkdir -p .captchouli/images\nRUN chown -R captchouli .captchouli\n# install captchouli\nUSER captchouli\nRUN go get github.com/bakape/captchouli/cmd/captchouli\n# setup entrypoint and port\nCOPY entrypoint.sh .\nCOPY captchouli.sh .\nEXPOSE 8512\n# entrypoint switches back to the captchouli user but needs to\n# start with root privileges\nUSER root\nENTRYPOINT [\"sh\", \"./entrypoint.sh\"]\n"
}