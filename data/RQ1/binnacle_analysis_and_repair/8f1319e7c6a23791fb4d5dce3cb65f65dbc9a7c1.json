{
  "startTime": 1674249379672,
  "endTime": 1674249379858,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 33,
        "lineEnd": 33,
        "columnStart": 5,
        "columnEnd": 69
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM alpine:3.10\n\nLABEL maintainer=\"Henry<hi@henry.wang>\"\n\nADD src/wait-for.sh /wait-for.sh\n\n# Install dependencies\nRUN chmod -x /wait-for.sh && apk add --update --no-cache nginx s6 \\\n  php7 php7-intl php7-fpm php7-cli php7-curl php7-fileinfo \\\n  php7-mbstring php7-gd php7-json php7-dom php7-pcntl php7-posix \\\n  php7-pgsql php7-mcrypt php7-session php7-pdo php7-pdo_pgsql \\\n  ca-certificates && rm -rf /var/cache/apk/*\n\n# Add ttrss nginx config\nADD src/ttrss.nginx.conf /etc/nginx/nginx.conf\n\n# Download plugins\nADD https://github.com/HenryQW/tinytinyrss-fever-plugin/archive/dev.tar.gz /var/www/plugins/fever/\nADD https://github.com/HenryQW/mercury_fulltext/archive/master.tar.gz /var/www/plugins/mercury_fulltext/\nADD https://github.com/feediron/ttrss_plugin-feediron/archive/master.tar.gz /var/www/plugins/feediron/\nADD https://github.com/HenryQW/ttrss_opencc/archive/master.tar.gz /var/www/plugins/opencc/\nADD https://github.com/voidstern/tt-rss-newsplus-plugin/archive/master.tar.gz /var/www/plugins/api_newsplus/\n\n# FeedReader API\nADD https://raw.githubusercontent.com/jangernert/FeedReader/master/data/tt-rss-feedreader-plugin/api_feedreader/init.php /var/www/plugins/api_feedreader/\n\n# Download themes\nADD https://github.com/levito/tt-rss-feedly-theme/archive/master.tar.gz /var/www/themes/feedly/\nADD https://github.com/DIYgod/ttrss-theme-rsshub/archive/master.tar.gz /var/www/themes/rsshub/\n\n# Install ttrss and patch configuration\nWORKDIR /var/www\nRUN apk add --update --virtual build-dependencies curl tar \\\n  && curl -f -SL https://git.tt-rss.org/git/tt-rss/archive/master.tar.gz | tar xzC /var/www --strip-components 1 \\\n  && tar xzvpf /var/www/plugins/fever/dev.tar.gz --strip-components=1 -C /var/www/plugins/fever tinytinyrss-fever-plugin-dev && rm /var/www/plugins/fever/dev.tar.gz \\\n\n  && tar xzvpf /var/www/plugins/mercury_fulltext/master.tar.gz --strip-components=1 -C /var/www/plugins/mercury_fulltext/ mercury_fulltext-master && rm /var/www/plugins/mercury_fulltext/master.tar.gz \\\n\n  && tar xzvpf /var/www/plugins/feediron/master.tar.gz --strip-components=1 -C /var/www/plugins/feediron/ ttrss_plugin-feediron-master && rm /var/www/plugins/feediron/master.tar.gz \\\n\n  && tar xzvpf /var/www/plugins/opencc/master.tar.gz --strip-components=1 -C /var/www/plugins/opencc/ ttrss_opencc-master && rm /var/www/plugins/opencc/master.tar.gz \\\n\n  && tar xzvpf /var/www/plugins/api_newsplus/master.tar.gz --strip-components=2 -C /var/www/plugins/api_newsplus tt-rss-newsplus-plugin-master/api_newsplus && rm /var/www/plugins/api_newsplus/master.tar.gz \\\n\n  && tar xzvpf /var/www/themes/feedly/master.tar.gz --strip-components=1 -C /var/www/themes/ tt-rss-feedly-theme-master/feedly tt-rss-feedly-theme-master/feedly.css && rm -rf /var/www/themes/feedly \\\n\n  && tar xzvpf /var/www/themes/rsshub/master.tar.gz --strip-components=2 -C /var/www/themes/ ttrss-theme-rsshub-master/dist/rsshub.css && rm -rf /var/www/themes/rsshub \\\n\n  && apk del build-dependencies \\\n  && rm -rf /var/cache/apk/* \\\n  && cp config.php-dist config.php \\\n  && chown nobody:nginx -R /var/www\n\nEXPOSE 80\n\n# complete path to ttrss\nENV SELF_URL_PATH http://localhost:181\n\n# Expose default database credentials via ENV in order to ease overwriting\nENV DB_NAME ttrss\nENV DB_USER ttrss\nENV DB_PASS ttrss\n\n# Always re-configure database with current ENV when running container, then monitor all services\nADD src/configure-db.php /configure-db.php\nADD src/s6/ /etc/s6/\n\nCMD php /configure-db.php && exec s6-svscan /etc/s6/\n"
}