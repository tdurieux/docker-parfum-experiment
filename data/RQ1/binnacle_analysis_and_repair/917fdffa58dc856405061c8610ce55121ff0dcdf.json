{
  "startTime": 1674236330331,
  "endTime": 1674236331152,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 52,
        "lineEnd": 54,
        "columnStart": 1,
        "columnEnd": 134
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 69,
        "lineEnd": 69,
        "columnStart": 4,
        "columnEnd": 43
      }
    },
    {
      "rule": "npmCacheCleanAfterInstall",
      "position": {
        "lineStart": 71,
        "lineEnd": 71,
        "columnStart": 4,
        "columnEnd": 24
      }
    },
    {
      "rule": "curlUseHttpsUrl",
      "position": {
        "lineStart": 52,
        "lineEnd": 54,
        "columnStart": 1,
        "columnEnd": 134
      }
    },
    {
      "rule": "wgetUseHttpsUrl",
      "position": {
        "lineStart": 32,
        "lineEnd": 32,
        "columnStart": 4,
        "columnEnd": 85
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 14,
        "lineEnd": 14,
        "columnStart": 4,
        "columnEnd": 24
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 41,
        "lineEnd": 41,
        "columnStart": 4,
        "columnEnd": 22
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 102,
        "lineEnd": 102,
        "columnStart": 25,
        "columnEnd": 57
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 10,
        "lineEnd": 10,
        "columnStart": 4,
        "columnEnd": 42
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 11,
        "lineEnd": 11,
        "columnStart": 4,
        "columnEnd": 72
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 12,
        "lineEnd": 12,
        "columnStart": 4,
        "columnEnd": 39
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 51,
        "lineEnd": 51,
        "columnStart": 22,
        "columnEnd": 61
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 67,
        "lineEnd": 67,
        "columnStart": 4,
        "columnEnd": 67
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 74,
        "lineEnd": 74,
        "columnStart": 26,
        "columnEnd": 76
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 75,
        "lineEnd": 75,
        "columnStart": 4,
        "columnEnd": 35
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 80,
        "lineEnd": 80,
        "columnStart": 4,
        "columnEnd": 38
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 81,
        "lineEnd": 81,
        "columnStart": 4,
        "columnEnd": 32
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 84,
        "lineEnd": 84,
        "columnStart": 4,
        "columnEnd": 35
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 85,
        "lineEnd": 85,
        "columnStart": 4,
        "columnEnd": 46
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 88,
        "lineEnd": 88,
        "columnStart": 4,
        "columnEnd": 75
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 91,
        "lineEnd": 91,
        "columnStart": 4,
        "columnEnd": 39
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 10,
        "lineEnd": 10,
        "columnStart": 4,
        "columnEnd": 42
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 11,
        "lineEnd": 11,
        "columnStart": 4,
        "columnEnd": 72
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 12,
        "lineEnd": 12,
        "columnStart": 4,
        "columnEnd": 39
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 75,
        "lineEnd": 75,
        "columnStart": 4,
        "columnEnd": 35
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 80,
        "lineEnd": 80,
        "columnStart": 4,
        "columnEnd": 38
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 81,
        "lineEnd": 81,
        "columnStart": 4,
        "columnEnd": 32
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 84,
        "lineEnd": 84,
        "columnStart": 4,
        "columnEnd": 35
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 85,
        "lineEnd": 85,
        "columnStart": 4,
        "columnEnd": 46
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 88,
        "lineEnd": 88,
        "columnStart": 4,
        "columnEnd": 75
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 91,
        "lineEnd": 91,
        "columnStart": 4,
        "columnEnd": 39
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 10,
        "lineEnd": 10,
        "columnStart": 4,
        "columnEnd": 42
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 11,
        "lineEnd": 11,
        "columnStart": 4,
        "columnEnd": 72
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 12,
        "lineEnd": 12,
        "columnStart": 4,
        "columnEnd": 39
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 22,
        "lineEnd": 29,
        "columnStart": 22,
        "columnEnd": 22
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 74,
        "lineEnd": 74,
        "columnStart": 26,
        "columnEnd": 76
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 75,
        "lineEnd": 75,
        "columnStart": 4,
        "columnEnd": 35
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 80,
        "lineEnd": 80,
        "columnStart": 4,
        "columnEnd": 38
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 81,
        "lineEnd": 81,
        "columnStart": 4,
        "columnEnd": 32
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 84,
        "lineEnd": 84,
        "columnStart": 4,
        "columnEnd": 35
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 85,
        "lineEnd": 85,
        "columnStart": 4,
        "columnEnd": 46
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 88,
        "lineEnd": 88,
        "columnStart": 4,
        "columnEnd": 75
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 91,
        "lineEnd": 91,
        "columnStart": 4,
        "columnEnd": 39
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 10,
        "lineEnd": 10,
        "columnStart": 4,
        "columnEnd": 66
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 11,
        "lineEnd": 11,
        "columnStart": 4,
        "columnEnd": 96
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 12,
        "lineEnd": 12,
        "columnStart": 4,
        "columnEnd": 63
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 75,
        "lineEnd": 75,
        "columnStart": 4,
        "columnEnd": 59
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 80,
        "lineEnd": 80,
        "columnStart": 4,
        "columnEnd": 62
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 81,
        "lineEnd": 81,
        "columnStart": 4,
        "columnEnd": 56
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 84,
        "lineEnd": 84,
        "columnStart": 4,
        "columnEnd": 59
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 85,
        "lineEnd": 85,
        "columnStart": 4,
        "columnEnd": 70
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 88,
        "lineEnd": 88,
        "columnStart": 4,
        "columnEnd": 99
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 91,
        "lineEnd": 91,
        "columnStart": 4,
        "columnEnd": 63
      }
    }
  ],
  "repairedDockerfile": "FROM ubuntu:14.04\nMAINTAINER Donghyun Seo <egaoneko@naver.com>\n\n# Set the locale\nRUN locale-gen en_US.UTF-8\nENV LANG en_US.UTF-8\nENV LANGUAGE en_US:en\nENV LC_ALL en_US.UTF-8\n\nRUN apt-get update\nRUN apt-get install --no-install-recommends -y build-essential git && rm -rf /var/lib/apt/lists/*;\nRUN apt-get install --no-install-recommends -y python python-dev python3 python3-dev python3-pip && rm -rf /var/lib/apt/lists/*;\nRUN apt-get install --no-install-recommends -y nginx supervisor && rm -rf /var/lib/apt/lists/*;\n\nRUN pip3 install --no-cache-dir glances\n\nRUN echo \"\\ndaemon off;\" >> /etc/nginx/nginx.conf\nRUN chown -R www-data:www-data /var/lib/nginx\n\n# UWSGI\nENV UWSGIVERSION 2.0.11.2\n\nRUN apt-get update && apt-get install -y --no-install-recommends \\\n            build-essential \\\n            libjansson-dev \\\n            libpcre3-dev \\\n            libssl-dev \\\n            libxml2-dev \\\n            wget \\\n            zlib1g-dev && rm -rf /var/lib/apt/lists/*;\n\nRUN cd /usr/src && \\\n    wget --quiet -O - https://projects.unbit.it/downloads/uwsgi-${UWSGIVERSION}.tar.gz | \\\n    tar zxvf -\n\nRUN cd /usr/src/uwsgi-${UWSGIVERSION} && make\nRUN cp /usr/src/uwsgi-${UWSGIVERSION}/uwsgi /usr/local/bin/uwsgi\nRUN PYTHON=/usr/local/python3.4/bin/python3.4\nRUN cd /usr/src/uwsgi-${UWSGIVERSION} && ./uwsgi --build-plugin \"plugins/python python34\"\nRUN mkdir -p /usr/local/lib/uwsgi/plugins\nRUN cp /usr/src/uwsgi-${UWSGIVERSION}/*.so /usr/local/lib/uwsgi/plugins\nRUN pip3 install --no-cache-dir uwsgi\n\n# Java\nENV VERSION 7\nENV UPDATE 80\nENV BUILD 15\n\nENV JAVA_HOME /usr/lib/jvm/java-${VERSION}-oracle\nENV JRE_HOME ${JAVA_HOME}/jre\n\nRUN apt-get update && apt-get install --no-install-recommends ca-certificates curl -y && \\\n\tcurl -f --silent --location --retry 3 --cacert /etc/ssl/certs/GeoTrust_Global_CA.pem \\\n\t--header \"Cookie: oraclelicense=accept-securebackup-cookie;\" \\\n\thttps://download.oracle.com/otn-pub/java/jdk/\"${VERSION}\"u\"${UPDATE}\"-b\"${BUILD}\"/server-jre-\"${VERSION}\"u\"${UPDATE}\"-linux-x64.tar.gz \\\n\t| tar xz -C /tmp && \\\n\tmkdir -p /usr/lib/jvm && mv /tmp/jdk1.${VERSION}.0_${UPDATE} \"${JAVA_HOME}\" && \\\n\tapt-get autoclean && apt-get --purge -y autoremove && \\\n\trm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*\n\nRUN update-alternatives --install \"/usr/bin/java\" \"java\" \"${JRE_HOME}/bin/java\" 1 && \\\n\tupdate-alternatives --install \"/usr/bin/javac\" \"javac\" \"${JAVA_HOME}/bin/javac\" 1 && \\\n\tupdate-alternatives --set java \"${JRE_HOME}/bin/java\" && \\\n\tupdate-alternatives --set javac \"${JAVA_HOME}/bin/javac\"\n\n# Node\nRUN apt-get update -qq && \\\n    apt-get install --no-install-recommends -qq -y ca-certificates curl nodejs git make g++ && \\\n    ln -s /usr/bin/nodejs /usr/local/bin/node && \\\n    curl -f -skLN https://npmjs.org/install.sh | /bin/bash && \\\n    rm -rf /var/lib/apt/lists/*\nRUN npm install -g bower && npm cache clean --force;\n\n# Redis\nRUN apt-get update -qq && apt-get install --no-install-recommends -y python-software-properties sudo && rm -rf /var/lib/apt/lists/*;\nRUN apt-get install --no-install-recommends -y redis-server && rm -rf /var/lib/apt/lists/*;\nRUN sysctl vm.overcommit_memory=1 > /dev/null\nRUN chown -R redis:redis /var/lib/redis\n\n# psycopg2\nRUN apt-get install --no-install-recommends -y python-psycopg2 && rm -rf /var/lib/apt/lists/*;\nRUN apt-get install --no-install-recommends -y libpq-dev && rm -rf /var/lib/apt/lists/*;\n\n# lxml\nRUN apt-get install --no-install-recommends -y python3-lxml && rm -rf /var/lib/apt/lists/*;\nRUN apt-get install --no-install-recommends -y libxml2-dev libxslt-dev && rm -rf /var/lib/apt/lists/*;\n\n# Pillow\nRUN apt-get install --no-install-recommends -y libjpeg8 libjpeg62-dev libfreetype6 libfreetype6-dev && rm -rf /var/lib/apt/lists/*;\n\n# Memcached\nRUN apt-get install --no-install-recommends -y libmemcached-dev && rm -rf /var/lib/apt/lists/*;\n\n# Mecab\n# RUN apt-get install curl\n# RUN bash <(curl -s https://raw.githubusercontent.com/konlpy/konlpy/master/scripts/mecab.sh)\n\n# Project\nENV PROJECT_DIR /home/ubuntu/workspace/ward\nADD . ${PROJECT_DIR}\nRUN chown -R www-data:www-data ${PROJECT_DIR}\nRUN cd ${PROJECT_DIR} && bower --allow-root install\nRUN cd ${PROJECT_DIR} && pip3 install --no-cache-dir -r requirements.txt\nRUN cd ${PROJECT_DIR}/www && python3 manage.py migrate --noinput\nRUN cd ${PROJECT_DIR}/www && python3 manage.py collectstatic --noinput\n\nRUN mkdir -p /var/uwsgi/sites-available\nRUN ln -s ${PROJECT_DIR}/conf/nginx-app.conf /etc/nginx/sites-enabled/\nRUN ln -s ${PROJECT_DIR}/conf/uwsgi.ini /var/uwsgi/sites-available/\nRUN cp ${PROJECT_DIR}/conf/celeryd.conf /etc/default/celeryd\nRUN cp ${PROJECT_DIR}/conf/celerybeat.conf /etc/default/celerybeat\nRUN cp ${PROJECT_DIR}/conf/redis.conf /etc/redis/redis.conf\nRUN ln -s ${PROJECT_DIR}/conf/supervisor-app.conf /etc/supervisor/conf.d/\n\nRUN cp ${PROJECT_DIR}/conf/celeryd /etc/init.d/\nRUN chmod +x /etc/init.d/celeryd\nRUN update-rc.d celeryd defaults\nRUN update-rc.d celeryd enable\nRUN chown root:root /etc/init.d/celeryd\nRUN chmod 755 /etc/init.d/celeryd\n\nRUN cp ${PROJECT_DIR}/conf/celerybeat /etc/init.d/\nRUN chmod +x /etc/init.d/celerybeat\nRUN update-rc.d celerybeat defaults\nRUN update-rc.d celerybeat enable\nRUN chown root:root /etc/init.d/celerybeat\nRUN chmod 755 /etc/init.d/celerybeat\n\n\nVOLUME [\"/data\", \"/var/log\", \\\n\t\t\"/etc/nginx/site-enabled\", \"/var/log/nginx\", \\\n\t\t\"/etc/uwsgi/apps-enabled\", \"/var/log/uwsgi\", \\\n\t\t\"/var/log/celery\", \"/var/log/supervisor\", \\\n\t\t\"/var/lib/redis\", \"/etc/redis\"]\n\nEXPOSE 80\nEXPOSE 443\n\nCMD [\"supervisord\", \"-n\"]\n"
}