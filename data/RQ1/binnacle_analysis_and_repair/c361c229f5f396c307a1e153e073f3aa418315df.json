{
  "startTime": 1674236811796,
  "endTime": 1674236812114,
  "originalSmells": [
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 4,
        "lineEnd": 8,
        "columnStart": 22,
        "columnEnd": 12
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM debian:latest\nMAINTAINER Marios Andreopoulos <marios@lenses.io>\n\n# Update, install tooling and some basic setup\nRUN apt-get update && apt-get install --no-install-recommends -y \\\n        curl \\\n        gosu \\\n        netcat \\\n        wget \\\n    && rm -rf /var/lib/apt/lists/* \\\n    && echo \"progress = dot:giga\" | tee /etc/wgetrc \\\n    && wget https://gitlab.com/andmarios/checkport/uploads/3903dcaeae16cd2d6156213d22f23509/checkport \\\n            -O /usr/local/bin/checkport \\\n    && wget https://github.com/Yelp/dumb-init/releases/download/v1.2.0/dumb-init_1.2.0_amd64 \\\n            -O /usr/local/bin/dumb-init \\\n    && chmod +755 /usr/local/bin/checkport /usr/local/bin/dumb-init \\\n    && echo 'export PS1=\"\\[\\033[1;31m\\]\\u\\[\\033[1;33m\\]@\\[\\033[1;34m\\]lenses \\[\\033[1;36m\\]\\W\\[\\033[1;0m\\] $ \"' \\\n            | tee -a /root/.bashrc >> /etc/bash.bashrc \\\n    && mkdir -p /mnt/settings /mnt/secrets\n\n# Install lenses\nARG AD_UN\nARG AD_PW\nARG AD_URL=https://archive.landoop.com/lenses/2.3/lenses-2.3.4-linux64.tar.gz\nRUN wget $AD_UN $AD_PW \"$AD_URL\" -O /lenses.tgz \\\n    && tar xf /lenses.tgz -C /opt \\\n    && rm /lenses.tgz\n\n# Add jmx_exporter\nARG FAST_DATA_AGENT_URL=https://archive.landoop.com/tools/fast_data_monitoring/fast_data_monitoring-2.1.tar.gz\nRUN mkdir -p /opt/landoop/ \\\n    && wget \"$FAST_DATA_AGENT_URL\" -O /fda.tgz \\\n    && tar xf /fda.tgz -C /opt/landoop \\\n    && rm /fda.tgz\n\n# Add fastdata-sd\nARG FASTDATA_SD_URL=https://archive.landoop.com/tools/fastdata-sd/fastdata-sd.tar.gz\nRUN wget \"$FASTDATA_SD_URL\" -O /fdsd.tgz \\\n    && tar xf /fdsd.tgz -C /usr/local/bin \\\n    && rm /fdsd.tgz\n\nADD setup.sh debug-setup.sh service-discovery.sh /usr/local/bin/\nRUN chmod +x /usr/local/bin/setup.sh /usr/local/bin/debug-setup.sh /usr/local/bin/service-discovery.sh\nCOPY /filesystem /\n\nARG BUILD_BRANCH\nARG BUILD_COMMIT\nARG BUILD_TIME\nARG DOCKER_REPO=local\nRUN grep 'export LENSES_REVISION'      /opt/lenses/bin/lenses | sed -e 's/export //' | tee /build.info \\\n    && grep 'export LENSESUI_REVISION' /opt/lenses/bin/lenses | sed -e 's/export //' | tee -a /build.info \\\n    && grep 'export LENSES_VERSION'    /opt/lenses/bin/lenses | sed -e 's/export //' | tee -a /build.info \\\n    && echo \"BUILD_BRANCH=${BUILD_BRANCH}\"  | tee -a /build.info \\\n    && echo \"BUILD_COMMIT=${BUILD_COMMIT}\"  | tee -a /build.info \\\n    && echo \"BUILD_TIME=${BUILD_TIME}\"      | tee -a /build.info \\\n    && echo \"DOCKER_REPO=${DOCKER_REPO}\"    | tee -a /build.info\n\nEXPOSE 9991\n\nWORKDIR /\nRUN mkdir -p /data /data/kafka-streams-state /data/log /data/plugins /data/storage \\\n    && chmod -R 777 /data\nVOLUME [\"/data/kafka-streams-state\", \"/data/log\", \"/data/plugins\", \"/data/storage\"]\n\nENTRYPOINT [\"/usr/local/bin/dumb-init\", \"--\"]\nCMD [\"/usr/local/bin/setup.sh\"]\n"
}