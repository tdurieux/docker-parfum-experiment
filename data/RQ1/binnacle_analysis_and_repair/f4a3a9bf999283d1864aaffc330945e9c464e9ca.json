{
  "startTime": 1674248347547,
  "endTime": 1674248347815,
  "originalSmells": [
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 27,
        "lineEnd": 27,
        "columnStart": 4,
        "columnEnd": 23
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 28,
        "lineEnd": 28,
        "columnStart": 4,
        "columnEnd": 20
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 29,
        "lineEnd": 29,
        "columnStart": 4,
        "columnEnd": 22
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 32,
        "lineEnd": 32,
        "columnStart": 4,
        "columnEnd": 26
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 33,
        "lineEnd": 33,
        "columnStart": 4,
        "columnEnd": 26
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 34,
        "lineEnd": 34,
        "columnStart": 4,
        "columnEnd": 42
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 35,
        "lineEnd": 35,
        "columnStart": 4,
        "columnEnd": 24
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 36,
        "lineEnd": 36,
        "columnStart": 4,
        "columnEnd": 24
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 38,
        "lineEnd": 38,
        "columnStart": 4,
        "columnEnd": 23
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 39,
        "lineEnd": 39,
        "columnStart": 4,
        "columnEnd": 22
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 40,
        "lineEnd": 40,
        "columnStart": 4,
        "columnEnd": 24
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 41,
        "lineEnd": 41,
        "columnStart": 4,
        "columnEnd": 21
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 42,
        "lineEnd": 42,
        "columnStart": 4,
        "columnEnd": 22
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 9,
        "lineEnd": 9,
        "columnStart": 22,
        "columnEnd": 49
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 18,
        "lineEnd": 18,
        "columnStart": 4,
        "columnEnd": 59
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 20,
        "lineEnd": 20,
        "columnStart": 4,
        "columnEnd": 73
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 30,
        "lineEnd": 30,
        "columnStart": 4,
        "columnEnd": 31
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 31,
        "lineEnd": 31,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 18,
        "lineEnd": 18,
        "columnStart": 4,
        "columnEnd": 59
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 20,
        "lineEnd": 20,
        "columnStart": 4,
        "columnEnd": 73
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 30,
        "lineEnd": 30,
        "columnStart": 4,
        "columnEnd": 31
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 31,
        "lineEnd": 31,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 9,
        "lineEnd": 9,
        "columnStart": 22,
        "columnEnd": 49
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 18,
        "lineEnd": 18,
        "columnStart": 4,
        "columnEnd": 59
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 20,
        "lineEnd": 20,
        "columnStart": 4,
        "columnEnd": 73
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 30,
        "lineEnd": 30,
        "columnStart": 4,
        "columnEnd": 31
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 31,
        "lineEnd": 31,
        "columnStart": 4,
        "columnEnd": 27
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 18,
        "lineEnd": 18,
        "columnStart": 4,
        "columnEnd": 83
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 20,
        "lineEnd": 20,
        "columnStart": 4,
        "columnEnd": 97
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 30,
        "lineEnd": 30,
        "columnStart": 4,
        "columnEnd": 55
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 31,
        "lineEnd": 31,
        "columnStart": 4,
        "columnEnd": 51
      }
    }
  ],
  "repairedDockerfile": "FROM      ubuntu\nMAINTAINER Politecnico di Torino\n\n#########################################################################\n#\t\t\t\t\t\t\t\t\t#\n#\t\t\tVNF feature\t\t\t\t\t#\n#\t\t\t\t\t\t\t\t\t#\n#########################################################################\n\nRUN apt-get update && apt-get install --no-install-recommends -y iptables && rm -rf /var/lib/apt/lists/*;\nADD sysctl.conf /etc/sysctl.conf\n\n#########################################################################\n#\t\t\t\t\t\t\t\t\t#\n#\t\t\tConfiguration Agent\t\t\t\t#\n#\t\t\t\t\t\t\t\t\t#\n#########################################################################\nENV TERM xterm\nRUN apt-get install --no-install-recommends -y htop net-tools nano vim iputils-ping && rm -rf /var/lib/apt/lists/*; #Tools for debug and management, xterm variable required in order to run nano\n\nRUN apt-get install --no-install-recommends -y python3-setuptools python3-pip libffi-dev git sudo && rm -rf /var/lib/apt/lists/*;\n\nRUN git clone https://github.com/pyca/pynacl.git\nWORKDIR pynacl\nRUN python3 setup.py install\n\nWORKDIR /\nRUN pip3 install --no-cache-dir aiozmq\nRUN pip3 install --no-cache-dir zmq\nRUN pip3 install --no-cache-dir pyang\nRUN apt-get install --no-install-recommends -y xsltproc && rm -rf /var/lib/apt/lists/*;\nRUN apt-get install --no-install-recommends -y jing && rm -rf /var/lib/apt/lists/*;\nRUN pip3 install --no-cache-dir netifaces\nRUN pip3 install --no-cache-dir xmltodict\nRUN pip3 install --no-cache-dir --upgrade python-iptables\nRUN pip3 install --no-cache-dir netaddr\nRUN pip3 install --no-cache-dir iptools\n\nRUN pip3 install --no-cache-dir PyNaCl\nRUN pip3 install --no-cache-dir pyzmq\nRUN pip3 install --no-cache-dir tornado\nRUN pip3 install --no-cache-dir cffi\nRUN pip3 install --no-cache-dir urwid\n\nRUN git clone https://github.com/Acreo/DoubleDecker-py.git\nWORKDIR DoubleDecker-py\nRUN python3 setup.py install\n\nRUN mkdir /etc/doubledecker\nADD a-keys.json /etc/doubledecker/a-keys.json\nADD b-keys.json /etc/doubledecker/b-keys.json\nADD public-keys.json /etc/doubledecker/public-keys.json\n\nWORKDIR /\nADD ./start_nat_agent.sh start_nat_agent.sh\nRUN chmod +x start_nat_agent.sh\nADD ./configuration_agent configuration_agent\n\nRUN echo \"configuration_interface='eth0'\" > ./configuration_agent/nat_config/constants.py\nRUN echo \"# Configuration Agent - configuration file \\ndealer = 'tcp://10.0.0.2:5555' \\nkeyfile = '/etc/doubledecker/a-keys.json' \" > ./configuration_agent/constants.py\n\n#########################\n#\n# DATADISK EMULATION\n#\n#########################\n\nRUN mkdir datadisk\nADD ./metadata datadisk/metadata\nRUN chmod 777 datadisk/metadata\n\n#########################################################################\n#\t\t\t\t\t\t\t\t\t#\n#\t\t\tScript boot\t\t\t\t\t#\n#\t\t\t\t\t\t\t\t\t#\n#########################################################################\n\nWORKDIR /\nADD ./start_nat.sh start_nat.sh\nRUN chmod 777 start_nat.sh\nADD start.sh start.sh\nRUN chmod 777 start.sh\n"
}