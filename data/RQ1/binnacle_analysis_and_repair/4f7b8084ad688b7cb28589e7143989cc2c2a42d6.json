{
  "startTime": 1674244512179,
  "endTime": 1674244512913,
  "originalSmells": [
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 12,
        "lineEnd": 16,
        "columnStart": 22,
        "columnEnd": 8
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 19,
        "lineEnd": 100,
        "columnStart": 22,
        "columnEnd": 21
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 116,
        "lineEnd": 122,
        "columnStart": 22,
        "columnEnd": 22
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "ARG AUTOWARE_DOCKER_ARCH\nARG AUTOWARE_TARGET_ARCH\nFROM multiarch/alpine:${AUTOWARE_TARGET_ARCH}-latest-stable AS bootstrap\n\nFROM ${AUTOWARE_DOCKER_ARCH}/ubuntu:16.04 AS sysroot\nARG AUTOWARE_TARGET_ARCH\n\nCOPY --from=bootstrap /usr/bin/qemu-${AUTOWARE_TARGET_ARCH}-static /usr/bin/qemu-${AUTOWARE_TARGET_ARCH}-static\n\nRUN echo \"deb http://packages.ros.org/ros/ubuntu xenial main\" | tee /etc/apt/sources.list.d/ros-latest.list\nRUN apt-key adv --keyserver hkp://p80.pool.sks-keyservers.net:80 --recv-key 421C365BD9FF1F717815A3895523BAEEB01FA116\n\nRUN apt-get update && apt-get install -y --no-install-recommends \\\n    curl \\\n    lsb-release \\\n    python-rosdep \\\n    sudo && rm -rf /var/lib/apt/lists/*;\n\n# Autoware dependencies\nRUN apt-get update && apt-get install -y --no-install-recommends \\\n    freeglut3-dev \\\n    libarmadillo-dev \\\n    libcurl4-openssl-dev \\\n    libeigen3-dev \\\n    libgflags-dev \\\n    libgl1-mesa-dev \\\n    libglew-dev \\\n    libglu1-mesa-dev \\\n    libgoogle-glog-dev \\\n    libgtest-dev \\\n    libnlopt-dev \\\n    libopencv-dev \\\n    libpcap0.8-dev \\\n    libpcl-dev \\\n    libpcl1.7 \\\n    libqt5core5a \\\n    libqt5gui5 \\\n    libqt5opengl5 \\\n    libqt5opengl5-dev \\\n    libqt5widgets5 \\\n    libssh2-1 \\\n    libtinyxml-dev \\\n    libx11-dev \\\n    libxi-dev \\\n    libxml2-dev \\\n    libxmu-dev \\\n    libyaml-cpp-dev \\\n    python-flask \\\n    python-serial \\\n    qtbase5-dev \\\n    ros-kinetic-angles \\\n    ros-kinetic-camera-info-manager \\\n    ros-kinetic-catkin \\\n    ros-kinetic-cmake-modules \\\n    ros-kinetic-cv-bridge \\\n    ros-kinetic-diagnostic-msgs \\\n    ros-kinetic-diagnostic-updater \\\n    ros-kinetic-dynamic-reconfigure \\\n    ros-kinetic-geometry-msgs \\\n    ros-kinetic-gps-common \\\n    ros-kinetic-grid-map-cv \\\n    ros-kinetic-grid-map-msgs \\\n    ros-kinetic-grid-map-ros \\\n    ros-kinetic-image-geometry \\\n    ros-kinetic-image-transport \\\n    ros-kinetic-imu-filter-madgwick \\\n    ros-kinetic-imu-tools \\\n    ros-kinetic-jsk-recognition-msgs \\\n    ros-kinetic-jsk-rviz-plugins \\\n    ros-kinetic-message-filters \\\n    ros-kinetic-message-generation \\\n    ros-kinetic-message-runtime \\\n    ros-kinetic-nav-msgs \\\n    ros-kinetic-nlopt \\\n    ros-kinetic-nmea-msgs \\\n    ros-kinetic-nodelet \\\n    ros-kinetic-pcl-conversions \\\n    ros-kinetic-pcl-msgs \\\n    ros-kinetic-pcl-ros \\\n    ros-kinetic-pluginlib \\\n    ros-kinetic-rosconsole \\\n    ros-kinetic-roscpp \\\n    ros-kinetic-roslaunch \\\n    ros-kinetic-roslib \\\n    ros-kinetic-roslint \\\n    ros-kinetic-rospy \\\n    ros-kinetic-rostest \\\n    ros-kinetic-rosunit \\\n    ros-kinetic-rqt-plot \\\n    ros-kinetic-rviz \\\n    ros-kinetic-sensor-msgs \\\n    ros-kinetic-shape-msgs \\\n    ros-kinetic-sound-play \\\n    ros-kinetic-std-msgs \\\n    ros-kinetic-std-srvs \\\n    ros-kinetic-stereo-msgs \\\n    ros-kinetic-tf \\\n    ros-kinetic-tf2 \\\n    ros-kinetic-tf2-ros \\\n    ros-kinetic-visualization-msgs \\\n    ros-kinetic-xacro && rm -rf /var/lib/apt/lists/*;\n\nRUN find / -depth -xdev -type l -lname '/*' -exec sh -c 'linkpath=\"$(readlink {})\" && rm -f {} && ln -frsv \"$linkpath\" \"{}\"' \\;\n\nFROM ubuntu:16.04 AS builder\nARG AUTOWARE_TARGET_ARCH\nARG AUTOWARE_TARGET_PLATFORM\nENV AUTOWARE_SYSROOT /sysroot/${AUTOWARE_TARGET_PLATFORM}\nCOPY --from=sysroot /lib ${AUTOWARE_SYSROOT}/lib\nCOPY --from=sysroot /usr/include ${AUTOWARE_SYSROOT}/usr/include\nCOPY --from=sysroot /usr/lib ${AUTOWARE_SYSROOT}/usr/lib\nCOPY --from=sysroot /usr/share/pkgconfig ${AUTOWARE_SYSROOT}/usr/share/pkgconfig\nCOPY --from=sysroot /opt ${AUTOWARE_SYSROOT}/opt\nCOPY --from=sysroot /etc/alternatives ${AUTOWARE_SYSROOT}/etc/alternatives\nRUN echo \"deb http://packages.ros.org/ros/ubuntu xenial main\" | tee /etc/apt/sources.list.d/ros-latest.list\nRUN apt-key adv --keyserver hkp://p80.pool.sks-keyservers.net:80 --recv-key 421C365BD9FF1F717815A3895523BAEEB01FA116\nRUN apt-get update && apt-get install -y --no-install-recommends \\\n    crossbuild-essential-arm64 \\\n    pkg-config \\\n    python-rospkg \\\n    qt5-qmake \\\n    qtbase5-dev-tools \\\n    ros-kinetic-catkin && rm -rf /var/lib/apt/lists/*;\nRUN find ${AUTOWARE_SYSROOT}/opt/ros/kinetic/share/ -name \"*.cmake\" -type f -exec sed -i -e \"s#/opt/ros/kinetic/include#${AUTOWARE_SYSROOT}/opt/ros/kinetic/include#g\" {} \\;\nRUN find ${AUTOWARE_SYSROOT}/opt/ros/kinetic/share/ -name \"*.cmake\" -type f -exec sed -i -e \"s#/opt/ros/kinetic/lib#${AUTOWARE_SYSROOT}/opt/ros/kinetic/lib#g\" {} \\;\nRUN find ${AUTOWARE_SYSROOT}/opt/ros/kinetic/share/ -name \"*.cmake\" -type f -exec sed -i -e \"s#/usr/include#${AUTOWARE_SYSROOT}/usr/include#g\" {} \\;\nRUN find ${AUTOWARE_SYSROOT}/opt/ros/kinetic/share/ -name \"*.cmake\" -type f -exec sed -i -e \"s#/usr/lib#${AUTOWARE_SYSROOT}/usr/lib#g\" {} \\;\nRUN find ${AUTOWARE_SYSROOT}/usr/lib/cmake/ -name \"*.cmake\" -type f -exec sed -i -e \"s#/usr/lib/${AUTOWARE_TARGET_ARCH}-linux-gnu#${AUTOWARE_SYSROOT}/usr/lib/${AUTOWARE_TARGET_ARCH}-linux-gnu#g\" {} \\;\nRUN find ${AUTOWARE_SYSROOT}/usr/lib/cmake/ -name \"*.cmake\" -type f -exec sed -i -e \"s#/usr/lib/openmpi#${AUTOWARE_SYSROOT}/usr/lib/openmpi#g\" {} \\;\nRUN find ${AUTOWARE_SYSROOT}/usr/lib/cmake/ -name \"*.cmake\" -type f -exec sed -i -e \"s#/usr/include#${AUTOWARE_SYSROOT}/usr/include#g\" {} \\;\nRUN find ${AUTOWARE_SYSROOT}/opt/ros/kinetic/lib/pkgconfig/ -name \"*.pc\" -type f -exec sed -i -e \"s#-I/opt/ros/kinetic/usr/include#-I${AUTOWARE_SYSROOT}/opt/ros/kinetic/usr/include#g\" {} \\;\nRUN find ${AUTOWARE_SYSROOT}/opt/ros/kinetic/lib/pkgconfig/ -name \"*.pc\" -type f -exec sed -i -e \"s#-I/usr/include#-I${AUTOWARE_SYSROOT}/usr/include#g\" {} \\;\nRUN find ${AUTOWARE_SYSROOT}/ -name \"*.pc\" -type f -exec sed -i -e \"s#prefix=/#prefix=${AUTOWARE_SYSROOT}/#g\" {} \\;\nRUN sed -i -e \"s#/usr#${AUTOWARE_SYSROOT}/usr#g\" ${AUTOWARE_SYSROOT}/usr/lib/${AUTOWARE_TARGET_ARCH}-linux-gnu/cmake/pcl/PCLConfig.cmake\nRUN sed -i -e \"s#set(imported_location \\\"\\${_qt5Widgets_install_prefix}/lib/${AUTOWARE_TARGET_ARCH}-linux-gnu/qt5/bin/uic\\\")#set(imported_location \\\"/usr/lib/x86_64-linux-gnu/qt5/bin/uic\\\")#g\" \\\n    ${AUTOWARE_SYSROOT}/usr/lib/${AUTOWARE_TARGET_ARCH}-linux-gnu/cmake/Qt5Widgets/Qt5WidgetsConfigExtras.cmake\nRUN sed -i -e \"s#set(imported_location \\\"\\${_qt5Core_install_prefix}/lib/${AUTOWARE_TARGET_ARCH}-linux-gnu/qt5/bin/#set(imported_location \\\"/usr/lib/x86_64-linux-gnu/qt5/bin/#g\" \\\n    ${AUTOWARE_SYSROOT}/usr/lib/${AUTOWARE_TARGET_ARCH}-linux-gnu/cmake/Qt5Core/Qt5CoreConfigExtras.cmake\nRUN sed -i -e \"s#define ARMA_SUPERLU_INCLUDE_DIR /usr/include/superlu/#define ARMA_SUPERLU_INCLUDE_DIR ${AUTOWARE_SYSROOT}/usr/include/superlu/#g\" \\\n    ${AUTOWARE_SYSROOT}/usr/include/armadillo_bits/config.hpp\nENV ROS_DISTRO kinetic\nENV CC /usr/bin/${AUTOWARE_TARGET_ARCH}-linux-gnu-gcc\nENV CXX /usr/bin/${AUTOWARE_TARGET_ARCH}-linux-gnu-g++\nENV AR /usr/bin/${AUTOWARE_TARGET_ARCH}-linux-gnu-ar\nENV CPP /usr/bin/${AUTOWARE_TARGET_ARCH}-linux-gnu-cpp\nCMD . /opt/ros/kinetic/setup.sh && /bin/bash\n"
}