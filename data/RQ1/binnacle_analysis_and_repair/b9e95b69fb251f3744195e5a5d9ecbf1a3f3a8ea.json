{
  "startTime": 1674250395460,
  "endTime": 1674250395648,
  "originalSmells": [
    {
      "rule": "wgetUseHttpsUrl",
      "position": {
        "lineStart": 14,
        "lineEnd": 14,
        "columnStart": 4,
        "columnEnd": 77
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 43,
        "lineEnd": 43,
        "columnStart": 4,
        "columnEnd": 50
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 44,
        "lineEnd": 44,
        "columnStart": 4,
        "columnEnd": 33
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "#\n# A Docker image for running neuronal network simulations\n#\n\nFROM neuralensemble/base\nMAINTAINER andrew.davison@unic.cnrs-gif.fr\n\nENV NEST_VER=2.14.0 NRN_VER=7.4\nENV NEST=nest-$NEST_VER NRN=nrn-$NRN_VER\nENV PATH=$PATH:$VENV/bin\nRUN ln -s /usr/bin/2to3-3.4 $VENV/bin/2to3\n\nWORKDIR $HOME/packages\nRUN wget https://github.com/nest/nest-simulator/releases/download/v$NEST_VER/nest-$NEST_VER.tar.gz -O $HOME/packages/$NEST.tar.gz;\nRUN wget https://www.neuron.yale.edu/ftp/neuron/versions/v$NRN_VER/$NRN.tar.gz\nRUN tar xzf $NEST.tar.gz; tar xzf $NRN.tar.gz; rm $NEST.tar.gz $NRN.tar.gz\nRUN git clone --depth 1 https://github.com/INCF/libneurosim.git\nRUN cd libneurosim; ./autogen.sh\n\nRUN mkdir $VENV/build\nWORKDIR $VENV/build\nRUN mkdir libneurosim; \\\n    cd libneurosim; \\\n    PYTHON=$VENV/bin/python $HOME/packages/libneurosim/configure --prefix=$VENV; \\\n    make; make install; ls $VENV/lib $VENV/include\nRUN mkdir $NEST; \\\n    cd $NEST; \\\n    ln -s /usr/lib/python3.4/config-3.4m-x86_64-linux-gnu/libpython3.4.so $VENV/lib/; \\\n    cmake -DCMAKE_INSTALL_PREFIX=$VENV \\\n          -Dwith-mpi=ON  \\\n          ###-Dwith-music=ON \\\n          -Dwith-libneurosim=ON \\\n          -DPYTHON_LIBRARY=$VENV/lib/libpython3.4.so \\\n          -DPYTHON_INCLUDE_DIR=/usr/include/python3.4 \\\n          $HOME/packages/$NEST; \\\n    make; make install\nRUN mkdir $NRN; \\\n    cd $NRN; \\\n    $HOME/packages/$NRN/configure --with-paranrn --with-nrnpython=$VENV/bin/python --disable-rx3d --without-iv --prefix=$VENV; \\\n    make; make install; \\\n    cd src/nrnpython; $VENV/bin/python setup.py install; \\\n    cd $VENV/bin; ln -s ../x86_64/bin/nrnivmodl\n\nRUN $VENV/bin/pip3 install --no-cache-dir lazyarray nrnutils PyNN\nRUN $VENV/bin/pip3 install --no-cache-dir brian2\n\nWORKDIR /home/docker/\nRUN echo \"source $VENV/bin/activate\" >> .bashrc\n"
}