{
  "startTime": 1674239411281,
  "endTime": 1674239411620,
  "originalSmells": [
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 52,
        "lineEnd": 52,
        "columnStart": 12,
        "columnEnd": 38
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 3,
        "lineEnd": 16,
        "columnStart": 53,
        "columnEnd": 99
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 44,
        "lineEnd": 44,
        "columnStart": 4,
        "columnEnd": 72
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 69,
        "lineEnd": 69,
        "columnStart": 4,
        "columnEnd": 34
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 44,
        "lineEnd": 44,
        "columnStart": 4,
        "columnEnd": 72
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 69,
        "lineEnd": 69,
        "columnStart": 4,
        "columnEnd": 34
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 3,
        "lineEnd": 16,
        "columnStart": 53,
        "columnEnd": 99
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 44,
        "lineEnd": 44,
        "columnStart": 4,
        "columnEnd": 72
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 69,
        "lineEnd": 69,
        "columnStart": 4,
        "columnEnd": 34
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 44,
        "lineEnd": 44,
        "columnStart": 4,
        "columnEnd": 96
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 69,
        "lineEnd": 69,
        "columnStart": 4,
        "columnEnd": 58
      }
    }
  ],
  "repairedDockerfile": "FROM ubuntu:18.04\nMAINTAINER bhaas@broadinstitute.org\n\nRUN DEBIAN_FRONTEND=noninteractive apt-get update && apt-get install --no-install-recommends -y gcc g++ perl python automake make cmake less vim \\\n                                       wget git curl libdb-dev \\\n                                       zlib1g-dev bzip2 libncurses5-dev \\\n                                       texlive-latex-base \\\n                                       default-jre \\\n                                       python-pip python-dev \\\n                                       gfortran \\\n                                       build-essential libghc-zlib-dev libncurses-dev libbz2-dev liblzma-dev libpcre3-dev libxml2-dev \\\n                                       libblas-dev gfortran git unzip ftp libzmq3-dev nano ftp fort77 libreadline-dev \\\n                                       libcurl4-openssl-dev libx11-dev libxt-dev \\\n                                       x11-common libcairo2-dev libpng-dev libreadline6-dev libjpeg8-dev pkg-config \\\n                                       build-essential cmake gsl-bin libgsl0-dev libeigen3-dev libboost-all-dev \\\n                                       libssl-dev libcairo2-dev libxt-dev libgtk2.0-dev libcairo2-dev xvfb xauth \\\n                                       xfonts-base apt-utils apt-transport-https gdebi-core locales && rm -rf /var/lib/apt/lists/*;\n\n\n\nCOPY installR.sh /usr/local/src\n\nRUN /usr/local/src/installR.sh\n\n\n\nRUN echo \"en_US.UTF-8 UTF-8\" >> /etc/locale.gen \\\n  && locale-gen en_US.utf8 \\\n    && /usr/sbin/update-locale LANG=en_US.UTF-8\n\nCOPY install_rstudio_server.sh /usr/local/src\n\nRUN /usr/local/src/install_rstudio_server.sh\n\n### User setup\nRUN groupadd -g 2000 training && useradd -m -u 2000 -g 2000 training\nRUN echo 'training:training' | chpasswd\nRUN chsh -s /bin/bash training\nENV HOME=/home/training\nRUN echo \"alias ll='ls -la -G'\" >> /home/training/.profile\nRUN usermod -G training,www-data training\n\nRUN usermod -a -G sudo training\n\nRUN apt-get install --no-install-recommends -y openssh-server libncurses5-dev apache2 supervisor && rm -rf /var/lib/apt/lists/*;\n\n\n#########\n### GateOne SSH interface\n#########\nRUN git clone https://github.com/liftoff/GateOne/ && \\\n    cd GateOne && python setup.py install && \\\n            pip install --no-cache-dir tornado==4.5.3 && \\\n                        python run_gateone.py --configure\n\n\n\n\nEXPOSE 22 80 443 8787\n\nRUN Rscript -e 'source(\"http://bioconductor.org/biocLite.R\");library(BiocInstaller); biocLite(\"devtools\", dep = TRUE)'\n\nRUN Rscript -e 'source(\"http://bioconductor.org/biocLite.R\");library(BiocInstaller); biocLite(\"fastcluster\", dep = TRUE);'\nRUN Rscript -e 'source(\"http://bioconductor.org/biocLite.R\");library(BiocInstaller); biocLite(\"useful\", dep = TRUE);'\n\n##\n## Seurat 2.0\n##\n\nRUN apt-get install --no-install-recommends -y libhdf5-dev && rm -rf /var/lib/apt/lists/*;\n\nRUN Rscript -e 'install.packages(\"/usr/local/src/caTools_1.17.1.mod.tar.gz\", repos=NULL, type=\"source\");'\n\nRUN Rscript -e 'library(devtools); install_github(\"satijalab/seurat\", ref = \"develop\");'\n\n\n# needed for combat\nRUN Rscript -e 'source(\"http://bioconductor.org/biocLite.R\");library(BiocInstaller); biocLite(\"sva\", dep = TRUE)'\n\n# needed for seurat clustering (hopefully not in a future seurat release)\nRUN chmod 777 /usr/local/lib/R/site-library\n\n\n\n\n\n\n\n\n##################\n####  singleCellTK\n\n\nRUN Rscript -e 'source(\"http://bioconductor.org/biocLite.R\");library(BiocInstaller); biocLite(\"singleCellTK\", dep = TRUE);'\n\n\n\n\n\n\n## auto-run setup\n\nADD supervisord.conf /etc/supervisor/conf.d/supervisord.conf\nCMD [\"/usr/bin/supervisord\",\"-c\",\"/etc/supervisor/conf.d/supervisord.conf\"]\n\n\n############################\n## more seurat configuration\n\n\n\nRUN Rscript -e 'library(devtools); install_github(\"satijalab/seurat\", ref = \"develop\");'\n\n\n## for Matan:\n\nRUN Rscript -e 'source(\"http://bioconductor.org/biocLite.R\");library(BiocInstaller); biocLite(\"AUCell\", dep = TRUE);'\n\nRUN Rscript -e 'source(\"http://bioconductor.org/biocLite.R\");library(BiocInstaller); biocLite(\"destiny\", dep = TRUE);'\n\nRUN Rscript -e 'source(\"http://bioconductor.org/biocLite.R\");library(BiocInstaller); biocLite(\"fgsea\", dep = TRUE);'\n\nRUN Rscript -e 'source(\"http://bioconductor.org/biocLite.R\");library(BiocInstaller); biocLite(\"DropletUtils\", dep = TRUE);'\n\nRUN Rscript -e 'source(\"http://bioconductor.org/biocLite.R\");library(BiocInstaller); biocLite(\"precrec\", dep = TRUE);'\n\nRUN Rscript -e 'source(\"http://bioconductor.org/biocLite.R\");library(BiocInstaller); biocLite(\"pbapply\", dep = TRUE);'\n\n\n\n\n"
}