{
  "startTime": 1674250008729,
  "endTime": 1674250009817,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 93,
        "lineEnd": 93,
        "columnStart": 5,
        "columnEnd": 70
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 94,
        "lineEnd": 94,
        "columnStart": 5,
        "columnEnd": 77
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 127,
        "lineEnd": 127,
        "columnStart": 27,
        "columnEnd": 86
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 129,
        "lineEnd": 130,
        "columnStart": 5,
        "columnEnd": 93
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 135,
        "lineEnd": 135,
        "columnStart": 5,
        "columnEnd": 72
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 140,
        "lineEnd": 140,
        "columnStart": 4,
        "columnEnd": 49
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 143,
        "lineEnd": 143,
        "columnStart": 4,
        "columnEnd": 53
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 146,
        "lineEnd": 146,
        "columnStart": 4,
        "columnEnd": 53
      }
    },
    {
      "rule": "npmCacheCleanAfterInstall",
      "position": {
        "lineStart": 154,
        "lineEnd": 154,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "npmCacheCleanAfterInstall",
      "position": {
        "lineStart": 155,
        "lineEnd": 155,
        "columnStart": 4,
        "columnEnd": 42
      }
    },
    {
      "rule": "npmCacheCleanAfterInstall",
      "position": {
        "lineStart": 156,
        "lineEnd": 156,
        "columnStart": 4,
        "columnEnd": 23
      }
    },
    {
      "rule": "curlUseHttpsUrl",
      "position": {
        "lineStart": 129,
        "lineEnd": 130,
        "columnStart": 5,
        "columnEnd": 93
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 12,
        "lineEnd": 12,
        "columnStart": 22,
        "columnEnd": 80
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 13,
        "lineEnd": 13,
        "columnStart": 22,
        "columnEnd": 77
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 15,
        "lineEnd": 15,
        "columnStart": 22,
        "columnEnd": 63
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 16,
        "lineEnd": 16,
        "columnStart": 22,
        "columnEnd": 65
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 17,
        "lineEnd": 17,
        "columnStart": 22,
        "columnEnd": 87
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 22,
        "lineEnd": 22,
        "columnStart": 22,
        "columnEnd": 67
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 24,
        "lineEnd": 76,
        "columnStart": 22,
        "columnEnd": 44
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 83,
        "lineEnd": 83,
        "columnStart": 22,
        "columnEnd": 91
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 86,
        "lineEnd": 86,
        "columnStart": 22,
        "columnEnd": 89
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 124,
        "lineEnd": 125,
        "columnStart": 2,
        "columnEnd": 19
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 137,
        "lineEnd": 137,
        "columnStart": 27,
        "columnEnd": 94
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 139,
        "lineEnd": 139,
        "columnStart": 22,
        "columnEnd": 86
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 141,
        "lineEnd": 141,
        "columnStart": 22,
        "columnEnd": 62
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 142,
        "lineEnd": 142,
        "columnStart": 22,
        "columnEnd": 59
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 148,
        "lineEnd": 148,
        "columnStart": 22,
        "columnEnd": 60
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 158,
        "lineEnd": 158,
        "columnStart": 22,
        "columnEnd": 66
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 124,
        "lineEnd": 125,
        "columnStart": 2,
        "columnEnd": 19
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 12,
        "lineEnd": 12,
        "columnStart": 22,
        "columnEnd": 80
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 13,
        "lineEnd": 13,
        "columnStart": 22,
        "columnEnd": 77
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 15,
        "lineEnd": 15,
        "columnStart": 22,
        "columnEnd": 63
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 16,
        "lineEnd": 16,
        "columnStart": 22,
        "columnEnd": 65
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 17,
        "lineEnd": 17,
        "columnStart": 22,
        "columnEnd": 87
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 22,
        "lineEnd": 22,
        "columnStart": 22,
        "columnEnd": 67
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 24,
        "lineEnd": 76,
        "columnStart": 22,
        "columnEnd": 44
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 83,
        "lineEnd": 83,
        "columnStart": 22,
        "columnEnd": 91
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 86,
        "lineEnd": 86,
        "columnStart": 22,
        "columnEnd": 89
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 124,
        "lineEnd": 125,
        "columnStart": 2,
        "columnEnd": 19
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 137,
        "lineEnd": 137,
        "columnStart": 27,
        "columnEnd": 94
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 139,
        "lineEnd": 139,
        "columnStart": 22,
        "columnEnd": 86
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 141,
        "lineEnd": 141,
        "columnStart": 22,
        "columnEnd": 62
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 142,
        "lineEnd": 142,
        "columnStart": 22,
        "columnEnd": 59
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 148,
        "lineEnd": 148,
        "columnStart": 22,
        "columnEnd": 60
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 158,
        "lineEnd": 158,
        "columnStart": 22,
        "columnEnd": 66
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 124,
        "lineEnd": 125,
        "columnStart": 2,
        "columnEnd": 19
      }
    }
  ],
  "repairedDockerfile": "FROM ubuntu:bionic\nMAINTAINER Chilio\n\nENV DEBIAN_FRONTEND noninteractive\nENV DEBCONF_NONINTERACTIVE_SEEN true\n\nENV DISPLAY :99\nENV SCREEN_RESOLUTION 1920x720x24\nENV CHROMEDRIVER_PORT 9515\n\nENV TMPDIR=/tmp\n\nRUN apt-get update && apt-get install --no-install-recommends -yq --fix-missing apt-utils netcat-openbsd && rm -rf /var/lib/apt/lists/*;\nRUN apt-get update && apt-get install --no-install-recommends -yq --fix-missing language-pack-en-base && rm -rf /var/lib/apt/lists/*;\nENV LC_ALL=en_US.UTF-8\nRUN apt-get update && apt-get install --no-install-recommends -yq --fix-missing openssl && rm -rf /var/lib/apt/lists/*;\nRUN apt-get update && apt-get install --no-install-recommends -yq --fix-missing zip unzip && rm -rf /var/lib/apt/lists/*;\nRUN apt-get update && apt-get install --no-install-recommends -yq --fix-missing software-properties-common curl && rm -rf /var/lib/apt/lists/*;\nRUN add-apt-repository ppa:ondrej/php\nRUN sed -i'' 's/archive\\.ubuntu\\.com/us\\.archive\\.ubuntu\\.com/' /etc/apt/sources.list\nRUN apt-get update\nRUN apt-get upgrade -yq\nRUN apt-get update && apt-get install --no-install-recommends -yq --fix-missing libgd-tools && rm -rf /var/lib/apt/lists/*;\n# Install PHP\nRUN apt-get update && apt-get install --no-install-recommends -yq --fix-missing \\\n    php7.2 \\\n    php7.2-bcmath \\\n    php7.2-bz2 \\\n    php7.2-cli \\\n    php7.2-common \\\n    php7.2-curl \\\n    php7.2-fpm \\\n    php7.2-gd \\\n    php7.2-gmp \\\n    php7.2-imap \\\n    php7.2-interbase \\\n    php7.2-intl \\\n    php7.2-json \\\n    php7.2-ldap \\\n    php7.2-mbstring \\\n    php7.2-mysql \\\n    php7.2-opcache \\\n    php7.2-pgsql \\\n    php7.2-phpdbg \\\n    php7.2-pspell \\\n    php7.2-readline \\\n    php7.2-recode \\\n    php7.2-snmp \\\n    php7.2-soap \\\n    php7.2-sqlite3 \\\n    php7.2-sybase \\\n    php7.2-tidy \\\n    php7.2-xml \\\n    php7.2-xmlrpc \\\n    php7.2-zip \\\n    php7.2-xsl \\\n    php-geoip \\\n    php-mongodb \\\n    php-redis \\\n    php-ssh2 \\\n    php-uuid \\\n    php-zmq \\\n    php-radius \\\n    php-http \\\n    php-uploadprogress \\\n    php-yaml \\\n    php-memcached \\\n    php-memcache \\\n    php-tideways \\\n    php-mailparse \\\n    php-raphf \\\n    php-stomp \\\n    php-ds \\\n    php-sass \\\n    php-lua \\\n    php-geos \\\n    php-xdebug php-imagick imagemagick nginx && rm -rf /var/lib/apt/lists/*;\n\nRUN update-alternatives --set php /usr/bin/php7.2\nRUN update-alternatives --set phar /usr/bin/phar7.2\nRUN update-alternatives --set phar.phar /usr/bin/phar.phar7.2\n# RUN update-alternatives --set phpize /usr/bin/phpize7.2\n# RUN update-alternatives --set php-config /usr/bin/php-config7.2\nRUN apt-get update && apt-get install --no-install-recommends -yq --fix-missing mc lynx mysql-client bzip2 make g++ && rm -rf /var/lib/apt/lists/*;\n\n# Install Redis, Memcached, Beanstalk\nRUN apt-get update && apt-get install --no-install-recommends -yq --fix-missing redis-server memcached beanstalkd && rm -rf /var/lib/apt/lists/*;\n\nENV COMPOSER_HOME /usr/local/share/composer\nENV COMPOSER_ALLOW_SUPERUSER 1\nENV PATH \"$COMPOSER_HOME:$COMPOSER_HOME/vendor/bin:$PATH\"\nRUN \\\n  mkdir -pv $COMPOSER_HOME && chmod -R g+w $COMPOSER_HOME \\\n  && curl -f -o /tmp/composer-setup.php https://getcomposer.org/installer \\\n  && curl -f -o /tmp/composer-setup.sig https://composer.github.io/installer.sig \\\n  && php -r \"if (hash('SHA384', file_get_contents('/tmp/composer-setup.php')) \\\n    !== trim(file_get_contents('/tmp/composer-setup.sig'))) { unlink('/tmp/composer-setup.php'); \\\n    echo 'Invalid installer' . PHP_EOL; exit(1); }\" \\\n  && php /tmp/composer-setup.php --filename=composer --install-dir=$COMPOSER_HOME\n\nADD commands/xvfb.init.sh /etc/init.d/xvfb\n\nADD commands/start-nginx-ci-project.sh /usr/bin/start-nginx-ci-project\nRUN chmod +x /usr/bin/start-nginx-ci-project\n\nADD commands/versions /usr/bin/versions\nRUN chmod +x /usr/bin/versions\n\nADD configs/.bowerrc /root/.bowerrc\n\nADD commands/configure-laravel.sh /usr/bin/configure-laravel\n\nRUN chmod +x /usr/bin/configure-laravel\n\nADD commands/chrome-system-check.sh /usr/bin/chrome-system-check\nRUN chmod +x /usr/bin/chrome-system-check\n\nADD commands/chromedriver-compatibility-matrix.php /usr/bin/chromedriver-compatibility-matrix.php\nRUN chmod +x /usr/bin/chromedriver-compatibility-matrix.php\nADD commands/dusk-versions-check.php /usr/bin/dusk-versions-check.php\nRUN chmod +x /usr/bin/dusk-versions-check.php\n\n\nRUN \\\n  apt-get install --no-install-recommends -yq --fix-missing xvfb gconf2 fonts-ipafont-gothic xfonts-cyrillic xfonts-100dpi xfonts-75dpi xfonts-base \\\n    xfonts-scalable \\\n  && chmod +x /etc/init.d/xvfb \\\n  && CHROMEDRIVER_VERSION=$( curl -f -sS chromedriver.storage.googleapis.com/LATEST_RELEASE) \\\n  && mkdir -p /opt/chromedriver-$CHROMEDRIVER_VERSION \\\n  && curl -f -sS -o /tmp/chromedriver_linux64.zip \\\n    https://chromedriver.storage.googleapis.com/$CHROMEDRIVER_VERSION/chromedriver_linux64.zip \\\n  && unzip -qq /tmp/chromedriver_linux64.zip -d /opt/chromedriver-$CHROMEDRIVER_VERSION \\\n  && rm /tmp/chromedriver_linux64.zip \\\n  && chmod +x /opt/chromedriver-$CHROMEDRIVER_VERSION/chromedriver \\\n  && ln -fs /opt/chromedriver-$CHROMEDRIVER_VERSION/chromedriver /usr/local/bin/chromedriver \\\n  && curl -f -sS -o - https://dl-ssl.google.com/linux/linux_signing_key.pub | apt-key add - \\\n  && echo \"deb http://dl.google.com/linux/chrome/deb/ stable main\" >> /etc/apt/sources.list.d/google-chrome.list \\\n  && apt-get -yq update && apt-get install --no-install-recommends -yq --fix-missing google-chrome-stable x11vnc rsync && rm -rf /var/lib/apt/lists/*;\n\nRUN apt-get update && apt-get install --no-install-recommends -yq --fix-missing apt-transport-https libpng-dev && rm -rf /var/lib/apt/lists/*;\nRUN curl -f -sL https://deb.nodesource.com/setup_8.x | bash -\nRUN apt-get update && apt-get install --no-install-recommends -yq --fix-missing nodejs && rm -rf /var/lib/apt/lists/*;\nRUN apt-get update && apt-get install --no-install-recommends -yq --fix-missing git && rm -rf /var/lib/apt/lists/*;\nRUN curl -f -sS https://dl.yarnpkg.com/debian/pubkey.gpg | apt-key add -\nRUN echo \"deb https://dl.yarnpkg.com/debian/ stable main\" | tee /etc/apt/sources.list.d/yarn.list\n\nRUN curl -f -sS https://dl.yarnpkg.com/debian/pubkey.gpg | apt-key add -\nRUN echo \"deb https://dl.yarnpkg.com/debian/ stable main\" | tee /etc/apt/sources.list.d/yarn.list\nRUN apt-get update && apt-get install --no-install-recommends -yq --fix-missing yarn && rm -rf /var/lib/apt/lists/*;\nRUN yarn global add bower --network-concurrency 1\nRUN wget https://phar.phpunit.de/phpunit.phar\nRUN chmod +x phpunit.phar\nRUN mv phpunit.phar /usr/local/bin/phpunit\n\nRUN npm install -g node-gyp && npm cache clean --force;\nRUN npm install --unsafe-perm -g node-sass && npm cache clean --force;\nRUN npm install -g gulp && npm cache clean --force;\n\nRUN apt-get update && apt-get install --no-install-recommends -yq --fix-missing supervisor && rm -rf /var/lib/apt/lists/*;\n\nADD configs/supervisord.conf /etc/supervisor/supervisord.conf\n\nADD configs/nginx-default-site /etc/nginx/sites-available/default\n\nRUN composer global require hirak/prestissimo\n\nRUN npm set progress=false\n\nVOLUME [ \"/var/log/supervisor\" ]\n\n# Clean system up\nRUN apt-get -yq upgrade\nRUN apt-get -yq autoremove\nRUN apt-get -yq clean && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*\n\nRUN systemctl enable xvfb\n\nRUN versions\n\nARG BUILD_DATE\nARG VCS_REF\nARG VERSION\nLABEL org.label-schema.build-date=$BUILD_DATE \\\n          org.label-schema.name=\"Laravel Dusk CI Docker\" \\\n          org.label-schema.description=\"Test suite for Laravel Dusk in gitlab CI\" \\\n          org.label-schema.url=\"https://hub.docker.com/r/chilio/laravel-dusk-ci/\" \\\n          org.label-schema.vcs-ref=$VCS_REF \\\n          org.label-schema.vcs-url=\"https://github.com/chilio/laravel-dusk-ci\" \\\n          org.label-schema.vendor=\"Chilio\" \\\n          org.label-schema.version=$VERSION \\\n          org.label-schema.schema-version=\"1.0.0\"\n\nEXPOSE 80 443 9515\n\nCMD [\"php-fpm7.2\", \"-F\"]\n"
}