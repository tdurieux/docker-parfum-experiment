{
  "startTime": 1674250979092,
  "endTime": 1674250979560,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 33,
        "lineEnd": 33,
        "columnStart": 4,
        "columnEnd": 87
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 38,
        "lineEnd": 38,
        "columnStart": 4,
        "columnEnd": 46
      }
    },
    {
      "rule": "aptGetInstallUseY",
      "position": {
        "lineStart": 35,
        "lineEnd": 35,
        "columnStart": 55,
        "columnEnd": 75
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 21,
        "lineEnd": 21,
        "columnStart": 4,
        "columnEnd": 62
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 22,
        "lineEnd": 22,
        "columnStart": 4,
        "columnEnd": 241
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 25,
        "lineEnd": 25,
        "columnStart": 4,
        "columnEnd": 66
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 28,
        "lineEnd": 28,
        "columnStart": 4,
        "columnEnd": 62
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 29,
        "lineEnd": 29,
        "columnStart": 4,
        "columnEnd": 59
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 30,
        "lineEnd": 30,
        "columnStart": 4,
        "columnEnd": 59
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 35,
        "lineEnd": 35,
        "columnStart": 55,
        "columnEnd": 75
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 21,
        "lineEnd": 21,
        "columnStart": 4,
        "columnEnd": 62
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 22,
        "lineEnd": 22,
        "columnStart": 4,
        "columnEnd": 241
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 25,
        "lineEnd": 25,
        "columnStart": 4,
        "columnEnd": 66
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 28,
        "lineEnd": 28,
        "columnStart": 4,
        "columnEnd": 62
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 29,
        "lineEnd": 29,
        "columnStart": 4,
        "columnEnd": 59
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 30,
        "lineEnd": 30,
        "columnStart": 4,
        "columnEnd": 59
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 21,
        "lineEnd": 21,
        "columnStart": 4,
        "columnEnd": 62
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 22,
        "lineEnd": 22,
        "columnStart": 4,
        "columnEnd": 241
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 25,
        "lineEnd": 25,
        "columnStart": 4,
        "columnEnd": 66
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 28,
        "lineEnd": 28,
        "columnStart": 4,
        "columnEnd": 62
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 29,
        "lineEnd": 29,
        "columnStart": 4,
        "columnEnd": 59
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 30,
        "lineEnd": 30,
        "columnStart": 4,
        "columnEnd": 59
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 35,
        "lineEnd": 35,
        "columnStart": 55,
        "columnEnd": 75
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 21,
        "lineEnd": 21,
        "columnStart": 4,
        "columnEnd": 86
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 22,
        "lineEnd": 22,
        "columnStart": 4,
        "columnEnd": 265
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 25,
        "lineEnd": 25,
        "columnStart": 4,
        "columnEnd": 90
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 28,
        "lineEnd": 28,
        "columnStart": 4,
        "columnEnd": 86
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 29,
        "lineEnd": 29,
        "columnStart": 4,
        "columnEnd": 83
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 30,
        "lineEnd": 30,
        "columnStart": 4,
        "columnEnd": 83
      }
    }
  ],
  "repairedDockerfile": "FROM phusion/baseimage\nMAINTAINER Thiago Taranto <ttaranto@gmail.com>\n\n# ensure UTF-8\nRUN locale-gen en_US.UTF-8\nENV LANG en_US.UTF-8\nENV LC_ALL en_US.UTF-8\n\n# change resolv.conf\nRUN echo 'nameserver 8.8.8.8' >> /etc/resolv.conf\n\n# setup\nENV HOME /root\nRUN /etc/my_init.d/00_regen_ssh_host_keys.sh\n\nCMD [\"/sbin/my_init\"]\n\n# nginx-php installation\nRUN DEBIAN_FRONTEND=\"noninteractive\" apt-get update\nRUN DEBIAN_FRONTEND=\"noninteractive\" apt-get -y upgrade\nRUN DEBIAN_FRONTEND=\"noninteractive\" apt-get update --fix-missing\nRUN DEBIAN_FRONTEND=\"noninteractive\" apt-get --no-install-recommends -y install php7.0 && rm -rf /var/lib/apt/lists/*;\nRUN DEBIAN_FRONTEND=\"noninteractive\" apt-get --no-install-recommends -y install php7.0-fpm php7.0-common php7.0-cli php7.0-mysqlnd php7.0-mcrypt php7.0-curl php7.0-bcmath php7.0-mbstring php7.0-soap php7.0-xml php7.0-zip php7.0-json php7.0-imap php-xdebug php-pgsql && rm -rf /var/lib/apt/lists/*;\n\n# install nginx (full)\nRUN DEBIAN_FRONTEND=\"noninteractive\" apt-get --no-install-recommends install -y nginx-full && rm -rf /var/lib/apt/lists/*;\n\n# install latest version of nodejs\nRUN DEBIAN_FRONTEND=\"noninteractive\" apt-get --no-install-recommends install -y nodejs && rm -rf /var/lib/apt/lists/*;\nRUN DEBIAN_FRONTEND=\"noninteractive\" apt-get --no-install-recommends install -y npm && rm -rf /var/lib/apt/lists/*;\nRUN DEBIAN_FRONTEND=\"noninteractive\" apt-get --no-install-recommends install -y git && rm -rf /var/lib/apt/lists/*;\n\n# install yarn\nRUN DEBIAN_FRONTEND=\"noninteractive\" curl -f -sSL https://dl.yarnpkg.com/debian/pubkey.gpg | apt-key add -\nRUN DEBIAN_FRONTEND=\"noninteractive\" echo \"deb https://dl.yarnpkg.com/debian/ stable main\" | tee /etc/apt/sources.list.d/yarn.list\nRUN DEBIAN_FRONTEND=\"noninteractive\" apt-get update && apt-get install -y --no-install-recommends yarn && rm -rf /var/lib/apt/lists/*;\n\n# install php composer\nRUN curl -f -sS https://getcomposer.org/installer | php\nRUN mv composer.phar /usr/local/bin/composer\n\n# add build script (also set timezone to Americas/Sao_Paulo)\nRUN mkdir -p /root/setup\nADD build/setup.sh /root/setup/setup.sh\nRUN chmod +x /root/setup/setup.sh\nRUN (cd /root/setup/; /root/setup/setup.sh)\n\n# copy files from repo\nADD build/nginx.conf /etc/nginx/sites-available/default\nADD build/.bashrc /root/.bashrc\n\n# disable services start\nRUN update-rc.d -f apache2 remove\nRUN update-rc.d -f nginx remove\nRUN update-rc.d -f php7.0-fpm remove\n\n# add startup scripts for nginx\nADD build/nginx.sh /etc/service/nginx/run\nRUN chmod +x /etc/service/nginx/run\n\n# add startup scripts for php7.0-fpm\nADD build/phpfpm.sh /etc/service/phpfpm/run\nRUN chmod +x /etc/service/phpfpm/run\n\n# set WWW public folder\nRUN mkdir -p /var/www/public\nADD build/index.php /var/www/public/index.php\n\nRUN chown -R www-data:www-data /var/www\nRUN chmod 755 /var/www\n\n# set terminal environment\nENV TERM=xterm\n\n# port and settings\nEXPOSE 80 9000\n\n# cleanup apt and lists\nRUN apt-get clean\nRUN apt-get autoclean\n"
}