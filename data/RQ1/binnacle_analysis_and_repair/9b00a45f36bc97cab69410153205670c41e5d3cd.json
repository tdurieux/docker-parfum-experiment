{
  "startTime": 1674246150936,
  "endTime": 1674246151118,
  "originalSmells": [
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 56,
        "lineEnd": 56,
        "columnStart": 4,
        "columnEnd": 23
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "# ==================================================================\n# module list\n# ------------------------------------------------------------------\n# python        2.7    (apt)\n# pytorch       0.4.1  (pip)\n# tensorflow    1.5 (pip)\n# opencv        3.4.1  (git)\n# ==================================================================\n\nFROM nvidia/cuda:9.0-cudnn7-devel-ubuntu16.04\nRUN sed -i 's/archive.ubuntu.com/mirrors.ustc.edu.cn/g' /etc/apt/sources.list && \\\n    APT_INSTALL=\"apt-get install -y --no-install-recommends\" && \\\n    PIP_INSTALL=\"python -m pip --no-cache-dir install --upgrade\" && \\\n    GIT_CLONE=\"git clone --depth 10\" && \\\n\n    rm -rf /var/lib/apt/lists/* \\\n           /etc/apt/sources.list.d/cuda.list \\\n           /etc/apt/sources.list.d/nvidia-ml.list && \\\n\n    apt-get update && \\\n\n# ==================================================================\n# tools\n# ------------------------------------------------------------------\n\n    DEBIAN_FRONTEND=noninteractive $APT_INSTALL \\\n        build-essential \\\n        ca-certificates \\\n        cmake \\\n        wget \\\n        git \\\n        vim \\\n        openssh-client \\\n        openssh-server \\\n        && \\\n\n# ==================================================================\n# python\n# ------------------------------------------------------------------\n\n    DEBIAN_FRONTEND=noninteractive $APT_INSTALL \\\n        python-pip \\\n        python-dev \\\n        && \\\n    $PIP_INSTALL \\\n        setuptools \\\n        pip \\\n        && \\\n    $PIP_INSTALL \\\n        numpy \\\n        scipy \\\n        pandas \\\n        scikit-learn \\\n        matplotlib \\\n        Cython \\\n        && \\\n    pip2 install --no-cache-dir Cython \\\n        && \\\n    $PIP_INSTALL \\\n        pycocotools \\\n        h5py \\\n        && \\\n\n# ==================================================================\n# boost\n# ------------------------------------------------------------------\n\n    DEBIAN_FRONTEND=noninteractive $APT_INSTALL \\\n        libboost-all-dev \\\n        && \\\n\n\n# ==================================================================\n# pytorch\n# ------------------------------------------------------------------\n\n    $PIP_INSTALL \\\n        http://download.pytorch.org/whl/cu90/torch-0.4.1-cp27-cp27mu-linux_x86_64.whl \\\n        torchvision \\\n        && \\\n\n# ==================================================================\n# tensorflow\n# ------------------------------------------------------------------\n\n    $PIP_INSTALL \\\n        tensorflow-gpu==1.5.0 \\\n        && \\\n\n# ==================================================================\n# opencv\n# ------------------------------------------------------------------\n\n    DEBIAN_FRONTEND=noninteractive $APT_INSTALL \\\n        libatlas-base-dev \\\n        libgflags-dev \\\n        libgoogle-glog-dev \\\n        libhdf5-serial-dev \\\n        libleveldb-dev \\\n        liblmdb-dev \\\n        libprotobuf-dev \\\n        libsnappy-dev \\\n        protobuf-compiler \\\n        && \\\n\n    $GIT_CLONE --branch 3.4.1 https://github.com/opencv/opencv ~/opencv && \\\n    mkdir -p ~/opencv/build && cd ~/opencv/build && \\\n    cmake -D CMAKE_BUILD_TYPE=RELEASE \\\n          -D CMAKE_INSTALL_PREFIX=/usr/local \\\n          -D WITH_IPP=OFF \\\n          -D WITH_CUDA=OFF \\\n          -D WITH_OPENCL=OFF \\\n          -D BUILD_TESTS=OFF \\\n          -D BUILD_PERF_TESTS=OFF \\\n          .. && \\\n    make -j\"$(nproc)\" install && \\\n\n\n# ==================================================================\n# config & cleanup\n# ------------------------------------------------------------------\n\n    ldconfig && \\\n    apt-get clean && \\\n    apt-get autoremove && \\\n    rm -rf /var/lib/apt/lists/* /tmp/* ~/*\n\nEXPOSE 6006\n"
}