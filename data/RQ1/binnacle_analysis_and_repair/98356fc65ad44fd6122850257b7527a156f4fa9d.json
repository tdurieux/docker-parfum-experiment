{
  "startTime": 1674234522156,
  "endTime": 1674234523107,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 79,
        "lineEnd": 79,
        "columnStart": 7,
        "columnEnd": 133
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 205,
        "lineEnd": 205,
        "columnStart": 6,
        "columnEnd": 113
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 207,
        "lineEnd": 207,
        "columnStart": 6,
        "columnEnd": 112
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 248,
        "lineEnd": 248,
        "columnStart": 6,
        "columnEnd": 123
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 250,
        "lineEnd": 250,
        "columnStart": 6,
        "columnEnd": 78
      }
    },
    {
      "rule": "configureShouldUseBuildFlag",
      "position": {
        "lineStart": 214,
        "lineEnd": 214,
        "columnStart": 11,
        "columnEnd": 22
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 80,
        "lineEnd": 80,
        "columnStart": 7,
        "columnEnd": 51
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 13,
        "lineEnd": 13,
        "columnStart": 4,
        "columnEnd": 32
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 32,
        "lineEnd": 32,
        "columnStart": 4,
        "columnEnd": 43
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 68,
        "lineEnd": 69,
        "columnStart": 4,
        "columnEnd": 1
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 141,
        "lineEnd": 141,
        "columnStart": 4,
        "columnEnd": 38
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 154,
        "lineEnd": 154,
        "columnStart": 4,
        "columnEnd": 33
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 189,
        "lineEnd": 189,
        "columnStart": 3,
        "columnEnd": 32
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 245,
        "lineEnd": 245,
        "columnStart": 4,
        "columnEnd": 32
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 315,
        "lineEnd": 315,
        "columnStart": 4,
        "columnEnd": 48
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 329,
        "lineEnd": 332,
        "columnStart": 4,
        "columnEnd": 1
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 341,
        "lineEnd": 341,
        "columnStart": 4,
        "columnEnd": 35
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 355,
        "lineEnd": 356,
        "columnStart": 4,
        "columnEnd": 1
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 367,
        "lineEnd": 367,
        "columnStart": 4,
        "columnEnd": 52
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 379,
        "lineEnd": 379,
        "columnStart": 4,
        "columnEnd": 50
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 32,
        "lineEnd": 32,
        "columnStart": 4,
        "columnEnd": 43
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 68,
        "lineEnd": 69,
        "columnStart": 4,
        "columnEnd": 1
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 141,
        "lineEnd": 141,
        "columnStart": 4,
        "columnEnd": 38
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 154,
        "lineEnd": 154,
        "columnStart": 4,
        "columnEnd": 33
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 189,
        "lineEnd": 189,
        "columnStart": 3,
        "columnEnd": 32
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 245,
        "lineEnd": 245,
        "columnStart": 4,
        "columnEnd": 32
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 315,
        "lineEnd": 315,
        "columnStart": 4,
        "columnEnd": 48
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 329,
        "lineEnd": 332,
        "columnStart": 4,
        "columnEnd": 1
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 341,
        "lineEnd": 341,
        "columnStart": 4,
        "columnEnd": 35
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 355,
        "lineEnd": 356,
        "columnStart": 4,
        "columnEnd": 1
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 367,
        "lineEnd": 367,
        "columnStart": 4,
        "columnEnd": 52
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 379,
        "lineEnd": 379,
        "columnStart": 4,
        "columnEnd": 50
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 13,
        "lineEnd": 13,
        "columnStart": 4,
        "columnEnd": 32
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 32,
        "lineEnd": 32,
        "columnStart": 4,
        "columnEnd": 43
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 68,
        "lineEnd": 69,
        "columnStart": 4,
        "columnEnd": 1
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 141,
        "lineEnd": 141,
        "columnStart": 4,
        "columnEnd": 38
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 154,
        "lineEnd": 154,
        "columnStart": 4,
        "columnEnd": 33
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 189,
        "lineEnd": 189,
        "columnStart": 3,
        "columnEnd": 32
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 245,
        "lineEnd": 245,
        "columnStart": 4,
        "columnEnd": 32
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 315,
        "lineEnd": 315,
        "columnStart": 4,
        "columnEnd": 48
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 329,
        "lineEnd": 332,
        "columnStart": 4,
        "columnEnd": 1
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 341,
        "lineEnd": 341,
        "columnStart": 4,
        "columnEnd": 35
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 355,
        "lineEnd": 356,
        "columnStart": 4,
        "columnEnd": 1
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 367,
        "lineEnd": 367,
        "columnStart": 4,
        "columnEnd": 52
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 31,
        "lineEnd": 31,
        "columnStart": 4,
        "columnEnd": 67
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 66,
        "lineEnd": 67,
        "columnStart": 4,
        "columnEnd": 1
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 139,
        "lineEnd": 139,
        "columnStart": 4,
        "columnEnd": 62
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 152,
        "lineEnd": 152,
        "columnStart": 4,
        "columnEnd": 57
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 186,
        "lineEnd": 186,
        "columnStart": 3,
        "columnEnd": 56
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 346,
        "lineEnd": 346,
        "columnStart": 4,
        "columnEnd": 72
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 358,
        "lineEnd": 361,
        "columnStart": 4,
        "columnEnd": 1
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 370,
        "lineEnd": 370,
        "columnStart": 4,
        "columnEnd": 59
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 384,
        "lineEnd": 385,
        "columnStart": 4,
        "columnEnd": 1
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 396,
        "lineEnd": 396,
        "columnStart": 4,
        "columnEnd": 76
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 408,
        "lineEnd": 408,
        "columnStart": 4,
        "columnEnd": 74
      }
    }
  ],
  "repairedDockerfile": "# 基础镜像从 laradock 仓库中获取\n\nARG PHP_VERSION=${PHP_VERSION}\n\nFROM laradock/php-fpm:2.2-${PHP_VERSION}\n\nLABEL maintainer=\"Syncher <syncviip@gmail.com>\"\n\n# Set Environment Variables\nENV DEBIAN_FRONTEND noninteractive\n\n# always run apt update when start and after add new source list, then clean up at end.\nRUN apt-get update -yqq && \\\n    apt-get install --no-install-recommends -y apt-utils && \\\n    pecl channel-update pecl.php.net && rm -rf /var/lib/apt/lists/*;\n\n#\n#--------------------------------------------------------------------------\n# PHP 扩展，在 docker-comopose.yml 中设置 INSTALL_XXX = true 再 build 即可安装\n#--------------------------------------------------------------------------\n#\n\n\n###########################################################################\n# SOAP:\n###########################################################################\n\nARG INSTALL_SOAP=false\n\nRUN if [ ${INSTALL_SOAP} = true ]; then \\\n    rm /etc/apt/preferences.d/no-debian-php && \\\n    apt-get -y --no-install-recommends install libxml2-dev php-soap && \\\n    docker-php-ext-install soap \\\n; rm -rf /var/lib/apt/lists/*; fi\n\n###########################################################################\n# xDebug:\n###########################################################################\n\nARG INSTALL_XDEBUG=false\n\nRUN if [ ${INSTALL_XDEBUG} = true ]; then \\\n  # Install the xdebug extension\n  if [ $(php -r \"echo PHP_MAJOR_VERSION;\") = \"5\" ]; then \\\n    pecl install xdebug-2.5.5; \\\n  else \\\n    pecl install xdebug; \\\n  fi && \\\n  docker-php-ext-enable xdebug \\\n;fi\n\n# Copy xdebug configuration for remote debugging\nCOPY ./xdebug.ini /usr/local/etc/php/conf.d/xdebug.ini\n\nRUN sed -i \"s/xdebug.remote_autostart=0/xdebug.remote_autostart=1/\" /usr/local/etc/php/conf.d/xdebug.ini && \\\n    sed -i \"s/xdebug.remote_enable=0/xdebug.remote_enable=1/\" /usr/local/etc/php/conf.d/xdebug.ini && \\\n    sed -i \"s/xdebug.cli_color=0/xdebug.cli_color=1/\" /usr/local/etc/php/conf.d/xdebug.ini\n\n###########################################################################\n# Phpdbg:\n###########################################################################\n\nARG INSTALL_PHPDBG=false\nARG PHP_VERSION=${PHP_VERSION}\n\nRUN if [ ${INSTALL_PHPDBG} = true ]; then \\\n    apt-get install --no-install-recommends -y --force-yes php${PHP_VERSION}-phpdbg \\\n; rm -rf /var/lib/apt/lists/*; fi\n\n###########################################################################\n# Blackfire:\n###########################################################################\n\nARG INSTALL_BLACKFIRE=false\n\nRUN if [ ${INSTALL_XDEBUG} = false -a ${INSTALL_BLACKFIRE} = true ]; then \\\n    version=$(php -r \"echo PHP_MAJOR_VERSION.PHP_MINOR_VERSION;\") \\\n    && curl -f -A \"Docker\" -o /tmp/blackfire-probe.tar.gz -D - -L -s https://blackfire.io/api/v1/releases/probe/php/linux/amd64/$version \\\n    && tar zxpf /tmp/blackfire-probe.tar.gz -C /tmp \\\n    && mv /tmp/blackfire-*.so $(php -r \"echo ini_get('extension_dir');\")/blackfire.so \\\n    && printf \"extension=blackfire.so\\nblackfire.agent_socket=tcp://blackfire:8707\\n\" > $PHP_INI_DIR/conf.d/blackfire.ini \\\n; rm /tmp/blackfire-probe.tar.gzfi\n\n###########################################################################\n# PHP REDIS EXTENSION\n###########################################################################\n\nARG INSTALL_PHPREDIS=false\n\nRUN if [ ${INSTALL_PHPREDIS} = true ]; then \\\n    # Install Php Redis Extension\n    printf \"\\n\" | pecl install -o -f redis \\\n    &&  rm -rf /tmp/pear \\\n    &&  docker-php-ext-enable redis \\\n;fi\n\n###########################################################################\n# Swoole EXTENSION\n###########################################################################\n\nARG INSTALL_SWOOLE=false\n\nRUN if [ ${INSTALL_SWOOLE} = true ]; then \\\n    # Install Php Swoole Extension\n    if [ $(php -r \"echo PHP_MAJOR_VERSION;\") = \"5\" ]; then \\\n      pecl install swoole-2.0.11; \\\n    else \\\n      if [ $(php -r \"echo PHP_MINOR_VERSION;\") = \"0\" ]; then \\\n        pecl install swoole-2.2.0; \\\n      else \\\n        pecl install swoole; \\\n      fi \\\n    fi && \\\n    docker-php-ext-enable swoole \\\n;fi\n\n###########################################################################\n# MongoDB:\n###########################################################################\n\nARG INSTALL_MONGO=false\n\nRUN if [ ${INSTALL_MONGO} = true ]; then \\\n    # Install the mongodb extension\n    if [ $(php -r \"echo PHP_MAJOR_VERSION;\") = \"5\" ]; then \\\n      pecl install mongo && \\\n      docker-php-ext-enable mongo \\\n    ;fi && \\\n    pecl install mongodb && \\\n    docker-php-ext-enable mongodb \\\n;fi\n\n###########################################################################\n# AMQP:\n###########################################################################\n\nARG INSTALL_AMQP=false\n\nRUN if [ ${INSTALL_AMQP} = true ]; then \\\n    apt-get install --no-install-recommends librabbitmq-dev -y && \\\n    # Install the amqp extension\n    pecl install amqp && \\\n    docker-php-ext-enable amqp \\\n; rm -rf /var/lib/apt/lists/*; fi\n\n###########################################################################\n# ZipArchive:\n###########################################################################\n\nARG INSTALL_ZIP_ARCHIVE=false\n\nRUN if [ ${INSTALL_ZIP_ARCHIVE} = true ]; then \\\n    apt-get install --no-install-recommends libzip-dev -y && \\\n    docker-php-ext-configure zip --with-libzip && \\\n    # Install the zip extension\n    docker-php-ext-install zip \\\n; rm -rf /var/lib/apt/lists/*; fi\n\n###########################################################################\n# pcntl\n###########################################################################\n\nARG INSTALL_PCNTL=false\nRUN if [ ${INSTALL_PCNTL} = true ]; then \\\n    # Installs pcntl, helpful for running Horizon\n    docker-php-ext-install pcntl \\\n;fi\n\n###########################################################################\n# bcmath:\n###########################################################################\n\nARG INSTALL_BCMATH=false\n\nRUN if [ ${INSTALL_BCMATH} = true ]; then \\\n    # Install the bcmath extension\n    docker-php-ext-install bcmath \\\n;fi\n\n###########################################################################\n# GMP (GNU Multiple Precision):\n###########################################################################\n\nARG INSTALL_GMP=false\n\nRUN if [ ${INSTALL_GMP} = true ]; then \\\n\t\t\tapt-get install --no-install-recommends -y libgmp-dev && \\\n    if [ $(php -r \"echo PHP_MAJOR_VERSION;\") = \"5\" ]; then \\\n      ln -s /usr/include/x86_64-linux-gnu/gmp.h /usr/include/gmp.h \\\n    ;fi && \\\n    docker-php-ext-install gmp \\\n; rm -rf /var/lib/apt/lists/*; fi\n\n###########################################################################\n# PHP Memcached:\n###########################################################################\n\nARG INSTALL_MEMCACHED=false\n\nRUN if [ ${INSTALL_MEMCACHED} = true ]; then \\\n    if [ $(php -r \"echo PHP_MAJOR_VERSION;\") = \"5\" ]; then \\\n      curl -f -L -o /tmp/memcached.tar.gz \"https://github.com/php-memcached-dev/php-memcached/archive/2.2.0.tar.gz\"; \\\n    else \\\n      curl -f -L -o /tmp/memcached.tar.gz \"https://github.com/php-memcached-dev/php-memcached/archive/php7.tar.gz\"; \\\n    fi \\\n    && mkdir -p memcached \\\n    && tar -C memcached -zxvf /tmp/memcached.tar.gz --strip 1 \\\n    && ( cd memcached \\\n        && phpize \\\n        && ./configure --build=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\" \\\n        && make -j$(nproc) \\\n        && make install) \\\n\n    && rm -r memcached \\\n    && rm /tmp/memcached.tar.gz \\\n    && docker-php-ext-enable memcached \\\n; else \\\n      curl -f -L -o /tmp/memcached.tar.gz \"https://github.com/php-memcached-dev/php-memcached/archive/php7.tar.gz\"; \\\n    fi \\\n\n\n\n\n\n\n\n\n\n\n\n\nfi\n\n###########################################################################\n# Exif:\n###########################################################################\n\nARG INSTALL_EXIF=false\n\nRUN if [ ${INSTALL_EXIF} = true ]; then \\\n    # Enable Exif PHP extentions requirements\n    docker-php-ext-install exif \\\n;fi\n\n###########################################################################\n# PHP Aerospike:\n###########################################################################\n\nUSER root\n\nARG INSTALL_AEROSPIKE=false\nARG AEROSPIKE_PHP_REPOSITORY\n\nRUN if [ ${INSTALL_AEROSPIKE} = true ]; then \\\n    apt-get -y --no-install-recommends install sudo wget && \\\n    # Install the php aerospike extension\n    if [ $(php -r \"echo PHP_MAJOR_VERSION;\") = \"5\" ]; then \\\n      curl -f -L -o /tmp/aerospike-client-php.tar.gz https://github.com/aerospike/aerospike-client-php5/archive/master.tar.gz; \\\n    else \\\n      curl -f -L -o /tmp/aerospike-client-php.tar.gz ${AEROSPIKE_PHP_REPOSITORY}; \\\n    fi \\\n    && mkdir -p aerospike-client-php \\\n    && tar -C aerospike-client-php -zxvf /tmp/aerospike-client-php.tar.gz --strip 1 \\\n    && \\\n    if [ $(php -r \"echo PHP_MAJOR_VERSION;\") = \"5\" ]; then \\\n      ( \\\n          cd aerospike-client-php/src/aerospike \\\n          && phpize \\\n          && ./build.sh \\\n          && make install \\\n      ) \\\n    else \\\n      ( \\\n          cd aerospike-client-php/src \\\n          && phpize \\\n          && ./build.sh \\\n          && make install \\\n      ) \\\n    fi \\\n    && rm /tmp/aerospike-client-php.tar.gz \\\n    && docker-php-ext-enable aerospike \\\n; rm -rf /var/lib/apt/lists/*; else \\\n      curl -f -L -o /tmp/aerospike-client-php.tar.gz ${AEROSPIKE_PHP_REPOSITORY}; \\\n    fi \\\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfi\n\n###########################################################################\n# Opcache:\n###########################################################################\n\nARG INSTALL_OPCACHE=false\n\nRUN if [ ${INSTALL_OPCACHE} = true ]; then \\\n    docker-php-ext-install opcache \\\n;fi\n\n# Copy opcache configration\nCOPY ./opcache.ini /usr/local/etc/php/conf.d/opcache.ini\n\n###########################################################################\n# Mysqli Modifications:\n###########################################################################\n\nARG INSTALL_MYSQLI=false\n\nRUN if [ ${INSTALL_MYSQLI} = true ]; then \\\n    docker-php-ext-install mysqli \\\n;fi\n\n###########################################################################\n# Tokenizer Modifications:\n###########################################################################\n\nARG INSTALL_TOKENIZER=false\n\nRUN if [ ${INSTALL_TOKENIZER} = true ]; then \\\n    docker-php-ext-install tokenizer \\\n;fi\n\n###########################################################################\n# Human Language and Character Encoding Support:\n###########################################################################\n\nARG INSTALL_INTL=false\n\nRUN if [ ${INSTALL_INTL} = true ]; then \\\n    apt-get install --no-install-recommends -y zlib1g-dev libicu-dev g++ && \\\n    docker-php-ext-configure intl && \\\n    docker-php-ext-install intl \\\n; rm -rf /var/lib/apt/lists/*; fi\n\n###########################################################################\n# GHOSTSCRIPT:\n###########################################################################\n\nARG INSTALL_GHOSTSCRIPT=false\n\nRUN if [ ${INSTALL_GHOSTSCRIPT} = true ]; then \\\n    apt-get install --no-install-recommends -y \\\n    poppler-utils \\\n    ghostscript \\\n; rm -rf /var/lib/apt/lists/*; fi\n\n###########################################################################\n# LDAP:\n###########################################################################\n\nARG INSTALL_LDAP=false\n\nRUN if [ ${INSTALL_LDAP} = true ]; then \\\n    apt-get install --no-install-recommends -y libldap2-dev && \\\n    docker-php-ext-configure ldap --with-libdir=lib/x86_64-linux-gnu/ && \\\n    docker-php-ext-install ldap \\\n; rm -rf /var/lib/apt/lists/*; fi\n\n###########################################################################\n# Image optimizers:\n###########################################################################\n\nUSER root\n\nARG INSTALL_IMAGE_OPTIMIZERS=false\n\nRUN if [ ${INSTALL_IMAGE_OPTIMIZERS} = true ]; then \\\n    apt-get install --no-install-recommends -y jpegoptim optipng pngquant gifsicle \\\n; rm -rf /var/lib/apt/lists/*; fi\n\n###########################################################################\n# ImageMagick:\n###########################################################################\n\nUSER root\n\nARG INSTALL_IMAGEMAGICK=false\n\nRUN if [ ${INSTALL_IMAGEMAGICK} = true ]; then \\\n    apt-get install --no-install-recommends -y libmagickwand-dev imagemagick && \\\n    pecl install imagick && \\\n    docker-php-ext-enable imagick \\\n; rm -rf /var/lib/apt/lists/*; fi\n\n###########################################################################\n# IMAP:\n###########################################################################\n\nARG INSTALL_IMAP=false\n\nRUN if [ ${INSTALL_IMAP} = true ]; then \\\n    apt-get install --no-install-recommends -y libc-client-dev libkrb5-dev && \\\n    rm -r /var/lib/apt/lists/* && \\\n    docker-php-ext-configure imap --with-kerberos --with-imap-ssl && \\\n    docker-php-ext-install imap \\\n; fi\n\n###########################################################################\n# Check PHP version:\n###########################################################################\n\nARG PHP_VERSION=${PHP_VERSION}\n\nRUN php -v | head -n 1 | grep -q \"PHP ${PHP_VERSION}.\"\n\n#\n#--------------------------------------------------------------------------\n# Final Touch\n#--------------------------------------------------------------------------\n#\n\nCOPY ./laravel.ini /usr/local/etc/php/conf.d\nCOPY ./xlaravel.pool.conf /usr/local/etc/php-fpm.d/\n\nUSER root\n\n# Clean up\nRUN apt-get clean && \\\n    rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/* && \\\n    rm /var/log/lastlog /var/log/faillog\n\nRUN usermod -u 1000 www-data\n\nWORKDIR /var/www\n\nCMD [\"php-fpm\"]\n\nEXPOSE 9000\n"
}