{
  "startTime": 1674241104666,
  "endTime": 1674241105041,
  "originalSmells": [
    {
      "rule": "wgetUseHttpsUrl",
      "position": {
        "lineStart": 103,
        "lineEnd": 103,
        "columnStart": 4,
        "columnEnd": 58
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 52,
        "lineEnd": 52,
        "columnStart": 4,
        "columnEnd": 39
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 56,
        "lineEnd": 56,
        "columnStart": 4,
        "columnEnd": 23
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 120,
        "lineEnd": 120,
        "columnStart": 9,
        "columnEnd": 25
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 129,
        "lineEnd": 129,
        "columnStart": 9,
        "columnEnd": 27
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 132,
        "lineEnd": 132,
        "columnStart": 9,
        "columnEnd": 26
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 138,
        "lineEnd": 138,
        "columnStart": 26,
        "columnEnd": 42
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 17,
        "lineEnd": 34,
        "columnStart": 7,
        "columnEnd": 7
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 93,
        "lineEnd": 94,
        "columnStart": 22,
        "columnEnd": 32
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 106,
        "lineEnd": 106,
        "columnStart": 9,
        "columnEnd": 50
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 112,
        "lineEnd": 112,
        "columnStart": 4,
        "columnEnd": 43
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 113,
        "lineEnd": 113,
        "columnStart": 4,
        "columnEnd": 55
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 121,
        "lineEnd": 121,
        "columnStart": 9,
        "columnEnd": 36
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 124,
        "lineEnd": 124,
        "columnStart": 9,
        "columnEnd": 42
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 106,
        "lineEnd": 106,
        "columnStart": 9,
        "columnEnd": 50
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 112,
        "lineEnd": 112,
        "columnStart": 4,
        "columnEnd": 43
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 113,
        "lineEnd": 113,
        "columnStart": 4,
        "columnEnd": 55
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 121,
        "lineEnd": 121,
        "columnStart": 9,
        "columnEnd": 36
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 124,
        "lineEnd": 124,
        "columnStart": 9,
        "columnEnd": 42
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 106,
        "lineEnd": 106,
        "columnStart": 9,
        "columnEnd": 50
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 112,
        "lineEnd": 112,
        "columnStart": 4,
        "columnEnd": 43
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 113,
        "lineEnd": 113,
        "columnStart": 4,
        "columnEnd": 55
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 121,
        "lineEnd": 121,
        "columnStart": 9,
        "columnEnd": 36
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 124,
        "lineEnd": 124,
        "columnStart": 9,
        "columnEnd": 42
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 106,
        "lineEnd": 106,
        "columnStart": 9,
        "columnEnd": 74
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 112,
        "lineEnd": 112,
        "columnStart": 4,
        "columnEnd": 67
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 113,
        "lineEnd": 113,
        "columnStart": 4,
        "columnEnd": 79
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 121,
        "lineEnd": 121,
        "columnStart": 9,
        "columnEnd": 60
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 124,
        "lineEnd": 124,
        "columnStart": 9,
        "columnEnd": 66
      }
    }
  ],
  "repairedDockerfile": "# A Dockerfile for the gym-gazebo environment\n#   based in ubuntu 14.04 and Python 2.7\n\n# Currently fails at:\n#\n#  E: Version '1.1.4-0*' for 'ros-indigo-ros-core' was not found\n#  The command '/bin/sh -c apt-get update && apt-get install -y     ros-indigo-ros-core=1.1.4-0*\n#  && rm -rf /var/lib/apt/lists/*' returned a non-zero code: 100\n\nFROM ubuntu:14.04\n\n#--------------------\n# General setup\n#--------------------\n\n# Get the dependencies\nRUN apt-get update \\\n    && apt-get install --no-install-recommends -y xorg-dev \\\n    libgl1-mesa-dev \\\n    xvfb \\\n    libxinerama1 \\\n    libxcursor1 \\\n    unzip \\\n    libglu1-mesa \\\n    libav-tools \\\n    python-numpy \\\n    python-scipy \\\n    python-pyglet \\\n    python-setuptools \\\n    libpq-dev \\\n    libjpeg-dev \\\n    wget \\\n    curl \\\n    cmake \\\n    git \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/* \\\n && easy_install pip\n\nWORKDIR /usr/local/gym\n\n# Copy the code\nRUN mkdir gym-gazebo\nCOPY . /usr/local/gym/gym-gazebo\n\n#--------------------\n# Install gym\n#--------------------\n# Clone the official gym\nRUN git clone https://github.com/openai/gym\n\n# Install the gym's requirements\nRUN pip install --no-cache-dir -r gym/requirements.txt\n\n# Install the gym\nRUN ls -l\nRUN pip install --no-cache-dir -e gym/\n\n# Checks\n#RUN python --version\n#RUN python -c \"import gym\"\n\n# Debug\n#RUN ls -l /usr/local/gym\n#RUN ls -l /usr/local/gym/gym-gazebo\n#RUN ls -l /usr/local/gym/gym\n\n#--------------------\n# Install ROS\n#--------------------\n# setup environment\nRUN locale-gen en_US.UTF-8\nENV LANG en_US.UTF-8\n\n# setup keys\nRUN apt-key adv --keyserver ha.pool.sks-keyservers.net --recv-keys 421C365BD9FF1F717815A3895523BAEEB01FA116\n\n# setup sources.list\nRUN echo \"deb http://packages.ros.org/ros/ubuntu trusty main\" > /etc/apt/sources.list.d/ros-latest.list\n\n# install bootstrap tools\nRUN apt-get update && apt-get install --no-install-recommends -y \\\n    python-rosdep \\\n    python-rosinstall \\\n    python-vcstools \\\n    && rm -rf /var/lib/apt/lists/*\n\n# bootstrap rosdep\nRUN rosdep init \\\n    && rosdep update\n\n# install ros packages\nENV ROS_DISTRO indigo\nRUN apt-get update && apt-get install --no-install-recommends -y \\\n    ros-indigo-ros-core=1.1.4-0* \\\n    && rm -rf /var/lib/apt/lists/*\n#    ros-indigo-desktop-full\n\n#--------------------\n# Install Gazebo\n#--------------------\nRUN sudo sh -c 'echo \"deb http://packages.osrfoundation.org/gazebo/ubuntu-stable `lsb_release -cs` main\" > /etc/apt/sources.list.d/gazebo-stable.list'\n\nRUN wget https://packages.osrfoundation.org/gazebo.key -O - | sudo apt-key add -\n\nRUN sudo apt-get update\nRUN sudo apt-get install --no-install-recommends gazebo7 libgazebo7-dev -y && rm -rf /var/lib/apt/lists/*;\n\n# setup environment\nEXPOSE 11345\n\n# Install additional dependencies\nRUN apt-get install --no-install-recommends -y ros-indigo-cv-bridge && rm -rf /var/lib/apt/lists/*;\nRUN apt-get install --no-install-recommends -y ros-indigo-robot-state-publisher && rm -rf /var/lib/apt/lists/*;\n\n\n#--------------------\n# Install deep learning toolkits\n#--------------------\n# install dependencies\nRUN sudo pip install --no-cache-dir h5py\nRUN sudo apt-get install --no-install-recommends gfortran -y && rm -rf /var/lib/apt/lists/*;\n\n# install sript specific dependencies (temporal)\nRUN sudo apt-get install --no-install-recommends python-skimage -y && rm -rf /var/lib/apt/lists/*;\n\n# install Theano\n#RUN git clone git://github.com/Theano/Theano.git\n#RUN cd Theano/ && sudo python setup.py develop\nRUN sudo pip install --no-cache-dir Theano\n\n# install Keras\nRUN sudo pip install --no-cache-dir keras\n\n#--------------------\n# Install gym-gazebo\n#--------------------\n\nRUN cd gym-gazebo && sudo pip install --no-cache-dir -e .\n\n# install dependencies\nRUN cd /usr/local/gym/gym-gazebo/gym_gazebo/envs/installation && bash setup.bash\n\n#WORKDIR /root\n#ENTRYPOINT [\"/usr/local/gym/bin/docker_entrypoint\"]\n\n# setup entrypoint\n#RUN ls /usr/local/gym/gym-gazebo/\n#RUN ls ./gym-gazebo\n#COPY /usr/local/gym/gym-gazebo/entrypoint.sh /\n\n#--------------------\n# Entry point\n#--------------------\n\nCOPY entrypoint.sh /\n\nENTRYPOINT [\"/entrypoint.sh\"]\nCMD [\"bash\"]\n"
}