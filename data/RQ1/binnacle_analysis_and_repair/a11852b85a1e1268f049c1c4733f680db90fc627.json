{
  "startTime": 1674246351749,
  "endTime": 1674246351891,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 8,
        "lineEnd": 8,
        "columnStart": 4,
        "columnEnd": 49
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 5,
        "lineEnd": 5,
        "columnStart": 72,
        "columnEnd": 95
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 11,
        "lineEnd": 14,
        "columnStart": 25,
        "columnEnd": 74
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 5,
        "lineEnd": 5,
        "columnStart": 72,
        "columnEnd": 95
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 11,
        "lineEnd": 14,
        "columnStart": 25,
        "columnEnd": 74
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "# Based on https://github.com/danielguerra69/docker-moloch\n\nFROM ubuntu:16.04\n\n# Install curl\nRUN apt-get update -y && apt-get upgrade -y && apt-get autoremove -y && apt-get install --no-install-recommends -y curl && rm -rf /var/lib/apt/lists/*;\n\n# Set the right npm repository for nodejs\nRUN curl -f -sL https://deb.nodesource.com/setup_6.x | bash -\n\n# Update the repo\nRUN apt-get update -y && apt-get install --no-install-recommends -y wget curl git sudo libyaml-dev xz-utils gcc pkg-config g++ flex bison \\\n                         zlib1g-dev libffi-dev gettext libpcre3-dev uuid-dev libmagic-dev \\\n                         libgeoip-dev make libjson-perl libbz2-dev libwww-perl libpng-dev yara \\\n                         libpcap-dev nodejs phantomjs vim net-tools python && rm -rf /var/lib/apt/lists/*;\n\n# Add scripts\nADD scripts/buildmoloch.sh /data/\nRUN chmod 755 /data/buildmoloch.sh\n\n# Start building Moloch\nRUN /data/buildmoloch.sh /data/moloch-git\n\n# symlink nodejs\nRUN ln -s /usr/bin/nodejs /data/moloch/bin/node\n\n\nADD scripts/startmoloch.sh /data/\nADD scripts/upload-pcap.sh /data/\nADD /etc /data/moloch/etc\nRUN chmod 755 /data/*.sh\n\nVOLUME [\"/data/moloch/logs\",\"/data/moloch/data\",\"/data/moloch/raw\",\"/data/pcap\"]\n\nEXPOSE 8080\n\nCMD /data/startmoloch.sh\n"
}