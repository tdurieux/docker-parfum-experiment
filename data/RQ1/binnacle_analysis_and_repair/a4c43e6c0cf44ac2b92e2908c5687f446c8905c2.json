{
  "startTime": 1674641765106,
  "endTime": 1674641765140,
  "originalSmells": [
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 52,
        "lineEnd": 52,
        "columnStart": 4,
        "columnEnd": 21
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM microsoft/windowsservercore:1709 AS base\n\nARG CLI_VERSION\n\n# Metadata as defined at http://label-schema.org\nARG BUILD_DATE\nLABEL maintainer=\"Microsoft\" \\\n      org.label-schema.schema-version=\"1.0\" \\\n      org.label-schema.vendor=\"Microsoft\" \\\n      org.label-schema.name=\"Azure CLI 2.0\" \\\n      org.label-schema.version=$CLI_VERSION \\\n      org.label-schema.license=\"MIT\" \\\n      org.label-schema.description=\"The Azure CLI 2.0 is the new Azure CLI and is applicable when you use the Resource Manager deployment model.\" \\\n      org.label-schema.url=\"https://docs.microsoft.com/en-us/cli/azure/overview\" \\\n      org.label-schema.usage=\"https://docs.microsoft.com/en-us/cli/azure/install-az-cli2#docker\" \\\n      org.label-schema.build-date=$BUILD_DATE \\\n      org.label-schema.vcs-url=\"https://github.com/Azure/azure-cli.git\" \\\n      org.label-schema.docker.cmd=\"docker run -v $HOME\\.azure:C:\\Users\\ContainerUser\\.azure -it microsoft/azure-cli:$CLI_VERSION\"\n\nSHELL [\"powershell\", \"-Command\", \"$ErrorActionPreference = 'Stop'; $ProgressPreference = 'SilentlyContinue';\"]\n\nENV PYTHON_VERSION 3.6.5\nENV PYTHON_HASH 9e96c934f5d16399f860812b4ac7002b\nENV DESTINATION_FOLDER C:\\\\tools\n\nRUN $python_url = ('https://www.python.org/ftp/python/{0}/python-{0}-amd64.exe' -f $env:PYTHON_VERSION); \\\n    Write-Host ('Downloading {0}...' -f $python_url); \\\n    mkdir tmp > $null; \\\n    [Net.ServicePointManager]::SecurityProtocol = [Net.SecurityProtocolType]::Tls12; \\\n    (New-Object System.Net.WebClient).DownloadFile($python_url, 'c:\\tmp\\python-installer.exe'); \\\n    Write-Host ('Checking hash...' -f $python_url); \\\n    if ((Get-FileHash c:\\tmp\\python-installer.exe -Algorithm md5).Hash -ne $env:PYTHON_HASH) { Write-Host 'Python installer checksum verification failed!'; exit 1; }; \\\n    $install_folder = Join-Path -Path $env:DESTINATION_FOLDER -ChildPath 'python'; \\\n    Write-Host ('Installing into {0}...' -f $install_folder); \\\n    Start-Process c:\\tmp\\python-installer.exe -Wait -ArgumentList @('/quiet', 'InstallAllUsers=1', 'TargetDir={0}' -f $install_folder, 'PrependPath=1', 'Shortcuts=0', 'Include_doc=0','Include_pip=1', 'Include_test=0'); \\\n    Remove-Item tmp -Recurse -Force;\n\nFROM microsoft/powershell:6.0.2-nanoserver\n\nCOPY --from=base [\"tools\", \"tools\"]\n\nUSER ContainerAdministrator\n\nRUN setx /M PATH %PATH%;c:\\tools\\python\\;c:\\tools\\python\\Scripts\\;\n\nCOPY . /azure-cli\n\nWORKDIR azure-cli\n\nUSER ContainerUser\n\nRUN python -m pip install --upgrade pip\nRUN pip install --no-cache-dir wheel\n\nSHELL [\"pwsh.exe\", \"-Command\", \"$ErrorActionPreference = 'Stop'; $ProgressPreference = 'SilentlyContinue';\"]\n\nRUN $folder = @('src\\\\azure-cli','src\\\\azure-cli-core','src\\\\azure-cli-nspkg','src\\\\azure-cli-command_modules-nspkg'); \\\nforeach($i in Get-ChildItem 'src\\\\command_modules\\\\azure-cli-*\\\\') \\\n{ \\\n    $folder += Join-Path 'src\\\\command_modules\\\\' $i.Name \\\n} \\\n$wheels = Join-Path $pwd 'wheels'; \\\nWrite-Host 'Building python packages...'; \\\nforeach($f in $folder) \\\n{ \\\n    try { \\\n        Push-Location $f; \\\n        & python.exe setup.py bdist_wheel -d $wheels; \\\n    } \\\n    finally { \\\n        Pop-Location \\\n    } \\\n}\\ \nWrite-Host 'Installing python packages...'; \\\nPush-Location $wheels; \\\n$modules = (Get-ChildItem *.whl -Name); \\\nforeach($m in $modules) \\\n{ \\\n    & pip install --no-cache-dir $m; \\\n}\\\n& pip install --no-cache-dir --force-reinstall --upgrade azure-nspkg azure-mgmt-nspkg; \\\nPop-Location; \\\nWrite-Host 'Done';\n\nWORKDIR /\n\nCMD pwsh.exe\n"
}