{
  "startTime": 1674250691639,
  "endTime": 1674250691770,
  "originalSmells": [
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 5,
        "lineEnd": 7,
        "columnStart": 23,
        "columnEnd": 14
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 5,
        "lineEnd": 7,
        "columnStart": 23,
        "columnEnd": 14
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM tutum/lamp:latest\n\t# Clear the appdir\n\tRUN rm -fr /app\n\n\t# We'll need memcached and the php5 extension\n\tRUN apt-get update && apt-get install --no-install-recommends -y \\\n\t\t\t\t\tphp5-memcache \\\n\t\t\t\t\tmemcached \\\n\t\t\t\t\t&& rm -rf /var/lib/apt/list/* && rm -rf /var/lib/apt/lists/*;\n\tRUN service apache2 restart\n\n\t# Get composer\n\tRUN php -r \"copy('https://getcomposer.org/installer', 'composer-setup.php');\"\n\tRUN php composer-setup.php --install-dir=/bin --filename=composer\n\tRUN php -r \"unlink('composer-setup.php');\"\n\n\n\t# Get Yii via Composer and configure permissions\n\tWORKDIR /usr/local/yii\n\tRUN php /bin/composer require yiisoft/yii=1.1.15\n\tRUN php /bin/composer install --working-dir=/usr/local/yii\n\tRUN cp -R /usr/local/yii/vendor/yiisoft/yii/* /usr/local/yii\n\tRUN rm -rf /usr/local/vendor\n\n\n\t# Move the app over\n\tCOPY ./application /app/application\n\tCOPY ./public /app/public\n\tCOPY ./mysql-setup.sh /\n\tCOPY ./samplegitdb.sql /\n    COPY ./memcached.conf /etc/memcached.conf\n\tRUN rm -f /var/www/html && ln -s /app/public /var/www/html\n\n\t# Configure proper permissions to directory && yii\n    RUN ln -s /usr/local/yii/vendor /app/vendor\n\tRUN chown -R www-data:www-data /app /usr/local/yii\n\tRUN chmod -R 755 /app\n\n\t# Expose the ports for http\n\tEXPOSE 80\nCMD [\"/run.sh\"]\n"
}