{
  "startTime": 1674244607852,
  "endTime": 1674244607973,
  "originalSmells": [
    {
      "rule": "aptGetInstallUseY",
      "position": {
        "lineStart": 4,
        "lineEnd": 4,
        "columnStart": 22,
        "columnEnd": 48
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 4,
        "lineEnd": 4,
        "columnStart": 22,
        "columnEnd": 48
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 4,
        "lineEnd": 4,
        "columnStart": 22,
        "columnEnd": 48
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "# SPDX-License-Identifier: Apache-2.0\n# Copyright Contributors to the Egeria project.\n\nFROM maven:3.6.0-jdk-8 AS build\nRUN apt-get update && apt-get install -y --no-install-recommends git-extras && rm -rf /var/lib/apt/lists/*;\nARG branch\nARG pr\nENV branch ${branch:-master}\nWORKDIR /root/\nRUN git clone http://github.com/odpi/egeria.git -b ${branch}\nWORKDIR /root/egeria/\n# Add Pull request if specified (requires git-extras package)\nRUN if [ ! -z \"$pr\" ] ; then git pr $pr ; fi\nRUN mvn clean install -DskipTests\nRUN git log > git.log && echo ${branch} > git.branch && git remote -v >> git.remote\n\nFROM openjdk:8-jre-alpine\n\nLABEL org.label-schema.schema-version = \"1.0\"\nLABEL org.label-schema.vendor = \"ODPi\"\nLABEL org.label-schema.name = \"egeria\"\nLABEL org.label-schema.description = \"Common image for core ODPi Egeria runtimes: OMAG Server Platform (chassis) and UI.\"\nLABEL org.label-schema.url = \"https://egeria.odpi.org/open-metadata-resources/open-metadata-deployment/\"\nLABEL org.label-schema.vcs-url = \"https://github.com/odpi/egeria/tree/master/open-metadata-resources/open-metadata-deployment/docker/egeria\"\nLABEL org.label-schema.docker.cmd = \"docker run -d -p 8080:8080 odpi/egeria\"\nLABEL org.label-schema.docker.cmd.devel = \"docker run -d -p 8080:8080 -p 5005:5005 -e JAVA_DEBUG=true odpi/egeria\"\nLABEL org.label-schema.docker.debug = \"docker exec -it $CONTAINER /bin/sh\"\nLABEL org.label-schema.docker.params = \"JAVA_DEBUG=set to true to enable JVM debugging\"\n\nRUN apk --no-cache add bash shadow && apk --no-cache update && apk --no-cache upgrade\n\nRUN groupadd -r egeria -g 1000 && useradd --no-log-init -r -g egeria -u 1000 -d /opt/egeria egeria\n\nCOPY --from=build --chown=egeria:egeria /root/egeria/open-metadata-implementation/server-chassis/server-chassis-spring/target/server-chassis-spring-*.jar /opt/egeria/server-chassis-spring.jar\nCOPY --from=build --chown=egeria:egeria /root/egeria/open-metadata-implementation/user-interfaces/access-services-user-interface/target/access-services-user-interface-*.jar /opt/egeria/access-services-user-interface.jar\nCOPY --from=build --chown=egeria:egeria /root/egeria/git.* /opt/egeria/details/\nCOPY --chown=egeria:egeria dist/entrypoint.sh /entrypoint.sh\n\n# Expose port 8080 (default) for client access, and allow for 5005 being used for remote java debug\nEXPOSE 8080 5005\n\nWORKDIR /opt/egeria\nUSER egeria:egeria\n\nCMD java -jar /opt/egeria/server-chassis-spring.jar\nENTRYPOINT [\"/entrypoint.sh\"]\n"
}