{
  "startTime": 1674245678371,
  "endTime": 1674245678543,
  "originalSmells": [
    {
      "rule": "mkdirUsrSrcThenRemove",
      "position": {
        "lineStart": 60,
        "lineEnd": 60,
        "columnStart": 1,
        "columnEnd": 28
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM php:7.1-apache\n\nLABEL maintainer=\"Monogramm Maintainers <opensource at monogramm dot io>\"\n\n# Build time env var\nENV DOLI_VERSION=9.0.3\n\n# Get Dolibarr\nADD https://github.com/Dolibarr/dolibarr/archive/${DOLI_VERSION}.zip /tmp/dolibarr.zip\n\n# Install the packages we need\n# Install the PHP extensions we need\n# see https://wiki.dolibarr.org/index.php/Dependencies_and_external_libraries\n# Prepare folders\n# Install Dolibarr from tag archive\nRUN set -ex; \\\n\tapt-get update -q; \\\n\tapt-get install -y --no-install-recommends \\\n\t\tmysql-client \\\n\t\trsync \\\n\t\tsendmail \\\n\t; \\\n\tapt-get install -y --no-install-recommends \\\n\t\tlibcurl4-openssl-dev \\\n\t\tlibfreetype6-dev \\\n\t\tlibjpeg-dev \\\n\t\tlibldap2-dev \\\n\t\tlibmagickcore-dev \\\n\t\tlibmagickwand-dev \\\n\t\tlibmcrypt-dev \\\n\t\tlibpng-dev \\\n\t\tlibpq-dev \\\n\t\tlibxml2-dev \\\n\t\tunzip \\\n\t; \\\n\trm -rf /var/lib/apt/lists/*; \\\n\tdebMultiarch=\"$(dpkg-architecture --query DEB_BUILD_MULTIARCH)\"; \\\n\tdocker-php-ext-configure ldap --with-libdir=\"lib/$debMultiarch\"; \\\n\tdocker-php-ext-configure gd --with-freetype-dir=/usr --with-png-dir=/usr --with-jpeg-dir=/usr; \\\n\tdocker-php-ext-install \\\n\t\tcalendar \\\n\t\tgd \\\n\t\tldap \\\n\t\tmbstring \\\n\t\tmysqli \\\n\t\tpdo \\\n\t\tpdo_mysql \\\n\t\tpdo_pgsql \\\n\t\tpgsql \\\n\t\tsoap \\\n\t\tzip \\\n\t; \\\n    pecl install imagick; \\\n    docker-php-ext-enable imagick; \\\n    mkdir -p /var/www/documents; \\\n    chown -R www-data:root /var/www; \\\n    chmod -R g=u /var/www; \\\n    mkdir -p /tmp/dolibarr; \\\n\tunzip -q /tmp/dolibarr.zip -d /tmp/dolibarr; \\\n\trm /tmp/dolibarr.zip; \\\n\tmkdir -p /usr/src/dolibarr; rm -rf /usr/src/dolibarr \\\n\tcp -r /tmp/dolibarr/dolibarr-${DOLI_VERSION}/* /usr/src/dolibarr; \\\n\trm -rf /tmp/dolibarr; \\\n\tchmod +x /usr/src/dolibarr/scripts/*\n\n# Runtime env var\nENV DOLI_AUTO_CONFIGURE=1 \\\n\tDOLI_DB_TYPE=mysqli \\\n\tDOLI_DB_HOST= \\\n\tDOLI_DB_PORT=3306 \\\n\tDOLI_DB_USER=dolibarr \\\n\tDOLI_DB_PASSWORD='' \\\n\tDOLI_DB_NAME=dolibarr \\\n\tDOLI_DB_PREFIX=llx_ \\\n\tDOLI_DB_CHARACTER_SET=utf8 \\\n\tDOLI_DB_COLLATION=utf8_unicode_ci \\\n\tDOLI_DB_ROOT_LOGIN='' \\\n\tDOLI_DB_ROOT_PASSWORD='' \\\n\tDOLI_ADMIN_LOGIN=admin \\\n\tDOLI_MODULES='' \\\n\tDOLI_URL_ROOT='http://localhost' \\\n\tDOLI_AUTH=dolibarr \\\n\tDOLI_LDAP_HOST= \\\n\tDOLI_LDAP_PORT=389 \\\n\tDOLI_LDAP_VERSION=3 \\\n\tDOLI_LDAP_SERVERTYPE=openldap \\\n\tDOLI_LDAP_LOGIN_ATTRIBUTE=uid \\\n\tDOLI_LDAP_DN='' \\\n\tDOLI_LDAP_FILTER='' \\\n\tDOLI_LDAP_ADMIN_LOGIN='' \\\n\tDOLI_LDAP_ADMIN_PASS='' \\\n\tDOLI_LDAP_DEBUG=false \\\n\tDOLI_HTTPS=0 \\\n\tDOLI_PROD=0 \\\n\tDOLI_NO_CSRF_CHECK=0 \\\n\tWWW_USER_ID=33 \\\n\tWWW_GROUP_ID=33 \\\n\tPHP_INI_DATE_TIMEZONE='UTC' \\\n\tPHP_MEMORY_LIMIT=256M \\\n\tPHP_MAX_UPLOAD=20M \\\n\tPHP_MAX_EXECUTION_TIME=300\n\nVOLUME /var/www/html /var/www/documents /var/www/scripts\n\nCOPY entrypoint.sh /\nRUN set -ex; \\\n\tchmod 755 /entrypoint.sh\n\nENTRYPOINT [\"/entrypoint.sh\"]\nCMD [\"apache2-foreground\"]\n"
}