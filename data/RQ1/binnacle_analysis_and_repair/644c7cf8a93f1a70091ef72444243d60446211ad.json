{
  "startTime": 1674235178187,
  "endTime": 1674235178602,
  "originalSmells": [
    {
      "rule": "wgetUseHttpsUrl",
      "position": {
        "lineStart": 61,
        "lineEnd": 61,
        "columnStart": 4,
        "columnEnd": 159
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 44,
        "lineEnd": 44,
        "columnStart": 4,
        "columnEnd": 34
      }
    },
    {
      "rule": "configureShouldUseBuildFlag",
      "position": {
        "lineStart": 64,
        "lineEnd": 64,
        "columnStart": 4,
        "columnEnd": 15
      }
    },
    {
      "rule": "configureShouldUseBuildFlag",
      "position": {
        "lineStart": 103,
        "lineEnd": 103,
        "columnStart": 4,
        "columnEnd": 43
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 5,
        "lineEnd": 29,
        "columnStart": 22,
        "columnEnd": 9
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 40,
        "lineEnd": 42,
        "columnStart": 1,
        "columnEnd": 19
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 72,
        "lineEnd": 72,
        "columnStart": 4,
        "columnEnd": 28
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 72,
        "lineEnd": 72,
        "columnStart": 4,
        "columnEnd": 28
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 5,
        "lineEnd": 29,
        "columnStart": 22,
        "columnEnd": 9
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 40,
        "lineEnd": 42,
        "columnStart": 1,
        "columnEnd": 19
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 72,
        "lineEnd": 72,
        "columnStart": 4,
        "columnEnd": 28
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 72,
        "lineEnd": 72,
        "columnStart": 4,
        "columnEnd": 52
      }
    }
  ],
  "repairedDockerfile": "FROM rsneddon/cudapythoncpu\n#FROM kaixhin/cuda-caffe\nMAINTAINER R Sneddon <581894@bah.com>\n# install fast-rcnn's deps\n# Get dependencies\nRUN apt-get update && apt-get install --no-install-recommends -y \\\n    bc \\\n    cmake \\\n    curl \\\n    gcc-4.6 \\\n    g++-4.6 \\\n    gcc-4.6-multilib \\\n    g++-4.6-multilib \\\n    gfortran \\\n    git \\\n    libprotobuf-dev \\\n    libleveldb-dev \\\n    libsnappy-dev \\\n    libopencv-dev \\\n    libboost-all-dev \\\n    libhdf5-serial-dev \\\n    liblmdb-dev \\\n    libjpeg62 \\\n    libfreeimage-dev \\\n    libatlas-base-dev \\\n    pkgconf \\\n    protobuf-compiler \\\n    python-dev \\\n    python-pip \\\n    unzip && \\\n    apt-get clean && rm -rf /var/lib/apt/lists/*;\n\n# Use gcc 4.6\nRUN update-alternatives --install /usr/bin/cc cc /usr/bin/gcc-4.6 30 && \\\n    update-alternatives --install /usr/bin/c++ c++ /usr/bin/g++-4.6 30 && \\\n    update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-4.6 30 && \\\n    update-alternatives --install /usr/bin/g++ g++ /usr/bin/g++-4.6 30\n\n\nRUN apt-get update && \\\n\tapt-get install --no-install-recommends -y --force-yes git python-numpy cython python-pip python-skimage \\\n\tpython-protobuf python-opencv python-pandas python-yaml python-sklearn \\\n\toctave python-ipdb && rm -rf /var/lib/apt/lists/*;\n\nRUN pip install --no-cache-dir --upgrade easydict\n\n# octave is good enough for the PASCAL VOC stuff\nRUN ln -s /usr/bin/octave /usr/bin/matlab\n\n# build fast-rcnn\nRUN cd /opt && \\\n\tgit clone --recursive https://github.com/rbgirshick/fast-rcnn.git\n\nRUN\texport CPLUS_INCLUDE_PATH=/opt/anaconda2/include && \\\n\texport CPLUS_INCLUDE_PATH=$CPLUS_INCLUDE_PATH:/opt/anaconda2/include/python2.7  && \\\n\texport CPLUS_INCLUDE_PATH=$CPLUS_INCLUDE_PATH:/opt/anaconda2/lib/python2.7/site-packages/numpy/core/include\n\nADD Makefile.config /opt/fast-rcnn/caffe-fast-rcnn/Makefile.config\n\n# Install Glog and Gflags\nRUN cd /opt && \\\n    wget --quiet --no-check-certificate https://pkgs.fedoraproject.org/lookaside/pkgs/glog/glog-0.3.3.tar.gz/a6fd2c22f8996846e34c763422717c18/glog-0.3.3.tar.gz && \\\n    tar zxvf glog-0.3.3.tar.gz && \\\n    cd glog-0.3.3 && \\\n    ./configure --build=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\" && \\\n    make -j$(nproc) && \\\n    make install -j$(nproc) && \\\n    cd .. && \\\n    rm -rf glog-0.3.3.tar.gz && \\\n    ldconfig && \\\n    cd /opt\n\nRUN apt-get install --no-install-recommends -y unzip && rm -rf /var/lib/apt/lists/*;\n\nRUN    wget --no-check-certificate --quiet https://github.com/schuhschuh/gflags/archive/master.zip && \\\n    unzip master.zip && \\\n    cd gflags-master && \\\n    mkdir build && \\\n    cd build && \\\n    export CXXFLAGS=\"-fPIC\" && \\\n    cmake .. && \\\n    make VERBOSE=1 && \\\n    make  -j$(nproc) && \\\n    make install -j$(nproc) && \\\n    cd ../.. && \\\n    rm master.zip\n\n# Install python dependencies\nWORKDIR /opt\nRUN    /opt/anaconda2/bin/conda install --yes conda==3.10.1 && \\\n    conda install --yes cython && \\\n    conda install --yes opencv && \\\n    conda install --yes --channel https://conda.binstar.org/auto easydict\n\n# To remove erro when loading libreadline from anaconda\nRUN rm /opt/anaconda2/lib/libreadline* && \\\n    ldconfig\n\nWORKDIR /tmp\nRUN wget --no-check-certificate https://sourceforge.net/projects/libpng/files/libpng15/older-releases/1.5.15/libpng-1.5.15.tar.gz\nRUN tar -xvf libpng-1.5.15.tar.gz && \\\n    rm libpng-1.5.15.tar.gz\nWORKDIR /tmp/libpng-1.5.15\nRUN ./configure --build=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\" --prefix=/opt/libpng-1.5.15 && \\\n    make check -j$(nproc) && \\\n    make install -j$(nproc) && \\\n    make check -j$(nproc)\n\nRUN\tcd /opt/fast-rcnn/lib && make -j4\nRUN\tcd /opt/fast-rcnn/caffe-fast-rcnn && make -j4 && make -j4 pycaffe"
}