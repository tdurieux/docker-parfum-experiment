{
  "startTime": 1674248084772,
  "endTime": 1674248085160,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 57,
        "lineEnd": 57,
        "columnStart": 4,
        "columnEnd": 66
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 84,
        "lineEnd": 84,
        "columnStart": 4,
        "columnEnd": 80
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 51,
        "lineEnd": 51,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 81,
        "lineEnd": 81,
        "columnStart": 4,
        "columnEnd": 46
      }
    },
    {
      "rule": "configureShouldUseBuildFlag",
      "position": {
        "lineStart": 65,
        "lineEnd": 65,
        "columnStart": 27,
        "columnEnd": 38
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 58,
        "lineEnd": 58,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 5,
        "lineEnd": 48,
        "columnStart": 4,
        "columnEnd": 35
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 5,
        "lineEnd": 48,
        "columnStart": 4,
        "columnEnd": 35
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 5,
        "lineEnd": 48,
        "columnStart": 4,
        "columnEnd": 35
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 5,
        "lineEnd": 48,
        "columnStart": 4,
        "columnEnd": 35
      }
    }
  ],
  "repairedDockerfile": "FROM ubuntu:16.04\n\n# System requirements\nRUN apt-get update -y && apt-get upgrade -y\n                       # Base dependencies\nRUN apt-get install --no-install-recommends -y gcc \\\n                       g++ \\\n                       make \\\n                       curl \\\n                       unzip \\\n                       wget \\\n                       git \\\n                       pkg-config \\\n\n                       libffi-dev \\\n                       libssl-dev \\\n                       python-dev \\\n                       python3-dev \\\n                       python3-setuptools \\\n                       python3-wheel \\\n                       python3-pip \\\n\n                       libgeos-dev \\\n\n                       libboost-python1.58-dev \\\n                       libboost-filesystem1.58-dev \\\n                       libboost-program-options1.58-dev \\\n                       libboost-regex1.58-dev \\\n                       libboost-system1.58-dev \\\n                       libboost-thread1.58-dev \\\n                       libcairo-dev \\\n                       libcurl4-gnutls-dev \\\n                       libfreetype6-dev \\\n                       libharfbuzz-dev \\\n                       libicu-dev \\\n                       libjpeg-dev \\\n                       libpng-dev \\\n                       libpq-dev \\\n                       libproj-dev \\\n                       libsqlite3-dev \\\n                       libtiff-dev \\\n                       libtool \\\n                       libwebp-dev \\\n                       libxml2-dev \\\n                       zlib1g-dev \\\n                       libsqlite3-dev \\\n                       libproj-dev \\\n                       libjpeg-dev \\\n                       libtiff5-dev && rm -rf /var/lib/apt/lists/*;\n\n# Python requirements\nRUN pip3 install --no-cache-dir -U pip tox\n\n# Source for mapnik, python-mapnik & GDAL\nRUN cd /root && \\\n    git clone -b v3.0.13 --recursive https://github.com/mapnik/mapnik.git && \\\n    git clone -b v3.0.13 --recursive https://github.com/mapnik/python-mapnik.git && \\\n    curl -f -O http://download.osgeo.org/gdal/2.1.3/gdal-2.1.3.tar.gz && \\\n    tar -xzf gdal-2.1.3.tar.gz && rm gdal-2.1.3.tar.gz\n\n\n# Install GDAL\n# TODO:  configure here needs to be set up with more sophisticated\n#        options like --with-hdf4 --with-netcdf, etc. This will also\n#        require system libraries etc be installed\nRUN cd /root/gdal-2.1.3 && ./configure --build=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\" && make -j$(nproc) && make install && ldconfig\n\n# Install Mapnik\nRUN cd /root/mapnik && \\\n    JOBS=$(nproc) python scons/scons.py PYTHON=/usr/bin/python3 BOOST_PYTHON_LIB=boost_python35 && \\\n    python scons/scons.py install\n\n# Build python-mapnik wheel, make it available to tox\nRUN cd /root/python-mapnik && \\\n    python3 setup.py bdist_wheel && \\\n    mkdir -p /root/.tox/distshare && \\\n    ln -s /root/python-mapnik/dist/*.whl /root/.tox/distshare/\n\n# Install python-mapnik\n# Note: This should not be nessisary,  except setup.py\n#       won't run AT ALL if python-mapnik isn't installed\nRUN pip install --no-cache-dir /root/python-mapnik/dist/*.whl\n\n# Install nvm,  and nodejs v6\nRUN curl -f -o- https://raw.githubusercontent.com/creationix/nvm/v0.33.1/install.sh | bash \\\n    && . /root/.bashrc && nvm install v6.10.1 && ln -s /root/.nvm/versions/node/v6.10.1/bin/npm /usr/bin/npm\n\nWORKDIR /root\n\nCMD [\"/bin/bash\"]\n"
}