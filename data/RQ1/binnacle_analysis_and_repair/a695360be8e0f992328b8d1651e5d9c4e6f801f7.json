{
  "startTime": 1674242654938,
  "endTime": 1674242655283,
  "originalSmells": [
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 73,
        "lineEnd": 76,
        "columnStart": 4,
        "columnEnd": 73
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "# GPU-based system\nFROM nvidia/cuda:9.0-devel-ubuntu16.04\nMAINTAINER Kohei <i@ho.lc>\n\nENV CUDNN_VERSION 7.3.0.29\nLABEL com.nvidia.cudnn.version=\"${CUDNN_VERSION}\"\n\nRUN apt-get -y update &&\\\n    apt-get --no-install-recommends -y install \\\n        apt-utils \\\n        libcudnn7=$CUDNN_VERSION-1+cuda9.0 \\\n        libcudnn7-dev=$CUDNN_VERSION-1+cuda9.0 \\\n        &&\\\n    apt-mark hold libcudnn7 && \\\n    rm -rf /var/lib/apt/lists/*\n\nRUN apt-get -y update &&\\\n    apt-get --no-install-recommends -y install \\\n        bc \\\n        bzip2 \\\n        git \\\n        wget \\\n        unzip \\\n        libblas-dev \\\n        liblapack-dev \\\n        libpng-dev \\\n        libfreetype6-dev \\\n        pkg-config \\\n        ca-certificates \\\n        libhdf5-serial-dev \\\n        curl \\\n        &&\\\n    apt-get clean &&\\\n    rm -rf /var/lib/apt/lists/*\n\nRUN ANACONDA_URL=\"https://repo.continuum.io/archive/Anaconda3-5.2.0-Linux-x86_64.sh\" &&\\\n    ANACONDA_FILE=\"anaconda.sh\" &&\\\n    mkdir -p /opt &&\\\n    cd /opt &&\\\n    wget -q --no-check-certificate $ANACONDA_URL -O $ANACONDA_FILE &&\\\n    echo \"1046228398cf2e31e4a3b0bf0b9c9fd6282a1d7c  ${ANACONDA_FILE}\" | sha1sum -c - &&\\\n    bash $ANACONDA_FILE -b -p /opt/conda &&\\\n    rm $ANACONDA_FILE\nENV PATH \"/opt/conda/bin:$PATH\"\n\nRUN conda update conda\nRUN conda create -n sp4 python=3.6.7=h0371630_0\nENV PATH \"/opt/conda/envs/sp4/bin:$PATH\"\n\nRUN apt-get -y update &&\\\n    apt-get --no-install-recommends -y install \\\n        libxrender-dev \\\n        libxext-dev \\\n        libsm6 \\\n        &&\\\n    apt-get clean &&\\\n    rm -rf /var/lib/apt/lists/*\n\nRUN conda install -n sp4 -c pytorch \\\n\t\tpytorch=0.4.1=py36_py35_py27__9.0.176_7.1.2_2 \\\n\t\ttorchvision=0.2.1=py36_1 \\\n        click=7.0=py36_0 \\\n        tqdm=4.28.1=py36h28b3542_0 \\\n        rasterio=0.36.0=py36h3f37509_2 \\\n\t\tlibopencv=3.4.2=hb342d67_1 \\\n        opencv=3.4.2=py36h6fd60c2_1 \\\n        py-opencv=3.4.2=py36hb342d67_1 \\\n        shapely=1.6.4=py36h7ef4460_0 \\\n        geopandas==0.4.0 \\\n        scikit-image=0.14.0=py36hf484d3e_1 \\\n        attrs=18.2.0=py36h28b3542_0 \\\n        scikit-learn=0.20.1=py36hd81dba3_0\n\nRUN pip install --no-cache-dir \\\n    albumentations==0.1.2 \\\n    imgaug==0.2.6 \\\n    https://github.com/SpaceNetChallenge/utilities/archive/spacenetV3.zip\n\nRUN mkdir -p /root/.torch/models &&\\\n    ln -s /root/working/models/vgg16-397923af.pth /root/.torch/models/vgg16-397923af.pth\n\nCOPY main.py /root/\nCOPY *.sh /root/\n\n# Models\nCOPY working/cv.txt /root/working/cv.txt\nCOPY working/models/vgg16-397923af.pth /root/working/models/vgg16-397923af.pth\nCOPY working/models/v12_f0/v12_f0_best /root/working/models/v12_f0/v12_f0_best\nCOPY working/models/v12_f1/v12_f1_best /root/working/models/v12_f1/v12_f1_best\nCOPY working/models/v12_f2/v12_f2_best /root/working/models/v12_f2/v12_f2_best\n\nRUN chmod a+x /root/train.sh &&\\\n    chmod a+x /root/test.sh\nENV PATH $PATH:/root/\n\nENV LC_ALL C.UTF-8\nENV LANG C.UTF-8\n\nWORKDIR /root/\n"
}