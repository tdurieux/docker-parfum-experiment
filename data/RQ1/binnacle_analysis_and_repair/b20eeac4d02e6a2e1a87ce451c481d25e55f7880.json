{
  "startTime": 1674240478284,
  "endTime": 1674240478687,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 59,
        "lineEnd": 59,
        "columnStart": 24,
        "columnEnd": 105
      }
    },
    {
      "rule": "aptGetInstallUseY",
      "position": {
        "lineStart": 42,
        "lineEnd": 42,
        "columnStart": 24,
        "columnEnd": 47
      }
    },
    {
      "rule": "aptGetInstallUseY",
      "position": {
        "lineStart": 43,
        "lineEnd": 43,
        "columnStart": 24,
        "columnEnd": 44
      }
    },
    {
      "rule": "aptGetInstallUseY",
      "position": {
        "lineStart": 44,
        "lineEnd": 44,
        "columnStart": 24,
        "columnEnd": 47
      }
    },
    {
      "rule": "aptGetInstallUseY",
      "position": {
        "lineStart": 45,
        "lineEnd": 45,
        "columnStart": 24,
        "columnEnd": 49
      }
    },
    {
      "rule": "aptGetInstallUseY",
      "position": {
        "lineStart": 46,
        "lineEnd": 46,
        "columnStart": 24,
        "columnEnd": 47
      }
    },
    {
      "rule": "aptGetInstallUseY",
      "position": {
        "lineStart": 47,
        "lineEnd": 47,
        "columnStart": 24,
        "columnEnd": 47
      }
    },
    {
      "rule": "aptGetInstallUseY",
      "position": {
        "lineStart": 48,
        "lineEnd": 48,
        "columnStart": 24,
        "columnEnd": 43
      }
    },
    {
      "rule": "aptGetInstallUseY",
      "position": {
        "lineStart": 49,
        "lineEnd": 49,
        "columnStart": 24,
        "columnEnd": 58
      }
    },
    {
      "rule": "aptGetInstallUseY",
      "position": {
        "lineStart": 50,
        "lineEnd": 50,
        "columnStart": 24,
        "columnEnd": 48
      }
    },
    {
      "rule": "aptGetInstallUseY",
      "position": {
        "lineStart": 51,
        "lineEnd": 51,
        "columnStart": 24,
        "columnEnd": 47
      }
    },
    {
      "rule": "aptGetInstallUseY",
      "position": {
        "lineStart": 52,
        "lineEnd": 52,
        "columnStart": 24,
        "columnEnd": 52
      }
    },
    {
      "rule": "aptGetInstallUseY",
      "position": {
        "lineStart": 53,
        "lineEnd": 53,
        "columnStart": 24,
        "columnEnd": 51
      }
    },
    {
      "rule": "aptGetInstallUseY",
      "position": {
        "lineStart": 54,
        "lineEnd": 54,
        "columnStart": 24,
        "columnEnd": 45
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 42,
        "lineEnd": 42,
        "columnStart": 24,
        "columnEnd": 47
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 43,
        "lineEnd": 43,
        "columnStart": 24,
        "columnEnd": 44
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 44,
        "lineEnd": 44,
        "columnStart": 24,
        "columnEnd": 47
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 45,
        "lineEnd": 45,
        "columnStart": 24,
        "columnEnd": 49
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 46,
        "lineEnd": 46,
        "columnStart": 24,
        "columnEnd": 47
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 47,
        "lineEnd": 47,
        "columnStart": 24,
        "columnEnd": 47
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 48,
        "lineEnd": 48,
        "columnStart": 24,
        "columnEnd": 43
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 49,
        "lineEnd": 49,
        "columnStart": 24,
        "columnEnd": 58
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 50,
        "lineEnd": 50,
        "columnStart": 24,
        "columnEnd": 48
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 51,
        "lineEnd": 51,
        "columnStart": 24,
        "columnEnd": 47
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 52,
        "lineEnd": 52,
        "columnStart": 24,
        "columnEnd": 52
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 53,
        "lineEnd": 53,
        "columnStart": 24,
        "columnEnd": 51
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 54,
        "lineEnd": 54,
        "columnStart": 24,
        "columnEnd": 45
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 42,
        "lineEnd": 42,
        "columnStart": 24,
        "columnEnd": 47
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 43,
        "lineEnd": 43,
        "columnStart": 24,
        "columnEnd": 44
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 44,
        "lineEnd": 44,
        "columnStart": 24,
        "columnEnd": 47
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 45,
        "lineEnd": 45,
        "columnStart": 24,
        "columnEnd": 49
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 46,
        "lineEnd": 46,
        "columnStart": 24,
        "columnEnd": 47
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 47,
        "lineEnd": 47,
        "columnStart": 24,
        "columnEnd": 47
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 48,
        "lineEnd": 48,
        "columnStart": 24,
        "columnEnd": 43
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 49,
        "lineEnd": 49,
        "columnStart": 24,
        "columnEnd": 58
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 50,
        "lineEnd": 50,
        "columnStart": 24,
        "columnEnd": 48
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 51,
        "lineEnd": 51,
        "columnStart": 24,
        "columnEnd": 47
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 52,
        "lineEnd": 52,
        "columnStart": 24,
        "columnEnd": 52
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 53,
        "lineEnd": 53,
        "columnStart": 24,
        "columnEnd": 51
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 54,
        "lineEnd": 54,
        "columnStart": 24,
        "columnEnd": 45
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 42,
        "lineEnd": 42,
        "columnStart": 24,
        "columnEnd": 47
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 43,
        "lineEnd": 43,
        "columnStart": 24,
        "columnEnd": 44
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 44,
        "lineEnd": 44,
        "columnStart": 24,
        "columnEnd": 47
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 45,
        "lineEnd": 45,
        "columnStart": 24,
        "columnEnd": 49
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 46,
        "lineEnd": 46,
        "columnStart": 24,
        "columnEnd": 47
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 47,
        "lineEnd": 47,
        "columnStart": 24,
        "columnEnd": 47
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 48,
        "lineEnd": 48,
        "columnStart": 24,
        "columnEnd": 43
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 49,
        "lineEnd": 49,
        "columnStart": 24,
        "columnEnd": 58
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 50,
        "lineEnd": 50,
        "columnStart": 24,
        "columnEnd": 48
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 51,
        "lineEnd": 51,
        "columnStart": 24,
        "columnEnd": 47
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 52,
        "lineEnd": 52,
        "columnStart": 24,
        "columnEnd": 52
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 53,
        "lineEnd": 53,
        "columnStart": 24,
        "columnEnd": 51
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 54,
        "lineEnd": 54,
        "columnStart": 24,
        "columnEnd": 45
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 42,
        "lineEnd": 42,
        "columnStart": 4,
        "columnEnd": 54
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 43,
        "lineEnd": 43,
        "columnStart": 4,
        "columnEnd": 51
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 44,
        "lineEnd": 44,
        "columnStart": 4,
        "columnEnd": 54
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 45,
        "lineEnd": 45,
        "columnStart": 4,
        "columnEnd": 56
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 46,
        "lineEnd": 46,
        "columnStart": 4,
        "columnEnd": 54
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 47,
        "lineEnd": 47,
        "columnStart": 4,
        "columnEnd": 54
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 48,
        "lineEnd": 48,
        "columnStart": 4,
        "columnEnd": 50
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 49,
        "lineEnd": 49,
        "columnStart": 4,
        "columnEnd": 65
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 50,
        "lineEnd": 50,
        "columnStart": 4,
        "columnEnd": 55
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 51,
        "lineEnd": 51,
        "columnStart": 4,
        "columnEnd": 54
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 52,
        "lineEnd": 52,
        "columnStart": 4,
        "columnEnd": 59
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 53,
        "lineEnd": 53,
        "columnStart": 4,
        "columnEnd": 58
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 54,
        "lineEnd": 54,
        "columnStart": 4,
        "columnEnd": 52
      }
    }
  ],
  "repairedDockerfile": "FROM                    ubuntu:16.04\nMAINTAINER              pr3d4t0r\n\n\nLABEL                   author=\"pr3d4t0r - Eugene Ciurana\"\nLABEL                   copyright=\"(c) Copyright 2015, 2016 by CIME Software Ltd.\"\nLABEL                   description=\"Baikal / SabreDAV robust calendar and address book server with scheduling and email notifications\"\nLABEL                   license=\"See: LICENSE.txt for complete licensing information.\"\nLABEL                   support=\"caldav AT cime.net\"\nLABEL                   version=\"2.1\"\n\n\n### \"set-locale\"\nRUN                     locale-gen en_US.UTF-8 && \\\n                        update-locale LANG=en_US.UTF-8 && \\\n                        update-locale LANGUAGE=en_US.UTF-8 && \\\n                        update-locale LC_ALL=en_US.UTF-8\n\nENV                     LANG en_US.UTF-8\nENV                     LANGUAGE en_US:en\nENV                     LC_ALL en_US.UTF-8\nENV                     TERM=xterm\n\n\n### \"configure-apt\"\nRUN                     echo \"APT::Get::Assume-Yes true;\" >> /etc/apt/apt.conf.d/80custom; \\\n                        echo \"APT::Get::Quiet true;\" >> /etc/apt/apt.conf.d/80custom; \\\n                        rm -Rvf /var/lib/apt/lists/*; \\\n                        apt-get update\n\n\n### \"configure-postfix\"\n#\n# These parameters are specific to your own Postfix relay!  Use your host and domain\n# names.\nRUN                     echo \"postfix postfix/mailname string calendar.example.org\" | debconf-set-selections && \\\n                        echo \"postfix postfix/main_mailer_type string 'Satellite system'\" | debconf-set-selections && \\\n                        echo \"postfix postfix/relayhost string smtpcal.example.org\" | debconf-set-selections && \\\n                        echo \"postfix postfix/root_address string cal-bounce@example.org\" | debconf-set-selections\n\n\n### \"system-requirements\"\nRUN apt-get install -y --no-install-recommends apache2 && rm -rf /var/lib/apt/lists/*;\nRUN apt-get install -y --no-install-recommends curl && rm -rf /var/lib/apt/lists/*;\nRUN apt-get install -y --no-install-recommends postfix && rm -rf /var/lib/apt/lists/*;\nRUN apt-get install -y --no-install-recommends mailutils && rm -rf /var/lib/apt/lists/*;\nRUN apt-get install -y --no-install-recommends rsyslog && rm -rf /var/lib/apt/lists/*;\nRUN apt-get install -y --no-install-recommends sqlite3 && rm -rf /var/lib/apt/lists/*;\nRUN apt-get install -y --no-install-recommends php && rm -rf /var/lib/apt/lists/*;\nRUN apt-get install -y --no-install-recommends libapache2-mod-php && rm -rf /var/lib/apt/lists/*;\nRUN apt-get install -y --no-install-recommends php-date && rm -rf /var/lib/apt/lists/*;\nRUN apt-get install -y --no-install-recommends php-dom && rm -rf /var/lib/apt/lists/*;\nRUN apt-get install -y --no-install-recommends php-mbstring && rm -rf /var/lib/apt/lists/*;\nRUN apt-get install -y --no-install-recommends php-sqlite3 && rm -rf /var/lib/apt/lists/*;\nRUN apt-get install -y --no-install-recommends unzip && rm -rf /var/lib/apt/lists/*;\n\n\n### \"Baikal-installation\"\nWORKDIR                 /var/www\nRUN curl -f -LO https://github.com/fruux/Baikal/releases/download/0.4.6/baikal-0.4.6.zip && unzip baikal-0.4.6.zip && rm -f baikal-0.4.6.zip\nRUN                     mv baikal calendar_server\nRUN                     rm -Rvf /var/www/calendar_server/Specific/db/.empty\n\n# Scheduling and email delivery.  See:\n# http://sabre.io/dav/scheduling/\n# https://groups.google.com/forum/#!searchin/sabredav-discuss/scheduling|sort:relevance/sabredav-discuss/CrGZXqw4sRw/vsHYq6FDcnkJ\n# This needs to be patched on the Baikal start up Server.php, NOT in the SabreDAV server.\nCOPY                    resources/Server.php /var/www/calendar_server/Core/Frameworks/Baikal/Core/Server.php\n\nCOPY                    resources/baikal.apache2 /var/www/calendar_server/Specific/virtualhosts/baikal.apache2\nCOPY                    cal_infox.php /var/www/calendar_server/html/\n\n# The Baikal administration wizard creates these two config files when first run.  Preserve them\n# and save them to the resources/ directory.  These files must be preserved for upgrades.\n# Both files are already in the .gitignore file.\n#\n# To use them:  uncomment these two lines and copy them to the Specific/ directory, per the\n# Baikal upgrade instructions at:  http://sabre.io/baikal/upgrade/\n# COPY                    resources/config.php /var/www/calendar_server/Specific/\n# COPY                    resources/config.system.php /var/www/calendar_server/Specific/\n\n\nWORKDIR                 /var/www/calendar_server\nRUN                     chown -Rf www-data:www-data Specific\n\nWORKDIR                 /etc/apache2/sites-available\nRUN                     /etc/init.d/apache2 stop ; a2enmod rewrite\nRUN                     mv -f 000-default.conf ..\nRUN                     ln -s /var/www/calendar_server/Specific/virtualhosts/baikal.apache2 000-default.conf\nRUN                     echo \"error_log = syslog\" >> /etc/php/7.0/apache2/php.ini\n\n\n### \"web-server-configuration-and-launch\"\nWORKDIR                 /\nCOPY                    bin/runapache2 /\n\n# httpoxy vulnerability fix:\nRUN                     awk '/vim: syntax/ { printf(\"# Poxy; CVE-2016-5387\\nLoadModule headers_module /usr/lib/apache2/modules/mod_headers.so\\nRequestHeader unset Proxy early\\n%s\\n\", $0); next; } { print; }' /etc/apache2/apache2.conf > /tmp/apache2.conf\nRUN                     cat /tmp/apache2.conf > /etc/apache2/apache2.conf && rm /tmp/apache2.conf\n\nENTRYPOINT                [ \"/runapache2\" ]\n\n"
}