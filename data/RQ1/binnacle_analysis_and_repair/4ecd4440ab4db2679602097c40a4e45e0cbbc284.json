{
  "startTime": 1674235449308,
  "endTime": 1674235449611,
  "originalSmells": [
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 7,
        "lineEnd": 7,
        "columnStart": 7,
        "columnEnd": 61
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM ubuntu:xenial\n\n# Note: The build directory is the root of the istio/test-infra repo, not ./\n\n# Installing necessary packages\nRUN rm -rf /var/lib/apt/lists/* \\\n    && apt-get update --fix-missing -qq \\\n    && apt-get install --no-install-recommends -qqy git iptables procps sudo xz-utils \\\n    && apt-get clean && rm -rf /var/lib/apt/lists/*\n\n# Adding sudo group user no password access.\n# This is used by bootstrap user to start docker service\nRUN echo '%sudo ALL=(ALL) NOPASSWD:ALL' >> /etc/sudoers\n\n# Installing\nADD scripts /tmp/istio_tmp/scripts\nRUN chmod +x /tmp/istio_tmp/scripts/linux-install-software\nRUN /tmp/istio_tmp/scripts/linux-install-software \\\n    && rm -rf /tmp/istio_tmp\n\nVOLUME /var/lib/docker\nEXPOSE 2375\n\nENV PATH /usr/local/go/bin:/usr/local/cmake/bin:/usr/lib/google-cloud-sdk/bin:/opt/go/bin:${PATH}\n\n# Create bootstrap user\nENV HOME /home/bootstrap\nRUN useradd -c \"Bootstrap user\" -d ${HOME} -G docker,sudo -m bootstrap -s /bin/bash\nUSER bootstrap\nWORKDIR ${HOME}\n\n# Explicitly set bazel cache, to avoid cache issues with checking out\n# code and running bazel in different dir than the calling script.\nENV TEST_TMPDIR /home/bootstrap/.cache/bazel\n\n# Add bootstrap, the test harness (checks out code, captures log and status)\nADD https://raw.githubusercontent.com/nlandolfi/test-infra-1/d7900388fa1fb69738e231a21230373fd4b5ede9/jenkins/bootstrap.py ${HOME}\nRUN sudo chmod +rx ${HOME}/bootstrap.py\n\n# Add entrypoint that runs bootstrap with appropriate arguments\nADD ./docker/prowbazel/entrypoint /usr/local/bin/entrypoint\nRUN sudo chmod +rx /usr/local/bin/entrypoint\n\n# Final GOPATH configuration\nRUN mkdir -p /home/bootstrap/go/src\nENV GOPATH=/home/bootstrap/go\nENV PATH ${GOPATH}/bin:${PATH}\n\n# Set CI variable which can be checked by test scripts to verify\n# if running in the continuous integration environment.\nENV CI bootstrap\n\nENTRYPOINT [\"entrypoint\"]\n"
}