{
  "startTime": 1674241329912,
  "endTime": 1674241330420,
  "originalSmells": [
    {
      "rule": "wgetUseHttpsUrl",
      "position": {
        "lineStart": 62,
        "lineEnd": 62,
        "columnStart": 4,
        "columnEnd": 71
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 66,
        "lineEnd": 66,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 67,
        "lineEnd": 67,
        "columnStart": 4,
        "columnEnd": 118
      }
    },
    {
      "rule": "configureShouldUseBuildFlag",
      "position": {
        "lineStart": 34,
        "lineEnd": 34,
        "columnStart": 21,
        "columnEnd": 44
      }
    },
    {
      "rule": "configureShouldUseBuildFlag",
      "position": {
        "lineStart": 52,
        "lineEnd": 52,
        "columnStart": 4,
        "columnEnd": 45
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 4,
        "lineEnd": 18,
        "columnStart": 26,
        "columnEnd": 18
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "# Dockerfile for GTEx xQTL pipeline\nFROM ubuntu:16.04\nMAINTAINER Francois Aguet\n\nRUN apt-get -qq update && apt-get install --no-install-recommends -qqy \\\n        build-essential \\\n        curl \\\n        lbzip2 \\\n        libboost-all-dev \\\n        libcurl3-dev \\\n        libgsl-dev \\\n        openjdk-8-jdk \\\n        python3 \\\n        python3-pip \\\n        r-base-core=3.2.3-4 \\\n        unzip \\\n        vim-common \\\n        wget \\\n        zlib1g-dev \\\n    && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/* && \\\n    apt-get clean && \\\n    apt-get autoremove -y && \\\n    rm -rf /var/lib/{apt,dpkg,cache,log}/\n\n# R\nRUN wget https://github.com/downloads/PMBio/peer/R_peer_source_1.3.tgz && \\\n    R CMD INSTALL R_peer_source_1.3.tgz && \\\n    rm R_peer_source_1.3.tgz && \\\n    echo \"r <- getOption('repos'); r['CRAN'] <- 'http://cran.us.r-project.org'; options(repos = r);\" > ~/.Rprofile && \\\n    Rscript -e \"install.packages(c('argparser'), dependencies=TRUE)\" && \\\n    Rscript -e 'source(\"http://bioconductor.org/biocLite.R\"); biocLite(\"qvalue\"); biocLite(\"sva\"); biocLite(\"edgeR\");'\n\n# standalone R math library\nRUN wget https://cran.r-project.org/src/base/R-3/R-3.2.5.tar.gz && tar -xf R-3.2.5.tar.gz && rm R-3.2.5.tar.gz \\\n    && cd R-3.2.5 && ./configure --build=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\" --with-x=no && cd src/nmath/standalone && make\nENV RMATH /R-3.2.5/src\n\n# htslib\nRUN cd /opt && \\\n    wget --no-check-certificate https://github.com/samtools/htslib/releases/download/1.6/htslib-1.6.tar.bz2 && \\\n    tar -xf htslib-1.6.tar.bz2 && rm htslib-1.6.tar.bz2 && cd htslib-1.6 && make && make install && make clean\n\n# bcftools\nRUN cd /opt && \\\n    wget --no-check-certificate https://github.com/samtools/bcftools/releases/download/1.6/bcftools-1.6.tar.bz2 && \\\n    tar -xf bcftools-1.6.tar.bz2 && rm bcftools-1.6.tar.bz2 && cd bcftools-1.6 && \\\n    make && make install && make clean\n\n# samtools\nRUN cd /opt && \\\n    wget --no-check-certificate https://github.com/samtools/samtools/releases/download/1.6/samtools-1.6.tar.bz2 && \\\n    tar -xf samtools-1.6.tar.bz2 && rm samtools-1.6.tar.bz2 && cd samtools-1.6 && \\\n    ./configure --build=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\" --with-htslib=/opt/htslib-1.6 && make && make install && make clean\n\n# PLINK\nRUN mkdir /opt/plink && cd /opt/plink && \\\n    wget https://www.cog-genomics.org/static/bin/plink180717/plink_linux_x86_64.zip && \\\n    unzip plink_linux_x86_64.zip && rm plink_linux_x86_64.zip\nENV PATH $PATH:/opt/plink\n\n# METASOFT\nRUN mkdir /opt/metasoft && cd /opt/metasoft && \\\n    wget https://genetics.cs.ucla.edu/meta/repository/2.0.1/Metasoft.zip && \\\n    unzip Metasoft.zip && rm Metasoft.zip\n\n# Python\nRUN pip3 install --no-cache-dir --upgrade pip\nRUN pip3 install --no-cache-dir numpy tables pandas scipy matplotlib pyBigWig h5py feather-format pysam statsmodels scikits.bootstrap\n\n# FastQTL\nRUN cd /opt && \\\n    wget https://github.com/francois-a/fastqtl/archive/59bcdc06c4277b2cf2e06f242eb89f7e1fd4cacd.tar.gz && \\\n    tar -xf 59bcdc06c4277b2cf2e06f242eb89f7e1fd4cacd.tar.gz && rm 59bcdc06c4277b2cf2e06f242eb89f7e1fd4cacd.tar.gz && \\\n    mv fastqtl-59bcdc06c4277b2cf2e06f242eb89f7e1fd4cacd fastqtl && \\\n    cd fastqtl && mkdir obj && sed -i 's/RMATH=/#RMATH/' Makefile && make\nENV PATH /opt/fastqtl/bin:$PATH\n\n# aFC\nRUN cd /opt && \\\n    wget https://github.com/francois-a/aFC/archive/2189fbf403b3d1ced54da21421d00b2d4bf44310.tar.gz && \\\n    tar -xf 2189fbf403b3d1ced54da21421d00b2d4bf44310.tar.gz && mv aFC-2189fbf403b3d1ced54da21421d00b2d4bf44310 aFC && \\\n    rm 2189fbf403b3d1ced54da21421d00b2d4bf44310.tar.gz\n\n# copy scripts\nCOPY src src/\n"
}