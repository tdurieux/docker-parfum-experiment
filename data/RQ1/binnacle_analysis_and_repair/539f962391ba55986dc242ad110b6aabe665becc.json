{
  "startTime": 1674248987927,
  "endTime": 1674248988147,
  "originalSmells": [
    {
      "rule": "configureShouldUseBuildFlag",
      "position": {
        "lineStart": 61,
        "lineEnd": 61,
        "columnStart": 4,
        "columnEnd": 15
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 38,
        "lineEnd": 50,
        "columnStart": 22,
        "columnEnd": 18
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 68,
        "lineEnd": 70,
        "columnStart": 26,
        "columnEnd": 21
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 38,
        "lineEnd": 50,
        "columnStart": 22,
        "columnEnd": 18
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "# Â© Copyright IBM Corporation 2017, 2019.\n# LICENSE: Apache License, Version 2.0 (http://www.apache.org/licenses/LICENSE-2.0)\n\n########## Dockerfile for Apache Geode version 1.8.0 #####################\n#\n# This Dockerfile builds a basic installation of Apache Geode.\n#\n# Apache Geode is a data management platform that provides real-time, consistent access to data-intensive\n# applications throughout widely distributed cloud architectures. Geode pools memory, CPU, network resources, and\n# optionally local disk across multiple processes to manage application objects and behavior. It uses dynamic replication\n# and data partitioning techniques to implement high availability, improved performance, scalability, and fault tolerance.\n#\n# To build this image, from the directory containing this Dockerfile\n# (assuming that the file is named Dockerfile):\n# docker build -t <image_name> .\n#\n# To start Apache Geode run the below command:\n# docker run --name <container_name> -d <image>\n#\n# Reference:\n# http://geode.apache.org/\n#\n##################################################################################\n\n# Base Image\nFROM s390x/ubuntu:16.04\n\n# The author\nLABEL maintainer=\"LoZ Open Source Ecosystem (https://www.ibm.com/developerworks/community/groups/community/lozopensource)\"\n\nENV SOURCE_DIR=/tmp/source JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-s390x \\\n        PATH=$PATH:$JAVA_HOME/bin:/geode/geode-assembly/build/install/apache-geode/bin/ \\\n        LD_LIBRARY_PATH=/usr/local/lib \\\n        LANG=\"en_US.UTF-8\" JAVA_TOOL_OPTIONS=\"-Dfile.encoding=UTF8\" \\\n        _JAVA_OPTIONS=\"-Xmx5g -Xss5g\" JVM_ARGS=\"-Xms2048m -Xmx2048m\"\n\n# Build Protobuf-3.6.0\n# Installing dependencies\nRUN apt-get update && apt-get install --no-install-recommends -y \\\n    tar \\\n        wget \\\n        autoconf \\\n        libtool \\\n        automake \\\n        bzip2 \\\n        curl \\\n        g++ \\\n        git \\\n        make \\\n        unzip \\\n        zlib1g-dev \\\n\n # Download and install protobuf\n && git clone https://github.com/google/protobuf.git \\\n && cd protobuf \\\n && git checkout v3.6.0 \\\n && git config --global url.\"git://github.com/\".insteadOf \"https://github.com/\" \\\n && git submodule update --init --recursive \\\n\n# Generate and then run the configuration\n && ./autogen.sh \\\n && ./configure --build=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\" \\\n\n# Build\n && make && make install && rm -rf /var/lib/apt/lists/*;\n\n\n# Install Apache Geode dependencies\nRUN apt-get update && apt-get -y --no-install-recommends install \\\n        git \\\n        openjdk-8-jdk \\\n\n# Get the Geode source\n        && mkdir -p $SOURCE_DIR \\\n        && cd $SOURCE_DIR \\\n        && git clone https://github.com/apache/geode.git \\\n        && cd geode/ \\\n        && git checkout rel/v1.8.0 \\\n\n# Build Apache Geode source\n    && mkdir -p $HOME/.gradle/caches/modules-2/files-2.1/com.google.protobuf/protoc/3.6.0 \\\n    && cp /usr/local/bin/protoc $HOME/.gradle/caches/modules-2/files-2.1/com.google.protobuf/protoc/3.6.0/protoc-3.6.0-linux-s390x_64.exe \\\n    && sed -i '37d' ./geode-protobuf-messages/build.gradle \\\n    && ./gradlew build installDist -x test \\\n\n# Copy default config file\n    && mv $SOURCE_DIR/geode /geode \\\n\n# Clean up cache data and remove dependencies which are not required\n    && apt-get remove -y \\\n                autoconf \\\n                automake \\\n                bzip2 \\\n                curl \\\n                g++ \\\n                git \\\n                libtool \\\n                make \\\n                unzip \\\n                wget \\\n                zlib1g-dev \\\n     && apt-get autoremove -y \\\n     && apt autoremove -y \\\n     && rm -rf $HOME/.gradle \\\n     && rm -rf $SOURCE_DIR \\\n     && apt-get clean \\\n     && rm -rf /var/lib/apt/lists/*\n\nVOLUME /geode\n\nCMD [\"gfsh\"]\n\n# End of Dockerfile\n"
}