{
  "startTime": 1674238788647,
  "endTime": 1674238789249,
  "originalSmells": [
    {
      "rule": "npmCacheCleanAfterInstall",
      "position": {
        "lineStart": 49,
        "lineEnd": 49,
        "columnStart": 4,
        "columnEnd": 45
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 23,
        "lineEnd": 23,
        "columnStart": 4,
        "columnEnd": 29
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 24,
        "lineEnd": 24,
        "columnStart": 4,
        "columnEnd": 36
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 28,
        "lineEnd": 28,
        "columnStart": 4,
        "columnEnd": 26
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 31,
        "lineEnd": 31,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 38,
        "lineEnd": 38,
        "columnStart": 4,
        "columnEnd": 26
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 16,
        "lineEnd": 17,
        "columnStart": 11,
        "columnEnd": 22
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 20,
        "lineEnd": 20,
        "columnStart": 4,
        "columnEnd": 52
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 27,
        "lineEnd": 27,
        "columnStart": 4,
        "columnEnd": 36
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 34,
        "lineEnd": 34,
        "columnStart": 4,
        "columnEnd": 49
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 37,
        "lineEnd": 37,
        "columnStart": 4,
        "columnEnd": 53
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 41,
        "lineEnd": 41,
        "columnStart": 4,
        "columnEnd": 81
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 45,
        "lineEnd": 45,
        "columnStart": 4,
        "columnEnd": 35
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 48,
        "lineEnd": 48,
        "columnStart": 4,
        "columnEnd": 26
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 50,
        "lineEnd": 50,
        "columnStart": 4,
        "columnEnd": 36
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 20,
        "lineEnd": 20,
        "columnStart": 4,
        "columnEnd": 52
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 27,
        "lineEnd": 27,
        "columnStart": 4,
        "columnEnd": 36
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 34,
        "lineEnd": 34,
        "columnStart": 4,
        "columnEnd": 49
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 37,
        "lineEnd": 37,
        "columnStart": 4,
        "columnEnd": 53
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 41,
        "lineEnd": 41,
        "columnStart": 4,
        "columnEnd": 81
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 45,
        "lineEnd": 45,
        "columnStart": 4,
        "columnEnd": 35
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 48,
        "lineEnd": 48,
        "columnStart": 4,
        "columnEnd": 26
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 50,
        "lineEnd": 50,
        "columnStart": 4,
        "columnEnd": 36
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 16,
        "lineEnd": 17,
        "columnStart": 11,
        "columnEnd": 22
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 20,
        "lineEnd": 20,
        "columnStart": 4,
        "columnEnd": 52
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 27,
        "lineEnd": 27,
        "columnStart": 4,
        "columnEnd": 36
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 34,
        "lineEnd": 34,
        "columnStart": 4,
        "columnEnd": 49
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 37,
        "lineEnd": 37,
        "columnStart": 4,
        "columnEnd": 53
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 41,
        "lineEnd": 41,
        "columnStart": 4,
        "columnEnd": 81
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 45,
        "lineEnd": 45,
        "columnStart": 4,
        "columnEnd": 35
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 48,
        "lineEnd": 48,
        "columnStart": 4,
        "columnEnd": 26
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 50,
        "lineEnd": 50,
        "columnStart": 4,
        "columnEnd": 36
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 20,
        "lineEnd": 20,
        "columnStart": 4,
        "columnEnd": 76
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 27,
        "lineEnd": 27,
        "columnStart": 4,
        "columnEnd": 60
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 34,
        "lineEnd": 34,
        "columnStart": 4,
        "columnEnd": 73
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 37,
        "lineEnd": 37,
        "columnStart": 4,
        "columnEnd": 77
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 41,
        "lineEnd": 41,
        "columnStart": 4,
        "columnEnd": 105
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 45,
        "lineEnd": 45,
        "columnStart": 4,
        "columnEnd": 59
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 48,
        "lineEnd": 48,
        "columnStart": 4,
        "columnEnd": 50
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 50,
        "lineEnd": 50,
        "columnStart": 4,
        "columnEnd": 60
      }
    }
  ],
  "repairedDockerfile": "FROM adhoc/odoo-ubuntu:8.0\nMAINTAINER Juan Jose Scarafia <jjs@adhoc.com.ar>\n\nUSER root\n\n# Generate locale (es_AR for right odoo es_AR language config, and C.UTF-8 for postgres and general locale data)\n# TODO better C.UTF-8 or en_US.UTF-8?\nRUN locale-gen en_US.UTF-8 && update-locale\nRUN locale-gen es_AR.UTF-8 && update-locale\nRUN echo 'LANG=\"en_US.UTF-8\"' > /etc/default/locale\nENV LANG es_AR.UTF-8 \nENV LANGUAGE es_AR:es:en_US:en \nENV LC_ALL es_AR.UTF-8\n\n# Install some deps (if we install with no-recommends later we have some errors with pip)\nRUN apt-get update \\\n        && apt-get install --no-install-recommends -y \\\n        python-pip git && rm -rf /var/lib/apt/lists/*;\n\n# sudo and other useful tools\nRUN apt-get install --no-install-recommends -y sudo nano htop ssh wget unzip && rm -rf /var/lib/apt/lists/*;\n\n# update pip and install setuptools (required for intalling pip requirements)\nRUN pip install --no-cache-dir --upgrade pip\nRUN pip install --no-cache-dir --upgrade setuptools\n\n# Workers and longpolling dependencies\nRUN apt-get install --no-install-recommends -y python-gevent && rm -rf /var/lib/apt/lists/*;\nRUN pip install --no-cache-dir psycogreen\n\n## Install pip dependencies for adhoc used odoo repositories\nRUN pip install --no-cache-dir openupgradelib\n\n# used by many pip packages\nRUN apt-get install --no-install-recommends -y python-dev build-essential && rm -rf /var/lib/apt/lists/*;\n\n# odoo-extra\nRUN apt-get install --no-install-recommends -y python-matplotlib font-manager && rm -rf /var/lib/apt/lists/*;\nRUN pip install --no-cache-dir simplejson\n\n# odoo argentina (nuevo modulo de FE)\nRUN apt-get install --no-install-recommends -y swig libffi-dev libssl-dev python-m2crypto python-httplib2 && rm -rf /var/lib/apt/lists/*;\n# este deberiamos borrarlo porque tarda, es para pyOpenSSL que no deberia ser necesario si usamos pyafipws\n\n# aeroo direct print\nRUN apt-get install --no-install-recommends -y libcups2-dev && rm -rf /var/lib/apt/lists/*;\n\n# fix for this issue https://github.com/odoo/odoo/issues/9113 (issue raised when installing website_animate)\nRUN apt-get install --no-install-recommends -y npm && rm -rf /var/lib/apt/lists/*;\nRUN npm install -g less less-plugin-clean-css && npm cache clean --force;\nRUN apt-get install --no-install-recommends -y nodejs-legacy && rm -rf /var/lib/apt/lists/*;\nRUN rm /usr/bin/lessc; ln -s /usr/local/bin/lessc /usr/bin/lessc\nRUN apt-mark hold node-less\n\n## Clean apt-get (copied from odoo)\nRUN apt-get purge -y --auto-remove -o APT::AutoRemove::RecommendsImportant=false -o APT::AutoRemove::SuggestsImportant=false\nRUN apt-get clean\nRUN rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*\n\n# Make auto_install = False for various modules\nRUN sed  -i  \"s/'auto_install': True/'auto_install': False/\" /usr/lib/python2.7/dist-packages/openerp/addons/im_chat/__openerp__.py\n\nRUN sed  -i  \"s/'auto_install': True/'auto_install': False/\" /usr/lib/python2.7/dist-packages/openerp/addons/im_odoo_support/__openerp__.py\n\nRUN sed  -i  \"s/'auto_install': True/'auto_install': False/\" /usr/lib/python2.7/dist-packages/openerp/addons/bus/__openerp__.py\n\nRUN sed  -i  \"s/'auto_install': True/'auto_install': False/\" /usr/lib/python2.7/dist-packages/openerp/addons/base_import/__openerp__.py\n\nRUN sed  -i  \"s/'auto_install': True/'auto_install': False/\" /usr/lib/python2.7/dist-packages/openerp/addons/portal/__openerp__.py\n\n# create directory for odoo files\nRUN mkdir -p /opt/odoo\nRUN chown -R odoo /opt/odoo\n\n# changing user is required by odoo which won't start with root\nUSER odoo\nENV ETC_DIR /opt/odoo/etc\nENV DATA_DIR /opt/odoo/data\nENV CUSTOM_ADDONS /opt/odoo/custom-addons\nENV EXTRA_ADDONS /opt/odoo/extra-addons\nRUN mkdir -p ${ETC_DIR}\nRUN mkdir -p ${DATA_DIR}\nRUN mkdir -p ${CUSTOM_ADDONS}\nRUN mkdir -p ${EXTRA_ADDONS}\n\nUSER root\n\n# Mount persistent directories\nVOLUME [\"${DATA_DIR}\", \"${CUSTOM_ADDONS}\"]\n# no tendriamos porque montar \"/opt/odoo/etc\" ya que la idea es que se reconstruya el conf dinamicamente\n\n# rplace  entrypoint script and replace Odoo configuration file (new name)\nENV RESOURCES /opt/odoo/resources/\nCOPY ./resources/ ${RESOURCES}\nRUN chown -R odoo ${RESOURCES}\n\n# change entrypoint\nENTRYPOINT [\"/opt/odoo/resources/entrypoint.sh\"]\nCMD [\"odoo.py\"]\n\n# Variables used by the launch scripts\nENV \\\n    ODOO_SERVER=odoo.py \\\n    ODOO_CONF=/opt/odoo/etc/odoo.conf \\\n    # odoo conf variables\n    UNACCENT=True \\\n    PGUSER=odoo \\\n    PGPASSWORD=odoo \\\n    PGHOST=db \\\n    WORKERS=6 \\\n    ADMIN_PASSWORD=admin \\\n    SERVER_MODE=test \\\n    PROXY_MODE=True \\\n    WITHOUT_DEMO=True \\\n    DB_MAXCONN=32 \\\n    LIMIT_TIME_CPU=60 \\\n    LIMIT_TIME_REAL=120 \\\n    AEROO_DOCS_HOST=aeroo \\\n    AFIP_HOMO_PKEY_FILE=/opt/odoo/backups/homo.pkey \\\n    AFIP_HOMO_CERT_FILE=/opt/odoo/backups/homo.cert \\\n    AFIP_PROD_PKEY_FILE=/opt/odoo/backups/prod.pkey \\\n    AFIP_PROD_CERT_FILE=/opt/odoo/backups/prod.cert \\\n    DB_TEMPLATE=template1\n\n# odoo server use this env var as default conf, check if v9 or v10 rename it\nENV OPENERP_SERVER $ODOO_CONF\n\nUSER odoo\n"
}