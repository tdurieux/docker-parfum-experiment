{
  "startTime": 1674234991543,
  "endTime": 1674234991648,
  "originalSmells": [
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 22,
        "lineEnd": 22,
        "columnStart": 22,
        "columnEnd": 55
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 22,
        "lineEnd": 22,
        "columnStart": 22,
        "columnEnd": 55
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "# Copyright 2018-2019 Banco Bilbao Vizcaya Argentaria, S.A.\n\n# Licensed under the Apache License, Version 2.0 (the \"License\");\n# you may not use this file except in compliance with the License.\n# You may obtain a copy of the License at\n\n#     http://www.apache.org/licenses/LICENSE-2.0\n\n# Unless required by applicable law or agreed to in writing, software\n# distributed under the License is distributed on an \"AS IS\" BASIS,\n# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n# See the License for the specific language governing permissions and\n# limitations under the License.\n\nFROM golang:1.12.1\n\nENV GO111MODULE=on\nENV CGO_LDFLAGS_ALLOW='.*'\n\nWORKDIR /go/src/github.com/bbva/qed\n\n# Install deps.\nRUN apt update -qq && apt install --no-install-recommends -qq -y autoconf cmake && rm -rf /var/lib/apt/lists/*;\n\n# Build C deps.\n# This step acts as cache to avoid recompiling when Go code changes.\nRUN git clone https://github.com/BBVA/qed.git .         &&\\\n    git submodule update --init --recursive             &&\\\n    cd c-deps                                           &&\\\n    ./builddeps.sh                                      &&\\\n    go mod download\n\n# Build QED, Storage binary and riot\nRUN go build -o /usr/local/bin/qed                                   &&\\\n    go build -o /usr/local/bin/riot testutils/riot/riot.go           &&\\\n    go build -o /usr/local/bin/storage testutils/notifierstore.go\n\n# Clean\nRUN rm -rf /var/lib/apt/lists/*\n\nFROM ubuntu:19.10\n\nCOPY --from=0 /usr/local/bin/qed /usr/local/bin/qed\nCOPY --from=0 /usr/local/bin/riot /usr/local/bin/riot\nCOPY --from=0 /usr/local/bin/storage /usr/local/bin/storage\n\nRUN /usr/local/bin/qed generate signerkeys\n"
}