{
  "startTime": 1674249898783,
  "endTime": 1674249899021,
  "originalSmells": [
    {
      "rule": "yarnCacheCleanAfterInstall",
      "position": {
        "lineStart": 56,
        "lineEnd": 56,
        "columnStart": 1,
        "columnEnd": 13
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM php:7.2-fpm-alpine\nMAINTAINER Talmai Oliveira <to@talm.ai>\n\nENV REFRESHED_AT  2019-3-28\nENV GROCY_VERSION 2.2.0\n\nRUN\tapk update && \\\n\tapk upgrade && \\\n\tapk add --update yarn git wget &&\\\n\tmkdir -p /www && \\\n    # Set environments\n\tsed -i \"s|;*daemonize\\s*=\\s*yes|daemonize = no|g\" /usr/local/etc/php-fpm.conf && \\\n\tsed -i \"s|;*listen\\s*=\\s*127.0.0.1:9000|listen = 9000|g\" /usr/local/etc/php-fpm.conf && \\\n\tsed -i \"s|;*listen\\s*=\\s*/||g\" /usr/local/etc/php-fpm.conf && \\\n#\tsed -i \"s|;*log_level\\s*=\\s*notice|log_level = debug|g\" /usr/local/etc/php-fpm.conf && \\\n\tsed -i \"s|;*chdir\\s*=\\s*/var/www|chdir = /www|g\" /usr/local/etc/php-fpm.d/www.conf && \\\n#\tsed -i \"s|;*access.log\\s*=\\s*log/\\$pool.access.log|access.log = \\$pool.access.log|g\" /usr/local/etc/php-fpm.d/www.conf && \\\n#\tsed -i \"s|;*pm.status_path\\s*=\\s*/status|pm.status_path = /status|g\" /usr/local/etc/php-fpm.d/www.conf && \\\n#\tsed -i \"s|;*memory_limit =.*|memory_limit = ${PHP_MEMORY_LIMIT}|i\" /usr/local/etc/php.ini && \\\n#    sed -i \"s|;*upload_max_filesize =.*|upload_max_filesize = ${MAX_UPLOAD}|i\" /usr/local/etc/php.ini && \\\n#    sed -i \"s|;*max_file_uploads =.*|max_file_uploads = ${PHP_MAX_FILE_UPLOAD}|i\" /usr/local/etc/php.ini && \\\n#    sed -i \"s|;*post_max_size =.*|post_max_size = ${PHP_MAX_POST}|i\" /usr/local/etc/php.ini && \\\n#    sed -i \"s|;*cgi.fix_pathinfo=.*|cgi.fix_pathinfo= 0|i\" /usr/local/etc/php.ini && \\\n\twget https://raw.githubusercontent.com/composer/getcomposer.org/1b137f8bf6db3e79a38a5bc45324414a6b1f9df2/web/installer -O - -q | php -- --quiet && \\\n\tmkdir -p /tmp/download && \\\n\tcd /tmp/download && \\\n\twget -t 3 -T 30 -nv -O \"grocy.zip\" \"https://github.com/grocy/grocy/archive/v${GROCY_VERSION}.zip\" && \\\n\tunzip grocy.zip && \\\n\trm -f grocy.zip && \\\n\tcd grocy-${GROCY_VERSION} && \\\n\tmv public /www/public && \\\n\tmv controllers /www/controllers && \\\n\tmv data /www/data && \\\n\tmv helpers /www/helpers && \\\n\tmv localization/ /www/localization && \\\n\tmv middleware/ /www/middleware && \\\n\tmv migrations/ /www/migrations && \\\n\tmv publication_assets/ /www/publication_assets && \\\n\tmv services/ /www/services && \\\n\tmv views/ /www/views && \\\n\tmv .yarnrc /www/ && \\\n\tmv *.php /www/ && \\\n\tmv *.json /www/ && \\\n\tmv composer.* /root/.composer/ && \\\n\tmv *yarn* /www/ && \\\n\tmv *.sh /www/ && \\\n    # Cleaning up\n    rm -rf /tmp/download && \\\n\trm -rf /var/cache/apk/*\n\n\n# run php composer.phar with -vvv for extra debug information\nRUN cd /var/www/html && \\\n\tphp composer.phar --working-dir=/www/ -n install && \\\n\tcp /www/config-dist.php /www/data/config.php && \\\n\tcd /www && \\\n\tyarn install && \\\n\tchown www-data:www-data -R /www/ && yarn cache clean;\n\n# Set Workdir\nWORKDIR /www/public\n\n# Expose volumes\nVOLUME [\"/www\"]\n\n# Expose ports\nEXPOSE 9000\n"
}