{
  "startTime": 1674249767072,
  "endTime": 1674249767464,
  "originalSmells": [
    {
      "rule": "aptGetInstallUseY",
      "position": {
        "lineStart": 18,
        "lineEnd": 43,
        "columnStart": 7,
        "columnEnd": 12
      }
    },
    {
      "rule": "aptGetInstallUseY",
      "position": {
        "lineStart": 52,
        "lineEnd": 59,
        "columnStart": 7,
        "columnEnd": 30
      }
    },
    {
      "rule": "aptGetInstallUseY",
      "position": {
        "lineStart": 115,
        "lineEnd": 121,
        "columnStart": 7,
        "columnEnd": 31
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM debian:8\n\nARG TERM=linux\nARG DEBIAN_FRONTEND=noninteractive\n\nENV SCIDB_VER=15.12           \\\n    SCIDB_VER_MINOR=1.4cadab5 \\\n    SCIDB_SOURCE_URL=\"https://docs.google.com/uc?id=0B7yt0n33Us0raWtCYmNlZWRxWG8&export=download\"\n\nENV SCIDB_SOURCE_PATH=/usr/local/src/scidb-$SCIDB_VER.$SCIDB_VER_MINOR \\\n    SCIDB_INSTALL_PATH=/opt/scidb/$SCIDB_VER                           \\\n    SCIDB_BUILD_TYPE=Release\n\nENV PATH=$PATH:$SCIDB_INSTALL_PATH/bin\n\n\n## Install dependencies\nRUN apt-get update \\\n    && apt-get install -y --assume-yes --no-install-recommends \\\n        apt-transport-https \\\n        bison \\\n        ca-certificates \\\n        cmake \\\n        flex \\\n        g++ \\\n        gfortran \\\n        libbz2-dev \\\n        libcppunit-dev \\\n        liblapack-dev \\\n        liblog4cxx10-dev \\\n        libprotobuf-dev \\\n        libreadline6-dev \\\n        make \\\n        openssh-server \\\n        patch \\\n        pkg-config \\\n        postgresql \\\n        postgresql-contrib \\\n        protobuf-compiler \\\n        python \\\n        python-paramiko \\\n        sudo \\\n        unzip \\\n        wget \\\n   && rm -rf /var/lib/apt/lists/*\n\n\n## Install openjdk-8-jdk from jessie-backports\n## Install dependencies requiring default-jre-headless\nRUN echo \"deb http://http.debian.net/debian jessie-backports main\" \\\n    >  /etc/apt/sources.list.d/jessie-backports.list               \\\n    && apt-get update \\\n    && apt-get install -y --assume-yes --no-install-recommends \\\n        ant \\\n        ant-contrib \\\n        ca-certificates-java/jessie-backports \\\n        junit \\\n        libprotobuf-java \\\n        openjdk-8-jdk \\\n        openjdk-8-jre-headless \\\n    && rm -rf /var/lib/apt/lists/*\n\n\n## Build and install libpqxx3 from wheezy\nRUN echo \"deb-src http://http.debian.net/debian wheezy main\"  \\\n    >  /etc/apt/sources.list.d/wheezy.list                    \\\n    && apt-get update                                         \\\n    && apt-get build-dep --assume-yes --no-install-recommends \\\n        libpqxx3                                              \\\n    && mkdir /usr/local/src/libpqxx3                          \\\n    && cd /usr/local/src/libpqxx3                             \\\n    && apt-get source --build                                 \\\n        libpqxx3                                              \\\n    && apt-get purge --assume-yes                             \\\n        autotools-dev                                         \\\n        bsdmainutils                                          \\\n        build-essential                                       \\\n        bzip2                                                 \\\n        chrpath                                               \\\n        debhelper                                             \\\n        dpkg-dev                                              \\\n        file                                                  \\\n        gettext                                               \\\n        gettext-base                                          \\\n        groff-base                                            \\\n        intltool-debian                                       \\\n        libasprintf0c2                                        \\\n        libcroco3                                             \\\n        libdpkg-perl                                          \\\n        libgdbm3                                              \\\n        libmagic1                                             \\\n        libpipeline1                                          \\\n        libtimedate-perl                                      \\\n        libtool                                               \\\n        libunistring0                                         \\\n        man-db                                                \\\n        perl                                                  \\\n        perl-modules                                          \\\n        po-debconf                                            \\\n        xz-utils                                              \\\n    && dpkg --install                                         \\\n        libpqxx-3.1_3.1-1.1_amd64.deb                         \\\n        libpqxx3-dev_3.1-1.1_amd64.deb                        \\\n    && rm -rf                                                 \\\n        /etc/apt/sources.list.d/wheezy.list                   \\\n        /usr/local/src/libpqxx3                               \\\n        /var/lib/apt/lists/*\n\n\n## Install Paradigm4 packages\nRUN wget --no-verbose --output-document - https://downloads.paradigm4.com/key \\\n    |  apt-key add -                                                          \\\n    && echo \"deb https://downloads.paradigm4.com/ ubuntu14.04/3rdparty/\"      \\\n    >  /etc/apt/sources.list.d/scidb.list                                     \\\n    && apt-get update \\\n    && apt-get install -y --assume-yes --no-install-recommends \\\n        scidb-$SCIDB_VER-ant \\\n        scidb-$SCIDB_VER-cityhash \\\n        scidb-$SCIDB_VER-libboost1.54-all-dev \\\n        scidb-$SCIDB_VER-libcsv \\\n        scidb-$SCIDB_VER-libmpich2-dev \\\n        scidb-$SCIDB_VER-mpich2 \\\n    && rm -rf /var/lib/apt/lists/*\n\n\n## Get SciDB source code\nRUN wget --no-verbose --output-document - --load-cookies cookies.txt         \\\n        \"$SCIDB_SOURCE_URL&`                                                 \\\n            wget --no-verbose --output-document - --save-cookies cookies.txt \\\n                \"$SCIDB_SOURCE_URL\"                                          \\\n            |  grep --only-matching 'confirm=[^&]*'`\"                        \\\n    |  tar --extract --gzip --directory=/usr/local/src\n\n\n## Apply SciDB patches\n# ADD https://docs.google.com/uc?id=0B8eyzr2ndWOTSFRXWHhOc1ZYTGM&export=download \\\n#     $SCIDB_SOURCE_PATH/src/query/ops/input/ChunkLoader.h\n# ADD https://docs.google.com/uc?id=0B8eyzr2ndWOTakhoVjloS2l1aVE&export=download \\\n#     $SCIDB_SOURCE_PATH/src/query/ops/input/ChunkLoader.cpp\n\n\n## Apply Debian 8 patches\nCOPY patch $SCIDB_SOURCE_PATH-patch/\nRUN cd $SCIDB_SOURCE_PATH             \\\n    && cat $SCIDB_SOURCE_PATH-patch/* \\\n    |  patch --strip=1\n\n\n## Build SciDB libraries (first few libs only)\nRUN cd $SCIDB_SOURCE_PATH                                       \\\n    && env PATH=$PATH:/opt/scidb/$SCIDB_VER/3rdparty/mpich2/bin \\\n        ./run.py setup --force                                  \\\n    && cd stage/build                                           \\\n    && make -j2                                                 \\\n         MurmurHash_lib                                         \\\n         dmalloc                                                \\\n         linear_algebra                                         \\\n         jdbc_build                                             \\\n         benchGen                                               \\\n         dgenerator                                             \\\n         gen_matrix                                             \\\n         arg_separator                                          \\\n         preparecdashreport                                     \\\n         point                                                  \\\n         rational                                               \\\n         complex                                                \\\n         ra_decl                                                \\\n         more_math                                              \\\n         match                                                  \\\n         bestmatch                                              \\\n         savebmp                                                \\\n         operators                                              \\\n         fits                                                   \\\n         scidb_msg_lib                                          \\\n         dense_linear_algebra                                   \\\n         mpi_slave_direct                                       \\\n         mpi_slave_scidb                                        \\\n         iquery                                                 \\\n         scidbtest                                              \\\n         array_lib                                              \\\n         scidbtestharness\n    # $SCIDB_SOURCE_PATH/run.py make -j2\n"
}