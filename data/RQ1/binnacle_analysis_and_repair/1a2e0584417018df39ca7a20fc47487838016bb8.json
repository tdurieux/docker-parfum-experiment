{
  "startTime": 1674235974046,
  "endTime": 1674235974403,
  "originalSmells": [
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 5,
        "lineEnd": 5,
        "columnStart": 4,
        "columnEnd": 42
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 12,
        "lineEnd": 12,
        "columnStart": 4,
        "columnEnd": 29
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 19,
        "lineEnd": 19,
        "columnStart": 4,
        "columnEnd": 64
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 41,
        "lineEnd": 41,
        "columnStart": 4,
        "columnEnd": 35
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 49,
        "lineEnd": 49,
        "columnStart": 4,
        "columnEnd": 50
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 76,
        "lineEnd": 76,
        "columnStart": 4,
        "columnEnd": 33
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 84,
        "lineEnd": 84,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 93,
        "lineEnd": 93,
        "columnStart": 4,
        "columnEnd": 61
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 5,
        "lineEnd": 5,
        "columnStart": 4,
        "columnEnd": 42
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 12,
        "lineEnd": 12,
        "columnStart": 4,
        "columnEnd": 29
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 19,
        "lineEnd": 19,
        "columnStart": 4,
        "columnEnd": 64
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 41,
        "lineEnd": 41,
        "columnStart": 4,
        "columnEnd": 35
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 49,
        "lineEnd": 49,
        "columnStart": 4,
        "columnEnd": 50
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 76,
        "lineEnd": 76,
        "columnStart": 4,
        "columnEnd": 33
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 84,
        "lineEnd": 84,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 93,
        "lineEnd": 93,
        "columnStart": 4,
        "columnEnd": 61
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 5,
        "lineEnd": 5,
        "columnStart": 4,
        "columnEnd": 42
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 12,
        "lineEnd": 12,
        "columnStart": 4,
        "columnEnd": 29
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 19,
        "lineEnd": 19,
        "columnStart": 4,
        "columnEnd": 64
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 41,
        "lineEnd": 41,
        "columnStart": 4,
        "columnEnd": 35
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 49,
        "lineEnd": 49,
        "columnStart": 4,
        "columnEnd": 50
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 76,
        "lineEnd": 76,
        "columnStart": 4,
        "columnEnd": 33
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 84,
        "lineEnd": 84,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 93,
        "lineEnd": 93,
        "columnStart": 4,
        "columnEnd": 61
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 5,
        "lineEnd": 5,
        "columnStart": 4,
        "columnEnd": 66
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 12,
        "lineEnd": 12,
        "columnStart": 4,
        "columnEnd": 53
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 19,
        "lineEnd": 19,
        "columnStart": 4,
        "columnEnd": 88
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 41,
        "lineEnd": 41,
        "columnStart": 4,
        "columnEnd": 59
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 49,
        "lineEnd": 49,
        "columnStart": 4,
        "columnEnd": 74
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 76,
        "lineEnd": 76,
        "columnStart": 4,
        "columnEnd": 57
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 84,
        "lineEnd": 84,
        "columnStart": 4,
        "columnEnd": 54
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 93,
        "lineEnd": 93,
        "columnStart": 4,
        "columnEnd": 85
      }
    }
  ],
  "repairedDockerfile": "from ubuntu:12.04\nmaintainer Jonas Colmsj√∂ <jonas@gizur.com>\n\nrun echo \"deb http://archive.ubuntu.com/ubuntu precise main universe\" > /etc/apt/sources.list # 20103-08-24\nrun apt-get update\nrun apt-get install --no-install-recommends -q -y language-pack-en && rm -rf /var/lib/apt/lists/*;\nrun update-locale LANG=en_US.UTF-8\n\n#run echo mail > /etc/hostname\nadd etc-hosts.txt /etc/hosts\n#run chown root:root /etc/hosts\n\nrun apt-get install --no-install-recommends -q -y vim && rm -rf /var/lib/apt/lists/*;\n\n# Install Postfix.\nrun echo \"postfix postfix/main_mailer_type string Internet site\" > preseed.txt\nrun echo \"postfix postfix/mailname string mail.example.com\" >> preseed.txt\n# Use Mailbox format.\nrun debconf-set-selections preseed.txt\nrun DEBIAN_FRONTEND=noninteractive apt-get --no-install-recommends install -q -y postfix && rm -rf /var/lib/apt/lists/*;\n\nrun postconf -e myhostname=mail.example.com\nrun postconf -e mydestination=\"mail.example.com, example.com, localhost.localdomain, localhost\"\nrun postconf -e mail_spool_directory=\"/var/spool/mail/\"\nrun postconf -e mailbox_command=\"\"\n\n# Add a local user to receive mail at someone@example.com, with a delivery directory\n# (for the Mailbox format).\nrun useradd -s /bin/bash someone\nrun mkdir /var/spool/mail/someone\nrun chown someone:mail /var/spool/mail/someone\n\nadd etc-aliases.txt /etc/aliases\n#run chown root:root /etc/aliases\n#run rm /etc/aliases.db\n#run touch /etc/aliases.db\n# run /bin/sh -c \"cd /etc; postmap aliases\"\n#run newaliases\n\n# Use syslog-ng to get Postfix logs (rsyslog uses upstart which does not seem\n# to run within Docker).\nrun apt-get install --no-install-recommends -q -y syslog-ng && rm -rf /var/lib/apt/lists/*;\n\n\n#\n# Jonas C.\n#\n\n# Good foor debugging\nrun apt-get -y --no-install-recommends install mutt vim dnsutils wget curl && rm -rf /var/lib/apt/lists/*;\n\n# Need to use smarthost when running in docker (since these IP-adresses often are blocked for spam purposes)\n# See: http://www.inboxs.com/index.php/linux-os/mail-server/52-configure-postfix-to-use-smart-host-gmail\n\nrun echo smtp.gmail.com USERNAME:PASSWORD > /etc/postfix/relay_passwd\nrun chmod 600 /etc/postfix/relay_passwd\nrun postmap /etc/postfix/relay_passwd\nadd etc-postfix-main.cf /etc-postfix-main.cf\nrun cat /etc-postfix-main.cf >> /etc/postfix/main.cf\n\n\n#-------------------------------------------------------------------------\n# Install apache\n#\n\n# Keep upstart from complaining\n#RUN dpkg-divert --local --rename --add /sbin/initctl\n#RUN ln -s /bin/true /sbin/initctl\n\n#RUN apt-get update\n\n\n#\n# Install supervidord (used to handle processes)\n#\n\nRUN apt-get install --no-install-recommends -y supervisor && rm -rf /var/lib/apt/lists/*;\nADD ./supervisord.conf /etc/supervisor/conf.d/supervisord.conf\n\n\n#\n# Install Apache\n\n\nRUN apt-get install --no-install-recommends -y apache2 && rm -rf /var/lib/apt/lists/*;\n\n\n#-------------------------------------------------------------------------\n# Install mailman\n#\n\n#run echo \"postfix postfix/mailname string mail.example.com\" > preseed.txt\n#run debconf-set-selections preseed.txt\nRUN DEBIAN_FRONTEND=noninteractive apt-get --no-install-recommends install -y mailman && rm -rf /var/lib/apt/lists/*;\n\n\nRUN ln -s /etc/mailman/apache.conf /etc/apache2/sites-enabled/mailman\nRUN /etc/init.d/apache2 restart\n\nRUN postconf -e 'relay_domains = lists.example.com'\nRUN postconf -e 'transport_maps = hash:/etc/postfix/transport'\nRUN postconf -e 'mailman_destination_recipient_limit = 1'\nRUN postconf -e 'alias_maps = hash:/etc/aliases, hash:/var/lib/mailman/data/aliases'\n\n#In /etc/postfix/master.cf double check that you have the following transport:\n#\n#mailman   unix  -       n       n       -       -       pipe\n#  flags=FR user=list argv=/usr/lib/mailman/bin/postfix-to-mailman.py\n#  ${nexthop} ${user}\n#\n#It calls the postfix-to-mailman.py script when a mail is delivered to a list.\n#\n#Associate the domain lists.example.com to the mailman transport with the transport map. Edit the file /etc/postfix/transport:\n#\n#lists.example.com      mailman:\n\nADD ./etc-mailman-mm_cfg.py /eyc/mailman/mm_cfg.py\n\nADD ./etc-postfix-transport /etc/postfix/transport\nRUN chown root:list /etc/postfix/transport\n\nRUN postmap -v /etc/postfix/transport\n\n#RUN chown root:list /var/lib/mailman/data/aliases\nRUN chown root:list /etc/aliases\n\nRUN newaliases\n\n#run echo \"postfix postfix/mailname string mail.example.com\" > preseed.txt\n#run debconf-set-selections preseed.txt\n#RUN newlist mailman\n\n#RUN groupadd mailman\n#RUN useradd -c \"GNU Mailman\" -s /no/shell -d /no/home -g mailman mailman\n#RUN mkdir -p /usr/local/mailman\n#RUN cd /usr/local/mailman; chgrp mailman .; chmod a+rx,g+ws .\n\n#RUN wget https://launchpad.net/mailman/3.0/3.0.0b3/+download/mailman-3.0.0b3.tar.gz\n#RUN tar -xzf mailman-3.0.0b3.tar.gz\n\n#RUN sudo su mailman -c \"cd /usr/local/mailman/mailman-3.0.0b3; ./configure; man install\"\n\nexpose 25 80\ncmd [\"sh\", \"-c\", \"service syslog-ng start ; service postfix start ; /etc/init.d/supervisor start; /usr/lib/mailman/bin/mailmanctl start; tail -F /var/log/mailman/*\"]\n"
}