{
  "startTime": 1674235434962,
  "endTime": 1674235435090,
  "originalSmells": [
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 2,
        "lineEnd": 10,
        "columnStart": 22,
        "columnEnd": 19
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 2,
        "lineEnd": 10,
        "columnStart": 22,
        "columnEnd": 19
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM debian\n\nRUN apt-get update && apt-get -y --no-install-recommends install \\\n                apache2 \\\n                libapache2-modsecurity \\\n                wget \\\n                libjansson4 \\\n                libcurl3 \\\n                libhiredis0.13 \\\n                libcjose0 \\\n                git && rm -rf /var/lib/apt/lists/*;\n\nRUN    wget --quiet --output-document=/tmp/oidc.deb https://github.com/zmartzone/mod_auth_openidc/releases/download/v2.3.3/libapache2-mod-auth-openidc_2.3.3-1.stretch.1_amd64.deb \\\n    && dpkg -i /tmp/oidc.deb \\\n        && rm -f /tmp/oidc.deb \\\n        && rm -rf /var/lib/apt/lists/*\n\nRUN a2enmod auth_openidc proxy proxy_connect ssl lbmethod_byrequests proxy_balancer proxy_http substitute headers rewrite security2 unique_id\n\nCOPY public_html /var/www\nRUN cat /etc/apache2/*.conf\n\nRUN rm /etc/apache2/*.conf\nCOPY *.conf /etc/apache2/\n\nRUN mkdir /etc/apache2/modsecurity.d\nRUN cd /etc/apache2/modsecurity.d; git clone https://github.com/SpiderLabs/owasp-modsecurity-crs.git\nCOPY crs-setup.conf  /etc/apache2/modsecurity.d/owasp-modsecurity-crs/crs-setup.conf\nRUN mv /etc/apache2/modsecurity.d/owasp-modsecurity-crs/rules/REQUEST-900-EXCLUSION-RULES-BEFORE-CRS.conf.example /etc/apache2/modsecurity.d/owasp-modsecurity-crs/rules/REQUEST-900-EXCLUSION-RULES-BEFORE-CRS.conf\nRUN mv /etc/apache2/modsecurity.d/owasp-modsecurity-crs/rules/RESPONSE-999-EXCLUSION-RULES-AFTER-CRS.conf.example /etc/apache2/modsecurity.d/owasp-modsecurity-crs/rules/RESPONSE-999-EXCLUSION-RULES-AFTER-CRS.conf\nRUN find /etc/apache2\nRUN cat /etc/apache2/conf-enabled/*.conf\nENV SERVERNAME localhost\nENV REDIS_HOSTNAME localhost\nEXPOSE 80\n\nENTRYPOINT apache2ctl -D FOREGROUND\n"
}