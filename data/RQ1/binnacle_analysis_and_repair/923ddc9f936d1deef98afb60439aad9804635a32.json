{
  "startTime": 1674252206553,
  "endTime": 1674252206941,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 16,
        "lineEnd": 16,
        "columnStart": 4,
        "columnEnd": 49
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 12,
        "lineEnd": 12,
        "columnStart": 1,
        "columnEnd": 84
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 12,
        "lineEnd": 12,
        "columnStart": 1,
        "columnEnd": 84
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "# Ubuntu base image, see README for more details\n#\n# VERSION               1.0.1\n#\nFROM ubuntu:16.04\n\n#\n# Distribution configuration\n#\n\n# Add some core repos\nRUN apt-get update && \\\n\tapt-get install --no-install-recommends -y sudo curl zip openssl build-essential python-software-properties && \\\n\tapt-get clean; rm -rf /var/lib/apt/lists/*;\n\n# Add nodejs distribution\nRUN curl -f -sL https://deb.nodesource.com/setup_7.x | sudo bash - && apt-get update && apt-get clean;\n\n#\n# Default environment variables\n#\n\n# Default system timezone (Singapore)\nENV TIMEZONE=GMT+08\n# Used to configure OS language support\nENV LANGUAGE=en_US.UTF-8\n# Commands to execute prior to aptget install/upgrade on bootup\nENV APTGET_PRESCRIPT=\"\"\n# Performs the installation of the following if missing on bootup\nENV APTGET_INSTALL=\"\"\n# Performs an apt-get upgrade on bootup\nENV APTGET_UPGRADE=false\n# Commands to execute after aptget install/upgrade on bootup\nENV APTGET_POSTSCRIPT=\"\"\n\n#\n# Core folders setup\n#\n\n# Make sure the basic folder is setup, with permission nukes\nRUN mkdir /workspace && mkdir /entrypoint && \\\n\tln -s /workspace /appspace && \\\n\tchmod -R 0777 /workspace && chmod +x /workspace;\n\nWORKDIR /workspace\n# VOLUME /workspace\n\n#\n# Prepares the entrypoint primer script\n#\nRUN echo '#!/bin/bash'                                                                  > /entrypoint/primer.sh && \\\n\techo ''                                                                             >> /entrypoint/primer.sh && \\\n\techo 'echo \"###\"'                                                                   >> /entrypoint/primer.sh && \\\n\techo 'echo \"### Start of picoded/ubuntu-base : entrypoint/primer.sh\"'               >> /entrypoint/primer.sh && \\\n\techo 'echo \"###\"'                                                                   >> /entrypoint/primer.sh && \\\n\techo ''                                                                             >> /entrypoint/primer.sh && \\\n\techo '# Enters the /workspace'                                                      >> /entrypoint/primer.sh && \\\n\techo 'cd /workspace;'                                                               >> /entrypoint/primer.sh && \\\n\techo ''                                                                             >> /entrypoint/primer.sh && \\\n\techo '# TIMEZONE run'                                                               >> /entrypoint/primer.sh && \\\n\techo 'if [ -n \"$TIMEZONE\" ] ; then'                                                 >> /entrypoint/primer.sh && \\\n\techo '   echo \"### Enforce TIMEZONE config : $TIMEZONE\"'                            >> /entrypoint/primer.sh && \\\n\techo '   TZ=\"$TIMEZONE\";'                                                           >> /entrypoint/primer.sh && \\\n\techo '   export TZ;'                                                                >> /entrypoint/primer.sh && \\\n\techo 'fi'                                                                           >> /entrypoint/primer.sh && \\\n\techo ''                                                                             >> /entrypoint/primer.sh && \\\n\techo '# LANGUAGE run'                                                               >> /entrypoint/primer.sh && \\\n\techo 'if [ -n \"$LANGUAGE\" ] ; then'                                                 >> /entrypoint/primer.sh && \\\n\techo '   echo \"### Enforce LANGUAGE config : $LANGUAGE\"'                            >> /entrypoint/primer.sh && \\\n\techo '   locale-gen \"$LANGUAGE\";'                                                   >> /entrypoint/primer.sh && \\\n\techo 'fi'                                                                           >> /entrypoint/primer.sh && \\\n\techo ''                                                                             >> /entrypoint/primer.sh && \\\n\techo '# APTGET_PRESCRIPT run'                                                       >> /entrypoint/primer.sh && \\\n\techo 'if [ -n \"$APTGET_PRESCRIPT\" ] ; then'                                         >> /entrypoint/primer.sh && \\\n\techo '   echo \"### Running APTGET_PRESCRIPT\"'                                       >> /entrypoint/primer.sh && \\\n\techo '   eval \"$APTGET_PRESCRIPT\";'                                                 >> /entrypoint/primer.sh && \\\n\techo 'fi'                                                                           >> /entrypoint/primer.sh && \\\n\techo ''                                                                             >> /entrypoint/primer.sh && \\\n\techo '# APTGET_INSTALL run'                                                         >> /entrypoint/primer.sh && \\\n\techo 'if [ -n \"$APTGET_INSTALL\" ] ; then'                                           >> /entrypoint/primer.sh && \\\n\techo '   echo \"### Running APTGET_INSTALL\"'                                         >> /entrypoint/primer.sh && \\\n\techo ''                                                                             >> /entrypoint/primer.sh && \\\n\techo '   APTGET_INSTALL_ARRAY=($APTGET_INSTALL)'                                    >> /entrypoint/primer.sh && \\\n\techo '   ACTUAL_INSTALL_ARRAY=()'                                                   >> /entrypoint/primer.sh && \\\n\techo '   for NAME in \"${APTGET_INSTALL_ARRAY[@]}\"'                                  >> /entrypoint/primer.sh && \\\n\techo '   do'                                                                        >> /entrypoint/primer.sh && \\\n\techo '      if [ -z $(which $NAME) ] ; then'                                        >> /entrypoint/primer.sh && \\\n\techo '         ACTUAL_INSTALL_ARRAY+=($NAME)'                                       >> /entrypoint/primer.sh && \\\n\techo '      fi'                                                                     >> /entrypoint/primer.sh && \\\n\techo '   done'                                                                      >> /entrypoint/primer.sh && \\\n\techo ''                                                                             >> /entrypoint/primer.sh && \\\n\techo '   if [ \"${#ACTUAL_INSTALL_ARRAY[@]}\" = 0 ] ; then'                           >> /entrypoint/primer.sh && \\\n\techo '      echo \"### - No additional installation needed\"'                         >> /entrypoint/primer.sh && \\\n\techo '   else'                                                                      >> /entrypoint/primer.sh && \\\n\techo '      apt-get update;'                                                        >> /entrypoint/primer.sh && \\\n\techo '      apt-get install -y $APTGET_INSTALL'                                     >> /entrypoint/primer.sh && \\\n\techo '   fi'                                                                        >> /entrypoint/primer.sh && \\\n\techo 'fi'                                                                           >> /entrypoint/primer.sh && \\\n\techo ''                                                                             >> /entrypoint/primer.sh && \\\n\techo '# APTGET_UPGRADE run'                                                         >> /entrypoint/primer.sh && \\\n\techo 'if [ \"$APTGET_UPGRADE\" = true ] || [ \"$APTGET_UPGRADE\" = \"true\" ] ; then'     >> /entrypoint/primer.sh && \\\n\techo '   echo \"### Running APTGET_UPGRADE\"'                                         >> /entrypoint/primer.sh && \\\n\techo '   apt-get update; apt-get -y upgrade;'                                       >> /entrypoint/primer.sh && \\\n\techo 'fi'                                                                           >> /entrypoint/primer.sh && \\\n\techo ''                                                                             >> /entrypoint/primer.sh && \\\n\techo '# APTGET_POSTSCRIPT run'                                                      >> /entrypoint/primer.sh && \\\n\techo 'if [ -n \"$APTGET_POSTSCRIPT\" ] ; then'                                        >> /entrypoint/primer.sh && \\\n\techo '   echo \"### Running APTGET_POSTSCRIPT\"'                                      >> /entrypoint/primer.sh && \\\n\techo '   eval \"$APTGET_POSTSCRIPT\";'                                                >> /entrypoint/primer.sh && \\\n\techo 'fi'                                                                           >> /entrypoint/primer.sh && \\\n\techo ''                                                                             >> /entrypoint/primer.sh && \\\n\techo 'echo \"###\"'                                                                   >> /entrypoint/primer.sh && \\\n\techo 'echo \"### Finished picoded/ubuntu-base : entrypoint/primer.sh\"'               >> /entrypoint/primer.sh && \\\n\techo 'echo \"###\"'                                                                   >> /entrypoint/primer.sh && \\\n\techo ''                                                                             >> /entrypoint/primer.sh && \\\n\techo '# Chain the execution commands'                                               >> /entrypoint/primer.sh && \\\n\techo 'exec \"$@\"'                                                                    >> /entrypoint/primer.sh && \\\n\tchmod +x /entrypoint/primer.sh;\n\n#\n# Useful for build debugging\n#\n# RUN cat /entrypoint/primer.sh;\n\n#\n# Runs with entry point and command\n#\nENTRYPOINT [\"/entrypoint/primer.sh\"]\nCMD echo \"### hello world : overwrite your actual command here\"\n"
}