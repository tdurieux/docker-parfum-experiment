{
  "startTime": 1674241508935,
  "endTime": 1674241509117,
  "originalSmells": [
    {
      "rule": "yumInstallRmVarCacheYum",
      "position": {
        "lineStart": 21,
        "lineEnd": 21,
        "columnStart": 2,
        "columnEnd": 54
      }
    },
    {
      "rule": "yumInstallRmVarCacheYum",
      "position": {
        "lineStart": 63,
        "lineEnd": 63,
        "columnStart": 2,
        "columnEnd": 64
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM rhscl/ruby-25-rhel7:latest as builder\n\nMAINTAINER OpenShift Development <dev@lists.openshift.redhat.com>\n\nENV DATA_VERSION=1.6.0 \\\n    FLUENTD_VERSION=1.5.1 \\\n    HOME=/opt/app-root/src \\\n    PATH=/opt/app-root/src/bin:/opt/app-root/bin:$PATH \\\n    LOGGING_FILE_PATH=/var/log/fluentd/fluentd.log \\\n    LOGGING_FILE_AGE=10 \\\n    LOGGING_FILE_SIZE=1024000 \\\n    container=oci\n\nARG TEST_REPO\n#ADD test.repo /etc/yum.repos.d\n\nUSER 0\nRUN yum-config-manager --enable rhel-7-server-ose-4.1-rpms && \\\n  INSTALL_PKGS=\"make gcc-c++ libffi-devel \\\n      autoconf automake libtool m4 \\\n      redhat-rpm-config\" && \\\n  yum install -y --setopt=tsflags=nodocs $INSTALL_PKGS && \\\n  rpm -V $INSTALL_PKGS && \\\n  yum clean all && rm -rf /var/cache/yum\n\n# uncomment if you want to try out test rpm builds\n#ADD *.rpm /tmp/\n#RUN yum -y install /tmp/*.rpm\n\nADD jemalloc/ ${HOME}/jemalloc/\nRUN cd ${HOME}/jemalloc && EXTRA_CFLAGS=\"$( rpm --eval '%{optflags}' )\" ./autogen.sh && \\\n    make install_lib_shared install_bin && cp COPYING ${HOME}/COPYING.jemalloc && \\\n    cd .. && rm -rf jemalloc\n\nADD source.jemalloc /source.jemalloc\nRUN bash -c '. /source.jemalloc; echo jemalloc $JEMALLOC_VER >> /contents'\n\nADD vendored_gem_src/ ${HOME}/vendored_gem_src/\nADD install-gems.sh *.patch.sh *.patch ${HOME}/vendored_gem_src/\n\nRUN cd ${HOME}/vendored_gem_src/ && ./install-gems.sh && cd / && rm -rf ${HOME}/vendored_gem_src/\n\nFROM rhel7:7-released\n\nENV DATA_VERSION=1.6.0 \\\n    FLUENTD_VERSION=1.5.1 \\\n    HOME=/opt/app-root/src \\\n    PATH=/opt/app-root/src/bin:/opt/app-root/bin:$PATH \\\n    LOGGING_FILE_PATH=/var/log/fluentd/fluentd.log \\\n    LOGGING_FILE_AGE=10 \\\n    LOGGING_FILE_SIZE=1024000 \\\n    container=oci\n\n#ADD test.repo /etc/yum.repos.d\nUSER 0\nRUN yum-config-manager --enable rhel-7-server-ose-4.1-rpms \\\n    --enable rhscl-3.2-rh-ruby25-rhel-7> /dev/null && \\\n  INSTALL_PKGS=\"hostname \\\n                bc \\\n                iproute\" && \\\n  SCL_PKGS=\"rh-ruby25 rh-ruby25-runtime rh-ruby25-ruby rh-ruby25-rubygem-openssl \\\n            rh-ruby25-rubygem-json rh-ruby25-ruby-libs rh-ruby25-rubygems \\\n            rh-ruby25-ruby-irb\" && \\\n  yum install -y --setopt=tsflags=nodocs $INSTALL_PKGS $SCL_PKGS && \\\n  rpm -V $INSTALL_PKGS $SCL_PKGS && \\\n  yum clean all && rm -rf /var/cache/yum\n\nCOPY --from=builder /opt/rh/rh-ruby25/root/usr/local/share/gems/gems/** /opt/rh/rh-ruby25/root/usr/local/share/gems/gems/\nCOPY --from=builder /opt/rh/rh-ruby25/root/usr/local/share/gems/specifications/** /opt/rh/rh-ruby25/root/usr/local/share/gems/specifications/\nCOPY --from=builder /opt/rh/rh-ruby25/root/usr/local/share/gems/extensions/** /opt/rh/rh-ruby25/root/usr/local/share/gems/extensions/\nCOPY --from=builder /opt/rh/rh-ruby25/root/usr/local/lib64/gems/ruby/** /opt/rh/rh-ruby25/root/usr/local/lib64/gems/ruby/\nCOPY --from=builder /opt/rh/rh-ruby25/root/usr/local/lib/** /opt/rh/rh-ruby25/root/usr/local/lib/\nCOPY --from=builder /opt/rh/rh-ruby25/root/usr/local/bin/** /opt/rh/rh-ruby25/root/usr/local/bin/\nCOPY --from=builder /usr/local/lib/** /usr/local/lib/\nCOPY --from=builder /usr/local/bin/** /usr/local/bin/\nCOPY --from=builder /contents /contents\n\nRUN mkdir -p /etc/fluent/plugin\nADD configs.d/ /etc/fluent/configs.d/\nADD out_syslog_buffered.rb out_syslog.rb out_rawtcp.rb /etc/fluent/plugin/\nADD parser_viaq_docker_audit.rb viaq_docker_audit.rb /etc/fluent/plugin/\nADD run.sh generate_syslog_config.rb ${HOME}/\nADD lib/generate_throttle_configs/lib/*.rb ${HOME}/\nADD lib/filter_parse_json_field/lib/*.rb /etc/fluent/plugin/\nADD lib/filter_elasticsearch_genid_ext/lib/filter_elasticsearch_genid_ext.rb /etc/fluent/plugin/\nCOPY utils/** /usr/local/bin/\n\nRUN mkdir -p /etc/fluent/configs.d/{dynamic,user} && \\\n    chmod 777 /etc/fluent/configs.d/dynamic && \\\n    ln -s /etc/fluent/configs.d/user/fluent.conf /etc/fluent/fluent.conf\n\nWORKDIR ${HOME}\nCMD [\"scl\", \"enable\", \"rh-ruby25\", \"--\", \"sh\", \"run.sh\"]\n\nLABEL io.k8s.display-name=Fluentd\n\nLABEL \\\n        io.k8s.description=\"Fluentd container for collecting of container logs\" \\\n        com.redhat.component=\"logging-fluentd-container\" \\\n        vendor=\"Red Hat\" \\\n        name=\"openshift3/logging-fluentd\" \\\n        License=\"GPLv2+\" \\\n        io.k8s.display-name=\"Fluentd\" \\\n        version=\"v4.0.0\" \\\n        architecture=\"x86_64\" \\\n        release=\"0.0.0.0\" \\\n        io.openshift.tags=\"logging,elk,fluentd\"\n"
}