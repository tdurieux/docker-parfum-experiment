{
  "startTime": 1674235564544,
  "endTime": 1674235564728,
  "originalSmells": [
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 29,
        "lineEnd": 47,
        "columnStart": 5,
        "columnEnd": 6
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "########## Dockerfile for SugarCRM version 6.5.26 #########\n#\n# This Dockerfile builds a basic installation of SugarCRM.\n#\n# SugarCRM is a Customer Relationship Management platform which is widely used and recognized as the most successful tool for managing customers by many large companies over the world.\n# Sugar provides an easy-to-use CRM interface focused on features that matter and nothing more.\n#\n# To build this image, from the directory containing this Dockerfile\n# (assuming that the file is named Dockerfile):\n# docker build -t <image_name> .\n#\n# Start container & Complete SugarCRM installation at http://<Sugar-host-ip>:<port_number>/Sugar/install.php\n# docker run -d --name <container_name> -p <host_port>:80 -p <host_port>:3306 <image>\n# e.g. docker run -d --name Sugar -p 88:80 -p 3307:3306 sugar\n#\n# Official website: https://www.sugarcrm.com/\n#\n###################################################################################\n\n# Base Image\nFROM s390x/ubuntu:16.04\n\n# The author\nMAINTAINER  LoZ Open Source Ecosystem (https://www.ibm.com/developerworks/community/groups/community/lozopensource)\n\nENV DEBIAN_FRONTEND noninteractive\n\n# Install dependencies\nRUN apt-get update \\\n  && apt-get install --no-install-recommends -y \\\n\t\tapache2 \\\n\t\tcurl \\\n\t\tlibapache2-mod-php7.0 \\\n\t\tmysql-server \\\n\t\tphp7.0 \\\n        php7.0-mysql \\\n        php7.0-mcrypt \\\n        php7.0-cli \\\n        php7.0-common \\\n        php7.0-curl \\\n        php7.0-dev \\\n\t\tphp7.0-gd \\\n\t\tphp7.0-imap \\\n\t\tphp7.0-mbstring \\\n\t\tphp7.0-xml \\\n\t\tphp7.0-zip \\\n\t\tunzip \\\n\t\twget \\\n\n# Modifying Apache configuration file\n    && cd /etc/apache2 \\\n\t&& chmod 755 apache2.conf \\\n\t&& echo \"AddType application/x-httpd-php .php\" >> apache2.conf \\\n\t&& echo \"ServerName localhost\" >> apache2.conf \\\n\t&& echo \"<Directory \"/var/www/html/\">\" >> apache2.conf \\\n\t&& echo \"AllowOverride  All\" >> apache2.conf \\\n\t&& echo \"</Directory>\" >> apache2.conf \\\n\t&& a2enmod rewrite \\\n\n# Change in Memory requirements\t\n\t&& sed -i 's/memory_limit = 128M/memory_limit = 768M/g' /etc/php/7.0/apache2/php.ini \\\n\t&& sed -i 's/post_max_size = 8M/post_max_size = 24M/g' /etc/php/7.0/apache2/php.ini \\\n\t&& sed -i 's/upload_max_filesize = 2M/upload_max_filesize = 16M/g' /etc/php/7.0/apache2/php.ini \\\n\t&& sed -i 's/variables_order = \"GPCS\"/variables_order = \"EGPCS\"/g' /etc/php/7.0/apache2/php.ini \\\n\t&& phpenmod imap && phpenmod zip && phpenmod mbstring && service apache2 start \\\n\n# Start mysql server and create database for Sugar\n    && service mysql start && sleep 15s && mysql -e \"create database sugarcrm;\" \\\n    && mysql -e \"create user sugar@localhost identified by 'sugar';\" \\\n    && mysql -e \"grant all privileges on sugarcrm.* to 'sugar'@'localhost' identified by 'sugar';\" \\\n\n# Download and build source code of Sugar\n    && chown -R www-data:www-data /var/www/html/ && chmod -R a+w /var/www/html/ && cd /var/www/html/ \\\n\t&& wget https://downloads.sourceforge.net/project/sugarcrm/OldFiles/1%20-%20SugarCRM%206.5.X/SugarCommunityEdition-6.5.X/SugarCE-6.5.26.zip \\\n    && unzip SugarCE-6.5.26.zip \\\n    && mv SugarCE-Full-6.5.26 Sugar && chmod -R a+w Sugar \\\n\n# Clean up of unused packages\n    && apt-get remove -y \\\n            curl  \\\n            unzip \\\n            wget \\\n\n    && apt-get autoremove -y \\\n    && apt autoremove -y \\\n    && apt-get clean \\\n    && rm -rf  /var/lib/apt/lists/* /var/www/html/SugarCE-6.5.26.zip\n\n# Define mount point\nVOLUME /var/www/html\n\n# Expose ports for mysql and apache2\nEXPOSE 80 3306\n\n# Start apache2 and mysql sever\nCMD service mysql start && apachectl -D FOREGROUND\n\n# End of Dockerfile\n"
}