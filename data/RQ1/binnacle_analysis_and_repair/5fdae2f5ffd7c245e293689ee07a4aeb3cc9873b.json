{
  "startTime": 1674241785678,
  "endTime": 1674241785975,
  "originalSmells": [
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 7,
        "lineEnd": 7,
        "columnStart": 4,
        "columnEnd": 74
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 24,
        "lineEnd": 24,
        "columnStart": 4,
        "columnEnd": 56
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 27,
        "lineEnd": 27,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 33,
        "lineEnd": 33,
        "columnStart": 4,
        "columnEnd": 61
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 37,
        "lineEnd": 37,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 41,
        "lineEnd": 41,
        "columnStart": 4,
        "columnEnd": 47
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 50,
        "lineEnd": 50,
        "columnStart": 4,
        "columnEnd": 28
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 56,
        "lineEnd": 56,
        "columnStart": 63,
        "columnEnd": 129
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 67,
        "lineEnd": 67,
        "columnStart": 4,
        "columnEnd": 44
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 7,
        "lineEnd": 7,
        "columnStart": 4,
        "columnEnd": 74
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 24,
        "lineEnd": 24,
        "columnStart": 4,
        "columnEnd": 56
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 27,
        "lineEnd": 27,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 33,
        "lineEnd": 33,
        "columnStart": 4,
        "columnEnd": 61
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 37,
        "lineEnd": 37,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 41,
        "lineEnd": 41,
        "columnStart": 4,
        "columnEnd": 47
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 50,
        "lineEnd": 50,
        "columnStart": 4,
        "columnEnd": 28
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 56,
        "lineEnd": 56,
        "columnStart": 63,
        "columnEnd": 129
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 67,
        "lineEnd": 67,
        "columnStart": 4,
        "columnEnd": 44
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 7,
        "lineEnd": 7,
        "columnStart": 4,
        "columnEnd": 74
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 24,
        "lineEnd": 24,
        "columnStart": 4,
        "columnEnd": 56
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 27,
        "lineEnd": 27,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 33,
        "lineEnd": 33,
        "columnStart": 4,
        "columnEnd": 61
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 37,
        "lineEnd": 37,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 41,
        "lineEnd": 41,
        "columnStart": 4,
        "columnEnd": 47
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 50,
        "lineEnd": 50,
        "columnStart": 4,
        "columnEnd": 28
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 56,
        "lineEnd": 56,
        "columnStart": 63,
        "columnEnd": 129
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 67,
        "lineEnd": 67,
        "columnStart": 4,
        "columnEnd": 44
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 7,
        "lineEnd": 7,
        "columnStart": 4,
        "columnEnd": 98
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 24,
        "lineEnd": 24,
        "columnStart": 4,
        "columnEnd": 80
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 27,
        "lineEnd": 27,
        "columnStart": 4,
        "columnEnd": 54
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 33,
        "lineEnd": 33,
        "columnStart": 4,
        "columnEnd": 85
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 37,
        "lineEnd": 37,
        "columnStart": 4,
        "columnEnd": 54
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 41,
        "lineEnd": 41,
        "columnStart": 4,
        "columnEnd": 71
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 50,
        "lineEnd": 50,
        "columnStart": 4,
        "columnEnd": 52
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 57,
        "lineEnd": 57,
        "columnStart": 1,
        "columnEnd": 91
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 68,
        "lineEnd": 68,
        "columnStart": 4,
        "columnEnd": 68
      }
    }
  ],
  "repairedDockerfile": "FROM baylibre/lava-slave-base:2019.03_stretch\n\nRUN apt-get update\n\n# cu conmux is for console via conmux\n# telnet is for using ser2net\n# git is necessary for checkout tests\nRUN DEBIAN_FRONTEND=noninteractive apt-get --no-install-recommends -y install cu conmux telnet git && rm -rf /var/lib/apt/lists/*;\n\nCOPY configs/lava-slave /etc/lava-dispatcher/lava-slave\n\nCOPY configs/tftpd-hpa /etc/default/tftpd-hpa\n\nCOPY scripts/ /usr/local/bin/\nRUN chmod a+x /usr/local/bin/*\nCOPY conmux/ /etc/conmux/\n\n# Caution to not use any port between the Linux dynamic port range: 32768-60999\nRUN find /usr/lib/python3/dist-packages/ -iname constants.py | xargs sed -i 's,XNBD_PORT_RANGE_MIN.*,XNBD_PORT_RANGE_MIN=61950,'\nRUN find /usr/lib/python3/dist-packages/ -iname constants.py | xargs sed -i 's,XNBD_PORT_RANGE_MAX.*,XNBD_PORT_RANGE_MAX=62000,'\n\n#conmux need cu >= 1.07-24 See https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=336996\nRUN echo \"deb http://deb.debian.org/debian/ testing main\" >> /etc/apt/sources.list.d/testing.list\nRUN apt-get update\nRUN DEBIAN_FRONTEND=noninteractive apt-get --no-install-recommends -y install cu && rm -rf /var/lib/apt/lists/*;\nRUN rm /etc/apt/sources.list.d/testing.list\n\nRUN apt-get -y --no-install-recommends install ser2net && rm -rf /var/lib/apt/lists/*;\nCOPY ser2net.conf /etc\n\n# ser2net > 3.2 is only availlable from sid\nRUN echo \"deb http://deb.debian.org/debian/ sid main\" >> /etc/apt/sources.list.d/sid.list\nRUN apt-get update\nRUN DEBIAN_FRONTEND=noninteractive apt-get --no-install-recommends -y install ser2net && rm -rf /var/lib/apt/lists/*;\nRUN rm /etc/apt/sources.list.d/sid.list\nRUN apt-get update\n\nRUN apt-get -y --no-install-recommends install lavacli && rm -rf /var/lib/apt/lists/*;\n\n# PXE stuff\nRUN if [ $(uname -m) != amd64 ]; then dpkg --add-architecture amd64 && apt-get update; fi\nRUN apt-get -y --no-install-recommends install grub-efi-amd64-bin:amd64 && rm -rf /var/lib/apt/lists/*;\nRUN if [ $(uname -m) != amd64 ]; then dpkg --remove architecture amd64 && apt-get update; fi\nCOPY grub.cfg /root/\n\nCOPY default/* /etc/default/\n\nCOPY phyhostname /root/\nCOPY scripts/setup.sh .\n\nRUN apt-get -y --no-install-recommends install patch && rm -rf /var/lib/apt/lists/*;\nCOPY lava-patch/ /root/lava-patch\nRUN cd /usr/lib/python3/dist-packages && for patch in $(ls /root/lava-patch/*patch) ; do patch -p1 < $patch || exit $?;done\n\nRUN mkdir /etc/lava-coordinator/\nCOPY lava-coordinator/* /etc/lava-coordinator/\nRUN if [ -e /etc/lava-coordinator/lava-coordinator.cnf ]; then \\\n DEBIAN_FRONTEND=noninteractive apt-get --no-install-recommends -y install lava-coordinator && mv /etc/lava-coordinator/lava-coordinator.cnf /etc/lava-coordinator/lava-coordinator.conf; rm -rf /var/lib/apt/lists/*; fi\n\n# needed for lavacli identities\nRUN mkdir -p /root/.config\n\nCOPY devices/ /root/devices/\nCOPY tags/ /root/tags/\nCOPY deviceinfo/ /root/deviceinfo/\n\nRUN if [ -x /usr/local/bin/extra_actions ] ; then /usr/local/bin/extra_actions ; fi\n\nRUN apt-get -y --no-install-recommends install screen openssh-server && rm -rf /var/lib/apt/lists/*;\nRUN ssh-keygen -q -f /root/.ssh/id_rsa\nRUN cat /root/.ssh/id_rsa.pub > /root/.ssh/authorized_keys\nCOPY lava-screen.conf /root/\n\nCOPY zmq_auth/ /etc/lava-dispatcher/certificates.d/\n\nEXPOSE 69/udp 80\n\nCMD /start.sh\n"
}