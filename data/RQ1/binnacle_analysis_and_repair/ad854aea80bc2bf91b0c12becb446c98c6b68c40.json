{
  "startTime": 1674240779079,
  "endTime": 1674240779306,
  "originalSmells": [
    {
      "rule": "wgetUseHttpsUrl",
      "position": {
        "lineStart": 14,
        "lineEnd": 14,
        "columnStart": 4,
        "columnEnd": 92
      }
    },
    {
      "rule": "wgetUseHttpsUrl",
      "position": {
        "lineStart": 44,
        "lineEnd": 44,
        "columnStart": 4,
        "columnEnd": 74
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 18,
        "lineEnd": 18,
        "columnStart": 9,
        "columnEnd": 44
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 19,
        "lineEnd": 19,
        "columnStart": 9,
        "columnEnd": 46
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 20,
        "lineEnd": 20,
        "columnStart": 9,
        "columnEnd": 33
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 21,
        "lineEnd": 21,
        "columnStart": 9,
        "columnEnd": 37
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 22,
        "lineEnd": 22,
        "columnStart": 9,
        "columnEnd": 31
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 23,
        "lineEnd": 23,
        "columnStart": 9,
        "columnEnd": 39
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 24,
        "lineEnd": 24,
        "columnStart": 9,
        "columnEnd": 72
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 18,
        "lineEnd": 18,
        "columnStart": 9,
        "columnEnd": 44
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 19,
        "lineEnd": 19,
        "columnStart": 9,
        "columnEnd": 46
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 20,
        "lineEnd": 20,
        "columnStart": 9,
        "columnEnd": 33
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 21,
        "lineEnd": 21,
        "columnStart": 9,
        "columnEnd": 37
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 22,
        "lineEnd": 22,
        "columnStart": 9,
        "columnEnd": 31
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 23,
        "lineEnd": 23,
        "columnStart": 9,
        "columnEnd": 39
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 24,
        "lineEnd": 24,
        "columnStart": 9,
        "columnEnd": 72
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 18,
        "lineEnd": 18,
        "columnStart": 9,
        "columnEnd": 44
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 19,
        "lineEnd": 19,
        "columnStart": 9,
        "columnEnd": 46
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 20,
        "lineEnd": 20,
        "columnStart": 9,
        "columnEnd": 33
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 21,
        "lineEnd": 21,
        "columnStart": 9,
        "columnEnd": 37
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 22,
        "lineEnd": 22,
        "columnStart": 9,
        "columnEnd": 31
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 23,
        "lineEnd": 23,
        "columnStart": 9,
        "columnEnd": 39
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 24,
        "lineEnd": 24,
        "columnStart": 9,
        "columnEnd": 72
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 18,
        "lineEnd": 18,
        "columnStart": 9,
        "columnEnd": 68
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 19,
        "lineEnd": 19,
        "columnStart": 9,
        "columnEnd": 70
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 20,
        "lineEnd": 20,
        "columnStart": 9,
        "columnEnd": 57
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 21,
        "lineEnd": 21,
        "columnStart": 9,
        "columnEnd": 61
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 22,
        "lineEnd": 22,
        "columnStart": 9,
        "columnEnd": 55
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 23,
        "lineEnd": 23,
        "columnStart": 9,
        "columnEnd": 63
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 24,
        "lineEnd": 24,
        "columnStart": 9,
        "columnEnd": 96
      }
    }
  ],
  "repairedDockerfile": "FROM nimmis/java:14.04-oracle-8-jdk\nMAINTAINER Martin Chalupa <chalimartines@gmail.com>\n\n# Base image doesn't start in root\nWORKDIR /\n\n# Add the CDH 5 repository\nCOPY conf/cloudera.list /etc/apt/sources.list.d/cloudera.list\n# Set preference for cloudera packages\nCOPY conf/cloudera.pref /etc/apt/preferences.d/cloudera.pref\n# Add repository for python installation\nCOPY conf/python.list /etc/apt/sources.list.d/python.list\n\n# Add a Repository Key\nRUN wget https://archive.cloudera.com/cdh5/ubuntu/trusty/amd64/cdh/archive.key -O archive.key && sudo apt-key add archive.key && \\\n    sudo apt-get update\n\n# Install CDH package and dependencies\nRUN sudo apt-get install --no-install-recommends -y zookeeper-server && \\\n    sudo apt-get install --no-install-recommends -y hadoop-conf-pseudo && \\\n    sudo apt-get install --no-install-recommends -y oozie && \\\n    sudo apt-get install --no-install-recommends -y python2.7 && \\\n    sudo apt-get install --no-install-recommends -y hue && \\\n    sudo apt-get install --no-install-recommends -y hue-plugins && \\\n    sudo apt-get install --no-install-recommends -y spark-core spark-history-server spark-python && rm -rf /var/lib/apt/lists/*;\n\n# Copy updated config files\nCOPY conf/core-site.xml /etc/hadoop/conf/core-site.xml\nCOPY conf/hdfs-site.xml /etc/hadoop/conf/hdfs-site.xml\nCOPY conf/mapred-site.xml /etc/hadoop/conf/mapred-site.xml\nCOPY conf/hadoop-env.sh /etc/hadoop/conf/hadoop-env.sh\nCOPY conf/yarn-site.xml /etc/hadoop/conf/yarn-site.xml\nCOPY conf/fair-scheduler.xml /etc/hadoop/conf/fair-scheduler.xml\nCOPY conf/oozie-site.xml /etc/oozie/conf/oozie-site.xml\nCOPY conf/spark-defaults.conf /etc/spark/conf/spark-defaults.conf\nCOPY conf/hue.ini /etc/hue/conf/hue.ini\n\n# Format HDFS\nRUN sudo -u hdfs hdfs namenode -format\n\nCOPY conf/run-hadoop.sh /usr/bin/run-hadoop.sh\nRUN chmod +x /usr/bin/run-hadoop.sh\n\nRUN sudo -u oozie /usr/lib/oozie/bin/ooziedb.sh create -run && \\\n    wget https://archive.cloudera.com/gplextras/misc/ext-2.2.zip -O ext.zip && \\\n    unzip ext.zip -d /var/lib/oozie\n\n#uninstall not necessary hue apps\nRUN /usr/lib/hue/tools/app_reg/app_reg.py --remove hbase && \\\n    /usr/lib/hue/tools/app_reg/app_reg.py --remove impala && \\\n    /usr/lib/hue/tools/app_reg/app_reg.py --remove spark && \\   \n    /usr/lib/hue/tools/app_reg/app_reg.py --remove rdbms && \\\n    /usr/lib/hue/tools/app_reg/app_reg.py --remove search && \\\n    /usr/lib/hue/tools/app_reg/app_reg.py --remove sqoop && \\    \n    /usr/lib/hue/tools/app_reg/app_reg.py --remove zookeeper && \\\n    /usr/lib/hue/tools/app_reg/app_reg.py --remove security\n\n# NameNode (HDFS)\nEXPOSE 8020 50070\n\n# DataNode (HDFS)\nEXPOSE 50010 50020 50075\n\n# ResourceManager (YARN)\nEXPOSE 8030 8031 8032 8033 8088\n\n# NodeManager (YARN)\nEXPOSE 8040 8042\n\n# JobHistoryServer\nEXPOSE 10020 19888\n\n# Hue\nEXPOSE 8888\n\n# Spark history server\nEXPOSE 18080\n\n# Technical port which can be used for your custom purpose.\nEXPOSE 9999\n\nCMD [\"/usr/bin/run-hadoop.sh\"]\n"
}