{
  "startTime": 1674235217272,
  "endTime": 1674235217549,
  "originalSmells": [
    {
      "rule": "apkAddUseNoCache",
      "position": {
        "lineStart": 4,
        "lineEnd": 39,
        "columnStart": 4,
        "columnEnd": 29
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM water/alpine\nMAINTAINER water youwater@gmail.com\n\n# 软件包安装\nRUN apk add --no-cache php7@community \\\n        php7-fpm@community \\\n        php7-opcache@community \\\n        php7-session@community \\\n        php7-xml@community \\\n        php7-ctype@community \\\n        php7-gd@community \\\n        php7-json@community \\\n        php7-posix@community \\\n        php7-curl@community \\\n        php7-dom@community \\\n        php7-pdo@community \\\n        php7-pdo_mysql@community \\\n        php7-sockets@community \\\n        php7-zlib@community \\\n        php7-mcrypt@community \\\n        php7-mysqli@community \\\n        php7-sqlite3@community \\\n        php7-bz2@community \\\n        php7-phar@community \\\n        php7-posix@community \\\n        php7-zip@community \\\n        php7-calendar@community \\\n        php7-iconv@community \\\n        php7-imap@community \\\n        php7-soap@community \\\n        php7-dev@community \\\n        php7-pear@community \\\n        php7-redis@testing \\\n        php7-mbstring@community \\\n        php7-xdebug@community \\\n        php7-exif@community \\\n        php7-xsl@community \\\n        php7-ldap@community \\\n        php7-openssl@community \\\n        php7-bcmath@community\n\nRUN ln -s /usr/bin/php7 /usr/bin/php\n\n# 从国内镜像安装composer，并配置成默认从国内镜像安装composer包\nRUN php -r \"readfile('http://install.phpcomposer.com/installer');\" | php -- --install-dir=/bin/ --filename=composer\nRUN composer config -g repo.packagist composer https://packagist.phpcomposer.com\n\n# 软件包参数配置\nENV PHP_MEMORY_LIMIT 512M\nENV MAX_UPLOAD 50M\nENV PHP_MAX_FILE_UPLOAD 200\nENV MAX_EXECUTION_TIME 600\nENV PHP_MAX_POST 100M\n\n# RUN touch /etc/php7/fpm.d/none.conf\nRUN chmod 777 -R /var/log/\n\nRUN echo \"zend_extension=xdebug.so\" > /etc/php7/conf.d/xdebug.ini \\\n    && echo \"xdebug.remote_enable=1\" >> /etc/php7/conf.d/xdebug.ini \\\n    && echo \"xdebug.remote_port=9000\" >> /etc/php7/conf.d/xdebug.ini \\\n    && echo \"xdebug.remote_log=/apps/logs/xdebug.log\" >> /etc/php7/conf.d/xdebug.ini \\\n    && echo \"xdebug.remote_mode=req\" >> /etc/php7/conf.d/xdebug.ini \\\n    && echo \"xdebug.idekey=PHPSTORM\" >> /etc/php7/conf.d/xdebug.ini \\\n    && echo \"xdebug.remote_host = 192.168.1.121\" >> /etc/php7/conf.d/xdebug.ini \\\n    && echo \"xdebug.remote_connect_back = 0\" >> /etc/php7/conf.d/xdebug.ini \\\n    && echo \"xdebug.remote_autostart=true\" >> /etc/php7/conf.d/xdebug.ini\n\nRUN sed -i -e \"s/;daemonize\\s*=\\s*yes/daemonize = no/g\" /etc/php7/php-fpm.conf && \\\nsed -i -e \"s/listen\\s*=\\s*127.0.0.1:9000/listen = 9000/g\" /etc/php7/php-fpm.d/www.conf && \\\nsed -i \"s|date.timezone =.*|date.timezone = ${TIMEZONE}|\" /etc/php7/php.ini && \\\nsed -i \"s|memory_limit =.*|memory_limit = ${PHP_MEMORY_LIMIT}|\" /etc/php7/php.ini && \\\nsed -i \"s|upload_max_filesize =.*|upload_max_filesize = ${MAX_UPLOAD}|\" /etc/php7/php.ini && \\\nsed -i \"s|max_file_uploads =.*|max_file_uploads = ${PHP_MAX_FILE_UPLOAD}|\" /etc/php7/php.ini && \\\nsed -i \"s|max_execution_time =.*|max_execution_time = ${MAX_EXECUTION_TIME}|\" /etc/php7/php.ini && \\\nsed -i \"s|post_max_size =.*|max_file_uploads = ${PHP_MAX_POST}|\" /etc/php7/php.ini && \\\nsed -i \"s/;cgi.fix_pathinfo=1/cgi.fix_pathinfo=0/\" /etc/php7/php.ini && \\\nsed -i \"s/error_reporting = E_ALL & ~E_DEPRECATED & ~E_STRICT/error_reporting = E_ALL/\" /etc/php7/php.ini && \\\nsed -i \"s/display_errors = Off/display_errors = On/\" /etc/php7/php.ini && \\\nsed -i \"s/;catch_workers_output = yes/catch_workers_output = yes/\" /etc/php7/php-fpm.conf && \\\nsed -i \"s/;error_log = php_errors.log/error_log = \\/apps\\/logs\\/php_errors.log/\" /etc/php7/php.ini && \\\nmkdir /apps\n\nWORKDIR /apps\n\nVOLUME /apps\n\n# 端口号配置\nEXPOSE 9000\n\n# 容器命令执行\nCMD [\"php-fpm7\"]\n"
}