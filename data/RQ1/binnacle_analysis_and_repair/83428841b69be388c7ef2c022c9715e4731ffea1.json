{
  "startTime": 1674249211631,
  "endTime": 1674249213300,
  "originalSmells": [
    {
      "rule": "wgetUseHttpsUrl",
      "position": {
        "lineStart": 102,
        "lineEnd": 102,
        "columnStart": 4,
        "columnEnd": 109
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 252,
        "lineEnd": 252,
        "columnStart": 4,
        "columnEnd": 29
      }
    },
    {
      "rule": "configureShouldUseBuildFlag",
      "position": {
        "lineStart": 128,
        "lineEnd": 128,
        "columnStart": 4,
        "columnEnd": 43
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 103,
        "lineEnd": 103,
        "columnStart": 4,
        "columnEnd": 48
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 46,
        "lineEnd": 46,
        "columnStart": 4,
        "columnEnd": 65
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 47,
        "lineEnd": 47,
        "columnStart": 4,
        "columnEnd": 60
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 48,
        "lineEnd": 48,
        "columnStart": 4,
        "columnEnd": 72
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 49,
        "lineEnd": 49,
        "columnStart": 4,
        "columnEnd": 65
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 50,
        "lineEnd": 50,
        "columnStart": 4,
        "columnEnd": 75
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 51,
        "lineEnd": 51,
        "columnStart": 4,
        "columnEnd": 60
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 52,
        "lineEnd": 61,
        "columnStart": 4,
        "columnEnd": 26
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 62,
        "lineEnd": 62,
        "columnStart": 4,
        "columnEnd": 63
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 63,
        "lineEnd": 63,
        "columnStart": 4,
        "columnEnd": 66
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 64,
        "lineEnd": 69,
        "columnStart": 4,
        "columnEnd": 22
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 70,
        "lineEnd": 73,
        "columnStart": 4,
        "columnEnd": 15
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 74,
        "lineEnd": 82,
        "columnStart": 4,
        "columnEnd": 21
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 83,
        "lineEnd": 83,
        "columnStart": 4,
        "columnEnd": 61
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 84,
        "lineEnd": 84,
        "columnStart": 4,
        "columnEnd": 63
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 85,
        "lineEnd": 85,
        "columnStart": 4,
        "columnEnd": 64
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 86,
        "lineEnd": 86,
        "columnStart": 4,
        "columnEnd": 65
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 87,
        "lineEnd": 90,
        "columnStart": 4,
        "columnEnd": 18
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 91,
        "lineEnd": 91,
        "columnStart": 4,
        "columnEnd": 64
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 108,
        "lineEnd": 108,
        "columnStart": 4,
        "columnEnd": 61
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 135,
        "lineEnd": 135,
        "columnStart": 8,
        "columnEnd": 64
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 136,
        "lineEnd": 136,
        "columnStart": 8,
        "columnEnd": 74
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 137,
        "lineEnd": 137,
        "columnStart": 8,
        "columnEnd": 72
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 138,
        "lineEnd": 138,
        "columnStart": 8,
        "columnEnd": 64
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 139,
        "lineEnd": 139,
        "columnStart": 8,
        "columnEnd": 64
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 140,
        "lineEnd": 140,
        "columnStart": 8,
        "columnEnd": 64
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 141,
        "lineEnd": 141,
        "columnStart": 8,
        "columnEnd": 64
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 142,
        "lineEnd": 142,
        "columnStart": 8,
        "columnEnd": 59
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 143,
        "lineEnd": 143,
        "columnStart": 8,
        "columnEnd": 68
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 144,
        "lineEnd": 144,
        "columnStart": 8,
        "columnEnd": 69
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 145,
        "lineEnd": 145,
        "columnStart": 8,
        "columnEnd": 72
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 146,
        "lineEnd": 146,
        "columnStart": 8,
        "columnEnd": 70
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 251,
        "lineEnd": 251,
        "columnStart": 4,
        "columnEnd": 60
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 44,
        "lineEnd": 45,
        "columnStart": 22,
        "columnEnd": 13
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 46,
        "lineEnd": 46,
        "columnStart": 4,
        "columnEnd": 65
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 47,
        "lineEnd": 47,
        "columnStart": 4,
        "columnEnd": 60
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 48,
        "lineEnd": 48,
        "columnStart": 4,
        "columnEnd": 72
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 49,
        "lineEnd": 49,
        "columnStart": 4,
        "columnEnd": 65
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 50,
        "lineEnd": 50,
        "columnStart": 4,
        "columnEnd": 75
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 51,
        "lineEnd": 51,
        "columnStart": 4,
        "columnEnd": 60
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 52,
        "lineEnd": 61,
        "columnStart": 4,
        "columnEnd": 26
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 62,
        "lineEnd": 62,
        "columnStart": 4,
        "columnEnd": 63
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 63,
        "lineEnd": 63,
        "columnStart": 4,
        "columnEnd": 66
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 64,
        "lineEnd": 69,
        "columnStart": 4,
        "columnEnd": 22
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 70,
        "lineEnd": 73,
        "columnStart": 4,
        "columnEnd": 15
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 74,
        "lineEnd": 82,
        "columnStart": 4,
        "columnEnd": 21
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 83,
        "lineEnd": 83,
        "columnStart": 4,
        "columnEnd": 61
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 84,
        "lineEnd": 84,
        "columnStart": 4,
        "columnEnd": 63
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 85,
        "lineEnd": 85,
        "columnStart": 4,
        "columnEnd": 64
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 86,
        "lineEnd": 86,
        "columnStart": 4,
        "columnEnd": 65
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 87,
        "lineEnd": 90,
        "columnStart": 4,
        "columnEnd": 18
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 91,
        "lineEnd": 91,
        "columnStart": 4,
        "columnEnd": 64
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 108,
        "lineEnd": 108,
        "columnStart": 4,
        "columnEnd": 61
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 135,
        "lineEnd": 135,
        "columnStart": 8,
        "columnEnd": 64
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 136,
        "lineEnd": 136,
        "columnStart": 8,
        "columnEnd": 74
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 137,
        "lineEnd": 137,
        "columnStart": 8,
        "columnEnd": 72
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 138,
        "lineEnd": 138,
        "columnStart": 8,
        "columnEnd": 64
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 139,
        "lineEnd": 139,
        "columnStart": 8,
        "columnEnd": 64
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 140,
        "lineEnd": 140,
        "columnStart": 8,
        "columnEnd": 64
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 141,
        "lineEnd": 141,
        "columnStart": 8,
        "columnEnd": 64
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 142,
        "lineEnd": 142,
        "columnStart": 8,
        "columnEnd": 59
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 143,
        "lineEnd": 143,
        "columnStart": 8,
        "columnEnd": 68
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 144,
        "lineEnd": 144,
        "columnStart": 8,
        "columnEnd": 69
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 145,
        "lineEnd": 145,
        "columnStart": 8,
        "columnEnd": 72
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 146,
        "lineEnd": 146,
        "columnStart": 8,
        "columnEnd": 70
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 251,
        "lineEnd": 251,
        "columnStart": 4,
        "columnEnd": 60
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 46,
        "lineEnd": 46,
        "columnStart": 4,
        "columnEnd": 65
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 47,
        "lineEnd": 47,
        "columnStart": 4,
        "columnEnd": 60
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 48,
        "lineEnd": 48,
        "columnStart": 4,
        "columnEnd": 72
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 49,
        "lineEnd": 49,
        "columnStart": 4,
        "columnEnd": 65
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 50,
        "lineEnd": 50,
        "columnStart": 4,
        "columnEnd": 75
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 51,
        "lineEnd": 51,
        "columnStart": 4,
        "columnEnd": 60
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 52,
        "lineEnd": 61,
        "columnStart": 4,
        "columnEnd": 26
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 62,
        "lineEnd": 62,
        "columnStart": 4,
        "columnEnd": 63
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 63,
        "lineEnd": 63,
        "columnStart": 4,
        "columnEnd": 66
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 64,
        "lineEnd": 69,
        "columnStart": 4,
        "columnEnd": 22
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 70,
        "lineEnd": 73,
        "columnStart": 4,
        "columnEnd": 15
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 74,
        "lineEnd": 82,
        "columnStart": 4,
        "columnEnd": 21
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 83,
        "lineEnd": 83,
        "columnStart": 4,
        "columnEnd": 61
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 84,
        "lineEnd": 84,
        "columnStart": 4,
        "columnEnd": 63
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 85,
        "lineEnd": 85,
        "columnStart": 4,
        "columnEnd": 64
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 86,
        "lineEnd": 86,
        "columnStart": 4,
        "columnEnd": 65
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 87,
        "lineEnd": 90,
        "columnStart": 4,
        "columnEnd": 18
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 91,
        "lineEnd": 91,
        "columnStart": 4,
        "columnEnd": 64
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 108,
        "lineEnd": 108,
        "columnStart": 4,
        "columnEnd": 61
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 135,
        "lineEnd": 135,
        "columnStart": 8,
        "columnEnd": 64
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 136,
        "lineEnd": 136,
        "columnStart": 8,
        "columnEnd": 74
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 137,
        "lineEnd": 137,
        "columnStart": 8,
        "columnEnd": 72
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 138,
        "lineEnd": 138,
        "columnStart": 8,
        "columnEnd": 64
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 139,
        "lineEnd": 139,
        "columnStart": 8,
        "columnEnd": 64
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 140,
        "lineEnd": 140,
        "columnStart": 8,
        "columnEnd": 64
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 141,
        "lineEnd": 141,
        "columnStart": 8,
        "columnEnd": 64
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 142,
        "lineEnd": 142,
        "columnStart": 8,
        "columnEnd": 59
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 143,
        "lineEnd": 143,
        "columnStart": 8,
        "columnEnd": 68
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 144,
        "lineEnd": 144,
        "columnStart": 8,
        "columnEnd": 69
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 145,
        "lineEnd": 145,
        "columnStart": 8,
        "columnEnd": 72
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 146,
        "lineEnd": 146,
        "columnStart": 8,
        "columnEnd": 70
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 251,
        "lineEnd": 251,
        "columnStart": 4,
        "columnEnd": 60
      }
    }
  ],
  "repairedDockerfile": "# Copyright 2018 The SAF Authors. All Rights Reserved.\n#\n# Licensed under the Apache License, Version 2.0 (the \"License\");\n# you may not use this file except in compliance with the License.\n# You may obtain a copy of the License at\n#\n#     http://www.apache.org/licenses/LICENSE-2.0\n#\n# Unless required by applicable law or agreed to in writing, software\n# distributed under the License is distributed on an \"AS IS\" BASIS,\n# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n# See the License for the specific language governing permissions and\n# limitations under the License.\n\n# Dokerfile for building SAF with OpenVINO (CVSDK)\n#\n#   Usage: sudo docker build -f Dockerfile . -t saf \\\n#                            --build-arg USE_VDMS=ON \\\n#                            --build-arg GITHUB_TOKEN=<OAuth-string> \\\n#                            --build-arg GITHUB_URL=<GitHub-URL>\n#                            --build-arg SAF_HASH=<commit-id>\n#\n#   When building under within VPN, add the following to your build command:\n#     --build-arg http_proxy=<protocol>://<hostname>:<port>\n#     --build-arg https_proxy=<protocol>://<hostname>:<port>\n#\n#   To run, use `docker run -it saf`\n#            or `sudo docker run -it --device /dev/dri:/dev/dri saf`\n#\n#   Prebuilt Docker images are available upon requests.\n\nFROM ubuntu:16.04\nMAINTAINER Shao-Wen Yang <shao-wen.yang@intel.com>\n\nENV DEBIAN_FRONTEND noninteractive\n\nARG DEFAULT_WORKDIR=/vcs\nARG USE_VDMS=OFF\nARG GITHUB_URL=github.com/viscloud/saf.git\nARG GITHUB_TOKEN=\nARG SAF_HASH=\n\n# Prepare toolchain\n\nRUN apt-get update && apt-get install --yes --no-install-recommends dialog \\\n    apt-utils && rm -rf /var/lib/apt/lists/*;\nRUN apt-get install --yes --no-install-recommends build-essential && rm -rf /var/lib/apt/lists/*;\nRUN apt-get install --yes --no-install-recommends pkg-config && rm -rf /var/lib/apt/lists/*;\nRUN apt-get install --yes --no-install-recommends g++ wget cmake git vim && rm -rf /var/lib/apt/lists/*;\nRUN apt-get install --yes --no-install-recommends ca-certificates && rm -rf /var/lib/apt/lists/*;\nRUN apt-get install --yes --no-install-recommends autoconf automake libtool && rm -rf /var/lib/apt/lists/*;\nRUN apt-get install --yes --no-install-recommends curl unzip && rm -rf /var/lib/apt/lists/*;\nRUN apt-get install --yes --no-install-recommends \\\n    libavcodec-dev:amd64 \\\n    libavformat-dev:amd64 \\\n    libswscale-dev:amd64 \\\n    libtbb2:amd64 \\\n    libtbb-dev:amd64 \\\n    libjpeg-dev:amd64 \\\n    libpng12-dev:amd64 \\\n    libjasper-dev \\\n    libdc1394-22-dev:amd64 && rm -rf /var/lib/apt/lists/*;\nRUN apt-get install --yes --no-install-recommends libeigen3-dev && rm -rf /var/lib/apt/lists/*;\nRUN apt-get install --yes --no-install-recommends libboost-all-dev && rm -rf /var/lib/apt/lists/*;\nRUN apt-get install --yes --no-install-recommends \\\n    libgstreamer1.0-dev \\\n    libgstreamer-plugins-base1.0-dev \\\n    libgstreamer-plugins-good1.0-dev \\\n    libgstreamer-plugins-bad1.0-dev \\\n    gstreamer1.0:amd64 && rm -rf /var/lib/apt/lists/*;\nRUN apt-get install --yes --no-install-recommends \\\n    python-scipy \\\n    python-numpy \\\n    python-yaml && rm -rf /var/lib/apt/lists/*;\nRUN apt-get install --yes --no-install-recommends \\\n    libleveldb-dev:amd64 \\\n    libsnappy-dev:amd64 \\\n    libhdf5-serial-dev \\\n    libgflags-dev \\\n    libgoogle-glog-dev \\\n    liblmdb-dev:amd64 \\\n    libjemalloc-dev \\\n    libzmq3-dev:amd64 && rm -rf /var/lib/apt/lists/*;\nRUN apt-get install --yes --no-install-recommends libblas-dev && rm -rf /var/lib/apt/lists/*;\nRUN apt-get install --yes --no-install-recommends libgtk2.0-dev && rm -rf /var/lib/apt/lists/*;\nRUN apt-get install --yes --no-install-recommends libcpprest-dev && rm -rf /var/lib/apt/lists/*;\nRUN apt-get install --yes --no-install-recommends libopenblas-dev && rm -rf /var/lib/apt/lists/*;\nRUN apt-get install --yes --no-install-recommends \\\n    alien \\\n    clinfo \\\n    opencl-headers && rm -rf /var/lib/apt/lists/*;\nRUN apt-get install --yes --no-install-recommends libjsoncpp-dev && rm -rf /var/lib/apt/lists/*;\n\n# Prepare the environment\n\nRUN mkdir -p $DEFAULT_WORKDIR\nENV PATH ${PATH}:/usr/local/bin\nENV LD_LIBRARY_PATH ${LD_LIBRARY_PATH}:/usr/local/lib\n\n# OpenVINO (CVSDK)\n\nWORKDIR $DEFAULT_WORKDIR\nRUN wget https://registrationcenter-download.intel.com/akdlm/irc_nas/13131/l_openvino_toolkit_p_2018.1.265.tgz\nRUN tar zxvf l_openvino_toolkit_p_2018.1.265.tgz && \\\n    cd l_openvino_toolkit_p_2018.1.265 && \\\n    sed -i 's/ACCEPT_EULA=decline/ACCEPT_EULA=accept/g' silent.cfg && \\\n    ./install.sh -s silent.cfg && rm l_openvino_toolkit_p_2018.1.265.tgz\nENV LD_LIBRARY_PATH ${LD_LIBRARY_PATH}:/opt/intel/opencl\nRUN apt-get install --yes --no-install-recommends lsb-release && rm -rf /var/lib/apt/lists/*;\nRUN /bin/bash -c \"source /opt/intel/computer_vision_sdk/bin/setupvars.sh\"\nENV PATH /opt/intel/computer_vision_sdk/deployment_tools/model_optimizer:${PATH}\nENV LD_LIBRARY_PATH /usr/local/lib:/opt/intel/computer_vision_sdk/opencv/share/OpenCV/3rdparty/lib:/opt/intel/computer_vision_sdk/opencv/lib:/opt/intel/opencl:/opt/intel/computer_vision_sdk/deployment_tools/inference_engine/external/cldnn/lib:/opt/intel/computer_vision_sdk/deployment_tools/inference_engine/external/mkltiny_lnx/lib:/opt/intel/computer_vision_sdk/deployment_tools/inference_engine/lib/ubuntu_16.04/intel64:/opt/intel/computer_vision_sdk/deployment_tools/model_optimizer/model_optimizer_caffe/bin:/opt/intel/computer_vision_sdk/openvx/lib::/opt/intel/opencl\nENV PYTHONPATH /opt/intel/computer_vision_sdk/deployment_tools/model_optimizer:${PYTHONPATH}\nENV OpenCV_DIR /opt/intel/computer_vision_sdk/opencv/share/OpenCV\nRUN cd /opt/intel/computer_vision_sdk/install_dependencies && \\\n    ./install_NEO_OCL_driver.sh\nRUN cd /opt/intel/computer_vision_sdk/deployment_tools/inference_engine/samples && \\\n    mkdir build && cd build && cmake .. && make cpu_extension -j4\nWORKDIR $DEFAULT_WORKDIR\nRUN rm -rf l_openvino_toolkit_p_2018.1.265 l_openvino_toolkit_p_2018.1.265.tgz\n\n# Protobuf\n\nWORKDIR $DEFAULT_WORKDIR\nRUN git clone https://github.com/google/protobuf.git\nRUN cd protobuf && \\\n    git reset --hard 072431452a365450c607e9503f51786be44ecf7f && \\\n    ./autogen.sh && \\\n    ./configure --build=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\" --disable-shared --with-pic && \\\n    make -j4 && make install && cd .. && rm -rf protobuf\n\n# VDMS\n\nWORKDIR $DEFAULT_WORKDIR\nRUN if [ ON = \"$USE_VDMS\" ]; then \\\n        apt-get install --yes --no-install-recommends scons flex && \\\n        apt-get install --yes --no-install-recommends javacc openjdk-8-jdk && \\\n        apt-get install --yes --no-install-recommends bison libbison-dev && \\\n        apt-get install --yes --no-install-recommends zlib1g-dev && \\\n        apt-get install --yes --no-install-recommends libbz2-dev && \\\n        apt-get install --yes --no-install-recommends libssl-dev && \\\n        apt-get install --yes --no-install-recommends liblz4-dev && \\\n        apt-get install --yes --no-install-recommends mpich && \\\n        apt-get install --yes --no-install-recommends libopenmpi-dev && \\\n        apt-get install --yes --no-install-recommends libgtest-dev ed && \\\n        apt-get install --yes --no-install-recommends libtbb2 libtbb-dev && \\\n        apt-get install --yes --no-install-recommends libdc1394-22-dev && \\\n        git clone https://github.com/Blosc/c-blosc.git && \\\n        cd $DEFAULT_WORKDIR/c-blosc && mkdir build && cd build && cmake .. && \\\n        cmake --build . && ctest && cmake --build . --target install && \\\n        cd ../.. && rm -rf c-blosc && \\\n        cd $DEFAULT_WORKDIR && \\\n        wget https://github.com/facebook/zstd/archive/v1.1.0.tar.gz && \\\n        tar xf v1.1.0.tar.gz && cd zstd-1.1.0 && \\\n        make -j4 && make install && \\\n        cd .. && rm -f v1.1.0.tar.gz && rm -rf zstd-1.1.0 && \\\n        cd /usr/src/gtest && cmake . && make -j4 && \\\n        mv libgtest* /usr/local/lib/ && \\\n        cd $DEFAULT_WORKDIR && \\\n        wget https://github.com/TileDB-Inc/TileDB/archive/0.6.1.tar.gz && \\\n        tar xf 0.6.1.tar.gz && cd TileDB-0.6.1 && \\\n        mkdir build && cd build && cmake .. && make -j4 && make install && \\\n        cd ../.. && rm -f 0.6.1.tar.gz && rm -rf TileDB-0.6.1 && \\\n        git clone https://github.com/tristanpenman/valijson.git && \\\n        cd $DEFAULT_WORKDIR/valijson && cp -r include/* /usr/local/include && \\\n        cd .. && rm -rf valijson && \\\n        cd $DEFAULT_WORKDIR && \\\n        wget https://github.com/intellabs/vcl/archive/v0.1.0.tar.gz && \\\n        tar xf v0.1.0.tar.gz && mv vcl-0.1.0 vcl && \\\n        cd vcl && sed -i \"s/\\(CPPPATH\\s*=\\s*\\[.*\\)\\(\\]\\)/\\1,\\'\\/opt\\/intel\\/computer_vision_sdk\\/opencv\\/include\\'\\2/g\" SConstruct && sed -i \"s/\\(LIBPATH\\s*=\\s*\\[.*\\)\\(\\]\\)/\\1,\\'\\/opt\\/intel\\/computer_vision_sdk\\/opencv\\/lib\\'\\2/g\" SConstruct&& scons -j4 && \\\n        cd .. && rm -f v0.1.0.tar.gz && \\\n        cd $DEFAULT_WORKDIR && \\\n        wget https://github.com/intellabs/pmgd/archive/v1.0.0.tar.gz && \\\n        tar xf v1.0.0.tar.gz && mv pmgd-1.0.0 pmgd && cd pmgd && make -j4 && \\\n        cd .. && rm -f v1.0.0.tar.gz && \\\n        cd $DEFAULT_WORKDIR && \\\n        wget https://github.com/intellabs/vdms/archive/v1.0.0.tar.gz && \\\n        tar xf v1.0.0.tar.gz && mv vdms-1.0.0 vdms && cd vdms && \\\n        sed -i \"s/CPPPATH\\s*.*\\[/&\\'\\/opt\\/intel\\/computer_vision_sdk\\/opencv\\/include\\',/g\" SConstruct && \\\n        sed -i \"s/LIBPATH\\s*.*\\[/&\\'\\/opt\\/intel\\/computer_vision_sdk\\/opencv\\/lib\\',/g\" SConstruct && \\\n        sed -i \"s/LIBS\\s*.*\\[/&\\'opencv_core\\',\\'opencv_imgproc\\',\\'opencv_imgcodecs\\',/g\" SConstruct && \\\n        mkdir db && scons -j4 INTEL_PATH=$DEFAULT_WORKDIR && \\\n        cd .. && rm -f v1.0.0.tar.gz; rm -rf /var/lib/apt/lists/*; \\\n    fi\n\n# SAF\n\nWORKDIR $DEFAULT_WORKDIR\nENV no_proxy \"github.intel.com localhost\"\nRUN if [ ! -z \"$GITHUB_TOKEN\" ]; then \\\n        git clone https://$GITHUB_TOKEN@$GITHUB_URL saf; \\\n    else \\\n        git clone https://$GITHUB_URL saf; \\\n    fi\nRUN cd saf && \\\n    if [ ! -z \"$SAF_HASH\" ]; then git reset --hard $SAF_HASH; fi && \\\n    if [ ON = \"$USE_VDMS\" ]; then \\\n        mkdir build && cd build && cmake -DCMAKE_BUILD_TYPE=Release -DUSE_CVSDK=ON -DBACKEND=cpu -DBUILD_TESTS=OFF -DUSE_SSD=ON -DUSE_WEBSOCKET=ON -DUSE_KAFKA=ON -DUSE_MQTT=ON -DUSE_PYTHON=ON -DUSE_VDMS=ON -DVDMS_HOME=$DEFAULT_WORKDIR/vdms ..; \\\n    else \\\n        mkdir build && cd build && cmake -DCMAKE_BUILD_TYPE=Release -DUSE_CVSDK=ON -DBACKEND=cpu -DBUILD_TESTS=OFF -DUSE_SSD=ON -DUSE_WEBSOCKET=ON -DUSE_KAFKA=ON -DUSE_MQTT=ON -DUSE_PYTHON=ON ..; \\\n    fi && \\\n    make -j4 && make apps -j4 && make install_python\n\n# Set up SAF\n\nWORKDIR $DEFAULT_WORKDIR/saf/config\nRUN cp config.toml.example config.toml && \\\n    cp cameras.toml.example cameras.toml && \\\n    cp models.toml.example models.toml && \\\n    echo \"\\n[[model]]\\n\\\nname = \\\"person-detection-retail-0012\\\"\\n\\\ntype = \\\"cvsdk\\\"\\n\\\ndesc_path = \\\"/opt/intel/computer_vision_sdk/deployment_tools/intel_models/person-detection-retail-0012/FP32/person-detection-retail-0012.xml\\\"\\n\\\nparams_path = \\\"/opt/intel/computer_vision_sdk/deployment_tools/intel_models/person-detection-retail-0012/FP32/person-detection-retail-0012.bin\\\"\\n\\\ninput_width = 96\\n\\\ninput_height = 112\\n\\\nlabel_file = \\\"/opt/intel/computer_vision_sdk/deployment_tools/intel_models/person-detection-retail-0012/label.names\\\"\" >> models.toml && \\\n    echo \"person\" >> /opt/intel/computer_vision_sdk/deployment_tools/intel_models/person-detection-retail-0012/label.names\n\n# Prepare sample scripts\n\nWORKDIR $DEFAULT_WORKDIR/saf\nRUN echo \"#!/bin/sh\\n\\\nbuild/apps/simple --camera GST_TEST\" > run_simple.sh && chmod +x run_simple.sh\nRUN echo \"#!/bin/sh\\n\\\nCAMERA=GST_TEST\\n\\\nHOST=localhost\\n\\\nif [ -n \\\"\\$1\\\" ]; then CAMERA=\\$1; fi\\n\\\nif [ -n \\\"\\$2\\\" ]; then HOST=\\$2; fi\\n\\\nbuild/apps/detector -c \\$CAMERA --detector_type cvsdk-ssd -m person-detection-retail-0012 --detector_targets person --detector_confidence_threshold 0.3 --sender_package_type frame --sender_endpoint \\\"kafka://\\$HOST:9092\\\"\" > run_detector.sh && chmod +x run_detector.sh\nRUN echo \"#!/bin/sh\\n\\\nCAMERA=GST_TEST\\n\\\nHOST=localhost\\n\\\nif [ -n \\\"\\$1\\\" ]; then CAMERA=\\$1; fi\\n\\\nif [ -n \\\"\\$2\\\" ]; then HOST=\\$2; fi\\n\\\nbuild/apps/tracker -c \\$CAMERA --detector_type cvsdk-ssd -m person-detection-retail-0012 --detector_targets person --detector_confidence_threshold 0.3 --detector_idle_duration 0.1 --tracker_type kf --sender_package_type frame --sender_endpoint \\\"kafka://\\$HOST:9092\\\"\" > run_tracker.sh && chmod +x run_tracker.sh\nRUN echo \"#!/bin/sh\\n\\\nCAMERA=GST_TEST\\n\\\nHOST=localhost\\n\\\nif [ -n \\\"\\$1\\\" ]; then CAMERA=\\$1; fi\\n\\\nif [ -n \\\"\\$2\\\" ]; then HOST=\\$2; fi\\n\\\nbuild/apps/visualizer --sender_endpoint \\\"kafka://\\$HOST:9092\\\" -c \\$CAMERA\" > run_visualizer.sh && chmod +x run_visualizer.sh\nRUN echo \"#!/bin/sh\\n\\\nCAMERA=GST_TEST\\n\\\nHOST=localhost\\n\\\nif [ -n \\\"\\$1\\\" ]; then CAMERA=\\$1; fi\\n\\\nif [ -n \\\"\\$2\\\" ]; then HOST=\\$2; fi\\n\\\nbuild/apps/writer --sender_endpoint \\\"kafka://\\$HOST:9092\\\" --write_target file --write_uri sample.csv -c \\$CAMERA\" > run_writer.sh && chmod +x run_writer.sh\n\n# Install OpenCV-Python for better Python support\n\nRUN apt-get install --yes --no-install-recommends python-pip && \\\n    pip install --no-cache-dir opencv-python && rm -rf /var/lib/apt/lists/*;\n\n# Resolve ProtoBuf version conflict\n# In this script, ProtoBuf3 is linked against statically.\n# The following removes ProtoBuf3 shared libraries.\n# Do NOT EVER do the following on your native setup.\n\nRUN rm -f /usr/lib/x86_64-linux-gnu/libprotobuf*\n\n# Clean up\n\nRUN apt-get clean && \\\n    rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*\n\nWORKDIR $DEFAULT_WORKDIR/saf\n"
}