{
  "startTime": 1674243863124,
  "endTime": 1674243863406,
  "originalSmells": [
    {
      "rule": "npmCacheCleanAfterInstall",
      "position": {
        "lineStart": 9,
        "lineEnd": 9,
        "columnStart": 4,
        "columnEnd": 42
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM node:10.13-alpine as build\n\nENV TERM=dumb \\\n\t\tLD_LIBRARY_PATH=/usr/local/lib:/usr/lib:/lib\n\nRUN mkdir /esy\nWORKDIR /esy\n\nENV NPM_CONFIG_PREFIX=/esy\nRUN npm install -g --unsafe-perm esy@0.4.3 && npm cache clean --force;\n\n# now that we have esy installed we need a proper runtime\n\nFROM alpine:3.8 as esy\n\nENV TERM=dumb \\\n\t\tLD_LIBRARY_PATH=/usr/local/lib:/usr/lib:/lib\n\nWORKDIR /\n\nCOPY --from=build /esy /esy\n\nRUN apk add --no-cache \\\n\t\tca-certificates wget \\\n\t\tbash curl perl-utils \\\n\t\tgit patch gcc g++ musl-dev make m4\n\nRUN wget -q -O /etc/apk/keys/sgerrand.rsa.pub https://alpine-pkgs.sgerrand.com/sgerrand.rsa.pub\nRUN wget https://github.com/sgerrand/alpine-pkg-glibc/releases/download/2.28-r0/glibc-2.28-r0.apk\nRUN apk add --no-cache glibc-2.28-r0.apk\n\nENV PATH=/esy/bin:$PATH\n\nRUN mkdir /app\nWORKDIR /app\nCOPY package.json package.json\nCOPY esy.lock esy.lock\nRUN esy fetch\nRUN esy build-package @esy-ocaml/substs@0.0.1\nRUN esy build-package @opam/base-unix@opam:base\nRUN esy build-package ocaml@4.7.1003\nRUN esy build-package @opam/ocamlbuild@opam:0.12.0\nRUN esy build-package @opam/conf-m4@opam:1\nRUN esy build-package @opam/ocamlfind@opam:1.8.0\nRUN esy build-package @opam/dune@opam:1.5.1\nRUN esy build-package @opam/jbuilder@opam:transition\nRUN esy build-package @opam/result@opam:1.3\nRUN esy build-package @opam/topkg@opam:1.0.0\nRUN esy build-package @opam/cmdliner@opam:1.0.2\nRUN esy build-package @opam/base-bytes@opam:base\nRUN esy build-package @opam/base64@opam:2.3.0\nRUN esy build-package @opam/sexplib0@opam:v0.11.0\nRUN esy build-package @opam/base@opam:v0.11.1\nRUN esy build-package @opam/ocaml-migrate-parsetree@opam:1.1.0\nRUN esy build-package @opam/ocaml-compiler-libs@opam:v0.11.0\nRUN esy build-package @opam/ppx_derivers@opam:1.0\nRUN esy build-package @opam/stdio@opam:v0.11.0\nRUN esy build-package @opam/ppxlib@opam:0.3.1\nRUN esy build-package @opam/fieldslib@opam:v0.11.0\nRUN esy build-package @opam/uchar@opam:0.0.2\nRUN esy build-package @opam/uutf@opam:1.0.1\nRUN esy build-package @opam/jsonm@opam:1.0.1\nRUN esy build-package @opam/ppx_fields_conv@opam:v0.11.0\nRUN esy build-package @opam/ppx_sexp_conv@opam:v0.11.2\nRUN esy build-package @opam/seq@opam:base\nRUN esy build-package @opam/re@opam:1.8.0\nRUN esy build-package @opam/stringext@opam:1.5.0\nRUN esy build-package @opam/uri@opam:2.0.0\nRUN esy build-package @opam/cohttp@opam:1.2.0\nRUN esy build-package @opam/cppo@opam:1.6.5\nRUN esy build-package @opam/lwt@opam:4.1.0\nRUN esy build-package @opam/cohttp-lwt@opam:1.2.0\nRUN esy build-package @opam/astring@opam:0.8.3\nRUN esy build-package @opam/num@opam:1.1\nRUN esy build-package @opam/parsexp@opam:v0.11.0\nRUN esy build-package @opam/sexplib@opam:v0.11.0\nRUN esy build-package @opam/ipaddr@opam:2.8.0\nRUN esy build-package @opam/fmt@opam:0.8.5\nRUN esy build-package @opam/logs@opam:0.6.2\nRUN esy build-package @opam/conduit@opam:1.3.0\nRUN esy build-package @opam/conduit-lwt@opam:1.3.0\nRUN esy build-package @opam/conduit-lwt-unix@opam:1.3.0\nRUN esy build-package @opam/magic-mime@opam:1.1.0\nRUN esy build-package @opam/cohttp-lwt-unix@opam:1.2.0\nRUN esy build-package @opam/menhir@opam:20181113\nRUN esy build-package @opam/merlin-extend@opam:0.3\nRUN esy build-package @opam/reason@opam:3.3.7\nCOPY . .\n\nRUN esy b dune build src/main.exe --profile=docker\n\nRUN mv $(esy bash -c 'echo $cur__target_dir/default/src/main.exe') /app/main.exe\n"
}