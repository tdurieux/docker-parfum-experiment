{
  "startTime": 1674245903043,
  "endTime": 1674245903223,
  "originalSmells": [
    {
      "rule": "aptGetInstallUseY",
      "position": {
        "lineStart": 25,
        "lineEnd": 25,
        "columnStart": 9,
        "columnEnd": 29
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 23,
        "lineEnd": 23,
        "columnStart": 9,
        "columnEnd": 37
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 25,
        "lineEnd": 25,
        "columnStart": 9,
        "columnEnd": 29
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "# 声明变量\nARG MYSQL_VERSION\n\nFROM mysql:${MYSQL_VERSION}\n\nMAINTAINER DongShuai\n\n#将任务脚本复制进容器,需要注意不能放到/var/lib/mysql目录下,该目录随mysql初始化会被清空造成原文件丢失\nCOPY cron-shell/ /cron-shell/\n\n#将int-shell中的脚本都复制到初始化文件夹中\nCOPY init-shell/ /docker-entrypoint-initdb.d/\n\n#修正时区\nRUN ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime \\\n      && echo 'Asia/Shanghai' >/etc/timezone \\\n#更新源\n      && apt-get update \\\n#安装cron\n      && apt-get install -y  --no-install-recommends cron \\\n        vim \\\n#安装dos2unix工具 \\\n      && apt-get install --no-install-recommends -y dos2unix \\\n#安装sudo\n      && apt-get install -y --no-install-recommends sudo \\\n#授予mysql组用户sudo免密码\n      && echo '%mysql ALL=(ALL) NOPASSWD: ALL' >> /etc/sudoers \\\n#减小镜像的体积\n      && rm -rf /var/lib/apt/lists/* \\\n      && apt-get clean \\\n#赋予脚本可执行权限\n      && chmod a+x -R /docker-entrypoint-initdb.d \\\n      && sudo sh /docker-entrypoint-initdb.d/start.sh\n\nRUN chown -R mysql:root /var/lib/mysql/\n\nCMD [\"mysqld\"]\n\nEXPOSE 3307\n\n"
}