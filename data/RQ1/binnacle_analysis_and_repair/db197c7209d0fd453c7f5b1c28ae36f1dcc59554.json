{
  "startTime": 1674249875851,
  "endTime": 1674249876702,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 31,
        "lineEnd": 31,
        "columnStart": 7,
        "columnEnd": 67
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 53,
        "lineEnd": 53,
        "columnStart": 7,
        "columnEnd": 39
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 54,
        "lineEnd": 54,
        "columnStart": 7,
        "columnEnd": 29
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 55,
        "lineEnd": 55,
        "columnStart": 7,
        "columnEnd": 26
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 122,
        "lineEnd": 122,
        "columnStart": 4,
        "columnEnd": 58
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 11,
        "lineEnd": 11,
        "columnStart": 7,
        "columnEnd": 208
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 30,
        "lineEnd": 30,
        "columnStart": 7,
        "columnEnd": 30
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 30,
        "lineEnd": 30,
        "columnStart": 7,
        "columnEnd": 30
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 66,
        "lineEnd": 66,
        "columnStart": 4,
        "columnEnd": 105
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 140,
        "lineEnd": 140,
        "columnStart": 4,
        "columnEnd": 57
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 11,
        "lineEnd": 11,
        "columnStart": 7,
        "columnEnd": 208
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 21,
        "lineEnd": 24,
        "columnStart": 7,
        "columnEnd": 18
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 30,
        "lineEnd": 30,
        "columnStart": 7,
        "columnEnd": 30
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 66,
        "lineEnd": 66,
        "columnStart": 4,
        "columnEnd": 105
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 73,
        "lineEnd": 103,
        "columnStart": 4,
        "columnEnd": 15
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 131,
        "lineEnd": 132,
        "columnStart": 7,
        "columnEnd": 24
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 140,
        "lineEnd": 140,
        "columnStart": 4,
        "columnEnd": 57
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 30,
        "lineEnd": 30,
        "columnStart": 7,
        "columnEnd": 54
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 66,
        "lineEnd": 66,
        "columnStart": 4,
        "columnEnd": 105
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 140,
        "lineEnd": 140,
        "columnStart": 4,
        "columnEnd": 57
      }
    }
  ],
  "repairedDockerfile": "## see https://github.com/pbhogale/gpu-keras-rstudio\n\nFROM nvidia/cuda:9.0-cudnn7-runtime\n\n\nMAINTAINER \"prasanna bhogale\"\n\nENV CRAN_URL https://cloud.r-project.org/\n\nRUN set -e \\\n\t&& apt-get -y update \\\n    && apt-get -y --no-install-recommends install apt-utils libapparmor1 libcurl4-openssl-dev libxml2-dev libssl-dev gdebi-core apt-transport-https pandoc libssh2-1-dev libpython2.7 python-pip imagemagick libxt-dev libxml2-dev xterm && rm -rf /var/lib/apt/lists/*;\n\nRUN set -e \\\n    && grep '^DISTRIB_CODENAME' /etc/lsb-release \\\n    | cut -d = -f 2 \\\n    | xargs -I {} echo \"deb ${CRAN_URL}bin/linux/ubuntu {}/\" \\\n    | tee -a /etc/apt/sources.list \\\n    && apt-key adv --keyserver keyserver.ubuntu.com --recv-keys E084DAB9 \\\n    && apt-get -y update \\\n    && apt-get -y upgrade \\\n    && apt-get install -y --no-install-recommends \\\n    r-base \\\n    r-base-dev \\\n    r-cran-littler \\\n    && apt-get -y autoremove \\\n    && apt-get clean && rm -rf /var/lib/apt/lists/*;\n\n\nRUN set -e \\\n    && apt-get install --no-install-recommends -y curl \\\n    && curl -f -sS https://s3.amazonaws.com/rstudio-server/current.ver \\\n    | xargs -I {} curl -sS http://download2.rstudio.org/rstudio-server-{}-amd64.deb -o /tmp/rstudio.deb \\\n    && gdebi -n /tmp/rstudio.deb \\\n    && rm -rf /tmp/* \\\n    && apt-get -y autoremove \\\n    && apt-get clean && rm -rf /var/lib/apt/lists/*;\n\nRUN set -e \\\n    && useradd -m -d /home/rstudio rstudio \\\n    && echo rstudio:rstudioTheLegendOfZelda \\\n    | chpasswd \\\n    && apt-get -y autoremove \\\n    && apt-get clean\n\nRUN set -e \\\n    && grep '^DISTRIB_CODENAME' /etc/lsb-release \\\n    | cut -d = -f 2 \\\n    | xargs -I {} echo \"deb ${CRAN_URL}bin/linux/ubuntu {}/\" \\\n    | tee -a /etc/apt/sources.list \\\n    && apt-key adv --keyserver keyserver.ubuntu.com --recv-keys E084DAB9 \\\n\t&& apt-get update \\\n    && apt-get upgrade -y -q \\\n    && pip install --no-cache-dir --upgrade pip==9.0.3 \\\n    && pip install --no-cache-dir virtualenv \\\n    && pip install --no-cache-dir pelican \\\n    && rm -rf .cache \\\n    && echo 'options(repos = c(CRAN = \"https://cloud.r-project.org\"))' >> /etc/R/Rprofile.site \\\n    && /usr/lib/R/site-library/littler/examples/install.r tensorflow keras \\\n\t&& r -e \"install.packages(c('devtools', 'keras', 'xgboost', 'tidyverse', 'rmarkdown', 'greta', 'usethis', 'docopt'))\" \\\n\t&& r -e \"keras::install_keras(tensorflow = 'gpu')\" \\\n    && apt-get -y autoremove \\\n    && apt-get clean\n\n## Add LaTeX, rticles and bookdown support\n## uses dummy texlive, see FAQ 8: https://yihui.name/tinytex/faq/\nRUN apt-get install -y --no-install-recommends wget software-properties-common python-software-properties\\\n\t&& add-apt-repository -y ppa:opencpu/jq \\\n\t&& apt-get update \\\n\t&& wget \"https://travis-bin.yihui.name/texlive-local.deb\" \\\n\t&& dpkg -i texlive-local.deb \\\n\t&& rm texlive-local.deb \\\n\t&& apt-get update \\\n\t&& apt-get install -y --no-install-recommends \\\n    \t## for rJava\n    \tdefault-jdk \\\n    \t## Nice Google fonts\n    \tfonts-roboto \\\n    \t## used by some base R plots\n    \tghostscript \\\n    \t## used to build rJava and other packages\n    \tlibbz2-dev \\\n    \tlibicu-dev \\\n    \tliblzma-dev \\\n    \t## system dependency of hunspell (devtools)\n    \tlibhunspell-dev \\\n    \t## system dependency of hadley/pkgdown\n    \tlibmagick++-dev \\\n    \t## rdf, for redland / linked data\n    \tlibrdf0-dev \\\n    \t## for V8-based javascript wrappers\n    \tlibv8-dev \\\n    \t## for jq queries\n    \tlibjq-dev \\\n    \t## R CMD Check wants qpdf to check pdf sizes, or throws a Warning\n    \tqpdf \\\n    \t## For building PDF manuals\n    \ttexinfo \\\n    \t## for git via ssh key\n    \tssh \\\n   \t\t## just because\n    \tless \\\n    \tvim \\\n        git-all \\\n  \t&& apt-get clean \\\n  \t&& rm -rf /var/lib/apt/lists/ \\\n  \t## Use tinytex for LaTeX installation\n  \t&& wget -qO- \\\n    \"https://github.com/yihui/tinytex/raw/master/tools/install-unx.sh\" | \\\n    sh -s - --admin --no-path \\\n  \t&& mv ~/.TinyTeX /opt/TinyTeX \\\n  \t&& /opt/TinyTeX/bin/*/tlmgr path add \\\n  \t&& tlmgr install metafont mfware inconsolata tex ae parskip listings \\\n  \t&& tlmgr path add \\\n  \t&& Rscript -e \"source('https://install-github.me/yihui/tinytex'); tinytex::r_texmf()\" \\\n  \t&& chown -R root:staff /opt/TinyTeX \\\n  \t&& chmod -R g+w /opt/TinyTeX \\\n  \t&& chmod -R g+wx /opt/TinyTeX/bin \\\n \t## And some nice R packages for publishing-related stuff \\\n   && /usr/lib/R/site-library/littler/examples/install2.r --error --deps TRUE \\\n\tbookdown rticles rmdshower DT DiagrammeR bayesplot && rm -rf /var/lib/apt/lists/*;\n\nRUN pip install --no-cache-dir typogrify pygments markdown beautifulsoup4 \\\n\t&& rm -rf .cache \\\n\t&& git clone --recursive https://github.com/getpelican/pelican-themes ~/pelican-themes \\\n\t&& pelican-themes -i ~/pelican-themes/Flex \\\n    && pelican-themes -i ~/pelican-themes/elegant \\\n    && pelican-themes -i ~/pelican-themes/pelican-bootstrap3 \\\n\t&& git clone --recursive https://github.com/getpelican/pelican-plugins ~/pelican-plugins\n\nRUN apt-get update -y \\\n    && apt-get install -y --no-install-recommends \\\n        libglu1-mesa-dev \\\n    && apt-get autoremove \\\n    && apt-get clean \\\n    && /usr/lib/R/site-library/littler/examples/install2.r --error --deps TRUE \\\n    vars prophet fanplot chron tseriesEntropy tseriesChaos pdfetch Quandl factorstochvol \\\n    wavelets Risk fGarch \\\n    && pelican-themes -i ~/pelican-themes/pelican-bootstrap3 && rm -rf /var/lib/apt/lists/*;\n\nRUN apt-get install -y --no-install-recommends libgsl-dev \\\n    && /usr/lib/R/site-library/littler/examples/install2.r --error --deps TRUE \\\n    tidytext janeaustenr shiny wordcloud sentimentr stringr gutenbergr ggthemes rsconnect && rm -rf /var/lib/apt/lists/*;\n\nEXPOSE 8787\n\nCMD [\"/usr/lib/rstudio-server/bin/rserver\", \"--server-daemonize=0\", \"--server-app-armor-enabled=0\"]\n\n"
}