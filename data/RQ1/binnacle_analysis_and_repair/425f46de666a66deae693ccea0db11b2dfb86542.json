{
  "startTime": 1674235180894,
  "endTime": 1674235181088,
  "originalSmells": [
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 10,
        "lineEnd": 10,
        "columnStart": 7,
        "columnEnd": 26
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM photon:2.0\n\nENV PGDATA /var/lib/postgresql/data\n\n## have both mysql and pgsql installed.\nRUN tdnf distro-sync -y \\\n    && tdnf remove -y toybox \\\n    && tdnf install -y sed shadow procps-ng gawk gzip sudo net-tools glibc-i18n >> /dev/null\\\n    && tdnf install -y python2 python2-devel python-pip gcc PyYAML python-jinja2 \\\n    linux-api-headers glibc-devel binutils zlib-devel openssl-devel postgresql python-psycopg2 >> /dev/null \\\n    && pip install --no-cache-dir alembic \\\n    && mkdir /docker-entrypoint-initdb.d /docker-entrypoint-updatedb.d \\\n    && chmod 777 /docker-entrypoint-initdb.d /docker-entrypoint-updatedb.d \\\n    && mkdir -p /harbor-migration \\\n    && touch /etc/localtime.bak \\\n    && groupadd -r postgres --gid=999 \\\n    && useradd -r -g postgres --uid=999 postgres \\\n    && mkdir -p /run/postgresql \\\n    && chown -R postgres:postgres /run/postgresql \\\n    && chmod 2777 /run/postgresql \\\n    && mkdir -p \"$PGDATA\" && chown -R postgres:postgres \"$PGDATA\" && chmod 777 \"$PGDATA\" \\\n    && sed -i \"s|#listen_addresses = 'localhost'.*|listen_addresses = '*'|g\" /usr/share/postgresql/postgresql.conf.sample \\\n    && sed -i \"s|#unix_socket_directories = '/tmp'.*|unix_socket_directories = '/run/postgresql'|g\" /usr/share/postgresql/postgresql.conf.sample \\\n    && touch /usr/share/locale/locale.alias \\\n    && locale-gen.sh en_US.UTF-8 \\\n    && tdnf clean all\n\nVOLUME /var/lib/postgresql/data\n\nWORKDIR /harbor-migration\n\nCOPY ./ ./\n\nENTRYPOINT [\"./docker-entrypoint.sh\"]\n"
}