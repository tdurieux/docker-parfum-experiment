{
  "startTime": 1674253062471,
  "endTime": 1674253062554,
  "originalSmells": [
    {
      "rule": "npmCacheCleanUseForce",
      "position": {
        "lineStart": 27,
        "lineEnd": 27,
        "columnStart": 19,
        "columnEnd": 37
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM node:8-alpine\n\n# env var from compose\nARG PORT\nARG MONGO_USERNAME\nARG MONGO_PASSWORD\nARG MONGO_DATABASE\nARG DB_HOST\nARG NODE_ENV=development\n\n# set passed data as env variables\nENV PORT ${PORT}\nENV DATABASEURL mongodb://$MONGO_USERNAME:$MONGO_PASSWORD@$DB_HOST/$MONGO_DATABASE\nENV NODE_ENV ${NODE_ENV}\n\n# create required directory structure, add user & set permissions\nRUN mkdir -p /var/app /var/app/files \\\n\t\t\t&& addgroup -S dropitapp \\\n\t\t\t&& adduser -D -S dropitapp -G dropitapp\n\n# set working directory to app folder\nWORKDIR /var/app\n\n# copy app contents\nCOPY package.json /var/app\n\n# install packages and remove cache\nRUN npm install && npm cache clean --force -f\n\n# copy rest of the files\nADD . /var/app\n\n# give permission\nRUN chown -R dropitapp:dropitapp /var/app && chmod g+rw /var/app && chmod g-x /var/app/files\n\n# switch user\nUSER dropitapp\n\n# boot app\nCMD npm run start"
}