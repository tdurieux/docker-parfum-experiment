{
  "startTime": 1674246280328,
  "endTime": 1674246281038,
  "originalSmells": [
    {
      "rule": "configureShouldUseBuildFlag",
      "position": {
        "lineStart": 47,
        "lineEnd": 47,
        "columnStart": 4,
        "columnEnd": 126
      }
    },
    {
      "rule": "configureShouldUseBuildFlag",
      "position": {
        "lineStart": 56,
        "lineEnd": 56,
        "columnStart": 4,
        "columnEnd": 15
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 10,
        "lineEnd": 10,
        "columnStart": 4,
        "columnEnd": 44
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 21,
        "lineEnd": 21,
        "columnStart": 4,
        "columnEnd": 41
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 24,
        "lineEnd": 35,
        "columnStart": 4,
        "columnEnd": 31
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 53,
        "lineEnd": 53,
        "columnStart": 4,
        "columnEnd": 40
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 61,
        "lineEnd": 61,
        "columnStart": 4,
        "columnEnd": 72
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 71,
        "lineEnd": 71,
        "columnStart": 4,
        "columnEnd": 36
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 77,
        "lineEnd": 77,
        "columnStart": 4,
        "columnEnd": 41
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 86,
        "lineEnd": 86,
        "columnStart": 4,
        "columnEnd": 34
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 10,
        "lineEnd": 10,
        "columnStart": 4,
        "columnEnd": 44
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 24,
        "lineEnd": 35,
        "columnStart": 4,
        "columnEnd": 31
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 53,
        "lineEnd": 53,
        "columnStart": 4,
        "columnEnd": 40
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 61,
        "lineEnd": 61,
        "columnStart": 4,
        "columnEnd": 72
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 71,
        "lineEnd": 71,
        "columnStart": 4,
        "columnEnd": 36
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 77,
        "lineEnd": 77,
        "columnStart": 4,
        "columnEnd": 41
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 86,
        "lineEnd": 86,
        "columnStart": 4,
        "columnEnd": 34
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 10,
        "lineEnd": 10,
        "columnStart": 4,
        "columnEnd": 44
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 21,
        "lineEnd": 21,
        "columnStart": 4,
        "columnEnd": 41
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 24,
        "lineEnd": 35,
        "columnStart": 4,
        "columnEnd": 31
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 53,
        "lineEnd": 53,
        "columnStart": 4,
        "columnEnd": 40
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 61,
        "lineEnd": 61,
        "columnStart": 4,
        "columnEnd": 72
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 71,
        "lineEnd": 71,
        "columnStart": 4,
        "columnEnd": 36
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 77,
        "lineEnd": 77,
        "columnStart": 4,
        "columnEnd": 41
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 86,
        "lineEnd": 86,
        "columnStart": 4,
        "columnEnd": 34
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 10,
        "lineEnd": 10,
        "columnStart": 4,
        "columnEnd": 68
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 24,
        "lineEnd": 35,
        "columnStart": 4,
        "columnEnd": 31
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 53,
        "lineEnd": 53,
        "columnStart": 4,
        "columnEnd": 64
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 61,
        "lineEnd": 61,
        "columnStart": 4,
        "columnEnd": 96
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 71,
        "lineEnd": 71,
        "columnStart": 4,
        "columnEnd": 60
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 77,
        "lineEnd": 77,
        "columnStart": 4,
        "columnEnd": 65
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 86,
        "lineEnd": 86,
        "columnStart": 4,
        "columnEnd": 58
      }
    }
  ],
  "repairedDockerfile": "#!/usr/bin/env docker build -t xrdp\n#\n# A common Xrdp image that the window-manager images build on\n#\n# docker build -t xrdp .\n\nFROM debian:jessie\n\nRUN apt-get update\n\nRUN apt-get install --no-install-recommends -yq xterm apt-utils sudo && rm -rf /var/lib/apt/lists/*;\n#RUN apt-get install -yq xterm xrdp apt-utils sudo\n\n\n# for RDP\nEXPOSE 3389\n\n# Build from source\n\n\nRUN apt-get update \\\n\t&& apt-get install --no-install-recommends -yq vim-tiny git make && rm -rf /var/lib/apt/lists/*;\n\n# packages installed by X11RDP-o-Matic\nRUN apt-get install --no-install-recommends -yq \\\n\tdialog \\\n\tlsb-release \\\n\tbuild-essential checkinstall automake automake git \\\n\tgit-core libssl-dev libpam0g-dev zlib1g-dev libtool libtool-bin libx11-dev libxfixes-dev \\\n\tpkg-config flex bison libxml2-dev intltool xsltproc xutils-dev python-libxml2 \\\n\tg++ xutils libfuse-dev wget libxrandr-dev x11proto-* libdrm-dev libpixman-1-dev \\\n\tlibgl1-mesa-dev libxkbfile-dev libxfont-dev libpciaccess-dev dh-make gettext \\\n\txfonts-utils \\\n\tlibjpeg-dev nasm curl libturbojpeg1 libturbojpeg1-dev \\\n\tlibpulse-dev \\\n\tlibavcodec-dev libavformat-dev && rm -rf /var/lib/apt/lists/*;\n\nWORKDIR /usr/src\n#RUN git clone https://github.com/scarygliders/X11RDP-o-Matic\n#RUN cd X11RDP-o-Matic \\\n#\t&& ./X11rdp-o-matic.sh --justdoit --nocleanup --withsound --withfreerdp --withxrdpvr --withneutrino\n\nRUN git clone https://github.com/neutrinolabs/xrdp\nWORKDIR /usr/src/xrdp\nRUN git submodule init && git submodule update\nRUN ./bootstrap\n# --disable-pam as it seems it uses systemd!\nRUN ./configure --build=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\" --enable-xrdpdebug --enable-tjpeg --enable-fuse --enable-simplesound --enable-load_pulse_modules --disable-pam\n#RUN ./configure --enable-xrdpdebug --enable-neutrinordp --enable-tjpeg --enable-fuse --enable-xrdpvr --enable-rfxcodec --enable-opus\nRUN make\nRUN make install\n\n# and now xorgxrdp\nRUN apt-get install --no-install-recommends -yq xserver-xorg-dev && rm -rf /var/lib/apt/lists/*;\nWORKDIR /usr/src/xrdp/xorgxrdp\nRUN ./bootstrap\nRUN ./configure --build=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\"\nRUN make\nRUN make install\n\n# it asks user to select keyboard\nRUN DEBIAN_FRONTEND=noninteractive apt-get --no-install-recommends install -yq xserver-xorg-core && rm -rf /var/lib/apt/lists/*;\n\n# add our user\nRUN adduser --disabled-password --gecos \"\" dockerx\nRUN adduser dockerx sudo\nRUN adduser dockerx users\nRUN echo \"dockerx:docker\" | chpasswd\n\nENTRYPOINT [\"/start.sh\"]\n\nRUN apt-get install --no-install-recommends -yq rxvt-unicode && rm -rf /var/lib/apt/lists/*;\nCMD [\"rxvt-unicode\", \"-geometry\", \"164x58\", \"-e\", \"bash\"]\n\n# Audio?\n# https://github.com/neutrinolabs/xrdp/issues/321\n# http://w.vmeta.jp/tdiary/20140918.html\nRUN apt-get install --no-install-recommends -yq dpkg-dev dbus-x11 && rm -rf /var/lib/apt/lists/*;\nWORKDIR /usr/src\nRUN \\\n\tcat /etc/apt/sources.list | sed 's/^deb /deb-src /g' >> /etc/apt/sources.list \\\n\t&& apt-get update \\\n\t&& apt-get source pulseaudio \\\n\t&& apt-get build-dep -yq pulseaudio \\\n\t&& apt-get source --compile pulseaudio\n\nRUN apt-get install --no-install-recommends -yq pulseaudio \\\n\t&& adduser root audio \\\n\t&& adduser root pulse \\\n\t&& adduser root pulse-access \\\n\t&& adduser dockerx audio \\\n\t&& adduser dockerx pulse \\\n\t&& adduser dockerx pulse-access && rm -rf /var/lib/apt/lists/*;\n\nRUN cd /usr/src/xrdp/sesman/chansrv/pulse \\\n\t&& sed -i~ 's|^PULSE_DIR.*|PULSE_DIR = /usr/src/pulseaudio-5.0|' Makefile \\\n\t&& make \\\n\t&& cp module-xrdp-sink.so module-xrdp-source.so /usr/lib/pulse-5.0/modules/\n\n# The scripts that make it work (keep last)\nADD run.sh /usr/local/bin/run\nADD xrdp.ini /etc/xrdp/\nADD start.sh /\n"
}