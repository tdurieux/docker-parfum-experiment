{
  "startTime": 1674244748857,
  "endTime": 1674244748996,
  "originalSmells": [
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 6,
        "lineEnd": 6,
        "columnStart": 22,
        "columnEnd": 51
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 30,
        "lineEnd": 30,
        "columnStart": 40,
        "columnEnd": 63
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 6,
        "lineEnd": 6,
        "columnStart": 22,
        "columnEnd": 51
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 30,
        "lineEnd": 30,
        "columnStart": 40,
        "columnEnd": 63
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM debian:9-slim AS builder\nLABEL maintainer=\"Sascha Möllering <smoell@amazon.de>\"\n\n# First step: build java runtime module\n\nRUN set -ex && \\\n    apt-get update && apt-get install --no-install-recommends -y wget unzip && \\\n    wget https://d3pxv6yz143wms.cloudfront.net/11.0.3.7.1/amazon-corretto-11.0.3.7.1-linux-x64.tar.gz -nv && \\\n    mkdir -p /opt/jdk && \\\n    tar zxvf amazon-corretto-11.0.3.7.1-linux-x64.tar.gz -C /opt/jdk --strip-components=1 && \\\n    rm amazon-corretto-11.0.3.7.1-linux-x64.tar.gz && \\\n    rm /opt/jdk/lib/src.zip && rm -rf /var/lib/apt/lists/*;\n\nRUN /opt/jdk/bin/jlink \\\n    --module-path /opt/jdk/jmods \\\n    --verbose \\\n    --add-modules java.base,java.logging,java.naming,java.net.http,java.se,java.security.jgss,java.security.sasl,jdk.aot,jdk.attach,jdk.compiler,jdk.crypto.cryptoki,jdk.crypto.ec,jdk.internal.ed,jdk.internal.le,jdk.internal.opt,jdk.naming.dns,jdk.net,jdk.security.auth,jdk.security.jgss,jdk.unsupported,jdk.zipfs \\\n    --output /opt/jdk-minimal \\\n    --compress 2 \\\n    --no-header-files\n\n# Second step: generate Docker run image\nFROM debian:9-slim\nLABEL maintainer=\"Sascha Möllering <smoell@amazon.de>\"\n\nCOPY --from=builder /opt/jdk-minimal /opt/jdk-minimal\n\nENV JAVA_HOME=/opt/jdk-minimal\nENV PATH=\"$PATH:$JAVA_HOME/bin\"\n\nRUN mkdir /opt/app && apt-get update && apt-get install --no-install-recommends curl -y && rm -rf /var/lib/apt/lists/*;\n\nCOPY target/reactive-vertx-1.5-fat.jar /opt/app\n\nHEALTHCHECK --interval=5s --timeout=3s --retries=3 \\\n  CMD curl -f http://localhost:8080/health/check || exit 1\n\nEXPOSE 8080\n\nCMD [\"java\", \"-server\", \"-XX:+DoEscapeAnalysis\", \"-XX:+UseStringDeduplication\", \\\n        \"-XX:+UseCompressedOops\", \"-XX:+UseG1GC\", \\\n        \"-jar\", \"opt/app/reactive-vertx-1.5-fat.jar\"]\n"
}