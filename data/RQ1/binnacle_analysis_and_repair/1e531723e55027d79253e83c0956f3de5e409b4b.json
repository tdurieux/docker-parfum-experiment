{
  "startTime": 1674239522361,
  "endTime": 1674239522634,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 21,
        "lineEnd": 21,
        "columnStart": 4,
        "columnEnd": 57
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 38,
        "lineEnd": 38,
        "columnStart": 4,
        "columnEnd": 68
      }
    },
    {
      "rule": "configureShouldUseBuildFlag",
      "position": {
        "lineStart": 26,
        "lineEnd": 26,
        "columnStart": 4,
        "columnEnd": 86
      }
    },
    {
      "rule": "sha256sumEchoOneSpaces",
      "position": {
        "lineStart": 22,
        "lineEnd": 22,
        "columnStart": 4,
        "columnEnd": 65
      }
    },
    {
      "rule": "sha256sumEchoOneSpaces",
      "position": {
        "lineStart": 39,
        "lineEnd": 39,
        "columnStart": 4,
        "columnEnd": 76
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 12,
        "lineEnd": 12,
        "columnStart": 4,
        "columnEnd": 42
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 12,
        "lineEnd": 12,
        "columnStart": 4,
        "columnEnd": 42
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM debian:8\nMAINTAINER dnscrypt.io\n\nENV BUILD_DEPENDENCIES \\\n    autoconf \\\n    bzip2 \\\n    curl \\\n    gcc \\\n    make\n\nRUN set -x && \\\n    apt-get update && \\\n    apt-get install --no-install-recommends -y $BUILD_DEPENDENCIES && rm -rf /var/lib/apt/lists/*; # --no-install-recommends\n\nENV LIBSODIUM_VERSION 1.0.12\nENV LIBSODIUM_SHA256 b8648f1bb3a54b0251cf4ffa4f0d76ded13977d4fa7517d988f4c902dd8e2f95\nENV LIBSODIUM_DOWNLOAD_URL https://github.com/jedisct1/libsodium/releases/download/${LIBSODIUM_VERSION}/libsodium-${LIBSODIUM_VERSION}.tar.gz\n\nRUN set -x && \\\n    mkdir -p /tmp/src && \\\n    cd /tmp/src && \\\n    curl -f -sSL $LIBSODIUM_DOWNLOAD_URL -o libsodium.tar.gz && \\\n    echo \"${LIBSODIUM_SHA256}  *libsodium.tar.gz\" | sha256sum -c - && \\\n    tar xzf libsodium.tar.gz && \\\n    rm -f libsodium.tar.gz && \\\n    cd libsodium-${LIBSODIUM_VERSION} && \\\n    ./configure --build=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\" --disable-dependency-tracking --enable-minimal --prefix=/opt/libsodium && \\\n    make check && make install && \\\n    echo /opt/libsodium/lib > /etc/ld.so.conf.d/libsodium.conf && ldconfig && \\\n    rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*\n\nENV DNSCRYPT_PROXY_VERSION 1.9.5\nENV DNSCRYPT_PROXY_SHA256 e89f5b9039979ab392302faf369ef7593155d5ea21580402a75bbc46329d1bb6\nENV DNSCRYPT_PROXY_DOWNLOAD_URL https://github.com/jedisct1/dnscrypt-proxy/releases/download/${DNSCRYPT_PROXY_VERSION}/dnscrypt-proxy-${DNSCRYPT_PROXY_VERSION}.tar.bz2\n\nRUN set -x && \\\n    mkdir -p /tmp/src && \\\n    cd /tmp/src && \\\n    curl -f -sSL $DNSCRYPT_PROXY_DOWNLOAD_URL -o dnscrypt-proxy.tar.bz2 && \\\n    echo \"${DNSCRYPT_PROXY_SHA256}  *dnscrypt-proxy.tar.bz2\" | sha256sum -c - && \\\n    tar xjf dnscrypt-proxy.tar.bz2 && \\\n    rm -f dnscrypt-proxy.tar.bz2 && \\\n    cd dnscrypt-proxy-${DNSCRYPT_PROXY_VERSION} && \\\n    mkdir -p /opt/dnscrypt-proxy/empty && \\\n    groupadd _dnscrypt-proxy && \\\n    useradd -g _dnscrypt-proxy -s /etc -d /opt/dnscrypt-proxy/empty _dnscrypt-proxy && \\\n    env CPPFLAGS=-I/opt/libsodium/include LDFLAGS=-L/opt/libsodium/lib \\\n        ./configure --disable-dependency-tracking --prefix=/opt/dnscrypt-proxy --disable-plugins && \\\n    make install && \\\n    rm -fr /opt/dnscrypt-proxy/share && \\\n    rm -fr /tmp/* /var/tmp/*\n\nRUN set -x && \\\n    apt-get purge -y --auto-remove $BUILD_DEPENDENCIES && \\\n    apt-get autoremove -y && \\\n    apt-get clean && \\\n    rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*\n\nENV LISTEN_ADDR 0.0.0.0:53\nENV RESOLVER_ADDR 176.56.237.171:443\nENV PROVIDER_NAME 2.dnscrypt-cert.resolver1.dnscrypt.eu\nENV PROVIDER_KEY 67C0:0F2C:21C5:5481:45DD:7CB4:6A27:1AF2:EB96:9931:40A3:09B6:2B8D:1653:1185:9C66\nENV LOGLEVEL 6\nENV EDNS_PAYLOAD_SIZE 1252\n\nEXPOSE 53/tcp 53/udp\n\nCMD /opt/dnscrypt-proxy/sbin/dnscrypt-proxy \\\n                   --user=_dnscrypt-proxy \\\n                   --local-address=$LISTEN_ADDR \\\n                   --provider-name=$PROVIDER_NAME \\\n                   --provider-key=$PROVIDER_KEY \\\n                   --resolver-address=$RESOLVER_ADDR \\\n                   --loglevel=$LOGLEVEL \\\n                   --edns-payload-size=$EDNS_PAYLOAD_SIZE \\\n                   --ephemeral-keys \\\n                   /opt/dnscrypt-proxy/etc/dnscrypt-proxy.conf\n"
}