{
  "startTime": 1674243527406,
  "endTime": 1674243527623,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 88,
        "lineEnd": 88,
        "columnStart": 6,
        "columnEnd": 58
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "# Copyright 2016 The WWU eLectures Team All rights reserved.\n#\n# Licensed under the Educational Community License, Version 2.0\n# (the \"License\"); you may not use this file except in compliance with\n# the License. You may obtain a copy of the License at\n#\n#     http://opensource.org/licenses/ECL-2.0\n#\n# Unless required by applicable law or agreed to in writing, software\n# distributed under the License is distributed on an \"AS IS\" BASIS,\n# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n# See the License for the specific language governing permissions and\n# limitations under the License.\n\nFROM fedora:28\nLABEL maintainer=\"WWU eLectures team <electures.dev@uni-muenster.de>\" \\\n      org.label-schema.schema-version=\"1.0\" \\\n      org.label-schema.version=\"7.0\" \\\n      org.label-schema.name=\"opencast-build\" \\\n      org.label-schema.description=\"Image that provides an Opencast build and development environment\" \\\n      org.label-schema.usage=\"https://github.com/opencast/opencast-docker/blob/7.0/README.md\" \\\n      org.label-schema.url=\"http://www.opencast.org/\" \\\n      org.label-schema.vcs-url=\"https://github.com/opencast/opencast-docker\" \\\n      org.label-schema.vendor=\"University of MÃ¼nster\" \\\n      org.label-schema.docker.debug=\"docker exec -it $CONTAINER bash\"\n\nARG repo=\"https://github.com/opencast/opencast.git\"\nARG branch=\"7.0\"\n\nENV HUNSPELL_BASE_URL=\"http://download.services.openoffice.org/contrib/dictionaries\" \\\n    \\\n    ORG_OPENCASTPROJECT_SECURITY_ADMIN_USER=\"admin\" \\\n    ORG_OPENCASTPROJECT_SECURITY_ADMIN_PASS=\"opencast\" \\\n    ORG_OPENCASTPROJECT_SECURITY_DIGEST_USER=\"opencast_system_account\" \\\n    ORG_OPENCASTPROJECT_SECURITY_DIGEST_PASS=\"CHANGE_ME\" \\\n    \\\n    OPENCAST_VERSION=\"7.0\" \\\n    OPENCAST_SRC=\"/usr/src/opencast\" \\\n    OPENCAST_HOME=\"/opencast\" \\\n    OPENCAST_DATA=\"/data\" \\\n    OPENCAST_CUSTOM_CONFIG=\"/etc/opencast\" \\\n    OPENCAST_USER=\"opencast\" \\\n    OPENCAST_GROUP=\"opencast\" \\\n    OPENCAST_UID=\"800\" \\\n    OPENCAST_GID=\"800\" \\\n    OPENCAST_BUILD_ASSETS=\"/docker\"\nENV OPENCAST_SCRIPTS=\"${OPENCAST_HOME}/docker/scripts\" \\\n    OPENCAST_SUPPORT=\"${OPENCAST_HOME}/docker/support\" \\\n    OPENCAST_CONFIG=\"${OPENCAST_HOME}/etc\" \\\n    OPENCAST_REPO=\"${repo}\" \\\n    OPENCAST_BRANCH=\"${branch}\"\n\nRUN dnf -y install \\\n      \"https://download1.rpmfusion.org/free/fedora/rpmfusion-free-release-$(rpm -E %fedora).noarch.rpm\" \\\n      \"https://download1.rpmfusion.org/nonfree/fedora/rpmfusion-nonfree-release-$(rpm -E %fedora).noarch.rpm\" \\\n && dnf -y install \\\n      sudo \\\n      tar gzip bzip2 unzip \\\n      git wget \\\n      make automake gcc gcc-c++ \\\n      maven \\\n      python \\\n && dnf -y install \\\n      java-1.8.0-openjdk \\\n      openssl tzdata curl nc jq \\\n      fontconfig dejavu-sans-fonts dejavu-sans-mono-fonts dejavu-serif-fonts \\\n      gnu-free-serif-fonts gnu-free-mono-fonts gnu-free-sans-fonts \\\n      liberation-fonts linux-libertine-fonts \\\n      ffmpeg sox hunspell tesseract \\\n      synfig \\\n      nfs-utils \\\n  \\\n && git clone https://github.com/ncopa/su-exec.git /tmp/su-exec \\\n && cd /tmp/su-exec \\\n && make \\\n && cp su-exec /usr/local/sbin \\\n  \\\n && mkdir -p /tmp/hunspell /usr/share/hunspell \\\n && { \\\n      echo \"22e217a631977d7b377f8dd22d2bbacd2d36b32765ce13f3474b03a4a97dd700  en_AU.zip\"; \\\n      echo \"31fac12a1b520cde686f328d3fa7560f6eba772cddc872197ff842c57a0dc1ea  en_CA.zip\"; \\\n      echo \"5869d8bd80eb2eb328ebe36b356348de4ae2acb1db6df39d1717d33f89f63728  en_GB.zip\"; \\\n      echo \"6cc717b4de43240595662a2deef5447b06062e82380f5647196f07c9089284fa  en_NZ.zip\"; \\\n      echo \"9227f658f182c9cece797352f041a888134765c11bffc91951c010a73187baea  en_US.zip\"; \\\n      echo \"090285b721dcaabff51b467123f82a181a6904d187c90bda812c6e5f365ff19a  en_ZA.zip\"; \\\n    } > /tmp/hunspell-sha256sum.txt \\\n && cd /tmp/hunspell \\\n && for file in $(awk '{print $2}' /tmp/hunspell-sha256sum.txt); do \\\n      curl -f -L -o \"${file}\" \"${HUNSPELL_BASE_URL}/${file}\"; \\\n      grep \"${file}\" /tmp/hunspell-sha256sum.txt | sha256sum -c -; \\\n      unzip \"/tmp/hunspell/${file}\"; \\\n    done \\\n && cp *.aff *.dic /usr/share/hunspell \\\n && groupadd --system -g \"${OPENCAST_GID}\" \"${OPENCAST_GROUP}\" \\\n && useradd --system -M -N -g \"${OPENCAST_GROUP}\" -d \"${OPENCAST_HOME}\" -u \"${OPENCAST_UID}\" \"${OPENCAST_USER}\" \\\n && mkdir -p \"${OPENCAST_SRC}\" \"${OPENCAST_HOME}\" \"${OPENCAST_DATA}\" \"${OPENCAST_BUILD_ASSETS}\" \\\n && chown -R \"${OPENCAST_USER}:${OPENCAST_GROUP}\" \"${OPENCAST_HOME}\" \"${OPENCAST_DATA}\" \\\n && echo \"opencast-builder ALL = NOPASSWD: ALL\" > /etc/sudoers.d/opencast-builder \\\n\n && rm -rf /tmp/* /var/cache/dnf /var/log/dnf* /var/log/hawkey.log\n\nCOPY assets/docker-entrypoint.sh /docker-entrypoint.sh\nCOPY assets/build \"${OPENCAST_BUILD_ASSETS}/\"\nCOPY assets/bin/* \"/usr/local/bin/\"\n\nWORKDIR \"${OPENCAST_SRC}\"\n\nEXPOSE 8080 5005\nVOLUME [ \"${OPENCAST_DATA}\", \"${OPENCAST_SRC}\", \"/root/.m2\" ]\n\nENTRYPOINT [\"/docker-entrypoint.sh\"]\nCMD [\"bash\"]\n"
}