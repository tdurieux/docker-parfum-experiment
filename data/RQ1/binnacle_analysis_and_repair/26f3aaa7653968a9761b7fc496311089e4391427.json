{
  "startTime": 1674235196086,
  "endTime": 1674235196330,
  "originalSmells": [
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 20,
        "lineEnd": 20,
        "columnStart": 4,
        "columnEnd": 24
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 60,
        "lineEnd": 60,
        "columnStart": 4,
        "columnEnd": 26
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 19,
        "lineEnd": 19,
        "columnStart": 4,
        "columnEnd": 74
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 26,
        "lineEnd": 26,
        "columnStart": 4,
        "columnEnd": 76
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 29,
        "lineEnd": 29,
        "columnStart": 4,
        "columnEnd": 35
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 30,
        "lineEnd": 30,
        "columnStart": 4,
        "columnEnd": 23
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 79,
        "lineEnd": 79,
        "columnStart": 4,
        "columnEnd": 41
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 19,
        "lineEnd": 19,
        "columnStart": 4,
        "columnEnd": 74
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 26,
        "lineEnd": 26,
        "columnStart": 4,
        "columnEnd": 76
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 29,
        "lineEnd": 29,
        "columnStart": 4,
        "columnEnd": 35
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 30,
        "lineEnd": 30,
        "columnStart": 4,
        "columnEnd": 23
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 79,
        "lineEnd": 79,
        "columnStart": 4,
        "columnEnd": 41
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 19,
        "lineEnd": 19,
        "columnStart": 4,
        "columnEnd": 74
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 26,
        "lineEnd": 26,
        "columnStart": 4,
        "columnEnd": 76
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 29,
        "lineEnd": 29,
        "columnStart": 4,
        "columnEnd": 35
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 30,
        "lineEnd": 30,
        "columnStart": 4,
        "columnEnd": 23
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 79,
        "lineEnd": 79,
        "columnStart": 4,
        "columnEnd": 41
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 19,
        "lineEnd": 19,
        "columnStart": 4,
        "columnEnd": 98
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 26,
        "lineEnd": 26,
        "columnStart": 4,
        "columnEnd": 100
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 29,
        "lineEnd": 29,
        "columnStart": 4,
        "columnEnd": 59
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 30,
        "lineEnd": 30,
        "columnStart": 4,
        "columnEnd": 47
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 79,
        "lineEnd": 79,
        "columnStart": 4,
        "columnEnd": 65
      }
    }
  ],
  "repairedDockerfile": "FROM ubuntu:16.04\n\n#--------------------\n# General setup\n#--------------------\n# setup download url\nENV DOWNLOAD_URL https://raw.githubusercontent.com/astralien3000/riot-ros2/master\n\n# setup environment\nENV LANG C.UTF-8\nENV LC_ALL C.UTF-8\n\n# setup keys\nRUN apt-key adv --keyserver ha.pool.sks-keyservers.net --recv-keys 421C365BD9FF1F717815A3895523BAEEB01FA116\n\n# setup sources.list\nRUN echo \"deb http://packages.ros.org/ros/ubuntu xenial main\" > /etc/apt/sources.list.d/ros-latest.list\n\nRUN apt-get update\nRUN apt install --no-install-recommends -y cmake git python3 python3-pip python3-empy g++-multilib && rm -rf /var/lib/apt/lists/*;\nRUN pip3 install --no-cache-dir vcstool\n\n#--------------------\n# Install cross-compiler\n# TODO: this will need to be board dependendant.\n#--------------------\nRUN apt-get install --no-install-recommends -y software-properties-common python-software-properties && rm -rf /var/lib/apt/lists/*;\nRUN add-apt-repository ppa:team-gcc-arm-embedded/ppa\nRUN apt-get update\nRUN apt install --no-install-recommends -y gcc-arm-embedded && rm -rf /var/lib/apt/lists/*;\nRUN apt install --no-install-recommends -y wget && rm -rf /var/lib/apt/lists/*;\n\n#--------------------\n# Sources\n#--------------------\nWORKDIR /root\nRUN mkdir -p /root/ros2_riot_ws/src\nRUN cd /root/ros2_riot_ws && wget ${DOWNLOAD_URL}/riot-ros2.repos\nRUN cd /root/ros2_riot_ws && wget ${DOWNLOAD_URL}/ament2riot.cmake\nRUN cd /root/ros2_riot_ws && vcs import src < riot-ros2.repos\n# AMENT_IGNORE test_msgs package\nRUN cd /root/ros2_riot_ws && touch src/ros2/rcl_interfaces/test_msgs/AMENT_IGNORE\n\n# #--------------------\n# # Tooling and compiling (split but altogether)\n# #--------------------\n# RUN mkdir -p /root/ros2_riot_ws/tools/src\n# RUN cd /root/ros2_riot_ws/tools && wget ${DOWNLOAD_URL}/riot-ros2-tools.repos\n# RUN cd /root/ros2_riot_ws/tools && vcs import src < riot-ros2-tools.repos\n# RUN pip3 install pyparsing\n# RUN cd /root/ros2_riot_ws/tools && ./src/ament/ament_tools/scripts/ament.py build --symlink-install\n# RUN source /root/ros2_riot_ws/tools/install/setup.bash\n# RUN cd /root/ros2_riot_ws && ament build --symlink-install --force-cmake-configure --cmake-args -DCMAKE_TOOLCHAIN_FILE=`pwd`/ament2riot.cmake\n\n#--------------------\n# Tooling\n#--------------------\n# RUN mkdir -p /root/ros2_riot_ws/tools/src\nRUN cd /root/ros2_riot_ws && wget ${DOWNLOAD_URL}/riot-ros2-tools.repos\nRUN cd /root/ros2_riot_ws && vcs import src < riot-ros2-tools.repos\nRUN pip3 install --no-cache-dir pyparsing\n\n#--------------------\n# Cross-compiling (phase 1)\n#--------------------\n# Phase 1: cross-compile everything through ament\nRUN cd /root/ros2_riot_ws && ./src/ament/ament_tools/scripts/ament.py build --symlink-install --force-cmake-configure --cmake-args -DCMAKE_TOOLCHAIN_FILE=`pwd`/ament2riot.cmake\n\n#--------------------\n# Compiling for platform (phase 2)\n#    only preparing the env.\n#--------------------\n# Phase 2: compiling each application for it's target microcontroller with RIOT's Makefiles.\n# setup the tap interface\nRUN ls\nCOPY patches /root\nRUN patch /root/ros2_riot_ws/install/RIOT/dist/tools/tapsetup/tapsetup /root/sudo-tapsetup.patch\nRUN patch -R /root/ros2_riot_ws/install/RIOT/dist/tools/tapsetup/tapsetup /root/docker-tapsetup.patch\n\nRUN apt-get install --no-install-recommends -y unzip bsdmainutils && rm -rf /var/lib/apt/lists/*;\n# Configure exemplary git credentials to run native examples\nRUN git config --global user.email \"you@example.com\"\nRUN git config --global user.name \"micro-ROS\"\n\n\n#--------------------\n# Entry point\n#--------------------\nCOPY entrypoint.sh /\n\nENTRYPOINT [\"/entrypoint.sh\"]\nCMD [\"bash\"]\n"
}