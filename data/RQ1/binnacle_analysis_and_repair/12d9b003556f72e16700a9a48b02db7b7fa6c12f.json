{
  "startTime": 1674239522820,
  "endTime": 1674239523306,
  "originalSmells": [
    {
      "rule": "wgetUseHttpsUrl",
      "position": {
        "lineStart": 53,
        "lineEnd": 53,
        "columnStart": 4,
        "columnEnd": 70
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 19,
        "lineEnd": 19,
        "columnStart": 49,
        "columnEnd": 67
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 46,
        "lineEnd": 46,
        "columnStart": 7,
        "columnEnd": 24
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 48,
        "lineEnd": 48,
        "columnStart": 7,
        "columnEnd": 24
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 54,
        "lineEnd": 54,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 13,
        "lineEnd": 16,
        "columnStart": 7,
        "columnEnd": 68
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 19,
        "lineEnd": 19,
        "columnStart": 4,
        "columnEnd": 45
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 31,
        "lineEnd": 31,
        "columnStart": 4,
        "columnEnd": 36
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 41,
        "lineEnd": 41,
        "columnStart": 6,
        "columnEnd": 34
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 42,
        "lineEnd": 42,
        "columnStart": 6,
        "columnEnd": 50
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 45,
        "lineEnd": 45,
        "columnStart": 4,
        "columnEnd": 58
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 47,
        "lineEnd": 47,
        "columnStart": 7,
        "columnEnd": 43
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 75,
        "lineEnd": 75,
        "columnStart": 4,
        "columnEnd": 31
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 119,
        "lineEnd": 119,
        "columnStart": 4,
        "columnEnd": 47
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 19,
        "lineEnd": 19,
        "columnStart": 4,
        "columnEnd": 45
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 31,
        "lineEnd": 31,
        "columnStart": 4,
        "columnEnd": 36
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 45,
        "lineEnd": 45,
        "columnStart": 4,
        "columnEnd": 58
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 47,
        "lineEnd": 47,
        "columnStart": 7,
        "columnEnd": 43
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 75,
        "lineEnd": 75,
        "columnStart": 4,
        "columnEnd": 31
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 119,
        "lineEnd": 119,
        "columnStart": 4,
        "columnEnd": 47
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 13,
        "lineEnd": 16,
        "columnStart": 7,
        "columnEnd": 68
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 19,
        "lineEnd": 19,
        "columnStart": 4,
        "columnEnd": 45
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 41,
        "lineEnd": 41,
        "columnStart": 6,
        "columnEnd": 34
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 42,
        "lineEnd": 42,
        "columnStart": 6,
        "columnEnd": 50
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 45,
        "lineEnd": 45,
        "columnStart": 4,
        "columnEnd": 58
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 47,
        "lineEnd": 47,
        "columnStart": 7,
        "columnEnd": 43
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 75,
        "lineEnd": 75,
        "columnStart": 4,
        "columnEnd": 31
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 119,
        "lineEnd": 119,
        "columnStart": 4,
        "columnEnd": 47
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 19,
        "lineEnd": 19,
        "columnStart": 4,
        "columnEnd": 69
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 31,
        "lineEnd": 31,
        "columnStart": 4,
        "columnEnd": 60
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 45,
        "lineEnd": 45,
        "columnStart": 4,
        "columnEnd": 82
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 47,
        "lineEnd": 47,
        "columnStart": 7,
        "columnEnd": 67
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 75,
        "lineEnd": 75,
        "columnStart": 4,
        "columnEnd": 55
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 119,
        "lineEnd": 119,
        "columnStart": 4,
        "columnEnd": 71
      }
    }
  ],
  "repairedDockerfile": "# Author: Marco Bonvini\n# email: bonvini.m@gmail.com\n#\nFROM ubuntu:16.04\n\nMAINTAINER MarcoBonvini bonvini.m@gmail.com\n\n# Avoid interaction\nENV DEBIAN_FRONTEND noninteractive\n\n# =========== Basic Configuration ======================================================\n# Update the system\nRUN apt-get -y update \\\n    && apt-get install --no-install-recommends -y sudo build-essential git python python-dev \\\n    python-setuptools make g++ cmake gfortran ipython swig ant python-numpy \\\n    python-scipy python-matplotlib cython python-lxml python-nose python-jpype \\\n    libboost-dev jcc git subversion wget zlib1g-dev pkg-config clang && rm -rf /var/lib/apt/lists/*;\n\n# ========== Install pip for managing python packages ==================================\nRUN apt-get install --no-install-recommends -y python-pip python-lxml && pip install --no-cache-dir cython && rm -rf /var/lib/apt/lists/*;\n\n# ========== Create an user and environmental variables associated to it ===============\nRUN adduser --disabled-password --gecos '' docker\nRUN adduser docker sudo\nRUN echo '%sudo ALL=(ALL) NOPASSWD:ALL' >> /etc/sudoers\n\n# ========= Add folders that will contains code before and after installation ==========\nRUN mkdir -p /home/docker/to_install \\\n    && mkdir -p /home/docker/installed/Ipopt\n\n# ========= Install JAVA ===============================================================\nRUN apt-get install --no-install-recommends -y openjdk-8-jdk \\\n    && rm -rf /var/lib/apt/lists/*\n\n# Define JAVA_HOME envirponmental variable\nENV JAVA_HOME /usr/lib/jvm/java-8-openjdk-amd64\nRUN echo \"export JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64\" >> /root/.bashrc \\\n    &&  echo \"export JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64\" >> /home/docker/.bashrc\n\n# ======== Install BLAS and LAPACK =====================================================\nRUN apt-get -y update \\\n   && apt-get install --no-install-recommends -y apt-utils \\\n   && apt-get install --no-install-recommends -y libblas-dev liblapack-dev && rm -rf /var/lib/apt/lists/*;\n\n# ======== Install numpy, scipy, Matplotlib ============================================\nRUN apt-get install --no-install-recommends -y pkgconf libpng-dev libfreetype6-dev \\\n    && pip install --no-cache-dir numpy \\\n    && apt-get install --no-install-recommends -y python-matplotlib \\\n    && pip install --no-cache-dir scipy && rm -rf /var/lib/apt/lists/*;\n\n# ======== Start IPOPT installation ====================================================\n# Retrieve and copy all the dependencies needed by Ipopt\nWORKDIR /home/docker/to_install/Ipopt\nRUN wget https://www.coin-or.org/download/source/Ipopt/Ipopt-3.12.4.tgz\nRUN tar xvf ./Ipopt-3.12.4.tgz && rm ./Ipopt-3.12.4.tgz\nWORKDIR /home/docker/to_install/Ipopt/Ipopt-3.12.4/ThirdParty/Blas\nRUN ./get.Blas\nWORKDIR /home/docker/to_install/Ipopt/Ipopt-3.12.4/ThirdParty/Lapack\nRUN ./get.Lapack\nWORKDIR /home/docker/to_install/Ipopt/Ipopt-3.12.4/ThirdParty/Mumps\nRUN ./get.Mumps\nWORKDIR /home/docker/to_install/Ipopt/Ipopt-3.12.4/ThirdParty/Metis\nRUN ./get.Metis\n\n# Configure and compile Ipopt\nWORKDIR /home/docker/to_install/Ipopt/Ipopt-3.12.4/\nRUN mkdir build\nWORKDIR /home/docker/to_install/Ipopt/Ipopt-3.12.4/build\nRUN ../configure --prefix=/home/docker/installed/Ipopt \\\n    && make \\\n    && make install\n\n# ======== Start JModelica.org installation ===========================================0\n\n# Intall autoconf which is called by the casADi installation\nRUN apt-get install --no-install-recommends -y autoconf && rm -rf /var/lib/apt/lists/*;\n\n# Checkout the JModelica.org source code\nRUN mkdir -p /home/docker/installed/JModelica\n\nWORKDIR /home/docker/to_install\nRUN svn co https://svn.jmodelica.org/trunk JModelica.org\nWORKDIR /home/docker/to_install/JModelica.org\nRUN mkdir build\nWORKDIR /home/docker/to_install/JModelica.org/build\nRUN ../configure --prefix=/home/docker/installed/JModelica \\\n             --with-ipopt=/home/docker/installed/Ipopt\nRUN make \\\n    && make install \\\n    && make install_casadi \\\n    && make casadi_interface\n\n# Define the environmental variables needed by JModelica\n# JModelica.org supports the following environment variables:\n#\n# - JMODELICA_HOME containing the path to the JModelica.org installation\n#   directory (again, without spaces or ~ in the path).\n# - PYTHONPATH containing the path to the directory $JMODELICA_HOME/Python.\n# - JAVA_HOME containing the path to a Java JRE or SDK installation.\n# - IPOPT_HOME containing the path to an Ipopt installation directory.\n# - LD_LIBRARY_PATH containing the path to the $IPOPT_HOME/lib directory\n#   (Linux only.)\n# - MODELICAPATH containing a sequence of paths representing directories\n#   where Modelica libraries are located, separated by colons.\nENV JMODELICA_HOME /home/docker/installed/JModelica\nENV IPOPT_HOME /home/docker/installed/Ipopt\nENV CPPAD_HOME /home/docker/installed/JModelica/ThirdParty/CppAD/\nENV SUNDIALS_HOME /home/docker/installed/JModelica/ThirdParty/Sundials\nENV PYTHONPATH /home/docker/installed/JModelica/Python/:\nENV LD_LIBRARY_PATH /home/docker/installed/Ipopt/lib/:\\\n/home/docker/installed/JModelica/ThirdParty/Sundials/lib:\\\n/home/docker/installed/JModelica/ThirdParty/CasADi/lib\nENV SEPARATE_PROCESS_JVM /usr/lib/jvm/java-8-openjdk-amd64/\nENV MODELICAPATH /home/docker/installed/JModelica/ThirdParty/MSL:/home/docker/modelica\n\n# ============ Expose ports ============================================================\nEXPOSE 8888\n\n# ============ Install IPython notebook ================================================\nRUN apt-get install --no-install-recommends -y ipython ipython-notebook && rm -rf /var/lib/apt/lists/*;\n\n# ============ Set some environmental vars and change user =============================\nUSER docker\nRUN mkdir /home/docker/modelica && mkdir /home/docker/ipynotebooks\nENV USER docker\nENV DISPLAY :0.0\nWORKDIR /home/docker/\n"
}