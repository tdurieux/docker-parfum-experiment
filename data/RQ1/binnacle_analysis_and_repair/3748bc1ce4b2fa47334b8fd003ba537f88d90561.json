{
  "startTime": 1674242610634,
  "endTime": 1674242610778,
  "originalSmells": [
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 63,
        "lineEnd": 63,
        "columnStart": 7,
        "columnEnd": 58
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 64,
        "lineEnd": 64,
        "columnStart": 7,
        "columnEnd": 54
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 65,
        "lineEnd": 65,
        "columnStart": 7,
        "columnEnd": 54
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 66,
        "lineEnd": 66,
        "columnStart": 7,
        "columnEnd": 60
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 70,
        "lineEnd": 70,
        "columnStart": 4,
        "columnEnd": 28
      }
    },
    {
      "rule": "apkAddUseNoCache",
      "position": {
        "lineStart": 60,
        "lineEnd": 60,
        "columnStart": 4,
        "columnEnd": 40
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "# Copyright 2018 Google Inc\n#\n# Licensed under the Apache License, Version 2.0 (the \"License\");\n# you may not use this file except in compliance with the License.\n# You may obtain a copy of the License at\n#\n#      http://www.apache.org/licenses/LICENSE-2.0\n#\n# Unless required by applicable law or agreed to in writing, software\n# distributed under the License is distributed on an \"AS IS\" BASIS,\n# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n# See the License for the specific language governing permissions and\n# limitations under the License.\n\n# Docker: Google App Engine\n\nFROM python:2.7.15-alpine3.6\nMAINTAINER Pierre Dulac <dulacp@google.com>\n\nWORKDIR /root\n\n# Download Google App Engine SDK\nRUN apk add --no-cache --virtual .bootstrap-deps wget ca-certificates \\\n    && wget -O cloud.tar.gz https://dl.google.com/dl/cloudsdk/channels/rapid/downloads/google-cloud-sdk-217.0.0-linux-x86_64.tar.gz \\\n    && tar xzf cloud.tar.gz \\\n    && rm cloud.tar.gz \\\n    && apk del .bootstrap-deps\n\nRUN google-cloud-sdk/install.sh \\\n      --path-update=true \\\n      --bash-completion=true --rc-path=/root/.bashrc \\\n      --additional-components app-engine-python\n\n# Disable updater check for the whole installation.\n# Users won't be bugged with notifications to update to the latest version of gcloud.\nRUN /root/google-cloud-sdk/bin/gcloud config set core/disable_usage_reporting true \\\n    && /root/google-cloud-sdk/bin/gcloud config set component_manager/disable_update_check true \\\n    && /root/google-cloud-sdk/bin/gcloud --version\n\n# Disable updater completely.\n# Running `gcloud components update` doesn't really do anything in a union FS.\n# Changes are lost on a subsequent run.\nRUN sed -i -- 's/\\\"disable_updater\\\": false/\\\"disable_updater\\\": true/g' /root/google-cloud-sdk/lib/googlecloudsdk/core/config.json\n\n# Make gcloud command accessible\nENV PATH /root/google-cloud-sdk/bin:$PATH\nENV gcloud_sdk_dir /root/google-cloud-sdk\n\n# Add permissions to run the App Engine dev server\nRUN chmod +x /root/google-cloud-sdk/platform/google_appengine/dev_appserver.py\n\n# Copy the app files\nWORKDIR /app\nCOPY ./backends/core/requirements.txt /app/backends/core/requirements.txt\nCOPY ./backends/ibackend/requirements.txt /app/backends/ibackend/requirements.txt\nCOPY ./backends/jbackend/requirements.txt /app/backends/jbackend/requirements.txt\nCOPY ./backends/core/requirements_dev.txt /app/backends/core/requirements_dev.txt\n\n# Install python dependencies\nWORKDIR /app/backends\nRUN apk add --no-cache --update mariadb-client-libs \\\n    && apk add --no-cache --virtual .bootstrap-deps \\\n        bash curl python-dev musl-dev mariadb-dev gcc build-base \\\n    && pip install --no-cache-dir -r core/requirements_dev.txt -t lib_dev \\\n    && pip install --no-cache-dir -r ibackend/requirements.txt -t lib \\\n    && pip install --no-cache-dir -r jbackend/requirements.txt -t lib \\\n    && pip install --no-cache-dir \"sphinx==1.7.2\" \"sphinx-autobuild==0.7.1\" \\\n    && apk del .bootstrap-deps\n\n# Install App Engine Mysql preferred db\nRUN pip install --no-cache-dir Mysql-Python\n\n# Start\nWORKDIR /app\nCOPY ./backends/ /app/backends\n\n# We need bash to run multiline commands in docker-compose.\nRUN apk add --no-cache bash\n\nCMD /root/google-cloud-sdk/platform/google_appengine/dev_appserver.py \\\n      --skip_sdk_update_check \\\n      --host 0.0.0.0 \\\n      --admin_host 0.0.0.0 \\\n      --enable_sendmail yes \\\n      --enable_console yes \\\n      --env_var APPLICATION_ID=$APPLICATION_ID \\\n      --env_var DATABASE_URI=$DATABASE_URI \\\n      /app/backends/gae_dev_ibackend.yaml /app/backends/gae_dev_jbackend.yaml\n"
}