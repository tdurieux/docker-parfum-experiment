{
  "startTime": 1674242050715,
  "endTime": 1674242050893,
  "originalSmells": [
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 34,
        "lineEnd": 34,
        "columnStart": 4,
        "columnEnd": 29
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 36,
        "lineEnd": 36,
        "columnStart": 56,
        "columnEnd": 73
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 48,
        "lineEnd": 48,
        "columnStart": 4,
        "columnEnd": 40
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 52,
        "lineEnd": 52,
        "columnStart": 3,
        "columnEnd": 36
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 7,
        "lineEnd": 31,
        "columnStart": 22,
        "columnEnd": 20
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM nvidia/cuda:8.0-cudnn5-devel-ubuntu16.04\nRUN sed -i 's/\\(archive\\|security\\).ubuntu.com/mirrors.tuna.tsinghua.edu.cn/g' /etc/apt/sources.list\nRUN printf \"[global]\\nindex-url = https://pypi.tuna.tsinghua.edu.cn/simple\" > /etc/pip.conf\n\nENV CAFFE_ROOT=/opt/ms-caffe\nWORKDIR $CAFFE_ROOT\n# build caffe\nRUN apt-get update && apt-get install --no-install-recommends -y \\\n        build-essential \\\n        cmake \\\n        git \\\n        wget \\\n        libatlas-base-dev \\\n        libgeos-dev \\\n        python-opencv \\\n        python-tk \\\n        vim \\\n        thrift-compiler \\\n        libboost-all-dev \\\n        libgflags-dev \\\n        libgoogle-glog-dev \\\n        libhdf5-serial-dev \\\n        libleveldb-dev \\\n        liblmdb-dev \\\n        libopencv-dev \\\n        libprotobuf-dev \\\n        libsnappy-dev \\\n        protobuf-compiler \\\n        python-dev \\\n        python-numpy \\\n        python-pip \\\n        python-scipy && \\\n    rm -rf /var/lib/apt/lists/*\n\nRUN pip install --no-cache-dir --upgrade pip\nRUN git clone --depth 1 https://github.com/Microsoft/caffe.git . && \\\n    for req in $(cat python/requirements.txt) pydot; do pip install --no-cache-dir $req; done\nCOPY ./docker/Makefile.config $CAFFE_ROOT\nRUN  make -j\"$(nproc)\" && \\\n     make pycaffe -j\"$(nproc)\"\n\nENV PYCAFFE_ROOT $CAFFE_ROOT/python\nENV PYTHONPATH $PYCAFFE_ROOT:$PYTHONPATH\nENV PATH $CAFFE_ROOT/build/tools:$PYCAFFE_ROOT:$PATH\nRUN echo \"$CAFFE_ROOT/build/lib\" >> /etc/ld.so.conf.d/caffe.conf && ldconfig\n\nWORKDIR /app\nCOPY requirements.txt /app/requirements.txt\nRUN pip install --no-cache-dir -r /app/requirements.txt\n\nRUN wget \\\nhttps://pypi.python.org/packages/73/9e/fe761e03de28b51b445ddf01ddae87441b7e7040df7d830b86db8f945808/Polygon2-2.0.8.tar.gz#md5=3349a6dfc4cda2a1bcc9bf6c9d411470 \\\n&& pip install --no-cache-dir Polygon2-2.0.8.tar.gz && \\\nrm Polygon2-2.0.8.tar.gz\n"
}