{
  "startTime": 1674252421652,
  "endTime": 1674252422254,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 33,
        "lineEnd": 33,
        "columnStart": 4,
        "columnEnd": 49
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 18,
        "lineEnd": 18,
        "columnStart": 67,
        "columnEnd": 94
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 8,
        "lineEnd": 10,
        "columnStart": 22,
        "columnEnd": 79
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 29,
        "lineEnd": 30,
        "columnStart": 22,
        "columnEnd": 69
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 34,
        "lineEnd": 34,
        "columnStart": 22,
        "columnEnd": 47
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 37,
        "lineEnd": 58,
        "columnStart": 22,
        "columnEnd": 14
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 74,
        "lineEnd": 74,
        "columnStart": 22,
        "columnEnd": 47
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 79,
        "lineEnd": 79,
        "columnStart": 22,
        "columnEnd": 47
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 84,
        "lineEnd": 84,
        "columnStart": 22,
        "columnEnd": 45
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 97,
        "lineEnd": 97,
        "columnStart": 22,
        "columnEnd": 49
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 8,
        "lineEnd": 10,
        "columnStart": 22,
        "columnEnd": 79
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 29,
        "lineEnd": 30,
        "columnStart": 22,
        "columnEnd": 69
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 34,
        "lineEnd": 34,
        "columnStart": 22,
        "columnEnd": 47
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 37,
        "lineEnd": 58,
        "columnStart": 22,
        "columnEnd": 14
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 74,
        "lineEnd": 74,
        "columnStart": 22,
        "columnEnd": 47
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 79,
        "lineEnd": 79,
        "columnStart": 22,
        "columnEnd": 47
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 84,
        "lineEnd": 84,
        "columnStart": 22,
        "columnEnd": 45
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 97,
        "lineEnd": 97,
        "columnStart": 22,
        "columnEnd": 49
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "# Set up the basics\n# Leverage Kali Base Image\nFROM kalilinux/kali-linux-docker:latest\n\n# Update off the bat. Don't dist-upgrade with docker.\nRUN apt-get update && apt-get upgrade -y\n\n# Install the Core\nRUN apt-get update && apt-get install --no-install-recommends -y \\\n  sudo git wget curl git zip ccze byobu zsh golang \\\n  ufw python-pip nikto dotdotpwn jsql nmap sqlmap sqlninja thc-ipv6 hydra dirb && rm -rf /var/lib/apt/lists/*;\n\n# Make Directory Structure\nRUN mkdir /usr/share/wordlists && mkdir -p /usr/share/tools/scripts/\n\n# Pull Wordlists\nRUN git clone https://github.com/danielmiessler/SecLists /usr/share/wordlists/seclists\nRUN git clone https://github.com/danielmiessler/RobotsDisallowed /usr/share/wordlists/robotsdisallowed\nRUN cd /usr/share/wordlists/seclists/Passwords/Leaked-Databases && tar xvzf rockyou.txt.tar.gz && rm rockyou.txt.tar.gz\n\n# Set up DNS Tooling\n### Building Aquatone\nFROM ruby\nWORKDIR /\n\n# Prepare\nRUN apt-get update && apt-get upgrade -y\n\n# Install normal Packages needed\nRUN apt-get update && apt-get install --no-install-recommends -y -u \\\n  apt-utils unzip nodejs wget curl jruby nano screen htop openssl git && rm -rf /var/lib/apt/lists/*;\n\n# Install nodejs\nRUN curl -f -sL https://deb.nodesource.com/setup_8.x | bash -\nRUN apt-get update && apt-get install --no-install-recommends -y nodejs && rm -rf /var/lib/apt/lists/*;\n\n# Installing the packages needed to run Nightmare\nRUN apt-get update && apt-get install --no-install-recommends -y \\\n  xvfb \\\n  x11-xkb-utils \\\n  xfonts-100dpi \\\n  xfonts-75dpi \\\n  xfonts-scalable \\\n  xfonts-cyrillic \\\n  x11-apps \\\n  clang \\\n  libdbus-1-dev \\\n  libgtk2.0-dev \\\n  libnotify-dev \\\n  libgnome-keyring-dev \\\n  libgconf2-dev \\\n  libasound2-dev \\\n  libcap-dev \\\n  libcups2-dev \\\n  libxtst-dev \\\n  libxss1 \\\n  libnss3-dev \\\n  gcc-multilib \\\n  g++-multilib && rm -rf /var/lib/apt/lists/*;\n\n# Use aq domain.com to automated all options of aquatone.\nRUN wget \"https://gist.githubusercontent.com/random-robbie/beae1991e9ad139c6168c385d8a31f7d/raw/\" -O /bin/aq\nRUN chmod 777 /bin/aq\n\n#install aquatone\nRUN gem install aquatone\n\n# Clone down other DNS tooling\nRUN mkdir -p /usr/share/tools/DNS\nRUN git clone https://github.com/lorenzog/dns-parallel-prober /usr/share/tools/DNS/dnsq\nRUN git clone https://github.com/aboul3la/Sublist3r /usr/share/tools/DNS/sublist3r\nRUN git clone https://github.com/guelfoweb/knock /usr/share/tools/DNS/knock\nRUN git clone https://github.com/anshumanbh/brutesubs /usr/share/tools/DNS/brutesubs\nRUN git clone https://github.com/jhaddix/domain /usr/share/tools/DNS/domain\nRUN apt-get update && apt-get install --no-install-recommends -y fierce || true && rm -rf /var/lib/apt/lists/*;\n\n# CMS Tooling\nRUN mkdir -p /usr/share/tools/CMS\nRUN git clone https://github.com/droope/droopescan /usr/share/tools/CMS/droopscan\nRUN apt-get update && apt-get install --no-install-recommends -y wpscan || true && rm -rf /var/lib/apt/lists/*;\nRUN git clone https://github.com/Dionach/CMSmap /usr/share/tools/CMS/cmsmap\n\n# Directory Busting\nRUN mkdir -p /usr/share/tools/DirBusting\nRUN apt-get update && apt-get install --no-install-recommends -y dirb || true && rm -rf /var/lib/apt/lists/*;\nRUN git clone https://github.com/OJ/gobuster /usr/share/tools/DirBusting/gobuster\nRUN git clone https://github.com/henshin/filebuster /usr/share/tools/DirBusting/filebuster\n\n# Git Recon\nRUN mkdir /usr/share/tools/gitint\nRUN git clone https://github.com/libcrack/gitrecon /usr/share/tools/gitint/gitrecon\nRUN git clone https://github.com/dxa4481/truffleHog /usr/share/tools/gitint/trufflehog\nRUN git clone https://github.com/michenriksen/gitrob /usr/share/tools/gitint/gitrob\n\n\n# OSINT Tooling\nRUN mkdir -p /usr/share/tools/OSINT\nRUN apt-get update && apt-get install --no-install-recommends -y recon-ng || true && rm -rf /var/lib/apt/lists/*;\nRUN git clone https://github.com/smicallef/spiderfoot /usr/share/tools/OSINT/spiderfoot\nRUN git clone https://github.com/ZephrFish/GoogD0rker /usr/share/tools/OSINT/googd0rk\nRUN git clone https://github.com/GerbenJavado/LinkFinder /usr/share/tools/OSINT/linkfinder\n\n# HTTP Analysis\nRUN mkdir /usr/share/tools/HTTPAnal\nRUN git clone https://github.com/ChrisTruncer/EyeWitness /usr/share/tools/HTTPAnal/eyewitness\nRUN git clone https://github.com/robertdavidgraham/masscan /usr/share/tools/HTTPAnal/masscan\n\n# Optional\n# BBF Tooling (There will be some dupes SORRY!\nRUN mkdir -p /usr/share/tools/BBF && \\\n    cd /usr/share/tools/BBF && \\\n    for y in $(wget https://bugbountyforum.com/tools/ &&  grep \"/tools/\" index.html | cut -d \"=\" -f 2 | cut -d \"/\" -f 2,3 | grep -v \">\"); do wget https://bugbountyforum.com/$y; done && for x in $(ls); do grep \"href=\" $x | cut -d \"=\" -f 2 | grep github.com | cut -d \"/\" -f 3,4,5 | cut -d \" \" -f 1 |sed -e 's/^\"//' -e 's/\"$//' | grep -v \"gist\" >> Repos.txt; done && for a in $(cat Repos.txt);do git clone https://$a; done && find . -maxdepth 1 -type f -delete\nRUN echo \"That's all folks! You're good to go hack the planet!\"\n\n# set to bash so you can set keys before running aquatone.\nENTRYPOINT [\"/bin/bash\"]\n\n#  Set working directory\nWORKDIR /root/\n"
}