{
  "startTime": 1674239390210,
  "endTime": 1674239390601,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 24,
        "lineEnd": 24,
        "columnStart": 5,
        "columnEnd": 124
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 28,
        "lineEnd": 29,
        "columnStart": 5,
        "columnEnd": 125
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 36,
        "lineEnd": 37,
        "columnStart": 5,
        "columnEnd": 143
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 3,
        "lineEnd": 3,
        "columnStart": 4,
        "columnEnd": 33
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 8,
        "lineEnd": 8,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 47,
        "lineEnd": 47,
        "columnStart": 7,
        "columnEnd": 110
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 52,
        "lineEnd": 52,
        "columnStart": 7,
        "columnEnd": 111
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 57,
        "lineEnd": 57,
        "columnStart": 7,
        "columnEnd": 108
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 62,
        "lineEnd": 62,
        "columnStart": 7,
        "columnEnd": 109
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 79,
        "lineEnd": 79,
        "columnStart": 5,
        "columnEnd": 111
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM centos:7\nARG GEOMESA_VERSION\nCOPY tarballs/geomesa-accumulo-dist_2.11-${GEOMESA_VERSION}-bin.tar.gz accumulo-dist.tar.gz\nRUN tar -zxf accumulo-dist.tar.gz && rm accumulo-dist.tar.gz\n\nFROM centos:7\nARG GEOMESA_VERSION\nCOPY tarballs/geomesa-kafka-dist_2.11-${GEOMESA_VERSION}-bin.tar.gz kafka-dist.tar.gz\nRUN tar -zxf kafka-dist.tar.gz && rm kafka-dist.tar.gz\n\nFROM quay.io/geomesa/base:__TAG__\nARG GEOMESA_VERSION\nARG ACCUMULO_VERSION\nARG THRIFT_VERSION\n\nENV ACCUMULO_VERSION ${ACCUMULO_VERSION}\nENV THRIFT_VERSION ${THRIFT_VERSION}\nENV HADOOP_VERSION 2.8.4\nENV GEOSERVER_VERSION 2.14.1\nENV TOMCAT_VERSION 8.5.23\n\n# Install tomcat\nRUN set -x \\\n  && mkdir -p /opt/tomcat/webapps/geoserver \\\n  && curl -f -sS https://archive.apache.org/dist/tomcat/tomcat-8/v${TOMCAT_VERSION}/bin/apache-tomcat-${TOMCAT_VERSION}.tar.gz \\\n  | tar -zx -C /opt/tomcat --strip-components=1\n\nRUN set -x \\\n  && curl -f -sS -L -o /tmp/geoserver-war.zip \\\n    https://downloads.sourceforge.net/project/geoserver/GeoServer/${GEOSERVER_VERSION}/geoserver-${GEOSERVER_VERSION}-war.zip \\\n  && unzip /tmp/geoserver-war.zip geoserver.war -d /tmp \\\n  && unzip /tmp/geoserver.war -d /opt/tomcat/webapps/geoserver \\\n  && rm -rf /tmp/geoserver-war.zip /tmp/geoserver.war /opt/tomcat/webapps/geoserver/META-INF\n\n# Install geoserver WPS plugin\nRUN set -x \\\n  && curl -f -sS -L -o /tmp/geoserver-wps.zip \\\n    https://downloads.sourceforge.net/project/geoserver/GeoServer/${GEOSERVER_VERSION}/extensions/geoserver-${GEOSERVER_VERSION}-wps-plugin.zip \\\n  && unzip -j /tmp/geoserver-wps.zip -d /opt/tomcat/webapps/geoserver/WEB-INF/lib/ \\\n  && rm -rf /tmp/geoserver-wps.zip\n\n# Install Geomesa Accumulo Distribution\nCOPY --from=0 /geomesa-accumulo* /opt/geomesa/\n\n# Install GeoMesa Accumulo DataStore\nRUN set -x \\\n    && cd /opt/tomcat/webapps/geoserver/WEB-INF/lib/ \\\n    && tar zxvf /opt/geomesa/dist/gs-plugins/geomesa-accumulo-gs-plugin_2.11-${GEOMESA_VERSION}-install.tar.gz && rm /opt/geomesa/dist/gs-plugins/geomesa-accumulo-gs-plugin_2.11-${GEOMESA_VERSION}-install.tar.gz\n\n# Install GeoMesa Accumulo BlobStore\nRUN set -x \\\n    && cd /opt/tomcat/webapps/geoserver/WEB-INF/lib/ \\\n    && tar zxvf /opt/geomesa/dist/gs-plugins/geomesa-blobstore-gs-plugin_2.11-${GEOMESA_VERSION}-install.tar.gz && rm /opt/geomesa/dist/gs-plugins/geomesa-blobstore-gs-plugin_2.11-${GEOMESA_VERSION}-install.tar.gz\n\n# Install GeoMesa Stream Store\nRUN set -x \\\n    && cd /opt/tomcat/webapps/geoserver/WEB-INF/lib/ \\\n    && tar zxvf /opt/geomesa/dist/gs-plugins/geomesa-stream-gs-plugin_2.11-${GEOMESA_VERSION}-install.tar.gz && rm /opt/geomesa/dist/gs-plugins/geomesa-stream-gs-plugin_2.11-${GEOMESA_VERSION}-install.tar.gz\n\n# Install GeoMesa GeoJson Support\nRUN set -x \\\n    && cd /opt/tomcat/webapps/geoserver/WEB-INF/lib/ \\\n    && tar zxvf /opt/geomesa/dist/gs-plugins/geomesa-geojson-gs-plugin_2.11-${GEOMESA_VERSION}-install.tar.gz && rm /opt/geomesa/dist/gs-plugins/geomesa-geojson-gs-plugin_2.11-${GEOMESA_VERSION}-install.tar.gz\n\n# Install GeoMesa Process Jar\nRUN set -x \\\n    && cd /opt/tomcat/webapps/geoserver/WEB-INF/lib/ \\\n    && cp /opt/geomesa/dist/gs-plugins/geomesa-process-wps_2.11-${GEOMESA_VERSION}.jar .\n\n# Install Hadoop and Accumulo specific jars\nRUN set -x \\\n    && /opt/geomesa/bin/install-hadoop-accumulo.sh /opt/tomcat/webapps/geoserver/WEB-INF/lib -a ${ACCUMULO_VERSION} -h ${HADOOP_VERSION} -t ${THRIFT_VERSION}\n\n# Install Geomesa Kafka Distribution\nCOPY --from=1 /geomesa-kafka* /opt/geomesa-kafka/\n\n# Install GeoMesa Kafka DataStore\nRUN set -x \\\n  && cd /opt/tomcat/webapps/geoserver/WEB-INF/lib/ \\\n  && tar zxvf /opt/geomesa-kafka/dist/gs-plugins/geomesa-kafka-gs-plugin_2.11-${GEOMESA_VERSION}-install.tar.gz \\\n  && rm /opt/tomcat/webapps/geoserver/WEB-INF/lib/zookeeper*.jar \\\n  && /opt/geomesa-kafka/bin/install-kafka.sh /opt/tomcat/webapps/geoserver/WEB-INF/lib && rm /opt/geomesa-kafka/dist/gs-plugins/geomesa-kafka-gs-plugin_2.11-${GEOMESA_VERSION}-install.tar.gz\n\n\nFROM quay.io/geomesa/base:__TAG__\n\nARG GEOMESA_VERSION\nARG ACCUMULO_VERSION\nARG THRIFT_VERSION\n\nENV ACCUMULO_VERSION ${ACCUMULO_VERSION}\nENV GEOMESA_VERSION ${GEOMESA_VERSION}\nENV THRIFT_VERSION ${THRIFT_VERSION}\nENV HADOOP_VERSION 2.8.4\nENV GEOSERVER_VERSION 2.14.1\nENV TOMCAT_VERSION 8.5.23\nENV CATALINA_OPTS \"-Xmx8g -XX:MaxPermSize=512M -Duser.timezone=UTC -server -Djava.awt.headless=true\"\n\nCOPY --from=2 /opt/tomcat /opt/tomcat/\nRUN set -x \\\n  && groupadd tomcat \\\n  && useradd -M -s /bin/nologin -g tomcat -d /opt/tomcat tomcat \\\n  && chown root /opt/tomcat/webapps/geoserver/WEB-INF/lib/* \\\n  && chgrp root /opt/tomcat/webapps/geoserver/WEB-INF/lib/*\n\nCOPY server.xml /opt/tomcat/conf/server.xml\nVOLUME [\"/opt/tomcat/webapps/geoserver/data\"]\nEXPOSE 9090\nCMD [\"/opt/tomcat/bin/catalina.sh\", \"run\"]\n"
}