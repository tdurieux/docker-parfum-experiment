{
  "startTime": 1674243267314,
  "endTime": 1674243267427,
  "originalSmells": [
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 11,
        "lineEnd": 23,
        "columnStart": 4,
        "columnEnd": 19
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "# A Docker container to run the OHDSI/Achilles analysis tool\nFROM ubuntu:trusty\n\nMAINTAINER Aaron Browne <brownea@email.chop.edu>\n\n# Install java, R and required packages and clean up.\nRUN echo deb http://ppa.launchpad.net/marutter/rrutter/ubuntu trusty main >> /etc/apt/sources.list && \\\n    echo deb http://ppa.launchpad.net/marutter/c2d4u/ubuntu trusty main >> /etc/apt/sources.list && \\\n    apt-key adv --keyserver keyserver.ubuntu.com --recv-keys C9A7585B49D51698710F3A115E25F516B04C661B && \\\n    sed 's#http://.*archive\\.ubuntu\\.com/ubuntu/#mirror://mirrors.ubuntu.com/mirrors.txt#g' -i /etc/apt/sources.list && \\\n    apt-get update && \\\n    DEBIAN_FRONTEND=noninteractive apt-get --no-install-recommends install -y \\\n      r-base \\\n      r-cran-devtools \\\n      r-cran-httr \\\n      r-cran-rjson \\\n      r-cran-stringr \\\n      r-cran-rjava \\\n      r-cran-dbi \\\n      r-cran-ffbase \\\n      r-cran-urltools \\\n      libxml2-dev \\\n      littler \\\n      openjdk-7-jdk \\\n    && rm -rf /var/lib/apt/lists/* \\\n    && R CMD javareconf\n\n# Set default locale\nRUN echo \"en_US.UTF-8 UTF-8\" >> /etc/locale.gen \\\n\t&& locale-gen en_US.utf8 \\\n\t&& /usr/sbin/update-locale LANG=en_US.UTF-8\n\nENV LC_ALL en_US.UTF-8\nENV LANG en_US.UTF-8\n\n# Install OHDSI/ParallelLogger\nRUN R -e \"install.packages( \\\n c( \\\n  'XML', \\\n  'RJSONIO' \\\n ), \\ \n repos='http://cran.rstudio.com/', \\\n) \"\n\n# Install Achilles requirements that need to be installed from source\nRUN echo 'options(repos=structure(c(CRAN=\"http://cran.cnr.berkeley.edu/\")))' > /root/.Rprofile && \\\n    /usr/share/doc/littler/examples/install.r remotes && \\\n    /usr/share/doc/littler/examples/install.r docopt && \\\n    /usr/share/doc/littler/examples/install.r openxlsx && \\\n    /usr/share/doc/littler/examples/install.r httr && \\\n    /usr/share/doc/littler/examples/install.r rjson && \\\n    /usr/share/doc/littler/examples/install.r R.oo && \\\n    /usr/share/doc/littler/examples/install.r formatR && \\\n    /usr/share/doc/littler/examples/install.r R.utils && \\\n    /usr/share/doc/littler/examples/install.r snow && \\\n    /usr/share/doc/littler/examples/install.r mailR && \\\n    /usr/share/doc/littler/examples/install.r dplyr && \\\n    /usr/share/doc/littler/examples/installGithub.r \\\n      OHDSI/SqlRender \\\n      OHDSI/DatabaseConnectorJars \\\n      OHDSI/DatabaseConnector \\\n      OHDSI/ParallelLogger \\\n    && rm -rf /tmp/downloaded_packages/ /tmp/*.rds\n\n# Configure workspace\nWORKDIR /opt/app\nENV PATH /opt/app:$PATH\nVOLUME /opt/app/output\n\n# Add project files to container\nCOPY . /opt/app/\n\n# Install Achilles from source\nRUN R CMD INSTALL /opt/app \\\n    && rm -rf /tmp/downloaded_packages/ /tmp/*.rds \\\n    && find /opt/app -mindepth 1 -not \\( -wholename /opt/app/docker-run -or -wholename /opt/app/output \\) -delete\n\n# Define run script as default command\nCMD [\"docker-run\"]\n"
}