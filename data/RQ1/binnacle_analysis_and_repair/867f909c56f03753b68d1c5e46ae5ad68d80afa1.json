{
  "startTime": 1674246676016,
  "endTime": 1674246676190,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 7,
        "lineEnd": 7,
        "columnStart": 4,
        "columnEnd": 49
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 6,
        "lineEnd": 6,
        "columnStart": 4,
        "columnEnd": 28
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 9,
        "lineEnd": 13,
        "columnStart": 4,
        "columnEnd": 10
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 6,
        "lineEnd": 6,
        "columnStart": 4,
        "columnEnd": 28
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 9,
        "lineEnd": 13,
        "columnStart": 4,
        "columnEnd": 10
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 6,
        "lineEnd": 6,
        "columnStart": 4,
        "columnEnd": 28
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 9,
        "lineEnd": 13,
        "columnStart": 4,
        "columnEnd": 10
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 6,
        "lineEnd": 6,
        "columnStart": 4,
        "columnEnd": 52
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 9,
        "lineEnd": 13,
        "columnStart": 4,
        "columnEnd": 10
      }
    }
  ],
  "repairedDockerfile": "FROM ubuntu:16.04\nMAINTAINER Xavier Mertens <xavier@rootshell.be>\n\n# Install prerequisites for moloch\n\nRUN apt-get -qq update\nRUN apt-get install --no-install-recommends -yq curl && rm -rf /var/lib/apt/lists/*;\nRUN curl -f -sL https://deb.nodesource.com/setup_6.x | bash -\nRUN apt-get -qq update && apt-get -qq upgrade\nRUN apt-get install --no-install-recommends -yq wget curl git sudo libyaml-dev xz-utils gcc pkg-config g++ flex bison \\\n\t\t\tzlib1g-dev libffi-dev gettext libpcre3-dev uuid-dev libmagic-dev \\\n\t\t\tlibgeoip-dev make libjson-perl libbz2-dev libwww-perl libpng-dev yara \\\n\t\t\tlibpcap-dev nodejs phantomjs vim net-tools python supervisor socat openssl \\\n\t\t\ttcpdump && rm -rf /var/lib/apt/lists/*;\n\nADD /scripts /data\nRUN chmod 755 /data/*.sh\n\n# Start building Moloch\nRUN /data/buildmoloch.sh /data/moloch-git  && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*\nRUN ln -s /usr/bin/nodejs /data/moloch/bin/node\nRUN ln -s /data/moloch/bin/moloch-capture /usr/bin/moloch-capture\nRUN ln -s /data/moloch/bin/moloch-capture /usr/bin/capture\n\nRUN touch /.firstboot\n\nADD /etc /tmp\n\nVOLUME [\"/data/moloch/etc\",\"/data/moloch/logs\",\"/data/moloch/data\",\"/data/moloch/raw\",\"/data/pcap\"]\n\n# Set expose port for moloch viewer & socat\nEXPOSE 8005\nEXPOSE 8443\n\nWORKDIR /data/moloch\n\nENTRYPOINT [\"/data/startmoloch.sh\"]\n"
}