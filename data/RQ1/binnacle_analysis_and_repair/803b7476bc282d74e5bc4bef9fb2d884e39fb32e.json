{
  "startTime": 1674251179073,
  "endTime": 1674251179416,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 30,
        "lineEnd": 30,
        "columnStart": 4,
        "columnEnd": 65
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 50,
        "lineEnd": 51,
        "columnStart": 7,
        "columnEnd": 81
      }
    },
    {
      "rule": "npmCacheCleanAfterInstall",
      "position": {
        "lineStart": 9,
        "lineEnd": 9,
        "columnStart": 4,
        "columnEnd": 46
      }
    },
    {
      "rule": "npmCacheCleanAfterInstall",
      "position": {
        "lineStart": 20,
        "lineEnd": 20,
        "columnStart": 26,
        "columnEnd": 65
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 31,
        "lineEnd": 31,
        "columnStart": 4,
        "columnEnd": 29
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 34,
        "lineEnd": 34,
        "columnStart": 4,
        "columnEnd": 29
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 27,
        "lineEnd": 27,
        "columnStart": 7,
        "columnEnd": 52
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 29,
        "lineEnd": 29,
        "columnStart": 7,
        "columnEnd": 40
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 27,
        "lineEnd": 27,
        "columnStart": 7,
        "columnEnd": 52
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 29,
        "lineEnd": 29,
        "columnStart": 7,
        "columnEnd": 40
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "# :latest as pointing to: 10.4.0-jessie, 10.4-jessie, 10-jessie, jessie, 10.4.0, 10.4, 10, latest\n# https://github.com/nodejs/docker-node/blob/8efaa064853a2f866481f162eb4e424c5ee8ac9e/10/jessie/Dockerfile\n# does currently not build node-git: https://github.com/nodegit/nodegit/issues/1490\n# FROM node:latest\n# FIXME: use :latest when it builds again\nFROM node:9\n\nRUN touch /tmp/cache_spoof_1\n\nRUN npm install -g bower browserify requirejs; npm cache clean --force;\n\n\nADD ./.bowerrc ./bower.json ./package.json /var/javascript/\n\nRUN touch /tmp/cache_spoof_1\nADD ./generated_modules /var/javascript/generated_modules\n\n\n# will also invoke bower install etc.\n# --production: don't install dev-dependencies\nRUN cd /var/javascript && npm install --unsafe-perm  --production && npm cache clean --force;\n\n\n# It seems to be moost roust to read our METADATA.pb files using python\n# that's the only reason for this dependency, used in manifestSources\n# via the module /node/util/getMetadataPb\nRUN apt-get update && apt-get upgrade -y \\\n    && apt-get install --no-install-recommends -y software-properties-common \\\n    && apt-get update \\\n    && apt-get install --no-install-recommends -y python-dev git; rm -rf /var/lib/apt/lists/*;\nRUN curl -f -o /tmp/get-pip.py https://bootstrap.pypa.io/get-pip.py; python /tmp/get-pip.py;\nRUN pip install --no-cache-dir --upgrade pip\n\nRUN git clone --depth 1 -b master https://github.com/googlefonts/gftools.git /var/gftools; \\\n    pip install --no-cache-dir /var/gftools;\n\nRUN cd /var/javascript \\\n     && bower install --allow-root \\\n     && browserify ./browser/js/bower_components/jiff/jiff.js -s jiff \\\n                         -o ./browser/js/bower_components/jiff/jiff.umd.js && browserify \\\n                   ./browser/js/bower_components/jiff/lib/jsonPointer -s jsonPointer \\\n                         -o ./browser/js/bower_components/jiff/jsonPointer.umd.js \\\n     && cp -r ./generated_modules/protocolbuffers ./node_modules/protocolbuffers \\\n     && mkdir -p ./browser/js/bower_components/protocolbuffers \\\n     && browserify ./node_modules/protocolbuffers/shared_pb.js -s  protocolbuffers/shared_pb \\\n                         -o ./browser/js/bower_components/protocolbuffers/shared_pb.js;\n\n# TODO: install with bower when:\n# https://github.com/drudru/ansi_up/issues/39 is resolved\nRUN mkdir -p /var/javascript/browser/js/bower_components/ansi_up/ \\\n    && curl -f -o /var/javascript/browser/js/bower_components/ansi_up/ansi_up.js \\\n               https://raw.githubusercontent.com/drudru/ansi_up/master/ansi_up.js\n\nADD ./fontsgit /var/fontsgit\n# This way we only need to rebuild the last intermediate container when\n# code changed, especially the npm install can be skipped!\nADD ./browser /var/javascript/browser\nADD ./node /var/javascript/node\n"
}