{
  "startTime": 1674251707375,
  "endTime": 1674251707501,
  "originalSmells": [
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 9,
        "lineEnd": 9,
        "columnStart": 22,
        "columnEnd": 72
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 35,
        "lineEnd": 35,
        "columnStart": 22,
        "columnEnd": 51
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 35,
        "lineEnd": 35,
        "columnStart": 22,
        "columnEnd": 51
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "#\n# multi-stage build\n# docker build --target builder -t stillwater/universal:builder will just build a builder container\n# docker build --target release -t stillwater/universal:release will just build a release container\n\n# BUILDER stage\nFROM gcc:7 as builder\nMAINTAINER Theodore Omtzigt\n# create a cmake build environment\nRUN apt-get update && apt-get install --no-install-recommends -y build-essential apt-utils cmake \\\n    && apt-get clean \\\n    && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*\n\n# make certain you have a good .dockerignore file installed so that this layer isn't ginormous\nCOPY . /usr/src/universal\n# print contextual information of the container at this state for validation the process is solid\nRUN ls -la /usr/src/universal && cmake -version\n\n# set up the cmake/make environment to issue the build commands\nRUN mkdir build\nWORKDIR /usr/src/universal/build\nRUN cmake -DBUILD_CI_CHECK=ON .. && make\n\n# actual command 'make test' is run as part of the test pipeline\n\n# add a command that when you run the container without a command, it produces something meaningful\nCMD [\"echo\", \"Universal Numbers Library Version 2.0.0\"]\n\n\n# RELEASE stage\n#FROM alpine:latest as release    # hitting a segfault during startup of some playground programs\nFROM debian:latest as release\nMAINTAINER Theodore Omtzigt\n\n#RUN apk add --no-cache libc6-compat libstdc++ make cmake bash gawk sed grep bc coreutils\nRUN apt-get update && apt-get install --no-install-recommends -y make cmake && rm -rf /var/lib/apt/lists/*;\n\n# after building, the test executables are organized in the build directory under root\n# ctest gets its configuration for CTestTestfile.cmake files. There is one at the root of the build tree\n# and one for each directory that contains test executables.\nCOPY --from=builder /usr/src/universal/build/tools/cmd/cmd_*             \t              /usr/src/universal/build/tools/cmd/\nCOPY --from=builder /usr/src/universal/build/tools/cmd/*.cmake           \t              /usr/src/universal/build/tools/cmd/\nCOPY --from=builder /usr/src/universal/build/tests/posit/posit_*         \t              /usr/src/universal/build/tests/posit/\nCOPY --from=builder /usr/src/universal/build/tests/posit/*.cmake         \t              /usr/src/universal/build/tests/posit/\nCOPY --from=builder /usr/src/universal/build/perf/perf_*                 \t              /usr/src/universal/build/perf/\nCOPY --from=builder /usr/src/universal/build/perf/*.cmake                \t              /usr/src/universal/build/perf/\nCOPY --from=builder /usr/src/universal/build/c_api/shim/test/posit/c_api_shim_exact_test      /usr/src/universal/build/c_api/shim/test/posit/c_api_shim_exact_test\nCOPY --from=builder /usr/src/universal/build/c_api/shim/test/posit/c_api_shim_experiment      /usr/src/universal/build/c_api/shim/test/posit/c_api_shim_experiment\nCOPY --from=builder /usr/src/universal/build/c_api/shim/test/posit/c_api_shim_posit4          /usr/src/universal/build/c_api/shim/test/posit/c_api_shim_posit4\nCOPY --from=builder /usr/src/universal/build/c_api/shim/test/posit/c_api_shim_posit8          /usr/src/universal/build/c_api/shim/test/posit/c_api_shim_posit8\nCOPY --from=builder /usr/src/universal/build/c_api/shim/test/posit/c_api_shim_posit16         /usr/src/universal/build/c_api/shim/test/posit/c_api_shim_posit16\nCOPY --from=builder /usr/src/universal/build/c_api/shim/test/posit/c_api_shim_posit32         /usr/src/universal/build/c_api/shim/test/posit/c_api_shim_posit32\nCOPY --from=builder /usr/src/universal/build/c_api/shim/test/posit/c_api_shim_posit64         /usr/src/universal/build/c_api/shim/test/posit/c_api_shim_posit64\nCOPY --from=builder /usr/src/universal/build/c_api/shim/test/posit/c_api_shim_posit128        /usr/src/universal/build/c_api/shim/test/posit/c_api_shim_posit128\nCOPY --from=builder /usr/src/universal/build/c_api/shim/test/posit/c_api_shim_posit256        /usr/src/universal/build/c_api/shim/test/posit/c_api_shim_posit256\nCOPY --from=builder /usr/src/universal/build/c_api/shim/test/posit/*.cmake    \t              /usr/src/universal/build/c_api/shim/test/posit/\nCOPY --from=builder /usr/src/universal/build/c_api/pure_c/test/posit/c_api_pure_posit8        /usr/src/universal/build/c_api/pure_c/test/posit/c_api_pure_posit8\nCOPY --from=builder /usr/src/universal/build/c_api/pure_c/test/posit/c_api_pure_playground    /usr/src/universal/build/c_api/pure_c/test/posit/c_api_pure_playground\nCOPY --from=builder /usr/src/universal/build/c_api/pure_c/test/posit/*.cmake                  /usr/src/universal/build/c_api/pure_c/test/posit/\nCOPY --from=builder /usr/src/universal/build/examples/blas/blas_*        \t              /usr/src/universal/build/examples/blas/\nCOPY --from=builder /usr/src/universal/build/examples/blas/*.cmake       \t              /usr/src/universal/build/examples/blas/\nCOPY --from=builder /usr/src/universal/build/examples/dsp/dsp_*          \t              /usr/src/universal/build/examples/dsp/\nCOPY --from=builder /usr/src/universal/build/examples/dsp/*.cmake        \t              /usr/src/universal/build/examples/dsp/\nCOPY --from=builder /usr/src/universal/build/education/posit/edu_*       \t              /usr/src/universal/build/education/posit/\nCOPY --from=builder /usr/src/universal/build/education/posit/*.cmake     \t              /usr/src/universal/build/education/posit/\nCOPY --from=builder /usr/src/universal/build/examples/playground/playgr* \t              /usr/src/universal/build/examples/playground/\nCOPY --from=builder /usr/src/universal/build/examples/playground/*.cmake \t              /usr/src/universal/build/examples/playground/\n# the ctest configuration root and Makefile so we can execute _make test_ in the test stage of the CI/CD pipeline\nCOPY --from=builder /usr/src/universal/build/Makefile              \t\t              /usr/src/universal/build/\nCOPY --from=builder /usr/src/universal/build/CTestTestfile.cmake   \t\t              /usr/src/universal/build/\n\nWORKDIR /usr/src/universal/build\n# double check we have all the executables of interest\nRUN find .\n\n#CMD [\"/usr/src/universal/tools/cmd/cmd_numeric_limits\"]\nCMD [\"echo\", \"Universal Numbers Library Version 2.0.0\"]\n"
}