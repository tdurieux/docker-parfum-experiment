{
  "startTime": 1674242436741,
  "endTime": 1674242436964,
  "originalSmells": [
    {
      "rule": "aptGetInstallUseY",
      "position": {
        "lineStart": 16,
        "lineEnd": 22,
        "columnStart": 7,
        "columnEnd": 12
      }
    },
    {
      "rule": "aptGetInstallUseY",
      "position": {
        "lineStart": 82,
        "lineEnd": 84,
        "columnStart": 7,
        "columnEnd": 23
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM debian:8\n\nARG TERM=linux\nARG DEBIAN_FRONTEND=noninteractive\nARG SCIDB_NAME=scidb\n\nENV SCIDB_VER=15.12        \\\n    SCIDB_NAME=$SCIDB_NAME\n\nENV SCIDB_INSTALL_PATH=/opt/scidb/$SCIDB_VER\n\nENV PATH=$PATH:$SCIDB_INSTALL_PATH/bin\n\n\n## Install dependencies\nRUN apt-get update \\\n    && apt-get install -y --assume-yes --no-install-recommends \\\n        apt-transport-https \\\n        ca-certificates \\\n        libscalapack-openmpi1 \\\n        openssh-server \\\n        pkg-config \\\n        wget \\\n    && rm -rf /var/lib/apt/lists/*\n\n\n## Build and install libpqxx3 from wheezy\nRUN echo \"deb-src http://http.debian.net/debian wheezy main\"  \\\n    >  /etc/apt/sources.list.d/wheezy.list                    \\\n    && apt-get update                                         \\\n    && apt-get build-dep --assume-yes --no-install-recommends \\\n        libpqxx3                                              \\\n    && mkdir /usr/local/src/libpqxx3                          \\\n    && cd /usr/local/src/libpqxx3                             \\\n    && apt-get source --build                                 \\\n        libpqxx3                                              \\\n    && apt-get purge --assume-yes                             \\\n        autotools-dev                                         \\\n        bsdmainutils                                          \\\n        build-essential                                       \\\n        bzip2                                                 \\\n        chrpath                                               \\\n        debhelper                                             \\\n        dpkg-dev                                              \\\n        file                                                  \\\n        gettext                                               \\\n        gettext-base                                          \\\n        groff-base                                            \\\n        intltool-debian                                       \\\n        libasprintf0c2                                        \\\n        libcroco3                                             \\\n        libdpkg-perl                                          \\\n        libgdbm3                                              \\\n        libmagic1                                             \\\n        libpipeline1                                          \\\n        libtimedate-perl                                      \\\n        libtool                                               \\\n        libunistring0                                         \\\n        man-db                                                \\\n        perl                                                  \\\n        perl-modules                                          \\\n        po-debconf                                            \\\n        xz-utils                                              \\\n    && dpkg --install                                         \\\n        libpqxx-3.1_3.1-1.1_amd64.deb                         \\\n        libpqxx3-dev_3.1-1.1_amd64.deb                        \\\n    && rm -rf                                                 \\\n        /etc/apt/sources.list.d/wheezy.list                   \\\n        /usr/local/src/libpqxx3                               \\\n        /var/lib/apt/lists/*\n\n\n## Add Paradigm4 and Bintray repositories and install SciDB packages\nRUN wget --no-verbose --output-document - https://downloads.paradigm4.com/key \\\n    |  apt-key add -                                                          \\\n    && echo \"deb https://downloads.paradigm4.com/ ubuntu14.04/3rdparty/\"      \\\n    >  /etc/apt/sources.list.d/scidb.list                                     \\\n    && apt-key adv                                                            \\\n        --keyserver hkp://keyserver.ubuntu.com --recv 46BD98A354BA5235        \\\n    && echo \"deb https://dl.bintray.com/rvernica/deb jessie main\"             \\\n    >  /etc/apt/sources.list.d/bintray.list                                   \\\n    && apt-get update \\\n    && apt-get install -y --assume-yes --no-install-recommends \\\n        paradigm4-$SCIDB_VER-all-coord \\\n        shim=$SCIDB_VER \\\n    && rm -rf /var/lib/apt/lists/*\n\n\n## Setup SSH\nRUN echo 'StrictHostKeyChecking no'                                             \\\n    >> /etc/ssh/ssh_config                                                      \\\n    && ssh-keygen -f /root/.ssh/id_rsa -q -N \"\"                                 \\\n    && cp /root/.ssh/id_rsa.pub /root/.ssh/authorized_keys\n\n\n## Setup SciDB \"config.ini\"\nCOPY config.deb.ini $SCIDB_INSTALL_PATH/etc/config.ini\n\n\n## Setup PostgreSQL and SciDB\nRUN echo \"127.0.0.1:5432:$SCIDB_NAME:$SCIDB_NAME:`                   \\\n            date +%s | sha256sum | base64 | head -c 32`\"             \\\n    >  /root/.pgpass                                                 \\\n    && chmod go-r /root/.pgpass                                      \\\n    && service ssh start                                             \\\n    && service postgresql start                                      \\\n    && su --command=\"                                                \\\n            $SCIDB_INSTALL_PATH/bin/scidb.py init-syscat $SCIDB_NAME \\\n                --db-password `                                      \\\n                    cut --delimiter : --fields 5  /root/.pgpass`\"    \\\n        postgres                                                     \\\n    && $SCIDB_INSTALL_PATH/bin/scidb.py init-all --force $SCIDB_NAME \\\n    && service postgresql stop\n\n\nCOPY docker-entrypoint.sh /\nENTRYPOINT [\"/docker-entrypoint.sh\"]\n\n\n## Port | App\n## -----+-----\n## 1239 | SciDB iquery\n## 8080 | SciDB Shim (HTTP)\n## 8083 | SciDB Shim (HTTPS)\nEXPOSE 1239 8080 8083\n"
}