{
  "startTime": 1674250888884,
  "endTime": 1674250889097,
  "originalSmells": [
    {
      "rule": "configureShouldUseBuildFlag",
      "position": {
        "lineStart": 65,
        "lineEnd": 86,
        "columnStart": 5,
        "columnEnd": 23
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 63,
        "lineEnd": 63,
        "columnStart": 2,
        "columnEnd": 33
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 6,
        "lineEnd": 61,
        "columnStart": 5,
        "columnEnd": 16
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 6,
        "lineEnd": 61,
        "columnStart": 5,
        "columnEnd": 16
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 6,
        "lineEnd": 61,
        "columnStart": 5,
        "columnEnd": 16
      }
    }
  ],
  "repairedDockerfile": "ARG IMAGE_BASE\n\nFROM ${IMAGE_BASE} as BUILD\n    ARG PROC_COUNT=8\n\tENV FFMPEG_COMMIT a899b3b3c5f55e6c527f8aa81dbe15edb9fab63f\n\n\tRUN apt-get install -yq --no-install-recommends \\\n\t\tautoconf \\\n\t\tautomake \\\n\t\tcmake \\\n\t\tcurl \\\n\t\tbzip2 \\\n\t\tlibexpat1-dev \\\n\t\tg++ \\\n\t\tgcc \\\n\t\tgit \\\n\t\tgperf \\\n\t\tlibtool \\\n\t\tmake \\\n\t\tnasm \\\n\t\tperl \\\n\t\tpkg-config \\\n\t\tpython \\\n\t\tlibssl-dev \\\n\t\tyasm \\\n\t\tzlib1g-dev \\\n\t\tlibjpeg-dev \\\n\t\tlibsndfile1-dev \\\n\t\tlibglu1-mesa-dev \\\n\t\tlibharfbuzz0b \\\n\t\tlibpangoft2-1.0-0 \\\n\t\tlibcairo2 \\\n\t\tlibv4l-0 \\\n\t\tlibraw1394-11 \\\n\t\tlibavc1394-0 \\\n\t\tlibiec61883-0 \\\n\t\tlibxtst6 \\\n\t\tlibnss3 \\\n\t\tlibnspr4 \\\n\t\tlibgconf-2-4 \\\n\t\tlibasound2 \\\n\t\tlibfreeimage-dev \\\n\t\tlibglew-dev \\\n\t\tlibopenal-dev \\\n\t\tlibopus-dev \\\n\t\tlibgsm1-dev \\\n\t\tlibmodplug-dev \\\n\t\tlibvpx-dev \\\n\t\tlibass-dev \\\n\t\tlibbluray-dev \\\n\t\tlibfribidi-dev \\\n\t\tlibgmp-dev \\\n\t\tlibgnutls28-dev \\\n\t\tlibmp3lame-dev \\\n\t\tlibopencore-amrnb-dev \\\n\t\tlibopencore-amrwb-dev \\\n\t\tlibrtmp-dev \\\n\t\tlibtheora-dev \\\n\t\tlibx264-dev \\\n\t\tlibx265-dev \\\n\t\tlibxvidcore-dev \\\n\t\tlibfdk-aac-dev && rm -rf /var/lib/apt/lists/*;\n\tRUN wget https://github.com/FFmpeg/FFmpeg/archive/${FFMPEG_COMMIT}.tar.gz && \\\n\t\ttar zxf ${FFMPEG_COMMIT}.tar.gz && rm ${FFMPEG_COMMIT}.tar.gz\n\tWORKDIR FFmpeg-${FFMPEG_COMMIT}\n\tRUN ./configure --build=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\" \\\n\t\t\t--enable-version3 \\\n\t\t\t--enable-gpl \\\n\t\t\t--enable-nonfree \\\n\t\t\t--enable-small \\\n\t\t\t--enable-libmp3lame \\\n\t\t\t--enable-libx264 \\\n\t\t\t--enable-libx265 \\\n\t\t\t--enable-libvpx \\\n\t\t\t--enable-libtheora \\\n\t\t\t--enable-libvorbis \\\n\t\t\t--enable-libopus \\\n\t\t\t--enable-libfdk-aac \\\n\t\t\t--enable-libass \\\n\t\t\t--enable-libwebp \\\n\t\t\t--enable-librtmp \\\n\t\t\t--enable-postproc \\\n\t\t\t--enable-avresample \\\n\t\t\t--enable-libfreetype \\\n\t\t\t--enable-openssl \\\n\t\t\t--disable-debug \\\n\t\t\t--prefix=/opt/ffmpeg \\\n\t\t\t&& \\\n\t\tmake -j $PROC_COUNT && \\\n\t\tmake install\n\nFROM scratch\n\tCOPY --from=BUILD /opt/ffmpeg /opt/ffmpeg\n"
}