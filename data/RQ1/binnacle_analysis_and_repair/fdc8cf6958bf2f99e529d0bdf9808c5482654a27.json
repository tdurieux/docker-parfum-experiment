{
  "startTime": 1674240146187,
  "endTime": 1674240146251,
  "originalSmells": [
    {
      "rule": "apkAddUseNoCache",
      "position": {
        "lineStart": 6,
        "lineEnd": 6,
        "columnStart": 4,
        "columnEnd": 31
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "# Docker build script for continuous deployment demo container\n\nFROM alpine:3.8\n\n# Install software\nRUN apk update\nRUN apk add --no-cache php-cli php-apache2\n\n# Prep Apache\nRUN mkdir -p /run/apache2\nRUN echo \"ServerName localhost\" > /etc/apache2/conf.d/server-name.conf\n\n# Add dumb init to improve sig handling (stop time in CircleCI of 10sec is too slow)\nRUN wget -O /usr/local/bin/dumb-init https://github.com/Yelp/dumb-init/releases/download/v1.2.2/dumb-init_1.2.2_amd64\nRUN chmod +x /usr/local/bin/dumb-init\n\n# Copy shell scripts\nCOPY bin /app/bin\nRUN chmod -R +x /app/bin\n\n# Copy contents of a web dir\nRUN rm /var/www/localhost/htdocs/*\nCOPY web/* /var/www/localhost/htdocs/\n\nEXPOSE 80\n\n# The healthcheck is used by the Routing Mesh, during a rolling update, to understand\n# when to avoid a container that is not ready to receive HTTP traffic.\nHEALTHCHECK --interval=5s --timeout=5s --start-period=2s --retries=5 \\\n    CMD wget -qO- http://localhost/health.php > /dev/null || exit 1\n\n# Start the web server\nENTRYPOINT [\"/usr/local/bin/dumb-init\", \"--\"]\nCMD [\"sh\", \"/app/bin/container-start.sh\"]\n"
}