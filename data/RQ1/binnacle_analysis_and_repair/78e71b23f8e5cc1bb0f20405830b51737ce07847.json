{
  "startTime": 1674244526076,
  "endTime": 1674244526407,
  "originalSmells": [
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 22,
        "lineEnd": 24,
        "columnStart": 7,
        "columnEnd": 86
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "#\n# Licensed to the Apache Software Foundation (ASF) under one or more\n# contributor license agreements.  See the NOTICE file distributed with\n# this work for additional information regarding copyright ownership.\n# The ASF licenses this file to You under the Apache License, Version 2.0\n# (the \"License\"); you may not use this file except in compliance with\n# the License.  You may obtain a copy of the License at\n#\n#    http://www.apache.org/licenses/LICENSE-2.0\n#\n# Unless required by applicable law or agreed to in writing, software\n# distributed under the License is distributed on an \"AS IS\" BASIS,\n# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n# See the License for the specific language governing permissions and\n# limitations under the License.\n#\n\nFROM predictionio/pio:latest\n\nENV DEBIAN_FRONTEND noninteractive\n\nRUN apt-get update \\\n    && apt install --no-install-recommends -y build-essential curl git gcc make openssl libssl-dev libbz2-dev \\\n    apt-transport-https ca-certificates g++ gnupg graphviz lsb-release openssh-client zip \\\n    libreadline-dev libsqlite3-dev cmake libxml2-dev wget bzip2 sudo vim unzip locales \\\n    && apt-get clean \\\n    && rm -rf /var/lib/apt/lists/*\n\nRUN echo \"en_US.UTF-8 UTF-8\" > /etc/locale.gen && locale-gen\n\nENV LC_ALL=en_US.UTF-8 \\\n    LANG=en_US.UTF-8 \\\n    LANGUAGE=en_US.UTF-8 \\\n    NB_USER=jovyan \\\n    NB_UID=1000 \\\n    NB_GID=100 \\\n    CONDA_DIR=/opt/conda \\\n    PIP_DEFAULT_TIMEOUT=180\nENV PATH=$CONDA_DIR/bin:$PATH \\\n    HOME=/home/$NB_USER\n\nADD fix-permissions /usr/local/bin/fix-permissions\nRUN chmod +x /usr/local/bin/fix-permissions \\\n    && groupadd wheel -g 11 \\\n    && echo \"auth required pam_wheel.so use_uid\" >> /etc/pam.d/su \\\n    && useradd -m -s /bin/bash -N -u $NB_UID $NB_USER \\\n    && mkdir -p $CONDA_DIR \\\n    && chmod g+w /etc/passwd \\\n    && fix-permissions $HOME \\\n    && fix-permissions $CONDA_DIR\n\nUSER $NB_USER\n\nENV MINICONDA_VERSION 4.4.10\nRUN wget -q https://repo.continuum.io/miniconda/Miniconda3-${MINICONDA_VERSION}-Linux-x86_64.sh -O /tmp/miniconda.sh \\\n    && echo 'bec6203dbb2f53011e974e9bf4d46e93 */tmp/miniconda.sh' | md5sum -c - \\\n    && bash /tmp/miniconda.sh -f -b -p $CONDA_DIR \\\n    && rm /tmp/miniconda.sh \\\n    && conda config --system --prepend channels conda-forge \\\n    && conda config --system --set auto_update_conda false \\\n    && conda config --system --set show_channel_urls true \\\n    && conda install --quiet --yes conda=\"${MINICONDA_VERSION%.*}.*\" \\\n    && conda update --all --quiet --yes \\\n    && conda clean -tipsy \\\n    && rm -rf /home/$NB_USER/.cache/yarn \\\n    && fix-permissions $CONDA_DIR \\\n    && fix-permissions /home/$NB_USER\n\nRUN conda install --quiet --yes 'tini=0.18.0' \\\n    && conda list tini | grep tini | tr -s ' ' | cut -d ' ' -f 1,2 >> $CONDA_DIR/conda-meta/pinned \\\n    && conda clean -tipsy \\\n    && fix-permissions $CONDA_DIR \\\n    && fix-permissions /home/$NB_USER\n\nRUN conda install --quiet --yes 'notebook=5.6.*' 'jupyterlab=0.34.*' nodejs\\\n    && jupyter labextension install @jupyterlab/hub-extension@^0.11.0 \\\n    && jupyter notebook --generate-config \\\n    && conda clean -tipsy \\\n    && npm cache clean --force \\\n    && rm -rf $CONDA_DIR/share/jupyter/lab/staging \\\n    && rm -rf /home/$NB_USER/.cache/yarn \\\n    && fix-permissions $CONDA_DIR \\\n    && fix-permissions /home/$NB_USER\n\nADD requirements.txt /tmp/requirements.txt\nRUN pip --no-cache-dir install -r /tmp/requirements.txt \\\n    && fix-permissions $CONDA_DIR \\\n    && fix-permissions /home/$NB_USER\n\nCOPY jupyter_notebook_config.py /home/$NB_USER/.jupyter/\nCOPY start*.sh /usr/local/bin/\n\nUSER root\nRUN chmod +x /usr/local/bin/*.sh\n\nEXPOSE 8888\nWORKDIR $HOME\nENTRYPOINT [\"tini\", \"--\"]\nCMD [\"/usr/local/bin/start-jupyter.sh\"]\n\n"
}