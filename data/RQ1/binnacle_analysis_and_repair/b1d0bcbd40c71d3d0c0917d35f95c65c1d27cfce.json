{
  "startTime": 1674242665041,
  "endTime": 1674242665305,
  "originalSmells": [
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 5,
        "lineEnd": 5,
        "columnStart": 4,
        "columnEnd": 71
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM stackbrew/ubuntu:14.04\nMAINTAINER Brad Chapman \"https://github.com/chapmanb\"\n\n# Setup a base system\nRUN apt-get update && \\\n    apt-get install --no-install-recommends -y curl wget git unzip tar gzip bzip2 xz-utils pigz && \\\n# Support inclusion in Arvados pipelines\n    apt-get install -y --no-install-recommends libcurl4-gnutls-dev mbuffer python2.7-dev python-virtualenv && \\\n# Not added by default to save space\n#   apt-get install -y libglu1-mesa && \\\n\n# bcbio-nextgen installation\n    mkdir -p /tmp/bcbio-nextgen-install && cd /tmp/bcbio-nextgen-install && \\\n    wget --no-check-certificate \\\n      https://raw.github.com/bcbio/bcbio-nextgen/master/scripts/bcbio_nextgen_install.py && \\\n    python bcbio_nextgen_install.py /usr/local/share/bcbio-nextgen \\\n      --isolate --minimize-disk --nodata -u development && \\\n    git config --global url.https://github.com/.insteadOf git://github.com/ && \\\n    /usr/local/share/bcbio-nextgen/anaconda/bin/conda install -y nomkl && \\\n    /usr/local/share/bcbio-nextgen/anaconda/bin/bcbio_nextgen.py upgrade --isolate --tooldir=/usr/local --tools && \\\n    /usr/local/share/bcbio-nextgen/anaconda/bin/bcbio_nextgen.py upgrade --isolate -u development --tools && \\\n    # Remove larger packages not used consistently in bcbio Docker runs\n    /usr/local/share/bcbio-nextgen/anaconda/bin/conda remove --force -y hap.py && \\\n    /usr/local/share/bcbio-nextgen/anaconda/bin/conda remove --force -y bioconductor-org.hs.eg.db bioconductor-org.mm.eg.db bioconductor-go.db && \\\n\n# setup paths\n    echo 'export PATH=/usr/local/bin:$PATH' >> /etc/profile.d/bcbio.sh && \\\n\n# add user run script\n    wget --no-check-certificate -O createsetuser \\\n      https://raw.github.com/bcbio/bcbio-nextgen-vm/master/scripts/createsetuser && \\\n    chmod a+x createsetuser && mv createsetuser /sbin && \\\n\n# clean filesystem\n    cd /usr/local && \\\n    apt-get clean && \\\n    rm -rf /var/lib/apt/lists/* /var/tmp/* && \\\n    /usr/local/share/bcbio-nextgen/anaconda/bin/conda clean --yes --tarballs && \\\n    # Remove large conda packages left behind\n    rm -rf /usr/local/share/bcbio-nextgen/anaconda/pkgs/qt* && \\\n    rm -rf /usr/local/share/bcbio-nextgen/anaconda/pkgs/mysql-5.* && \\\n    rm -rf /usr/local/share/bcbio-nextgen/anaconda/pkgs/hap.py.* && \\\n    rm -rf /usr/local/share/bcbio-nextgen/anaconda/pkgs/scipy-0.19.1-np113py27_nomkl_0 && \\\n    rm -rf /usr/local/share/bcbio-nextgen/anaconda/pkgs/bioconductor-org.*db* && \\\n    rm -rf /usr/local/share/bcbio-nextgen/anaconda/pkgs/bioconductor-go.*db* && \\\n    rm -rf /usr/local/share/bcbio-nextgen/anaconda/zulu*.tar.gz && \\\n    rm -rf /usr/local/.git && \\\n    rm -rf /.cpanm && \\\n    rm -rf /tmp/bcbio-nextgen-install && \\\n\n# Create directories and symlinks for data \n    mkdir -p /mnt/biodata && \\\n    mkdir -p /tmp/bcbio-nextgen && \\\n    mv /usr/local/share/bcbio-nextgen/galaxy/bcbio_system.yaml /usr/local/share/bcbio-nextgen/config && \\\n    rmdir /usr/local/share/bcbio-nextgen/galaxy && \\\n    ln -s /mnt/biodata/galaxy /usr/local/share/bcbio-nextgen/galaxy && \\\n    ln -s /mnt/biodata/gemini_data /usr/local/share/bcbio-nextgen/gemini_data && \\\n    ln -s /mnt/biodata/genomes /usr/local/share/bcbio-nextgen/genomes && \\\n    ln -s /mnt/biodata/liftOver /usr/local/share/bcbio-nextgen/liftOver && \\\n    chmod a+rwx /usr/local/share/bcbio-nextgen && \\\n    chmod a+rwx /usr/local/share/bcbio-nextgen/config && \\\n    chmod a+rwx /usr/local/share/bcbio-nextgen/config/*.yaml && \\\n\n# Ensure permissions are set for update in place by arbitrary users\n    find /usr/local -perm /u+x -execdir chmod a+x {} \\; && \\\n    find /usr/local -perm /u+w -execdir chmod a+w {} \\;\n"
}