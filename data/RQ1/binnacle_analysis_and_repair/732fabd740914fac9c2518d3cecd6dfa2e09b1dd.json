{
  "startTime": 1674239503706,
  "endTime": 1674239503754,
  "originalSmells": [
    {
      "rule": "yumInstallRmVarCacheYum",
      "position": {
        "lineStart": 63,
        "lineEnd": 65,
        "columnStart": 4,
        "columnEnd": 40
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "# SHA256 digest of the base image\nARG KEEPALIVED_IMAGE_SHA256\nARG KEEPALIVED_IMAGE=docker.io/centos\n\nFROM $KEEPALIVED_IMAGE@sha256:$KEEPALIVED_IMAGE_SHA256\n\nARG KEEPALIVED_VERSION\n\n# Timestamp of the build, formatted as RFC3339\nARG BUILD_DATE\n# Git revision o the tree at build time\nARG VCS_REF\n# Version of the image\nARG VERSION\n# Version of the project, e.g. `git describe --always --long --dirty --broken`\nARG METALK8S_VERSION\n\n# Create user early on, since this can be a shared layer for many versions of this image\nRUN useradd \\\n        --user-group \\\n        --no-create-home \\\n        --system \\\n        keepalived_script\n\nENTRYPOINT [\"/entrypoint.sh\"]\nCMD [\"--dont-fork\", \"--dont-respawn\", \"--dump-conf\", \"--address-monitoring\", \"--log-console\", \"--log-detail\"]\n\n# The entrypoint script is less likely to change than KEEPALIVED_VERSION\nCOPY entrypoint.sh /entrypoint.sh\n\n# These contain BUILD_DATE so should come 'late' for layer caching\nLABEL maintainer=\"moonshot-platform@scality.com\" \\\n      # http://label-schema.org/rc1/\n      org.label-schema.build-date=\"$BUILD_DATE\" \\\n      org.label-schema.name=\"keepalived\" \\\n      org.label-schema.description=\"Load balancer and high availability service, part of MetalK8s\" \\\n      org.label-schema.license=\"GPLv2+\" \\\n      org.label-schema.url=\"https://github.com/scality/metalk8s/\" \\\n      org.label-schema.vcs-url=\"https://github.com/scality/metalk8s.git\" \\\n      org.label-schema.vcs-ref=\"$VCS_REF\" \\\n      org.label-schema.vendor=\"Scality\" \\\n      org.label-schema.version=\"$VERSION\" \\\n      org.label-schema.schema-version=\"1.0\" \\\n      org.label-schema.docker.cmd=\"docker run --net host -v /keepalived.conf:/etc/keepalived/keepalived.conf:ro keepalived:$VERSION\" \\\n      # https://github.com/opencontainers/image-spec/blob/master/annotations.md\n      org.opencontainers.image.created=\"$BUILD_DATE\" \\\n      org.opencontainers.image.authors=\"moonshot-platform@scality.com\" \\\n      org.opencontainers.image.url=\"https://github.com/scality/metalk8s/\" \\\n      org.opencontainers.image.source=\"https://github.com/scality/metalk8s.git\" \\\n      org.opencontainers.image.version=\"$VERSION\" \\\n      org.opencontainers.image.revision=\"$VCS_REF\" \\\n      org.opencontainers.image.vendor=\"Scality\" \\\n      org.opencontainers.image.title=\"keepalived\" \\\n      org.opencontainers.image.description=\"Load balancer and high availability service, part of MetalK8s\" \\\n      # https://docs.openshift.org/latest/creating_images/metadata.html\n      io.openshift.tags=\"metalk8s,keepalived,ha\" \\\n      io.k8s.description=\"Load balancer and high availability service, part of MetalK8s\" \\\n      io.openshift.non-scalable=\"true\" \\\n      # Various\n      com.scality.metalk8s.keepalived.version=\"$KEEPALIVED_VERSION\" \\\n      com.scality.metalk8s.version=\"$METALK8S_VERSION\"\n\n# Final layer installing keepalived-$KEEPALIVED_VERSION\nRUN yum install -y \\\n        iproute \\\n        keepalived-${KEEPALIVED_VERSION} \\\n        && \\\n    yum clean all && rm -rf /var/cache/yum\n"
}