{
  "startTime": 1674249383498,
  "endTime": 1674249383837,
  "originalSmells": [
    {
      "rule": "yumInstallRmVarCacheYum",
      "position": {
        "lineStart": 36,
        "lineEnd": 36,
        "columnStart": 5,
        "columnEnd": 32
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM registry.access.redhat.com/rhel7\n\nENV SUMMARY=\"Integration Server for App Connect Enterprise on ICP\" \\\n    DESCRIPTION=\"Integration Server for App Connect Enterprise on ICP\" \\\n    PRODNAME=\"AppConnectEnterprise\" \\\n    COMPNAME=\"IntegrationServer\"\n\nLABEL summary=\"$SUMMARY\" \\\n      description=\"$DESCRIPTION\" \\\n      io.k8s.description=\"$DESCRIPTION\" \\\n      io.k8s.display-name=\"Integration Server for App Connect Enterprise on ICP\" \\\n      io.openshift.tags=\"$PRODNAME,$COMPNAME\" \\\n      com.redhat.component=\"$PRODNAME-$COMPNAME\" \\\n      name=\"$PRODNAME/$COMPNAME\" \\\n      vendor=\"IBM\" \\\n      version=\"11.0.0.3\" \\\n      release=\"1\" \\\n      license=\"IBM\" \\\n      maintainer=\"Hybrid Integration Platform Cloud\" \\\n      io.openshift.expose-services=\"\" \\\n      usage=\"\"\n\n# Increase security\nRUN sed -i 's/# minlen = 9/minlen = 9/'  /etc/security/pwquality.conf && \\\n    sed -i 's/PASS_MIN_DAYS\\t0/PASS_MIN_DAYS\\t1/'  /etc/login.defs && \\\n    sed -i 's/PASS_MAX_DAYS\\t99999/PASS_MAX_DAYS\\t90/'  /etc/login.defs\n\n# Add required license as text file in Liceses directory (GPL, MIT, APACHE, Partner End User Agreement, etc)\nRUN mkdir /licenses\nCOPY LICENSE /licenses/licensing.txt\n\nWORKDIR /opt/ibm\n\n# Install ACE V11\nRUN yum update -y && \\\n     yum upgrade -y && \\\n     yum install sudo openssl -y && \\\n     rm -rf /var/lib/apt/lists/* && rm -rf /var/cache/yum\n\nADD ./rhel/ace-11  /opt/ibm/ace-11\nRUN /opt/ibm/ace-11/ace make registry global accept license silently\n\n# Copy in PID1 process\nCOPY ./rhel/runaceserver /usr/local/bin/\nCOPY ./rhel/chkaceready /usr/local/bin/\nCOPY ./rhel/chkacehealthy /usr/local/bin/\n\n# Configure the system and Increase security\nRUN echo \"ACE_11:\" > /etc/debian_chroot \\\n  && sed -i 's/# minlen = 9/minlen = 8/' /etc/security/pwquality.conf \\\n  && sed -i 's/PASS_MIN_DAYS\\t0/PASS_MIN_DAYS\\t1/' /etc/login.defs \\\n  && sed -i 's/PASS_MAX_DAYS\\t99999/PASS_MAX_DAYS\\t90/' /etc/login.defs\n\n# Copy in script files\nCOPY *.sh /usr/local/bin/\n\n# Create a user to run as, create the ace workdir, and chmod script files\nRUN useradd -d /home/aceuser -G mqbrkrs,wheel aceuser \\\n  && sed -e 's/^%sudo   .*/%sudo        ALL=NOPASSWD:ALL/g' -i /etc/sudoers \\\n  && su - aceuser -c '. /opt/ibm/ace-11/server/bin/mqsiprofile && mqsicreateworkdir /home/aceuser/ace-server' \\\n  && chmod 755 /usr/local/bin/*\n\n# Set BASH_ENV to source mqsiprofile when using docker exec bash -c\nENV BASH_ENV=/usr/local/bin/ace_env.sh\n\n# Expose ports.  7600, 7800, 7843 for ACE; 9483 for ACE metrics\nEXPOSE 7600 7800 7843 9483\n\nUSER aceuser\n\nWORKDIR /home/aceuser\nRUN mkdir /home/aceuser/initial-config && chown aceuser:aceuser /home/aceuser/initial-config\n\nENV LOG_FORMAT=basic\n\n# Set entrypoint to run management script\nENTRYPOINT [\"runaceserver\"]\n"
}