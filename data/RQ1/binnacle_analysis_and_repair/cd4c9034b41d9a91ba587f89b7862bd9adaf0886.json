{
  "startTime": 1674244479245,
  "endTime": 1674244479481,
  "originalSmells": [
    {
      "rule": "wgetUseHttpsUrl",
      "position": {
        "lineStart": 13,
        "lineEnd": 13,
        "columnStart": 2,
        "columnEnd": 146
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 9,
        "lineEnd": 9,
        "columnStart": 22,
        "columnEnd": 52
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 18,
        "lineEnd": 18,
        "columnStart": 2,
        "columnEnd": 50
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 9,
        "lineEnd": 9,
        "columnStart": 22,
        "columnEnd": 52
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM openjdk:7-jdk\nMAINTAINER Manuel de la Pe√±a <manuel.delapenya@liferay.com>\n\nENV DEBIAN_FRONTEND noninteractive\nENV TOMCAT_MAJOR_VERSION=7\nENV TOMCAT_VERSION=7.0.77\nENV TOMCAT_HOME=/opt/apache-tomcat-$TOMCAT_VERSION\n\n# Prepare the installation of mysql-server and tomcat 7\nRUN apt-get update && apt-get install --no-install-recommends -y lsb-release && \\\n  wget https://dev.mysql.com/get/mysql-apt-config_0.8.4-1_all.deb && \\\n  dpkg -i mysql-apt-config_0.8.4-1_all.deb && rm -f mysql-apt-config_0.8.4-1_all.deb && \\\n  mkdir -p $TOMCAT_HOME && cd /opt && \\\n  wget https://mirrors.standaloneinstaller.com/apache/tomcat/tomcat-$TOMCAT_MAJOR_VERSION/v$TOMCAT_VERSION/bin/apache-tomcat-$TOMCAT_VERSION.tar.gz && \\\n  tar -xvf apache-tomcat-$TOMCAT_VERSION.tar.gz && rm -f apache-tomcat-$TOMCAT_VERSION.tar.gz && rm -rf /var/lib/apt/lists/*;\n\n# Install packages\nRUN apt-get update && \\\n  apt-get -y --no-install-recommends install mysql-server pwgen supervisor && \\\n  apt-get clean && \\\n  rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*\n\n# Add image configuration and scripts\nADD start-tomcat.sh /start-tomcat.sh\nADD start-mysqld.sh /start-mysqld.sh\nADD run.sh /run.sh\nRUN chmod 755 /*.sh\nADD my.cnf /etc/mysql/conf.d/my.cnf\nRUN chmod 644 /etc/mysql/conf.d/my.cnf\nADD supervisord-tomcat.conf /etc/supervisor/conf.d/supervisord-tomcat.conf\nADD supervisord-mysqld.conf /etc/supervisor/conf.d/supervisord-mysqld.conf\n\n# Remove pre-installed database\nRUN rm -rf /var/lib/mysql/*\n\n# Add MySQL utils\nADD create_mysql_admin_user.sh /create_mysql_admin_user.sh\nADD mysql-setup.sh /mysql-setup.sh\nRUN chmod 755 /*.sh\n\nWORKDIR $TOMCAT_HOME\n\n# Add volumes for MySQL\nVOLUME  [\"/etc/mysql\", \"/var/lib/mysql\"]\n\nEXPOSE 8080 3306\n\nENTRYPOINT [\"/run.sh\"]\n"
}