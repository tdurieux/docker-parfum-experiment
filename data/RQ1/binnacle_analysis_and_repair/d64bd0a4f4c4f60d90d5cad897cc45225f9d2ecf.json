{
  "startTime": 1674250235830,
  "endTime": 1674250236134,
  "originalSmells": [
    {
      "rule": "wgetUseHttpsUrl",
      "position": {
        "lineStart": 57,
        "lineEnd": 59,
        "columnStart": 1,
        "columnEnd": 17
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "#!/usr/bin/docker build --force-rm --rm -f\n\nFROM alpine:3.6\nMAINTAINER Achim <achim@owasp.org>\n\nLABEL \\\n\tVERSION=\"17.06.17\"\t\\\n\t\\\n\tDESCRIPTION=\"Build O-Saft docker image (with Peter Mosman's openssl)\"\t\\\n\tSYNOPSIS=\"docker build --force-rm --rm -f ./Dockerfile -t owasp/o-saft:17.06.17 -t owasp/o-saft .\" \\\n\tDETAILS=\"Please see https://github.com/OWASP/O-Saft/raw/master/o-saft-docker\" \\\n\tSOURCE0=\"https://github.com/OWASP/O-Saft/raw/master/Dockerfile\" \\\n\tSOURCE1=\"https://github.com/OWASP/O-Saft/raw/master/o-saft.tgz\" \\\n\tSOURCE2=\"https://github.com/PeterMosmans/openssl/archive/1.0.2-chacha.tar.gz\" \\\n\tSOURCE3=\"http://search.cpan.org/CPAN/authors/id/S/SU/SULLR/IO-Socket-SSL-2.049.tar.gz\" \\\n\tSID=\"@(#) Dockerfile.alpine:3.6 1.1 17/07/25 23:01:19\" \\\n\tAUTHOR=\"Achim Hoffmann\"\t\n\nENV o-saft-docker-build \"Dockerfile 17.06.17\"                                    \nENV OSAFT_DIR\t/O-Saft\nENV OPENSSL_DIR\t/openssl\nENV OPENSSL_VERSION  1.0.2-chacha\nENV TERM xterm\nENV PATH ${OSAFT_DIR}:${OSAFT_DIR}/contrib:${OPENSSL_DIR}/bin:$PATH\n\n# Install required packages\nRUN apk update && \\\n    apk add --no-cache wget perl perl-net-dns perl-net-ssleay ncurses\n\nWORKDIR\t/\n\n# Install O-Saft\nRUN \\\n\tmkdir $OSAFT_DIR\t\t\t&& \\\n\tadduser -D -h ${OSAFT_DIR} osaft\t&& \\\n\t\\\n\twget --no-check-certificate \\\n\t\thttps://github.com/OWASP/O-Saft/raw/master/o-saft.tgz \\\n\t\t-O o-saft.tgz \t\t\t&& \\\n\techo \"a55702d69314b8eda52e921e35b89aef9eef02b14c870b3077fbddf3af91320d  o-saft.tgz\" | sha256sum -c && \\\n\t\\\n\ttar   -xzf o-saft.tgz\t\t\t&& \\\n\tchown -R root:root   $OSAFT_DIR\t\t&& \\\n\tchown -R osaft:osaft $OSAFT_DIR/contrib\t&& \\\n\tchown    osaft:osaft $OSAFT_DIR/.o-saft.pl\t&& \\\n\tmv       $OSAFT_DIR/.o-saft.pl $OSAFT_DIR/.o-saft.pl-orig\t&& \\\n\tsed -e \"s:^#--openssl=.*:--openssl=$OPENSSL_DIR/bin/openssl:\" \\\n\t\t< $OSAFT_DIR/.o-saft.pl-orig \\\n\t\t> $OSAFT_DIR/.o-saft.pl\t\t&& \\\n\tchmod 666 $OSAFT_DIR/.o-saft.pl\t\t&& \\\n\trm    -f o-saft.tgz\n\n\n# Pull and build IO::Socket::SSL (July/2017: missing in alpine's perl)\nRUN \\\n\n\tmkdir /src_iosocket && \\\n\twget --no-check-certificate \\\n\t\thttps://search.cpan.org/CPAN/authors/id/S/SU/SULLR/IO-Socket-SSL-2.049.tar.gz \\\n\t\t-O iosocket.tgz && \\\n\n\ttar   -xzf iosocket.tgz -C /src_iosocket --strip-components=1 && \\\n\tcd    /src_iosocket && \\\n\t# build iosocket {\n\t# install development tools\n\tapk add --no-cache make && \\\n\techo n | perl Makefile.PL && \\\n\tmake && make test && make install && \\\n\t# cleanup\n\tapk del --purge make && \\\n\t# build iosocket }\n\tcd   / && \\\n\trm   -r /src_iosocket iosocket.tgz\n\n# Pull and build enhanced openssl\nRUN \\\n\t# pull and extract module\n\tmkdir $OPENSSL_DIR /src_openssl\t\t&& \\\n\twget --no-check-certificate \\\n\t\thttps://github.com/PeterMosmans/openssl/archive/1.0.2-chacha.tar.gz \\\n\t\t-O openssl.tgz \t\t\t&& \\\n\t\\\n\ttar   -xzf openssl.tgz -C /src_openssl --strip-components=1\t&& \\\n\tcd    /src_openssl\t\t\t&& \\\n\t# build openssl {\n\t# install development tools\n\tapk add --no-cache musl-dev gcc make zlib-dev\t&& \\\n\t./config --prefix=$OPENSSL_DIR --openssldir=$OPENSSL_DIR/ssl \\\n\t\tenable-zlib enable-ssl3  enable-rc5  enable-rc2  enable-GOST \\\n\t\tenable-cms  enable-md2   enable-mdc2 enable-ec   enable-ec2m \\\n\t\tenable-ecdh enable-ecdsa enable-seed enable-idea enable-camellia \\\n\t\tenable-rfc3779 enable-ec_nistp_64_gcc_128 \\\n\t\t-static experimental-jpake -DOPENSSL_USE_BUILD_DATE\t&& \\\n\tmake depend && make && make report && make install\t&& \\\n\t# simple test\n\techo -e \"# number of ciphers $OPENSSL_DIR/bin/openssl: \" && \\\n\t$OPENSSL_DIR/bin/openssl ciphers -V ALL:COMPLEMENTOFALL:aNULL|wc -l && \\\n\t# cleanup\n\tapk del --purge musl-dev gcc make zlib-dev\t&& \\\n\t# build openssl }\n\tcd   /\t\t\t\t\t&& \\\n\trm   -r /src_openssl openssl.tgz\n\n# Install traditional openssl\n# RUN apk add --no-cache openssl\n\n# Install Tcl/Tk support\n# RUN apk add --no-cache tcl tk xvfb\n\nWORKDIR $OSAFT_DIR\nUSER    osaft\n#RUN     o-saft-docker usage\n\nENTRYPOINT [\"perl\", \"/O-Saft/o-saft.pl\"]\nCMD  [\"--help=docker\"]\n\n# vim:set ft=dockerfile:\n"
}