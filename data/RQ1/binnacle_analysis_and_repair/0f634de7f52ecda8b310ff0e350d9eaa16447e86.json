{
  "startTime": 1674244990541,
  "endTime": 1674244990757,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 87,
        "lineEnd": 87,
        "columnStart": 4,
        "columnEnd": 46
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM gitlab/gitlab-runner:alpine\n\nMAINTAINER bravist <chenghuiyong1987@gmail.com>\n\n# https://pkgs.alpinelinux.org/packages\n\n# Mirror mirror switch to Ali-OSM (Alibaba Open Source Mirror Site) - http://mirrors.aliyun.com/\nRUN echo 'http://mirrors.aliyun.com/alpine/latest-stable/main' > /etc/apk/repositories \\\n\t&& echo '@community http://mirrors.aliyun.com/alpine/latest-stable/community' >> /etc/apk/repositories \\\n\t&& echo '@testing http://mirrors.aliyun.com/alpine/edge/testing' >> /etc/apk/repositories\n\n# https://github.com/matriphe/docker-alpine-php/blob/master/7.0/FPM/Dockerfile\n# Environments\nENV TIMEZONE            Asia/Shanghai\nENV PHP_MEMORY_LIMIT    512M\nENV MAX_UPLOAD          50M\nENV PHP_MAX_FILE_UPLOAD 200\nENV PHP_MAX_POST        100M\nENV COMPOSER_ALLOW_SUPERUSER 1\n\n\n# Mirror mirror switch to Alpine Linux - http://dl-4.alpinelinux.org/alpine/\nRUN apk update \\\n\t&& apk upgrade \\\n\t&& apk add \\\n\t\tcurl \\\n\t\ttzdata \\\n\t    php7@community \\\n\t    php7-dev@community \\\n\t    php7-apcu@community \\\n\t    php7-bcmath@community \\\n\t    php7-xmlwriter@community \\\n\t    php7-ctype@community \\\n\t    php7-curl@community \\\n\t    php7-exif@community \\\n\t    php7-iconv@community \\\n\t    php7-intl@community \\\n\t    php7-json@community \\\n\t    php7-mbstring@community\\\n\t    php7-opcache@community \\\n\t    php7-openssl@community \\\n\t    php7-pcntl@community \\\n\t    php7-pdo@community \\\n\t    php7-mysqlnd@community \\\n\t    php7-mysqli@community \\\n\t    php7-pdo_mysql@community \\\n\t    php7-pdo_pgsql@community \\\n\t    php7-phar@community \\\n\t    php7-posix@community \\\n\t    php7-session@community \\\n\t    php7-xml@community \\\n\t    php7-simplexml@community \\\n\t    php7-mcrypt@community \\\n\t    php7-xsl@community \\\n\t    php7-zip@community \\\n\t    php7-zlib@community \\\n\t    php7-dom@community \\\n\t    php7-redis@community\\\n\t    php7-tokenizer@community \\\n\t    php7-gd@community \\\n\t\tphp7-mongodb@testing \\\n\t\tphp7-fileinfo@community \\\n\t\tphp7-zmq@community \\\n\t\tphp7-memcached@community \\\n\t\topenssh \\\n \t&& cp /usr/share/zoneinfo/${TIMEZONE} /etc/localtime \\\n\t&& echo \"${TIMEZONE}\" > /etc/timezone \\\n\t&& apk del tzdata \\\n \t&& rm -rf /var/cache/apk/*\n\n# https://github.com/docker-library/php/issues/240\n# https://gist.github.com/guillemcanal/be3db96d3caa315b4e2b8259cab7d07e\n# https://forum.alpinelinux.org/forum/installation/php-iconv-issue\n\nRUN apk add --no-cache --repository http://dl-3.alpinelinux.org/alpine/edge/testing gnu-libiconv\nENV LD_PRELOAD /usr/lib/preloadable_libiconv.so php\nRUN rm -rf /var/cache/apk/*\n\n# Set environments\nRUN sed -i \"s|;*date.timezone =.*|date.timezone = ${TIMEZONE}|i\" /etc/php7/php.ini && \\\n\tsed -i \"s|;*memory_limit =.*|memory_limit = ${PHP_MEMORY_LIMIT}|i\" /etc/php7/php.ini && \\\n\tsed -i \"s|;*upload_max_filesize =.*|upload_max_filesize = ${MAX_UPLOAD}|i\" /etc/php7/php.ini && \\\n\tsed -i \"s|;*max_file_uploads =.*|max_file_uploads = ${PHP_MAX_FILE_UPLOAD}|i\" /etc/php7/php.ini && \\\n\tsed -i \"s|;*post_max_size =.*|post_max_size = ${PHP_MAX_POST}|i\" /etc/php7/php.ini && \\\n\tsed -i \"s|;*cgi.fix_pathinfo=.*|cgi.fix_pathinfo= 0|i\" /etc/php7/php.ini\n\n# composer\nRUN curl -f -sS https://getcomposer.org/installer | \\\n    php -- --install-dir=/usr/bin/ --filename=composer\n\nRUN mkdir -p /root/.ssh\nRUN composer global require laravel/envoy\n\nVOLUME [\"/root/.ssh\"]\n\nCMD [\"run\", \"--user=root\", \"--working-directory=/root\"]"
}