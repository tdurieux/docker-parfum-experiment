{
  "startTime": 1674236894959,
  "endTime": 1674236895250,
  "originalSmells": [
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 47,
        "lineEnd": 47,
        "columnStart": 27,
        "columnEnd": 51
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 3,
        "lineEnd": 3,
        "columnStart": 22,
        "columnEnd": 49
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 3,
        "lineEnd": 3,
        "columnStart": 22,
        "columnEnd": 49
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM continuumio/miniconda3:4.5.12\n\n# Install dos2unix to convert line endings in entrypoint.\nRUN apt-get update && apt-get install --no-install-recommends -y dos2unix && rm -rf /var/lib/apt/lists/*;\n\n# Update conda.\nRUN conda update conda -y\n\n# Set up a user different to root which is best practices and needed for mybinder.org.\nARG NB_USER=opensourceeconomics\nARG NB_UID=1000\nENV USER ${NB_USER}\nENV NB_UID ${NB_UID}\nENV HOME /home/${NB_USER}\nRUN adduser --disabled-password \\\n    --gecos \"Default user\" \\\n    --uid ${NB_UID} \\\n    ${NB_USER}\n\n# Copy necessary content from the repository.\nCOPY docs ${HOME}/docs\nCOPY respy ${HOME}/respy\nCOPY setup.py ${HOME}\nCOPY README.rst ${HOME}\nCOPY MANIFEST.in ${HOME}\nCOPY environment.yml ${HOME}\nCOPY entrypoint.sh ${HOME}\n\n# Convert line endings and remove dos2unix.\nRUN dos2unix ${HOME}/entrypoint.sh \\\n    && apt-get --purge remove -y dos2unix \\\n    && rm -rf /var/lib/apt/lists/*\n\n# Make everything in the home directory owned by the user and set the working directory\n# to user's home.\nUSER root\nRUN chown -R ${NB_UID} ${HOME}\nUSER ${NB_USER}\nWORKDIR ${HOME}\n\n# Prepare conda environment.\nRUN conda init\nRUN conda env create --name ose\nRUN echo \"conda activate ose\" >> ~/.bashrc\n\n# Install current version of respy.\nSHELL [\"/bin/bash\", \"-c\"]\nRUN source activate ose && pip install --no-cache-dir ${HOME} -vvv\n\nENTRYPOINT [\"./entrypoint.sh\"]\nCMD [\"/bin/bash\"]\n"
}