{
  "startTime": 1674250521727,
  "endTime": 1674250522069,
  "originalSmells": [
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 12,
        "lineEnd": 75,
        "columnStart": 5,
        "columnEnd": 8
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM postgres:9.6\nLABEL maintainer=\"M. Edward (Ed) Borasky <znmeb@znmeb.net>\"\n\n# Repo for up-to-date R\nCOPY cran.list.stretch /etc/apt/sources.list.d/cran.list\nRUN apt-key adv --keyserver keyserver.ubuntu.com --recv-key 'E19F5F87128899B192B1A2C2AD5F960A256A04AF'\n\n# Backports\nCOPY backports.list.stretch /etc/apt/sources.list.d/backports.list\n\n# Install apt packages\nRUN apt-get update \\\n  && apt-get install -qqy --no-install-recommends \\\n    postgis \\\n    postgresql-9.6-postgis-2.4 \\\n    postgresql-9.6-postgis-2.4-scripts \\\n    postgresql-9.6-postgis-scripts \\\n    postgresql-9.6-pgrouting \\\n    postgresql-9.6-mysql-fdw \\\n    postgresql-9.6-ogr-fdw \\\n    postgresql-9.6-python3-multicorn \\\n    awscli \\\n    bash-completion \\\n    build-essential \\\n    bzip2 \\\n    ca-certificates \\\n    cmake \\\n    command-not-found \\\n    curl \\\n    emacs-nox \\\n    expat \\\n    gdal-bin \\\n    geotiff-bin \\\n    gsl-bin \\\n    git \\\n    less \\\n    libboost-dev \\\n    libboost-program-options-dev \\\n    libcairo2-dev \\\n    libexpat1-dev \\\n    libgdal-dev \\\n    libgeotiff-dev \\\n    libgsl-dev \\\n    libjq-dev \\\n    libpq-dev \\\n    libpqxx-dev \\\n    libprotobuf-dev \\\n    libspatialite-dev \\\n    libssh2-1-dev \\\n    libssl-dev \\\n    libudunits2-dev \\\n    libv8-3.14-dev \\\n    lynx \\\n    mdbtools \\\n    mdbtools-dev \\\n    nano \\\n    openssh-client \\\n    p7zip \\\n    postgresql-client-9.6 \\\n    proj-bin \\\n    protobuf-compiler \\\n    python-dev \\\n    python3-dev \\\n    python3-csvkit \\\n    r-base-dev \\\n    spatialite-bin \\\n    tar \\\n    time \\\n    udunits-bin \\\n    unixodbc-dev \\\n    unar \\\n    unrar-free \\\n    unzip \\\n    vim-nox \\\n    virtualenvwrapper \\\n    wget \\\n  && apt-get clean \\\n  && apt-file update \\\n  && update-command-not-found && rm -rf /var/lib/apt/lists/*;\n\n    #librasterlite-dev \\\n    #rasterlite-bin \\\n\n# copy the root scripts to /usr/local/src\nRUN mkdir -p /usr/local/src\nCOPY postgis-root-scripts  /usr/local/src/\nRUN chmod +x /usr/local/src/*.bash\n\n# database superusers\nRUN useradd --shell /bin/bash --user-group --create-home dbsuper \\\n  && mkdir -p /home/dbsuper/Projects\nCOPY home-scripts /home/dbsuper/\nARG DB_USERS_TO_CREATE\nRUN bash /usr/local/src/make-dbusers-linux.bash \\\n  && mkdir -p /gisdata \\\n  && echo \"alias l='ls -ACF --color=auto'\" >> /etc/bash.bashrc \\\n  && echo \"alias ll='ls -ltrAF --color=auto'\" >> /etc/bash.bashrc\n\n# set up automatic restores and dbsuper home\nCOPY postgis-scripts/1make-dbsuper.sh Backups/restore-all.sh /docker-entrypoint-initdb.d/\nRUN chmod +x /home/dbsuper/*.bash \\\n  && chmod +x /docker-entrypoint-initdb.d/*.sh \\\n  && chown -R postgres:postgres /gisdata\nCOPY postgis-scripts/Rprofile.site /home/dbsuper/.Rprofile\nCOPY Backups /home/dbsuper/Backups\nCOPY Raw /home/dbsuper/Raw\nRUN chown -R dbsuper:dbsuper /home/dbsuper\n"
}