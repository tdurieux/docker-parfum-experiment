{
  "startTime": 1674248506675,
  "endTime": 1674248507754,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 134,
        "lineEnd": 134,
        "columnStart": 4,
        "columnEnd": 46
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 139,
        "lineEnd": 139,
        "columnStart": 4,
        "columnEnd": 67
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 143,
        "lineEnd": 143,
        "columnStart": 4,
        "columnEnd": 68
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 149,
        "lineEnd": 149,
        "columnStart": 4,
        "columnEnd": 49
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 159,
        "lineEnd": 159,
        "columnStart": 4,
        "columnEnd": 49
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 163,
        "lineEnd": 163,
        "columnStart": 4,
        "columnEnd": 53
      }
    },
    {
      "rule": "npmCacheCleanAfterInstall",
      "position": {
        "lineStart": 168,
        "lineEnd": 168,
        "columnStart": 4,
        "columnEnd": 28
      }
    },
    {
      "rule": "npmCacheCleanAfterInstall",
      "position": {
        "lineStart": 171,
        "lineEnd": 171,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "npmCacheCleanAfterInstall",
      "position": {
        "lineStart": 174,
        "lineEnd": 174,
        "columnStart": 4,
        "columnEnd": 24
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 12,
        "lineEnd": 12,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 28,
        "lineEnd": 31,
        "columnStart": 4,
        "columnEnd": 8
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 37,
        "lineEnd": 37,
        "columnStart": 4,
        "columnEnd": 33
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 43,
        "lineEnd": 45,
        "columnStart": 4,
        "columnEnd": 12
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 53,
        "lineEnd": 57,
        "columnStart": 4,
        "columnEnd": 10
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 76,
        "lineEnd": 76,
        "columnStart": 4,
        "columnEnd": 33
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 84,
        "lineEnd": 86,
        "columnStart": 4,
        "columnEnd": 11
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 93,
        "lineEnd": 94,
        "columnStart": 4,
        "columnEnd": 11
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 100,
        "lineEnd": 101,
        "columnStart": 4,
        "columnEnd": 14
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 105,
        "lineEnd": 107,
        "columnStart": 4,
        "columnEnd": 15
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 160,
        "lineEnd": 160,
        "columnStart": 4,
        "columnEnd": 29
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 165,
        "lineEnd": 165,
        "columnStart": 25,
        "columnEnd": 48
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 179,
        "lineEnd": 179,
        "columnStart": 4,
        "columnEnd": 57
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 184,
        "lineEnd": 184,
        "columnStart": 4,
        "columnEnd": 37
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 195,
        "lineEnd": 195,
        "columnStart": 4,
        "columnEnd": 35
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 160,
        "lineEnd": 160,
        "columnStart": 4,
        "columnEnd": 29
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 12,
        "lineEnd": 12,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 28,
        "lineEnd": 31,
        "columnStart": 4,
        "columnEnd": 8
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 37,
        "lineEnd": 37,
        "columnStart": 4,
        "columnEnd": 33
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 43,
        "lineEnd": 45,
        "columnStart": 4,
        "columnEnd": 12
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 53,
        "lineEnd": 57,
        "columnStart": 4,
        "columnEnd": 10
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 76,
        "lineEnd": 76,
        "columnStart": 4,
        "columnEnd": 33
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 84,
        "lineEnd": 86,
        "columnStart": 4,
        "columnEnd": 11
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 93,
        "lineEnd": 94,
        "columnStart": 4,
        "columnEnd": 11
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 100,
        "lineEnd": 101,
        "columnStart": 4,
        "columnEnd": 14
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 105,
        "lineEnd": 107,
        "columnStart": 4,
        "columnEnd": 15
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 160,
        "lineEnd": 160,
        "columnStart": 4,
        "columnEnd": 29
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 165,
        "lineEnd": 165,
        "columnStart": 25,
        "columnEnd": 48
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 179,
        "lineEnd": 179,
        "columnStart": 4,
        "columnEnd": 57
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 184,
        "lineEnd": 184,
        "columnStart": 4,
        "columnEnd": 37
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 195,
        "lineEnd": 195,
        "columnStart": 4,
        "columnEnd": 35
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 160,
        "lineEnd": 160,
        "columnStart": 4,
        "columnEnd": 53
      }
    }
  ],
  "repairedDockerfile": "FROM php:7.2-fpm\n\nMAINTAINER Jaroslav Hranicka <hranicka@outlook.com>\n\nENV DEBIAN_FRONTEND noninteractive\n\nCOPY bin/* /usr/local/bin/\nRUN chmod -R 700 /usr/local/bin/\n\n\n# Locales\nRUN apt-get update \\\n\t&& apt-get install --no-install-recommends -y locales && rm -rf /var/lib/apt/lists/*;\n\nRUN dpkg-reconfigure locales \\\n\t&& locale-gen C.UTF-8 \\\n\t&& /usr/sbin/update-locale LANG=C.UTF-8\n\nRUN echo 'en_US.UTF-8 UTF-8' >> /etc/locale.gen \\\n\t&& locale-gen\n\nENV LC_ALL C.UTF-8\nENV LANG en_US.UTF-8\nENV LANGUAGE en_US.UTF-8\n\n\n# Common\nRUN apt-get update \\\n\t&& apt-get install --no-install-recommends -y \\\n\t\topenssl \\\n\t\tgit \\\n\t\tgnupg2 && rm -rf /var/lib/apt/lists/*;\n\n\n# PHP\n# intl\nRUN apt-get update \\\n\t&& apt-get install --no-install-recommends -y libicu-dev \\\n\t&& docker-php-ext-configure intl \\\n\t&& docker-php-ext-install -j$(nproc) intl && rm -rf /var/lib/apt/lists/*;\n\n# xml\nRUN apt-get update \\\n\t&& apt-get install --no-install-recommends -y \\\n\tlibxml2-dev \\\n\tlibxslt-dev \\\n\t&& docker-php-ext-install -j$(nproc) \\\n\t\tdom \\\n\t\txmlrpc \\\n\t\txsl && rm -rf /var/lib/apt/lists/*;\n\n# images\nRUN apt-get update \\\n\t&& apt-get install --no-install-recommends -y \\\n\tlibfreetype6-dev \\\n\tlibjpeg62-turbo-dev \\\n\tlibpng-dev \\\n\tlibgd-dev \\\n\t&& docker-php-ext-configure gd --with-freetype-dir=/usr/include/ --with-jpeg-dir=/usr/include/ \\\n\t&& docker-php-ext-install -j$(nproc) \\\n\t\tgd \\\n\t\texif && rm -rf /var/lib/apt/lists/*;\n\n# database\nRUN docker-php-ext-install -j$(nproc) \\\n\tmysqli \\\n\tpdo \\\n\tpdo_mysql\n\n# strings\nRUN docker-php-ext-install -j$(nproc) \\\n\tgettext \\\n\tmbstring\n\n# math\nRUN apt-get update \\\n\t&& apt-get install --no-install-recommends -y libgmp-dev \\\n\t&& ln -s /usr/include/x86_64-linux-gnu/gmp.h /usr/include/gmp.h \\\n\t&& docker-php-ext-install -j$(nproc) \\\n\t\tgmp \\\n\t\tbcmath && rm -rf /var/lib/apt/lists/*;\n\n# compression\nRUN apt-get update \\\n\t&& apt-get install --no-install-recommends -y \\\n\tlibbz2-dev \\\n\tzlib1g-dev \\\n\t&& docker-php-ext-install -j$(nproc) \\\n\t\tzip \\\n\t\tbz2 && rm -rf /var/lib/apt/lists/*;\n\n# ftp\nRUN apt-get update \\\n\t&& apt-get install --no-install-recommends -y \\\n\tlibssl-dev \\\n\t&& docker-php-ext-install -j$(nproc) \\\n\t\tftp && rm -rf /var/lib/apt/lists/*;\n\n# ssh2\nRUN apt-get update \\\n\t&& apt-get install --no-install-recommends -y \\\n\tlibssh2-1-dev && rm -rf /var/lib/apt/lists/*;\n\n# memcached\nRUN apt-get update \\\n\t&& apt-get install --no-install-recommends -y \\\n\tlibmemcached-dev \\\n\tlibmemcached11 && rm -rf /var/lib/apt/lists/*;\n\n\n# others\nRUN docker-php-ext-install -j$(nproc) \\\n\tsoap \\\n\tsockets \\\n\tcalendar \\\n\tsysvmsg \\\n\tsysvsem \\\n\tsysvshm\n\n# PECL\nRUN docker-php-pecl-install \\\n\tssh2-1.1.2 \\\n\tredis-4.0.2 \\\n\tapcu-5.1.11 \\\n\tmemcached-3.0.4\n\n# Install XDebug, but not enable by default. Enable using:\n# * php -d$XDEBUG_EXT vendor/bin/phpunit\n# * php_xdebug vendor/bin/phpunit\nRUN pecl install xdebug-2.6.0\nENV XDEBUG_EXT zend_extension=/usr/local/lib/php/extensions/no-debug-non-zts-20170718/xdebug.so\nRUN alias php_xdebug=\"php -d$XDEBUG_EXT vendor/bin/phpunit\"\n\n# Install composer and put binary into $PATH\nRUN curl -f -sS https://getcomposer.org/installer | php \\\n\t&& mv composer.phar /usr/local/bin/ \\\n\t&& ln -s /usr/local/bin/composer.phar /usr/local/bin/composer\n\n# Install PHP Code sniffer\nRUN curl -f -OL https://squizlabs.github.io/PHP_CodeSniffer/phpcs.phar \\\n\t&& chmod 755 phpcs.phar \\\n\t&& mv phpcs.phar /usr/local/bin/ \\\n\t&& ln -s /usr/local/bin/phpcs.phar /usr/local/bin/phpcs \\\n\t&& curl -f -OL https://squizlabs.github.io/PHP_CodeSniffer/phpcbf.phar \\\n\t&& chmod 755 phpcbf.phar \\\n\t&& mv phpcbf.phar /usr/local/bin/ \\\n\t&& ln -s /usr/local/bin/phpcbf.phar /usr/local/bin/phpcbf\n\n# Install PHPUnit\nRUN curl -f -OL https://phar.phpunit.de/phpunit.phar \\\n\t&& chmod 755 phpunit.phar \\\n\t&& mv phpunit.phar /usr/local/bin/ \\\n\t&& ln -s /usr/local/bin/phpunit.phar /usr/local/bin/phpunit\n\nADD php.ini /usr/local/etc/php/conf.d/docker-php.ini\n\n\n## NodeJS, NPM\n# Install NodeJS\nRUN curl -f -sL https://deb.nodesource.com/setup_8.x | bash - \\\n\t&& apt-get install --no-install-recommends -y nodejs && rm -rf /var/lib/apt/lists/*;\n\n# Install Yarn\nRUN curl -f -sS https://dl.yarnpkg.com/debian/pubkey.gpg | apt-key add - \\\n    && echo \"deb https://dl.yarnpkg.com/debian/ stable main\" | tee /etc/apt/sources.list.d/yarn.list \\\n    && apt-get update && apt-get install --no-install-recommends -y yarn && rm -rf /var/lib/apt/lists/*;\n\n# Install Grunt globally\nRUN npm install -g grunt-cli && npm cache clean --force;\n\n# Install Gulp globally\nRUN npm install -g gulp-cli && npm cache clean --force;\n\n# Install Bower globally\nRUN npm install -g bower && npm cache clean --force;\n\n\n# MariaDB\nRUN apt-get update \\\n\t&& apt-get install --no-install-recommends -y software-properties-common dirmngr \\\n\t&& apt-key adv --recv-keys --keyserver keyserver.ubuntu.com 0xF1656F24C74CD1D8 \\\n\t&& add-apt-repository 'deb [arch=amd64,i386,ppc64el] http://mirror.vpsfree.cz/mariadb/repo/10.2/debian stretch main' && rm -rf /var/lib/apt/lists/*;\n\nRUN apt-get update \\\n\t&& apt-get install --no-install-recommends -y mariadb-server && rm -rf /var/lib/apt/lists/*;\n\nVOLUME /var/lib/mysql\n\nADD my.cnf /etc/mysql/conf.d/my.cnf\n\nEXPOSE 3306\n\n\n# Redis\nRUN apt-get update \\\n\t&& apt-get install --no-install-recommends -y redis-server && rm -rf /var/lib/apt/lists/*;\n\nEXPOSE 6379\n\n\n# Clean\nRUN apt-get clean\nRUN rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/* /var/cache/*\n"
}