{
  "startTime": 1674245080432,
  "endTime": 1674245080594,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 12,
        "lineEnd": 12,
        "columnStart": 2,
        "columnEnd": 201
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 19,
        "lineEnd": 19,
        "columnStart": 2,
        "columnEnd": 225
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 20,
        "lineEnd": 20,
        "columnStart": 2,
        "columnEnd": 215
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 21,
        "lineEnd": 21,
        "columnStart": 2,
        "columnEnd": 158
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 22,
        "lineEnd": 22,
        "columnStart": 2,
        "columnEnd": 184
      }
    },
    {
      "rule": "curlUseHttpsUrl",
      "position": {
        "lineStart": 19,
        "lineEnd": 19,
        "columnStart": 2,
        "columnEnd": 225
      }
    },
    {
      "rule": "curlUseHttpsUrl",
      "position": {
        "lineStart": 21,
        "lineEnd": 21,
        "columnStart": 2,
        "columnEnd": 158
      }
    },
    {
      "rule": "apkAddUseNoCache",
      "position": {
        "lineStart": 11,
        "lineEnd": 11,
        "columnStart": 2,
        "columnEnd": 214
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM gliderlabs/alpine:3.4\n\n# Version of RabbitMQ to install\nENV RABBITMQ_VERSION=3.6.2\nENV PLUGIN_BASE=v3.6.x\nENV AUTOCLUSTER_VERSION=0.6.1\nENV DELAYED_MESSAGE_VERSION=0.0.1\nENV MESSAGE_TIMESTAMP_VERSION=3.6.x-3195a55a\nENV TOP_VERSION=3.6.x-2d253d39\n\nRUN \\\n  apk --update --no-cache add bash coreutils curl erlang erlang-asn1 erlang-crypto erlang-eldap erlang-erts erlang-inets erlang-mnesia erlang-os-mon erlang-public-key erlang-sasl erlang-ssl erlang-syntax-tools erlang-xmerl xz && \\\n  curl -f -sL -o /tmp/rabbitmq-server-generic-unix-${RABBITMQ_VERSION}.tar.gz https://www.rabbitmq.com/releases/rabbitmq-server/v${RABBITMQ_VERSION}/rabbitmq-server-generic-unix-${RABBITMQ_VERSION}.tar.xz && \\\n  cd /usr/lib/ && \\\n  tar xf /tmp/rabbitmq-server-generic-unix-${RABBITMQ_VERSION}.tar.gz && \\\n  rm /tmp/rabbitmq-server-generic-unix-${RABBITMQ_VERSION}.tar.gz && \\\n  mv /usr/lib/rabbitmq_server-${RABBITMQ_VERSION} /usr/lib/rabbitmq\n\nRUN \\\n  curl -f -sL -o /usr/lib/rabbitmq/plugins/rabbitmq_delayed_message_exchange-${DELAYED_MESSAGE_VERSION}.ez https://www.rabbitmq.com/community-plugins/${PLUGIN_BASE}/rabbitmq_delayed_message_exchange-${DELAYED_MESSAGE_VERSION}.ez && \\\n  curl -f -sL -o /usr/lib/rabbitmq/plugins/rabbitmq_message_timestamp-${MESSAGE_TIMESTAMP_VERSION}.ez https://www.rabbitmq.com/community-plugins/${PLUGIN_BASE}/rabbitmq_message_timestamp-${MESSAGE_TIMESTAMP_VERSION}.ez && \\\n  curl -f -sL -o /usr/lib/rabbitmq/plugins/rabbitmq_top-${TOP_VERSION}.ez https://www.rabbitmq.com/community-plugins/${PLUGIN_BASE}/rabbitmq_top-${TOP_VERSION}.ez && \\\n  curl -f -sL -o /tmp/autocluster-${AUTOCLUSTER_VERSION}.tgz https://github.com/aweber/rabbitmq-autocluster/releases/download/${AUTOCLUSTER_VERSION}/autocluster-${AUTOCLUSTER_VERSION}.tgz && \\\n  tar -xvz -C /usr/lib/rabbitmq -f /tmp/autocluster-${AUTOCLUSTER_VERSION}.tgz && \\\n  rm /tmp/autocluster-${AUTOCLUSTER_VERSION}.tgz\n\n# add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added\nRUN adduser -s /bin/bash -D -h /var/lib/rabbitmq rabbitmq\n\nADD erlang.cookie /var/lib/rabbitmq/.erlang.cookie\nADD rabbitmq.config /usr/lib/rabbitmq/etc/rabbitmq/rabbitmq.config\n\n# Environment variables required to run\nENV ERL_EPMD_PORT=4369\nENV HOME /var/lib/rabbitmq\nENV PATH /usr/lib/rabbitmq/bin:/usr/lib/rabbitmq/sbin:$PATH\n\nENV RABBITMQ_LOGS=-\nENV RABBITMQ_SASL_LOGS=-\nENV RABBITMQ_DIST_PORT=25672\nENV RABBITMQ_SERVER_ERL_ARGS=\"+K true +A128 +P 1048576 -kernel inet_default_connect_options [{nodelay,true}]\"\nENV RABBITMQ_MNESIA_DIR=/var/lib/rabbitmq/mnesia\nENV RABBITMQ_PID_FILE=/var/lib/rabbitmq/rabbitmq.pid\nENV RABBITMQ_PLUGINS_DIR=/usr/lib/rabbitmq/plugins\nENV RABBITMQ_PLUGINS_EXPAND_DIR=/var/lib/rabbitmq/plugins\n\n# Fetch the external plugins and setup RabbitMQ\nRUN \\\n  apk --purge del curl tar gzip xz && \\\n  chown rabbitmq /var/lib/rabbitmq/.erlang.cookie /var/lib/rabbitmq /usr/lib/rabbitmq && \\\n  chmod 0600 /var/lib/rabbitmq/.erlang.cookie && \\\n  rabbitmq-plugins enable --offline \\\n        autocluster \\\n        rabbitmq_delayed_message_exchange \\\n        rabbitmq_management \\\n        rabbitmq_management_visualiser \\\n        rabbitmq_consistent_hash_exchange \\\n        rabbitmq_federation \\\n        rabbitmq_federation_management \\\n        rabbitmq_message_timestamp \\\n        rabbitmq_mqtt \\\n        rabbitmq_recent_history_exchange \\\n        rabbitmq_sharding \\\n        rabbitmq_shovel \\\n        rabbitmq_shovel_management \\\n        rabbitmq_stomp \\\n        rabbitmq_top \\\n        rabbitmq_web_stomp && \\\n  rabbitmq-plugins list\n\nEXPOSE 4369 5671 5672 15672 25672\n\nUSER rabbitmq\nCMD /usr/lib/rabbitmq/sbin/rabbitmq-server\n"
}