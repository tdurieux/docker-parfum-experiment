{
  "startTime": 1674253030050,
  "endTime": 1674253030234,
  "originalSmells": [
    {
      "rule": "yumInstallRmVarCacheYum",
      "position": {
        "lineStart": 23,
        "lineEnd": 32,
        "columnStart": 4,
        "columnEnd": 21
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "#\n# This is the OpenShift ovn overlay network image.\n# it provides an overlay network using ovs/ovn/ovn-kube\n#\n# The standard name for this image is ovn-kube\n\n# Notes:\n# This is for a development build where the ovn-kubernetes utilities\n# are built in this Dockerfile and included in the image (instead of the rpm)\n#\n# This is based on centos:7\n# openvswitch rpms are from\n# http://cbs.centos.org/kojifiles/packages/openvswitch/2.9.0/4.el7/x86_64/\n#\n# So this file will change over time.\n\nFROM centos:7\n\nUSER root\n\nENV PYTHONDONTWRITEBYTECODE yes\n\nCOPY kubernetes.repo /etc/yum.repos.d/kubernetes.repo\nRUN yum install -y  \\\n\tPyYAML bind-utils \\\n\topenssl \\\n\tnumactl-libs \\\n\tfirewalld-filesystem \\\n\tlibpcap \\\n\thostname \\\n\tkubectl \\\n\tunbound-libs \\\n\tiproute strace socat && \\\n\tyum clean all && rm -rf /var/cache/yum\n\n# Get a reasonable version of openvswitch (2.9.2 or higher)\n# docker build --build-arg rpmArch=ARCH -f Dockerfile.centos -t some_tag .\n# where ARCH can be x86_64 (default), aarch64, or ppc64le\nARG rpmArch=x86_64\nARG ovsVer=2.10.1\nARG ovsSubVer=3.el7\nARG dpdkVer=17.11\nARG dpdkSubVer=3.el7\nARG dpdkRpmUrl=http://cbs.centos.org/kojifiles/packages/dpdk/${dpdkVer}/${dpdkSubVer}/${rpmArch}/dpdk-${dpdkVer}-${dpdkSubVer}.${rpmArch}.rpm\n\nRUN if [ \"$(uname -m)\" = \"aarch64\" ]; then dpdkRpmUrl=https://rpmfind.net/linux/fedora/linux/updates/28/Everything/aarch64/Packages/d/dpdk-17.11.2-1.fc28.aarch64.rpm; fi && rpm -i ${dpdkRpmUrl}\nRUN rpm -i http://cbs.centos.org/kojifiles/packages/openvswitch/${ovsVer}/${ovsSubVer}/${rpmArch}/openvswitch-${ovsVer}-${ovsSubVer}.${rpmArch}.rpm\nRUN rpm -i http://cbs.centos.org/kojifiles/packages/openvswitch/${ovsVer}/${ovsSubVer}/${rpmArch}/openvswitch-ovn-common-${ovsVer}-${ovsSubVer}.${rpmArch}.rpm\nRUN rpm -i http://cbs.centos.org/kojifiles/packages/openvswitch/${ovsVer}/${ovsSubVer}/${rpmArch}/openvswitch-ovn-central-${ovsVer}-${ovsSubVer}.${rpmArch}.rpm\nRUN rpm -i http://cbs.centos.org/kojifiles/packages/openvswitch/${ovsVer}/${ovsSubVer}/${rpmArch}/openvswitch-ovn-host-${ovsVer}-${ovsSubVer}.${rpmArch}.rpm\nRUN rpm -i http://cbs.centos.org/kojifiles/packages/openvswitch/${ovsVer}/${ovsSubVer}/${rpmArch}/openvswitch-ovn-vtep-${ovsVer}-${ovsSubVer}.${rpmArch}.rpm\nRUN rpm -i http://cbs.centos.org/kojifiles/packages/openvswitch/${ovsVer}/${ovsSubVer}/${rpmArch}/openvswitch-devel-${ovsVer}-${ovsSubVer}.${rpmArch}.rpm\nRUN rm -rf /var/cache/yum\n\nRUN mkdir -p /var/run/openvswitch\nRUN mkdir -p /etc/cni/net.d\nRUN mkdir -p /opt/cni/bin\n\n# Built in ../../go_controller, then the binaries are copied here.\n# put things where they are in the rpm\nRUN mkdir -p /usr/libexec/cni/\nCOPY ovnkube ovn-kube-util /usr/bin/\nCOPY ovn-k8s-cni-overlay /usr/libexec/cni/ovn-k8s-cni-overlay\n\n# ovnkube.sh is the entry point. This script examines environment\n# variables to direct operation and configure ovn\nCOPY ovnkube.sh /root/\nCOPY ovn-debug.sh /root/\n# override the rpm's ovn_k8s.conf with this local copy\nCOPY ovn_k8s.conf /etc/openvswitch/ovn_k8s.conf\n\n# copy git commit number into image\nRUN mkdir -p /root/.git/ /root/.git/refs/heads/\nCOPY .git/HEAD /root/.git/HEAD\nCOPY .git/refs/heads/ /root/.git/refs/heads/\n\n\nLABEL io.k8s.display-name=\"ovn kubernetes\" \\\n      io.k8s.description=\"This is a component of OpenShift Container Platform that provides an overlay network using ovn.\" \\\n      io.openshift.tags=\"openshift\" \\\n      maintainer=\"Phil Cameron <pcameron@redhat.com>\"\n\nWORKDIR /root\nENTRYPOINT /root/ovnkube.sh\n"
}