{
  "startTime": 1674641755007,
  "endTime": 1674641755211,
  "originalSmells": [
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 5,
        "lineEnd": 5,
        "columnStart": 21,
        "columnEnd": 48
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 20,
        "lineEnd": 20,
        "columnStart": 21,
        "columnEnd": 79
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 5,
        "lineEnd": 5,
        "columnStart": 21,
        "columnEnd": 48
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 20,
        "lineEnd": 20,
        "columnStart": 21,
        "columnEnd": 79
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM ubuntu:18.04 AS clone\nARG branch=master\nWORKDIR /src\n\nRUN echo \"Cloning branch $branch from https://github.com/NethermindEth/nethermind\"\nRUN apt update -y && apt install --no-install-recommends -y curl git jq && \\\n    git clone  --branch $branch https://github.com/NethermindEth/nethermind && \\\n    cd nethermind && git submodule update --init && \\\n    (echo \"{}\"                                                      \\\n    | jq \".+ {\\\"repo\\\":\\\"$(git config --get remote.origin.url)\\\"}\" \\\n    | jq \".+ {\\\"branch\\\":\\\"$(git rev-parse --abbrev-ref HEAD)\\\"}\"  \\\n    | jq \".+ {\\\"commit\\\":\\\"$(git rev-parse HEAD)\\\"}\"               \\\n\t    > /version.json) && rm -rf /var/lib/apt/lists/*;\nFROM microsoft/dotnet:2.2-sdk AS build\nCOPY --from=clone /src .\nCOPY --from=clone /version.json .\n\nRUN cd nethermind/src/Nethermind/Nethermind.Runner && \\\n    dotnet publish -c release -o out\nFROM microsoft/dotnet:2.2-aspnetcore-runtime\nRUN apt update -y && apt install --no-install-recommends -y libsnappy-dev libc6-dev libc6 unzip jq wget && rm -rf /var/lib/apt/lists/*;\n\nCOPY --from=build /nethermind/src/Nethermind/Nethermind.Runner/out .\nCOPY --from=build /version.json .\n\nRUN wget https://github.com/stedolan/jq/releases/download/jq-1.6/jq-linux64 -O /usr/local/bin/jq && \\\n    echo 'af986793a515d500ab2d35f8d2aecd656e764504b789b66d7e1a0b727a124c44  /usr/local/bin/jq' | sha256sum -c && \\\n    chmod +x /usr/local/bin/jq\n\nADD enode.sh /enode.sh\nADD nethermind.sh /nethermind.sh\nADD mapper.jq /mapper.jq\nADD test.json /chainspec/test.json\nADD test.cfg /configs/test.cfg\nRUN chmod +x /nethermind.sh\nRUN chmod +x /enode.sh\n\n# ENV NETHERMIND_CONFIG mainnet\nENV NETHERMIND_DETACHED_MODE true\nENV NETHERMIND_ENODE_IPADDRESS 0.0.0.0\nENV NETHERMIND_HIVE_ENABLED true\n# ENV NETHERMIND_HIVECONFIG_GENESISFILEPATH=genesis.json\nENV NETHERMIND_INITCONFIG_JSONRPCENABLED true\nENV NETHERMIND_INITCONFIG_P2PPORT 30303\nENV NETHERMIND_INITCONFIG_DISCOVERYPORT 30303\nENV NETHERMIND_URL http://*:8545\n\n\nEXPOSE 8545 30303 30303/udp\n\nENTRYPOINT [\"/nethermind.sh\"]\n"
}