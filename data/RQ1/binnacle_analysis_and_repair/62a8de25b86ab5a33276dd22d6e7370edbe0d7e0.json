{
  "startTime": 1674244883868,
  "endTime": 1674244887776,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 90,
        "lineEnd": 90,
        "columnStart": 8,
        "columnEnd": 84
      }
    },
    {
      "rule": "wgetUseHttpsUrl",
      "position": {
        "lineStart": 20,
        "lineEnd": 20,
        "columnStart": 8,
        "columnEnd": 63
      }
    },
    {
      "rule": "configureShouldUseBuildFlag",
      "position": {
        "lineStart": 35,
        "lineEnd": 35,
        "columnStart": 8,
        "columnEnd": 68
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 14,
        "lineEnd": 17,
        "columnStart": 4,
        "columnEnd": 53
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 14,
        "lineEnd": 17,
        "columnStart": 4,
        "columnEnd": 53
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM ubuntu:16.04\nMAINTAINER \"Atul Sowani <sowania@us.ibm.com>\"\n\nENV WDIR=/root\nENV JAVA_HOME=/usr/lib/jvm/java-8-openjdk-ppc64el\nENV PATH=$WDIR/depot_tools:$WDIR/couchbase:$PATH\nENV VPYTHON_BYPASS=\"manually managed python not supported by chrome operations\"\nENV LD_LIBRARY_PATH=/usr/local/lib:$LD_LIBRARY_PATH\n\nCOPY crc-files.tar.gz /tmp/crc-files.tar.gz\nCOPY patch /tmp/patch\nWORKDIR /root\n\nRUN apt-get update -y && \\\n    apt-get install --no-install-recommends -y wget git g++ make curl libssl-dev libevent-dev \\\n        libcurl4-openssl-dev libsnappy-dev ncurses-dev openssl libiodbc2-dev \\\n        autoconf cmake libtool python python-dev golang-go subversion cmake \\\n        gnupg openjdk-8-jdk openjdk-8-jre lsb-release && \\\n\n    cd $WDIR && \\\n        wget https://www.erlang.org/download/otp_src_17.4.tar.gz && \\\n        tar zxvf otp_src_17.4.tar.gz && \\\n        rm otp_src_17.4.tar.gz && \\\n        ERL_TOP=$WDIR/otp_src_17.4 && \\\n        cd otp_src_17.4 && \\\n        ./configure --build=ppc64le-unknown-linux-gnu --prefix=/usr && \\\n        make && \\\n        make install && \\\n        cd .. && \\\n        rm -rf otp_src_17.4 && \\\n        unset ERL_TOP && \\\n\n    cd $WDIR && \\\n        svn export http://source.icu-project.org/repos/icu/tags/release-58-1 icu && \\\n        cd icu/icu4c/source && \\\n        ./configure --build=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\" --enable-static --disable-renaming --prefix=/usr && \\\n        make && \\\n        make install && \\\n        cp /usr/lib/libicu* /usr/local/lib && \\\n        cd $WDIR && \\\n        rm -rf icu && \\\n\n    cd $WDIR && \\\n        git clone https://chromium.googlesource.com/chromium/tools/depot_tools.git && \\\n        cd $WDIR && \\\n        fetch v8 && \\\n        cd v8 && \\\n        git checkout 5.8.75 && \\\n        gclient sync && \\\n        python gypfiles/gyp_v8 && \\\n        make -j4 ppc64.release -i werror=no GYPFLAGS+=\"-Dcomponent=shared_library -Dv8_enable_i18n_support=0\" && \\\n        make -j4 ppc64.release library=shared -i werror=no GYPFLAGS+=\"-Dcomponent=shared_library -Dv8_enable_i18n_support=0\" && \\\n        cp -vR include/* /usr/include && \\\n        cp -v out/ppc64.release/lib.target/lib*.so /usr/local/lib && \\\n        cp /usr/local/lib/libv8.so /usr/lib && \\\n            #cp -v out/ppc64.release/obj.target/tools/gyp/lib*.a /usr/local/lib && \\\n\n    cd $WDIR && \\\n        git clone https://github.com/google/flatbuffers && \\\n        cd flatbuffers && \\\n        cmake -G \"Unix Makefiles\" && \\\n        make && \\\n        export PATH=$PATH:`pwd` && \\\n        make install && \\\n        cd .. && \\\n        rm -rf flatbuffers && \\\n\n    mkdir -p ~/.cbdepscache/exploded/ppc64le && \\\n        wget https://dl.google.com/go/go1.7.6.linux-ppc64le.tar.gz && \\\n        tar -xzf go1.7.6.linux-ppc64le.tar.gz && \\\n        mkdir ~/.cbdepscache/exploded/ppc64le/go-1.7.6 && \\\n        mv go ~/.cbdepscache/exploded/ppc64le/go-1.7.6 && \\\n        ln -s ~/.cbdepscache/exploded/ppc64le/go-1.7.6 ~/.cbdepscache/exploded/ppc64le/go-1.7.3 && \\\n        rm go1.7.6.linux-ppc64le.tar.gz && \\\n\n    wget https://dl.google.com/go/go1.8.1.linux-ppc64le.tar.gz && \\\n        tar -xzf go1.8.1.linux-ppc64le.tar.gz && \\\n        mkdir ~/.cbdepscache/exploded/ppc64le/go-1.8.1 && \\\n        mv go ~/.cbdepscache/exploded/ppc64le/go-1.8.1 && \\\n        rm go1.8.1.linux-ppc64le.tar.gz && \\\n\n    wget https://dl.google.com/go/go1.8.5.linux-ppc64le.tar.gz && \\\n        tar -xzf go1.8.5.linux-ppc64le.tar.gz && \\\n        mkdir ~/.cbdepscache/exploded/ppc64le/go-1.8.5 && \\\n        mv go ~/.cbdepscache/exploded/ppc64le/go-1.8.5 && \\\n        ln -s ~/.cbdepscache/exploded/ppc64le/go-1.8.5 ~/.cbdepscache/exploded/ppc64le/go-1.8.3 && \\\n        rm go1.8.5.linux-ppc64le.tar.gz && \\\n\n    cd $WDIR && \\\n        mkdir couchbase && \\\n        curl -f https://storage.googleapis.com/git-repo-downloads/repo > couchbase/repo && \\\n        chmod a+x couchbase/repo && \\\n        cd couchbase && \\\n        repo init -u git://github.com/couchbase/manifest.git -m released/5.1.0.xml && \\\n        repo sync && \\\n\n    cd godeps/src/github.com && \\\n        mv boltdb boltdb_ORIG && \\\n        mkdir boltdb && \\\n        cd boltdb && \\\n        git clone https://github.com/boltdb/bolt.git && \\\n        cd bolt && \\\n        git tag -l && \\\n        git checkout v1.3.0 && \\\n        cd ../.. && \\\n        cd ../../.. && \\\n\n    tar -xzf /tmp/crc-files.tar.gz -C /tmp && \\\n        mv /tmp/crc-files/crc32_constants.h platform/include/platform/crc32_constants.h && \\\n        mv /tmp/crc-files/crc32_wrapper.c platform/src/crc32_wrapper.c && \\\n        mv /tmp/crc-files/crc32.S platform/src/crc32.S && \\\n        mv /tmp/crc-files/ppc-opcode.h platform/include/platform/ppc-opcode.h && \\\n        rmdir /tmp/crc-files && \\\n        patch -p2 < /tmp/patch && \\\n        rm /tmp/crc-files.tar.gz /tmp/patch && \\\n\n    cd tlm/deps/packages && \\\n    mkdir build-boost && \\\n        cd build-boost && \\\n        cmake .. -DPACKAGE=boost && \\\n        cmake --build . --target boost && \\\n        t_filename=`ls deps/boost/*/boost*.tgz` && \\\n        m_filename=`ls deps/boost/*/boost*.md5` && \\\n        cp $t_filename ~/.cbdepscache && \\\n        cp $m_filename ~/.cbdepscache/`basename $t_filename`.md5 && \\\n        cd .. && \\\n        rm -rf build-boost && \\\n\n    mkdir build-curl && \\\n        cd build-curl && \\\n        cmake .. -DPACKAGE=curl && \\\n        cmake --build . --target curl && \\\n        t_filename=`ls deps/curl/*/curl*.tgz` && \\\n        m_filename=`ls deps/curl/*/curl*.md5` && \\\n        cp $t_filename ~/.cbdepscache && \\\n        cp $m_filename ~/.cbdepscache/`basename $t_filename`.md5 && \\\n        cd .. && \\\n        rm -rf build-curl && \\\n\n    mkdir build-erlang && \\\n        cd build-erlang && \\\n        cmake .. -DPACKAGE=erlang && \\\n        cmake --build . --target erlang && \\\n        t_filename=`ls deps/erlang/*/erlang*.tgz` && \\\n        m_filename=`ls deps/erlang/*/erlang*.md5` && \\\n        cp $t_filename ~/.cbdepscache && \\\n        cp $m_filename ~/.cbdepscache/`basename $t_filename`.md5 && \\\n        cd .. && \\\n        rm -rf build-erlang && \\\n\n    mkdir build-flatbuffers && \\\n        cd build-flatbuffers && \\\n        cmake .. -DPACKAGE=flatbuffers && \\\n        cmake --build . --target flatbuffers && \\\n        t_filename=`ls deps/flatbuffers/*/flatbuffers*.tgz` && \\\n        m_filename=`ls deps/flatbuffers/*/flatbuffers*.md5` && \\\n        cp $t_filename ~/.cbdepscache && \\\n        cp $m_filename ~/.cbdepscache/`basename $t_filename`.md5 && \\\n        cd .. && \\\n        rm -rf build-flatbuffers && \\\n\n    mkdir build-icu4c && \\\n        cd build-icu4c && \\\n        cmake .. -DPACKAGE=icu4c && \\\n        cmake --build . --target icu4c && \\\n        t_filename=`ls deps/icu4c/*/icu4c*.tgz` && \\\n        m_filename=`ls deps/icu4c/*/icu4c*.md5` && \\\n        cp $t_filename ~/.cbdepscache && \\\n        cp $m_filename ~/.cbdepscache/`basename $t_filename`.md5 && \\\n        cd .. && \\\n        rm -rf build-icu4c && \\\n\n    mkdir build-jemalloc && \\\n        cd build-jemalloc && \\\n        cmake .. -DPACKAGE=jemalloc && \\\n        cmake --build . --target jemalloc && \\\n        t_filename=`ls deps/jemalloc/*/jemalloc*.tgz` && \\\n        m_filename=`ls deps/jemalloc/*/jemalloc*.md5` && \\\n        cp $t_filename ~/.cbdepscache && \\\n        cp $m_filename ~/.cbdepscache/`basename $t_filename`.md5 && \\\n        cd .. && \\\n        rm -rf build-jemalloc && \\\n\n    mkdir build-json && \\\n        cd build-json && \\\n        cmake .. -DPACKAGE=json && \\\n        cmake --build . --target json && \\\n        t_filename=`ls deps/json/*/json*.tgz` && \\\n        m_filename=`ls deps/json/*/json*.md5` && \\\n        cp $t_filename ~/.cbdepscache && \\\n        cp $m_filename ~/.cbdepscache/`basename $t_filename`.md5 && \\\n        cd .. && \\\n        rm -rf build-json && \\\n\n    mkdir build-libcouchbase && \\\n        cd build-libcouchbase && \\\n        cmake .. -DPACKAGE=libcouchbase && \\\n        cmake --build . --target libcouchbase && \\\n        t_filename=`ls deps/libcouchbase/*/libcouchbase*.tgz` && \\\n        m_filename=`ls deps/libcouchbase/*/libcouchbase*.md5` && \\\n        cp $t_filename ~/.cbdepscache && \\\n        cp $m_filename ~/.cbdepscache/`basename $t_filename`.md5 && \\\n        cd .. && \\\n        rm -rf build-libcouchbase && \\\n\n    mkdir build-libevent && \\\n        cd build-libevent && \\\n        cmake .. -DPACKAGE=libevent && \\\n        cmake --build . --target libevent && \\\n        t_filename=`ls deps/libevent/*/libevent*.tgz` && \\\n        m_filename=`ls deps/libevent/*/libevent*.md5` && \\\n        cp $t_filename ~/.cbdepscache && \\\n        cp $m_filename ~/.cbdepscache/`basename $t_filename`.md5 && \\\n        cd .. && \\\n        rm -rf build-libevent && \\\n\n    mkdir build-snappy && \\\n        cd build-snappy && \\\n        cmake .. -DPACKAGE=snappy && \\\n        cmake --build . --target snappy && \\\n        t_filename=`ls deps/snappy/*/snappy*.tgz` && \\\n        m_filename=`ls deps/snappy/*/snappy*.md5` && \\\n        cp $t_filename ~/.cbdepscache && \\\n        cp $m_filename ~/.cbdepscache/`basename $t_filename`.md5 && \\\n        cd .. && \\\n        rm -rf build-snappy && \\\n\n    mkdir build-python-snappy && \\\n        cd build-python-snappy && \\\n        cmake .. -DPACKAGE=python-snappy && \\\n        cmake --build . --target python-snappy && \\\n        t_filename=`ls deps/python-snappy/*/python-snappy*.tgz` && \\\n        m_filename=`ls deps/python-snappy/*/python-snappy*.md5` && \\\n        cp $t_filename ~/.cbdepscache && \\\n        cp $m_filename ~/.cbdepscache/`basename $t_filename`.md5 && \\\n        cd .. && \\\n        rm -rf build-python-snappy && \\\n\n    mkdir build-rocksdb && \\\n        cd build-rocksdb && \\\n        cmake .. -DPACKAGE=rocksdb && \\\n        cmake --build . --target rocksdb && \\\n        t_filename=`ls deps/rocksdb/*/rocksdb*.tgz` && \\\n        m_filename=`ls deps/rocksdb/*/rocksdb*.md5` && \\\n        cp $t_filename ~/.cbdepscache && \\\n        cp $m_filename ~/.cbdepscache/`basename $t_filename`.md5 && \\\n        cd .. && \\\n        rm -rf build-rocksdb && \\\n        cd ../../.. && \\\n        cd .. && \\\n\n    mkdir build && \\\n        cd build && \\\n        cmake -D CMAKE_BUILD_TYPE=Debug -DU_DISABLE_RENAMING=1 ../couchbase && \\\n        apt-get upgrade -y && \\\n        make all && \\\n        make benchmark_test && \\\n        make basic_test && \\\n        make filter_test && \\\n        make options_test && \\\n        make atomic_test && \\\n        make bcache_test && \\\n        make bitset-test && \\\n        make btreeblock_test && \\\n        make btree_kv_test && \\\n        make btree_str_kv_test && \\\n        make compact_functional_test && \\\n        make complexity_test && \\\n        make couchstore_file-deduper-test && \\\n        make couchstore_file-merger-test && \\\n        make couchstore_file-sorter-test && \\\n        make couchstore_gtest && \\\n        make couchstore_internal_gtest && \\\n        make couchstore_mapreduce-builtin-test && \\\n        make couchstore_mapreduce-map-test && \\\n        make couchstore_mapreduce-reduce-test && \\\n        make couchstore_testapp && \\\n        make couchstore_wrapped_fileops_test && \\\n        make cxx03_test && \\\n        make diagnostics_test && \\\n        make disk_sim_test && \\\n        make docio_test && \\\n        make donotoptimize_test && \\\n        make e2etest && \\\n        make fdb_anomaly_test && \\\n        make fdb_extended_test && \\\n        make fdb_functional_test && \\\n        make fdb_microbench && \\\n        make filemgr_test && \\\n        make fixture_test && \\\n        make hash_test && \\\n        make hbtrie_test && \\\n        make iterator_functional_test && \\\n        make map_test && \\\n        make moxi_htgram_test && \\\n        make moxi_sizes && \\\n        make multi_kv_functional_test && \\\n        make multiple_ranges_test && \\\n        make mvcc_functional_test && \\\n        make options_test && \\\n        make platform-backtrace-test && \\\n        make platform-base64-test && \\\n        make platform-checked-snprintf-test && \\\n        make platform-cjson-parse-test && \\\n        make platform-cjsonutils-test && \\\n        make platform-compression-test && \\\n        make platform-crc32c-sw_hw-test && \\\n        make platform-crc32c-test && \\\n        make platform-dirutils-test && \\\n        make platform-gethrtime-test && \\\n        make platform-getopt-test && \\\n        make platform-gettimeofday-test && \\\n        make platform-histogram-test && \\\n        make platform-json-checker-test && \\\n        make platform-make_array-test && \\\n        make platform-memorymap-test && \\\n        make platform-mktemp-test && \\\n        make platform-non_negative_counter-test && \\\n        make platform-processclock-test && \\\n        make platform-random-test && \\\n        make platform-relaxed_atomic-test && \\\n        make platform-strings-test && \\\n        make platform-sysinfo-test && \\\n        make platform-thread-test && \\\n        make platform-uuid-test && \\\n        make register_benchmark_test && \\\n        make reporter_output_test && \\\n        make ring-buffer-test && \\\n        make cbcrypto_test && \\\n        make cbsasl_client_server_test && \\\n        make cbsasl_password_database_test && \\\n        make cbsasl_pwconv_test && \\\n        make cbsasl_saslprep_test && \\\n        make cbsasl_server_test && \\\n        make cbsasl_strcmp_test && \\\n        make client_cert_config_test && \\\n        make engine_testapp && \\\n        make ep-engine_atomic_ptr_test && \\\n        make ep-engine_couch-fs-stats_test && \\\n        make ep-engine_ep_unit_tests && \\\n        make ep-engine_hrtime_test && \\\n        make ep-engine_misc_test && \\\n        make mcbp_dump_parser_test && \\\n        make memcached_auditconfig_test && \\\n        make memcached_auditd_tests && \\\n        make memcached_audit_evdescr_test && \\\n        make memcached_auditfile_test && \\\n        make memcached_config_parse_test && \\\n        make memcached_config_util_test && \\\n        make memcached_datatype_test && \\\n        make memcached-doc-server-api-test && \\\n        make memcached-engine-error-test && \\\n        make memcached_errormap_sanity_check && \\\n        make memcached_executor_test && \\\n        make memcached_function_chain_test && \\\n        make memcached-hostutils-test && \\\n        make memcached_logger_emfile_test && \\\n        make memcached_logger_test && \\\n        make memcached_mcbp_test && \\\n        make memcached_memory_tracking_test && \\\n        make memcached_privilege_test && \\\n        make memcached_sizes && \\\n        make memcached_testapp && \\\n        make memcached_timestamp_test && \\\n        make memcached_topkeys_bench && \\\n        make utilities_testapp && \\\n        make macro_test && \\\n        make memory_usage_test && \\\n        make threaded_test && \\\n        make category_registry_test && \\\n        make chunk_lock_test && \\\n        make export_test && \\\n        make memory_test && \\\n        make string_utils_test && \\\n        make trace_argument_test && \\\n        make trace_buffer_test && \\\n        make trace_config_test && \\\n        make trace_event_test && \\\n        make trace_log_test && \\\n        make platform_extmeta_test && \\\n        make platform_pipe_benchmark && \\\n        make platform_pipe_test && \\\n        make subjson-test && \\\n        make sized-buffer-test && \\\n        make skip_with_error_test && \\\n        make staleblock_test && \\\n        make tests_check_kvpair && \\\n        make t_sigar_cpu && \\\n        make t_sigar_mem && \\\n        make t_sigar_netconn && \\\n        make t_sigar_pid && \\\n        make t_sigar_proc && \\\n        make t_sigar_swap && \\\n        make usecase_test && \\\n        make vbucket_regression && \\\n        make vbucket_testapp && \\\n        make vbucket_testketama && \\\n        make install && \\\n        cd .. && \\\n\n    apt-get remove -y wget git make curl autoconf cmake libtool \\\n        subversion cmake lsb-release && \\\n        apt-get autoremove -y && rm -rf /var/lib/apt/lists/*;\n\nCMD [ \"/bin/bash\" ]\n"
}