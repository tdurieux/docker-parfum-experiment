{
  "startTime": 1674249942079,
  "endTime": 1674249942259,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 15,
        "lineEnd": 15,
        "columnStart": 19,
        "columnEnd": 128
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 27,
        "lineEnd": 27,
        "columnStart": 19,
        "columnEnd": 80
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 7,
        "lineEnd": 7,
        "columnStart": 22,
        "columnEnd": 99
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 7,
        "lineEnd": 7,
        "columnStart": 22,
        "columnEnd": 99
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "#\n# Dockerfile - Apache Hadoop\n#\nFROM     ubuntu:14.04\nMAINTAINER Yongbok Kim <ruo91@yongbok.net>\n\n# Last Package Update & Install\nRUN apt-get update && apt-get install --no-install-recommends -y curl supervisor openssh-server net-tools iputils-ping nano && rm -rf /var/lib/apt/lists/*;\n\n# JDK\nENV JDK_URL http://download.oracle.com/otn-pub/java/jdk\nENV JDK_VER 8u91-b14\nENV JDK_VER2 jdk-8u91\nENV JAVA_HOME /usr/local/jdk\nENV PATH $PATH:$JAVA_HOME/bin\nRUN cd $SRC_DIR && curl -f -LO \"$JDK_URL/$JDK_VER/$JDK_VER2-linux-x64.tar.gz\" -H 'Cookie: oraclelicense=accept-securebackup-cookie' \\\n && tar xzf $JDK_VER2-linux-x64.tar.gz && mv jdk1* $JAVA_HOME && rm -f $JDK_VER2-linux-x64.tar.gz \\\n && echo '' >> /etc/profile \\\n && echo '# JDK' >> /etc/profile \\\n && echo \"export JAVA_HOME=$JAVA_HOME\" >> /etc/profile \\\n && echo 'export PATH=\"$PATH:$JAVA_HOME/bin\"' >> /etc/profile \\\n && echo '' >> /etc/profile\n\n# Apache Hadoop\nENV SRC_DIR /opt\nENV HADOOP_URL http://www.eu.apache.org/dist/hadoop/common\nENV HADOOP_VERSION hadoop-2.7.2\nRUN cd $SRC_DIR && curl -f -LO \"$HADOOP_URL/$HADOOP_VERSION/$HADOOP_VERSION.tar.gz\" \\\n && tar xzf $HADOOP_VERSION.tar.gz; rm -f $HADOOP_VERSION.tar.gz\n\n# Hadoop ENV\nENV HADOOP_PREFIX $SRC_DIR/$HADOOP_VERSION\nENV PATH $PATH:$HADOOP_PREFIX/bin:$HADOOP_PREFIX/sbin\nENV HADOOP_MAPRED_HOME $HADOOP_PREFIX\nENV HADOOP_COMMON_HOME $HADOOP_PREFIX\nENV HADOOP_HDFS_HOME $HADOOP_PREFIX\nENV YARN_HOME $HADOOP_PREFIX\nRUN echo '# Hadoop' >> /etc/profile \\\n && echo \"export HADOOP_PREFIX=$HADOOP_PREFIX\" >> /etc/profile \\\n && echo 'export PATH=$PATH:$HADOOP_PREFIX/bin:$HADOOP_PREFIX/sbin' >> /etc/profile \\\n && echo 'export HADOOP_MAPRED_HOME=$HADOOP_PREFIX' >> /etc/profile \\\n && echo 'export HADOOP_COMMON_HOME=$HADOOP_PREFIX' >> /etc/profile \\\n && echo 'export HADOOP_HDFS_HOME=$HADOOP_PREFIX' >> /etc/profile \\\n && echo 'export YARN_HOME=$HADOOP_PREFIX' >> /etc/profile\n\n# Add in the etc/hadoop directory\nADD conf/core-site.xml $HADOOP_PREFIX/etc/hadoop/core-site.xml\nADD conf/hdfs-site.xml $HADOOP_PREFIX/etc/hadoop/hdfs-site.xml\nADD conf/yarn-site.xml $HADOOP_PREFIX/etc/hadoop/yarn-site.xml\nADD conf/mapred-site.xml $HADOOP_PREFIX/etc/hadoop/mapred-site.xml\nRUN sed -i '/^export JAVA_HOME/ s:.*:export JAVA_HOME=/usr/local/jdk:' $HADOOP_PREFIX/etc/hadoop/hadoop-env.sh\n\n# SSH keygen\nRUN cd /root && ssh-keygen -t dsa -P '' -f \"/root/.ssh/id_dsa\" \\\n && cat /root/.ssh/id_dsa.pub >> /root/.ssh/authorized_keys && chmod 644 /root/.ssh/authorized_keys\n\n# Name node foramt\nRUN hdfs namenode -format\n\n# Supervisor\nRUN mkdir -p /var/log/supervisor\nADD conf/supervisord.conf /etc/supervisor/conf.d/supervisord.conf\n\n# SSH\nRUN mkdir /var/run/sshd\nRUN sed -i 's/without-password/yes/g' /etc/ssh/sshd_config\nRUN sed -i 's/UsePAM yes/UsePAM no/g' /etc/ssh/sshd_config\nRUN echo 'SSHD: ALL' >> /etc/hosts.allow\n\n# Root password\nRUN echo 'root:hadoop' |chpasswd\n\n# Port\n# Node Manager: 8042, Resource Manager: 8088, NameNode: 50070, DataNode: 50075, SecondaryNode: 50090\nEXPOSE 22 8042 8088 50070 50075 50090\n\n# Daemon\nCMD [\"/usr/bin/supervisord\"]\n"
}