{
  "startTime": 1674235845723,
  "endTime": 1674235846104,
  "originalSmells": [
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 40,
        "lineEnd": 40,
        "columnStart": 4,
        "columnEnd": 37
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 54,
        "lineEnd": 54,
        "columnStart": 4,
        "columnEnd": 36
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 5,
        "lineEnd": 6,
        "columnStart": 22,
        "columnEnd": 33
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 15,
        "lineEnd": 15,
        "columnStart": 4,
        "columnEnd": 148
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 20,
        "lineEnd": 20,
        "columnStart": 4,
        "columnEnd": 56
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 21,
        "lineEnd": 21,
        "columnStart": 4,
        "columnEnd": 49
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 22,
        "lineEnd": 22,
        "columnStart": 4,
        "columnEnd": 35
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 23,
        "lineEnd": 23,
        "columnStart": 4,
        "columnEnd": 35
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 24,
        "lineEnd": 24,
        "columnStart": 4,
        "columnEnd": 35
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 41,
        "lineEnd": 41,
        "columnStart": 4,
        "columnEnd": 79
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 15,
        "lineEnd": 15,
        "columnStart": 4,
        "columnEnd": 148
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 20,
        "lineEnd": 20,
        "columnStart": 4,
        "columnEnd": 56
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 21,
        "lineEnd": 21,
        "columnStart": 4,
        "columnEnd": 49
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 22,
        "lineEnd": 22,
        "columnStart": 4,
        "columnEnd": 35
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 23,
        "lineEnd": 23,
        "columnStart": 4,
        "columnEnd": 35
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 24,
        "lineEnd": 24,
        "columnStart": 4,
        "columnEnd": 35
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 41,
        "lineEnd": 41,
        "columnStart": 4,
        "columnEnd": 79
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 15,
        "lineEnd": 15,
        "columnStart": 4,
        "columnEnd": 148
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 20,
        "lineEnd": 20,
        "columnStart": 4,
        "columnEnd": 56
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 21,
        "lineEnd": 21,
        "columnStart": 4,
        "columnEnd": 49
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 22,
        "lineEnd": 22,
        "columnStart": 4,
        "columnEnd": 35
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 23,
        "lineEnd": 23,
        "columnStart": 4,
        "columnEnd": 35
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 24,
        "lineEnd": 24,
        "columnStart": 4,
        "columnEnd": 35
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 41,
        "lineEnd": 41,
        "columnStart": 4,
        "columnEnd": 79
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 15,
        "lineEnd": 15,
        "columnStart": 4,
        "columnEnd": 172
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 20,
        "lineEnd": 20,
        "columnStart": 4,
        "columnEnd": 80
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 21,
        "lineEnd": 21,
        "columnStart": 4,
        "columnEnd": 73
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 22,
        "lineEnd": 22,
        "columnStart": 4,
        "columnEnd": 59
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 23,
        "lineEnd": 23,
        "columnStart": 4,
        "columnEnd": 59
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 24,
        "lineEnd": 24,
        "columnStart": 4,
        "columnEnd": 59
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 41,
        "lineEnd": 41,
        "columnStart": 4,
        "columnEnd": 103
      }
    }
  ],
  "repairedDockerfile": "FROM ros:melodic-ros-core-bionic\n# FROM ros:kinetic-ros-base-xenial\nMAINTAINER VÃ­ctor Mayoral Vilches<victor@aliasrobotics.com>\n\n# install ros packages\nRUN apt-get update && apt-get install --no-install-recommends -y \\\n    ros-melodic-ros-base=1.4.1-0* \\\n    && rm -rf /var/lib/apt/lists/*\n\n# RUN apt-get update && apt-get install -y \\\n#     ros-kinetic-robot=1.3.2-0* \\\n#     && rm -rf /var/lib/apt/lists/*\n\nRUN apt-get -qq update && apt-get -qqy upgrade\n# install aztarna build dependencies\nRUN apt-get -qqy --no-install-recommends install build-essential cmake libgmp3-dev gengetopt libpcap-dev flex byacc libjson-c-dev pkg-config libunistring-dev wget unzip git && rm -rf /var/lib/apt/lists/*;\n# RUN apt-get install software-properties-common -y\n# RUN add-apt-repository ppa:deadsnakes/ppa\n# RUN apt-get update\n# RUN apt-get -qqy install python3.6 python3-dev python3-pip\nRUN apt-get -qqy --no-install-recommends install python3 python3-dev python3-pip && rm -rf /var/lib/apt/lists/*;\nRUN apt-get -qqy --no-install-recommends install libxml2-dev libxslt1-dev && rm -rf /var/lib/apt/lists/*;\nRUN apt-get -qqy --no-install-recommends install zlib1g-dev && rm -rf /var/lib/apt/lists/*;\nRUN apt-get -qqy --no-install-recommends install libffi-dev && rm -rf /var/lib/apt/lists/*;\nRUN apt-get -qqy --no-install-recommends install libssl-dev && rm -rf /var/lib/apt/lists/*;\n\n\n######################\n# Install SROS\n######################\n# setup environment\nENV LANG C.UTF-8\nENV LC_ALL C.UTF-8\n\n# set environment and workspace\nENV ROS_DISTRO melodic\nENV CATKIN_WS=/root/sros_catkin_ws\nRUN mkdir -p $CATKIN_WS/src\nWORKDIR $CATKIN_WS/src\n\nRUN pip3 install --no-cache-dir rosinstall-generator\nRUN apt-get install --no-install-recommends -y python-openssl apparmor-utils python-apparmor python-pip && rm -rf /var/lib/apt/lists/*;\n\n# download sourcecode for sros\nRUN rosinstall_generator \\\n      ros_comm \\\n      rospy_tutorials \\\n      --rosdistro ${ROS_DISTRO} \\\n      --deps \\\n      --tar > ${ROS_DISTRO}-ros_comm-wet.rosinstall && \\\n    wstool init -j8 . ${ROS_DISTRO}-ros_comm-wet.rosinstall && \\\n    rm -rf ros_comm && \\\n    git clone -b sros https://github.com/ros/ros_comm && \\\n    git clone -b sros https://github.com/ros-infrastructure/rospkg ../rospkg && \\\n    pip install --no-cache-dir --upgrade ../rospkg/\n\n# # install dependencies\n# RUN apt-get update && \\\n#     rosdep init && \\\n#     rosdep update && \\\n#     rosdep install -y \\\n#       --from-paths . \\\n#       --ignore-src \\\n#       --rosdistro ${ROS_DISTRO} \\\n#       --as-root=apt:false && \\\n#     pip install --upgrade ../rospkg/ && \\\n#     rm -rf /var/lib/apt/lists/*\n\n# build repo\nWORKDIR $CATKIN_WS\nENV TERM xterm\nENV PYTHONIOENCODING UTF-8\nRUN touch src/rosconsole/CATKIN_IGNORE\nRUN touch src/ros_comm/tools/rosbag/CATKIN_IGNORE\nRUN touch src/ros_comm/tools/rosbag_storage/CATKIN_IGNORE\n# RUN touch src/ros_comm/test/CAKTIN_IGNORE\nCOPY ./patch1.txt $CATKIN_WS\nRUN patch /root/sros_catkin_ws/src/ros_comm/clients/roscpp/src/libros/transport/transport_udp.cpp < patch1.txt\nRUN . /opt/ros/melodic/setup.sh && catkin_make_isolated --install -DCMAKE_BUILD_TYPE=Release\n    # catkin build --no-status --summarize\n\n# setup demo bashrc\n# RUN echo 'source \"$CATKIN_WS/install/setup.bash\"' >> ~/.bashrc\n\n# setup demo config\nCOPY ./config /root/.ros/sros/config/\n\n\n######################\n# Install `aztarna`\n######################\n# copy the aztarna files the FS and install it\nCOPY ./aztarna /root/aztarna\n# RUN cd /root/aztarna && git checkout ${AZTARNA_COMMIT} && python3 setup.py install\nRUN cd /root/aztarna && python3 setup.py install\n\n# setup entrypoint\nCOPY ./ros_entrypoint.sh /\n\nENTRYPOINT [\"/ros_entrypoint.sh\"]\nCMD [\"bash\"]\n"
}