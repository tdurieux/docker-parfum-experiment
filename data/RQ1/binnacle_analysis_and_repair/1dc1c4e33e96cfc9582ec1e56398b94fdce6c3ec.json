{
  "startTime": 1674249248218,
  "endTime": 1674249248500,
  "originalSmells": [
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 29,
        "lineEnd": 36,
        "columnStart": 25,
        "columnEnd": 13
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "# Â© Copyright IBM Corporation 2017, 2019.\n# LICENSE: Apache License, Version 2.0 (http://www.apache.org/licenses/LICENSE-2.0)\n\n############## Dockerfile for WordPress version 5.2.1 ############################\n#\n# WordPress is an online, open source website creation tool written in PHP.\n#\n# To build WordPress image from the directory containing this Dockerfile\n# (assuming that the file is named \"Dockerfile\"):\n# docker build -t <image_name> .\n#\n# To start WordPress server run the below command\n# docker run --name <container_name> -p <port_number>:80 -p <port_number_mysql>:3306 -d <image_name>\n#\n# We can view the Wordpress UI at http://<wordpress-host-ip>:<port_number>\n#\n##################################################################################\n\n# Base Image\nFROM s390x/ubuntu:16.04\n\nARG WORDPRESS_VER=5.2.1\n\n# Maintainer\nLABEL maintainer=\"LoZ Open Source Ecosystem (https://www.ibm.com/developerworks/community/groups/community/lozopensource)\"\n\nENV DEBIAN_FRONTEND noninteractive\n\n# Install dependencies\nRUN apt-get update -y && apt-get install --no-install-recommends -y \\\n    apache2 \\\n    curl \\\n    git \\\n    libapache2-mod-php \\\n    mysql-server \\\n    php \\\n    php-mysql \\\n# Configure apache2 server\n && echo \"AddType application/x-httpd-php .php\" >> /etc/apache2/apache2.conf \\\n && echo \"ServerName localhost\" >> /etc/apache2/apache2.conf \\\n && echo \"<Directory />\" >> /etc/apache2/apache2.conf \\\n && echo \" DirectoryIndex index.php \" >> /etc/apache2/apache2.conf \\\n && echo \"</Directory>\" >> /etc/apache2/apache2.conf \\\n && line=\"\\/var\\/www\\/html\" \\\n && line_new=\"\\/var\\/www\\/html\\/WordPress\" \\\n && sed -i \"s/$line/$line_new/g\" /etc/apache2/sites-available/000-default.conf \\\n# Download Wordpress application into apache2 server\n && cd /var/www/html && git clone git://github.com/WordPress/WordPress.git \\\n && cd WordPress && git checkout $WORDPRESS_VER \\\n && mv wp-config-sample.php wp-config.php \\\n && sed -i 's/localhost/127.0.0.1/' wp-config.php \\\n && sed -i 's/database_name_here/WORDPRESS/' wp-config.php \\\n && sed -i 's/username_here/Wordpress/' wp-config.php \\\n && sed -i 's/password_here/password/' wp-config.php \\\n# Initialize database server\n && mkdir -p /var/lib/mysql/data \\\n && /usr/sbin/mysqld --initialize --user=mysql --datadir=/var/lib/mysql/data \\\n && sleep 60s && mkdir -p /var/run/mysqld \\\n && chown mysql:mysql /var/run/mysqld \\\n# Creating script for starting apache2 server and mysql\n && service mysql start && sleep 15s && /usr/bin/mysql -e \"create database WORDPRESS\" \\\n && /usr/bin/mysql -e \"create user 'Wordpress'@'localhost' identified by 'password'\" \\\n && /usr/bin/mysql -e \"grant all privileges on WORDPRESS.* to 'Wordpress'@'localhost' identified by 'password' with GRANT OPTION\" \\\n && echo 'service apache2 start && /usr/bin/mysqld_safe --user=mysql' > /start.sh \\\n# Clean up of unused packages\n && apt-get remove -y \\\n    curl \\\n    git \\\n && apt-get autoremove -y \\\n && apt autoremove -y \\\n && apt-get clean \\\n && rm -rf  /var/lib/apt/lists/*\n\nVOLUME /var/www/html\n\nEXPOSE 80 3306\n\nCMD [\"/bin/sh\", \"start.sh\"]\n\n# End of Dockerfile\n"
}