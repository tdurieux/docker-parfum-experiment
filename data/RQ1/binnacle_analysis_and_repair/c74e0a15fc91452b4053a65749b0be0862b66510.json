{
  "startTime": 1674234393184,
  "endTime": 1674234393445,
  "originalSmells": [
    {
      "rule": "sha256sumEchoOneSpaces",
      "position": {
        "lineStart": 48,
        "lineEnd": 48,
        "columnStart": 1,
        "columnEnd": 45
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM debian:stretch-slim\n\n# ensure local pypy is preferred over distribution pypy\nENV PATH /usr/local/bin:$PATH\n\n# http://bugs.python.org/issue19846\n# > At the moment, setting \"LANG=C\" on a Linux system *fundamentally breaks Python 3*, and that's not OK.\nENV LANG C.UTF-8\n\nRUN apt-get update && apt-get install -y --no-install-recommends \\\n\t\tca-certificates \\\n\t\tlibexpat1 \\\n\t\tlibffi6 \\\n\t\tlibgdbm3 \\\n\t\tlibsqlite3-0 \\\n\t&& rm -rf /var/lib/apt/lists/*\n\nENV PYPY_VERSION 7.0.0\n\n# if this is called \"PIP_VERSION\", pip explodes with \"ValueError: invalid truth value '<VERSION>'\"\nENV PYTHON_PIP_VERSION 19.1.1\n\nRUN set -ex; \\\n\n# this \"case\" statement is generated via \"update.sh\"\n\tdpkgArch=\"$(dpkg --print-architecture)\"; \\\n\tcase \"${dpkgArch##*-}\" in \\\n# amd64\n\t\tamd64) pypyArch='linux64'; sha256='729e3c54325969c98bd3658c6342b9f5987b96bad1d6def04250a08401b54c4b' ;; \\\n# i386\n\t\ti386) pypyArch='linux32'; sha256='b8db8fbca9621de8ea8cd7184b322f2dddb2f385e8e5a63dfb75bb3fea4b2e3f' ;; \\\n# ppc64le\n\t\tppc64el) pypyArch='ppc64le'; sha256='2912884da05abc2cdf71dd337c3f280095351312c1a1732a52b6878174a0fd02' ;; \\\n# s390x\n\t\ts390x) pypyArch='s390x'; sha256='d588b045cc0d3a75c31fce54c1d181b1206ad9a5dd272fe79160a6268401605f' ;; \\\n\t\t*) echo >&2 \"error: current architecture ($dpkgArch) does not have a corresponding PyPy $PYPY_VERSION binary release\"; exit 1 ;; \\\n\tesac; \\\n\n\tsavedAptMark=\"$(apt-mark showmanual)\"; \\\n\tapt-get update; \\\n\tapt-get install -y --no-install-recommends \\\n\t\tbzip2 \\\n\t\twget \\\n# sometimes \"pypy3\" itself is linked against libncurses5, sometimes it's a \".so\" file in \"/usr/local/lib_pypy\"\n\t\tlibncurses5 \\\n\t; \\\n\n\twget -O pypy.tar.bz2 \"https://bitbucket.org/pypy/pypy/downloads/pypy3.5-v${PYPY_VERSION}-${pypyArch}.tar.bz2\" --progress=dot:giga; \\\n\techo \"$sha256  *pypy.tar.bz2\" | sha256sum -c; \\\n\ttar -xjC /usr/local --strip-components=1 -f pypy.tar.bz2; \\\n\tfind /usr/local/lib-python -depth -type d -a \\( -name test -o -name tests \\) -exec rm -rf '{}' +; \\\n\trm pypy.tar.bz2; \\\n\n# smoke test\n\tpypy3 --version; \\\n\n\tif [ -f /usr/local/lib_pypy/_ssl_build.py ]; then \\\n# on pypy3, rebuild ffi bits for compatibility with Debian Stretch+ (https://github.com/docker-library/pypy/issues/24#issuecomment-409408657)\n\t\tapt-get install -y --no-install-recommends gcc libc6-dev libssl-dev; \\\n\t\tcd /usr/local/lib_pypy; \\\n\t\tpypy3 _ssl_build.py; \\\n# TODO rebuild other cffi modules here too? (other _*_build.py files)\n\tfi; \\\n\n\twget -O get-pip.py 'https://bootstrap.pypa.io/get-pip.py'; \\\n\n\tpypy3 get-pip.py \\\n\t\t--disable-pip-version-check \\\n\t\t--no-cache-dir \\\n\t\t\"pip==$PYTHON_PIP_VERSION\" \\\n\t; \\\n# smoke test\n\tpip --version; \\\n\n\trm -f get-pip.py; \\\n\n\tapt-mark auto '.*' > /dev/null; \\\n\t[ -z \"$savedAptMark\" ] || apt-mark manual $savedAptMark > /dev/null; \\\n\tfind /usr/local -type f -executable -exec ldd '{}' ';' \\\n\t\t| awk '/=>/ { print $(NF-1) }' \\\n\t\t| sort -u \\\n\t\t| xargs -r dpkg-query --search \\\n\t\t| cut -d: -f1 \\\n\t\t| sort -u \\\n\t\t| xargs -r apt-mark manual \\\n\t; \\\n\tapt-get purge -y --auto-remove -o APT::AutoRemove::RecommendsImportant=false; \\\n# smoke test again, to be sure\n\trm -rf /var/lib/apt/lists/*; \\\n\tpypy3 --version; \\\n\tpip --version\n\nCMD [\"pypy3\"]\n"
}