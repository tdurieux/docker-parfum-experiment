{
  "startTime": 1674237152595,
  "endTime": 1674237153104,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 55,
        "lineEnd": 55,
        "columnStart": 4,
        "columnEnd": 58
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 96,
        "lineEnd": 96,
        "columnStart": 4,
        "columnEnd": 116
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 40,
        "lineEnd": 40,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 41,
        "lineEnd": 41,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 42,
        "lineEnd": 42,
        "columnStart": 4,
        "columnEnd": 36
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 43,
        "lineEnd": 43,
        "columnStart": 4,
        "columnEnd": 29
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 44,
        "lineEnd": 44,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 45,
        "lineEnd": 45,
        "columnStart": 4,
        "columnEnd": 37
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 46,
        "lineEnd": 46,
        "columnStart": 4,
        "columnEnd": 22
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 50,
        "lineEnd": 50,
        "columnStart": 4,
        "columnEnd": 52
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 86,
        "lineEnd": 86,
        "columnStart": 4,
        "columnEnd": 56
      }
    },
    {
      "rule": "gpgUseBatchFlag",
      "position": {
        "lineStart": 55,
        "lineEnd": 55,
        "columnStart": 61,
        "columnEnd": 90
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 6,
        "lineEnd": 15,
        "columnStart": 4,
        "columnEnd": 10
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 33,
        "lineEnd": 33,
        "columnStart": 4,
        "columnEnd": 54
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 39,
        "lineEnd": 39,
        "columnStart": 25,
        "columnEnd": 115
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 49,
        "lineEnd": 49,
        "columnStart": 25,
        "columnEnd": 80
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 59,
        "lineEnd": 59,
        "columnStart": 4,
        "columnEnd": 39
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 60,
        "lineEnd": 60,
        "columnStart": 4,
        "columnEnd": 45
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 85,
        "lineEnd": 85,
        "columnStart": 25,
        "columnEnd": 63
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 59,
        "lineEnd": 59,
        "columnStart": 4,
        "columnEnd": 39
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 60,
        "lineEnd": 60,
        "columnStart": 4,
        "columnEnd": 45
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 6,
        "lineEnd": 15,
        "columnStart": 4,
        "columnEnd": 10
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 17,
        "lineEnd": 29,
        "columnStart": 22,
        "columnEnd": 27
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 33,
        "lineEnd": 33,
        "columnStart": 4,
        "columnEnd": 54
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 39,
        "lineEnd": 39,
        "columnStart": 25,
        "columnEnd": 115
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 49,
        "lineEnd": 49,
        "columnStart": 25,
        "columnEnd": 80
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 59,
        "lineEnd": 59,
        "columnStart": 4,
        "columnEnd": 39
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 60,
        "lineEnd": 60,
        "columnStart": 4,
        "columnEnd": 45
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 85,
        "lineEnd": 85,
        "columnStart": 25,
        "columnEnd": 63
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 59,
        "lineEnd": 59,
        "columnStart": 4,
        "columnEnd": 63
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 60,
        "lineEnd": 60,
        "columnStart": 4,
        "columnEnd": 69
      }
    }
  ],
  "repairedDockerfile": "#FROM ubuntu:16.04\nFROM tensorflow/tensorflow:1.8.0-devel-py3\nMAINTAINER Katherine Li <kml11@live.com>\n\nRUN umask 022\nRUN apt-get -y update && \\\n    apt-get -y --no-install-recommends install \\\n      vim \\\n      wget \\\n      curl \\\n      jq \\\n      gawk \\\n      openssh-client \\\n      git \\\n      rsync \\\n      sudo && rm -rf /var/lib/apt/lists/*;\n\nRUN apt-get update && apt-get install -y --no-install-recommends \\\n        build-essential \\\n        cmake \\\n        git \\\n        wget \\\n        vim \\\n        python-dev \\\n        python-numpy \\\n        python-pip \\\n        python-yaml \\\n        locales \\\n        curl \\\n        apt-transport-https && rm -rf /var/lib/apt/lists/*;\n\n\nRUN apt-get update -y && \\\n    apt-get -y --no-install-recommends install apache2 libapache2-mod-wsgi-py3 && rm -rf /var/lib/apt/lists/*;\n\nRUN git clone https://github.com/tensorflow/models\n\nRUN mkdir -p /var/www/html/\n\nRUN apt-get update -y && apt-get install --no-install-recommends -y python3-dev python3-pip python3-yaml python3-pycurl locales ssh-askpass && rm -rf /var/lib/apt/lists/*;\nRUN pip3 install --no-cache-dir --upgrade pip\nRUN pip3 install --no-cache-dir setuptools\nRUN pip3 install --no-cache-dir flask flask.restful\nRUN pip3 install --no-cache-dir bs4 requests\nRUN pip3 install --no-cache-dir -U flask-cors\nRUN pip3 install --no-cache-dir opencv-python pandas\nRUN pip3 install --no-cache-dir keras\nRUN pip3 install -U --no-cache-dir git+https://github.com/ppwwyyxx/tensorpack.git\n\nRUN apt-get update -y && apt-get install --no-install-recommends -y nodejs python3-pydot python3-skimage && rm -rf /var/lib/apt/lists/*;\nRUN pip3 install --no-cache-dir git+https://github.com/aleju/imgaug\n\n# RUN sudo npm install bower -g\n\n# netcore 2.0\nRUN curl -f https://packages.microsoft.com/keys/microsoft.asc | gpg --batch --dearmor > microsoft.gpg\nRUN mv microsoft.gpg /etc/apt/trusted.gpg.d/microsoft.gpg\nRUN sh -c 'echo \"deb [arch=amd64] https://packages.microsoft.com/repos/microsoft-ubuntu-xenial-prod xenial main\" > /etc/apt/sources.list.d/dotnetdev.list'\nRUN apt-get update\nRUN apt-get install --no-install-recommends -y dotnet-sdk-2.0.0 && rm -rf /var/lib/apt/lists/*;\nRUN apt-get install --no-install-recommends -y aspnetcore-store-2.0.0 && rm -rf /var/lib/apt/lists/*;\n\nENV APACHE_RUN_USER www-data\nENV APACHE_RUN_GROUP www-data\nENV APACHE_LOG_DIR /var/log/apache2\n\n#EXPOSE 80\n#EXPOSE 5000\n\n\n\nRUN rm /etc/apache2/mods-enabled/mpm_*\nCOPY mpm_prefork.conf /etc/apache2/mods-available/mpm_prefork.conf\nCOPY 000-default.conf /etc/apache2/sites-available/000-default.conf\nCOPY ports.conf /etc/apache2/ports.conf\nRUN ln -s /etc/apache2/mods-available/mpm_prefork.conf /etc/apache2/mods-enabled/mpm_prefork.conf\nRUN ln -s /etc/apache2/mods-available/mpm_prefork.load /etc/apache2/mods-enabled/mpm_prefork.load\nCOPY bingserver-restfulapi.wsgi /wsgi/bingserver-restfulapi.wsgi\nADD RestAPI /BingServer/src/RestAPI\n\n#ADD utils /BingServer/src/RestAPI/utils\nRUN echo \"ServerName localhost\" >> /etc/apache2/apache2.conf\nADD run.sh /run.sh\nRUN chmod +x /run.sh\n\nRUN apt-get update -y && apt-get install --no-install-recommends -y openssh-server sudo && rm -rf /var/lib/apt/lists/*;\nRUN pip3 install --no-cache-dir --upgrade --ignore-installed setuptools\n\nRUN git clone https://github.com/ppwwyyxx/tensorpack.git\n\nRUN mkdir -p /var/log/apache2\nRUN chmod 0777 /var/log/apache2\nRUN chmod -R 0777 /root\nRUN chmod -R 0777 /tensorflow\n\n# RUN apt-get update -y && apt-get install ssh-askpass rssh molly-guard ufw monkeysphere python3-ndg-httpsclient -y\nRUN curl -f -L \"https://storage.googleapis.com/download.tensorflow.org/models/inception_v3_2016_08_28_frozen.pb.tar.gz\" | tar -C /tensorflow/tensorflow/examples/label_image/data -xz\n\nENV LD_LIBRARY_PATH /usr/local/nvidia/lib64/\n\nEXPOSE 180 1443 1280\nADD RecogServer /RecogServer\nCOPY wwwroot /var/www/html\nRUN chmod -R 755 /var/www/html/\n\n#Telemetry\n#--------------\n#The .NET Core tools collect usage data in order to improve your experience. The data is anonymous and does not include command-line arguments. The data is collected by Microsoft and shared with the community.\n#You can opt out of telemetry by setting a DOTNET_CLI_TELEMETRY_OPTOUT environment variable to 1 using your favorite shell.\n#You can read more about .NET Core tools telemetry @ https://aka.ms/dotnet-cli-telemetry.\nENV DOTNET_CLI_TELEMETRY_OPTOUT 1\n#WORKDIR /var/www/html\n#RUN bower --allow-root install ng-file-upload --save\n\n# Need to run privileged mode\n# python /root/certificate-service/genkey-restapi.py &&\n\n# Additional utility\nRUN mkdir /utils; cd /utils;  git clone --recurse-submodules git://github.com/DLWorkspace/DLWorkspace-Utils\n\n# CMD /bin/bash -c \"service apache2 start && sleep infinity\"\nWORKDIR /tensorflow\n\n\nCMD /bin/bash -c /run.sh\n"
}