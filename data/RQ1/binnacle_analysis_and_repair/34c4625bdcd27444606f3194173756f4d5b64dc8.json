{
  "startTime": 1674251491496,
  "endTime": 1674251491625,
  "originalSmells": [
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 33,
        "lineEnd": 33,
        "columnStart": 60,
        "columnEnd": 78
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 10,
        "lineEnd": 13,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 10,
        "lineEnd": 13,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 15,
        "lineEnd": 15,
        "columnStart": 4,
        "columnEnd": 63
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 10,
        "lineEnd": 13,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 15,
        "lineEnd": 15,
        "columnStart": 4,
        "columnEnd": 63
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 10,
        "lineEnd": 13,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 15,
        "lineEnd": 15,
        "columnStart": 4,
        "columnEnd": 63
      }
    }
  ],
  "repairedDockerfile": "FROM nvidia/cuda:8.0-cudnn5-devel\n# cuda8.0 has to be used because this is the first ubuntu16.04 container\n# which is required due to OpenBLAS being incompatible with ubuntu14.04\n\nCOPY install/ubuntu_install_core.sh /install/\nRUN /install/ubuntu_install_core.sh\n\nCOPY install/ubuntu_install_python.sh /install/\nRUN /install/ubuntu_install_python.sh\n\nRUN apt-get install --no-install-recommends -y libprotobuf-dev libleveldb-dev \\\n    libsnappy-dev libopencv-dev libhdf5-serial-dev protobuf-compiler \\\n    libatlas-base-dev python-dev libgflags-dev libgoogle-glog-dev liblmdb-dev \\\n    python-numpy python-opencv && rm -rf /var/lib/apt/lists/*;\n\nRUN apt-get install -y --no-install-recommends libboost-all-dev && rm -rf /var/lib/apt/lists/*;\n\nRUN cd /; git clone http://github.com/BVLC/caffe.git; cd caffe; \\\n    cp Makefile.config.example Makefile.config\n\nRUN echo \"CPU_ONLY := 1\" >> /caffe/Makefile.config\n\n# Fixes https://github.com/BVLC/caffe/issues/5658 See https://github.com/intel/caffe/wiki/Ubuntu-16.04-or-15.10-Installation-Guide\nRUN echo \"INCLUDE_DIRS += /usr/lib /usr/lib/x86_64-linux-gnu /usr/include/hdf5/serial/ \" >> /caffe/Makefile.config\nRUN echo \"LIBRARY_DIRS += /usr/lib /usr/lib/x86_64-linux-gnu /usr/lib/x86_64-linux-gnu/hdf5/serial \" >> /caffe/Makefile.config\n\n# Fixes https://github.com/BVLC/caffe/issues/4333 See https://github.com/intel/caffe/wiki/Ubuntu-16.04-or-15.10-Installation-Guide\n# Note: This is only valid on Ubuntu16.04 - the version numbers are bound to the distribution\nRUN ln -s /usr/lib/x86_64-linux-gnu/libhdf5_serial.so.10.0.2 /usr/lib/x86_64-linux-gnu/libhdf5.so\nRUN ln -s /usr/lib/x86_64-linux-gnu/libhdf5_serial_hl.so.10.0.2 /usr/lib/x86_64-linux-gnu/libhdf5_hl.so\n\nRUN cd caffe; make all pycaffe -j$(nproc)\n\nRUN cd caffe/python;for req in $(cat requirements.txt); do pip2 install --no-cache-dir $req; done\n\nENV PYTHONPATH=${PYTHONPATH}:/caffe/python\n"
}