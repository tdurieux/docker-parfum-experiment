{
  "startTime": 1674246329479,
  "endTime": 1674246329914,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 68,
        "lineEnd": 69,
        "columnStart": 7,
        "columnEnd": 99
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "ARG BUILD_FROM=hassioaddons/base:4.0.1\n# hadolint ignore=DL3006\nFROM ${BUILD_FROM}\n\n# Set shell\nSHELL [\"/bin/bash\", \"-o\", \"pipefail\", \"-c\"]\n\n# Add env\nENV TERM=\"xterm-256color\"\n\n# Copy Python requirements file\nCOPY requirements.txt /tmp/\n\n# Setup base\nARG BUILD_ARCH\n# hadolint ignore=DL3003\nRUN \\\n    apk add --no-cache --virtual .build-dependencies \\\n        bsd-compat-headers=0.7.1-r0 \\\n        build-base=0.5-r1 \\\n        cmake=3.14.5-r0 \\\n        docker=18.09.6-r0 \\\n        json-c-dev=0.13.1-r0 \\\n        libffi-dev=3.2.1-r6 \\\n        openssl-dev=1.1.1c-r0 \\\n        python3-dev=3.7.3-r0 \\\n        zlib-dev=1.2.11-r1 \\\n    \\\n    && apk add --no-cache \\\n        ack=3.0.0-r0 \\\n        awake=1.0-r3 \\\n        bind-tools=9.14.1-r1 \\\n        bluez=5.50-r3 \\\n        colordiff=1.0.18-r1 \\\n        device-mapper-libs=2.02.184-r0 \\\n        git=2.22.0-r0 \\\n        json-c=0.13.1-r0 \\\n        libltdl=2.4.6-r6 \\\n        libxml2-utils=2.9.9-r2 \\\n        lua-resty-http=0.13-r0 \\\n        mariadb-client=10.3.16-r0 \\\n        mosh=1.3.2-r8 \\\n        mosquitto-clients=1.6.3-r0 \\\n        nano-syntax=4.3-r0 \\\n        nano=4.3-r0 \\\n        ncurses=6.1_p20190518-r0 \\\n        net-tools=1.60_git20140218-r2 \\\n        nginx-mod-http-lua=1.16.0-r2 \\\n        nginx=1.16.0-r2 \\\n        nmap=7.70-r3 \\\n        openssh=8.0_p1-r0 \\\n        openssl=1.1.1c-r0 \\\n        pwgen=2.08-r0 \\\n        python3=3.7.3-r0 \\\n        rsync=3.1.3-r1 \\\n        sqlite=3.28.0-r0 \\\n        sudo=1.8.27-r0 \\\n        tmux=2.9a-r0 \\\n        vim=8.1.1365-r0 \\\n        wget=1.20.3-r0 \\\n        zip=3.0-r7 \\\n        zsh-autosuggestions=0.6.1-r0 \\\n        zsh-syntax-highlighting=0.6.0-r0 \\\n        zsh=5.7.1-r0 \\\n    \\\n    && git clone --depth 1 \\\n        git://github.com/robbyrussell/oh-my-zsh.git ~/.oh-my-zsh \\\n\n    && curl -f -L -s -o /usr/bin/hassio \\\n        \"https://github.com/home-assistant/hassio-cli/releases/download/2.2.0/hassio_${BUILD_ARCH}\" \\\n\n    && sed -i -e \"s#bin/ash#bin/zsh#\" /etc/passwd \\\n\n    && git clone --branch \"v3.0.1\" --depth=1 \\\n        https://github.com/warmcat/libwebsockets.git /tmp/libwebsockets \\\n\n    && mkdir -p /tmp/libwebsockets/build \\\n    && cd /tmp/libwebsockets/build \\\n    && cmake .. \\\n        -DCMAKE_BUILD_TYPE=MinSizeRel \\\n        -DCMAKE_INSTALL_PREFIX=/usr \\\n        -DCMAKE_VERBOSE_MAKEFILE=TRUE \\\n        -DLWS_UNIX_SOCK=ON \\\n    && make \\\n    && make install \\\n\n    && git clone --branch \"1.5.0\" --depth=1 \\\n        https://github.com/tsl0922/ttyd.git /tmp/ttyd \\\n\n    && mkdir -p /tmp/ttyd/build \\\n    && cd /tmp/ttyd/build \\\n    && cmake .. \\\n        -DCMAKE_BUILD_TYPE=MinSizeRel \\\n        -DCMAKE_INSTALL_PREFIX=/usr \\\n        -DCMAKE_VERBOSE_MAKEFILE=TRUE \\\n    && make \\\n    && make install \\\n\n    && cp /usr/bin/docker /usr/local/bin/.undocked \\\n\n    && pip3 install --no-cache-dir -r /tmp/requirements.txt \\\n\n    && apk del --no-cache --purge .build-dependencies \\\n\n    && find /usr/local \\\n        \\( -type d -a -name test -o -name tests -o -name '__pycache__' \\) \\\n        -o \\( -type f -a -name '*.pyc' -o -name '*.pyo' \\) \\\n        -exec rm -rf '{}' + \\\n\n    && rm -f -r \\\n        /etc/nginx \\\n        /root/.cache \\\n        /root/.cmake \\\n        /tmp/*\n\n# Copy root filesystem\nCOPY rootfs /\n\n# Build arguments\nARG BUILD_DATE\nARG BUILD_REF\nARG BUILD_VERSION\n\n# Labels\nLABEL \\\n    io.hass.name=\"SSH & Web Terminal\" \\\n    io.hass.description=\"SSH & Web Terminal access to your Home Assistant instance\" \\\n    io.hass.arch=\"${BUILD_ARCH}\" \\\n    io.hass.type=\"addon\" \\\n    io.hass.version=${BUILD_VERSION} \\\n    maintainer=\"Franck Nijhof <frenck@addons.community>\" \\\n    org.label-schema.description=\"SSH & Web Terminal access to your Home Assistant instance\" \\\n    org.label-schema.build-date=${BUILD_DATE} \\\n    org.label-schema.name=\"SSH & Web Terminal\" \\\n    org.label-schema.schema-version=\"1.0\" \\\n    org.label-schema.url=\"https://community.home-assistant.io/t/community-hass-io-add-on-ssh-web-terminal/33820?u=frenck\" \\\n    org.label-schema.usage=\"https://github.com/hassio-addons/addon-ssh/tree/master/README.md\" \\\n    org.label-schema.vcs-ref=${BUILD_REF} \\\n    org.label-schema.vcs-url=\"https://github.com/hassio-addons/addon-ssh\" \\\n    org.label-schema.vendor=\"Community Hass.io Add-ons\"\n"
}