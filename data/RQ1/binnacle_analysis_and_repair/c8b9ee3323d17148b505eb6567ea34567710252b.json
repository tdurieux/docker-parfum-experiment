{
  "startTime": 1674252733122,
  "endTime": 1674252733722,
  "originalSmells": [
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 88,
        "lineEnd": 88,
        "columnStart": 4,
        "columnEnd": 24
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 90,
        "lineEnd": 90,
        "columnStart": 4,
        "columnEnd": 25
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 91,
        "lineEnd": 91,
        "columnStart": 157,
        "columnEnd": 199
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 91,
        "lineEnd": 91,
        "columnStart": 340,
        "columnEnd": 379
      }
    },
    {
      "rule": "aptGetInstallUseY",
      "position": {
        "lineStart": 4,
        "lineEnd": 4,
        "columnStart": 90,
        "columnEnd": 108
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 4,
        "lineEnd": 4,
        "columnStart": 112,
        "columnEnd": 269
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 9,
        "lineEnd": 9,
        "columnStart": 4,
        "columnEnd": 34
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 32,
        "lineEnd": 32,
        "columnStart": 4,
        "columnEnd": 26
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 48,
        "lineEnd": 48,
        "columnStart": 5,
        "columnEnd": 31
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 64,
        "lineEnd": 64,
        "columnStart": 4,
        "columnEnd": 79
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 66,
        "lineEnd": 66,
        "columnStart": 4,
        "columnEnd": 102
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 82,
        "lineEnd": 82,
        "columnStart": 83,
        "columnEnd": 155
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 84,
        "lineEnd": 84,
        "columnStart": 4,
        "columnEnd": 33
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 89,
        "lineEnd": 89,
        "columnStart": 4,
        "columnEnd": 51
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 98,
        "lineEnd": 98,
        "columnStart": 4,
        "columnEnd": 33
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 9,
        "lineEnd": 9,
        "columnStart": 4,
        "columnEnd": 34
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 32,
        "lineEnd": 32,
        "columnStart": 4,
        "columnEnd": 26
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 48,
        "lineEnd": 48,
        "columnStart": 5,
        "columnEnd": 31
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 64,
        "lineEnd": 64,
        "columnStart": 4,
        "columnEnd": 79
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 66,
        "lineEnd": 66,
        "columnStart": 4,
        "columnEnd": 102
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 84,
        "lineEnd": 84,
        "columnStart": 4,
        "columnEnd": 33
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 89,
        "lineEnd": 89,
        "columnStart": 4,
        "columnEnd": 51
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 98,
        "lineEnd": 98,
        "columnStart": 4,
        "columnEnd": 33
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 4,
        "lineEnd": 4,
        "columnStart": 112,
        "columnEnd": 269
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 9,
        "lineEnd": 9,
        "columnStart": 4,
        "columnEnd": 34
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 32,
        "lineEnd": 32,
        "columnStart": 4,
        "columnEnd": 26
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 48,
        "lineEnd": 48,
        "columnStart": 5,
        "columnEnd": 31
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 64,
        "lineEnd": 64,
        "columnStart": 4,
        "columnEnd": 79
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 66,
        "lineEnd": 66,
        "columnStart": 4,
        "columnEnd": 102
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 82,
        "lineEnd": 82,
        "columnStart": 83,
        "columnEnd": 155
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 84,
        "lineEnd": 84,
        "columnStart": 4,
        "columnEnd": 33
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 89,
        "lineEnd": 89,
        "columnStart": 4,
        "columnEnd": 51
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 98,
        "lineEnd": 98,
        "columnStart": 4,
        "columnEnd": 33
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 9,
        "lineEnd": 9,
        "columnStart": 4,
        "columnEnd": 58
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 32,
        "lineEnd": 32,
        "columnStart": 4,
        "columnEnd": 50
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 48,
        "lineEnd": 48,
        "columnStart": 4,
        "columnEnd": 53
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 64,
        "lineEnd": 64,
        "columnStart": 4,
        "columnEnd": 103
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 66,
        "lineEnd": 66,
        "columnStart": 4,
        "columnEnd": 125
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 84,
        "lineEnd": 84,
        "columnStart": 4,
        "columnEnd": 57
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 89,
        "lineEnd": 89,
        "columnStart": 4,
        "columnEnd": 75
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 100,
        "lineEnd": 100,
        "columnStart": 4,
        "columnEnd": 57
      }
    }
  ],
  "repairedDockerfile": "FROM syntithenai/snips_base\nMAINTAINER Steve Ryan <stever@syntithenai.com>\n\n# system dependancies\nRUN export DEBIAN_FRONTEND=\"noninteractive\" ; apt-get  --allow-unauthenticated update && apt-get -f -y install && apt-get install --no-install-recommends -fyq --force-yes libfreetype6-dev virtualenv python-pip python-sklearn python-dev libpng-dev libfreetype6 nano apt-transport-https wget && rm -rf /var/lib/apt/lists/*;\n#  && apt-get clean && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*;\n\n# USE (MORE EFFICIENT) ORACLE JDK FOR RASPI\n#RUN if [ `uname -m` = \"armv7l\" ]; then  apt-get install -y oracle-java7-jdk; elif [ `uname -m` = \"x86_64\" ]; then apt-get install -y openjdk-7-jdk; fi\nRUN apt-get install --no-install-recommends -y default-jdk && rm -rf /var/lib/apt/lists/*;\n\n# Download and install Anaconda\n# SWITCH ON ARCHITECTURE TO SELECT SOURCES\nRUN if [ `uname -m` = \"armv7l\" ]; then  mkdir /opt/rasa  &&  export HOME=/opt/rasa/ && export ANACONDA_REPO='http://repo.continuum.io/miniconda/Miniconda-latest-Linux-armv7l.sh' && export ANACONDA_INSTALLER='Miniconda-latest-Linux-armv7l.sh' && wget -P /tmp/ $ANACONDA_REPO  && bash \"/tmp/$ANACONDA_INSTALLER\" -b -p $HOME/anaconda &&  export PATH=\"$HOME/anaconda/bin:$PATH\" &&  echo 'export PATH=\"$HOME/anaconda/bin:$PATH\"' >> ~/.bash_profile &&  echo 'export PATH=\"~/anaconda/bin:$PATH\"' >> ~/.bashrc; elif [ `uname -m` = \"x86_64\" ]; then mkdir /opt/rasa  &&  export HOME=/opt/rasa/ && export ANACONDA_REPO='http://repo.continuum.io/miniconda/Miniconda2-4.3.30-Linux-x86_64.sh' && export ANACONDA_INSTALLER='Miniconda2-4.3.30-Linux-x86_64.sh' && wget -P /tmp/ $ANACONDA_REPO  && bash \"/tmp/$ANACONDA_INSTALLER\" -b -p $HOME/anaconda &&  export PATH=\"$HOME/anaconda/bin:$PATH\" &&  echo 'export PATH=\"$HOME/anaconda/bin:$PATH\"' >> ~/.bash_profile &&  echo 'export PATH=\"~/anaconda/bin:$PATH\"' >> ~/.bashrc; fi\n\n\n# https://repo.continuum.io/miniconda/Miniconda3-4.3.30-Linux-x86_64.sh\n# http://repo.continuum.io/miniconda/Miniconda2-4.3.30-Linux-x86_64.sh\n#https://repo.continuum.io/miniconda/Miniconda-3.16.0-Linux-x86_64.sh\n\n\n# scikit sklearn\nRUN /opt/rasa/anaconda/bin/conda install scikit-learn\nRUN /opt/rasa/anaconda/bin/pip install -U sklearn-crfsuite\n\nRUN  ls /tmp\n\n# install rasa_nlu and requirementS\nRUN /opt/rasa/anaconda/bin/pip install setuptools ; echo \"done\"\nRUN /opt/rasa/anaconda/bin/pip install -U spacy ; echo \"done\"\nRUN /opt/rasa/anaconda/bin/python -m spacy download en ; echo \"done\"\nRUN /opt/rasa/anaconda/bin/pip install -U scikit-learn scipy sklearn-crfsuite  paho-mqtt ; echo \"done\"\nRUN apt-get install --no-install-recommends -y git && rm -rf /var/lib/apt/lists/*;\nRUN cd /opt/rasa && git clone https://github.com/RasaHQ/rasa_nlu.git && cd rasa_nlu && /opt/rasa/anaconda/bin/pip install -r requirements.txt;  echo done;\nRUN cd /opt/rasa/rasa_nlu && /opt/rasa/anaconda/bin/python setup.py install ; echo \"done\"\n\nRUN /opt/rasa/anaconda/bin/pip install -U docker-compose ; echo \"done\"\nRUN /opt/rasa/anaconda/bin/pip install -U setuptools ; echo \"done\"\n\n# and again to force ??\nRUN /opt/rasa/anaconda/bin/pip install -U spacy ; echo \"done\"\nRUN /opt/rasa/anaconda/bin/python -m spacy download en ; echo \"done\"\n\nRUN /opt/rasa/anaconda/bin/pip install -U Flask ; echo \"done\"\nRUN /opt/rasa/anaconda/bin/pip install duckling\n\n# rasa core\nRUN /opt/rasa/anaconda/bin/pip install pypandoc\nRUN apt-get install --no-install-recommends -y pandoc && rm -rf /var/lib/apt/lists/*;\nRUN cd /opt/rasa && git clone https://github.com/RasaHQ/rasa_core.git\nCOPY rasa_core_requirements.txt /opt/rasa/rasa_core/requirements.txt\nRUN cd /opt/rasa/rasa_core && /opt/rasa/anaconda/bin/pip install -r requirements.txt\nRUN cd /opt/rasa/rasa_core && /opt/rasa/anaconda/bin/pip install -e .\n\nRUN /opt/rasa/anaconda/bin/pip install paho-mqtt future typing boto3\n\n# ADD NON FREE REPOS\n# raspian includes them by default\nRUN printf \"deb http://deb.debian.org/debian jessie main contrib non-free\" > /etc/apt/sources.list.d/non-free.list\n\nRUN apt-get update\n\n\n# PICO TTS\nRUN apt-get -y --no-install-recommends install libttspico0 libttspico-utils libttspico-data libav-tools && rm -rf /var/lib/apt/lists/*;\n\nRUN apt-get -y --no-install-recommends install pulseaudio sox libsox-fmt-all mosquitto-clients portaudio19-dev python-pyaudio && rm -rf /var/lib/apt/lists/*;\nRUN /opt/rasa/anaconda/bin/pip install pyaudio\n\nRUN cd /opt; git clone https://github.com/rabitt/pysox.git; cd pysox ; /opt/rasa/anaconda/bin/python setup.py install\n\n#curl -s https://packagecloud.io/install/repositories/github/git-lfs/script.python.sh | bash\n#RUN pip install deepspeech\n#wget -O - https://github.com/mozilla/DeepSpeech/releases/download/v0.1.0/deepspeech-0.1.0-models.tar.gz | tar xvfz -\n\n# hacked entrypoint script and ENV VAR to trigger rasa\n#COPY ./snips-entrypoint.sh /opt/snips/snips-entrypoint.sh\n\n#COPY ./snips_rasa_core/ /opt/snips_rasa_core/\n#COPY ./rasa_musicplayer/ /opt/rasa_musicplayer/\n\n\nRUN DEBIAN_FRONTEND=\"noninteractive\" ; apt-get  --allow-unauthenticated update && apt-get install --no-install-recommends -y swig3.0 python-pyaudio python3-pyaudio sox python-pip && rm -rf /var/lib/apt/lists/*;\n\nRUN apt-get install --no-install-recommends -y python-dev && rm -rf /var/lib/apt/lists/*;\nCOPY ./rpi-arm-raspbian-8.0-1.2.0.tar.bz2 /tmp/rpi-arm-raspbian-8.0-1.2.0.tar.bz2\nCOPY ./ubuntu1404-x86_64-1.2.0.tar.bz2 /tmp/ubuntu1404-x86_64-1.2.0.tar.bz2\n\nRUN pip install --no-cache-dir pyaudio;\nRUN apt-get install --no-install-recommends -y libatlas-base-dev pulseaudio && rm -rf /var/lib/apt/lists/*;\nRUN pip install --no-cache-dir paho-mqtt\nRUN mkdir -p /opt/snowboy && mkdir /tmp/snowboy && cd /tmp/snowboy && if [ `uname -m` = \"armv7l\" ]; then \\\n bunzip2 /tmp/rpi-arm-raspbian-8.0-1.2.0.tar.bz2 && tar xf /tmp/rpi-arm-raspbian-8.0-1.2.0.tar; rm /tmp/rpi-arm-raspbian-8.0-1.2.0.tar cd rpi-arm-raspbian-8.0-1.2.0; cp -r * /opt/snowboy ;elif [ `uname -m` = \"x86_64\" ]; then \\\n bunzip2 /tmp/ubuntu1404-x86_64-1.2.0.tar.bz2 && tar xf /tmp/ubuntu1404-x86_64-1.2.0.tar; rm /tmp/ubuntu1404-x86_64-1.2.0.tar cd ubuntu1404-x86_64-1.2.0; cp -a * /opt/snowboy ;fi;\n\n#COPY ./snips_hotword_snowboy/* /opt/snips_hotword_snowboy/\n#COPY ./snips_hotword_snowboy/resources/* /opt/snips_hotword_snowboy/resources/\n\nRUN /opt/rasa/anaconda/bin/pip install ws4py watchdog\n\nRUN apt-get install --no-install-recommends -y alsa-utils && rm -rf /var/lib/apt/lists/*;\n\nCOPY ./client.conf /etc/pulse/client.conf\nCOPY ./asound-dmixrates.conf /etc/asound.conf\nCOPY ./snips_services/ /opt/snips_services/\n\n\n\n\nENTRYPOINT ['/opt/snips_rasa_server/start.sh']\n#CMD [\"/opt/snips/snips-entrypoint.sh\"]\n"
}