{
  "startTime": 1674249469397,
  "endTime": 1674249469573,
  "originalSmells": [
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 8,
        "lineEnd": 31,
        "columnStart": 4,
        "columnEnd": 11
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 8,
        "lineEnd": 31,
        "columnStart": 4,
        "columnEnd": 11
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 8,
        "lineEnd": 31,
        "columnStart": 4,
        "columnEnd": 11
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "# Dockerfile with tensorflow gpu support on python2, opencv3.3.0 \nFROM tensorflow/tensorflow:1.4.1-gpu \n\nMAINTAINER whenyd <whenyd@126.com> \n\nRUN apt-get update && apt-get install --no-install-recommends -y \\\n\nbuild-essential \\\ncmake \\\ngit \\\nwget \\\nunzip \\\nyasm \\\npkg-config \\\n\nlibtbb2 \\\nlibtbb-dev \\\nlibjpeg-dev \\\nlibpng-dev \\\nlibtiff-dev \\\nlibjasper-dev \\\nlibhdf5-dev \\\n\nlibavcodec-dev \\\nlibavformat-dev \\\nlibswscale-dev \\\nlibv4l-dev \\\nlibxvidcore-dev \\\nlibx264-dev && rm -rf /var/lib/apt/lists/*; # Core linux dependencies. \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n# Python dependencies \nRUN pip --no-cache-dir install \\  \nnumpy \\  \nhdf5storage \\  \nh5py \\  \nscipy \\  \nkeras \n\nWORKDIR / \n\nRUN wget https://github.com/opencv/opencv_contrib/archive/3.3.0.zip \\  \n&& unzip 3.3.0.zip \\  \n&& rm 3.3.0.zip \n\nRUN wget https://github.com/opencv/opencv/archive/3.3.0.zip \\  \n&& unzip 3.3.0.zip \\  \n&& mkdir /opencv-3.3.0/build \\  \n&& cd /opencv-3.3.0/build \\  \n&& cmake -DBUILD_TIFF=ON \\  \n-DBUILD_opencv_java=OFF \\  \n-DOPENCV_EXTRA_MODULES_PATH=/opencv_contrib-3.3.0/modules \\  \n-DWITH_CUDA=OFF \\  \n-DENABLE_AVX=ON \\  \n-DWITH_OPENGL=ON \\  \n-DWITH_OPENCL=ON \\  \n# cannot download ippicv  \n-DWITH_IPP=ON \\  \n-DWITH_TBB=ON \\  \n-DWITH_EIGEN=ON \\  \n-DWITH_V4L=ON \\  \n-DBUILD_TESTS=OFF \\  \n-DBUILD_PERF_TESTS=OFF \\  \n-DCMAKE_BUILD_TYPE=RELEASE \\  \n-DCMAKE_INSTALL_PREFIX=$(python -c \"import sys; print(sys.prefix)\") \\  \n-DPYTHON_EXECUTABLE=$(which python) \\  \n-DPYTHON_INCLUDE_DIR=$(python -c \"from distutils.sysconfig import get_python_inc; print(get_python_inc())\") \\  \n-DPYTHON_PACKAGES_PATH=$(python -c \"from distutils.sysconfig import get_python_lib; print(get_python_lib())\") .. \\  \n&& make install \\  \n&& rm /3.3.0.zip \\  \n&& rm -r /opencv-3.3.0 \\  \n&& ldconfig \n\nCMD [\"/bin/bash\"] \n\n"
}