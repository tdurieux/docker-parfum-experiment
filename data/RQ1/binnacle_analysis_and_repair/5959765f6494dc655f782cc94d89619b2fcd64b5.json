{
  "startTime": 1674248957281,
  "endTime": 1674248957529,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 23,
        "lineEnd": 23,
        "columnStart": 4,
        "columnEnd": 32
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 11,
        "lineEnd": 11,
        "columnStart": 4,
        "columnEnd": 29
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 12,
        "lineEnd": 12,
        "columnStart": 4,
        "columnEnd": 28
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 13,
        "lineEnd": 13,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 14,
        "lineEnd": 14,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 33,
        "lineEnd": 33,
        "columnStart": 4,
        "columnEnd": 47
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 36,
        "lineEnd": 36,
        "columnStart": 4,
        "columnEnd": 71
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 39,
        "lineEnd": 39,
        "columnStart": 4,
        "columnEnd": 36
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 42,
        "lineEnd": 42,
        "columnStart": 4,
        "columnEnd": 33
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 11,
        "lineEnd": 11,
        "columnStart": 4,
        "columnEnd": 29
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 12,
        "lineEnd": 12,
        "columnStart": 4,
        "columnEnd": 28
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 13,
        "lineEnd": 13,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 14,
        "lineEnd": 14,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 33,
        "lineEnd": 33,
        "columnStart": 4,
        "columnEnd": 47
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 36,
        "lineEnd": 36,
        "columnStart": 4,
        "columnEnd": 71
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 39,
        "lineEnd": 39,
        "columnStart": 4,
        "columnEnd": 36
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 42,
        "lineEnd": 42,
        "columnStart": 4,
        "columnEnd": 33
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 11,
        "lineEnd": 11,
        "columnStart": 4,
        "columnEnd": 29
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 12,
        "lineEnd": 12,
        "columnStart": 4,
        "columnEnd": 28
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 13,
        "lineEnd": 13,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 14,
        "lineEnd": 14,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 33,
        "lineEnd": 33,
        "columnStart": 4,
        "columnEnd": 47
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 36,
        "lineEnd": 36,
        "columnStart": 4,
        "columnEnd": 71
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 39,
        "lineEnd": 39,
        "columnStart": 4,
        "columnEnd": 36
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 42,
        "lineEnd": 42,
        "columnStart": 4,
        "columnEnd": 33
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 11,
        "lineEnd": 11,
        "columnStart": 4,
        "columnEnd": 53
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 12,
        "lineEnd": 12,
        "columnStart": 4,
        "columnEnd": 52
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 13,
        "lineEnd": 13,
        "columnStart": 4,
        "columnEnd": 54
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 14,
        "lineEnd": 14,
        "columnStart": 4,
        "columnEnd": 51
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 33,
        "lineEnd": 33,
        "columnStart": 4,
        "columnEnd": 71
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 36,
        "lineEnd": 36,
        "columnStart": 4,
        "columnEnd": 95
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 39,
        "lineEnd": 39,
        "columnStart": 4,
        "columnEnd": 60
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 42,
        "lineEnd": 42,
        "columnStart": 4,
        "columnEnd": 57
      }
    }
  ],
  "repairedDockerfile": "# Docker for Scumblr\n# Author : Nag\n# Select ubuntu as the base image\nFROM ubuntu:14.04\n\nMAINTAINER Nag <nagwww@gmail.com>\n\n# Dockerfile for a Rails application using Nginx and Unicorn\n\n# Install nginx, nodejs and curl\nRUN apt-get update -q\nRUN apt-get install --no-install-recommends -qy nginx && rm -rf /var/lib/apt/lists/*;\nRUN apt-get install --no-install-recommends -qy curl && rm -rf /var/lib/apt/lists/*;\nRUN apt-get install --no-install-recommends -qy nodejs && rm -rf /var/lib/apt/lists/*;\nRUN apt-get install --no-install-recommends -qy git && rm -rf /var/lib/apt/lists/*;\n\n# Prevent nginx from running in daemon mode\nRUN echo \"daemon off;\" >> /etc/nginx/nginx.conf\n\n# Retrieve code from github\nRUN git clone https://github.com/Netflix/scumblr.git /scumblr\n\n# Install rvm, ruby, bundler, sidekiq\nRUN curl -f -sSL https://get.rvm.io | bash -s stable\nRUN /bin/bash -l -c \"rvm requirements\"\nRUN /bin/bash -l -c \"rvm install 2.0.0-p481\"\nRUN /bin/bash -l -c \"gem install bundler --no-ri --no-rdoc\"\nRUN /bin/bash -l -c \"gem install sidekiq --no-ri --no-rdoc\"\n\n# set WORKDIR\nWORKDIR /scumblr\n\n# Install Nokogiri requirements\nRUN apt-get install --no-install-recommends -qy libxslt-dev libxml2-dev && rm -rf /var/lib/apt/lists/*;\n\n# Install Imagemagick requirements\nRUN apt-get install --no-install-recommends -qy libmagickwand-dev imagemagick libmagickcore-dev && rm -rf /var/lib/apt/lists/*;\n\n# Install Redis\nRUN apt-get install --no-install-recommends -qy redis-server && rm -rf /var/lib/apt/lists/*;\n\n# Install Postgres requirements\nRUN apt-get install --no-install-recommends -qy libpq-dev && rm -rf /var/lib/apt/lists/*;\n\n# bundle install\nRUN /bin/bash -l -c \"bundle install\"\n\n# Copy seed file\nADD config/scumblr/seeds.rb /scumblr/db/\n\n# Copy database.yml\nADD config/scumblr/database.yml /scumblr/config/\n\n# Copy scumblr config\nADD config/scumblr/scumblr.rb /scumblr/config/initializers/\n\n# Setup db\n# RUN /bin/bash -l -c \"rake db:create\"\n# RUN /bin/bash -l -c \"rake db:schema:load\"\n# RUN /bin/bash -l -c \"rake db:seed\"\n\n# Add nginx config files and ssl cert/key\nADD config/nginx/nginx-sites.conf /etc/nginx/sites-enabled/default\nADD config/nginx/server.crt /etc/nginx/ssl/\nADD config/nginx/server.key /etc/nginx/ssl/\n\n# Add startup script\nADD scripts/start-server.sh /usr/bin/start-server.sh\nRUN chmod +x /usr/bin/start-server.sh\n\n# Startup commands\nCMD /usr/bin/start-server.sh\n\n\n\n\n\n"
}