{
  "startTime": 1674237170231,
  "endTime": 1674237170831,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 14,
        "lineEnd": 14,
        "columnStart": 7,
        "columnEnd": 65
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 11,
        "lineEnd": 11,
        "columnStart": 5,
        "columnEnd": 88
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 15,
        "lineEnd": 15,
        "columnStart": 55,
        "columnEnd": 83
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 17,
        "lineEnd": 17,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 18,
        "lineEnd": 18,
        "columnStart": 7,
        "columnEnd": 42
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 20,
        "lineEnd": 22,
        "columnStart": 4,
        "columnEnd": 72
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 24,
        "lineEnd": 24,
        "columnStart": 4,
        "columnEnd": 28
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 25,
        "lineEnd": 25,
        "columnStart": 4,
        "columnEnd": 35
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 26,
        "lineEnd": 26,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 35,
        "lineEnd": 35,
        "columnStart": 4,
        "columnEnd": 34
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 11,
        "lineEnd": 11,
        "columnStart": 5,
        "columnEnd": 88
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 17,
        "lineEnd": 17,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 18,
        "lineEnd": 18,
        "columnStart": 7,
        "columnEnd": 42
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 20,
        "lineEnd": 22,
        "columnStart": 4,
        "columnEnd": 72
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 24,
        "lineEnd": 24,
        "columnStart": 4,
        "columnEnd": 28
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 25,
        "lineEnd": 25,
        "columnStart": 4,
        "columnEnd": 35
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 26,
        "lineEnd": 26,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 35,
        "lineEnd": 35,
        "columnStart": 4,
        "columnEnd": 34
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 11,
        "lineEnd": 11,
        "columnStart": 5,
        "columnEnd": 88
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 15,
        "lineEnd": 15,
        "columnStart": 55,
        "columnEnd": 83
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 17,
        "lineEnd": 17,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 18,
        "lineEnd": 18,
        "columnStart": 7,
        "columnEnd": 42
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 20,
        "lineEnd": 22,
        "columnStart": 4,
        "columnEnd": 72
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 24,
        "lineEnd": 24,
        "columnStart": 4,
        "columnEnd": 28
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 25,
        "lineEnd": 25,
        "columnStart": 4,
        "columnEnd": 35
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 26,
        "lineEnd": 26,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 35,
        "lineEnd": 35,
        "columnStart": 4,
        "columnEnd": 34
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 11,
        "lineEnd": 11,
        "columnStart": 4,
        "columnEnd": 111
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 17,
        "lineEnd": 17,
        "columnStart": 4,
        "columnEnd": 54
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 18,
        "lineEnd": 18,
        "columnStart": 7,
        "columnEnd": 66
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 20,
        "lineEnd": 22,
        "columnStart": 4,
        "columnEnd": 72
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 24,
        "lineEnd": 24,
        "columnStart": 4,
        "columnEnd": 52
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 25,
        "lineEnd": 25,
        "columnStart": 4,
        "columnEnd": 59
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 26,
        "lineEnd": 26,
        "columnStart": 4,
        "columnEnd": 54
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 35,
        "lineEnd": 35,
        "columnStart": 4,
        "columnEnd": 58
      }
    }
  ],
  "repairedDockerfile": "FROM nvidia/cuda:9.0-base\n#FROM nvidia/cuda:9.1-base\n#FROM nvidia/cuda:9.2-devel-ubuntu18.04\n#FROM nvidia/cuda:9.0-devel-ubuntu18.04\nMAINTAINER Tom Breuel <tmbdev@gmail.com>\n\nENV DEBIAN_FRONTEND noninteractive\nENV DEBCONF_NONINTERACTIVE_SEEN true\n\nRUN apt-get -y update && apt-get dist-upgrade -y\n\nRUN apt-get -y --no-install-recommends install sudo lsb-release build-essential curl software-properties-common \\\n    && echo \"deb http://packages.cloud.google.com/apt cloud-sdk-$(lsb_release -c -s) main\" \\\n           >> /etc/apt/sources.list.d/google-cloud-sdk.list \\\n    && curl -f https://packages.cloud.google.com/apt/doc/apt-key.gpg | apt-key add - \\\n    && apt-get update -y && apt-get dist-upgrade -y && apt-get -y --no-install-recommends install apt-utils && rm -rf /var/lib/apt/lists/*;\n\nRUN apt-get -y --no-install-recommends install locales && locale-gen en_US.UTF-8 && dpkg-reconfigure locales \\\n    && apt-get -y --no-install-recommends install google-cloud-sdk && rm -rf /var/lib/apt/lists/*;\n\nRUN apt-get -y --no-install-recommends install wget tightvncserver tmux rxvt \\\n    xterm mlterm imagemagick firefox blackbox imagemagick \\\n    vim-gtk gnome-terminal i3 chromium-browser git mercurial lynx daemon && rm -rf /var/lib/apt/lists/*;\n\nRUN apt-get install --no-install-recommends -y nginx && rm -rf /var/lib/apt/lists/*;\nRUN apt-get install --no-install-recommends -y nginx-extras && rm -rf /var/lib/apt/lists/*;\nRUN apt-get install --no-install-recommends -y cadaver && rm -rf /var/lib/apt/lists/*;\n\nRUN cd /tmp \\\n    && wget --quiet -nd https://repo.continuum.io/miniconda/Miniconda2-latest-Linux-x86_64.sh \\\n    && bash ./Miniconda2-latest-Linux-x86_64.sh -b -p /opt/conda \\\n    && ln -s /opt/conda/etc/profile.d/conda.sh /etc/profile.d/conda.sh \\\n    && ln -s /opt/conda/bin/conda /usr/bin/conda \\\n    && rm -f Miniconda*.sh\n\nRUN apt-get install --no-install-recommends -y redis-tools && rm -rf /var/lib/apt/lists/*;\n\nRUN conda install git\nRUN conda install numpy\nRUN conda install scipy\nRUN conda install msgpack\nRUN conda install simplejson\nRUN conda install pyzmq\nRUN conda install jupyter\nRUN conda install scikit-image\nRUN conda install scikit-learn\nRUN conda install redis\nRUN conda install Pillow\nRUN conda install pytorch=0.3.1 torchvision cuda90 -c pytorch\nRUN conda install msgpack\nRUN conda install -c conda-forge google-cloud-storage\nRUN conda install cython\nRUN conda install -c auto editdistance\n\nRUN conda install -c menpo opencv3\nRUN conda install pip && ln -s /opt/conda/bin/pip /usr/bin/pip\nRUN conda install setuptools\n\nENV PATH /opt/conda/bin:/usr/local/nvidia/bin:/usr/local/cuda/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\n\nCOPY dlinputs /tmp/dlinputs\nRUN cd /tmp/dlinputs && python setup.py install && rm -rf /tmp/dlinputs\nCOPY dltrainers /tmp/dltrainers\nRUN cd /tmp/dltrainers && python setup.py install && rm -rf /tmp/dltrainers\nCOPY dlmodels /tmp/dlmodels\nRUN cd /tmp/dlmodels && python setup.py install && rm -rf /tmp/dlmodels\nCOPY cctc /tmp/cctc\nRUN cd /tmp/cctc && python setup.py install && rm -rf /tmp/cctc\nCOPY ocrobin /tmp/ocrobin\nRUN cd /tmp/ocrobin && python setup.py install && rm -rf /tmp/ocrobin\nCOPY ocrodeg /tmp/ocrodeg\nRUN cd /tmp/ocrodeg && python setup.py install && rm -rf /tmp/ocrodeg\nCOPY ocroline /tmp/ocroline\nRUN cd /tmp/ocroline && python setup.py install && rm -rf /tmp/ocroline\nCOPY ocrorot /tmp/ocrorot\nRUN cd /tmp/ocrorot && python setup.py install && rm -rf /tmp/ocrorot\nCOPY ocroseg /tmp/ocroseg\nRUN cd /tmp/ocroseg && python setup.py install && rm -rf /tmp/ocroseg\n\nENV USER user\nENV HOME /home/$USER\nENV GID 1000\nENV UID 1000\n\nENV TERM xterm\nENV LD_LIBRARY_PATH /usr/local/nvidia/lib:/usr/local/nvidia/lib64\nENV NVIDIA_DRIVER_CAPABILITIES compute,utility\n\nCOPY nginx.conf /etc/nginx\nEXPOSE 3218\n\nRUN mkdir -p $HOME && groupadd -g $GID -r $USER && useradd --no-log-init -u $UID -r -g $USER $USER\n\nRUN mkdir -p $HOME/.jupyter $HOME/.vnc $HOME/.ssh\nADD jupyter_config/* $HOME/.jupyter/\nADD vnc_config/* $HOME/.vnc/\nADD scripts/* /usr/local/bin/\n\nRUN true \\\n    && echo \". /opt/conda/etc/profile.d/conda.sh\" >> $HOME/.bashrc \\\n    && echo \"conda activate base\" >> $HOME/.bashrc \\\n    && chown -R $USER.$USER $HOME\nRUN echo 'user ALL=(ALL:ALL) NOPASSWD:ALL' >> /etc/sudoers\n\nUSER $UID\nENTRYPOINT [\"runcmd\"]\n"
}