{
  "startTime": 1674249899570,
  "endTime": 1674249900124,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 32,
        "lineEnd": 32,
        "columnStart": 4,
        "columnEnd": 50
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 89,
        "lineEnd": 89,
        "columnStart": 4,
        "columnEnd": 78
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 103,
        "lineEnd": 103,
        "columnStart": 4,
        "columnEnd": 105
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 11,
        "lineEnd": 11,
        "columnStart": 4,
        "columnEnd": 34
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 14,
        "lineEnd": 14,
        "columnStart": 4,
        "columnEnd": 55
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 28,
        "lineEnd": 28,
        "columnStart": 4,
        "columnEnd": 26
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 31,
        "lineEnd": 31,
        "columnStart": 4,
        "columnEnd": 28
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 35,
        "lineEnd": 35,
        "columnStart": 4,
        "columnEnd": 29
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 44,
        "lineEnd": 47,
        "columnStart": 4,
        "columnEnd": 28
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 52,
        "lineEnd": 52,
        "columnStart": 4,
        "columnEnd": 37
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 67,
        "lineEnd": 67,
        "columnStart": 4,
        "columnEnd": 62
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 68,
        "lineEnd": 68,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 79,
        "lineEnd": 81,
        "columnStart": 4,
        "columnEnd": 34
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 84,
        "lineEnd": 84,
        "columnStart": 4,
        "columnEnd": 49
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 87,
        "lineEnd": 87,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 11,
        "lineEnd": 11,
        "columnStart": 4,
        "columnEnd": 34
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 14,
        "lineEnd": 14,
        "columnStart": 4,
        "columnEnd": 55
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 28,
        "lineEnd": 28,
        "columnStart": 4,
        "columnEnd": 26
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 31,
        "lineEnd": 31,
        "columnStart": 4,
        "columnEnd": 28
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 35,
        "lineEnd": 35,
        "columnStart": 4,
        "columnEnd": 29
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 52,
        "lineEnd": 52,
        "columnStart": 4,
        "columnEnd": 37
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 67,
        "lineEnd": 67,
        "columnStart": 4,
        "columnEnd": 62
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 68,
        "lineEnd": 68,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 79,
        "lineEnd": 81,
        "columnStart": 4,
        "columnEnd": 34
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 84,
        "lineEnd": 84,
        "columnStart": 4,
        "columnEnd": 49
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 11,
        "lineEnd": 11,
        "columnStart": 4,
        "columnEnd": 34
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 14,
        "lineEnd": 14,
        "columnStart": 4,
        "columnEnd": 55
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 28,
        "lineEnd": 28,
        "columnStart": 4,
        "columnEnd": 26
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 31,
        "lineEnd": 31,
        "columnStart": 4,
        "columnEnd": 28
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 35,
        "lineEnd": 35,
        "columnStart": 4,
        "columnEnd": 29
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 44,
        "lineEnd": 47,
        "columnStart": 4,
        "columnEnd": 28
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 52,
        "lineEnd": 52,
        "columnStart": 4,
        "columnEnd": 37
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 67,
        "lineEnd": 67,
        "columnStart": 4,
        "columnEnd": 62
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 68,
        "lineEnd": 68,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 79,
        "lineEnd": 81,
        "columnStart": 4,
        "columnEnd": 34
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 84,
        "lineEnd": 84,
        "columnStart": 4,
        "columnEnd": 49
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 87,
        "lineEnd": 87,
        "columnStart": 4,
        "columnEnd": 27
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 11,
        "lineEnd": 11,
        "columnStart": 4,
        "columnEnd": 58
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 14,
        "lineEnd": 14,
        "columnStart": 4,
        "columnEnd": 79
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 28,
        "lineEnd": 28,
        "columnStart": 4,
        "columnEnd": 50
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 31,
        "lineEnd": 31,
        "columnStart": 4,
        "columnEnd": 52
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 35,
        "lineEnd": 35,
        "columnStart": 4,
        "columnEnd": 53
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 52,
        "lineEnd": 52,
        "columnStart": 4,
        "columnEnd": 61
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 67,
        "lineEnd": 67,
        "columnStart": 4,
        "columnEnd": 86
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 68,
        "lineEnd": 68,
        "columnStart": 4,
        "columnEnd": 51
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 79,
        "lineEnd": 81,
        "columnStart": 4,
        "columnEnd": 34
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 84,
        "lineEnd": 84,
        "columnStart": 4,
        "columnEnd": 73
      }
    }
  ],
  "repairedDockerfile": "FROM ubuntu:18.04 as base\nMAINTAINER Joel Martin <github@martintribe.org>\n\n##########################################################\n# General requirements for testing or common across many\n# implementations\n##########################################################\n\nRUN apt-get -y update\n\n# Required for running tests\nRUN apt-get -y --no-install-recommends install make python && rm -rf /var/lib/apt/lists/*;\n\n# Some typical implementation and test requirements\nRUN apt-get -y --no-install-recommends install curl libreadline-dev libedit-dev && rm -rf /var/lib/apt/lists/*;\n\nRUN mkdir -p /mal\nWORKDIR /mal\n\n##########################################################\n# Specific implementation requirements\n##########################################################\n\n#\n# node\n#\n\n# For building node modules\nRUN apt-get -y --no-install-recommends install g++ && rm -rf /var/lib/apt/lists/*;\n\n# Add nodesource apt repo config for 10.x stable\nRUN apt-get -y --no-install-recommends install gnupg && rm -rf /var/lib/apt/lists/*;\nRUN curl -f -sL https://deb.nodesource.com/setup_10.x | bash -\n\n# Install nodejs\nRUN apt-get -y --no-install-recommends install nodejs && rm -rf /var/lib/apt/lists/*;\n\nENV NPM_CONFIG_CACHE /mal/.npm\n\n#\n# wace build and runtime libs\n#\nRUN dpkg --add-architecture i386 && \\\n    apt-get -y update && \\\n    apt-get -y --no-install-recommends install \\\n        lib32gcc-8-dev libsdl2-dev:i386 libsdl2-image-dev:i386 \\\n        libedit-dev:i386 freeglut3-dev:i386 lib32gcc-7-dev \\\n        libreadline-dev:i386 && rm -rf /var/lib/apt/lists/*;\n\n#\n# binaryen\n#\nRUN apt-get -y --no-install-recommends install git-core cmake && rm -rf /var/lib/apt/lists/*;\n\nRUN git clone https://github.com/WebAssembly/binaryen/ && \\\n    cd binaryen && \\\n    cmake . && make && \\\n    make install && \\\n    cd .. && \\\n    rm -r binaryen\n\n#########################################################################\nFROM base as build_runtimes\n\n#\n# clang/LLVM and rust (for building wasmtime)\n#\nRUN apt-get -y --no-install-recommends install llvm-3.9-dev libclang-3.9-dev clang-3.9 && rm -rf /var/lib/apt/lists/*;\nRUN apt-get -y --no-install-recommends install curl && \\\n    curl https://sh.rustup.rs -sSf > /tmp/rustup.sh && \\\n    sh /tmp/rustup.sh -y && rm -rf /var/lib/apt/lists/*;\nENV PATH $PATH:/root/.cargo/bin\n\n#\n# pypy / rpython (for building warpy)\n#\n\n# rpython deps\nENV DEBIAN_FRONTEND=noninteractive\nRUN apt-get -y --no-install-recommends install libffi-dev pkg-config libz-dev \\\n    libbz2-dev libsqlite3-dev libncurses-dev libexpat1-dev \\\n    libssl-dev libgdbm-dev tcl-dev && rm -rf /var/lib/apt/lists/*;\n\n# install pypy, build and install pypy/rpython, remove prior pypy\nRUN apt-get -y --no-install-recommends install software-properties-common && \\\n    add-apt-repository ppa:pypy && \\\n    apt-get -y update && \\\n    apt-get -y --no-install-recommends install pypy && \\\n    mkdir -p /opt/pypy && \\\n    curl -f -L https://bitbucket.org/pypy/pypy/downloads/pypy2-v6.0.0-src.tar.bz2 \\\n        | tar -xjf - -C /opt/pypy/ --strip-components=1 && \\\n    cd /opt/pypy && make && \\\n    chmod -R ugo+rw /opt/pypy/rpython/_cache && \\\n    ln -sf /opt/pypy/rpython/bin/rpython /usr/local/bin/rpython && \\\n    ln -sf /opt/pypy/pypy-c /usr/local/bin/pypy && \\\n    rm -rf /tmp/usession* && \\\n    ln -sf /opt/pypy/pypy/goal/pypy-c /usr/local/bin/pypy && \\\n    apt-get -y autoremove pypy && rm -rf /var/lib/apt/lists/*;\n\n\n#\n# wasi-sdk (C/C++ -> wasm+wasi)\n#\nRUN curl -f -LO https://github.com/CraneStation/wasi-sdk/releases/download/wasi-sdk-3/wasi-sdk_3.0_amd64.deb && \\\n    dpkg -i wasi-sdk_3.0_amd64.deb && \\\n    rm wasi-sdk_3.0_amd64.deb\n\n#\n# warpy\n#\nRUN git clone https://github.com/kanaka/warpy/ && \\\n    cd warpy && \\\n    make warpy-nojit && \\\n    cp warpy-nojit /usr/bin/warpy\n\n#\n# wac/wace\n#\nRUN git clone https://github.com/kanaka/wac/ && \\\n    cd wac  && \\\n    make USE_SDL= wac wax wace && \\\n    cp wac wax wace /usr/bin\n\n#\n# wasmtime\n#\nRUN git clone --recursive https://github.com/CraneStation/wasmtime && \\\n    cd wasmtime && \\\n    cargo build --release && \\\n    cp target/release/wasmtime /usr/bin/ && \\\n    cp target/release/wasm2obj /usr/bin/\n\n\n#########################################################################\nFROM base as wasm\n\nCOPY --from=build_runtimes /usr/bin/wac /usr/bin/wac\nCOPY --from=build_runtimes /usr/bin/wax /usr/bin/wax\nCOPY --from=build_runtimes /usr/bin/wace /usr/bin/wace\nCOPY --from=build_runtimes /usr/bin/warpy /usr/bin/warpy\nCOPY --from=build_runtimes /usr/bin/wasmtime /usr/bin/wasmtime\nCOPY --from=build_runtimes /usr/bin/wasm2obj /usr/bin/wasm2obj\n\n"
}