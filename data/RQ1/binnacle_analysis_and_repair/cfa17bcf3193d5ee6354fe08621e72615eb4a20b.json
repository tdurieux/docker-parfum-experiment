{
  "startTime": 1674246822630,
  "endTime": 1674246822780,
  "originalSmells": [
    {
      "rule": "configureShouldUseBuildFlag",
      "position": {
        "lineStart": 56,
        "lineEnd": 56,
        "columnStart": 4,
        "columnEnd": 15
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM peterevans/trusty-gcloud:1.1\n\nMAINTAINER Peter Evans <pete.evans@gmail.com>\n\nENV NOMINATIM_VERSION 2.5.1\n\n# Let the container know that there is no TTY\nENV DEBIAN_FRONTEND noninteractive\n\n# Set locale\nENV LANG C.UTF-8\nRUN locale-gen en_US.UTF-8 \\\n && update-locale LANG=en_US.UTF-8\n\n# Install packages\nRUN apt-get -y update \\\n && apt-get install -y -qq --no-install-recommends \\\n    build-essential \\\n    libxml2-dev \\\n    libpq-dev \\\n    libbz2-dev \\\n    libtool \\\n    automake \\\n    libproj-dev \\\n    libboost-dev \\\n    libboost-system-dev \\\n    libboost-filesystem-dev \\\n    libboost-thread-dev \\\n    libexpat-dev \\\n    gcc \\\n    proj-bin \\\n    libgeos-c1 \\\n    libgeos++-dev \\\n    php5 \\\n    php-pear \\\n    php5-pgsql \\\n    php5-json \\\n    php-db \\\n    libapache2-mod-php5 \\\n    postgresql \\\n    postgis \\\n    postgresql-contrib \\\n    postgresql-9.3-postgis-2.1 \\\n    postgresql-server-dev-9.3 \\\n    curl \\\n    git \\\n && apt-get clean \\\n && rm -rf /var/lib/apt/lists/* \\\n && rm -rf /tmp/* /var/tmp/*\n\n# Build Nominatim\nRUN mkdir /nominatim \\\n && cd /nominatim \\\n && git clone --branch v$NOMINATIM_VERSION --depth 1 --recursive git://github.com/twain47/Nominatim.git ./src \\\n && cd src \\\n && ./autogen.sh \\\n && ./configure --build=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\" \\\n && make\n\n# Create Nominatim website\nCOPY local.php /nominatim/src/settings/local.php\nRUN rm -rf /var/www/html/* \\\n && /nominatim/src/utils/setup.php --create-website /var/www/html\n\n# Configure Apache\nCOPY nominatim.conf /etc/apache2/sites-enabled/000-default.conf\n\n# Allow remote connections to PostgreSQL\nRUN echo \"host all  all    0.0.0.0/0  trust\" >> /etc/postgresql/9.3/main/pg_hba.conf \\\n && echo \"listen_addresses='*'\" >> /etc/postgresql/9.3/main/postgresql.conf\n\n# Set the entrypoint\nCOPY docker-entrypoint.sh /\nRUN chmod +x /docker-entrypoint.sh\nENTRYPOINT [\"/docker-entrypoint.sh\"]\n\nEXPOSE 5432\nEXPOSE 8080\n"
}