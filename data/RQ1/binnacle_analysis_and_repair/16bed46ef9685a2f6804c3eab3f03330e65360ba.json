{
  "startTime": 1674240031815,
  "endTime": 1674240032129,
  "originalSmells": [
    {
      "rule": "yumInstallRmVarCacheYum",
      "position": {
        "lineStart": 13,
        "lineEnd": 13,
        "columnStart": 4,
        "columnEnd": 91
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM twinsen/os-jvm:centos6-openjdk8\n\nMAINTAINER twinsen <ruoyu-chen@foxmail.com>\n\nUSER root\n\nENV HADOOP_HOME=/root/hadoop\nENV HADOOP_CONF_DIR=$HADOOP_HOME/etc/hadoop\nENV LD_LIBRARY_PATH=$LD_LIBRARY_PATH:$HADOOP_HOME/lib/native/:/root/protobuf/lib\nENV PATH=$PATH:/root/protobuf/bin:$HADOOP_HOME/bin:$HADOOP_HOME/sbin:.\n\n# 1. 安装 OpenSSH, OpenSSL, bzip2-devel\n# 2. 同时配置SSH免密钥登陆\nRUN yum install -y openssh openssh-server openssh-clients openssl openssl-devel bzip2-devel && \\\n    yum clean all && \\\n    ssh-keygen -t rsa -f ~/.ssh/id_rsa -P '' && \\\n    cat ~/.ssh/id_rsa.pub >> ~/.ssh/authorized_keys && rm -rf /var/cache/yum\n\nADD config/other/ssh_config /root/.ssh/config\nRUN chmod 600 /root/.ssh/config && \\\n    chown root:root /root/.ssh/config\n\n#安装Protocol Buffer, Hadoop\nRUN wget https://github.com/ruoyu-chen/hadoop-docker/raw/master/dist/hadoop-2.7.2.tar.gz && \\\n\ttar -xzvf hadoop-2.7.2.tar.gz -C /root/ && \\\n    mv /root/hadoop-2.7.2 $HADOOP_HOME && \\\n    rm -rf hadoop-2.7.2.tar.gz && \\\n    rm -rf $HADOOP_HOME/bin/*.cmd && \\\n    rm -rf $HADOOP_HOME/sbin/*.cmd && \\\n    rm -rf $HADOOP_HOME/sbin/*all* && \\\n    rm -rf $HADOOP_CONF_DIR/*.cmd && \\\n    rm -rf $HADOOP_CONF_DIR/*.template && \\\n    rm -rf $HADOOP_CONF_DIR/*.example && \\\n    wget https://github.com/ruoyu-chen/hadoop-docker/raw/master/dist/protobuf.tar.gz && \\\n\ttar -xzvf protobuf.tar.gz -C /root/ && \\\n\trm -rf protobuf.tar.gz\t\n\n#拷贝环境变量配置文件\nADD config/other/bashrc /root/.bashrc\n\n#拷贝Hadoop配置文件\nADD config/hadoop/* $HADOOP_HOME/etc/hadoop/\n\n#建立HDFS目录，日志目录. 格式化NameNode\n#RUN mkdir -p /works/hadoop/dfs/name && \\\n#    mkdir -p /works/hadoop/dfs/data && \\\n#    mkdir -p /works/hadoop/dfs/namesecondary && \\\n#    mkdir $HADOOP_HOME/logs && \\\n#    $HADOOP_HOME/bin/hdfs namenode -format\n\nCMD [ \"sh\", \"-c\", \"service sshd start; bash\"]"
}