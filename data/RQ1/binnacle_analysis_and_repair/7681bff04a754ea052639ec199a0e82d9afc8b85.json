{
  "startTime": 1674238501852,
  "endTime": 1674238502131,
  "originalSmells": [
    {
      "rule": "configureShouldUseBuildFlag",
      "position": {
        "lineStart": 35,
        "lineEnd": 35,
        "columnStart": 4,
        "columnEnd": 48
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 15,
        "lineEnd": 15,
        "columnStart": 4,
        "columnEnd": 39
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 16,
        "lineEnd": 16,
        "columnStart": 4,
        "columnEnd": 49
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 17,
        "lineEnd": 18,
        "columnStart": 4,
        "columnEnd": 55
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 19,
        "lineEnd": 19,
        "columnStart": 4,
        "columnEnd": 33
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 20,
        "lineEnd": 20,
        "columnStart": 4,
        "columnEnd": 33
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 24,
        "lineEnd": 24,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 52,
        "lineEnd": 52,
        "columnStart": 9,
        "columnEnd": 35
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 15,
        "lineEnd": 15,
        "columnStart": 4,
        "columnEnd": 39
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 16,
        "lineEnd": 16,
        "columnStart": 4,
        "columnEnd": 49
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 17,
        "lineEnd": 18,
        "columnStart": 4,
        "columnEnd": 55
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 19,
        "lineEnd": 19,
        "columnStart": 4,
        "columnEnd": 33
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 20,
        "lineEnd": 20,
        "columnStart": 4,
        "columnEnd": 33
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 24,
        "lineEnd": 24,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 52,
        "lineEnd": 52,
        "columnStart": 9,
        "columnEnd": 35
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 15,
        "lineEnd": 15,
        "columnStart": 4,
        "columnEnd": 39
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 16,
        "lineEnd": 16,
        "columnStart": 4,
        "columnEnd": 49
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 17,
        "lineEnd": 18,
        "columnStart": 4,
        "columnEnd": 55
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 19,
        "lineEnd": 19,
        "columnStart": 4,
        "columnEnd": 33
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 20,
        "lineEnd": 20,
        "columnStart": 4,
        "columnEnd": 33
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 24,
        "lineEnd": 24,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 52,
        "lineEnd": 52,
        "columnStart": 9,
        "columnEnd": 35
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 15,
        "lineEnd": 15,
        "columnStart": 4,
        "columnEnd": 63
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 16,
        "lineEnd": 16,
        "columnStart": 4,
        "columnEnd": 73
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 17,
        "lineEnd": 18,
        "columnStart": 4,
        "columnEnd": 55
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 19,
        "lineEnd": 19,
        "columnStart": 4,
        "columnEnd": 57
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 20,
        "lineEnd": 20,
        "columnStart": 4,
        "columnEnd": 57
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 24,
        "lineEnd": 24,
        "columnStart": 4,
        "columnEnd": 54
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 52,
        "lineEnd": 52,
        "columnStart": 9,
        "columnEnd": 59
      }
    }
  ],
  "repairedDockerfile": "FROM ubuntu:14.04\nMAINTAINER Matthieu Lagacherie - Yannick Drant\n\nUSER root\n\n### USER\n\nRUN adduser pom --disabled-password --gecos \"\" --home /pom --shell /bin/bash\nRUN adduser pom sudo\nRUN echo '%sudo ALL=(ALL) NOPASSWD:ALL' >> /etc/sudoers\n\n### BASE PACKAGES\n\nRUN apt-get update\nRUN apt-get upgrade -y\nRUN apt-get install --no-install-recommends -y screen cmake vim && rm -rf /var/lib/apt/lists/*;\nRUN apt-get install --no-install-recommends -y software-properties-common && rm -rf /var/lib/apt/lists/*;\nRUN apt-get install --no-install-recommends -y curl flex bison zlib1g-dev libreadline6-dev gcc make supervisor git \\\n                    openssh-server openssh-client rsync && rm -rf /var/lib/apt/lists/*;\nRUN apt-get install --no-install-recommends -y python-dev && rm -rf /var/lib/apt/lists/*;\nRUN apt-get install --no-install-recommends -y pgxnclient && rm -rf /var/lib/apt/lists/*;\n\n### LOCALE\n\nRUN apt-get install --no-install-recommends -y locales && localedef -i fr_FR -c -f UTF-8 -A /usr/share/locale/locale.alias fr_FR.UTF-8 && rm -rf /var/lib/apt/lists/*;\nRUN locale-gen fr_FR.UTF-8\nENV LANG fr_FR.UTF-8\nENV LANGUAGE fr_FR:fr\nENV LC_ALL fr_FR.UTF-8\n\n### PGXL\n\nWORKDIR /root\nRUN git clone https://github.com/postmind-net/postgres-xl.git pgxl --depth 1\nWORKDIR /root/pgxl\nRUN ./configure --build=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\" --with-python --prefix /opt/pgxl\n# ./configure --enable-cassert --enable-debug CFLAGS=\"-ggdb -Og -fno-omit-frame-pointer\" --with-python --prefix /opt/pgxl\nRUN make -j 4\nWORKDIR /root/pgxl/contrib\nRUN make -j 4\nWORKDIR /root/pgxl\nRUN make install\nWORKDIR /root/pgxl/contrib\nRUN make install\n\nENV PATH /opt/pgxl/bin:$PATH\nENV PGDATA /pom/pgxc\n\n### PG EXTENSIONS\n\nRUN pgxnclient install json_enhancements\n\nRUN sudo apt-get install --no-install-recommends -y haproxy && rm -rf /var/lib/apt/lists/*;\n\n### LD\n\nRUN echo \"/usr/local/lib\" >> /etc/ld.so.conf\nRUN echo \"/opt/pgxl/lib\" >> /etc/ld.so.conf\nRUN ldconfig\n\n### CONF\n\nRUN mkdir -p /var/log/supervisor\nCOPY etc/supervisor/conf.d/supervisor.conf /etc/supervisor/conf.d/\nCOPY etc/sysctl.conf /etc/sysctl.conf\nCOPY etc/environment /etc/environment\n\n### SSH\nRUN echo \"   StrictHostKeyChecking no\" >> /etc/ssh/ssh_config\nRUN sudo /etc/init.d/ssh start && sudo /etc/init.d/ssh stop\n\n### USER\n\nADD . /app\nRUN chown -R pom:pom /app /pom\nUSER pom\nWORKDIR /pom\nENV HOME /pom\n\nENTRYPOINT [\"/app/entrypoint.sh\"]\n\nEXPOSE 5432\n\nCMD [\"supervisor\"]\n\n"
}