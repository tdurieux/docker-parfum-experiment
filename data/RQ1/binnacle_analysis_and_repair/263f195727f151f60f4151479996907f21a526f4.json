{
  "startTime": 1674641702091,
  "endTime": 1674641702403,
  "originalSmells": [
    {
      "rule": "wgetUseHttpsUrl",
      "position": {
        "lineStart": 52,
        "lineEnd": 52,
        "columnStart": 4,
        "columnEnd": 80
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 33,
        "lineEnd": 33,
        "columnStart": 4,
        "columnEnd": 32
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 86,
        "lineEnd": 86,
        "columnStart": 4,
        "columnEnd": 60
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 14,
        "lineEnd": 14,
        "columnStart": 4,
        "columnEnd": 114
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 16,
        "lineEnd": 16,
        "columnStart": 4,
        "columnEnd": 37
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 17,
        "lineEnd": 27,
        "columnStart": 4,
        "columnEnd": 22
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 28,
        "lineEnd": 28,
        "columnStart": 4,
        "columnEnd": 76
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 39,
        "lineEnd": 39,
        "columnStart": 4,
        "columnEnd": 45
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 77,
        "lineEnd": 77,
        "columnStart": 22,
        "columnEnd": 45
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 80,
        "lineEnd": 80,
        "columnStart": 4,
        "columnEnd": 47
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 82,
        "lineEnd": 82,
        "columnStart": 4,
        "columnEnd": 37
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 14,
        "lineEnd": 14,
        "columnStart": 4,
        "columnEnd": 114
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 16,
        "lineEnd": 16,
        "columnStart": 4,
        "columnEnd": 37
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 17,
        "lineEnd": 27,
        "columnStart": 4,
        "columnEnd": 22
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 28,
        "lineEnd": 28,
        "columnStart": 4,
        "columnEnd": 76
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 80,
        "lineEnd": 80,
        "columnStart": 4,
        "columnEnd": 47
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 82,
        "lineEnd": 82,
        "columnStart": 4,
        "columnEnd": 37
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 14,
        "lineEnd": 14,
        "columnStart": 4,
        "columnEnd": 114
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 16,
        "lineEnd": 16,
        "columnStart": 4,
        "columnEnd": 37
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 17,
        "lineEnd": 27,
        "columnStart": 4,
        "columnEnd": 22
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 28,
        "lineEnd": 28,
        "columnStart": 4,
        "columnEnd": 76
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 77,
        "lineEnd": 77,
        "columnStart": 22,
        "columnEnd": 45
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 80,
        "lineEnd": 80,
        "columnStart": 4,
        "columnEnd": 47
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 82,
        "lineEnd": 82,
        "columnStart": 4,
        "columnEnd": 37
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 14,
        "lineEnd": 14,
        "columnStart": 4,
        "columnEnd": 138
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 16,
        "lineEnd": 16,
        "columnStart": 4,
        "columnEnd": 61
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 17,
        "lineEnd": 27,
        "columnStart": 4,
        "columnEnd": 22
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 28,
        "lineEnd": 28,
        "columnStart": 4,
        "columnEnd": 100
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 80,
        "lineEnd": 80,
        "columnStart": 4,
        "columnEnd": 71
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 82,
        "lineEnd": 82,
        "columnStart": 4,
        "columnEnd": 61
      }
    }
  ],
  "repairedDockerfile": "#jFROM microsoft/dotnet:2.1-sdk AS pisces_build\n#\n#COPY --from=happy_build /opt /opt\n#\n#jWORKDIR /app\n#\n##get source\n#\n\nFROM ubuntu:16.04 AS happy_build\n\nRUN apt-get update && apt-get upgrade -y\n#tjd+\n#RUN apt-get install build-essential zlib1g-dev libbz2-dev pkg-config cmake libncurses5-dev autoconf -y\nRUN apt-get install --no-install-recommends build-essential zlib1g-dev liblzo2-dev libbz2-dev pkg-config cmake libncurses5-dev autoconf -y && rm -rf /var/lib/apt/lists/*;\n#tjd-\nRUN apt-get install --no-install-recommends git bzip2 wget -y && rm -rf /var/lib/apt/lists/*;\nRUN apt-get install --no-install-recommends python2.7 python2.7-dev python \\\n                    python-setuptools \\\n                    python-pip \\\n                    python-psutil \\\n                    cython \\\n                    python-numpy \\\n                    python-pandas \\\n                    python-distribute \\\n                    python-pysam \\\n                    python-scipy \\\n                    -y && rm -rf /var/lib/apt/lists/*;\nRUN apt-get install --no-install-recommends software-properties-common python-software-properties -y && rm -rf /var/lib/apt/lists/*;\nRUN apt-get clean -y\n\n#tjd+\n#RUN pip install bx-python\nRUN pip install --no-cache-dir bx-python==0.7.3\n#tjd-\n\nRUN echo oracle-java8-installer shared/accepted-oracle-license-v1-1 select true | debconf-set-selections && \\\n    add-apt-repository -y ppa:webupd8team/java && \\\n    apt-get update && \\\n    apt-get install --no-install-recommends -y oracle-java8-installer && \\\n    rm -rf /var/lib/apt/lists/* && \\\n    rm -rf /var/cache/oracle-jdk8-installer\n\n# copy git repository into the image\nRUN mkdir -p /opt/hap.py-source\nCOPY . /opt/hap.py-source/\n\n# make minimal HG19 reference sequence\nRUN mkdir -p /opt/hap.py-data\n\n# get + install ant\nWORKDIR /opt\nRUN wget https://archive.apache.org/dist/ant/binaries/apache-ant-1.9.7-bin.tar.gz && \\\n    tar xzf apache-ant-1.9.7-bin.tar.gz && \\\n    rm apache-ant-1.9.7-bin.tar.gz\nENV PATH $PATH:/opt/apache-ant-1.9.7/bin\n\n# run hap.py installer in the image, don't run tests since we don't have a reference file\nWORKDIR /opt/hap.py-source\nRUN python install.py /opt/hap.py --with-rtgtools --no-tests\n\n## download HG19 reference data\n## This downloads from UCSC\n#WORKDIR /opt/hap.py-data\n#ENV PATH $PATH:/opt/hap.py/bin\n#RUN /opt/hap.py-source/src/sh/make_hg19.sh && samtools faidx /opt/hap.py-data/hg19.fa\n## Run tests\n#ENV HG19 /opt/hap.py-data/hg19.fa\n#WORKDIR /opt/hap.py\n#RUN /opt/hap.py-source/src/sh/run_tests.sh\n#\n## remove source folder\n#WORKDIR /\n#RUN rm -rf /opt/hap.py-source\n\n\n# Install Dotnet 2.1\nRUN apt-get update && apt-get -y --no-install-recommends install wget && rm -rf /var/lib/apt/lists/*;\nRUN wget -q https://packages.microsoft.com/config/ubuntu/16.04/packages-microsoft-prod.deb\nRUN dpkg -i packages-microsoft-prod.deb\nRUN apt-get -y --no-install-recommends install apt-transport-https curl && rm -rf /var/lib/apt/lists/*;\nRUN apt-get update\nRUN apt-get -y --no-install-recommends install dotnet-sdk-2.1 && rm -rf /var/lib/apt/lists/*;\n\nWORKDIR /app\nRUN git clone https://github.com/Illumina/Pisces.git\nRUN tar -xzf Pisces/binaries/5.2.5.20/Pisces_5.2.5.20.tar.gz && rm Pisces/binaries/5.2.5.20/Pisces_5.2.5.20.tar.gz\n\n# Now we should have\n# /opt/hap.py/bin/hap.py\n# dotnet /app/Pisces_5.2.5.20/Pisces.dll\n\nWORKDIR /app\nCOPY run_analysis.sh /app\n\n\n"
}