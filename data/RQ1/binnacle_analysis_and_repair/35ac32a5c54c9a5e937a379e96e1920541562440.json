{
  "startTime": 1674249304041,
  "endTime": 1674249304229,
  "originalSmells": [
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 13,
        "lineEnd": 13,
        "columnStart": 4,
        "columnEnd": 24
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 32,
        "lineEnd": 32,
        "columnStart": 4,
        "columnEnd": 22
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 6,
        "lineEnd": 10,
        "columnStart": 5,
        "columnEnd": 24
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "ARG SLURM_VER=17.02\nFROM brianmay/slurm:${SLURM_VER}\nMAINTAINER brian@linuxpenguins.xyz\n\n# Install OS dependencies\nRUN apt-get update \\\n  && apt-get install --no-install-recommends -y \\\n    gcc sudo libcrack2-dev \\\n    apache2 \\\n    apache2-dev \\\n    libapache2-mod-shib2 \\\n  && rm -rf /var/lib/apt/lists/*\n\nRUN pip install --no-cache-dir mod_wsgi && \\\n  mod_wsgi-express module-config > /etc/apache2/mods-available/wsgi.load && \\\n  a2enmod wsgi\n\n#RUN wget -O /tmp/mod_wsgi.tar.gz https://storage.googleapis.com/google-code-archive-downloads/v2/code.google.com/modwsgi/mod_wsgi-3.4.tar.gz && \\\n#    tar -C /tmp -xvf /tmp/mod_wsgi.tar.gz && \\\n#    rm /tmp/mod_wsgi.tar.gz &&\n#    cd /tmp/mod_wsgi-3.4 &&\n#    ln -s /usr/lib/libpython3.6m.so /usr/lib/libpython3.6.so && \\\n#    ./configure --with-python=/usr/local/bin/python3.6 --with-apxs=/usr/bin/apxs && \\\n#    make && make install clean && \\\n#    cd /srv && \\\n#    rm -rf /tmp/mod_wsgi-3.4\n\n# Make application directory\nRUN mkdir /opt/karaage /opt/karaage/requirements\nWORKDIR /opt/karaage\n\n# Install our requirements.\nRUN pip install --no-cache-dir pipenv\nADD Pipfile Pipfile.lock /opt/karaage/\nRUN pipenv install --system --deploy\n\n# Copy all our files into the image.\nCOPY . /opt/karaage/\nCOPY conf/karaage3-wsgi.conf /etc/apache2/conf-available/karaage3-wsgi.conf\nCOPY conf/ports.conf /etc/apache2/ports.conf\nCOPY conf/000-default.conf /etc/apache2/sites-available/000-default.conf\nRUN a2enconf karaage3-wsgi\n\n# Setup access to version information\nARG BUILD_DATE=\nARG VCS_REF=\nENV BUILD_DATE=${BUILD_DATE}\nENV VCS_REF=${VCS_REF}\nENV SLURM_VER=${SLURM_VER}\n\n# Specify the command to run when the image is run.\nEXPOSE 443\nVOLUME '/etc/shibboleth' '/var/log'\nCMD /opt/karaage/scripts/docker.sh apache\n"
}