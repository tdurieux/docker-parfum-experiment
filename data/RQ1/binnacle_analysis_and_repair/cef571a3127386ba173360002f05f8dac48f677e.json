{
  "startTime": 1674244145917,
  "endTime": 1674244146205,
  "originalSmells": [
    {
      "rule": "configureShouldUseBuildFlag",
      "position": {
        "lineStart": 61,
        "lineEnd": 61,
        "columnStart": 4,
        "columnEnd": 40
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM php:7.1-fpm-alpine\nLABEL maintainer=\"Alterway <iac@alterway.fr>\"\n\nRUN echo \"http://dl-cdn.alpinelinux.org/alpine/v3.6/community\" >> /etc/apk/repositories && \\\n    echo \"http://dl-cdn.alpinelinux.org/alpine/v3.6/main\" >> /etc/apk/repositories && \\\n    apk add --update --no-cache \\\n        git \\\n        subversion \\\n        curl \\\n        wget \\\n        ssmtp \\\n        mysql-client \\\n        mariadb-dev \\\n        openldap-dev \\\n        libldap \\\n        libssl1.0 \\\n        libsasl \\\n        freetype-dev \\\n        libjpeg-turbo-dev \\\n        libmcrypt-dev \\\n        libpng-dev \\\n        libxml2-dev \\\n        zlib-dev \\\n        php7-sqlite3 \\\n        php7-pdo_sqlite \\\n        sqlite-dev \\\n        php7-gmp \\\n        gmp-dev \\\n        php7-pear \\\n        ncurses-dev \\\n        icu-dev \\\n        libmemcached-dev \\\n        libcurl && \\\n    wget https://getcomposer.org/download/1.2.4/composer.phar -O /usr/local/bin/composer && \\\n    chmod a+rx /usr/local/bin/composer\n\nRUN docker-php-ext-configure ldap && \\\n    docker-php-ext-install ldap && \\\n    docker-php-ext-configure pdo_mysql --with-pdo-mysql=mysqlnd && \\\n    docker-php-ext-install pdo_mysql && \\\n    docker-php-ext-configure mysqli --with-mysqli=mysqlnd && \\\n    docker-php-ext-install mysqli && \\\n    docker-php-ext-install pdo_sqlite && \\\n    docker-php-ext-configure gd && \\\n    docker-php-ext-install gd && \\\n    docker-php-ext-install soap && \\\n    docker-php-ext-install intl && \\\n    docker-php-ext-install mcrypt && \\\n    docker-php-ext-install bcmath && \\\n    docker-php-ext-install mbstring && \\\n    docker-php-ext-install zip && \\\n    docker-php-ext-install pcntl && \\\n    docker-php-ext-install ftp && \\\n    docker-php-ext-install sockets && \\\n    docker-php-ext-install gmp\n\nADD http://www.zlib.net/zlib-1.2.11.tar.gz /tmp/zlib.tar.gz\nADD https://blackfire.io/api/v1/releases/probe/php/linux/amd64/71 /tmp/blackfire-probe.tar.gz\nRUN apk add --update --no-cache tar gcc libc-dev make && \\\n    tar zxpf /tmp/zlib.tar.gz -C /tmp && \\\n    cd /tmp/zlib-1.2.11 && \\\n    ./configure --build=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\" --prefix=/usr/local/zlib && \\\n    make && make install && \\\n    rm -Rf /tmp/zlib-1.2.11 && \\\n    rm /tmp/zlib.tar.gz && \\\n    tar zxpf /tmp/blackfire-probe.tar.gz -C /tmp && \\\n    mv /tmp/blackfire-*.so `php -r \"echo ini_get('extension_dir');\"`/blackfire.so && \\\n    rm /tmp/blackfire-probe.tar.gz && \\\n    apk del --purge tar gcc libc-dev make\n\nENV LOCALTIME Europe/Paris\nENV PHPFPM__access.format '\"%R - %u [%t] \\\"%m %r\\\" %s %l %Q %f\"'\n\nRUN rm $PHP_INI_DIR/conf.d/docker-php-ext* && \\\n    echo 'sendmail_path = /usr/sbin/ssmtp -t' >> $PHP_INI_DIR/conf.d/00-default.ini && \\\n    echo \"\\ninclude=/usr/local/etc/php-fpm.d/*.conf\" >> /usr/local/etc/php-fpm.conf && \\\n    mkdir -p /usr/local/etc/php-fpm.d && \\\n    chmod a+w -R $PHP_INI_DIR/conf.d/ /etc/ssmtp /usr/local/etc/php-fpm.d/\n\nCOPY docker-entrypoint.sh /entrypoint.sh\n\nWORKDIR /var/www\n\nENTRYPOINT [\"/entrypoint.sh\"]\nCMD [\"php-fpm\"]\n"
}