{
  "startTime": 1674246285662,
  "endTime": 1674246285744,
  "originalSmells": [
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 17,
        "lineEnd": 17,
        "columnStart": 22,
        "columnEnd": 191
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 17,
        "lineEnd": 17,
        "columnStart": 22,
        "columnEnd": 191
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM library/ubuntu:xenial\nMAINTAINER Mark Lilback <mark@lilback.com>\n\n# Define Postgres Versions\nARG pgversion=9.6\n\nENV PGDATA /opt/pg-data\nENV PGDIR /usr/lib/postgresql/${pgversion}/bin/\nENV PGVERSION ${pgversion}\n\n# Add the PostgreSQL PGP key to verify their Debian packages.\nRUN apt-key adv --keyserver hkp://p80.pool.sks-keyservers.net:80 --recv-keys B97B0AFCAA1A47F044F244A07FCC7D46ACCC4CF8\n\n# Add PostgreSQL's repository.\nRUN echo \"deb http://apt.postgresql.org/pub/repos/apt/ xenial-pgdg main\" > /etc/apt/sources.list.d/pgdg.list\n\n# Install packages and Postgres\nRUN apt-get update && apt-get install --no-install-recommends -y python-software-properties software-properties-common postgresql-${pgversion} postgresql-client-${pgversion} postgresql-contrib-${pgversion} libpq-dev && rm -rf /var/lib/apt/lists/*;\n\nRUN mkdir -p /opt/pg-data; chown -R postgres /opt/pg-data; chmod 700 /opt/pg-data\n\nRUN locale-gen en_US.UTF-8\n\n# Delete default cluster and create new cluster\nRUN pg_dropcluster ${pgversion} main\n#RUN pg_createcluster -d $PGDATA --locale=en_US.UTF-8 ${pgversion} main\n\n# Copy data file\nCOPY dataexpo.sql init.sh /opt/\n\n# Become user Postgres (superuser)\nUSER postgres\n\n# Copy connection configuration file\nCOPY pg_hba.conf postgresql.conf /etc/postgresql/${pgversion}/main/\nCOPY runpg.sh /var/lib/postgresql/runpg.sh\nRUN /opt/init.sh\n\n# Define environment variables\nENV LANG en_US.UTF-8\nENV LANGUAGE en_US.UTF-8\nENV LC_ALL en_US.UTF-8\n\nEXPOSE 5432\n\n# Execute Postgres setup script \"runpg.sh\"\nCMD [\"var/lib/postgresql/runpg.sh\", \"${pgversion}\"]\n\n# CMD [\"/usr/bin/pg_ctlcluster\", \"9.4\", \"main\", \"start\", \"--foreground\"]\n# CMD [\"/usr/lib/postgresql/${pgversion}/bin/postgres\", \"-D\", \"$PGDIR\", \"-c\", \"config_file=/etc/postgresql/${pg/main/postgresql.conf\"]\n\n"
}