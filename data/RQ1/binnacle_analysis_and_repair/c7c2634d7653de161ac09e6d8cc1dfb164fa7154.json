{
  "startTime": 1674235079057,
  "endTime": 1674235079190,
  "originalSmells": [
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 23,
        "lineEnd": 23,
        "columnStart": 4,
        "columnEnd": 62
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 11,
        "lineEnd": 20,
        "columnStart": 4,
        "columnEnd": 18
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 11,
        "lineEnd": 20,
        "columnStart": 4,
        "columnEnd": 18
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 11,
        "lineEnd": 20,
        "columnStart": 4,
        "columnEnd": 18
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 11,
        "lineEnd": 20,
        "columnStart": 4,
        "columnEnd": 18
      }
    }
  ],
  "repairedDockerfile": "FROM  supermy/docker-debian:7\n\nMAINTAINER JamesMo <springclick@gmail.com>\n\nENV GATEONE_REPO_URL https://github.com/liftoff/GateOne.git\n\n# Ensure everything is up-to-date\nENV DEBIAN_FRONTEND noninteractive\nRUN apt-get update --fix-missing && apt-get -y upgrade\n\n# Install dependencies\nRUN apt-get -y --no-install-recommends \\\n    install python-pip \\\n    python-imaging \\\n    python-setuptools \\\n    python-mutagen \\\n    python-pam \\\n    python-dev \\\n    git \\\n    telnet \\\n    openssh-client && \\\n    apt-get -y clean && \\\n    apt-get -q -y autoremove && rm -rf /var/lib/apt/lists/*;\nRUN pip install --no-cache-dir --upgrade futures tornado cssmin slimit psutil\n\n# Create the necessary directories, clone the repo, and install everything\nRUN mkdir -p /gateone/logs && \\\n    mkdir -p /gateone/users && \\\n    mkdir -p /etc/gateone/conf.d && \\\n    mkdir -p /etc/gateone/ssl && \\\n    cd /gateone && \\\n    git clone $GATEONE_REPO_URL && \\\n    cd GateOne && \\\n    python setup.py install && \\\n    cp docker/update_and_run_gateone.py /usr/local/bin/update_and_run_gateone && \\\n    cp docker/60docker.conf /etc/gateone/conf.d/60docker.conf\n\n# This ensures our configuration files/dirs are created:\nRUN /usr/local/bin/gateone --configure \\\n    --log_file_prefix=\"/gateone/logs/gateone.log\"\n\n# Remove the auto-generated key/certificate so that a new one gets created the\n# first time the container is started:\nRUN rm -f /etc/gateone/ssl/key.pem && \\\n    rm -f /etc/gateone/ssl/certificate.pem\n# (We don't want everyone using the same SSL key/certificate)\n\nEXPOSE 8000\n\nCMD [\"/usr/local/bin/update_and_run_gateone\", \"--log_file_prefix=/gateone/logs/gateone.log\"]"
}