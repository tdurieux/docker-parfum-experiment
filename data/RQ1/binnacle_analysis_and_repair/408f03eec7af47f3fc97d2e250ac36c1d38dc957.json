{
  "startTime": 1674244969754,
  "endTime": 1674244969926,
  "originalSmells": [
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 23,
        "lineEnd": 23,
        "columnStart": 5,
        "columnEnd": 29
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 43,
        "lineEnd": 43,
        "columnStart": 4,
        "columnEnd": 31
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 48,
        "lineEnd": 48,
        "columnStart": 4,
        "columnEnd": 31
      }
    },
    {
      "rule": "aptGetInstallUseY",
      "position": {
        "lineStart": 10,
        "lineEnd": 10,
        "columnStart": 5,
        "columnEnd": 35
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 9,
        "lineEnd": 9,
        "columnStart": 5,
        "columnEnd": 70
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 10,
        "lineEnd": 10,
        "columnStart": 5,
        "columnEnd": 35
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 20,
        "lineEnd": 20,
        "columnStart": 5,
        "columnEnd": 32
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 22,
        "lineEnd": 22,
        "columnStart": 5,
        "columnEnd": 61
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM gcr.io/cloud-datalab/datalab:latest\n\n# update GCP\n# RUN gcloud components update\n\n# update GCP\nRUN gcloud components update \\\n  && apt-get update \\\n  && apt-get install --no-install-recommends -y software-properties-common apt-transport-https \\\n  && apt-get install -y --no-install-recommends openssh-server \\\n  # VSCODE\n  # && curl https://packages.microsoft.com/keys/microsoft.asc | gpg --dearmor > microsoft.gpg \\\n  # && install -o root -g root -m 644 microsoft.gpg /etc/apt/trusted.gpg.d/ \\\n  # && sh -c 'echo \"deb [arch=amd64] https://packages.microsoft.com/repos/vscode stable main\" > /etc/apt/sources.list.d/vscode.list' \\\n  #&& apt-get update \\\n  # && apt-get install code \\\n  # GDAL-BIN\n  && add-apt-repository -y ppa:ubuntugis/ubuntugis-unstable \\\n  && apt-get update \\\n  && apt-get install --no-install-recommends -y gdal-bin \\\n  # EARTHENGINE\n  && apt-get install --no-install-recommends -y build-essential libssl-dev libffi-dev \\\n  && pip install --no-cache-dir cryptography \\\n  && apt-get purge -y build-essential libssl-dev libffi-dev \\\n                      dpkg-dev fakeroot libfakeroot:amd64 \\\n  # CLEANUP\n  && apt-get autoremove -y \\\n  && apt-get clean \\\n  && rm -rf /var/lib/apt/lists/*\n\n# Install IPyLeaflet. The notebook library dependency is downgraded to\n# version 4.4.1 but the datalab repo warns about potential version issues:\n# https://github.com/googledatalab/datalab/blob/master/containers/base/Dockerfile#L139\n#RUN pip install ipyleaflet \\\n#  && jupyter nbextension enable --py --sys-prefix ipyleaflet \\\n#  && pip install notebook\n\n# Install the Earth Engine Python API.\nRUN source activate $PYTHON_3_ENV && \\\n    pip uninstall -y google-api-core google-auth-httplib2 google-cloud-monitoring && \\\n    conda update -n base -c defaults conda && \\\n    conda install -y -c conda-forge google-auth-httplib2 google-cloud-storage google-cloud-monitoring && \\\n    pip install --no-cache-dir earthengine-api && \\\n    # GDAL\n    conda install -y gdal && \\\n    source deactivate && \\\n    source activate $PYTHON_2_ENV && \\\n    pip install --no-cache-dir earthengine-api\n\n# Install custom files in the container's /datalab directory.\nRUN cp /datalab/run.sh /datalab/base-run.sh\nADD run.sh /datalab/\nRUN chmod a+x /datalab/run.sh\n\n# Add license information for the new libraries added.\nADD datalab-ee.txt /datalab/\nRUN cat /datalab/datalab-ee.txt >> /datalab/web/static/datalab.txt \\\n  && rm /datalab/datalab-ee.txt\nADD license-ee.txt /datalab/\nRUN cat /datalab/license-ee.txt >> /datalab/license.txt \\\n  && rm /datalab/license-ee.txt\n\n\n\n\n\n"
}