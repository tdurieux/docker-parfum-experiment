{
  "startTime": 1674248487950,
  "endTime": 1674248488118,
  "originalSmells": [
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 53,
        "lineEnd": 53,
        "columnStart": 4,
        "columnEnd": 65
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 44,
        "lineEnd": 44,
        "columnStart": 4,
        "columnEnd": 43
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 28,
        "lineEnd": 28,
        "columnStart": 4,
        "columnEnd": 84
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 37,
        "lineEnd": 37,
        "columnStart": 4,
        "columnEnd": 288
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 28,
        "lineEnd": 28,
        "columnStart": 4,
        "columnEnd": 84
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 37,
        "lineEnd": 37,
        "columnStart": 4,
        "columnEnd": 288
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 28,
        "lineEnd": 28,
        "columnStart": 4,
        "columnEnd": 84
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 37,
        "lineEnd": 37,
        "columnStart": 4,
        "columnEnd": 288
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 28,
        "lineEnd": 28,
        "columnStart": 4,
        "columnEnd": 108
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 37,
        "lineEnd": 37,
        "columnStart": 4,
        "columnEnd": 307
      }
    }
  ],
  "repairedDockerfile": "FROM jupyter/notebook\n# # # repo at : https://github.com/jupyter/notebook\n\nMAINTAINER Marco Zocca, zocca.marco gmail\n\n\n# # # environment variables\nENV PYMOL_VERSION 1.8.2.0\nENV USER nb\n\n\nENV IPYNBS_DIR /home/${USER}/scripts/iPyMol\nENV DL_DIR /home/dl\n\n# # useful directories\nRUN mkdir -p ${IPYNBS_DIR}\nRUN mkdir -p ${DL_DIR}\n\n# # scripts and datasets\n\nADD ipymol/ ${IPYNBS_DIR}\n\n\n\n# # # update APT index\nRUN apt-get update\n\n# # # install some build tools\nRUN apt-get install --no-install-recommends -y sudo wget curl make python3 python3-dev python-pip pkg-config && rm -rf /var/lib/apt/lists/*;\n\n# # # use bash rather than sh\nRUN rm /bin/sh && ln -s /bin/bash /bin/sh\n\n\n\n\n# # # PyMol, iPyMol dependencies\nRUN apt-get install --no-install-recommends -y build-essential freeglut3 freeglut3-dev libpng3 libpng12-dev libpng-dev libfreetype6 libfreetype6-dev pmw glew-utils libglew-dev libxml2-dev python3-scipy python3-nose libtiff4-dev libjpeg8-dev zlib1g-dev liblcms2-dev libwebp-dev tcl8.5-dev tk8.5-dev python-tk && rm -rf /var/lib/apt/lists/*;\n\n\n\n# # # # PyMol\nWORKDIR ${DL_DIR}\nRUN wget --no-verbose https://sourceforge.net/projects/pymol/files/pymol/1.8/pymol-v${PYMOL_VERSION}.tar.bz2\nRUN tar jxf pymol-v${PYMOL_VERSION}.tar.bz2 && rm pymol-v${PYMOL_VERSION}.tar.bz2\nRUN rm pymol-v*\nWORKDIR pymol\nRUN python3 setup.py build install\n\n# RUN which pymol\n\n\n# # # # iPyMol + dependencies\nRUN pip3 install --no-cache-dir git+https://github.com/ocramz/ipymol.git@python3\n\n\n\n# # # clean temp data\nRUN sudo apt-get clean && apt-get purge && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*\n\n\n\n## check installation\nRUN pip list\n\n\n\n\n\n\nEXPOSE 8888\n\n\n# # working directory\nWORKDIR /home/${USER}\n\nVOLUME /home/${USER}\n\n\nENTRYPOINT [\"tini\", \"--\"]\nCMD [\"jupyter\", \"notebook\", \"--no-browser\"]\n\n\n# docker run --rm -it -p 8888:8888 ocramz/jupyter-docker-pymol"
}