{
  "startTime": 1674249292637,
  "endTime": 1674249292778,
  "originalSmells": [
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 25,
        "lineEnd": 25,
        "columnStart": 4,
        "columnEnd": 39
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 26,
        "lineEnd": 26,
        "columnStart": 4,
        "columnEnd": 68
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 27,
        "lineEnd": 27,
        "columnStart": 4,
        "columnEnd": 64
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 28,
        "lineEnd": 28,
        "columnStart": 4,
        "columnEnd": 82
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 22,
        "lineEnd": 24,
        "columnStart": 4,
        "columnEnd": 44
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM ubuntu:disco\n\nLABEL name=\"policystream\" \\\n      description=\"Custodian policy changes streamed from Git\" \\\n      repository=\"http://github.com/cloud-custodian/cloud-custodian\" \\\n      homepage=\"http://github.com/cloud-custodian/cloud-custodian\" \\\n      maintainer=\"Kapil Thangavelu <http://twitter.com/kapilvt>\"\n\n# Note this must be run from the root directory of the checkout\n# as we install custodian w/ aws, azure, and gcp support from the same\n# repo.\n\n# Transfer Custodian source into container by directory\n# to minimize size\nADD setup.py README.md requirements.txt /src/\nADD c7n /src/c7n/\nADD tools /src/tools/\n\nWORKDIR /src\nRUN adduser --home /home/custodian --disabled-login custodian\n\nRUN apt-get --yes update && apt-get --yes upgrade \\\n\t&& apt-get --yes --no-install-recommends install build-essential libgit2-dev libffi-dev python3-pip \\\n           python3-dev python3-setuptools python3-six python3-wheel \\\n           python3-cryptography python3-idna \\\n\t&& pip3 install --no-cache-dir -r requirements.txt . \\\n\t&& pip3 install --no-cache-dir -r tools/c7n_azure/requirements.txt tools/c7n_azure \\\n\t&& pip3 install --no-cache-dir -r tools/c7n_gcp/requirements.txt tools/c7n_gcp \\\n\t&& pip3 install --no-cache-dir -r tools/c7n_policystream/requirements.txt tools/c7n_policystream \\\n\t&& apt-get --yes remove build-essential \\\n\t&& apt-get purge --yes --auto-remove -o APT::AutoRemove::RecommendsImportant=false \\\n\t&& rm -Rf /var/cache/apt/ \\\n\t&& rm -Rf /var/lib/apt/lists/* \\\n\t&& rm -Rf /src/ \\\n\t&& rm -Rf /root/.cache/ \\\n        && mkdir /output \\\n        && chown custodian: /output\n\nUSER custodian\nWORKDIR /home/custodian\nENV LC_ALL=\"C.UTF-8\" LANG=\"C.UTF-8\"\nVOLUME [\"/home/custodian\"]\nENTRYPOINT [\"/usr/local/bin/c7n-policystream\"]\nCMD [\"--help\"]\n"
}