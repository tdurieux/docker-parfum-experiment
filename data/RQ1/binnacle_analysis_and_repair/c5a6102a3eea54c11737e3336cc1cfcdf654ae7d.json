{
  "startTime": 1674240568139,
  "endTime": 1674240568567,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 5,
        "lineEnd": 5,
        "columnStart": 4,
        "columnEnd": 50
      }
    },
    {
      "rule": "curlUseHttpsUrl",
      "position": {
        "lineStart": 5,
        "lineEnd": 5,
        "columnStart": 4,
        "columnEnd": 50
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 52,
        "lineEnd": 52,
        "columnStart": 4,
        "columnEnd": 22
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 63,
        "lineEnd": 63,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 66,
        "lineEnd": 66,
        "columnStart": 4,
        "columnEnd": 22
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 4,
        "lineEnd": 4,
        "columnStart": 44,
        "columnEnd": 72
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 10,
        "lineEnd": 12,
        "columnStart": 44,
        "columnEnd": 36
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 23,
        "lineEnd": 26,
        "columnStart": 4,
        "columnEnd": 57
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 34,
        "lineEnd": 34,
        "columnStart": 4,
        "columnEnd": 32
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 42,
        "lineEnd": 42,
        "columnStart": 22,
        "columnEnd": 49
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 44,
        "lineEnd": 44,
        "columnStart": 4,
        "columnEnd": 67
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 49,
        "lineEnd": 49,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 57,
        "lineEnd": 57,
        "columnStart": 4,
        "columnEnd": 33
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 113,
        "lineEnd": 113,
        "columnStart": 4,
        "columnEnd": 35
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 23,
        "lineEnd": 26,
        "columnStart": 4,
        "columnEnd": 57
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 34,
        "lineEnd": 34,
        "columnStart": 4,
        "columnEnd": 32
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 44,
        "lineEnd": 44,
        "columnStart": 4,
        "columnEnd": 67
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 49,
        "lineEnd": 49,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 57,
        "lineEnd": 57,
        "columnStart": 4,
        "columnEnd": 33
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 113,
        "lineEnd": 113,
        "columnStart": 4,
        "columnEnd": 35
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 4,
        "lineEnd": 4,
        "columnStart": 44,
        "columnEnd": 72
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 10,
        "lineEnd": 12,
        "columnStart": 44,
        "columnEnd": 36
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 23,
        "lineEnd": 26,
        "columnStart": 4,
        "columnEnd": 57
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 34,
        "lineEnd": 34,
        "columnStart": 4,
        "columnEnd": 32
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 42,
        "lineEnd": 42,
        "columnStart": 22,
        "columnEnd": 49
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 44,
        "lineEnd": 44,
        "columnStart": 4,
        "columnEnd": 67
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 49,
        "lineEnd": 49,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 57,
        "lineEnd": 57,
        "columnStart": 4,
        "columnEnd": 33
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 113,
        "lineEnd": 113,
        "columnStart": 4,
        "columnEnd": 35
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 23,
        "lineEnd": 26,
        "columnStart": 4,
        "columnEnd": 57
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 34,
        "lineEnd": 34,
        "columnStart": 4,
        "columnEnd": 56
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 44,
        "lineEnd": 44,
        "columnStart": 4,
        "columnEnd": 91
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 49,
        "lineEnd": 49,
        "columnStart": 4,
        "columnEnd": 51
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 57,
        "lineEnd": 57,
        "columnStart": 4,
        "columnEnd": 57
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 113,
        "lineEnd": 113,
        "columnStart": 4,
        "columnEnd": 59
      }
    }
  ],
  "repairedDockerfile": "FROM ubuntu:17.10\nMAINTAINER Christian Schafmeister <meister@temple.edu>\n\n# add LLVM repo\nRUN apt-get update && apt-get -y upgrade && apt-get install --no-install-recommends -y wget curl && rm -rf /var/lib/apt/lists/*;\nRUN curl -f https://apt.llvm.org/llvm-snapshot.gpg.key | apt-key add -\nRUN echo 'deb http://apt.llvm.org/xenial/ llvm-toolchain-xenial-6.0 main'\\\n  >/etc/apt/sources.list.d/llvm4.list\n\n# Copied from the original dependencies\nRUN apt-get update && apt-get upgrade -y && apt-get install --no-install-recommends -y \\\n  libunwind-dev liblzma-dev libgmp-dev binutils-gold binutils-dev \\\n  zlib1g-dev libbz2-dev libexpat-dev && rm -rf /var/lib/apt/lists/*;\n\n# Maybe need these...\n#  libncurses-dev libboost-filesystem-dev libboost-regex-dev \\\n#  libboost-date-time-dev libboost-program-options-dev libboost-system-dev \\\n#  libboost-iostreams-dev csh flex gfortran \\\n#  clang-6.0 libclang-common-6.0-dev libclang-6.0-dev libclang1-6.0 clang1-6.0-dbg \\\n#  libllvm5.0 libllvm5.0-dbg lldb-6.0 llvm-6.0 llvm-6.0-dev llvm-6.0-doc \\\n#  llvm-6.0-runtime clang-format-6.0 python-clang-6.0 lld-6.0\n\n# install clasp runtime dependencies\nRUN apt-get -y --no-install-recommends install \\\n  libboost-filesystem1.62.0 libboost-date-time1.62.0 libboost-program-options1.62.0 \\\n  libboost-iostreams1.62.0 libgc1c2 llvm-6.0-runtime libgmpxx4ldbl \\\n  clang-6.0 binutils python-clang-6.0 lld-6.0 libzmq3-dev \\\n  && apt-get clean && rm -rf /var/lib/apt/lists/*;\n\n# add app user\nRUN groupadd -g 9999 app && useradd -u 9999 -g 9999 -ms /bin/bash app\n\nENV HOME=/home/app\n\nRUN apt-get -y --no-install-recommends install python3.6 && rm -rf /var/lib/apt/lists/*;\n\nRUN cd /tmp && wget https://repo.continuum.io/miniconda/Miniconda3-latest-Linux-x86_64.sh\nRUN cd /tmp && bash Miniconda3-latest-Linux-x86_64.sh -b -p /home/app/miniconda\n\nENV PATH=\"/home/app/miniconda/bin:$PATH\"\nRUN /bin/bash -c \"source /home/app/miniconda/bin/activate\"\n\nRUN apt-get update && apt-get -y --no-install-recommends install git-core && rm -rf /var/lib/apt/lists/*;\n# AWS command-line utilities\nRUN apt-get -y --no-install-recommends install python-setuptools python-dev build-essential && rm -rf /var/lib/apt/lists/*;\n\n\nUSER root\n# Install sudo\nRUN apt-get install --no-install-recommends -y sudo && rm -rf /var/lib/apt/lists/*;\n\nRUN easy_install pip\nRUN pip install --no-cache-dir awscli\n\nRUN whoami\nRUN python -m pip install numpy\n\nRUN apt-get install --no-install-recommends -y nodejs npm && rm -rf /var/lib/apt/lists/*;\n\nRUN conda create -n lab python=3.6 -y\nRUN /bin/bash -c \"source activate lab\"\n#RUN conda install ipywidgets=7.1.2 -c conda-forge -y\nRUN conda install ipywidgets -c conda-forge -y\nRUN pip install --no-cache-dir nglview==1.1.2\nRUN nglview enable # might need this to enable nglview-js-widgets extension for notebook\nRUN conda install jupyterlab=0.32 -y -c conda-forge\nRUN pip install --no-cache-dir bqplot\nRUN jupyter-labextension install @jupyter-widgets/jupyterlab-manager nglview-js-widgets@1.1.2 bqplot\n#RUN jupyter-labextension install nglview-js-widgets@1.1.2\n\nADD build/cando-build.tgz /home/app/clasp\nADD tools/dockerfiles/jupyter/kernels /home/app/.local/share/jupyter/kernels\nADD tools/dockerfiles/jupyter/jupyter_notebook_config.py /home/app/.jupyter/jupyter_notebook_config.py\n# RUN chown -R app:app /home/app/.jupyter /home/app/.local\n\n#USER app\nWORKDIR $HOME\n\nENV PATH \"$PATH:$HOME/clasp/bin\"\n\n# checkout quicklisp and its subprojects\nRUN git clone --depth=1 https://github.com/quicklisp/quicklisp-client.git $HOME/quicklisp\nRUN mkdir $HOME/quicklisp/local-projects\n\n# Checkout quicklisp stuff - but not needed\nRUN cd $HOME/quicklisp/local-projects \\\n  && git clone --depth=1 https://github.com/clasp-developers/usocket.git \\\n  && git clone --depth=1 https://github.com/drmeister/cl-jupyter.git \\\n  && git clone --depth=1 https://github.com/clasp-developers/cl-jupyter-widgets.git \\\n  && git clone --depth=1 https://github.com/clasp-developers/cl-nglview.git \\\n  && git clone --depth=1 https://github.com/clasp-developers/cl-bqplot.git \\\n  && git clone --depth=1 https://github.com/clasp-developers/uuid.git \\\n  && git clone --depth=1 https://github.com/clasp-developers/trivial-backtrace.git \\\n  && git clone --depth=1 https://github.com/clasp-developers/bordeaux-threads.git \\\n  && git clone --depth=1 https://github.com/clasp-developers/cffi.git\n\n# checkout slime\nRUN git clone --depth=1 https://github.com/slime/slime $HOME/slime\n\nRUN clasp -l \"/home/app/quicklisp/setup.lisp\" \\\n           -e '(setq core::*swank-home* \"/home/app/slime\")'\\\n           -e '(load (format nil \"~a/swank-loader.lisp\" core::*swank-home*))'\\\n           -e \"(swank-loader:init :delete nil :reload nil :load-contribs nil)\"\\\n           -e \"(core:quit)\"\n\nADD --chown=app:app build/ambertools18-docker.tar.gz /home/app\nENV AMBERHOME=/home/app/amber18/\n\nRUN cp /home/app/clasp/lib/clasp/extensions/cando/src/data/force-field/ATOMTYPE_SYBYL.DEF /home/app/clasp/lib/clasp/extensions/cando/src/data/force-field/atomtype_sybyl.def\n\nADD tools/dockerfiles/start-demos.sh /home/app/start-demos.sh\nADD demos.tar /home/app/\n\nRUN apt-get install --no-install-recommends -y libgfortran4 && rm -rf /var/lib/apt/lists/*;\n\nENV HOME /home/app/\nENTRYPOINT [ \"jupyter\", \"lab\" ]\nCMD [ \"--allow-root\", \"--no-browser\", \"--ip=0.0.0.0\", \"--port=8888\" ]\n"
}