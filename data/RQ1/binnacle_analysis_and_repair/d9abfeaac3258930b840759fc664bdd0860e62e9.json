{
  "startTime": 1674252320093,
  "endTime": 1674252320291,
  "originalSmells": [
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 69,
        "lineEnd": 69,
        "columnStart": 4,
        "columnEnd": 61
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM nginx\nMAINTAINER Azure App Service Container Images <appsvc-images@microsoft.com>\n\n# ========\n# ENV vars\n# ========\n\n# ssh\nENV SSH_PASSWD \"root:Docker!\"\n\n# Composer\n# Updation: https://getcomposer.org/download/\nENV COMPOSER_DOWNLOAD_URL \"https://getcomposer.org/installer\"\nENV COMPOSER_ALLOW_SUPERUSER 1\nENV COMPOSER_HOME /home/.composer\nENV COMPOSER_VERSION \"1.6.1\"\n# SHA384SUM https://composer.github.io/installer.sha384sum\nENV COMPOSER_SETUP_SHA 544e09ee996cdf60ece3804abc52599c22b1f40f4323403c44d44fdfdd586475ca9813a858088ffbc1f233e9b180f061\n\n#Web Site Home\nENV HOME_SITE \"/home/site/wwwroot\"\n\n#\nENV DOCKER_BUILD_HOME \"/dockerbuild\"\n\n# ====================\n# Download and Install\n# ~. essentials\n# 1. php7.0-common/php7.0-fpm/php-pear/php7.0-apcu\n# 2. ssh\n# 3. drush\n# 4. composer\n# ====================\nCOPY * /tmp/\n\n        # -------------\n\t# ~. essentials\n\t# -------------\nWORKDIR $DOCKER_BUILD_HOME\nRUN set -ex \\\n\t&& essentials=\" \\\n\t\tca-certificates \\\n\t\" \\\n\t&& apt-get update \\\n\t&& apt-get install -y -V --no-install-recommends $essentials \\\n\t&& rm -r /var/lib/apt/lists/*\n\n\t# ------------------\n        # 1. php7.0-common/php7.0-fpm/php-pear/php7.0-apcu\n\t# ------------------\nRUN set -ex \\\n        && phps=\" \\\n\t\tphp7.0-common \\\n                php7.0-fpm \\\n                php-pear \\\n                php7.0-apcu \\\n                php7.0-gd \\\n                php7.0-dba \\\n                php7.0-mysql \\\n\t\" \\\n        && apt-get update \\\n\t&& apt-get install -y -V --no-install-recommends $phps \\\n\t&& rm -r /var/lib/apt/lists/*\n\n        # ------\n\t# 2. ssh\n\t# ------\nRUN set -ex \\\n\t&& apt-get update \\\n\t&& apt-get install -y --no-install-recommends openssh-server \\\n\t&& echo \"$SSH_PASSWD\" | chpasswd && rm -rf /var/lib/apt/lists/*;\n\n\t# ------\n\t# 3. drush\n\t# ------\nRUN set -ex \\\n       && php -r \"readfile('http://files.drush.org/drush.phar');\" > /usr/local/bin/drush \\\n       && chmod +x /usr/local/bin/drush\n\n\t# ------\n\t# 4. composer\n\t# ------\nRUN set -ex \\\n\t&& php -r \"readfile('https://getcomposer.org/installer');\" > /tmp/composer-setup.php \\\n       && php -r \"if (hash('SHA384', file_get_contents('/tmp/composer-setup.php')) === getenv('COMPOSER_SETUP_SHA')) { echo 'Installer verified'; } else { echo 'Installer corrupt'; unlink('/tmp/composer-setup.php'); echo PHP_EOL; exit(1); } echo PHP_EOL;\" \\\n   \t&& mkdir -p /composer/bin \\\n       && php /tmp/composer-setup.php --install-dir=/usr/local/bin/ --filename=composer --version=${COMPOSER_VERSION} \\\n       && rm /tmp/composer-setup.php \n\n\t# ----------\n\t# ~. clean up\n\t# ----------\nRUN set -ex \\\n\t&& apt-get autoremove -y\n\n# =========\n# Configure\n# =========\n\nRUN \\\n   test -d /home/LogFiles/ || mkdir -p /home/LogFiles \\\n   && test -d /home/site/wwwroot/ || mkdir -p /home/site/wwwroot \\\n   && rm -rf /var/www/html\n\nWORKDIR /home/site/wwwroot\n\n# ssh\nCOPY sshd_config /etc/ssh/\n\n# php\nCOPY php.ini /etc/php/7.0/cli/php.ini\nCOPY www.conf /etc/php/7.0/fpm/pool.d/www.conf\n\n# nginx\nCOPY nginx.conf /etc/nginx/nginx.conf\nCOPY hostingstart.html /home/site/wwwroot/index.html\n\nRUN \\\n   echo \"<?php\" >> index.php && echo \"phpinfo();\" >> index.php\n\n# =====\n# final\n# =====\nCOPY init_container.sh /usr/local/bin/\nRUN chmod +x /usr/local/bin/init_container.sh\n\nEXPOSE 2222 80\nENTRYPOINT [\"init_container.sh\"]\n"
}