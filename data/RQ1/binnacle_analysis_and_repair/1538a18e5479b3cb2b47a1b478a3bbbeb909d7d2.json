{
  "startTime": 1674244275313,
  "endTime": 1674244275589,
  "originalSmells": [
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 94,
        "lineEnd": 94,
        "columnStart": 4,
        "columnEnd": 33
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "# Copyright (c) Jupyter Development Team.\n# Distributed under the terms of the Modified BSD License.\nFROM jupyter/minimal-notebook\n\nMAINTAINER Jupyter Project <jupyter@googlegroups.com>\n\nUSER root\n\n# libav-tools for matplotlib anim\nRUN apt-get update && \\\n    apt-get install -y --no-install-recommends libav-tools && \\\n    apt-get clean && \\\n    rm -rf /var/lib/apt/lists/*\n\nUSER $NB_USER\n\n# Install Python 3 packages\n# Remove pyqt and qt pulled in for matplotlib since we're only ever going to\n# use notebook-friendly backends in these images\nRUN conda install --quiet --yes \\\n    'nomkl' \\\n    'ipywidgets=6.0*' \\\n    'pandas=0.19*' \\\n    'numexpr=2.6*' \\\n    'matplotlib=2.0*' \\\n    'scipy=0.19*' \\\n    'seaborn=0.7*' \\\n    'scikit-learn=0.18*' \\\n    'scikit-image=0.12*' \\\n    'sympy=1.0*' \\\n    'cython=0.25*' \\\n    'patsy=0.4*' \\\n    'statsmodels=0.8*' \\\n    'cloudpickle=0.2*' \\\n    'dill=0.2*' \\\n    'numba=0.31*' \\\n    'bokeh=0.12*' \\\n    'sqlalchemy=1.1*' \\\n    'hdf5=1.8.17' \\\n    'h5py=2.6*' \\\n    'vincent=0.4.*' \\\n    'beautifulsoup4=4.5.*' \\\n    'xlrd'  && \\\n    conda remove --quiet --yes --force qt pyqt && \\\n    conda clean -tipsy\n\n# Activate ipywidgets extension in the environment that runs the notebook server\nRUN jupyter nbextension enable --py widgetsnbextension --sys-prefix\n\n# Install Python 2 packages\n# Remove pyqt and qt pulled in for matplotlib since we're only ever going to\n# use notebook-friendly backends in these images\nRUN conda create --quiet --yes -p $CONDA_DIR/envs/python2 python=2.7 \\\n    'nomkl' \\\n    'ipython=5.3*' \\\n    'ipywidgets=6.0*' \\\n    'pandas=0.19*' \\\n    'numexpr=2.6*' \\\n    'matplotlib=2.0*' \\\n    'scipy=0.19*' \\\n    'seaborn=0.7*' \\\n    'scikit-learn=0.18*' \\\n    'scikit-image=0.12*' \\\n    'sympy=1.0*' \\\n    'cython=0.25*' \\\n    'patsy=0.4*' \\\n    'statsmodels=0.8*' \\\n    'cloudpickle=0.2*' \\\n    'dill=0.2*' \\\n    'numba=0.31*' \\\n    'bokeh=0.12*' \\\n    'hdf5=1.8.17' \\\n    'h5py=2.6*' \\\n    'sqlalchemy=1.1*' \\\n    'pyzmq' \\\n    'vincent=0.4.*' \\\n    'beautifulsoup4=4.5.*' \\\n    'xlrd' && \\\n    conda remove -n python2 --quiet --yes --force qt pyqt && \\\n    conda clean -tipsy\n# Add shortcuts to distinguish pip for python2 and python3 envs\nRUN ln -s $CONDA_DIR/envs/python2/bin/pip $CONDA_DIR/bin/pip2 && \\\n    ln -s $CONDA_DIR/bin/pip $CONDA_DIR/bin/pip3\n\n# Import matplotlib the first time to build the font cache.\nENV XDG_CACHE_HOME /home/$NB_USER/.cache/\nRUN MPLBACKEND=Agg $CONDA_DIR/envs/python2/bin/python -c \"import matplotlib.pyplot\"\n\nUSER root\n\n# Install Python 2 kernel spec globally to avoid permission problems when NB_UID\n# switching at runtime and to allow the notebook server running out of the root\n# environment to find it. Also, activate the python2 environment upon kernel\n# launch.\nRUN pip install --no-cache-dir kernda --no-cache && \\\n    $CONDA_DIR/envs/python2/bin/python -m ipykernel install && \\\n    kernda -o -y /usr/local/share/jupyter/kernels/python2/kernel.json && \\\n    pip uninstall kernda -y\n\nUSER $NB_USER\n"
}