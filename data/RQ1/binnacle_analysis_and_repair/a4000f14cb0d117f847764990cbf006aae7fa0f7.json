{
  "startTime": 1674244603004,
  "endTime": 1674244603114,
  "originalSmells": [
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 27,
        "lineEnd": 27,
        "columnStart": 18,
        "columnEnd": 54
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "# Licensed under the Apache License, Version 2.0 (the \"License\");\n# you may not use this file except in compliance with the License.\n# You may obtain a copy of the License at\n#\n# http://www.apache.org/licenses/LICENSE-2.0\n#\n# Unless required by applicable law or agreed to in writing, software\n# distributed under the License is distributed on an \"AS IS\" BASIS,\n# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n# See the License for the specific language governing permissions and\n# limitations under the License.\n\nFROM maximo/ibmim\n\nMAINTAINER Yasutaka Nishimura <nishi2go@gmail.com>\n\nARG fp=1\n\nARG url=http://images\nARG httpport=80\nARG installfp=yes\nARG skin=iot18\n\nENV TEMP /tmp\nWORKDIR /tmp\n\n# Install required packages\nRUN apt update && apt install --no-install-recommends -y netcat inetutils-ping && rm -rf /var/lib/apt/lists/*\n\n## Install Maximo middleware and installer\nRUN mkdir /Launchpad\nWORKDIR /Launchpad\n\nENV BYPASS_PRS=True\n\n## Install Maximo V7.6.1\nENV MAM_IMAGE MAM_7.6.1_LINUX64.tar.gz\n## Remove z from tar command because file is not gzipped despite having gz extension\nRUN wget -q $url/$MAM_IMAGE && tar xpf $MAM_IMAGE \\\n && /opt/IBM/InstallationManager/eclipse/tools/imcl \\\n -input /Launchpad/SilentResponseFiles/Unix/ResponseFile_MAM_Install_Unix.xml \\\n -acceptLicense -log /tmp/MAM_Install_Unix.xml \\\n && rm $MAM_IMAGE\n\nRUN mkdir /work\nWORKDIR /work\n\n# Install Maximo V7.6.1 feature pack\n\nENV MAM_FP_IMAGE MAMMTFP761${fp}IMRepo.zip\nRUN if [ \"${installfp}\" = \"yes\" ]; then wget -q $url/$MAM_FP_IMAGE && sleep 30 \\\n && /opt/IBM/InstallationManager/eclipse/tools/imcl install \\\n com.ibm.tivoli.tpae.base.tpae.main -repositories /work/$MAM_FP_IMAGE \\\n -installationDirectory /opt/IBM/SMP -log /tmp/FP_Install_Unix.xml -acceptLicense \\\n && /opt/IBM/InstallationManager/eclipse/tools/imcl install \\\n com.ibm.tivoli.tpae.base.mam.main -repositories /work/$MAM_FP_IMAGE \\\n -installationDirectory /opt/IBM/SMP -log /tmp/FP_Install_Unix.xml -acceptLicense \\\n && rm $MAM_FP_IMAGE; fi\n\nENV MAXADMIN_PASSWORD maxadmin\nENV MAXREG_PASSWORD maxreg\nENV MXINTADM_PASSWORD mxintadm\nENV BASE_LANG en\nENV ADMIN_EMAIL_ADDRESS root@localhost\nENV SMTP_SERVER_HOST_NAME localhost\nENV MAXDB MAXDB76\nENV DB_HOST_NAME maxdb\nENV DB_PORT 50005\nENV DB_MAXIMO_PASSWORD maximo\nENV DMGR_ADMIN_USER wasadmin\nENV DMGR_ADMIN_PASSWORD wasadmin\nENV DMGR_HOST_NAME maxdmgr\nENV DMGR_PORT 8879\nENV WAS_DM_PROFILE_NAME ctgDmgr01\nENV WAS_DM_NODE_NAME ctgCellManager01\nENV WAS_NODE_NAME ctgNode01\nENV WEB_SERVER_NAME webserver1\nENV WEB_SERVER_HOST_NAME maxweb\nENV WEB_SERVER_PORT ${httpport}\nENV APP_SERVER_HOST_NAME maxapps\nENV APP_SERVER_PORT 8878\nENV UPDATE_APPS_ON_REBOOT yes\n\nRUN wget -q https://raw.githubusercontent.com/vishnubob/wait-for-it/master/wait-for-it.sh \\\n    && mv wait-for-it.sh /usr/local/bin && chmod +x /usr/local/bin/wait-for-it.sh\n\nRUN wget -q https://raw.githubusercontent.com/wsadminlib/wsadminlib/master/bin/wsadminlib.py\n\nCOPY StopAllServers.py /work\nCOPY StartAllServers.py /work\nCOPY AddVirtualHosts.py /work\nCOPY SetAutoRestart.py /work\n\nENV SKIN=${skin}\n\nCOPY startinstall.sh /work\nRUN chmod +x /work/startinstall.sh\nENTRYPOINT [\"/work/startinstall.sh\"]\n"
}