{
  "startTime": 1674240456076,
  "endTime": 1674240456274,
  "originalSmells": [
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 34,
        "lineEnd": 34,
        "columnStart": 22,
        "columnEnd": 68
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 19,
        "lineEnd": 19,
        "columnStart": 4,
        "columnEnd": 33
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 27,
        "lineEnd": 27,
        "columnStart": 4,
        "columnEnd": 68
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 58,
        "lineEnd": 58,
        "columnStart": 4,
        "columnEnd": 66
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 19,
        "lineEnd": 19,
        "columnStart": 4,
        "columnEnd": 33
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 27,
        "lineEnd": 27,
        "columnStart": 4,
        "columnEnd": 68
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 58,
        "lineEnd": 58,
        "columnStart": 4,
        "columnEnd": 66
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 19,
        "lineEnd": 19,
        "columnStart": 4,
        "columnEnd": 33
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 27,
        "lineEnd": 27,
        "columnStart": 4,
        "columnEnd": 68
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 19,
        "lineEnd": 19,
        "columnStart": 4,
        "columnEnd": 57
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 27,
        "lineEnd": 27,
        "columnStart": 4,
        "columnEnd": 92
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 58,
        "lineEnd": 58,
        "columnStart": 4,
        "columnEnd": 90
      }
    }
  ],
  "repairedDockerfile": "# MySQL Server with Apache and phpmyadmin\n#\n# VERSION               0.0.1\n\nFROM     ubuntu:latest\nMAINTAINER Jonas Colmsj√∂ \"jonas@gizur.com\"\n\n\n# Keep upstart from complaining\n#RUN dpkg-divert --local --rename --add /sbin/initctl\n#RUN ln -s /bin/true /sbin/initctl\n\nRUN apt-get update\n\n\n#\n# Install supervidord (used to handle processes)\n#\n\nRUN apt-get install --no-install-recommends -y supervisor && rm -rf /var/lib/apt/lists/*;\nADD ./supervisord.conf /etc/supervisor/conf.d/supervisord.conf\n\n\n#\n# Install Apache and PHP\n#\n\nRUN apt-get install --no-install-recommends -y apache2 php5 php5-curl php5-mysql php5-mcrypt && rm -rf /var/lib/apt/lists/*;\nRUN a2enmod rewrite\n\n# Bundle everything and install\nADD ./src-phpmyadmin /var/www/html\nADD ./conf/etc /etc\n\nRUN cd /var/www/html; tar -xzf phpMyAdmin-4.0.8-all-languages.tar.gz && rm phpMyAdmin-4.0.8-all-languages.tar.gz\n#RUN rm /var/www/index.html\n\nADD ./src-phpmyadmin/config.inc.php /var/www/html/phpMyAdmin-4.0.8-all-languages/config.inc.php\n\n\n#\n# Install Wordpress\n#\n\nADD ./src-wordpress /var/www\n\n\n#\n# Install MySQL\n#\n\n# Bundle everything\nADD ./src-mysql /src-mysql\n\n# Load wordpress SQL dump\nADD ./sql-script/latest.sql /sql-script/latest.sql\n\n# Install MySQL server\nRUN DEBIAN_FRONTEND=noninteractive apt-get --no-install-recommends install -y mysql-server && apt-get clean && rm -rf /var/lib/apt/lists/*\n\n# Fix configuration\nRUN sed -i -e\"s/^bind-address\\s*=\\s*127.0.0.1/bind-address = 0.0.0.0/\" /etc/mysql/my.cnf\n\n# Setup admin user\nRUN /src-mysql/mysql-setup.sh\n\nEXPOSE 3306 80 443\nCMD [\"supervisord\",\"-n\"]\n"
}