{
  "startTime": 1674235122556,
  "endTime": 1674235123098,
  "originalSmells": [
    {
      "rule": "yumInstallRmVarCacheYum",
      "position": {
        "lineStart": 67,
        "lineEnd": 67,
        "columnStart": 4,
        "columnEnd": 78
      }
    },
    {
      "rule": "yumInstallRmVarCacheYum",
      "position": {
        "lineStart": 69,
        "lineEnd": 69,
        "columnStart": 4,
        "columnEnd": 49
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "# LICENSE CDDL 1.0 + GPL 2.0\n#\n# Copyright (c) 2017 DATAlysis GmbH. All rights reserved.\n#\n# OBIEE DOCKERFILES PROJECT\n# --------------------------\n# This is the Dockerfile for Oracle Business Intelligence 12.2.1.3.0 SampleAppLite\n#\n# REQUIRED FILES TO BUILD THIS IMAGE\n# ----------------------------------\n# (1) fmw_12.2.1.3.0_infrastructure_Disk1_1of1.zip\n#     fmw_12.2.1.3.0_bi_linux64_Disk1_1of2.zip\n#     fmw_12.2.1.3.0_bi_linux64_Disk1_2of2.zip\n#     Download Oracle Business Intelligence 12.2.1.3.0 for Linux x64\n#     from http://www.oracle.com/technetwork/middleware/bi/downloads/default-3852322.html\n# (2) jdk-8u144-linux-x64.rpm\n#     Download Oracle JDK 1.8.131+\n#     from http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html\n#\n# HOW TO BUILD THIS IMAGE\n# -----------------------\n# Put all downloaded files in the same directory as this Dockerfile\n# Run:\n#      $ docker build -t oracle/obiee:12.2.1.3.0-sampleAppLite .\n#\n# Pull base image\n# ---------------\nFROM oraclelinux:7-slim\n\n# Maintainer\n# ----------\nMAINTAINER Gianni Ceresa <gianni.ceresa@datalysis.ch>\n\n# Environment variables required for this build (do NOT change)\n# --------------------------------------------------------------\nENV INSTALL_FILE_JDK=\"jdk-8u144-linux-x64.rpm\"                       \\\n    INSTALL_FILE_WLS=\"fmw_12.2.1.3.0_infrastructure_Disk1_1of1.zip\"  \\\n    INSTALL_FILE_BI_1=\"fmw_12.2.1.3.0_bi_linux64_Disk1_1of2.zip\"     \\\n    INSTALL_FILE_BI_2=\"fmw_12.2.1.3.0_bi_linux64_Disk1_2of2.zip\"     \\\n    OBIEE_VERSION=\"12.2.1.3.0\"                                       \\\n    INSTALL_FILE_RSP_WLS=\"weblogic.rsp\"                              \\\n    INSTALL_FILE_RSP_BI=\"obiee.rsp\"                                  \\\n    INSTALL_FILE_RSP_CONFIG=\"bi_config.rsp\"                          \\\n    RUN_FILE=\"runOBIEE.sh\"                                           \\\n    ORACLE_BASE=/opt/oracle\n\n# Use second ENV so that variable get substituted\nENV INSTALL_DIR=$ORACLE_BASE/install                                 \\\n    ORACLE_HOME=$ORACLE_BASE/product/$OBIEE_VERSION                  \\\n    DOMAIN_HOME=$ORACLE_BASE/config/domains\n\n# Copy binaries\n# -------------\nCOPY $INSTALL_FILE_JDK $INSTALL_FILE_WLS $INSTALL_FILE_BI_1 $INSTALL_FILE_BI_2 $INSTALL_DIR/\nCOPY $INSTALL_FILE_RSP_WLS $INSTALL_FILE_RSP_BI $INSTALL_FILE_RSP_CONFIG $RUN_FILE _configureOBIEE.sh _dropRCU.sh _validateRCU.sh $ORACLE_BASE/\n\n# Setup filesystem and oracle user\n# Adjust file permissions, go to /opt/oracle as user 'oracle' to proceed with Oracle Business Intelligence installation\n# Install pre-req packages + Oracle JDK\n# Make sure the run file is executable\n# -----------------------------------------------------------------------\nRUN chmod ug+x $INSTALL_DIR/$INSTALL_FILE_JDK                                   && \\\n    groupadd -g 500 dba                                                         && \\\n    groupadd -g 501 oinstall                                                    && \\\n    useradd -d /home/oracle -g dba -G oinstall,dba -m -s /bin/bash oracle       && \\\n    echo oracle:oracle | chpasswd                                               && \\\n    yum -y update                                                               && \\\n    yum -y install oracle-rdbms-server-12cR1-preinstall unzip wget tar openssl  && \\\n    yum -y remove java-openjdk java-openjdk-headless                            && \\\n    yum -y install $INSTALL_DIR/$INSTALL_FILE_JDK                               && \\\n    yum clean all                                                               && \\\n    rm $INSTALL_DIR/$INSTALL_FILE_JDK                                           && \\\n    touch $ORACLE_BASE/oraInst.loc                                              && \\\n    echo inventory_loc=$ORACLE_BASE/oraInventory >  $ORACLE_BASE/oraInst.loc    && \\\n    echo inst_group= >> $ORACLE_BASE/oraInst.loc                                && \\\n    mkdir -p $ORACLE_HOME                                                       && \\\n    mkdir -p $DOMAIN_HOME                                                       && \\\n    chown -R oracle:dba $ORACLE_BASE && \\\n    chmod ug+x $ORACLE_BASE/*.sh && rm -rf /var/cache/yum\n\n\n# Replace place holders (and force /dev/urandom for java)\n# ---------------------\nRUN sed -i -e \"s|###ORACLE_HOME###|$ORACLE_HOME|g\"   $ORACLE_BASE/$INSTALL_FILE_RSP_WLS     && \\\n    sed -i -e \"s|###ORACLE_HOME###|$ORACLE_HOME|g\"   $ORACLE_BASE/$INSTALL_FILE_RSP_BI      && \\\n    sed -i -e \"s|###ORACLE_HOME###|$ORACLE_HOME|g\"   $ORACLE_BASE/$INSTALL_FILE_RSP_CONFIG  && \\\n    sed -i -e \"s|###DOMAIN_HOME###|$DOMAIN_HOME|g\"   $ORACLE_BASE/$INSTALL_FILE_RSP_CONFIG  && \\\n    sed -i -e \"s|###ORACLE_HOME###|$ORACLE_HOME|g\"   $ORACLE_BASE/$RUN_FILE                 && \\\n    sed -i -e \"s|###ORACLE_BASE###|$ORACLE_BASE|g\"   $ORACLE_BASE/$RUN_FILE                 && \\\n    sed -i -e \"s|source=file:/dev/random|source=file:/dev/urandom|g\"     /usr/java/default/jre/lib/security/java.security  && \\\n    sed -i -e \"s|source=file:/dev/urandom|source=file:/dev/./urandom|g\"  /usr/java/default/jre/lib/security/java.security\n\n# Start installation\n# -------------------\nUSER oracle\n\nRUN cd $INSTALL_DIR                       && \\\n    unzip $INSTALL_FILE_WLS -d ./tmp_wls  && \\\n    rm $INSTALL_FILE_WLS                  && \\\n    java -jar $(find $INSTALL_DIR/tmp_wls -name *.jar) -silent -responseFile $ORACLE_BASE/$INSTALL_FILE_RSP_WLS -invPtrLoc $ORACLE_BASE/oraInst.loc && \\\n    rm -rf $INSTALL_DIR/tmp_wls           && \\\n    unzip $INSTALL_FILE_BI_1 -d ./tmp_bi  && \\\n    rm $INSTALL_FILE_BI_1                 && \\\n    unzip $INSTALL_FILE_BI_2 -d ./tmp_bi  && \\\n    rm $INSTALL_FILE_BI_2                 && \\\n    $(find $INSTALL_DIR/tmp_bi -name *.bin) -silent -responseFile $ORACLE_BASE/$INSTALL_FILE_RSP_BI -invPtrLoc $ORACLE_BASE/oraInst.loc && \\\n    rm -rf $INSTALL_DIR/tmp_bi            && \\\n    rm -rf $INSTALL_DIR\n\n# Set work directory & Expose ports\n#--------------\n\nWORKDIR $ORACLE_BASE\n\nEXPOSE 9500-9514 9799\n\n# Define default command to start Oracle Business intelligence.\nCMD $ORACLE_BASE/$RUN_FILE\n"
}