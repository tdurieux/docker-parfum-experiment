{
  "startTime": 1674236775630,
  "endTime": 1674236775819,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 44,
        "lineEnd": 44,
        "columnStart": 18,
        "columnEnd": 42
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 45,
        "lineEnd": 45,
        "columnStart": 4,
        "columnEnd": 58
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 14,
        "lineEnd": 28,
        "columnStart": 4,
        "columnEnd": 8
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 33,
        "lineEnd": 33,
        "columnStart": 4,
        "columnEnd": 50
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 33,
        "lineEnd": 33,
        "columnStart": 4,
        "columnEnd": 50
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 14,
        "lineEnd": 28,
        "columnStart": 4,
        "columnEnd": 8
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 33,
        "lineEnd": 33,
        "columnStart": 4,
        "columnEnd": 50
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 33,
        "lineEnd": 33,
        "columnStart": 4,
        "columnEnd": 74
      }
    }
  ],
  "repairedDockerfile": "ARG SCW_ARCH\nFROM scaleway/ubuntu:${SCW_ARCH}-xenial\n\n\nMAINTAINER Scaleway <opensource@scaleway.com> (@scaleway)\n\n\n# Prepare rootfs for image-builder\nRUN /usr/local/sbin/builder-enter\n\n\n# Install packages\nRUN apt-get -q update                   \\\n && apt-get upgrade  -y -qq \\\n && apt-get install --no-install-recommends -y -q \\\n      apparmor \\\n      arping \\\n      aufs-tools \\\n      btrfs-tools \\\n      bridge-utils \\\n      cgroup-lite \\\n      git \\\n      ifupdown \\\n      kmod \\\n      lxc \\\n      python-setuptools \\\n      vlan \\\n      gosu \\\n      jq \\\n && apt-get clean && rm -rf /var/lib/apt/lists/*;\n\n\n# Install Docker\nRUN apt-get install --no-install-recommends -q -y docker.io docker-compose && rm -rf /var/lib/apt/lists/*;\n\n\n# Install Docker Machine\nRUN case \"$(uname -m)\" in                                                                                                                                                 \\\n        x86_64) arch_docker=x86_64;;                                                                                                                                  \\\n        aarch64) arch_docker=aarch64;;                                                                                                                                  \\\n        armhf) arch_docker=armhf;;                                                                                                                                    \\\n        *) echo \"docker-machine not yet supported for this architecture.\"; exit 0;;                                                                                   \\\n    esac; \\\n    MACHINE_REPO=https://api.github.com/repos/docker/machine/releases/latest; \\\n    MACHINE_URL=$( curl -f -s -L $MACHINE_REPO | jq -r --arg n \"docker-machine-Linux-${arch_docker}\" '.assets[] | select(.name | contains($n)) | .browser_download_url') ; \\\n    curl -f -s -L $MACHINE_URL >/usr/local/bin/docker-machine && chmod +x /usr/local/bin/docker-machine\n\n\n# Install Pipework\nRUN wget -qO /usr/local/bin/pipework https://raw.githubusercontent.com/jpetazzo/pipework/master/pipework  \\\n && chmod +x /usr/local/bin/pipework\n\n\n# Patch rootfs\nCOPY ./overlay /\nRUN systemctl enable docker\n\n\n# Clean rootfs from image-builder\nRUN /usr/local/sbin/builder-leave\n\n"
}