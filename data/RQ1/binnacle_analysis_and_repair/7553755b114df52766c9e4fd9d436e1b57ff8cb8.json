{
  "startTime": 1674250374670,
  "endTime": 1674250375093,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 19,
        "lineEnd": 19,
        "columnStart": 22,
        "columnEnd": 86
      }
    },
    {
      "rule": "wgetUseHttpsUrl",
      "position": {
        "lineStart": 35,
        "lineEnd": 35,
        "columnStart": 4,
        "columnEnd": 55
      }
    },
    {
      "rule": "wgetUseHttpsUrl",
      "position": {
        "lineStart": 42,
        "lineEnd": 42,
        "columnStart": 4,
        "columnEnd": 55
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 14,
        "lineEnd": 14,
        "columnStart": 4,
        "columnEnd": 21
      }
    },
    {
      "rule": "configureShouldUseBuildFlag",
      "position": {
        "lineStart": 21,
        "lineEnd": 21,
        "columnStart": 4,
        "columnEnd": 35
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 20,
        "lineEnd": 20,
        "columnStart": 4,
        "columnEnd": 36
      }
    },
    {
      "rule": "aptGetInstallUseY",
      "position": {
        "lineStart": 38,
        "lineEnd": 38,
        "columnStart": 4,
        "columnEnd": 42
      }
    },
    {
      "rule": "aptGetInstallUseY",
      "position": {
        "lineStart": 45,
        "lineEnd": 45,
        "columnStart": 4,
        "columnEnd": 61
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 13,
        "lineEnd": 13,
        "columnStart": 4,
        "columnEnd": 33
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 24,
        "lineEnd": 24,
        "columnStart": 23,
        "columnEnd": 51
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 28,
        "lineEnd": 28,
        "columnStart": 22,
        "columnEnd": 58
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 38,
        "lineEnd": 38,
        "columnStart": 4,
        "columnEnd": 42
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 45,
        "lineEnd": 45,
        "columnStart": 4,
        "columnEnd": 61
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 50,
        "lineEnd": 50,
        "columnStart": 4,
        "columnEnd": 26
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 55,
        "lineEnd": 55,
        "columnStart": 4,
        "columnEnd": 40
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 50,
        "lineEnd": 50,
        "columnStart": 4,
        "columnEnd": 26
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 13,
        "lineEnd": 13,
        "columnStart": 4,
        "columnEnd": 33
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 24,
        "lineEnd": 24,
        "columnStart": 23,
        "columnEnd": 51
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 28,
        "lineEnd": 28,
        "columnStart": 22,
        "columnEnd": 58
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 38,
        "lineEnd": 38,
        "columnStart": 4,
        "columnEnd": 42
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 45,
        "lineEnd": 45,
        "columnStart": 4,
        "columnEnd": 61
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 50,
        "lineEnd": 50,
        "columnStart": 4,
        "columnEnd": 26
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 55,
        "lineEnd": 55,
        "columnStart": 4,
        "columnEnd": 40
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 50,
        "lineEnd": 50,
        "columnStart": 4,
        "columnEnd": 50
      }
    }
  ],
  "repairedDockerfile": "# Docker container for Ubuntu 12.04\n\n# See https://github.com/ceejatec/naked-docker/ for details about the\n# construction of the base image.\n\nFROM ceejatec/ubuntu-1204-couchbase-build\nMAINTAINER build-team@couchbase.com\n\nUSER root\n\n# Code coverage requires gcovr to convert from gcov to XML files consumable by\n# Jenkins.\nRUN apt-get update && \\\n    apt-get install --no-install-recommends -y python-pip && \\\n    pip install --no-cache-dir gcovr && rm -rf /var/lib/apt/lists/*;\n\n# Valgrind needed for leak checking as part of unit tests. Note: It requires\n# libc debug symbols (libc6-dbg) to ensure it can locate the address of strlen().\nRUN mkdir /tmp/deploy && \\\n    cd /tmp/deploy && curl -f -L -O http://valgrind.org/downloads/valgrind-3.12.0.tar.bz2 && \\\n    tar -xjf valgrind-3.12.0.tar.bz2 && cd valgrind-3.12.0 && \\\n    ./configure --build=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\" --prefix=/usr/local && make && make install && \\\n    cd /tmp && rm -fr /tmp/deploy && \\\n    ccache --clear && \\\n    apt-get update && apt-get install --no-install-recommends -y libc6-dbg && \\\n    rm -f /var/cache/apt/archives/*.deb && rm valgrind-3.12.0.tar.bz2 && rm -rf /var/lib/apt/lists/*;\n\n# install easy_install and paramiko\nRUN apt-get update && apt-get install --no-install-recommends -y python-setuptools && \\\n    rm -f /var/cache/apt/archives/*.deb && \\\n    easy_install paramiko && rm -rf /var/lib/apt/lists/*;\n\n# Install Clang 3.6 (current stable) - needed for building with ThreadSanitizer.\n# (Note: This doesn't change the default compiler; users must explicitly\n# select clang-3.6 / clang++-3.6).\nRUN wget -O - https://llvm.org/apt/llvm-snapshot.gpg.key | sudo apt-key add - && \\\n    echo \"deb http://llvm.org/apt/precise/ llvm-toolchain-precise-3.6 main\" > /etc/apt/sources.list.d/llvm.list && \\\n    apt-get update && \\\n    apt-get install -y --no-install-recommends --assume-yes clang-3.6 && \\\n    rm -fr /var/cache/apt/archives/*.deb && rm -rf /var/lib/apt/lists/*;\n\n# Install clang-format from Clang 3.8 - needed for checking if formatting of patch is correct\nRUN wget -O - https://llvm.org/apt/llvm-snapshot.gpg.key | sudo apt-key add - && \\\n    echo \"deb http://llvm.org/apt/precise/ llvm-toolchain-precise-3.8 main\" > /etc/apt/sources.list.d/llvm.list && \\\n    apt-get update && \\\n    apt-get install -y --no-install-recommends --assume-yes --force-yes clang-format-3.8 && \\\n    rm -fr /var/cache/apt/archives/*.deb && rm -rf /var/lib/apt/lists/*;\n\n# Install GDB - needed for detecting what program created a core file\n# & extracting the set of shared libraries.\nRUN apt-get install --no-install-recommends -y gdb && \\\n    rm -f /var/cache/apt/archives/*.deb && rm -rf /var/lib/apt/lists/*;\n\n# Install Lua - Needed for lua-based tests in Couchstore\nRUN apt-get update && \\\n    apt-get install --no-install-recommends -y lua5.2 lua5.2-dev && \\\n    rm -fr /var/cache/apt/archives/*.deb && rm -rf /var/lib/apt/lists/*;\n\n# Keep this stuff at the end, because the ARG declaration breaks Docker build caching\nRUN echo \"PermitUserEnvironment yes\" >> /etc/ssh/sshd_config\nARG CONTAINER_TAG_ARG\nENV CONTAINER_TAG=${CONTAINER_TAG_ARG}\nRUN echo \"CONTAINER_TAG=${CONTAINER_TAG}\" > /home/couchbase/.ssh/environment\nRUN chown couchbase:couchbase /home/couchbase/.ssh/environment\n\n"
}