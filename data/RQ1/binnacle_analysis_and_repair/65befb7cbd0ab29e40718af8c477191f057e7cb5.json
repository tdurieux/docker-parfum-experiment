{
  "startTime": 1674250886743,
  "endTime": 1674250887567,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 76,
        "lineEnd": 76,
        "columnStart": 4,
        "columnEnd": 46
      }
    },
    {
      "rule": "npmCacheCleanAfterInstall",
      "position": {
        "lineStart": 93,
        "lineEnd": 93,
        "columnStart": 4,
        "columnEnd": 24
      }
    },
    {
      "rule": "npmCacheCleanAfterInstall",
      "position": {
        "lineStart": 96,
        "lineEnd": 96,
        "columnStart": 4,
        "columnEnd": 28
      }
    },
    {
      "rule": "npmCacheCleanAfterInstall",
      "position": {
        "lineStart": 99,
        "lineEnd": 99,
        "columnStart": 4,
        "columnEnd": 23
      }
    },
    {
      "rule": "wgetUseHttpsUrl",
      "position": {
        "lineStart": 113,
        "lineEnd": 113,
        "columnStart": 4,
        "columnEnd": 84
      }
    },
    {
      "rule": "wgetUseHttpsUrl",
      "position": {
        "lineStart": 114,
        "lineEnd": 114,
        "columnStart": 4,
        "columnEnd": 77
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 11,
        "lineEnd": 11,
        "columnStart": 4,
        "columnEnd": 84
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 14,
        "lineEnd": 14,
        "columnStart": 4,
        "columnEnd": 178
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 17,
        "lineEnd": 17,
        "columnStart": 4,
        "columnEnd": 32
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 24,
        "lineEnd": 24,
        "columnStart": 4,
        "columnEnd": 39
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 41,
        "lineEnd": 41,
        "columnStart": 4,
        "columnEnd": 58
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 51,
        "lineEnd": 51,
        "columnStart": 4,
        "columnEnd": 63
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 59,
        "lineEnd": 59,
        "columnStart": 4,
        "columnEnd": 134
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 65,
        "lineEnd": 65,
        "columnStart": 27,
        "columnEnd": 58
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 73,
        "lineEnd": 73,
        "columnStart": 4,
        "columnEnd": 28
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 83,
        "lineEnd": 83,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 90,
        "lineEnd": 90,
        "columnStart": 4,
        "columnEnd": 29
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 104,
        "lineEnd": 112,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 11,
        "lineEnd": 11,
        "columnStart": 4,
        "columnEnd": 84
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 14,
        "lineEnd": 14,
        "columnStart": 4,
        "columnEnd": 178
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 17,
        "lineEnd": 17,
        "columnStart": 4,
        "columnEnd": 32
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 24,
        "lineEnd": 24,
        "columnStart": 4,
        "columnEnd": 39
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 41,
        "lineEnd": 41,
        "columnStart": 4,
        "columnEnd": 58
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 51,
        "lineEnd": 51,
        "columnStart": 4,
        "columnEnd": 63
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 59,
        "lineEnd": 59,
        "columnStart": 4,
        "columnEnd": 134
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 65,
        "lineEnd": 65,
        "columnStart": 27,
        "columnEnd": 58
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 73,
        "lineEnd": 73,
        "columnStart": 4,
        "columnEnd": 28
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 83,
        "lineEnd": 83,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 90,
        "lineEnd": 90,
        "columnStart": 4,
        "columnEnd": 29
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 104,
        "lineEnd": 112,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 11,
        "lineEnd": 11,
        "columnStart": 4,
        "columnEnd": 84
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 14,
        "lineEnd": 14,
        "columnStart": 4,
        "columnEnd": 178
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 17,
        "lineEnd": 17,
        "columnStart": 4,
        "columnEnd": 32
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 24,
        "lineEnd": 24,
        "columnStart": 4,
        "columnEnd": 39
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 41,
        "lineEnd": 41,
        "columnStart": 4,
        "columnEnd": 58
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 51,
        "lineEnd": 51,
        "columnStart": 4,
        "columnEnd": 63
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 59,
        "lineEnd": 59,
        "columnStart": 4,
        "columnEnd": 134
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 65,
        "lineEnd": 65,
        "columnStart": 27,
        "columnEnd": 58
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 73,
        "lineEnd": 73,
        "columnStart": 4,
        "columnEnd": 28
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 83,
        "lineEnd": 83,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 90,
        "lineEnd": 90,
        "columnStart": 4,
        "columnEnd": 29
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 104,
        "lineEnd": 112,
        "columnStart": 4,
        "columnEnd": 30
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 11,
        "lineEnd": 11,
        "columnStart": 4,
        "columnEnd": 108
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 14,
        "lineEnd": 14,
        "columnStart": 4,
        "columnEnd": 202
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 17,
        "lineEnd": 17,
        "columnStart": 4,
        "columnEnd": 56
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 24,
        "lineEnd": 24,
        "columnStart": 4,
        "columnEnd": 63
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 41,
        "lineEnd": 41,
        "columnStart": 4,
        "columnEnd": 82
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 51,
        "lineEnd": 51,
        "columnStart": 4,
        "columnEnd": 87
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 59,
        "lineEnd": 59,
        "columnStart": 4,
        "columnEnd": 158
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 65,
        "lineEnd": 65,
        "columnStart": 27,
        "columnEnd": 82
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 73,
        "lineEnd": 73,
        "columnStart": 4,
        "columnEnd": 52
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 83,
        "lineEnd": 83,
        "columnStart": 4,
        "columnEnd": 51
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 90,
        "lineEnd": 90,
        "columnStart": 4,
        "columnEnd": 53
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 104,
        "lineEnd": 112,
        "columnStart": 4,
        "columnEnd": 30
      }
    }
  ],
  "repairedDockerfile": "FROM ubuntu:14.04\n\nMAINTAINER Alexander Schneider \"alexander.schneider@jankowfsky.com\"\n\n# Upgrade system\nENV DEBIAN_FRONTEND noninteractive\nENV HOME /root\nRUN apt-get update\n\n# Setup system and install tools\nRUN echo \"initscripts hold\" | dpkg --set-selections\nRUN apt-get -qqy --no-install-recommends install libreadline-gplv2-dev libfreetype6 apt-utils dialog postfix && rm -rf /var/lib/apt/lists/*;\nRUN echo \"Europe/Berlin\" > /etc/timezone && dpkg-reconfigure -f noninteractive tzdata\nRUN echo 'alias ll=\"ls -lah --color=auto\"' >> /etc/bash.bashrc\nRUN apt-get -qqy --no-install-recommends install passwd supervisor git-core sudo unzip wget curl libfile-slurp-perl libmysql-diff-perl vim net-tools software-properties-common python-software-properties && rm -rf /var/lib/apt/lists/*;\n\n# Set locale\nRUN apt-get -qqy --no-install-recommends install locales && rm -rf /var/lib/apt/lists/*;\nRUN locale-gen --purge de_DE de_DE.UTF-8\nRUN locale-gen --purge en_US en_US.UTF-8\nRUN dpkg-reconfigure locales\nENV LC_ALL en_US.UTF-8\n\n# Setup ssh\nRUN apt-get -qqy --no-install-recommends install openssh-server && rm -rf /var/lib/apt/lists/*;\nRUN mkdir -p /var/run/sshd\nRUN sed -ri 's/UsePAM yes/#UsePAM yes/g' /etc/ssh/sshd_config\nRUN sed -ri 's/#UsePAM no/UsePAM no/g' /etc/ssh/sshd_config\nRUN sed -ri 's/PermitRootLogin without-password/PermitRootLogin yes/g' /etc/ssh/sshd_config\nRUN echo 'root:root' | chpasswd\n\n# Generate a host key before packing.\nRUN service ssh start; service ssh stop\n\n# Create SSL cert\nRUN mkdir /root/ssl; \\\n    openssl genrsa -out /root/ssl/local.key 1024; \\\n    openssl req -new -key /root/ssl/local.key -out /root/ssl/local.csr -subj \"/C=DE/ST=BW/L=FREIBURG/O=Jankowfsky AG/OU=Development/CN=localhost\"; \\\n    openssl x509 -req -days 365 -in /root/ssl/local.csr -signkey /root/ssl/local.key -out /root/ssl/local.crt\n\n# Apache\nRUN apt-get -qqy --no-install-recommends install apache2-mpm-prefork apache2-utils && rm -rf /var/lib/apt/lists/*;\nRUN a2enmod rewrite\nRUN a2enmod proxy_fcgi\nRUN a2enmod ssl\nRUN mkdir /etc/apache2/conf.d/\nRUN echo \"ServerName localhost\" | tee /etc/apache2/conf.d/fqdn\nRUN echo \"ServerName localhost\" >> /etc/apache2/apache2.conf\nADD conf/apache/000-default /etc/apache2/sites-enabled/000-default.conf\n\n# Mysql\nRUN apt-get -qqy --no-install-recommends install mysql-server mysql-common mysql-client && rm -rf /var/lib/apt/lists/*;\nRUN ln -s /run/mysqld/mysqld.sock /tmp/mysql.sock\n\n# Add latest php version\nRUN add-apt-repository ppa:ondrej/apache2\nRUN add-apt-repository ppa:ondrej/php && apt-get update\n\n# PHP\nRUN apt-get -qqy --no-install-recommends install php5-fpm php5 php5-cli php5-mysql php5-curl php5-dev php5-gd php-pear php-apc php5-xdebug libapache2-mod-php5 && rm -rf /var/lib/apt/lists/*;\n\n# PhpMyAdmin\nRUN mysqld & \\\n    service apache2 start; \\\n\t\t\tsleep 5; \\\n\t\t\tprintf y\\\\n\\\\n\\\\n1\\\\n | apt-get install --no-install-recommends -qqy phpmyadmin; rm -rf /var/lib/apt/lists/*; \\\n    sleep 15; \\\n    mysqladmin -u root shutdown\nRUN sed -i \"0,/\\/\\/ \\$cfg\\['Servers'\\]\\[\\$i\\]\\['AllowNoPassword'\\] = TRUE;/{s#// \\$cfg\\['Servers'\\]\\[\\$i\\]\\['AllowNoPassword'\\] = TRUE;#\\$cfg\\['Servers'\\]\\[\\$i\\]\\['AllowNoPassword'\\] = TRUE;#g}\" /etc/phpmyadmin/config.inc.php\nRUN sed -i \"/^[ ]*\\$cfg\\['Servers'\\]\\[\\$i\\]\\['host'\\]/a\\\\\\$cfg\\['Servers'\\]\\[\\$i\\]\\['hide_db'\\] = '(information_schema|performance_schema|phpmyadmin|mysql|test)';\" /etc/phpmyadmin/config.inc.php\nRUN ln -s /etc/phpmyadmin/apache.conf /etc/apache2/conf-enabled\n\n# Install ant builder\nRUN apt-get -qqy --no-install-recommends install ant && rm -rf /var/lib/apt/lists/*;\n\n# Install composer\nRUN curl -f -sS https://getcomposer.org/installer | php && mv composer.phar /usr/local/bin/composer\n\n# Install phpunit\nRUN composer global require \"phpunit/phpunit=4.1.*\"; \\\n    ln -s /root/.composer/vendor/bin/phpunit /usr/bin/phpunit\n\n# Install ruby\nRUN apt-get -y --no-install-recommends install ruby && rm -rf /var/lib/apt/lists/*;\n\n# Install sass\nRUN gem install sass\n\n# Nodejs + NPM\nRUN add-apt-repository ppa:chris-lea/node.js && apt-get update\nRUN apt-get install --no-install-recommends -y nodejs && rm -rf /var/lib/apt/lists/*;\n\n# Install bower\nRUN npm install -g bower && npm cache clean --force;\n\n# Install grunt\nRUN npm install -g grunt-cli && npm cache clean --force;\n\n# Install glub\nRUN npm install -g gulp && npm cache clean --force;\n\n# Install phpbrew\nRUN apt-get update\nRUN apt-get build-dep -y --fix-missing php5\nRUN apt-get install --no-install-recommends -y php5 php5-dev php-pear autoconf automake curl build-essential \\\n    libxslt1-dev re2c libxml2 libxml2-dev php5-cli bison libbz2-dev libreadline-dev \\\n    libfreetype6 libfreetype6-dev libpng12-0 libpng12-dev libjpeg-dev libjpeg8-dev libjpeg8 libgd-dev libgd3 libxpm4 \\\n    libssl-dev openssl \\\n    gettext libgettextpo-dev libgettextpo0 \\\n    libicu-dev \\\n    libmhash2 libmhash-dev \\\n    libmcrypt4 libmcrypt-dev \\\n    libpcre3-dev libpcre++-dev && rm -rf /var/lib/apt/lists/*;\nRUN wget https://launchpadlibrarian.net/121520545/libbison-dev_2.6.2.dfsg-1_amd64.deb && dpkg -i libbison-dev_2.6.2.dfsg-1_amd64.deb\nRUN wget https://launchpadlibrarian.net/121520544/bison_2.6.2.dfsg-1_amd64.deb && dpkg -i bison_2.6.2.dfsg-1_amd64.deb\nADD conf/php/phpbrew /usr/bin/phpbrew\nRUN chmod +x /usr/bin/phpbrew\nADD conf/php/pbconfig.yaml /tmp/config.yaml\nRUN phpbrew init --config=/tmp/config.yaml\nRUN echo \"source /root/.phpbrew/bashrc\" >> /root/.bashrc\nRUN ln -s /.phpbrew /root/.phpbrew\n\nADD conf/php/install_php /usr/bin/install_php\nRUN chmod +x /usr/bin/install_php\n\n# Install tideways daemon\nADD conf/php/tideways-daemon /root/tideways-daemon\nRUN chmod +x /root/tideways-daemon/install.sh\nRUN /root/tideways-daemon/install.sh\n\n# Install different php version\nADD conf/php/modules /root/.phpbrew/modules\n\n# php 5.6\nRUN install_php 5.6.4\n\n# php 5.5\nRUN install_php 5.5.20\n\n# php 5.4\nRUN install_php 5.4.40\n\n# php 5.3\nRUN install_php 5.3.29\n\n# Add supervisor config\nADD conf/supervisor/startup.conf /etc/supervisor/conf.d/startup.conf\nENV PHP_VERSION 5.6.4\nENV PHP_XDEBUG 0\nENV SQL_DIR /var/www/_sql\n\nADD conf/scripts/startup.sh /usr/bin/startup_container\nRUN chmod +x /usr/bin/startup_container\n\n# Cleanup\nRUN apt-get clean -y; \\\n    apt-get autoclean -y; \\\n    apt-get autoremove -y; \\\n    rm -rf /var/lib/{apt,dpkg,cache,log}/\n\nVOLUME /var/www\nEXPOSE 22 80 443 3306 9000\n\nCMD [\"/bin/bash\", \"/usr/bin/startup_container\"]\n"
}