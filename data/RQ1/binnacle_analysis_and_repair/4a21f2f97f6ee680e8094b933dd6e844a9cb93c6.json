{
  "startTime": 1674252628292,
  "endTime": 1674252628622,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 69,
        "lineEnd": 69,
        "columnStart": 5,
        "columnEnd": 82
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 5,
        "lineEnd": 5,
        "columnStart": 4,
        "columnEnd": 31
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 8,
        "lineEnd": 8,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 9,
        "lineEnd": 9,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 10,
        "lineEnd": 10,
        "columnStart": 4,
        "columnEnd": 26
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 11,
        "lineEnd": 11,
        "columnStart": 4,
        "columnEnd": 33
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 18,
        "lineEnd": 18,
        "columnStart": 4,
        "columnEnd": 52
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 31,
        "lineEnd": 31,
        "columnStart": 4,
        "columnEnd": 34
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 34,
        "lineEnd": 34,
        "columnStart": 4,
        "columnEnd": 37
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 5,
        "lineEnd": 5,
        "columnStart": 4,
        "columnEnd": 31
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 8,
        "lineEnd": 8,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 9,
        "lineEnd": 9,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 10,
        "lineEnd": 10,
        "columnStart": 4,
        "columnEnd": 26
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 11,
        "lineEnd": 11,
        "columnStart": 4,
        "columnEnd": 33
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 18,
        "lineEnd": 18,
        "columnStart": 4,
        "columnEnd": 52
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 31,
        "lineEnd": 31,
        "columnStart": 4,
        "columnEnd": 34
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 34,
        "lineEnd": 34,
        "columnStart": 4,
        "columnEnd": 37
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 5,
        "lineEnd": 5,
        "columnStart": 4,
        "columnEnd": 31
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 8,
        "lineEnd": 8,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 9,
        "lineEnd": 9,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 10,
        "lineEnd": 10,
        "columnStart": 4,
        "columnEnd": 26
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 11,
        "lineEnd": 11,
        "columnStart": 4,
        "columnEnd": 33
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 18,
        "lineEnd": 18,
        "columnStart": 4,
        "columnEnd": 52
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 31,
        "lineEnd": 31,
        "columnStart": 4,
        "columnEnd": 34
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 34,
        "lineEnd": 34,
        "columnStart": 4,
        "columnEnd": 37
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 5,
        "lineEnd": 5,
        "columnStart": 4,
        "columnEnd": 55
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 8,
        "lineEnd": 8,
        "columnStart": 4,
        "columnEnd": 51
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 9,
        "lineEnd": 9,
        "columnStart": 4,
        "columnEnd": 54
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 10,
        "lineEnd": 10,
        "columnStart": 4,
        "columnEnd": 50
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 11,
        "lineEnd": 11,
        "columnStart": 4,
        "columnEnd": 57
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 18,
        "lineEnd": 18,
        "columnStart": 4,
        "columnEnd": 76
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 31,
        "lineEnd": 31,
        "columnStart": 4,
        "columnEnd": 58
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 34,
        "lineEnd": 34,
        "columnStart": 4,
        "columnEnd": 61
      }
    }
  ],
  "repairedDockerfile": "FROM drupal:8.6-apache\n\nRUN apt-get update\n\n# Install Git and wget.\nRUN apt-get install --no-install-recommends git wget -y && rm -rf /var/lib/apt/lists/*;\n\n# sudo is used to run tests as www-data.\nRUN apt-get install --no-install-recommends -y sudo && rm -rf /var/lib/apt/lists/*;\nRUN apt-get install --no-install-recommends -y sqlite3 && rm -rf /var/lib/apt/lists/*;\nRUN apt-get install --no-install-recommends -y vim && rm -rf /var/lib/apt/lists/*;\nRUN apt-get install --no-install-recommends -y fontconfig && rm -rf /var/lib/apt/lists/*;\n\n# xdebug isn't available as a prebuilt extension in the parent image.\nRUN pecl install xdebug\nRUN echo 'zend_extension=/usr/local/lib/php/extensions/no-debug-non-zts-20170718/xdebug.so' > /usr/local/etc/php/conf.d/xdebug.ini\n\n# We use imagemagick to support behat screenshots\nRUN apt-get install --no-install-recommends -y imagemagick libmagickwand-dev && rm -rf /var/lib/apt/lists/*;\nRUN pecl install imagick\nRUN echo 'extension=/usr/local/lib/php/extensions/no-debug-non-zts-20170718/imagick.so' > /usr/local/etc/php/conf.d/imagick.ini\n\n# Install composer.\nCOPY install-composer.sh /usr/local/bin/\nRUN install-composer.sh\n\n# Install Robo CI.\nRUN wget https://robo.li/robo.phar\nRUN chmod +x robo.phar && mv robo.phar /usr/local/bin/robo\n\n# php-dom and bcmath dependencies\nRUN apt-get install --no-install-recommends -y libxslt-dev && rm -rf /var/lib/apt/lists/*;\nRUN docker-php-ext-install bcmath xsl\n\nRUN apt-get install --no-install-recommends -y mariadb-client && rm -rf /var/lib/apt/lists/*;\n\nRUN composer global require hirak/prestissimo\n\n# Cache currently used libraries to improve build times. We need to force\n# discarding changes as Drupal removes test code in /vendor.\nRUN cd /var/www/html \\\n  && cp composer.json composer.json.original \\\n  && cp composer.lock composer.lock.original \\\n  && mv vendor vendor.original \\\n  && composer require --update-with-all-dependencies --dev \\\n      cweagans/composer-patches \\\n      behat/mink-selenium2-driver:1.3.x-dev \\\n      behat/mink-extension:v2.2 \\\n      drupal/coder:8.2.* \\\n      drupal/drupal-extension:master-dev \\\n      bex/behat-screenshot \\\n      phpmd/phpmd \\\n      phpmetrics/phpmetrics \\\n  && rm -rf vendor \\\n  && mv composer.json.original composer.json \\\n  && mv composer.lock.original composer.lock \\\n  && mv vendor.original vendor\n\nCOPY hooks/* /var/www/html/\n\n# Commit our preinstalled Drupal database for faster Behat tests.\nCOPY drupal.sql.gz /var/www\nCOPY settings.php /var/www\nRUN mkdir -p /var/www/html/sites/default/files/config_yt3arM1I65-zRJQc52H_nu_xyV-c4YyQ86uwM1E3JBCvD3CXL38O8JqAxqnWWj8rHRiigYrj0w/sync \\\n  && chown -Rv www-data /var/www/html/sites/default/files\n\n# Patch Drupal to avoid a bug where behat failures show as passes.\n# https://www.drupal.org/project/drupal/issues/2927012#comment-12467957\nRUN cd /var/www/html \\\n  && curl -f https://www.drupal.org/files/issues/2927012.22-log-error-exit-code.patch | patch -p1\n\n# Add the vendor/bin directory to the $PATH\nENV PATH=\"/var/www/html/vendor/bin:${PATH}\"\n\n# We need to expose port 80 for phantomjs containers.\nEXPOSE 80\n"
}