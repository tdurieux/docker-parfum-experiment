{
  "startTime": 1674235624919,
  "endTime": 1674235625047,
  "originalSmells": [
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 4,
        "lineEnd": 4,
        "columnStart": 4,
        "columnEnd": 32
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 5,
        "lineEnd": 5,
        "columnStart": 4,
        "columnEnd": 32
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 4,
        "lineEnd": 4,
        "columnStart": 4,
        "columnEnd": 32
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 5,
        "lineEnd": 5,
        "columnStart": 4,
        "columnEnd": 32
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 4,
        "lineEnd": 4,
        "columnStart": 4,
        "columnEnd": 32
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 5,
        "lineEnd": 5,
        "columnStart": 4,
        "columnEnd": 32
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 4,
        "lineEnd": 4,
        "columnStart": 4,
        "columnEnd": 56
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 5,
        "lineEnd": 5,
        "columnStart": 4,
        "columnEnd": 56
      }
    }
  ],
  "repairedDockerfile": "FROM ubuntu:14.04\n\n# dependencies\nRUN apt-get update && apt-get upgrade -y\nRUN apt-get install --no-install-recommends -y ucspi-tcp && rm -rf /var/lib/apt/lists/*;\nRUN apt-get install --no-install-recommends -y tmpreaper && rm -rf /var/lib/apt/lists/*;\n\n# Create users\n# ed user -- everything will run under this one\nRUN adduser --disabled-password --gecos '' ed\nRUN adduser --disabled-password --gecos '' flaguser\n\nADD crontab /etc/cron.d/ed-cron\nRUN chmod 0644 /etc/cron.d/ed-cron\nRUN crontab /etc/cron.d/ed-cron\nRUN touch /var/log/cron.log\n\nWORKDIR /home/ed\n\n# setup flag\nCOPY ./data/flag /home/ed\nRUN chown -R root:root /home/ed/\nRUN chown flaguser:ed /home/ed/flag\nRUN chmod 440 /home/ed/flag\n\n# assorted permissions\nRUN chmod 1733 /tmp /var/tmp /dev/shm\n\n# TODO: Resource limits\n\n# setup ed challenge\nCOPY ./ed /home/ed\n\nRUN chown flaguser:ed /home/ed/ed\nRUN chmod +x /home/ed/ed\nRUN chmod u+s /home/ed/ed\n\nEXPOSE 8000\nCMD (cron -f &) && tcpserver -l1000 0.0.0.0 8000 /home/ed/ed\n"
}