{
  "startTime": 1674249216858,
  "endTime": 1674249216938,
  "originalSmells": [
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 25,
        "lineEnd": 25,
        "columnStart": 23,
        "columnEnd": 48
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 26,
        "lineEnd": 26,
        "columnStart": 3,
        "columnEnd": 66
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 21,
        "lineEnd": 23,
        "columnStart": 22,
        "columnEnd": 33
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "########################################################################## \nFROM cineca/icat \nMAINTAINER \"Paolo D'Onorio De Meo <p.donoriodemeo@cineca.it>\" \n# ########################################################################## \nUSER root \nENV RESOURCES_DIR /opt/irods_res \nENV MAINRES_DIR $RESOURCES_DIR/main \nENV REPLICA_DIR $RESOURCES_DIR/replicas \n# RUN mkdir -p $MAINRES_DIR $REPLICA_DIR \\ \n# && chown -R $IRODS_USER:$IRODS_USER $RESOURCES_DIR \nENV MAINRES myResc \nENV REPLICARES replicaResc \nENV HANDLECONF /myconfig \nRUN echo \"# HANDLE CONFIGURATION\" > $HANDLECONF \n\n# ########################################################################## \n# DON'T BECAUSE FUTURE INSTALLATION SCRIPT WAIT FOR FILES THERE TO WORK \n# # Clean tmp \n# RUN rm -rf /tmp/* \n# ########################################################################## \n# Install dependencies for EUDAT python scripts \nRUN apt-get update && apt-get install --no-install-recommends -y \\\npython-setuptools python-dev build-essential \\\nlibxml2-dev libxslt1-dev libz-dev \\\n&& apt-get clean && rm -rf /var/lib/apt/lists/* /var/tmp/* \\\n&& easy_install pip && pip install --no-cache-dir --upgrade pip \\\n&& pip install --no-cache-dir simplejson httplib2 defusedxml lxml queuelib dweepy\n\n# ########################################################################## \n# Clone eudat repo \nUSER $IRODS_USER \nRUN cd /tmp && git clone https://github.com/EUDAT-B2SAFE/B2SAFE-core \nWORKDIR /tmp/B2SAFE-core/packaging \nRUN ./create_deb_package.sh \n# Move from home dir, which will become a volume and clean everything \nRUN mv /home/$IRODS_USER/debbuild/irods* /tmp/ \n# Inside the first time install script we must install the package \n# ########################################################################## \n# Prepare install script \nENV EUDAT_CONFIGF /tmp/eudat.conf \nADD myeudat.conf $EUDAT_CONFIGF \nADD install_eudat.sh $EXTRA_INSTALLATION_SCRIPT \n# Go home \nWORKDIR /home/$IRODS_USER \n\n# # Save resources and eudat configurations? \n# VOLUME /opt \n\n"
}