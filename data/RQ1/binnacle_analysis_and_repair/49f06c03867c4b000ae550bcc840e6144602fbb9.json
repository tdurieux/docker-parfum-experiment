{
  "startTime": 1674250239121,
  "endTime": 1674250239402,
  "originalSmells": [
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 18,
        "lineEnd": 18,
        "columnStart": 7,
        "columnEnd": 44
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM gozap/oraclejdk8:8u202\n\nLABEL maintainer=\"mritd <mritd@linux.com>\"\n\nARG TZ=\"Asia/Shanghai\"\n\nENV TZ ${TZ}\nENV CATALINA_HOME /usr/local/tomcat\nENV PATH ${CATALINA_HOME}/bin:${PATH}\nENV TOMCAT_HOME ${CATALINA_HOME}\nENV TOMCAT_NATIVE_LIBDIR ${CATALINA_HOME}/native-jni-lib\nENV TOMCAT_MAJOR 8\nENV TOMCAT_VERSION 8.5.39\nENV TOMCAT_DOWNLOAD_URL http://mirror.bit.edu.cn/apache/tomcat/tomcat-${TOMCAT_MAJOR}/v${TOMCAT_VERSION}/bin/apache-tomcat-${TOMCAT_VERSION}.tar.gz\nENV LD_LIBRARY_PATH ${LD_LIBRARY_PATH:+$LD_LIBRARY_PATH:}${TOMCAT_NATIVE_LIBDIR}\n\nRUN apt update -y \\\n    && apt upgrade -y \\\n    && apt install --no-install-recommends tzdata libapr1 openssl -y \\\n    && savedAptMark=\"$(apt-mark showmanual)\" \\\n    && apt install --no-install-recommends -y \\\n        wget ca-certificates dpkg-dev gcc \\\n        libapr1-dev libssl-dev make \\\n    && mkdir -p ${TOMCAT_HOME} \\\n    && (cd ${TOMCAT_HOME} \\\n    && wget -q -O tomcat.tar.gz ${TOMCAT_DOWNLOAD_URL} \\\n    && tar -xvf tomcat.tar.gz --strip-components=1 \\\n    && nativeBuildDir=\"$(mktemp -d)\" \\\n    && tar -xvf bin/tomcat-native.tar.gz -C \"${nativeBuildDir}\" --strip-components=1 \\\n    && (cd \"${nativeBuildDir}/native\" \\\n    && gnuArch=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\" \\\n    && ./configure --build=\"${gnuArch}\" \\\n        --libdir=\"${TOMCAT_NATIVE_LIBDIR}\" \\\n        --prefix=\"${CATALINA_HOME}\" \\\n        --with-apr=\"$(which apr-1-config)\" \\\n        --with-java-home=\"$(docker-java-home)\" \\\n        --with-ssl=yes \\\n    && make -j \"$(nproc)\" \\\n    && make install) \\\n    && find ./bin/ -name '*.sh' -exec sed -ri 's|^#!/bin/sh$|#!/usr/bin/env bash|' '{}' + \\\n    && chmod -R +rX . \\\n    && chmod 777 logs work \\\n    && rm -rf \"${nativeBuildDir}\" bin/tomcat-native.tar.gz) \\\n    && apt-mark auto '.*' > /dev/null \\\n    && ([ -z \"${savedAptMark}\" ] || apt-mark manual ${savedAptMark}) \\\n    && apt purge -y --auto-remove -o APT::AutoRemove::RecommendsImportant=false \\\n    && ln -sf /usr/share/zoneinfo/${TZ} /etc/localtime \\\n    && echo ${TZ} > /etc/timezone \\\n    && apt autoremove -y \\\n    && apt autoclean -y \\\n    && rm -rf ${CATALINA_HOME}/webapps/* \\\n        ${TOMCAT_HOME}/*.md \\\n        ${TOMCAT_HOME}/*.txt \\\n        ${TOMCAT_HOME}/bin/*.bat \\\n        ${TOMCAT_HOME}/RELEASE-NOTES \\\n        ${TOMCAT_HOME}/tomcat.tar.gz \\\n        /var/lib/apt/lists/*\n\n# verify Tomcat Native is working properly\nRUN set -e \\\n    && nativeLines=\"$(catalina.sh configtest 2>&1)\" \\\n    && nativeLines=\"$(echo \"$nativeLines\" | grep 'Apache Tomcat Native')\" \\\n    && nativeLines=\"$(echo \"$nativeLines\" | sort -u)\" \\\n    && if ! echo \"$nativeLines\" | grep 'INFO: Loaded APR based Apache Tomcat Native library' >&2; then \\\n        echo >&2 \"$nativeLines\"; \\\n        exit 1; \\\n    fi\n\nWORKDIR ${CATALINA_HOME}\n\nCMD [\"/bin/bash\"]\n"
}