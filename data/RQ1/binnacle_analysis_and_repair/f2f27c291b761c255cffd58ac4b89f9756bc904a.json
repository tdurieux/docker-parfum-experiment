{
  "startTime": 1674243714928,
  "endTime": 1674243715026,
  "originalSmells": [
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 49,
        "lineEnd": 55,
        "columnStart": 2,
        "columnEnd": 16
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "# This Docker file downloads the DB2 LUW binaries and installs them in the\n# image. It installs the necessary libraries.\n#\n# This Docker is designed to download a fixpack from IBM and to install DB2\n# from it. The fixpack is from the server binaries that correspond to the\n# Enterprise Server Edition for 90 days if a license is not applied.\n#\n# Version: 2018-01-28\n# Author: Andres Gomez Casanova (AngocA)\n# Made in COLOMBIA.\n\nFROM ubuntu:14.04\n\nMAINTAINER Andres Gomez <angoca@yahoo.com>\n\n# Set of variables to define the type of DB2 being installed.\n\n## Version of the downloaded file.\nENV DB2_VERSION=10.5 \\\n## Fixpack of the downloaded file.\n    DB2_FIXPACK=8 \\\n## Directory of the installers. Associated to the edition.\n    DB2_INST_DIR=server_t \\\n## Name of the response file included in the Docker image.\n    DB2_RESP_FILE_INSTALL=db2server_t_install.rsp \\\n## Name of the script that downloads DB2.\n    DB2_DOWNLOAD=download \\\n## Name of the response file included in the Docker image.\n    DB2_RESP_FILE_INSTANCE=db2server_t_instance.rsp \\\n## Script to create the instance\n    DB2_INST_CREA_SCR=createInstance \\\n## Directory for all scripts.\n    DB2_CONF=/tmp/db2_conf\n\n## Name of the downloaded file.\nENV DB2_INSTALLER=v${DB2_VERSION}fp${DB2_FIXPACK}_linuxx64_${DB2_INST_DIR}.tar.gz \\\n## Directory where DB2 is installed.\n    DB2_DIR=/opt/ibm/db2/V${DB2_VERSION}\n\n# Copies the script to download\nCOPY ${DB2_DOWNLOAD} /tmp/${DB2_DOWNLOAD}\n\n# Copies the response file\nCOPY ${DB2_RESP_FILE_INSTALL} /tmp/${DB2_RESP_FILE_INSTALL}\n\n# Run all commands in a single RUN layer to minimize the size of the image.\n# Updates Linux. Includes i386\nRUN dpkg --add-architecture i386 && \\\n  apt-get update && \\\n  apt-get install --no-install-recommends -y \\\n    aria2 \\\n    curl \\\n    libaio1 \\\n    libpam-ldap:i386 \\\n    libstdc++6-4.4-pic \\\n    lib32stdc++6 && \\\n# Download the installer.\n## URL to download the installer. The link is obtained from an article in the Wiki\n## https://github.com/angoca/db2-docker/wiki/db2-link-server_t-10.5\n## That article should contain a valid link as the last line.\n## If the link is not valid, you can modify the wiki.\n  /tmp/${DB2_DOWNLOAD} && \\\n# Extract the installer and delete the tar file.\n  cd /tmp && \\\n  tar -zvxf ${DB2_INSTALLER} && \\\n  rm ${DB2_INSTALLER} && \\\n# Install DB2 and remove the installer.\n  cd /tmp/${DB2_INST_DIR} && \\\n  ./db2prereqcheck -l && \\\n  ( ./db2setup -r /tmp/${DB2_RESP_FILE_INSTALL} && \\\n  cat /tmp/db2setup.log || cat /tmp/db2setup.log ) && \\\n  ${DB2_DIR}/bin/db2val -o && \\\n  cd && \\\n  rm -Rf /tmp/${DB2_INST_DIR} && \\\n  rm /tmp/${DB2_RESP_FILE_INSTALL} && \\\n# Removes the cache of apt-get and the unnecessary packages.\n  apt-get purge -y aria2 curl && \\\n  apt-get clean -y && \\\n# Removes the list of packages\n  rm -rf /var/lib/apt/lists/*\n\nRUN env\n# Creates a directory for all scripts\nWORKDIR ${DB2_CONF}\n\n# Copies the response file\nCOPY ${DB2_RESP_FILE_INSTANCE} ${DB2_CONF}/${DB2_RESP_FILE_INSTANCE}\n\n# Copies the script to create the instance\nCOPY ${DB2_INST_CREA_SCR} ${DB2_CONF}/${DB2_INST_CREA_SCR}\n\n"
}