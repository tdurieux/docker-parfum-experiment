{
  "startTime": 1674243057972,
  "endTime": 1674243058072,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 12,
        "lineEnd": 12,
        "columnStart": 4,
        "columnEnd": 108
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 21,
        "lineEnd": 21,
        "columnStart": 1,
        "columnEnd": 68
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM scottcame/shiny-tomcat8-proxied\n\nLABEL maintainer=\"Scott Came (scottcame10@gmail.com)\" \\\n  org.label-schema.description=\"Image with Shibboleth Identity Provider to support shiny demo\" \\\n  org.label-schema.vcs-url=\"https://github.com/scottcame/shiny-microservice-demo/docker/shiny-idp\"\n\nWORKDIR /tmp\n\n# note that images (or other resources) used by the Velocity templates in the webapp have to be installed in the war file, though\n# the .vm resources themselves can be copied into /opt/shibboleth-idp/views/\n# COPY files/*.png /tmp/\n\nRUN curl -f -SsO http://shibboleth.net/downloads/identity-provider/3.3.2/shibboleth-identity-provider-3.3.2.zip && \\\n\tunzip shibboleth-identity-provider-3.3.2.zip && cd shibboleth-identity-provider-3.3.2 && \\\n\techo \"idp.entityID=https://idp.localhost.localdomain/idp/shibboleth\" > props && \\\n\tbin/install.sh -Didp.target.dir=/opt/shibboleth-idp -Didp.host.name=localhost -Didp.sealer.password=password \\\n\t\t-Didp.keystore.password=password -Didp.src.dir=/tmp/shibboleth-identity-provider-3.3.2 -Didp.scope=localdomain \\\n\t\t-Didp.noprompt=true -Didp.merge.properties=props && \\\n\tcd /opt/shibboleth-idp/war && mkdir tmp && \\\n\tmv idp.war tmp/ && cd tmp && \\\n\tunzip idp.war && \\\n\tcurl -f -SsO https://repo1.maven.org/maven2/jstl/jstl/1.2/jstl-1.2.jar && \\\n\tmv jstl-1.2.jar WEB-INF/lib && \\\n\t# mv /tmp/*.png images/ && \\\n\tcd .. && jar -cvfM idp.war -C tmp/ . && \\\n\trm -rf tmp && rm -rf /tmp/*\n\nRUN cp -r /opt/shibboleth-idp/conf /tmp/\n\nCOPY files/saml-metadata.xml /opt/shibboleth-idp/metadata/saml-metadata.xml\nCOPY files/access-control.xml /opt/shibboleth-idp/conf/access-control.xml\nCOPY files/attribute-filter.xml /opt/shibboleth-idp/conf/attribute-filter.xml\nCOPY files/attribute-resolver.xml /opt/shibboleth-idp/conf/attribute-resolver.xml\nCOPY files/relying-party.xml /opt/shibboleth-idp/conf/relying-party.xml\nCOPY files/metadata-providers.xml /opt/shibboleth-idp/conf/metadata-providers.xml\nCOPY files/ldap.properties /opt/shibboleth-idp/conf/ldap.properties\nCOPY files/idp.properties /opt/shibboleth-idp/conf/idp.properties\nCOPY files/idp-signing-*.pem /opt/shibboleth-idp/credentials/\nCOPY files/login.vm /opt/shibboleth-idp/views/\n\nRUN mkdir -p /opt/tomcat/conf/Catalina/localhost\nRUN echo '<Context docBase=\"/opt/shibboleth-idp/war/idp.war\" privileged=\"true\" antiResourceLocking=\"false\" swallowOutput=\"true\" />' > /opt/tomcat/conf/Catalina/localhost/idp.xml\n\nWORKDIR /opt/shibboleth-idp\n"
}