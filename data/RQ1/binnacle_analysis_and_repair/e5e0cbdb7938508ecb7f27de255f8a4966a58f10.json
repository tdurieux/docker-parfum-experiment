{
  "startTime": 1674236916111,
  "endTime": 1674236916275,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 44,
        "lineEnd": 44,
        "columnStart": 4,
        "columnEnd": 93
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 27,
        "lineEnd": 27,
        "columnStart": 4,
        "columnEnd": 54
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 32,
        "lineEnd": 32,
        "columnStart": 4,
        "columnEnd": 45
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 40,
        "lineEnd": 40,
        "columnStart": 22,
        "columnEnd": 55
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 43,
        "lineEnd": 43,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 27,
        "lineEnd": 27,
        "columnStart": 4,
        "columnEnd": 54
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 32,
        "lineEnd": 32,
        "columnStart": 4,
        "columnEnd": 45
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 43,
        "lineEnd": 43,
        "columnStart": 4,
        "columnEnd": 27
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 27,
        "lineEnd": 27,
        "columnStart": 4,
        "columnEnd": 54
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 32,
        "lineEnd": 32,
        "columnStart": 4,
        "columnEnd": 45
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 40,
        "lineEnd": 40,
        "columnStart": 22,
        "columnEnd": 55
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 43,
        "lineEnd": 43,
        "columnStart": 4,
        "columnEnd": 27
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 27,
        "lineEnd": 27,
        "columnStart": 4,
        "columnEnd": 78
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 32,
        "lineEnd": 32,
        "columnStart": 4,
        "columnEnd": 69
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 43,
        "lineEnd": 43,
        "columnStart": 4,
        "columnEnd": 51
      }
    }
  ],
  "repairedDockerfile": "FROM phusion/baseimage:latest\nMAINTAINER pducharme@me.com\n# Set correct environment variables\nENV HOME /root\nENV DEBIAN_FRONTEND noninteractive\nENV LC_ALL C.UTF-8\nENV LANG en_US.UTF-8\nENV LANGUAGE en_US.UTF-8\n\n# Use baseimage-docker's init system\nCMD [\"/sbin/my_init\"]\n\n# Configure user nobody to match unRAID's settings\n RUN \\\n usermod -u 99 nobody && \\\n usermod -g 100 nobody && \\\n usermod -d /home nobody && \\\n chown -R nobody:users /home\n\n\n#Update APT-GET list\nRUN \\\n  apt-get update -q && \\\n  apt-get upgrade -y && \\\n  apt-get dist-upgrade -y\n\n# Install Common Dependencies\nRUN apt-get -y --no-install-recommends install curl software-properties-common && rm -rf /var/lib/apt/lists/*;\n\n# Install Oracle Java 8\nRUN echo oracle-java8-installer shared/accepted-oracle-license-v1-1 select true | /usr/bin/debconf-set-selections\nRUN add-apt-repository ppa:webupd8team/java && apt-get update\nRUN apt-get -y --no-install-recommends install oracle-java8-installer && rm -rf /var/lib/apt/lists/*;\nRUN update-java-alternatives -s java-8-oracle\nENV JAVA_HOME /usr/lib/jvm/java-8-oracle\nENV JAVA8_HOME /usr/lib/jvm/java-8-oracle\n\n# MongoDB\nRUN apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv 7F0CEB10\nADD mongodb.list /etc/apt/sources.list.d/mongodb.list\nRUN apt-get update && apt-get -y --no-install-recommends install mongodb-server && rm -rf /var/lib/apt/lists/*;\n\n# UniFi\nRUN apt-get -y --no-install-recommends install jsvc && rm -rf /var/lib/apt/lists/*;\nRUN curl -f -L -o unifi_sysvinit_all.deb https://dl.ubnt.com/unifi/5.6.37/unifi_sysvinit_all.deb\nRUN dpkg --install unifi_sysvinit_all.deb\n\n# Wipe out auto-generated data\nRUN rm -rf /var/lib/unifi/*\n\nEXPOSE 8080 8081 8443 8843 8880\n\nVOLUME [\"/var/lib/unifi\"]\n\nWORKDIR /var/lib/unifi\n\nADD run.sh /run.sh\nRUN chmod 755 /run.sh\n\nCMD [\"/run.sh\"]\n"
}