{
  "startTime": 1674246617278,
  "endTime": 1674246617415,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 26,
        "lineEnd": 26,
        "columnStart": 4,
        "columnEnd": 43
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 16,
        "lineEnd": 20,
        "columnStart": 4,
        "columnEnd": 11
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 16,
        "lineEnd": 20,
        "columnStart": 4,
        "columnEnd": 11
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "## -*- docker-image-name: \"scaleway/gogs:latest\" -*-\nARG SCW_ARCH\nFROM scaleway/golang:${SCW_ARCH}-latest\n\nMAINTAINER Scaleway <opensource@scaleway.com> (@scaleway)\n\nARG GOGS_RELEASE_URL\n\n\n# Prepare rootfs for image-builder\nRUN /usr/local/sbin/scw-builder-enter\n\n\n# Install packages\nRUN apt-get -qq update     \\\n && apt-get -y -q upgrade \\\n && apt-get install --no-install-recommends -y -q \\\n\tmailutils \\\n\tmysql-server-5.7 \\\n\tnginx \\\n\tsupervisor \\\n && apt-get clean && rm -rf /var/lib/apt/lists/*;\n\n\n# Install GOGS\nRUN adduser --disabled-login --gecos 'Gogs' git \\\n && curl -f --silent -L -O ${GOGS_RELEASE_URL} \\\n && tar xzf linux_amd64.tar.gz -C /usr/lib/ \\\n && echo \"PATH=$PATH:/usr/lib/gogs/\" > /etc/profile.d/golang.sh \\\n && rm /linux_amd64.tar.gz\n\n\n# Configure NginX\nRUN ln -sf /etc/nginx/sites-available/gogs /etc/nginx/sites-enabled/gogs \\\n && rm -f /etc/nginx/sites-enabled/default\n\n\n# Disable TLS (postfix)\nRUN sed -i \"s/smtpd_use_tls=yes/smtpd_use_tls=no/\" /etc/postfix/main.cf \\\n && sed -i \"s/inet_interfaces = .*/inet_interfaces = localhost/\" /etc/postfix/main.cf\n\n\nCOPY ./overlay/ /\n\nRUN systemctl enable mysql init-mysql init-gogs\n\n\n# Clean rootfs from image-builder\nRUN /usr/local/sbin/scw-builder-leave\n"
}