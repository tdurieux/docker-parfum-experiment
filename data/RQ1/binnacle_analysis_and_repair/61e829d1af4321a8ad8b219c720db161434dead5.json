{
  "startTime": 1674248783195,
  "endTime": 1674248783508,
  "originalSmells": [
    {
      "rule": "wgetUseHttpsUrl",
      "position": {
        "lineStart": 34,
        "lineEnd": 34,
        "columnStart": 4,
        "columnEnd": 60
      }
    },
    {
      "rule": "wgetUseHttpsUrl",
      "position": {
        "lineStart": 35,
        "lineEnd": 35,
        "columnStart": 4,
        "columnEnd": 63
      }
    },
    {
      "rule": "configureShouldUseBuildFlag",
      "position": {
        "lineStart": 52,
        "lineEnd": 52,
        "columnStart": 4,
        "columnEnd": 146
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 17,
        "lineEnd": 17,
        "columnStart": 4,
        "columnEnd": 31
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 22,
        "lineEnd": 22,
        "columnStart": 4,
        "columnEnd": 31
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 24,
        "lineEnd": 24,
        "columnStart": 4,
        "columnEnd": 35
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 25,
        "lineEnd": 25,
        "columnStart": 4,
        "columnEnd": 39
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 26,
        "lineEnd": 26,
        "columnStart": 4,
        "columnEnd": 37
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 27,
        "lineEnd": 27,
        "columnStart": 4,
        "columnEnd": 37
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 29,
        "lineEnd": 29,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 17,
        "lineEnd": 17,
        "columnStart": 4,
        "columnEnd": 31
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 22,
        "lineEnd": 22,
        "columnStart": 4,
        "columnEnd": 31
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 24,
        "lineEnd": 24,
        "columnStart": 4,
        "columnEnd": 35
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 25,
        "lineEnd": 25,
        "columnStart": 4,
        "columnEnd": 39
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 26,
        "lineEnd": 26,
        "columnStart": 4,
        "columnEnd": 37
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 27,
        "lineEnd": 27,
        "columnStart": 4,
        "columnEnd": 37
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 29,
        "lineEnd": 29,
        "columnStart": 4,
        "columnEnd": 30
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 17,
        "lineEnd": 17,
        "columnStart": 4,
        "columnEnd": 31
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 22,
        "lineEnd": 22,
        "columnStart": 4,
        "columnEnd": 31
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 24,
        "lineEnd": 24,
        "columnStart": 4,
        "columnEnd": 35
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 25,
        "lineEnd": 25,
        "columnStart": 4,
        "columnEnd": 39
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 26,
        "lineEnd": 26,
        "columnStart": 4,
        "columnEnd": 37
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 27,
        "lineEnd": 27,
        "columnStart": 4,
        "columnEnd": 37
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 29,
        "lineEnd": 29,
        "columnStart": 4,
        "columnEnd": 30
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 17,
        "lineEnd": 17,
        "columnStart": 4,
        "columnEnd": 55
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 22,
        "lineEnd": 22,
        "columnStart": 4,
        "columnEnd": 55
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 24,
        "lineEnd": 24,
        "columnStart": 4,
        "columnEnd": 59
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 25,
        "lineEnd": 25,
        "columnStart": 4,
        "columnEnd": 63
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 26,
        "lineEnd": 26,
        "columnStart": 4,
        "columnEnd": 61
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 27,
        "lineEnd": 27,
        "columnStart": 4,
        "columnEnd": 61
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 29,
        "lineEnd": 29,
        "columnStart": 4,
        "columnEnd": 54
      }
    }
  ],
  "repairedDockerfile": "# Based on manual compile instructions at http://wiki.nginx.org/HttpLuaModule#Installation\nFROM ubuntu:14.04\n\nENV VER_NGINX_DEVEL_KIT=0.2.19\nENV VER_LUA_NGINX_MODULE=0.9.16\nENV VER_NGINX=1.7.10\nENV VER_LUAJIT=2.0.4\n\nENV NGINX_DEVEL_KIT ngx_devel_kit-${VER_NGINX_DEVEL_KIT}\nENV LUA_NGINX_MODULE lua-nginx-module-${VER_LUA_NGINX_MODULE}\nENV NGINX_ROOT=/nginx\nENV WEB_DIR ${NGINX_ROOT}/html\n\nENV LUAJIT_LIB /usr/local/lib\nENV LUAJIT_INC /usr/local/include/luajit-2.0\n\nRUN apt-get -qq update\nRUN apt-get -qq --no-install-recommends -y install wget && rm -rf /var/lib/apt/lists/*;\n\n# ***** BUILD DEPENDENCIES *****\n\n# Common dependencies (Nginx and LUAJit)\nRUN apt-get -qq --no-install-recommends -y install make && rm -rf /var/lib/apt/lists/*;\n# Nginx dependencies\nRUN apt-get -qq --no-install-recommends -y install libpcre3 && rm -rf /var/lib/apt/lists/*;\nRUN apt-get -qq --no-install-recommends -y install libpcre3-dev && rm -rf /var/lib/apt/lists/*;\nRUN apt-get -qq --no-install-recommends -y install zlib1g-dev && rm -rf /var/lib/apt/lists/*;\nRUN apt-get -qq --no-install-recommends -y install libssl-dev && rm -rf /var/lib/apt/lists/*;\n# LUAJit dependencies\nRUN apt-get -qq --no-install-recommends -y install gcc && rm -rf /var/lib/apt/lists/*;\n\n# ***** DOWNLOAD AND UNTAR *****\n\n# Download\nRUN wget https://nginx.org/download/nginx-${VER_NGINX}.tar.gz\nRUN wget https://luajit.org/download/LuaJIT-${VER_LUAJIT}.tar.gz\nRUN wget https://github.com/simpl/ngx_devel_kit/archive/v${VER_NGINX_DEVEL_KIT}.tar.gz -O ${NGINX_DEVEL_KIT}.tar.gz\nRUN wget https://github.com/openresty/lua-nginx-module/archive/v${VER_LUA_NGINX_MODULE}.tar.gz -O ${LUA_NGINX_MODULE}.tar.gz\n# Untar\nRUN tar -xzvf nginx-${VER_NGINX}.tar.gz && rm nginx-${VER_NGINX}.tar.gz\nRUN tar -xzvf LuaJIT-${VER_LUAJIT}.tar.gz && rm LuaJIT-${VER_LUAJIT}.tar.gz\nRUN tar -xzvf ${NGINX_DEVEL_KIT}.tar.gz && rm ${NGINX_DEVEL_KIT}.tar.gz\nRUN tar -xzvf ${LUA_NGINX_MODULE}.tar.gz && rm ${LUA_NGINX_MODULE}.tar.gz\n\n# ***** BUILD FROM SOURCE *****\n\n# LuaJIT\nWORKDIR /LuaJIT-${VER_LUAJIT}\nRUN make\nRUN make install\n# Nginx with LuaJIT\nWORKDIR /nginx-${VER_NGINX}\nRUN ./configure --build=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\" --prefix=${NGINX_ROOT} --with-ld-opt=\"-Wl,-rpath,${LUAJIT_LIB}\" --add-module=/${NGINX_DEVEL_KIT} --add-module=/${LUA_NGINX_MODULE}\nRUN make -j2\nRUN make install\nRUN ln -s ${NGINX_ROOT}/sbin/nginx /usr/local/sbin/nginx\n\n# ***** MISC *****\nWORKDIR ${WEB_DIR}\nEXPOSE 80\nEXPOSE 443\n\n# ***** CLEANUP *****\nRUN rm -rf /nginx-${VER_NGINX}\nRUN rm -rf /LuaJIT-${VER_LUAJIT}\nRUN rm -rf /${NGINX_DEVEL_KIT}\nRUN rm -rf /${LUA_NGINX_MODULE}\n# TODO: Uninstall build only dependencies?\n# TODO: Remove env vars used only for build?\n\n# This is the default CMD used by nginx:1.9.2 image\nCMD [\"nginx\", \"-g\", \"daemon off;\"]\n"
}