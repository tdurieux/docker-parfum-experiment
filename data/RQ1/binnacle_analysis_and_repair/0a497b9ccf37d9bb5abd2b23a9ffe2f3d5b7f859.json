{
  "startTime": 1674249223193,
  "endTime": 1674249223224,
  "originalSmells": [
    {
      "rule": "npmCacheCleanAfterInstall",
      "position": {
        "lineStart": 10,
        "lineEnd": 10,
        "columnStart": 4,
        "columnEnd": 15
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM node:9 as builder\n\nLABEL description=\"Landingpage for 'what the street'\"\nLABEL project=\"lab-whatthestreet\"\nLABEL maintainer=\"florian.porada@moovel.com\"\n\nWORKDIR /usr/src/app\n\nCOPY package*.json ./\n\nRUN npm install && npm cache clean --force;\n\nCOPY . .\n\nRUN npm run build\n\nFROM node:9\n\nWORKDIR /usr/src/app\n\nCOPY --from=builder /usr/src/app/.next /usr/src/app/.next\nCOPY --from=builder /usr/src/app/node_modules /usr/src/app/node_modules\nCOPY --from=builder /usr/src/app/server /usr/src/app/server\nCOPY --from=builder /usr/src/app/static /usr/src/app/static\nCOPY --from=builder /usr/src/app/config.json /usr/src/app/\nCOPY --from=builder /usr/src/app/next.config.js /usr/src/app/\nCOPY --from=builder /usr/src/app/gifgallery.json /usr/src/app/\nCOPY --from=builder /usr/src/app/package.json /usr/src/app/\n\n# We need to env var only at runtime with whatthestreet\nARG mapbox_token\nENV env_mapbox_token=$mapbox_token\nARG ga_id\nENV env_ga_id=$ga_id\n#example: /project/whatthestreet\nARG URL_PREFIX=\"\"\nENV URL_PREFIX $URL_PREFIX\n#example: whatthestreet.moovellab.com\nARG ROOT_URL=\"\"\nENV ROOT_URL $ROOT_URL\n#example: https://s3-eu-west-1.amazonaws.com/gif.whatthestreet.moovellab.com\nARG S3_GIF_BUCKET=\"https://s3-eu-west-1.amazonaws.com/gif.whatthestreet.moovellab.com\"\nENV ROOT_URL $S3_GIF_BUCKET\n\nEXPOSE 80\n\nCMD [\"npm\", \"start\"]"
}