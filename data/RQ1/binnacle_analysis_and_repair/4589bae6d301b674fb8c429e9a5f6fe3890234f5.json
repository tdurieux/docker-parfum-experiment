{
  "startTime": 1674245067648,
  "endTime": 1674245067681,
  "originalSmells": [
    {
      "rule": "apkAddUseNoCache",
      "position": {
        "lineStart": 10,
        "lineEnd": 10,
        "columnStart": 4,
        "columnEnd": 26
      }
    },
    {
      "rule": "apkAddUseNoCache",
      "position": {
        "lineStart": 11,
        "lineEnd": 11,
        "columnStart": 4,
        "columnEnd": 18
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM maven:3.5-jdk-8-alpine as build\nCOPY . /app/\nWORKDIR /app\nRUN mvn clean install dependency:copy-dependencies\n\n\nFROM schaff/vtk-openjdk-alpine:latest\n\nRUN mkdir -p /usr/local/app && \\\n\tapk update && \\\n    apk add --no-cache openssh-client && \\\n    apk add --no-cache screen\n\nWORKDIR /usr/local/app\n\nCOPY --from=build \\\n     /app/vcell-server/target/vcell-server-0.0.1-SNAPSHOT.jar \\\n     /app/vcell-server/target/maven-jars/*.jar \\\n     /app/vcell-oracle/target/vcell-oracle-0.0.1-SNAPSHOT.jar \\\n     /app/vcell-oracle/target/maven-jars/*.jar \\\n     /app/ojdbc6/src/ojdbc6.jar \\\n     /app/ucp/src/ucp.jar \\\n     ./lib/\n\n\nCOPY --from=build /app/pythonScripts ./pythonScripts\nCOPY --from=build /app/nativelibs/linux64 ./nativelibs/linux64\nCOPY --from=build /app/docker/vcell-master.log4j.xml .\n\nENV softwareVersion=SOFTWARE-VERSION-NOT-SET \\\n\tserverid=SITE \\\n\tdburl=\"db-url-not-set\" \\\n    dbdriver=\"db-driver-not-set\" \\\n    dbuser=\"db-user-not-set\" \\\n    jmshost_internal=activemq \\\n    jmsport_internal=61616 \\\n    jmsrestport_internal=8161 \\\n    jmsuser=clientUser \\\n    jmshost_external=\"jms-host-external-not-set\" \\\n    jmsport_external=\"jms-port-external-not-set\" \\\n    jmsrestport_external=\"jms-restport-external-not-set\" \\\n\tmongodb_host_internal=mongodb \\\n\tmongodb_port_internal=27017 \\\n    mongodb_database=test \\\n    mongodb_host_external=\"mongodb-host-external-not-set\" \\\n    mongodb_port_external=\"mongodb-port-external-not-set\" \\\n    export_baseurl=\"export-baseurl-not-set\" \\\n    simdatadir_external=/path/to/external/simdata/ \\\n    simdatadir_parallel_external=/path/to/external/parallel/simdata/ \\\n    htclogdir_internal=/path/to/internal/htclogs/ \\\n    htclogdir_external=/path/to/external/htclogs/ \\\n    nativesolverdir_external=/path/to/external/nativesolvers/ \\\n    htcnodelist=\"\" \\\n    singularity_imagefile=/path/to/external/singularity.img \\\n    docker_name=\"repo/namespace/vcell-batch:tag\" \\\n    batchhost=\"batch-host-not-set\" \\\n    batchuser=\"batch-user-not-set\" \\\n    slurm_cmd_sbatch=sbatch \\\n    slurm_cmd_sacct=sacct \\\n    slurm_cmd_scancel=scancel \\\n    slurm_cmd_squeue=squeue \\\n    slurm_partition=vcell \\\n    slurm_tmpdir=\"slurm-tmpdir-not-set\" \\\n    maxJobsPerScan=max-jobs-per-scan-not-set \\\n    maxJobsPerSite=max-jobs-per-site-not-set \\\n\tmaxOdeJobsPerUser=max-ode-jobs-per-user-not-set \\\n\tmaxPdeJobsPerUser=max-pde-jobs-per-user-not-set \\\n    jmsblob_minsize=100000 \\\n    simdataCacheSize=simdata-cache-size-not-set\n\nENV dbpswdfile=/run/secrets/dbpswd \\\n    jmspswdfile=/run/secrets/jmspswd \\\n    batchuserkeyfile=/run/secrets/batchuserkeyfile\n\nVOLUME /simdata\nVOLUME /exportdir\nVOLUME /htclogs\n\nEXPOSE 8000\n\nENTRYPOINT java \\\n\t-Xdebug -Xrunjdwp:transport=dt_socket,address=8000,server=y,suspend=n \\\n\t-XX:+UnlockExperimentalVMOptions -XX:+UseCGroupMemoryLimitForHeap -XX:MaxRAMFraction=1 -Xms64M \\\n    -Djava.awt.headless=true \\\n\t-Dvcell.softwareVersion=\"${softwareVersion}\" \\\n\t-Djava.util.logging.manager=org.apache.logging.log4j.jul.LogManager \\\n\t-Dlog4j.configurationFile=/usr/local/app/vcell-master.log4j.xml \\\n\t-Dvcell.server.id=\"${serverid}\" \\\n\t-Dvcell.python.executable=/usr/bin/python \\\n\t-Dvcell.primarySimdatadir.internal=/simdata \\\n\t-Dvcell.simdataCacheSize=\"${simdataCacheSize}\" \\\n\t-Dvcell.primarySimdatadir.external=\"${simdatadir_external}\" \\\n\t-Dvcell.parallelDatadir.external=\"${simdatadir_parallel_external}\" \\\n\t-Dvcell.nativesolverdir.external=\"${nativesolverdir_external}\" \\\n\t-Dvcell.export.baseDir.internal=/exportdir/ \\\n\t-Dvcell.export.baseURL=\"${export_baseurl}\" \\\n\t-Dvcell.htc.user=\"${batchuser}\" \\\n\t-Dvcell.htc.logdir.internal=/htclogs \\\n\t-Dvcell.htc.logdir.external=\"${htclogdir_external}\" \\\n\t-Dvcell.htc.nodelist=\"${htcnodelist}\" \\\n\t-Dvcell.slurm.cmd.sbatch=\"${slurm_cmd_sbatch}\" \\\n\t-Dvcell.slurm.cmd.sacct=\"${slurm_cmd_sacct}\" \\\n\t-Dvcell.slurm.cmd.squeue=\"${slurm_cmd_squeue}\" \\\n\t-Dvcell.slurm.cmd.scancel=\"${slurm_cmd_scancel}\" \\\n\t-Dvcell.slurm.partition=\"${slurm_partition}\" \\\n\t-Dvcell.slurm.tmpdir=\"${slurm_tmpdir}\" \\\n\t-Dvcell.batch.singularity.image=\"${singularity_imagefile}\" \\\n\t-Dvcell.batch.docker.name=\"${docker_name}\" \\\n\t-Dvcell.simulation.postprocessor=JavaPostprocessor64 \\\n\t-Dvcell.simulation.preprocessor=JavaPreprocessor64 \\\n\t-Dvcell.javaSimulation.executable=JavaSimExe64 \\\n\t-Dvcell.installDir=/usr/local/app \\\n\t-Dvcell.server.dbConnectURL=\"${dburl}\" \\\n\t-Dvcell.server.dbDriverName=\"${dbdriver}\" \\\n\t-Dvcell.server.dbUserid=\"${dbuser}\" \\\n\t-Dvcell.db.pswdfile=\"${dbpswdfile}\" \\\n\t-Dvcell.jms.host.internal=\"${jmshost_internal}\" \\\n\t-Dvcell.jms.port.internal=\"${jmsport_internal}\" \\\n\t-Dvcell.jms.restport.internal=\"${jmsrestport_internal}\" \\\n\t-Dvcell.jms.host.external=\"${jmshost_external}\" \\\n\t-Dvcell.jms.port.external=\"${jmsport_external}\" \\\n\t-Dvcell.jms.restport.external=\"${jmsrestport_external}\" \\\n\t-Dvcell.jms.blobMessageUseMongo=true \\\n\t-Dvcell.jms.blobMessageMinSize=\"${jmsblob_minsize}\" \\\n\t-Dvcell.jms.user=\"${jmsuser}\" \\\n\t-Dvcell.jms.pswdfile=\"${jmspswdfile}\" \\\n\t-Dvcell.mongodb.host.internal=${mongodb_host_internal} \\\n\t-Dvcell.mongodb.port.internal=${mongodb_port_internal} \\\n\t-Dvcell.mongodb.host.external=${mongodb_host_external} \\\n\t-Dvcell.mongodb.port.external=${mongodb_port_external} \\\n\t-Dvcell.mongodb.database=${mongodb_database} \\\n\t-Dvcell.server.maxJobsPerScan=${maxJobsPerScan} \\\n\t-Dvcell.server.maxJobsPerSite=${maxJobsPerSite} \\\n\t-Dvcell.server.maxOdeJobsPerUser=${maxOdeJobsPerUser} \\\n\t-Dvcell.server.maxPdeJobsPerUser=${maxPdeJobsPerUser} \\\n\t-Dvcell.limit.jobMemoryMB=2000 \\\n\t-cp \"./lib/*\" cbit.vcell.message.server.combined.VCellServices \\\n\t\"${batchhost}\" \"${batchuser}\" \"${batchuserkeyfile}\"\n"
}