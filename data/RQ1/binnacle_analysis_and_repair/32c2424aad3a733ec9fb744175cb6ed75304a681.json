{
  "startTime": 1674250380665,
  "endTime": 1674250381082,
  "originalSmells": [
    {
      "rule": "npmCacheCleanAfterInstall",
      "position": {
        "lineStart": 33,
        "lineEnd": 33,
        "columnStart": 9,
        "columnEnd": 56
      }
    },
    {
      "rule": "npmCacheCleanAfterInstall",
      "position": {
        "lineStart": 63,
        "lineEnd": 63,
        "columnStart": 4,
        "columnEnd": 15
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 71,
        "lineEnd": 71,
        "columnStart": 9,
        "columnEnd": 26
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 80,
        "lineEnd": 80,
        "columnStart": 4,
        "columnEnd": 31
      }
    },
    {
      "rule": "aptGetInstallUseY",
      "position": {
        "lineStart": 4,
        "lineEnd": 4,
        "columnStart": 4,
        "columnEnd": 24
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 4,
        "lineEnd": 4,
        "columnStart": 4,
        "columnEnd": 24
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 30,
        "lineEnd": 30,
        "columnStart": 9,
        "columnEnd": 31
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 32,
        "lineEnd": 32,
        "columnStart": 9,
        "columnEnd": 38
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 35,
        "lineEnd": 35,
        "columnStart": 9,
        "columnEnd": 47
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 37,
        "lineEnd": 37,
        "columnStart": 9,
        "columnEnd": 56
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 39,
        "lineEnd": 39,
        "columnStart": 9,
        "columnEnd": 61
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 43,
        "lineEnd": 43,
        "columnStart": 9,
        "columnEnd": 32
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 4,
        "lineEnd": 4,
        "columnStart": 4,
        "columnEnd": 24
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 30,
        "lineEnd": 30,
        "columnStart": 9,
        "columnEnd": 31
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 32,
        "lineEnd": 32,
        "columnStart": 9,
        "columnEnd": 38
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 35,
        "lineEnd": 35,
        "columnStart": 9,
        "columnEnd": 47
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 37,
        "lineEnd": 37,
        "columnStart": 9,
        "columnEnd": 56
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 39,
        "lineEnd": 39,
        "columnStart": 9,
        "columnEnd": 61
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 43,
        "lineEnd": 43,
        "columnStart": 9,
        "columnEnd": 32
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 4,
        "lineEnd": 4,
        "columnStart": 4,
        "columnEnd": 24
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 30,
        "lineEnd": 30,
        "columnStart": 9,
        "columnEnd": 31
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 32,
        "lineEnd": 32,
        "columnStart": 9,
        "columnEnd": 38
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 35,
        "lineEnd": 35,
        "columnStart": 9,
        "columnEnd": 47
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 37,
        "lineEnd": 37,
        "columnStart": 9,
        "columnEnd": 56
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 39,
        "lineEnd": 39,
        "columnStart": 9,
        "columnEnd": 61
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 43,
        "lineEnd": 43,
        "columnStart": 9,
        "columnEnd": 32
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 4,
        "lineEnd": 4,
        "columnStart": 4,
        "columnEnd": 51
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 30,
        "lineEnd": 30,
        "columnStart": 9,
        "columnEnd": 55
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 32,
        "lineEnd": 32,
        "columnStart": 9,
        "columnEnd": 62
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 35,
        "lineEnd": 35,
        "columnStart": 9,
        "columnEnd": 71
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 37,
        "lineEnd": 37,
        "columnStart": 9,
        "columnEnd": 80
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 39,
        "lineEnd": 39,
        "columnStart": 9,
        "columnEnd": 85
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 43,
        "lineEnd": 43,
        "columnStart": 9,
        "columnEnd": 56
      }
    }
  ],
  "repairedDockerfile": "FROM ubuntu:18.04\n\n# update apt and sudo\nRUN apt-get update\nRUN apt-get install -y --no-install-recommends sudo && rm -rf /var/lib/apt/lists/*;\n\n# add unprivileged user\nRUN adduser --disabled-password --gecos '' singnet\nRUN adduser singnet sudo\nRUN echo '%sudo ALL=(ALL) NOPASSWD:ALL' >> /etc/sudoers\nUSER singnet\nRUN umask 0000\nRUN echo 'umask 0000' >> ${HOME}/.bashrc\n\n# setup environment variables\nENV ROOT /home/singnet\nENV GOPATH ${ROOT}\nENV BIN ${GOPATH}/bin\nENV PATH ${BIN}:${PATH}\nENV LOG ${ROOT}/log\nENV IPFS ${ROOT}/ipfs\nENV SINGNET ${GOPATH}/src/github.com/singnet\n\n# setup folders needed\nRUN mkdir -p ${BIN}\nRUN mkdir -p ${LOG}\nRUN mkdir -p ${IPFS}\nRUN mkdir -p ${SINGNET}\n\n# install git\nRUN sudo apt-get install --no-install-recommends -y git && rm -rf /var/lib/apt/lists/*;\n# install NodeJS dev environment\nRUN sudo apt-get install --no-install-recommends -y nodejs npm && rm -rf /var/lib/apt/lists/*;\nRUN sudo npm install -g ganache-cli@6.2.4 truffle@4.1.14 && npm cache clean --force;\n# install Python dev environment\nRUN sudo apt-get install --no-install-recommends -y python3 python3-pip && rm -rf /var/lib/apt/lists/*;\n# install other libraries\nRUN sudo apt-get install --no-install-recommends -y libudev-dev libusb-1.0-0-dev && rm -rf /var/lib/apt/lists/*;\n# additional tools\nRUN sudo apt-get install --no-install-recommends -y net-tools screen vim wget nano jq && rm -rf /var/lib/apt/lists/*;\n\n# install IPFS\nENV IPFS_PATH ${IPFS}\nRUN sudo apt-get install --no-install-recommends -y curl && rm -rf /var/lib/apt/lists/*;\nCOPY ./install_ipfs.sh ${GOPATH}/bin/\nRUN install_ipfs.sh\n# setup IPFS\nRUN ipfs init\nRUN ipfs bootstrap rm --all\nRUN ipfs config Addresses.API /ip4/127.0.0.1/tcp/5002\nRUN ipfs config Addresses.Gateway /ip4/0.0.0.0/tcp/8081\n\n# token-contracts\nWORKDIR ${SINGNET}\nRUN git clone https://github.com/singnet/token-contracts\nWORKDIR ${SINGNET}/token-contracts\nRUN git checkout -b demo v1.0.0\n\n# plaform-contracts\nWORKDIR ${SINGNET}\nRUN git clone https://github.com/singnet/platform-contracts\nWORKDIR ${SINGNET}/platform-contracts\nRUN git checkout -b demo v0.2.5\nRUN npm install && npm cache clean --force;\n\n# snet-cli\nWORKDIR ${SINGNET}\nRUN git clone https://github.com/singnet/snet-cli\nWORKDIR ${SINGNET}/snet-cli\nRUN git checkout -b demo v0.1.9\nRUN ./scripts/blockchain install\nRUN sudo pip3 install --no-cache-dir -e .\n\n# snet-daemon\nWORKDIR ${SINGNET}\nRUN git clone https://github.com/singnet/snet-daemon\nWORKDIR ${SINGNET}/snet-daemon\nRUN git checkout -b demo v0.1.4\nWORKDIR /tmp\nRUN wget https://github.com/singnet/snet-daemon/releases/download/v0.1.4/snetd-0.1.4.tar.gz && \\\n    tar -xvf snetd-0.1.4.tar.gz && \\\n    mv ./snetd-0.1.4/snetd-linux-amd64 ${BIN}/snetd-linux-amd64 && rm snetd-0.1.4.tar.gz\n\n# wiki\nWORKDIR ${SINGNET}\nRUN git clone https://github.com/singnet/wiki\n\n# publish Ethereum related environment variables\nENV NETWORK_ID 12345\nENV DEPLOYER_ADDR 0x592E3C0f3B038A0D673F19a18a773F993d4b2610\nENV DEPLOYER_KEY 0xc71478a6d0fe44e763649de0a0deb5a080b788eefbbcf9c6f7aef0dd5dbd67e0\nENV CALLER_ADDR 0x3b2b3C2e2E7C93db335E69D827F3CC4bC2A2A2cB\nENV CALLER_KEY 0x04899d5fd471ce68f84a5ec64e2e4b6b045d8b850599a57f5b307024be01f262\nENV PUBLISHER_ADDR 0x0067b427E299Eb2A4CBafc0B04C723F77c6d8a18\nENV PUBLISHER_KEY 0xba398df3130586b0d5e6ef3f757bf7fe8a1299d4b7268fdaae415952ed30ba87\nENV TOKEN_ADDR 0x6e5f20669177f5bdf3703ec5ea9c4d4fe3aabd14\nENV REGISTRY_ADDR 0x4e74fefa82e83e0964f0d9f53c68e03f7298a8b2\nENV MULTIPARTYESCROW_ADDR 0x5c7a4290f6f8ff64c69eeffdfafc8644a4ec3a4e\n\n# setup snet-cli\n#RUN snet network create --force local http://127.0.0.1:8545\nRUN snet || true\nCOPY ./add_local_network.sh ${GOPATH}/bin\nRUN add_local_network.sh\nRUN snet identity create deployer key --private-key ${DEPLOYER_KEY}\nRUN snet identity create caller key --private-key ${CALLER_KEY}\nRUN snet identity deployer\nRUN snet network local\nRUN snet set default_ipfs_endpoint http://localhost:5002\nRUN snet set current_singularitynettoken_at ${TOKEN_ADDR}\nRUN snet set current_registry_at ${REGISTRY_ADDR}\nRUN snet set current_multipartyescrow_at ${MULTIPARTYESCROW_ADDR}\n\n# prepare environment for examples\nCOPY ./start_environment.sh ${GOPATH}/bin/\nCOPY ./stop_service.sh ${GOPATH}/bin\nRUN mkdir -p ${SINGNET}/examples/\nCOPY --chown=singnet:singnet ./examples ${SINGNET}/examples/\nCMD start_environment.sh\n"
}