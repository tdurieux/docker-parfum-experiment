{
  "startTime": 1674241939850,
  "endTime": 1674241940873,
  "originalSmells": [
    {
      "rule": "configureShouldUseBuildFlag",
      "position": {
        "lineStart": 53,
        "lineEnd": 53,
        "columnStart": 30,
        "columnEnd": 41
      }
    },
    {
      "rule": "configureShouldUseBuildFlag",
      "position": {
        "lineStart": 54,
        "lineEnd": 54,
        "columnStart": 61,
        "columnEnd": 72
      }
    },
    {
      "rule": "configureShouldUseBuildFlag",
      "position": {
        "lineStart": 55,
        "lineEnd": 55,
        "columnStart": 59,
        "columnEnd": 101
      }
    },
    {
      "rule": "configureShouldUseBuildFlag",
      "position": {
        "lineStart": 59,
        "lineEnd": 59,
        "columnStart": 7,
        "columnEnd": 771
      }
    },
    {
      "rule": "configureShouldUseBuildFlag",
      "position": {
        "lineStart": 75,
        "lineEnd": 82,
        "columnStart": 7,
        "columnEnd": 15
      }
    },
    {
      "rule": "configureShouldUseBuildFlag",
      "position": {
        "lineStart": 92,
        "lineEnd": 92,
        "columnStart": 7,
        "columnEnd": 18
      }
    },
    {
      "rule": "configureShouldUseBuildFlag",
      "position": {
        "lineStart": 101,
        "lineEnd": 101,
        "columnStart": 7,
        "columnEnd": 18
      }
    },
    {
      "rule": "configureShouldUseBuildFlag",
      "position": {
        "lineStart": 109,
        "lineEnd": 109,
        "columnStart": 7,
        "columnEnd": 18
      }
    },
    {
      "rule": "yumInstallRmVarCacheYum",
      "position": {
        "lineStart": 39,
        "lineEnd": 39,
        "columnStart": 4,
        "columnEnd": 56
      }
    },
    {
      "rule": "yumInstallRmVarCacheYum",
      "position": {
        "lineStart": 40,
        "lineEnd": 40,
        "columnStart": 7,
        "columnEnd": 59
      }
    },
    {
      "rule": "yumInstallRmVarCacheYum",
      "position": {
        "lineStart": 41,
        "lineEnd": 41,
        "columnStart": 7,
        "columnEnd": 72
      }
    },
    {
      "rule": "yumInstallRmVarCacheYum",
      "position": {
        "lineStart": 42,
        "lineEnd": 42,
        "columnStart": 7,
        "columnEnd": 41
      }
    },
    {
      "rule": "yumInstallRmVarCacheYum",
      "position": {
        "lineStart": 43,
        "lineEnd": 43,
        "columnStart": 7,
        "columnEnd": 57
      }
    },
    {
      "rule": "yumInstallRmVarCacheYum",
      "position": {
        "lineStart": 44,
        "lineEnd": 44,
        "columnStart": 7,
        "columnEnd": 63
      }
    },
    {
      "rule": "yumInstallRmVarCacheYum",
      "position": {
        "lineStart": 45,
        "lineEnd": 45,
        "columnStart": 7,
        "columnEnd": 43
      }
    },
    {
      "rule": "yumInstallRmVarCacheYum",
      "position": {
        "lineStart": 46,
        "lineEnd": 46,
        "columnStart": 7,
        "columnEnd": 32
      }
    },
    {
      "rule": "yumInstallRmVarCacheYum",
      "position": {
        "lineStart": 47,
        "lineEnd": 47,
        "columnStart": 7,
        "columnEnd": 36
      }
    },
    {
      "rule": "yumInstallRmVarCacheYum",
      "position": {
        "lineStart": 48,
        "lineEnd": 48,
        "columnStart": 7,
        "columnEnd": 32
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 52,
        "lineEnd": 52,
        "columnStart": 4,
        "columnEnd": 36
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 54,
        "lineEnd": 54,
        "columnStart": 7,
        "columnEnd": 37
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 55,
        "lineEnd": 55,
        "columnStart": 7,
        "columnEnd": 36
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 58,
        "lineEnd": 58,
        "columnStart": 7,
        "columnEnd": 43
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 74,
        "lineEnd": 74,
        "columnStart": 7,
        "columnEnd": 46
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 90,
        "lineEnd": 90,
        "columnStart": 7,
        "columnEnd": 36
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 99,
        "lineEnd": 99,
        "columnStart": 7,
        "columnEnd": 47
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 107,
        "lineEnd": 107,
        "columnStart": 7,
        "columnEnd": 34
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 116,
        "lineEnd": 116,
        "columnStart": 7,
        "columnEnd": 41
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "#FROM centos:centos6.8\nFROM daocloud.io/centos:6.8\n\nMAINTAINER yjc@52fhy.com\n\n# php\nENV PHP_VERSION 7.1.12\nENV PHP_URL=\"http://cn2.php.net/distributions/php-${PHP_VERSION}.tar.bz2\"\n\n# nginx\nENV NGINX_VERSION 1.12.2\n\n# redis\nENV REDIS_VER 3.2.6\n\n# php-ext\t\nENV SWOOLE_VER 1.10.1\n# https://github.com/swoole/swoole-src/archive/v1.10.1.tar.gz\n\nENV PHPREDIS_VER 3.0.0\nENV YAR_VER 2.0.2\nENV PHP_INI_FILE=\"/usr/local/php/etc/php.ini\"\n\nCOPY libmcrypt-2.5.8.tar.gz /libmcrypt-2.5.8.tar.gz\nCOPY mcrypt-2.6.8.tar.gz /mcrypt-2.6.8.tar.gz\nCOPY mhash-0.9.9.9.tar.gz /mhash-0.9.9.9.tar.gz\n\nCOPY nginx-${NGINX_VERSION}.tar.gz /nginx-${NGINX_VERSION}.tar.gz\n\nCOPY swoole-src-${SWOOLE_VER}.tar.gz /${SWOOLE_VER}.tar.gz\n\n\nCOPY redis-${REDIS_VER}.tar.gz /redis-${REDIS_VER}.tar.gz\nCOPY phpredis-${PHPREDIS_VER}.tar.gz /phpredis-${PHPREDIS_VER}.tar.gz\nCOPY yar-${YAR_VER}.tgz /yar-${YAR_VER}.tgz\n\nENV TZ=Asia/Shanghai\nRUN ln -snf /usr/share/zoneinfo/$TZ /etc/localtime && echo $TZ > /etc/timezone\n\nRUN yum install -y gcc gcc-c++ bison autoconf wget lrzsz \\\n    && yum install -y make cmake libtool libtool-ltdl-devel \\\n    && yum install -y libjpeg-devel libpng-devel freetype-devel gd-devel \\\n    && yum install -y python-devel  patch \\\n    && yum install -y openssl openssl-devel ncurses-devel \\\n    && yum install -y bzip2 bzip2-devel.x86_64 unzip zlib-devel \\\n    && yum install -y libxml2 libxml2-devel \\\n    && yum install -y curl-devel \\\n    && yum install -y readline-devel \\\n    && yum install -y pcre-devel \\\n    && yum clean all && rm -rf /var/cache/yum\n\n#   RUN wget -O /libmcrypt-2.5.8.tar.gz ftp://mcrypt.hellug.gr/pub/crypto/mcrypt/libmcrypt/libmcrypt-2.5.7.tar.gz \\\nRUN tar zxvf /libmcrypt-2.5.8.tar.gz \\\n    && cd /libmcrypt-2.5.8 && ./configure --build=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\" && make && make install && cd - / && rm -rf /libmcrypt* \\\n    && tar zxvf /mhash-0.9.9.9.tar.gz && cd mhash-0.9.9.9 && ./configure --build=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\" && make && make install && cd - / && rm -rf /mhash* \\\n    && tar zxvf /mcrypt-2.6.8.tar.gz && cd mcrypt-2.6.8 && LD_LIBRARY_PATH=/usr/local/lib ./configure --build=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\" && make && make install && cd - / && rm -rf /mcrypt* && rm /libmcrypt-2.5.8.tar.gz\n\nRUN wget -O /php-${PHP_VERSION}.tar.bz2 \"$PHP_URL\" \\\n    && tar jxvf /php-${PHP_VERSION}.tar.bz2 && cd php-${PHP_VERSION}/ \\\n    && ./configure --build=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\" --prefix=/usr/local/php --with-config-file-scan-dir=/usr/local/php/etc/ --enable-inline-optimization --enable-opcache --enable-session --enable-fpm --with-fpm-user=www --with-fpm-group=www --with-mysql=mysqlnd --with-mysqli=mysqlnd --with-pdo-mysql=mysqlnd --with-pdo-sqlite --with-sqlite3 --with-gettext --enable-mbregex --enable-mbstring --enable-xml --with-iconv --with-mcrypt --with-mhash --with-openssl --enable-bcmath --enable-soap --with-xmlrpc --with-libxml-dir --enable-pcntl --enable-shmop --enable-sysvmsg --enable-sysvsem --enable-sysvshm --enable-sockets --with-curl --with-curlwrappers --with-zlib --enable-zip --with-bz2 --with-gd --enable-gd-native-ttf --with-jpeg-dir --with-png-dir --with-freetype-dir --with-iconv-dir --with-readline \\\n    && make && make install \\\n    && cp php.ini-production php.ini \\\n    && cp php.ini* /usr/local/php/etc/ \\\n    && cp /usr/local/php/etc/php-fpm.conf.default  /usr/local/php/etc/php-fpm.conf \\\n    && cp /usr/local/php/etc/php-fpm.d/www.conf.default /usr/local/php/etc/php-fpm.d/www.conf \\\n    && make clean && yum clean all && cd - && rm -rf /php-${PHP_VERSION}* \\\n    && ln -sf /usr/local/php/bin/* /usr/bin/ \\\n    && ln -sf /usr/local/php/sbin/* /usr/bin/ \\\n\t&& sed -i \"s/;date.timezone =/date.timezone =PRC/\" /usr/local/php/etc/php.ini && rm /php-${PHP_VERSION}.tar.bz2\n\nRUN useradd www\n\n#RUN wget -O /nginx-${NGINX_VERSION}.tar.gz http://nginx.org/download/nginx-${NGINX_VERSION}.tar.gz \\\nRUN echo 'install nginx' \\\n    && tar zxvf /nginx-${NGINX_VERSION}.tar.gz && cd nginx-${NGINX_VERSION} \\\n    && ./configure --build=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\" \\\n    --prefix=/usr/local/nginx \\\n    --with-http_stub_status_module \\\n    --with-http_ssl_module \\\n    --with-http_realip_module \\\n    --with-http_sub_module \\\n    --with-http_gzip_static_module \\\n    --with-pcre \\\n    && make && make install \\\n    && ln -sf /usr/local/nginx/sbin/nginx /usr/bin \\\n    && make clean && yum clean all \\\n    && cd ../ && rm -rf nginx-${NGINX_VERSION}* && rm /nginx-${NGINX_VERSION}.tar.gz\n\n#RUN wget https://github.com/swoole/swoole-src/archive/swoole-src-${SWOOLE_VER}.tar.gz \\\nRUN echo 'install swoole' \\\n    && tar xzf /${SWOOLE_VER}.tar.gz && cd swoole-src-${SWOOLE_VER} \\\n\t&& phpize \\\n    && ./configure --build=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\" \\\n    && make && make install \\\n\t&& echo \"extension=swoole.so\" >> \"$PHP_INI_FILE\" \\\n    && cd ../ && rm -rf swoole-src-${SWOOLE_VER}* && rm /${SWOOLE_VER}.tar.gz\n\n#RUN wget https://codeload.github.com/phpredis/phpredis/tar.gz/${PHPREDIS_VER}.tar.gz\\\nRUN echo 'install phpredis' \\\n    && tar xzf /phpredis-${PHPREDIS_VER}.tar.gz && cd phpredis-${PHPREDIS_VER}/ \\\n\t&& phpize \\\n    && ./configure --build=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\" \\\n    && make && make install \\\n\t&& echo \"extension=redis.so\" >> \"$PHP_INI_FILE\" \\\n    && cd ../ && rm -rf phpredis-${PHPREDIS_VER}* && rm /phpredis-${PHPREDIS_VER}.tar.gz\n\nRUN echo 'install yar' \\\n    && tar xzf /yar-${YAR_VER}.tgz && cd yar-${YAR_VER}/ \\\n\t&& phpize \\\n    && ./configure --build=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\" \\\n    && make && make install \\\n\t&& echo \"extension=yar.so\" >> \"$PHP_INI_FILE\" \\\n    && cd ../ && rm -rf yar-${YAR_VER}* && rm /yar-${YAR_VER}.tgz\n\n#RUN wget http://download.redis.io/releases/redis-${REDIS_VER}.tar.gz \\\nRUN echo 'install redis' \\\n    && tar xzf /redis-${REDIS_VER}.tar.gz && cd redis-${REDIS_VER} \\\n    && make \\\n\t&& mkdir /usr/local/redis \\\n\t&& cp redis.conf /usr/local/redis/ \\\n\t&& cd src && cp  redis-benchmark redis-check-aof redis-check-rdb redis-cli redis-sentinel redis-server redis-trib.rb /usr/local/redis \\\n    && cd / && rm -rf redis-${REDIS_VER}* && rm /redis-${REDIS_VER}.tar.gz\n\nADD ./run.sh /run.sh\nRUN chmod 755 /run.sh\n\nCMD /run.sh && tail -f\n\nEXPOSE 80\nEXPOSE 9000\n\n#docker build -t php71-fpm-centos68 .\n\n"
}