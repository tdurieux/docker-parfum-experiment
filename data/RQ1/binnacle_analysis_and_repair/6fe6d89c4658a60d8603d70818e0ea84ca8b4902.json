{
  "startTime": 1674244568893,
  "endTime": 1674244569972,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 45,
        "lineEnd": 45,
        "columnStart": 14,
        "columnEnd": 96
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 56,
        "lineEnd": 56,
        "columnStart": 7,
        "columnEnd": 75
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 67,
        "lineEnd": 67,
        "columnStart": 14,
        "columnEnd": 123
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 78,
        "lineEnd": 78,
        "columnStart": 14,
        "columnEnd": 91
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 90,
        "lineEnd": 90,
        "columnStart": 14,
        "columnEnd": 94
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 101,
        "lineEnd": 101,
        "columnStart": 14,
        "columnEnd": 92
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 112,
        "lineEnd": 112,
        "columnStart": 14,
        "columnEnd": 81
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 145,
        "lineEnd": 145,
        "columnStart": 14,
        "columnEnd": 105
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 168,
        "lineEnd": 168,
        "columnStart": 14,
        "columnEnd": 113
      }
    },
    {
      "rule": "rmRecursiveAfterMktempD",
      "position": {
        "lineStart": 167,
        "lineEnd": 167,
        "columnStart": 10,
        "columnEnd": 19
      }
    },
    {
      "rule": "curlUseHttpsUrl",
      "position": {
        "lineStart": 45,
        "lineEnd": 45,
        "columnStart": 14,
        "columnEnd": 96
      }
    },
    {
      "rule": "curlUseHttpsUrl",
      "position": {
        "lineStart": 67,
        "lineEnd": 67,
        "columnStart": 14,
        "columnEnd": 123
      }
    },
    {
      "rule": "curlUseHttpsUrl",
      "position": {
        "lineStart": 78,
        "lineEnd": 78,
        "columnStart": 14,
        "columnEnd": 91
      }
    },
    {
      "rule": "curlUseHttpsUrl",
      "position": {
        "lineStart": 90,
        "lineEnd": 90,
        "columnStart": 14,
        "columnEnd": 94
      }
    },
    {
      "rule": "curlUseHttpsUrl",
      "position": {
        "lineStart": 112,
        "lineEnd": 112,
        "columnStart": 14,
        "columnEnd": 81
      }
    },
    {
      "rule": "curlUseHttpsUrl",
      "position": {
        "lineStart": 145,
        "lineEnd": 145,
        "columnStart": 14,
        "columnEnd": 105
      }
    },
    {
      "rule": "configureShouldUseBuildFlag",
      "position": {
        "lineStart": 48,
        "lineEnd": 48,
        "columnStart": 14,
        "columnEnd": 63
      }
    },
    {
      "rule": "configureShouldUseBuildFlag",
      "position": {
        "lineStart": 59,
        "lineEnd": 59,
        "columnStart": 14,
        "columnEnd": 79
      }
    },
    {
      "rule": "configureShouldUseBuildFlag",
      "position": {
        "lineStart": 70,
        "lineEnd": 70,
        "columnStart": 14,
        "columnEnd": 96
      }
    },
    {
      "rule": "configureShouldUseBuildFlag",
      "position": {
        "lineStart": 83,
        "lineEnd": 83,
        "columnStart": 14,
        "columnEnd": 65
      }
    },
    {
      "rule": "configureShouldUseBuildFlag",
      "position": {
        "lineStart": 93,
        "lineEnd": 93,
        "columnStart": 14,
        "columnEnd": 65
      }
    },
    {
      "rule": "configureShouldUseBuildFlag",
      "position": {
        "lineStart": 104,
        "lineEnd": 104,
        "columnStart": 14,
        "columnEnd": 60
      }
    },
    {
      "rule": "configureShouldUseBuildFlag",
      "position": {
        "lineStart": 115,
        "lineEnd": 117,
        "columnStart": 14,
        "columnEnd": 119
      }
    },
    {
      "rule": "yumInstallRmVarCacheYum",
      "position": {
        "lineStart": 9,
        "lineEnd": 9,
        "columnStart": 4,
        "columnEnd": 24
      }
    },
    {
      "rule": "yumInstallRmVarCacheYum",
      "position": {
        "lineStart": 10,
        "lineEnd": 10,
        "columnStart": 4,
        "columnEnd": 108
      }
    },
    {
      "rule": "yumInstallRmVarCacheYum",
      "position": {
        "lineStart": 11,
        "lineEnd": 11,
        "columnStart": 4,
        "columnEnd": 37
      }
    },
    {
      "rule": "yumInstallRmVarCacheYum",
      "position": {
        "lineStart": 42,
        "lineEnd": 42,
        "columnStart": 4,
        "columnEnd": 111
      }
    },
    {
      "rule": "yumInstallRmVarCacheYum",
      "position": {
        "lineStart": 137,
        "lineEnd": 137,
        "columnStart": 4,
        "columnEnd": 65
      }
    },
    {
      "rule": "yumInstallRmVarCacheYum",
      "position": {
        "lineStart": 140,
        "lineEnd": 140,
        "columnStart": 4,
        "columnEnd": 73
      }
    },
    {
      "rule": "yumInstallRmVarCacheYum",
      "position": {
        "lineStart": 143,
        "lineEnd": 143,
        "columnStart": 4,
        "columnEnd": 29
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 46,
        "lineEnd": 46,
        "columnStart": 14,
        "columnEnd": 50
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 57,
        "lineEnd": 57,
        "columnStart": 7,
        "columnEnd": 32
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 68,
        "lineEnd": 68,
        "columnStart": 14,
        "columnEnd": 50
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 79,
        "lineEnd": 79,
        "columnStart": 14,
        "columnEnd": 50
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 91,
        "lineEnd": 91,
        "columnStart": 14,
        "columnEnd": 54
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 113,
        "lineEnd": 113,
        "columnStart": 14,
        "columnEnd": 54
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 146,
        "lineEnd": 146,
        "columnStart": 14,
        "columnEnd": 63
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 169,
        "lineEnd": 169,
        "columnStart": 14,
        "columnEnd": 55
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "# DOCKER-VERION:\t1.9.1\n# DESCRIPTION:\t\tImage with private webpagetest (www.webpagetest.org)\n# TO_BUILD:\t\tdocker build -rm -t wpt .\n# TO_RUN:\t\tdocker run -d --publish 80:80 --volume /tmp/wpt/results:/var/www/html/results webpagetest\n\nFROM centos:centos6\nMAINTAINER Yunkyung Lee <yunkyung@gmail.com>\n\n# for httpd, php\nRUN yum install -y httpd && rm -rf /var/cache/yum\nRUN yum install -y php php-devel php-pear php-mysql php-mbstring php-gd php-imap php-odbc php-xmlrpc php-xml && rm -rf /var/cache/yum\nRUN yum install -y gd gd-devel php-gd && rm -rf /var/cache/yum\n\n# PHP\nRUN sed -ri 's/zlib.output_compression = Off/zlib.output_compression = On/g' /etc/php.ini\nRUN sed -ri 's/upload_max_filesize = 2M/upload_max_filesize = 10M/g' /etc/php.ini\nRUN sed -ri 's/post_max_size = 8M/post_max_size = 15M/g' /etc/php.ini\nRUN sed -ri 's/memory_limit = 128M/memory_limit = -1/g' /etc/php.ini\n\n# System Utilities\n# ffmpeg for video recording\n# based on Julien Rottenberg <julien@rottenberg.info>\n# based on docker image  rottenberg/ffmpeg\n# From https://trac.ffmpeg.org/wiki/CompilationGuide/Centos\nENV\tFFMPEG_VERSION  2.8\nENV     MPLAYER_VERSION 1.1.1\nENV     YASM_VERSION    1.2.0\nENV     LAME_VERSION    3.99.5\nENV     FAAC_VERSION    1.28\nENV     XVID_VERSION    1.3.3\nENV     FDKAAC_VERSION  0.1.3\nENV     EXIFTOOL_VERSION 9.75\n# from https://github.com/WPO-Foundation/webpagetest base on pmeenan\nENV     WPT_VERSION 2.18\nENV     SRC             /usr/local\nENV     LD_LIBRARY_PATH ${SRC}/lib\nENV     PKG_CONFIG_PATH ${SRC}/lib/pkgconfig\n\nENV \tPATH /usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin: \n\nRUN bash -c 'set -euo pipefail'\n\nRUN yum install -y autoconf automake gcc gcc-c++ git libtool make nasm pkgconfig zlib-devel tar curl wget bzip2 && rm -rf /var/cache/yum\n# yasm\nRUN DIR=$(mktemp -d) && cd ${DIR} && \\\n              curl -f -Os https://www.tortall.net/projects/yasm/releases/yasm-${YASM_VERSION}.tar.gz && \\\n              tar xzvf yasm-${YASM_VERSION}.tar.gz && \\\n              cd yasm-${YASM_VERSION} && \\\n              ./configure --build=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\" --prefix=\"$SRC\" --bindir=\"${SRC}/bin\" && \\\n              make && \\\n              make install && \\\n              make distclean && \\\n              rm -rf ${DIR} && rm yasm-${YASM_VERSION}.tar.gz\n\n# x264\nRUN DIR=$(mktemp -d) && cd ${DIR} && \\\n\t\t\t\t\t\t\tcurl -f -Os ftp://ftp.videolan.org/pub/x264/snapshots/last_x264.tar.bz2 && \\\n\t\t\t\t\t\t\ttar xvf last_x264.tar.bz2 && \\\n              cd x264* && \\\n              ./configure --build=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\" --prefix=\"$SRC\" --bindir=\"${SRC}/bin\" --enable-static && \\\n              make && \\\n              make install && \\\n              make distclean && \\\n              rm -rf ${DIR} && rm last_x264.tar.bz2\n\n# libmp3lame\nRUN DIR=$(mktemp -d) && cd ${DIR} && \\\n              curl -f -L -Os https://downloads.sourceforge.net/project/lame/lame/${LAME_VERSION%.*}/lame-${LAME_VERSION}.tar.gz && \\\n              tar xzvf lame-${LAME_VERSION}.tar.gz && \\\n              cd lame-${LAME_VERSION} && \\\n              ./configure --build=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\" --prefix=\"${SRC}\" --bindir=\"${SRC}/bin\" --disable-shared --enable-nasm && \\\n              make && \\\n              make install && \\\n              make distclean && \\\n              rm -rf ${DIR} && rm lame-${LAME_VERSION}.tar.gz\n\n# faac + http://stackoverflow.com/a/4320377\nRUN DIR=$(mktemp -d) && cd ${DIR} && \\\n              curl -f -L -Os https://downloads.sourceforge.net/faac/faac-${FAAC_VERSION}.tar.gz && \\\n              tar xzvf faac-${FAAC_VERSION}.tar.gz && \\\n              cd faac-${FAAC_VERSION} && \\\n              sed -i '126d' common/mp4v2/mpeg4ip.h && \\\n              ./bootstrap && \\\n              ./configure --build=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\" --prefix=\"${SRC}\" --bindir=\"${SRC}/bin\" && \\\n              make && \\\n              make install && \\\n              rm -rf ${DIR} && rm faac-${FAAC_VERSION}.tar.gz\n\n# xvid\nRUN DIR=$(mktemp -d) && cd ${DIR} && \\\n              curl -f -L -Os https://downloads.xvid.org/downloads/xvidcore-${XVID_VERSION}.tar.gz && \\\n              tar xzvf xvidcore-${XVID_VERSION}.tar.gz && \\\n              cd xvidcore/build/generic && \\\n              ./configure --build=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\" --prefix=\"${SRC}\" --bindir=\"${SRC}/bin\" && \\\n              make && \\\n              make install && \\\n              rm -rf ${DIR} && rm xvidcore-${XVID_VERSION}.tar.gz\n\n\n# fdk-aac\nRUN DIR=$(mktemp -d) && cd ${DIR} && \\\n              curl -f -s https://codeload.github.com/mstorsjo/fdk-aac/tar.gz/v${FDKAAC_VERSION} | tar zxvf - && \\\n              cd fdk-aac-${FDKAAC_VERSION} && \\\n              autoreconf -fiv && \\\n              ./configure --build=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\" --prefix=\"${SRC}\" --disable-shared && \\\n              make && \\\n              make install && \\\n              make distclean && \\\n              rm -rf ${DIR}\n\n# ffmpeg\nRUN DIR=$(mktemp -d) && cd ${DIR} && \\\n              curl -f -Os https://ffmpeg.org/releases/ffmpeg-${FFMPEG_VERSION}.tar.gz && \\\n              tar xzvf ffmpeg-${FFMPEG_VERSION}.tar.gz && \\\n              cd ffmpeg-${FFMPEG_VERSION} && \\\n              ./configure --build=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\" --prefix=\"${SRC}\" --extra-cflags=\"-I${SRC}/include\" --extra-ldflags=\"-L${SRC}/lib\" --bindir=\"${SRC}/bin\" \\\n              --extra-libs=-ldl --enable-version3 --enable-libfaac --enable-libmp3lame --enable-libx264 --enable-libxvid --enable-gpl \\\n              --enable-postproc --enable-nonfree --enable-avresample --enable-libfdk_aac --disable-debug --enable-small && \\\n              make && \\\n              make install && \\\n              make distclean && \\\n              hash -r && \\\n              rm -rf ${DIR} && rm ffmpeg-${FFMPEG_VERSION}.tar.gz\n\n# mplayer\n#RUN DIR=$(mktemp -d) && cd ${DIR} && \\\n#              curl -Os http://mplayerhq.hu/MPlayer/releases/MPlayer-${MPLAYER_VERSION}.tar.xz && \\\n#              tar xvf MPlayer-${MPLAYER_VERSION}.tar.xz && \\\n#              cd MPlayer-${MPLAYER_VERSION} && \\\n#              ./configure --prefix=\"${SRC}\" --extra-cflags=\"-I${SRC}/include\" --extra-ldflags=\"-L${SRC}/lib\" --bindir=\"${SRC}/bin\" && \\\n#              make && \\\n#              make install && \\\n#              rm -rf ${DIR}\n\nRUN echo \"/usr/local/lib\" > /etc/ld.so.conf.d/libc.conf\n\n## install ImageMagick\nRUN yum install -y ImageMagick ImageMagick-devel ImageMagick-perl && rm -rf /var/cache/yum\n\n## install Jpegtran\nRUN yum -y install libjpeg-turbo-devel libjpeg-turbo-static libjpeg-turbo && rm -rf /var/cache/yum\n\n## install exiftool\nRUN yum install -y perl-devel && rm -rf /var/cache/yum\nRUN DIR=$(mktemp -d) && cd ${DIR} && \\\n              curl -f -Os https://owl.phy.queensu.ca/~phil/exiftool/Image-ExifTool-${EXIFTOOL_VERSION}.tar.gz && \\\n              tar xvf Image-ExifTool-${EXIFTOOL_VERSION}.tar.gz && \\\n              cd Image-ExifTool-${EXIFTOOL_VERSION} && \\\n              perl Makefile.PL && \\\n              make install && \\\n\t\t\t\t\t\t\tcp -r exiftool lib /usr/bin && \\\n              rm -rf ${DIR} && rm Image-ExifTool-${EXIFTOOL_VERSION}.tar.gz\n\n# Filesystem setting\nRUN mkdir -p /var/www/html/tmp &&\t\\\n\tchmod 777 /var/www/html/tmp &&\t\\\n\tmkdir -p /var/www/html/dat &&\t\\\n\tchmod 777 /var/www/html/dat &&\t\\\n\tmkdir -p /var/www/html/results &&\t\\\n\tchmod 777 /var/www/html/results &&\t\\\n\tmkdir -p /var/www/html/work/jobs &&\t\\\n\tchmod 777 /var/www/html/work/jobs &&\t\\\n\tmkdir -p /var/www/html/work/video &&\t\\\n\tchmod 777 /var/www/html/work/video &&\t\\\n\tmkdir -p /var/www/html/logs &&\t\\\n\tchmod 777 /var/www/html/logs\n\nRUN DIR=$(mktemp -d) && cd ${DIR} && \\\n              curl -f -L -Os https://github.com/WPO-Foundation/webpagetest/archive/WebPageTest-${WPT_VERSION}.tar.gz && \\\n              tar xvf WebPageTest-${WPT_VERSION}.tar.gz && \\\n              cd webpagetest-WebPageTest-${WPT_VERSION} && \\\n              cp -r www/*  /var/www/html/ && rm -rf -d && rm WebPageTest-${WPT_VERSION}.tar.gz\n\nCOPY locations.ini /var/www/html/settings/\nCOPY connectivity.ini /var/www/html/settings/\nCOPY settings.ini /var/www/html/settings/\n\n# test results store volume\nVOLUME [\"/var/www/html/results\"]\n\nEXPOSE 80\nCMD [\"/usr/sbin/httpd\", \"-k\", \"start\", \"-D\", \"FOREGROUND\"]\n"
}