{
  "startTime": 1674252588591,
  "endTime": 1674252588898,
  "originalSmells": [
    {
      "rule": "yumInstallRmVarCacheYum",
      "position": {
        "lineStart": 6,
        "lineEnd": 6,
        "columnStart": 4,
        "columnEnd": 53
      }
    },
    {
      "rule": "yumInstallRmVarCacheYum",
      "position": {
        "lineStart": 10,
        "lineEnd": 10,
        "columnStart": 4,
        "columnEnd": 34
      }
    },
    {
      "rule": "yumInstallRmVarCacheYum",
      "position": {
        "lineStart": 15,
        "lineEnd": 41,
        "columnStart": 4,
        "columnEnd": 4
      }
    },
    {
      "rule": "yumInstallRmVarCacheYum",
      "position": {
        "lineStart": 44,
        "lineEnd": 46,
        "columnStart": 4,
        "columnEnd": 4
      }
    },
    {
      "rule": "yumInstallRmVarCacheYum",
      "position": {
        "lineStart": 66,
        "lineEnd": 109,
        "columnStart": 4,
        "columnEnd": 4
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM centos:7\n\n# Update existing packages\nRUN yum -y update\n\n# Add some repos\nRUN yum -y install epel-release centos-release-scl-rh && rm -rf /var/cache/yum\nRUN rpm --import /etc/pki/rpm-gpg/RPM-GPG-KEY-*\n\n# Add some COPRs\nRUN yum -y install yum-plugin-copr && rm -rf /var/cache/yum\nRUN yum -y copr enable cottsay/colcon\nRUN yum -y copr enable cottsay/devtoolset-8-make-nonblocking\n\n# Install foundation packages\nRUN yum install \\\n  @buildsys-build \\\n  asio-devel \\\n  ccache \\\n  cmake \\\n  cmake3 \\\n  devtoolset-8 \\\n  devtoolset-8-liblsan-devel \\\n  devtoolset-8-make-nonblocking \\\n  git \\\n  matchbox-window-manager \\\n  mesa-dri-drivers \\\n  net-tools \\\n  python36-colcon-common-extensions \\\n  python36-cryptography \\\n  python36-devel \\\n  python36-docutils \\\n  python36-pip \\\n  python36-pytest-repeat \\\n  python36-vcstool \\\n  python36-virtualenv \\\n  python-rosdep \\\n  sudo \\\n  tinyxml2-devel \\\n  wget \\\n  xorg-x11-server-Xvfb \\\n  -y && rm -rf /var/cache/yum\n\n# Install some packages still in testing\nRUN yum install --enablerepo=epel-testing \\\n  python36-lark-parser \\\n  -y && rm -rf /var/cache/yum\n\n# Install some stuff via Pip which we don't have available in EPEL\nRUN pip3.6 install flake8 lxml matplotlib pep8 pydocstyle pydot pytest-rerunfailures\n\n# Some support vars for building\nENV CMAKE_COMMAND /usr/bin/cmake3\nENV ROS_PYTHON_VERSION 3\nENV CFLAGS -I/usr/lib64/python3.6/site-packages/numpy/core/include\nENV CXXFLAGS -Wno-error=int-in-bool-context -I/usr/lib64/python3.6/site-packages/numpy/core/include\nENV LANG en_US.UTF-8\n\n# Set up rosdep\nRUN rosdep init\n\n# automatic invalidation once every day.\nRUN echo \"@today_str\"\nRUN yum -y update\n\n# These dependencies were generated by invoking rosdep on the latest version of the target workspace:\nRUN yum install \\\n  assimp-devel \\\n  clang \\\n  console-bridge-devel \\\n  cppcheck \\\n  cppunit-devel \\\n  curl \\\n  eigen3-devel \\\n  freetype \\\n  freetype-devel \\\n  libcurl-devel \\\n  libsq3-devel \\\n  libX11-devel \\\n  libXaw-devel \\\n  libxml2 \\\n  libXrandr-devel \\\n  libyaml-devel \\\n  log4cxx-devel \\\n  mesa-libGL-devel \\\n  mesa-libGLU-devel \\\n  opencv-devel \\\n  openssl \\\n  pcre-devel \\\n  pkgconfig \\\n  poco-devel \\\n  python36-catkin_pkg \\\n  python36-empy \\\n  python36-lark-parser \\\n  python36-mock \\\n  python36-numpy \\\n  python36-psutil \\\n  python36-pyflakes \\\n  python36-pygraphviz \\\n  python36-pytest \\\n  python36-PyYAML \\\n  python36-setuptools \\\n  qt5-qtbase \\\n  qt5-qtbase-devel \\\n  qt5-qtbase-gui \\\n  tinyxml2-devel \\\n  tinyxml-devel \\\n  uncrustify \\\n  zlib-devel \\\n  -y && rm -rf /var/cache/yum\n\n# Create a user to own the build output.\nRUN useradd -u 1234 -m rosbuild\nRUN sudo -H -u rosbuild -- git config --global user.email \"jenkins@ci.ros2.org\"\nRUN sudo -H -u rosbuild -- git config --global user.name \"Jenkins ROS 2\"\nRUN echo 'rosbuild ALL=(ALL) NOPASSWD:ALL' >> /etc/sudoers\nWORKDIR \"@workdir\"\n\n# Add an entry point which changes rosbuild's UID from 1234 to the UID of the invoking user.\n# This means that the generated files will have the same ownership as the host OS user.\nADD entry_point.sh /entry_point.sh\nRUN chmod 755 /entry_point.sh\n\nENTRYPOINT [\"/entry_point.sh\"]\n\nCMD [\"matchbox-window-manager > /dev/null 2>&1 & scl enable devtoolset-8 -- python36 -u run_ros2_batch.py $CI_ARGS\"]\n"
}