{
  "startTime": 1674252626823,
  "endTime": 1674252627091,
  "originalSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 43,
        "lineEnd": 43,
        "columnStart": 4,
        "columnEnd": 61
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 3,
        "lineEnd": 5,
        "columnStart": 4,
        "columnEnd": 133
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 43,
        "lineEnd": 43,
        "columnStart": 4,
        "columnEnd": 61
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 43,
        "lineEnd": 43,
        "columnStart": 4,
        "columnEnd": 61
      }
    }
  ],
  "repairedDockerfile": "FROM debian:stretch-slim\nARG cores=12\nRUN apt-get update && \\\n    apt-get install -y --no-install-recommends \\\n      ca-certificates wget git make zip bzip2 python3-minimal \\\n      xz-utils clang patch icnsutils graphicsmagick-imagemagick-compat genisoimage cmake zlib1g-dev libbz2-dev libxml2-dev libssl-dev && rm -rf /var/lib/apt/lists/*;\n\nENV prebuilt=/build/prebuilt toolchains=/build/toolchains\n\n#based on https://github.com/multiarch/crossbuild\n#Problems with wget -q https://github.com/phracker/MacOSX-SDKs\n#-sdk10.7 has no crt1.10.6.o which is on 10.10\n#-sdk10.10 has no libc++ which is on 10.7\nENV OSX_VERSION_MIN=10.6 triplet=x86_64-apple-darwin14\nRUN mkdir -p ${toolchains}/${triplet} && cd ${toolchains} && \\\n    git clone https://github.com/tpoechtrager/osxcross && \\\n    ln -sT ${toolchains}/${triplet} osxcross/target && \\\n    wget -q https://www.dropbox.com/s/yfbesd249w10lpc/MacOSX10.10.sdk.tar.xz -P osxcross/tarballs && \\\n    (cd osxcross && git checkout 6a46fa5e && (yes \"\" | JOBS=${cores} ./build.sh) && \\\n    mv tools target/ ) && \\\n    rm -Rf osxcross\n\nENV execprefix=${toolchains}/${triplet}/bin/${triplet}-\n\nRUN cd ${toolchains} && \\\n    git clone https://github.com/vitamin-caig/libdmg-hfsplus.git && \\\n    (cd libdmg-hfsplus && cmake -DCMAKE_INSTALL_PREFIX=/usr/local . && make && make install) && \\\n    rm -Rf libdmg-hfsplus\n\nENV boost=1.70.0\nRUN cd /build && \\\n    bash -c \"wget -q https://dl.bintray.com/boostorg/release/${boost}/source/boost_\\${boost//./_}.tar.bz2 -O - | tar -xj\" && \\\n    cd boost_* && ./bootstrap.sh --with-toolset=clang && \\\n    echo \"using clang : 3.8 : ${execprefix}clang : <archiver>${execprefix}ar <ranlib>${execprefix}ranlib <cxxflags>-stdlib=libc++ ;\" > tools/build/src/user-config.jam\nRUN cd /build/boost_* && \\\n    ./bjam toolset=clang-3.8 link=static threading=multi target-os=darwin variant=release address-model=64 --layout=system \\\n      --with-filesystem --with-locale --with-program_options --with-system -j${cores} \\\n      --includedir=${prebuilt}/boost-${boost}/include --libdir=${prebuilt}/boost-${boost}-darwin-x86_64/lib install && \\\n    cd .. && rm -Rf boost_*\n\nENV qt=4.8.6\n#qt crossbuild is not supported now\n#root https://www.dropbox.com/sh/j879ottiu1tecsx/AAD4mXm8R1eTaslWKdGv3SiGa?dl=0\nRUN apt-get install -y --no-install-recommends libqt4-dev-bin && \\\n    (wget -q 'https://www.dropbox.com/sh/j879ottiu1tecsx/AAB-3KaCZzsS-_fxwr_-6cvGa/20180201/prebuilt/qt/qt-4.8.6-darwin-x86_64.tar.bz2?dl=0' -O - | tar -xj -C ${prebuilt}) && rm -rf /var/lib/apt/lists/*;\n\nWORKDIR /build/zxtune\nRUN git init && \\\n    git remote add --tags origin https://bitbucket.org/zxtune/zxtune.git && \\\n    echo \"platform=darwin\\narch=x86_64\\npackaging=dmg\\ntools.python=python3\\n\"\\\n         \"prebuilt.dir=${prebuilt}\\ntoolchains.root=${toolchains}\\n\"\\\n         \"darwin.x86_64.execprefix=${execprefix}\\nboost.version=${boost}\\n\"\\\n         \"qt.version=${qt}\\ntools.uic=uic\\ntools.moc=moc\\ntools.rcc=rcc\" > variables.mak\n\nCOPY entrypoint.sh .\nENTRYPOINT [\"./entrypoint.sh\"]\nCMD [\"package\", \"-C\", \"apps/zxtune-qt\"]\n"
}