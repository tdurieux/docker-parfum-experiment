{
  "startTime": 1674245050680,
  "endTime": 1674245051422,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 37,
        "lineEnd": 37,
        "columnStart": 4,
        "columnEnd": 98
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 40,
        "lineEnd": 40,
        "columnStart": 4,
        "columnEnd": 86
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 75,
        "lineEnd": 75,
        "columnStart": 4,
        "columnEnd": 95
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 101,
        "lineEnd": 101,
        "columnStart": 4,
        "columnEnd": 110
      }
    },
    {
      "rule": "npmCacheCleanAfterInstall",
      "position": {
        "lineStart": 46,
        "lineEnd": 46,
        "columnStart": 4,
        "columnEnd": 26
      }
    },
    {
      "rule": "npmCacheCleanAfterInstall",
      "position": {
        "lineStart": 47,
        "lineEnd": 47,
        "columnStart": 4,
        "columnEnd": 22
      }
    },
    {
      "rule": "npmCacheCleanAfterInstall",
      "position": {
        "lineStart": 48,
        "lineEnd": 48,
        "columnStart": 4,
        "columnEnd": 19
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 38,
        "lineEnd": 38,
        "columnStart": 21,
        "columnEnd": 50
      }
    },
    {
      "rule": "aptGetInstallUseY",
      "position": {
        "lineStart": 49,
        "lineEnd": 49,
        "columnStart": 15,
        "columnEnd": 34
      }
    },
    {
      "rule": "aptGetInstallUseY",
      "position": {
        "lineStart": 61,
        "lineEnd": 61,
        "columnStart": 4,
        "columnEnd": 44
      }
    },
    {
      "rule": "aptGetInstallUseY",
      "position": {
        "lineStart": 62,
        "lineEnd": 62,
        "columnStart": 4,
        "columnEnd": 53
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 12,
        "lineEnd": 12,
        "columnStart": 4,
        "columnEnd": 37
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 30,
        "lineEnd": 30,
        "columnStart": 4,
        "columnEnd": 111
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 49,
        "lineEnd": 49,
        "columnStart": 15,
        "columnEnd": 34
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 55,
        "lineEnd": 55,
        "columnStart": 4,
        "columnEnd": 34
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 56,
        "lineEnd": 56,
        "columnStart": 4,
        "columnEnd": 49
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 60,
        "lineEnd": 60,
        "columnStart": 4,
        "columnEnd": 45
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 61,
        "lineEnd": 61,
        "columnStart": 4,
        "columnEnd": 44
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 62,
        "lineEnd": 62,
        "columnStart": 4,
        "columnEnd": 53
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 66,
        "lineEnd": 66,
        "columnStart": 4,
        "columnEnd": 32
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 49,
        "lineEnd": 49,
        "columnStart": 15,
        "columnEnd": 34
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 66,
        "lineEnd": 66,
        "columnStart": 4,
        "columnEnd": 32
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 12,
        "lineEnd": 12,
        "columnStart": 4,
        "columnEnd": 37
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 30,
        "lineEnd": 30,
        "columnStart": 4,
        "columnEnd": 111
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 49,
        "lineEnd": 49,
        "columnStart": 15,
        "columnEnd": 34
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 55,
        "lineEnd": 55,
        "columnStart": 4,
        "columnEnd": 34
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 56,
        "lineEnd": 56,
        "columnStart": 4,
        "columnEnd": 49
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 60,
        "lineEnd": 60,
        "columnStart": 4,
        "columnEnd": 45
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 61,
        "lineEnd": 61,
        "columnStart": 4,
        "columnEnd": 44
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 62,
        "lineEnd": 62,
        "columnStart": 4,
        "columnEnd": 53
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 66,
        "lineEnd": 66,
        "columnStart": 4,
        "columnEnd": 32
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 49,
        "lineEnd": 49,
        "columnStart": 15,
        "columnEnd": 61
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 66,
        "lineEnd": 66,
        "columnStart": 4,
        "columnEnd": 56
      }
    }
  ],
  "repairedDockerfile": "# Docker container for Ubuntu 14.04\n\n# See https://github.com/ceejatec/naked-docker/ for details about the\n# construction of the base image.\n\nFROM ceejatec/naked-ubuntu:14.04\nMAINTAINER build-team@couchbase.com\n\nUSER root\n\n# Install SSH server\nRUN apt-get update && \\\n    apt-get install --no-install-recommends -y openssh-server && \\\n    rm -f /var/cache/apt/archives/*.deb && \\\n    mkdir /var/run/sshd && rm -rf /var/lib/apt/lists/*; # update\n\n# Create couchbase user with password-less sudo privs, and give\n# ownership of /opt/couchbase\nRUN useradd couchbase -G sudo -m -s /bin/bash && \\\n    mkdir -p /opt/couchbase && chown -R couchbase:couchbase /opt/couchbase && \\\n    echo 'couchbase:couchbase' | chpasswd && \\\n    sed -ri 's/ALL\\) ALL/ALL) NOPASSWD:ALL/' /etc/sudoers\n\n# Expose and start SSH daemon\nEXPOSE 22\nCMD [ \"/usr/sbin/sshd\", \"-D\" ]\n\n# Install Couchbase Mobile build dependencies. We don't need \"go\" or \"repo\"\n# yet, but we probably will.\nRUN apt-get update && \\\n    apt-get install --no-install-recommends -y ccache git-core ed man curl ccache gcc-multilib g++-multilib lib32z1 lib32stdc++6 npm bc && \\\n    rm -f /var/cache/apt/archives/*.deb && rm -rf /var/lib/apt/lists/*;\nRUN ln -s /usr/bin/nodejs /usr/bin/node\nRUN ln -s /usr/bin/nodejs /usr/sbin/node\nRUN ln -s /usr/bin/nodejs /usr/local/bin/node\nRUN echo 'PATH=\"/usr/lib/ccache:$PATH\"' >> /home/couchbase/.profile\nRUN mkdir /tmp/deploy && \\\n    curl -f https://storage.googleapis.com/golang/go1.4.1.linux-amd64.tar.gz -o /tmp/deploy/go.tar.gz && \\\n    cd /usr/local && tar xzf /tmp/deploy/go.tar.gz && \\\n    cd bin && for file in /usr/local/go/bin/*; do ln -s $file; done && \\\n    curl -f https://storage.googleapis.com/git-repo-downloads/repo -o /usr/local/bin/repo && \\\n    chmod a+x /usr/local/bin/repo && \\\n    cd /tmp && rm -rf /tmp/deploy && rm /tmp/deploy/go.tar.gz\n\n# Node.js dependency to build phonegap-plugin\nRUN npm config set registry=\"http://registry.npmjs.org/\"\nRUN npm install xmlbuilder && npm cache clean --force;\nRUN npm install findit && npm cache clean --force;\nRUN npm install ncp && npm cache clean --force;\nRUN echo yes | apt-get install -y --no-install-recommends zip && rm -rf /var/lib/apt/lists/*;\n\n# JDK for Jenkins.\n# JCE Unlimited Policy is not available by default from oracle-java8-installer\n# Software-properties-common is required for add-apt-repository\nRUN apt-get update && \\\n    apt-get install --no-install-recommends -y maven unzip && \\\n    apt-get install --no-install-recommends -y software-properties-common && \\\n    add-apt-repository ppa:webupd8team/java -y && \\\n    apt-get update && \\\n    echo oracle-java8-installer shared/accepted-oracle-license-v1-1 select true | sudo /usr/bin/debconf-set-selections && \\\n    apt-get install --no-install-recommends oracle-java8-installer -y && \\\n    apt-get install -y --no-install-recommends oracle-java8-set-default && \\\n    apt-get install -y --no-install-recommends oracle-java8-unlimited-jce-policy && \\\n    rm -f /var/cache/apt/archives/*.deb && rm -rf /var/lib/apt/lists/*;\n\n# CLANG compiler\nRUN apt-get install --no-install-recommends -y clang-3.6 && rm -rf /var/lib/apt/lists/*;\n\n# Android SDK/CLANG environment settings\nRUN echo 'export ANDROID_NDK_HOME=\"/home/couchbase/jenkins/tools/android-ndk-r12b\"\\nexport ANDROID_HOME=\"/home/couchbase/jenkins/tools/android-sdk\"\\nexport ANDROID_SDK_HOME=\"/home/couchbase/jenkins/tools/android-sdk\"\\nexport PATH=\"/usr/lib/llvm-3.6/bin:$ANDROID_NDK_HOME:$ANDROID_SDK_HOME:$ANDROID_SDK_HOME/tools:$ANDROID_SDK_HOME/platform-tools:$PATH\"' > /etc/profile.d/android.sh\n\n# Android SDK\nUSER couchbase\nRUN mkdir -p /home/couchbase/jenkins/tools && \\\n    cd /home/couchbase/jenkins/tools && \\\n    curl -f -L https://dl.google.com/android/repository/tools_r25.2.3-linux.zip -o android-sdk.zip && \\\n    unzip android-sdk.zip -d android-sdk && \\\n    chown -R couchbase:couchbase android-sdk && \\\n    chmod 755 android-sdk\n\nENV ANDROID_HOME /home/couchbase/jenkins/tools/android-sdk\nENV SDK_CMD $ANDROID_HOME/tools/bin/sdkmanager\n\n# Android SDK License\nRUN mkdir $ANDROID_HOME/licenses && \\\n    echo 8933bad161af4178b1185d1a37fbf41ea5269c55 > $ANDROID_HOME/licenses/android-sdk-license  && \\\n    echo d56f5187479451eabf01fb78af6dfcb131a6481e >> $ANDROID_HOME/licenses/android-sdk-license && \\\n    echo 84831b9409646a918e30573bab4c9c91346d8abd > $ANDROID_HOME/licenses/android-sdk-preview-license\n\nRUN . /etc/profile && \\\n    $SDK_CMD \"tools\" \"platform-tools\" && \\\n    $SDK_CMD \"build-tools;27.0.3\" \"build-tools;27.0.0\" \"build-tools;26.0.2\" \"build-tools;24.0.0\" \"build-tools;25.0.3\" \"build-tools;22.0.1\" \"build-tools;23.0.3\" \"build-tools;19.1.0\" && \\\n    $SDK_CMD \"platforms;android-27\" \"platforms;android-26\" \"platforms;android-25\" \"platforms;android-24\" \"platforms;android-22\" \"platforms;android-16\" && \\\n    $SDK_CMD \"system-images;android-16;default;armeabi-v7a\" && \\\n    $SDK_CMD \"system-images;android-19;default;armeabi-v7a\" && \\\n    $SDK_CMD \"system-images;android-24;default;armeabi-v7a\" && \\\n    $SDK_CMD \"system-images;android-25;google_apis;armeabi-v7a\"\n\n# Android NDK\nUSER couchbase\nRUN cd /home/couchbase/jenkins/tools && \\\n    curl -f -L https://dl.google.com/android/repository/android-ndk-r12b-linux-x86_64.zip -o android-ndk-r12b.zip && \\\n    unzip -qq android-ndk-r12b.zip && \\\n    chown -R couchbase:couchbase android-ndk-r12b && \\\n    chmod 755 android-ndk-r12b\n\n# Revert so CMD will run as root.\nUSER root\n\n"
}