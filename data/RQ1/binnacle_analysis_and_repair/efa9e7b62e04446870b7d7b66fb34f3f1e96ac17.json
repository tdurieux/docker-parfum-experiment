{
  "startTime": 1674252660242,
  "endTime": 1674252660594,
  "originalSmells": [
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 87,
        "lineEnd": 87,
        "columnStart": 4,
        "columnEnd": 90
      }
    },
    {
      "rule": "curlUseFlagF",
      "position": {
        "lineStart": 88,
        "lineEnd": 88,
        "columnStart": 4,
        "columnEnd": 93
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 51,
        "lineEnd": 51,
        "columnStart": 4,
        "columnEnd": 29
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 52,
        "lineEnd": 52,
        "columnStart": 4,
        "columnEnd": 22
      }
    },
    {
      "rule": "pipUseNoCacheDir",
      "position": {
        "lineStart": 53,
        "lineEnd": 53,
        "columnStart": 4,
        "columnEnd": 37
      }
    },
    {
      "rule": "yumInstallRmVarCacheYum",
      "position": {
        "lineStart": 24,
        "lineEnd": 24,
        "columnStart": 4,
        "columnEnd": 28
      }
    },
    {
      "rule": "yumInstallRmVarCacheYum",
      "position": {
        "lineStart": 37,
        "lineEnd": 41,
        "columnStart": 4,
        "columnEnd": 53
      }
    },
    {
      "rule": "tarSomethingRmTheSomething",
      "position": {
        "lineStart": 45,
        "lineEnd": 45,
        "columnStart": 4,
        "columnEnd": 33
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM registry.access.redhat.com/openshift3/jenkins-slave-base-rhel7\n\nEXPOSE 8080\n\nENV PATH=$HOME/.local/bin/:$PATH \\\n    LC_ALL=en_US.UTF-8 \\\n    LANG=en_US.UTF-8\n\nENV SUMMARY=\"OWASP ZAP Jenkins slave.\" \\\n    DESCRIPTION=\"Jenkins pipeline slave with OWASP ZAP.\"\n\nLABEL summary=\"$SUMMARY\" \\\n      description=\"$DESCRIPTION\" \\\n      io.k8s.description=\"$DESCRIPTION\" \\\n      io.k8s.display-name=\"Jenkins-Pipeline-OWASP-ZAP\" \\\n      io.openshift.expose-services=\"8080:http\" \\\n      io.openshift.tags=\"builder,jenkins-jnlp-owasp-zap,jenkins-jnlp\" \\\n      release=\"1\"\n\n# NOTES:\n# We need to call 2 (!) yum commands before being able to enable repositories properly\n# This is a workaround for https://bugzilla.redhat.com/show_bug.cgi?id=1479388\n# Chrome install info: https://access.redhat.com/discussions/917293\nRUN yum repolist > /dev/null && \\\n    yum install -y yum-utils && \\\n    yum-config-manager --disable \\* & rm -rf /var/cache/yum > /dev/null && \\\n    yum-config-manager --enable rhel-server-rhscl-7-rpms && \\\n    yum-config-manager --enable rhel-7-server-rpms && \\\n    yum-config-manager --enable rhel-7-server-extras-rpms && \\\n    yum-config-manager --enable rhel-7-server-optional-rpms && \\\n    yum-config-manager --enable rhel-7-server-fastrack-rpms && \\\n    yum-config-manager --enable epel && \\\n    yum clean all -y\n    # yum update -y\n\nRUN UNINSTALL_PKGS=\"java-1.8.0-openjdk-headless.i686 libstdc++-4.8.5-16.el7.i686\" &&\\\n    yum remove -y $UNINSTALL_PKGS && \\\n    yum install -y redhat-rpm-config \\\n    make automake autoconf gcc gcc-c++ libstdc++ libstdc++-devel \\\n    java-1.8.0-openjdk.x86_64 java-1.8.0-openjdk-headless.x86_64 java-1.8.0-openjdk-devel.x86_64 \\\n    wget nano curl git gzip gettext tar xorg-x11-server-Xvfb xterm vnc-server \\\n    net-tools python27-python-pip firefox nss_wrapper && \\\n    yum -y clean all && rm -rf /var/cache/yum\n\nRUN wget https://pypi.python.org/packages/source/s/setuptools/setuptools-7.0.tar.gz --no-check-certificate && \\\n    tar xzf setuptools-7.0.tar.gz && \\\n    cd setuptools-7.0 && \\\n    python setup.py install && \\\n    wget https://bootstrap.pypa.io/get-pip.py && \\\n    python get-pip.py && rm setuptools-7.0.tar.gz\n\nRUN pip install --no-cache-dir --upgrade pip && \\\n    pip install --no-cache-dir zapcli && \\\n    pip install --no-cache-dir python-owasp-zap-v2.4\n\nCOPY rpms/*.rpm ./\n\nRUN yum -y localinstall xmlstarlet-1.6.1-1.el7.x86_64.rpm && \\\n    yum -y localinstall imlib2-1.4.5-9.el7.x86_64.rpm && \\\n    yum -y localinstall pyxdg-0.25-2.el7.nux.noarch.rpm && \\\n    yum -y localinstall openbox-libs-3.5.2-6.2.x86_64.rpm && \\\n    yum -y localinstall openbox-3.5.2-6.2.x86_64.rpm && \\\n    yum -y localinstall x11vnc-0.9.13-11.el7.x86_64.rpm && \\\n    yum -y clean all && \\\n    rm ./*.rpm && \\\n    if [ ! -d /tmp/.X11-unix ] ; then mkdir /tmp/.X11-unix; fi && \\\n    mkdir -p /zap/wrk && \\\n    mkdir /zap@tmp && \\\n    mkdir -p /var/lib/jenkins/.vnc\n\nADD zap /zap/\n\n# Copy the entrypoint\nCOPY configuration/* /var/lib/jenkins/\n\nENV PATH /zap:$PATH\nENV ZAP_PATH /zap/zap.sh\nENV HOME /var/lib/jenkins\n\n# Default port for use with zapcli\nENV ZAP_PORT 8080\n\nCOPY policies /var/lib/jenkins/.ZAP/policies/\nCOPY .xinitrc /var/lib/jenkins/\n\nWORKDIR /zap\n# Download and expand the latest stable release\nRUN curl -f -s https://raw.githubusercontent.com/zaproxy/zap-admin/master/ZapVersions-dev.xml | xmlstarlet sel -t -v //url | grep -i Linux | wget -q --content-disposition -i - -O - | tar zx --strip-components=1 && \\\n    curl -f -s -L https://bitbucket.org/meszarv/webswing/downloads/webswing-2.3-distribution.zip | jar -x && \\\n    touch AcceptedLicense\n\nADD webswing.config /zap/webswing-2.3/webswing.config\n\nRUN chown -v -R root:root /zap && \\\n    chown -v -R root:root /var/lib/jenkins && \\\n    chmod -v -R 777 /var/lib/jenkins && \\\n    chmod -v -R 777 /zap && \\\n    chmod -v -R 777 /zap@tmp && \\\n    chmod -v -R 1777 /tmp/.X11-unix && \\\n    chown -v -R root:root /tmp/.X11-unix/\n\nWORKDIR /var/lib/jenkins\n\nENV OPENSHIFT_JENKINS_JVM_ARCH=x86_64\n\nUSER 1001\n"
}