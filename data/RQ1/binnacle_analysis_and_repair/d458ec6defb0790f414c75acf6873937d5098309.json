{
  "startTime": 1674253126819,
  "endTime": 1674253126926,
  "originalSmells": [
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 14,
        "lineEnd": 14,
        "columnStart": 4,
        "columnEnd": 99
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 17,
        "lineEnd": 17,
        "columnStart": 4,
        "columnEnd": 73
      }
    },
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 17,
        "lineEnd": 17,
        "columnStart": 4,
        "columnEnd": 73
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 14,
        "lineEnd": 14,
        "columnStart": 4,
        "columnEnd": 99
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 17,
        "lineEnd": 17,
        "columnStart": 4,
        "columnEnd": 73
      }
    }
  ],
  "repairedSmells": [
    {
      "rule": "aptGetUpdatePrecedesInstall",
      "position": {
        "lineStart": 17,
        "lineEnd": 17,
        "columnStart": 4,
        "columnEnd": 97
      }
    }
  ],
  "repairedDockerfile": "#MariaDB (https://mariadb.org/)\n\nFROM phusion/baseimage:0.9.10\nMAINTAINER Ryan Seto <ryanseto@yak.net>\n\n# Ensure UTF-8\nRUN locale-gen en_US.UTF-8\n\n# Disable SSH (Not using it at the moment).\nRUN rm -rf /etc/service/sshd /etc/my_init.d/00_regen_ssh_host_keys.sh\n\n# Install MariaDB from repository.\nRUN echo \"deb http://ftp.osuosl.org/pub/mariadb/repo/5.5/ubuntu trusty main\" > /etc/apt/sources.list.d/mariadb.list && \\\n    apt-get update && \\\n    DEBIAN_FRONTEND=noninteractive apt-get --no-install-recommends install -y --force-yes mariadb-server mariadb-server-5.5 && rm -rf /var/lib/apt/lists/*;\n\n# Install other tools.\nRUN DEBIAN_FRONTEND=noninteractive apt-get --no-install-recommends install -y pwgen inotify-tools && rm -rf /var/lib/apt/lists/*;\n\n# Clean up APT when done.\nRUN apt-get clean && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*\n\n# Configure the database to use our data dir.\nRUN sed -i -e 's/^datadir\\s*=.*/datadir = \\/data/' /etc/mysql/my.cnf\n\n# Configure MariaDB to listen on any address.\nRUN sed -i -e 's/^bind-address/#bind-address/' /etc/mysql/my.cnf\n\n# Change the innodb-buffer-pool-size to 128M (default is 256M).\n# This should make it friendlier to run on low memory servers.\nRUN sed -i -e 's/^innodb_buffer_pool_size\\s*=.*/innodb_buffer_pool_size = 128M/' /etc/mysql/my.cnf\n\nEXPOSE 3306\nADD scripts /scripts\nRUN chmod +x /scripts/start.sh\nRUN touch /firstrun\n\n# Expose our data, log, and configuration directories.\nVOLUME [\"/data\", \"/var/log/mysql\", \"/etc/mysql\"]\n\n# Use baseimage-docker's init system.\nCMD [\"/sbin/my_init\", \"--\", \"/scripts/start.sh\"]\n"
}