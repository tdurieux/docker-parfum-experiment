{
  "startTime": 1674246135226,
  "endTime": 1674246135324,
  "originalSmells": [
    {
      "rule": "npmCacheCleanAfterInstall",
      "position": {
        "lineStart": 3,
        "lineEnd": 3,
        "columnStart": 4,
        "columnEnd": 44
      }
    },
    {
      "rule": "aptGetInstallUseY",
      "position": {
        "lineStart": 2,
        "lineEnd": 2,
        "columnStart": 22,
        "columnEnd": 46
      }
    },
    {
      "rule": "aptGetInstallUseNoRec",
      "position": {
        "lineStart": 2,
        "lineEnd": 2,
        "columnStart": 22,
        "columnEnd": 46
      }
    },
    {
      "rule": "aptGetInstallThenRemoveAptLists",
      "position": {
        "lineStart": 2,
        "lineEnd": 2,
        "columnStart": 22,
        "columnEnd": 46
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM node:carbon AS ui-build\nWORKDIR /app\nRUN apt-get update && apt-get install -y --no-install-recommends git-core && rm -rf /var/lib/apt/lists/*;\nRUN npm install -g npm@4.5.0 grunt-cli bower && npm cache clean --force;\nCOPY ./ .\nRUN cd /app/webapp && pwd && ls && bower install --allow-root && bower update --allow-root && npm update && grunt build\n\nFROM maven:alpine AS api-build\nWORKDIR /app\nCOPY --from=ui-build /app /app\nRUN mvn verify clean package\n\nFROM openjdk:alpine\nWORKDIR /app\n\nCOPY ./config ./config\nCOPY --from=api-build /app/gpconnect-demonstrator-api/target/gpconnect-demonstrator-api.war ./app.war\nEXPOSE 19191\nEXPOSE 19192\nENV DATABASE_ADDRESS 10.100.100.61\nENV DATABASE_PORT 3306\nENV DATABASE_USERNAME gpconnectdbuser\nENV DATABASE_PASSWORD gpc0nn3ct\nENV DATABASE_SCHEMA gpconnect\nENV SERVER_BASE_URL https://data.developer.nhs.uk/gpconnect-demonstrator/v1/fhir\nENV CONTEXT_PATH /gpconnect-demonstrator/v1/\nENTRYPOINT java -jar /app/app.war \\\n--spring.config.location=file:/app/config/gpconnect-demonstrator-api.properties --server.port=19192 \\\n--server.port.http=19191 --config.path=/app/config/ --server.ssl.key-store=/app/config/server.jks \\\n--server.ssl.key-store-password=password --server.ssl.trust-store=/app/config/server.jks \\\n--server.ssl.trust-store-password=password --server.ssl.client-auth=want --datasource.host=$DATABASE_ADDRESS \\\n--datasource.port=$DATABASE_PORT --datasource.username=$DATABASE_USERNAME --datasource.password=gpc0nn3ct \\\n--datasource.schema=$DATABASE_SCHEMA --serverBaseUrl=$SERVER_BASE_URL ==server.contextPath=$CONTEXT_PATH"
}