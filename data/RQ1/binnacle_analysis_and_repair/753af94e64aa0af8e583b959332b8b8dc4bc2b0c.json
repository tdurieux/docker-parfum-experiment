{
  "startTime": 1674250712548,
  "endTime": 1674250712988,
  "originalSmells": [
    {
      "rule": "configureShouldUseBuildFlag",
      "position": {
        "lineStart": 76,
        "lineEnd": 76,
        "columnStart": 8,
        "columnEnd": 20
      }
    }
  ],
  "repairedSmells": [],
  "repairedDockerfile": "FROM alpine:3.4\nMAINTAINER mail@racktear.com\n\nRUN addgroup -S tarantool \\\n    && adduser -S -G tarantool tarantool \\\n    && apk add --no-cache 'su-exec>=0.2'\n\nENV TARANTOOL_VERSION=1.5.5.27 \\\n    TARANTOOL_DOWNLOAD_URL=https://github.com/tarantool/tarantool.git \\\n    TARANTOOL_COMMIT=1687c022e7aa93e9c118e1b80e1eac6c429b1010 \\\n    TARANTOOL_INSTALL_LUADIR=/usr/local/share/tarantool \\\n    LUAROCKS_URL=http://keplerproject.github.io/luarocks/releases/luarocks-2.3.0.tar.gz \\\n    TARANTOOL_SNAP_DIR=/var/lib/tarantool \\\n    TARANTOOL_WAL_DIR=/var/lib/tarantool \\\n    TARANTOOL_PORT=3301 \\\n    TARANTOOL_ADMIN_PORT=3302\n\nRUN set -x \\\n    && apk add --no-cache --virtual .run-deps \\\n        libstdc++ \\\n        readline \\\n        openssl \\\n        yaml \\\n        lz4 \\\n        binutils \\\n        ncurses \\\n        libgomp \\\n        lua \\\n        curl \\\n        tar \\\n        zip \\\n        mariadb-client-libs \\\n        libpq \\\n        mariadb-libs \\\n    && apk add --no-cache --virtual .build-deps \\\n        perl \\\n        gcc \\\n        g++ \\\n        cmake \\\n        readline-dev \\\n        openssl-dev \\\n        yaml-dev \\\n        lz4-dev \\\n        binutils-dev \\\n        ncurses-dev \\\n        lua-dev \\\n        musl-dev \\\n        make \\\n        git \\\n        postgresql-dev \\\n        lua-dev \\\n        mariadb-dev \\\n        wget \\\n    && : \"---------- tarantool ----------\" \\\n    && mkdir -p /usr/src/tarantool \\\n    && git clone \"$TARANTOOL_DOWNLOAD_URL\" /usr/src/tarantool \\\n    && git -C /usr/src/tarantool checkout \"$TARANTOOL_COMMIT\" \\\n    && git -C /usr/src/tarantool submodule init \\\n    && git -C /usr/src/tarantool submodule update \\\n    && echo \"$TARANTOOL_VERSION\" > /usr/src/tarantool/VERSION \\\n    && (cd /usr/src/tarantool; \\\n       cmake -DENABLE_CLIENT:BOOL=ON \\\n             -DWITH_MYSQL:BOOL=ON \\\n             -DWITH_POSTGRESQL:BOOL=ON \\\n             -DCMAKE_BUILD_TYPE=RelWithDebInfo \\\n             -DENABLE_BUNDLED_LIBYAML:BOOL=OFF \\\n             -DENABLE_BACKTRACE:BOOL=ON \\\n             .) \\\n    && make -C /usr/src/tarantool -j \\\n    && make -C /usr/src/tarantool install \\\n    && make -C /usr/src/tarantool clean \\\n    && : \"---------- luarocks ----------\" \\\n    && wget -O luarocks.tar.gz \"$LUAROCKS_URL\" \\\n    && mkdir -p /usr/src/luarocks \\\n    && tar -xzf luarocks.tar.gz -C /usr/src/luarocks --strip-components=1 \\\n    && ( cd /usr/src/luarocks; \\\n        ./configure --build=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\"; \\\n        make build; \\\n        make install) \\\n    && rm -r /usr/src/luarocks \\\n    && rm -rf /usr/src/tarantool \\\n    && : \"---------- remove build deps ----------\" \\\n    && apk del .build-deps\n\nCOPY luarocks-config.lua /usr/local/etc/luarocks/config-5.1.lua\n\nRUN mkdir -p /var/lib/tarantool \\\n    && chown tarantool:tarantool /var/lib/tarantool \\\n    && mkdir -p /opt/tarantool \\\n    && chown tarantool:tarantool /opt/tarantool \\\n    && mkdir -p /var/run/tarantool \\\n    && chown tarantool:tarantool /var/run/tarantool \\\n    && mkdir /etc/tarantool \\\n    && chown tarantool:tarantool /etc/tarantool\n\nVOLUME /var/lib/tarantool\nWORKDIR /opt/tarantool\n\nCOPY docker-entrypoint.sh /usr/local/bin/\n\nRUN ln -s /usr/local/bin/docker-entrypoint.sh /entrypoint.sh # backwards compat\nENTRYPOINT [\"docker-entrypoint.sh\"]\n\nEXPOSE 3301\nCMD [ \"tarantool_box\", \"-c\", \"/etc/tarantool/tarantool.cfg\" ]\n"
}