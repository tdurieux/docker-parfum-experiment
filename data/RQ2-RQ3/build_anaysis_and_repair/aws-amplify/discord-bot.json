{"repository":"https://github.com/aws-amplify/discord-bot","dockerfilePath":"Dockerfile","startTime":1672877534449,"endTime":1672877622719,"clone":{"startTime":1672877534450,"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/aws-amplify/discord-bot'...\n","error":null,"endTime":1672877535451,"commit":"90303d29f5ce785f037c299e4a4e4a0900ee886d"},"originalBuild":{"startTime":1672877535539,"endTime":1672877622642,"error":{"code":1,"killed":false,"signal":null,"cmd":"docker build --no-cache --force-rm -t discord-bot:latest -f /tmp/dinghy-analysis/aws-amplify/discord-bot/Dockerfile ."},"stdout":"Sending build context to Docker daemon  2.989MB\r\r\nStep 1/23 : FROM --platform=linux/amd64 alpine as builder\nlatest: Pulling from library/alpine\nDigest: sha256:8914eb54f968791faf6a8638949e480fef81e697984fba772b3976835194c6d4\nStatus: Downloaded newer image for alpine:latest\n ---> 49176f190c7e\nStep 2/23 : ADD https://github.com/benbjohnson/litestream/releases/download/v0.3.8/litestream-v0.3.8-linux-amd64-static.tar.gz /tmp/litestream.tar.gz\n\n\n ---> 9604a44e3f0c\nStep 3/23 : RUN tar -C /usr/local/bin -xzf /tmp/litestream.tar.gz\n ---> Running in 75244f359ed4\nRemoving intermediate container 75244f359ed4\n ---> a5ced068fb35\nStep 4/23 : FROM --platform=linux/amd64 node:18-alpine\n18-alpine: Pulling from library/node\nDigest: sha256:a136ed7b0df71082cdb171f36d640ea3b392a5c70401c642326acee767b8c540\nStatus: Downloaded newer image for node:18-alpine\n ---> 6d7b7852bcd3\nStep 5/23 : WORKDIR /usr/src\n ---> Running in 344e3a7676b2\nRemoving intermediate container 344e3a7676b2\n ---> 263412a0a25b\nStep 6/23 : COPY --from=builder /usr/local/bin/litestream /usr/local/bin/litestream\n ---> 0ad187ee721a\nStep 7/23 : COPY scripts/litestream.yml /etc/litestream.yml\n ---> bec38927db65\nStep 8/23 : RUN apk add bash\n ---> Running in a710be75dd3d\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/4) Installing ncurses-terminfo-base (6.3_p20221119-r0)\n(2/4) Installing ncurses-libs (6.3_p20221119-r0)\n(3/4) Installing readline (8.2.0-r0)\n(4/4) Installing bash (5.2.15-r0)\nExecuting bash-5.2.15-r0.post-install\nExecuting busybox-1.35.0-r29.trigger\nOK: 12 MiB in 21 packages\nRemoving intermediate container a710be75dd3d\n ---> ee8f926e5425\nStep 9/23 : RUN mkdir -p /data\n ---> Running in abfb8f8f5feb\nRemoving intermediate container abfb8f8f5feb\n ---> 057b0536e0e0\nStep 10/23 : ARG PNPM_VERSION=7.9.5\n ---> Running in 76199b5f6852\nRemoving intermediate container 76199b5f6852\n ---> 72774bd96835\nStep 11/23 : RUN npm install --global pnpm@${PNPM_VERSION}\n ---> Running in a4dabd86e985\n\nadded 1 package, and audited 2 packages in 7s\n\n1 package is looking for funding\n  run `npm fund` for details\n\nfound 0 vulnerabilities\n\u001b[91mnpm \u001b[0m\u001b[91mnotice\u001b[0m\u001b[91m \nnpm notice\u001b[0m\u001b[91m New major version of npm available! 8.19.2 -> 9.2.0\nnpm notice\u001b[0m\u001b[91m Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm notice Run `npm install -g npm@9.2.0` to update!\nnpm notice \n\u001b[0mRemoving intermediate container a4dabd86e985\n ---> f7a9f0743cf6\nStep 12/23 : COPY pnpm*.yaml ./\n ---> 1940edf14b9c\nStep 13/23 : ADD . .\n ---> ae7bc7eaf9e6\nStep 14/23 : RUN pnpm install --frozen-lockfile\n ---> Running in c06b22c7aaf2\nScope: all 7 workspace projects\nLockfile is up to date, resolution step is skipped\n\n   ╭──────────────────────────────────────────────────────────────────╮\n   │                                                                  │\n   │                Update available! 7.9.5 → 7.22.0.                 │\n   │   Changelog: https://github.com/pnpm/pnpm/releases/tag/v7.22.0   │\n   │                Run \"pnpm add -g pnpm\" to update.                 │\n   │                                                                  │\n   │      Follow @pnpmjs for updates: https://twitter.com/pnpmjs      │\n   │                                                                  │\n   ╰──────────────────────────────────────────────────────────────────╯\n\nProgress: resolved 1, reused 0, downloaded 0, added 0\nPackages: +837\n++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++\nPackages are hard linked from the content-addressable store to the virtual store.\n  Content-addressable store is at: /root/.local/share/pnpm/store/v3\n  Virtual store is at:             node_modules/.pnpm\nProgress: resolved 837, reused 0, downloaded 10, added 10\nProgress: resolved 837, reused 0, downloaded 30, added 30\nProgress: resolved 837, reused 0, downloaded 71, added 66\nProgress: resolved 837, reused 0, downloaded 153, added 150\nProgress: resolved 837, reused 0, downloaded 262, added 263\nProgress: resolved 837, reused 0, downloaded 282, added 283\nProgress: resolved 837, reused 0, downloaded 321, added 322\nProgress: resolved 837, reused 0, downloaded 360, added 360\nProgress: resolved 837, reused 0, downloaded 412, added 413\nProgress: resolved 837, reused 0, downloaded 485, added 485\nProgress: resolved 837, reused 0, downloaded 557, added 556\nProgress: resolved 837, reused 0, downloaded 585, added 585\nProgress: resolved 837, reused 0, downloaded 617, added 616\nProgress: resolved 837, reused 0, downloaded 644, added 642\nProgress: resolved 837, reused 0, downloaded 737, added 735\nProgress: resolved 837, reused 0, downloaded 777, added 779\nProgress: resolved 837, reused 0, downloaded 807, added 807\nProgress: resolved 837, reused 0, downloaded 832, added 834\nProgress: resolved 837, reused 0, downloaded 835, added 837, done\n.../node_modules/@prisma/engines postinstall$ node scripts/postinstall.js\n.../node_modules/carbon-components postinstall$ carbon-telemetry collect --install\n.../node_modules/svelte-preprocess postinstall$ echo \"[svelte-preprocess] Don't forget to install the preprocessors packages that will be used: node-sass/sass, stylus, less, postcss & postcss-load-config, coffeescript, pug, etc...\"\n.../node_modules/svelte-preprocess postinstall$ echo \"[svelte-preprocess] Don't forget to install the preprocessors packages that will be used: node-sass/sass, stylus, less, postcss & postcss-load-config, coffeescript, pug, etc...\"\n.../node_modules/svelte-preprocess postinstall: [svelte-preprocess] Don't forget to install the preprocessors packages that will be used: node-sass/sass, stylus, less, postcss & postcss-load-config, coffeescript, pug, etc...\n.../node_modules/svelte-preprocess postinstall: [svelte-preprocess] Don't forget to install the preprocessors packages that will be used: node-sass/sass, stylus, less, postcss & postcss-load-config, coffeescript, pug, etc...\n.../node_modules/svelte-preprocess postinstall: Done\n.../node_modules/svelte-preprocess postinstall: Done\n.../node_modules/carbon-components postinstall: Done\n.../node_modules/@prisma/engines postinstall: Done\n.../node_modules/@carbon/charts postinstall$ carbon-telemetry collect --install\n.../esbuild@0.15.9/node_modules/esbuild postinstall$ node install.js\n.../esbuild@0.14.48/node_modules/esbuild postinstall$ node install.js\n.../prisma@4.5.0/node_modules/prisma preinstall$ node scripts/preinstall-entry.js\n.../esbuild@0.15.9/node_modules/esbuild postinstall: Done\n.../prisma@4.5.0/node_modules/prisma preinstall: Done\n.../prisma@4.5.0/node_modules/prisma install$ node scripts/install-entry.js\n.../esbuild@0.14.48/node_modules/esbuild postinstall: Done\n.../prisma@4.5.0/node_modules/prisma install: Done\n.../node_modules/@carbon/charts postinstall: Done\n.../node_modules/@carbon/charts-svelte postinstall$ carbon-telemetry collect --install\n.../node_modules/@prisma/client postinstall$ node scripts/postinstall.js\n.../node_modules/@carbon/charts-svelte postinstall: Done\n.../node_modules/@prisma/client postinstall: Prisma schema loaded from prisma/schema.prisma\n.../node_modules/@prisma/client postinstall: info The postinstall script automatically ran `prisma generate`, which failed.\n.../node_modules/@prisma/client postinstall: The postinstall script still succeeds but won't generate the Prisma Client.\n.../node_modules/@prisma/client postinstall: Please run `prisma generate` to see the errors.\n.../node_modules/@prisma/client postinstall: Done\n.../node_modules/@sveltejs/kit postinstall$ node svelte-kit.js sync\n.../node_modules/@sveltejs/kit postinstall: Done\n\ndependencies:\n+ @aws-crypto/sha256-js 2.0.1\n+ @carbon/styles 1.11.0\n+ @discordjs/builders 1.1.0\n+ @discordjs/rest 1.0.1\n+ @faker-js/faker 7.4.0\n+ @next-auth/prisma-adapter 1.0.4\n+ @octokit/auth-app 4.0.5\n+ @octokit/graphql 5.0.1\n+ @octokit/rest 19.0.4\n+ @prisma/client 4.5.0\n+ cookie 0.5.0\n+ discord-api-types 0.37.10\n+ discord.js 14.4.0\n+ express 4.18.1\n+ fast-glob 3.2.11\n+ fuzzy 0.1.3\n+ next-auth 4.10.3\n+ prisma 4.5.0\n+ svelte 3.49.0\n+ uuid 8.3.2\n+ zod 3.19.1\n\ndevDependencies:\n+ @carbon/charts 1.5.2\n+ @carbon/charts-svelte 1.5.2\n+ @commitlint/cli 17.0.3\n+ @commitlint/config-conventional 17.0.3\n+ @hey-amplify/scripts 0.1.0 <- packages/scripts\n+ @hey-amplify/support 0.1.0 <- packages/support\n+ @hey-amplify/tsconfig 0.1.0 <- packages/tsconfig\n+ @hey-amplify/vite-plugin-server <- packages/vite-plugin-server\n+ @sveltejs/adapter-node 1.0.0-next.87\n+ @sveltejs/kit 1.0.0-next.447\n+ @types/cookie 0.5.1\n+ @types/express 4.17.13\n+ @types/node 18.7.13\n+ @types/prettier 2.7.0\n+ @types/supertest 2.0.12\n+ @typescript-eslint/eslint-plugin 5.35.1\n+ @typescript-eslint/parser 5.35.1\n+ @vitest/ui 0.22.1\n+ carbon-components-svelte 0.70.1\n+ carbon-icons-svelte 11.2.0\n+ carbon-preprocess-svelte 0.9.1\n+ d3 7.6.1\n+ eslint 8.22.0\n+ eslint-config-prettier 8.5.0\n+ eslint-plugin-svelte3 4.0.0\n+ jsdom 20.0.0\n+ lint-staged 13.0.3\n+ prettier 2.7.1\n+ prettier-plugin-svelte 2.7.0\n+ supertest 6.2.4\n+ svelte-check 2.8.1\n+ svelte-preprocess 4.10.7\n+ tslib 2.4.0\n+ typescript 4.7.4\n+ vite 3.0.9\n+ vite-node 0.22.1\n+ vitest 0.22.1\n\n. postinstall$ prisma generate\n. postinstall: Prisma schema loaded from prisma/schema.prisma\n. postinstall: Error: Unable to establish a connection to query-engine-node-api library. It seems there is a problem with your OpenSSL installation!\n. postinstall: Details: Unable to require(`/usr/src/node_modules/.pnpm/prisma@4.5.0/node_modules/prisma/libquery_engine-linux-musl.so.node`)\n. postinstall:  Error loading shared library libssl.so.1.1: No such file or directory (needed by /usr/src/node_modules/.pnpm/prisma@4.5.0/node_modules/prisma/libquery_engine-linux-musl.so.node)\n. postinstall: [Context: getConfig]\n. postinstall: Prisma CLI Version : 4.5.0\n. postinstall: Failed\n ELIFECYCLE  Command failed with exit code 1.\nRemoving intermediate container c06b22c7aaf2\n","stderr":"The command '/bin/sh -c pnpm install --frozen-lockfile' returned a non-zero code: 1\n"}}