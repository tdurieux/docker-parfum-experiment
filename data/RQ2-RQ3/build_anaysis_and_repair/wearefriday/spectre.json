{"repository":"https://github.com/wearefriday/spectre","dockerfilePath":"Dockerfile","startTime":1673028237663,"endTime":1673028672921,"clone":{"startTime":1673028237663,"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/wearefriday/spectre'...\n","error":null,"endTime":1673028238490,"commit":"f8192087021fc0b4e06c87f05f2a05f864b66e24"},"originalBuild":{"startTime":1673028238577,"endTime":1673028491460,"error":null,"stdout":"Sending build context to Docker daemon  694.3kB\r\r\nStep 1/13 : FROM ruby:2.7.1\n2.7.1: Pulling from library/ruby\n57df1a1f1ad8: Pulling fs layer\n71e126169501: Pulling fs layer\n1af28a55c3f3: Pulling fs layer\n03f1c9932170: Pulling fs layer\n65b3db15f518: Pulling fs layer\n1226ce1a6914: Pulling fs layer\n193f324d2a7a: Pulling fs layer\n9370d60f4535: Pulling fs layer\n65b3db15f518: Waiting\n193f324d2a7a: Waiting\n9370d60f4535: Waiting\n03f1c9932170: Waiting\n1af28a55c3f3: Verifying Checksum\n1af28a55c3f3: Download complete\n71e126169501: Download complete\n57df1a1f1ad8: Verifying Checksum\n57df1a1f1ad8: Download complete\n1226ce1a6914: Verifying Checksum\n1226ce1a6914: Download complete\n03f1c9932170: Verifying Checksum\n03f1c9932170: Download complete\n193f324d2a7a: Verifying Checksum\n193f324d2a7a: Download complete\n9370d60f4535: Download complete\n65b3db15f518: Download complete\n57df1a1f1ad8: Pull complete\n71e126169501: Pull complete\n1af28a55c3f3: Pull complete\n03f1c9932170: Pull complete\n65b3db15f518: Pull complete\n1226ce1a6914: Pull complete\n193f324d2a7a: Pull complete\n9370d60f4535: Pull complete\nDigest: sha256:b3aab6a052e2397456342d97a4d0591d4b2bf54b1ee6e599867fb95440f22a6c\nStatus: Downloaded newer image for ruby:2.7.1\n ---> d8ca85855516\nStep 2/13 : WORKDIR /opt\n ---> Running in d5adde4d0a7f\nRemoving intermediate container d5adde4d0a7f\n ---> cb8840a8f4f1\nStep 3/13 : RUN curl -Ls https://bitbucket.org/ariya/phantomjs/downloads/phantomjs-2.1.1-linux-x86_64.tar.bz2 | tar -jxf -\n ---> Running in 40a17e03c457\nRemoving intermediate container 40a17e03c457\n ---> 697eba33892b\nStep 4/13 : RUN apt-get -qq update && apt-get -qq install fontconfig\n ---> Running in 6f277f441b00\nRemoving intermediate container 6f277f441b00\n ---> 294e9589a45c\nStep 5/13 : RUN ln -s /opt/phantomjs-2.1.1-linux-x86_64/bin/phantomjs /usr/local/bin/\n ---> Running in 01fbdec40636\nRemoving intermediate container 01fbdec40636\n ---> 80fb40a0e601\nStep 6/13 : RUN sed -ri '/policy.*name=\"height\"/s/value=\"([^\"]*)\"/value=\"32KP\"/' /etc/ImageMagick-6/policy.xml\n ---> Running in db0c5872e5df\nRemoving intermediate container db0c5872e5df\n ---> 53a4231c6550\nStep 7/13 : WORKDIR /app\n ---> Running in 123a0f1672f7\nRemoving intermediate container 123a0f1672f7\n ---> 1140669f39ad\nStep 8/13 : ADD Gemfile* /app/\n ---> 34e532ddcc00\nStep 9/13 : RUN gem install bundler && bundle config build.nokogiri --use-system-libraries && bundle install --quiet --jobs 16 --retry 5 --without test\n ---> Running in fe118c619dd2\nSuccessfully installed bundler-2.4.3\n1 gem installed\n\u001b[91m[DEPRECATED] The `--without` flag is deprecated because it relies on being remembered across bundler invocations, which bundler will no longer do in future versions. Instead please use `bundle config set without 'test'`, and stop using this flag\n\u001b[0mRemoving intermediate container fe118c619dd2\n ---> 7125919b6d9f\nStep 10/13 : RUN bundle install\n ---> Running in 5dd7c7788a65\n\u001b[91mYour Gemfile lists the gem poltergeist (>= 0) more than once.\nYou should probably keep only one of them.\nRemove any duplicate entries and specify the gem only once.\nWhile it's not a problem now, it could cause errors if you change the version of one of them later.\n\u001b[0mUsing rake 13.0.1\nUsing concurrent-ruby 1.1.5\nUsing i18n 1.6.0\nUsing minitest 5.11.3\nUsing thread_safe 0.3.6\nUsing tzinfo 1.2.5\nUsing activesupport 5.0.7.2\nUsing builder 3.2.3\nUsing erubis 2.7.0\nUsing mini_portile2 2.4.0\nUsing nokogiri 1.10.9\nUsing rails-dom-testing 2.0.3\nUsing crass 1.0.5\nUsing loofah 2.3.1\nUsing rails-html-sanitizer 1.0.4\nUsing actionview 5.0.7.2\nUsing rack 2.2.2\nUsing rack-test 0.6.3\nUsing actionpack 5.0.7.2\nUsing nio4r 2.3.1\nUsing websocket-extensions 0.1.3\nUsing websocket-driver 0.6.5\nUsing actioncable 5.0.7.2\nUsing globalid 0.4.2\nUsing activejob 5.0.7.2\nUsing mini_mime 1.0.1\nUsing mail 2.7.1\nUsing actionmailer 5.0.7.2\nUsing activemodel 5.0.7.2\nUsing arel 7.1.4\nUsing activerecord 5.0.7.2\nUsing public_suffix 3.0.3\nUsing addressable 2.6.0\nUsing debug_inspector 0.0.3\nUsing binding_of_caller 0.8.0\nUsing bundler 2.1.4\nUsing byebug 11.0.1\nUsing regexp_parser 1.4.0\nUsing xpath 3.2.0\nUsing capybara 3.18.0\nUsing cliver 0.3.2\nUsing coffee-script-source 1.12.2\nUsing execjs 2.7.0\nUsing coffee-script 2.4.1\nUsing method_source 0.9.2\nUsing thor 0.20.3\nUsing railties 5.0.7.2\nUsing coffee-rails 4.1.1\nUsing diff-lcs 1.3\nUsing unf_ext 0.0.7.6\nUsing unf 0.1.4\nUsing domain_name 0.5.20180417\nUsing multi_json 1.13.1\nUsing dragonfly 1.0.12\nUsing excon 0.73.0\nUsing formatador 0.2.5\nUsing mime-types-data 3.2019.0331\nUsing mime-types 3.2.2\nUsing fog-core 2.2.0\nUsing fog-json 1.2.0\nUsing fog-xml 0.1.3\nUsing ipaddress 0.8.3\nUsing fog-aws 3.6.2\nUsing dragonfly-s3_data_store 1.3.0\nUsing factory_girl 4.9.0\nUsing factory_girl_rails 4.9.0\nUsing ffi 1.10.0\nUsing font-awesome-rails 4.7.0.5\nUsing temple 0.8.1\nUsing tilt 2.0.9\nUsing haml 5.0.4\nUsing http-cookie 1.0.3\nUsing image_size 2.0.0\nUsing jbuilder 2.8.0\nUsing jquery-rails 4.3.3\nUsing jquery-ui-rails 6.0.1\nUsing json 1.8.6\nUsing kaminari-core 1.1.1\nUsing kaminari-actionview 1.1.1\nUsing kaminari-activerecord 1.1.1\nUsing kaminari 1.1.1\nUsing libv8 3.16.14.19 (x86_64-linux)\nUsing nested_form 0.3.2\nUsing netrc 0.11.0\nUsing pg 1.1.4\nUsing poltergeist 1.18.1\nUsing puma 3.12.2\nUsing rack-pjax 1.1.0\nUsing sprockets 3.7.2\nUsing sprockets-rails 3.2.1\nUsing rails 5.0.7.2\nUsing remotipart 1.4.2\nUsing rb-fsevent 0.10.3\nUsing rb-inotify 0.10.0\nUsing sass-listen 4.0.0\nUsing sass 3.7.4\nUsing sass-rails 5.0.7\nUsing rails_admin 1.4.2\nUsing rdoc 4.3.0\nUsing ref 2.0.0\nUsing rest-client 2.0.2\nUsing rmagick 3.1.0\nUsing rspec-support 3.8.0\nUsing rspec-core 3.8.0\nUsing rspec-expectations 3.8.3\nUsing rspec-mocks 3.8.0\nUsing rspec 3.8.0\nUsing rspec-rails 3.8.2\nUsing sdoc 0.4.2\nUsing sequenced 3.1.1\nUsing spectre_client 0.1.87 from https://github.com/wearefriday/spectre_client.git (at master@c55325a)\nUsing spring 2.0.2\nUsing therubyracer 0.12.3\nUsing uglifier 4.1.20\nUsing web-console 2.3.0\nBundle complete! 29 Gemfile dependencies, 115 gems now installed.\nGems in the group test were not installed.\nUse `bundle info [gemname]` to see where a bundled gem is installed.\nRemoving intermediate container 5dd7c7788a65\n ---> c0654fbf24c0\nStep 11/13 : ADD . /app\n ---> df2ab56dd4ac\nStep 12/13 : EXPOSE 3000\n ---> Running in cbc97e51d8f8\nRemoving intermediate container cbc97e51d8f8\n ---> 5f7f968a9e56\nStep 13/13 : CMD [\"script/server\"]\n ---> Running in 5484265ac5f6\nRemoving intermediate container 5484265ac5f6\n ---> c8d7ecc3c410\nSuccessfully built c8d7ecc3c410\nSuccessfully tagged spectre:latest\n","stderr":"","imageSize":1150632839},"repair":{"startTime":1673028491513,"endTime":1673028491637,"violations":[{"name":"curlUseFlagF","position":{"start":3,"end":3,"columnStart":4,"columnEnd":97}},{"name":"aptGetInstallUseY","position":{"start":4,"end":4,"columnStart":26,"columnEnd":56}},{"name":"aptGetInstallUseNoRec","position":{"start":4,"end":4,"columnStart":26,"columnEnd":56}},{"name":"ruleAptGetInstallThenRemoveAptLists","position":{"start":4,"end":4,"columnStart":26,"columnEnd":56}}],"repairedDockerfile":"FROM ruby:2.7.1\n\nWORKDIR /opt\nRUN curl -f -Ls https://bitbucket.org/ariya/phantomjs/downloads/phantomjs-2.1.1-linux-x86_64.tar.bz2 | tar -jxf -\nRUN apt-get -qq update && apt-get -qq -y --no-install-recommends install fontconfig && rm -rf /var/lib/apt/lists/*;\nRUN ln -s /opt/phantomjs-2.1.1-linux-x86_64/bin/phantomjs /usr/local/bin/\nRUN sed -ri '/policy.*name=\"height\"/s/value=\"([^\"]*)\"/value=\"32KP\"/' /etc/ImageMagick-6/policy.xml\n\nWORKDIR /app\nADD Gemfile* /app/\nRUN gem install bundler && bundle config build.nokogiri --use-system-libraries && bundle install --quiet --jobs 16 --retry 5 --without test\nRUN bundle install\n\nADD . /app\n\nEXPOSE 3000\nCMD [\"script/server\"]\n"},"repairedBuild":{"startTime":1673028493765,"endTime":1673028671485,"error":null,"stdout":"Sending build context to Docker daemon  694.3kB\r\r\nStep 1/13 : FROM ruby:2.7.1\n ---> d8ca85855516\nStep 2/13 : WORKDIR /opt\n ---> Running in 4944ed91a462\nRemoving intermediate container 4944ed91a462\n ---> 053b5ba57bd6\nStep 3/13 : RUN curl -f -Ls https://bitbucket.org/ariya/phantomjs/downloads/phantomjs-2.1.1-linux-x86_64.tar.bz2 | tar -jxf -\n ---> Running in e1733a28d01c\nRemoving intermediate container e1733a28d01c\n ---> 470d8d014602\nStep 4/13 : RUN apt-get -qq update && apt-get -qq -y --no-install-recommends install fontconfig && rm -rf /var/lib/apt/lists/*;\n ---> Running in 3f2293361646\nRemoving intermediate container 3f2293361646\n ---> 7a9cbae00864\nStep 5/13 : RUN ln -s /opt/phantomjs-2.1.1-linux-x86_64/bin/phantomjs /usr/local/bin/\n ---> Running in b7543d5da278\nRemoving intermediate container b7543d5da278\n ---> ae9b04141a2b\nStep 6/13 : RUN sed -ri '/policy.*name=\"height\"/s/value=\"([^\"]*)\"/value=\"32KP\"/' /etc/ImageMagick-6/policy.xml\n ---> Running in 798e98be4e9e\nRemoving intermediate container 798e98be4e9e\n ---> 00b837b3fb12\nStep 7/13 : WORKDIR /app\n ---> Running in 5d256772b52e\nRemoving intermediate container 5d256772b52e\n ---> ff42262f1c3c\nStep 8/13 : ADD Gemfile* /app/\n ---> 867044ec006e\nStep 9/13 : RUN gem install bundler && bundle config build.nokogiri --use-system-libraries && bundle install --quiet --jobs 16 --retry 5 --without test\n ---> Running in 462d0a377533\nSuccessfully installed bundler-2.4.3\n1 gem installed\n\u001b[91m[DEPRECATED] The `--without` flag is deprecated because it relies on being remembered across bundler invocations, which bundler will no longer do in future versions. Instead please use `bundle config set without 'test'`, and stop using this flag\n\u001b[0mRemoving intermediate container 462d0a377533\n ---> b354fd2973c7\nStep 10/13 : RUN bundle install\n ---> Running in 6aea42ee2361\n\u001b[91mYour Gemfile lists the gem poltergeist (>= 0) more than once.\nYou should probably keep only one of them.\nRemove any duplicate entries and specify the gem only once.\nWhile it's not a problem now, it could cause errors if you change the version of one of them later.\n\u001b[0mUsing rake 13.0.1\nUsing concurrent-ruby 1.1.5\nUsing i18n 1.6.0\nUsing minitest 5.11.3\nUsing thread_safe 0.3.6\nUsing tzinfo 1.2.5\nUsing activesupport 5.0.7.2\nUsing builder 3.2.3\nUsing erubis 2.7.0\nUsing mini_portile2 2.4.0\nUsing nokogiri 1.10.9\nUsing rails-dom-testing 2.0.3\nUsing crass 1.0.5\nUsing loofah 2.3.1\nUsing rails-html-sanitizer 1.0.4\nUsing actionview 5.0.7.2\nUsing rack 2.2.2\nUsing rack-test 0.6.3\nUsing actionpack 5.0.7.2\nUsing nio4r 2.3.1\nUsing websocket-extensions 0.1.3\nUsing websocket-driver 0.6.5\nUsing actioncable 5.0.7.2\nUsing globalid 0.4.2\nUsing activejob 5.0.7.2\nUsing mini_mime 1.0.1\nUsing mail 2.7.1\nUsing actionmailer 5.0.7.2\nUsing activemodel 5.0.7.2\nUsing arel 7.1.4\nUsing activerecord 5.0.7.2\nUsing public_suffix 3.0.3\nUsing addressable 2.6.0\nUsing debug_inspector 0.0.3\nUsing binding_of_caller 0.8.0\nUsing bundler 2.1.4\nUsing byebug 11.0.1\nUsing regexp_parser 1.4.0\nUsing xpath 3.2.0\nUsing capybara 3.18.0\nUsing cliver 0.3.2\nUsing coffee-script-source 1.12.2\nUsing execjs 2.7.0\nUsing coffee-script 2.4.1\nUsing method_source 0.9.2\nUsing thor 0.20.3\nUsing railties 5.0.7.2\nUsing coffee-rails 4.1.1\nUsing diff-lcs 1.3\nUsing unf_ext 0.0.7.6\nUsing unf 0.1.4\nUsing domain_name 0.5.20180417\nUsing multi_json 1.13.1\nUsing dragonfly 1.0.12\nUsing excon 0.73.0\nUsing formatador 0.2.5\nUsing mime-types-data 3.2019.0331\nUsing mime-types 3.2.2\nUsing fog-core 2.2.0\nUsing fog-json 1.2.0\nUsing fog-xml 0.1.3\nUsing ipaddress 0.8.3\nUsing fog-aws 3.6.2\nUsing dragonfly-s3_data_store 1.3.0\nUsing factory_girl 4.9.0\nUsing factory_girl_rails 4.9.0\nUsing ffi 1.10.0\nUsing font-awesome-rails 4.7.0.5\nUsing temple 0.8.1\nUsing tilt 2.0.9\nUsing haml 5.0.4\nUsing http-cookie 1.0.3\nUsing image_size 2.0.0\nUsing jbuilder 2.8.0\nUsing jquery-rails 4.3.3\nUsing jquery-ui-rails 6.0.1\nUsing json 1.8.6\nUsing kaminari-core 1.1.1\nUsing kaminari-actionview 1.1.1\nUsing kaminari-activerecord 1.1.1\nUsing kaminari 1.1.1\nUsing libv8 3.16.14.19 (x86_64-linux)\nUsing nested_form 0.3.2\nUsing netrc 0.11.0\nUsing pg 1.1.4\nUsing poltergeist 1.18.1\nUsing puma 3.12.2\nUsing rack-pjax 1.1.0\nUsing sprockets 3.7.2\nUsing sprockets-rails 3.2.1\nUsing rails 5.0.7.2\nUsing remotipart 1.4.2\nUsing rb-fsevent 0.10.3\nUsing rb-inotify 0.10.0\nUsing sass-listen 4.0.0\nUsing sass 3.7.4\nUsing sass-rails 5.0.7\nUsing rails_admin 1.4.2\nUsing rdoc 4.3.0\nUsing ref 2.0.0\nUsing rest-client 2.0.2\nUsing rmagick 3.1.0\nUsing rspec-support 3.8.0\nUsing rspec-core 3.8.0\nUsing rspec-expectations 3.8.3\nUsing rspec-mocks 3.8.0\nUsing rspec 3.8.0\nUsing rspec-rails 3.8.2\nUsing sdoc 0.4.2\nUsing sequenced 3.1.1\nUsing spectre_client 0.1.87 from https://github.com/wearefriday/spectre_client.git (at master@c55325a)\nUsing spring 2.0.2\nUsing therubyracer 0.12.3\nUsing uglifier 4.1.20\nUsing web-console 2.3.0\nBundle complete! 29 Gemfile dependencies, 115 gems now installed.\nGems in the group test were not installed.\nUse `bundle info [gemname]` to see where a bundled gem is installed.\nRemoving intermediate container 6aea42ee2361\n ---> 017f4c3fbbf8\nStep 11/13 : ADD . /app\n ---> edcf2d61ea9d\nStep 12/13 : EXPOSE 3000\n ---> Running in 7e48446d298c\nRemoving intermediate container 7e48446d298c\n ---> e1b0302bb7e1\nStep 13/13 : CMD [\"script/server\"]\n ---> Running in 489b5cf909cb\nRemoving intermediate container 489b5cf909cb\n ---> 8d3e4a9a806d\nSuccessfully built 8d3e4a9a806d\nSuccessfully tagged spectre:latest\n","stderr":"","imageSize":1132786009}}