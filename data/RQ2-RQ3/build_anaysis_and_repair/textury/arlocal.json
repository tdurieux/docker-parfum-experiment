{"repository":"https://github.com/textury/arlocal","dockerfilePath":"Dockerfile","startTime":1672605835460,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/textury/arlocal'...\n","error":null,"commit":"dc60e6301182ae22d3a713661de95b6d8c70ee93"},"originalBuild":{"startTimestamp":1672605837037,"endTimestamp":1672605982966,"error":null,"stdout":"Sending build context to Docker daemon    533kB\r\r\nStep 1/12 : FROM node:16-alpine as build\n16-alpine: Pulling from library/node\nc158987b0551: Already exists\ne15b2da73907: Pulling fs layer\n90461d7cfbbe: Pulling fs layer\n06b1a47b9f99: Pulling fs layer\n06b1a47b9f99: Verifying Checksum\n06b1a47b9f99: Download complete\n90461d7cfbbe: Verifying Checksum\n90461d7cfbbe: Download complete\ne15b2da73907: Verifying Checksum\ne15b2da73907: Download complete\ne15b2da73907: Pull complete\n90461d7cfbbe: Pull complete\n06b1a47b9f99: Pull complete\nDigest: sha256:58e4dfcf063f67d71e608c3cace5a0bcf39e9dbab3047b41e20c15c7132d1d46\nStatus: Downloaded newer image for node:16-alpine\n ---> 610c0494e820\nStep 2/12 : WORKDIR /app\n ---> Running in 624135bdc145\nRemoving intermediate container 624135bdc145\n ---> 7ad353044105\nStep 3/12 : COPY . .\n ---> d85a3b65e89d\nStep 4/12 : RUN apk add git\n ---> Running in 78ff73be10ec\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/7) Installing ca-certificates (20220614-r3)\n(2/7) Installing brotli-libs (1.0.9-r9)\n(3/7) Installing nghttp2-libs (1.51.0-r0)\n(4/7) Installing libcurl (7.87.0-r0)\n(5/7) Installing libexpat (2.5.0-r0)\n(6/7) Installing pcre2 (10.42-r0)\n(7/7) Installing git (2.38.2-r0)\nExecuting busybox-1.35.0-r29.trigger\nExecuting ca-certificates-20220614-r3.trigger\nOK: 18 MiB in 24 packages\nRemoving intermediate container 78ff73be10ec\n ---> d48461f4daf5\nStep 5/12 : RUN yarn\n ---> Running in 1bd4e485bcdf\nyarn install v1.22.19\n[1/5] Validating package.json...\n[2/5] Resolving packages...\n[3/5] Fetching packages...\n[4/5] Linking dependencies...\n[5/5] Building fresh packages...\n$ npm run build\n\n> arlocal@1.1.59 build\n> rimraf bin && tsc && copyfiles -u 1 \"./src/**/*.graphql\" bin\n\nDone in 59.48s.\nRemoving intermediate container 1bd4e485bcdf\n ---> 0b5c3e43d292\nStep 6/12 : FROM node:16-alpine\n ---> 610c0494e820\nStep 7/12 : USER node\n ---> Running in fe7d8cd22e68\nRemoving intermediate container fe7d8cd22e68\n ---> f8916b93610e\nStep 8/12 : WORKDIR /arlocal\n ---> Running in 9d2f99b445b1\nRemoving intermediate container 9d2f99b445b1\n ---> 7de579f6b830\nStep 9/12 : COPY --chown=node:node --from=build /app/bin/ ./bin\n ---> 82427e40002d\nStep 10/12 : COPY --chown=node:node --from=build /app/node_modules/ ./node_modules\n ---> 4eb85b1e8c04\nStep 11/12 : EXPOSE 1984\n ---> Running in 5d9bd2c008f8\nRemoving intermediate container 5d9bd2c008f8\n ---> a404dfa4719f\nStep 12/12 : CMD [ \"node\", \"bin/index.js\" ]\n ---> Running in 8a711c128db5\nRemoving intermediate container 8a711c128db5\n ---> 965d17b47c45\nSuccessfully built 965d17b47c45\nSuccessfully tagged arlocal:latest\n","stderr":"","imageSize":378063998},"repair":{"violations":[{"name":"apkAddUseNoCache","position":{"start":4,"end":4,"columnStart":4,"columnEnd":15}}],"repairedDockerfile":"FROM node:16-alpine as build\n\nWORKDIR /app\nCOPY . .\nRUN apk add --no-cache git\nRUN yarn\n\nFROM node:16-alpine\nUSER node\nWORKDIR /arlocal\n\nCOPY --chown=node:node --from=build /app/bin/ ./bin\nCOPY --chown=node:node --from=build /app/node_modules/ ./node_modules\n\nEXPOSE 1984\nCMD [ \"node\", \"bin/index.js\" ]"},"repairedBuild":{"startTimestamp":1672605983998,"endTimestamp":1672606119739,"error":null,"stdout":"Sending build context to Docker daemon    533kB\r\r\nStep 1/12 : FROM node:16-alpine as build\n ---> 610c0494e820\nStep 2/12 : WORKDIR /app\n ---> Running in c100bbc77cff\nRemoving intermediate container c100bbc77cff\n ---> bee92eb319cb\nStep 3/12 : COPY . .\n ---> afad308ff0be\nStep 4/12 : RUN apk add --no-cache git\n ---> Running in 111f02a7ce04\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/7) Installing ca-certificates (20220614-r3)\n(2/7) Installing brotli-libs (1.0.9-r9)\n(3/7) Installing nghttp2-libs (1.51.0-r0)\n(4/7) Installing libcurl (7.87.0-r0)\n(5/7) Installing libexpat (2.5.0-r0)\n(6/7) Installing pcre2 (10.42-r0)\n(7/7) Installing git (2.38.2-r0)\nExecuting busybox-1.35.0-r29.trigger\nExecuting ca-certificates-20220614-r3.trigger\nOK: 18 MiB in 24 packages\nRemoving intermediate container 111f02a7ce04\n ---> 0c2de9f81498\nStep 5/12 : RUN yarn\n ---> Running in b75dcbe77c7c\nyarn install v1.22.19\n[1/5] Validating package.json...\n[2/5] Resolving packages...\n[3/5] Fetching packages...\n[4/5] Linking dependencies...\n[5/5] Building fresh packages...\n$ npm run build\n\n> arlocal@1.1.59 build\n> rimraf bin && tsc && copyfiles -u 1 \"./src/**/*.graphql\" bin\n\nDone in 36.55s.\nRemoving intermediate container b75dcbe77c7c\n ---> bc9325acf33a\nStep 6/12 : FROM node:16-alpine\n ---> 610c0494e820\nStep 7/12 : USER node\n ---> Running in 14ca71b86d8c\nRemoving intermediate container 14ca71b86d8c\n ---> 3b4552f0628a\nStep 8/12 : WORKDIR /arlocal\n ---> Running in 29838b9b74a3\nRemoving intermediate container 29838b9b74a3\n ---> 6e497993ff85\nStep 9/12 : COPY --chown=node:node --from=build /app/bin/ ./bin\n ---> 9b3494ea5e0e\nStep 10/12 : COPY --chown=node:node --from=build /app/node_modules/ ./node_modules\n ---> 91e627a81042\nStep 11/12 : EXPOSE 1984\n ---> Running in 19f44207a2b0\nRemoving intermediate container 19f44207a2b0\n ---> 3bae46d26372\nStep 12/12 : CMD [ \"node\", \"bin/index.js\" ]\n ---> Running in e79d9000091d\nRemoving intermediate container e79d9000091d\n ---> 9f8b7ceef64b\nSuccessfully built 9f8b7ceef64b\nSuccessfully tagged arlocal:latest\n","stderr":"","imageSize":378063998},"endTime":1672606120428}