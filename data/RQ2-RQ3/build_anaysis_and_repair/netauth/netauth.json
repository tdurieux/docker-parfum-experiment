{"repository":"https://github.com/netauth/netauth","dockerfilePath":"Dockerfile","startTime":1672026741787,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/netauth/netauth'...\n","error":null,"commit":"5eb74f06755e967244d019a42f9b8d83cd3076b4"},"originalBuild":{"startTimestamp":1672026742764,"endTimestamp":1672026780967,"error":null,"stdout":"Sending build context to Docker daemon  1.263MB\r\r\nStep 1/9 : FROM golang:1.17-alpine as build\n1.17-alpine: Pulling from library/golang\n530afca65e2e: Pulling fs layer\nd450d4da0343: Pulling fs layer\n8162171ecb65: Pulling fs layer\nff63b82a42d3: Pulling fs layer\n5b4b56e6b994: Pulling fs layer\nff63b82a42d3: Waiting\n5b4b56e6b994: Waiting\n8162171ecb65: Verifying Checksum\n8162171ecb65: Download complete\nd450d4da0343: Verifying Checksum\nd450d4da0343: Download complete\n530afca65e2e: Download complete\n530afca65e2e: Pull complete\n5b4b56e6b994: Verifying Checksum\n5b4b56e6b994: Download complete\nd450d4da0343: Pull complete\n8162171ecb65: Pull complete\nff63b82a42d3: Verifying Checksum\nff63b82a42d3: Download complete\nff63b82a42d3: Pull complete\n5b4b56e6b994: Pull complete\nDigest: sha256:99ddec1bbfd6d6bca3f9804c02363daee8c8524dae50df7942e8e60788fd17c9\nStatus: Downloaded newer image for golang:1.17-alpine\n ---> 270c4f58750f\nStep 2/9 : WORKDIR /netauth\n ---> Running in 0cd5580f295e\nRemoving intermediate container 0cd5580f295e\n ---> 7a21de55be38\nStep 3/9 : COPY . .\n ---> 6048fb77e4e3\nStep 4/9 : ARG TARGET=netauthd\n ---> Running in 47edfe15c8e0\nRemoving intermediate container 47edfe15c8e0\n ---> f7107c5428b9\nStep 5/9 : RUN go mod vendor &&         CGO_ENABLED=0 GOOS=linux go build -a -ldflags '-extldflags \"-static\"' -o /n cmd/$TARGET/main.go &&         apk add upx binutils &&         strip /n &&         upx /n &&         ls -alh /n\n ---> Running in 16b2f5c84878\n\u001b[91mgo: downloading github.com/hashicorp/go-hclog v0.9.2\ngo: downloading github.com/stretchr/testify v1.7.0\n\u001b[0m\u001b[91mgo: downloading github.com/netauth/protocol v0.0.0-20210918062754-7fee492ffcbd\n\u001b[0m\u001b[91mgo: downloading github.com/the-maldridge/bsfilter v0.1.2\ngo: downloading golang.org/x/crypto v0.0.0-20200622213623-75b288015ac9\n\u001b[0m\u001b[91mgo: downloading google.golang.org/grpc v1.38.0\n\u001b[0m\u001b[91mgo: downloading github.com/spf13/viper v1.8.1\n\u001b[0m\u001b[91mgo: downloading git.mills.io/prologic/bitcask v1.0.0\ngo: downloading github.com/blevesearch/bleve v0.7.0\n\u001b[0m\u001b[91mgo: downloading github.com/bgentry/speakeasy v0.1.0\n\u001b[0m\u001b[91mgo: downloading google.golang.org/protobuf v1.27.1\n\u001b[0m\u001b[91mgo: downloading github.com/spf13/cobra v0.0.7\n\u001b[0m\u001b[91mgo: downloading github.com/hashicorp/go-plugin v1.0.1\ngo: downloading github.com/google/renameio v0.1.0\n\u001b[0m\u001b[91mgo: downloading github.com/spf13/pflag v1.0.5\n\u001b[0m\u001b[91mgo: downloading github.com/golang-jwt/jwt/v4 v4.2.0\n\u001b[0m\u001b[91mgo: downloading gopkg.in/yaml.v2 v2.4.0\n\u001b[0m\u001b[91mgo: downloading github.com/pelletier/go-toml v1.9.3\ngo: downloading github.com/magiconair/properties v1.8.5\n\u001b[0m\u001b[91mgo: downloading github.com/spf13/afero v1.6.0\ngo: downloading github.com/subosito/gotenv v1.2.0\n\u001b[0m\u001b[91mgo: downloading github.com/fsnotify/fsnotify v1.4.9\ngo: downloading github.com/spf13/cast v1.3.1\n\u001b[0m\u001b[91mgo: downloading github.com/mitchellh/mapstructure v1.4.1\n\u001b[0m\u001b[91mgo: downloading github.com/spf13/jwalterweatherman v1.1.0\n\u001b[0m\u001b[91mgo: downloading github.com/hashicorp/hcl v1.0.0\ngo: downloading gopkg.in/ini.v1 v1.62.0\n\u001b[0m\u001b[91mgo: downloading github.com/stretchr/objx v0.2.0\n\u001b[0m\u001b[91mgo: downloading github.com/davecgh/go-spew v1.1.1\ngo: downloading github.com/pmezard/go-difflib v1.0.0\n\u001b[0m\u001b[91mgo: downloading gopkg.in/yaml.v3 v3.0.0-20210107192922-496545a6307b\n\u001b[0m\u001b[91mgo: downloading github.com/hashicorp/yamux v0.0.0-20180604194846-3520598351bb\n\u001b[0m\u001b[91mgo: downloading github.com/mitchellh/go-testing-interface v1.0.0\ngo: downloading golang.org/x/net v0.0.0-20210405180319-a5a99cb37ef4\ngo: downloading github.com/oklog/run v1.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/golang/protobuf v1.5.2\n\u001b[0m\u001b[91mgo: downloading golang.org/x/sys v0.0.0-20211216021012-1d35b9e2eb4e\n\u001b[0m\u001b[91mgo: downloading golang.org/x/text v0.3.5\n\u001b[0m\u001b[91mgo: downloading github.com/sirupsen/logrus v1.8.1\ngo: downloading github.com/plar/go-adaptive-radix-tree v1.0.4\ngo: downloading github.com/abcum/lcp v0.0.0-20201209214815-7a3f3840be81\ngo: downloading github.com/gofrs/flock v0.8.1\n\u001b[0m\u001b[91mgo: downloading golang.org/x/exp v0.0.0-20210826195003-46c773283d9d\ngo: downloading github.com/pkg/errors v0.9.1\n\u001b[0m\u001b[91mgo: downloading github.com/cpuguy83/go-md2man/v2 v2.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/inconshreveable/mousetrap v1.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/russross/blackfriday/v2 v2.0.1\n\u001b[0m\u001b[91mgo: downloading github.com/shurcooL/sanitized_anchor_name v1.0.0\n\u001b[0m\u001b[91mgo: downloading google.golang.org/genproto v0.0.0-20210602131652-f16073e35f0c\n\u001b[0m\u001b[91mgo: downloading github.com/boltdb/bolt v1.3.1\n\u001b[0m\u001b[91mgo: downloading github.com/steveyen/gtreap v0.0.0-20150807155958-0abe01ef9be2\n\u001b[0m\u001b[91mgo: downloading github.com/blevesearch/segment v0.0.0-20160915185041-762005e7a34f\n\u001b[0m\u001b[91mgo: downloading github.com/RoaringBitmap/roaring v0.4.17\n\u001b[0m\u001b[91mgo: downloading github.com/blevesearch/go-porterstemmer v1.0.2\n\u001b[0m\u001b[91mgo: downloading github.com/golang/snappy v0.0.1\n\u001b[0m\u001b[91mgo: downloading github.com/edsrzf/mmap-go v1.1.0\n\u001b[0m\u001b[91mgo: downloading github.com/Smerity/govarint v0.0.0-20150407073650-7265e41f48f1\ngo: downloading github.com/couchbase/vellum v0.0.0-20190328134517-462e86d8716b\n\u001b[0m\u001b[91mgo: downloading github.com/willf/bitset v1.1.10\ngo: downloading github.com/tinylib/msgp v1.1.0\ngo: downloading github.com/mschoch/smat v0.0.0-20160514031455-90eadee771ae\ngo: downloading github.com/glycerine/go-unsnap-stream v0.0.0-20181221182339-f9677308dec2\n\u001b[0m\u001b[91mgo: downloading github.com/philhofer/fwd v1.0.0\n\u001b[0mfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/community/x86_64/APKINDEX.tar.gz\n(1/5) Installing libgcc (11.2.1_git20220219-r2)\n(2/5) Installing libstdc++ (11.2.1_git20220219-r2)\n(3/5) Installing binutils (2.38-r3)\n(4/5) Installing ucl (1.03-r1)\n(5/5) Installing upx (3.96-r1)\nExecuting busybox-1.35.0-r15.trigger\nOK: 19 MiB in 20 packages\n                       Ultimate Packer for eXecutables\n                          Copyright (C) 1996 - 2020\nUPX 3.96        Markus Oberhumer, Laszlo Molnar & John Reiser   Jan 23rd 2020\n\n        File size         Ratio      Format      Name\n   --------------------   ------   -----------   -----------\n  14741880 ->   5493408   37.26%   linux/amd64   n\n\nPacked 1 file.\n-rwxr-xr-x    1 root     root        5.2M Dec 26 03:52 /n\nRemoving intermediate container 16b2f5c84878\n ---> aea649b7313d\nStep 6/9 : FROM scratch\n ---> \nStep 7/9 : LABEL org.opencontainers.image.source https://github.com/netauth/netauth\n ---> Running in c0fb4e17f39d\nRemoving intermediate container c0fb4e17f39d\n ---> 376f3a5e842b\nStep 8/9 : ENTRYPOINT [\"/n\"]\n ---> Running in 61f22d1962e0\nRemoving intermediate container 61f22d1962e0\n ---> 2c70648df782\nStep 9/9 : COPY --from=build /n /n\n ---> 78ce50f5965c\nSuccessfully built 78ce50f5965c\nSuccessfully tagged netauth:latest\n","stderr":"","imageSize":5493408},"repair":{"violations":[],"repairedDockerfile":"# This is outputing either netauth or netauthd to /n and then it\n# subsequently gets copied into a completely empty container.  This is\n# because docker can't put ARGs into ENTRYPOINT, so that needs to be\n# static.  Since in the general case the container isn't\n# introsepctable without external tools (no shell!) this isn't\n# noticed, but its still something to be aware of if you're here.\n\nFROM golang:1.17-alpine as build\nWORKDIR /netauth\nCOPY . .\nARG TARGET=netauthd\nRUN go mod vendor && \\\n        CGO_ENABLED=0 GOOS=linux go build -a -ldflags '-extldflags \"-static\"' -o /n cmd/$TARGET/main.go && \\\n        apk add upx binutils && \\\n        strip /n && \\\n        upx /n && \\\n        ls -alh /n\n\nFROM scratch\nLABEL org.opencontainers.image.source https://github.com/netauth/netauth\nENTRYPOINT [\"/n\"]\nCOPY --from=build /n /n\n"},"endTime":1672026781263}