{"repository":"https://github.com/bitovi/bitops","dockerfilePath":"Dockerfile","startTime":1673259804746,"endTime":1673259930813,"clone":{"startTime":1673259804749,"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/bitovi/bitops'...\n","error":null,"endTime":1673259805691,"commit":"fc179ddff6072e0069e3e6d80fa252ce7c002d37"},"originalBuild":{"startTime":1673259805772,"endTime":1673259876215,"error":null,"stdout":"Sending build context to Docker daemon  2.306MB\r\r\nStep 1/21 : FROM python:3.8.6-alpine\n3.8.6-alpine: Pulling from library/python\n801bfaa63ef2: Pulling fs layer\n7678dd7631a2: Pulling fs layer\n38b057b5e8fb: Pulling fs layer\ncc197a482ea4: Pulling fs layer\n32c500ac0823: Pulling fs layer\ncc197a482ea4: Waiting\n32c500ac0823: Waiting\n801bfaa63ef2: Download complete\n7678dd7631a2: Verifying Checksum\n7678dd7631a2: Download complete\n801bfaa63ef2: Pull complete\ncc197a482ea4: Verifying Checksum\ncc197a482ea4: Download complete\n7678dd7631a2: Pull complete\n38b057b5e8fb: Verifying Checksum\n38b057b5e8fb: Download complete\n32c500ac0823: Verifying Checksum\n32c500ac0823: Download complete\n38b057b5e8fb: Pull complete\ncc197a482ea4: Pull complete\n32c500ac0823: Pull complete\nDigest: sha256:0d5ce3bca1f47cab75f26dd653e7a1c3a29d31574c3afb441732f00cc2c5d750\nStatus: Downloaded newer image for python:3.8.6-alpine\n ---> 1e00421e959c\nStep 2/21 : ENV DEBIAN_FRONTEND=noninteractive\n ---> Running in 7054b1f6d5b4\nRemoving intermediate container 7054b1f6d5b4\n ---> 1abad8133f29\nStep 3/21 : ENV PYTHONUNBUFFERED=1\n ---> Running in a0eb194028ca\nRemoving intermediate container a0eb194028ca\n ---> 48f79d60db51\nStep 4/21 : RUN apk add --no-cache bash\n ---> Running in 0275a33b69a8\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.12/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.12/community/x86_64/APKINDEX.tar.gz\n(1/1) Installing bash (5.0.17-r0)\nExecuting bash-5.0.17-r0.post-install\nExecuting busybox-1.31.1-r19.trigger\nOK: 12 MiB in 36 packages\nRemoving intermediate container 0275a33b69a8\n ---> 158e13e6abc4\nStep 5/21 : RUN apk update\n ---> Running in 812738eb12d8\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.12/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.12/community/x86_64/APKINDEX.tar.gz\nv3.12.12-45-g8116a127ec [http://dl-cdn.alpinelinux.org/alpine/v3.12/main]\nv3.12.12-46-g1df69604c4 [http://dl-cdn.alpinelinux.org/alpine/v3.12/community]\nOK: 12780 distinct packages available\nRemoving intermediate container 812738eb12d8\n ---> 4834a5ccf478\nStep 6/21 : RUN apk add     libsodium-dev     wget     unzip     git     jq     curl     rsync     openssh\n ---> Running in 84199b3f7f6c\n(1/24) Installing nghttp2-libs (1.41.0-r0)\n(2/24) Installing libcurl (7.79.1-r1)\n(3/24) Installing curl (7.79.1-r1)\n(4/24) Installing pcre2 (10.35-r0)\n(5/24) Installing git (2.26.3-r1)\n(6/24) Installing oniguruma (6.9.5-r2)\n(7/24) Installing jq (1.6-r1)\n(8/24) Installing libsodium (1.0.18-r0)\n(9/24) Installing pkgconf (1.7.2-r0)\n(10/24) Installing libsodium-dev (1.0.18-r0)\n(11/24) Installing openssh-keygen (8.3_p1-r3)\n(12/24) Installing libedit (20191231.3.1-r0)\n(13/24) Installing openssh-client (8.3_p1-r3)\n(14/24) Installing openssh-sftp-server (8.3_p1-r3)\n(15/24) Installing openssh-server-common (8.3_p1-r3)\n(16/24) Installing openssh-server (8.3_p1-r3)\n(17/24) Installing openssh (8.3_p1-r3)\n(18/24) Installing libacl (2.2.53-r0)\n(19/24) Installing popt (1.16-r7)\n(20/24) Installing rsync (3.1.3-r3)\n(21/24) Installing unzip (6.0-r9)\n(22/24) Installing libunistring (0.9.10-r0)\n(23/24) Installing libidn2 (2.3.0-r0)\n(24/24) Installing wget (1.20.3-r1)\nExecuting busybox-1.31.1-r19.trigger\nOK: 38 MiB in 60 packages\nRemoving intermediate container 84199b3f7f6c\n ---> 489e910ba635\nStep 7/21 : ENV GLIBC_VER=2.31-r0\n ---> Running in 20177e92cb86\nRemoving intermediate container 20177e92cb86\n ---> 12041b441feb\nStep 8/21 : RUN mkdir -p /opt/bitops\n ---> Running in ae7dd6673f2c\nRemoving intermediate container ae7dd6673f2c\n ---> 88e990768979\nStep 9/21 : RUN mkdir -p /opt/bitops-local-plugins\n ---> Running in 40a579f4f9c2\nRemoving intermediate container 40a579f4f9c2\n ---> 6958b9c4d75f\nStep 10/21 : WORKDIR /opt/bitops\n ---> Running in 6c8b503664ad\nRemoving intermediate container 6c8b503664ad\n ---> b1a01a8a8660\nStep 11/21 : COPY scripts/ ./scripts\n ---> 9337d4ac5c07\nStep 12/21 : COPY bitops.config.yaml .\n ---> b1cd6c0adc9a\nStep 13/21 : COPY bitops.schema.yaml .\n ---> 9c4915da3c14\nStep 14/21 : COPY requirements.txt .\n ---> 4cfa3fd20fc5\nStep 15/21 : RUN pip3 install -r requirements.txt\n ---> Running in 69a94e647f26\nCollecting boto3\n  Downloading boto3-1.26.45-py3-none-any.whl (132 kB)\nCollecting botocore<1.30.0,>=1.29.45\n  Downloading botocore-1.29.45-py3-none-any.whl (10.3 MB)\nCollecting jmespath<2.0.0,>=0.7.1\n  Downloading jmespath-1.0.1-py3-none-any.whl (20 kB)\nCollecting python-dateutil<3.0.0,>=2.1\n  Downloading python_dateutil-2.8.2-py2.py3-none-any.whl (247 kB)\nCollecting s3transfer<0.7.0,>=0.6.0\n  Downloading s3transfer-0.6.0-py3-none-any.whl (79 kB)\nCollecting six>=1.5\n  Downloading six-1.16.0-py2.py3-none-any.whl (11 kB)\nCollecting urllib3<1.27,>=1.25.4\n  Downloading urllib3-1.26.13-py2.py3-none-any.whl (140 kB)\nCollecting envbash\n  Downloading envbash-1.2.0-py3-none-any.whl (6.1 kB)\nCollecting GitPython\n  Downloading GitPython-3.1.30-py3-none-any.whl (184 kB)\nCollecting gitdb<5,>=4.0.1\n  Downloading gitdb-4.0.10-py3-none-any.whl (62 kB)\nCollecting smmap<6,>=3.0.1\n  Downloading smmap-5.0.0-py3-none-any.whl (24 kB)\nCollecting munch\n  Downloading munch-2.5.0-py2.py3-none-any.whl (10 kB)\nCollecting pyfiglet\n  Downloading pyfiglet-0.8.post1-py2.py3-none-any.whl (865 kB)\nCollecting pyyaml\n  Downloading PyYAML-6.0.tar.gz (124 kB)\n  Installing build dependencies: started\n  Installing build dependencies: finished with status 'done'\n  Getting requirements to build wheel: started\n  Getting requirements to build wheel: finished with status 'done'\n    Preparing wheel metadata: started\n    Preparing wheel metadata: finished with status 'done'\nCollecting shyaml\n  Downloading shyaml-0.6.2-py2.py3-none-any.whl (19 kB)\nBuilding wheels for collected packages: pyyaml\n  Building wheel for pyyaml (PEP 517): started\n  Building wheel for pyyaml (PEP 517): finished with status 'done'\n  Created wheel for pyyaml: filename=PyYAML-6.0-cp38-cp38-linux_x86_64.whl size=45331 sha256=5bd31f214e934952208800700508df240df30dddd86bc3cedb4de8c6926a80d5\n  Stored in directory: /root/.cache/pip/wheels/52/84/66/50912fd7bf1639a31758e40bd4312602e104a8eca1e0da9645\nSuccessfully built pyyaml\nInstalling collected packages: six, urllib3, python-dateutil, jmespath, smmap, botocore, s3transfer, pyyaml, gitdb, shyaml, pyfiglet, munch, GitPython, envbash, boto3\nSuccessfully installed GitPython-3.1.30 boto3-1.26.45 botocore-1.29.45 envbash-1.2.0 gitdb-4.0.10 jmespath-1.0.1 munch-2.5.0 pyfiglet-0.8.post1 python-dateutil-2.8.2 pyyaml-6.0 s3transfer-0.6.0 shyaml-0.6.2 six-1.16.0 smmap-5.0.0 urllib3-1.26.13\n\u001b[91mWARNING: You are using pip version 20.3.3; however, version 22.3.1 is available.\nYou should consider upgrading via the '/usr/local/bin/python -m pip install --upgrade pip' command.\n\u001b[0mRemoving intermediate container 69a94e647f26\n ---> 9996b573a5d7\nStep 16/21 : ONBUILD WORKDIR /opt/bitops-local-plugins\n ---> Running in 28bbd9f849ff\nRemoving intermediate container 28bbd9f849ff\n ---> a65d68ba3ced\nStep 17/21 : ONBUILD COPY bitops.config.yaml plugins* .\n ---> Running in 9002f6df981c\nRemoving intermediate container 9002f6df981c\n ---> 8d7c1f88bab4\nStep 18/21 : ONBUILD WORKDIR /opt/bitops\n ---> Running in 0e5ac0b5b8a9\nRemoving intermediate container 0e5ac0b5b8a9\n ---> ec5fa96dcbc4\nStep 19/21 : ONBUILD COPY bitops.config.yaml .\n ---> Running in ae25c797bcc2\nRemoving intermediate container ae25c797bcc2\n ---> 6309b4371978\nStep 20/21 : ONBUILD RUN python3 scripts/main.py install\n ---> Running in fadf84296c9f\nRemoving intermediate container fadf84296c9f\n ---> 237d8b7a5a04\nStep 21/21 : ENTRYPOINT [\"python3\", \"/opt/bitops/scripts/main.py\", \"deploy\"]\n ---> Running in a519e2323247\nRemoving intermediate container a519e2323247\n ---> 7b73b52db611\nSuccessfully built 7b73b52db611\nSuccessfully tagged bitops:latest\n","stderr":"","imageSize":176627992},"repair":{"startTime":1673259876277,"endTime":1673259876358,"violations":[{"name":"pipUseNoCacheDir","position":{"start":28,"end":28,"columnStart":4,"columnEnd":36}},{"name":"apkAddUseNoCache","position":{"start":7,"end":15,"columnStart":4,"columnEnd":11}}],"repairedDockerfile":"## Using alpine fails on awscli install\nFROM python:3.8.6-alpine\nENV DEBIAN_FRONTEND=noninteractive\nENV PYTHONUNBUFFERED=1\nRUN apk add --no-cache bash\nRUN apk update\n\nRUN apk add --no-cache \\\n    libsodium-dev \\\n    wget \\\n    unzip \\\n    git \\\n    jq \\\n    curl \\\n    rsync \\\n    openssh\n\n# install glibc compatibility for alpine\nENV GLIBC_VER=2.31-r0\nRUN mkdir -p /opt/bitops\nRUN mkdir -p /opt/bitops-local-plugins\n\nWORKDIR /opt/bitops\nCOPY scripts/ ./scripts\nCOPY bitops.config.yaml .\nCOPY bitops.schema.yaml .\nCOPY requirements.txt .\n\nRUN pip3 install --no-cache-dir -r requirements.txt\n\n# temporarily set the working dir to `/opt/bitops-local-plugins`\n#    to copy local plugins from a custom bitops repo into the container\n#    at build time to allow installing dependencies\nONBUILD WORKDIR /opt/bitops-local-plugins\n# optionally copy all local plugins to the `/opt/bitops-local-plugins`\n#    directory within the built container\n# See Docker workaround for making `plugins` dir optional: https://stackoverflow.com/a/46801962\nONBUILD COPY bitops.config.yaml plugins* .\n\nONBUILD WORKDIR /opt/bitops\nONBUILD COPY bitops.config.yaml .\n\nONBUILD RUN python3 scripts/main.py install\n\nENTRYPOINT [\"python3\", \"/opt/bitops/scripts/main.py\", \"deploy\"]\n"},"repairedBuild":{"startTime":1673259876659,"endTime":1673259930440,"error":null,"stdout":"Sending build context to Docker daemon  2.306MB\r\r\nStep 1/21 : FROM python:3.8.6-alpine\n ---> 1e00421e959c\nStep 2/21 : ENV DEBIAN_FRONTEND=noninteractive\n ---> Running in a050e36abb82\nRemoving intermediate container a050e36abb82\n ---> 1ec673307265\nStep 3/21 : ENV PYTHONUNBUFFERED=1\n ---> Running in 18e226869a80\nRemoving intermediate container 18e226869a80\n ---> 37f1bf63758f\nStep 4/21 : RUN apk add --no-cache bash\n ---> Running in 705362194ecb\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.12/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.12/community/x86_64/APKINDEX.tar.gz\n(1/1) Installing bash (5.0.17-r0)\nExecuting bash-5.0.17-r0.post-install\nExecuting busybox-1.31.1-r19.trigger\nOK: 12 MiB in 36 packages\nRemoving intermediate container 705362194ecb\n ---> 8acb10a4101d\nStep 5/21 : RUN apk update\n ---> Running in 572c5839abda\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.12/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.12/community/x86_64/APKINDEX.tar.gz\nv3.12.12-45-g8116a127ec [http://dl-cdn.alpinelinux.org/alpine/v3.12/main]\nv3.12.12-46-g1df69604c4 [http://dl-cdn.alpinelinux.org/alpine/v3.12/community]\nOK: 12780 distinct packages available\nRemoving intermediate container 572c5839abda\n ---> 5169ce8a60df\nStep 6/21 : RUN apk add --no-cache     libsodium-dev     wget     unzip     git     jq     curl     rsync     openssh\n ---> Running in 6340606ab776\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.12/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.12/community/x86_64/APKINDEX.tar.gz\n(1/24) Installing nghttp2-libs (1.41.0-r0)\n(2/24) Installing libcurl (7.79.1-r1)\n(3/24) Installing curl (7.79.1-r1)\n(4/24) Installing pcre2 (10.35-r0)\n(5/24) Installing git (2.26.3-r1)\n(6/24) Installing oniguruma (6.9.5-r2)\n(7/24) Installing jq (1.6-r1)\n(8/24) Installing libsodium (1.0.18-r0)\n(9/24) Installing pkgconf (1.7.2-r0)\n(10/24) Installing libsodium-dev (1.0.18-r0)\n(11/24) Installing openssh-keygen (8.3_p1-r3)\n(12/24) Installing libedit (20191231.3.1-r0)\n(13/24) Installing openssh-client (8.3_p1-r3)\n(14/24) Installing openssh-sftp-server (8.3_p1-r3)\n(15/24) Installing openssh-server-common (8.3_p1-r3)\n(16/24) Installing openssh-server (8.3_p1-r3)\n(17/24) Installing openssh (8.3_p1-r3)\n(18/24) Installing libacl (2.2.53-r0)\n(19/24) Installing popt (1.16-r7)\n(20/24) Installing rsync (3.1.3-r3)\n(21/24) Installing unzip (6.0-r9)\n(22/24) Installing libunistring (0.9.10-r0)\n(23/24) Installing libidn2 (2.3.0-r0)\n(24/24) Installing wget (1.20.3-r1)\nExecuting busybox-1.31.1-r19.trigger\nOK: 38 MiB in 60 packages\nRemoving intermediate container 6340606ab776\n ---> 65cacda9d4d7\nStep 7/21 : ENV GLIBC_VER=2.31-r0\n ---> Running in 9be59756ff22\nRemoving intermediate container 9be59756ff22\n ---> a3a1169af96e\nStep 8/21 : RUN mkdir -p /opt/bitops\n ---> Running in 98098a469869\nRemoving intermediate container 98098a469869\n ---> 9bab77b22743\nStep 9/21 : RUN mkdir -p /opt/bitops-local-plugins\n ---> Running in bd9902aeab44\nRemoving intermediate container bd9902aeab44\n ---> b84515301b7a\nStep 10/21 : WORKDIR /opt/bitops\n ---> Running in 54def24d7172\nRemoving intermediate container 54def24d7172\n ---> 657a07d53fdc\nStep 11/21 : COPY scripts/ ./scripts\n ---> 79d88e44f84f\nStep 12/21 : COPY bitops.config.yaml .\n ---> af150ea6e6be\nStep 13/21 : COPY bitops.schema.yaml .\n ---> 58406bdfc00c\nStep 14/21 : COPY requirements.txt .\n ---> 7e68471091c2\nStep 15/21 : RUN pip3 install --no-cache-dir -r requirements.txt\n ---> Running in 87ee0ebb1d9f\nCollecting boto3\n  Downloading boto3-1.26.45-py3-none-any.whl (132 kB)\nCollecting botocore<1.30.0,>=1.29.45\n  Downloading botocore-1.29.45-py3-none-any.whl (10.3 MB)\nCollecting jmespath<2.0.0,>=0.7.1\n  Downloading jmespath-1.0.1-py3-none-any.whl (20 kB)\nCollecting python-dateutil<3.0.0,>=2.1\n  Downloading python_dateutil-2.8.2-py2.py3-none-any.whl (247 kB)\nCollecting s3transfer<0.7.0,>=0.6.0\n  Downloading s3transfer-0.6.0-py3-none-any.whl (79 kB)\nCollecting six>=1.5\n  Downloading six-1.16.0-py2.py3-none-any.whl (11 kB)\nCollecting urllib3<1.27,>=1.25.4\n  Downloading urllib3-1.26.13-py2.py3-none-any.whl (140 kB)\nCollecting envbash\n  Downloading envbash-1.2.0-py3-none-any.whl (6.1 kB)\nCollecting GitPython\n  Downloading GitPython-3.1.30-py3-none-any.whl (184 kB)\nCollecting gitdb<5,>=4.0.1\n  Downloading gitdb-4.0.10-py3-none-any.whl (62 kB)\nCollecting smmap<6,>=3.0.1\n  Downloading smmap-5.0.0-py3-none-any.whl (24 kB)\nCollecting munch\n  Downloading munch-2.5.0-py2.py3-none-any.whl (10 kB)\nCollecting pyfiglet\n  Downloading pyfiglet-0.8.post1-py2.py3-none-any.whl (865 kB)\nCollecting pyyaml\n  Downloading PyYAML-6.0.tar.gz (124 kB)\n  Installing build dependencies: started\n  Installing build dependencies: finished with status 'done'\n  Getting requirements to build wheel: started\n  Getting requirements to build wheel: finished with status 'done'\n    Preparing wheel metadata: started\n    Preparing wheel metadata: finished with status 'done'\nCollecting shyaml\n  Downloading shyaml-0.6.2-py2.py3-none-any.whl (19 kB)\nBuilding wheels for collected packages: pyyaml\n  Building wheel for pyyaml (PEP 517): started\n  Building wheel for pyyaml (PEP 517): finished with status 'done'\n  Created wheel for pyyaml: filename=PyYAML-6.0-cp38-cp38-linux_x86_64.whl size=45331 sha256=38c31d2bec0bd687a59d1114e78e931aed5c0f801de5023f9d92a93680393c73\n  Stored in directory: /tmp/pip-ephem-wheel-cache-yj1ocku6/wheels/52/84/66/50912fd7bf1639a31758e40bd4312602e104a8eca1e0da9645\nSuccessfully built pyyaml\nInstalling collected packages: six, urllib3, python-dateutil, jmespath, smmap, botocore, s3transfer, pyyaml, gitdb, shyaml, pyfiglet, munch, GitPython, envbash, boto3\nSuccessfully installed GitPython-3.1.30 boto3-1.26.45 botocore-1.29.45 envbash-1.2.0 gitdb-4.0.10 jmespath-1.0.1 munch-2.5.0 pyfiglet-0.8.post1 python-dateutil-2.8.2 pyyaml-6.0 s3transfer-0.6.0 shyaml-0.6.2 six-1.16.0 smmap-5.0.0 urllib3-1.26.13\n\u001b[91mWARNING: You are using pip version 20.3.3; however, version 22.3.1 is available.\nYou should consider upgrading via the '/usr/local/bin/python -m pip install --upgrade pip' command.\n\u001b[0mRemoving intermediate container 87ee0ebb1d9f\n ---> 0e7b1d940bfc\nStep 16/21 : ONBUILD WORKDIR /opt/bitops-local-plugins\n ---> Running in 6ae60b111ef5\nRemoving intermediate container 6ae60b111ef5\n ---> 2ce8040f0991\nStep 17/21 : ONBUILD COPY bitops.config.yaml plugins* .\n ---> Running in 483ea6a897cc\nRemoving intermediate container 483ea6a897cc\n ---> 93f52abd6b2f\nStep 18/21 : ONBUILD WORKDIR /opt/bitops\n ---> Running in 6fff995ae7b6\nRemoving intermediate container 6fff995ae7b6\n ---> fd94161440e6\nStep 19/21 : ONBUILD COPY bitops.config.yaml .\n ---> Running in f38c3684d40d\nRemoving intermediate container f38c3684d40d\n ---> 9a02217d31bd\nStep 20/21 : ONBUILD RUN python3 scripts/main.py install\n ---> Running in 4f5b444b5691\nRemoving intermediate container 4f5b444b5691\n ---> 3659e53f61d8\nStep 21/21 : ENTRYPOINT [\"python3\", \"/opt/bitops/scripts/main.py\", \"deploy\"]\n ---> Running in ceae627d4d23\nRemoving intermediate container ceae627d4d23\n ---> b201ef215d95\nSuccessfully built b201ef215d95\nSuccessfully tagged bitops:latest\n","stderr":"","imageSize":163716764}}