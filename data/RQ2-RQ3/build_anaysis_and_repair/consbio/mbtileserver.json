{"repository":"https://github.com/consbio/mbtileserver","dockerfilePath":"Dockerfile","startTime":1672823250037,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/consbio/mbtileserver'...\n","error":null,"commit":"9b6c0dbd1831f6aa6a6fade589cf884ad1658ddf"},"originalBuild":{"startTimestamp":1672823251221,"endTimestamp":1672823345913,"error":null,"stdout":"Sending build context to Docker daemon  1.509MB\r\r\nStep 1/10 : FROM golang:1.19-alpine3.16\n1.19-alpine3.16: Pulling from library/golang\nDigest: sha256:4b4f7127b01b372115ed9054abc6de0a0b3fdea224561b354af7bb6e946acaa9\nStatus: Downloaded newer image for golang:1.19-alpine3.16\n ---> d227b49ae926\nStep 2/10 : WORKDIR /\n ---> Running in 2ddc30948af0\nRemoving intermediate container 2ddc30948af0\n ---> a213e5682f41\nStep 3/10 : RUN apk add git build-base\n ---> Running in 013b6a8d205f\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/community/x86_64/APKINDEX.tar.gz\n(1/25) Installing libgcc (11.2.1_git20220219-r2)\n(2/25) Installing libstdc++ (11.2.1_git20220219-r2)\n(3/25) Installing binutils (2.38-r3)\n(4/25) Installing libmagic (5.41-r0)\n(5/25) Installing file (5.41-r0)\n(6/25) Installing libgomp (11.2.1_git20220219-r2)\n(7/25) Installing libatomic (11.2.1_git20220219-r2)\n(8/25) Installing gmp (6.2.1-r2)\n(9/25) Installing isl22 (0.22-r0)\n(10/25) Installing mpfr4 (4.1.0-r0)\n(11/25) Installing mpc1 (1.2.1-r0)\n(12/25) Installing gcc (11.2.1_git20220219-r2)\n(13/25) Installing musl-dev (1.2.3-r2)\n(14/25) Installing libc-dev (0.7.2-r3)\n(15/25) Installing g++ (11.2.1_git20220219-r2)\n(16/25) Installing make (4.3-r0)\n(17/25) Installing fortify-headers (1.1-r1)\n(18/25) Installing patch (2.7.6-r7)\n(19/25) Installing build-base (0.5-r3)\n(20/25) Installing brotli-libs (1.0.9-r6)\n(21/25) Installing nghttp2-libs (1.47.0-r0)\n(22/25) Installing libcurl (7.83.1-r5)\n(23/25) Installing expat (2.5.0-r0)\n(24/25) Installing pcre2 (10.40-r0)\n(25/25) Installing git (2.36.3-r0)\nExecuting busybox-1.35.0-r17.trigger\nOK: 200 MiB in 40 packages\nRemoving intermediate container 013b6a8d205f\n ---> 92699ba98182\nStep 4/10 : COPY . .\n ---> b90310b4e980\nStep 5/10 : RUN GOOS=linux go build -o /mbtileserver\n ---> Running in 50f49dc5bc43\n\u001b[91mgo: downloading github.com/brendan-ward/mbtiles-go v0.1.1-0.20220830154734-a6cb9b848bab\ngo: downloading github.com/fsnotify/fsnotify v1.6.0\n\u001b[0m\u001b[91mgo: downloading github.com/spf13/cobra v1.6.0\n\u001b[0m\u001b[91mgo: downloading golang.org/x/crypto v0.0.0-20221012134737-56aed061732a\ngo: downloading github.com/labstack/echo/v4 v4.9.1\n\u001b[0m\u001b[91mgo: downloading github.com/sirupsen/logrus v1.9.0\n\u001b[0m\u001b[91mgo: downloading github.com/evalphobia/logrus_sentry v0.8.2\n\u001b[0m\u001b[91mgo: downloading golang.org/x/sys v0.1.0\n\u001b[0m\u001b[91mgo: downloading github.com/spf13/pflag v1.0.5\n\u001b[0m\u001b[91mgo: downloading golang.org/x/net v0.0.0-20221017152216-f25eb7ecb193\ngo: downloading github.com/labstack/gommon v0.4.0\n\u001b[0m\u001b[91mgo: downloading golang.org/x/time v0.1.0\ngo: downloading github.com/golang-jwt/jwt v3.2.2+incompatible\ngo: downloading github.com/valyala/fasttemplate v1.2.2\n\u001b[0m\u001b[91mgo: downloading github.com/mattn/go-isatty v0.0.16\n\u001b[0m\u001b[91mgo: downloading github.com/mattn/go-colorable v0.1.13\n\u001b[0m\u001b[91mgo: downloading github.com/valyala/bytebufferpool v1.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/pkg/errors v0.9.1\n\u001b[0m\u001b[91mgo: downloading github.com/getsentry/raven-go v0.2.0\n\u001b[0m\u001b[91mgo: downloading github.com/certifi/gocertifi v0.0.0-20210507211836-431795d63e8d\n\u001b[0m\u001b[91mgo: downloading crawshaw.io/sqlite v0.3.3-0.20211227050848-2cdb5c1a86a1\n\u001b[0m\u001b[91mgo: downloading golang.org/x/text v0.4.0\n\u001b[0mRemoving intermediate container 50f49dc5bc43\n ---> 4abf2bfb31b9\nStep 6/10 : FROM alpine:3.16\n ---> bfe296a52501\nStep 7/10 : WORKDIR /\n ---> Running in 558dd9a0be52\nRemoving intermediate container 558dd9a0be52\n ---> 8b921091aa62\nStep 8/10 : RUN mkdir /lib64 && ln -s /lib/libc.musl-x86_64.so.1 /lib64/ld-linux-x86-64.so.2\n ---> Running in dfe629b47904\nRemoving intermediate container dfe629b47904\n ---> 95017e70cb29\nStep 9/10 : COPY --from=0 /mbtileserver /mbtileserver\n ---> 9315fa02c113\nStep 10/10 : ENTRYPOINT [\"/mbtileserver\"]\n ---> Running in bb7fe6913f94\nRemoving intermediate container bb7fe6913f94\n ---> 520d9edc8e7f\nSuccessfully built 520d9edc8e7f\nSuccessfully tagged mbtileserver:latest\n","stderr":"","imageSize":23873196},"repair":{"violations":[{"name":"apkAddUseNoCache","position":{"start":4,"end":4,"columnStart":4,"columnEnd":26}}],"repairedDockerfile":"# Stage 1: compile mbtileserver\nFROM golang:1.19-alpine3.16\n\nWORKDIR /\nRUN apk add --no-cache git build-base\nCOPY . .\n\nRUN GOOS=linux go build -o /mbtileserver\n\n\n# Stage 2: start from a smaller image\nFROM alpine:3.16\n\nWORKDIR /\n\n# Link libs to get around issues using musl\nRUN mkdir /lib64 && ln -s /lib/libc.musl-x86_64.so.1 /lib64/ld-linux-x86-64.so.2\n\n# copy the executable to the empty container\nCOPY --from=0 /mbtileserver /mbtileserver\n\n# Set the command as the entrypoint, so that it captures any\n# command-line arguments passed in\nENTRYPOINT [\"/mbtileserver\"]\n"},"repairedBuild":{"startTimestamp":1672823346424,"endTimestamp":1672823439732,"error":null,"stdout":"Sending build context to Docker daemon  1.509MB\r\r\nStep 1/10 : FROM golang:1.19-alpine3.16\n ---> d227b49ae926\nStep 2/10 : WORKDIR /\n ---> Running in 892f258bead8\nRemoving intermediate container 892f258bead8\n ---> bcc570d3ede9\nStep 3/10 : RUN apk add --no-cache git build-base\n ---> Running in 06314ead53e5\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/community/x86_64/APKINDEX.tar.gz\n(1/25) Installing libgcc (11.2.1_git20220219-r2)\n(2/25) Installing libstdc++ (11.2.1_git20220219-r2)\n(3/25) Installing binutils (2.38-r3)\n(4/25) Installing libmagic (5.41-r0)\n(5/25) Installing file (5.41-r0)\n(6/25) Installing libgomp (11.2.1_git20220219-r2)\n(7/25) Installing libatomic (11.2.1_git20220219-r2)\n(8/25) Installing gmp (6.2.1-r2)\n(9/25) Installing isl22 (0.22-r0)\n(10/25) Installing mpfr4 (4.1.0-r0)\n(11/25) Installing mpc1 (1.2.1-r0)\n(12/25) Installing gcc (11.2.1_git20220219-r2)\n(13/25) Installing musl-dev (1.2.3-r2)\n(14/25) Installing libc-dev (0.7.2-r3)\n(15/25) Installing g++ (11.2.1_git20220219-r2)\n(16/25) Installing make (4.3-r0)\n(17/25) Installing fortify-headers (1.1-r1)\n(18/25) Installing patch (2.7.6-r7)\n(19/25) Installing build-base (0.5-r3)\n(20/25) Installing brotli-libs (1.0.9-r6)\n(21/25) Installing nghttp2-libs (1.47.0-r0)\n(22/25) Installing libcurl (7.83.1-r5)\n(23/25) Installing expat (2.5.0-r0)\n(24/25) Installing pcre2 (10.40-r0)\n(25/25) Installing git (2.36.3-r0)\nExecuting busybox-1.35.0-r17.trigger\nOK: 200 MiB in 40 packages\nRemoving intermediate container 06314ead53e5\n ---> dd06d7e6b418\nStep 4/10 : COPY . .\n ---> d30438ea64af\nStep 5/10 : RUN GOOS=linux go build -o /mbtileserver\n ---> Running in 9b568b4a6257\n\u001b[91mgo: downloading github.com/brendan-ward/mbtiles-go v0.1.1-0.20220830154734-a6cb9b848bab\n\u001b[0m\u001b[91mgo: downloading github.com/spf13/cobra v1.6.0\n\u001b[0m\u001b[91mgo: downloading github.com/labstack/echo/v4 v4.9.1\n\u001b[0m\u001b[91mgo: downloading github.com/evalphobia/logrus_sentry v0.8.2\ngo: downloading github.com/fsnotify/fsnotify v1.6.0\n\u001b[0m\u001b[91mgo: downloading golang.org/x/crypto v0.0.0-20221012134737-56aed061732a\n\u001b[0m\u001b[91mgo: downloading github.com/sirupsen/logrus v1.9.0\n\u001b[0m\u001b[91mgo: downloading github.com/pkg/errors v0.9.1\ngo: downloading github.com/getsentry/raven-go v0.2.0\n\u001b[0m\u001b[91mgo: downloading golang.org/x/sys v0.1.0\n\u001b[0m\u001b[91mgo: downloading github.com/certifi/gocertifi v0.0.0-20210507211836-431795d63e8d\n\u001b[0m\u001b[91mgo: downloading github.com/spf13/pflag v1.0.5\n\u001b[0m\u001b[91mgo: downloading golang.org/x/time v0.1.0\ngo: downloading github.com/valyala/fasttemplate v1.2.2\ngo: downloading github.com/labstack/gommon v0.4.0\n\u001b[0m\u001b[91mgo: downloading golang.org/x/net v0.0.0-20221017152216-f25eb7ecb193\ngo: downloading github.com/golang-jwt/jwt v3.2.2+incompatible\n\u001b[0m\u001b[91mgo: downloading github.com/valyala/bytebufferpool v1.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/mattn/go-colorable v0.1.13\ngo: downloading github.com/mattn/go-isatty v0.0.16\n\u001b[0m\u001b[91mgo: downloading crawshaw.io/sqlite v0.3.3-0.20211227050848-2cdb5c1a86a1\n\u001b[0m\u001b[91mgo: downloading golang.org/x/text v0.4.0\n\u001b[0mRemoving intermediate container 9b568b4a6257\n ---> cf8f3cdd5fe8\nStep 6/10 : FROM alpine:3.16\n ---> bfe296a52501\nStep 7/10 : WORKDIR /\n ---> Running in 600fac6282fc\nRemoving intermediate container 600fac6282fc\n ---> 5c61e1e4319d\nStep 8/10 : RUN mkdir /lib64 && ln -s /lib/libc.musl-x86_64.so.1 /lib64/ld-linux-x86-64.so.2\n ---> Running in f529b0a7bde4\nRemoving intermediate container f529b0a7bde4\n ---> b7bd7784205e\nStep 9/10 : COPY --from=0 /mbtileserver /mbtileserver\n ---> 21691cc371ae\nStep 10/10 : ENTRYPOINT [\"/mbtileserver\"]\n ---> Running in 9bef8a767aa1\nRemoving intermediate container 9bef8a767aa1\n ---> a7a4cae33966\nSuccessfully built a7a4cae33966\nSuccessfully tagged mbtileserver:latest\n","stderr":"","imageSize":23873196},"endTime":1672823439977}