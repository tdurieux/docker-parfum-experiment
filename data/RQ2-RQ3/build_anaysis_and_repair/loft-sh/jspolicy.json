{"repository":"https://github.com/loft-sh/jspolicy","dockerfilePath":"Dockerfile","startTime":1672710705066,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/loft-sh/jspolicy'...\n","error":null,"commit":"4f6cb5153c7f708d5e72e82c0b7ca5b893e999dd"},"originalBuild":{"startTimestamp":1672710712537,"endTimestamp":1672711206996,"error":null,"stdout":"Sending build context to Docker daemon    224MB\r\r\nStep 1/24 : FROM node:16 as builder\n16: Pulling from library/node\nDigest: sha256:64e8bcdfdad6718050801a2639f7e6645fdaf85ec37a98cdb61f6a5331217618\nStatus: Downloaded newer image for node:16\n ---> c910109adbfd\nStep 2/24 : COPY --from=golang:1.17 /usr/local/go/ /usr/local/go/\n ---> d0f7c11ba0d2\nStep 3/24 : ENV PATH=\"/usr/local/go/bin:${PATH}\"\n ---> Running in ebebcb343c2e\nRemoving intermediate container ebebcb343c2e\n ---> 4f2dfc0e1686\nStep 4/24 : WORKDIR /workspace\n ---> Running in a52343fa80fd\nRemoving intermediate container a52343fa80fd\n ---> aeece4a71d3f\nStep 5/24 : ARG TARGETOS=linux\n ---> Running in 4fb89a225b59\nRemoving intermediate container 4fb89a225b59\n ---> 8032b49f8f93\nStep 6/24 : ARG TARGETARCH=amd64\n ---> Running in 4d0a0cd67b9d\nRemoving intermediate container 4d0a0cd67b9d\n ---> 6b207800438b\nStep 7/24 : RUN npm install -g webpack-cli\n ---> Running in 6fb3d9114a1f\n\nadded 117 packages, and audited 118 packages in 8s\n\n15 packages are looking for funding\n  run `npm fund` for details\n\nfound 0 vulnerabilities\n\u001b[91mnpm notice \nnpm notice New major version of npm available! 8.19.3 -> 9.2.0\nnpm notice Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm notice Run `npm install -g npm@9.2.0` to update!\nnpm notice \n\u001b[0mRemoving intermediate container 6fb3d9114a1f\n ---> ced07813ef4f\nStep 8/24 : COPY go.mod go.mod\n ---> 5fdb9d55ed86\nStep 9/24 : COPY go.sum go.sum\n ---> bac7a0313ea9\nStep 10/24 : COPY vendor/ vendor/\n ---> 834ff5829477\nStep 11/24 : COPY cmd/ cmd/\n ---> e2c201dd8f34\nStep 12/24 : COPY pkg/ pkg/\n ---> 2d89be6023b3\nStep 13/24 : ENV GO111MODULE on\n ---> Running in 9135d41be073\nRemoving intermediate container 9135d41be073\n ---> 77e974d1ab8f\nStep 14/24 : ENV DEBUG true\n ---> Running in 4f8d4ce249cd\nRemoving intermediate container 4f8d4ce249cd\n ---> f2f9d4f228b6\nStep 15/24 : RUN GOOS=${TARGETOS} GOARCH=${TARGETARCH} GO111MODULE=on go build -mod vendor -o jspolicy cmd/jspolicy/main.go\n ---> Running in a6367ee34ed5\nRemoving intermediate container a6367ee34ed5\n ---> a8f4a679bc62\nStep 16/24 : FROM node:16-slim\n16-slim: Pulling from library/node\nb52ebda398ed: Already exists\nab06655d5b64: Already exists\n0d704ee2c0cf: Pulling fs layer\n977a2fe43c7f: Pulling fs layer\n4315dadb9483: Pulling fs layer\n4315dadb9483: Verifying Checksum\n4315dadb9483: Download complete\n977a2fe43c7f: Verifying Checksum\n977a2fe43c7f: Download complete\n0d704ee2c0cf: Verifying Checksum\n0d704ee2c0cf: Download complete\n0d704ee2c0cf: Pull complete\n977a2fe43c7f: Pull complete\n4315dadb9483: Pull complete\nDigest: sha256:8e381b023efcf7a2fa4fb4e904ec9348d77bd3fc59f4551702db9aa52484082e\nStatus: Downloaded newer image for node:16-slim\n ---> 5fb222735b86\nStep 17/24 : RUN npm install -g webpack-cli\n ---> Running in 0c834b36537c\n\nadded 117 packages, and audited 118 packages in 7s\n\n15 packages are looking for funding\n  run `npm fund` for details\n\nfound 0 vulnerabilities\n\u001b[91mnpm notice \nnpm notice New major version of npm available! 8.19.3 -> 9.2.0\nnpm notice Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm notice\u001b[0m\u001b[91m Run `npm install -g npm@9.2.0` to update!\nnpm notice \n\u001b[0mRemoving intermediate container 0c834b36537c\n ---> cff7ce34c3c2\nStep 18/24 : WORKDIR /\n ---> Running in 395c13740d2b\nRemoving intermediate container 395c13740d2b\n ---> d6a7a0a68fd3\nStep 19/24 : COPY --from=builder --chown=node:node /etc/ssl/certs/ca-certificates.crt /etc/ssl/certs/\n ---> 615f5d4a78f9\nStep 20/24 : COPY --from=builder --chown=node:node /workspace/jspolicy /jspolicy\n ---> 0dac0e6408de\nStep 21/24 : RUN chown -R node:node /tmp /usr/local/lib/node_modules\n ---> Running in df19686fa59a\nRemoving intermediate container df19686fa59a\n ---> 378422be376e\nStep 22/24 : USER node\n ---> Running in 89c1ea7db449\nRemoving intermediate container 89c1ea7db449\n ---> 576b2e3f0b19\nStep 23/24 : ENTRYPOINT [\"/jspolicy\"]\n ---> Running in 1cf2cb8c7dd7\nRemoving intermediate container 1cf2cb8c7dd7\n ---> d51afae5797e\nStep 24/24 : CMD []\n ---> Running in b983baab9fab\nRemoving intermediate container b983baab9fab\n ---> 9bf597666064\nSuccessfully built 9bf597666064\nSuccessfully tagged jspolicy:latest\n","stderr":"","imageSize":338120339},"repair":{"violations":[{"name":"npmCacheCleanAfterInstall","position":{"start":12,"end":12,"columnStart":4,"columnEnd":30}},{"name":"npmCacheCleanAfterInstall","position":{"start":32,"end":32,"columnStart":4,"columnEnd":30}}],"repairedDockerfile":"# Build the manager binary\nFROM node:16 as builder\n\nCOPY --from=golang:1.17 /usr/local/go/ /usr/local/go/\n\nENV PATH=\"/usr/local/go/bin:${PATH}\"\n\nWORKDIR /workspace\nARG TARGETOS=linux\nARG TARGETARCH=amd64\n\n# Prepare pod\nRUN npm install -g webpack-cli\n\n# Copy the Go Modules manifests\nCOPY go.mod go.mod\nCOPY go.sum go.sum\nCOPY vendor/ vendor/\n\n# Copy the go source\nCOPY cmd/ cmd/\nCOPY pkg/ pkg/\n\nENV GO111MODULE on\nENV DEBUG true\n\n# Build jspolicy\nRUN GOOS=${TARGETOS} GOARCH=${TARGETARCH} GO111MODULE=on go build -mod vendor -o jspolicy cmd/jspolicy/main.go\n\nFROM node:16-slim\n\n# Prepare pod\nRUN npm install -g webpack-cli\n\nWORKDIR /\n\nCOPY --from=builder --chown=node:node /etc/ssl/certs/ca-certificates.crt /etc/ssl/certs/\nCOPY --from=builder --chown=node:node /workspace/jspolicy /jspolicy\n\nRUN chown -R node:node /tmp /usr/local/lib/node_modules\n\n# Change to non-root privilege\nUSER node\n\nENTRYPOINT [\"/jspolicy\"]\nCMD []\n"},"repairedBuild":{"startTimestamp":1672711209413,"endTimestamp":1672711639987,"error":null,"stdout":"Sending build context to Docker daemon    224MB\r\r\nStep 1/24 : FROM node:16 as builder\n ---> c910109adbfd\nStep 2/24 : COPY --from=golang:1.17 /usr/local/go/ /usr/local/go/\n ---> 7488b4b9ca91\nStep 3/24 : ENV PATH=\"/usr/local/go/bin:${PATH}\"\n ---> Running in a98200e7c47c\nRemoving intermediate container a98200e7c47c\n ---> 3ea7dd6d6eb0\nStep 4/24 : WORKDIR /workspace\n ---> Running in 39c7cf7744b3\nRemoving intermediate container 39c7cf7744b3\n ---> b0eb9e6b38ad\nStep 5/24 : ARG TARGETOS=linux\n ---> Running in 62d00075f572\nRemoving intermediate container 62d00075f572\n ---> 5b794add9ed8\nStep 6/24 : ARG TARGETARCH=amd64\n ---> Running in 9c51126c154d\nRemoving intermediate container 9c51126c154d\n ---> 791ffd553791\nStep 7/24 : RUN npm install -g webpack-cli\n ---> Running in 0795b46d8637\n\nadded 117 packages, and audited 118 packages in 8s\n\n15 packages are looking for funding\n  run `npm fund` for details\n\nfound 0 vulnerabilities\n\u001b[91mnpm notice\u001b[0m\u001b[91m \nnpm notice\u001b[0m\u001b[91m New major version of npm available! 8.19.3 -> 9.2.0\nnpm notice\u001b[0m\u001b[91m Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\n\u001b[0m\u001b[91mnpm \u001b[0m\u001b[91mnotice\u001b[0m\u001b[91m Run `npm install -g npm@9.2.0` to update!\n\u001b[0m\u001b[91mnpm \u001b[0m\u001b[91mnotice\u001b[0m\u001b[91m \n\u001b[0mRemoving intermediate container 0795b46d8637\n ---> 9c21c2c4748b\nStep 8/24 : COPY go.mod go.mod\n ---> ed37d662fd2a\nStep 9/24 : COPY go.sum go.sum\n ---> ebaf45fead00\nStep 10/24 : COPY vendor/ vendor/\n ---> c6629bd838b8\nStep 11/24 : COPY cmd/ cmd/\n ---> c883dbe2616b\nStep 12/24 : COPY pkg/ pkg/\n ---> 480e3a18611f\nStep 13/24 : ENV GO111MODULE on\n ---> Running in 5324c765466a\nRemoving intermediate container 5324c765466a\n ---> e7f71a4da58e\nStep 14/24 : ENV DEBUG true\n ---> Running in 40a64dcd1d05\nRemoving intermediate container 40a64dcd1d05\n ---> bfa94ca1413d\nStep 15/24 : RUN GOOS=${TARGETOS} GOARCH=${TARGETARCH} GO111MODULE=on go build -mod vendor -o jspolicy cmd/jspolicy/main.go\n ---> Running in 8342328434de\nRemoving intermediate container 8342328434de\n ---> 8890bd08069a\nStep 16/24 : FROM node:16-slim\n ---> 5fb222735b86\nStep 17/24 : RUN npm install -g webpack-cli\n ---> Running in 843d2390fcac\n\nadded 117 packages, and audited 118 packages in 3s\n\n15 packages are looking for funding\n  run `npm fund` for details\n\nfound 0 vulnerabilities\n\u001b[91mnpm notice \nnpm notice\u001b[0m\u001b[91m New major version of npm available! 8.19.3 -> 9.2.0\nnpm\u001b[0m\u001b[91m notice Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm \u001b[0m\u001b[91mnotice Run `npm install -g npm@9.2.0` to update!\n\u001b[0m\u001b[91mnpm \u001b[0m\u001b[91mnotice \n\u001b[0mRemoving intermediate container 843d2390fcac\n ---> 100b984a9107\nStep 18/24 : WORKDIR /\n ---> Running in 0c909fd2079a\nRemoving intermediate container 0c909fd2079a\n ---> da6629939e15\nStep 19/24 : COPY --from=builder --chown=node:node /etc/ssl/certs/ca-certificates.crt /etc/ssl/certs/\n ---> ba88f7445e19\nStep 20/24 : COPY --from=builder --chown=node:node /workspace/jspolicy /jspolicy\n ---> 71dbe3712d5b\nStep 21/24 : RUN chown -R node:node /tmp /usr/local/lib/node_modules\n ---> Running in 60d88f933427\nRemoving intermediate container 60d88f933427\n ---> dbf6bc37a4ab\nStep 22/24 : USER node\n ---> Running in 79e0feb59231\nRemoving intermediate container 79e0feb59231\n ---> b880ead75e3e\nStep 23/24 : ENTRYPOINT [\"/jspolicy\"]\n ---> Running in f55dc8867fb9\nRemoving intermediate container f55dc8867fb9\n ---> b14021da12e7\nStep 24/24 : CMD []\n ---> Running in 5f641659e8f1\nRemoving intermediate container 5f641659e8f1\n ---> 288232965484\nSuccessfully built 288232965484\nSuccessfully tagged jspolicy:latest\n","stderr":"","imageSize":338120232},"endTime":1672711641104}