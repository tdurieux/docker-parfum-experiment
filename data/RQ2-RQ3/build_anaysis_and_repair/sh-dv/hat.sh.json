{"repository":"https://github.com/sh-dv/hat.sh","dockerfilePath":"Dockerfile","startTime":1672857778054,"endTime":1672858042949,"clone":{"startTime":1672857778054,"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/sh-dv/hat.sh'...\n","error":null,"endTime":1672857778931,"commit":"540d3ccfd2a12b4ed96b78a776c764f899678b6c"},"originalBuild":{"startTime":1672857779013,"endTime":1672857929387,"error":null,"stdout":"Sending build context to Docker daemon  1.456MB\r\r\nStep 1/11 : FROM node:alpine as builder\nalpine: Pulling from library/node\nDigest: sha256:3ed634e0f15d3e05a1918c3949963508f7ed56350cf94156e6d804ae577849fa\nStatus: Downloaded newer image for node:alpine\n ---> f01bef8b5e92\nStep 2/11 : WORKDIR /app\n ---> Running in 67517aea0ff5\nRemoving intermediate container 67517aea0ff5\n ---> 317e9ed71909\nStep 3/11 : COPY package*.json ./\n ---> ad9dd957fa18\nStep 4/11 : RUN npm install\n ---> Running in 294c4f73759a\n\u001b[91mnpm WARN deprecated\u001b[0m\u001b[91m querystring@0.2.0: The querystring API is considered Legacy. new code should use the URLSearchParams API instead.\n\u001b[0m\nadded 400 packages, and audited 401 packages in 9s\n\n81 packages are looking for funding\n  run `npm fund` for details\n\n1 high severity vulnerability\n\nTo address all issues, run:\n  npm audit fix\n\nRun `npm audit` for details.\nRemoving intermediate container 294c4f73759a\n ---> 0d8aa248e287\nStep 5/11 : COPY . ./\n ---> 90de07bcfdca\nStep 6/11 : ENV NEXT_TELEMETRY_DISABLED 1\n ---> Running in 10765ba5ea71\nRemoving intermediate container 10765ba5ea71\n ---> 4af2d6599ccd\nStep 7/11 : RUN npm run build\n ---> Running in 5c3dc97fd739\n\n> hat.sh@2.3.6 build\n> browserify service-worker/sw.js -o public/service-worker.js && next build && next export\n\ninfo  - Loaded env from /app/.env\n\u001b[91mBrowserslist: caniuse-lite is outdated. Please run:\n  npx browserslist@latest --update-db\n  Why you should do it regularly: https://github.com/browserslist/browserslist#browsers-data-updating\n\u001b[0minfo  - Checking validity of types...\n\u001b[91mBrowserslist: caniuse-lite is outdated. Please run:\n  npx browserslist@latest --update-db\n  Why you should do it regularly: https://github.com/browserslist/browserslist#browsers-data-updating\n\u001b[0minfo  - Creating an optimized production build...\n\u001b[91mBrowserslist: caniuse-lite is outdated. Please run:\n  npx browserslist@latest --update-db\n  Why you should do it regularly: https://github.com/browserslist/browserslist#browsers-data-updating\n\u001b[0minfo  - Compiled successfully\ninfo  - Collecting page data...\ninfo  - Generating static pages (0/5)\ninfo  - Generating static pages (1/5)\ninfo  - Generating static pages (2/5)\ninfo  - Generating static pages (3/5)\ninfo  - Generating static pages (5/5)\ninfo  - Finalizing page optimization...\n\nPage                                       Size     First Load JS\n┌ ○ / (583 ms)                             426 kB          962 kB\n├   /_app                                  0 B             128 kB\n├ ○ /404 (383 ms)                          596 B           128 kB\n├ ● /about (496 ms)                        27.1 kB         211 kB\n└ ○ /generate-keys (491 ms)                463 B           536 kB\n+ First Load JS shared by all              128 kB\n  ├ chunks/framework-5f4595e5518b5600.js   42 kB\n  ├ chunks/main-b680bac5455cc527.js        28.7 kB\n  ├ chunks/pages/_app-3e4fc50571907e5a.js  56 kB\n  ├ chunks/webpack-5752944655d749a0.js     840 B\n  └ css/ad8172df0ff7f2ff.css               985 B\n\n○  (Static)  automatically rendered as static HTML (uses no initial props)\n●  (SSG)     automatically generated as static HTML + JSON (uses getStaticProps)\n\ninfo  - Loaded env from /app/.env\n\u001b[91mBrowserslist: caniuse-lite is outdated. Please run:\n  npx browserslist@latest --update-db\n  Why you should do it regularly: https://github.com/browserslist/browserslist#browsers-data-updating\n\u001b[0minfo  - using build directory: /app/.next\ninfo  - Copying \"static build\" directory\ninfo  - No \"exportPathMap\" found in \"/app/next.config.js\". Generating map from \"./pages\"\ninfo  - Launching 35 workers\ninfo  - Exporting (0/4)\ninfo  - Copying \"public\" directory\ninfo  - Exporting (1/4)\ninfo  - Exporting (2/4)\ninfo  - Exporting (3/4)\ninfo  - Exporting (4/4)\nExport successful. Files written to /app/out\n\n> hat.sh@2.3.6 postbuild\n> node ./post-build.js\n\nRemoving intermediate container 5c3dc97fd739\n ---> 1fdddb170208\nStep 8/11 : FROM nginx:stable-alpine\nstable-alpine: Pulling from library/nginx\nca7dd9ec2225: Pulling fs layer\n33c6b9f4e775: Pulling fs layer\n41718ec56cb6: Pulling fs layer\n9a2b3c874906: Pulling fs layer\n71a3f979d23b: Pulling fs layer\na2f02aac7fab: Pulling fs layer\n9a2b3c874906: Waiting\n71a3f979d23b: Waiting\na2f02aac7fab: Waiting\n41718ec56cb6: Verifying Checksum\n41718ec56cb6: Download complete\nca7dd9ec2225: Verifying Checksum\nca7dd9ec2225: Download complete\n33c6b9f4e775: Verifying Checksum\n33c6b9f4e775: Download complete\nca7dd9ec2225: Pull complete\n9a2b3c874906: Verifying Checksum\n9a2b3c874906: Download complete\na2f02aac7fab: Download complete\n71a3f979d23b: Verifying Checksum\n71a3f979d23b: Download complete\n33c6b9f4e775: Pull complete\n41718ec56cb6: Pull complete\n9a2b3c874906: Pull complete\n71a3f979d23b: Pull complete\na2f02aac7fab: Pull complete\nDigest: sha256:2366ede62d2e26a20f7ce7d0294694fe52b166107fd346894e4658dfb5273f9c\nStatus: Downloaded newer image for nginx:stable-alpine\n ---> c31fe73098ae\nStep 9/11 : COPY --from=builder /app/out /usr/share/nginx/html\n ---> b6c53822eb62\nStep 10/11 : EXPOSE 3991\n ---> Running in ce8c8a6051a4\nRemoving intermediate container ce8c8a6051a4\n ---> 738876c2e361\nStep 11/11 : ENTRYPOINT [\"nginx\", \"-g\", \"daemon off;\"]\n ---> Running in ccd6043aafd3\nRemoving intermediate container ccd6043aafd3\n ---> d34f9e59d60b\nSuccessfully built d34f9e59d60b\nSuccessfully tagged hat.sh:latest\n","stderr":"","imageSize":28542107},"repair":{"startTime":1672857929455,"endTime":1672857929516,"violations":[{"name":"npmCacheCleanAfterInstall","position":{"start":6,"end":6,"columnStart":4,"columnEnd":15}}],"repairedDockerfile":"FROM node:alpine as builder\n\nWORKDIR /app\n\nCOPY package*.json ./\n\nRUN npm install && npm cache clean --force;\n\nCOPY . ./\n\nENV NEXT_TELEMETRY_DISABLED 1\n\nRUN npm run build\n\n\nFROM nginx:stable-alpine\n\nCOPY --from=builder /app/out /usr/share/nginx/html\n\nEXPOSE 3991\n\nENTRYPOINT [\"nginx\", \"-g\", \"daemon off;\"]"},"repairedBuild":{"startTime":1672857929904,"endTime":1672858042311,"error":null,"stdout":"Sending build context to Docker daemon  1.456MB\r\r\nStep 1/11 : FROM node:alpine as builder\n ---> f01bef8b5e92\nStep 2/11 : WORKDIR /app\n ---> Running in ada5e11a77e3\nRemoving intermediate container ada5e11a77e3\n ---> efe6b99ebbe4\nStep 3/11 : COPY package*.json ./\n ---> 937084b01ae9\nStep 4/11 : RUN npm install && npm cache clean --force;\n ---> Running in de9a6d4d1e9d\n\u001b[91mnpm WARN deprecated querystring@0.2.0: The querystring API is considered Legacy. new code should use the URLSearchParams API instead.\n\u001b[0m\nadded 400 packages, and audited 401 packages in 9s\n\n81 packages are looking for funding\n  run `npm fund` for details\n\n1 high severity vulnerability\n\nTo address all issues, run:\n  npm audit fix\n\nRun `npm audit` for details.\n\u001b[91mnpm\u001b[0m\u001b[91m WARN using --force Recommended protections disabled.\n\u001b[0mRemoving intermediate container de9a6d4d1e9d\n ---> 6d6c64aea225\nStep 5/11 : COPY . ./\n ---> 540b51109308\nStep 6/11 : ENV NEXT_TELEMETRY_DISABLED 1\n ---> Running in 5c8668607574\nRemoving intermediate container 5c8668607574\n ---> 7652e59eccb1\nStep 7/11 : RUN npm run build\n ---> Running in 7f814cc2f01e\n\n> hat.sh@2.3.6 build\n> browserify service-worker/sw.js -o public/service-worker.js && next build && next export\n\ninfo  - Loaded env from /app/.env\n\u001b[91mBrowserslist: caniuse-lite is outdated. Please run:\n  npx browserslist@latest --update-db\n  Why you should do it regularly: https://github.com/browserslist/browserslist#browsers-data-updating\n\u001b[0minfo  - Checking validity of types...\n\u001b[91mBrowserslist: caniuse-lite is outdated. Please run:\n  npx browserslist@latest --update-db\n  Why you should do it regularly: https://github.com/browserslist/browserslist#browsers-data-updating\n\u001b[0minfo  - Creating an optimized production build...\n\u001b[91mBrowserslist: caniuse-lite is outdated. Please run:\n  npx browserslist@latest --update-db\n  Why you should do it regularly: https://github.com/browserslist/browserslist#browsers-data-updating\n\u001b[0minfo  - Compiled successfully\ninfo  - Collecting page data...\ninfo  - Generating static pages (0/5)\ninfo  - Generating static pages (1/5)\ninfo  - Generating static pages (2/5)\ninfo  - Generating static pages (3/5)\ninfo  - Generating static pages (5/5)\ninfo  - Finalizing page optimization...\n\nPage                                       Size     First Load JS\n┌ ○ / (886 ms)                             426 kB          962 kB\n├   /_app                                  0 B             128 kB\n├ ○ /404 (685 ms)                          596 B           128 kB\n├ ● /about (860 ms)                        27.1 kB         211 kB\n└ ○ /generate-keys (768 ms)                463 B           536 kB\n+ First Load JS shared by all              128 kB\n  ├ chunks/framework-5f4595e5518b5600.js   42 kB\n  ├ chunks/main-b680bac5455cc527.js        28.7 kB\n  ├ chunks/pages/_app-3e4fc50571907e5a.js  56 kB\n  ├ chunks/webpack-5752944655d749a0.js     840 B\n  └ css/ad8172df0ff7f2ff.css               985 B\n\n○  (Static)  automatically rendered as static HTML (uses no initial props)\n●  (SSG)     automatically generated as static HTML + JSON (uses getStaticProps)\n\ninfo  - Loaded env from /app/.env\n\u001b[91mBrowserslist: caniuse-lite is outdated. Please run:\n  npx browserslist@latest --update-db\n  Why you should do it regularly: https://github.com/browserslist/browserslist#browsers-data-updating\n\u001b[0minfo  - using build directory: /app/.next\ninfo  - Copying \"static build\" directory\ninfo  - No \"exportPathMap\" found in \"/app/next.config.js\". Generating map from \"./pages\"\ninfo  - Launching 35 workers\ninfo  - Exporting (0/4)\ninfo  - Copying \"public\" directory\ninfo  - Exporting (1/4)\ninfo  - Exporting (2/4)\ninfo  - Exporting (3/4)\ninfo  - Exporting (4/4)\nExport successful. Files written to /app/out\n\n> hat.sh@2.3.6 postbuild\n> node ./post-build.js\n\nRemoving intermediate container 7f814cc2f01e\n ---> f94d933c8dcc\nStep 8/11 : FROM nginx:stable-alpine\n ---> c31fe73098ae\nStep 9/11 : COPY --from=builder /app/out /usr/share/nginx/html\n ---> 62f4ee7d31a5\nStep 10/11 : EXPOSE 3991\n ---> Running in c7e116242346\nRemoving intermediate container c7e116242346\n ---> 93106095bcd3\nStep 11/11 : ENTRYPOINT [\"nginx\", \"-g\", \"daemon off;\"]\n ---> Running in f40720961608\nRemoving intermediate container f40720961608\n ---> 8a66b8fd9344\nSuccessfully built 8a66b8fd9344\nSuccessfully tagged hat.sh:latest\n","stderr":"","imageSize":28542107}}