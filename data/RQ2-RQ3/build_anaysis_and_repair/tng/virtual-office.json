{"repository":"https://github.com/tng/virtual-office","dockerfilePath":"Dockerfile","startTime":1672693337519,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/tng/virtual-office'...\n","error":null,"commit":"3e98f55a52eb3672c61534aa0f4a6962235cdae5"},"originalBuild":{"startTimestamp":1672693338552,"endTimestamp":1672693431702,"error":null,"stdout":"Sending build context to Docker daemon  1.803MB\r\r\nStep 1/21 : FROM node:16 as build\n ---> c910109adbfd\nStep 2/21 : ENV CYPRESS_INSTALL_BINARY=0\n ---> Running in 76d3895ce899\nRemoving intermediate container 76d3895ce899\n ---> 515ebf65c354\nStep 3/21 : WORKDIR /app\n ---> Running in 21b74455a073\nRemoving intermediate container 21b74455a073\n ---> 98b527642e0b\nStep 4/21 : COPY ./package*.json ./\n ---> 428bec6141c2\nStep 5/21 : COPY client/package*.json ./client/\n ---> 7edee85aaa2f\nStep 6/21 : COPY server/package*.json ./server/\n ---> d8da52715eb7\nStep 7/21 : RUN npm install\n ---> Running in a54c6da94a93\n\u001b[91mnpm WARN deprecated uuid@3.4.0: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.\n\u001b[0m\u001b[91mnpm WARN deprecated har-validator@5.1.5: this library is no longer supported\n\u001b[0m\u001b[91mnpm WARN deprecated @types/axios@0.14.0: This is a stub types definition for axios (https://github.com/mzabriskie/axios). axios provides its own type definitions, so you don't need @types/axios installed!\n\u001b[0m\nadded 801 packages, and audited 804 packages in 11s\n\n60 packages are looking for funding\n  run `npm fund` for details\n\n11 vulnerabilities (1 low, 1 moderate, 5 high, 4 critical)\n\nTo address all issues, run:\n  npm audit fix\n\nRun `npm audit` for details.\n\u001b[91mnpm notice \nnpm notice New major version of npm available! 8.19.3 -> 9.2.0\nnpm notice Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm notice\u001b[0m\u001b[91m Run `npm install -g npm@9.2.0` to update!\nnpm notice \n\u001b[0mRemoving intermediate container a54c6da94a93\n ---> 7b61b8a61326\nStep 8/21 : COPY client ./client/\n ---> 94cbe039298a\nStep 9/21 : COPY server ./server/\n ---> 54e9196372ee\nStep 10/21 : RUN npm run build --workspaces\n ---> Running in 46b91d5886d0\n\n> virtual-office-client@0.1.0 build\n> vite build\n\nvite v2.9.13 building for production...\ntransforming...\n✓ 6506 modules transformed.\nrendering chunks...\nbuild/assets/LoginBackground.4911f5c6.jpg   54.43 KiB\nbuild/index.html                            0.78 KiB\nbuild/assets/index.8834e30c.css             0.31 KiB / gzip: 0.24 KiB\nbuild/assets/index.d2b48a54.js              573.20 KiB / gzip: 186.07 KiB\n\n> virtual_office_server@0.0.1 build\n> tsc\n\nRemoving intermediate container 46b91d5886d0\n ---> 81080987c3ab\nStep 11/21 : FROM node:16\n ---> c910109adbfd\nStep 12/21 : ENV NODE_ENV=production\n ---> Running in cf10aeb77c3f\nRemoving intermediate container cf10aeb77c3f\n ---> d3be4c986806\nStep 13/21 : WORKDIR /app\n ---> Running in 649f4f0be5fb\nRemoving intermediate container 649f4f0be5fb\n ---> 0d2134fa36e3\nStep 14/21 : COPY ./package*.json ./\n ---> 9bed402fd9f3\nStep 15/21 : COPY server/package*.json ./server/\n ---> 89a57130d1ef\nStep 16/21 : RUN npm install\n ---> Running in 6851581eaa67\n\nadded 170 packages, and audited 173 packages in 3s\n\n12 packages are looking for funding\n  run `npm fund` for details\n\n2 vulnerabilities (1 moderate, 1 critical)\n\nTo address all issues, run:\n  npm audit fix\n\nRun `npm audit` for details.\n\u001b[91mnpm notice \nnpm notice New major version of npm available! 8.19.3 -> 9.2.0\nnpm notice Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm notice Run `npm install -g npm@9.2.0` to update!\n\u001b[0m\u001b[91mnpm notice \n\u001b[0mRemoving intermediate container 6851581eaa67\n ---> 807c61397268\nStep 17/21 : USER node\n ---> Running in 60e39f3f3c42\nRemoving intermediate container 60e39f3f3c42\n ---> ce31d7425724\nStep 18/21 : COPY --chown=node --from=build /app/client/build ./client/build\n ---> ed9a15f2058d\nStep 19/21 : COPY --chown=node --from=build /app/server/build ./server/build\n ---> 498a0ac12bc4\nStep 20/21 : EXPOSE 9000\n ---> Running in 2f3e606db8ef\nRemoving intermediate container 2f3e606db8ef\n ---> fa0a5e28cdb5\nStep 21/21 : CMD [ \"node\", \"server/build/server/index.js\" ]\n ---> Running in 46a30b0b5964\nRemoving intermediate container 46a30b0b5964\n ---> 2e7add13b3ec\nSuccessfully built 2e7add13b3ec\nSuccessfully tagged virtual-office:latest\n","stderr":"","imageSize":948207530},"repair":{"violations":[{"name":"npmCacheCleanAfterInstall","position":{"start":8,"end":8,"columnStart":4,"columnEnd":15}},{"name":"npmCacheCleanAfterInstall","position":{"start":22,"end":22,"columnStart":4,"columnEnd":15}}],"repairedDockerfile":"FROM node:16 as build\nENV CYPRESS_INSTALL_BINARY=0\n\nWORKDIR /app\n\nCOPY ./package*.json ./\nCOPY client/package*.json ./client/\nCOPY server/package*.json ./server/\nRUN npm install\n\nCOPY client ./client/\nCOPY server ./server/\n\nRUN npm run build --workspaces\n\nFROM node:16\nENV NODE_ENV=production\n\nWORKDIR /app\n\nCOPY ./package*.json ./\nCOPY server/package*.json ./server/\nRUN npm install\n\nUSER node\n\nCOPY --chown=node --from=build /app/client/build ./client/build\nCOPY --chown=node --from=build /app/server/build ./server/build\n\nEXPOSE 9000\n\nCMD [ \"node\", \"server/build/server/index.js\" ]\n"},"repairedBuild":{"startTimestamp":1672693432127,"endTimestamp":1672693520356,"error":null,"stdout":"Sending build context to Docker daemon  1.803MB\r\r\nStep 1/21 : FROM node:16 as build\n ---> c910109adbfd\nStep 2/21 : ENV CYPRESS_INSTALL_BINARY=0\n ---> Running in 27d3b93435bf\nRemoving intermediate container 27d3b93435bf\n ---> 6c3722d7293d\nStep 3/21 : WORKDIR /app\n ---> Running in 902c2f41a615\nRemoving intermediate container 902c2f41a615\n ---> 1edae4cf90a4\nStep 4/21 : COPY ./package*.json ./\n ---> 3f9a34b06373\nStep 5/21 : COPY client/package*.json ./client/\n ---> f55e364e2bde\nStep 6/21 : COPY server/package*.json ./server/\n ---> 547b5df4df6d\nStep 7/21 : RUN npm install\n ---> Running in f59b2e73d0b5\n\u001b[91mnpm WARN deprecated uuid@3.4.0: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.\n\u001b[0m\u001b[91mnpm WARN deprecated har-validator@5.1.5: this library is no longer supported\n\u001b[0m\u001b[91mnpm WARN deprecated @types/axios@0.14.0: This is a stub types definition for axios (https://github.com/mzabriskie/axios). axios provides its own type definitions, so you don't need @types/axios installed!\n\u001b[0m\nadded 801 packages, and audited 804 packages in 11s\n\n60 packages are looking for funding\n  run `npm fund` for details\n\n11 vulnerabilities (1 low, 1 moderate, 5 high, 4 critical)\n\nTo address all issues, run:\n  npm audit fix\n\nRun `npm audit` for details.\n\u001b[91mnpm notice \nnpm notice New major version of npm available! 8.19.3 -> 9.2.0\nnpm notice\u001b[0m\u001b[91m Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm notice Run `npm install -g npm@9.2.0` to update!\nnpm notice \n\u001b[0mRemoving intermediate container f59b2e73d0b5\n ---> 8326b3a8fd71\nStep 8/21 : COPY client ./client/\n ---> 80ed48026fa0\nStep 9/21 : COPY server ./server/\n ---> fb56d2271aef\nStep 10/21 : RUN npm run build --workspaces\n ---> Running in d04365ada03b\n\n> virtual-office-client@0.1.0 build\n> vite build\n\nvite v2.9.13 building for production...\ntransforming...\n✓ 6506 modules transformed.\nrendering chunks...\nbuild/assets/LoginBackground.4911f5c6.jpg   54.43 KiB\nbuild/index.html                            0.78 KiB\nbuild/assets/index.8834e30c.css             0.31 KiB / gzip: 0.24 KiB\nbuild/assets/index.d2b48a54.js              573.20 KiB / gzip: 186.07 KiB\n\n> virtual_office_server@0.0.1 build\n> tsc\n\nRemoving intermediate container d04365ada03b\n ---> 998baf5370d0\nStep 11/21 : FROM node:16\n ---> c910109adbfd\nStep 12/21 : ENV NODE_ENV=production\n ---> Running in 0da5ce7f49d8\nRemoving intermediate container 0da5ce7f49d8\n ---> 5ff69a94eab4\nStep 13/21 : WORKDIR /app\n ---> Running in cc9bc6920888\nRemoving intermediate container cc9bc6920888\n ---> 8151e8b824c6\nStep 14/21 : COPY ./package*.json ./\n ---> 8de2ee0afce6\nStep 15/21 : COPY server/package*.json ./server/\n ---> 13cd5c04f5a7\nStep 16/21 : RUN npm install\n ---> Running in 4bbf3cf29050\n\nadded 170 packages, and audited 173 packages in 3s\n\n12 packages are looking for funding\n  run `npm fund` for details\n\n2 vulnerabilities (1 moderate, 1 critical)\n\nTo address all issues, run:\n  npm audit fix\n\nRun `npm audit` for details.\n\u001b[91mnpm notice \nnpm notice\u001b[0m\u001b[91m New major version of npm available! 8.19.3 -> 9.2.0\nnpm notice\u001b[0m\u001b[91m Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm notice\u001b[0m\u001b[91m Run `npm install -g npm@9.2.0` to update!\nnpm \u001b[0m\u001b[91mnotice\u001b[0m\u001b[91m \n\u001b[0mRemoving intermediate container 4bbf3cf29050\n ---> d6ea77ef4cee\nStep 17/21 : USER node\n ---> Running in 57564866444c\nRemoving intermediate container 57564866444c\n ---> 4e60bda63d0a\nStep 18/21 : COPY --chown=node --from=build /app/client/build ./client/build\n ---> 3456e887d7c0\nStep 19/21 : COPY --chown=node --from=build /app/server/build ./server/build\n ---> 58eddf0b9298\nStep 20/21 : EXPOSE 9000\n ---> Running in 201fa89b0810\nRemoving intermediate container 201fa89b0810\n ---> b6d8339349c0\nStep 21/21 : CMD [ \"node\", \"server/build/server/index.js\" ]\n ---> Running in 4d3a6978436a\nRemoving intermediate container 4d3a6978436a\n ---> 3253e4e83533\nSuccessfully built 3253e4e83533\nSuccessfully tagged virtual-office:latest\n","stderr":"","imageSize":948207358},"endTime":1672693520683}