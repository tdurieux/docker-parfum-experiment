{"repository":"https://github.com/gyselroth/kube-ldap","dockerfilePath":"Dockerfile","startTime":1672723135597,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/gyselroth/kube-ldap'...\n","error":null,"commit":"486874a9bd5f48f6641c583c503ca4179d4a3452"},"originalBuild":{"startTimestamp":1672723136550,"endTimestamp":1672723254327,"error":null,"stdout":"Sending build context to Docker daemon    319kB\r\r\nStep 1/5 : FROM node:8.16.0-alpine\n8.16.0-alpine: Pulling from library/node\ne7c96db7181b: Pulling fs layer\n5b5ce4d3d5f2: Pulling fs layer\nac289eff61bc: Pulling fs layer\n28fbd2f3252d: Pulling fs layer\n28fbd2f3252d: Waiting\ne7c96db7181b: Verifying Checksum\ne7c96db7181b: Download complete\nac289eff61bc: Download complete\n28fbd2f3252d: Verifying Checksum\n28fbd2f3252d: Download complete\ne7c96db7181b: Pull complete\n5b5ce4d3d5f2: Verifying Checksum\n5b5ce4d3d5f2: Download complete\n5b5ce4d3d5f2: Pull complete\nac289eff61bc: Pull complete\n28fbd2f3252d: Pull complete\nDigest: sha256:f457c62e5dabdd52bab39f2f2b426e32dbd7345d7c23059b53e0efa1a1826092\nStatus: Downloaded newer image for node:8.16.0-alpine\n ---> e08ba08cf75a\nStep 2/5 : RUN apk --no-cache add ca-certificates wget &&   wget -q -O /etc/apk/keys/sgerrand.rsa.pub https://alpine-pkgs.sgerrand.com/sgerrand.rsa.pub &&   wget https://github.com/sgerrand/alpine-pkg-glibc/releases/download/2.27-r0/glibc-2.27-r0.apk &&   apk add glibc-2.27-r0.apk &&   apk del wget\n ---> Running in e37b461b15ca\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.9/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.9/community/x86_64/APKINDEX.tar.gz\n(1/2) Installing ca-certificates (20191127-r2)\n(2/2) Installing wget (1.20.3-r0)\nExecuting busybox-1.29.3-r10.trigger\nExecuting ca-certificates-20191127-r2.trigger\nOK: 8 MiB in 18 packages\n\u001b[91m--2023-01-03 05:19:29--  https://github.com/sgerrand/alpine-pkg-glibc/releases/download/2.27-r0/glibc-2.27-r0.apk\n\u001b[0m\u001b[91mResolving github.com... \u001b[0m\u001b[91m140.82.121.3\nConnecting to github.com|140.82.121.3|:443... \u001b[0m\u001b[91mconnected.\n\u001b[0m\u001b[91mHTTP request sent, awaiting response... \u001b[0m\u001b[91m302 Found\nLocation: https://objects.githubusercontent.com/github-production-release-asset-2e65be/33333969/b4285ae2-0bdc-11e8-9c3e-9042c4df4553?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAIWNJYAX4CSVEH53A%2F20230103%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Date=20230103T051929Z&X-Amz-Expires=300&X-Amz-Signature=a8389dc15b691b57027e8d1af3018979279695d466a2edb718a39e7de81460ba&X-Amz-SignedHeaders=host&actor_id=0&key_id=0&repo_id=33333969&response-content-disposition=attachment%3B%20filename%3Dglibc-2.27-r0.apk&response-content-type=application%2Fvnd.android.package-archive [following]\n\u001b[0m\u001b[91m--2023-01-03 05:19:29--  https://objects.githubusercontent.com/github-production-release-asset-2e65be/33333969/b4285ae2-0bdc-11e8-9c3e-9042c4df4553?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAIWNJYAX4CSVEH53A%2F20230103%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Date=20230103T051929Z&X-Amz-Expires=300&X-Amz-Signature=a8389dc15b691b57027e8d1af3018979279695d466a2edb718a39e7de81460ba&X-Amz-SignedHeaders=host&actor_id=0&key_id=0&repo_id=33333969&response-content-disposition=attachment%3B%20filename%3Dglibc-2.27-r0.apk&response-content-type=application%2Fvnd.android.package-archive\nResolving objects.githubusercontent.com... \u001b[0m\u001b[91m185.199.110.133, 185.199.108.133, 185.199.109.133, ...\nConnecting to objects.githubusercontent.com|185.199.110.133|:443... \u001b[0m\u001b[91mconnected.\n\u001b[0m\u001b[91mHTTP request sent, awaiting response... \u001b[0m\u001b[91m200 OK\n\u001b[0m\u001b[91mLength: 2343401 (2.2M) [application/vnd.android.package-archive]\n\u001b[0m\u001b[91mSaving to: 'glibc-2.27-r0.apk'\n\u001b[0m\u001b[91m\n     0K .\u001b[0m\u001b[91m.\u001b[0m\u001b[91m..\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m...\u001b[0m\u001b[91m.\u001b[0m\u001b[91m ...\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m..... .......... .......... .......\u001b[0m\u001b[91m...  2%  233K 10s\n    50K .......... .......... .........\u001b[0m\u001b[91m. .......... ..........  4%  462K 7s\n   100K .......... .......... .......... .......... ..........  6%  223M 5s\n   150K .........\u001b[0m\u001b[91m. .......... ..\u001b[0m\u001b[91m...\u001b[0m\u001b[91m..... ...\u001b[0m\u001b[91m...\u001b[0m\u001b[91m.... \u001b[0m\u001b[91m.\u001b[0m\u001b[91m........\u001b[0m\u001b[91m.  8%  468K 4s\u001b[0m\u001b[91m\n   200K .......\u001b[0m\u001b[91m... .....\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.... ...\u001b[0m\u001b[91m....... \u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.......\u001b[0m\u001b[91m.\u001b[0m\u001b[91m ......\u001b[0m\u001b[91m..\u001b[0m\u001b[91m.. 10%\u001b[0m\u001b[91m 41.9M 4s\n   250K\u001b[0m\u001b[91m ..\u001b[0m\u001b[91m...\u001b[0m\u001b[91m..... ..\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m...... ..\u001b[0m\u001b[91m........\u001b[0m\u001b[91m .......\u001b[0m\u001b[91m... .......... 13%\u001b[0m\u001b[91m  425K 4s\n   300K ..\u001b[0m\u001b[91m.\u001b[0m\u001b[91m....... .\u001b[0m\u001b[91m........\u001b[0m\u001b[91m. .......\u001b[0m\u001b[91m... .....\u001b[0m\u001b[91m..... ...\u001b[0m\u001b[91m....... 15%\u001b[0m\u001b[91m 93.4M 3s\n   350K .\u001b[0m\u001b[91m........\u001b[0m\u001b[91m. .......\u001b[0m\u001b[91m... .....\u001b[0m\u001b[91m..... ...\u001b[0m\u001b[91m....... .\u001b[0m\u001b[91m........\u001b[0m\u001b[91m. 17% 75.9M 3s\n   400K .......\u001b[0m\u001b[91m... .....\u001b[0m\u001b[91m..... ...\u001b[0m\u001b[91m....... .\u001b[0m\u001b[91m........\u001b[0m\u001b[91m. ..\u001b[0m\u001b[91m.....\u001b[0m\u001b[91m... 19%  532K 3s\n   450K .....\u001b[0m\u001b[91m..... ...\u001b[0m\u001b[91m....... ..\u001b[0m\u001b[91m.......\u001b[0m\u001b[91m. .......\u001b[0m\u001b[91m... .....\u001b[0m\u001b[91m..... 21% 76.0M 2s\n   500K ..\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m...... .\u001b[0m\u001b[91m........\u001b[0m\u001b[91m.\u001b[0m\u001b[91m ........\u001b[0m\u001b[91m.. ......\u001b[0m\u001b[91m.\u001b[0m\u001b[91m... .....\u001b[0m\u001b[91m..... 24% 76.8M 2s\n   550K ...\u001b[0m\u001b[91m....... .\u001b[0m\u001b[91m........\u001b[0m\u001b[91m. ..\u001b[0m\u001b[91m........\u001b[0m\u001b[91m ........\u001b[0m\u001b[91m.. ......\u001b[0m\u001b[91m.... 26% 76.4M 2s\n   600K ..\u001b[0m\u001b[91m..\u001b[0m\u001b[91m...\u001b[0m\u001b[91m... ......\u001b[0m\u001b[91m.... ....\u001b[0m\u001b[91m...... .\u001b[0m\u001b[91m.\u001b[0m\u001b[91m........\u001b[0m\u001b[91m ........\u001b[0m\u001b[91m.. 28% 92.6M 2s\n   650K ......\u001b[0m\u001b[91m.... ....\u001b[0m\u001b[91m......\u001b[0m\u001b[91m .\u001b[0m\u001b[91m......... .......\u001b[0m\u001b[91m... ........\u001b[0m\u001b[91m.. 30%  453K 2s\n   700K ..\u001b[0m\u001b[91m.\u001b[0m\u001b[91m....... .\u001b[0m\u001b[91m........\u001b[0m\u001b[91m. .......\u001b[0m\u001b[91m... ...\u001b[0m\u001b[91m..\u001b[0m\u001b[91m..... ...\u001b[0m\u001b[91m....... 32%\u001b[0m\u001b[91m 77.2M\u001b[0m\u001b[91m 2s\n   750K .\u001b[0m\u001b[91m........\u001b[0m\u001b[91m. .......\u001b[0m\u001b[91m... .....\u001b[0m\u001b[91m..... ...\u001b[0m\u001b[91m....... .\u001b[0m\u001b[91m........\u001b[0m\u001b[91m. 34% 61.7M 1s\n   800K .\u001b[0m\u001b[91m......\u001b[0m\u001b[91m... .....\u001b[0m\u001b[91m..... ...\u001b[0m\u001b[91m....... \u001b[0m\u001b[91m.\u001b[0m\u001b[91m.....\u001b[0m\u001b[91m...\u001b[0m\u001b[91m. .......\u001b[0m\u001b[91m... 37% 70.9M 1s\n   850K .....\u001b[0m\u001b[91m..... .\u001b[0m\u001b[91m..\u001b[0m\u001b[91m....... .\u001b[0m\u001b[91m........\u001b[0m\u001b[91m. .......\u001b[0m\u001b[91m... .....\u001b[0m\u001b[91m..... 39%  103M 1s\n   900K ...\u001b[0m\u001b[91m....... .\u001b[0m\u001b[91m........\u001b[0m\u001b[91m. .......\u001b[0m\u001b[91m... .....\u001b[0m\u001b[91m..... ...\u001b[0m\u001b[91m....... 41%  109M 1s\n   950K .\u001b[0m\u001b[91m........\u001b[0m\u001b[91m. .......\u001b[0m\u001b[91m... .....\u001b[0m\u001b[91m..... ...\u001b[0m\u001b[91m....... .\u001b[0m\u001b[91m........\u001b[0m\u001b[91m. 43%  102M 1s\n  1000K ..\u001b[0m\u001b[91m.....\u001b[0m\u001b[91m... .....\u001b[0m\u001b[91m..... ...\u001b[0m\u001b[91m....... .\u001b[0m\u001b[91m........\u001b[0m\u001b[91m. .......... 45%  507K 1s\n  1050K .....\u001b[0m\u001b[91m..... .....\u001b[0m\u001b[91m..... .\u001b[0m\u001b[91m......... .......\u001b[0m\u001b[91m... .......\u001b[0m\u001b[91m... 48% 67.9M 1s\n  1100K ...\u001b[0m\u001b[91m....... .\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.......\u001b[0m\u001b[91m. .......\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.. ......\u001b[0m\u001b[91m.... ...\u001b[0m\u001b[91m.\u001b[0m\u001b[91m...... 50% 85.3M 1s\n  1150K\u001b[0m\u001b[91m .\u001b[0m\u001b[91m.......\u001b[0m\u001b[91m.\u001b[0m\u001b[91m. ........\u001b[0m\u001b[91m.. ......\u001b[0m\u001b[91m.... ...\u001b[0m\u001b[91m....... .\u001b[0m\u001b[91m........\u001b[0m\u001b[91m. 52% 55.5M 1s\n  1200K .......\u001b[0m\u001b[91m... .....\u001b[0m\u001b[91m..... ...\u001b[0m\u001b[91m.\u001b[0m\u001b[91m...... ..\u001b[0m\u001b[91m........\u001b[0m\u001b[91m ........\u001b[0m\u001b[91m.. 54%  108M 1s\n  1250K .....\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.... ...\u001b[0m\u001b[91m....... .\u001b[0m\u001b[91m........\u001b[0m\u001b[91m. .......\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.. .....\u001b[0m\u001b[91m..... 56%  101M 1s\n  1300K ...\u001b[0m\u001b[91m....... .\u001b[0m\u001b[91m........\u001b[0m\u001b[91m. .......\u001b[0m\u001b[91m... .....\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.... ....\u001b[0m\u001b[91m...... 58% 96.2M 1s\n  1350K .\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.......\u001b[0m\u001b[91m. .......\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.. ......\u001b[0m\u001b[91m.... ....\u001b[0m\u001b[91m...... ..\u001b[0m\u001b[91m........ 61% 84.8M 1s\u001b[0m\u001b[91m\n  1400K ........\u001b[0m\u001b[91m.. ......\u001b[0m\u001b[91m.... ...\u001b[0m\u001b[91m....... .\u001b[0m\u001b[91m........\u001b[0m\u001b[91m. .......\u001b[0m\u001b[91m... 63% 85.3M 0s\n  1450K ...\u001b[0m\u001b[91m..\u001b[0m\u001b[91m..... ...\u001b[0m\u001b[91m.\u001b[0m\u001b[91m...... .\u001b[0m\u001b[91m........\u001b[0m\u001b[91m. .......\u001b[0m\u001b[91m... .....\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.... 65% 94.2M 0s\n  1500K ...\u001b[0m\u001b[91m.\u001b[0m\u001b[91m...... ..\u001b[0m\u001b[91m.\u001b[0m\u001b[91m....... .\u001b[0m\u001b[91m........\u001b[0m\u001b[91m. .......\u001b[0m\u001b[91m... .....\u001b[0m\u001b[91m..... 67%  112M 0s\n  1550K .\u001b[0m\u001b[91m........\u001b[0m\u001b[91m.\u001b[0m\u001b[91m ........\u001b[0m\u001b[91m.. ......\u001b[0m\u001b[91m.... ...\u001b[0m\u001b[91m....... .\u001b[0m\u001b[91m.\u001b[0m\u001b[91m........ 69%  104M 0s\u001b[0m\u001b[91m\n  1600K ........\u001b[0m\u001b[91m.. .....\u001b[0m\u001b[91m..... .......... .\u001b[0m\u001b[91m......... ......\u001b[0m\u001b[91m.\u001b[0m\u001b[91m... 72%  493K 0s\n  1650K ......\u001b[0m\u001b[91m.... ...\u001b[0m\u001b[91m....... ..\u001b[0m\u001b[91m.......\u001b[0m\u001b[91m. .......\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.. .....\u001b[0m\u001b[91m..... 74%  106M 0s\n  1700K\u001b[0m\u001b[91m ...\u001b[0m\u001b[91m.......\u001b[0m\u001b[91m .\u001b[0m\u001b[91m........\u001b[0m\u001b[91m.\u001b[0m\u001b[91m .......\u001b[0m\u001b[91m... .....\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.... ...\u001b[0m\u001b[91m....... 76%\u001b[0m\u001b[91m  114M 0s\n  1750K\u001b[0m\u001b[91m .\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.......\u001b[0m\u001b[91m. .......\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.. .....\u001b[0m\u001b[91m..... ...\u001b[0m\u001b[91m.\u001b[0m\u001b[91m...... ..\u001b[0m\u001b[91m........\u001b[0m\u001b[91m 78%  107M\u001b[0m\u001b[91m 0s\u001b[0m\u001b[91m\n  1800K ......\u001b[0m\u001b[91m.\u001b[0m\u001b[91m... ....\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.... ...\u001b[0m\u001b[91m....... .\u001b[0m\u001b[91m.\u001b[0m\u001b[91m........\u001b[0m\u001b[91m .......\u001b[0m\u001b[91m.\u001b[0m\u001b[91m..\u001b[0m\u001b[91m 80% 88.6M 0s\n  1850K .....\u001b[0m\u001b[91m..... ...\u001b[0m\u001b[91m.\u001b[0m\u001b[91m...... ..\u001b[0m\u001b[91m........\u001b[0m\u001b[91m .......\u001b[0m\u001b[91m... ......\u001b[0m\u001b[91m.... 83%  114M 0s\n  1900K\u001b[0m\u001b[91m ..\u001b[0m\u001b[91m..\u001b[0m\u001b[91m...... ..\u001b[0m\u001b[91m........\u001b[0m\u001b[91m ........\u001b[0m\u001b[91m.. .....\u001b[0m\u001b[91m..... ...\u001b[0m\u001b[91m.\u001b[0m\u001b[91m...... 85%  110M 0s\n  1950K ..\u001b[0m\u001b[91m........\u001b[0m\u001b[91m .......\u001b[0m\u001b[91m... .....\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.... ....\u001b[0m\u001b[91m...... ..\u001b[0m\u001b[91m........ 87%  132M\u001b[0m\u001b[91m 0s\u001b[0m\u001b[91m\n  2000K ........\u001b[0m\u001b[91m.. .....\u001b[0m\u001b[91m..... ...\u001b[0m\u001b[91m.\u001b[0m\u001b[91m...... ..\u001b[0m\u001b[91m........\u001b[0m\u001b[91m .......\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.. 89% 97.8M 0s\n  2050K ..\u001b[0m\u001b[91m....\u001b[0m\u001b[91m.... ...\u001b[0m\u001b[91m....... .\u001b[0m\u001b[91m........\u001b[0m\u001b[91m. .......\u001b[0m\u001b[91m... .....\u001b[0m\u001b[91m..... 91%  123M 0s\n  2100K\u001b[0m\u001b[91m ...\u001b[0m\u001b[91m......\u001b[0m\u001b[91m. .\u001b[0m\u001b[91m........\u001b[0m\u001b[91m.\u001b[0m\u001b[91m .......... ....\u001b[0m\u001b[91m..\u001b[0m\u001b[91m.... ...\u001b[0m\u001b[91m....... 93% 90.1M 0s\n  2150K .\u001b[0m\u001b[91m.....\u001b[0m\u001b[91m...\u001b[0m\u001b[91m. .......\u001b[0m\u001b[91m... .\u001b[0m\u001b[91m......... ...\u001b[0m\u001b[91m....... .\u001b[0m\u001b[91m........\u001b[0m\u001b[91m. 96%  112M 0s\n  2200K ....\u001b[0m\u001b[91m...\u001b[0m\u001b[91m... .....\u001b[0m\u001b[91m.....\u001b[0m\u001b[91m ...\u001b[0m\u001b[91m....... \u001b[0m\u001b[91m.\u001b[0m\u001b[91m........\u001b[0m\u001b[91m. .......\u001b[0m\u001b[91m..\u001b[0m\u001b[91m. 98% 96.5M 0s\n  2250K ......\u001b[0m\u001b[91m.\u001b[0m\u001b[91m... .....\u001b[0m\u001b[91m..... .\u001b[0m\u001b[91m........\u001b[0m\u001b[91m.\u001b[0m\u001b[91m .......\u001b[0m\u001b[91m.            \u001b[0m\u001b[91m 100% 89.4M=1.0s\n\n\u001b[0m\u001b[91m2023-01-03 05:19:31 (2.30 MB/s) - 'glibc-2.27-r0.apk' saved [2343401/2343401]\n\n\u001b[0mfetch http://dl-cdn.alpinelinux.org/alpine/v3.9/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.9/community/x86_64/APKINDEX.tar.gz\n(1/1) Installing glibc (2.27-r0)\nOK: 13 MiB in 19 packages\n(1/1) Purging wget (1.20.3-r0)\nExecuting busybox-1.29.3-r10.trigger\nOK: 12 MiB in 18 packages\nRemoving intermediate container e37b461b15ca\n ---> 4d6bcb870f6c\nStep 3/5 : COPY . /srv/www/kube-ldap\n ---> 93d7dc650100\nStep 4/5 : RUN cd /srv/www/kube-ldap &&   yarn install &&   yarn run test &&   yarn run build &&   yarn install --production=true\n ---> Running in 4c835f54cfe6\nyarn install v1.15.2\n[1/4] Resolving packages...\n[2/4] Fetching packages...\ninfo fsevents@1.2.9: The platform \"linux\" is incompatible with this module.\ninfo \"fsevents@1.2.9\" is an optional dependency and failed compatibility check. Excluding it from installation.\n[3/4] Linking dependencies...\n\u001b[91mwarning \" > babel-jest@22.4.4\" has unmet peer dependency \"babel-core@^6.0.0 || ^7.0.0-0\".\nwarning \" > babel-watch@2.0.8\" has unmet peer dependency \"babel-core@6.5.1 - 6.6.0 || ^6.6.x\".\n\u001b[0m[4/4] Building fresh packages...\n$ yarn run build\nyarn run v1.15.2\n$ yarn run eslint --fix src/ && yarn run flow && yarn run babel src/ --ignore=__mocks__/** -d build/\n$ /srv/www/kube-ldap/node_modules/.bin/eslint --fix src/\n\n/srv/www/kube-ldap/src/ldap/mapping.js\n  45:1  warning  Line 45 exceeds the maximum line length of 80  max-len\n\n✖ 1 problem (0 errors, 1 warning)\n\n$ /srv/www/kube-ldap/node_modules/.bin/flow\n\u001b[91mLaunching Flow server for /srv/www/kube-ldap\n\u001b[0m\u001b[91mSpawned flow server (pid=79)\nLogs will go to /tmp/flow/zSsrvzSwwwzSkube-ldap.log\nMonitor logs will go to /tmp/flow/zSsrvzSwwwzSkube-ldap.monitor_log\n\u001b[0m\u001b[91mStarted a new flow server: -\u001b[0m\u001b[91mPlease wait. Server is starting up: \\\u001b[0m\u001b[91mPlease wait. Server is initializing (starting up): |\u001b[0m\u001b[91mPlease wait. Server is initializing (parsed files 0): /\u001b[0m\u001b[91mPlease wait. Server is initializing (parsed files 9764): -\u001b[0m\u001b[91mPlease wait. Server is initializing (parsed files 9764): \\\u001b[0m\u001b[91mPlease wait. Server is initializing (resolving dependencies): |\u001b[0m\u001b[91mPlease wait. Server is initializing (calculating dependencies): /\u001b[0m\u001b[91mPlease wait. Server is initializing (merged files 0/16 (0.0%)): -\u001b[0m\u001b[91mPlease wait. Server is initializing (finishing up): \\Please wait. Server is garbage collecting shared memory: |\u001b[0m\u001b[91mPlease wait. Server is handling a request (starting up): /\u001b[0m\u001b[91mPlease wait. Server is handling a request (collating errors): -\u001b[0mNo errors!\n$ /srv/www/kube-ldap/node_modules/.bin/babel src/ '--ignore=__mocks__/**' -d build/\nsrc/api/healthz.js -> build/api/healthz.js\nsrc/api/index.js -> build/api/index.js\nsrc/api/tokenAuthentication.js -> build/api/tokenAuthentication.js\nsrc/api/userAuthentication.js -> build/api/userAuthentication.js\nsrc/app.js -> build/app.js\nsrc/config.js -> build/config.js\nsrc/index.js -> build/index.js\nsrc/ldap/authenticator.js -> build/ldap/authenticator.js\nsrc/ldap/client.js -> build/ldap/client.js\nsrc/ldap/index.js -> build/ldap/index.js\nsrc/ldap/mapping.js -> build/ldap/mapping.js\nsrc/logger.js -> build/logger.js\nDone in 3.99s.\nDone in 12.99s.\nyarn run v1.15.2\n$ jest --coverage\n\u001b[91mPASS test/unit/api/healthz.test.js\n\u001b[0m\u001b[91m  Healthz.run()\n\u001b[0m\u001b[91m    ✓ Sends \"OK\" (5ms)\n\n\u001b[0m\u001b[91mPASS test/unit/config.test.js\n\u001b[0m\u001b[91m  config.loglevel\n\u001b[0m\u001b[91m    ✓ test default value [info] (5ms)\n\u001b[0m\u001b[91m    ✓ test custom value [debug] (1ms)\n\u001b[0m\u001b[91m  config.ldap.uri\n\u001b[0m\u001b[91m    ✓ test default value [ldap://ldap.example.com]\n\u001b[0m\u001b[91m    ✓ test custom value [ldap://ldap.example.local] (1ms)\n\u001b[0m\u001b[91m  config.ldap.bindDn\n\u001b[0m\u001b[91m    ✓ test default value [uid=bind,dc=example,dc=com]\n\u001b[0m\u001b[91m    ✓ test custom value [uid=bind,dc=example,dc=local]\n\u001b[0m\u001b[91m  config.ldap.bindPw\n\u001b[0m\u001b[91m    ✓ test default value [secret] (1ms)\n\u001b[0m\u001b[91m    ✓ test custom value [topsecret]\n\u001b[0m\u001b[91m  config.ldap.baseDn\n\u001b[0m\u001b[91m    ✓ test default value [dc=example,dc=com]\n\u001b[0m\u001b[91m    ✓ test custom value [dc=example,dc=local]\n\u001b[0m\u001b[91m  config.ldap.filter\n\u001b[0m\u001b[91m    ✓ test default value [(uid=%s)] (1ms)\n\u001b[0m\u001b[91m    ✓ test custom value [(mail=%s)]\n\u001b[0m\u001b[91m  config.ldap.timeout\n\u001b[0m\u001b[91m    ✓ test default value [0]\n\u001b[0m\u001b[91m    ✓ test custom value [30]\n  config.mapping.username\n\u001b[0m\u001b[91m    ✓ test default value [uid] (1ms)\n\u001b[0m\u001b[91m    ✓ test custom value [mail]\n\u001b[0m\u001b[91m  config.mapping.uid\n\u001b[0m\u001b[91m    ✓ test default value [uid]\n\u001b[0m\u001b[91m    ✓ test custom value [cn]\n\u001b[0m\u001b[91m  config.mapping.groups\n\u001b[0m\u001b[91m    ✓ test default value [memberOf] (1ms)\n\u001b[0m\u001b[91m    ✓ test custom value [groups]\n\u001b[0m\u001b[91m  config.mapping.extraFields\n\u001b[0m\u001b[91m    ✓ test default value []\n\u001b[0m\u001b[91m    ✓ test custom value [uidNumber] (1ms)\n\u001b[0m\u001b[91m    ✓ test custom value [uidNumber,gidNumber]\n  config.jwt.key\n\u001b[0m\u001b[91m    ✓ test default value [secret]\n\u001b[0m\u001b[91m    ✓ test custom value [topsecret]\n\u001b[0m\u001b[91m  config.jwt.tokenLifetime\n\u001b[0m\u001b[91m    ✓ test default value [28800] (1ms)\n\u001b[0m\u001b[91m    ✓ test custom value [3600]\n\u001b[0m\u001b[91m  config.tls.enabled\n\u001b[0m\u001b[91m    ✓ test default value [true]\n\u001b[0m\u001b[91m    ✓ test custom value [false]\n\u001b[0m\u001b[91m    ✓ test custom value [true]\n\u001b[0m\u001b[91m    ✓ test custom value [abc] (1ms)\n\u001b[0m\u001b[91m  config.tls.cert\n\u001b[0m\u001b[91m    ✓ test default value [/etc/ssl/kube-ldap/cert.pem]\n\u001b[0m\u001b[91m    ✓ test custom value [/etc/ssl/example.com/cert.pem]\n\u001b[0m\u001b[91m  config.tls.key\n\u001b[0m\u001b[91m    ✓ test default value [/etc/ssl/kube-ldap/key.pem]\n\u001b[0m\u001b[91m    ✓ test custom value [/etc/ssl/example.com/key.pem]\n\u001b[0m\u001b[91m  config.tls.ca\n\u001b[0m\u001b[91m    ✓ test default value [null] (1ms)\n\u001b[0m\u001b[91m    ✓ test custom value [/etc/ssl/example.com/ca.pem]\n\u001b[0m\u001b[91m  config.prometheus.username\n\u001b[0m\u001b[91m    ✓ test default value [prometheus]\n\u001b[0m\u001b[91m    ✓ test custom value [john.doe]\n\u001b[0m\u001b[91m    ✓ test custom value []\n\u001b[0m\u001b[91m  config.prometheus.password\n\u001b[0m\u001b[91m    ✓ test default value [secret] (1ms)\n\u001b[0m\u001b[91m    ✓ test custom value [password]\n\u001b[0m\u001b[91m    ✓ test custom value []\n\u001b[0m\u001b[91m  config.prometheus.nodejsProbeInterval\n\u001b[0m\u001b[91m    ✓ test default value [10000]\n\u001b[0m\u001b[91m    ✓ test custom value [5000]\n\u001b[0m\u001b[91m  config.port\n\u001b[0m\u001b[91m    ✓ test default value [8081]\n\u001b[0m\u001b[91m    ✓ test custom value [8443] (1ms)\n\u001b[0m\u001b[91m\n\u001b[0m\u001b[91mPASS test/unit/ldap/client.test.js\n  Client.bind()\n    ✓ Resolves to true for successful bind (8ms)\n    ✓ Resolves to false for unsuccessful bind (1ms)\n\u001b[0m\u001b[91m  Client.search()\n\u001b[0m\u001b[91m    ✓ Rejects on bind error (1ms)\n\u001b[0m\u001b[91m    ✓ Rejects on search error (1ms)\n\u001b[0m\u001b[91m    ✓ Rejects on empty result\n\n\u001b[0m\u001b[91mPASS test/unit/ldap/canonicalizeDn.test.js\n  canonicalizeDn()\n\u001b[0m\u001b[91m    ✓ Returns canonicalized on valid DNs (3ms)\n\u001b[0m\u001b[91m    ✓ Throws error on invalid DNs (1ms)\n\n\u001b[0m\u001b[91mPASS test/unit/ldap/mapping.test.js\n  Mapping.getLdapAttributes()\n\u001b[0m\u001b[91m    ✓ returns array of all attributes (3ms)\n\u001b[0m\u001b[91m    ✓ returns array of all attributes if extraFields was empty (1ms)\n\u001b[0m\u001b[91m  Mapping.ldapToKubernetes()\n\u001b[0m\u001b[91m    ✓ returns mapped object with attributes\n\u001b[0m\u001b[91m    ✓ handles when groups attribute is undefined (1ms)\n\u001b[0m\u001b[91m    ✓ handles when groups attribute is a single object\n\n\u001b[0m\u001b[91mPASS test/unit/ldap/authenticator.test.js\n  Authenticator.authenticate()\n\u001b[0m\u001b[91m    ✓ Returns true on valid user (10ms)\n    ✓ Returns false on invalid user\n\u001b[0m\u001b[91m  Authenticator.getAttributes()\n\u001b[0m\u001b[91m    ✓ Returns user object (2ms)\n\u001b[0m\u001b[91m    ✓ Rejects on internal error (e.g. ldap error) (2ms)\n\u001b[0m\u001b[91m\n\u001b[0m\u001b[91merror: not a valid http basic authorization header\n\u001b[0m\u001b[91merror: not a valid http basic authorization header\n\u001b[0m\u001b[91merror: secretOrPrivateKey must have a value\n\u001b[0m\u001b[91mPASS test/unit/api/userAuthentication.test.js\n  UserAuthentication.run()\n    ✓ Sends token on authenticated user (10ms)\n\u001b[0m\u001b[91m    ✓ Sends 401 on uauthenticated user (2ms)\n\u001b[0m\u001b[91m    ✓ Sends 401 on missing auth header\n\u001b[0m\u001b[91m    ✓ Sends 400 on invalid auth header (3ms)\n\u001b[0m\u001b[91m    ✓ Sends 400 on not http-basic auth header\n\u001b[0m\u001b[91m    ✓ Sends 500 on invalid key (1ms)\n\u001b[0m\u001b[91m  UserAuthentication.getToken()\n\u001b[0m\u001b[91m    ✓ Returns token on valid request (2ms)\n\u001b[0m\u001b[91m  UserAuthentication.parseBasicAuthHeader()\n    ✓ Throws Error if header is not basic auth\n\u001b[0m\u001b[91m    ✓ Throws Error if basic auth header is invalid (1ms)\n\u001b[0m\u001b[91m    ✓ Returns user and password from header\n\u001b[0m\u001b[91m\n\u001b[0minfo: Error while verifying token: [JsonWebTokenError] with message [invalid signature]\ninfo: Error while verifying token: [TokenExpiredError] with message [jwt expired]\ninfo: Error while verifying token: [undefined] with message [undefined]\n\u001b[91mPASS test/unit/api/tokenAuthentication.test.js\n\u001b[0m\u001b[91m  TokenAuthentication.extractAndVerifyToken()\n    ✓ Returns token content (10ms)\n\u001b[0m\u001b[91m    ✓ Throws error on token with invalid signature (1ms)\n\u001b[0m\u001b[91m    ✓ Throws error on expired token (1ms)\n\u001b[0m\u001b[91m  TokenAuthentication.run()\n\u001b[0m\u001b[91m    ✓ Sends token payload on valid token (4ms)\n\u001b[0m\u001b[91m    ✓ Sends \"not-authenticated\" response on invalid token (3ms)\n\u001b[0m\u001b[91m    ✓ Sends \"not-authenticated\" response on invalid token\n\u001b[0m\u001b[91m    ✓ Sends 400 response on invalid request (1ms)\n\u001b[0m\u001b[91m    ✓ Sends 400 response on non-TokenReview request\n\u001b[0m\u001b[91m    ✓ Sends \"not-authenticated\" on internal server error (e.g. ldap error) (1ms)\n\u001b[0m\u001b[91m\n\u001b[0m2023-01-03T05:20:05.520Z - info: ::ffff:127.0.0.1 - - [03/Jan/2023:05:20:05 +0000] \"GET /healthz HTTP/1.1\" 200 2 \"-\" \"node-superagent/3.8.3\"\n\n2023-01-03T05:20:05.530Z - info: ::ffff:127.0.0.1 - john.doe [03/Jan/2023:05:20:05 +0000] \"GET /auth HTTP/1.1\" 200 157 \"-\" \"node-superagent/3.8.3\"\n\n\u001b[91m2023-01-03T05:20:05.534Z - error: not a valid http basic authorization header\n\u001b[0m2023-01-03T05:20:05.535Z - info: ::ffff:127.0.0.1 - - [03/Jan/2023:05:20:05 +0000] \"GET /auth HTTP/1.1\" 400 11 \"-\" \"node-superagent/3.8.3\"\n\n2023-01-03T05:20:05.536Z - info: ::ffff:127.0.0.1 - - [03/Jan/2023:05:20:05 +0000] \"GET /auth HTTP/1.1\" 401 12 \"-\" \"node-superagent/3.8.3\"\n\n2023-01-03T05:20:05.538Z - info: error by mock\n2023-01-03T05:20:05.538Z - info: ::ffff:127.0.0.1 - john.doe [03/Jan/2023:05:20:05 +0000] \"GET /auth HTTP/1.1\" 401 12 \"-\" \"node-superagent/3.8.3\"\n\n2023-01-03T05:20:05.550Z - info: ::ffff:127.0.0.1 - - [03/Jan/2023:05:20:05 +0000] \"POST /token HTTP/1.1\" 200 176 \"-\" \"node-superagent/3.8.3\"\n\n2023-01-03T05:20:05.553Z - info: ::ffff:127.0.0.1 - - [03/Jan/2023:05:20:05 +0000] \"POST /token HTTP/1.1\" 400 11 \"-\" \"node-superagent/3.8.3\"\n\n2023-01-03T05:20:05.557Z - info: ::ffff:127.0.0.1 - prometheus [03/Jan/2023:05:20:05 +0000] \"POST /metrics HTTP/1.1\" 200 - \"-\" \"node-superagent/3.8.3\"\n\n2023-01-03T05:20:05.560Z - info: ::ffff:127.0.0.1 - - [03/Jan/2023:05:20:05 +0000] \"POST /metrics HTTP/1.1\" 200 - \"-\" \"node-superagent/3.8.3\"\n\n2023-01-03T05:20:05.561Z - info: ::ffff:127.0.0.1 - - [03/Jan/2023:05:20:05 +0000] \"POST /metrics HTTP/1.1\" 401 0 \"-\" \"node-superagent/3.8.3\"\n\n2023-01-03T05:20:05.563Z - info: ::ffff:127.0.0.1 - john.doe [03/Jan/2023:05:20:05 +0000] \"POST /metrics HTTP/1.1\" 401 0 \"-\" \"node-superagent/3.8.3\"\n\n2023-01-03T05:20:05.564Z - info: ::ffff:127.0.0.1 - john.doe [03/Jan/2023:05:20:05 +0000] \"POST /metrics HTTP/1.1\" 401 0 \"-\" \"node-superagent/3.8.3\"\n\n\u001b[91mPASS test/integration/app.test.js (5.126s)\n  test app routes\n    ✓ GET /healthz: 200 OK (47ms)\n\u001b[0m\u001b[91m    ✓ GET /auth: 200 OK (9ms)\n\u001b[0m\u001b[91m    ✓ GET /auth: 400 Bad Request (2ms)\n\u001b[0m\u001b[91m    ✓ GET /auth: 401 Unauthorized (No authorization header) (2ms)\n\u001b[0m\u001b[91m    ✓ GET /auth: 401 Unauthorized (Wrong username/password) (1ms)\n\u001b[0m\u001b[91m    ✓ POST /token: 200 OK (14ms)\n\u001b[0m\u001b[91m    ✓ POST /token: 400 Bad Request (2ms)\n\u001b[0m\u001b[91m    ✓ GET /metrics: 200 OK (enabled basic auth) (4ms)\n\u001b[0m\u001b[91m    ✓ GET /metrics: 200 OK (with disabled basic auth) (2ms)\n\u001b[0m\u001b[91m    ✓ GET /metrics: 401 Unauthorized (No authorization header) (2ms)\n\u001b[0m\u001b[91m    ✓ GET /metrics: 401 Unauthorized (Wrong username/password) (1ms)\n\u001b[0m\u001b[91m    ✓ GET /metrics: 401 Unauthorized (Wrong username/password) (1ms)\n\n\u001b[0m-------------------------|----------|----------|----------|----------|-------------------|\nFile                     |  % Stmts | % Branch |  % Funcs |  % Lines | Uncovered Line #s |\n-------------------------|----------|----------|----------|----------|-------------------|\nAll files                |    96.32 |    97.65 |    94.29 |    96.32 |                   |\n src                     |    94.59 |      100 |     87.5 |    94.59 |                   |\n  app.js                 |       92 |      100 |       75 |       92 |             93,94 |\n  config.js              |      100 |      100 |      100 |      100 |                   |\n  logger.js              |      100 |      100 |      100 |      100 |                   |\n src/api                 |    93.75 |      100 |    91.67 |    93.75 |                   |\n  healthz.js             |      100 |      100 |      100 |      100 |                   |\n  index.js               |      100 |      100 |      100 |      100 |                   |\n  tokenAuthentication.js |     93.1 |      100 |      100 |     93.1 |             60,61 |\n  userAuthentication.js  |    94.12 |      100 |    85.71 |    94.12 |             63,64 |\n src/ldap                |      100 |    86.67 |      100 |      100 |                   |\n  authenticator.js       |      100 |      100 |      100 |      100 |                   |\n  client.js              |      100 |    83.33 |      100 |      100 |                61 |\n  index.js               |      100 |      100 |      100 |      100 |                   |\n  mapping.js             |      100 |    85.71 |      100 |      100 |                47 |\n-------------------------|----------|----------|----------|----------|-------------------|\n\u001b[91mTest Suites: 9 passed, 9 total\nTests:       95 passed, 95 total\nSnapshots:   0 total\nTime:        5.758s\nRan all test suites.\n\u001b[0mDone in 6.46s.\nyarn run v1.15.2\n$ yarn run eslint --fix src/ && yarn run flow && yarn run babel src/ --ignore=__mocks__/** -d build/\n$ /srv/www/kube-ldap/node_modules/.bin/eslint --fix src/\n\n/srv/www/kube-ldap/src/ldap/mapping.js\n  45:1  warning  Line 45 exceeds the maximum line length of 80  max-len\n\n✖ 1 problem (0 errors, 1 warning)\n\n$ /srv/www/kube-ldap/node_modules/.bin/flow\n\u001b[91mPlease wait. Server is garbage collecting shared memory: -\u001b[0m\u001b[91mPlease wait. Server is handling a request (starting up): \\\u001b[0m\u001b[91mPlease wait. Server is handling a request (collating errors): |\u001b[0mNo errors!\n$ /srv/www/kube-ldap/node_modules/.bin/babel src/ '--ignore=__mocks__/**' -d build/\nsrc/api/healthz.js -> build/api/healthz.js\nsrc/api/index.js -> build/api/index.js\nsrc/api/tokenAuthentication.js -> build/api/tokenAuthentication.js\nsrc/api/userAuthentication.js -> build/api/userAuthentication.js\nsrc/app.js -> build/app.js\nsrc/config.js -> build/config.js\nsrc/index.js -> build/index.js\nsrc/ldap/authenticator.js -> build/ldap/authenticator.js\nsrc/ldap/client.js -> build/ldap/client.js\nsrc/ldap/index.js -> build/ldap/index.js\nsrc/ldap/mapping.js -> build/ldap/mapping.js\nsrc/logger.js -> build/logger.js\nDone in 2.10s.\nyarn install v1.15.2\n[1/4] Resolving packages...\n[2/4] Fetching packages...\ninfo fsevents@1.2.9: The platform \"linux\" is incompatible with this module.\ninfo \"fsevents@1.2.9\" is an optional dependency and failed compatibility check. Excluding it from installation.\n[3/4] Linking dependencies...\n\u001b[91mwarning \" > babel-jest@22.4.4\" has unmet peer dependency \"babel-core@^6.0.0 || ^7.0.0-0\".\nwarning \" > babel-watch@2.0.8\" has unmet peer dependency \"babel-core@6.5.1 - 6.6.0 || ^6.6.x\".\n\u001b[0m[4/4] Building fresh packages...\nDone in 1.77s.\nRemoving intermediate container 4c835f54cfe6\n ---> 76a868aeb438\nStep 5/5 : CMD [\"node\", \"/srv/www/kube-ldap/build/index.js\"]\n ---> Running in 3ec4c1781c15\nRemoving intermediate container 3ec4c1781c15\n ---> 5e0029f7f031\nSuccessfully built 5e0029f7f031\nSuccessfully tagged kube-ldap:latest\n","stderr":"","imageSize":211336333},"repair":{"violations":[{"name":"apkAddUseNoCache","position":{"start":5,"end":5,"columnStart":2,"columnEnd":27}}],"repairedDockerfile":"FROM node:8.16.0-alpine\n\nRUN apk --no-cache add ca-certificates wget && \\\n  wget -q -O /etc/apk/keys/sgerrand.rsa.pub https://alpine-pkgs.sgerrand.com/sgerrand.rsa.pub && \\\n  wget https://github.com/sgerrand/alpine-pkg-glibc/releases/download/2.27-r0/glibc-2.27-r0.apk && \\\n  apk add --no-cache glibc-2.27-r0.apk && \\\n  apk del wget\n\nCOPY . /srv/www/kube-ldap\nRUN cd /srv/www/kube-ldap && \\\n  yarn install && \\\n  yarn run test && \\\n  yarn run build && \\\n  yarn install --production=true\n\nCMD [\"node\", \"/srv/www/kube-ldap/build/index.js\"]\n"},"repairedBuild":{"startTimestamp":1672723275143,"endTimestamp":1672723376352,"error":null,"stdout":"Sending build context to Docker daemon    319kB\r\r\nStep 1/5 : FROM node:8.16.0-alpine\n ---> e08ba08cf75a\nStep 2/5 : RUN apk --no-cache add ca-certificates wget &&   wget -q -O /etc/apk/keys/sgerrand.rsa.pub https://alpine-pkgs.sgerrand.com/sgerrand.rsa.pub &&   wget https://github.com/sgerrand/alpine-pkg-glibc/releases/download/2.27-r0/glibc-2.27-r0.apk &&   apk add --no-cache glibc-2.27-r0.apk &&   apk del wget\n ---> Running in 0c59496bf59c\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.9/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.9/community/x86_64/APKINDEX.tar.gz\n(1/2) Installing ca-certificates (20191127-r2)\n(2/2) Installing wget (1.20.3-r0)\nExecuting busybox-1.29.3-r10.trigger\nExecuting ca-certificates-20191127-r2.trigger\nOK: 8 MiB in 18 packages\n\u001b[91m--2023-01-03 05:21:24--  https://github.com/sgerrand/alpine-pkg-glibc/releases/download/2.27-r0/glibc-2.27-r0.apk\n\u001b[0m\u001b[91mResolving github.com... \u001b[0m\u001b[91m140.82.121.3\nConnecting to github.com|140.82.121.3|:443... \u001b[0m\u001b[91mconnected.\n\u001b[0m\u001b[91mHTTP request sent, awaiting response... \u001b[0m\u001b[91m302 Found\nLocation: https://objects.githubusercontent.com/github-production-release-asset-2e65be/33333969/b4285ae2-0bdc-11e8-9c3e-9042c4df4553?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAIWNJYAX4CSVEH53A%2F20230103%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Date=20230103T052124Z&X-Amz-Expires=300&X-Amz-Signature=b84b7a9d6931bac9f28304b6a690d4c8f1ffbd8864c6b90aee7b4d6dcd81afa2&X-Amz-SignedHeaders=host&actor_id=0&key_id=0&repo_id=33333969&response-content-disposition=attachment%3B%20filename%3Dglibc-2.27-r0.apk&response-content-type=application%2Fvnd.android.package-archive [following]\n\u001b[0m\u001b[91m--2023-01-03 05:21:25--  https://objects.githubusercontent.com/github-production-release-asset-2e65be/33333969/b4285ae2-0bdc-11e8-9c3e-9042c4df4553?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAIWNJYAX4CSVEH53A%2F20230103%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Date=20230103T052124Z&X-Amz-Expires=300&X-Amz-Signature=b84b7a9d6931bac9f28304b6a690d4c8f1ffbd8864c6b90aee7b4d6dcd81afa2&X-Amz-SignedHeaders=host&actor_id=0&key_id=0&repo_id=33333969&response-content-disposition=attachment%3B%20filename%3Dglibc-2.27-r0.apk&response-content-type=application%2Fvnd.android.package-archive\nResolving objects.githubusercontent.com... \u001b[0m\u001b[91m185.199.108.133, 185.199.109.133, 185.199.111.133, ...\nConnecting to objects.githubusercontent.com|185.199.108.133|:443... \u001b[0m\u001b[91mconnected.\n\u001b[0m\u001b[91mHTTP request sent, awaiting response... \u001b[0m\u001b[91m200 OK\n\u001b[0m\u001b[91mLength: 2343401 (2.2M) [application/vnd.android.package-archive]\n\u001b[0m\u001b[91mSaving to: 'glibc-2.27-r0.apk'\n\u001b[0m\u001b[91m\n     0K ......\u001b[0m\u001b[91m..\u001b[0m\u001b[91m.. ......\u001b[0m\u001b[91m.... .......... \u001b[0m\u001b[91m..\u001b[0m\u001b[91m........\u001b[0m\u001b[91m .....\u001b[0m\u001b[91m...\u001b[0m\u001b[91m..  2% 16.1M 0s\n    50K ......\u001b[0m\u001b[91m.... ....\u001b[0m\u001b[91m...... ..\u001b[0m\u001b[91m........\u001b[0m\u001b[91m ........\u001b[0m\u001b[91m.. ....\u001b[0m\u001b[91m..\u001b[0m\u001b[91m....  4% 50.8M 0s\n   100K ....\u001b[0m\u001b[91m...... ..\u001b[0m\u001b[91m........\u001b[0m\u001b[91m ........\u001b[0m\u001b[91m.. ......\u001b[0m\u001b[91m.... ....\u001b[0m\u001b[91m......  6% 68.0M 0s\n   150K ..\u001b[0m\u001b[91m.......\u001b[0m\u001b[91m.\u001b[0m\u001b[91m ........\u001b[0m\u001b[91m.. ......\u001b[0m\u001b[91m.... ....\u001b[0m\u001b[91m...... ..\u001b[0m\u001b[91m........  8%  105M 0s\u001b[0m\u001b[91m\n   200K ..\u001b[0m\u001b[91m......\u001b[0m\u001b[91m.. ......\u001b[0m\u001b[91m.... ....\u001b[0m\u001b[91m...... ..\u001b[0m\u001b[91m........\u001b[0m\u001b[91m ........\u001b[0m\u001b[91m.\u001b[0m\u001b[91m. 10% 88.5M 0s\n   250K .......\u001b[0m\u001b[91m... .....\u001b[0m\u001b[91m..... ...\u001b[0m\u001b[91m....... .\u001b[0m\u001b[91m........\u001b[0m\u001b[91m. .......\u001b[0m\u001b[91m... 13%  112M 0s\n   300K .....\u001b[0m\u001b[91m..... ...\u001b[0m\u001b[91m....... .\u001b[0m\u001b[91m........\u001b[0m\u001b[91m. .......\u001b[0m\u001b[91m... .....\u001b[0m\u001b[91m..... 15%  114M 0s\n   350K ...\u001b[0m\u001b[91m....... .\u001b[0m\u001b[91m........\u001b[0m\u001b[91m. .......\u001b[0m\u001b[91m... .....\u001b[0m\u001b[91m..... ...\u001b[0m\u001b[91m....... 17%  115M 0s\n   400K .\u001b[0m\u001b[91m........\u001b[0m\u001b[91m. .......\u001b[0m\u001b[91m... .....\u001b[0m\u001b[91m..... ...\u001b[0m\u001b[91m....... .\u001b[0m\u001b[91m........\u001b[0m\u001b[91m. 19%  102M 0s\n   450K ......\u001b[0m\u001b[91m.\u001b[0m\u001b[91m... .....\u001b[0m\u001b[91m.....\u001b[0m\u001b[91m ...\u001b[0m\u001b[91m....... .\u001b[0m\u001b[91m........\u001b[0m\u001b[91m. .......\u001b[0m\u001b[91m... 21%  113M 0s\n   500K ....\u001b[0m\u001b[91m.\u001b[0m\u001b[91m..... ...\u001b[0m\u001b[91m....... .\u001b[0m\u001b[91m......... ..\u001b[0m\u001b[91m.....\u001b[0m\u001b[91m... .....\u001b[0m\u001b[91m..... 24%  113M 0s\n   550K ..\u001b[0m\u001b[91m.\u001b[0m\u001b[91m....... .\u001b[0m\u001b[91m........\u001b[0m\u001b[91m. .......\u001b[0m\u001b[91m... .....\u001b[0m\u001b[91m..... ...\u001b[0m\u001b[91m.......\u001b[0m\u001b[91m 26%  116M 0s\n   600K .\u001b[0m\u001b[91m........\u001b[0m\u001b[91m. .......\u001b[0m\u001b[91m... .....\u001b[0m\u001b[91m..... ...\u001b[0m\u001b[91m....... .\u001b[0m\u001b[91m........\u001b[0m\u001b[91m. 28% 86.1M 0s\n   650K .......\u001b[0m\u001b[91m... .....\u001b[0m\u001b[91m...\u001b[0m\u001b[91m.. .......... ..\u001b[0m\u001b[91m.......\u001b[0m\u001b[91m. .......\u001b[0m\u001b[91m... 30%  118M 0s\n   700K .....\u001b[0m\u001b[91m..... .\u001b[0m\u001b[91m..\u001b[0m\u001b[91m....... .\u001b[0m\u001b[91m........\u001b[0m\u001b[91m. .......\u001b[0m\u001b[91m... .....\u001b[0m\u001b[91m..... 32%  114M 0s\n   750K ...\u001b[0m\u001b[91m....... .\u001b[0m\u001b[91m........\u001b[0m\u001b[91m. .......\u001b[0m\u001b[91m... .....\u001b[0m\u001b[91m..... \u001b[0m\u001b[91m...\u001b[0m\u001b[91m....... 34%  114M 0s\n   800K .\u001b[0m\u001b[91m........\u001b[0m\u001b[91m. .......\u001b[0m\u001b[91m... .....\u001b[0m\u001b[91m..... ...\u001b[0m\u001b[91m....... .\u001b[0m\u001b[91m........\u001b[0m\u001b[91m. 37% 90.6M 0s\n   850K .......\u001b[0m\u001b[91m... .....\u001b[0m\u001b[91m..... ..\u001b[0m\u001b[91m.\u001b[0m\u001b[91m....... .\u001b[0m\u001b[91m........\u001b[0m\u001b[91m. .......\u001b[0m\u001b[91m... 39% 80.3M 0s\u001b[0m\u001b[91m\n   900K .....\u001b[0m\u001b[91m..... ...\u001b[0m\u001b[91m....... .\u001b[0m\u001b[91m........\u001b[0m\u001b[91m. .......\u001b[0m\u001b[91m... .....\u001b[0m\u001b[91m..... 41%  104M 0s\n   950K .\u001b[0m\u001b[91m..\u001b[0m\u001b[91m....... .\u001b[0m\u001b[91m........\u001b[0m\u001b[91m. .......\u001b[0m\u001b[91m... .....\u001b[0m\u001b[91m..... \u001b[0m\u001b[91m...\u001b[0m\u001b[91m....... 43%\u001b[0m\u001b[91m  103M 0s\u001b[0m\u001b[91m\n  1000K \u001b[0m\u001b[91m.\u001b[0m\u001b[91m........\u001b[0m\u001b[91m. .......\u001b[0m\u001b[91m... .....\u001b[0m\u001b[91m..... ...\u001b[0m\u001b[91m....... .\u001b[0m\u001b[91m........\u001b[0m\u001b[91m. 45% 83.1M 0s\n  1050K .......\u001b[0m\u001b[91m... .....\u001b[0m\u001b[91m.....\u001b[0m\u001b[91m ........\u001b[0m\u001b[91m.. ......\u001b[0m\u001b[91m.... ....\u001b[0m\u001b[91m...... 48%  119M 0s\n  1100K .\u001b[0m\u001b[91m.\u001b[0m\u001b[91m........\u001b[0m\u001b[91m ..\u001b[0m\u001b[91m......\u001b[0m\u001b[91m.. ......\u001b[0m\u001b[91m.... ....\u001b[0m\u001b[91m...... ..\u001b[0m\u001b[91m........ 50%  110M 0s\u001b[0m\u001b[91m\n  1150K ........\u001b[0m\u001b[91m.. ......\u001b[0m\u001b[91m.... ....\u001b[0m\u001b[91m...... ..\u001b[0m\u001b[91m........\u001b[0m\u001b[91m ........\u001b[0m\u001b[91m.. 52% 89.5M 0s\n  1200K ......\u001b[0m\u001b[91m.... ....\u001b[0m\u001b[91m...... ..\u001b[0m\u001b[91m.......\u001b[0m\u001b[91m.\u001b[0m\u001b[91m ........\u001b[0m\u001b[91m.. ......\u001b[0m\u001b[91m.... 54% 84.9M 0s\n  1250K ....\u001b[0m\u001b[91m...... ..\u001b[0m\u001b[91m........\u001b[0m\u001b[91m ........\u001b[0m\u001b[91m.. ......\u001b[0m\u001b[91m.... ....\u001b[0m\u001b[91m...... 56% 82.1M 0s\n  1300K ..\u001b[0m\u001b[91m........\u001b[0m\u001b[91m ........\u001b[0m\u001b[91m.. ......\u001b[0m\u001b[91m.... ....\u001b[0m\u001b[91m...... ..\u001b[0m\u001b[91m........ 58%  114M 0s\u001b[0m\u001b[91m\n  1350K ........\u001b[0m\u001b[91m.. ......\u001b[0m\u001b[91m.... ....\u001b[0m\u001b[91m...... ..\u001b[0m\u001b[91m........\u001b[0m\u001b[91m ........\u001b[0m\u001b[91m.. 61%\u001b[0m\u001b[91m 96.8M 0s\u001b[0m\u001b[91m\n  1400K ......\u001b[0m\u001b[91m.... ....\u001b[0m\u001b[91m...... ..\u001b[0m\u001b[91m........\u001b[0m\u001b[91m .....\u001b[0m\u001b[91m...\u001b[0m\u001b[91m.. ......\u001b[0m\u001b[91m.... 63% 97.0M 0s\n  1450K ...\u001b[0m\u001b[91m.\u001b[0m\u001b[91m...... ..\u001b[0m\u001b[91m........\u001b[0m\u001b[91m ........\u001b[0m\u001b[91m.. ......\u001b[0m\u001b[91m.... ....\u001b[0m\u001b[91m...... 65%  100M 0s\n  1500K ..\u001b[0m\u001b[91m........\u001b[0m\u001b[91m ......\u001b[0m\u001b[91m..\u001b[0m\u001b[91m.. ......\u001b[0m\u001b[91m.... ....\u001b[0m\u001b[91m...... .....\u001b[0m\u001b[91m..... 67% 97.2M 0s\u001b[0m\u001b[91m\n  1550K ........\u001b[0m\u001b[91m.. ......\u001b[0m\u001b[91m.... ....\u001b[0m\u001b[91m......\u001b[0m\u001b[91m ..\u001b[0m\u001b[91m........\u001b[0m\u001b[91m ........\u001b[0m\u001b[91m.. 69% 86.1M 0s\n  1600K ......\u001b[0m\u001b[91m.... ....\u001b[0m\u001b[91m...... ..\u001b[0m\u001b[91m........\u001b[0m\u001b[91m ........\u001b[0m\u001b[91m.. .\u001b[0m\u001b[91m........\u001b[0m\u001b[91m. 72% 98.6M 0s\n  1650K .....\u001b[0m\u001b[91m..\u001b[0m\u001b[91m... .....\u001b[0m\u001b[91m..... ...\u001b[0m\u001b[91m....... .\u001b[0m\u001b[91m........\u001b[0m\u001b[91m. .......\u001b[0m\u001b[91m...\u001b[0m\u001b[91m 74%  101M 0s\n  1700K\u001b[0m\u001b[91m .....\u001b[0m\u001b[91m..... ...\u001b[0m\u001b[91m....... .\u001b[0m\u001b[91m........\u001b[0m\u001b[91m. ......\u001b[0m\u001b[91m.\u001b[0m\u001b[91m... .....\u001b[0m\u001b[91m..... 76% 93.3M 0s\n  1750K\u001b[0m\u001b[91m ...\u001b[0m\u001b[91m....... .\u001b[0m\u001b[91m........\u001b[0m\u001b[91m. .......... .....\u001b[0m\u001b[91m..... ..........\u001b[0m\u001b[91m 78%  144M 0s\n  1800K .\u001b[0m\u001b[91m......... .......\u001b[0m\u001b[91m... ........\u001b[0m\u001b[91m.. ...\u001b[0m\u001b[91m....... .\u001b[0m\u001b[91m........\u001b[0m\u001b[91m. 80%  103M 0s\n  1850K .......... ...\u001b[0m\u001b[91m..\u001b[0m\u001b[91m..... ...\u001b[0m\u001b[91m....... .\u001b[0m\u001b[91m......... .\u001b[0m\u001b[91m........\u001b[0m\u001b[91m. 83%  141M 0s\n  1900K ....\u001b[0m\u001b[91m...\u001b[0m\u001b[91m... .....\u001b[0m\u001b[91m..... ...\u001b[0m\u001b[91m....... .....\u001b[0m\u001b[91m....\u001b[0m\u001b[91m. .......... 85%\u001b[0m\u001b[91m  172M 0s\n  1950K .....\u001b[0m\u001b[91m..... ...\u001b[0m\u001b[91m......\u001b[0m\u001b[91m. .\u001b[0m\u001b[91m......... ..\u001b[0m\u001b[91m.....\u001b[0m\u001b[91m... .....\u001b[0m\u001b[91m..... 87%\u001b[0m\u001b[91m  145M 0s\n  2000K ...\u001b[0m\u001b[91m....... ......\u001b[0m\u001b[91m...\u001b[0m\u001b[91m. .......\u001b[0m\u001b[91m... .....\u001b[0m\u001b[91m..... ...\u001b[0m\u001b[91m....... 89%  128M 0s\n  2050K \u001b[0m\u001b[91m.\u001b[0m\u001b[91m........\u001b[0m\u001b[91m. .......\u001b[0m\u001b[91m... ..........\u001b[0m\u001b[91m ...\u001b[0m\u001b[91m....... .\u001b[0m\u001b[91m........\u001b[0m\u001b[91m. 91%  120M 0s\n  2100K ..\u001b[0m\u001b[91m......\u001b[0m\u001b[91m.. ...\u001b[0m\u001b[91m..\u001b[0m\u001b[91m..... .......... \u001b[0m\u001b[91m.\u001b[0m\u001b[91m........\u001b[0m\u001b[91m. .......\u001b[0m\u001b[91m... 93%  171M 0s\n  2150K .....\u001b[0m\u001b[91m....\u001b[0m\u001b[91m. ...\u001b[0m\u001b[91m....... \u001b[0m\u001b[91m.\u001b[0m\u001b[91m........\u001b[0m\u001b[91m. .......\u001b[0m\u001b[91m... .......... 96%  129M 0s\n  2200K .......... .\u001b[0m\u001b[91m........\u001b[0m\u001b[91m. .......\u001b[0m\u001b[91m... .......... ...\u001b[0m\u001b[91m....... 98%  137M 0s\n  2250K .\u001b[0m\u001b[91m........\u001b[0m\u001b[91m. .......\u001b[0m\u001b[91m... .....\u001b[0m\u001b[91m..... ...\u001b[0m\u001b[91m.....             100%  176M=0.02s\n\n\u001b[0m\u001b[91m2023-01-03 05:21:25 (92.5 MB/s) - 'glibc-2.27-r0.apk' saved [2343401/2343401]\n\n\u001b[0mfetch http://dl-cdn.alpinelinux.org/alpine/v3.9/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.9/community/x86_64/APKINDEX.tar.gz\n(1/1) Installing glibc (2.27-r0)\nOK: 13 MiB in 19 packages\n(1/1) Purging wget (1.20.3-r0)\n\u001b[91mWARNING: Ignoring APKINDEX.b89edf6e.tar.gz: No such file or directory\nWARNING: Ignoring APKINDEX.737f7e01.tar.gz: No such file or directory\n\u001b[0mExecuting busybox-1.29.3-r10.trigger\nOK: 12 MiB in 18 packages\nRemoving intermediate container 0c59496bf59c\n ---> 1dc610ef5902\nStep 3/5 : COPY . /srv/www/kube-ldap\n ---> f42d1198098b\nStep 4/5 : RUN cd /srv/www/kube-ldap &&   yarn install &&   yarn run test &&   yarn run build &&   yarn install --production=true\n ---> Running in 7f335c966abb\nyarn install v1.15.2\n[1/4] Resolving packages...\n[2/4] Fetching packages...\ninfo fsevents@1.2.9: The platform \"linux\" is incompatible with this module.\ninfo \"fsevents@1.2.9\" is an optional dependency and failed compatibility check. Excluding it from installation.\n[3/4] Linking dependencies...\n\u001b[91mwarning \" > babel-jest@22.4.4\" has unmet peer dependency \"babel-core@^6.0.0 || ^7.0.0-0\".\nwarning \" > babel-watch@2.0.8\" has unmet peer dependency \"babel-core@6.5.1 - 6.6.0 || ^6.6.x\".\n\u001b[0m[4/4] Building fresh packages...\n$ yarn run build\nyarn run v1.15.2\n$ yarn run eslint --fix src/ && yarn run flow && yarn run babel src/ --ignore=__mocks__/** -d build/\n$ /srv/www/kube-ldap/node_modules/.bin/eslint --fix src/\n\n/srv/www/kube-ldap/src/ldap/mapping.js\n  45:1  warning  Line 45 exceeds the maximum line length of 80  max-len\n\n✖ 1 problem (0 errors, 1 warning)\n\n$ /srv/www/kube-ldap/node_modules/.bin/flow\n\u001b[91mLaunching Flow server for /srv/www/kube-ldap\n\u001b[0m\u001b[91mSpawned flow server (pid=79)\nLogs will go to /tmp/flow/zSsrvzSwwwzSkube-ldap.log\nMonitor logs will go to /tmp/flow/zSsrvzSwwwzSkube-ldap.monitor_log\n\u001b[0m\u001b[91mStarted a new flow server: -\u001b[0m\u001b[91mPlease wait. Server is starting up: \\\u001b[0m\u001b[91mPlease wait. Server is initializing (starting up): |\u001b[0m\u001b[91mPlease wait. Server is initializing (parsed files 0): /\u001b[0m\u001b[91mPlease wait. Server is initializing (parsed files 9764): -\u001b[0m\u001b[91mPlease wait. Server is initializing (parsed files 9764): \\\u001b[0m\u001b[91mPlease wait. Server is initializing (resolving dependencies): |\u001b[0m\u001b[91mPlease wait. Server is initializing (calculating dependencies): /\u001b[0m\u001b[91mPlease wait. Server is initializing (merged files 0/16 (0.0%)): -\u001b[0m\u001b[91mPlease wait. Server is initializing (finishing up): \\\u001b[0m\u001b[91mPlease wait. Server is garbage collecting shared memory: |\u001b[0m\u001b[91mPlease wait. Server is handling a request (starting up): /\u001b[0m\u001b[91mPlease wait. Server is handling a request (collating errors): -\u001b[0mNo errors!\n$ /srv/www/kube-ldap/node_modules/.bin/babel src/ '--ignore=__mocks__/**' -d build/\nsrc/api/healthz.js -> build/api/healthz.js\nsrc/api/index.js -> build/api/index.js\nsrc/api/tokenAuthentication.js -> build/api/tokenAuthentication.js\nsrc/api/userAuthentication.js -> build/api/userAuthentication.js\nsrc/app.js -> build/app.js\nsrc/config.js -> build/config.js\nsrc/index.js -> build/index.js\nsrc/ldap/authenticator.js -> build/ldap/authenticator.js\nsrc/ldap/client.js -> build/ldap/client.js\nsrc/ldap/index.js -> build/ldap/index.js\nsrc/ldap/mapping.js -> build/ldap/mapping.js\nsrc/logger.js -> build/logger.js\nDone in 4.09s.\nDone in 12.85s.\nyarn run v1.15.2\n$ jest --coverage\n\u001b[91mPASS test/unit/api/healthz.test.js\n\u001b[0m\u001b[91m  Healthz.run()\n\u001b[0m\u001b[91m    ✓ Sends \"OK\" (7ms)\n\u001b[0m\u001b[91m\n\u001b[0m\u001b[91mPASS test/unit/ldap/client.test.js\n\u001b[0m\u001b[91m  Client.bind()\n\u001b[0m\u001b[91m    ✓ Resolves to true for successful bind (4ms)\n\u001b[0m\u001b[91m    ✓ Resolves to false for unsuccessful bind\n\u001b[0m\u001b[91m  Client.search()\n\u001b[0m\u001b[91m    ✓ Rejects on bind error (1ms)\n\u001b[0m\u001b[91m    ✓ Rejects on search error\n\u001b[0m\u001b[91m    ✓ Rejects on empty result\n\u001b[0m\u001b[91m\n\u001b[0m\u001b[91mPASS test/unit/ldap/canonicalizeDn.test.js\n\u001b[0m\u001b[91m  canonicalizeDn()\n\u001b[0m\u001b[91m    ✓ Returns canonicalized on valid DNs (3ms)\n\u001b[0m\u001b[91m    ✓ Throws error on invalid DNs\n\u001b[0m\u001b[91m\n\u001b[0m\u001b[91mPASS test/unit/ldap/authenticator.test.js\n\u001b[0m\u001b[91m  Authenticator.authenticate()\n\u001b[0m\u001b[91m    ✓ Returns true on valid user (9ms)\n\u001b[0m\u001b[91m    ✓ Returns false on invalid user (1ms)\n\u001b[0m\u001b[91m  Authenticator.getAttributes()\n\u001b[0m\u001b[91m    ✓ Returns user object (2ms)\n\u001b[0m\u001b[91m    ✓ Rejects on internal error (e.g. ldap error) (1ms)\n\n\u001b[0m\u001b[91mPASS test/unit/config.test.js\n\u001b[0m\u001b[91m  config.loglevel\n\u001b[0m\u001b[91m    ✓ test default value [info] (5ms)\n\u001b[0m\u001b[91m    ✓ test custom value [debug]\n\u001b[0m\u001b[91m  config.ldap.uri\n\u001b[0m\u001b[91m    ✓ test default value [ldap://ldap.example.com] (1ms)\n\u001b[0m\u001b[91m    ✓ test custom value [ldap://ldap.example.local]\n\u001b[0m\u001b[91m  config.ldap.bindDn\n\u001b[0m\u001b[91m    ✓ test default value [uid=bind,dc=example,dc=com] (1ms)\n\u001b[0m\u001b[91m    ✓ test custom value [uid=bind,dc=example,dc=local]\n  config.ldap.bindPw\n\u001b[0m\u001b[91m    ✓ test default value [secret] (1ms)\n\u001b[0m\u001b[91m    ✓ test custom value [topsecret]\n\u001b[0m\u001b[91m  config.ldap.baseDn\n\u001b[0m\u001b[91m    ✓ test default value [dc=example,dc=com]\n\u001b[0m\u001b[91m    ✓ test custom value [dc=example,dc=local] (1ms)\n\u001b[0m\u001b[91m  config.ldap.filter\n\u001b[0m\u001b[91m    ✓ test default value [(uid=%s)]\n\u001b[0m\u001b[91m    ✓ test custom value [(mail=%s)]\n  config.ldap.timeout\n\u001b[0m\u001b[91m    ✓ test default value [0] (1ms)\n\u001b[0m\u001b[91m    ✓ test custom value [30]\n\u001b[0m\u001b[91m  config.mapping.username\n\u001b[0m\u001b[91m    ✓ test default value [uid]\n\u001b[0m\u001b[91m    ✓ test custom value [mail]\n  config.mapping.uid\n\u001b[0m\u001b[91m    ✓ test default value [uid] (1ms)\n\u001b[0m\u001b[91m    ✓ test custom value [cn]\n\u001b[0m\u001b[91m  config.mapping.groups\n\u001b[0m\u001b[91m    ✓ test default value [memberOf]\n\u001b[0m\u001b[91m    ✓ test custom value [groups]\n\u001b[0m\u001b[91m  config.mapping.extraFields\n\u001b[0m\u001b[91m    ✓ test default value []\n\u001b[0m\u001b[91m    ✓ test custom value [uidNumber]\n\u001b[0m\u001b[91m    ✓ test custom value [uidNumber,gidNumber]\n\u001b[0m\u001b[91m  config.jwt.key\n\u001b[0m\u001b[91m    ✓ test default value [secret]\n\u001b[0m\u001b[91m    ✓ test custom value [topsecret]\n\u001b[0m\u001b[91m  config.jwt.tokenLifetime\n\u001b[0m\u001b[91m    ✓ test default value [28800]\n\u001b[0m\u001b[91m    ✓ test custom value [3600] (1ms)\n\u001b[0m\u001b[91m  config.tls.enabled\n\u001b[0m\u001b[91m    ✓ test default value [true]\n\u001b[0m\u001b[91m    ✓ test custom value [false]\n\u001b[0m\u001b[91m    ✓ test custom value [true]\n\u001b[0m\u001b[91m    ✓ test custom value [abc]\n\u001b[0m\u001b[91m  config.tls.cert\n\u001b[0m\u001b[91m    ✓ test default value [/etc/ssl/kube-ldap/cert.pem] (1ms)\n\u001b[0m\u001b[91m    ✓ test custom value [/etc/ssl/example.com/cert.pem]\n\u001b[0m\u001b[91m  config.tls.key\n\u001b[0m\u001b[91m    ✓ test default value [/etc/ssl/kube-ldap/key.pem]\n\u001b[0m\u001b[91m    ✓ test custom value [/etc/ssl/example.com/key.pem]\n\u001b[0m\u001b[91m  config.tls.ca\n\u001b[0m\u001b[91m    ✓ test default value [null] (1ms)\n\u001b[0m\u001b[91m    ✓ test custom value [/etc/ssl/example.com/ca.pem]\n\u001b[0m\u001b[91m  config.prometheus.username\n\u001b[0m\u001b[91m    ✓ test default value [prometheus]\n\u001b[0m\u001b[91m    ✓ test custom value [john.doe]\n\u001b[0m\u001b[91m    ✓ test custom value [] (1ms)\n\u001b[0m\u001b[91m  config.prometheus.password\n\u001b[0m\u001b[91m    ✓ test default value [secret]\n\u001b[0m\u001b[91m    ✓ test custom value [password]\n\u001b[0m\u001b[91m    ✓ test custom value []\n\u001b[0m\u001b[91m  config.prometheus.nodejsProbeInterval\n\u001b[0m\u001b[91m    ✓ test default value [10000] (1ms)\n\u001b[0m\u001b[91m    ✓ test custom value [5000]\n\u001b[0m\u001b[91m  config.port\n\u001b[0m\u001b[91m    ✓ test default value [8081]\n\u001b[0m\u001b[91m    ✓ test custom value [8443]\n\u001b[0m\u001b[91m\n\u001b[0m\u001b[91mPASS test/unit/ldap/mapping.test.js\n\u001b[0m\u001b[91m  Mapping.getLdapAttributes()\n\u001b[0m\u001b[91m    ✓ returns array of all attributes (3ms)\n\u001b[0m\u001b[91m    ✓ returns array of all attributes if extraFields was empty (1ms)\n\u001b[0m\u001b[91m  Mapping.ldapToKubernetes()\n\u001b[0m\u001b[91m    ✓ returns mapped object with attributes\n\u001b[0m\u001b[91m    ✓ handles when groups attribute is undefined (1ms)\n\u001b[0m\u001b[91m    ✓ handles when groups attribute is a single object\n\u001b[0m\u001b[91m\n\u001b[0m\u001b[91merror: not a valid http basic authorization header\n\u001b[0m\u001b[91merror: not a valid http basic authorization header\n\u001b[0m\u001b[91merror: secretOrPrivateKey must have a value\n\u001b[0minfo: Error while verifying token: [JsonWebTokenError] with message [invalid signature]\ninfo: Error while verifying token: [TokenExpiredError] with message [jwt expired]\n\u001b[91mPASS test/unit/api/userAuthentication.test.js\n\u001b[0m\u001b[91m  UserAuthentication.run()\n\u001b[0m\u001b[91m    ✓ Sends token on authenticated user (8ms)\n\u001b[0m\u001b[91m    ✓ Sends 401 on uauthenticated user (2ms)\n\u001b[0minfo: Error while verifying token: [undefined] with message [undefined]\n\u001b[91m    ✓ Sends 401 on missing auth header\n\u001b[0m\u001b[91m    ✓ Sends 400 on invalid auth header (2ms)\n\u001b[0m\u001b[91m    ✓ Sends 400 on not http-basic auth header (1ms)\n\u001b[0m\u001b[91m    ✓ Sends 500 on invalid key\n\u001b[0m\u001b[91m  UserAuthentication.getToken()\n\u001b[0m\u001b[91m    ✓ Returns token on valid request (1ms)\n\u001b[0m\u001b[91m  UserAuthentication.parseBasicAuthHeader()\n\u001b[0m\u001b[91m    ✓ Throws Error if header is not basic auth (1ms)\n\u001b[0m\u001b[91m    ✓ Throws Error if basic auth header is invalid\n\u001b[0m\u001b[91m    ✓ Returns user and password from header\n\n\u001b[0m\u001b[91mPASS test/unit/api/tokenAuthentication.test.js\n  TokenAuthentication.extractAndVerifyToken()\n\u001b[0m\u001b[91m    ✓ Returns token content (4ms)\n    ✓ Throws error on token with invalid signature\n\u001b[0m\u001b[91m    ✓ Throws error on expired token\n  TokenAuthentication.run()\n\u001b[0m\u001b[91m    ✓ Sends token payload on valid token (2ms)\n\u001b[0m\u001b[91m    ✓ Sends \"not-authenticated\" response on invalid token (2ms)\n\u001b[0m\u001b[91m    ✓ Sends \"not-authenticated\" response on invalid token (1ms)\n\u001b[0m\u001b[91m    ✓ Sends 400 response on invalid request\n    ✓ Sends 400 response on non-TokenReview request (1ms)\n    ✓ Sends \"not-authenticated\" on internal server error (e.g. ldap error)\n\u001b[0m\u001b[91m\n\u001b[0m2023-01-03T05:22:27.555Z - info: ::ffff:127.0.0.1 - - [03/Jan/2023:05:22:27 +0000] \"GET /healthz HTTP/1.1\" 200 2 \"-\" \"node-superagent/3.8.3\"\n\n2023-01-03T05:22:27.566Z - info: ::ffff:127.0.0.1 - john.doe [03/Jan/2023:05:22:27 +0000] \"GET /auth HTTP/1.1\" 200 157 \"-\" \"node-superagent/3.8.3\"\n\n\u001b[91m2023-01-03T05:22:27.570Z - error: not a valid http basic authorization header\n\u001b[0m2023-01-03T05:22:27.571Z - info: ::ffff:127.0.0.1 - - [03/Jan/2023:05:22:27 +0000] \"GET /auth HTTP/1.1\" 400 11 \"-\" \"node-superagent/3.8.3\"\n\n2023-01-03T05:22:27.572Z - info: ::ffff:127.0.0.1 - - [03/Jan/2023:05:22:27 +0000] \"GET /auth HTTP/1.1\" 401 12 \"-\" \"node-superagent/3.8.3\"\n\n2023-01-03T05:22:27.574Z - info: error by mock\n2023-01-03T05:22:27.574Z - info: ::ffff:127.0.0.1 - john.doe [03/Jan/2023:05:22:27 +0000] \"GET /auth HTTP/1.1\" 401 12 \"-\" \"node-superagent/3.8.3\"\n\n2023-01-03T05:22:27.588Z - info: ::ffff:127.0.0.1 - - [03/Jan/2023:05:22:27 +0000] \"POST /token HTTP/1.1\" 200 176 \"-\" \"node-superagent/3.8.3\"\n\n2023-01-03T05:22:27.591Z - info: ::ffff:127.0.0.1 - - [03/Jan/2023:05:22:27 +0000] \"POST /token HTTP/1.1\" 400 11 \"-\" \"node-superagent/3.8.3\"\n\n2023-01-03T05:22:27.595Z - info: ::ffff:127.0.0.1 - prometheus [03/Jan/2023:05:22:27 +0000] \"POST /metrics HTTP/1.1\" 200 - \"-\" \"node-superagent/3.8.3\"\n\n2023-01-03T05:22:27.598Z - info: ::ffff:127.0.0.1 - - [03/Jan/2023:05:22:27 +0000] \"POST /metrics HTTP/1.1\" 200 - \"-\" \"node-superagent/3.8.3\"\n\n2023-01-03T05:22:27.599Z - info: ::ffff:127.0.0.1 - - [03/Jan/2023:05:22:27 +0000] \"POST /metrics HTTP/1.1\" 401 0 \"-\" \"node-superagent/3.8.3\"\n\n2023-01-03T05:22:27.601Z - info: ::ffff:127.0.0.1 - john.doe [03/Jan/2023:05:22:27 +0000] \"POST /metrics HTTP/1.1\" 401 0 \"-\" \"node-superagent/3.8.3\"\n\n2023-01-03T05:22:27.602Z - info: ::ffff:127.0.0.1 - john.doe [03/Jan/2023:05:22:27 +0000] \"POST /metrics HTTP/1.1\" 401 0 \"-\" \"node-superagent/3.8.3\"\n\n\u001b[91mPASS test/integration/app.test.js\n\u001b[0m\u001b[91m  test app routes\n\u001b[0m\u001b[91m    ✓ GET /healthz: 200 OK (23ms)\n\u001b[0m\u001b[91m    ✓ GET /auth: 200 OK (9ms)\n\u001b[0m\u001b[91m    ✓ GET /auth: 400 Bad Request (2ms)\n    ✓ GET /auth: 401 Unauthorized (No authorization header) (2ms)\n\u001b[0m\u001b[91m    ✓ GET /auth: 401 Unauthorized (Wrong username/password) (2ms)\n    ✓ POST /token: 200 OK (15ms)\n\u001b[0m\u001b[91m    ✓ POST /token: 400 Bad Request (2ms)\n    ✓ GET /metrics: 200 OK (enabled basic auth) (4ms)\n    ✓ GET /metrics: 200 OK (with disabled basic auth) (2ms)\n\u001b[0m\u001b[91m    ✓ GET /metrics: 401 Unauthorized (No authorization header) (2ms)\n    ✓ GET /metrics: 401 Unauthorized (Wrong username/password) (1ms)\n\u001b[0m\u001b[91m    ✓ GET /metrics: 401 Unauthorized (Wrong username/password) (1ms)\n\n\u001b[0m-------------------------|----------|----------|----------|----------|-------------------|\nFile                     |  % Stmts | % Branch |  % Funcs |  % Lines | Uncovered Line #s |\n-------------------------|----------|----------|----------|----------|-------------------|\nAll files                |    96.32 |    97.65 |    94.29 |    96.32 |                   |\n src                     |    94.59 |      100 |     87.5 |    94.59 |                   |\n  app.js                 |       92 |      100 |       75 |       92 |             93,94 |\n  config.js              |      100 |      100 |      100 |      100 |                   |\n  logger.js              |      100 |      100 |      100 |      100 |                   |\n src/api                 |    93.75 |      100 |    91.67 |    93.75 |                   |\n  healthz.js             |      100 |      100 |      100 |      100 |                   |\n  index.js               |      100 |      100 |      100 |      100 |                   |\n  tokenAuthentication.js |     93.1 |      100 |      100 |     93.1 |             60,61 |\n  userAuthentication.js  |    94.12 |      100 |    85.71 |    94.12 |             63,64 |\n src/ldap                |      100 |    86.67 |      100 |      100 |                   |\n  authenticator.js       |      100 |      100 |      100 |      100 |                   |\n  client.js              |      100 |    83.33 |      100 |      100 |                61 |\n  index.js               |      100 |      100 |      100 |      100 |                   |\n  mapping.js             |      100 |    85.71 |      100 |      100 |                47 |\n-------------------------|----------|----------|----------|----------|-------------------|\n\u001b[91mTest Suites: 9 passed, 9 total\nTests:       95 passed, 95 total\nSnapshots:   0 total\nTime:        2.298s\nRan all test suites.\n\u001b[0mDone in 3.02s.\nyarn run v1.15.2\n$ yarn run eslint --fix src/ && yarn run flow && yarn run babel src/ --ignore=__mocks__/** -d build/\n$ /srv/www/kube-ldap/node_modules/.bin/eslint --fix src/\n\n/srv/www/kube-ldap/src/ldap/mapping.js\n  45:1  warning  Line 45 exceeds the maximum line length of 80  max-len\n\n✖ 1 problem (0 errors, 1 warning)\n\n$ /srv/www/kube-ldap/node_modules/.bin/flow\n\u001b[91mPlease wait. Server is garbage collecting shared memory: -\u001b[0m\u001b[91mPlease wait. Server is handling a request (starting up): \\\u001b[0m\u001b[91mPlease wait. Server is handling a request (collating errors): |\u001b[0mNo errors!\n$ /srv/www/kube-ldap/node_modules/.bin/babel src/ '--ignore=__mocks__/**' -d build/\nsrc/api/healthz.js -> build/api/healthz.js\nsrc/api/index.js -> build/api/index.js\nsrc/api/tokenAuthentication.js -> build/api/tokenAuthentication.js\nsrc/api/userAuthentication.js -> build/api/userAuthentication.js\nsrc/app.js -> build/app.js\nsrc/config.js -> build/config.js\nsrc/index.js -> build/index.js\nsrc/ldap/authenticator.js -> build/ldap/authenticator.js\nsrc/ldap/client.js -> build/ldap/client.js\nsrc/ldap/index.js -> build/ldap/index.js\nsrc/ldap/mapping.js -> build/ldap/mapping.js\nsrc/logger.js -> build/logger.js\nDone in 3.28s.\nyarn install v1.15.2\n[1/4] Resolving packages...\n[2/4] Fetching packages...\ninfo fsevents@1.2.9: The platform \"linux\" is incompatible with this module.\ninfo \"fsevents@1.2.9\" is an optional dependency and failed compatibility check. Excluding it from installation.\n[3/4] Linking dependencies...\n\u001b[91mwarning \" > babel-jest@22.4.4\" has unmet peer dependency \"babel-core@^6.0.0 || ^7.0.0-0\".\n\u001b[0m\u001b[91mwarning \" > babel-watch@2.0.8\" has unmet peer dependency \"babel-core@6.5.1 - 6.6.0 || ^6.6.x\".\n\u001b[0m[4/4] Building fresh packages...\nDone in 1.88s.\nRemoving intermediate container 7f335c966abb\n ---> 1b340dbcdd50\nStep 5/5 : CMD [\"node\", \"/srv/www/kube-ldap/build/index.js\"]\n ---> Running in 40ecc29243fb\nRemoving intermediate container 40ecc29243fb\n ---> 8e4a383ca7d4\nSuccessfully built 8e4a383ca7d4\nSuccessfully tagged kube-ldap:latest\n","stderr":"","imageSize":210177812},"endTime":1672723378278}