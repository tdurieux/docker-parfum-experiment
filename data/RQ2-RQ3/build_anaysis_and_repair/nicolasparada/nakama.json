{"repository":"https://github.com/nicolasparada/nakama","dockerfilePath":"Dockerfile","startTime":1672098392013,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/nicolasparada/nakama'...\n","error":null,"commit":"fbb79da4a1878956d3182de51a7577d3d3bf7189"},"originalBuild":{"startTimestamp":1672098393042,"endTimestamp":1672098520347,"error":null,"stdout":"Sending build context to Docker daemon  1.422MB\r\r\nStep 1/25 : FROM golang:alpine AS build\nalpine: Pulling from library/golang\nc158987b0551: Already exists\n019cfb932eb0: Pulling fs layer\na3a161a37303: Pulling fs layer\n3c6f08178a17: Pulling fs layer\n019cfb932eb0: Verifying Checksum\n019cfb932eb0: Download complete\n3c6f08178a17: Verifying Checksum\n3c6f08178a17: Download complete\n019cfb932eb0: Pull complete\na3a161a37303: Verifying Checksum\na3a161a37303: Download complete\na3a161a37303: Pull complete\n3c6f08178a17: Pull complete\nDigest: sha256:a9b24b67dc83b3383d22a14941c2b2b2ca6a103d805cac6820fd1355943beaf1\nStatus: Downloaded newer image for golang:alpine\n ---> cae57157ceaa\nStep 2/25 : ARG VAPID_PUBLIC_KEY\n ---> Running in 2e281f89e52a\nRemoving intermediate container 2e281f89e52a\n ---> e07bb09b2cb3\nStep 3/25 : ENV VAPID_PUBLIC_KEY=${VAPID_PUBLIC_KEY}\n ---> Running in 792eb52376a4\nRemoving intermediate container 792eb52376a4\n ---> ea2cc34484b3\nStep 4/25 : ENV VITE_VAPID_PUBLIC_KEY=${VAPID_PUBLIC_KEY}\n ---> Running in c03570e02984\nRemoving intermediate container c03570e02984\n ---> 29283e597c87\nStep 5/25 : RUN apk add --update --no-cache git python3 make g++ nodejs npm ca-certificates\n ---> Running in d3a3c6ff7ca9\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/36) Installing libgcc (12.2.1_git20220924-r4)\n(2/36) Installing libstdc++ (12.2.1_git20220924-r4)\n(3/36) Installing libstdc++-dev (12.2.1_git20220924-r4)\n(4/36) Installing binutils (2.39-r2)\n(5/36) Installing libgomp (12.2.1_git20220924-r4)\n(6/36) Installing libatomic (12.2.1_git20220924-r4)\n(7/36) Installing gmp (6.2.1-r2)\n(8/36) Installing isl25 (0.25-r0)\n(9/36) Installing mpfr4 (4.1.0-r0)\n(10/36) Installing mpc1 (1.2.1-r1)\n(11/36) Installing gcc (12.2.1_git20220924-r4)\n(12/36) Installing musl-dev (1.2.3-r4)\n(13/36) Installing libc-dev (0.7.2-r3)\n(14/36) Installing g++ (12.2.1_git20220924-r4)\n(15/36) Installing brotli-libs (1.0.9-r9)\n(16/36) Installing nghttp2-libs (1.51.0-r0)\n(17/36) Installing libcurl (7.87.0-r0)\n(18/36) Installing libexpat (2.5.0-r0)\n(19/36) Installing pcre2 (10.42-r0)\n(20/36) Installing git (2.38.2-r0)\n(21/36) Installing make (4.3-r1)\n(22/36) Installing c-ares (1.18.1-r1)\n(23/36) Installing icu-data-en (72.1-r1)\nExecuting icu-data-en-72.1-r1.post-install\n\u001b[91m*\n* If you need ICU with non-English locales and legacy charset support, install\n* package icu-data-full.\n*\n\u001b[0m(24/36) Installing icu-libs (72.1-r1)\n(25/36) Installing nodejs (18.12.1-r0)\n(26/36) Installing npm (9.1.2-r0)\n(27/36) Installing libbz2 (1.0.8-r4)\n(28/36) Installing libffi (3.4.4-r0)\n(29/36) Installing gdbm (1.23-r0)\n(30/36) Installing xz-libs (5.2.9-r0)\n(31/36) Installing mpdecimal (2.5.1-r1)\n(32/36) Installing ncurses-terminfo-base (6.3_p20221119-r0)\n(33/36) Installing ncurses-libs (6.3_p20221119-r0)\n(34/36) Installing readline (8.2.0-r0)\n(35/36) Installing sqlite-libs (3.40.0-r0)\n(36/36) Installing python3 (3.10.9-r1)\nExecuting busybox-1.35.0-r29.trigger\nOK: 349 MiB in 52 packages\nRemoving intermediate container d3a3c6ff7ca9\n ---> 52dda453070f\nStep 6/25 : RUN update-ca-certificates\n ---> Running in c0cf0f39eb3e\n\u001b[91mWARNING: ca-certificates.crt does not contain exactly one certificate or CRL: skipping\n\u001b[0mRemoving intermediate container c0cf0f39eb3e\n ---> 02aabbb2aeda\nStep 7/25 : WORKDIR /go/src/github.com/nakamauwu/nakama\n ---> Running in 0756fde1313e\nRemoving intermediate container 0756fde1313e\n ---> 4666cb1c9d2b\nStep 8/25 : COPY . .\n ---> 6059f4cf7177\nStep 9/25 : WORKDIR /go/src/github.com/nakamauwu/nakama/web/app\n ---> Running in 81920d3c454c\nRemoving intermediate container 81920d3c454c\n ---> 21ee80a57a1f\nStep 10/25 : RUN npm i\n ---> Running in f8f4993b3365\n\nadded 36 packages, and audited 37 packages in 5s\n\n4 packages are looking for funding\n  run `npm fund` for details\n\nfound 0 vulnerabilities\nRemoving intermediate container f8f4993b3365\n ---> 0b4a5e2829fe\nStep 11/25 : RUN npm run build\n ---> Running in 4aeeec6f2327\n\n> build\n> vite build\n\nvite v3.0.9 building for production...\ntransforming...\nâœ“ 144 modules transformed.\n\u001b[91m\n(!) outDir /go/src/github.com/nakamauwu/nakama/web/dist is not inside project root and will not be emptied.\nUse --emptyOutDir to override.\n\n\u001b[0mrendering chunks...\n../dist/index.html                                2.33 KiB\n../dist/assets/access-callback-page.d488dd3e.js   2.13 KiB / gzip: 0.98 KiB\n../dist/assets/toast-item.2a072c54.js             0.55 KiB / gzip: 0.35 KiB\n../dist/assets/access-page.26b55c22.js            4.67 KiB / gzip: 1.85 KiB\n../dist/assets/repeat.89fe9d2d.js                 2.34 KiB / gzip: 1.08 KiB\n../dist/assets/intersectable-comp.f31a19a9.js     0.45 KiB / gzip: 0.32 KiB\n../dist/assets/home-page.40606139.js              10.83 KiB / gzip: 3.62 KiB\n../dist/assets/relative-datetime.1ae7ba37.js      0.79 KiB / gzip: 0.48 KiB\n../dist/assets/index.e6dc1ebf.js                  20.73 KiB / gzip: 6.52 KiB\n../dist/assets/not-found-page.9ec7b781.js         0.17 KiB / gzip: 0.15 KiB\n../dist/assets/post-page.c40c7ead.js              5.98 KiB / gzip: 2.28 KiB\n../dist/assets/notifications-page.46fd5586.js     8.57 KiB / gzip: 2.76 KiB\n../dist/assets/user-item.96010112.js              0.85 KiB / gzip: 0.45 KiB\n../dist/assets/search-page.e8efcd22.js            2.99 KiB / gzip: 1.25 KiB\n../dist/assets/privacy-policy-page.64a5006e.js    9.99 KiB / gzip: 3.51 KiB\n../dist/assets/user-follow-counts.c2b6702b.js     2.31 KiB / gzip: 0.97 KiB\n../dist/assets/user-followees-page.d48e2aaf.js    2.15 KiB / gzip: 0.92 KiB\n../dist/assets/user-followers-page.8ddfd2fe.js    2.15 KiB / gzip: 0.93 KiB\n../dist/assets/tagged-posts-page.3c974a5d.js      2.66 KiB / gzip: 1.12 KiB\n../dist/assets/user-page.4e78278a.js              17.00 KiB / gzip: 4.84 KiB\n../dist/assets/dialog-polyfill.esm.8bcb7267.js    11.33 KiB / gzip: 3.81 KiB\n../dist/assets/index.0c4f4975.js                  47.32 KiB / gzip: 15.42 KiB\n../dist/assets/index.6761e500.js                  41.44 KiB / gzip: 14.98 KiB\n../dist/assets/index.c81a6330.css                 24.30 KiB / gzip: 4.72 KiB\n../dist/assets/post-item.5df5790b.js              63.07 KiB / gzip: 23.58 KiB\nRemoving intermediate container 4aeeec6f2327\n ---> 77c853ffff81\nStep 12/25 : WORKDIR /go/src/github.com/nakamauwu/nakama\n ---> Running in 6272f970be2b\nRemoving intermediate container 6272f970be2b\n ---> dced23edce63\nStep 13/25 : RUN go mod download\n ---> Running in 6d5ecebacd38\nRemoving intermediate container 6d5ecebacd38\n ---> 1cd24a0eba7a\nStep 14/25 : RUN CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags=\"-s -w\" -o /go/bin/nakama ./cmd/nakama\n ---> Running in 8c9eaa94c0f0\nRemoving intermediate container 8c9eaa94c0f0\n ---> 1b24bfafbdac\nStep 15/25 : FROM scratch\n ---> \nStep 16/25 : ARG DISABLE_DEV_LOGIN=true\n ---> Running in 8ecb16554ca0\nRemoving intermediate container 8ecb16554ca0\n ---> a46a2865490d\nStep 17/25 : ENV DISABLE_DEV_LOGIN=$DISABLE_DEV_LOGIN\n ---> Running in 0483d9e3cc8b\nRemoving intermediate container 0483d9e3cc8b\n ---> d7b86a442faf\nStep 18/25 : ARG EMBED_STATIC=true\n ---> Running in 3b96705d7641\nRemoving intermediate container 3b96705d7641\n ---> bd467160f19c\nStep 19/25 : ENV EMBED_STATIC=$EMBED_STATIC\n ---> Running in 4cc1324b8132\nRemoving intermediate container 4cc1324b8132\n ---> 1b19365d5775\nStep 20/25 : ARG EXEC_SCHEMA=true\n ---> Running in 69dcc2dd6456\nRemoving intermediate container 69dcc2dd6456\n ---> b330f1f5f2b0\nStep 21/25 : ENV EXEC_SCHEMA=$EXEC_SCHEMA\n ---> Running in 56dd87b495d3\nRemoving intermediate container 56dd87b495d3\n ---> 2528ffcdc41e\nStep 22/25 : COPY --from=build /etc/ssl/certs/ca-certificates.crt /etc/ssl/certs/\n ---> fafdbb298419\nStep 23/25 : COPY --from=build /go/bin/nakama /usr/bin/nakama\n ---> 6bf9f7b78a12\nStep 24/25 : EXPOSE 3000\n ---> Running in 6bb7e8219c53\nRemoving intermediate container 6bb7e8219c53\n ---> 310ecae6455f\nStep 25/25 : ENTRYPOINT [ \"nakama\" ]\n ---> Running in f1083ba71dae\nRemoving intermediate container f1083ba71dae\n ---> 77d765a9e9cf\nSuccessfully built 77d765a9e9cf\nSuccessfully tagged nakama:latest\n","stderr":"","imageSize":17290446},"repair":{"violations":[{"name":"npmCacheCleanAfterInstall","position":{"start":14,"end":14,"columnStart":4,"columnEnd":9}}],"repairedDockerfile":"FROM golang:alpine AS build\n\nARG VAPID_PUBLIC_KEY\nENV VAPID_PUBLIC_KEY=${VAPID_PUBLIC_KEY}\nENV VITE_VAPID_PUBLIC_KEY=${VAPID_PUBLIC_KEY}\n\nRUN apk add --update --no-cache git python3 make g++ nodejs npm ca-certificates\nRUN update-ca-certificates\n\nWORKDIR /go/src/github.com/nakamauwu/nakama\n\nCOPY . .\n\nWORKDIR /go/src/github.com/nakamauwu/nakama/web/app\nRUN npm i\nRUN npm run build\n\nWORKDIR /go/src/github.com/nakamauwu/nakama\n\nRUN go mod download\nRUN CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags=\"-s -w\" -o /go/bin/nakama ./cmd/nakama\n\nFROM scratch\n\nARG DISABLE_DEV_LOGIN=true\nENV DISABLE_DEV_LOGIN=$DISABLE_DEV_LOGIN\n\nARG EMBED_STATIC=true\nENV EMBED_STATIC=$EMBED_STATIC\n\nARG EXEC_SCHEMA=true\nENV EXEC_SCHEMA=$EXEC_SCHEMA\n\nCOPY --from=build /etc/ssl/certs/ca-certificates.crt /etc/ssl/certs/\nCOPY --from=build /go/bin/nakama /usr/bin/nakama\n\nEXPOSE 3000\nENTRYPOINT [ \"nakama\" ]\n"},"repairedBuild":{"startTimestamp":1672098520695,"endTimestamp":1672098635315,"error":null,"stdout":"Sending build context to Docker daemon  1.422MB\r\r\nStep 1/25 : FROM golang:alpine AS build\n ---> cae57157ceaa\nStep 2/25 : ARG VAPID_PUBLIC_KEY\n ---> Running in 36dd787c9fe4\nRemoving intermediate container 36dd787c9fe4\n ---> 1d97175b9bbd\nStep 3/25 : ENV VAPID_PUBLIC_KEY=${VAPID_PUBLIC_KEY}\n ---> Running in b45fd6f67ab7\nRemoving intermediate container b45fd6f67ab7\n ---> 146a1f102a32\nStep 4/25 : ENV VITE_VAPID_PUBLIC_KEY=${VAPID_PUBLIC_KEY}\n ---> Running in 7238cfc1aafd\nRemoving intermediate container 7238cfc1aafd\n ---> 4b02fa42fbb4\nStep 5/25 : RUN apk add --update --no-cache git python3 make g++ nodejs npm ca-certificates\n ---> Running in 97c616e17115\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/36) Installing libgcc (12.2.1_git20220924-r4)\n(2/36) Installing libstdc++ (12.2.1_git20220924-r4)\n(3/36) Installing libstdc++-dev (12.2.1_git20220924-r4)\n(4/36) Installing binutils (2.39-r2)\n(5/36) Installing libgomp (12.2.1_git20220924-r4)\n(6/36) Installing libatomic (12.2.1_git20220924-r4)\n(7/36) Installing gmp (6.2.1-r2)\n(8/36) Installing isl25 (0.25-r0)\n(9/36) Installing mpfr4 (4.1.0-r0)\n(10/36) Installing mpc1 (1.2.1-r1)\n(11/36) Installing gcc (12.2.1_git20220924-r4)\n(12/36) Installing musl-dev (1.2.3-r4)\n(13/36) Installing libc-dev (0.7.2-r3)\n(14/36) Installing g++ (12.2.1_git20220924-r4)\n(15/36) Installing brotli-libs (1.0.9-r9)\n(16/36) Installing nghttp2-libs (1.51.0-r0)\n(17/36) Installing libcurl (7.87.0-r0)\n(18/36) Installing libexpat (2.5.0-r0)\n(19/36) Installing pcre2 (10.42-r0)\n(20/36) Installing git (2.38.2-r0)\n(21/36) Installing make (4.3-r1)\n(22/36) Installing c-ares (1.18.1-r1)\n(23/36) Installing icu-data-en (72.1-r1)\nExecuting icu-data-en-72.1-r1.post-install\n\u001b[91m*\n* If you need ICU with non-English locales and legacy charset support, install\n* package icu-data-full.\n*\n\u001b[0m(24/36) Installing icu-libs (72.1-r1)\n(25/36) Installing nodejs (18.12.1-r0)\n(26/36) Installing npm (9.1.2-r0)\n(27/36) Installing libbz2 (1.0.8-r4)\n(28/36) Installing libffi (3.4.4-r0)\n(29/36) Installing gdbm (1.23-r0)\n(30/36) Installing xz-libs (5.2.9-r0)\n(31/36) Installing mpdecimal (2.5.1-r1)\n(32/36) Installing ncurses-terminfo-base (6.3_p20221119-r0)\n(33/36) Installing ncurses-libs (6.3_p20221119-r0)\n(34/36) Installing readline (8.2.0-r0)\n(35/36) Installing sqlite-libs (3.40.0-r0)\n(36/36) Installing python3 (3.10.9-r1)\nExecuting busybox-1.35.0-r29.trigger\nOK: 349 MiB in 52 packages\nRemoving intermediate container 97c616e17115\n ---> 5878239c3da4\nStep 6/25 : RUN update-ca-certificates\n ---> Running in bb1c6c758f16\n\u001b[91mWARNING: ca-certificates.crt does not contain exactly one certificate or CRL: skipping\n\u001b[0mRemoving intermediate container bb1c6c758f16\n ---> 1676cac1fb74\nStep 7/25 : WORKDIR /go/src/github.com/nakamauwu/nakama\n ---> Running in 3e772caf10f8\nRemoving intermediate container 3e772caf10f8\n ---> 770c78923e94\nStep 8/25 : COPY . .\n ---> 86c37edba826\nStep 9/25 : WORKDIR /go/src/github.com/nakamauwu/nakama/web/app\n ---> Running in 179a3d26d8f2\nRemoving intermediate container 179a3d26d8f2\n ---> 1b0ef6e937f6\nStep 10/25 : RUN npm i\n ---> Running in e71a2dd8f19e\n\nadded 36 packages, and audited 37 packages in 3s\n\n4 packages are looking for funding\n  run `npm fund` for details\n\nfound 0 vulnerabilities\nRemoving intermediate container e71a2dd8f19e\n ---> 30c28c69a07e\nStep 11/25 : RUN npm run build\n ---> Running in 4848f85e72bc\n\n> build\n> vite build\n\nvite v3.0.9 building for production...\ntransforming...\nâœ“ 144 modules transformed.\n\u001b[91m\n(!) outDir /go/src/github.com/nakamauwu/nakama/web/dist is not inside project root and will not be emptied.\nUse --emptyOutDir to override.\n\n\u001b[0mrendering chunks...\n../dist/index.html                                2.33 KiB\n../dist/assets/access-callback-page.d488dd3e.js   2.13 KiB / gzip: 0.98 KiB\n../dist/assets/toast-item.2a072c54.js             0.55 KiB / gzip: 0.35 KiB\n../dist/assets/access-page.26b55c22.js            4.67 KiB / gzip: 1.85 KiB\n../dist/assets/repeat.89fe9d2d.js                 2.34 KiB / gzip: 1.08 KiB\n../dist/assets/intersectable-comp.f31a19a9.js     0.45 KiB / gzip: 0.32 KiB\n../dist/assets/home-page.40606139.js              10.83 KiB / gzip: 3.62 KiB\n../dist/assets/relative-datetime.1ae7ba37.js      0.79 KiB / gzip: 0.48 KiB\n../dist/assets/not-found-page.9ec7b781.js         0.17 KiB / gzip: 0.15 KiB\n../dist/assets/index.e6dc1ebf.js                  20.73 KiB / gzip: 6.52 KiB\n../dist/assets/notifications-page.46fd5586.js     8.57 KiB / gzip: 2.76 KiB\n../dist/assets/post-page.c40c7ead.js              5.98 KiB / gzip: 2.28 KiB\n../dist/assets/user-item.96010112.js              0.85 KiB / gzip: 0.45 KiB\n../dist/assets/index.0c4f4975.js                  47.32 KiB / gzip: 15.42 KiB\n../dist/assets/user-follow-counts.c2b6702b.js     2.31 KiB / gzip: 0.97 KiB\n../dist/assets/search-page.e8efcd22.js            2.99 KiB / gzip: 1.25 KiB\n../dist/assets/user-followees-page.d48e2aaf.js    2.15 KiB / gzip: 0.92 KiB\n../dist/assets/tagged-posts-page.3c974a5d.js      2.66 KiB / gzip: 1.12 KiB\n../dist/assets/user-followers-page.8ddfd2fe.js    2.15 KiB / gzip: 0.93 KiB\n../dist/assets/privacy-policy-page.64a5006e.js    9.99 KiB / gzip: 3.51 KiB\n../dist/assets/dialog-polyfill.esm.8bcb7267.js    11.33 KiB / gzip: 3.81 KiB\n../dist/assets/user-page.4e78278a.js              17.00 KiB / gzip: 4.84 KiB\n../dist/assets/index.c81a6330.css                 24.30 KiB / gzip: 4.72 KiB\n../dist/assets/index.6761e500.js                  41.44 KiB / gzip: 14.98 KiB\n../dist/assets/post-item.5df5790b.js              63.07 KiB / gzip: 23.58 KiB\nRemoving intermediate container 4848f85e72bc\n ---> 01b6e09e3436\nStep 12/25 : WORKDIR /go/src/github.com/nakamauwu/nakama\n ---> Running in 8daa2d8591b8\nRemoving intermediate container 8daa2d8591b8\n ---> a8fb5c785d09\nStep 13/25 : RUN go mod download\n ---> Running in 91ad6de15c81\nRemoving intermediate container 91ad6de15c81\n ---> a98a17614640\nStep 14/25 : RUN CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags=\"-s -w\" -o /go/bin/nakama ./cmd/nakama\n ---> Running in 1faa7a5641af\nRemoving intermediate container 1faa7a5641af\n ---> d2fdb068749a\nStep 15/25 : FROM scratch\n ---> \nStep 16/25 : ARG DISABLE_DEV_LOGIN=true\n ---> Running in b2e5d641ac4e\nRemoving intermediate container b2e5d641ac4e\n ---> e1e6e7ad9031\nStep 17/25 : ENV DISABLE_DEV_LOGIN=$DISABLE_DEV_LOGIN\n ---> Running in 576413d320cf\nRemoving intermediate container 576413d320cf\n ---> 423ded921522\nStep 18/25 : ARG EMBED_STATIC=true\n ---> Running in 788e93e8526e\nRemoving intermediate container 788e93e8526e\n ---> cf509aabde69\nStep 19/25 : ENV EMBED_STATIC=$EMBED_STATIC\n ---> Running in 4849b0b280c8\nRemoving intermediate container 4849b0b280c8\n ---> adca6d2a02e6\nStep 20/25 : ARG EXEC_SCHEMA=true\n ---> Running in f8ad73d6fd45\nRemoving intermediate container f8ad73d6fd45\n ---> 605a2aea0391\nStep 21/25 : ENV EXEC_SCHEMA=$EXEC_SCHEMA\n ---> Running in 8ae79ce5043b\nRemoving intermediate container 8ae79ce5043b\n ---> 450e9c41bd99\nStep 22/25 : COPY --from=build /etc/ssl/certs/ca-certificates.crt /etc/ssl/certs/\n ---> f28f74a755b1\nStep 23/25 : COPY --from=build /go/bin/nakama /usr/bin/nakama\n ---> b49d967775af\nStep 24/25 : EXPOSE 3000\n ---> Running in a9f6026024e5\nRemoving intermediate container a9f6026024e5\n ---> b442dea37c1e\nStep 25/25 : ENTRYPOINT [ \"nakama\" ]\n ---> Running in d2d8d09791ab\nRemoving intermediate container d2d8d09791ab\n ---> 3f7a3aa31a18\nSuccessfully built 3f7a3aa31a18\nSuccessfully tagged nakama:latest\n","stderr":"","imageSize":17290446},"endTime":1672098635545}