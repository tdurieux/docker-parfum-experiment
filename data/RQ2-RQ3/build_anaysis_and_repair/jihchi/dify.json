{"repository":"https://github.com/jihchi/dify","dockerfilePath":"Dockerfile","startTime":1672813123314,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/jihchi/dify'...\n","error":null,"commit":"8d0531b7f9b3a3114433cee390fa001709c659ad"},"originalBuild":{"startTimestamp":1672813125934,"endTimestamp":1672813271192,"error":null,"stdout":"Sending build context to Docker daemon  49.65MB\r\r\nStep 1/10 : FROM rust:1 as builder\n1: Pulling from library/rust\n32de3c850997: Already exists\nfa1d4c8d85a4: Already exists\nc796299bbbdd: Already exists\n81283a9569ad: Already exists\n60b38700e7fb: Pulling fs layer\n5e868601ee3b: Pulling fs layer\n5e868601ee3b: Verifying Checksum\n5e868601ee3b: Download complete\n60b38700e7fb: Verifying Checksum\n60b38700e7fb: Download complete\n60b38700e7fb: Pull complete\n5e868601ee3b: Pull complete\nDigest: sha256:0067330b7e0eacacc5c32f21b720607c0cd61eda905c8d55e6a745f579ddeee9\nStatus: Downloaded newer image for rust:1\n ---> 5e0d0367026b\nStep 2/10 : WORKDIR /usr/src/dify\n ---> Running in fd699e7368ad\nRemoving intermediate container fd699e7368ad\n ---> 1e4544af7d41\nStep 3/10 : COPY Cargo.toml .\n ---> 1ae4b58fb04f\nStep 4/10 : COPY ./src ./src\n ---> 391e70afc186\nStep 5/10 : RUN cargo install --path .\n ---> Running in 434221b0ca60\n\u001b[91m  Installing dify v0.5.1 (/usr/src/dify)\n\u001b[0m\u001b[91m    Updating crates.io index\n\u001b[0m\u001b[91m Downloading crates ...\n\u001b[0m\u001b[91m  Downloaded adler32 v1.2.0\n\u001b[0m\u001b[91m  Downloaded lazy_static v1.4.0\n\u001b[0m\u001b[91m  Downloaded either v1.8.0\n\u001b[0m\u001b[91m  Downloaded png v0.16.8\n\u001b[0m\u001b[91m  Downloaded rayon-core v1.10.1\n\u001b[0m\u001b[91m  Downloaded deflate v0.8.6\n\u001b[0m\u001b[91m  Downloaded scopeguard v1.1.0\n\u001b[0m\u001b[91m  Downloaded weezl v0.1.7\n\u001b[0m\u001b[91m  Downloaded scoped_threadpool v0.1.9\n\u001b[0m\u001b[91m  Downloaded jpeg-decoder v0.1.22\n\u001b[0m\u001b[91m  Downloaded unicode-width v0.1.10\n\u001b[0m\u001b[91m  Downloaded rayon v1.6.1\n\u001b[0m\u001b[91m  Downloaded atty v0.2.14\n\u001b[0m\u001b[91m  Downloaded cfg-if v1.0.0\n\u001b[0m\u001b[91m  Downloaded adler v1.0.2\n\u001b[0m\u001b[91m  Downloaded num-integer v0.1.45\n\u001b[0m\u001b[91m  Downloaded color_quant v1.1.0\n\u001b[0m\u001b[91m  Downloaded num-iter v0.1.43\n\u001b[0m\u001b[91m  Downloaded image v0.23.14\n\u001b[0m\u001b[91m  Downloaded num_cpus v1.15.0\n\u001b[0m\u001b[91m  Downloaded bytemuck v1.12.3\n\u001b[0m\u001b[91m  Downloaded bitflags v1.3.2\n\u001b[0m\u001b[91m  Downloaded miniz_oxide v0.4.4\n\u001b[0m\u001b[91m  Downloaded crossbeam-epoch v0.9.13\n\u001b[0m\u001b[91m  Downloaded num-rational v0.3.2\n\u001b[0m\u001b[91m  Downloaded miniz_oxide v0.3.7\n\u001b[0m\u001b[91m  Downloaded getopts v0.2.21\n\u001b[0m\u001b[91m  Downloaded gif v0.11.4\n\u001b[0m\u001b[91m  Downloaded tiff v0.6.1\n\u001b[0m\u001b[91m  Downloaded colored v2.0.0\n\u001b[0m\u001b[91m  Downloaded anyhow v1.0.68\n\u001b[0m\u001b[91m  Downloaded crc32fast v1.3.2\n\u001b[0m\u001b[91m  Downloaded memoffset v0.7.1\n\u001b[0m\u001b[91m  Downloaded crossbeam-channel v0.5.6\n\u001b[0m\u001b[91m  Downloaded byteorder v1.4.3\n\u001b[0m\u001b[91m  Downloaded num-traits v0.2.15\n\u001b[0m\u001b[91m  Downloaded crossbeam-deque v0.8.2\n\u001b[0m\u001b[91m  Downloaded crossbeam-utils v0.8.14\n\u001b[0m\u001b[91m  Downloaded autocfg v1.1.0\n\u001b[0m\u001b[91m  Downloaded libc v0.2.139\n\u001b[0m\u001b[91m   Compiling autocfg v1.1.0\n\u001b[0m\u001b[91m   Compiling cfg-if v1.0.0\n\u001b[0m\u001b[91m   Compiling libc v0.2.139\n\u001b[0m\u001b[91m   Compiling crossbeam-utils v0.8.14\n\u001b[0m\u001b[91m   Compiling scopeguard v1.1.0\u001b[0m\u001b[91m\n\u001b[0m\u001b[91m   Compiling rayon-core v1.10.1\n\u001b[0m\u001b[91m   Compiling either v1.8.0\n\u001b[0m\u001b[91m   Compiling adler32 v1.2.0\n\u001b[0m\u001b[91m   Compiling crc32fast v1.3.2\n\u001b[0m\u001b[91m   Compiling byteorder v1.4\u001b[0m\u001b[91m.3\n\u001b[0m\u001b[91m   Compiling weezl v0.1.7\n\u001b[0m\u001b[91m   Compiling adler v1.0.2\u001b[0m\u001b[91m\n\u001b[0m\u001b[91m   Compiling color_quant v1.1.0\n\u001b[0m\u001b[91m   Compiling bitflags v1.3.2\n\u001b[0m\u001b[91m   Compiling anyhow v1.0.68\n\u001b[0m\u001b[91m   Compiling scoped_threadpool v0.1.9\n\u001b[0m\u001b[91m   Compiling lazy_static v1.4.0\u001b[0m\u001b[91m\n\u001b[0m\u001b[91m   Compiling unicode-width v0.1.10\u001b[0m\u001b[91m\n\u001b[0m\u001b[91m   Compiling bytemuck v1.12.3\n\u001b[0m\u001b[91m   Compiling miniz_oxide v0.3.7\n\u001b[0m\u001b[91m   Compiling getopts v0.2.21\u001b[0m\u001b[91m\n\u001b[0m\u001b[91m   Compiling memoffset v0.7.1\n\u001b[0m\u001b[91m   Compiling crossbeam-epoch v0.9.13\n\u001b[0m\u001b[91m   Compiling num-traits v0.2.15\n\u001b[0m\u001b[91m   Compiling num-integer v0.1.45\n\u001b[0m\u001b[91m   Compiling miniz_oxide v0.4.\u001b[0m\u001b[91m4\n\u001b[0m\u001b[91m   Compiling num-rational v0\u001b[0m\u001b[91m.3.2\n\u001b[0m\u001b[91m   Compiling num-iter v0.1.43\n\u001b[0m\u001b[91m   Compiling gif v0.11.4\n\u001b[0m\u001b[91m   Compiling deflate v0.8.6\n\u001b[0m\u001b[91m   Compiling png v0.16.8\n\u001b[0m\u001b[91m   Compiling crossbeam-channel v0.5.6\n\u001b[0m\u001b[91m   Compiling crossbeam-deque v0.8.2\n\u001b[0m\u001b[91m   Compiling num_cpus v1.15.0\n\u001b[0m\u001b[91m   Compiling atty v0.2.14\n\u001b[0m\u001b[91m   Compiling colored v2.0.0\n\u001b[0m\u001b[91m   Compiling rayon v1.6.1\n\u001b[0m\u001b[91m   Compiling jpeg-decoder v0.1.22\n\u001b[0m\u001b[91m   Compiling tiff v0.6.1\n\u001b[0m\u001b[91m   Compiling image v0.23.14\n\u001b[0m\u001b[91m   Compiling dify v0.5.1 (/usr/src/dify)\n\u001b[0m\u001b[91m    Finished release [optimized] target(s) in 30.50s\n\u001b[0m\u001b[91m  Installing /usr/local/cargo/bin/dify\n\u001b[0m\u001b[91m   Installed package `dify v0.5.1 (/usr/src/dify)` (executable `dify`)\n\u001b[0mRemoving intermediate container 434221b0ca60\n ---> 916fc18dcab0\nStep 6/10 : FROM debian:buster-slim\nbuster-slim: Pulling from library/debian\nb52ebda398ed: Already exists\nDigest: sha256:c9c3c682452791a9c301786a2beedb20f291e107c1b699fed0d4d145cc247d4f\nStatus: Downloaded newer image for debian:buster-slim\n ---> 101a5b2953f2\nStep 7/10 : RUN apt-get update && apt-get install && rm -rf /var/lib/apt/lists/*\n ---> Running in de0d26b680b4\nGet:1 http://deb.debian.org/debian buster InRelease [122 kB]\nGet:2 http://deb.debian.org/debian-security buster/updates InRelease [34.8 kB]\nGet:3 http://deb.debian.org/debian buster-updates InRelease [56.6 kB]\nGet:4 http://deb.debian.org/debian buster/main amd64 Packages [7909 kB]\nGet:5 http://deb.debian.org/debian-security buster/updates/main amd64 Packages [422 kB]\nGet:6 http://deb.debian.org/debian buster-updates/main amd64 Packages [8788 B]\nFetched 8553 kB in 1s (5915 kB/s)\nReading package lists...\nReading package lists...\nBuilding dependency tree...\nReading state information...\n0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.\nRemoving intermediate container de0d26b680b4\n ---> 06598ef0e227\nStep 8/10 : COPY --from=builder /usr/local/cargo/bin/dify /usr/local/bin/dify\n ---> bbcdd267b79a\nStep 9/10 : WORKDIR /mnt/dify\n ---> Running in 8f78785e6e80\nRemoving intermediate container 8f78785e6e80\n ---> 88a3b098595e\nStep 10/10 : ENTRYPOINT [\"dify\"]\n ---> Running in 2a594feaddbb\nRemoving intermediate container 2a594feaddbb\n ---> cc199445d4d3\nSuccessfully built cc199445d4d3\nSuccessfully tagged dify:latest\n","stderr":"","imageSize":75551935},"repair":{"violations":[{"name":"ruleAptGetInstallUseY","position":{"start":7,"end":7,"columnStart":22,"columnEnd":37}},{"name":"ruleAptGetInstallUseNoRec","position":{"start":7,"end":7,"columnStart":22,"columnEnd":37}}],"repairedDockerfile":"FROM rust:1 as builder\nWORKDIR /usr/src/dify\nCOPY Cargo.toml .\nCOPY ./src ./src\nRUN cargo install --path .\n\nFROM debian:buster-slim\nRUN apt-get update && apt-get install -y --no-install-recommends && rm -rf /var/lib/apt/lists/*\nCOPY --from=builder /usr/local/cargo/bin/dify /usr/local/bin/dify\nWORKDIR /mnt/dify\nENTRYPOINT [\"dify\"]\n"},"repairedBuild":{"startTimestamp":1672813271920,"endTimestamp":1672813327100,"error":null,"stdout":"Sending build context to Docker daemon  49.65MB\r\r\nStep 1/10 : FROM rust:1 as builder\n ---> 5e0d0367026b\nStep 2/10 : WORKDIR /usr/src/dify\n ---> Running in 81af882ccd14\nRemoving intermediate container 81af882ccd14\n ---> cfa409221c62\nStep 3/10 : COPY Cargo.toml .\n ---> 0a07c6006598\nStep 4/10 : COPY ./src ./src\n ---> 8dd06fec824c\nStep 5/10 : RUN cargo install --path .\n ---> Running in af7d9393d545\n\u001b[91m  Installing dify v0.5.1 (\u001b[0m\u001b[91m/usr/src/dify)\n\u001b[0m\u001b[91m    Updating crates.io index\n\u001b[0m\u001b[91m Downloading crates ...\n\u001b[0m\u001b[91m  Downloaded scoped_threadpool v0.1.9\n\u001b[0m\u001b[91m  Downloaded png v0.16.8\n\u001b[0m\u001b[91m  Downloaded getopts v0.2.21\n\u001b[0m\u001b[91m  Downloaded unicode-width v0.1.10\n\u001b[0m\u001b[91m  Downloaded color_quant v1.1.0\n\u001b[0m\u001b[91m  Downloaded anyhow v1.0.68\n\u001b[0m\u001b[91m  Downloaded num-iter v0.1.43\n\u001b[0m\u001b[91m  Downloaded deflate v0.8.6\n\u001b[0m\u001b[91m  Downloaded scopeguard v1.1.0\n\u001b[0m\u001b[91m  Downloaded lazy_static v1.4.0\n\u001b[0m\u001b[91m  Downloaded either v1.8.0\n\u001b[0m\u001b[91m  Downloaded num-integer v0.1.45\n\u001b[0m\u001b[91m  Downloaded image v0.23.14\n\u001b[0m\u001b[91m  Downloaded num_cpus v1.15.0\n\u001b[0m\u001b[91m  Downloaded num-traits v0.2.15\n\u001b[0m\u001b[91m  Downloaded miniz_oxide v0.4.4\n\u001b[0m\u001b[91m  Downloaded atty v0.2.14\n\u001b[0m\u001b[91m  Downloaded jpeg-decoder v0.1.22\n\u001b[0m\u001b[91m  Downloaded adler v1.0.2\n\u001b[0m\u001b[91m  Downloaded miniz_oxide v0.3.7\n\u001b[0m\u001b[91m  Downloaded weezl v0.1.7\n\u001b[0m\u001b[91m  Downloaded crossbeam-epoch v0.9.13\n\u001b[0m\u001b[91m  Downloaded tiff v0.6.1\n\u001b[0m\u001b[91m  Downloaded byteorder v1.4.3\n\u001b[0m\u001b[91m  Downloaded num-rational v0.3.2\n\u001b[0m\u001b[91m  Downloaded memoffset v0.7.1\n\u001b[0m\u001b[91m  Downloaded crossbeam-deque v0.8.2\n\u001b[0m\u001b[91m  Downloaded rayon-core v1.10.1\n\u001b[0m\u001b[91m  Downloaded cfg-if v1.0.0\n\u001b[0m\u001b[91m  Downloaded colored v2.0.0\n\u001b[0m\u001b[91m  Downloaded crc32fast v1.3.2\n\u001b[0m\u001b[91m  Downloaded libc v0.2.139\n\u001b[0m\u001b[91m  Downloaded gif v0.11.4\n\u001b[0m\u001b[91m  Downloaded bitflags v1.3.2\n\u001b[0m\u001b[91m  Downloaded rayon v1.6.1\n\u001b[0m\u001b[91m  Downloaded autocfg v1.1.0\n\u001b[0m\u001b[91m  Downloaded crossbeam-channel v0.5.6\n\u001b[0m\u001b[91m  Downloaded crossbeam-utils v0.8.14\n\u001b[0m\u001b[91m  Downloaded bytemuck v1.12.3\n\u001b[0m\u001b[91m  Downloaded adler32 v1.2.0\n\u001b[0m\u001b[91m   Compiling autocfg v1.1.0\n\u001b[0m\u001b[91m   Compiling cfg-if v1.0.0\n\u001b[0m\u001b[91m   Compiling libc v0.2.139\n\u001b[0m\u001b[91m   Compiling crossbeam-utils v0.8.14\n\u001b[0m\u001b[91m   Compiling scopeguard v1.1.0\n\u001b[0m\u001b[91m   Compiling rayon-core v1.10.1\n\u001b[0m\u001b[91m   Compiling either v1.8.0\n\u001b[0m\u001b[91m   Compiling crc32fast v1.3.2\n\u001b[0m\u001b[91m   Compiling adler32 v1.2.0\n\u001b[0m\u001b[91m   Compiling adler v1.0.2\n\u001b[0m\u001b[91m   Compiling weezl v0.1.7\n\u001b[0m\u001b[91m   Compiling byteorder v1.4.3\n\u001b[0m\u001b[91m   Compiling color_quant v1.1.0\n\u001b[0m\u001b[91m   Compiling anyhow v1.0.68\n\u001b[0m\u001b[91m   Compiling bitflags v1.3.2\n\u001b[0m\u001b[91m   Compiling scoped_threadpool v0.1.9\n\u001b[0m\u001b[91m   Compiling bytemuck v1.12.3\n\u001b[0m\u001b[91m   Compiling unicode-width v0.1.10\n\u001b[0m\u001b[91m   Compiling lazy_static v1.4.0\n\u001b[0m\u001b[91m   Compiling miniz_oxide v0.3.7\n\u001b[0m\u001b[91m   Compiling getopts v0.2.21\n\u001b[0m\u001b[91m   Compiling memoffset v0.7.1\n\u001b[0m\u001b[91m   Compiling crossbeam-epoch v0.9.13\n\u001b[0m\u001b[91m   Compiling num-traits v0.2.\u001b[0m\u001b[91m15\n\u001b[0m\u001b[91m   Compiling num-integer v0.1.\u001b[0m\u001b[91m45\n\u001b[0m\u001b[91m   Compiling miniz_oxide v0.4.4\n\u001b[0m\u001b[91m   Compiling num-iter v0.1.43\n\u001b[0m\u001b[91m   Compiling num-rational v0.3.2\n\u001b[0m\u001b[91m   Compiling gif v0.11.4\n\u001b[0m\u001b[91m   Compiling deflate v0.8.6\n\u001b[0m\u001b[91m   Compiling png v0.16.8\n\u001b[0m\u001b[91m  \u001b[0m\u001b[91m Compiling crossbeam-channel v\u001b[0m\u001b[91m0.\u001b[0m\u001b[91m5\u001b[0m\u001b[91m.\u001b[0m\u001b[91m6\u001b[0m\u001b[91m\n\u001b[0m\u001b[91m   Compiling crossbeam-deque v0.8.2\n\u001b[0m\u001b[91m   Compiling num_cpus v1.15.0\n   Compiling atty v0.2.14\n\u001b[0m\u001b[91m   Compiling colored v2.0.0\n\u001b[0m\u001b[91m   Compiling rayon v1.6.1\n\u001b[0m\u001b[91m   Compiling jpeg-decoder v0.1.22\n\u001b[0m\u001b[91m   Compiling tiff v0.6.1\n\u001b[0m\u001b[91m   Compiling image v0.23.14\n\u001b[0m\u001b[91m   Compiling dify v0.5.1 (/usr/src/dify)\n\u001b[0m\u001b[91m    Finished release [optimized] target(s) in 30.76s\n\u001b[0m\u001b[91m  Installing /usr/local/cargo/bin/dify\n\u001b[0m\u001b[91m   Installed package `dify v0.5.1 (/usr/src/dify)` (executable `dify`)\n\u001b[0mRemoving intermediate container af7d9393d545\n ---> 6440db411c99\nStep 6/10 : FROM debian:buster-slim\n ---> 101a5b2953f2\nStep 7/10 : RUN apt-get update && apt-get install -y --no-install-recommends && rm -rf /var/lib/apt/lists/*\n ---> Running in 0d0757d54aaa\nGet:1 http://deb.debian.org/debian buster InRelease [122 kB]\nGet:2 http://deb.debian.org/debian-security buster/updates InRelease [34.8 kB]\nGet:3 http://deb.debian.org/debian buster-updates InRelease [56.6 kB]\nGet:4 http://deb.debian.org/debian buster/main amd64 Packages [7909 kB]\nGet:5 http://deb.debian.org/debian-security buster/updates/main amd64 Packages [422 kB]\nGet:6 http://deb.debian.org/debian buster-updates/main amd64 Packages [8788 B]\nFetched 8553 kB in 1s (5800 kB/s)\nReading package lists...\nReading package lists...\nBuilding dependency tree...\nReading state information...\n0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.\nRemoving intermediate container 0d0757d54aaa\n ---> 75f5376909b8\nStep 8/10 : COPY --from=builder /usr/local/cargo/bin/dify /usr/local/bin/dify\n ---> f97649890f39\nStep 9/10 : WORKDIR /mnt/dify\n ---> Running in cb830e61b8d5\nRemoving intermediate container cb830e61b8d5\n ---> e646faf1f5cb\nStep 10/10 : ENTRYPOINT [\"dify\"]\n ---> Running in 532a214cfee4\nRemoving intermediate container 532a214cfee4\n ---> dc1b88c79e74\nSuccessfully built dc1b88c79e74\nSuccessfully tagged dify:latest\n","stderr":"","imageSize":75551935},"endTime":1672813327336}