{"repository":"https://github.com/alice-lg/alice-lg","dockerfilePath":"Dockerfile","startTime":1672293500456,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/alice-lg/alice-lg'...\n","error":null,"commit":"64e5b1874bcdba4b2718a677b1ad7226f26f2285"},"originalBuild":{"startTimestamp":1672293501901,"endTimestamp":1672293719921,"error":null,"stdout":"Sending build context to Docker daemon  12.18MB\r\r\nStep 1/22 : FROM node:latest AS ui\nlatest: Pulling from library/node\n32de3c850997: Already exists\nfa1d4c8d85a4: Already exists\nc796299bbbdd: Already exists\n81283a9569ad: Already exists\n60b38700e7fb: Already exists\n9537c7a3988e: Pulling fs layer\ndfc2ed565c15: Pulling fs layer\nb65dd9eadf26: Pulling fs layer\nc46cc3bcdf59: Pulling fs layer\nc46cc3bcdf59: Waiting\n9537c7a3988e: Download complete\nb65dd9eadf26: Verifying Checksum\nb65dd9eadf26: Download complete\n9537c7a3988e: Pull complete\nc46cc3bcdf59: Download complete\ndfc2ed565c15: Verifying Checksum\ndfc2ed565c15: Download complete\ndfc2ed565c15: Pull complete\nb65dd9eadf26: Pull complete\nc46cc3bcdf59: Pull complete\nDigest: sha256:d5222e1ebd7dd7e9683f47a8861a4711cb4407a4830cbe04a582ca4986245700\nStatus: Downloaded newer image for node:latest\n ---> 548714e444f4\nStep 2/22 : WORKDIR /src/alice-lg/ui\n ---> Running in 1a8d0f83f294\nRemoving intermediate container 1a8d0f83f294\n ---> acc23f6820cf\nStep 3/22 : ADD ui/package.json .\n ---> cb843dbf6496\nStep 4/22 : ADD ui/yarn.lock .\n ---> c388b97bec9d\nStep 5/22 : RUN yarn install\n ---> Running in fdb445abed99\nyarn install v1.22.19\n[1/4] Resolving packages...\n[2/4] Fetching packages...\n[3/4] Linking dependencies...\n\u001b[91mwarning \" > @testing-library/user-event@14.2.1\" has unmet peer dependency \"@testing-library/dom@>=7.21.4\".\n\u001b[0m\u001b[91mwarning \"react-scripts > eslint-config-react-app > eslint-plugin-flowtype@8.0.3\" has unmet peer dependency \"@babel/plugin-syntax-flow@^7.14.5\".\nwarning \"react-scripts > eslint-config-react-app > eslint-plugin-flowtype@8.0.3\" has unmet peer dependency \"@babel/plugin-transform-react-jsx@^7.14.9\".\n\u001b[0m\u001b[91mwarning \"react-scripts > react-dev-utils > fork-ts-checker-webpack-plugin@6.5.2\" has unmet peer dependency \"typescript@>= 2.7\".\n\u001b[0m\u001b[91mwarning \"react-scripts > eslint-config-react-app > @typescript-eslint/eslint-plugin > tsutils@3.21.0\" has unmet peer dependency \"typescript@>=2.8.0 || >= 3.2.0-dev || >= 3.3.0-dev || >= 3.4.0-dev || >= 3.5.0-dev || >= 3.6.0-dev || >= 3.6.0-beta || >= 3.7.0-dev || >= 3.7.0-beta\".\n\u001b[0m[4/4] Building fresh packages...\nDone in 26.66s.\nRemoving intermediate container fdb445abed99\n ---> cfeb9707586b\nStep 6/22 : ADD ui/ .\n ---> da6f449a780b\nStep 7/22 : RUN yarn build\n ---> Running in 49a4b0b866fa\nyarn run v1.22.19\n$ react-scripts build\nCreating an optimized production build...\n\u001b[91mBrowserslist: caniuse-lite is outdated. Please run:\n  npx update-browserslist-db@latest\n  Why you should do it regularly: https://github.com/browserslist/update-db#readme\n\u001b[0m\u001b[91mBrowserslist: caniuse-lite is outdated. Please run:\n  npx update-browserslist-db@latest\n  Why you should do it regularly: https://github.com/browserslist/update-db#readme\n\u001b[0mCompiled successfully.\n\nFile sizes after gzip:\n\n  121.61 kB  build/static/js/main.99689303.js\n  21.6 kB    build/static/css/main.33159db8.css\n  1.78 kB    build/static/js/787.349b0e60.chunk.js\n\nThe project was built assuming it is hosted at /.\nYou can control this with the homepage field in your package.json.\n\nThe build folder is ready to be deployed.\nYou may serve it with a static server:\n\n  yarn global add serve\n  serve -s build\n\nFind out more about deployment here:\n\n  https://cra.link/deployment\n\nDone in 13.70s.\nRemoving intermediate container 49a4b0b866fa\n ---> 867778cf2132\nStep 8/22 : FROM golang:1.18 AS backend\n1.18: Pulling from library/golang\n32de3c850997: Already exists\nfa1d4c8d85a4: Already exists\nc796299bbbdd: Already exists\n81283a9569ad: Already exists\nc768848b86a2: Already exists\n160a777925fe: Pulling fs layer\n1be94824532a: Pulling fs layer\n1be94824532a: Verifying Checksum\n1be94824532a: Download complete\n160a777925fe: Verifying Checksum\n160a777925fe: Download complete\n160a777925fe: Pull complete\n1be94824532a: Pull complete\nDigest: sha256:00d63686b480f6dc866e93ddc4b29efa2db03274a687e6495c2cfbfe615d638e\nStatus: Downloaded newer image for golang:1.18\n ---> fffd0d9a59da\nStep 9/22 : WORKDIR /src/alice-lg\n ---> Running in 98e3973998af\nRemoving intermediate container 98e3973998af\n ---> 2f55d9484d67\nStep 10/22 : ADD go.mod .\n ---> 62f138463411\nStep 11/22 : ADD go.sum .\n ---> 3dc7b06ed0f0\nStep 12/22 : RUN go mod download\n ---> Running in 19a4af0b8f64\nRemoving intermediate container 19a4af0b8f64\n ---> 5638bc24b3bf\nStep 13/22 : ADD . .\n ---> 85ba772b3cb9\nStep 14/22 : COPY --from=ui /src/alice-lg/ui/build ui/build\n ---> 333e655bb424\nStep 15/22 : WORKDIR /src/alice-lg/cmd/alice-lg\n ---> Running in 2873f809fcf3\nRemoving intermediate container 2873f809fcf3\n ---> b93a5b67575b\nStep 16/22 : RUN make alpine\n ---> Running in 4b6795489d67\nCGO_ENABLED=0 GOOS=linux go build \\\n\t-a -installsuffix cgo \\\n\t-ldflags=\"-X github.com/alice-lg/alice-lg/pkg/config.Version=6.0.0\" -o alice-lg-linux-amd64\nRemoving intermediate container 4b6795489d67\n ---> 45800d2b915d\nStep 17/22 : FROM alpine:latest\nlatest: Pulling from library/alpine\nc158987b0551: Already exists\nDigest: sha256:8914eb54f968791faf6a8638949e480fef81e697984fba772b3976835194c6d4\nStatus: Downloaded newer image for alpine:latest\n ---> 49176f190c7e\nStep 18/22 : RUN apk add -U tzdata\n ---> Running in 0d3d06719aa1\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/1) Installing tzdata (2022f-r1)\nOK: 10 MiB in 16 packages\nRemoving intermediate container 0d3d06719aa1\n ---> 0f70e8545cd8\nStep 19/22 : COPY --from=backend /src/alice-lg/cmd/alice-lg/alice-lg-linux-amd64 /usr/bin/alice-lg\n ---> 4ac1e943a9b3\nStep 20/22 : RUN ls -lsha /usr/bin/alice-lg\n ---> Running in 7a9e2bbdfa60\n 26652 -rwxr-xr-x    1 root     root       26.0M Dec 29 06:01 /usr/bin/alice-lg\nRemoving intermediate container 7a9e2bbdfa60\n ---> 268bfd24b564\nStep 21/22 : EXPOSE 7340:7340\n ---> Running in c8b5660faa05\nRemoving intermediate container c8b5660faa05\n ---> 4baeaa4e22e3\nStep 22/22 : CMD [\"/usr/bin/alice-lg\"]\n ---> Running in 2d15a196fb83\nRemoving intermediate container 2d15a196fb83\n ---> 58fa9a44b152\nSuccessfully built 58fa9a44b152\nSuccessfully tagged alice-lg:latest\n","stderr":"","imageSize":38073137},"repair":{"violations":[{"name":"apkAddUseNoCache","position":{"start":40,"end":40,"columnStart":4,"columnEnd":21}}],"repairedDockerfile":"#\n# Alice - The friendly BGP looking glass\n#\n\n# Build frontend first\nFROM node:latest AS ui\n\n# Install dependencies\nWORKDIR /src/alice-lg/ui\nADD ui/package.json .\nADD ui/yarn.lock .\n\nRUN yarn install\n\n# Add frontend\nADD ui/ .\n\n# Build frontend\nRUN yarn build\n\n# Build the backend\nFROM golang:1.18 AS backend\n\n# Install dependencies\nWORKDIR /src/alice-lg\nADD go.mod .\nADD go.sum .\nRUN go mod download\n\nADD . .\n\n# Add client\nCOPY --from=ui /src/alice-lg/ui/build ui/build\n\nWORKDIR /src/alice-lg/cmd/alice-lg\nRUN make alpine\n\nFROM alpine:latest\n\nRUN apk add --no-cache -U tzdata\n\nCOPY --from=backend /src/alice-lg/cmd/alice-lg/alice-lg-linux-amd64 /usr/bin/alice-lg\nRUN ls -lsha /usr/bin/alice-lg\n\nEXPOSE 7340:7340\nCMD [\"/usr/bin/alice-lg\"]\n"},"repairedBuild":{"startTimestamp":1672293720731,"endTimestamp":1672293956683,"error":null,"stdout":"Sending build context to Docker daemon  12.18MB\r\r\nStep 1/22 : FROM node:latest AS ui\n ---> 548714e444f4\nStep 2/22 : WORKDIR /src/alice-lg/ui\n ---> Running in 884510681c52\nRemoving intermediate container 884510681c52\n ---> e59cbf257492\nStep 3/22 : ADD ui/package.json .\n ---> 6e016b690ac7\nStep 4/22 : ADD ui/yarn.lock .\n ---> 89bd91c4fdb4\nStep 5/22 : RUN yarn install\n ---> Running in 2b70ff15c63e\nyarn install v1.22.19\n[1/4] Resolving packages...\n[2/4] Fetching packages...\n[3/4] Linking dependencies...\n\u001b[91mwarning \" > @testing-library/user-event@14.2.1\" has unmet peer dependency \"@testing-library/dom@>=7.21.4\".\n\u001b[0m\u001b[91mwarning \"react-scripts > eslint-config-react-app > eslint-plugin-flowtype@8.0.3\" has unmet peer dependency \"@babel/plugin-syntax-flow@^7.14.5\".\nwarning \"react-scripts > eslint-config-react-app > eslint-plugin-flowtype@8.0.3\" has unmet peer dependency \"@babel/plugin-transform-react-jsx@^7.14.9\".\n\u001b[0m\u001b[91mwarning \"react-scripts > react-dev-utils > fork-ts-checker-webpack-plugin@6.5.2\" has unmet peer dependency \"typescript@>= 2.7\".\n\u001b[0m\u001b[91mwarning \"react-scripts > eslint-config-react-app > @typescript-eslint/eslint-plugin > tsutils@3.21.0\" has unmet peer dependency \"typescript@>=2.8.0 || >= 3.2.0-dev || >= 3.3.0-dev || >= 3.4.0-dev || >= 3.5.0-dev || >= 3.6.0-dev || >= 3.6.0-beta || >= 3.7.0-dev || >= 3.7.0-beta\".\n\u001b[0m[4/4] Building fresh packages...\nDone in 24.33s.\nRemoving intermediate container 2b70ff15c63e\n ---> 6a0e75c0280f\nStep 6/22 : ADD ui/ .\n ---> 52ffa56aa7b9\nStep 7/22 : RUN yarn build\n ---> Running in 8589b7081377\nyarn run v1.22.19\n$ react-scripts build\nCreating an optimized production build...\n\u001b[91mBrowserslist: caniuse-lite is outdated. Please run:\n  npx update-browserslist-db@latest\n  Why you should do it regularly: https://github.com/browserslist/update-db#readme\n\u001b[0m\u001b[91mBrowserslist: caniuse-lite is outdated. Please run:\n  npx update-browserslist-db@latest\n  Why you should do it regularly: https://github.com/browserslist/update-db#readme\n\u001b[0mCompiled successfully.\n\nFile sizes after gzip:\n\n  121.61 kB  build/static/js/main.99689303.js\n  21.6 kB    build/static/css/main.33159db8.css\n  1.78 kB    build/static/js/787.349b0e60.chunk.js\n\nThe project was built assuming it is hosted at /.\nYou can control this with the homepage field in your package.json.\n\nThe build folder is ready to be deployed.\nYou may serve it with a static server:\n\n  yarn global add serve\n  serve -s build\n\nFind out more about deployment here:\n\n  https://cra.link/deployment\n\nDone in 14.68s.\nRemoving intermediate container 8589b7081377\n ---> 223638142f6a\nStep 8/22 : FROM golang:1.18 AS backend\n ---> fffd0d9a59da\nStep 9/22 : WORKDIR /src/alice-lg\n ---> Running in b013d612d076\nRemoving intermediate container b013d612d076\n ---> 22d1de45ba78\nStep 10/22 : ADD go.mod .\n ---> 0cacbcedde19\nStep 11/22 : ADD go.sum .\n ---> cf34859f815f\nStep 12/22 : RUN go mod download\n ---> Running in 088507652ebb\nRemoving intermediate container 088507652ebb\n ---> 15877b231142\nStep 13/22 : ADD . .\n ---> d88e2bcba375\nStep 14/22 : COPY --from=ui /src/alice-lg/ui/build ui/build\n ---> 25ec0b3e8a3d\nStep 15/22 : WORKDIR /src/alice-lg/cmd/alice-lg\n ---> Running in 78be9ab5bbb8\nRemoving intermediate container 78be9ab5bbb8\n ---> 19c64292fe2c\nStep 16/22 : RUN make alpine\n ---> Running in 0327361ac77e\nCGO_ENABLED=0 GOOS=linux go build \\\n\t-a -installsuffix cgo \\\n\t-ldflags=\"-X github.com/alice-lg/alice-lg/pkg/config.Version=6.0.0\" -o alice-lg-linux-amd64\nRemoving intermediate container 0327361ac77e\n ---> da4ab3b80009\nStep 17/22 : FROM alpine:latest\n ---> 49176f190c7e\nStep 18/22 : RUN apk add --no-cache -U tzdata\n ---> Running in 76c7cff057a8\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/1) Installing tzdata (2022f-r1)\nOK: 10 MiB in 16 packages\nRemoving intermediate container 76c7cff057a8\n ---> d7f80b00e86c\nStep 19/22 : COPY --from=backend /src/alice-lg/cmd/alice-lg/alice-lg-linux-amd64 /usr/bin/alice-lg\n ---> 972b5b346629\nStep 20/22 : RUN ls -lsha /usr/bin/alice-lg\n ---> Running in 9c92d60e3897\n 26652 -rwxr-xr-x    1 root     root       26.0M Dec 29 06:05 /usr/bin/alice-lg\nRemoving intermediate container 9c92d60e3897\n ---> a7457b7074f7\nStep 21/22 : EXPOSE 7340:7340\n ---> Running in d0f5cb635616\nRemoving intermediate container d0f5cb635616\n ---> add6f41ec720\nStep 22/22 : CMD [\"/usr/bin/alice-lg\"]\n ---> Running in 81e6169e64fb\nRemoving intermediate container 81e6169e64fb\n ---> e9decfe0b196\nSuccessfully built e9decfe0b196\nSuccessfully tagged alice-lg:latest\n","stderr":"","imageSize":35490394},"endTime":1672293957425}