{"repository":"https://github.com/ipfs/kubo","dockerfilePath":"Dockerfile","startTime":1672622244896,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/ipfs/kubo'...\n","error":null,"commit":"430a65ad5f78dc2aed0f54946b2c5922fa4b1ee1"},"originalBuild":{"startTimestamp":1672622246185,"endTimestamp":1672622382265,"error":null,"stdout":"Sending build context to Docker daemon  6.303MB\r\r\nStep 1/41 : FROM golang:1.19.1-buster\n1.19.1-buster: Pulling from library/golang\n86467c57892b: Pulling fs layer\n2b34aaa3cba7: Pulling fs layer\n5a443ab54eaa: Pulling fs layer\ne6cacf42b567: Pulling fs layer\n97379520018c: Pulling fs layer\na9018bf51685: Pulling fs layer\n416360429053: Pulling fs layer\n97379520018c: Waiting\na9018bf51685: Waiting\n416360429053: Waiting\ne6cacf42b567: Waiting\n2b34aaa3cba7: Verifying Checksum\n2b34aaa3cba7: Download complete\n5a443ab54eaa: Verifying Checksum\n5a443ab54eaa: Download complete\n86467c57892b: Verifying Checksum\n86467c57892b: Download complete\n97379520018c: Verifying Checksum\n97379520018c: Download complete\n416360429053: Verifying Checksum\n416360429053: Download complete\ne6cacf42b567: Verifying Checksum\ne6cacf42b567: Download complete\n86467c57892b: Pull complete\na9018bf51685: Verifying Checksum\na9018bf51685: Download complete\n2b34aaa3cba7: Pull complete\n5a443ab54eaa: Pull complete\ne6cacf42b567: Pull complete\n97379520018c: Pull complete\na9018bf51685: Pull complete\n416360429053: Pull complete\nDigest: sha256:4b2498de3f543907f4954584ce12558fc3cf80844907f3e7b9f7e98c3223b949\nStatus: Downloaded newer image for golang:1.19.1-buster\n ---> b87d16c02fec\nStep 2/41 : LABEL maintainer=\"Steven Allen <steven@stebalien.com>\"\n ---> Running in c71a476bc855\nRemoving intermediate container c71a476bc855\n ---> 035914203278\nStep 3/41 : RUN apt-get update && apt-get install -y   libssl-dev   ca-certificates   fuse\n ---> Running in 3fd7b7ea6f54\nGet:1 http://deb.debian.org/debian buster InRelease [122 kB]\nGet:2 http://deb.debian.org/debian-security buster/updates InRelease [34.8 kB]\nGet:3 http://deb.debian.org/debian buster-updates InRelease [56.6 kB]\nGet:4 http://deb.debian.org/debian buster/main amd64 Packages [7909 kB]\nGet:5 http://deb.debian.org/debian-security buster/updates/main amd64 Packages [422 kB]\nGet:6 http://deb.debian.org/debian buster-updates/main amd64 Packages [8788 B]\nFetched 8553 kB in 1s (6036 kB/s)\nReading package lists...\nReading package lists...\nBuilding dependency tree...\nReading state information...\nca-certificates is already the newest version (20200601~deb10u2).\nSuggested packages:\n  libssl-doc\nThe following NEW packages will be installed:\n  fuse libfuse2 libssl-dev\n0 upgraded, 3 newly installed, 0 to remove and 23 not upgraded.\nNeed to get 2008 kB of archives.\nAfter this operation, 8614 kB of additional disk space will be used.\nGet:1 http://deb.debian.org/debian buster/main amd64 libfuse2 amd64 2.9.9-1+deb10u1 [128 kB]\nGet:2 http://deb.debian.org/debian buster/main amd64 fuse amd64 2.9.9-1+deb10u1 [72.3 kB]\nGet:3 http://deb.debian.org/debian buster/main amd64 libssl-dev amd64 1.1.1n-0+deb10u3 [1808 kB]\n\u001b[91mdebconf: delaying package configuration, since apt-utils is not installed\n\u001b[0mFetched 2008 kB in 0s (51.2 MB/s)\nSelecting previously unselected package libfuse2:amd64.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 15421 files and directories currently installed.)\r\nPreparing to unpack .../libfuse2_2.9.9-1+deb10u1_amd64.deb ...\r\nUnpacking libfuse2:amd64 (2.9.9-1+deb10u1) ...\r\nSelecting previously unselected package fuse.\r\nPreparing to unpack .../fuse_2.9.9-1+deb10u1_amd64.deb ...\r\nUnpacking fuse (2.9.9-1+deb10u1) ...\r\nSelecting previously unselected package libssl-dev:amd64.\r\nPreparing to unpack .../libssl-dev_1.1.1n-0+deb10u3_amd64.deb ...\r\nUnpacking libssl-dev:amd64 (1.1.1n-0+deb10u3) ...\r\nSetting up libfuse2:amd64 (2.9.9-1+deb10u1) ...\r\nSetting up libssl-dev:amd64 (1.1.1n-0+deb10u3) ...\r\nSetting up fuse (2.9.9-1+deb10u1) ...\r\nProcessing triggers for libc-bin (2.28-10+deb10u1) ...\r\nRemoving intermediate container 3fd7b7ea6f54\n ---> facf0644f3e5\nStep 4/41 : ENV SRC_DIR /kubo\n ---> Running in f1a2a57d7240\nRemoving intermediate container f1a2a57d7240\n ---> 4333dddbc981\nStep 5/41 : COPY go.mod go.sum $SRC_DIR/\n ---> 380a42ae348f\nStep 6/41 : RUN cd $SRC_DIR   && go mod download\n ---> Running in f112ee80ecea\nRemoving intermediate container f112ee80ecea\n ---> 2580df8cd7a5\nStep 7/41 : COPY . $SRC_DIR\n ---> 773b390d9535\nStep 8/41 : ARG IPFS_PLUGINS\n ---> Running in f4b6b60c1e4b\nRemoving intermediate container f4b6b60c1e4b\n ---> 7bd79061c14a\nStep 9/41 : RUN cd $SRC_DIR   && mkdir -p .git/objects   && GOFLAGS=-buildvcs=false make build GOTAGS=openssl IPFS_PLUGINS=$IPFS_PLUGINS\n ---> Running in 7a0627f89b01\ngo version go1.19.1 linux/amd64\nbin/check_go_version 1.18\nplugin/loader/preload.sh > plugin/loader/preload.go\ngo fmt plugin/loader/preload.go >/dev/null\ngo build -buildvcs=false \"-trimpath\" -ldflags=\"-X \"github.com/ipfs/kubo\".CurrentCommit=430a65a\" -tags=\"openssl\" -o \"cmd/ipfs/ipfs\" \"github.com/ipfs/kubo/cmd/ipfs\"\nRemoving intermediate container 7a0627f89b01\n ---> 61cf820a3b5b\nStep 10/41 : ENV SUEXEC_VERSION v0.2\n ---> Running in f61297790d5b\nRemoving intermediate container f61297790d5b\n ---> 8678b4d67050\nStep 11/41 : ENV TINI_VERSION v0.19.0\n ---> Running in b30b91b43744\nRemoving intermediate container b30b91b43744\n ---> 062cf1f2b4f8\nStep 12/41 : RUN set -eux;     dpkgArch=\"$(dpkg --print-architecture)\";     case \"${dpkgArch##*-}\" in         \"amd64\" | \"armhf\" | \"arm64\") tiniArch=\"tini-static-$dpkgArch\" ;;        *) echo >&2 \"unsupported architecture: ${dpkgArch}\"; exit 1 ;;     esac;   cd /tmp   && git clone https://github.com/ncopa/su-exec.git   && cd su-exec   && git checkout -q $SUEXEC_VERSION   && make su-exec-static   && cd /tmp   && wget -q -O tini https://github.com/krallin/tini/releases/download/$TINI_VERSION/$tiniArch   && chmod +x tini\n ---> Running in dc275a8d634c\n\u001b[91m+ dpkg --print-architecture\n\u001b[0m\u001b[91m+ dpkgArch=amd64\n+ tiniArch=tini-static-amd64\n+ cd /tmp\n\u001b[0m\u001b[91m+ git clone https://github.com/ncopa/su-exec.git\n\u001b[0m\u001b[91mCloning into 'su-exec'...\n\u001b[0m\u001b[91m+ cd su-exec\n+ git checkout -q v0.2\n\u001b[0m\u001b[91m+ make su-exec-static\n\u001b[0mcc -Wall -Werror -g -o su-exec-static su-exec.c -static \n\u001b[91m/usr/bin/ld: /tmp/ccIVZTy4.o: in function `main':\u001b[0m\u001b[91m\n/tmp/su-exec/su-exec.c:83:\u001b[0m\u001b[91m warning: Using 'getgrouplist'\u001b[0m\u001b[91m in\u001b[0m\u001b[91m statically linked \u001b[0m\u001b[91mapplications \u001b[0m\u001b[91mrequires \u001b[0m\u001b[91mat \u001b[0m\u001b[91mruntime the shared\u001b[0m\u001b[91m libraries\u001b[0m\u001b[91m from the\u001b[0m\u001b[91m glibc \u001b[0m\u001b[91mversion used \u001b[0m\u001b[91mfor \u001b[0m\u001b[91mlinking\n\u001b[0m\u001b[91m/usr/bin/\u001b[0m\u001b[91mld: /\u001b[0m\u001b[91mtmp/su-exec\u001b[0m\u001b[91m/su-exec.c\u001b[0m\u001b[91m:66\u001b[0m\u001b[91m: warning: \u001b[0m\u001b[91mUsing \u001b[0m\u001b[91m'getgrgid' in statically\u001b[0m\u001b[91m linked\u001b[0m\u001b[91m applications requires\u001b[0m\u001b[91m at\u001b[0m\u001b[91m runtime \u001b[0m\u001b[91mthe shared \u001b[0m\u001b[91mlibraries \u001b[0m\u001b[91mfrom the glibc version\u001b[0m\u001b[91m used for linking\n/usr/bin/ld: /tmp/su-exec/\u001b[0m\u001b[91msu-exec.c:62:\u001b[0m\u001b[91m warning: Using 'getgrnam'\u001b[0m\u001b[91m in statically \u001b[0m\u001b[91mlinked applications requires at\u001b[0m\u001b[91m runtime the shared libraries from\u001b[0m\u001b[91m the glibc version used \u001b[0m\u001b[91mfor linking\n\u001b[0m\u001b[91m/usr\u001b[0m\u001b[91m/bin/\u001b[0m\u001b[91mld: /tmp/su-exec/su\u001b[0m\u001b[91m-exec.c:43: warning: Using 'getpwnam' \u001b[0m\u001b[91min statically linked applications requires at runtime the shared \u001b[0m\u001b[91mlibraries from the \u001b[0m\u001b[91mglibc version used \u001b[0m\u001b[91mfor linking\u001b[0m\u001b[91m\n/usr/bin\u001b[0m\u001b[91m/\u001b[0m\u001b[91mld: /tmp/su-exec/\u001b[0m\u001b[91msu-exec.c:49: warning: Using 'getpwuid'\u001b[0m\u001b[91m in statically linked \u001b[0m\u001b[91mapplications requires at runtime \u001b[0m\u001b[91mthe \u001b[0m\u001b[91mshared\u001b[0m\u001b[91m libraries \u001b[0m\u001b[91mfrom \u001b[0m\u001b[91mthe glibc \u001b[0m\u001b[91mversion \u001b[0m\u001b[91mused for\u001b[0m\u001b[91m linking\u001b[0m\u001b[91m\n\u001b[0m\u001b[91m+ cd /tmp\n\u001b[0m\u001b[91m+ wget -q -O tini https://github.com/krallin/tini/releases/download/v0.19.0/tini-static-amd64\n\u001b[0m\u001b[91m+ chmod +x tini\n\u001b[0mRemoving intermediate container dc275a8d634c\n ---> 311b2e8eadbf\nStep 13/41 : FROM busybox:1.31.1-glibc\n1.31.1-glibc: Pulling from library/busybox\nb2d221698d1d: Pulling fs layer\nb2d221698d1d: Verifying Checksum\nb2d221698d1d: Download complete\nb2d221698d1d: Pull complete\nDigest: sha256:1f81263701cddf6402afe9f33fca0266d9fff379e59b1748f33d3072da71ee85\nStatus: Downloaded newer image for busybox:1.31.1-glibc\n ---> 7a2331af2292\nStep 14/41 : LABEL maintainer=\"Steven Allen <steven@stebalien.com>\"\n ---> Running in 9dfe06e5474e\nRemoving intermediate container 9dfe06e5474e\n ---> ac1af366a740\nStep 15/41 : ENV SRC_DIR /kubo\n ---> Running in a21d842304e1\nRemoving intermediate container a21d842304e1\n ---> b173de19ae3d\nStep 16/41 : COPY --from=0 $SRC_DIR/cmd/ipfs/ipfs /usr/local/bin/ipfs\n ---> 079a22b750a2\nStep 17/41 : COPY --from=0 $SRC_DIR/bin/container_daemon /usr/local/bin/start_ipfs\n ---> dda0fa10c766\nStep 18/41 : COPY --from=0 $SRC_DIR/bin/container_init_run /usr/local/bin/container_init_run\n ---> 045227598410\nStep 19/41 : COPY --from=0 /tmp/su-exec/su-exec-static /sbin/su-exec\n ---> 01fdcc8b3cd0\nStep 20/41 : COPY --from=0 /tmp/tini /sbin/tini\n ---> 4f040f7dad8c\nStep 21/41 : COPY --from=0 /bin/fusermount /usr/local/bin/fusermount\n ---> d3e27d0db407\nStep 22/41 : COPY --from=0 /etc/ssl/certs /etc/ssl/certs\n ---> 8af690c6944d\nStep 23/41 : RUN chmod 4755 /usr/local/bin/fusermount\n ---> Running in d9c739824a81\nRemoving intermediate container d9c739824a81\n ---> 15a056216380\nStep 24/41 : RUN chmod 0755 /usr/local/bin/start_ipfs\n ---> Running in adfb11075f83\nRemoving intermediate container adfb11075f83\n ---> 99aa58e9086f\nStep 25/41 : COPY --from=0 /lib/*-linux-gnu*/libdl.so.2 /lib/\n ---> a924d699625d\nStep 26/41 : COPY --from=0 /usr/lib/*-linux-gnu*/libssl.so* /usr/lib/\n ---> 83d596aa8567\nStep 27/41 : COPY --from=0 /usr/lib/*-linux-gnu*/libcrypto.so* /usr/lib/\n ---> c5934caaaad7\nStep 28/41 : EXPOSE 4001\n ---> Running in 8d4807cc0312\nRemoving intermediate container 8d4807cc0312\n ---> ab17e46afcdf\nStep 29/41 : EXPOSE 4001/udp\n ---> Running in 6a14ebeaec44\nRemoving intermediate container 6a14ebeaec44\n ---> 2a4712eada06\nStep 30/41 : EXPOSE 5001\n ---> Running in d51ecd75f8ab\nRemoving intermediate container d51ecd75f8ab\n ---> a22dc5783dcb\nStep 31/41 : EXPOSE 8080\n ---> Running in dee8d7b044e6\nRemoving intermediate container dee8d7b044e6\n ---> 5106e67a6979\nStep 32/41 : EXPOSE 8081\n ---> Running in 31fca3dd15b1\nRemoving intermediate container 31fca3dd15b1\n ---> 3ee6dcda8490\nStep 33/41 : ENV IPFS_PATH /data/ipfs\n ---> Running in 62b8e9ad4741\nRemoving intermediate container 62b8e9ad4741\n ---> 7dcbb2b0933d\nStep 34/41 : RUN mkdir -p $IPFS_PATH   && adduser -D -h $IPFS_PATH -u 1000 -G users ipfs   && chown ipfs:users $IPFS_PATH\n ---> Running in 2cf8e46adc61\nRemoving intermediate container 2cf8e46adc61\n ---> 31f760c555f2\nStep 35/41 : RUN mkdir /ipfs /ipns   && chown ipfs:users /ipfs /ipns\n ---> Running in c6983dc7c1db\nRemoving intermediate container c6983dc7c1db\n ---> cce86cbf603c\nStep 36/41 : RUN mkdir /container-init.d   && chown ipfs:users /container-init.d\n ---> Running in ee8bb717a1d2\nRemoving intermediate container ee8bb717a1d2\n ---> 75ae6c6a8a18\nStep 37/41 : VOLUME $IPFS_PATH\n ---> Running in 092ab8a694e9\nRemoving intermediate container 092ab8a694e9\n ---> 6fdad6d191cc\nStep 38/41 : ENV IPFS_LOGGING \"\"\n ---> Running in a2109c708083\nRemoving intermediate container a2109c708083\n ---> d44a7db9228d\nStep 39/41 : ENTRYPOINT [\"/sbin/tini\", \"--\", \"/usr/local/bin/start_ipfs\"]\n ---> Running in abaa63632b91\nRemoving intermediate container abaa63632b91\n ---> 6c315a85b630\nStep 40/41 : HEALTHCHECK --interval=30s --timeout=3s --start-period=5s --retries=3   CMD ipfs dag stat /ipfs/QmUNLLsPACCz1vLxQVkXqqLX5R1X345qqfHbsf67hvA3Nn || exit 1\n ---> Running in 82e5f7d54fd4\nRemoving intermediate container 82e5f7d54fd4\n ---> a95df77973d9\nStep 41/41 : CMD [\"daemon\", \"--migrate=true\", \"--agent-version-suffix=docker\"]\n ---> Running in 0d597d4d4931\nRemoving intermediate container 0d597d4d4931\n ---> 8dc80fe23140\nSuccessfully built 8dc80fe23140\nSuccessfully tagged kubo:latest\n","stderr":"","imageSize":96858959},"repair":{"violations":[{"name":"ruleAptGetInstallUseNoRec","position":{"start":4,"end":7,"columnStart":22,"columnEnd":6}},{"name":"ruleAptGetInstallThenRemoveAptLists","position":{"start":4,"end":7,"columnStart":22,"columnEnd":6}}],"repairedDockerfile":"FROM golang:1.19.1-buster\nLABEL maintainer=\"Steven Allen <steven@stebalien.com>\"\n\n# Install deps\nRUN apt-get update && apt-get install --no-install-recommends -y \\\n  libssl-dev \\\n  ca-certificates \\\n  fuse\n\nENV SRC_DIR /kubo\n\n# Download packages first so they can be cached.\nCOPY go.mod go.sum $SRC_DIR/\nRUN cd $SRC_DIR \\\n  && go mod download\n\nCOPY . $SRC_DIR\n\n# Preload an in-tree but disabled-by-default plugin by adding it to the IPFS_PLUGINS variable\n# e.g. docker build --build-arg IPFS_PLUGINS=\"foo bar baz\"\nARG IPFS_PLUGINS\n\n# Build the thing.\n# Also: fix getting HEAD commit hash via git rev-parse.\nRUN cd $SRC_DIR \\\n  && mkdir -p .git/objects \\\n  && GOFLAGS=-buildvcs=false make build GOTAGS=openssl IPFS_PLUGINS=$IPFS_PLUGINS\n\n# Get su-exec, a very minimal tool for dropping privileges,\n# and tini, a very minimal init daemon for containers\nENV SUEXEC_VERSION v0.2\nENV TINI_VERSION v0.19.0\nRUN set -eux; \\\n    dpkgArch=\"$(dpkg --print-architecture)\"; \\\n    case \"${dpkgArch##*-}\" in \\\n        \"amd64\" | \"armhf\" | \"arm64\") tiniArch=\"tini-static-$dpkgArch\" ;;\\\n        *) echo >&2 \"unsupported architecture: ${dpkgArch}\"; exit 1 ;; \\\n    esac; \\\n  cd /tmp \\\n  && git clone https://github.com/ncopa/su-exec.git \\\n  && cd su-exec \\\n  && git checkout -q $SUEXEC_VERSION \\\n  && make su-exec-static \\\n  && cd /tmp \\\n  && wget -q -O tini https://github.com/krallin/tini/releases/download/$TINI_VERSION/$tiniArch \\\n  && chmod +x tini\n\n# Now comes the actual target image, which aims to be as small as possible.\nFROM busybox:1.31.1-glibc\nLABEL maintainer=\"Steven Allen <steven@stebalien.com>\"\n\n# Get the ipfs binary, entrypoint script, and TLS CAs from the build container.\nENV SRC_DIR /kubo\nCOPY --from=0 $SRC_DIR/cmd/ipfs/ipfs /usr/local/bin/ipfs\nCOPY --from=0 $SRC_DIR/bin/container_daemon /usr/local/bin/start_ipfs\nCOPY --from=0 $SRC_DIR/bin/container_init_run /usr/local/bin/container_init_run\nCOPY --from=0 /tmp/su-exec/su-exec-static /sbin/su-exec\nCOPY --from=0 /tmp/tini /sbin/tini\nCOPY --from=0 /bin/fusermount /usr/local/bin/fusermount\nCOPY --from=0 /etc/ssl/certs /etc/ssl/certs\n\n# Add suid bit on fusermount so it will run properly\nRUN chmod 4755 /usr/local/bin/fusermount\n\n# Fix permissions on start_ipfs (ignore the build machine's permissions)\nRUN chmod 0755 /usr/local/bin/start_ipfs\n\n# This shared lib (part of glibc) doesn't seem to be included with busybox.\nCOPY --from=0 /lib/*-linux-gnu*/libdl.so.2 /lib/\n\n# Copy over SSL libraries.\nCOPY --from=0 /usr/lib/*-linux-gnu*/libssl.so* /usr/lib/\nCOPY --from=0 /usr/lib/*-linux-gnu*/libcrypto.so* /usr/lib/\n\n# Swarm TCP; should be exposed to the public\nEXPOSE 4001\n# Swarm UDP; should be exposed to the public\nEXPOSE 4001/udp\n# Daemon API; must not be exposed publicly but to client services under you control\nEXPOSE 5001\n# Web Gateway; can be exposed publicly with a proxy, e.g. as https://ipfs.example.org\nEXPOSE 8080\n# Swarm Websockets; must be exposed publicly when the node is listening using the websocket transport (/ipX/.../tcp/8081/ws).\nEXPOSE 8081\n\n# Create the fs-repo directory and switch to a non-privileged user.\nENV IPFS_PATH /data/ipfs\nRUN mkdir -p $IPFS_PATH \\\n  && adduser -D -h $IPFS_PATH -u 1000 -G users ipfs \\\n  && chown ipfs:users $IPFS_PATH\n\n# Create mount points for `ipfs mount` command\nRUN mkdir /ipfs /ipns \\\n  && chown ipfs:users /ipfs /ipns\n\n# Create the init scripts directory\nRUN mkdir /container-init.d \\\n  && chown ipfs:users /container-init.d\n\n# Expose the fs-repo as a volume.\n# start_ipfs initializes an fs-repo if none is mounted.\n# Important this happens after the USER directive so permissions are correct.\nVOLUME $IPFS_PATH\n\n# The default logging level\nENV IPFS_LOGGING \"\"\n\n# This just makes sure that:\n# 1. There's an fs-repo, and initializes one if there isn't.\n# 2. The API and Gateway are accessible from outside the container.\nENTRYPOINT [\"/sbin/tini\", \"--\", \"/usr/local/bin/start_ipfs\"]\n\n# Healthcheck for the container\n# QmUNLLsPACCz1vLxQVkXqqLX5R1X345qqfHbsf67hvA3Nn is the CID of empty folder\nHEALTHCHECK --interval=30s --timeout=3s --start-period=5s --retries=3 \\\n  CMD ipfs dag stat /ipfs/QmUNLLsPACCz1vLxQVkXqqLX5R1X345qqfHbsf67hvA3Nn || exit 1\n\n# Execute the daemon subcommand by default\nCMD [\"daemon\", \"--migrate=true\", \"--agent-version-suffix=docker\"]\n"},"repairedBuild":{"startTimestamp":1672622382827,"endTimestamp":1672622503193,"error":null,"stdout":"Sending build context to Docker daemon  6.303MB\r\r\nStep 1/41 : FROM golang:1.19.1-buster\n ---> b87d16c02fec\nStep 2/41 : LABEL maintainer=\"Steven Allen <steven@stebalien.com>\"\n ---> Running in 5b044c46eb2c\nRemoving intermediate container 5b044c46eb2c\n ---> f83bf3ff55ce\nStep 3/41 : RUN apt-get update && apt-get install --no-install-recommends -y   libssl-dev   ca-certificates   fuse\n ---> Running in eca166b97177\nGet:1 http://deb.debian.org/debian buster InRelease [122 kB]\nGet:2 http://deb.debian.org/debian-security buster/updates InRelease [34.8 kB]\nGet:3 http://deb.debian.org/debian buster-updates InRelease [56.6 kB]\nGet:4 http://deb.debian.org/debian buster/main amd64 Packages [7909 kB]\nGet:5 http://deb.debian.org/debian-security buster/updates/main amd64 Packages [422 kB]\nGet:6 http://deb.debian.org/debian buster-updates/main amd64 Packages [8788 B]\nFetched 8553 kB in 1s (6149 kB/s)\nReading package lists...\nReading package lists...\nBuilding dependency tree...\nReading state information...\nca-certificates is already the newest version (20200601~deb10u2).\nSuggested packages:\n  libssl-doc\nThe following NEW packages will be installed:\n  fuse libfuse2 libssl-dev\n0 upgraded, 3 newly installed, 0 to remove and 23 not upgraded.\nNeed to get 2008 kB of archives.\nAfter this operation, 8614 kB of additional disk space will be used.\nGet:1 http://deb.debian.org/debian buster/main amd64 libfuse2 amd64 2.9.9-1+deb10u1 [128 kB]\nGet:2 http://deb.debian.org/debian buster/main amd64 fuse amd64 2.9.9-1+deb10u1 [72.3 kB]\nGet:3 http://deb.debian.org/debian buster/main amd64 libssl-dev amd64 1.1.1n-0+deb10u3 [1808 kB]\n\u001b[91mdebconf: delaying package configuration, since apt-utils is not installed\n\u001b[0mFetched 2008 kB in 0s (48.4 MB/s)\nSelecting previously unselected package libfuse2:amd64.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 15421 files and directories currently installed.)\r\nPreparing to unpack .../libfuse2_2.9.9-1+deb10u1_amd64.deb ...\r\nUnpacking libfuse2:amd64 (2.9.9-1+deb10u1) ...\r\nSelecting previously unselected package fuse.\r\nPreparing to unpack .../fuse_2.9.9-1+deb10u1_amd64.deb ...\r\nUnpacking fuse (2.9.9-1+deb10u1) ...\r\nSelecting previously unselected package libssl-dev:amd64.\r\nPreparing to unpack .../libssl-dev_1.1.1n-0+deb10u3_amd64.deb ...\r\nUnpacking libssl-dev:amd64 (1.1.1n-0+deb10u3) ...\r\nSetting up libfuse2:amd64 (2.9.9-1+deb10u1) ...\r\nSetting up libssl-dev:amd64 (1.1.1n-0+deb10u3) ...\r\nSetting up fuse (2.9.9-1+deb10u1) ...\r\nProcessing triggers for libc-bin (2.28-10+deb10u1) ...\r\nRemoving intermediate container eca166b97177\n ---> 65d928084599\nStep 4/41 : ENV SRC_DIR /kubo\n ---> Running in 2011f5721c28\nRemoving intermediate container 2011f5721c28\n ---> 8d7d8a6fe0dc\nStep 5/41 : COPY go.mod go.sum $SRC_DIR/\n ---> be7a0edf1472\nStep 6/41 : RUN cd $SRC_DIR   && go mod download\n ---> Running in f399c2e6f775\nRemoving intermediate container f399c2e6f775\n ---> ee29b1d1cc82\nStep 7/41 : COPY . $SRC_DIR\n ---> 9a3248e0eeb3\nStep 8/41 : ARG IPFS_PLUGINS\n ---> Running in 63078c41e66a\nRemoving intermediate container 63078c41e66a\n ---> 58c7596bd420\nStep 9/41 : RUN cd $SRC_DIR   && mkdir -p .git/objects   && GOFLAGS=-buildvcs=false make build GOTAGS=openssl IPFS_PLUGINS=$IPFS_PLUGINS\n ---> Running in 4bf21a3292e2\ngo version go1.19.1 linux/amd64\nbin/check_go_version 1.18\nplugin/loader/preload.sh > plugin/loader/preload.go\ngo fmt plugin/loader/preload.go >/dev/null\ngo build -buildvcs=false \"-trimpath\" -ldflags=\"-X \"github.com/ipfs/kubo\".CurrentCommit=430a65a\" -tags=\"openssl\" -o \"cmd/ipfs/ipfs\" \"github.com/ipfs/kubo/cmd/ipfs\"\nRemoving intermediate container 4bf21a3292e2\n ---> 2bdfd670b077\nStep 10/41 : ENV SUEXEC_VERSION v0.2\n ---> Running in a14b097deb3d\nRemoving intermediate container a14b097deb3d\n ---> 2e8aa888373f\nStep 11/41 : ENV TINI_VERSION v0.19.0\n ---> Running in 7ef210b6b971\nRemoving intermediate container 7ef210b6b971\n ---> e7d42bb2406f\nStep 12/41 : RUN set -eux;     dpkgArch=\"$(dpkg --print-architecture)\";     case \"${dpkgArch##*-}\" in         \"amd64\" | \"armhf\" | \"arm64\") tiniArch=\"tini-static-$dpkgArch\" ;;        *) echo >&2 \"unsupported architecture: ${dpkgArch}\"; exit 1 ;;     esac;   cd /tmp   && git clone https://github.com/ncopa/su-exec.git   && cd su-exec   && git checkout -q $SUEXEC_VERSION   && make su-exec-static   && cd /tmp   && wget -q -O tini https://github.com/krallin/tini/releases/download/$TINI_VERSION/$tiniArch   && chmod +x tini\n ---> Running in 7501018c0fc0\n\u001b[91m+ dpkg --print-architecture\n\u001b[0m\u001b[91m+ dpkgArch=amd64\n+ tiniArch=tini-static-amd64\n+ cd /tmp\n\u001b[0m\u001b[91m+ git clone https://github.com/ncopa/su-exec.git\n\u001b[0m\u001b[91mCloning into 'su-exec'...\n\u001b[0m\u001b[91m+ cd su-exec\n+ git checkout -q v0.2\n\u001b[0m\u001b[91m+ make su-exec-static\n\u001b[0mcc -Wall -Werror -g -o su-exec-static su-exec.c -static \n\u001b[91m/usr/bin/ld: /tmp/ccUg5AfT.o: in function `main':\n/tmp/su-exec/su-exec.c:83: warning: Using '\u001b[0m\u001b[91mgetgrouplist' in statically linked applications \u001b[0m\u001b[91mrequires at runtime the shared libraries from the glibc\u001b[0m\u001b[91m version\u001b[0m\u001b[91m used \u001b[0m\u001b[91mfor \u001b[0m\u001b[91mlinking\n/\u001b[0m\u001b[91musr/bin/ld\u001b[0m\u001b[91m: /tmp/\u001b[0m\u001b[91msu-\u001b[0m\u001b[91mexec/su-exec.c:66:\u001b[0m\u001b[91m warning: Using 'getgrgid' \u001b[0m\u001b[91min statically linked\u001b[0m\u001b[91m applications \u001b[0m\u001b[91mrequires \u001b[0m\u001b[91mat runtime\u001b[0m\u001b[91m the shared libraries \u001b[0m\u001b[91mfrom the\u001b[0m\u001b[91m glibc version\u001b[0m\u001b[91m used\u001b[0m\u001b[91m for\u001b[0m\u001b[91m linking\n/usr/\u001b[0m\u001b[91mbin/ld:\u001b[0m\u001b[91m /tmp/su\u001b[0m\u001b[91m-exec/su-exec.c\u001b[0m\u001b[91m:62: warning: Using 'getgrnam\u001b[0m\u001b[91m' in statically\u001b[0m\u001b[91m linked applications requires at runtime the shared \u001b[0m\u001b[91mlibraries from the glibc version used for linking\n/usr/bin\u001b[0m\u001b[91m/ld: \u001b[0m\u001b[91m/tmp/su-exec/su-exec.c\u001b[0m\u001b[91m:43: warning: Using\u001b[0m\u001b[91m 'getpwnam\u001b[0m\u001b[91m' in statically linked applications requires at runtime the \u001b[0m\u001b[91mshared libraries from the \u001b[0m\u001b[91mglibc version used for linking\n\u001b[0m\u001b[91m/usr/bin/ld: /tmp/su-\u001b[0m\u001b[91mexec/su-\u001b[0m\u001b[91mexec.c:49: warning: Using 'getpwuid\u001b[0m\u001b[91m' in \u001b[0m\u001b[91mstatically linked applications requires at\u001b[0m\u001b[91m runtime the\u001b[0m\u001b[91m shared libraries \u001b[0m\u001b[91mfrom the glibc version used for\u001b[0m\u001b[91m linking\n\u001b[0m\u001b[91m+ cd /tmp\n\u001b[0m\u001b[91m+ wget -q -O\u001b[0m\u001b[91m tini https://github.com/krallin/tini/releases/download/v0.19.0/tini-static-amd64\n\u001b[0m\u001b[91m+ chmod +x tini\n\u001b[0mRemoving intermediate container 7501018c0fc0\n ---> f26c103b3d8f\nStep 13/41 : FROM busybox:1.31.1-glibc\n ---> 7a2331af2292\nStep 14/41 : LABEL maintainer=\"Steven Allen <steven@stebalien.com>\"\n ---> Running in 3a4cf19e2f68\nRemoving intermediate container 3a4cf19e2f68\n ---> a1b183338c06\nStep 15/41 : ENV SRC_DIR /kubo\n ---> Running in c6ad14e1f55c\nRemoving intermediate container c6ad14e1f55c\n ---> b0eb14e22d53\nStep 16/41 : COPY --from=0 $SRC_DIR/cmd/ipfs/ipfs /usr/local/bin/ipfs\n ---> 4778c2286a98\nStep 17/41 : COPY --from=0 $SRC_DIR/bin/container_daemon /usr/local/bin/start_ipfs\n ---> 398cf332a6a4\nStep 18/41 : COPY --from=0 $SRC_DIR/bin/container_init_run /usr/local/bin/container_init_run\n ---> a75541ae974e\nStep 19/41 : COPY --from=0 /tmp/su-exec/su-exec-static /sbin/su-exec\n ---> 570703e03588\nStep 20/41 : COPY --from=0 /tmp/tini /sbin/tini\n ---> 1df2e054d425\nStep 21/41 : COPY --from=0 /bin/fusermount /usr/local/bin/fusermount\n ---> d93525ed9028\nStep 22/41 : COPY --from=0 /etc/ssl/certs /etc/ssl/certs\n ---> b48c125b82f9\nStep 23/41 : RUN chmod 4755 /usr/local/bin/fusermount\n ---> Running in 55095a846600\nRemoving intermediate container 55095a846600\n ---> be12eb235368\nStep 24/41 : RUN chmod 0755 /usr/local/bin/start_ipfs\n ---> Running in b3e4704336e2\nRemoving intermediate container b3e4704336e2\n ---> b32e2c0d944c\nStep 25/41 : COPY --from=0 /lib/*-linux-gnu*/libdl.so.2 /lib/\n ---> f1c9c2fb7692\nStep 26/41 : COPY --from=0 /usr/lib/*-linux-gnu*/libssl.so* /usr/lib/\n ---> a91b6ac944a7\nStep 27/41 : COPY --from=0 /usr/lib/*-linux-gnu*/libcrypto.so* /usr/lib/\n ---> af684a48523a\nStep 28/41 : EXPOSE 4001\n ---> Running in 47490664dda1\nRemoving intermediate container 47490664dda1\n ---> cbbfa5d8e740\nStep 29/41 : EXPOSE 4001/udp\n ---> Running in 1fb732f44e71\nRemoving intermediate container 1fb732f44e71\n ---> 7c8629c8e586\nStep 30/41 : EXPOSE 5001\n ---> Running in df755bf1471e\nRemoving intermediate container df755bf1471e\n ---> 0b25c46958ff\nStep 31/41 : EXPOSE 8080\n ---> Running in 49da33592ed0\nRemoving intermediate container 49da33592ed0\n ---> aef55285ef67\nStep 32/41 : EXPOSE 8081\n ---> Running in 34aa15d383b5\nRemoving intermediate container 34aa15d383b5\n ---> 9de052a475ca\nStep 33/41 : ENV IPFS_PATH /data/ipfs\n ---> Running in 796a542fd936\nRemoving intermediate container 796a542fd936\n ---> 33e26f38c6be\nStep 34/41 : RUN mkdir -p $IPFS_PATH   && adduser -D -h $IPFS_PATH -u 1000 -G users ipfs   && chown ipfs:users $IPFS_PATH\n ---> Running in 8ab35e49d4fb\nRemoving intermediate container 8ab35e49d4fb\n ---> a488088b7b12\nStep 35/41 : RUN mkdir /ipfs /ipns   && chown ipfs:users /ipfs /ipns\n ---> Running in 4ac819345630\nRemoving intermediate container 4ac819345630\n ---> 9604edf1c4e7\nStep 36/41 : RUN mkdir /container-init.d   && chown ipfs:users /container-init.d\n ---> Running in 4867e4b9a0f7\nRemoving intermediate container 4867e4b9a0f7\n ---> 7bd43c9a9cd2\nStep 37/41 : VOLUME $IPFS_PATH\n ---> Running in 1602d93fffea\nRemoving intermediate container 1602d93fffea\n ---> 72cb5518404e\nStep 38/41 : ENV IPFS_LOGGING \"\"\n ---> Running in 7e6c8afbb36e\nRemoving intermediate container 7e6c8afbb36e\n ---> 386d0d76eb13\nStep 39/41 : ENTRYPOINT [\"/sbin/tini\", \"--\", \"/usr/local/bin/start_ipfs\"]\n ---> Running in ce13e37c549c\nRemoving intermediate container ce13e37c549c\n ---> 1de3113cec5e\nStep 40/41 : HEALTHCHECK --interval=30s --timeout=3s --start-period=5s --retries=3   CMD ipfs dag stat /ipfs/QmUNLLsPACCz1vLxQVkXqqLX5R1X345qqfHbsf67hvA3Nn || exit 1\n ---> Running in 7f01c966ec6f\nRemoving intermediate container 7f01c966ec6f\n ---> 6656fdc3afe3\nStep 41/41 : CMD [\"daemon\", \"--migrate=true\", \"--agent-version-suffix=docker\"]\n ---> Running in 6e8d087e9fc7\nRemoving intermediate container 6e8d087e9fc7\n ---> 9c8944aa7c4e\nSuccessfully built 9c8944aa7c4e\nSuccessfully tagged kubo:latest\n","stderr":"","imageSize":96858959},"endTime":1672622503563}