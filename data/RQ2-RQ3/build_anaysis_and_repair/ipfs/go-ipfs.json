{"repository":"https://github.com/ipfs/go-ipfs","dockerfilePath":"Dockerfile","startTime":1672596652291,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/ipfs/go-ipfs'...\n","error":null,"commit":"430a65ad5f78dc2aed0f54946b2c5922fa4b1ee1"},"originalBuild":{"startTimestamp":1672596653532,"endTimestamp":1672596858806,"error":null,"stdout":"Sending build context to Docker daemon  6.303MB\r\r\nStep 1/41 : FROM golang:1.19.1-buster\n1.19.1-buster: Pulling from library/golang\n86467c57892b: Pulling fs layer\n2b34aaa3cba7: Pulling fs layer\n5a443ab54eaa: Pulling fs layer\ne6cacf42b567: Pulling fs layer\n97379520018c: Pulling fs layer\na9018bf51685: Pulling fs layer\n416360429053: Pulling fs layer\na9018bf51685: Waiting\n416360429053: Waiting\n97379520018c: Waiting\ne6cacf42b567: Waiting\n5a443ab54eaa: Download complete\n2b34aaa3cba7: Verifying Checksum\n2b34aaa3cba7: Download complete\n86467c57892b: Verifying Checksum\n86467c57892b: Download complete\ne6cacf42b567: Verifying Checksum\ne6cacf42b567: Download complete\n416360429053: Download complete\n97379520018c: Verifying Checksum\n97379520018c: Download complete\na9018bf51685: Verifying Checksum\na9018bf51685: Download complete\n86467c57892b: Pull complete\n2b34aaa3cba7: Pull complete\n5a443ab54eaa: Pull complete\ne6cacf42b567: Pull complete\n97379520018c: Pull complete\na9018bf51685: Pull complete\n416360429053: Pull complete\nDigest: sha256:4b2498de3f543907f4954584ce12558fc3cf80844907f3e7b9f7e98c3223b949\nStatus: Downloaded newer image for golang:1.19.1-buster\n ---> b87d16c02fec\nStep 2/41 : LABEL maintainer=\"Steven Allen <steven@stebalien.com>\"\n ---> Running in f96ae98863ff\nRemoving intermediate container f96ae98863ff\n ---> d338e4c9a0dd\nStep 3/41 : RUN apt-get update && apt-get install -y   libssl-dev   ca-certificates   fuse\n ---> Running in b4d1b076715a\nGet:1 http://deb.debian.org/debian buster InRelease [122 kB]\nGet:2 http://deb.debian.org/debian-security buster/updates InRelease [34.8 kB]\nGet:3 http://deb.debian.org/debian buster-updates InRelease [56.6 kB]\nGet:4 http://deb.debian.org/debian buster/main amd64 Packages [7909 kB]\nGet:5 http://deb.debian.org/debian-security buster/updates/main amd64 Packages [422 kB]\nGet:6 http://deb.debian.org/debian buster-updates/main amd64 Packages [8788 B]\nFetched 8553 kB in 1s (6369 kB/s)\nReading package lists...\nReading package lists...\nBuilding dependency tree...\nReading state information...\nca-certificates is already the newest version (20200601~deb10u2).\nSuggested packages:\n  libssl-doc\nThe following NEW packages will be installed:\n  fuse libfuse2 libssl-dev\n0 upgraded, 3 newly installed, 0 to remove and 23 not upgraded.\nNeed to get 2008 kB of archives.\nAfter this operation, 8614 kB of additional disk space will be used.\nGet:1 http://deb.debian.org/debian buster/main amd64 libfuse2 amd64 2.9.9-1+deb10u1 [128 kB]\nGet:2 http://deb.debian.org/debian buster/main amd64 fuse amd64 2.9.9-1+deb10u1 [72.3 kB]\nGet:3 http://deb.debian.org/debian buster/main amd64 libssl-dev amd64 1.1.1n-0+deb10u3 [1808 kB]\n\u001b[91mdebconf: delaying package configuration, since apt-utils is not installed\n\u001b[0mFetched 2008 kB in 0s (33.1 MB/s)\nSelecting previously unselected package libfuse2:amd64.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 15421 files and directories currently installed.)\r\nPreparing to unpack .../libfuse2_2.9.9-1+deb10u1_amd64.deb ...\r\nUnpacking libfuse2:amd64 (2.9.9-1+deb10u1) ...\r\nSelecting previously unselected package fuse.\r\nPreparing to unpack .../fuse_2.9.9-1+deb10u1_amd64.deb ...\r\nUnpacking fuse (2.9.9-1+deb10u1) ...\r\nSelecting previously unselected package libssl-dev:amd64.\r\nPreparing to unpack .../libssl-dev_1.1.1n-0+deb10u3_amd64.deb ...\r\nUnpacking libssl-dev:amd64 (1.1.1n-0+deb10u3) ...\r\nSetting up libfuse2:amd64 (2.9.9-1+deb10u1) ...\r\nSetting up libssl-dev:amd64 (1.1.1n-0+deb10u3) ...\r\nSetting up fuse (2.9.9-1+deb10u1) ...\r\nProcessing triggers for libc-bin (2.28-10+deb10u1) ...\r\nRemoving intermediate container b4d1b076715a\n ---> f69d18701991\nStep 4/41 : ENV SRC_DIR /kubo\n ---> Running in 13525b438ef5\nRemoving intermediate container 13525b438ef5\n ---> 7b7a0fb9b037\nStep 5/41 : COPY go.mod go.sum $SRC_DIR/\n ---> be6b1b38c1ef\nStep 6/41 : RUN cd $SRC_DIR   && go mod download\n ---> Running in 06c616ada411\nRemoving intermediate container 06c616ada411\n ---> 35c18fa724cf\nStep 7/41 : COPY . $SRC_DIR\n ---> 41b71319f832\nStep 8/41 : ARG IPFS_PLUGINS\n ---> Running in 9526e6f572a9\nRemoving intermediate container 9526e6f572a9\n ---> e0a131c2013e\nStep 9/41 : RUN cd $SRC_DIR   && mkdir -p .git/objects   && GOFLAGS=-buildvcs=false make build GOTAGS=openssl IPFS_PLUGINS=$IPFS_PLUGINS\n ---> Running in 1d04d40bb3af\ngo version go1.19.1 linux/amd64\nbin/check_go_version 1.18\nplugin/loader/preload.sh > plugin/loader/preload.go\ngo fmt plugin/loader/preload.go >/dev/null\ngo build -buildvcs=false \"-trimpath\" -ldflags=\"-X \"github.com/ipfs/kubo\".CurrentCommit=430a65a\" -tags=\"openssl\" -o \"cmd/ipfs/ipfs\" \"github.com/ipfs/kubo/cmd/ipfs\"\nRemoving intermediate container 1d04d40bb3af\n ---> 06afd32d80e5\nStep 10/41 : ENV SUEXEC_VERSION v0.2\n ---> Running in f16ec96ca75a\nRemoving intermediate container f16ec96ca75a\n ---> 38de2bb4d865\nStep 11/41 : ENV TINI_VERSION v0.19.0\n ---> Running in 8f129d7d9bd4\nRemoving intermediate container 8f129d7d9bd4\n ---> 60f494edfffc\nStep 12/41 : RUN set -eux;     dpkgArch=\"$(dpkg --print-architecture)\";     case \"${dpkgArch##*-}\" in         \"amd64\" | \"armhf\" | \"arm64\") tiniArch=\"tini-static-$dpkgArch\" ;;        *) echo >&2 \"unsupported architecture: ${dpkgArch}\"; exit 1 ;;     esac;   cd /tmp   && git clone https://github.com/ncopa/su-exec.git   && cd su-exec   && git checkout -q $SUEXEC_VERSION   && make su-exec-static   && cd /tmp   && wget -q -O tini https://github.com/krallin/tini/releases/download/$TINI_VERSION/$tiniArch   && chmod +x tini\n ---> Running in 1fae8902c8d1\n\u001b[91m+ dpkg --print-architecture\n\u001b[0m\u001b[91m+ dpkgArch=amd64\n+ tiniArch=tini-static-amd64\n+ cd /tmp\n\u001b[0m\u001b[91m+ git clone https://github.com/ncopa/su-exec.git\n\u001b[0m\u001b[91mCloning into 'su-exec'...\n\u001b[0m\u001b[91m+ cd su-exec\n+ git checkout -q v0.2\n\u001b[0m\u001b[91m+ make su-exec-static\n\u001b[0mcc -Wall -Werror -g -o su-exec-static su-exec.c -static \n\u001b[91m/usr/bin/ld: /tmp/ccnwbXkA.o: in function `main':\n/tmp/su-exec/su-exec.c:83: warning: Using 'getgrouplist' in statically linked applications requires at runtime the shared libraries\u001b[0m\u001b[91m from the glibc version used for linking\n/usr/bin/ld: /tmp\u001b[0m\u001b[91m/su-exec/su-exec.c:66: warning: \u001b[0m\u001b[91mUsing 'getgrgid' in statically linked applications requires at \u001b[0m\u001b[91mruntime the shared libraries\u001b[0m\u001b[91m from the glibc \u001b[0m\u001b[91mversion used for linking\n/usr/bin\u001b[0m\u001b[91m/ld\u001b[0m\u001b[91m: /\u001b[0m\u001b[91mtmp/\u001b[0m\u001b[91msu-exec\u001b[0m\u001b[91m/su\u001b[0m\u001b[91m-exec.c\u001b[0m\u001b[91m:62:\u001b[0m\u001b[91m warning\u001b[0m\u001b[91m: \u001b[0m\u001b[91mUsing 'getgrnam'\u001b[0m\u001b[91m in\u001b[0m\u001b[91m statically linked \u001b[0m\u001b[91mapplications \u001b[0m\u001b[91mrequires at runtime\u001b[0m\u001b[91m the shared libraries from the glibc\u001b[0m\u001b[91m version used for \u001b[0m\u001b[91mlinking\n\u001b[0m\u001b[91m/usr/bin/\u001b[0m\u001b[91mld: /tmp\u001b[0m\u001b[91m/su-exec/su-exec.c\u001b[0m\u001b[91m:43: warning\u001b[0m\u001b[91m: Using 'getpwnam'\u001b[0m\u001b[91m in statically linked\u001b[0m\u001b[91m applications requires\u001b[0m\u001b[91m at\u001b[0m\u001b[91m runtime the shared \u001b[0m\u001b[91mlibraries from\u001b[0m\u001b[91m the\u001b[0m\u001b[91m glibc version used\u001b[0m\u001b[91m for linking\n/usr/bin/ld:\u001b[0m\u001b[91m /tmp/su-exec/su\u001b[0m\u001b[91m-exec.c:49: warning\u001b[0m\u001b[91m: Using 'getpwuid' in\u001b[0m\u001b[91m statically linked \u001b[0m\u001b[91mapplications requires at runtime \u001b[0m\u001b[91mthe shared\u001b[0m\u001b[91m libraries\u001b[0m\u001b[91m from the \u001b[0m\u001b[91mglibc version used\u001b[0m\u001b[91m for\u001b[0m\u001b[91m linking\n\u001b[0m\u001b[91m+ cd /tmp\n+ wget\u001b[0m\u001b[91m -q -O tini https://github.com/krallin/tini/releases/download/v0.19.0/tini-static-amd64\u001b[0m\u001b[91m\n\u001b[0m\u001b[91m+ chmod +x tini\n\u001b[0mRemoving intermediate container 1fae8902c8d1\n ---> dec7e5892863\nStep 13/41 : FROM busybox:1.31.1-glibc\n1.31.1-glibc: Pulling from library/busybox\nb2d221698d1d: Pulling fs layer\nb2d221698d1d: Verifying Checksum\nb2d221698d1d: Download complete\nb2d221698d1d: Pull complete\nDigest: sha256:1f81263701cddf6402afe9f33fca0266d9fff379e59b1748f33d3072da71ee85\nStatus: Downloaded newer image for busybox:1.31.1-glibc\n ---> 7a2331af2292\nStep 14/41 : LABEL maintainer=\"Steven Allen <steven@stebalien.com>\"\n ---> Running in fd45e4e65290\nRemoving intermediate container fd45e4e65290\n ---> 1a7add700939\nStep 15/41 : ENV SRC_DIR /kubo\n ---> Running in 8559bf5a631d\nRemoving intermediate container 8559bf5a631d\n ---> a9e0f93acb50\nStep 16/41 : COPY --from=0 $SRC_DIR/cmd/ipfs/ipfs /usr/local/bin/ipfs\n ---> 9daf3dd83a39\nStep 17/41 : COPY --from=0 $SRC_DIR/bin/container_daemon /usr/local/bin/start_ipfs\n ---> a14e6b71ab23\nStep 18/41 : COPY --from=0 $SRC_DIR/bin/container_init_run /usr/local/bin/container_init_run\n ---> 1feadb028b2b\nStep 19/41 : COPY --from=0 /tmp/su-exec/su-exec-static /sbin/su-exec\n ---> 0b092a0fd90f\nStep 20/41 : COPY --from=0 /tmp/tini /sbin/tini\n ---> 5e38c35ee3f3\nStep 21/41 : COPY --from=0 /bin/fusermount /usr/local/bin/fusermount\n ---> e2d5a7008125\nStep 22/41 : COPY --from=0 /etc/ssl/certs /etc/ssl/certs\n ---> 1e41ed35bc69\nStep 23/41 : RUN chmod 4755 /usr/local/bin/fusermount\n ---> Running in a517b2732d56\nRemoving intermediate container a517b2732d56\n ---> a05cc0a329c0\nStep 24/41 : RUN chmod 0755 /usr/local/bin/start_ipfs\n ---> Running in 05b6c243810e\nRemoving intermediate container 05b6c243810e\n ---> 7dc4f064b823\nStep 25/41 : COPY --from=0 /lib/*-linux-gnu*/libdl.so.2 /lib/\n ---> ca5c1e52d719\nStep 26/41 : COPY --from=0 /usr/lib/*-linux-gnu*/libssl.so* /usr/lib/\n ---> abc480b157c5\nStep 27/41 : COPY --from=0 /usr/lib/*-linux-gnu*/libcrypto.so* /usr/lib/\n ---> b8ad40595d72\nStep 28/41 : EXPOSE 4001\n ---> Running in 564c41388b4c\nRemoving intermediate container 564c41388b4c\n ---> 188e139920cb\nStep 29/41 : EXPOSE 4001/udp\n ---> Running in e1a9b52215ea\nRemoving intermediate container e1a9b52215ea\n ---> 4325ac80a2fa\nStep 30/41 : EXPOSE 5001\n ---> Running in d4d2ffed3e5a\nRemoving intermediate container d4d2ffed3e5a\n ---> fc107f4bc565\nStep 31/41 : EXPOSE 8080\n ---> Running in eedf462ea396\nRemoving intermediate container eedf462ea396\n ---> 6c7643e48690\nStep 32/41 : EXPOSE 8081\n ---> Running in 03cbc28726bf\nRemoving intermediate container 03cbc28726bf\n ---> c12790cd0fbf\nStep 33/41 : ENV IPFS_PATH /data/ipfs\n ---> Running in 55af0743065f\nRemoving intermediate container 55af0743065f\n ---> 28d2ea202fd6\nStep 34/41 : RUN mkdir -p $IPFS_PATH   && adduser -D -h $IPFS_PATH -u 1000 -G users ipfs   && chown ipfs:users $IPFS_PATH\n ---> Running in 9fae4a5d3207\nRemoving intermediate container 9fae4a5d3207\n ---> faee92ac61b3\nStep 35/41 : RUN mkdir /ipfs /ipns   && chown ipfs:users /ipfs /ipns\n ---> Running in ec4a2d0b072b\nRemoving intermediate container ec4a2d0b072b\n ---> 66529bdfe578\nStep 36/41 : RUN mkdir /container-init.d   && chown ipfs:users /container-init.d\n ---> Running in 924ee051e9f1\nRemoving intermediate container 924ee051e9f1\n ---> d61aed8cbb77\nStep 37/41 : VOLUME $IPFS_PATH\n ---> Running in 2e8dda297861\nRemoving intermediate container 2e8dda297861\n ---> d28a2b5be50b\nStep 38/41 : ENV IPFS_LOGGING \"\"\n ---> Running in 4d56b4936e6b\nRemoving intermediate container 4d56b4936e6b\n ---> 41b701802bf2\nStep 39/41 : ENTRYPOINT [\"/sbin/tini\", \"--\", \"/usr/local/bin/start_ipfs\"]\n ---> Running in 57993779ad09\nRemoving intermediate container 57993779ad09\n ---> 77c88de7474a\nStep 40/41 : HEALTHCHECK --interval=30s --timeout=3s --start-period=5s --retries=3   CMD ipfs dag stat /ipfs/QmUNLLsPACCz1vLxQVkXqqLX5R1X345qqfHbsf67hvA3Nn || exit 1\n ---> Running in 2cd241ef0c18\nRemoving intermediate container 2cd241ef0c18\n ---> 69e2a744beea\nStep 41/41 : CMD [\"daemon\", \"--migrate=true\", \"--agent-version-suffix=docker\"]\n ---> Running in 26c15b995f05\nRemoving intermediate container 26c15b995f05\n ---> dc1e4860ec3c\nSuccessfully built dc1e4860ec3c\nSuccessfully tagged go-ipfs:latest\n","stderr":"","imageSize":96858959},"repair":{"violations":[{"name":"ruleAptGetInstallUseNoRec","position":{"start":4,"end":7,"columnStart":22,"columnEnd":6}},{"name":"ruleAptGetInstallThenRemoveAptLists","position":{"start":4,"end":7,"columnStart":22,"columnEnd":6}}],"repairedDockerfile":"FROM golang:1.19.1-buster\nLABEL maintainer=\"Steven Allen <steven@stebalien.com>\"\n\n# Install deps\nRUN apt-get update && apt-get install --no-install-recommends -y \\\n  libssl-dev \\\n  ca-certificates \\\n  fuse\n\nENV SRC_DIR /kubo\n\n# Download packages first so they can be cached.\nCOPY go.mod go.sum $SRC_DIR/\nRUN cd $SRC_DIR \\\n  && go mod download\n\nCOPY . $SRC_DIR\n\n# Preload an in-tree but disabled-by-default plugin by adding it to the IPFS_PLUGINS variable\n# e.g. docker build --build-arg IPFS_PLUGINS=\"foo bar baz\"\nARG IPFS_PLUGINS\n\n# Build the thing.\n# Also: fix getting HEAD commit hash via git rev-parse.\nRUN cd $SRC_DIR \\\n  && mkdir -p .git/objects \\\n  && GOFLAGS=-buildvcs=false make build GOTAGS=openssl IPFS_PLUGINS=$IPFS_PLUGINS\n\n# Get su-exec, a very minimal tool for dropping privileges,\n# and tini, a very minimal init daemon for containers\nENV SUEXEC_VERSION v0.2\nENV TINI_VERSION v0.19.0\nRUN set -eux; \\\n    dpkgArch=\"$(dpkg --print-architecture)\"; \\\n    case \"${dpkgArch##*-}\" in \\\n        \"amd64\" | \"armhf\" | \"arm64\") tiniArch=\"tini-static-$dpkgArch\" ;;\\\n        *) echo >&2 \"unsupported architecture: ${dpkgArch}\"; exit 1 ;; \\\n    esac; \\\n  cd /tmp \\\n  && git clone https://github.com/ncopa/su-exec.git \\\n  && cd su-exec \\\n  && git checkout -q $SUEXEC_VERSION \\\n  && make su-exec-static \\\n  && cd /tmp \\\n  && wget -q -O tini https://github.com/krallin/tini/releases/download/$TINI_VERSION/$tiniArch \\\n  && chmod +x tini\n\n# Now comes the actual target image, which aims to be as small as possible.\nFROM busybox:1.31.1-glibc\nLABEL maintainer=\"Steven Allen <steven@stebalien.com>\"\n\n# Get the ipfs binary, entrypoint script, and TLS CAs from the build container.\nENV SRC_DIR /kubo\nCOPY --from=0 $SRC_DIR/cmd/ipfs/ipfs /usr/local/bin/ipfs\nCOPY --from=0 $SRC_DIR/bin/container_daemon /usr/local/bin/start_ipfs\nCOPY --from=0 $SRC_DIR/bin/container_init_run /usr/local/bin/container_init_run\nCOPY --from=0 /tmp/su-exec/su-exec-static /sbin/su-exec\nCOPY --from=0 /tmp/tini /sbin/tini\nCOPY --from=0 /bin/fusermount /usr/local/bin/fusermount\nCOPY --from=0 /etc/ssl/certs /etc/ssl/certs\n\n# Add suid bit on fusermount so it will run properly\nRUN chmod 4755 /usr/local/bin/fusermount\n\n# Fix permissions on start_ipfs (ignore the build machine's permissions)\nRUN chmod 0755 /usr/local/bin/start_ipfs\n\n# This shared lib (part of glibc) doesn't seem to be included with busybox.\nCOPY --from=0 /lib/*-linux-gnu*/libdl.so.2 /lib/\n\n# Copy over SSL libraries.\nCOPY --from=0 /usr/lib/*-linux-gnu*/libssl.so* /usr/lib/\nCOPY --from=0 /usr/lib/*-linux-gnu*/libcrypto.so* /usr/lib/\n\n# Swarm TCP; should be exposed to the public\nEXPOSE 4001\n# Swarm UDP; should be exposed to the public\nEXPOSE 4001/udp\n# Daemon API; must not be exposed publicly but to client services under you control\nEXPOSE 5001\n# Web Gateway; can be exposed publicly with a proxy, e.g. as https://ipfs.example.org\nEXPOSE 8080\n# Swarm Websockets; must be exposed publicly when the node is listening using the websocket transport (/ipX/.../tcp/8081/ws).\nEXPOSE 8081\n\n# Create the fs-repo directory and switch to a non-privileged user.\nENV IPFS_PATH /data/ipfs\nRUN mkdir -p $IPFS_PATH \\\n  && adduser -D -h $IPFS_PATH -u 1000 -G users ipfs \\\n  && chown ipfs:users $IPFS_PATH\n\n# Create mount points for `ipfs mount` command\nRUN mkdir /ipfs /ipns \\\n  && chown ipfs:users /ipfs /ipns\n\n# Create the init scripts directory\nRUN mkdir /container-init.d \\\n  && chown ipfs:users /container-init.d\n\n# Expose the fs-repo as a volume.\n# start_ipfs initializes an fs-repo if none is mounted.\n# Important this happens after the USER directive so permissions are correct.\nVOLUME $IPFS_PATH\n\n# The default logging level\nENV IPFS_LOGGING \"\"\n\n# This just makes sure that:\n# 1. There's an fs-repo, and initializes one if there isn't.\n# 2. The API and Gateway are accessible from outside the container.\nENTRYPOINT [\"/sbin/tini\", \"--\", \"/usr/local/bin/start_ipfs\"]\n\n# Healthcheck for the container\n# QmUNLLsPACCz1vLxQVkXqqLX5R1X345qqfHbsf67hvA3Nn is the CID of empty folder\nHEALTHCHECK --interval=30s --timeout=3s --start-period=5s --retries=3 \\\n  CMD ipfs dag stat /ipfs/QmUNLLsPACCz1vLxQVkXqqLX5R1X345qqfHbsf67hvA3Nn || exit 1\n\n# Execute the daemon subcommand by default\nCMD [\"daemon\", \"--migrate=true\", \"--agent-version-suffix=docker\"]\n"},"repairedBuild":{"startTimestamp":1672596859331,"endTimestamp":1672597029329,"error":null,"stdout":"Sending build context to Docker daemon  6.303MB\r\r\nStep 1/41 : FROM golang:1.19.1-buster\n ---> b87d16c02fec\nStep 2/41 : LABEL maintainer=\"Steven Allen <steven@stebalien.com>\"\n ---> Running in 97376648e53d\nRemoving intermediate container 97376648e53d\n ---> 578bb51780f7\nStep 3/41 : RUN apt-get update && apt-get install --no-install-recommends -y   libssl-dev   ca-certificates   fuse\n ---> Running in b474a1eb4815\nGet:1 http://deb.debian.org/debian buster InRelease [122 kB]\nGet:2 http://deb.debian.org/debian-security buster/updates InRelease [34.8 kB]\nGet:3 http://deb.debian.org/debian buster-updates InRelease [56.6 kB]\nGet:4 http://deb.debian.org/debian buster/main amd64 Packages [7909 kB]\nGet:5 http://deb.debian.org/debian-security buster/updates/main amd64 Packages [422 kB]\nGet:6 http://deb.debian.org/debian buster-updates/main amd64 Packages [8788 B]\nFetched 8553 kB in 1s (5944 kB/s)\nReading package lists...\nReading package lists...\nBuilding dependency tree...\nReading state information...\nca-certificates is already the newest version (20200601~deb10u2).\nSuggested packages:\n  libssl-doc\nThe following NEW packages will be installed:\n  fuse libfuse2 libssl-dev\n0 upgraded, 3 newly installed, 0 to remove and 23 not upgraded.\nNeed to get 2008 kB of archives.\nAfter this operation, 8614 kB of additional disk space will be used.\nGet:1 http://deb.debian.org/debian buster/main amd64 libfuse2 amd64 2.9.9-1+deb10u1 [128 kB]\nGet:2 http://deb.debian.org/debian buster/main amd64 fuse amd64 2.9.9-1+deb10u1 [72.3 kB]\nGet:3 http://deb.debian.org/debian buster/main amd64 libssl-dev amd64 1.1.1n-0+deb10u3 [1808 kB]\n\u001b[91mdebconf: delaying package configuration, since apt-utils is not installed\n\u001b[0mFetched 2008 kB in 0s (34.4 MB/s)\nSelecting previously unselected package libfuse2:amd64.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 15421 files and directories currently installed.)\r\nPreparing to unpack .../libfuse2_2.9.9-1+deb10u1_amd64.deb ...\r\nUnpacking libfuse2:amd64 (2.9.9-1+deb10u1) ...\r\nSelecting previously unselected package fuse.\r\nPreparing to unpack .../fuse_2.9.9-1+deb10u1_amd64.deb ...\r\nUnpacking fuse (2.9.9-1+deb10u1) ...\r\nSelecting previously unselected package libssl-dev:amd64.\r\nPreparing to unpack .../libssl-dev_1.1.1n-0+deb10u3_amd64.deb ...\r\nUnpacking libssl-dev:amd64 (1.1.1n-0+deb10u3) ...\r\nSetting up libfuse2:amd64 (2.9.9-1+deb10u1) ...\r\nSetting up libssl-dev:amd64 (1.1.1n-0+deb10u3) ...\r\nSetting up fuse (2.9.9-1+deb10u1) ...\r\nProcessing triggers for libc-bin (2.28-10+deb10u1) ...\r\nRemoving intermediate container b474a1eb4815\n ---> be513cdc5905\nStep 4/41 : ENV SRC_DIR /kubo\n ---> Running in b826fd6451e8\nRemoving intermediate container b826fd6451e8\n ---> 2d49a00c0054\nStep 5/41 : COPY go.mod go.sum $SRC_DIR/\n ---> 07d61e0bb0c5\nStep 6/41 : RUN cd $SRC_DIR   && go mod download\n ---> Running in a9af2db1b83e\nRemoving intermediate container a9af2db1b83e\n ---> 6568f937c29e\nStep 7/41 : COPY . $SRC_DIR\n ---> 5184de8cdca0\nStep 8/41 : ARG IPFS_PLUGINS\n ---> Running in 0c8fb7e20922\nRemoving intermediate container 0c8fb7e20922\n ---> 9985886247bb\nStep 9/41 : RUN cd $SRC_DIR   && mkdir -p .git/objects   && GOFLAGS=-buildvcs=false make build GOTAGS=openssl IPFS_PLUGINS=$IPFS_PLUGINS\n ---> Running in a5fb2edef943\ngo version go1.19.1 linux/amd64\nbin/check_go_version 1.18\nplugin/loader/preload.sh > plugin/loader/preload.go\ngo fmt plugin/loader/preload.go >/dev/null\ngo build -buildvcs=false \"-trimpath\" -ldflags=\"-X \"github.com/ipfs/kubo\".CurrentCommit=430a65a\" -tags=\"openssl\" -o \"cmd/ipfs/ipfs\" \"github.com/ipfs/kubo/cmd/ipfs\"\nRemoving intermediate container a5fb2edef943\n ---> 8b1dcff1baf1\nStep 10/41 : ENV SUEXEC_VERSION v0.2\n ---> Running in b7389cf71f2c\nRemoving intermediate container b7389cf71f2c\n ---> ee04247cee20\nStep 11/41 : ENV TINI_VERSION v0.19.0\n ---> Running in 1ee4a793dbef\nRemoving intermediate container 1ee4a793dbef\n ---> 86119f2f0e59\nStep 12/41 : RUN set -eux;     dpkgArch=\"$(dpkg --print-architecture)\";     case \"${dpkgArch##*-}\" in         \"amd64\" | \"armhf\" | \"arm64\") tiniArch=\"tini-static-$dpkgArch\" ;;        *) echo >&2 \"unsupported architecture: ${dpkgArch}\"; exit 1 ;;     esac;   cd /tmp   && git clone https://github.com/ncopa/su-exec.git   && cd su-exec   && git checkout -q $SUEXEC_VERSION   && make su-exec-static   && cd /tmp   && wget -q -O tini https://github.com/krallin/tini/releases/download/$TINI_VERSION/$tiniArch   && chmod +x tini\n ---> Running in ae8ebcf58121\n\u001b[91m+ dpkg --print-architecture\n\u001b[0m\u001b[91m+ dpkgArch=amd64\n+ tiniArch=tini-static-amd64\n+ cd /tmp\n\u001b[0m\u001b[91m+ git clone https://github.com/ncopa/su-exec.git\n\u001b[0m\u001b[91mCloning into 'su-exec'...\n\u001b[0m\u001b[91m+ cd su-exec\n+ git checkout -q\u001b[0m\u001b[91m v0.2\n\u001b[0m\u001b[91m+ make su-exec-static\n\u001b[0mcc -Wall -Werror -g -o su-exec-static su-exec.c -static \n\u001b[91m/usr/bin/ld: /tmp/ccQtUCg6.o: in function `main':\n/tmp/su-exec/su-exec.c:83: warning: Using 'getgrouplist' in statically\u001b[0m\u001b[91m linked applications requires at runtime the shared libraries from the glibc\u001b[0m\u001b[91m version used for \u001b[0m\u001b[91mlinking\n/usr/bin/ld: /tmp\u001b[0m\u001b[91m/su-exec/su-exec.c:66:\u001b[0m\u001b[91m warning: Using 'getgrgid' in \u001b[0m\u001b[91mstatically linked applications requires\u001b[0m\u001b[91m at runtime the shared libraries from the\u001b[0m\u001b[91m glibc version used for \u001b[0m\u001b[91mlinking\n/usr/bin/ld\u001b[0m\u001b[91m: /tmp\u001b[0m\u001b[91m/su-exec/\u001b[0m\u001b[91msu-exec.c:62: warning:\u001b[0m\u001b[91m Using 'getgrnam\u001b[0m\u001b[91m' in statically linked applications\u001b[0m\u001b[91m requires \u001b[0m\u001b[91mat runtime \u001b[0m\u001b[91mthe shared \u001b[0m\u001b[91mlibraries from \u001b[0m\u001b[91mthe glibc\u001b[0m\u001b[91m version used for \u001b[0m\u001b[91mlinking\n/usr\u001b[0m\u001b[91m/bin/ld: /\u001b[0m\u001b[91mtmp/su-exec/su\u001b[0m\u001b[91m-exec.c:43\u001b[0m\u001b[91m: warning: Using 'getpwnam\u001b[0m\u001b[91m' in statically linked applications \u001b[0m\u001b[91mrequires at runtime the shared libraries from\u001b[0m\u001b[91m the glibc version used for linking\n/usr/bin\u001b[0m\u001b[91m/ld: /tmp/su\u001b[0m\u001b[91m-exec/su-\u001b[0m\u001b[91mexec.c:49: warning: \u001b[0m\u001b[91mUsing 'getpwuid' in statically\u001b[0m\u001b[91m linked applications\u001b[0m\u001b[91m requires at runtime \u001b[0m\u001b[91mthe shared libraries\u001b[0m\u001b[91m from the\u001b[0m\u001b[91m glibc version used for linking\n\u001b[0m\u001b[91m+ cd /tmp\n+ wget -q -O tini https://github.com/krallin/tini/releases/download/v0.19.0/tini-static-amd64\n\u001b[0m\u001b[91m+ chmod +x tini\n\u001b[0mRemoving intermediate container ae8ebcf58121\n ---> 7f9f981603e7\nStep 13/41 : FROM busybox:1.31.1-glibc\n ---> 7a2331af2292\nStep 14/41 : LABEL maintainer=\"Steven Allen <steven@stebalien.com>\"\n ---> Running in cd3b4e5e6ad4\nRemoving intermediate container cd3b4e5e6ad4\n ---> 510bc48ca529\nStep 15/41 : ENV SRC_DIR /kubo\n ---> Running in 9b8a2686550f\nRemoving intermediate container 9b8a2686550f\n ---> c64c3e53446b\nStep 16/41 : COPY --from=0 $SRC_DIR/cmd/ipfs/ipfs /usr/local/bin/ipfs\n ---> 84eb7a10fe45\nStep 17/41 : COPY --from=0 $SRC_DIR/bin/container_daemon /usr/local/bin/start_ipfs\n ---> 4f99694379b2\nStep 18/41 : COPY --from=0 $SRC_DIR/bin/container_init_run /usr/local/bin/container_init_run\n ---> 3ff88eda5c61\nStep 19/41 : COPY --from=0 /tmp/su-exec/su-exec-static /sbin/su-exec\n ---> dab1a1911bc5\nStep 20/41 : COPY --from=0 /tmp/tini /sbin/tini\n ---> a4c16c570635\nStep 21/41 : COPY --from=0 /bin/fusermount /usr/local/bin/fusermount\n ---> 9afff9e4fda9\nStep 22/41 : COPY --from=0 /etc/ssl/certs /etc/ssl/certs\n ---> 37f6e85a2bed\nStep 23/41 : RUN chmod 4755 /usr/local/bin/fusermount\n ---> Running in e5ff51250b76\nRemoving intermediate container e5ff51250b76\n ---> ddf0cdc2d098\nStep 24/41 : RUN chmod 0755 /usr/local/bin/start_ipfs\n ---> Running in 97d8473fd739\nRemoving intermediate container 97d8473fd739\n ---> 18c90031675a\nStep 25/41 : COPY --from=0 /lib/*-linux-gnu*/libdl.so.2 /lib/\n ---> ef86d356d5f4\nStep 26/41 : COPY --from=0 /usr/lib/*-linux-gnu*/libssl.so* /usr/lib/\n ---> f365ab0e4953\nStep 27/41 : COPY --from=0 /usr/lib/*-linux-gnu*/libcrypto.so* /usr/lib/\n ---> c2fe8d5e4b6d\nStep 28/41 : EXPOSE 4001\n ---> Running in 3a437d510bb8\nRemoving intermediate container 3a437d510bb8\n ---> 5676cba489e1\nStep 29/41 : EXPOSE 4001/udp\n ---> Running in 6e5b5a50e628\nRemoving intermediate container 6e5b5a50e628\n ---> bac3178d16bb\nStep 30/41 : EXPOSE 5001\n ---> Running in 3ef159de3b8d\nRemoving intermediate container 3ef159de3b8d\n ---> 6b6f4483f80c\nStep 31/41 : EXPOSE 8080\n ---> Running in 141d18554760\nRemoving intermediate container 141d18554760\n ---> 6c62b8e5c866\nStep 32/41 : EXPOSE 8081\n ---> Running in 387420b4d019\nRemoving intermediate container 387420b4d019\n ---> 8620e699eb2d\nStep 33/41 : ENV IPFS_PATH /data/ipfs\n ---> Running in a0b450f4f54c\nRemoving intermediate container a0b450f4f54c\n ---> 9ed289f35479\nStep 34/41 : RUN mkdir -p $IPFS_PATH   && adduser -D -h $IPFS_PATH -u 1000 -G users ipfs   && chown ipfs:users $IPFS_PATH\n ---> Running in d7591cf9473f\nRemoving intermediate container d7591cf9473f\n ---> d33cd4167daa\nStep 35/41 : RUN mkdir /ipfs /ipns   && chown ipfs:users /ipfs /ipns\n ---> Running in 3a4badf91165\nRemoving intermediate container 3a4badf91165\n ---> 652292a5d551\nStep 36/41 : RUN mkdir /container-init.d   && chown ipfs:users /container-init.d\n ---> Running in 74ae5ab25c6d\nRemoving intermediate container 74ae5ab25c6d\n ---> 8e8cff7acc8d\nStep 37/41 : VOLUME $IPFS_PATH\n ---> Running in ea94701940f6\nRemoving intermediate container ea94701940f6\n ---> a7c3b48f5422\nStep 38/41 : ENV IPFS_LOGGING \"\"\n ---> Running in d4ae5be3ce9c\nRemoving intermediate container d4ae5be3ce9c\n ---> afc5967cdf3b\nStep 39/41 : ENTRYPOINT [\"/sbin/tini\", \"--\", \"/usr/local/bin/start_ipfs\"]\n ---> Running in fbcb0147763a\nRemoving intermediate container fbcb0147763a\n ---> 5bbf8d8af9ef\nStep 40/41 : HEALTHCHECK --interval=30s --timeout=3s --start-period=5s --retries=3   CMD ipfs dag stat /ipfs/QmUNLLsPACCz1vLxQVkXqqLX5R1X345qqfHbsf67hvA3Nn || exit 1\n ---> Running in 447ba0d12156\nRemoving intermediate container 447ba0d12156\n ---> 7a96511031fb\nStep 41/41 : CMD [\"daemon\", \"--migrate=true\", \"--agent-version-suffix=docker\"]\n ---> Running in 5f7992e8c74f\nRemoving intermediate container 5f7992e8c74f\n ---> 84c28a73bfea\nSuccessfully built 84c28a73bfea\nSuccessfully tagged go-ipfs:latest\n","stderr":"","imageSize":96858959},"endTime":1672597029671}