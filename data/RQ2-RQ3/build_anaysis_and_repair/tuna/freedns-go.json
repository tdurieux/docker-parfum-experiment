{"repository":"https://github.com/tuna/freedns-go","dockerfilePath":"Dockerfile","startTime":1672596508198,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/tuna/freedns-go'...\n","error":null,"commit":"a1c7c791615e9e32df5add075c7799710a8ad337"},"originalBuild":{"startTimestamp":1672596509108,"endTimestamp":1672596609824,"error":null,"stdout":"Sending build context to Docker daemon  547.3kB\r\r\nStep 1/16 : FROM python:alpine as update_db\n ---> 18ccdc39ea28\nStep 2/16 : WORKDIR /usr/src/app\n ---> Running in 3c4db1d9f495\nRemoving intermediate container 3c4db1d9f495\n ---> 23b3576edfb0\nStep 3/16 : COPY chinaip .\n ---> d460006a1c82\nStep 4/16 : RUN pip3 install -r requirements.txt\n ---> Running in 72a53987d210\nCollecting requests\n  Downloading requests-2.28.1-py3-none-any.whl (62 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 62.8/62.8 kB 3.5 MB/s eta 0:00:00\nCollecting charset-normalizer<3,>=2\n  Downloading charset_normalizer-2.1.1-py3-none-any.whl (39 kB)\nCollecting idna<4,>=2.5\n  Downloading idna-3.4-py3-none-any.whl (61 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 61.5/61.5 kB 6.4 MB/s eta 0:00:00\nCollecting urllib3<1.27,>=1.21.1\n  Downloading urllib3-1.26.13-py2.py3-none-any.whl (140 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 140.6/140.6 kB 10.8 MB/s eta 0:00:00\nCollecting certifi>=2017.4.17\n  Downloading certifi-2022.12.7-py3-none-any.whl (155 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 155.3/155.3 kB 17.1 MB/s eta 0:00:00\nInstalling collected packages: urllib3, idna, charset-normalizer, certifi, requests\nSuccessfully installed certifi-2022.12.7 charset-normalizer-2.1.1 idna-3.4 requests-2.28.1 urllib3-1.26.13\n\u001b[91mWARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv\n\u001b[0mRemoving intermediate container 72a53987d210\n ---> a1fb9156a834\nStep 5/16 : RUN python3 update_db.py\n ---> Running in 5c75a5e92844\nRemoving intermediate container 5c75a5e92844\n ---> 51ae7ef46989\nStep 6/16 : FROM golang:alpine as builder\nalpine: Pulling from library/golang\nc158987b0551: Already exists\n019cfb932eb0: Pulling fs layer\na3a161a37303: Pulling fs layer\n3c6f08178a17: Pulling fs layer\n3c6f08178a17: Verifying Checksum\n3c6f08178a17: Download complete\n019cfb932eb0: Download complete\n019cfb932eb0: Pull complete\na3a161a37303: Verifying Checksum\na3a161a37303: Download complete\na3a161a37303: Pull complete\n3c6f08178a17: Pull complete\nDigest: sha256:a9b24b67dc83b3383d22a14941c2b2b2ca6a103d805cac6820fd1355943beaf1\nStatus: Downloaded newer image for golang:alpine\n ---> cae57157ceaa\nStep 7/16 : WORKDIR /go/src/github.com/tuna/freedns-go\n ---> Running in cbe781a60e6f\nRemoving intermediate container cbe781a60e6f\n ---> 52a757972494\nStep 8/16 : COPY go.* ./\n ---> faec42f30372\nStep 9/16 : RUN go mod download\n ---> Running in 185061bea362\nRemoving intermediate container 185061bea362\n ---> 93d01420b8b8\nStep 10/16 : COPY . .\n ---> 92f8d6d1f2cb\nStep 11/16 : COPY --from=update_db /usr/src/app/db.go chinaip/\n ---> 70ce5c7a0363\nStep 12/16 : RUN go build -o ./build/freedns-go\n ---> Running in f9743d773777\nRemoving intermediate container f9743d773777\n ---> d3f04fc74fc2\nStep 13/16 : FROM alpine\n ---> 49176f190c7e\nStep 14/16 : COPY --from=builder /go/src/github.com/tuna/freedns-go/build/freedns-go ./\n ---> b355b856d37f\nStep 15/16 : ENTRYPOINT [\"./freedns-go\"]\n ---> Running in 0d573378109c\nRemoving intermediate container 0d573378109c\n ---> ffe82d1f48db\nStep 16/16 : CMD [\"-f\", \"114.114.114.114:53\", \"-c\", \"8.8.8.8:53\", \"-l\", \"0.0.0.0:53\"]\n ---> Running in 3a4b723c0995\nRemoving intermediate container 3a4b723c0995\n ---> 2f28bcaed70e\nSuccessfully built 2f28bcaed70e\nSuccessfully tagged freedns-go:latest\n","stderr":"","imageSize":15469690},"repair":{"violations":[{"name":"pipUseNoCacheDir","position":{"start":3,"end":3,"columnStart":4,"columnEnd":36}}],"repairedDockerfile":"FROM python:alpine as update_db\nWORKDIR /usr/src/app\nCOPY chinaip .\nRUN pip3 install --no-cache-dir -r requirements.txt\nRUN python3 update_db.py\n\nFROM golang:alpine as builder\nWORKDIR /go/src/github.com/tuna/freedns-go\nCOPY go.* ./\nRUN go mod download\nCOPY . .\nCOPY --from=update_db /usr/src/app/db.go chinaip/\nRUN go build -o ./build/freedns-go\n\n\nFROM alpine\nCOPY --from=builder /go/src/github.com/tuna/freedns-go/build/freedns-go ./\nENTRYPOINT [\"./freedns-go\"]\nCMD [\"-f\", \"114.114.114.114:53\", \"-c\", \"8.8.8.8:53\", \"-l\", \"0.0.0.0:53\"]\n"},"repairedBuild":{"startTimestamp":1672596610102,"endTimestamp":1672596652031,"error":null,"stdout":"Sending build context to Docker daemon  547.3kB\r\r\nStep 1/16 : FROM python:alpine as update_db\n ---> 18ccdc39ea28\nStep 2/16 : WORKDIR /usr/src/app\n ---> Running in 1aac873b63d2\nRemoving intermediate container 1aac873b63d2\n ---> 46b0cc334c07\nStep 3/16 : COPY chinaip .\n ---> 98f7bac1454d\nStep 4/16 : RUN pip3 install --no-cache-dir -r requirements.txt\n ---> Running in d05bc9c68456\nCollecting requests\n  Downloading requests-2.28.1-py3-none-any.whl (62 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 62.8/62.8 kB 13.3 MB/s eta 0:00:00\nCollecting charset-normalizer<3,>=2\n  Downloading charset_normalizer-2.1.1-py3-none-any.whl (39 kB)\nCollecting idna<4,>=2.5\n  Downloading idna-3.4-py3-none-any.whl (61 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 61.5/61.5 kB 71.8 MB/s eta 0:00:00\nCollecting urllib3<1.27,>=1.21.1\n  Downloading urllib3-1.26.13-py2.py3-none-any.whl (140 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 140.6/140.6 kB 75.8 MB/s eta 0:00:00\nCollecting certifi>=2017.4.17\n  Downloading certifi-2022.12.7-py3-none-any.whl (155 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 155.3/155.3 kB 226.9 MB/s eta 0:00:00\nInstalling collected packages: urllib3, idna, charset-normalizer, certifi, requests\nSuccessfully installed certifi-2022.12.7 charset-normalizer-2.1.1 idna-3.4 requests-2.28.1 urllib3-1.26.13\n\u001b[91mWARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv\n\u001b[0mRemoving intermediate container d05bc9c68456\n ---> 2989423634d2\nStep 5/16 : RUN python3 update_db.py\n ---> Running in 5d9c40d7f31b\nRemoving intermediate container 5d9c40d7f31b\n ---> b8c9cbff7e44\nStep 6/16 : FROM golang:alpine as builder\n ---> cae57157ceaa\nStep 7/16 : WORKDIR /go/src/github.com/tuna/freedns-go\n ---> Running in 1fb943613496\nRemoving intermediate container 1fb943613496\n ---> e0d04e10b219\nStep 8/16 : COPY go.* ./\n ---> 9a870376db24\nStep 9/16 : RUN go mod download\n ---> Running in 1f4618ced889\nRemoving intermediate container 1f4618ced889\n ---> acff0ce8fa0a\nStep 10/16 : COPY . .\n ---> 6427c82d7261\nStep 11/16 : COPY --from=update_db /usr/src/app/db.go chinaip/\n ---> 080db956d1ba\nStep 12/16 : RUN go build -o ./build/freedns-go\n ---> Running in b8569831139a\nRemoving intermediate container b8569831139a\n ---> 112a17e12af8\nStep 13/16 : FROM alpine\n ---> 49176f190c7e\nStep 14/16 : COPY --from=builder /go/src/github.com/tuna/freedns-go/build/freedns-go ./\n ---> f874dca498e6\nStep 15/16 : ENTRYPOINT [\"./freedns-go\"]\n ---> Running in 957e329094d2\nRemoving intermediate container 957e329094d2\n ---> 96e1fc28df15\nStep 16/16 : CMD [\"-f\", \"114.114.114.114:53\", \"-c\", \"8.8.8.8:53\", \"-l\", \"0.0.0.0:53\"]\n ---> Running in d8f409e284b4\nRemoving intermediate container d8f409e284b4\n ---> e37c0a8372f1\nSuccessfully built e37c0a8372f1\nSuccessfully tagged freedns-go:latest\n","stderr":"","imageSize":15469690},"endTime":1672596652288}