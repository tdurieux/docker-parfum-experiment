{"repository":"https://github.com/stoplightio/prism","dockerfilePath":"Dockerfile","startTime":1672160702331,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/stoplightio/prism'...\n","error":null,"commit":"776b1ac52aaf19c621cb28d60a1fcffc55ad69e9"},"originalBuild":{"startTimestamp":1672160704285,"endTimestamp":1672161023834,"error":null,"stdout":"Sending build context to Docker daemon  760.8kB\r\r\nStep 1/43 : FROM node:16 as compiler\n ---> c910109adbfd\nStep 2/43 : WORKDIR /usr/src/prism\n ---> Running in 1568cccfb5db\nRemoving intermediate container 1568cccfb5db\n ---> f656da04dd71\nStep 3/43 : COPY package.json yarn.lock /usr/src/prism/\n ---> c302b216eebb\nStep 4/43 : COPY packages/ /usr/src/prism/packages/\n ---> 6b00a27ff0dc\nStep 5/43 : RUN yarn && yarn build\n ---> Running in 54f885750bb2\nyarn install v1.22.19\n[1/4] Resolving packages...\n[2/4] Fetching packages...\n[3/4] Linking dependencies...\n\u001b[91mwarning \" > @typescript-eslint/eslint-plugin@2.34.0\" has incorrect peer dependency \"@typescript-eslint/parser@^2.0.0\".\n\u001b[0m\u001b[91mwarning \" > @typescript-eslint/eslint-plugin@2.34.0\" has incorrect peer dependency \"eslint@^5.0.0 || ^6.0.0\".\n\u001b[0m[4/4] Building fresh packages...\nDone in 51.83s.\nyarn run v1.22.19\n$ npm run clean && ttsc --build --verbose ./packages/tsconfig.build.json\n\n> clean\n> rm -rf ./packages/**/dist ./packages/**/*.tsbuildinfo\n\n5:06:05 PM - Projects in this build: \r\n    * packages/core/tsconfig.build.json\r\n    * packages/http/tsconfig.build.json\r\n    * packages/http-server/tsconfig.build.json\r\n    * packages/cli/tsconfig.build.json\r\n    * packages/tsconfig.build.json\n\n5:06:05 PM - Project 'packages/core/tsconfig.build.json' is out of date because output file 'packages/core/tsconfig.build.tsbuildinfo' does not exist\n\n5:06:05 PM - Building project '/usr/src/prism/packages/core/tsconfig.build.json'...\n\n5:06:10 PM - Project 'packages/http/tsconfig.build.json' is out of date because output file 'packages/http/tsconfig.build.tsbuildinfo' does not exist\n\n5:06:10 PM - Building project '/usr/src/prism/packages/http/tsconfig.build.json'...\n\n5:06:15 PM - Project 'packages/http-server/tsconfig.build.json' is out of date because output file 'packages/http-server/tsconfig.build.tsbuildinfo' does not exist\n\n5:06:15 PM - Building project '/usr/src/prism/packages/http-server/tsconfig.build.json'...\n\n5:06:18 PM - Project 'packages/cli/tsconfig.build.json' is out of date because output file 'packages/cli/dist/combinators.js' does not exist\n\n5:06:18 PM - Building project '/usr/src/prism/packages/cli/tsconfig.build.json'...\n\nDone in 18.82s.\nRemoving intermediate container 54f885750bb2\n ---> 27f2add06bcd\nStep 6/43 : FROM node:16 as dependencies\n ---> c910109adbfd\nStep 7/43 : WORKDIR /usr/src/prism/\n ---> Running in 75f20396a1c9\nRemoving intermediate container 75f20396a1c9\n ---> f53033a11f08\nStep 8/43 : COPY package.json /usr/src/prism/\n ---> 69aab803891e\nStep 9/43 : RUN mkdir -p /usr/src/prism/node_modules\n ---> Running in 8af345a585d7\nRemoving intermediate container 8af345a585d7\n ---> 903a30130ef0\nStep 10/43 : COPY packages/core/package.json /usr/src/prism/packages/core/\n ---> 2ce5e071b86c\nStep 11/43 : RUN mkdir -p /usr/src/prism/packages/core/node_modules\n ---> Running in 019fb297cc53\nRemoving intermediate container 019fb297cc53\n ---> 80d9cc17b1f4\nStep 12/43 : COPY packages/http/package.json /usr/src/prism/packages/http/\n ---> 2a9eccf3bb6f\nStep 13/43 : RUN mkdir -p /usr/src/prism/packages/http/node_modules\n ---> Running in d2762aa7a95e\nRemoving intermediate container d2762aa7a95e\n ---> 937e5132f28e\nStep 14/43 : COPY packages/http-server/package.json /usr/src/prism/packages/http-server/\n ---> a81ffa3e1c4b\nStep 15/43 : RUN mkdir -p /usr/src/prism/packages/http-server/node_modules\n ---> Running in 8c0145a06411\nRemoving intermediate container 8c0145a06411\n ---> d6bca5e8be6c\nStep 16/43 : COPY packages/cli/package.json /usr/src/prism/packages/cli/\n ---> 3c5e33745dcb\nStep 17/43 : RUN mkdir -p /usr/src/prism/packages/cli/node_modules\n ---> Running in 2d1ca0a590a7\nRemoving intermediate container 2d1ca0a590a7\n ---> 3290bf0485a8\nStep 18/43 : ENV NODE_ENV production\n ---> Running in 2f3e8532565d\nRemoving intermediate container 2f3e8532565d\n ---> 2db8abedbeca\nStep 19/43 : RUN yarn --production\n ---> Running in 3a056e2352e8\nyarn install v1.22.19\ninfo No lockfile found.\n[1/4] Resolving packages...\n\u001b[91mwarning @types/faker@6.6.9: This is a stub types definition. faker provides its own type definitions, so you do not need this installed.\n\u001b[0m\u001b[91mwarning @types/pino > @types/pino-pretty@5.0.0: This is a stub types definition. pino-pretty provides its own type definitions, so you do not need this installed.\n\u001b[0m\u001b[91mwarning @types/pino > @types/sonic-boom@2.1.1: This is a stub types definition. sonic-boom provides its own type definitions, so you do not need this installed.\n\u001b[0m\u001b[91mwarning @types/pino > @types/pino-std-serializers@4.0.0: This is a stub types definition. pino-std-serializers provides its own type definitions, so you do not need this installed.\n\u001b[0m\u001b[91mwarning @types/raw-body@2.3.0: This is a stub types definition for raw-body (https://github.com/stream-utils/raw-body). raw-body provides its own type definitions, so you don't need @types/raw-body installed!\n\u001b[0m\u001b[91mwarning jest > jest-cli > jest-config > jest-environment-jsdom > jsdom > w3c-hr-time@1.0.2: Use your platform's native performance.now() and performance.timeOrigin.\n\u001b[0m\u001b[91mwarning lerna > @lerna/bootstrap > @npmcli/arborist > @npmcli/move-file@2.0.1: This functionality has been moved to @npmcli/fs\n\u001b[0m\u001b[91mwarning lerna > @lerna/add > pacote > cacache > @npmcli/move-file@2.0.1: This functionality has been moved to @npmcli/fs\n\u001b[0m\u001b[91mwarning lerna > @lerna/bootstrap > @npmcli/arborist > readdir-scoped-modules@1.1.0: This functionality has been moved to @npmcli/fs\n\u001b[0m\u001b[91mwarning workspace-aggregator-82ecbddb-66fc-416c-b40e-45269ccf47e0 > @stoplight/prism-cli > json-schema-faker > json-schema-ref-parser@6.1.0: Please switch to @apidevtools/json-schema-ref-parser\n\u001b[0m\u001b[91mwarning workspace-aggregator-82ecbddb-66fc-416c-b40e-45269ccf47e0 > @stoplight/prism-cli > @stoplight/http-spec > @stoplight/json-schema-generator > request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142\n\u001b[0m\u001b[91mwarning workspace-aggregator-82ecbddb-66fc-416c-b40e-45269ccf47e0 > @stoplight/prism-cli > @stoplight/http-spec > @stoplight/json-schema-generator > request > uuid@3.4.0: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.\n\u001b[0m\u001b[91mwarning workspace-aggregator-82ecbddb-66fc-416c-b40e-45269ccf47e0 > @stoplight/prism-cli > @stoplight/http-spec > @stoplight/json-schema-generator > request > har-validator@5.1.5: this library is no longer supported\n\u001b[0m[2/4] Fetching packages...\n[3/4] Linking dependencies...\n\u001b[91mwarning \" > @typescript-eslint/eslint-plugin@2.34.0\" has incorrect peer dependency \"@typescript-eslint/parser@^2.0.0\".\nwarning \" > @typescript-eslint/eslint-plugin@2.34.0\" has incorrect peer dependency \"eslint@^5.0.0 || ^6.0.0\".\n\u001b[0m[4/4] Building fresh packages...\nsuccess Saved lockfile.\nDone in 66.92s.\nRemoving intermediate container 3a056e2352e8\n ---> 7366e505d0e7\nStep 20/43 : RUN if [ $(uname -m) != \"aarch64\" ]; then curl -sfL https://gobinaries.com/tj/node-prune | bash; fi\n ---> Running in fd9016d38494\n\n\u001b[38;5;61m  ==>\u001b[0;00m Downloading github.com/tj/node-prune@master\n\u001b[38;5;61m  ==>\u001b[0;00m Resolved version master to v1.2.0\n\u001b[38;5;61m  ==>\u001b[0;00m Downloading binary for linux amd64\n\u001b[38;5;61m  ==>\u001b[0;00m Installing node-prune to /usr/local/bin\n\u001b[38;5;61m  ==>\u001b[0;00m Installation complete\n\nRemoving intermediate container fd9016d38494\n ---> ed303592eb97\nStep 21/43 : RUN if [ $(uname -m) != \"aarch64\" ]; then node-prune; fi\n ---> Running in 7c3992ba0c5e\n\u001b[91m\n\n\u001b[0m\u001b[1m         files total\u001b[0m 12,699\n\u001b[1m       files removed\u001b[0m 3,700\n\u001b[1m        size removed\u001b[0m 11 MB\n\u001b[1m            duration\u001b[0m 302ms\nRemoving intermediate container 7c3992ba0c5e\n ---> cfd58f507b12\nStep 22/43 : FROM node:16-alpine\n16-alpine: Pulling from library/node\nDigest: sha256:58e4dfcf063f67d71e608c3cace5a0bcf39e9dbab3047b41e20c15c7132d1d46\nStatus: Downloaded newer image for node:16-alpine\n ---> 610c0494e820\nStep 23/43 : WORKDIR /usr/src/prism\n ---> Running in 4430300693ee\nRemoving intermediate container 4430300693ee\n ---> d6f684574be2\nStep 24/43 : ARG BUILD_TYPE=development\n ---> Running in 25648e80aa0d\nRemoving intermediate container 25648e80aa0d\n ---> 96fb65b4bff1\nStep 25/43 : ENV NODE_ENV production\n ---> Running in db480c3178e8\nRemoving intermediate container db480c3178e8\n ---> dbbe4230af75\nStep 26/43 : COPY package.json /usr/src/prism/\n ---> 3895a05b4bf8\nStep 27/43 : COPY packages/core/package.json /usr/src/prism/packages/core/\n ---> 0e333a16381f\nStep 28/43 : COPY packages/http/package.json /usr/src/prism/packages/http/\n ---> f529261a3ea9\nStep 29/43 : COPY packages/http-server/package.json /usr/src/prism/packages/http-server/\n ---> c6021dd62c37\nStep 30/43 : COPY packages/cli/package.json /usr/src/prism/packages/cli/\n ---> fc1fe2bc155a\nStep 31/43 : COPY --from=compiler /usr/src/prism/packages/core/dist /usr/src/prism/packages/core/dist\n ---> 4a7fcb7225fb\nStep 32/43 : COPY --from=compiler /usr/src/prism/packages/http/dist /usr/src/prism/packages/http/dist\n ---> 669ddabaa067\nStep 33/43 : COPY --from=compiler /usr/src/prism/packages/http-server/dist /usr/src/prism/packages/http-server/dist\n ---> 7f329842e39a\nStep 34/43 : COPY --from=compiler /usr/src/prism/packages/cli/dist /usr/src/prism/packages/cli/dist\n ---> d0d6859627e2\nStep 35/43 : COPY --from=dependencies /usr/src/prism/node_modules/ /usr/src/prism/node_modules/\n ---> 21fc3a264545\nStep 36/43 : COPY --from=dependencies /usr/src/prism/packages/core/node_modules/ /usr/src/prism/packages/core/node_modules/\n ---> 3973c958f985\nStep 37/43 : COPY --from=dependencies /usr/src/prism/packages/http/node_modules/ /usr/src/prism/packages/http/node_modules/\n ---> 3e2a12ccd600\nStep 38/43 : COPY --from=dependencies /usr/src/prism/packages/http-server/node_modules/ /usr/src/prism/packages/http-server/node_modules/\n ---> 8fcd897e0aa7\nStep 39/43 : COPY --from=dependencies /usr/src/prism/packages/cli/node_modules/ /usr/src/prism/packages/cli/node_modules/\n ---> 60c3e25f1212\nStep 40/43 : WORKDIR /usr/src/prism/packages/cli/\n ---> Running in a3cceef85bdb\nRemoving intermediate container a3cceef85bdb\n ---> 9c48ca647ab5\nStep 41/43 : RUN if [ \"$BUILD_TYPE\" = \"development\" ] ; then     cd /usr/src/prism/packages/core && yarn link &&     cd /usr/src/prism/packages/http && yarn link @stoplight/prism-core && yarn link &&     cd /usr/src/prism/packages/http-server && yarn link @stoplight/prism-core && yarn link @stoplight/prism-http && yarn link &&     cd /usr/src/prism/packages/cli && yarn link @stoplight/prism-core && yarn link @stoplight/prism-http && yarn link @stoplight/prism-http-server && yarn link ; fi\n ---> Running in 5b88d22b5d98\nyarn link v1.22.19\nsuccess Registered \"@stoplight/prism-core\".\ninfo You can now run `yarn link \"@stoplight/prism-core\"` in the projects where you want to use this package and it will be used instead.\nDone in 0.10s.\nyarn link v1.22.19\nsuccess Using linked package for \"@stoplight/prism-core\".\nDone in 0.05s.\nyarn link v1.22.19\nsuccess Registered \"@stoplight/prism-http\".\ninfo You can now run `yarn link \"@stoplight/prism-http\"` in the projects where you want to use this package and it will be used instead.\nDone in 0.06s.\nyarn link v1.22.19\nsuccess Using linked package for \"@stoplight/prism-core\".\nDone in 0.05s.\nyarn link v1.22.19\nsuccess Using linked package for \"@stoplight/prism-http\".\nDone in 0.05s.\nyarn link v1.22.19\nsuccess Registered \"@stoplight/prism-http-server\".\ninfo You can now run `yarn link \"@stoplight/prism-http-server\"` in the projects where you want to use this package and it will be used instead.\nDone in 0.06s.\nyarn link v1.22.19\nsuccess Using linked package for \"@stoplight/prism-core\".\nDone in 0.06s.\nyarn link v1.22.19\nsuccess Using linked package for \"@stoplight/prism-http\".\nDone in 0.07s.\nyarn link v1.22.19\nsuccess Using linked package for \"@stoplight/prism-http-server\".\nDone in 0.04s.\nyarn link v1.22.19\nsuccess Registered \"@stoplight/prism-cli\".\ninfo You can now run `yarn link \"@stoplight/prism-cli\"` in the projects where you want to use this package and it will be used instead.\nDone in 0.04s.\nRemoving intermediate container 5b88d22b5d98\n ---> d254246b2506\nStep 42/43 : EXPOSE 4010\n ---> Running in d68cffe360c8\nRemoving intermediate container d68cffe360c8\n ---> 639b628d1e85\nStep 43/43 : ENTRYPOINT [ \"node\", \"dist/index.js\" ]\n ---> Running in 60058289896d\nRemoving intermediate container 60058289896d\n ---> 38e1986be607\nSuccessfully built 38e1986be607\nSuccessfully tagged prism:latest\n","stderr":"","imageSize":154063725},"repair":{"violations":[{"name":"mkdirUsrSrcThenRemove","position":{"start":15,"end":15,"columnStart":4,"columnEnd":40}},{"name":"mkdirUsrSrcThenRemove","position":{"start":18,"end":18,"columnStart":4,"columnEnd":54}},{"name":"mkdirUsrSrcThenRemove","position":{"start":21,"end":21,"columnStart":4,"columnEnd":54}},{"name":"mkdirUsrSrcThenRemove","position":{"start":24,"end":24,"columnStart":4,"columnEnd":61}},{"name":"mkdirUsrSrcThenRemove","position":{"start":27,"end":27,"columnStart":4,"columnEnd":53}}],"repairedDockerfile":"FROM node:16 as compiler\n\nWORKDIR /usr/src/prism\n\nCOPY package.json yarn.lock /usr/src/prism/\nCOPY packages/ /usr/src/prism/packages/\n\nRUN yarn && yarn build\n\n###############################################################\nFROM node:16 as dependencies\n\nWORKDIR /usr/src/prism/\n\nCOPY package.json /usr/src/prism/\nRUN mkdir -p /usr/src/prism/node_modules\n\nCOPY packages/core/package.json /usr/src/prism/packages/core/\nRUN mkdir -p /usr/src/prism/packages/core/node_modules\n\nCOPY packages/http/package.json /usr/src/prism/packages/http/\nRUN mkdir -p /usr/src/prism/packages/http/node_modules\n\nCOPY packages/http-server/package.json /usr/src/prism/packages/http-server/\nRUN mkdir -p /usr/src/prism/packages/http-server/node_modules\n\nCOPY packages/cli/package.json /usr/src/prism/packages/cli/\nRUN mkdir -p /usr/src/prism/packages/cli/node_modules\n\nENV NODE_ENV production\nRUN yarn --production\n\nRUN if [ $(uname -m) != \"aarch64\" ]; then curl -sfL https://gobinaries.com/tj/node-prune | bash; fi\nRUN if [ $(uname -m) != \"aarch64\" ]; then node-prune; fi\n\n###############################################################\nFROM node:16-alpine\n\nWORKDIR /usr/src/prism\nARG BUILD_TYPE=development\nENV NODE_ENV production\n\nCOPY package.json /usr/src/prism/\nCOPY packages/core/package.json /usr/src/prism/packages/core/\nCOPY packages/http/package.json /usr/src/prism/packages/http/\nCOPY packages/http-server/package.json /usr/src/prism/packages/http-server/\nCOPY packages/cli/package.json /usr/src/prism/packages/cli/\n\nCOPY --from=compiler /usr/src/prism/packages/core/dist /usr/src/prism/packages/core/dist\nCOPY --from=compiler /usr/src/prism/packages/http/dist /usr/src/prism/packages/http/dist\nCOPY --from=compiler /usr/src/prism/packages/http-server/dist /usr/src/prism/packages/http-server/dist\nCOPY --from=compiler /usr/src/prism/packages/cli/dist /usr/src/prism/packages/cli/dist\n\nCOPY --from=dependencies /usr/src/prism/node_modules/ /usr/src/prism/node_modules/\nCOPY --from=dependencies /usr/src/prism/packages/core/node_modules/ /usr/src/prism/packages/core/node_modules/\nCOPY --from=dependencies /usr/src/prism/packages/http/node_modules/ /usr/src/prism/packages/http/node_modules/\nCOPY --from=dependencies /usr/src/prism/packages/http-server/node_modules/ /usr/src/prism/packages/http-server/node_modules/\nCOPY --from=dependencies /usr/src/prism/packages/cli/node_modules/ /usr/src/prism/packages/cli/node_modules/\n\nWORKDIR /usr/src/prism/packages/cli/\n\nRUN if [ \"$BUILD_TYPE\" = \"development\" ] ; then \\\n    cd /usr/src/prism/packages/core && yarn link && \\\n    cd /usr/src/prism/packages/http && yarn link @stoplight/prism-core && yarn link && \\\n    cd /usr/src/prism/packages/http-server && yarn link @stoplight/prism-core && yarn link @stoplight/prism-http && yarn link && \\\n    cd /usr/src/prism/packages/cli && yarn link @stoplight/prism-core && yarn link @stoplight/prism-http && yarn link @stoplight/prism-http-server && yarn link ; \\\nfi\n\nEXPOSE 4010\n\nENTRYPOINT [ \"node\", \"dist/index.js\" ]\n"},"repairedBuild":{"startTimestamp":1672161024621,"endTimestamp":1672161326670,"error":null,"stdout":"Sending build context to Docker daemon  760.8kB\r\r\nStep 1/43 : FROM node:16 as compiler\n ---> c910109adbfd\nStep 2/43 : WORKDIR /usr/src/prism\n ---> Running in 25486889bbe9\nRemoving intermediate container 25486889bbe9\n ---> 9bbe6e69f49a\nStep 3/43 : COPY package.json yarn.lock /usr/src/prism/\n ---> 6cb9fb8c08ca\nStep 4/43 : COPY packages/ /usr/src/prism/packages/\n ---> 5b75ab07b4c1\nStep 5/43 : RUN yarn && yarn build\n ---> Running in b2b7d9dbf0ae\nyarn install v1.22.19\n[1/4] Resolving packages...\n[2/4] Fetching packages...\n[3/4] Linking dependencies...\n\u001b[91mwarning \" > @typescript-eslint/eslint-plugin@2.34.0\" has incorrect peer dependency \"@typescript-eslint/parser@^2.0.0\".\n\u001b[0m\u001b[91mwarning \" > @typescript-eslint/eslint-plugin@2.34.0\" has incorrect peer dependency \"eslint@^5.0.0 || ^6.0.0\".\n\u001b[0m[4/4] Building fresh packages...\nDone in 53.70s.\nyarn run v1.22.19\n$ npm run clean && ttsc --build --verbose ./packages/tsconfig.build.json\n\n> clean\n> rm -rf ./packages/**/dist ./packages/**/*.tsbuildinfo\n\n5:11:22 PM - Projects in this build: \r\n    * packages/core/tsconfig.build.json\r\n    * packages/http/tsconfig.build.json\r\n    * packages/http-server/tsconfig.build.json\r\n    * packages/cli/tsconfig.build.json\r\n    * packages/tsconfig.build.json\n\n5:11:22 PM - Project 'packages/core/tsconfig.build.json' is out of date because output file 'packages/core/tsconfig.build.tsbuildinfo' does not exist\n\n5:11:22 PM - Building project '/usr/src/prism/packages/core/tsconfig.build.json'...\n\n5:11:27 PM - Project 'packages/http/tsconfig.build.json' is out of date because output file 'packages/http/tsconfig.build.tsbuildinfo' does not exist\n\n5:11:27 PM - Building project '/usr/src/prism/packages/http/tsconfig.build.json'...\n\n5:11:32 PM - Project 'packages/http-server/tsconfig.build.json' is out of date because output file 'packages/http-server/tsconfig.build.tsbuildinfo' does not exist\n\n5:11:32 PM - Building project '/usr/src/prism/packages/http-server/tsconfig.build.json'...\n\n5:11:35 PM - Project 'packages/cli/tsconfig.build.json' is out of date because output file 'packages/cli/dist/combinators.js' does not exist\n\n5:11:35 PM - Building project '/usr/src/prism/packages/cli/tsconfig.build.json'...\n\nDone in 18.43s.\nRemoving intermediate container b2b7d9dbf0ae\n ---> df78c473437a\nStep 6/43 : FROM node:16 as dependencies\n ---> c910109adbfd\nStep 7/43 : WORKDIR /usr/src/prism/\n ---> Running in 05e9c3e7013c\nRemoving intermediate container 05e9c3e7013c\n ---> 9c586205f98c\nStep 8/43 : COPY package.json /usr/src/prism/\n ---> c83d04be6881\nStep 9/43 : RUN mkdir -p /usr/src/prism/node_modules\n ---> Running in a3bc3bc6eb2e\nRemoving intermediate container a3bc3bc6eb2e\n ---> d5909f66bc72\nStep 10/43 : COPY packages/core/package.json /usr/src/prism/packages/core/\n ---> c455bc8c0e05\nStep 11/43 : RUN mkdir -p /usr/src/prism/packages/core/node_modules\n ---> Running in e3e28c6be9d7\nRemoving intermediate container e3e28c6be9d7\n ---> 7631f137fc73\nStep 12/43 : COPY packages/http/package.json /usr/src/prism/packages/http/\n ---> 54338e75eeb2\nStep 13/43 : RUN mkdir -p /usr/src/prism/packages/http/node_modules\n ---> Running in b839037a8d92\nRemoving intermediate container b839037a8d92\n ---> 00ce49dbb15c\nStep 14/43 : COPY packages/http-server/package.json /usr/src/prism/packages/http-server/\n ---> e85f7c04ce08\nStep 15/43 : RUN mkdir -p /usr/src/prism/packages/http-server/node_modules\n ---> Running in 24789fbb7245\nRemoving intermediate container 24789fbb7245\n ---> 923eb757ccf3\nStep 16/43 : COPY packages/cli/package.json /usr/src/prism/packages/cli/\n ---> 9d85deb1e7c0\nStep 17/43 : RUN mkdir -p /usr/src/prism/packages/cli/node_modules\n ---> Running in c2289fa6f1e8\nRemoving intermediate container c2289fa6f1e8\n ---> 89556e535ddc\nStep 18/43 : ENV NODE_ENV production\n ---> Running in 1d0cd697fcbd\nRemoving intermediate container 1d0cd697fcbd\n ---> ede32476d04f\nStep 19/43 : RUN yarn --production\n ---> Running in 965ccd5bd696\nyarn install v1.22.19\ninfo No lockfile found.\n[1/4] Resolving packages...\n\u001b[91mwarning @types/faker@6.6.9: This is a stub types definition. faker provides its own type definitions, so you do not need this installed.\n\u001b[0m\u001b[91mwarning @types/pino > @types/pino-pretty@5.0.0: This is a stub types definition. pino-pretty provides its own type definitions, so you do not need this installed.\n\u001b[0m\u001b[91mwarning @types/pino > @types/pino-std-serializers@4.0.0: This is a stub types definition. pino-std-serializers provides its own type definitions, so you do not need this installed.\n\u001b[0m\u001b[91mwarning @types/pino > @types/sonic-boom@2.1.1: This is a stub types definition. sonic-boom provides its own type definitions, so you do not need this installed.\n\u001b[0m\u001b[91mwarning @types/raw-body@2.3.0: This is a stub types definition for raw-body (https://github.com/stream-utils/raw-body). raw-body provides its own type definitions, so you don't need @types/raw-body installed!\n\u001b[0m\u001b[91mwarning jest > jest-cli > jest-config > jest-environment-jsdom > jsdom > w3c-hr-time@1.0.2: Use your platform's native performance.now() and performance.timeOrigin.\n\u001b[0m\u001b[91mwarning lerna > @lerna/bootstrap > @npmcli/arborist > @npmcli/move-file@2.0.1: This functionality has been moved to @npmcli/fs\nwarning lerna > @lerna/add > pacote > cacache > @npmcli/move-file@2.0.1: This functionality has been moved to @npmcli/fs\n\u001b[0m\u001b[91mwarning lerna > @lerna/bootstrap > @npmcli/arborist > readdir-scoped-modules@1.1.0: This functionality has been moved to @npmcli/fs\n\u001b[0m\u001b[91mwarning workspace-aggregator-405f0e24-fb5f-4a17-8bb5-1d90f57fdc04 > @stoplight/prism-cli > json-schema-faker > json-schema-ref-parser@6.1.0: Please switch to @apidevtools/json-schema-ref-parser\n\u001b[0m\u001b[91mwarning workspace-aggregator-405f0e24-fb5f-4a17-8bb5-1d90f57fdc04 > @stoplight/prism-cli > @stoplight/http-spec > @stoplight/json-schema-generator > request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142\n\u001b[0m\u001b[91mwarning workspace-aggregator-405f0e24-fb5f-4a17-8bb5-1d90f57fdc04 > @stoplight/prism-cli > @stoplight/http-spec > @stoplight/json-schema-generator > request > uuid@3.4.0: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.\n\u001b[0m\u001b[91mwarning workspace-aggregator-405f0e24-fb5f-4a17-8bb5-1d90f57fdc04 > @stoplight/prism-cli > @stoplight/http-spec > @stoplight/json-schema-generator > request > har-validator@5.1.5: this library is no longer supported\n\u001b[0m[2/4] Fetching packages...\n[3/4] Linking dependencies...\n\u001b[91mwarning \" > @typescript-eslint/eslint-plugin@2.34.0\" has incorrect peer dependency \"@typescript-eslint/parser@^2.0.0\".\nwarning \" > @typescript-eslint/eslint-plugin@2.34.0\" has incorrect peer dependency \"eslint@^5.0.0 || ^6.0.0\".\n\u001b[0m[4/4] Building fresh packages...\nsuccess Saved lockfile.\nDone in 42.36s.\nRemoving intermediate container 965ccd5bd696\n ---> a2d79f071e21\nStep 20/43 : RUN if [ $(uname -m) != \"aarch64\" ]; then curl -sfL https://gobinaries.com/tj/node-prune | bash; fi\n ---> Running in f9b9055097c4\n\n\u001b[38;5;61m  ==>\u001b[0;00m Downloading github.com/tj/node-prune@master\n\u001b[38;5;61m  ==>\u001b[0;00m Resolved version master to v1.2.0\n\u001b[38;5;61m  ==>\u001b[0;00m Downloading binary for linux amd64\n\u001b[38;5;61m  ==>\u001b[0;00m Installing node-prune to /usr/local/bin\n\u001b[38;5;61m  ==>\u001b[0;00m Installation complete\n\nRemoving intermediate container f9b9055097c4\n ---> 08fb898c6a22\nStep 21/43 : RUN if [ $(uname -m) != \"aarch64\" ]; then node-prune; fi\n ---> Running in ce3dd6c622ac\n\u001b[91m\n\n\u001b[0m\u001b[1m         files total\u001b[0m 12,699\n\u001b[1m       files removed\u001b[0m 3,700\n\u001b[1m        size removed\u001b[0m 11 MB\n\u001b[1m            duration\u001b[0m 651ms\nRemoving intermediate container ce3dd6c622ac\n ---> 82180ca32476\nStep 22/43 : FROM node:16-alpine\n ---> 610c0494e820\nStep 23/43 : WORKDIR /usr/src/prism\n ---> Running in d2e5594233d2\nRemoving intermediate container d2e5594233d2\n ---> 8f9118a6678c\nStep 24/43 : ARG BUILD_TYPE=development\n ---> Running in cdb5db47e1f8\nRemoving intermediate container cdb5db47e1f8\n ---> 4c985271cedd\nStep 25/43 : ENV NODE_ENV production\n ---> Running in 8db6aa0afe34\nRemoving intermediate container 8db6aa0afe34\n ---> 03cd6f8b31e7\nStep 26/43 : COPY package.json /usr/src/prism/\n ---> 5b6bed255970\nStep 27/43 : COPY packages/core/package.json /usr/src/prism/packages/core/\n ---> 533a6eb193e9\nStep 28/43 : COPY packages/http/package.json /usr/src/prism/packages/http/\n ---> f8e2f815f2e0\nStep 29/43 : COPY packages/http-server/package.json /usr/src/prism/packages/http-server/\n ---> 8ab35a1b13f5\nStep 30/43 : COPY packages/cli/package.json /usr/src/prism/packages/cli/\n ---> a9f804b772d0\nStep 31/43 : COPY --from=compiler /usr/src/prism/packages/core/dist /usr/src/prism/packages/core/dist\n ---> d771fecef4d0\nStep 32/43 : COPY --from=compiler /usr/src/prism/packages/http/dist /usr/src/prism/packages/http/dist\n ---> 9ab612d716e1\nStep 33/43 : COPY --from=compiler /usr/src/prism/packages/http-server/dist /usr/src/prism/packages/http-server/dist\n ---> 6870154d526f\nStep 34/43 : COPY --from=compiler /usr/src/prism/packages/cli/dist /usr/src/prism/packages/cli/dist\n ---> 57f56b6b8734\nStep 35/43 : COPY --from=dependencies /usr/src/prism/node_modules/ /usr/src/prism/node_modules/\n ---> 4d623e62ab00\nStep 36/43 : COPY --from=dependencies /usr/src/prism/packages/core/node_modules/ /usr/src/prism/packages/core/node_modules/\n ---> 641a80f65865\nStep 37/43 : COPY --from=dependencies /usr/src/prism/packages/http/node_modules/ /usr/src/prism/packages/http/node_modules/\n ---> 7d12f257d17c\nStep 38/43 : COPY --from=dependencies /usr/src/prism/packages/http-server/node_modules/ /usr/src/prism/packages/http-server/node_modules/\n ---> 63576a2a3407\nStep 39/43 : COPY --from=dependencies /usr/src/prism/packages/cli/node_modules/ /usr/src/prism/packages/cli/node_modules/\n ---> 7eb069d8f9fb\nStep 40/43 : WORKDIR /usr/src/prism/packages/cli/\n ---> Running in caa1172bca82\nRemoving intermediate container caa1172bca82\n ---> 05dbefb1dc7e\nStep 41/43 : RUN if [ \"$BUILD_TYPE\" = \"development\" ] ; then     cd /usr/src/prism/packages/core && yarn link &&     cd /usr/src/prism/packages/http && yarn link @stoplight/prism-core && yarn link &&     cd /usr/src/prism/packages/http-server && yarn link @stoplight/prism-core && yarn link @stoplight/prism-http && yarn link &&     cd /usr/src/prism/packages/cli && yarn link @stoplight/prism-core && yarn link @stoplight/prism-http && yarn link @stoplight/prism-http-server && yarn link ; fi\n ---> Running in f6318e928562\nyarn link v1.22.19\nsuccess Registered \"@stoplight/prism-core\".\ninfo You can now run `yarn link \"@stoplight/prism-core\"` in the projects where you want to use this package and it will be used instead.\nDone in 0.07s.\nyarn link v1.22.19\nsuccess Using linked package for \"@stoplight/prism-core\".\nDone in 0.05s.\nyarn link v1.22.19\nsuccess Registered \"@stoplight/prism-http\".\ninfo You can now run `yarn link \"@stoplight/prism-http\"` in the projects where you want to use this package and it will be used instead.\nDone in 0.05s.\nyarn link v1.22.19\nsuccess Using linked package for \"@stoplight/prism-core\".\nDone in 0.04s.\nyarn link v1.22.19\nsuccess Using linked package for \"@stoplight/prism-http\".\nDone in 0.07s.\nyarn link v1.22.19\nsuccess Registered \"@stoplight/prism-http-server\".\ninfo You can now run `yarn link \"@stoplight/prism-http-server\"` in the projects where you want to use this package and it will be used instead.\nDone in 0.07s.\nyarn link v1.22.19\nsuccess Using linked package for \"@stoplight/prism-core\".\nDone in 0.05s.\nyarn link v1.22.19\nsuccess Using linked package for \"@stoplight/prism-http\".\nDone in 0.05s.\nyarn link v1.22.19\nsuccess Using linked package for \"@stoplight/prism-http-server\".\nDone in 0.04s.\nyarn link v1.22.19\nsuccess Registered \"@stoplight/prism-cli\".\ninfo You can now run `yarn link \"@stoplight/prism-cli\"` in the projects where you want to use this package and it will be used instead.\nDone in 0.05s.\nRemoving intermediate container f6318e928562\n ---> e01941321f61\nStep 42/43 : EXPOSE 4010\n ---> Running in da05775f7e6e\nRemoving intermediate container da05775f7e6e\n ---> 6448266b9997\nStep 43/43 : ENTRYPOINT [ \"node\", \"dist/index.js\" ]\n ---> Running in cf35d8ca210c\nRemoving intermediate container cf35d8ca210c\n ---> 393d4c3694bc\nSuccessfully built 393d4c3694bc\nSuccessfully tagged prism:latest\n","stderr":"","imageSize":154063725},"endTime":1672161327216}