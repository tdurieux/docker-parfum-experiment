{"repository":"https://github.com/edgurgel/httparrot","dockerfilePath":"Dockerfile","startTime":1673058264715,"endTime":1673058374633,"clone":{"startTime":1673058264716,"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/edgurgel/httparrot'...\n","error":null,"endTime":1673058265438,"commit":"b09754cae3c6e2b5e4edc80944d83b0890bfe715"},"originalBuild":{"startTime":1673058265530,"endTime":1673058324217,"error":null,"stdout":"Sending build context to Docker daemon  357.4kB\r\r\nStep 1/23 : FROM elixir:1.9.0-alpine as build\n1.9.0-alpine: Pulling from library/elixir\ne7c96db7181b: Already exists\nc306444e2774: Pulling fs layer\n4b80324f258b: Pulling fs layer\n4b80324f258b: Verifying Checksum\n4b80324f258b: Download complete\nc306444e2774: Verifying Checksum\nc306444e2774: Download complete\nc306444e2774: Pull complete\n4b80324f258b: Pull complete\nDigest: sha256:bd6e03f00f57a121f6f31374d693e9027ce6053e25700be4d7c64f83dd249a56\nStatus: Downloaded newer image for elixir:1.9.0-alpine\n ---> 7a6d28e4b511\nStep 2/23 : ENV MIX_ENV=prod\n ---> Running in b261430c8374\nRemoving intermediate container b261430c8374\n ---> afd87dd81a5a\nStep 3/23 : RUN mkdir /app\n ---> Running in 4333dc6733da\nRemoving intermediate container 4333dc6733da\n ---> bfd546e7b1de\nStep 4/23 : WORKDIR /app\n ---> Running in 6c713d586ff1\nRemoving intermediate container 6c713d586ff1\n ---> 573738894c36\nStep 5/23 : RUN mix local.hex --force && mix local.rebar --force\n ---> Running in 206a7b2293b9\n* creating /root/.mix/archives/hex-2.0.0\n* creating /root/.mix/rebar\n* creating /root/.mix/rebar3\nRemoving intermediate container 206a7b2293b9\n ---> d34e5563b69e\nStep 6/23 : COPY mix.exs mix.lock ./\n ---> d4f143f4b4ab\nStep 7/23 : COPY config config\n ---> 7751ce9f9c1b\nStep 8/23 : RUN mix deps.get\n ---> Running in b9e1e12b2f41\nResolving Hex dependencies...\nResolution completed in 0.071s\nUnchanged:\n  con_cache 0.14.0\n  cowboy 2.8.0\n  cowlib 2.9.1\n  earmark 1.4.6\n  ex_doc 0.22.1\n  exjsx 4.0.0\n  jsx 2.8.3\n  makeup 1.0.3\n  makeup_elixir 0.14.1\n  meck 0.8.13\n  nimble_parsec 0.6.0\n  ranch 1.7.1\n* Getting cowboy (Hex package)\n* Getting exjsx (Hex package)\n* Getting con_cache (Hex package)\n* Getting earmark (Hex package)\n* Getting ex_doc (Hex package)\n* Getting meck (Hex package)\n* Getting makeup_elixir (Hex package)\n* Getting makeup (Hex package)\n* Getting nimble_parsec (Hex package)\n* Getting jsx (Hex package)\n* Getting cowlib (Hex package)\n* Getting ranch (Hex package)\nRemoving intermediate container b9e1e12b2f41\n ---> 0facc8f95fa3\nStep 9/23 : RUN mix deps.compile\n ---> Running in 3a886abc4080\n==> con_cache\nCompiling 8 files (.ex)\nGenerated con_cache app\n===> Compiling ranch\n==> jsx\nCompiling 9 files (.erl)\nGenerated jsx app\n==> exjsx\nCompiling 1 file (.ex)\nGenerated exjsx app\n===> Compiling cowlib\n===> Compiling cowboy\nRemoving intermediate container 3a886abc4080\n ---> f975d33d0077\nStep 10/23 : COPY priv priv\n ---> 7ba5c73613b1\nStep 11/23 : COPY lib lib\n ---> 0bb9e0f282af\nStep 12/23 : RUN mix compile\n ---> Running in b02bfb9091e4\nCompiling 33 files (.ex)\nGenerated httparrot app\nRemoving intermediate container b02bfb9091e4\n ---> bf896b8c93a8\nStep 13/23 : COPY rel rel\n ---> 4157716817f4\nStep 14/23 : RUN mix release\n ---> Running in 1a2a20fb3ab4\n* assembling httparrot-1.3.0 on MIX_ENV=prod\n* using config/releases.exs to configure the release at runtime\n* creating _build/prod/rel/httparrot/releases/1.3.0/vm.args\n* creating _build/prod/rel/httparrot/releases/1.3.0/env.sh\n* creating _build/prod/rel/httparrot/releases/1.3.0/env.bat\n* skipping elixir.bat for windows (bin/elixir.bat not found in the Elixir installation)\n* skipping iex.bat for windows (bin/iex.bat not found in the Elixir installation)\n\nRelease created at _build/prod/rel/httparrot!\n\n    # To start your system\n    _build/prod/rel/httparrot/bin/httparrot start\n\nOnce the release is running:\n\n    # To connect to it remotely\n    _build/prod/rel/httparrot/bin/httparrot remote\n\n    # To stop it gracefully (you may also send SIGINT/SIGTERM)\n    _build/prod/rel/httparrot/bin/httparrot stop\n\nTo list all commands:\n\n    _build/prod/rel/httparrot/bin/httparrot\n\nRemoving intermediate container 1a2a20fb3ab4\n ---> 058c87f5e2d6\nStep 15/23 : FROM alpine:3.9 AS app\n3.9: Pulling from library/alpine\n31603596830f: Pulling fs layer\n31603596830f: Verifying Checksum\n31603596830f: Download complete\n31603596830f: Pull complete\nDigest: sha256:414e0518bb9228d35e4cd5165567fb91d26c6a214e9c95899e1e056fcd349011\nStatus: Downloaded newer image for alpine:3.9\n ---> 78a2ce922f86\nStep 16/23 : RUN apk add --update bash openssl\n ---> Running in 80898620643e\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.9/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.9/community/x86_64/APKINDEX.tar.gz\n(1/6) Installing ncurses-terminfo-base (6.1_p20190105-r0)\n(2/6) Installing ncurses-terminfo (6.1_p20190105-r0)\n(3/6) Installing ncurses-libs (6.1_p20190105-r0)\n(4/6) Installing readline (7.0.003-r1)\n(5/6) Installing bash (4.4.19-r1)\nExecuting bash-4.4.19-r1.post-install\n(6/6) Installing openssl (1.1.1k-r0)\nExecuting busybox-1.29.3-r10.trigger\nOK: 15 MiB in 20 packages\nRemoving intermediate container 80898620643e\n ---> 9b5d8e1cb1cb\nStep 17/23 : RUN mkdir /app\n ---> Running in 75190042b999\nRemoving intermediate container 75190042b999\n ---> 6b05609172d4\nStep 18/23 : WORKDIR /app\n ---> Running in 0844f0b4d953\nRemoving intermediate container 0844f0b4d953\n ---> f2502643a731\nStep 19/23 : COPY --from=build /app/_build/prod/rel/httparrot ./\n ---> 9203485982b9\nStep 20/23 : RUN chown -R nobody: /app\n ---> Running in 6d099625dab0\nRemoving intermediate container 6d099625dab0\n ---> da66e68bfa41\nStep 21/23 : USER nobody\n ---> Running in 8539afe1989f\nRemoving intermediate container 8539afe1989f\n ---> 35ddcda6c84a\nStep 22/23 : ENV HOME=/app\n ---> Running in 5df912f5fed0\nRemoving intermediate container 5df912f5fed0\n ---> e93877c4820a\nStep 23/23 : CMD /app/bin/httparrot start\n ---> Running in 82d4ab5d0a9d\nRemoving intermediate container 82d4ab5d0a9d\n ---> 970417d38ad2\nSuccessfully built 970417d38ad2\nSuccessfully tagged httparrot:latest\n","stderr":"","imageSize":32841496},"repair":{"startTime":1673058324284,"endTime":1673058324342,"violations":[{"name":"apkAddUseNoCache","position":{"start":27,"end":27,"columnStart":4,"columnEnd":33}}],"repairedDockerfile":"# Based on https://github.com/hexpm/hexpm/blob/08e80ed4fe82b145f6cee1d01da16e162add2a56/Dockerfile\nFROM elixir:1.9.0-alpine as build\n\nENV MIX_ENV=prod\n\nRUN mkdir /app\nWORKDIR /app\n\nRUN mix local.hex --force && mix local.rebar --force\n\n# install mix dependencies\nCOPY mix.exs mix.lock ./\nCOPY config config\nRUN mix deps.get\nRUN mix deps.compile\n\n# build project\nCOPY priv priv\nCOPY lib lib\nRUN mix compile\n\n# build release\nCOPY rel rel\nRUN mix release\n\n# prepare release image\nFROM alpine:3.9 AS app\nRUN apk add --no-cache --update bash openssl\n\nRUN mkdir /app\nWORKDIR /app\n\nCOPY --from=build /app/_build/prod/rel/httparrot ./\nRUN chown -R nobody: /app\nUSER nobody\n\nENV HOME=/app\nCMD /app/bin/httparrot start\n"},"repairedBuild":{"startTime":1673058324561,"endTime":1673058374344,"error":null,"stdout":"Sending build context to Docker daemon  357.4kB\r\r\nStep 1/23 : FROM elixir:1.9.0-alpine as build\n ---> 7a6d28e4b511\nStep 2/23 : ENV MIX_ENV=prod\n ---> Running in 2c418cbf69bc\nRemoving intermediate container 2c418cbf69bc\n ---> d56f9fbd71ba\nStep 3/23 : RUN mkdir /app\n ---> Running in 9e8cd91447a9\nRemoving intermediate container 9e8cd91447a9\n ---> 1615814e30a6\nStep 4/23 : WORKDIR /app\n ---> Running in 22dd6718ab14\nRemoving intermediate container 22dd6718ab14\n ---> 89a46b37135e\nStep 5/23 : RUN mix local.hex --force && mix local.rebar --force\n ---> Running in 00cfc7c351be\n* creating /root/.mix/archives/hex-2.0.0\n* creating /root/.mix/rebar\n* creating /root/.mix/rebar3\nRemoving intermediate container 00cfc7c351be\n ---> 1fb78a5971a3\nStep 6/23 : COPY mix.exs mix.lock ./\n ---> 430f4e48bdb9\nStep 7/23 : COPY config config\n ---> 8fb194bc6032\nStep 8/23 : RUN mix deps.get\n ---> Running in ed4c828f84d5\nResolving Hex dependencies...\nResolution completed in 0.057s\nUnchanged:\n  con_cache 0.14.0\n  cowboy 2.8.0\n  cowlib 2.9.1\n  earmark 1.4.6\n  ex_doc 0.22.1\n  exjsx 4.0.0\n  jsx 2.8.3\n  makeup 1.0.3\n  makeup_elixir 0.14.1\n  meck 0.8.13\n  nimble_parsec 0.6.0\n  ranch 1.7.1\n* Getting cowboy (Hex package)\n* Getting exjsx (Hex package)\n* Getting con_cache (Hex package)\n* Getting earmark (Hex package)\n* Getting ex_doc (Hex package)\n* Getting meck (Hex package)\n* Getting makeup_elixir (Hex package)\n* Getting makeup (Hex package)\n* Getting nimble_parsec (Hex package)\n* Getting jsx (Hex package)\n* Getting cowlib (Hex package)\n* Getting ranch (Hex package)\nRemoving intermediate container ed4c828f84d5\n ---> 50a81fa89f98\nStep 9/23 : RUN mix deps.compile\n ---> Running in 1dddb948f898\n==> con_cache\nCompiling 8 files (.ex)\nGenerated con_cache app\n===> Compiling ranch\n==> jsx\nCompiling 9 files (.erl)\nGenerated jsx app\n==> exjsx\nCompiling 1 file (.ex)\nGenerated exjsx app\n===> Compiling cowlib\n===> Compiling cowboy\nRemoving intermediate container 1dddb948f898\n ---> e1e2b24c2199\nStep 10/23 : COPY priv priv\n ---> 45f7f47ab4a1\nStep 11/23 : COPY lib lib\n ---> c2a836fecd4e\nStep 12/23 : RUN mix compile\n ---> Running in a010f4f3b263\nCompiling 33 files (.ex)\nGenerated httparrot app\nRemoving intermediate container a010f4f3b263\n ---> 39eaefbdcd82\nStep 13/23 : COPY rel rel\n ---> 576c233e2c1f\nStep 14/23 : RUN mix release\n ---> Running in 6ef51a6b24a1\n* assembling httparrot-1.3.0 on MIX_ENV=prod\n* using config/releases.exs to configure the release at runtime\n* creating _build/prod/rel/httparrot/releases/1.3.0/vm.args\n* creating _build/prod/rel/httparrot/releases/1.3.0/env.sh\n* creating _build/prod/rel/httparrot/releases/1.3.0/env.bat\n* skipping elixir.bat for windows (bin/elixir.bat not found in the Elixir installation)\n* skipping iex.bat for windows (bin/iex.bat not found in the Elixir installation)\n\nRelease created at _build/prod/rel/httparrot!\n\n    # To start your system\n    _build/prod/rel/httparrot/bin/httparrot start\n\nOnce the release is running:\n\n    # To connect to it remotely\n    _build/prod/rel/httparrot/bin/httparrot remote\n\n    # To stop it gracefully (you may also send SIGINT/SIGTERM)\n    _build/prod/rel/httparrot/bin/httparrot stop\n\nTo list all commands:\n\n    _build/prod/rel/httparrot/bin/httparrot\n\nRemoving intermediate container 6ef51a6b24a1\n ---> 2c86606d4cbf\nStep 15/23 : FROM alpine:3.9 AS app\n ---> 78a2ce922f86\nStep 16/23 : RUN apk add --no-cache --update bash openssl\n ---> Running in 6be7ea75f93f\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.9/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.9/community/x86_64/APKINDEX.tar.gz\n(1/6) Installing ncurses-terminfo-base (6.1_p20190105-r0)\n(2/6) Installing ncurses-terminfo (6.1_p20190105-r0)\n(3/6) Installing ncurses-libs (6.1_p20190105-r0)\n(4/6) Installing readline (7.0.003-r1)\n(5/6) Installing bash (4.4.19-r1)\nExecuting bash-4.4.19-r1.post-install\n(6/6) Installing openssl (1.1.1k-r0)\nExecuting busybox-1.29.3-r10.trigger\nOK: 15 MiB in 20 packages\nRemoving intermediate container 6be7ea75f93f\n ---> 8eda965d75bd\nStep 17/23 : RUN mkdir /app\n ---> Running in 06c95e4d9606\nRemoving intermediate container 06c95e4d9606\n ---> d1f7da35d32e\nStep 18/23 : WORKDIR /app\n ---> Running in 52571596cc5d\nRemoving intermediate container 52571596cc5d\n ---> 9a2f176ccdb2\nStep 19/23 : COPY --from=build /app/_build/prod/rel/httparrot ./\n ---> 4fd519b26bfa\nStep 20/23 : RUN chown -R nobody: /app\n ---> Running in e6b96cb9ad97\nRemoving intermediate container e6b96cb9ad97\n ---> 44c95babc3db\nStep 21/23 : USER nobody\n ---> Running in c6795d7bf91f\nRemoving intermediate container c6795d7bf91f\n ---> f0211de8c9aa\nStep 22/23 : ENV HOME=/app\n ---> Running in ffa80f939fb9\nRemoving intermediate container ffa80f939fb9\n ---> 93a1349d267e\nStep 23/23 : CMD /app/bin/httparrot start\n ---> Running in 134edf41bf33\nRemoving intermediate container 134edf41bf33\n ---> b5422211622b\nSuccessfully built b5422211622b\nSuccessfully tagged httparrot:latest\n","stderr":"","imageSize":31527831}}