{"repository":"https://github.com/python-discord/pixels","dockerfilePath":"Dockerfile","startTime":1672099401242,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/python-discord/pixels'...\n","error":null,"commit":"636dc82a69df392d08ec589a580f849d45ae71f4"},"originalBuild":{"startTimestamp":1672099402175,"endTimestamp":1672099443368,"error":null,"stdout":"Sending build context to Docker daemon  268.3kB\r\r\nStep 1/12 : FROM --platform=linux/amd64 ghcr.io/chrislovering/python-poetry-base:3.9-slim\n3.9-slim: Pulling from chrislovering/python-poetry-base\ne9995326b091: Pulling fs layer\nf3d7f077cdde: Pulling fs layer\n0db71afa16f3: Pulling fs layer\n6f0b5905c60c: Pulling fs layer\n9d2154d50fd1: Pulling fs layer\nd47e3da6f635: Pulling fs layer\nc85c291d0ebe: Pulling fs layer\n9d2154d50fd1: Waiting\n6f0b5905c60c: Waiting\nd47e3da6f635: Waiting\nc85c291d0ebe: Waiting\nf3d7f077cdde: Verifying Checksum\nf3d7f077cdde: Download complete\n0db71afa16f3: Verifying Checksum\n0db71afa16f3: Download complete\n6f0b5905c60c: Verifying Checksum\n6f0b5905c60c: Download complete\n9d2154d50fd1: Verifying Checksum\n9d2154d50fd1: Download complete\ne9995326b091: Verifying Checksum\ne9995326b091: Download complete\nd47e3da6f635: Verifying Checksum\nd47e3da6f635: Download complete\nc85c291d0ebe: Verifying Checksum\nc85c291d0ebe: Download complete\ne9995326b091: Pull complete\nf3d7f077cdde: Pull complete\n0db71afa16f3: Pull complete\n6f0b5905c60c: Pull complete\n9d2154d50fd1: Pull complete\nd47e3da6f635: Pull complete\nc85c291d0ebe: Pull complete\nDigest: sha256:4048b89959d2271b7ca0984ea1d8b9691406101f418d58d979a82d016f2ff977\nStatus: Downloaded newer image for ghcr.io/chrislovering/python-poetry-base:3.9-slim\n ---> 1a5b8f9c0c45\nStep 2/12 : ENV MAX_WORKERS=10\n ---> Running in 7c6feda007af\nRemoving intermediate container 7c6feda007af\n ---> 63ea0b0cc9bb\nStep 3/12 : WORKDIR /pixels\n ---> Running in e2fbb780a485\nRemoving intermediate container e2fbb780a485\n ---> 97a1193ee397\nStep 4/12 : COPY pyproject.toml poetry.lock ./\n ---> c0d4d3bb7fda\nStep 5/12 : RUN poetry install --without dev\n ---> Running in 4f056dc5d193\nCreating virtualenv pixels-u75BJF6W-py3.9 in /opt/poetry/cache/virtualenvs\nInstalling dependencies from lock file\n\nPackage operations: 46 installs, 0 updates, 0 removals\n\n  • Installing idna (2.10)\n  • Installing pycparser (2.20)\n  • Installing sniffio (1.2.0)\n  • Installing anyio (3.2.1)\n  • Installing cffi (1.14.5)\n  • Installing h11 (0.12.0)\n  • Installing markupsafe (2.0.1)\n  • Installing greenlet (1.1.0)\n  • Installing six (1.16.0)\n  • Installing pyasn1 (0.4.8)\n  • Installing typing-extensions (3.10.0.0)\n  • Installing asgiref (3.3.4)\n  • Installing async-timeout (3.0.1)\n  • Installing click (8.0.1)\n  • Installing cryptography (3.4.7)\n  • Installing certifi (2021.5.30)\n  • Installing httpcore (0.13.6)\n  • Installing ecdsa (0.17.0)\n  • Installing pydantic (1.8.2)\n  • Installing python-dateutil (2.8.1)\n  • Installing mako (1.1.4)\n  • Installing hiredis (2.0.0)\n  • Installing python-editor (1.0.4)\n  • Installing pyyaml (5.4.1)\n  • Installing rfc3986 (1.5.0)\n  • Installing rsa (4.7.2)\n  • Installing python-dotenv (0.18.0)\n  • Installing httptools (0.2.0)\n  • Installing sqlalchemy (1.4.19)\n  • Installing starlette (0.14.2)\n  • Installing uvloop (0.15.2)\n  • Installing watchgod (0.7)\n  • Installing websockets (9.1)\nConnection pool is full, discarding connection: pypi.org. Connection pool size: 10\nConnection pool is full, discarding connection: pypi.org. Connection pool size: 10\nConnection pool is full, discarding connection: pypi.org. Connection pool size: 10\nConnection pool is full, discarding connection: pypi.org. Connection pool size: 10\nConnection pool is full, discarding connection: pypi.org. Connection pool size: 10\nConnection pool is full, discarding connection: pypi.org. Connection pool size: 10\nConnection pool is full, discarding connection: pypi.org. Connection pool size: 10\nConnection pool is full, discarding connection: pypi.org. Connection pool size: 10\nConnection pool is full, discarding connection: pypi.org. Connection pool size: 10\nConnection pool is full, discarding connection: pypi.org. Connection pool size: 10\nConnection pool is full, discarding connection: pypi.org. Connection pool size: 10\nConnection pool is full, discarding connection: pypi.org. Connection pool size: 10\nConnection pool is full, discarding connection: files.pythonhosted.org. Connection pool size: 10\nConnection pool is full, discarding connection: files.pythonhosted.org. Connection pool size: 10\nConnection pool is full, discarding connection: files.pythonhosted.org. Connection pool size: 10\nConnection pool is full, discarding connection: files.pythonhosted.org. Connection pool size: 10\nConnection pool is full, discarding connection: files.pythonhosted.org. Connection pool size: 10\nConnection pool is full, discarding connection: files.pythonhosted.org. Connection pool size: 10\nConnection pool is full, discarding connection: files.pythonhosted.org. Connection pool size: 10\nConnection pool is full, discarding connection: files.pythonhosted.org. Connection pool size: 10\n  • Installing aiofiles (0.7.0)\n  • Installing aioredis (1.3.1)\n  • Installing alembic (1.6.5)\n  • Installing asyncpg (0.23.0)\n  • Installing fastapi (0.65.2)\n  • Installing gunicorn (20.1.0)\n  • Installing httpx (0.18.2)\n  • Installing pillow (9.0.0)\n  • Installing python-jose (3.3.0)\n  • Installing tomlkit (0.7.2)\n  • Installing python-decouple (3.4)\n  • Installing uvicorn (0.14.0)\n  • Installing jinja2 (3.0.1)\nConnection pool is full, discarding connection: pypi.org. Connection pool size: 10\nConnection pool is full, discarding connection: pypi.org. Connection pool size: 10\nConnection pool is full, discarding connection: pypi.org. Connection pool size: 10\nRemoving intermediate container 4f056dc5d193\n ---> 4c5a82e5d021\nStep 6/12 : COPY ./gunicorn_conf.py /gunicorn_conf.py\n ---> 11e162a43b2a\nStep 7/12 : ARG git_sha=\"development\"\n ---> Running in 048d3d9998ce\nRemoving intermediate container 048d3d9998ce\n ---> c25adef6e489\nStep 8/12 : ENV GIT_SHA=$git_sha\n ---> Running in f9f92e37799f\nRemoving intermediate container f9f92e37799f\n ---> d4416766c774\nStep 9/12 : COPY . .\n ---> c64b6467952d\nStep 10/12 : EXPOSE 80\n ---> Running in e6877454ad0b\nRemoving intermediate container e6877454ad0b\n ---> 2f47549a29cf\nStep 11/12 : ENTRYPOINT [\"poetry\", \"run\"]\n ---> Running in 42d8b6a26d11\nRemoving intermediate container 42d8b6a26d11\n ---> 0e27e5b7f2ec\nStep 12/12 : CMD [\"gunicorn\", \"-k\", \"uvicorn.workers.UvicornWorker\", \"-c\", \"/gunicorn_conf.py\", \"pixels:app\"]\n ---> Running in 9a151219f313\nRemoving intermediate container 9a151219f313\n ---> 15339435def7\nSuccessfully built 15339435def7\nSuccessfully tagged pixels:latest\n","stderr":"","imageSize":436820132},"repair":{"violations":[],"repairedDockerfile":"FROM --platform=linux/amd64 ghcr.io/chrislovering/python-poetry-base:3.9-slim\n\nENV MAX_WORKERS=10\n\n# Create the working directory\nWORKDIR /pixels\n\n# Install project dependencies\nCOPY pyproject.toml poetry.lock ./\nRUN poetry install --without dev\n\n# Copy in the Gunicorn config\nCOPY ./gunicorn_conf.py /gunicorn_conf.py\n\n# Define Git SHA build argument\nARG git_sha=\"development\"\n\n# Set Git SHA environment variable for Sentry\nENV GIT_SHA=$git_sha\n\n# Copy the source code in last to optimize rebuilding the image\nCOPY . .\n\nEXPOSE 80\n\n# Run the start script, it will check for an /app/prestart.sh script (e.g. for migrations),\n# and then it will start Gunicorn with Uvicorn workers.\nENTRYPOINT [\"poetry\", \"run\"]\nCMD [\"gunicorn\", \"-k\", \"uvicorn.workers.UvicornWorker\", \"-c\", \"/gunicorn_conf.py\", \"pixels:app\"]\n"},"endTime":1672099446060}