{"repository":"https://github.com/honeycombio/honeytail","dockerfilePath":"Dockerfile","startTime":1672365388346,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/honeycombio/honeytail'...\n","error":null,"commit":"ec713113bafb62dac39d9d7e0def9c163bc43249"},"originalBuild":{"startTimestamp":1672365389289,"endTimestamp":1672365418153,"error":null,"stdout":"Sending build context to Docker daemon  694.8kB\r\r\nStep 1/14 : FROM alpine:3.16\n3.16: Pulling from library/alpine\nca7dd9ec2225: Pulling fs layer\nca7dd9ec2225: Verifying Checksum\nca7dd9ec2225: Download complete\nca7dd9ec2225: Pull complete\nDigest: sha256:b95359c2505145f16c6aa384f9cc74eeff78eb36d308ca4fd902eeeb0a0b161b\nStatus: Downloaded newer image for alpine:3.16\n ---> bfe296a52501\nStep 2/14 : ENV GOROOT /usr/lib/go\n ---> Running in c9eb26b7cb58\nRemoving intermediate container c9eb26b7cb58\n ---> 08e03b426800\nStep 3/14 : ENV GOPATH /gopath\n ---> Running in e7ad7e73d639\nRemoving intermediate container e7ad7e73d639\n ---> dd8458879208\nStep 4/14 : ENV GOBIN /gopath/bin\n ---> Running in 13c017450d4f\nRemoving intermediate container 13c017450d4f\n ---> f7a0b50d7099\nStep 5/14 : ENV PATH $PATH:$GOROOT/bin:$GOPATH/bin\n ---> Running in 55abb377ab58\nRemoving intermediate container 55abb377ab58\n ---> d4670d70e06e\nStep 6/14 : WORKDIR /gopath/src/github.com/honeycombio/honeytail\n ---> Running in 61cf2ee7d5a5\nRemoving intermediate container 61cf2ee7d5a5\n ---> 5ec9a2d06f85\nStep 7/14 : COPY . /gopath/src/github.com/honeycombio/honeytail/\n ---> c38e5d06a46a\nStep 8/14 : RUN apk add --update         coreutils         go         git         openssl         ca-certificates         musl-dev     && ver=$(git rev-parse --short HEAD)     && git clean -f     && rm -rf .git     && go install -ldflags=\"-X main.BuildID=${ver}\" github.com/honeycombio/honeytail     && apk del git go     && rm -rf /var/cache/apk/*\n ---> Running in 7e219df52e0c\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/community/x86_64/APKINDEX.tar.gz\n(1/26) Upgrading musl (1.2.3-r1 -> 1.2.3-r2)\n(2/26) Installing ca-certificates (20220614-r0)\n(3/26) Installing libacl (2.3.1-r0)\n(4/26) Installing libattr (2.5.1-r1)\n(5/26) Installing gmp (6.2.1-r2)\n(6/26) Installing skalibs (2.11.2.0-r0)\n(7/26) Installing utmps-libs (0.1.2.0-r0)\n(8/26) Installing coreutils (9.1-r0)\n(9/26) Installing brotli-libs (1.0.9-r6)\n(10/26) Installing nghttp2-libs (1.47.0-r0)\n(11/26) Installing libcurl (7.83.1-r5)\n(12/26) Installing expat (2.5.0-r0)\n(13/26) Installing pcre2 (10.40-r0)\n(14/26) Installing git (2.36.3-r0)\n(15/26) Installing libgcc (11.2.1_git20220219-r2)\n(16/26) Installing libstdc++ (11.2.1_git20220219-r2)\n(17/26) Installing binutils (2.38-r3)\n(18/26) Installing libgomp (11.2.1_git20220219-r2)\n(19/26) Installing libatomic (11.2.1_git20220219-r2)\n(20/26) Installing isl22 (0.22-r0)\n(21/26) Installing mpfr4 (4.1.0-r0)\n(22/26) Installing mpc1 (1.2.1-r0)\n(23/26) Installing gcc (11.2.1_git20220219-r2)\n(24/26) Installing musl-dev (1.2.3-r2)\n(25/26) Installing go (1.18.7-r0)\n(26/26) Installing openssl (1.1.1s-r0)\nExecuting busybox-1.35.0-r17.trigger\nExecuting ca-certificates-20220614-r0.trigger\nOK: 514 MiB in 39 packages\n\u001b[91mgo: downloading github.com/honeycombio/dynsampler-go v0.2.1\n\u001b[0m\u001b[91mgo: downloading github.com/honeycombio/urlshaper v0.0.0-20170302202025-2baba9ae5b5f\n\u001b[0m\u001b[91mgo: downloading gopkg.in/yaml.v3 v3.0.1\ngo: downloading github.com/honeycombio/libhoney-go v1.18.0\n\u001b[0m\u001b[91mgo: downloading github.com/sirupsen/logrus v1.9.0\n\u001b[0m\u001b[91mgo: downloading github.com/kr/logfmt v0.0.0-20140226030751-b84e30acd515\ngo: downloading github.com/hpcloud/tail v1.0.1-0.20170814160653-37f427138745\n\u001b[0m\u001b[91mgo: downloading golang.org/x/sys v0.0.0-20220825204002-c680a09ffe64\ngo: downloading github.com/jessevdk/go-flags v1.5.0\ngo: downloading github.com/honeycombio/gonx v1.3.1-0.20171118020637-f9b2468e9ef8\n\u001b[0m\u001b[91mgo: downloading github.com/honeycombio/mysqltools v0.0.1\n\u001b[0m\u001b[91mgo: downloading github.com/go-sql-driver/mysql v1.6.0\ngo: downloading github.com/jeromer/syslogparser v0.0.0-20190429161531-5fbaaf06d9e7\n\u001b[0m\u001b[91mgo: downloading github.com/honeycombio/sqlparser v0.0.0-20180730202938-aab361df519b\n\u001b[0m\u001b[91mgo: downloading gopkg.in/tomb.v1 v1.0.0-20141024135613-dd632973f1e7\n\u001b[0m\u001b[91mgo: downloading gopkg.in/fsnotify.v1 v1.4.7\n\u001b[0m\u001b[91mgo: downloading gopkg.in/alexcesaro/statsd.v2 v2.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/vmihailenco/msgpack/v5 v5.3.5\ngo: downloading github.com/facebookgo/muster v0.0.0-20150708232844-fd3d7953fd52\ngo: downloading github.com/klauspost/compress v1.15.12\n\u001b[0m\u001b[91mgo: downloading github.com/vmihailenco/tagparser/v2 v2.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/facebookgo/limitgroup v0.0.0-20150612190941-6abd8d71ec01\n\u001b[0m\u001b[91mgo: downloading github.com/facebookgo/clock v0.0.0-20150410010913-600d898af40a\n\u001b[0m(1/16) Purging git (2.36.3-r0)\n(2/16) Purging go (1.18.7-r0)\n(3/16) Purging gcc (11.2.1_git20220219-r2)\n(4/16) Purging binutils (2.38-r3)\n(5/16) Purging libatomic (11.2.1_git20220219-r2)\n(6/16) Purging libgomp (11.2.1_git20220219-r2)\n(7/16) Purging libcurl (7.83.1-r5)\n(8/16) Purging brotli-libs (1.0.9-r6)\n(9/16) Purging nghttp2-libs (1.47.0-r0)\n(10/16) Purging expat (2.5.0-r0)\n(11/16) Purging pcre2 (10.40-r0)\n(12/16) Purging libstdc++ (11.2.1_git20220219-r2)\n(13/16) Purging libgcc (11.2.1_git20220219-r2)\n(14/16) Purging isl22 (0.22-r0)\n(15/16) Purging mpc1 (1.2.1-r0)\n(16/16) Purging mpfr4 (4.1.0-r0)\nExecuting busybox-1.35.0-r17.trigger\nOK: 19 MiB in 23 packages\nRemoving intermediate container 7e219df52e0c\n ---> c954ea76e4fe\nStep 9/14 : ENV HONEYCOMB_WRITE_KEY NULL\n ---> Running in ec5ca8726d2b\nRemoving intermediate container ec5ca8726d2b\n ---> 1970bce1a352\nStep 10/14 : ENV NGINX_LOG_FORMAT_NAME combined\n ---> Running in 4af575ddfdc7\nRemoving intermediate container 4af575ddfdc7\n ---> b81f10f125a6\nStep 11/14 : ENV NGINX_CONF /etc/nginx.conf\n ---> Running in c7bb4ff55ae9\nRemoving intermediate container c7bb4ff55ae9\n ---> b4e5971a6694\nStep 12/14 : ENV HONEYCOMB_SAMPLE_RATE 1\n ---> Running in 5172ccfd467f\nRemoving intermediate container 5172ccfd467f\n ---> 7952d90e5d1f\nStep 13/14 : ENV NGINX_ACCESS_LOG_FILENAME access.log\n ---> Running in 0bd7721513d3\nRemoving intermediate container 0bd7721513d3\n ---> 94ae6c66f5ef\nStep 14/14 : CMD [ \"/bin/sh\", \"-c\", \"honeytail             --parser nginx             --writekey $HONEYCOMB_WRITE_KEY             --file /var/log/nginx/$NGINX_ACCESS_LOG_FILENAME             --dataset nginx             --samplerate $HONEYCOMB_SAMPLE_RATE             --nginx.conf $NGINX_CONF             --nginx.format $NGINX_LOG_FORMAT_NAME             --tail.read_from end\" ]\n ---> Running in cde0bd21dc6f\nRemoving intermediate container cde0bd21dc6f\n ---> a42822af29c8\nSuccessfully built a42822af29c8\nSuccessfully tagged honeytail:latest\n","stderr":"","imageSize":145758391},"repair":{"violations":[{"name":"apkAddUseNoCache","position":{"start":13,"end":19,"columnStart":4,"columnEnd":16}}],"repairedDockerfile":"# This builds the binary inside an Alpine Linux container, which is small\nFROM alpine:3.16\n\n# Set us up so we can build the binary\nENV GOROOT /usr/lib/go\nENV GOPATH /gopath\nENV GOBIN /gopath/bin\nENV PATH $PATH:$GOROOT/bin:$GOPATH/bin\n\nWORKDIR /gopath/src/github.com/honeycombio/honeytail\nCOPY . /gopath/src/github.com/honeycombio/honeytail/\n\n# Does the package, build, and cleanup as one step to keep size small\nRUN apk add --no-cache --update \\\n        coreutils \\\n        go \\\n        git \\\n        openssl \\\n        ca-certificates \\\n        musl-dev \\\n    && ver=$( git rev-parse --short HEAD) \\\n    && git clean -f \\\n    && rm -rf .git \\\n    && go install -ldflags=\"-X main.BuildID=${ver}\" github.com/honeycombio/honeytail \\\n    && apk del git go \\\n    && rm -rf /var/cache/apk/*\n\nENV HONEYCOMB_WRITE_KEY NULL\nENV NGINX_LOG_FORMAT_NAME combined\nENV NGINX_CONF /etc/nginx.conf\nENV HONEYCOMB_SAMPLE_RATE 1\nENV NGINX_ACCESS_LOG_FILENAME access.log\n\nCMD [ \"/bin/sh\", \"-c\", \"honeytail \\\n            --parser nginx \\\n            --writekey $HONEYCOMB_WRITE_KEY \\\n            --file /var/log/nginx/$NGINX_ACCESS_LOG_FILENAME \\\n            --dataset nginx \\\n            --samplerate $HONEYCOMB_SAMPLE_RATE \\\n            --nginx.conf $NGINX_CONF \\\n            --nginx.format $NGINX_LOG_FORMAT_NAME \\\n            --tail.read_from end\" ]\n"},"repairedBuild":{"startTimestamp":1672365418543,"endTimestamp":1672365446342,"error":null,"stdout":"Sending build context to Docker daemon  694.8kB\r\r\nStep 1/14 : FROM alpine:3.16\n ---> bfe296a52501\nStep 2/14 : ENV GOROOT /usr/lib/go\n ---> Running in 3ce02f736af2\nRemoving intermediate container 3ce02f736af2\n ---> cdd5cfe0e0b9\nStep 3/14 : ENV GOPATH /gopath\n ---> Running in 2cfa92c15d5e\nRemoving intermediate container 2cfa92c15d5e\n ---> e8d19a6a322f\nStep 4/14 : ENV GOBIN /gopath/bin\n ---> Running in ff2de7f08b37\nRemoving intermediate container ff2de7f08b37\n ---> abaed35ad37e\nStep 5/14 : ENV PATH $PATH:$GOROOT/bin:$GOPATH/bin\n ---> Running in 28c8d7b73175\nRemoving intermediate container 28c8d7b73175\n ---> 4b8d556ed335\nStep 6/14 : WORKDIR /gopath/src/github.com/honeycombio/honeytail\n ---> Running in 7b0b60ddfc02\nRemoving intermediate container 7b0b60ddfc02\n ---> bb719d704c5f\nStep 7/14 : COPY . /gopath/src/github.com/honeycombio/honeytail/\n ---> 8731ea8123ce\nStep 8/14 : RUN apk add --no-cache --update         coreutils         go         git         openssl         ca-certificates         musl-dev     && ver=$( git rev-parse --short HEAD)     && git clean -f     && rm -rf .git     && go install -ldflags=\"-X main.BuildID=${ver}\" github.com/honeycombio/honeytail     && apk del git go     && rm -rf /var/cache/apk/*\n ---> Running in 788e21c161b6\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/community/x86_64/APKINDEX.tar.gz\n(1/26) Upgrading musl (1.2.3-r1 -> 1.2.3-r2)\n(2/26) Installing ca-certificates (20220614-r0)\n(3/26) Installing libacl (2.3.1-r0)\n(4/26) Installing libattr (2.5.1-r1)\n(5/26) Installing gmp (6.2.1-r2)\n(6/26) Installing skalibs (2.11.2.0-r0)\n(7/26) Installing utmps-libs (0.1.2.0-r0)\n(8/26) Installing coreutils (9.1-r0)\n(9/26) Installing brotli-libs (1.0.9-r6)\n(10/26) Installing nghttp2-libs (1.47.0-r0)\n(11/26) Installing libcurl (7.83.1-r5)\n(12/26) Installing expat (2.5.0-r0)\n(13/26) Installing pcre2 (10.40-r0)\n(14/26) Installing git (2.36.3-r0)\n(15/26) Installing libgcc (11.2.1_git20220219-r2)\n(16/26) Installing libstdc++ (11.2.1_git20220219-r2)\n(17/26) Installing binutils (2.38-r3)\n(18/26) Installing libgomp (11.2.1_git20220219-r2)\n(19/26) Installing libatomic (11.2.1_git20220219-r2)\n(20/26) Installing isl22 (0.22-r0)\n(21/26) Installing mpfr4 (4.1.0-r0)\n(22/26) Installing mpc1 (1.2.1-r0)\n(23/26) Installing gcc (11.2.1_git20220219-r2)\n(24/26) Installing musl-dev (1.2.3-r2)\n(25/26) Installing go (1.18.7-r0)\n(26/26) Installing openssl (1.1.1s-r0)\nExecuting busybox-1.35.0-r17.trigger\nExecuting ca-certificates-20220614-r0.trigger\nOK: 514 MiB in 39 packages\n\u001b[91mgo: downloading gopkg.in/yaml.v3 v3.0.1\n\u001b[0m\u001b[91mgo: downloading github.com/honeycombio/urlshaper v0.0.0-20170302202025-2baba9ae5b5f\ngo: downloading github.com/sirupsen/logrus v1.9.0\ngo: downloading github.com/jessevdk/go-flags v1.5.0\n\u001b[0m\u001b[91mgo: downloading github.com/honeycombio/libhoney-go v1.18.0\n\u001b[0m\u001b[91mgo: downloading github.com/jeromer/syslogparser v0.0.0-20190429161531-5fbaaf06d9e7\n\u001b[0m\u001b[91mgo: downloading github.com/honeycombio/dynsampler-go v0.2.1\n\u001b[0m\u001b[91mgo: downloading github.com/honeycombio/mysqltools v0.0.1\n\u001b[0m\u001b[91mgo: downloading github.com/go-sql-driver/mysql v1.6.0\ngo: downloading github.com/kr/logfmt v0.0.0-20140226030751-b84e30acd515\n\u001b[0m\u001b[91mgo: downloading github.com/honeycombio/gonx v1.3.1-0.20171118020637-f9b2468e9ef8\n\u001b[0m\u001b[91mgo: downloading golang.org/x/sys v0.0.0-20220825204002-c680a09ffe64\ngo: downloading github.com/hpcloud/tail v1.0.1-0.20170814160653-37f427138745\n\u001b[0m\u001b[91mgo: downloading github.com/honeycombio/sqlparser v0.0.0-20180730202938-aab361df519b\n\u001b[0m\u001b[91mgo: downloading gopkg.in/tomb.v1 v1.0.0-20141024135613-dd632973f1e7\n\u001b[0m\u001b[91mgo: downloading gopkg.in/fsnotify.v1 v1.4.7\n\u001b[0m\u001b[91mgo: downloading github.com/facebookgo/muster v0.0.0-20150708232844-fd3d7953fd52\ngo: downloading github.com/klauspost/compress v1.15.12\ngo: downloading github.com/vmihailenco/msgpack/v5 v5.3.5\n\u001b[0m\u001b[91mgo: downloading gopkg.in/alexcesaro/statsd.v2 v2.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/facebookgo/limitgroup v0.0.0-20150612190941-6abd8d71ec01\n\u001b[0m\u001b[91mgo: downloading github.com/facebookgo/clock v0.0.0-20150410010913-600d898af40a\n\u001b[0m\u001b[91mgo: downloading github.com/vmihailenco/tagparser/v2 v2.0.0\n\u001b[0m\u001b[91mWARNING: Ignoring https://dl-cdn.alpinelinux.org/alpine/v3.16/main: No such file or directory\nWARNING: Ignoring https://dl-cdn.alpinelinux.org/alpine/v3.16/community: No such file or directory\n\u001b[0m(1/16) Purging git (2.36.3-r0)\n(2/16) Purging go (1.18.7-r0)\n(3/16) Purging gcc (11.2.1_git20220219-r2)\n(4/16) Purging binutils (2.38-r3)\n(5/16) Purging libatomic (11.2.1_git20220219-r2)\n(6/16) Purging libgomp (11.2.1_git20220219-r2)\n(7/16) Purging libcurl (7.83.1-r5)\n(8/16) Purging brotli-libs (1.0.9-r6)\n(9/16) Purging nghttp2-libs (1.47.0-r0)\n(10/16) Purging expat (2.5.0-r0)\n(11/16) Purging pcre2 (10.40-r0)\n(12/16) Purging libstdc++ (11.2.1_git20220219-r2)\n(13/16) Purging libgcc (11.2.1_git20220219-r2)\n(14/16) Purging isl22 (0.22-r0)\n(15/16) Purging mpc1 (1.2.1-r0)\n(16/16) Purging mpfr4 (4.1.0-r0)\nExecuting busybox-1.35.0-r17.trigger\nOK: 19 MiB in 23 packages\nRemoving intermediate container 788e21c161b6\n ---> dddd2b468569\nStep 9/14 : ENV HONEYCOMB_WRITE_KEY NULL\n ---> Running in 47efa3fe7b01\nRemoving intermediate container 47efa3fe7b01\n ---> fff71200327d\nStep 10/14 : ENV NGINX_LOG_FORMAT_NAME combined\n ---> Running in 511fec2227b9\nRemoving intermediate container 511fec2227b9\n ---> b5c6c06dab5b\nStep 11/14 : ENV NGINX_CONF /etc/nginx.conf\n ---> Running in 6ab75af5e767\nRemoving intermediate container 6ab75af5e767\n ---> a449264a72c9\nStep 12/14 : ENV HONEYCOMB_SAMPLE_RATE 1\n ---> Running in cc6c7212935a\nRemoving intermediate container cc6c7212935a\n ---> a4a9e9585e1d\nStep 13/14 : ENV NGINX_ACCESS_LOG_FILENAME access.log\n ---> Running in 662d4847c801\nRemoving intermediate container 662d4847c801\n ---> f2bbfa486a78\nStep 14/14 : CMD [ \"/bin/sh\", \"-c\", \"honeytail             --parser nginx             --writekey $HONEYCOMB_WRITE_KEY             --file /var/log/nginx/$NGINX_ACCESS_LOG_FILENAME             --dataset nginx             --samplerate $HONEYCOMB_SAMPLE_RATE             --nginx.conf $NGINX_CONF             --nginx.format $NGINX_LOG_FORMAT_NAME             --tail.read_from end\" ]\n ---> Running in 0a965ce25d93\nRemoving intermediate container 0a965ce25d93\n ---> ef13ec31f71e\nSuccessfully built ef13ec31f71e\nSuccessfully tagged honeytail:latest\n","stderr":"","imageSize":145758403},"endTime":1672365446672}