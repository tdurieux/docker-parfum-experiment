{"repository":"https://github.com/alauda/captain","dockerfilePath":"Dockerfile","startTime":1672924559734,"endTime":1672925790967,"clone":{"startTime":1672924559734,"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/alauda/captain'...\n","error":null,"endTime":1672924560600,"commit":"eb02e8989fc71d5dcd0389f23c1bfd2c809cdb3e"},"originalBuild":{"startTime":1672924560689,"endTime":1672925623939,"error":null,"stdout":"Sending build context to Docker daemon  815.6kB\r\r\nStep 1/17 : FROM golang:1.16 as builder\n ---> 972d8c0bc0fc\nStep 2/17 : WORKDIR /workspace\n ---> Running in e73e00d070b2\nRemoving intermediate container e73e00d070b2\n ---> eee6411f528a\nStep 3/17 : ARG go_proxy=https://goproxy.cn\n ---> Running in 4bd2922332a9\nRemoving intermediate container 4bd2922332a9\n ---> da43f2112eff\nStep 4/17 : ENV GO111MODULE=on     GOPROXY=${go_proxy}     CGO_ENABLED=0\n ---> Running in 632587c21f4b\nRemoving intermediate container 632587c21f4b\n ---> b116fb8e264d\nStep 5/17 : COPY go.mod go.mod\n ---> 9c6dc8797fdb\nStep 6/17 : COPY go.sum go.sum\n ---> d3ee4aa9b37f\nStep 7/17 : RUN go mod download\n ---> Running in 7fb6fa488ffe\nRemoving intermediate container 7fb6fa488ffe\n ---> d03c415f8cdb\nStep 8/17 : COPY main.go main.go\n ---> 28bceffd7257\nStep 9/17 : COPY controllers/ controllers/\n ---> 63252cb37326\nStep 10/17 : COPY pkg/ pkg/\n ---> 8be0f653bafa\nStep 11/17 : RUN go build -ldflags '-w -s' -a -installsuffix cgo -o manager main.go\n ---> Running in 252e0fccb907\nRemoving intermediate container 252e0fccb907\n ---> 0c8c42fdf38c\nStep 12/17 : FROM alpine:3.15\n3.15: Pulling from library/alpine\n9621f1afde84: Pulling fs layer\n9621f1afde84: Verifying Checksum\n9621f1afde84: Download complete\n9621f1afde84: Pull complete\nDigest: sha256:cf34c62ee8eb3fe8aa24c1fab45d7e9d12768d945c3f5a6fd6a63d901e898479\nStatus: Downloaded newer image for alpine:3.15\n ---> c4fc93816858\nStep 13/17 : RUN  sed -i 's/dl-cdn.alpinelinux.org/mirrors.ustc.edu.cn/g' /etc/apk/repositories && apk update && apk add subversion\n ---> Running in 9f534b7956a5\nfetch https://mirrors.ustc.edu.cn/alpine/v3.15/main/x86_64/APKINDEX.tar.gz\nfetch https://mirrors.ustc.edu.cn/alpine/v3.15/community/x86_64/APKINDEX.tar.gz\nv3.15.6-237-g9ae8855cb5 [https://mirrors.ustc.edu.cn/alpine/v3.15/main]\nv3.15.6-237-g9ae8855cb5 [https://mirrors.ustc.edu.cn/alpine/v3.15/community]\nOK: 15859 distinct packages available\n(1/11) Installing libuuid (2.37.4-r0)\n(2/11) Installing apr (1.7.0-r1)\n(3/11) Installing expat (2.5.0-r0)\n(4/11) Installing apr-util (1.6.1-r11)\n(5/11) Installing lz4-libs (1.9.3-r1)\n(6/11) Installing gdbm (1.22-r0)\n(7/11) Installing libsasl (2.1.28-r0)\n(8/11) Installing serf (1.3.9-r7)\n(9/11) Installing sqlite-libs (3.36.0-r0)\n(10/11) Installing subversion-libs (1.14.2-r0)\n(11/11) Installing subversion (1.14.2-r0)\nExecuting subversion-1.14.2-r0.pre-install\nExecuting busybox-1.34.1-r7.trigger\nOK: 12 MiB in 25 packages\nRemoving intermediate container 9f534b7956a5\n ---> f8824a23f505\nStep 14/17 : RUN  echo 'hosts: files dns' > /etc/nsswitch.conf\n ---> Running in 45f174c09d7b\nRemoving intermediate container 45f174c09d7b\n ---> 60a82c06e877\nStep 15/17 : WORKDIR /\n ---> Running in aefc5ab12824\nRemoving intermediate container aefc5ab12824\n ---> 05913005ae75\nStep 16/17 : COPY --from=builder /workspace/manager .\n ---> 7155a71f9c28\nStep 17/17 : ENTRYPOINT [\"/manager\"]\n ---> Running in 6c55eeaeea2f\nRemoving intermediate container 6c55eeaeea2f\n ---> 7030df588130\nSuccessfully built 7030df588130\nSuccessfully tagged captain:latest\n","stderr":"","imageSize":66139234},"repair":{"startTime":1672925624008,"endTime":1672925624088,"violations":[{"name":"apkAddUseNoCache","position":{"start":34,"end":34,"columnStart":100,"columnEnd":118}}],"repairedDockerfile":"# Build the manager binary\nFROM golang:1.16 as builder\n\nWORKDIR /workspace\n\nARG go_proxy=https://goproxy.cn\nENV GO111MODULE=on \\\n    GOPROXY=${go_proxy} \\\n    CGO_ENABLED=0\n\n# Copy the Go Modules manifests\nCOPY go.mod go.mod\nCOPY go.sum go.sum\n# cache deps before building and copying source so that we don't need to re-download as much\n# and so that source changes don't invalidate our downloaded layer\n# ENV GOPROXY https://goproxy.cn/\nRUN go mod download\n\n\n# Copy the go source\nCOPY main.go main.go\n\n#COPY api/ api/\nCOPY controllers/ controllers/\nCOPY pkg/ pkg/\n\n# Build\nRUN go build -ldflags '-w -s' -a -installsuffix cgo -o manager main.go\n\n# Use distroless as minimal base image to package the manager binary\n# Refer to https://github.com/GoogleContainerTools/distroless for more details\n# FROM gcr.azk8s.cn/distroless/static:latest\nFROM alpine:3.15\n\nRUN sed -i 's/dl-cdn.alpinelinux.org/mirrors.ustc.edu.cn/g' /etc/apk/repositories && apk update && apk add --no-cache subversion\nRUN  echo 'hosts: files dns' > /etc/nsswitch.conf\n\nWORKDIR /\nCOPY --from=builder /workspace/manager .\n# USER nonroot:nonroot\n\nENTRYPOINT [\"/manager\"]\n"},"repairedBuild":{"startTime":1672925624388,"endTime":1672925790879,"error":{"code":1,"killed":false,"signal":null,"cmd":"docker build --no-cache --force-rm -t captain:latest -f /tmp/dinghy-analysis/alauda/captain/Dockerfile ."},"stdout":"Sending build context to Docker daemon  815.6kB\r\r\nStep 1/17 : FROM golang:1.16 as builder\n ---> 972d8c0bc0fc\nStep 2/17 : WORKDIR /workspace\n ---> Running in 08909e023e60\nRemoving intermediate container 08909e023e60\n ---> b42f64c58e3d\nStep 3/17 : ARG go_proxy=https://goproxy.cn\n ---> Running in 2330cbac756a\nRemoving intermediate container 2330cbac756a\n ---> 18c4ffded2d9\nStep 4/17 : ENV GO111MODULE=on     GOPROXY=${go_proxy}     CGO_ENABLED=0\n ---> Running in f498cabf5d8b\nRemoving intermediate container f498cabf5d8b\n ---> 4bf6ba63507a\nStep 5/17 : COPY go.mod go.mod\n ---> 859037992bb4\nStep 6/17 : COPY go.sum go.sum\n ---> 17eeae556718\nStep 7/17 : RUN go mod download\n ---> Running in a9a7513e29b5\n\u001b[91mgo mod download: github.com/Azure/azure-sdk-for-go@v43.0.0+incompatible: unexpected EOF\n\u001b[0mRemoving intermediate container a9a7513e29b5\n","stderr":"The command '/bin/sh -c go mod download' returned a non-zero code: 1\n"}}