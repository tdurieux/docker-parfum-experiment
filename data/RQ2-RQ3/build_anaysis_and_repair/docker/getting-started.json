{"repository":"https://github.com/docker/getting-started","dockerfilePath":"Dockerfile","startTime":1672002625485,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/docker/getting-started'...\n","error":null,"commit":"d9f0c9ac45ba6bb3fa409b4b8cda4e07eb8c7496"},"originalBuild":{"startTimestamp":1672002626543,"endTimestamp":1672002693695,"error":null,"stdout":"Sending build context to Docker daemon   11.4MB\r\r\nStep 1/25 : FROM python:alpine AS base\nalpine: Pulling from library/python\nc158987b0551: Already exists\n7ec3a91b66d9: Pulling fs layer\nc89fd98887b3: Pulling fs layer\n877ccf16716c: Pulling fs layer\n3cfcd1e4ebae: Pulling fs layer\n3cfcd1e4ebae: Waiting\n877ccf16716c: Verifying Checksum\n877ccf16716c: Download complete\n7ec3a91b66d9: Verifying Checksum\n7ec3a91b66d9: Download complete\nc89fd98887b3: Verifying Checksum\nc89fd98887b3: Download complete\n7ec3a91b66d9: Pull complete\n3cfcd1e4ebae: Verifying Checksum\n3cfcd1e4ebae: Download complete\nc89fd98887b3: Pull complete\n877ccf16716c: Pull complete\n3cfcd1e4ebae: Pull complete\nDigest: sha256:af8fef83397b3886ed93d2c81bf3b4e70d39c0789c1c6feb1ecb86ca9bc42a0a\nStatus: Downloaded newer image for python:alpine\n ---> 18ccdc39ea28\nStep 2/25 : WORKDIR /app\n ---> Running in 7c62387866e3\nRemoving intermediate container 7c62387866e3\n ---> af62b2c3863e\nStep 3/25 : COPY requirements.txt .\n ---> b6b954c12681\nStep 4/25 : RUN pip install -r requirements.txt\n ---> Running in 2faf2b8d60d0\nCollecting mkdocs==1.3.0\n  Downloading mkdocs-1.3.0-py3-none-any.whl (3.7 MB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 3.7/3.7 MB 45.7 MB/s eta 0:00:00\nCollecting mkdocs-material==4.6.3\n  Downloading mkdocs_material-4.6.3-py2.py3-none-any.whl (723 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 723.1/723.1 kB 29.8 MB/s eta 0:00:00\nCollecting mkdocs-minify-plugin==0.2.3\n  Downloading mkdocs-minify-plugin-0.2.3.tar.gz (3.0 kB)\n  Preparing metadata (setup.py): started\n  Preparing metadata (setup.py): finished with status 'done'\nCollecting pygments==2.7.4\n  Downloading Pygments-2.7.4-py3-none-any.whl (950 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 950.1/950.1 kB 48.3 MB/s eta 0:00:00\nCollecting pymdown-extensions==7.0\n  Downloading pymdown_extensions-7.0-py2.py3-none-any.whl (204 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 204.6/204.6 kB 21.7 MB/s eta 0:00:00\nCollecting click>=3.3\n  Downloading click-8.1.3-py3-none-any.whl (96 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 96.6/96.6 kB 5.3 MB/s eta 0:00:00\nCollecting Jinja2>=2.10.2\n  Downloading Jinja2-3.1.2-py3-none-any.whl (133 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 133.1/133.1 kB 7.7 MB/s eta 0:00:00\nCollecting Markdown>=3.2.1\n  Downloading Markdown-3.4.1-py3-none-any.whl (93 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 93.3/93.3 kB 5.1 MB/s eta 0:00:00\nCollecting PyYAML>=3.10\n  Downloading PyYAML-6.0.tar.gz (124 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 125.0/125.0 kB 6.4 MB/s eta 0:00:00\n  Installing build dependencies: started\n  Installing build dependencies: finished with status 'done'\n  Getting requirements to build wheel: started\n  Getting requirements to build wheel: finished with status 'done'\n  Preparing metadata (pyproject.toml): started\n  Preparing metadata (pyproject.toml): finished with status 'done'\nCollecting watchdog>=2.0\n  Downloading watchdog-2.2.0.tar.gz (119 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 119.2/119.2 kB 3.1 MB/s eta 0:00:00\n  Preparing metadata (setup.py): started\n  Preparing metadata (setup.py): finished with status 'done'\nCollecting ghp-import>=1.0\n  Downloading ghp_import-2.1.0-py3-none-any.whl (11 kB)\nCollecting pyyaml-env-tag>=0.1\n  Downloading pyyaml_env_tag-0.1-py3-none-any.whl (3.9 kB)\nCollecting importlib-metadata>=4.3\n  Downloading importlib_metadata-5.2.0-py3-none-any.whl (21 kB)\nCollecting packaging>=20.5\n  Downloading packaging-22.0-py3-none-any.whl (42 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 42.6/42.6 kB 1.2 MB/s eta 0:00:00\nCollecting mergedeep>=1.3.4\n  Downloading mergedeep-1.3.4-py3-none-any.whl (6.4 kB)\nCollecting htmlmin>=0.1.4\n  Downloading htmlmin-0.1.12.tar.gz (19 kB)\n  Preparing metadata (setup.py): started\n  Preparing metadata (setup.py): finished with status 'done'\nCollecting jsmin>=2.2.2\n  Downloading jsmin-3.0.1.tar.gz (13 kB)\n  Preparing metadata (setup.py): started\n  Preparing metadata (setup.py): finished with status 'done'\nCollecting python-dateutil>=2.8.1\n  Downloading python_dateutil-2.8.2-py2.py3-none-any.whl (247 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 247.7/247.7 kB 6.4 MB/s eta 0:00:00\nCollecting zipp>=0.5\n  Downloading zipp-3.11.0-py3-none-any.whl (6.6 kB)\nCollecting MarkupSafe>=2.0\n  Downloading MarkupSafe-2.1.1.tar.gz (18 kB)\n  Preparing metadata (setup.py): started\n  Preparing metadata (setup.py): finished with status 'done'\nCollecting six>=1.5\n  Downloading six-1.16.0-py2.py3-none-any.whl (11 kB)\nBuilding wheels for collected packages: mkdocs-minify-plugin, htmlmin, jsmin, PyYAML, watchdog, MarkupSafe\n  Building wheel for mkdocs-minify-plugin (setup.py): started\n  Building wheel for mkdocs-minify-plugin (setup.py): finished with status 'done'\n  Created wheel for mkdocs-minify-plugin: filename=mkdocs_minify_plugin-0.2.3-py3-none-any.whl size=2977 sha256=d1627acbc6227b05bcc28ecfcdf1931dc5c023e39f912c320703e314e149b856\n  Stored in directory: /root/.cache/pip/wheels/2e/16/91/edd2d60cca1a1f1619cde70c76db2190bfcf49fe010bdba526\n  Building wheel for htmlmin (setup.py): started\n  Building wheel for htmlmin (setup.py): finished with status 'done'\n  Created wheel for htmlmin: filename=htmlmin-0.1.12-py3-none-any.whl size=27081 sha256=930ba1e705341ef5ce6ef9bc79a5d8fc7e742bd9cc615ab30a4f7248e056df8f\n  Stored in directory: /root/.cache/pip/wheels/4f/05/90/0d498de7bf73994c24de7b3d387f4bc5f5142124d0c99cb1c6\n  Building wheel for jsmin (setup.py): started\n  Building wheel for jsmin (setup.py): finished with status 'done'\n  Created wheel for jsmin: filename=jsmin-3.0.1-py3-none-any.whl size=13766 sha256=8bc7fb381f712949e9dada45b64729da8e96a281a93aa3fa9d0b1afb2a0da34a\n  Stored in directory: /root/.cache/pip/wheels/55/66/1f/99b8f56d8ed6024032d59533a975bb27c892b309ee34b15bd0\n  Building wheel for PyYAML (pyproject.toml): started\n  Building wheel for PyYAML (pyproject.toml): finished with status 'done'\n  Created wheel for PyYAML: filename=PyYAML-6.0-cp311-cp311-linux_x86_64.whl size=45331 sha256=cc15cddf7f12b69389dbf145291006762df093a2b4a4f1ffab0f4804643ffb5a\n  Stored in directory: /root/.cache/pip/wheels/e4/64/08/efad557443d4ad855cd74372fe1906f8c800bcfa611ea50df6\n  Building wheel for watchdog (setup.py): started\n  Building wheel for watchdog (setup.py): finished with status 'done'\n  Created wheel for watchdog: filename=watchdog-2.2.0-py3-none-any.whl size=78665 sha256=1f65cbc6323ad82d6138de1c2d5456ecc8bda24d7cbcd5e6534ffebea060b1a5\n  Stored in directory: /root/.cache/pip/wheels/61/0d/99/01bbfe15de0b89b66b485b3d2890eab61ccd5f40be78de13f9\n  Building wheel for MarkupSafe (setup.py): started\n  Building wheel for MarkupSafe (setup.py): finished with status 'done'\n  Created wheel for MarkupSafe: filename=MarkupSafe-2.1.1-py3-none-any.whl size=9650 sha256=b5a3abe9bcd03d2e7c2d78f7599ab536b02ec203bd1f2e55916f1b9caaa88444\n  Stored in directory: /root/.cache/pip/wheels/96/ee/62/407c247ad088bcb67b530ba3ac1479058c58a651bd6bf09a1f\nSuccessfully built mkdocs-minify-plugin htmlmin jsmin PyYAML watchdog MarkupSafe\nInstalling collected packages: jsmin, htmlmin, zipp, watchdog, six, PyYAML, pygments, packaging, mergedeep, MarkupSafe, Markdown, click, pyyaml-env-tag, python-dateutil, pymdown-extensions, Jinja2, importlib-metadata, ghp-import, mkdocs, mkdocs-minify-plugin, mkdocs-material\nSuccessfully installed Jinja2-3.1.2 Markdown-3.4.1 MarkupSafe-2.1.1 PyYAML-6.0 click-8.1.3 ghp-import-2.1.0 htmlmin-0.1.12 importlib-metadata-5.2.0 jsmin-3.0.1 mergedeep-1.3.4 mkdocs-1.3.0 mkdocs-material-4.6.3 mkdocs-minify-plugin-0.2.3 packaging-22.0 pygments-2.7.4 pymdown-extensions-7.0 python-dateutil-2.8.2 pyyaml-env-tag-0.1 six-1.16.0 watchdog-2.2.0 zipp-3.11.0\n\u001b[91mWARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv\n\u001b[0mRemoving intermediate container 2faf2b8d60d0\n ---> af86f38bfcd5\nStep 5/25 : FROM node:18-alpine AS app-base\n18-alpine: Pulling from library/node\nDigest: sha256:a136ed7b0df71082cdb171f36d640ea3b392a5c70401c642326acee767b8c540\nStatus: Downloaded newer image for node:18-alpine\n ---> 6d7b7852bcd3\nStep 6/25 : WORKDIR /app\n ---> Running in 781a1aa88244\nRemoving intermediate container 781a1aa88244\n ---> f20df22c7388\nStep 7/25 : COPY app/package.json app/yarn.lock ./\n ---> fc49b81cbb3c\nStep 8/25 : COPY app/spec ./spec\n ---> 47cd8c52374b\nStep 9/25 : COPY app/src ./src\n ---> 19f50b724524\nStep 10/25 : FROM app-base AS test\n ---> 19f50b724524\nStep 11/25 : RUN yarn install\n ---> Running in c467d6490033\nyarn install v1.22.19\n[1/4] Resolving packages...\n[2/4] Fetching packages...\n[3/4] Linking dependencies...\n[4/4] Building fresh packages...\nDone in 8.73s.\nRemoving intermediate container c467d6490033\n ---> 8bd78058e902\nStep 12/25 : RUN yarn test\n ---> Running in b023d0608931\nyarn run v1.22.19\n$ jest\n\u001b[91mPASS spec/routes/updateItem.spec.js\n\u001b[0m\u001b[91mPASS spec/routes/getItems.spec.js\n\u001b[0m\u001b[91mPASS spec/routes/addItem.spec.js\n\u001b[0m\u001b[91mPASS spec/routes/deleteItem.spec.js\n\u001b[0m\u001b[91mPASS spec/persistence/sqlite.spec.js\n\u001b[0m\u001b[91m\nTest Suites: 5 passed, 5 total\nTests:       9 passed, 9 total\nSnapshots:   0 total\nTime:        1.501 s\nRan all test suites.\n\u001b[0mDone in 2.43s.\nRemoving intermediate container b023d0608931\n ---> d31595a5d358\nStep 13/25 : FROM app-base AS app-zip-creator\n ---> 19f50b724524\nStep 14/25 : COPY --from=test /app/package.json /app/yarn.lock ./\n ---> 23e94270b685\nStep 15/25 : COPY app/spec ./spec\n ---> 1cf9c9a49414\nStep 16/25 : COPY app/src ./src\n ---> 849e14a0a456\nStep 17/25 : RUN apk add zip &&     zip -r /app.zip /app\n ---> Running in b5dfcd59f4e0\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/2) Installing unzip (6.0-r13)\n(2/2) Installing zip (3.0-r10)\nExecuting busybox-1.35.0-r29.trigger\nOK: 10 MiB in 19 packages\n  adding: app/ (stored 0%)\n  adding: app/src/ (stored 0%)\n  adding: app/src/index.js (deflated 60%)\n  adding: app/src/routes/ (stored 0%)\n  adding: app/src/routes/deleteItem.js (deflated 16%)\n  adding: app/src/routes/updateItem.js (deflated 39%)\n  adding: app/src/routes/getItems.js (deflated 20%)\n  adding: app/src/routes/addItem.js (deflated 37%)\n  adding: app/src/static/ (stored 0%)\n  adding: app/src/static/js/ (stored 0%)\n  adding: app/src/static/js/app.js (deflated 74%)\n  adding: app/src/static/js/react.production.min.js (deflated 62%)\n  adding: app/src/static/js/react-bootstrap.js (deflated 80%)\n  adding: app/src/static/js/react-dom.production.min.js (deflated 68%)\n  adding: app/src/static/js/babel.min.js (deflated 73%)\n  adding: app/src/static/index.html (deflated 57%)\n  adding: app/src/static/css/ (stored 0%)\n  adding: app/src/static/css/font-awesome/ (stored 0%)\n  adding: app/src/static/css/font-awesome/fa-solid-900.woff (deflated 0%)\n  adding: app/src/static/css/font-awesome/fa-brands-400.eot (deflated 32%)\n  adding: app/src/static/css/font-awesome/fa-solid-900.eot (deflated 48%)\n  adding: app/src/static/css/font-awesome/fa-brands-400.woff2 (deflated 0%)\n  adding: app/src/static/css/font-awesome/fa-solid-900.svg#fontawesome (deflated 73%)\n  adding: app/src/static/css/font-awesome/fa-solid-900.ttf (deflated 48%)\n  adding: app/src/static/css/font-awesome/fa-regular-400.svg#fontawesome (deflated 74%)\n  adding: app/src/static/css/font-awesome/fa-brands-400.woff (deflated 0%)\n  adding: app/src/static/css/font-awesome/fa-regular-400.woff (deflated 0%)\n  adding: app/src/static/css/font-awesome/fa-regular-400.woff2 (stored 0%)\n  adding: app/src/static/css/font-awesome/all.min.css (deflated 78%)\n  adding: app/src/static/css/font-awesome/fa-brands-400.svg#fontawesome (deflated 67%)\n  adding: app/src/static/css/font-awesome/fa-regular-400.ttf (deflated 51%)\n  adding: app/src/static/css/font-awesome/fa-brands-400.ttf (deflated 32%)\n  adding: app/src/static/css/font-awesome/fa-regular-400.eot (deflated 51%)\n  adding: app/src/static/css/font-awesome/fa-solid-900.woff2 (deflated 0%)\n  adding: app/src/static/css/bootstrap.min.css (deflated 85%)\n  adding: app/src/static/css/styles.css (deflated 48%)\n  adding: app/src/persistence/ (stored 0%)\n  adding: app/src/persistence/mysql.js (deflated 72%)\n  adding: app/src/persistence/index.js (deflated 26%)\n  adding: app/src/persistence/sqlite.js (deflated 72%)\n  adding: app/spec/ (stored 0%)\n  adding: app/spec/routes/ (stored 0%)\n  adding: app/spec/routes/getItems.spec.js (deflated 49%)\n  adding: app/spec/routes/addItem.spec.js (deflated 57%)\n  adding: app/spec/routes/deleteItem.spec.js (deflated 56%)\n  adding: app/spec/routes/updateItem.spec.js (deflated 61%)\n  adding: app/spec/persistence/ (stored 0%)\n  adding: app/spec/persistence/sqlite.spec.js (deflated 66%)\n  adding: app/yarn.lock (deflated 59%)\n  adding: app/package.json (deflated 49%)\nRemoving intermediate container b5dfcd59f4e0\n ---> c7419cd53030\nStep 18/25 : FROM base AS dev\n ---> af86f38bfcd5\nStep 19/25 : CMD [\"mkdocs\", \"serve\", \"-a\", \"0.0.0.0:8000\"]\n ---> Running in ad9fc5a019a5\nRemoving intermediate container ad9fc5a019a5\n ---> b4b8e8bab4c1\nStep 20/25 : FROM base AS build\n ---> af86f38bfcd5\nStep 21/25 : COPY . .\n ---> a2b39e13fbe7\nStep 22/25 : RUN mkdocs build\n ---> Running in 281b188bc9c7\n\u001b[91mINFO     -  Cleaning site directory\nINFO     -  Building documentation to directory: /app/site\n\u001b[0m\u001b[91mINFO     -  The following pages exist in the docs directory, but are not included in the \"nav\" configuration:\n  - index.md\n\u001b[0m\u001b[91mINFO     -  Documentation built in 0.44 seconds\n\u001b[0mRemoving intermediate container 281b188bc9c7\n ---> 4f4decb521a6\nStep 23/25 : FROM nginx:alpine\nalpine: Pulling from library/nginx\nc158987b0551: Already exists\n1e35f6679fab: Pulling fs layer\ncb9626c74200: Pulling fs layer\nb6334b6ace34: Pulling fs layer\nf1d1c9928c82: Pulling fs layer\n9b6f639ec6ea: Pulling fs layer\nee68d3549ec8: Pulling fs layer\nf1d1c9928c82: Waiting\nee68d3549ec8: Waiting\nb6334b6ace34: Verifying Checksum\nb6334b6ace34: Download complete\ncb9626c74200: Verifying Checksum\ncb9626c74200: Download complete\n1e35f6679fab: Download complete\n1e35f6679fab: Pull complete\nf1d1c9928c82: Verifying Checksum\nf1d1c9928c82: Download complete\n9b6f639ec6ea: Verifying Checksum\n9b6f639ec6ea: Download complete\ncb9626c74200: Pull complete\nee68d3549ec8: Verifying Checksum\nee68d3549ec8: Download complete\nb6334b6ace34: Pull complete\nf1d1c9928c82: Pull complete\n9b6f639ec6ea: Pull complete\nee68d3549ec8: Pull complete\nDigest: sha256:dd8a054d7ef030e94a6449783605d6c306c1f69c10c2fa06b66a030e0d1db793\nStatus: Downloaded newer image for nginx:alpine\n ---> 1e415454686a\nStep 24/25 : COPY --from=app-zip-creator /app.zip /usr/share/nginx/html/assets/app.zip\n ---> 1090ba7e52b9\nStep 25/25 : COPY --from=build /app/site /usr/share/nginx/html\n ---> 0f2c49afeaa7\nSuccessfully built 0f2c49afeaa7\nSuccessfully tagged getting-started:latest\n","stderr":"","imageSize":46956115},"repair":{"violations":[],"repairedDockerfile":"# Install the base requirements for the app.\n# This stage is to support development.\nFROM python:alpine AS base\nWORKDIR /app\nCOPY requirements.txt .\nRUN pip install -r requirements.txt\n\nFROM node:18-alpine AS app-base\nWORKDIR /app\nCOPY app/package.json app/yarn.lock ./\nCOPY app/spec ./spec\nCOPY app/src ./src\n\n# Run tests to validate app\nFROM app-base AS test\nRUN yarn install\nRUN yarn test\n\n# Clear out the node_modules and create the zip\nFROM app-base AS app-zip-creator\nCOPY --from=test /app/package.json /app/yarn.lock ./\nCOPY app/spec ./spec\nCOPY app/src ./src\nRUN apk add zip && \\\n    zip -r /app.zip /app\n\n# Dev-ready container - actual files will be mounted in\nFROM base AS dev\nCMD [\"mkdocs\", \"serve\", \"-a\", \"0.0.0.0:8000\"]\n\n# Do the actual build of the mkdocs site\nFROM base AS build\nCOPY . .\nRUN mkdocs build\n\n# Extract the static content from the build\n# and use a nginx image to serve the content\nFROM nginx:alpine\nCOPY --from=app-zip-creator /app.zip /usr/share/nginx/html/assets/app.zip\nCOPY --from=build /app/site /usr/share/nginx/html\n"},"endTime":1672002693944}