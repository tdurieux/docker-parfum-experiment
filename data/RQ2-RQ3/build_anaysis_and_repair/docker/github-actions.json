{"repository":"https://github.com/docker/github-actions","dockerfilePath":"Dockerfile","startTime":1672232455503,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/docker/github-actions'...\n","error":null,"commit":"5c693c8a4e62c11301de4c6aab0d543a8d9ae343"},"originalBuild":{"startTimestamp":1672232456339,"endTimestamp":1672232519867,"error":null,"stdout":"Sending build context to Docker daemon  302.6kB\r\r\nStep 1/25 : ARG GO_VERSION=1.13.7\nStep 2/25 : ARG GOLANGCI_LINT_VERSION=v1.23.6\nStep 3/25 : ARG DND_VERSION=19.03\nStep 4/25 : FROM golang:${GO_VERSION} AS builder\n1.13.7: Pulling from library/golang\ndc65f448a2e2: Pulling fs layer\n346ffb2b67d7: Pulling fs layer\ndea4ecac934f: Pulling fs layer\n8ac92ddf84b3: Pulling fs layer\n7ca605383307: Pulling fs layer\nbd20b51e1705: Pulling fs layer\n844755650966: Pulling fs layer\n7ca605383307: Waiting\nbd20b51e1705: Waiting\n844755650966: Waiting\n8ac92ddf84b3: Waiting\n346ffb2b67d7: Verifying Checksum\n346ffb2b67d7: Download complete\ndea4ecac934f: Verifying Checksum\ndea4ecac934f: Download complete\ndc65f448a2e2: Verifying Checksum\ndc65f448a2e2: Download complete\n8ac92ddf84b3: Verifying Checksum\n8ac92ddf84b3: Download complete\n7ca605383307: Verifying Checksum\n7ca605383307: Download complete\n844755650966: Verifying Checksum\n844755650966: Download complete\ndc65f448a2e2: Pull complete\n346ffb2b67d7: Pull complete\ndea4ecac934f: Pull complete\nbd20b51e1705: Verifying Checksum\nbd20b51e1705: Download complete\n8ac92ddf84b3: Pull complete\n7ca605383307: Pull complete\nbd20b51e1705: Pull complete\n844755650966: Pull complete\nDigest: sha256:7d075cc6f8cd09610b013aba4cb91538da92f49221f98cb22d81fca34a744f2c\nStatus: Downloaded newer image for golang:1.13.7\n ---> 6586e3d10e96\nStep 5/25 : RUN curl -sSfL https://raw.githubusercontent.com/golangci/golangci-lint/master/install.sh | sh -s -- -b $(go env GOPATH)/bin ${GOLANGCI_LINT_VERSION}\n ---> Running in a7b3a7e0bdad\n\u001b[91mgolangci/golangci-lint info checking GitHub for latest tag\n\u001b[0m\u001b[91mgolangci/golangci-lint info found version: 1.50.1 for v1.50.1/linux/amd64\n\u001b[0m\u001b[91mgolangci/golangci-lint info installed /go/bin/golangci-lint\n\u001b[0mRemoving intermediate container a7b3a7e0bdad\n ---> 0c2344816ecb\nStep 6/25 : ARG MAKE_TARGET=default\n ---> Running in 509cde02741c\nRemoving intermediate container 509cde02741c\n ---> ee899de6c9c6\nStep 7/25 : ENV CGO_ENABLED=0\n ---> Running in 8d6b827b5285\nRemoving intermediate container 8d6b827b5285\n ---> b1599dc1502b\nStep 8/25 : WORKDIR /src\n ---> Running in 4d7242c2e82d\nRemoving intermediate container 4d7242c2e82d\n ---> 381960433b36\nStep 9/25 : COPY . .\n ---> 03861d11104f\nStep 10/25 : RUN make ${MAKE_TARGET}\n ---> Running in f7999291ead7\ngo build -o bin/github-actions ./cmd\n\u001b[91mgo: downloading github.com/spf13/cobra v0.0.6\n\u001b[0m\u001b[91mgo: downloading github.com/caarlos0/env/v6 v6.1.0\n\u001b[0m\u001b[91mgo: extracting github.com/caarlos0/env/v6 v6.1.0\n\u001b[0m\u001b[91mgo: extracting github.com/spf13/cobra v0.0.6\n\u001b[0m\u001b[91mgo: downloading github.com/spf13/pflag v1.0.5\n\u001b[0m\u001b[91mgo: extracting github.com/spf13/pflag v1.0.5\n\u001b[0m\u001b[91mgo: finding github.com/caarlos0/env/v6 v6.1.0\n\u001b[0m\u001b[91mgo: finding github.com/spf13/cobra v0.0.6\n\u001b[0m\u001b[91mgo: finding github.com/spf13/pflag v1.0.5\n\u001b[0mgolangci-lint run --config golangci.yml ./...\n\u001b[91mlevel=warning msg=\"[runner] The linter 'golint' is deprecated (since v1.41.0) due to: The repository of the linter has been archived by the owner.  Replaced by revive.\"\n\u001b[0mgo test ./cmd/... ./internal/...\n?   \tgithub.com/docker/github-actions/cmd\t[no test files]\nok  \tgithub.com/docker/github-actions/internal/command\t0.006s\nok  \tgithub.com/docker/github-actions/internal/options\t0.007s\nRemoving intermediate container f7999291ead7\n ---> ba5174cd51ec\nStep 11/25 : FROM golang:${GO_VERSION} AS e2e\n ---> 6586e3d10e96\nStep 12/25 : ARG CLI_CHANNEL=stable\n ---> Running in 00827f889a44\nRemoving intermediate container 00827f889a44\n ---> f362c5b44aa8\nStep 13/25 : ARG CLI_VERSION=19.03.5\n ---> Running in f7a64899882c\nRemoving intermediate container f7a64899882c\n ---> 950d67da4c43\nStep 14/25 : RUN apt-get install -y -q --no-install-recommends coreutils util-linux\n ---> Running in d42251f9ef91\nReading package lists...\nBuilding dependency tree...\nReading state information...\ncoreutils is already the newest version (8.30-3).\ncoreutils set to manually installed.\nutil-linux is already the newest version (2.33.1-0.1).\nutil-linux set to manually installed.\n0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.\nRemoving intermediate container d42251f9ef91\n ---> be43fcdb667d\nStep 15/25 : ENV CGO_ENABLED=0\n ---> Running in ccdab1732dbd\nRemoving intermediate container ccdab1732dbd\n ---> f5e4cd85c3c7\nStep 16/25 : ENV GITHUB_ACTIONS_BINARY=/github-actions\n ---> Running in 15bb825f9038\nRemoving intermediate container 15bb825f9038\n ---> ea7ff6be1b67\nStep 17/25 : WORKDIR /tests\n ---> Running in 222e3543a337\nRemoving intermediate container 222e3543a337\n ---> b621f236c099\nStep 18/25 : RUN curl -fL https://download.docker.com/linux/static/${CLI_CHANNEL}/x86_64/docker-${CLI_VERSION}.tgz | tar xzO docker/docker > /usr/bin/docker && chmod +x /usr/bin/docker\n ---> Running in 4d4be014559e\n\u001b[91m  % Total    % Received % \u001b[0m\u001b[91mXferd  Average Speed   Time    Ti\u001b[0m\u001b[91mme     Time \u001b[0m\u001b[91m Cur\u001b[0m\u001b[91mren\u001b[0m\u001b[91mt\n \u001b[0m\u001b[91m   \u001b[0m\u001b[91m           \u001b[0m\u001b[91m       \u001b[0m\u001b[91m     \u001b[0m\u001b[91m      D\u001b[0m\u001b[91mloa\u001b[0m\u001b[91md  Upload \u001b[0m\u001b[91m  Total\u001b[0m\u001b[91m   Spent\u001b[0m\u001b[91m    Left  S\u001b[0m\u001b[91mpeed\n\u001b[0m\u001b[91m\r  0   \u001b[0m\u001b[91m  0    0  \u001b[0m\u001b[91m  \u001b[0m\u001b[91m 0 \u001b[0m\u001b[91m   0    \u001b[0m\u001b[91m 0      0 \u001b[0m\u001b[91m     0 --:--:\u001b[0m\u001b[91m-- --:--\u001b[0m\u001b[91m:-- \u001b[0m\u001b[91m--\u001b[0m\u001b[91m:--:--\u001b[0m\u001b[91m    \u001b[0m\u001b[91m 0\u001b[0m\u001b[91m\r 17 60.3M   17 10.4M    \u001b[0m\u001b[91m0     0  14.2M      0 \u001b[0m\u001b[91m 0:00:04 --:\u001b[0m\u001b[91m--:--\u001b[0m\u001b[91m \u001b[0m\u001b[91m 0:00:0\u001b[0m\u001b[91m4 14.1\u001b[0m\u001b[91mM\u001b[0m\u001b[91m\r 54 60.3M   54 32.9M    \u001b[0m\u001b[91m0     0  1\u001b[0m\u001b[91m8.9M      0  0:00\u001b[0m\u001b[91m:03  0:00:\u001b[0m\u001b[91m01  0:\u001b[0m\u001b[91m00:\u001b[0m\u001b[91m02\u001b[0m\u001b[91m 1\u001b[0m\u001b[91m8.9\u001b[0m\u001b[91mM\u001b[0m\u001b[91m\r 94 60.3M   94 56.9M  \u001b[0m\u001b[91m  0     0  20.7M   \u001b[0m\u001b[91m   0  0:00:02 \u001b[0m\u001b[91m 0:00:\u001b[0m\u001b[91m0\u001b[0m\u001b[91m2 --\u001b[0m\u001b[91m:\u001b[0m\u001b[91m--:-\u001b[0m\u001b[91m-\u001b[0m\u001b[91m 20.\u001b[0m\u001b[91m7\u001b[0m\u001b[91mM\u001b[0m\u001b[91m\r100 60.3M  100 60.3M    0     0  20.8M      0  0:00:02  0:00:02 \u001b[0m\u001b[91m--:--:-- 20.8M\n\u001b[0mRemoving intermediate container 4d4be014559e\n ---> d6b197c596db\nStep 19/25 : COPY . .\n ---> 7494ab223aee\nStep 20/25 : COPY --from=builder /src/bin/github-actions /github-actions\n ---> 2d53f17c0a1e\nStep 21/25 : FROM scratch AS cli\n ---> \nStep 22/25 : COPY --from=builder /src/bin/github-actions github-actions\n ---> 09524761942e\nStep 23/25 : FROM docker:${DND_VERSION}\n19.03: Pulling from library/docker\n540db60ca938: Pulling fs layer\n5a38b3726f4b: Pulling fs layer\ne5fa5deb3340: Pulling fs layer\n09182082685c: Pulling fs layer\n4562e3055ed2: Pulling fs layer\nb4de57a4336a: Pulling fs layer\n542e5df0dc5e: Pulling fs layer\n4562e3055ed2: Waiting\nb4de57a4336a: Waiting\n542e5df0dc5e: Waiting\n09182082685c: Waiting\ne5fa5deb3340: Verifying Checksum\ne5fa5deb3340: Download complete\n5a38b3726f4b: Verifying Checksum\n5a38b3726f4b: Download complete\n540db60ca938: Verifying Checksum\n540db60ca938: Download complete\n540db60ca938: Pull complete\n4562e3055ed2: Download complete\nb4de57a4336a: Verifying Checksum\nb4de57a4336a: Download complete\n5a38b3726f4b: Pull complete\ne5fa5deb3340: Pull complete\n542e5df0dc5e: Download complete\n09182082685c: Download complete\n09182082685c: Pull complete\n4562e3055ed2: Pull complete\nb4de57a4336a: Pull complete\n542e5df0dc5e: Pull complete\nDigest: sha256:ea1f0761c92b600417ad14bc9b2b3a30abf8e96e94895fee6cbb5353316f30b0\nStatus: Downloaded newer image for docker:19.03\n ---> 33d3743ceb6a\nStep 24/25 : COPY --from=builder /src/bin/github-actions /github-actions\n ---> 51951c990730\nStep 25/25 : ENTRYPOINT [\"/github-actions\"]\n ---> Running in 2d34ed5c430c\nRemoving intermediate container 2d34ed5c430c\n ---> 7a527fdff1d9\nSuccessfully built 7a527fdff1d9\nSuccessfully tagged github-actions:latest\n","stderr":"","imageSize":224874983},"repair":{"violations":[{"name":"ruleAptGetUpdatePrecedesInstall","position":{"start":25,"end":25,"columnStart":4,"columnEnd":70}},{"name":"ruleAptGetInstallThenRemoveAptLists","position":{"start":25,"end":25,"columnStart":4,"columnEnd":70}}],"repairedDockerfile":"ARG GO_VERSION=1.13.7\nARG GOLANGCI_LINT_VERSION=v1.23.6\nARG DND_VERSION=19.03\n\n\n# Builds the github-actions binary, checks linting, and runs unit level tests\nFROM golang:${GO_VERSION} AS builder\n\nRUN curl -sSfL https://raw.githubusercontent.com/golangci/golangci-lint/master/install.sh | sh -s -- -b $(go env GOPATH)/bin ${GOLANGCI_LINT_VERSION}\n\nARG MAKE_TARGET=default\nENV CGO_ENABLED=0\nWORKDIR /src\n\nCOPY . .\n\nRUN make ${MAKE_TARGET}\n\n\n# Used to run e2e tests for github-actions\n# This image must be run as a container to run the tests\nFROM golang:${GO_VERSION} AS e2e\nARG CLI_CHANNEL=stable\nARG CLI_VERSION=19.03.5\n\nRUN apt-get install -y -q --no-install-recommends coreutils util-linux\n\nENV CGO_ENABLED=0\nENV GITHUB_ACTIONS_BINARY=/github-actions\nWORKDIR /tests\n\nRUN curl -fL https://download.docker.com/linux/static/${CLI_CHANNEL}/x86_64/docker-${CLI_VERSION}.tgz | tar xzO docker/docker > /usr/bin/docker && chmod +x /usr/bin/docker\n\nCOPY . .\nCOPY --from=builder /src/bin/github-actions /github-actions\n\n\n# Used to extract the github-actions binary\nFROM scratch AS cli\nCOPY --from=builder /src/bin/github-actions github-actions\n\n\n# The github-actions image that is used by published docker github actions\nFROM docker:${DND_VERSION}\n\nCOPY --from=builder /src/bin/github-actions /github-actions\n\nENTRYPOINT [\"/github-actions\"]\n"},"repairedBuild":{"startTimestamp":1672232520171,"endTimestamp":1672232545590,"error":null,"stdout":"Sending build context to Docker daemon  302.6kB\r\r\nStep 1/25 : ARG GO_VERSION=1.13.7\nStep 2/25 : ARG GOLANGCI_LINT_VERSION=v1.23.6\nStep 3/25 : ARG DND_VERSION=19.03\nStep 4/25 : FROM golang:${GO_VERSION} AS builder\n ---> 6586e3d10e96\nStep 5/25 : RUN curl -sSfL https://raw.githubusercontent.com/golangci/golangci-lint/master/install.sh | sh -s -- -b $(go env GOPATH)/bin ${GOLANGCI_LINT_VERSION}\n ---> Running in e2d15a10711b\n\u001b[91mgolangci/golangci-lint info checking GitHub for latest tag\n\u001b[0m\u001b[91mgolangci/golangci-lint info found version: 1.50.1 for v1.50.1/linux/amd64\n\u001b[0m\u001b[91mgolangci/golangci-lint info installed /go/bin/golangci-lint\n\u001b[0mRemoving intermediate container e2d15a10711b\n ---> 95d4a98d007d\nStep 6/25 : ARG MAKE_TARGET=default\n ---> Running in 9691262ea6e3\nRemoving intermediate container 9691262ea6e3\n ---> 07b47ba8a71e\nStep 7/25 : ENV CGO_ENABLED=0\n ---> Running in 8b4de727e972\nRemoving intermediate container 8b4de727e972\n ---> 1615a6a49373\nStep 8/25 : WORKDIR /src\n ---> Running in 2049af03e2b9\nRemoving intermediate container 2049af03e2b9\n ---> 610db7f536c7\nStep 9/25 : COPY . .\n ---> c2ca2180299c\nStep 10/25 : RUN make ${MAKE_TARGET}\n ---> Running in 4920025bac50\ngo build -o bin/github-actions ./cmd\n\u001b[91mgo: downloading github.com/spf13/cobra v0.0.6\n\u001b[0m\u001b[91mgo: downloading github.com/caarlos0/env/v6 v6.1.0\n\u001b[0m\u001b[91mgo: extracting github.com/caarlos0/env/v6 v6.1.0\n\u001b[0m\u001b[91mgo: extracting github.com/spf13/cobra v0.0.6\n\u001b[0m\u001b[91mgo: downloading github.com/spf13/pflag v1.0.5\n\u001b[0m\u001b[91mgo: extracting github.com/spf13/pflag v1.0.5\n\u001b[0m\u001b[91mgo: finding github.com/spf13/cobra v0.0.6\ngo: finding github.com/caarlos0/env/v6 v6.1.0\n\u001b[0m\u001b[91mgo: finding github.com/spf13/pflag v1.0.5\n\u001b[0mgolangci-lint run --config golangci.yml ./...\n\u001b[91mlevel=warning msg=\"[runner] The linter 'golint' is deprecated (since v1.41.0) due to: The repository of the linter has been archived by the owner.  Replaced by revive.\"\n\u001b[0mgo test ./cmd/... ./internal/...\n?   \tgithub.com/docker/github-actions/cmd\t[no test files]\nok  \tgithub.com/docker/github-actions/internal/command\t0.007s\nok  \tgithub.com/docker/github-actions/internal/options\t0.007s\nRemoving intermediate container 4920025bac50\n ---> 7d09750a8b0d\nStep 11/25 : FROM golang:${GO_VERSION} AS e2e\n ---> 6586e3d10e96\nStep 12/25 : ARG CLI_CHANNEL=stable\n ---> Running in 04a82287c2ae\nRemoving intermediate container 04a82287c2ae\n ---> fa3ebf8e1587\nStep 13/25 : ARG CLI_VERSION=19.03.5\n ---> Running in f24d97449f1b\nRemoving intermediate container f24d97449f1b\n ---> 43c9c4591c29\nStep 14/25 : RUN apt-get install -y -q --no-install-recommends coreutils util-linux\n ---> Running in 075d191d611a\nReading package lists...\nBuilding dependency tree...\nReading state information...\ncoreutils is already the newest version (8.30-3).\ncoreutils set to manually installed.\nutil-linux is already the newest version (2.33.1-0.1).\nutil-linux set to manually installed.\n0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.\nRemoving intermediate container 075d191d611a\n ---> 36bb342ebbaf\nStep 15/25 : ENV CGO_ENABLED=0\n ---> Running in 32d758f01b2d\nRemoving intermediate container 32d758f01b2d\n ---> 69264d8c26f7\nStep 16/25 : ENV GITHUB_ACTIONS_BINARY=/github-actions\n ---> Running in 81f0562e4a91\nRemoving intermediate container 81f0562e4a91\n ---> d52510e22663\nStep 17/25 : WORKDIR /tests\n ---> Running in 9f73b8fd0615\nRemoving intermediate container 9f73b8fd0615\n ---> 6ed1328e2599\nStep 18/25 : RUN curl -fL https://download.docker.com/linux/static/${CLI_CHANNEL}/x86_64/docker-${CLI_VERSION}.tgz | tar xzO docker/docker > /usr/bin/docker && chmod +x /usr/bin/docker\n ---> Running in ce290a153064\n\u001b[91m  % Total    % Received\u001b[0m\u001b[91m % Xferd  Average Sp\u001b[0m\u001b[91mee\u001b[0m\u001b[91md   T\u001b[0m\u001b[91mime    \u001b[0m\u001b[91mTime     Time  Cu\u001b[0m\u001b[91mrrent\n            \u001b[0m\u001b[91m       \u001b[0m\u001b[91m             \u001b[0m\u001b[91m Dload \u001b[0m\u001b[91m \u001b[0m\u001b[91mUplo\u001b[0m\u001b[91mad \u001b[0m\u001b[91m  To\u001b[0m\u001b[91mtal   Spent \u001b[0m\u001b[91m   Lef\u001b[0m\u001b[91mt  Sp\u001b[0m\u001b[91meed\u001b[0m\u001b[91m\n\u001b[0m\u001b[91m\r  0\u001b[0m\u001b[91m  \u001b[0m\u001b[91m   0 \u001b[0m\u001b[91m   \u001b[0m\u001b[91m0\u001b[0m\u001b[91m  \u001b[0m\u001b[91m   0    0   \u001b[0m\u001b[91m  \u001b[0m\u001b[91m0  \u001b[0m\u001b[91m   \u001b[0m\u001b[91m 0  \u001b[0m\u001b[91m    0 --:--:--\u001b[0m\u001b[91m --\u001b[0m\u001b[91m:--\u001b[0m\u001b[91m:-\u001b[0m\u001b[91m- --:--:-\u001b[0m\u001b[91m-   \u001b[0m\u001b[91m  0\u001b[0m\u001b[91m\r  5 60.3M    5 3156k    0   \u001b[0m\u001b[91m  0  15.4\u001b[0m\u001b[91mM      0\u001b[0m\u001b[91m  \u001b[0m\u001b[91m0:0\u001b[0m\u001b[91m0:03 --:--:--\u001b[0m\u001b[91m  0:0\u001b[0m\u001b[91m0:03 15.4M\u001b[0m\u001b[91m\r 34 60.3M   34 21.0M    0     0  17.5M      0  0:00:03  0:00:01  0:00:02 1\u001b[0m\u001b[91m7.4M\u001b[0m\u001b[91m\r 72 60.3M   72 43.5M    0     0  19.9M      0  0:00:03  0:00:\u001b[0m\u001b[91m02  0:00:01 19\u001b[0m\u001b[91m.9M\u001b[0m\u001b[91m\r100 60.3M  100 60.3M    0     0  21.2M      0  0:00:02\u001b[0m\u001b[91m  0:00:02 --:-\u001b[0m\u001b[91m-:\u001b[0m\u001b[91m-- 21\u001b[0m\u001b[91m.2M\n\u001b[0mRemoving intermediate container ce290a153064\n ---> cecb0e3a6185\nStep 19/25 : COPY . .\n ---> eb1468504bf5\nStep 20/25 : COPY --from=builder /src/bin/github-actions /github-actions\n ---> e749e9656da6\nStep 21/25 : FROM scratch AS cli\n ---> \nStep 22/25 : COPY --from=builder /src/bin/github-actions github-actions\n ---> 2a878804b100\nStep 23/25 : FROM docker:${DND_VERSION}\n ---> 33d3743ceb6a\nStep 24/25 : COPY --from=builder /src/bin/github-actions /github-actions\n ---> 6d6afe194678\nStep 25/25 : ENTRYPOINT [\"/github-actions\"]\n ---> Running in 301e3b0b986b\nRemoving intermediate container 301e3b0b986b\n ---> 7c49908d116d\nSuccessfully built 7c49908d116d\nSuccessfully tagged github-actions:latest\n","stderr":"","imageSize":224874983},"endTime":1672232545828}