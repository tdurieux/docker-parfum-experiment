{"repository":"https://github.com/docker/swarmkit","dockerfilePath":"Dockerfile","startTime":1672651668798,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/docker/swarmkit'...\n","error":null,"commit":"6383e43f3b835034e0d703915f348dbc1a21ca8f"},"originalBuild":{"startTimestamp":1672651671468,"endTimestamp":1672651731352,"error":null,"stdout":"Sending build context to Docker daemon  45.76MB\r\r\nStep 1/15 : ARG GO_VERSION=1.18.9\nStep 2/15 : ARG DEBIAN_FRONTEND=noninteractive\nStep 3/15 : ARG BASE_DEBIAN_DISTRO=\"bullseye\"\nStep 4/15 : ARG GOLANG_IMAGE=\"golang:${GO_VERSION}-${BASE_DEBIAN_DISTRO}\"\nStep 5/15 : FROM ${GOLANG_IMAGE}\n1.18.9-bullseye: Pulling from library/golang\n32de3c850997: Already exists\nfa1d4c8d85a4: Already exists\nc796299bbbdd: Already exists\n81283a9569ad: Already exists\nc768848b86a2: Already exists\n160a777925fe: Pulling fs layer\n1be94824532a: Pulling fs layer\n1be94824532a: Verifying Checksum\n1be94824532a: Download complete\n160a777925fe: Verifying Checksum\n160a777925fe: Download complete\n160a777925fe: Pull complete\n1be94824532a: Pull complete\nDigest: sha256:0ef7bf1f1682ba97d20a07fdaadf481c9210fbe688ac2804ac60660980c690fc\nStatus: Downloaded newer image for golang:1.18.9-bullseye\n ---> fffd0d9a59da\nStep 6/15 : RUN apt-get update && apt-get install -y make git unzip\n ---> Running in 37d220213878\nGet:1 http://deb.debian.org/debian bullseye InRelease [116 kB]\nGet:2 http://deb.debian.org/debian-security bullseye-security InRelease [48.4 kB]\nGet:3 http://deb.debian.org/debian bullseye-updates InRelease [44.1 kB]\nGet:4 http://deb.debian.org/debian bullseye/main amd64 Packages [8183 kB]\nGet:5 http://deb.debian.org/debian-security bullseye-security/main amd64 Packages [210 kB]\nGet:6 http://deb.debian.org/debian bullseye-updates/main amd64 Packages [14.6 kB]\nFetched 8616 kB in 1s (6186 kB/s)\nReading package lists...\nReading package lists...\nBuilding dependency tree...\nReading state information...\ngit is already the newest version (1:2.30.2-1).\nmake is already the newest version (4.3-4.1).\nSuggested packages:\n  zip\nThe following NEW packages will be installed:\n  unzip\n0 upgraded, 1 newly installed, 0 to remove and 1 not upgraded.\nNeed to get 172 kB of archives.\nAfter this operation, 393 kB of additional disk space will be used.\nGet:1 http://deb.debian.org/debian bullseye/main amd64 unzip amd64 6.0-26+deb11u1 [172 kB]\n\u001b[91mdebconf: delaying package configuration, since apt-utils is not installed\n\u001b[0mFetched 172 kB in 0s (9144 kB/s)\nSelecting previously unselected package unzip.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 15718 files and directories currently installed.)\r\nPreparing to unpack .../unzip_6.0-26+deb11u1_amd64.deb ...\r\nUnpacking unzip (6.0-26+deb11u1) ...\r\nSetting up unzip (6.0-26+deb11u1) ...\r\nRemoving intermediate container 37d220213878\n ---> c3e90e4ad0be\nStep 7/15 : ARG PROTOC_VERSION=3.11.4\n ---> Running in bd086242a67f\nRemoving intermediate container bd086242a67f\n ---> 165e534f1fac\nStep 8/15 : RUN curl --silent --show-error --location --output protoc.zip   https://github.com/protocolbuffers/protobuf/releases/download/v$PROTOC_VERSION/protoc-$PROTOC_VERSION-linux-x86_64.zip   && unzip -d /usr/local protoc.zip include/\\* bin/\\*   && rm -f protoc.zip\n ---> Running in 5b6bccd54ee2\nArchive:  protoc.zip\n   creating: /usr/local/include/google/\n   creating: /usr/local/include/google/protobuf/\n  inflating: /usr/local/include/google/protobuf/type.proto  \n  inflating: /usr/local/include/google/protobuf/duration.proto  \n  inflating: /usr/local/include/google/protobuf/empty.proto  \n  inflating: /usr/local/include/google/protobuf/wrappers.proto  \n  inflating: /usr/local/include/google/protobuf/field_mask.proto  \n   creating: /usr/local/include/google/protobuf/compiler/\n  inflating: /usr/local/include/google/protobuf/compiler/plugin.proto  \n  inflating: /usr/local/include/google/protobuf/struct.proto  \n  inflating: /usr/local/include/google/protobuf/any.proto  \n  inflating: /usr/local/include/google/protobuf/descriptor.proto  \n  inflating: /usr/local/include/google/protobuf/source_context.proto  \n  inflating: /usr/local/include/google/protobuf/timestamp.proto  \n  inflating: /usr/local/include/google/protobuf/api.proto  \n  inflating: /usr/local/bin/protoc   \nRemoving intermediate container 5b6bccd54ee2\n ---> 00589546cec5\nStep 9/15 : ENV GO111MODULE=on\n ---> Running in f3e774e2f2ed\nRemoving intermediate container f3e774e2f2ed\n ---> 3a1e5ff39dbd\nStep 10/15 : WORKDIR /go/src/github.com/docker/swarmkit/\n ---> Running in c2d13edc4ea4\nRemoving intermediate container c2d13edc4ea4\n ---> 60dcea71c779\nStep 11/15 : COPY direct.mk .\n ---> 17d510c15d3f\nStep 12/15 : COPY tools .\n ---> 76e9270fd577\nStep 13/15 : RUN make --file=direct.mk setup\n ---> Running in 386eb276351f\n🐳 setup\n# install golangci-lint version v1.50.1 to ./bin/golangci-lint\n\u001b[91mgolangci/golangci-lint info checking GitHub for tag 'v1.50.1'\n\u001b[0m\u001b[91mgolangci/golangci-lint info found version: 1.50.1 for v1.50.1/linux/amd64\n\u001b[0m\u001b[91mgolangci/golangci-lint info installed ./bin/golangci-lint\n\u001b[0m\u001b[91m/bin/sh: 1: cd: can't cd to tools\n\u001b[0m\u001b[91mgo: downloading github.com/containerd/protobuild v0.1.1-0.20211025221430-7e5ee24bc1f7\n\u001b[0m\u001b[91mgo: downloading github.com/golang/protobuf v1.5.2\n\u001b[0m\u001b[91mgo: downloading github.com/pelletier/go-toml v1.8.1\n\u001b[0m\u001b[91mgo: downloading google.golang.org/protobuf v1.27.1\n\u001b[0mRemoving intermediate container 386eb276351f\n ---> 94798ec40981\nStep 14/15 : COPY . .\n ---> 855baf761e9b\nStep 15/15 : CMD [\"make\"]\n ---> Running in 92c25da1726f\nRemoving intermediate container 92c25da1726f\n ---> 62ca34754dc4\nSuccessfully built 62ca34754dc4\nSuccessfully tagged swarmkit:latest\n","stderr":"","imageSize":1094206170},"repair":{"violations":[{"name":"curlUseFlagF","position":{"start":13,"end":14,"columnStart":4,"columnEnd":120}},{"name":"ruleAptGetInstallUseNoRec","position":{"start":8,"end":8,"columnStart":22,"columnEnd":55}},{"name":"ruleAptGetInstallThenRemoveAptLists","position":{"start":8,"end":8,"columnStart":22,"columnEnd":55}}],"repairedDockerfile":"# NOTE(dperny): for some reason, alpine was giving me trouble\nARG GO_VERSION=1.18.9\nARG DEBIAN_FRONTEND=noninteractive\nARG BASE_DEBIAN_DISTRO=\"bullseye\"\nARG GOLANG_IMAGE=\"golang:${GO_VERSION}-${BASE_DEBIAN_DISTRO}\"\n\nFROM ${GOLANG_IMAGE}\n\nRUN apt-get update && apt-get install --no-install-recommends -y make git unzip\n\n# should stay consistent with the version in .circleci/config.yml\nARG PROTOC_VERSION=3.11.4\n# download and install protoc binary and .proto files\nRUN curl -f --silent --show-error --location --output protoc.zip \\\n  https://github.com/protocolbuffers/protobuf/releases/download/v$PROTOC_VERSION/protoc-$PROTOC_VERSION-linux-x86_64.zip \\\n  && unzip -d /usr/local protoc.zip include/\\* bin/\\* \\\n  && rm -f protoc.zip\n\nENV GO111MODULE=on\nWORKDIR /go/src/github.com/docker/swarmkit/\n\n# install the dependencies from `make setup`\n# we only copy `direct.mk` to avoid busting the cache too easily\nCOPY direct.mk .\nCOPY tools .\nRUN make --file=direct.mk setup\n\n# now we can copy the rest\nCOPY . .\n\n# default to just `make`. If you want to change the default command, change the\n# default make command, not this command.\nCMD [\"make\"]\n"},"repairedBuild":{"startTimestamp":1672651732050,"endTimestamp":1672651804056,"error":null,"stdout":"Sending build context to Docker daemon  45.76MB\r\r\nStep 1/15 : ARG GO_VERSION=1.18.9\nStep 2/15 : ARG DEBIAN_FRONTEND=noninteractive\nStep 3/15 : ARG BASE_DEBIAN_DISTRO=\"bullseye\"\nStep 4/15 : ARG GOLANG_IMAGE=\"golang:${GO_VERSION}-${BASE_DEBIAN_DISTRO}\"\nStep 5/15 : FROM ${GOLANG_IMAGE}\n ---> fffd0d9a59da\nStep 6/15 : RUN apt-get update && apt-get install --no-install-recommends -y make git unzip\n ---> Running in f8095f1cbdfd\nGet:1 http://deb.debian.org/debian bullseye InRelease [116 kB]\nGet:2 http://deb.debian.org/debian-security bullseye-security InRelease [48.4 kB]\nGet:3 http://deb.debian.org/debian bullseye-updates InRelease [44.1 kB]\nGet:4 http://deb.debian.org/debian bullseye/main amd64 Packages [8183 kB]\nGet:5 http://deb.debian.org/debian-security bullseye-security/main amd64 Packages [210 kB]\nGet:6 http://deb.debian.org/debian bullseye-updates/main amd64 Packages [14.6 kB]\nFetched 8616 kB in 2s (4070 kB/s)\nReading package lists...\nReading package lists...\nBuilding dependency tree...\nReading state information...\ngit is already the newest version (1:2.30.2-1).\nmake is already the newest version (4.3-4.1).\nSuggested packages:\n  zip\nThe following NEW packages will be installed:\n  unzip\n0 upgraded, 1 newly installed, 0 to remove and 1 not upgraded.\nNeed to get 172 kB of archives.\nAfter this operation, 393 kB of additional disk space will be used.\nGet:1 http://deb.debian.org/debian bullseye/main amd64 unzip amd64 6.0-26+deb11u1 [172 kB]\n\u001b[91mdebconf: delaying package configuration, since apt-utils is not installed\n\u001b[0mFetched 172 kB in 0s (6337 kB/s)\nSelecting previously unselected package unzip.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 15718 files and directories currently installed.)\r\nPreparing to unpack .../unzip_6.0-26+deb11u1_amd64.deb ...\r\nUnpacking unzip (6.0-26+deb11u1) ...\r\nSetting up unzip (6.0-26+deb11u1) ...\r\nRemoving intermediate container f8095f1cbdfd\n ---> cefd61597b97\nStep 7/15 : ARG PROTOC_VERSION=3.11.4\n ---> Running in b0c0f5d88446\nRemoving intermediate container b0c0f5d88446\n ---> 8237accdcdc1\nStep 8/15 : RUN curl -f --silent --show-error --location --output protoc.zip   https://github.com/protocolbuffers/protobuf/releases/download/v$PROTOC_VERSION/protoc-$PROTOC_VERSION-linux-x86_64.zip   && unzip -d /usr/local protoc.zip include/\\* bin/\\*   && rm -f protoc.zip\n ---> Running in f48f95f2e3f5\nArchive:  protoc.zip\n   creating: /usr/local/include/google/\n   creating: /usr/local/include/google/protobuf/\n  inflating: /usr/local/include/google/protobuf/type.proto  \n  inflating: /usr/local/include/google/protobuf/duration.proto  \n  inflating: /usr/local/include/google/protobuf/empty.proto  \n  inflating: /usr/local/include/google/protobuf/wrappers.proto  \n  inflating: /usr/local/include/google/protobuf/field_mask.proto  \n   creating: /usr/local/include/google/protobuf/compiler/\n  inflating: /usr/local/include/google/protobuf/compiler/plugin.proto  \n  inflating: /usr/local/include/google/protobuf/struct.proto  \n  inflating: /usr/local/include/google/protobuf/any.proto  \n  inflating: /usr/local/include/google/protobuf/descriptor.proto  \n  inflating: /usr/local/include/google/protobuf/source_context.proto  \n  inflating: /usr/local/include/google/protobuf/timestamp.proto  \n  inflating: /usr/local/include/google/protobuf/api.proto  \n  inflating: /usr/local/bin/protoc   \nRemoving intermediate container f48f95f2e3f5\n ---> 80ff45dc81e3\nStep 9/15 : ENV GO111MODULE=on\n ---> Running in 89bd95dd1307\nRemoving intermediate container 89bd95dd1307\n ---> 72e139915d45\nStep 10/15 : WORKDIR /go/src/github.com/docker/swarmkit/\n ---> Running in fe2127d63b82\nRemoving intermediate container fe2127d63b82\n ---> 08b7f99cacd2\nStep 11/15 : COPY direct.mk .\n ---> 7a4c7e8188d0\nStep 12/15 : COPY tools .\n ---> 324c2995ca5c\nStep 13/15 : RUN make --file=direct.mk setup\n ---> Running in 09e4937bdadb\n🐳 setup\n# install golangci-lint version v1.50.1 to ./bin/golangci-lint\n\u001b[91mgolangci/golangci-lint info checking GitHub for tag 'v1.50.1'\n\u001b[0m\u001b[91mgolangci/golangci-lint info found version: 1.50.1 for v1.50.1/linux/amd64\n\u001b[0m\u001b[91mgolangci/golangci-lint info installed ./bin/golangci-lint\n\u001b[0m\u001b[91m/bin/sh: 1: cd: can't cd to tools\n\u001b[0m\u001b[91mgo: downloading github.com/containerd/protobuild v0.1.1-0.20211025221430-7e5ee24bc1f7\n\u001b[0m\u001b[91mgo: downloading github.com/golang/protobuf v1.5.2\n\u001b[0m\u001b[91mgo: downloading github.com/pelletier/go-toml v1.8.1\n\u001b[0m\u001b[91mgo: downloading google.golang.org/protobuf v1.27.1\n\u001b[0mRemoving intermediate container 09e4937bdadb\n ---> cfd65f603c5f\nStep 14/15 : COPY . .\n ---> a2c208b0b69c\nStep 15/15 : CMD [\"make\"]\n ---> Running in 11796daf2f42\nRemoving intermediate container 11796daf2f42\n ---> 62f29ef5c39a\nSuccessfully built 62f29ef5c39a\nSuccessfully tagged swarmkit:latest\n","stderr":"","imageSize":1094206221},"endTime":1672651804504}