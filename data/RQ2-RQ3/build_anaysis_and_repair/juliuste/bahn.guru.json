{"repository":"https://github.com/juliuste/bahn.guru","dockerfilePath":"Dockerfile","startTime":1672218888928,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/juliuste/bahn.guru'...\n","error":null,"commit":"02260631cb5d05ed012506c5837120d0f4c32625"},"originalBuild":{"startTimestamp":1672218889862,"endTimestamp":1672218915596,"error":null,"stdout":"Sending build context to Docker daemon  889.9kB\r\r\nStep 1/12 : FROM node:fermium-alpine\nfermium-alpine: Pulling from library/node\nDigest: sha256:80e825b1f5ab859498a2f0f98f8197131a562906e5f8c95977057502e68ca05a\nStatus: Downloaded newer image for node:fermium-alpine\n ---> fb7170aa2b9b\nStep 2/12 : RUN npm i -g pnpm\n ---> Running in 1d72475aab16\n/usr/local/bin/pnpx -> /usr/local/lib/node_modules/pnpm/bin/pnpx.cjs\n/usr/local/bin/pnpm -> /usr/local/lib/node_modules/pnpm/bin/pnpm.cjs\n+ pnpm@7.20.0\nadded 1 package in 0.951s\nRemoving intermediate container 1d72475aab16\n ---> 1f1b6bfe2d38\nStep 3/12 : WORKDIR /app-src\n ---> Running in 2f36ee904a30\nRemoving intermediate container 2f36ee904a30\n ---> be8970ebf28a\nStep 4/12 : COPY assets ./assets\n ---> 99a05624085a\nStep 5/12 : COPY package.json pnpm-lock.yaml ./\n ---> 5e1afa9a512c\nStep 6/12 : RUN pnpm install\n ---> Running in 8e2a7e26f2ee\nLockfile is up to date, resolution step is skipped\nProgress: resolved 1, reused 0, downloaded 0, added 0\nPackages: +623\n++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++\nPackages are hard linked from the content-addressable store to the virtual store.\n  Content-addressable store is at: /root/.local/share/pnpm/store/v3\n  Virtual store is at:             node_modules/.pnpm\nProgress: resolved 623, reused 0, downloaded 88, added 79\nProgress: resolved 623, reused 0, downloaded 215, added 213\nProgress: resolved 623, reused 0, downloaded 380, added 380\nProgress: resolved 623, reused 0, downloaded 592, added 585\n.../node_modules/hafas-client install$ node lib/generate-install-id.js >id.json\n.../nodemon@2.0.16/node_modules/nodemon postinstall$ node bin/postinstall || exit 0\n.../node_modules/hafas-client install: Done\n.../nodemon@2.0.16/node_modules/nodemon postinstall: Love nodemon? You can now support the project via the open collective:\n.../nodemon@2.0.16/node_modules/nodemon postinstall:  > https://opencollective.com/nodemon/donate\n.../nodemon@2.0.16/node_modules/nodemon postinstall: Done\n\ndependencies:\n+ apicache 1.6.3\n+ compression 1.7.4\n+ db-hafas 3.1.1\n+ db-prices 3.0.3\n+ express 4.18.1\n+ fetch-ponyfill 7.1.0\n+ flix 4.0.3\n+ hast-util-to-html 8.0.3\n+ hastscript 7.0.2\n+ helmet 4.6.0\n+ horsey 4.2.2\n+ js-beautify 1.14.3\n+ lodash 4.17.21\n+ moment-duration-format 2.3.2\n+ moment-timezone 0.5.34\n+ ms 2.1.3\n+ p-queue 7.2.0\n+ p-retry 4.6.2\n+ p-timeout 5.0.2\n+ unist-builder 3.0.0\n\ndevDependencies:\n+ browserify 17.0.0\n+ depcheck 1.4.3\n+ eslint 8.16.0\n+ eslint-config-standard 17.0.0\n+ eslint-plugin-import 2.26.0\n+ eslint-plugin-n 15.2.0\n+ eslint-plugin-promise 6.0.0\n+ nodemon 2.0.16\n\nDone in 5.4s\nProgress: resolved 623, reused 0, downloaded 622, added 623, done\nRemoving intermediate container 8e2a7e26f2ee\n ---> 5127c9904921\nStep 7/12 : COPY src ./src\n ---> 447d718290cf\nStep 8/12 : RUN pnpm run build\n ---> Running in 4c43bdb07986\n\n> bahn.guru@0.17.0 build /app-src\n> npm run build-bahn && npm run build-bus\n\n\n> bahn.guru@0.17.0 build-bahn /app-src\n> mkdir -p assets/scripts/bundle && browserify 'assets/scripts/bahn.js' > 'assets/scripts/bundle/bahn.js'\n\n\n> bahn.guru@0.17.0 build-bus /app-src\n> mkdir -p assets/scripts/bundle && browserify 'assets/scripts/bus.js' > 'assets/scripts/bundle/bus.js'\n\nRemoving intermediate container 4c43bdb07986\n ---> 52148b40da14\nStep 9/12 : USER node\n ---> Running in 0d394fa24fda\nRemoving intermediate container 0d394fa24fda\n ---> 995999434f6e\nStep 10/12 : ENV PORT=3000\n ---> Running in 099c2763cf0c\nRemoving intermediate container 099c2763cf0c\n ---> 13b207b6dcdc\nStep 11/12 : ENV API=\"bahn\"\n ---> Running in bd50e4909c43\nRemoving intermediate container bd50e4909c43\n ---> 5e609aeb160b\nStep 12/12 : CMD [\"pnpm\", \"run\", \"start\"]\n ---> Running in da140a60a734\nRemoving intermediate container da140a60a734\n ---> 890ba75894b8\nSuccessfully built 890ba75894b8\nSuccessfully tagged bahn.guru:latest\n","stderr":"","imageSize":212227324},"repair":{"violations":[{"name":"npmCacheCleanAfterInstall","position":{"start":2,"end":2,"columnStart":4,"columnEnd":17}}],"repairedDockerfile":"# install dependencies\nFROM node:fermium-alpine\nRUN npm i -g pnpm\n\nWORKDIR /app-src\nCOPY assets ./assets\n\nCOPY package.json pnpm-lock.yaml ./\nRUN pnpm install\n\nCOPY src ./src\nRUN pnpm run build\n\nUSER node\n\nENV PORT=3000\nENV API=\"bahn\"\n\nCMD [\"pnpm\", \"run\", \"start\"]\n"},"repairedBuild":{"startTimestamp":1672218916163,"endTimestamp":1672218940711,"error":null,"stdout":"Sending build context to Docker daemon  889.9kB\r\r\nStep 1/12 : FROM node:fermium-alpine\n ---> fb7170aa2b9b\nStep 2/12 : RUN npm i -g pnpm\n ---> Running in 9aa7b579bc94\n/usr/local/bin/pnpm -> /usr/local/lib/node_modules/pnpm/bin/pnpm.cjs\n/usr/local/bin/pnpx -> /usr/local/lib/node_modules/pnpm/bin/pnpx.cjs\n+ pnpm@7.20.0\nadded 1 package in 0.834s\nRemoving intermediate container 9aa7b579bc94\n ---> ca117ab5e41d\nStep 3/12 : WORKDIR /app-src\n ---> Running in 3b8601368794\nRemoving intermediate container 3b8601368794\n ---> 1a55cd5e88a9\nStep 4/12 : COPY assets ./assets\n ---> 91a44d665f7f\nStep 5/12 : COPY package.json pnpm-lock.yaml ./\n ---> c833afc0a41d\nStep 6/12 : RUN pnpm install\n ---> Running in 56bb6b67c41b\nLockfile is up to date, resolution step is skipped\nProgress: resolved 1, reused 0, downloaded 0, added 0\nPackages: +623\n++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++\nPackages are hard linked from the content-addressable store to the virtual store.\n  Content-addressable store is at: /root/.local/share/pnpm/store/v3\n  Virtual store is at:             node_modules/.pnpm\nProgress: resolved 623, reused 0, downloaded 87, added 80\nProgress: resolved 623, reused 0, downloaded 232, added 228\nProgress: resolved 623, reused 0, downloaded 401, added 397\nProgress: resolved 623, reused 0, downloaded 618, added 618\n.../node_modules/hafas-client install$ node lib/generate-install-id.js >id.json\n.../nodemon@2.0.16/node_modules/nodemon postinstall$ node bin/postinstall || exit 0\n.../node_modules/hafas-client install: Done\n.../nodemon@2.0.16/node_modules/nodemon postinstall: Love nodemon? You can now support the project via the open collective:\n.../nodemon@2.0.16/node_modules/nodemon postinstall:  > https://opencollective.com/nodemon/donate\n.../nodemon@2.0.16/node_modules/nodemon postinstall: Done\n\ndependencies:\n+ apicache 1.6.3\n+ compression 1.7.4\n+ db-hafas 3.1.1\n+ db-prices 3.0.3\n+ express 4.18.1\n+ fetch-ponyfill 7.1.0\n+ flix 4.0.3\n+ hast-util-to-html 8.0.3\n+ hastscript 7.0.2\n+ helmet 4.6.0\n+ horsey 4.2.2\n+ js-beautify 1.14.3\n+ lodash 4.17.21\n+ moment-duration-format 2.3.2\n+ moment-timezone 0.5.34\n+ ms 2.1.3\n+ p-queue 7.2.0\n+ p-retry 4.6.2\n+ p-timeout 5.0.2\n+ unist-builder 3.0.0\n\ndevDependencies:\n+ browserify 17.0.0\n+ depcheck 1.4.3\n+ eslint 8.16.0\n+ eslint-config-standard 17.0.0\n+ eslint-plugin-import 2.26.0\n+ eslint-plugin-n 15.2.0\n+ eslint-plugin-promise 6.0.0\n+ nodemon 2.0.16\n\nDone in 5.4s\nProgress: resolved 623, reused 0, downloaded 622, added 623, done\nRemoving intermediate container 56bb6b67c41b\n ---> 00924d465e97\nStep 7/12 : COPY src ./src\n ---> 1c5a7a7746e3\nStep 8/12 : RUN pnpm run build\n ---> Running in cca4ece58bd7\n\n> bahn.guru@0.17.0 build /app-src\n> npm run build-bahn && npm run build-bus\n\n\n> bahn.guru@0.17.0 build-bahn /app-src\n> mkdir -p assets/scripts/bundle && browserify 'assets/scripts/bahn.js' > 'assets/scripts/bundle/bahn.js'\n\n\n> bahn.guru@0.17.0 build-bus /app-src\n> mkdir -p assets/scripts/bundle && browserify 'assets/scripts/bus.js' > 'assets/scripts/bundle/bus.js'\n\nRemoving intermediate container cca4ece58bd7\n ---> f6ac8b9beeb2\nStep 9/12 : USER node\n ---> Running in 97733b59fbe8\nRemoving intermediate container 97733b59fbe8\n ---> 13e820e4877e\nStep 10/12 : ENV PORT=3000\n ---> Running in bf89d571e92c\nRemoving intermediate container bf89d571e92c\n ---> ac7b23c6df42\nStep 11/12 : ENV API=\"bahn\"\n ---> Running in 2420253bec78\nRemoving intermediate container 2420253bec78\n ---> 0b9259a0dd0c\nStep 12/12 : CMD [\"pnpm\", \"run\", \"start\"]\n ---> Running in 144efdbfbdbd\nRemoving intermediate container 144efdbfbdbd\n ---> f74e3dc319c6\nSuccessfully built f74e3dc319c6\nSuccessfully tagged bahn.guru:latest\n","stderr":"","imageSize":212227324},"endTime":1672218941164}