{"repository":"https://github.com/platane/snk","dockerfilePath":"Dockerfile","startTime":1672135933104,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/platane/snk'...\n","error":null,"commit":"29c7ee48ec6ea2fe6e15abec3a9f812a2bebcd69"},"originalBuild":{"startTimestamp":1672135934422,"endTimestamp":1672136073867,"error":null,"stdout":"Sending build context to Docker daemon  1.608MB\r\r\nStep 1/12 : FROM node:16-slim as builder\n16-slim: Pulling from library/node\nb52ebda398ed: Already exists\nab06655d5b64: Pulling fs layer\n0d704ee2c0cf: Pulling fs layer\n977a2fe43c7f: Pulling fs layer\n4315dadb9483: Pulling fs layer\n4315dadb9483: Waiting\nab06655d5b64: Verifying Checksum\nab06655d5b64: Download complete\n977a2fe43c7f: Verifying Checksum\n977a2fe43c7f: Download complete\nab06655d5b64: Pull complete\n4315dadb9483: Verifying Checksum\n4315dadb9483: Download complete\n0d704ee2c0cf: Verifying Checksum\n0d704ee2c0cf: Download complete\n0d704ee2c0cf: Pull complete\n977a2fe43c7f: Pull complete\n4315dadb9483: Pull complete\nDigest: sha256:8e381b023efcf7a2fa4fb4e904ec9348d77bd3fc59f4551702db9aa52484082e\nStatus: Downloaded newer image for node:16-slim\n ---> 5fb222735b86\nStep 2/12 : WORKDIR /app\n ---> Running in 6ea98d714e4f\nRemoving intermediate container 6ea98d714e4f\n ---> b9c328a76fec\nStep 3/12 : COPY package.json yarn.lock ./\n ---> 822f6c900ff5\nStep 4/12 : COPY tsconfig.json ./\n ---> 05604d8f08df\nStep 5/12 : COPY packages packages\n ---> 9291bbb546ce\nStep 6/12 : RUN export YARN_CACHE_FOLDER=\"$(mktemp -d)\"     && yarn install --frozen-lockfile     && rm -r \"$YARN_CACHE_FOLDER\"\n ---> Running in 16d5758a1994\nyarn install v1.22.19\n[1/4] Resolving packages...\n[2/4] Fetching packages...\n[3/4] Linking dependencies...\n[4/4] Building fresh packages...\nDone in 29.25s.\nRemoving intermediate container 16d5758a1994\n ---> 84ded5785b7c\nStep 7/12 : RUN yarn build:action\n ---> Running in 5f27bc736a1c\nyarn run v1.22.19\n$ ( cd packages/action ; yarn build )\n\u001b[91mwarning package.json: No license field\n\u001b[0m$ ncc build --external canvas --external gifsicle --out dist ./index.ts\nncc: Version 0.34.0\nncc: Compiling file index.js into CJS\nncc: Using typescript@4.8.4 (local user-provided)\n  8kB  dist/142.index.js\n 10kB  dist/340.index.js\n 28kB  dist/317.index.js\n102kB  dist/index.js\n146kB  dist/371.index.js\n351kB  dist/197.index.js\n645kB  [5147ms] - ncc 0.34.0\nDone in 5.57s.\nRemoving intermediate container 5f27bc736a1c\n ---> 001010398861\nStep 8/12 : FROM node:16-slim\n ---> 5fb222735b86\nStep 9/12 : WORKDIR /action-release\n ---> Running in bc13a798afad\nRemoving intermediate container bc13a798afad\n ---> bc9647b23afd\nStep 10/12 : RUN export YARN_CACHE_FOLDER=\"$(mktemp -d)\"     && yarn add canvas@2.10.2 gifsicle@5.3.0 --no-lockfile     && rm -r \"$YARN_CACHE_FOLDER\"\n ---> Running in 33b98d705f7d\nyarn add v1.22.19\ninfo No lockfile found.\n[1/4] Resolving packages...\n\u001b[91mwarning gifsicle > bin-build > tempfile > uuid@3.4.0: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.\n\u001b[0m[2/4] Fetching packages...\n[3/4] Linking dependencies...\n[4/4] Building fresh packages...\nsuccess Saved 153 new dependencies.\ninfo Direct dependencies\n├─ canvas@2.10.2\n└─ gifsicle@5.3.0\ninfo All dependencies\n├─ @mapbox/node-pre-gyp@1.0.10\n├─ @sindresorhus/is@0.7.0\n├─ abbrev@1.1.1\n├─ agent-base@6.0.2\n├─ ansi-regex@5.0.1\n├─ aproba@2.0.0\n├─ arch@2.2.0\n├─ archive-type@4.0.0\n├─ are-we-there-yet@2.0.0\n├─ balanced-match@1.0.2\n├─ base64-js@1.5.1\n├─ bin-build@3.0.0\n├─ bin-check@4.1.0\n├─ bin-version-check@4.0.0\n├─ bin-version@3.1.0\n├─ bin-wrapper@4.1.0\n├─ bl@1.2.3\n├─ brace-expansion@1.1.11\n├─ buffer-alloc-unsafe@1.1.0\n├─ buffer-alloc@1.2.0\n├─ buffer-crc32@0.2.13\n├─ buffer-fill@1.0.0\n├─ buffer@5.7.1\n├─ cacheable-request@2.1.4\n├─ canvas@2.10.2\n├─ caw@2.0.1\n├─ chownr@2.0.0\n├─ clone-response@1.0.2\n├─ color-support@1.1.3\n├─ commander@2.20.3\n├─ concat-map@0.0.1\n├─ config-chain@1.1.13\n├─ console-control-strings@1.1.0\n├─ core-util-is@1.0.3\n├─ cross-spawn@5.1.0\n├─ decode-uri-component@0.2.2\n├─ decompress-response@3.3.0\n├─ decompress-tar@4.1.1\n├─ decompress-tarbz2@4.1.1\n├─ decompress-targz@4.1.1\n├─ decompress-unzip@4.0.1\n├─ delegates@1.0.0\n├─ detect-libc@2.0.1\n├─ download@6.2.5\n├─ emoji-regex@8.0.0\n├─ end-of-stream@1.4.4\n├─ executable@4.1.1\n├─ ext-list@2.2.2\n├─ fd-slicer@1.1.0\n├─ filename-reserved-regex@2.0.0\n├─ find-versions@3.2.0\n├─ from2@2.3.0\n├─ fs-constants@1.0.0\n├─ fs-minipass@2.1.0\n├─ fs.realpath@1.0.0\n├─ gauge@3.0.2\n├─ get-proxy@2.1.0\n├─ get-stream@3.0.0\n├─ gifsicle@5.3.0\n├─ glob@7.2.3\n├─ got@7.1.0\n├─ graceful-fs@4.2.10\n├─ has-symbol-support-x@1.4.2\n├─ has-to-string-tag-x@1.4.1\n├─ has-unicode@2.0.1\n├─ http-cache-semantics@3.8.1\n├─ https-proxy-agent@5.0.1\n├─ human-signals@2.1.0\n├─ ieee754@1.2.1\n├─ import-lazy@3.1.0\n├─ inflight@1.0.6\n├─ inherits@2.0.4\n├─ ini@1.3.8\n├─ into-stream@3.1.0\n├─ is-fullwidth-code-point@3.0.0\n├─ is-natural-number@4.0.1\n├─ is-object@1.0.2\n├─ is-retry-allowed@1.2.0\n├─ isarray@1.0.0\n├─ json-buffer@3.0.0\n├─ keyv@3.0.0\n├─ lru-cache@4.1.5\n├─ merge-stream@2.0.0\n├─ mime-db@1.52.0\n├─ mimic-fn@2.1.0\n├─ minimatch@3.1.2\n├─ minizlib@2.1.2\n├─ mkdirp@1.0.4\n├─ ms@2.1.2\n├─ nan@2.17.0\n├─ nice-try@1.0.5\n├─ node-fetch@2.6.7\n├─ nopt@5.0.0\n├─ normalize-url@2.0.1\n├─ npm-conf@1.1.3\n├─ npmlog@5.0.1\n├─ object-assign@4.1.1\n├─ once@1.4.0\n├─ onetime@5.1.2\n├─ os-filter-obj@2.0.0\n├─ p-cancelable@0.3.0\n├─ p-event@1.3.0\n├─ p-is-promise@1.1.0\n├─ p-map-series@1.0.0\n├─ p-reduce@1.0.0\n├─ path-is-absolute@1.0.1\n├─ path-key@2.0.1\n├─ pend@1.2.0\n├─ pinkie-promise@2.0.1\n├─ pinkie@2.0.4\n├─ process-nextick-args@2.0.1\n├─ proto-list@1.2.4\n├─ pseudomap@1.0.2\n├─ pump@3.0.0\n├─ query-string@5.1.1\n├─ readable-stream@2.3.7\n├─ responselike@1.0.2\n├─ rimraf@3.0.2\n├─ seek-bzip@1.0.6\n├─ semver-regex@2.0.0\n├─ semver-truncate@1.1.2\n├─ semver@5.7.1\n├─ set-blocking@2.0.0\n├─ shebang-regex@1.0.0\n├─ simple-concat@1.0.1\n├─ simple-get@3.1.1\n├─ sort-keys-length@1.0.1\n├─ sort-keys@1.1.2\n├─ strict-uri-encode@1.1.0\n├─ string_decoder@1.1.1\n├─ string-width@4.2.3\n├─ strip-dirs@2.1.0\n├─ strip-final-newline@2.0.0\n├─ strip-outer@1.0.1\n├─ tar-stream@1.6.2\n├─ tar@6.1.13\n├─ temp-dir@1.0.0\n├─ tempfile@2.0.0\n├─ through@2.3.8\n├─ timed-out@4.0.1\n├─ to-buffer@1.1.1\n├─ tr46@0.0.3\n├─ trim-repeated@1.0.0\n├─ tunnel-agent@0.6.0\n├─ unbzip2-stream@1.4.3\n├─ url-parse-lax@1.0.0\n├─ util-deprecate@1.0.2\n├─ uuid@3.4.0\n├─ webidl-conversions@3.0.1\n├─ whatwg-url@5.0.0\n├─ wide-align@1.1.5\n├─ xtend@4.0.2\n└─ yauzl@2.10.0\nDone in 9.66s.\nRemoving intermediate container 33b98d705f7d\n ---> f7345219783e\nStep 11/12 : COPY --from=builder /app/packages/action/dist/ /action-release/\n ---> 8c92ff1a7c3f\nStep 12/12 : CMD [\"node\", \"/action-release/index.js\"]\n ---> Running in 193cb7235579\nRemoving intermediate container 193cb7235579\n ---> e3dfdee5c997\nSuccessfully built e3dfdee5c997\nSuccessfully tagged snk:latest\n","stderr":"","imageSize":360143829},"repair":{"violations":[{"name":"rmRecursiveAfterMktempD","position":{"start":10,"end":10,"columnStart":32,"columnEnd":41}},{"name":"rmRecursiveAfterMktempD","position":{"start":24,"end":24,"columnStart":32,"columnEnd":41}}],"repairedDockerfile":"FROM node:16-slim as builder\n\nWORKDIR /app\n\nCOPY package.json yarn.lock ./\n\nCOPY tsconfig.json ./\n\nCOPY packages packages\n\nRUN export YARN_CACHE_FOLDER=\"$(mktemp -d)\" \\\n    && yarn install --frozen-lockfile \\\n    && rm -r \"$YARN_CACHE_FOLDER\"\n\nRUN yarn build:action\n\n\n\n\n\nFROM node:16-slim\n\nWORKDIR /action-release\n\nRUN export YARN_CACHE_FOLDER=\"$(mktemp -d)\" \\\n    && yarn add canvas@2.10.2 gifsicle@5.3.0 --no-lockfile \\\n    && rm -r \"$YARN_CACHE_FOLDER\"\n\nCOPY --from=builder /app/packages/action/dist/ /action-release/\n\nCMD [\"node\", \"/action-release/index.js\"]\n\n"},"repairedBuild":{"startTimestamp":1672136074286,"endTimestamp":1672136256826,"error":null,"stdout":"Sending build context to Docker daemon  1.608MB\r\r\nStep 1/12 : FROM node:16-slim as builder\n ---> 5fb222735b86\nStep 2/12 : WORKDIR /app\n ---> Running in dcace17704b3\nRemoving intermediate container dcace17704b3\n ---> 2d22a5768b55\nStep 3/12 : COPY package.json yarn.lock ./\n ---> 3ddf8c3e9d09\nStep 4/12 : COPY tsconfig.json ./\n ---> 16999c55f6b8\nStep 5/12 : COPY packages packages\n ---> f2ac5d7309e3\nStep 6/12 : RUN export YARN_CACHE_FOLDER=\"$(mktemp -d)\"     && yarn install --frozen-lockfile     && rm -r \"$YARN_CACHE_FOLDER\"\n ---> Running in 919404fdb014\nyarn install v1.22.19\n[1/4] Resolving packages...\n[2/4] Fetching packages...\n[3/4] Linking dependencies...\n[4/4] Building fresh packages...\nDone in 40.80s.\nRemoving intermediate container 919404fdb014\n ---> 10f20aeaffc3\nStep 7/12 : RUN yarn build:action\n ---> Running in 77e943018c56\nyarn run v1.22.19\n$ ( cd packages/action ; yarn build )\n\u001b[91mwarning package.json: No license field\n\u001b[0m$ ncc build --external canvas --external gifsicle --out dist ./index.ts\nncc: Version 0.34.0\nncc: Compiling file index.js into CJS\nncc: Using typescript@4.8.4 (local user-provided)\n  8kB  dist/142.index.js\n 10kB  dist/340.index.js\n 28kB  dist/317.index.js\n102kB  dist/index.js\n146kB  dist/371.index.js\n351kB  dist/197.index.js\n645kB  [5407ms] - ncc 0.34.0\nDone in 5.84s.\nRemoving intermediate container 77e943018c56\n ---> 20dca325d764\nStep 8/12 : FROM node:16-slim\n ---> 5fb222735b86\nStep 9/12 : WORKDIR /action-release\n ---> Running in ba9fad9efef9\nRemoving intermediate container ba9fad9efef9\n ---> c1d8a58c24b7\nStep 10/12 : RUN export YARN_CACHE_FOLDER=\"$(mktemp -d)\"     && yarn add canvas@2.10.2 gifsicle@5.3.0 --no-lockfile     && rm -r \"$YARN_CACHE_FOLDER\"\n ---> Running in 5e7bb4d34107\nyarn add v1.22.19\ninfo No lockfile found.\n[1/4] Resolving packages...\n\u001b[91mwarning gifsicle > bin-build > tempfile > uuid@3.4.0: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.\n\u001b[0m[2/4] Fetching packages...\n[3/4] Linking dependencies...\n[4/4] Building fresh packages...\nsuccess Saved 153 new dependencies.\ninfo Direct dependencies\n├─ canvas@2.10.2\n└─ gifsicle@5.3.0\ninfo All dependencies\n├─ @mapbox/node-pre-gyp@1.0.10\n├─ @sindresorhus/is@0.7.0\n├─ abbrev@1.1.1\n├─ agent-base@6.0.2\n├─ ansi-regex@5.0.1\n├─ aproba@2.0.0\n├─ arch@2.2.0\n├─ archive-type@4.0.0\n├─ are-we-there-yet@2.0.0\n├─ balanced-match@1.0.2\n├─ base64-js@1.5.1\n├─ bin-build@3.0.0\n├─ bin-check@4.1.0\n├─ bin-version-check@4.0.0\n├─ bin-version@3.1.0\n├─ bin-wrapper@4.1.0\n├─ bl@1.2.3\n├─ brace-expansion@1.1.11\n├─ buffer-alloc-unsafe@1.1.0\n├─ buffer-alloc@1.2.0\n├─ buffer-crc32@0.2.13\n├─ buffer-fill@1.0.0\n├─ buffer@5.7.1\n├─ cacheable-request@2.1.4\n├─ canvas@2.10.2\n├─ caw@2.0.1\n├─ chownr@2.0.0\n├─ clone-response@1.0.2\n├─ color-support@1.1.3\n├─ commander@2.20.3\n├─ concat-map@0.0.1\n├─ config-chain@1.1.13\n├─ console-control-strings@1.1.0\n├─ core-util-is@1.0.3\n├─ cross-spawn@5.1.0\n├─ decode-uri-component@0.2.2\n├─ decompress-response@3.3.0\n├─ decompress-tar@4.1.1\n├─ decompress-tarbz2@4.1.1\n├─ decompress-targz@4.1.1\n├─ decompress-unzip@4.0.1\n├─ delegates@1.0.0\n├─ detect-libc@2.0.1\n├─ download@6.2.5\n├─ emoji-regex@8.0.0\n├─ end-of-stream@1.4.4\n├─ executable@4.1.1\n├─ ext-list@2.2.2\n├─ fd-slicer@1.1.0\n├─ filename-reserved-regex@2.0.0\n├─ find-versions@3.2.0\n├─ from2@2.3.0\n├─ fs-constants@1.0.0\n├─ fs-minipass@2.1.0\n├─ fs.realpath@1.0.0\n├─ gauge@3.0.2\n├─ get-proxy@2.1.0\n├─ get-stream@3.0.0\n├─ gifsicle@5.3.0\n├─ glob@7.2.3\n├─ got@7.1.0\n├─ graceful-fs@4.2.10\n├─ has-symbol-support-x@1.4.2\n├─ has-to-string-tag-x@1.4.1\n├─ has-unicode@2.0.1\n├─ http-cache-semantics@3.8.1\n├─ https-proxy-agent@5.0.1\n├─ human-signals@2.1.0\n├─ ieee754@1.2.1\n├─ import-lazy@3.1.0\n├─ inflight@1.0.6\n├─ inherits@2.0.4\n├─ ini@1.3.8\n├─ into-stream@3.1.0\n├─ is-fullwidth-code-point@3.0.0\n├─ is-natural-number@4.0.1\n├─ is-object@1.0.2\n├─ is-retry-allowed@1.2.0\n├─ isarray@1.0.0\n├─ json-buffer@3.0.0\n├─ keyv@3.0.0\n├─ lru-cache@4.1.5\n├─ merge-stream@2.0.0\n├─ mime-db@1.52.0\n├─ mimic-fn@2.1.0\n├─ minimatch@3.1.2\n├─ minizlib@2.1.2\n├─ mkdirp@1.0.4\n├─ ms@2.1.2\n├─ nan@2.17.0\n├─ nice-try@1.0.5\n├─ node-fetch@2.6.7\n├─ nopt@5.0.0\n├─ normalize-url@2.0.1\n├─ npm-conf@1.1.3\n├─ npmlog@5.0.1\n├─ object-assign@4.1.1\n├─ once@1.4.0\n├─ onetime@5.1.2\n├─ os-filter-obj@2.0.0\n├─ p-cancelable@0.3.0\n├─ p-event@1.3.0\n├─ p-is-promise@1.1.0\n├─ p-map-series@1.0.0\n├─ p-reduce@1.0.0\n├─ path-is-absolute@1.0.1\n├─ path-key@2.0.1\n├─ pend@1.2.0\n├─ pinkie-promise@2.0.1\n├─ pinkie@2.0.4\n├─ process-nextick-args@2.0.1\n├─ proto-list@1.2.4\n├─ pseudomap@1.0.2\n├─ pump@3.0.0\n├─ query-string@5.1.1\n├─ readable-stream@2.3.7\n├─ responselike@1.0.2\n├─ rimraf@3.0.2\n├─ seek-bzip@1.0.6\n├─ semver-regex@2.0.0\n├─ semver-truncate@1.1.2\n├─ semver@5.7.1\n├─ set-blocking@2.0.0\n├─ shebang-regex@1.0.0\n├─ simple-concat@1.0.1\n├─ simple-get@3.1.1\n├─ sort-keys-length@1.0.1\n├─ sort-keys@1.1.2\n├─ strict-uri-encode@1.1.0\n├─ string_decoder@1.1.1\n├─ string-width@4.2.3\n├─ strip-dirs@2.1.0\n├─ strip-final-newline@2.0.0\n├─ strip-outer@1.0.1\n├─ tar-stream@1.6.2\n├─ tar@6.1.13\n├─ temp-dir@1.0.0\n├─ tempfile@2.0.0\n├─ through@2.3.8\n├─ timed-out@4.0.1\n├─ to-buffer@1.1.1\n├─ tr46@0.0.3\n├─ trim-repeated@1.0.0\n├─ tunnel-agent@0.6.0\n├─ unbzip2-stream@1.4.3\n├─ url-parse-lax@1.0.0\n├─ util-deprecate@1.0.2\n├─ uuid@3.4.0\n├─ webidl-conversions@3.0.1\n├─ whatwg-url@5.0.0\n├─ wide-align@1.1.5\n├─ xtend@4.0.2\n└─ yauzl@2.10.0\nDone in 6.89s.\nRemoving intermediate container 5e7bb4d34107\n ---> a5255f9a1b24\nStep 11/12 : COPY --from=builder /app/packages/action/dist/ /action-release/\n ---> 7140d4a10d50\nStep 12/12 : CMD [\"node\", \"/action-release/index.js\"]\n ---> Running in dfa042d471c7\nRemoving intermediate container dfa042d471c7\n ---> fa56a8f01726\nSuccessfully built fa56a8f01726\nSuccessfully tagged snk:latest\n","stderr":"","imageSize":360143786},"endTime":1672136257253}