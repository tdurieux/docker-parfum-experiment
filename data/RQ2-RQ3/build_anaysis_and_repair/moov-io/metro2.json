{"repository":"https://github.com/moov-io/metro2","dockerfilePath":"Dockerfile","startTime":1673008419369,"endTime":1673008883553,"clone":{"startTime":1673008419370,"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/moov-io/metro2'...\n","error":null,"endTime":1673008420239,"commit":"a3406cdb2b959da71fc426f4568f974a18078edf"},"originalBuild":{"startTime":1673008420323,"endTime":1673008683029,"error":null,"stdout":"Sending build context to Docker daemon  1.613MB\r\r\nStep 1/17 : FROM golang:1.19-alpine as builder\n1.19-alpine: Pulling from library/golang\nc158987b0551: Already exists\n019cfb932eb0: Pulling fs layer\na3a161a37303: Pulling fs layer\n3c6f08178a17: Pulling fs layer\n3c6f08178a17: Verifying Checksum\n3c6f08178a17: Download complete\n019cfb932eb0: Verifying Checksum\n019cfb932eb0: Download complete\n019cfb932eb0: Pull complete\na3a161a37303: Verifying Checksum\na3a161a37303: Download complete\na3a161a37303: Pull complete\n3c6f08178a17: Pull complete\nDigest: sha256:a9b24b67dc83b3383d22a14941c2b2b2ca6a103d805cac6820fd1355943beaf1\nStatus: Downloaded newer image for golang:1.19-alpine\n ---> cae57157ceaa\nStep 2/17 : WORKDIR /go/src/github.com/moov-io/metro2\n ---> Running in 158d0adf04d8\nRemoving intermediate container 158d0adf04d8\n ---> bfad470ddf02\nStep 3/17 : RUN apk add -U git make\n ---> Running in e05667d953dd\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/7) Installing brotli-libs (1.0.9-r9)\n(2/7) Installing nghttp2-libs (1.51.0-r0)\n(3/7) Installing libcurl (7.87.0-r0)\n(4/7) Installing libexpat (2.5.0-r0)\n(5/7) Installing pcre2 (10.42-r0)\n(6/7) Installing git (2.38.2-r0)\n(7/7) Installing make (4.3-r1)\nExecuting busybox-1.35.0-r29.trigger\nOK: 16 MiB in 23 packages\nRemoving intermediate container e05667d953dd\n ---> 84aa0adfca5d\nStep 4/17 : RUN adduser -D -g '' --shell /bin/false moov\n ---> Running in 4d481e1abd81\nRemoving intermediate container 4d481e1abd81\n ---> 52659ec9ebdc\nStep 5/17 : COPY . .\n ---> ac17317161ec\nStep 6/17 : RUN go mod download\n ---> Running in e9575ab461bd\nRemoving intermediate container e9575ab461bd\n ---> 87c6726cfbf0\nStep 7/17 : RUN make build\n ---> Running in 332d52b425d0\ngo fmt ./...\nCGO_ENABLED=0 go build -o ./bin/metro2 github.com/moov-io/metro2/cmd/metro2\nRemoving intermediate container 332d52b425d0\n ---> a82e48c2c07a\nStep 8/17 : USER moov\n ---> Running in 446e877a454d\nRemoving intermediate container 446e877a454d\n ---> eddff2502cd3\nStep 9/17 : FROM scratch\n ---> \nStep 10/17 : LABEL maintainer=\"Moov <oss@moov.io>\"\n ---> Running in 2c86599c501d\nRemoving intermediate container 2c86599c501d\n ---> 193e26188649\nStep 11/17 : COPY --from=builder /etc/ssl/certs/ca-certificates.crt /etc/ssl/certs/ca-certificates.crt\n ---> 88903fa32a48\nStep 12/17 : COPY --from=builder /go/src/github.com/moov-io/metro2/bin/metro2 /bin/metro2\n ---> fe22d31deef3\nStep 13/17 : COPY --from=builder /etc/passwd /etc/passwd\n ---> fa49c7885496\nStep 14/17 : USER moov\n ---> Running in 10bc8c4b2c05\nRemoving intermediate container 10bc8c4b2c05\n ---> 20fdcd1878b2\nStep 15/17 : EXPOSE 8080\n ---> Running in e995410bbf7e\nRemoving intermediate container e995410bbf7e\n ---> f42b2c693658\nStep 16/17 : ENTRYPOINT [\"/bin/metro2\"]\n ---> Running in 47d875afd6ec\nRemoving intermediate container 47d875afd6ec\n ---> cdbda95d52ac\nStep 17/17 : CMD [\"web\"]\n ---> Running in c406d0b777f1\nRemoving intermediate container c406d0b777f1\n ---> 6dc7adc54975\nSuccessfully built 6dc7adc54975\nSuccessfully tagged metro2:latest\n","stderr":"","imageSize":10505775},"repair":{"startTime":1673008683114,"endTime":1673008683156,"violations":[{"name":"apkAddUseNoCache","position":{"start":2,"end":2,"columnStart":4,"columnEnd":23}}],"repairedDockerfile":"FROM golang:1.19-alpine as builder\nWORKDIR /go/src/github.com/moov-io/metro2\nRUN apk add --no-cache -U git make\nRUN adduser -D -g '' --shell /bin/false moov\nCOPY . .\nRUN go mod download\nRUN make build\nUSER moov\n\nFROM scratch\nLABEL maintainer=\"Moov <oss@moov.io>\"\n\nCOPY --from=builder /etc/ssl/certs/ca-certificates.crt /etc/ssl/certs/ca-certificates.crt\nCOPY --from=builder /go/src/github.com/moov-io/metro2/bin/metro2 /bin/metro2\nCOPY --from=builder /etc/passwd /etc/passwd\n\nUSER moov\nEXPOSE 8080\nENTRYPOINT [\"/bin/metro2\"]\nCMD [\"web\"]\n"},"repairedBuild":{"startTime":1673008683366,"endTime":1673008882115,"error":null,"stdout":"Sending build context to Docker daemon  1.613MB\r\r\nStep 1/17 : FROM golang:1.19-alpine as builder\n ---> cae57157ceaa\nStep 2/17 : WORKDIR /go/src/github.com/moov-io/metro2\n ---> Running in 8c8de53ed839\nRemoving intermediate container 8c8de53ed839\n ---> f59efa77f972\nStep 3/17 : RUN apk add --no-cache -U git make\n ---> Running in a09696a2792d\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/7) Installing brotli-libs (1.0.9-r9)\n(2/7) Installing nghttp2-libs (1.51.0-r0)\n(3/7) Installing libcurl (7.87.0-r0)\n(4/7) Installing libexpat (2.5.0-r0)\n(5/7) Installing pcre2 (10.42-r0)\n(6/7) Installing git (2.38.2-r0)\n(7/7) Installing make (4.3-r1)\nExecuting busybox-1.35.0-r29.trigger\nOK: 16 MiB in 23 packages\nRemoving intermediate container a09696a2792d\n ---> 5499d0601e53\nStep 4/17 : RUN adduser -D -g '' --shell /bin/false moov\n ---> Running in 8df7fd7479d0\nRemoving intermediate container 8df7fd7479d0\n ---> 98d0c28d4879\nStep 5/17 : COPY . .\n ---> 36f20084a5a9\nStep 6/17 : RUN go mod download\n ---> Running in e1998390174e\nRemoving intermediate container e1998390174e\n ---> 335a0f88789a\nStep 7/17 : RUN make build\n ---> Running in 5ca557f7c761\ngo fmt ./...\nCGO_ENABLED=0 go build -o ./bin/metro2 github.com/moov-io/metro2/cmd/metro2\nRemoving intermediate container 5ca557f7c761\n ---> 21befeee8660\nStep 8/17 : USER moov\n ---> Running in 0b845f6c71fc\nRemoving intermediate container 0b845f6c71fc\n ---> 4e6ec754ce78\nStep 9/17 : FROM scratch\n ---> \nStep 10/17 : LABEL maintainer=\"Moov <oss@moov.io>\"\n ---> Running in 12b828b3e98c\nRemoving intermediate container 12b828b3e98c\n ---> 7517874fac21\nStep 11/17 : COPY --from=builder /etc/ssl/certs/ca-certificates.crt /etc/ssl/certs/ca-certificates.crt\n ---> 77c9aca8c42e\nStep 12/17 : COPY --from=builder /go/src/github.com/moov-io/metro2/bin/metro2 /bin/metro2\n ---> 6b41b9c53cc8\nStep 13/17 : COPY --from=builder /etc/passwd /etc/passwd\n ---> 62590deffffa\nStep 14/17 : USER moov\n ---> Running in 1de89117e890\nRemoving intermediate container 1de89117e890\n ---> cc839f993299\nStep 15/17 : EXPOSE 8080\n ---> Running in 4e1fcb7d24a7\nRemoving intermediate container 4e1fcb7d24a7\n ---> c4c17110131c\nStep 16/17 : ENTRYPOINT [\"/bin/metro2\"]\n ---> Running in 94e8386f9f30\nRemoving intermediate container 94e8386f9f30\n ---> 291b68753353\nStep 17/17 : CMD [\"web\"]\n ---> Running in 16729545bc2c\nRemoving intermediate container 16729545bc2c\n ---> 168f3db1745c\nSuccessfully built 168f3db1745c\nSuccessfully tagged metro2:latest\n","stderr":"","imageSize":10505775}}