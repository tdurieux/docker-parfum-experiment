{"repository":"https://github.com/webp-sh/webp_server_go","dockerfilePath":"Dockerfile","startTime":1672976880058,"endTime":1672977091777,"clone":{"startTime":1672976880058,"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/webp-sh/webp_server_go'...\n","error":null,"endTime":1672976881477,"commit":"26c0ec2ce9a67bccf1d820c4f1ef3f1fc7e49c54"},"originalBuild":{"startTime":1672976881546,"endTime":1672977001687,"error":null,"stdout":"Sending build context to Docker daemon  69.63kB\r\r\nStep 1/18 : FROM golang:1.19.4-alpine as builder\n1.19.4-alpine: Pulling from library/golang\nDigest: sha256:a9b24b67dc83b3383d22a14941c2b2b2ca6a103d805cac6820fd1355943beaf1\nStatus: Downloaded newer image for golang:1.19.4-alpine\n ---> cae57157ceaa\nStep 2/18 : ARG IMG_PATH=/opt/pics\n ---> Running in 9041b6b56ab2\nRemoving intermediate container 9041b6b56ab2\n ---> bfa6eafb1b99\nStep 3/18 : ARG EXHAUST_PATH=/opt/exhaust\n ---> Running in 967b6d4e87db\nRemoving intermediate container 967b6d4e87db\n ---> e657cb3c7145\nStep 4/18 : RUN apk update && apk add alpine-sdk aom-dev && mkdir /build\n ---> Running in 4cf952c3b907\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\nv3.17.0-332-g13963e2526 [https://dl-cdn.alpinelinux.org/alpine/v3.17/main]\nv3.17.0-334-g83a039d241 [https://dl-cdn.alpinelinux.org/alpine/v3.17/community]\nOK: 17816 distinct packages available\n(1/39) Installing fakeroot (1.29-r0)\n(2/39) Installing openssl (3.0.7-r2)\n(3/39) Installing libattr (2.5.1-r2)\n(4/39) Installing attr (2.5.1-r2)\n(5/39) Installing libacl (2.3.1-r1)\n(6/39) Installing tar (1.34-r1)\n(7/39) Installing pkgconf (1.9.3-r0)\n(8/39) Installing patch (2.7.6-r8)\n(9/39) Installing libgcc (12.2.1_git20220924-r4)\n(10/39) Installing libstdc++ (12.2.1_git20220924-r4)\n(11/39) Installing lzip (1.23-r0)\n(12/39) Installing brotli-libs (1.0.9-r9)\n(13/39) Installing nghttp2-libs (1.51.0-r0)\n(14/39) Installing libcurl (7.87.0-r0)\n(15/39) Installing curl (7.87.0-r0)\n(16/39) Installing abuild (3.10.0-r0)\nExecuting abuild-3.10.0-r0.pre-install\n(17/39) Installing binutils (2.39-r2)\n(18/39) Installing libmagic (5.43-r0)\n(19/39) Installing file (5.43-r0)\n(20/39) Installing libgomp (12.2.1_git20220924-r4)\n(21/39) Installing libatomic (12.2.1_git20220924-r4)\n(22/39) Installing gmp (6.2.1-r2)\n(23/39) Installing isl25 (0.25-r0)\n(24/39) Installing mpfr4 (4.1.0-r0)\n(25/39) Installing mpc1 (1.2.1-r1)\n(26/39) Installing gcc (12.2.1_git20220924-r4)\n(27/39) Installing libstdc++-dev (12.2.1_git20220924-r4)\n(28/39) Installing musl-dev (1.2.3-r4)\n(29/39) Installing libc-dev (0.7.2-r3)\n(30/39) Installing g++ (12.2.1_git20220924-r4)\n(31/39) Installing make (4.3-r1)\n(32/39) Installing fortify-headers (1.1-r1)\n(33/39) Installing build-base (0.5-r3)\n(34/39) Installing libexpat (2.5.0-r0)\n(35/39) Installing pcre2 (10.42-r0)\n(36/39) Installing git (2.38.2-r0)\n(37/39) Installing alpine-sdk (1.0-r1)\n(38/39) Installing aom-libs (3.5.0-r0)\n(39/39) Installing aom-dev (3.5.0-r0)\nExecuting busybox-1.35.0-r29.trigger\nOK: 273 MiB in 55 packages\nRemoving intermediate container 4cf952c3b907\n ---> 5b2e0a3b10cb\nStep 5/18 : COPY go.mod /build\n ---> 470356299f66\nStep 6/18 : RUN cd /build && go mod download\n ---> Running in 58f7f906baa6\nRemoving intermediate container 58f7f906baa6\n ---> dde808cc2aa0\nStep 7/18 : COPY . /build\n ---> 7ff20ca0a0f3\nStep 8/18 : RUN cd /build && sed -i \"s|.\\/pics|${IMG_PATH}|g\" config.json      && sed -i \"s|\\\"\\\"|\\\"${EXHAUST_PATH}\\\"|g\" config.json      && sed -i 's/127.0.0.1/0.0.0.0/g' config.json      && go build -ldflags=\"-s -w\" -o webp-server .\n ---> Running in 8620b0ccb9da\nRemoving intermediate container 8620b0ccb9da\n ---> fd70bca032c6\nStep 9/18 : FROM alpine\n ---> 49176f190c7e\nStep 10/18 : COPY --from=builder /build/webp-server  /usr/bin/webp-server\n ---> c70f24faa662\nStep 11/18 : COPY --from=builder /build/config.json /etc/config.json\n ---> e076253a86d0\nStep 12/18 : COPY --from=builder /usr/lib/libaom.a /usr/lib/libaom.a\n ---> 5fba16c0efc7\nStep 13/18 : COPY --from=builder /usr/lib/libaom.so /usr/lib/libaom.so\n ---> 406bcc13fd99\nStep 14/18 : COPY --from=builder /usr/lib/libaom.so.3 /usr/lib/libaom.so.3\n ---> 6cd74add4401\nStep 15/18 : COPY --from=builder /usr/lib/libaom.so.3.5.0 /usr/lib/libaom.so.3.5.0\n ---> f3d320821d92\nStep 16/18 : WORKDIR /opt\n ---> Running in fc78209059fa\nRemoving intermediate container fc78209059fa\n ---> 1c4ea0c6d291\nStep 17/18 : VOLUME /opt/exhaust\n ---> Running in 7e6953ebdcb1\nRemoving intermediate container 7e6953ebdcb1\n ---> f4fcb5815f17\nStep 18/18 : CMD [\"/usr/bin/webp-server\", \"--config\", \"/etc/config.json\"]\n ---> Running in 4f3be5d2ac80\nRemoving intermediate container 4f3be5d2ac80\n ---> ee22c938fdb5\nSuccessfully built ee22c938fdb5\nSuccessfully tagged webp_server_go:latest\n","stderr":"","imageSize":49402077},"repair":{"startTime":1672977001741,"endTime":1672977001822,"violations":[{"name":"apkAddUseNoCache","position":{"start":4,"end":4,"columnStart":18,"columnEnd":44}}],"repairedDockerfile":"FROM golang:1.19.4-alpine as builder\n\nARG IMG_PATH=/opt/pics\nARG EXHAUST_PATH=/opt/exhaust\nRUN apk update && apk add --no-cache alpine-sdk aom-dev && mkdir /build\nCOPY go.mod /build\nRUN cd /build && go mod download\n\nCOPY . /build\nRUN cd /build && sed -i \"s|.\\/pics|${IMG_PATH}|g\" config.json  \\\n    && sed -i \"s|\\\"\\\"|\\\"${EXHAUST_PATH}\\\"|g\" config.json  \\\n    && sed -i 's/127.0.0.1/0.0.0.0/g' config.json  \\\n    && go build -ldflags=\"-s -w\" -o webp-server .\n\nFROM alpine\n\nCOPY --from=builder /build/webp-server  /usr/bin/webp-server\nCOPY --from=builder /build/config.json /etc/config.json\n\nCOPY --from=builder /usr/lib/libaom.a /usr/lib/libaom.a\nCOPY --from=builder /usr/lib/libaom.so /usr/lib/libaom.so\nCOPY --from=builder /usr/lib/libaom.so.3 /usr/lib/libaom.so.3\nCOPY --from=builder /usr/lib/libaom.so.3.5.0 /usr/lib/libaom.so.3.5.0\n\n\nWORKDIR /opt\nVOLUME /opt/exhaust\nCMD [\"/usr/bin/webp-server\", \"--config\", \"/etc/config.json\"]\n"},"repairedBuild":{"startTime":1672977001989,"endTime":1672977091578,"error":null,"stdout":"Sending build context to Docker daemon  69.63kB\r\r\nStep 1/18 : FROM golang:1.19.4-alpine as builder\n ---> cae57157ceaa\nStep 2/18 : ARG IMG_PATH=/opt/pics\n ---> Running in 1032c44331a4\nRemoving intermediate container 1032c44331a4\n ---> d24cf2e2dc5a\nStep 3/18 : ARG EXHAUST_PATH=/opt/exhaust\n ---> Running in 369fb2c8d0e8\nRemoving intermediate container 369fb2c8d0e8\n ---> b2137ce31a82\nStep 4/18 : RUN apk update && apk add --no-cache alpine-sdk aom-dev && mkdir /build\n ---> Running in c3283c2c82b6\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\nv3.17.0-332-g13963e2526 [https://dl-cdn.alpinelinux.org/alpine/v3.17/main]\nv3.17.0-334-g83a039d241 [https://dl-cdn.alpinelinux.org/alpine/v3.17/community]\nOK: 17816 distinct packages available\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/39) Installing fakeroot (1.29-r0)\n(2/39) Installing openssl (3.0.7-r2)\n(3/39) Installing libattr (2.5.1-r2)\n(4/39) Installing attr (2.5.1-r2)\n(5/39) Installing libacl (2.3.1-r1)\n(6/39) Installing tar (1.34-r1)\n(7/39) Installing pkgconf (1.9.3-r0)\n(8/39) Installing patch (2.7.6-r8)\n(9/39) Installing libgcc (12.2.1_git20220924-r4)\n(10/39) Installing libstdc++ (12.2.1_git20220924-r4)\n(11/39) Installing lzip (1.23-r0)\n(12/39) Installing brotli-libs (1.0.9-r9)\n(13/39) Installing nghttp2-libs (1.51.0-r0)\n(14/39) Installing libcurl (7.87.0-r0)\n(15/39) Installing curl (7.87.0-r0)\n(16/39) Installing abuild (3.10.0-r0)\nExecuting abuild-3.10.0-r0.pre-install\n(17/39) Installing binutils (2.39-r2)\n(18/39) Installing libmagic (5.43-r0)\n(19/39) Installing file (5.43-r0)\n(20/39) Installing libgomp (12.2.1_git20220924-r4)\n(21/39) Installing libatomic (12.2.1_git20220924-r4)\n(22/39) Installing gmp (6.2.1-r2)\n(23/39) Installing isl25 (0.25-r0)\n(24/39) Installing mpfr4 (4.1.0-r0)\n(25/39) Installing mpc1 (1.2.1-r1)\n(26/39) Installing gcc (12.2.1_git20220924-r4)\n(27/39) Installing libstdc++-dev (12.2.1_git20220924-r4)\n(28/39) Installing musl-dev (1.2.3-r4)\n(29/39) Installing libc-dev (0.7.2-r3)\n(30/39) Installing g++ (12.2.1_git20220924-r4)\n(31/39) Installing make (4.3-r1)\n(32/39) Installing fortify-headers (1.1-r1)\n(33/39) Installing build-base (0.5-r3)\n(34/39) Installing libexpat (2.5.0-r0)\n(35/39) Installing pcre2 (10.42-r0)\n(36/39) Installing git (2.38.2-r0)\n(37/39) Installing alpine-sdk (1.0-r1)\n(38/39) Installing aom-libs (3.5.0-r0)\n(39/39) Installing aom-dev (3.5.0-r0)\nExecuting busybox-1.35.0-r29.trigger\nOK: 273 MiB in 55 packages\nRemoving intermediate container c3283c2c82b6\n ---> 87973b5247d0\nStep 5/18 : COPY go.mod /build\n ---> a08d244a339b\nStep 6/18 : RUN cd /build && go mod download\n ---> Running in 976a1466921a\nRemoving intermediate container 976a1466921a\n ---> af4bfec1ab61\nStep 7/18 : COPY . /build\n ---> ee4a5c4105b5\nStep 8/18 : RUN cd /build && sed -i \"s|.\\/pics|${IMG_PATH}|g\" config.json      && sed -i \"s|\\\"\\\"|\\\"${EXHAUST_PATH}\\\"|g\" config.json      && sed -i 's/127.0.0.1/0.0.0.0/g' config.json      && go build -ldflags=\"-s -w\" -o webp-server .\n ---> Running in ab7c8f323899\nRemoving intermediate container ab7c8f323899\n ---> 87b4ef1c6944\nStep 9/18 : FROM alpine\n ---> 49176f190c7e\nStep 10/18 : COPY --from=builder /build/webp-server  /usr/bin/webp-server\n ---> 9efdd74c57ce\nStep 11/18 : COPY --from=builder /build/config.json /etc/config.json\n ---> ee8a0273b68b\nStep 12/18 : COPY --from=builder /usr/lib/libaom.a /usr/lib/libaom.a\n ---> 474d37f45cf6\nStep 13/18 : COPY --from=builder /usr/lib/libaom.so /usr/lib/libaom.so\n ---> 84213b0f66a8\nStep 14/18 : COPY --from=builder /usr/lib/libaom.so.3 /usr/lib/libaom.so.3\n ---> 0c8157c5432c\nStep 15/18 : COPY --from=builder /usr/lib/libaom.so.3.5.0 /usr/lib/libaom.so.3.5.0\n ---> 5ff42e2c7de8\nStep 16/18 : WORKDIR /opt\n ---> Running in 3a0519e2b755\nRemoving intermediate container 3a0519e2b755\n ---> 521d1706a94c\nStep 17/18 : VOLUME /opt/exhaust\n ---> Running in 13d87a45feef\nRemoving intermediate container 13d87a45feef\n ---> 03553b54c184\nStep 18/18 : CMD [\"/usr/bin/webp-server\", \"--config\", \"/etc/config.json\"]\n ---> Running in 543450b9e51a\nRemoving intermediate container 543450b9e51a\n ---> f194db0ff90e\nSuccessfully built f194db0ff90e\nSuccessfully tagged webp_server_go:latest\n","stderr":"","imageSize":49402077}}