{"repository":"https://github.com/tobymao/18xx","dockerfilePath":"Dockerfile","startTime":1672231868775,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/tobymao/18xx'...\n","error":null,"commit":"984ef1709e0e3f59e78c8cf44ab608e0ff5aa502"},"originalBuild":{"startTimestamp":1672231871131,"endTimestamp":1672231912589,"error":null,"stdout":"Sending build context to Docker daemon  26.86MB\r\r\nStep 1/9 : FROM ruby:3.1\n3.1: Pulling from library/ruby\n32de3c850997: Already exists\nfa1d4c8d85a4: Already exists\nc796299bbbdd: Already exists\n81283a9569ad: Already exists\n60b38700e7fb: Already exists\n5fe064c92718: Pulling fs layer\nc0c46a76c6cf: Pulling fs layer\n229a5572cd22: Pulling fs layer\n229a5572cd22: Verifying Checksum\n229a5572cd22: Download complete\n5fe064c92718: Download complete\n5fe064c92718: Pull complete\nc0c46a76c6cf: Verifying Checksum\nc0c46a76c6cf: Download complete\nc0c46a76c6cf: Pull complete\n229a5572cd22: Pull complete\nDigest: sha256:db743d171b7146893cb8d75d5b72c8c2b02fc2521d8a0dd5f70ce105d758a004\nStatus: Downloaded newer image for ruby:3.1\n ---> 67f7a5de6fe6\nStep 2/9 : ARG RACK_ENV\n ---> Running in 9cdb1bf28357\nRemoving intermediate container 9cdb1bf28357\n ---> f9ff85f1041b\nStep 3/9 : RUN mkdir /18xx\n ---> Running in 810c43aa266a\nRemoving intermediate container 810c43aa266a\n ---> 5777e9f3ce72\nStep 4/9 : WORKDIR /18xx\n ---> Running in 88a2349fd4a6\nRemoving intermediate container 88a2349fd4a6\n ---> 9525184226c9\nStep 5/9 : RUN if [ \"$RACK_ENV\" = \"development\" ];     then       curl -s https://registry.npmjs.org/esbuild-linux-64/-/esbuild-linux-64-0.14.36.tgz | tar xz;       mv package/bin/esbuild /usr/local/bin && rm -rf package;     fi;\n ---> Running in 78cecd8d8167\nRemoving intermediate container 78cecd8d8167\n ---> dd0b1c7b09db\nStep 6/9 : COPY Gemfile Gemfile.lock ./\n ---> 55c6d774787d\nStep 7/9 : RUN if [ \"$RACK_ENV\" = \"production\" ];     then bundle config set without 'test development';     fi;     bundle install;\n ---> Running in 60c595b063cd\nBundler 2.3.26 is running, but your lockfile was generated with 2.3.7. Installing Bundler 2.3.7 and restarting using that version.\nFetching gem metadata from https://rubygems.org/.\nFetching bundler 2.3.7\nInstalling bundler 2.3.7\nFetching gem metadata from https://rubygems.org/...........\nUsing rake 13.0.6\nUsing bundler 2.3.7\nFetching concurrent-ruby 1.1.10\nFetching kgio 2.11.4\nFetching rack 2.2.3.1\nFetching method_source 1.0.0\nFetching newrelic_rpm 8.6.0\nFetching rainbow 3.1.1\nFetching unicode-display_width 2.1.0\nFetching stackprof 0.2.19\nFetching ffi 1.15.5\nFetching diff-lcs 1.5.0\nFetching raabro 1.4.0\nFetching libv8-node 16.10.0.0 (x86_64-linux)\nFetching parallel 1.22.1\nFetching redis 4.6.0\nFetching regexp_parser 2.3.0\nUsing rexml 3.2.5\nFetching rspec-support 3.11.0\nFetching ast 2.4.2\nFetching byebug 11.1.3\nFetching coderay 1.1.3\nFetching rb-fsevent 0.11.1\nFetching pg 1.3.5\nFetching raindrops 0.20.0\nFetching require_all 3.0.0\nFetching ruby-progressbar 1.11.0\nFetching sequel 5.55.0\nInstalling unicode-display_width 2.1.0\nInstalling method_source 1.0.0\nInstalling rainbow 3.1.1\nInstalling raabro 1.4.0\nInstalling parallel 1.22.1\nInstalling require_all 3.0.0\nInstalling ast 2.4.2\nInstalling ruby-progressbar 1.11.0\nInstalling rspec-support 3.11.0\nInstalling kgio 2.11.4 with native extensions\nInstalling diff-lcs 1.5.0\nInstalling stackprof 0.2.19 with native extensions\nInstalling redis 4.6.0\nInstalling rb-fsevent 0.11.1\nInstalling byebug 11.1.3 with native extensions\nInstalling regexp_parser 2.3.0\nInstalling raindrops 0.20.0 with native extensions\nInstalling coderay 1.1.3\nInstalling rack 2.2.3.1\nFetching parallel_tests 3.8.1\nFetching parser 3.1.2.0\nInstalling pg 1.3.5 with native extensions\nInstalling parallel_tests 3.8.1\nInstalling newrelic_rpm 8.6.0\nInstalling concurrent-ruby 1.1.10\nFetching rspec-core 3.11.0\nInstalling rspec-core 3.11.0\nFetching rspec-mocks 3.11.1\nFetching rspec-expectations 3.11.0\nInstalling sequel 5.55.0\nInstalling rspec-expectations 3.11.0\nInstalling rspec-mocks 3.11.1\nInstalling ffi 1.15.5 with native extensions\nInstalling parser 3.1.2.0\nFetching pry 0.13.1\nFetching message_bus 4.2.0\nFetching roda 3.55.0\nInstalling pry 0.13.1\nInstalling message_bus 4.2.0\nInstalling roda 3.55.0\nFetching rspec 3.11.0\nInstalling rspec 3.11.0\nFetching tzinfo 2.0.5\nInstalling tzinfo 2.0.5\nFetching et-orbi 1.2.7\nFetching opal 1.5.0\nFetching rubocop-ast 1.17.0\nInstalling et-orbi 1.2.7\nInstalling rubocop-ast 1.17.0\nFetching fugit 1.5.3\nInstalling fugit 1.5.3\nFetching rufus-scheduler 3.8.2\nInstalling rufus-scheduler 3.8.2\nFetching rubocop 1.27.0\nFetching pry-byebug 3.9.0\nInstalling pry-byebug 3.9.0\nInstalling rubocop 1.27.0\nInstalling opal 1.5.0\nFetching sequel-annotate 1.7.0\nFetching sequel-pg_advisory_lock 0.1.2\nInstalling sequel-pg_advisory_lock 0.1.2\nInstalling sequel-annotate 1.7.0\nFetching rubocop-performance 1.13.3\nInstalling rubocop-performance 1.13.3\nFetching snabberb 1.5.4\nInstalling snabberb 1.5.4\nInstalling libv8-node 16.10.0.0 (x86_64-linux)\nFetching mini_racer 0.6.2\nInstalling mini_racer 0.6.2 with native extensions\nFetching unicorn 6.1.0\nInstalling unicorn 6.1.0 with native extensions\nFetching sequel_pg 1.15.0\nInstalling sequel_pg 1.15.0 with native extensions\nFetching ffi-compiler 1.0.1\nFetching get_process_mem 0.2.7\nFetching rb-inotify 0.10.1\nInstalling get_process_mem 0.2.7\nInstalling rb-inotify 0.10.1\nInstalling ffi-compiler 1.0.1\nFetching argon2 2.1.1\nFetching listen 3.7.1\nInstalling listen 3.7.1\nFetching rerun 0.13.1\nInstalling rerun 0.13.1\nInstalling argon2 2.1.1 with native extensions\nFetching unicorn-worker-killer 0.4.5\nInstalling unicorn-worker-killer 0.4.5\nBundle complete! 24 Gemfile dependencies, 59 gems now installed.\nUse `bundle info [gemname]` to see where a bundled gem is installed.\nRemoving intermediate container 60c595b063cd\n ---> c7be38ca0ea4\nStep 8/9 : COPY . .\n ---> 0c07625c2ce2\nStep 9/9 : CMD bundle exec rake dev_up &&     bundle exec rerun --background -i 'build/*' -i 'public/*' 'unicorn -c config/unicorn.rb'\n ---> Running in 6481598febe4\nRemoving intermediate container 6481598febe4\n ---> 9ff5f1805d26\nSuccessfully built 9ff5f1805d26\nSuccessfully tagged 18xx:latest\n","stderr":"","imageSize":1399371703},"repair":{"violations":[{"name":"curlUseFlagF","position":{"start":8,"end":8,"columnStart":6,"columnEnd":88}}],"repairedDockerfile":"FROM ruby:3.1\n\nARG RACK_ENV\nRUN mkdir /18xx\nWORKDIR /18xx\n\nRUN if [ \"$RACK_ENV\" = \"development\" ]; \\\n    then \\\n      curl -f -s https://registry.npmjs.org/esbuild-linux-64/-/esbuild-linux-64-0.14.36.tgz | tar xz; \\\n      mv package/bin/esbuild /usr/local/bin && rm -rf package; \\\n    fi;\n\nCOPY Gemfile Gemfile.lock ./\nRUN if [ \"$RACK_ENV\" = \"production\" ]; \\\n    then bundle config set without 'test development'; \\\n    fi; \\\n    bundle install;\nCOPY . .\n\nCMD bundle exec rake dev_up && \\\n    bundle exec rerun --background -i 'build/*' -i 'public/*' 'unicorn -c config/unicorn.rb'\n"},"repairedBuild":{"startTimestamp":1672231913040,"endTimestamp":1672231953944,"error":null,"stdout":"Sending build context to Docker daemon  26.86MB\r\r\nStep 1/9 : FROM ruby:3.1\n ---> 67f7a5de6fe6\nStep 2/9 : ARG RACK_ENV\n ---> Running in ca9467769881\nRemoving intermediate container ca9467769881\n ---> f07dc8298054\nStep 3/9 : RUN mkdir /18xx\n ---> Running in 86ee4f25ac66\nRemoving intermediate container 86ee4f25ac66\n ---> 35fe3343bdd3\nStep 4/9 : WORKDIR /18xx\n ---> Running in c23c96227444\nRemoving intermediate container c23c96227444\n ---> 07e00b040120\nStep 5/9 : RUN if [ \"$RACK_ENV\" = \"development\" ];     then       curl -f -s https://registry.npmjs.org/esbuild-linux-64/-/esbuild-linux-64-0.14.36.tgz | tar xz;       mv package/bin/esbuild /usr/local/bin && rm -rf package;     fi;\n ---> Running in 8cb5da9f2c12\nRemoving intermediate container 8cb5da9f2c12\n ---> 4165c70cd91e\nStep 6/9 : COPY Gemfile Gemfile.lock ./\n ---> a5696c9f45f2\nStep 7/9 : RUN if [ \"$RACK_ENV\" = \"production\" ];     then bundle config set without 'test development';     fi;     bundle install;\n ---> Running in 7ab9d692e951\nBundler 2.3.26 is running, but your lockfile was generated with 2.3.7. Installing Bundler 2.3.7 and restarting using that version.\nFetching gem metadata from https://rubygems.org/.\nFetching bundler 2.3.7\nInstalling bundler 2.3.7\nFetching gem metadata from https://rubygems.org/...........\nUsing rake 13.0.6\nFetching ffi 1.15.5\nUsing bundler 2.3.7\nFetching coderay 1.1.3\nFetching concurrent-ruby 1.1.10\nFetching rb-fsevent 0.11.1\nFetching pg 1.3.5\nFetching redis 4.6.0\nFetching rspec-support 3.11.0\nFetching sequel 5.55.0\nFetching stackprof 0.2.19\nFetching kgio 2.11.4\nFetching libv8-node 16.10.0.0 (x86_64-linux)\nFetching rack 2.2.3.1\nFetching newrelic_rpm 8.6.0\nFetching regexp_parser 2.3.0\nUsing rexml 3.2.5\nFetching unicode-display_width 2.1.0\nFetching ast 2.4.2\nFetching byebug 11.1.3\nFetching diff-lcs 1.5.0\nFetching raabro 1.4.0\nFetching method_source 1.0.0\nFetching parallel 1.22.1\nFetching rainbow 3.1.1\nFetching raindrops 0.20.0\nFetching require_all 3.0.0\nFetching ruby-progressbar 1.11.0\nInstalling method_source 1.0.0\nInstalling unicode-display_width 2.1.0\nInstalling ast 2.4.2\nInstalling parallel 1.22.1\nInstalling raabro 1.4.0\nInstalling rainbow 3.1.1\nInstalling require_all 3.0.0\nInstalling rspec-support 3.11.0\nInstalling ruby-progressbar 1.11.0\nInstalling kgio 2.11.4 with native extensions\nInstalling rb-fsevent 0.11.1\nInstalling stackprof 0.2.19 with native extensions\nInstalling redis 4.6.0\nInstalling diff-lcs 1.5.0\nInstalling regexp_parser 2.3.0\nInstalling raindrops 0.20.0 with native extensions\nInstalling byebug 11.1.3 with native extensions\nInstalling coderay 1.1.3\nInstalling rack 2.2.3.1\nFetching parallel_tests 3.8.1\nFetching parser 3.1.2.0\nInstalling pg 1.3.5 with native extensions\nInstalling parallel_tests 3.8.1\nInstalling concurrent-ruby 1.1.10\nInstalling newrelic_rpm 8.6.0\nFetching rspec-core 3.11.0\nFetching rspec-expectations 3.11.0\nFetching rspec-mocks 3.11.1\nInstalling rspec-core 3.11.0\nInstalling sequel 5.55.0\nInstalling rspec-mocks 3.11.1\nInstalling rspec-expectations 3.11.0\nInstalling ffi 1.15.5 with native extensions\nInstalling parser 3.1.2.0\nFetching pry 0.13.1\nInstalling pry 0.13.1\nFetching message_bus 4.2.0\nFetching roda 3.55.0\nInstalling roda 3.55.0\nInstalling message_bus 4.2.0\nFetching rspec 3.11.0\nInstalling rspec 3.11.0\nFetching tzinfo 2.0.5\nInstalling tzinfo 2.0.5\nFetching et-orbi 1.2.7\nFetching opal 1.5.0\nFetching rubocop-ast 1.17.0\nInstalling et-orbi 1.2.7\nInstalling rubocop-ast 1.17.0\nFetching fugit 1.5.3\nInstalling fugit 1.5.3\nFetching rufus-scheduler 3.8.2\nInstalling rufus-scheduler 3.8.2\nFetching pry-byebug 3.9.0\nInstalling pry-byebug 3.9.0\nFetching rubocop 1.27.0\nInstalling opal 1.5.0\nInstalling rubocop 1.27.0\nFetching sequel-annotate 1.7.0\nFetching sequel-pg_advisory_lock 0.1.2\nInstalling sequel-pg_advisory_lock 0.1.2\nInstalling sequel-annotate 1.7.0\nFetching rubocop-performance 1.13.3\nInstalling rubocop-performance 1.13.3\nFetching snabberb 1.5.4\nInstalling snabberb 1.5.4\nInstalling libv8-node 16.10.0.0 (x86_64-linux)\nFetching mini_racer 0.6.2\nInstalling mini_racer 0.6.2 with native extensions\nFetching unicorn 6.1.0\nInstalling unicorn 6.1.0 with native extensions\nFetching sequel_pg 1.15.0\nInstalling sequel_pg 1.15.0 with native extensions\nFetching ffi-compiler 1.0.1\nFetching get_process_mem 0.2.7\nFetching rb-inotify 0.10.1\nInstalling get_process_mem 0.2.7\nInstalling rb-inotify 0.10.1\nInstalling ffi-compiler 1.0.1\nFetching argon2 2.1.1\nFetching listen 3.7.1\nInstalling listen 3.7.1\nFetching rerun 0.13.1\nInstalling rerun 0.13.1\nInstalling argon2 2.1.1 with native extensions\nFetching unicorn-worker-killer 0.4.5\nInstalling unicorn-worker-killer 0.4.5\nBundle complete! 24 Gemfile dependencies, 59 gems now installed.\nUse `bundle info [gemname]` to see where a bundled gem is installed.\nRemoving intermediate container 7ab9d692e951\n ---> 6fc7cc9abdc6\nStep 8/9 : COPY . .\n ---> 8a8aebaa7018\nStep 9/9 : CMD bundle exec rake dev_up &&     bundle exec rerun --background -i 'build/*' -i 'public/*' 'unicorn -c config/unicorn.rb'\n ---> Running in 58d32a35923d\nRemoving intermediate container 58d32a35923d\n ---> 035a36e8b65a\nSuccessfully built 035a36e8b65a\nSuccessfully tagged 18xx:latest\n","stderr":"","imageSize":1399371706},"endTime":1672231954414}