{"repository":"https://github.com/mongodb/marian","dockerfilePath":"Dockerfile","startTime":1672471974680,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/mongodb/marian'...\n","error":null,"commit":"c9ff87b4ce7c4193d6439b4d3da0b7ad3c36a3d4"},"originalBuild":{"startTimestamp":1672471975675,"endTimestamp":1672471999028,"error":null,"stdout":"Sending build context to Docker daemon  328.7kB\r\r\nStep 1/8 : FROM node:14-alpine\n14-alpine: Pulling from library/node\nc158987b0551: Already exists\n859c8d0e9faf: Pulling fs layer\n69c317f5cbe1: Pulling fs layer\nd0c4a6a4173f: Pulling fs layer\nd0c4a6a4173f: Download complete\n69c317f5cbe1: Verifying Checksum\n69c317f5cbe1: Download complete\n859c8d0e9faf: Verifying Checksum\n859c8d0e9faf: Download complete\n859c8d0e9faf: Pull complete\n69c317f5cbe1: Pull complete\nd0c4a6a4173f: Pull complete\nDigest: sha256:80e825b1f5ab859498a2f0f98f8197131a562906e5f8c95977057502e68ca05a\nStatus: Downloaded newer image for node:14-alpine\n ---> fb7170aa2b9b\nStep 2/8 : RUN mkdir -p /usr/src/app\n ---> Running in b9377684633d\nRemoving intermediate container b9377684633d\n ---> 0cedd9ef3667\nStep 3/8 : WORKDIR /usr/src/app\n ---> Running in e5ab2930ba76\nRemoving intermediate container e5ab2930ba76\n ---> 5951a1264322\nStep 4/8 : COPY . /usr/src/app\n ---> e4156ce5c2c4\nStep 5/8 : RUN apk add --no-cache git\n ---> Running in 8dd5d0a9f567\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/7) Installing ca-certificates (20220614-r3)\n(2/7) Installing brotli-libs (1.0.9-r9)\n(3/7) Installing nghttp2-libs (1.51.0-r0)\n(4/7) Installing libcurl (7.87.0-r0)\n(5/7) Installing libexpat (2.5.0-r0)\n(6/7) Installing pcre2 (10.42-r0)\n(7/7) Installing git (2.38.2-r0)\nExecuting busybox-1.35.0-r29.trigger\nExecuting ca-certificates-20220614-r3.trigger\nOK: 18 MiB in 24 packages\nRemoving intermediate container 8dd5d0a9f567\n ---> 7fb3bf0e35fd\nStep 6/8 : RUN npm install --production\n ---> Running in 6c2d5111779b\n\u001b[91mnpm\u001b[0m\u001b[91m WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!\n\u001b[0m\u001b[91mnpm\u001b[0m\u001b[91m WARN marian@0.1.0 No repository field.\n\u001b[0m\u001b[91m\n\u001b[0madded 23 packages from 81 contributors and audited 243 packages in 3.484s\n\n1 package is looking for funding\n  run `npm fund` for details\n\nfound 31 vulnerabilities (5 moderate, 24 high, 2 critical)\n  run `npm audit fix` to fix them, or `npm audit` for details\nRemoving intermediate container 6c2d5111779b\n ---> c80b7cdd5955\nStep 7/8 : EXPOSE 8080\n ---> Running in 5ee5b73fc826\nRemoving intermediate container 5ee5b73fc826\n ---> 3921f2eeef35\nStep 8/8 : ENTRYPOINT [\"node\", \"--max-old-space-size=4096\", \"src/index.js\", \"bucket:docs-mongodb-org-prd/search-indexes/\"]\n ---> Running in f269be3358f8\nRemoving intermediate container f269be3358f8\n ---> c596305c138f\nSuccessfully built c596305c138f\nSuccessfully tagged marian:latest\n","stderr":"","imageSize":190218577},"repair":{"violations":[{"name":"npmCacheCleanAfterInstall","position":{"start":5,"end":5,"columnStart":4,"columnEnd":28}},{"name":"mkdirUsrSrcThenRemove","position":{"start":1,"end":1,"columnStart":4,"columnEnd":25}}],"repairedDockerfile":"FROM node:14-alpine\nRUN mkdir -p /usr/src/app\nWORKDIR /usr/src/app\nCOPY . /usr/src/app\nRUN apk add --no-cache git\nRUN npm install --production\n\nEXPOSE 8080\nENTRYPOINT [\"node\", \"--max-old-space-size=4096\", \"src/index.js\", \"bucket:docs-mongodb-org-prd/search-indexes/\"]\n"},"repairedBuild":{"startTimestamp":1672471999397,"endTimestamp":1672472010803,"error":null,"stdout":"Sending build context to Docker daemon  328.7kB\r\r\nStep 1/8 : FROM node:14-alpine\n ---> fb7170aa2b9b\nStep 2/8 : RUN mkdir -p /usr/src/app\n ---> Running in b503c4f4899d\nRemoving intermediate container b503c4f4899d\n ---> 660f20b26f89\nStep 3/8 : WORKDIR /usr/src/app\n ---> Running in 2d3563604d71\nRemoving intermediate container 2d3563604d71\n ---> e16379e621d0\nStep 4/8 : COPY . /usr/src/app\n ---> f8937887a4b1\nStep 5/8 : RUN apk add --no-cache git\n ---> Running in 4a85bde132c5\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/7) Installing ca-certificates (20220614-r3)\n(2/7) Installing brotli-libs (1.0.9-r9)\n(3/7) Installing nghttp2-libs (1.51.0-r0)\n(4/7) Installing libcurl (7.87.0-r0)\n(5/7) Installing libexpat (2.5.0-r0)\n(6/7) Installing pcre2 (10.42-r0)\n(7/7) Installing git (2.38.2-r0)\nExecuting busybox-1.35.0-r29.trigger\nExecuting ca-certificates-20220614-r3.trigger\nOK: 18 MiB in 24 packages\nRemoving intermediate container 4a85bde132c5\n ---> d137afa3caf0\nStep 6/8 : RUN npm install --production\n ---> Running in f093e4e8cd71\n\u001b[91mnpm\u001b[0m\u001b[91m WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!\n\u001b[0m\u001b[91mnpm WARN marian@0.1.0 No repository field.\n\u001b[0m\u001b[91m\n\u001b[0madded 23 packages from 81 contributors and audited 243 packages in 1.894s\n\n1 package is looking for funding\n  run `npm fund` for details\n\nfound 31 vulnerabilities (5 moderate, 24 high, 2 critical)\n  run `npm audit fix` to fix them, or `npm audit` for details\nRemoving intermediate container f093e4e8cd71\n ---> a3487add82d5\nStep 7/8 : EXPOSE 8080\n ---> Running in 31e54811918f\nRemoving intermediate container 31e54811918f\n ---> 669c6a0574d8\nStep 8/8 : ENTRYPOINT [\"node\", \"--max-old-space-size=4096\", \"src/index.js\", \"bucket:docs-mongodb-org-prd/search-indexes/\"]\n ---> Running in e3a042ec9b58\nRemoving intermediate container e3a042ec9b58\n ---> 6ff7695cbe1b\nSuccessfully built 6ff7695cbe1b\nSuccessfully tagged marian:latest\n","stderr":"","imageSize":190218649},"endTime":1672472011111}