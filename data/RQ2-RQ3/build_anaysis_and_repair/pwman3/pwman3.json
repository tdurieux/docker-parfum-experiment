{"repository":"https://github.com/pwman3/pwman3","dockerfilePath":"Dockerfile","startTime":1673171416750,"endTime":1673171550596,"clone":{"startTime":1673171416750,"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/pwman3/pwman3'...\n","error":null,"endTime":1673171417587,"commit":"c241b635aee3212d204a1ff96769de262e338eec"},"originalBuild":{"startTime":1673171417667,"endTime":1673171504212,"error":null,"stdout":"Sending build context to Docker daemon  668.2kB\r\r\nStep 1/7 : FROM python:3.6-alpine\n3.6-alpine: Pulling from library/python\n59bf1c3509f3: Already exists\n8786870f2876: Pulling fs layer\nacb0e804800e: Pulling fs layer\n52bedcb3e853: Pulling fs layer\nb064415ed3d7: Pulling fs layer\n52bedcb3e853: Verifying Checksum\n52bedcb3e853: Download complete\n8786870f2876: Download complete\nacb0e804800e: Verifying Checksum\nacb0e804800e: Download complete\nb064415ed3d7: Verifying Checksum\nb064415ed3d7: Download complete\n8786870f2876: Pull complete\nacb0e804800e: Pull complete\n52bedcb3e853: Pull complete\nb064415ed3d7: Pull complete\nDigest: sha256:579978dec4602646fe1262f02b96371779bfb0294e92c91392707fa999c0c989\nStatus: Downloaded newer image for python:3.6-alpine\n ---> 3a9e80fa4606\nStep 2/7 : RUN apk update && apk add alpine-sdk python3-dev libressl-dev linux-headers py3-cryptography libffi-dev make postgresql-dev\n ---> Running in b3d14343313b\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/community/x86_64/APKINDEX.tar.gz\nv3.15.6-242-g9cfdeb1de4 [https://dl-cdn.alpinelinux.org/alpine/v3.15/main]\nv3.15.6-237-g9ae8855cb5 [https://dl-cdn.alpinelinux.org/alpine/v3.15/community]\nOK: 15873 distinct packages available\n(1/67) Upgrading libcrypto1.1 (1.1.1l-r7 -> 1.1.1s-r1)\n(2/67) Upgrading libssl1.1 (1.1.1l-r7 -> 1.1.1s-r1)\n(3/67) Installing fakeroot (1.25.3-r3)\n(4/67) Installing openssl (1.1.1s-r1)\n(5/67) Installing libattr (2.5.1-r1)\n(6/67) Installing attr (2.5.1-r1)\n(7/67) Installing libacl (2.2.53-r0)\n(8/67) Installing tar (1.34-r0)\n(9/67) Installing pkgconf (1.8.0-r0)\n(10/67) Installing patch (2.7.6-r7)\n(11/67) Installing libgcc (10.3.1_git20211027-r0)\n(12/67) Installing libstdc++ (10.3.1_git20211027-r0)\n(13/67) Installing lzip (1.22-r1)\n(14/67) Installing brotli-libs (1.0.9-r5)\n(15/67) Installing nghttp2-libs (1.46.0-r0)\n(16/67) Installing libcurl (7.80.0-r5)\n(17/67) Installing curl (7.80.0-r5)\n(18/67) Installing abuild (3.9.0-r0)\nExecuting abuild-3.9.0-r0.pre-install\n(19/67) Installing binutils (2.37-r3)\n(20/67) Installing libmagic (5.41-r0)\n(21/67) Installing file (5.41-r0)\n(22/67) Installing libgomp (10.3.1_git20211027-r0)\n(23/67) Installing libatomic (10.3.1_git20211027-r0)\n(24/67) Installing libgphobos (10.3.1_git20211027-r0)\n(25/67) Installing gmp (6.2.1-r1)\n(26/67) Installing isl22 (0.22-r0)\n(27/67) Installing mpfr4 (4.1.0-r0)\n(28/67) Installing mpc1 (1.2.1-r0)\n(29/67) Installing gcc (10.3.1_git20211027-r0)\n(30/67) Installing musl-dev (1.2.2-r7)\n(31/67) Installing libc-dev (0.7.2-r3)\n(32/67) Installing g++ (10.3.1_git20211027-r0)\n(33/67) Installing make (4.3-r0)\n(34/67) Installing fortify-headers (1.1-r1)\n(35/67) Installing build-base (0.5-r3)\n(36/67) Installing pcre2 (10.40-r0)\n(37/67) Installing git (2.34.5-r0)\n(38/67) Installing alpine-sdk (1.0-r1)\n(39/67) Installing linux-headers (5.10.41-r0)\n(40/67) Installing libffi-dev (3.4.2-r1)\n(41/67) Installing libressl3.4-libcrypto (3.4.3-r0)\n(42/67) Installing libressl3.4-libssl (3.4.3-r0)\n(43/67) Installing libressl3.4-libtls (3.4.3-r0)\n(44/67) Installing libressl-dev (3.4.3-r0)\n(45/67) Installing libpq (14.5-r0)\n(46/67) Installing openssl-dev (1.1.1s-r1)\n(47/67) Installing libpq-dev (14.5-r0)\n(48/67) Installing libecpg (14.5-r0)\n(49/67) Installing libecpg-dev (14.5-r0)\n(50/67) Installing libxml2 (2.9.14-r2)\n(51/67) Installing llvm12-libs (12.0.1-r0)\n(52/67) Installing clang-libs (12.0.1-r1)\n(53/67) Installing clang (12.0.1-r1)\n(54/67) Installing icu-libs (69.1-r1)\n(55/67) Installing icu (69.1-r1)\n(56/67) Installing icu-dev (69.1-r1)\n(57/67) Installing llvm12 (12.0.1-r0)\n(58/67) Installing postgresql14-dev (14.5-r0)\n(59/67) Installing mpdecimal (2.5.1-r1)\n(60/67) Installing python3 (3.9.16-r0)\n(61/67) Installing py3-cparser (2.20-r1)\n(62/67) Installing py3-cffi (1.14.5-r4)\n(63/67) Installing py3-idna (3.3-r0)\n(64/67) Installing py3-asn1crypto (1.4.0-r1)\n(65/67) Installing py3-six (1.16.0-r0)\n(66/67) Installing py3-cryptography (3.3.2-r3)\n(67/67) Installing python3-dev (3.9.16-r0)\nExecuting busybox-1.34.1-r3.trigger\nOK: 671 MiB in 99 packages\nRemoving intermediate container b3d14343313b\n ---> 193018f7c0b7\nStep 3/7 : ADD requirements.txt /usr/src/\n ---> fcaa0c832ebb\nStep 4/7 : ADD test_requirements.txt /usr/src\n ---> 0b6cb709343d\nStep 5/7 : RUN pip3 install -r /usr/src/requirements.txt -r /usr/src/test_requirements.txt\n ---> Running in 63facbdf7301\nCollecting cryptography>=3.2.1\n  Downloading cryptography-39.0.0-cp36-abi3-musllinux_1_1_x86_64.whl (4.3 MB)\nCollecting colorama>=0.2.4\n  Downloading colorama-0.4.5-py2.py3-none-any.whl (16 kB)\nCollecting psycopg2\n  Downloading psycopg2-2.9.5.tar.gz (384 kB)\nCollecting pymysql\n  Downloading PyMySQL-1.0.2-py3-none-any.whl (43 kB)\nCollecting pymongo==2.8\n  Downloading pymongo-2.8.tar.gz (394 kB)\nCollecting pexpect\n  Downloading pexpect-4.8.0-py2.py3-none-any.whl (59 kB)\nCollecting coverage\n  Downloading coverage-6.2-cp36-cp36m-musllinux_1_1_x86_64.whl (209 kB)\nCollecting cffi>=1.12\n  Downloading cffi-1.15.1.tar.gz (508 kB)\nCollecting ptyprocess>=0.5\n  Downloading ptyprocess-0.7.0-py2.py3-none-any.whl (13 kB)\nCollecting pycparser\n  Downloading pycparser-2.21-py2.py3-none-any.whl (118 kB)\nBuilding wheels for collected packages: pymongo, psycopg2, cffi\n  Building wheel for pymongo (setup.py): started\n  Building wheel for pymongo (setup.py): finished with status 'done'\n  Created wheel for pymongo: filename=pymongo-2.8-cp36-cp36m-linux_x86_64.whl size=222541 sha256=f042dab89c63e2bf9aadeaa868976dfbb3c88a36433c1e1d1e5bb088e6c43faf\n  Stored in directory: /root/.cache/pip/wheels/ce/48/43/0cc65a17f4712457a255e4f096fd83f0f01ca9c64d3946d441\n  Building wheel for psycopg2 (setup.py): started\n  Building wheel for psycopg2 (setup.py): finished with status 'done'\n  Created wheel for psycopg2: filename=psycopg2-2.9.5-cp36-cp36m-linux_x86_64.whl size=154726 sha256=1b9459d14c3519ebe0bc23125a960288dce3bbeed38d3420de1f036fc78d6d68\n  Stored in directory: /root/.cache/pip/wheels/9b/e7/1f/1675a679f0cf46d710c089457b282f5f1d580452660404980c\n  Building wheel for cffi (setup.py): started\n  Building wheel for cffi (setup.py): finished with status 'done'\n  Created wheel for cffi: filename=cffi-1.15.1-cp36-cp36m-linux_x86_64.whl size=186048 sha256=2416f5b916c758ddeb9a163cf8f1cb0d39c454e6c72a3590f413c7d9953fe05d\n  Stored in directory: /root/.cache/pip/wheels/8f/36/4d/7069b6a3f7fdf76eea0cea436f92997a1917f684834c6adec8\nSuccessfully built pymongo psycopg2 cffi\nInstalling collected packages: pycparser, ptyprocess, cffi, pymysql, pymongo, psycopg2, pexpect, cryptography, coverage, colorama\nSuccessfully installed cffi-1.15.1 colorama-0.4.5 coverage-6.2 cryptography-39.0.0 pexpect-4.8.0 psycopg2-2.9.5 ptyprocess-0.7.0 pycparser-2.21 pymongo-2.8 pymysql-1.0.2\n\u001b[91mWARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv\n\u001b[0m\u001b[91mWARNING: You are using pip version 21.2.4; however, version 21.3.1 is available.\nYou should consider upgrading via the '/usr/local/bin/python -m pip install --upgrade pip' command.\n\u001b[0mRemoving intermediate container 63facbdf7301\n ---> 5357dbee05f1\nStep 6/7 : WORKDIR /code\n ---> Running in 4d6f84e56ebb\nRemoving intermediate container 4d6f84e56ebb\n ---> 5b143b50e38b\nStep 7/7 : CMD [\"make\", \"integration-test\"]\n ---> Running in 8cad991c9b53\nRemoving intermediate container 8cad991c9b53\n ---> 68a0c548b9cc\nSuccessfully built 68a0c548b9cc\nSuccessfully tagged pwman3:latest\n","stderr":"","imageSize":751537291},"repair":{"startTime":1673171504274,"endTime":1673171504338,"violations":[{"name":"pipUseNoCacheDir","position":{"start":4,"end":4,"columnStart":4,"columnEnd":79}},{"name":"apkAddUseNoCache","position":{"start":1,"end":1,"columnStart":18,"columnEnd":123}}],"repairedDockerfile":"FROM python:3.6-alpine\nRUN apk update && apk add --no-cache alpine-sdk python3-dev libressl-dev linux-headers py3-cryptography libffi-dev make postgresql-dev\nADD requirements.txt /usr/src/\nADD test_requirements.txt /usr/src\nRUN pip3 install --no-cache-dir -r /usr/src/requirements.txt -r\nWORKDIR /code\nCMD [\"make\", \"integration-test\"]\n"},"repairedBuild":{"startTime":1673171504732,"endTime":1673171550525,"error":{"code":2,"killed":false,"signal":null,"cmd":"docker build --no-cache --force-rm -t pwman3:latest -f /tmp/dinghy-analysis/pwman3/pwman3/Dockerfile ."},"stdout":"Sending build context to Docker daemon  668.2kB\r\r\nStep 1/7 : FROM python:3.6-alpine\n ---> 3a9e80fa4606\nStep 2/7 : RUN apk update && apk add --no-cache alpine-sdk python3-dev libressl-dev linux-headers py3-cryptography libffi-dev make postgresql-dev\n ---> Running in 680ba1839f2f\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/community/x86_64/APKINDEX.tar.gz\nv3.15.6-242-g9cfdeb1de4 [https://dl-cdn.alpinelinux.org/alpine/v3.15/main]\nv3.15.6-237-g9ae8855cb5 [https://dl-cdn.alpinelinux.org/alpine/v3.15/community]\nOK: 15873 distinct packages available\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/community/x86_64/APKINDEX.tar.gz\n(1/67) Upgrading libcrypto1.1 (1.1.1l-r7 -> 1.1.1s-r1)\n(2/67) Upgrading libssl1.1 (1.1.1l-r7 -> 1.1.1s-r1)\n(3/67) Installing fakeroot (1.25.3-r3)\n(4/67) Installing openssl (1.1.1s-r1)\n(5/67) Installing libattr (2.5.1-r1)\n(6/67) Installing attr (2.5.1-r1)\n(7/67) Installing libacl (2.2.53-r0)\n(8/67) Installing tar (1.34-r0)\n(9/67) Installing pkgconf (1.8.0-r0)\n(10/67) Installing patch (2.7.6-r7)\n(11/67) Installing libgcc (10.3.1_git20211027-r0)\n(12/67) Installing libstdc++ (10.3.1_git20211027-r0)\n(13/67) Installing lzip (1.22-r1)\n(14/67) Installing brotli-libs (1.0.9-r5)\n(15/67) Installing nghttp2-libs (1.46.0-r0)\n(16/67) Installing libcurl (7.80.0-r5)\n(17/67) Installing curl (7.80.0-r5)\n(18/67) Installing abuild (3.9.0-r0)\nExecuting abuild-3.9.0-r0.pre-install\n(19/67) Installing binutils (2.37-r3)\n(20/67) Installing libmagic (5.41-r0)\n(21/67) Installing file (5.41-r0)\n(22/67) Installing libgomp (10.3.1_git20211027-r0)\n(23/67) Installing libatomic (10.3.1_git20211027-r0)\n(24/67) Installing libgphobos (10.3.1_git20211027-r0)\n(25/67) Installing gmp (6.2.1-r1)\n(26/67) Installing isl22 (0.22-r0)\n(27/67) Installing mpfr4 (4.1.0-r0)\n(28/67) Installing mpc1 (1.2.1-r0)\n(29/67) Installing gcc (10.3.1_git20211027-r0)\n(30/67) Installing musl-dev (1.2.2-r7)\n(31/67) Installing libc-dev (0.7.2-r3)\n(32/67) Installing g++ (10.3.1_git20211027-r0)\n(33/67) Installing make (4.3-r0)\n(34/67) Installing fortify-headers (1.1-r1)\n(35/67) Installing build-base (0.5-r3)\n(36/67) Installing pcre2 (10.40-r0)\n(37/67) Installing git (2.34.5-r0)\n(38/67) Installing alpine-sdk (1.0-r1)\n(39/67) Installing linux-headers (5.10.41-r0)\n(40/67) Installing libffi-dev (3.4.2-r1)\n(41/67) Installing libressl3.4-libcrypto (3.4.3-r0)\n(42/67) Installing libressl3.4-libssl (3.4.3-r0)\n(43/67) Installing libressl3.4-libtls (3.4.3-r0)\n(44/67) Installing libressl-dev (3.4.3-r0)\n(45/67) Installing libpq (14.5-r0)\n(46/67) Installing openssl-dev (1.1.1s-r1)\n(47/67) Installing libpq-dev (14.5-r0)\n(48/67) Installing libecpg (14.5-r0)\n(49/67) Installing libecpg-dev (14.5-r0)\n(50/67) Installing libxml2 (2.9.14-r2)\n(51/67) Installing llvm12-libs (12.0.1-r0)\n(52/67) Installing clang-libs (12.0.1-r1)\n(53/67) Installing clang (12.0.1-r1)\n(54/67) Installing icu-libs (69.1-r1)\n(55/67) Installing icu (69.1-r1)\n(56/67) Installing icu-dev (69.1-r1)\n(57/67) Installing llvm12 (12.0.1-r0)\n(58/67) Installing postgresql14-dev (14.5-r0)\n(59/67) Installing mpdecimal (2.5.1-r1)\n(60/67) Installing python3 (3.9.16-r0)\n(61/67) Installing py3-cparser (2.20-r1)\n(62/67) Installing py3-cffi (1.14.5-r4)\n(63/67) Installing py3-idna (3.3-r0)\n(64/67) Installing py3-asn1crypto (1.4.0-r1)\n(65/67) Installing py3-six (1.16.0-r0)\n(66/67) Installing py3-cryptography (3.3.2-r3)\n(67/67) Installing python3-dev (3.9.16-r0)\nExecuting busybox-1.34.1-r3.trigger\nOK: 671 MiB in 99 packages\nRemoving intermediate container 680ba1839f2f\n ---> c6b33c9069a8\nStep 3/7 : ADD requirements.txt /usr/src/\n ---> 8bb60a8d3118\nStep 4/7 : ADD test_requirements.txt /usr/src\n ---> e7628d459738\nStep 5/7 : RUN pip3 install --no-cache-dir -r /usr/src/requirements.txt -r\n ---> Running in ae0fa5bb17cd\n\u001b[91m\nUsage:   \n  pip3 install [options] <requirement specifier> [package-index-options] ...\n  pip3 install [options] -r <requirements file> [package-index-options] ...\n  pip3 install [options] [-e] <vcs project url> ...\n  pip3 install [options] [-e] <local project path> ...\n  pip3 install [options] <archive url/path> ...\n\n-r option requires 1 argument\n\u001b[0mRemoving intermediate container ae0fa5bb17cd\n","stderr":"The command '/bin/sh -c pip3 install --no-cache-dir -r /usr/src/requirements.txt -r' returned a non-zero code: 2\n"}}