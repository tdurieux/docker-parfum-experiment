{"repository":"https://github.com/himanushi/music-server","dockerfilePath":"Dockerfile","startTime":1672350254686,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/himanushi/music-server'...\n","error":null,"commit":"97a0cb73dc9160bd5efdf2f4ec66c01b5ed89c45"},"originalBuild":{"startTimestamp":1672350255677,"endTimestamp":1672350393782,"error":null,"stdout":"Sending build context to Docker daemon  2.291MB\r\r\nStep 1/14 : FROM ruby:3.0.2\n3.0.2: Pulling from library/ruby\n647acf3d48c2: Pulling fs layer\nb02967ef0034: Pulling fs layer\ne1ad2231829e: Pulling fs layer\n5576ce26bf1d: Pulling fs layer\na66b7f31b095: Pulling fs layer\n11c270d8f828: Pulling fs layer\n5df92bd6f19a: Pulling fs layer\n834a3e3a7652: Pulling fs layer\n5576ce26bf1d: Waiting\n834a3e3a7652: Waiting\n5df92bd6f19a: Waiting\na66b7f31b095: Waiting\n11c270d8f828: Waiting\ne1ad2231829e: Verifying Checksum\ne1ad2231829e: Download complete\nb02967ef0034: Verifying Checksum\nb02967ef0034: Download complete\n647acf3d48c2: Verifying Checksum\n647acf3d48c2: Download complete\n11c270d8f828: Verifying Checksum\n11c270d8f828: Download complete\n5576ce26bf1d: Verifying Checksum\n5576ce26bf1d: Download complete\n834a3e3a7652: Download complete\n5df92bd6f19a: Verifying Checksum\n5df92bd6f19a: Download complete\na66b7f31b095: Verifying Checksum\na66b7f31b095: Download complete\n647acf3d48c2: Pull complete\nb02967ef0034: Pull complete\ne1ad2231829e: Pull complete\n5576ce26bf1d: Pull complete\na66b7f31b095: Pull complete\n11c270d8f828: Pull complete\n5df92bd6f19a: Pull complete\n834a3e3a7652: Pull complete\nDigest: sha256:15dd21ae353c5f4faebed038d9d131c47b9fd84c14be8c3cfbc750204b63f009\nStatus: Downloaded newer image for ruby:3.0.2\n ---> 43a012460a2c\nStep 2/14 : RUN curl -SL https://deb.nodesource.com/setup_14.x | bash &&     curl -sS https://dl.yarnpkg.com/debian/pubkey.gpg | apt-key add -  &&     echo \"deb https://dl.yarnpkg.com/debian/ stable main\" | tee /etc/apt/sources.list.d/yarn.list &&     apt update -qq && apt install -y nodejs yarn mariadb-client\n ---> Running in 7b6ba0dac91b\n\u001b[91m  % Total    % Received % Xferd  Ave\u001b[0m\u001b[91mrage Speed   Time    Time     T\u001b[0m\u001b[91mime  Curre\u001b[0m\u001b[91mnt\n \u001b[0m\u001b[91m   \u001b[0m\u001b[91m    \u001b[0m\u001b[91m            \u001b[0m\u001b[91m         \u001b[0m\u001b[91m    \u001b[0m\u001b[91mDloa\u001b[0m\u001b[91md  U\u001b[0m\u001b[91mpload \u001b[0m\u001b[91m  To\u001b[0m\u001b[91mtal   Spe\u001b[0m\u001b[91mnt    Left  Speed\n\u001b[0m\u001b[91m\r  0     0    0   \u001b[0m\u001b[91m  0    0  \u001b[0m\u001b[91m   0   \u001b[0m\u001b[91m   0\u001b[0m\u001b[91m      0 -\u001b[0m\u001b[91m-:--\u001b[0m\u001b[91m:-- --:-\u001b[0m\u001b[91m-:-- --:--:-\u001b[0m\u001b[91m-     0\u001b[0m\u001b[91m\r100 15696  100 15696    0     0   153k      0 --:--:-- --:--:-- --:--:--  153k\n\u001b[0m\n## Installing the NodeSource Node.js 14.x repo...\n\n\n## Populating apt-get cache...\n\n+ apt-get update\nGet:1 http://deb.debian.org/debian bullseye InRelease [116 kB]\nGet:2 http://security.debian.org/debian-security bullseye-security InRelease [48.4 kB]\nGet:3 http://deb.debian.org/debian bullseye-updates InRelease [44.1 kB]\nGet:4 http://security.debian.org/debian-security bullseye-security/main amd64 Packages [210 kB]\nGet:5 http://deb.debian.org/debian bullseye/main amd64 Packages [8183 kB]\nGet:6 http://deb.debian.org/debian bullseye-updates/main amd64 Packages [14.6 kB]\nFetched 8616 kB in 2s (4745 kB/s)\nReading package lists...\n\n## Installing packages required for setup: lsb-release...\n\n+ apt-get install -y lsb-release > /dev/null 2>&1\n\n## Confirming \"bullseye\" is supported...\n\n+ curl -sLf -o /dev/null 'https://deb.nodesource.com/node_14.x/dists/bullseye/Release'\n\n## Adding the NodeSource signing key to your keyring...\n\n+ curl -s https://deb.nodesource.com/gpgkey/nodesource.gpg.key | gpg --dearmor | tee /usr/share/keyrings/nodesource.gpg >/dev/null\n\n## Creating apt sources list file for the NodeSource Node.js 14.x repo...\n\n+ echo 'deb [signed-by=/usr/share/keyrings/nodesource.gpg] https://deb.nodesource.com/node_14.x bullseye main' > /etc/apt/sources.list.d/nodesource.list\n+ echo 'deb-src [signed-by=/usr/share/keyrings/nodesource.gpg] https://deb.nodesource.com/node_14.x bullseye main' >> /etc/apt/sources.list.d/nodesource.list\n\n## Running `apt-get update` for you...\n\n+ apt-get update\nHit:1 http://security.debian.org/debian-security bullseye-security InRelease\nHit:2 http://deb.debian.org/debian bullseye InRelease\nHit:3 http://deb.debian.org/debian bullseye-updates InRelease\nGet:4 https://deb.nodesource.com/node_14.x bullseye InRelease [4586 B]\nGet:5 https://deb.nodesource.com/node_14.x bullseye/main amd64 Packages [773 B]\nFetched 5359 B in 2s (2999 B/s)\nReading package lists...\n\n## Run `sudo apt-get install -y nodejs` to install Node.js 14.x and npm\n## You may also need development tools to build native addons:\n     sudo apt-get install gcc g++ make\n## To install the Yarn package manager, run:\n     curl -sL https://dl.yarnpkg.com/debian/pubkey.gpg | gpg --dearmor | sudo tee /usr/share/keyrings/yarnkey.gpg >/dev/null\n     echo \"deb [signed-by=/usr/share/keyrings/yarnkey.gpg] https://dl.yarnpkg.com/debian stable main\" | sudo tee /etc/apt/sources.list.d/yarn.list\n     sudo apt-get update && sudo apt-get install yarn\n\n\n\u001b[91mWarning: apt-key is deprecated. Manage keyring files in trusted.gpg.d instead (see apt-key(8)).\n\u001b[0mOK\ndeb https://dl.yarnpkg.com/debian/ stable main\n\u001b[91m\nWARNING: apt does not have a stable CLI interface. Use with caution in scripts.\n\n\u001b[0m109 packages can be upgraded. Run 'apt list --upgradable' to see them.\n\u001b[91m\nWARNING: apt does not have a stable CLI interface. Use with caution in scripts.\n\n\u001b[0mReading package lists...\nBuilding dependency tree...\nReading state information...\nThe following additional packages will be installed:\n  libconfig-inifiles-perl libdbd-mariadb-perl libdbi-perl libterm-readkey-perl\n  mariadb-client-10.5 mariadb-client-core-10.5 mariadb-common\nSuggested packages:\n  libclone-perl libmldbm-perl libnet-daemon-perl libsql-statement-perl\nThe following NEW packages will be installed:\n  libconfig-inifiles-perl libdbd-mariadb-perl libdbi-perl libterm-readkey-perl\n  mariadb-client mariadb-client-10.5 mariadb-client-core-10.5 nodejs yarn\nThe following packages will be upgraded:\n  mariadb-common\n1 upgraded, 9 newly installed, 0 to remove and 108 not upgraded.\nNeed to get 30.0 MB of archives.\nAfter this operation, 170 MB of additional disk space will be used.\nGet:1 http://deb.debian.org/debian bullseye/main amd64 libconfig-inifiles-perl all 3.000003-1 [52.1 kB]\nGet:2 https://deb.nodesource.com/node_14.x bullseye/main amd64 nodejs amd64 14.21.1-deb-1nodesource1 [25.7 MB]\nGet:3 http://deb.debian.org/debian bullseye/main amd64 libdbi-perl amd64 1.643-3+b1 [780 kB]\nGet:4 https://dl.yarnpkg.com/debian stable/main amd64 yarn all 1.22.19-1 [893 kB]\nGet:5 http://deb.debian.org/debian bullseye/main amd64 libdbd-mariadb-perl amd64 1.21-3 [110 kB]\nGet:6 http://deb.debian.org/debian bullseye/main amd64 libterm-readkey-perl amd64 2.38-1+b2 [27.8 kB]\nGet:7 http://deb.debian.org/debian bullseye/main amd64 mariadb-common all 1:10.5.18-0+deb11u1 [36.9 kB]\nGet:8 http://deb.debian.org/debian bullseye/main amd64 mariadb-client-core-10.5 amd64 1:10.5.18-0+deb11u1 [784 kB]\nGet:9 http://deb.debian.org/debian bullseye/main amd64 mariadb-client-10.5 amd64 1:10.5.18-0+deb11u1 [1506 kB]\nGet:10 http://deb.debian.org/debian bullseye/main amd64 mariadb-client all 1:10.5.18-0+deb11u1 [35.3 kB]\n\u001b[91mdebconf: delaying package configuration, since apt-utils is not installed\n\u001b[0mFetched 30.0 MB in 1s (29.2 MB/s)\nSelecting previously unselected package libconfig-inifiles-perl.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 22766 files and directories currently installed.)\r\nPreparing to unpack .../0-libconfig-inifiles-perl_3.000003-1_all.deb ...\r\nUnpacking libconfig-inifiles-perl (3.000003-1) ...\r\nSelecting previously unselected package libdbi-perl:amd64.\r\nPreparing to unpack .../1-libdbi-perl_1.643-3+b1_amd64.deb ...\r\nUnpacking libdbi-perl:amd64 (1.643-3+b1) ...\r\nSelecting previously unselected package libdbd-mariadb-perl.\r\nPreparing to unpack .../2-libdbd-mariadb-perl_1.21-3_amd64.deb ...\r\nUnpacking libdbd-mariadb-perl (1.21-3) ...\r\nSelecting previously unselected package libterm-readkey-perl.\r\nPreparing to unpack .../3-libterm-readkey-perl_2.38-1+b2_amd64.deb ...\r\nUnpacking libterm-readkey-perl (2.38-1+b2) ...\r\nPreparing to unpack .../4-mariadb-common_1%3a10.5.18-0+deb11u1_all.deb ...\r\nUnpacking mariadb-common (1:10.5.18-0+deb11u1) over (1:10.5.12-0+deb11u1) ...\r\nSelecting previously unselected package mariadb-client-core-10.5.\r\nPreparing to unpack .../5-mariadb-client-core-10.5_1%3a10.5.18-0+deb11u1_amd64.deb ...\r\nUnpacking mariadb-client-core-10.5 (1:10.5.18-0+deb11u1) ...\r\nSelecting previously unselected package mariadb-client-10.5.\r\nPreparing to unpack .../6-mariadb-client-10.5_1%3a10.5.18-0+deb11u1_amd64.deb ...\r\nUnpacking mariadb-client-10.5 (1:10.5.18-0+deb11u1) ...\r\nSelecting previously unselected package mariadb-client.\r\nPreparing to unpack .../7-mariadb-client_1%3a10.5.18-0+deb11u1_all.deb ...\r\nUnpacking mariadb-client (1:10.5.18-0+deb11u1) ...\r\nSelecting previously unselected package nodejs.\r\nPreparing to unpack .../8-nodejs_14.21.1-deb-1nodesource1_amd64.deb ...\r\nUnpacking nodejs (14.21.1-deb-1nodesource1) ...\r\nSelecting previously unselected package yarn.\r\nPreparing to unpack .../9-yarn_1.22.19-1_all.deb ...\r\nUnpacking yarn (1.22.19-1) ...\r\nSetting up libconfig-inifiles-perl (3.000003-1) ...\r\nSetting up nodejs (14.21.1-deb-1nodesource1) ...\r\nSetting up mariadb-common (1:10.5.18-0+deb11u1) ...\r\nSetting up mariadb-client-core-10.5 (1:10.5.18-0+deb11u1) ...\r\nSetting up mariadb-client-10.5 (1:10.5.18-0+deb11u1) ...\r\nSetting up yarn (1.22.19-1) ...\r\nSetting up libterm-readkey-perl (2.38-1+b2) ...\r\nSetting up libdbi-perl:amd64 (1.643-3+b1) ...\r\nSetting up mariadb-client (1:10.5.18-0+deb11u1) ...\r\nSetting up libdbd-mariadb-perl (1.21-3) ...\r\nRemoving intermediate container 7b6ba0dac91b\n ---> 5d45819ab13b\nStep 3/14 : ENV LANG C.UTF-8\n ---> Running in 21e15d8d7f55\nRemoving intermediate container 21e15d8d7f55\n ---> dd3c4325abc3\nStep 4/14 : RUN mkdir /music-server\n ---> Running in 0a609647e750\nRemoving intermediate container 0a609647e750\n ---> e7ceb434fd0b\nStep 5/14 : WORKDIR /music-server\n ---> Running in 1ab41392712b\nRemoving intermediate container 1ab41392712b\n ---> b28b0c5c4da4\nStep 6/14 : COPY Gemfile Gemfile\n ---> d0355a6bc116\nStep 7/14 : COPY Gemfile.lock Gemfile.lock\n ---> 049315ffa2b4\nStep 8/14 : RUN bundle install\n ---> Running in dd68a817580c\nFetching gem metadata from https://rubygems.org/.......\nResolving dependencies...\nFetching rake 13.0.6\nInstalling rake 13.0.6\nUsing bundler 2.2.22\nUsing rexml 3.2.5\nFetching erubi 1.11.0\nFetching marcel 1.0.2\nFetching buftok 0.2.0\nFetching os 1.1.4\nFetching concurrent-ruby 1.1.10\nFetching nio4r 2.5.8\nFetching public_suffix 4.0.7\nFetching ast 2.4.2\nFetching jwt 2.3.0\nFetching ffi 1.15.5\nFetching multi_json 1.15.0\nFetching builder 3.2.4\nFetching websocket-extensions 0.1.5\nFetching timeout 0.3.0\nFetching google-cloud-errors 1.2.0\nFetching io-console 0.5.11\nFetching declarative 0.0.20\nFetching unf_ext 0.0.8.2\nFetching faraday-net_http 2.1.0\nFetching ruby2_keywords 0.0.5\nFetching memoist 0.16.2\nFetching trailblazer-option 0.1.2\nFetching uber 0.1.0\nFetching crass 1.0.6\nFetching rack 2.2.4\nFetching mini_mime 1.1.2\nFetching digest 3.1.0\nFetching bcrypt 3.1.18\nFetching httpclient 2.8.3\nFetching retriable 3.1.2\nFetching webrick 1.7.0\nFetching minitest 5.16.2\nFetching racc 1.6.0\nFetching strscan 3.0.4\nFetching equalizer 0.0.11\nFetching method_source 1.0.0\nInstalling crass 1.0.6\nInstalling os 1.1.4\nInstalling google-cloud-errors 1.2.0\nInstalling timeout 0.3.0\nInstalling websocket-extensions 0.1.5\nInstalling ast 2.4.2\nInstalling builder 3.2.4\nInstalling faraday-net_http 2.1.0\nInstalling strscan 3.0.4 with native extensions\nInstalling declarative 0.0.20\nInstalling erubi 1.11.0\nInstalling uber 0.1.0\nInstalling multi_json 1.15.0\nInstalling trailblazer-option 0.1.2\nInstalling ruby2_keywords 0.0.5\nInstalling memoist 0.16.2\nInstalling io-console 0.5.11 with native extensions\nInstalling jwt 2.3.0\nInstalling method_source 1.0.0\nInstalling retriable 3.1.2\nInstalling buftok 0.2.0\nInstalling mini_mime 1.1.2\nInstalling digest 3.1.0 with native extensions\nInstalling bcrypt 3.1.18 with native extensions\nInstalling marcel 1.0.2\nInstalling webrick 1.7.0\nInstalling equalizer 0.0.11\nInstalling racc 1.6.0 with native extensions\nInstalling public_suffix 4.0.7\nInstalling nio4r 2.5.8 with native extensions\nInstalling minitest 5.16.2\nInstalling rack 2.2.4\nFetching thor 1.2.1\nFetching zeitwerk 2.6.0\nFetching graphql 1.12.24\nFetching http-form_data 2.3.0\nFetching http_parser.rb 0.6.0\nFetching thread_safe 0.3.6\nFetching multipart-post 2.2.3\nFetching mysql2 0.5.4\nInstalling thor 1.2.1\nInstalling http-form_data 2.3.0\nInstalling zeitwerk 2.6.0\nFetching naught 1.1.0\nFetching rbs 2.6.0\nInstalling multipart-post 2.2.3\nInstalling concurrent-ruby 1.1.10\nInstalling mysql2 0.5.4 with native extensions\nFetching simple_oauth 0.3.1\nFetching parser 3.1.2.0\nFetching net-protocol 0.1.3\nFetching faraday 2.2.0\nFetching websocket-driver 0.7.5\nInstalling httpclient 2.8.3\nInstalling naught 1.1.0\nInstalling thread_safe 0.3.6\nInstalling net-protocol 0.1.3\nInstalling websocket-driver 0.7.5 with native extensions\nInstalling unf_ext 0.0.8.2 with native extensions\nInstalling simple_oauth 0.3.1\nInstalling http_parser.rb 0.6.0 with native extensions\nFetching mail 2.7.1\nInstalling faraday 2.2.0\nFetching representable 3.2.0\nInstalling representable 3.2.0\nInstalling graphql 1.12.24\nInstalling ffi 1.15.5 with native extensions\nInstalling mail 2.7.1\nFetching reline 0.3.1\nInstalling reline 0.3.1\nInstalling parser 3.1.2.0\nInstalling rbs 2.6.0 with native extensions\nFetching addressable 2.8.0\nInstalling addressable 2.8.0\nFetching nokogiri 1.13.8 (x86_64-linux)\nFetching google-cloud-env 1.6.0\nInstalling google-cloud-env 1.6.0\nFetching signet 0.17.0\nFetching rack-cors 1.1.1\nFetching unf 0.1.4\nFetching irb 1.4.1\nFetching rack-test 2.0.2\nFetching memoizable 0.4.2\nFetching tzinfo 2.0.5\nFetching google-cloud-core 1.6.0\nFetching i18n 1.12.0\nFetching sprockets 4.1.1\nInstalling rack-test 2.0.2\nInstalling google-cloud-core 1.6.0\nInstalling signet 0.17.0\nInstalling rack-cors 1.1.1\nInstalling i18n 1.12.0\nInstalling irb 1.4.1\nInstalling memoizable 0.4.2\nInstalling tzinfo 2.0.5\nInstalling sprockets 4.1.1\nInstalling unf 0.1.4\nInstalling nokogiri 1.13.8 (x86_64-linux)\nFetching domain_name 0.5.20190701\nFetching googleauth 1.2.0\nInstalling googleauth 1.2.0\nInstalling domain_name 0.5.20190701\nFetching activesupport 7.0.3.1\nFetching debug 1.3.4\nFetching google-apis-core 0.7.0\nInstalling activesupport 7.0.3.1\nFetching http-cookie 1.0.5\nInstalling google-apis-core 0.7.0\nInstalling debug 1.3.4 with native extensions\nFetching puma 5.6.4\nInstalling http-cookie 1.0.5\nInstalling puma 5.6.4 with native extensions\nFetching google-apis-bigquery_v2 0.37.0\nFetching google-apis-analyticsreporting_v4 0.7.0\nInstalling google-apis-analyticsreporting_v4 0.7.0\nInstalling google-apis-bigquery_v2 0.37.0\nFetching google-cloud-bigquery 1.38.1\nInstalling google-cloud-bigquery 1.38.1\nUsing net-pop 0.1.1\nFetching net-imap 0.2.3\nFetching net-smtp 0.3.1\nInstalling net-smtp 0.3.1\nInstalling net-imap 0.2.3\nFetching globalid 1.0.0\nFetching activemodel 7.0.3.1\nInstalling globalid 1.0.0\nInstalling activemodel 7.0.3.1\nFetching activejob 7.0.3.1\nInstalling activejob 7.0.3.1\nFetching activerecord 7.0.3.1\nInstalling activerecord 7.0.3.1\nFetching loofah 2.18.0\nFetching rails-dom-testing 2.0.3\nInstalling loofah 2.18.0\nInstalling rails-dom-testing 2.0.3\nFetching rails-html-sanitizer 1.4.3\nInstalling rails-html-sanitizer 1.4.3\nFetching actionview 7.0.3.1\nInstalling actionview 7.0.3.1\nFetching actionpack 7.0.3.1\nInstalling actionpack 7.0.3.1\nFetching actionmailer 7.0.3.1\nFetching railties 7.0.3.1\nFetching actioncable 7.0.3.1\nFetching activestorage 7.0.3.1\nFetching sprockets-rails 3.4.2\nInstalling sprockets-rails 3.4.2\nInstalling actionmailer 7.0.3.1\nInstalling actioncable 7.0.3.1\nInstalling activestorage 7.0.3.1\nInstalling railties 7.0.3.1\nFetching actionmailbox 7.0.3.1\nFetching actiontext 7.0.3.1\nInstalling actionmailbox 7.0.3.1\nInstalling actiontext 7.0.3.1\nFetching graphiql-rails 1.8.0\nFetching rails 7.0.3.1\nFetching rbs_rails 0.11.0\nInstalling rails 7.0.3.1\nInstalling rbs_rails 0.11.0\nInstalling graphiql-rails 1.8.0\nFetching ffi-compiler 1.0.1\nInstalling ffi-compiler 1.0.1\nFetching http-parser 1.2.3\nInstalling http-parser 1.2.3 with native extensions\nFetching http 4.4.1\nInstalling http 4.4.1\nFetching twitter 7.0.0\nInstalling twitter 7.0.0\nBundle complete! 15 Gemfile dependencies, 106 gems now installed.\nUse `bundle info [gemname]` to see where a bundled gem is installed.\nRemoving intermediate container dd68a817580c\n ---> c064dec64fc2\nStep 9/14 : COPY . /music-server\n ---> 747539586ef6\nStep 10/14 : COPY entrypoint.sh /usr/bin/\n ---> 80fd12e17ddd\nStep 11/14 : RUN chmod +x /usr/bin/entrypoint.sh\n ---> Running in ea1ba96f1d99\nRemoving intermediate container ea1ba96f1d99\n ---> c75a188ad7d3\nStep 12/14 : ENTRYPOINT [\"entrypoint.sh\"]\n ---> Running in c08fdb08d97a\nRemoving intermediate container c08fdb08d97a\n ---> 7f9a1ef05002\nStep 13/14 : EXPOSE 3000\n ---> Running in ed71c35464ba\nRemoving intermediate container ed71c35464ba\n ---> 9b76bf597f04\nStep 14/14 : CMD [\"bundle\", \"exec\", \"rails\", \"server\", \"-b\", \"0.0.0.0\"]\n ---> Running in 5755a6e21a96\nRemoving intermediate container 5755a6e21a96\n ---> f4400ac29cab\nSuccessfully built f4400ac29cab\nSuccessfully tagged music-server:latest\n","stderr":"","imageSize":1214820760},"repair":{"violations":[{"name":"curlUseFlagF","position":{"start":3,"end":3,"columnStart":4,"columnEnd":50}},{"name":"curlUseFlagF","position":{"start":4,"end":4,"columnStart":4,"columnEnd":53}},{"name":"ruleAptGetInstallUseNoRec","position":{"start":6,"end":6,"columnStart":22,"columnEnd":63}},{"name":"ruleAptGetInstallThenRemoveAptLists","position":{"start":6,"end":6,"columnStart":22,"columnEnd":63}}],"repairedDockerfile":"FROM ruby:3.0.2\n\n# node lts\nRUN curl -f -SL https://deb.nodesource.com/setup_14.x | bash && \\\n    curl -f -sS https://dl.yarnpkg.com/debian/pubkey.gpg | apt-key add - && \\\n    echo \"deb https://dl.yarnpkg.com/debian/ stable main\" | tee /etc/apt/sources.list.d/yarn.list && \\\n    apt update -qq && apt install --no-install-recommends -y nodejs yarn mariadb-client\n\n# 日本語対応\nENV LANG C.UTF-8\n\nRUN mkdir /music-server\nWORKDIR /music-server\nCOPY Gemfile Gemfile\nCOPY Gemfile.lock Gemfile.lock\nRUN bundle install\nCOPY . /music-server\n\n# Add a script to be executed every time the container starts.\nCOPY entrypoint.sh /usr/bin/\nRUN chmod +x /usr/bin/entrypoint.sh\nENTRYPOINT [\"entrypoint.sh\"]\nEXPOSE 3000\n\n# Start the main process.\nCMD [\"bundle\", \"exec\", \"rails\", \"server\", \"-b\", \"0.0.0.0\"]\n"},"repairedBuild":{"startTimestamp":1672350394672,"endTimestamp":1672350498438,"error":null,"stdout":"Sending build context to Docker daemon  2.291MB\r\r\nStep 1/14 : FROM ruby:3.0.2\n ---> 43a012460a2c\nStep 2/14 : RUN curl -f -SL https://deb.nodesource.com/setup_14.x | bash &&     curl -f -sS https://dl.yarnpkg.com/debian/pubkey.gpg | apt-key add - &&     echo \"deb https://dl.yarnpkg.com/debian/ stable main\" | tee /etc/apt/sources.list.d/yarn.list &&     apt update -qq && apt install --no-install-recommends -y nodejs yarn mariadb-client\n ---> Running in 7912401054ea\n\u001b[91m  % Total    % Received % Xferd  Average Speed   Time  \u001b[0m\u001b[91m  Time     Time  Current\n\u001b[0m\u001b[91m             \u001b[0m\u001b[91m                    Dlo\u001b[0m\u001b[91mad  \u001b[0m\u001b[91mUp\u001b[0m\u001b[91mload \u001b[0m\u001b[91m  \u001b[0m\u001b[91mTot\u001b[0m\u001b[91mal  \u001b[0m\u001b[91m Spen\u001b[0m\u001b[91mt    Left\u001b[0m\u001b[91m  Spe\u001b[0m\u001b[91med\n\u001b[0m\u001b[91m\r \u001b[0m\u001b[91m 0     0 \u001b[0m\u001b[91m   0   \u001b[0m\u001b[91m  0    0 \u001b[0m\u001b[91m   \u001b[0m\u001b[91m 0\u001b[0m\u001b[91m      0  \u001b[0m\u001b[91m    0 --:--\u001b[0m\u001b[91m:-- -\u001b[0m\u001b[91m-:\u001b[0m\u001b[91m--:-- \u001b[0m\u001b[91m--:-\u001b[0m\u001b[91m-:-\u001b[0m\u001b[91m-   \u001b[0m\u001b[91m  0\u001b[0m\u001b[91m\r100 15696  100 15696    0     0   186k      0 --:--:-- --:--:-- --:--:--  186k\n\u001b[0m\n## Installing the NodeSource Node.js 14.x repo...\n\n\n## Populating apt-get cache...\n\n+ apt-get update\nGet:1 http://deb.debian.org/debian bullseye InRelease [116 kB]\nGet:2 http://security.debian.org/debian-security bullseye-security InRelease [48.4 kB]\nGet:3 http://deb.debian.org/debian bullseye-updates InRelease [44.1 kB]\nGet:4 http://security.debian.org/debian-security bullseye-security/main amd64 Packages [210 kB]\nGet:5 http://deb.debian.org/debian bullseye/main amd64 Packages [8183 kB]\nGet:6 http://deb.debian.org/debian bullseye-updates/main amd64 Packages [14.6 kB]\nFetched 8616 kB in 2s (4911 kB/s)\nReading package lists...\n\n## Installing packages required for setup: lsb-release...\n\n+ apt-get install -y lsb-release > /dev/null 2>&1\n\n## Confirming \"bullseye\" is supported...\n\n+ curl -sLf -o /dev/null 'https://deb.nodesource.com/node_14.x/dists/bullseye/Release'\n\n## Adding the NodeSource signing key to your keyring...\n\n+ curl -s https://deb.nodesource.com/gpgkey/nodesource.gpg.key | gpg --dearmor | tee /usr/share/keyrings/nodesource.gpg >/dev/null\n\n## Creating apt sources list file for the NodeSource Node.js 14.x repo...\n\n+ echo 'deb [signed-by=/usr/share/keyrings/nodesource.gpg] https://deb.nodesource.com/node_14.x bullseye main' > /etc/apt/sources.list.d/nodesource.list\n+ echo 'deb-src [signed-by=/usr/share/keyrings/nodesource.gpg] https://deb.nodesource.com/node_14.x bullseye main' >> /etc/apt/sources.list.d/nodesource.list\n\n## Running `apt-get update` for you...\n\n+ apt-get update\nHit:1 http://deb.debian.org/debian bullseye InRelease\nHit:2 http://security.debian.org/debian-security bullseye-security InRelease\nHit:3 http://deb.debian.org/debian bullseye-updates InRelease\nGet:4 https://deb.nodesource.com/node_14.x bullseye InRelease [4586 B]\nGet:5 https://deb.nodesource.com/node_14.x bullseye/main amd64 Packages [773 B]\nFetched 5359 B in 1s (6985 B/s)\nReading package lists...\n\n## Run `sudo apt-get install -y nodejs` to install Node.js 14.x and npm\n## You may also need development tools to build native addons:\n     sudo apt-get install gcc g++ make\n## To install the Yarn package manager, run:\n     curl -sL https://dl.yarnpkg.com/debian/pubkey.gpg | gpg --dearmor | sudo tee /usr/share/keyrings/yarnkey.gpg >/dev/null\n     echo \"deb [signed-by=/usr/share/keyrings/yarnkey.gpg] https://dl.yarnpkg.com/debian stable main\" | sudo tee /etc/apt/sources.list.d/yarn.list\n     sudo apt-get update && sudo apt-get install yarn\n\n\n\u001b[91mWarning: apt-key is deprecated. Manage keyring files in trusted.gpg.d instead (see apt-key(8)).\n\u001b[0mOK\ndeb https://dl.yarnpkg.com/debian/ stable main\n\u001b[91m\nWARNING: apt does not have a stable CLI interface. Use with caution in scripts.\n\n\u001b[0m109 packages can be upgraded. Run 'apt list --upgradable' to see them.\n\u001b[91m\nWARNING: apt does not have a stable CLI interface. Use with caution in scripts.\n\n\u001b[0mReading package lists...\nBuilding dependency tree...\nReading state information...\nThe following additional packages will be installed:\n  libconfig-inifiles-perl mariadb-client-10.5 mariadb-client-core-10.5\n  mariadb-common\nRecommended packages:\n  libdbd-mariadb-perl | libdbd-mysql-perl libdbi-perl libterm-readkey-perl\nThe following NEW packages will be installed:\n  libconfig-inifiles-perl mariadb-client mariadb-client-10.5\n  mariadb-client-core-10.5 nodejs yarn\nThe following packages will be upgraded:\n  mariadb-common\n1 upgraded, 6 newly installed, 0 to remove and 108 not upgraded.\nNeed to get 29.0 MB of archives.\nAfter this operation, 167 MB of additional disk space will be used.\nGet:1 http://deb.debian.org/debian bullseye/main amd64 libconfig-inifiles-perl all 3.000003-1 [52.1 kB]\nGet:2 http://deb.debian.org/debian bullseye/main amd64 mariadb-common all 1:10.5.18-0+deb11u1 [36.9 kB]\nGet:3 http://deb.debian.org/debian bullseye/main amd64 mariadb-client-core-10.5 amd64 1:10.5.18-0+deb11u1 [784 kB]\nGet:4 http://deb.debian.org/debian bullseye/main amd64 mariadb-client-10.5 amd64 1:10.5.18-0+deb11u1 [1506 kB]\nGet:5 http://deb.debian.org/debian bullseye/main amd64 mariadb-client all 1:10.5.18-0+deb11u1 [35.3 kB]\nGet:6 https://dl.yarnpkg.com/debian stable/main amd64 yarn all 1.22.19-1 [893 kB]\nGet:7 https://deb.nodesource.com/node_14.x bullseye/main amd64 nodejs amd64 14.21.1-deb-1nodesource1 [25.7 MB]\n\u001b[91mdebconf: delaying package configuration, since apt-utils is not installed\n\u001b[0mFetched 29.0 MB in 1s (22.4 MB/s)\nSelecting previously unselected package libconfig-inifiles-perl.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 22766 files and directories currently installed.)\r\nPreparing to unpack .../0-libconfig-inifiles-perl_3.000003-1_all.deb ...\r\nUnpacking libconfig-inifiles-perl (3.000003-1) ...\r\nPreparing to unpack .../1-mariadb-common_1%3a10.5.18-0+deb11u1_all.deb ...\r\nUnpacking mariadb-common (1:10.5.18-0+deb11u1) over (1:10.5.12-0+deb11u1) ...\r\nSelecting previously unselected package mariadb-client-core-10.5.\r\nPreparing to unpack .../2-mariadb-client-core-10.5_1%3a10.5.18-0+deb11u1_amd64.deb ...\r\nUnpacking mariadb-client-core-10.5 (1:10.5.18-0+deb11u1) ...\r\nSelecting previously unselected package mariadb-client-10.5.\r\nPreparing to unpack .../3-mariadb-client-10.5_1%3a10.5.18-0+deb11u1_amd64.deb ...\r\nUnpacking mariadb-client-10.5 (1:10.5.18-0+deb11u1) ...\r\nSelecting previously unselected package mariadb-client.\r\nPreparing to unpack .../4-mariadb-client_1%3a10.5.18-0+deb11u1_all.deb ...\r\nUnpacking mariadb-client (1:10.5.18-0+deb11u1) ...\r\nSelecting previously unselected package nodejs.\r\nPreparing to unpack .../5-nodejs_14.21.1-deb-1nodesource1_amd64.deb ...\r\nUnpacking nodejs (14.21.1-deb-1nodesource1) ...\r\nSelecting previously unselected package yarn.\r\nPreparing to unpack .../6-yarn_1.22.19-1_all.deb ...\r\nUnpacking yarn (1.22.19-1) ...\r\nSetting up libconfig-inifiles-perl (3.000003-1) ...\r\nSetting up nodejs (14.21.1-deb-1nodesource1) ...\r\nSetting up mariadb-common (1:10.5.18-0+deb11u1) ...\r\nSetting up mariadb-client-core-10.5 (1:10.5.18-0+deb11u1) ...\r\nSetting up mariadb-client-10.5 (1:10.5.18-0+deb11u1) ...\r\nSetting up yarn (1.22.19-1) ...\r\nSetting up mariadb-client (1:10.5.18-0+deb11u1) ...\r\nRemoving intermediate container 7912401054ea\n ---> a5aeffc25120\nStep 3/14 : ENV LANG C.UTF-8\n ---> Running in b2cf2561c5f2\nRemoving intermediate container b2cf2561c5f2\n ---> 630f2b27c88e\nStep 4/14 : RUN mkdir /music-server\n ---> Running in 1be0bf92c682\nRemoving intermediate container 1be0bf92c682\n ---> d1b94854e356\nStep 5/14 : WORKDIR /music-server\n ---> Running in 16cd2a21bbfb\nRemoving intermediate container 16cd2a21bbfb\n ---> 7b56a050a902\nStep 6/14 : COPY Gemfile Gemfile\n ---> c1957f4dbc58\nStep 7/14 : COPY Gemfile.lock Gemfile.lock\n ---> ff3daa19ed80\nStep 8/14 : RUN bundle install\n ---> Running in da3e641e98e1\nFetching gem metadata from https://rubygems.org/.......\nResolving dependencies...\nFetching rake 13.0.6\nInstalling rake 13.0.6\nUsing bundler 2.2.22\nUsing rexml 3.2.5\nFetching multi_json 1.15.0\nFetching concurrent-ruby 1.1.10\nFetching builder 3.2.4\nFetching nio4r 2.5.8\nFetching marcel 1.0.2\nFetching mini_mime 1.1.2\nFetching timeout 0.3.0\nFetching public_suffix 4.0.7\nFetching declarative 0.0.20\nFetching equalizer 0.0.11\nFetching jwt 2.3.0\nFetching httpclient 2.8.3\nFetching uber 0.1.0\nFetching racc 1.6.0\nFetching bcrypt 3.1.18\nFetching buftok 0.2.0\nFetching ruby2_keywords 0.0.5\nFetching retriable 3.1.2\nFetching webrick 1.7.0\nFetching crass 1.0.6\nFetching strscan 3.0.4\nFetching unf_ext 0.0.8.2\nFetching minitest 5.16.2\nFetching rack 2.2.4\nFetching websocket-extensions 0.1.5\nFetching ffi 1.15.5\nFetching erubi 1.11.0\nFetching digest 3.1.0\nFetching io-console 0.5.11\nFetching faraday-net_http 2.1.0\nFetching ast 2.4.2\nFetching google-cloud-errors 1.2.0\nFetching memoist 0.16.2\nFetching os 1.1.4\nFetching trailblazer-option 0.1.2\nInstalling multi_json 1.15.0\nInstalling memoist 0.16.2\nInstalling retriable 3.1.2\nInstalling uber 0.1.0\nInstalling equalizer 0.0.11\nInstalling buftok 0.2.0\nInstalling declarative 0.0.20\nInstalling ruby2_keywords 0.0.5\nInstalling io-console 0.5.11 with native extensions\nFetching method_source 1.0.0\nInstalling digest 3.1.0 with native extensions\nInstalling strscan 3.0.4 with native extensions\nInstalling crass 1.0.6\nInstalling websocket-extensions 0.1.5\nInstalling erubi 1.11.0\nInstalling builder 3.2.4\nInstalling jwt 2.3.0\nInstalling trailblazer-option 0.1.2\nInstalling google-cloud-errors 1.2.0\nInstalling timeout 0.3.0\nInstalling bcrypt 3.1.18 with native extensions\nInstalling os 1.1.4\nInstalling ast 2.4.2\nInstalling method_source 1.0.0\nInstalling racc 1.6.0 with native extensions\nInstalling webrick 1.7.0\nInstalling marcel 1.0.2\nInstalling minitest 5.16.2\nInstalling mini_mime 1.1.2\nInstalling faraday-net_http 2.1.0\nInstalling rack 2.2.4\nInstalling nio4r 2.5.8 with native extensions\nInstalling public_suffix 4.0.7\nInstalling httpclient 2.8.3\nInstalling concurrent-ruby 1.1.10\nFetching thor 1.2.1\nFetching zeitwerk 2.6.0\nInstalling unf_ext 0.0.8.2 with native extensions\nInstalling zeitwerk 2.6.0\nInstalling thor 1.2.1\nFetching http-form_data 2.3.0\nFetching graphql 1.12.24\nFetching mysql2 0.5.4\nFetching naught 1.1.0\nFetching http_parser.rb 0.6.0\nFetching thread_safe 0.3.6\nFetching multipart-post 2.2.3\nFetching rbs 2.6.0\nFetching simple_oauth 0.3.1\nFetching net-protocol 0.1.3\nFetching websocket-driver 0.7.5\nInstalling http-form_data 2.3.0\nInstalling mysql2 0.5.4 with native extensions\nInstalling net-protocol 0.1.3\nInstalling multipart-post 2.2.3\nInstalling naught 1.1.0\nInstalling simple_oauth 0.3.1\nInstalling websocket-driver 0.7.5 with native extensions\nInstalling thread_safe 0.3.6\nInstalling http_parser.rb 0.6.0 with native extensions\nFetching faraday 2.2.0\nFetching representable 3.2.0\nFetching parser 3.1.2.0\nInstalling graphql 1.12.24\nFetching mail 2.7.1\nInstalling faraday 2.2.0\nInstalling ffi 1.15.5 with native extensions\nInstalling representable 3.2.0\nFetching addressable 2.8.0\nInstalling mail 2.7.1\nInstalling rbs 2.6.0 with native extensions\nInstalling parser 3.1.2.0\nInstalling addressable 2.8.0\nFetching reline 0.3.1\nInstalling reline 0.3.1\nFetching memoizable 0.4.2\nInstalling memoizable 0.4.2\nFetching nokogiri 1.13.8 (x86_64-linux)\nFetching rack-test 2.0.2\nFetching rack-cors 1.1.1\nInstalling rack-test 2.0.2\nInstalling rack-cors 1.1.1\nFetching irb 1.4.1\nInstalling irb 1.4.1\nFetching unf 0.1.4\nFetching signet 0.17.0\nFetching google-cloud-env 1.6.0\nInstalling google-cloud-env 1.6.0\nInstalling signet 0.17.0\nInstalling unf 0.1.4\nFetching google-cloud-core 1.6.0\nInstalling google-cloud-core 1.6.0\nFetching googleauth 1.2.0\nInstalling googleauth 1.2.0\nFetching domain_name 0.5.20190701\nInstalling domain_name 0.5.20190701\nFetching debug 1.3.4\nFetching google-apis-core 0.7.0\nInstalling debug 1.3.4 with native extensions\nInstalling google-apis-core 0.7.0\nFetching http-cookie 1.0.5\nFetching i18n 1.12.0\nFetching tzinfo 2.0.5\nFetching sprockets 4.1.1\nInstalling http-cookie 1.0.5\nInstalling i18n 1.12.0\nInstalling sprockets 4.1.1\nInstalling tzinfo 2.0.5\nFetching google-apis-bigquery_v2 0.37.0\nFetching google-apis-analyticsreporting_v4 0.7.0\nFetching puma 5.6.4\nInstalling google-apis-analyticsreporting_v4 0.7.0\nInstalling google-apis-bigquery_v2 0.37.0\nInstalling puma 5.6.4 with native extensions\nFetching google-cloud-bigquery 1.38.1\nInstalling google-cloud-bigquery 1.38.1\nFetching activesupport 7.0.3.1\nInstalling nokogiri 1.13.8 (x86_64-linux)\nInstalling activesupport 7.0.3.1\nUsing net-pop 0.1.1\nFetching net-smtp 0.3.1\nFetching net-imap 0.2.3\nInstalling net-imap 0.2.3\nInstalling net-smtp 0.3.1\nFetching activemodel 7.0.3.1\nFetching globalid 1.0.0\nFetching rails-dom-testing 2.0.3\nFetching loofah 2.18.0\nInstalling globalid 1.0.0\nInstalling rails-dom-testing 2.0.3\nInstalling activemodel 7.0.3.1\nInstalling loofah 2.18.0\nFetching activejob 7.0.3.1\nInstalling activejob 7.0.3.1\nFetching rails-html-sanitizer 1.4.3\nInstalling rails-html-sanitizer 1.4.3\nFetching actionview 7.0.3.1\nInstalling actionview 7.0.3.1\nFetching activerecord 7.0.3.1\nInstalling activerecord 7.0.3.1\nFetching actionpack 7.0.3.1\nInstalling actionpack 7.0.3.1\nFetching actioncable 7.0.3.1\nFetching railties 7.0.3.1\nFetching actionmailer 7.0.3.1\nFetching sprockets-rails 3.4.2\nInstalling sprockets-rails 3.4.2\nInstalling actionmailer 7.0.3.1\nFetching activestorage 7.0.3.1\nInstalling actioncable 7.0.3.1\nInstalling activestorage 7.0.3.1\nInstalling railties 7.0.3.1\nFetching actiontext 7.0.3.1\nFetching actionmailbox 7.0.3.1\nInstalling actionmailbox 7.0.3.1\nInstalling actiontext 7.0.3.1\nFetching graphiql-rails 1.8.0\nFetching rails 7.0.3.1\nInstalling rails 7.0.3.1\nInstalling graphiql-rails 1.8.0\nFetching rbs_rails 0.11.0\nInstalling rbs_rails 0.11.0\nFetching ffi-compiler 1.0.1\nInstalling ffi-compiler 1.0.1\nFetching http-parser 1.2.3\nInstalling http-parser 1.2.3 with native extensions\nFetching http 4.4.1\nInstalling http 4.4.1\nFetching twitter 7.0.0\nInstalling twitter 7.0.0\nBundle complete! 15 Gemfile dependencies, 106 gems now installed.\nUse `bundle info [gemname]` to see where a bundled gem is installed.\nRemoving intermediate container da3e641e98e1\n ---> 53fab30e7e1f\nStep 9/14 : COPY . /music-server\n ---> bf087148b2d0\nStep 10/14 : COPY entrypoint.sh /usr/bin/\n ---> 0ec8a2c94841\nStep 11/14 : RUN chmod +x /usr/bin/entrypoint.sh\n ---> Running in 675f96a8cb7c\nRemoving intermediate container 675f96a8cb7c\n ---> e6fd2950325b\nStep 12/14 : ENTRYPOINT [\"entrypoint.sh\"]\n ---> Running in 1bd9cfd8f231\nRemoving intermediate container 1bd9cfd8f231\n ---> eef42a7bb01b\nStep 13/14 : EXPOSE 3000\n ---> Running in 2a673e558e9e\nRemoving intermediate container 2a673e558e9e\n ---> 693acc4498d7\nStep 14/14 : CMD [\"bundle\", \"exec\", \"rails\", \"server\", \"-b\", \"0.0.0.0\"]\n ---> Running in 30dbc62882e1\nRemoving intermediate container 30dbc62882e1\n ---> a457b0d4d1bc\nSuccessfully built a457b0d4d1bc\nSuccessfully tagged music-server:latest\n","stderr":"","imageSize":1212356130},"endTime":1672350499518}