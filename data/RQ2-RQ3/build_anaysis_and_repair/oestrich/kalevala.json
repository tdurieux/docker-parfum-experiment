{"repository":"https://github.com/oestrich/kalevala","dockerfilePath":"Dockerfile","startTime":1672319892580,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/oestrich/kalevala'...\n","error":null,"commit":"fcc1806b20632678de9a9a6fc9c0b99170187f8b"},"originalBuild":{"startTimestamp":1672319893572,"endTimestamp":1672320109586,"error":{"code":1,"killed":false,"signal":null,"cmd":"docker build --no-cache --force-rm -t kalevala:latest -f /tmp/dinghy-analysis/oestrich/kalevala/Dockerfile ."},"stdout":"Sending build context to Docker daemon  1.543MB\r\r\nStep 1/32 : FROM hexpm/elixir:1.10.4-erlang-23.1-alpine-3.12.0 as builder\n1.10.4-erlang-23.1-alpine-3.12.0: Pulling from hexpm/elixir\ndf20fa9351a1: Already exists\n485eb834dddf: Pulling fs layer\na437491957b1: Pulling fs layer\nd54334471f21: Pulling fs layer\nd54334471f21: Verifying Checksum\nd54334471f21: Download complete\na437491957b1: Verifying Checksum\na437491957b1: Download complete\n485eb834dddf: Verifying Checksum\n485eb834dddf: Download complete\n485eb834dddf: Pull complete\na437491957b1: Pull complete\nd54334471f21: Pull complete\nDigest: sha256:f0ef76d309803576e7bd5cdda4e5338c95fffdc2c8d784fd71ad3e5ef75091d7\nStatus: Downloaded newer image for hexpm/elixir:1.10.4-erlang-23.1-alpine-3.12.0\n ---> 9006336b54f8\nStep 2/32 : WORKDIR /app/example\n ---> Running in 814c59cdf8fa\nRemoving intermediate container 814c59cdf8fa\n ---> 066db757ab71\nStep 3/32 : ENV MIX_ENV=prod\n ---> Running in cc7a3cdc2e8f\nRemoving intermediate container cc7a3cdc2e8f\n ---> 319258fa9d8f\nStep 4/32 : RUN apk add --no-cache gcc git make musl-dev\n ---> Running in 0c283fe1c3ea\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.12/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.12/community/x86_64/APKINDEX.tar.gz\n(1/20) Upgrading musl (1.1.24-r8 -> 1.1.24-r10)\n(2/20) Installing libgcc (9.3.0-r2)\n(3/20) Installing libstdc++ (9.3.0-r2)\n(4/20) Installing binutils (2.34-r2)\n(5/20) Installing gmp (6.2.1-r1)\n(6/20) Installing isl (0.18-r0)\n(7/20) Installing libgomp (9.3.0-r2)\n(8/20) Installing libatomic (9.3.0-r2)\n(9/20) Installing libgphobos (9.3.0-r2)\n(10/20) Installing mpfr4 (4.0.2-r4)\n(11/20) Installing mpc1 (1.1.0-r1)\n(12/20) Installing gcc (9.3.0-r2)\n(13/20) Installing ca-certificates (20220614-r0)\n(14/20) Installing nghttp2-libs (1.41.0-r0)\n(15/20) Installing libcurl (7.79.1-r1)\n(16/20) Installing expat (2.2.10-r4)\n(17/20) Installing pcre2 (10.35-r0)\n(18/20) Installing git (2.26.3-r1)\n(19/20) Installing make (4.3-r0)\n(20/20) Installing musl-dev (1.1.24-r10)\nExecuting busybox-1.31.1-r16.trigger\nExecuting ca-certificates-20220614-r0.trigger\nOK: 159 MiB in 41 packages\nRemoving intermediate container 0c283fe1c3ea\n ---> c0cd26d0ebc0\nStep 5/32 : RUN mix local.rebar --force && mix local.hex --force\n ---> Running in f1bc1cf6523a\n* creating /root/.mix/rebar\n* creating /root/.mix/rebar3\n* creating /root/.mix/archives/hex-2.0.0\nRemoving intermediate container f1bc1cf6523a\n ---> d01d9a9c766b\nStep 6/32 : COPY mix.* /app/\n ---> 0f24ef416482\nStep 7/32 : COPY example/mix.* /app/example/\n ---> a378debe5a47\nStep 8/32 : RUN mix deps.get --only prod\n ---> Running in ac7c28ce5d0b\nResolving Hex dependencies...\nResolution completed in 0.044s\nUnchanged:\n  bcrypt_elixir 2.3.0\n  comeonin 5.3.2\n  cowboy 2.8.0\n  cowboy_telemetry 0.3.1\n  cowlib 2.9.1\n  elias 0.2.8\n  elixir_make 0.6.2\n  jason 1.2.2\n  mime 1.5.0\n  nimble_parsec 1.1.0\n  plug 1.11.0\n  plug_cowboy 2.4.1\n  plug_crypto 1.2.0\n  ranch 1.7.1\n  telemetry 0.4.2\n  telemetry_metrics 0.6.0\n  telemetry_metrics_prometheus 0.6.0\n  telemetry_metrics_prometheus_core 0.4.2\n  telemetry_poller 0.5.1\n  telnet 0.1.0\n* Getting bcrypt_elixir (Hex package)\n* Getting elias (Hex package)\n* Getting plug_cowboy (Hex package)\n* Getting ranch (Hex package)\n* Getting telemetry_metrics (Hex package)\n* Getting telemetry_metrics_prometheus (Hex package)\n* Getting telemetry_poller (Hex package)\n* Getting telemetry (Hex package)\n* Getting telemetry_metrics_prometheus_core (Hex package)\n* Getting cowboy (Hex package)\n* Getting cowboy_telemetry (Hex package)\n* Getting plug (Hex package)\n* Getting mime (Hex package)\n* Getting plug_crypto (Hex package)\n* Getting cowlib (Hex package)\n* Getting nimble_parsec (Hex package)\n* Getting telnet (Hex package)\n* Getting jason (Hex package)\n* Getting comeonin (Hex package)\n* Getting elixir_make (Hex package)\nRemoving intermediate container ac7c28ce5d0b\n ---> 751170ee3739\nStep 9/32 : RUN mix deps.compile\n ---> Running in c51fc8160ac7\n==> elias\nCompiling 2 files (.erl)\nCompiling 5 files (.ex)\nGenerated elias app\n==> nimble_parsec\nCompiling 4 files (.ex)\nGenerated nimble_parsec app\n===> Compiling ranch\n===> Compiling telemetry\n==> telemetry_metrics\nCompiling 7 files (.ex)\nGenerated telemetry_metrics app\n===> Compiling telemetry_poller\n==> jason\nCompiling 8 files (.ex)\nGenerated jason app\n==> telnet\nCompiling 6 files (.ex)\nGenerated telnet app\n==> comeonin\nCompiling 4 files (.ex)\nGenerated comeonin app\n==> telemetry_metrics_prometheus_core\nCompiling 9 files (.ex)\nGenerated telemetry_metrics_prometheus_core app\n==> elixir_make\nCompiling 1 file (.ex)\nGenerated elixir_make app\n==> bcrypt_elixir\nmkdir -p /app/example/_build/prod/lib/bcrypt_elixir/priv\ncc -g -O3 -Wall -Wno-format-truncation -I\"/usr/local/lib/erlang/erts-11.1/include\" -Ic_src -fPIC -shared  c_src/bcrypt_nif.c c_src/blowfish.c -o /app/example/_build/prod/lib/bcrypt_elixir/priv/bcrypt_nif.so\nCompiling 3 files (.ex)\nGenerated bcrypt_elixir app\n===> Compiling cowlib\n===> Compiling cowboy\n===> Compiling cowboy_telemetry\n==> mime\nCompiling 2 files (.ex)\nGenerated mime app\n==> plug_crypto\nCompiling 5 files (.ex)\nGenerated plug_crypto app\n==> plug\nCompiling 1 file (.erl)\nCompiling 41 files (.ex)\n\u001b[91mwarning: System.stacktrace/0 outside of rescue/catch clauses is deprecated. If you want to support only Elixir v1.7+, you must access __STACKTRACE__ inside a rescue/catch. If you want to support earlier Elixir versions, move System.stacktrace/0 inside a rescue/catch\n  lib/plug/conn/wrapper_error.ex:23\n\n\u001b[0mGenerated plug app\n==> plug_cowboy\nCompiling 5 files (.ex)\nGenerated plug_cowboy app\n==> kalevala\nGenerated kalevala app\n==> telemetry_metrics_prometheus\nCompiling 3 files (.ex)\nGenerated telemetry_metrics_prometheus app\nRemoving intermediate container c51fc8160ac7\n ---> c36786488a51\nStep 10/32 : FROM node:12.16 as frontend\n12.16: Pulling from library/node\n1c6172af85ee: Pulling fs layer\nb194b0e3c928: Pulling fs layer\n1f5ec00f35d5: Pulling fs layer\n93b1353672b6: Pulling fs layer\n3d7f38db3cca: Pulling fs layer\n21e102f9fe89: Pulling fs layer\n224a0b313ce8: Pulling fs layer\n24ea7952e196: Pulling fs layer\n0cffdcdd6d94: Pulling fs layer\n3d7f38db3cca: Waiting\n93b1353672b6: Waiting\n224a0b313ce8: Waiting\n24ea7952e196: Waiting\n21e102f9fe89: Waiting\n0cffdcdd6d94: Waiting\nb194b0e3c928: Verifying Checksum\nb194b0e3c928: Download complete\n1f5ec00f35d5: Verifying Checksum\n1f5ec00f35d5: Download complete\n1c6172af85ee: Verifying Checksum\n1c6172af85ee: Download complete\n21e102f9fe89: Verifying Checksum\n21e102f9fe89: Download complete\n224a0b313ce8: Verifying Checksum\n224a0b313ce8: Download complete\n93b1353672b6: Verifying Checksum\n93b1353672b6: Download complete\n1c6172af85ee: Pull complete\n0cffdcdd6d94: Verifying Checksum\n0cffdcdd6d94: Download complete\n3d7f38db3cca: Verifying Checksum\n3d7f38db3cca: Download complete\nb194b0e3c928: Pull complete\n1f5ec00f35d5: Pull complete\n24ea7952e196: Verifying Checksum\n24ea7952e196: Download complete\n93b1353672b6: Pull complete\n3d7f38db3cca: Pull complete\n21e102f9fe89: Pull complete\n224a0b313ce8: Pull complete\n24ea7952e196: Pull complete\n0cffdcdd6d94: Pull complete\nDigest: sha256:b51dc2876a5d1e184190d76a2a1f11da034d16acd95ab2e0c2191b8f1ab65d4c\nStatus: Downloaded newer image for node:12.16\n ---> bdca973cfa07\nStep 11/32 : WORKDIR /app\n ---> Running in 6a05e6a4f623\nRemoving intermediate container 6a05e6a4f623\n ---> cd8d66b34ee3\nStep 12/32 : COPY example/assets/package.json example/assets/yarn.lock /app/\n ---> 303c4d3fc037\nStep 13/32 : RUN yarn install\n ---> Running in 27e81810f287\nyarn install v1.22.4\n[1/4] Resolving packages...\n[2/4] Fetching packages...\ninfo fsevents@1.2.13: The platform \"linux\" is incompatible with this module.\ninfo \"fsevents@1.2.13\" is an optional dependency and failed compatibility check. Excluding it from installation.\ninfo fsevents@2.1.3: The platform \"linux\" is incompatible with this module.\ninfo \"fsevents@2.1.3\" is an optional dependency and failed compatibility check. Excluding it from installation.\n[3/4] Linking dependencies...\n\u001b[91mwarning \" > redux-devtools@3.5.0\" has incorrect peer dependency \"react-redux@^4.0.0 || ^5.0.0 || ^6.0.0\".\n\u001b[0m[4/4] Building fresh packages...\nDone in 40.76s.\nRemoving intermediate container 27e81810f287\n ---> 2d32a89865a5\nStep 14/32 : COPY example/assets /app\n ---> e7b25bf439fa\nStep 15/32 : RUN yarn run deploy\n ---> Running in eea2f1a17c1b\nyarn run v1.22.4\n$ webpack --mode production\n\u001b[91mBrowserslist: caniuse-lite is outdated. Please run:\nnpx browserslist@latest --update-db\n\u001b[0mHash: 8d48798b4366526bb2fb\nVersion: webpack 4.43.0\nTime: 12173ms\nBuilt at: 12/29/2022 1:21:37 PM\n                               Asset       Size  Chunks                          Chunk Names\n                      ../css/app.css   1.58 MiB       0  [emitted]        [big]  ./js/app.js\n          ../images/card-discard.svg   1.06 KiB          [emitted]               \n             ../images/card-play.svg  964 bytes          [emitted]               \n       ../images/map-icons/coins.svg   1.12 KiB          [emitted]               \n        ../images/map-icons/drop.svg  509 bytes          [emitted]               \n../images/map-icons/family-house.svg  848 bytes          [emitted]               \n      ../images/map-icons/hammer.svg  712 bytes          [emitted]               \n   ../images/map-icons/pine-tree.svg   1.33 KiB          [emitted]               \n        ../images/map-icons/shop.svg   1.71 KiB          [emitted]               \n       ../images/map-icons/stein.svg   1.77 KiB          [emitted]               \n ../images/map-icons/triple-gate.svg  449 bytes          [emitted]               \n        ../images/map-icons/well.svg   2.12 KiB          [emitted]               \n ../images/map-icons/wooden-sign.svg  735 bytes          [emitted]               \n                       ../index.html  635 bytes          [emitted]               \n                              app.js    222 KiB       0  [emitted]               ./js/app.js\n                  app.js.LICENSE.txt   1.01 KiB          [emitted]               \n                          app.js.map   83 bytes       0  [emitted] [dev]         ./js/app.js\nEntrypoint ./js/app.js [big] = ../css/app.css app.js app.js.map\n[11] (webpack)/buildin/global.js 472 bytes {0} [built]\n[13] ./js/client.js + 79 modules 235 KiB {0} [built]\n     | ./js/client.js 4.19 KiB [built]\n     | ./js/kalevala/index.js 459 bytes [built]\n     | ./js/redux/index.js 1.19 KiB [built]\n     | ./js/customTags.js 986 bytes [built]\n     | ./js/store.js 4.22 KiB [built]\n     | ./js/kalevala/keys.js 1020 bytes [built]\n     | ./js/kalevala/redux/index.js 1 KiB [built]\n     | ./js/kalevala/socket.js 2.35 KiB [built]\n     | ./js/redux/actions.js 2.79 KiB [built]\n     | ./js/redux/channelReducer.js 591 bytes [built]\n     | ./js/redux/eventsReducer.js 3 KiB [built]\n     | ./js/redux/loginReducer.js 454 bytes [built]\n     | ./js/kalevala/redux/actions.js 2.6 KiB [built]\n     | ./js/kalevala/redux/createReducer.js 585 bytes [built]\n     | ./js/kalevala/redux/promptReducer.js 1.72 KiB [built]\n     |     + 65 hidden modules\n[14] multi ./js/app.js 28 bytes {0} [built]\n[15] ./js/app.js 871 bytes {0} [built]\n[16] ./css/app.scss 657 bytes {0} [built]\n[18] ./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./node_modules/postcss-loader/src!./css/app.scss 39 bytes {0} [built]\n[26] (webpack)/buildin/harmony-module.js 573 bytes {0} [built]\n    + 22 hidden modules\n\nWARNING in asset size limit: The following asset(s) exceed the recommended size limit (244 KiB).\nThis can impact web performance.\nAssets: \n  ../css/app.css (1.58 MiB)\n\nWARNING in entrypoint size limit: The following entrypoint(s) combined asset size exceeds the recommended limit (244 KiB). This can impact web performance.\nEntrypoints:\n  ./js/app.js (1.8 MiB)\n      ../css/app.css\n      app.js\n\n\nWARNING in webpack performance recommendations: \nYou can limit the size of your bundles by using import() or require.ensure to lazy load some parts of your application.\nFor more info visit https://webpack.js.org/guides/code-splitting/\nChild mini-css-extract-plugin node_modules/css-loader/dist/cjs.js!node_modules/sass-loader/dist/cjs.js!node_modules/postcss-loader/src/index.js!css/app.scss:\n    Entrypoint mini-css-extract-plugin = *\n    [0] ./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./node_modules/postcss-loader/src!./css/app.scss 1.65 MiB {0} [built]\n        + 1 hidden module\nDone in 12.97s.\nRemoving intermediate container eea2f1a17c1b\n ---> eddc38a86fca\nStep 16/32 : FROM builder as releaser\n ---> c36786488a51\nStep 17/32 : WORKDIR /app/example\n ---> Running in f82a4ecd5b05\nRemoving intermediate container f82a4ecd5b05\n ---> 2bf3ec1fe2f8\nStep 18/32 : ENV MIX_ENV=prod\n ---> Running in adda28e1f147\nRemoving intermediate container adda28e1f147\n ---> 83d4de778022\nStep 19/32 : COPY --from=frontend /priv/static /app/example/priv/static\n ---> 1713a6f6b0ac\nStep 20/32 : COPY . /app/\n ---> 58a314e2101f\nStep 21/32 : RUN mix release\n ---> Running in c378ba6e94a4\n==> kalevala\nCompiling 47 files (.ex)\n\u001b[91mwarning: got \"@impl true\" for function handle_text/3 but no behaviour specifies such callback. The known callbacks are:\n\n  * EEx.Engine.handle_begin/1 (function)\n  * EEx.Engine.handle_body/1 (function)\n  * EEx.Engine.handle_end/1 (function)\n  * EEx.Engine.handle_expr/3 (function)\n  * EEx.Engine.handle_text/2 (function)\n  * EEx.Engine.init/1 (function)\n\n  lib/kalevala/character/view.ex:123: Kalevala.Character.View.EExKalevala (module)\n\n\u001b[0m\u001b[91mwarning: function handle_text/2 required by behaviour EEx.Engine is not implemented (in module Kalevala.Character.View.EExKalevala)\n  lib/kalevala/character/view.ex:87: Kalevala.Character.View.EExKalevala (module)\n\n\u001b[0m\n== Compilation error in file lib/kalevala/output/tables.ex ==\n** (UndefinedFunctionError) function :elixir_interpolation.unescape_string/1 is undefined or private. Did you mean one of:\n\n      * unescape_chars/2\n      * unescape_chars/1\n      * unescape_map/1\n      * unescape_tokens/2\n      * unescape_tokens/1\n\n    (elixir 1.10.4) :elixir_interpolation.unescape_string(\"+\")\n    (elixir 1.10.4) lib/enum.ex:1396: Enum.\"-map/2-lists^map/1-0-\"/2\n    expanding macro: Kalevala.Character.View.Macro.sigil_i/2\n    lib/kalevala/output/tables.ex:263: Kalevala.Output.Tables.display_rows/1\n\u001b[91mcould not compile dependency :kalevala, \"mix compile\" failed. You can recompile this dependency with \"mix deps.compile kalevala\", update it with \"mix deps.update kalevala\" or clean it with \"mix deps.clean kalevala\"\n\u001b[0mRemoving intermediate container c378ba6e94a4\n","stderr":"The command '/bin/sh -c mix release' returned a non-zero code: 1\n"},"endTime":1672320109678}