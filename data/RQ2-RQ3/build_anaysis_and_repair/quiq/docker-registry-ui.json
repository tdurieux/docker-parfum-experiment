{"repository":"https://github.com/quiq/docker-registry-ui","dockerfilePath":"Dockerfile","startTime":1672173772323,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/quiq/docker-registry-ui'...\n","error":null,"commit":"901beb5c9bd435de0d4485bec372cf4e0466db87"},"originalBuild":{"startTimestamp":1672173773395,"endTimestamp":1672173877089,"error":null,"stdout":"Sending build context to Docker daemon  2.611MB\r\r\nStep 1/15 : FROM golang:1.19.0-alpine3.16 as builder\n1.19.0-alpine3.16: Pulling from library/golang\n213ec9aee27d: Already exists\n5299e6f78605: Pulling fs layer\n1cab0e43db0a: Pulling fs layer\na9db28108fe3: Pulling fs layer\ndfface92af7f: Pulling fs layer\ndfface92af7f: Waiting\n5299e6f78605: Download complete\n1cab0e43db0a: Verifying Checksum\n1cab0e43db0a: Download complete\n5299e6f78605: Pull complete\n1cab0e43db0a: Pull complete\ndfface92af7f: Verifying Checksum\ndfface92af7f: Download complete\na9db28108fe3: Download complete\na9db28108fe3: Pull complete\ndfface92af7f: Pull complete\nDigest: sha256:0eb08c89ab1b0c638a9fe2780f7ae3ab18f6ecda2c76b908e09eb8073912045d\nStatus: Downloaded newer image for golang:1.19.0-alpine3.16\n ---> d0f5238dcb8b\nStep 2/15 : RUN apk update &&     apk add ca-certificates git bash gcc musl-dev\n ---> Running in 6099c0b0aa75\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/community/x86_64/APKINDEX.tar.gz\nv3.16.3-91-gd0e167f17b [https://dl-cdn.alpinelinux.org/alpine/v3.16/main]\nv3.16.3-88-gef347edb61 [https://dl-cdn.alpinelinux.org/alpine/v3.16/community]\nOK: 17043 distinct packages available\n(1/22) Upgrading musl (1.2.3-r0 -> 1.2.3-r2)\n(2/22) Installing ncurses-terminfo-base (6.3_p20220521-r0)\n(3/22) Installing ncurses-libs (6.3_p20220521-r0)\n(4/22) Installing readline (8.1.2-r0)\n(5/22) Installing bash (5.1.16-r2)\nExecuting bash-5.1.16-r2.post-install\n(6/22) Installing libgcc (11.2.1_git20220219-r2)\n(7/22) Installing libstdc++ (11.2.1_git20220219-r2)\n(8/22) Installing binutils (2.38-r3)\n(9/22) Installing libgomp (11.2.1_git20220219-r2)\n(10/22) Installing libatomic (11.2.1_git20220219-r2)\n(11/22) Installing gmp (6.2.1-r2)\n(12/22) Installing isl22 (0.22-r0)\n(13/22) Installing mpfr4 (4.1.0-r0)\n(14/22) Installing mpc1 (1.2.1-r0)\n(15/22) Installing gcc (11.2.1_git20220219-r2)\n(16/22) Installing brotli-libs (1.0.9-r6)\n(17/22) Installing nghttp2-libs (1.47.0-r0)\n(18/22) Installing libcurl (7.83.1-r5)\n(19/22) Installing expat (2.5.0-r0)\n(20/22) Installing pcre2 (10.40-r0)\n(21/22) Installing git (2.36.3-r0)\n(22/22) Installing musl-dev (1.2.3-r2)\nExecuting busybox-1.35.0-r17.trigger\nOK: 135 MiB in 36 packages\nRemoving intermediate container 6099c0b0aa75\n ---> f1fbb4399750\nStep 3/15 : WORKDIR /opt/src\n ---> Running in 9d38aadafb12\nRemoving intermediate container 9d38aadafb12\n ---> a2044fc433ba\nStep 4/15 : ADD events events\n ---> df3e0652f42a\nStep 5/15 : ADD registry registry\n ---> 535bbc5ac0cc\nStep 6/15 : ADD *.go go.mod go.sum ./\n ---> 20dddbc2af9a\nStep 7/15 : RUN go test -v ./registry &&     go build -o /opt/docker-registry-ui *.go\n ---> Running in 81c515034c10\n\u001b[91mgo: downloading github.com/parnurzeal/gorequest v0.2.16\n\u001b[0m\u001b[91mgo: downloading github.com/smartystreets/goconvey v1.7.2\ngo: downloading github.com/sirupsen/logrus v1.9.0\n\u001b[0m\u001b[91mgo: downloading github.com/tidwall/gjson v1.14.3\n\u001b[0m\u001b[91mgo: downloading golang.org/x/net v0.0.0-20211015210444-4f30a5c0130f\n\u001b[0m\u001b[91mgo: downloading github.com/pkg/errors v0.9.1\n\u001b[0m\u001b[91mgo: downloading moul.io/http2curl v1.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/tidwall/pretty v1.2.0\ngo: downloading github.com/tidwall/match v1.1.1\n\u001b[0m\u001b[91mgo: downloading golang.org/x/sys v0.0.0-20220715151400-c0bba94af5f8\n\u001b[0m\u001b[91mgo: downloading github.com/jtolds/gls v4.20.0+incompatible\ngo: downloading github.com/smartystreets/assertions v1.2.0\n\u001b[0m=== RUN   TestKeepMinCount\n\n  Test keep min count logic ✔✔\n\n\n2 total assertions\n\n--- PASS: TestKeepMinCount (0.00s)\n=== RUN   TestSortedMapKeys\n\n  Sort map keys ✔✔✔\n\n\n5 total assertions\n\n--- PASS: TestSortedMapKeys (0.00s)\n=== RUN   TestPrettySize\n\n  Format bytes ✔✔✔✔✔\n\n\n10 total assertions\n\n--- PASS: TestPrettySize (0.00s)\n=== RUN   TestItemInSlice\n\n  Check whether element is in slice ✔✔✔✔\n\n\n14 total assertions\n\n--- PASS: TestItemInSlice (0.00s)\nPASS\nok  \tgithub.com/quiq/docker-registry-ui/registry\t0.006s\n\u001b[91mgo: downloading github.com/labstack/echo/v4 v4.8.0\ngo: downloading github.com/CloudyKit/jet v2.1.3-0.20180809161101-62edd43e4f88+incompatible\n\u001b[0m\u001b[91mgo: downloading github.com/robfig/cron v1.2.0\n\u001b[0m\u001b[91mgo: downloading gopkg.in/yaml.v2 v2.4.0\n\u001b[0m\u001b[91mgo: downloading github.com/mattn/go-sqlite3 v1.14.15\n\u001b[0m\u001b[91mgo: downloading github.com/go-sql-driver/mysql v1.6.0\n\u001b[0m\u001b[91mgo: downloading github.com/CloudyKit/fastprinter v0.0.0-20200109182630-33d98a066a53\n\u001b[0m\u001b[91mgo: downloading github.com/golang-jwt/jwt v3.2.2+incompatible\ngo: downloading github.com/labstack/gommon v0.3.1\ngo: downloading golang.org/x/time v0.0.0-20201208040808-7e3f01d25324\n\u001b[0m\u001b[91mgo: downloading github.com/valyala/fasttemplate v1.2.1\n\u001b[0m\u001b[91mgo: downloading golang.org/x/crypto v0.0.0-20210817164053-32db794688a5\n\u001b[0m\u001b[91mgo: downloading golang.org/x/text v0.3.7\n\u001b[0m\u001b[91mgo: downloading github.com/valyala/bytebufferpool v1.0.0\ngo: downloading github.com/mattn/go-isatty v0.0.14\n\u001b[0m\u001b[91mgo: downloading github.com/mattn/go-colorable v0.1.11\n\u001b[0mRemoving intermediate container 81c515034c10\n ---> e754a79b23a9\nStep 8/15 : FROM alpine:3.16\n3.16: Pulling from library/alpine\nca7dd9ec2225: Already exists\nDigest: sha256:b95359c2505145f16c6aa384f9cc74eeff78eb36d308ca4fd902eeeb0a0b161b\nStatus: Downloaded newer image for alpine:3.16\n ---> bfe296a52501\nStep 9/15 : WORKDIR /opt\n ---> Running in cc18b05483b0\nRemoving intermediate container cc18b05483b0\n ---> c04a93fa7c07\nStep 10/15 : RUN apk add --no-cache ca-certificates tzdata &&     mkdir /opt/data &&     chown nobody /opt/data\n ---> Running in 52c40bd3a3ac\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/community/x86_64/APKINDEX.tar.gz\n(1/2) Installing ca-certificates (20220614-r0)\n(2/2) Installing tzdata (2022f-r1)\nExecuting busybox-1.35.0-r17.trigger\nExecuting ca-certificates-20220614-r0.trigger\nOK: 9 MiB in 16 packages\nRemoving intermediate container 52c40bd3a3ac\n ---> 11caa088a695\nStep 11/15 : ADD templates /opt/templates\n ---> 3bd47ab564c1\nStep 12/15 : ADD static /opt/static\n ---> ff9ae5f0ffca\nStep 13/15 : COPY --from=builder /opt/docker-registry-ui /opt/\n ---> 4bd0dbf937c4\nStep 14/15 : USER nobody\n ---> Running in 070e753500d6\nRemoving intermediate container 070e753500d6\n ---> 245c3a70b4ef\nStep 15/15 : ENTRYPOINT [\"/opt/docker-registry-ui\"]\n ---> Running in 841ddd05f5c7\nRemoving intermediate container 841ddd05f5c7\n ---> 4fc6e60fbbf1\nSuccessfully built 4fc6e60fbbf1\nSuccessfully tagged docker-registry-ui:latest\n","stderr":"","imageSize":24280367},"repair":{"violations":[{"name":"apkAddUseNoCache","position":{"start":3,"end":3,"columnStart":4,"columnEnd":49}}],"repairedDockerfile":"FROM golang:1.19.0-alpine3.16 as builder\n\nRUN apk update && \\\n    apk add --no-cache ca-certificates git bash gcc musl-dev\n\nWORKDIR /opt/src\nADD events events\nADD registry registry\nADD *.go go.mod go.sum ./\n\nRUN go test -v ./registry && \\\n    go build -o /opt/docker-registry-ui *.go\n\n\nFROM alpine:3.16\n\nWORKDIR /opt\nRUN apk add --no-cache ca-certificates tzdata && \\\n    mkdir /opt/data && \\\n    chown nobody /opt/data\n\nADD templates /opt/templates\nADD static /opt/static\nCOPY --from=builder /opt/docker-registry-ui /opt/\n\nUSER nobody\nENTRYPOINT [\"/opt/docker-registry-ui\"]\n"},"repairedBuild":{"startTimestamp":1672173877420,"endTimestamp":1672173976931,"error":null,"stdout":"Sending build context to Docker daemon  2.611MB\r\r\nStep 1/15 : FROM golang:1.19.0-alpine3.16 as builder\n ---> d0f5238dcb8b\nStep 2/15 : RUN apk update &&     apk add --no-cache ca-certificates git bash gcc musl-dev\n ---> Running in 2fc1975950d2\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/community/x86_64/APKINDEX.tar.gz\nv3.16.3-91-gd0e167f17b [https://dl-cdn.alpinelinux.org/alpine/v3.16/main]\nv3.16.3-88-gef347edb61 [https://dl-cdn.alpinelinux.org/alpine/v3.16/community]\nOK: 17043 distinct packages available\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/community/x86_64/APKINDEX.tar.gz\n(1/22) Upgrading musl (1.2.3-r0 -> 1.2.3-r2)\n(2/22) Installing ncurses-terminfo-base (6.3_p20220521-r0)\n(3/22) Installing ncurses-libs (6.3_p20220521-r0)\n(4/22) Installing readline (8.1.2-r0)\n(5/22) Installing bash (5.1.16-r2)\nExecuting bash-5.1.16-r2.post-install\n(6/22) Installing libgcc (11.2.1_git20220219-r2)\n(7/22) Installing libstdc++ (11.2.1_git20220219-r2)\n(8/22) Installing binutils (2.38-r3)\n(9/22) Installing libgomp (11.2.1_git20220219-r2)\n(10/22) Installing libatomic (11.2.1_git20220219-r2)\n(11/22) Installing gmp (6.2.1-r2)\n(12/22) Installing isl22 (0.22-r0)\n(13/22) Installing mpfr4 (4.1.0-r0)\n(14/22) Installing mpc1 (1.2.1-r0)\n(15/22) Installing gcc (11.2.1_git20220219-r2)\n(16/22) Installing brotli-libs (1.0.9-r6)\n(17/22) Installing nghttp2-libs (1.47.0-r0)\n(18/22) Installing libcurl (7.83.1-r5)\n(19/22) Installing expat (2.5.0-r0)\n(20/22) Installing pcre2 (10.40-r0)\n(21/22) Installing git (2.36.3-r0)\n(22/22) Installing musl-dev (1.2.3-r2)\nExecuting busybox-1.35.0-r17.trigger\nOK: 135 MiB in 36 packages\nRemoving intermediate container 2fc1975950d2\n ---> 090af0f5f59b\nStep 3/15 : WORKDIR /opt/src\n ---> Running in f51840c92d78\nRemoving intermediate container f51840c92d78\n ---> 61be904994bb\nStep 4/15 : ADD events events\n ---> 1c332bade300\nStep 5/15 : ADD registry registry\n ---> 7754967be5da\nStep 6/15 : ADD *.go go.mod go.sum ./\n ---> 905452ba9a76\nStep 7/15 : RUN go test -v ./registry &&     go build -o /opt/docker-registry-ui *.go\n ---> Running in 9bd27e6a29e3\n\u001b[91mgo: downloading github.com/parnurzeal/gorequest v0.2.16\ngo: downloading github.com/tidwall/gjson v1.14.3\ngo: downloading github.com/sirupsen/logrus v1.9.0\n\u001b[0m\u001b[91mgo: downloading github.com/smartystreets/goconvey v1.7.2\n\u001b[0m\u001b[91mgo: downloading github.com/tidwall/pretty v1.2.0\n\u001b[0m\u001b[91mgo: downloading github.com/tidwall/match v1.1.1\n\u001b[0m\u001b[91mgo: downloading moul.io/http2curl v1.0.0\n\u001b[0m\u001b[91mgo: downloading golang.org/x/net v0.0.0-20211015210444-4f30a5c0130f\ngo: downloading github.com/pkg/errors v0.9.1\n\u001b[0m\u001b[91mgo: downloading golang.org/x/sys v0.0.0-20220715151400-c0bba94af5f8\n\u001b[0m\u001b[91mgo: downloading github.com/jtolds/gls v4.20.0+incompatible\ngo: downloading github.com/smartystreets/assertions v1.2.0\n\u001b[0m=== RUN   TestKeepMinCount\n\n  Test keep min count logic ✔✔\n\n\n2 total assertions\n\n--- PASS: TestKeepMinCount (0.00s)\n=== RUN   TestSortedMapKeys\n\n  Sort map keys ✔✔✔\n\n\n5 total assertions\n\n--- PASS: TestSortedMapKeys (0.00s)\n=== RUN   TestPrettySize\n\n  Format bytes ✔✔✔✔✔\n\n\n10 total assertions\n\n--- PASS: TestPrettySize (0.00s)\n=== RUN   TestItemInSlice\n\n  Check whether element is in slice ✔✔✔✔\n\n\n14 total assertions\n\n--- PASS: TestItemInSlice (0.00s)\nPASS\nok  \tgithub.com/quiq/docker-registry-ui/registry\t0.007s\n\u001b[91mgo: downloading github.com/labstack/echo/v4 v4.8.0\ngo: downloading github.com/robfig/cron v1.2.0\n\u001b[0m\u001b[91mgo: downloading gopkg.in/yaml.v2 v2.4.0\n\u001b[0m\u001b[91mgo: downloading github.com/CloudyKit/jet v2.1.3-0.20180809161101-62edd43e4f88+incompatible\n\u001b[0m\u001b[91mgo: downloading github.com/go-sql-driver/mysql v1.6.0\n\u001b[0m\u001b[91mgo: downloading github.com/mattn/go-sqlite3 v1.14.15\n\u001b[0m\u001b[91mgo: downloading github.com/CloudyKit/fastprinter v0.0.0-20200109182630-33d98a066a53\n\u001b[0m\u001b[91mgo: downloading github.com/golang-jwt/jwt v3.2.2+incompatible\n\u001b[0m\u001b[91mgo: downloading golang.org/x/crypto v0.0.0-20210817164053-32db794688a5\ngo: downloading github.com/labstack/gommon v0.3.1\ngo: downloading golang.org/x/text v0.3.7\n\u001b[0m\u001b[91mgo: downloading golang.org/x/time v0.0.0-20201208040808-7e3f01d25324\n\u001b[0m\u001b[91mgo: downloading github.com/valyala/fasttemplate v1.2.1\n\u001b[0m\u001b[91mgo: downloading github.com/valyala/bytebufferpool v1.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/mattn/go-isatty v0.0.14\ngo: downloading github.com/mattn/go-colorable v0.1.11\n\u001b[0mRemoving intermediate container 9bd27e6a29e3\n ---> 5315058651a1\nStep 8/15 : FROM alpine:3.16\n ---> bfe296a52501\nStep 9/15 : WORKDIR /opt\n ---> Running in 019a645cc9b5\nRemoving intermediate container 019a645cc9b5\n ---> fb3656e68fc1\nStep 10/15 : RUN apk add --no-cache ca-certificates tzdata &&     mkdir /opt/data &&     chown nobody /opt/data\n ---> Running in 5bc3ed0f3371\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/community/x86_64/APKINDEX.tar.gz\n(1/2) Installing ca-certificates (20220614-r0)\n(2/2) Installing tzdata (2022f-r1)\nExecuting busybox-1.35.0-r17.trigger\nExecuting ca-certificates-20220614-r0.trigger\nOK: 9 MiB in 16 packages\nRemoving intermediate container 5bc3ed0f3371\n ---> d70234a1dfca\nStep 11/15 : ADD templates /opt/templates\n ---> 4d79ca3adb27\nStep 12/15 : ADD static /opt/static\n ---> de14e17490fb\nStep 13/15 : COPY --from=builder /opt/docker-registry-ui /opt/\n ---> 404b0ee53b73\nStep 14/15 : USER nobody\n ---> Running in 789ff0808a3c\nRemoving intermediate container 789ff0808a3c\n ---> ce33e1a22448\nStep 15/15 : ENTRYPOINT [\"/opt/docker-registry-ui\"]\n ---> Running in 7296cfd4528b\nRemoving intermediate container 7296cfd4528b\n ---> f71ee21aa853\nSuccessfully built f71ee21aa853\nSuccessfully tagged docker-registry-ui:latest\n","stderr":"","imageSize":24280367},"endTime":1672173977205}