{"repository":"https://github.com/rvflash/goup","dockerfilePath":"Dockerfile","startTime":1672548993420,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/rvflash/goup'...\n","error":null,"commit":"3ce314763f79a3f88d6f8612e64d10ce82ac6deb"},"originalBuild":{"startTimestamp":1672548994221,"endTimestamp":1672549113769,"error":null,"stdout":"Sending build context to Docker daemon    427kB\r\r\nStep 1/19 : FROM golang:1.13 as modules\n1.13: Pulling from library/golang\nd6ff36c9ec48: Pulling fs layer\nc958d65b3090: Pulling fs layer\nedaf0a6b092f: Pulling fs layer\n80931cf68816: Pulling fs layer\n813643441356: Pulling fs layer\n799f41bb59c9: Pulling fs layer\n16b5038bccc8: Pulling fs layer\n799f41bb59c9: Waiting\n80931cf68816: Waiting\n813643441356: Waiting\n16b5038bccc8: Waiting\nc958d65b3090: Verifying Checksum\nc958d65b3090: Download complete\nedaf0a6b092f: Verifying Checksum\nedaf0a6b092f: Download complete\nd6ff36c9ec48: Download complete\n813643441356: Verifying Checksum\n813643441356: Download complete\n80931cf68816: Verifying Checksum\n80931cf68816: Download complete\n16b5038bccc8: Download complete\n799f41bb59c9: Download complete\nd6ff36c9ec48: Pull complete\nc958d65b3090: Pull complete\nedaf0a6b092f: Pull complete\n80931cf68816: Pull complete\n813643441356: Pull complete\n799f41bb59c9: Pull complete\n16b5038bccc8: Pull complete\nDigest: sha256:8ebb6d5a48deef738381b56b1d4cd33d99a5d608e0d03c5fe8dfa3f68d41a1f8\nStatus: Downloaded newer image for golang:1.13\n ---> d6f3656320fe\nStep 2/19 : RUN apt-get update && apt-get install -y git\n ---> Running in 4737d50faaea\nGet:1 http://security.debian.org/debian-security buster/updates InRelease [34.8 kB]\nGet:2 http://deb.debian.org/debian buster InRelease [122 kB]\nGet:3 http://deb.debian.org/debian buster-updates InRelease [56.6 kB]\nGet:4 http://security.debian.org/debian-security buster/updates/main amd64 Packages [422 kB]\nGet:5 http://deb.debian.org/debian buster/main amd64 Packages [7909 kB]\nGet:6 http://deb.debian.org/debian buster-updates/main amd64 Packages [8788 B]\nFetched 8553 kB in 2s (5681 kB/s)\nReading package lists...\nReading package lists...\nBuilding dependency tree...\nReading state information...\nSuggested packages:\n  gettext-base git-daemon-run | git-daemon-sysvinit git-doc git-el git-email\n  git-gui gitk gitweb git-cvs git-mediawiki git-svn\nRecommended packages:\n  patch less\nThe following packages will be upgraded:\n  git\n1 upgraded, 0 newly installed, 0 to remove and 67 not upgraded.\nNeed to get 5634 kB of archives.\nAfter this operation, 33.8 kB of additional disk space will be used.\nGet:1 http://security.debian.org/debian-security buster/updates/main amd64 git amd64 1:2.20.1-2+deb10u6 [5634 kB]\n\u001b[91mdebconf: delaying package configuration, since apt-utils is not installed\n\u001b[0mFetched 5634 kB in 0s (80.7 MB/s)\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 15410 files and directories currently installed.)\r\nPreparing to unpack .../git_1%3a2.20.1-2+deb10u6_amd64.deb ...\r\nUnpacking git (1:2.20.1-2+deb10u6) over (1:2.20.1-2+deb10u3) ...\r\nSetting up git (1:2.20.1-2+deb10u6) ...\r\nRemoving intermediate container 4737d50faaea\n ---> b107ff678411\nStep 3/19 : ADD go.mod go.sum /mod/\n ---> f0b72214e6d3\nStep 4/19 : RUN cd /mod && go mod download\n ---> Running in 41cc9293c0c4\n\u001b[91mgo: finding github.com/alcortesm/tgz v0.0.0-20161220082320-9c5fe88206d7\n\u001b[0m\u001b[91mgo: finding github.com/anmitsu/go-shlex v0.0.0-20161002113705-648efa622239\n\u001b[0m\u001b[91mgo: finding github.com/armon/go-socks5 v0.0.0-20160902184237-e75332964ef5\n\u001b[0m\u001b[91mgo: finding github.com/creack/pty v1.1.7\n\u001b[0m\u001b[91mgo: finding github.com/davecgh/go-spew v1.1.1\n\u001b[0m\u001b[91mgo: finding github.com/emirpasic/gods v1.12.0\n\u001b[0m\u001b[91mgo: finding github.com/fatih/color v1.13.0\n\u001b[0m\u001b[91mgo: finding github.com/flynn/go-shlex v0.0.0-20150515145356-3f9db97f8568\n\u001b[0m\u001b[91mgo: finding github.com/gliderlabs/ssh v0.2.2\n\u001b[0m\u001b[91mgo: finding github.com/golang/mock v1.6.0\n\u001b[0m\u001b[91mgo: finding github.com/google/go-cmp v0.3.0\n\u001b[0m\u001b[91mgo: finding github.com/jbenet/go-context v0.0.0-20150711004518-d14ea06fba99\n\u001b[0m\u001b[91mgo: finding github.com/jessevdk/go-flags v1.4.0\n\u001b[0m\u001b[91mgo: finding github.com/kevinburke/ssh_config v0.0.0-20190725054713-01f96b0aa0cd\n\u001b[0m\u001b[91mgo: finding github.com/kr/pretty v0.1.0\n\u001b[0m\u001b[91mgo: finding github.com/kr/pty v1.1.8\n\u001b[0m\u001b[91mgo: finding github.com/kr/text v0.1.0\n\u001b[0m\u001b[91mgo: finding github.com/matryer/is v1.4.0\n\u001b[0m\u001b[91mgo: finding github.com/mattn/go-colorable v0.1.9\n\u001b[0m\u001b[91mgo: finding github.com/mattn/go-isatty v0.0.14\n\u001b[0m\u001b[91mgo: finding github.com/mitchellh/go-homedir v1.1.0\n\u001b[0m\u001b[91mgo: finding github.com/pelletier/go-buffruneio v0.2.0\n\u001b[0m\u001b[91mgo: finding github.com/pkg/errors v0.8.1\n\u001b[0m\u001b[91mgo: finding github.com/pmezard/go-difflib v1.0.0\n\u001b[0m\u001b[91mgo: finding github.com/rvflash/workr v0.1.0\n\u001b[0m\u001b[91mgo: finding github.com/sergi/go-diff v1.0.0\n\u001b[0m\u001b[91mgo: finding github.com/src-d/gcfg v1.4.0\n\u001b[0m\u001b[91mgo: finding github.com/stretchr/objx v0.2.0\n\u001b[0m\u001b[91mgo: finding github.com/stretchr/testify v1.3.0\n\u001b[0m\u001b[91mgo: finding github.com/xanzy/ssh-agent v0.2.1\n\u001b[0m\u001b[91mgo: finding github.com/yuin/goldmark v1.3.5\n\u001b[0m\u001b[91mgo: finding golang.org/x/crypto v0.0.0-20191011191535-87dc89f01550\n\u001b[0m\u001b[91mgo: finding golang.org/x/mod v0.5.1\n\u001b[0m\u001b[91mgo: finding golang.org/x/net v0.0.0-20210405180319-a5a99cb37ef4\n\u001b[0m\u001b[91mgo: finding golang.org/x/sync v0.0.0-20210220032951-036812b2e83c\n\u001b[0m\u001b[91mgo: finding golang.org/x/sys v0.0.0-20210630005230-0f9fa26af87c\n\u001b[0m\u001b[91mgo: finding golang.org/x/term v0.0.0-20201126162022-7de9c90e9dd1\n\u001b[0m\u001b[91mgo: finding golang.org/x/text v0.3.3\n\u001b[0m\u001b[91mgo: finding golang.org/x/tools v0.1.1\n\u001b[0m\u001b[91mgo: finding golang.org/x/xerrors v0.0.0-20200804184101-5ec99f83aff1\n\u001b[0m\u001b[91mgo: finding gopkg.in/check.v1 v1.0.0-20180628173108-788fd7840127\n\u001b[0m\u001b[91mgo: finding gopkg.in/src-d/go-billy.v4 v4.3.2\n\u001b[0m\u001b[91mgo: finding gopkg.in/src-d/go-git-fixtures.v3 v3.5.0\n\u001b[0m\u001b[91mgo: finding gopkg.in/src-d/go-git.v4 v4.13.1\n\u001b[0m\u001b[91mgo: finding gopkg.in/warnings.v0 v0.1.2\n\u001b[0mRemoving intermediate container 41cc9293c0c4\n ---> cef44565b939\nStep 5/19 : FROM golang:1.13 as builder\n ---> d6f3656320fe\nStep 6/19 : COPY --from=modules /go/pkg /go/pkg\n ---> 2366690e6cbe\nStep 7/19 : RUN useradd -u 10001 goup\n ---> Running in 5c014c3f24e8\nRemoving intermediate container 5c014c3f24e8\n ---> a9efc84398ef\nStep 8/19 : RUN mkdir -p /app\n ---> Running in 88303cd82d43\nRemoving intermediate container 88303cd82d43\n ---> ea1ccc3f7ab0\nStep 9/19 : ADD . /app\n ---> 50ca3f393f07\nStep 10/19 : WORKDIR /app\n ---> Running in 9000c6b43575\nRemoving intermediate container 9000c6b43575\n ---> 6f79307f2848\nStep 11/19 : ARG APP_VERSION=v0.0.1-noop\n ---> Running in 913b045e40b2\nRemoving intermediate container 913b045e40b2\n ---> af14f0d73e35\nStep 12/19 : RUN GOOS=linux GOARCH=amd64 GO111MODULE=on CGO_ENABLED=0 go build     -ldflags \"-X main.buildVersion=${APP_VERSION}\"     -o bin/goup .\n ---> Running in 493185075e3e\nRemoving intermediate container 493185075e3e\n ---> ab7bcdd84570\nStep 13/19 : FROM scratch\n ---> \nStep 14/19 : COPY --from=builder /etc/ssl/certs/ca-certificates.crt /etc/ssl/certs/\n ---> 664acf9de6e3\nStep 15/19 : COPY --from=builder /etc/passwd /etc/passwd\n ---> b0416420a682\nStep 16/19 : USER goup\n ---> Running in 785c123df02d\nRemoving intermediate container 785c123df02d\n ---> 1996a73bd0c9\nStep 17/19 : COPY --from=builder /app/bin/goup /bin/goup\n ---> 4e0e60c379b3\nStep 18/19 : WORKDIR /pkg\n ---> Running in b4db86e18e1e\nRemoving intermediate container b4db86e18e1e\n ---> 45cc84263564\nStep 19/19 : CMD [\"/bin/goup\"]\n ---> Running in ed742c2ea415\nRemoving intermediate container ed742c2ea415\n ---> d1f2c6af1be2\nSuccessfully built d1f2c6af1be2\nSuccessfully tagged goup:latest\n","stderr":"","imageSize":11541624},"repair":{"violations":[{"name":"ruleAptGetInstallUseNoRec","position":{"start":4,"end":4,"columnStart":22,"columnEnd":44}},{"name":"ruleAptGetInstallThenRemoveAptLists","position":{"start":4,"end":4,"columnStart":22,"columnEnd":44}}],"repairedDockerfile":"# Download the dependencies (mod)\nFROM golang:1.13 as modules\n\n## Linux dependencies.\nRUN apt-get update && apt-get install --no-install-recommends -y git\n\nADD go.mod go.sum /mod/\nRUN cd /mod && go mod download\n\n\n# Build the application (app)\nFROM golang:1.13 as builder\nCOPY --from=modules /go/pkg /go/pkg\n\n## Add a non-privileged user\nRUN useradd -u 10001 goup\n\n## Copy sources\nRUN mkdir -p /app\nADD . /app\nWORKDIR /app\n\n## Build the binary\nARG APP_VERSION=v0.0.1-noop\nRUN GOOS=linux GOARCH=amd64 GO111MODULE=on CGO_ENABLED=0 go build \\\n    -ldflags \"-X main.buildVersion=${APP_VERSION}\" \\\n    -o bin/goup .\n\n\n# Run the binary\nFROM scratch\n\n## Certificates and privileges\nCOPY --from=builder /etc/ssl/certs/ca-certificates.crt /etc/ssl/certs/\nCOPY --from=builder /etc/passwd /etc/passwd\nUSER goup\n\n## Finally exposes the command line tool\nCOPY --from=builder /app/bin/goup /bin/goup\nWORKDIR /pkg\nCMD [\"/bin/goup\"]"},"repairedBuild":{"startTimestamp":1672549114209,"endTimestamp":1672549178180,"error":null,"stdout":"Sending build context to Docker daemon    427kB\r\r\nStep 1/19 : FROM golang:1.13 as modules\n ---> d6f3656320fe\nStep 2/19 : RUN apt-get update && apt-get install --no-install-recommends -y git\n ---> Running in 1debca285575\nGet:1 http://security.debian.org/debian-security buster/updates InRelease [34.8 kB]\nGet:2 http://deb.debian.org/debian buster InRelease [122 kB]\nGet:3 http://deb.debian.org/debian buster-updates InRelease [56.6 kB]\nGet:4 http://security.debian.org/debian-security buster/updates/main amd64 Packages [422 kB]\nGet:5 http://deb.debian.org/debian buster/main amd64 Packages [7909 kB]\nGet:6 http://deb.debian.org/debian buster-updates/main amd64 Packages [8788 B]\nFetched 8553 kB in 2s (4009 kB/s)\nReading package lists...\nReading package lists...\nBuilding dependency tree...\nReading state information...\nSuggested packages:\n  gettext-base git-daemon-run | git-daemon-sysvinit git-doc git-el git-email\n  git-gui gitk gitweb git-cvs git-mediawiki git-svn\nRecommended packages:\n  patch less\nThe following packages will be upgraded:\n  git\n1 upgraded, 0 newly installed, 0 to remove and 67 not upgraded.\nNeed to get 5634 kB of archives.\nAfter this operation, 33.8 kB of additional disk space will be used.\nGet:1 http://security.debian.org/debian-security buster/updates/main amd64 git amd64 1:2.20.1-2+deb10u6 [5634 kB]\n\u001b[91mdebconf: delaying package configuration, since apt-utils is not installed\n\u001b[0mFetched 5634 kB in 0s (37.4 MB/s)\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 15410 files and directories currently installed.)\r\nPreparing to unpack .../git_1%3a2.20.1-2+deb10u6_amd64.deb ...\r\nUnpacking git (1:2.20.1-2+deb10u6) over (1:2.20.1-2+deb10u3) ...\r\nSetting up git (1:2.20.1-2+deb10u6) ...\r\nRemoving intermediate container 1debca285575\n ---> e5a929a92709\nStep 3/19 : ADD go.mod go.sum /mod/\n ---> ebb53916e8e9\nStep 4/19 : RUN cd /mod && go mod download\n ---> Running in 1072ed9fa407\n\u001b[91mgo: finding github.com/alcortesm/tgz v0.0.0-20161220082320-9c5fe88206d7\n\u001b[0m\u001b[91mgo: finding github.com/anmitsu/go-shlex v0.0.0-20161002113705-648efa622239\n\u001b[0m\u001b[91mgo: finding github.com/armon/go-socks5 v0.0.0-20160902184237-e75332964ef5\n\u001b[0m\u001b[91mgo: finding github.com/creack/pty v1.1.7\n\u001b[0m\u001b[91mgo: finding github.com/davecgh/go-spew v1.1.1\n\u001b[0m\u001b[91mgo: finding github.com/emirpasic/gods v1.12.0\n\u001b[0m\u001b[91mgo: finding github.com/fatih/color v1.13.0\n\u001b[0m\u001b[91mgo: finding github.com/flynn/go-shlex v0.0.0-20150515145356-3f9db97f8568\n\u001b[0m\u001b[91mgo: finding github.com/gliderlabs/ssh v0.2.2\n\u001b[0m\u001b[91mgo: finding github.com/golang/mock v1.6.0\n\u001b[0m\u001b[91mgo: finding github.com/google/go-cmp v0.3.0\n\u001b[0m\u001b[91mgo: finding github.com/jbenet/go-context v0.0.0-20150711004518-d14ea06fba99\n\u001b[0m\u001b[91mgo: finding github.com/jessevdk/go-flags v1.4.0\n\u001b[0m\u001b[91mgo: finding github.com/kevinburke/ssh_config v0.0.0-20190725054713-01f96b0aa0cd\n\u001b[0m\u001b[91mgo: finding github.com/kr/pretty v0.1.0\n\u001b[0m\u001b[91mgo: finding github.com/kr/pty v1.1.8\n\u001b[0m\u001b[91mgo: finding github.com/kr/text v0.1.0\n\u001b[0m\u001b[91mgo: finding github.com/matryer/is v1.4.0\n\u001b[0m\u001b[91mgo: finding github.com/mattn/go-colorable v0.1.9\n\u001b[0m\u001b[91mgo: finding github.com/mattn/go-isatty v0.0.14\n\u001b[0m\u001b[91mgo: finding github.com/mitchellh/go-homedir v1.1.0\n\u001b[0m\u001b[91mgo: finding github.com/pelletier/go-buffruneio v0.2.0\n\u001b[0m\u001b[91mgo: finding github.com/pkg/errors v0.8.1\n\u001b[0m\u001b[91mgo: finding github.com/pmezard/go-difflib v1.0.0\n\u001b[0m\u001b[91mgo: finding github.com/rvflash/workr v0.1.0\n\u001b[0m\u001b[91mgo: finding github.com/sergi/go-diff v1.0.0\n\u001b[0m\u001b[91mgo: finding github.com/src-d/gcfg v1.4.0\n\u001b[0m\u001b[91mgo: finding github.com/stretchr/objx v0.2.0\n\u001b[0m\u001b[91mgo: finding github.com/stretchr/testify v1.3.0\n\u001b[0m\u001b[91mgo: finding github.com/xanzy/ssh-agent v0.2.1\n\u001b[0m\u001b[91mgo: finding github.com/yuin/goldmark v1.3.5\n\u001b[0m\u001b[91mgo: finding golang.org/x/crypto v0.0.0-20191011191535-87dc89f01550\n\u001b[0m\u001b[91mgo: finding golang.org/x/mod v0.5.1\n\u001b[0m\u001b[91mgo: finding golang.org/x/net v0.0.0-20210405180319-a5a99cb37ef4\n\u001b[0m\u001b[91mgo: finding golang.org/x/sync v0.0.0-20210220032951-036812b2e83c\n\u001b[0m\u001b[91mgo: finding golang.org/x/sys v0.0.0-20210630005230-0f9fa26af87c\n\u001b[0m\u001b[91mgo: finding golang.org/x/term v0.0.0-20201126162022-7de9c90e9dd1\n\u001b[0m\u001b[91mgo: finding golang.org/x/text v0.3.3\n\u001b[0m\u001b[91mgo: finding golang.org/x/tools v0.1.1\n\u001b[0m\u001b[91mgo: finding golang.org/x/xerrors v0.0.0-20200804184101-5ec99f83aff1\n\u001b[0m\u001b[91mgo: finding gopkg.in/check.v1 v1.0.0-20180628173108-788fd7840127\n\u001b[0m\u001b[91mgo: finding gopkg.in/src-d/go-billy.v4 v4.3.2\n\u001b[0m\u001b[91mgo: finding gopkg.in/src-d/go-git-fixtures.v3 v3.5.0\n\u001b[0m\u001b[91mgo: finding gopkg.in/src-d/go-git.v4 v4.13.1\n\u001b[0m\u001b[91mgo: finding gopkg.in/warnings.v0 v0.1.2\n\u001b[0mRemoving intermediate container 1072ed9fa407\n ---> 9e704fde8c7c\nStep 5/19 : FROM golang:1.13 as builder\n ---> d6f3656320fe\nStep 6/19 : COPY --from=modules /go/pkg /go/pkg\n ---> 2273933f8a83\nStep 7/19 : RUN useradd -u 10001 goup\n ---> Running in ff433c7ba4dc\nRemoving intermediate container ff433c7ba4dc\n ---> f5cc3c27b5b5\nStep 8/19 : RUN mkdir -p /app\n ---> Running in 536f9aa3cba6\nRemoving intermediate container 536f9aa3cba6\n ---> 7493f2af863e\nStep 9/19 : ADD . /app\n ---> aa9daa02c0bc\nStep 10/19 : WORKDIR /app\n ---> Running in 0119110dbc81\nRemoving intermediate container 0119110dbc81\n ---> 7efcca8626e2\nStep 11/19 : ARG APP_VERSION=v0.0.1-noop\n ---> Running in 16879df408b5\nRemoving intermediate container 16879df408b5\n ---> c3bcad6df67c\nStep 12/19 : RUN GOOS=linux GOARCH=amd64 GO111MODULE=on CGO_ENABLED=0 go build     -ldflags \"-X main.buildVersion=${APP_VERSION}\"     -o bin/goup .\n ---> Running in 8e1fc168e2f3\nRemoving intermediate container 8e1fc168e2f3\n ---> 1f8c02ff7cab\nStep 13/19 : FROM scratch\n ---> \nStep 14/19 : COPY --from=builder /etc/ssl/certs/ca-certificates.crt /etc/ssl/certs/\n ---> 439f43f62d7c\nStep 15/19 : COPY --from=builder /etc/passwd /etc/passwd\n ---> e9238e483dd8\nStep 16/19 : USER goup\n ---> Running in 98af3960b9a1\nRemoving intermediate container 98af3960b9a1\n ---> 949a919a43a0\nStep 17/19 : COPY --from=builder /app/bin/goup /bin/goup\n ---> 22c117049775\nStep 18/19 : WORKDIR /pkg\n ---> Running in 83c52580cd10\nRemoving intermediate container 83c52580cd10\n ---> 0e02cac21c96\nStep 19/19 : CMD [\"/bin/goup\"]\n ---> Running in 131972b1ba8b\nRemoving intermediate container 131972b1ba8b\n ---> 38534834b894\nSuccessfully built 38534834b894\nSuccessfully tagged goup:latest\n","stderr":"","imageSize":11541624},"endTime":1672549178424}