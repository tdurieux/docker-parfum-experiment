{"repository":"https://github.com/databacker/mysql-backup","dockerfilePath":"Dockerfile","startTime":1672902069935,"endTime":1672902216944,"clone":{"startTime":1672902069935,"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/databacker/mysql-backup'...\n","error":null,"endTime":1672902070709,"commit":"b93e1fc432fcb913231f3dc426b54a2ca6725ec7"},"originalBuild":{"startTime":1672902070804,"endTime":1672902178032,"error":null,"stdout":"Sending build context to Docker daemon  1.093MB\r\r\nStep 1/9 : FROM alpine:3.15\n3.15: Pulling from library/alpine\n9621f1afde84: Already exists\nDigest: sha256:cf34c62ee8eb3fe8aa24c1fab45d7e9d12768d945c3f5a6fd6a63d901e898479\nStatus: Downloaded newer image for alpine:3.15\n ---> c4fc93816858\nStep 2/9 : LABEL org.opencontainers.image.authors=\"https://github.com/deitch\"\n ---> Running in 28377313c0ad\nRemoving intermediate container 28377313c0ad\n ---> 05aabca1423f\nStep 3/9 : RUN apk add --update 'mariadb-client>10.3.15' mariadb-connector-c bash python3 py3-pip samba-client shadow openssl coreutils &&     rm -rf /var/cache/apk/* &&     touch /etc/samba/smb.conf &&     pip3 install awscli\n ---> Running in cd5700860bd2\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/community/x86_64/APKINDEX.tar.gz\n(1/78) Installing ncurses-terminfo-base (6.3_p20211120-r1)\n(2/78) Installing ncurses-libs (6.3_p20211120-r1)\n(3/78) Installing readline (8.1.1-r0)\n(4/78) Installing bash (5.1.16-r0)\nExecuting bash-5.1.16-r0.post-install\n(5/78) Installing libacl (2.2.53-r0)\n(6/78) Installing libattr (2.5.1-r1)\n(7/78) Installing skalibs (2.11.0.0-r0)\n(8/78) Installing s6-ipcserver (2.11.0.0-r0)\n(9/78) Installing utmps (0.1.0.3-r0)\nExecuting utmps-0.1.0.3-r0.pre-install\n(10/78) Installing coreutils (9.0-r2)\n(11/78) Installing mariadb-common (10.6.10-r0)\n(12/78) Installing libgcc (10.3.1_git20211027-r0)\n(13/78) Installing libstdc++ (10.3.1_git20211027-r0)\n(14/78) Installing mariadb-client (10.6.10-r0)\n(15/78) Installing mariadb-connector-c (3.1.13-r2)\n(16/78) Installing openssl (1.1.1s-r1)\n(17/78) Installing libbz2 (1.0.8-r1)\n(18/78) Installing expat (2.5.0-r0)\n(19/78) Installing libffi (3.4.2-r1)\n(20/78) Installing gdbm (1.22-r0)\n(21/78) Installing xz-libs (5.2.5-r1)\n(22/78) Installing mpdecimal (2.5.1-r1)\n(23/78) Installing sqlite-libs (3.36.0-r0)\n(24/78) Installing python3 (3.9.16-r0)\n(25/78) Installing py3-appdirs (1.4.4-r2)\n(26/78) Installing py3-certifi (2020.12.5-r1)\n(27/78) Installing py3-charset-normalizer (2.0.7-r0)\n(28/78) Installing py3-idna (3.3-r0)\n(29/78) Installing py3-urllib3 (1.26.7-r0)\n(30/78) Installing py3-requests (2.26.0-r1)\n(31/78) Installing py3-msgpack (1.0.2-r1)\n(32/78) Installing py3-lockfile (0.12.2-r4)\n(33/78) Installing py3-cachecontrol (0.12.10-r0)\n(34/78) Installing py3-colorama (0.4.4-r1)\n(35/78) Installing py3-contextlib2 (21.6.0-r1)\n(36/78) Installing py3-distlib (0.3.3-r0)\n(37/78) Installing py3-distro (1.6.0-r0)\n(38/78) Installing py3-six (1.16.0-r0)\n(39/78) Installing py3-webencodings (0.5.1-r4)\n(40/78) Installing py3-html5lib (1.1-r1)\n(41/78) Installing py3-parsing (2.4.7-r2)\n(42/78) Installing py3-packaging (20.9-r1)\n(43/78) Installing py3-tomli (1.2.2-r0)\n(44/78) Installing py3-pep517 (0.12.0-r0)\n(45/78) Installing py3-progress (1.6-r0)\n(46/78) Installing py3-retrying (1.3.3-r2)\n(47/78) Installing py3-ordered-set (4.0.2-r2)\n(48/78) Installing py3-setuptools (52.0.0-r4)\n(49/78) Installing py3-toml (0.10.2-r2)\n(50/78) Installing py3-pip (20.3.4-r1)\n(51/78) Installing samba-common (4.15.5-r0)\n(52/78) Installing libcap (2.61-r0)\n(53/78) Installing gmp (6.2.1-r1)\n(54/78) Installing nettle (3.7.3-r0)\n(55/78) Installing p11-kit (0.24.0-r1)\n(56/78) Installing libtasn1 (4.18.0-r1)\n(57/78) Installing libunistring (0.9.10-r1)\n(58/78) Installing gnutls (3.7.1-r1)\n(59/78) Installing talloc (2.3.3-r0)\n(60/78) Installing tevent (0.11.0-r0)\n(61/78) Installing samba-util-libs (4.15.5-r0)\n(62/78) Installing jansson (2.14-r0)\n(63/78) Installing libsasl (2.1.28-r0)\n(64/78) Installing libldap (2.6.2-r0)\n(65/78) Installing lmdb (0.9.29-r1)\n(66/78) Installing tdb-libs (1.4.5-r0)\n(67/78) Installing ldb (2.4.1-r0)\n(68/78) Installing linux-pam (1.5.2-r0)\n(69/78) Installing popt (1.18-r0)\n(70/78) Installing libwbclient (4.15.5-r0)\n(71/78) Installing samba-libs (4.15.5-r0)\n(72/78) Installing lz4-libs (1.9.3-r1)\n(73/78) Installing zstd-libs (1.5.0-r0)\n(74/78) Installing libarchive (3.6.1-r1)\n(75/78) Installing samba-client-libs (4.15.5-r0)\n(76/78) Installing libsmbclient (4.15.5-r0)\n(77/78) Installing samba-client (4.15.5-r0)\n(78/78) Installing shadow (4.8.1-r1)\nExecuting busybox-1.34.1-r7.trigger\nOK: 142 MiB in 92 packages\nCollecting awscli\n  Downloading awscli-1.27.43-py3-none-any.whl (4.0 MB)\nCollecting rsa<4.8,>=3.1.2\n  Downloading rsa-4.7.2-py3-none-any.whl (34 kB)\nRequirement already satisfied: colorama<0.4.5,>=0.2.5 in /usr/lib/python3.9/site-packages (from awscli) (0.4.4)\nCollecting s3transfer<0.7.0,>=0.6.0\n  Downloading s3transfer-0.6.0-py3-none-any.whl (79 kB)\nCollecting docutils<0.17,>=0.10\n  Downloading docutils-0.16-py2.py3-none-any.whl (548 kB)\nCollecting PyYAML<5.5,>=3.10\n  Downloading PyYAML-5.4.1.tar.gz (175 kB)\n  Installing build dependencies: started\n  Installing build dependencies: finished with status 'done'\n  Getting requirements to build wheel: started\n  Getting requirements to build wheel: finished with status 'done'\n    Preparing wheel metadata: started\n    Preparing wheel metadata: finished with status 'done'\nCollecting botocore==1.29.43\n  Downloading botocore-1.29.43-py3-none-any.whl (10.3 MB)\nCollecting jmespath<2.0.0,>=0.7.1\n  Downloading jmespath-1.0.1-py3-none-any.whl (20 kB)\nRequirement already satisfied: urllib3<1.27,>=1.25.4 in /usr/lib/python3.9/site-packages (from botocore==1.29.43->awscli) (1.26.7)\nCollecting python-dateutil<3.0.0,>=2.1\n  Downloading python_dateutil-2.8.2-py2.py3-none-any.whl (247 kB)\nRequirement already satisfied: six>=1.5 in /usr/lib/python3.9/site-packages (from python-dateutil<3.0.0,>=2.1->botocore==1.29.43->awscli) (1.16.0)\nCollecting pyasn1>=0.1.3\n  Downloading pyasn1-0.4.8-py2.py3-none-any.whl (77 kB)\nBuilding wheels for collected packages: PyYAML\n  Building wheel for PyYAML (PEP 517): started\n  Building wheel for PyYAML (PEP 517): finished with status 'done'\n  Created wheel for PyYAML: filename=PyYAML-5.4.1-cp39-cp39-linux_x86_64.whl size=45656 sha256=36e07eca2be92ab2d3555f6b0676ad7d83d3a123f9ce5e4c766be46e775f9d30\n  Stored in directory: /root/.cache/pip/wheels/b7/a5/c4/504d913c2a55bb09c607541578ec5f844d1ff33467abe93ba5\nSuccessfully built PyYAML\nInstalling collected packages: python-dateutil, jmespath, pyasn1, botocore, s3transfer, rsa, PyYAML, docutils, awscli\nSuccessfully installed PyYAML-5.4.1 awscli-1.27.43 botocore-1.29.43 docutils-0.16 jmespath-1.0.1 pyasn1-0.4.8 python-dateutil-2.8.2 rsa-4.7.2 s3transfer-0.6.0\nRemoving intermediate container cd5700860bd2\n ---> 00e072b165b5\nStep 4/9 : RUN groupadd -g 1005 appuser &&     useradd -r -u 1005 -g appuser appuser\n ---> Running in 6e83f6730144\nRemoving intermediate container 6e83f6730144\n ---> fc1e9a7a60ec\nStep 5/9 : RUN mkdir -p /var/cache/samba && chmod 0755 /var/cache/samba && chown appuser /var/cache/samba && chown appuser /var/lib/samba/private\n ---> Running in 34c6ac7e72bf\nRemoving intermediate container 34c6ac7e72bf\n ---> 2f3d193edc0e\nStep 6/9 : USER appuser\n ---> Running in d305d9c10c01\nRemoving intermediate container d305d9c10c01\n ---> 12e61e951490\nStep 7/9 : COPY functions.sh /\n ---> baa8744dc76d\nStep 8/9 : COPY entrypoint /entrypoint\n ---> 43690da0b415\nStep 9/9 : ENTRYPOINT [\"/entrypoint\"]\n ---> Running in e3b8bb987a45\nRemoving intermediate container e3b8bb987a45\n ---> d7a1a9ff9e21\nSuccessfully built d7a1a9ff9e21\nSuccessfully tagged mysql-backup:latest\n","stderr":"","imageSize":243714810},"repair":{"startTime":1672902178100,"endTime":1672902178181,"violations":[{"name":"pipUseNoCacheDir","position":{"start":9,"end":9,"columnStart":4,"columnEnd":23}}],"repairedDockerfile":"# mysql backup image\nFROM alpine:3.15\nLABEL org.opencontainers.image.authors=\"https://github.com/deitch\"\n\n# install the necessary client\n# the mysql-client must be 10.3.15 or later\nRUN apk add --update 'mariadb-client>10.3.15' mariadb-connector-c bash python3 py3-pip samba-client shadow openssl coreutils && \\\n    rm -rf /var/cache/apk/* && \\\n    touch /etc/samba/smb.conf && \\\n    pip3 install --no-cache-dir awscli\n\n# set us up to run as non-root user\nRUN groupadd -g 1005 appuser && \\\n    useradd -r -u 1005 -g appuser appuser\n# ensure smb stuff works correctly\nRUN mkdir -p /var/cache/samba && chmod 0755 /var/cache/samba && chown appuser /var/cache/samba && chown appuser /var/lib/samba/private\nUSER appuser\n\n# install the entrypoint\nCOPY functions.sh /\nCOPY entrypoint /entrypoint\n\n# start\nENTRYPOINT [\"/entrypoint\"]\n"},"repairedBuild":{"startTime":1672902178662,"endTime":1672902216476,"error":null,"stdout":"Sending build context to Docker daemon  1.093MB\r\r\nStep 1/9 : FROM alpine:3.15\n ---> c4fc93816858\nStep 2/9 : LABEL org.opencontainers.image.authors=\"https://github.com/deitch\"\n ---> Running in e80b39896659\nRemoving intermediate container e80b39896659\n ---> 518451077ca4\nStep 3/9 : RUN apk add --update 'mariadb-client>10.3.15' mariadb-connector-c bash python3 py3-pip samba-client shadow openssl coreutils &&     rm -rf /var/cache/apk/* &&     touch /etc/samba/smb.conf &&     pip3 install --no-cache-dir awscli\n ---> Running in 2795f15267f1\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/community/x86_64/APKINDEX.tar.gz\n(1/78) Installing ncurses-terminfo-base (6.3_p20211120-r1)\n(2/78) Installing ncurses-libs (6.3_p20211120-r1)\n(3/78) Installing readline (8.1.1-r0)\n(4/78) Installing bash (5.1.16-r0)\nExecuting bash-5.1.16-r0.post-install\n(5/78) Installing libacl (2.2.53-r0)\n(6/78) Installing libattr (2.5.1-r1)\n(7/78) Installing skalibs (2.11.0.0-r0)\n(8/78) Installing s6-ipcserver (2.11.0.0-r0)\n(9/78) Installing utmps (0.1.0.3-r0)\nExecuting utmps-0.1.0.3-r0.pre-install\n(10/78) Installing coreutils (9.0-r2)\n(11/78) Installing mariadb-common (10.6.10-r0)\n(12/78) Installing libgcc (10.3.1_git20211027-r0)\n(13/78) Installing libstdc++ (10.3.1_git20211027-r0)\n(14/78) Installing mariadb-client (10.6.10-r0)\n(15/78) Installing mariadb-connector-c (3.1.13-r2)\n(16/78) Installing openssl (1.1.1s-r1)\n(17/78) Installing libbz2 (1.0.8-r1)\n(18/78) Installing expat (2.5.0-r0)\n(19/78) Installing libffi (3.4.2-r1)\n(20/78) Installing gdbm (1.22-r0)\n(21/78) Installing xz-libs (5.2.5-r1)\n(22/78) Installing mpdecimal (2.5.1-r1)\n(23/78) Installing sqlite-libs (3.36.0-r0)\n(24/78) Installing python3 (3.9.16-r0)\n(25/78) Installing py3-appdirs (1.4.4-r2)\n(26/78) Installing py3-certifi (2020.12.5-r1)\n(27/78) Installing py3-charset-normalizer (2.0.7-r0)\n(28/78) Installing py3-idna (3.3-r0)\n(29/78) Installing py3-urllib3 (1.26.7-r0)\n(30/78) Installing py3-requests (2.26.0-r1)\n(31/78) Installing py3-msgpack (1.0.2-r1)\n(32/78) Installing py3-lockfile (0.12.2-r4)\n(33/78) Installing py3-cachecontrol (0.12.10-r0)\n(34/78) Installing py3-colorama (0.4.4-r1)\n(35/78) Installing py3-contextlib2 (21.6.0-r1)\n(36/78) Installing py3-distlib (0.3.3-r0)\n(37/78) Installing py3-distro (1.6.0-r0)\n(38/78) Installing py3-six (1.16.0-r0)\n(39/78) Installing py3-webencodings (0.5.1-r4)\n(40/78) Installing py3-html5lib (1.1-r1)\n(41/78) Installing py3-parsing (2.4.7-r2)\n(42/78) Installing py3-packaging (20.9-r1)\n(43/78) Installing py3-tomli (1.2.2-r0)\n(44/78) Installing py3-pep517 (0.12.0-r0)\n(45/78) Installing py3-progress (1.6-r0)\n(46/78) Installing py3-retrying (1.3.3-r2)\n(47/78) Installing py3-ordered-set (4.0.2-r2)\n(48/78) Installing py3-setuptools (52.0.0-r4)\n(49/78) Installing py3-toml (0.10.2-r2)\n(50/78) Installing py3-pip (20.3.4-r1)\n(51/78) Installing samba-common (4.15.5-r0)\n(52/78) Installing libcap (2.61-r0)\n(53/78) Installing gmp (6.2.1-r1)\n(54/78) Installing nettle (3.7.3-r0)\n(55/78) Installing p11-kit (0.24.0-r1)\n(56/78) Installing libtasn1 (4.18.0-r1)\n(57/78) Installing libunistring (0.9.10-r1)\n(58/78) Installing gnutls (3.7.1-r1)\n(59/78) Installing talloc (2.3.3-r0)\n(60/78) Installing tevent (0.11.0-r0)\n(61/78) Installing samba-util-libs (4.15.5-r0)\n(62/78) Installing jansson (2.14-r0)\n(63/78) Installing libsasl (2.1.28-r0)\n(64/78) Installing libldap (2.6.2-r0)\n(65/78) Installing lmdb (0.9.29-r1)\n(66/78) Installing tdb-libs (1.4.5-r0)\n(67/78) Installing ldb (2.4.1-r0)\n(68/78) Installing linux-pam (1.5.2-r0)\n(69/78) Installing popt (1.18-r0)\n(70/78) Installing libwbclient (4.15.5-r0)\n(71/78) Installing samba-libs (4.15.5-r0)\n(72/78) Installing lz4-libs (1.9.3-r1)\n(73/78) Installing zstd-libs (1.5.0-r0)\n(74/78) Installing libarchive (3.6.1-r1)\n(75/78) Installing samba-client-libs (4.15.5-r0)\n(76/78) Installing libsmbclient (4.15.5-r0)\n(77/78) Installing samba-client (4.15.5-r0)\n(78/78) Installing shadow (4.8.1-r1)\nExecuting busybox-1.34.1-r7.trigger\nOK: 142 MiB in 92 packages\nCollecting awscli\n  Downloading awscli-1.27.43-py3-none-any.whl (4.0 MB)\nCollecting rsa<4.8,>=3.1.2\n  Downloading rsa-4.7.2-py3-none-any.whl (34 kB)\nCollecting PyYAML<5.5,>=3.10\n  Downloading PyYAML-5.4.1.tar.gz (175 kB)\n  Installing build dependencies: started\n  Installing build dependencies: finished with status 'done'\n  Getting requirements to build wheel: started\n  Getting requirements to build wheel: finished with status 'done'\n    Preparing wheel metadata: started\n    Preparing wheel metadata: finished with status 'done'\nCollecting docutils<0.17,>=0.10\n  Downloading docutils-0.16-py2.py3-none-any.whl (548 kB)\nCollecting s3transfer<0.7.0,>=0.6.0\n  Downloading s3transfer-0.6.0-py3-none-any.whl (79 kB)\nCollecting botocore==1.29.43\n  Downloading botocore-1.29.43-py3-none-any.whl (10.3 MB)\nRequirement already satisfied: colorama<0.4.5,>=0.2.5 in /usr/lib/python3.9/site-packages (from awscli) (0.4.4)\nCollecting jmespath<2.0.0,>=0.7.1\n  Downloading jmespath-1.0.1-py3-none-any.whl (20 kB)\nCollecting python-dateutil<3.0.0,>=2.1\n  Downloading python_dateutil-2.8.2-py2.py3-none-any.whl (247 kB)\nRequirement already satisfied: urllib3<1.27,>=1.25.4 in /usr/lib/python3.9/site-packages (from botocore==1.29.43->awscli) (1.26.7)\nRequirement already satisfied: six>=1.5 in /usr/lib/python3.9/site-packages (from python-dateutil<3.0.0,>=2.1->botocore==1.29.43->awscli) (1.16.0)\nCollecting pyasn1>=0.1.3\n  Downloading pyasn1-0.4.8-py2.py3-none-any.whl (77 kB)\nBuilding wheels for collected packages: PyYAML\n  Building wheel for PyYAML (PEP 517): started\n  Building wheel for PyYAML (PEP 517): finished with status 'done'\n  Created wheel for PyYAML: filename=PyYAML-5.4.1-cp39-cp39-linux_x86_64.whl size=45656 sha256=72e9abbc24fde1d672c659b76dfaad4d1651915124be866e0126b878afde4433\n  Stored in directory: /tmp/pip-ephem-wheel-cache-pb1y8ml6/wheels/b7/a5/c4/504d913c2a55bb09c607541578ec5f844d1ff33467abe93ba5\nSuccessfully built PyYAML\nInstalling collected packages: python-dateutil, jmespath, pyasn1, botocore, s3transfer, rsa, PyYAML, docutils, awscli\nSuccessfully installed PyYAML-5.4.1 awscli-1.27.43 botocore-1.29.43 docutils-0.16 jmespath-1.0.1 pyasn1-0.4.8 python-dateutil-2.8.2 rsa-4.7.2 s3transfer-0.6.0\nRemoving intermediate container 2795f15267f1\n ---> feaf63636ca0\nStep 4/9 : RUN groupadd -g 1005 appuser &&     useradd -r -u 1005 -g appuser appuser\n ---> Running in 08001fdab1e9\nRemoving intermediate container 08001fdab1e9\n ---> 8005999d5da7\nStep 5/9 : RUN mkdir -p /var/cache/samba && chmod 0755 /var/cache/samba && chown appuser /var/cache/samba && chown appuser /var/lib/samba/private\n ---> Running in c2f55ff4dd90\nRemoving intermediate container c2f55ff4dd90\n ---> 9f8a2ed1d92b\nStep 6/9 : USER appuser\n ---> Running in ec1881faf68e\nRemoving intermediate container ec1881faf68e\n ---> 08f33408d9ed\nStep 7/9 : COPY functions.sh /\n ---> 6f20c722856a\nStep 8/9 : COPY entrypoint /entrypoint\n ---> cf79adf50aff\nStep 9/9 : ENTRYPOINT [\"/entrypoint\"]\n ---> Running in cec8635f9800\nRemoving intermediate container cec8635f9800\n ---> 942578e1cc42\nSuccessfully built 942578e1cc42\nSuccessfully tagged mysql-backup:latest\n","stderr":"","imageSize":227562710}}