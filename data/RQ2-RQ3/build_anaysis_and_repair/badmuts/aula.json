{"repository":"https://github.com/badmuts/aula","dockerfilePath":"Dockerfile","startTime":1672167755301,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/badmuts/aula'...\n","error":null,"commit":"833c0638374389767c67a35b9790e8c593901332"},"originalBuild":{"startTimestamp":1672167756180,"endTimestamp":1672167931176,"error":null,"stdout":"Sending build context to Docker daemon  927.2kB\r\r\nStep 1/19 : FROM node:10 as builder\n10: Pulling from library/node\n76b8ef87096f: Pulling fs layer\n2e2bafe8a0f4: Pulling fs layer\nb53ce1fd2746: Pulling fs layer\n84a8c1bd5887: Pulling fs layer\n7a803dc0b40f: Pulling fs layer\nb800e94e7303: Pulling fs layer\n0da9fbf60d48: Pulling fs layer\n84a8c1bd5887: Waiting\n04dccde934cf: Pulling fs layer\n73269890f6fd: Pulling fs layer\nb800e94e7303: Waiting\n0da9fbf60d48: Waiting\n04dccde934cf: Waiting\n73269890f6fd: Waiting\nb53ce1fd2746: Verifying Checksum\nb53ce1fd2746: Download complete\n2e2bafe8a0f4: Verifying Checksum\n2e2bafe8a0f4: Download complete\n76b8ef87096f: Verifying Checksum\n76b8ef87096f: Download complete\nb800e94e7303: Verifying Checksum\nb800e94e7303: Download complete\n84a8c1bd5887: Verifying Checksum\n84a8c1bd5887: Download complete\n0da9fbf60d48: Verifying Checksum\n0da9fbf60d48: Download complete\n04dccde934cf: Verifying Checksum\n04dccde934cf: Download complete\n73269890f6fd: Verifying Checksum\n73269890f6fd: Download complete\n76b8ef87096f: Pull complete\n2e2bafe8a0f4: Pull complete\nb53ce1fd2746: Pull complete\n84a8c1bd5887: Pull complete\n7a803dc0b40f: Verifying Checksum\n7a803dc0b40f: Download complete\n7a803dc0b40f: Pull complete\nb800e94e7303: Pull complete\n0da9fbf60d48: Pull complete\n04dccde934cf: Pull complete\n73269890f6fd: Pull complete\nDigest: sha256:59531d2835edd5161c8f9512f9e095b1836f7a1fcb0ab73e005ec46047384911\nStatus: Downloaded newer image for node:10\n ---> 28dca6642db8\nStep 2/19 : ARG SERVICE\n ---> Running in 24a3478e055a\nRemoving intermediate container 24a3478e055a\n ---> 9ab3fe25f7bd\nStep 3/19 : WORKDIR /usr/src/app\n ---> Running in bcb388b85f66\nRemoving intermediate container bcb388b85f66\n ---> eb3966c7c01c\nStep 4/19 : COPY --chown=node:node package*.json lerna.json ./\n ---> eca00d57afc7\nStep 5/19 : COPY --chown=node:node packages/ ./packages\n ---> 6b0475d693cb\nStep 6/19 : COPY --chown=node:node services/${SERVICE} ./services/${SERVICE}\n ---> 388508040215\nStep 7/19 : RUN npm install --loglevel notice --unsafe-perm\n ---> Running in 9157b57074a9\n\n> aula@ postinstall /usr/src/app\n> npm run bootstrap\n\n\n> aula@ bootstrap /usr/src/app\n> lerna bootstrap --hoist\n\n\u001b[91mlerna\u001b[0m\u001b[91m notice cli v3.4.0\n\u001b[0m\u001b[91mlerna info Bootstrapping 10 packages\n\u001b[0m\u001b[91mlerna WARN EHOIST_PKG_VERSION \"@badmuts/aula-auth\" package depends on jsonwebtoken@^8.3.0, which differs from the hoisted jsonwebtoken@^8.5.1.\n\u001b[0m\u001b[91mlerna info Installing external dependencies\n\u001b[0m\u001b[91mlerna info hoist Installing hoisted dependencies into root\n\u001b[0m\u001b[91mlerna info hoist Pruning hoisted dependencies\n\u001b[0m\u001b[91mlerna info hoist Finished pruning hoisted dependencies\n\u001b[0m\u001b[91mlerna info hoist Finished bootstrapping root\nlerna info Symlinking packages and binaries\n\u001b[0m\u001b[91mlerna\u001b[0m\u001b[91m \u001b[0m\u001b[91minfo\u001b[0m\u001b[91m \u001b[0m\u001b[91mlifecycle @badmuts/aula-web@1.0.0~postinstall: @badmuts/aula-web@1.0.0\n\u001b[0m\n> @badmuts/aula-web@1.0.0 postinstall /usr/src/app/services/web\n> npm run build\n\n\n> @badmuts/aula-web@1.0.0 build /usr/src/app/services/web\n> next build\n\n\u001b[91mBrowserslist: caniuse-lite is outdated. Please run:\nnpx browserslist@latest --update-db\n\u001b[0minfo  - Creating an optimized production build...\nAttention: Next.js now collects completely anonymous telemetry regarding usage.\nThis information is used to shape Next.js' roadmap and prioritize features.\nYou can learn more, including how to opt-out if you'd not like to participate in this anonymous program, by visiting the following URL:\nhttps://nextjs.org/telemetry\n\ninfo  - Using external babel configuration from /usr/src/app/services/web/.babelrc\ninfo  - Compiled successfully\ninfo  - Collecting page data...\ninfo  - Generating static pages (0/3)\ninfo  - Finalizing page optimization...\n\nPage                                                           Size     First Load JS\n┌ λ /                                                          5.7 kB          175 kB\n├   /_app                                                      0 B            94.6 kB\n├ ○ /404                                                       3.01 kB        97.6 kB\n├ ○ /auth/join                                                 3.33 kB         122 kB\n├ ○ /auth/sign-in                                              3.33 kB         122 kB\n├ λ /courses/[id]                                              5.31 kB         175 kB\n└ λ /courses/[id]/content                                      3.76 kB         173 kB\n+ First Load JS shared by all                                  94.6 kB\n  ├ chunks/25c87dfbf89f338fb2d709d4361c37613687cc45.0126d9.js  23.9 kB\n  ├ chunks/commons.ab73fe.js                                   11.6 kB\n  ├ chunks/framework.018a9a.js                                 40.2 kB\n  ├ chunks/main.120cd5.js                                      9.33 kB\n  ├ chunks/pages/_app.ccdfae.js                                8.8 kB\n  └ chunks/webpack.eb080e.js                                   751 B\n\nλ  (Server)  server-side renders at runtime (uses getInitialProps or getServerSideProps)\n○  (Static)  automatically rendered as static HTML (uses no initial props)\n●  (SSG)     automatically generated as static HTML + JSON (uses getStaticProps)\n   (ISR)     incremental static regeneration (uses revalidate in getStaticProps)\n\n\u001b[91mlerna success Bootstrapped 10 packages\n\u001b[0madded 604 packages from 318 contributors and audited 604 packages in 46.936s\nfound 150 vulnerabilities (6 low, 36 moderate, 87 high, 21 critical)\n  run `npm audit fix` to fix them, or `npm audit` for details\nRemoving intermediate container 9157b57074a9\n ---> f4db99ce0b3d\nStep 8/19 : ENV NODE_ENV=production     PORT=3000     SERVICE_NAME=${SERVICE}\n ---> Running in f7d23f107610\nRemoving intermediate container f7d23f107610\n ---> 1cc216faa5d8\nStep 9/19 : HEALTHCHECK --interval=30s     --timeout=2s     --retries=10     CMD node services/${SERVICE_NAME}/src/healthcheck.js\n ---> Running in 69ec061d1c9a\nRemoving intermediate container 69ec061d1c9a\n ---> a2345c8d59be\nStep 10/19 : EXPOSE 3000\n ---> Running in fb63384a1acf\nRemoving intermediate container fb63384a1acf\n ---> da5206186476\nStep 11/19 : CMD [\"npm\", \"--prefix\", \"services/${SERVICE}\", \"start\"]\n ---> Running in 29de82a827b6\nRemoving intermediate container 29de82a827b6\n ---> d6bfb1140ec8\nStep 12/19 : FROM node:10-alpine\n ---> aa67ba258e18\nStep 13/19 : ARG SERVICE\n ---> Running in 8db1b1b82e0c\nRemoving intermediate container 8db1b1b82e0c\n ---> df4a8bdd5ddc\nStep 14/19 : WORKDIR /usr/src/app\n ---> Running in 3a8ca6034d5b\nRemoving intermediate container 3a8ca6034d5b\n ---> 323dc0a19d0f\nStep 15/19 : COPY --chown=node:node --from=builder /usr/src/app .\n ---> 7d9fd4202e86\nStep 16/19 : ENV NODE_ENV=production     PORT=3000     SERVICE_NAME=${SERVICE}\n ---> Running in b18faafe393e\nRemoving intermediate container b18faafe393e\n ---> d91cd3437e01\nStep 17/19 : HEALTHCHECK --interval=30s     --timeout=2s     --retries=10     CMD node services/${SERVICE_NAME}/src/healthcheck.js\n ---> Running in f39b761d422a\nRemoving intermediate container f39b761d422a\n ---> fb8a822730ef\nStep 18/19 : EXPOSE 3000\n ---> Running in 54e15b2dbdde\nRemoving intermediate container 54e15b2dbdde\n ---> fafa1b47e595\nStep 19/19 : CMD [\"npm\", \"--prefix\", \"services/${SERVICE}\", \"start\"]\n ---> Running in 6da9dd07fba8\nRemoving intermediate container 6da9dd07fba8\n ---> b5f3571aef65\nSuccessfully built b5f3571aef65\nSuccessfully tagged aula:latest\n","stderr":"","imageSize":249862561},"repair":{"violations":[{"name":"npmCacheCleanAfterInstall","position":{"start":7,"end":7,"columnStart":4,"columnEnd":47}}],"repairedDockerfile":"FROM node:10 as builder\nARG SERVICE\nWORKDIR /usr/src/app\n\nCOPY --chown=node:node package*.json lerna.json ./\nCOPY --chown=node:node packages/ ./packages\nCOPY --chown=node:node services/${SERVICE} ./services/${SERVICE}\nRUN npm install --loglevel notice --unsafe-perm\n\nENV NODE_ENV=production \\\n    PORT=3000 \\\n    SERVICE_NAME=${SERVICE}\n\nHEALTHCHECK --interval=30s \\\n    --timeout=2s \\\n    --retries=10 \\\n    CMD node services/${SERVICE_NAME}/src/healthcheck.js\n\nEXPOSE 3000\nCMD [\"npm\", \"--prefix\", \"services/${SERVICE}\", \"start\"]\n\nFROM node:10-alpine\nARG SERVICE\nWORKDIR /usr/src/app\nCOPY --chown=node:node --from=builder /usr/src/app .\n\nENV NODE_ENV=production \\\n    PORT=3000 \\\n    SERVICE_NAME=${SERVICE}\n\nHEALTHCHECK --interval=30s \\\n    --timeout=2s \\\n    --retries=10 \\\n    CMD node services/${SERVICE_NAME}/src/healthcheck.js\n\nEXPOSE 3000\nCMD [\"npm\", \"--prefix\", \"services/${SERVICE}\", \"start\"]\n"},"repairedBuild":{"startTimestamp":1672167932438,"endTimestamp":1672168054095,"error":null,"stdout":"Sending build context to Docker daemon  927.2kB\r\r\nStep 1/19 : FROM node:10 as builder\n ---> 28dca6642db8\nStep 2/19 : ARG SERVICE\n ---> Running in 6e688972af05\nRemoving intermediate container 6e688972af05\n ---> 4ee2921f2b2b\nStep 3/19 : WORKDIR /usr/src/app\n ---> Running in bd685df73382\nRemoving intermediate container bd685df73382\n ---> 139f80f988c5\nStep 4/19 : COPY --chown=node:node package*.json lerna.json ./\n ---> 15059523c457\nStep 5/19 : COPY --chown=node:node packages/ ./packages\n ---> 49e96e5e3e41\nStep 6/19 : COPY --chown=node:node services/${SERVICE} ./services/${SERVICE}\n ---> 1c966e80e3e4\nStep 7/19 : RUN npm install --loglevel notice --unsafe-perm\n ---> Running in 57624564e8af\n\n> aula@ postinstall /usr/src/app\n> npm run bootstrap\n\n\n> aula@ bootstrap /usr/src/app\n> lerna bootstrap --hoist\n\n\u001b[91mlerna\u001b[0m\u001b[91m notice cli v3.4.0\n\u001b[0m\u001b[91mlerna info Bootstrapping 10 packages\n\u001b[0m\u001b[91mlerna WARN EHOIST_PKG_VERSION\u001b[0m\u001b[91m \"@badmuts/aula-auth\" package depends on jsonwebtoken@^8.3.0, which differs from the hoisted jsonwebtoken@^8.5.1.\n\u001b[0m\u001b[91mlerna info Installing external dependencies\n\u001b[0m\u001b[91mlerna info hoist Installing hoisted dependencies into root\n\u001b[0m\u001b[91mlerna info \u001b[0m\u001b[91mhoist Pruning hoisted dependencies\n\u001b[0m\u001b[91mlerna info hoist Finished pruning hoisted dependencies\n\u001b[0m\u001b[91mlerna info hoist\u001b[0m\u001b[91m Finished bootstrapping root\n\u001b[0m\u001b[91mlerna info Symlinking packages and binaries\n\u001b[0m\u001b[91mlerna info lifecycle @badmuts/aula-web@1.0.0~postinstall: @badmuts/aula-web@1.0.0\n\u001b[0m\n> @badmuts/aula-web@1.0.0 postinstall /usr/src/app/services/web\n> npm run build\n\n\n> @badmuts/aula-web@1.0.0 build /usr/src/app/services/web\n> next build\n\n\u001b[91mBrowserslist: caniuse-lite is outdated. Please run:\nnpx browserslist@latest --update-db\n\u001b[0minfo  - Creating an optimized production build...\nAttention: Next.js now collects completely anonymous telemetry regarding usage.\nThis information is used to shape Next.js' roadmap and prioritize features.\nYou can learn more, including how to opt-out if you'd not like to participate in this anonymous program, by visiting the following URL:\nhttps://nextjs.org/telemetry\n\ninfo  - Using external babel configuration from /usr/src/app/services/web/.babelrc\ninfo  - Compiled successfully\ninfo  - Collecting page data...\ninfo  - Generating static pages (0/3)\ninfo  - Finalizing page optimization...\n\nPage                                                           Size     First Load JS\n┌ λ /                                                          5.7 kB          175 kB\n├   /_app                                                      0 B            94.6 kB\n├ ○ /404                                                       3.01 kB        97.6 kB\n├ ○ /auth/join                                                 3.33 kB         122 kB\n├ ○ /auth/sign-in                                              3.33 kB         122 kB\n├ λ /courses/[id]                                              5.31 kB         175 kB\n└ λ /courses/[id]/content                                      3.76 kB         173 kB\n+ First Load JS shared by all                                  94.6 kB\n  ├ chunks/25c87dfbf89f338fb2d709d4361c37613687cc45.0126d9.js  23.9 kB\n  ├ chunks/commons.ab73fe.js                                   11.6 kB\n  ├ chunks/framework.018a9a.js                                 40.2 kB\n  ├ chunks/main.120cd5.js                                      9.33 kB\n  ├ chunks/pages/_app.ccdfae.js                                8.8 kB\n  └ chunks/webpack.eb080e.js                                   751 B\n\nλ  (Server)  server-side renders at runtime (uses getInitialProps or getServerSideProps)\n○  (Static)  automatically rendered as static HTML (uses no initial props)\n●  (SSG)     automatically generated as static HTML + JSON (uses getStaticProps)\n   (ISR)     incremental static regeneration (uses revalidate in getStaticProps)\n\n\u001b[91mlerna success Bootstrapped 10 packages\n\u001b[0madded 604 packages from 318 contributors and audited 604 packages in 44.401s\nfound 150 vulnerabilities (6 low, 36 moderate, 87 high, 21 critical)\n  run `npm audit fix` to fix them, or `npm audit` for details\nRemoving intermediate container 57624564e8af\n ---> 5b34e420fda7\nStep 8/19 : ENV NODE_ENV=production     PORT=3000     SERVICE_NAME=${SERVICE}\n ---> Running in 86546b4bae9a\nRemoving intermediate container 86546b4bae9a\n ---> d2b2a591efdf\nStep 9/19 : HEALTHCHECK --interval=30s     --timeout=2s     --retries=10     CMD node services/${SERVICE_NAME}/src/healthcheck.js\n ---> Running in ac0d65f07fee\nRemoving intermediate container ac0d65f07fee\n ---> f6e0fd092efe\nStep 10/19 : EXPOSE 3000\n ---> Running in e655f23bd90a\nRemoving intermediate container e655f23bd90a\n ---> b75cac778eb2\nStep 11/19 : CMD [\"npm\", \"--prefix\", \"services/${SERVICE}\", \"start\"]\n ---> Running in 64a80c8acd1f\nRemoving intermediate container 64a80c8acd1f\n ---> 5077f7ab55dd\nStep 12/19 : FROM node:10-alpine\n ---> aa67ba258e18\nStep 13/19 : ARG SERVICE\n ---> Running in 191576e04fda\nRemoving intermediate container 191576e04fda\n ---> 30e93bd6a5ad\nStep 14/19 : WORKDIR /usr/src/app\n ---> Running in 5117f53f5bdb\nRemoving intermediate container 5117f53f5bdb\n ---> eca353ca0c4b\nStep 15/19 : COPY --chown=node:node --from=builder /usr/src/app .\n ---> 5dd0509eb2cc\nStep 16/19 : ENV NODE_ENV=production     PORT=3000     SERVICE_NAME=${SERVICE}\n ---> Running in bf1233427a2b\nRemoving intermediate container bf1233427a2b\n ---> 254cbb3bc03f\nStep 17/19 : HEALTHCHECK --interval=30s     --timeout=2s     --retries=10     CMD node services/${SERVICE_NAME}/src/healthcheck.js\n ---> Running in d6ac237c0101\nRemoving intermediate container d6ac237c0101\n ---> 2b427b5bd118\nStep 18/19 : EXPOSE 3000\n ---> Running in 693b420baa77\nRemoving intermediate container 693b420baa77\n ---> 345392a646ad\nStep 19/19 : CMD [\"npm\", \"--prefix\", \"services/${SERVICE}\", \"start\"]\n ---> Running in b3783107f981\nRemoving intermediate container b3783107f981\n ---> dac938011633\nSuccessfully built dac938011633\nSuccessfully tagged aula:latest\n","stderr":"","imageSize":249862561},"endTime":1672168054849}