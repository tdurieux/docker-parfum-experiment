{"repository":"https://github.com/nsmithuk/local-kms","dockerfilePath":"Dockerfile","startTime":1672916491084,"endTime":1672916727063,"clone":{"startTime":1672916491084,"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/nsmithuk/local-kms'...\n","error":null,"endTime":1672916491861,"commit":"de1a4c98d9f6a6ad7ca3afa14a8dadb118147cc6"},"originalBuild":{"startTime":1672916491937,"endTime":1672916627022,"error":null,"stdout":"Sending build context to Docker daemon  736.3kB\r\r\nStep 1/15 : FROM golang:1.17-alpine AS build\n1.17-alpine: Pulling from library/golang\n530afca65e2e: Pulling fs layer\nd450d4da0343: Pulling fs layer\n8162171ecb65: Pulling fs layer\nff63b82a42d3: Pulling fs layer\n5b4b56e6b994: Pulling fs layer\nff63b82a42d3: Waiting\n5b4b56e6b994: Waiting\n8162171ecb65: Download complete\nd450d4da0343: Verifying Checksum\nd450d4da0343: Download complete\n530afca65e2e: Verifying Checksum\n530afca65e2e: Download complete\n5b4b56e6b994: Download complete\n530afca65e2e: Pull complete\nd450d4da0343: Pull complete\n8162171ecb65: Pull complete\nff63b82a42d3: Verifying Checksum\nff63b82a42d3: Download complete\nff63b82a42d3: Pull complete\n5b4b56e6b994: Pull complete\nDigest: sha256:99ddec1bbfd6d6bca3f9804c02363daee8c8524dae50df7942e8e60788fd17c9\nStatus: Downloaded newer image for golang:1.17-alpine\n ---> 270c4f58750f\nStep 2/15 : RUN apk update && apk add git\n ---> Running in 82f8af707d58\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/community/x86_64/APKINDEX.tar.gz\nv3.16.3-99-g1016b47723 [https://dl-cdn.alpinelinux.org/alpine/v3.16/main]\nv3.16.3-99-g1016b47723 [https://dl-cdn.alpinelinux.org/alpine/v3.16/community]\nOK: 17048 distinct packages available\n(1/6) Installing brotli-libs (1.0.9-r6)\n(2/6) Installing nghttp2-libs (1.47.0-r0)\n(3/6) Installing libcurl (7.83.1-r5)\n(4/6) Installing expat (2.5.0-r0)\n(5/6) Installing pcre2 (10.40-r0)\n(6/6) Installing git (2.36.3-r0)\nExecuting busybox-1.35.0-r15.trigger\nOK: 19 MiB in 21 packages\nRemoving intermediate container 82f8af707d58\n ---> 01fa62f9cc76\nStep 3/15 : RUN mkdir -p /go/src/github.com/nsmithuk/local-kms\n ---> Running in 8f90e559bbf3\nRemoving intermediate container 8f90e559bbf3\n ---> 1f6895ac37b8\nStep 4/15 : COPY . /go/src/github.com/nsmithuk/local-kms\n ---> 8741f4e4b003\nStep 5/15 : WORKDIR /go/src/github.com/nsmithuk/local-kms\n ---> Running in 984bac9251ca\nRemoving intermediate container 984bac9251ca\n ---> 3838f8b824cf\nStep 6/15 : RUN go install\n ---> Running in c88407d5fba0\n\u001b[91mgo: downloading github.com/sirupsen/logrus v1.4.2\n\u001b[0m\u001b[91mgo: downloading gopkg.in/yaml.v2 v2.2.8\n\u001b[0m\u001b[91mgo: downloading github.com/syndtr/goleveldb v1.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/btcsuite/btcd v0.22.0-beta\n\u001b[0m\u001b[91mgo: downloading github.com/aws/aws-sdk-go v1.42.19\n\u001b[0m\u001b[91mgo: downloading github.com/gofrs/uuid v4.2.0+incompatible\n\u001b[0m\u001b[91mgo: downloading golang.org/x/sys v0.0.0-20210423082822-04245dca01da\n\u001b[0m\u001b[91mgo: downloading github.com/golang/snappy v0.0.1\n\u001b[0m\u001b[91mgo: downloading github.com/jmespath/go-jmespath v0.4.0\n\u001b[0mRemoving intermediate container c88407d5fba0\n ---> ca6ffa6eca5a\nStep 7/15 : FROM alpine\nlatest: Pulling from library/alpine\nDigest: sha256:8914eb54f968791faf6a8638949e480fef81e697984fba772b3976835194c6d4\nStatus: Downloaded newer image for alpine:latest\n ---> 49176f190c7e\nStep 8/15 : COPY --from=build /go/bin/local-kms /usr/local/bin/local-kms\n ---> f8879f8de3cc\nStep 9/15 : RUN mkdir /init\n ---> Running in e47553256795\nRemoving intermediate container e47553256795\n ---> 27cb3affb1df\nStep 10/15 : RUN mkdir /data\n ---> Running in 68aba7898225\nRemoving intermediate container 68aba7898225\n ---> 96f92395a0a4\nStep 11/15 : ENV KMS_ACCOUNT_ID 111122223333\n ---> Running in 289432dd1bde\nRemoving intermediate container 289432dd1bde\n ---> 775920f2d4f1\nStep 12/15 : ENV KMS_REGION eu-west-2\n ---> Running in a9a9123a54ac\nRemoving intermediate container a9a9123a54ac\n ---> 0e0ba695a6aa\nStep 13/15 : ENV KMS_DATA_PATH /data\n ---> Running in 4e40e0966900\nRemoving intermediate container 4e40e0966900\n ---> 04efb57f00ac\nStep 14/15 : ENV PORT 8080\n ---> Running in 2889113cbb16\nRemoving intermediate container 2889113cbb16\n ---> 611498bc5d08\nStep 15/15 : ENTRYPOINT [\"local-kms\"]\n ---> Running in e5f34b153a28\nRemoving intermediate container e5f34b153a28\n ---> 0b9924ef959d\nSuccessfully built 0b9924ef959d\nSuccessfully tagged local-kms:latest\n","stderr":"","imageSize":21458360},"repair":{"startTime":1672916627098,"endTime":1672916627168,"violations":[{"name":"apkAddUseNoCache","position":{"start":2,"end":2,"columnStart":18,"columnEnd":29}}],"repairedDockerfile":"FROM golang:1.17-alpine AS build\n\nRUN apk update && apk add --no-cache git\n\nRUN mkdir -p /go/src/github.com/nsmithuk/local-kms\nCOPY . /go/src/github.com/nsmithuk/local-kms\n\nWORKDIR /go/src/github.com/nsmithuk/local-kms\n\nRUN go install\n\n\n# Build the final container with just the resulting binary\nFROM alpine\n\nCOPY --from=build /go/bin/local-kms /usr/local/bin/local-kms\n\nRUN mkdir /init\nRUN mkdir /data\n\nENV KMS_ACCOUNT_ID 111122223333\nENV KMS_REGION eu-west-2\nENV KMS_DATA_PATH /data\n\nENV PORT 8080\n\nENTRYPOINT [\"local-kms\"]\n"},"repairedBuild":{"startTime":1672916627727,"endTime":1672916726260,"error":null,"stdout":"Sending build context to Docker daemon  736.3kB\r\r\nStep 1/15 : FROM golang:1.17-alpine AS build\n ---> 270c4f58750f\nStep 2/15 : RUN apk update && apk add --no-cache git\n ---> Running in 1eacd2df79a3\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/community/x86_64/APKINDEX.tar.gz\nv3.16.3-99-g1016b47723 [https://dl-cdn.alpinelinux.org/alpine/v3.16/main]\nv3.16.3-99-g1016b47723 [https://dl-cdn.alpinelinux.org/alpine/v3.16/community]\nOK: 17048 distinct packages available\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/community/x86_64/APKINDEX.tar.gz\n(1/6) Installing brotli-libs (1.0.9-r6)\n(2/6) Installing nghttp2-libs (1.47.0-r0)\n(3/6) Installing libcurl (7.83.1-r5)\n(4/6) Installing expat (2.5.0-r0)\n(5/6) Installing pcre2 (10.40-r0)\n(6/6) Installing git (2.36.3-r0)\nExecuting busybox-1.35.0-r15.trigger\nOK: 19 MiB in 21 packages\nRemoving intermediate container 1eacd2df79a3\n ---> ea9bf1b6e328\nStep 3/15 : RUN mkdir -p /go/src/github.com/nsmithuk/local-kms\n ---> Running in 927ef94108c8\nRemoving intermediate container 927ef94108c8\n ---> 44ecd1205e1b\nStep 4/15 : COPY . /go/src/github.com/nsmithuk/local-kms\n ---> 5046ce8e9835\nStep 5/15 : WORKDIR /go/src/github.com/nsmithuk/local-kms\n ---> Running in 106f22e3bc33\nRemoving intermediate container 106f22e3bc33\n ---> 0de2ab81c75c\nStep 6/15 : RUN go install\n ---> Running in de2fe48f3e86\n\u001b[91mgo: downloading github.com/sirupsen/logrus v1.4.2\n\u001b[0m\u001b[91mgo: downloading github.com/syndtr/goleveldb v1.0.0\n\u001b[0m\u001b[91mgo: downloading gopkg.in/yaml.v2 v2.2.8\n\u001b[0m\u001b[91mgo: downloading github.com/gofrs/uuid v4.2.0+incompatible\n\u001b[0m\u001b[91mgo: downloading github.com/aws/aws-sdk-go v1.42.19\n\u001b[0m\u001b[91mgo: downloading github.com/btcsuite/btcd v0.22.0-beta\n\u001b[0m\u001b[91mgo: downloading golang.org/x/sys v0.0.0-20210423082822-04245dca01da\n\u001b[0m\u001b[91mgo: downloading github.com/golang/snappy v0.0.1\n\u001b[0m\u001b[91mgo: downloading github.com/jmespath/go-jmespath v0.4.0\n\u001b[0mRemoving intermediate container de2fe48f3e86\n ---> 3fcedcc6199e\nStep 7/15 : FROM alpine\n ---> 49176f190c7e\nStep 8/15 : COPY --from=build /go/bin/local-kms /usr/local/bin/local-kms\n ---> c9b6fdd9e7b3\nStep 9/15 : RUN mkdir /init\n ---> Running in b7c6bf01f082\nRemoving intermediate container b7c6bf01f082\n ---> dd23d65cfafb\nStep 10/15 : RUN mkdir /data\n ---> Running in 58a261b4e0a5\nRemoving intermediate container 58a261b4e0a5\n ---> 78aa14f6f6a1\nStep 11/15 : ENV KMS_ACCOUNT_ID 111122223333\n ---> Running in 3eb395bc1d3b\nRemoving intermediate container 3eb395bc1d3b\n ---> 6be63fdb089e\nStep 12/15 : ENV KMS_REGION eu-west-2\n ---> Running in 43171cf7b3d5\nRemoving intermediate container 43171cf7b3d5\n ---> 59fad0690055\nStep 13/15 : ENV KMS_DATA_PATH /data\n ---> Running in e6bdb76d701d\nRemoving intermediate container e6bdb76d701d\n ---> 0accb2647be6\nStep 14/15 : ENV PORT 8080\n ---> Running in f0db913692b2\nRemoving intermediate container f0db913692b2\n ---> 58f1a8f7876b\nStep 15/15 : ENTRYPOINT [\"local-kms\"]\n ---> Running in 743f5925be8a\nRemoving intermediate container 743f5925be8a\n ---> 7eaf590785c7\nSuccessfully built 7eaf590785c7\nSuccessfully tagged local-kms:latest\n","stderr":"","imageSize":21458360}}