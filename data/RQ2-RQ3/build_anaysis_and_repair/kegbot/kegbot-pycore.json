{"repository":"https://github.com/kegbot/kegbot-pycore","dockerfilePath":"Dockerfile","startTime":1672899515774,"endTime":1672899612497,"clone":{"startTime":1672899515775,"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/kegbot/kegbot-pycore'...\n","error":null,"endTime":1672899516564,"commit":"40923e4b359ecccfb773ac76a258f02d3487605f"},"originalBuild":{"startTime":1672899516642,"endTime":1672899571982,"error":null,"stdout":"Sending build context to Docker daemon  416.3kB\r\r\nStep 1/18 : FROM python:3-alpine\n ---> 18ccdc39ea28\nStep 2/18 : RUN mkdir /app\n ---> Running in da7efab156da\nRemoving intermediate container da7efab156da\n ---> b00f5b8b396a\nStep 3/18 : WORKDIR /app\n ---> Running in 558d028b2bc5\nRemoving intermediate container 558d028b2bc5\n ---> 85bdaf66586f\nStep 4/18 : ENV SHELL=/bin/sh    PIP_NO_CACHE_DIR=1    KEGBOT_IN_DOCKER=True    KEGBOT_ENV=debug\n ---> Running in 9de778d828f4\nRemoving intermediate container 9de778d828f4\n ---> 92e1137e80b5\nStep 5/18 : RUN apk update &&     apk add --no-cache       bash       curl &&    pip install pipenv\n ---> Running in 1b6520de2059\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\nv3.17.0-331-g77682418d6 [https://dl-cdn.alpinelinux.org/alpine/v3.17/main]\nv3.17.0-329-gf392921234 [https://dl-cdn.alpinelinux.org/alpine/v3.17/community]\nOK: 17820 distinct packages available\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/5) Installing bash (5.2.15-r0)\nExecuting bash-5.2.15-r0.post-install\n(2/5) Installing brotli-libs (1.0.9-r9)\n(3/5) Installing nghttp2-libs (1.51.0-r0)\n(4/5) Installing libcurl (7.87.0-r0)\n(5/5) Installing curl (7.87.0-r0)\nExecuting busybox-1.35.0-r29.trigger\nOK: 19 MiB in 42 packages\nCollecting pipenv\n  Downloading pipenv-2022.12.19-py3-none-any.whl (2.9 MB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 2.9/2.9 MB 65.7 MB/s eta 0:00:00\nCollecting certifi\n  Downloading certifi-2022.12.7-py3-none-any.whl (155 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 155.3/155.3 kB 321.1 MB/s eta 0:00:00\nRequirement already satisfied: setuptools>=36.2.1 in /usr/local/lib/python3.11/site-packages (from pipenv) (65.5.0)\nCollecting virtualenv-clone>=0.2.5\n  Downloading virtualenv_clone-0.5.7-py3-none-any.whl (6.6 kB)\nCollecting virtualenv\n  Downloading virtualenv-20.17.1-py3-none-any.whl (8.8 MB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 8.8/8.8 MB 88.0 MB/s eta 0:00:00\nCollecting distlib<1,>=0.3.6\n  Downloading distlib-0.3.6-py2.py3-none-any.whl (468 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 468.5/468.5 kB 158.0 MB/s eta 0:00:00\nCollecting filelock<4,>=3.4.1\n  Downloading filelock-3.9.0-py3-none-any.whl (9.7 kB)\nCollecting platformdirs<3,>=2.4\n  Downloading platformdirs-2.6.2-py3-none-any.whl (14 kB)\nInstalling collected packages: distlib, virtualenv-clone, platformdirs, filelock, certifi, virtualenv, pipenv\nSuccessfully installed certifi-2022.12.7 distlib-0.3.6 filelock-3.9.0 pipenv-2022.12.19 platformdirs-2.6.2 virtualenv-20.17.1 virtualenv-clone-0.5.7\n\u001b[91mWARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv\n\u001b[0mRemoving intermediate container 1b6520de2059\n ---> 58af27ebca2f\nStep 6/18 : ADD Pipfile Pipfile.lock ./\n ---> 8ede9da2edb5\nStep 7/18 : RUN pipenv install --deploy --system\n ---> Running in 05146d0956eb\nInstalling dependencies from Pipfile.lock (bd84a0)...\nRemoving intermediate container 05146d0956eb\n ---> 8a05ba9a423a\nStep 8/18 : ADD bin ./bin\n ---> fd9f4eb2b732\nStep 9/18 : ADD kegbot ./kegbot\n ---> 5f6f02ce21ae\nStep 10/18 : ADD setup.py ./\n ---> 0be6c4190d43\nStep 11/18 : RUN python setup.py develop\n ---> Running in 7aa05b0ce7bf\n\u001b[91m/usr/local/lib/python3.11/site-packages/setuptools/dist.py:286: SetuptoolsDeprecationWarning: The namespace_packages parameter is deprecated, consider using implicit namespaces instead (PEP 420).\n  warnings.warn(msg, SetuptoolsDeprecationWarning)\n\u001b[0mrunning develop\n\u001b[91m/usr/local/lib/python3.11/site-packages/setuptools/command/easy_install.py:144: EasyInstallDeprecationWarning: easy_install command is deprecated. Use build and pip and other standards-based tools.\n  warnings.warn(\n\u001b[0m\u001b[91m/usr/local/lib/python3.11/site-packages/setuptools/command/install.py:34: SetuptoolsDeprecationWarning: setup.py install is deprecated. Use build and pip and other standards-based tools.\n  warnings.warn(\n\u001b[0mrunning egg_info\ncreating kegbot_pycore.egg-info\nwriting kegbot_pycore.egg-info/PKG-INFO\nwriting dependency_links to kegbot_pycore.egg-info/dependency_links.txt\nwriting namespace_packages to kegbot_pycore.egg-info/namespace_packages.txt\nwriting top-level names to kegbot_pycore.egg-info/top_level.txt\nwriting manifest file 'kegbot_pycore.egg-info/SOURCES.txt'\nreading manifest file 'kegbot_pycore.egg-info/SOURCES.txt'\nwriting manifest file 'kegbot_pycore.egg-info/SOURCES.txt'\nrunning build_ext\nInstalling /usr/local/lib/python3.11/site-packages/kegbot-pycore-nspkg.pth\nCreating /usr/local/lib/python3.11/site-packages/kegbot-pycore.egg-link (link to .)\nAdding kegbot-pycore 1.3.0b1 to easy-install.pth file\nInstalling kegboard_daemon.py script to /usr/local/bin\nInstalling kegbot_core.py script to /usr/local/bin\nInstalling lcd_daemon.py script to /usr/local/bin\nInstalling rfid_daemon.py script to /usr/local/bin\nInstalling test_flow.py script to /usr/local/bin\n\nInstalled /app\nProcessing dependencies for kegbot-pycore==1.3.0b1\nFinished processing dependencies for kegbot-pycore==1.3.0b1\nRemoving intermediate container 7aa05b0ce7bf\n ---> 1d9ffc90061b\nStep 12/18 : ARG GIT_SHORT_SHA=\"unknown\"\n ---> Running in 4939430cf211\nRemoving intermediate container 4939430cf211\n ---> fd2993a0ad8f\nStep 13/18 : ARG VERSION=\"unknown\"\n ---> Running in 1cde6f146d13\nRemoving intermediate container 1cde6f146d13\n ---> ebdccd3106d7\nStep 14/18 : ARG BUILD_DATE=\"unknown\"\n ---> Running in edb729b18947\nRemoving intermediate container edb729b18947\n ---> 6dc3ef675415\nStep 15/18 : RUN echo \"GIT_SHORT_SHA=${GIT_SHORT_SHA}\" > /etc/kegbot-pycore-version\n ---> Running in 04421d4f7bd1\nRemoving intermediate container 04421d4f7bd1\n ---> f028e2f27026\nStep 16/18 : RUN echo \"VERSION=${VERSION}\" >> /etc/kegbot-pycore-version\n ---> Running in 392b59494de1\nRemoving intermediate container 392b59494de1\n ---> 242d9812beba\nStep 17/18 : RUN echo \"BUILD_DATE=${BUILD_DATE}\" >> /etc/kegbot-pycore-version\n ---> Running in 4c1ab51ac580\nRemoving intermediate container 4c1ab51ac580\n ---> 9dd38ac76cb1\nStep 18/18 : CMD [    \"python\",    \"bin/kegbot_core.py\" ]\n ---> Running in 00306eb18d01\nRemoving intermediate container 00306eb18d01\n ---> 67347a041d2f\nSuccessfully built 67347a041d2f\nSuccessfully tagged kegbot-pycore:latest\n","stderr":"","imageSize":120391904},"repair":{"startTime":1672899572047,"endTime":1672899572149,"violations":[{"name":"pipUseNoCacheDir","position":{"start":14,"end":14,"columnStart":3,"columnEnd":21}}],"repairedDockerfile":"FROM python:3-alpine\n\nRUN mkdir /app\nWORKDIR /app\n\nENV SHELL=/bin/sh \\\n   PIP_NO_CACHE_DIR=1 \\\n   KEGBOT_IN_DOCKER=True \\\n   KEGBOT_ENV=debug\n\nRUN apk update && \\\n    apk add --no-cache \\\n      bash \\\n      curl && \\\n   pip install --no-cache-dir pipenv\n\nADD Pipfile Pipfile.lock ./\nRUN pipenv install --deploy --system\n\nADD bin ./bin\nADD kegbot ./kegbot\nADD setup.py ./\nRUN python setup.py develop\n\nARG GIT_SHORT_SHA=\"unknown\"\nARG VERSION=\"unknown\"\nARG BUILD_DATE=\"unknown\"\nRUN echo \"GIT_SHORT_SHA=${GIT_SHORT_SHA}\" > /etc/kegbot-pycore-version\nRUN echo \"VERSION=${VERSION}\" >> /etc/kegbot-pycore-version\nRUN echo \"BUILD_DATE=${BUILD_DATE}\" >> /etc/kegbot-pycore-version\n\nCMD [ \\\n   \"python\", \\\n   \"bin/kegbot_core.py\" \\\n]\n"},"repairedBuild":{"startTime":1672899572464,"endTime":1672899612116,"error":null,"stdout":"Sending build context to Docker daemon  416.3kB\r\r\nStep 1/18 : FROM python:3-alpine\n ---> 18ccdc39ea28\nStep 2/18 : RUN mkdir /app\n ---> Running in 8ee7207ccdb0\nRemoving intermediate container 8ee7207ccdb0\n ---> decafc101ed1\nStep 3/18 : WORKDIR /app\n ---> Running in 1e51c8086b3b\nRemoving intermediate container 1e51c8086b3b\n ---> 4909f6e989a9\nStep 4/18 : ENV SHELL=/bin/sh    PIP_NO_CACHE_DIR=1    KEGBOT_IN_DOCKER=True    KEGBOT_ENV=debug\n ---> Running in 1a6f8dfe2780\nRemoving intermediate container 1a6f8dfe2780\n ---> 686590a5303f\nStep 5/18 : RUN apk update &&     apk add --no-cache       bash       curl &&    pip install --no-cache-dir pipenv\n ---> Running in a254830357fd\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\nv3.17.0-331-g77682418d6 [https://dl-cdn.alpinelinux.org/alpine/v3.17/main]\nv3.17.0-329-gf392921234 [https://dl-cdn.alpinelinux.org/alpine/v3.17/community]\nOK: 17820 distinct packages available\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/5) Installing bash (5.2.15-r0)\nExecuting bash-5.2.15-r0.post-install\n(2/5) Installing brotli-libs (1.0.9-r9)\n(3/5) Installing nghttp2-libs (1.51.0-r0)\n(4/5) Installing libcurl (7.87.0-r0)\n(5/5) Installing curl (7.87.0-r0)\nExecuting busybox-1.35.0-r29.trigger\nOK: 19 MiB in 42 packages\nCollecting pipenv\n  Downloading pipenv-2022.12.19-py3-none-any.whl (2.9 MB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 2.9/2.9 MB 86.2 MB/s eta 0:00:00\nCollecting certifi\n  Downloading certifi-2022.12.7-py3-none-any.whl (155 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 155.3/155.3 kB 84.8 MB/s eta 0:00:00\nRequirement already satisfied: setuptools>=36.2.1 in /usr/local/lib/python3.11/site-packages (from pipenv) (65.5.0)\nCollecting virtualenv-clone>=0.2.5\n  Downloading virtualenv_clone-0.5.7-py3-none-any.whl (6.6 kB)\nCollecting virtualenv\n  Downloading virtualenv-20.17.1-py3-none-any.whl (8.8 MB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 8.8/8.8 MB 115.8 MB/s eta 0:00:00\nCollecting distlib<1,>=0.3.6\n  Downloading distlib-0.3.6-py2.py3-none-any.whl (468 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 468.5/468.5 kB 157.6 MB/s eta 0:00:00\nCollecting filelock<4,>=3.4.1\n  Downloading filelock-3.9.0-py3-none-any.whl (9.7 kB)\nCollecting platformdirs<3,>=2.4\n  Downloading platformdirs-2.6.2-py3-none-any.whl (14 kB)\nInstalling collected packages: distlib, virtualenv-clone, platformdirs, filelock, certifi, virtualenv, pipenv\nSuccessfully installed certifi-2022.12.7 distlib-0.3.6 filelock-3.9.0 pipenv-2022.12.19 platformdirs-2.6.2 virtualenv-20.17.1 virtualenv-clone-0.5.7\n\u001b[91mWARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv\n\u001b[0mRemoving intermediate container a254830357fd\n ---> 8a15465f677b\nStep 6/18 : ADD Pipfile Pipfile.lock ./\n ---> 4ac1c8d6d69c\nStep 7/18 : RUN pipenv install --deploy --system\n ---> Running in a10d4804ba40\nInstalling dependencies from Pipfile.lock (bd84a0)...\nRemoving intermediate container a10d4804ba40\n ---> 4f50325e2200\nStep 8/18 : ADD bin ./bin\n ---> affb5ef54b90\nStep 9/18 : ADD kegbot ./kegbot\n ---> 1d928b53f8e4\nStep 10/18 : ADD setup.py ./\n ---> d8e866392cce\nStep 11/18 : RUN python setup.py develop\n ---> Running in a4b7fad32b3f\n\u001b[91m/usr/local/lib/python3.11/site-packages/setuptools/dist.py:286: SetuptoolsDeprecationWarning: The namespace_packages parameter is deprecated, consider using implicit namespaces instead (PEP 420).\n  warnings.warn(msg, SetuptoolsDeprecationWarning)\n\u001b[0mrunning develop\n\u001b[91m/usr/local/lib/python3.11/site-packages/setuptools/command/easy_install.py:144: EasyInstallDeprecationWarning: easy_install command is deprecated. Use build and pip and other standards-based tools.\n  warnings.warn(\n\u001b[0m\u001b[91m/usr/local/lib/python3.11/site-packages/setuptools/command/install.py:34: SetuptoolsDeprecationWarning: setup.py install is deprecated. Use build and pip and other standards-based tools.\n  warnings.warn(\n\u001b[0mrunning egg_info\ncreating kegbot_pycore.egg-info\nwriting kegbot_pycore.egg-info/PKG-INFO\nwriting dependency_links to kegbot_pycore.egg-info/dependency_links.txt\nwriting namespace_packages to kegbot_pycore.egg-info/namespace_packages.txt\nwriting top-level names to kegbot_pycore.egg-info/top_level.txt\nwriting manifest file 'kegbot_pycore.egg-info/SOURCES.txt'\nreading manifest file 'kegbot_pycore.egg-info/SOURCES.txt'\nwriting manifest file 'kegbot_pycore.egg-info/SOURCES.txt'\nrunning build_ext\nInstalling /usr/local/lib/python3.11/site-packages/kegbot-pycore-nspkg.pth\nCreating /usr/local/lib/python3.11/site-packages/kegbot-pycore.egg-link (link to .)\nAdding kegbot-pycore 1.3.0b1 to easy-install.pth file\nInstalling kegboard_daemon.py script to /usr/local/bin\nInstalling kegbot_core.py script to /usr/local/bin\nInstalling lcd_daemon.py script to /usr/local/bin\nInstalling rfid_daemon.py script to /usr/local/bin\nInstalling test_flow.py script to /usr/local/bin\n\nInstalled /app\nProcessing dependencies for kegbot-pycore==1.3.0b1\nFinished processing dependencies for kegbot-pycore==1.3.0b1\nRemoving intermediate container a4b7fad32b3f\n ---> ee6ed03da877\nStep 12/18 : ARG GIT_SHORT_SHA=\"unknown\"\n ---> Running in 786c4b7d9baa\nRemoving intermediate container 786c4b7d9baa\n ---> cb667c88a392\nStep 13/18 : ARG VERSION=\"unknown\"\n ---> Running in ba932a269a20\nRemoving intermediate container ba932a269a20\n ---> c3498667b231\nStep 14/18 : ARG BUILD_DATE=\"unknown\"\n ---> Running in 054fb145c554\nRemoving intermediate container 054fb145c554\n ---> 1c8e00d92e5c\nStep 15/18 : RUN echo \"GIT_SHORT_SHA=${GIT_SHORT_SHA}\" > /etc/kegbot-pycore-version\n ---> Running in 50f38681c687\nRemoving intermediate container 50f38681c687\n ---> 0e8c5fb89778\nStep 16/18 : RUN echo \"VERSION=${VERSION}\" >> /etc/kegbot-pycore-version\n ---> Running in 27e3d1839fd2\nRemoving intermediate container 27e3d1839fd2\n ---> 6f31702925da\nStep 17/18 : RUN echo \"BUILD_DATE=${BUILD_DATE}\" >> /etc/kegbot-pycore-version\n ---> Running in 91cb0e6f04bb\nRemoving intermediate container 91cb0e6f04bb\n ---> 8ac0eda16a10\nStep 18/18 : CMD [    \"python\",    \"bin/kegbot_core.py\" ]\n ---> Running in d61459daffbe\nRemoving intermediate container d61459daffbe\n ---> 6e19f9b2d40e\nSuccessfully built 6e19f9b2d40e\nSuccessfully tagged kegbot-pycore:latest\n","stderr":"","imageSize":120391904}}