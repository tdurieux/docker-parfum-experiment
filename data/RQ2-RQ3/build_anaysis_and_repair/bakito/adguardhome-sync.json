{"repository":"https://github.com/bakito/adguardhome-sync","dockerfilePath":"Dockerfile","startTime":1672609551208,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/bakito/adguardhome-sync'...\n","error":null,"commit":"a4864b2b7ab7bc32d498bc37f84d9ebe1e5b20d4"},"originalBuild":{"startTimestamp":1672609552021,"endTimestamp":1672609597249,"error":null,"stdout":"Sending build context to Docker daemon    576kB\r\r\nStep 1/17 : FROM golang:1.19 as builder\n1.19: Pulling from library/golang\nDigest: sha256:660f138b4477001d65324a51fa158c1b868651b44e43f0953bf062e9f38b72f3\nStatus: Downloaded newer image for golang:1.19\n ---> 6650307efe4a\nStep 2/17 : WORKDIR /go/src/app\n ---> Running in 1e1475630e88\nRemoving intermediate container 1e1475630e88\n ---> c40deb075297\nStep 3/17 : RUN apt-get update && apt-get install -y upx\n ---> Running in dbceb9fc296a\nGet:1 http://deb.debian.org/debian bullseye InRelease [116 kB]\nGet:2 http://deb.debian.org/debian-security bullseye-security InRelease [48.4 kB]\nGet:3 http://deb.debian.org/debian bullseye-updates InRelease [44.1 kB]\nGet:4 http://deb.debian.org/debian bullseye/main amd64 Packages [8183 kB]\nGet:5 http://deb.debian.org/debian-security bullseye-security/main amd64 Packages [210 kB]\nGet:6 http://deb.debian.org/debian bullseye-updates/main amd64 Packages [14.6 kB]\nFetched 8616 kB in 1s (6803 kB/s)\nReading package lists...\nReading package lists...\nBuilding dependency tree...\nReading state information...\nThe following additional packages will be installed:\n  libucl1\nThe following NEW packages will be installed:\n  libucl1 upx-ucl\n0 upgraded, 2 newly installed, 0 to remove and 1 not upgraded.\nNeed to get 438 kB of archives.\nAfter this operation, 2137 kB of additional disk space will be used.\nGet:1 http://deb.debian.org/debian bullseye/main amd64 libucl1 amd64 1.03+repack-6 [27.1 kB]\nGet:2 http://deb.debian.org/debian bullseye/main amd64 upx-ucl amd64 3.96-2 [411 kB]\n\u001b[91mdebconf: delaying package configuration, since apt-utils is not installed\n\u001b[0mFetched 438 kB in 0s (7506 kB/s)\nSelecting previously unselected package libucl1:amd64.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 15718 files and directories currently installed.)\r\nPreparing to unpack .../libucl1_1.03+repack-6_amd64.deb ...\r\nUnpacking libucl1:amd64 (1.03+repack-6) ...\r\nSelecting previously unselected package upx-ucl.\r\nPreparing to unpack .../upx-ucl_3.96-2_amd64.deb ...\r\nUnpacking upx-ucl (3.96-2) ...\r\nSetting up libucl1:amd64 (1.03+repack-6) ...\r\nSetting up upx-ucl (3.96-2) ...\r\nupdate-alternatives: error: no alternatives for upx\r\nupdate-alternatives: using /usr/bin/upx-ucl to provide /usr/bin/upx (upx) in auto mode\r\nProcessing triggers for libc-bin (2.31-13+deb11u5) ...\r\nRemoving intermediate container dbceb9fc296a\n ---> d858829cbaf6\nStep 4/17 : ARG VERSION=main\n ---> Running in 6d357f508fe7\nRemoving intermediate container 6d357f508fe7\n ---> 561055e27bfa\nStep 5/17 : ARG BUILD=\"N/A\"\n ---> Running in c39cdf815806\nRemoving intermediate container c39cdf815806\n ---> dde02f21c0fa\nStep 6/17 : ENV GO111MODULE=on   CGO_ENABLED=0   GOOS=linux\n ---> Running in 92e09c4ac2d6\nRemoving intermediate container 92e09c4ac2d6\n ---> 66ba34513fa8\nStep 7/17 : COPY . /go/src/app/\n ---> 502f6603dac7\nStep 8/17 : RUN go build -a -installsuffix cgo -ldflags=\"-w -s -X github.com/bakito/adguardhome-sync/version.Version=${VERSION} -X github.com/bakito/adguardhome-sync/version.Build=${BUILD}\" -o adguardhome-sync .   && upx -q adguardhome-sync\n ---> Running in 5ba42fefd4c4\n\u001b[91mgo: downloading github.com/spf13/cobra v1.6.1\n\u001b[0m\u001b[91mgo: downloading golang.org/x/mod v0.6.0-dev.0.20220419223038-86c51ed26bb4\n\u001b[0m\u001b[91mgo: downloading github.com/mitchellh/go-homedir v1.1.0\n\u001b[0m\u001b[91mgo: downloading github.com/spf13/viper v1.14.0\n\u001b[0m\u001b[91mgo: downloading github.com/jinzhu/copier v0.3.5\n\u001b[0m\u001b[91mgo: downloading go.uber.org/zap v1.24.0\ngo: downloading github.com/gin-gonic/gin v1.8.2\ngo: downloading github.com/robfig/cron/v3 v3.0.1\n\u001b[0m\u001b[91mgo: downloading github.com/go-resty/resty/v2 v2.7.0\n\u001b[0m\u001b[91mgo: downloading github.com/gin-contrib/sse v0.1.0\ngo: downloading github.com/mattn/go-isatty v0.0.16\ngo: downloading golang.org/x/net v0.4.0\n\u001b[0m\u001b[91mgo: downloading gopkg.in/yaml.v2 v2.4.0\n\u001b[0m\u001b[91mgo: downloading github.com/go-playground/validator/v10 v10.11.1\n\u001b[0m\u001b[91mgo: downloading google.golang.org/protobuf v1.28.1\ngo: downloading github.com/ugorji/go/codec v1.2.7\n\u001b[0m\u001b[91mgo: downloading github.com/pelletier/go-toml/v2 v2.0.6\n\u001b[0m\u001b[91mgo: downloading golang.org/x/sys v0.3.0\n\u001b[0m\u001b[91mgo: downloading golang.org/x/text v0.5.0\n\u001b[0m\u001b[91mgo: downloading github.com/go-playground/universal-translator v0.18.0\n\u001b[0m\u001b[91mgo: downloading github.com/leodido/go-urn v1.2.1\n\u001b[0m\u001b[91mgo: downloading golang.org/x/crypto v0.0.0-20220525230936-793ad666bf5e\n\u001b[0m\u001b[91mgo: downloading github.com/pelletier/go-toml v1.9.5\n\u001b[0m\u001b[91mgo: downloading github.com/go-playground/locales v0.14.0\n\u001b[0m\u001b[91mgo: downloading gopkg.in/yaml.v3 v3.0.1\ngo: downloading github.com/spf13/cast v1.5.0\ngo: downloading github.com/spf13/afero v1.9.2\ngo: downloading github.com/subosito/gotenv v1.4.1\n\u001b[0m\u001b[91mgo: downloading github.com/fsnotify/fsnotify v1.6.0\ngo: downloading github.com/mitchellh/mapstructure v1.5.0\n\u001b[0m\u001b[91mgo: downloading github.com/spf13/jwalterweatherman v1.1.0\n\u001b[0m\u001b[91mgo: downloading github.com/spf13/pflag v1.0.5\n\u001b[0m\u001b[91mgo: downloading github.com/hashicorp/hcl v1.0.0\n\u001b[0m\u001b[91mgo: downloading gopkg.in/ini.v1 v1.67.0\ngo: downloading github.com/magiconair/properties v1.8.6\n\u001b[0m\u001b[91mgo: downloading go.uber.org/atomic v1.9.0\ngo: downloading go.uber.org/multierr v1.8.0\n\u001b[0m                       Ultimate Packer for eXecutables\n                          Copyright (C) 1996 - 2020\nUPX 3.96        Markus Oberhumer, Laszlo Molnar & John Reiser   Jan 23rd 2020\n\n        File size         Ratio      Format      Name\n   --------------------   ------   -----------   -----------\n  12824576 ->   5138732   40.07%   linux/amd64   adguardhome-sync\n\nPacked 1 file.\nRemoving intermediate container 5ba42fefd4c4\n ---> 45e8d4c75b14\nStep 9/17 : FROM scratch\n ---> \nStep 10/17 : WORKDIR /opt/go\n ---> Running in ef64acd5cf8b\nRemoving intermediate container ef64acd5cf8b\n ---> ebaa69ed3452\nStep 11/17 : LABEL maintainer=\"bakito <github@bakito.ch>\"\n ---> Running in 43439e1d72a6\nRemoving intermediate container 43439e1d72a6\n ---> fefdc77cfee1\nStep 12/17 : EXPOSE 8080\n ---> Running in c9f6e6759713\nRemoving intermediate container c9f6e6759713\n ---> fa425d3da8f9\nStep 13/17 : ENTRYPOINT [\"/opt/go/adguardhome-sync\"]\n ---> Running in 18791f1f4f35\nRemoving intermediate container 18791f1f4f35\n ---> 6227271d4471\nStep 14/17 : CMD [\"run\", \"--config\", \"/config/adguardhome-sync.yaml\"]\n ---> Running in 19b07bdca9e9\nRemoving intermediate container 19b07bdca9e9\n ---> 3a29fb21e883\nStep 15/17 : COPY --from=builder /go/src/app/adguardhome-sync  /opt/go/adguardhome-sync\n ---> 7e241b4c1385\nStep 16/17 : COPY --from=builder /etc/ssl/certs/ca-certificates.crt /etc/ssl/certs/ca-certificates.crt\n ---> 48f5d9edbff4\nStep 17/17 : USER 1001\n ---> Running in 4b4fddb97667\nRemoving intermediate container 4b4fddb97667\n ---> 9d14bd3e09c3\nSuccessfully built 9d14bd3e09c3\nSuccessfully tagged adguardhome-sync:latest\n","stderr":"","imageSize":5339045},"repair":{"violations":[{"name":"ruleAptGetInstallUseNoRec","position":{"start":4,"end":4,"columnStart":22,"columnEnd":44}},{"name":"ruleAptGetInstallThenRemoveAptLists","position":{"start":4,"end":4,"columnStart":22,"columnEnd":44}}],"repairedDockerfile":"FROM golang:1.19 as builder\n\nWORKDIR /go/src/app\n\nRUN apt-get update && apt-get install --no-install-recommends -y upx\n\nARG VERSION=main\nARG BUILD=\"N/A\"\n\nENV GO111MODULE=on \\\n  CGO_ENABLED=0 \\\n  GOOS=linux\n\nCOPY . /go/src/app/\n\nRUN go build -a -installsuffix cgo -ldflags=\"-w -s -X github.com/bakito/adguardhome-sync/version.Version=${VERSION} -X github.com/bakito/adguardhome-sync/version.Build=${BUILD}\" -o adguardhome-sync . \\\n  && upx -q adguardhome-sync\n\n# application image\nFROM scratch\nWORKDIR /opt/go\n\nLABEL maintainer=\"bakito <github@bakito.ch>\"\nEXPOSE 8080\nENTRYPOINT [\"/opt/go/adguardhome-sync\"]\nCMD [\"run\", \"--config\", \"/config/adguardhome-sync.yaml\"]\nCOPY --from=builder /go/src/app/adguardhome-sync  /opt/go/adguardhome-sync\nCOPY --from=builder /etc/ssl/certs/ca-certificates.crt /etc/ssl/certs/ca-certificates.crt\nUSER 1001\n"},"repairedBuild":{"startTimestamp":1672609597586,"endTimestamp":1672609645222,"error":null,"stdout":"Sending build context to Docker daemon    576kB\r\r\nStep 1/17 : FROM golang:1.19 as builder\n ---> 6650307efe4a\nStep 2/17 : WORKDIR /go/src/app\n ---> Running in c8c79aa6d655\nRemoving intermediate container c8c79aa6d655\n ---> a318eb24039d\nStep 3/17 : RUN apt-get update && apt-get install --no-install-recommends -y upx\n ---> Running in b303d3de1e6b\nGet:1 http://deb.debian.org/debian bullseye InRelease [116 kB]\nGet:2 http://deb.debian.org/debian-security bullseye-security InRelease [48.4 kB]\nGet:3 http://deb.debian.org/debian bullseye-updates InRelease [44.1 kB]\nGet:4 http://deb.debian.org/debian bullseye/main amd64 Packages [8183 kB]\nGet:5 http://deb.debian.org/debian-security bullseye-security/main amd64 Packages [210 kB]\nGet:6 http://deb.debian.org/debian bullseye-updates/main amd64 Packages [14.6 kB]\nFetched 8616 kB in 1s (6862 kB/s)\nReading package lists...\nReading package lists...\nBuilding dependency tree...\nReading state information...\nThe following additional packages will be installed:\n  libucl1\nThe following NEW packages will be installed:\n  libucl1 upx-ucl\n0 upgraded, 2 newly installed, 0 to remove and 1 not upgraded.\nNeed to get 438 kB of archives.\nAfter this operation, 2137 kB of additional disk space will be used.\nGet:1 http://deb.debian.org/debian bullseye/main amd64 libucl1 amd64 1.03+repack-6 [27.1 kB]\nGet:2 http://deb.debian.org/debian bullseye/main amd64 upx-ucl amd64 3.96-2 [411 kB]\n\u001b[91mdebconf: delaying package configuration, since apt-utils is not installed\n\u001b[0mFetched 438 kB in 0s (16.0 MB/s)\nSelecting previously unselected package libucl1:amd64.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 15718 files and directories currently installed.)\r\nPreparing to unpack .../libucl1_1.03+repack-6_amd64.deb ...\r\nUnpacking libucl1:amd64 (1.03+repack-6) ...\r\nSelecting previously unselected package upx-ucl.\r\nPreparing to unpack .../upx-ucl_3.96-2_amd64.deb ...\r\nUnpacking upx-ucl (3.96-2) ...\r\nSetting up libucl1:amd64 (1.03+repack-6) ...\r\nSetting up upx-ucl (3.96-2) ...\r\nupdate-alternatives: error: no alternatives for upx\r\nupdate-alternatives: using /usr/bin/upx-ucl to provide /usr/bin/upx (upx) in auto mode\r\nProcessing triggers for libc-bin (2.31-13+deb11u5) ...\r\nRemoving intermediate container b303d3de1e6b\n ---> 86dfb02690d9\nStep 4/17 : ARG VERSION=main\n ---> Running in 38967f21e652\nRemoving intermediate container 38967f21e652\n ---> d9aa2771ad80\nStep 5/17 : ARG BUILD=\"N/A\"\n ---> Running in 35e02ae2463f\nRemoving intermediate container 35e02ae2463f\n ---> 0f21329b7135\nStep 6/17 : ENV GO111MODULE=on   CGO_ENABLED=0   GOOS=linux\n ---> Running in e457e062e0f9\nRemoving intermediate container e457e062e0f9\n ---> 51a9bfee3a04\nStep 7/17 : COPY . /go/src/app/\n ---> 344a01e25324\nStep 8/17 : RUN go build -a -installsuffix cgo -ldflags=\"-w -s -X github.com/bakito/adguardhome-sync/version.Version=${VERSION} -X github.com/bakito/adguardhome-sync/version.Build=${BUILD}\" -o adguardhome-sync .   && upx -q adguardhome-sync\n ---> Running in 8cb2144045ef\n\u001b[91mgo: downloading golang.org/x/mod v0.6.0-dev.0.20220419223038-86c51ed26bb4\ngo: downloading github.com/mitchellh/go-homedir v1.1.0\ngo: downloading github.com/robfig/cron/v3 v3.0.1\n\u001b[0m\u001b[91mgo: downloading github.com/spf13/cobra v1.6.1\n\u001b[0m\u001b[91mgo: downloading github.com/spf13/viper v1.14.0\n\u001b[0m\u001b[91mgo: downloading go.uber.org/zap v1.24.0\n\u001b[0m\u001b[91mgo: downloading github.com/gin-gonic/gin v1.8.2\n\u001b[0m\u001b[91mgo: downloading github.com/go-resty/resty/v2 v2.7.0\n\u001b[0m\u001b[91mgo: downloading github.com/jinzhu/copier v0.3.5\n\u001b[0m\u001b[91mgo: downloading github.com/spf13/pflag v1.0.5\ngo: downloading gopkg.in/yaml.v3 v3.0.1\ngo: downloading gopkg.in/ini.v1 v1.67.0\n\u001b[0m\u001b[91mgo: downloading github.com/fsnotify/fsnotify v1.6.0\n\u001b[0m\u001b[91mgo: downloading github.com/magiconair/properties v1.8.6\n\u001b[0m\u001b[91mgo: downloading github.com/pelletier/go-toml/v2 v2.0.6\n\u001b[0m\u001b[91mgo: downloading github.com/spf13/cast v1.5.0\n\u001b[0m\u001b[91mgo: downloading github.com/spf13/jwalterweatherman v1.1.0\n\u001b[0m\u001b[91mgo: downloading github.com/hashicorp/hcl v1.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/subosito/gotenv v1.4.1\n\u001b[0m\u001b[91mgo: downloading github.com/mitchellh/mapstructure v1.5.0\n\u001b[0m\u001b[91mgo: downloading github.com/spf13/afero v1.9.2\n\u001b[0m\u001b[91mgo: downloading golang.org/x/sys v0.3.0\n\u001b[0m\u001b[91mgo: downloading golang.org/x/net v0.4.0\n\u001b[0m\u001b[91mgo: downloading github.com/gin-contrib/sse v0.1.0\n\u001b[0m\u001b[91mgo: downloading github.com/mattn/go-isatty v0.0.16\ngo: downloading google.golang.org/protobuf v1.28.1\ngo: downloading github.com/ugorji/go/codec v1.2.7\n\u001b[0m\u001b[91mgo: downloading gopkg.in/yaml.v2 v2.4.0\n\u001b[0m\u001b[91mgo: downloading github.com/go-playground/validator/v10 v10.11.1\n\u001b[0m\u001b[91mgo: downloading golang.org/x/text v0.5.0\n\u001b[0m\u001b[91mgo: downloading go.uber.org/atomic v1.9.0\n\u001b[0m\u001b[91mgo: downloading go.uber.org/multierr v1.8.0\n\u001b[0m\u001b[91mgo: downloading github.com/pelletier/go-toml v1.9.5\n\u001b[0m\u001b[91mgo: downloading github.com/go-playground/universal-translator v0.18.0\ngo: downloading golang.org/x/crypto v0.0.0-20220525230936-793ad666bf5e\n\u001b[0m\u001b[91mgo: downloading github.com/leodido/go-urn v1.2.1\n\u001b[0m\u001b[91mgo: downloading github.com/go-playground/locales v0.14.0\n\u001b[0m                       Ultimate Packer for eXecutables\n                          Copyright (C) 1996 - 2020\nUPX 3.96        Markus Oberhumer, Laszlo Molnar & John Reiser   Jan 23rd 2020\n\n        File size         Ratio      Format      Name\n   --------------------   ------   -----------   -----------\n  12824576 ->   5138732   40.07%   linux/amd64   adguardhome-sync\n\nPacked 1 file.\nRemoving intermediate container 8cb2144045ef\n ---> ee0cd2f27c70\nStep 9/17 : FROM scratch\n ---> \nStep 10/17 : WORKDIR /opt/go\n ---> Running in 73e6bf976a4a\nRemoving intermediate container 73e6bf976a4a\n ---> fceb581a1056\nStep 11/17 : LABEL maintainer=\"bakito <github@bakito.ch>\"\n ---> Running in 7db4fb0ecea8\nRemoving intermediate container 7db4fb0ecea8\n ---> 8b12abcfb54f\nStep 12/17 : EXPOSE 8080\n ---> Running in e334a199f5bb\nRemoving intermediate container e334a199f5bb\n ---> badec9016e31\nStep 13/17 : ENTRYPOINT [\"/opt/go/adguardhome-sync\"]\n ---> Running in 0ddac6fb0b70\nRemoving intermediate container 0ddac6fb0b70\n ---> b233e51463f7\nStep 14/17 : CMD [\"run\", \"--config\", \"/config/adguardhome-sync.yaml\"]\n ---> Running in 8c76b37a268b\nRemoving intermediate container 8c76b37a268b\n ---> 503605dee371\nStep 15/17 : COPY --from=builder /go/src/app/adguardhome-sync  /opt/go/adguardhome-sync\n ---> 9176b69c5093\nStep 16/17 : COPY --from=builder /etc/ssl/certs/ca-certificates.crt /etc/ssl/certs/ca-certificates.crt\n ---> 9ac17449fb41\nStep 17/17 : USER 1001\n ---> Running in e88ef941756e\nRemoving intermediate container e88ef941756e\n ---> 9e679259306e\nSuccessfully built 9e679259306e\nSuccessfully tagged adguardhome-sync:latest\n","stderr":"","imageSize":5339045},"endTime":1672609645474}