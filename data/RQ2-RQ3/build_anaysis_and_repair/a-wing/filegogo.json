{"repository":"https://github.com/a-wing/filegogo","dockerfilePath":"Dockerfile","startTime":1672349139175,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/a-wing/filegogo'...\n","error":null,"commit":"b3db562cb241b51313498a05185a500c41c30a7e"},"originalBuild":{"startTimestamp":1672349140073,"endTimestamp":1672349244930,"error":null,"stdout":"Sending build context to Docker daemon  874.5kB\r\r\nStep 1/16 : FROM node:18-alpine as builder-node\n18-alpine: Pulling from library/node\nDigest: sha256:a136ed7b0df71082cdb171f36d640ea3b392a5c70401c642326acee767b8c540\nStatus: Downloaded newer image for node:18-alpine\n ---> 6d7b7852bcd3\nStep 2/16 : WORKDIR /app\n ---> Running in abcad8d3e269\nRemoving intermediate container abcad8d3e269\n ---> 9fa836f356ba\nStep 3/16 : COPY package.json package-lock.json ./\n ---> 2dce31f43488\nStep 4/16 : RUN npm install\n ---> Running in 13aae6a96016\n\nadded 168 packages, and audited 169 packages in 4s\n\n16 packages are looking for funding\n  run `npm fund` for details\n\n1 high severity vulnerability\n\nTo address all issues, run:\n  npm audit fix\n\nRun `npm audit` for details.\n\u001b[91mnpm notice \nnpm \u001b[0m\u001b[91mnotice New major version of npm available! 8.19.2 -> 9.2.0\nnpm notice Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm \u001b[0m\u001b[91mnotice Run `npm install -g npm@9.2.0` to update!\n\u001b[0m\u001b[91mnpm \u001b[0m\u001b[91mnotice \n\u001b[0mRemoving intermediate container 13aae6a96016\n ---> dea264fa48c2\nStep 5/16 : COPY . .\n ---> 3f62c1bd34ae\nStep 6/16 : RUN npm run build\n ---> Running in fa87d49990fe\n\n> webapp@0.8.1 build\n> tsc && vite build\n\nvite v3.0.3 building for production...\ntransforming...\n✓ 142 modules transformed.\nrendering chunks...\nserver/build/index.html                  0.44 KiB\nserver/build/assets/index.d9b98bc5.css   2.08 KiB / gzip: 0.86 KiB\nserver/build/assets/index.a2905c4d.js    197.63 KiB / gzip: 66.19 KiB\nRemoving intermediate container fa87d49990fe\n ---> 464c055a512a\nStep 7/16 : FROM golang:1.18-buster AS builder\n1.18-buster: Pulling from library/golang\nc7c50787e2da: Already exists\naff359114acb: Already exists\n821dc261e045: Already exists\n3790459d63d5: Already exists\n8210b3b8d03d: Pulling fs layer\nbc9c70edc3ff: Pulling fs layer\n1a9861ca50b2: Pulling fs layer\n1a9861ca50b2: Verifying Checksum\n1a9861ca50b2: Download complete\n8210b3b8d03d: Verifying Checksum\n8210b3b8d03d: Download complete\nbc9c70edc3ff: Verifying Checksum\nbc9c70edc3ff: Download complete\n8210b3b8d03d: Pull complete\nbc9c70edc3ff: Pull complete\n1a9861ca50b2: Pull complete\nDigest: sha256:95c27939dbde08fc4c883687a0b98a57fa4f50190f303a46362b08f8e7f486d8\nStatus: Downloaded newer image for golang:1.18-buster\n ---> ca595afd21da\nStep 8/16 : WORKDIR /src\n ---> Running in acf7881bb79c\nRemoving intermediate container acf7881bb79c\n ---> a63867562a52\nStep 9/16 : COPY . .\n ---> b3fc196972c6\nStep 10/16 : COPY --from=builder-node /app/server/build /src/server/build\n ---> 4a7292cd4031\nStep 11/16 : RUN make build\n ---> Running in 3316e6456898\n\u001b[91mfatal: No names found, cannot describe anything.\n\u001b[0mGOOS= GOARCH= CGO_ENABLED=0 go build -trimpath -ldflags ' -X \"filegogo/version.Version=b3db562\" -X \"filegogo/version.Commit=b3db562cb241b51313498a05185a500c41c30a7e\" -X \"filegogo/version.Date=2022-12-29T21:26:57+0000\" ' -o filegogo ./main.go\n\u001b[91mgo: downloading github.com/rs/xid v1.4.0\n\u001b[0m\u001b[91mgo: downloading github.com/hashicorp/golang-lru v0.5.4\n\u001b[0m\u001b[91mgo: downloading github.com/a-wing/lightcable v0.1.1\ngo: downloading github.com/spf13/cobra v1.6.1\ngo: downloading github.com/pion/turn/v2 v2.0.9\n\u001b[0m\u001b[91mgo: downloading github.com/BurntSushi/toml v1.2.1\n\u001b[0m\u001b[91mgo: downloading github.com/qingstor/go-mime v0.1.0\n\u001b[0m\u001b[91mgo: downloading github.com/pion/webrtc/v3 v3.1.49\n\u001b[0m\u001b[91mgo: downloading github.com/gorilla/mux v1.8.0\ngo: downloading github.com/sirupsen/logrus v1.9.0\n\u001b[0m\u001b[91mgo: downloading golang.org/x/term v0.3.0\n\u001b[0m\u001b[91mgo: downloading github.com/schollz/progressbar/v3 v3.12.2\n\u001b[0m\u001b[91mgo: downloading github.com/djherbis/stow/v4 v4.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/sb-im/jsonrpc-lite v0.2.0\ngo: downloading github.com/gorilla/websocket v1.5.0\n\u001b[0m\u001b[91mgo: downloading github.com/pion/datachannel v1.5.2\n\u001b[0m\u001b[91mgo: downloading github.com/skip2/go-qrcode v0.0.0-20200617195104-da1b6568686e\n\u001b[0m\u001b[91mgo: downloading go.etcd.io/bbolt v1.3.6\n\u001b[0m\u001b[91mgo: downloading golang.org/x/sys v0.3.0\n\u001b[0m\u001b[91mgo: downloading github.com/spf13/pflag v1.0.5\n\u001b[0m\u001b[91mgo: downloading github.com/pion/sctp v1.8.3\ngo: downloading github.com/pion/logging v0.2.2\n\u001b[0m\u001b[91mgo: downloading github.com/mitchellh/colorstring v0.0.0-20190213212951-d06e56a500db\ngo: downloading github.com/mattn/go-runewidth v0.0.14\n\u001b[0m\u001b[91mgo: downloading github.com/pion/randutil v0.1.0\ngo: downloading github.com/pion/stun v0.3.5\n\u001b[0m\u001b[91mgo: downloading github.com/pion/transport v0.14.1\n\u001b[0m\u001b[91mgo: downloading github.com/rivo/uniseg v0.4.3\n\u001b[0m\u001b[91mgo: downloading github.com/pion/dtls/v2 v2.1.5\ngo: downloading github.com/pion/interceptor v0.1.12\ngo: downloading golang.org/x/net v0.4.0\n\u001b[0m\u001b[91mgo: downloading github.com/pion/rtcp v1.2.10\ngo: downloading github.com/pion/ice/v2 v2.2.12\n\u001b[0m\u001b[91mgo: downloading github.com/pion/sdp/v3 v3.0.6\ngo: downloading github.com/pion/rtp v1.7.13\n\u001b[0m\u001b[91mgo: downloading github.com/pion/srtp/v2 v2.0.10\n\u001b[0m\u001b[91mgo: downloading github.com/pion/mdns v0.0.5\ngo: downloading github.com/google/uuid v1.3.0\n\u001b[0m\u001b[91mgo: downloading github.com/pion/udp v0.1.1\n\u001b[0m\u001b[91mgo: downloading golang.org/x/crypto v0.4.0\n\u001b[0mRemoving intermediate container 3316e6456898\n ---> 1a5bd582fd86\nStep 12/16 : FROM alpine AS bin\n ---> 49176f190c7e\nStep 13/16 : COPY --from=builder /src/conf/filegogo.toml /etc/filegogo.toml\n ---> 6b3f37f17c14\nStep 14/16 : COPY --from=builder /src/filegogo /usr/bin/filegogo\n ---> 2803eaade3e4\nStep 15/16 : EXPOSE 8080/tcp\n ---> Running in 788a0137e8fb\nRemoving intermediate container 788a0137e8fb\n ---> 660e92bad2d0\nStep 16/16 : ENTRYPOINT [\"/usr/bin/filegogo\"]\n ---> Running in 206dd505007c\nRemoving intermediate container 206dd505007c\n ---> 92fd13f3f3d3\nSuccessfully built 92fd13f3f3d3\nSuccessfully tagged filegogo:latest\n","stderr":"","imageSize":24740381},"repair":{"violations":[{"name":"npmCacheCleanAfterInstall","position":{"start":6,"end":6,"columnStart":4,"columnEnd":15}}],"repairedDockerfile":"FROM node:18-alpine as builder-node\n\nWORKDIR /app\n\nCOPY package.json package-lock.json ./\n\nRUN npm install\n\nCOPY . .\n\nRUN npm run build\n\nFROM golang:1.18-buster AS builder\n\nWORKDIR /src\n\nCOPY . .\n\nCOPY --from=builder-node /app/server/build /src/server/build\n\nRUN make build\n\n# Bin\nFROM alpine AS bin\n\nCOPY --from=builder /src/conf/filegogo.toml /etc/filegogo.toml\nCOPY --from=builder /src/filegogo /usr/bin/filegogo\n\nEXPOSE 8080/tcp\n\nENTRYPOINT [\"/usr/bin/filegogo\"]\n"},"repairedBuild":{"startTimestamp":1672349245587,"endTimestamp":1672349304368,"error":null,"stdout":"Sending build context to Docker daemon  874.5kB\r\r\nStep 1/16 : FROM node:18-alpine as builder-node\n ---> 6d7b7852bcd3\nStep 2/16 : WORKDIR /app\n ---> Running in 70742476cb71\nRemoving intermediate container 70742476cb71\n ---> 85e5ff5a188d\nStep 3/16 : COPY package.json package-lock.json ./\n ---> 7d1a19c10c24\nStep 4/16 : RUN npm install\n ---> Running in f13563ca58ea\n\nadded 168 packages, and audited 169 packages in 3s\n\n16 packages are looking for funding\n  run `npm fund` for details\n\n1 high severity vulnerability\n\nTo address all issues, run:\n  npm audit fix\n\nRun `npm audit` for details.\n\u001b[91mnpm notice \nnpm\u001b[0m\u001b[91m notice New major version of npm available! 8.19.2 -> 9.2.0\nnpm notice Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm notice Run `npm install -g npm@9.2.0` to update!\nnpm notice\u001b[0m\u001b[91m \n\u001b[0mRemoving intermediate container f13563ca58ea\n ---> 896493a5668d\nStep 5/16 : COPY . .\n ---> 0da45cd24fd3\nStep 6/16 : RUN npm run build\n ---> Running in 39f9c91b2e80\n\n> webapp@0.8.1 build\n> tsc && vite build\n\nvite v3.0.3 building for production...\ntransforming...\n✓ 142 modules transformed.\nrendering chunks...\nserver/build/index.html                  0.44 KiB\nserver/build/assets/index.d9b98bc5.css   2.08 KiB / gzip: 0.86 KiB\nserver/build/assets/index.a2905c4d.js    197.63 KiB / gzip: 66.19 KiB\nRemoving intermediate container 39f9c91b2e80\n ---> 7e15c5820915\nStep 7/16 : FROM golang:1.18-buster AS builder\n ---> ca595afd21da\nStep 8/16 : WORKDIR /src\n ---> Running in ffd18fae1abf\nRemoving intermediate container ffd18fae1abf\n ---> add18a9c397b\nStep 9/16 : COPY . .\n ---> ca5ba36cf8f4\nStep 10/16 : COPY --from=builder-node /app/server/build /src/server/build\n ---> 6bc4b99a7328\nStep 11/16 : RUN make build\n ---> Running in 98c2559d459c\n\u001b[91mfatal: No names found, cannot describe anything.\n\u001b[0mGOOS= GOARCH= CGO_ENABLED=0 go build -trimpath -ldflags ' -X \"filegogo/version.Version=b3db562\" -X \"filegogo/version.Commit=b3db562cb241b51313498a05185a500c41c30a7e\" -X \"filegogo/version.Date=2022-12-29T21:28:02+0000\" ' -o filegogo ./main.go\n\u001b[91mgo: downloading github.com/BurntSushi/toml v1.2.1\n\u001b[0m\u001b[91mgo: downloading github.com/pion/webrtc/v3 v3.1.49\n\u001b[0m\u001b[91mgo: downloading github.com/a-wing/lightcable v0.1.1\ngo: downloading github.com/gorilla/mux v1.8.0\n\u001b[0m\u001b[91mgo: downloading github.com/qingstor/go-mime v0.1.0\n\u001b[0m\u001b[91mgo: downloading github.com/djherbis/stow/v4 v4.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/hashicorp/golang-lru v0.5.4\n\u001b[0m\u001b[91mgo: downloading go.etcd.io/bbolt v1.3.6\n\u001b[0m\u001b[91mgo: downloading github.com/schollz/progressbar/v3 v3.12.2\n\u001b[0m\u001b[91mgo: downloading github.com/rs/xid v1.4.0\n\u001b[0m\u001b[91mgo: downloading github.com/sirupsen/logrus v1.9.0\n\u001b[0m\u001b[91mgo: downloading github.com/spf13/cobra v1.6.1\n\u001b[0m\u001b[91mgo: downloading github.com/skip2/go-qrcode v0.0.0-20200617195104-da1b6568686e\ngo: downloading golang.org/x/term v0.3.0\n\u001b[0m\u001b[91mgo: downloading github.com/gorilla/websocket v1.5.0\ngo: downloading github.com/sb-im/jsonrpc-lite v0.2.0\n\u001b[0m\u001b[91mgo: downloading github.com/pion/turn/v2 v2.0.9\n\u001b[0m\u001b[91mgo: downloading github.com/pion/datachannel v1.5.2\n\u001b[0m\u001b[91mgo: downloading golang.org/x/sys v0.3.0\n\u001b[0m\u001b[91mgo: downloading github.com/pion/sctp v1.8.3\n\u001b[0m\u001b[91mgo: downloading github.com/pion/logging v0.2.2\n\u001b[0m\u001b[91mgo: downloading github.com/spf13/pflag v1.0.5\n\u001b[0m\u001b[91mgo: downloading github.com/pion/randutil v0.1.0\n\u001b[0m\u001b[91mgo: downloading github.com/pion/transport v0.14.1\n\u001b[0m\u001b[91mgo: downloading github.com/pion/stun v0.3.5\n\u001b[0m\u001b[91mgo: downloading github.com/mitchellh/colorstring v0.0.0-20190213212951-d06e56a500db\ngo: downloading github.com/mattn/go-runewidth v0.0.14\n\u001b[0m\u001b[91mgo: downloading github.com/rivo/uniseg v0.4.3\n\u001b[0m\u001b[91mgo: downloading github.com/pion/rtcp v1.2.10\ngo: downloading golang.org/x/net v0.4.0\n\u001b[0m\u001b[91mgo: downloading github.com/pion/interceptor v0.1.12\n\u001b[0m\u001b[91mgo: downloading github.com/pion/dtls/v2 v2.1.5\n\u001b[0m\u001b[91mgo: downloading github.com/pion/rtp v1.7.13\ngo: downloading github.com/pion/ice/v2 v2.2.12\n\u001b[0m\u001b[91mgo: downloading github.com/pion/srtp/v2 v2.0.10\n\u001b[0m\u001b[91mgo: downloading github.com/pion/sdp/v3 v3.0.6\n\u001b[0m\u001b[91mgo: downloading github.com/google/uuid v1.3.0\ngo: downloading github.com/pion/mdns v0.0.5\n\u001b[0m\u001b[91mgo: downloading github.com/pion/udp v0.1.1\n\u001b[0m\u001b[91mgo: downloading golang.org/x/crypto v0.4.0\n\u001b[0mRemoving intermediate container 98c2559d459c\n ---> 42c1c20de25f\nStep 12/16 : FROM alpine AS bin\n ---> 49176f190c7e\nStep 13/16 : COPY --from=builder /src/conf/filegogo.toml /etc/filegogo.toml\n ---> 355a5af91184\nStep 14/16 : COPY --from=builder /src/filegogo /usr/bin/filegogo\n ---> b870e6e91e9b\nStep 15/16 : EXPOSE 8080/tcp\n ---> Running in 77bc697dd501\nRemoving intermediate container 77bc697dd501\n ---> 7cb2caa0f352\nStep 16/16 : ENTRYPOINT [\"/usr/bin/filegogo\"]\n ---> Running in ef8cc14f74fe\nRemoving intermediate container ef8cc14f74fe\n ---> 1ab070d0af76\nSuccessfully built 1ab070d0af76\nSuccessfully tagged filegogo:latest\n","stderr":"","imageSize":24740381},"endTime":1672349304762}