{"repository":"https://github.com/xyctruth/profiler","dockerfilePath":"Dockerfile","startTime":1673044156198,"endTime":1673044459113,"clone":{"startTime":1673044156199,"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/xyctruth/profiler'...\n","error":null,"endTime":1673044157134,"commit":"4551f3d449d6bc3368d6db75e292c645507a4480"},"originalBuild":{"startTime":1673044157226,"endTime":1673044365463,"error":null,"stdout":"Sending build context to Docker daemon  8.266MB\r\r\nStep 1/32 : FROM golang:1.18 as builder\n1.18: Pulling from library/golang\n32de3c850997: Already exists\nfa1d4c8d85a4: Already exists\nc796299bbbdd: Already exists\n81283a9569ad: Already exists\nc768848b86a2: Already exists\n160a777925fe: Pulling fs layer\n1be94824532a: Pulling fs layer\n1be94824532a: Verifying Checksum\n1be94824532a: Download complete\n160a777925fe: Verifying Checksum\n160a777925fe: Download complete\n160a777925fe: Pull complete\n1be94824532a: Pull complete\nDigest: sha256:00d63686b480f6dc866e93ddc4b29efa2db03274a687e6495c2cfbfe615d638e\nStatus: Downloaded newer image for golang:1.18\n ---> fffd0d9a59da\nStep 2/32 : WORKDIR /workspace\n ---> Running in ad8d4662c4a5\nRemoving intermediate container ad8d4662c4a5\n ---> 183c716bdd9c\nStep 3/32 : COPY ./ ./\n ---> 17801bddc33f\nStep 4/32 : ARG VERSION\n ---> Running in b56e4eaa9240\nRemoving intermediate container b56e4eaa9240\n ---> a6b94c8bd860\nStep 5/32 : ARG GITVERSION\n ---> Running in f4dd98d76213\nRemoving intermediate container f4dd98d76213\n ---> 8ade9dfebd67\nStep 6/32 : RUN CGO_ENABLED=0 GOOS=linux GOARCH=amd64 GO111MODULE=on     go build -a -ldflags \"-s -w -X github.com/xyctruth/profiler/version.Version=${VERSION:-undefined} -X github.com/xyctruth/profiler/version.GitRevision=${GITVERSION:-undefined}\"     -o profiler ./server/main.go\n ---> Running in 6c7d1165e95c\n\u001b[91mgo: downloading github.com/sirupsen/logrus v1.9.0\n\u001b[0m\u001b[91mgo: downloading github.com/felixge/fgprof v0.9.3\n\u001b[0m\u001b[91mgo: downloading github.com/xyctruth/stream v0.0.0-20220801054713-e6d11cda2f60\ngo: downloading github.com/fsnotify/fsnotify v1.6.0\n\u001b[0m\u001b[91mgo: downloading github.com/google/pprof v0.0.0-20220729232143-a41b82acbcb1\ngo: downloading github.com/spf13/viper v1.14.0\ngo: downloading github.com/gin-gonic/gin v1.8.1\ngo: downloading github.com/dgraph-io/badger/v3 v3.2103.4\n\u001b[0m\u001b[91mgo: downloading github.com/vmihailenco/msgpack/v5 v5.3.5\n\u001b[0m\u001b[91mgo: downloading golang.org/x/sys v0.0.0-20221010170243-090e33056c14\n\u001b[0m\u001b[91mgo: downloading github.com/gin-contrib/sse v0.1.0\ngo: downloading github.com/mattn/go-isatty v0.0.14\ngo: downloading golang.org/x/net v0.0.0-20221014081412-f15817d10f9b\n\u001b[0m\u001b[91mgo: downloading gopkg.in/yaml.v2 v2.4.0\ngo: downloading github.com/ugorji/go/codec v1.2.7\ngo: downloading github.com/go-playground/validator/v10 v10.10.0\n\u001b[0m\u001b[91mgo: downloading google.golang.org/protobuf v1.28.1\n\u001b[0m\u001b[91mgo: downloading github.com/pelletier/go-toml/v2 v2.0.5\n\u001b[0m\u001b[91mgo: downloading github.com/pelletier/go-toml v1.9.5\n\u001b[0m\u001b[91mgo: downloading github.com/vmihailenco/tagparser/v2 v2.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/spf13/afero v1.9.2\n\u001b[0m\u001b[91mgo: downloading github.com/spf13/jwalterweatherman v1.1.0\n\u001b[0m\u001b[91mgo: downloading github.com/spf13/cast v1.5.0\ngo: downloading github.com/spf13/pflag v1.0.5\ngo: downloading gopkg.in/yaml.v3 v3.0.1\n\u001b[0m\u001b[91mgo: downloading github.com/mitchellh/mapstructure v1.5.0\n\u001b[0m\u001b[91mgo: downloading github.com/magiconair/properties v1.8.6\ngo: downloading github.com/hashicorp/hcl v1.0.0\ngo: downloading gopkg.in/ini.v1 v1.67.0\n\u001b[0m\u001b[91mgo: downloading github.com/subosito/gotenv v1.4.1\n\u001b[0m\u001b[91mgo: downloading golang.org/x/exp v0.0.0-20220303212507-bbda1eaf7a17\n\u001b[0m\u001b[91mgo: downloading github.com/go-playground/universal-translator v0.18.0\ngo: downloading golang.org/x/text v0.4.0\ngo: downloading golang.org/x/crypto v0.0.0-20220525230936-793ad666bf5e\ngo: downloading github.com/leodido/go-urn v1.2.1\n\u001b[0m\u001b[91mgo: downloading github.com/go-playground/locales v0.14.0\n\u001b[0m\u001b[91mgo: downloading github.com/ianlancetaylor/demangle v0.0.0-20220319035150-800ac71e25c2\n\u001b[0m\u001b[91mgo: downloading github.com/dustin/go-humanize v1.0.0\ngo: downloading github.com/dgraph-io/ristretto v0.1.1\ngo: downloading go.opencensus.io v0.23.0\n\u001b[0m\u001b[91mgo: downloading github.com/pkg/errors v0.9.1\ngo: downloading github.com/golang/protobuf v1.5.2\n\u001b[0m\u001b[91mgo: downloading github.com/gogo/protobuf v1.3.2\n\u001b[0m\u001b[91mgo: downloading github.com/google/flatbuffers v1.12.1\n\u001b[0m\u001b[91mgo: downloading github.com/golang/snappy v0.0.3\n\u001b[0m\u001b[91mgo: downloading github.com/klauspost/compress v1.12.3\n\u001b[0m\u001b[91mgo: downloading github.com/cespare/xxhash v1.1.0\n\u001b[0m\u001b[91mgo: downloading github.com/golang/glog v0.0.0-20160126235308-23def4e6c14b\ngo: downloading github.com/golang/groupcache v0.0.0-20210331224755-41bb18bfe9da\n\u001b[0m\u001b[91mgo: downloading github.com/cespare/xxhash/v2 v2.1.2\n\u001b[0mRemoving intermediate container 6c7d1165e95c\n ---> 0f630b95d5a3\nStep 7/32 : FROM node:16 as ui-builder\n ---> c910109adbfd\nStep 8/32 : WORKDIR /workspace\n ---> Running in 7f2f8564f90e\nRemoving intermediate container 7f2f8564f90e\n ---> 56155db64c9d\nStep 9/32 : COPY ui ./\n ---> 98a6d2ff8e03\nStep 10/32 : RUN npm install --registry=https://registry.npm.taobao.org\n ---> Running in bf6e216d1d00\n\nadded 73 packages in 11s\n\n1 package is looking for funding\n  run `npm fund` for details\n\u001b[91mnpm \u001b[0m\u001b[91mnotice\u001b[0m\u001b[91m \nnpm\u001b[0m\u001b[91m notice\u001b[0m\u001b[91m New major version of npm available! 8.19.3 -> 9.2.0\nnpm notice\u001b[0m\u001b[91m Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm notice\u001b[0m\u001b[91m Run `npm install -g npm@9.2.0` to update!\nnpm \u001b[0m\u001b[91mnotice\u001b[0m\u001b[91m \n\u001b[0mRemoving intermediate container bf6e216d1d00\n ---> 70c0c29c7a83\nStep 11/32 : RUN npm run build\n ---> Running in 5687c60dc693\n\n> profiler-ui@0.0.0 build\n> vite build\n\n\u001b[91mfatal: not a git repository (or any of the parent directories): .git\n\u001b[0mundefined\nvite v2.7.0 building for production...\ntransforming...\nâœ“ 2023 modules transformed.\nrendering chunks...\ndist/index.html                                    0.48 KiB\ndist/assets/index.cb0d956c.js                      2.86 KiB / gzip: 1.50 KiB\ndist/assets/plugin-vue_export-helper.21dcd24c.js   0.09 KiB / gzip: 0.10 KiB\ndist/assets/404.fd2e96f7.js                        0.25 KiB / gzip: 0.22 KiB\ndist/assets/index.4f443a39.css                     0.48 KiB / gzip: 0.28 KiB\ndist/assets/index.11477150.css                     275.26 KiB / gzip: 39.69 KiB\ndist/assets/vendor.4de3343e.js                     752.38 KiB / gzip: 241.00 KiB\ndist/assets/index.895d4c0f.js                      1062.50 KiB / gzip: 347.39 KiB\n\u001b[91m\n(!) Some chunks are larger than 500 KiB after minification. Consider:\n- Using dynamic import() to code-split the application\n- Use build.rollupOptions.output.manualChunks to improve chunking: https://rollupjs.org/guide/en/#outputmanualchunks\n- Adjust chunk size limit for this warning via build.chunkSizeWarningLimit.\n\u001b[0mRemoving intermediate container 5687c60dc693\n ---> 62559361ee0c\nStep 12/32 : FROM nginx:alpine\nalpine: Pulling from library/nginx\nc158987b0551: Already exists\n1e35f6679fab: Pulling fs layer\ncb9626c74200: Pulling fs layer\nb6334b6ace34: Pulling fs layer\nf1d1c9928c82: Pulling fs layer\n9b6f639ec6ea: Pulling fs layer\nee68d3549ec8: Pulling fs layer\nf1d1c9928c82: Waiting\n9b6f639ec6ea: Waiting\nee68d3549ec8: Waiting\nb6334b6ace34: Verifying Checksum\nb6334b6ace34: Download complete\ncb9626c74200: Download complete\n1e35f6679fab: Verifying Checksum\n1e35f6679fab: Download complete\nf1d1c9928c82: Verifying Checksum\nf1d1c9928c82: Download complete\n9b6f639ec6ea: Download complete\n1e35f6679fab: Pull complete\ncb9626c74200: Pull complete\nee68d3549ec8: Download complete\nb6334b6ace34: Pull complete\nf1d1c9928c82: Pull complete\n9b6f639ec6ea: Pull complete\nee68d3549ec8: Pull complete\nDigest: sha256:dd8a054d7ef030e94a6449783605d6c306c1f69c10c2fa06b66a030e0d1db793\nStatus: Downloaded newer image for nginx:alpine\n ---> 1e415454686a\nStep 13/32 : WORKDIR /profiler\n ---> Running in 37d0abd1cc55\nRemoving intermediate container 37d0abd1cc55\n ---> c89f6d042287\nStep 14/32 : RUN apk update\n ---> Running in 5d33f6ccfd80\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\nv3.17.0-332-g13963e2526 [https://dl-cdn.alpinelinux.org/alpine/v3.17/main]\nv3.17.0-339-g964e761a8f [https://dl-cdn.alpinelinux.org/alpine/v3.17/community]\nOK: 17825 distinct packages available\nRemoving intermediate container 5d33f6ccfd80\n ---> 3cc538991019\nStep 15/32 : RUN apk add graphviz\n ---> Running in fce21e397376\n(1/16) Installing libxrender (0.9.11-r0)\n(2/16) Installing pixman (0.42.2-r0)\n(3/16) Installing cairo (1.17.6-r3)\n(4/16) Installing graphviz-libs (7.0.5-r0)\n(5/16) Installing libgcc (12.2.1_git20220924-r4)\n(6/16) Installing libffi (3.4.4-r0)\n(7/16) Installing libblkid (2.38.1-r1)\n(8/16) Installing libmount (2.38.1-r1)\n(9/16) Installing glib (2.74.4-r0)\n(10/16) Installing libxft (2.3.7-r0)\n(11/16) Installing fribidi (1.0.12-r0)\n(12/16) Installing graphite2 (1.3.14-r2)\n(13/16) Installing harfbuzz (5.3.1-r1)\n(14/16) Installing pango (1.50.12-r0)\n(15/16) Installing libstdc++ (12.2.1_git20220924-r4)\n(16/16) Installing graphviz (7.0.5-r0)\nExecuting busybox-1.35.0-r29.trigger\nExecuting graphviz-7.0.5-r0.trigger\nOK: 57 MiB in 78 packages\nRemoving intermediate container fce21e397376\n ---> bb4fca82247b\nStep 16/32 : RUN apk add dumb-init\n ---> Running in d026a66d25f4\n(1/1) Installing dumb-init (1.2.5-r2)\nExecuting busybox-1.35.0-r29.trigger\nOK: 57 MiB in 79 packages\nRemoving intermediate container d026a66d25f4\n ---> 11a9748c940b\nStep 17/32 : COPY --from=builder /workspace/profiler .\n ---> 45e480266da1\nStep 18/32 : COPY collector.yaml ./config/collector.yaml\n ---> f3ef3cf5c477\nStep 19/32 : COPY pkg/internal/v1175/assets/trace_viewer_full ./pkg/internal/v1175/assets/trace_viewer_full\n ---> b215be27d208\nStep 20/32 : COPY pkg/internal/v1175/assets/webcomponents.min.js ./pkg/internal/v1175/assets/webcomponents.min.js\n ---> a74a5b6b4b1a\nStep 21/32 : COPY --from=ui-builder /workspace/dist /usr/share/nginx/html/\n ---> 3ed960c4677b\nStep 22/32 : COPY --from=ui-builder /workspace/nginx.conf /etc/nginx/nginx.conf\n ---> 95e44f6466f2\nStep 23/32 : ENV PROFILER_API_URL=\"127.0.0.1:8080\"\n ---> Running in a3d371cbf59f\nRemoving intermediate container a3d371cbf59f\n ---> 390111d77a64\nStep 24/32 : ENV DATA_PATH=/profiler/data\n ---> Running in c36719020516\nRemoving intermediate container c36719020516\n ---> 4b61f492c8ff\nStep 25/32 : ENV CONFIG_PATH=/profiler/config/collector.yaml\n ---> Running in dd739cda0427\nRemoving intermediate container dd739cda0427\n ---> 5680cd9c15d4\nStep 26/32 : ENV DATA_GC_INTERNAL=5m\n ---> Running in ca11a77f63af\nRemoving intermediate container ca11a77f63af\n ---> ad408ffc9d99\nStep 27/32 : ENV UI_GC_INTERNAL=1m\n ---> Running in cc348a34264a\nRemoving intermediate container cc348a34264a\n ---> 6b203b5c3e85\nStep 28/32 : COPY entrypoint.sh ./entrypoint.sh\n ---> 9914b6c51cf6\nStep 29/32 : RUN chmod +x entrypoint.sh\n ---> Running in 4c7dee37ca93\nRemoving intermediate container 4c7dee37ca93\n ---> 61cfc971ee0f\nStep 30/32 : EXPOSE 80 8080\n ---> Running in a2591ab52c76\nRemoving intermediate container a2591ab52c76\n ---> 174d1a6f503e\nStep 31/32 : ENTRYPOINT [\"dumb-init\", \"--\"]\n ---> Running in 70c15d416d53\nRemoving intermediate container 70c15d416d53\n ---> 967bfb4079d1\nStep 32/32 : CMD [\"./entrypoint.sh\"]\n ---> Running in 001367f10c2a\nRemoving intermediate container 001367f10c2a\n ---> eecbf66ec413\nSuccessfully built eecbf66ec413\nSuccessfully tagged profiler:latest\n","stderr":"","imageSize":80519687},"repair":{"startTime":1673044365534,"endTime":1673044365622,"violations":[{"name":"npmCacheCleanAfterInstall","position":{"start":14,"end":14,"columnStart":4,"columnEnd":58}},{"name":"apkAddUseNoCache","position":{"start":23,"end":23,"columnStart":4,"columnEnd":20}},{"name":"apkAddUseNoCache","position":{"start":24,"end":24,"columnStart":4,"columnEnd":21}}],"repairedDockerfile":"# Build Server\nFROM golang:1.18 as builder\nWORKDIR /workspace\nCOPY ./ ./\nARG VERSION\nARG GITVERSION\nRUN CGO_ENABLED=0 GOOS=linux GOARCH=amd64 GO111MODULE=on \\\n    go build -a -ldflags \"-s -w -X github.com/xyctruth/profiler/version.Version=${VERSION:-undefined} -X github.com/xyctruth/profiler/version.GitRevision=${GITVERSION:-undefined}\" \\\n    -o profiler ./server/main.go\n\n# Build Ui\nFROM node:16 as ui-builder\nWORKDIR /workspace\nCOPY ui ./\nRUN npm install --registry=https://registry.npm.taobao.org && npm cache clean --force;\nRUN npm run build\n\n\n# profiler image\nFROM nginx:alpine\nWORKDIR /profiler\n\nRUN apk update\nRUN apk add --no-cache graphviz\nRUN apk add --no-cache dumb-init\n\n# server\nCOPY --from=builder /workspace/profiler .\nCOPY collector.yaml ./config/collector.yaml\n# go trace assets\nCOPY pkg/internal/v1175/assets/trace_viewer_full ./pkg/internal/v1175/assets/trace_viewer_full\nCOPY pkg/internal/v1175/assets/webcomponents.min.js ./pkg/internal/v1175/assets/webcomponents.min.js\n\n# ui\nCOPY --from=ui-builder /workspace/dist /usr/share/nginx/html/\nCOPY --from=ui-builder /workspace/nginx.conf /etc/nginx/nginx.conf\n\n#env\nENV PROFILER_API_URL=\"127.0.0.1:8080\"\nENV DATA_PATH=/profiler/data\nENV CONFIG_PATH=/profiler/config/collector.yaml\nENV DATA_GC_INTERNAL=5m\nENV UI_GC_INTERNAL=1m\n\nCOPY entrypoint.sh ./entrypoint.sh\nRUN chmod +x entrypoint.sh\nEXPOSE 80 8080\n\nENTRYPOINT [\"dumb-init\", \"--\"]\nCMD [\"./entrypoint.sh\"]\n"},"repairedBuild":{"startTime":1673044365836,"endTime":1673044458840,"error":null,"stdout":"Sending build context to Docker daemon  8.266MB\r\r\nStep 1/32 : FROM golang:1.18 as builder\n ---> fffd0d9a59da\nStep 2/32 : WORKDIR /workspace\n ---> Running in 5e5c3a676433\nRemoving intermediate container 5e5c3a676433\n ---> b1fcdee603a0\nStep 3/32 : COPY ./ ./\n ---> 6e8a6e9c11ee\nStep 4/32 : ARG VERSION\n ---> Running in 56ccf6090b11\nRemoving intermediate container 56ccf6090b11\n ---> aa1defe65ea3\nStep 5/32 : ARG GITVERSION\n ---> Running in 6661dee6c7f7\nRemoving intermediate container 6661dee6c7f7\n ---> 08a00fcf3d19\nStep 6/32 : RUN CGO_ENABLED=0 GOOS=linux GOARCH=amd64 GO111MODULE=on     go build -a -ldflags \"-s -w -X github.com/xyctruth/profiler/version.Version=${VERSION:-undefined} -X github.com/xyctruth/profiler/version.GitRevision=${GITVERSION:-undefined}\"     -o profiler ./server/main.go\n ---> Running in 1965eec73def\n\u001b[91mgo: downloading github.com/sirupsen/logrus v1.9.0\ngo: downloading github.com/spf13/viper v1.14.0\n\u001b[0m\u001b[91mgo: downloading github.com/fsnotify/fsnotify v1.6.0\n\u001b[0m\u001b[91mgo: downloading github.com/vmihailenco/msgpack/v5 v5.3.5\ngo: downloading github.com/gin-gonic/gin v1.8.1\n\u001b[0m\u001b[91mgo: downloading github.com/felixge/fgprof v0.9.3\n\u001b[0m\u001b[91mgo: downloading github.com/google/pprof v0.0.0-20220729232143-a41b82acbcb1\n\u001b[0m\u001b[91mgo: downloading github.com/xyctruth/stream v0.0.0-20220801054713-e6d11cda2f60\n\u001b[0m\u001b[91mgo: downloading github.com/dgraph-io/badger/v3 v3.2103.4\n\u001b[0m\u001b[91mgo: downloading golang.org/x/exp v0.0.0-20220303212507-bbda1eaf7a17\n\u001b[0m\u001b[91mgo: downloading github.com/vmihailenco/tagparser/v2 v2.0.0\n\u001b[0m\u001b[91mgo: downloading golang.org/x/sys v0.0.0-20221010170243-090e33056c14\n\u001b[0m\u001b[91mgo: downloading github.com/spf13/cast v1.5.0\ngo: downloading github.com/spf13/jwalterweatherman v1.1.0\ngo: downloading github.com/mitchellh/mapstructure v1.5.0\n\u001b[0m\u001b[91mgo: downloading github.com/spf13/pflag v1.0.5\n\u001b[0m\u001b[91mgo: downloading github.com/spf13/afero v1.9.2\ngo: downloading github.com/magiconair/properties v1.8.6\n\u001b[0m\u001b[91mgo: downloading github.com/subosito/gotenv v1.4.1\n\u001b[0m\u001b[91mgo: downloading github.com/pelletier/go-toml/v2 v2.0.5\n\u001b[0m\u001b[91mgo: downloading github.com/hashicorp/hcl v1.0.0\n\u001b[0m\u001b[91mgo: downloading gopkg.in/ini.v1 v1.67.0\n\u001b[0m\u001b[91mgo: downloading gopkg.in/yaml.v3 v3.0.1\n\u001b[0m\u001b[91mgo: downloading github.com/mattn/go-isatty v0.0.14\n\u001b[0m\u001b[91mgo: downloading github.com/gin-contrib/sse v0.1.0\n\u001b[0m\u001b[91mgo: downloading golang.org/x/net v0.0.0-20221014081412-f15817d10f9b\n\u001b[0m\u001b[91mgo: downloading google.golang.org/protobuf v1.28.1\ngo: downloading gopkg.in/yaml.v2 v2.4.0\n\u001b[0m\u001b[91mgo: downloading github.com/ugorji/go/codec v1.2.7\n\u001b[0m\u001b[91mgo: downloading github.com/go-playground/validator/v10 v10.10.0\n\u001b[0m\u001b[91mgo: downloading golang.org/x/text v0.4.0\n\u001b[0m\u001b[91mgo: downloading github.com/pelletier/go-toml v1.9.5\n\u001b[0m\u001b[91mgo: downloading github.com/leodido/go-urn v1.2.1\ngo: downloading github.com/go-playground/universal-translator v0.18.0\n\u001b[0m\u001b[91mgo: downloading golang.org/x/crypto v0.0.0-20220525230936-793ad666bf5e\n\u001b[0m\u001b[91mgo: downloading github.com/go-playground/locales v0.14.0\n\u001b[0m\u001b[91mgo: downloading github.com/ianlancetaylor/demangle v0.0.0-20220319035150-800ac71e25c2\n\u001b[0m\u001b[91mgo: downloading go.opencensus.io v0.23.0\n\u001b[0m\u001b[91mgo: downloading github.com/golang/protobuf v1.5.2\n\u001b[0m\u001b[91mgo: downloading github.com/pkg/errors v0.9.1\n\u001b[0m\u001b[91mgo: downloading github.com/dgraph-io/ristretto v0.1.1\ngo: downloading github.com/dustin/go-humanize v1.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/gogo/protobuf v1.3.2\n\u001b[0m\u001b[91mgo: downloading github.com/google/flatbuffers v1.12.1\n\u001b[0m\u001b[91mgo: downloading github.com/golang/snappy v0.0.3\n\u001b[0m\u001b[91mgo: downloading github.com/cespare/xxhash v1.1.0\ngo: downloading github.com/klauspost/compress v1.12.3\n\u001b[0m\u001b[91mgo: downloading github.com/cespare/xxhash/v2 v2.1.2\n\u001b[0m\u001b[91mgo: downloading github.com/golang/glog v0.0.0-20160126235308-23def4e6c14b\n\u001b[0m\u001b[91mgo: downloading github.com/golang/groupcache v0.0.0-20210331224755-41bb18bfe9da\n\u001b[0mRemoving intermediate container 1965eec73def\n ---> 3d7cffb0bdf3\nStep 7/32 : FROM node:16 as ui-builder\n ---> c910109adbfd\nStep 8/32 : WORKDIR /workspace\n ---> Running in fc559509dbaa\nRemoving intermediate container fc559509dbaa\n ---> 783f0a9ada1d\nStep 9/32 : COPY ui ./\n ---> 2cf7d5bc06be\nStep 10/32 : RUN npm install --registry=https://registry.npm.taobao.org && npm cache clean --force;\n ---> Running in db724a709873\n\nadded 73 packages in 5s\n\n1 package is looking for funding\n  run `npm fund` for details\n\u001b[91mnpm notice \nnpm \u001b[0m\u001b[91mnotice New major version of npm available! 8.19.3 -> 9.2.0\nnpm notice Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm notice\u001b[0m\u001b[91m Run `npm install -g npm@9.2.0` to update!\nnpm notice\u001b[0m\u001b[91m \n\u001b[0m\u001b[91mnpm\u001b[0m\u001b[91m WARN \u001b[0m\u001b[91musing --force\u001b[0m\u001b[91m Recommended protections disabled.\n\u001b[0mRemoving intermediate container db724a709873\n ---> 95d216272a89\nStep 11/32 : RUN npm run build\n ---> Running in 0c609ce20508\n\n> profiler-ui@0.0.0 build\n> vite build\n\n\u001b[91mfatal: not a git repository (or any of the parent directories): .git\n\u001b[0mundefined\nvite v2.7.0 building for production...\ntransforming...\nâœ“ 2023 modules transformed.\nrendering chunks...\ndist/index.html                                    0.48 KiB\ndist/assets/plugin-vue_export-helper.21dcd24c.js   0.09 KiB / gzip: 0.10 KiB\ndist/assets/404.fd2e96f7.js                        0.25 KiB / gzip: 0.22 KiB\ndist/assets/index.cb0d956c.js                      2.86 KiB / gzip: 1.50 KiB\ndist/assets/index.4f443a39.css                     0.48 KiB / gzip: 0.28 KiB\ndist/assets/index.11477150.css                     275.26 KiB / gzip: 39.69 KiB\ndist/assets/vendor.4de3343e.js                     752.38 KiB / gzip: 241.00 KiB\ndist/assets/index.895d4c0f.js                      1062.50 KiB / gzip: 347.39 KiB\n\u001b[91m\n(!) Some chunks are larger than 500 KiB after minification. Consider:\n- Using dynamic import() to code-split the application\n- Use build.rollupOptions.output.manualChunks to improve chunking: https://rollupjs.org/guide/en/#outputmanualchunks\n- Adjust chunk size limit for this warning via build.chunkSizeWarningLimit.\n\u001b[0mRemoving intermediate container 0c609ce20508\n ---> 3ef43dc3c719\nStep 12/32 : FROM nginx:alpine\n ---> 1e415454686a\nStep 13/32 : WORKDIR /profiler\n ---> Running in 97e1f1f12f0a\nRemoving intermediate container 97e1f1f12f0a\n ---> 651dba02aa4b\nStep 14/32 : RUN apk update\n ---> Running in 43871836800e\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\nv3.17.0-332-g13963e2526 [https://dl-cdn.alpinelinux.org/alpine/v3.17/main]\nv3.17.0-339-g964e761a8f [https://dl-cdn.alpinelinux.org/alpine/v3.17/community]\nOK: 17825 distinct packages available\nRemoving intermediate container 43871836800e\n ---> ef015e448c60\nStep 15/32 : RUN apk add --no-cache graphviz\n ---> Running in 581a8afd8d17\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/16) Installing libxrender (0.9.11-r0)\n(2/16) Installing pixman (0.42.2-r0)\n(3/16) Installing cairo (1.17.6-r3)\n(4/16) Installing graphviz-libs (7.0.5-r0)\n(5/16) Installing libgcc (12.2.1_git20220924-r4)\n(6/16) Installing libffi (3.4.4-r0)\n(7/16) Installing libblkid (2.38.1-r1)\n(8/16) Installing libmount (2.38.1-r1)\n(9/16) Installing glib (2.74.4-r0)\n(10/16) Installing libxft (2.3.7-r0)\n(11/16) Installing fribidi (1.0.12-r0)\n(12/16) Installing graphite2 (1.3.14-r2)\n(13/16) Installing harfbuzz (5.3.1-r1)\n(14/16) Installing pango (1.50.12-r0)\n(15/16) Installing libstdc++ (12.2.1_git20220924-r4)\n(16/16) Installing graphviz (7.0.5-r0)\nExecuting busybox-1.35.0-r29.trigger\nExecuting graphviz-7.0.5-r0.trigger\nOK: 57 MiB in 78 packages\nRemoving intermediate container 581a8afd8d17\n ---> 9515c9ae5d77\nStep 16/32 : RUN apk add --no-cache dumb-init\n ---> Running in ee73d037a27c\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/1) Installing dumb-init (1.2.5-r2)\nExecuting busybox-1.35.0-r29.trigger\nOK: 57 MiB in 79 packages\nRemoving intermediate container ee73d037a27c\n ---> aafcc582165d\nStep 17/32 : COPY --from=builder /workspace/profiler .\n ---> 4d0aa9715823\nStep 18/32 : COPY collector.yaml ./config/collector.yaml\n ---> 747bc528816a\nStep 19/32 : COPY pkg/internal/v1175/assets/trace_viewer_full ./pkg/internal/v1175/assets/trace_viewer_full\n ---> f94fd151ae99\nStep 20/32 : COPY pkg/internal/v1175/assets/webcomponents.min.js ./pkg/internal/v1175/assets/webcomponents.min.js\n ---> 1a92dc72b02f\nStep 21/32 : COPY --from=ui-builder /workspace/dist /usr/share/nginx/html/\n ---> 943e25dc56c3\nStep 22/32 : COPY --from=ui-builder /workspace/nginx.conf /etc/nginx/nginx.conf\n ---> 4766ad825f87\nStep 23/32 : ENV PROFILER_API_URL=\"127.0.0.1:8080\"\n ---> Running in 2545b0d10be7\nRemoving intermediate container 2545b0d10be7\n ---> b1dd97ad2122\nStep 24/32 : ENV DATA_PATH=/profiler/data\n ---> Running in f689694da6f5\nRemoving intermediate container f689694da6f5\n ---> 953d08338bae\nStep 25/32 : ENV CONFIG_PATH=/profiler/config/collector.yaml\n ---> Running in c61b9d1b3aa7\nRemoving intermediate container c61b9d1b3aa7\n ---> e4165286bd61\nStep 26/32 : ENV DATA_GC_INTERNAL=5m\n ---> Running in c618726717c2\nRemoving intermediate container c618726717c2\n ---> cc1bfb2af702\nStep 27/32 : ENV UI_GC_INTERNAL=1m\n ---> Running in 67973f801aed\nRemoving intermediate container 67973f801aed\n ---> e0e23b558776\nStep 28/32 : COPY entrypoint.sh ./entrypoint.sh\n ---> 0cee0c0b6250\nStep 29/32 : RUN chmod +x entrypoint.sh\n ---> Running in 43d428af32a9\nRemoving intermediate container 43d428af32a9\n ---> 813282a1b6a0\nStep 30/32 : EXPOSE 80 8080\n ---> Running in 5f5ae1f0cf49\nRemoving intermediate container 5f5ae1f0cf49\n ---> ad18dfb8e748\nStep 31/32 : ENTRYPOINT [\"dumb-init\", \"--\"]\n ---> Running in a51598d24f99\nRemoving intermediate container a51598d24f99\n ---> 7ac0b56aeba9\nStep 32/32 : CMD [\"./entrypoint.sh\"]\n ---> Running in 0157b9b97ef3\nRemoving intermediate container 0157b9b97ef3\n ---> b8c7c744e245\nSuccessfully built b8c7c744e245\nSuccessfully tagged profiler:latest\n","stderr":"","imageSize":80519687}}