{"repository":"https://github.com/luchenqun/my-bookmark","dockerfilePath":"Dockerfile","startTime":1672335482859,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/luchenqun/my-bookmark'...\n","error":null,"commit":"48a22e5d2ec9dde30f13bee25db80182db924e0b"},"originalBuild":{"startTimestamp":1672335487967,"endTimestamp":1672335547259,"error":null,"stdout":"Sending build context to Docker daemon  9.564MB\r\r\nStep 1/13 : FROM luchenqun/ubuntu-mysql-node\nlatest: Pulling from luchenqun/ubuntu-mysql-node\n171857c49d0f: Pulling fs layer\n419640447d26: Pulling fs layer\n61e52f862619: Pulling fs layer\ne971280c9d56: Pulling fs layer\n61e52f862619: Download complete\n419640447d26: Verifying Checksum\n419640447d26: Download complete\n171857c49d0f: Verifying Checksum\n171857c49d0f: Download complete\n171857c49d0f: Pull complete\n419640447d26: Pull complete\n61e52f862619: Pull complete\ne971280c9d56: Verifying Checksum\ne971280c9d56: Download complete\ne971280c9d56: Pull complete\nDigest: sha256:665ab0c058648f76f4e05d3c455dcf2ba6114b1516f24feda598214b95f596dd\nStatus: Downloaded newer image for luchenqun/ubuntu-mysql-node:latest\n ---> e7d0c533f01b\nStep 2/13 : LABEL maintainer=\"luchenqun@qq.com\"\n ---> Running in c38b5d02e23e\nRemoving intermediate container c38b5d02e23e\n ---> 28d4cc478394\nStep 3/13 : RUN mkdir -p /app\n ---> Running in 9552bde2f0e8\nRemoving intermediate container 9552bde2f0e8\n ---> 31fd223efafe\nStep 4/13 : COPY src /app/src\n ---> 6bb3a100de15\nStep 5/13 : COPY view /app/view\n ---> 07a7ed718ce9\nStep 6/13 : COPY package.json /app/package.json\n ---> 3d0abac47a36\nStep 7/13 : COPY production.js /app/production.js\n ---> 6af7f36b9d8f\nStep 8/13 : COPY schema.sql /app/schema.sql\n ---> 72e379be268e\nStep 9/13 : WORKDIR /app\n ---> Running in b2e68ab584b8\nRemoving intermediate container b2e68ab584b8\n ---> 391b0b67c068\nStep 10/13 : RUN USER=`sed -n '4,4p' /etc/mysql/debian.cnf | awk  'BEGIN { FS = \"= \" } ; { print $2 }'`   && sed -i \"s/test/${USER}/\" /app/src/config/adapter.js   && PASSWORD=`sed -n '5,5p' /etc/mysql/debian.cnf | awk  'BEGIN { FS = \"= \" } ; { print $2 }'`   && sed -i \"s/123456/${PASSWORD}/g\" /app/src/config/adapter.js   && npm install --production   && touch /usr/local/bin/start.sh   && chmod 777 /usr/local/bin/start.sh   && echo \"#!/bin/bash\" >> /usr/local/bin/start.sh   && echo \"service mysql restart\" >> /usr/local/bin/start.sh   && echo \"mysql -u root < /app/schema.sql\" >> /usr/local/bin/start.sh   && echo \"node /app/production.js\" >> /usr/local/bin/start.sh\n ---> Running in b966e2cc7285\n\u001b[91mnpm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142\n\u001b[0m\u001b[91mnpm WARN deprecated har-validator@5.1.5: this library is no longer supported\n\u001b[0m\u001b[91mnpm WARN deprecated uuid@3.4.0: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.\n\u001b[0m\u001b[91mnpm WARN deprecated\u001b[0m\u001b[91m request@2.40.0: request has been deprecated, see https://github.com/request/request/issues/3142\n\u001b[0m\u001b[91mnpm WARN deprecated babel-eslint@10.1.0: babel-eslint is now @babel/eslint-parser. This package will no longer receive updates.\n\u001b[0m\u001b[91mnpm WARN deprecated chokidar@1.7.0: Chokidar 2 will break on node v14+. Upgrade to chokidar 3 with 15x less dependencies.\n\u001b[0m\u001b[91mnpm WARN deprecated hawk@1.1.1: This module moved to @hapi/hawk. Please make sure to switch over as this distribution is no longer supported and may contain bugs and critical security issues.\n\u001b[0m\u001b[91mnpm WARN deprecated node-uuid@1.4.8: Use uuid module instead\n\u001b[0m\u001b[91mnpm WARN deprecated joi@6.10.1: This version has been deprecated in accordance with the hapi support policy (hapi.im/support). Please upgrade to the latest version to get the best features, bug fixes, and security patches. If you are unable to upgrade at this time, paid support is available for older versions (hapi.im/commercial).\n\u001b[0m\u001b[91mnpm WARN deprecated fsevents@1.2.13: fsevents 1 will break on node v14+ and could be using insecure binaries. Upgrade to fsevents 2.\n\u001b[0m\u001b[91mnpm WARN deprecated formidable@1.2.6: Please upgrade to latest, formidable@v2 or formidable@v3! Check these notes: https://bit.ly/2ZEqIau\n\u001b[0m\u001b[91mnpm WARN deprecated core-js@2.6.12: core-js@<3.23.3 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Some versions have web compatibility issues. Please, upgrade your dependencies to the actual version of core-js.\n\u001b[0m\u001b[91mnpm WARN deprecated circular-json@0.3.3: CircularJSON is in maintenance only, flatted is its successor.\n\u001b[0m\u001b[91mnpm WARN deprecated hoek@0.9.1: This version has been deprecated in accordance with the hapi support policy (hapi.im/support). Please upgrade to the latest version to get the best features, bug fixes, and security patches. If you are unable to upgrade at this time, paid support is available for older versions (hapi.im/commercial).\n\u001b[0m\u001b[91mnpm WARN deprecated boom@0.4.2: This version has been deprecated in accordance with the hapi support policy (hapi.im/support). Please upgrade to the latest version to get the best features, bug fixes, and security patches. If you are unable to upgrade at this time, paid support is available for older versions (hapi.im/commercial).\n\u001b[0m\u001b[91mnpm WARN deprecated cryptiles@0.2.2: This version has been deprecated in accordance with the hapi support policy (hapi.im/support). Please upgrade to the latest version to get the best features, bug fixes, and security patches. If you are unable to upgrade at this time, paid support is available for older versions (hapi.im/commercial).\n\u001b[0m\u001b[91mnpm WARN deprecated sntp@0.2.4: This module moved to @hapi/sntp. Please make sure to switch over as this distribution is no longer supported and may contain bugs and critical security issues.\n\u001b[0m\u001b[91mnpm WARN deprecated hoek@2.16.3: This version has been deprecated in accordance with the hapi support policy (hapi.im/support). Please upgrade to the latest version to get the best features, bug fixes, and security patches. If you are unable to upgrade at this time, paid support is available for older versions (hapi.im/commercial).\n\u001b[0m\u001b[91mnpm WARN deprecated topo@1.1.0: This version has been deprecated in accordance with the hapi support policy (hapi.im/support). Please upgrade to the latest version to get the best features, bug fixes, and security patches. If you are unable to upgrade at this time, paid support is available for older versions (hapi.im/commercial).\n\u001b[0m\u001b[91mnpm WARN deprecated uuid@2.0.3: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.\n\u001b[0m\u001b[91mnpm WARN deprecated source-map-resolve@0.5.3: See https://github.com/lydell/source-map-resolve#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated source-map-url@0.4.1: See https://github.com/lydell/source-map-url#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated resolve-url@0.2.1: https://github.com/lydell/resolve-url#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated urix@0.1.0: Please see https://github.com/lydell/urix#deprecated\n\u001b[0m\u001b[91mnpm notice created a lockfile as package-lock.json. You should commit this file.\n\u001b[0m\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@^1.0.0 (node_modules/chokidar/node_modules/fsevents):\nnpm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.2.13: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91mnpm WARN notsup Unsupported engine for got@5.7.1: wanted: {\"node\":\">=0.10.0 <7\"} (current: {\"node\":\"14.15.0\",\"npm\":\"6.14.8\"})\nnpm WARN\u001b[0m\u001b[91m notsup Not compatible with your version of node/npm: got@5.7.1\n\u001b[0m\u001b[91mnpm WARN ajv-keywords@2.1.1 requires a peer of ajv@^5.0.0 but none is installed. You must install peer dependencies yourself.\n\u001b[0m\u001b[91mnpm WARN my-bookmark@1.0.0 No repository field.\n\u001b[0m\u001b[91m\n\u001b[0madded 309 packages from 343 contributors and audited 1155 packages in 21.437s\n\n25 packages are looking for funding\n  run `npm fund` for details\n\nfound 92 vulnerabilities (14 low, 31 moderate, 36 high, 11 critical)\n  run `npm audit fix` to fix them, or `npm audit` for details\nRemoving intermediate container b966e2cc7285\n ---> 14430d5389b5\nStep 11/13 : EXPOSE  3306\n ---> Running in e177e8ea0489\nRemoving intermediate container e177e8ea0489\n ---> a5b5ab9c2ed1\nStep 12/13 : EXPOSE  2000\n ---> Running in 3e1bdbee26bc\nRemoving intermediate container 3e1bdbee26bc\n ---> 5820b7683c26\nStep 13/13 : ENTRYPOINT [\"start.sh\"]\n ---> Running in 0818256f8f63\nRemoving intermediate container 0818256f8f63\n ---> ba27b1c2f9c2\nSuccessfully built ba27b1c2f9c2\nSuccessfully tagged my-bookmark:latest\n","stderr":"","imageSize":621149557},"repair":{"violations":[{"name":"npmCacheCleanAfterInstall","position":{"start":15,"end":15,"columnStart":5,"columnEnd":29}}],"repairedDockerfile":"FROM luchenqun/ubuntu-mysql-node\r\nLABEL maintainer=\"luchenqun@qq.com\"\r\n\r\nRUN mkdir -p /app\r\nCOPY src /app/src\r\nCOPY view /app/view\r\nCOPY package.json /app/package.json\r\nCOPY production.js /app/production.js\r\nCOPY schema.sql /app/schema.sql\r\n\r\nWORKDIR /app\r\nRUN USER=`sed -n '4,4p' /etc/mysql/debian.cnf | awk  'BEGIN { FS = \"= \" } ; { print $2 }'` \\\r\n  && sed -i \"s/test/${USER}/\" /app/src/config/adapter.js \\\r\n  && PASSWORD=`sed -n '5,5p' /etc/mysql/debian.cnf | awk  'BEGIN { FS = \"= \" } ; { print $2 }'` \\\r\n  && sed -i \"s/123456/${PASSWORD}/g\" /app/src/config/adapter.js \\\r\n  && npm install --production \\\r\n  && touch /usr/local/bin/start.sh \\\r\n  && chmod 777 /usr/local/bin/start.sh \\\r\n  && echo \"#!/bin/bash\" >> /usr/local/bin/start.sh \\\r\n  && echo \"service mysql restart\" >> /usr/local/bin/start.sh \\\r\n  && echo \"mysql -u root < /app/schema.sql\" >> /usr/local/bin/start.sh \\\r\n  && echo \"node /app/production.js\" >> /usr/local/bin/start.sh\r\n\r\nEXPOSE  3306\r\nEXPOSE  2000\r\n\r\nENTRYPOINT [\"start.sh\"]\r\n"},"repairedBuild":{"startTimestamp":1672335548271,"endTimestamp":1672335580099,"error":null,"stdout":"Sending build context to Docker daemon  9.564MB\r\r\nStep 1/13 : FROM luchenqun/ubuntu-mysql-node\n ---> e7d0c533f01b\nStep 2/13 : LABEL maintainer=\"luchenqun@qq.com\"\n ---> Running in 0261643569bc\nRemoving intermediate container 0261643569bc\n ---> f4927aa32236\nStep 3/13 : RUN mkdir -p /app\n ---> Running in 2888ddf1cc8f\nRemoving intermediate container 2888ddf1cc8f\n ---> 6cc5793aacda\nStep 4/13 : COPY src /app/src\n ---> b00ca622f51b\nStep 5/13 : COPY view /app/view\n ---> 77a6615f5fd8\nStep 6/13 : COPY package.json /app/package.json\n ---> 5a410846438c\nStep 7/13 : COPY production.js /app/production.js\n ---> 2ac9b3f71689\nStep 8/13 : COPY schema.sql /app/schema.sql\n ---> 783876a45b19\nStep 9/13 : WORKDIR /app\n ---> Running in f1d231516f7a\nRemoving intermediate container f1d231516f7a\n ---> 4b5fe6aa87df\nStep 10/13 : RUN USER=`sed -n '4,4p' /etc/mysql/debian.cnf | awk  'BEGIN { FS = \"= \" } ; { print $2 }'`   && sed -i \"s/test/${USER}/\" /app/src/config/adapter.js   && PASSWORD=`sed -n '5,5p' /etc/mysql/debian.cnf | awk  'BEGIN { FS = \"= \" } ; { print $2 }'`   && sed -i \"s/123456/${PASSWORD}/g\" /app/src/config/adapter.js   && npm install --production   && touch /usr/local/bin/start.sh   && chmod 777 /usr/local/bin/start.sh   && echo \"#!/bin/bash\" >> /usr/local/bin/start.sh   && echo \"service mysql restart\" >> /usr/local/bin/start.sh   && echo \"mysql -u root < /app/schema.sql\" >> /usr/local/bin/start.sh   && echo \"node /app/production.js\" >> /usr/local/bin/start.sh\n ---> Running in 46727f646268\n\u001b[91mnpm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142\n\u001b[0m\u001b[91mnpm WARN deprecated chokidar@1.7.0: Chokidar 2 will break on node v14+. Upgrade to chokidar 3 with 15x less dependencies.\n\u001b[0m\u001b[91mnpm WARN deprecated har-validator@5.1.5: this library is no longer supported\n\u001b[0m\u001b[91mnpm WARN deprecated uuid@3.4.0: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.\n\u001b[0m\u001b[91mnpm WARN\u001b[0m\u001b[91m deprecated\u001b[0m\u001b[91m babel-eslint@10.1.0: babel-eslint is now @babel/eslint-parser. This package will no longer receive updates.\n\u001b[0m\u001b[91mnpm WARN deprecated request@2.40.0: request has been deprecated, see https://github.com/request/request/issues/3142\n\u001b[0m\u001b[91mnpm\u001b[0m\u001b[91m WARN deprecated fsevents@1.2.13: fsevents 1 will break on node v14+ and could be using insecure binaries. Upgrade to fsevents 2.\n\u001b[0m\u001b[91mnpm WARN deprecated core-js@2.6.12: core-js@<3.23.3 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Some versions have web compatibility issues. Please, upgrade your dependencies to the actual version of core-js.\n\u001b[0m\u001b[91mnpm WARN deprecated node-uuid@1.4.8: Use uuid module instead\n\u001b[0m\u001b[91mnpm WARN deprecated hawk@1.1.1: This module moved to @hapi/hawk. Please make sure to switch over as this distribution is no longer supported and may contain bugs and critical security issues.\n\u001b[0m\u001b[91mnpm WARN deprecated joi@6.10.1: This version has been deprecated in accordance with the hapi support policy (hapi.im/support). Please upgrade to the latest version to get the best features, bug fixes, and security patches. If you are unable to upgrade at this time, paid support is available for older versions (hapi.im/commercial).\n\u001b[0m\u001b[91mnpm WARN deprecated formidable@1.2.6: Please upgrade to latest, formidable@v2 or formidable@v3! Check these notes: https://bit.ly/2ZEqIau\n\u001b[0m\u001b[91mnpm WARN deprecated uuid@2.0.3: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.\n\u001b[0m\u001b[91mnpm WARN deprecated circular-json@0.3.3: CircularJSON is in maintenance only, flatted is its successor.\n\u001b[0m\u001b[91mnpm WARN deprecated boom@0.4.2: This version has been deprecated in accordance with the hapi support policy (hapi.im/support). Please upgrade to the latest version to get the best features, bug fixes, and security patches. If you are unable to upgrade at this time, paid support is available for older versions (hapi.im/commercial).\n\u001b[0m\u001b[91mnpm WARN deprecated cryptiles@0.2.2: This version has been deprecated in accordance with the hapi support policy (hapi.im/support). Please upgrade to the latest version to get the best features, bug fixes, and security patches. If you are unable to upgrade at this time, paid support is available for older versions (hapi.im/commercial).\n\u001b[0m\u001b[91mnpm WARN deprecated hoek@0.9.1: This version has been deprecated in accordance with the hapi support policy (hapi.im/support). Please upgrade to the latest version to get the best features, bug fixes, and security patches. If you are unable to upgrade at this time, paid support is available for older versions (hapi.im/commercial).\n\u001b[0m\u001b[91mnpm WARN deprecated sntp@0.2.4: This module moved to @hapi/sntp. Please make sure to switch over as this distribution is no longer supported and may contain bugs and critical security issues.\n\u001b[0m\u001b[91mnpm WARN deprecated hoek@2.16.3: This version has been deprecated in accordance with the hapi support policy (hapi.im/support). Please upgrade to the latest version to get the best features, bug fixes, and security patches. If you are unable to upgrade at this time, paid support is available for older versions (hapi.im/commercial).\n\u001b[0m\u001b[91mnpm WARN deprecated topo@1.1.0: This version has been deprecated in accordance with the hapi support policy (hapi.im/support). Please upgrade to the latest version to get the best features, bug fixes, and security patches. If you are unable to upgrade at this time, paid support is available for older versions (hapi.im/commercial).\n\u001b[0m\u001b[91mnpm WARN deprecated source-map-resolve@0.5.3: See https://github.com/lydell/source-map-resolve#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated resolve-url@0.2.1: https://github.com/lydell/resolve-url#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated source-map-url@0.4.1: See https://github.com/lydell/source-map-url#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated urix@0.1.0: Please see https://github.com/lydell/urix#deprecated\n\u001b[0m\u001b[91mnpm notice created a lockfile as package-lock.json. You should commit this file.\n\u001b[0m\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@^1.0.0 (node_modules/chokidar/node_modules/fsevents):\nnpm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.2.13: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91mnpm WARN\u001b[0m\u001b[91m notsup Unsupported engine for got@5.7.1: wanted: {\"node\":\">=0.10.0 <7\"} (current: {\"node\":\"14.15.0\",\"npm\":\"6.14.8\"})\nnpm WARN notsup Not compatible with your version of node/npm: got@5.7.1\n\u001b[0m\u001b[91mnpm WARN ajv-keywords@2.1.1 requires a peer of ajv@^5.0.0 but none is installed. You must install peer dependencies yourself.\n\u001b[0m\u001b[91mnpm WARN my-bookmark@1.0.0 No repository field.\n\u001b[0m\u001b[91m\n\u001b[0madded 309 packages from 343 contributors and audited 1155 packages in 13.426s\n\n25 packages are looking for funding\n  run `npm fund` for details\n\nfound 92 vulnerabilities (14 low, 31 moderate, 36 high, 11 critical)\n  run `npm audit fix` to fix them, or `npm audit` for details\nRemoving intermediate container 46727f646268\n ---> 81d0396dad7e\nStep 11/13 : EXPOSE  3306\n ---> Running in 6d61d7f8636c\nRemoving intermediate container 6d61d7f8636c\n ---> da2b7a226c05\nStep 12/13 : EXPOSE  2000\n ---> Running in d79511c7d9fb\nRemoving intermediate container d79511c7d9fb\n ---> f207ca99edd5\nStep 13/13 : ENTRYPOINT [\"start.sh\"]\n ---> Running in e098ef9e9fa3\nRemoving intermediate container e098ef9e9fa3\n ---> 689cd0a4f560\nSuccessfully built 689cd0a4f560\nSuccessfully tagged my-bookmark:latest\n","stderr":"","imageSize":621144136},"endTime":1672335582690}