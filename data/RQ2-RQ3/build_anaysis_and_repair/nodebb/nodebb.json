{"repository":"https://github.com/nodebb/nodebb","dockerfilePath":"Dockerfile","startTime":1672180213276,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/nodebb/nodebb'...\n","error":null,"commit":"1ea9481af6125ffd6da0592ed439aa62af0bca11"},"originalBuild":{"startTimestamp":1672180215621,"endTimestamp":1672180400828,"error":null,"stdout":"Sending build context to Docker daemon  27.27MB\r\r\nStep 1/12 : FROM node:lts\nlts: Pulling from library/node\n32de3c850997: Already exists\nfa1d4c8d85a4: Already exists\nc796299bbbdd: Already exists\n81283a9569ad: Already exists\n60b38700e7fb: Already exists\n9537c7a3988e: Already exists\nfd36cab452a2: Pulling fs layer\n2d0da1e46288: Pulling fs layer\n1815baed2c16: Pulling fs layer\n1815baed2c16: Verifying Checksum\n1815baed2c16: Download complete\n2d0da1e46288: Verifying Checksum\n2d0da1e46288: Download complete\nfd36cab452a2: Verifying Checksum\nfd36cab452a2: Download complete\nfd36cab452a2: Pull complete\n2d0da1e46288: Pull complete\n1815baed2c16: Pull complete\nDigest: sha256:e9ad817b0d42b4d177a4bef8a0aff97c352468a008c3fdb2b4a82533425480df\nStatus: Downloaded newer image for node:lts\n ---> 7b2a09676e2c\nStep 2/12 : RUN mkdir -p /usr/src/app &&     chown -R node:node /usr/src/app\n ---> Running in ed51a58d641d\nRemoving intermediate container ed51a58d641d\n ---> f20bc40fb152\nStep 3/12 : WORKDIR /usr/src/app\n ---> Running in 703885bddaaf\nRemoving intermediate container 703885bddaaf\n ---> d4d85d908cf2\nStep 4/12 : ARG NODE_ENV\n ---> Running in 880cc8980644\nRemoving intermediate container 880cc8980644\n ---> cc601a7d1a6b\nStep 5/12 : ENV NODE_ENV $NODE_ENV\n ---> Running in b5ff2a9621ab\nRemoving intermediate container b5ff2a9621ab\n ---> 05b205898f4e\nStep 6/12 : COPY --chown=node:node install/package.json /usr/src/app/package.json\n ---> d33579115304\nStep 7/12 : USER node\n ---> Running in 889bfbc09e5c\nRemoving intermediate container 889bfbc09e5c\n ---> 86efd4d9e485\nStep 8/12 : RUN npm install --only=prod &&     npm cache clean --force\n ---> Running in 97e0d7b95966\n\u001b[91mnpm WARN config only Use `--omit=dev` to omit dev dependencies from the install.\n\u001b[0m\u001b[91mnpm WARN deprecated har-validator@5.1.5: this library is no longer supported\n\u001b[0m\u001b[91mnpm WARN deprecated multer@1.4.4: Multer 1.x is affected by CVE-2022-24434. This is fixed in v1.4.4-lts.1 which drops support for versions of Node.js before 6. Please upgrade to at least Node.js 6 and version 1.4.4-lts.1 of Multer. If you need support for older versions of Node.js, we are open to accepting patches that would fix the CVE on the main 1.x release line, whilst maintaining compatibility with Node.js 0.10.\n\u001b[0m\u001b[91mnpm WARN deprecated request-promise-native@1.0.9: request-promise-native has been deprecated because it extends the now deprecated request package, see https://github.com/request/request/issues/3142\n\u001b[0m\u001b[91mnpm WARN deprecated csurf@1.11.0: Please use another csrf package\n\u001b[0m\u001b[91mnpm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142\n\u001b[0m\u001b[91mnpm WARN deprecated uuid@3.4.0: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.\n\u001b[0m\u001b[91mnpm WARN deprecated uglify-es@3.3.9: support for ECMAScript is superseded by `uglify-js` as of v3.13.0\n\u001b[0m\u001b[91mnpm WARN deprecated popper.js@1.16.1: You can find the new Popper v2 at @popperjs/core, this package is dedicated to the legacy v1\n\u001b[0m\nadded 1043 packages, and audited 1044 packages in 2m\n\n92 packages are looking for funding\n  run `npm fund` for details\n\n6 high severity vulnerabilities\n\nTo address all issues possible (including breaking changes), run:\n  npm audit fix --force\n\nSome issues need review, and may require choosing\na different dependency.\n\nRun `npm audit` for details.\n\u001b[91mnpm notice \nnpm notice New major version of npm available! 8.19.2 -> 9.2.0\nnpm notice Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm\u001b[0m\u001b[91m notice Run `npm install -g npm@9.2.0` to update!\nnpm notice \n\u001b[0m\u001b[91mnpm\u001b[0m\u001b[91m WARN using --force Recommended protections disabled.\n\u001b[0mRemoving intermediate container 97e0d7b95966\n ---> b34bb56e1b75\nStep 9/12 : COPY --chown=node:node . /usr/src/app\n ---> c8fd9c4d1c60\nStep 10/12 : ENV NODE_ENV=production     daemon=false     silent=false\n ---> Running in 04836cf92c59\nRemoving intermediate container 04836cf92c59\n ---> d20c5d1cc1ab\nStep 11/12 : EXPOSE 4567\n ---> Running in 83f2972f2a24\nRemoving intermediate container 83f2972f2a24\n ---> 10d4aae9541a\nStep 12/12 : CMD test -n \"${SETUP}\" && ./nodebb setup || node ./nodebb build; node ./nodebb start\n ---> Running in b701b97238df\nRemoving intermediate container b701b97238df\n ---> 352b04b9d328\nSuccessfully built 352b04b9d328\nSuccessfully tagged nodebb:latest\n","stderr":"","imageSize":1423550218},"repair":{"violations":[{"name":"mkdirUsrSrcThenRemove","position":{"start":2,"end":2,"columnStart":4,"columnEnd":25}}],"repairedDockerfile":"FROM node:lts\n\nRUN mkdir -p /usr/src/app && \\\n    chown -R node:node /usr/src/app\nWORKDIR /usr/src/app\n\nARG NODE_ENV\nENV NODE_ENV $NODE_ENV\n\nCOPY --chown=node:node install/package.json /usr/src/app/package.json\n\nUSER node\n\nRUN npm install --only=prod && \\\n    npm cache clean --force\n\nCOPY --chown=node:node . /usr/src/app\n\nENV NODE_ENV=production \\\n    daemon=false \\\n    silent=false\n\nEXPOSE 4567\n\nCMD test -n \"${SETUP}\" && ./nodebb setup || node ./nodebb build; node ./nodebb start\n"},"repairedBuild":{"startTimestamp":1672180401683,"endTimestamp":1672180524352,"error":null,"stdout":"Sending build context to Docker daemon  27.27MB\r\r\nStep 1/12 : FROM node:lts\n ---> 7b2a09676e2c\nStep 2/12 : RUN mkdir -p /usr/src/app &&     chown -R node:node /usr/src/app\n ---> Running in 5f99b185ce7d\nRemoving intermediate container 5f99b185ce7d\n ---> 1667f5431cdb\nStep 3/12 : WORKDIR /usr/src/app\n ---> Running in b6e7e0a48a49\nRemoving intermediate container b6e7e0a48a49\n ---> 5bd09e1916ab\nStep 4/12 : ARG NODE_ENV\n ---> Running in 66c2c4e35c94\nRemoving intermediate container 66c2c4e35c94\n ---> 400be07f08b7\nStep 5/12 : ENV NODE_ENV $NODE_ENV\n ---> Running in 86cff8f9ad78\nRemoving intermediate container 86cff8f9ad78\n ---> 973c2ee5449e\nStep 6/12 : COPY --chown=node:node install/package.json /usr/src/app/package.json\n ---> 4bc0581256a4\nStep 7/12 : USER node\n ---> Running in d44e4a0902bb\nRemoving intermediate container d44e4a0902bb\n ---> 1f63299218f7\nStep 8/12 : RUN npm install --only=prod &&     npm cache clean --force\n ---> Running in 22c0c990cf1e\n\u001b[91mnpm\u001b[0m\u001b[91m WARN config only Use `--omit=dev` to omit dev dependencies from the install.\n\u001b[0m\u001b[91mnpm WARN deprecated har-validator@5.1.5: this library is no longer supported\n\u001b[0m\u001b[91mnpm WARN deprecated multer@1.4.4: Multer 1.x is affected by CVE-2022-24434. This is fixed in v1.4.4-lts.1 which drops support for versions of Node.js before 6. Please upgrade to at least Node.js 6 and version 1.4.4-lts.1 of Multer. If you need support for older versions of Node.js, we are open to accepting patches that would fix the CVE on the main 1.x release line, whilst maintaining compatibility with Node.js 0.10.\n\u001b[0m\u001b[91mnpm WARN deprecated request-promise-native@1.0.9: request-promise-native has been deprecated because it extends the now deprecated request package, see https://github.com/request/request/issues/3142\n\u001b[0m\u001b[91mnpm WARN deprecated csurf@1.11.0: Please use another csrf package\n\u001b[0m\u001b[91mnpm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142\n\u001b[0m\u001b[91mnpm WARN deprecated uuid@3.4.0: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.\n\u001b[0m\u001b[91mnpm WARN deprecated uglify-es@3.3.9: support for ECMAScript is superseded by `uglify-js` as of v3.13.0\n\u001b[0m\u001b[91mnpm WARN deprecated popper.js@1.16.1: You can find the new Popper v2 at @popperjs/core, this package is dedicated to the legacy v1\n\u001b[0m\nadded 1043 packages, and audited 1044 packages in 1m\n\n92 packages are looking for funding\n  run `npm fund` for details\n\n6 high severity vulnerabilities\n\nTo address all issues possible (including breaking changes), run:\n  npm audit fix --force\n\nSome issues need review, and may require choosing\na different dependency.\n\nRun `npm audit` for details.\n\u001b[91mnpm notice \nnpm notice New major version of npm available! 8.19.2 -> 9.2.0\nnpm notice Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm notice Run `npm install -g npm@9.2.0` to update!\nnpm notice\u001b[0m\u001b[91m \n\u001b[0m\u001b[91mnpm\u001b[0m\u001b[91m WARN using --force Recommended protections disabled.\n\u001b[0mRemoving intermediate container 22c0c990cf1e\n ---> 3dd5bcae807e\nStep 9/12 : COPY --chown=node:node . /usr/src/app\n ---> fa7b1d90ce38\nStep 10/12 : ENV NODE_ENV=production     daemon=false     silent=false\n ---> Running in f9927fbcba5e\nRemoving intermediate container f9927fbcba5e\n ---> 9172680d361f\nStep 11/12 : EXPOSE 4567\n ---> Running in 53584fac9e16\nRemoving intermediate container 53584fac9e16\n ---> 8907078820fb\nStep 12/12 : CMD test -n \"${SETUP}\" && ./nodebb setup || node ./nodebb build; node ./nodebb start\n ---> Running in 3cf62be87b86\nRemoving intermediate container 3cf62be87b86\n ---> 9173145e941a\nSuccessfully built 9173145e941a\nSuccessfully tagged nodebb:latest\n","stderr":"","imageSize":1423549879},"endTime":1672180525278}