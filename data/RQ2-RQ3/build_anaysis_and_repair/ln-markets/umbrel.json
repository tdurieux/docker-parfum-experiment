{"repository":"https://github.com/ln-markets/umbrel","dockerfilePath":"Dockerfile","startTime":1672877089053,"endTime":1672877260921,"clone":{"startTime":1672877089053,"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/ln-markets/umbrel'...\n","error":null,"endTime":1672877089952,"commit":"44e9360ab933d76e150f59076b7003a40c958018"},"originalBuild":{"startTime":1672877090046,"endTime":1672877175019,"error":null,"stdout":"Sending build context to Docker daemon  655.9kB\r\r\nStep 1/24 : FROM node:16.15.0-alpine3.14 AS builder\n16.15.0-alpine3.14: Pulling from library/node\n8663204ce13b: Pulling fs layer\n8c392e9e905c: Pulling fs layer\n36ce72f2f129: Pulling fs layer\n2e8529c47e46: Pulling fs layer\n2e8529c47e46: Waiting\n8663204ce13b: Verifying Checksum\n8663204ce13b: Download complete\n8663204ce13b: Pull complete\n2e8529c47e46: Download complete\n8c392e9e905c: Verifying Checksum\n8c392e9e905c: Download complete\n36ce72f2f129: Verifying Checksum\n36ce72f2f129: Download complete\n8c392e9e905c: Pull complete\n36ce72f2f129: Pull complete\n2e8529c47e46: Pull complete\nDigest: sha256:53a5c087654e75f8b12475fe143c5ab8b5f33254a37dc87743d066a57e67b4de\nStatus: Downloaded newer image for node:16.15.0-alpine3.14\n ---> 1586b34e36a3\nStep 2/24 : WORKDIR /usr/lnmarkets\n ---> Running in eea8eb8170ff\nRemoving intermediate container eea8eb8170ff\n ---> f18e27359d82\nStep 3/24 : RUN npm install -g pnpm@7\n ---> Running in cc51e2f5d54f\n\nadded 1 package, and audited 2 packages in 834ms\n\n1 package is looking for funding\n  run `npm fund` for details\n\nfound 0 vulnerabilities\n\u001b[91mnpm \u001b[0m\u001b[91mnotice \nnpm\u001b[0m\u001b[91m notice New major version of npm available! 8.5.5 -> 9.2.0\nnpm notice\u001b[0m\u001b[91m Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm notice Run `npm install -g npm@9.2.0` to update!\nnpm notice \n\u001b[0mRemoving intermediate container cc51e2f5d54f\n ---> 8aa2aa96fc95\nStep 4/24 : COPY package.json pnpm-workspace.yaml pnpm-lock.yaml ./\n ---> caf2c51bd7a3\nStep 5/24 : COPY apps/api/package.json /usr/lnmarkets/apps/api/package.json\n ---> afa2ab6d9cf1\nStep 6/24 : COPY apps/front/package.json /usr/lnmarkets/apps/front/package.json\n ---> fdd061d44442\nStep 7/24 : RUN pnpm config set store-dir .pnpm-store &&   pnpm install --frozen-lockfile --ignore-scripts\n ---> Running in 8e19ae46a75b\nScope: all 3 workspace projects\nLockfile is up to date, resolution step is skipped\nProgress: resolved 1, reused 0, downloaded 0, added 0\nPackages: +648\n++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++\nPackages are hard linked from the content-addressable store to the virtual store.\n  Content-addressable store is at: /usr/lnmarkets/.pnpm-store/v3\n  Virtual store is at:             node_modules/.pnpm\nProgress: resolved 648, reused 0, downloaded 42, added 35\nProgress: resolved 648, reused 0, downloaded 154, added 153\nProgress: resolved 648, reused 0, downloaded 212, added 211\nProgress: resolved 648, reused 0, downloaded 294, added 292\nProgress: resolved 648, reused 0, downloaded 399, added 398\nProgress: resolved 648, reused 0, downloaded 521, added 520\nProgress: resolved 648, reused 0, downloaded 638, added 641\nProgress: resolved 648, reused 0, downloaded 644, added 647\nProgress: resolved 648, reused 0, downloaded 645, added 648, done\n\ndevDependencies:\n+ @commitlint/cli 17.1.2\n+ @commitlint/config-conventional 17.1.0\n+ eslint 8.26.0\n+ eslint-config-prettier 8.5.0\n+ eslint-import-resolver-alias 1.1.2\n+ eslint-plugin-eslint-comments 3.2.0\n+ eslint-plugin-import 2.26.0\n+ eslint-plugin-jsdoc 39.3.25\n+ eslint-plugin-no-autofix 1.2.3\n+ eslint-plugin-prefer-arrow 1.2.3\n+ eslint-plugin-prettier 4.2.1\n+ eslint-plugin-promise 6.1.1\n+ eslint-plugin-sonarjs 0.16.0\n+ eslint-plugin-tailwindcss 3.6.2\n+ eslint-plugin-unicorn 44.0.2\n+ eslint-plugin-vue 9.6.0\n+ husky 8.0.1\n+ lint-staged 12.4.1\n+ nodemon 2.0.20\n+ prettier 2.7.1\n\nDone in 9.9s\nRemoving intermediate container 8e19ae46a75b\n ---> 5ccd3f3b112c\nStep 8/24 : COPY apps/front /usr/lnmarkets/apps/front\n ---> 10036e0f335b\nStep 9/24 : RUN pnpm -C apps/front build\n ---> Running in a3650b5945f2\n\n> front@1.2.5 build /usr/lnmarkets/apps/front\n> vite build\n\nvite v3.2.0 building for production...\ntransforming...\nâœ“ 369 modules transformed.\nrendering chunks...\ndist/index.html                  1.08 KiB\ndist/assets/index.318dc2cb.css   21.50 KiB / gzip: 4.57 KiB\ndist/assets/index.b3b54de7.js    160.57 KiB / gzip: 57.46 KiB\nRemoving intermediate container a3650b5945f2\n ---> 39b6bbad11c2\nStep 10/24 : FROM node:16.15.0-alpine3.14\n ---> 1586b34e36a3\nStep 11/24 : ENV NODE_ENV=\"production\"\n ---> Running in a640fe5bf8b4\nRemoving intermediate container a640fe5bf8b4\n ---> 7e1692e1ed9a\nStep 12/24 : WORKDIR /usr/lnmarkets\n ---> Running in 16206ec64141\nRemoving intermediate container 16206ec64141\n ---> 0a66448531b9\nStep 13/24 : RUN apk add --no-cache dumb-init\n ---> Running in 81c210956153\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.14/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.14/community/x86_64/APKINDEX.tar.gz\n(1/1) Installing dumb-init (1.2.5-r1)\nExecuting busybox-1.33.1-r7.trigger\nOK: 7 MiB in 17 packages\nRemoving intermediate container 81c210956153\n ---> 5ccc3a057e4c\nStep 14/24 : COPY --chown=node:node --from=builder /usr/lnmarkets/apps/front/dist /usr/lnmarkets/apps/api/public\n ---> ae9abecd9b40\nStep 15/24 : COPY --chown=node:node --from=builder /usr/lnmarkets/node_modules /usr/lnmarkets/node_modules\n ---> 92fdcc0c7a4a\nStep 16/24 : COPY --chown=node:node --from=builder /usr/lnmarkets/apps/api/node_modules /usr/lnmarkets/apps/api/node_modules\n ---> f261b07de09d\nStep 17/24 : COPY --chown=node:node apps/api/src /usr/lnmarkets/apps/api/src\n ---> 0e236533f671\nStep 18/24 : COPY --chown=node:node apps/api/docker/healthcheck.js /usr/lnmarkets/apps/api/healthcheck.js\n ---> 9f2a18374807\nStep 19/24 : COPY --chown=node:node apps/api/package.json /usr/lnmarkets/apps/api/package.json\n ---> 35365b95b03b\nStep 20/24 : USER node\n ---> Running in 71daae225ceb\nRemoving intermediate container 71daae225ceb\n ---> f4a26790599c\nStep 21/24 : EXPOSE 4242\n ---> Running in 4ee49fb52893\nRemoving intermediate container 4ee49fb52893\n ---> 5063a7ab6e25\nStep 22/24 : HEALTHCHECK --interval=12s --timeout=12s --start-period=15s   CMD node /usr/lnmarkets/apps/api/healthcheck.js\n ---> Running in 6a8476457200\nRemoving intermediate container 6a8476457200\n ---> 70cbdad6ccd0\nStep 23/24 : WORKDIR /usr/lnmarkets/apps/api\n ---> Running in 0719684edc53\nRemoving intermediate container 0719684edc53\n ---> 1f34a57ef1cc\nStep 24/24 : CMD [\"dumb-init\", \"node\", \"src/index.js\"]\n ---> Running in 528e6423a1c1\nRemoving intermediate container 528e6423a1c1\n ---> 269c33d7e5d6\nSuccessfully built 269c33d7e5d6\nSuccessfully tagged umbrel:latest\n","stderr":"","imageSize":310171407},"repair":{"startTime":1672877175074,"endTime":1672877175135,"violations":[{"name":"npmCacheCleanAfterInstall","position":{"start":4,"end":4,"columnStart":4,"columnEnd":25}}],"repairedDockerfile":"FROM node:16.15.0-alpine3.14 AS builder\n\nWORKDIR /usr/lnmarkets\n\nRUN npm install -g pnpm@7 && npm cache clean --force;\n\nCOPY package.json pnpm-workspace.yaml pnpm-lock.yaml ./\n\nCOPY apps/api/package.json /usr/lnmarkets/apps/api/package.json\nCOPY apps/front/package.json /usr/lnmarkets/apps/front/package.json\n\nRUN pnpm config set store-dir .pnpm-store && \\\n  pnpm install --frozen-lockfile --ignore-scripts\n\nCOPY apps/front /usr/lnmarkets/apps/front\n\nRUN pnpm -C apps/front build\n\nFROM node:16.15.0-alpine3.14\n\nENV NODE_ENV=\"production\"\n\nWORKDIR /usr/lnmarkets\n\nRUN apk add --no-cache dumb-init\n\nCOPY --chown=node:node --from=builder /usr/lnmarkets/apps/front/dist /usr/lnmarkets/apps/api/public\nCOPY --chown=node:node --from=builder /usr/lnmarkets/node_modules /usr/lnmarkets/node_modules\nCOPY --chown=node:node --from=builder /usr/lnmarkets/apps/api/node_modules /usr/lnmarkets/apps/api/node_modules\nCOPY --chown=node:node apps/api/src /usr/lnmarkets/apps/api/src\nCOPY --chown=node:node apps/api/docker/healthcheck.js /usr/lnmarkets/apps/api/healthcheck.js\nCOPY --chown=node:node apps/api/package.json /usr/lnmarkets/apps/api/package.json\n\nUSER node\n\nEXPOSE 4242\n\nHEALTHCHECK --interval=12s --timeout=12s --start-period=15s \\  \n  CMD node /usr/lnmarkets/apps/api/healthcheck.js\n\nWORKDIR /usr/lnmarkets/apps/api\n\nCMD [\"dumb-init\", \"node\", \"src/index.js\"]\n"},"repairedBuild":{"startTime":1672877177484,"endTime":1672877260250,"error":null,"stdout":"Sending build context to Docker daemon  655.9kB\r\r\nStep 1/24 : FROM node:16.15.0-alpine3.14 AS builder\n ---> 1586b34e36a3\nStep 2/24 : WORKDIR /usr/lnmarkets\n ---> Running in 2de66cdfbfa3\nRemoving intermediate container 2de66cdfbfa3\n ---> a984df4ea5f8\nStep 3/24 : RUN npm install -g pnpm@7 && npm cache clean --force;\n ---> Running in 83eba57c7e91\n\nadded 1 package, and audited 2 packages in 933ms\n\n1 package is looking for funding\n  run `npm fund` for details\n\nfound 0 vulnerabilities\n\u001b[91mnpm\u001b[0m\u001b[91m \u001b[0m\u001b[91mnotice \n\u001b[0m\u001b[91mnpm notice\u001b[0m\u001b[91m New major version of npm available! 8.5.5 -> 9.2.0\nnpm notice\u001b[0m\u001b[91m Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm notice\u001b[0m\u001b[91m Run `npm install -g npm@9.2.0` to update!\nnpm \u001b[0m\u001b[91mnotice\u001b[0m\u001b[91m \n\u001b[0m\u001b[91mnpm\u001b[0m\u001b[91m WARN using --force\u001b[0m\u001b[91m Recommended protections disabled.\n\u001b[0mRemoving intermediate container 83eba57c7e91\n ---> 101573b7d414\nStep 4/24 : COPY package.json pnpm-workspace.yaml pnpm-lock.yaml ./\n ---> 95c8c92723ae\nStep 5/24 : COPY apps/api/package.json /usr/lnmarkets/apps/api/package.json\n ---> 57201cf5e6d1\nStep 6/24 : COPY apps/front/package.json /usr/lnmarkets/apps/front/package.json\n ---> a233cd3df7c1\nStep 7/24 : RUN pnpm config set store-dir .pnpm-store &&   pnpm install --frozen-lockfile --ignore-scripts\n ---> Running in 138dd9ea83ee\nScope: all 3 workspace projects\nLockfile is up to date, resolution step is skipped\nProgress: resolved 1, reused 0, downloaded 0, added 0\nPackages: +648\n++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++\nPackages are hard linked from the content-addressable store to the virtual store.\n  Content-addressable store is at: /usr/lnmarkets/.pnpm-store/v3\n  Virtual store is at:             node_modules/.pnpm\nProgress: resolved 648, reused 0, downloaded 65, added 53\nProgress: resolved 648, reused 0, downloaded 155, added 148\nProgress: resolved 648, reused 0, downloaded 207, added 204\nProgress: resolved 648, reused 0, downloaded 240, added 235\nProgress: resolved 648, reused 0, downloaded 347, added 340\nProgress: resolved 648, reused 0, downloaded 496, added 494\nProgress: resolved 648, reused 0, downloaded 606, added 605\nProgress: resolved 648, reused 0, downloaded 644, added 647\nProgress: resolved 648, reused 0, downloaded 645, added 648, done\n\ndevDependencies:\n+ @commitlint/cli 17.1.2\n+ @commitlint/config-conventional 17.1.0\n+ eslint 8.26.0\n+ eslint-config-prettier 8.5.0\n+ eslint-import-resolver-alias 1.1.2\n+ eslint-plugin-eslint-comments 3.2.0\n+ eslint-plugin-import 2.26.0\n+ eslint-plugin-jsdoc 39.3.25\n+ eslint-plugin-no-autofix 1.2.3\n+ eslint-plugin-prefer-arrow 1.2.3\n+ eslint-plugin-prettier 4.2.1\n+ eslint-plugin-promise 6.1.1\n+ eslint-plugin-sonarjs 0.16.0\n+ eslint-plugin-tailwindcss 3.6.2\n+ eslint-plugin-unicorn 44.0.2\n+ eslint-plugin-vue 9.6.0\n+ husky 8.0.1\n+ lint-staged 12.4.1\n+ nodemon 2.0.20\n+ prettier 2.7.1\n\nDone in 9.8s\nRemoving intermediate container 138dd9ea83ee\n ---> c53470540593\nStep 8/24 : COPY apps/front /usr/lnmarkets/apps/front\n ---> c0aa3761b5e8\nStep 9/24 : RUN pnpm -C apps/front build\n ---> Running in 63ff86ae9d9f\n\n> front@1.2.5 build /usr/lnmarkets/apps/front\n> vite build\n\nvite v3.2.0 building for production...\ntransforming...\nâœ“ 369 modules transformed.\nrendering chunks...\ndist/index.html                  1.08 KiB\ndist/assets/index.318dc2cb.css   21.50 KiB / gzip: 4.57 KiB\ndist/assets/index.b3b54de7.js    160.57 KiB / gzip: 57.46 KiB\nRemoving intermediate container 63ff86ae9d9f\n ---> a476a009aa49\nStep 10/24 : FROM node:16.15.0-alpine3.14\n ---> 1586b34e36a3\nStep 11/24 : ENV NODE_ENV=\"production\"\n ---> Running in 2013b3ff34f6\nRemoving intermediate container 2013b3ff34f6\n ---> 6555625a8278\nStep 12/24 : WORKDIR /usr/lnmarkets\n ---> Running in 19d82e69d1d4\nRemoving intermediate container 19d82e69d1d4\n ---> 3747451c96e6\nStep 13/24 : RUN apk add --no-cache dumb-init\n ---> Running in 4a22b601170f\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.14/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.14/community/x86_64/APKINDEX.tar.gz\n(1/1) Installing dumb-init (1.2.5-r1)\nExecuting busybox-1.33.1-r7.trigger\nOK: 7 MiB in 17 packages\nRemoving intermediate container 4a22b601170f\n ---> f85c2e6cde55\nStep 14/24 : COPY --chown=node:node --from=builder /usr/lnmarkets/apps/front/dist /usr/lnmarkets/apps/api/public\n ---> ce6ff2e186d0\nStep 15/24 : COPY --chown=node:node --from=builder /usr/lnmarkets/node_modules /usr/lnmarkets/node_modules\n ---> f06148600684\nStep 16/24 : COPY --chown=node:node --from=builder /usr/lnmarkets/apps/api/node_modules /usr/lnmarkets/apps/api/node_modules\n ---> b7d85fe489d4\nStep 17/24 : COPY --chown=node:node apps/api/src /usr/lnmarkets/apps/api/src\n ---> 5139f8aa6a3c\nStep 18/24 : COPY --chown=node:node apps/api/docker/healthcheck.js /usr/lnmarkets/apps/api/healthcheck.js\n ---> 475bc1fefc7e\nStep 19/24 : COPY --chown=node:node apps/api/package.json /usr/lnmarkets/apps/api/package.json\n ---> 4e85b7333884\nStep 20/24 : USER node\n ---> Running in 4c9ecfcb6869\nRemoving intermediate container 4c9ecfcb6869\n ---> a40c93ab5584\nStep 21/24 : EXPOSE 4242\n ---> Running in 2caed9276c07\nRemoving intermediate container 2caed9276c07\n ---> 677806d9f2ad\nStep 22/24 : HEALTHCHECK --interval=12s --timeout=12s --start-period=15s   CMD node /usr/lnmarkets/apps/api/healthcheck.js\n ---> Running in 2eacb156469d\nRemoving intermediate container 2eacb156469d\n ---> eeb5d47b2d15\nStep 23/24 : WORKDIR /usr/lnmarkets/apps/api\n ---> Running in 73acb6d6937f\nRemoving intermediate container 73acb6d6937f\n ---> a0b5d603fa74\nStep 24/24 : CMD [\"dumb-init\", \"node\", \"src/index.js\"]\n ---> Running in 1f10f48cba5b\nRemoving intermediate container 1f10f48cba5b\n ---> 7c1425d22cd4\nSuccessfully built 7c1425d22cd4\nSuccessfully tagged umbrel:latest\n","stderr":"","imageSize":310171407}}