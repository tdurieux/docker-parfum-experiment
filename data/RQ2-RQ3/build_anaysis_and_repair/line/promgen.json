{"repository":"https://github.com/line/promgen","dockerfilePath":"Dockerfile","startTime":1672025954978,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/line/promgen'...\n","error":null,"commit":"3363e91b3bd501c5124b943849838434dd2f8ef9"},"originalBuild":{"startTimestamp":1672025956136,"endTimestamp":1672026027711,"error":null,"stdout":"Sending build context to Docker daemon  2.398MB\r\r\nStep 1/27 : FROM python:3.6.9-alpine\n3.6.9-alpine: Pulling from library/python\n89d9c30c1d48: Pulling fs layer\n910c49c00810: Pulling fs layer\n356e2b6f7f7c: Pulling fs layer\ne2700c1bbf1f: Pulling fs layer\nb644b1801e4a: Pulling fs layer\ne2700c1bbf1f: Waiting\n89d9c30c1d48: Verifying Checksum\n89d9c30c1d48: Download complete\n910c49c00810: Verifying Checksum\n910c49c00810: Download complete\n89d9c30c1d48: Pull complete\n910c49c00810: Pull complete\ne2700c1bbf1f: Download complete\n356e2b6f7f7c: Verifying Checksum\n356e2b6f7f7c: Download complete\nb644b1801e4a: Download complete\n356e2b6f7f7c: Pull complete\ne2700c1bbf1f: Pull complete\nb644b1801e4a: Pull complete\nDigest: sha256:97b8476181d11b6ae829642cd629f800a2c934a2fc0bf2ded8525f237524028b\nStatus: Downloaded newer image for python:3.6.9-alpine\n ---> 8880aaf979d2\nStep 2/27 : LABEL maintainer=paul.traylor@linecorp.com\n ---> Running in 6822c980b8ad\nRemoving intermediate container 6822c980b8ad\n ---> 4a19d7b46653\nStep 3/27 : ENV PYTHONDONTWRITEBYTECODE 1\n ---> Running in a62e4192f4e1\nRemoving intermediate container a62e4192f4e1\n ---> e6c4f827ecb3\nStep 4/27 : ENV PYTHONUNBUFFERED 1\n ---> Running in 9e6bedee53ee\nRemoving intermediate container 9e6bedee53ee\n ---> 4a8101f5fa08\nStep 5/27 : ENV PIP_NO_CACHE_DIR off\n ---> Running in 4315e8274365\nRemoving intermediate container 4315e8274365\n ---> 2504dfe7d000\nStep 6/27 : ENV PROMGEN_CONFIG_DIR=/etc/promgen\n ---> Running in a86bf5496792\nRemoving intermediate container a86bf5496792\n ---> dbdf2e1d8a89\nStep 7/27 : RUN adduser -D -u 1000 promgen promgen\n ---> Running in 80fc92b002dc\nRemoving intermediate container 80fc92b002dc\n ---> bd4c6f18ff86\nStep 8/27 : RUN pip install --no-cache-dir -U pip==20.0.2\n ---> Running in 79d6a3b467ef\nCollecting pip==20.0.2\n  Downloading https://files.pythonhosted.org/packages/54/0c/d01aa759fdc501a58f431eb594a17495f15b88da142ce14b5845662c13f3/pip-20.0.2-py2.py3-none-any.whl (1.4MB)\nInstalling collected packages: pip\n  Found existing installation: pip 19.3.1\n    Uninstalling pip-19.3.1:\n      Successfully uninstalled pip-19.3.1\nSuccessfully installed pip-20.0.2\nRemoving intermediate container 79d6a3b467ef\n ---> 900015f8e816\nStep 9/27 : RUN set -ex     && apk add --no-cache mariadb-dev     && apk add --no-cache --virtual build-deps build-base     && pip --no-cache-dir install mysqlclient     && apk del build-deps\n ---> Running in fc98ceba4c94\n\u001b[91m+ apk add --no-cache mariadb-dev\n\u001b[0mfetch http://dl-cdn.alpinelinux.org/alpine/v3.10/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.10/community/x86_64/APKINDEX.tar.gz\n(1/14) Upgrading libcrypto1.1 (1.1.1d-r0 -> 1.1.1k-r0)\n(2/14) Upgrading libssl1.1 (1.1.1d-r0 -> 1.1.1k-r0)\n(3/14) Installing pkgconf (1.6.1-r1)\n(4/14) Installing openssl-dev (1.1.1k-r0)\n(5/14) Installing zlib-dev (1.2.11-r1)\n(6/14) Installing mariadb-connector-c (3.0.10-r1)\n(7/14) Installing mariadb-connector-c-dev (3.0.10-r1)\n(8/14) Installing mariadb-common (10.3.29-r0)\n(9/14) Installing libaio (0.3.111-r0)\n(10/14) Installing pcre (8.43-r1)\n(11/14) Installing libgcc (8.3.0-r0)\n(12/14) Installing libstdc++ (8.3.0-r0)\n(13/14) Installing mariadb-embedded (10.3.29-r0)\n(14/14) Installing mariadb-dev (10.3.29-r0)\nExecuting busybox-1.30.1-r2.trigger\nExecuting ca-certificates-20190108-r0.trigger\nOK: 65 MiB in 46 packages\n\u001b[91m+ apk add --no-cache --virtual build-deps build-base\n\u001b[0mfetch http://dl-cdn.alpinelinux.org/alpine/v3.10/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.10/community/x86_64/APKINDEX.tar.gz\n(1/18) Upgrading musl (1.1.22-r3 -> 1.1.22-r4)\n(2/18) Installing binutils (2.32-r1)\n(3/18) Installing libmagic (5.37-r1)\n(4/18) Installing file (5.37-r1)\n(5/18) Installing gmp (6.1.2-r1)\n(6/18) Installing isl (0.18-r0)\n(7/18) Installing libgomp (8.3.0-r0)\n(8/18) Installing libatomic (8.3.0-r0)\n(9/18) Installing mpfr3 (3.1.5-r1)\n(10/18) Installing mpc1 (1.1.0-r0)\n(11/18) Installing gcc (8.3.0-r0)\n(12/18) Installing musl-dev (1.1.22-r4)\n(13/18) Installing libc-dev (0.7.1-r0)\n(14/18) Installing g++ (8.3.0-r0)\n(15/18) Installing make (4.2.1-r2)\n(16/18) Installing fortify-headers (1.1-r0)\n(17/18) Installing build-base (0.5-r1)\n(18/18) Installing build-deps (20221226.033930)\nExecuting busybox-1.30.1-r2.trigger\nOK: 221 MiB in 63 packages\n\u001b[91m+ pip --no-cache-dir install mysqlclient\n\u001b[0mCollecting mysqlclient\n  Downloading mysqlclient-2.1.1.tar.gz (88 kB)\nBuilding wheels for collected packages: mysqlclient\n  Building wheel for mysqlclient (setup.py): started\n  Building wheel for mysqlclient (setup.py): finished with status 'done'\n  Created wheel for mysqlclient: filename=mysqlclient-2.1.1-cp36-cp36m-linux_x86_64.whl size=113638 sha256=298aff72e27e83209f9eeae0336ddc686e8eb85553ebed95214df5cdf92066d6\n  Stored in directory: /tmp/pip-ephem-wheel-cache-n2a0j3d8/wheels/e5/5a/1e/09957b248b148697b321d8a357512a56dff1003d921b0b9b15\nSuccessfully built mysqlclient\nInstalling collected packages: mysqlclient\nSuccessfully installed mysqlclient-2.1.1\n\u001b[91mWARNING: You are using pip version 20.0.2; however, version 21.3.1 is available.\nYou should consider upgrading via the '/usr/local/bin/python -m pip install --upgrade pip' command.\n\u001b[0m\u001b[91m+ apk del build-deps\n\u001b[0m\u001b[91mWARNING: Ignoring APKINDEX.00740ba1.tar.gz: No such file or directory\nWARNING: Ignoring APKINDEX.d8b2a6f4.tar.gz: No such file or directory\n\u001b[0m(1/17) Purging build-deps (20221226.033930)\n(2/17) Purging build-base (0.5-r1)\n(3/17) Purging file (5.37-r1)\n(4/17) Purging g++ (8.3.0-r0)\n(5/17) Purging gcc (8.3.0-r0)\n(6/17) Purging binutils (2.32-r1)\n(7/17) Purging libatomic (8.3.0-r0)\n(8/17) Purging libgomp (8.3.0-r0)\n(9/17) Purging make (4.2.1-r2)\n(10/17) Purging libc-dev (0.7.1-r0)\n(11/17) Purging musl-dev (1.1.22-r4)\n(12/17) Purging fortify-headers (1.1-r0)\n(13/17) Purging libmagic (5.37-r1)\n(14/17) Purging mpc1 (1.1.0-r0)\n(15/17) Purging mpfr3 (3.1.5-r1)\n(16/17) Purging isl (0.18-r0)\n(17/17) Purging gmp (6.1.2-r1)\nExecuting busybox-1.30.1-r2.trigger\nOK: 65 MiB in 46 packages\nRemoving intermediate container fc98ceba4c94\n ---> 12769f9a0cd8\nStep 10/27 : RUN set -ex     && apk add --no-cache postgresql-dev     && apk add --no-cache --virtual build-deps build-base     && pip install --no-cache-dir psycopg2-binary     && apk del build-deps\n ---> Running in 892a6047d370\n\u001b[91m+ apk add --no-cache postgresql-dev\n\u001b[0mfetch http://dl-cdn.alpinelinux.org/alpine/v3.10/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.10/community/x86_64/APKINDEX.tar.gz\n(1/6) Installing db (5.3.28-r1)\n(2/6) Installing libsasl (2.1.27-r4)\n(3/6) Installing libldap (2.4.48-r2)\n(4/6) Installing libpq (11.12-r0)\n(5/6) Installing postgresql-libs (11.12-r0)\n(6/6) Installing postgresql-dev (11.12-r0)\nExecuting busybox-1.30.1-r2.trigger\nOK: 76 MiB in 52 packages\n\u001b[91m+ apk add --no-cache --virtual build-deps build-base\n\u001b[0mfetch http://dl-cdn.alpinelinux.org/alpine/v3.10/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.10/community/x86_64/APKINDEX.tar.gz\n(1/17) Installing binutils (2.32-r1)\n(2/17) Installing libmagic (5.37-r1)\n(3/17) Installing file (5.37-r1)\n(4/17) Installing gmp (6.1.2-r1)\n(5/17) Installing isl (0.18-r0)\n(6/17) Installing libgomp (8.3.0-r0)\n(7/17) Installing libatomic (8.3.0-r0)\n(8/17) Installing mpfr3 (3.1.5-r1)\n(9/17) Installing mpc1 (1.1.0-r0)\n(10/17) Installing gcc (8.3.0-r0)\n(11/17) Installing musl-dev (1.1.22-r4)\n(12/17) Installing libc-dev (0.7.1-r0)\n(13/17) Installing g++ (8.3.0-r0)\n(14/17) Installing make (4.2.1-r2)\n(15/17) Installing fortify-headers (1.1-r0)\n(16/17) Installing build-base (0.5-r1)\n(17/17) Installing build-deps (20221226.033936)\nExecuting busybox-1.30.1-r2.trigger\nOK: 232 MiB in 69 packages\n\u001b[91m+ pip install --no-cache-dir psycopg2-binary\n\u001b[0mCollecting psycopg2-binary\n  Downloading psycopg2-binary-2.9.5.tar.gz (384 kB)\nBuilding wheels for collected packages: psycopg2-binary\n  Building wheel for psycopg2-binary (setup.py): started\n  Building wheel for psycopg2-binary (setup.py): finished with status 'done'\n  Created wheel for psycopg2-binary: filename=psycopg2_binary-2.9.5-cp36-cp36m-linux_x86_64.whl size=493687 sha256=3ff686a931b1c7beb7130b0ca9f0626876ef38b168706cc565c27bf81ebe0608\n  Stored in directory: /tmp/pip-ephem-wheel-cache-gm8ivvis/wheels/7c/25/f2/f6c9c1033f0c18161cd2a333677a3dffa99c85e6b0b4bf04cf\nSuccessfully built psycopg2-binary\nInstalling collected packages: psycopg2-binary\nSuccessfully installed psycopg2-binary-2.9.5\n\u001b[91mWARNING: You are using pip version 20.0.2; however, version 21.3.1 is available.\nYou should consider upgrading via the '/usr/local/bin/python -m pip install --upgrade pip' command.\n\u001b[0m\u001b[91m+ apk del build-deps\n\u001b[0m\u001b[91mWARNING: Ignoring APKINDEX.00740ba1.tar.gz: No such file or directory\nWARNING: Ignoring APKINDEX.d8b2a6f4.tar.gz: No such file or directory\n\u001b[0m(1/17) Purging build-deps (20221226.033936)\n(2/17) Purging build-base (0.5-r1)\n(3/17) Purging file (5.37-r1)\n(4/17) Purging g++ (8.3.0-r0)\n(5/17) Purging gcc (8.3.0-r0)\n(6/17) Purging binutils (2.32-r1)\n(7/17) Purging libatomic (8.3.0-r0)\n(8/17) Purging libgomp (8.3.0-r0)\n(9/17) Purging make (4.2.1-r2)\n(10/17) Purging libc-dev (0.7.1-r0)\n(11/17) Purging musl-dev (1.1.22-r4)\n(12/17) Purging fortify-headers (1.1-r0)\n(13/17) Purging libmagic (5.37-r1)\n(14/17) Purging mpc1 (1.1.0-r0)\n(15/17) Purging mpfr3 (3.1.5-r1)\n(16/17) Purging isl (0.18-r0)\n(17/17) Purging gmp (6.1.2-r1)\nExecuting busybox-1.30.1-r2.trigger\nOK: 76 MiB in 52 packages\nRemoving intermediate container 892a6047d370\n ---> bda92d16799b\nStep 11/27 : RUN mkdir -p /etc/prometheus;     mkdir -p /etc/promgen;     mkdir -p /usr/src/app;     chown promgen /etc/prometheus\n ---> Running in 07feb49a1234\nRemoving intermediate container 07feb49a1234\n ---> 254d25456340\nStep 12/27 : COPY --from=prom/prometheus:v2.26.0 /bin/promtool /usr/local/bin/promtool\nv2.26.0: Pulling from prom/prometheus\ne5d9363303dd: Pulling fs layer\n3430c2c42129: Pulling fs layer\n7631b5d56c90: Pulling fs layer\n343e06690c48: Pulling fs layer\ndc32e90574e9: Pulling fs layer\na6d5d01cd646: Pulling fs layer\n832428480103: Pulling fs layer\n83e775ff1768: Pulling fs layer\n1ec97f567836: Pulling fs layer\n0cdf5b797911: Pulling fs layer\neb7d1f2acc9f: Pulling fs layer\n541ffe559bd5: Pulling fs layer\na6d5d01cd646: Waiting\n343e06690c48: Waiting\n832428480103: Waiting\ndc32e90574e9: Waiting\n83e775ff1768: Waiting\n1ec97f567836: Waiting\neb7d1f2acc9f: Waiting\n0cdf5b797911: Waiting\n541ffe559bd5: Waiting\n3430c2c42129: Verifying Checksum\n3430c2c42129: Download complete\ne5d9363303dd: Download complete\ne5d9363303dd: Pull complete\n7631b5d56c90: Verifying Checksum\n7631b5d56c90: Download complete\ndc32e90574e9: Verifying Checksum\ndc32e90574e9: Download complete\n3430c2c42129: Pull complete\n343e06690c48: Verifying Checksum\n343e06690c48: Download complete\na6d5d01cd646: Download complete\n832428480103: Download complete\n83e775ff1768: Verifying Checksum\n83e775ff1768: Download complete\n1ec97f567836: Verifying Checksum\n1ec97f567836: Download complete\n0cdf5b797911: Download complete\neb7d1f2acc9f: Verifying Checksum\neb7d1f2acc9f: Download complete\n541ffe559bd5: Download complete\n7631b5d56c90: Pull complete\n343e06690c48: Pull complete\ndc32e90574e9: Pull complete\na6d5d01cd646: Pull complete\n832428480103: Pull complete\n83e775ff1768: Pull complete\n1ec97f567836: Pull complete\n0cdf5b797911: Pull complete\neb7d1f2acc9f: Pull complete\n541ffe559bd5: Pull complete\nDigest: sha256:38d40a760569b1c5aec4a36e8a7f11e86299e9191b9233672a5d41296d8fa74e\nStatus: Downloaded newer image for prom/prometheus:v2.26.0\n ---> ed63ecad90c1\nStep 13/27 : COPY docker/requirements.txt /tmp/requirements.txt\n ---> 3fd274cde870\nStep 14/27 : RUN pip install --no-cache-dir -r /tmp/requirements.txt\n ---> Running in 339fd169d11c\nCollecting amqp==2.5.1\n  Downloading amqp-2.5.1-py2.py3-none-any.whl (49 kB)\nCollecting asgiref==3.4.1\n  Downloading asgiref-3.4.1-py3-none-any.whl (25 kB)\nCollecting atomicwrites==1.3.0\n  Downloading atomicwrites-1.3.0-py2.py3-none-any.whl (5.9 kB)\nCollecting billiard==3.6.1.0\n  Downloading billiard-3.6.1.0-py3-none-any.whl (89 kB)\nCollecting celery[redis]==4.3.0\n  Downloading celery-4.3.0-py2.py3-none-any.whl (413 kB)\nCollecting certifi==2019.9.11\n  Downloading certifi-2019.9.11-py2.py3-none-any.whl (154 kB)\nCollecting chardet==3.0.4\n  Downloading chardet-3.0.4-py2.py3-none-any.whl (133 kB)\nCollecting defusedxml==0.6.0\n  Downloading defusedxml-0.6.0-py2.py3-none-any.whl (23 kB)\nCollecting django==3.2.13\n  Downloading Django-3.2.13-py3-none-any.whl (7.9 MB)\nCollecting django-environ==0.4.5\n  Downloading django_environ-0.4.5-py2.py3-none-any.whl (21 kB)\nCollecting django-filter==2.4.0\n  Downloading django_filter-2.4.0-py3-none-any.whl (73 kB)\nCollecting djangorestframework==3.11.2\n  Downloading djangorestframework-3.11.2-py3-none-any.whl (911 kB)\nCollecting envdir==1.0.1\n  Downloading envdir-1.0.1-py2.py3-none-any.whl (13 kB)\nCollecting gunicorn==19.9.0\n  Downloading gunicorn-19.9.0-py2.py3-none-any.whl (112 kB)\nCollecting idna==2.8\n  Downloading idna-2.8-py2.py3-none-any.whl (58 kB)\nCollecting importlib-metadata==0.23\n  Downloading importlib_metadata-0.23-py2.py3-none-any.whl (28 kB)\nCollecting kombu==4.6.3\n  Downloading kombu-4.6.3-py2.py3-none-any.whl (181 kB)\nCollecting more-itertools==8.14.0\n  Downloading more_itertools-8.14.0-py3-none-any.whl (52 kB)\nCollecting oauthlib==3.1.0\n  Downloading oauthlib-3.1.0-py2.py3-none-any.whl (147 kB)\nCollecting prometheus-client==0.12.0\n  Downloading prometheus_client-0.12.0-py2.py3-none-any.whl (57 kB)\nCollecting pyjwt==1.7.1\n  Downloading PyJWT-1.7.1-py2.py3-none-any.whl (18 kB)\nCollecting python-dateutil==2.8.0\n  Downloading python_dateutil-2.8.0-py2.py3-none-any.whl (226 kB)\nCollecting python3-openid==3.1.0\n  Downloading python3_openid-3.1.0-py3-none-any.whl (130 kB)\nCollecting pytz==2021.3\n  Downloading pytz-2021.3-py2.py3-none-any.whl (503 kB)\nCollecting pyyaml==5.4\n  Downloading PyYAML-5.4.tar.gz (174 kB)\n  Installing build dependencies: started\n  Installing build dependencies: finished with status 'done'\n  Getting requirements to build wheel: started\n  Getting requirements to build wheel: finished with status 'done'\n    Preparing wheel metadata: started\n    Preparing wheel metadata: finished with status 'done'\nCollecting redis==3.2.1\n  Downloading redis-3.2.1-py2.py3-none-any.whl (65 kB)\nCollecting requests==2.25.1\n  Downloading requests-2.25.1-py2.py3-none-any.whl (61 kB)\nCollecting requests-oauthlib==1.2.0\n  Downloading requests_oauthlib-1.2.0-py2.py3-none-any.whl (22 kB)\nCollecting sentry_sdk==1.5.12\n  Downloading sentry_sdk-1.5.12-py2.py3-none-any.whl (145 kB)\nCollecting six==1.12.0\n  Downloading six-1.12.0-py2.py3-none-any.whl (10 kB)\nCollecting social-auth-app-django==3.1.0\n  Downloading social_auth_app_django-3.1.0-py3-none-any.whl (23 kB)\nCollecting social-auth-core==3.2.0\n  Downloading social_auth_core-3.2.0-py3-none-any.whl (315 kB)\nCollecting sqlparse==0.3.0\n  Downloading sqlparse-0.3.0-py2.py3-none-any.whl (39 kB)\nCollecting typing-extensions==4.1.1\n  Downloading typing_extensions-4.1.1-py3-none-any.whl (26 kB)\nCollecting urllib3==1.26.5\n  Downloading urllib3-1.26.5-py2.py3-none-any.whl (138 kB)\nCollecting vine==1.3.0\n  Downloading vine-1.3.0-py2.py3-none-any.whl (14 kB)\nCollecting whitenoise==5.2.0\n  Downloading whitenoise-5.2.0-py2.py3-none-any.whl (19 kB)\nCollecting zipp==0.6.0\n  Downloading zipp-0.6.0-py2.py3-none-any.whl (4.1 kB)\nBuilding wheels for collected packages: pyyaml\n  Building wheel for pyyaml (PEP 517): started\n  Building wheel for pyyaml (PEP 517): finished with status 'done'\n  Created wheel for pyyaml: filename=PyYAML-5.4-cp36-cp36m-linux_x86_64.whl size=45525 sha256=7b5c3bc693905afce82491a3c4c02359611e0ecbe24daf8f195010bdf6e373b9\n  Stored in directory: /tmp/pip-ephem-wheel-cache-e0oiq1jd/wheels/54/13/92/9f0d1613342b54a224b93abd66c028da0e4d0b9ff40b0ccc46\nSuccessfully built pyyaml\nInstalling collected packages: vine, amqp, typing-extensions, asgiref, atomicwrites, billiard, kombu, pytz, redis, celery, certifi, chardet, defusedxml, sqlparse, django, django-environ, django-filter, djangorestframework, envdir, gunicorn, idna, more-itertools, zipp, importlib-metadata, oauthlib, prometheus-client, pyjwt, six, python-dateutil, python3-openid, pyyaml, urllib3, requests, requests-oauthlib, sentry-sdk, social-auth-core, social-auth-app-django, whitenoise\nSuccessfully installed amqp-2.5.1 asgiref-3.4.1 atomicwrites-1.3.0 billiard-3.6.1.0 celery-4.3.0 certifi-2019.9.11 chardet-3.0.4 defusedxml-0.6.0 django-3.2.13 django-environ-0.4.5 django-filter-2.4.0 djangorestframework-3.11.2 envdir-1.0.1 gunicorn-19.9.0 idna-2.8 importlib-metadata-0.23 kombu-4.6.3 more-itertools-8.14.0 oauthlib-3.1.0 prometheus-client-0.12.0 pyjwt-1.7.1 python-dateutil-2.8.0 python3-openid-3.1.0 pytz-2021.3 pyyaml-5.4 redis-3.2.1 requests-2.25.1 requests-oauthlib-1.2.0 sentry-sdk-1.5.12 six-1.12.0 social-auth-app-django-3.1.0 social-auth-core-3.2.0 sqlparse-0.3.0 typing-extensions-4.1.1 urllib3-1.26.5 vine-1.3.0 whitenoise-5.2.0 zipp-0.6.0\n\u001b[91mWARNING: You are using pip version 20.0.2; however, version 21.3.1 is available.\nYou should consider upgrading via the '/usr/local/bin/python -m pip install --upgrade pip' command.\n\u001b[0mRemoving intermediate container 339fd169d11c\n ---> 428acae12f90\nStep 15/27 : COPY docker/docker-entrypoint.sh /\n ---> 84d0ca66e8db\nStep 16/27 : COPY setup.py /usr/src/app/setup.py\n ---> 03e25718c714\nStep 17/27 : COPY setup.cfg /usr/src/app/setup.cfg\n ---> 3fff34222c53\nStep 18/27 : COPY promgen /usr/src/app/promgen\n ---> aa68c9838c1e\nStep 19/27 : COPY promgen/tests/examples/promgen.yml /etc/promgen/promgen.yml\n ---> 296c5a4aaf98\nStep 20/27 : WORKDIR /usr/src/app\n ---> Running in 1dd99de2b331\nRemoving intermediate container 1dd99de2b331\n ---> 55b589a9e3ee\nStep 21/27 : RUN pip install --no-cache-dir -e .\n ---> Running in 6d4bdbfd247e\nObtaining file:///usr/src/app\nRequirement already satisfied: atomicwrites==1.3.0 in /usr/local/lib/python3.6/site-packages (from promgen==0.57.0.dev0) (1.3.0)\nRequirement already satisfied: celery==4.3.0 in /usr/local/lib/python3.6/site-packages (from promgen==0.57.0.dev0) (4.3.0)\nRequirement already satisfied: django-environ in /usr/local/lib/python3.6/site-packages (from promgen==0.57.0.dev0) (0.4.5)\nRequirement already satisfied: django-filter in /usr/local/lib/python3.6/site-packages (from promgen==0.57.0.dev0) (2.4.0)\nRequirement already satisfied: Django<4.0,>=3.2 in /usr/local/lib/python3.6/site-packages (from promgen==0.57.0.dev0) (3.2.13)\nRequirement already satisfied: djangorestframework==3.11.2 in /usr/local/lib/python3.6/site-packages (from promgen==0.57.0.dev0) (3.11.2)\nRequirement already satisfied: envdir in /usr/local/lib/python3.6/site-packages (from promgen==0.57.0.dev0) (1.0.1)\nRequirement already satisfied: kombu==4.6.3 in /usr/local/lib/python3.6/site-packages (from promgen==0.57.0.dev0) (4.6.3)\nRequirement already satisfied: prometheus-client in /usr/local/lib/python3.6/site-packages (from promgen==0.57.0.dev0) (0.12.0)\nRequirement already satisfied: python-dateutil==2.8.0 in /usr/local/lib/python3.6/site-packages (from promgen==0.57.0.dev0) (2.8.0)\nRequirement already satisfied: pyyaml==5.4 in /usr/local/lib/python3.6/site-packages (from promgen==0.57.0.dev0) (5.4)\nRequirement already satisfied: requests==2.25.1 in /usr/local/lib/python3.6/site-packages (from promgen==0.57.0.dev0) (2.25.1)\nRequirement already satisfied: social-auth-app-django>=2.0.0 in /usr/local/lib/python3.6/site-packages (from promgen==0.57.0.dev0) (3.1.0)\nRequirement already satisfied: vine>=1.3.0 in /usr/local/lib/python3.6/site-packages (from celery==4.3.0->promgen==0.57.0.dev0) (1.3.0)\nRequirement already satisfied: pytz>dev in /usr/local/lib/python3.6/site-packages (from celery==4.3.0->promgen==0.57.0.dev0) (2021.3)\nRequirement already satisfied: billiard<4.0,>=3.6.0 in /usr/local/lib/python3.6/site-packages (from celery==4.3.0->promgen==0.57.0.dev0) (3.6.1.0)\nRequirement already satisfied: sqlparse>=0.2.2 in /usr/local/lib/python3.6/site-packages (from Django<4.0,>=3.2->promgen==0.57.0.dev0) (0.3.0)\nRequirement already satisfied: asgiref<4,>=3.3.2 in /usr/local/lib/python3.6/site-packages (from Django<4.0,>=3.2->promgen==0.57.0.dev0) (3.4.1)\nRequirement already satisfied: amqp<3.0,>=2.5.0 in /usr/local/lib/python3.6/site-packages (from kombu==4.6.3->promgen==0.57.0.dev0) (2.5.1)\nRequirement already satisfied: six>=1.5 in /usr/local/lib/python3.6/site-packages (from python-dateutil==2.8.0->promgen==0.57.0.dev0) (1.12.0)\nRequirement already satisfied: idna<3,>=2.5 in /usr/local/lib/python3.6/site-packages (from requests==2.25.1->promgen==0.57.0.dev0) (2.8)\nRequirement already satisfied: certifi>=2017.4.17 in /usr/local/lib/python3.6/site-packages (from requests==2.25.1->promgen==0.57.0.dev0) (2019.9.11)\nRequirement already satisfied: chardet<5,>=3.0.2 in /usr/local/lib/python3.6/site-packages (from requests==2.25.1->promgen==0.57.0.dev0) (3.0.4)\nRequirement already satisfied: urllib3<1.27,>=1.21.1 in /usr/local/lib/python3.6/site-packages (from requests==2.25.1->promgen==0.57.0.dev0) (1.26.5)\nRequirement already satisfied: social-auth-core>=1.2.0 in /usr/local/lib/python3.6/site-packages (from social-auth-app-django>=2.0.0->promgen==0.57.0.dev0) (3.2.0)\nRequirement already satisfied: typing-extensions; python_version < \"3.8\" in /usr/local/lib/python3.6/site-packages (from asgiref<4,>=3.3.2->Django<4.0,>=3.2->promgen==0.57.0.dev0) (4.1.1)\nRequirement already satisfied: PyJWT>=1.4.0 in /usr/local/lib/python3.6/site-packages (from social-auth-core>=1.2.0->social-auth-app-django>=2.0.0->promgen==0.57.0.dev0) (1.7.1)\nRequirement already satisfied: requests-oauthlib>=0.6.1 in /usr/local/lib/python3.6/site-packages (from social-auth-core>=1.2.0->social-auth-app-django>=2.0.0->promgen==0.57.0.dev0) (1.2.0)\nRequirement already satisfied: defusedxml>=0.5.0rc1; python_version >= \"3.0\" in /usr/local/lib/python3.6/site-packages (from social-auth-core>=1.2.0->social-auth-app-django>=2.0.0->promgen==0.57.0.dev0) (0.6.0)\nRequirement already satisfied: python3-openid>=3.0.10; python_version >= \"3.0\" in /usr/local/lib/python3.6/site-packages (from social-auth-core>=1.2.0->social-auth-app-django>=2.0.0->promgen==0.57.0.dev0) (3.1.0)\nRequirement already satisfied: oauthlib>=1.0.3 in /usr/local/lib/python3.6/site-packages (from social-auth-core>=1.2.0->social-auth-app-django>=2.0.0->promgen==0.57.0.dev0) (3.1.0)\nInstalling collected packages: promgen\n  Running setup.py develop for promgen\nSuccessfully installed promgen\n\u001b[91mWARNING: You are using pip version 20.0.2; however, version 21.3.1 is available.\nYou should consider upgrading via the '/usr/local/bin/python -m pip install --upgrade pip' command.\n\u001b[0mRemoving intermediate container 6d4bdbfd247e\n ---> 6aac557924ef\nStep 22/27 : USER promgen\n ---> Running in 7aa377de22dc\nRemoving intermediate container 7aa377de22dc\n ---> 78db400ed2b0\nStep 23/27 : EXPOSE 8000\n ---> Running in be8ff6516285\nRemoving intermediate container be8ff6516285\n ---> ff607f0c8391\nStep 24/27 : RUN SECRET_KEY=1 promgen collectstatic --noinput\n ---> Running in 1063a4179242\n\n184 static files copied to '/home/promgen/.cache/promgen', 572 post-processed.\nRemoving intermediate container 1063a4179242\n ---> b174ccea6a0c\nStep 25/27 : VOLUME [\"/etc/promgen\", \"/etc/prometheus\"]\n ---> Running in f686b2bb014c\nRemoving intermediate container f686b2bb014c\n ---> e7afcc436675\nStep 26/27 : ENTRYPOINT [\"/docker-entrypoint.sh\"]\n ---> Running in 69981f7ca9e6\nRemoving intermediate container 69981f7ca9e6\n ---> 8620f62e488b\nStep 27/27 : CMD [\"web\", \"--bind\", \"0.0.0.0:8000\", \"--workers\", \"4\"]\n ---> Running in 465eb69ee5c5\nRemoving intermediate container 465eb69ee5c5\n ---> c895344ed567\nSuccessfully built c895344ed567\nSuccessfully tagged promgen:latest\n","stderr":"","imageSize":301604721},"repair":{"violations":[],"repairedDockerfile":"FROM python:3.6.9-alpine\nLABEL maintainer=paul.traylor@linecorp.com\n\nENV PYTHONDONTWRITEBYTECODE 1\nENV PYTHONUNBUFFERED 1\nENV PIP_NO_CACHE_DIR off\nENV PROMGEN_CONFIG_DIR=/etc/promgen\n\nRUN adduser -D -u 1000 promgen promgen\n\n# Upgrade Pip\nRUN pip install --no-cache-dir -U pip==20.0.2\n\n# Install MySQL Support\nRUN set -ex \\\n    && apk add --no-cache mariadb-dev \\\n    && apk add --no-cache --virtual build-deps build-base \\\n    && pip --no-cache-dir install mysqlclient \\\n    && apk del build-deps \n\n# Install Postgres Support\nRUN set -ex \\\n    && apk add --no-cache postgresql-dev \\\n    && apk add --no-cache --virtual build-deps build-base \\\n    && pip install --no-cache-dir psycopg2-binary \\\n    && apk del build-deps\n\nRUN mkdir -p /etc/prometheus; \\\n    mkdir -p /etc/promgen; \\\n    mkdir -p /usr/src/app; \\\n    chown promgen /etc/prometheus\n\n# Get needed prometheus binaries\nCOPY --from=prom/prometheus:v2.26.0 /bin/promtool /usr/local/bin/promtool\n\nCOPY docker/requirements.txt /tmp/requirements.txt\n\nRUN pip install --no-cache-dir -r /tmp/requirements.txt\n\nCOPY docker/docker-entrypoint.sh /\nCOPY setup.py /usr/src/app/setup.py\nCOPY setup.cfg /usr/src/app/setup.cfg\nCOPY promgen /usr/src/app/promgen\nCOPY promgen/tests/examples/promgen.yml /etc/promgen/promgen.yml\n\nWORKDIR /usr/src/app\nRUN pip install --no-cache-dir -e .\n\nUSER promgen\nEXPOSE 8000\n\nRUN SECRET_KEY=1 promgen collectstatic --noinput\n\nVOLUME [\"/etc/promgen\", \"/etc/prometheus\"]\nENTRYPOINT [\"/docker-entrypoint.sh\"]\nCMD [\"web\", \"--bind\", \"0.0.0.0:8000\", \"--workers\", \"4\"]\n"},"endTime":1672026028459}