{"repository":"https://github.com/dutchcoders/transfer.sh","dockerfilePath":"Dockerfile","startTime":1672426549424,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/dutchcoders/transfer.sh'...\n","error":null,"commit":"ca798ff6f6b22a1ecd6b097e6e88d556b2de15ba"},"originalBuild":{"startTimestamp":1672426550275,"endTimestamp":1672426617535,"error":null,"stdout":"Sending build context to Docker daemon    470kB\r\r\nStep 1/19 : ARG GO_VERSION=1.17\nStep 2/19 : FROM golang:${GO_VERSION}-alpine as build\n1.17-alpine: Pulling from library/golang\n530afca65e2e: Pulling fs layer\nd450d4da0343: Pulling fs layer\n8162171ecb65: Pulling fs layer\nff63b82a42d3: Pulling fs layer\n5b4b56e6b994: Pulling fs layer\nff63b82a42d3: Waiting\n5b4b56e6b994: Waiting\n8162171ecb65: Verifying Checksum\n8162171ecb65: Download complete\nd450d4da0343: Verifying Checksum\nd450d4da0343: Download complete\n530afca65e2e: Verifying Checksum\n530afca65e2e: Download complete\n5b4b56e6b994: Verifying Checksum\n5b4b56e6b994: Download complete\n530afca65e2e: Pull complete\nd450d4da0343: Pull complete\n8162171ecb65: Pull complete\nff63b82a42d3: Verifying Checksum\nff63b82a42d3: Download complete\nff63b82a42d3: Pull complete\n5b4b56e6b994: Pull complete\nDigest: sha256:99ddec1bbfd6d6bca3f9804c02363daee8c8524dae50df7942e8e60788fd17c9\nStatus: Downloaded newer image for golang:1.17-alpine\n ---> 270c4f58750f\nStep 3/19 : RUN apk add git musl-dev\n ---> Running in 63434dd6ab41\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/community/x86_64/APKINDEX.tar.gz\n(1/8) Upgrading musl (1.2.3-r0 -> 1.2.3-r2)\n(2/8) Installing brotli-libs (1.0.9-r6)\n(3/8) Installing nghttp2-libs (1.47.0-r0)\n(4/8) Installing libcurl (7.83.1-r5)\n(5/8) Installing expat (2.5.0-r0)\n(6/8) Installing pcre2 (10.40-r0)\n(7/8) Installing git (2.36.3-r0)\n(8/8) Installing musl-dev (1.2.3-r2)\nExecuting busybox-1.35.0-r15.trigger\nOK: 29 MiB in 22 packages\nRemoving intermediate container 63434dd6ab41\n ---> 86be0b1b8f78\nStep 4/19 : ADD . /go/src/github.com/dutchcoders/transfer.sh\n ---> 98282381c887\nStep 5/19 : WORKDIR /go/src/github.com/dutchcoders/transfer.sh\n ---> Running in 57da6afbef38\nRemoving intermediate container 57da6afbef38\n ---> b57e43b39413\nStep 6/19 : ENV GO111MODULE=on\n ---> Running in b77be2e0511d\nRemoving intermediate container b77be2e0511d\n ---> 7374f815b24c\nStep 7/19 : RUN CGO_ENABLED=0 go build -tags netgo -ldflags \"-X github.com/dutchcoders/transfer.sh/cmd.Version=$(git describe --tags) -a -s -w -extldflags '-static'\" -o /go/bin/transfersh\n ---> Running in 0a443ea6fa6d\n\u001b[91mfatal: No names found, cannot describe anything.\n\u001b[0m\u001b[91mgo: downloading google.golang.org/api v0.40.0\ngo: downloading github.com/urfave/cli v1.22.5\ngo: downloading github.com/fatih/color v1.10.0\n\u001b[0m\u001b[91mgo: downloading github.com/aws/aws-sdk-go v1.37.14\n\u001b[0m\u001b[91mgo: downloading storj.io/uplink v1.8.2\n\u001b[0m\u001b[91mgo: downloading storj.io/common v0.0.0-20220405183405-ffdc3ab808c6\n\u001b[0m\u001b[91mgo: downloading golang.org/x/oauth2 v0.0.0-20210218202405-ba52d332ba99\n\u001b[0m\u001b[91mgo: downloading github.com/PuerkitoBio/ghost v0.0.0-20160324114900-206e6e460e14\n\u001b[0m\u001b[91mgo: downloading github.com/VojtechVitek/ratelimit v0.0.0-20160722140851-dc172bc0f6d2\n\u001b[0m\u001b[91mgo: downloading github.com/dutchcoders/go-clamd v0.0.0-20170520113014-b970184f4d9e\n\u001b[0m\u001b[91mgo: downloading github.com/dutchcoders/go-virustotal v0.0.0-20140923143438-24cc8e6fa329\n\u001b[0m\u001b[91mgo: downloading github.com/dutchcoders/transfer.sh-web v0.0.0-20220824020025-7240e75c3bb8\n\u001b[0m\u001b[91mgo: downloading github.com/golang/gddo v0.0.0-20210115222349-20d68f94ee1f\ngo: downloading github.com/microcosm-cc/bluemonday v1.0.16\n\u001b[0m\u001b[91mgo: downloading github.com/gorilla/handlers v1.5.1\ngo: downloading github.com/gorilla/mux v1.8.0\n\u001b[0m\u001b[91mgo: downloading github.com/elazarl/go-bindata-assetfs v1.0.1\n\u001b[0m\u001b[91mgo: downloading github.com/russross/blackfriday/v2 v2.1.0\n\u001b[0m\u001b[91mgo: downloading github.com/skip2/go-qrcode v0.0.0-20200617195104-da1b6568686e\n\u001b[0m\u001b[91mgo: downloading github.com/tomasen/realip v0.0.0-20180522021738-f0c99a92ddce\n\u001b[0m\u001b[91mgo: downloading golang.org/x/crypto v0.0.0-20220131195533-30dcbda58838\n\u001b[0m\u001b[91mgo: downloading golang.org/x/net v0.0.0-20220513224357-95641704303c\n\u001b[0m\u001b[91mgo: downloading github.com/mattn/go-colorable v0.1.8\n\u001b[0m\u001b[91mgo: downloading github.com/mattn/go-isatty v0.0.12\n\u001b[0m\u001b[91mgo: downloading github.com/felixge/httpsnoop v1.0.1\n\u001b[0m\u001b[91mgo: downloading golang.org/x/sys v0.0.0-20220128215802-99c3d69c2c27\n\u001b[0m\u001b[91mgo: downloading github.com/russross/blackfriday v1.5.2\n\u001b[0m\u001b[91mgo: downloading github.com/cpuguy83/go-md2man/v2 v2.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/aymerick/douceur v0.2.0\n\u001b[0m\u001b[91mgo: downloading github.com/gorilla/css v1.0.0\n\u001b[0m\u001b[91mgo: downloading cloud.google.com/go v0.77.0\n\u001b[0m\u001b[91mgo: downloading github.com/nu7hatch/gouuid v0.0.0-20131221200532-179d4d0c4d8d\n\u001b[0m\u001b[91mgo: downloading github.com/garyburd/redigo v1.6.2\n\u001b[0m\u001b[91mgo: downloading github.com/gorilla/securecookie v1.1.1\n\u001b[0m\u001b[91mgo: downloading github.com/spacemonkeygo/monkit/v3 v3.0.17\ngo: downloading golang.org/x/sync v0.0.0-20210220032951-036812b2e83c\ngo: downloading github.com/zeebo/errs v1.3.0\n\u001b[0m\u001b[91mgo: downloading github.com/vivint/infectious v0.0.0-20200605153912-25a574ae18a3\n\u001b[0m\u001b[91mgo: downloading storj.io/drpc v0.0.30\n\u001b[0m\u001b[91mgo: downloading github.com/gogo/protobuf v1.3.2\n\u001b[0m\u001b[91mgo: downloading github.com/calebcase/tmpfile v1.0.3\n\u001b[0m\u001b[91mgo: downloading golang.org/x/text v0.3.7\n\u001b[0m\u001b[91mgo: downloading google.golang.org/grpc v1.35.0\n\u001b[0m\u001b[91mgo: downloading go.opencensus.io v0.22.6\ngo: downloading github.com/googleapis/gax-go/v2 v2.0.5\n\u001b[0m\u001b[91mgo: downloading github.com/googleapis/gax-go v2.0.0+incompatible\n\u001b[0m\u001b[91mgo: downloading github.com/golang/groupcache v0.0.0-20200121045136-8c9f03a8e57e\n\u001b[0m\u001b[91mgo: downloading github.com/golang/protobuf v1.5.2\ngo: downloading google.golang.org/genproto v0.0.0-20210218151259-fe80b386bf06\n\u001b[0m\u001b[91mgo: downloading google.golang.org/protobuf v1.27.1\n\u001b[0m\u001b[91mgo: downloading github.com/jmespath/go-jmespath v0.4.0\n\u001b[0mRemoving intermediate container 0a443ea6fa6d\n ---> 1dabd42f8960\nStep 8/19 : ARG PUID=5000     PGID=5000     RUNAS\n ---> Running in e4eaff834eea\nRemoving intermediate container e4eaff834eea\n ---> 181112c2c6a1\nStep 9/19 : RUN mkdir -p /tmp/useradd /tmp/empty &&     if [ ! -z \"$RUNAS\" ]; then     echo \"${RUNAS}:x:${PUID}:${PGID}::/nonexistent:/sbin/nologin\" >> /tmp/useradd/passwd &&     echo \"${RUNAS}:!:::::::\" >> /tmp/useradd/shadow &&     echo \"${RUNAS}:x:${PGID}:\" >> /tmp/useradd/group &&     echo \"${RUNAS}:!::\" >> /tmp/useradd/groupshadow; else touch /tmp/useradd/unused; fi\n ---> Running in c113f229074a\nRemoving intermediate container c113f229074a\n ---> 36a398d59331\nStep 10/19 : FROM scratch AS final\n ---> \nStep 11/19 : LABEL maintainer=\"Andrea Spacca <andrea.spacca@gmail.com>\"\n ---> Running in 373dd83a4575\nRemoving intermediate container 373dd83a4575\n ---> 86aac4747a20\nStep 12/19 : ARG RUNAS\n ---> Running in f21fd1e99cb7\nRemoving intermediate container f21fd1e99cb7\n ---> d8fa0609c424\nStep 13/19 : COPY --from=build /tmp/empty /tmp\n ---> ddd1eb2536e1\nStep 14/19 : COPY --from=build /tmp/useradd/* /etc/\n ---> 9f8f95731c66\nStep 15/19 : COPY --from=build --chown=${RUNAS}  /go/bin/transfersh /go/bin/transfersh\n ---> e3299f6693fc\nStep 16/19 : COPY --from=build /etc/ssl/certs/ca-certificates.crt /etc/ssl/certs/ca-certificates.crt\n ---> aca343093794\nStep 17/19 : USER ${RUNAS}\n ---> Running in c2489c33fbce\nRemoving intermediate container c2489c33fbce\n ---> 813021f2cd7a\nStep 18/19 : ENTRYPOINT [\"/go/bin/transfersh\", \"--listener\", \":8080\"]\n ---> Running in 8c5e7a3fa2e0\nRemoving intermediate container 8c5e7a3fa2e0\n ---> ab85321391ab\nStep 19/19 : EXPOSE 8080\n ---> Running in d910981a3693\nRemoving intermediate container d910981a3693\n ---> ef18b2e6e2e2\nSuccessfully built ef18b2e6e2e2\nSuccessfully tagged transfer.sh:latest\n","stderr":"","imageSize":23468503},"repair":{"violations":[{"name":"apkAddUseNoCache","position":{"start":5,"end":5,"columnStart":4,"columnEnd":24}}],"repairedDockerfile":"# Default to Go 1.17\nARG GO_VERSION=1.17\nFROM golang:${GO_VERSION}-alpine as build\n\n# Necessary to run 'go get' and to compile the linked binary\nRUN apk add --no-cache git musl-dev\n\nADD . /go/src/github.com/dutchcoders/transfer.sh\n\nWORKDIR /go/src/github.com/dutchcoders/transfer.sh\n\nENV GO111MODULE=on\n\n# build & install server\nRUN CGO_ENABLED=0 go build -tags netgo -ldflags \"-X github.com/dutchcoders/transfer.sh/cmd.Version=$(git describe --tags) -a -s -w -extldflags '-static'\" -o /go/bin/transfersh\n\nARG PUID=5000 \\\n    PGID=5000 \\\n    RUNAS\n\nRUN mkdir -p /tmp/useradd /tmp/empty && \\\n    if [ ! -z \"$RUNAS\" ]; then \\\n    echo \"${RUNAS}:x:${PUID}:${PGID}::/nonexistent:/sbin/nologin\" >> /tmp/useradd/passwd && \\\n    echo \"${RUNAS}:!:::::::\" >> /tmp/useradd/shadow && \\\n    echo \"${RUNAS}:x:${PGID}:\" >> /tmp/useradd/group && \\\n    echo \"${RUNAS}:!::\" >> /tmp/useradd/groupshadow; else touch /tmp/useradd/unused; fi\n\nFROM scratch AS final\nLABEL maintainer=\"Andrea Spacca <andrea.spacca@gmail.com>\"\nARG RUNAS\n\nCOPY --from=build /tmp/empty /tmp\nCOPY --from=build /tmp/useradd/* /etc/\nCOPY --from=build --chown=${RUNAS}  /go/bin/transfersh /go/bin/transfersh\nCOPY --from=build /etc/ssl/certs/ca-certificates.crt /etc/ssl/certs/ca-certificates.crt\n\nUSER ${RUNAS}\n\nENTRYPOINT [\"/go/bin/transfersh\", \"--listener\", \":8080\"]\n\nEXPOSE 8080\n"},"repairedBuild":{"startTimestamp":1672426617968,"endTimestamp":1672426669022,"error":null,"stdout":"Sending build context to Docker daemon    470kB\r\r\nStep 1/19 : ARG GO_VERSION=1.17\nStep 2/19 : FROM golang:${GO_VERSION}-alpine as build\n ---> 270c4f58750f\nStep 3/19 : RUN apk add --no-cache git musl-dev\n ---> Running in 95d0ca64060c\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/community/x86_64/APKINDEX.tar.gz\n(1/8) Upgrading musl (1.2.3-r0 -> 1.2.3-r2)\n(2/8) Installing brotli-libs (1.0.9-r6)\n(3/8) Installing nghttp2-libs (1.47.0-r0)\n(4/8) Installing libcurl (7.83.1-r5)\n(5/8) Installing expat (2.5.0-r0)\n(6/8) Installing pcre2 (10.40-r0)\n(7/8) Installing git (2.36.3-r0)\n(8/8) Installing musl-dev (1.2.3-r2)\nExecuting busybox-1.35.0-r15.trigger\nOK: 29 MiB in 22 packages\nRemoving intermediate container 95d0ca64060c\n ---> 566237a25426\nStep 4/19 : ADD . /go/src/github.com/dutchcoders/transfer.sh\n ---> dee60418a459\nStep 5/19 : WORKDIR /go/src/github.com/dutchcoders/transfer.sh\n ---> Running in 1ec33a25b86a\nRemoving intermediate container 1ec33a25b86a\n ---> cb9ef41a0106\nStep 6/19 : ENV GO111MODULE=on\n ---> Running in a24ebbcd26b5\nRemoving intermediate container a24ebbcd26b5\n ---> d94dd75095b4\nStep 7/19 : RUN CGO_ENABLED=0 go build -tags netgo -ldflags \"-X github.com/dutchcoders/transfer.sh/cmd.Version=$(git describe --tags) -a -s -w -extldflags '-static'\" -o /go/bin/transfersh\n ---> Running in 7119749620fb\n\u001b[91mfatal: No names found, cannot describe anything.\n\u001b[0m\u001b[91mgo: downloading github.com/fatih/color v1.10.0\n\u001b[0m\u001b[91mgo: downloading google.golang.org/api v0.40.0\n\u001b[0m\u001b[91mgo: downloading github.com/urfave/cli v1.22.5\n\u001b[0m\u001b[91mgo: downloading github.com/aws/aws-sdk-go v1.37.14\n\u001b[0m\u001b[91mgo: downloading storj.io/uplink v1.8.2\n\u001b[0m\u001b[91mgo: downloading storj.io/common v0.0.0-20220405183405-ffdc3ab808c6\n\u001b[0m\u001b[91mgo: downloading golang.org/x/oauth2 v0.0.0-20210218202405-ba52d332ba99\n\u001b[0m\u001b[91mgo: downloading github.com/PuerkitoBio/ghost v0.0.0-20160324114900-206e6e460e14\n\u001b[0m\u001b[91mgo: downloading github.com/VojtechVitek/ratelimit v0.0.0-20160722140851-dc172bc0f6d2\n\u001b[0m\u001b[91mgo: downloading github.com/dutchcoders/go-clamd v0.0.0-20170520113014-b970184f4d9e\n\u001b[0m\u001b[91mgo: downloading github.com/dutchcoders/go-virustotal v0.0.0-20140923143438-24cc8e6fa329\n\u001b[0m\u001b[91mgo: downloading github.com/dutchcoders/transfer.sh-web v0.0.0-20220824020025-7240e75c3bb8\ngo: downloading github.com/elazarl/go-bindata-assetfs v1.0.1\n\u001b[0m\u001b[91mgo: downloading github.com/golang/gddo v0.0.0-20210115222349-20d68f94ee1f\n\u001b[0m\u001b[91mgo: downloading github.com/gorilla/mux v1.8.0\n\u001b[0m\u001b[91mgo: downloading github.com/gorilla/handlers v1.5.1\n\u001b[0m\u001b[91mgo: downloading github.com/microcosm-cc/bluemonday v1.0.16\n\u001b[0m\u001b[91mgo: downloading github.com/russross/blackfriday/v2 v2.1.0\n\u001b[0m\u001b[91mgo: downloading github.com/skip2/go-qrcode v0.0.0-20200617195104-da1b6568686e\n\u001b[0m\u001b[91mgo: downloading github.com/tomasen/realip v0.0.0-20180522021738-f0c99a92ddce\n\u001b[0m\u001b[91mgo: downloading golang.org/x/crypto v0.0.0-20220131195533-30dcbda58838\n\u001b[0m\u001b[91mgo: downloading golang.org/x/net v0.0.0-20220513224357-95641704303c\n\u001b[0m\u001b[91mgo: downloading github.com/mattn/go-colorable v0.1.8\n\u001b[0m\u001b[91mgo: downloading github.com/mattn/go-isatty v0.0.12\n\u001b[0m\u001b[91mgo: downloading github.com/felixge/httpsnoop v1.0.1\n\u001b[0m\u001b[91mgo: downloading golang.org/x/sys v0.0.0-20220128215802-99c3d69c2c27\n\u001b[0m\u001b[91mgo: downloading github.com/cpuguy83/go-md2man/v2 v2.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/nu7hatch/gouuid v0.0.0-20131221200532-179d4d0c4d8d\n\u001b[0m\u001b[91mgo: downloading github.com/gorilla/securecookie v1.1.1\n\u001b[0m\u001b[91mgo: downloading github.com/garyburd/redigo v1.6.2\n\u001b[0m\u001b[91mgo: downloading github.com/russross/blackfriday v1.5.2\n\u001b[0m\u001b[91mgo: downloading github.com/aymerick/douceur v0.2.0\n\u001b[0m\u001b[91mgo: downloading cloud.google.com/go v0.77.0\n\u001b[0m\u001b[91mgo: downloading github.com/spacemonkeygo/monkit/v3 v3.0.17\ngo: downloading github.com/zeebo/errs v1.3.0\ngo: downloading golang.org/x/sync v0.0.0-20210220032951-036812b2e83c\n\u001b[0m\u001b[91mgo: downloading github.com/gorilla/css v1.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/vivint/infectious v0.0.0-20200605153912-25a574ae18a3\n\u001b[0m\u001b[91mgo: downloading storj.io/drpc v0.0.30\n\u001b[0m\u001b[91mgo: downloading github.com/gogo/protobuf v1.3.2\n\u001b[0m\u001b[91mgo: downloading github.com/calebcase/tmpfile v1.0.3\n\u001b[0m\u001b[91mgo: downloading golang.org/x/text v0.3.7\n\u001b[0m\u001b[91mgo: downloading google.golang.org/grpc v1.35.0\n\u001b[0m\u001b[91mgo: downloading go.opencensus.io v0.22.6\n\u001b[0m\u001b[91mgo: downloading github.com/googleapis/gax-go/v2 v2.0.5\n\u001b[0m\u001b[91mgo: downloading github.com/googleapis/gax-go v2.0.0+incompatible\n\u001b[0m\u001b[91mgo: downloading github.com/golang/groupcache v0.0.0-20200121045136-8c9f03a8e57e\n\u001b[0m\u001b[91mgo: downloading google.golang.org/genproto v0.0.0-20210218151259-fe80b386bf06\n\u001b[0m\u001b[91mgo: downloading github.com/golang/protobuf v1.5.2\n\u001b[0m\u001b[91mgo: downloading google.golang.org/protobuf v1.27.1\n\u001b[0m\u001b[91mgo: downloading github.com/jmespath/go-jmespath v0.4.0\n\u001b[0mRemoving intermediate container 7119749620fb\n ---> ae8deef0e65c\nStep 8/19 : ARG PUID=5000     PGID=5000     RUNAS\n ---> Running in 6efc975e7b9f\nRemoving intermediate container 6efc975e7b9f\n ---> f5fac34713bf\nStep 9/19 : RUN mkdir -p /tmp/useradd /tmp/empty &&     if [ ! -z \"$RUNAS\" ]; then     echo \"${RUNAS}:x:${PUID}:${PGID}::/nonexistent:/sbin/nologin\" >> /tmp/useradd/passwd &&     echo \"${RUNAS}:!:::::::\" >> /tmp/useradd/shadow &&     echo \"${RUNAS}:x:${PGID}:\" >> /tmp/useradd/group &&     echo \"${RUNAS}:!::\" >> /tmp/useradd/groupshadow; else touch /tmp/useradd/unused; fi\n ---> Running in 08bc587b4c49\nRemoving intermediate container 08bc587b4c49\n ---> 102e04766667\nStep 10/19 : FROM scratch AS final\n ---> \nStep 11/19 : LABEL maintainer=\"Andrea Spacca <andrea.spacca@gmail.com>\"\n ---> Running in 508d3651c077\nRemoving intermediate container 508d3651c077\n ---> 5b457afdf887\nStep 12/19 : ARG RUNAS\n ---> Running in 667a7277d6f0\nRemoving intermediate container 667a7277d6f0\n ---> 79c056a3e85a\nStep 13/19 : COPY --from=build /tmp/empty /tmp\n ---> f167c74f0672\nStep 14/19 : COPY --from=build /tmp/useradd/* /etc/\n ---> ff8c932599fb\nStep 15/19 : COPY --from=build --chown=${RUNAS}  /go/bin/transfersh /go/bin/transfersh\n ---> 06243173897d\nStep 16/19 : COPY --from=build /etc/ssl/certs/ca-certificates.crt /etc/ssl/certs/ca-certificates.crt\n ---> 9c4221e21317\nStep 17/19 : USER ${RUNAS}\n ---> Running in 1ed1e5d7b995\nRemoving intermediate container 1ed1e5d7b995\n ---> 72d6f9a4f600\nStep 18/19 : ENTRYPOINT [\"/go/bin/transfersh\", \"--listener\", \":8080\"]\n ---> Running in ca4fd7b8a117\nRemoving intermediate container ca4fd7b8a117\n ---> 27f9da0ac825\nStep 19/19 : EXPOSE 8080\n ---> Running in 376ad4cbd861\nRemoving intermediate container 376ad4cbd861\n ---> f30145b930d4\nSuccessfully built f30145b930d4\nSuccessfully tagged transfer.sh:latest\n","stderr":"","imageSize":23468503},"endTime":1672426669507}