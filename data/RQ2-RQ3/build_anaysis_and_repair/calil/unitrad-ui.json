{"repository":"https://github.com/calil/unitrad-ui","dockerfilePath":"Dockerfile","startTime":1672504631848,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/calil/unitrad-ui'...\n","error":null,"commit":"22354558144f77f2bd4fdb6bf747247a370eb2bf"},"originalBuild":{"startTimestamp":1672504632749,"endTimestamp":1672504856903,"error":{"code":1,"killed":false,"signal":null,"cmd":"docker build --no-cache --force-rm -t unitrad-ui:latest -f /tmp/dinghy-analysis/calil/unitrad-ui/Dockerfile ."},"stdout":"Sending build context to Docker daemon  2.162MB\r\r\nStep 1/7 : FROM node:14\n14: Pulling from library/node\nc7c50787e2da: Pulling fs layer\naff359114acb: Pulling fs layer\n821dc261e045: Pulling fs layer\n3790459d63d5: Pulling fs layer\nc09b016fff62: Pulling fs layer\n5348855a40c0: Pulling fs layer\n06a6920a92b8: Pulling fs layer\n56023b82801b: Pulling fs layer\ne7b01bcb8f88: Pulling fs layer\n3790459d63d5: Waiting\n5348855a40c0: Waiting\n06a6920a92b8: Waiting\n56023b82801b: Waiting\ne7b01bcb8f88: Waiting\naff359114acb: Verifying Checksum\naff359114acb: Download complete\n821dc261e045: Verifying Checksum\n821dc261e045: Download complete\nc7c50787e2da: Verifying Checksum\nc7c50787e2da: Download complete\n5348855a40c0: Download complete\n3790459d63d5: Verifying Checksum\n3790459d63d5: Download complete\n56023b82801b: Verifying Checksum\n56023b82801b: Download complete\ne7b01bcb8f88: Verifying Checksum\ne7b01bcb8f88: Download complete\n06a6920a92b8: Verifying Checksum\n06a6920a92b8: Download complete\nc09b016fff62: Verifying Checksum\nc09b016fff62: Download complete\nc7c50787e2da: Pull complete\naff359114acb: Pull complete\n821dc261e045: Pull complete\n3790459d63d5: Pull complete\nc09b016fff62: Pull complete\n5348855a40c0: Pull complete\n06a6920a92b8: Pull complete\n56023b82801b: Pull complete\ne7b01bcb8f88: Pull complete\nDigest: sha256:b6ab85c15f1c372bca3bde8585fbf5739b679aa9119f46e7d2bd41c1dcc05959\nStatus: Downloaded newer image for node:14\n ---> 0f2c7f307e4d\nStep 2/7 : RUN npm install\n ---> Running in 8c8b36de8973\n\u001b[91mnpm WARN saveError\u001b[0m\u001b[91m ENOENT: no such file or directory, open '/package.json'\n\u001b[0m\u001b[91mnpm\u001b[0m\u001b[91m \u001b[0m\u001b[91mnotice\u001b[0m\u001b[91m created a lockfile as package-lock.json. You should commit this file.\n\u001b[0m\u001b[91mnpm WARN enoent ENOENT: no such file or directory, open '/package.json'\n\u001b[0m\u001b[91mnpm WARN !invalid#2 No description\n\u001b[0m\u001b[91mnpm WARN !invalid#2 No repository field.\n\u001b[0m\u001b[91mnpm WARN !invalid#2 No README data\n\u001b[0m\u001b[91mnpm WARN !invalid#2 No license field.\n\u001b[0m\u001b[91m\n\u001b[0mup to date in 0.326s\nfound 0 vulnerabilities\n\nRemoving intermediate container 8c8b36de8973\n ---> 5650b1e0e6f7\nStep 3/7 : COPY ./ /js/\n ---> ed8b6bc5cf2d\nStep 4/7 : WORKDIR /js/\n ---> Running in 4dada2e38a10\nRemoving intermediate container 4dada2e38a10\n ---> b72cf22a59c2\nStep 5/7 : RUN yarn install\n ---> Running in b54129ae1886\nyarn install v1.22.19\ninfo No lockfile found.\n$ npx npm-force-resolutions\n\u001b[91mnpx: installed 6 in 3.066s\n\u001b[0m\u001b[91mwarning package-lock.json found. Your project contains lock files generated by tools other than Yarn. It is advised not to mix package managers in order to avoid resolution inconsistencies caused by unsynchronized lock files. To clear this warning, remove package-lock.json.\n\u001b[0m[1/4] Resolving packages...\n\u001b[91mwarning superagent@6.1.0: Please upgrade to v7.0.2+ of superagent.  We have fixed numerous issues with streams, form-data, attach(), filesystem errors not bubbling up (ENOENT on attach()), and all tests are now passing.  See the releases tab for more information at <https://github.com/visionmedia/superagent/releases>.\n\u001b[0m\u001b[91mwarning superagent > formidable@1.2.6: Please upgrade to latest, formidable@v2 or formidable@v3! Check these notes: https://bit.ly/2ZEqIau\n\u001b[0m\u001b[91mwarning babel-eslint@10.1.0: babel-eslint is now @babel/eslint-parser. This package will no longer receive updates.\n\u001b[0m\u001b[91mwarning browserify > url > querystring@0.2.0: The querystring API is considered Legacy. new code should use the URLSearchParams API instead.\n\u001b[0m\u001b[91mwarning cssnano > cssnano-preset-default > postcss-svgo > svgo@1.3.2: This SVGO version is no longer supported. Upgrade to v2.x.x.\n\u001b[0m\u001b[91mwarning cssnano > cssnano-preset-default > postcss-svgo > svgo > stable@0.1.8: Modern JS already guarantees Array#sort() is a stable sort, so this library is deprecated. See the compatibility table on MDN: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/sort#browser_compatibility\n\u001b[0m\u001b[91mwarning gulp > glob-watcher > chokidar@2.1.8: Chokidar 2 does not receive security updates since 2019. Upgrade to chokidar 3 with 15x fewer dependencies\n\u001b[0m\u001b[91mwarning gulp > glob-watcher > chokidar > fsevents@1.2.13: fsevents 1 will break on node v14+ and could be using insecure binaries. Upgrade to fsevents 2.\n\u001b[0m\u001b[91mwarning gulp > gulp-cli > matchdep > micromatch > snapdragon > source-map-resolve@0.5.3: See https://github.com/lydell/source-map-resolve#deprecated\n\u001b[0m\u001b[91mwarning gulp > gulp-cli > matchdep > micromatch > snapdragon > source-map-resolve > resolve-url@0.2.1: https://github.com/lydell/resolve-url#deprecated\n\u001b[0m\u001b[91mwarning gulp > gulp-cli > matchdep > micromatch > snapdragon > source-map-resolve > source-map-url@0.4.1: See https://github.com/lydell/source-map-url#deprecated\n\u001b[0m\u001b[91mwarning gulp > gulp-cli > matchdep > micromatch > snapdragon > source-map-resolve > urix@0.1.0: Please see https://github.com/lydell/urix#deprecated\n\u001b[0m\u001b[91mwarning gulp-mocha > mocha > debug@3.2.6: Debug versions >=3.2.0 <3.2.7 || >=4 <4.3.1 have a low-severity ReDos regression when used in a Node.js environment. It is recommended you upgrade to 3.2.7 or 4.3.1. (https://github.com/visionmedia/debug/issues/797)\nwarning gulp-mocha > mocha > mkdirp@0.5.4: Legacy versions of mkdirp are no longer supported. Please update to mkdirp 1.x. (Note that the API surface has changed to use Promises in 1.x.)\n\u001b[0m\u001b[91mwarning gulp-sass > node-sass > request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142\nwarning gulp-sass > node-sass > node-gyp > request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142\n\u001b[0m\u001b[91mwarning gulp-sass > node-sass > node-gyp > tar@2.2.2: This version of tar is no longer supported, and will not receive security updates. Please upgrade asap.\n\u001b[0m\u001b[91mwarning gulp-sass > node-sass > request > har-validator@5.1.5: this library is no longer supported\n\u001b[0m\u001b[91mwarning gulp-sass > node-sass > request > uuid@3.4.0: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.\n\u001b[0m\u001b[91mwarning gulp-sourcemaps > css > source-map-resolve@0.5.3: See https://github.com/lydell/source-map-resolve#deprecated\nwarning gulp-sourcemaps > css > urix@0.1.0: Please see https://github.com/lydell/urix#deprecated\n\u001b[0m[2/4] Fetching packages...\n[3/4] Linking dependencies...\n\u001b[91mwarning \" > react-paginate@6.5.0\" has incorrect peer dependency \"react@^16.0.0\".\n\u001b[0m[4/4] Building fresh packages...\nsuccess Saved lockfile.\nDone in 95.31s.\nRemoving intermediate container b54129ae1886\n ---> f05d7a7921da\nStep 6/7 : RUN npm test\n ---> Running in eac30acbd14f\n\n> unitrad-ui@1.8.0 test /js\n> mocha --require @babel/register\n\n\n\n  Support Functions\n    #normalizeQuery\n      ✓ 空オブジェクトを渡す\n      ✓ タイトルを指定\n    #isEmptyQuery\n      ✓ 空オブジェクトを渡す\n      ✓ フリーテキストを指定\n      ✓ タイトルを指定\n      ✓ 著者名を指定する\n      ✓ 出版者を指定する\n      ✓ ISBNを指定する\n      ✓ NDCを指定する\n      ✓ 開始年を指定する\n      ✓ 終了年を指定する\n      ✓ リージョンのみ指定する\n    #isEqualQuery\n      ✓ undefined==空\n      ✓ undefined!=タイトル\n      ✓ 空==空\n      ✓ タイトル!=空\n      ✓ タイトル==タイトル\n      ✓ 空!=タイトル\n      ✓ タイトル!=タイトル+NDC\n    #stripQuery\n      ✓ 空オブジェクトを渡す\n      ✓ タイトルのみ\n\n  API\n    #Initialize\n      ✓ APIの初期化\n\n  出版年の処理\n    # normalizePubYear\n      ✓ 2000{Number}\n      ✓ 200001{Number}\n      ✓ 20000101{Number}\n      ✓ 2000{String}\n      ✓ 200001{String}\n      ✓ 20000101{String}\n      ✓ [195-]\n      ✓ 〔195-〕\n      ✓ [201-]\n      ✓ 2016.2.4\n      ✓ 2016.2-2017.4\n      ✓ 昭和57年2月\n      ✓ 昭和元年\n      ✓ [20--]\n      ✓ 空白文字\n      ✓ Null\n      ✓ Windows\n\n\n  39 passing (26ms)\n\n\u001b[91m/js/node_modules/mocha/lib/runner.js:962\n    throw err;\n    ^\n\nTypeError: this.callback is not a function\n    at api.receive (/js/src/js/api.js:113:12)\n    at fn (/js/src/js/api.js:57:16)\n    at Request.callback (/js/node_modules/superagent/src/node/index.js:890:12)\n    at fn (/js/node_modules/superagent/src/node/index.js:1130:18)\n    at IncomingMessage.<anonymous> (/js/node_modules/superagent/src/node/parsers/json.js:19:7)\n    at IncomingMessage.emit (events.js:412:35)\n    at endReadableNT (internal/streams/readable.js:1333:12)\n    at processTicksAndRejections (internal/process/task_queues.js:82:21)\n\u001b[0m\u001b[91mnpm\u001b[0m\u001b[91m \u001b[0m\u001b[91mERR!\u001b[0m\u001b[91m Test failed.  See above for more details.\n\u001b[0mRemoving intermediate container eac30acbd14f\n","stderr":"The command '/bin/sh -c npm test' returned a non-zero code: 1\n"},"endTime":1672504856978}