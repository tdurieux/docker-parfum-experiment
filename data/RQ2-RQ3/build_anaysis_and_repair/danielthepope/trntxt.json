{"repository":"https://github.com/danielthepope/trntxt","dockerfilePath":"Dockerfile","startTime":1672654117453,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/danielthepope/trntxt'...\n","error":null,"commit":"193cebcc22ffb206091c3e2343ec701f9a0e2845"},"originalBuild":{"startTimestamp":1672654118421,"endTimestamp":1672654169396,"error":null,"stdout":"Sending build context to Docker daemon  1.068MB\r\r\nStep 1/13 : FROM node:16-alpine\n ---> 610c0494e820\nStep 2/13 : RUN apk update\n ---> Running in 7bdda5dbebd7\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\nv3.17.0-313-gaf42d45cd5 [https://dl-cdn.alpinelinux.org/alpine/v3.17/main]\nv3.17.0-312-gf3974f8f5f [https://dl-cdn.alpinelinux.org/alpine/v3.17/community]\nOK: 17813 distinct packages available\nRemoving intermediate container 7bdda5dbebd7\n ---> 2fa12b8fc4a3\nStep 3/13 : RUN apk add graphicsmagick-dev\n ---> Running in 4bbd52de1d85\n(1/22) Installing libbz2 (1.0.8-r4)\n(2/22) Installing brotli-libs (1.0.9-r9)\n(3/22) Installing libpng (1.6.38-r0)\n(4/22) Installing freetype (2.12.1-r0)\n(5/22) Installing aom-libs (3.5.0-r0)\n(6/22) Installing libde265 (1.0.9-r0)\n(7/22) Installing numactl (2.0.16-r0)\n(8/22) Installing x265-libs (3.5-r3)\n(9/22) Installing libheif (1.13.0-r0)\n(10/22) Installing libjpeg-turbo (2.1.4-r0)\n(11/22) Installing libltdl (2.4.7-r0)\n(12/22) Installing xz-libs (5.2.9-r0)\n(13/22) Installing libwebp (1.2.4-r1)\n(14/22) Installing zstd-libs (1.5.2-r9)\n(15/22) Installing tiff (4.4.0-r1)\n(16/22) Installing ghostscript-fonts (8.11-r3)\n(17/22) Installing libexpat (2.5.0-r0)\n(18/22) Installing libwmf (0.2.12-r1)\n(19/22) Installing libxml2 (2.10.3-r1)\n(20/22) Installing graphicsmagick (1.3.38-r0)\n(21/22) Installing pkgconf (1.9.3-r0)\n(22/22) Installing graphicsmagick-dev (1.3.38-r0)\nExecuting busybox-1.35.0-r29.trigger\nOK: 57 MiB in 39 packages\nRemoving intermediate container 4bbd52de1d85\n ---> 8e47c8d371b3\nStep 4/13 : WORKDIR /usr/src/app\n ---> Running in bb88e064ec39\nRemoving intermediate container bb88e064ec39\n ---> 375e22ff9ed6\nStep 5/13 : COPY package*.json ./\n ---> b2852cd49bdf\nStep 6/13 : COPY config ./config\n ---> e67062b37aab\nStep 7/13 : COPY gulpfile.js ./\n ---> e6927a58553d\nStep 8/13 : RUN npm install\n ---> Running in dc41574e1a2b\n\u001b[91mnpm WARN deprecated urix@0.1.0: Please see https://github.com/lydell/urix#deprecated\n\u001b[0m\u001b[91mnpm WARN\u001b[0m\u001b[91m deprecated source-map-url@0.4.1: See https://github.com/lydell/source-map-url#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated source-map-resolve@0.5.3: See https://github.com/lydell/source-map-resolve#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated resolve-url@0.2.1: https://github.com/lydell/resolve-url#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated request-promise-native@1.0.9: request-promise-native has been deprecated because it extends the now deprecated request package, see https://github.com/request/request/issues/3142\n\u001b[0m\u001b[91mnpm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142\n\u001b[0m\u001b[91mnpm WARN deprecated left-pad@1.3.0: use String.prototype.padStart()\n\u001b[0m\u001b[91mnpm WARN deprecated har-validator@5.1.5: this library is no longer supported\n\u001b[0m\u001b[91mnpm WARN deprecated gulp-util@3.0.8: gulp-util is deprecated - replace it, following the guidelines at https://medium.com/gulpjs/gulp-util-ca3b1f9f9ac5\n\u001b[0m\u001b[91mnpm WARN deprecated formidable@1.2.6: Please upgrade to latest, formidable@v2 or formidable@v3! Check these notes: https://bit.ly/2ZEqIau\n\u001b[0m\u001b[91mnpm WARN deprecated chokidar@2.1.8: Chokidar 2 does not receive security updates since 2019. Upgrade to chokidar 3 with 15x fewer dependencies\n\u001b[0m\u001b[91mnpm WARN deprecated uuid@3.4.0: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.\n\u001b[0m\u001b[91mnpm WARN deprecated source-map-resolve@0.6.0: See https://github.com/lydell/source-map-resolve#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated core-js@2.6.12: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.\n\u001b[0m\n> trntxt@3.1.0 postinstall\n> gulp copy\n\nCannot read file '/usr/src/app/tsconfig.json'.\n[10:08:59] Using gulpfile /usr/src/app/gulpfile.js\n[10:08:59] Starting 'copy'...\n[10:08:59] Finished 'copy' after 3.13 ms\n\nadded 821 packages, and audited 822 packages in 10s\n\n44 packages are looking for funding\n  run `npm fund` for details\n\n16 vulnerabilities (3 moderate, 10 high, 3 critical)\n\nTo address issues that do not require attention, run:\n  npm audit fix\n\nTo address all issues possible (including breaking changes), run:\n  npm audit fix --force\n\nSome issues need review, and may require choosing\na different dependency.\n\nRun `npm audit` for details.\n\u001b[91mnpm notice \nnpm notice\u001b[0m\u001b[91m New major version of npm available! 8.19.3 -> 9.2.0\nnpm notice Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm notice Run `npm install -g npm@9.2.0` to update!\nnpm\u001b[0m\u001b[91m notice \n\u001b[0mRemoving intermediate container dc41574e1a2b\n ---> c5429509be36\nStep 9/13 : COPY . ./\n ---> 6c45d1a258d5\nStep 10/13 : RUN npm run build\n ---> Running in 87c7ce316a45\n\n> trntxt@3.1.0 build\n> gulp build\n\n[10:09:12] Using gulpfile /usr/src/app/gulpfile.js\n[10:09:12] Starting 'build'...\n[10:09:12] Starting 'compile'...\n[10:09:16] Finished 'compile' after 3.48 s\n[10:09:16] Starting 'minifycss'...\n[10:09:16] Finished 'minifycss' after 38 ms\n[10:09:16] Starting 'minifyjs'...\n[10:09:16] Finished 'minifyjs' after 37 ms\n[10:09:16] Starting 'staticpug'...\n[10:09:16] Starting 'minifycss'...\n[10:09:16] Finished 'minifycss' after 5.57 ms\n[10:09:16] Starting '<anonymous>'...\n[10:09:16] Finished '<anonymous>' after 200 ms\n[10:09:16] Finished 'staticpug' after 207 ms\n[10:09:16] Starting 'copy'...\n[10:09:16] Finished 'copy' after 645 μs\n[10:09:16] Finished 'build' after 3.76 s\nRemoving intermediate container 87c7ce316a45\n ---> 34578a886339\nStep 11/13 : RUN npm run test\n ---> Running in c298ccd954f4\n\n> trntxt@3.1.0 test\n> gulp test\n\n[10:09:22] Using gulpfile /usr/src/app/gulpfile.js\n[10:09:22] Starting 'test'...\n[10:09:22] Starting 'build'...\n[10:09:22] Starting 'compile'...\n[10:09:25] Finished 'compile' after 3.57 s\n[10:09:25] Starting 'minifycss'...\n[10:09:25] Finished 'minifycss' after 19 ms\n[10:09:25] Starting 'minifyjs'...\n[10:09:26] Finished 'minifyjs' after 242 ms\n[10:09:26] Starting 'staticpug'...\n[10:09:26] Starting 'minifycss'...\n[10:09:26] Finished 'minifycss' after 53 ms\n[10:09:26] Starting '<anonymous>'...\n[10:09:26] Finished '<anonymous>' after 167 ms\n[10:09:26] Finished 'staticpug' after 223 ms\n[10:09:26] Starting 'copy'...\n[10:09:26] Finished 'copy' after 607 μs\n[10:09:26] Finished 'build' after 4.06 s\n[10:09:26] Starting '<anonymous>'...\n\n\n  Integration tests:\nlistening on port 34235\n    User visits homepage\n      brand recognition\n        ✓ should say trntxt\n        ✓ should say Train Text\n    Public files\n      in public/\n        ✓ responds to favicon-32x32.png\n\u001b[91m(node:28) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.\n(Use `node --trace-deprecation ...` to show where the warning was created)\n\u001b[0m        ✓ responds to favicon.ico\n        ✓ responds to google30d0f2fea22cf8ea.html\n        ✓ responds to robots.txt\n      in dist/public/\n        ✓ responds to index.html\n        ✓ responds to offline.html\n        ✓ responds to style.css\n        ✓ responds to sw.js\n    Pin app to homescreen\n      Web app manifest\n        ✓ is linked from the home page\n/manifest.json\n        ✓ exists\n        properties\n/manifest.json\n          ✓ has 'background_color' equal to '#fff'\n          ✓ has 'display' equal to 'browser'\n          ✓ has 'name' equal to 'trntxt'\n          ✓ has 'short_name' equal to 'trntxt'\n          ✓ has 'start_url' equal to '/'\n          ✓ has 'description' equal to 'Train Text: a data-friendly train times site for Great Britain'\n          ✓ has 'theme_color'\n          ✓ has 'icons'\n          icons\n            ✓ has icons listed\n/android-chrome-36x36.png\n/android-chrome-48x48.png\n/android-chrome-72x72.png\n/android-chrome-96x96.png\n/android-chrome-144x144.png\n/android-chrome-192x192.png\n            ✓ has valid icons (104ms)\n\n  Checking inputs with quotes\n    ✓ Should ignore quotes\n    ✓ Should ignore commas within quotes\n\n  Station object validation\n    ✓ should all have a stationName property\n    ✓ should all have 3-letter station codes (80ms)\n    ✓ the first station should be Abbey Wood\n\n  Valid inputs for findStation()\n    ✓ should return \"CLI\" with input \"clifton\"\n    ✓ should return \"DID\" with input \"did\"\n    ✓ should return \"DID\" with input \"didcot\"\n    ✓ should return \"DID\" with input \"didcot parkway\"\n    ✓ should return \"DID\" with input \"didcotparkway\"\n    ✓ should return \"EXD\" with input \"exeterstdavids\"\n    ✓ should return \"EXD\" with input \"exeterstdavid's\"\n    ✓ should return \"HYS\" with input \"hayeskent\"\n    ✓ should return \"HYS\" with input \"hayes\"\n    ✓ should return \"HAY\" with input \"hayesandharlington\"\n    ✓ should return \"HAY\" with input \"hayesharlington\"\n    ✓ should return \"HAY\" with input \"hayes&harlington\"\n    ✓ should return \"HOH\" with input \"harrowhill\"\n    ✓ should return \"HXX\" with input \"Heathrow Terminals 2 and 3\"\n    ✓ should return \"HXX\" with input \"heathrow2\"\n    ✓ should return \"HXX\" with input \"heathrow3\"\n    ✓ should return \"HAF\" with input \"heathrow4\"\n    ✓ should return \"HAF\" with input \"heathrowterminal4\"\n    ✓ should return \"HWV\" with input \"heathrow5\"\n    ✓ should return \"HWV\" with input \"heathrowterminal5\"\n    ✓ should return \"HXX\" with input \"heathrow23\"\n    ✓ should return \"WLO\" with input \"waterloo\"\n    ✓ should return \"WAT\" with input \"lonwat\"\n    ✓ should return \"WAE\" with input \"waterlooeast\"\n\n  Invalid inputs for findStation()\n    ✓ should return an empty array for an undefined input\n    ✓ should return an empty array for a null input\n    ✓ should return an empty array for an empty input\n    ✓ should return an empty array for an input of less than 3 characters\n    ✓ should return an empty array for an input that clearly isn't a name of a station\n\n  Testing sanitiseText()\n    ✓ should return \"DID\" with input \"did\"\n    ✓ should return \"\" with input \"\"\n    ✓ should return \"DIDCOTPARKWAY\" with input \"didcot parkway\"\n    ✓ should return \"WESTONSUPERMARE\" with input \"Weston-Super-Mare\"\n    ✓ should return \"ODD9TYP0O\" with input \" odd9 typ0o  \"\n    ✓ should return null when entering null\n    ✓ should return null when the input is undefined\n\n  Testing toMins()\n    ✓ should return 0 with input 00:00\n    ✓ should return 60 with input 01:00\n    ✓ should return 30 with input 00:30\n    ✓ should return 605 with input 10:05\n    ✓ should return 150 with input 01:90\n\n  Negative testing toMins()\n    ✓ should fail with input test\n    ✓ should fail with input five:fifteen\n    ✓ should fail with input \n\n  Testing getServiceTime()\n    ✓ should do sta-std for on time services\n    ✓ should give preference to estimated times\n\n  Testing formatTime()\n    ✓ should return 0m for input 0\n    ✓ should return 45m for input 45\n    ✓ should return 1h 0m for input 60\n    ✓ should return 1h 15m for input 75\n    ✓ should return 1h 40m for input 100\n    ✓ should return 2h 0m for input 120\n    ✓ should return 2h 30m for input 150\n\n  reformatNrccMessage()\n    ✓ shouldn't be laugh in the face of undefined\n    ✓ shouldn't be daunted by null\n    ✓ shouldn't change an empty string\n    ✓ should strip out <p> tags\n    ✓ should strip out </p> tags\n    ✓ should strip out <p> tags with attributes\n    ✓ should ignore <a> tags\n    ✓ should ignore </a> tags\n    ✓ should strip out tags beginning with 'a'\n    ✓ should strip out tags beginning with '/a'\n    ✓ should replace National Rail links with the correct address\n    ✓ real-world test\n\n\n  92 passing (456ms)\n\n[10:09:28] Finished '<anonymous>' after 1.8 s\n[10:09:28] Finished 'test' after 5.86 s\nRemoving intermediate container c298ccd954f4\n ---> fc218a84f66d\nStep 12/13 : EXPOSE 3000\n ---> Running in 9c3ece90d43f\nRemoving intermediate container 9c3ece90d43f\n ---> b790ee838a66\nStep 13/13 : ENTRYPOINT [ \"npm\", \"start\" ]\n ---> Running in 2dbe4c7c93a4\nRemoving intermediate container 2dbe4c7c93a4\n ---> d128dbac8910\nSuccessfully built d128dbac8910\nSuccessfully tagged trntxt:latest\n","stderr":"","imageSize":320297860},"repair":{"violations":[{"name":"npmCacheCleanAfterInstall","position":{"start":10,"end":10,"columnStart":4,"columnEnd":15}},{"name":"apkAddUseNoCache","position":{"start":2,"end":2,"columnStart":4,"columnEnd":30}}],"repairedDockerfile":"FROM node:16-alpine\nRUN apk update\nRUN apk add --no-cache graphicsmagick-dev\n\nWORKDIR /usr/src/app\n\n# Install dependencies.\nCOPY package*.json ./\nCOPY config ./config\nCOPY gulpfile.js ./\nRUN npm install\n\n# Copy project directory.\nCOPY . ./\nRUN npm run build\nRUN npm run test\n\nEXPOSE 3000\nENTRYPOINT [ \"npm\", \"start\" ]\n"},"repairedBuild":{"startTimestamp":1672654169983,"endTimestamp":1672654213509,"error":null,"stdout":"Sending build context to Docker daemon  1.068MB\r\r\nStep 1/13 : FROM node:16-alpine\n ---> 610c0494e820\nStep 2/13 : RUN apk update\n ---> Running in 8908c26a6649\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\nv3.17.0-313-gaf42d45cd5 [https://dl-cdn.alpinelinux.org/alpine/v3.17/main]\nv3.17.0-312-gf3974f8f5f [https://dl-cdn.alpinelinux.org/alpine/v3.17/community]\nOK: 17813 distinct packages available\nRemoving intermediate container 8908c26a6649\n ---> 92bc4f2269f7\nStep 3/13 : RUN apk add --no-cache graphicsmagick-dev\n ---> Running in 71e14aef44ae\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/22) Installing libbz2 (1.0.8-r4)\n(2/22) Installing brotli-libs (1.0.9-r9)\n(3/22) Installing libpng (1.6.38-r0)\n(4/22) Installing freetype (2.12.1-r0)\n(5/22) Installing aom-libs (3.5.0-r0)\n(6/22) Installing libde265 (1.0.9-r0)\n(7/22) Installing numactl (2.0.16-r0)\n(8/22) Installing x265-libs (3.5-r3)\n(9/22) Installing libheif (1.13.0-r0)\n(10/22) Installing libjpeg-turbo (2.1.4-r0)\n(11/22) Installing libltdl (2.4.7-r0)\n(12/22) Installing xz-libs (5.2.9-r0)\n(13/22) Installing libwebp (1.2.4-r1)\n(14/22) Installing zstd-libs (1.5.2-r9)\n(15/22) Installing tiff (4.4.0-r1)\n(16/22) Installing ghostscript-fonts (8.11-r3)\n(17/22) Installing libexpat (2.5.0-r0)\n(18/22) Installing libwmf (0.2.12-r1)\n(19/22) Installing libxml2 (2.10.3-r1)\n(20/22) Installing graphicsmagick (1.3.38-r0)\n(21/22) Installing pkgconf (1.9.3-r0)\n(22/22) Installing graphicsmagick-dev (1.3.38-r0)\nExecuting busybox-1.35.0-r29.trigger\nOK: 57 MiB in 39 packages\nRemoving intermediate container 71e14aef44ae\n ---> 92d5eb2fcbad\nStep 4/13 : WORKDIR /usr/src/app\n ---> Running in 6b21d7688789\nRemoving intermediate container 6b21d7688789\n ---> 85df43e951c7\nStep 5/13 : COPY package*.json ./\n ---> 246fe08cf651\nStep 6/13 : COPY config ./config\n ---> b0a88d3c2cf1\nStep 7/13 : COPY gulpfile.js ./\n ---> 37b3af0bf9cf\nStep 8/13 : RUN npm install\n ---> Running in 14fc13d8015d\n\u001b[91mnpm WARN deprecated urix@0.1.0: Please see https://github.com/lydell/urix#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated source-map-url@0.4.1: See https://github.com/lydell/source-map-url#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated source-map-resolve@0.5.3: See https://github.com/lydell/source-map-resolve#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated resolve-url@0.2.1: https://github.com/lydell/resolve-url#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated request-promise-native@1.0.9: request-promise-native has been deprecated because it extends the now deprecated request package, see https://github.com/request/request/issues/3142\n\u001b[0m\u001b[91mnpm WARN deprecated left-pad@1.3.0: use String.prototype.padStart()\n\u001b[0m\u001b[91mnpm WARN deprecated har-validator@5.1.5: this library is no longer supported\n\u001b[0m\u001b[91mnpm WARN deprecated gulp-util@3.0.8: gulp-util is deprecated - replace it, following the guidelines at https://medium.com/gulpjs/gulp-util-ca3b1f9f9ac5\n\u001b[0m\u001b[91mnpm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142\n\u001b[0m\u001b[91mnpm WARN deprecated formidable@1.2.6: Please upgrade to latest, formidable@v2 or formidable@v3! Check these notes: https://bit.ly/2ZEqIau\n\u001b[0m\u001b[91mnpm WARN deprecated chokidar@2.1.8: Chokidar 2 does not receive security updates since 2019. Upgrade to chokidar 3 with 15x fewer dependencies\n\u001b[0m\u001b[91mnpm WARN deprecated uuid@3.4.0: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.\n\u001b[0m\u001b[91mnpm WARN deprecated source-map-resolve@0.6.0: See https://github.com/lydell/source-map-resolve#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated core-js@2.6.12: core-js@<3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.\n\u001b[0m\n> trntxt@3.1.0 postinstall\n> gulp copy\n\nCannot read file '/usr/src/app/tsconfig.json'.\n[10:09:48] Using gulpfile /usr/src/app/gulpfile.js\n[10:09:48] Starting 'copy'...\n[10:09:48] Finished 'copy' after 2.48 ms\n\nadded 821 packages, and audited 822 packages in 9s\n\n44 packages are looking for funding\n  run `npm fund` for details\n\n16 vulnerabilities (3 moderate, 10 high, 3 critical)\n\nTo address issues that do not require attention, run:\n  npm audit fix\n\nTo address all issues possible (including breaking changes), run:\n  npm audit fix --force\n\nSome issues need review, and may require choosing\na different dependency.\n\nRun `npm audit` for details.\n\u001b[91mnpm\u001b[0m\u001b[91m notice \nnpm notice New major version of npm available! 8.19.3 -> 9.2.0\nnpm notice Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm notice Run `npm install -g npm@9.2.0` to update!\nnpm notice \n\u001b[0mRemoving intermediate container 14fc13d8015d\n ---> 4bdbae8d1f07\nStep 9/13 : COPY . ./\n ---> 425dacecd36d\nStep 10/13 : RUN npm run build\n ---> Running in 951e19f708ef\n\n> trntxt@3.1.0 build\n> gulp build\n\n[10:09:59] Using gulpfile /usr/src/app/gulpfile.js\n[10:09:59] Starting 'build'...\n[10:09:59] Starting 'compile'...\n[10:10:03] Finished 'compile' after 3.82 s\n[10:10:03] Starting 'minifycss'...\n[10:10:03] Finished 'minifycss' after 20 ms\n[10:10:03] Starting 'minifyjs'...\n[10:10:03] Finished 'minifyjs' after 35 ms\n[10:10:03] Starting 'staticpug'...\n[10:10:03] Starting 'minifycss'...\n[10:10:03] Finished 'minifycss' after 6.09 ms\n[10:10:03] Starting '<anonymous>'...\n[10:10:03] Finished '<anonymous>' after 181 ms\n[10:10:03] Finished 'staticpug' after 188 ms\n[10:10:03] Starting 'copy'...\n[10:10:03] Finished 'copy' after 606 μs\n[10:10:03] Finished 'build' after 4.07 s\nRemoving intermediate container 951e19f708ef\n ---> 8303cd526c75\nStep 11/13 : RUN npm run test\n ---> Running in 4362832b50ce\n\n> trntxt@3.1.0 test\n> gulp test\n\n[10:10:06] Using gulpfile /usr/src/app/gulpfile.js\n[10:10:06] Starting 'test'...\n[10:10:06] Starting 'build'...\n[10:10:06] Starting 'compile'...\n[10:10:10] Finished 'compile' after 3.41 s\n[10:10:10] Starting 'minifycss'...\n[10:10:10] Finished 'minifycss' after 19 ms\n[10:10:10] Starting 'minifyjs'...\n[10:10:10] Finished 'minifyjs' after 35 ms\n[10:10:10] Starting 'staticpug'...\n[10:10:10] Starting 'minifycss'...\n[10:10:10] Finished 'minifycss' after 7.95 ms\n[10:10:10] Starting '<anonymous>'...\n[10:10:10] Finished '<anonymous>' after 184 ms\n[10:10:10] Finished 'staticpug' after 193 ms\n[10:10:10] Starting 'copy'...\n[10:10:10] Finished 'copy' after 578 μs\n[10:10:10] Finished 'build' after 3.66 s\n[10:10:10] Starting '<anonymous>'...\n\n\n  Integration tests:\nlistening on port 43015\n    User visits homepage\n      brand recognition\n        ✓ should say trntxt\n        ✓ should say Train Text\n    Public files\n      in public/\n        ✓ responds to favicon-32x32.png\n\u001b[91m(node:28) [DEP0005] DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.\n(Use `node --trace-deprecation ...` to show where the warning was created)\n\u001b[0m        ✓ responds to favicon.ico\n        ✓ responds to google30d0f2fea22cf8ea.html\n        ✓ responds to robots.txt\n      in dist/public/\n        ✓ responds to index.html\n        ✓ responds to offline.html\n        ✓ responds to style.css\n        ✓ responds to sw.js\n    Pin app to homescreen\n      Web app manifest\n        ✓ is linked from the home page\n/manifest.json\n        ✓ exists\n        properties\n/manifest.json\n          ✓ has 'background_color' equal to '#fff'\n          ✓ has 'display' equal to 'browser'\n          ✓ has 'name' equal to 'trntxt'\n          ✓ has 'short_name' equal to 'trntxt'\n          ✓ has 'start_url' equal to '/'\n          ✓ has 'description' equal to 'Train Text: a data-friendly train times site for Great Britain'\n          ✓ has 'theme_color'\n          ✓ has 'icons'\n          icons\n            ✓ has icons listed\n/android-chrome-36x36.png\n/android-chrome-48x48.png\n/android-chrome-72x72.png\n/android-chrome-96x96.png\n/android-chrome-144x144.png\n/android-chrome-192x192.png\n            ✓ has valid icons (218ms)\n\n  Checking inputs with quotes\n    ✓ Should ignore quotes\n    ✓ Should ignore commas within quotes\n\n  Station object validation\n    ✓ should all have a stationName property\n    ✓ should all have 3-letter station codes (82ms)\n    ✓ the first station should be Abbey Wood\n\n  Valid inputs for findStation()\n    ✓ should return \"CLI\" with input \"clifton\"\n    ✓ should return \"DID\" with input \"did\"\n    ✓ should return \"DID\" with input \"didcot\"\n    ✓ should return \"DID\" with input \"didcot parkway\"\n    ✓ should return \"DID\" with input \"didcotparkway\"\n    ✓ should return \"EXD\" with input \"exeterstdavids\"\n    ✓ should return \"EXD\" with input \"exeterstdavid's\"\n    ✓ should return \"HYS\" with input \"hayeskent\"\n    ✓ should return \"HYS\" with input \"hayes\"\n    ✓ should return \"HAY\" with input \"hayesandharlington\"\n    ✓ should return \"HAY\" with input \"hayesharlington\"\n    ✓ should return \"HAY\" with input \"hayes&harlington\"\n    ✓ should return \"HOH\" with input \"harrowhill\"\n    ✓ should return \"HXX\" with input \"Heathrow Terminals 2 and 3\"\n    ✓ should return \"HXX\" with input \"heathrow2\"\n    ✓ should return \"HXX\" with input \"heathrow3\"\n    ✓ should return \"HAF\" with input \"heathrow4\"\n    ✓ should return \"HAF\" with input \"heathrowterminal4\"\n    ✓ should return \"HWV\" with input \"heathrow5\"\n    ✓ should return \"HWV\" with input \"heathrowterminal5\"\n    ✓ should return \"HXX\" with input \"heathrow23\"\n    ✓ should return \"WLO\" with input \"waterloo\"\n    ✓ should return \"WAT\" with input \"lonwat\"\n    ✓ should return \"WAE\" with input \"waterlooeast\"\n\n  Invalid inputs for findStation()\n    ✓ should return an empty array for an undefined input\n    ✓ should return an empty array for a null input\n    ✓ should return an empty array for an empty input\n    ✓ should return an empty array for an input of less than 3 characters\n    ✓ should return an empty array for an input that clearly isn't a name of a station\n\n  Testing sanitiseText()\n    ✓ should return \"DID\" with input \"did\"\n    ✓ should return \"\" with input \"\"\n    ✓ should return \"DIDCOTPARKWAY\" with input \"didcot parkway\"\n    ✓ should return \"WESTONSUPERMARE\" with input \"Weston-Super-Mare\"\n    ✓ should return \"ODD9TYP0O\" with input \" odd9 typ0o  \"\n    ✓ should return null when entering null\n    ✓ should return null when the input is undefined\n\n  Testing toMins()\n    ✓ should return 0 with input 00:00\n    ✓ should return 60 with input 01:00\n    ✓ should return 30 with input 00:30\n    ✓ should return 605 with input 10:05\n    ✓ should return 150 with input 01:90\n\n  Negative testing toMins()\n    ✓ should fail with input test\n    ✓ should fail with input five:fifteen\n    ✓ should fail with input \n\n  Testing getServiceTime()\n    ✓ should do sta-std for on time services\n    ✓ should give preference to estimated times\n\n  Testing formatTime()\n    ✓ should return 0m for input 0\n    ✓ should return 45m for input 45\n    ✓ should return 1h 0m for input 60\n    ✓ should return 1h 15m for input 75\n    ✓ should return 1h 40m for input 100\n    ✓ should return 2h 0m for input 120\n    ✓ should return 2h 30m for input 150\n\n  reformatNrccMessage()\n    ✓ shouldn't be laugh in the face of undefined\n    ✓ shouldn't be daunted by null\n    ✓ shouldn't change an empty string\n    ✓ should strip out <p> tags\n    ✓ should strip out </p> tags\n    ✓ should strip out <p> tags with attributes\n    ✓ should ignore <a> tags\n    ✓ should ignore </a> tags\n    ✓ should strip out tags beginning with 'a'\n    ✓ should strip out tags beginning with '/a'\n    ✓ should replace National Rail links with the correct address\n    ✓ real-world test\n\n\n  92 passing (558ms)\n\n[10:10:12] Finished '<anonymous>' after 2.05 s\n[10:10:12] Finished 'test' after 5.71 s\nRemoving intermediate container 4362832b50ce\n ---> b646f41eddd9\nStep 12/13 : EXPOSE 3000\n ---> Running in 1041d2691c3d\nRemoving intermediate container 1041d2691c3d\n ---> 54a1b3a9dcc4\nStep 13/13 : ENTRYPOINT [ \"npm\", \"start\" ]\n ---> Running in 195d20f5612c\nRemoving intermediate container 195d20f5612c\n ---> 3795fa9e18f2\nSuccessfully built 3795fa9e18f2\nSuccessfully tagged trntxt:latest\n","stderr":"","imageSize":320297832},"endTime":1672654214013}