{"repository":"https://github.com/hashicorp/dev-portal","dockerfilePath":"Dockerfile","startTime":1672503721946,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/hashicorp/dev-portal'...\n","error":null,"commit":"9bc69725d41b6333fdefb32283c90881460fa1b7"},"originalBuild":{"startTimestamp":1672503724697,"endTimestamp":1672504186385,"error":null,"stdout":"Sending build context to Docker daemon  46.84MB\r\r\nStep 1/14 : FROM docker.mirror.hashicorp.services/node:16-alpine AS deps\n16-alpine: Pulling from node\nDigest: sha256:58e4dfcf063f67d71e608c3cace5a0bcf39e9dbab3047b41e20c15c7132d1d46\nStatus: Downloaded newer image for docker.mirror.hashicorp.services/node:16-alpine\n ---> 610c0494e820\nStep 2/14 : RUN apk add --update --no-cache \tautoconf \tautomake \tbash \tgit \tg++ \tlibtool \tlibc6-compat \tlibjpeg-turbo-dev \tlibpng-dev \tmake \tnasm\n ---> Running in 114711efd9e5\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/42) Installing m4 (1.4.19-r1)\n(2/42) Installing libbz2 (1.0.8-r4)\n(3/42) Installing perl (5.36.0-r0)\n(4/42) Installing autoconf (2.71-r1)\n(5/42) Installing automake (1.16.5-r1)\n(6/42) Installing ncurses-terminfo-base (6.3_p20221119-r0)\n(7/42) Installing ncurses-libs (6.3_p20221119-r0)\n(8/42) Installing readline (8.2.0-r0)\n(9/42) Installing bash (5.2.15-r0)\nExecuting bash-5.2.15-r0.post-install\n(10/42) Installing libstdc++-dev (12.2.1_git20220924-r4)\n(11/42) Installing binutils (2.39-r2)\n(12/42) Installing libgomp (12.2.1_git20220924-r4)\n(13/42) Installing libatomic (12.2.1_git20220924-r4)\n(14/42) Installing gmp (6.2.1-r2)\n(15/42) Installing isl25 (0.25-r0)\n(16/42) Installing mpfr4 (4.1.0-r0)\n(17/42) Installing mpc1 (1.2.1-r1)\n(18/42) Installing gcc (12.2.1_git20220924-r4)\n(19/42) Installing musl-dev (1.2.3-r4)\n(20/42) Installing libc-dev (0.7.2-r3)\n(21/42) Installing g++ (12.2.1_git20220924-r4)\n(22/42) Installing ca-certificates (20220614-r3)\n(23/42) Installing brotli-libs (1.0.9-r9)\n(24/42) Installing nghttp2-libs (1.51.0-r0)\n(25/42) Installing libcurl (7.87.0-r0)\n(26/42) Installing libexpat (2.5.0-r0)\n(27/42) Installing pcre2 (10.42-r0)\n(28/42) Installing git (2.38.2-r0)\n(29/42) Installing perl-error (0.17029-r1)\n(30/42) Installing perl-git (2.38.2-r0)\n(31/42) Installing git-perl (2.38.2-r0)\n(32/42) Installing libc6-compat (1.2.3-r4)\n(33/42) Installing libjpeg-turbo (2.1.4-r0)\n(34/42) Installing pkgconf (1.9.3-r0)\n(35/42) Installing libjpeg-turbo-dev (2.1.4-r0)\n(36/42) Installing libpng (1.6.38-r0)\n(37/42) Installing zlib-dev (1.2.13-r0)\n(38/42) Installing libpng-dev (1.6.38-r0)\n(39/42) Installing libltdl (2.4.7-r0)\n(40/42) Installing libtool (2.4.7-r0)\n(41/42) Installing make (4.3-r1)\n(42/42) Installing nasm (2.15.05-r1)\nExecuting busybox-1.35.0-r29.trigger\nExecuting ca-certificates-20220614-r3.trigger\nOK: 297 MiB in 59 packages\nRemoving intermediate container 114711efd9e5\n ---> 4f7d80d5e432\nStep 3/14 : WORKDIR /app\n ---> Running in a8e503bbcc90\nRemoving intermediate container a8e503bbcc90\n ---> c10b1ff21deb\nStep 4/14 : COPY package.json package-lock.json ./\n ---> 0ebe2ef7f593\nStep 5/14 : RUN npm install -g npm@latest\n ---> Running in 2ec15f43975b\n\nremoved 14 packages, changed 75 packages, and audited 232 packages in 54s\n\n14 packages are looking for funding\n  run `npm fund` for details\n\nfound 0 vulnerabilities\nRemoving intermediate container 2ec15f43975b\n ---> fcae84446a02\nStep 6/14 : RUN CPPFLAGS=\"-DPNG_ARM_NEON_OPT=0\" npm install\n ---> Running in 54deffc3a6ca\n\u001b[91mnpm WARN deprecated urix@0.1.0: Please see https://github.com/lydell/urix#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated source-map-url@0.4.1: See https://github.com/lydell/source-map-url#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated source-map-resolve@0.5.3: See https://github.com/lydell/source-map-resolve#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated sane@4.1.0: some dependency vulnerabilities fixed, support for node < 10 dropped, and newer ECMAScript syntax/features added\n\u001b[0m\u001b[91mnpm WARN deprecated resolve-url@0.2.1: https://github.com/lydell/resolve-url#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated svgo@1.3.2: This SVGO version is no longer supported. Upgrade to v2.x.x.\n\u001b[0m\u001b[91mnpm WARN deprecated mdast@3.0.0: `mdast` was renamed to `remark`\n\u001b[0m\u001b[91mnpm WARN deprecated flatten@1.0.3: flatten is deprecated in favor of utility frameworks such as lodash.\n\u001b[0m\u001b[91mnpm WARN deprecated @stylelint/postcss-markdown@0.36.2: Use the original unforked package instead: postcss-markdown\n\u001b[0m\u001b[91mnpm WARN deprecated @hashicorp/js-utils@1.0.10: [DEPRECATED] -  This package has been moved to @hashicorp/nextjs-scripts. See https://github.com/hashicorp/nextjs-scripts/pull/124 for details.This package is deprecated, and will no longer be maintained. Please check the hashicorp/react-components repository for a list of maintained packages, and file an issue if you need a replacement for this package.\n\u001b[0m\u001b[91mnpm WARN deprecated @hashicorp/localstorage-polyfill@1.0.14: [DEPRECATED] - This package is deprecated, and will no longer be maintained. Please check the hashicorp/react-components repository for a list of maintained packages, and file an issue if you need a replacement for this package.\n\u001b[0m\u001b[91mnpm WARN deprecated chokidar@2.1.8: Chokidar 2 does not receive security updates since 2019. Upgrade to chokidar 3 with 15x fewer dependencies\n\u001b[0m\u001b[91mnpm WARN deprecated querystring@0.2.0: The querystring API is considered Legacy. new code should use the URLSearchParams API instead.\n\u001b[0m\u001b[91mnpm WARN deprecated uuid@3.4.0: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.\n\u001b[0m\u001b[91mnpm WARN deprecated uuid@3.4.0: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.\n\u001b[0m\u001b[91mnpm WARN deprecated mkdirp@0.3.0: Legacy versions of mkdirp are no longer supported. Please update to mkdirp 1.x. (Note that the API surface has changed to use Promises in 1.x.)\n\u001b[0m\n> prepare\n> simple-git-hooks\n\n[ERROR], Was not able to set git hooks. Error: Error: ENOENT: no such file or directory, mkdir 'undefined/hooks/'\n\nadded 3313 packages, and audited 3315 packages in 1m\n\n478 packages are looking for funding\n  run `npm fund` for details\n\n79 vulnerabilities (1 low, 15 moderate, 56 high, 7 critical)\n\nTo address issues that do not require attention, run:\n  npm audit fix\n\nTo address all issues possible (including breaking changes), run:\n  npm audit fix --force\n\nSome issues need review, and may require choosing\na different dependency.\n\nRun `npm audit` for details.\nRemoving intermediate container 54deffc3a6ca\n ---> 9af635241df7\nStep 7/14 : FROM docker.mirror.hashicorp.services/node:16-alpine AS builder\n ---> 610c0494e820\nStep 8/14 : RUN npm install -g npm@latest\n ---> Running in 71628757cebf\n\nremoved 14 packages, changed 75 packages, and audited 232 packages in 41s\n\n14 packages are looking for funding\n  run `npm fund` for details\n\nfound 0 vulnerabilities\nRemoving intermediate container 71628757cebf\n ---> 0a393b315979\nStep 9/14 : WORKDIR /app\n ---> Running in e0959bd26418\nRemoving intermediate container e0959bd26418\n ---> 03329094099d\nStep 10/14 : COPY . ./website-preview\n ---> 1fbd2b06d13c\nStep 11/14 : COPY --chown=0:0 --from=deps /app/node_modules ./website-preview/node_modules\n ---> e3065856d56a\nStep 12/14 : EXPOSE 3000\n ---> Running in f5fc9883f866\nRemoving intermediate container f5fc9883f866\n ---> 2a3a9da33533\nStep 13/14 : ENTRYPOINT [\"/bin/sh\", \"-c\"]\n ---> Running in eff7adb694f1\nRemoving intermediate container eff7adb694f1\n ---> c4b8630dfaa2\nStep 14/14 : CMD [\"cd website-preview && ./scripts/content-repo-preview/start.sh\"]\n ---> Running in 68f3c3668d22\nRemoving intermediate container 68f3c3668d22\n ---> c2db998589eb\nSuccessfully built c2db998589eb\nSuccessfully tagged dev-portal:latest\n","stderr":"","imageSize":913470931},"repair":{"violations":[{"name":"npmCacheCleanAfterInstall","position":{"start":17,"end":17,"columnStart":4,"columnEnd":29}},{"name":"npmCacheCleanAfterInstall","position":{"start":22,"end":22,"columnStart":4,"columnEnd":47}},{"name":"npmCacheCleanAfterInstall","position":{"start":26,"end":26,"columnStart":4,"columnEnd":29}}],"repairedDockerfile":"FROM docker.mirror.hashicorp.services/node:16-alpine AS deps\n\nRUN apk add --update --no-cache \\\n\tautoconf \\\n\tautomake \\\n\tbash \\\n\tgit \\\n\tg++ \\\n\tlibtool \\\n\tlibc6-compat \\\n\tlibjpeg-turbo-dev \\\n\tlibpng-dev \\\n\tmake \\\n\tnasm\n\nWORKDIR /app\nCOPY package.json package-lock.json ./\nRUN npm install -g npm@latest\n\n# While imagemin/optipng-bin doesn't support arm64, set this env var as a workaround\n# - `npm ls imagemin`\n# - see https://github.com/imagemin/optipng-bin/issues/118\nRUN CPPFLAGS=\"-DPNG_ARM_NEON_OPT=0\" npm install\n\nFROM docker.mirror.hashicorp.services/node:16-alpine AS builder\n\nRUN npm install -g npm@latest\n\nWORKDIR /app\nCOPY . ./website-preview\nCOPY --chown=0:0 --from=deps /app/node_modules ./website-preview/node_modules\n\nEXPOSE 3000\n\nENTRYPOINT [\"/bin/sh\", \"-c\"]\nCMD [\"cd website-preview && ./scripts/content-repo-preview/start.sh\"]\n"},"repairedBuild":{"startTimestamp":1672504192143,"endTimestamp":1672504627842,"error":null,"stdout":"Sending build context to Docker daemon  46.84MB\r\r\nStep 1/14 : FROM docker.mirror.hashicorp.services/node:16-alpine AS deps\n ---> 610c0494e820\nStep 2/14 : RUN apk add --update --no-cache \tautoconf \tautomake \tbash \tgit \tg++ \tlibtool \tlibc6-compat \tlibjpeg-turbo-dev \tlibpng-dev \tmake \tnasm\n ---> Running in dffc9308c266\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/42) Installing m4 (1.4.19-r1)\n(2/42) Installing libbz2 (1.0.8-r4)\n(3/42) Installing perl (5.36.0-r0)\n(4/42) Installing autoconf (2.71-r1)\n(5/42) Installing automake (1.16.5-r1)\n(6/42) Installing ncurses-terminfo-base (6.3_p20221119-r0)\n(7/42) Installing ncurses-libs (6.3_p20221119-r0)\n(8/42) Installing readline (8.2.0-r0)\n(9/42) Installing bash (5.2.15-r0)\nExecuting bash-5.2.15-r0.post-install\n(10/42) Installing libstdc++-dev (12.2.1_git20220924-r4)\n(11/42) Installing binutils (2.39-r2)\n(12/42) Installing libgomp (12.2.1_git20220924-r4)\n(13/42) Installing libatomic (12.2.1_git20220924-r4)\n(14/42) Installing gmp (6.2.1-r2)\n(15/42) Installing isl25 (0.25-r0)\n(16/42) Installing mpfr4 (4.1.0-r0)\n(17/42) Installing mpc1 (1.2.1-r1)\n(18/42) Installing gcc (12.2.1_git20220924-r4)\n(19/42) Installing musl-dev (1.2.3-r4)\n(20/42) Installing libc-dev (0.7.2-r3)\n(21/42) Installing g++ (12.2.1_git20220924-r4)\n(22/42) Installing ca-certificates (20220614-r3)\n(23/42) Installing brotli-libs (1.0.9-r9)\n(24/42) Installing nghttp2-libs (1.51.0-r0)\n(25/42) Installing libcurl (7.87.0-r0)\n(26/42) Installing libexpat (2.5.0-r0)\n(27/42) Installing pcre2 (10.42-r0)\n(28/42) Installing git (2.38.2-r0)\n(29/42) Installing perl-error (0.17029-r1)\n(30/42) Installing perl-git (2.38.2-r0)\n(31/42) Installing git-perl (2.38.2-r0)\n(32/42) Installing libc6-compat (1.2.3-r4)\n(33/42) Installing libjpeg-turbo (2.1.4-r0)\n(34/42) Installing pkgconf (1.9.3-r0)\n(35/42) Installing libjpeg-turbo-dev (2.1.4-r0)\n(36/42) Installing libpng (1.6.38-r0)\n(37/42) Installing zlib-dev (1.2.13-r0)\n(38/42) Installing libpng-dev (1.6.38-r0)\n(39/42) Installing libltdl (2.4.7-r0)\n(40/42) Installing libtool (2.4.7-r0)\n(41/42) Installing make (4.3-r1)\n(42/42) Installing nasm (2.15.05-r1)\nExecuting busybox-1.35.0-r29.trigger\nExecuting ca-certificates-20220614-r3.trigger\nOK: 297 MiB in 59 packages\nRemoving intermediate container dffc9308c266\n ---> 633f1c0684e4\nStep 3/14 : WORKDIR /app\n ---> Running in c1e1f7661890\nRemoving intermediate container c1e1f7661890\n ---> 6e434d8fbb70\nStep 4/14 : COPY package.json package-lock.json ./\n ---> 5be46e247938\nStep 5/14 : RUN npm install -g npm@latest\n ---> Running in 85972cdb3fce\n\nremoved 14 packages, changed 75 packages, and audited 232 packages in 46s\n\n14 packages are looking for funding\n  run `npm fund` for details\n\nfound 0 vulnerabilities\nRemoving intermediate container 85972cdb3fce\n ---> 92145842a56f\nStep 6/14 : RUN CPPFLAGS=\"-DPNG_ARM_NEON_OPT=0\" npm install\n ---> Running in 88d7d2a88f02\n\u001b[91mnpm WARN deprecated urix@0.1.0: Please see https://github.com/lydell/urix#deprecated\n\u001b[0m\u001b[91mnpm\u001b[0m\u001b[91m WARN\u001b[0m\u001b[91m deprecated source-map-url@0.4.1: See https://github.com/lydell/source-map-url#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated source-map-resolve@0.5.3: See https://github.com/lydell/source-map-resolve#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated resolve-url@0.2.1: https://github.com/lydell/resolve-url#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated sane@4.1.0: some dependency vulnerabilities fixed, support for node < 10 dropped, and newer ECMAScript syntax/features added\n\u001b[0m\u001b[91mnpm WARN deprecated mdast@3.0.0: `mdast` was renamed to `remark`\n\u001b[0m\u001b[91mnpm WARN deprecated flatten@1.0.3: flatten is deprecated in favor of utility frameworks such as lodash.\n\u001b[0m\u001b[91mnpm WARN deprecated svgo@1.3.2: This SVGO version is no longer supported. Upgrade to v2.x.x.\n\u001b[0m\u001b[91mnpm WARN \u001b[0m\u001b[91mdeprecated @stylelint/postcss-markdown@0.36.2: Use the original unforked package instead: postcss-markdown\n\u001b[0m\u001b[91mnpm WARN deprecated @hashicorp/localstorage-polyfill@1.0.14: [DEPRECATED] - This package is deprecated, and will no longer be maintained. Please check the hashicorp/react-components repository for a list of maintained packages, and file an issue if you need a replacement for this package.\n\u001b[0m\u001b[91mnpm WARN deprecated @hashicorp/js-utils@1.0.10: [DEPRECATED] -  This package has been moved to @hashicorp/nextjs-scripts. See https://github.com/hashicorp/nextjs-scripts/pull/124 for details.This package is deprecated, and will no longer be maintained. Please check the hashicorp/react-components repository for a list of maintained packages, and file an issue if you need a replacement for this package.\n\u001b[0m\u001b[91mnpm WARN deprecated chokidar@2.1.8: Chokidar 2 does not receive security updates since 2019. Upgrade to chokidar 3 with 15x fewer dependencies\n\u001b[0m\u001b[91mnpm WARN deprecated querystring@0.2.0: The querystring API is considered Legacy. new code should use the URLSearchParams API instead.\n\u001b[0m\u001b[91mnpm WARN deprecated uuid@3.4.0: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.\n\u001b[0m\u001b[91mnpm WARN deprecated uuid@3.4.0: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.\n\u001b[0m\u001b[91mnpm WARN deprecated mkdirp@0.3.0: Legacy versions of mkdirp are no longer supported. Please update to mkdirp 1.x. (Note that the API surface has changed to use Promises in 1.x.)\n\u001b[0m\n> prepare\n> simple-git-hooks\n\n[ERROR], Was not able to set git hooks. Error: Error: ENOENT: no such file or directory, mkdir 'undefined/hooks/'\n\nadded 3313 packages, and audited 3315 packages in 1m\n\n478 packages are looking for funding\n  run `npm fund` for details\n\n79 vulnerabilities (1 low, 15 moderate, 56 high, 7 critical)\n\nTo address issues that do not require attention, run:\n  npm audit fix\n\nTo address all issues possible (including breaking changes), run:\n  npm audit fix --force\n\nSome issues need review, and may require choosing\na different dependency.\n\nRun `npm audit` for details.\nRemoving intermediate container 88d7d2a88f02\n ---> 822ce4fe8c82\nStep 7/14 : FROM docker.mirror.hashicorp.services/node:16-alpine AS builder\n ---> 610c0494e820\nStep 8/14 : RUN npm install -g npm@latest\n ---> Running in 06c623141c6f\n\nremoved 14 packages, changed 75 packages, and audited 232 packages in 44s\n\n14 packages are looking for funding\n  run `npm fund` for details\n\nfound 0 vulnerabilities\nRemoving intermediate container 06c623141c6f\n ---> 1cada1c4f900\nStep 9/14 : WORKDIR /app\n ---> Running in 5ca3ddb458e3\nRemoving intermediate container 5ca3ddb458e3\n ---> ddf2d9b80faa\nStep 10/14 : COPY . ./website-preview\n ---> ee8e61cd9fb6\nStep 11/14 : COPY --chown=0:0 --from=deps /app/node_modules ./website-preview/node_modules\n ---> f0858671d164\nStep 12/14 : EXPOSE 3000\n ---> Running in c7afb2983bc6\nRemoving intermediate container c7afb2983bc6\n ---> ce83bd97990b\nStep 13/14 : ENTRYPOINT [\"/bin/sh\", \"-c\"]\n ---> Running in 1ace9b92250d\nRemoving intermediate container 1ace9b92250d\n ---> 91bf03693edb\nStep 14/14 : CMD [\"cd website-preview && ./scripts/content-repo-preview/start.sh\"]\n ---> Running in 2c42bfcac7f4\nRemoving intermediate container 2c42bfcac7f4\n ---> 15b4bbb38745\nSuccessfully built 15b4bbb38745\nSuccessfully tagged dev-portal:latest\n","stderr":"","imageSize":913470930},"endTime":1672504631845}