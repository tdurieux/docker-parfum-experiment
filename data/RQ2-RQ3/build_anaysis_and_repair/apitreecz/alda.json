{"repository":"https://github.com/apitreecz/alda","dockerfilePath":"Dockerfile","startTime":1672606681468,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/apitreecz/alda'...\n","error":null,"commit":"34d5e46f81b4c6cacdfac216017e0d938dc43b0c"},"originalBuild":{"startTimestamp":1672606682669,"endTimestamp":1672606860364,"error":null,"stdout":"Sending build context to Docker daemon  1.193MB\r\r\nStep 1/14 : FROM node:10\n10: Pulling from library/node\n76b8ef87096f: Pulling fs layer\n2e2bafe8a0f4: Pulling fs layer\nb53ce1fd2746: Pulling fs layer\n84a8c1bd5887: Pulling fs layer\n7a803dc0b40f: Pulling fs layer\nb800e94e7303: Pulling fs layer\n0da9fbf60d48: Pulling fs layer\n04dccde934cf: Pulling fs layer\n73269890f6fd: Pulling fs layer\n84a8c1bd5887: Waiting\nb800e94e7303: Waiting\n7a803dc0b40f: Waiting\n0da9fbf60d48: Waiting\n04dccde934cf: Waiting\n73269890f6fd: Waiting\nb53ce1fd2746: Verifying Checksum\nb53ce1fd2746: Download complete\n2e2bafe8a0f4: Verifying Checksum\n2e2bafe8a0f4: Download complete\n76b8ef87096f: Verifying Checksum\n76b8ef87096f: Download complete\nb800e94e7303: Verifying Checksum\nb800e94e7303: Download complete\n0da9fbf60d48: Verifying Checksum\n0da9fbf60d48: Download complete\n84a8c1bd5887: Verifying Checksum\n84a8c1bd5887: Download complete\n04dccde934cf: Verifying Checksum\n04dccde934cf: Download complete\n73269890f6fd: Verifying Checksum\n73269890f6fd: Download complete\n76b8ef87096f: Pull complete\n2e2bafe8a0f4: Pull complete\nb53ce1fd2746: Pull complete\n7a803dc0b40f: Verifying Checksum\n7a803dc0b40f: Download complete\n84a8c1bd5887: Pull complete\n7a803dc0b40f: Pull complete\nb800e94e7303: Pull complete\n0da9fbf60d48: Pull complete\n04dccde934cf: Pull complete\n73269890f6fd: Pull complete\nDigest: sha256:59531d2835edd5161c8f9512f9e095b1836f7a1fcb0ab73e005ec46047384911\nStatus: Downloaded newer image for node:10\n ---> 28dca6642db8\nStep 2/14 : LABEL maintainer=\"a.dostal@apitree.cz\"\n ---> Running in 713c03bdd1a1\nRemoving intermediate container 713c03bdd1a1\n ---> 6423fd467e10\nStep 3/14 : RUN mkdir -p /usr/src/app\n ---> Running in b55cf3b95245\nRemoving intermediate container b55cf3b95245\n ---> 89ef3eb355db\nStep 4/14 : WORKDIR /usr/src/app\n ---> Running in 5f94fa5bd16e\nRemoving intermediate container 5f94fa5bd16e\n ---> 8129adc641e4\nStep 5/14 : COPY . /usr/src/app\n ---> bc8a78d5ad00\nStep 6/14 : RUN npm install\n ---> Running in 8b67aa8ed800\n\n> husky@0.14.3 install /usr/src/app/node_modules/husky\n> node ./bin/install.js\n\nhusky\nsetting up Git hooks\ndone\n\n\n> jss@9.8.7 postinstall /usr/src/app/node_modules/jss\n> node -e \"console.log('\\u001b[35m\\u001b[1mLove JSS? You can now support us on open collective:\\u001b[22m\\u001b[39m\\n > \\u001b[34mhttps://opencollective.com/jss/donate\\u001b[0m')\"\n\n\u001b[35m\u001b[1mLove JSS? You can now support us on open collective:\u001b[22m\u001b[39m\n > \u001b[34mhttps://opencollective.com/jss/donate\u001b[0m\n\n> protobufjs@6.8.8 postinstall /usr/src/app/node_modules/protobufjs\n> node scripts/postinstall\n\n\n> uglifyjs-webpack-plugin@0.4.6 postinstall /usr/src/app/node_modules/webpack/node_modules/uglifyjs-webpack-plugin\n> node lib/post_install.js\n\n\n> nodemon@1.18.3 postinstall /usr/src/app/node_modules/nodemon\n> node bin/postinstall || exit 0\n\n\u001b[32mLove nodemon? You can now support the project via the open collective:\u001b[22m\u001b[39m\n > \u001b[96m\u001b[1mhttps://opencollective.com/nodemon/donate\u001b[0m\n\n\u001b[91mnpm WARN\u001b[0m\u001b[91m optional SKIPPING OPTIONAL DEPENDENCY: fsevents@1.2.4 (node_modules/fsevents):\n\u001b[0m\u001b[91mnpm\u001b[0m\u001b[91m \u001b[0m\u001b[91mWARN \u001b[0m\u001b[91mnotsup\u001b[0m\u001b[91m SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.2.4: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91m\n\u001b[0madded 1434 packages from 924 contributors and audited 1512 packages in 19.263s\nfound 541 vulnerabilities (45 low, 116 moderate, 302 high, 78 critical)\n  run `npm audit fix` to fix them, or `npm audit` for details\nRemoving intermediate container 8b67aa8ed800\n ---> a3e96ec21f05\nStep 7/14 : RUN cd /usr/src/app && npm run build\n ---> Running in 0b1df245666e\n\n> @apitree/alda@0.1.0-alpha.34 prebuild /usr/src/app\n> rimraf -- dist .next\n\n\n> @apitree/alda@0.1.0-alpha.34 build /usr/src/app\n> npm run generate:graphql:json && npm run generate:graphql:typescript && next build && tsc --project tsconfig.server.json && npm run generate:lang\n\n\n> @apitree/alda@0.1.0-alpha.34 generate:graphql:json /usr/src/app\n> npm run generate:graphql:merge && apollo-codegen introspect-schema graphql.schema.graphql --output graphql.schema.json\n\n\n> @apitree/alda@0.1.0-alpha.34 generate:graphql:merge /usr/src/app\n> node -e \"console.log(require('graphql-import').importSchema('./schema/root.graphql'))\" > graphql.schema.graphql\n\n\n> @apitree/alda@0.1.0-alpha.34 generate:graphql:typescript /usr/src/app\n> gql-gen --schema graphql.schema.json --template typescript --out ./types/graphql.d.ts\n\n21:00:08.311 - \u001b[32minfo\u001b[39m: Loading GraphQL Introspection from file: graphql.schema.json...\n21:00:08.629 - \u001b[32minfo\u001b[39m: Generated file written to /usr/src/app/types/graphql.d.ts\n> Using external babel configuration\n> Location: \"/usr/src/app/.babelrc\"\n\n> @apitree/alda@0.1.0-alpha.34 generate:lang /usr/src/app\n> ts-node --compilerOptions {\\\"module\\\":\\\"commonjs\\\"} ./scripts/default-lang.ts\n\n\u001b[32m Wrote default messages to: \"./lang/en.json\"\n\u001b[32m Create or replace TypeScript file: \"./client/Lang.ts\"\n\u001b[32m Merge file: ./lang/cs.json with ./lang/en.json\n\u001b[0m\nRemoving intermediate container 0b1df245666e\n ---> 1932d789536f\nStep 8/14 : ARG BUILD_NUM\n ---> Running in 441f7822de29\nRemoving intermediate container 441f7822de29\n ---> 92b722000640\nStep 9/14 : ENV BUILD_NUM=$BUILD_NUM\n ---> Running in 42356aedb1dc\nRemoving intermediate container 42356aedb1dc\n ---> 6478b8caaae3\nStep 10/14 : ARG BUILD_AUTHOR\n ---> Running in ed451b35b8c6\nRemoving intermediate container ed451b35b8c6\n ---> 3d84ec971e17\nStep 11/14 : ENV BUILD_AUTHOR=$BUILD_AUTHOR\n ---> Running in 9598e5fcfaf9\nRemoving intermediate container 9598e5fcfaf9\n ---> 3a98c5a42c51\nStep 12/14 : ENV TZ=Europe/Prague\n ---> Running in 0b7e4a77dd39\nRemoving intermediate container 0b7e4a77dd39\n ---> 799d60eb55c7\nStep 13/14 : EXPOSE 8080\n ---> Running in d4854407fbea\nRemoving intermediate container d4854407fbea\n ---> 9dbe9415952d\nStep 14/14 : CMD [\"npm\", \"start\"]\n ---> Running in c7f92cca4166\nRemoving intermediate container c7f92cca4166\n ---> 5ce37d52cd7f\nSuccessfully built 5ce37d52cd7f\nSuccessfully tagged alda:latest\n","stderr":"","imageSize":1189140785},"repair":{"violations":[{"name":"npmCacheCleanAfterInstall","position":{"start":10,"end":10,"columnStart":4,"columnEnd":15}},{"name":"mkdirUsrSrcThenRemove","position":{"start":5,"end":5,"columnStart":4,"columnEnd":25}}],"repairedDockerfile":"FROM node:10\n\nLABEL maintainer=\"a.dostal@apitree.cz\"\n\n# Create app directory\nRUN mkdir -p /usr/src/app\nWORKDIR /usr/src/app\n\n# Install app dependencies\nCOPY . /usr/src/app\nRUN npm install\n\n# Delete .npmrc. It is needed for npm install, but contains private key to NPM repository and we don't want to leave that in a docker image.\n#RUN rm .npmrc\n\n# Build application, because Next.js have random HASH and BULD_ID\nRUN cd /usr/src/app && npm run build\n\n# Add arguments to process.env from docker build --build-arg xx\nARG BUILD_NUM\nENV BUILD_NUM=$BUILD_NUM\n\nARG BUILD_AUTHOR\nENV BUILD_AUTHOR=$BUILD_AUTHOR\n\nENV TZ=Europe/Prague\n\nEXPOSE 8080\nCMD [\"npm\", \"start\"]\n"},"repairedBuild":{"startTimestamp":1672606861578,"endTimestamp":1672606972943,"error":null,"stdout":"Sending build context to Docker daemon  1.193MB\r\r\nStep 1/14 : FROM node:10\n ---> 28dca6642db8\nStep 2/14 : LABEL maintainer=\"a.dostal@apitree.cz\"\n ---> Running in 270dfdc9dca3\nRemoving intermediate container 270dfdc9dca3\n ---> f99907cfc237\nStep 3/14 : RUN mkdir -p /usr/src/app\n ---> Running in 76a1e92ef09b\nRemoving intermediate container 76a1e92ef09b\n ---> e91dfeea56aa\nStep 4/14 : WORKDIR /usr/src/app\n ---> Running in f494373ba851\nRemoving intermediate container f494373ba851\n ---> b5844618e3e1\nStep 5/14 : COPY . /usr/src/app\n ---> c64a6c900560\nStep 6/14 : RUN npm install\n ---> Running in fa2085590802\n\n> husky@0.14.3 install /usr/src/app/node_modules/husky\n> node ./bin/install.js\n\nhusky\nsetting up Git hooks\ndone\n\n\n> jss@9.8.7 postinstall /usr/src/app/node_modules/jss\n> node -e \"console.log('\\u001b[35m\\u001b[1mLove JSS? You can now support us on open collective:\\u001b[22m\\u001b[39m\\n > \\u001b[34mhttps://opencollective.com/jss/donate\\u001b[0m')\"\n\n\u001b[35m\u001b[1mLove JSS? You can now support us on open collective:\u001b[22m\u001b[39m\n > \u001b[34mhttps://opencollective.com/jss/donate\u001b[0m\n\n> protobufjs@6.8.8 postinstall /usr/src/app/node_modules/protobufjs\n> node scripts/postinstall\n\n\n> uglifyjs-webpack-plugin@0.4.6 postinstall /usr/src/app/node_modules/webpack/node_modules/uglifyjs-webpack-plugin\n> node lib/post_install.js\n\n\n> nodemon@1.18.3 postinstall /usr/src/app/node_modules/nodemon\n> node bin/postinstall || exit 0\n\n\u001b[32mLove nodemon? You can now support the project via the open collective:\u001b[22m\u001b[39m\n > \u001b[96m\u001b[1mhttps://opencollective.com/nodemon/donate\u001b[0m\n\n\u001b[91mnpm WARN optional\u001b[0m\u001b[91m SKIPPING OPTIONAL DEPENDENCY: fsevents@1.2.4 (node_modules/fsevents):\n\u001b[0m\u001b[91mnpm WARN\u001b[0m\u001b[91m notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.2.4: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91m\n\u001b[0madded 1434 packages from 924 contributors and audited 1512 packages in 20.715s\nfound 541 vulnerabilities (45 low, 116 moderate, 302 high, 78 critical)\n  run `npm audit fix` to fix them, or `npm audit` for details\nRemoving intermediate container fa2085590802\n ---> 81b6edc7244e\nStep 7/14 : RUN cd /usr/src/app && npm run build\n ---> Running in 20bcf2347e3d\n\n> @apitree/alda@0.1.0-alpha.34 prebuild /usr/src/app\n> rimraf -- dist .next\n\n\n> @apitree/alda@0.1.0-alpha.34 build /usr/src/app\n> npm run generate:graphql:json && npm run generate:graphql:typescript && next build && tsc --project tsconfig.server.json && npm run generate:lang\n\n\n> @apitree/alda@0.1.0-alpha.34 generate:graphql:json /usr/src/app\n> npm run generate:graphql:merge && apollo-codegen introspect-schema graphql.schema.graphql --output graphql.schema.json\n\n\n> @apitree/alda@0.1.0-alpha.34 generate:graphql:merge /usr/src/app\n> node -e \"console.log(require('graphql-import').importSchema('./schema/root.graphql'))\" > graphql.schema.graphql\n\n\n> @apitree/alda@0.1.0-alpha.34 generate:graphql:typescript /usr/src/app\n> gql-gen --schema graphql.schema.json --template typescript --out ./types/graphql.d.ts\n\n21:02:03.888 - \u001b[32minfo\u001b[39m: Loading GraphQL Introspection from file: graphql.schema.json...\n21:02:04.183 - \u001b[32minfo\u001b[39m: Generated file written to /usr/src/app/types/graphql.d.ts\n> Using external babel configuration\n> Location: \"/usr/src/app/.babelrc\"\n\n> @apitree/alda@0.1.0-alpha.34 generate:lang /usr/src/app\n> ts-node --compilerOptions {\\\"module\\\":\\\"commonjs\\\"} ./scripts/default-lang.ts\n\n\u001b[32m Wrote default messages to: \"./lang/en.json\"\n\u001b[32m Create or replace TypeScript file: \"./client/Lang.ts\"\n\u001b[32m Merge file: ./lang/cs.json with ./lang/en.json\n\u001b[0m\nRemoving intermediate container 20bcf2347e3d\n ---> 5f01ae53fa95\nStep 8/14 : ARG BUILD_NUM\n ---> Running in 0cd9bc3f0966\nRemoving intermediate container 0cd9bc3f0966\n ---> 96f6f10adc2d\nStep 9/14 : ENV BUILD_NUM=$BUILD_NUM\n ---> Running in d4279d0a75ff\nRemoving intermediate container d4279d0a75ff\n ---> d48523e920af\nStep 10/14 : ARG BUILD_AUTHOR\n ---> Running in 0d023838a33a\nRemoving intermediate container 0d023838a33a\n ---> 47415eeff293\nStep 11/14 : ENV BUILD_AUTHOR=$BUILD_AUTHOR\n ---> Running in 3a39cd3b70a2\nRemoving intermediate container 3a39cd3b70a2\n ---> d294b73165e6\nStep 12/14 : ENV TZ=Europe/Prague\n ---> Running in bcae5a4e7406\nRemoving intermediate container bcae5a4e7406\n ---> 982fbef8b0e5\nStep 13/14 : EXPOSE 8080\n ---> Running in 78b3aede0a5e\nRemoving intermediate container 78b3aede0a5e\n ---> fc7e1c1513dc\nStep 14/14 : CMD [\"npm\", \"start\"]\n ---> Running in 32d16d4ab227\nRemoving intermediate container 32d16d4ab227\n ---> d6b85b144fd8\nSuccessfully built d6b85b144fd8\nSuccessfully tagged alda:latest\n","stderr":"","imageSize":1189142768},"endTime":1672606974809}