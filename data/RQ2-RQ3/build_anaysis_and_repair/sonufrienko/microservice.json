{"repository":"https://github.com/sonufrienko/microservice","dockerfilePath":"Dockerfile","startTime":1672857002751,"endTime":1672857172551,"clone":{"startTime":1672857002751,"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/sonufrienko/microservice'...\n","error":null,"endTime":1672857004523,"commit":"f376cc935e84ad0fe1a86f26deb88b7f6076471a"},"originalBuild":{"startTime":1672857004618,"endTime":1672857108741,"error":null,"stdout":"Sending build context to Docker daemon    620kB\r\r\nStep 1/9 : FROM node:10-alpine\n10-alpine: Pulling from library/node\nddad3d7c1e96: Pulling fs layer\nde915e575d22: Pulling fs layer\n7150aa69525b: Pulling fs layer\nd7aa47be044e: Pulling fs layer\nd7aa47be044e: Waiting\n7150aa69525b: Verifying Checksum\n7150aa69525b: Download complete\nddad3d7c1e96: Verifying Checksum\nddad3d7c1e96: Download complete\nde915e575d22: Verifying Checksum\nde915e575d22: Download complete\nd7aa47be044e: Verifying Checksum\nddad3d7c1e96: Pull complete\nde915e575d22: Pull complete\n7150aa69525b: Pull complete\nd7aa47be044e: Pull complete\nDigest: sha256:dc98dac24efd4254f75976c40bce46944697a110d06ce7fa47e7268470cf2e28\nStatus: Downloaded newer image for node:10-alpine\n ---> aa67ba258e18\nStep 2/9 : RUN mkdir -p /var/www/app/current\n ---> Running in d3e2b7772506\nRemoving intermediate container d3e2b7772506\n ---> d106c4459ecf\nStep 3/9 : WORKDIR /var/www/app/current\n ---> Running in 0fb2e7c07d43\nRemoving intermediate container 0fb2e7c07d43\n ---> 89518fe4f4ec\nStep 4/9 : ADD package.json ./\n ---> c2f40119e94d\nStep 5/9 : RUN npm i --production\n ---> Running in 7161d50a0481\n\u001b[91mnpm WARN deprecated sequelize@5.22.5: Please update to v6 or higher! A migration guide can be found here: https://sequelize.org/v6/manual/upgrade-to-v6.html\n\u001b[0m\u001b[91mnpm WARN deprecated\u001b[0m\u001b[91m superagent@3.8.3: Please upgrade to v7.0.2+ of superagent.  We have fixed numerous issues with streams, form-data, attach(), filesystem errors not bubbling up (ENOENT on attach()), and all tests are now passing.  See the releases tab for more information at <https://github.com/visionmedia/superagent/releases>.\n\u001b[0m\u001b[91mnpm WARN \u001b[0m\u001b[91mdeprecated formidable@1.2.6: Please upgrade to latest, formidable@v2 or formidable@v3! Check these notes: https://bit.ly/2ZEqIau\n\u001b[0m\u001b[91mnpm WARN deprecated @hapi/joi@15.1.1: Switch to 'npm install joi'\n\u001b[0m\u001b[91mnpm WARN deprecated @hapi/bourne@1.3.2: This version has been deprecated and is no longer supported or maintained\n\u001b[0m\u001b[91mnpm WARN deprecated @hapi/hoek@8.5.1: This version has been deprecated and is no longer supported or maintained\n\u001b[0m\u001b[91mnpm WARN deprecated @hapi/address@2.1.4: Moved to 'npm install @sideway/address'\n\u001b[0m\u001b[91mnpm WARN deprecated @hapi/topo@3.1.6: This version has been deprecated and is no longer supported or maintained\n\u001b[0m\u001b[91mnpm WARN deprecated fsevents@1.2.13: fsevents 1 will break on node v14+ and could be using insecure binaries. Upgrade to fsevents 2.\n\u001b[0m\u001b[91mnpm WARN deprecated sane@4.1.0: some dependency vulnerabilities fixed, support for node < 10 dropped, and newer ECMAScript syntax/features added\n\u001b[0m\u001b[91mnpm WARN deprecated request-promise-native@1.0.9: request-promise-native has been deprecated because it extends the now deprecated request package, see https://github.com/request/request/issues/3142\n\u001b[0m\u001b[91mnpm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142\n\u001b[0m\u001b[91mnpm WARN deprecated w3c-hr-time@1.0.2: Use your platform's native performance.now() and performance.timeOrigin.\n\u001b[0m\u001b[91mnpm WARN deprecated left-pad@1.3.0: use String.prototype.padStart()\n\u001b[0m\u001b[91mnpm WARN deprecated source-map-resolve@0.5.3: See https://github.com/lydell/source-map-resolve#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated har-validator@5.1.5: this library is no longer supported\n\u001b[0m\u001b[91mnpm WARN deprecated uuid@3.4.0: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.\n\u001b[0m\u001b[91mnpm WARN deprecated source-map-url@0.4.1: See https://github.com/lydell/source-map-url#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated urix@0.1.0: Please see https://github.com/lydell/urix#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated resolve-url@0.2.1: https://github.com/lydell/resolve-url#deprecated\n\u001b[0m\n> es5-ext@0.10.62 postinstall /var/www/app/current/node_modules/es5-ext\n>  node -e \"try{require('./_postinstall')}catch(e){}\" || exit 0\n\n\u001b[91mnpm notice\u001b[0m\u001b[91m created a lockfile as package-lock.json. You should commit this file.\n\u001b[0m\u001b[91mnpm WARN notsup Unsupported engine for winston@3.8.2: wanted: {\"node\":\">= 12.0.0\"} (current: {\"node\":\"10.24.1\",\"npm\":\"6.14.12\"})\n\u001b[0m\u001b[91mnpm \u001b[0m\u001b[91mWARN notsup\u001b[0m\u001b[91m Not compatible with your version of node/npm: winston@3.8.2\n\u001b[0m\u001b[91mnpm WARN notsup Unsupported engine for nopt@6.0.0: wanted: {\"node\":\"^12.13.0 || ^14.15.0 || >=16.0.0\"} (current: {\"node\":\"10.24.1\",\"npm\":\"6.14.12\"})\n\u001b[0m\u001b[91mnpm WARN \u001b[0m\u001b[91mnotsup Not compatible with your version of node/npm: nopt@6.0.0\n\u001b[0m\u001b[91mnpm WARN \u001b[0m\u001b[91mnotsup Unsupported engine for glob@8.0.3: wanted: {\"node\":\">=12\"} (current: {\"node\":\"10.24.1\",\"npm\":\"6.14.12\"})\n\u001b[0m\u001b[91mnpm \u001b[0m\u001b[91mWARN notsup Not compatible with your version of node/npm: glob@8.0.3\n\u001b[0m\u001b[91mnpm WARN\u001b[0m\u001b[91m optional SKIPPING OPTIONAL DEPENDENCY: fsevents@^1.2.7 (node_modules/jest-haste-map/node_modules/fsevents):\nnpm WARN\u001b[0m\u001b[91m notsup\u001b[0m\u001b[91m SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.2.13: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91m\n\u001b[0madded 244 packages from 206 contributors and audited 1050 packages in 21.924s\n\n13 packages are looking for funding\n  run `npm fund` for details\n\nfound 15 vulnerabilities (12 moderate, 3 high)\n  run `npm audit fix` to fix them, or `npm audit` for details\nRemoving intermediate container 7161d50a0481\n ---> 990fd43c300c\nStep 6/9 : RUN npm i -g pm2\n ---> Running in 71d01d265340\n\u001b[91mnpm WARN deprecated uuid@3.4.0: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.\n\u001b[0m/usr/local/bin/pm2 -> /usr/local/lib/node_modules/pm2/bin/pm2\n/usr/local/bin/pm2-dev -> /usr/local/lib/node_modules/pm2/bin/pm2-dev\n/usr/local/bin/pm2-docker -> /usr/local/lib/node_modules/pm2/bin/pm2-docker\n/usr/local/bin/pm2-runtime -> /usr/local/lib/node_modules/pm2/bin/pm2-runtime\n\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.2 (node_modules/pm2/node_modules/chokidar/node_modules/fsevents):\nnpm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91m\n\u001b[0m+ pm2@5.2.2\nadded 184 packages from 182 contributors in 20.924s\nRemoving intermediate container 71d01d265340\n ---> e913fc366b60\nStep 7/9 : ADD . /var/www/app/current\n ---> 707bc1fe5c59\nStep 8/9 : EXPOSE 4000\n ---> Running in c78b568e7a4d\nRemoving intermediate container c78b568e7a4d\n ---> 94b4109da77a\nStep 9/9 : CMD [\"pm2\", \"start\", \"process.json\", \"--no-daemon\"]\n ---> Running in 9069c2c4ce4a\nRemoving intermediate container 9069c2c4ce4a\n ---> 10a7f54a77e7\nSuccessfully built 10a7f54a77e7\nSuccessfully tagged microservice:latest\n","stderr":"","imageSize":205104845},"repair":{"startTime":1672857108800,"endTime":1672857108911,"violations":[{"name":"npmCacheCleanAfterInstall","position":{"start":8,"end":8,"columnStart":4,"columnEnd":22}},{"name":"npmCacheCleanAfterInstall","position":{"start":11,"end":11,"columnStart":4,"columnEnd":16}}],"repairedDockerfile":"FROM node:10-alpine\n\n# Set the work directory\nRUN mkdir -p /var/www/app/current\nWORKDIR /var/www/app/current\n\n# Add our package.json and install *before* adding our application files\nADD package.json ./\nRUN npm i --production && npm cache clean --force;\n\n# Install pm2 *globally* so we can run our application\nRUN npm i -g pm2 && npm cache clean --force;\n\n# Add application files\nADD . /var/www/app/current\n\nEXPOSE 4000\n\nCMD [\"pm2\", \"start\", \"process.json\", \"--no-daemon\"]"},"repairedBuild":{"startTime":1672857109725,"endTime":1672857170457,"error":null,"stdout":"Sending build context to Docker daemon    620kB\r\r\nStep 1/9 : FROM node:10-alpine\n ---> aa67ba258e18\nStep 2/9 : RUN mkdir -p /var/www/app/current\n ---> Running in 35acbadc9ab6\nRemoving intermediate container 35acbadc9ab6\n ---> 9100863dd04a\nStep 3/9 : WORKDIR /var/www/app/current\n ---> Running in 1df98bd97a76\nRemoving intermediate container 1df98bd97a76\n ---> 371439b6e849\nStep 4/9 : ADD package.json ./\n ---> 0d03c4be0e97\nStep 5/9 : RUN npm i --production && npm cache clean --force;\n ---> Running in b14b18de485f\n\u001b[91mnpm WARN deprecated\u001b[0m\u001b[91m sequelize@5.22.5: Please update to v6 or higher! A migration guide can be found here: https://sequelize.org/v6/manual/upgrade-to-v6.html\n\u001b[0m\u001b[91mnpm WARN deprecated @hapi/joi@15.1.1: Switch to 'npm install joi'\n\u001b[0m\u001b[91mnpm WARN deprecated superagent@3.8.3: Please upgrade to v7.0.2+ of superagent.  We have fixed numerous issues with streams, form-data, attach(), filesystem errors not bubbling up (ENOENT on attach()), and all tests are now passing.  See the releases tab for more information at <https://github.com/visionmedia/superagent/releases>.\n\u001b[0m\u001b[91mnpm WARN deprecated @hapi/address@2.1.4: Moved to 'npm install @sideway/address'\n\u001b[0m\u001b[91mnpm WARN deprecated @hapi/hoek@8.5.1: This version has been deprecated and is no longer supported or maintained\n\u001b[0m\u001b[91mnpm WARN deprecated @hapi/bourne@1.3.2: This version has been deprecated and is no longer supported or maintained\n\u001b[0m\u001b[91mnpm WARN deprecated @hapi/topo@3.1.6: This version has been deprecated and is no longer supported or maintained\n\u001b[0m\u001b[91mnpm WARN deprecated formidable@1.2.6: Please upgrade to latest, formidable@v2 or formidable@v3! Check these notes: https://bit.ly/2ZEqIau\n\u001b[0m\u001b[91mnpm WARN deprecated sane@4.1.0: some dependency vulnerabilities fixed, support for node < 10 dropped, and newer ECMAScript syntax/features added\n\u001b[0m\u001b[91mnpm WARN deprecated fsevents@1.2.13: fsevents 1 will break on node v14+ and could be using insecure binaries. Upgrade to fsevents 2.\n\u001b[0m\u001b[91mnpm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142\n\u001b[0m\u001b[91mnpm WARN deprecated left-pad@1.3.0: use String.prototype.padStart()\n\u001b[0m\u001b[91mnpm WARN deprecated request-promise-native@1.0.9: request-promise-native has been deprecated because it extends the now deprecated request package, see https://github.com/request/request/issues/3142\n\u001b[0m\u001b[91mnpm WARN deprecated source-map-resolve@0.5.3: See https://github.com/lydell/source-map-resolve#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated w3c-hr-time@1.0.2: Use your platform's native performance.now() and performance.timeOrigin.\n\u001b[0m\u001b[91mnpm WARN deprecated har-validator@5.1.5: this library is no longer supported\n\u001b[0m\u001b[91mnpm WARN deprecated uuid@3.4.0: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.\n\u001b[0m\u001b[91mnpm WARN deprecated resolve-url@0.2.1: https://github.com/lydell/resolve-url#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated urix@0.1.0: Please see https://github.com/lydell/urix#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated source-map-url@0.4.1: See https://github.com/lydell/source-map-url#deprecated\n\u001b[0m\n> es5-ext@0.10.62 postinstall /var/www/app/current/node_modules/es5-ext\n>  node -e \"try{require('./_postinstall')}catch(e){}\" || exit 0\n\n\u001b[91mnpm notice created a lockfile as package-lock.json. You should commit this file.\n\u001b[0m\u001b[91mnpm WARN notsup Unsupported engine for winston@3.8.2: wanted: {\"node\":\">= 12.0.0\"} (current: {\"node\":\"10.24.1\",\"npm\":\"6.14.12\"})\nnpm WARN notsup Not compatible with your version of node/npm: winston@3.8.2\nnpm WARN notsup Unsupported engine for glob@8.0.3: wanted: {\"node\":\">=12\"} (current: {\"node\":\"10.24.1\",\"npm\":\"6.14.12\"})\nnpm WARN notsup\u001b[0m\u001b[91m Not compatible with your version of node/npm: glob@8.0.3\nnpm WARN notsup Unsupported engine for nopt@6.0.0: wanted: {\"node\":\"^12.13.0 || ^14.15.0 || >=16.0.0\"} (current: {\"node\":\"10.24.1\",\"npm\":\"6.14.12\"})\nnpm WARN notsup Not compatible with your version of node/npm: nopt@6.0.0\n\u001b[0m\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@^1.2.7 (node_modules/jest-haste-map/node_modules/fsevents):\nnpm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.2.13: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91m\n\u001b[0madded 244 packages from 206 contributors and audited 1050 packages in 20.573s\n\n13 packages are looking for funding\n  run `npm fund` for details\n\nfound 15 vulnerabilities (12 moderate, 3 high)\n  run `npm audit fix` to fix them, or `npm audit` for details\n\u001b[91mnpm WARN using --force\u001b[0m\u001b[91m I sure hope you know what you are doing.\n\u001b[0mRemoving intermediate container b14b18de485f\n ---> 0f40a90b54d4\nStep 6/9 : RUN npm i -g pm2 && npm cache clean --force;\n ---> Running in 3122b95ab063\n\u001b[91mnpm WARN deprecated uuid@3.4.0: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.\n\u001b[0m/usr/local/bin/pm2 -> /usr/local/lib/node_modules/pm2/bin/pm2\n/usr/local/bin/pm2-dev -> /usr/local/lib/node_modules/pm2/bin/pm2-dev\n/usr/local/bin/pm2-docker -> /usr/local/lib/node_modules/pm2/bin/pm2-docker\n/usr/local/bin/pm2-runtime -> /usr/local/lib/node_modules/pm2/bin/pm2-runtime\n\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.2 (node_modules/pm2/node_modules/chokidar/node_modules/fsevents):\n\u001b[0m+ pm2@5.2.2\nadded 184 packages from 182 contributors in 10.894s\n\u001b[91mnpm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\n\u001b[0m\u001b[91mnpm\u001b[0m\u001b[91m \u001b[0m\u001b[91mWARN \u001b[0m\u001b[91musing --force\u001b[0m\u001b[91m I sure hope you know what you are doing.\n\u001b[0mRemoving intermediate container 3122b95ab063\n ---> bf24efc9d527\nStep 7/9 : ADD . /var/www/app/current\n ---> f4ec1552e4b1\nStep 8/9 : EXPOSE 4000\n ---> Running in 852857ceb5f9\nRemoving intermediate container 852857ceb5f9\n ---> 4d7702f33357\nStep 9/9 : CMD [\"pm2\", \"start\", \"process.json\", \"--no-daemon\"]\n ---> Running in 432604f8d1ed\nRemoving intermediate container 432604f8d1ed\n ---> 95d1cb76d641\nSuccessfully built 95d1cb76d641\nSuccessfully tagged microservice:latest\n","stderr":"","imageSize":133074333}}