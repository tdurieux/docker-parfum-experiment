{"repository":"https://github.com/tron-us/go-btfs","dockerfilePath":"Dockerfile","startTime":1672993902701,"endTime":1672995517992,"clone":{"startTime":1672993902701,"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/tron-us/go-btfs'...\n","error":null,"endTime":1672993905370,"commit":"928f9db7ed320dd78e24e66a84d46b215207e81f"},"originalBuild":{"startTime":1672993905448,"endTime":1672994757072,"error":null,"stdout":"Sending build context to Docker daemon     29MB\r\r\nStep 1/39 : FROM golang:1.15\n1.15: Pulling from library/golang\n627b765e08d1: Pulling fs layer\nc040670e5e55: Pulling fs layer\n073a180f4992: Pulling fs layer\nbf76209566d0: Pulling fs layer\n6182a456504b: Pulling fs layer\n73e3d3d88c3c: Pulling fs layer\n5946d17734ce: Pulling fs layer\nbf76209566d0: Waiting\n6182a456504b: Waiting\n5946d17734ce: Waiting\nc040670e5e55: Verifying Checksum\nc040670e5e55: Download complete\n073a180f4992: Verifying Checksum\n073a180f4992: Download complete\n627b765e08d1: Verifying Checksum\n627b765e08d1: Download complete\n6182a456504b: Verifying Checksum\n6182a456504b: Download complete\n5946d17734ce: Download complete\n73e3d3d88c3c: Verifying Checksum\n73e3d3d88c3c: Download complete\nbf76209566d0: Verifying Checksum\nbf76209566d0: Download complete\n627b765e08d1: Pull complete\nc040670e5e55: Pull complete\n073a180f4992: Pull complete\nbf76209566d0: Pull complete\n6182a456504b: Pull complete\n73e3d3d88c3c: Pull complete\n5946d17734ce: Pull complete\nDigest: sha256:ea080cc817b02a946461d42c02891bf750e3916c52f7ea8187bccde8f312b59f\nStatus: Downloaded newer image for golang:1.15\n ---> 40349a2425ef\nStep 2/39 : MAINTAINER TRON-US <support@tron.network>\n ---> Running in b38dbd14ce9d\nRemoving intermediate container b38dbd14ce9d\n ---> 6eaba289b953\nStep 3/39 : RUN apt-get update && apt-get install -y   libssl-dev   ca-certificates   fuse\n ---> Running in 18f111792f55\nGet:1 http://deb.debian.org/debian buster InRelease [122 kB]\nGet:2 http://deb.debian.org/debian buster-updates InRelease [56.6 kB]\nGet:3 http://security.debian.org/debian-security buster/updates InRelease [34.8 kB]\nGet:4 http://deb.debian.org/debian buster/main amd64 Packages [7909 kB]\nGet:5 http://deb.debian.org/debian buster-updates/main amd64 Packages [8788 B]\nGet:6 http://security.debian.org/debian-security buster/updates/main amd64 Packages [422 kB]\nFetched 8553 kB in 2s (4385 kB/s)\nReading package lists...\nReading package lists...\nBuilding dependency tree...\nReading state information...\nca-certificates is already the newest version (20200601~deb10u2).\nThe following additional packages will be installed:\n  libfuse2 libssl1.1\nSuggested packages:\n  libssl-doc\nThe following NEW packages will be installed:\n  fuse libfuse2 libssl-dev\nThe following packages will be upgraded:\n  libssl1.1\n1 upgraded, 3 newly installed, 0 to remove and 52 not upgraded.\nNeed to get 3558 kB of archives.\nAfter this operation, 8638 kB of additional disk space will be used.\nGet:1 http://deb.debian.org/debian buster/main amd64 libfuse2 amd64 2.9.9-1+deb10u1 [128 kB]\nGet:2 http://deb.debian.org/debian buster/main amd64 fuse amd64 2.9.9-1+deb10u1 [72.3 kB]\nGet:3 http://deb.debian.org/debian buster/main amd64 libssl1.1 amd64 1.1.1n-0+deb10u3 [1551 kB]\nGet:4 http://deb.debian.org/debian buster/main amd64 libssl-dev amd64 1.1.1n-0+deb10u3 [1808 kB]\n\u001b[91mdebconf: delaying package configuration, since apt-utils is not installed\n\u001b[0mFetched 3558 kB in 0s (24.9 MB/s)\nSelecting previously unselected package libfuse2:amd64.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 15421 files and directories currently installed.)\r\nPreparing to unpack .../libfuse2_2.9.9-1+deb10u1_amd64.deb ...\r\nUnpacking libfuse2:amd64 (2.9.9-1+deb10u1) ...\r\nSelecting previously unselected package fuse.\r\nPreparing to unpack .../fuse_2.9.9-1+deb10u1_amd64.deb ...\r\nUnpacking fuse (2.9.9-1+deb10u1) ...\r\nPreparing to unpack .../libssl1.1_1.1.1n-0+deb10u3_amd64.deb ...\r\nUnpacking libssl1.1:amd64 (1.1.1n-0+deb10u3) over (1.1.1d-0+deb10u6) ...\r\nSelecting previously unselected package libssl-dev:amd64.\r\nPreparing to unpack .../libssl-dev_1.1.1n-0+deb10u3_amd64.deb ...\r\nUnpacking libssl-dev:amd64 (1.1.1n-0+deb10u3) ...\r\nSetting up libssl1.1:amd64 (1.1.1n-0+deb10u3) ...\r\ndebconf: unable to initialize frontend: Dialog\r\ndebconf: (TERM is not set, so the dialog frontend is not usable.)\r\ndebconf: falling back to frontend: Readline\r\nSetting up libfuse2:amd64 (2.9.9-1+deb10u1) ...\r\nSetting up libssl-dev:amd64 (1.1.1n-0+deb10u3) ...\r\nSetting up fuse (2.9.9-1+deb10u1) ...\r\nProcessing triggers for libc-bin (2.28-10) ...\r\nRemoving intermediate container 18f111792f55\n ---> 3c156e9e71a5\nStep 4/39 : ENV SRC_DIR /go-btfs\n ---> Running in 18230315db19\nRemoving intermediate container 18230315db19\n ---> 68493239e6df\nStep 5/39 : COPY go.mod go.sum $SRC_DIR/\n ---> f7a1062ab22e\nStep 6/39 : RUN cd $SRC_DIR   && go mod download\n ---> Running in 3aa01403d25c\nRemoving intermediate container 3aa01403d25c\n ---> bc60a8505c25\nStep 7/39 : COPY . $SRC_DIR\n ---> e2bc2a3ee83f\nStep 8/39 : ARG gitdir=.git\n ---> Running in 2ac7d500b0f3\nRemoving intermediate container 2ac7d500b0f3\n ---> 1de8801ad6b3\nStep 9/39 : RUN test -d $SRC_DIR/.git   || mv $SRC_DIR/$gitdir $SRC_DIR/.git\n ---> Running in 2988f8f6d517\nRemoving intermediate container 2988f8f6d517\n ---> 638ed4fce38a\nStep 10/39 : ARG IPFS_PLUGINS\n ---> Running in 96f067bfb095\nRemoving intermediate container 96f067bfb095\n ---> 1642cdbc4778\nStep 11/39 : RUN cd $SRC_DIR   && mkdir .git/objects   && make build GOTAGS=openssl IPFS_PLUGINS=$IPFS_PLUGINS\n ---> Running in 0fe58c6dcaaf\ngo version go1.15.15 linux/amd64\nbin/check_go_version 1.15\nplugin/loader/preload.sh > plugin/loader/preload.go\ngo fmt plugin/loader/preload.go >/dev/null\ngo build  \"-asmflags=all='-trimpath=/go'\" \"-gcflags=all='-trimpath=/go'\" -ldflags=\"-X \"github.com/TRON-US/go-btfs\".CurrentCommit=928f9db\" -tags=\"openssl\" -o \"cmd/btfs/btfs\" \"github.com/TRON-US/go-btfs/cmd/btfs\"\nRemoving intermediate container 0fe58c6dcaaf\n ---> ae0e7c3e4e76\nStep 12/39 : ENV SUEXEC_VERSION v0.2\n ---> Running in 0bd371f1b3f7\nRemoving intermediate container 0bd371f1b3f7\n ---> 2008d379d620\nStep 13/39 : ENV TINI_VERSION v0.19.0\n ---> Running in 5a780ac742b8\nRemoving intermediate container 5a780ac742b8\n ---> cac48a2880d4\nStep 14/39 : RUN set -eux;     dpkgArch=\"$(dpkg --print-architecture)\";     case \"${dpkgArch##*-}\" in         \"amd64\" | \"armhf\" | \"arm64\") tiniArch=\"tini-static-$dpkgArch\" ;;        *) echo >&2 \"unsupported architecture: ${dpkgArch}\"; exit 1 ;;     esac;   cd /tmp   && git clone https://github.com/ncopa/su-exec.git   && cd su-exec   && git checkout -q $SUEXEC_VERSION   && make su-exec-static   && cd /tmp   && wget -q -O tini https://github.com/krallin/tini/releases/download/$TINI_VERSION/$tiniArch   && chmod +x tini\n ---> Running in 8a91091d57b1\n\u001b[91m+ dpkg --print-architecture\n\u001b[0m\u001b[91m+ dpkgArch=amd64\n+ tiniArch=tini-static-amd64\n+ cd /tmp\n\u001b[0m\u001b[91m+ git clone https://github.com/ncopa/su-exec.git\n\u001b[0m\u001b[91mCloning into 'su-exec'...\n\u001b[0m\u001b[91m+ cd su-exec\n+ git\u001b[0m\u001b[91m checkout -q v0.2\n\u001b[0m\u001b[91m+ make su-exec-static\n\u001b[0mcc -Wall -Werror -g -o su-exec-static su-exec.c -static \n\u001b[91m/usr/bin/ld: /tmp/ccUShigc.o: in function `main':\n/tmp/su-exec/su-exec.c:83: warning: Using 'getgrouplist' in statically linked applications requires at runtime the\u001b[0m\u001b[91m shared libraries from the glibc version used for linking\n/usr/bin\u001b[0m\u001b[91m/ld: /tmp/su-exec/su-exec.c\u001b[0m\u001b[91m:66: \u001b[0m\u001b[91mwarning: Using 'getgrgid\u001b[0m\u001b[91m' in \u001b[0m\u001b[91mstatically linked applications requires\u001b[0m\u001b[91m at runtime the \u001b[0m\u001b[91mshared libraries from the \u001b[0m\u001b[91mglibc version \u001b[0m\u001b[91mused for \u001b[0m\u001b[91mlinking\n/usr/bin/\u001b[0m\u001b[91mld: /tmp/su-exec/su-exec.c:62: warning\u001b[0m\u001b[91m: Using 'getgrnam' in statically\u001b[0m\u001b[91m linked applications requires at\u001b[0m\u001b[91m runtime the shared libraries from\u001b[0m\u001b[91m the glibc version used for linking\n/usr\u001b[0m\u001b[91m/bin/ld: /tmp/su-exec/su-exec.c:43: warning: Using 'getpwnam' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking\n/usr/\u001b[0m\u001b[91mbin/ld: /tmp/su-exec/su-exec.c:49: warning\u001b[0m\u001b[91m: Using '\u001b[0m\u001b[91mgetpwuid' in statically linked applications requires at \u001b[0m\u001b[91mruntime the shared libraries from the \u001b[0m\u001b[91mglibc version used for linking\n\u001b[0m\u001b[91m+ cd /tmp\n\u001b[0m\u001b[91m+ wget\u001b[0m\u001b[91m -q -O\u001b[0m\u001b[91m tini https://github.com/krallin/tini/releases/download/v0.19.0/tini-static-amd64\n\u001b[0m\u001b[91m+ chmod +x tini\n\u001b[0mRemoving intermediate container 8a91091d57b1\n ---> f813941f136a\nStep 15/39 : FROM busybox:1-glibc\n1-glibc: Pulling from library/busybox\n205dae5015e7: Pulling fs layer\n205dae5015e7: Verifying Checksum\n205dae5015e7: Download complete\n205dae5015e7: Pull complete\nDigest: sha256:f2c7344e7c13f559171a602a16a49769cf524513d30379651afb5f0637cf6c27\nStatus: Downloaded newer image for busybox:1-glibc\n ---> 66ba00ad3de8\nStep 16/39 : MAINTAINER TRON-US <support@tron.network>\n ---> Running in 85409a289f9d\nRemoving intermediate container 85409a289f9d\n ---> fb85d034d869\nStep 17/39 : ENV SRC_DIR /go-btfs\n ---> Running in 94b3dfa0772f\nRemoving intermediate container 94b3dfa0772f\n ---> 862b66ad3143\nStep 18/39 : COPY --from=0 $SRC_DIR/cmd/btfs/btfs /usr/local/bin/btfs\n ---> a8d7fa58c88d\nStep 19/39 : COPY --from=0 $SRC_DIR/bin/container_daemon /usr/local/bin/start_btfs\n ---> 4786162964a3\nStep 20/39 : COPY --from=0 /tmp/su-exec/su-exec-static /sbin/su-exec\n ---> cff5759c9350\nStep 21/39 : COPY --from=0 /tmp/tini /sbin/tini\n ---> 430b8059f789\nStep 22/39 : COPY --from=0 /bin/fusermount /usr/local/bin/fusermount\n ---> 76abd130d193\nStep 23/39 : COPY --from=0 /etc/ssl/certs /etc/ssl/certs\n ---> 446c70f9eb75\nStep 24/39 : RUN chmod 4755 /usr/local/bin/fusermount\n ---> Running in c5b4b6e3dd3d\nRemoving intermediate container c5b4b6e3dd3d\n ---> 123c22bf2dc0\nStep 25/39 : RUN chmod 0755 /usr/local/bin/start_btfs\n ---> Running in d939b53f0c13\nRemoving intermediate container d939b53f0c13\n ---> bb29d24abfeb\nStep 26/39 : COPY --from=0 /lib/*-linux-gnu*/libdl.so.2 /lib/\n ---> cce059278052\nStep 27/39 : COPY --from=0 /usr/lib/*-linux-gnu*/libssl.so* /usr/lib/\n ---> dbde960fa417\nStep 28/39 : COPY --from=0 /usr/lib/*-linux-gnu*/libcrypto.so* /usr/lib/\n ---> c9db3f707d90\nStep 29/39 : EXPOSE 4001\n ---> Running in b77ad4d75463\nRemoving intermediate container b77ad4d75463\n ---> 988fae65aafc\nStep 30/39 : EXPOSE 5001\n ---> Running in 104e08ab75d7\nRemoving intermediate container 104e08ab75d7\n ---> 502f14f040b6\nStep 31/39 : EXPOSE 8080\n ---> Running in 9ad6d81e5dc5\nRemoving intermediate container 9ad6d81e5dc5\n ---> 770856e44a36\nStep 32/39 : EXPOSE 8081\n ---> Running in fb46d5debde2\nRemoving intermediate container fb46d5debde2\n ---> ecc1f4b8e9f1\nStep 33/39 : ENV BTFS_PATH /data/btfs\n ---> Running in 35c41101fdb6\nRemoving intermediate container 35c41101fdb6\n ---> a2d115321b07\nStep 34/39 : RUN mkdir -p $BTFS_PATH   && adduser -D -h $BTFS_PATH -u 1000 -G users btfs   && chown btfs:users $BTFS_PATH\n ---> Running in 7049302d939d\nRemoving intermediate container 7049302d939d\n ---> fe1c31478820\nStep 35/39 : RUN mkdir /btfs /btns   && chown btfs:users /btfs /btns\n ---> Running in 89858e39ae51\nRemoving intermediate container 89858e39ae51\n ---> 0f029b40ba30\nStep 36/39 : VOLUME $BTFS_PATH\n ---> Running in b73836845fb6\nRemoving intermediate container b73836845fb6\n ---> 6139ba61c28c\nStep 37/39 : ENV BTFS_LOGGING \"\"\n ---> Running in d90903f50c5a\nRemoving intermediate container d90903f50c5a\n ---> a1671b40f33d\nStep 38/39 : ENTRYPOINT [\"/sbin/tini\", \"--\", \"/usr/local/bin/start_btfs\"]\n ---> Running in 73f244e62fa8\nRemoving intermediate container 73f244e62fa8\n ---> 454f6abb2009\nStep 39/39 : CMD [\"daemon\", \"--migrate=true\"]\n ---> Running in b450fe63fa58\nRemoving intermediate container b450fe63fa58\n ---> cf224d1f1a0b\nSuccessfully built cf224d1f1a0b\nSuccessfully tagged go-btfs:latest\n","stderr":"","imageSize":108838822},"repair":{"startTime":1672994757147,"endTime":1672994757386,"violations":[{"name":"aptGetInstallUseNoRec","position":{"start":4,"end":7,"columnStart":22,"columnEnd":6}},{"name":"ruleAptGetInstallThenRemoveAptLists","position":{"start":4,"end":7,"columnStart":22,"columnEnd":6}}],"repairedDockerfile":"FROM golang:1.15\nMAINTAINER TRON-US <support@tron.network>\n\n# Install deps\nRUN apt-get update && apt-get install --no-install-recommends -y \\\n  libssl-dev \\\n  ca-certificates \\\n  fuse && rm -rf /var/lib/apt/lists/*;\n\nENV SRC_DIR /go-btfs\n\n# Download packages first so they can be cached.\nCOPY go.mod go.sum $SRC_DIR/\nRUN cd $SRC_DIR \\\n  && go mod download\n\nCOPY . $SRC_DIR\n\n# Newer git submodule uses \"absorbgitdirs\" option by default which does not\n# include .git folder inside a submodule.\n# Use a build time variable $gitdir to specify the location of the actual .git folder.\nARG gitdir=.git\nRUN test -d $SRC_DIR/.git \\\n  || mv $SRC_DIR/$gitdir $SRC_DIR/.git\n\n# Preload an in-tree but disabled-by-default plugin by adding it to the IPFS_PLUGINS variable\n# e.g. docker build --build-arg IPFS_PLUGINS=\"foo bar baz\"\nARG IPFS_PLUGINS\n\n# Build the thing.\n# Also: fix getting HEAD commit hash via git rev-parse.\nRUN cd $SRC_DIR \\\n  && mkdir .git/objects \\\n  && make build GOTAGS=openssl IPFS_PLUGINS=$IPFS_PLUGINS\n\n# Get su-exec, a very minimal tool for dropping privileges,\n# and tini, a very minimal init daemon for containers\nENV SUEXEC_VERSION v0.2\nENV TINI_VERSION v0.19.0\nRUN set -eux; \\\n    dpkgArch=\"$(dpkg --print-architecture)\"; \\\n    case \"${dpkgArch##*-}\" in \\\n        \"amd64\" | \"armhf\" | \"arm64\") tiniArch=\"tini-static-$dpkgArch\" ;;\\\n        *) echo >&2 \"unsupported architecture: ${dpkgArch}\"; exit 1 ;; \\\n    esac; \\\n  cd /tmp \\\n  && git clone https://github.com/ncopa/su-exec.git \\\n  && cd su-exec \\\n  && git checkout -q $SUEXEC_VERSION \\\n  && make su-exec-static \\\n  && cd /tmp \\\n  && wget -q -O tini https://github.com/krallin/tini/releases/download/$TINI_VERSION/$tiniArch \\\n  && chmod +x tini\n\n# Now comes the actual target image, which aims to be as small as possible.\nFROM busybox:1-glibc\nMAINTAINER TRON-US <support@tron.network>\n\n# Get the btfs binary, entrypoint script, and TLS CAs from the build container.\nENV SRC_DIR /go-btfs\nCOPY --from=0 $SRC_DIR/cmd/btfs/btfs /usr/local/bin/btfs\nCOPY --from=0 $SRC_DIR/bin/container_daemon /usr/local/bin/start_btfs\nCOPY --from=0 /tmp/su-exec/su-exec-static /sbin/su-exec\nCOPY --from=0 /tmp/tini /sbin/tini\nCOPY --from=0 /bin/fusermount /usr/local/bin/fusermount\nCOPY --from=0 /etc/ssl/certs /etc/ssl/certs\n\n# Add suid bit on fusermount so it will run properly\nRUN chmod 4755 /usr/local/bin/fusermount\n\n# Fix permissions on start_btfs (ignore the build machine's permissions)\nRUN chmod 0755 /usr/local/bin/start_btfs\n\n# This shared lib (part of glibc) doesn't seem to be included with busybox.\nCOPY --from=0 /lib/*-linux-gnu*/libdl.so.2 /lib/\n\n# Copy over SSL libraries.\nCOPY --from=0 /usr/lib/*-linux-gnu*/libssl.so* /usr/lib/\nCOPY --from=0 /usr/lib/*-linux-gnu*/libcrypto.so* /usr/lib/\n\n# Swarm TCP; should be exposed to the public\nEXPOSE 4001\n# Daemon API; must not be exposed publicly but to client services under you control\nEXPOSE 5001\n# Web Gateway; can be exposed publicly with a proxy, e.g. as https://ipfs.example.org\nEXPOSE 8080\n# Swarm Websockets; must be exposed publicly when the node is listening using the websocket transport (/ipX/.../tcp/8081/ws).\nEXPOSE 8081\n\n# Create the fs-repo directory and switch to a non-privileged user.\nENV BTFS_PATH /data/btfs\nRUN mkdir -p $BTFS_PATH \\\n  && adduser -D -h $BTFS_PATH -u 1000 -G users btfs \\\n  && chown btfs:users $BTFS_PATH\n\n# Create mount points for `btfs mount` command\nRUN mkdir /btfs /btns \\\n  && chown btfs:users /btfs /btns\n\n# Expose the fs-repo as a volume.\n# start_btfs initializes an fs-repo if none is mounted.\n# Important this happens after the USER directive so permission are correct.\nVOLUME $BTFS_PATH\n\n# The default logging level\nENV BTFS_LOGGING \"\"\n\n# This just makes sure that:\n# 1. There's an fs-repo, and initializes one if there isn't.\n# 2. The API and Gateway are accessible from outside the container.\nENTRYPOINT [\"/sbin/tini\", \"--\", \"/usr/local/bin/start_btfs\"]\n\n# Execute the daemon subcommand by default\nCMD [\"daemon\", \"--migrate=true\"]\n"},"repairedBuild":{"startTime":1672994757711,"endTime":1672995517595,"error":null,"stdout":"Sending build context to Docker daemon     29MB\r\r\nStep 1/39 : FROM golang:1.15\n ---> 40349a2425ef\nStep 2/39 : MAINTAINER TRON-US <support@tron.network>\n ---> Running in f933808f8ebe\nRemoving intermediate container f933808f8ebe\n ---> fc0b349d3717\nStep 3/39 : RUN apt-get update && apt-get install --no-install-recommends -y   libssl-dev   ca-certificates   fuse && rm -rf /var/lib/apt/lists/*;\n ---> Running in 9cb24ccbf47c\nGet:1 http://security.debian.org/debian-security buster/updates InRelease [34.8 kB]\nGet:2 http://deb.debian.org/debian buster InRelease [122 kB]\nGet:3 http://deb.debian.org/debian buster-updates InRelease [56.6 kB]\nGet:4 http://deb.debian.org/debian buster/main amd64 Packages [7909 kB]\nGet:5 http://security.debian.org/debian-security buster/updates/main amd64 Packages [422 kB]\nGet:6 http://deb.debian.org/debian buster-updates/main amd64 Packages [8788 B]\nFetched 8553 kB in 2s (3445 kB/s)\nReading package lists...\nReading package lists...\nBuilding dependency tree...\nReading state information...\nca-certificates is already the newest version (20200601~deb10u2).\nThe following additional packages will be installed:\n  libfuse2 libssl1.1\nSuggested packages:\n  libssl-doc\nThe following NEW packages will be installed:\n  fuse libfuse2 libssl-dev\nThe following packages will be upgraded:\n  libssl1.1\n1 upgraded, 3 newly installed, 0 to remove and 52 not upgraded.\nNeed to get 3558 kB of archives.\nAfter this operation, 8638 kB of additional disk space will be used.\nGet:1 http://deb.debian.org/debian buster/main amd64 libfuse2 amd64 2.9.9-1+deb10u1 [128 kB]\nGet:2 http://deb.debian.org/debian buster/main amd64 fuse amd64 2.9.9-1+deb10u1 [72.3 kB]\nGet:3 http://deb.debian.org/debian buster/main amd64 libssl1.1 amd64 1.1.1n-0+deb10u3 [1551 kB]\nGet:4 http://deb.debian.org/debian buster/main amd64 libssl-dev amd64 1.1.1n-0+deb10u3 [1808 kB]\n\u001b[91mdebconf: delaying package configuration, since apt-utils is not installed\n\u001b[0mFetched 3558 kB in 0s (30.4 MB/s)\nSelecting previously unselected package libfuse2:amd64.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 15421 files and directories currently installed.)\r\nPreparing to unpack .../libfuse2_2.9.9-1+deb10u1_amd64.deb ...\r\nUnpacking libfuse2:amd64 (2.9.9-1+deb10u1) ...\r\nSelecting previously unselected package fuse.\r\nPreparing to unpack .../fuse_2.9.9-1+deb10u1_amd64.deb ...\r\nUnpacking fuse (2.9.9-1+deb10u1) ...\r\nPreparing to unpack .../libssl1.1_1.1.1n-0+deb10u3_amd64.deb ...\r\nUnpacking libssl1.1:amd64 (1.1.1n-0+deb10u3) over (1.1.1d-0+deb10u6) ...\r\nSelecting previously unselected package libssl-dev:amd64.\r\nPreparing to unpack .../libssl-dev_1.1.1n-0+deb10u3_amd64.deb ...\r\nUnpacking libssl-dev:amd64 (1.1.1n-0+deb10u3) ...\r\nSetting up libssl1.1:amd64 (1.1.1n-0+deb10u3) ...\r\ndebconf: unable to initialize frontend: Dialog\r\ndebconf: (TERM is not set, so the dialog frontend is not usable.)\r\ndebconf: falling back to frontend: Readline\r\nSetting up libfuse2:amd64 (2.9.9-1+deb10u1) ...\r\nSetting up libssl-dev:amd64 (1.1.1n-0+deb10u3) ...\r\nSetting up fuse (2.9.9-1+deb10u1) ...\r\nProcessing triggers for libc-bin (2.28-10) ...\r\nRemoving intermediate container 9cb24ccbf47c\n ---> 9f34226960e9\nStep 4/39 : ENV SRC_DIR /go-btfs\n ---> Running in 6055649a54f4\nRemoving intermediate container 6055649a54f4\n ---> 379f341b56b5\nStep 5/39 : COPY go.mod go.sum $SRC_DIR/\n ---> c13e7802d98c\nStep 6/39 : RUN cd $SRC_DIR   && go mod download\n ---> Running in 40cdc505e7b1\nRemoving intermediate container 40cdc505e7b1\n ---> 5e2bcfbf8e92\nStep 7/39 : COPY . $SRC_DIR\n ---> 2a9155bd16bd\nStep 8/39 : ARG gitdir=.git\n ---> Running in b5e3ea2bac82\nRemoving intermediate container b5e3ea2bac82\n ---> bc25e8357fd9\nStep 9/39 : RUN test -d $SRC_DIR/.git   || mv $SRC_DIR/$gitdir $SRC_DIR/.git\n ---> Running in 281bd9d9861f\nRemoving intermediate container 281bd9d9861f\n ---> 6be46e90163d\nStep 10/39 : ARG IPFS_PLUGINS\n ---> Running in ec115f2c2903\nRemoving intermediate container ec115f2c2903\n ---> bc0b67094750\nStep 11/39 : RUN cd $SRC_DIR   && mkdir .git/objects   && make build GOTAGS=openssl IPFS_PLUGINS=$IPFS_PLUGINS\n ---> Running in 2e98743a927b\ngo version go1.15.15 linux/amd64\nbin/check_go_version 1.15\nplugin/loader/preload.sh > plugin/loader/preload.go\ngo fmt plugin/loader/preload.go >/dev/null\ngo build  \"-asmflags=all='-trimpath=/go'\" \"-gcflags=all='-trimpath=/go'\" -ldflags=\"-X \"github.com/TRON-US/go-btfs\".CurrentCommit=928f9db\" -tags=\"openssl\" -o \"cmd/btfs/btfs\" \"github.com/TRON-US/go-btfs/cmd/btfs\"\nRemoving intermediate container 2e98743a927b\n ---> 639ea67539a6\nStep 12/39 : ENV SUEXEC_VERSION v0.2\n ---> Running in 3e5b64d21995\nRemoving intermediate container 3e5b64d21995\n ---> 9b9fff5f3684\nStep 13/39 : ENV TINI_VERSION v0.19.0\n ---> Running in a92f4870c537\nRemoving intermediate container a92f4870c537\n ---> d349a77d610d\nStep 14/39 : RUN set -eux;     dpkgArch=\"$(dpkg --print-architecture)\";     case \"${dpkgArch##*-}\" in         \"amd64\" | \"armhf\" | \"arm64\") tiniArch=\"tini-static-$dpkgArch\" ;;        *) echo >&2 \"unsupported architecture: ${dpkgArch}\"; exit 1 ;;     esac;   cd /tmp   && git clone https://github.com/ncopa/su-exec.git   && cd su-exec   && git checkout -q $SUEXEC_VERSION   && make su-exec-static   && cd /tmp   && wget -q -O tini https://github.com/krallin/tini/releases/download/$TINI_VERSION/$tiniArch   && chmod +x tini\n ---> Running in ef191ac213a2\n\u001b[91m+ dpkg --print-architecture\n\u001b[0m\u001b[91m+ dpkgArch=amd64\n+ tiniArch=tini-static-amd64\n+ cd /tmp\n+ git clone https://github.com/ncopa/su-exec.git\n\u001b[0m\u001b[91mCloning into 'su-exec'...\n\u001b[0m\u001b[91m+ cd su-exec\n+ git checkout -q v0.2\n\u001b[0m\u001b[91m+ make su-exec-static\n\u001b[0mcc -Wall -Werror -g -o su-exec-static su-exec.c -static \n\u001b[91m/usr/bin/ld: /tmp/ccU5Ugvc.o: in function `main':\n/tmp/su-exec/su-exec.c:83: warning: Using 'getgrouplist' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking\n/usr/bin/ld: /tmp/su-exec/su-exec.c:66: warning: Using 'getgrgid' in\u001b[0m\u001b[91m statically linked applications requires at runtime the shared libraries from the glibc\u001b[0m\u001b[91m version\u001b[0m\u001b[91m used for linking\u001b[0m\u001b[91m\n/usr/\u001b[0m\u001b[91mbin/ld: /tmp/su-exec/su-exec.c:62: warning: Using 'getgrnam'\u001b[0m\u001b[91m in \u001b[0m\u001b[91mstatically linked applications \u001b[0m\u001b[91mrequires at \u001b[0m\u001b[91mruntime the \u001b[0m\u001b[91mshared libraries from\u001b[0m\u001b[91m the glibc\u001b[0m\u001b[91m version used for\u001b[0m\u001b[91m linking\u001b[0m\u001b[91m\n/usr/bin/\u001b[0m\u001b[91mld: /tmp/su-exec/su-exec.c:43: warning: Using 'getpwnam' in statically linked applications requires at runtime the shared libraries from the glibc \u001b[0m\u001b[91mversion used for linking\n/usr/bin/ld: /tmp\u001b[0m\u001b[91m/su-exec\u001b[0m\u001b[91m/su-exec.c\u001b[0m\u001b[91m:49:\u001b[0m\u001b[91m warning: Using \u001b[0m\u001b[91m'getpwuid\u001b[0m\u001b[91m' in statically linked \u001b[0m\u001b[91mapplications requires at \u001b[0m\u001b[91mruntime the shared\u001b[0m\u001b[91m libraries from \u001b[0m\u001b[91mthe glibc\u001b[0m\u001b[91m version used\u001b[0m\u001b[91m for linking\n\u001b[0m\u001b[91m+ cd /tmp\n\u001b[0m\u001b[91m+ wget -q -O\u001b[0m\u001b[91m tini https://github.com/krallin/tini/releases/download/v0.19.0/tini-static-amd64\n\u001b[0m\u001b[91m+ chmod +x tini\n\u001b[0mRemoving intermediate container ef191ac213a2\n ---> ac9149b7f1b7\nStep 15/39 : FROM busybox:1-glibc\n ---> 66ba00ad3de8\nStep 16/39 : MAINTAINER TRON-US <support@tron.network>\n ---> Running in a228bd2507e0\nRemoving intermediate container a228bd2507e0\n ---> 4240278a0969\nStep 17/39 : ENV SRC_DIR /go-btfs\n ---> Running in 916239cfee6f\nRemoving intermediate container 916239cfee6f\n ---> 8244270d6863\nStep 18/39 : COPY --from=0 $SRC_DIR/cmd/btfs/btfs /usr/local/bin/btfs\n ---> 3f5f6b324ecc\nStep 19/39 : COPY --from=0 $SRC_DIR/bin/container_daemon /usr/local/bin/start_btfs\n ---> cdda78144248\nStep 20/39 : COPY --from=0 /tmp/su-exec/su-exec-static /sbin/su-exec\n ---> 9d2011264fb0\nStep 21/39 : COPY --from=0 /tmp/tini /sbin/tini\n ---> be4563c0a5b7\nStep 22/39 : COPY --from=0 /bin/fusermount /usr/local/bin/fusermount\n ---> d7b19f350c22\nStep 23/39 : COPY --from=0 /etc/ssl/certs /etc/ssl/certs\n ---> 3018b4c839a5\nStep 24/39 : RUN chmod 4755 /usr/local/bin/fusermount\n ---> Running in d594c2b95f18\nRemoving intermediate container d594c2b95f18\n ---> ab477851f4db\nStep 25/39 : RUN chmod 0755 /usr/local/bin/start_btfs\n ---> Running in c27dfb0cc5aa\nRemoving intermediate container c27dfb0cc5aa\n ---> 0c1105fc858d\nStep 26/39 : COPY --from=0 /lib/*-linux-gnu*/libdl.so.2 /lib/\n ---> 563905835453\nStep 27/39 : COPY --from=0 /usr/lib/*-linux-gnu*/libssl.so* /usr/lib/\n ---> 0de2bd50a89e\nStep 28/39 : COPY --from=0 /usr/lib/*-linux-gnu*/libcrypto.so* /usr/lib/\n ---> 46455b6e387e\nStep 29/39 : EXPOSE 4001\n ---> Running in e5d8073581ba\nRemoving intermediate container e5d8073581ba\n ---> 87dc06f7a875\nStep 30/39 : EXPOSE 5001\n ---> Running in c8f7af10faa1\nRemoving intermediate container c8f7af10faa1\n ---> e61570514ab1\nStep 31/39 : EXPOSE 8080\n ---> Running in 4ebecbf0b4c5\nRemoving intermediate container 4ebecbf0b4c5\n ---> 50243c4ed577\nStep 32/39 : EXPOSE 8081\n ---> Running in 70e4a7addbe2\nRemoving intermediate container 70e4a7addbe2\n ---> 170be4441d9c\nStep 33/39 : ENV BTFS_PATH /data/btfs\n ---> Running in 7e50b017d779\nRemoving intermediate container 7e50b017d779\n ---> eb6e816fba3f\nStep 34/39 : RUN mkdir -p $BTFS_PATH   && adduser -D -h $BTFS_PATH -u 1000 -G users btfs   && chown btfs:users $BTFS_PATH\n ---> Running in 224c8b2511c7\nRemoving intermediate container 224c8b2511c7\n ---> 9521d04f7159\nStep 35/39 : RUN mkdir /btfs /btns   && chown btfs:users /btfs /btns\n ---> Running in d30ab84345bb\nRemoving intermediate container d30ab84345bb\n ---> 7e5f6dd8d9dd\nStep 36/39 : VOLUME $BTFS_PATH\n ---> Running in 7517a13bffee\nRemoving intermediate container 7517a13bffee\n ---> 432afb9c2948\nStep 37/39 : ENV BTFS_LOGGING \"\"\n ---> Running in 703cad958aad\nRemoving intermediate container 703cad958aad\n ---> f7dcb075c8ee\nStep 38/39 : ENTRYPOINT [\"/sbin/tini\", \"--\", \"/usr/local/bin/start_btfs\"]\n ---> Running in 8328571b5be0\nRemoving intermediate container 8328571b5be0\n ---> f0408b41e4d4\nStep 39/39 : CMD [\"daemon\", \"--migrate=true\"]\n ---> Running in 557e629b4ea0\nRemoving intermediate container 557e629b4ea0\n ---> a32c9dbf2a6b\nSuccessfully built a32c9dbf2a6b\nSuccessfully tagged go-btfs:latest\n","stderr":"","imageSize":108838822}}