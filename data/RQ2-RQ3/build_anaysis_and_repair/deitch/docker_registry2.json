{"repository":"https://github.com/deitch/docker_registry2","dockerfilePath":"Dockerfile","startTime":1672004674376,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/deitch/docker_registry2'...\n","error":null,"commit":"ced1a181c9eb2495507a36b35e594a27750ddc6c"},"originalBuild":{"startTimestamp":1672004677144,"endTimestamp":1672004722615,"error":{"code":1,"killed":false,"signal":null,"cmd":"docker build --no-cache --force-rm -t docker_registry2:latest -f /tmp/dinghy-analysis/deitch/docker_registry2/Dockerfile ."},"stdout":"Sending build context to Docker daemon  77.26MB\r\r\nStep 1/19 : ARG IMG=ruby:3.1.1-alpine\nStep 2/19 : FROM ${IMG} AS build\n3.1.1-alpine: Pulling from library/ruby\ndf9b9388f04a: Pulling fs layer\n837e9cfc7e43: Pulling fs layer\nc7850f1a8c23: Pulling fs layer\n6ca4c39baa3d: Pulling fs layer\ndaa3a8cb79d3: Pulling fs layer\n6ca4c39baa3d: Waiting\ndaa3a8cb79d3: Waiting\nc7850f1a8c23: Download complete\ndf9b9388f04a: Verifying Checksum\ndf9b9388f04a: Download complete\n837e9cfc7e43: Verifying Checksum\n837e9cfc7e43: Download complete\ndaa3a8cb79d3: Download complete\ndf9b9388f04a: Pull complete\n6ca4c39baa3d: Verifying Checksum\n6ca4c39baa3d: Download complete\n837e9cfc7e43: Pull complete\nc7850f1a8c23: Pull complete\n6ca4c39baa3d: Pull complete\ndaa3a8cb79d3: Pull complete\nDigest: sha256:bfd381d5a7bdef79830aaf264befeeea8a3830669650d3f346ef3f5834c5ecdc\nStatus: Downloaded newer image for ruby:3.1.1-alpine\n ---> 57334a38fc87\nStep 3/19 : RUN apk --update add make\n ---> Running in bca727f4df88\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/community/x86_64/APKINDEX.tar.gz\n(1/1) Installing make (4.3-r0)\nExecuting busybox-1.34.1-r5.trigger\nOK: 20 MiB in 36 packages\nRemoving intermediate container bca727f4df88\n ---> d6678edc108a\nStep 4/19 : WORKDIR /src\n ---> Running in 07f1fb713d20\nRemoving intermediate container 07f1fb713d20\n ---> ca92be974b78\nStep 5/19 : COPY Gemfile* ./\n ---> f054e120053a\nStep 6/19 : COPY . .\n ---> 54fea8d9205b\nStep 7/19 : RUN make build BUILD=local\n ---> Running in b08f19d6a01f\ngem build docker_registry2.gemspec\n\u001b[91mWARNING:  open-ended dependency on bundler (>= 0, development) is not recommended\n  use a bounded requirement, such as '~> x.y'\nWARNING:  open-ended dependency on rubocop (>= 0.26.0, development) is not recommended\n  if rubocop is semantically versioned, use:\n    add_development_dependency 'rubocop', '~> 0.26', '>= 0.26.0'\nWARNING:  open-ended dependency on webmock (>= 0, development) is not recommended\n  use a bounded requirement, such as '~> x.y'\nWARNING:  open-ended dependency on rest-client (>= 1.8.0) is not recommended\n  if rest-client is semantically versioned, use:\n    add_runtime_dependency 'rest-client', '~> 1.8', '>= 1.8.0'\n\u001b[0m\u001b[91mWARNING:  See https://guides.rubygems.org/specification-reference/ for help\n\u001b[0m  Successfully built RubyGem\n  Name: docker_registry2\n  Version: 1.13.0\n  File: docker_registry2-1.13.0.gem\nRemoving intermediate container b08f19d6a01f\n ---> 9e2d6281e9b3\nStep 8/19 : FROM ${IMG} AS test\n ---> 57334a38fc87\nStep 9/19 : RUN apk --update add make gcc g++\n ---> Running in 69a7336e8ab5\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/community/x86_64/APKINDEX.tar.gz\n(1/12) Installing binutils (2.37-r3)\n(2/12) Installing libgomp (10.3.1_git20211027-r0)\n(3/12) Installing libatomic (10.3.1_git20211027-r0)\n(4/12) Installing libgphobos (10.3.1_git20211027-r0)\n(5/12) Installing isl22 (0.22-r0)\n(6/12) Installing mpfr4 (4.1.0-r0)\n(7/12) Installing mpc1 (1.2.1-r0)\n(8/12) Installing gcc (10.3.1_git20211027-r0)\n(9/12) Installing musl-dev (1.2.2-r7)\n(10/12) Installing libc-dev (0.7.2-r3)\n(11/12) Installing g++ (10.3.1_git20211027-r0)\n(12/12) Installing make (4.3-r0)\nExecuting busybox-1.34.1-r5.trigger\nOK: 201 MiB in 47 packages\nRemoving intermediate container 69a7336e8ab5\n ---> 37f3c2ae3b51\nStep 10/19 : WORKDIR /src\n ---> Running in 977a673ec8e1\nRemoving intermediate container 977a673ec8e1\n ---> f741e5cf92f4\nStep 11/19 : COPY --from=build /src /src\n ---> d11c918c2623\nStep 12/19 : ARG registry\n ---> Running in 4272b5603d17\nRemoving intermediate container 4272b5603d17\n ---> fdbfbabab42d\nStep 13/19 : ARG cachebuster\n ---> Running in e60dad47293e\nRemoving intermediate container e60dad47293e\n ---> aac1cee1a3b1\nStep 14/19 : RUN BUILD=local TEST_REGISTRY=${registry} ./test.sh testonly\n ---> Running in 377f732b3b78\n=== Starting Tests\nFetching gem metadata from https://rubygems.org/.........\nResolving dependencies...\nFetching rake 10.5.0\nInstalling rake 10.5.0\nUsing bundler 2.3.7\nFetching regexp_parser 2.6.1\nFetching rspec-support 3.12.0\nUsing rexml 3.2.5\nFetching diff-lcs 1.5.0\nFetching http-accept 1.7.0\nFetching mime-types-data 3.2022.0105\nFetching unicode-display_width 2.3.0\nFetching vcr 6.1.0\nFetching public_suffix 5.0.1\nFetching ast 2.4.2\nFetching unf_ext 0.0.8.2\nFetching netrc 0.11.0\nFetching hashdiff 1.0.1\nFetching json 2.6.3\nFetching parallel 1.22.1\nFetching rainbow 3.1.1\nFetching ruby-progressbar 1.11.0\nFetching crack 0.4.5\nInstalling crack 0.4.5\nInstalling unicode-display_width 2.3.0\nInstalling ast 2.4.2\nInstalling netrc 0.11.0\nInstalling parallel 1.22.1\nInstalling rainbow 3.1.1\nInstalling ruby-progressbar 1.11.0\nInstalling http-accept 1.7.0\nInstalling hashdiff 1.0.1\nInstalling diff-lcs 1.5.0\nInstalling vcr 6.1.0\nInstalling regexp_parser 2.6.1\nInstalling rspec-support 3.12.0\nInstalling json 2.6.3 with native extensions\nInstalling public_suffix 5.0.1\nFetching parser 3.1.3.0\nInstalling mime-types-data 3.2022.0105\nInstalling unf_ext 0.0.8.2 with native extensions\nFetching rspec-core 3.12.0\nInstalling rspec-core 3.12.0\nFetching rspec-mocks 3.12.1\nFetching rspec-expectations 3.12.1\nFetching addressable 2.8.1\nInstalling rspec-expectations 3.12.1\nInstalling rspec-mocks 3.12.1\nFetching mime-types 3.4.1\nInstalling addressable 2.8.1\nInstalling parser 3.1.3.0\nInstalling mime-types 3.4.1\nFetching webmock 3.18.1\nInstalling webmock 3.18.1\nFetching rspec 3.12.0\nInstalling rspec 3.12.0\nFetching rubocop-ast 1.24.0\nInstalling rubocop-ast 1.24.0\nFetching unf 0.1.4\nInstalling unf 0.1.4\nFetching domain_name 0.5.20190701\nInstalling domain_name 0.5.20190701\nFetching http-cookie 1.0.5\nInstalling http-cookie 1.0.5\nFetching rest-client 2.1.0\nInstalling rest-client 2.1.0\nUsing docker_registry2 1.13.0 from source at `.`\nFetching rubocop 1.41.1\nInstalling rubocop 1.41.1\nBundle complete! 7 Gemfile dependencies, 35 gems now installed.\nUse `bundle info [gemname]` to see where a bundled gem is installed.\n=== v1 --- OUTPUT\n\u001b[91m/usr/local/lib/ruby/3.1.0/socket.rb:1214:in `__connect_nonblock': Failed to open TCP connection to localhost:5000 (Address not available - connect(2) for [::1]:5000) (Errno::EADDRNOTAVAIL)\n\tfrom /usr/local/lib/ruby/3.1.0/socket.rb:1214:in `connect_nonblock'\n\tfrom /usr/local/lib/ruby/3.1.0/socket.rb:56:in `connect_internal'\n\tfrom /usr/local/lib/ruby/3.1.0/socket.rb:137:in `connect'\n\tfrom /usr/local/lib/ruby/3.1.0/socket.rb:642:in `block in tcp'\n\tfrom /usr/local/lib/ruby/3.1.0/socket.rb:227:in `each'\n\tfrom /usr/local/lib/ruby/3.1.0/socket.rb:227:in `foreach'\n\tfrom /usr/local/lib/ruby/3.1.0/socket.rb:632:in `tcp'\n\tfrom /usr/local/lib/ruby/3.1.0/net/http.rb:998:in `connect'\n\tfrom /usr/local/lib/ruby/3.1.0/net/http.rb:976:in `do_start'\n\tfrom /usr/local/lib/ruby/3.1.0/net/http.rb:965:in `start'\n\tfrom /usr/local/bundle/gems/rest-client-2.1.0/lib/restclient/request.rb:727:in `transmit'\n\tfrom /usr/local/bundle/gems/rest-client-2.1.0/lib/restclient/request.rb:163:in `execute'\n\tfrom /usr/local/bundle/gems/rest-client-2.1.0/lib/restclient/request.rb:63:in `execute'\n\tfrom /src/lib/registry/registry.rb:282:in `doreq'\n\tfrom /src/lib/registry/registry.rb:29:in `doget'\n\tfrom /src/lib/registry/registry.rb:82:in `tags'\n\tfrom ./test/test.rb:20:in `<main>'\n/usr/local/lib/ruby/3.1.0/socket.rb:1214:in `__connect_nonblock': Address not available - connect(2) for [::1]:5000 (Errno::EADDRNOTAVAIL)\n\tfrom /usr/local/lib/ruby/3.1.0/socket.rb:1214:in `connect_nonblock'\n\tfrom /usr/local/lib/ruby/3.1.0/socket.rb:56:in `connect_internal'\n\tfrom /usr/local/lib/ruby/3.1.0/socket.rb:137:in `connect'\n\tfrom /usr/local/lib/ruby/3.1.0/socket.rb:642:in `block in tcp'\n\tfrom /usr/local/lib/ruby/3.1.0/socket.rb:227:in `each'\n\tfrom /usr/local/lib/ruby/3.1.0/socket.rb:227:in `foreach'\n\tfrom /usr/local/lib/ruby/3.1.0/socket.rb:632:in `tcp'\n\tfrom /usr/local/lib/ruby/3.1.0/net/http.rb:998:in `connect'\n\tfrom /usr/local/lib/ruby/3.1.0/net/http.rb:976:in `do_start'\n\tfrom /usr/local/lib/ruby/3.1.0/net/http.rb:965:in `start'\n\tfrom /usr/local/bundle/gems/rest-client-2.1.0/lib/restclient/request.rb:727:in `transmit'\n\tfrom /usr/local/bundle/gems/rest-client-2.1.0/lib/restclient/request.rb:163:in `execute'\n\tfrom /usr/local/bundle/gems/rest-client-2.1.0/lib/restclient/request.rb:63:in `execute'\n\tfrom /src/lib/registry/registry.rb:282:in `doreq'\n\tfrom /src/lib/registry/registry.rb:29:in `doget'\n\tfrom /src/lib/registry/registry.rb:82:in `tags'\n\tfrom ./test/test.rb:20:in `<main>'\n\u001b[0mError during V1 test\n=== v2 --- OUTPUT\n\u001b[91m/usr/local/lib/ruby/3.1.0/socket.rb:1214:in `__connect_nonblock': Failed to open TCP connection to localhost:5000 (Address not available - connect(2) for [::1]:5000) (Errno::EADDRNOTAVAIL)\n\tfrom /usr/local/lib/ruby/3.1.0/socket.rb:1214:in `connect_nonblock'\n\tfrom /usr/local/lib/ruby/3.1.0/socket.rb:56:in `connect_internal'\n\tfrom /usr/local/lib/ruby/3.1.0/socket.rb:137:in `connect'\n\tfrom /usr/local/lib/ruby/3.1.0/socket.rb:642:in `block in tcp'\n\tfrom /usr/local/lib/ruby/3.1.0/socket.rb:227:in `each'\n\tfrom /usr/local/lib/ruby/3.1.0/socket.rb:227:in `foreach'\n\tfrom /usr/local/lib/ruby/3.1.0/socket.rb:632:in `tcp'\n\tfrom /usr/local/lib/ruby/3.1.0/net/http.rb:998:in `connect'\n\tfrom /usr/local/lib/ruby/3.1.0/net/http.rb:976:in `do_start'\n\tfrom /usr/local/lib/ruby/3.1.0/net/http.rb:965:in `start'\n\tfrom /usr/local/bundle/gems/rest-client-2.1.0/lib/restclient/request.rb:727:in `transmit'\n\tfrom /usr/local/bundle/gems/rest-client-2.1.0/lib/restclient/request.rb:163:in `execute'\n\tfrom /usr/local/bundle/gems/rest-client-2.1.0/lib/restclient/request.rb:63:in `execute'\n\tfrom /src/lib/registry/registry.rb:282:in `doreq'\n\tfrom /src/lib/registry/registry.rb:29:in `doget'\n\tfrom /src/lib/registry/registry.rb:82:in `tags'\n\tfrom ./test/test.rb:20:in `<main>'\n/usr/local/lib/ruby/3.1.0/socket.rb:1214:in `__connect_nonblock': Address not available - connect(2) for [::1]:5000 (Errno::EADDRNOTAVAIL)\n\tfrom /usr/local/lib/ruby/3.1.0/socket.rb:1214:in `connect_nonblock'\n\tfrom /usr/local/lib/ruby/3.1.0/socket.rb:56:in `connect_internal'\n\tfrom /usr/local/lib/ruby/3.1.0/socket.rb:137:in `connect'\n\tfrom /usr/local/lib/ruby/3.1.0/socket.rb:642:in `block in tcp'\n\tfrom /usr/local/lib/ruby/3.1.0/socket.rb:227:in `each'\n\tfrom /usr/local/lib/ruby/3.1.0/socket.rb:227:in `foreach'\n\tfrom /usr/local/lib/ruby/3.1.0/socket.rb:632:in `tcp'\n\tfrom /usr/local/lib/ruby/3.1.0/net/http.rb:998:in `connect'\n\tfrom /usr/local/lib/ruby/3.1.0/net/http.rb:976:in `do_start'\n\tfrom /usr/local/lib/ruby/3.1.0/net/http.rb:965:in `start'\n\tfrom /usr/local/bundle/gems/rest-client-2.1.0/lib/restclient/request.rb:727:in `transmit'\n\tfrom /usr/local/bundle/gems/rest-client-2.1.0/lib/restclient/request.rb:163:in `execute'\n\tfrom /usr/local/bundle/gems/rest-client-2.1.0/lib/restclient/request.rb:63:in `execute'\n\tfrom /src/lib/registry/registry.rb:282:in `doreq'\n\tfrom /src/lib/registry/registry.rb:29:in `doget'\n\tfrom /src/lib/registry/registry.rb:82:in `tags'\n\tfrom ./test/test.rb:20:in `<main>'\n\u001b[0mError during V2 test\n=== Tests Complete\nRemoving intermediate container 377f732b3b78\n","stderr":"The command '/bin/sh -c BUILD=local TEST_REGISTRY=${registry} ./test.sh testonly' returned a non-zero code: 1\n"},"endTime":1672004722695}