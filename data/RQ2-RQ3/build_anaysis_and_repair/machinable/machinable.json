{"repository":"https://github.com/machinable/machinable","dockerfilePath":"Dockerfile","startTime":1673182193948,"endTime":1673182270738,"clone":{"startTime":1673182193949,"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/machinable/machinable'...\n","error":null,"endTime":1673182195016,"commit":"cbce8849678bf4f015a3ed6f23b605db435b0939"},"originalBuild":{"startTime":1673182195109,"endTime":1673182239440,"error":null,"stdout":"Sending build context to Docker daemon  1.472MB\r\r\nStep 1/14 : FROM golang:alpine as builder\n ---> cae57157ceaa\nStep 2/14 : ENV GO111MODULE=on\n ---> Running in 47a0ccc8bb74\nRemoving intermediate container 47a0ccc8bb74\n ---> cf8f119c5e60\nStep 3/14 : RUN apk add --update gcc musl-dev\n ---> Running in 1e74c68d7fe3\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/11) Installing libgcc (12.2.1_git20220924-r4)\n(2/11) Installing libstdc++ (12.2.1_git20220924-r4)\n(3/11) Installing binutils (2.39-r2)\n(4/11) Installing libgomp (12.2.1_git20220924-r4)\n(5/11) Installing libatomic (12.2.1_git20220924-r4)\n(6/11) Installing gmp (6.2.1-r2)\n(7/11) Installing isl25 (0.25-r0)\n(8/11) Installing mpfr4 (4.1.0-r0)\n(9/11) Installing mpc1 (1.2.1-r1)\n(10/11) Installing gcc (12.2.1_git20220924-r4)\n(11/11) Installing musl-dev (1.2.3-r4)\nExecuting busybox-1.35.0-r29.trigger\nOK: 152 MiB in 27 packages\nRemoving intermediate container 1e74c68d7fe3\n ---> 9cfb898b9527\nStep 4/14 : ENV SRC_DIR=${HOME}/go/src/github.com/machinable/machinable/\n ---> Running in 45425290b22d\nRemoving intermediate container 45425290b22d\n ---> 9531021c4c9b\nStep 5/14 : ADD . $SRC_DIR\n ---> 2618d1a6f4d1\nStep 6/14 : RUN cd $SRC_DIR;    apk add --no-cache git;    go build -o api;\n ---> Running in 10b7c02e24e4\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/6) Installing brotli-libs (1.0.9-r9)\n(2/6) Installing nghttp2-libs (1.51.0-r0)\n(3/6) Installing libcurl (7.87.0-r0)\n(4/6) Installing libexpat (2.5.0-r0)\n(5/6) Installing pcre2 (10.42-r0)\n(6/6) Installing git (2.38.2-r0)\nExecuting busybox-1.35.0-r29.trigger\nOK: 161 MiB in 33 packages\n\u001b[91mgo: downloading github.com/go-redis/redis v6.15.6+incompatible\n\u001b[0m\u001b[91mgo: downloading github.com/gin-gonic/gin v0.0.0-20181213032017-f67d7a90c4d2\n\u001b[0m\u001b[91mgo: downloading github.com/lib/pq v1.3.0\n\u001b[0m\u001b[91mgo: downloading github.com/satori/go.uuid v1.2.0\ngo: downloading github.com/dgrijalva/jwt-go v0.0.0-20180921172315-3af4c746e1c2\n\u001b[0m\u001b[91mgo: downloading golang.org/x/crypto v0.0.0-20181203042331-505ab145d0a9\n\u001b[0m\u001b[91mgo: downloading github.com/go-openapi/strfmt v0.18.0\n\u001b[0m\u001b[91mgo: downloading github.com/go-openapi/spec v0.18.0\n\u001b[0m\u001b[91mgo: downloading github.com/mssola/user_agent v0.0.0-20181123121328-68da1a75e397\n\u001b[0m\u001b[91mgo: downloading github.com/go-openapi/validate v0.18.0\n\u001b[0m\u001b[91mgo: downloading github.com/asaskevich/govalidator v0.0.0-20180720115003-f9ffefc3facf\ngo: downloading github.com/globalsign/mgo v0.0.0-20181015135952-eeefdecb41b8\ngo: downloading github.com/mailru/easyjson v0.0.0-20180823135443-60711f1a8329\n\u001b[0m\u001b[91mgo: downloading github.com/go-openapi/errors v0.17.0\ngo: downloading github.com/mitchellh/mapstructure v1.1.2\n\u001b[0m\u001b[91mgo: downloading github.com/gin-contrib/sse v0.0.0-20170109093832-22d885f9ecc7\n\u001b[0m\u001b[91mgo: downloading github.com/mattn/go-isatty v0.0.4\n\u001b[0m\u001b[91mgo: downloading gopkg.in/yaml.v2 v2.2.4\ngo: downloading github.com/ugorji/go v1.1.1\n\u001b[0m\u001b[91mgo: downloading gopkg.in/go-playground/validator.v8 v8.18.2\n\u001b[0m\u001b[91mgo: downloading github.com/golang/protobuf v1.2.0\n\u001b[0m\u001b[91mgo: downloading github.com/go-openapi/swag v0.17.0\ngo: downloading github.com/go-openapi/jsonpointer v0.17.0\ngo: downloading github.com/go-openapi/jsonreference v0.17.0\n\u001b[0m\u001b[91mgo: downloading github.com/PuerkitoBio/purell v1.1.0\n\u001b[0m\u001b[91mgo: downloading golang.org/x/text v0.3.0\ngo: downloading github.com/PuerkitoBio/urlesc v0.0.0-20170810143723-de5bf2ad4578\ngo: downloading golang.org/x/net v0.0.0-20181213202711-891ebc4b82d6\n\u001b[0m\u001b[91mgo: downloading github.com/go-openapi/runtime v0.0.0-20180920151709-4f900dc2ade9\n\u001b[0m\u001b[91mgo: downloading github.com/go-openapi/analysis v0.17.0\n\u001b[0m\u001b[91mgo: downloading github.com/go-openapi/loads v0.17.0\n\u001b[0mRemoving intermediate container 10b7c02e24e4\n ---> 444fc4d0117f\nStep 7/14 : ENTRYPOINT [\"/go/src/github.com/machinable/machinable/api\"]\n ---> Running in 6e79552e5355\nRemoving intermediate container 6e79552e5355\n ---> c4d674f648a4\nStep 8/14 : FROM alpine:3.7\n3.7: Pulling from library/alpine\n5d20c808ce19: Pulling fs layer\n5d20c808ce19: Verifying Checksum\n5d20c808ce19: Download complete\n5d20c808ce19: Pull complete\nDigest: sha256:8421d9a84432575381bfabd248f1eb56f3aa21d9d7cd2511583c68c9b7511d10\nStatus: Downloaded newer image for alpine:3.7\n ---> 6d1ef012b567\nStep 9/14 : ARG VERSION=latest\n ---> Running in d963fe5dd5f9\nRemoving intermediate container d963fe5dd5f9\n ---> 8caf2cf76874\nStep 10/14 : ENV VERSION=${VERSION}\n ---> Running in ffc1f6cdefcd\nRemoving intermediate container ffc1f6cdefcd\n ---> 7e0e73266590\nStep 11/14 : RUN apk add --no-cache ca-certificates\n ---> Running in 3c15b2be380a\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.7/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.7/community/x86_64/APKINDEX.tar.gz\n(1/1) Installing ca-certificates (20190108-r0)\nExecuting busybox-1.27.2-r11.trigger\nExecuting ca-certificates-20190108-r0.trigger\nOK: 5 MiB in 14 packages\nRemoving intermediate container 3c15b2be380a\n ---> eb83592ce898\nStep 12/14 : ENV GIN_MODE=release\n ---> Running in 4042ab3ecbbc\nRemoving intermediate container 4042ab3ecbbc\n ---> ab4a6efc9603\nStep 13/14 : COPY --from=builder /go/src/github.com/machinable/machinable/api /bin/api\n ---> b74864de4a5b\nStep 14/14 : ENTRYPOINT [\"/bin/api\"]\n ---> Running in ba9f8af98795\nRemoving intermediate container ba9f8af98795\n ---> 08b6d1cb8eec\nSuccessfully built 08b6d1cb8eec\nSuccessfully tagged machinable:latest\n","stderr":"","imageSize":19533452},"repair":{"startTime":1673182239506,"endTime":1673182239562,"violations":[{"name":"apkAddUseNoCache","position":{"start":6,"end":6,"columnStart":4,"columnEnd":33}}],"repairedDockerfile":"# golang:alpine is the alpine image with the go tools added.. manually add git\nFROM golang:alpine as builder\n\nENV GO111MODULE=on\n\n# install gcc for compilation\nRUN apk add --no-cache --update gcc musl-dev\n# Set an env var that matches github repo name\n# ENV CGO_ENABLED=0\nENV SRC_DIR=${HOME}/go/src/github.com/machinable/machinable/\n\n# Add the source code:\nADD . $SRC_DIR\n\n# Build it:\n# NOTE - dependencies will need to be in the vendor directory before building this image\nRUN cd $SRC_DIR;\\\n    apk add --no-cache git;\\\n    go build -o api;\n\nENTRYPOINT [\"/go/src/github.com/machinable/machinable/api\"]\n\n# alpine production environment\n# copy binary for smallest image size\nFROM alpine:3.7\n\nARG VERSION=latest\nENV VERSION=${VERSION}\n\nRUN apk add --no-cache ca-certificates\n\nENV GIN_MODE=release\n\nCOPY --from=builder /go/src/github.com/machinable/machinable/api /bin/api\n\nENTRYPOINT [\"/bin/api\"]\n"},"repairedBuild":{"startTime":1673182239723,"endTime":1673182270491,"error":null,"stdout":"Sending build context to Docker daemon  1.472MB\r\r\nStep 1/14 : FROM golang:alpine as builder\n ---> cae57157ceaa\nStep 2/14 : ENV GO111MODULE=on\n ---> Running in 57233f86bbd3\nRemoving intermediate container 57233f86bbd3\n ---> 8b365727be24\nStep 3/14 : RUN apk add --no-cache --update gcc musl-dev\n ---> Running in ebf548ad9153\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/11) Installing libgcc (12.2.1_git20220924-r4)\n(2/11) Installing libstdc++ (12.2.1_git20220924-r4)\n(3/11) Installing binutils (2.39-r2)\n(4/11) Installing libgomp (12.2.1_git20220924-r4)\n(5/11) Installing libatomic (12.2.1_git20220924-r4)\n(6/11) Installing gmp (6.2.1-r2)\n(7/11) Installing isl25 (0.25-r0)\n(8/11) Installing mpfr4 (4.1.0-r0)\n(9/11) Installing mpc1 (1.2.1-r1)\n(10/11) Installing gcc (12.2.1_git20220924-r4)\n(11/11) Installing musl-dev (1.2.3-r4)\nExecuting busybox-1.35.0-r29.trigger\nOK: 152 MiB in 27 packages\nRemoving intermediate container ebf548ad9153\n ---> 0303908f14cb\nStep 4/14 : ENV SRC_DIR=${HOME}/go/src/github.com/machinable/machinable/\n ---> Running in 2f0d3edcf42c\nRemoving intermediate container 2f0d3edcf42c\n ---> 065efebafa89\nStep 5/14 : ADD . $SRC_DIR\n ---> 6266af8b4d68\nStep 6/14 : RUN cd $SRC_DIR;    apk add --no-cache git;    go build -o api;\n ---> Running in 1cbc887db8e7\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/6) Installing brotli-libs (1.0.9-r9)\n(2/6) Installing nghttp2-libs (1.51.0-r0)\n(3/6) Installing libcurl (7.87.0-r0)\n(4/6) Installing libexpat (2.5.0-r0)\n(5/6) Installing pcre2 (10.42-r0)\n(6/6) Installing git (2.38.2-r0)\nExecuting busybox-1.35.0-r29.trigger\nOK: 161 MiB in 33 packages\n\u001b[91mgo: downloading github.com/go-redis/redis v6.15.6+incompatible\n\u001b[0m\u001b[91mgo: downloading github.com/gin-gonic/gin v0.0.0-20181213032017-f67d7a90c4d2\n\u001b[0m\u001b[91mgo: downloading github.com/dgrijalva/jwt-go v0.0.0-20180921172315-3af4c746e1c2\n\u001b[0m\u001b[91mgo: downloading github.com/satori/go.uuid v1.2.0\n\u001b[0m\u001b[91mgo: downloading github.com/mssola/user_agent v0.0.0-20181123121328-68da1a75e397\n\u001b[0m\u001b[91mgo: downloading github.com/lib/pq v1.3.0\n\u001b[0m\u001b[91mgo: downloading github.com/go-openapi/validate v0.18.0\n\u001b[0m\u001b[91mgo: downloading github.com/go-openapi/spec v0.18.0\ngo: downloading github.com/go-openapi/strfmt v0.18.0\n\u001b[0m\u001b[91mgo: downloading golang.org/x/crypto v0.0.0-20181203042331-505ab145d0a9\n\u001b[0m\u001b[91mgo: downloading github.com/asaskevich/govalidator v0.0.0-20180720115003-f9ffefc3facf\ngo: downloading github.com/globalsign/mgo v0.0.0-20181015135952-eeefdecb41b8\ngo: downloading github.com/mailru/easyjson v0.0.0-20180823135443-60711f1a8329\n\u001b[0m\u001b[91mgo: downloading github.com/mitchellh/mapstructure v1.1.2\n\u001b[0m\u001b[91mgo: downloading github.com/go-openapi/errors v0.17.0\n\u001b[0m\u001b[91mgo: downloading github.com/go-openapi/swag v0.17.0\ngo: downloading github.com/go-openapi/jsonpointer v0.17.0\ngo: downloading github.com/go-openapi/jsonreference v0.17.0\n\u001b[0m\u001b[91mgo: downloading github.com/gin-contrib/sse v0.0.0-20170109093832-22d885f9ecc7\ngo: downloading github.com/mattn/go-isatty v0.0.4\n\u001b[0m\u001b[91mgo: downloading github.com/golang/protobuf v1.2.0\n\u001b[0m\u001b[91mgo: downloading github.com/ugorji/go v1.1.1\n\u001b[0m\u001b[91mgo: downloading gopkg.in/go-playground/validator.v8 v8.18.2\n\u001b[0m\u001b[91mgo: downloading gopkg.in/yaml.v2 v2.2.4\n\u001b[0m\u001b[91mgo: downloading github.com/PuerkitoBio/purell v1.1.0\n\u001b[0m\u001b[91mgo: downloading golang.org/x/text v0.3.0\n\u001b[0m\u001b[91mgo: downloading github.com/PuerkitoBio/urlesc v0.0.0-20170810143723-de5bf2ad4578\n\u001b[0m\u001b[91mgo: downloading golang.org/x/net v0.0.0-20181213202711-891ebc4b82d6\n\u001b[0m\u001b[91mgo: downloading github.com/go-openapi/runtime v0.0.0-20180920151709-4f900dc2ade9\ngo: downloading github.com/go-openapi/loads v0.17.0\n\u001b[0m\u001b[91mgo: downloading github.com/go-openapi/analysis v0.17.0\n\u001b[0mRemoving intermediate container 1cbc887db8e7\n ---> 51e9156bc822\nStep 7/14 : ENTRYPOINT [\"/go/src/github.com/machinable/machinable/api\"]\n ---> Running in 0721fc1d77b4\nRemoving intermediate container 0721fc1d77b4\n ---> 0eab986c3fc7\nStep 8/14 : FROM alpine:3.7\n ---> 6d1ef012b567\nStep 9/14 : ARG VERSION=latest\n ---> Running in d1c68809f8f8\nRemoving intermediate container d1c68809f8f8\n ---> 15139f6d2bdf\nStep 10/14 : ENV VERSION=${VERSION}\n ---> Running in 0d4669df1475\nRemoving intermediate container 0d4669df1475\n ---> dab1f1102068\nStep 11/14 : RUN apk add --no-cache ca-certificates\n ---> Running in ca30fc170e54\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.7/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.7/community/x86_64/APKINDEX.tar.gz\n(1/1) Installing ca-certificates (20190108-r0)\nExecuting busybox-1.27.2-r11.trigger\nExecuting ca-certificates-20190108-r0.trigger\nOK: 5 MiB in 14 packages\nRemoving intermediate container ca30fc170e54\n ---> f308cf263158\nStep 12/14 : ENV GIN_MODE=release\n ---> Running in 7b2f554fab37\nRemoving intermediate container 7b2f554fab37\n ---> 889b20f6f0f9\nStep 13/14 : COPY --from=builder /go/src/github.com/machinable/machinable/api /bin/api\n ---> 322ca26fd991\nStep 14/14 : ENTRYPOINT [\"/bin/api\"]\n ---> Running in 78193084782e\nRemoving intermediate container 78193084782e\n ---> 24785f74d6b3\nSuccessfully built 24785f74d6b3\nSuccessfully tagged machinable:latest\n","stderr":"","imageSize":19533452}}