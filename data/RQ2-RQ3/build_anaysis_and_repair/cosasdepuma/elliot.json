{"repository":"https://github.com/cosasdepuma/elliot","dockerfilePath":"Dockerfile","startTime":1672970266367,"endTime":1672970320036,"clone":{"startTime":1672970266367,"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/cosasdepuma/elliot'...\n","error":null,"endTime":1672970267554,"commit":"772ba88fb3d292e77753a5adf99a878473353717"},"originalBuild":{"startTime":1672970267643,"endTime":1672970297982,"error":null,"stdout":"Sending build context to Docker daemon  7.198MB\r\r\nStep 1/15 : FROM golang:alpine AS build\n ---> cae57157ceaa\nStep 2/15 : WORKDIR /go/src/app\n ---> Running in 8ef6267cfa97\nRemoving intermediate container 8ef6267cfa97\n ---> c7be0ab1fa5b\nStep 3/15 : COPY . /go/src/app\n ---> 5b6f49f8b14b\nStep 4/15 : RUN sed -i 's/^const Host = .*$/const Host = \"0.0.0.0\"/g' /go/src/app/pkg/config/config.go &&     sed -i 's/^const Port = .*$/const Port = 8008/g' /go/src/app/pkg/config/config.go &&     sed -i 's/^const DBPass = .*$/const DBPass = \"d0cK3r\"/g' /go/src/app/pkg/config/config.go\n ---> Running in 3636bf820e2e\nRemoving intermediate container 3636bf820e2e\n ---> 915556c94db9\nStep 5/15 : RUN apk update &&     apk add --no-cache --upgrade --virtual .requirements build-base &&     CGO_ENABLED=1 go build -v -o elliot main.go &&     apk del .requirements\n ---> Running in f78dd0c6e83d\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\nv3.17.0-332-g13963e2526 [https://dl-cdn.alpinelinux.org/alpine/v3.17/main]\nv3.17.0-333-g9ec020d7a6 [https://dl-cdn.alpinelinux.org/alpine/v3.17/community]\nOK: 17816 distinct packages available\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/21) Installing libgcc (12.2.1_git20220924-r4)\n(2/21) Installing libstdc++ (12.2.1_git20220924-r4)\n(3/21) Installing binutils (2.39-r2)\n(4/21) Installing libmagic (5.43-r0)\n(5/21) Installing file (5.43-r0)\n(6/21) Installing libgomp (12.2.1_git20220924-r4)\n(7/21) Installing libatomic (12.2.1_git20220924-r4)\n(8/21) Installing gmp (6.2.1-r2)\n(9/21) Installing isl25 (0.25-r0)\n(10/21) Installing mpfr4 (4.1.0-r0)\n(11/21) Installing mpc1 (1.2.1-r1)\n(12/21) Installing gcc (12.2.1_git20220924-r4)\n(13/21) Installing libstdc++-dev (12.2.1_git20220924-r4)\n(14/21) Installing musl-dev (1.2.3-r4)\n(15/21) Installing libc-dev (0.7.2-r3)\n(16/21) Installing g++ (12.2.1_git20220924-r4)\n(17/21) Installing make (4.3-r1)\n(18/21) Installing fortify-headers (1.1-r1)\n(19/21) Installing patch (2.7.6-r8)\n(20/21) Installing build-base (0.5-r3)\n(21/21) Installing .requirements (20230106.015754)\nExecuting busybox-1.35.0-r29.trigger\nOK: 245 MiB in 37 packages\n\u001b[91mgo: downloading github.com/gorilla/mux v1.7.4\n\u001b[0m\u001b[91mgo: downloading github.com/go-redis/redis v6.15.8+incompatible\n\u001b[0m\u001b[91mgithub.com/cosasdepuma/elliot/pkg/config\n\u001b[0m\u001b[91mgithub.com/go-redis/redis/internal/util\ngithub.com/go-redis/redis/internal/consistenthash\n\u001b[0m\u001b[91mgithub.com/go-redis/redis/internal/hashtag\n\u001b[0m\u001b[91mgithub.com/cosasdepuma/elliot/pkg/utils\n\u001b[0m\u001b[91mgithub.com/cosasdepuma/elliot/pkg/templates\n\u001b[0m\u001b[91mgithub.com/go-redis/redis/internal/proto\n\u001b[0m\u001b[91mgithub.com/cosasdepuma/elliot/pkg/server\n\u001b[0m\u001b[91mgithub.com/gorilla/mux\n\u001b[0m\u001b[91mgithub.com/go-redis/redis/internal\n\u001b[0m\u001b[91mgithub.com/go-redis/redis/internal/pool\n\u001b[0m\u001b[91mgithub.com/go-redis/redis\n\u001b[0m\u001b[91mgithub.com/cosasdepuma/elliot/pkg/database\n\u001b[0m\u001b[91mgithub.com/cosasdepuma/elliot/pkg/modules\n\u001b[0m\u001b[91mgithub.com/cosasdepuma/elliot/pkg/app\n\u001b[0m\u001b[91mcommand-line-arguments\n\u001b[0m(1/21) Purging .requirements (20230106.015754)\n(2/21) Purging build-base (0.5-r3)\n(3/21) Purging file (5.43-r0)\n(4/21) Purging g++ (12.2.1_git20220924-r4)\n(5/21) Purging libstdc++-dev (12.2.1_git20220924-r4)\n(6/21) Purging gcc (12.2.1_git20220924-r4)\n(7/21) Purging binutils (2.39-r2)\n(8/21) Purging libatomic (12.2.1_git20220924-r4)\n(9/21) Purging libgomp (12.2.1_git20220924-r4)\n(10/21) Purging make (4.3-r1)\n(11/21) Purging libc-dev (0.7.2-r3)\n(12/21) Purging musl-dev (1.2.3-r4)\n(13/21) Purging fortify-headers (1.1-r1)\n(14/21) Purging patch (2.7.6-r8)\n(15/21) Purging libstdc++ (12.2.1_git20220924-r4)\n(16/21) Purging libgcc (12.2.1_git20220924-r4)\n(17/21) Purging libmagic (5.43-r0)\n(18/21) Purging isl25 (0.25-r0)\n(19/21) Purging mpc1 (1.2.1-r1)\n(20/21) Purging mpfr4 (4.1.0-r0)\n(21/21) Purging gmp (6.2.1-r2)\nExecuting busybox-1.35.0-r29.trigger\nOK: 8 MiB in 16 packages\nRemoving intermediate container f78dd0c6e83d\n ---> 8839bd9576f6\nStep 6/15 : FROM alpine\nlatest: Pulling from library/alpine\nc158987b0551: Already exists\nDigest: sha256:8914eb54f968791faf6a8638949e480fef81e697984fba772b3976835194c6d4\nStatus: Downloaded newer image for alpine:latest\n ---> 49176f190c7e\nStep 7/15 : ENV REDISPASS foobar\n ---> Running in 2fda5b5ab834\nRemoving intermediate container 2fda5b5ab834\n ---> 05507eee0072\nStep 8/15 : RUN apk update &&     apk add redis &&     sed -i 's/^# requirepass .*$/requirepass d0ck3r/g' /etc/redis.conf\n ---> Running in 4f4117573eef\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\nv3.17.0-332-g13963e2526 [https://dl-cdn.alpinelinux.org/alpine/v3.17/main]\nv3.17.0-333-g9ec020d7a6 [https://dl-cdn.alpinelinux.org/alpine/v3.17/community]\nOK: 17815 distinct packages available\n(1/1) Installing redis (7.0.7-r0)\nExecuting redis-7.0.7-r0.pre-install\nExecuting redis-7.0.7-r0.post-install\nExecuting busybox-1.35.0-r29.trigger\nOK: 10 MiB in 16 packages\nRemoving intermediate container 4f4117573eef\n ---> 76c00721ee7c\nStep 9/15 : RUN addgroup -S elliot && adduser -s /sbin/nologin -S elliot -G elliot\n ---> Running in 486ccb9237dd\nRemoving intermediate container 486ccb9237dd\n ---> bb6536838865\nStep 10/15 : USER elliot\n ---> Running in a183bbe08c62\nRemoving intermediate container a183bbe08c62\n ---> d94e9f43dde6\nStep 11/15 : WORKDIR /app\n ---> Running in 5fa750ade9ef\nRemoving intermediate container 5fa750ade9ef\n ---> eb9701482ec5\nStep 12/15 : COPY --from=build /go/src/app/elliot /bin/elliot\n ---> b1aebac013dc\nStep 13/15 : COPY --from=build /go/src/app/frontend /app/frontend\n ---> 183e275ec0b0\nStep 14/15 : EXPOSE 8008\n ---> Running in fad0989aee0c\nRemoving intermediate container fad0989aee0c\n ---> db3e85e5f835\nStep 15/15 : CMD [\"/bin/elliot\"]\n ---> Running in 4bc246b2a53c\nRemoving intermediate container 4bc246b2a53c\n ---> 10f1bd1bfdb1\nSuccessfully built 10f1bd1bfdb1\nSuccessfully tagged elliot:latest\n","stderr":"","imageSize":25699067},"repair":{"startTime":1672970298048,"endTime":1672970298171,"violations":[{"name":"apkAddUseNoCache","position":{"start":26,"end":26,"columnStart":4,"columnEnd":17}}],"repairedDockerfile":"# Build:\n#    docker build -t cosasdepuma/elliot .\n# Run:\n#    sudo docker run -d -p 8008:8008 --name elliot cosasdepuma/elliot\n\nFROM golang:alpine AS build\n\nWORKDIR /go/src/app\nCOPY . /go/src/app\n\nRUN sed -i 's/^const Host = .*$/const Host = \"0.0.0.0\"/g' /go/src/app/pkg/config/config.go && \\\n    sed -i 's/^const Port = .*$/const Port = 8008/g' /go/src/app/pkg/config/config.go && \\\n    sed -i 's/^const DBPass = .*$/const DBPass = \"d0cK3r\"/g' /go/src/app/pkg/config/config.go\n\nRUN apk update && \\\n    apk add --no-cache --upgrade --virtual .requirements build-base && \\\n    CGO_ENABLED=1 go build -v -o elliot main.go && \\\n    apk del .requirements\n\n# ================================\n\nFROM alpine\n\nENV REDISPASS foobar\n\nRUN apk update && \\\n    apk add --no-cache redis && \\\n    sed -i 's/^# requirepass .*$/requirepass d0ck3r/g' /etc/redis.conf\n\nRUN addgroup -S elliot && adduser -s /sbin/nologin -S elliot -G elliot\nUSER elliot\n\nWORKDIR /app\nCOPY --from=build /go/src/app/elliot /bin/elliot\nCOPY --from=build /go/src/app/frontend /app/frontend\n\nEXPOSE 8008\n\nCMD [\"/bin/elliot\"]"},"repairedBuild":{"startTime":1672970298326,"endTime":1672970319793,"error":null,"stdout":"Sending build context to Docker daemon  7.198MB\r\r\nStep 1/15 : FROM golang:alpine AS build\n ---> cae57157ceaa\nStep 2/15 : WORKDIR /go/src/app\n ---> Running in 0b25644c7c2b\nRemoving intermediate container 0b25644c7c2b\n ---> 5f898bc25fbe\nStep 3/15 : COPY . /go/src/app\n ---> 437943102377\nStep 4/15 : RUN sed -i 's/^const Host = .*$/const Host = \"0.0.0.0\"/g' /go/src/app/pkg/config/config.go &&     sed -i 's/^const Port = .*$/const Port = 8008/g' /go/src/app/pkg/config/config.go &&     sed -i 's/^const DBPass = .*$/const DBPass = \"d0cK3r\"/g' /go/src/app/pkg/config/config.go\n ---> Running in 83fefe8cb614\nRemoving intermediate container 83fefe8cb614\n ---> e7861fcefb61\nStep 5/15 : RUN apk update &&     apk add --no-cache --upgrade --virtual .requirements build-base &&     CGO_ENABLED=1 go build -v -o elliot main.go &&     apk del .requirements\n ---> Running in 5cc588b1a217\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\nv3.17.0-332-g13963e2526 [https://dl-cdn.alpinelinux.org/alpine/v3.17/main]\nv3.17.0-333-g9ec020d7a6 [https://dl-cdn.alpinelinux.org/alpine/v3.17/community]\nOK: 17816 distinct packages available\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/21) Installing libgcc (12.2.1_git20220924-r4)\n(2/21) Installing libstdc++ (12.2.1_git20220924-r4)\n(3/21) Installing binutils (2.39-r2)\n(4/21) Installing libmagic (5.43-r0)\n(5/21) Installing file (5.43-r0)\n(6/21) Installing libgomp (12.2.1_git20220924-r4)\n(7/21) Installing libatomic (12.2.1_git20220924-r4)\n(8/21) Installing gmp (6.2.1-r2)\n(9/21) Installing isl25 (0.25-r0)\n(10/21) Installing mpfr4 (4.1.0-r0)\n(11/21) Installing mpc1 (1.2.1-r1)\n(12/21) Installing gcc (12.2.1_git20220924-r4)\n(13/21) Installing libstdc++-dev (12.2.1_git20220924-r4)\n(14/21) Installing musl-dev (1.2.3-r4)\n(15/21) Installing libc-dev (0.7.2-r3)\n(16/21) Installing g++ (12.2.1_git20220924-r4)\n(17/21) Installing make (4.3-r1)\n(18/21) Installing fortify-headers (1.1-r1)\n(19/21) Installing patch (2.7.6-r8)\n(20/21) Installing build-base (0.5-r3)\n(21/21) Installing .requirements (20230106.015822)\nExecuting busybox-1.35.0-r29.trigger\nOK: 245 MiB in 37 packages\n\u001b[91mgo: downloading github.com/gorilla/mux v1.7.4\n\u001b[0m\u001b[91mgo: downloading github.com/go-redis/redis v6.15.8+incompatible\n\u001b[0m\u001b[91mgithub.com/cosasdepuma/elliot/pkg/config\n\u001b[0m\u001b[91mgithub.com/go-redis/redis/internal/hashtag\ngithub.com/go-redis/redis/internal/util\ngithub.com/go-redis/redis/internal/consistenthash\n\u001b[0m\u001b[91mgithub.com/cosasdepuma/elliot/pkg/utils\n\u001b[0m\u001b[91mgithub.com/cosasdepuma/elliot/pkg/templates\n\u001b[0m\u001b[91mgithub.com/go-redis/redis/internal/proto\n\u001b[0m\u001b[91mgithub.com/cosasdepuma/elliot/pkg/server\n\u001b[0m\u001b[91mgithub.com/gorilla/mux\n\u001b[0m\u001b[91mgithub.com/go-redis/redis/internal\n\u001b[0m\u001b[91mgithub.com/go-redis/redis/internal/pool\n\u001b[0m\u001b[91mgithub.com/go-redis/redis\n\u001b[0m\u001b[91mgithub.com/cosasdepuma/elliot/pkg/database\n\u001b[0m\u001b[91mgithub.com/cosasdepuma/elliot/pkg/modules\n\u001b[0m\u001b[91mgithub.com/cosasdepuma/elliot/pkg/app\n\u001b[0m\u001b[91mcommand-line-arguments\n\u001b[0m(1/21) Purging .requirements (20230106.015822)\n(2/21) Purging build-base (0.5-r3)\n(3/21) Purging file (5.43-r0)\n(4/21) Purging g++ (12.2.1_git20220924-r4)\n(5/21) Purging libstdc++-dev (12.2.1_git20220924-r4)\n(6/21) Purging gcc (12.2.1_git20220924-r4)\n(7/21) Purging binutils (2.39-r2)\n(8/21) Purging libatomic (12.2.1_git20220924-r4)\n(9/21) Purging libgomp (12.2.1_git20220924-r4)\n(10/21) Purging make (4.3-r1)\n(11/21) Purging libc-dev (0.7.2-r3)\n(12/21) Purging musl-dev (1.2.3-r4)\n(13/21) Purging fortify-headers (1.1-r1)\n(14/21) Purging patch (2.7.6-r8)\n(15/21) Purging libstdc++ (12.2.1_git20220924-r4)\n(16/21) Purging libgcc (12.2.1_git20220924-r4)\n(17/21) Purging libmagic (5.43-r0)\n(18/21) Purging isl25 (0.25-r0)\n(19/21) Purging mpc1 (1.2.1-r1)\n(20/21) Purging mpfr4 (4.1.0-r0)\n(21/21) Purging gmp (6.2.1-r2)\nExecuting busybox-1.35.0-r29.trigger\nOK: 8 MiB in 16 packages\nRemoving intermediate container 5cc588b1a217\n ---> 3a205ad42735\nStep 6/15 : FROM alpine\n ---> 49176f190c7e\nStep 7/15 : ENV REDISPASS foobar\n ---> Running in b50e6b87ee5b\nRemoving intermediate container b50e6b87ee5b\n ---> fda0f1a08d76\nStep 8/15 : RUN apk update &&     apk add --no-cache redis &&     sed -i 's/^# requirepass .*$/requirepass d0ck3r/g' /etc/redis.conf\n ---> Running in 3c1c0533c25d\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\nv3.17.0-332-g13963e2526 [https://dl-cdn.alpinelinux.org/alpine/v3.17/main]\nv3.17.0-333-g9ec020d7a6 [https://dl-cdn.alpinelinux.org/alpine/v3.17/community]\nOK: 17815 distinct packages available\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/1) Installing redis (7.0.7-r0)\nExecuting redis-7.0.7-r0.pre-install\nExecuting redis-7.0.7-r0.post-install\nExecuting busybox-1.35.0-r29.trigger\nOK: 10 MiB in 16 packages\nRemoving intermediate container 3c1c0533c25d\n ---> 3e64ad2d138d\nStep 9/15 : RUN addgroup -S elliot && adduser -s /sbin/nologin -S elliot -G elliot\n ---> Running in ff15330edf34\nRemoving intermediate container ff15330edf34\n ---> 1be61d0fac9d\nStep 10/15 : USER elliot\n ---> Running in 238b7d8e192a\nRemoving intermediate container 238b7d8e192a\n ---> ba80c92eebfb\nStep 11/15 : WORKDIR /app\n ---> Running in 2ed0c5abefcf\nRemoving intermediate container 2ed0c5abefcf\n ---> 4b73c4e2cce9\nStep 12/15 : COPY --from=build /go/src/app/elliot /bin/elliot\n ---> d4901abf596e\nStep 13/15 : COPY --from=build /go/src/app/frontend /app/frontend\n ---> a09c5e77ee12\nStep 14/15 : EXPOSE 8008\n ---> Running in d1c15e6f1fd9\nRemoving intermediate container d1c15e6f1fd9\n ---> d98517e2e916\nStep 15/15 : CMD [\"/bin/elliot\"]\n ---> Running in eb1cb639e9a4\nRemoving intermediate container eb1cb639e9a4\n ---> 0239b92e77d5\nSuccessfully built 0239b92e77d5\nSuccessfully tagged elliot:latest\n","stderr":"","imageSize":25699067}}