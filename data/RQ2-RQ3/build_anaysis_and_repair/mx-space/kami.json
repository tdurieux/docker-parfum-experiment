{"repository":"https://github.com/mx-space/kami","dockerfilePath":"Dockerfile","startTime":1672200332966,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/mx-space/kami'...\n","error":null,"commit":"54700c710a7754491a3074254e07be24d9bad1f9"},"originalBuild":{"startTimestamp":1672200333988,"endTimestamp":1672200555256,"error":null,"stdout":"Sending build context to Docker daemon  2.216MB\r\r\nStep 1/30 : FROM node:18-alpine AS deps\n18-alpine: Pulling from library/node\nDigest: sha256:a136ed7b0df71082cdb171f36d640ea3b392a5c70401c642326acee767b8c540\nStatus: Downloaded newer image for node:18-alpine\n ---> 6d7b7852bcd3\nStep 2/30 : RUN apk add --no-cache libc6-compat\n ---> Running in 6164fb09a0c5\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/1) Installing libc6-compat (1.2.3-r4)\nOK: 10 MiB in 18 packages\nRemoving intermediate container 6164fb09a0c5\n ---> cb1a70323213\nStep 3/30 : WORKDIR /app\n ---> Running in 6c077cbf9e8e\nRemoving intermediate container 6c077cbf9e8e\n ---> 8b402c3a9138\nStep 4/30 : COPY package.json pnpm-lock.yaml ./\n ---> 0f45ed4285a1\nStep 5/30 : RUN npm i -g pnpm\n ---> Running in d929659d111a\n\nadded 1 package, and audited 2 packages in 707ms\n\n1 package is looking for funding\n  run `npm fund` for details\n\nfound 0 vulnerabilities\n\u001b[91mnpm\u001b[0m\u001b[91m notice \nnpm notice New major version of npm available! 8.19.2 -> 9.2.0\nnpm\u001b[0m\u001b[91m notice\u001b[0m\u001b[91m Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm notice Run `npm install -g npm@9.2.0` to update!\nnpm notice \n\u001b[0mRemoving intermediate container d929659d111a\n ---> 0c5168925b2d\nStep 6/30 : RUN pnpm install\n ---> Running in f99740528990\nLockfile is up to date, resolution step is skipped\nProgress: resolved 1, reused 0, downloaded 0, added 0\nPackages: +653\n++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++\nPackages are hard linked from the content-addressable store to the virtual store.\n  Content-addressable store is at: /root/.local/share/pnpm/store/v3\n  Virtual store is at:             node_modules/.pnpm\nProgress: resolved 653, reused 0, downloaded 20, added 17\nProgress: resolved 653, reused 0, downloaded 60, added 60\nProgress: resolved 653, reused 0, downloaded 133, added 128\nProgress: resolved 653, reused 0, downloaded 263, added 262\nProgress: resolved 653, reused 0, downloaded 366, added 367\nProgress: resolved 653, reused 0, downloaded 468, added 466\nProgress: resolved 653, reused 0, downloaded 606, added 604\nProgress: resolved 653, reused 0, downloaded 647, added 648\nProgress: resolved 653, reused 0, downloaded 648, added 649\nProgress: resolved 653, reused 0, downloaded 650, added 651\nProgress: resolved 653, reused 0, downloaded 652, added 651\nProgress: resolved 653, reused 0, downloaded 652, added 652\n\ndependencies:\n+ @floating-ui/react-dom 1.0.1\n+ @formkit/auto-animate 1.0.0-beta.5\n+ @mx-space/api-client 1.0.3\n+ axios 0.27.2\n+ clsx 1.2.1\n+ css-spring 4.1.0\n+ dayjs 1.11.7\n+ devtools-detector 2.0.14\n+ js-cookie 3.0.1\n+ lodash-es 4.17.21\n+ markdown-escape 2.0.0\n+ markdown-to-jsx <- @innei/markdown-to-jsx 7.1.3-beta.2\n+ medium-zoom 1.0.8\n+ mobx 6.7.0\n+ mobx-react-lite 3.4.0\n+ next 13.1.0\n+ next-seo 5.15.0\n+ next-suspense 0.1.3\n+ randomcolor 0.6.2\n+ react 18.2.0\n+ react-collapse 5.1.1\n+ react-countup 6.4.0\n+ react-dom 18.2.0\n+ react-intersection-observer 9.4.1\n+ react-masonry-css 1.0.16\n+ react-message-popup 1.0.0\n+ react-shortcut-guide 1.0.0-alpha.0\n+ react-smooth-number-counter 0.0.5\n+ react-toastify 9.1.1\n+ react-transition-group 4.4.5\n+ react-use 17.4.0\n+ remove-markdown 0.5.0\n+ socket.io-client 4.5.4\n+ swr 2.0.0\n+ validator 13.7.0\n\ndevDependencies:\n+ @innei/eslint-config-react-ts 0.9.6\n+ @innei/prettier 0.9.6\n+ @next/bundle-analyzer 13.0.7\n+ @trivago/prettier-plugin-sort-imports 4.0.0\n+ @types/inflection 1.13.0\n+ @types/js-cookie 3.0.2\n+ @types/lodash-es 4.17.6\n+ @types/markdown-escape 1.1.0\n+ @types/node 17.0.18\n+ @types/randomcolor 0.5.7\n+ @types/react 17.0.52\n+ @types/react-collapse 5.0.1\n+ @types/react-color 3.0.6\n+ @types/react-dom 18.0.10\n+ @types/react-transition-group 4.4.5\n+ @types/remove-markdown 0.3.1\n+ @types/ua-parser-js 0.7.36\n+ @types/validator 13.7.10\n+ cross-env 7.0.3\n+ dotenv 16.0.3\n+ eslint 8.30.0\n+ husky 8.0.2\n+ js-yaml 4.1.0\n+ lint-staged 13.1.0\n+ next-compose-plugins 2.2.1\n+ postcss 8.4.20\n+ postcss-import 15.1.0\n+ postcss-nested 6.0.0\n+ postcss-preset-env 7.8.3\n+ prettier 2.8.1\n+ rimraf 3.0.2\n+ stylelint 14.16.0\n+ stylelint-config-standard 29.0.0\n+ tilg 0.1.1\n+ typescript 4.9.4\n+ windicss 3.5.6\n+ windicss-webpack-plugin 1.7.7\n+ zx 7.1.1\n\nDone in 13.9s\nProgress: resolved 653, reused 0, downloaded 652, added 653, done\nRemoving intermediate container f99740528990\n ---> f804e3f27008\nStep 7/30 : FROM node:18-alpine AS builder\n ---> 6d7b7852bcd3\nStep 8/30 : WORKDIR /app\n ---> Running in 58bdf4709a4b\nRemoving intermediate container 58bdf4709a4b\n ---> ec420e04affa\nStep 9/30 : COPY --from=deps /app/node_modules ./node_modules\n ---> fecb6fd1d9c8\nStep 10/30 : COPY . .\n ---> 5ab3d704aa49\nStep 11/30 : RUN npm run build\n ---> Running in dbd9473798dd\n\n> mx-kami@4.0.6 prebuild\n> rimraf .next\n\n\n> mx-kami@4.0.6 build\n> cross-env NODE_ENV=production next build\n\n\u001b[91mwarn  - Invalid next.config.js options detected: \n\u001b[0m\u001b[91m  - The root value has an unexpected property, webpackDevMiddleware, which is not in the list of allowed properties (amp, analyticsId, assetPrefix, basePath, cleanDistDir, compiler, compress, crossOrigin, devIndicators, distDir, env, eslint, excludeDefaultMomentLocales, experimental, exportPathMap, generateBuildId, generateEtags, headers, httpAgentOptions, i18n, images, modularizeImports, onDemandEntries, optimizeFonts, output, outputFileTracing, pageExtensions, poweredByHeader, productionBrowserSourceMaps, publicRuntimeConfig, reactStrictMode, redirects, rewrites, sassOptions, serverRuntimeConfig, skipMiddlewareUrlNormalize, skipTrailingSlashRedirect, staticPageGenerationTimeout, swcMinify, trailingSlash, transpilePackages, typescript, useFileSystemPublicRoutes, webpack).\n  - The root value has an unexpected property, configOrigin, which is not in the list of allowed properties (amp, analyticsId, assetPrefix, basePath, cleanDistDir, compiler, compress, crossOrigin, devIndicators, distDir, env, eslint, excludeDefaultMomentLocales, experimental, exportPathMap, generateBuildId, generateEtags, headers, httpAgentOptions, i18n, images, modularizeImports, onDemandEntries, optimizeFonts, output, outputFileTracing, pageExtensions, poweredByHeader, productionBrowserSourceMaps, publicRuntimeConfig, reactStrictMode, redirects, rewrites, sassOptions, serverRuntimeConfig, skipMiddlewareUrlNormalize, skipTrailingSlashRedirect, staticPageGenerationTimeout, swcMinify, trailingSlash, transpilePackages, typescript, useFileSystemPublicRoutes, webpack).\n  - The root value has an unexpected property, target, which is not in the list of allowed properties (amp, analyticsId, assetPrefix, basePath, cleanDistDir, compiler, compress, crossOrigin, devIndicators, distDir, env, eslint, excludeDefaultMomentLocales, experimental, exportPathMap, generateBuildId, generateEtags, headers, httpAgentOptions, i18n, images, modularizeImports, onDemandEntries, optimizeFonts, output, outputFileTracing, pageExtensions, poweredByHeader, productionBrowserSourceMaps, publicRuntimeConfig, reactStrictMode, redirects, rewrites, sassOptions, serverRuntimeConfig, skipMiddlewareUrlNormalize, skipTrailingSlashRedirect, staticPageGenerationTimeout, swcMinify, trailingSlash, transpilePackages, typescript, useFileSystemPublicRoutes, webpack).\n  - The value at .amp.canonicalBase must be 1 character or more but it was 0 characters.\n  - The value at .experimental has an unexpected property, browsersListForSwc, which is not in the list of allowed properties (adjustFontFallbacks, adjustFontFallbacksWithSizeAdjust, amp, cpus, craCompat, disableOptimizedLoading, disablePostcssPresetEnv, esmExternals, appDir, externalDir, fallbackNodePolyfills, fetchCache, forceSwcTransforms, fullySpecified, gzipSize, incrementalCacheHandlerPath, isrFlushToDisk, isrMemoryCacheSize, largePageDataBytes, legacyBrowsers, manualClientBasePath, middlewarePrefetch, newNextLinkBehavior, nextScriptWorkers, optimizeCss, optimisticClientCache, outputFileTracingRoot, outputFileTracingIgnores, pageEnv, profiling, proxyTimeout, runtime, serverComponentsExternalPackages, scrollRestoration, sharedPool, sri, swcFileReading, swcMinify, swcMinifyDebugOptions, swcPlugins, swcTraceProfiling, urlImports, enableUndici, workerThreads, fontLoaders, webVitalsAttribution, mdxRs, turbotrace).\n\u001b[0m\u001b[91m  - The value at .i18n must be an object but it was null.\n  - The value at .images.loaderFile must be 1 character or more but it was 0 characters.\n\u001b[0m\u001b[91m  - The value at .reactStrictMode must be a boolean but it was null.\n\u001b[0m\u001b[91m\nSee more info here: https://nextjs.org/docs/messages/invalid-next-config\n\u001b[0m\u001b[91mwarn  - You have enabled experimental features (scrollRestoration, browsersListForSwc) in next.config.js.\nwarn  - Experimental features are not covered by semver, and may cause unexpected or broken application behavior. Use at your own risk.\n\u001b[0m\u001b[91m\n\u001b[0mAttention: Next.js now collects completely anonymous telemetry regarding usage.\nThis information is used to shape Next.js' roadmap and prioritize features.\nYou can learn more, including how to opt-out if you'd not like to participate in this anonymous program, by visiting the following URL:\nhttps://nextjs.org/telemetry\n\ninfo  - Skipping linting\ninfo  - Checking validity of types...\ninfo  - Creating an optimized production build...\nwarn - 'lightBlue' has been renamed to 'sky'.\nwarn - Please update your color palette to eliminate this warning.\ninfo  - Compiled successfully\ninfo  - Collecting page data...\n\u001b[91mWarning: You have opted-out of Automatic Static Optimization due to `getInitialProps` in `pages/_app`. This does not opt-out pages with `getStaticProps`\nRead more: https://nextjs.org/docs/messages/opt-out-auto-static-optimization\n\n\u001b[0mRoute (pages)                              Size     First Load JS\n┌ λ /                                      21.3 kB         214 kB\n├   └ css/5224c95ff4b4e7e8.css             2.52 kB\n├   /_app                                  0 B             170 kB\n├ λ /[page]                                2.63 kB         212 kB\n├   └ css/33b5b5c20d57c24c.css             2.33 kB\n├ λ /404                                   732 B           171 kB\n├ λ /categories/[slug]                     3.03 kB         178 kB\n├   └ css/91cc48b80caf79e1.css             530 B\n├ λ /favorite/bangumi                      3.26 kB         177 kB\n├   └ css/c3b28723297eae48.css             904 B\n├ λ /favorite/music                        4.21 kB         174 kB\n├   └ css/8f384601bb06c352.css             767 B\n├ λ /friends                               13.1 kB         220 kB\n├   └ css/83ef02fae72d729a.css             3.1 kB\n├ λ /login                                 4.83 kB         175 kB\n├   └ css/54769b01dea78f90.css             592 B\n├ λ /notes                                 350 B           170 kB\n├ λ /notes/[id]                            12.6 kB         234 kB\n├   └ css/7bc7b80184f4e22f.css             3.22 kB\n├ λ /notes/topics                          2.78 kB         175 kB\n├   └ css/a902966e9c491ea4.css             230 B\n├ λ /notes/topics/[topicSlug]              9.3 kB          184 kB\n├   └ css/98625d77d5c2c11c.css             1.12 kB\n├ λ /posts                                 15.5 kB         195 kB\n├   └ css/5ae5337cc3c80130.css             1.76 kB\n├ λ /posts/[category]/[slug]               8.42 kB         230 kB\n├   └ css/4e53ab42de822c10.css             2.93 kB\n├ λ /projects                              9.52 kB         185 kB\n├   └ css/b46103ca99566147.css             782 B\n├ λ /projects/[id]                         2.36 kB         209 kB\n├   └ css/8bee50d9b6e135d4.css             2.38 kB\n├ λ /recently                              42.7 kB         261 kB\n├   └ css/ffce607d0d351f71.css             3.97 kB\n├ λ /says                                  13.8 kB         184 kB\n├   └ css/96e69637cf74f13e.css             286 B\n└ λ /timeline                              11.3 kB         186 kB\n    └ css/13b3ec3ca1bbc644.css             619 B\n+ First Load JS shared by all              181 kB\n  ├ chunks/framework-46bf5f4dbbcb148c.js   45.4 kB\n  ├ chunks/main-1a42daccd459e33d.js        31 kB\n  ├ chunks/pages/_app-4d9e3e28f91194e6.js  90.2 kB\n  ├ chunks/webpack-67d157365fe65c84.js     3.16 kB\n  └ css/c2feb51214c42977.css               10.9 kB\n\nλ  (Server)  server-side renders at runtime (uses getInitialProps or getServerSideProps)\n\n\u001b[91mnpm\u001b[0m\u001b[91m notice\u001b[0m\u001b[91m \nnpm\u001b[0m\u001b[91m notice\u001b[0m\u001b[91m New major version of npm available! 8.19.2 -> 9.2.0\nnpm\u001b[0m\u001b[91m notice\u001b[0m\u001b[91m Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm\u001b[0m\u001b[91m notice\u001b[0m\u001b[91m Run `npm install -g npm@9.2.0` to update!\n\u001b[0m\u001b[91mnpm\u001b[0m\u001b[91m notice \n\u001b[0mRemoving intermediate container dbd9473798dd\n ---> 11b144b4aab5\nStep 12/30 : FROM node:18-alpine AS runner\n ---> 6d7b7852bcd3\nStep 13/30 : WORKDIR /app\n ---> Running in 5bdc2c24917d\nRemoving intermediate container 5bdc2c24917d\n ---> df75832b6e61\nStep 14/30 : ENV NODE_ENV production\n ---> Running in 8b2dfec213ee\nRemoving intermediate container 8b2dfec213ee\n ---> 563290844eb6\nStep 15/30 : ARG BASE_URL\n ---> Running in 7ee933a773e8\nRemoving intermediate container 7ee933a773e8\n ---> 560299a35b2b\nStep 16/30 : ENV BASE_URL=${BASE_URL}\n ---> Running in b251d6798012\nRemoving intermediate container b251d6798012\n ---> 20bb2f3a8dda\nStep 17/30 : ENV NEXT_PUBLIC_API_URL=${BASE_URL}/api/v2\n ---> Running in 0638e0f592f7\nRemoving intermediate container 0638e0f592f7\n ---> 4b94a8c9c2c0\nStep 18/30 : ENV NEXT_PUBLIC_GATEWAY_URL=${BASE_URL}\n ---> Running in 4b8f82ed7244\nRemoving intermediate container 4b8f82ed7244\n ---> 329bf6354b76\nStep 19/30 : RUN node -e \"console.log(process.env)\"\n ---> Running in 393b62017862\n{\n  BASE_URL: '',\n  NODE_VERSION: '18.12.1',\n  HOSTNAME: '393b62017862',\n  YARN_VERSION: '1.22.19',\n  SHLVL: '1',\n  HOME: '/root',\n  PATH: '/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin',\n  NEXT_PUBLIC_API_URL: '/api/v2',\n  NEXT_PUBLIC_GATEWAY_URL: '',\n  PWD: '/app',\n  NODE_ENV: 'production'\n}\nRemoving intermediate container 393b62017862\n ---> ac8e4b7d30db\nStep 20/30 : RUN addgroup --system --gid 1001 nodejs\n ---> Running in 1595f8d452bf\nRemoving intermediate container 1595f8d452bf\n ---> 311759f80fbc\nStep 21/30 : RUN adduser --system --uid 1001 nextjs\n ---> Running in 0313d7565359\nRemoving intermediate container 0313d7565359\n ---> 12cf6580adc6\nStep 22/30 : COPY --from=builder /app/next.config.js ./\n ---> 0cf634d95a62\nStep 23/30 : COPY --from=builder /app/public ./public\n ---> e043d3108436\nStep 24/30 : COPY --from=builder /app/package.json ./package.json\n ---> 07c4031125e2\nStep 25/30 : COPY --from=builder --chown=nextjs:nodejs /app/.next/standalone ./\n ---> 53b93a11c572\nStep 26/30 : COPY --from=builder --chown=nextjs:nodejs /app/.next/static ./.next/static\n ---> 8eee75f14e4c\nStep 27/30 : USER nextjs\n ---> Running in 65903f6c139e\nRemoving intermediate container 65903f6c139e\n ---> 2115a5b8e6ef\nStep 28/30 : EXPOSE 2323\n ---> Running in 8fe51ed8655b\nRemoving intermediate container 8fe51ed8655b\n ---> b8fbf4953e8e\nStep 29/30 : ENV PORT 2323\n ---> Running in 415c32f6d4ef\nRemoving intermediate container 415c32f6d4ef\n ---> 7a341027f9dd\nStep 30/30 : CMD echo \"Mix Space Web [Kami] Image.\" && node server.js\n ---> Running in cf87bcddfd9c\nRemoving intermediate container cf87bcddfd9c\n ---> 2bfe5a49dd30\nSuccessfully built 2bfe5a49dd30\nSuccessfully tagged kami:latest\n","stderr":"","imageSize":188076511},"repair":{"violations":[{"name":"npmCacheCleanAfterInstall","position":{"start":6,"end":6,"columnStart":4,"columnEnd":17}}],"repairedDockerfile":"# Install dependencies only when needed\nFROM node:18-alpine AS deps\n# Check https://github.com/nodejs/docker-node/tree/b4117f9333da4138b03a546ec926ef50a31506c3#nodealpine to understand why libc6-compat might be needed.\nRUN apk add --no-cache libc6-compat\nWORKDIR /app\nCOPY package.json pnpm-lock.yaml ./\nRUN npm i -g pnpm\nRUN pnpm install\n\n# If using npm with a `package-lock.json` comment out above and use below instead\n# COPY package.json package-lock.json ./\n# RUN npm ci\n\n# Rebuild the source code only when needed\nFROM node:18-alpine AS builder\nWORKDIR /app\nCOPY --from=deps /app/node_modules ./node_modules\nCOPY . .\n\n# Next.js collects completely anonymous telemetry data about general usage.\n# Learn more here: https://nextjs.org/telemetry\n# Uncomment the following line in case you want to disable telemetry during the build.\n# ENV NEXT_TELEMETRY_DISABLED 1\n\nRUN npm run build\n\n# If using npm comment out above and use below instead\n# RUN npm run build\n\n# Production image, copy all the files and run next\nFROM node:18-alpine AS runner\nWORKDIR /app\n\nENV NODE_ENV production\nARG BASE_URL\nENV BASE_URL=${BASE_URL}\nENV NEXT_PUBLIC_API_URL=${BASE_URL}/api/v2\nENV NEXT_PUBLIC_GATEWAY_URL=${BASE_URL}\nRUN node -e \"console.log(process.env)\"\n# Uncomment the following line in case you want to disable telemetry during runtime.\n# ENV NEXT_TELEMETRY_DISABLED 1\n\nRUN addgroup --system --gid 1001 nodejs\nRUN adduser --system --uid 1001 nextjs\n\n# You only need to copy next.config.js if you are NOT using the default configuration\nCOPY --from=builder /app/next.config.js ./\nCOPY --from=builder /app/public ./public\nCOPY --from=builder /app/package.json ./package.json\n\n# Automatically leverage output traces to reduce image size\n# https://nextjs.org/docs/advanced-features/output-file-tracing\nCOPY --from=builder --chown=nextjs:nodejs /app/.next/standalone ./\nCOPY --from=builder --chown=nextjs:nodejs /app/.next/static ./.next/static\n\nUSER nextjs\n\nEXPOSE 2323\n\nENV PORT 2323\n\nCMD echo \"Mix Space Web [Kami] Image.\" && node server.js\n"},"repairedBuild":{"startTimestamp":1672200555676,"endTimestamp":1672200758526,"error":null,"stdout":"Sending build context to Docker daemon  2.216MB\r\r\nStep 1/30 : FROM node:18-alpine AS deps\n ---> 6d7b7852bcd3\nStep 2/30 : RUN apk add --no-cache libc6-compat\n ---> Running in 18df9c42451a\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/1) Installing libc6-compat (1.2.3-r4)\nOK: 10 MiB in 18 packages\nRemoving intermediate container 18df9c42451a\n ---> a3c9ff51dfd8\nStep 3/30 : WORKDIR /app\n ---> Running in d8fe2761365e\nRemoving intermediate container d8fe2761365e\n ---> 2b84bf3e1e89\nStep 4/30 : COPY package.json pnpm-lock.yaml ./\n ---> d0276696ebbc\nStep 5/30 : RUN npm i -g pnpm\n ---> Running in 11887878b74e\n\nadded 1 package, and audited 2 packages in 638ms\n\n1 package is looking for funding\n  run `npm fund` for details\n\nfound 0 vulnerabilities\n\u001b[91mnpm\u001b[0m\u001b[91m notice \nnpm\u001b[0m\u001b[91m notice\u001b[0m\u001b[91m New major version of npm available! 8.19.2 -> 9.2.0\nnpm \u001b[0m\u001b[91mnotice\u001b[0m\u001b[91m Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm notice Run `npm install -g npm@9.2.0` to update!\nnpm notice \n\u001b[0mRemoving intermediate container 11887878b74e\n ---> a38b5488345c\nStep 6/30 : RUN pnpm install\n ---> Running in 21674b0afe5c\nLockfile is up to date, resolution step is skipped\nProgress: resolved 1, reused 0, downloaded 0, added 0\nPackages: +653\n++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++\nPackages are hard linked from the content-addressable store to the virtual store.\n  Content-addressable store is at: /root/.local/share/pnpm/store/v3\n  Virtual store is at:             node_modules/.pnpm\nProgress: resolved 653, reused 0, downloaded 23, added 21\nProgress: resolved 653, reused 0, downloaded 57, added 55\nProgress: resolved 653, reused 0, downloaded 137, added 130\nProgress: resolved 653, reused 0, downloaded 253, added 247\nProgress: resolved 653, reused 0, downloaded 372, added 371\nProgress: resolved 653, reused 0, downloaded 463, added 461\nProgress: resolved 653, reused 0, downloaded 613, added 613\nProgress: resolved 653, reused 0, downloaded 648, added 649\nProgress: resolved 653, reused 0, downloaded 649, added 649\nProgress: resolved 653, reused 0, downloaded 650, added 651\nProgress: resolved 653, reused 0, downloaded 652, added 651\nProgress: resolved 653, reused 0, downloaded 652, added 652\nProgress: resolved 653, reused 0, downloaded 652, added 653, done\n\ndependencies:\n+ @floating-ui/react-dom 1.0.1\n+ @formkit/auto-animate 1.0.0-beta.5\n+ @mx-space/api-client 1.0.3\n+ axios 0.27.2\n+ clsx 1.2.1\n+ css-spring 4.1.0\n+ dayjs 1.11.7\n+ devtools-detector 2.0.14\n+ js-cookie 3.0.1\n+ lodash-es 4.17.21\n+ markdown-escape 2.0.0\n+ markdown-to-jsx <- @innei/markdown-to-jsx 7.1.3-beta.2\n+ medium-zoom 1.0.8\n+ mobx 6.7.0\n+ mobx-react-lite 3.4.0\n+ next 13.1.0\n+ next-seo 5.15.0\n+ next-suspense 0.1.3\n+ randomcolor 0.6.2\n+ react 18.2.0\n+ react-collapse 5.1.1\n+ react-countup 6.4.0\n+ react-dom 18.2.0\n+ react-intersection-observer 9.4.1\n+ react-masonry-css 1.0.16\n+ react-message-popup 1.0.0\n+ react-shortcut-guide 1.0.0-alpha.0\n+ react-smooth-number-counter 0.0.5\n+ react-toastify 9.1.1\n+ react-transition-group 4.4.5\n+ react-use 17.4.0\n+ remove-markdown 0.5.0\n+ socket.io-client 4.5.4\n+ swr 2.0.0\n+ validator 13.7.0\n\ndevDependencies:\n+ @innei/eslint-config-react-ts 0.9.6\n+ @innei/prettier 0.9.6\n+ @next/bundle-analyzer 13.0.7\n+ @trivago/prettier-plugin-sort-imports 4.0.0\n+ @types/inflection 1.13.0\n+ @types/js-cookie 3.0.2\n+ @types/lodash-es 4.17.6\n+ @types/markdown-escape 1.1.0\n+ @types/node 17.0.18\n+ @types/randomcolor 0.5.7\n+ @types/react 17.0.52\n+ @types/react-collapse 5.0.1\n+ @types/react-color 3.0.6\n+ @types/react-dom 18.0.10\n+ @types/react-transition-group 4.4.5\n+ @types/remove-markdown 0.3.1\n+ @types/ua-parser-js 0.7.36\n+ @types/validator 13.7.10\n+ cross-env 7.0.3\n+ dotenv 16.0.3\n+ eslint 8.30.0\n+ husky 8.0.2\n+ js-yaml 4.1.0\n+ lint-staged 13.1.0\n+ next-compose-plugins 2.2.1\n+ postcss 8.4.20\n+ postcss-import 15.1.0\n+ postcss-nested 6.0.0\n+ postcss-preset-env 7.8.3\n+ prettier 2.8.1\n+ rimraf 3.0.2\n+ stylelint 14.16.0\n+ stylelint-config-standard 29.0.0\n+ tilg 0.1.1\n+ typescript 4.9.4\n+ windicss 3.5.6\n+ windicss-webpack-plugin 1.7.7\n+ zx 7.1.1\n\nDone in 17s\nRemoving intermediate container 21674b0afe5c\n ---> a4dc80c25b54\nStep 7/30 : FROM node:18-alpine AS builder\n ---> 6d7b7852bcd3\nStep 8/30 : WORKDIR /app\n ---> Running in d751905fa02a\nRemoving intermediate container d751905fa02a\n ---> d9e657751b74\nStep 9/30 : COPY --from=deps /app/node_modules ./node_modules\n ---> 7a5746dd0de3\nStep 10/30 : COPY . .\n ---> b5de3a79c9a7\nStep 11/30 : RUN npm run build\n ---> Running in de9646a4e58a\n\n> mx-kami@4.0.6 prebuild\n> rimraf .next\n\n\n> mx-kami@4.0.6 build\n> cross-env NODE_ENV=production next build\n\n\u001b[91mwarn  - Invalid next.config.js options detected: \n\u001b[0m\u001b[91m  - The root value has an unexpected property, webpackDevMiddleware, which is not in the list of allowed properties (amp, analyticsId, assetPrefix, basePath, cleanDistDir, compiler, compress, crossOrigin, devIndicators, distDir, env, eslint, excludeDefaultMomentLocales, experimental, exportPathMap, generateBuildId, generateEtags, headers, httpAgentOptions, i18n, images, modularizeImports, onDemandEntries, optimizeFonts, output, outputFileTracing, pageExtensions, poweredByHeader, productionBrowserSourceMaps, publicRuntimeConfig, reactStrictMode, redirects, rewrites, sassOptions, serverRuntimeConfig, skipMiddlewareUrlNormalize, skipTrailingSlashRedirect, staticPageGenerationTimeout, swcMinify, trailingSlash, transpilePackages, typescript, useFileSystemPublicRoutes, webpack).\n  - The root value has an unexpected property, configOrigin, which is not in the list of allowed properties (amp, analyticsId, assetPrefix, basePath, cleanDistDir, compiler, compress, crossOrigin, devIndicators, distDir, env, eslint, excludeDefaultMomentLocales, experimental, exportPathMap, generateBuildId, generateEtags, headers, httpAgentOptions, i18n, images, modularizeImports, onDemandEntries, optimizeFonts, output, outputFileTracing, pageExtensions, poweredByHeader, productionBrowserSourceMaps, publicRuntimeConfig, reactStrictMode, redirects, rewrites, sassOptions, serverRuntimeConfig, skipMiddlewareUrlNormalize, skipTrailingSlashRedirect, staticPageGenerationTimeout, swcMinify, trailingSlash, transpilePackages, typescript, useFileSystemPublicRoutes, webpack).\n  - The root value has an unexpected property, target, which is not in the list of allowed properties (amp, analyticsId, assetPrefix, basePath, cleanDistDir, compiler, compress, crossOrigin, devIndicators, distDir, env, eslint, excludeDefaultMomentLocales, experimental, exportPathMap, generateBuildId, generateEtags, headers, httpAgentOptions, i18n, images, modularizeImports, onDemandEntries, optimizeFonts, output, outputFileTracing, pageExtensions, poweredByHeader, productionBrowserSourceMaps, publicRuntimeConfig, reactStrictMode, redirects, rewrites, sassOptions, serverRuntimeConfig, skipMiddlewareUrlNormalize, skipTrailingSlashRedirect, staticPageGenerationTimeout, swcMinify, trailingSlash, transpilePackages, typescript, useFileSystemPublicRoutes, webpack).\n  - The value at .amp.canonicalBase must be 1 character or more but it was 0 characters.\n  - The value at .experimental has an unexpected property, browsersListForSwc, which is not in the list of allowed properties (adjustFontFallbacks, adjustFontFallbacksWithSizeAdjust, amp, cpus, craCompat, disableOptimizedLoading, disablePostcssPresetEnv, esmExternals, appDir, externalDir, fallbackNodePolyfills, fetchCache, forceSwcTransforms, fullySpecified, gzipSize, incrementalCacheHandlerPath, isrFlushToDisk, isrMemoryCacheSize, largePageDataBytes, legacyBrowsers, manualClientBasePath, middlewarePrefetch, newNextLinkBehavior, nextScriptWorkers, optimizeCss, optimisticClientCache, outputFileTracingRoot, outputFileTracingIgnores, pageEnv, profiling, proxyTimeout, runtime, serverComponentsExternalPackages, scrollRestoration, sharedPool, sri, swcFileReading, swcMinify, swcMinifyDebugOptions, swcPlugins, swcTraceProfiling, urlImports, enableUndici, workerThreads, fontLoaders, webVitalsAttribution, mdxRs, turbotrace).\n  - The value at .i18n must be an object but it was null.\n  - The value at .images.loaderFile must be 1 character or more but it was 0 characters.\n\u001b[0m\u001b[91m  - The value at .reactStrictMode must be a boolean but it was null.\n\u001b[0m\u001b[91m\nSee more info here: https://nextjs.org/docs/messages/invalid-next-config\n\u001b[0m\u001b[91mwarn  - You have enabled experimental features (scrollRestoration, browsersListForSwc) in next.config.js.\nwarn  - Experimental features are not covered by semver, and may cause unexpected or broken application behavior. Use at your own risk.\n\u001b[0m\u001b[91m\n\u001b[0mAttention: Next.js now collects completely anonymous telemetry regarding usage.\nThis information is used to shape Next.js' roadmap and prioritize features.\nYou can learn more, including how to opt-out if you'd not like to participate in this anonymous program, by visiting the following URL:\nhttps://nextjs.org/telemetry\n\ninfo  - Skipping linting\ninfo  - Checking validity of types...\ninfo  - Creating an optimized production build...\nwarn - 'lightBlue' has been renamed to 'sky'.\nwarn - Please update your color palette to eliminate this warning.\ninfo  - Compiled successfully\ninfo  - Collecting page data...\n\u001b[91mWarning: You have opted-out of Automatic Static Optimization due to `getInitialProps` in `pages/_app`. This does not opt-out pages with `getStaticProps`\nRead more: https://nextjs.org/docs/messages/opt-out-auto-static-optimization\n\n\u001b[0mRoute (pages)                              Size     First Load JS\n┌ λ /                                      21.3 kB         214 kB\n├   └ css/5224c95ff4b4e7e8.css             2.52 kB\n├   /_app                                  0 B             170 kB\n├ λ /[page]                                2.63 kB         212 kB\n├   └ css/33b5b5c20d57c24c.css             2.33 kB\n├ λ /404                                   732 B           171 kB\n├ λ /categories/[slug]                     3.03 kB         178 kB\n├   └ css/91cc48b80caf79e1.css             530 B\n├ λ /favorite/bangumi                      3.26 kB         177 kB\n├   └ css/c3b28723297eae48.css             904 B\n├ λ /favorite/music                        4.21 kB         174 kB\n├   └ css/8f384601bb06c352.css             767 B\n├ λ /friends                               13.1 kB         220 kB\n├   └ css/83ef02fae72d729a.css             3.1 kB\n├ λ /login                                 4.83 kB         175 kB\n├   └ css/54769b01dea78f90.css             592 B\n├ λ /notes                                 350 B           170 kB\n├ λ /notes/[id]                            12.6 kB         234 kB\n├   └ css/7bc7b80184f4e22f.css             3.22 kB\n├ λ /notes/topics                          2.78 kB         175 kB\n├   └ css/a902966e9c491ea4.css             230 B\n├ λ /notes/topics/[topicSlug]              9.3 kB          184 kB\n├   └ css/98625d77d5c2c11c.css             1.12 kB\n├ λ /posts                                 15.5 kB         195 kB\n├   └ css/5ae5337cc3c80130.css             1.76 kB\n├ λ /posts/[category]/[slug]               8.42 kB         230 kB\n├   └ css/4e53ab42de822c10.css             2.93 kB\n├ λ /projects                              9.52 kB         185 kB\n├   └ css/b46103ca99566147.css             782 B\n├ λ /projects/[id]                         2.36 kB         209 kB\n├   └ css/8bee50d9b6e135d4.css             2.38 kB\n├ λ /recently                              42.7 kB         261 kB\n├   └ css/ffce607d0d351f71.css             3.97 kB\n├ λ /says                                  13.8 kB         184 kB\n├   └ css/96e69637cf74f13e.css             286 B\n└ λ /timeline                              11.3 kB         186 kB\n    └ css/13b3ec3ca1bbc644.css             619 B\n+ First Load JS shared by all              181 kB\n  ├ chunks/framework-46bf5f4dbbcb148c.js   45.4 kB\n  ├ chunks/main-1a42daccd459e33d.js        31 kB\n  ├ chunks/pages/_app-4d9e3e28f91194e6.js  90.2 kB\n  ├ chunks/webpack-67d157365fe65c84.js     3.16 kB\n  └ css/c2feb51214c42977.css               10.9 kB\n\nλ  (Server)  server-side renders at runtime (uses getInitialProps or getServerSideProps)\n\n\u001b[91mnpm\u001b[0m\u001b[91m \u001b[0m\u001b[91mnotice\u001b[0m\u001b[91m \n\u001b[0m\u001b[91mnpm\u001b[0m\u001b[91m notice\u001b[0m\u001b[91m New major version of npm available! 8.19.2 -> 9.2.0\nnpm\u001b[0m\u001b[91m notice\u001b[0m\u001b[91m Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm notice\u001b[0m\u001b[91m Run `npm install -g npm@9.2.0` to update!\nnpm\u001b[0m\u001b[91m notice\u001b[0m\u001b[91m \n\u001b[0mRemoving intermediate container de9646a4e58a\n ---> d402db25ce30\nStep 12/30 : FROM node:18-alpine AS runner\n ---> 6d7b7852bcd3\nStep 13/30 : WORKDIR /app\n ---> Running in da08cc549506\nRemoving intermediate container da08cc549506\n ---> 6b2120c7e0ab\nStep 14/30 : ENV NODE_ENV production\n ---> Running in abc8af3a7b26\nRemoving intermediate container abc8af3a7b26\n ---> 663701744983\nStep 15/30 : ARG BASE_URL\n ---> Running in 31ea86029507\nRemoving intermediate container 31ea86029507\n ---> dccdaf899f4d\nStep 16/30 : ENV BASE_URL=${BASE_URL}\n ---> Running in f76a93e57a22\nRemoving intermediate container f76a93e57a22\n ---> 7eb6a0e330d1\nStep 17/30 : ENV NEXT_PUBLIC_API_URL=${BASE_URL}/api/v2\n ---> Running in 695115a5c546\nRemoving intermediate container 695115a5c546\n ---> 87ab503b957a\nStep 18/30 : ENV NEXT_PUBLIC_GATEWAY_URL=${BASE_URL}\n ---> Running in aa07b65b687c\nRemoving intermediate container aa07b65b687c\n ---> 5c9734f3e077\nStep 19/30 : RUN node -e \"console.log(process.env)\"\n ---> Running in 4e9423dcb0d7\n{\n  BASE_URL: '',\n  NODE_VERSION: '18.12.1',\n  HOSTNAME: '4e9423dcb0d7',\n  YARN_VERSION: '1.22.19',\n  SHLVL: '1',\n  HOME: '/root',\n  PATH: '/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin',\n  NEXT_PUBLIC_API_URL: '/api/v2',\n  NEXT_PUBLIC_GATEWAY_URL: '',\n  PWD: '/app',\n  NODE_ENV: 'production'\n}\nRemoving intermediate container 4e9423dcb0d7\n ---> e9441fc542df\nStep 20/30 : RUN addgroup --system --gid 1001 nodejs\n ---> Running in f219db6dfb93\nRemoving intermediate container f219db6dfb93\n ---> 79af9788ee4d\nStep 21/30 : RUN adduser --system --uid 1001 nextjs\n ---> Running in 555eae7fd27a\nRemoving intermediate container 555eae7fd27a\n ---> decdea6a2b52\nStep 22/30 : COPY --from=builder /app/next.config.js ./\n ---> 319f95b256d7\nStep 23/30 : COPY --from=builder /app/public ./public\n ---> 8cd25385fc01\nStep 24/30 : COPY --from=builder /app/package.json ./package.json\n ---> bbf377602f7f\nStep 25/30 : COPY --from=builder --chown=nextjs:nodejs /app/.next/standalone ./\n ---> 9218c9632aa1\nStep 26/30 : COPY --from=builder --chown=nextjs:nodejs /app/.next/static ./.next/static\n ---> fcd892d94d33\nStep 27/30 : USER nextjs\n ---> Running in 1b57062b8776\nRemoving intermediate container 1b57062b8776\n ---> ebd6e6f9829d\nStep 28/30 : EXPOSE 2323\n ---> Running in 2f787e51fd2d\nRemoving intermediate container 2f787e51fd2d\n ---> 4474093e24ce\nStep 29/30 : ENV PORT 2323\n ---> Running in 854df029c1f9\nRemoving intermediate container 854df029c1f9\n ---> be9b126a3fbf\nStep 30/30 : CMD echo \"Mix Space Web [Kami] Image.\" && node server.js\n ---> Running in a0efc3cee392\nRemoving intermediate container a0efc3cee392\n ---> 5b178945898f\nSuccessfully built 5b178945898f\nSuccessfully tagged kami:latest\n","stderr":"","imageSize":188076511},"endTime":1672200758856}