{"repository":"https://github.com/webstrates/webstrates","dockerfilePath":"Dockerfile","startTime":1672646044166,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/webstrates/webstrates'...\n","error":null,"commit":"ef24013a8e6a68db263569a4ec688c23e34a4939"},"originalBuild":{"startTimestamp":1672646045291,"endTimestamp":1672646085071,"error":null,"stdout":"Sending build context to Docker daemon    830kB\r\r\nStep 1/9 : FROM node:14-alpine\n ---> fb7170aa2b9b\nStep 2/9 : RUN apk add --update-cache git \t&& rm -rf /var/cache/apk/*\n ---> Running in c246e0ed564e\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/7) Installing ca-certificates (20220614-r3)\n(2/7) Installing brotli-libs (1.0.9-r9)\n(3/7) Installing nghttp2-libs (1.51.0-r0)\n(4/7) Installing libcurl (7.87.0-r0)\n(5/7) Installing libexpat (2.5.0-r0)\n(6/7) Installing pcre2 (10.42-r0)\n(7/7) Installing git (2.38.2-r0)\nExecuting busybox-1.35.0-r29.trigger\nExecuting ca-certificates-20220614-r3.trigger\nOK: 18 MiB in 24 packages\nRemoving intermediate container c246e0ed564e\n ---> fa70ef8f8b79\nStep 3/9 : COPY /package*.json /app/\n ---> 5d5b62cb3cbc\nStep 4/9 : WORKDIR /app\n ---> Running in e9ec93f71de5\nRemoving intermediate container e9ec93f71de5\n ---> 2e19c0f8b5d1\nStep 5/9 : RUN npm install --production\n ---> Running in 4e2317f84b6f\n\u001b[91mnpm WARN deprecated eslint-loader@1.9.0: This loader has been deprecated. Please use eslint-webpack-plugin\n\u001b[0m\u001b[91mnpm WARN deprecated puppeteer@1.20.0: < 18.1.0 is no longer supported\n\u001b[0m\u001b[91mnpm WARN deprecated multer@1.4.2: Multer 1.x is affected by CVE-2022-24434. This is fixed in v1.4.4-lts.1 which drops support for versions of Node.js before 6. Please upgrade to at least Node.js 6 and version 1.4.4-lts.1 of Multer. If you need support for older versions of Node.js, we are open to accepting patches that would fix the CVE on the main 1.x release line, whilst maintaining compatibility with Node.js 0.10.\n\u001b[0m\u001b[91mnpm WARN deprecated request@2.88.0: request has been deprecated, see https://github.com/request/request/issues/3142\n\u001b[0m\u001b[91mnpm WARN deprecated debug@3.2.6: Debug versions >=3.2.0 <3.2.7 || >=4 <4.3.1 have a low-severity ReDos regression when used in a Node.js environment. It is recommended you upgrade to 3.2.7 or 4.3.1. (https://github.com/visionmedia/debug/issues/797)\n\u001b[0m\u001b[91mnpm WARN deprecated mkdirp@0.5.1: Legacy versions of mkdirp are no longer supported. Please update to mkdirp 1.x. (Note that the API surface has changed to use Promises in 1.x.)\n\u001b[0m\u001b[91mnpm WARN deprecated uuid@3.4.0: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.\n\u001b[0m\u001b[91mnpm WARN deprecated har-validator@5.1.5: this library is no longer supported\n\u001b[0m\u001b[91mnpm WARN deprecated querystring@0.2.0: The querystring API is considered Legacy. new code should use the URLSearchParams API instead.\n\u001b[0m\u001b[91mnpm WARN deprecated acorn-dynamic-import@2.0.2: This is probably built in to whatever tool you're using. If you still need it... idk\n\u001b[0m\u001b[91mnpm WARN deprecated circular-json@0.3.3: CircularJSON is in maintenance only, flatted is its successor.\n\u001b[0m\u001b[91mnpm WARN deprecated chokidar@2.1.8: Chokidar 2 does not receive security updates since 2019. Upgrade to chokidar 3 with 15x fewer dependencies\n\u001b[0m\u001b[91mnpm WARN deprecated fsevents@1.2.13: fsevents 1 will break on node v14+ and could be using insecure binaries. Upgrade to fsevents 2.\n\u001b[0m\u001b[91mnpm WARN deprecated source-map-resolve@0.5.3: See https://github.com/lydell/source-map-resolve#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated resolve-url@0.2.1: https://github.com/lydell/resolve-url#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated source-map-url@0.4.1: See https://github.com/lydell/source-map-url#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated urix@0.1.0: Please see https://github.com/lydell/urix#deprecated\n\u001b[0m\n> console-stamp@0.2.9 postinstall /app/node_modules/console-stamp\n> node ./msg.js\n\nAttention\n    Console-stamp version 3.0.0 Release Candidate is out. Install by using the tag '@next'. NB: Breaking changes.\n    For more details goto: https://www.npmjs.com/package/console-stamp/v/next\n\n\u001b[91mnpm notice created a lockfile as package-lock.json. You should commit this file.\n\u001b[0m\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.2 (node_modules/chokidar/node_modules/fsevents):\nnpm WARN \u001b[0m\u001b[91mnotsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@^1.2.7 (node_modules/watchpack-chokidar2/node_modules/chokidar/node_modules/fsevents):\nnpm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.2.13: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91mnpm WARN Webstrates@1.7.0 No repository field.\n\u001b[0m\u001b[91m\n\u001b[0madded 730 packages from 504 contributors and audited 930 packages in 20.026s\n\n36 packages are looking for funding\n  run `npm fund` for details\n\nfound 26 vulnerabilities (10 moderate, 13 high, 3 critical)\n  run `npm audit fix` to fix them, or `npm audit` for details\nRemoving intermediate container 4e2317f84b6f\n ---> 65ce5a063c0f\nStep 6/9 : COPY . /app\n ---> 72e2fdad625b\nStep 7/9 : RUN npm run build\n ---> Running in 21d8b0462c82\n\n> Webstrates@1.7.0 build /app\n> NODE_ENV='production' webpack -p\n\n\u001b[91mNo config file present, creating one now\n\u001b[0mHash: 75d9c07b412a7deadcba\nVersion: webpack 2.7.0\nTime: 2490ms\n        Asset    Size  Chunks                    Chunk Names\nwebstrates.js  486 kB       0  [emitted]  [big]  main\n   [0] ./client/webstrates/coreUtils.js 15.8 kB {0} [built]\n   [1] ./client/webstrates/coreEvents.js 4.72 kB {0} [built]\n   [2] ./client/webstrates/globalObject.js 5.43 kB {0} [built]\n   [3] ./client/webstrates/coreWebsocket.js 8.13 kB {0} [built]\n   [4] ./client/config.js 1.28 kB {0} [built]\n   [5] ./~/timers-browserify/main.js 1.88 kB {0} [built]\n   [6] ./client/webstrates/coreDOM.js 4.7 kB {0} [built]\n   [7] ./client/webstrates/coreDatabase.js 8.6 kB {0} [built]\n   [8] ./client/webstrates/corePathTree.js 11.2 kB {0} [built]\n  [13] ./client/webstrates/coreMutation.js 7.35 kB {0} [built]\n  [14] ./client/webstrates/coreOpCreator.js 23 kB {0} [built]\n  [15] ./client/webstrates/corePopulator.js 2.33 kB {0} [built]\n  [19] ./client/webstrates/coreOpApplier.js 30.4 kB {0} [built]\n  [48] ./client/webstrates ^\\.\\/.*$ 1.51 kB {0} [built]\n  [49] ./client/index.js 1.99 kB {0} [built]\n    + 46 hidden modules\nRemoving intermediate container 21d8b0462c82\n ---> b8b5f15433c3\nStep 8/9 : EXPOSE 7007\n ---> Running in 4ae998a0495e\nRemoving intermediate container 4ae998a0495e\n ---> 6ff21adb6899\nStep 9/9 : CMD node webstrates.js\n ---> Running in 625f36d2541d\nRemoving intermediate container 625f36d2541d\n ---> b417d56e122b\nSuccessfully built b417d56e122b\nSuccessfully tagged webstrates:latest\n","stderr":"","imageSize":231405384},"repair":{"violations":[{"name":"npmCacheCleanAfterInstall","position":{"start":7,"end":7,"columnStart":4,"columnEnd":28}},{"name":"apkAddUseNoCache","position":{"start":2,"end":2,"columnStart":4,"columnEnd":30}}],"repairedDockerfile":"FROM node:14-alpine\n\nRUN apk add --no-cache --update-cache git \\\n\t&& rm -rf /var/cache/apk/*\n\nCOPY /package*.json /app/\nWORKDIR /app\nRUN npm install --production\n\nCOPY . /app\nRUN npm run build\n\nEXPOSE 7007\n\nCMD node webstrates.js\n"},"repairedBuild":{"startTimestamp":1672646086245,"endTimestamp":1672646122672,"error":null,"stdout":"Sending build context to Docker daemon    830kB\r\r\nStep 1/9 : FROM node:14-alpine\n ---> fb7170aa2b9b\nStep 2/9 : RUN apk add --no-cache --update-cache git \t&& rm -rf /var/cache/apk/*\n ---> Running in 95692b616732\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/7) Installing ca-certificates (20220614-r3)\n(2/7) Installing brotli-libs (1.0.9-r9)\n(3/7) Installing nghttp2-libs (1.51.0-r0)\n(4/7) Installing libcurl (7.87.0-r0)\n(5/7) Installing libexpat (2.5.0-r0)\n(6/7) Installing pcre2 (10.42-r0)\n(7/7) Installing git (2.38.2-r0)\nExecuting busybox-1.35.0-r29.trigger\nExecuting ca-certificates-20220614-r3.trigger\nOK: 18 MiB in 24 packages\nRemoving intermediate container 95692b616732\n ---> 9cea84e21e04\nStep 3/9 : COPY /package*.json /app/\n ---> e0c5ce16a2eb\nStep 4/9 : WORKDIR /app\n ---> Running in c8ad62b46636\nRemoving intermediate container c8ad62b46636\n ---> 97c8c619ca28\nStep 5/9 : RUN npm install --production\n ---> Running in 1a0d40fe5f97\n\u001b[91mnpm WARN deprecated eslint-loader@1.9.0: This loader has been deprecated. Please use eslint-webpack-plugin\n\u001b[0m\u001b[91mnpm WARN deprecated puppeteer@1.20.0: < 18.1.0 is no longer supported\n\u001b[0m\u001b[91mnpm WARN deprecated multer@1.4.2: Multer 1.x is affected by CVE-2022-24434. This is fixed in v1.4.4-lts.1 which drops support for versions of Node.js before 6. Please upgrade to at least Node.js 6 and version 1.4.4-lts.1 of Multer. If you need support for older versions of Node.js, we are open to accepting patches that would fix the CVE on the main 1.x release line, whilst maintaining compatibility with Node.js 0.10.\n\u001b[0m\u001b[91mnpm WARN deprecated request@2.88.0: request has been deprecated, see https://github.com/request/request/issues/3142\n\u001b[0m\u001b[91mnpm WARN deprecated debug@3.2.6: Debug versions >=3.2.0 <3.2.7 || >=4 <4.3.1 have a low-severity ReDos regression when used in a Node.js environment. It is recommended you upgrade to 3.2.7 or 4.3.1. (https://github.com/visionmedia/debug/issues/797)\n\u001b[0m\u001b[91mnpm WARN deprecated mkdirp@0.5.1: Legacy versions of mkdirp are no longer supported. Please update to mkdirp 1.x. (Note that the API surface has changed to use Promises in 1.x.)\n\u001b[0m\u001b[91mnpm WARN deprecated uuid@3.4.0: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.\n\u001b[0m\u001b[91mnpm WARN deprecated har-validator@5.1.5: this library is no longer supported\n\u001b[0m\u001b[91mnpm WARN deprecated querystring@0.2.0: The querystring API is considered Legacy. new code should use the URLSearchParams API instead.\n\u001b[0m\u001b[91mnpm WARN deprecated acorn-dynamic-import@2.0.2: This is probably built in to whatever tool you're using. If you still need it... idk\n\u001b[0m\u001b[91mnpm WARN deprecated circular-json@0.3.3: CircularJSON is in maintenance only, flatted is its successor.\n\u001b[0m\u001b[91mnpm WARN deprecated chokidar@2.1.8: Chokidar 2 does not receive security updates since 2019. Upgrade to chokidar 3 with 15x fewer dependencies\n\u001b[0m\u001b[91mnpm WARN deprecated fsevents@1.2.13: fsevents 1 will break on node v14+ and could be using insecure binaries. Upgrade to fsevents 2.\n\u001b[0m\u001b[91mnpm WARN deprecated source-map-resolve@0.5.3: See https://github.com/lydell/source-map-resolve#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated resolve-url@0.2.1: https://github.com/lydell/resolve-url#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated source-map-url@0.4.1: See https://github.com/lydell/source-map-url#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated urix@0.1.0: Please see https://github.com/lydell/urix#deprecated\n\u001b[0m\n> console-stamp@0.2.9 postinstall /app/node_modules/console-stamp\n> node ./msg.js\n\nAttention\n    Console-stamp version 3.0.0 Release Candidate is out. Install by using the tag '@next'. NB: Breaking changes.\n    For more details goto: https://www.npmjs.com/package/console-stamp/v/next\n\n\u001b[91mnpm notice created a lockfile as package-lock.json. You should commit this file.\n\u001b[0m\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.2 (node_modules/chokidar/node_modules/fsevents):\nnpm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@^1.2.7 (node_modules/watchpack-chokidar2/node_modules/chokidar/node_modules/fsevents):\nnpm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.2.13: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91mnpm WARN Webstrates@1.7.0 No repository field.\n\u001b[0m\u001b[91m\n\u001b[0madded 730 packages from 504 contributors and audited 930 packages in 16.146s\n\n36 packages are looking for funding\n  run `npm fund` for details\n\nfound 26 vulnerabilities (10 moderate, 13 high, 3 critical)\n  run `npm audit fix` to fix them, or `npm audit` for details\nRemoving intermediate container 1a0d40fe5f97\n ---> f49b36e9ec8e\nStep 6/9 : COPY . /app\n ---> 25cec6f0a293\nStep 7/9 : RUN npm run build\n ---> Running in ac3c17afdb1d\n\n> Webstrates@1.7.0 build /app\n> NODE_ENV='production' webpack -p\n\n\u001b[91mNo config file present, creating one now\n\u001b[0mHash: 75d9c07b412a7deadcba\nVersion: webpack 2.7.0\nTime: 2288ms\n        Asset    Size  Chunks                    Chunk Names\nwebstrates.js  486 kB       0  [emitted]  [big]  main\n   [0] ./client/webstrates/coreUtils.js 15.8 kB {0} [built]\n   [1] ./client/webstrates/coreEvents.js 4.72 kB {0} [built]\n   [2] ./client/webstrates/globalObject.js 5.43 kB {0} [built]\n   [3] ./client/webstrates/coreWebsocket.js 8.13 kB {0} [built]\n   [4] ./client/config.js 1.28 kB {0} [built]\n   [5] ./~/timers-browserify/main.js 1.88 kB {0} [built]\n   [6] ./client/webstrates/coreDOM.js 4.7 kB {0} [built]\n   [7] ./client/webstrates/coreDatabase.js 8.6 kB {0} [built]\n   [8] ./client/webstrates/corePathTree.js 11.2 kB {0} [built]\n  [13] ./client/webstrates/coreMutation.js 7.35 kB {0} [built]\n  [14] ./client/webstrates/coreOpCreator.js 23 kB {0} [built]\n  [15] ./client/webstrates/corePopulator.js 2.33 kB {0} [built]\n  [19] ./client/webstrates/coreOpApplier.js 30.4 kB {0} [built]\n  [48] ./client/webstrates ^\\.\\/.*$ 1.51 kB {0} [built]\n  [49] ./client/index.js 1.99 kB {0} [built]\n    + 46 hidden modules\nRemoving intermediate container ac3c17afdb1d\n ---> 541845d0e081\nStep 8/9 : EXPOSE 7007\n ---> Running in b434099ebeb5\nRemoving intermediate container b434099ebeb5\n ---> 4dcfd4ebb2b8\nStep 9/9 : CMD node webstrates.js\n ---> Running in 0cd06f34964e\nRemoving intermediate container 0cd06f34964e\n ---> 5e7a06dbc02b\nSuccessfully built 5e7a06dbc02b\nSuccessfully tagged webstrates:latest\n","stderr":"","imageSize":231407277},"endTime":1672646123316}