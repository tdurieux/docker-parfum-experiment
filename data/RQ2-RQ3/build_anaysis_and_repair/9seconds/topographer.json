{"repository":"https://github.com/9seconds/topographer","dockerfilePath":"Dockerfile","startTime":1673014034399,"endTime":1673014174752,"clone":{"startTime":1673014034400,"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/9seconds/topographer'...\n","error":null,"endTime":1673014037491,"commit":"17fb92994da69ddd9027a66a123be82a57b36cd2"},"originalBuild":{"startTime":1673014037568,"endTime":1673014115834,"error":null,"stdout":"Sending build context to Docker daemon  62.27MB\r\r\nStep 1/13 : FROM golang:1.16-alpine AS build-env\n1.16-alpine: Pulling from library/golang\n59bf1c3509f3: Already exists\n666ba61612fd: Pulling fs layer\n8ed8ca486205: Pulling fs layer\nca4bf87e467a: Pulling fs layer\n0435e0963794: Pulling fs layer\n0435e0963794: Waiting\n8ed8ca486205: Verifying Checksum\n8ed8ca486205: Download complete\n666ba61612fd: Verifying Checksum\n666ba61612fd: Download complete\n666ba61612fd: Pull complete\n0435e0963794: Download complete\n8ed8ca486205: Pull complete\nca4bf87e467a: Verifying Checksum\nca4bf87e467a: Download complete\nca4bf87e467a: Pull complete\n0435e0963794: Pull complete\nDigest: sha256:5616dca835fa90ef13a843824ba58394dad356b7d56198fb7c93cbe76d7d67fe\nStatus: Downloaded newer image for golang:1.16-alpine\n ---> 7642119cd161\nStep 2/13 : ENV CGO_ENABLED=0\n ---> Running in e99ea995a358\nRemoving intermediate container e99ea995a358\n ---> 407804a9f955\nStep 3/13 : RUN set -x   && apk --update add     bash     ca-certificates     git     make\n ---> Running in 5f38960d5551\n\u001b[91m+ apk --update add bash ca-certificates git make\n\u001b[0mfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/community/x86_64/APKINDEX.tar.gz\n(1/11) Installing ncurses-terminfo-base (6.3_p20211120-r1)\n(2/11) Installing ncurses-libs (6.3_p20211120-r1)\n(3/11) Installing readline (8.1.1-r0)\n(4/11) Installing bash (5.1.16-r0)\nExecuting bash-5.1.16-r0.post-install\n(5/11) Installing brotli-libs (1.0.9-r5)\n(6/11) Installing nghttp2-libs (1.46.0-r0)\n(7/11) Installing libcurl (7.80.0-r5)\n(8/11) Installing expat (2.5.0-r0)\n(9/11) Installing pcre2 (10.40-r0)\n(10/11) Installing git (2.34.5-r0)\n(11/11) Installing make (4.3-r0)\nExecuting busybox-1.34.1-r3.trigger\nOK: 22 MiB in 26 packages\nRemoving intermediate container 5f38960d5551\n ---> a2bdf8150148\nStep 4/13 : ADD . /app\n ---> 5d5f30854636\nStep 5/13 : WORKDIR /app\n ---> Running in e0d0ba9b0ee6\nRemoving intermediate container e0d0ba9b0ee6\n ---> 462523234bf8\nStep 6/13 : RUN set -x   && make clean   && git submodule update --init   && make -j 4 static-build\n ---> Running in aff7283cde09\n\u001b[91m+ make clean\n\u001b[0m\u001b[91m+ git submodule update --init\n\u001b[0m\u001b[91mSubmodule 'maxmind' (https://github.com/maxmind/MaxMind-DB.git) registered for path 'providers/testdata/maxmind-repo'\n\u001b[0m\u001b[91mCloning into '/app/providers/testdata/maxmind-repo'...\n\u001b[0mSubmodule path 'providers/testdata/maxmind-repo': checked out '39431da7fb6834c0cbe0c70a81074e65299dece7'\n\u001b[91m+ make -j 4 static-build\n\u001b[0m\u001b[91mgo: downloading github.com/leaanthony/clir v1.0.4\ngo: downloading github.com/rs/zerolog v1.20.0\n\u001b[0m\u001b[91mgo: downloading github.com/hjson/hjson-go v3.1.0+incompatible\n\u001b[0m\u001b[91mgo: downloading github.com/kentik/patricia v0.0.0-20201202224819-f9447a6e25f1\ngo: downloading github.com/oschwald/maxminddb-golang v1.8.0\n\u001b[0m\u001b[91mgo: downloading github.com/EvilSuperstars/go-cidrman v0.0.0-20190607145828-28e79e32899a\n\u001b[0m\u001b[91mgo: downloading github.com/antchfx/htmlquery v1.2.3\n\u001b[0m\u001b[91mgo: downloading github.com/ip2location/ip2location-go v8.3.0+incompatible\n\u001b[0m\u001b[91mgo: downloading golang.org/x/time v0.0.0-20210220033141-f8bda1e9f3ba\ngo: downloading github.com/panjf2000/ants/v2 v2.4.3\n\u001b[0m\u001b[91mgo: downloading github.com/dgraph-io/ristretto v0.0.3\ngo: downloading github.com/pariz/gountries v0.0.0-20200430155801-1c6a393df9c7\n\u001b[0m\u001b[91mgo: downloading github.com/qri-io/jsonschema v0.2.0\ngo: downloading github.com/antzucaro/matchr v0.0.0-20210222213004-b04723ef80f0\n\u001b[0m\u001b[91mgo: downloading golang.org/x/sys v0.0.0-20210301091718-77cc2087c03b\n\u001b[0m\u001b[91mgo: downloading github.com/cespare/xxhash v1.1.0\n\u001b[0m\u001b[91mgo: downloading github.com/antchfx/xpath v1.1.11\ngo: downloading github.com/golang/groupcache v0.0.0-20200121045136-8c9f03a8e57e\ngo: downloading golang.org/x/net v0.0.0-20210226172049-e18ecbb05110\n\u001b[0m\u001b[91mgo: downloading github.com/qri-io/jsonpointer v0.1.1\n\u001b[0m\u001b[91mgo: downloading golang.org/x/text v0.3.5\n\u001b[0m\u001b[91mgo: downloading gopkg.in/yaml.v2 v2.4.0\n\u001b[0mRemoving intermediate container aff7283cde09\n ---> 08914340fad9\nStep 7/13 : FROM scratch\n ---> \nStep 8/13 : ENTRYPOINT [\"/topographer\"]\n ---> Running in d984d6e7f631\nRemoving intermediate container d984d6e7f631\n ---> e78519642e53\nStep 9/13 : CMD [\"-config\", \"/config.hjson\"]\n ---> Running in 1f5160437b26\nRemoving intermediate container 1f5160437b26\n ---> 71dc9c685c76\nStep 10/13 : EXPOSE 80\n ---> Running in 104303fe403f\nRemoving intermediate container 104303fe403f\n ---> 4d8a1ab13cae\nStep 11/13 : COPY --from=build-env     /etc/ssl/certs/ca-certificates.crt     /etc/ssl/certs/ca-certificates.crt\n ---> ca4535529f51\nStep 12/13 : COPY --from=build-env     /app/topographer     /topographer\n ---> 43796669112e\nStep 13/13 : COPY --from=build-env     /app/example.config.hjson     /config.hjson\n ---> 6a2908a73e60\nSuccessfully built 6a2908a73e60\nSuccessfully tagged topographer:latest\n","stderr":"","imageSize":9341439},"repair":{"startTime":1673014115902,"endTime":1673014115962,"violations":[{"name":"apkAddUseNoCache","position":{"start":13,"end":17,"columnStart":5,"columnEnd":8}}],"repairedDockerfile":"# This Dockerfile builds topographer image based on Alpine Linux.\n# This is minimal image as possible\n#\n# Please visit https://github.com/9seconds/topographer for the details.\n\n###############################################################################\n# BUILD STAGE\n\nFROM golang:1.16-alpine AS build-env\n\nENV CGO_ENABLED=0\n\nRUN set -x \\\n  && apk --update --no-cache add \\\n    bash \\\n    ca-certificates \\\n    git \\\n    make\n\nADD . /app\nWORKDIR /app\n\nRUN set -x \\\n  && make clean \\\n  && git submodule update --init \\\n  && make -j 4 static-build\n\n\n###############################################################################\n# PACKAGE STAGE\n\nFROM scratch\n\nENTRYPOINT [\"/topographer\"]\nCMD [\"-config\", \"/config.hjson\"]\nEXPOSE 80\n\nCOPY --from=build-env \\\n    /etc/ssl/certs/ca-certificates.crt \\\n    /etc/ssl/certs/ca-certificates.crt\nCOPY --from=build-env \\\n    /app/topographer \\\n    /topographer\nCOPY --from=build-env \\\n    /app/example.config.hjson \\\n    /config.hjson\n"},"repairedBuild":{"startTime":1673014116395,"endTime":1673014173829,"error":null,"stdout":"Sending build context to Docker daemon  62.27MB\r\r\nStep 1/13 : FROM golang:1.16-alpine AS build-env\n ---> 7642119cd161\nStep 2/13 : ENV CGO_ENABLED=0\n ---> Running in e8baf4f6bd9e\nRemoving intermediate container e8baf4f6bd9e\n ---> 8616341d3a47\nStep 3/13 : RUN set -x   && apk --update --no-cache add     bash     ca-certificates     git     make\n ---> Running in 0022537e84c6\n\u001b[91m+ apk --update --no-cache add bash ca-certificates git make\n\u001b[0mfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/community/x86_64/APKINDEX.tar.gz\n(1/11) Installing ncurses-terminfo-base (6.3_p20211120-r1)\n(2/11) Installing ncurses-libs (6.3_p20211120-r1)\n(3/11) Installing readline (8.1.1-r0)\n(4/11) Installing bash (5.1.16-r0)\nExecuting bash-5.1.16-r0.post-install\n(5/11) Installing brotli-libs (1.0.9-r5)\n(6/11) Installing nghttp2-libs (1.46.0-r0)\n(7/11) Installing libcurl (7.80.0-r5)\n(8/11) Installing expat (2.5.0-r0)\n(9/11) Installing pcre2 (10.40-r0)\n(10/11) Installing git (2.34.5-r0)\n(11/11) Installing make (4.3-r0)\nExecuting busybox-1.34.1-r3.trigger\nOK: 22 MiB in 26 packages\nRemoving intermediate container 0022537e84c6\n ---> 1afefe17bc63\nStep 4/13 : ADD . /app\n ---> 58dc9b2d055e\nStep 5/13 : WORKDIR /app\n ---> Running in 3661ad9cc166\nRemoving intermediate container 3661ad9cc166\n ---> d80279cea4ae\nStep 6/13 : RUN set -x   && make clean   && git submodule update --init   && make -j 4 static-build\n ---> Running in 3da957a155dc\n\u001b[91m+ make clean\n\u001b[0m\u001b[91m+ git submodule update --init\n\u001b[0m\u001b[91mSubmodule 'maxmind' (https://github.com/maxmind/MaxMind-DB.git) registered for path 'providers/testdata/maxmind-repo'\n\u001b[0m\u001b[91mCloning into '/app/providers/testdata/maxmind-repo'...\n\u001b[0mSubmodule path 'providers/testdata/maxmind-repo': checked out '39431da7fb6834c0cbe0c70a81074e65299dece7'\n\u001b[91m+ make -j 4 static-build\n\u001b[0m\u001b[91mgo: downloading github.com/rs/zerolog v1.20.0\ngo: downloading github.com/hjson/hjson-go v3.1.0+incompatible\n\u001b[0m\u001b[91mgo: downloading github.com/antzucaro/matchr v0.0.0-20210222213004-b04723ef80f0\ngo: downloading golang.org/x/time v0.0.0-20210220033141-f8bda1e9f3ba\n\u001b[0m\u001b[91mgo: downloading github.com/dgraph-io/ristretto v0.0.3\n\u001b[0m\u001b[91mgo: downloading github.com/panjf2000/ants/v2 v2.4.3\ngo: downloading github.com/pariz/gountries v0.0.0-20200430155801-1c6a393df9c7\ngo: downloading github.com/qri-io/jsonschema v0.2.0\n\u001b[0m\u001b[91mgo: downloading github.com/leaanthony/clir v1.0.4\n\u001b[0m\u001b[91mgo: downloading github.com/antchfx/htmlquery v1.2.3\ngo: downloading github.com/oschwald/maxminddb-golang v1.8.0\ngo: downloading github.com/kentik/patricia v0.0.0-20201202224819-f9447a6e25f1\n\u001b[0m\u001b[91mgo: downloading github.com/ip2location/ip2location-go v8.3.0+incompatible\n\u001b[0m\u001b[91mgo: downloading github.com/EvilSuperstars/go-cidrman v0.0.0-20190607145828-28e79e32899a\n\u001b[0m\u001b[91mgo: downloading golang.org/x/net v0.0.0-20210226172049-e18ecbb05110\n\u001b[0m\u001b[91mgo: downloading github.com/golang/groupcache v0.0.0-20200121045136-8c9f03a8e57e\n\u001b[0m\u001b[91mgo: downloading github.com/antchfx/xpath v1.1.11\n\u001b[0m\u001b[91mgo: downloading golang.org/x/sys v0.0.0-20210301091718-77cc2087c03b\n\u001b[0m\u001b[91mgo: downloading github.com/cespare/xxhash v1.1.0\n\u001b[0m\u001b[91mgo: downloading github.com/qri-io/jsonpointer v0.1.1\n\u001b[0m\u001b[91mgo: downloading golang.org/x/text v0.3.5\n\u001b[0m\u001b[91mgo: downloading gopkg.in/yaml.v2 v2.4.0\n\u001b[0mRemoving intermediate container 3da957a155dc\n ---> 7b4dbae4f5f7\nStep 7/13 : FROM scratch\n ---> \nStep 8/13 : ENTRYPOINT [\"/topographer\"]\n ---> Running in 707de37a7105\nRemoving intermediate container 707de37a7105\n ---> eb7ac82a90d7\nStep 9/13 : CMD [\"-config\", \"/config.hjson\"]\n ---> Running in 59935752e291\nRemoving intermediate container 59935752e291\n ---> 4fe3936638e1\nStep 10/13 : EXPOSE 80\n ---> Running in fc452d571e67\nRemoving intermediate container fc452d571e67\n ---> 40744253cb84\nStep 11/13 : COPY --from=build-env     /etc/ssl/certs/ca-certificates.crt     /etc/ssl/certs/ca-certificates.crt\n ---> 78ea1e3e154b\nStep 12/13 : COPY --from=build-env     /app/topographer     /topographer\n ---> 82aa3f1aa448\nStep 13/13 : COPY --from=build-env     /app/example.config.hjson     /config.hjson\n ---> d4fdf9b37505\nSuccessfully built d4fdf9b37505\nSuccessfully tagged topographer:latest\n","stderr":"","imageSize":9341439}}