{"repository":"https://github.com/alphagov/email-alert-api","dockerfilePath":"Dockerfile","startTime":1672967120824,"endTime":1672967249786,"clone":{"startTime":1672967120825,"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/alphagov/email-alert-api'...\n","error":null,"endTime":1672967121873,"commit":"5881a071cdd507c7c0eda8bac9fe4467ef8fb25e"},"originalBuild":{"startTime":1672967121955,"endTime":1672967249286,"error":null,"stdout":"Sending build context to Docker daemon  2.466MB\r\r\nStep 1/14 : ARG base_image=ghcr.io/alphagov/govuk-ruby-base:3.1.2\nStep 2/14 : ARG builder_image=ghcr.io/alphagov/govuk-ruby-builder:3.1.2\nStep 3/14 : FROM $builder_image AS builder\n3.1.2: Pulling from alphagov/govuk-ruby-builder\n6e3729cf69e0: Already exists\n9ed578074b1a: Pulling fs layer\n02b53ac527fc: Pulling fs layer\nf8da887a8cac: Pulling fs layer\nca0762064fad: Pulling fs layer\n2064e02aa443: Pulling fs layer\n697ea29b76e7: Pulling fs layer\n01a0ce535e3f: Pulling fs layer\n3c8a917351b0: Pulling fs layer\n61d08558db01: Pulling fs layer\nc9b599fe367b: Pulling fs layer\n1577f1d76e07: Pulling fs layer\nf1e6f96d7fb3: Pulling fs layer\ne9b2a1cb21c0: Pulling fs layer\n3ea2c1545d38: Pulling fs layer\n92734e53a0df: Pulling fs layer\n697ea29b76e7: Waiting\nbb699660c937: Pulling fs layer\nd0ecf1301853: Pulling fs layer\n2064e02aa443: Waiting\n01a0ce535e3f: Waiting\nf491c7daf300: Pulling fs layer\nf1e6f96d7fb3: Waiting\ne9b2a1cb21c0: Waiting\n088b48a7438b: Pulling fs layer\n4b209c130eb0: Pulling fs layer\nc9b599fe367b: Waiting\n1577f1d76e07: Waiting\nbb699660c937: Waiting\n3ea2c1545d38: Waiting\n088b48a7438b: Waiting\n92734e53a0df: Waiting\nd0ecf1301853: Waiting\n3c8a917351b0: Waiting\n4b209c130eb0: Waiting\nca0762064fad: Waiting\nf491c7daf300: Waiting\n61d08558db01: Waiting\n9ed578074b1a: Verifying Checksum\n9ed578074b1a: Download complete\n02b53ac527fc: Verifying Checksum\n02b53ac527fc: Download complete\n9ed578074b1a: Pull complete\n02b53ac527fc: Pull complete\n2064e02aa443: Verifying Checksum\n2064e02aa443: Download complete\n697ea29b76e7: Verifying Checksum\n697ea29b76e7: Download complete\nf8da887a8cac: Pull complete\n01a0ce535e3f: Verifying Checksum\n01a0ce535e3f: Download complete\n3c8a917351b0: Download complete\nca0762064fad: Verifying Checksum\nca0762064fad: Download complete\n61d08558db01: Verifying Checksum\n61d08558db01: Download complete\n1577f1d76e07: Verifying Checksum\n1577f1d76e07: Download complete\nc9b599fe367b: Download complete\ne9b2a1cb21c0: Verifying Checksum\ne9b2a1cb21c0: Download complete\n3ea2c1545d38: Verifying Checksum\n3ea2c1545d38: Download complete\n92734e53a0df: Verifying Checksum\n92734e53a0df: Download complete\nbb699660c937: Download complete\nca0762064fad: Pull complete\nf1e6f96d7fb3: Verifying Checksum\nf1e6f96d7fb3: Download complete\n2064e02aa443: Pull complete\nd0ecf1301853: Verifying Checksum\nd0ecf1301853: Download complete\nf491c7daf300: Download complete\n697ea29b76e7: Pull complete\n4b209c130eb0: Verifying Checksum\n4b209c130eb0: Download complete\n01a0ce535e3f: Pull complete\n3c8a917351b0: Pull complete\n61d08558db01: Pull complete\nc9b599fe367b: Pull complete\n1577f1d76e07: Pull complete\n088b48a7438b: Verifying Checksum\n088b48a7438b: Download complete\nf1e6f96d7fb3: Pull complete\ne9b2a1cb21c0: Pull complete\n3ea2c1545d38: Pull complete\n92734e53a0df: Pull complete\nbb699660c937: Pull complete\nd0ecf1301853: Pull complete\nf491c7daf300: Pull complete\n088b48a7438b: Pull complete\n4b209c130eb0: Pull complete\nDigest: sha256:0fc6e07708b50c6ba04c599ebd5897c158325f69f0dc99863f3406ff7f3c9f89\nStatus: Downloaded newer image for ghcr.io/alphagov/govuk-ruby-builder:3.1.2\n ---> 85c6ac4e7a0a\nStep 4/14 : WORKDIR /app\n ---> Running in 670d73d17326\nRemoving intermediate container 670d73d17326\n ---> f081ca34824f\nStep 5/14 : COPY Gemfile* .ruby-version /app/\n ---> 8bb66016de4b\nStep 6/14 : RUN bundle install\n ---> Running in 09357905d9cf\n\u001b[91mINFO: with_tmpdir_for_ruby: execing bundle with TMPDIR=/tmp/ruby-app-KaEXCUUW\n\u001b[0mBundler 2.3.26 is running, but your lockfile was generated with 2.3.24. Installing Bundler 2.3.24 and restarting using that version.\nFetching gem metadata from https://rubygems.org/.\nFetching bundler 2.3.24\nInstalling bundler 2.3.24\nFetching gem metadata from https://rubygems.org/.........\nFetching rake 13.0.6\nInstalling rake 13.0.6\nFetching racc 1.6.2\nFetching crass 1.0.6\nFetching nio4r 2.5.8\nFetching builder 3.2.4\nFetching timeout 0.3.0\nFetching concurrent-ruby 1.1.10\nFetching minitest 5.17.0\nFetching erubi 1.12.0\nFetching rack 2.2.5\nFetching websocket-extensions 0.1.5\nFetching marcel 1.0.2\nFetching mini_mime 1.1.2\nInstalling timeout 0.3.0\nInstalling builder 3.2.4\nInstalling websocket-extensions 0.1.5\nInstalling erubi 1.12.0\nInstalling crass 1.0.6\nInstalling mini_mime 1.1.2\nInstalling marcel 1.0.2\nInstalling racc 1.6.2 with native extensions\nInstalling minitest 5.17.0\nFetching public_suffix 5.0.0\nFetching msgpack 1.6.0\nInstalling nio4r 2.5.8 with native extensions\nUsing bundler 2.3.24\nInstalling rack 2.2.5\nFetching connection_pool 2.3.0\nFetching unf_ext 0.0.8.2\nInstalling connection_pool 2.3.0\nFetching faraday-net_http 3.0.2\nInstalling faraday-net_http 3.0.2\nInstalling msgpack 1.6.0 with native extensions\nUsing ruby2_keywords 0.0.5\nFetching raabro 1.4.0\nInstalling public_suffix 5.0.0\nInstalling raabro 1.4.0\nInstalling concurrent-ruby 1.1.10\nFetching link_header 0.0.8\nFetching null_logger 0.0.1\nFetching plek 5.0.0\nFetching http-accept 1.7.0\nInstalling plek 5.0.0\nInstalling http-accept 1.7.0\nFetching mime-types-data 3.2022.0105\nFetching netrc 0.11.0\nInstalling null_logger 0.0.1\nInstalling netrc 0.11.0\nInstalling link_header 0.0.8\nInstalling unf_ext 0.0.8.2 with native extensions\nFetching jwt 2.6.0\nFetching multi_xml 0.6.0\nInstalling jwt 2.6.0\nFetching hashie 5.0.0\nInstalling multi_xml 0.6.0\nInstalling mime-types-data 3.2022.0105\nFetching version_gem 1.1.1\nInstalling hashie 5.0.0\nInstalling version_gem 1.1.1\nFetching method_source 1.0.0\nFetching thor 1.2.1\nInstalling method_source 1.0.0\nFetching zeitwerk 2.6.6\nInstalling thor 1.2.1\nInstalling zeitwerk 2.6.6\nFetching webrick 1.7.0\nFetching statsd-ruby 1.5.0\nFetching kgio 2.11.4\nInstalling statsd-ruby 1.5.0\nInstalling webrick 1.7.0\nInstalling kgio 2.11.4 with native extensions\nFetching raindrops 0.20.0\nFetching govuk_document_types 1.0.1\nFetching redis 4.5.1\nInstalling govuk_document_types 1.0.1\nFetching pg 1.4.5\nInstalling raindrops 0.20.0 with native extensions\nFetching redcarpet 3.5.1\nInstalling redis 4.5.1\nInstalling redcarpet 3.5.1 with native extensions\nFetching tilt 2.0.11\nFetching websocket-driver 0.7.5\nInstalling pg 1.4.5 with native extensions\nInstalling tilt 2.0.11\nInstalling websocket-driver 0.7.5 with native extensions\nFetching net-protocol 0.1.3\nInstalling net-protocol 0.1.3\nFetching mail 2.7.1\nFetching faraday 2.7.1\nFetching addressable 2.8.1\nFetching rack-test 2.0.2\nInstalling faraday 2.7.1\nInstalling rack-test 2.0.2\nInstalling mail 2.7.1\nInstalling addressable 2.8.1\nFetching rack-protection 3.0.4\nFetching warden 1.2.9\nInstalling rack-protection 3.0.4\nInstalling warden 1.2.9\nFetching request_store 1.5.1\nFetching rack-proxy 0.7.4\nInstalling request_store 1.5.1\nInstalling rack-proxy 0.7.4\nFetching notifications-ruby-client 5.4.0\nFetching mime-types 3.4.1\nInstalling mime-types 3.4.1\nFetching snaky_hash 2.0.1\nFetching prometheus_exporter 2.0.6\nInstalling snaky_hash 2.0.1\nInstalling prometheus_exporter 2.0.6\nFetching redis-namespace 1.8.2\nFetching i18n 1.12.0\nInstalling redis-namespace 1.8.2\nInstalling i18n 1.12.0\nInstalling notifications-ruby-client 5.4.0\nFetching tzinfo 2.0.5\nFetching sentry-ruby 5.7.0\nInstalling sentry-ruby 5.7.0\nInstalling tzinfo 2.0.5\nFetching net-imap 0.3.1\nFetching net-pop 0.1.2\nInstalling net-imap 0.3.1\nFetching net-smtp 0.3.3\nInstalling net-pop 0.1.2\nInstalling net-smtp 0.3.3\nFetching nokogiri 1.13.10 (x86_64-linux)\nFetching warden-oauth2 0.0.1\nFetching json-schema 3.0.0\nFetching omniauth 2.1.0\nInstalling json-schema 3.0.0\nFetching sidekiq 5.2.10\nInstalling omniauth 2.1.0\nFetching oauth2 2.0.9\nInstalling warden-oauth2 0.0.1\nFetching unf 0.1.4\nInstalling oauth2 2.0.9\nFetching ratelimit 1.0.3\nInstalling ratelimit 1.0.3\nInstalling sidekiq 5.2.10\nFetching activesupport 7.0.4\nFetching et-orbi 1.2.7\nInstalling et-orbi 1.2.7\nFetching bootsnap 1.15.0\nInstalling unf 0.1.4\nFetching omniauth-oauth2 1.8.0\nInstalling activesupport 7.0.4\nInstalling bootsnap 1.15.0 with native extensions\nFetching fugit 1.7.1\nInstalling omniauth-oauth2 1.8.0\nInstalling fugit 1.7.1\nFetching domain_name 0.5.20190701\nFetching rufus-scheduler 3.8.2\nInstalling domain_name 0.5.20190701\nInstalling rufus-scheduler 3.8.2\nFetching puma 6.0.2\nFetching http-cookie 1.0.5\nInstalling puma 6.0.2 with native extensions\nInstalling http-cookie 1.0.5\nFetching rest-client 2.1.0\nFetching sidekiq-logging-json 0.0.19\nFetching sentry-sidekiq 5.7.0\nFetching sidekiq-scheduler 4.0.3\nInstalling sentry-sidekiq 5.7.0\nInstalling sidekiq-scheduler 4.0.3\nInstalling rest-client 2.1.0\nInstalling sidekiq-logging-json 0.0.19\nInstalling nokogiri 1.13.10 (x86_64-linux)\nFetching gds-api-adapters 85.0.0\nInstalling gds-api-adapters 85.0.0\nFetching logstasher 2.1.5\nFetching globalid 1.0.0\nFetching activemodel 7.0.4\nFetching sidekiq-statsd 2.1.0\nInstalling logstasher 2.1.5\nInstalling globalid 1.0.0\nInstalling activemodel 7.0.4\nFetching activejob 7.0.4\nInstalling activejob 7.0.4\nFetching activerecord 7.0.4\nInstalling sidekiq-statsd 2.1.0\nInstalling activerecord 7.0.4\nFetching with_advisory_lock 4.6.0\nInstalling with_advisory_lock 4.6.0\nFetching rails-dom-testing 2.0.3\nFetching loofah 2.19.1\nInstalling rails-dom-testing 2.0.3\nInstalling loofah 2.19.1\nFetching rails-html-sanitizer 1.4.4\nInstalling rails-html-sanitizer 1.4.4\nFetching actionview 7.0.4\nInstalling actionview 7.0.4\nFetching actionpack 7.0.4\nInstalling actionpack 7.0.4\nFetching actioncable 7.0.4\nFetching actionmailer 7.0.4\nFetching activestorage 7.0.4\nFetching railties 7.0.4\nInstalling actionmailer 7.0.4\nInstalling actioncable 7.0.4\nInstalling activestorage 7.0.4\nInstalling railties 7.0.4\nFetching actiontext 7.0.4\nFetching actionmailbox 7.0.4\nInstalling actionmailbox 7.0.4\nInstalling actiontext 7.0.4\nFetching rails 7.0.4\nFetching sentry-rails 5.7.0\nInstalling rails 7.0.4\nInstalling sentry-rails 5.7.0\nFetching gds-sso 17.1.1\nFetching govuk_personalisation 0.12.0\nInstalling govuk_personalisation 0.12.0\nInstalling gds-sso 17.1.1\nFetching unicorn 6.1.0\nInstalling unicorn 6.1.0 with native extensions\nFetching govuk_app_config 4.12.0\nInstalling govuk_app_config 4.12.0\nFetching govuk_sidekiq 5.0.0\nInstalling govuk_sidekiq 5.0.0\nBundle complete! 34 Gemfile dependencies, 111 gems now installed.\nGems in the groups 'development', 'test' and 'cucumber' were not installed.\nBundled gems are installed into `/usr/local/bundle`\nRemoving intermediate container 09357905d9cf\n ---> b7fdafdf2c07\nStep 7/14 : COPY . /app\n ---> b99f14a1e850\nStep 8/14 : FROM $base_image\n3.1.2: Pulling from alphagov/govuk-ruby-base\n6e3729cf69e0: Already exists\n9ed578074b1a: Already exists\n02b53ac527fc: Already exists\nf8da887a8cac: Already exists\nca0762064fad: Already exists\n2064e02aa443: Already exists\n697ea29b76e7: Already exists\n01a0ce535e3f: Already exists\n3c8a917351b0: Already exists\n61d08558db01: Already exists\nc9b599fe367b: Already exists\n1577f1d76e07: Already exists\nf1e6f96d7fb3: Already exists\ne9b2a1cb21c0: Already exists\n3ea2c1545d38: Already exists\n92734e53a0df: Already exists\nbb699660c937: Already exists\nd0ecf1301853: Already exists\nf491c7daf300: Already exists\nDigest: sha256:fce05ecdb079beff03d080fa35f787925a83faab8fb6d7141fb59cd6ebf824bb\nStatus: Downloaded newer image for ghcr.io/alphagov/govuk-ruby-base:3.1.2\n ---> e4a1ce37f1c5\nStep 9/14 : ENV GOVUK_APP_NAME=email-alert-api\n ---> Running in 3ed66add0de9\nRemoving intermediate container 3ed66add0de9\n ---> ef625a0814b6\nStep 10/14 : WORKDIR /app\n ---> Running in a5c894715837\nRemoving intermediate container a5c894715837\n ---> 0a3654164a19\nStep 11/14 : COPY --from=builder /usr/local/bundle/ /usr/local/bundle/\n ---> 5902d849cc02\nStep 12/14 : COPY --from=builder /app /app/\n ---> 32e7ff0f741e\nStep 13/14 : USER app\n ---> Running in 2a5eee9a4856\nRemoving intermediate container 2a5eee9a4856\n ---> 6bd8f0355696\nStep 14/14 : CMD [\"bundle\", \"exec\", \"puma\"]\n ---> Running in 6a95dc69cecf\nRemoving intermediate container 6a95dc69cecf\n ---> 3b8c14729336\nSuccessfully built 3b8c14729336\nSuccessfully tagged email-alert-api:latest\n","stderr":"","imageSize":394098456},"repair":{"startTime":1672967249354,"endTime":1672967249373,"violations":[],"repairedDockerfile":"ARG base_image=ghcr.io/alphagov/govuk-ruby-base:3.1.2\nARG builder_image=ghcr.io/alphagov/govuk-ruby-builder:3.1.2\n\nFROM $builder_image AS builder\nWORKDIR /app\nCOPY Gemfile* .ruby-version /app/\nRUN bundle install\nCOPY . /app\n\nFROM $base_image\n\nENV GOVUK_APP_NAME=email-alert-api\n\nWORKDIR /app\n\nCOPY --from=builder /usr/local/bundle/ /usr/local/bundle/\nCOPY --from=builder /app /app/\n\nUSER app\n\nCMD [\"bundle\", \"exec\", \"puma\"]\n"}}