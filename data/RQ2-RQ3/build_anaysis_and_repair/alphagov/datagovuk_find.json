{"repository":"https://github.com/alphagov/datagovuk_find","dockerfilePath":"Dockerfile","startTime":1673247122404,"endTime":1673247506437,"clone":{"startTime":1673247122405,"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/alphagov/datagovuk_find'...\n","error":null,"endTime":1673247123375,"commit":"9979853c875e30dce092346eacff91f793003e3f"},"originalBuild":{"startTime":1673247123454,"endTime":1673247458771,"error":null,"stdout":"Sending build context to Docker daemon  2.254MB\r\r\nStep 1/11 : FROM ruby:2.7.6\n2.7.6: Pulling from library/ruby\na8ca11554fce: Pulling fs layer\ne4e46864aba2: Pulling fs layer\nc85a0be79bfb: Pulling fs layer\n195ea6a58ca8: Pulling fs layer\n157f16ed0a0c: Pulling fs layer\n3cb3f18bcb19: Pulling fs layer\nb381ff7e6476: Pulling fs layer\nd8699324d45a: Pulling fs layer\n157f16ed0a0c: Waiting\n3cb3f18bcb19: Waiting\nb381ff7e6476: Waiting\n195ea6a58ca8: Waiting\ne4e46864aba2: Verifying Checksum\ne4e46864aba2: Download complete\nc85a0be79bfb: Verifying Checksum\nc85a0be79bfb: Download complete\na8ca11554fce: Verifying Checksum\na8ca11554fce: Download complete\n3cb3f18bcb19: Verifying Checksum\n3cb3f18bcb19: Download complete\n195ea6a58ca8: Verifying Checksum\n195ea6a58ca8: Download complete\nd8699324d45a: Verifying Checksum\nd8699324d45a: Download complete\nb381ff7e6476: Verifying Checksum\nb381ff7e6476: Download complete\n157f16ed0a0c: Verifying Checksum\n157f16ed0a0c: Download complete\na8ca11554fce: Pull complete\ne4e46864aba2: Pull complete\nc85a0be79bfb: Pull complete\n195ea6a58ca8: Pull complete\n157f16ed0a0c: Pull complete\n3cb3f18bcb19: Pull complete\nb381ff7e6476: Pull complete\nd8699324d45a: Pull complete\nDigest: sha256:7a7adf53e69f833eda3205c628ae7f83e32a8095bfb3a96686cf0369f6c2f63b\nStatus: Downloaded newer image for ruby:2.7.6\n ---> 39d45c2f7aa0\nStep 2/11 : WORKDIR /srv/app/datagovuk_find\n ---> Running in 61bc666667b7\nRemoving intermediate container 61bc666667b7\n ---> a5396b66531d\nStep 3/11 : RUN apt-get update\n ---> Running in 4adb4ec5284e\nGet:1 http://deb.debian.org/debian bullseye InRelease [116 kB]\nGet:2 http://deb.debian.org/debian-security bullseye-security InRelease [48.4 kB]\nGet:3 http://deb.debian.org/debian bullseye-updates InRelease [44.1 kB]\nGet:4 http://deb.debian.org/debian bullseye/main amd64 Packages [8183 kB]\nGet:5 http://deb.debian.org/debian-security bullseye-security/main amd64 Packages [210 kB]\nGet:6 http://deb.debian.org/debian bullseye-updates/main amd64 Packages [14.6 kB]\nFetched 8616 kB in 2s (5262 kB/s)\nReading package lists...\nRemoving intermediate container 4adb4ec5284e\n ---> c36437857cdf\nStep 4/11 : RUN apt-get install -y nodejs postgresql postgresql-contrib\n ---> Running in 22abb7a7aed4\nReading package lists...\nBuilding dependency tree...\nReading state information...\nThe following additional packages will be installed:\n  cron exim4-base exim4-config exim4-daemon-light gsasl-common guile-2.2-libs\n  javascript-common libc-ares2 libc-l10n libgc1 libgnutls-dane0 libgsasl7\n  libidn11 libjs-highlight.js libllvm11 libmailutils7 libnode72 libntlm0\n  libpopt0 libpq-dev libpq5 libpython3.9 libsensors-config libsensors5\n  libunbound8 libuv1 libz3-4 locales logrotate mailutils mailutils-common\n  nodejs-doc postgresql-13 postgresql-client-13 postgresql-client-common\n  postgresql-common psmisc ssl-cert sysstat\nSuggested packages:\n  anacron checksecurity exim4-doc-html | exim4-doc-info eximon4 spf-tools-perl\n  swaks apache2 | lighttpd | httpd dns-root-data postgresql-doc-13 lm-sensors\n  mailutils-mh mailutils-doc npm postgresql-doc libjson-perl isag\nThe following NEW packages will be installed:\n  cron exim4-base exim4-config exim4-daemon-light gsasl-common guile-2.2-libs\n  javascript-common libc-ares2 libc-l10n libgc1 libgnutls-dane0 libgsasl7\n  libidn11 libjs-highlight.js libllvm11 libmailutils7 libnode72 libntlm0\n  libpopt0 libpython3.9 libsensors-config libsensors5 libunbound8 libuv1\n  libz3-4 locales logrotate mailutils mailutils-common nodejs nodejs-doc\n  postgresql postgresql-13 postgresql-client-13 postgresql-client-common\n  postgresql-common postgresql-contrib psmisc ssl-cert sysstat\nThe following packages will be upgraded:\n  libpq-dev libpq5\n2 upgraded, 40 newly installed, 0 to remove and 20 not upgraded.\nNeed to get 72.8 MB of archives.\nAfter this operation, 304 MB of additional disk space will be used.\nGet:1 http://deb.debian.org/debian bullseye/main amd64 cron amd64 3.0pl1-137 [99.6 kB]\nGet:2 http://deb.debian.org/debian bullseye/main amd64 libpopt0 amd64 1.18-2 [49.6 kB]\nGet:3 http://deb.debian.org/debian bullseye/main amd64 logrotate amd64 3.18.0-2+deb11u1 [72.7 kB]\nGet:4 http://deb.debian.org/debian bullseye/main amd64 libc-l10n all 2.31-13+deb11u5 [865 kB]\nGet:5 http://deb.debian.org/debian bullseye/main amd64 locales all 2.31-13+deb11u5 [4086 kB]\nGet:6 http://deb.debian.org/debian bullseye/main amd64 exim4-config all 4.94.2-7 [335 kB]\nGet:7 http://deb.debian.org/debian bullseye/main amd64 exim4-base amd64 4.94.2-7 [1175 kB]\nGet:8 http://deb.debian.org/debian bullseye/main amd64 libunbound8 amd64 1.13.1-1 [504 kB]\nGet:9 http://deb.debian.org/debian bullseye/main amd64 libgnutls-dane0 amd64 3.7.1-5+deb11u2 [395 kB]\nGet:10 http://deb.debian.org/debian bullseye/main amd64 libidn11 amd64 1.33-3 [116 kB]\nGet:11 http://deb.debian.org/debian bullseye/main amd64 exim4-daemon-light amd64 4.94.2-7 [658 kB]\nGet:12 http://deb.debian.org/debian bullseye/main amd64 gsasl-common all 1.10.0-4+deb11u1 [175 kB]\nGet:13 http://deb.debian.org/debian bullseye/main amd64 libgc1 amd64 1:8.0.4-3 [239 kB]\nGet:14 http://deb.debian.org/debian bullseye/main amd64 guile-2.2-libs amd64 2.2.7+1-6 [4980 kB]\nGet:15 http://deb.debian.org/debian bullseye/main amd64 javascript-common all 11+nmu1 [6260 B]\nGet:16 http://deb.debian.org/debian bullseye/main amd64 libc-ares2 amd64 1.17.1-1+deb11u1 [102 kB]\nGet:17 http://deb.debian.org/debian bullseye/main amd64 libntlm0 amd64 1.6-3 [84.7 kB]\nGet:18 http://deb.debian.org/debian bullseye/main amd64 libgsasl7 amd64 1.10.0-4+deb11u1 [195 kB]\nGet:19 http://deb.debian.org/debian bullseye/main amd64 libjs-highlight.js all 9.18.5+dfsg1-1 [397 kB]\nGet:20 http://deb.debian.org/debian bullseye/main amd64 libz3-4 amd64 4.8.10-1 [6949 kB]\nGet:21 http://deb.debian.org/debian bullseye/main amd64 libllvm11 amd64 1:11.0.1-2 [17.9 MB]\nGet:22 http://deb.debian.org/debian bullseye/main amd64 mailutils-common all 1:3.10-3 [728 kB]\nGet:23 http://deb.debian.org/debian bullseye/main amd64 libpython3.9 amd64 3.9.2-1 [1691 kB]\nGet:24 http://deb.debian.org/debian bullseye/main amd64 libmailutils7 amd64 1:3.10-3+b1 [893 kB]\nGet:25 http://deb.debian.org/debian bullseye/main amd64 libuv1 amd64 1.40.0-2 [132 kB]\nGet:26 http://deb.debian.org/debian-security bullseye-security/main amd64 libnode72 amd64 12.22.12~dfsg-1~deb11u1 [8319 kB]\nGet:27 http://deb.debian.org/debian bullseye/main amd64 libpq-dev amd64 13.9-0+deb11u1 [139 kB]\nGet:28 http://deb.debian.org/debian bullseye/main amd64 libpq5 amd64 13.9-0+deb11u1 [180 kB]\nGet:29 http://deb.debian.org/debian bullseye/main amd64 libsensors-config all 1:3.6.0-7 [32.3 kB]\nGet:30 http://deb.debian.org/debian bullseye/main amd64 libsensors5 amd64 1:3.6.0-7 [52.3 kB]\nGet:31 http://deb.debian.org/debian bullseye/main amd64 mailutils amd64 1:3.10-3+b1 [576 kB]\nGet:32 http://deb.debian.org/debian-security bullseye-security/main amd64 nodejs amd64 12.22.12~dfsg-1~deb11u1 [147 kB]\nGet:33 http://deb.debian.org/debian-security bullseye-security/main amd64 nodejs-doc all 12.22.12~dfsg-1~deb11u1 [2547 kB]\nGet:34 http://deb.debian.org/debian bullseye/main amd64 postgresql-client-common all 225 [89.3 kB]\nGet:35 http://deb.debian.org/debian bullseye/main amd64 postgresql-client-13 amd64 13.9-0+deb11u1 [1508 kB]\nGet:36 http://deb.debian.org/debian bullseye/main amd64 ssl-cert all 1.1.0+nmu1 [21.0 kB]\nGet:37 http://deb.debian.org/debian bullseye/main amd64 postgresql-common all 225 [237 kB]\nGet:38 http://deb.debian.org/debian bullseye/main amd64 postgresql-13 amd64 13.9-0+deb11u1 [15.2 MB]\nGet:39 http://deb.debian.org/debian bullseye/main amd64 postgresql all 13+225 [64.7 kB]\nGet:40 http://deb.debian.org/debian bullseye/main amd64 postgresql-contrib all 13+225 [64.8 kB]\nGet:41 http://deb.debian.org/debian bullseye/main amd64 psmisc amd64 23.4-2 [198 kB]\nGet:42 http://deb.debian.org/debian bullseye/main amd64 sysstat amd64 12.5.2-2 [603 kB]\n\u001b[91mdebconf: delaying package configuration, since apt-utils is not installed\n\u001b[0mFetched 72.8 MB in 2s (47.6 MB/s)\nSelecting previously unselected package cron.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 22790 files and directories currently installed.)\r\nPreparing to unpack .../00-cron_3.0pl1-137_amd64.deb ...\r\nUnpacking cron (3.0pl1-137) ...\r\nSelecting previously unselected package libpopt0:amd64.\r\nPreparing to unpack .../01-libpopt0_1.18-2_amd64.deb ...\r\nUnpacking libpopt0:amd64 (1.18-2) ...\r\nSelecting previously unselected package logrotate.\r\nPreparing to unpack .../02-logrotate_3.18.0-2+deb11u1_amd64.deb ...\r\nUnpacking logrotate (3.18.0-2+deb11u1) ...\r\nSelecting previously unselected package libc-l10n.\r\nPreparing to unpack .../03-libc-l10n_2.31-13+deb11u5_all.deb ...\r\nUnpacking libc-l10n (2.31-13+deb11u5) ...\r\nSelecting previously unselected package locales.\r\nPreparing to unpack .../04-locales_2.31-13+deb11u5_all.deb ...\r\nUnpacking locales (2.31-13+deb11u5) ...\r\nSelecting previously unselected package exim4-config.\r\nPreparing to unpack .../05-exim4-config_4.94.2-7_all.deb ...\r\nUnpacking exim4-config (4.94.2-7) ...\r\nSelecting previously unselected package exim4-base.\r\nPreparing to unpack .../06-exim4-base_4.94.2-7_amd64.deb ...\r\nUnpacking exim4-base (4.94.2-7) ...\r\nSelecting previously unselected package libunbound8:amd64.\r\nPreparing to unpack .../07-libunbound8_1.13.1-1_amd64.deb ...\r\nUnpacking libunbound8:amd64 (1.13.1-1) ...\r\nSelecting previously unselected package libgnutls-dane0:amd64.\r\nPreparing to unpack .../08-libgnutls-dane0_3.7.1-5+deb11u2_amd64.deb ...\r\nUnpacking libgnutls-dane0:amd64 (3.7.1-5+deb11u2) ...\r\nSelecting previously unselected package libidn11:amd64.\r\nPreparing to unpack .../09-libidn11_1.33-3_amd64.deb ...\r\nUnpacking libidn11:amd64 (1.33-3) ...\r\nSelecting previously unselected package exim4-daemon-light.\r\nPreparing to unpack .../10-exim4-daemon-light_4.94.2-7_amd64.deb ...\r\nUnpacking exim4-daemon-light (4.94.2-7) ...\r\nSelecting previously unselected package gsasl-common.\r\nPreparing to unpack .../11-gsasl-common_1.10.0-4+deb11u1_all.deb ...\r\nUnpacking gsasl-common (1.10.0-4+deb11u1) ...\r\nSelecting previously unselected package libgc1:amd64.\r\nPreparing to unpack .../12-libgc1_1%3a8.0.4-3_amd64.deb ...\r\nUnpacking libgc1:amd64 (1:8.0.4-3) ...\r\nSelecting previously unselected package guile-2.2-libs:amd64.\r\nPreparing to unpack .../13-guile-2.2-libs_2.2.7+1-6_amd64.deb ...\r\nUnpacking guile-2.2-libs:amd64 (2.2.7+1-6) ...\r\nSelecting previously unselected package javascript-common.\r\nPreparing to unpack .../14-javascript-common_11+nmu1_all.deb ...\r\nUnpacking javascript-common (11+nmu1) ...\r\nSelecting previously unselected package libc-ares2:amd64.\r\nPreparing to unpack .../15-libc-ares2_1.17.1-1+deb11u1_amd64.deb ...\r\nUnpacking libc-ares2:amd64 (1.17.1-1+deb11u1) ...\r\nSelecting previously unselected package libntlm0:amd64.\r\nPreparing to unpack .../16-libntlm0_1.6-3_amd64.deb ...\r\nUnpacking libntlm0:amd64 (1.6-3) ...\r\nSelecting previously unselected package libgsasl7:amd64.\r\nPreparing to unpack .../17-libgsasl7_1.10.0-4+deb11u1_amd64.deb ...\r\nUnpacking libgsasl7:amd64 (1.10.0-4+deb11u1) ...\r\nSelecting previously unselected package libjs-highlight.js.\r\nPreparing to unpack .../18-libjs-highlight.js_9.18.5+dfsg1-1_all.deb ...\r\nUnpacking libjs-highlight.js (9.18.5+dfsg1-1) ...\r\nSelecting previously unselected package libz3-4:amd64.\r\nPreparing to unpack .../19-libz3-4_4.8.10-1_amd64.deb ...\r\nUnpacking libz3-4:amd64 (4.8.10-1) ...\r\nSelecting previously unselected package libllvm11:amd64.\r\nPreparing to unpack .../20-libllvm11_1%3a11.0.1-2_amd64.deb ...\r\nUnpacking libllvm11:amd64 (1:11.0.1-2) ...\r\nSelecting previously unselected package mailutils-common.\r\nPreparing to unpack .../21-mailutils-common_1%3a3.10-3_all.deb ...\r\nUnpacking mailutils-common (1:3.10-3) ...\r\nSelecting previously unselected package libpython3.9:amd64.\r\nPreparing to unpack .../22-libpython3.9_3.9.2-1_amd64.deb ...\r\nUnpacking libpython3.9:amd64 (3.9.2-1) ...\r\nSelecting previously unselected package libmailutils7:amd64.\r\nPreparing to unpack .../23-libmailutils7_1%3a3.10-3+b1_amd64.deb ...\r\nUnpacking libmailutils7:amd64 (1:3.10-3+b1) ...\r\nSelecting previously unselected package libuv1:amd64.\r\nPreparing to unpack .../24-libuv1_1.40.0-2_amd64.deb ...\r\nUnpacking libuv1:amd64 (1.40.0-2) ...\r\nSelecting previously unselected package libnode72:amd64.\r\nPreparing to unpack .../25-libnode72_12.22.12~dfsg-1~deb11u1_amd64.deb ...\r\nUnpacking libnode72:amd64 (12.22.12~dfsg-1~deb11u1) ...\r\nPreparing to unpack .../26-libpq-dev_13.9-0+deb11u1_amd64.deb ...\r\nUnpacking libpq-dev (13.9-0+deb11u1) over (13.8-0+deb11u1) ...\r\nPreparing to unpack .../27-libpq5_13.9-0+deb11u1_amd64.deb ...\r\nUnpacking libpq5:amd64 (13.9-0+deb11u1) over (13.8-0+deb11u1) ...\r\nSelecting previously unselected package libsensors-config.\r\nPreparing to unpack .../28-libsensors-config_1%3a3.6.0-7_all.deb ...\r\nUnpacking libsensors-config (1:3.6.0-7) ...\r\nSelecting previously unselected package libsensors5:amd64.\r\nPreparing to unpack .../29-libsensors5_1%3a3.6.0-7_amd64.deb ...\r\nUnpacking libsensors5:amd64 (1:3.6.0-7) ...\r\nSelecting previously unselected package mailutils.\r\nPreparing to unpack .../30-mailutils_1%3a3.10-3+b1_amd64.deb ...\r\nUnpacking mailutils (1:3.10-3+b1) ...\r\nSelecting previously unselected package nodejs.\r\nPreparing to unpack .../31-nodejs_12.22.12~dfsg-1~deb11u1_amd64.deb ...\r\nUnpacking nodejs (12.22.12~dfsg-1~deb11u1) ...\r\nSelecting previously unselected package nodejs-doc.\r\nPreparing to unpack .../32-nodejs-doc_12.22.12~dfsg-1~deb11u1_all.deb ...\r\nUnpacking nodejs-doc (12.22.12~dfsg-1~deb11u1) ...\r\nSelecting previously unselected package postgresql-client-common.\r\nPreparing to unpack .../33-postgresql-client-common_225_all.deb ...\r\nUnpacking postgresql-client-common (225) ...\r\nSelecting previously unselected package postgresql-client-13.\r\nPreparing to unpack .../34-postgresql-client-13_13.9-0+deb11u1_amd64.deb ...\r\nUnpacking postgresql-client-13 (13.9-0+deb11u1) ...\r\nSelecting previously unselected package ssl-cert.\r\nPreparing to unpack .../35-ssl-cert_1.1.0+nmu1_all.deb ...\r\nUnpacking ssl-cert (1.1.0+nmu1) ...\r\nSelecting previously unselected package postgresql-common.\r\nPreparing to unpack .../36-postgresql-common_225_all.deb ...\r\nAdding 'diversion of /usr/bin/pg_config to /usr/bin/pg_config.libpq-dev by postgresql-common'\r\nUnpacking postgresql-common (225) ...\r\nSelecting previously unselected package postgresql-13.\r\nPreparing to unpack .../37-postgresql-13_13.9-0+deb11u1_amd64.deb ...\r\nUnpacking postgresql-13 (13.9-0+deb11u1) ...\r\nSelecting previously unselected package postgresql.\r\nPreparing to unpack .../38-postgresql_13+225_all.deb ...\r\nUnpacking postgresql (13+225) ...\r\nSelecting previously unselected package postgresql-contrib.\r\nPreparing to unpack .../39-postgresql-contrib_13+225_all.deb ...\r\nUnpacking postgresql-contrib (13+225) ...\r\nSelecting previously unselected package psmisc.\r\nPreparing to unpack .../40-psmisc_23.4-2_amd64.deb ...\r\nUnpacking psmisc (23.4-2) ...\r\nSelecting previously unselected package sysstat.\r\nPreparing to unpack .../41-sysstat_12.5.2-2_amd64.deb ...\r\nUnpacking sysstat (12.5.2-2) ...\r\nSetting up postgresql-client-common (225) ...\r\nSetting up javascript-common (11+nmu1) ...\r\nSetting up libc-l10n (2.31-13+deb11u5) ...\r\nSetting up psmisc (23.4-2) ...\r\nSetting up cron (3.0pl1-137) ...\r\nAdding group `crontab' (GID 102) ...\r\nDone.\r\ninvoke-rc.d: could not determine current runlevel\r\ninvoke-rc.d: policy-rc.d denied execution of start.\r\nSetting up libsensors-config (1:3.6.0-7) ...\r\nSetting up libpq5:amd64 (13.9-0+deb11u1) ...\r\nSetting up libpq-dev (13.9-0+deb11u1) ...\r\nSetting up libc-ares2:amd64 (1.17.1-1+deb11u1) ...\r\nSetting up locales (2.31-13+deb11u5) ...\r\ndebconf: unable to initialize frontend: Dialog\r\ndebconf: (TERM is not set, so the dialog frontend is not usable.)\r\ndebconf: falling back to frontend: Readline\r\nGenerating locales (this might take a while)...\r\nGeneration complete.\r\nSetting up postgresql-client-13 (13.9-0+deb11u1) ...\r\nupdate-alternatives: using /usr/share/postgresql/13/man/man1/psql.1.gz to provide /usr/share/man/man1/psql.1.gz (psql.1.gz) in auto mode\r\nSetting up libz3-4:amd64 (4.8.10-1) ...\r\nSetting up libunbound8:amd64 (1.13.1-1) ...\r\nSetting up libuv1:amd64 (1.40.0-2) ...\r\nSetting up libpython3.9:amd64 (3.9.2-1) ...\r\nSetting up libllvm11:amd64 (1:11.0.1-2) ...\r\nSetting up libntlm0:amd64 (1.6-3) ...\r\nSetting up ssl-cert (1.1.0+nmu1) ...\r\ndebconf: unable to initialize frontend: Dialog\r\ndebconf: (TERM is not set, so the dialog frontend is not usable.)\r\ndebconf: falling back to frontend: Readline\r\nSetting up libidn11:amd64 (1.33-3) ...\r\nSetting up postgresql-common (225) ...\r\ndebconf: unable to initialize frontend: Dialog\r\ndebconf: (TERM is not set, so the dialog frontend is not usable.)\r\ndebconf: falling back to frontend: Readline\r\nAdding user postgres to group ssl-cert\r\n\r\nCreating config file /etc/postgresql-common/createcluster.conf with new version\r\nBuilding PostgreSQL dictionaries from installed myspell/hunspell packages...\r\nRemoving obsolete dictionary files:\r\ninvoke-rc.d: could not determine current runlevel\r\ninvoke-rc.d: policy-rc.d denied execution of start.\r\nSetting up mailutils-common (1:3.10-3) ...\r\nSetting up libsensors5:amd64 (1:3.6.0-7) ...\r\nSetting up libgc1:amd64 (1:8.0.4-3) ...\r\nSetting up libjs-highlight.js (9.18.5+dfsg1-1) ...\r\nSetting up exim4-config (4.94.2-7) ...\r\ndebconf: unable to initialize frontend: Dialog\r\ndebconf: (TERM is not set, so the dialog frontend is not usable.)\r\ndebconf: falling back to frontend: Readline\r\nAdding system-user for exim (v4)\r\nSetting up postgresql-13 (13.9-0+deb11u1) ...\r\ndebconf: unable to initialize frontend: Dialog\r\ndebconf: (TERM is not set, so the dialog frontend is not usable.)\r\ndebconf: falling back to frontend: Readline\r\nCreating new PostgreSQL cluster 13/main ...\r\n/usr/lib/postgresql/13/bin/initdb -D /var/lib/postgresql/13/main --auth-local peer --auth-host md5\r\nThe files belonging to this database system will be owned by user \"postgres\".\r\nThis user must also own the server process.\r\n\r\nThe database cluster will be initialized with locale \"C.UTF-8\".\r\nThe default database encoding has accordingly been set to \"UTF8\".\r\nThe default text search configuration will be set to \"english\".\r\n\r\nData page checksums are disabled.\r\n\r\nfixing permissions on existing directory /var/lib/postgresql/13/main ... ok\r\ncreating subdirectories ... ok\r\nselecting dynamic shared memory implementation ... posix\r\nselecting default max_connections ... 100\r\nselecting default shared_buffers ... 128MB\r\nselecting default time zone ... Etc/UTC\r\ncreating configuration files ... ok\r\nrunning bootstrap script ... ok\r\nperforming post-bootstrap initialization ... ok\r\nsyncing data to disk ... ok\r\n\r\nSuccess. You can now start the database server using:\r\n\r\n    pg_ctlcluster 13 main start\r\n\r\nVer Cluster Port Status Owner    Data directory              Log file\r\n\u001b[31m13  main    5432 down   postgres /var/lib/postgresql/13/main /var/log/postgresql/postgresql-13-main.log\u001b[0m\r\nupdate-alternatives: using /usr/share/postgresql/13/man/man1/postmaster.1.gz to provide /usr/share/man/man1/postmaster.1.gz (postmaster.1.gz) in auto mode\r\ninvoke-rc.d: could not determine current runlevel\r\ninvoke-rc.d: policy-rc.d denied execution of start.\r\nSetting up gsasl-common (1.10.0-4+deb11u1) ...\r\nSetting up postgresql (13+225) ...\r\nSetting up sysstat (12.5.2-2) ...\r\ndebconf: unable to initialize frontend: Dialog\r\ndebconf: (TERM is not set, so the dialog frontend is not usable.)\r\ndebconf: falling back to frontend: Readline\r\n\r\nCreating config file /etc/default/sysstat with new version\r\nupdate-alternatives: using /usr/bin/sar.sysstat to provide /usr/bin/sar (sar) in auto mode\r\nSetting up guile-2.2-libs:amd64 (2.2.7+1-6) ...\r\nSetting up libpopt0:amd64 (1.18-2) ...\r\nSetting up logrotate (3.18.0-2+deb11u1) ...\r\nSetting up libgnutls-dane0:amd64 (3.7.1-5+deb11u2) ...\r\nSetting up exim4-base (4.94.2-7) ...\r\ndebconf: unable to initialize frontend: Dialog\r\ndebconf: (TERM is not set, so the dialog frontend is not usable.)\r\ndebconf: falling back to frontend: Readline\r\nexim: DB upgrade, deleting hints-db\r\nSetting up libgsasl7:amd64 (1.10.0-4+deb11u1) ...\r\nSetting up libnode72:amd64 (12.22.12~dfsg-1~deb11u1) ...\r\nSetting up nodejs-doc (12.22.12~dfsg-1~deb11u1) ...\r\nSetting up postgresql-contrib (13+225) ...\r\nSetting up exim4-daemon-light (4.94.2-7) ...\r\ndebconf: unable to initialize frontend: Dialog\r\ndebconf: (TERM is not set, so the dialog frontend is not usable.)\r\ndebconf: falling back to frontend: Readline\r\ninvoke-rc.d: could not determine current runlevel\r\ninvoke-rc.d: policy-rc.d denied execution of start.\r\nSetting up libmailutils7:amd64 (1:3.10-3+b1) ...\r\nSetting up nodejs (12.22.12~dfsg-1~deb11u1) ...\r\nupdate-alternatives: using /usr/bin/nodejs to provide /usr/bin/js (js) in auto mode\r\nSetting up mailutils (1:3.10-3+b1) ...\r\nupdate-alternatives: using /usr/bin/frm.mailutils to provide /usr/bin/frm (frm) in auto mode\r\nupdate-alternatives: using /usr/bin/from.mailutils to provide /usr/bin/from (from) in auto mode\r\nupdate-alternatives: using /usr/bin/messages.mailutils to provide /usr/bin/messages (messages) in auto mode\r\nupdate-alternatives: using /usr/bin/movemail.mailutils to provide /usr/bin/movemail (movemail) in auto mode\r\nupdate-alternatives: using /usr/bin/readmsg.mailutils to provide /usr/bin/readmsg (readmsg) in auto mode\r\nupdate-alternatives: using /usr/bin/dotlock.mailutils to provide /usr/bin/dotlock (dotlock) in auto mode\r\nupdate-alternatives: using /usr/bin/mail.mailutils to provide /usr/bin/mailx (mailx) in auto mode\r\nProcessing triggers for libc-bin (2.31-13+deb11u5) ...\r\nRemoving intermediate container 22abb7a7aed4\n ---> 78692f3a8316\nStep 5/11 : RUN apt-get remove -y cmdtest\n ---> Running in 4bd971c0dcb0\nReading package lists...\nBuilding dependency tree...\nReading state information...\nPackage 'cmdtest' is not installed, so not removed\n0 upgraded, 0 newly installed, 0 to remove and 20 not upgraded.\nRemoving intermediate container 4bd971c0dcb0\n ---> 57d65b8a4bb4\nStep 6/11 : RUN apt autoremove -y\n ---> Running in 0a32b53f544c\n\u001b[91m\nWARNING: apt does not have a stable CLI interface. Use with caution in scripts.\n\n\u001b[0mReading package lists...\nBuilding dependency tree...\nReading state information...\n0 upgraded, 0 newly installed, 0 to remove and 20 not upgraded.\nRemoving intermediate container 0a32b53f544c\n ---> 5b874d2ad782\nStep 7/11 : RUN curl -sS https://dl.yarnpkg.com/debian/pubkey.gpg | apt-key add -\n ---> Running in f6ccd8130b0e\n\u001b[91mWarning: apt-key is deprecated. Manage keyring files in trusted.gpg.d instead (see apt-key(8)).\n\u001b[0mOK\nRemoving intermediate container f6ccd8130b0e\n ---> 48684ea5ed5f\nStep 8/11 : RUN echo \"deb https://dl.yarnpkg.com/debian/ stable main\" | tee /etc/apt/sources.list.d/yarn.list\n ---> Running in 728cfbd5c4d6\ndeb https://dl.yarnpkg.com/debian/ stable main\nRemoving intermediate container 728cfbd5c4d6\n ---> 2b0d01b10094\nStep 9/11 : RUN apt-get update && apt-get install -y yarn\n ---> Running in 81916c810805\nHit:1 http://deb.debian.org/debian bullseye InRelease\nHit:2 http://deb.debian.org/debian-security bullseye-security InRelease\nHit:3 http://deb.debian.org/debian bullseye-updates InRelease\nGet:4 https://dl.yarnpkg.com/debian stable InRelease [17.1 kB]\nGet:5 https://dl.yarnpkg.com/debian stable/main all Packages [10.9 kB]\nGet:6 https://dl.yarnpkg.com/debian stable/main amd64 Packages [10.9 kB]\nFetched 38.9 kB in 1s (48.5 kB/s)\nReading package lists...\nReading package lists...\nBuilding dependency tree...\nReading state information...\nThe following NEW packages will be installed:\n  yarn\n0 upgraded, 1 newly installed, 0 to remove and 20 not upgraded.\nNeed to get 893 kB of archives.\nAfter this operation, 5415 kB of additional disk space will be used.\nGet:1 https://dl.yarnpkg.com/debian stable/main amd64 yarn all 1.22.19-1 [893 kB]\n\u001b[91mdebconf: delaying package configuration, since apt-utils is not installed\n\u001b[0mFetched 893 kB in 0s (12.1 MB/s)\nSelecting previously unselected package yarn.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 27192 files and directories currently installed.)\r\nPreparing to unpack .../yarn_1.22.19-1_all.deb ...\r\nUnpacking yarn (1.22.19-1) ...\r\nSetting up yarn (1.22.19-1) ...\r\nRemoving intermediate container 81916c810805\n ---> f354f05c827c\nStep 10/11 : COPY ./ /srv/app/datagovuk_find\n ---> e176ec9caf26\nStep 11/11 : RUN gem install bundler --conservative &&     bundle install &&     bin/yarn\n ---> Running in 4672d7c59814\nFetching gem metadata from https://rubygems.org/.........\nFetching rake 13.0.6\nInstalling rake 13.0.6\nFetching concurrent-ruby 1.1.10\nInstalling concurrent-ruby 1.1.10\nFetching i18n 1.12.0\nInstalling i18n 1.12.0\nFetching minitest 5.16.3\nInstalling minitest 5.16.3\nFetching tzinfo 2.0.5\nInstalling tzinfo 2.0.5\nFetching zeitwerk 2.6.0\nInstalling zeitwerk 2.6.0\nFetching activesupport 6.1.6.1\nInstalling activesupport 6.1.6.1\nFetching builder 3.2.4\nInstalling builder 3.2.4\nFetching erubi 1.10.0\nInstalling erubi 1.10.0\nFetching mini_portile2 2.8.0\nInstalling mini_portile2 2.8.0\nFetching racc 1.6.0\nInstalling racc 1.6.0 with native extensions\nFetching nokogiri 1.13.3 (x86_64-linux)\nInstalling nokogiri 1.13.3 (x86_64-linux)\nFetching rails-dom-testing 2.0.3\nInstalling rails-dom-testing 2.0.3\nFetching crass 1.0.6\nInstalling crass 1.0.6\nFetching loofah 2.18.0\nInstalling loofah 2.18.0\nFetching rails-html-sanitizer 1.4.3\nInstalling rails-html-sanitizer 1.4.3\nFetching actionview 6.1.6.1\nInstalling actionview 6.1.6.1\nFetching rack 2.2.4\nInstalling rack 2.2.4\nFetching rack-test 2.0.2\nInstalling rack-test 2.0.2\nFetching actionpack 6.1.6.1\nInstalling actionpack 6.1.6.1\nFetching nio4r 2.5.8\nInstalling nio4r 2.5.8 with native extensions\nFetching websocket-extensions 0.1.5\nInstalling websocket-extensions 0.1.5\nFetching websocket-driver 0.7.5\nInstalling websocket-driver 0.7.5 with native extensions\nFetching actioncable 6.1.6.1\nInstalling actioncable 6.1.6.1\nFetching globalid 1.0.0\nInstalling globalid 1.0.0\nFetching activejob 6.1.6.1\nInstalling activejob 6.1.6.1\nFetching activemodel 6.1.6.1\nInstalling activemodel 6.1.6.1\nFetching activerecord 6.1.6.1\nInstalling activerecord 6.1.6.1\nFetching marcel 1.0.2\nInstalling marcel 1.0.2\nFetching mini_mime 1.1.2\nInstalling mini_mime 1.1.2\nFetching activestorage 6.1.6.1\nInstalling activestorage 6.1.6.1\nFetching mail 2.7.1\nInstalling mail 2.7.1\nFetching actionmailbox 6.1.6.1\nInstalling actionmailbox 6.1.6.1\nFetching actionmailer 6.1.6.1\nInstalling actionmailer 6.1.6.1\nFetching actiontext 6.1.6.1\nInstalling actiontext 6.1.6.1\nFetching public_suffix 4.0.6\nInstalling public_suffix 4.0.6\nFetching addressable 2.8.0\nInstalling addressable 2.8.0\nFetching ast 2.4.2\nInstalling ast 2.4.2\nFetching debug_inspector 1.1.0\nInstalling debug_inspector 1.1.0 with native extensions\nFetching binding_of_caller 1.0.0\nInstalling binding_of_caller 1.0.0\nFetching msgpack 1.4.5\nInstalling msgpack 1.4.5 with native extensions\nFetching bootsnap 1.10.3\nInstalling bootsnap 1.10.3 with native extensions\nFetching brakeman 5.2.1\nInstalling brakeman 5.2.1\nFetching browser 5.3.1\nInstalling browser 5.3.1\nUsing bundler 2.1.4\nFetching byebug 11.1.3\nInstalling byebug 11.1.3 with native extensions\nFetching matrix 0.4.2\nInstalling matrix 0.4.2\nFetching regexp_parser 2.5.0\nInstalling regexp_parser 2.5.0\nFetching xpath 3.2.0\nInstalling xpath 3.2.0\nFetching capybara 3.36.0\nInstalling capybara 3.36.0\nFetching childprocess 4.1.0\nInstalling childprocess 4.1.0\nFetching coderay 1.1.3\nInstalling coderay 1.1.3\nFetching rexml 3.2.5\nInstalling rexml 3.2.5\nFetching crack 0.4.5\nInstalling crack 0.4.5\nFetching diff-lcs 1.5.0\nInstalling diff-lcs 1.5.0\nFetching docile 1.4.0\nInstalling docile 1.4.0\nFetching unf_ext 0.0.8\nInstalling unf_ext 0.0.8 with native extensions\nFetching unf 0.1.4\nInstalling unf 0.1.4\nFetching domain_name 0.5.20190701\nInstalling domain_name 0.5.20190701\nFetching multi_json 1.15.0\nInstalling multi_json 1.15.0\nFetching elasticsearch-api 7.11.2\nInstalling elasticsearch-api 7.11.2\nFetching faraday-em_http 1.0.0\nInstalling faraday-em_http 1.0.0\nFetching faraday-em_synchrony 1.0.0\nInstalling faraday-em_synchrony 1.0.0\nFetching faraday-excon 1.1.0\nInstalling faraday-excon 1.1.0\nFetching faraday-httpclient 1.0.1\nInstalling faraday-httpclient 1.0.1\nFetching multipart-post 2.1.1\nInstalling multipart-post 2.1.1\nFetching faraday-multipart 1.0.3\nInstalling faraday-multipart 1.0.3\nFetching faraday-net_http 1.0.1\nInstalling faraday-net_http 1.0.1\nFetching faraday-net_http_persistent 1.2.0\nInstalling faraday-net_http_persistent 1.2.0\nFetching faraday-patron 1.0.0\nInstalling faraday-patron 1.0.0\nFetching faraday-rack 1.0.0\nInstalling faraday-rack 1.0.0\nFetching faraday-retry 1.0.3\nInstalling faraday-retry 1.0.3\nFetching ruby2_keywords 0.0.5\nInstalling ruby2_keywords 0.0.5\nFetching faraday 1.10.0\nInstalling faraday 1.10.0\nFetching elasticsearch-transport 7.11.2\nInstalling elasticsearch-transport 7.11.2\nFetching elasticsearch 7.11.2\nInstalling elasticsearch 7.11.2\nFetching hashie 5.0.0\nInstalling hashie 5.0.0\nFetching elasticsearch-model 7.2.0\nInstalling elasticsearch-model 7.2.0\nFetching elasticsearch-rails 7.2.0\nInstalling elasticsearch-rails 7.2.0\nFetching execjs 2.8.1\nInstalling execjs 2.8.1\nFetching factory_bot 6.2.0\nInstalling factory_bot 6.2.0\nFetching faraday_middleware 1.2.0\nInstalling faraday_middleware 1.2.0\nFetching ffi 1.15.5\nInstalling ffi 1.15.5 with native extensions\nFetching request_store 1.5.1\nInstalling request_store 1.5.1\nFetching logstasher 2.1.5\nInstalling logstasher 2.1.5\nFetching puma 5.6.4\nInstalling puma 5.6.4 with native extensions\nFetching method_source 1.0.0\nInstalling method_source 1.0.0\nFetching thor 1.2.1\nInstalling thor 1.2.1\nFetching railties 6.1.6.1\nInstalling railties 6.1.6.1\nFetching sentry-ruby-core 4.5.2\nInstalling sentry-ruby-core 4.5.2\nFetching sentry-rails 4.5.2\nInstalling sentry-rails 4.5.2\nFetching sentry-ruby 4.5.2\nInstalling sentry-ruby 4.5.2\nFetching statsd-ruby 1.5.0\nInstalling statsd-ruby 1.5.0\nFetching kgio 2.11.4\nInstalling kgio 2.11.4 with native extensions\nFetching raindrops 0.20.0\nInstalling raindrops 0.20.0 with native extensions\nFetching unicorn 5.8.0\nInstalling unicorn 5.8.0 with native extensions\nFetching govuk_app_config 4.3.0\nInstalling govuk_app_config 4.3.0\nFetching govuk_frontend_toolkit 9.0.1\nInstalling govuk_frontend_toolkit 9.0.1\nFetching sprockets 3.7.2\nInstalling sprockets 3.7.2\nFetching sprockets-rails 3.4.2\nInstalling sprockets-rails 3.4.2\nFetching rails 6.1.6.1\nInstalling rails 6.1.6.1\nFetching rb-fsevent 0.11.1\nInstalling rb-fsevent 0.11.1\nFetching rb-inotify 0.10.1\nInstalling rb-inotify 0.10.1\nFetching sass-listen 4.0.0\nInstalling sass-listen 4.0.0\nFetching sass 3.7.4\nInstalling sass 3.7.4\nFetching govuk_elements_rails 3.1.3\nInstalling govuk_elements_rails 3.1.3\nFetching plek 4.0.0\nInstalling plek 4.0.0\nFetching govuk_personalisation 0.11.2\nInstalling govuk_personalisation 0.11.2\nFetching kramdown 2.3.1\nInstalling kramdown 2.3.1\nFetching rouge 3.28.0\nInstalling rouge 3.28.0\nFetching govuk_publishing_components 28.6.0\nInstalling govuk_publishing_components 28.6.0\nFetching rubyzip 2.3.2\nInstalling rubyzip 2.3.2\nFetching selenium-webdriver 4.1.0\nInstalling selenium-webdriver 4.1.0\nFetching webdrivers 5.0.0\nInstalling webdrivers 5.0.0\nFetching govuk_test 2.3.0\nInstalling govuk_test 2.3.0\nFetching hashdiff 1.0.1\nInstalling hashdiff 1.0.1\nFetching htmlentities 4.3.4\nInstalling htmlentities 4.3.4\nFetching http-accept 1.7.0\nInstalling http-accept 1.7.0\nFetching http-cookie 1.0.4\nInstalling http-cookie 1.0.4\nFetching inflection 1.0.0\nInstalling inflection 1.0.0\nFetching jbuilder 2.11.5\nInstalling jbuilder 2.11.5\nFetching jquery-rails 4.4.0\nInstalling jquery-rails 4.4.0\nFetching json 2.6.2\nInstalling json 2.6.2 with native extensions\nFetching kaminari-core 1.1.1\nInstalling kaminari-core 1.1.1\nFetching kaminari-actionview 1.1.1\nInstalling kaminari-actionview 1.1.1\nFetching kaminari-activerecord 1.1.1\nInstalling kaminari-activerecord 1.1.1\nFetching kaminari 1.1.1\nInstalling kaminari 1.1.1\nFetching listen 3.7.1\nInstalling listen 3.7.1\nFetching lograge 0.11.2\nInstalling lograge 0.11.2\nFetching logstash-event 1.2.02\nInstalling logstash-event 1.2.02\nFetching mime-types-data 3.2022.0105\nInstalling mime-types-data 3.2022.0105\nFetching mime-types 3.4.1\nInstalling mime-types 3.4.1\nFetching netrc 0.11.0\nInstalling netrc 0.11.0\nFetching parallel 1.22.1\nInstalling parallel 1.22.1\nFetching parser 3.1.2.1\nInstalling parser 3.1.2.1\nFetching parslet 2.0.0\nInstalling parslet 2.0.0\nFetching pg 1.3.2\nInstalling pg 1.3.2 with native extensions\nFetching pry 0.14.1\nInstalling pry 0.14.1\nFetching pry-byebug 3.8.0\nInstalling pry-byebug 3.8.0\nFetching pry-stack_explorer 0.6.1\nInstalling pry-stack_explorer 0.6.1\nFetching rainbow 3.1.1\nInstalling rainbow 3.1.1\nFetching redcarpet 3.5.1\nInstalling redcarpet 3.5.1 with native extensions\nFetching rest-client 2.1.0\nInstalling rest-client 2.1.0\nFetching rspec-support 3.11.0\nInstalling rspec-support 3.11.0\nFetching rspec-core 3.11.0\nInstalling rspec-core 3.11.0\nFetching rspec-expectations 3.11.0\nInstalling rspec-expectations 3.11.0\nFetching rspec-mocks 3.11.1\nInstalling rspec-mocks 3.11.1\nFetching rspec 3.11.0\nInstalling rspec 3.11.0\nFetching rspec-rails 5.1.2\nInstalling rspec-rails 5.1.2\nFetching rubocop-ast 1.21.0\nInstalling rubocop-ast 1.21.0\nFetching ruby-progressbar 1.11.0\nInstalling ruby-progressbar 1.11.0\nFetching unicode-display_width 2.2.0\nInstalling unicode-display_width 2.2.0\nFetching rubocop 1.35.0\nInstalling rubocop 1.35.0\nFetching rubocop-rails 2.15.2\nInstalling rubocop-rails 2.15.2\nFetching rubocop-rake 0.6.0\nInstalling rubocop-rake 0.6.0\nFetching rubocop-rspec 2.12.1\nInstalling rubocop-rspec 2.12.1\nFetching rubocop-govuk 4.7.0\nInstalling rubocop-govuk 4.7.0\nFetching sassc 2.4.0\nInstalling sassc 2.4.0 with native extensions\nFetching tilt 2.0.10\nInstalling tilt 2.0.10\nFetching sassc-rails 2.1.2\nInstalling sassc-rails 2.1.2\nFetching sass-rails 6.0.0\nInstalling sass-rails 6.0.0\nFetching secure_headers 6.3.3\nInstalling secure_headers 6.3.3\nFetching sentry-raven 3.1.2\nInstalling sentry-raven 3.1.2\nFetching simplecov-html 0.10.2\nInstalling simplecov-html 0.10.2\nFetching simplecov 0.17.1\nInstalling simplecov 0.17.1\nFetching spring 2.1.1\nInstalling spring 2.1.1\nFetching spring-commands-rspec 1.0.4\nInstalling spring-commands-rspec 1.0.4\nFetching spring-watcher-listen 2.0.1\nInstalling spring-watcher-listen 2.0.1\nFetching uglifier 4.2.0\nInstalling uglifier 4.2.0\nFetching webmock 3.14.0\nInstalling webmock 3.14.0\nFetching zendesk_api 1.35.0\nInstalling zendesk_api 1.35.0\nBundle complete! 45 Gemfile dependencies, 171 gems now installed.\nUse `bundle info [gemname]` to see where a bundled gem is installed.\nPost-install message from sass:\n\nRuby Sass has reached end-of-life and should no longer be used.\n\n* If you use Sass as a command-line tool, we recommend using Dart Sass, the new\n  primary implementation: https://sass-lang.com/install\n\n* If you use Sass as a plug-in for a Ruby web framework, we recommend using the\n  sassc gem: https://github.com/sass/sassc-ruby#readme\n\n* For more details, please refer to the Sass blog:\n  https://sass-lang.com/blog/posts/7828841\n\nPost-install message from rubyzip:\nRubyZip 3.0 is coming!\n**********************\n\nThe public API of some Rubyzip classes has been modernized to use named\nparameters for optional arguments. Please check your usage of the\nfollowing classes:\n  * `Zip::File`\n  * `Zip::Entry`\n  * `Zip::InputStream`\n  * `Zip::OutputStream`\n\nPlease ensure that your Gemfiles and .gemspecs are suitably restrictive\nto avoid an unexpected breakage when 3.0 is released (e.g. ~> 2.3.0).\nSee https://github.com/rubyzip/rubyzip for details. The Changelog also\nlists other enhancements and bugfixes that have been implemented since\nversion 2.3.0.\nPost-install message from sentry-raven:\n`sentry-raven` is deprecated! Please migrate to `sentry-ruby`\n\nSee https://docs.sentry.io/platforms/ruby/migration for the migration guide.\n\nyarn install v1.22.19\n[1/4] Resolving packages...\n[2/4] Fetching packages...\n[3/4] Linking dependencies...\n[4/4] Building fresh packages...\nDone in 1.84s.\nRemoving intermediate container 4672d7c59814\n ---> 7c9445ece355\nSuccessfully built 7c9445ece355\nSuccessfully tagged datagovuk_find:latest\n","stderr":"","imageSize":1553601928},"repair":{"startTime":1673247458846,"endTime":1673247458976,"violations":[{"name":"curlUseFlagL","position":{"start":10,"end":10,"columnStart":4,"columnEnd":53}},{"name":"curlUseFlagF","position":{"start":10,"end":10,"columnStart":4,"columnEnd":53}},{"name":"aptGetInstallUseNoRec","position":{"start":5,"end":5,"columnStart":4,"columnEnd":59}},{"name":"aptGetInstallUseNoRec","position":{"start":12,"end":12,"columnStart":22,"columnEnd":45}},{"name":"aptGetUpdatePrecedesInstall","position":{"start":5,"end":5,"columnStart":4,"columnEnd":59}},{"name":"ruleAptGetInstallThenRemoveAptLists","position":{"start":5,"end":5,"columnStart":4,"columnEnd":59}},{"name":"ruleAptGetInstallThenRemoveAptLists","position":{"start":12,"end":12,"columnStart":22,"columnEnd":45}}],"repairedDockerfile":"FROM ruby:2.7.6\n\nWORKDIR /srv/app/datagovuk_find\n\nRUN apt-get update\nRUN apt-get install --no-install-recommends -y nodejs postgresql postgresql-contrib && rm -rf /var/lib/apt/lists/*;\n\n# to install yarn we have to remove cmdtest\nRUN apt-get remove -y cmdtest\nRUN apt autoremove -y\nRUN curl -L -f -sS https://dl.yarnpkg.com/debian/pubkey.gpg | apt-key add -\nRUN echo \"deb https://dl.yarnpkg.com/debian/ stable main\" | tee /etc/apt/sources.list.d/yarn.list\nRUN apt-get update && apt-get install --no-install-recommends -y yarn && rm -rf /var/lib/apt/lists/*;\n\nCOPY ./ /srv/app/datagovuk_find\n\nRUN gem install bundler --conservative && \\\n    bundle install && \\\n    bin/yarn\n"},"repairedBuild":{"startTime":1673247460383,"endTime":1673247506372,"error":{"code":100,"killed":false,"signal":null,"cmd":"docker build --no-cache --force-rm -t datagovuk_find:latest -f /tmp/dinghy-analysis/alphagov/datagovuk_find/Dockerfile ."},"stdout":"Sending build context to Docker daemon  2.254MB\r\r\nStep 1/11 : FROM ruby:2.7.6\n ---> 39d45c2f7aa0\nStep 2/11 : WORKDIR /srv/app/datagovuk_find\n ---> Running in f6db2c7d5980\nRemoving intermediate container f6db2c7d5980\n ---> 49a09070189d\nStep 3/11 : RUN apt-get update\n ---> Running in 6548bd99e78f\nGet:1 http://deb.debian.org/debian bullseye InRelease [116 kB]\nGet:2 http://deb.debian.org/debian-security bullseye-security InRelease [48.4 kB]\nGet:3 http://deb.debian.org/debian bullseye-updates InRelease [44.1 kB]\nGet:4 http://deb.debian.org/debian bullseye/main amd64 Packages [8183 kB]\nGet:5 http://deb.debian.org/debian-security bullseye-security/main amd64 Packages [210 kB]\nGet:6 http://deb.debian.org/debian bullseye-updates/main amd64 Packages [14.6 kB]\nFetched 8616 kB in 1s (6806 kB/s)\nReading package lists...\nRemoving intermediate container 6548bd99e78f\n ---> b5ea1e57e5a4\nStep 4/11 : RUN apt-get install --no-install-recommends -y nodejs postgresql postgresql-contrib && rm -rf /var/lib/apt/lists/*;\n ---> Running in fbc1265277e1\nReading package lists...\nBuilding dependency tree...\nReading state information...\nThe following additional packages will be installed:\n  libc-ares2 libc-l10n libllvm11 libnode72 libpq-dev libpq5 libuv1 libz3-4\n  locales postgresql-13 postgresql-client-13 postgresql-client-common\n  postgresql-common ssl-cert\nSuggested packages:\n  postgresql-doc-13 npm postgresql-doc libjson-perl\nRecommended packages:\n  nodejs-doc sysstat logrotate\nThe following NEW packages will be installed:\n  libc-ares2 libc-l10n libllvm11 libnode72 libuv1 libz3-4 locales nodejs\n  postgresql postgresql-13 postgresql-client-13 postgresql-client-common\n  postgresql-common postgresql-contrib ssl-cert\nThe following packages will be upgraded:\n  libpq-dev libpq5\n2 upgraded, 15 newly installed, 0 to remove and 20 not upgraded.\nNeed to get 56.0 MB of archives.\nAfter this operation, 223 MB of additional disk space will be used.\nGet:1 http://deb.debian.org/debian bullseye/main amd64 libc-l10n all 2.31-13+deb11u5 [865 kB]\nGet:2 http://deb.debian.org/debian bullseye/main amd64 locales all 2.31-13+deb11u5 [4086 kB]\nGet:3 http://deb.debian.org/debian bullseye/main amd64 libc-ares2 amd64 1.17.1-1+deb11u1 [102 kB]\nGet:4 http://deb.debian.org/debian bullseye/main amd64 libz3-4 amd64 4.8.10-1 [6949 kB]\nGet:5 http://deb.debian.org/debian bullseye/main amd64 libllvm11 amd64 1:11.0.1-2 [17.9 MB]\nGet:6 http://deb.debian.org/debian bullseye/main amd64 libuv1 amd64 1.40.0-2 [132 kB]\nGet:7 http://deb.debian.org/debian-security bullseye-security/main amd64 libnode72 amd64 12.22.12~dfsg-1~deb11u1 [8319 kB]\nGet:8 http://deb.debian.org/debian bullseye/main amd64 libpq-dev amd64 13.9-0+deb11u1 [139 kB]\nGet:9 http://deb.debian.org/debian bullseye/main amd64 libpq5 amd64 13.9-0+deb11u1 [180 kB]\nGet:10 http://deb.debian.org/debian-security bullseye-security/main amd64 nodejs amd64 12.22.12~dfsg-1~deb11u1 [147 kB]\nGet:11 http://deb.debian.org/debian bullseye/main amd64 postgresql-client-common all 225 [89.3 kB]\nGet:12 http://deb.debian.org/debian bullseye/main amd64 postgresql-client-13 amd64 13.9-0+deb11u1 [1508 kB]\nGet:13 http://deb.debian.org/debian bullseye/main amd64 ssl-cert all 1.1.0+nmu1 [21.0 kB]\nGet:14 http://deb.debian.org/debian bullseye/main amd64 postgresql-common all 225 [237 kB]\nGet:15 http://deb.debian.org/debian bullseye/main amd64 postgresql-13 amd64 13.9-0+deb11u1 [15.2 MB]\nGet:16 http://deb.debian.org/debian bullseye/main amd64 postgresql all 13+225 [64.7 kB]\nGet:17 http://deb.debian.org/debian bullseye/main amd64 postgresql-contrib all 13+225 [64.8 kB]\n\u001b[91mdebconf: delaying package configuration, since apt-utils is not installed\n\u001b[0mFetched 56.0 MB in 1s (71.9 MB/s)\nSelecting previously unselected package libc-l10n.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 22790 files and directories currently installed.)\r\nPreparing to unpack .../00-libc-l10n_2.31-13+deb11u5_all.deb ...\r\nUnpacking libc-l10n (2.31-13+deb11u5) ...\r\nSelecting previously unselected package locales.\r\nPreparing to unpack .../01-locales_2.31-13+deb11u5_all.deb ...\r\nUnpacking locales (2.31-13+deb11u5) ...\r\nSelecting previously unselected package libc-ares2:amd64.\r\nPreparing to unpack .../02-libc-ares2_1.17.1-1+deb11u1_amd64.deb ...\r\nUnpacking libc-ares2:amd64 (1.17.1-1+deb11u1) ...\r\nSelecting previously unselected package libz3-4:amd64.\r\nPreparing to unpack .../03-libz3-4_4.8.10-1_amd64.deb ...\r\nUnpacking libz3-4:amd64 (4.8.10-1) ...\r\nSelecting previously unselected package libllvm11:amd64.\r\nPreparing to unpack .../04-libllvm11_1%3a11.0.1-2_amd64.deb ...\r\nUnpacking libllvm11:amd64 (1:11.0.1-2) ...\r\nSelecting previously unselected package libuv1:amd64.\r\nPreparing to unpack .../05-libuv1_1.40.0-2_amd64.deb ...\r\nUnpacking libuv1:amd64 (1.40.0-2) ...\r\nSelecting previously unselected package libnode72:amd64.\r\nPreparing to unpack .../06-libnode72_12.22.12~dfsg-1~deb11u1_amd64.deb ...\r\nUnpacking libnode72:amd64 (12.22.12~dfsg-1~deb11u1) ...\r\nPreparing to unpack .../07-libpq-dev_13.9-0+deb11u1_amd64.deb ...\r\nUnpacking libpq-dev (13.9-0+deb11u1) over (13.8-0+deb11u1) ...\r\nPreparing to unpack .../08-libpq5_13.9-0+deb11u1_amd64.deb ...\r\nUnpacking libpq5:amd64 (13.9-0+deb11u1) over (13.8-0+deb11u1) ...\r\nSelecting previously unselected package nodejs.\r\nPreparing to unpack .../09-nodejs_12.22.12~dfsg-1~deb11u1_amd64.deb ...\r\nUnpacking nodejs (12.22.12~dfsg-1~deb11u1) ...\r\nSelecting previously unselected package postgresql-client-common.\r\nPreparing to unpack .../10-postgresql-client-common_225_all.deb ...\r\nUnpacking postgresql-client-common (225) ...\r\nSelecting previously unselected package postgresql-client-13.\r\nPreparing to unpack .../11-postgresql-client-13_13.9-0+deb11u1_amd64.deb ...\r\nUnpacking postgresql-client-13 (13.9-0+deb11u1) ...\r\nSelecting previously unselected package ssl-cert.\r\nPreparing to unpack .../12-ssl-cert_1.1.0+nmu1_all.deb ...\r\nUnpacking ssl-cert (1.1.0+nmu1) ...\r\nSelecting previously unselected package postgresql-common.\r\nPreparing to unpack .../13-postgresql-common_225_all.deb ...\r\nAdding 'diversion of /usr/bin/pg_config to /usr/bin/pg_config.libpq-dev by postgresql-common'\r\nUnpacking postgresql-common (225) ...\r\nSelecting previously unselected package postgresql-13.\r\nPreparing to unpack .../14-postgresql-13_13.9-0+deb11u1_amd64.deb ...\r\nUnpacking postgresql-13 (13.9-0+deb11u1) ...\r\nSelecting previously unselected package postgresql.\r\nPreparing to unpack .../15-postgresql_13+225_all.deb ...\r\nUnpacking postgresql (13+225) ...\r\nSelecting previously unselected package postgresql-contrib.\r\nPreparing to unpack .../16-postgresql-contrib_13+225_all.deb ...\r\nUnpacking postgresql-contrib (13+225) ...\r\nSetting up postgresql-client-common (225) ...\r\nSetting up libc-l10n (2.31-13+deb11u5) ...\r\nSetting up libpq5:amd64 (13.9-0+deb11u1) ...\r\nSetting up libpq-dev (13.9-0+deb11u1) ...\r\nSetting up libc-ares2:amd64 (1.17.1-1+deb11u1) ...\r\nSetting up locales (2.31-13+deb11u5) ...\r\ndebconf: unable to initialize frontend: Dialog\r\ndebconf: (TERM is not set, so the dialog frontend is not usable.)\r\ndebconf: falling back to frontend: Readline\r\nGenerating locales (this might take a while)...\r\nGeneration complete.\r\nSetting up postgresql-client-13 (13.9-0+deb11u1) ...\r\nupdate-alternatives: using /usr/share/postgresql/13/man/man1/psql.1.gz to provide /usr/share/man/man1/psql.1.gz (psql.1.gz) in auto mode\r\nSetting up libz3-4:amd64 (4.8.10-1) ...\r\nSetting up libuv1:amd64 (1.40.0-2) ...\r\nSetting up libllvm11:amd64 (1:11.0.1-2) ...\r\nSetting up ssl-cert (1.1.0+nmu1) ...\r\ndebconf: unable to initialize frontend: Dialog\r\ndebconf: (TERM is not set, so the dialog frontend is not usable.)\r\ndebconf: falling back to frontend: Readline\r\nSetting up postgresql-common (225) ...\r\ndebconf: unable to initialize frontend: Dialog\r\ndebconf: (TERM is not set, so the dialog frontend is not usable.)\r\ndebconf: falling back to frontend: Readline\r\nAdding user postgres to group ssl-cert\r\n\r\nCreating config file /etc/postgresql-common/createcluster.conf with new version\r\nBuilding PostgreSQL dictionaries from installed myspell/hunspell packages...\r\nRemoving obsolete dictionary files:\r\ninvoke-rc.d: could not determine current runlevel\r\ninvoke-rc.d: policy-rc.d denied execution of start.\r\nSetting up postgresql-13 (13.9-0+deb11u1) ...\r\ndebconf: unable to initialize frontend: Dialog\r\ndebconf: (TERM is not set, so the dialog frontend is not usable.)\r\ndebconf: falling back to frontend: Readline\r\nCreating new PostgreSQL cluster 13/main ...\r\n/usr/lib/postgresql/13/bin/initdb -D /var/lib/postgresql/13/main --auth-local peer --auth-host md5\r\nThe files belonging to this database system will be owned by user \"postgres\".\r\nThis user must also own the server process.\r\n\r\nThe database cluster will be initialized with locale \"C.UTF-8\".\r\nThe default database encoding has accordingly been set to \"UTF8\".\r\nThe default text search configuration will be set to \"english\".\r\n\r\nData page checksums are disabled.\r\n\r\nfixing permissions on existing directory /var/lib/postgresql/13/main ... ok\r\ncreating subdirectories ... ok\r\nselecting dynamic shared memory implementation ... posix\r\nselecting default max_connections ... 100\r\nselecting default shared_buffers ... 128MB\r\nselecting default time zone ... Etc/UTC\r\ncreating configuration files ... ok\r\nrunning bootstrap script ... ok\r\nperforming post-bootstrap initialization ... ok\r\nsyncing data to disk ... ok\r\n\r\nSuccess. You can now start the database server using:\r\n\r\n    pg_ctlcluster 13 main start\r\n\r\nVer Cluster Port Status Owner    Data directory              Log file\r\n\u001b[31m13  main    5432 down   postgres /var/lib/postgresql/13/main /var/log/postgresql/postgresql-13-main.log\u001b[0m\r\nupdate-alternatives: using /usr/share/postgresql/13/man/man1/postmaster.1.gz to provide /usr/share/man/man1/postmaster.1.gz (postmaster.1.gz) in auto mode\r\ninvoke-rc.d: could not determine current runlevel\r\ninvoke-rc.d: policy-rc.d denied execution of start.\r\nSetting up postgresql (13+225) ...\r\nSetting up libnode72:amd64 (12.22.12~dfsg-1~deb11u1) ...\r\nSetting up postgresql-contrib (13+225) ...\r\nSetting up nodejs (12.22.12~dfsg-1~deb11u1) ...\r\nupdate-alternatives: using /usr/bin/nodejs to provide /usr/bin/js (js) in auto mode\r\nProcessing triggers for libc-bin (2.31-13+deb11u5) ...\r\nRemoving intermediate container fbc1265277e1\n ---> 1a69048b7a4e\nStep 5/11 : RUN apt-get remove -y cmdtest\n ---> Running in 98e80671110e\nReading package lists...\nBuilding dependency tree...\nReading state information...\n\u001b[91mE: Unable to locate package cmdtest\n\u001b[0mRemoving intermediate container 98e80671110e\n","stderr":"The command '/bin/sh -c apt-get remove -y cmdtest' returned a non-zero code: 100\n"}}