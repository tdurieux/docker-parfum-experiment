{"repository":"https://github.com/carv-ics-forth/frisbee","dockerfilePath":"Dockerfile","startTime":1672092003618,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/carv-ics-forth/frisbee'...\n","error":null,"commit":"6d36acdeae628f909f31f18b5bfbf3e79a568d1e"},"originalBuild":{"startTimestamp":1672092006536,"endTimestamp":1672092092961,"error":null,"stdout":"Sending build context to Docker daemon  8.294MB\r\r\nStep 1/19 : FROM golang:1.19 as builder\n ---> 6650307efe4a\nStep 2/19 : WORKDIR /workspace\n ---> Running in 96863eb83944\nRemoving intermediate container 96863eb83944\n ---> ec6d6a01781a\nStep 3/19 : COPY go.mod go.mod\n ---> f667061054f2\nStep 4/19 : COPY go.sum go.sum\n ---> 616c0250be5f\nStep 5/19 : RUN go mod download\n ---> Running in bee51b50f688\nRemoving intermediate container bee51b50f688\n ---> e89da10b283c\nStep 6/19 : COPY ./cmd/manager/main.go main.go\n ---> 6b8ec4ad881b\nStep 7/19 : COPY api/ api/\n ---> f4c617da5f2e\nStep 8/19 : COPY controllers/ controllers/\n ---> 840d93c8b2f0\nStep 9/19 : COPY pkg/ pkg/\n ---> 3f12d7572597\nStep 10/19 : RUN CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -a -o /manager main.go\n ---> Running in 1a8b6758156e\nRemoving intermediate container 1a8b6758156e\n ---> a79c0da30cf7\nStep 11/19 : FROM alpine\n ---> 49176f190c7e\nStep 12/19 : ARG USER=default\n ---> Running in e486201cdd9c\nRemoving intermediate container e486201cdd9c\n ---> 4f70ac86043f\nStep 13/19 : ENV HOME /home/$USER\n ---> Running in 81782600757c\nRemoving intermediate container 81782600757c\n ---> 03696b20cd4f\nStep 14/19 : RUN apk add --update sudo\n ---> Running in 38a66e647be5\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/1) Installing sudo (1.9.12_p1-r1)\nExecuting busybox-1.35.0-r29.trigger\nOK: 9 MiB in 16 packages\nRemoving intermediate container 38a66e647be5\n ---> 8a04a2aecd1d\nStep 15/19 : RUN adduser -D $USER         && echo \"$USER ALL=(ALL) NOPASSWD: ALL\" > /etc/sudoers.d/$USER         && chmod 0440 /etc/sudoers.d/$USER\n ---> Running in c0649089b5f4\nRemoving intermediate container c0649089b5f4\n ---> ed5a5e9739c4\nStep 16/19 : USER $USER\n ---> Running in 67e55928ea8c\nRemoving intermediate container 67e55928ea8c\n ---> a91cb893f62e\nStep 17/19 : WORKDIR $HOME\n ---> Running in 0f5458d2a760\nRemoving intermediate container 0f5458d2a760\n ---> b8cd5fd9bbe2\nStep 18/19 : COPY --from=builder /manager ./\n ---> caa7dff91093\nStep 19/19 : ENTRYPOINT [\"./manager\"]\n ---> Running in a61a32467777\nRemoving intermediate container a61a32467777\n ---> b0caecbb6e7d\nSuccessfully built b0caecbb6e7d\nSuccessfully tagged frisbee:latest\n","stderr":"","imageSize":67628734},"repair":{"violations":[{"name":"apkAddUseNoCache","position":{"start":32,"end":32,"columnStart":4,"columnEnd":25}}],"repairedDockerfile":"# Build the Frisbee operator binary\nFROM golang:1.19 as builder\n\nWORKDIR /workspace\n# Copy the Go Modules manifests\nCOPY go.mod go.mod\nCOPY go.sum go.sum\n# cache deps before building and copying source so that we don't need to re-download as much\n# and so that source changes don't invalidate our downloaded layer\nRUN go mod download\n\n# Copy the go source\nCOPY ./cmd/manager/main.go main.go\nCOPY api/ api/\nCOPY controllers/ controllers/\nCOPY pkg/ pkg/\n\n# Build\nRUN CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -a -o /manager main.go\n\n# Use alpine as minimal base image to package the Frisbee operator binary\n# We use a non-root user setup.\n#\n# usage:\n# $ docker build --build-arg \"USER=someuser\" . -t test\n# $ docker run --rm -v ${HOME}/.kube/:/home/default/.kube test\nFROM alpine\n\nARG USER=default\nENV HOME /home/$USER\n\n# install sudo as root\nRUN apk add --no-cache --update sudo\n\n# add new user\nRUN adduser -D $USER \\\n        && echo \"$USER ALL=(ALL) NOPASSWD: ALL\" > /etc/sudoers.d/$USER \\\n        && chmod 0440 /etc/sudoers.d/$USER\n\nUSER $USER\nWORKDIR $HOME\n\nCOPY --from=builder /manager ./\n\nENTRYPOINT [\"./manager\"]\n"},"repairedBuild":{"startTimestamp":1672092093403,"endTimestamp":1672092203305,"error":null,"stdout":"Sending build context to Docker daemon  8.294MB\r\r\nStep 1/19 : FROM golang:1.19 as builder\n ---> 6650307efe4a\nStep 2/19 : WORKDIR /workspace\n ---> Running in 4751877ac47f\nRemoving intermediate container 4751877ac47f\n ---> 73a747103ee5\nStep 3/19 : COPY go.mod go.mod\n ---> fde4cec417f5\nStep 4/19 : COPY go.sum go.sum\n ---> be91de007044\nStep 5/19 : RUN go mod download\n ---> Running in 96df150e1206\nRemoving intermediate container 96df150e1206\n ---> 4eb9e59a3456\nStep 6/19 : COPY ./cmd/manager/main.go main.go\n ---> 3caa730b6d17\nStep 7/19 : COPY api/ api/\n ---> 8c9317e0c3e3\nStep 8/19 : COPY controllers/ controllers/\n ---> bc59de5333c3\nStep 9/19 : COPY pkg/ pkg/\n ---> d503aa952d6f\nStep 10/19 : RUN CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -a -o /manager main.go\n ---> Running in 8911a4ab0058\nRemoving intermediate container 8911a4ab0058\n ---> 961014f645f8\nStep 11/19 : FROM alpine\n ---> 49176f190c7e\nStep 12/19 : ARG USER=default\n ---> Running in 8c6126fca5ff\nRemoving intermediate container 8c6126fca5ff\n ---> 3e29dad287b8\nStep 13/19 : ENV HOME /home/$USER\n ---> Running in 70c824bb5163\nRemoving intermediate container 70c824bb5163\n ---> 7c633f9c7f88\nStep 14/19 : RUN apk add --no-cache --update sudo\n ---> Running in 2c62d371858b\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/1) Installing sudo (1.9.12_p1-r1)\nExecuting busybox-1.35.0-r29.trigger\nOK: 9 MiB in 16 packages\nRemoving intermediate container 2c62d371858b\n ---> f4ea42e94261\nStep 15/19 : RUN adduser -D $USER         && echo \"$USER ALL=(ALL) NOPASSWD: ALL\" > /etc/sudoers.d/$USER         && chmod 0440 /etc/sudoers.d/$USER\n ---> Running in 5288868ac003\nRemoving intermediate container 5288868ac003\n ---> c9edab75f297\nStep 16/19 : USER $USER\n ---> Running in 6953c7804504\nRemoving intermediate container 6953c7804504\n ---> d01ef8572f1a\nStep 17/19 : WORKDIR $HOME\n ---> Running in 8a39f1993f77\nRemoving intermediate container 8a39f1993f77\n ---> 6819be97ef88\nStep 18/19 : COPY --from=builder /manager ./\n ---> 196acb62ae8c\nStep 19/19 : ENTRYPOINT [\"./manager\"]\n ---> Running in 02eaba3c3c77\nRemoving intermediate container 02eaba3c3c77\n ---> a3709cd54c50\nSuccessfully built a3709cd54c50\nSuccessfully tagged frisbee:latest\n","stderr":"","imageSize":65045862},"endTime":1672092203578}