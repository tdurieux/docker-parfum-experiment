{"repository":"https://github.com/r-spacex/spacex-api","dockerfilePath":"Dockerfile","startTime":1672959418100,"endTime":1672959517024,"clone":{"startTime":1672959418100,"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/r-spacex/spacex-api'...\n","error":null,"endTime":1672959419284,"commit":"9f56af14a75ae410c26eb0317971d51ae1574f6a"},"originalBuild":{"startTime":1672959419367,"endTime":1672959470355,"error":null,"stdout":"Sending build context to Docker daemon  723.5kB\r\r\nStep 1/16 : FROM node:18-alpine\n18-alpine: Pulling from library/node\nDigest: sha256:a136ed7b0df71082cdb171f36d640ea3b392a5c70401c642326acee767b8c540\nStatus: Downloaded newer image for node:18-alpine\n ---> 6d7b7852bcd3\nStep 2/16 : LABEL maintainer=\"jakewmeyer@gmail.com\"\n ---> Running in ee1112818a17\nRemoving intermediate container ee1112818a17\n ---> 7c86fefc19a9\nStep 3/16 : LABEL autoheal=\"true\"\n ---> Running in 71e1ebe6302b\nRemoving intermediate container 71e1ebe6302b\n ---> 57452895ca7d\nStep 4/16 : HEALTHCHECK --interval=10s --timeout=3s   CMD ./lib/utils/healthcheck.js\n ---> Running in 5ae3773b65ab\nRemoving intermediate container 5ae3773b65ab\n ---> 620812fed4ef\nStep 5/16 : RUN apk add --no-cache --upgrade bash\n ---> Running in b09d423d3f2f\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/4) Installing ncurses-terminfo-base (6.3_p20221119-r0)\n(2/4) Installing ncurses-libs (6.3_p20221119-r0)\n(3/4) Installing readline (8.2.0-r0)\n(4/4) Installing bash (5.2.15-r0)\nExecuting bash-5.2.15-r0.post-install\nExecuting busybox-1.35.0-r29.trigger\nOK: 12 MiB in 21 packages\nRemoving intermediate container b09d423d3f2f\n ---> a0bdbb681be9\nStep 6/16 : ENV NODE_ENV=production\n ---> Running in bf418276dbb1\nRemoving intermediate container bf418276dbb1\n ---> ee8d520d9a1b\nStep 7/16 : ENV HEALTH_URL=http://localhost:6673/v4/admin/health\n ---> Running in 7e3e2bf88895\nRemoving intermediate container 7e3e2bf88895\n ---> cc9e9f894268\nStep 8/16 : EXPOSE 6673\n ---> Running in 2024705e5bb2\nRemoving intermediate container 2024705e5bb2\n ---> 879fbb8a4ba6\nStep 9/16 : RUN addgroup -S spacex && adduser -S -G spacex spacex\n ---> Running in 8a4193155228\nRemoving intermediate container 8a4193155228\n ---> 5bebc5c9fa66\nStep 10/16 : RUN mkdir /app && chown spacex /app\n ---> Running in 6678b43ff699\nRemoving intermediate container 6678b43ff699\n ---> aff45a19dfa9\nStep 11/16 : USER spacex\n ---> Running in eac8add289c4\nRemoving intermediate container eac8add289c4\n ---> b689cb1fbee1\nStep 12/16 : WORKDIR /app\n ---> Running in 8a318e46e6ef\nRemoving intermediate container 8a318e46e6ef\n ---> 227591e371c6\nStep 13/16 : ENTRYPOINT [\"/app/start.sh\"]\n ---> Running in c2179e15d220\nRemoving intermediate container c2179e15d220\n ---> 430797595323\nStep 14/16 : COPY --chown=spacex:spacex package.json package-lock.json /app/\n ---> b8267809d808\nStep 15/16 : RUN npm install --production\n ---> Running in 91df39108617\n\u001b[91mnpm\u001b[0m\u001b[91m WARN config production Use `--omit=dev` instead.\n\u001b[0m\nadded 207 packages, and audited 208 packages in 6s\n\n37 packages are looking for funding\n  run `npm fund` for details\n\nfound 0 vulnerabilities\n\u001b[91mnpm notice\u001b[0m\u001b[91m \nnpm notice\u001b[0m\u001b[91m New major version of npm available! 8.19.2 -> 9.2.0\nnpm notice\u001b[0m\u001b[91m Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm notice\u001b[0m\u001b[91m Run `npm install -g npm@9.2.0` to update!\nnpm\u001b[0m\u001b[91m notice\u001b[0m\u001b[91m \n\u001b[0mRemoving intermediate container 91df39108617\n ---> b1699888f86a\nStep 16/16 : COPY --chown=spacex:spacex . .\n ---> cac9429f0f19\nSuccessfully built cac9429f0f19\nSuccessfully tagged spacex-api:latest\n","stderr":"","imageSize":225177591},"repair":{"startTime":1672959470424,"endTime":1672959470541,"violations":[{"name":"npmCacheCleanAfterInstall","position":{"start":26,"end":26,"columnStart":4,"columnEnd":28}}],"repairedDockerfile":"FROM node:18-alpine\n\nLABEL maintainer=\"jakewmeyer@gmail.com\"\nLABEL autoheal=\"true\"\n\nHEALTHCHECK --interval=10s --timeout=3s \\\n  CMD ./lib/utils/healthcheck.js\n\nRUN apk add --no-cache --upgrade bash\n\nENV NODE_ENV=production\nENV HEALTH_URL=http://localhost:6673/v4/admin/health\n\nEXPOSE 6673\n\n# Run as an unprivileged user.\nRUN addgroup -S spacex && adduser -S -G spacex spacex\nRUN mkdir /app && chown spacex /app\nUSER spacex\n\nWORKDIR /app\nENTRYPOINT [\"/app/start.sh\"]\n\nCOPY --chown=spacex:spacex package.json package-lock.json /app/\n\nRUN npm install --production && npm cache clean --force;\n\nCOPY --chown=spacex:spacex . .\n"},"repairedBuild":{"startTime":1672959470862,"endTime":1672959516497,"error":null,"stdout":"Sending build context to Docker daemon  723.5kB\r\r\nStep 1/16 : FROM node:18-alpine\n ---> 6d7b7852bcd3\nStep 2/16 : LABEL maintainer=\"jakewmeyer@gmail.com\"\n ---> Running in 0443c1c53f30\nRemoving intermediate container 0443c1c53f30\n ---> 481a70b5cdf1\nStep 3/16 : LABEL autoheal=\"true\"\n ---> Running in 6eb4c7e18647\nRemoving intermediate container 6eb4c7e18647\n ---> 74a2df92e16a\nStep 4/16 : HEALTHCHECK --interval=10s --timeout=3s   CMD ./lib/utils/healthcheck.js\n ---> Running in af27fb14a8d9\nRemoving intermediate container af27fb14a8d9\n ---> 0e12b7f29f02\nStep 5/16 : RUN apk add --no-cache --upgrade bash\n ---> Running in ddbedd4cfa80\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/4) Installing ncurses-terminfo-base (6.3_p20221119-r0)\n(2/4) Installing ncurses-libs (6.3_p20221119-r0)\n(3/4) Installing readline (8.2.0-r0)\n(4/4) Installing bash (5.2.15-r0)\nExecuting bash-5.2.15-r0.post-install\nExecuting busybox-1.35.0-r29.trigger\nOK: 12 MiB in 21 packages\nRemoving intermediate container ddbedd4cfa80\n ---> 756d458275b9\nStep 6/16 : ENV NODE_ENV=production\n ---> Running in 100abad526b1\nRemoving intermediate container 100abad526b1\n ---> 39a49455fa5b\nStep 7/16 : ENV HEALTH_URL=http://localhost:6673/v4/admin/health\n ---> Running in fd5e2e0b7919\nRemoving intermediate container fd5e2e0b7919\n ---> e30716a2de58\nStep 8/16 : EXPOSE 6673\n ---> Running in 910dcd3976a0\nRemoving intermediate container 910dcd3976a0\n ---> 53b259333990\nStep 9/16 : RUN addgroup -S spacex && adduser -S -G spacex spacex\n ---> Running in 040f0d5a1b8a\nRemoving intermediate container 040f0d5a1b8a\n ---> 7e206eace758\nStep 10/16 : RUN mkdir /app && chown spacex /app\n ---> Running in 621a520042ae\nRemoving intermediate container 621a520042ae\n ---> b241d8f9aa84\nStep 11/16 : USER spacex\n ---> Running in d099afff8e98\nRemoving intermediate container d099afff8e98\n ---> 651460c4c169\nStep 12/16 : WORKDIR /app\n ---> Running in 361af8276ebf\nRemoving intermediate container 361af8276ebf\n ---> 63675a2ea8c7\nStep 13/16 : ENTRYPOINT [\"/app/start.sh\"]\n ---> Running in b764d27ad03a\nRemoving intermediate container b764d27ad03a\n ---> 7beaf63b750b\nStep 14/16 : COPY --chown=spacex:spacex package.json package-lock.json /app/\n ---> e05189d0280a\nStep 15/16 : RUN npm install --production && npm cache clean --force;\n ---> Running in fb22ec8c9bcf\n\u001b[91mnpm\u001b[0m\u001b[91m WARN config production Use `--omit=dev` instead.\n\u001b[0m\nadded 207 packages, and audited 208 packages in 4s\n\n37 packages are looking for funding\n  run `npm fund` for details\n\nfound 0 vulnerabilities\n\u001b[91mnpm notice \nnpm notice New major version of npm available! 8.19.2 -> 9.2.0\nnpm notice Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm \u001b[0m\u001b[91mnotice Run `npm install -g npm@9.2.0` to update!\nnpm notice \n\u001b[0m\u001b[91mnpm\u001b[0m\u001b[91m WARN using --force Recommended protections disabled.\n\u001b[0mRemoving intermediate container fb22ec8c9bcf\n ---> 8ca213d7427d\nStep 16/16 : COPY --chown=spacex:spacex . .\n ---> cf0a8c6b5919\nSuccessfully built cf0a8c6b5919\nSuccessfully tagged spacex-api:latest\n","stderr":"","imageSize":214887518}}