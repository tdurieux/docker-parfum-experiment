{"repository":"https://github.com/stonith404/pingvin-share","dockerfilePath":"Dockerfile","startTime":1672891544052,"endTime":1672892190235,"clone":{"startTime":1672891544053,"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/stonith404/pingvin-share'...\n","error":null,"endTime":1672891544985,"commit":"54f591cd60ffb6d29412e225936c4ca6c1f3659f"},"originalBuild":{"startTime":1672891545080,"endTime":1672891881294,"error":null,"stdout":"Sending build context to Docker daemon   1.73MB\r\r\nStep 1/35 : FROM node:18-slim AS frontend-dependencies\n18-slim: Pulling from library/node\n3f4ca61aafcd: Already exists\n00fde01815c9: Pulling fs layer\n723367e6ef2d: Pulling fs layer\n907e6809ddf0: Pulling fs layer\n128624e9c76a: Pulling fs layer\n128624e9c76a: Waiting\n00fde01815c9: Download complete\n907e6809ddf0: Verifying Checksum\n907e6809ddf0: Download complete\n128624e9c76a: Verifying Checksum\n128624e9c76a: Download complete\n723367e6ef2d: Verifying Checksum\n723367e6ef2d: Download complete\n00fde01815c9: Pull complete\n723367e6ef2d: Pull complete\n907e6809ddf0: Pull complete\n128624e9c76a: Pull complete\nDigest: sha256:70bf84739156657c85440e6a55a3d77a7cac668f9c4c3c44005bc29bdc529db7\nStatus: Downloaded newer image for node:18-slim\n ---> a26e85f2ac41\nStep 2/35 : WORKDIR /opt/app\n ---> Running in f75c73a68b44\nRemoving intermediate container f75c73a68b44\n ---> cb885893e047\nStep 3/35 : COPY frontend/package.json frontend/package-lock.json ./\n ---> db3adf4bcdcf\nStep 4/35 : RUN npm ci\n ---> Running in 2a7c174ff3b9\n\nadded 692 packages, and audited 693 packages in 10s\n\n116 packages are looking for funding\n  run `npm fund` for details\n\n1 high severity vulnerability\n\nTo address all issues, run:\n  npm audit fix\n\nRun `npm audit` for details.\n\u001b[91mnpm notice \nnpm notice New major version of npm available! 8.19.2 -> 9.2.0\nnpm notice Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm notice Run `npm install -g npm@9.2.0` to update!\nnpm notice \n\u001b[0mRemoving intermediate container 2a7c174ff3b9\n ---> efd77b4b268e\nStep 5/35 : FROM node:18-slim AS frontend-builder\n ---> a26e85f2ac41\nStep 6/35 : WORKDIR /opt/app\n ---> Running in 6a75498a0f9b\nRemoving intermediate container 6a75498a0f9b\n ---> e08cfbddbf00\nStep 7/35 : COPY ./frontend .\n ---> 8abcc53f9b7f\nStep 8/35 : COPY --from=frontend-dependencies /opt/app/node_modules ./node_modules\n ---> 1ea133b66f34\nStep 9/35 : RUN npm run build\n ---> Running in 055e464ff0be\n\n> pingvin-share-frontend@0.5.1 build\n> next build\n\nAttention: Next.js now collects completely anonymous telemetry regarding usage.\nThis information is used to shape Next.js' roadmap and prioritize features.\nYou can learn more, including how to opt-out if you'd not like to participate in this anonymous program, by visiting the following URL:\nhttps://nextjs.org/telemetry\n\ninfo  - Linting and checking validity of types...\n\n./src/components/account/showEnableTotpModal.tsx\n17:8  Warning: 'useUser' is defined but never used.  no-unused-vars\n\n./src/components/admin/ManageUserTable.tsx\n15:16  Warning: 'user' is defined but never used.  no-unused-vars\n\n./src/components/admin/configuration/AdminConfigInput.tsx\n17:26  Warning: 'variable' is defined but never used.  no-unused-vars\n\n./src/components/upload/modals/showCreateUploadModal.tsx\n36:20  Warning: 'createShare' is defined but never used.  no-unused-vars\n53:20  Warning: 'createShare' is defined but never used.  no-unused-vars\n\n./src/services/share.service.ts\n78:22  Warning: 'uploadingProgress' is defined but never used.  no-unused-vars\n\n./src/types/user.type.ts\n32:13  Warning: 'user' is defined but never used.  no-unused-vars\n\ninfo  - Need to disable some ESLint rules? Learn more here: https://nextjs.org/docs/basic-features/eslint#disabling-rules\ninfo  - Creating an optimized production build...\n> [PWA] Compile client (static)\n> [PWA] Auto register service worker with: /opt/app/node_modules/next-pwa/register.js\n> [PWA] Service worker: /opt/app/public/sw.js\n> [PWA]   url: /sw.js\n> [PWA]   scope: /\n> [PWA] Compile server\n> [PWA] Compile server\ninfo  - Compiled successfully\ninfo  - Collecting page data...\ninfo  - Generating static pages (0/13)\ninfo  - Generating static pages (3/13)\ninfo  - Generating static pages (6/13)\ninfo  - Generating static pages (9/13)\ninfo  - Generating static pages (13/13)\ninfo  - Finalizing page optimization...\n\nRoute (pages)                              Size     First Load JS\n┌ ○ / (559 ms)                             6.92 kB         163 kB\n├   /_app                                  0 B             156 kB\n├ ○ /404 (528 ms)                          1.54 kB         158 kB\n├ ○ /account (580 ms)                      9.16 kB         197 kB\n├ ○ /account/shares (624 ms)               4.26 kB         182 kB\n├ ○ /admin (535 ms)                        3.21 kB         160 kB\n├ ○ /admin/config (540 ms)                 340 B           175 kB\n├ ○ /admin/setup (597 ms)                  546 B           175 kB\n├ ○ /admin/users (593 ms)                  5.57 kB         194 kB\n├ λ /api/[...all]                          0 B             156 kB\n├ ○ /auth/signIn (580 ms)                  2.21 kB         185 kB\n├ ○ /auth/signUp (644 ms)                  1.96 kB         185 kB\n├ λ /share/[shareId]                       6.41 kB         166 kB\n├ ○ /upload (629 ms)                       34.5 kB         252 kB\n└ ○ /user/account (590 ms)                 249 B           157 kB\n+ First Load JS shared by all              156 kB\n  ├ chunks/framework-3b5a00d5d7e8d93b.js   45.4 kB\n  ├ chunks/main-3e8934104c436d65.js        28.9 kB\n  ├ chunks/pages/_app-9214de9c9842a713.js  81 kB\n  └ chunks/webpack-36d12a75f0098f30.js     1.04 kB\n\nλ  (Server)  server-side renders at runtime (uses getInitialProps or getServerSideProps)\n○  (Static)  automatically rendered as static HTML (uses no initial props)\n\n\u001b[91mnpm \u001b[0m\u001b[91mnotice \n\u001b[0m\u001b[91mnpm \u001b[0m\u001b[91mnotice\u001b[0m\u001b[91m New major version of npm available! 8.19.2 -> 9.2.0\nnpm\u001b[0m\u001b[91m \u001b[0m\u001b[91mnotice\u001b[0m\u001b[91m Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm\u001b[0m\u001b[91m notice\u001b[0m\u001b[91m Run `npm install -g npm@9.2.0` to update!\nnpm\u001b[0m\u001b[91m \u001b[0m\u001b[91mnotice \n\u001b[0mRemoving intermediate container 055e464ff0be\n ---> 759d333d25ab\nStep 10/35 : FROM node:18-slim AS backend-dependencies\n ---> a26e85f2ac41\nStep 11/35 : WORKDIR /opt/app\n ---> Running in bd9b0dd95f0a\nRemoving intermediate container bd9b0dd95f0a\n ---> 61b012e17373\nStep 12/35 : COPY backend/package.json backend/package-lock.json ./\n ---> 25581c737941\nStep 13/35 : RUN npm ci\n ---> Running in 1a4f5148505e\n\u001b[91mnpm WARN deprecated\u001b[0m\u001b[91m har-validator@5.1.5: this library is no longer supported\n\u001b[0m\u001b[91mnpm WARN deprecated uuid@3.4.0: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.\n\u001b[0m\u001b[91mnpm WARN deprecated uuid@3.4.0: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.\n\u001b[0m\nadded 692 packages, and audited 693 packages in 19s\n\n80 packages are looking for funding\n  run `npm fund` for details\n\n4 vulnerabilities (2 moderate, 2 high)\n\nTo address issues that do not require attention, run:\n  npm audit fix\n\nTo address all issues (including breaking changes), run:\n  npm audit fix --force\n\nRun `npm audit` for details.\n\u001b[91mnpm notice \nnpm notice New major version of npm available! 8.19.2 -> 9.2.0\nnpm notice\u001b[0m\u001b[91m Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm notice Run `npm install -g npm@9.2.0` to update!\n\u001b[0m\u001b[91mnpm notice \n\u001b[0mRemoving intermediate container 1a4f5148505e\n ---> 0d6cdcbe4253\nStep 14/35 : FROM node:18-slim AS backend-builder\n ---> a26e85f2ac41\nStep 15/35 : RUN apt-get update && apt-get install -y openssl\n ---> Running in 5de3d61daf85\nGet:1 http://deb.debian.org/debian bullseye InRelease [116 kB]\nGet:2 http://deb.debian.org/debian-security bullseye-security InRelease [48.4 kB]\nGet:3 http://deb.debian.org/debian bullseye-updates InRelease [44.1 kB]\nGet:4 http://deb.debian.org/debian bullseye/main amd64 Packages [8183 kB]\nGet:5 http://deb.debian.org/debian-security bullseye-security/main amd64 Packages [210 kB]\nGet:6 http://deb.debian.org/debian bullseye-updates/main amd64 Packages [14.6 kB]\nFetched 8616 kB in 1s (5833 kB/s)\nReading package lists...\nReading package lists...\nBuilding dependency tree...\nReading state information...\nSuggested packages:\n  ca-certificates\nThe following NEW packages will be installed:\n  openssl\n0 upgraded, 1 newly installed, 0 to remove and 0 not upgraded.\nNeed to get 853 kB of archives.\nAfter this operation, 1501 kB of additional disk space will be used.\nGet:1 http://deb.debian.org/debian bullseye/main amd64 openssl amd64 1.1.1n-0+deb11u3 [853 kB]\n\u001b[91mdebconf: delaying package configuration, since apt-utils is not installed\n\u001b[0mFetched 853 kB in 0s (26.6 MB/s)\nSelecting previously unselected package openssl.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 6661 files and directories currently installed.)\r\nPreparing to unpack .../openssl_1.1.1n-0+deb11u3_amd64.deb ...\r\nUnpacking openssl (1.1.1n-0+deb11u3) ...\r\nSetting up openssl (1.1.1n-0+deb11u3) ...\r\nRemoving intermediate container 5de3d61daf85\n ---> 137bfb0e41bb\nStep 16/35 : WORKDIR /opt/app\n ---> Running in 44ee82f2e98a\nRemoving intermediate container 44ee82f2e98a\n ---> 70c2855b7ec0\nStep 17/35 : COPY ./backend .\n ---> 68b1bb0d9a7b\nStep 18/35 : COPY --from=backend-dependencies /opt/app/node_modules ./node_modules\n ---> c496de9efcd9\nStep 19/35 : RUN npx prisma generate\n ---> Running in cbb51e3c9a5b\nPrisma schema loaded from prisma/schema.prisma\n\n✔ Generated Prisma Client (4.7.1 | library) to ./node_modules/@prisma/client in 600ms\nYou can now start using Prisma Client in your code. Reference: https://pris.ly/d/client\n```\nimport { PrismaClient } from '@prisma/client'\nconst prisma = new PrismaClient()\n```\n\u001b[91mnpm\u001b[0m\u001b[91m notice \n\u001b[0m\u001b[91mnpm \u001b[0m\u001b[91mnotice\u001b[0m\u001b[91m New major version of npm available! 8.19.2 -> 9.2.0\nnpm\u001b[0m\u001b[91m \u001b[0m\u001b[91mnotice\u001b[0m\u001b[91m Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm\u001b[0m\u001b[91m notice\u001b[0m\u001b[91m Run `npm install -g npm@9.2.0` to update!\nnpm\u001b[0m\u001b[91m \u001b[0m\u001b[91mnotice\u001b[0m\u001b[91m \n\u001b[0mRemoving intermediate container cbb51e3c9a5b\n ---> 1faa688d0243\nStep 20/35 : RUN npm run build  && npm prune --production\n ---> Running in bcfad5db7997\n\n> pingvin-share-backend@0.5.1 build\n> nest build\n\n\u001b[91mnpm\u001b[0m\u001b[91m WARN config production Use `--omit=dev` instead.\n\u001b[0m\nup to date, audited 264 packages in 3s\n\n19 packages are looking for funding\n  run `npm fund` for details\n\n3 vulnerabilities (2 moderate, 1 high)\n\nTo address issues that do not require attention, run:\n  npm audit fix\n\nTo address all issues (including breaking changes), run:\n  npm audit fix --force\n\nRun `npm audit` for details.\nRemoving intermediate container bcfad5db7997\n ---> e8dedc851aaa\nStep 21/35 : FROM node:18-slim AS runner\n ---> a26e85f2ac41\nStep 22/35 : ENV NODE_ENV=production\n ---> Running in d89e04f4a193\nRemoving intermediate container d89e04f4a193\n ---> d434a71a23bd\nStep 23/35 : RUN apt-get update && apt-get install -y openssl\n ---> Running in be677a4dcef8\nGet:1 http://deb.debian.org/debian bullseye InRelease [116 kB]\nGet:2 http://deb.debian.org/debian-security bullseye-security InRelease [48.4 kB]\nGet:3 http://deb.debian.org/debian bullseye-updates InRelease [44.1 kB]\nGet:4 http://deb.debian.org/debian bullseye/main amd64 Packages [8183 kB]\nGet:5 http://deb.debian.org/debian-security bullseye-security/main amd64 Packages [210 kB]\nGet:6 http://deb.debian.org/debian bullseye-updates/main amd64 Packages [14.6 kB]\nFetched 8616 kB in 1s (6745 kB/s)\nReading package lists...\nReading package lists...\nBuilding dependency tree...\nReading state information...\nSuggested packages:\n  ca-certificates\nThe following NEW packages will be installed:\n  openssl\n0 upgraded, 1 newly installed, 0 to remove and 0 not upgraded.\nNeed to get 853 kB of archives.\nAfter this operation, 1501 kB of additional disk space will be used.\nGet:1 http://deb.debian.org/debian bullseye/main amd64 openssl amd64 1.1.1n-0+deb11u3 [853 kB]\n\u001b[91mdebconf: delaying package configuration, since apt-utils is not installed\n\u001b[0mFetched 853 kB in 0s (31.8 MB/s)\nSelecting previously unselected package openssl.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 6661 files and directories currently installed.)\r\nPreparing to unpack .../openssl_1.1.1n-0+deb11u3_amd64.deb ...\r\nUnpacking openssl (1.1.1n-0+deb11u3) ...\r\nSetting up openssl (1.1.1n-0+deb11u3) ...\r\nRemoving intermediate container be677a4dcef8\n ---> b571341db910\nStep 24/35 : WORKDIR /opt/app/frontend\n ---> Running in 9539ceddc2c0\nRemoving intermediate container 9539ceddc2c0\n ---> 80636b5b2ff3\nStep 25/35 : COPY --from=frontend-builder /opt/app/public ./public\n ---> 7e4d772afeba\nStep 26/35 : COPY --from=frontend-builder /opt/app/.next/standalone ./\n ---> 7d703abbeede\nStep 27/35 : COPY --from=frontend-builder /opt/app/.next/static ./.next/static\n ---> b928fcffa2d8\nStep 28/35 : WORKDIR /opt/app/backend\n ---> Running in 596a0735b0e8\nRemoving intermediate container 596a0735b0e8\n ---> f03e55bcbb70\nStep 29/35 : COPY --from=backend-builder /opt/app/node_modules ./node_modules\n ---> c1676147c73f\nStep 30/35 : COPY --from=backend-builder /opt/app/dist ./dist\n ---> b9f63377d4dc\nStep 31/35 : COPY --from=backend-builder /opt/app/prisma ./prisma\n ---> 16b869697178\nStep 32/35 : COPY --from=backend-builder /opt/app/package.json ./\n ---> 034837f91f13\nStep 33/35 : WORKDIR /opt/app\n ---> Running in 1086fa24595e\nRemoving intermediate container 1086fa24595e\n ---> 59cb42e99565\nStep 34/35 : EXPOSE 3000\n ---> Running in 28f4676a6382\nRemoving intermediate container 28f4676a6382\n ---> 2c6dc75e4b01\nStep 35/35 : CMD node frontend/server.js & cd backend && npm run prod\n ---> Running in 660dd39a3bfc\nRemoving intermediate container 660dd39a3bfc\n ---> 6f3cd5415b9c\nSuccessfully built 6f3cd5415b9c\nSuccessfully tagged pingvin-share:latest\n","stderr":"","imageSize":618378351},"repair":{"startTime":1672891881351,"endTime":1672891881487,"violations":[{"name":"aptGetInstallUseNoRec","position":{"start":23,"end":23,"columnStart":22,"columnEnd":48}},{"name":"aptGetInstallUseNoRec","position":{"start":33,"end":33,"columnStart":22,"columnEnd":48}},{"name":"ruleAptGetInstallThenRemoveAptLists","position":{"start":23,"end":23,"columnStart":22,"columnEnd":48}},{"name":"ruleAptGetInstallThenRemoveAptLists","position":{"start":33,"end":33,"columnStart":22,"columnEnd":48}}],"repairedDockerfile":"# Using node slim because prisma ORM needs libc for ARM builds\n\n# Stage 1: on frontend dependency change\nFROM node:18-slim AS frontend-dependencies\nWORKDIR /opt/app\nCOPY frontend/package.json frontend/package-lock.json ./\nRUN npm ci\n\n# Stage 2: on frontend change\nFROM node:18-slim AS frontend-builder\nWORKDIR /opt/app\nCOPY ./frontend .\nCOPY --from=frontend-dependencies /opt/app/node_modules ./node_modules\nRUN npm run build\n\n# Stage 3: on backend dependency change\nFROM node:18-slim AS backend-dependencies\nWORKDIR /opt/app\nCOPY backend/package.json backend/package-lock.json ./\nRUN npm ci\n\n# Stage 4:on backend change\nFROM node:18-slim AS backend-builder\nRUN apt-get update && apt-get install --no-install-recommends -y openssl && rm -rf /var/lib/apt/lists/*;\nWORKDIR /opt/app\nCOPY ./backend .\nCOPY --from=backend-dependencies /opt/app/node_modules ./node_modules\nRUN npx prisma generate\nRUN npm run build  && npm prune --production\n\n# Stage 5: Final image\nFROM node:18-slim AS runner\nENV NODE_ENV=production\nRUN apt-get update && apt-get install --no-install-recommends -y openssl && rm -rf /var/lib/apt/lists/*;\n\nWORKDIR /opt/app/frontend\nCOPY --from=frontend-builder /opt/app/public ./public\n# Automatically leverage output traces to reduce image size\n# https://nextjs.org/docs/advanced-features/output-file-tracing\nCOPY --from=frontend-builder /opt/app/.next/standalone ./\nCOPY --from=frontend-builder /opt/app/.next/static ./.next/static\n\nWORKDIR /opt/app/backend\nCOPY --from=backend-builder /opt/app/node_modules ./node_modules\nCOPY --from=backend-builder /opt/app/dist ./dist\nCOPY --from=backend-builder /opt/app/prisma ./prisma\nCOPY --from=backend-builder /opt/app/package.json ./\n\nWORKDIR /opt/app\nEXPOSE 3000\nCMD node frontend/server.js & cd backend && npm run prod"},"repairedBuild":{"startTime":1672891881935,"endTime":1672892189709,"error":null,"stdout":"Sending build context to Docker daemon   1.73MB\r\r\nStep 1/35 : FROM node:18-slim AS frontend-dependencies\n ---> a26e85f2ac41\nStep 2/35 : WORKDIR /opt/app\n ---> Running in d3e658376e48\nRemoving intermediate container d3e658376e48\n ---> 43dd9fed1290\nStep 3/35 : COPY frontend/package.json frontend/package-lock.json ./\n ---> a4c77b8b6199\nStep 4/35 : RUN npm ci\n ---> Running in ddd31f32482b\n\nadded 692 packages, and audited 693 packages in 12s\n\n116 packages are looking for funding\n  run `npm fund` for details\n\n1 high severity vulnerability\n\nTo address all issues, run:\n  npm audit fix\n\nRun `npm audit` for details.\n\u001b[91mnpm notice\u001b[0m\u001b[91m \nnpm notice\u001b[0m\u001b[91m New major version of npm available! 8.19.2 -> 9.2.0\nnpm notice Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm notice Run `npm install -g npm@9.2.0` to update!\n\u001b[0m\u001b[91mnpm notice\u001b[0m\u001b[91m \n\u001b[0mRemoving intermediate container ddd31f32482b\n ---> 4c676e6a454a\nStep 5/35 : FROM node:18-slim AS frontend-builder\n ---> a26e85f2ac41\nStep 6/35 : WORKDIR /opt/app\n ---> Running in 5285a314d9ab\nRemoving intermediate container 5285a314d9ab\n ---> ad0fd526136a\nStep 7/35 : COPY ./frontend .\n ---> 36c6b68856fc\nStep 8/35 : COPY --from=frontend-dependencies /opt/app/node_modules ./node_modules\n ---> b11c22b47053\nStep 9/35 : RUN npm run build\n ---> Running in ca60ab061217\n\n> pingvin-share-frontend@0.5.1 build\n> next build\n\nAttention: Next.js now collects completely anonymous telemetry regarding usage.\nThis information is used to shape Next.js' roadmap and prioritize features.\nYou can learn more, including how to opt-out if you'd not like to participate in this anonymous program, by visiting the following URL:\nhttps://nextjs.org/telemetry\n\ninfo  - Linting and checking validity of types...\n\n./src/components/account/showEnableTotpModal.tsx\n17:8  Warning: 'useUser' is defined but never used.  no-unused-vars\n\n./src/components/admin/ManageUserTable.tsx\n15:16  Warning: 'user' is defined but never used.  no-unused-vars\n\n./src/components/admin/configuration/AdminConfigInput.tsx\n17:26  Warning: 'variable' is defined but never used.  no-unused-vars\n\n./src/components/upload/modals/showCreateUploadModal.tsx\n36:20  Warning: 'createShare' is defined but never used.  no-unused-vars\n53:20  Warning: 'createShare' is defined but never used.  no-unused-vars\n\n./src/services/share.service.ts\n78:22  Warning: 'uploadingProgress' is defined but never used.  no-unused-vars\n\n./src/types/user.type.ts\n32:13  Warning: 'user' is defined but never used.  no-unused-vars\n\ninfo  - Need to disable some ESLint rules? Learn more here: https://nextjs.org/docs/basic-features/eslint#disabling-rules\ninfo  - Creating an optimized production build...\n> [PWA] Compile server\n> [PWA] Compile client (static)\n> [PWA] Auto register service worker with: /opt/app/node_modules/next-pwa/register.js\n> [PWA] Service worker: /opt/app/public/sw.js\n> [PWA]   url: /sw.js\n> [PWA]   scope: /\n> [PWA] Compile server\ninfo  - Compiled successfully\ninfo  - Collecting page data...\ninfo  - Generating static pages (0/13)\ninfo  - Generating static pages (3/13)\ninfo  - Generating static pages (6/13)\ninfo  - Generating static pages (9/13)\ninfo  - Generating static pages (13/13)\ninfo  - Finalizing page optimization...\n\nRoute (pages)                              Size     First Load JS\n┌ ○ / (581 ms)                             6.92 kB         163 kB\n├   /_app                                  0 B             156 kB\n├ ○ /404 (528 ms)                          1.54 kB         158 kB\n├ ○ /account (566 ms)                      9.16 kB         197 kB\n├ ○ /account/shares (546 ms)               4.26 kB         182 kB\n├ ○ /admin (553 ms)                        3.21 kB         160 kB\n├ ○ /admin/config (618 ms)                 340 B           175 kB\n├ ○ /admin/setup (597 ms)                  546 B           175 kB\n├ ○ /admin/users (603 ms)                  5.57 kB         194 kB\n├ λ /api/[...all]                          0 B             156 kB\n├ ○ /auth/signIn (627 ms)                  2.21 kB         185 kB\n├ ○ /auth/signUp (582 ms)                  1.96 kB         185 kB\n├ λ /share/[shareId]                       6.41 kB         166 kB\n├ ○ /upload (580 ms)                       34.5 kB         252 kB\n└ ○ /user/account (548 ms)                 249 B           157 kB\n+ First Load JS shared by all              156 kB\n  ├ chunks/framework-3b5a00d5d7e8d93b.js   45.4 kB\n  ├ chunks/main-3e8934104c436d65.js        28.9 kB\n  ├ chunks/pages/_app-9214de9c9842a713.js  81 kB\n  └ chunks/webpack-36d12a75f0098f30.js     1.04 kB\n\nλ  (Server)  server-side renders at runtime (uses getInitialProps or getServerSideProps)\n○  (Static)  automatically rendered as static HTML (uses no initial props)\n\n\u001b[91mnpm \u001b[0m\u001b[91mnotice\u001b[0m\u001b[91m \n\u001b[0m\u001b[91mnpm \u001b[0m\u001b[91mnotice\u001b[0m\u001b[91m New major version of npm available! 8.19.2 -> 9.2.0\n\u001b[0m\u001b[91mnpm\u001b[0m\u001b[91m \u001b[0m\u001b[91mnotice\u001b[0m\u001b[91m Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm \u001b[0m\u001b[91mnotice\u001b[0m\u001b[91m Run `npm install -g npm@9.2.0` to update!\nnpm\u001b[0m\u001b[91m \u001b[0m\u001b[91mnotice \n\u001b[0mRemoving intermediate container ca60ab061217\n ---> 4906566a49c0\nStep 10/35 : FROM node:18-slim AS backend-dependencies\n ---> a26e85f2ac41\nStep 11/35 : WORKDIR /opt/app\n ---> Running in a60a0977355d\nRemoving intermediate container a60a0977355d\n ---> b4f0be63e269\nStep 12/35 : COPY backend/package.json backend/package-lock.json ./\n ---> 5397df714b19\nStep 13/35 : RUN npm ci\n ---> Running in 2e6ba20752e3\n\u001b[91mnpm WARN deprecated har-validator@5.1.5: this library is no longer supported\n\u001b[0m\u001b[91mnpm WARN deprecated uuid@3.4.0: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.\n\u001b[0m\u001b[91mnpm WARN deprecated uuid@3.4.0: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.\n\u001b[0m\nadded 692 packages, and audited 693 packages in 20s\n\n80 packages are looking for funding\n  run `npm fund` for details\n\n4 vulnerabilities (2 moderate, 2 high)\n\nTo address issues that do not require attention, run:\n  npm audit fix\n\nTo address all issues (including breaking changes), run:\n  npm audit fix --force\n\nRun `npm audit` for details.\n\u001b[91mnpm notice \nnpm notice New major version of npm available! 8.19.2 -> 9.2.0\nnpm notice Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm notice Run `npm install -g npm@9.2.0` to update!\nnpm \u001b[0m\u001b[91mnotice \n\u001b[0mRemoving intermediate container 2e6ba20752e3\n ---> cee3c2a9e920\nStep 14/35 : FROM node:18-slim AS backend-builder\n ---> a26e85f2ac41\nStep 15/35 : RUN apt-get update && apt-get install --no-install-recommends -y openssl && rm -rf /var/lib/apt/lists/*;\n ---> Running in 23682f0cd887\nGet:1 http://deb.debian.org/debian bullseye InRelease [116 kB]\nGet:2 http://deb.debian.org/debian-security bullseye-security InRelease [48.4 kB]\nGet:3 http://deb.debian.org/debian bullseye-updates InRelease [44.1 kB]\nGet:4 http://deb.debian.org/debian bullseye/main amd64 Packages [8183 kB]\nGet:5 http://deb.debian.org/debian-security bullseye-security/main amd64 Packages [210 kB]\nGet:6 http://deb.debian.org/debian bullseye-updates/main amd64 Packages [14.6 kB]\nFetched 8616 kB in 1s (6554 kB/s)\nReading package lists...\nReading package lists...\nBuilding dependency tree...\nReading state information...\nSuggested packages:\n  ca-certificates\nThe following NEW packages will be installed:\n  openssl\n0 upgraded, 1 newly installed, 0 to remove and 0 not upgraded.\nNeed to get 853 kB of archives.\nAfter this operation, 1501 kB of additional disk space will be used.\nGet:1 http://deb.debian.org/debian bullseye/main amd64 openssl amd64 1.1.1n-0+deb11u3 [853 kB]\n\u001b[91mdebconf: delaying package configuration, since apt-utils is not installed\n\u001b[0mFetched 853 kB in 0s (25.4 MB/s)\nSelecting previously unselected package openssl.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 6661 files and directories currently installed.)\r\nPreparing to unpack .../openssl_1.1.1n-0+deb11u3_amd64.deb ...\r\nUnpacking openssl (1.1.1n-0+deb11u3) ...\r\nSetting up openssl (1.1.1n-0+deb11u3) ...\r\nRemoving intermediate container 23682f0cd887\n ---> 67f4ad3ed5bc\nStep 16/35 : WORKDIR /opt/app\n ---> Running in 1e8902d57b20\nRemoving intermediate container 1e8902d57b20\n ---> a4916e7f7453\nStep 17/35 : COPY ./backend .\n ---> ec121fd87b5c\nStep 18/35 : COPY --from=backend-dependencies /opt/app/node_modules ./node_modules\n ---> d8dafa295b30\nStep 19/35 : RUN npx prisma generate\n ---> Running in 47c94e2a9f2e\nPrisma schema loaded from prisma/schema.prisma\n\n✔ Generated Prisma Client (4.7.1 | library) to ./node_modules/@prisma/client in 840ms\nYou can now start using Prisma Client in your code. Reference: https://pris.ly/d/client\n```\nimport { PrismaClient } from '@prisma/client'\nconst prisma = new PrismaClient()\n```\n\u001b[91mnpm\u001b[0m\u001b[91m notice\u001b[0m\u001b[91m \nnpm \u001b[0m\u001b[91mnotice\u001b[0m\u001b[91m New major version of npm available! 8.19.2 -> 9.2.0\nnpm notice\u001b[0m\u001b[91m Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm\u001b[0m\u001b[91m \u001b[0m\u001b[91mnotice\u001b[0m\u001b[91m Run `npm install -g npm@9.2.0` to update!\nnpm \u001b[0m\u001b[91mnotice\u001b[0m\u001b[91m \n\u001b[0mRemoving intermediate container 47c94e2a9f2e\n ---> b44989a699e5\nStep 20/35 : RUN npm run build  && npm prune --production\n ---> Running in be485f35ce00\n\n> pingvin-share-backend@0.5.1 build\n> nest build\n\n\u001b[91mnpm\u001b[0m\u001b[91m WARN config production Use `--omit=dev` instead.\n\u001b[0m\nup to date, audited 264 packages in 3s\n\n19 packages are looking for funding\n  run `npm fund` for details\n\n3 vulnerabilities (2 moderate, 1 high)\n\nTo address issues that do not require attention, run:\n  npm audit fix\n\nTo address all issues (including breaking changes), run:\n  npm audit fix --force\n\nRun `npm audit` for details.\nRemoving intermediate container be485f35ce00\n ---> bac4219ea06e\nStep 21/35 : FROM node:18-slim AS runner\n ---> a26e85f2ac41\nStep 22/35 : ENV NODE_ENV=production\n ---> Running in 227bffa0e79b\nRemoving intermediate container 227bffa0e79b\n ---> 0b7758014c3c\nStep 23/35 : RUN apt-get update && apt-get install --no-install-recommends -y openssl && rm -rf /var/lib/apt/lists/*;\n ---> Running in 47a8ff686bbc\nGet:1 http://deb.debian.org/debian bullseye InRelease [116 kB]\nGet:2 http://deb.debian.org/debian-security bullseye-security InRelease [48.4 kB]\nGet:3 http://deb.debian.org/debian bullseye-updates InRelease [44.1 kB]\nGet:4 http://deb.debian.org/debian bullseye/main amd64 Packages [8183 kB]\nGet:5 http://deb.debian.org/debian-security bullseye-security/main amd64 Packages [210 kB]\nGet:6 http://deb.debian.org/debian bullseye-updates/main amd64 Packages [14.6 kB]\nFetched 8616 kB in 1s (6269 kB/s)\nReading package lists...\nReading package lists...\nBuilding dependency tree...\nReading state information...\nSuggested packages:\n  ca-certificates\nThe following NEW packages will be installed:\n  openssl\n0 upgraded, 1 newly installed, 0 to remove and 0 not upgraded.\nNeed to get 853 kB of archives.\nAfter this operation, 1501 kB of additional disk space will be used.\nGet:1 http://deb.debian.org/debian bullseye/main amd64 openssl amd64 1.1.1n-0+deb11u3 [853 kB]\n\u001b[91mdebconf: delaying package configuration, since apt-utils is not installed\n\u001b[0mFetched 853 kB in 0s (19.9 MB/s)\nSelecting previously unselected package openssl.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 6661 files and directories currently installed.)\r\nPreparing to unpack .../openssl_1.1.1n-0+deb11u3_amd64.deb ...\r\nUnpacking openssl (1.1.1n-0+deb11u3) ...\r\nSetting up openssl (1.1.1n-0+deb11u3) ...\r\nRemoving intermediate container 47a8ff686bbc\n ---> 3a90270d56e5\nStep 24/35 : WORKDIR /opt/app/frontend\n ---> Running in f7ea6116a353\nRemoving intermediate container f7ea6116a353\n ---> 6f24740ad444\nStep 25/35 : COPY --from=frontend-builder /opt/app/public ./public\n ---> 31320f7876b8\nStep 26/35 : COPY --from=frontend-builder /opt/app/.next/standalone ./\n ---> a56a5450c06f\nStep 27/35 : COPY --from=frontend-builder /opt/app/.next/static ./.next/static\n ---> 56f8f194dcee\nStep 28/35 : WORKDIR /opt/app/backend\n ---> Running in 96cc63e15455\nRemoving intermediate container 96cc63e15455\n ---> ca8d417601f9\nStep 29/35 : COPY --from=backend-builder /opt/app/node_modules ./node_modules\n ---> 8fbd6a6dc768\nStep 30/35 : COPY --from=backend-builder /opt/app/dist ./dist\n ---> 0421dbca01f9\nStep 31/35 : COPY --from=backend-builder /opt/app/prisma ./prisma\n ---> e7faacfaa6d8\nStep 32/35 : COPY --from=backend-builder /opt/app/package.json ./\n ---> 12c9724363b8\nStep 33/35 : WORKDIR /opt/app\n ---> Running in 34b8aa694138\nRemoving intermediate container 34b8aa694138\n ---> 87bb9974d344\nStep 34/35 : EXPOSE 3000\n ---> Running in b402de26cc59\nRemoving intermediate container b402de26cc59\n ---> db747ce978df\nStep 35/35 : CMD node frontend/server.js & cd backend && npm run prod\n ---> Running in 73f0dcc2c434\nRemoving intermediate container 73f0dcc2c434\n ---> 80142b326c40\nSuccessfully built 80142b326c40\nSuccessfully tagged pingvin-share:latest\n","stderr":"","imageSize":600419567}}