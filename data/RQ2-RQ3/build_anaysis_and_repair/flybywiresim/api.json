{"repository":"https://github.com/flybywiresim/api","dockerfilePath":"Dockerfile","startTime":1673259080641,"endTime":1673259397233,"clone":{"startTime":1673259080641,"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/flybywiresim/api'...\n","error":null,"endTime":1673259081756,"commit":"ddb5e53bf3541fe504831d7735bfc5770aed0e2b"},"originalBuild":{"startTime":1673259081838,"endTime":1673259243558,"error":null,"stdout":"Sending build context to Docker daemon  1.964MB\r\r\nStep 1/19 : FROM node:12.8-alpine as builder\n12.8-alpine: Pulling from library/node\ne7c96db7181b: Already exists\n3c504dd883c7: Pulling fs layer\n391efc267ebb: Pulling fs layer\nffe3d971af22: Pulling fs layer\nffe3d971af22: Verifying Checksum\nffe3d971af22: Download complete\n391efc267ebb: Verifying Checksum\n391efc267ebb: Download complete\n3c504dd883c7: Verifying Checksum\n3c504dd883c7: Download complete\n3c504dd883c7: Pull complete\n391efc267ebb: Pull complete\nffe3d971af22: Pull complete\nDigest: sha256:9b4ef9aae0d8c9c7a4dbbff596acf98e7d7e6a1843ed7d751fabfc2d4680a5d5\nStatus: Downloaded newer image for node:12.8-alpine\n ---> eaeb7e99eabd\nStep 2/19 : WORKDIR /app\n ---> Running in bfc65fc93640\nRemoving intermediate container bfc65fc93640\n ---> 5dbb860c2e3a\nStep 3/19 : ENV NODE_ENV=development\n ---> Running in 23aa089379aa\nRemoving intermediate container 23aa089379aa\n ---> 6fa0120e2c2c\nStep 4/19 : COPY package*.json ./\n ---> b1f4a850a236\nStep 5/19 : COPY tsconfig*.json ./\n ---> 46b1651e13cc\nStep 6/19 : COPY .eslintrc.json ./\n ---> 7a848c4d4723\nStep 7/19 : COPY .eslintignore ./\n ---> 7e37311f81dc\nStep 8/19 : RUN npm install -g @nestjs/cli\n ---> Running in 7c3868917f6c\n\u001b[91mnpm WARN deprecated sourcemap-codec@1.4.8: Please use @jridgewell/sourcemap-codec instead\n\u001b[0m/usr/local/bin/nest -> /usr/local/lib/node_modules/@nestjs/cli/bin/nest.js\n\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.2 (node_modules/@nestjs/cli/node_modules/chokidar/node_modules/fsevents):\n\u001b[0m\u001b[91mnpm WARN\u001b[0m\u001b[91m notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91mnpm WARN fork-ts-checker-webpack-plugin@7.2.14 requires a peer of vue-template-compiler@* but none is installed. You must install peer dependencies yourself.\n\u001b[0m\u001b[91mnpm WARN ajv-keywords@3.5.2 requires a peer of ajv@^6.9.1 but none is installed. You must install peer dependencies yourself.\n\u001b[0m\u001b[91m\n\u001b[0m+ @nestjs/cli@9.1.8\nadded 250 packages from 245 contributors in 16.949s\nRemoving intermediate container 7c3868917f6c\n ---> 725f426d40e9\nStep 9/19 : RUN npm install\n ---> Running in 6cc25d3a1304\n\u001b[91mnpm\u001b[0m\u001b[91m WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!\n\u001b[0m\n> core-js-pure@3.10.1 postinstall /app/node_modules/core-js-pure\n> node -e \"try{require('./postinstall')}catch(e){}\"\n\n\u001b[96mThank you for using core-js (\u001b[94m https://github.com/zloirock/core-js \u001b[96m) for polyfilling JavaScript standard library!\u001b[0m\n\n\u001b[96mThe project needs your help! Please consider supporting of core-js on Open Collective or Patreon: \u001b[0m\n\u001b[96m>\u001b[94m https://opencollective.com/core-js \u001b[0m\n\u001b[96m>\u001b[94m https://www.patreon.com/zloirock \u001b[0m\n\n\u001b[96mAlso, the author of core-js (\u001b[94m https://github.com/zloirock \u001b[96m) is looking for a good job -)\u001b[0m\n\n\n> @nestjs/core@7.4.4 postinstall /app/node_modules/@nestjs/core\n> opencollective || exit 0\n\n                           Thanks for installing nest \n                 Please consider donating to our open collective\n                        to help us maintain this package.\n                                         \n                            Number of contributors: 0\n                              Number of backers: 879\n                             Annual budget: $176,450\n                             Current balance: $21,263\n                                         \n             Become a partner: https://opencollective.com/nest/donate\n                                         \n\n> fast-xml-parser@3.17.4 postinstall /app/node_modules/fast-xml-parser\n> node tasks/postinstall.js || exit 0\n\n\u001b[96m\u001b[1mLove fast-xml-parser? Check \u001b[32mhttps://amitkumargupta.work \u001b[96m\u001b[1mfor more projects and contribution.\u001b[0m\n\n\u001b[91mnpm WARN lifecycle fbw-api@0.0.1~postinstall: cannot run in wd fbw-api@0.0.1 node scripts/secrets.js (wd=/app)\n\u001b[0m\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@1.2.13 (node_modules/watchpack-chokidar2/node_modules/fsevents):\nnpm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.2.13: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@2.1.3 (node_modules/fsevents):\n\u001b[0m\u001b[91mnpm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.1.3: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91m\n\u001b[0madded 1761 packages from 1151 contributors and audited 1769 packages in 35.542s\nfound 232 vulnerabilities (13 low, 63 moderate, 137 high, 19 critical)\n  run `npm audit fix` to fix them, or `npm audit` for details\nRemoving intermediate container 6cc25d3a1304\n ---> 4e542b8f3a37\nStep 10/19 : COPY src/ src/\n ---> 959683ab8554\nStep 11/19 : RUN npm run build\n ---> Running in 05d6ce35fd81\n\n> fbw-api@0.0.1 prebuild /app\n> rimraf dist\n\n\n> fbw-api@0.0.1 build /app\n> nest build\n\nRemoving intermediate container 05d6ce35fd81\n ---> 0498fe39d239\nStep 12/19 : FROM node:12.8-alpine\n ---> eaeb7e99eabd\nStep 13/19 : WORKDIR /app\n ---> Running in 2394dfbc59fd\nRemoving intermediate container 2394dfbc59fd\n ---> 9766b438ebfc\nStep 14/19 : ENV NODE_ENV=production\n ---> Running in 86cbd7231ca3\nRemoving intermediate container 86cbd7231ca3\n ---> 867d52d53eaa\nStep 15/19 : COPY --from=builder /app/dist ./dist\n ---> 398a72a3e4d5\nStep 16/19 : COPY --from=builder /app/node_modules ./node_modules\n ---> 87c68ce16f5f\nStep 17/19 : EXPOSE 3000\n ---> Running in 68ccaf14ce0f\nRemoving intermediate container 68ccaf14ce0f\n ---> c56a0558bcf3\nStep 18/19 : HEALTHCHECK --interval=15s --timeout=3s --start-period=5s --retries=2  CMD wget --no-verbose --tries=1 --spider http://localhost:3000/health   || exit 1\n ---> Running in 4f83cdddfa24\nRemoving intermediate container 4f83cdddfa24\n ---> 2e5684ef19cd\nStep 19/19 : CMD [ \"node\", \"dist/main.js\" ]\n ---> Running in 1bca9cfeed31\nRemoving intermediate container 1bca9cfeed31\n ---> 7b8e08fde137\nSuccessfully built 7b8e08fde137\nSuccessfully tagged api:latest\n","stderr":"","imageSize":333300015},"repair":{"startTime":1673259243623,"endTime":1673259243703,"violations":[{"name":"npmCacheCleanAfterInstall","position":{"start":10,"end":10,"columnStart":4,"columnEnd":30}},{"name":"npmCacheCleanAfterInstall","position":{"start":11,"end":11,"columnStart":4,"columnEnd":15}}],"repairedDockerfile":"FROM node:12.8-alpine as builder\n\nWORKDIR /app\nENV NODE_ENV=development\n\nCOPY package*.json ./\nCOPY tsconfig*.json ./\nCOPY .eslintrc.json ./\nCOPY .eslintignore ./\n\nRUN npm install -g @nestjs/cli && npm cache clean --force;\nRUN npm install && npm cache clean --force;\n\nCOPY src/ src/\nRUN npm run build\n\n\n\nFROM node:12.8-alpine\n\nWORKDIR /app\nENV NODE_ENV=production\n\nCOPY --from=builder /app/dist ./dist\nCOPY --from=builder /app/node_modules ./node_modules\n\nEXPOSE 3000\n\nHEALTHCHECK --interval=15s --timeout=3s --start-period=5s --retries=2 \\\n CMD wget --no-verbose --tries=1 --spider http://localhost:3000/health \\\n  || exit 1\n\nCMD [ \"node\", \"dist/main.js\" ]\n"},"repairedBuild":{"startTime":1673259245917,"endTime":1673259394520,"error":null,"stdout":"Sending build context to Docker daemon  1.964MB\r\r\nStep 1/19 : FROM node:12.8-alpine as builder\n ---> eaeb7e99eabd\nStep 2/19 : WORKDIR /app\n ---> Running in 08cdbfcb8b84\nRemoving intermediate container 08cdbfcb8b84\n ---> 4b5abdf28b89\nStep 3/19 : ENV NODE_ENV=development\n ---> Running in 503cf03acafc\nRemoving intermediate container 503cf03acafc\n ---> 45c4272c205f\nStep 4/19 : COPY package*.json ./\n ---> 585e4ff0e235\nStep 5/19 : COPY tsconfig*.json ./\n ---> 4d9d0089125c\nStep 6/19 : COPY .eslintrc.json ./\n ---> 16cb10cdf809\nStep 7/19 : COPY .eslintignore ./\n ---> c6535c08d25a\nStep 8/19 : RUN npm install -g @nestjs/cli && npm cache clean --force;\n ---> Running in 658fd79cc07f\n\u001b[91mnpm WARN deprecated sourcemap-codec@1.4.8: Please use @jridgewell/sourcemap-codec instead\n\u001b[0m/usr/local/bin/nest -> /usr/local/lib/node_modules/@nestjs/cli/bin/nest.js\n\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.2 (node_modules/@nestjs/cli/node_modules/chokidar/node_modules/fsevents):\nnpm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\nnpm WARN fork-ts-checker-webpack-plugin@7.2.14 requires a peer of vue-template-compiler@* but none is installed. You must install peer dependencies yourself.\nnpm WARN ajv-keywords@3.5.2 requires a peer of ajv@^6.9.1 but none is installed. You must install peer dependencies yourself.\n\u001b[0m\u001b[91m\n\u001b[0m+ @nestjs/cli@9.1.8\nadded 250 packages from 245 contributors in 16.588s\n\u001b[91mnpm\u001b[0m\u001b[91m WARN using --force I sure hope you know what you are doing.\n\u001b[0mRemoving intermediate container 658fd79cc07f\n ---> 5b5b2496a604\nStep 9/19 : RUN npm install && npm cache clean --force;\n ---> Running in ca077870de8c\n\u001b[91mnpm\u001b[0m\u001b[91m WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!\n\u001b[0m\n> core-js-pure@3.10.1 postinstall /app/node_modules/core-js-pure\n> node -e \"try{require('./postinstall')}catch(e){}\"\n\n\u001b[96mThank you for using core-js (\u001b[94m https://github.com/zloirock/core-js \u001b[96m) for polyfilling JavaScript standard library!\u001b[0m\n\n\u001b[96mThe project needs your help! Please consider supporting of core-js on Open Collective or Patreon: \u001b[0m\n\u001b[96m>\u001b[94m https://opencollective.com/core-js \u001b[0m\n\u001b[96m>\u001b[94m https://www.patreon.com/zloirock \u001b[0m\n\n\u001b[96mAlso, the author of core-js (\u001b[94m https://github.com/zloirock \u001b[96m) is looking for a good job -)\u001b[0m\n\n\n> @nestjs/core@7.4.4 postinstall /app/node_modules/@nestjs/core\n> opencollective || exit 0\n\n                           Thanks for installing nest \n                 Please consider donating to our open collective\n                        to help us maintain this package.\n                                         \n                            Number of contributors: 0\n                              Number of backers: 879\n                             Annual budget: $176,450\n                             Current balance: $21,263\n                                         \n             Become a partner: https://opencollective.com/nest/donate\n                                         \n\n> fast-xml-parser@3.17.4 postinstall /app/node_modules/fast-xml-parser\n> node tasks/postinstall.js || exit 0\n\n\u001b[96m\u001b[1mLove fast-xml-parser? Check \u001b[32mhttps://amitkumargupta.work \u001b[96m\u001b[1mfor more projects and contribution.\u001b[0m\n\n\u001b[91mnpm WARN lifecycle fbw-api@0.0.1~postinstall: cannot run in wd fbw-api@0.0.1 node scripts/secrets.js (wd=/app)\n\u001b[0m\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@1.2.13 (node_modules/watchpack-chokidar2/node_modules/fsevents):\nnpm WARN \u001b[0m\u001b[91mnotsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.2.13: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@2.1.3 (node_modules/fsevents):\n\u001b[0m\u001b[91mnpm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.1.3: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91m\n\u001b[0madded 1761 packages from 1151 contributors and audited 1769 packages in 35.974s\nfound 232 vulnerabilities (13 low, 63 moderate, 137 high, 19 critical)\n  run `npm audit fix` to fix them, or `npm audit` for details\n\u001b[91mnpm\u001b[0m\u001b[91m WARN using --force\u001b[0m\u001b[91m I sure hope you know what you are doing.\n\u001b[0mRemoving intermediate container ca077870de8c\n ---> 1123e2f39562\nStep 10/19 : COPY src/ src/\n ---> 2267280e8172\nStep 11/19 : RUN npm run build\n ---> Running in 63aa08d92e49\n\n> fbw-api@0.0.1 prebuild /app\n> rimraf dist\n\n\n> fbw-api@0.0.1 build /app\n> nest build\n\nRemoving intermediate container 63aa08d92e49\n ---> e89393ee3e77\nStep 12/19 : FROM node:12.8-alpine\n ---> eaeb7e99eabd\nStep 13/19 : WORKDIR /app\n ---> Running in 5fc83b636f5d\nRemoving intermediate container 5fc83b636f5d\n ---> 7428a3604f28\nStep 14/19 : ENV NODE_ENV=production\n ---> Running in f18399f435d7\nRemoving intermediate container f18399f435d7\n ---> fbc174a28192\nStep 15/19 : COPY --from=builder /app/dist ./dist\n ---> bb36b9356b24\nStep 16/19 : COPY --from=builder /app/node_modules ./node_modules\n ---> b316594b7da4\nStep 17/19 : EXPOSE 3000\n ---> Running in 914ec603dd5a\nRemoving intermediate container 914ec603dd5a\n ---> 93d015909396\nStep 18/19 : HEALTHCHECK --interval=15s --timeout=3s --start-period=5s --retries=2  CMD wget --no-verbose --tries=1 --spider http://localhost:3000/health   || exit 1\n ---> Running in 96502c6d9e82\nRemoving intermediate container 96502c6d9e82\n ---> 12898bc5d7b2\nStep 19/19 : CMD [ \"node\", \"dist/main.js\" ]\n ---> Running in dc699359caba\nRemoving intermediate container dc699359caba\n ---> d9e781dff8af\nSuccessfully built d9e781dff8af\nSuccessfully tagged api:latest\n","stderr":"","imageSize":333300015}}