{"repository":"https://github.com/johnpapa/heroes-react","dockerfilePath":"Dockerfile","startTime":1672264391296,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/johnpapa/heroes-react'...\n","error":null,"commit":"2b1f1c8da72dbe941c8b7a78415e37e47b23be18"},"originalBuild":{"startTimestamp":1672264392242,"endTimestamp":1672264745754,"error":null,"stdout":"Sending build context to Docker daemon  1.145MB\r\r\nStep 1/20 : FROM node:10.13-alpine as client-app\n10.13-alpine: Pulling from library/node\n4fe2ade4980c: Pulling fs layer\nc245f6a8ecc5: Pulling fs layer\n82bdc9503d50: Pulling fs layer\n4fe2ade4980c: Verifying Checksum\n4fe2ade4980c: Download complete\n4fe2ade4980c: Pull complete\n82bdc9503d50: Verifying Checksum\n82bdc9503d50: Download complete\nc245f6a8ecc5: Verifying Checksum\nc245f6a8ecc5: Download complete\nc245f6a8ecc5: Pull complete\n82bdc9503d50: Pull complete\nDigest: sha256:22c8219b21f86dfd7398ce1f62c48a022fecdcf0ad7bf3b0681131bd04a023a2\nStatus: Downloaded newer image for node:10.13-alpine\n ---> 93f2dcbcddfe\nStep 2/20 : LABEL authors=\"John Papa\"\n ---> Running in 8089d051c972\nRemoving intermediate container 8089d051c972\n ---> b67982739eb4\nStep 3/20 : WORKDIR /usr/src/app\n ---> Running in d81a3fed72e4\nRemoving intermediate container d81a3fed72e4\n ---> 853c0f64591d\nStep 4/20 : COPY [\"package.json\", \"npm-shrinkwrap.json*\", \"./\"]\n ---> 243e0c9f437c\nStep 5/20 : RUN npm install --silent\n ---> Running in 6284e645eebd\nDownloading binary from https://github.com/sass/node-sass/releases/download/v4.14.1/linux_musl-x64-64_binding.node\nDownload complete\nBinary saved to /usr/src/app/node_modules/node-sass/vendor/linux_musl-x64-64/binding.node\nCaching binary to /root/.npm/node-sass/4.14.1/linux_musl-x64-64_binding.node\nFont Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com\nLicense - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)\n\nBinary found at /usr/src/app/node_modules/node-sass/vendor/linux_musl-x64-64/binding.node\nTesting binary\nBinary is fine\nadded 2094 packages from 900 contributors and audited 2100 packages in 68.212s\nfound 43 vulnerabilities (2 low, 15 moderate, 22 high, 4 critical)\n  run `npm audit fix` to fix them, or `npm audit` for details\nRemoving intermediate container 6284e645eebd\n ---> ea3637a840e7\nStep 6/20 : COPY . .\n ---> 6d8466589455\nStep 7/20 : ARG REACT_APP_API\n ---> Running in 2279877fda11\nRemoving intermediate container 2279877fda11\n ---> 193077af66a9\nStep 8/20 : ENV REACT_APP_API $REACT_APP_API\n ---> Running in eea6b0058bde\nRemoving intermediate container eea6b0058bde\n ---> 570f2f56c632\nStep 9/20 : RUN npm run build\n ---> Running in b9925380af4a\n\n> heroes-react@0.1.0 build /usr/src/app\n> react-scripts build\n\nCreating an optimized production build...\nCompiled successfully.\n\nFile sizes after gzip:\n\n  63.7 KB   build/static/js/4.f56bfcef.chunk.js\n  27.32 KB  build/static/css/main.4b905f0f.chunk.css\n  26.84 KB  build/static/css/4.9d67ac4b.chunk.css\n  7.13 KB   build/static/js/main.53fd7005.chunk.js\n  1.69 KB   build/static/js/villains.4a06d92e.chunk.js\n  1.69 KB   build/static/js/heroes.ce23b260.chunk.js\n  1.19 KB   build/static/js/runtime-main.256c2d44.js\n\nThe project was built assuming it is hosted at /.\nYou can control this with the homepage field in your package.json.\n\nThe build folder is ready to be deployed.\nYou may serve it with a static server:\n\n  yarn global add serve\n  serve -s build\n\nFind out more about deployment here:\n\n  bit.ly/CRA-deploy\n\nRemoving intermediate container b9925380af4a\n ---> 1242f46a0e04\nStep 10/20 : FROM node:10.13-alpine as node-server\n ---> 93f2dcbcddfe\nStep 11/20 : WORKDIR /usr/src/app\n ---> Running in 6de5913405e5\nRemoving intermediate container 6de5913405e5\n ---> 5d5efc80b0c7\nStep 12/20 : COPY [\"package.json\", \"npm-shrinkwrap.json*\", \"./\"]\n ---> 25e76c784888\nStep 13/20 : RUN npm install --production --silent && mv node_modules ../\n ---> Running in e9de742967da\nDownloading binary from https://github.com/sass/node-sass/releases/download/v4.14.1/linux_musl-x64-64_binding.node\nDownload complete\nBinary saved to /usr/src/app/node_modules/node-sass/vendor/linux_musl-x64-64/binding.node\nCaching binary to /root/.npm/node-sass/4.14.1/linux_musl-x64-64_binding.node\nFont Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com\nLicense - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)\n\nBinary found at /usr/src/app/node_modules/node-sass/vendor/linux_musl-x64-64/binding.node\nTesting binary\nBinary is fine\nadded 1802 packages from 821 contributors and audited 2100 packages in 54.252s\nfound 43 vulnerabilities (2 low, 15 moderate, 22 high, 4 critical)\n  run `npm audit fix` to fix them, or `npm audit` for details\nRemoving intermediate container e9de742967da\n ---> 59c653cd6184\nStep 14/20 : COPY server.js .\n ---> 517dca8db899\nStep 15/20 : FROM node:10.13-alpine\n ---> 93f2dcbcddfe\nStep 16/20 : WORKDIR /usr/src/app\n ---> Running in 6587169b6ee5\nRemoving intermediate container 6587169b6ee5\n ---> 89a8e3769e9a\nStep 17/20 : COPY --from=node-server /usr/src /usr/src\n ---> 629db3be22a4\nStep 18/20 : COPY --from=client-app /usr/src/app/build ./public\n ---> eeacf530046e\nStep 19/20 : EXPOSE 8626\n ---> Running in 0093282a382e\nRemoving intermediate container 0093282a382e\n ---> 4a8627a99ed3\nStep 20/20 : CMD [\"node\", \"server.js\"]\n ---> Running in 7a1ebdf2629d\nRemoving intermediate container 7a1ebdf2629d\n ---> 1f547b2dbe97\nSuccessfully built 1f547b2dbe97\nSuccessfully tagged heroes-react:latest\n","stderr":"","imageSize":242618459},"repair":{"violations":[{"name":"npmCacheCleanAfterInstall","position":{"start":5,"end":5,"columnStart":4,"columnEnd":24}},{"name":"npmCacheCleanAfterInstall","position":{"start":15,"end":15,"columnStart":4,"columnEnd":37}}],"repairedDockerfile":"# Client App\nFROM node:10.13-alpine as client-app\nLABEL authors=\"John Papa\"\nWORKDIR /usr/src/app\nCOPY [\"package.json\", \"npm-shrinkwrap.json*\", \"./\"]\nRUN npm install --silent\nCOPY . .\nARG REACT_APP_API\nENV REACT_APP_API $REACT_APP_API\nRUN npm run build\n\n# Node server\nFROM node:10.13-alpine as node-server\nWORKDIR /usr/src/app\nCOPY [\"package.json\", \"npm-shrinkwrap.json*\", \"./\"]\nRUN npm install --production --silent && mv node_modules ../\nCOPY server.js .\n\n# Final image\nFROM node:10.13-alpine\nWORKDIR /usr/src/app\n# get the node_modules\nCOPY --from=node-server /usr/src /usr/src\n# get the client app\nCOPY --from=client-app /usr/src/app/build ./public\nEXPOSE 8626\nCMD [\"node\", \"server.js\"]\n"},"repairedBuild":{"startTimestamp":1672264757777,"endTimestamp":1672265078199,"error":null,"stdout":"Sending build context to Docker daemon  1.145MB\r\r\nStep 1/20 : FROM node:10.13-alpine as client-app\n ---> 93f2dcbcddfe\nStep 2/20 : LABEL authors=\"John Papa\"\n ---> Running in f36242179bc1\nRemoving intermediate container f36242179bc1\n ---> d67b1b7386c7\nStep 3/20 : WORKDIR /usr/src/app\n ---> Running in 1537f9be5e08\nRemoving intermediate container 1537f9be5e08\n ---> 850093f8253a\nStep 4/20 : COPY [\"package.json\", \"npm-shrinkwrap.json*\", \"./\"]\n ---> a9f3a04dbeae\nStep 5/20 : RUN npm install --silent\n ---> Running in d39672057157\nDownloading binary from https://github.com/sass/node-sass/releases/download/v4.14.1/linux_musl-x64-64_binding.node\nDownload complete\nBinary saved to /usr/src/app/node_modules/node-sass/vendor/linux_musl-x64-64/binding.node\nCaching binary to /root/.npm/node-sass/4.14.1/linux_musl-x64-64_binding.node\nFont Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com\nLicense - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)\n\nBinary found at /usr/src/app/node_modules/node-sass/vendor/linux_musl-x64-64/binding.node\nTesting binary\nBinary is fine\nadded 2094 packages from 900 contributors and audited 2100 packages in 63.353s\nfound 43 vulnerabilities (2 low, 15 moderate, 22 high, 4 critical)\n  run `npm audit fix` to fix them, or `npm audit` for details\nRemoving intermediate container d39672057157\n ---> 6e8259e06ed8\nStep 6/20 : COPY . .\n ---> d1934b3432a3\nStep 7/20 : ARG REACT_APP_API\n ---> Running in 3353ac274a11\nRemoving intermediate container 3353ac274a11\n ---> ac3525165428\nStep 8/20 : ENV REACT_APP_API $REACT_APP_API\n ---> Running in 9cee194525d6\nRemoving intermediate container 9cee194525d6\n ---> 0c1ae27ad2b1\nStep 9/20 : RUN npm run build\n ---> Running in eb244cfeb25c\n\n> heroes-react@0.1.0 build /usr/src/app\n> react-scripts build\n\nCreating an optimized production build...\nCompiled successfully.\n\nFile sizes after gzip:\n\n  63.7 KB   build/static/js/4.f56bfcef.chunk.js\n  27.32 KB  build/static/css/main.4b905f0f.chunk.css\n  26.84 KB  build/static/css/4.9d67ac4b.chunk.css\n  7.13 KB   build/static/js/main.53fd7005.chunk.js\n  1.69 KB   build/static/js/villains.4a06d92e.chunk.js\n  1.69 KB   build/static/js/heroes.ce23b260.chunk.js\n  1.19 KB   build/static/js/runtime-main.256c2d44.js\n\nThe project was built assuming it is hosted at /.\nYou can control this with the homepage field in your package.json.\n\nThe build folder is ready to be deployed.\nYou may serve it with a static server:\n\n  yarn global add serve\n  serve -s build\n\nFind out more about deployment here:\n\n  bit.ly/CRA-deploy\n\nRemoving intermediate container eb244cfeb25c\n ---> aba1601eba65\nStep 10/20 : FROM node:10.13-alpine as node-server\n ---> 93f2dcbcddfe\nStep 11/20 : WORKDIR /usr/src/app\n ---> Running in afddb079552c\nRemoving intermediate container afddb079552c\n ---> 59e7b3a0ffd6\nStep 12/20 : COPY [\"package.json\", \"npm-shrinkwrap.json*\", \"./\"]\n ---> ec4064d5009a\nStep 13/20 : RUN npm install --production --silent && mv node_modules ../\n ---> Running in b7909f532c04\nDownloading binary from https://github.com/sass/node-sass/releases/download/v4.14.1/linux_musl-x64-64_binding.node\nDownload complete\nBinary saved to /usr/src/app/node_modules/node-sass/vendor/linux_musl-x64-64/binding.node\nCaching binary to /root/.npm/node-sass/4.14.1/linux_musl-x64-64_binding.node\nFont Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com\nLicense - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)\n\nBinary found at /usr/src/app/node_modules/node-sass/vendor/linux_musl-x64-64/binding.node\nTesting binary\nBinary is fine\nadded 1802 packages from 821 contributors and audited 2100 packages in 41.77s\nfound 43 vulnerabilities (2 low, 15 moderate, 22 high, 4 critical)\n  run `npm audit fix` to fix them, or `npm audit` for details\nRemoving intermediate container b7909f532c04\n ---> 9da59a0abe72\nStep 14/20 : COPY server.js .\n ---> 0211ee4cd89d\nStep 15/20 : FROM node:10.13-alpine\n ---> 93f2dcbcddfe\nStep 16/20 : WORKDIR /usr/src/app\n ---> Running in 70fb62705886\nRemoving intermediate container 70fb62705886\n ---> ef2839cb54d3\nStep 17/20 : COPY --from=node-server /usr/src /usr/src\n ---> 639f8dcc0730\nStep 18/20 : COPY --from=client-app /usr/src/app/build ./public\n ---> e206823cc720\nStep 19/20 : EXPOSE 8626\n ---> Running in 6c7e46d6d274\nRemoving intermediate container 6c7e46d6d274\n ---> e5fb96d9e863\nStep 20/20 : CMD [\"node\", \"server.js\"]\n ---> Running in cb08272fcd7c\nRemoving intermediate container cb08272fcd7c\n ---> 3c70400f65a9\nSuccessfully built 3c70400f65a9\nSuccessfully tagged heroes-react:latest\n","stderr":"","imageSize":242618459},"endTime":1672265079420}