{"repository":"https://github.com/supergiant/control","dockerfilePath":"Dockerfile","startTime":1673066338236,"endTime":1673066830106,"clone":{"startTime":1673066338237,"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/supergiant/control'...\n","error":null,"endTime":1673066342451,"commit":"b3d1debcc05ed4143f8b630e170475b2db57c7f1"},"originalBuild":{"startTime":1673066342528,"endTime":1673066609161,"error":null,"stdout":"Sending build context to Docker daemon  91.05MB\r\r\nStep 1/23 : FROM node:11.3.0-alpine as ui-builder\n11.3.0-alpine: Pulling from library/node\n4fe2ade4980c: Pulling fs layer\n2cc0f9f1817f: Pulling fs layer\n8b4df058b163: Pulling fs layer\n4fe2ade4980c: Verifying Checksum\n4fe2ade4980c: Download complete\n4fe2ade4980c: Pull complete\n8b4df058b163: Verifying Checksum\n8b4df058b163: Download complete\n2cc0f9f1817f: Verifying Checksum\n2cc0f9f1817f: Download complete\n2cc0f9f1817f: Pull complete\n8b4df058b163: Pull complete\nDigest: sha256:17a7b4ea86f66ff4f379515d8ccb8f66eb73f3b9b0c76ab29625315b01eb1fcb\nStatus: Downloaded newer image for node:11.3.0-alpine\n ---> 1df31d366c81\nStep 2/23 : COPY ./cmd/ui/ /\n ---> a50fadd83c7f\nStep 3/23 : WORKDIR /assets\n ---> Running in 729ad500e9e2\nRemoving intermediate container 729ad500e9e2\n ---> d974dcf3eb71\nStep 4/23 : RUN npm rebuild node-sass\n ---> Running in cb36835ca6f5\nRemoving intermediate container cb36835ca6f5\n ---> 33cac96bbd57\nStep 5/23 : RUN npm install\n ---> Running in 18b7f4b8f5c2\n\n> node-sass@4.12.0 install /assets/node_modules/node-sass\n> node scripts/install.js\n\nDownloading binary from https://github.com/sass/node-sass/releases/download/v4.12.0/linux_musl-x64-67_binding.node\nDownload complete\nBinary saved to /assets/node_modules/node-sass/vendor/linux_musl-x64-67/binding.node\nCaching binary to /root/.npm/node-sass/4.12.0/linux_musl-x64-67_binding.node\n\n> node-sass@4.12.0 postinstall /assets/node_modules/node-sass\n> node scripts/build.js\n\nBinary found at /assets/node_modules/node-sass/vendor/linux_musl-x64-67/binding.node\nTesting binary\nBinary is fine\n\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@1.2.9 (node_modules/fsevents):\nnpm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.2.9: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91m\n\u001b[0madded 1214 packages from 1056 contributors and audited 1284 packages in 18.569s\nfound 379 vulnerabilities (15 low, 114 moderate, 185 high, 65 critical)\n  run `npm audit fix` to fix them, or `npm audit` for details\nRemoving intermediate container 18b7f4b8f5c2\n ---> 6c92bfb5703c\nStep 6/23 : RUN npm run build\n ---> Running in 154acfdbd8b9\n\n> sgui@0.0.0 build /assets\n> npm run build:prod\n\n\n> sgui@0.0.0 build:prod /assets\n> ng build --aot=true --prod=true  --buildOptimizer=true --extractCss=true --optimization --output-path ./dist\n\n\u001b[91mBrowserslist: caniuse-lite is outdated. Please run next command `npm update`\n\u001b[0m\nDate: 2023-01-07T04:42:02.422Z\nHash: e956c0bdf0b9623106a9\nTime: 92717ms\nchunk {0} runtime.4d9ea96f2a1bcb645e93.js (runtime) 2.14 kB [entry] [rendered]\nchunk {1} main.656199de4c734edcf181.js (main) 3.65 MB [initial] [rendered]\nchunk {2} polyfills.caa66be051dc2cb565e6.js (polyfills) 86.2 kB [initial] [rendered]\nchunk {3} styles.cf63009e683edb253364.css (styles) 244 kB [initial] [rendered]\nchunk {4} 4.3df0b159b3c81228e200.js () 112 kB  [rendered]\nRemoving intermediate container 154acfdbd8b9\n ---> 5a2279b4b2da\nStep 7/23 : FROM golang:1.12.6 as builder\n1.12.6: Pulling from library/golang\n6f2f362378c5: Pulling fs layer\n494c27a8a6b8: Pulling fs layer\n7596bb83081b: Pulling fs layer\n372744b62d49: Pulling fs layer\n0658c6765517: Pulling fs layer\nfc2529ce2b56: Pulling fs layer\nc9a1ca7e4a49: Pulling fs layer\n372744b62d49: Waiting\nfc2529ce2b56: Waiting\nc9a1ca7e4a49: Waiting\n0658c6765517: Waiting\n7596bb83081b: Verifying Checksum\n7596bb83081b: Download complete\n494c27a8a6b8: Verifying Checksum\n494c27a8a6b8: Download complete\n6f2f362378c5: Verifying Checksum\n6f2f362378c5: Download complete\n372744b62d49: Verifying Checksum\n372744b62d49: Download complete\nc9a1ca7e4a49: Download complete\n0658c6765517: Verifying Checksum\n0658c6765517: Download complete\n6f2f362378c5: Pull complete\n494c27a8a6b8: Pull complete\n7596bb83081b: Pull complete\nfc2529ce2b56: Verifying Checksum\nfc2529ce2b56: Download complete\n372744b62d49: Pull complete\n0658c6765517: Pull complete\nfc2529ce2b56: Pull complete\nc9a1ca7e4a49: Pull complete\nDigest: sha256:35200a727dc44175d9221a6ece398eed7e4b8e17cb7f0d72b20bf2d5cf9dc00d\nStatus: Downloaded newer image for golang:1.12.6\n ---> 9fe4cdc1f173\nStep 8/23 : COPY --from=ui-builder /assets/dist /etc/supergiant/ui\n ---> 0941eed7b44c\nStep 9/23 : COPY . $GOPATH/src/github.com/supergiant/control/\n ---> fdf14bbea05f\nStep 10/23 : WORKDIR $GOPATH/src/github.com/supergiant/control/\n ---> Running in 8680e8c5570d\nRemoving intermediate container 8680e8c5570d\n ---> e85f5852451d\nStep 11/23 : ARG ARCH=amd64\n ---> Running in f79ecae02df8\nRemoving intermediate container f79ecae02df8\n ---> f03edbaeb8be\nStep 12/23 : ARG TAG=unstable\n ---> Running in b575dbc12acc\nRemoving intermediate container b575dbc12acc\n ---> 5bc925a73646\nStep 13/23 : RUN go get -u github.com/rakyll/statik\n ---> Running in cef4ae534f46\n\u001b[91mgo get: warning: modules disabled by GO111MODULE=auto in GOPATH/src;\n\tignoring go.mod;\n\tsee 'go help modules'\n\u001b[0mRemoving intermediate container cef4ae534f46\n ---> e56dc24a808e\nStep 14/23 : RUN statik -src=/etc/supergiant/ui\n ---> Running in 94c65e576457\nRemoving intermediate container 94c65e576457\n ---> 3453633463c2\nStep 15/23 : RUN GO111MODULE=on CGO_ENABLED=0 GOOS=linux GOARCH=${ARCH}     go build -mod=vendor -a -ldflags=\"-X main.version=${TAG}\" -o /go/bin/supergiant ./cmd/controlplane\n ---> Running in 2aa99b32fefd\nRemoving intermediate container 2aa99b32fefd\n ---> 094440da8f9e\nStep 16/23 : RUN mkdir -p /data\n ---> Running in 46f3ee9850d0\nRemoving intermediate container 46f3ee9850d0\n ---> 7c92822c4d35\nStep 17/23 : RUN update-ca-certificates\n ---> Running in 6617f7afb133\nUpdating certificates in /etc/ssl/certs...\n0 added, 0 removed; done.\nRunning hooks in /etc/ca-certificates/update.d...\ndone.\nRemoving intermediate container 6617f7afb133\n ---> cb535e039208\nStep 18/23 : FROM scratch as prod\n ---> \nStep 19/23 : COPY --from=builder /etc/ssl/certs/ca-certificates.crt /etc/ssl/certs/ca-certificates.crt\n ---> 3f41c08aa911\nStep 20/23 : COPY --from=builder /go/bin/supergiant /bin/supergiant\n ---> 65ceb36e57a0\nStep 21/23 : COPY --from=builder /data /data\n ---> 28bfa9a5cf2c\nStep 22/23 : EXPOSE 60200-60250\n ---> Running in 04fdc1950f99\nRemoving intermediate container 04fdc1950f99\n ---> 0fe450697769\nStep 23/23 : ENTRYPOINT [\"/bin/supergiant\", \"-storage-uri\", \"/data/supergiant.db\"]\n ---> Running in ef6ed141c755\nRemoving intermediate container ef6ed141c755\n ---> a09681cd854c\nSuccessfully built a09681cd854c\nSuccessfully tagged control:latest\n","stderr":"","imageSize":116558973},"repair":{"startTime":1673066609227,"endTime":1673066609309,"violations":[{"name":"npmCacheCleanAfterInstall","position":{"start":6,"end":6,"columnStart":4,"columnEnd":15}}],"repairedDockerfile":"FROM node:11.3.0-alpine as ui-builder\n\nCOPY ./cmd/ui/ /\nWORKDIR /assets\n\nRUN npm rebuild node-sass\nRUN npm install && npm cache clean --force;\nRUN npm run build\n\nFROM golang:1.12.6 as builder\n\nCOPY --from=ui-builder /assets/dist /etc/supergiant/ui\nCOPY . $GOPATH/src/github.com/supergiant/control/\nWORKDIR $GOPATH/src/github.com/supergiant/control/\n\nARG ARCH=amd64\nARG TAG=unstable\n\nRUN go get -u github.com/rakyll/statik\nRUN statik -src=/etc/supergiant/ui\nRUN GO111MODULE=on CGO_ENABLED=0 GOOS=linux GOARCH=${ARCH} \\\n    go build -mod=vendor -a -ldflags=\"-X main.version=${TAG}\" -o /go/bin/supergiant ./cmd/controlplane\nRUN mkdir -p /data\n\nRUN update-ca-certificates\nFROM scratch as prod\nCOPY --from=builder /etc/ssl/certs/ca-certificates.crt /etc/ssl/certs/ca-certificates.crt\nCOPY --from=builder /go/bin/supergiant /bin/supergiant\nCOPY --from=builder /data /data\nEXPOSE 60200-60250\n\nENTRYPOINT [\"/bin/supergiant\", \"-storage-uri\", \"/data/supergiant.db\"]\n"},"repairedBuild":{"startTime":1673066609479,"endTime":1673066829786,"error":null,"stdout":"Sending build context to Docker daemon  91.05MB\r\r\nStep 1/23 : FROM node:11.3.0-alpine as ui-builder\n ---> 1df31d366c81\nStep 2/23 : COPY ./cmd/ui/ /\n ---> 9af96834d99c\nStep 3/23 : WORKDIR /assets\n ---> Running in 2de7bb28150e\nRemoving intermediate container 2de7bb28150e\n ---> cfa106670a2e\nStep 4/23 : RUN npm rebuild node-sass\n ---> Running in 96f1165e5349\nRemoving intermediate container 96f1165e5349\n ---> b11cf2cb5180\nStep 5/23 : RUN npm install && npm cache clean --force;\n ---> Running in 00e24a8762f2\n\n> node-sass@4.12.0 install /assets/node_modules/node-sass\n> node scripts/install.js\n\nDownloading binary from https://github.com/sass/node-sass/releases/download/v4.12.0/linux_musl-x64-67_binding.node\nDownload complete\nBinary saved to /assets/node_modules/node-sass/vendor/linux_musl-x64-67/binding.node\nCaching binary to /root/.npm/node-sass/4.12.0/linux_musl-x64-67_binding.node\n\n> node-sass@4.12.0 postinstall /assets/node_modules/node-sass\n> node scripts/build.js\n\nBinary found at /assets/node_modules/node-sass/vendor/linux_musl-x64-67/binding.node\nTesting binary\nBinary is fine\n\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@1.2.9 (node_modules/fsevents):\nnpm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.2.9: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91m\n\u001b[0madded 1214 packages from 1056 contributors and audited 1284 packages in 18.01s\nfound 379 vulnerabilities (15 low, 114 moderate, 185 high, 65 critical)\n  run `npm audit fix` to fix them, or `npm audit` for details\n\u001b[91mnpm WARN using --force I sure hope you know what you are doing.\n\u001b[0mRemoving intermediate container 00e24a8762f2\n ---> 03ff6242361f\nStep 6/23 : RUN npm run build\n ---> Running in cfe9a14af6f2\n\n> sgui@0.0.0 build /assets\n> npm run build:prod\n\n\n> sgui@0.0.0 build:prod /assets\n> ng build --aot=true --prod=true  --buildOptimizer=true --extractCss=true --optimization --output-path ./dist\n\n\u001b[91mBrowserslist: caniuse-lite is outdated. Please run next command `npm update`\n\u001b[0m\nDate: 2023-01-07T04:46:08.169Z\nHash: e956c0bdf0b9623106a9\nTime: 89661ms\nchunk {0} runtime.4d9ea96f2a1bcb645e93.js (runtime) 2.14 kB [entry] [rendered]\nchunk {1} main.656199de4c734edcf181.js (main) 3.65 MB [initial] [rendered]\nchunk {2} polyfills.caa66be051dc2cb565e6.js (polyfills) 86.2 kB [initial] [rendered]\nchunk {3} styles.cf63009e683edb253364.css (styles) 244 kB [initial] [rendered]\nchunk {4} 4.3df0b159b3c81228e200.js () 112 kB  [rendered]\nRemoving intermediate container cfe9a14af6f2\n ---> f643af56cae1\nStep 7/23 : FROM golang:1.12.6 as builder\n ---> 9fe4cdc1f173\nStep 8/23 : COPY --from=ui-builder /assets/dist /etc/supergiant/ui\n ---> 8e3b04d6fc8c\nStep 9/23 : COPY . $GOPATH/src/github.com/supergiant/control/\n ---> fb031ab3661b\nStep 10/23 : WORKDIR $GOPATH/src/github.com/supergiant/control/\n ---> Running in 8b1892ae523f\nRemoving intermediate container 8b1892ae523f\n ---> 161171c5f33f\nStep 11/23 : ARG ARCH=amd64\n ---> Running in 78f6b678de99\nRemoving intermediate container 78f6b678de99\n ---> c243261bb43c\nStep 12/23 : ARG TAG=unstable\n ---> Running in 185c341e152b\nRemoving intermediate container 185c341e152b\n ---> 8a616605ad6d\nStep 13/23 : RUN go get -u github.com/rakyll/statik\n ---> Running in b949b811d5f9\n\u001b[91mgo get: warning: modules disabled by GO111MODULE=auto in GOPATH/src;\n\tignoring go.mod;\n\tsee 'go help modules'\n\u001b[0mRemoving intermediate container b949b811d5f9\n ---> 0f0c8313ff89\nStep 14/23 : RUN statik -src=/etc/supergiant/ui\n ---> Running in 5746985c383b\nRemoving intermediate container 5746985c383b\n ---> 132a178f134a\nStep 15/23 : RUN GO111MODULE=on CGO_ENABLED=0 GOOS=linux GOARCH=${ARCH}     go build -mod=vendor -a -ldflags=\"-X main.version=${TAG}\" -o /go/bin/supergiant ./cmd/controlplane\n ---> Running in d19a15f27586\nRemoving intermediate container d19a15f27586\n ---> 2c4f10d7cdd5\nStep 16/23 : RUN mkdir -p /data\n ---> Running in 42139a262d75\nRemoving intermediate container 42139a262d75\n ---> 6ef952d2b98d\nStep 17/23 : RUN update-ca-certificates\n ---> Running in a7cba9e0e730\nUpdating certificates in /etc/ssl/certs...\n0 added, 0 removed; done.\nRunning hooks in /etc/ca-certificates/update.d...\ndone.\nRemoving intermediate container a7cba9e0e730\n ---> 081f1b689499\nStep 18/23 : FROM scratch as prod\n ---> \nStep 19/23 : COPY --from=builder /etc/ssl/certs/ca-certificates.crt /etc/ssl/certs/ca-certificates.crt\n ---> a40412377d1c\nStep 20/23 : COPY --from=builder /go/bin/supergiant /bin/supergiant\n ---> ff9b50408463\nStep 21/23 : COPY --from=builder /data /data\n ---> cfa6268ecf84\nStep 22/23 : EXPOSE 60200-60250\n ---> Running in 837911083e58\nRemoving intermediate container 837911083e58\n ---> a29630f275ba\nStep 23/23 : ENTRYPOINT [\"/bin/supergiant\", \"-storage-uri\", \"/data/supergiant.db\"]\n ---> Running in 3178dd310d61\nRemoving intermediate container 3178dd310d61\n ---> 4bb397400bb3\nSuccessfully built 4bb397400bb3\nSuccessfully tagged control:latest\n","stderr":"","imageSize":116558973}}