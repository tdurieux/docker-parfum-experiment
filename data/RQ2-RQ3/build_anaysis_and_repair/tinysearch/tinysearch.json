{"repository":"https://github.com/tinysearch/tinysearch","dockerfilePath":"Dockerfile","startTime":1672214246518,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/tinysearch/tinysearch'...\n","error":null,"commit":"10c060bb5a496b699be33ad3108e1cb36760d308"},"originalBuild":{"startTimestamp":1672214247408,"endTimestamp":1672214448057,"error":null,"stdout":"Sending build context to Docker daemon  713.2kB\r\r\nStep 1/22 : ARG TINY_REPO=https://github.com/tinysearch/tinysearch\nStep 2/22 : ARG TINY_BRANCH=master\nStep 3/22 : ARG RUST_IMAGE=rust:alpine\nStep 4/22 : FROM $RUST_IMAGE AS binary-build\nalpine: Pulling from library/rust\nc158987b0551: Already exists\n5171e409b9fd: Pulling fs layer\na0debe0b7c52: Pulling fs layer\n5171e409b9fd: Verifying Checksum\n5171e409b9fd: Download complete\na0debe0b7c52: Verifying Checksum\na0debe0b7c52: Download complete\n5171e409b9fd: Pull complete\na0debe0b7c52: Pull complete\nDigest: sha256:8599c8d0606df8eac2061bd44a63fc25785213a06efac1cda79ef7efd7bdc4bd\nStatus: Downloaded newer image for rust:alpine\n ---> b97871448127\nStep 5/22 : ARG TINY_REPO\n ---> Running in 8c0736cf82b7\nRemoving intermediate container 8c0736cf82b7\n ---> 5a3b7bc4d726\nStep 6/22 : ARG TINY_BRANCH\n ---> Running in d87197b05751\nRemoving intermediate container d87197b05751\n ---> 04d9e82bdbea\nStep 7/22 : WORKDIR /tmp\n ---> Running in e379cbe9d0e3\nRemoving intermediate container e379cbe9d0e3\n ---> c6c0b1c9f045\nStep 8/22 : RUN apk add --update --no-cache --virtual     build-dependencies     musl-dev     openssl-dev     gcc     curl     git     npm     gcc     ca-certificates     libc6-compat     binaryen\n ---> Running in c9a0a214611a\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/19) Installing musl-dev (1.2.3-r4)\n(2/19) Installing pkgconf (1.9.3-r0)\n(3/19) Installing openssl-dev (3.0.7-r0)\n(4/19) Installing brotli-libs (1.0.9-r9)\n(5/19) Installing nghttp2-libs (1.51.0-r0)\n(6/19) Installing libcurl (7.87.0-r0)\n(7/19) Installing curl (7.87.0-r0)\n(8/19) Installing libexpat (2.5.0-r0)\n(9/19) Installing pcre2 (10.42-r0)\n(10/19) Installing git (2.38.2-r0)\n(11/19) Installing c-ares (1.18.1-r1)\n(12/19) Installing icu-data-en (72.1-r1)\nExecuting icu-data-en-72.1-r1.post-install\n\u001b[91m*\n* If you need ICU with non-English locales and legacy charset support, install\n* package icu-data-full.\n*\n\u001b[0m(13/19) Installing icu-libs (72.1-r1)\n(14/19) Installing libuv (1.44.2-r0)\n(15/19) Installing nodejs-current (19.3.0-r0)\n(16/19) Installing npm (9.1.2-r0)\n(17/19) Installing libc6-compat (1.2.3-r4)\n(18/19) Installing binaryen (110-r0)\n(19/19) Installing build-dependencies (20221228.075746)\nExecuting busybox-1.35.0-r29.trigger\nOK: 242 MiB in 45 packages\nRemoving intermediate container c9a0a214611a\n ---> 97b5a5dec5d8\nStep 9/22 : RUN set -eux -o pipefail;     ln -s /lib64/ld-linux-x86-64.so.2 /lib/ld64.so.1;     npm install terser -g;\n ---> Running in 8a2d5a037bb5\n\u001b[91m+ ln -s /lib64/ld-linux-x86-64.so.2 /lib/ld64.so.1\n\u001b[0m\u001b[91m+ npm install terser -g\n\u001b[0m\nadded 12 packages in 611ms\nRemoving intermediate container 8a2d5a037bb5\n ---> 6f4cd55d4022\nStep 10/22 : RUN terser --version\n ---> Running in 4f01d6fe182f\nterser 5.16.1\nRemoving intermediate container 4f01d6fe182f\n ---> f4a4eab7a610\nStep 11/22 : RUN cd /tmp && git clone --branch \"$TINY_BRANCH\" \"$TINY_REPO\"\n ---> Running in dc188d44139b\n\u001b[91mCloning into 'tinysearch'...\n\u001b[0mRemoving intermediate container dc188d44139b\n ---> 83e3f44d3423\nStep 12/22 : RUN set -ex -o pipefail;     cd /tmp/tinysearch     && cargo build --release     && cp target/release/tinysearch $CARGO_HOME/bin\n ---> Running in 08161d832545\n\u001b[91m+ cd /tmp/tinysearch\n+ cargo build --release\n\u001b[0m\u001b[91m    Updating crates.io index\n\u001b[0m\u001b[91m Downloading crates ...\n\u001b[0m\u001b[91m  Downloaded rand v0.7.3\n\u001b[0m\u001b[91m  Downloaded walkdir v2.3.2\n\u001b[0m\u001b[91m  Downloaded version_check v0.9.3\n\u001b[0m\u001b[91m  Downloaded autocfg v1.0.1\n\u001b[0m\u001b[91m  Downloaded remove_dir_all v0.5.3\n\u001b[0m\u001b[91m  Downloaded rand_core v0.5.1\n\u001b[0m\u001b[91m  Downloaded quote v1.0.9\n\u001b[0m\u001b[91m  Downloaded phf_codegen v0.8.0\n\u001b[0m\u001b[91m  Downloaded same-file v1.0.6\n\u001b[0m\u001b[91m  Downloaded rand_core v0.6.3\n\u001b[0m\u001b[91m  Downloaded proc-macro2 v1.0.28\n\u001b[0m\u001b[91m  Downloaded rand v0.8.4\n\u001b[0m\u001b[91m  Downloaded phf_generator v0.8.0\n\u001b[0m\u001b[91m  Downloaded rand_pcg v0.2.1\n\u001b[0m\u001b[91m  Downloaded ryu v1.0.5\n\u001b[0m\u001b[91m  Downloaded phf_shared v0.8.0\n\u001b[0m\u001b[91m  Downloaded phf v0.8.0\n\u001b[0m\u001b[91m  Downloaded includedir_codegen v0.6.0\n\u001b[0m\u001b[91m  Downloaded miniz_oxide v0.4.4\n\u001b[0m\u001b[91m  Downloaded libc v0.2.99\n\u001b[0m\u001b[91m  Downloaded ppv-lite86 v0.2.10\n\u001b[0m\u001b[91m  Downloaded log v0.4.14\n\u001b[0m\u001b[91m  Downloaded flate2 v1.0.20\n\u001b[0m\u001b[91m  Downloaded crc32fast v1.2.1\n\u001b[0m\u001b[91m  Downloaded rand_chacha v0.3.1\n\u001b[0m\u001b[91m  Downloaded rand_chacha v0.2.2\n\u001b[0m\u001b[91m  Downloaded getrandom v0.1.16\n\u001b[0m\u001b[91m  Downloaded bitflags v1.3.2\n\u001b[0m\u001b[91m  Downloaded adler v1.0.2\n\u001b[0m\u001b[91m  Downloaded unicode-width v0.1.8\n\u001b[0m\u001b[91m  Downloaded syn v1.0.74\n\u001b[0m\u001b[91m  Downloaded serde_json v1.0.66\n\u001b[0m\u001b[91m  Downloaded serde v1.0.127\n\u001b[0m\u001b[91m  Downloaded unicode-segmentation v1.8.0\n\u001b[0m\u001b[91m  Downloaded memchr v2.4.0\n\u001b[0m\u001b[91m  Downloaded getopts v0.2.21\n\u001b[0m\u001b[91m  Downloaded argh_shared v0.1.5\n\u001b[0m\u001b[91m  Downloaded itoa v0.4.7\n\u001b[0m\u001b[91m  Downloaded tempfile v3.2.0\n\u001b[0m\u001b[91m  Downloaded heck v0.3.3\n\u001b[0m\u001b[91m  Downloaded argh_derive v0.1.5\n\u001b[0m\u001b[91m  Downloaded argh v0.1.5\n\u001b[0m\u001b[91m  Downloaded unicode-xid v0.2.2\n\u001b[0m\u001b[91m  Downloaded unicase v2.6.0\n\u001b[0m\u001b[91m  Downloaded siphasher v0.3.6\n\u001b[0m\u001b[91m  Downloaded getrandom v0.2.3\n\u001b[0m\u001b[91m  Downloaded cfg-if v1.0.0\n\u001b[0m\u001b[91m  Downloaded bincode v1.3.3\n\u001b[0m\u001b[91m  Downloaded serde_derive v1.0.127\n\u001b[0m\u001b[91m  Downloaded anyhow v1.0.43\n\u001b[0m\u001b[91m  Downloaded pulldown-cmark v0.7.2\n\u001b[0m\u001b[91m  Downloaded includedir v0.6.0\n\u001b[0m\u001b[91m  Downloaded xorf v0.7.2\n\u001b[0m\u001b[91m  Downloaded strip_markdown v0.2.0\n\u001b[0m\u001b[91m   Compiling libc v0.2.99\n\u001b[0m\u001b[91m   Compiling cfg-if v1.0.0\n\u001b[0m\u001b[91m   Compiling proc-macro2 v1.0.28\n\u001b[0m\u001b[91m   Compiling autocfg v1.0.1\n\u001b[0m\u001b[91m   Compiling getrandom v0.1.\u001b[0m\u001b[91m16\n\u001b[0m\u001b[91m   Compiling unicode-xid v0.2.2\n   Compiling \u001b[0m\u001b[91mcrc32fast v1.2.1\n\u001b[0m\u001b[91m   Compiling syn v1.0.74\n\u001b[0m\u001b[91m   Compiling serde_derive v1.0.127\n\u001b[0m\u001b[91m   Compiling ppv-lite86 v0.2.10\n\u001b[0m\u001b[91m   Compiling serde v1.0.127\n\u001b[0m\u001b[91m   Compiling siphasher v0.3.6\n\u001b[0m\u001b[91m   Compiling version_check v0.9.3\n\u001b[0m\u001b[91m   Compiling adler v1.0.2\n\u001b[0m\u001b[91m   Compiling memchr v2.4.0\n\u001b[0m\u001b[91m   Compiling same-file v1.0.6\n\u001b[0m\u001b[91m   Compiling unicode-width v0.1.8\n\u001b[0m\u001b[91m   Compiling unicode-segmentation v1.8.0\n\u001b[0m\u001b[91m   Compiling pulldown-cmark v0.7.2\n\u001b[0m\u001b[91m   Compiling log v0.4.14\n\u001b[0m\u001b[91m   Compiling ryu v1.0.5\n\u001b[0m\u001b[91m   Compiling serde_json v1.0.66\n\u001b[0m\u001b[91m   Compiling argh_shared v0.1.5\n\u001b[0m\u001b[91m   Compiling anyhow v1.0.43\n\u001b[0m\u001b[91m   Compiling bitflags v1.3.2\n\u001b[0m\u001b[91m   Compiling remove_dir_all v0.5.3\n\u001b[0m\u001b[91m   Compiling itoa v0.4.\u001b[0m\u001b[91m7\n\u001b[0m\u001b[91m \u001b[0m\u001b[91m \u001b[0m\u001b[91m Compiling getopts v0.2.21\n\u001b[0m\u001b[91m   Compiling walkdir v2.3.2\n\u001b[0m\u001b[91m   \u001b[0m\u001b[91mCompiling \u001b[0m\u001b[91mphf_shared\u001b[0m\u001b[91m v0.8.0\n\u001b[0m\u001b[91m   Compiling unicase v2.6.0\n\u001b[0m\u001b[91m   Compiling miniz_oxide v0.4.4\n\u001b[0m\u001b[91m   Compiling phf v0.8.0\n\u001b[0m\u001b[91m   Compiling heck v0.3.3\n\u001b[0m\u001b[91m   Compiling quote v1.0.9\n\u001b[0m\u001b[91m   Compiling getrandom v0.2.3\n\u001b[0m\u001b[91m   Compiling flate2 v1.0.20\n\u001b[0m\u001b[91m   Compiling rand_core v0.6.3\n\u001b[0m\u001b[91m   Compiling rand_core v0.5.1\n\u001b[0m\u001b[91m   Compiling rand_chacha v0.3.1\n\u001b[0m\u001b[91m   Compiling rand_chacha v0.2.2\n   Compiling rand_pcg v0.2.1\n\u001b[0m\u001b[91m   Compiling includedir v0.6.0\n\u001b[0m\u001b[91m   Compiling rand v0.8.4\n\u001b[0m\u001b[91m   Compiling rand v0.7.3\n\u001b[0m\u001b[91m   Compiling strip_markdown v0.2.0\n\u001b[0m\u001b[91m   Compiling tempfile v3.2.0\n\u001b[0m\u001b[91m   Compiling phf_generator v0.8.0\n\u001b[0m\u001b[91m   Compiling phf_codegen v0.8.0\n\u001b[0m\u001b[91m   Compiling includedir_codegen v0.6.0\n\u001b[0m\u001b[91m   Compiling tinysearch v0.7.0 (/tmp/tinysearch/bin)\n\u001b[0m\u001b[91m   Compiling argh_derive v0.1.5\n\u001b[0m\u001b[91m   Compiling argh v0.1.5\n\u001b[0m\u001b[91m   Compiling bincode v1.3.3\n   Compiling xorf v0.7\u001b[0m\u001b[91m.2\n\u001b[0m\u001b[91m   Compiling tinysearch-shared v0.7.0 (/tmp/tinysearch/shared)\n\u001b[0m\u001b[91m    Finished release [optimized] target(s) in 38.16s\n\u001b[0m\u001b[91m+ cp target/release/tinysearch /usr/local/cargo/bin\n\u001b[0mRemoving intermediate container 08161d832545\n ---> 80048bd93113\nStep 13/22 : RUN curl https://rustwasm.github.io/wasm-pack/installer/init.sh -sSf | sh\n ---> Running in 4247488c394d\n\u001b[91minfo: downloading wasm-pack\n\u001b[0minfo: successfully installed wasm-pack to `/usr/local/cargo/bin/wasm-pack`\nRemoving intermediate container 4247488c394d\n ---> de90f92fa331\nStep 14/22 : RUN wasm-pack --version\n ---> Running in f6e42182a14c\nwasm-pack 0.10.3\nRemoving intermediate container f6e42182a14c\n ---> 8fdb6618bb2a\nStep 15/22 : FROM $RUST_IMAGE\n ---> b97871448127\nStep 16/22 : WORKDIR /tmp\n ---> Running in 48f8d2499bd4\nRemoving intermediate container 48f8d2499bd4\n ---> 12ab0a66a471\nStep 17/22 : RUN apk add --update --no-cache libc6-compat musl-dev binaryen\n ---> Running in 8a0e8f47c38a\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/3) Installing binaryen (110-r0)\n(2/3) Installing libc6-compat (1.2.3-r4)\n(3/3) Installing musl-dev (1.2.3-r4)\nExecuting busybox-1.35.0-r29.trigger\nOK: 169 MiB in 29 packages\nRemoving intermediate container 8a0e8f47c38a\n ---> 3b843abd5758\nStep 18/22 : RUN set -eux -o pipefail;     ln -s /lib64/ld-linux-x86-64.so.2 /lib/ld64.so.1;\n ---> Running in 018ed6c292a6\n\u001b[91m+ ln -s /lib64/ld-linux-x86-64.so.2 /lib/ld64.so.1\n\u001b[0mRemoving intermediate container 018ed6c292a6\n ---> 5c437374b8b6\nStep 19/22 : COPY --from=binary-build /usr/local/bin/ /usr/local/bin/\n ---> 8fb3103e9ae4\nStep 20/22 : COPY --from=binary-build /usr/local/cargo/bin/ /usr/local/bin/\n ---> 6e3f78fe8958\nStep 21/22 : RUN set -eux -o pipefail;     echo '[{\"title\":\"\",\"body\":\"\",\"url\":\"\"}]' > build.json;     tinysearch build.json;     rm -rf /tmp/*\n ---> Running in 1e9158a313dc\n\u001b[91m+ echo '[{\"title\":\"\",\"body\":\"\",\"url\":\"\"}]'\n\u001b[0m\u001b[91m+ tinysearch build.json\n\u001b[0mUnpacking tinysearch WASM engine into temporary directory \"/tmp/.tmpPvCHZM\"\nStarting unpack\nCopying \"../engine/src/lib.rs\"\nCopying \"../engine/Cargo.toml\"\nCopying \"../shared/.gitignore\"\nCopying \"../engine/.gitignore\"\nCopying \"../shared/src/lib.rs\"\nCopying \"../shared/Cargo.toml\"\nCopying index into crate\nCompiling WASM module using wasm-pack\n\u001b[91m[INFO]: Checking for the Wasm target...\n\u001b[0m\u001b[91minfo: downloading component 'rust-std' for 'wasm32-unknown-unknown'\n\u001b[0m\u001b[91minfo: installing component 'rust-std' for 'wasm32-unknown-unknown'\n\u001b[0m\u001b[91m[INFO]: Compiling to Wasm...\n\u001b[0m\u001b[91m   Compiling proc-macro2 v1.0.49\n   Compiling quote v1.0.23\n\u001b[0m\u001b[91m   Compiling unicode-ident v1.0.6\n\u001b[0m\u001b[91m   Compiling syn v1.0.107\n\u001b[0m\u001b[91m   Compiling serde_derive v1.0.152\n\u001b[0m\u001b[91m   Compiling serde v1.0.152\n\u001b[0m\u001b[91m   Compiling wasm-bindgen-shared v0.2.83\n\u001b[0m\u001b[91m   Compiling log v0.4.17\n\u001b[0m\u001b[91m   Compiling cfg-if v1.0.0\n\u001b[0m\u001b[91m   Compiling bumpalo v3.11\u001b[0m\u001b[91m.1\n\u001b[0m\u001b[91m   Compiling once_cell v1.16.0\n\u001b[0m\u001b[91m   Compiling serde_json v1.0.91\n\u001b[0m\u001b[91m   Compiling wee_alloc v0.4.5\n\u001b[0m\u001b[91m   Compiling wasm-bindgen v0.2.83\n\u001b[0m\u001b[91m   Compiling ryu v1.0.12\n\u001b[0m\u001b[91m   Compiling itoa v1.0.5\n\u001b[0m\u001b[91m   Compiling memory_units v0.4.0\n\u001b[0m\u001b[91m   Compiling cfg-if v0.1.10\n\u001b[0m\u001b[91m   Compiling wasm-bindgen-backend v0.2.83\n\u001b[0m\u001b[91m   Compiling wasm-bindgen-macro-support v0.2.83\n\u001b[0m\u001b[91m   Compiling wasm-bindgen-macro v0.2.83\n\u001b[0m\u001b[91m   Compiling xorf v0.7.2\n\u001b[0m\u001b[91m   Compiling bincode v1.3.3\n\u001b[0m\u001b[91m   Compiling tinysearch-shared v0.7.0 (/tmp/.tmpPvCHZM/shared)\n\u001b[0m\u001b[91m   Compiling tinysearch-engine v0.7.\u001b[0m\u001b[91m0 (/tmp/.tmpPvCHZM/engine)\n\u001b[0m\u001b[91mwarning: use of deprecated associated function `wasm_bindgen::JsValue::from_serde`: causes dependency cycles, use `serde-wasm-bindgen` or `gloo_utils::format::JsValueSerdeExt` instead\n  --> src/lib.rs:54:14\n   |\n54 |     JsValue::from_serde(&results).unwrap()\n   |              ^^^^^^^^^^\n   |\n   = note: `#[warn(deprecated)]` on by default\n\n\u001b[0m\u001b[91mwarning: `tinysearch-engine` (lib) generated 1 warning\n    Finished release [optimized] target(s) in 18.91s\n\u001b[0m\u001b[91m[WARN]: :-) origin crate has no README\n\u001b[0m\u001b[91m[INFO]: License key is set in Cargo.toml but no LICENSE file(s) were found; Please add the LICENSE file(s) to your project directory\n\u001b[0m\u001b[91m[INFO]: Installing wasm-bindgen...\n\u001b[0m\u001b[91m[INFO]: found wasm-opt at \"/usr/bin/wasm-opt\"\n[INFO]: Optimizing wasm binaries with `wasm-opt`...\n\u001b[0m\u001b[91m[INFO]: Optional field missing from Cargo.toml: 'repository'. This is not necessary, but recommended\n\u001b[0m\u001b[91m[INFO]: :-) Done in 26.78s\n[INFO]: :-) Your wasm pkg is ready to publish at /tmp/wasm_output.\n\u001b[0mAll done! Open the output folder with a web server to try the demo.\n\u001b[91m+ rm -rf /tmp/build.json /tmp/storage /tmp/wasm_output\n\u001b[0mRemoving intermediate container 1e9158a313dc\n ---> 27528e48c88e\nStep 22/22 : ENTRYPOINT [\"tinysearch\"]\n ---> Running in d1a748c39ebf\nRemoving intermediate container d1a748c39ebf\n ---> 9fcd35aab7d0\nSuccessfully built 9fcd35aab7d0\nSuccessfully tagged tinysearch:latest\n","stderr":"","imageSize":1217667279},"repair":{"violations":[{"name":"npmCacheCleanAfterInstall","position":{"start":31,"end":31,"columnStart":4,"columnEnd":26}}],"repairedDockerfile":"# Docker tinysearch with deps\n#   - binaryen\n#   - wasm-pack\n#   - terser\n\nARG TINY_REPO=https://github.com/tinysearch/tinysearch\nARG TINY_BRANCH=master\nARG RUST_IMAGE=rust:alpine\n\nFROM $RUST_IMAGE AS binary-build\n\nARG TINY_REPO\nARG TINY_BRANCH\n\nWORKDIR /tmp\n\nRUN apk add --update --no-cache --virtual \\\n    build-dependencies \\\n    musl-dev \\\n    openssl-dev \\\n    gcc \\\n    curl \\\n    git \\\n    npm \\\n    gcc \\\n    ca-certificates \\\n    libc6-compat \\\n    binaryen\n\nRUN set -eux -o pipefail; \\\n    ln -s /lib64/ld-linux-x86-64.so.2 /lib/ld64.so.1; \\\n    npm install terser -g;\n\nRUN terser --version\n\nRUN cd /tmp && git clone --branch \"$TINY_BRANCH\" \"$TINY_REPO\"\nRUN set -ex -o pipefail; \\\n    cd /tmp/tinysearch \\\n    && cargo build --release \\\n    && cp target/release/tinysearch $CARGO_HOME/bin\n\nRUN curl https://rustwasm.github.io/wasm-pack/installer/init.sh -sSf | sh\n\nRUN wasm-pack --version\n\nFROM $RUST_IMAGE\n\nWORKDIR /tmp\n\nRUN apk add --update --no-cache libc6-compat musl-dev binaryen\n\nRUN set -eux -o pipefail; \\\n    ln -s /lib64/ld-linux-x86-64.so.2 /lib/ld64.so.1;\n\nCOPY --from=binary-build /usr/local/bin/ /usr/local/bin/\nCOPY --from=binary-build /usr/local/cargo/bin/ /usr/local/bin/\n\n# crate cache init. No need to download crate for future usage\nRUN set -eux -o pipefail; \\\n    echo '[{\"title\":\"\",\"body\":\"\",\"url\":\"\"}]' > build.json; \\\n    tinysearch build.json; \\\n    rm -rf /tmp/*\n\nENTRYPOINT [\"tinysearch\"]\n"},"repairedBuild":{"startTimestamp":1672214456589,"endTimestamp":1672214649373,"error":null,"stdout":"Sending build context to Docker daemon  713.2kB\r\r\nStep 1/22 : ARG TINY_REPO=https://github.com/tinysearch/tinysearch\nStep 2/22 : ARG TINY_BRANCH=master\nStep 3/22 : ARG RUST_IMAGE=rust:alpine\nStep 4/22 : FROM $RUST_IMAGE AS binary-build\n ---> b97871448127\nStep 5/22 : ARG TINY_REPO\n ---> Running in 74bc5a08783d\nRemoving intermediate container 74bc5a08783d\n ---> a4fb4893a168\nStep 6/22 : ARG TINY_BRANCH\n ---> Running in 42c9b8440d8b\nRemoving intermediate container 42c9b8440d8b\n ---> dd6c6dc59daa\nStep 7/22 : WORKDIR /tmp\n ---> Running in 2411da80fbb1\nRemoving intermediate container 2411da80fbb1\n ---> 47c58003e9a9\nStep 8/22 : RUN apk add --update --no-cache --virtual     build-dependencies     musl-dev     openssl-dev     gcc     curl     git     npm     gcc     ca-certificates     libc6-compat     binaryen\n ---> Running in c4c913fb7f61\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/19) Installing musl-dev (1.2.3-r4)\n(2/19) Installing pkgconf (1.9.3-r0)\n(3/19) Installing openssl-dev (3.0.7-r0)\n(4/19) Installing brotli-libs (1.0.9-r9)\n(5/19) Installing nghttp2-libs (1.51.0-r0)\n(6/19) Installing libcurl (7.87.0-r0)\n(7/19) Installing curl (7.87.0-r0)\n(8/19) Installing libexpat (2.5.0-r0)\n(9/19) Installing pcre2 (10.42-r0)\n(10/19) Installing git (2.38.2-r0)\n(11/19) Installing c-ares (1.18.1-r1)\n(12/19) Installing icu-data-en (72.1-r1)\nExecuting icu-data-en-72.1-r1.post-install\n\u001b[91m*\n* If you need ICU with non-English locales and legacy charset support, install\n* package icu-data-full.\n*\n\u001b[0m(13/19) Installing icu-libs (72.1-r1)\n(14/19) Installing libuv (1.44.2-r0)\n(15/19) Installing nodejs-current (19.3.0-r0)\n(16/19) Installing npm (9.1.2-r0)\n(17/19) Installing libc6-compat (1.2.3-r4)\n(18/19) Installing binaryen (110-r0)\n(19/19) Installing build-dependencies (20221228.080118)\nExecuting busybox-1.35.0-r29.trigger\nOK: 242 MiB in 45 packages\nRemoving intermediate container c4c913fb7f61\n ---> d8085b0b3e0e\nStep 9/22 : RUN set -eux -o pipefail;     ln -s /lib64/ld-linux-x86-64.so.2 /lib/ld64.so.1;     npm install terser -g;\n ---> Running in 734a8590459f\n\u001b[91m+ ln -s /lib64/ld-linux-x86-64.so.2 /lib/ld64.so.1\n\u001b[0m\u001b[91m+ npm install terser -g\n\u001b[0m\nadded 12 packages in 620ms\nRemoving intermediate container 734a8590459f\n ---> b944fbe061e4\nStep 10/22 : RUN terser --version\n ---> Running in 99810ece4a14\nterser 5.16.1\nRemoving intermediate container 99810ece4a14\n ---> 5da7602daae5\nStep 11/22 : RUN cd /tmp && git clone --branch \"$TINY_BRANCH\" \"$TINY_REPO\"\n ---> Running in 47de03da8c0e\n\u001b[91mCloning into 'tinysearch'...\n\u001b[0mRemoving intermediate container 47de03da8c0e\n ---> b226d3c8cf0a\nStep 12/22 : RUN set -ex -o pipefail;     cd /tmp/tinysearch     && cargo build --release     && cp target/release/tinysearch $CARGO_HOME/bin\n ---> Running in b151ef5c72ec\n\u001b[91m+ cd /tmp/tinysearch\n+ cargo build --release\n\u001b[0m\u001b[91m    Updating crates.io index\n\u001b[0m\u001b[91m Downloading crates ...\n\u001b[0m\u001b[91m  Downloaded rand v0.7.3\n\u001b[0m\u001b[91m  Downloaded log v0.4.14\n\u001b[0m\u001b[91m  Downloaded memchr v2.4.0\n\u001b[0m\u001b[91m  Downloaded miniz_oxide v0.4.4\n\u001b[0m\u001b[91m  Downloaded quote v1.0.9\n\u001b[0m\u001b[91m  Downloaded phf v0.8.0\n\u001b[0m\u001b[91m  Downloaded proc-macro2 v1.0.28\n\u001b[0m\u001b[91m  Downloaded xorf v0.7.2\n\u001b[0m\u001b[91m  Downloaded version_check v0.9.3\n\u001b[0m\u001b[91m  Downloaded unicode-xid v0.2.2\n\u001b[0m\u001b[91m  Downloaded unicode-width v0.1.8\n\u001b[0m\u001b[91m  Downloaded unicase v2.6.0\n\u001b[0m\u001b[91m  Downloaded rand_pcg v0.2.1\n\u001b[0m\u001b[91m  Downloaded remove_dir_all v0.5.3\n\u001b[0m\u001b[91m  Downloaded walkdir v2.3.2\n\u001b[0m\u001b[91m  Downloaded phf_shared v0.8.0\n\u001b[0m\u001b[91m  Downloaded adler v1.0.2\n\u001b[0m\u001b[91m  Downloaded unicode-segmentation v1.8.0\n\u001b[0m\u001b[91m  Downloaded getrandom v0.1.16\n\u001b[0m\u001b[91m  Downloaded strip_markdown v0.2.0\n\u001b[0m\u001b[91m  Downloaded pulldown-cmark v0.7.2\n\u001b[0m\u001b[91m  Downloaded bincode v1.3.3\n\u001b[0m\u001b[91m  Downloaded flate2 v1.0.20\n\u001b[0m\u001b[91m  Downloaded includedir v0.6.0\n\u001b[0m\u001b[91m  Downloaded autocfg v1.0.1\n\u001b[0m\u001b[91m  Downloaded rand_core v0.6.3\n\u001b[0m\u001b[91m  Downloaded rand_core v0.5.1\n\u001b[0m\u001b[91m  Downloaded rand_chacha v0.3.1\n\u001b[0m\u001b[91m  Downloaded rand_chacha v0.2.2\n\u001b[0m\u001b[91m  Downloaded crc32fast v1.2.1\n\u001b[0m\u001b[91m  Downloaded argh_shared v0.1.5\n\u001b[0m\u001b[91m  Downloaded argh_derive v0.1.5\n\u001b[0m\u001b[91m  Downloaded anyhow v1.0.43\n\u001b[0m\u001b[91m  Downloaded siphasher v0.3.6\n\u001b[0m\u001b[91m  Downloaded heck v0.3.3\n\u001b[0m\u001b[91m  Downloaded argh v0.1.5\n\u001b[0m\u001b[91m  Downloaded tempfile v3.2.0\n\u001b[0m\u001b[91m  Downloaded syn v1.0.74\n\u001b[0m\u001b[91m  Downloaded serde_json v1.0.66\n\u001b[0m\u001b[91m  Downloaded same-file v1.0.6\n\u001b[0m\u001b[91m  Downloaded serde_derive v1.0.127\n\u001b[0m\u001b[91m  Downloaded cfg-if v1.0.0\n\u001b[0m\u001b[91m  Downloaded serde v1.0.127\n\u001b[0m\u001b[91m  Downloaded bitflags v1.3.2\n\u001b[0m\u001b[91m  Downloaded ryu v1.0.5\n\u001b[0m\u001b[91m  Downloaded rand v0.8.4\n\u001b[0m\u001b[91m  Downloaded phf_generator v0.8.0\n\u001b[0m\u001b[91m  Downloaded ppv-lite86 v0.2.10\n\u001b[0m\u001b[91m  Downloaded phf_codegen v0.8.0\n\u001b[0m\u001b[91m  Downloaded libc v0.2.99\n\u001b[0m\u001b[91m  Downloaded includedir_codegen v0.6.0\n\u001b[0m\u001b[91m  Downloaded getopts v0.2.21\n\u001b[0m\u001b[91m  Downloaded getrandom v0.2.3\n\u001b[0m\u001b[91m  Downloaded itoa v0.4.7\n\u001b[0m\u001b[91m   Compiling libc v0.2.99\n   Compiling cfg-if v1.0.0\n\u001b[0m\u001b[91m   Compiling proc-macro2 v1.0.28\n\u001b[0m\u001b[91m   Compiling unicode-xid v0.2.2\n   Compiling autocfg v1.0.1\n\u001b[0m\u001b[91m   Compiling getrandom v0.1.16\n\u001b[0m\u001b[91m   Compiling syn v1.0.74\n\u001b[0m\u001b[91m   Compiling crc32fast v1.2.1\n\u001b[0m\u001b[91m   Compiling ppv-lite86 v0.2.10\n\u001b[0m\u001b[91m   Compiling serde_derive v1.0.127\u001b[0m\u001b[91m\n\u001b[0m\u001b[91m   Compiling siphasher v0.3.6\n\u001b[0m\u001b[91m   Compiling serde v1.0.127\n\u001b[0m\u001b[91m   Compiling adler v1.0.2\n\u001b[0m\u001b[91m   Compiling version_check v0.9.3\n\u001b[0m\u001b[91m   Compiling memchr v2.4.0\n\u001b[0m\u001b[91m   Compiling same-file v1.0.6\n\u001b[0m\u001b[91m   Compiling unicode-width v0.1.8\n\u001b[0m\u001b[91m   Compiling ryu v1.0.5\n\u001b[0m\u001b[91m   Compiling unicode-segmentation v1.8.0\n\u001b[0m\u001b[91m   Compiling pulldown-cmark v0.7.2\n\u001b[0m\u001b[91m   Compiling log v0.4.14\n\u001b[0m\u001b[91m   Compiling anyhow v1.0.43\n\u001b[0m\u001b[91m   Compiling serde_json v1.0.66\n\u001b[0m\u001b[91m   Compiling argh_shared v0.1.5\n\u001b[0m\u001b[91m   Compiling bitflags v1.3.2\n\u001b[0m\u001b[91m   Compiling remove_dir_all v0.5.3\n\u001b[0m\u001b[91m   Compiling itoa v0.4.7\n\u001b[0m\u001b[91m   Compiling walkdir v2.3.2\n\u001b[0m\u001b[91m   Compiling getopts v0.2.21\n\u001b[0m\u001b[91m   Compiling phf_shared v0.8.0\n\u001b[0m\u001b[91m \u001b[0m\u001b[91m  Compiling miniz_oxide v0.4.4\n\u001b[0m\u001b[91m   Compiling heck v0.3.3\n\u001b[0m\u001b[91m   Compiling unicase v2.6.0\n\u001b[0m\u001b[91m   Compiling phf v0.8.0\n\u001b[0m\u001b[91m   Compiling quote v1.0.9\n\u001b[0m\u001b[91m   Compiling getrandom v0.2.3\n\u001b[0m\u001b[91m   Compiling rand_core v0.6.3\n\u001b[0m\u001b[91m   Compiling rand_core v0.5.1\n\u001b[0m\u001b[91m \u001b[0m\u001b[91m  \u001b[0m\u001b[91mCompiling\u001b[0m\u001b[91m \u001b[0m\u001b[91mflate2 v1.0.20\n\u001b[0m\u001b[91m   Compiling rand_chacha v0.3.1\n\u001b[0m\u001b[91m   Compiling rand_chacha v0.2.2\n\u001b[0m\u001b[91m   Compiling rand_pcg v0.2.1\n\u001b[0m\u001b[91m   Compiling rand v0.8.4\n\u001b[0m\u001b[91m   Compiling rand v0.7.3\n\u001b[0m\u001b[91m   Compiling includedir v0.6.0\n\u001b[0m\u001b[91m   Compiling strip_markdown v0.2.0\n\u001b[0m\u001b[91m   Compiling tempfile v3.2.0\n\u001b[0m\u001b[91m   Compiling phf_generator v0.8.0\n\u001b[0m\u001b[91m   Compiling phf_codegen v0.8.0\n\u001b[0m\u001b[91m   Compiling includedir_codegen v0.6.0\n\u001b[0m\u001b[91m   Compiling tinysearch v0.7.0 (/tmp/tinysearch/bin)\n\u001b[0m\u001b[91m   Compiling argh_derive v0.1.5\n\u001b[0m\u001b[91m   Compiling argh v0.1.5\n\u001b[0m\u001b[91m   Compiling bincode v1.3.3\n\u001b[0m\u001b[91m   Compiling xorf v0.\u001b[0m\u001b[91m7.2\n\u001b[0m\u001b[91m   Compiling tinysearch-shared v0.7.0 (/tmp/tinysearch/shared)\n\u001b[0m\u001b[91m \u001b[0m\u001b[91m   Finished release [optimized] target(s) in 38.29s\n\u001b[0m\u001b[91m+ cp target/release/tinysearch /usr/local/cargo/bin\n\u001b[0mRemoving intermediate container b151ef5c72ec\n ---> dd971bf38a16\nStep 13/22 : RUN curl https://rustwasm.github.io/wasm-pack/installer/init.sh -sSf | sh\n ---> Running in 2005f7147f06\n\u001b[91minfo: downloading wasm-pack\n\u001b[0minfo: successfully installed wasm-pack to `/usr/local/cargo/bin/wasm-pack`\nRemoving intermediate container 2005f7147f06\n ---> 43a8131b739d\nStep 14/22 : RUN wasm-pack --version\n ---> Running in 9f15bf045c2a\nwasm-pack 0.10.3\nRemoving intermediate container 9f15bf045c2a\n ---> e84eba990754\nStep 15/22 : FROM $RUST_IMAGE\n ---> b97871448127\nStep 16/22 : WORKDIR /tmp\n ---> Running in 377f1d6e2041\nRemoving intermediate container 377f1d6e2041\n ---> 0c8887cf2eee\nStep 17/22 : RUN apk add --update --no-cache libc6-compat musl-dev binaryen\n ---> Running in 0add16494a3a\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/3) Installing binaryen (110-r0)\n(2/3) Installing libc6-compat (1.2.3-r4)\n(3/3) Installing musl-dev (1.2.3-r4)\nExecuting busybox-1.35.0-r29.trigger\nOK: 169 MiB in 29 packages\nRemoving intermediate container 0add16494a3a\n ---> 2b55ee033811\nStep 18/22 : RUN set -eux -o pipefail;     ln -s /lib64/ld-linux-x86-64.so.2 /lib/ld64.so.1;\n ---> Running in d0a98d50dbbf\n\u001b[91m+ ln -s /lib64/ld-linux-x86-64.so.2 /lib/ld64.so.1\n\u001b[0mRemoving intermediate container d0a98d50dbbf\n ---> 5b173a636e23\nStep 19/22 : COPY --from=binary-build /usr/local/bin/ /usr/local/bin/\n ---> dac795437c73\nStep 20/22 : COPY --from=binary-build /usr/local/cargo/bin/ /usr/local/bin/\n ---> 77b211cdfc1a\nStep 21/22 : RUN set -eux -o pipefail;     echo '[{\"title\":\"\",\"body\":\"\",\"url\":\"\"}]' > build.json;     tinysearch build.json;     rm -rf /tmp/*\n ---> Running in a26b8c51ad76\n\u001b[91m+ echo '[{\"title\":\"\",\"body\":\"\",\"url\":\"\"}]'\n\u001b[0m\u001b[91m+ tinysearch build.json\n\u001b[0mUnpacking tinysearch WASM engine into temporary directory \"/tmp/.tmpVa6eWY\"\nStarting unpack\nCopying \"../engine/src/lib.rs\"\nCopying \"../engine/Cargo.toml\"\nCopying \"../shared/.gitignore\"\nCopying \"../engine/.gitignore\"\nCopying \"../shared/src/lib.rs\"\nCopying \"../shared/Cargo.toml\"\nCopying index into crate\nCompiling WASM module using wasm-pack\n\u001b[91m[INFO]: Checking for the Wasm target...\n\u001b[0m\u001b[91minfo: downloading component 'rust-std' for 'wasm32-unknown-unknown'\n\u001b[0m\u001b[91minfo: installing component 'rust-std' for 'wasm32-unknown-unknown'\n\u001b[0m\u001b[91m[INFO]: Compiling to Wasm...\n\u001b[0m\u001b[91m   Compiling proc-macro2 v1.0.49\n   Compiling unicode-ident v1.0.6\n\u001b[0m\u001b[91m   Compiling quote v\u001b[0m\u001b[91m1.0.23\n\u001b[0m\u001b[91m   Compiling syn v1.\u001b[0m\u001b[91m0.107\n\u001b[0m\u001b[91m   Compiling serde_derive v1.0.152\u001b[0m\u001b[91m\n\u001b[0m\u001b[91m   Compiling serde v1\u001b[0m\u001b[91m.0.152\n\u001b[0m\u001b[91m   Compiling log v0.4.17\n\u001b[0m\u001b[91m   Compiling wasm-bindgen-shared v0.2.83\n\u001b[0m\u001b[91m   Compiling cfg-if v1.0.0\n\u001b[0m\u001b[91m   Compiling bumpalo v3.\u001b[0m\u001b[91m11.1\n\u001b[0m\u001b[91m   Compiling once_cell v1.16.0\n\u001b[0m\u001b[91m   Compiling serde_json v1.0.91\n\u001b[0m\u001b[91m   Compiling wasm-bindgen v0.2.83\n\u001b[0m\u001b[91m   Compiling itoa v1.0.5\n\u001b[0m\u001b[91m   Compiling ryu\u001b[0m\u001b[91m v1.0.12\n\u001b[0m\u001b[91m   Compiling wee_alloc v0.\u001b[0m\u001b[91m4.5\n\u001b[0m\u001b[91m   Compiling memory_units v0.4\u001b[0m\u001b[91m.0\n\u001b[0m\u001b[91m   Compiling cfg-if v0.1.10\u001b[0m\u001b[91m\n\u001b[0m\u001b[91m   Compiling wasm-bindgen-backend v0.2.83\n\u001b[0m\u001b[91m   Compiling wasm-bindgen-macro-support v0.2.83\n\u001b[0m\u001b[91m   Compiling wasm-bindgen-macro v0.2.83\n\u001b[0m\u001b[91m   Compiling xorf v0.7.2\n\u001b[0m\u001b[91m   Compiling bincode v1.3.3\n\u001b[0m\u001b[91m   Compiling tinysearch-shared v0.7.0 (/tmp/.tmpVa6eWY/shared)\n\u001b[0m\u001b[91m   Compiling tinysearch-engine v0.7.0 (/tmp/.tmpVa6eWY/engine)\n\u001b[0m\u001b[91mwarning: use of deprecated associated function `wasm_bindgen::JsValue::from_serde`: causes dependency cycles, use `serde-wasm-bindgen` or `gloo_utils::format::JsValueSerdeExt` instead\n  --> src/lib.rs:54:14\n   |\n54 |     JsValue::from_serde(&results).unwrap()\n   |              ^^^^^^^^^^\n   |\n   = note: `#[warn(deprecated)]` on by default\n\n\u001b[0m\u001b[91mwarning: `tinysearch-engine` (lib) generated 1 warning\n    Finished release [optimized] target(s) in 18.13s\n\u001b[0m\u001b[91m[WARN]: :-) origin crate has no README\n[INFO]: License key is set in Cargo.toml but no LICENSE file(s) were found; Please add the LICENSE file(s) to your project directory\n\u001b[0m\u001b[91m[INFO]: Installing wasm-bindgen...\n\u001b[0m\u001b[91m[INFO]: found wasm-opt at \"/usr/bin/wasm-opt\"\n[INFO]: Optimizing wasm binaries with `wasm-opt`...\n\u001b[0m\u001b[91m[INFO]: Optional field missing from Cargo.toml: 'repository'. This is not necessary, but recommended\n[INFO]: :-) Done in 22.75s\n[INFO]: :-) Your wasm pkg is ready to publish at /tmp/wasm_output.\n\u001b[0mAll done! Open the output folder with a web server to try the demo.\n\u001b[91m+ rm -rf /tmp/build.json /tmp/storage /tmp/wasm_output\n\u001b[0mRemoving intermediate container a26b8c51ad76\n ---> 220bd675aae1\nStep 22/22 : ENTRYPOINT [\"tinysearch\"]\n ---> Running in b186a43a1be3\nRemoving intermediate container b186a43a1be3\n ---> dabc5e68aa0b\nSuccessfully built dabc5e68aa0b\nSuccessfully tagged tinysearch:latest\n","stderr":"","imageSize":1217739702},"endTime":1672214649766}