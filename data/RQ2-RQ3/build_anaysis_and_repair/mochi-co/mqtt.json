{"repository":"https://github.com/mochi-co/mqtt","dockerfilePath":"Dockerfile","startTime":1672774349348,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/mochi-co/mqtt'...\n","error":null,"commit":"4080c89127298df0cf7be156e7e460778d4be68f"},"originalBuild":{"startTimestamp":1672774350695,"endTimestamp":1672774396177,"error":null,"stdout":"Sending build context to Docker daemon  14.21MB\r\r\nStep 1/16 : FROM golang:1.19.0-alpine3.15 AS builder\n1.19.0-alpine3.15: Pulling from library/golang\n9621f1afde84: Pulling fs layer\n5ff166040dee: Pulling fs layer\nd6319d9ddc53: Pulling fs layer\n67c34a172fd6: Pulling fs layer\n52b8d82d521e: Pulling fs layer\n52b8d82d521e: Waiting\n67c34a172fd6: Waiting\n9621f1afde84: Verifying Checksum\n9621f1afde84: Download complete\nd6319d9ddc53: Verifying Checksum\nd6319d9ddc53: Download complete\n5ff166040dee: Verifying Checksum\n5ff166040dee: Download complete\n9621f1afde84: Pull complete\n5ff166040dee: Pull complete\nd6319d9ddc53: Pull complete\n52b8d82d521e: Download complete\n67c34a172fd6: Download complete\n67c34a172fd6: Pull complete\n52b8d82d521e: Pull complete\nDigest: sha256:9933178d3405af3a70fd89eafb62df68d7f862384f28dbf9f15717c3136ac5e0\nStatus: Downloaded newer image for golang:1.19.0-alpine3.15\n ---> 4482951646ac\nStep 2/16 : RUN apk update\n ---> Running in dbc9bb4bce65\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/community/x86_64/APKINDEX.tar.gz\nv3.15.6-237-g9ae8855cb5 [https://dl-cdn.alpinelinux.org/alpine/v3.15/main]\nv3.15.6-237-g9ae8855cb5 [https://dl-cdn.alpinelinux.org/alpine/v3.15/community]\nOK: 15859 distinct packages available\nRemoving intermediate container dbc9bb4bce65\n ---> e83df4528b0e\nStep 3/16 : RUN apk add git\n ---> Running in e04bdd02a90e\n(1/6) Installing brotli-libs (1.0.9-r5)\n(2/6) Installing nghttp2-libs (1.46.0-r0)\n(3/6) Installing libcurl (7.80.0-r5)\n(4/6) Installing expat (2.5.0-r0)\n(5/6) Installing pcre2 (10.40-r0)\n(6/6) Installing git (2.34.5-r0)\nExecuting busybox-1.34.1-r7.trigger\nOK: 19 MiB in 21 packages\nRemoving intermediate container e04bdd02a90e\n ---> 5974d148ad6a\nStep 4/16 : WORKDIR /app\n ---> Running in d81a133080a1\nRemoving intermediate container d81a133080a1\n ---> 5c33c8760174\nStep 5/16 : COPY go.mod ./\n ---> a9d072cd4a3c\nStep 6/16 : COPY go.sum ./\n ---> 71ef73aa7758\nStep 7/16 : RUN go mod download\n ---> Running in 857075546f4f\nRemoving intermediate container 857075546f4f\n ---> 3b1b37d90751\nStep 8/16 : COPY . ./\n ---> 89cbc4f88784\nStep 9/16 : RUN go build -o /app/mochi ./cmd\n ---> Running in 9f120c624825\nRemoving intermediate container 9f120c624825\n ---> e5d77ed452f0\nStep 10/16 : FROM alpine\n ---> 49176f190c7e\nStep 11/16 : WORKDIR /\n ---> Running in 5bca1afd6aef\nRemoving intermediate container 5bca1afd6aef\n ---> d36574b9169d\nStep 12/16 : COPY --from=builder /app/mochi .\n ---> 7331c415f187\nStep 13/16 : EXPOSE 1883\n ---> Running in 5a115688e985\nRemoving intermediate container 5a115688e985\n ---> d094a57cd946\nStep 14/16 : EXPOSE 1882\n ---> Running in a1ffbb075766\nRemoving intermediate container a1ffbb075766\n ---> 9ea87d5882b9\nStep 15/16 : EXPOSE 8080\n ---> Running in 0988b16dfef9\nRemoving intermediate container 0988b16dfef9\n ---> 0c15bed9a6f7\nStep 16/16 : ENTRYPOINT [ \"/mochi\" ]\n ---> Running in 34fb2990e638\nRemoving intermediate container 34fb2990e638\n ---> 0e2d0da0ff18\nSuccessfully built 0e2d0da0ff18\nSuccessfully tagged mqtt:latest\n","stderr":"","imageSize":15509662},"repair":{"violations":[{"name":"apkAddUseNoCache","position":{"start":3,"end":3,"columnStart":4,"columnEnd":15}}],"repairedDockerfile":"FROM golang:1.19.0-alpine3.15 AS builder\n\nRUN apk update\nRUN apk add --no-cache git\n\nWORKDIR /app\n\nCOPY go.mod ./\nCOPY go.sum ./\nRUN go mod download\n\nCOPY . ./\n\nRUN go build -o /app/mochi ./cmd\n\n\nFROM alpine\n\nWORKDIR /\nCOPY --from=builder /app/mochi .\n\n# tcp\nEXPOSE 1883\n\n# websockets\nEXPOSE 1882\n\n# dashboard\nEXPOSE 8080\n\nENTRYPOINT [ \"/mochi\" ]\n"},"repairedBuild":{"startTimestamp":1672774396411,"endTimestamp":1672774426149,"error":null,"stdout":"Sending build context to Docker daemon  14.21MB\r\r\nStep 1/16 : FROM golang:1.19.0-alpine3.15 AS builder\n ---> 4482951646ac\nStep 2/16 : RUN apk update\n ---> Running in f6289819e73b\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/community/x86_64/APKINDEX.tar.gz\nv3.15.6-237-g9ae8855cb5 [https://dl-cdn.alpinelinux.org/alpine/v3.15/main]\nv3.15.6-237-g9ae8855cb5 [https://dl-cdn.alpinelinux.org/alpine/v3.15/community]\nOK: 15859 distinct packages available\nRemoving intermediate container f6289819e73b\n ---> 1ecc15a7f69a\nStep 3/16 : RUN apk add --no-cache git\n ---> Running in 6feb39a96fc1\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/community/x86_64/APKINDEX.tar.gz\n(1/6) Installing brotli-libs (1.0.9-r5)\n(2/6) Installing nghttp2-libs (1.46.0-r0)\n(3/6) Installing libcurl (7.80.0-r5)\n(4/6) Installing expat (2.5.0-r0)\n(5/6) Installing pcre2 (10.40-r0)\n(6/6) Installing git (2.34.5-r0)\nExecuting busybox-1.34.1-r7.trigger\nOK: 19 MiB in 21 packages\nRemoving intermediate container 6feb39a96fc1\n ---> 88c0324ef841\nStep 4/16 : WORKDIR /app\n ---> Running in b7d5b4c9fbe7\nRemoving intermediate container b7d5b4c9fbe7\n ---> b9a2658fa682\nStep 5/16 : COPY go.mod ./\n ---> 0e9ecdabe07c\nStep 6/16 : COPY go.sum ./\n ---> 49f954acef4e\nStep 7/16 : RUN go mod download\n ---> Running in d1c5132d734a\nRemoving intermediate container d1c5132d734a\n ---> 299530b9cb56\nStep 8/16 : COPY . ./\n ---> 14afde6b42ae\nStep 9/16 : RUN go build -o /app/mochi ./cmd\n ---> Running in f2e109cd3436\nRemoving intermediate container f2e109cd3436\n ---> 4d5836ccfafd\nStep 10/16 : FROM alpine\n ---> 49176f190c7e\nStep 11/16 : WORKDIR /\n ---> Running in ce4819064f5b\nRemoving intermediate container ce4819064f5b\n ---> b4fff1f76a72\nStep 12/16 : COPY --from=builder /app/mochi .\n ---> 906a59734e63\nStep 13/16 : EXPOSE 1883\n ---> Running in 90fb1d62a234\nRemoving intermediate container 90fb1d62a234\n ---> 19ad7a476620\nStep 14/16 : EXPOSE 1882\n ---> Running in 5906a88a9e17\nRemoving intermediate container 5906a88a9e17\n ---> 3728357b9a48\nStep 15/16 : EXPOSE 8080\n ---> Running in 039a61a520f7\nRemoving intermediate container 039a61a520f7\n ---> 67a2fe722c5a\nStep 16/16 : ENTRYPOINT [ \"/mochi\" ]\n ---> Running in 5bd8623672d7\nRemoving intermediate container 5bd8623672d7\n ---> 73fba40f3937\nSuccessfully built 73fba40f3937\nSuccessfully tagged mqtt:latest\n","stderr":"","imageSize":15509662},"endTime":1672774426675}