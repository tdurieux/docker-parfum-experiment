{"repository":"https://github.com/allen-garvey/dithermark","dockerfilePath":"Dockerfile","startTime":1672286618292,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/allen-garvey/dithermark'...\n","error":null,"commit":"1a1e6b03ef861b1804ef13d73711e44fb02ad53d"},"originalBuild":{"startTimestamp":1672286619664,"endTimestamp":1672286798210,"error":null,"stdout":"Sending build context to Docker daemon  1.075MB\r\r\nStep 1/12 : FROM alpine:3.15\n3.15: Pulling from library/alpine\n9621f1afde84: Already exists\nDigest: sha256:cf34c62ee8eb3fe8aa24c1fab45d7e9d12768d945c3f5a6fd6a63d901e898479\nStatus: Downloaded newer image for alpine:3.15\n ---> c4fc93816858\nStep 2/12 : RUN apk update && apk add     make     nodejs     npm     php7     php7-json     php7-ctype\n ---> Running in 7f7d8592bba3\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/community/x86_64/APKINDEX.tar.gz\nv3.15.6-230-gea65028923 [https://dl-cdn.alpinelinux.org/alpine/v3.15/main]\nv3.15.6-228-g9181cbcdab [https://dl-cdn.alpinelinux.org/alpine/v3.15/community]\nOK: 15859 distinct packages available\n(1/20) Installing make (4.3-r0)\n(2/20) Installing ca-certificates (20220614-r0)\n(3/20) Installing nghttp2-libs (1.46.0-r0)\n(4/20) Installing brotli-libs (1.0.9-r5)\n(5/20) Installing c-ares (1.18.1-r0)\n(6/20) Installing libgcc (10.3.1_git20211027-r0)\n(7/20) Installing libstdc++ (10.3.1_git20211027-r0)\n(8/20) Installing nodejs (16.17.1-r0)\n(9/20) Installing npm (8.1.3-r0)\n(10/20) Installing php7-common (7.4.33-r0)\n(11/20) Installing argon2-libs (20190702-r1)\n(12/20) Installing ncurses-terminfo-base (6.3_p20211120-r1)\n(13/20) Installing ncurses-libs (6.3_p20211120-r1)\n(14/20) Installing libedit (20210910.3.1-r0)\n(15/20) Installing pcre2 (10.40-r0)\n(16/20) Installing xz-libs (5.2.5-r1)\n(17/20) Installing libxml2 (2.9.14-r2)\n(18/20) Installing php7 (7.4.33-r0)\n(19/20) Installing php7-ctype (7.4.33-r0)\n(20/20) Installing php7-json (7.4.33-r0)\nExecuting busybox-1.34.1-r7.trigger\nExecuting ca-certificates-20220614-r0.trigger\nOK: 70 MiB in 34 packages\nRemoving intermediate container 7f7d8592bba3\n ---> 3229b20a20b8\nStep 3/12 : RUN mkdir -p /home/dithermark\n ---> Running in aaf7f5010eb8\nRemoving intermediate container aaf7f5010eb8\n ---> d490202f0cdf\nStep 4/12 : WORKDIR /home/dithermark\n ---> Running in 29698074ff99\nRemoving intermediate container 29698074ff99\n ---> c90933bb8af9\nStep 5/12 : ADD package.json .\n ---> 83d075d39dc8\nStep 6/12 : ADD package-lock.json .\n ---> 8aba927dcf54\nStep 7/12 : Run npm install\n ---> Running in 5af3628d2e56\n\u001b[91mnpm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142\n\u001b[0m\u001b[91mnpm WARN deprecated har-validator@5.1.5: this library is no longer supported\n\u001b[0m\nadded 692 packages, and audited 693 packages in 24s\n\n68 packages are looking for funding\n  run `npm fund` for details\n\n5 vulnerabilities (3 moderate, 1 high, 1 critical)\n\nTo address issues that do not require attention, run:\n  npm audit fix\n\nTo address all issues (including breaking changes), run:\n  npm audit fix --force\n\nRun `npm audit` for details.\nRemoving intermediate container 5af3628d2e56\n ---> 366da65235d0\nStep 8/12 : ADD . .\n ---> 66b669404125\nStep 9/12 : RUN make setup\n ---> Running in 5b9608f34660\nmkdir -p js_src/generated_output/app\nmkdir -p js_src/generated_output/worker\nRemoving intermediate container 5b9608f34660\n ---> 9a1f5c791db8\nStep 10/12 : RUN make\n ---> Running in 739d40731720\nphp js_generated/app/constants.js.php debug > js_src/generated_output/app/constants.js\nphp js_generated/app/algorithm-model.js.php debug > js_src/generated_output/app/algorithm-model.js\nphp js_generated/app/color-quantization-modes.js.php debug > js_src/generated_output/app/color-quantization-modes.js\nphp js_generated/worker/algorithm-model.js.php debug > js_src/generated_output/worker/algorithm-model.js\nphp js_generated/worker/color-quantization-modes.js.php debug > js_src/generated_output/worker/color-quantization-modes.js\nphp templates/index/index.php debug > public_html/index.html\nnpm run build\n\n> dithermark@1.0.0 build\n> webpack --config build/webpack.config.js\n\nasset bundle.js 1.48 MiB [emitted] (name: main)\nasset js_src_worker_worker-main_js.bundle.js 326 KiB [emitted]\nasset ../assets/style.css 18.1 KiB [emitted] (name: main)\nEntrypoint main 1.49 MiB = ../assets/style.css 18.1 KiB bundle.js 1.48 MiB\nruntime modules 6.87 KiB 27 modules\norphan modules 17.3 KiB [orphan] 4 modules\nmodules by path ./js_src/app/ 424 KiB 223 modules\nmodules by path ./node_modules/ 486 KiB (javascript) 3.79 KiB (css/mini-extract) 43 modules\nmodules by path ./js_src/worker/ 171 KiB 21 modules\nmodules by path ./js_src/shared/*.js 16.7 KiB\n  ./js_src/shared/worker-headers.js 667 bytes [built] [code generated]\n  + 9 modules\nmodules by path ./js_src/generated_output/ 113 KiB\n  modules by path ./js_src/generated_output/app/*.js 46.3 KiB 3 modules\n  modules by path ./js_src/generated_output/worker/*.js 66.2 KiB 2 modules\nmodules by path ./sass/*.scss 39 bytes (javascript) 11.2 KiB (css/mini-extract)\n  ./sass/style.scss 39 bytes [built] [code generated]\n  css ./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./sass/style.scss 11.2 KiB [built] [code generated]\n./js_src/index.js 147 bytes [built] [code generated]\nwebpack 5.74.0 compiled successfully in 1904 ms\nRemoving intermediate container 739d40731720\n ---> d7373012b3d9\nStep 11/12 : EXPOSE 3000\n ---> Running in 65faf5fb32dd\nRemoving intermediate container 65faf5fb32dd\n ---> c4f86930330d\nStep 12/12 : CMD [\"php\", \"-S\", \"0.0.0.0:3000\", \"-t\", \"public_html\"]\n ---> Running in ec767def2f76\nRemoving intermediate container ec767def2f76\n ---> 75fd1cb2b27e\nSuccessfully built 75fd1cb2b27e\nSuccessfully tagged dithermark:latest\n","stderr":"","imageSize":506126999},"repair":{"violations":[{"name":"npmCacheCleanAfterInstall","position":{"start":18,"end":18,"columnStart":4,"columnEnd":15}},{"name":"apkAddUseNoCache","position":{"start":3,"end":9,"columnStart":18,"columnEnd":14}}],"repairedDockerfile":"FROM alpine:3.15\n\n# install needed packages\nRUN apk update && apk add --no-cache \\\n    make \\\n    nodejs \\\n    npm \\\n    php7 \\\n    php7-json \\\n    php7-ctype\n\n# setup project directories\nRUN mkdir -p /home/dithermark\nWORKDIR /home/dithermark\n\n# install npm dependencies\nADD package.json .\nADD package-lock.json .\nRun npm install\n\n# install project\nADD . .\nRUN make setup\nRUN make\n\n# expose server port\nEXPOSE 3000\n\nCMD [\"php\", \"-S\", \"0.0.0.0:3000\", \"-t\", \"public_html\"]\n"},"repairedBuild":{"startTimestamp":1672286800974,"endTimestamp":1672286935558,"error":null,"stdout":"Sending build context to Docker daemon  1.075MB\r\r\nStep 1/12 : FROM alpine:3.15\n ---> c4fc93816858\nStep 2/12 : RUN apk update && apk add --no-cache     make     nodejs     npm     php7     php7-json     php7-ctype\n ---> Running in 9d964666fb32\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/community/x86_64/APKINDEX.tar.gz\nv3.15.6-230-gea65028923 [https://dl-cdn.alpinelinux.org/alpine/v3.15/main]\nv3.15.6-228-g9181cbcdab [https://dl-cdn.alpinelinux.org/alpine/v3.15/community]\nOK: 15859 distinct packages available\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/community/x86_64/APKINDEX.tar.gz\n(1/20) Installing make (4.3-r0)\n(2/20) Installing ca-certificates (20220614-r0)\n(3/20) Installing nghttp2-libs (1.46.0-r0)\n(4/20) Installing brotli-libs (1.0.9-r5)\n(5/20) Installing c-ares (1.18.1-r0)\n(6/20) Installing libgcc (10.3.1_git20211027-r0)\n(7/20) Installing libstdc++ (10.3.1_git20211027-r0)\n(8/20) Installing nodejs (16.17.1-r0)\n(9/20) Installing npm (8.1.3-r0)\n(10/20) Installing php7-common (7.4.33-r0)\n(11/20) Installing argon2-libs (20190702-r1)\n(12/20) Installing ncurses-terminfo-base (6.3_p20211120-r1)\n(13/20) Installing ncurses-libs (6.3_p20211120-r1)\n(14/20) Installing libedit (20210910.3.1-r0)\n(15/20) Installing pcre2 (10.40-r0)\n(16/20) Installing xz-libs (5.2.5-r1)\n(17/20) Installing libxml2 (2.9.14-r2)\n(18/20) Installing php7 (7.4.33-r0)\n(19/20) Installing php7-ctype (7.4.33-r0)\n(20/20) Installing php7-json (7.4.33-r0)\nExecuting busybox-1.34.1-r7.trigger\nExecuting ca-certificates-20220614-r0.trigger\nOK: 70 MiB in 34 packages\nRemoving intermediate container 9d964666fb32\n ---> 571ce3e0e621\nStep 3/12 : RUN mkdir -p /home/dithermark\n ---> Running in d597d2e95a13\nRemoving intermediate container d597d2e95a13\n ---> c15f8c1a4528\nStep 4/12 : WORKDIR /home/dithermark\n ---> Running in 2bbb651a5643\nRemoving intermediate container 2bbb651a5643\n ---> 58594790e0eb\nStep 5/12 : ADD package.json .\n ---> 781274b2a456\nStep 6/12 : ADD package-lock.json .\n ---> 0761a9244d0f\nStep 7/12 : Run npm install\n ---> Running in 6176fc1a77fa\n\u001b[91mnpm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142\n\u001b[0m\u001b[91mnpm WARN deprecated har-validator@5.1.5: this library is no longer supported\n\u001b[0m\nadded 692 packages, and audited 693 packages in 23s\n\n68 packages are looking for funding\n  run `npm fund` for details\n\n5 vulnerabilities (3 moderate, 1 high, 1 critical)\n\nTo address issues that do not require attention, run:\n  npm audit fix\n\nTo address all issues (including breaking changes), run:\n  npm audit fix --force\n\nRun `npm audit` for details.\nRemoving intermediate container 6176fc1a77fa\n ---> b91da8def49d\nStep 8/12 : ADD . .\n ---> fe8d4720410a\nStep 9/12 : RUN make setup\n ---> Running in 80257997ed96\nmkdir -p js_src/generated_output/app\nmkdir -p js_src/generated_output/worker\nRemoving intermediate container 80257997ed96\n ---> 5607e027a07a\nStep 10/12 : RUN make\n ---> Running in 9853d5b34aad\nphp js_generated/app/constants.js.php debug > js_src/generated_output/app/constants.js\nphp js_generated/app/algorithm-model.js.php debug > js_src/generated_output/app/algorithm-model.js\nphp js_generated/app/color-quantization-modes.js.php debug > js_src/generated_output/app/color-quantization-modes.js\nphp js_generated/worker/algorithm-model.js.php debug > js_src/generated_output/worker/algorithm-model.js\nphp js_generated/worker/color-quantization-modes.js.php debug > js_src/generated_output/worker/color-quantization-modes.js\nphp templates/index/index.php debug > public_html/index.html\nnpm run build\n\n> dithermark@1.0.0 build\n> webpack --config build/webpack.config.js\n\nasset bundle.js 1.48 MiB [emitted] (name: main)\nasset js_src_worker_worker-main_js.bundle.js 326 KiB [emitted]\nasset ../assets/style.css 18.1 KiB [emitted] (name: main)\nEntrypoint main 1.49 MiB = ../assets/style.css 18.1 KiB bundle.js 1.48 MiB\nruntime modules 6.87 KiB 27 modules\norphan modules 17.3 KiB [orphan] 4 modules\nmodules by path ./js_src/app/ 424 KiB 223 modules\nmodules by path ./node_modules/ 486 KiB (javascript) 3.79 KiB (css/mini-extract) 43 modules\nmodules by path ./js_src/worker/ 171 KiB 21 modules\nmodules by path ./js_src/shared/*.js 16.7 KiB\n  ./js_src/shared/worker-headers.js 667 bytes [built] [code generated]\n  + 9 modules\nmodules by path ./js_src/generated_output/ 113 KiB\n  modules by path ./js_src/generated_output/app/*.js 46.3 KiB 3 modules\n  modules by path ./js_src/generated_output/worker/*.js 66.2 KiB 2 modules\nmodules by path ./sass/*.scss 39 bytes (javascript) 11.2 KiB (css/mini-extract)\n  ./sass/style.scss 39 bytes [built] [code generated]\n  css ./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./sass/style.scss 11.2 KiB [built] [code generated]\n./js_src/index.js 147 bytes [built] [code generated]\nwebpack 5.74.0 compiled successfully in 2033 ms\nRemoving intermediate container 9853d5b34aad\n ---> f35867741991\nStep 11/12 : EXPOSE 3000\n ---> Running in 04ca5ef9ec00\nRemoving intermediate container 04ca5ef9ec00\n ---> a9a4fe19504d\nStep 12/12 : CMD [\"php\", \"-S\", \"0.0.0.0:3000\", \"-t\", \"public_html\"]\n ---> Running in bf55c03362de\nRemoving intermediate container bf55c03362de\n ---> 282cf4301aaa\nSuccessfully built 282cf4301aaa\nSuccessfully tagged dithermark:latest\n","stderr":"","imageSize":506127009},"endTime":1672286936514}