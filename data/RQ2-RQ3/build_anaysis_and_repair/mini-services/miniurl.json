{"repository":"https://github.com/mini-services/miniurl","dockerfilePath":"Dockerfile","startTime":1672264145962,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/mini-services/miniurl'...\n","error":null,"commit":"3005dce996598d2669a08d2afd330e267a7cec7b"},"originalBuild":{"startTimestamp":1672264146900,"endTimestamp":1672264338390,"error":null,"stdout":"Sending build context to Docker daemon  631.3kB\r\r\nStep 1/12 : FROM node:latest AS build\n ---> 548714e444f4\nStep 2/12 : WORKDIR /usr/src/app\n ---> Running in c697b5c4261d\nRemoving intermediate container c697b5c4261d\n ---> c5839f4c225d\nStep 3/12 : COPY package*.json /usr/src/app/\n ---> 514eeceb0405\nStep 4/12 : RUN npm ci --only=production\n ---> Running in 830a79ed2726\n\u001b[91mnpm\u001b[0m\u001b[91m WARN config only Use `--omit=dev` to omit dev dependencies from the install.\n\u001b[0m\u001b[91mnpm \u001b[0m\u001b[91mWARN old lockfile\u001b[0m\u001b[91m \nnpm\u001b[0m\u001b[91m WARN\u001b[0m\u001b[91m old lockfile The package-lock.json file was created with an old version of npm,\nnpm\u001b[0m\u001b[91m WARN old lockfile\u001b[0m\u001b[91m so supplemental metadata must be fetched from the registry.\nnpm WARN old lockfile\u001b[0m\u001b[91m \nnpm\u001b[0m\u001b[91m \u001b[0m\u001b[91mWARN\u001b[0m\u001b[91m \u001b[0m\u001b[91mold lockfile This is a one-time fix-up, please be patient...\nnpm\u001b[0m\u001b[91m \u001b[0m\u001b[91mWARN \u001b[0m\u001b[91mold lockfile\u001b[0m\u001b[91m \n\u001b[0m\u001b[91mnpm WARN deprecated urix@0.1.0: Please see https://github.com/lydell/urix#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated source-map-url@0.4.1: See https://github.com/lydell/source-map-url#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated source-map-resolve@0.5.3: See https://github.com/lydell/source-map-resolve#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated uuid@3.4.0: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.\n\u001b[0m\u001b[91mnpm WARN deprecated resolve-url@0.2.1: https://github.com/lydell/resolve-url#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated har-validator@5.1.5: this library is no longer supported\n\u001b[0m\u001b[91mnpm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142\n\u001b[0m\u001b[91mnpm WARN deprecated fastify-warning@0.2.0: This module renamed to process-warning\n\u001b[0m\u001b[91mnpm WARN deprecated node-pre-gyp@0.11.0: Please upgrade to @mapbox/node-pre-gyp: the non-scoped node-pre-gyp package is deprecated and only the @mapbox scoped package will recieve updates in the future\n\u001b[0m\u001b[91mnpm WARN deprecated tar@2.2.2: This version of tar is no longer supported, and will not receive security updates. Please upgrade asap.\n\u001b[0m\nadded 396 packages, and audited 397 packages in 13s\n\n9 packages are looking for funding\n  run `npm fund` for details\n\n13 vulnerabilities (1 low, 2 moderate, 7 high, 3 critical)\n\nTo address issues that do not require attention, run:\n  npm audit fix\n\nSome issues need review, and may require choosing\na different dependency.\n\nRun `npm audit` for details.\nRemoving intermediate container 830a79ed2726\n ---> 346fbdd9b9ad\nStep 5/12 : FROM node:lts-alpine@sha256:e48a99d69f430761d99682ffcb17b06a513cdc65d7130cc02ce0f6a1ef492357\ndocker.io/library/node:lts-alpine@sha256:e48a99d69f430761d99682ffcb17b06a513cdc65d7130cc02ce0f6a1ef492357: Pulling from library/node\n9b794450f7b6: Pulling fs layer\ndf6cbe683bc8: Pulling fs layer\n3d69e99616ec: Pulling fs layer\n6fbc7f24b1ec: Pulling fs layer\n6fbc7f24b1ec: Waiting\n9b794450f7b6: Verifying Checksum\n9b794450f7b6: Download complete\n9b794450f7b6: Pull complete\ndf6cbe683bc8: Verifying Checksum\ndf6cbe683bc8: Download complete\n6fbc7f24b1ec: Download complete\n3d69e99616ec: Download complete\ndf6cbe683bc8: Pull complete\n3d69e99616ec: Pull complete\n6fbc7f24b1ec: Pull complete\nDigest: sha256:e48a99d69f430761d99682ffcb17b06a513cdc65d7130cc02ce0f6a1ef492357\nStatus: Downloaded newer image for node:lts-alpine@sha256:e48a99d69f430761d99682ffcb17b06a513cdc65d7130cc02ce0f6a1ef492357\n ---> 645c08831ecc\nStep 6/12 : RUN apk add dumb-init\n ---> Running in 7813073b7fd7\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.11/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.11/community/x86_64/APKINDEX.tar.gz\n(1/1) Installing dumb-init (1.2.2-r1)\nExecuting busybox-1.31.1-r10.trigger\nOK: 7 MiB in 17 packages\nRemoving intermediate container 7813073b7fd7\n ---> cbcbd0e0a265\nStep 7/12 : ENV NODE_ENV production\n ---> Running in 0fb1d4a7bc9c\nRemoving intermediate container 0fb1d4a7bc9c\n ---> 04e7ca41110f\nStep 8/12 : USER node\n ---> Running in fb1a8cc97e24\nRemoving intermediate container fb1a8cc97e24\n ---> 4eea06c2f41d\nStep 9/12 : WORKDIR /usr/src/app\n ---> Running in d26cc88a1bb9\nRemoving intermediate container d26cc88a1bb9\n ---> 9e31caf98a73\nStep 10/12 : COPY --chown=node:node --from=build /usr/src/app/node_modules /usr/src/app/node_modules\n ---> a88d9b46c920\nStep 11/12 : COPY --chown=node:node . /usr/src/app\n ---> 0c4d5d6869a7\nStep 12/12 : CMD [\"dumb-init\", \"npm\", \"start\"]\n ---> Running in f5f535813e51\nRemoving intermediate container f5f535813e51\n ---> ec8b14edc631\nSuccessfully built ec8b14edc631\nSuccessfully tagged miniurl:latest\n","stderr":"","imageSize":204915889},"repair":{"violations":[{"name":"apkAddUseNoCache","position":{"start":8,"end":8,"columnStart":4,"columnEnd":21}}],"repairedDockerfile":"# ========== Build ==========\nFROM node:latest AS build\nWORKDIR /usr/src/app\nCOPY package*.json /usr/src/app/\nRUN npm ci --only=production\n\n# ========== Production ==========\nFROM node:lts-alpine@sha256:e48a99d69f430761d99682ffcb17b06a513cdc65d7130cc02ce0f6a1ef492357\nRUN apk add --no-cache dumb-init\nENV NODE_ENV production\nUSER node\nWORKDIR /usr/src/app\nCOPY --chown=node:node --from=build /usr/src/app/node_modules /usr/src/app/node_modules\nCOPY --chown=node:node . /usr/src/app\nCMD [\"dumb-init\", \"npm\", \"start\"]"},"repairedBuild":{"startTimestamp":1672264339104,"endTimestamp":1672264390939,"error":null,"stdout":"Sending build context to Docker daemon  631.8kB\r\r\nStep 1/12 : FROM node:latest AS build\n ---> 548714e444f4\nStep 2/12 : WORKDIR /usr/src/app\n ---> Running in 17f375aab6b8\nRemoving intermediate container 17f375aab6b8\n ---> acffc46b173e\nStep 3/12 : COPY package*.json /usr/src/app/\n ---> 4f7655dbb54f\nStep 4/12 : RUN npm ci --only=production\n ---> Running in a1b085c953a9\n\u001b[91mnpm\u001b[0m\u001b[91m WARN config only Use `--omit=dev` to omit dev dependencies from the install.\n\u001b[0m\u001b[91mnpm\u001b[0m\u001b[91m WARN old lockfile\u001b[0m\u001b[91m \nnpm\u001b[0m\u001b[91m WARN \u001b[0m\u001b[91mold lockfile The package-lock.json file was created with an old version of npm,\nnpm WARN old lockfile\u001b[0m\u001b[91m so supplemental metadata must be fetched from the registry.\nnpm WARN old lockfile \nnpm \u001b[0m\u001b[91mWARN old lockfile This is a one-time fix-up, please be patient...\nnpm WARN\u001b[0m\u001b[91m old lockfile \n\u001b[0m\u001b[91mnpm WARN deprecated urix@0.1.0: Please see https://github.com/lydell/urix#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated source-map-url@0.4.1: See https://github.com/lydell/source-map-url#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated source-map-resolve@0.5.3: See https://github.com/lydell/source-map-resolve#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated resolve-url@0.2.1: https://github.com/lydell/resolve-url#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated uuid@3.4.0: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.\n\u001b[0m\u001b[91mnpm WARN deprecated har-validator@5.1.5: this library is no longer supported\n\u001b[0m\u001b[91mnpm WARN deprecated fastify-warning@0.2.0: This module renamed to process-warning\n\u001b[0m\u001b[91mnpm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142\n\u001b[0m\u001b[91mnpm WARN deprecated node-pre-gyp@0.11.0: Please upgrade to @mapbox/node-pre-gyp: the non-scoped node-pre-gyp package is deprecated and only the @mapbox scoped package will recieve updates in the future\n\u001b[0m\u001b[91mnpm WARN deprecated tar@2.2.2: This version of tar is no longer supported, and will not receive security updates. Please upgrade asap.\n\u001b[0m\nadded 396 packages, and audited 397 packages in 12s\n\n9 packages are looking for funding\n  run `npm fund` for details\n\n13 vulnerabilities (1 low, 2 moderate, 7 high, 3 critical)\n\nTo address issues that do not require attention, run:\n  npm audit fix\n\nSome issues need review, and may require choosing\na different dependency.\n\nRun `npm audit` for details.\nRemoving intermediate container a1b085c953a9\n ---> d1279a82b5d1\nStep 5/12 : FROM node:lts-alpine@sha256:e48a99d69f430761d99682ffcb17b06a513cdc65d7130cc02ce0f6a1ef492357\n ---> 645c08831ecc\nStep 6/12 : RUN apk add --no-cache dumb-init\n ---> Running in d3be49934004\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.11/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.11/community/x86_64/APKINDEX.tar.gz\n(1/1) Installing dumb-init (1.2.2-r1)\nExecuting busybox-1.31.1-r10.trigger\nOK: 7 MiB in 17 packages\nRemoving intermediate container d3be49934004\n ---> 99b113e8c24f\nStep 7/12 : ENV NODE_ENV production\n ---> Running in 5c91da5d674b\nRemoving intermediate container 5c91da5d674b\n ---> ed43e954e495\nStep 8/12 : USER node\n ---> Running in 44ba64727b69\nRemoving intermediate container 44ba64727b69\n ---> 04e8bb581df1\nStep 9/12 : WORKDIR /usr/src/app\n ---> Running in 61597a94f237\nRemoving intermediate container 61597a94f237\n ---> 782cf2db1932\nStep 10/12 : COPY --chown=node:node --from=build /usr/src/app/node_modules /usr/src/app/node_modules\n ---> 49188e53467f\nStep 11/12 : COPY --chown=node:node . /usr/src/app\n ---> 27bbed8c457d\nStep 12/12 : CMD [\"dumb-init\", \"npm\", \"start\"]\n ---> Running in ff6d9c07b892\nRemoving intermediate container ff6d9c07b892\n ---> b4143e21f446\nSuccessfully built b4143e21f446\nSuccessfully tagged miniurl:latest\n","stderr":"","imageSize":203335479},"endTime":1672264391295}