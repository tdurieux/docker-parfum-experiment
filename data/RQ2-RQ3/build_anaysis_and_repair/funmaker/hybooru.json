{"repository":"https://github.com/funmaker/hybooru","dockerfilePath":"Dockerfile","startTime":1672002444543,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/funmaker/hybooru'...\n","error":null,"commit":"9c5a895db6cdc7a8a6e1ae2cffc6c8f44cb3605b"},"originalBuild":{"startTimestamp":1672002445648,"endTimestamp":1672002625102,"error":null,"stdout":"Sending build context to Docker daemon  1.118MB\r\r\nStep 1/11 : FROM node:16.1.0-alpine AS builder\n16.1.0-alpine: Pulling from library/node\n540db60ca938: Pulling fs layer\n2b54d6979bcc: Pulling fs layer\n72b89a422da5: Pulling fs layer\n2aa15c209059: Pulling fs layer\n72b89a422da5: Waiting\n540db60ca938: Waiting\n540db60ca938: Verifying Checksum\n540db60ca938: Download complete\n540db60ca938: Pull complete\n72b89a422da5: Verifying Checksum\n72b89a422da5: Download complete\n2b54d6979bcc: Verifying Checksum\n2b54d6979bcc: Download complete\n2aa15c209059: Verifying Checksum\n2aa15c209059: Download complete\n2b54d6979bcc: Pull complete\n72b89a422da5: Pull complete\n2aa15c209059: Pull complete\nDigest: sha256:8704247878fe10eddfcb5c26540112b15e50d21ce8e5c7a7f6caf5cf857de219\nStatus: Downloaded newer image for node:16.1.0-alpine\n ---> 50389f7769d0\nStep 2/11 : WORKDIR /build\n ---> Running in 3ee93f850692\nRemoving intermediate container 3ee93f850692\n ---> 67ea2ec092c2\nStep 3/11 : COPY . .\n ---> 16e3309569b3\nStep 4/11 : RUN apk add --update --no-cache python3 make g++ &&     rm -rf /var/cache/apk/*\n ---> Running in 5473cce2d905\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.13/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.13/community/x86_64/APKINDEX.tar.gz\n(1/24) Upgrading musl (1.2.2-r0 -> 1.2.2-r1)\n(2/24) Installing binutils (2.35.2-r1)\n(3/24) Installing libgomp (10.2.1_pre1-r3)\n(4/24) Installing libatomic (10.2.1_pre1-r3)\n(5/24) Installing libgphobos (10.2.1_pre1-r3)\n(6/24) Installing gmp (6.2.1-r1)\n(7/24) Installing isl22 (0.22-r0)\n(8/24) Installing mpfr4 (4.1.0-r0)\n(9/24) Installing mpc1 (1.2.0-r0)\n(10/24) Installing gcc (10.2.1_pre1-r3)\n(11/24) Installing musl-dev (1.2.2-r1)\n(12/24) Installing libc-dev (0.7.2-r3)\n(13/24) Installing g++ (10.2.1_pre1-r3)\n(14/24) Installing make (4.3-r0)\n(15/24) Installing libbz2 (1.0.8-r1)\n(16/24) Installing expat (2.2.10-r8)\n(17/24) Installing libffi (3.3-r2)\n(18/24) Installing gdbm (1.19-r0)\n(19/24) Installing xz-libs (5.2.5-r1)\n(20/24) Installing ncurses-terminfo-base (6.2_p20210109-r1)\n(21/24) Installing ncurses-libs (6.2_p20210109-r1)\n(22/24) Installing readline (8.1.0-r0)\n(23/24) Installing sqlite-libs (3.34.1-r0)\n(24/24) Installing python3 (3.8.15-r0)\nExecuting busybox-1.32.1-r6.trigger\nOK: 236 MiB in 39 packages\nRemoving intermediate container 5473cce2d905\n ---> e2ee2c5d8bde\nStep 5/11 : RUN npm install &&     npm run build:prod &&     mv dist /app &&     npm prune --production &&     mv node_modules /app\n ---> Running in a794f65c0d47\n\u001b[91mnpm WARN EBADENGINE Unsupported engine {\nnpm WARN EBADENGINE   package: '@jest/schemas@29.0.0',\nnpm WARN EBADENGINE\u001b[0m\u001b[91m   required: { node: '^14.15.0 || ^16.10.0 || >=18.0.0' },\nnpm WARN\u001b[0m\u001b[91m EBADENGINE   current: { node: 'v16.1.0', npm: '7.11.2' }\nnpm WARN EBADENGINE }\n\u001b[0m\u001b[91mnpm WARN\u001b[0m\u001b[91m EBADENGINE Unsupported engine {\n\u001b[0m\u001b[91mnpm WARN \u001b[0m\u001b[91mEBADENGINE   package: '@jest/types@29.3.1',\n\u001b[0m\u001b[91mnpm \u001b[0m\u001b[91mWARN EBADENGINE   required: { node: '^14.15.0 || ^16.10.0 || >=18.0.0' },\n\u001b[0m\u001b[91mnpm WARN \u001b[0m\u001b[91mEBADENGINE   current: { node: 'v16.1.0', npm: '7.11.2' }\nnpm \u001b[0m\u001b[91mWARN EBADENGINE }\n\u001b[0m\u001b[91mnpm WARN \u001b[0m\u001b[91mEBADENGINE Unsupported engine {\nnpm WARN\u001b[0m\u001b[91m EBADENGINE\u001b[0m\u001b[91m   package: 'jest-util@29.3.1',\nnpm \u001b[0m\u001b[91mWARN EBADENGINE\u001b[0m\u001b[91m   required: { node: '^14.15.0 || ^16.10.0 || >=18.0.0' },\nnpm\u001b[0m\u001b[91m WARN\u001b[0m\u001b[91m EBADENGINE\u001b[0m\u001b[91m   current: { node: 'v16.1.0', npm: '7.11.2' }\nnpm\u001b[0m\u001b[91m WARN\u001b[0m\u001b[91m EBADENGINE\u001b[0m\u001b[91m }\n\u001b[0m\u001b[91mnpm WARN \u001b[0m\u001b[91mEBADENGINE Unsupported engine {\n\u001b[0m\u001b[91mnpm\u001b[0m\u001b[91m \u001b[0m\u001b[91mWARN EBADENGINE\u001b[0m\u001b[91m   package: 'jest-worker@29.3.1',\nnpm \u001b[0m\u001b[91mWARN EBADENGINE\u001b[0m\u001b[91m   required: { node: '^14.15.0 || ^16.10.0 || >=18.0.0' },\n\u001b[0m\u001b[91mnpm \u001b[0m\u001b[91mWARN\u001b[0m\u001b[91m \u001b[0m\u001b[91mEBADENGINE\u001b[0m\u001b[91m   current: { node: 'v16.1.0', npm: '7.11.2' }\n\u001b[0m\u001b[91mnpm \u001b[0m\u001b[91mWARN\u001b[0m\u001b[91m \u001b[0m\u001b[91mEBADENGINE\u001b[0m\u001b[91m }\n\u001b[0m\u001b[91mnpm WARN \u001b[0m\u001b[91mdeprecated stable@0.1.8: Modern JS already guarantees Array#sort() is a stable sort, so this library is deprecated. See the compatibility table on MDN: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/sort#browser_compatibility\n\u001b[0m\nadded 886 packages, and audited 887 packages in 2m\n\n126 packages are looking for funding\n  run `npm fund` for details\n\nfound 0 vulnerabilities\n\u001b[91mnpm notice\u001b[0m\u001b[91m \nnpm \u001b[0m\u001b[91mnotice New major version of npm available! 7.11.2 -> 9.2.0\n\u001b[0m\u001b[91mnpm\u001b[0m\u001b[91m notice\u001b[0m\u001b[91m Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\n\u001b[0m\u001b[91mnpm \u001b[0m\u001b[91mnotice\u001b[0m\u001b[91m Run `npm install -g npm@9.2.0` to update!\nnpm notice\u001b[0m\u001b[91m \n\u001b[0m\n> hybooru@1.7.0 build:prod\n> mkdir -p dist && npm-run-all build:prod-*\n\n\n> hybooru@1.7.0 build:prod-server\n> webpack --config webpack/server.babel.js\n\nasset server.js 166 KiB [emitted] [minimized] (name: main) 1 related asset\nruntime modules 793 bytes 4 modules\ncacheable modules 372 KiB\n  modules by path ./client/ 111 KiB 47 modules\n  modules by path ./server/ 129 KiB 30 modules\n  modules by path ./node_modules/handlebars/ 127 KiB\n    modules by path ./node_modules/handlebars/dist/cjs/handlebars/ 122 KiB 20 modules\n    ./node_modules/handlebars/runtime.js 167 bytes [built] [code generated]\n    ./node_modules/handlebars/dist/cjs/handlebars.runtime.js 4.5 KiB [built] [code generated]\n  ./server.ts 1.49 KiB [built] [code generated]\n  ./package.json 3.28 KiB [built] [code generated]\n+ 29 modules\nwebpack 5.75.0 compiled successfully in 13802 ms\n\n> hybooru@1.7.0 build:prod-client\n> webpack --config webpack/client.babel.js\n\nasset client.js 497 KiB [emitted] [minimized] [big] (name: main) 1 related asset\nasset style.css 20.6 KiB [emitted] [minimized] (name: main)\nEntrypoint main [big] 517 KiB = style.css 20.6 KiB client.js 497 KiB\n642 modules\n\nWARNING in asset size limit: The following asset(s) exceed the recommended size limit (244 KiB).\nThis can impact web performance.\nAssets: \n  client.js (497 KiB)\n\nWARNING in entrypoint size limit: The following entrypoint(s) combined asset size exceeds the recommended limit (244 KiB). This can impact web performance.\nEntrypoints:\n  main (517 KiB)\n      style.css\n      client.js\n\nWARNING in webpack performance recommendations: \nYou can limit the size of your bundles by using import() or require.ensure to lazy load some parts of your application.\nFor more info visit https://webpack.js.org/guides/code-splitting/\n\nwebpack 5.75.0 compiled with 3 warnings in 22499 ms\n\n> hybooru@1.7.0 build:prod-static\n> cp -rL static dist/\n\n\n> hybooru@1.7.0 build:prod-package\n> babel-node webpack/package.babel.js\n\n\u001b[91mnpm\u001b[0m\u001b[91m notice\u001b[0m\u001b[91m \n\u001b[0m\u001b[91mnpm\u001b[0m\u001b[91m \u001b[0m\u001b[91mnotice\u001b[0m\u001b[91m New major version of npm available! 7.11.2 -> 9.2.0\n\u001b[0m\u001b[91mnpm\u001b[0m\u001b[91m \u001b[0m\u001b[91mnotice\u001b[0m\u001b[91m Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\n\u001b[0m\u001b[91mnpm \u001b[0m\u001b[91mnotice\u001b[0m\u001b[91m Run `npm install -g npm@9.2.0` to update!\n\u001b[0m\u001b[91mnpm\u001b[0m\u001b[91m \u001b[0m\u001b[91mnotice\u001b[0m\u001b[91m \n\u001b[0m\u001b[91mnpm\u001b[0m\u001b[91m WARN EBADENGINE Unsupported engine {\n\u001b[0m\u001b[91mnpm \u001b[0m\u001b[91mWARN\u001b[0m\u001b[91m EBADENGINE\u001b[0m\u001b[91m   package: '@jest/schemas@29.0.0',\nnpm WARN\u001b[0m\u001b[91m \u001b[0m\u001b[91mEBADENGINE   required: { node: '^14.15.0 || ^16.10.0 || >=18.0.0' },\nnpm WARN\u001b[0m\u001b[91m EBADENGINE   current: { node: 'v16.1.0', npm: '7.11.2' }\nnpm\u001b[0m\u001b[91m WARN \u001b[0m\u001b[91mEBADENGINE\u001b[0m\u001b[91m }\n\u001b[0m\u001b[91mnpm WARN EBADENGINE\u001b[0m\u001b[91m Unsupported engine {\nnpm WARN EBADENGINE   package: '@jest/types@29.3.1',\nnpm WARN\u001b[0m\u001b[91m EBADENGINE   required: { node: '^14.15.0 || ^16.10.0 || >=18.0.0' },\nnpm WARN EBADENGINE   current: { node: 'v16.1.0', npm: '7.11.2' }\n\u001b[0m\u001b[91mnpm WARN \u001b[0m\u001b[91mEBADENGINE }\n\u001b[0m\u001b[91mnpm WARN EBADENGINE Unsupported engine {\nnpm WARN EBADENGINE   package: 'jest-util@29.3.1',\nnpm\u001b[0m\u001b[91m WARN EBADENGINE   required: { node: '^14.15.0 || ^16.10.0 || >=18.0.0' },\nnpm WARN\u001b[0m\u001b[91m EBADENGINE   current: { node: 'v16.1.0', npm: '7.11.2' }\nnpm WARN\u001b[0m\u001b[91m EBADENGINE }\n\u001b[0m\u001b[91mnpm WARN EBADENGINE Unsupported engine {\nnpm \u001b[0m\u001b[91mWARN EBADENGINE   package: 'jest-worker@29.3.1',\nnpm\u001b[0m\u001b[91m WARN EBADENGINE\u001b[0m\u001b[91m   required: { node: '^14.15.0 || ^16.10.0 || >=18.0.0' },\nnpm WARN \u001b[0m\u001b[91mEBADENGINE   current: { node: 'v16.1.0', npm: '7.11.2' }\n\u001b[0m\u001b[91mnpm WARN EBADENGINE\u001b[0m\u001b[91m }\n\u001b[0m\nup to date, audited 239 packages in 3s\n\n21 packages are looking for funding\n  run `npm fund` for details\n\nfound 0 vulnerabilities\nRemoving intermediate container a794f65c0d47\n ---> c8370cf89e7b\nStep 6/11 : FROM node:16.1.0-alpine\n ---> 50389f7769d0\nStep 7/11 : ENV DOCKERIZED=1\n ---> Running in 465a06a19ae0\nRemoving intermediate container 465a06a19ae0\n ---> 7e696f043ef1\nStep 8/11 : WORKDIR /app\n ---> Running in a361a6f2c770\nRemoving intermediate container a361a6f2c770\n ---> d68024f16577\nStep 9/11 : COPY --from=builder /app .\n ---> ced7580f975b\nStep 10/11 : EXPOSE 80\n ---> Running in b08f77a22ff2\nRemoving intermediate container b08f77a22ff2\n ---> 98eb2d16eb2a\nStep 11/11 : CMD [\"npm\", \"start\"]\n ---> Running in 6ee313fb2f31\nRemoving intermediate container 6ee313fb2f31\n ---> 5d23738853d8\nSuccessfully built 5d23738853d8\nSuccessfully tagged hybooru:latest\n","stderr":"","imageSize":165240886},"repair":{"violations":[],"repairedDockerfile":"FROM node:16.1.0-alpine AS builder\n\nWORKDIR /build\nCOPY . .\n\nRUN apk add --update --no-cache python3 make g++ && \\\n    rm -rf /var/cache/apk/*\n\nRUN npm install && \\\n    npm run build:prod && \\\n    mv dist /app && \\\n    npm prune --production && \\\n    mv node_modules /app\n\n\nFROM node:16.1.0-alpine\n\nENV DOCKERIZED=1\n\nWORKDIR /app\n\nCOPY --from=builder /app .\n\nEXPOSE 80\nCMD [\"npm\", \"start\"]\n"},"endTime":1672002625484}