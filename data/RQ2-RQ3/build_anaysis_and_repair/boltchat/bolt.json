{"repository":"https://github.com/boltchat/bolt","dockerfilePath":"Dockerfile","startTime":1672771283564,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/boltchat/bolt'...\n","error":null,"commit":"a83476d0527b84bd1cc469925d013e92d32a2b32"},"originalBuild":{"startTimestamp":1672771284438,"endTimestamp":1672771489360,"error":null,"stdout":"Sending build context to Docker daemon  368.6kB\r\r\nStep 1/12 : FROM golang:1.15.6-alpine AS build\n1.15.6-alpine: Pulling from library/golang\n596ba82af5aa: Pulling fs layer\n344f2904b0c6: Pulling fs layer\nd3bda26d9fa1: Pulling fs layer\n84af5d5a5e4d: Pulling fs layer\nc5ac07666507: Pulling fs layer\nc5ac07666507: Waiting\n84af5d5a5e4d: Waiting\n596ba82af5aa: Verifying Checksum\n596ba82af5aa: Download complete\nd3bda26d9fa1: Verifying Checksum\nd3bda26d9fa1: Download complete\n344f2904b0c6: Download complete\nc5ac07666507: Verifying Checksum\nc5ac07666507: Download complete\n596ba82af5aa: Pull complete\n344f2904b0c6: Pull complete\n84af5d5a5e4d: Verifying Checksum\n84af5d5a5e4d: Download complete\nd3bda26d9fa1: Pull complete\n84af5d5a5e4d: Pull complete\nc5ac07666507: Pull complete\nDigest: sha256:f467abead5705eaeadc939ad11cfe85c73650349b8663aaf354f7a9d8f437132\nStatus: Downloaded newer image for golang:1.15.6-alpine\n ---> a171d8efdd03\nStep 2/12 : RUN apk add git\n ---> Running in be56f3a80e48\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.13/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.13/community/x86_64/APKINDEX.tar.gz\n(1/6) Installing brotli-libs (1.0.9-r3)\n(2/6) Installing nghttp2-libs (1.42.0-r1)\n(3/6) Installing libcurl (7.79.1-r3)\n(4/6) Installing expat (2.2.10-r8)\n(5/6) Installing pcre2 (10.36-r1)\n(6/6) Installing git (2.30.6-r0)\nExecuting busybox-1.32.1-r0.trigger\nOK: 19 MiB in 21 packages\nRemoving intermediate container be56f3a80e48\n ---> b58111d40eb3\nStep 3/12 : RUN go get github.com/magefile/mage &&   go install github.com/magefile/mage\n ---> Running in 90ee8890b5b7\nRemoving intermediate container 90ee8890b5b7\n ---> 6951791e5d72\nStep 4/12 : WORKDIR /src\n ---> Running in 2e845792694a\nRemoving intermediate container 2e845792694a\n ---> 866649d81745\nStep 5/12 : COPY . .\n ---> ce8732ca7d93\nStep 6/12 : RUN mage build:serverStatic\n ---> Running in a9a168dd1a34\n\u001b[91mgo: downloading github.com/magefile/mage v1.11.0\n\u001b[0m[build -o build/boltchat-server-linux-amd64 -ldflags -s -w cmd/server/server.go]\n\u001b[91mgo: downloading github.com/fatih/color v1.10.0\n\u001b[0m\u001b[91mgo: downloading github.com/mitchellh/mapstructure v1.4.1\n\u001b[0m\u001b[91mgo: downloading golang.org/x/crypto v0.0.0-20201221181555-eec23a3978ad\n\u001b[0m\u001b[91mgo: downloading github.com/mattn/go-colorable v0.1.8\n\u001b[0m\u001b[91mgo: downloading github.com/mattn/go-isatty v0.0.12\n\u001b[0m\u001b[91mgo: downloading golang.org/x/sys v0.0.0-20200223170610-d5e6a3e2c0ae\n\u001b[0mRemoving intermediate container a9a168dd1a34\n ---> 59a163dbd24c\nStep 7/12 : FROM busybox:1.32.1\n1.32.1: Pulling from library/busybox\nf531cdc67389: Pulling fs layer\nf531cdc67389: Verifying Checksum\nf531cdc67389: Download complete\nf531cdc67389: Pull complete\nDigest: sha256:ae39a6f5c07297d7ab64dbd4f82c77c874cc6a94cea29fdec309d0992574b4f7\nStatus: Downloaded newer image for busybox:1.32.1\n ---> 388056c9a683\nStep 8/12 : WORKDIR /app\n ---> Running in 62ba5163eeae\nRemoving intermediate container 62ba5163eeae\n ---> 5d263e7bbf2e\nStep 9/12 : COPY --from=build /src/build/boltchat-server-linux-amd64 ./server\n ---> 658daf5617ba\nStep 10/12 : COPY scripts/entrypoint.sh /entrypoint.sh\n ---> 916eed715630\nStep 11/12 : RUN chmod +x /entrypoint.sh\n ---> Running in ce8041b9d3b4\nRemoving intermediate container ce8041b9d3b4\n ---> a8ced8fbf7e8\nStep 12/12 : ENTRYPOINT [\"/entrypoint.sh\"]\n ---> Running in f2c202123fa2\nRemoving intermediate container f2c202123fa2\n ---> f406bf70e88f\nSuccessfully built f406bf70e88f\nSuccessfully tagged bolt:latest\n","stderr":"","imageSize":4090805},"repair":{"violations":[{"name":"apkAddUseNoCache","position":{"start":4,"end":4,"columnStart":4,"columnEnd":15}}],"repairedDockerfile":"# Build stage\nFROM golang:1.15.6-alpine AS build\n\n## Git is apparently needed for Mage\nRUN apk add --no-cache git\n\nRUN go get github.com/magefile/mage && \\\n  go install github.com/magefile/mage\n\nWORKDIR /src\nCOPY . .\n\n## Compile the static server binary\nRUN mage build:serverStatic\n\n# Deploy stage\nFROM busybox:1.32.1\nWORKDIR /app\nCOPY --from=build /src/build/boltchat-server-linux-amd64 ./server\nCOPY scripts/entrypoint.sh /entrypoint.sh\n\n## Executable permissions\nRUN chmod +x /entrypoint.sh\n\nENTRYPOINT [\"/entrypoint.sh\"]\n"},"repairedBuild":{"startTimestamp":1672771489647,"endTimestamp":1672771537691,"error":null,"stdout":"Sending build context to Docker daemon  368.6kB\r\r\nStep 1/12 : FROM golang:1.15.6-alpine AS build\n ---> a171d8efdd03\nStep 2/12 : RUN apk add --no-cache git\n ---> Running in 80589d8a12c4\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.13/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.13/community/x86_64/APKINDEX.tar.gz\n(1/6) Installing brotli-libs (1.0.9-r3)\n(2/6) Installing nghttp2-libs (1.42.0-r1)\n(3/6) Installing libcurl (7.79.1-r3)\n(4/6) Installing expat (2.2.10-r8)\n(5/6) Installing pcre2 (10.36-r1)\n(6/6) Installing git (2.30.6-r0)\nExecuting busybox-1.32.1-r0.trigger\nOK: 19 MiB in 21 packages\nRemoving intermediate container 80589d8a12c4\n ---> 7adcf5e23d76\nStep 3/12 : RUN go get github.com/magefile/mage &&   go install github.com/magefile/mage\n ---> Running in 2fdacbf6a1b4\nRemoving intermediate container 2fdacbf6a1b4\n ---> f297d8a777d3\nStep 4/12 : WORKDIR /src\n ---> Running in 41e860dda89c\nRemoving intermediate container 41e860dda89c\n ---> 3e3a5fa28217\nStep 5/12 : COPY . .\n ---> 562b7dd68045\nStep 6/12 : RUN mage build:serverStatic\n ---> Running in 7cb5c678f3ae\n\u001b[91mgo: downloading github.com/magefile/mage v1.11.0\n\u001b[0m[build -o build/boltchat-server-linux-amd64 -ldflags -s -w cmd/server/server.go]\n\u001b[91mgo: downloading golang.org/x/crypto v0.0.0-20201221181555-eec23a3978ad\n\u001b[0m\u001b[91mgo: downloading github.com/mitchellh/mapstructure v1.4.1\n\u001b[0m\u001b[91mgo: downloading github.com/fatih/color v1.10.0\n\u001b[0m\u001b[91mgo: downloading github.com/mattn/go-isatty v0.0.12\ngo: downloading github.com/mattn/go-colorable v0.1.8\n\u001b[0m\u001b[91mgo: downloading golang.org/x/sys v0.0.0-20200223170610-d5e6a3e2c0ae\n\u001b[0mRemoving intermediate container 7cb5c678f3ae\n ---> b3b1ca1c2b9b\nStep 7/12 : FROM busybox:1.32.1\n ---> 388056c9a683\nStep 8/12 : WORKDIR /app\n ---> Running in 1061eb82ef2c\nRemoving intermediate container 1061eb82ef2c\n ---> 239f368ce428\nStep 9/12 : COPY --from=build /src/build/boltchat-server-linux-amd64 ./server\n ---> d117274700e1\nStep 10/12 : COPY scripts/entrypoint.sh /entrypoint.sh\n ---> 9dfe4f501f98\nStep 11/12 : RUN chmod +x /entrypoint.sh\n ---> Running in 249adb17dfde\nRemoving intermediate container 249adb17dfde\n ---> 6cef4651084b\nStep 12/12 : ENTRYPOINT [\"/entrypoint.sh\"]\n ---> Running in 085a8d72014e\nRemoving intermediate container 085a8d72014e\n ---> 8d92417b1707\nSuccessfully built 8d92417b1707\nSuccessfully tagged bolt:latest\n","stderr":"","imageSize":4090805},"endTime":1672771538158}