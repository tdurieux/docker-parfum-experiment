{"repository":"https://github.com/cosmoscontracts/juno","dockerfilePath":"Dockerfile","startTime":1672883104662,"endTime":1672883353299,"clone":{"startTime":1672883104662,"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/cosmoscontracts/juno'...\n","error":null,"endTime":1672883105805,"commit":"cac1258d541b9de576ea00c6e101888951290f6a"},"originalBuild":{"startTime":1672883105895,"endTime":1672883352693,"error":null,"stdout":"Sending build context to Docker daemon  4.438MB\r\r\nStep 1/20 : FROM golang:1.19-alpine AS go-builder\n1.19-alpine: Pulling from library/golang\nDigest: sha256:a9b24b67dc83b3383d22a14941c2b2b2ca6a103d805cac6820fd1355943beaf1\nStatus: Downloaded newer image for golang:1.19-alpine\n ---> cae57157ceaa\nStep 2/20 : SHELL [\"/bin/sh\", \"-ecuxo\", \"pipefail\"]\n ---> Running in d2ad78bffed2\nRemoving intermediate container d2ad78bffed2\n ---> 96f9852cf6f7\nStep 3/20 : RUN apk add --no-cache ca-certificates build-base git\n ---> Running in 9f62ce0e01ed\n\u001b[91m+ apk add --no-cache ca-certificates build-base git\n\u001b[0mfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/26) Installing libgcc (12.2.1_git20220924-r4)\n(2/26) Installing libstdc++ (12.2.1_git20220924-r4)\n(3/26) Installing binutils (2.39-r2)\n(4/26) Installing libmagic (5.43-r0)\n(5/26) Installing file (5.43-r0)\n(6/26) Installing libgomp (12.2.1_git20220924-r4)\n(7/26) Installing libatomic (12.2.1_git20220924-r4)\n(8/26) Installing gmp (6.2.1-r2)\n(9/26) Installing isl25 (0.25-r0)\n(10/26) Installing mpfr4 (4.1.0-r0)\n(11/26) Installing mpc1 (1.2.1-r1)\n(12/26) Installing gcc (12.2.1_git20220924-r4)\n(13/26) Installing libstdc++-dev (12.2.1_git20220924-r4)\n(14/26) Installing musl-dev (1.2.3-r4)\n(15/26) Installing libc-dev (0.7.2-r3)\n(16/26) Installing g++ (12.2.1_git20220924-r4)\n(17/26) Installing make (4.3-r1)\n(18/26) Installing fortify-headers (1.1-r1)\n(19/26) Installing patch (2.7.6-r8)\n(20/26) Installing build-base (0.5-r3)\n(21/26) Installing brotli-libs (1.0.9-r9)\n(22/26) Installing nghttp2-libs (1.51.0-r0)\n(23/26) Installing libcurl (7.87.0-r0)\n(24/26) Installing libexpat (2.5.0-r0)\n(25/26) Installing pcre2 (10.42-r0)\n(26/26) Installing git (2.38.2-r0)\nExecuting busybox-1.35.0-r29.trigger\nOK: 253 MiB in 42 packages\nRemoving intermediate container 9f62ce0e01ed\n ---> 0e10cba7b013\nStep 4/20 : WORKDIR /code\n ---> Running in 316879031b0d\nRemoving intermediate container 316879031b0d\n ---> 891e1be449b1\nStep 5/20 : COPY . /code/\n ---> 63691a1c0a94\nStep 6/20 : ADD https://github.com/CosmWasm/wasmvm/releases/download/v1.1.1/libwasmvm_muslc.aarch64.a /lib/libwasmvm_muslc.aarch64.a\n\n\n ---> c17bc4033833\nStep 7/20 : ADD https://github.com/CosmWasm/wasmvm/releases/download/v1.1.1/libwasmvm_muslc.x86_64.a /lib/libwasmvm_muslc.x86_64.a\n\n\n ---> 519019926a25\nStep 8/20 : RUN sha256sum /lib/libwasmvm_muslc.aarch64.a | grep 9ecb037336bd56076573dc18c26631a9d2099a7f2b40dc04b6cae31ffb4c8f9a\n ---> Running in 83131a88e0a7\n\u001b[91m+ sha256sum /lib/libwasmvm_muslc.aarch64.a\n\u001b[0m\u001b[91m+ grep 9ecb037336bd56076573dc18c26631a9d2099a7f2b40dc04b6cae31ffb4c8f9a\n\u001b[0m9ecb037336bd56076573dc18c26631a9d2099a7f2b40dc04b6cae31ffb4c8f9a  /lib/libwasmvm_muslc.aarch64.a\nRemoving intermediate container 83131a88e0a7\n ---> 81e0712edc15\nStep 9/20 : RUN sha256sum /lib/libwasmvm_muslc.x86_64.a | grep 6e4de7ba9bad4ae9679c7f9ecf7e283dd0160e71567c6a7be6ae47c81ebe7f32\n ---> Running in 27d698d1fc3e\n\u001b[91m+ sha256sum /lib/libwasmvm_muslc.x86_64.a\n+ grep 6e4de7ba9bad4ae9679c7f9ecf7e283dd0160e71567c6a7be6ae47c81ebe7f32\n\u001b[0m6e4de7ba9bad4ae9679c7f9ecf7e283dd0160e71567c6a7be6ae47c81ebe7f32  /lib/libwasmvm_muslc.x86_64.a\nRemoving intermediate container 27d698d1fc3e\n ---> e43fd3d885b9\nStep 10/20 : RUN cp \"/lib/libwasmvm_muslc.$(uname -m).a\" /lib/libwasmvm_muslc.a\n ---> Running in d653eea23e0c\n\u001b[91m+ uname -m\n\u001b[0m\u001b[91m+ cp /lib/libwasmvm_muslc.x86_64.a /lib/libwasmvm_muslc.a\n\u001b[0mRemoving intermediate container d653eea23e0c\n ---> 6c06f43617a4\nStep 11/20 : RUN LEDGER_ENABLED=false BUILD_TAGS=muslc LINK_STATICALLY=true make build   && file /code/bin/junod   && echo \"Ensuring binary is statically linked ...\"   && (file /code/bin/junod | grep \"statically linked\")\n ---> Running in 84aab8b33abf\n\u001b[91m+ LEDGER_ENABLED=false BUILD_TAGS=muslc LINK_STATICALLY=true make build\n\u001b[0m\u001b[91mfatal: No names found, cannot describe anything.\n\u001b[0mgo build -tags \"netgo muslc\" -ldflags '-X github.com/cosmos/cosmos-sdk/version.Name=juno -X github.com/cosmos/cosmos-sdk/version.AppName=junod -X github.com/cosmos/cosmos-sdk/version.Version=main-cac1258d541b9de576ea00c6e101888951290f6a -X github.com/cosmos/cosmos-sdk/version.Commit=cac1258d541b9de576ea00c6e101888951290f6a -X \"github.com/cosmos/cosmos-sdk/version.BuildTags=netgo muslc,\" -X github.com/tendermint/tendermint/version.TMCoreSemVer=v0.34.24 -linkmode=external -extldflags \"-Wl,-z,muldefs -static\" -w -s' -trimpath -o bin/junod ./cmd/junod\n\u001b[91mgo: downloading github.com/cosmos/cosmos-sdk v0.45.11\ngo: downloading github.com/CosmWasm/wasmd v0.30.0\n\u001b[0m\u001b[91mgo: downloading github.com/cosmos/ibc-go/v4 v4.2.0\n\u001b[0m\u001b[91mgo: downloading github.com/prometheus/client_golang v1.14.0\n\u001b[0m\u001b[91mgo: downloading github.com/spf13/cast v1.5.0\n\u001b[0m\u001b[91mgo: downloading github.com/spf13/cobra v1.6.1\n\u001b[0m\u001b[91mgo: downloading github.com/tendermint/tendermint v0.34.24\n\u001b[0m\u001b[91mgo: downloading github.com/tendermint/tm-db v0.6.8-0.20220506192307-f628bb5dc95b\n\u001b[0m\u001b[91mgo: downloading github.com/CosmosContracts/token-factory v0.0.0-20221224074329-bc7f9501149c\n\u001b[0m\u001b[91mgo: downloading github.com/cosmos/gaia/v8 v8.0.0-20221222131145-0e77d69f55a0\n\u001b[0m\u001b[91mgo: downloading github.com/cosmos/interchain-accounts v0.2.5\n\u001b[0m\u001b[91mgo: downloading github.com/ignite-hq/cli v0.22.1\n\u001b[0m\u001b[91mgo: downloading github.com/spf13/pflag v1.0.5\n\u001b[0m\u001b[91mgo: downloading github.com/beorn7/perks v1.0.1\ngo: downloading github.com/cespare/xxhash/v2 v2.1.2\n\u001b[0m\u001b[91mgo: downloading github.com/prometheus/client_model v0.3.0\ngo: downloading github.com/prometheus/common v0.37.0\n\u001b[0m\u001b[91mgo: downloading github.com/golang/protobuf v1.5.2\n\u001b[0m\u001b[91mgo: downloading github.com/prometheus/procfs v0.8.0\ngo: downloading google.golang.org/protobuf v1.28.2-0.20220831092852-f930b1dc76e8\n\u001b[0m\u001b[91mgo: downloading github.com/google/btree v1.1.2\n\u001b[0m\u001b[91mgo: downloading github.com/syndtr/goleveldb v1.0.1-0.20210819022825-2ae1ddf74ef7\n\u001b[0m\u001b[91mgo: downloading github.com/cespare/xxhash v1.1.0\n\u001b[0m\u001b[91mgo: downloading github.com/CosmWasm/wasmvm v1.1.1\n\u001b[0m\u001b[91mgo: downloading github.com/docker/distribution v2.8.1+incompatible\n\u001b[0m\u001b[91mgo: downloading github.com/pkg/errors v0.9.1\n\u001b[0m\u001b[91mgo: downloading github.com/gorilla/mux v1.8.0\ngo: downloading github.com/regen-network/protobuf v1.3.3-alpha.regen.1\n\u001b[0m\u001b[91mgo: downloading github.com/google/gofuzz v1.2.0\n\u001b[0m\u001b[91mgo: downloading github.com/stretchr/testify v1.8.1\n\u001b[0m\u001b[91mgo: downloading google.golang.org/grpc v1.33.2\n\u001b[0m\u001b[91mgo: downloading github.com/grpc-ecosystem/grpc-gateway v1.16.0\n\u001b[0m\u001b[91mgo: downloading github.com/cosmos/cosmos-proto v1.0.0-alpha8\n\u001b[0m\u001b[91mgo: downloading github.com/cosmos/gogoproto v1.4.3\n\u001b[0m\u001b[91mgo: downloading google.golang.org/genproto v0.0.0-20221024183307-1bc688fe9f3e\n\u001b[0m\u001b[91mgo: downloading gopkg.in/yaml.v2 v2.4.0\n\u001b[0m\u001b[91mgo: downloading github.com/regen-network/cosmos-proto v0.3.1\n\u001b[0m\u001b[91mgo: downloading github.com/spf13/viper v1.14.0\n\u001b[0m\u001b[91mgo: downloading github.com/go-kit/log v0.2.1\n\u001b[0m\u001b[91mgo: downloading github.com/go-logfmt/logfmt v0.5.1\n\u001b[0m\u001b[91mgo: downloading github.com/rs/zerolog v1.27.0\n\u001b[0m\u001b[91mgo: downloading github.com/99designs/keyring v1.2.1\n\u001b[0m\u001b[91mgo: downloading github.com/armon/go-metrics v0.4.0\n\u001b[0m\u001b[91mgo: downloading github.com/cosmos/go-bip39 v1.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/tendermint/crypto v0.0.0-20191022145703-50d29ede1e15\n\u001b[0m\u001b[91mgo: downloading github.com/grpc-ecosystem/go-grpc-middleware v1.3.0\n\u001b[0m\u001b[91mgo: downloading golang.org/x/crypto v0.1.0\n\u001b[0m\u001b[91mgo: downloading golang.org/x/net v0.1.0\n\u001b[0m\u001b[91mgo: downloading github.com/hashicorp/golang-lru v0.5.5-0.20210104140557-80c98217689d\n\u001b[0m\u001b[91mgo: downloading golang.org/x/exp v0.0.0-20220722155223-a9213eeb770e\n\u001b[0m\u001b[91mgo: downloading github.com/cosmos/btcutil v1.0.4\n\u001b[0m\u001b[91mgo: downloading github.com/tendermint/go-amino v0.16.0\n\u001b[0m\u001b[91mgo: downloading github.com/btcsuite/btcd v0.22.1\n\u001b[0m\u001b[91mgo: downloading github.com/gogo/gateway v1.1.0\ngo: downloading github.com/gorilla/handlers v1.5.1\n\u001b[0m\u001b[91mgo: downloading github.com/rakyll/statik v0.1.7\n\u001b[0m\u001b[91mgo: downloading github.com/matttproud/golang_protobuf_extensions v1.0.2-0.20181231171920-c182affec369\n\u001b[0m\u001b[91mgo: downloading github.com/cosmos/cosmos-sdk/ics23/go v0.8.0\n\u001b[0m\u001b[91mgo: downloading golang.org/x/sys v0.1.0\n\u001b[0m\u001b[91mgo: downloading github.com/opencontainers/go-digest v1.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/improbable-eng/grpc-web v0.15.0\n\u001b[0m\u001b[91mgo: downloading github.com/coinbase/rosetta-sdk-go v0.7.9\n\u001b[0m\u001b[91mgo: downloading github.com/lib/pq v1.10.6\ngo: downloading github.com/rs/cors v1.8.2\n\u001b[0m\u001b[91mgo: downloading github.com/go-kit/kit v0.12.0\n\u001b[0m\u001b[91mgo: downloading github.com/hdevalence/ed25519consensus v0.0.0-20220222234857-c00d1f31bab3\n\u001b[0m\u001b[91mgo: downloading github.com/fsnotify/fsnotify v1.6.0\ngo: downloading github.com/mitchellh/mapstructure v1.5.0\n\u001b[0m\u001b[91mgo: downloading github.com/spf13/afero v1.9.2\n\u001b[0m\u001b[91mgo: downloading github.com/spf13/jwalterweatherman v1.1.0\n\u001b[0m\u001b[91mgo: downloading github.com/bgentry/speakeasy v0.1.0\n\u001b[0m\u001b[91mgo: downloading github.com/mattn/go-isatty v0.0.16\n\u001b[0m\u001b[91mgo: downloading github.com/tendermint/btcd v0.1.1\n\u001b[0m\u001b[91mgo: downloading github.com/mattn/go-colorable v0.1.13\n\u001b[0m\u001b[91mgo: downloading github.com/dvsekhvalnov/jose2go v1.5.0\ngo: downloading github.com/cosmos/iavl v0.19.4\n\u001b[0m\u001b[91mgo: downloading github.com/godbus/dbus v0.0.0-20190726142602-4481cbc300e2\n\u001b[0m\u001b[91mgo: downloading github.com/gsterjov/go-libsecret v0.0.0-20161001094733-a6f4afe4910c\n\u001b[0m\u001b[91mgo: downloading github.com/mtibben/percent v0.2.1\n\u001b[0m\u001b[91mgo: downloading golang.org/x/term v0.1.0\n\u001b[0m\u001b[91mgo: downloading github.com/hashicorp/go-immutable-radix v1.3.1\n\u001b[0m\u001b[91mgo: downloading github.com/ChainSafe/go-schnorrkel v0.0.0-20200405005733-88cbf1b4c40d\n\u001b[0m\u001b[91mgo: downloading github.com/gorilla/websocket v1.5.0\n\u001b[0m\u001b[91mgo: downloading github.com/davecgh/go-spew v1.1.1\n\u001b[0m\u001b[91mgo: downloading github.com/felixge/httpsnoop v1.0.1\n\u001b[0m\u001b[91mgo: downloading github.com/golang/snappy v0.0.4\n\u001b[0m\u001b[91mgo: downloading github.com/pmezard/go-difflib v1.0.0\n\u001b[0m\u001b[91mgo: downloading gopkg.in/yaml.v3 v3.0.1\n\u001b[0m\u001b[91mgo: downloading github.com/google/orderedcode v0.0.1\n\u001b[0m\u001b[91mgo: downloading github.com/Workiva/go-datastructures v1.0.53\n\u001b[0m\u001b[91mgo: downloading github.com/creachadair/taskgroup v0.3.2\n\u001b[0m\u001b[91mgo: downloading github.com/minio/highwayhash v1.0.2\n\u001b[0m\u001b[91mgo: downloading github.com/gtank/merlin v0.1.1\n\u001b[0m\u001b[91mgo: downloading github.com/libp2p/go-buffer-pool v0.1.0\n\u001b[0m\u001b[91mgo: downloading github.com/subosito/gotenv v1.4.1\n\u001b[0m\u001b[91mgo: downloading github.com/hashicorp/hcl v1.0.0\n\u001b[0m\u001b[91mgo: downloading gopkg.in/ini.v1 v1.67.0\n\u001b[0m\u001b[91mgo: downloading github.com/magiconair/properties v1.8.6\n\u001b[0m\u001b[91mgo: downloading github.com/pelletier/go-toml/v2 v2.0.5\n\u001b[0m\u001b[91mgo: downloading github.com/rcrowley/go-metrics v0.0.0-20201227073835-cf1acfcdf475\n\u001b[0m\u001b[91mgo: downloading filippo.io/edwards25519 v1.0.0-rc.1\n\u001b[0m\u001b[91mgo: downloading github.com/gtank/ristretto255 v0.1.2\n\u001b[0m\u001b[91mgo: downloading golang.org/x/text v0.4.0\n\u001b[0m\u001b[91mgo: downloading github.com/pelletier/go-toml v1.9.5\n\u001b[0m\u001b[91mgo: downloading github.com/cenkalti/backoff/v4 v4.1.3\n\u001b[0m\u001b[91mgo: downloading github.com/desertbit/timer v0.0.0-20180107155436-c41aec40b27f\n\u001b[0m\u001b[91mgo: downloading nhooyr.io/websocket v1.8.6\n\u001b[0m\u001b[91mgo: downloading github.com/mimoo/StrobeGo v0.0.0-20210601165009-122bf33a46e0\n\u001b[0m\u001b[91mgo: downloading github.com/klauspost/compress v1.15.11\n\u001b[0m\u001b[91m+ file /code/bin/junod\n\u001b[0m/code/bin/junod: ELF 64-bit LSB executable, x86-64, version 1 (SYSV), statically linked, Go BuildID=rZIw-2bDJPEDjwzek5U6/mqiPJt1UCqccRA1ZDax_/KdJcjaOtCVPc_jzmh8_N/0NDFwqZMtMwsRSaIexvg, stripped\n\u001b[91m+ echo 'Ensuring binary is statically linked ...'\n\u001b[0mEnsuring binary is statically linked ...\n\u001b[91m+ file /code/bin/junod\n\u001b[0m\u001b[91m+ grep 'statically linked'\n\u001b[0m/code/bin/junod: ELF 64-bit LSB executable, x86-64, version 1 (SYSV), statically linked, Go BuildID=rZIw-2bDJPEDjwzek5U6/mqiPJt1UCqccRA1ZDax_/KdJcjaOtCVPc_jzmh8_N/0NDFwqZMtMwsRSaIexvg, stripped\nRemoving intermediate container 84aab8b33abf\n ---> feb37721c8b0\nStep 12/20 : FROM alpine:3.16\n3.16: Pulling from library/alpine\nca7dd9ec2225: Already exists\nDigest: sha256:b95359c2505145f16c6aa384f9cc74eeff78eb36d308ca4fd902eeeb0a0b161b\nStatus: Downloaded newer image for alpine:3.16\n ---> bfe296a52501\nStep 13/20 : COPY --from=go-builder /code/bin/junod /usr/bin/junod\n ---> 0a2b315c3baa\nStep 14/20 : COPY docker/* /opt/\n ---> 0a998bd436b9\nStep 15/20 : RUN chmod +x /opt/*.sh\n ---> Running in 73112fb3acb1\nRemoving intermediate container 73112fb3acb1\n ---> 05731480e984\nStep 16/20 : WORKDIR /opt\n ---> Running in 0961b878b55d\nRemoving intermediate container 0961b878b55d\n ---> d1771034e8ec\nStep 17/20 : EXPOSE 1317\n ---> Running in e175d0b3e46d\nRemoving intermediate container e175d0b3e46d\n ---> e31d0e32cded\nStep 18/20 : EXPOSE 26656\n ---> Running in 34802a8e4a79\nRemoving intermediate container 34802a8e4a79\n ---> f224d7bcd171\nStep 19/20 : EXPOSE 26657\n ---> Running in 716f4b97fffe\nRemoving intermediate container 716f4b97fffe\n ---> 734582c73c9d\nStep 20/20 : CMD [\"/usr/bin/junod\", \"version\"]\n ---> Running in 81fbfdd68f58\nRemoving intermediate container 81fbfdd68f58\n ---> 11817a7f5357\nSuccessfully built 11817a7f5357\nSuccessfully tagged juno:latest\n","stderr":"","imageSize":68861640},"repair":{"startTime":1672883352790,"endTime":1672883352886,"violations":[],"repairedDockerfile":"# docker build . -t cosmoscontracts/juno:latest\n# docker run --rm -it cosmoscontracts/juno:latest /bin/sh\nFROM golang:1.19-alpine AS go-builder\n\n# this comes from standard alpine nightly file\n#  https://github.com/rust-lang/docker-rust-nightly/blob/master/alpine3.12/Dockerfile\n# with some changes to support our toolchain, etc\nSHELL [\"/bin/sh\", \"-ecuxo\", \"pipefail\"]\n# we probably want to default to latest and error\n# since this is predominantly for dev use\n# hadolint ignore=DL3018\nRUN apk add --no-cache ca-certificates build-base git\n# NOTE: add these to run with LEDGER_ENABLED=true\n# RUN apk add libusb-dev linux-headers\n\nWORKDIR /code\nCOPY . /code/\n\n# See https://github.com/CosmWasm/wasmvm/releases\nADD https://github.com/CosmWasm/wasmvm/releases/download/v1.1.1/libwasmvm_muslc.aarch64.a /lib/libwasmvm_muslc.aarch64.a\nADD https://github.com/CosmWasm/wasmvm/releases/download/v1.1.1/libwasmvm_muslc.x86_64.a /lib/libwasmvm_muslc.x86_64.a\nRUN sha256sum /lib/libwasmvm_muslc.aarch64.a | grep 9ecb037336bd56076573dc18c26631a9d2099a7f2b40dc04b6cae31ffb4c8f9a\nRUN sha256sum /lib/libwasmvm_muslc.x86_64.a | grep 6e4de7ba9bad4ae9679c7f9ecf7e283dd0160e71567c6a7be6ae47c81ebe7f32\n\n# Copy the library you want to the final location that will be found by the linker flag `-lwasmvm_muslc`\nRUN cp \"/lib/libwasmvm_muslc.$(uname -m).a\" /lib/libwasmvm_muslc.a\n\n# force it to use static lib (from above) not standard libgo_cosmwasm.so file\n# then log output of file /code/bin/junod\n# then ensure static linking\nRUN LEDGER_ENABLED=false BUILD_TAGS=muslc LINK_STATICALLY=true make build \\\n  && file /code/bin/junod \\\n  && echo \"Ensuring binary is statically linked ...\" \\\n  && (file /code/bin/junod | grep \"statically linked\")\n\n# --------------------------------------------------------\nFROM alpine:3.16\n\nCOPY --from=go-builder /code/bin/junod /usr/bin/junod\n\nCOPY docker/* /opt/\nRUN chmod +x /opt/*.sh\n\nWORKDIR /opt\n\n# rest server\nEXPOSE 1317\n# tendermint p2p\nEXPOSE 26656\n# tendermint rpc\nEXPOSE 26657\n\nCMD [\"/usr/bin/junod\", \"version\"]\n"}}