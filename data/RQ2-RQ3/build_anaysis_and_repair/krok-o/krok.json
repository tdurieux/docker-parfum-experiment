{"repository":"https://github.com/krok-o/krok","dockerfilePath":"Dockerfile","startTime":1672050076230,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/krok-o/krok'...\n","error":null,"commit":"1213ccd59e3d86925a49415c77eb2c0052c6f739"},"originalBuild":{"startTimestamp":1672050077149,"endTimestamp":1672050146830,"error":null,"stdout":"Sending build context to Docker daemon  1.293MB\r\r\nStep 1/12 : FROM golang:1.18-alpine as build\n1.18-alpine: Pulling from library/golang\nc158987b0551: Already exists\n019cfb932eb0: Pulling fs layer\n4e0e94741593: Pulling fs layer\n1ba1ea060658: Pulling fs layer\n1ba1ea060658: Verifying Checksum\n1ba1ea060658: Download complete\n019cfb932eb0: Verifying Checksum\n019cfb932eb0: Download complete\n019cfb932eb0: Pull complete\n4e0e94741593: Verifying Checksum\n4e0e94741593: Download complete\n4e0e94741593: Pull complete\n1ba1ea060658: Pull complete\nDigest: sha256:c2bb8281641f39a32e01854ae6b5fea45870f6f4c0c04365eadc0be596675456\nStatus: Downloaded newer image for golang:1.18-alpine\n ---> f37f1bcb329f\nStep 2/12 : RUN apk add -u git\n ---> Running in cb065add48ae\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/7) Upgrading ca-certificates (20220614-r2 -> 20220614-r3)\n(2/7) Installing brotli-libs (1.0.9-r9)\n(3/7) Installing nghttp2-libs (1.51.0-r0)\n(4/7) Installing libcurl (7.87.0-r0)\n(5/7) Installing libexpat (2.5.0-r0)\n(6/7) Installing pcre2 (10.42-r0)\n(7/7) Installing git (2.38.2-r0)\nExecuting busybox-1.35.0-r29.trigger\nExecuting ca-certificates-20220614-r3.trigger\nOK: 16 MiB in 22 packages\nRemoving intermediate container cb065add48ae\n ---> 963bb347a452\nStep 3/12 : WORKDIR /app\n ---> Running in 5b92dc4135cc\nRemoving intermediate container 5b92dc4135cc\n ---> d7161e5424e4\nStep 4/12 : COPY . .\n ---> 8b3b2ef35cf6\nStep 5/12 : RUN go build -o /krok\n ---> Running in f79dcf4590da\n\u001b[91mgo: downloading golang.org/x/sync v0.0.0-20210220032951-036812b2e83c\n\u001b[0m\u001b[91mgo: downloading github.com/docker/docker v20.10.14+incompatible\ngo: downloading github.com/lib/pq v1.10.5\ngo: downloading github.com/mailgun/mailgun-go v2.0.0+incompatible\n\u001b[0m\u001b[91mgo: downloading github.com/rs/zerolog v1.26.1\n\u001b[0m\u001b[91mgo: downloading github.com/spf13/cobra v1.4.0\n\u001b[0m\u001b[91mgo: downloading github.com/xanzy/go-gitlab v0.63.0\n\u001b[0m\u001b[91mgo: downloading gopkg.in/go-playground/webhooks.v5 v5.17.0\n\u001b[0m\u001b[91mgo: downloading github.com/google/go-github v17.0.0+incompatible\n\u001b[0m\u001b[91mgo: downloading github.com/jackc/pgx/v4 v4.15.0\n\u001b[0m\u001b[91mgo: downloading golang.org/x/oauth2 v0.0.0-20220411215720-9780585627b5\n\u001b[0m\u001b[91mgo: downloading golang.org/x/crypto v0.0.0-20220411220226-7b82a4e95df4\n\u001b[0m\u001b[91mgo: downloading github.com/dgrijalva/jwt-go v3.2.0+incompatible\n\u001b[0m\u001b[91mgo: downloading github.com/google/uuid v1.3.0\n\u001b[0m\u001b[91mgo: downloading github.com/labstack/echo/v4 v4.7.2\n\u001b[0m\u001b[91mgo: downloading github.com/spf13/pflag v1.0.5\n\u001b[0m\u001b[91mgo: downloading github.com/jackc/pgconn v1.11.0\ngo: downloading github.com/jackc/pgio v1.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/jackc/pgtype v1.10.0\ngo: downloading github.com/jackc/pgproto3/v2 v2.2.0\n\u001b[0m\u001b[91mgo: downloading cloud.google.com/go/compute v1.6.0\n\u001b[0m\u001b[91mgo: downloading golang.org/x/net v0.0.0-20220412020605-290c469a71a5\n\u001b[0m\u001b[91mgo: downloading github.com/jackc/chunkreader/v2 v2.0.1\ngo: downloading github.com/jackc/pgpassfile v1.0.0\n\u001b[0m\u001b[91mgo: downloading golang.org/x/text v0.3.7\ngo: downloading github.com/jackc/pgservicefile v0.0.0-20200714003250-2b9c44734f2b\n\u001b[0m\u001b[91mgo: downloading github.com/labstack/gommon v0.3.1\n\u001b[0m\u001b[91mgo: downloading github.com/golang-jwt/jwt v3.2.2+incompatible\ngo: downloading golang.org/x/time v0.0.0-20220411224347-583f2d630306\n\u001b[0m\u001b[91mgo: downloading github.com/valyala/fasttemplate v1.2.1\n\u001b[0m\u001b[91mgo: downloading github.com/valyala/bytebufferpool v1.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/mattn/go-isatty v0.0.14\n\u001b[0m\u001b[91mgo: downloading github.com/mattn/go-colorable v0.1.12\n\u001b[0m\u001b[91mgo: downloading golang.org/x/sys v0.0.0-20220412211240-33da011f77ad\n\u001b[0m\u001b[91mgo: downloading github.com/pkg/errors v0.9.1\ngo: downloading github.com/gobuffalo/envy v1.10.1\n\u001b[0m\u001b[91mgo: downloading github.com/google/go-querystring v1.1.0\n\u001b[0m\u001b[91mgo: downloading github.com/rogpeppe/go-internal v1.8.1\ngo: downloading github.com/joho/godotenv v1.4.0\n\u001b[0m\u001b[91mgo: downloading github.com/hashicorp/go-retryablehttp v0.7.1\ngo: downloading github.com/hashicorp/go-cleanhttp v0.5.2\n\u001b[0m\u001b[91mgo: downloading github.com/docker/go-connections v0.4.0\ngo: downloading github.com/docker/go-units v0.4.0\n\u001b[0m\u001b[91mgo: downloading github.com/opencontainers/image-spec v1.0.2\n\u001b[0m\u001b[91mgo: downloading github.com/gogo/protobuf v1.3.2\n\u001b[0m\u001b[91mgo: downloading github.com/containerd/containerd v1.6.2\ngo: downloading github.com/docker/distribution v2.8.1+incompatible\ngo: downloading github.com/opencontainers/go-digest v1.0.0\n\u001b[0m\u001b[91mgo: downloading google.golang.org/grpc v1.45.0\ngo: downloading github.com/sirupsen/logrus v1.8.1\n\u001b[0m\u001b[91mgo: downloading google.golang.org/genproto v0.0.0-20220414192740-2d67ff6cf2b4\n\u001b[0m\u001b[91mgo: downloading github.com/golang/protobuf v1.5.2\n\u001b[0m\u001b[91mgo: downloading google.golang.org/protobuf v1.28.0\n\u001b[0mRemoving intermediate container f79dcf4590da\n ---> d531de57ace7\nStep 6/12 : FROM alpine\n ---> 49176f190c7e\nStep 7/12 : RUN apk add -u ca-certificates\n ---> Running in 4e89ccae18d7\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/1) Installing ca-certificates (20220614-r3)\nExecuting busybox-1.35.0-r29.trigger\nExecuting ca-certificates-20220614-r3.trigger\nOK: 8 MiB in 16 packages\nRemoving intermediate container 4e89ccae18d7\n ---> 9d1fee5893eb\nStep 8/12 : COPY --from=build /krok /app/\n ---> ce2c8e4c64fe\nStep 9/12 : EXPOSE 9998\n ---> Running in 31ff7bc67724\nRemoving intermediate container 31ff7bc67724\n ---> 259a6ab7d4ad\nStep 10/12 : RUN mkdir -p /tmp/krok/vault\n ---> Running in 3213359b23aa\nRemoving intermediate container 3213359b23aa\n ---> a311cdb5ca8e\nStep 11/12 : WORKDIR /app/\n ---> Running in 7fab9d6c1c88\nRemoving intermediate container 7fab9d6c1c88\n ---> f082ec72d01f\nStep 12/12 : ENTRYPOINT [ \"/app/krok\" ]\n ---> Running in f80748e8c1b9\nRemoving intermediate container f80748e8c1b9\n ---> 3da877249e2e\nSuccessfully built 3da877249e2e\nSuccessfully tagged krok:latest\n","stderr":"","imageSize":33584054},"repair":{"violations":[{"name":"apkAddUseNoCache","position":{"start":1,"end":1,"columnStart":4,"columnEnd":18}},{"name":"apkAddUseNoCache","position":{"start":7,"end":7,"columnStart":4,"columnEnd":30}}],"repairedDockerfile":"FROM golang:1.18-alpine as build\nRUN apk add --no-cache -u git\nWORKDIR /app\nCOPY . .\nRUN go build -o /krok\n\nFROM alpine\nRUN apk add --no-cache -u ca-certificates\nCOPY --from=build /krok /app/\n\nEXPOSE 9998\n\nRUN mkdir -p /tmp/krok/vault\nWORKDIR /app/\nENTRYPOINT [ \"/app/krok\" ]\n"},"repairedBuild":{"startTimestamp":1672050147091,"endTimestamp":1672050210966,"error":null,"stdout":"Sending build context to Docker daemon  1.293MB\r\r\nStep 1/12 : FROM golang:1.18-alpine as build\n ---> f37f1bcb329f\nStep 2/12 : RUN apk add --no-cache -u git\n ---> Running in e77e0c2c5f14\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/7) Upgrading ca-certificates (20220614-r2 -> 20220614-r3)\n(2/7) Installing brotli-libs (1.0.9-r9)\n(3/7) Installing nghttp2-libs (1.51.0-r0)\n(4/7) Installing libcurl (7.87.0-r0)\n(5/7) Installing libexpat (2.5.0-r0)\n(6/7) Installing pcre2 (10.42-r0)\n(7/7) Installing git (2.38.2-r0)\nExecuting busybox-1.35.0-r29.trigger\nExecuting ca-certificates-20220614-r3.trigger\nOK: 16 MiB in 22 packages\nRemoving intermediate container e77e0c2c5f14\n ---> aba85b3483d8\nStep 3/12 : WORKDIR /app\n ---> Running in d5be99ba98d5\nRemoving intermediate container d5be99ba98d5\n ---> 2100de793967\nStep 4/12 : COPY . .\n ---> 93b0854f1195\nStep 5/12 : RUN go build -o /krok\n ---> Running in 409e9804c873\n\u001b[91mgo: downloading golang.org/x/sync v0.0.0-20210220032951-036812b2e83c\n\u001b[0m\u001b[91mgo: downloading github.com/lib/pq v1.10.5\n\u001b[0m\u001b[91mgo: downloading golang.org/x/crypto v0.0.0-20220411220226-7b82a4e95df4\n\u001b[0m\u001b[91mgo: downloading github.com/spf13/cobra v1.4.0\ngo: downloading github.com/jackc/pgx/v4 v4.15.0\n\u001b[0m\u001b[91mgo: downloading github.com/labstack/echo/v4 v4.7.2\n\u001b[0m\u001b[91mgo: downloading github.com/rs/zerolog v1.26.1\ngo: downloading github.com/docker/docker v20.10.14+incompatible\n\u001b[0m\u001b[91mgo: downloading github.com/google/go-github v17.0.0+incompatible\n\u001b[0m\u001b[91mgo: downloading github.com/dgrijalva/jwt-go v3.2.0+incompatible\n\u001b[0m\u001b[91mgo: downloading github.com/mailgun/mailgun-go v2.0.0+incompatible\n\u001b[0m\u001b[91mgo: downloading golang.org/x/oauth2 v0.0.0-20220411215720-9780585627b5\n\u001b[0m\u001b[91mgo: downloading gopkg.in/go-playground/webhooks.v5 v5.17.0\n\u001b[0m\u001b[91mgo: downloading github.com/google/uuid v1.3.0\n\u001b[0m\u001b[91mgo: downloading github.com/xanzy/go-gitlab v0.63.0\n\u001b[0m\u001b[91mgo: downloading github.com/gobuffalo/envy v1.10.1\n\u001b[0m\u001b[91mgo: downloading github.com/pkg/errors v0.9.1\n\u001b[0m\u001b[91mgo: downloading github.com/spf13/pflag v1.0.5\n\u001b[0m\u001b[91mgo: downloading github.com/rogpeppe/go-internal v1.8.1\n\u001b[0m\u001b[91mgo: downloading github.com/joho/godotenv v1.4.0\n\u001b[0m\u001b[91mgo: downloading cloud.google.com/go/compute v1.6.0\n\u001b[0m\u001b[91mgo: downloading golang.org/x/net v0.0.0-20220412020605-290c469a71a5\n\u001b[0m\u001b[91mgo: downloading github.com/jackc/pgconn v1.11.0\ngo: downloading github.com/jackc/pgproto3/v2 v2.2.0\n\u001b[0m\u001b[91mgo: downloading github.com/jackc/pgtype v1.10.0\ngo: downloading github.com/jackc/pgio v1.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/jackc/pgservicefile v0.0.0-20200714003250-2b9c44734f2b\ngo: downloading github.com/jackc/chunkreader/v2 v2.0.1\ngo: downloading golang.org/x/text v0.3.7\n\u001b[0m\u001b[91mgo: downloading github.com/jackc/pgpassfile v1.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/labstack/gommon v0.3.1\n\u001b[0m\u001b[91mgo: downloading github.com/golang-jwt/jwt v3.2.2+incompatible\n\u001b[0m\u001b[91mgo: downloading github.com/valyala/fasttemplate v1.2.1\n\u001b[0m\u001b[91mgo: downloading golang.org/x/time v0.0.0-20220411224347-583f2d630306\n\u001b[0m\u001b[91mgo: downloading github.com/mattn/go-isatty v0.0.14\n\u001b[0m\u001b[91mgo: downloading github.com/mattn/go-colorable v0.1.12\n\u001b[0m\u001b[91mgo: downloading github.com/valyala/bytebufferpool v1.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/google/go-querystring v1.1.0\n\u001b[0m\u001b[91mgo: downloading golang.org/x/sys v0.0.0-20220412211240-33da011f77ad\n\u001b[0m\u001b[91mgo: downloading github.com/hashicorp/go-retryablehttp v0.7.1\ngo: downloading github.com/hashicorp/go-cleanhttp v0.5.2\n\u001b[0m\u001b[91mgo: downloading github.com/docker/go-units v0.4.0\n\u001b[0m\u001b[91mgo: downloading github.com/docker/go-connections v0.4.0\n\u001b[0m\u001b[91mgo: downloading github.com/opencontainers/image-spec v1.0.2\n\u001b[0m\u001b[91mgo: downloading github.com/gogo/protobuf v1.3.2\n\u001b[0m\u001b[91mgo: downloading github.com/containerd/containerd v1.6.2\ngo: downloading github.com/docker/distribution v2.8.1+incompatible\ngo: downloading github.com/opencontainers/go-digest v1.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/sirupsen/logrus v1.8.1\ngo: downloading google.golang.org/grpc v1.45.0\n\u001b[0m\u001b[91mgo: downloading google.golang.org/genproto v0.0.0-20220414192740-2d67ff6cf2b4\n\u001b[0m\u001b[91mgo: downloading github.com/golang/protobuf v1.5.2\n\u001b[0m\u001b[91mgo: downloading google.golang.org/protobuf v1.28.0\n\u001b[0mRemoving intermediate container 409e9804c873\n ---> 53b5dce577e5\nStep 6/12 : FROM alpine\n ---> 49176f190c7e\nStep 7/12 : RUN apk add --no-cache -u ca-certificates\n ---> Running in ef624bcb84e9\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/1) Installing ca-certificates (20220614-r3)\nExecuting busybox-1.35.0-r29.trigger\nExecuting ca-certificates-20220614-r3.trigger\nOK: 8 MiB in 16 packages\nRemoving intermediate container ef624bcb84e9\n ---> f3dcc8913f8c\nStep 8/12 : COPY --from=build /krok /app/\n ---> 37bfc093035a\nStep 9/12 : EXPOSE 9998\n ---> Running in 52470c93c550\nRemoving intermediate container 52470c93c550\n ---> b1a8a223b152\nStep 10/12 : RUN mkdir -p /tmp/krok/vault\n ---> Running in 8488142f0642\nRemoving intermediate container 8488142f0642\n ---> 65e93b1284e1\nStep 11/12 : WORKDIR /app/\n ---> Running in de0d5f399751\nRemoving intermediate container de0d5f399751\n ---> 6444f305d2c0\nStep 12/12 : ENTRYPOINT [ \"/app/krok\" ]\n ---> Running in 124ae66088c6\nRemoving intermediate container 124ae66088c6\n ---> e7f955a1fac0\nSuccessfully built e7f955a1fac0\nSuccessfully tagged krok:latest\n","stderr":"","imageSize":31001137},"endTime":1672050211320}