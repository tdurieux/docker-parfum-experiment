{"repository":"https://github.com/mbucc/shmig","dockerfilePath":"Dockerfile","startTime":1673004875398,"endTime":1673004983992,"clone":{"startTime":1673004875400,"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/mbucc/shmig'...\n","error":null,"endTime":1673004876107,"commit":"b88e1b35d2847eba8bd3a1d47e7a16e1367e7922"},"originalBuild":{"startTime":1673004876188,"endTime":1673004948073,"error":null,"stdout":"Sending build context to Docker daemon  145.4kB\r\r\nStep 1/6 : FROM alpine:latest\n ---> 49176f190c7e\nStep 2/6 : RUN apk update &&     apk add bash postgresql-client mysql-client sqlite &&     apk add --update openssl\n ---> Running in 376808cccbc3\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\nv3.17.0-332-g13963e2526 [https://dl-cdn.alpinelinux.org/alpine/v3.17/main]\nv3.17.0-336-ga9d27aafa7 [https://dl-cdn.alpinelinux.org/alpine/v3.17/community]\nOK: 17815 distinct packages available\n(1/15) Installing ncurses-terminfo-base (6.3_p20221119-r0)\n(2/15) Installing ncurses-libs (6.3_p20221119-r0)\n(3/15) Installing readline (8.2.0-r0)\n(4/15) Installing bash (5.2.15-r0)\nExecuting bash-5.2.15-r0.post-install\n(5/15) Installing mariadb-common (10.6.11-r0)\n(6/15) Installing libgcc (12.2.1_git20220924-r4)\n(7/15) Installing libstdc++ (12.2.1_git20220924-r4)\n(8/15) Installing mariadb-client (10.6.11-r0)\n(9/15) Installing mysql-client (10.6.11-r0)\n(10/15) Installing postgresql-common (1.1-r2)\nExecuting postgresql-common-1.1-r2.pre-install\n(11/15) Installing lz4-libs (1.9.4-r1)\n(12/15) Installing libpq (15.1-r0)\n(13/15) Installing zstd-libs (1.5.2-r9)\n(14/15) Installing postgresql15-client (15.1-r0)\n(15/15) Installing sqlite (3.40.1-r0)\nExecuting busybox-1.35.0-r29.trigger\nExecuting postgresql-common-1.1-r2.trigger\n\u001b[91m* Setting postgresql15 as the default version\n\u001b[0mOK: 48 MiB in 30 packages\n(1/1) Installing openssl (3.0.7-r2)\nExecuting busybox-1.35.0-r29.trigger\nOK: 48 MiB in 31 packages\nRemoving intermediate container 376808cccbc3\n ---> dc8c889d7f79\nStep 3/6 : ADD shmig /bin/shmig\n ---> 63a0530a05f0\nStep 4/6 : ENV TYPE=mysql     HOST=localhost     PORT=3389     DATABASE=db     LOGIN=root     PASSWORD=root     ASK_PASSWORD=0     MIGRATIONS=/sql     MYSQL=/usr/bin/mysql     PSQL=/usr/bin/psql     SQLITE3=/usr/bin/sqlite3     UP_MARK=\"====  UP  ====\"     DOWN_MARK=\"==== DOWN ====\"     COLOR=auto     SCHEMA_TABLE=shmig_version\n ---> Running in d2e60a5ff46d\nRemoving intermediate container d2e60a5ff46d\n ---> ab47bde7cb8b\nStep 5/6 : ADD entrypoint.sh /entrypoint.sh\n ---> acd0c67d107d\nStep 6/6 : ENTRYPOINT [\"/entrypoint.sh\"]\n ---> Running in 6e8db4457f31\nRemoving intermediate container 6e8db4457f31\n ---> 0b48af580dad\nSuccessfully built 0b48af580dad\nSuccessfully tagged shmig:latest\n","stderr":"","imageSize":52374621},"repair":{"startTime":1673004948133,"endTime":1673004948167,"violations":[{"name":"apkAddUseNoCache","position":{"start":3,"end":3,"columnStart":4,"columnEnd":54}},{"name":"apkAddUseNoCache","position":{"start":4,"end":4,"columnStart":4,"columnEnd":28}}],"repairedDockerfile":"FROM alpine:latest\n\nRUN apk update && \\\n    apk add --no-cache bash postgresql-client mysql-client sqlite && \\\n    apk add --no-cache --update openssl\n\nADD shmig /bin/shmig\n\n## SHMIG configuration\nENV TYPE=mysql \\\n    HOST=localhost \\\n    PORT=3389 \\\n    DATABASE=db \\\n    LOGIN=root \\\n    PASSWORD=root \\\n    ASK_PASSWORD=0 \\\n    MIGRATIONS=/sql \\\n    MYSQL=/usr/bin/mysql \\\n    PSQL=/usr/bin/psql \\\n    SQLITE3=/usr/bin/sqlite3 \\\n    UP_MARK=\"====  UP  ====\" \\\n    DOWN_MARK=\"==== DOWN ====\" \\\n    COLOR=auto \\\n    SCHEMA_TABLE=shmig_version\n\nADD entrypoint.sh /entrypoint.sh\nENTRYPOINT [\"/entrypoint.sh\"]\n\n"},"repairedBuild":{"startTime":1673004948962,"endTime":1673004983749,"error":null,"stdout":"Sending build context to Docker daemon  145.4kB\r\r\nStep 1/6 : FROM alpine:latest\n ---> 49176f190c7e\nStep 2/6 : RUN apk update &&     apk add --no-cache bash postgresql-client mysql-client sqlite &&     apk add --no-cache --update openssl\n ---> Running in 4e4c4637182e\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\nv3.17.0-332-g13963e2526 [https://dl-cdn.alpinelinux.org/alpine/v3.17/main]\nv3.17.0-336-ga9d27aafa7 [https://dl-cdn.alpinelinux.org/alpine/v3.17/community]\nOK: 17815 distinct packages available\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/15) Installing ncurses-terminfo-base (6.3_p20221119-r0)\n(2/15) Installing ncurses-libs (6.3_p20221119-r0)\n(3/15) Installing readline (8.2.0-r0)\n(4/15) Installing bash (5.2.15-r0)\nExecuting bash-5.2.15-r0.post-install\n(5/15) Installing mariadb-common (10.6.11-r0)\n(6/15) Installing libgcc (12.2.1_git20220924-r4)\n(7/15) Installing libstdc++ (12.2.1_git20220924-r4)\n(8/15) Installing mariadb-client (10.6.11-r0)\n(9/15) Installing mysql-client (10.6.11-r0)\n(10/15) Installing postgresql-common (1.1-r2)\nExecuting postgresql-common-1.1-r2.pre-install\n(11/15) Installing lz4-libs (1.9.4-r1)\n(12/15) Installing libpq (15.1-r0)\n(13/15) Installing zstd-libs (1.5.2-r9)\n(14/15) Installing postgresql15-client (15.1-r0)\n(15/15) Installing sqlite (3.40.1-r0)\nExecuting busybox-1.35.0-r29.trigger\nExecuting postgresql-common-1.1-r2.trigger\n\u001b[91m* Setting postgresql15 as the default version\n\u001b[0mOK: 48 MiB in 30 packages\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/1) Installing openssl (3.0.7-r2)\nExecuting busybox-1.35.0-r29.trigger\nOK: 48 MiB in 31 packages\nRemoving intermediate container 4e4c4637182e\n ---> 3af7585f48ee\nStep 3/6 : ADD shmig /bin/shmig\n ---> 02e805a235ae\nStep 4/6 : ENV TYPE=mysql     HOST=localhost     PORT=3389     DATABASE=db     LOGIN=root     PASSWORD=root     ASK_PASSWORD=0     MIGRATIONS=/sql     MYSQL=/usr/bin/mysql     PSQL=/usr/bin/psql     SQLITE3=/usr/bin/sqlite3     UP_MARK=\"====  UP  ====\"     DOWN_MARK=\"==== DOWN ====\"     COLOR=auto     SCHEMA_TABLE=shmig_version\n ---> Running in 667602383aa1\nRemoving intermediate container 667602383aa1\n ---> a012847fa71e\nStep 5/6 : ADD entrypoint.sh /entrypoint.sh\n ---> 32446ecc19d7\nStep 6/6 : ENTRYPOINT [\"/entrypoint.sh\"]\n ---> Running in 7ffa9fedd3a6\nRemoving intermediate container 7ffa9fedd3a6\n ---> 1426c012a1b6\nSuccessfully built 1426c012a1b6\nSuccessfully tagged shmig:latest\n","stderr":"","imageSize":52374621}}