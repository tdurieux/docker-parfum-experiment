{"repository":"https://github.com/hemmeligorg/hemmelig.app","dockerfilePath":"Dockerfile","startTime":1672062860083,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/hemmeligorg/hemmelig.app'...\n","error":null,"commit":"155fb5a3e14b4fdd28acec9d9318e7c36df6afc8"},"originalBuild":{"startTimestamp":1672062861071,"endTimestamp":1672063083171,"error":null,"stdout":"Sending build context to Docker daemon   3.67MB\r\r\nStep 1/20 : FROM node:lts-alpine\nlts-alpine: Pulling from library/node\nDigest: sha256:a136ed7b0df71082cdb171f36d640ea3b392a5c70401c642326acee767b8c540\nStatus: Downloaded newer image for node:lts-alpine\n ---> 6d7b7852bcd3\nStep 2/20 : WORKDIR /usr/src/app\n ---> Running in 61a838b6ae72\nRemoving intermediate container 61a838b6ae72\n ---> 409ffa06200e\nStep 3/20 : COPY package*.json ./\n ---> 27711a963eb7\nStep 4/20 : RUN npm install\n ---> Running in bb643bbe247c\n\u001b[91mnpm WARN deprecated urix@0.1.0: Please see https://github.com/lydell/urix#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated stable@0.1.8: Modern JS already guarantees Array#sort() is a stable sort, so this library is deprecated. See the compatibility table on MDN: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/sort#browser_compatibility\n\u001b[0m\u001b[91mnpm WARN deprecated uuid@3.3.2: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.\n\u001b[0m\u001b[91mnpm WARN deprecated sane@4.1.0: some dependency vulnerabilities fixed, support for node < 10 dropped, and newer ECMAScript syntax/features added\n\u001b[0m\u001b[91mnpm WARN deprecated resolve-url@0.2.1: https://github.com/lydell/resolve-url#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated rollup-plugin-babel@4.4.0: This package has been deprecated and is no longer maintained. Please use @rollup/plugin-babel.\n\u001b[0m\u001b[91mnpm WARN deprecated querystring@0.2.0: The querystring API is considered Legacy. new code should use the URLSearchParams API instead.\n\u001b[0m\u001b[91mnpm WARN deprecated flatten@1.0.3: flatten is deprecated in favor of utility frameworks such as lodash.\n\u001b[0m\u001b[91mnpm WARN deprecated svgo@1.3.2: This SVGO version is no longer supported. Upgrade to v2.x.x.\n\u001b[0m\u001b[91mnpm WARN deprecated babel-eslint@10.1.0: babel-eslint is now @babel/eslint-parser. This package will no longer receive updates.\n\u001b[0m\u001b[91mnpm WARN deprecated @hapi/topo@3.1.6: This version has been deprecated and is no longer supported or maintained\n\u001b[0m\u001b[91mnpm WARN deprecated @hapi/bourne@1.3.2: This version has been deprecated and is no longer supported or maintained\n\u001b[0m\u001b[91mnpm WARN deprecated @hapi/address@2.1.4: Moved to 'npm install @sideway/address'\n\u001b[0m\u001b[91mnpm WARN deprecated @hapi/joi@15.1.1: Switch to 'npm install joi'\n\u001b[0m\u001b[91mnpm WARN deprecated @hapi/hoek@8.5.1: This version has been deprecated and is no longer supported or maintained\n\u001b[0m\u001b[91mnpm WARN deprecated chokidar@2.1.8: Chokidar 2 does not receive security updates since 2019. Upgrade to chokidar 3 with 15x fewer dependencies\n\u001b[0m\u001b[91mnpm WARN deprecated chokidar@2.1.8: Chokidar 2 will break on node v14+. Upgrade to chokidar 3 with 15x less dependencies.\n\u001b[0m\u001b[91mnpm WARN deprecated core-js@2.6.12: core-js@<3.23.3 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Some versions have web compatibility issues. Please, upgrade your dependencies to the actual version of core-js.\n\u001b[0m\n> hemmelig@4.1.6 prepare\n> husky install\n\nhusky - not a Git repository, skipping hooks installation\n\nadded 2244 packages, and audited 2245 packages in 33s\n\n216 packages are looking for funding\n  run `npm fund` for details\n\n38 vulnerabilities (8 moderate, 20 high, 10 critical)\n\nTo address issues that do not require attention, run:\n  npm audit fix\n\nTo address all issues (including breaking changes), run:\n  npm audit fix --force\n\nRun `npm audit` for details.\n\u001b[91mnpm notice \nnpm notice New major version of npm available! 8.19.2 -> 9.2.0\nnpm notice Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm\u001b[0m\u001b[91m notice Run `npm install -g npm@9.2.0` to update!\nnpm notice\u001b[0m\u001b[91m \n\u001b[0mRemoving intermediate container bb643bbe247c\n ---> e66acbe13c7c\nStep 5/20 : COPY . .\n ---> 2f199a556253\nStep 6/20 : ENV NODE_ENV=production\n ---> Running in bc68a423ab9c\nRemoving intermediate container bc68a423ab9c\n ---> 778e952f59f4\nStep 7/20 : RUN npm run build\n ---> Running in 2b468dfdb207\n\n> hemmelig@4.1.6 build\n> NODE_OPTIONS=--openssl-legacy-provider react-scripts build\n\nCreating an optimized production build...\nCompiled successfully.\n\nFile sizes after gzip:\n\n  236.9 KB   build/static/js/6.27b412ea.chunk.js\n  103.18 KB  build/static/js/7.733c6087.chunk.js\n  20.59 KB   build/static/js/3.f3e2cc9a.chunk.js\n  7.22 KB    build/static/js/13.4f39d411.chunk.js\n  6.7 KB     build/static/js/15.768a57ea.chunk.js\n  6.04 KB    build/static/js/1.6a8d1d5b.chunk.js\n  5.31 KB    build/static/js/2.c5795e49.chunk.js\n  4.35 KB    build/static/js/16.4bb3fa2c.chunk.js\n  4.22 KB    build/static/js/8.97f83612.chunk.js\n  2.84 KB    build/static/js/12.876fb451.chunk.js\n  2.7 KB     build/static/js/0.a31f22bc.chunk.js\n  2.56 KB    build/static/js/11.719f9cfe.chunk.js\n  2.39 KB    build/static/js/10.455a1af7.chunk.js\n  2.38 KB    build/static/js/9.0f69427e.chunk.js\n  1.96 KB    build/static/js/14.059c20e0.chunk.js\n  1.79 KB    build/static/js/main.e6e5b49d.chunk.js\n  1.67 KB    build/static/js/runtime-main.784cc3ae.js\n  673 B      build/static/css/11.2673bb85.chunk.css\n  333 B      build/static/css/8.c0975252.chunk.css\n  315 B      build/static/css/main.70a45cb8.chunk.css\n  271 B      build/static/css/10.3dba0fcd.chunk.css\n  271 B      build/static/css/12.3dba0fcd.chunk.css\n  271 B      build/static/css/9.3dba0fcd.chunk.css\n  132 B      build/static/css/13.c812df27.chunk.css\n\nThe project was built assuming it is hosted at /.\nYou can control this with the homepage field in your package.json.\n\nThe build folder is ready to be deployed.\nYou may serve it with a static server:\n\n  npm install -g serve\n  serve -s build\n\nFind out more about deployment here:\n\n  https://cra.link/deployment\n\nRemoving intermediate container 2b468dfdb207\n ---> 8f09cbfcab79\nStep 8/20 : FROM node:lts-alpine\n ---> 6d7b7852bcd3\nStep 9/20 : RUN addgroup --gid 10001 --system nonroot     && adduser --uid 10000 --system --ingroup nonroot --home /home/nonroot nonroot\n ---> Running in e41b5a99984c\nRemoving intermediate container e41b5a99984c\n ---> c7125e38ef81\nStep 10/20 : WORKDIR /home/nonroot/hemmelig\n ---> Running in fa263d69c44d\nRemoving intermediate container fa263d69c44d\n ---> 08038acb68e8\nStep 11/20 : RUN mkdir build\n ---> Running in aaaa676b3d9b\nRemoving intermediate container aaaa676b3d9b\n ---> 0fc87858d8f1\nStep 12/20 : COPY --from=0 /usr/src/app/build build/\n ---> 9a6f673abc56\nStep 13/20 : RUN chown -R nonroot ./\n ---> Running in 7283616ac154\nRemoving intermediate container 7283616ac154\n ---> 1c0b07c77791\nStep 14/20 : USER nonroot\n ---> Running in c18ac9b9e312\nRemoving intermediate container c18ac9b9e312\n ---> 2c9f1f0a9b7d\nStep 15/20 : COPY package*.json ./\n ---> 3da15e96069d\nStep 16/20 : RUN npm ci --production --ignore-scripts\n ---> Running in c4446a8a241c\n\u001b[91mnpm\u001b[0m\u001b[91m WARN config production Use `--omit=dev` instead.\n\u001b[0m\u001b[91mnpm \u001b[0m\u001b[91mWARN deprecated querystring@0.2.0: The querystring API is considered Legacy. new code should use the URLSearchParams API instead.\n\u001b[0m\u001b[91mnpm WARN deprecated uuid@3.3.2: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.\n\u001b[0m\nadded 382 packages, and audited 383 packages in 9s\n\n48 packages are looking for funding\n  run `npm fund` for details\n\nfound 0 vulnerabilities\n\u001b[91mnpm notice \nnpm notice\u001b[0m\u001b[91m New major version of npm available! 8.19.2 -> 9.2.0\nnpm notice Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm \u001b[0m\u001b[91mnotice\u001b[0m\u001b[91m Run `npm install -g npm@9.2.0` to update!\n\u001b[0m\u001b[91mnpm notice\u001b[0m\u001b[91m \n\u001b[0mRemoving intermediate container c4446a8a241c\n ---> bd0ca1986b5e\nStep 17/20 : COPY . .\n ---> 7841f3ca6ce5\nStep 18/20 : EXPOSE 3000\n ---> Running in 9c77e3971f4d\nRemoving intermediate container 9c77e3971f4d\n ---> e1e0c43f4565\nStep 19/20 : ENV NODE_ENV=production\n ---> Running in ccb925c18548\nRemoving intermediate container ccb925c18548\n ---> 2f0a77a10396\nStep 20/20 : CMD [\"node\", \"server.js\"]\n ---> Running in ffec4393c2a6\nRemoving intermediate container ffec4393c2a6\n ---> 947474cdb99f\nSuccessfully built 947474cdb99f\nSuccessfully tagged hemmelig.app:latest\n","stderr":"","imageSize":391306333},"repair":{"violations":[{"name":"npmCacheCleanAfterInstall","position":{"start":18,"end":18,"columnStart":4,"columnEnd":15}}],"repairedDockerfile":"# To use this image you need a redis database enabled.\n# Example:\n#\n# $ docker run -p 6379:6379 --name some-redis -d redis\n#\n# Bare minimum run\n# ------------------------------\n# $ docker run -p 3000:3000 -d --name=hemmelig \\\n#   -e SECRET_REDIS_HOST=127.0.0.1 \\\n#   hemmeligapp/hemmelig:latest\n\n\nFROM node:lts-alpine\n\nWORKDIR /usr/src/app\n\nCOPY package*.json ./\n\nRUN npm install\n\nCOPY . .\n\nENV NODE_ENV=production\n\nRUN npm run build\n\n\n# Get ready for step two of the docker image build\nFROM node:lts-alpine\n\nRUN addgroup --gid 10001 --system nonroot \\\n    && adduser --uid 10000 --system --ingroup nonroot --home /home/nonroot nonroot\n\nWORKDIR /home/nonroot/hemmelig\n\nRUN mkdir build\nCOPY --from=0 /usr/src/app/build build/\n\nRUN chown -R nonroot ./\n\nUSER nonroot\n\nCOPY package*.json ./\n\nRUN npm ci --production --ignore-scripts\n\nCOPY . .\n\nEXPOSE 3000\n\nENV NODE_ENV=production\n\nCMD [\"node\", \"server.js\"]\n"},"repairedBuild":{"startTimestamp":1672063084465,"endTimestamp":1672063312253,"error":null,"stdout":"Sending build context to Docker daemon   3.67MB\r\r\nStep 1/20 : FROM node:lts-alpine\n ---> 6d7b7852bcd3\nStep 2/20 : WORKDIR /usr/src/app\n ---> Running in 9ef17ed7b834\nRemoving intermediate container 9ef17ed7b834\n ---> 5c1c6303c6c4\nStep 3/20 : COPY package*.json ./\n ---> d5bcbbce81ee\nStep 4/20 : RUN npm install\n ---> Running in 4f416843dcde\n\u001b[91mnpm WARN deprecated urix@0.1.0: Please see https://github.com/lydell/urix#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated uuid@3.3.2: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.\n\u001b[0m\u001b[91mnpm WARN deprecated stable@0.1.8: Modern JS already guarantees Array#sort() is a stable sort, so this library is deprecated. See the compatibility table on MDN: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/sort#browser_compatibility\n\u001b[0m\u001b[91mnpm WARN deprecated sane@4.1.0: some dependency vulnerabilities fixed, support for node < 10 dropped, and newer ECMAScript syntax/features added\n\u001b[0m\u001b[91mnpm WARN deprecated resolve-url@0.2.1: https://github.com/lydell/resolve-url#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated rollup-plugin-babel@4.4.0: This package has been deprecated and is no longer maintained. Please use @rollup/plugin-babel.\n\u001b[0m\u001b[91mnpm WARN deprecated querystring@0.2.0: The querystring API is considered Legacy. new code should use the URLSearchParams API instead.\n\u001b[0m\u001b[91mnpm WARN deprecated flatten@1.0.3: flatten is deprecated in favor of utility frameworks such as lodash.\n\u001b[0m\u001b[91mnpm WARN \u001b[0m\u001b[91mdeprecated svgo@1.3.2: This SVGO version is no longer supported. Upgrade to v2.x.x.\n\u001b[0m\u001b[91mnpm WARN deprecated babel-eslint@10.1.0: babel-eslint is now @babel/eslint-parser. This package will no longer receive updates.\n\u001b[0m\u001b[91mnpm WARN deprecated @hapi/topo@3.1.6: This version has been deprecated and is no longer supported or maintained\n\u001b[0m\u001b[91mnpm WARN deprecated @hapi/bourne@1.3.2: This version has been deprecated and is no longer supported or maintained\n\u001b[0m\u001b[91mnpm WARN deprecated @hapi/address@2.1.4: Moved to 'npm install @sideway/address'\n\u001b[0m\u001b[91mnpm WARN deprecated @hapi/hoek@8.5.1: This version has been deprecated and is no longer supported or maintained\n\u001b[0m\u001b[91mnpm WARN deprecated chokidar@2.1.8: Chokidar 2 does not receive security updates since 2019. Upgrade to chokidar 3 with 15x fewer dependencies\n\u001b[0m\u001b[91mnpm WARN deprecated chokidar@2.1.8: Chokidar 2 will break on node v14+. Upgrade to chokidar 3 with 15x less dependencies.\n\u001b[0m\u001b[91mnpm WARN deprecated @hapi/joi@15.1.1: Switch to 'npm install joi'\n\u001b[0m\u001b[91mnpm WARN deprecated core-js@2.6.12: core-js@<3.23.3 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Some versions have web compatibility issues. Please, upgrade your dependencies to the actual version of core-js.\n\u001b[0m\n> hemmelig@4.1.6 prepare\n> husky install\n\nhusky - not a Git repository, skipping hooks installation\n\nadded 2244 packages, and audited 2245 packages in 35s\n\n216 packages are looking for funding\n  run `npm fund` for details\n\n38 vulnerabilities (8 moderate, 20 high, 10 critical)\n\nTo address issues that do not require attention, run:\n  npm audit fix\n\nTo address all issues (including breaking changes), run:\n  npm audit fix --force\n\nRun `npm audit` for details.\n\u001b[91mnpm notice \nnpm notice New major version of npm available! 8.19.2 -> 9.2.0\nnpm notice Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm notice\u001b[0m\u001b[91m Run `npm install -g npm@9.2.0` to update!\nnpm notice \n\u001b[0mRemoving intermediate container 4f416843dcde\n ---> a69f3b405c25\nStep 5/20 : COPY . .\n ---> e281d46b8902\nStep 6/20 : ENV NODE_ENV=production\n ---> Running in 736624392e8b\nRemoving intermediate container 736624392e8b\n ---> ce85a66aeb65\nStep 7/20 : RUN npm run build\n ---> Running in 3f5043cfad4b\n\n> hemmelig@4.1.6 build\n> NODE_OPTIONS=--openssl-legacy-provider react-scripts build\n\nCreating an optimized production build...\nCompiled successfully.\n\nFile sizes after gzip:\n\n  236.9 KB   build/static/js/6.27b412ea.chunk.js\n  103.18 KB  build/static/js/7.733c6087.chunk.js\n  20.59 KB   build/static/js/3.f3e2cc9a.chunk.js\n  7.22 KB    build/static/js/13.4f39d411.chunk.js\n  6.7 KB     build/static/js/15.768a57ea.chunk.js\n  6.04 KB    build/static/js/1.6a8d1d5b.chunk.js\n  5.31 KB    build/static/js/2.c5795e49.chunk.js\n  4.35 KB    build/static/js/16.4bb3fa2c.chunk.js\n  4.22 KB    build/static/js/8.97f83612.chunk.js\n  2.84 KB    build/static/js/12.876fb451.chunk.js\n  2.7 KB     build/static/js/0.a31f22bc.chunk.js\n  2.56 KB    build/static/js/11.719f9cfe.chunk.js\n  2.39 KB    build/static/js/10.455a1af7.chunk.js\n  2.38 KB    build/static/js/9.0f69427e.chunk.js\n  1.96 KB    build/static/js/14.059c20e0.chunk.js\n  1.79 KB    build/static/js/main.e6e5b49d.chunk.js\n  1.67 KB    build/static/js/runtime-main.784cc3ae.js\n  673 B      build/static/css/11.2673bb85.chunk.css\n  333 B      build/static/css/8.c0975252.chunk.css\n  315 B      build/static/css/main.70a45cb8.chunk.css\n  271 B      build/static/css/10.3dba0fcd.chunk.css\n  271 B      build/static/css/12.3dba0fcd.chunk.css\n  271 B      build/static/css/9.3dba0fcd.chunk.css\n  132 B      build/static/css/13.c812df27.chunk.css\n\nThe project was built assuming it is hosted at /.\nYou can control this with the homepage field in your package.json.\n\nThe build folder is ready to be deployed.\nYou may serve it with a static server:\n\n  npm install -g serve\n  serve -s build\n\nFind out more about deployment here:\n\n  https://cra.link/deployment\n\nRemoving intermediate container 3f5043cfad4b\n ---> dd9518099188\nStep 8/20 : FROM node:lts-alpine\n ---> 6d7b7852bcd3\nStep 9/20 : RUN addgroup --gid 10001 --system nonroot     && adduser --uid 10000 --system --ingroup nonroot --home /home/nonroot nonroot\n ---> Running in 93e4bddbd0dc\nRemoving intermediate container 93e4bddbd0dc\n ---> 5f1c51f9d8c9\nStep 10/20 : WORKDIR /home/nonroot/hemmelig\n ---> Running in 96b81ddb0f7a\nRemoving intermediate container 96b81ddb0f7a\n ---> 89bfcffbcac3\nStep 11/20 : RUN mkdir build\n ---> Running in 9764a61f4578\nRemoving intermediate container 9764a61f4578\n ---> b8aba6a8ab26\nStep 12/20 : COPY --from=0 /usr/src/app/build build/\n ---> ebfd38cabaf0\nStep 13/20 : RUN chown -R nonroot ./\n ---> Running in fa680792ff99\nRemoving intermediate container fa680792ff99\n ---> 6ef34ecfb68c\nStep 14/20 : USER nonroot\n ---> Running in abfd78bf76a0\nRemoving intermediate container abfd78bf76a0\n ---> 405ad85d5e5b\nStep 15/20 : COPY package*.json ./\n ---> 39861bee3f3f\nStep 16/20 : RUN npm ci --production --ignore-scripts\n ---> Running in 7fa54f1f7c7d\n\u001b[91mnpm\u001b[0m\u001b[91m WARN config production Use `--omit=dev` instead.\n\u001b[0m\u001b[91mnpm WARN deprecated querystring@0.2.0: The querystring API is considered Legacy. new code should use the URLSearchParams API instead.\n\u001b[0m\u001b[91mnpm WARN deprecated uuid@3.3.2: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.\n\u001b[0m\nadded 382 packages, and audited 383 packages in 8s\n\n48 packages are looking for funding\n  run `npm fund` for details\n\nfound 0 vulnerabilities\n\u001b[91mnpm notice \nnpm notice New major version of npm available! 8.19.2 -> 9.2.0\nnpm notice\u001b[0m\u001b[91m Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm notice\u001b[0m\u001b[91m Run `npm install -g npm@9.2.0` to update!\nnpm\u001b[0m\u001b[91m notice \n\u001b[0mRemoving intermediate container 7fa54f1f7c7d\n ---> fdd0b63d25b0\nStep 17/20 : COPY . .\n ---> e8520e5e35c4\nStep 18/20 : EXPOSE 3000\n ---> Running in 31cb9c82a3c2\nRemoving intermediate container 31cb9c82a3c2\n ---> f28c599889fa\nStep 19/20 : ENV NODE_ENV=production\n ---> Running in 6df686c6f302\nRemoving intermediate container 6df686c6f302\n ---> 844e5f77d43a\nStep 20/20 : CMD [\"node\", \"server.js\"]\n ---> Running in b331c436c366\nRemoving intermediate container b331c436c366\n ---> 0272e72b7d4d\nSuccessfully built 0272e72b7d4d\nSuccessfully tagged hemmelig.app:latest\n","stderr":"","imageSize":391306337},"endTime":1672063312943}