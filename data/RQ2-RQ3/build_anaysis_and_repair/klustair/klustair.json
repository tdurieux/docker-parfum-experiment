{"repository":"https://github.com/klustair/klustair","dockerfilePath":"Dockerfile","startTime":1672893728228,"endTime":1672893787323,"clone":{"startTime":1672893728228,"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/klustair/klustair'...\n","error":null,"endTime":1672893729020,"commit":"1659b9cbabda37a6820d9a64f2c084573f74062f"},"originalBuild":{"startTime":1672893729103,"endTime":1672893769649,"error":null,"stdout":"Sending build context to Docker daemon  477.2kB\r\r\nStep 1/12 : FROM python:3.10-alpine\n ---> 2527f31628e7\nStep 2/12 : ARG KUBECTL_VERSION=\"v1.17.0\"\n ---> Running in 6783e439d37d\nRemoving intermediate container 6783e439d37d\n ---> ec55fdc32063\nStep 3/12 : ENV KUBECONFIG=\"/kube.config\"\n ---> Running in 264863660f33\nRemoving intermediate container 264863660f33\n ---> 04eabd60d1ba\nStep 4/12 : RUN apk --no-cache add curl\n ---> Running in c00eb662b4f3\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/4) Installing brotli-libs (1.0.9-r9)\n(2/4) Installing nghttp2-libs (1.51.0-r0)\n(3/4) Installing libcurl (7.87.0-r0)\n(4/4) Installing curl (7.87.0-r0)\nExecuting busybox-1.35.0-r29.trigger\nOK: 17 MiB in 41 packages\nRemoving intermediate container c00eb662b4f3\n ---> 26df11381042\nStep 5/12 : RUN apk --no-cache add rpm\n ---> Running in dfd80b502af2\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/14) Installing libacl (2.3.1-r1)\n(2/14) Installing lz4-libs (1.9.4-r1)\n(3/14) Installing zstd-libs (1.5.2-r9)\n(4/14) Installing libarchive (3.6.1-r2)\n(5/14) Installing libcap2 (2.66-r0)\n(6/14) Installing musl-fts (1.2.7-r3)\n(7/14) Installing libelf (0.187-r2)\n(8/14) Installing libgpg-error (1.46-r1)\n(9/14) Installing libgcrypt (1.10.1-r0)\n(10/14) Installing libgomp (12.2.1_git20220924-r4)\n(11/14) Installing lua5.4-libs (5.4.4-r6)\n(12/14) Installing libmagic (5.43-r0)\n(13/14) Installing popt (1.19-r0)\n(14/14) Installing rpm (4.18.0-r1)\nExecuting busybox-1.35.0-r29.trigger\nOK: 31 MiB in 55 packages\nRemoving intermediate container dfd80b502af2\n ---> 233bda66b7cb\nStep 6/12 : RUN echo https://storage.googleapis.com/kubernetes-release/release/${KUBECTL_VERSION}/bin/linux/amd64/kubectl; curl -LO https://storage.googleapis.com/kubernetes-release/release/${KUBECTL_VERSION}/bin/linux/amd64/kubectl ; chmod +x ./kubectl && mv ./kubectl /usr/local/bin/kubectl\n ---> Running in 81117fa35143\nhttps://storage.googleapis.com/kubernetes-release/release/v1.17.0/bin/linux/amd64/kubectl\n\u001b[91m  % Total    % Recei\u001b[0m\u001b[91mved % Xferd  Avera\u001b[0m\u001b[91mge Speed\u001b[0m\u001b[91m   Time\u001b[0m\u001b[91m    Time   \u001b[0m\u001b[91m  Time  Cu\u001b[0m\u001b[91mrrent\n  \u001b[0m\u001b[91m   \u001b[0m\u001b[91m                     \u001b[0m\u001b[91m      \u001b[0m\u001b[91m Dlo\u001b[0m\u001b[91mad  \u001b[0m\u001b[91mUplo\u001b[0m\u001b[91mad  \u001b[0m\u001b[91m Total  \u001b[0m\u001b[91m Spent\u001b[0m\u001b[91m    Left  Sp\u001b[0m\u001b[91meed\n\r  0  \u001b[0m\u001b[91m   0  \u001b[0m\u001b[91m  0   \u001b[0m\u001b[91m  0    0     \u001b[0m\u001b[91m0      0     \u001b[0m\u001b[91m 0 --:\u001b[0m\u001b[91m--:\u001b[0m\u001b[91m-- --:--:-- --:--:\u001b[0m\u001b[91m--    \u001b[0m\u001b[91m 0\u001b[0m\u001b[91m\r  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0\u001b[0m\u001b[91m\r 66 41.4M   66 27.6M    0     0  25.4M      0 \u001b[0m\u001b[91m 0:00:01  0:00:01 --:--:-- 25.4M\u001b[0m\u001b[91m\r100 41.4M  100 41.4M    0     0  32.8M      0  0:00:01  0:00:01 -\u001b[0m\u001b[91m-:--:-- 32.8M\n\u001b[0mRemoving intermediate container 81117fa35143\n ---> 1ecdb38da50d\nStep 7/12 : COPY --from=shopify/kubeaudit:v0.16 /kubeaudit /usr/local/bin/kubeaudit\nv0.16: Pulling from shopify/kubeaudit\nc7a0a30f8d87: Pulling fs layer\n605d1389bfbe: Pulling fs layer\n84927f71a742: Pulling fs layer\n1ccb337fe763: Pulling fs layer\n605d1389bfbe: Verifying Checksum\n605d1389bfbe: Download complete\nc7a0a30f8d87: Download complete\nc7a0a30f8d87: Pull complete\n605d1389bfbe: Pull complete\n84927f71a742: Pull complete\n1ccb337fe763: Verifying Checksum\n1ccb337fe763: Download complete\n1ccb337fe763: Pull complete\nDigest: sha256:b3d70df99dad4bb05967fab0768ebc9f0b92e9e7321d6c5259e8790909adb79d\nStatus: Downloaded newer image for shopify/kubeaudit:v0.16\n ---> 610a07b493e6\nStep 8/12 : COPY --from=aquasec/trivy:0.21.0 /usr/local/bin/trivy /usr/local/bin/trivy\n0.21.0: Pulling from aquasec/trivy\n97518928ae5f: Pulling fs layer\n44cef0911c32: Pulling fs layer\n3311fbda93d9: Pulling fs layer\nbd91c392f66f: Pulling fs layer\nbd91c392f66f: Waiting\n97518928ae5f: Verifying Checksum\n97518928ae5f: Download complete\n44cef0911c32: Verifying Checksum\n44cef0911c32: Download complete\n97518928ae5f: Pull complete\nbd91c392f66f: Verifying Checksum\nbd91c392f66f: Download complete\n44cef0911c32: Pull complete\n3311fbda93d9: Verifying Checksum\n3311fbda93d9: Download complete\n3311fbda93d9: Pull complete\nbd91c392f66f: Pull complete\nDigest: sha256:f133b97138cab488e0bfa8874c1f29e3be37b1213bf4d10477087ce4e5451a61\nStatus: Downloaded newer image for aquasec/trivy:0.21.0\n ---> e82b17bfdf34\nStep 9/12 : COPY requirements.txt requirements.txt\n ---> 5ce47e251169\nStep 10/12 : RUN pip install -r requirements.txt\n ---> Running in e0ffff65d0cc\nCollecting requests>=2.23.0\n  Downloading requests-2.28.1-py3-none-any.whl (62 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 62.8/62.8 kB 2.9 MB/s eta 0:00:00\nCollecting urllib3>=1.25.9\n  Downloading urllib3-1.26.13-py2.py3-none-any.whl (140 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 140.6/140.6 kB 15.2 MB/s eta 0:00:00\nCollecting cvss==2.3\n  Downloading cvss-2.3-py2.py3-none-any.whl (20 kB)\nCollecting certifi>=2017.4.17\n  Downloading certifi-2022.12.7-py3-none-any.whl (155 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 155.3/155.3 kB 8.8 MB/s eta 0:00:00\nCollecting charset-normalizer<3,>=2\n  Downloading charset_normalizer-2.1.1-py3-none-any.whl (39 kB)\nCollecting idna<4,>=2.5\n  Downloading idna-3.4-py3-none-any.whl (61 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 61.5/61.5 kB 6.4 MB/s eta 0:00:00\nInstalling collected packages: cvss, urllib3, idna, charset-normalizer, certifi, requests\nSuccessfully installed certifi-2022.12.7 charset-normalizer-2.1.1 cvss-2.3 idna-3.4 requests-2.28.1 urllib3-1.26.13\n\u001b[91mWARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv\n\u001b[0mRemoving intermediate container e0ffff65d0cc\n ---> c29612985bed\nStep 11/12 : RUN apk del curl\n ---> Running in 5e6c4507de1a\n\u001b[91mWARNING: Ignoring https://dl-cdn.alpinelinux.org/alpine/v3.17/main: No such file or directory\nWARNING: Ignoring https://dl-cdn.alpinelinux.org/alpine/v3.17/community: No such file or directory\n\u001b[0m(1/4) Purging curl (7.87.0-r0)\n(2/4) Purging libcurl (7.87.0-r0)\n(3/4) Purging brotli-libs (1.0.9-r9)\n(4/4) Purging nghttp2-libs (1.51.0-r0)\nExecuting busybox-1.35.0-r29.trigger\nOK: 29 MiB in 51 packages\nRemoving intermediate container 5e6c4507de1a\n ---> 3130da4f40af\nStep 12/12 : COPY app/ app/\n ---> 761938039d64\nSuccessfully built 761938039d64\nSuccessfully tagged klustair:latest\n","stderr":"","imageSize":195388150},"repair":{"startTime":1672893769721,"endTime":1672893769786,"violations":[{"name":"curlUseFlagF","position":{"start":11,"end":11,"columnStart":0,"columnEnd":111}},{"name":"pipUseNoCacheDir","position":{"start":24,"end":24,"columnStart":4,"columnEnd":35}}],"repairedDockerfile":"FROM python:3.10-alpine\n\nARG KUBECTL_VERSION=\"v1.17.0\"\nENV KUBECONFIG=\"/kube.config\"\n\n#install kubectl\nRUN apk --no-cache add curl\nRUN apk --no-cache add rpm\n\n#RUN apt-get update && apt-get install -y apt-transport-https curl gnupg2 rpm; \\\nRUN echo https://storage.googleapis.com/kubernetes-release/release/${KUBECTL_VERSION}/bin/linux/amd64/kubectl; \\\ncurl -f -LO https://storage.googleapis.com/kubernetes-release/release/${KUBECTL_VERSION}/bin/linux/amd64/kubectl; \\\nchmod +x ./kubectl && mv ./kubectl /usr/local/bin/kubectl\n\n#install gcloud\n#RUN echo \"deb [signed-by=/usr/share/keyrings/cloud.google.gpg] http://packages.cloud.google.com/apt cloud-sdk main\" | tee -a /etc/apt/sources.list.d/google-cloud-sdk.list && curl https://packages.cloud.google.com/apt/doc/apt-key.gpg | apt-key --keyring /usr/share/keyrings/cloud.google.gpg  add - && apt-get update -y && apt-get install google-cloud-sdk -y\n\n#install kubeaudit https://github.com/Shopify/kubeaudit/tags\nCOPY --from=shopify/kubeaudit:v0.16 /kubeaudit /usr/local/bin/kubeaudit\n\n#install trivy https://github.com/aquasecurity/trivy/tags\nCOPY --from=aquasec/trivy:0.21.0 /usr/local/bin/trivy /usr/local/bin/trivy\n\nCOPY requirements.txt requirements.txt\nRUN pip install --no-cache-dir -r requirements.txt\n\nRUN apk del curl\n\nCOPY app/ app/"},"repairedBuild":{"startTime":1672893770010,"endTime":1672893786983,"error":null,"stdout":"Sending build context to Docker daemon  477.2kB\r\r\nStep 1/12 : FROM python:3.10-alpine\n ---> 2527f31628e7\nStep 2/12 : ARG KUBECTL_VERSION=\"v1.17.0\"\n ---> Running in 2be5ec6ef6ec\nRemoving intermediate container 2be5ec6ef6ec\n ---> 442812c0ca5f\nStep 3/12 : ENV KUBECONFIG=\"/kube.config\"\n ---> Running in b7b7af50d693\nRemoving intermediate container b7b7af50d693\n ---> 0302a916ba92\nStep 4/12 : RUN apk --no-cache add curl\n ---> Running in 7d4593d9e81d\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/4) Installing brotli-libs (1.0.9-r9)\n(2/4) Installing nghttp2-libs (1.51.0-r0)\n(3/4) Installing libcurl (7.87.0-r0)\n(4/4) Installing curl (7.87.0-r0)\nExecuting busybox-1.35.0-r29.trigger\nOK: 17 MiB in 41 packages\nRemoving intermediate container 7d4593d9e81d\n ---> 57eae8431ff2\nStep 5/12 : RUN apk --no-cache add rpm\n ---> Running in fbabee237e3a\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/14) Installing libacl (2.3.1-r1)\n(2/14) Installing lz4-libs (1.9.4-r1)\n(3/14) Installing zstd-libs (1.5.2-r9)\n(4/14) Installing libarchive (3.6.1-r2)\n(5/14) Installing libcap2 (2.66-r0)\n(6/14) Installing musl-fts (1.2.7-r3)\n(7/14) Installing libelf (0.187-r2)\n(8/14) Installing libgpg-error (1.46-r1)\n(9/14) Installing libgcrypt (1.10.1-r0)\n(10/14) Installing libgomp (12.2.1_git20220924-r4)\n(11/14) Installing lua5.4-libs (5.4.4-r6)\n(12/14) Installing libmagic (5.43-r0)\n(13/14) Installing popt (1.19-r0)\n(14/14) Installing rpm (4.18.0-r1)\nExecuting busybox-1.35.0-r29.trigger\nOK: 31 MiB in 55 packages\nRemoving intermediate container fbabee237e3a\n ---> 5cf9103aedac\nStep 6/12 : RUN echo https://storage.googleapis.com/kubernetes-release/release/${KUBECTL_VERSION}/bin/linux/amd64/kubectl; curl -f -LO https://storage.googleapis.com/kubernetes-release/release/${KUBECTL_VERSION}/bin/linux/amd64/kubectl; chmod +x ./kubectl && mv ./kubectl /usr/local/bin/kubectl\n ---> Running in 489bbc1e9622\nhttps://storage.googleapis.com/kubernetes-release/release/v1.17.0/bin/linux/amd64/kubectl\n\u001b[91m  % Total    % Received % Xferd  Av\u001b[0m\u001b[91merage Speed   Time    Time     Time\u001b[0m\u001b[91m  Current\n   \u001b[0m\u001b[91m      \u001b[0m\u001b[91m           \u001b[0m\u001b[91m             Dlo\u001b[0m\u001b[91mad \u001b[0m\u001b[91m Up\u001b[0m\u001b[91mloa\u001b[0m\u001b[91md   \u001b[0m\u001b[91mTotal   Spent    Le\u001b[0m\u001b[91mft  Speed\n\u001b[0m\u001b[91m\r  0\u001b[0m\u001b[91m   \u001b[0m\u001b[91m  0   \u001b[0m\u001b[91m 0    \u001b[0m\u001b[91m 0    0 \u001b[0m\u001b[91m    0 \u001b[0m\u001b[91m  \u001b[0m\u001b[91m   0\u001b[0m\u001b[91m   \u001b[0m\u001b[91m   0 -\u001b[0m\u001b[91m-:--:-- --:--:-\u001b[0m\u001b[91m- --:-\u001b[0m\u001b[91m-:--  \u001b[0m\u001b[91m   0\u001b[0m\u001b[91m\r 18 41.4M   18 7821k    0     0  13.8M      0  0:00:02 --:--:--  0:00:02 13.8M\u001b[0m\u001b[91m\r100 41.4M  100 41.4M    0     0  48.2M      0\u001b[0m\u001b[91m --:--:-- --:-\u001b[0m\u001b[91m-:-- --:--\u001b[0m\u001b[91m:-- 4\u001b[0m\u001b[91m8.2M\n\u001b[0mRemoving intermediate container 489bbc1e9622\n ---> d6cb28d881d9\nStep 7/12 : COPY --from=shopify/kubeaudit:v0.16 /kubeaudit /usr/local/bin/kubeaudit\n ---> 64b364a244bd\nStep 8/12 : COPY --from=aquasec/trivy:0.21.0 /usr/local/bin/trivy /usr/local/bin/trivy\n ---> 3920f99ee605\nStep 9/12 : COPY requirements.txt requirements.txt\n ---> 1374080a7420\nStep 10/12 : RUN pip install --no-cache-dir -r requirements.txt\n ---> Running in 4b3059c31e94\nCollecting requests>=2.23.0\n  Downloading requests-2.28.1-py3-none-any.whl (62 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 62.8/62.8 kB 9.9 MB/s eta 0:00:00\nCollecting urllib3>=1.25.9\n  Downloading urllib3-1.26.13-py2.py3-none-any.whl (140 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 140.6/140.6 kB 212.0 MB/s eta 0:00:00\nCollecting cvss==2.3\n  Downloading cvss-2.3-py2.py3-none-any.whl (20 kB)\nCollecting certifi>=2017.4.17\n  Downloading certifi-2022.12.7-py3-none-any.whl (155 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 155.3/155.3 kB 240.0 MB/s eta 0:00:00\nCollecting charset-normalizer<3,>=2\n  Downloading charset_normalizer-2.1.1-py3-none-any.whl (39 kB)\nCollecting idna<4,>=2.5\n  Downloading idna-3.4-py3-none-any.whl (61 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 61.5/61.5 kB 219.7 MB/s eta 0:00:00\nInstalling collected packages: cvss, urllib3, idna, charset-normalizer, certifi, requests\nSuccessfully installed certifi-2022.12.7 charset-normalizer-2.1.1 cvss-2.3 idna-3.4 requests-2.28.1 urllib3-1.26.13\n\u001b[91mWARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv\n\u001b[0mRemoving intermediate container 4b3059c31e94\n ---> c0b1d1b5655e\nStep 11/12 : RUN apk del curl\n ---> Running in 1b76e781c9f4\n\u001b[91mWARNING: Ignoring https://dl-cdn.alpinelinux.org/alpine/v3.17/main: No such file or directory\nWARNING: Ignoring https://dl-cdn.alpinelinux.org/alpine/v3.17/community: No such file or directory\n\u001b[0m(1/4) Purging curl (7.87.0-r0)\n(2/4) Purging libcurl (7.87.0-r0)\n(3/4) Purging brotli-libs (1.0.9-r9)\n(4/4) Purging nghttp2-libs (1.51.0-r0)\nExecuting busybox-1.35.0-r29.trigger\nOK: 29 MiB in 51 packages\nRemoving intermediate container 1b76e781c9f4\n ---> eb206cfc4af9\nStep 12/12 : COPY app/ app/\n ---> e4336cd10cd0\nSuccessfully built e4336cd10cd0\nSuccessfully tagged klustair:latest\n","stderr":"","imageSize":194783094}}