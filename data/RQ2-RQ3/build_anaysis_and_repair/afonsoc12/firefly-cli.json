{"repository":"https://github.com/afonsoc12/firefly-cli","dockerfilePath":"Dockerfile","startTime":1672491147779,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/afonsoc12/firefly-cli'...\n","error":null,"commit":"7abe45c7a86de1eb9511eaba0d2cba276371f706"},"originalBuild":{"startTimestamp":1672491148641,"endTimestamp":1672491206393,"error":null,"stdout":"Sending build context to Docker daemon    382kB\r\r\nStep 1/14 : ARG DOCKER_IMAGE=python:3.9-alpine     USER=nonroot     GROUP=nonroot     UID=1234     GID=4321\nStep 2/14 : FROM $DOCKER_IMAGE AS install-image\n3.9-alpine: Pulling from library/python\nc158987b0551: Already exists\n7ec3a91b66d9: Pulling fs layer\na3a2c937b8a7: Pulling fs layer\n25083a7b8521: Pulling fs layer\ne2f7f5886088: Pulling fs layer\ne2f7f5886088: Waiting\n25083a7b8521: Verifying Checksum\n25083a7b8521: Download complete\n7ec3a91b66d9: Verifying Checksum\n7ec3a91b66d9: Download complete\na3a2c937b8a7: Verifying Checksum\na3a2c937b8a7: Download complete\ne2f7f5886088: Verifying Checksum\ne2f7f5886088: Download complete\n7ec3a91b66d9: Pull complete\na3a2c937b8a7: Pull complete\n25083a7b8521: Pull complete\ne2f7f5886088: Pull complete\nDigest: sha256:8ea03bf88df73d21c72b3a941d1337c54357ee6386c2824f90b39a007792d1bb\nStatus: Downloaded newer image for python:3.9-alpine\n ---> d6d1ed462b20\nStep 3/14 : WORKDIR /app\n ---> Running in dbbffbf13586\nRemoving intermediate container dbbffbf13586\n ---> 8686a35eff94\nStep 4/14 : COPY . .\n ---> 82d6d6e06205\nStep 5/14 : RUN apk add --no-cache tzdata git     && pip install --no-cache-dir --upgrade pip     && pip install --user --no-cache-dir .\n ---> Running in 15c6cc5e83ae\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/5) Installing brotli-libs (1.0.9-r9)\n(2/5) Installing nghttp2-libs (1.51.0-r0)\n(3/5) Installing libcurl (7.87.0-r0)\n(4/5) Installing pcre2 (10.42-r0)\n(5/5) Installing git (2.38.2-r0)\nExecuting busybox-1.35.0-r29.trigger\nOK: 24 MiB in 42 packages\nRequirement already satisfied: pip in /usr/local/lib/python3.9/site-packages (22.0.4)\nCollecting pip\n  Downloading pip-22.3.1-py3-none-any.whl (2.1 MB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 2.1/2.1 MB 52.6 MB/s eta 0:00:00\nInstalling collected packages: pip\n  Attempting uninstall: pip\n    Found existing installation: pip 22.0.4\n    Uninstalling pip-22.0.4:\n      Successfully uninstalled pip-22.0.4\nSuccessfully installed pip-22.3.1\n\u001b[91mWARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv\n\u001b[0mProcessing /app\n  Preparing metadata (setup.py): started\n  Preparing metadata (setup.py): finished with status 'done'\nCollecting cmd2<3,>=2.4.1\n  Downloading cmd2-2.4.2-py3-none-any.whl (147 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 147.1/147.1 kB 19.8 MB/s eta 0:00:00\nCollecting requests-cache<1,>=0.9.4\n  Downloading requests_cache-0.9.7-py3-none-any.whl (48 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 48.5/48.5 kB 115.7 MB/s eta 0:00:00\nCollecting tabulate<1,>=0.8.9\n  Downloading tabulate-0.9.0-py3-none-any.whl (35 kB)\nCollecting pyxdg<1,>=0.28\n  Downloading pyxdg-0.28-py2.py3-none-any.whl (49 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 49.5/49.5 kB 81.0 MB/s eta 0:00:00\nCollecting wcwidth>=0.1.7\n  Downloading wcwidth-0.2.5-py2.py3-none-any.whl (30 kB)\nCollecting attrs>=16.3.0\n  Downloading attrs-22.2.0-py3-none-any.whl (60 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 60.0/60.0 kB 67.3 MB/s eta 0:00:00\nCollecting pyperclip>=1.6\n  Downloading pyperclip-1.8.2.tar.gz (20 kB)\n  Preparing metadata (setup.py): started\n  Preparing metadata (setup.py): finished with status 'done'\nCollecting requests>=2.22\n  Downloading requests-2.28.1-py3-none-any.whl (62 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 62.8/62.8 kB 97.9 MB/s eta 0:00:00\nCollecting cattrs>=22.2\n  Downloading cattrs-22.2.0-py3-none-any.whl (35 kB)\nCollecting urllib3>=1.25.5\n  Downloading urllib3-1.26.13-py2.py3-none-any.whl (140 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 140.6/140.6 kB 92.1 MB/s eta 0:00:00\nCollecting appdirs>=1.4.4\n  Downloading appdirs-1.4.4-py2.py3-none-any.whl (9.6 kB)\nCollecting url-normalize>=1.4\n  Downloading url_normalize-1.4.3-py2.py3-none-any.whl (6.8 kB)\nCollecting exceptiongroup\n  Downloading exceptiongroup-1.1.0-py3-none-any.whl (14 kB)\nCollecting certifi>=2017.4.17\n  Downloading certifi-2022.12.7-py3-none-any.whl (155 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 155.3/155.3 kB 250.9 MB/s eta 0:00:00\nCollecting idna<4,>=2.5\n  Downloading idna-3.4-py3-none-any.whl (61 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 61.5/61.5 kB 203.0 MB/s eta 0:00:00\nCollecting charset-normalizer<3,>=2\n  Downloading charset_normalizer-2.1.1-py3-none-any.whl (39 kB)\nCollecting six\n  Downloading six-1.16.0-py2.py3-none-any.whl (11 kB)\nBuilding wheels for collected packages: firefly-cli, pyperclip\n  Building wheel for firefly-cli (setup.py): started\n  Building wheel for firefly-cli (setup.py): finished with status 'done'\n  Created wheel for firefly-cli: filename=firefly_cli-0.post0.dev1-py3-none-any.whl size=16233 sha256=e2c817a07384bd578a3ba82cd459544150042bbde7501c90a9fb658d0580c948\n  Stored in directory: /tmp/pip-ephem-wheel-cache-m0uga6_u/wheels/48/5b/9e/815b53f5a8df8525f516b542a370cd64ff3531d89e06062b64\n  Building wheel for pyperclip (setup.py): started\n  Building wheel for pyperclip (setup.py): finished with status 'done'\n  Created wheel for pyperclip: filename=pyperclip-1.8.2-py3-none-any.whl size=11136 sha256=3801ac0beb194469d5850d1a2744e490832c9c338c34d1121bbb5251f7b0ada7\n  Stored in directory: /tmp/pip-ephem-wheel-cache-m0uga6_u/wheels/23/12/dd/067d543d895c9036459c68b02a9dcd66c7aad675ef90cbd3ab\nSuccessfully built firefly-cli pyperclip\nInstalling collected packages: wcwidth, pyxdg, pyperclip, appdirs, urllib3, tabulate, six, idna, exceptiongroup, charset-normalizer, certifi, attrs, url-normalize, requests, cmd2, cattrs, requests-cache, firefly-cli\n\u001b[91m  WARNING: The script tabulate is installed in '/root/.local/bin' which is not on PATH.\n  Consider adding this directory to PATH or, if you prefer to suppress this warning, use --no-warn-script-location.\n\u001b[0m\u001b[91m  WARNING: The script normalizer is installed in '/root/.local/bin' which is not on PATH.\n  Consider adding this directory to PATH or, if you prefer to suppress this warning, use --no-warn-script-location.\n\u001b[0m\u001b[91m  WARNING: The script firefly-cli is installed in '/root/.local/bin' which is not on PATH.\n  Consider adding this directory to PATH or, if you prefer to suppress this warning, use --no-warn-script-location.\n\u001b[0mSuccessfully installed appdirs-1.4.4 attrs-22.2.0 cattrs-22.2.0 certifi-2022.12.7 charset-normalizer-2.1.1 cmd2-2.4.2 exceptiongroup-1.1.0 firefly-cli-0.post0.dev1 idna-3.4 pyperclip-1.8.2 pyxdg-0.28 requests-2.28.1 requests-cache-0.9.7 six-1.16.0 tabulate-0.9.0 url-normalize-1.4.3 urllib3-1.26.13 wcwidth-0.2.5\n\u001b[91mWARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv\n\u001b[0mRemoving intermediate container 15c6cc5e83ae\n ---> 56d42777aa30\nStep 6/14 : FROM $DOCKER_IMAGE AS runtime-image\n ---> d6d1ed462b20\nStep 7/14 : ARG USER     GROUP     UID     GID\n ---> Running in 22c0f7d63ab6\nRemoving intermediate container 22c0f7d63ab6\n ---> c799c4068988\nStep 8/14 : ENV PATH=\"/home/.local/bin:$PATH\"     XDG_CONFIG_HOME=/config     PYTHONDONTWRITEBYTECODE=1     PYTHONUNBUFFERED=1\n ---> Running in c65a58dc0db9\nRemoving intermediate container c65a58dc0db9\n ---> dabb64766cfb\nStep 9/14 : RUN mkdir -p /home $XDG_CONFIG_HOME     && addgroup --gid $GID $GROUP     && adduser -D -H --gecos \"\"                      --home \"/home\"                      --ingroup \"$GROUP\"                      --uid \"$UID\"                      \"$USER\"     && chown -R $USER:$GROUP /home $XDG_CONFIG_HOME     && rm -rf /tmp/* /var/{cache,log}/* /var/lib/apt/lists/*\n ---> Running in ed872c53e1bd\nRemoving intermediate container ed872c53e1bd\n ---> 59dd0e4e9e0c\nStep 10/14 : USER nonroot\n ---> Running in 65564aacce06\nRemoving intermediate container 65564aacce06\n ---> a6728c235ea3\nStep 11/14 : WORKDIR /home\n ---> Running in cedcfa41c338\nRemoving intermediate container cedcfa41c338\n ---> f11e253fd6e4\nStep 12/14 : COPY --from=install-image --chown=$USER:$GROUP /root/.local /home/.local\n ---> 35ffc092fbc7\nStep 13/14 : VOLUME /config\n ---> Running in c71337ded829\nRemoving intermediate container c71337ded829\n ---> 48f246b9db05\nStep 14/14 : ENTRYPOINT [\"firefly-cli\"]\n ---> Running in 493659a8fd35\nRemoving intermediate container 493659a8fd35\n ---> dbd09210bfb4\nSuccessfully built dbd09210bfb4\nSuccessfully tagged firefly-cli:latest\n","stderr":"","imageSize":53931657},"repair":{"violations":[],"repairedDockerfile":"ARG DOCKER_IMAGE=python:3.9-alpine \\\n    USER=nonroot \\\n    GROUP=nonroot \\\n    UID=1234 \\\n    GID=4321\n\n# Install image\nFROM $DOCKER_IMAGE AS install-image\n\nWORKDIR /app\n\nCOPY . .\n\nRUN apk add --no-cache tzdata git \\\n    && pip install --no-cache-dir --upgrade pip \\\n    && pip install --user --no-cache-dir .\n\n# Runtime image\nFROM $DOCKER_IMAGE AS runtime-image\n\nARG USER \\\n    GROUP \\\n    UID \\\n    GID\n\nENV PATH=\"/home/.local/bin:$PATH\" \\\n    XDG_CONFIG_HOME=/config \\\n    PYTHONDONTWRITEBYTECODE=1 \\\n    PYTHONUNBUFFERED=1\n\nRUN mkdir -p /home $XDG_CONFIG_HOME \\\n    && addgroup --gid $GID $GROUP \\\n    && adduser -D \\\n                     \"/home\" -H --gecos \"\" \\\n                     --home \\\n                     --ingroup \"$GROUP\" \\\n                     --uid \"$UID\" \\\n                     \"$USER\" \\\n    && chown -R $USER:$GROUP /home $XDG_CONFIG_HOME \\\n    && rm -rf /tmp/* /var/{cache,log}/* /var/lib/apt/lists/*\n\nUSER nonroot\nWORKDIR /home\n\nCOPY --from=install-image --chown=$USER:$GROUP /root/.local /home/.local\n\nVOLUME /config\n\nENTRYPOINT [\"firefly-cli\"]\n"},"endTime":1672491207219}