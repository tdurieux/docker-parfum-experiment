{"repository":"https://github.com/ava-labs/avalanchego","dockerfilePath":"Dockerfile","startTime":1672645609025,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/ava-labs/avalanchego'...\n","error":null,"commit":"609bc7d3667cb1f94aadbdb6161bf65b6b6b48c6"},"originalBuild":{"startTimestamp":1672645610687,"endTimestamp":1672645727508,"error":null,"stdout":"Sending build context to Docker daemon  14.66MB\r\r\nStep 1/13 : FROM golang:1.18.5-buster AS builder\n1.18.5-buster: Pulling from library/golang\n76dff75df4d9: Pulling fs layer\n3e8c90a1c4bb: Pulling fs layer\nb3662c105080: Pulling fs layer\nad5dcb7dd592: Pulling fs layer\n5752150a0cf9: Pulling fs layer\n8d7d8bc43bff: Pulling fs layer\n699b52b4a1e6: Pulling fs layer\n5752150a0cf9: Waiting\nad5dcb7dd592: Waiting\n699b52b4a1e6: Waiting\n8d7d8bc43bff: Waiting\nb3662c105080: Verifying Checksum\nb3662c105080: Download complete\n3e8c90a1c4bb: Verifying Checksum\n3e8c90a1c4bb: Download complete\n76dff75df4d9: Verifying Checksum\n76dff75df4d9: Download complete\n5752150a0cf9: Verifying Checksum\n5752150a0cf9: Download complete\nad5dcb7dd592: Verifying Checksum\nad5dcb7dd592: Download complete\n699b52b4a1e6: Verifying Checksum\n699b52b4a1e6: Download complete\n8d7d8bc43bff: Verifying Checksum\n8d7d8bc43bff: Download complete\n76dff75df4d9: Pull complete\n3e8c90a1c4bb: Pull complete\nb3662c105080: Pull complete\nad5dcb7dd592: Pull complete\n5752150a0cf9: Pull complete\n8d7d8bc43bff: Pull complete\n699b52b4a1e6: Pull complete\nDigest: sha256:9a09cc3b632949d98583e8f24f5f66a055397176bf8440f7333876ac101f4a3a\nStatus: Downloaded newer image for golang:1.18.5-buster\n ---> a798dce34acd\nStep 2/13 : RUN apt-get update && apt-get install -y --no-install-recommends bash=5.0-4 git=1:2.20.1-2+deb10u3 make=4.2.1-1.2 gcc=4:8.3.0-1 musl-dev=1.1.21-2 ca-certificates=20200601~deb10u2 linux-headers-amd64\n ---> Running in 35abd4638392\nGet:1 http://deb.debian.org/debian buster InRelease [122 kB]\nGet:2 http://deb.debian.org/debian-security buster/updates InRelease [34.8 kB]\nGet:3 http://deb.debian.org/debian buster-updates InRelease [56.6 kB]\nGet:4 http://deb.debian.org/debian buster/main amd64 Packages [7909 kB]\nGet:5 http://deb.debian.org/debian-security buster/updates/main amd64 Packages [422 kB]\nGet:6 http://deb.debian.org/debian buster-updates/main amd64 Packages [8788 B]\nFetched 8553 kB in 2s (5646 kB/s)\nReading package lists...\nReading package lists...\nBuilding dependency tree...\nReading state information...\nbash is already the newest version (5.0-4).\nbash set to manually installed.\nca-certificates is already the newest version (20200601~deb10u2).\ngcc is already the newest version (4:8.3.0-1).\ngit is already the newest version (1:2.20.1-2+deb10u3).\nmake is already the newest version (4.2.1-1.2).\nRecommended packages:\n  linux-musl-dev\nThe following NEW packages will be installed:\n  linux-compiler-gcc-8-x86 linux-headers-4.19.0-23-amd64\n  linux-headers-4.19.0-23-common linux-headers-amd64 linux-kbuild-4.19 musl\n  musl-dev\n0 upgraded, 7 newly installed, 0 to remove and 26 not upgraded.\nNeed to get 12.2 MB of archives.\nAfter this operation, 62.9 MB of additional disk space will be used.\nGet:1 http://deb.debian.org/debian-security buster/updates/main amd64 linux-compiler-gcc-8-x86 amd64 4.19.269-1 [635 kB]\nGet:2 http://deb.debian.org/debian-security buster/updates/main amd64 linux-headers-4.19.0-23-common all 4.19.269-1 [8596 kB]\nGet:3 http://deb.debian.org/debian-security buster/updates/main amd64 linux-kbuild-4.19 amd64 4.19.269-1 [868 kB]\nGet:4 http://deb.debian.org/debian-security buster/updates/main amd64 linux-headers-4.19.0-23-amd64 amd64 4.19.269-1 [1119 kB]\nGet:5 http://deb.debian.org/debian-security buster/updates/main amd64 linux-headers-amd64 amd64 4.19+105+deb10u18 [7048 B]\nGet:6 http://deb.debian.org/debian buster/main amd64 musl amd64 1.1.21-2 [398 kB]\nGet:7 http://deb.debian.org/debian buster/main amd64 musl-dev amd64 1.1.21-2 [578 kB]\n\u001b[91mdebconf: delaying package configuration, since apt-utils is not installed\n\u001b[0mFetched 12.2 MB in 0s (57.2 MB/s)\nSelecting previously unselected package linux-compiler-gcc-8-x86.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 15421 files and directories currently installed.)\r\nPreparing to unpack .../0-linux-compiler-gcc-8-x86_4.19.269-1_amd64.deb ...\r\nUnpacking linux-compiler-gcc-8-x86 (4.19.269-1) ...\r\nSelecting previously unselected package linux-headers-4.19.0-23-common.\r\nPreparing to unpack .../1-linux-headers-4.19.0-23-common_4.19.269-1_all.deb ...\r\nUnpacking linux-headers-4.19.0-23-common (4.19.269-1) ...\r\nSelecting previously unselected package linux-kbuild-4.19.\r\nPreparing to unpack .../2-linux-kbuild-4.19_4.19.269-1_amd64.deb ...\r\nUnpacking linux-kbuild-4.19 (4.19.269-1) ...\r\nSelecting previously unselected package linux-headers-4.19.0-23-amd64.\r\nPreparing to unpack .../3-linux-headers-4.19.0-23-amd64_4.19.269-1_amd64.deb ...\r\nUnpacking linux-headers-4.19.0-23-amd64 (4.19.269-1) ...\r\nSelecting previously unselected package linux-headers-amd64.\r\nPreparing to unpack .../4-linux-headers-amd64_4.19+105+deb10u18_amd64.deb ...\r\nUnpacking linux-headers-amd64 (4.19+105+deb10u18) ...\r\nSelecting previously unselected package musl:amd64.\r\nPreparing to unpack .../5-musl_1.1.21-2_amd64.deb ...\r\nUnpacking musl:amd64 (1.1.21-2) ...\r\nSelecting previously unselected package musl-dev:amd64.\r\nPreparing to unpack .../6-musl-dev_1.1.21-2_amd64.deb ...\r\nUnpacking musl-dev:amd64 (1.1.21-2) ...\r\nSetting up linux-compiler-gcc-8-x86 (4.19.269-1) ...\r\nSetting up linux-headers-4.19.0-23-common (4.19.269-1) ...\r\nSetting up linux-kbuild-4.19 (4.19.269-1) ...\r\nSetting up musl:amd64 (1.1.21-2) ...\r\nSetting up linux-headers-4.19.0-23-amd64 (4.19.269-1) ...\r\nSetting up linux-headers-amd64 (4.19+105+deb10u18) ...\r\nSetting up musl-dev:amd64 (1.1.21-2) ...\r\nRemoving intermediate container 35abd4638392\n ---> 570b591d9bc8\nStep 3/13 : WORKDIR /build\n ---> Running in c1d594498552\nRemoving intermediate container c1d594498552\n ---> 3850ddd9ad66\nStep 4/13 : COPY go.mod .\n ---> 364b3a4050f2\nStep 5/13 : COPY go.sum .\n ---> e23ebb765075\nStep 6/13 : RUN go mod download\n ---> Running in 00d29e215c50\nRemoving intermediate container 00d29e215c50\n ---> d08c2c56b478\nStep 7/13 : COPY . .\n ---> 6e1319c66680\nStep 8/13 : RUN ./scripts/build.sh\n ---> Running in b341a3b6c410\nDownloading dependencies...\nBuilding AvalancheGo...\nBuilding Coreth @ v0.11.5-rc.0 ...\n\u001b[91mgo: downloading github.com/ava-labs/avalanchego v1.9.5-rc.7\n\u001b[0m\u001b[91mgo: downloading github.com/jhump/protoreflect v1.6.0\ngo: downloading github.com/onsi/ginkgo v1.16.5\n\u001b[0m\u001b[91mgo: downloading go.uber.org/goleak v1.1.12\n\u001b[0m\u001b[91mgo: downloading github.com/BurntSushi/toml v0.3.1\n\u001b[0m\u001b[91mgo: downloading github.com/frankban/quicktest v1.14.3\n\u001b[0m\u001b[91mgo: downloading github.com/decred/dcrd/chaincfg/chainhash v1.0.2\n\u001b[0m\u001b[91mgo: downloading gopkg.in/check.v1 v1.0.0-20190902080502-41f04d3bba15\n\u001b[0m\u001b[91mgo: downloading github.com/cespare/cp v0.1.0\n\u001b[0m\u001b[91mgo: downloading github.com/golang/glog v1.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/allegro/bigcache v1.2.1-0.20190218064605-e24eb225f156\n\u001b[0m\u001b[91mgo: downloading github.com/kr/pretty v0.3.0\n\u001b[0m\u001b[91mgo: downloading github.com/rogpeppe/go-internal v1.6.1\ngo: downloading github.com/kr/text v0.2.0\n\u001b[0m\u001b[91mgo: downloading github.com/nxadm/tail v1.4.8\n\u001b[0m\u001b[91mgo: downloading gopkg.in/tomb.v1 v1.0.0-20141024135613-dd632973f1e7\n\u001b[0mBuild Successful\nRemoving intermediate container b341a3b6c410\n ---> 0f884a7d05e0\nStep 9/13 : FROM debian:11-slim AS execution\n11-slim: Pulling from library/debian\n3f4ca61aafcd: Already exists\nDigest: sha256:171530d298096f0697da36b3324182e872db77c66452b85783ea893680cc1b62\nStatus: Downloaded newer image for debian:11-slim\n ---> dd94cb611937\nStep 10/13 : RUN mkdir -p /avalanchego/build\n ---> Running in 363fb8f86567\nRemoving intermediate container 363fb8f86567\n ---> 68a60f389273\nStep 11/13 : WORKDIR /avalanchego/build\n ---> Running in 1ec264fe007a\nRemoving intermediate container 1ec264fe007a\n ---> b48d788dccae\nStep 12/13 : COPY --from=builder /build/build/ .\n ---> b49df12247e2\nStep 13/13 : CMD [ \"./avalanchego\" ]\n ---> Running in 90f6eb91e0bc\nRemoving intermediate container 90f6eb91e0bc\n ---> ab16567184c4\nSuccessfully built ab16567184c4\nSuccessfully tagged avalanchego:latest\n","stderr":"","imageSize":179095169},"repair":{"violations":[{"name":"ruleAptGetInstallThenRemoveAptLists","position":{"start":8,"end":8,"columnStart":22,"columnEnd":198}}],"repairedDockerfile":"# Changes to the minimum golang version must also be replicated in\n# scripts/build_avalanche.sh\n# scripts/local.Dockerfile\n# Dockerfile (here)\n# README.md\n# go.mod\n# ============= Compilation Stage ================\nFROM golang:1.18.5-buster AS builder\nRUN apt-get update && apt-get install -y --no-install-recommends bash=5.0-4 git=1:2.20.1-2+deb10u3 make=4.2.1-1.2 gcc=4:8.3.0-1 musl-dev=1.1.21-2 ca-certificates=20200601~deb10u2 linux-headers-amd64\n\nWORKDIR /build\n# Copy and download avalanche dependencies using go mod\nCOPY go.mod .\nCOPY go.sum .\nRUN go mod download\n\n# Copy the code into the container\nCOPY . .\n\n# Build avalanchego and plugins\nRUN ./scripts/build.sh\n\n# ============= Cleanup Stage ================\nFROM debian:11-slim AS execution\n\n# Maintain compatibility with previous images\nRUN mkdir -p /avalanchego/build\nWORKDIR /avalanchego/build\n\n# Copy the executables into the container\nCOPY --from=builder /build/build/ .\n\nCMD [ \"./avalanchego\" ]\n"},"repairedBuild":{"startTimestamp":1672645727841,"endTimestamp":1672645816555,"error":null,"stdout":"Sending build context to Docker daemon  14.66MB\r\r\nStep 1/13 : FROM golang:1.18.5-buster AS builder\n ---> a798dce34acd\nStep 2/13 : RUN apt-get update && apt-get install -y --no-install-recommends bash=5.0-4 git=1:2.20.1-2+deb10u3 make=4.2.1-1.2 gcc=4:8.3.0-1 musl-dev=1.1.21-2 ca-certificates=20200601~deb10u2 linux-headers-amd64\n ---> Running in 8cf986732d8a\nGet:1 http://deb.debian.org/debian buster InRelease [122 kB]\nGet:2 http://deb.debian.org/debian-security buster/updates InRelease [34.8 kB]\nGet:3 http://deb.debian.org/debian buster-updates InRelease [56.6 kB]\nGet:4 http://deb.debian.org/debian buster/main amd64 Packages [7909 kB]\nGet:5 http://deb.debian.org/debian-security buster/updates/main amd64 Packages [422 kB]\nGet:6 http://deb.debian.org/debian buster-updates/main amd64 Packages [8788 B]\nFetched 8553 kB in 1s (5875 kB/s)\nReading package lists...\nReading package lists...\nBuilding dependency tree...\nReading state information...\nbash is already the newest version (5.0-4).\nbash set to manually installed.\nca-certificates is already the newest version (20200601~deb10u2).\ngcc is already the newest version (4:8.3.0-1).\ngit is already the newest version (1:2.20.1-2+deb10u3).\nmake is already the newest version (4.2.1-1.2).\nRecommended packages:\n  linux-musl-dev\nThe following NEW packages will be installed:\n  linux-compiler-gcc-8-x86 linux-headers-4.19.0-23-amd64\n  linux-headers-4.19.0-23-common linux-headers-amd64 linux-kbuild-4.19 musl\n  musl-dev\n0 upgraded, 7 newly installed, 0 to remove and 26 not upgraded.\nNeed to get 12.2 MB of archives.\nAfter this operation, 62.9 MB of additional disk space will be used.\nGet:1 http://deb.debian.org/debian-security buster/updates/main amd64 linux-compiler-gcc-8-x86 amd64 4.19.269-1 [635 kB]\nGet:2 http://deb.debian.org/debian-security buster/updates/main amd64 linux-headers-4.19.0-23-common all 4.19.269-1 [8596 kB]\nGet:3 http://deb.debian.org/debian-security buster/updates/main amd64 linux-kbuild-4.19 amd64 4.19.269-1 [868 kB]\nGet:4 http://deb.debian.org/debian-security buster/updates/main amd64 linux-headers-4.19.0-23-amd64 amd64 4.19.269-1 [1119 kB]\nGet:5 http://deb.debian.org/debian-security buster/updates/main amd64 linux-headers-amd64 amd64 4.19+105+deb10u18 [7048 B]\nGet:6 http://deb.debian.org/debian buster/main amd64 musl amd64 1.1.21-2 [398 kB]\nGet:7 http://deb.debian.org/debian buster/main amd64 musl-dev amd64 1.1.21-2 [578 kB]\n\u001b[91mdebconf: delaying package configuration, since apt-utils is not installed\n\u001b[0mFetched 12.2 MB in 1s (17.5 MB/s)\nSelecting previously unselected package linux-compiler-gcc-8-x86.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 15421 files and directories currently installed.)\r\nPreparing to unpack .../0-linux-compiler-gcc-8-x86_4.19.269-1_amd64.deb ...\r\nUnpacking linux-compiler-gcc-8-x86 (4.19.269-1) ...\r\nSelecting previously unselected package linux-headers-4.19.0-23-common.\r\nPreparing to unpack .../1-linux-headers-4.19.0-23-common_4.19.269-1_all.deb ...\r\nUnpacking linux-headers-4.19.0-23-common (4.19.269-1) ...\r\nSelecting previously unselected package linux-kbuild-4.19.\r\nPreparing to unpack .../2-linux-kbuild-4.19_4.19.269-1_amd64.deb ...\r\nUnpacking linux-kbuild-4.19 (4.19.269-1) ...\r\nSelecting previously unselected package linux-headers-4.19.0-23-amd64.\r\nPreparing to unpack .../3-linux-headers-4.19.0-23-amd64_4.19.269-1_amd64.deb ...\r\nUnpacking linux-headers-4.19.0-23-amd64 (4.19.269-1) ...\r\nSelecting previously unselected package linux-headers-amd64.\r\nPreparing to unpack .../4-linux-headers-amd64_4.19+105+deb10u18_amd64.deb ...\r\nUnpacking linux-headers-amd64 (4.19+105+deb10u18) ...\r\nSelecting previously unselected package musl:amd64.\r\nPreparing to unpack .../5-musl_1.1.21-2_amd64.deb ...\r\nUnpacking musl:amd64 (1.1.21-2) ...\r\nSelecting previously unselected package musl-dev:amd64.\r\nPreparing to unpack .../6-musl-dev_1.1.21-2_amd64.deb ...\r\nUnpacking musl-dev:amd64 (1.1.21-2) ...\r\nSetting up linux-compiler-gcc-8-x86 (4.19.269-1) ...\r\nSetting up linux-headers-4.19.0-23-common (4.19.269-1) ...\r\nSetting up linux-kbuild-4.19 (4.19.269-1) ...\r\nSetting up musl:amd64 (1.1.21-2) ...\r\nSetting up linux-headers-4.19.0-23-amd64 (4.19.269-1) ...\r\nSetting up linux-headers-amd64 (4.19+105+deb10u18) ...\r\nSetting up musl-dev:amd64 (1.1.21-2) ...\r\nRemoving intermediate container 8cf986732d8a\n ---> 34f17b76c950\nStep 3/13 : WORKDIR /build\n ---> Running in 6ad5b48caa7e\nRemoving intermediate container 6ad5b48caa7e\n ---> a5fb3446e124\nStep 4/13 : COPY go.mod .\n ---> 9fe2296767b3\nStep 5/13 : COPY go.sum .\n ---> 8b5b134e492a\nStep 6/13 : RUN go mod download\n ---> Running in 9ccdf548993c\nRemoving intermediate container 9ccdf548993c\n ---> 52acd94bb8a4\nStep 7/13 : COPY . .\n ---> 74066c640b33\nStep 8/13 : RUN ./scripts/build.sh\n ---> Running in a6bfdf58933b\nDownloading dependencies...\nBuilding AvalancheGo...\nBuilding Coreth @ v0.11.5-rc.0 ...\n\u001b[91mgo: downloading github.com/ava-labs/avalanchego v1.9.5-rc.7\n\u001b[0m\u001b[91mgo: downloading github.com/onsi/ginkgo v1.16.5\n\u001b[0m\u001b[91mgo: downloading github.com/jhump/protoreflect v1.6.0\n\u001b[0m\u001b[91mgo: downloading github.com/BurntSushi/toml v0.3.1\n\u001b[0m\u001b[91mgo: downloading go.uber.org/goleak v1.1.12\n\u001b[0m\u001b[91mgo: downloading github.com/decred/dcrd/chaincfg/chainhash v1.0.2\n\u001b[0m\u001b[91mgo: downloading gopkg.in/check.v1 v1.0.0-20190902080502-41f04d3bba15\n\u001b[0m\u001b[91mgo: downloading github.com/frankban/quicktest v1.14.3\n\u001b[0m\u001b[91mgo: downloading github.com/allegro/bigcache v1.2.1-0.20190218064605-e24eb225f156\ngo: downloading github.com/cespare/cp v0.1.0\n\u001b[0m\u001b[91mgo: downloading github.com/golang/glog v1.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/kr/pretty v0.3.0\n\u001b[0m\u001b[91mgo: downloading github.com/kr/text v0.2.0\n\u001b[0m\u001b[91mgo: downloading github.com/rogpeppe/go-internal v1.6.1\n\u001b[0m\u001b[91mgo: downloading github.com/nxadm/tail v1.4.8\n\u001b[0m\u001b[91mgo: downloading gopkg.in/tomb.v1 v1.0.0-20141024135613-dd632973f1e7\n\u001b[0mBuild Successful\nRemoving intermediate container a6bfdf58933b\n ---> 8219f738452e\nStep 9/13 : FROM debian:11-slim AS execution\n ---> dd94cb611937\nStep 10/13 : RUN mkdir -p /avalanchego/build\n ---> Running in 32b93aaee948\nRemoving intermediate container 32b93aaee948\n ---> 16470161c16f\nStep 11/13 : WORKDIR /avalanchego/build\n ---> Running in 56cac5050f9d\nRemoving intermediate container 56cac5050f9d\n ---> d8d32ca9d0be\nStep 12/13 : COPY --from=builder /build/build/ .\n ---> 16c592cbd574\nStep 13/13 : CMD [ \"./avalanchego\" ]\n ---> Running in 213d202ca9c5\nRemoving intermediate container 213d202ca9c5\n ---> c73984fb1dc4\nSuccessfully built c73984fb1dc4\nSuccessfully tagged avalanchego:latest\n","stderr":"","imageSize":179095169},"endTime":1672645817014}