{"repository":"https://github.com/stv0g/gose","dockerfilePath":"Dockerfile","startTime":1672316155090,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/stv0g/gose'...\n","error":null,"commit":"4f5426f7cd17ef9917970b2a82e157e869200a67"},"originalBuild":{"startTimestamp":1672316156076,"endTimestamp":1672316507313,"error":null,"stdout":"Sending build context to Docker daemon  1.169MB\r\r\nStep 1/25 : FROM golang:1.17-alpine AS backend-builder\n ---> 270c4f58750f\nStep 2/25 : WORKDIR /app\n ---> Running in b379ae6202e8\nRemoving intermediate container b379ae6202e8\n ---> 8b1111e6aa6b\nStep 3/25 : COPY go.mod .\n ---> b1b290c9c817\nStep 4/25 : COPY go.sum .\n ---> 92f195f240a0\nStep 5/25 : RUN go mod download\n ---> Running in 92b1d69cbc3d\nRemoving intermediate container 92b1d69cbc3d\n ---> ba2c0b6652a1\nStep 6/25 : COPY . .\n ---> 714e3e0ebd52\nStep 7/25 : RUN go build -o gose ./cmd\n ---> Running in 919bd6ea53f9\nRemoving intermediate container 919bd6ea53f9\n ---> f1aeecc7b964\nStep 8/25 : FROM node:17 AS frontend-builder\n17: Pulling from library/node\ne756f3fdd6a3: Pulling fs layer\nbf168a674899: Pulling fs layer\ne604223835cc: Pulling fs layer\n6d5c91c4cd86: Pulling fs layer\n2cc8d8854262: Pulling fs layer\nb8798d556362: Pulling fs layer\n8487988696ae: Pulling fs layer\ne9b31e3d7619: Pulling fs layer\ndca1606e3aad: Pulling fs layer\ne9b31e3d7619: Waiting\n2cc8d8854262: Waiting\ndca1606e3aad: Waiting\n8487988696ae: Waiting\n6d5c91c4cd86: Waiting\nbf168a674899: Verifying Checksum\nbf168a674899: Download complete\ne604223835cc: Verifying Checksum\ne604223835cc: Download complete\n6d5c91c4cd86: Verifying Checksum\n6d5c91c4cd86: Download complete\ne756f3fdd6a3: Verifying Checksum\ne756f3fdd6a3: Download complete\nb8798d556362: Verifying Checksum\nb8798d556362: Download complete\ne9b31e3d7619: Verifying Checksum\ne9b31e3d7619: Download complete\ndca1606e3aad: Verifying Checksum\ndca1606e3aad: Download complete\n8487988696ae: Verifying Checksum\n8487988696ae: Download complete\n2cc8d8854262: Verifying Checksum\n2cc8d8854262: Download complete\ne756f3fdd6a3: Pull complete\nbf168a674899: Pull complete\ne604223835cc: Pull complete\n6d5c91c4cd86: Pull complete\n2cc8d8854262: Pull complete\nb8798d556362: Pull complete\n8487988696ae: Pull complete\ne9b31e3d7619: Pull complete\ndca1606e3aad: Pull complete\nDigest: sha256:1845a99ada85e286535bbf12e1261ea688b28b7e8bcf6521590edbbea9f41cf9\nStatus: Downloaded newer image for node:17\n ---> 48be0030338e\nStep 9/25 : WORKDIR /app\n ---> Running in b6739264e2c6\nRemoving intermediate container b6739264e2c6\n ---> 573e371ba1e6\nStep 10/25 : COPY frontend/package.json .\n ---> b838089bc640\nStep 11/25 : COPY frontend/package-lock.json* .\n ---> dd88240c5397\nStep 12/25 : RUN npm install\n ---> Running in c9a4f54a26d8\n\nadded 566 packages, and audited 567 packages in 11s\n\n71 packages are looking for funding\n  run `npm fund` for details\n\n3 vulnerabilities (2 high, 1 critical)\n\nTo address all issues, run:\n  npm audit fix\n\nRun `npm audit` for details.\n\u001b[91mnpm notice \nnpm\u001b[0m\u001b[91m notice New major version of npm available! 8.11.0 -> 9.2.0\nnpm notice Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm notice Run `npm install -g npm@9.2.0` to update!\nnpm notice\u001b[0m\u001b[91m \n\u001b[0mRemoving intermediate container c9a4f54a26d8\n ---> 471fb414f1f0\nStep 13/25 : COPY frontend/ .\n ---> 157aa7d3cabc\nStep 14/25 : ENV NODE_ENV=production\n ---> Running in b5186379b87d\nRemoving intermediate container b5186379b87d\n ---> a61b2cd8e73e\nStep 15/25 : RUN npm run build\n ---> Running in 0700a2e1414a\n\n> gose@1.0.0 build\n> webpack --config webpack.prod.js\n\nassets by chunk 1.33 MiB (name: main)\n  asset main.js 1.18 MiB [emitted] [minimized] [big] (name: main) 2 related assets\n  asset main.css 160 KiB [emitted] (name: main) 1 related asset\nassets by path img/ 9.97 KiB\n  asset img/gose-logo.png 8.29 KiB [emitted] [from: img/gose-logo.png] [copied]\n  asset img/gose-logo.svg 1.68 KiB [emitted] [from: img/gose-logo.svg] [copied]\nasset index.html 4.69 KiB [emitted]\nEntrypoint main [big] 1.33 MiB (1.95 MiB) = main.css 160 KiB main.js 1.18 MiB 2 auxiliary assets\norphan modules 716 KiB (javascript) 975 bytes (runtime) [orphan] 95 modules\nruntime modules 921 bytes 5 modules\ncacheable modules 1.42 MiB (javascript) 160 KiB (css/mini-extract)\n  modules by path ./node_modules/ 1.16 MiB\n    ./node_modules/@fortawesome/fontawesome-free/js/fontawesome.js 109 KiB [built] [code generated]\n    ./node_modules/@fortawesome/fontawesome-free/js/solid.js 1.03 MiB [built] [code generated]\n    ./node_modules/js-md5/src/md5.js 22.7 KiB [built] [code generated]\n  ./src/index.ts + 66 modules 262 KiB [built] [code generated]\n  css ./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./node_modules/sass-loader/dist/cjs.js!./css/index.scss 160 KiB [built] [code generated]\n\nWARNING in asset size limit: The following asset(s) exceed the recommended size limit (244 KiB).\nThis can impact web performance.\nAssets: \n  main.js (1.18 MiB)\n\nWARNING in entrypoint size limit: The following entrypoint(s) combined asset size exceeds the recommended limit (244 KiB). This can impact web performance.\nEntrypoints:\n  main (1.33 MiB)\n      main.css\n      main.js\n\nWARNING in webpack performance recommendations: \nYou can limit the size of your bundles by using import() or require.ensure to lazy load some parts of your application.\nFor more info visit https://webpack.js.org/guides/code-splitting/\n\nwebpack 5.73.0 compiled with 3 warnings in 8966 ms\nRemoving intermediate container 0700a2e1414a\n ---> 5fec56947bc1\nStep 16/25 : FROM alpine:3.15\n3.15: Pulling from library/alpine\n9621f1afde84: Pulling fs layer\n9621f1afde84: Verifying Checksum\n9621f1afde84: Download complete\n9621f1afde84: Pull complete\nDigest: sha256:cf34c62ee8eb3fe8aa24c1fab45d7e9d12768d945c3f5a6fd6a63d901e898479\nStatus: Downloaded newer image for alpine:3.15\n ---> c4fc93816858\nStep 17/25 : RUN apk update && apk add ca-certificates curl && rm -rf /var/cache/apk/*\n ---> Running in c1d7dbb9d71f\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/community/x86_64/APKINDEX.tar.gz\nv3.15.6-230-gea65028923 [https://dl-cdn.alpinelinux.org/alpine/v3.15/main]\nv3.15.6-228-g9181cbcdab [https://dl-cdn.alpinelinux.org/alpine/v3.15/community]\nOK: 15859 distinct packages available\n(1/5) Installing ca-certificates (20220614-r0)\n(2/5) Installing brotli-libs (1.0.9-r5)\n(3/5) Installing nghttp2-libs (1.46.0-r0)\n(4/5) Installing libcurl (7.80.0-r5)\n(5/5) Installing curl (7.80.0-r5)\nExecuting busybox-1.34.1-r7.trigger\nExecuting ca-certificates-20220614-r0.trigger\nOK: 8 MiB in 19 packages\nRemoving intermediate container c1d7dbb9d71f\n ---> fbab03b2ff36\nStep 18/25 : COPY --from=frontend-builder /app/dist/ /dist/\n ---> ed3c925071c4\nStep 19/25 : COPY --from=backend-builder /app/gose /\n ---> 3a886c060dca\nStep 20/25 : COPY --from=backend-builder /app/config.yaml /\n ---> 542e2fd3a1e8\nStep 21/25 : ENV GIN_MODE=release\n ---> Running in 6e45f7215e1b\nRemoving intermediate container 6e45f7215e1b\n ---> 2925f5e83aa1\nStep 22/25 : ENV GOSE_SERVER_STATIC=/dist\n ---> Running in 92d5a1bc8191\nRemoving intermediate container 92d5a1bc8191\n ---> cde2194e0a65\nStep 23/25 : EXPOSE 8080/tcp\n ---> Running in db6b6729e10c\nRemoving intermediate container db6b6729e10c\n ---> afb2188af1ab\nStep 24/25 : HEALTHCHECK --interval=30s --timeout=30s --retries=3     CMD curl -f http://localhost:8080/api/v1/healthz\n ---> Running in 2f33ff93534e\nRemoving intermediate container 2f33ff93534e\n ---> 826ae08ee5dd\nStep 25/25 : ENTRYPOINT [ \"/gose\" ]\n ---> Running in 97620ddb47f2\nRemoving intermediate container 97620ddb47f2\n ---> f29c0c2ef686\nSuccessfully built f29c0c2ef686\nSuccessfully tagged gose:latest\n","stderr":"","imageSize":37395294},"repair":{"violations":[{"name":"npmCacheCleanAfterInstall","position":{"start":19,"end":19,"columnStart":4,"columnEnd":15}},{"name":"apkAddUseNoCache","position":{"start":29,"end":29,"columnStart":18,"columnEnd":46}}],"repairedDockerfile":"FROM golang:1.17-alpine AS backend-builder\n\nWORKDIR /app\n\nCOPY go.mod .\nCOPY go.sum .\nRUN go mod download\n\nCOPY . .\n\nRUN go build -o gose ./cmd\n\nFROM node:17 AS frontend-builder\n\nWORKDIR /app\n\nCOPY frontend/package.json .\nCOPY frontend/package-lock.json* .\n\nRUN npm install\n\nCOPY frontend/ .\n\nENV NODE_ENV=production\n\nRUN npm run build\n\nFROM alpine:3.15\n\nRUN apk update && apk add --no-cache ca-certificates curl && rm -rf /var/cache/apk/*\n\nCOPY --from=frontend-builder /app/dist/ /dist/\nCOPY --from=backend-builder /app/gose /\nCOPY --from=backend-builder /app/config.yaml /\n\nENV GIN_MODE=release\nENV GOSE_SERVER_STATIC=/dist\n\nEXPOSE 8080/tcp\n\nHEALTHCHECK --interval=30s --timeout=30s --retries=3 \\\n    CMD curl -f http://localhost:8080/api/v1/healthz\n\nENTRYPOINT [ \"/gose\" ]\n"},"repairedBuild":{"startTimestamp":1672316507628,"endTimestamp":1672316677796,"error":null,"stdout":"Sending build context to Docker daemon  1.169MB\r\r\nStep 1/25 : FROM golang:1.17-alpine AS backend-builder\n ---> 270c4f58750f\nStep 2/25 : WORKDIR /app\n ---> Running in 0b3758d93102\nRemoving intermediate container 0b3758d93102\n ---> 1ac89a720916\nStep 3/25 : COPY go.mod .\n ---> 6ffb2efb1bfa\nStep 4/25 : COPY go.sum .\n ---> 44c88fe25fab\nStep 5/25 : RUN go mod download\n ---> Running in 619b5ae77ec9\nRemoving intermediate container 619b5ae77ec9\n ---> 62fe3c64cb8c\nStep 6/25 : COPY . .\n ---> 1f27a68f115e\nStep 7/25 : RUN go build -o gose ./cmd\n ---> Running in b30dc121271a\nRemoving intermediate container b30dc121271a\n ---> 5562da6dc72c\nStep 8/25 : FROM node:17 AS frontend-builder\n ---> 48be0030338e\nStep 9/25 : WORKDIR /app\n ---> Running in 4d34f8a0e79e\nRemoving intermediate container 4d34f8a0e79e\n ---> 4012d364a1da\nStep 10/25 : COPY frontend/package.json .\n ---> 5960cd68bca8\nStep 11/25 : COPY frontend/package-lock.json* .\n ---> d5ec487bd788\nStep 12/25 : RUN npm install\n ---> Running in 05e6c140134e\n\nadded 566 packages, and audited 567 packages in 10s\n\n71 packages are looking for funding\n  run `npm fund` for details\n\n3 vulnerabilities (2 high, 1 critical)\n\nTo address all issues, run:\n  npm audit fix\n\nRun `npm audit` for details.\n\u001b[91mnpm notice \nnpm notice\u001b[0m\u001b[91m New major version of npm available! 8.11.0 -> 9.2.0\nnpm notice\u001b[0m\u001b[91m Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm notice Run `npm install -g npm@9.2.0` to update!\nnpm notice\u001b[0m\u001b[91m \n\u001b[0mRemoving intermediate container 05e6c140134e\n ---> 49004f0ff95d\nStep 13/25 : COPY frontend/ .\n ---> 4e15139ccb1e\nStep 14/25 : ENV NODE_ENV=production\n ---> Running in 1115bcd3605f\nRemoving intermediate container 1115bcd3605f\n ---> ced1bd3bbf55\nStep 15/25 : RUN npm run build\n ---> Running in 102779918eb1\n\n> gose@1.0.0 build\n> webpack --config webpack.prod.js\n\nassets by chunk 1.33 MiB (name: main)\n  asset main.js 1.18 MiB [emitted] [minimized] [big] (name: main) 2 related assets\n  asset main.css 160 KiB [emitted] (name: main) 1 related asset\nassets by path img/ 9.97 KiB\n  asset img/gose-logo.png 8.29 KiB [emitted] [from: img/gose-logo.png] [copied]\n  asset img/gose-logo.svg 1.68 KiB [emitted] [from: img/gose-logo.svg] [copied]\nasset index.html 4.69 KiB [emitted]\nEntrypoint main [big] 1.33 MiB (1.95 MiB) = main.css 160 KiB main.js 1.18 MiB 2 auxiliary assets\norphan modules 716 KiB (javascript) 975 bytes (runtime) [orphan] 95 modules\nruntime modules 921 bytes 5 modules\ncacheable modules 1.42 MiB (javascript) 160 KiB (css/mini-extract)\n  modules by path ./node_modules/ 1.16 MiB\n    ./node_modules/@fortawesome/fontawesome-free/js/fontawesome.js 109 KiB [built] [code generated]\n    ./node_modules/@fortawesome/fontawesome-free/js/solid.js 1.03 MiB [built] [code generated]\n    ./node_modules/js-md5/src/md5.js 22.7 KiB [built] [code generated]\n  ./src/index.ts + 66 modules 262 KiB [built] [code generated]\n  css ./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./node_modules/sass-loader/dist/cjs.js!./css/index.scss 160 KiB [built] [code generated]\n\nWARNING in asset size limit: The following asset(s) exceed the recommended size limit (244 KiB).\nThis can impact web performance.\nAssets: \n  main.js (1.18 MiB)\n\nWARNING in entrypoint size limit: The following entrypoint(s) combined asset size exceeds the recommended limit (244 KiB). This can impact web performance.\nEntrypoints:\n  main (1.33 MiB)\n      main.css\n      main.js\n\nWARNING in webpack performance recommendations: \nYou can limit the size of your bundles by using import() or require.ensure to lazy load some parts of your application.\nFor more info visit https://webpack.js.org/guides/code-splitting/\n\nwebpack 5.73.0 compiled with 3 warnings in 8855 ms\nRemoving intermediate container 102779918eb1\n ---> 3f04bbd86310\nStep 16/25 : FROM alpine:3.15\n ---> c4fc93816858\nStep 17/25 : RUN apk update && apk add --no-cache ca-certificates curl && rm -rf /var/cache/apk/*\n ---> Running in a885434e07a6\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/community/x86_64/APKINDEX.tar.gz\nv3.15.6-230-gea65028923 [https://dl-cdn.alpinelinux.org/alpine/v3.15/main]\nv3.15.6-228-g9181cbcdab [https://dl-cdn.alpinelinux.org/alpine/v3.15/community]\nOK: 15859 distinct packages available\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/community/x86_64/APKINDEX.tar.gz\n(1/5) Installing ca-certificates (20220614-r0)\n(2/5) Installing brotli-libs (1.0.9-r5)\n(3/5) Installing nghttp2-libs (1.46.0-r0)\n(4/5) Installing libcurl (7.80.0-r5)\n(5/5) Installing curl (7.80.0-r5)\nExecuting busybox-1.34.1-r7.trigger\nExecuting ca-certificates-20220614-r0.trigger\nOK: 8 MiB in 19 packages\nRemoving intermediate container a885434e07a6\n ---> c1f69cfd1e97\nStep 18/25 : COPY --from=frontend-builder /app/dist/ /dist/\n ---> e52645ffd064\nStep 19/25 : COPY --from=backend-builder /app/gose /\n ---> 4639eee103fe\nStep 20/25 : COPY --from=backend-builder /app/config.yaml /\n ---> 2151cc4b48eb\nStep 21/25 : ENV GIN_MODE=release\n ---> Running in adc19a202178\nRemoving intermediate container adc19a202178\n ---> c69acd46665d\nStep 22/25 : ENV GOSE_SERVER_STATIC=/dist\n ---> Running in 10dd37ac5f92\nRemoving intermediate container 10dd37ac5f92\n ---> 59775a856445\nStep 23/25 : EXPOSE 8080/tcp\n ---> Running in 5fbbfd4f1850\nRemoving intermediate container 5fbbfd4f1850\n ---> 04edf8805995\nStep 24/25 : HEALTHCHECK --interval=30s --timeout=30s --retries=3     CMD curl -f http://localhost:8080/api/v1/healthz\n ---> Running in d30092930351\nRemoving intermediate container d30092930351\n ---> 6fa42a503fec\nStep 25/25 : ENTRYPOINT [ \"/gose\" ]\n ---> Running in 55fca68e0329\nRemoving intermediate container 55fca68e0329\n ---> 863b22c02e60\nSuccessfully built 863b22c02e60\nSuccessfully tagged gose:latest\n","stderr":"","imageSize":37395294},"endTime":1672316678094}