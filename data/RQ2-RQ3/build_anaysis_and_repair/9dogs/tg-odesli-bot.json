{"repository":"https://github.com/9dogs/tg-odesli-bot","dockerfilePath":"Dockerfile","startTime":1672391143130,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/9dogs/tg-odesli-bot'...\n","error":null,"commit":"bcea3771ef868258573a4611ad0f18c97db9331c"},"originalBuild":{"startTimestamp":1672391144485,"endTimestamp":1672391254113,"error":null,"stdout":"Sending build context to Docker daemon  260.1kB\r\r\nStep 1/22 : FROM python:3.10.5-bullseye AS builder\n3.10.5-bullseye: Pulling from library/python\n001c52e26ad5: Pulling fs layer\nd9d4b9b6e964: Pulling fs layer\n2068746827ec: Pulling fs layer\n9daef329d350: Pulling fs layer\n8a335986117b: Pulling fs layer\n588423e31bcf: Pulling fs layer\necb6a3f01c0d: Pulling fs layer\n00d40f20f0cf: Pulling fs layer\n5d588b4f3b55: Pulling fs layer\n9daef329d350: Waiting\n8a335986117b: Waiting\n588423e31bcf: Waiting\n5d588b4f3b55: Waiting\necb6a3f01c0d: Waiting\n00d40f20f0cf: Waiting\nd9d4b9b6e964: Verifying Checksum\nd9d4b9b6e964: Download complete\n2068746827ec: Verifying Checksum\n2068746827ec: Download complete\n001c52e26ad5: Verifying Checksum\n001c52e26ad5: Download complete\n588423e31bcf: Verifying Checksum\n588423e31bcf: Download complete\necb6a3f01c0d: Verifying Checksum\necb6a3f01c0d: Download complete\n9daef329d350: Verifying Checksum\n9daef329d350: Download complete\n00d40f20f0cf: Verifying Checksum\n00d40f20f0cf: Download complete\n5d588b4f3b55: Verifying Checksum\n5d588b4f3b55: Download complete\n001c52e26ad5: Pull complete\n8a335986117b: Verifying Checksum\n8a335986117b: Download complete\nd9d4b9b6e964: Pull complete\n2068746827ec: Pull complete\n9daef329d350: Pull complete\n8a335986117b: Pull complete\n588423e31bcf: Pull complete\necb6a3f01c0d: Pull complete\n00d40f20f0cf: Pull complete\n5d588b4f3b55: Pull complete\nDigest: sha256:af97a1a117a4a48a42d7f7eadfdc0add452d3c7555112528bcd207ff88b2a524\nStatus: Downloaded newer image for python:3.10.5-bullseye\n ---> e35e775abbec\nStep 2/22 : LABEL maintainer=\"Mikhail.Knyazev@phystech.edu\"\n ---> Running in 921c4fb1f8d2\nRemoving intermediate container 921c4fb1f8d2\n ---> e4d144ce0826\nStep 3/22 : LABEL description=\"Telegram Bot to share music with Odesli (former Songlink) service.\"\n ---> Running in b6827cbc4c98\nRemoving intermediate container b6827cbc4c98\n ---> 436a6cf13630\nStep 4/22 : ENV PYTHONDONTWRITEBYTECODE 1\n ---> Running in eeb518bfc93a\nRemoving intermediate container eeb518bfc93a\n ---> 998c0b6e2455\nStep 5/22 : ENV PYTHONUNBUFFERED 1\n ---> Running in 4d280f6a04cb\nRemoving intermediate container 4d280f6a04cb\n ---> f0414c23eb47\nStep 6/22 : ARG poetry_args='--no-dev'\n ---> Running in 23211d7ebe4d\nRemoving intermediate container 23211d7ebe4d\n ---> e24a52978978\nStep 7/22 : RUN pip install poetry     && poetry config virtualenvs.create true     && poetry config virtualenvs.in-project true\n ---> Running in 955479e19f4f\nCollecting poetry\n  Downloading poetry-1.3.1-py3-none-any.whl (218 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 218.9/218.9 KB 1.8 MB/s eta 0:00:00\nCollecting platformdirs<3.0.0,>=2.5.2\n  Downloading platformdirs-2.6.2-py3-none-any.whl (14 kB)\nCollecting poetry-plugin-export<2.0.0,>=1.2.0\n  Downloading poetry_plugin_export-1.2.0-py3-none-any.whl (10 kB)\nCollecting virtualenv!=20.4.5,!=20.4.6,<21.0.0,>=20.4.3\n  Downloading virtualenv-20.17.1-py3-none-any.whl (8.8 MB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 8.8/8.8 MB 25.9 MB/s eta 0:00:00\nCollecting cleo<3.0.0,>=2.0.0\n  Downloading cleo-2.0.1-py3-none-any.whl (77 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 77.3/77.3 KB 8.6 MB/s eta 0:00:00\nCollecting filelock<4.0.0,>=3.8.0\n  Downloading filelock-3.9.0-py3-none-any.whl (9.7 kB)\nCollecting dulwich<0.21.0,>=0.20.46\n  Downloading dulwich-0.20.50-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (499 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 500.0/500.0 KB 37.9 MB/s eta 0:00:00\nCollecting pkginfo<2.0,>=1.5\n  Downloading pkginfo-1.9.2-py3-none-any.whl (26 kB)\nCollecting requests-toolbelt<0.11.0,>=0.9.1\n  Downloading requests_toolbelt-0.10.1-py2.py3-none-any.whl (54 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 54.5/54.5 KB 5.6 MB/s eta 0:00:00\nCollecting packaging>=20.4\n  Downloading packaging-22.0-py3-none-any.whl (42 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 42.6/42.6 KB 4.6 MB/s eta 0:00:00\nCollecting poetry-core==1.4.0\n  Downloading poetry_core-1.4.0-py3-none-any.whl (546 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 546.4/546.4 KB 28.1 MB/s eta 0:00:00\nCollecting pexpect<5.0.0,>=4.7.0\n  Downloading pexpect-4.8.0-py2.py3-none-any.whl (59 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 59.0/59.0 KB 5.4 MB/s eta 0:00:00\nCollecting urllib3<2.0.0,>=1.26.0\n  Downloading urllib3-1.26.13-py2.py3-none-any.whl (140 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 140.6/140.6 KB 13.7 MB/s eta 0:00:00\nCollecting tomlkit!=0.11.2,!=0.11.3,<1.0.0,>=0.11.1\n  Downloading tomlkit-0.11.6-py3-none-any.whl (35 kB)\nCollecting keyring<24.0.0,>=23.9.0\n  Downloading keyring-23.13.1-py3-none-any.whl (37 kB)\nCollecting html5lib<2.0,>=1.0\n  Downloading html5lib-1.1-py2.py3-none-any.whl (112 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 112.2/112.2 KB 11.7 MB/s eta 0:00:00\nCollecting shellingham<2.0,>=1.5\n  Downloading shellingham-1.5.0-py2.py3-none-any.whl (9.3 kB)\nCollecting crashtest<0.5.0,>=0.4.1\n  Downloading crashtest-0.4.1-py3-none-any.whl (7.6 kB)\nCollecting lockfile<0.13.0,>=0.12.2\n  Downloading lockfile-0.12.2-py2.py3-none-any.whl (13 kB)\nCollecting jsonschema<5.0.0,>=4.10.0\n  Downloading jsonschema-4.17.3-py3-none-any.whl (90 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 90.4/90.4 KB 7.1 MB/s eta 0:00:00\nCollecting cachecontrol[filecache]<0.13.0,>=0.12.9\n  Downloading CacheControl-0.12.11-py2.py3-none-any.whl (21 kB)\nCollecting tomli<3.0.0,>=2.0.1\n  Downloading tomli-2.0.1-py3-none-any.whl (12 kB)\nCollecting requests<3.0,>=2.18\n  Downloading requests-2.28.1-py3-none-any.whl (62 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 62.8/62.8 KB 1.5 MB/s eta 0:00:00\nCollecting trove-classifiers>=2022.5.19\n  Downloading trove_classifiers-2022.12.22-py3-none-any.whl (13 kB)\nCollecting msgpack>=0.5.2\n  Downloading msgpack-1.0.4-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (316 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 317.0/317.0 KB 4.9 MB/s eta 0:00:00\nCollecting rapidfuzz<3.0.0,>=2.2.0\n  Downloading rapidfuzz-2.13.7-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (2.2 MB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 2.2/2.2 MB 56.5 MB/s eta 0:00:00\nCollecting webencodings\n  Downloading webencodings-0.5.1-py2.py3-none-any.whl (11 kB)\nCollecting six>=1.9\n  Downloading six-1.16.0-py2.py3-none-any.whl (11 kB)\nCollecting attrs>=17.4.0\n  Downloading attrs-22.2.0-py3-none-any.whl (60 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 60.0/60.0 KB 6.6 MB/s eta 0:00:00\nCollecting pyrsistent!=0.17.0,!=0.17.1,!=0.17.2,>=0.14.0\n  Downloading pyrsistent-0.19.3-py3-none-any.whl (57 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 57.5/57.5 KB 2.3 MB/s eta 0:00:00\nCollecting importlib-metadata>=4.11.4\n  Downloading importlib_metadata-5.2.0-py3-none-any.whl (21 kB)\nCollecting jaraco.classes\n  Downloading jaraco.classes-3.2.3-py3-none-any.whl (6.0 kB)\nCollecting SecretStorage>=3.2\n  Downloading SecretStorage-3.3.3-py3-none-any.whl (15 kB)\nCollecting jeepney>=0.4.2\n  Downloading jeepney-0.8.0-py3-none-any.whl (48 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 48.4/48.4 KB 5.3 MB/s eta 0:00:00\nCollecting ptyprocess>=0.5\n  Downloading ptyprocess-0.7.0-py2.py3-none-any.whl (13 kB)\nCollecting idna<4,>=2.5\n  Downloading idna-3.4-py3-none-any.whl (61 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 61.5/61.5 KB 5.7 MB/s eta 0:00:00\nCollecting charset-normalizer<3,>=2\n  Downloading charset_normalizer-2.1.1-py3-none-any.whl (39 kB)\nCollecting certifi>=2017.4.17\n  Downloading certifi-2022.12.7-py3-none-any.whl (155 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 155.3/155.3 KB 918.2 kB/s eta 0:00:00\nCollecting distlib<1,>=0.3.6\n  Downloading distlib-0.3.6-py2.py3-none-any.whl (468 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 468.5/468.5 KB 39.8 MB/s eta 0:00:00\nCollecting zipp>=0.5\n  Downloading zipp-3.11.0-py3-none-any.whl (6.6 kB)\nCollecting cryptography>=2.0\n  Downloading cryptography-38.0.4-cp36-abi3-manylinux_2_28_x86_64.whl (4.2 MB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 4.2/4.2 MB 57.3 MB/s eta 0:00:00\nCollecting more-itertools\n  Downloading more_itertools-9.0.0-py3-none-any.whl (52 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 52.8/52.8 KB 4.6 MB/s eta 0:00:00\nCollecting cffi>=1.12\n  Downloading cffi-1.15.1-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (441 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 441.8/441.8 KB 29.5 MB/s eta 0:00:00\nCollecting pycparser\n  Downloading pycparser-2.21-py2.py3-none-any.whl (118 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 118.7/118.7 KB 10.8 MB/s eta 0:00:00\nInstalling collected packages: webencodings, trove-classifiers, ptyprocess, msgpack, lockfile, distlib, zipp, urllib3, tomlkit, tomli, six, shellingham, rapidfuzz, pyrsistent, pycparser, poetry-core, platformdirs, pkginfo, pexpect, packaging, more-itertools, jeepney, idna, filelock, crashtest, charset-normalizer, certifi, attrs, virtualenv, requests, jsonschema, jaraco.classes, importlib-metadata, html5lib, dulwich, cleo, cffi, requests-toolbelt, cryptography, cachecontrol, SecretStorage, keyring, poetry-plugin-export, poetry\nSuccessfully installed SecretStorage-3.3.3 attrs-22.2.0 cachecontrol-0.12.11 certifi-2022.12.7 cffi-1.15.1 charset-normalizer-2.1.1 cleo-2.0.1 crashtest-0.4.1 cryptography-38.0.4 distlib-0.3.6 dulwich-0.20.50 filelock-3.9.0 html5lib-1.1 idna-3.4 importlib-metadata-5.2.0 jaraco.classes-3.2.3 jeepney-0.8.0 jsonschema-4.17.3 keyring-23.13.1 lockfile-0.12.2 more-itertools-9.0.0 msgpack-1.0.4 packaging-22.0 pexpect-4.8.0 pkginfo-1.9.2 platformdirs-2.6.2 poetry-1.3.1 poetry-core-1.4.0 poetry-plugin-export-1.2.0 ptyprocess-0.7.0 pycparser-2.21 pyrsistent-0.19.3 rapidfuzz-2.13.7 requests-2.28.1 requests-toolbelt-0.10.1 shellingham-1.5.0 six-1.16.0 tomli-2.0.1 tomlkit-0.11.6 trove-classifiers-2022.12.22 urllib3-1.26.13 virtualenv-20.17.1 webencodings-0.5.1 zipp-3.11.0\n\u001b[91mWARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv\n\u001b[0m\u001b[91mWARNING: You are using pip version 22.0.4; however, version 22.3.1 is available.\nYou should consider upgrading via the '/usr/local/bin/python -m pip install --upgrade pip' command.\n\u001b[0mRemoving intermediate container 955479e19f4f\n ---> f78eada1ed76\nStep 8/22 : WORKDIR /opt/tg-odesli-bot\n ---> Running in 3a62e074b6ab\nRemoving intermediate container 3a62e074b6ab\n ---> 3832c6116e11\nStep 9/22 : COPY poetry.lock pyproject.toml /opt/tg-odesli-bot/\n ---> 04ea3144b010\nStep 10/22 : WORKDIR /opt/tg-odesli-bot\n ---> Running in 30933717b57a\nRemoving intermediate container 30933717b57a\n ---> bc85e1ec5a12\nStep 11/22 : RUN poetry install --no-interaction --no-ansi $poetry_args\n ---> Running in 3eeb415407df\n\u001b[91mCreating virtualenv tg-odesli-bot in /opt/tg-odesli-bot/.venv\n\u001b[0m\u001b[91mThe `--no-dev` option is deprecated, use the `--only main` notation instead.\n\u001b[0mInstalling dependencies from lock file\n\nPackage operations: 23 installs, 0 updates, 0 removals\n\n  • Installing frozenlist (1.3.0)\n  • Installing idna (3.3)\n  • Installing multidict (6.0.2)\n  • Installing aiosignal (1.2.0)\n  • Installing async-timeout (4.0.2)\n  • Installing attrs (21.4.0)\n  • Installing certifi (2022.12.7)\n  • Installing charset-normalizer (2.1.0)\n  • Installing pyparsing (3.0.9)\n  • Installing pytz (2022.1)\n  • Installing urllib3 (1.26.10)\n  • Installing yarl (1.7.2)\n  • Installing aiohttp (3.8.1)\n  • Installing babel (2.9.1)\n  • Installing packaging (21.3)\n  • Installing sentry-sdk (1.8.0)\n  • Installing aiocache (0.11.1)\n  • Installing aiogram (2.21)\n  • Installing marshmallow (3.17.0)\n  • Installing python-dotenv (0.20.0)\n  • Installing structlog (22.1.0)\n  • Installing structlog-sentry (1.4.0)\n  • Installing ujson (5.4.0)\nRemoving intermediate container 3eeb415407df\n ---> fd4104be036f\nStep 12/22 : COPY . /opt/tg-odesli-bot\n ---> aef39a1363c4\nStep 13/22 : ENV PYTHONPATH \"${PYTHONPATH}:/opt/tg-odesli-bot\"\n ---> Running in 55d0b59c272a\nRemoving intermediate container 55d0b59c272a\n ---> 55c297355b6a\nStep 14/22 : FROM python:3.10.5-slim-bullseye\n3.10.5-slim-bullseye: Pulling from library/python\n1efc276f4ff9: Pulling fs layer\n126aaa6587b8: Pulling fs layer\n5a96a0b5efbd: Pulling fs layer\n65462f2b00a4: Pulling fs layer\n098c9e455557: Pulling fs layer\n65462f2b00a4: Waiting\n126aaa6587b8: Verifying Checksum\n126aaa6587b8: Download complete\n65462f2b00a4: Download complete\n098c9e455557: Verifying Checksum\n098c9e455557: Download complete\n1efc276f4ff9: Download complete\n1efc276f4ff9: Pull complete\n126aaa6587b8: Pull complete\n5a96a0b5efbd: Verifying Checksum\n5a96a0b5efbd: Download complete\n5a96a0b5efbd: Pull complete\n65462f2b00a4: Pull complete\n098c9e455557: Pull complete\nDigest: sha256:f9f03f46267e182193544299504687e711c623e2a085323138f94ed9b01ce641\nStatus: Downloaded newer image for python:3.10.5-slim-bullseye\n ---> 5b7d04484c73\nStep 15/22 : ARG UID=997\n ---> Running in a52addbb3bf8\nRemoving intermediate container a52addbb3bf8\n ---> 285224930bcb\nStep 16/22 : ARG GID=997\n ---> Running in cdb69c32c162\nRemoving intermediate container cdb69c32c162\n ---> a059fc0e5d81\nStep 17/22 : RUN groupadd -g $GID -r bot     && useradd -u $UID -r -s /sbin/nologin -g bot bot\n ---> Running in 05d267591af5\nRemoving intermediate container 05d267591af5\n ---> ed374ff0bc53\nStep 18/22 : USER bot\n ---> Running in 4e711f7cf796\nRemoving intermediate container 4e711f7cf796\n ---> aaff5ff9bd8c\nStep 19/22 : COPY --from=builder --chown=bot:bot /opt/tg-odesli-bot /opt/tg-odesli-bot\n ---> 302fe579befc\nStep 20/22 : WORKDIR /opt/tg-odesli-bot\n ---> Running in 616dbce25143\nRemoving intermediate container 616dbce25143\n ---> 342399321db7\nStep 21/22 : ENV PYTHONPATH \"${PYTHONPATH}:/opt/tg-odesli-bot\"\n ---> Running in 3a25a43a5e33\nRemoving intermediate container 3a25a43a5e33\n ---> 8088c471cbed\nStep 22/22 : CMD [\"/opt/tg-odesli-bot/.venv/bin/python\", \"-m\", \"tg_odesli_bot.bot\"]\n ---> Running in 53a52c320dd5\nRemoving intermediate container 53a52c320dd5\n ---> 301da94a3f70\nSuccessfully built 301da94a3f70\nSuccessfully tagged tg-odesli-bot:latest\n","stderr":"","imageSize":180669714},"repair":{"violations":[{"name":"pipUseNoCacheDir","position":{"start":11,"end":11,"columnStart":4,"columnEnd":22}}],"repairedDockerfile":"FROM python:3.10.5-bullseye AS builder\n\nLABEL maintainer=\"Mikhail.Knyazev@phystech.edu\"\nLABEL description=\"Telegram Bot to share music with Odesli (former Songlink) service.\"\n\nENV PYTHONDONTWRITEBYTECODE 1\nENV PYTHONUNBUFFERED 1\n\nARG poetry_args='--no-dev'\n\n# Install & config poetry\nRUN pip install --no-cache-dir poetry \\\n    && poetry config virtualenvs.create true \\\n    && poetry config virtualenvs.in-project true\nWORKDIR /opt/tg-odesli-bot\n# Install project dependencies\nCOPY poetry.lock pyproject.toml /opt/tg-odesli-bot/\nWORKDIR /opt/tg-odesli-bot\nRUN poetry install --no-interaction --no-ansi $poetry_args\n# Copy project files\nCOPY . /opt/tg-odesli-bot\nENV PYTHONPATH \"${PYTHONPATH}:/opt/tg-odesli-bot\"\n\n\nFROM python:3.10.5-slim-bullseye\n\nARG UID=997\nARG GID=997\n\n# Create user and group\nRUN groupadd -g $GID -r bot \\\n    && useradd -u $UID -r -s /sbin/nologin -g bot bot\nUSER bot\n# Copy project files\nCOPY --from=builder --chown=bot:bot /opt/tg-odesli-bot /opt/tg-odesli-bot\nWORKDIR /opt/tg-odesli-bot\nENV PYTHONPATH \"${PYTHONPATH}:/opt/tg-odesli-bot\"\n\nCMD [\"/opt/tg-odesli-bot/.venv/bin/python\", \"-m\", \"tg_odesli_bot.bot\"]\n"},"repairedBuild":{"startTimestamp":1672391254472,"endTimestamp":1672391307741,"error":null,"stdout":"Sending build context to Docker daemon  260.1kB\r\r\nStep 1/22 : FROM python:3.10.5-bullseye AS builder\n ---> e35e775abbec\nStep 2/22 : LABEL maintainer=\"Mikhail.Knyazev@phystech.edu\"\n ---> Running in d3a6c1b4d4d0\nRemoving intermediate container d3a6c1b4d4d0\n ---> 22e441d116c3\nStep 3/22 : LABEL description=\"Telegram Bot to share music with Odesli (former Songlink) service.\"\n ---> Running in e7a2996c40bc\nRemoving intermediate container e7a2996c40bc\n ---> b8cf483307a0\nStep 4/22 : ENV PYTHONDONTWRITEBYTECODE 1\n ---> Running in 68584ab00f3c\nRemoving intermediate container 68584ab00f3c\n ---> 7354dda31409\nStep 5/22 : ENV PYTHONUNBUFFERED 1\n ---> Running in 9e413738af10\nRemoving intermediate container 9e413738af10\n ---> c0cd4fb497c0\nStep 6/22 : ARG poetry_args='--no-dev'\n ---> Running in 97960243f28e\nRemoving intermediate container 97960243f28e\n ---> 1d6f3a6d76e6\nStep 7/22 : RUN pip install --no-cache-dir poetry     && poetry config virtualenvs.create true     && poetry config virtualenvs.in-project true\n ---> Running in 4bf922315917\nCollecting poetry\n  Downloading poetry-1.3.1-py3-none-any.whl (218 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 218.9/218.9 KB 75.4 MB/s eta 0:00:00\nCollecting tomlkit!=0.11.2,!=0.11.3,<1.0.0,>=0.11.1\n  Downloading tomlkit-0.11.6-py3-none-any.whl (35 kB)\nCollecting pexpect<5.0.0,>=4.7.0\n  Downloading pexpect-4.8.0-py2.py3-none-any.whl (59 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 59.0/59.0 KB 95.3 MB/s eta 0:00:00\nCollecting platformdirs<3.0.0,>=2.5.2\n  Downloading platformdirs-2.6.2-py3-none-any.whl (14 kB)\nCollecting shellingham<2.0,>=1.5\n  Downloading shellingham-1.5.0-py2.py3-none-any.whl (9.3 kB)\nCollecting lockfile<0.13.0,>=0.12.2\n  Downloading lockfile-0.12.2-py2.py3-none-any.whl (13 kB)\nCollecting tomli<3.0.0,>=2.0.1\n  Downloading tomli-2.0.1-py3-none-any.whl (12 kB)\nCollecting poetry-core==1.4.0\n  Downloading poetry_core-1.4.0-py3-none-any.whl (546 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 546.4/546.4 KB 153.5 MB/s eta 0:00:00\nCollecting requests<3.0,>=2.18\n  Downloading requests-2.28.1-py3-none-any.whl (62 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 62.8/62.8 KB 246.3 MB/s eta 0:00:00\nCollecting pkginfo<2.0,>=1.5\n  Downloading pkginfo-1.9.2-py3-none-any.whl (26 kB)\nCollecting jsonschema<5.0.0,>=4.10.0\n  Downloading jsonschema-4.17.3-py3-none-any.whl (90 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 90.4/90.4 KB 106.7 MB/s eta 0:00:00\nCollecting filelock<4.0.0,>=3.8.0\n  Downloading filelock-3.9.0-py3-none-any.whl (9.7 kB)\nCollecting requests-toolbelt<0.11.0,>=0.9.1\n  Downloading requests_toolbelt-0.10.1-py2.py3-none-any.whl (54 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 54.5/54.5 KB 200.3 MB/s eta 0:00:00\nCollecting cachecontrol[filecache]<0.13.0,>=0.12.9\n  Downloading CacheControl-0.12.11-py2.py3-none-any.whl (21 kB)\nCollecting html5lib<2.0,>=1.0\n  Downloading html5lib-1.1-py2.py3-none-any.whl (112 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 112.2/112.2 KB 327.4 MB/s eta 0:00:00\nCollecting urllib3<2.0.0,>=1.26.0\n  Downloading urllib3-1.26.13-py2.py3-none-any.whl (140 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 140.6/140.6 KB 337.0 MB/s eta 0:00:00\nCollecting crashtest<0.5.0,>=0.4.1\n  Downloading crashtest-0.4.1-py3-none-any.whl (7.6 kB)\nCollecting dulwich<0.21.0,>=0.20.46\n  Downloading dulwich-0.20.50-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (499 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 500.0/500.0 KB 167.5 MB/s eta 0:00:00\nCollecting packaging>=20.4\n  Downloading packaging-22.0-py3-none-any.whl (42 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 42.6/42.6 KB 63.7 MB/s eta 0:00:00\nCollecting virtualenv!=20.4.5,!=20.4.6,<21.0.0,>=20.4.3\n  Downloading virtualenv-20.17.1-py3-none-any.whl (8.8 MB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 8.8/8.8 MB 117.7 MB/s eta 0:00:00\nCollecting cleo<3.0.0,>=2.0.0\n  Downloading cleo-2.0.1-py3-none-any.whl (77 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 77.3/77.3 KB 216.4 MB/s eta 0:00:00\nCollecting trove-classifiers>=2022.5.19\n  Downloading trove_classifiers-2022.12.22-py3-none-any.whl (13 kB)\nCollecting poetry-plugin-export<2.0.0,>=1.2.0\n  Downloading poetry_plugin_export-1.2.0-py3-none-any.whl (10 kB)\nCollecting keyring<24.0.0,>=23.9.0\n  Downloading keyring-23.13.1-py3-none-any.whl (37 kB)\nCollecting msgpack>=0.5.2\n  Downloading msgpack-1.0.4-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (316 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 317.0/317.0 KB 253.6 MB/s eta 0:00:00\nCollecting rapidfuzz<3.0.0,>=2.2.0\n  Downloading rapidfuzz-2.13.7-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (2.2 MB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 2.2/2.2 MB 101.4 MB/s eta 0:00:00\nCollecting six>=1.9\n  Downloading six-1.16.0-py2.py3-none-any.whl (11 kB)\nCollecting webencodings\n  Downloading webencodings-0.5.1-py2.py3-none-any.whl (11 kB)\nCollecting pyrsistent!=0.17.0,!=0.17.1,!=0.17.2,>=0.14.0\n  Downloading pyrsistent-0.19.3-py3-none-any.whl (57 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 57.5/57.5 KB 254.0 MB/s eta 0:00:00\nCollecting attrs>=17.4.0\n  Downloading attrs-22.2.0-py3-none-any.whl (60 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 60.0/60.0 KB 304.3 MB/s eta 0:00:00\nCollecting SecretStorage>=3.2\n  Downloading SecretStorage-3.3.3-py3-none-any.whl (15 kB)\nCollecting jeepney>=0.4.2\n  Downloading jeepney-0.8.0-py3-none-any.whl (48 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 48.4/48.4 KB 104.3 MB/s eta 0:00:00\nCollecting importlib-metadata>=4.11.4\n  Downloading importlib_metadata-5.2.0-py3-none-any.whl (21 kB)\nCollecting jaraco.classes\n  Downloading jaraco.classes-3.2.3-py3-none-any.whl (6.0 kB)\nCollecting ptyprocess>=0.5\n  Downloading ptyprocess-0.7.0-py2.py3-none-any.whl (13 kB)\nCollecting charset-normalizer<3,>=2\n  Downloading charset_normalizer-2.1.1-py3-none-any.whl (39 kB)\nCollecting certifi>=2017.4.17\n  Downloading certifi-2022.12.7-py3-none-any.whl (155 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 155.3/155.3 KB 366.7 MB/s eta 0:00:00\nCollecting idna<4,>=2.5\n  Downloading idna-3.4-py3-none-any.whl (61 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 61.5/61.5 KB 290.6 MB/s eta 0:00:00\nCollecting distlib<1,>=0.3.6\n  Downloading distlib-0.3.6-py2.py3-none-any.whl (468 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 468.5/468.5 KB 171.5 MB/s eta 0:00:00\nCollecting zipp>=0.5\n  Downloading zipp-3.11.0-py3-none-any.whl (6.6 kB)\nCollecting cryptography>=2.0\n  Downloading cryptography-38.0.4-cp36-abi3-manylinux_2_28_x86_64.whl (4.2 MB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 4.2/4.2 MB 115.2 MB/s eta 0:00:00\nCollecting more-itertools\n  Downloading more_itertools-9.0.0-py3-none-any.whl (52 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 52.8/52.8 KB 289.1 MB/s eta 0:00:00\nCollecting cffi>=1.12\n  Downloading cffi-1.15.1-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (441 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 441.8/441.8 KB 115.8 MB/s eta 0:00:00\nCollecting pycparser\n  Downloading pycparser-2.21-py2.py3-none-any.whl (118 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 118.7/118.7 KB 269.1 MB/s eta 0:00:00\nInstalling collected packages: webencodings, trove-classifiers, ptyprocess, msgpack, lockfile, distlib, zipp, urllib3, tomlkit, tomli, six, shellingham, rapidfuzz, pyrsistent, pycparser, poetry-core, platformdirs, pkginfo, pexpect, packaging, more-itertools, jeepney, idna, filelock, crashtest, charset-normalizer, certifi, attrs, virtualenv, requests, jsonschema, jaraco.classes, importlib-metadata, html5lib, dulwich, cleo, cffi, requests-toolbelt, cryptography, cachecontrol, SecretStorage, keyring, poetry-plugin-export, poetry\nSuccessfully installed SecretStorage-3.3.3 attrs-22.2.0 cachecontrol-0.12.11 certifi-2022.12.7 cffi-1.15.1 charset-normalizer-2.1.1 cleo-2.0.1 crashtest-0.4.1 cryptography-38.0.4 distlib-0.3.6 dulwich-0.20.50 filelock-3.9.0 html5lib-1.1 idna-3.4 importlib-metadata-5.2.0 jaraco.classes-3.2.3 jeepney-0.8.0 jsonschema-4.17.3 keyring-23.13.1 lockfile-0.12.2 more-itertools-9.0.0 msgpack-1.0.4 packaging-22.0 pexpect-4.8.0 pkginfo-1.9.2 platformdirs-2.6.2 poetry-1.3.1 poetry-core-1.4.0 poetry-plugin-export-1.2.0 ptyprocess-0.7.0 pycparser-2.21 pyrsistent-0.19.3 rapidfuzz-2.13.7 requests-2.28.1 requests-toolbelt-0.10.1 shellingham-1.5.0 six-1.16.0 tomli-2.0.1 tomlkit-0.11.6 trove-classifiers-2022.12.22 urllib3-1.26.13 virtualenv-20.17.1 webencodings-0.5.1 zipp-3.11.0\n\u001b[91mWARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv\n\u001b[0m\u001b[91mWARNING: You are using pip version 22.0.4; however, version 22.3.1 is available.\nYou should consider upgrading via the '/usr/local/bin/python -m pip install --upgrade pip' command.\n\u001b[0mRemoving intermediate container 4bf922315917\n ---> f4bb5d7098be\nStep 8/22 : WORKDIR /opt/tg-odesli-bot\n ---> Running in 54c1f761bcca\nRemoving intermediate container 54c1f761bcca\n ---> a4d3d7e69636\nStep 9/22 : COPY poetry.lock pyproject.toml /opt/tg-odesli-bot/\n ---> 1f3404a897ad\nStep 10/22 : WORKDIR /opt/tg-odesli-bot\n ---> Running in d76b9ecf8e39\nRemoving intermediate container d76b9ecf8e39\n ---> 95377da3dd77\nStep 11/22 : RUN poetry install --no-interaction --no-ansi $poetry_args\n ---> Running in d127c7638fe9\n\u001b[91mCreating virtualenv tg-odesli-bot in /opt/tg-odesli-bot/.venv\n\u001b[0m\u001b[91mThe `--no-dev` option is deprecated, use the `--only main` notation instead.\n\u001b[0mInstalling dependencies from lock file\n\nPackage operations: 23 installs, 0 updates, 0 removals\n\n  • Installing frozenlist (1.3.0)\n  • Installing idna (3.3)\n  • Installing multidict (6.0.2)\n  • Installing aiosignal (1.2.0)\n  • Installing async-timeout (4.0.2)\n  • Installing attrs (21.4.0)\n  • Installing certifi (2022.12.7)\n  • Installing charset-normalizer (2.1.0)\n  • Installing pyparsing (3.0.9)\n  • Installing pytz (2022.1)\n  • Installing urllib3 (1.26.10)\n  • Installing yarl (1.7.2)\n  • Installing aiohttp (3.8.1)\n  • Installing babel (2.9.1)\n  • Installing packaging (21.3)\n  • Installing sentry-sdk (1.8.0)\n  • Installing aiocache (0.11.1)\n  • Installing aiogram (2.21)\n  • Installing marshmallow (3.17.0)\n  • Installing python-dotenv (0.20.0)\n  • Installing structlog (22.1.0)\n  • Installing structlog-sentry (1.4.0)\n  • Installing ujson (5.4.0)\nRemoving intermediate container d127c7638fe9\n ---> b3d8f41cba1c\nStep 12/22 : COPY . /opt/tg-odesli-bot\n ---> d905212b9d2d\nStep 13/22 : ENV PYTHONPATH \"${PYTHONPATH}:/opt/tg-odesli-bot\"\n ---> Running in 559982e8de93\nRemoving intermediate container 559982e8de93\n ---> b1be770d5a3f\nStep 14/22 : FROM python:3.10.5-slim-bullseye\n ---> 5b7d04484c73\nStep 15/22 : ARG UID=997\n ---> Running in 53e892d4bf54\nRemoving intermediate container 53e892d4bf54\n ---> cf83af77eea3\nStep 16/22 : ARG GID=997\n ---> Running in 1a77e936ad17\nRemoving intermediate container 1a77e936ad17\n ---> e596898cd46e\nStep 17/22 : RUN groupadd -g $GID -r bot     && useradd -u $UID -r -s /sbin/nologin -g bot bot\n ---> Running in 3cf3e01b9903\nRemoving intermediate container 3cf3e01b9903\n ---> c4f5c6395e97\nStep 18/22 : USER bot\n ---> Running in a712efa4dc25\nRemoving intermediate container a712efa4dc25\n ---> f9614d85cbdf\nStep 19/22 : COPY --from=builder --chown=bot:bot /opt/tg-odesli-bot /opt/tg-odesli-bot\n ---> d853372dca5e\nStep 20/22 : WORKDIR /opt/tg-odesli-bot\n ---> Running in 999ad009c7c6\nRemoving intermediate container 999ad009c7c6\n ---> dceb1761ad2a\nStep 21/22 : ENV PYTHONPATH \"${PYTHONPATH}:/opt/tg-odesli-bot\"\n ---> Running in f08246413cdd\nRemoving intermediate container f08246413cdd\n ---> b41e54322f87\nStep 22/22 : CMD [\"/opt/tg-odesli-bot/.venv/bin/python\", \"-m\", \"tg_odesli_bot.bot\"]\n ---> Running in 0e32bd103e5d\nRemoving intermediate container 0e32bd103e5d\n ---> b54877151531\nSuccessfully built b54877151531\nSuccessfully tagged tg-odesli-bot:latest\n","stderr":"","imageSize":180669729},"endTime":1672391308034}