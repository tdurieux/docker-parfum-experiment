{"repository":"https://github.com/uber/prototool","dockerfilePath":"Dockerfile","startTime":1672594869243,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/uber/prototool'...\n","error":null,"commit":"a6d064684c011c8482f4218c681a66a64031fb1d"},"originalBuild":{"startTimestamp":1672594870230,"endTimestamp":1672595085961,"error":{"code":2,"killed":false,"signal":null,"cmd":"docker build --no-cache --force-rm -t prototool:latest -f /tmp/dinghy-analysis/uber/prototool/Dockerfile ."},"stdout":"Sending build context to Docker daemon  2.282MB\r\r\nStep 1/28 : FROM golang:1.14-alpine3.11 as builder\n1.14-alpine3.11: Pulling from library/golang\n0a6724ff3fcd: Pulling fs layer\n780d39f1cd5d: Pulling fs layer\n01872fc92c6c: Pulling fs layer\n875fef68e8ab: Pulling fs layer\n77ac76ad90fe: Pulling fs layer\n780d39f1cd5d: Waiting\n01872fc92c6c: Waiting\n0a6724ff3fcd: Waiting\n875fef68e8ab: Waiting\n77ac76ad90fe: Waiting\n0a6724ff3fcd: Verifying Checksum\n0a6724ff3fcd: Download complete\n780d39f1cd5d: Verifying Checksum\n780d39f1cd5d: Download complete\n0a6724ff3fcd: Pull complete\n01872fc92c6c: Verifying Checksum\n01872fc92c6c: Download complete\n77ac76ad90fe: Verifying Checksum\n77ac76ad90fe: Download complete\n780d39f1cd5d: Pull complete\n875fef68e8ab: Verifying Checksum\n875fef68e8ab: Download complete\n01872fc92c6c: Pull complete\n875fef68e8ab: Pull complete\n77ac76ad90fe: Pull complete\nDigest: sha256:4f1c80d88c5879067f063770c774a8ffd4de47b684333cdbe9a4ce661931b9b8\nStatus: Downloaded newer image for golang:1.14-alpine3.11\n ---> d8bc21febf89\nStep 2/28 : RUN apk add --update --no-cache build-base curl git upx &&   rm -rf /var/cache/apk/*\n ---> Running in c1ccffcf36bf\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.11/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.11/community/x86_64/APKINDEX.tar.gz\n(1/26) Installing libgcc (9.3.0-r0)\n(2/26) Installing libstdc++ (9.3.0-r0)\n(3/26) Installing binutils (2.33.1-r1)\n(4/26) Installing libmagic (5.37-r1)\n(5/26) Installing file (5.37-r1)\n(6/26) Installing gmp (6.1.2-r1)\n(7/26) Installing isl (0.18-r0)\n(8/26) Installing libgomp (9.3.0-r0)\n(9/26) Installing libatomic (9.3.0-r0)\n(10/26) Installing mpfr4 (4.0.2-r1)\n(11/26) Installing mpc1 (1.1.0-r1)\n(12/26) Installing gcc (9.3.0-r0)\n(13/26) Installing musl-dev (1.1.24-r3)\n(14/26) Installing libc-dev (0.7.2-r0)\n(15/26) Installing g++ (9.3.0-r0)\n(16/26) Installing make (4.2.1-r2)\n(17/26) Installing fortify-headers (1.1-r0)\n(18/26) Installing build-base (0.5-r1)\n(19/26) Installing nghttp2-libs (1.40.0-r1)\n(20/26) Installing libcurl (7.79.1-r0)\n(21/26) Installing curl (7.79.1-r0)\n(22/26) Installing expat (2.2.9-r1)\n(23/26) Installing pcre2 (10.34-r1)\n(24/26) Installing git (2.24.4-r0)\n(25/26) Installing ucl (1.03-r1)\n(26/26) Installing upx (3.95-r2)\nExecuting busybox-1.31.1-r9.trigger\nOK: 195 MiB in 41 packages\nRemoving intermediate container c1ccffcf36bf\n ---> 9f878eb11a6f\nStep 3/28 : ENV GOLANG_PROTOBUF_VERSION=1.3.1   GOGO_PROTOBUF_VERSION=1.2.1\n ---> Running in 9ad4e8185507\nRemoving intermediate container 9ad4e8185507\n ---> 227e26221c3a\nStep 4/28 : RUN GO111MODULE=on go get   github.com/golang/protobuf/protoc-gen-go@v${GOLANG_PROTOBUF_VERSION}   github.com/gogo/protobuf/protoc-gen-gofast@v${GOGO_PROTOBUF_VERSION}   github.com/gogo/protobuf/protoc-gen-gogo@v${GOGO_PROTOBUF_VERSION}   github.com/gogo/protobuf/protoc-gen-gogofast@v${GOGO_PROTOBUF_VERSION}   github.com/gogo/protobuf/protoc-gen-gogofaster@v${GOGO_PROTOBUF_VERSION}   github.com/gogo/protobuf/protoc-gen-gogoslick@v${GOGO_PROTOBUF_VERSION} &&   mv /go/bin/protoc-gen-go* /usr/local/bin/\n ---> Running in bfe6b8094c06\n\u001b[91mgo: downloading github.com/golang/protobuf v1.3.1\n\u001b[0m\u001b[91mgo: found github.com/golang/protobuf/protoc-gen-go in github.com/golang/protobuf v1.3.1\n\u001b[0m\u001b[91mgo: downloading github.com/gogo/protobuf v1.2.1\n\u001b[0m\u001b[91mgo: found github.com/gogo/protobuf/protoc-gen-gogofast in github.com/gogo/protobuf v1.2.1\n\u001b[0m\u001b[91mgo: found github.com/gogo/protobuf/protoc-gen-gogofaster in github.com/gogo/protobuf v1.2.1\n\u001b[0m\u001b[91mgo: found github.com/gogo/protobuf/protoc-gen-gogoslick in github.com/gogo/protobuf v1.2.1\n\u001b[0m\u001b[91mgo: found github.com/gogo/protobuf/protoc-gen-gofast in github.com/gogo/protobuf v1.2.1\n\u001b[0m\u001b[91mgo: found github.com/gogo/protobuf/protoc-gen-gogo in github.com/gogo/protobuf v1.2.1\n\u001b[0mRemoving intermediate container bfe6b8094c06\n ---> 1ce3e130acc5\nStep 5/28 : ENV GRPC_GATEWAY_VERSION=1.8.5\n ---> Running in a4d355b5a06d\nRemoving intermediate container a4d355b5a06d\n ---> 725ea505c670\nStep 6/28 : RUN curl -sSL   https://github.com/grpc-ecosystem/grpc-gateway/releases/download/v${GRPC_GATEWAY_VERSION}/protoc-gen-grpc-gateway-v${GRPC_GATEWAY_VERSION}-linux-x86_64   -o /usr/local/bin/protoc-gen-grpc-gateway &&   curl -sSL   https://github.com/grpc-ecosystem/grpc-gateway/releases/download/v${GRPC_GATEWAY_VERSION}/protoc-gen-swagger-v${GRPC_GATEWAY_VERSION}-linux-x86_64   -o /usr/local/bin/protoc-gen-swagger &&   chmod +x /usr/local/bin/protoc-gen-grpc-gateway &&   chmod +x /usr/local/bin/protoc-gen-swagger\n ---> Running in b5a781bd06f7\nRemoving intermediate container b5a781bd06f7\n ---> 7abf2aa3d573\nStep 7/28 : ENV GRPC_WEB_VERSION=1.0.4\n ---> Running in 1cba3bf05309\nRemoving intermediate container 1cba3bf05309\n ---> e8090bbd0b58\nStep 8/28 : RUN curl -sSL   https://github.com/grpc/grpc-web/releases/download/${GRPC_WEB_VERSION}/protoc-gen-grpc-web-${GRPC_WEB_VERSION}-linux-x86_64   -o /usr/local/bin/protoc-gen-grpc-web &&   chmod +x /usr/local/bin/protoc-gen-grpc-web\n ---> Running in 06aacba37596\nRemoving intermediate container 06aacba37596\n ---> d6854b8aeeb3\nStep 9/28 : ENV YARPC_VERSION=1.37.3\n ---> Running in 14d376ca397f\nRemoving intermediate container 14d376ca397f\n ---> f63ae0b56fa4\nStep 10/28 : RUN git clone --depth 1 -b v${YARPC_VERSION} https://github.com/yarpc/yarpc-go.git /go/src/go.uber.org/yarpc &&     cd /go/src/go.uber.org/yarpc &&     GO111MODULE=on go mod init &&     GO111MODULE=on go install ./encoding/protobuf/protoc-gen-yarpc-go &&     mv /go/bin/protoc-gen-yarpc-go /usr/local/bin/\n ---> Running in e8b47be56113\n\u001b[91mCloning into '/go/src/go.uber.org/yarpc'...\n\u001b[0m\u001b[91mNote: switching to '2e75705768ecde95a0a970dc799256f38e448d6e'.\n\nYou are in 'detached HEAD' state. You can look around, make experimental\nchanges and commit them, and you can discard any commits you make in this\nstate without impacting any branches by switching back to a branch.\n\nIf you want to create a new branch to retain commits you create, you may\ndo so (now or later) by using -c with the switch command. Example:\n\n  git switch -c <new-branch-name>\n\nOr undo this operation with:\n\n  git switch -\n\nTurn off this advice by setting config variable advice.detachedHead to false\n\n\u001b[0m\u001b[91mgo: creating new go.mod: module go.uber.org/yarpc\n\u001b[0m\u001b[91mgo: copying requirements from glide.lock\n\u001b[0m\u001b[91mgo: downloading go.uber.org/multierr v1.1.0\n\u001b[0m\u001b[91mgo: downloading go.uber.org/atomic v1.3.2\n\u001b[0mRemoving intermediate container e8b47be56113\n ---> 02f2bec90501\nStep 11/28 : ENV TWIRP_VERSION=5.7.0\n ---> Running in f9af685a3a6b\nRemoving intermediate container f9af685a3a6b\n ---> b1289e0e505f\nStep 12/28 : RUN curl -sSL   https://github.com/twitchtv/twirp/releases/download/v${TWIRP_VERSION}/protoc-gen-twirp-Linux-x86_64   -o /usr/local/bin/protoc-gen-twirp &&   curl -sSL   https://github.com/twitchtv/twirp/releases/download/v${TWIRP_VERSION}/protoc-gen-twirp_python-Linux-x86_64   -o /usr/local/bin/protoc-gen-twirp_python &&   chmod +x /usr/local/bin/protoc-gen-twirp &&   chmod +x /usr/local/bin/protoc-gen-twirp_python\n ---> Running in 14a3c4e74e30\nRemoving intermediate container 14a3c4e74e30\n ---> 3a4ed1717e81\nStep 13/28 : ENV PROTOBUF_VERSION=3.6.1\n ---> Running in 782f4b9e99fb\nRemoving intermediate container 782f4b9e99fb\n ---> ab5f1d211201\nStep 14/28 : RUN mkdir -p /tmp/protoc &&   curl -sSL   https://github.com/protocolbuffers/protobuf/releases/download/v${PROTOBUF_VERSION}/protoc-${PROTOBUF_VERSION}-linux-x86_64.zip   -o /tmp/protoc/protoc.zip &&   cd /tmp/protoc &&   unzip protoc.zip &&   mv /tmp/protoc/include /usr/local/include\n ---> Running in dd8538423067\nArchive:  protoc.zip\n   creating: include/\n   creating: include/google/\n   creating: include/google/protobuf/\n  inflating: include/google/protobuf/wrappers.proto\n  inflating: include/google/protobuf/field_mask.proto\n  inflating: include/google/protobuf/api.proto\n  inflating: include/google/protobuf/struct.proto\n  inflating: include/google/protobuf/descriptor.proto\n  inflating: include/google/protobuf/timestamp.proto\n   creating: include/google/protobuf/compiler/\n  inflating: include/google/protobuf/compiler/plugin.proto\n  inflating: include/google/protobuf/empty.proto\n  inflating: include/google/protobuf/any.proto\n  inflating: include/google/protobuf/source_context.proto\n  inflating: include/google/protobuf/type.proto\n  inflating: include/google/protobuf/duration.proto\n   creating: bin/\n  inflating: bin/protoc\n  inflating: readme.txt\nRemoving intermediate container dd8538423067\n ---> 0d7299d0743f\nStep 15/28 : RUN mkdir -p /tmp/prototool\n ---> Running in d7d77f8de2d4\nRemoving intermediate container d7d77f8de2d4\n ---> 8d32c510c3f9\nStep 16/28 : COPY go.mod go.sum /tmp/prototool/\n ---> 61a780a26596\nStep 17/28 : RUN cd /tmp/prototool && go mod download\n ---> Running in 33fbb0e3952a\nRemoving intermediate container 33fbb0e3952a\n ---> a12120e9d958\nStep 18/28 : COPY cmd /tmp/prototool/cmd\n ---> 8726797d61e1\nStep 19/28 : COPY internal /tmp/prototool/internal\n ---> be5b790eba95\nStep 20/28 : RUN cd /tmp/prototool &&   go install ./cmd/prototool &&   mv /go/bin/prototool /usr/local/bin/prototool\n ---> Running in f72b4dffd478\nRemoving intermediate container f72b4dffd478\n ---> b09bbbc43ba3\nStep 21/28 : RUN upx --lzma /usr/local/bin/*\n ---> Running in 172bc84293d6\n                       Ultimate Packer for eXecutables\n                          Copyright (C) 1996 - 2018\nUPX 3.95        Markus Oberhumer, Laszlo Molnar & John Reiser   Aug 26th 2018\n\n        File size         Ratio      Format      Name\n   --------------------   ------   -----------   -----------\n   6377026 ->   2751488   43.15%   linux/amd64   protoc-gen-go\n   9621116 ->   3529272   36.68%   linux/amd64   protoc-gen-gofast\n   9616424 ->   3527448   36.68%   linux/amd64   protoc-gen-gogo\n   9621199 ->   3532456   36.72%   linux/amd64   protoc-gen-gogofast\n   9630050 ->   3533048   36.69%   linux/amd64   protoc-gen-gogofaster\n   9630584 ->   3533280   36.69%   linux/amd64   protoc-gen-gogoslick\n   5433344 ->   1532800   28.21%   linux/amd64   protoc-gen-grpc-gateway\n  18216398 ->   3823816   20.99%   linux/amd64   protoc-gen-grpc-web\n   5219232 ->   1449328   27.77%   linux/amd64   protoc-gen-swagger\n   5337469 ->   2148896   40.26%   linux/amd64   protoc-gen-twirp\n   4336178 ->   1759996   40.59%   linux/amd64   protoc-gen-twirp_python\n   6351801 ->   2630608   41.42%   linux/amd64   protoc-gen-yarpc-go\n  19416691 ->   7804464   40.19%   linux/amd64   prototool\n   --------------------   ------   -----------   -----------\n 118807512 ->  41556900   34.98%                 [ 13 files ]\n\nPacked 13 files.\nRemoving intermediate container 172bc84293d6\n ---> f9abe9db70d5\nStep 22/28 : FROM alpine:latest\n ---> 49176f190c7e\nStep 23/28 : WORKDIR /work\n ---> Running in 4ccbfc7592e4\nRemoving intermediate container 4ccbfc7592e4\n ---> 22ffc443c9d4\nStep 24/28 : ENV   PROTOTOOL_PROTOC_BIN_PATH=/usr/bin/protoc   PROTOTOOL_PROTOC_WKT_PATH=/usr/include   GRPC_VERSION=1.25.0   PROTOBUF_VERSION=3.11.2   ALPINE_GRPC_VERSION_SUFFIX=r1   ALPINE_PROTOBUF_VERSION_SUFFIX=r1\n ---> Running in 37366186f3b6\nRemoving intermediate container 37366186f3b6\n ---> e05caa5cb36c\nStep 25/28 : RUN echo 'http://dl-cdn.alpinelinux.org/alpine/edge/testing' >> /etc/apk/repositories &&   apk add --update --no-cache bash curl git grpc=${GRPC_VERSION}-${ALPINE_GRPC_VERSION_SUFFIX} protobuf=${PROTOBUF_VERSION}-${ALPINE_PROTOBUF_VERSION_SUFFIX} &&   rm -rf /var/cache/apk/*\n ---> Running in f377f95aa60d\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/edge/testing/x86_64/APKINDEX.tar.gz\n\u001b[91mERROR: unable to select packages:\n\u001b[0m  grpc-1.50.1-r0:\n    breaks: world[grpc=1.25.0-r1]\n  protobuf-3.21.9-r0:\n    breaks: world[protobuf=3.11.2-r1]\nRemoving intermediate container f377f95aa60d\n","stderr":"The command '/bin/sh -c echo 'http://dl-cdn.alpinelinux.org/alpine/edge/testing' >> /etc/apk/repositories &&   apk add --update --no-cache bash curl git grpc=${GRPC_VERSION}-${ALPINE_GRPC_VERSION_SUFFIX} protobuf=${PROTOBUF_VERSION}-${ALPINE_PROTOBUF_VERSION_SUFFIX} &&   rm -rf /var/cache/apk/*' returned a non-zero code: 2\n"},"endTime":1672595086054}