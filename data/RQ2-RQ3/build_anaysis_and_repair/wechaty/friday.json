{"repository":"https://github.com/wechaty/friday","dockerfilePath":"Dockerfile","startTime":1673025935210,"endTime":1673026711881,"clone":{"startTime":1673025935210,"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/wechaty/friday'...\n","error":null,"endTime":1673025936074,"commit":"2a4dbf11721129de45d8cfc07659439f497bc9e1"},"originalBuild":{"startTime":1673025936277,"endTime":1673026460743,"error":null,"stdout":"Sending build context to Docker daemon   1.11MB\r\r\nStep 1/9 : FROM wechaty/wechaty:next\nnext: Pulling from wechaty/wechaty\n67e8aa6c8bbc: Pulling fs layer\n5c2093b8757e: Pulling fs layer\nd76cdecae78f: Pulling fs layer\n5a9609ab50de: Pulling fs layer\na966ca6bc606: Pulling fs layer\n5d5ceca6c924: Pulling fs layer\nf71433b66bab: Pulling fs layer\ncfe7f90beeec: Pulling fs layer\nd436b60c20fb: Pulling fs layer\n2aefab163fa1: Pulling fs layer\n09bb19a6c050: Pulling fs layer\na966ca6bc606: Waiting\n1871f5258f22: Pulling fs layer\n5a9609ab50de: Waiting\n09d222ddb4e7: Pulling fs layer\n5d5ceca6c924: Waiting\nf71433b66bab: Waiting\nd436b60c20fb: Waiting\n2aefab163fa1: Waiting\n09bb19a6c050: Waiting\ncfe7f90beeec: Waiting\n1871f5258f22: Waiting\n09d222ddb4e7: Waiting\n67e8aa6c8bbc: Verifying Checksum\n67e8aa6c8bbc: Download complete\n5a9609ab50de: Verifying Checksum\n5a9609ab50de: Download complete\na966ca6bc606: Verifying Checksum\na966ca6bc606: Download complete\nd76cdecae78f: Verifying Checksum\nd76cdecae78f: Download complete\nf71433b66bab: Verifying Checksum\nf71433b66bab: Download complete\ncfe7f90beeec: Verifying Checksum\ncfe7f90beeec: Download complete\n67e8aa6c8bbc: Pull complete\nd436b60c20fb: Verifying Checksum\nd436b60c20fb: Download complete\n5c2093b8757e: Verifying Checksum\n5c2093b8757e: Download complete\n09bb19a6c050: Verifying Checksum\n09bb19a6c050: Download complete\n5d5ceca6c924: Verifying Checksum\n5d5ceca6c924: Download complete\n1871f5258f22: Verifying Checksum\n1871f5258f22: Download complete\n2aefab163fa1: Verifying Checksum\n2aefab163fa1: Download complete\n09d222ddb4e7: Download complete\n5c2093b8757e: Pull complete\nd76cdecae78f: Pull complete\n5a9609ab50de: Pull complete\na966ca6bc606: Pull complete\n5d5ceca6c924: Pull complete\nf71433b66bab: Pull complete\ncfe7f90beeec: Pull complete\nd436b60c20fb: Pull complete\n2aefab163fa1: Pull complete\n09bb19a6c050: Pull complete\n1871f5258f22: Pull complete\n09d222ddb4e7: Pull complete\nDigest: sha256:64292e2aba3893aa58e00d178ff6ca1676f72122cbfc154c6736c24292a57793\nStatus: Downloaded newer image for wechaty/wechaty:next\n ---> 5c69c7ee92a8\nStep 2/9 : ARG NODE_ENV\n ---> Running in 94e33d4582ed\nRemoving intermediate container 94e33d4582ed\n ---> be1115629559\nStep 3/9 : ENV NODE_ENV $NODE_ENV\n ---> Running in 42d88ded95bf\nRemoving intermediate container 42d88ded95bf\n ---> ccb84daa9dfa\nStep 4/9 : WORKDIR /bot\n ---> Running in ceeb32ddf3eb\nRemoving intermediate container ceeb32ddf3eb\n ---> 8838a0ddae12\nStep 5/9 : COPY package.json .\n ---> 60d50cf133fc\nStep 6/9 : RUN jq 'del(.dependencies.wechaty)' package.json | sponge package.json     && rm -fr node_modules package-lock.json     && npm install     && sudo rm -fr /tmp/* ~/.npm\n ---> Running in 1b8db7a75958\n\u001b[91mnpm WARN deprecated crypto@1.0.1: This package is no longer supported. It's now a built-in Node module. If you've depended on crypto, you should switch to the one that's built-in.\n\u001b[0m\u001b[91mnpm WARN deprecated har-validator@5.1.5: this library is no longer supported\n\u001b[0m\u001b[91mnpm WARN deprecated @hapi/address@2.1.4: Moved to 'npm install @sideway/address'\n\u001b[0m\u001b[91mnpm WARN deprecated @hapi/topo@3.1.6: This version has been deprecated and is no longer supported or maintained\n\u001b[0m\u001b[91mnpm WARN deprecated @hapi/formula@1.2.0: Moved to 'npm install @sideway/formula'\n\u001b[0m\u001b[91mnpm WARN deprecated @hapi/pinpoint@1.0.2: Moved to 'npm install @sideway/pinpoint'\n\u001b[0m\u001b[91mnpm WARN deprecated sourcemap-codec@1.4.8: Please use @jridgewell/sourcemap-codec instead\n\u001b[0m\u001b[91mnpm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142\n\u001b[0m\u001b[91mnpm WARN deprecated @hapi/hoek@8.5.1: This version has been deprecated and is no longer supported or maintained\n\u001b[0m\u001b[91mnpm WARN deprecated @hapi/joi@16.1.8: Switch to 'npm install joi'\n\u001b[0m\u001b[91mnpm WARN deprecated @types/read-pkg-up@6.0.0: This is a stub types definition. read-pkg-up provides its own type definitions, so you do not need this installed.\n\u001b[0m\u001b[91mnpm WARN deprecated uuid@3.4.0: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.\n\u001b[0m\u001b[91mnpm WARN deprecated uuid@3.4.0: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.\n\u001b[0m\u001b[91mnpm WARN deprecated uuid@3.4.0: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.\n\u001b[0m\u001b[91mnpm WARN deprecated puppeteer@13.7.0: < 18.1.0 is no longer supported\n\u001b[0m\u001b[91mnpm WARN deprecated core-js@2.6.12: core-js@<3.23.3 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Some versions have web compatibility issues. Please, upgrade your dependencies to the actual version of core-js.\n\u001b[0m\n> friday.bot@1.14.3 postinstall\n> chmod +r node_modules/node-jq/bin/jq\n\n\nadded 1612 packages, and audited 1775 packages in 3m\n\n164 packages are looking for funding\n  run `npm fund` for details\n\n37 vulnerabilities (2 low, 17 moderate, 17 high, 1 critical)\n\nTo address issues that do not require attention, run:\n  npm audit fix\n\nTo address all issues possible (including breaking changes), run:\n  npm audit fix --force\n\nSome issues need review, and may require choosing\na different dependency.\n\nRun `npm audit` for details.\n\u001b[91mnpm notice \nnpm notice New major version of npm available! 8.5.5 -> 9.2.0\nnpm notice Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm notice Run `npm install -g npm@9.2.0` to update!\n\u001b[0m\u001b[91mnpm notice \n\u001b[0mRemoving intermediate container 1b8db7a75958\n ---> 0b443015cb0e\nStep 7/9 : COPY . .\n ---> 45114359c1c4\nStep 8/9 : RUN npm run build\n ---> Running in 23286fe65f36\n\n> friday.bot@1.14.3 build\n> tsc\n\n\u001b[91mnpm\u001b[0m\u001b[91m \u001b[0m\u001b[91mnotice \n\u001b[0m\u001b[91mnpm\u001b[0m\u001b[91m \u001b[0m\u001b[91mnotice\u001b[0m\u001b[91m New major version of npm available! 8.5.5 -> 9.2.0\nnpm\u001b[0m\u001b[91m \u001b[0m\u001b[91mnotice\u001b[0m\u001b[91m Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm\u001b[0m\u001b[91m notice\u001b[0m\u001b[91m Run `npm install -g npm@9.2.0` to update!\n\u001b[0m\u001b[91mnpm\u001b[0m\u001b[91m \u001b[0m\u001b[91mnotice\u001b[0m\u001b[91m \n\u001b[0mRemoving intermediate container 23286fe65f36\n ---> dd3388e8e63a\nStep 9/9 : CMD [ \"npm\", \"start\" ]\n ---> Running in 4d718891cb76\nRemoving intermediate container 4d718891cb76\n ---> 9e481785bf99\nSuccessfully built 9e481785bf99\nSuccessfully tagged friday:latest\n","stderr":"","imageSize":3446448980},"repair":{"startTime":1673026460814,"endTime":1673026460899,"violations":[{"name":"npmCacheCleanAfterInstall","position":{"start":11,"end":11,"columnStart":7,"columnEnd":18}}],"repairedDockerfile":"# FROM wechaty/onbuild:next\nFROM wechaty/wechaty:next\n\nARG NODE_ENV\nENV NODE_ENV $NODE_ENV\n\nWORKDIR /bot\n\nCOPY package.json .\nRUN jq 'del(.dependencies.wechaty)' package.json | sponge package.json \\\n    && rm -fr node_modules package-lock.json \\\n    && npm install \\\n    && sudo rm -fr /tmp/* ~/.npm && npm cache clean --force;\nCOPY . .\nRUN npm run build\n\nCMD [ \"npm\", \"start\" ]\n"},"repairedBuild":{"startTime":1673026462559,"endTime":1673026709614,"error":null,"stdout":"Sending build context to Docker daemon   1.11MB\r\r\nStep 1/9 : FROM wechaty/wechaty:next\n ---> 5c69c7ee92a8\nStep 2/9 : ARG NODE_ENV\n ---> Running in 6266383ab195\nRemoving intermediate container 6266383ab195\n ---> 7a3216cae3f5\nStep 3/9 : ENV NODE_ENV $NODE_ENV\n ---> Running in 9179cf8e46c1\nRemoving intermediate container 9179cf8e46c1\n ---> f608c93eefa1\nStep 4/9 : WORKDIR /bot\n ---> Running in a8bd5b70b6e9\nRemoving intermediate container a8bd5b70b6e9\n ---> 2658a3a75989\nStep 5/9 : COPY package.json .\n ---> ec47b00c4b0c\nStep 6/9 : RUN jq 'del(.dependencies.wechaty)' package.json | sponge package.json     && rm -fr node_modules package-lock.json     && npm install     && sudo rm -fr /tmp/* ~/.npm && npm cache clean --force;\n ---> Running in 1772c428ab13\n\u001b[91mnpm WARN deprecated crypto@1.0.1: This package is no longer supported. It's now a built-in Node module. If you've depended on crypto, you should switch to the one that's built-in.\n\u001b[0m\u001b[91mnpm WARN deprecated har-validator@5.1.5: this library is no longer supported\n\u001b[0m\u001b[91mnpm WARN deprecated @hapi/topo@3.1.6: This version has been deprecated and is no longer supported or maintained\n\u001b[0m\u001b[91mnpm WARN deprecated @hapi/address@2.1.4: Moved to 'npm install @sideway/address'\n\u001b[0m\u001b[91mnpm WARN deprecated @hapi/pinpoint@1.0.2: Moved to 'npm install @sideway/pinpoint'\n\u001b[0m\u001b[91mnpm WARN deprecated @hapi/formula@1.2.0: Moved to 'npm install @sideway/formula'\n\u001b[0m\u001b[91mnpm WARN deprecated sourcemap-codec@1.4.8: Please use @jridgewell/sourcemap-codec instead\n\u001b[0m\u001b[91mnpm WARN deprecated @hapi/hoek@8.5.1: This version has been deprecated and is no longer supported or maintained\n\u001b[0m\u001b[91mnpm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142\n\u001b[0m\u001b[91mnpm WARN deprecated @types/read-pkg-up@6.0.0: This is a stub types definition. read-pkg-up provides its own type definitions, so you do not need this installed.\n\u001b[0m\u001b[91mnpm WARN deprecated @hapi/joi@16.1.8: Switch to 'npm install joi'\n\u001b[0m\u001b[91mnpm WARN deprecated uuid@3.4.0: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.\n\u001b[0m\u001b[91mnpm WARN deprecated uuid@3.4.0: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.\n\u001b[0m\u001b[91mnpm WARN deprecated uuid@3.4.0: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.\n\u001b[0m\u001b[91mnpm WARN deprecated puppeteer@13.7.0: < 18.1.0 is no longer supported\n\u001b[0m\u001b[91mnpm WARN deprecated core-js@2.6.12: core-js@<3.23.3 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Some versions have web compatibility issues. Please, upgrade your dependencies to the actual version of core-js.\n\u001b[0m\n> friday.bot@1.14.3 postinstall\n> chmod +r node_modules/node-jq/bin/jq\n\n\nadded 1612 packages, and audited 1775 packages in 2m\n\n164 packages are looking for funding\n  run `npm fund` for details\n\n37 vulnerabilities (2 low, 17 moderate, 17 high, 1 critical)\n\nTo address issues that do not require attention, run:\n  npm audit fix\n\nTo address all issues possible (including breaking changes), run:\n  npm audit fix --force\n\nSome issues need review, and may require choosing\na different dependency.\n\nRun `npm audit` for details.\n\u001b[91mnpm\u001b[0m\u001b[91m notice\u001b[0m\u001b[91m \nnpm notice\u001b[0m\u001b[91m New major version of npm available! 8.5.5 -> 9.2.0\nnpm \u001b[0m\u001b[91mnotice Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm notice\u001b[0m\u001b[91m Run `npm install -g npm@9.2.0` to update!\nnpm notice \n\u001b[0m\u001b[91mnpm\u001b[0m\u001b[91m WARN using --force\u001b[0m\u001b[91m Recommended protections disabled.\n\u001b[0mRemoving intermediate container 1772c428ab13\n ---> e7f7934ce753\nStep 7/9 : COPY . .\n ---> 19c4b3dd5520\nStep 8/9 : RUN npm run build\n ---> Running in ec009f32777d\n\n> friday.bot@1.14.3 build\n> tsc\n\n\u001b[91mnpm\u001b[0m\u001b[91m \u001b[0m\u001b[91mnotice\u001b[0m\u001b[91m \n\u001b[0m\u001b[91mnpm\u001b[0m\u001b[91m \u001b[0m\u001b[91mnotice\u001b[0m\u001b[91m New major version of npm available! 8.5.5 -> 9.2.0\n\u001b[0m\u001b[91mnpm \u001b[0m\u001b[91mnotice\u001b[0m\u001b[91m Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\n\u001b[0m\u001b[91mnpm \u001b[0m\u001b[91mnotice\u001b[0m\u001b[91m Run `npm install -g npm@9.2.0` to update!\n\u001b[0m\u001b[91mnpm\u001b[0m\u001b[91m \u001b[0m\u001b[91mnotice\u001b[0m\u001b[91m \n\u001b[0mRemoving intermediate container ec009f32777d\n ---> 580d02ac26fe\nStep 9/9 : CMD [ \"npm\", \"start\" ]\n ---> Running in 62c50ab48619\nRemoving intermediate container 62c50ab48619\n ---> bad67c858c6c\nSuccessfully built bad67c858c6c\nSuccessfully tagged friday:latest\n","stderr":"","imageSize":3446450515}}