{"repository":"https://github.com/teddit-net/teddit","dockerfilePath":"Dockerfile","startTime":1672203932963,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/teddit-net/teddit'...\n","error":null,"commit":"4b32040b32a8b313845b3963e49262c0d1276ca5"},"originalBuild":{"startTimestamp":1672203933916,"endTimestamp":1672203968445,"error":null,"stdout":"Sending build context to Docker daemon  738.8kB\r\r\nStep 1/8 : FROM node:14.16-alpine\n14.16-alpine: Pulling from library/node\nddad3d7c1e96: Pulling fs layer\nf54058897200: Pulling fs layer\nb9eac74e56b4: Pulling fs layer\n13e85f13e870: Pulling fs layer\nddad3d7c1e96: Verifying Checksum\nddad3d7c1e96: Download complete\nf54058897200: Verifying Checksum\nf54058897200: Download complete\nddad3d7c1e96: Pull complete\n13e85f13e870: Verifying Checksum\n13e85f13e870: Download complete\nb9eac74e56b4: Verifying Checksum\nb9eac74e56b4: Download complete\nf54058897200: Pull complete\nb9eac74e56b4: Pull complete\n13e85f13e870: Pull complete\nDigest: sha256:ed51af876dd7932ce5c1e3b16c2e83a3f58419d824e366de1f7b00f40c848c40\nStatus: Downloaded newer image for node:14.16-alpine\n ---> c88490a07c2d\nStep 2/8 : RUN apk add ffmpeg\n ---> Running in 78aad713aae7\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.11/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.11/community/x86_64/APKINDEX.tar.gz\n(1/44) Installing sdl2 (2.0.10-r0)\n(2/44) Installing libxau (1.0.9-r0)\n(3/44) Installing libbsd (0.10.0-r0)\n(4/44) Installing libxdmcp (1.1.3-r0)\n(5/44) Installing libxcb (1.13.1-r0)\n(6/44) Installing libx11 (1.6.12-r1)\n(7/44) Installing alsa-lib (1.2.1.2-r0)\n(8/44) Installing expat (2.2.9-r1)\n(9/44) Installing libbz2 (1.0.8-r1)\n(10/44) Installing libpng (1.6.37-r1)\n(11/44) Installing freetype (2.10.1-r1)\n(12/44) Installing libuuid (2.34-r1)\n(13/44) Installing fontconfig (2.13.1-r2)\n(14/44) Installing fribidi (1.0.8-r0)\n(15/44) Installing libass (0.14.0-r0)\n(16/44) Installing gmp (6.1.2-r1)\n(17/44) Installing nettle (3.5.1-r0)\n(18/44) Installing libffi (3.2.1-r6)\n(19/44) Installing p11-kit (0.23.18.1-r1)\n(20/44) Installing libtasn1 (4.15.0-r0)\n(21/44) Installing libunistring (0.9.10-r0)\n(22/44) Installing gnutls (3.6.15-r1)\n(23/44) Installing ncurses-terminfo-base (6.1_p20200118-r4)\n(24/44) Installing ncurses-libs (6.1_p20200118-r4)\n(25/44) Installing lame (3.100-r0)\n(26/44) Installing opus (1.3.1-r0)\n(27/44) Installing libogg (1.3.4-r0)\n(28/44) Installing libtheora (1.1.1-r14)\n(29/44) Installing libjpeg-turbo (2.0.4-r1)\n(30/44) Installing v4l-utils-libs (1.18.0-r0)\n(31/44) Installing libxext (1.3.4-r0)\n(32/44) Installing libxfixes (5.0.3-r2)\n(33/44) Installing libpciaccess (0.16-r0)\n(34/44) Installing libdrm (2.4.100-r0)\n(35/44) Installing wayland-libs-client (1.17.0-r0)\n(36/44) Installing libva (2.6.0-r0)\n(37/44) Installing libvdpau (1.3-r0)\n(38/44) Installing libvorbis (1.3.6-r2)\n(39/44) Installing libvpx (1.8.1-r0)\n(40/44) Installing x264-libs (20191119-r0)\n(41/44) Installing x265-libs (3.2.1-r0)\n(42/44) Installing xvidcore (1.3.5-r0)\n(43/44) Installing ffmpeg-libs (4.2.4-r0)\n(44/44) Installing ffmpeg (4.2.4-r0)\nExecuting busybox-1.31.1-r10.trigger\nOK: 59 MiB in 60 packages\nRemoving intermediate container 78aad713aae7\n ---> 13d003839580\nStep 3/8 : WORKDIR /teddit\n ---> Running in 1a4de40d62b0\nRemoving intermediate container 1a4de40d62b0\n ---> 02f56d455d50\nStep 4/8 : COPY . ./\n ---> 5dda2851e1a5\nStep 5/8 : RUN npm install --no-optional\n ---> Running in acd6ebaa876c\nadded 154 packages from 115 contributors and audited 154 packages in 4.319s\n\n8 packages are looking for funding\n  run `npm fund` for details\n\nfound 8 vulnerabilities (1 moderate, 6 high, 1 critical)\n  run `npm audit fix` to fix them, or `npm audit` for details\nRemoving intermediate container acd6ebaa876c\n ---> 6f58ba0c6723\nStep 6/8 : COPY config.js.template ./config.js\n ---> c1ffc800f54d\nStep 7/8 : RUN find ./static/ -type d -exec chmod -R 777 {} \\;\n ---> Running in d50e1a9c1198\nRemoving intermediate container d50e1a9c1198\n ---> ddd5ccfa1966\nStep 8/8 : CMD npm start\n ---> Running in 796b56710fc9\nRemoving intermediate container 796b56710fc9\n ---> 875dbb3e8830\nSuccessfully built 875dbb3e8830\nSuccessfully tagged teddit:latest\n","stderr":"","imageSize":187852104},"repair":{"violations":[{"name":"npmCacheCleanAfterInstall","position":{"start":9,"end":9,"columnStart":4,"columnEnd":29}},{"name":"apkAddUseNoCache","position":{"start":4,"end":4,"columnStart":4,"columnEnd":18}}],"repairedDockerfile":"# Use LTS Node.js base image\nFROM node:14.16-alpine\n\n# Video support dependency\nRUN apk add --no-cache ffmpeg\n\n# Install NPM dependencies and copy the project\nWORKDIR /teddit\nCOPY . ./\nRUN npm install --no-optional\nCOPY config.js.template ./config.js\n\nRUN find ./static/ -type d -exec chmod -R 777 {} \\;\n\nCMD npm start\n"},"repairedBuild":{"startTimestamp":1672203968948,"endTimestamp":1672203985174,"error":null,"stdout":"Sending build context to Docker daemon  738.8kB\r\r\nStep 1/8 : FROM node:14.16-alpine\n ---> c88490a07c2d\nStep 2/8 : RUN apk add --no-cache ffmpeg\n ---> Running in 221cd78d6071\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.11/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.11/community/x86_64/APKINDEX.tar.gz\n(1/44) Installing sdl2 (2.0.10-r0)\n(2/44) Installing libxau (1.0.9-r0)\n(3/44) Installing libbsd (0.10.0-r0)\n(4/44) Installing libxdmcp (1.1.3-r0)\n(5/44) Installing libxcb (1.13.1-r0)\n(6/44) Installing libx11 (1.6.12-r1)\n(7/44) Installing alsa-lib (1.2.1.2-r0)\n(8/44) Installing expat (2.2.9-r1)\n(9/44) Installing libbz2 (1.0.8-r1)\n(10/44) Installing libpng (1.6.37-r1)\n(11/44) Installing freetype (2.10.1-r1)\n(12/44) Installing libuuid (2.34-r1)\n(13/44) Installing fontconfig (2.13.1-r2)\n(14/44) Installing fribidi (1.0.8-r0)\n(15/44) Installing libass (0.14.0-r0)\n(16/44) Installing gmp (6.1.2-r1)\n(17/44) Installing nettle (3.5.1-r0)\n(18/44) Installing libffi (3.2.1-r6)\n(19/44) Installing p11-kit (0.23.18.1-r1)\n(20/44) Installing libtasn1 (4.15.0-r0)\n(21/44) Installing libunistring (0.9.10-r0)\n(22/44) Installing gnutls (3.6.15-r1)\n(23/44) Installing ncurses-terminfo-base (6.1_p20200118-r4)\n(24/44) Installing ncurses-libs (6.1_p20200118-r4)\n(25/44) Installing lame (3.100-r0)\n(26/44) Installing opus (1.3.1-r0)\n(27/44) Installing libogg (1.3.4-r0)\n(28/44) Installing libtheora (1.1.1-r14)\n(29/44) Installing libjpeg-turbo (2.0.4-r1)\n(30/44) Installing v4l-utils-libs (1.18.0-r0)\n(31/44) Installing libxext (1.3.4-r0)\n(32/44) Installing libxfixes (5.0.3-r2)\n(33/44) Installing libpciaccess (0.16-r0)\n(34/44) Installing libdrm (2.4.100-r0)\n(35/44) Installing wayland-libs-client (1.17.0-r0)\n(36/44) Installing libva (2.6.0-r0)\n(37/44) Installing libvdpau (1.3-r0)\n(38/44) Installing libvorbis (1.3.6-r2)\n(39/44) Installing libvpx (1.8.1-r0)\n(40/44) Installing x264-libs (20191119-r0)\n(41/44) Installing x265-libs (3.2.1-r0)\n(42/44) Installing xvidcore (1.3.5-r0)\n(43/44) Installing ffmpeg-libs (4.2.4-r0)\n(44/44) Installing ffmpeg (4.2.4-r0)\nExecuting busybox-1.31.1-r10.trigger\nOK: 59 MiB in 60 packages\nRemoving intermediate container 221cd78d6071\n ---> 41fabc72172e\nStep 3/8 : WORKDIR /teddit\n ---> Running in 40844a49559c\nRemoving intermediate container 40844a49559c\n ---> 8e2273cde2d4\nStep 4/8 : COPY . ./\n ---> 27c4df429e32\nStep 5/8 : RUN npm install --no-optional\n ---> Running in 423f1b60fe23\nadded 154 packages from 115 contributors and audited 154 packages in 2.268s\n\n8 packages are looking for funding\n  run `npm fund` for details\n\nfound 8 vulnerabilities (1 moderate, 6 high, 1 critical)\n  run `npm audit fix` to fix them, or `npm audit` for details\nRemoving intermediate container 423f1b60fe23\n ---> a9c2f0b26151\nStep 6/8 : COPY config.js.template ./config.js\n ---> 073f8824adcb\nStep 7/8 : RUN find ./static/ -type d -exec chmod -R 777 {} \\;\n ---> Running in 68af5043fa7d\nRemoving intermediate container 68af5043fa7d\n ---> 71a1e2909b47\nStep 8/8 : CMD npm start\n ---> Running in 211ac41b5d27\nRemoving intermediate container 211ac41b5d27\n ---> 1a7c3be911de\nSuccessfully built 1a7c3be911de\nSuccessfully tagged teddit:latest\n","stderr":"","imageSize":186271729},"endTime":1672203985895}