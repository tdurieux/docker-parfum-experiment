{"repository":"https://github.com/derhuerst/db-rest","dockerfilePath":"Dockerfile","startTime":1672864040941,"endTime":1672864655752,"clone":{"startTime":1672864041364,"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/derhuerst/db-rest'...\n","error":null,"endTime":1672864042439,"commit":"779e67886bbaf550d52ff6c6e826bd7a866cf851"},"originalBuild":{"startTime":1672864043186,"endTime":1672864350641,"error":null,"stdout":"Sending build context to Docker daemon  69.63kB\r\r\nStep 1/24 : FROM node:18-alpine as builder\n18-alpine: Pulling from library/node\nDigest: sha256:a136ed7b0df71082cdb171f36d640ea3b392a5c70401c642326acee767b8c540\nStatus: Downloaded newer image for node:18-alpine\n ---> 6d7b7852bcd3\nStep 2/24 : WORKDIR /app\n ---> Running in ba9b54941d41\nRemoving intermediate container ba9b54941d41\n ---> 34cc195afa0d\nStep 3/24 : RUN apk add --update git bash\n ---> Running in 032b3de0f4b7\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/11) Installing ncurses-terminfo-base (6.3_p20221119-r0)\n(2/11) Installing ncurses-libs (6.3_p20221119-r0)\n(3/11) Installing readline (8.2.0-r0)\n(4/11) Installing bash (5.2.15-r0)\nExecuting bash-5.2.15-r0.post-install\n(5/11) Installing ca-certificates (20220614-r3)\n(6/11) Installing brotli-libs (1.0.9-r9)\n(7/11) Installing nghttp2-libs (1.51.0-r0)\n(8/11) Installing libcurl (7.87.0-r0)\n(9/11) Installing libexpat (2.5.0-r0)\n(10/11) Installing pcre2 (10.42-r0)\n(11/11) Installing git (2.38.2-r0)\nExecuting busybox-1.35.0-r29.trigger\nExecuting ca-certificates-20220614-r3.trigger\nOK: 21 MiB in 28 packages\nRemoving intermediate container 032b3de0f4b7\n ---> d61236a7425c\nStep 4/24 : ADD package.json /app\n ---> 09e70e993b00\nStep 5/24 : RUN npm install\n ---> Running in f28caa77de9e\n\nadded 465 packages, and audited 466 packages in 39s\n\n170 packages are looking for funding\n  run `npm fund` for details\n\n3 high severity vulnerabilities\n\nSome issues need review, and may require choosing\na different dependency.\n\nRun `npm audit` for details.\n\u001b[91mnpm notice \nnpm notice New major version of npm available! 8.19.2 -> 9.2.0\nnpm notice Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\n\u001b[0m\u001b[91mnpm notice Run `npm install -g npm@9.2.0` to update!\nnpm\u001b[0m\u001b[91m notice\u001b[0m\u001b[91m \n\u001b[0mRemoving intermediate container f28caa77de9e\n ---> 1734bec10bb7\nStep 6/24 : ADD . /app\n ---> 4eb18ec55eb5\nStep 7/24 : RUN npm run build\n ---> Running in 84787e1f4892\n\n> db-rest@6.0.0 build\n> npm run docs\n\n\n> db-rest@6.0.0 docs\n> node api-docs.js >docs/api.md && build-technical-doc --syntax-stylesheet-url /syntax.css <docs/readme.md >docs/index.html && build-technical-doc --syntax-stylesheet-url /syntax.css <docs/getting-started.md >docs/getting-started.html && build-technical-doc --syntax-stylesheet-url /syntax.css <docs/api.md >docs/api.html && build-technical-doc --syntax-stylesheet github >docs/syntax.css\n\nRemoving intermediate container 84787e1f4892\n ---> e7c1d024fc55\nStep 8/24 : FROM node:18-alpine\n ---> 6d7b7852bcd3\nStep 9/24 : LABEL org.opencontainers.image.title=\"db-rest\"\n ---> Running in 336c0a8d5b55\nRemoving intermediate container 336c0a8d5b55\n ---> 345358e0bb04\nStep 10/24 : LABEL org.opencontainers.image.description=\"A clean REST API wrapping around the Deutsche Bahn API.\"\n ---> Running in c9b631afd943\nRemoving intermediate container c9b631afd943\n ---> db627e3ff32e\nStep 11/24 : LABEL org.opencontainers.image.authors=\"Jannis R <mail@jannisr.de>\"\n ---> Running in 8c712057e3c2\nRemoving intermediate container 8c712057e3c2\n ---> 000186be5034\nStep 12/24 : LABEL org.opencontainers.image.documentation=\"https://github.com/derhuerst/db-rest/tree/6\"\n ---> Running in d664b04928d5\nRemoving intermediate container d664b04928d5\n ---> 46ae15fa4833\nStep 13/24 : LABEL org.opencontainers.image.source=\"https://github.com/derhuerst/db-rest\"\n ---> Running in b6ca8a4d43eb\nRemoving intermediate container b6ca8a4d43eb\n ---> b85dbf2f7df0\nStep 14/24 : LABEL org.opencontainers.image.revision=\"6\"\n ---> Running in b2e04ea73bec\nRemoving intermediate container b2e04ea73bec\n ---> f5129d0a390f\nStep 15/24 : LABEL org.opencontainers.image.licenses=\"ISC\"\n ---> Running in b7c9ba9169b6\nRemoving intermediate container b7c9ba9169b6\n ---> 9e81e462d014\nStep 16/24 : WORKDIR /app\n ---> Running in 9240ee20e5d4\nRemoving intermediate container 9240ee20e5d4\n ---> 2d2973037d41\nStep 17/24 : ADD package.json /app\n ---> 6cd72ed0ff4b\nStep 18/24 : RUN npm install --production && npm cache clean --force\n ---> Running in fd2caa1c7e6a\n\u001b[91mnpm\u001b[0m\u001b[91m WARN\u001b[0m\u001b[91m config production Use `--omit=dev` instead.\n\u001b[0m\nadded 180 packages, and audited 181 packages in 24s\n\n22 packages are looking for funding\n  run `npm fund` for details\n\nfound 0 vulnerabilities\n\u001b[91mnpm notice \nnpm notice New major version of npm available! 8.19.2 -> 9.2.0\nnpm notice Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm notice Run `npm install -g npm@9.2.0` to update!\nnpm notice \n\u001b[0m\u001b[91mnpm\u001b[0m\u001b[91m WARN using --force Recommended protections disabled.\n\u001b[0mRemoving intermediate container fd2caa1c7e6a\n ---> 9b72d4426278\nStep 19/24 : ADD . /app\n ---> 67ba0c61bf08\nStep 20/24 : COPY --from=builder /app/docs ./docs\n ---> bd30cd5b246a\nStep 21/24 : EXPOSE 3000\n ---> Running in 191e7d69a747\nRemoving intermediate container 191e7d69a747\n ---> ab8ac1a54271\nStep 22/24 : ENV HOSTNAME v6.db.transport.rest\n ---> Running in cf042184d833\nRemoving intermediate container cf042184d833\n ---> 5d012a7447ac\nStep 23/24 : ENV PORT 3000\n ---> Running in 40dd06e7a580\nRemoving intermediate container 40dd06e7a580\n ---> 640386c7cf0f\nStep 24/24 : CMD [\"node\", \"index.js\"]\n ---> Running in ecc729a473d0\nRemoving intermediate container ecc729a473d0\n ---> 5cdd9a382933\nSuccessfully built 5cdd9a382933\nSuccessfully tagged db-rest:latest\n","stderr":"","imageSize":212424688},"repair":{"startTime":1672864350705,"endTime":1672864350780,"violations":[{"name":"npmCacheCleanAfterInstall","position":{"start":6,"end":6,"columnStart":4,"columnEnd":15}},{"name":"apkAddUseNoCache","position":{"start":4,"end":4,"columnStart":4,"columnEnd":29}}],"repairedDockerfile":"FROM node:18-alpine as builder\nWORKDIR /app\n\n# install dependencies\nRUN apk add --no-cache --update git bash\nADD package.json /app\nRUN npm install && npm cache clean --force;\n\n# build documentation\nADD . /app\nRUN npm run build\n\n# ---\n\nFROM node:18-alpine\nLABEL org.opencontainers.image.title=\"db-rest\"\nLABEL org.opencontainers.image.description=\"A clean REST API wrapping around the Deutsche Bahn API.\"\nLABEL org.opencontainers.image.authors=\"Jannis R <mail@jannisr.de>\"\nLABEL org.opencontainers.image.documentation=\"https://github.com/derhuerst/db-rest/tree/6\"\nLABEL org.opencontainers.image.source=\"https://github.com/derhuerst/db-rest\"\nLABEL org.opencontainers.image.revision=\"6\"\nLABEL org.opencontainers.image.licenses=\"ISC\"\nWORKDIR /app\n\n# install dependencies\nADD package.json /app\nRUN npm install --production && npm cache clean --force\n\n# add source code\nADD . /app\nCOPY --from=builder /app/docs ./docs\n\nEXPOSE 3000\n\nENV HOSTNAME v6.db.transport.rest\nENV PORT 3000\n\nCMD [\"node\", \"index.js\"]\n"},"repairedBuild":{"startTime":1672864351612,"endTime":1672864652937,"error":null,"stdout":"Sending build context to Docker daemon  69.63kB\r\r\nStep 1/24 : FROM node:18-alpine as builder\n ---> 6d7b7852bcd3\nStep 2/24 : WORKDIR /app\n ---> Running in fe67f9a02525\nRemoving intermediate container fe67f9a02525\n ---> 1ecf71dc9641\nStep 3/24 : RUN apk add --no-cache --update git bash\n ---> Running in 0224cc6defe7\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/11) Installing ncurses-terminfo-base (6.3_p20221119-r0)\n(2/11) Installing ncurses-libs (6.3_p20221119-r0)\n(3/11) Installing readline (8.2.0-r0)\n(4/11) Installing bash (5.2.15-r0)\nExecuting bash-5.2.15-r0.post-install\n(5/11) Installing ca-certificates (20220614-r3)\n(6/11) Installing brotli-libs (1.0.9-r9)\n(7/11) Installing nghttp2-libs (1.51.0-r0)\n(8/11) Installing libcurl (7.87.0-r0)\n(9/11) Installing libexpat (2.5.0-r0)\n(10/11) Installing pcre2 (10.42-r0)\n(11/11) Installing git (2.38.2-r0)\nExecuting busybox-1.35.0-r29.trigger\nExecuting ca-certificates-20220614-r3.trigger\nOK: 21 MiB in 28 packages\nRemoving intermediate container 0224cc6defe7\n ---> 235d53cb6694\nStep 4/24 : ADD package.json /app\n ---> 641aa22cb60c\nStep 5/24 : RUN npm install && npm cache clean --force;\n ---> Running in 25355a49dd01\n\nadded 465 packages, and audited 466 packages in 29s\n\n170 packages are looking for funding\n  run `npm fund` for details\n\n3 high severity vulnerabilities\n\nSome issues need review, and may require choosing\na different dependency.\n\nRun `npm audit` for details.\n\u001b[91mnpm notice \nnpm notice New major version of npm available! 8.19.2 -> 9.2.0\nnpm notice Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm notice\u001b[0m\u001b[91m Run `npm install -g npm@9.2.0` to update!\nnpm notice \n\u001b[0m\u001b[91mnpm\u001b[0m\u001b[91m WARN using --force Recommended protections disabled.\n\u001b[0mRemoving intermediate container 25355a49dd01\n ---> e95f95bdae13\nStep 6/24 : ADD . /app\n ---> a0408d7cc5c4\nStep 7/24 : RUN npm run build\n ---> Running in 23fd5914f30a\n\n> db-rest@6.0.0 build\n> npm run docs\n\n\n> db-rest@6.0.0 docs\n> node api-docs.js >docs/api.md && build-technical-doc --syntax-stylesheet-url /syntax.css <docs/readme.md >docs/index.html && build-technical-doc --syntax-stylesheet-url /syntax.css <docs/getting-started.md >docs/getting-started.html && build-technical-doc --syntax-stylesheet-url /syntax.css <docs/api.md >docs/api.html && build-technical-doc --syntax-stylesheet github >docs/syntax.css\n\nRemoving intermediate container 23fd5914f30a\n ---> 49c155e890f8\nStep 8/24 : FROM node:18-alpine\n ---> 6d7b7852bcd3\nStep 9/24 : LABEL org.opencontainers.image.title=\"db-rest\"\n ---> Running in 188bbbb235d1\nRemoving intermediate container 188bbbb235d1\n ---> 55f58a7387a7\nStep 10/24 : LABEL org.opencontainers.image.description=\"A clean REST API wrapping around the Deutsche Bahn API.\"\n ---> Running in f16c0b8ad545\nRemoving intermediate container f16c0b8ad545\n ---> 056922d9c32d\nStep 11/24 : LABEL org.opencontainers.image.authors=\"Jannis R <mail@jannisr.de>\"\n ---> Running in 79aa33d98a52\nRemoving intermediate container 79aa33d98a52\n ---> 5e1b6cb42185\nStep 12/24 : LABEL org.opencontainers.image.documentation=\"https://github.com/derhuerst/db-rest/tree/6\"\n ---> Running in 57d8f20ccc68\nRemoving intermediate container 57d8f20ccc68\n ---> be84b9d9af16\nStep 13/24 : LABEL org.opencontainers.image.source=\"https://github.com/derhuerst/db-rest\"\n ---> Running in bd2ef325018a\nRemoving intermediate container bd2ef325018a\n ---> 6a52b4c2f42d\nStep 14/24 : LABEL org.opencontainers.image.revision=\"6\"\n ---> Running in aa691a8d5afa\nRemoving intermediate container aa691a8d5afa\n ---> ea92345a7fd4\nStep 15/24 : LABEL org.opencontainers.image.licenses=\"ISC\"\n ---> Running in 2ed5cd9ac60b\nRemoving intermediate container 2ed5cd9ac60b\n ---> 048efdb58d52\nStep 16/24 : WORKDIR /app\n ---> Running in ba3c613dbf6f\nRemoving intermediate container ba3c613dbf6f\n ---> b6781fdd97f3\nStep 17/24 : ADD package.json /app\n ---> fa2cf3b478f3\nStep 18/24 : RUN npm install --production && npm cache clean --force\n ---> Running in 570b6f2c1686\n\u001b[91mnpm\u001b[0m\u001b[91m WARN config production Use `--omit=dev` instead.\n\u001b[0m\nadded 180 packages, and audited 181 packages in 31s\n\n22 packages are looking for funding\n  run `npm fund` for details\n\nfound 0 vulnerabilities\n\u001b[91mnpm notice \nnpm notice\u001b[0m\u001b[91m New major version of npm available! 8.19.2 -> 9.2.0\nnpm notice Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm notice\u001b[0m\u001b[91m Run `npm install -g npm@9.2.0` to update!\n\u001b[0m\u001b[91mnpm notice\u001b[0m\u001b[91m \n\u001b[0m\u001b[91mnpm\u001b[0m\u001b[91m WARN using --force Recommended protections disabled.\n\u001b[0mRemoving intermediate container 570b6f2c1686\n ---> 134b94d9b12b\nStep 19/24 : ADD . /app\n ---> b24331e3fd8c\nStep 20/24 : COPY --from=builder /app/docs ./docs\n ---> 8e6090100bda\nStep 21/24 : EXPOSE 3000\n ---> Running in adb36104260e\nRemoving intermediate container adb36104260e\n ---> 84403b3f5526\nStep 22/24 : ENV HOSTNAME v6.db.transport.rest\n ---> Running in 70345a71c319\nRemoving intermediate container 70345a71c319\n ---> 671cb1e52585\nStep 23/24 : ENV PORT 3000\n ---> Running in 46bbf88a22c0\nRemoving intermediate container 46bbf88a22c0\n ---> 39dcfbfb8de9\nStep 24/24 : CMD [\"node\", \"index.js\"]\n ---> Running in 59549d568a91\nRemoving intermediate container 59549d568a91\n ---> 6d6804fb4845\nSuccessfully built 6d6804fb4845\nSuccessfully tagged db-rest:latest\n","stderr":"","imageSize":212424644}}