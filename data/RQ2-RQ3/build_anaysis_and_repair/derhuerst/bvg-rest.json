{"repository":"https://github.com/derhuerst/bvg-rest","dockerfilePath":"Dockerfile","startTime":1672323067074,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/derhuerst/bvg-rest'...\n","error":null,"commit":"2581a4a57ee1477a04c1c7631b2689468b2594cc"},"originalBuild":{"startTimestamp":1672323067908,"endTimestamp":1672323175805,"error":null,"stdout":"Sending build context to Docker daemon  73.73kB\r\r\nStep 1/24 : FROM node:alpine as builder\n ---> f01bef8b5e92\nStep 2/24 : WORKDIR /app\n ---> Running in eee9400b0947\nRemoving intermediate container eee9400b0947\n ---> c3baeaf4e0c4\nStep 3/24 : RUN apk add --update git bash\n ---> Running in a9abcb27df6a\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/11) Installing ncurses-terminfo-base (6.3_p20221119-r0)\n(2/11) Installing ncurses-libs (6.3_p20221119-r0)\n(3/11) Installing readline (8.2.0-r0)\n(4/11) Installing bash (5.2.15-r0)\nExecuting bash-5.2.15-r0.post-install\n(5/11) Installing ca-certificates (20220614-r3)\n(6/11) Installing brotli-libs (1.0.9-r9)\n(7/11) Installing nghttp2-libs (1.51.0-r0)\n(8/11) Installing libcurl (7.87.0-r0)\n(9/11) Installing libexpat (2.5.0-r0)\n(10/11) Installing pcre2 (10.42-r0)\n(11/11) Installing git (2.38.2-r0)\nExecuting busybox-1.35.0-r29.trigger\nExecuting ca-certificates-20220614-r3.trigger\nOK: 21 MiB in 28 packages\nRemoving intermediate container a9abcb27df6a\n ---> d51b9e485ae0\nStep 4/24 : ADD package.json /app\n ---> a28117daa97f\nStep 5/24 : RUN npm install\n ---> Running in 6fae0f61792e\n\u001b[91mnpm WARN deprecated vbb-tokenize-station@0.3.0: This package has been renamed to tokenize-vbb-station-name.\n\u001b[0m\u001b[91mnpm WARN deprecated express-pino-logger@6.0.0: use pino-http instead\n\u001b[0m\nadded 458 packages, and audited 459 packages in 35s\n\n158 packages are looking for funding\n  run `npm fund` for details\n\n5 vulnerabilities (2 moderate, 3 high)\n\nTo address all issues possible (including breaking changes), run:\n  npm audit fix --force\n\nSome issues need review, and may require choosing\na different dependency.\n\nRun `npm audit` for details.\nRemoving intermediate container 6fae0f61792e\n ---> d0835c8503b4\nStep 6/24 : ADD . /app\n ---> 436abd7dce7a\nStep 7/24 : RUN npm run build\n ---> Running in 18b063c3ffc3\n\n> bvg-rest@5.0.2 build\n> npm run docs\n\n\n> bvg-rest@5.0.2 docs\n> node api-docs.js >docs/api.md && build-technical-doc --syntax-stylesheet-url /syntax.css <docs/readme.md >docs/index.html && build-technical-doc --syntax-stylesheet-url /syntax.css <docs/getting-started.md >docs/getting-started.html && build-technical-doc --syntax-stylesheet-url /syntax.css <docs/api.md >docs/api.html && build-technical-doc --syntax-stylesheet github >docs/syntax.css\n\nRemoving intermediate container 18b063c3ffc3\n ---> 0fbb6929e481\nStep 8/24 : FROM node:alpine\n ---> f01bef8b5e92\nStep 9/24 : LABEL org.opencontainers.image.title=\"bvg-rest\"\n ---> Running in eda0cfb633b3\nRemoving intermediate container eda0cfb633b3\n ---> e066530034a0\nStep 10/24 : LABEL org.opencontainers.image.description=\"An HTTP API for Berlin & Brandenburg public transport.\"\n ---> Running in 0ef4c7f462db\nRemoving intermediate container 0ef4c7f462db\n ---> c75d75920549\nStep 11/24 : LABEL org.opencontainers.image.authors=\"Jannis R <mail@jannisr.de>\"\n ---> Running in b6fbbf78e6c0\nRemoving intermediate container b6fbbf78e6c0\n ---> 008af67314c5\nStep 12/24 : LABEL org.opencontainers.image.documentation=\"https://github.com/derhuerst/bvg-rest/tree/5\"\n ---> Running in 531034df2322\nRemoving intermediate container 531034df2322\n ---> db6e0c592bc5\nStep 13/24 : LABEL org.opencontainers.image.source=\"https://github.com/derhuerst/bvg-rest\"\n ---> Running in a42c5cefce6f\nRemoving intermediate container a42c5cefce6f\n ---> 0b5311cda5db\nStep 14/24 : LABEL org.opencontainers.image.revision=\"5\"\n ---> Running in 5b0daa33347d\nRemoving intermediate container 5b0daa33347d\n ---> b1bb5d84a555\nStep 15/24 : LABEL org.opencontainers.image.licenses=\"ISC\"\n ---> Running in 24734a121b8e\nRemoving intermediate container 24734a121b8e\n ---> 948e3cc5af79\nStep 16/24 : WORKDIR /app\n ---> Running in 569034f61b4f\nRemoving intermediate container 569034f61b4f\n ---> 0e3140f271fd\nStep 17/24 : ADD package.json /app\n ---> 7e9d40a9f6fe\nStep 18/24 : RUN npm install --production && npm cache clean --force\n ---> Running in ece16e06541f\n\u001b[91mnpm\u001b[0m\u001b[91m WARN config\u001b[0m\u001b[91m production Use `--omit=dev` instead.\n\u001b[0m\u001b[91mnpm WARN\u001b[0m\u001b[91m deprecated vbb-tokenize-station@0.3.0: This package has been renamed to tokenize-vbb-station-name.\n\u001b[0m\u001b[91mnpm WARN deprecated express-pino-logger@6.0.0: use pino-http instead\n\u001b[0m\nadded 177 packages, and audited 178 packages in 23s\n\n17 packages are looking for funding\n  run `npm fund` for details\n\n2 moderate severity vulnerabilities\n\nTo address all issues (including breaking changes), run:\n  npm audit fix --force\n\nRun `npm audit` for details.\n\u001b[91mnpm\u001b[0m\u001b[91m WARN using --force Recommended protections disabled.\n\u001b[0mRemoving intermediate container ece16e06541f\n ---> 925384272c77\nStep 19/24 : ADD . /app\n ---> 1dac4e8a03a3\nStep 20/24 : COPY --from=builder /app/docs ./docs\n ---> 84e9b2108c6b\nStep 21/24 : EXPOSE 3000\n ---> Running in d95481fe8e47\nRemoving intermediate container d95481fe8e47\n ---> 785495fc8c12\nStep 22/24 : ENV HOSTNAME v5.bvg.transport.rest\n ---> Running in c0068f1f8fb1\nRemoving intermediate container c0068f1f8fb1\n ---> 6188011c2ba6\nStep 23/24 : ENV PORT 3000\n ---> Running in af9aee347610\nRemoving intermediate container af9aee347610\n ---> 3df471c27d81\nStep 24/24 : CMD [\"node\", \"index.js\"]\n ---> Running in f82ef08874e1\nRemoving intermediate container f82ef08874e1\n ---> 96b3e71e753b\nSuccessfully built 96b3e71e753b\nSuccessfully tagged bvg-rest:latest\n","stderr":"","imageSize":204211628},"repair":{"violations":[{"name":"npmCacheCleanAfterInstall","position":{"start":6,"end":6,"columnStart":4,"columnEnd":15}},{"name":"apkAddUseNoCache","position":{"start":4,"end":4,"columnStart":4,"columnEnd":29}}],"repairedDockerfile":"FROM node:alpine as builder\nWORKDIR /app\n\n# install dependencies\nRUN apk add --no-cache --update git bash\nADD package.json /app\nRUN npm install\n\n# build documentation\nADD . /app\nRUN npm run build\n\n# ---\n\nFROM node:alpine\nLABEL org.opencontainers.image.title=\"bvg-rest\"\nLABEL org.opencontainers.image.description=\"An HTTP API for Berlin & Brandenburg public transport.\"\nLABEL org.opencontainers.image.authors=\"Jannis R <mail@jannisr.de>\"\nLABEL org.opencontainers.image.documentation=\"https://github.com/derhuerst/bvg-rest/tree/5\"\nLABEL org.opencontainers.image.source=\"https://github.com/derhuerst/bvg-rest\"\nLABEL org.opencontainers.image.revision=\"5\"\nLABEL org.opencontainers.image.licenses=\"ISC\"\nWORKDIR /app\n\n# install dependencies\nADD package.json /app\nRUN npm install --production && npm cache clean --force\n\n# add source code\nADD . /app\nCOPY --from=builder /app/docs ./docs\n\nEXPOSE 3000\n\nENV HOSTNAME v5.bvg.transport.rest\nENV PORT 3000\n\nCMD [\"node\", \"index.js\"]\n"},"repairedBuild":{"startTimestamp":1672323176340,"endTimestamp":1672323246397,"error":null,"stdout":"Sending build context to Docker daemon  73.73kB\r\r\nStep 1/24 : FROM node:alpine as builder\n ---> f01bef8b5e92\nStep 2/24 : WORKDIR /app\n ---> Running in eb1d7a232781\nRemoving intermediate container eb1d7a232781\n ---> f0d2190f8d57\nStep 3/24 : RUN apk add --no-cache --update git bash\n ---> Running in 3a01b5e7397a\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/11) Installing ncurses-terminfo-base (6.3_p20221119-r0)\n(2/11) Installing ncurses-libs (6.3_p20221119-r0)\n(3/11) Installing readline (8.2.0-r0)\n(4/11) Installing bash (5.2.15-r0)\nExecuting bash-5.2.15-r0.post-install\n(5/11) Installing ca-certificates (20220614-r3)\n(6/11) Installing brotli-libs (1.0.9-r9)\n(7/11) Installing nghttp2-libs (1.51.0-r0)\n(8/11) Installing libcurl (7.87.0-r0)\n(9/11) Installing libexpat (2.5.0-r0)\n(10/11) Installing pcre2 (10.42-r0)\n(11/11) Installing git (2.38.2-r0)\nExecuting busybox-1.35.0-r29.trigger\nExecuting ca-certificates-20220614-r3.trigger\nOK: 21 MiB in 28 packages\nRemoving intermediate container 3a01b5e7397a\n ---> eac64c92099b\nStep 4/24 : ADD package.json /app\n ---> 59c648c3822c\nStep 5/24 : RUN npm install\n ---> Running in 1ddecc19ea7d\n\u001b[91mnpm WARN deprecated\u001b[0m\u001b[91m vbb-tokenize-station@0.3.0: This package has been renamed to tokenize-vbb-station-name.\n\u001b[0m\u001b[91mnpm WARN deprecated express-pino-logger@6.0.0: use pino-http instead\n\u001b[0m\nadded 458 packages, and audited 459 packages in 18s\n\n158 packages are looking for funding\n  run `npm fund` for details\n\n5 vulnerabilities (2 moderate, 3 high)\n\nTo address all issues possible (including breaking changes), run:\n  npm audit fix --force\n\nSome issues need review, and may require choosing\na different dependency.\n\nRun `npm audit` for details.\nRemoving intermediate container 1ddecc19ea7d\n ---> 714fe17f0d33\nStep 6/24 : ADD . /app\n ---> d6a788ad6499\nStep 7/24 : RUN npm run build\n ---> Running in 8dfc59cadd11\n\n> bvg-rest@5.0.2 build\n> npm run docs\n\n\n> bvg-rest@5.0.2 docs\n> node api-docs.js >docs/api.md && build-technical-doc --syntax-stylesheet-url /syntax.css <docs/readme.md >docs/index.html && build-technical-doc --syntax-stylesheet-url /syntax.css <docs/getting-started.md >docs/getting-started.html && build-technical-doc --syntax-stylesheet-url /syntax.css <docs/api.md >docs/api.html && build-technical-doc --syntax-stylesheet github >docs/syntax.css\n\nRemoving intermediate container 8dfc59cadd11\n ---> d22da4821761\nStep 8/24 : FROM node:alpine\n ---> f01bef8b5e92\nStep 9/24 : LABEL org.opencontainers.image.title=\"bvg-rest\"\n ---> Running in bb6ce5ae385a\nRemoving intermediate container bb6ce5ae385a\n ---> cf1ded522222\nStep 10/24 : LABEL org.opencontainers.image.description=\"An HTTP API for Berlin & Brandenburg public transport.\"\n ---> Running in d7c77aa76e2f\nRemoving intermediate container d7c77aa76e2f\n ---> e8ae9a551ec8\nStep 11/24 : LABEL org.opencontainers.image.authors=\"Jannis R <mail@jannisr.de>\"\n ---> Running in 050ce43e6ed2\nRemoving intermediate container 050ce43e6ed2\n ---> 67d058b5dc4d\nStep 12/24 : LABEL org.opencontainers.image.documentation=\"https://github.com/derhuerst/bvg-rest/tree/5\"\n ---> Running in 68e470fc425f\nRemoving intermediate container 68e470fc425f\n ---> 7851dfaf6b04\nStep 13/24 : LABEL org.opencontainers.image.source=\"https://github.com/derhuerst/bvg-rest\"\n ---> Running in 7cff4f94698b\nRemoving intermediate container 7cff4f94698b\n ---> 18857f97e98c\nStep 14/24 : LABEL org.opencontainers.image.revision=\"5\"\n ---> Running in a5a8a682a9d6\nRemoving intermediate container a5a8a682a9d6\n ---> 79c85b13bbbc\nStep 15/24 : LABEL org.opencontainers.image.licenses=\"ISC\"\n ---> Running in 7f4cffcaf8db\nRemoving intermediate container 7f4cffcaf8db\n ---> 7f81514d7253\nStep 16/24 : WORKDIR /app\n ---> Running in a24faefac9d7\nRemoving intermediate container a24faefac9d7\n ---> 9aaa39b1aa23\nStep 17/24 : ADD package.json /app\n ---> 05cf20e19fda\nStep 18/24 : RUN npm install --production && npm cache clean --force\n ---> Running in aa9cdf2021be\n\u001b[91mnpm\u001b[0m\u001b[91m WARN config production Use `--omit=dev` instead.\n\u001b[0m\u001b[91mnpm WARN deprecated vbb-tokenize-station@0.3.0: This package has been renamed to tokenize-vbb-station-name.\n\u001b[0m\u001b[91mnpm WARN deprecated express-pino-logger@6.0.0: use pino-http instead\n\u001b[0m\nadded 177 packages, and audited 178 packages in 18s\n\n17 packages are looking for funding\n  run `npm fund` for details\n\n2 moderate severity vulnerabilities\n\nTo address all issues (including breaking changes), run:\n  npm audit fix --force\n\nRun `npm audit` for details.\n\u001b[91mnpm\u001b[0m\u001b[91m WARN using --force Recommended protections disabled.\n\u001b[0mRemoving intermediate container aa9cdf2021be\n ---> e1a89707888e\nStep 19/24 : ADD . /app\n ---> 5056c5b38f5c\nStep 20/24 : COPY --from=builder /app/docs ./docs\n ---> 7e207691f282\nStep 21/24 : EXPOSE 3000\n ---> Running in bdb123df8539\nRemoving intermediate container bdb123df8539\n ---> 8fc02d28414a\nStep 22/24 : ENV HOSTNAME v5.bvg.transport.rest\n ---> Running in 3dc905f41167\nRemoving intermediate container 3dc905f41167\n ---> 1451a41d15ac\nStep 23/24 : ENV PORT 3000\n ---> Running in e4c8250f7e86\nRemoving intermediate container e4c8250f7e86\n ---> 27a52b5a1f1d\nStep 24/24 : CMD [\"node\", \"index.js\"]\n ---> Running in 8b56e33997e2\nRemoving intermediate container 8b56e33997e2\n ---> 479833c203e1\nSuccessfully built 479833c203e1\nSuccessfully tagged bvg-rest:latest\n","stderr":"","imageSize":204211564},"endTime":1672323246848}