{"repository":"https://github.com/mattermost/matterbuild","dockerfilePath":"Dockerfile","startTime":1672900836079,"endTime":1672901199162,"clone":{"startTime":1672900836087,"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/mattermost/matterbuild'...\n","error":null,"endTime":1672900837095,"commit":"59f5f2df3571c981871ed21cf78a420d1934e539"},"originalBuild":{"startTime":1672900837177,"endTime":1672901060827,"error":null,"stdout":"Sending build context to Docker daemon  874.5kB\r\r\nStep 1/15 : FROM golang:1.17.6 AS builder\n1.17.6: Pulling from library/golang\n0c6b8ff8c37e: Pulling fs layer\n412caad352a3: Pulling fs layer\ne6d3e61f7a50: Pulling fs layer\n461bb1d8c517: Pulling fs layer\n9297634c9537: Pulling fs layer\n6a0b51344be5: Pulling fs layer\n856234c9f319: Pulling fs layer\n6a0b51344be5: Waiting\n9297634c9537: Waiting\n461bb1d8c517: Waiting\n412caad352a3: Download complete\ne6d3e61f7a50: Verifying Checksum\ne6d3e61f7a50: Download complete\n0c6b8ff8c37e: Download complete\n461bb1d8c517: Verifying Checksum\n461bb1d8c517: Download complete\n9297634c9537: Verifying Checksum\n9297634c9537: Download complete\n856234c9f319: Verifying Checksum\n856234c9f319: Download complete\n0c6b8ff8c37e: Pull complete\n412caad352a3: Pull complete\n6a0b51344be5: Verifying Checksum\n6a0b51344be5: Download complete\ne6d3e61f7a50: Pull complete\n461bb1d8c517: Pull complete\n9297634c9537: Pull complete\n6a0b51344be5: Pull complete\n856234c9f319: Pull complete\nDigest: sha256:fff998d0f7a46baeb15d8478ee909a8237377e07ccf1a8e77d77a32033021d62\nStatus: Downloaded newer image for golang:1.17.6\n ---> 80d9a75ccb38\nStep 2/15 : WORKDIR /go/src/matterbuild\n ---> Running in 8923e5d86333\nRemoving intermediate container 8923e5d86333\n ---> 1e6963d84684\nStep 3/15 : COPY go.mod .\n ---> 9444e1bd7425\nStep 4/15 : COPY go.sum .\n ---> 4a8b77a1442e\nStep 5/15 : RUN go mod download\n ---> Running in 689874b5fa98\nRemoving intermediate container 689874b5fa98\n ---> d8575d7abdb4\nStep 6/15 : COPY . .\n ---> ca0225a43bcd\nStep 7/15 : RUN CGO_ENABLED=0 make build\n ---> Running in 5c2b8480f8fa\nrm -rf dist/ out/\nBuilding\n/usr/local/go/bin/go build -ldflags \" -X github.com/mattermost/matterbuild/version.version=v0.11.0 -X github.com/mattermost/matterbuild/version.commitHash=59f5f2d -X github.com/mattermost/matterbuild/version.buildDate=2023-01-05T06:43:37+0000 \" -o dist/matterbuild\nRemoving intermediate container 5c2b8480f8fa\n ---> 07a0d77d287d\nStep 8/15 : FROM debian:buster-slim\n ---> 101a5b2953f2\nStep 9/15 : RUN apt-get update &&     apt-get install --no-install-recommends -y ca-certificates &&     apt-get clean all &&     rm -rf /var/cache/apt/\n ---> Running in 88c3fc1ae837\nGet:1 http://deb.debian.org/debian buster InRelease [122 kB]\nGet:2 http://deb.debian.org/debian-security buster/updates InRelease [34.8 kB]\nGet:3 http://deb.debian.org/debian buster-updates InRelease [56.6 kB]\nGet:4 http://deb.debian.org/debian buster/main amd64 Packages [7909 kB]\nGet:5 http://deb.debian.org/debian-security buster/updates/main amd64 Packages [422 kB]\nGet:6 http://deb.debian.org/debian buster-updates/main amd64 Packages [8788 B]\nFetched 8553 kB in 2s (5208 kB/s)\nReading package lists...\nReading package lists...\nBuilding dependency tree...\nReading state information...\nThe following additional packages will be installed:\n  libssl1.1 openssl\nThe following NEW packages will be installed:\n  ca-certificates libssl1.1 openssl\n0 upgraded, 3 newly installed, 0 to remove and 0 not upgraded.\nNeed to get 2571 kB of archives.\nAfter this operation, 6112 kB of additional disk space will be used.\nGet:1 http://deb.debian.org/debian buster/main amd64 libssl1.1 amd64 1.1.1n-0+deb10u3 [1551 kB]\nGet:2 http://deb.debian.org/debian buster/main amd64 openssl amd64 1.1.1n-0+deb10u3 [855 kB]\nGet:3 http://deb.debian.org/debian buster/main amd64 ca-certificates all 20200601~deb10u2 [166 kB]\n\u001b[91mdebconf: delaying package configuration, since apt-utils is not installed\n\u001b[0mFetched 2571 kB in 0s (32.8 MB/s)\nSelecting previously unselected package libssl1.1:amd64.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 6460 files and directories currently installed.)\r\nPreparing to unpack .../libssl1.1_1.1.1n-0+deb10u3_amd64.deb ...\r\nUnpacking libssl1.1:amd64 (1.1.1n-0+deb10u3) ...\r\nSelecting previously unselected package openssl.\r\nPreparing to unpack .../openssl_1.1.1n-0+deb10u3_amd64.deb ...\r\nUnpacking openssl (1.1.1n-0+deb10u3) ...\r\nSelecting previously unselected package ca-certificates.\r\nPreparing to unpack .../ca-certificates_20200601~deb10u2_all.deb ...\r\nUnpacking ca-certificates (20200601~deb10u2) ...\r\nSetting up libssl1.1:amd64 (1.1.1n-0+deb10u3) ...\r\ndebconf: unable to initialize frontend: Dialog\r\ndebconf: (TERM is not set, so the dialog frontend is not usable.)\r\ndebconf: falling back to frontend: Readline\r\ndebconf: unable to initialize frontend: Readline\r\ndebconf: (Can't locate Term/ReadLine.pm in @INC (you may need to install the Term::ReadLine module) (@INC contains: /etc/perl /usr/local/lib/x86_64-linux-gnu/perl/5.28.1 /usr/local/share/perl/5.28.1 /usr/lib/x86_64-linux-gnu/perl5/5.28 /usr/share/perl5 /usr/lib/x86_64-linux-gnu/perl/5.28 /usr/share/perl/5.28 /usr/local/lib/site_perl /usr/lib/x86_64-linux-gnu/perl-base) at /usr/share/perl5/Debconf/FrontEnd/Readline.pm line 7.)\r\ndebconf: falling back to frontend: Teletype\r\nSetting up openssl (1.1.1n-0+deb10u3) ...\r\nSetting up ca-certificates (20200601~deb10u2) ...\r\ndebconf: unable to initialize frontend: Dialog\r\ndebconf: (TERM is not set, so the dialog frontend is not usable.)\r\ndebconf: falling back to frontend: Readline\r\ndebconf: unable to initialize frontend: Readline\r\ndebconf: (Can't locate Term/ReadLine.pm in @INC (you may need to install the Term::ReadLine module) (@INC contains: /etc/perl /usr/local/lib/x86_64-linux-gnu/perl/5.28.1 /usr/local/share/perl/5.28.1 /usr/lib/x86_64-linux-gnu/perl5/5.28 /usr/share/perl5 /usr/lib/x86_64-linux-gnu/perl/5.28 /usr/share/perl/5.28 /usr/local/lib/site_perl /usr/lib/x86_64-linux-gnu/perl-base) at /usr/share/perl5/Debconf/FrontEnd/Readline.pm line 7.)\r\ndebconf: falling back to frontend: Teletype\r\nUpdating certificates in /etc/ssl/certs...\r\n137 added, 0 removed; done.\r\nProcessing triggers for libc-bin (2.28-10+deb10u2) ...\r\nProcessing triggers for ca-certificates (20200601~deb10u2) ...\r\nUpdating certificates in /etc/ssl/certs...\r\n0 added, 0 removed; done.\r\nRunning hooks in /etc/ca-certificates/update.d...\r\ndone.\r\nRemoving intermediate container 88c3fc1ae837\n ---> c1bf5d2a5fd4\nStep 10/15 : COPY --from=builder /go/src/matterbuild/dist/matterbuild /usr/local/bin/\n ---> cd661856acb7\nStep 11/15 : WORKDIR /app\n ---> Running in 580745f9ec6b\nRemoving intermediate container 580745f9ec6b\n ---> 5c0274fd509c\nStep 12/15 : RUN mkdir -p /app/logs && chown -R 1000:1000 /app/logs/\n ---> Running in ab2ec43348ea\nRemoving intermediate container ab2ec43348ea\n ---> 00a5998f0dee\nStep 13/15 : USER 1000\n ---> Running in 9cbed0e66306\nRemoving intermediate container 9cbed0e66306\n ---> 2c18d3f536ee\nStep 14/15 : EXPOSE 8080\n ---> Running in b9672c9073a0\nRemoving intermediate container b9672c9073a0\n ---> 64a7251c2088\nStep 15/15 : ENTRYPOINT [\"matterbuild\"]\n ---> Running in a3507e7dfe5b\nRemoving intermediate container a3507e7dfe5b\n ---> b3f28c31e385\nSuccessfully built b3f28c31e385\nSuccessfully tagged matterbuild:latest\n","stderr":"","imageSize":119315859},"repair":{"startTime":1672901060900,"endTime":1672901061005,"violations":[{"name":"ruleAptGetInstallThenRemoveAptLists","position":{"start":16,"end":16,"columnStart":4,"columnEnd":62}}],"repairedDockerfile":"FROM golang:1.17.6 AS builder\n\nWORKDIR /go/src/matterbuild\n\nCOPY go.mod .\nCOPY go.sum .\nRUN go mod download\n\nCOPY . .\nRUN CGO_ENABLED=0 make build\n\n################\n\nFROM debian:buster-slim\n\nRUN apt-get update && \\\n    apt-get install --no-install-recommends -y ca-certificates && \\\n    apt-get clean all && \\\n    rm -rf /var/cache/apt/ && rm -rf /var/lib/apt/lists/*;\n\nCOPY --from=builder /go/src/matterbuild/dist/matterbuild /usr/local/bin/\n\nWORKDIR /app\n\nRUN mkdir -p /app/logs && chown -R 1000:1000 /app/logs/\n\nUSER 1000\nEXPOSE 8080\n\nENTRYPOINT [\"matterbuild\"]\n"},"repairedBuild":{"startTime":1672901061232,"endTime":1672901198898,"error":null,"stdout":"Sending build context to Docker daemon  874.5kB\r\r\nStep 1/15 : FROM golang:1.17.6 AS builder\n ---> 80d9a75ccb38\nStep 2/15 : WORKDIR /go/src/matterbuild\n ---> Running in 8cb347fcbbde\nRemoving intermediate container 8cb347fcbbde\n ---> aa10d361afa4\nStep 3/15 : COPY go.mod .\n ---> 9acc48f249bc\nStep 4/15 : COPY go.sum .\n ---> e7231c17762e\nStep 5/15 : RUN go mod download\n ---> Running in 467ad9c1365c\nRemoving intermediate container 467ad9c1365c\n ---> 6acd4ae3f892\nStep 6/15 : COPY . .\n ---> 8887133aed19\nStep 7/15 : RUN CGO_ENABLED=0 make build\n ---> Running in fc36ee28cf88\nrm -rf dist/ out/\nBuilding\n/usr/local/go/bin/go build -ldflags \" -X github.com/mattermost/matterbuild/version.version=v0.11.0 -X github.com/mattermost/matterbuild/version.commitHash=59f5f2d -X github.com/mattermost/matterbuild/version.buildDate=2023-01-05T06:46:03+0000 \" -o dist/matterbuild\nRemoving intermediate container fc36ee28cf88\n ---> 59cc0c14bb4b\nStep 8/15 : FROM debian:buster-slim\n ---> 101a5b2953f2\nStep 9/15 : RUN apt-get update &&     apt-get install --no-install-recommends -y ca-certificates &&     apt-get clean all &&     rm -rf /var/cache/apt/ && rm -rf /var/lib/apt/lists/*;\n ---> Running in 4494f3e568ca\nGet:1 http://deb.debian.org/debian buster InRelease [122 kB]\nGet:2 http://deb.debian.org/debian-security buster/updates InRelease [34.8 kB]\nGet:3 http://deb.debian.org/debian buster-updates InRelease [56.6 kB]\nGet:4 http://deb.debian.org/debian buster/main amd64 Packages [7909 kB]\nGet:5 http://deb.debian.org/debian-security buster/updates/main amd64 Packages [422 kB]\nGet:6 http://deb.debian.org/debian buster-updates/main amd64 Packages [8788 B]\nFetched 8553 kB in 1s (6418 kB/s)\nReading package lists...\nReading package lists...\nBuilding dependency tree...\nReading state information...\nThe following additional packages will be installed:\n  libssl1.1 openssl\nThe following NEW packages will be installed:\n  ca-certificates libssl1.1 openssl\n0 upgraded, 3 newly installed, 0 to remove and 0 not upgraded.\nNeed to get 2571 kB of archives.\nAfter this operation, 6112 kB of additional disk space will be used.\nGet:1 http://deb.debian.org/debian buster/main amd64 libssl1.1 amd64 1.1.1n-0+deb10u3 [1551 kB]\nGet:2 http://deb.debian.org/debian buster/main amd64 openssl amd64 1.1.1n-0+deb10u3 [855 kB]\nGet:3 http://deb.debian.org/debian buster/main amd64 ca-certificates all 20200601~deb10u2 [166 kB]\n\u001b[91mdebconf: delaying package configuration, since apt-utils is not installed\n\u001b[0mFetched 2571 kB in 0s (47.6 MB/s)\nSelecting previously unselected package libssl1.1:amd64.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 6460 files and directories currently installed.)\r\nPreparing to unpack .../libssl1.1_1.1.1n-0+deb10u3_amd64.deb ...\r\nUnpacking libssl1.1:amd64 (1.1.1n-0+deb10u3) ...\r\nSelecting previously unselected package openssl.\r\nPreparing to unpack .../openssl_1.1.1n-0+deb10u3_amd64.deb ...\r\nUnpacking openssl (1.1.1n-0+deb10u3) ...\r\nSelecting previously unselected package ca-certificates.\r\nPreparing to unpack .../ca-certificates_20200601~deb10u2_all.deb ...\r\nUnpacking ca-certificates (20200601~deb10u2) ...\r\nSetting up libssl1.1:amd64 (1.1.1n-0+deb10u3) ...\r\ndebconf: unable to initialize frontend: Dialog\r\ndebconf: (TERM is not set, so the dialog frontend is not usable.)\r\ndebconf: falling back to frontend: Readline\r\ndebconf: unable to initialize frontend: Readline\r\ndebconf: (Can't locate Term/ReadLine.pm in @INC (you may need to install the Term::ReadLine module) (@INC contains: /etc/perl /usr/local/lib/x86_64-linux-gnu/perl/5.28.1 /usr/local/share/perl/5.28.1 /usr/lib/x86_64-linux-gnu/perl5/5.28 /usr/share/perl5 /usr/lib/x86_64-linux-gnu/perl/5.28 /usr/share/perl/5.28 /usr/local/lib/site_perl /usr/lib/x86_64-linux-gnu/perl-base) at /usr/share/perl5/Debconf/FrontEnd/Readline.pm line 7.)\r\ndebconf: falling back to frontend: Teletype\r\nSetting up openssl (1.1.1n-0+deb10u3) ...\r\nSetting up ca-certificates (20200601~deb10u2) ...\r\ndebconf: unable to initialize frontend: Dialog\r\ndebconf: (TERM is not set, so the dialog frontend is not usable.)\r\ndebconf: falling back to frontend: Readline\r\ndebconf: unable to initialize frontend: Readline\r\ndebconf: (Can't locate Term/ReadLine.pm in @INC (you may need to install the Term::ReadLine module) (@INC contains: /etc/perl /usr/local/lib/x86_64-linux-gnu/perl/5.28.1 /usr/local/share/perl/5.28.1 /usr/lib/x86_64-linux-gnu/perl5/5.28 /usr/share/perl5 /usr/lib/x86_64-linux-gnu/perl/5.28 /usr/share/perl/5.28 /usr/local/lib/site_perl /usr/lib/x86_64-linux-gnu/perl-base) at /usr/share/perl5/Debconf/FrontEnd/Readline.pm line 7.)\r\ndebconf: falling back to frontend: Teletype\r\nUpdating certificates in /etc/ssl/certs...\r\n137 added, 0 removed; done.\r\nProcessing triggers for libc-bin (2.28-10+deb10u2) ...\r\nProcessing triggers for ca-certificates (20200601~deb10u2) ...\r\nUpdating certificates in /etc/ssl/certs...\r\n0 added, 0 removed; done.\r\nRunning hooks in /etc/ca-certificates/update.d...\r\ndone.\r\nRemoving intermediate container 4494f3e568ca\n ---> 1f770a29280f\nStep 10/15 : COPY --from=builder /go/src/matterbuild/dist/matterbuild /usr/local/bin/\n ---> 59061f2671c3\nStep 11/15 : WORKDIR /app\n ---> Running in 6adcf73fcd97\nRemoving intermediate container 6adcf73fcd97\n ---> d223d0499aa6\nStep 12/15 : RUN mkdir -p /app/logs && chown -R 1000:1000 /app/logs/\n ---> Running in 0c4da7a26d46\nRemoving intermediate container 0c4da7a26d46\n ---> 45a93176e816\nStep 13/15 : USER 1000\n ---> Running in ef0cdd45a6d0\nRemoving intermediate container ef0cdd45a6d0\n ---> ec1cc532ce90\nStep 14/15 : EXPOSE 8080\n ---> Running in f5e194d57073\nRemoving intermediate container f5e194d57073\n ---> 58a2fd49e0ab\nStep 15/15 : ENTRYPOINT [\"matterbuild\"]\n ---> Running in 55f87897278b\nRemoving intermediate container 55f87897278b\n ---> 872993158954\nSuccessfully built 872993158954\nSuccessfully tagged matterbuild:latest\n","stderr":"","imageSize":101469822}}