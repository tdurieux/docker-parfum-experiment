{"repository":"https://github.com/bloxapp/key-vault","dockerfilePath":"Dockerfile","startTime":1672970320037,"endTime":1672970648612,"clone":{"startTime":1672970320038,"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/bloxapp/key-vault'...\n","error":null,"endTime":1672970321700,"commit":"bb1cdcdf70f2a7a2c655f1aa11caff1322155de2"},"originalBuild":{"startTime":1672970321776,"endTime":1672970496940,"error":null,"stdout":"Sending build context to Docker daemon   49.2MB\r\r\nStep 1/30 : FROM golang:1.18 AS preparer\n1.18: Pulling from library/golang\n32de3c850997: Already exists\nfa1d4c8d85a4: Already exists\nc796299bbbdd: Already exists\n81283a9569ad: Already exists\nc768848b86a2: Pulling fs layer\n160a777925fe: Pulling fs layer\n1be94824532a: Pulling fs layer\n1be94824532a: Verifying Checksum\n1be94824532a: Download complete\nc768848b86a2: Verifying Checksum\nc768848b86a2: Download complete\n160a777925fe: Verifying Checksum\n160a777925fe: Download complete\nc768848b86a2: Pull complete\n160a777925fe: Pull complete\n1be94824532a: Pull complete\nDigest: sha256:00d63686b480f6dc866e93ddc4b29efa2db03274a687e6495c2cfbfe615d638e\nStatus: Downloaded newer image for golang:1.18\n ---> fffd0d9a59da\nStep 2/30 : RUN apt-get update                                                        &&   DEBIAN_FRONTEND=noninteractive apt-get install -yq --no-install-recommends   curl git zip unzip wget g++ python gcc jq                                  && rm -rf /var/lib/apt/lists/*\n ---> Running in 416cecaaa24c\nGet:1 http://deb.debian.org/debian bullseye InRelease [116 kB]\nGet:2 http://deb.debian.org/debian-security bullseye-security InRelease [48.4 kB]\nGet:3 http://deb.debian.org/debian bullseye-updates InRelease [44.1 kB]\nGet:4 http://deb.debian.org/debian bullseye/main amd64 Packages [8183 kB]\nGet:5 http://deb.debian.org/debian-security bullseye-security/main amd64 Packages [210 kB]\nGet:6 http://deb.debian.org/debian bullseye-updates/main amd64 Packages [14.6 kB]\nFetched 8616 kB in 1s (6334 kB/s)\nReading package lists...\nReading package lists...\nBuilding dependency tree...\nReading state information...\ncurl is already the newest version (7.74.0-1.3+deb11u3).\ng++ is already the newest version (4:10.2.1-1).\ngcc is already the newest version (4:10.2.1-1).\ngit is already the newest version (1:2.30.2-1).\nwget is already the newest version (1.21-1+deb11u1).\nThe following additional packages will be installed:\n  libjq1 libonig5 libpython2-stdlib libpython2.7-minimal libpython2.7-stdlib\n  mailcap mime-support python2 python2-minimal python2.7 python2.7-minimal\nSuggested packages:\n  python2-doc python-tk python2.7-doc binfmt-support\nRecommended packages:\n  bzip2 file xz-utils\nThe following NEW packages will be installed:\n  jq libjq1 libonig5 libpython2-stdlib libpython2.7-minimal\n  libpython2.7-stdlib mailcap mime-support python-is-python2 python2\n  python2-minimal python2.7 python2.7-minimal unzip zip\n0 upgraded, 15 newly installed, 0 to remove and 1 not upgraded.\nNeed to get 4808 kB of archives.\nAfter this operation, 18.5 MB of additional disk space will be used.\nGet:1 http://deb.debian.org/debian bullseye/main amd64 libpython2.7-minimal amd64 2.7.18-8 [396 kB]\nGet:2 http://deb.debian.org/debian bullseye/main amd64 python2.7-minimal amd64 2.7.18-8 [1322 kB]\nGet:3 http://deb.debian.org/debian bullseye/main amd64 python2-minimal amd64 2.7.18-3 [34.2 kB]\nGet:4 http://deb.debian.org/debian bullseye/main amd64 mailcap all 3.69 [31.7 kB]\nGet:5 http://deb.debian.org/debian bullseye/main amd64 mime-support all 3.66 [10.9 kB]\nGet:6 http://deb.debian.org/debian bullseye/main amd64 libpython2.7-stdlib amd64 2.7.18-8 [1865 kB]\nGet:7 http://deb.debian.org/debian bullseye/main amd64 python2.7 amd64 2.7.18-8 [311 kB]\nGet:8 http://deb.debian.org/debian bullseye/main amd64 libpython2-stdlib amd64 2.7.18-3 [21.2 kB]\nGet:9 http://deb.debian.org/debian bullseye/main amd64 python2 amd64 2.7.18-3 [24.5 kB]\nGet:10 http://deb.debian.org/debian bullseye/main amd64 libonig5 amd64 6.9.6-1.1 [185 kB]\nGet:11 http://deb.debian.org/debian bullseye/main amd64 libjq1 amd64 1.6-2.1 [135 kB]\nGet:12 http://deb.debian.org/debian bullseye/main amd64 jq amd64 1.6-2.1 [64.9 kB]\nGet:13 http://deb.debian.org/debian bullseye/main amd64 python-is-python2 all 2.7.18-9 [2940 B]\nGet:14 http://deb.debian.org/debian bullseye/main amd64 unzip amd64 6.0-26+deb11u1 [172 kB]\nGet:15 http://deb.debian.org/debian bullseye/main amd64 zip amd64 3.0-12 [232 kB]\n\u001b[91mdebconf: delaying package configuration, since apt-utils is not installed\n\u001b[0mFetched 4808 kB in 0s (68.7 MB/s)\nSelecting previously unselected package libpython2.7-minimal:amd64.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 15718 files and directories currently installed.)\r\nPreparing to unpack .../0-libpython2.7-minimal_2.7.18-8_amd64.deb ...\r\nUnpacking libpython2.7-minimal:amd64 (2.7.18-8) ...\r\nSelecting previously unselected package python2.7-minimal.\r\nPreparing to unpack .../1-python2.7-minimal_2.7.18-8_amd64.deb ...\r\nUnpacking python2.7-minimal (2.7.18-8) ...\r\nSelecting previously unselected package python2-minimal.\r\nPreparing to unpack .../2-python2-minimal_2.7.18-3_amd64.deb ...\r\nUnpacking python2-minimal (2.7.18-3) ...\r\nSelecting previously unselected package mailcap.\r\nPreparing to unpack .../3-mailcap_3.69_all.deb ...\r\nUnpacking mailcap (3.69) ...\r\nSelecting previously unselected package mime-support.\r\nPreparing to unpack .../4-mime-support_3.66_all.deb ...\r\nUnpacking mime-support (3.66) ...\r\nSelecting previously unselected package libpython2.7-stdlib:amd64.\r\nPreparing to unpack .../5-libpython2.7-stdlib_2.7.18-8_amd64.deb ...\r\nUnpacking libpython2.7-stdlib:amd64 (2.7.18-8) ...\r\nSelecting previously unselected package python2.7.\r\nPreparing to unpack .../6-python2.7_2.7.18-8_amd64.deb ...\r\nUnpacking python2.7 (2.7.18-8) ...\r\nSelecting previously unselected package libpython2-stdlib:amd64.\r\nPreparing to unpack .../7-libpython2-stdlib_2.7.18-3_amd64.deb ...\r\nUnpacking libpython2-stdlib:amd64 (2.7.18-3) ...\r\nSetting up libpython2.7-minimal:amd64 (2.7.18-8) ...\r\nSetting up python2.7-minimal (2.7.18-8) ...\r\nSetting up python2-minimal (2.7.18-3) ...\r\nSelecting previously unselected package python2.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 16488 files and directories currently installed.)\r\nPreparing to unpack .../0-python2_2.7.18-3_amd64.deb ...\r\nUnpacking python2 (2.7.18-3) ...\r\nSelecting previously unselected package libonig5:amd64.\r\nPreparing to unpack .../1-libonig5_6.9.6-1.1_amd64.deb ...\r\nUnpacking libonig5:amd64 (6.9.6-1.1) ...\r\nSelecting previously unselected package libjq1:amd64.\r\nPreparing to unpack .../2-libjq1_1.6-2.1_amd64.deb ...\r\nUnpacking libjq1:amd64 (1.6-2.1) ...\r\nSelecting previously unselected package jq.\r\nPreparing to unpack .../3-jq_1.6-2.1_amd64.deb ...\r\nUnpacking jq (1.6-2.1) ...\r\nSelecting previously unselected package python-is-python2.\r\nPreparing to unpack .../4-python-is-python2_2.7.18-9_all.deb ...\r\nUnpacking python-is-python2 (2.7.18-9) ...\r\nSelecting previously unselected package unzip.\r\nPreparing to unpack .../5-unzip_6.0-26+deb11u1_amd64.deb ...\r\nUnpacking unzip (6.0-26+deb11u1) ...\r\nSelecting previously unselected package zip.\r\nPreparing to unpack .../6-zip_3.0-12_amd64.deb ...\r\nUnpacking zip (3.0-12) ...\r\nSetting up unzip (6.0-26+deb11u1) ...\r\nSetting up zip (3.0-12) ...\r\nSetting up mailcap (3.69) ...\r\nSetting up libonig5:amd64 (6.9.6-1.1) ...\r\nSetting up mime-support (3.66) ...\r\nSetting up libjq1:amd64 (1.6-2.1) ...\r\nSetting up libpython2.7-stdlib:amd64 (2.7.18-8) ...\r\nSetting up jq (1.6-2.1) ...\r\nSetting up python2.7 (2.7.18-8) ...\r\nSetting up libpython2-stdlib:amd64 (2.7.18-3) ...\r\nSetting up python2 (2.7.18-3) ...\r\nSetting up python-is-python2 (2.7.18-9) ...\r\nProcessing triggers for libc-bin (2.31-13+deb11u5) ...\r\nRemoving intermediate container 416cecaaa24c\n ---> 54c3b44c599e\nStep 3/30 : RUN go version\n ---> Running in 52bdd52668b8\ngo version go1.18.9 linux/amd64\nRemoving intermediate container 52bdd52668b8\n ---> e35c0814342e\nStep 4/30 : RUN python --version\n ---> Running in b1080fe86737\n\u001b[91mPython 2.7.18\n\u001b[0mRemoving intermediate container b1080fe86737\n ---> e81a34af220a\nStep 5/30 : WORKDIR /go/src/github.com/bloxapp/key-vault/\n ---> Running in 90ec0dfb9045\nRemoving intermediate container 90ec0dfb9045\n ---> f4063be2d636\nStep 6/30 : COPY go.mod .\n ---> 3623ca58726b\nStep 7/30 : COPY go.sum .\n ---> d0f500bbb56f\nStep 8/30 : RUN go mod download\n ---> Running in 0542f5a07006\nRemoving intermediate container 0542f5a07006\n ---> db40073ebc53\nStep 9/30 : FROM preparer AS builder\n ---> db40073ebc53\nStep 10/30 : COPY . .\n ---> 8e53b6ec7702\nStep 11/30 : RUN go get -d -v ./...\n ---> Running in b36b4c2cf07e\nRemoving intermediate container b36b4c2cf07e\n ---> cced09af01a3\nStep 12/30 : RUN CGO_CFLAGS=\"-O -D__BLST_PORTABLE__\" CGO_ENABLED=1 GOOS=linux go build -a -ldflags \"-linkmode external -extldflags \\\"-static -lm\\\" -X main.Version=$(git describe --tags $(git rev-list --tags --max-count=1))\" -o ethsign .\n ---> Running in 2746e29c6516\n\u001b[91mfatal: No names found, cannot describe anything.\n\u001b[0m\u001b[91m# github.com/bloxapp/key-vault\n/usr/bin/ld: /tmp/go-link-3896350844/000035.o: in function `_cgo_129d52bb6bd3_Cfunc_mygetgrouplist':\ngetgrouplist_unix.cgo2.c:(.text+0x1e): warning: Using 'getgrouplist' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking\n/usr/bin/ld: /tmp/go-link-3896350844/000034.o: in function `_cgo_129d52bb6bd3_Cfunc_mygetgrgid_r':\ncgo_lookup_unix.cgo2.c:(.text+0x33): warning: Using 'getgrgid_r' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking\n/usr/bin/ld: /tmp/go-link-3896350844/000034.o: in function `_cgo_129d52bb6bd3_Cfunc_mygetgrnam_r':\ncgo_lookup_unix.cgo2.c:(.text+0x6d): warning: Using 'getgrnam_r' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking\n/usr/bin/ld: /tmp/go-link-3896350844/000034.o: in function `_cgo_129d52bb6bd3_Cfunc_mygetpwnam_r':\ncgo_lookup_unix.cgo2.c:(.text+0xa7): warning: Using 'getpwnam_r' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking\n/usr/bin/ld: /tmp/go-link-3896350844/000034.o: in function `_cgo_129d52bb6bd3_Cfunc_mygetpwuid_r':\ncgo_lookup_unix.cgo2.c:(.text+0xe0): warning: Using 'getpwuid_r' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking\n/usr/bin/ld: /tmp/go-link-3896350844/000004.o: in function `_cgo_6cc2654a8ed3_C2func_getaddrinfo':\ncgo_unix.cgo2.c:(.text+0x33): warning: Using 'getaddrinfo' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking\n\u001b[0mRemoving intermediate container 2746e29c6516\n ---> 211c2de4168a\nStep 13/30 : FROM vault:1.8.12 AS runner\n1.8.12: Pulling from library/vault\nc7ed990a2339: Pulling fs layer\ncdc1ed5fcb6f: Pulling fs layer\nf865244d5ec4: Pulling fs layer\n1b94e74664de: Pulling fs layer\n44ab1cc8b564: Pulling fs layer\n44ab1cc8b564: Waiting\n1b94e74664de: Waiting\nc7ed990a2339: Verifying Checksum\nc7ed990a2339: Download complete\ncdc1ed5fcb6f: Verifying Checksum\ncdc1ed5fcb6f: Download complete\nc7ed990a2339: Pull complete\ncdc1ed5fcb6f: Pull complete\n44ab1cc8b564: Download complete\n1b94e74664de: Verifying Checksum\n1b94e74664de: Download complete\nf865244d5ec4: Verifying Checksum\nf865244d5ec4: Download complete\nf865244d5ec4: Pull complete\n1b94e74664de: Pull complete\n44ab1cc8b564: Pull complete\nDigest: sha256:5f1e806bd5abf9d45183ea7c7ea975a50416e5bf0fc0518bd69664b864775f1e\nStatus: Downloaded newer image for vault:1.8.12\n ---> 499350482e03\nStep 14/30 : RUN apk -v --update --no-cache add   bash ca-certificates curl openssl\n ---> Running in 61e2f94fb19a\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.14/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.14/community/x86_64/APKINDEX.tar.gz\n(1/9) Installing ncurses-terminfo-base (6.2_p20210612-r1)\n(2/9) Installing ncurses-libs (6.2_p20210612-r1)\n(3/9) Installing readline (8.1.0-r0)\n(4/9) Installing bash (5.1.16-r0)\nExecuting bash-5.1.16-r0.post-install\n(5/9) Installing brotli-libs (1.0.9-r5)\n(6/9) Installing nghttp2-libs (1.43.0-r0)\n(7/9) Installing libcurl (7.79.1-r4)\n(8/9) Installing curl (7.79.1-r4)\n(9/9) Installing openssl (1.1.1s-r0)\nExecuting busybox-1.33.1-r8.trigger\nOK: 28 packages, 156 dirs, 1559 files, 14 MiB\nRemoving intermediate container 61e2f94fb19a\n ---> 0c50ba6f3a7f\nStep 15/30 : WORKDIR /vault/plugins/\n ---> Running in c7d4771cfac5\nRemoving intermediate container c7d4771cfac5\n ---> 0a86c19a4051\nStep 16/30 : COPY --from=builder /go/src/github.com/bloxapp/key-vault/ethsign ./ethsign\n ---> cf8802293822\nStep 17/30 : COPY ./config/vault-config.json /vault/config/vault-config.json\n ---> 7fe34de5c3fc\nStep 18/30 : COPY ./config/vault-config-tls.json /vault/config/vault-config-tls.json\n ---> 9e00afae1f9f\nStep 19/30 : COPY ./config/entrypoint.sh /vault/config/entrypoint.sh\n ---> 273590dcebf3\nStep 20/30 : COPY ./config/vault-tls.sh /vault/config/vault-tls.sh\n ---> 587271e1b679\nStep 21/30 : COPY ./config/vault-init.sh /vault/config/vault-init.sh\n ---> beac85ee8c45\nStep 22/30 : COPY ./config/vault-unseal.sh /vault/config/vault-unseal.sh\n ---> db2947b89645\nStep 23/30 : COPY ./config/vault-policies.sh /vault/config/vault-policies.sh\n ---> ca9366b65cef\nStep 24/30 : COPY ./config/vault-plugin.sh /vault/config/vault-plugin.sh\n ---> 42ddd7358bd8\nStep 25/30 : COPY ./policies/signer-policy.hcl /vault/policies/signer-policy.hcl\n ---> a6403e80f041\nStep 26/30 : RUN chown vault /vault/config/entrypoint.sh\n ---> Running in 972edb98adb8\nRemoving intermediate container 972edb98adb8\n ---> 8198ed528cb7\nStep 27/30 : RUN apk add jq\n ---> Running in ce6a312a4cd7\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.14/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.14/community/x86_64/APKINDEX.tar.gz\n(1/2) Installing oniguruma (6.9.7.1-r0)\n(2/2) Installing jq (1.6-r1)\nExecuting busybox-1.33.1-r8.trigger\nOK: 15 MiB in 30 packages\nRemoving intermediate container ce6a312a4cd7\n ---> 40e677b7c3ea\nStep 28/30 : WORKDIR /\n ---> Running in e880b3a62c12\nRemoving intermediate container e880b3a62c12\n ---> cc1db117529a\nStep 29/30 : EXPOSE 8200\n ---> Running in 8b05ce139003\nRemoving intermediate container 8b05ce139003\n ---> 74967f955b44\nStep 30/30 : CMD [\"bash\", \"/vault/config/entrypoint.sh\"]\n ---> Running in a9bfb88c5f1e\nRemoving intermediate container a9bfb88c5f1e\n ---> 976932e7fd9b\nSuccessfully built 976932e7fd9b\nSuccessfully tagged key-vault:latest\n","stderr":"","imageSize":222822912},"repair":{"startTime":1672970497001,"endTime":1672970497137,"violations":[{"name":"apkAddUseNoCache","position":{"start":51,"end":51,"columnStart":4,"columnEnd":14}}],"repairedDockerfile":"#\n# STEP 1: Prepare environment\n#\nFROM golang:1.18 AS preparer\n\nRUN apt-get update                                                        && \\\n  DEBIAN_FRONTEND=noninteractive apt-get install -yq --no-install-recommends \\\n  curl git zip unzip wget g++ python gcc jq                                \\\n  && rm -rf /var/lib/apt/lists/*\n\nRUN go version\nRUN python --version\n\nWORKDIR /go/src/github.com/bloxapp/key-vault/\nCOPY go.mod .\nCOPY go.sum .\nRUN go mod download\n\n#\n# STEP 2: Build executable binary\n#\nFROM preparer AS builder\n\n# Copy files and install app\nCOPY . .\nRUN go get -d -v ./...\nRUN CGO_CFLAGS=\"-O -D__BLST_PORTABLE__\" CGO_ENABLED=1 GOOS=linux go build -a -ldflags \"-linkmode external -extldflags \\\"-static -lm\\\" -X main.Version=$(git describe --tags $(git rev-list --tags --max-count=1))\" -o ethsign .\n\n#\n# STEP 3: Get vault image and copy the plugin\n#\nFROM vault:1.8.12 AS runner\n\n# Download dependencies\nRUN apk -v --update --no-cache add \\\n  bash ca-certificates curl openssl\n\nWORKDIR /vault/plugins/\n\nCOPY --from=builder /go/src/github.com/bloxapp/key-vault/ethsign ./ethsign\nCOPY ./config/vault-config.json /vault/config/vault-config.json\nCOPY ./config/vault-config-tls.json /vault/config/vault-config-tls.json\nCOPY ./config/entrypoint.sh /vault/config/entrypoint.sh\nCOPY ./config/vault-tls.sh /vault/config/vault-tls.sh\nCOPY ./config/vault-init.sh /vault/config/vault-init.sh\nCOPY ./config/vault-unseal.sh /vault/config/vault-unseal.sh\nCOPY ./config/vault-policies.sh /vault/config/vault-policies.sh\nCOPY ./config/vault-plugin.sh /vault/config/vault-plugin.sh\nCOPY ./policies/signer-policy.hcl /vault/policies/signer-policy.hcl\n\nRUN chown vault /vault/config/entrypoint.sh\nRUN apk add --no-cache jq\n\nWORKDIR /\n\n# Expose port 8200\nEXPOSE 8200\n\n# Run vault\nCMD [\"bash\", \"/vault/config/entrypoint.sh\"]\n"},"repairedBuild":{"startTime":1672970497343,"endTime":1672970647911,"error":null,"stdout":"Sending build context to Docker daemon   49.2MB\r\r\nStep 1/30 : FROM golang:1.18 AS preparer\n ---> fffd0d9a59da\nStep 2/30 : RUN apt-get update                                                        &&   DEBIAN_FRONTEND=noninteractive apt-get install -yq --no-install-recommends   curl git zip unzip wget g++ python gcc jq                                  && rm -rf /var/lib/apt/lists/*\n ---> Running in 5f7a34fc7d8d\nGet:1 http://deb.debian.org/debian bullseye InRelease [116 kB]\nGet:2 http://deb.debian.org/debian-security bullseye-security InRelease [48.4 kB]\nGet:3 http://deb.debian.org/debian bullseye-updates InRelease [44.1 kB]\nGet:4 http://deb.debian.org/debian bullseye/main amd64 Packages [8183 kB]\nGet:5 http://deb.debian.org/debian-security bullseye-security/main amd64 Packages [210 kB]\nGet:6 http://deb.debian.org/debian bullseye-updates/main amd64 Packages [14.6 kB]\nFetched 8616 kB in 1s (6581 kB/s)\nReading package lists...\nReading package lists...\nBuilding dependency tree...\nReading state information...\ncurl is already the newest version (7.74.0-1.3+deb11u3).\ng++ is already the newest version (4:10.2.1-1).\ngcc is already the newest version (4:10.2.1-1).\ngit is already the newest version (1:2.30.2-1).\nwget is already the newest version (1.21-1+deb11u1).\nThe following additional packages will be installed:\n  libjq1 libonig5 libpython2-stdlib libpython2.7-minimal libpython2.7-stdlib\n  mailcap mime-support python2 python2-minimal python2.7 python2.7-minimal\nSuggested packages:\n  python2-doc python-tk python2.7-doc binfmt-support\nRecommended packages:\n  bzip2 file xz-utils\nThe following NEW packages will be installed:\n  jq libjq1 libonig5 libpython2-stdlib libpython2.7-minimal\n  libpython2.7-stdlib mailcap mime-support python-is-python2 python2\n  python2-minimal python2.7 python2.7-minimal unzip zip\n0 upgraded, 15 newly installed, 0 to remove and 1 not upgraded.\nNeed to get 4808 kB of archives.\nAfter this operation, 18.5 MB of additional disk space will be used.\nGet:1 http://deb.debian.org/debian bullseye/main amd64 libpython2.7-minimal amd64 2.7.18-8 [396 kB]\nGet:2 http://deb.debian.org/debian bullseye/main amd64 python2.7-minimal amd64 2.7.18-8 [1322 kB]\nGet:3 http://deb.debian.org/debian bullseye/main amd64 python2-minimal amd64 2.7.18-3 [34.2 kB]\nGet:4 http://deb.debian.org/debian bullseye/main amd64 mailcap all 3.69 [31.7 kB]\nGet:5 http://deb.debian.org/debian bullseye/main amd64 mime-support all 3.66 [10.9 kB]\nGet:6 http://deb.debian.org/debian bullseye/main amd64 libpython2.7-stdlib amd64 2.7.18-8 [1865 kB]\nGet:7 http://deb.debian.org/debian bullseye/main amd64 python2.7 amd64 2.7.18-8 [311 kB]\nGet:8 http://deb.debian.org/debian bullseye/main amd64 libpython2-stdlib amd64 2.7.18-3 [21.2 kB]\nGet:9 http://deb.debian.org/debian bullseye/main amd64 python2 amd64 2.7.18-3 [24.5 kB]\nGet:10 http://deb.debian.org/debian bullseye/main amd64 libonig5 amd64 6.9.6-1.1 [185 kB]\nGet:11 http://deb.debian.org/debian bullseye/main amd64 libjq1 amd64 1.6-2.1 [135 kB]\nGet:12 http://deb.debian.org/debian bullseye/main amd64 jq amd64 1.6-2.1 [64.9 kB]\nGet:13 http://deb.debian.org/debian bullseye/main amd64 python-is-python2 all 2.7.18-9 [2940 B]\nGet:14 http://deb.debian.org/debian bullseye/main amd64 unzip amd64 6.0-26+deb11u1 [172 kB]\nGet:15 http://deb.debian.org/debian bullseye/main amd64 zip amd64 3.0-12 [232 kB]\n\u001b[91mdebconf: delaying package configuration, since apt-utils is not installed\n\u001b[0mFetched 4808 kB in 0s (79.6 MB/s)\nSelecting previously unselected package libpython2.7-minimal:amd64.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 15718 files and directories currently installed.)\r\nPreparing to unpack .../0-libpython2.7-minimal_2.7.18-8_amd64.deb ...\r\nUnpacking libpython2.7-minimal:amd64 (2.7.18-8) ...\r\nSelecting previously unselected package python2.7-minimal.\r\nPreparing to unpack .../1-python2.7-minimal_2.7.18-8_amd64.deb ...\r\nUnpacking python2.7-minimal (2.7.18-8) ...\r\nSelecting previously unselected package python2-minimal.\r\nPreparing to unpack .../2-python2-minimal_2.7.18-3_amd64.deb ...\r\nUnpacking python2-minimal (2.7.18-3) ...\r\nSelecting previously unselected package mailcap.\r\nPreparing to unpack .../3-mailcap_3.69_all.deb ...\r\nUnpacking mailcap (3.69) ...\r\nSelecting previously unselected package mime-support.\r\nPreparing to unpack .../4-mime-support_3.66_all.deb ...\r\nUnpacking mime-support (3.66) ...\r\nSelecting previously unselected package libpython2.7-stdlib:amd64.\r\nPreparing to unpack .../5-libpython2.7-stdlib_2.7.18-8_amd64.deb ...\r\nUnpacking libpython2.7-stdlib:amd64 (2.7.18-8) ...\r\nSelecting previously unselected package python2.7.\r\nPreparing to unpack .../6-python2.7_2.7.18-8_amd64.deb ...\r\nUnpacking python2.7 (2.7.18-8) ...\r\nSelecting previously unselected package libpython2-stdlib:amd64.\r\nPreparing to unpack .../7-libpython2-stdlib_2.7.18-3_amd64.deb ...\r\nUnpacking libpython2-stdlib:amd64 (2.7.18-3) ...\r\nSetting up libpython2.7-minimal:amd64 (2.7.18-8) ...\r\nSetting up python2.7-minimal (2.7.18-8) ...\r\nSetting up python2-minimal (2.7.18-3) ...\r\nSelecting previously unselected package python2.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 16488 files and directories currently installed.)\r\nPreparing to unpack .../0-python2_2.7.18-3_amd64.deb ...\r\nUnpacking python2 (2.7.18-3) ...\r\nSelecting previously unselected package libonig5:amd64.\r\nPreparing to unpack .../1-libonig5_6.9.6-1.1_amd64.deb ...\r\nUnpacking libonig5:amd64 (6.9.6-1.1) ...\r\nSelecting previously unselected package libjq1:amd64.\r\nPreparing to unpack .../2-libjq1_1.6-2.1_amd64.deb ...\r\nUnpacking libjq1:amd64 (1.6-2.1) ...\r\nSelecting previously unselected package jq.\r\nPreparing to unpack .../3-jq_1.6-2.1_amd64.deb ...\r\nUnpacking jq (1.6-2.1) ...\r\nSelecting previously unselected package python-is-python2.\r\nPreparing to unpack .../4-python-is-python2_2.7.18-9_all.deb ...\r\nUnpacking python-is-python2 (2.7.18-9) ...\r\nSelecting previously unselected package unzip.\r\nPreparing to unpack .../5-unzip_6.0-26+deb11u1_amd64.deb ...\r\nUnpacking unzip (6.0-26+deb11u1) ...\r\nSelecting previously unselected package zip.\r\nPreparing to unpack .../6-zip_3.0-12_amd64.deb ...\r\nUnpacking zip (3.0-12) ...\r\nSetting up unzip (6.0-26+deb11u1) ...\r\nSetting up zip (3.0-12) ...\r\nSetting up mailcap (3.69) ...\r\nSetting up libonig5:amd64 (6.9.6-1.1) ...\r\nSetting up mime-support (3.66) ...\r\nSetting up libjq1:amd64 (1.6-2.1) ...\r\nSetting up libpython2.7-stdlib:amd64 (2.7.18-8) ...\r\nSetting up jq (1.6-2.1) ...\r\nSetting up python2.7 (2.7.18-8) ...\r\nSetting up libpython2-stdlib:amd64 (2.7.18-3) ...\r\nSetting up python2 (2.7.18-3) ...\r\nSetting up python-is-python2 (2.7.18-9) ...\r\nProcessing triggers for libc-bin (2.31-13+deb11u5) ...\r\nRemoving intermediate container 5f7a34fc7d8d\n ---> 73fa4e02e44e\nStep 3/30 : RUN go version\n ---> Running in a0490cae32bf\ngo version go1.18.9 linux/amd64\nRemoving intermediate container a0490cae32bf\n ---> 6327c2e5d39d\nStep 4/30 : RUN python --version\n ---> Running in 48947d0ff46e\n\u001b[91mPython 2.7.18\n\u001b[0mRemoving intermediate container 48947d0ff46e\n ---> 09b0043a708a\nStep 5/30 : WORKDIR /go/src/github.com/bloxapp/key-vault/\n ---> Running in 91a4c7d31e85\nRemoving intermediate container 91a4c7d31e85\n ---> e85879575d12\nStep 6/30 : COPY go.mod .\n ---> dc688104c109\nStep 7/30 : COPY go.sum .\n ---> 197d0a7f9d47\nStep 8/30 : RUN go mod download\n ---> Running in 0d175e657476\nRemoving intermediate container 0d175e657476\n ---> ce7eff046ac2\nStep 9/30 : FROM preparer AS builder\n ---> ce7eff046ac2\nStep 10/30 : COPY . .\n ---> d656ca238648\nStep 11/30 : RUN go get -d -v ./...\n ---> Running in 7a54d8e304e2\nRemoving intermediate container 7a54d8e304e2\n ---> 3a20e6eca3de\nStep 12/30 : RUN CGO_CFLAGS=\"-O -D__BLST_PORTABLE__\" CGO_ENABLED=1 GOOS=linux go build -a -ldflags \"-linkmode external -extldflags \\\"-static -lm\\\" -X main.Version=$(git describe --tags $(git rev-list --tags --max-count=1))\" -o ethsign .\n ---> Running in b7795731bf10\n\u001b[91mfatal: No names found, cannot describe anything.\n\u001b[0m\u001b[91m# github.com/bloxapp/key-vault\n/usr/bin/ld: /tmp/go-link-2766863608/000035.o: in function `_cgo_129d52bb6bd3_Cfunc_mygetgrouplist':\ngetgrouplist_unix.cgo2.c:(.text+0x1e): warning: Using 'getgrouplist' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking\n/usr/bin/ld: /tmp/go-link-2766863608/000034.o: in function `_cgo_129d52bb6bd3_Cfunc_mygetgrgid_r':\ncgo_lookup_unix.cgo2.c:(.text+0x33): warning: Using 'getgrgid_r' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking\n/usr/bin/ld: /tmp/go-link-2766863608/000034.o: in function `_cgo_129d52bb6bd3_Cfunc_mygetgrnam_r':\ncgo_lookup_unix.cgo2.c:(.text+0x6d): warning: Using 'getgrnam_r' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking\n/usr/bin/ld: /tmp/go-link-2766863608/000034.o: in function `_cgo_129d52bb6bd3_Cfunc_mygetpwnam_r':\ncgo_lookup_unix.cgo2.c:(.text+0xa7): warning: Using 'getpwnam_r' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking\n/usr/bin/ld: /tmp/go-link-2766863608/000034.o: in function `_cgo_129d52bb6bd3_Cfunc_mygetpwuid_r':\ncgo_lookup_unix.cgo2.c:(.text+0xe0): warning: Using 'getpwuid_r' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking\n/usr/bin/ld: /tmp/go-link-2766863608/000004.o: in function `_cgo_6cc2654a8ed3_C2func_getaddrinfo':\ncgo_unix.cgo2.c:(.text+0x33): warning: Using 'getaddrinfo' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking\n\u001b[0mRemoving intermediate container b7795731bf10\n ---> d8249aab4489\nStep 13/30 : FROM vault:1.8.12 AS runner\n ---> 499350482e03\nStep 14/30 : RUN apk -v --update --no-cache add   bash ca-certificates curl openssl\n ---> Running in 6ccaf20e4cc6\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.14/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.14/community/x86_64/APKINDEX.tar.gz\n(1/9) Installing ncurses-terminfo-base (6.2_p20210612-r1)\n(2/9) Installing ncurses-libs (6.2_p20210612-r1)\n(3/9) Installing readline (8.1.0-r0)\n(4/9) Installing bash (5.1.16-r0)\nExecuting bash-5.1.16-r0.post-install\n(5/9) Installing brotli-libs (1.0.9-r5)\n(6/9) Installing nghttp2-libs (1.43.0-r0)\n(7/9) Installing libcurl (7.79.1-r4)\n(8/9) Installing curl (7.79.1-r4)\n(9/9) Installing openssl (1.1.1s-r0)\nExecuting busybox-1.33.1-r8.trigger\nOK: 28 packages, 156 dirs, 1559 files, 14 MiB\nRemoving intermediate container 6ccaf20e4cc6\n ---> 9a63339d3c35\nStep 15/30 : WORKDIR /vault/plugins/\n ---> Running in c075b9dcd3ae\nRemoving intermediate container c075b9dcd3ae\n ---> 05d71940e40a\nStep 16/30 : COPY --from=builder /go/src/github.com/bloxapp/key-vault/ethsign ./ethsign\n ---> 8ee7f1b2e251\nStep 17/30 : COPY ./config/vault-config.json /vault/config/vault-config.json\n ---> 382ef2ffbc97\nStep 18/30 : COPY ./config/vault-config-tls.json /vault/config/vault-config-tls.json\n ---> 47aba595722e\nStep 19/30 : COPY ./config/entrypoint.sh /vault/config/entrypoint.sh\n ---> 75d38b83016f\nStep 20/30 : COPY ./config/vault-tls.sh /vault/config/vault-tls.sh\n ---> 935945f4b38c\nStep 21/30 : COPY ./config/vault-init.sh /vault/config/vault-init.sh\n ---> 0f0de0d82dc2\nStep 22/30 : COPY ./config/vault-unseal.sh /vault/config/vault-unseal.sh\n ---> 8b7b1562dec5\nStep 23/30 : COPY ./config/vault-policies.sh /vault/config/vault-policies.sh\n ---> a1630e6f9603\nStep 24/30 : COPY ./config/vault-plugin.sh /vault/config/vault-plugin.sh\n ---> 513a851eb1a4\nStep 25/30 : COPY ./policies/signer-policy.hcl /vault/policies/signer-policy.hcl\n ---> 2f25b685b48c\nStep 26/30 : RUN chown vault /vault/config/entrypoint.sh\n ---> Running in b5b15b28df5a\nRemoving intermediate container b5b15b28df5a\n ---> 17516b1dc59e\nStep 27/30 : RUN apk add --no-cache jq\n ---> Running in 0c32df3f3a26\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.14/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.14/community/x86_64/APKINDEX.tar.gz\n(1/2) Installing oniguruma (6.9.7.1-r0)\n(2/2) Installing jq (1.6-r1)\nExecuting busybox-1.33.1-r8.trigger\nOK: 15 MiB in 30 packages\nRemoving intermediate container 0c32df3f3a26\n ---> 853cdceb7269\nStep 28/30 : WORKDIR /\n ---> Running in 14892b93c307\nRemoving intermediate container 14892b93c307\n ---> 82b050404874\nStep 29/30 : EXPOSE 8200\n ---> Running in 78d2e3b532f9\nRemoving intermediate container 78d2e3b532f9\n ---> a9c80c1d75ce\nStep 30/30 : CMD [\"bash\", \"/vault/config/entrypoint.sh\"]\n ---> Running in 999127b6f116\nRemoving intermediate container 999127b6f116\n ---> a6b6eaffaed0\nSuccessfully built a6b6eaffaed0\nSuccessfully tagged key-vault:latest\n","stderr":"","imageSize":220665446}}