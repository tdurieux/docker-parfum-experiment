{"repository":"https://github.com/darkwire/darkwire.io","dockerfilePath":"Dockerfile","startTime":1672932785939,"endTime":1672932870524,"clone":{"startTime":1672932785968,"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/darkwire/darkwire.io'...\n","error":null,"endTime":1672932787089,"commit":"08071fba4483fef3901e5a5d8d9023d7e03c6b6e"},"originalBuild":{"startTime":1672932787230,"endTime":1672932868946,"error":null,"stdout":"Sending build context to Docker daemon  859.1kB\r\r\nStep 1/12 : FROM node:18-bullseye-slim\n ---> a26e85f2ac41\nStep 2/12 : USER node:node\n ---> Running in 9fb40ebc6141\nRemoving intermediate container 9fb40ebc6141\n ---> 18aad6155d5d\nStep 3/12 : WORKDIR /home/node\n ---> Running in 0b3900e58463\nRemoving intermediate container 0b3900e58463\n ---> 13056d0bc896\nStep 4/12 : ENV MAILGUN_API_KEY=api-key     MAILGUN_DOMAIN=darkwire.io     ABUSE_TO_EMAIL_ADDRESS=abuse@darkwire.io     ABUSE_FROM_EMAIL_ADDRESS=\"Darkwire <no-reply@darkwire.io>\"     CLIENT_DIST_DIRECTORY='client/dist/'    ROOM_HASH_SECRET='some-uuid'    SITE_URL=https://darkwire.io     STORE_BACKEND=memory\n ---> Running in 128e5eadfada\nRemoving intermediate container 128e5eadfada\n ---> 3e02b91749c2\nStep 5/12 : ENV TZ=UTC     VITE_API_HOST=localhost     VITE_API_PROTOCOL=http     VITE_API_PORT=3001     VITE_COMMIT_SHA=some_sha     VITE_MAX_FILE_SIZE=4\n ---> Running in ca9bb6381af8\nRemoving intermediate container ca9bb6381af8\n ---> 3af153e1cbb8\nStep 6/12 : COPY --chown=node:node . .\n ---> 38e1534e6261\nStep 7/12 : RUN yarn && yarn build\n ---> Running in 0265d49ec217\nyarn install v1.22.19\n[1/5] Validating package.json...\n[2/5] Resolving packages...\n[3/5] Fetching packages...\n[4/5] Linking dependencies...\n[5/5] Building fresh packages...\nDone in 10.18s.\nyarn run v1.22.19\n$ ./build.sh\nbuilding client...\n[1/4] Resolving packages...\n[2/4] Fetching packages...\n[3/4] Linking dependencies...\n\u001b[91mwarning \" > bootstrap@4.6.2\" has unmet peer dependency \"popper.js@^1.16.1\".\nwarning \" > react-simple-dropdown@3.2.3\" has incorrect peer dependency \"react@0.14.x || 15.x || 16.x\".\n\u001b[0m\u001b[91mwarning \" > react-simple-dropdown@3.2.3\" has incorrect peer dependency \"react-dom@0.14.x || 15.x || 16.x\".\n\u001b[0m\u001b[91mwarning \" > @testing-library/user-event@14.4.3\" has unmet peer dependency \"@testing-library/dom@>=7.21.4\".\n\u001b[0m\u001b[91mwarning \" > @vitejs/plugin-react@3.0.0\" has unmet peer dependency \"vite@^4.0.0\".\n\u001b[0m[4/4] Building fresh packages...\n$ tsc && vite build\nvite v4.0.0 building for production...\ntransforming...\n✓ 718 modules transformed.\nrendering chunks...\ncomputing gzip size...\ndist/index.html                   0.78 kB\ndist/assets/logo-8f389ef2.png     7.59 kB\ndist/assets/beep-fa6824f6.mp3    12.38 kB\ndist/assets/index-9baa16a6.css  167.08 kB │ gzip:  25.53 kB\ndist/assets/index-6b874bdb.js   894.53 kB │ gzip: 295.02 kB\nbuilding server...\n[1/4] Resolving packages...\n[2/4] Fetching packages...\n[3/4] Linking dependencies...\n\u001b[91mwarning Workspaces can only be enabled in private projects.\n\u001b[0m[4/4] Building fresh packages...\n$ echo 'Nothing to build here.'\nNothing to build here.\nDone in 48.61s.\nRemoving intermediate container 0265d49ec217\n ---> 8370d9832021\nStep 8/12 : STOPSIGNAL SIGINT\n ---> Running in 264a5769c8b1\nRemoving intermediate container 264a5769c8b1\n ---> 587decf2d7b9\nStep 9/12 : EXPOSE 3001\n ---> Running in 6f9b4e60f117\nRemoving intermediate container 6f9b4e60f117\n ---> 8c6d75c61ddd\nStep 10/12 : HEALTHCHECK --interval=30s --timeout=30s --start-period=10s --retries=3     CMD [ \"curl\", \"-f\", \"${VITE_API_PROTOCOL}://localhost:${VITE_API_PORT}\", \"||\", \"exit\", \"1\" ]\n ---> Running in e34f6afa1ea4\nRemoving intermediate container e34f6afa1ea4\n ---> 3f24a8576534\nStep 11/12 : ENTRYPOINT [ \"docker-entrypoint.sh\" ]\n ---> Running in 8735a3287e43\nRemoving intermediate container 8735a3287e43\n ---> 23f979180e99\nStep 12/12 : CMD [\"yarn\", \"start\"]\n ---> Running in 9f12e72470d1\nRemoving intermediate container 9f12e72470d1\n ---> eb7d1b016e81\nSuccessfully built eb7d1b016e81\nSuccessfully tagged darkwire.io:latest\n","stderr":"","imageSize":1026952459},"repair":{"startTime":1672932869008,"endTime":1672932869049,"violations":[],"repairedDockerfile":"FROM node:18-bullseye-slim\n\nUSER node:node\n\nWORKDIR /home/node\n\n# Server environmental variables will be put into server/.env\nENV MAILGUN_API_KEY=api-key \\\n    MAILGUN_DOMAIN=darkwire.io \\\n    ABUSE_TO_EMAIL_ADDRESS=abuse@darkwire.io \\\n    ABUSE_FROM_EMAIL_ADDRESS=\"Darkwire <no-reply@darkwire.io>\" \\\n    CLIENT_DIST_DIRECTORY='client/dist/'\\\n    ROOM_HASH_SECRET='some-uuid'\\\n    SITE_URL=https://darkwire.io \\\n    STORE_BACKEND=memory\n\n# Client configuration will be put into client/.env\nENV TZ=UTC \\\n    VITE_API_HOST=localhost \\\n    VITE_API_PROTOCOL=http \\\n    VITE_API_PORT=3001 \\\n    VITE_COMMIT_SHA=some_sha \\\n    VITE_MAX_FILE_SIZE=4\n\nCOPY --chown=node:node . .\n\nRUN yarn && yarn build\n\nSTOPSIGNAL SIGINT\nEXPOSE 3001\nHEALTHCHECK --interval=30s --timeout=30s --start-period=10s --retries=3 \\ \n    CMD [ \"curl\", \"-f\", \"${VITE_API_PROTOCOL}://localhost:${VITE_API_PORT}\", \"||\", \"exit\", \"1\" ]\n\nENTRYPOINT [ \"docker-entrypoint.sh\" ]\nCMD [\"yarn\", \"start\"]"}}