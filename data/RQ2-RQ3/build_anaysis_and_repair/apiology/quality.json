{"repository":"https://github.com/apiology/quality","dockerfilePath":"Dockerfile","startTime":1672158788834,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/apiology/quality'...\n","error":null,"commit":"9b892b93f2c6a3d2f34ea418b78167316aeeaf8f"},"originalBuild":{"startTimestamp":1672158790009,"endTimestamp":1672159228090,"error":{"code":1,"killed":false,"signal":null,"cmd":"docker build --no-cache --force-rm -t quality:latest -f /tmp/dinghy-analysis/apiology/quality/Dockerfile ."},"stdout":"Sending build context to Docker daemon  550.9kB\r\r\nStep 1/42 : FROM alpine:3.16 AS base\n3.16: Pulling from library/alpine\nca7dd9ec2225: Already exists\nDigest: sha256:b95359c2505145f16c6aa384f9cc74eeff78eb36d308ca4fd902eeeb0a0b161b\nStatus: Downloaded newer image for alpine:3.16\n ---> bfe296a52501\nStep 2/42 : RUN apk update &&     apk add --no-cache ruby ruby-irb ruby-dev make gcc libc-dev git icu-dev zlib-dev g++ cmake openssl-dev coreutils &&     gem update --system &&     gem install --no-doc rdoc bigdecimal rake etc quality bundler io-console pronto pronto-reek pronto-rubocop pronto-flay pronto-punchlist pronto-bigfiles 'bundler:<2' &&     gem uninstall quality &&     strip /usr/lib/ruby/gems/*/extensions/x86_64-linux-musl/*/rugged-*/rugged/rugged.so &&     apk del ruby-irb ruby-dev make gcc libc-dev icu-dev zlib-dev g++ cmake openssl-dev nghttp2 curl pax-utils &&     apk add --no-cache libssl1.1 icu-libs &&     rm -fr /usr/lib/ruby/gems/*/gems/rugged-*/vendor/libgit2/build/src            /usr/lib/ruby/gems/*/gems/rugged-*/vendor/libgit2/src            /usr/lib/ruby/gems/*/gems/rugged-*/ext/rugged            /usr/lib/ruby/gems/*/gems/rugged-*/vendor/libgit2/build/libgit2.a            /usr/lib/ruby/gems/*/gems/rugged-*/lib/rugged/rugged.so            /usr/lib/ruby/gems/*/gems/unf_ext-*/ext/unf_ext/unf            /usr/lib/ruby/gems/*/gems/kramdown-*/test            /usr/lib/ruby/gems/*/gems/ruby_parser-*/lib/*.y            /usr/lib/ruby/gems/*/gems/ruby_parser-*/lib/*.yy            /usr/lib/ruby/gems/*/gems/ruby_parser-*/lib/*.rex            /usr/lib/ruby/gems/*/cache            /usr/lib/ruby/gems/*/gems/erubis-*/doc-api            /usr/lib/ruby/gems/*/gems/reek-*/spec            /usr/lib/ruby/gems/*/gems/kwalify-*/doc-api       &&       echo \"Done\"\n ---> Running in 6bf9e129b7b0\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/community/x86_64/APKINDEX.tar.gz\nv3.16.3-91-gd0e167f17b [https://dl-cdn.alpinelinux.org/alpine/v3.16/main]\nv3.16.3-88-gef347edb61 [https://dl-cdn.alpinelinux.org/alpine/v3.16/community]\nOK: 17039 distinct packages available\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/community/x86_64/APKINDEX.tar.gz\n(1/55) Upgrading musl (1.2.3-r1 -> 1.2.3-r2)\n(2/55) Installing libacl (2.3.1-r0)\n(3/55) Installing libbz2 (1.0.8-r1)\n(4/55) Installing expat (2.5.0-r0)\n(5/55) Installing lz4-libs (1.9.3-r1)\n(6/55) Installing xz-libs (5.2.5-r1)\n(7/55) Installing zstd-libs (1.5.2-r1)\n(8/55) Installing libarchive (3.6.1-r1)\n(9/55) Installing ca-certificates (20220614-r0)\n(10/55) Installing brotli-libs (1.0.9-r6)\n(11/55) Installing nghttp2-libs (1.47.0-r0)\n(12/55) Installing libcurl (7.83.1-r5)\n(13/55) Installing ncurses-terminfo-base (6.3_p20220521-r0)\n(14/55) Installing ncurses-libs (6.3_p20220521-r0)\n(15/55) Installing libgcc (11.2.1_git20220219-r2)\n(16/55) Installing rhash-libs (1.4.2-r2)\n(17/55) Installing libstdc++ (11.2.1_git20220219-r2)\n(18/55) Installing libuv (1.44.1-r0)\n(19/55) Installing cmake (3.23.1-r0)\n(20/55) Installing libattr (2.5.1-r1)\n(21/55) Installing gmp (6.2.1-r2)\n(22/55) Installing skalibs (2.11.2.0-r0)\n(23/55) Installing utmps-libs (0.1.2.0-r0)\n(24/55) Installing coreutils (9.1-r0)\n(25/55) Installing binutils (2.38-r3)\n(26/55) Installing libgomp (11.2.1_git20220219-r2)\n(27/55) Installing libatomic (11.2.1_git20220219-r2)\n(28/55) Installing isl22 (0.22-r0)\n(29/55) Installing mpfr4 (4.1.0-r0)\n(30/55) Installing mpc1 (1.2.1-r0)\n(31/55) Installing gcc (11.2.1_git20220219-r2)\n(32/55) Installing musl-dev (1.2.3-r2)\n(33/55) Installing libc-dev (0.7.2-r3)\n(34/55) Installing g++ (11.2.1_git20220219-r2)\n(35/55) Installing pcre2 (10.40-r0)\n(36/55) Installing git (2.36.3-r0)\n(37/55) Installing icu-data-en (71.1-r2)\nExecuting icu-data-en-71.1-r2.post-install\n\u001b[91m*\n* If you need ICU with non-English locales and legacy charset support, install\n* package icu-data-full.\n*\n\u001b[0m(38/55) Installing icu-libs (71.1-r2)\n(39/55) Installing icu (71.1-r2)\n(40/55) Installing pkgconf (1.8.0-r1)\n(41/55) Installing icu-dev (71.1-r2)\n(42/55) Installing make (4.3-r0)\n(43/55) Installing openssl-dev (1.1.1s-r0)\n(44/55) Installing libffi (3.4.2-r1)\n(45/55) Installing readline (8.1.2-r0)\n(46/55) Installing libucontext (1.2-r0)\n(47/55) Installing yaml (0.2.5-r0)\n(48/55) Installing ruby-libs (3.1.3-r0)\n(49/55) Installing ruby (3.1.3-r0)\n(50/55) Installing ruby-rdoc (3.1.3-r0)\n(51/55) Installing libgmpxx (6.2.1-r2)\n(52/55) Installing gmp-dev (6.2.1-r2)\n(53/55) Installing libucontext-dev (1.2-r0)\n(54/55) Installing ruby-dev (3.1.3-r0)\n(55/55) Installing zlib-dev (1.2.12-r3)\nExecuting busybox-1.35.0-r17.trigger\nExecuting ca-certificates-20220614-r0.trigger\nOK: 286 MiB in 68 packages\nUpdating rubygems-update\nSuccessfully installed rubygems-update-3.4.1\nParsing documentation for rubygems-update-3.4.1\nInstalling ri documentation for rubygems-update-3.4.1\nDone installing documentation for rubygems-update after 133 seconds\nParsing documentation for rubygems-update-3.4.1\nDone installing documentation for rubygems-update after 0 seconds\nInstalling RubyGems 3.4.1\n  Successfully built RubyGem\n  Name: bundler\n  Version: 2.4.1\n  File: bundler-2.4.1.gem\nBundler 2.4.1 installed\nRubyGems 3.4.1 installed\nRegenerating binstubs\nRegenerating plugins\nParsing documentation for rubygems-3.4.1\nInstalling ri documentation for rubygems-3.4.1\n\n# 3.4.1 / 2022-12-24\n\n## Enhancements:\n\n* Installs bundler 2.4.1 as a default gem.\n\n# 3.4.0 / 2022-12-24\n\n## Breaking changes:\n\n* Drop support for Ruby 2.3, 2.4, 2.5 and RubyGems 2.5, 2.6, 2.7. Pull\n  request #6107 by deivid-rodriguez\n* Remove support for deprecated OS. Pull request #6041 by peterzhu2118\n\n## Features:\n\n* Add 'call for update' to RubyGems install command. Pull request #5922 by\n  simi\n\n## Enhancements:\n\n* Add `mswin` support for cargo builder. Pull request #6167 by ianks\n* Validate Cargo.lock is present for Rust based extensions. Pull request\n  #6151 by simi\n* Clean built artifacts after building extensions. Pull request #6133 by\n  deivid-rodriguez\n* Installs bundler 2.4.0 as a default gem.\n\n## Bug fixes:\n\n* Fix crash due to `BundlerVersionFinder` not defined. Pull request #6152\n  by deivid-rodriguez\n* Don't leave corrupted partial package download around when running out\n  of disk space. Pull request #5681 by duckinator\n\n\n------------------------------------------------------------------------------\n\nRubyGems installed the following executables:\n\t/usr/bin/gem\n\t/usr/bin/bundle\n\t/usr/bin/bundler\n\nRuby Interactive (ri) documentation was installed. ri is kind of like man \npages for Ruby libraries. You may access it like this:\n  ri Classname\n  ri Classname.class_method\n  ri Classname#instance_method\nIf you do not wish to install this documentation in the future, use the\n--no-document flag, or set it as the default in your ~/.gemrc file. See\n'gem help env' for details.\n\nRubyGems system software updated\nSuccessfully installed rdoc-6.5.0\nBuilding native extensions. This could take a while...\nSuccessfully installed bigdecimal-3.1.3\nSuccessfully installed rake-13.0.6\nBuilding native extensions. This could take a while...\nSuccessfully installed etc-1.4.2\nSuccessfully installed sexp_processor-4.16.1\nSuccessfully installed ruby_parser-3.19.2\nSuccessfully installed unicode-display_width-2.3.0\nSuccessfully installed ruby-progressbar-1.11.0\nSuccessfully installed ast-2.4.2\nSuccessfully installed parser-3.1.3.0\nSuccessfully installed rubocop-ast-1.24.0\nSuccessfully installed rexml-3.2.5\nSuccessfully installed regexp_parser-2.6.1\nSuccessfully installed rainbow-3.1.1\nSuccessfully installed parallel-1.22.1\nBuilding native extensions. This could take a while...\nSuccessfully installed json-2.6.3\nSuccessfully installed rubocop-1.39.0\nSuccessfully installed rubocop-rspec-2.16.0\nSuccessfully installed rubocop-rake-0.6.0\nSuccessfully installed rubocop-minitest-0.25.1\nSuccessfully installed netrc-0.11.0\nSuccessfully installed mime-types-data-3.2022.0105\nSuccessfully installed mime-types-3.4.1\nBuilding native extensions. This could take a while...\nSuccessfully installed unf_ext-0.0.8.2\nSuccessfully installed unf-0.1.4\nSuccessfully installed domain_name-0.5.20190701\nSuccessfully installed http-cookie-1.0.5\nSuccessfully installed http-accept-1.7.0\nSuccessfully installed rest-client-2.1.0\nSuccessfully installed kwalify-0.7.2\nSuccessfully installed reek-6.1.2\nSuccessfully installed require_all-3.0.0\nSuccessfully installed concurrent-ruby-1.1.10\nSuccessfully installed i18n-1.12.0\nSuccessfully installed erubis-2.7.0\nSuccessfully installed code_analyzer-0.5.5\nSuccessfully installed tzinfo-2.0.5\nSuccessfully installed minitest-5.16.3\nSuccessfully installed activesupport-7.0.4\n********************************************************************************\n\n  rails_best_practices is a code metric tool to check the quality of rails codes.\n\n  I highly recommend you browse the Rails Best Practices website first.\n\n      http://rails-bestpractices.com\n\n  Enjoy!\n\n      Richard Huang (flyerhzm@gmail.com)\n\n********************************************************************************\nSuccessfully installed rails_best_practices-1.23.2\nSuccessfully installed source_finder-3.2.1\nSuccessfully installed punchlist-1.3.0\nSuccessfully installed chef-utils-18.0.185\nSuccessfully installed mixlib-shellout-3.2.7\nSuccessfully installed tomlrb-2.0.3\nSuccessfully installed mixlib-config-3.0.27\nSuccessfully installed mixlib-cli-2.1.8\nSuccessfully installed kramdown-2.4.0\nSuccessfully installed kramdown-parser-gfm-1.1.0\nSuccessfully installed mdl-0.12.0\nSuccessfully installed high_water_mark-0.1.0\nBuilding native extensions. This could take a while...\nSuccessfully installed rugged-1.5.0.1\nSuccessfully installed mini_mime-1.1.2\nBuilding native extensions. This could take a while...\nSuccessfully installed charlock_holmes-0.7.7\nBuilding native extensions. This could take a while...\nSuccessfully installed github-linguist-7.24.1\nSuccessfully installed path_expander-1.1.1\nSuccessfully installed flog-4.6.6\nSuccessfully installed erubi-1.12.0\nSuccessfully installed flay-2.13.0\nSuccessfully installed faraday-retry-1.0.3\nSuccessfully installed faraday-rack-1.0.0\nSuccessfully installed faraday-patron-1.0.0\nSuccessfully installed faraday-net_http_persistent-1.2.0\nSuccessfully installed faraday-net_http-1.0.1\nSuccessfully installed multipart-post-2.2.3\nSuccessfully installed faraday-multipart-1.0.4\nSuccessfully installed faraday-httpclient-1.0.1\nSuccessfully installed faraday-excon-1.1.0\nSuccessfully installed faraday-em_synchrony-1.0.0\nSuccessfully installed faraday-em_http-1.0.0\nSuccessfully installed faraday-1.10.2\nSuccessfully installed cane-3.0.0\nSuccessfully installed thor-1.2.1\nSuccessfully installed bundler-audit-0.9.1\nSuccessfully installed brakeman-5.4.0\nSuccessfully installed bigfiles-0.3.0\nSuccessfully installed quality-40.0.1\nSuccessfully installed bundler-2.4.1\nBuilding native extensions. This could take a while...\nSuccessfully installed io-console-0.6.0\nBuilding native extensions. This could take a while...\nSuccessfully installed rugged-1.0.1\nSuccessfully installed public_suffix-5.0.1\nSuccessfully installed addressable-2.8.1\nSuccessfully installed sawyer-0.9.2\nSuccessfully installed octokit-4.25.1\nSuccessfully installed multi_xml-0.6.0\nWhen you HTTParty, you must party hard!\nSuccessfully installed httparty-0.20.0\nSuccessfully installed terminal-table-3.0.2\nSuccessfully installed gitlab-4.19.0\nSuccessfully installed pronto-0.11.0\nSuccessfully installed pronto-reek-0.11.0\nSuccessfully installed pronto-rubocop-0.11.3\nSuccessfully installed pronto-flay-0.11.1\nSuccessfully installed pronto-punchlist-0.1.1\nSuccessfully installed pronto-bigfiles-0.1.2\nSuccessfully installed bundler-1.17.3\n95 gems installed\nSuccessfully uninstalled quality-40.0.1\nWorld updated, but the following packages are not removed due to:\n  ruby-irb: ruby\n\n(1/33) Purging cmake (3.23.1-r0)\n(2/33) Purging g++ (11.2.1_git20220219-r2)\n(3/33) Purging gcc (11.2.1_git20220219-r2)\n(4/33) Purging binutils (2.38-r3)\n(5/33) Purging libatomic (11.2.1_git20220219-r2)\n(6/33) Purging libgomp (11.2.1_git20220219-r2)\n(7/33) Purging libc-dev (0.7.2-r3)\n(8/33) Purging musl-dev (1.2.3-r2)\n(9/33) Purging icu-dev (71.1-r2)\n(10/33) Purging make (4.3-r0)\n(11/33) Purging openssl-dev (1.1.1s-r0)\n(12/33) Purging ruby-dev (3.1.3-r0)\n(13/33) Purging ruby-rdoc (3.1.3-r0)\n(14/33) Purging gmp-dev (6.2.1-r2)\n(15/33) Purging libgmpxx (6.2.1-r2)\n(16/33) Purging libucontext-dev (1.2-r0)\n(17/33) Purging zlib-dev (1.2.12-r3)\n(18/33) Purging libarchive (3.6.1-r1)\n(19/33) Purging libbz2 (1.0.8-r1)\n(20/33) Purging lz4-libs (1.9.3-r1)\n(21/33) Purging xz-libs (5.2.5-r1)\n(22/33) Purging zstd-libs (1.5.2-r1)\n(23/33) Purging icu (71.1-r2)\n(24/33) Purging icu-libs (71.1-r2)\n(25/33) Purging libstdc++ (11.2.1_git20220219-r2)\n(26/33) Purging libgcc (11.2.1_git20220219-r2)\n(27/33) Purging rhash-libs (1.4.2-r2)\n(28/33) Purging libuv (1.44.1-r0)\n(29/33) Purging isl22 (0.22-r0)\n(30/33) Purging mpc1 (1.2.1-r0)\n(31/33) Purging mpfr4 (4.1.0-r0)\n(32/33) Purging icu-data-en (71.1-r2)\n(33/33) Purging pkgconf (1.8.0-r1)\nExecuting busybox-1.35.0-r17.trigger\nOK: 38 MiB in 35 packages\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/community/x86_64/APKINDEX.tar.gz\n(1/4) Installing icu-data-en (71.1-r2)\nExecuting icu-data-en-71.1-r2.post-install\n\u001b[91m*\n* If you need ICU with non-English locales and legacy charset support, install\n* package icu-data-full.\n*\n\u001b[0m(2/4) Installing libgcc (11.2.1_git20220219-r2)\n(3/4) Installing libstdc++ (11.2.1_git20220219-r2)\n(4/4) Installing icu-libs (71.1-r2)\nOK: 47 MiB in 39 packages\nDone\nRemoving intermediate container 6bf9e129b7b0\n ---> 8a4d1746f9fd\nStep 3/42 : RUN mkdir /usr/quality\n ---> Running in 1ba9910ae806\nRemoving intermediate container 1ba9910ae806\n ---> fcf50e69147e\nStep 4/42 : ADD sample-project/.pronto.yml /usr/quality/.pronto.yml\n ---> 259f1750968c\nStep 5/42 : ADD sample-project/Rakefile /usr/quality/Rakefile\n ---> b862d2208e24\nStep 6/42 : COPY entrypoint.sh /\n ---> cf610b58b5e6\nStep 7/42 : FROM base AS latest\n ---> cf610b58b5e6\nStep 8/42 : VOLUME /usr/app\n ---> Running in bd2a1e452524\nRemoving intermediate container bd2a1e452524\n ---> a922a8db1a9f\nStep 9/42 : WORKDIR /usr/app\n ---> Running in 85d746d71cb3\nRemoving intermediate container 85d746d71cb3\n ---> 8927644fb44b\nStep 10/42 : ENTRYPOINT [\"/entrypoint.sh\"]\n ---> Running in d4325e290096\nRemoving intermediate container d4325e290096\n ---> 0439bb71ad9f\nStep 11/42 : ARG quality_gem_version\n ---> Running in e1e266ead644\nRemoving intermediate container e1e266ead644\n ---> 0aaeac090f50\nStep 12/42 : RUN gem install --no-doc quality:${quality_gem_version}\n ---> Running in 93bd597ef380\n\u001b[91mERROR:  While executing gem ... (NoMethodError)\n    undefined method `fetch_quality' for #<Gem::RemoteFetcher:0x00007f2b23379dd0 @proxy=nil, @pools={nil=>#<Gem::Request::ConnectionPools:0x00007f2b23381828 @proxy_uri=nil, @cert_files=[\"/usr/local/lib/site_ruby/3.1.0/rubygems/ssl_certs/rubygems.org/GlobalSignRootCA.pem\", \"/usr/local/lib/site_ruby/3.1.0/rubygems/ssl_certs/rubygems.org/GlobalSignRootCA_R3.pem\"], @pools={[\"index.rubygems.org\", 443, true]=>#<Gem::Request::HTTPSPool:0x00007f2b233811e8 @http_args=[\"index.rubygems.org\", 443], @cert_files=[\"/usr/local/lib/site_ruby/3.1.0/rubygems/ssl_certs/rubygems.org/GlobalSignRootCA.pem\", \"/usr/local/lib/site_ruby/3.1.0/rubygems/ssl_certs/rubygems.org/GlobalSignRootCA_R3.pem\"], @proxy_uri=nil, @queue=#<Thread::SizedQueue:0x00007f2b23381120>>}, @pool_mutex=#<Thread::Mutex:0x00007f2b23381760>>}, @pool_lock=#<Thread::Mutex:0x00007f2b23379a10>, @cert_files=[\"/usr/local/lib/site_ruby/3.1.0/rubygems/ssl_certs/rubygems.org/GlobalSignRootCA.pem\", \"/usr/local/lib/site_ruby/3.1.0/rubygems/ssl_certs/rubygems.org/GlobalSignRootCA_R3.pem\"], @headers={}>\n\n    data = send \"fetch_#{uri.scheme}\", uri, mtime, head\n           ^^^^\nDid you mean?  fetch_path\n\t/usr/local/lib/site_ruby/3.1.0/rubygems/remote_fetcher.rb:248:in `fetch_path'\n\t/usr/local/lib/site_ruby/3.1.0/rubygems/resolver/api_set.rb:105:in `versions'\n\t/usr/local/lib/site_ruby/3.1.0/rubygems/resolver/api_set.rb:56:in `find_all'\n\t/usr/local/lib/site_ruby/3.1.0/rubygems/resolver/composed_set.rb:54:in `block in find_all'\n\t/usr/local/lib/site_ruby/3.1.0/rubygems/resolver/composed_set.rb:53:in `map'\n\t/usr/local/lib/site_ruby/3.1.0/rubygems/resolver/composed_set.rb:53:in `find_all'\n\t/usr/local/lib/site_ruby/3.1.0/rubygems/resolver/best_set.rb:30:in `find_all'\n\t/usr/local/lib/site_ruby/3.1.0/rubygems/resolver/installer_set.rb:170:in `find_all'\n\t/usr/local/lib/site_ruby/3.1.0/rubygems/resolver/installer_set.rb:61:in `add_always_install'\n\t/usr/local/lib/site_ruby/3.1.0/rubygems/dependency_installer.rb:322:in `resolve_dependencies'\n\t/usr/local/lib/site_ruby/3.1.0/rubygems/commands/install_command.rb:205:in `install_gem'\n\t/usr/local/lib/site_ruby/3.1.0/rubygems/commands/install_command.rb:230:in `block in install_gems'\n\t/usr/local/lib/site_ruby/3.1.0/rubygems/commands/install_command.rb:223:in `each'\n\t/usr/local/lib/site_ruby/3.1.0/rubygems/commands/install_command.rb:223:in `install_gems'\n\t/usr/local/lib/site_ruby/3.1.0/rubygems/commands/install_command.rb:169:in `execute'\n\t/usr/local/lib/site_ruby/3.1.0/rubygems/command.rb:323:in `invoke_with_build_args'\n\t/usr/local/lib/site_ruby/3.1.0/rubygems/command_manager.rb:185:in `process_args'\n\t/usr/local/lib/site_ruby/3.1.0/rubygems/command_manager.rb:149:in `run'\n\t/usr/local/lib/site_ruby/3.1.0/rubygems/gem_runner.rb:51:in `run'\n\t/usr/bin/gem:10:in `<main>'\n\u001b[0mRemoving intermediate container 93bd597ef380\n","stderr":"The command '/bin/sh -c gem install --no-doc quality:${quality_gem_version}' returned a non-zero code: 1\n"},"endTime":1672159228177}