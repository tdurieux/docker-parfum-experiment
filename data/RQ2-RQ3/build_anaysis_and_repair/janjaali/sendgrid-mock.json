{"repository":"https://github.com/janjaali/sendgrid-mock","dockerfilePath":"Dockerfile","startTime":1672913442507,"endTime":1672914012934,"clone":{"startTime":1672913442564,"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/janjaali/sendgrid-mock'...\n","error":null,"endTime":1672913443448,"commit":"af426f0dcff3e3cb247c927b97c150c09ab59b2a"},"originalBuild":{"startTime":1672913443640,"endTime":1672913760613,"error":null,"stdout":"Sending build context to Docker daemon   1.24MB\r\r\nStep 1/27 : FROM node:14.15.4-alpine as node\n14.15.4-alpine: Pulling from library/node\n0a6724ff3fcd: Pulling fs layer\n7ceedf9dd120: Pulling fs layer\nce91790a06ab: Pulling fs layer\n15917197957b: Pulling fs layer\n7ceedf9dd120: Waiting\n15917197957b: Waiting\nce91790a06ab: Waiting\n0a6724ff3fcd: Waiting\n0a6724ff3fcd: Verifying Checksum\n0a6724ff3fcd: Download complete\n0a6724ff3fcd: Pull complete\n15917197957b: Download complete\nce91790a06ab: Verifying Checksum\nce91790a06ab: Download complete\n7ceedf9dd120: Verifying Checksum\n7ceedf9dd120: Download complete\n7ceedf9dd120: Pull complete\nce91790a06ab: Pull complete\n15917197957b: Pull complete\nDigest: sha256:2ae9624a39ce437e7f58931a5747fdc60224c6e40f8980db90728de58e22af7c\nStatus: Downloaded newer image for node:14.15.4-alpine\n ---> 471e8b4eb0b2\nStep 2/27 : FROM node AS builder\n ---> 471e8b4eb0b2\nStep 3/27 : LABEL author=\"Siyavash Habashi (ghashange) / Ronald Dehuysser (Bringme)\"\n ---> Running in aacc472f5f2e\nRemoving intermediate container aacc472f5f2e\n ---> c4127d8e8969\nStep 4/27 : ENV DOCKER_BUILD=\"true\"\n ---> Running in e97f2c864c97\nRemoving intermediate container e97f2c864c97\n ---> 641de6ed7654\nStep 5/27 : WORKDIR /app\n ---> Running in c7f739200bf1\nRemoving intermediate container c7f739200bf1\n ---> 42604e3a4705\nStep 6/27 : COPY package*.json ./\n ---> 370c6351d868\nStep 7/27 : RUN npm ci\n ---> Running in 225baab75594\n\n> @parcel/watcher@2.0.5 install /app/node_modules/@parcel/watcher\n> node-gyp-build\n\n\n> msgpackr-extract@2.0.2 install /app/node_modules/msgpackr-extract\n> node-gyp-build-optional-packages\n\n\n> lmdb@2.3.10 install /app/node_modules/lmdb\n> node-gyp-build-optional-packages\n\nadded 832 packages in 9.678s\nRemoving intermediate container 225baab75594\n ---> 1b0667bbef20\nStep 8/27 : COPY . .\n ---> c3ff4a990185\nStep 9/27 : RUN npm run build\n ---> Running in fb443889f344\n\n> sendgrid-mock@1.8.0-SNAPSHOT build /app\n> parcel build ./src/ui/index.html\n\n\u001b[91m\u001b7\u001b[r\u001b[999;999H\u001b[6n\u001b8\u001b[0mBuilding...\n\n\u001b[91mconsole: Browserslist: caniuse-lite is outdated. Please run:\n  npx browserslist@latest --update-db\n  Why you should do it regularly: \nhttps://github.com/browserslist/browserslist#browsers-data-updating\n\u001b[0m\nBundling...\nPackaging & Optimizing...\nâœ¨ Built in 4.33s\n\ndist/index.html                775 B    699ms\ndist/index.58bee4db.js     161.97 KB    1.99s\ndist/index.975a6ec0.css      6.16 KB     27ms\ndist/index.a7bf9e48.js     161.58 KB    1.96s\nRemoving intermediate container fb443889f344\n ---> 03aa4959dc08\nStep 10/27 : FROM node\n ---> 471e8b4eb0b2\nStep 11/27 : RUN apk --no-cache -U upgrade\n ---> Running in c209fb460449\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.11/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.11/community/x86_64/APKINDEX.tar.gz\nUpgrading critical system libraries and apk-tools:\n(1/1) Upgrading apk-tools (2.10.5-r0 -> 2.10.8-r0)\nExecuting busybox-1.31.1-r9.trigger\nContinuing the upgrade transaction with new apk-tools:\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.11/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.11/community/x86_64/APKINDEX.tar.gz\n(1/5) Upgrading busybox (1.31.1-r9 -> 1.31.1-r11)\nExecuting busybox-1.31.1-r11.post-upgrade\n(2/5) Upgrading libcrypto1.1 (1.1.1i-r0 -> 1.1.1l-r0)\n(3/5) Upgrading libssl1.1 (1.1.1i-r0 -> 1.1.1l-r0)\n(4/5) Upgrading ssl_client (1.31.1-r9 -> 1.31.1-r11)\n(5/5) Upgrading zlib (1.2.11-r3 -> 1.2.11-r5)\nExecuting busybox-1.31.1-r11.trigger\nOK: 7 MiB in 16 packages\nRemoving intermediate container c209fb460449\n ---> a584e9eb3768\nStep 12/27 : RUN apk add --no-cache certbot tini\n ---> Running in bcee05e03671\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.11/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.11/community/x86_64/APKINDEX.tar.gz\n(1/44) Installing libbz2 (1.0.8-r1)\n(2/44) Installing expat (2.2.9-r1)\n(3/44) Installing libffi (3.2.1-r6)\n(4/44) Installing gdbm (1.13-r1)\n(5/44) Installing xz-libs (5.2.4-r0)\n(6/44) Installing ncurses-terminfo-base (6.1_p20200118-r4)\n(7/44) Installing ncurses-libs (6.1_p20200118-r4)\n(8/44) Installing readline (8.0.1-r0)\n(9/44) Installing sqlite-libs (3.30.1-r2)\n(10/44) Installing python3 (3.8.10-r0)\n(11/44) Installing py3-setuptools (42.0.2-r0)\n(12/44) Installing py3-cparser (2.19-r4)\n(13/44) Installing py3-cffi (1.13.2-r0)\n(14/44) Installing py3-idna (2.8-r3)\n(15/44) Installing py3-asn1crypto (1.2.0-r1)\n(16/44) Installing py3-six (1.13.0-r0)\n(17/44) Installing py3-cryptography (2.8-r1)\n(18/44) Installing py3-openssl (19.1.0-r0)\n(19/44) Installing py3-josepy (1.2.0-r3)\n(20/44) Installing py3-pbr (5.4.4-r0)\n(21/44) Installing py3-mock (2.0.0-r6)\n(22/44) Installing py3-tz (2019.3-r2)\n(23/44) Installing py3-pyrfc3339 (1.1-r3)\n(24/44) Installing py3-chardet (3.0.4-r3)\n(25/44) Installing py3-certifi (2019.9.11-r2)\n(26/44) Installing py3-urllib3 (1.25.7-r1)\n(27/44) Installing py3-requests (2.22.0-r0)\n(28/44) Installing py3-requests-toolbelt (0.9.1-r1)\n(29/44) Installing py3-acme (1.0.0-r0)\n(30/44) Installing py3-configargparse (0.15.2-r0)\n(31/44) Installing py3-configobj (5.0.6-r7)\n(32/44) Installing py3-distro (1.4.0-r3)\n(33/44) Installing py3-distutils-extra (2.42-r1)\n(34/44) Installing py3-future (0.18.2-r0)\n(35/44) Installing py3-parsedatetime (2.5-r0)\n(36/44) Installing py3-zope-interface (4.7.1-r0)\n(37/44) Installing py3-zope-proxy (4.3.3-r0)\n(38/44) Installing py3-zope-deferredimport (4.3.1-r2)\n(39/44) Installing py3-zope-deprecation (4.4.0-r3)\n(40/44) Installing py3-zope-event (4.4-r4)\n(41/44) Installing py3-zope-hookable (5.0.0-r0)\n(42/44) Installing py3-zope-component (4.6-r0)\n(43/44) Installing certbot (1.0.0-r0)\n(44/44) Installing tini (0.18.0-r0)\nExecuting busybox-1.31.1-r11.trigger\nOK: 98 MiB in 60 packages\nRemoving intermediate container bcee05e03671\n ---> 9ef4bae7c99c\nStep 13/27 : ENTRYPOINT [\"/sbin/tini\", \"--\"]\n ---> Running in 0893609ef32b\nRemoving intermediate container 0893609ef32b\n ---> 1a5cb55c3fa8\nStep 14/27 : COPY letsencrypt_webroot.sh /\n ---> 006fdfd75413\nStep 15/27 : RUN chmod +x /letsencrypt_webroot.sh\n ---> Running in 5aae79d805f1\nRemoving intermediate container 5aae79d805f1\n ---> 166581dbbe1c\nStep 16/27 : WORKDIR /usr/src/server\n ---> Running in fca873a91d84\nRemoving intermediate container fca873a91d84\n ---> c85767df955a\nStep 17/27 : COPY package*.json ./\n ---> ce3219abd1c9\nStep 18/27 : RUN npm i --only=production\n ---> Running in c8ceedf948a6\n\u001b[91mnpm\u001b[0m\u001b[91m WARN \u001b[0m\u001b[91mread-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!\n\u001b[0madded 74 packages from 47 contributors and audited 832 packages in 6.047s\nfound 15 high severity vulnerabilities\n  run `npm audit fix` to fix them, or `npm audit` for details\nRemoving intermediate container c8ceedf948a6\n ---> 7b9f697bc690\nStep 19/27 : COPY --from=builder /app/dist ./dist\n ---> 2c471e80a4bd\nStep 20/27 : COPY src/server ./src/server\n ---> 4588784f6376\nStep 21/27 : EXPOSE 80\n ---> Running in eaa3fbe30f43\nRemoving intermediate container eaa3fbe30f43\n ---> f9469f358d9d\nStep 22/27 : EXPOSE 443\n ---> Running in 75ce273ab4b1\nRemoving intermediate container 75ce273ab4b1\n ---> acf1491f3ff8\nStep 23/27 : EXPOSE 3000\n ---> Running in 041aeba2d21c\nRemoving intermediate container 041aeba2d21c\n ---> e9000732dd8b\nStep 24/27 : ENV DOCKER_BUILD=\"false\"\n ---> Running in 17d351555ee7\nRemoving intermediate container 17d351555ee7\n ---> 26a8aaa790c7\nStep 25/27 : ENV NODE_ENV=production\n ---> Running in 8683b8779ff7\nRemoving intermediate container 8683b8779ff7\n ---> b601eb0b016c\nStep 26/27 : ENV API_KEY=sendgrid-api-key\n ---> Running in 082c9d28961d\nRemoving intermediate container 082c9d28961d\n ---> 5af5c0a59281\nStep 27/27 : CMD [\"node\", \"./src/server/Server.js\"]\n ---> Running in d0fbe0bff02e\nRemoving intermediate container d0fbe0bff02e\n ---> a831ebbeb0eb\nSuccessfully built a831ebbeb0eb\nSuccessfully tagged sendgrid-mock:latest\n","stderr":"","imageSize":207606727},"repair":{"startTime":1672913760701,"endTime":1672913760808,"violations":[{"name":"npmCacheCleanAfterInstall","position":{"start":36,"end":36,"columnStart":4,"columnEnd":27}}],"repairedDockerfile":"FROM node:14.15.4-alpine as node\n\n# Build stage\nFROM node AS builder\nLABEL author=\"Siyavash Habashi (ghashange) / Ronald Dehuysser (Bringme)\"\n\nENV DOCKER_BUILD=\"true\"\n\n# the directory for your app within the docker image\n# NOTE: if you need to change this, change the $CERT_WEBROOT_PATH env\nWORKDIR /app\n\n######################################################################################\n# Add your own Dockerfile entries here\n######################################################################################\nCOPY package*.json ./\nRUN npm ci\nCOPY . .\nRUN npm run build\n\n\nFROM node\n# Update the system\nRUN apk --no-cache -U upgrade\n# adds the packages certbot and tini\nRUN apk add --no-cache certbot tini\nENTRYPOINT [\"/sbin/tini\", \"--\"]\n\n# copy and chmod the shell script which will initiate the webroot\nCOPY letsencrypt_webroot.sh /\nRUN chmod +x /letsencrypt_webroot.sh\n\nWORKDIR /usr/src/server\n# Copy package.json and package-lock.json\nCOPY package*.json ./\n# Install only production dependencies\nRUN npm i --only=production && npm cache clean --force;\n# Copy transpiled js from builder stage into the final image\nCOPY --from=builder /app/dist ./dist\n# Copy src/server into final image\nCOPY src/server ./src/server\n\n# port 80 is mandatory for webroot challenge\n# port 443 is mandatory for https\n# port 3000 default port for UI and server in development mode\nEXPOSE 80\nEXPOSE 443\nEXPOSE 3000\n\n# Set all environment variables\nENV DOCKER_BUILD=\"false\"\nENV NODE_ENV=production\nENV API_KEY=sendgrid-api-key\n\n# the command which starts your express server.\nCMD [\"node\", \"./src/server/Server.js\"]"},"repairedBuild":{"startTime":1672913761596,"endTime":1672914012575,"error":null,"stdout":"Sending build context to Docker daemon   1.24MB\r\r\nStep 1/27 : FROM node:14.15.4-alpine as node\n ---> 471e8b4eb0b2\nStep 2/27 : FROM node AS builder\n ---> 471e8b4eb0b2\nStep 3/27 : LABEL author=\"Siyavash Habashi (ghashange) / Ronald Dehuysser (Bringme)\"\n ---> Running in 5509b8558bfd\nRemoving intermediate container 5509b8558bfd\n ---> d8b7cbd45c47\nStep 4/27 : ENV DOCKER_BUILD=\"true\"\n ---> Running in 0f808026e069\nRemoving intermediate container 0f808026e069\n ---> 555a1ff36d8b\nStep 5/27 : WORKDIR /app\n ---> Running in ed8f5c225374\nRemoving intermediate container ed8f5c225374\n ---> aaf55aba3778\nStep 6/27 : COPY package*.json ./\n ---> 7b07031c4d20\nStep 7/27 : RUN npm ci\n ---> Running in 7ba531a9f1e2\n\n> @parcel/watcher@2.0.5 install /app/node_modules/@parcel/watcher\n> node-gyp-build\n\n\n> msgpackr-extract@2.0.2 install /app/node_modules/msgpackr-extract\n> node-gyp-build-optional-packages\n\n\n> lmdb@2.3.10 install /app/node_modules/lmdb\n> node-gyp-build-optional-packages\n\nadded 832 packages in 8.484s\nRemoving intermediate container 7ba531a9f1e2\n ---> 86e002656530\nStep 8/27 : COPY . .\n ---> b2b5899eaa5e\nStep 9/27 : RUN npm run build\n ---> Running in 7f8a0b1a7680\n\n> sendgrid-mock@1.8.0-SNAPSHOT build /app\n> parcel build ./src/ui/index.html\n\n\u001b[91m\u001b7\u001b[r\u001b[999;999H\u001b[6n\u001b8\u001b[0mBuilding...\n\n\u001b[91mconsole: Browserslist: caniuse-lite is outdated. Please run:\n  npx browserslist@latest --update-db\n  Why you should do it regularly: \nhttps://github.com/browserslist/browserslist#browsers-data-updating\n\u001b[0m\nBundling...\nPackaging & Optimizing...\nâœ¨ Built in 4.24s\n\ndist/index.html                775 B    421ms\ndist/index.58bee4db.js     161.97 KB    1.93s\ndist/index.975a6ec0.css      6.16 KB     46ms\ndist/index.a7bf9e48.js     161.58 KB    1.85s\nRemoving intermediate container 7f8a0b1a7680\n ---> c4a920462572\nStep 10/27 : FROM node\n ---> 471e8b4eb0b2\nStep 11/27 : RUN apk --no-cache -U upgrade\n ---> Running in b41fb610ccbb\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.11/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.11/community/x86_64/APKINDEX.tar.gz\nUpgrading critical system libraries and apk-tools:\n(1/1) Upgrading apk-tools (2.10.5-r0 -> 2.10.8-r0)\nExecuting busybox-1.31.1-r9.trigger\nContinuing the upgrade transaction with new apk-tools:\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.11/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.11/community/x86_64/APKINDEX.tar.gz\n(1/5) Upgrading busybox (1.31.1-r9 -> 1.31.1-r11)\nExecuting busybox-1.31.1-r11.post-upgrade\n(2/5) Upgrading libcrypto1.1 (1.1.1i-r0 -> 1.1.1l-r0)\n(3/5) Upgrading libssl1.1 (1.1.1i-r0 -> 1.1.1l-r0)\n(4/5) Upgrading ssl_client (1.31.1-r9 -> 1.31.1-r11)\n(5/5) Upgrading zlib (1.2.11-r3 -> 1.2.11-r5)\nExecuting busybox-1.31.1-r11.trigger\nOK: 7 MiB in 16 packages\nRemoving intermediate container b41fb610ccbb\n ---> df5bf9586367\nStep 12/27 : RUN apk add --no-cache certbot tini\n ---> Running in 6d6ea530e069\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.11/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.11/community/x86_64/APKINDEX.tar.gz\n(1/44) Installing libbz2 (1.0.8-r1)\n(2/44) Installing expat (2.2.9-r1)\n(3/44) Installing libffi (3.2.1-r6)\n(4/44) Installing gdbm (1.13-r1)\n(5/44) Installing xz-libs (5.2.4-r0)\n(6/44) Installing ncurses-terminfo-base (6.1_p20200118-r4)\n(7/44) Installing ncurses-libs (6.1_p20200118-r4)\n(8/44) Installing readline (8.0.1-r0)\n(9/44) Installing sqlite-libs (3.30.1-r2)\n(10/44) Installing python3 (3.8.10-r0)\n(11/44) Installing py3-setuptools (42.0.2-r0)\n(12/44) Installing py3-cparser (2.19-r4)\n(13/44) Installing py3-cffi (1.13.2-r0)\n(14/44) Installing py3-idna (2.8-r3)\n(15/44) Installing py3-asn1crypto (1.2.0-r1)\n(16/44) Installing py3-six (1.13.0-r0)\n(17/44) Installing py3-cryptography (2.8-r1)\n(18/44) Installing py3-openssl (19.1.0-r0)\n(19/44) Installing py3-josepy (1.2.0-r3)\n(20/44) Installing py3-pbr (5.4.4-r0)\n(21/44) Installing py3-mock (2.0.0-r6)\n(22/44) Installing py3-tz (2019.3-r2)\n(23/44) Installing py3-pyrfc3339 (1.1-r3)\n(24/44) Installing py3-chardet (3.0.4-r3)\n(25/44) Installing py3-certifi (2019.9.11-r2)\n(26/44) Installing py3-urllib3 (1.25.7-r1)\n(27/44) Installing py3-requests (2.22.0-r0)\n(28/44) Installing py3-requests-toolbelt (0.9.1-r1)\n(29/44) Installing py3-acme (1.0.0-r0)\n(30/44) Installing py3-configargparse (0.15.2-r0)\n(31/44) Installing py3-configobj (5.0.6-r7)\n(32/44) Installing py3-distro (1.4.0-r3)\n(33/44) Installing py3-distutils-extra (2.42-r1)\n(34/44) Installing py3-future (0.18.2-r0)\n(35/44) Installing py3-parsedatetime (2.5-r0)\n(36/44) Installing py3-zope-interface (4.7.1-r0)\n(37/44) Installing py3-zope-proxy (4.3.3-r0)\n(38/44) Installing py3-zope-deferredimport (4.3.1-r2)\n(39/44) Installing py3-zope-deprecation (4.4.0-r3)\n(40/44) Installing py3-zope-event (4.4-r4)\n(41/44) Installing py3-zope-hookable (5.0.0-r0)\n(42/44) Installing py3-zope-component (4.6-r0)\n(43/44) Installing certbot (1.0.0-r0)\n(44/44) Installing tini (0.18.0-r0)\nExecuting busybox-1.31.1-r11.trigger\nOK: 98 MiB in 60 packages\nRemoving intermediate container 6d6ea530e069\n ---> bdf2d4d72388\nStep 13/27 : ENTRYPOINT [\"/sbin/tini\", \"--\"]\n ---> Running in 6089209cc50a\nRemoving intermediate container 6089209cc50a\n ---> baaf38e34059\nStep 14/27 : COPY letsencrypt_webroot.sh /\n ---> e9c79602d308\nStep 15/27 : RUN chmod +x /letsencrypt_webroot.sh\n ---> Running in 3205c4ddb3e7\nRemoving intermediate container 3205c4ddb3e7\n ---> 03f2148b98ec\nStep 16/27 : WORKDIR /usr/src/server\n ---> Running in 97a0d89a5196\nRemoving intermediate container 97a0d89a5196\n ---> ed03751d5606\nStep 17/27 : COPY package*.json ./\n ---> 25d5b0157ff5\nStep 18/27 : RUN npm i --only=production && npm cache clean --force;\n ---> Running in b6bbe90eb364\n\u001b[91mnpm\u001b[0m\u001b[91m WARN \u001b[0m\u001b[91mread-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!\n\u001b[0madded 74 packages from 47 contributors and audited 832 packages in 3.373s\nfound 15 high severity vulnerabilities\n  run `npm audit fix` to fix them, or `npm audit` for details\n\u001b[91mnpm\u001b[0m\u001b[91m WARN using --force I sure hope you know what you are doing.\n\u001b[0mRemoving intermediate container b6bbe90eb364\n ---> 1ff84d49f832\nStep 19/27 : COPY --from=builder /app/dist ./dist\n ---> 2c74c91bf3bc\nStep 20/27 : COPY src/server ./src/server\n ---> 37493bf57e7b\nStep 21/27 : EXPOSE 80\n ---> Running in 9c91b78b93d1\nRemoving intermediate container 9c91b78b93d1\n ---> b6c2a2986553\nStep 22/27 : EXPOSE 443\n ---> Running in 462485a08133\nRemoving intermediate container 462485a08133\n ---> 40eab222088d\nStep 23/27 : EXPOSE 3000\n ---> Running in b6c98318628a\nRemoving intermediate container b6c98318628a\n ---> beb5af9b882c\nStep 24/27 : ENV DOCKER_BUILD=\"false\"\n ---> Running in 76c79233f43a\nRemoving intermediate container 76c79233f43a\n ---> 59f5c2bbe9f2\nStep 25/27 : ENV NODE_ENV=production\n ---> Running in 7a59b78a7d3e\nRemoving intermediate container 7a59b78a7d3e\n ---> b584ef1ef822\nStep 26/27 : ENV API_KEY=sendgrid-api-key\n ---> Running in 0b1270d8aab4\nRemoving intermediate container 0b1270d8aab4\n ---> dd507e89377a\nStep 27/27 : CMD [\"node\", \"./src/server/Server.js\"]\n ---> Running in 8cb9b6c5ae40\nRemoving intermediate container 8cb9b6c5ae40\n ---> 10c623b9acab\nSuccessfully built 10c623b9acab\nSuccessfully tagged sendgrid-mock:latest\n","stderr":"","imageSize":205031938}}