{"repository":"https://github.com/jkheadley/appy-backend","dockerfilePath":"Dockerfile","startTime":1672250115414,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/jkheadley/appy-backend'...\n","error":null,"commit":"36fd63078e2fa0a67277fab023eefa93e43dcf4c"},"originalBuild":{"startTimestamp":1672250116278,"endTimestamp":1672251087267,"error":null,"stdout":"Sending build context to Docker daemon  1.184MB\r\r\nStep 1/8 : FROM node:erbium\nerbium: Pulling from library/node\nDigest: sha256:01627afeb110b3054ba4a1405541ca095c8bfca1cb6f2be9479c767a2711879e\nStatus: Downloaded newer image for node:erbium\n ---> 6c8de432fc7f\nStep 2/8 : RUN mkdir /backend\n ---> Running in 5b869cdd03b2\nRemoving intermediate container 5b869cdd03b2\n ---> b74b5c31397d\nStep 3/8 : WORKDIR /backend\n ---> Running in 0c3d419e8534\nRemoving intermediate container 0c3d419e8534\n ---> 2ac468d2b83d\nStep 4/8 : COPY ./package.json /backend\n ---> 23a81088e5e0\nStep 5/8 : RUN npm install\n ---> Running in 8966262e3247\n\u001b[91mnpm WARN deprecated\u001b[0m\u001b[91m babel-eslint@8.2.6: babel-eslint is now @babel/eslint-parser. This package will no longer receive updates.\n\u001b[0m\u001b[91mnpm WARN deprecated node-uuid@1.4.8: Use uuid module instead\n\u001b[0m\u001b[91mnpm WARN deprecated nodemailer@2.7.2: All versions below 4.0.1 of Nodemailer are deprecated. See https://nodemailer.com/status/\n\u001b[0m\u001b[91mnpm WARN deprecated\u001b[0m\u001b[91m request-promise@4.2.6: request-promise has been deprecated because it extends the now deprecated request package, see https://github.com/request/request/issues/3142\n\u001b[0m\u001b[91mnpm WARN deprecated iplocation@5.0.1: Version 6.x or earlier is no longer supported.\n\u001b[0m\u001b[91mnpm WARN deprecated chokidar@2.1.8: Chokidar 2 does not receive security updates since 2019. Upgrade to chokidar 3 with 15x fewer dependencies\n\u001b[0m\u001b[91mnpm WARN deprecated joi@6.10.1: This version has been deprecated in accordance with the hapi support policy (hapi.im/support). Please upgrade to the latest version to get the best features, bug fixes, and security patches. If you are unable to upgrade at this time, paid support is available for older versions (hapi.im/commercial).\n\u001b[0m\u001b[91mnpm WARN deprecated querystring@0.2.0: The querystring API is considered Legacy. new code should use the URLSearchParams API instead.\n\u001b[0m\u001b[91mnpm WARN deprecated\u001b[0m\u001b[91m socks@1.1.9: If using 2.x branch, please upgrade to at least 2.1.6 to avoid a serious bug with socket data flow and an import issue introduced in 2.1.0\n\u001b[0m\u001b[91mnpm WARN deprecated boom@3.2.2: This version has been deprecated in accordance with the hapi support policy (hapi.im/support). Please upgrade to the latest version to get the best features, bug fixes, and security patches. If you are unable to upgrade at this time, paid support is available for older versions (hapi.im/commercial).\n\u001b[0m\u001b[91mnpm WARN deprecated hoek@4.2.1: This version has been deprecated in accordance with the hapi support policy (hapi.im/support). Please upgrade to the latest version to get the best features, bug fixes, and security patches. If you are unable to upgrade at this time, paid support is available for older versions (hapi.im/commercial).\n\u001b[0m\u001b[91mnpm WARN deprecated mailcomposer@4.0.1: This project is unmaintained\n\u001b[0m\u001b[91mnpm WARN deprecated\u001b[0m\u001b[91m request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142\n\u001b[0m\u001b[91mnpm WARN deprecated @hapi/joi@17.1.1: Switch to 'npm install joi'\n\u001b[0m\u001b[91mnpm WARN deprecated @hapi/hapi@19.2.0: This version contains severe security issues and defects and should not be used! Please upgrade to the latest version of @hapi/hapi or consider a commercial license (https://github.com/hapijs/hapi/issues/4114)\n\u001b[0m\u001b[91mnpm WARN deprecated fsevents@1.2.13: fsevents 1 will break on node v14+ and could be using insecure binaries. Upgrade to fsevents 2.\n\u001b[0m\u001b[91mnpm WARN deprecated hoek@2.16.3: This version has been deprecated in accordance with the hapi support policy (hapi.im/support). Please upgrade to the latest version to get the best features, bug fixes, and security patches. If you are unable to upgrade at this time, paid support is available for older versions (hapi.im/commercial).\n\u001b[0m\u001b[91mnpm WARN deprecated topo@1.1.0: This version has been deprecated in accordance with the hapi support policy (hapi.im/support). Please upgrade to the latest version to get the best features, bug fixes, and security patches. If you are unable to upgrade at this time, paid support is available for older versions (hapi.im/commercial).\n\u001b[0m\u001b[91mnpm WARN deprecated buildmail@4.0.1: This project is unmaintained\n\u001b[0m\u001b[91mnpm WARN deprecated har-validator@5.1.5: this library is no longer supported\n\u001b[0m\u001b[91mnpm WARN deprecated uuid@3.4.0: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.\n\u001b[0m\u001b[91mnpm WARN deprecated @hapi/address@4.1.0: Moved to 'npm install @sideway/address'\n\u001b[0m\u001b[91mnpm WARN deprecated json-schema-ref-parser@6.1.0: Please switch to @apidevtools/json-schema-ref-parser\n\u001b[0m\u001b[91mnpm WARN deprecated @hapi/boom@8.0.1: This version has been deprecated and is no longer supported or maintained\n\u001b[0m\u001b[91mnpm WARN deprecated\u001b[0m\u001b[91m @hapi/formula@2.0.0: Moved to 'npm install @sideway/formula'\n\u001b[0m\u001b[91mnpm WARN deprecated @hapi/pinpoint@2.0.0: Moved to 'npm install @sideway/pinpoint'\n\u001b[0m\u001b[91mnpm WARN deprecated @hapi/teamwork@4.0.0: This version has been deprecated and is no longer supported or maintained\n\u001b[0m\u001b[91mnpm WARN deprecated sane@2.5.2: some dependency vulnerabilities fixed, support for node < 10 dropped, and newer ECMAScript syntax/features added\n\u001b[0m\u001b[91mnpm WARN deprecated kleur@2.0.2: Please upgrade to kleur@3 or migrate to 'ansi-colors' if you prefer the old syntax. Visit <https://github.com/lukeed/kleur/releases/tag/v3.0.0\\> for migration path(s).\n\u001b[0m\u001b[91mnpm WARN deprecated source-map-resolve@0.5.3: See https://github.com/lydell/source-map-resolve#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated json-schema-ref-parser@4.1.1: Please switch to @apidevtools/json-schema-ref-parser\n\u001b[0m\u001b[91mnpm WARN deprecated @types/bson@4.2.0: This is a stub types definition. bson provides its own type definitions, so you do not need this installed.\n\u001b[0m\u001b[91mnpm WARN deprecated @hapi/hoek@8.5.1: This version has been deprecated and is no longer supported or maintained\n\u001b[0m\u001b[91mnpm WARN deprecated circular-json@0.3.3: CircularJSON is in maintenance only, flatted is its successor.\n\u001b[0m\u001b[91mnpm WARN deprecated\u001b[0m\u001b[91m swagger-methods@1.0.8: This package is no longer being maintained.\n\u001b[0m\u001b[91mnpm WARN deprecated request-promise-native@1.0.9: request-promise-native has been deprecated because it extends the now deprecated request package, see https://github.com/request/request/issues/3142\n\u001b[0m\u001b[91mnpm WARN deprecated w3c-hr-time@1.0.2: Use your platform's native performance.now() and performance.timeOrigin.\n\u001b[0m\u001b[91mnpm WARN deprecated left-pad@1.3.0: use String.prototype.padStart()\n\u001b[0m\u001b[91mnpm WARN deprecated resolve-url@0.2.1: https://github.com/lydell/resolve-url#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated source-map-url@0.4.1: See https://github.com/lydell/source-map-url#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated urix@0.1.0: Please see https://github.com/lydell/urix#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated core-js@2.6.12: core-js@<3.23.3 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Some versions have web compatibility issues. Please, upgrade your dependencies to the actual version of core-js.\n\u001b[0m\n> husky@0.14.3 install /backend/node_modules/husky\n> node ./bin/install.js\n\nhusky\nsetting up Git hooks\ncan't find .git directory, skipping Git hooks installation\n\n> core-js@2.6.12 postinstall /backend/node_modules/core-js\n> node -e \"try{require('./postinstall')}catch(e){}\"\n\n\u001b[96mThank you for using core-js (\u001b[94m https://github.com/zloirock/core-js \u001b[96m) for polyfilling JavaScript standard library!\u001b[0m\n\n\u001b[96mThe project needs your help! Please consider supporting of core-js on Open Collective or Patreon: \u001b[0m\n\u001b[96m>\u001b[94m https://opencollective.com/core-js \u001b[0m\n\u001b[96m>\u001b[94m https://www.patreon.com/zloirock \u001b[0m\n\n\u001b[96mAlso, the author of core-js (\u001b[94m https://github.com/zloirock \u001b[96m) is looking for a good job -)\u001b[0m\n\n\n> nodemon@1.19.4 postinstall /backend/node_modules/nodemon\n> node bin/postinstall || exit 0\n\n\u001b[32mLove nodemon? You can now support the project via the open collective:\u001b[22m\u001b[39m\n > \u001b[96m\u001b[1mhttps://opencollective.com/nodemon/donate\u001b[0m\n\n\u001b[91mnpm notice created a lockfile as package-lock.json. You should commit this file.\n\u001b[0m\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@^1.2.3 (node_modules/sane/node_modules/fsevents):\n\u001b[0m\u001b[91mnpm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.2.13: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91mnpm WARN ajv-keywords@2.1.1 requires a peer of ajv@^5.0.0 but none is installed. You must install peer dependencies yourself.\n\u001b[0m\u001b[91m\n\u001b[0madded 1379 packages from 682 contributors and audited 1381 packages in 834.388s\n\n88 packages are looking for funding\n  run `npm fund` for details\n\nfound 71 vulnerabilities (17 low, 28 moderate, 22 high, 4 critical)\n  run `npm audit fix` to fix them, or `npm audit` for details\nRemoving intermediate container 8966262e3247\n ---> b9dccd7711f4\nStep 6/8 : ARG SERVER_PORT=8080\n ---> Running in 51fb1b85a93c\nRemoving intermediate container 51fb1b85a93c\n ---> e31d40b1c2fd\nStep 7/8 : EXPOSE ${SERVER_PORT}\n ---> Running in acfd8dc4b2a8\nRemoving intermediate container acfd8dc4b2a8\n ---> abe3a1ba93a9\nStep 8/8 : CMD [\"npm\", \"run\", \"start\"]\n ---> Running in 50c6b5c9d049\nRemoving intermediate container 50c6b5c9d049\n ---> 251bfca89187\nSuccessfully built 251bfca89187\nSuccessfully tagged appy-backend:latest\n","stderr":"","imageSize":1270246223},"repair":{"violations":[{"name":"npmCacheCleanAfterInstall","position":{"start":11,"end":11,"columnStart":4,"columnEnd":15}}],"repairedDockerfile":"FROM node:erbium\n\n# Create and set the working directory\nRUN mkdir /backend\nWORKDIR /backend\n\n# Only copy package.json. All other files wil be shared with the host through a volume.\n# NOTE: For a production image, we should COPY all files so that the image is self-sufficient (and only use volumes\n#   for data storage/persistent data).\nCOPY ./package.json /backend\n# Install node dependencies\nRUN npm install\n\nARG SERVER_PORT=8080\n# Make the server port available to the world outside this container\nEXPOSE ${SERVER_PORT}\n\n# Run the start script when the container launches\nCMD [\"npm\", \"run\", \"start\"]\n"},"repairedBuild":{"startTimestamp":1672251090074,"endTimestamp":1672251968038,"error":null,"stdout":"Sending build context to Docker daemon  1.184MB\r\r\nStep 1/8 : FROM node:erbium\n ---> 6c8de432fc7f\nStep 2/8 : RUN mkdir /backend\n ---> Running in d4d9c4193d8d\nRemoving intermediate container d4d9c4193d8d\n ---> 3904f6ad6ccb\nStep 3/8 : WORKDIR /backend\n ---> Running in b2f472ce273d\nRemoving intermediate container b2f472ce273d\n ---> 3decdb0abcfb\nStep 4/8 : COPY ./package.json /backend\n ---> 16113f58d7b3\nStep 5/8 : RUN npm install\n ---> Running in f2744d97a042\n\u001b[91mnpm WARN deprecated babel-eslint@8.2.6: babel-eslint is now @babel/eslint-parser. This package will no longer receive updates.\n\u001b[0m\u001b[91mnpm WARN deprecated node-uuid@1.4.8: Use uuid module instead\n\u001b[0m\u001b[91mnpm WARN deprecated nodemailer@2.7.2: All versions below 4.0.1 of Nodemailer are deprecated. See https://nodemailer.com/status/\n\u001b[0m\u001b[91mnpm WARN deprecated request-promise@4.2.6: request-promise has been deprecated because it extends the now deprecated request package, see https://github.com/request/request/issues/3142\n\u001b[0m\u001b[91mnpm WARN deprecated iplocation@5.0.1: Version 6.x or earlier is no longer supported.\n\u001b[0m\u001b[91mnpm WARN deprecated\u001b[0m\u001b[91m chokidar@2.1.8: Chokidar 2 does not receive security updates since 2019. Upgrade to chokidar 3 with 15x fewer dependencies\n\u001b[0m\u001b[91mnpm WARN deprecated joi@6.10.1: This version has been deprecated in accordance with the hapi support policy (hapi.im/support). Please upgrade to the latest version to get the best features, bug fixes, and security patches. If you are unable to upgrade at this time, paid support is available for older versions (hapi.im/commercial).\n\u001b[0m\u001b[91mnpm WARN deprecated querystring@0.2.0: The querystring API is considered Legacy. new code should use the URLSearchParams API instead.\n\u001b[0m\u001b[91mnpm WARN deprecated boom@3.2.2: This version has been deprecated in accordance with the hapi support policy (hapi.im/support). Please upgrade to the latest version to get the best features, bug fixes, and security patches. If you are unable to upgrade at this time, paid support is available for older versions (hapi.im/commercial).\n\u001b[0m\u001b[91mnpm WARN deprecated hoek@4.2.1: This version has been deprecated in accordance with the hapi support policy (hapi.im/support). Please upgrade to the latest version to get the best features, bug fixes, and security patches. If you are unable to upgrade at this time, paid support is available for older versions (hapi.im/commercial).\n\u001b[0m\u001b[91mnpm WARN deprecated socks@1.1.9: If using 2.x branch, please upgrade to at least 2.1.6 to avoid a serious bug with socket data flow and an import issue introduced in 2.1.0\n\u001b[0m\u001b[91mnpm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142\n\u001b[0m\u001b[91mnpm WARN deprecated mailcomposer@4.0.1: This project is unmaintained\n\u001b[0m\u001b[91mnpm WARN deprecated @hapi/joi@17.1.1: Switch to 'npm install joi'\n\u001b[0m\u001b[91mnpm WARN deprecated @hapi/hapi@19.2.0: This version contains severe security issues and defects and should not be used! Please upgrade to the latest version of @hapi/hapi or consider a commercial license (https://github.com/hapijs/hapi/issues/4114)\n\u001b[0m\u001b[91mnpm WARN deprecated fsevents@1.2.13: fsevents 1 will break on node v14+ and could be using insecure binaries. Upgrade to fsevents 2.\n\u001b[0m\u001b[91mnpm WARN deprecated hoek@2.16.3: This version has been deprecated in accordance with the hapi support policy (hapi.im/support). Please upgrade to the latest version to get the best features, bug fixes, and security patches. If you are unable to upgrade at this time, paid support is available for older versions (hapi.im/commercial).\n\u001b[0m\u001b[91mnpm WARN deprecated topo@1.1.0: This version has been deprecated in accordance with the hapi support policy (hapi.im/support). Please upgrade to the latest version to get the best features, bug fixes, and security patches. If you are unable to upgrade at this time, paid support is available for older versions (hapi.im/commercial).\n\u001b[0m\u001b[91mnpm WARN deprecated har-validator@5.1.5: this library is no longer supported\n\u001b[0m\u001b[91mnpm WARN deprecated uuid@3.4.0: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.\n\u001b[0m\u001b[91mnpm WARN deprecated buildmail@4.0.1: This project is unmaintained\n\u001b[0m\u001b[91mnpm WARN deprecated @hapi/address@4.1.0: Moved to 'npm install @sideway/address'\n\u001b[0m\u001b[91mnpm WARN deprecated @hapi/formula@2.0.0: Moved to 'npm install @sideway/formula'\n\u001b[0m\u001b[91mnpm WARN deprecated @hapi/boom@8.0.1: This version has been deprecated and is no longer supported or maintained\n\u001b[0m\u001b[91mnpm WARN deprecated json-schema-ref-parser@6.1.0: Please switch to @apidevtools/json-schema-ref-parser\n\u001b[0m\u001b[91mnpm WARN deprecated @hapi/pinpoint@2.0.0: Moved to 'npm install @sideway/pinpoint'\n\u001b[0m\u001b[91mnpm WARN deprecated @hapi/teamwork@4.0.0: This version has been deprecated and is no longer supported or maintained\n\u001b[0m\u001b[91mnpm WARN deprecated sane@2.5.2: some dependency vulnerabilities fixed, support for node < 10 dropped, and newer ECMAScript syntax/features added\n\u001b[0m\u001b[91mnpm WARN deprecated kleur@2.0.2: Please upgrade to kleur@3 or migrate to 'ansi-colors' if you prefer the old syntax. Visit <https://github.com/lukeed/kleur/releases/tag/v3.0.0\\> for migration path(s).\n\u001b[0m\u001b[91mnpm WARN deprecated source-map-resolve@0.5.3: See https://github.com/lydell/source-map-resolve#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated @hapi/hoek@8.5.1: This version has been deprecated and is no longer supported or maintained\n\u001b[0m\u001b[91mnpm WARN deprecated json-schema-ref-parser@4.1.1: Please switch to @apidevtools/json-schema-ref-parser\n\u001b[0m\u001b[91mnpm WARN deprecated swagger-methods@1.0.8: This package is no longer being maintained.\n\u001b[0m\u001b[91mnpm WARN deprecated @types/bson@4.2.0: This is a stub types definition. bson provides its own type definitions, so you do not need this installed.\n\u001b[0m\u001b[91mnpm WARN deprecated left-pad@1.3.0: use String.prototype.padStart()\n\u001b[0m\u001b[91mnpm WARN deprecated w3c-hr-time@1.0.2: Use your platform's native performance.now() and performance.timeOrigin.\n\u001b[0m\u001b[91mnpm WARN deprecated request-promise-native@1.0.9: request-promise-native has been deprecated because it extends the now deprecated request package, see https://github.com/request/request/issues/3142\n\u001b[0m\u001b[91mnpm WARN deprecated resolve-url@0.2.1: https://github.com/lydell/resolve-url#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated source-map-url@0.4.1: See https://github.com/lydell/source-map-url#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated urix@0.1.0: Please see https://github.com/lydell/urix#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated core-js@2.6.12: core-js@<3.23.3 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Some versions have web compatibility issues. Please, upgrade your dependencies to the actual version of core-js.\n\u001b[0m\u001b[91mnpm WARN deprecated circular-json@0.3.3: CircularJSON is in maintenance only, flatted is its successor.\n\u001b[0m\n> husky@0.14.3 install /backend/node_modules/husky\n> node ./bin/install.js\n\nhusky\nsetting up Git hooks\ncan't find .git directory, skipping Git hooks installation\n\n> core-js@2.6.12 postinstall /backend/node_modules/core-js\n> node -e \"try{require('./postinstall')}catch(e){}\"\n\n\u001b[96mThank you for using core-js (\u001b[94m https://github.com/zloirock/core-js \u001b[96m) for polyfilling JavaScript standard library!\u001b[0m\n\n\u001b[96mThe project needs your help! Please consider supporting of core-js on Open Collective or Patreon: \u001b[0m\n\u001b[96m>\u001b[94m https://opencollective.com/core-js \u001b[0m\n\u001b[96m>\u001b[94m https://www.patreon.com/zloirock \u001b[0m\n\n\u001b[96mAlso, the author of core-js (\u001b[94m https://github.com/zloirock \u001b[96m) is looking for a good job -)\u001b[0m\n\n\n> nodemon@1.19.4 postinstall /backend/node_modules/nodemon\n> node bin/postinstall || exit 0\n\n\u001b[32mLove nodemon? You can now support the project via the open collective:\u001b[22m\u001b[39m\n > \u001b[96m\u001b[1mhttps://opencollective.com/nodemon/donate\u001b[0m\n\n\u001b[91mnpm notice created a lockfile as package-lock.json. You should commit this file.\n\u001b[0m\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@^1.2.3 (node_modules/sane/node_modules/fsevents):\nnpm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.2.13: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91mnpm WARN ajv-keywords@2.1.1 requires a peer of ajv@^5.0.0 but none is installed. You must install peer dependencies yourself.\n\u001b[0m\u001b[91m\n\u001b[0madded 1379 packages from 682 contributors and audited 1381 packages in 829.078s\n\n88 packages are looking for funding\n  run `npm fund` for details\n\nfound 71 vulnerabilities (17 low, 28 moderate, 22 high, 4 critical)\n  run `npm audit fix` to fix them, or `npm audit` for details\nRemoving intermediate container f2744d97a042\n ---> ab98c14987c7\nStep 6/8 : ARG SERVER_PORT=8080\n ---> Running in 6be2b0fa28bc\nRemoving intermediate container 6be2b0fa28bc\n ---> 16e29606e3bf\nStep 7/8 : EXPOSE ${SERVER_PORT}\n ---> Running in 593bafc4d03c\nRemoving intermediate container 593bafc4d03c\n ---> 9bfa1fac3175\nStep 8/8 : CMD [\"npm\", \"run\", \"start\"]\n ---> Running in d0d329ca92b1\nRemoving intermediate container d0d329ca92b1\n ---> 77dc3e1f50af\nSuccessfully built 77dc3e1f50af\nSuccessfully tagged appy-backend:latest\n","stderr":"","imageSize":1270235999},"endTime":1672251969189}