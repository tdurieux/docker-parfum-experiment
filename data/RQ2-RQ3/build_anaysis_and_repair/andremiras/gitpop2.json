{"repository":"https://github.com/andremiras/gitpop2","dockerfilePath":"Dockerfile","startTime":1672329870260,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/andremiras/gitpop2'...\n","error":null,"commit":"1295801ce7e99ddbb80908de5b79f7b65696be8b"},"originalBuild":{"startTimestamp":1672329871251,"endTimestamp":1672329979902,"error":null,"stdout":"Sending build context to Docker daemon  893.4kB\r\r\nStep 1/14 : FROM python:3.9-slim\n3.9-slim: Pulling from library/python\n3f4ca61aafcd: Already exists\n3f487a3359db: Pulling fs layer\nae22731824be: Pulling fs layer\n3583ac268677: Pulling fs layer\nde224c04316a: Pulling fs layer\nde224c04316a: Waiting\n3583ac268677: Download complete\n3f487a3359db: Verifying Checksum\n3f487a3359db: Download complete\nae22731824be: Verifying Checksum\nae22731824be: Download complete\nde224c04316a: Verifying Checksum\nde224c04316a: Download complete\n3f487a3359db: Pull complete\nae22731824be: Pull complete\n3583ac268677: Pull complete\nde224c04316a: Pull complete\nDigest: sha256:9e0b4391fc41bc35c16caef4740736b6b349f6626fd14eba32793ae3c7b01908\nStatus: Downloaded newer image for python:3.9-slim\n ---> e2f464551004\nStep 2/14 : ENV USER=\"user\"\n ---> Running in 4af8aad342d6\nRemoving intermediate container 4af8aad342d6\n ---> b011046e4882\nStep 3/14 : ENV HOME_DIR=\"/home/${USER}\"\n ---> Running in 8c5ac2485f1f\nRemoving intermediate container 8c5ac2485f1f\n ---> fd098dadb476\nStep 4/14 : ENV WORK_DIR=\"${HOME_DIR}\"     PATH=\"${HOME_DIR}/.local/bin:${PATH}\"\n ---> Running in 2cd2b6d56b4d\nRemoving intermediate container 2cd2b6d56b4d\n ---> edab9d69e371\nStep 5/14 : RUN apt update -qq > /dev/null && apt --yes install -qq --no-install-recommends     curl     locales     make     sudo     && locale-gen en_US.UTF-8     && apt --yes autoremove && apt --yes clean\n ---> Running in 9a1cec9d782b\n\u001b[91m\nWARNING: apt does not have a stable CLI interface. Use with caution in scripts.\n\n\u001b[0m\u001b[91m\nWARNING: apt does not have a stable CLI interface. Use with caution in scripts.\n\n\u001b[0mThe following additional packages will be installed:\n  libbrotli1 libc-l10n libcurl4 libldap-2.4-2 libnghttp2-14 libpsl5 librtmp1\n  libsasl2-2 libsasl2-modules-db libssh2-1\nSuggested packages:\n  make-doc\nRecommended packages:\n  libldap-common publicsuffix libsasl2-modules\nThe following NEW packages will be installed:\n  curl libbrotli1 libc-l10n libcurl4 libldap-2.4-2 libnghttp2-14 libpsl5\n  librtmp1 libsasl2-2 libsasl2-modules-db libssh2-1 locales make sudo\n\u001b[91mdebconf: delaying package configuration, since apt-utils is not installed\n\u001b[0m0 upgraded, 14 newly installed, 0 to remove and 0 not upgraded.\nNeed to get 8056 kB of archives.\nAfter this operation, 30.9 MB of additional disk space will be used.\nSelecting previously unselected package libc-l10n.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 7031 files and directories currently installed.)\r\nPreparing to unpack .../00-libc-l10n_2.31-13+deb11u5_all.deb ...\r\nUnpacking libc-l10n (2.31-13+deb11u5) ...\r\nSelecting previously unselected package locales.\r\nPreparing to unpack .../01-locales_2.31-13+deb11u5_all.deb ...\r\nUnpacking locales (2.31-13+deb11u5) ...\r\nSelecting previously unselected package libbrotli1:amd64.\r\nPreparing to unpack .../02-libbrotli1_1.0.9-2+b2_amd64.deb ...\r\nUnpacking libbrotli1:amd64 (1.0.9-2+b2) ...\r\nSelecting previously unselected package libsasl2-modules-db:amd64.\r\nPreparing to unpack .../03-libsasl2-modules-db_2.1.27+dfsg-2.1+deb11u1_amd64.deb ...\r\nUnpacking libsasl2-modules-db:amd64 (2.1.27+dfsg-2.1+deb11u1) ...\r\nSelecting previously unselected package libsasl2-2:amd64.\r\nPreparing to unpack .../04-libsasl2-2_2.1.27+dfsg-2.1+deb11u1_amd64.deb ...\r\nUnpacking libsasl2-2:amd64 (2.1.27+dfsg-2.1+deb11u1) ...\r\nSelecting previously unselected package libldap-2.4-2:amd64.\r\nPreparing to unpack .../05-libldap-2.4-2_2.4.57+dfsg-3+deb11u1_amd64.deb ...\r\nUnpacking libldap-2.4-2:amd64 (2.4.57+dfsg-3+deb11u1) ...\r\nSelecting previously unselected package libnghttp2-14:amd64.\r\nPreparing to unpack .../06-libnghttp2-14_1.43.0-1_amd64.deb ...\r\nUnpacking libnghttp2-14:amd64 (1.43.0-1) ...\r\nSelecting previously unselected package libpsl5:amd64.\r\nPreparing to unpack .../07-libpsl5_0.21.0-1.2_amd64.deb ...\r\nUnpacking libpsl5:amd64 (0.21.0-1.2) ...\r\nSelecting previously unselected package librtmp1:amd64.\r\nPreparing to unpack .../08-librtmp1_2.4+20151223.gitfa8646d.1-2+b2_amd64.deb ...\r\nUnpacking librtmp1:amd64 (2.4+20151223.gitfa8646d.1-2+b2) ...\r\nSelecting previously unselected package libssh2-1:amd64.\r\nPreparing to unpack .../09-libssh2-1_1.9.0-2_amd64.deb ...\r\nUnpacking libssh2-1:amd64 (1.9.0-2) ...\r\nSelecting previously unselected package libcurl4:amd64.\r\nPreparing to unpack .../10-libcurl4_7.74.0-1.3+deb11u3_amd64.deb ...\r\nUnpacking libcurl4:amd64 (7.74.0-1.3+deb11u3) ...\r\nSelecting previously unselected package curl.\r\nPreparing to unpack .../11-curl_7.74.0-1.3+deb11u3_amd64.deb ...\r\nUnpacking curl (7.74.0-1.3+deb11u3) ...\r\nSelecting previously unselected package make.\r\nPreparing to unpack .../12-make_4.3-4.1_amd64.deb ...\r\nUnpacking make (4.3-4.1) ...\r\nSelecting previously unselected package sudo.\r\nPreparing to unpack .../13-sudo_1.9.5p2-3_amd64.deb ...\r\nUnpacking sudo (1.9.5p2-3) ...\r\nSetting up libc-l10n (2.31-13+deb11u5) ...\r\nSetting up libpsl5:amd64 (0.21.0-1.2) ...\r\nSetting up libbrotli1:amd64 (1.0.9-2+b2) ...\r\nSetting up libnghttp2-14:amd64 (1.43.0-1) ...\r\nSetting up locales (2.31-13+deb11u5) ...\r\ndebconf: unable to initialize frontend: Dialog\r\ndebconf: (TERM is not set, so the dialog frontend is not usable.)\r\ndebconf: falling back to frontend: Readline\r\ndebconf: unable to initialize frontend: Readline\r\ndebconf: (Can't locate Term/ReadLine.pm in @INC (you may need to install the Term::ReadLine module) (@INC contains: /etc/perl /usr/local/lib/x86_64-linux-gnu/perl/5.32.1 /usr/local/share/perl/5.32.1 /usr/lib/x86_64-linux-gnu/perl5/5.32 /usr/share/perl5 /usr/lib/x86_64-linux-gnu/perl-base /usr/lib/x86_64-linux-gnu/perl/5.32 /usr/share/perl/5.32 /usr/local/lib/site_perl) at /usr/share/perl5/Debconf/FrontEnd/Readline.pm line 7.)\r\ndebconf: falling back to frontend: Teletype\r\nGenerating locales (this might take a while)...\r\nGeneration complete.\r\nSetting up libsasl2-modules-db:amd64 (2.1.27+dfsg-2.1+deb11u1) ...\r\nSetting up make (4.3-4.1) ...\r\nSetting up librtmp1:amd64 (2.4+20151223.gitfa8646d.1-2+b2) ...\r\nSetting up sudo (1.9.5p2-3) ...\r\ninvoke-rc.d: could not determine current runlevel\r\ninvoke-rc.d: policy-rc.d denied execution of start.\r\nSetting up libsasl2-2:amd64 (2.1.27+dfsg-2.1+deb11u1) ...\r\nSetting up libssh2-1:amd64 (1.9.0-2) ...\r\nSetting up libldap-2.4-2:amd64 (2.4.57+dfsg-3+deb11u1) ...\r\nSetting up libcurl4:amd64 (7.74.0-1.3+deb11u3) ...\r\nSetting up curl (7.74.0-1.3+deb11u3) ...\r\nProcessing triggers for libc-bin (2.31-13+deb11u5) ...\r\nGenerating locales (this might take a while)...\nGeneration complete.\n\u001b[91m\nWARNING: apt does not have a stable CLI interface. Use with caution in scripts.\n\n\u001b[0mReading package lists...\nBuilding dependency tree...\nReading state information...\n0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.\n\u001b[91m\nWARNING: apt does not have a stable CLI interface. Use with caution in scripts.\n\n\u001b[0mRemoving intermediate container 9a1cec9d782b\n ---> 5f99541e63ed\nStep 6/14 : ENV LANG=\"en_US.UTF-8\"     LANGUAGE=\"en_US.UTF-8\"     LC_ALL=\"en_US.UTF-8\"\n ---> Running in 95b9cc282661\nRemoving intermediate container 95b9cc282661\n ---> 2ccf1fc9fbe7\nStep 7/14 : RUN useradd --create-home --shell /bin/bash ${USER}\n ---> Running in 98a7480df5b1\nRemoving intermediate container 98a7480df5b1\n ---> 829b902f9f90\nStep 8/14 : RUN usermod -append --groups sudo ${USER}\n ---> Running in e76241362a25\nRemoving intermediate container e76241362a25\n ---> f27b976da876\nStep 9/14 : RUN echo \"%sudo ALL=(ALL) NOPASSWD: ALL\" >> /etc/sudoers\n ---> Running in 697c1b04c0a3\nRemoving intermediate container 697c1b04c0a3\n ---> c9cab33faa2a\nStep 10/14 : WORKDIR ${WORK_DIR}\n ---> Running in 64af0e6d0b6e\nRemoving intermediate container 64af0e6d0b6e\n ---> 523b727edff1\nStep 11/14 : COPY --chown=user:user . ${WORK_DIR}\n ---> 4a5c3994b6c0\nStep 12/14 : USER ${USER}\n ---> Running in e34a2eac1fa5\nRemoving intermediate container e34a2eac1fa5\n ---> e891e42d78ea\nStep 13/14 : RUN make virtualenv\n ---> Running in 79985f6a9d5b\npython3.9 -m venv venv\nvenv/bin/python -m pip install --upgrade pip setuptools\nRequirement already satisfied: pip in ./venv/lib/python3.9/site-packages (22.0.4)\nCollecting pip\n  Downloading pip-22.3.1-py3-none-any.whl (2.1 MB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 2.1/2.1 MB 40.5 MB/s eta 0:00:00\nRequirement already satisfied: setuptools in ./venv/lib/python3.9/site-packages (58.1.0)\nCollecting setuptools\n  Downloading setuptools-65.6.3-py3-none-any.whl (1.2 MB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 1.2/1.2 MB 5.7 MB/s eta 0:00:00\nInstalling collected packages: setuptools, pip\n  Attempting uninstall: setuptools\n    Found existing installation: setuptools 58.1.0\n    Uninstalling setuptools-58.1.0:\n      Successfully uninstalled setuptools-58.1.0\n  Attempting uninstall: pip\n    Found existing installation: pip 22.0.4\n    Uninstalling pip-22.0.4:\n      Successfully uninstalled pip-22.0.4\nSuccessfully installed pip-22.3.1 setuptools-65.6.3\nvenv/bin/pip install --requirement requirements.txt\nCollecting asgiref==3.5.2\n  Downloading asgiref-3.5.2-py3-none-any.whl (22 kB)\nCollecting attrs==22.1.0\n  Downloading attrs-22.1.0-py2.py3-none-any.whl (58 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 58.8/58.8 kB 407.7 kB/s eta 0:00:00\nCollecting black==22.10.0\n  Downloading black-22.10.0-cp39-cp39-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (1.5 MB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 1.5/1.5 MB 17.8 MB/s eta 0:00:00\nCollecting click==8.1.3\n  Downloading click-8.1.3-py3-none-any.whl (96 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 96.6/96.6 kB 1.2 MB/s eta 0:00:00\nCollecting dj-static==0.0.6\n  Downloading dj-static-0.0.6.tar.gz (3.4 kB)\n  Preparing metadata (setup.py): started\n  Preparing metadata (setup.py): finished with status 'done'\nCollecting django==3.1.14\n  Downloading Django-3.1.14-py3-none-any.whl (7.8 MB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 7.8/7.8 MB 37.4 MB/s eta 0:00:00\nCollecting flake8==5.0.4\n  Downloading flake8-5.0.4-py2.py3-none-any.whl (61 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 61.9/61.9 kB 4.8 MB/s eta 0:00:00\nCollecting gunicorn==20.1.0\n  Downloading gunicorn-20.1.0-py3-none-any.whl (79 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 79.5/79.5 kB 3.9 MB/s eta 0:00:00\nCollecting iniconfig==1.1.1\n  Downloading iniconfig-1.1.1-py2.py3-none-any.whl (5.0 kB)\nCollecting isort==5.10.1\n  Downloading isort-5.10.1-py3-none-any.whl (103 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 103.4/103.4 kB 3.8 MB/s eta 0:00:00\nCollecting mccabe==0.7.0\n  Downloading mccabe-0.7.0-py2.py3-none-any.whl (7.3 kB)\nCollecting mypy-extensions==0.4.3\n  Downloading mypy_extensions-0.4.3-py2.py3-none-any.whl (4.5 kB)\nCollecting packaging==21.3\n  Downloading packaging-21.3-py3-none-any.whl (40 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 40.8/40.8 kB 3.3 MB/s eta 0:00:00\nCollecting pathspec==0.10.1\n  Downloading pathspec-0.10.1-py3-none-any.whl (27 kB)\nCollecting platformdirs==2.5.2\n  Downloading platformdirs-2.5.2-py3-none-any.whl (14 kB)\nCollecting pluggy==1.0.0\n  Downloading pluggy-1.0.0-py2.py3-none-any.whl (13 kB)\nCollecting py==1.11.0\n  Downloading py-1.11.0-py2.py3-none-any.whl (98 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 98.7/98.7 kB 8.6 MB/s eta 0:00:00\nCollecting pycodestyle==2.9.1\n  Downloading pycodestyle-2.9.1-py2.py3-none-any.whl (41 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 41.5/41.5 kB 2.8 MB/s eta 0:00:00\nCollecting pyflakes==2.5.0\n  Downloading pyflakes-2.5.0-py2.py3-none-any.whl (66 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 66.1/66.1 kB 3.5 MB/s eta 0:00:00\nCollecting pyparsing==3.0.9\n  Downloading pyparsing-3.0.9-py3-none-any.whl (98 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 98.3/98.3 kB 6.9 MB/s eta 0:00:00\nCollecting pystache==0.6.0\n  Downloading pystache-0.6.0.tar.gz (78 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 78.2/78.2 kB 4.1 MB/s eta 0:00:00\n  Installing build dependencies: started\n  Installing build dependencies: finished with status 'done'\n  Getting requirements to build wheel: started\n  Getting requirements to build wheel: finished with status 'done'\n  Preparing metadata (pyproject.toml): started\n  Preparing metadata (pyproject.toml): finished with status 'done'\nCollecting pytest==7.1.3\n  Downloading pytest-7.1.3-py3-none-any.whl (298 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 298.2/298.2 kB 4.7 MB/s eta 0:00:00\nCollecting pytest-django==4.5.2\n  Downloading pytest_django-4.5.2-py3-none-any.whl (20 kB)\nCollecting pytz==2022.4\n  Downloading pytz-2022.4-py2.py3-none-any.whl (500 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 500.8/500.8 kB 29.0 MB/s eta 0:00:00\nCollecting sqlparse==0.4.3\n  Downloading sqlparse-0.4.3-py3-none-any.whl (42 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 42.8/42.8 kB 241.6 kB/s eta 0:00:00\nCollecting static==1.1.1\n  Downloading static-1.1.1.tar.gz (5.8 kB)\n  Preparing metadata (setup.py): started\n  Preparing metadata (setup.py): finished with status 'done'\nCollecting static3==0.7.0\n  Downloading static3-0.7.0.tar.gz (24 kB)\n  Preparing metadata (setup.py): started\n  Preparing metadata (setup.py): finished with status 'done'\nCollecting tomli==2.0.1\n  Downloading tomli-2.0.1-py3-none-any.whl (12 kB)\nCollecting typing-extensions==4.4.0\n  Downloading typing_extensions-4.4.0-py3-none-any.whl (26 kB)\nRequirement already satisfied: setuptools>=3.0 in ./venv/lib/python3.9/site-packages (from gunicorn==20.1.0->-r requirements.txt (line 21)) (65.6.3)\nBuilding wheels for collected packages: pystache\n  Building wheel for pystache (pyproject.toml): started\n  Building wheel for pystache (pyproject.toml): finished with status 'done'\n  Created wheel for pystache: filename=pystache-0.6.0-py3-none-any.whl size=83618 sha256=2b7736225cb0b434c38eaa6d6df11fae34a3d959d24da7b65a9870f3e6a04e16\n  Stored in directory: /home/user/.cache/pip/wheels/66/17/80/1fa8123607af3e55ee038d7311592eaf26f8afae58f0a17f00\nSuccessfully built pystache\nInstalling collected packages: static3, pytz, mypy-extensions, iniconfig, typing-extensions, tomli, sqlparse, pystache, pyparsing, pyflakes, pycodestyle, py, pluggy, platformdirs, pathspec, mccabe, isort, gunicorn, dj-static, click, attrs, asgiref, static, packaging, flake8, django, black, pytest, pytest-django\n\u001b[91m  DEPRECATION: static3 is being installed using the legacy 'setup.py install' method, because it does not have a 'pyproject.toml' and the 'wheel' package is not installed. pip 23.1 will enforce this behaviour change. A possible replacement is to enable the '--use-pep517' option. Discussion can be found at https://github.com/pypa/pip/issues/8559\n\u001b[0m  Running setup.py install for static3: started\n  Running setup.py install for static3: finished with status 'done'\n\u001b[91m  DEPRECATION: dj-static is being installed using the legacy 'setup.py install' method, because it does not have a 'pyproject.toml' and the 'wheel' package is not installed. pip 23.1 will enforce this behaviour change. A possible replacement is to enable the '--use-pep517' option. Discussion can be found at https://github.com/pypa/pip/issues/8559\n\u001b[0m  Running setup.py install for dj-static: started\n  Running setup.py install for dj-static: finished with status 'done'\n\u001b[91m  DEPRECATION: static is being installed using the legacy 'setup.py install' method, because it does not have a 'pyproject.toml' and the 'wheel' package is not installed. pip 23.1 will enforce this behaviour change. A possible replacement is to enable the '--use-pep517' option. Discussion can be found at https://github.com/pypa/pip/issues/8559\n\u001b[0m  Running setup.py install for static: started\n  Running setup.py install for static: finished with status 'done'\nSuccessfully installed asgiref-3.5.2 attrs-22.1.0 black-22.10.0 click-8.1.3 dj-static-0.0.6 django-3.1.14 flake8-5.0.4 gunicorn-20.1.0 iniconfig-1.1.1 isort-5.10.1 mccabe-0.7.0 mypy-extensions-0.4.3 packaging-21.3 pathspec-0.10.1 platformdirs-2.5.2 pluggy-1.0.0 py-1.11.0 pycodestyle-2.9.1 pyflakes-2.5.0 pyparsing-3.0.9 pystache-0.6.0 pytest-7.1.3 pytest-django-4.5.2 pytz-2022.4 sqlparse-0.4.3 static-1.1.1 static3-0.7.0 tomli-2.0.1 typing-extensions-4.4.0\nRemoving intermediate container 79985f6a9d5b\n ---> 97d586235c9a\nStep 14/14 : CMD venv/bin/gunicorn gitpop2.wsgi:application --bind 0.0.0.0:$PORT\n ---> Running in 395920df4941\nRemoving intermediate container 395920df4941\n ---> a55def913335\nSuccessfully built a55def913335\nSuccessfully tagged gitpop2:latest\n","stderr":"","imageSize":239730864},"repair":{"violations":[{"name":"ruleAptGetInstallThenRemoveAptLists","position":{"start":17,"end":21,"columnStart":34,"columnEnd":8}}],"repairedDockerfile":"# Build with:\n#     docker build --tag=andremiras/gitpop2 .\n#\n# Run e.g. tests with:\n#     docker run -it --rm andremiras/gitpop2 /bin/sh -c 'make test'\n#\n# Or for interactive shell:\n#     docker run -it --rm andremiras/gitpop2\n\nFROM python:3.9-slim\n\nENV USER=\"user\"\nENV HOME_DIR=\"/home/${USER}\"\nENV WORK_DIR=\"${HOME_DIR}\" \\\n    PATH=\"${HOME_DIR}/.local/bin:${PATH}\"\n\n# install dependencies and configure locale\nRUN apt update -qq > /dev/null && apt --yes install -qq --no-install-recommends \\\n    curl \\\n    locales \\\n    make \\\n    sudo \\\n    && locale-gen en_US.UTF-8 \\\n    && apt --yes autoremove && apt --yes clean\n\nENV LANG=\"en_US.UTF-8\" \\\n    LANGUAGE=\"en_US.UTF-8\" \\\n    LC_ALL=\"en_US.UTF-8\"\n\n# prepare non root env\nRUN useradd --create-home --shell /bin/bash ${USER}\n\n# with sudo access and no password\nRUN usermod -append --groups sudo ${USER}\nRUN echo \"%sudo ALL=(ALL) NOPASSWD: ALL\" >> /etc/sudoers\n\nWORKDIR ${WORK_DIR}\nCOPY --chown=user:user . ${WORK_DIR}\nUSER ${USER}\n\n# setup virtualenv\nRUN make virtualenv\n\nCMD venv/bin/gunicorn gitpop2.wsgi:application --bind 0.0.0.0:$PORT\n"},"repairedBuild":{"startTimestamp":1672329980669,"endTimestamp":1672330091367,"error":null,"stdout":"Sending build context to Docker daemon  893.4kB\r\r\nStep 1/14 : FROM python:3.9-slim\n ---> e2f464551004\nStep 2/14 : ENV USER=\"user\"\n ---> Running in dd304a459fe5\nRemoving intermediate container dd304a459fe5\n ---> 1d115b752885\nStep 3/14 : ENV HOME_DIR=\"/home/${USER}\"\n ---> Running in 4daafd1bfeb2\nRemoving intermediate container 4daafd1bfeb2\n ---> e84e76504a1e\nStep 4/14 : ENV WORK_DIR=\"${HOME_DIR}\"     PATH=\"${HOME_DIR}/.local/bin:${PATH}\"\n ---> Running in 618b8bf9dcf5\nRemoving intermediate container 618b8bf9dcf5\n ---> ca4f28c5e5da\nStep 5/14 : RUN apt update -qq > /dev/null && apt --yes install -qq --no-install-recommends     curl     locales     make     sudo     && locale-gen en_US.UTF-8     && apt --yes autoremove && apt --yes clean\n ---> Running in 2fd49bb50c17\n\u001b[91m\nWARNING: apt does not have a stable CLI interface. Use with caution in scripts.\n\n\u001b[0m\u001b[91m\nWARNING: apt does not have a stable CLI interface. Use with caution in scripts.\n\n\u001b[0mThe following additional packages will be installed:\n  libbrotli1 libc-l10n libcurl4 libldap-2.4-2 libnghttp2-14 libpsl5 librtmp1\n  libsasl2-2 libsasl2-modules-db libssh2-1\nSuggested packages:\n  make-doc\nRecommended packages:\n  libldap-common publicsuffix libsasl2-modules\nThe following NEW packages will be installed:\n  curl libbrotli1 libc-l10n libcurl4 libldap-2.4-2 libnghttp2-14 libpsl5\n  librtmp1 libsasl2-2 libsasl2-modules-db libssh2-1 locales make sudo\n\u001b[91mdebconf: delaying package configuration, since apt-utils is not installed\n\u001b[0m0 upgraded, 14 newly installed, 0 to remove and 0 not upgraded.\nNeed to get 8056 kB of archives.\nAfter this operation, 30.9 MB of additional disk space will be used.\nSelecting previously unselected package libc-l10n.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 7031 files and directories currently installed.)\r\nPreparing to unpack .../00-libc-l10n_2.31-13+deb11u5_all.deb ...\r\nUnpacking libc-l10n (2.31-13+deb11u5) ...\r\nSelecting previously unselected package locales.\r\nPreparing to unpack .../01-locales_2.31-13+deb11u5_all.deb ...\r\nUnpacking locales (2.31-13+deb11u5) ...\r\nSelecting previously unselected package libbrotli1:amd64.\r\nPreparing to unpack .../02-libbrotli1_1.0.9-2+b2_amd64.deb ...\r\nUnpacking libbrotli1:amd64 (1.0.9-2+b2) ...\r\nSelecting previously unselected package libsasl2-modules-db:amd64.\r\nPreparing to unpack .../03-libsasl2-modules-db_2.1.27+dfsg-2.1+deb11u1_amd64.deb ...\r\nUnpacking libsasl2-modules-db:amd64 (2.1.27+dfsg-2.1+deb11u1) ...\r\nSelecting previously unselected package libsasl2-2:amd64.\r\nPreparing to unpack .../04-libsasl2-2_2.1.27+dfsg-2.1+deb11u1_amd64.deb ...\r\nUnpacking libsasl2-2:amd64 (2.1.27+dfsg-2.1+deb11u1) ...\r\nSelecting previously unselected package libldap-2.4-2:amd64.\r\nPreparing to unpack .../05-libldap-2.4-2_2.4.57+dfsg-3+deb11u1_amd64.deb ...\r\nUnpacking libldap-2.4-2:amd64 (2.4.57+dfsg-3+deb11u1) ...\r\nSelecting previously unselected package libnghttp2-14:amd64.\r\nPreparing to unpack .../06-libnghttp2-14_1.43.0-1_amd64.deb ...\r\nUnpacking libnghttp2-14:amd64 (1.43.0-1) ...\r\nSelecting previously unselected package libpsl5:amd64.\r\nPreparing to unpack .../07-libpsl5_0.21.0-1.2_amd64.deb ...\r\nUnpacking libpsl5:amd64 (0.21.0-1.2) ...\r\nSelecting previously unselected package librtmp1:amd64.\r\nPreparing to unpack .../08-librtmp1_2.4+20151223.gitfa8646d.1-2+b2_amd64.deb ...\r\nUnpacking librtmp1:amd64 (2.4+20151223.gitfa8646d.1-2+b2) ...\r\nSelecting previously unselected package libssh2-1:amd64.\r\nPreparing to unpack .../09-libssh2-1_1.9.0-2_amd64.deb ...\r\nUnpacking libssh2-1:amd64 (1.9.0-2) ...\r\nSelecting previously unselected package libcurl4:amd64.\r\nPreparing to unpack .../10-libcurl4_7.74.0-1.3+deb11u3_amd64.deb ...\r\nUnpacking libcurl4:amd64 (7.74.0-1.3+deb11u3) ...\r\nSelecting previously unselected package curl.\r\nPreparing to unpack .../11-curl_7.74.0-1.3+deb11u3_amd64.deb ...\r\nUnpacking curl (7.74.0-1.3+deb11u3) ...\r\nSelecting previously unselected package make.\r\nPreparing to unpack .../12-make_4.3-4.1_amd64.deb ...\r\nUnpacking make (4.3-4.1) ...\r\nSelecting previously unselected package sudo.\r\nPreparing to unpack .../13-sudo_1.9.5p2-3_amd64.deb ...\r\nUnpacking sudo (1.9.5p2-3) ...\r\nSetting up libc-l10n (2.31-13+deb11u5) ...\r\nSetting up libpsl5:amd64 (0.21.0-1.2) ...\r\nSetting up libbrotli1:amd64 (1.0.9-2+b2) ...\r\nSetting up libnghttp2-14:amd64 (1.43.0-1) ...\r\nSetting up locales (2.31-13+deb11u5) ...\r\ndebconf: unable to initialize frontend: Dialog\r\ndebconf: (TERM is not set, so the dialog frontend is not usable.)\r\ndebconf: falling back to frontend: Readline\r\ndebconf: unable to initialize frontend: Readline\r\ndebconf: (Can't locate Term/ReadLine.pm in @INC (you may need to install the Term::ReadLine module) (@INC contains: /etc/perl /usr/local/lib/x86_64-linux-gnu/perl/5.32.1 /usr/local/share/perl/5.32.1 /usr/lib/x86_64-linux-gnu/perl5/5.32 /usr/share/perl5 /usr/lib/x86_64-linux-gnu/perl-base /usr/lib/x86_64-linux-gnu/perl/5.32 /usr/share/perl/5.32 /usr/local/lib/site_perl) at /usr/share/perl5/Debconf/FrontEnd/Readline.pm line 7.)\r\ndebconf: falling back to frontend: Teletype\r\nGenerating locales (this might take a while)...\r\nGeneration complete.\r\nSetting up libsasl2-modules-db:amd64 (2.1.27+dfsg-2.1+deb11u1) ...\r\nSetting up make (4.3-4.1) ...\r\nSetting up librtmp1:amd64 (2.4+20151223.gitfa8646d.1-2+b2) ...\r\nSetting up sudo (1.9.5p2-3) ...\r\ninvoke-rc.d: could not determine current runlevel\r\ninvoke-rc.d: policy-rc.d denied execution of start.\r\nSetting up libsasl2-2:amd64 (2.1.27+dfsg-2.1+deb11u1) ...\r\nSetting up libssh2-1:amd64 (1.9.0-2) ...\r\nSetting up libldap-2.4-2:amd64 (2.4.57+dfsg-3+deb11u1) ...\r\nSetting up libcurl4:amd64 (7.74.0-1.3+deb11u3) ...\r\nSetting up curl (7.74.0-1.3+deb11u3) ...\r\nProcessing triggers for libc-bin (2.31-13+deb11u5) ...\r\nGenerating locales (this might take a while)...\nGeneration complete.\n\u001b[91m\nWARNING: apt does not have a stable CLI interface. Use with caution in scripts.\n\n\u001b[0mReading package lists...\nBuilding dependency tree...\nReading state information...\n0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.\n\u001b[91m\nWARNING: apt does not have a stable CLI interface. Use with caution in scripts.\n\n\u001b[0mRemoving intermediate container 2fd49bb50c17\n ---> d2965040dafe\nStep 6/14 : ENV LANG=\"en_US.UTF-8\"     LANGUAGE=\"en_US.UTF-8\"     LC_ALL=\"en_US.UTF-8\"\n ---> Running in 486e186ad1ab\nRemoving intermediate container 486e186ad1ab\n ---> 9cbde7157e22\nStep 7/14 : RUN useradd --create-home --shell /bin/bash ${USER}\n ---> Running in add370efdcef\nRemoving intermediate container add370efdcef\n ---> 6dc63f68590f\nStep 8/14 : RUN usermod -append --groups sudo ${USER}\n ---> Running in 2c1e5d269769\nRemoving intermediate container 2c1e5d269769\n ---> 4dd648572085\nStep 9/14 : RUN echo \"%sudo ALL=(ALL) NOPASSWD: ALL\" >> /etc/sudoers\n ---> Running in e099f3040ea0\nRemoving intermediate container e099f3040ea0\n ---> 4e5c39d30329\nStep 10/14 : WORKDIR ${WORK_DIR}\n ---> Running in 8b44826d17ea\nRemoving intermediate container 8b44826d17ea\n ---> a335b42c62aa\nStep 11/14 : COPY --chown=user:user . ${WORK_DIR}\n ---> 8f80fa4e05bd\nStep 12/14 : USER ${USER}\n ---> Running in 07b92cd57c99\nRemoving intermediate container 07b92cd57c99\n ---> f2e44b7d9808\nStep 13/14 : RUN make virtualenv\n ---> Running in 2e2c436a1cf6\npython3.9 -m venv venv\nvenv/bin/python -m pip install --upgrade pip setuptools\nRequirement already satisfied: pip in ./venv/lib/python3.9/site-packages (22.0.4)\nCollecting pip\n  Downloading pip-22.3.1-py3-none-any.whl (2.1 MB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 2.1/2.1 MB 14.4 MB/s eta 0:00:00\nRequirement already satisfied: setuptools in ./venv/lib/python3.9/site-packages (58.1.0)\nCollecting setuptools\n  Downloading setuptools-65.6.3-py3-none-any.whl (1.2 MB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 1.2/1.2 MB 2.9 MB/s eta 0:00:00\nInstalling collected packages: setuptools, pip\n  Attempting uninstall: setuptools\n    Found existing installation: setuptools 58.1.0\n    Uninstalling setuptools-58.1.0:\n      Successfully uninstalled setuptools-58.1.0\n  Attempting uninstall: pip\n    Found existing installation: pip 22.0.4\n    Uninstalling pip-22.0.4:\n      Successfully uninstalled pip-22.0.4\nSuccessfully installed pip-22.3.1 setuptools-65.6.3\nvenv/bin/pip install --requirement requirements.txt\nCollecting asgiref==3.5.2\n  Downloading asgiref-3.5.2-py3-none-any.whl (22 kB)\nCollecting attrs==22.1.0\n  Downloading attrs-22.1.0-py2.py3-none-any.whl (58 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 58.8/58.8 kB 739.7 kB/s eta 0:00:00\nCollecting black==22.10.0\n  Downloading black-22.10.0-cp39-cp39-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (1.5 MB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 1.5/1.5 MB 8.8 MB/s eta 0:00:00\nCollecting click==8.1.3\n  Downloading click-8.1.3-py3-none-any.whl (96 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 96.6/96.6 kB 1.1 MB/s eta 0:00:00\nCollecting dj-static==0.0.6\n  Downloading dj-static-0.0.6.tar.gz (3.4 kB)\n  Preparing metadata (setup.py): started\n  Preparing metadata (setup.py): finished with status 'done'\nCollecting django==3.1.14\n  Downloading Django-3.1.14-py3-none-any.whl (7.8 MB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 7.8/7.8 MB 24.9 MB/s eta 0:00:00\nCollecting flake8==5.0.4\n  Downloading flake8-5.0.4-py2.py3-none-any.whl (61 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 61.9/61.9 kB 335.5 kB/s eta 0:00:00\nCollecting gunicorn==20.1.0\n  Downloading gunicorn-20.1.0-py3-none-any.whl (79 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 79.5/79.5 kB 282.2 kB/s eta 0:00:00\nCollecting iniconfig==1.1.1\n  Downloading iniconfig-1.1.1-py2.py3-none-any.whl (5.0 kB)\nCollecting isort==5.10.1\n  Downloading isort-5.10.1-py3-none-any.whl (103 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 103.4/103.4 kB 859.7 kB/s eta 0:00:00\nCollecting mccabe==0.7.0\n  Downloading mccabe-0.7.0-py2.py3-none-any.whl (7.3 kB)\nCollecting mypy-extensions==0.4.3\n  Downloading mypy_extensions-0.4.3-py2.py3-none-any.whl (4.5 kB)\nCollecting packaging==21.3\n  Downloading packaging-21.3-py3-none-any.whl (40 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 40.8/40.8 kB 143.9 kB/s eta 0:00:00\nCollecting pathspec==0.10.1\n  Downloading pathspec-0.10.1-py3-none-any.whl (27 kB)\nCollecting platformdirs==2.5.2\n  Downloading platformdirs-2.5.2-py3-none-any.whl (14 kB)\nCollecting pluggy==1.0.0\n  Downloading pluggy-1.0.0-py2.py3-none-any.whl (13 kB)\nCollecting py==1.11.0\n  Downloading py-1.11.0-py2.py3-none-any.whl (98 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 98.7/98.7 kB 1.0 MB/s eta 0:00:00\nCollecting pycodestyle==2.9.1\n  Downloading pycodestyle-2.9.1-py2.py3-none-any.whl (41 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 41.5/41.5 kB 231.0 kB/s eta 0:00:00\nCollecting pyflakes==2.5.0\n  Downloading pyflakes-2.5.0-py2.py3-none-any.whl (66 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 66.1/66.1 kB 4.0 MB/s eta 0:00:00\nCollecting pyparsing==3.0.9\n  Downloading pyparsing-3.0.9-py3-none-any.whl (98 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 98.3/98.3 kB 5.9 MB/s eta 0:00:00\nCollecting pystache==0.6.0\n  Downloading pystache-0.6.0.tar.gz (78 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 78.2/78.2 kB 5.9 MB/s eta 0:00:00\n  Installing build dependencies: started\n  Installing build dependencies: finished with status 'done'\n  Getting requirements to build wheel: started\n  Getting requirements to build wheel: finished with status 'done'\n  Preparing metadata (pyproject.toml): started\n  Preparing metadata (pyproject.toml): finished with status 'done'\nCollecting pytest==7.1.3\n  Downloading pytest-7.1.3-py3-none-any.whl (298 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 298.2/298.2 kB 24.3 MB/s eta 0:00:00\nCollecting pytest-django==4.5.2\n  Downloading pytest_django-4.5.2-py3-none-any.whl (20 kB)\nCollecting pytz==2022.4\n  Downloading pytz-2022.4-py2.py3-none-any.whl (500 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 500.8/500.8 kB 37.8 MB/s eta 0:00:00\nCollecting sqlparse==0.4.3\n  Downloading sqlparse-0.4.3-py3-none-any.whl (42 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 42.8/42.8 kB 4.0 MB/s eta 0:00:00\nCollecting static==1.1.1\n  Downloading static-1.1.1.tar.gz (5.8 kB)\n  Preparing metadata (setup.py): started\n  Preparing metadata (setup.py): finished with status 'done'\nCollecting static3==0.7.0\n  Downloading static3-0.7.0.tar.gz (24 kB)\n  Preparing metadata (setup.py): started\n  Preparing metadata (setup.py): finished with status 'done'\nCollecting tomli==2.0.1\n  Downloading tomli-2.0.1-py3-none-any.whl (12 kB)\nCollecting typing-extensions==4.4.0\n  Downloading typing_extensions-4.4.0-py3-none-any.whl (26 kB)\nRequirement already satisfied: setuptools>=3.0 in ./venv/lib/python3.9/site-packages (from gunicorn==20.1.0->-r requirements.txt (line 21)) (65.6.3)\nBuilding wheels for collected packages: pystache\n  Building wheel for pystache (pyproject.toml): started\n  Building wheel for pystache (pyproject.toml): finished with status 'done'\n  Created wheel for pystache: filename=pystache-0.6.0-py3-none-any.whl size=83618 sha256=57b154e8c5d0da9e529f8a1d74e07f0d008d6afab425cf7b985ebc9c5120602b\n  Stored in directory: /home/user/.cache/pip/wheels/66/17/80/1fa8123607af3e55ee038d7311592eaf26f8afae58f0a17f00\nSuccessfully built pystache\nInstalling collected packages: static3, pytz, mypy-extensions, iniconfig, typing-extensions, tomli, sqlparse, pystache, pyparsing, pyflakes, pycodestyle, py, pluggy, platformdirs, pathspec, mccabe, isort, gunicorn, dj-static, click, attrs, asgiref, static, packaging, flake8, django, black, pytest, pytest-django\n\u001b[91m  DEPRECATION: static3 is being installed using the legacy 'setup.py install' method, because it does not have a 'pyproject.toml' and the 'wheel' package is not installed. pip 23.1 will enforce this behaviour change. A possible replacement is to enable the '--use-pep517' option. Discussion can be found at https://github.com/pypa/pip/issues/8559\n\u001b[0m  Running setup.py install for static3: started\n  Running setup.py install for static3: finished with status 'done'\n\u001b[91m  DEPRECATION: dj-static is being installed using the legacy 'setup.py install' method, because it does not have a 'pyproject.toml' and the 'wheel' package is not installed. pip 23.1 will enforce this behaviour change. A possible replacement is to enable the '--use-pep517' option. Discussion can be found at https://github.com/pypa/pip/issues/8559\n\u001b[0m  Running setup.py install for dj-static: started\n  Running setup.py install for dj-static: finished with status 'done'\n\u001b[91m  DEPRECATION: static is being installed using the legacy 'setup.py install' method, because it does not have a 'pyproject.toml' and the 'wheel' package is not installed. pip 23.1 will enforce this behaviour change. A possible replacement is to enable the '--use-pep517' option. Discussion can be found at https://github.com/pypa/pip/issues/8559\n\u001b[0m  Running setup.py install for static: started\n  Running setup.py install for static: finished with status 'done'\nSuccessfully installed asgiref-3.5.2 attrs-22.1.0 black-22.10.0 click-8.1.3 dj-static-0.0.6 django-3.1.14 flake8-5.0.4 gunicorn-20.1.0 iniconfig-1.1.1 isort-5.10.1 mccabe-0.7.0 mypy-extensions-0.4.3 packaging-21.3 pathspec-0.10.1 platformdirs-2.5.2 pluggy-1.0.0 py-1.11.0 pycodestyle-2.9.1 pyflakes-2.5.0 pyparsing-3.0.9 pystache-0.6.0 pytest-7.1.3 pytest-django-4.5.2 pytz-2022.4 sqlparse-0.4.3 static-1.1.1 static3-0.7.0 tomli-2.0.1 typing-extensions-4.4.0\nRemoving intermediate container 2e2c436a1cf6\n ---> 28ed66539630\nStep 14/14 : CMD venv/bin/gunicorn gitpop2.wsgi:application --bind 0.0.0.0:$PORT\n ---> Running in 4594e6aeb73c\nRemoving intermediate container 4594e6aeb73c\n ---> b4a7ca25ee03\nSuccessfully built b4a7ca25ee03\nSuccessfully tagged gitpop2:latest\n","stderr":"","imageSize":239730862},"endTime":1672330091936}