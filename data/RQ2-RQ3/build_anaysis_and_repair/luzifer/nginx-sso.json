{"repository":"https://github.com/luzifer/nginx-sso","dockerfilePath":"Dockerfile","startTime":1672113675178,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/luzifer/nginx-sso'...\n","error":null,"commit":"ef64b715cf66f73cb9fab1b63a43638c017f95ea"},"originalBuild":{"startTimestamp":1672113676005,"endTimestamp":1672113729726,"error":null,"stdout":"Sending build context to Docker daemon    385kB\r\r\nStep 1/16 : FROM golang:alpine as builder\nalpine: Pulling from library/golang\nDigest: sha256:a9b24b67dc83b3383d22a14941c2b2b2ca6a103d805cac6820fd1355943beaf1\nStatus: Downloaded newer image for golang:alpine\n ---> cae57157ceaa\nStep 2/16 : ADD . /go/src/github.com/Luzifer/nginx-sso\n ---> 1e644e5c3ae1\nStep 3/16 : WORKDIR /go/src/github.com/Luzifer/nginx-sso\n ---> Running in 649f5ceea50c\nRemoving intermediate container 649f5ceea50c\n ---> 1accab2565eb\nStep 4/16 : ENV CGO_ENABLED=0\n ---> Running in 63511ca346a2\nRemoving intermediate container 63511ca346a2\n ---> 39302dd0c98e\nStep 5/16 : RUN set -ex  && apk add --update       git  && go install       -ldflags \"-X main.version=$(git describe --tags || git rev-parse --short HEAD || echo dev)\"       -mod=readonly\n ---> Running in acefd7cb68a8\n\u001b[91m+ apk add --update git\n\u001b[0mfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/6) Installing brotli-libs (1.0.9-r9)\n(2/6) Installing nghttp2-libs (1.51.0-r0)\n(3/6) Installing libcurl (7.87.0-r0)\n(4/6) Installing libexpat (2.5.0-r0)\n(5/6) Installing pcre2 (10.42-r0)\n(6/6) Installing git (2.38.2-r0)\nExecuting busybox-1.35.0-r29.trigger\nOK: 16 MiB in 22 packages\n\u001b[91m+ git describe --tags\n\u001b[0m\u001b[91mfatal: No names found, cannot describe anything.\n\u001b[0m\u001b[91m+ git rev-parse --short HEAD\n\u001b[0m\u001b[91m+ go install -ldflags '-X main.version=ef64b71' '-mod=readonly'\n\u001b[0m\u001b[91mgo: downloading gopkg.in/yaml.v2 v2.2.4\n\u001b[0m\u001b[91mgo: downloading github.com/flosch/pongo2 v0.0.0-20190707114632-bbf5a6c351f4\n\u001b[0m\u001b[91mgo: downloading github.com/pkg/errors v0.8.1\n\u001b[0m\u001b[91mgo: downloading github.com/sirupsen/logrus v1.4.2\n\u001b[0m\u001b[91mgo: downloading github.com/gorilla/context v1.1.1\n\u001b[0m\u001b[91mgo: downloading github.com/Luzifer/rconfig/v2 v2.2.1\n\u001b[0m\u001b[91mgo: downloading github.com/Luzifer/go_helpers/v2 v2.9.1\ngo: downloading golang.org/x/crypto v0.0.0-20191029031824-8986dd9e96cf\n\u001b[0m\u001b[91mgo: downloading gopkg.in/ldap.v2 v2.5.1\n\u001b[0m\u001b[91mgo: downloading github.com/coreos/go-oidc v2.1.0+incompatible\ngo: downloading golang.org/x/oauth2 v0.0.0-20190604053449-0f29369cfe45\n\u001b[0m\u001b[91mgo: downloading github.com/gorilla/sessions v1.2.0\n\u001b[0m\u001b[91mgo: downloading github.com/jda/go-crowd v0.0.0-20180225080536-9c6f17811dc6\n\u001b[0m\u001b[91mgo: downloading github.com/GeertJohan/yubigo v0.0.0-20190917122436-175bc097e60e\n\u001b[0m\u001b[91mgo: downloading github.com/pquerna/otp v1.2.0\n\u001b[0m\u001b[91mgo: downloading github.com/duosecurity/duo_api_golang v0.0.0-20190308151101-6c680f768e74\n\u001b[0m\u001b[91mgo: downloading google.golang.org/api v0.13.0\n\u001b[0m\u001b[91mgo: downloading github.com/pquerna/cachecontrol v0.0.0-20180517163645-1555304b9b35\n\u001b[0m\u001b[91mgo: downloading gopkg.in/square/go-jose.v2 v2.4.0\n\u001b[0m\u001b[91mgo: downloading golang.org/x/sys v0.0.0-20191029155521-f43be2a4598c\n\u001b[0m\u001b[91mgo: downloading github.com/gorilla/securecookie v1.1.1\n\u001b[0m\u001b[91mgo: downloading github.com/boombuler/barcode v1.0.1-0.20190219062509-6c824513bacc\n\u001b[0m\u001b[91mgo: downloading github.com/Luzifer/rconfig v1.2.0\n\u001b[0m\u001b[91mgo: downloading gopkg.in/asn1-ber.v1 v1.0.0-20181015200546-f715ec2f112d\n\u001b[0m\u001b[91mgo: downloading golang.org/x/net v0.0.0-20191101175033-0deb6923b6d9\n\u001b[0m\u001b[91mgo: downloading cloud.google.com/go v0.47.0\n\u001b[0m\u001b[91mgo: downloading github.com/juju/errors v0.0.0-20190930114154-d42613fe1ab9\n\u001b[0m\u001b[91mgo: downloading gopkg.in/validator.v2 v2.0.0-20191029180049-30e574a82075\n\u001b[0m\u001b[91mgo: downloading github.com/spf13/pflag v1.0.5\n\u001b[0m\u001b[91mgo: downloading go.opencensus.io v0.22.1\n\u001b[0m\u001b[91mgo: downloading google.golang.org/grpc v1.24.0\n\u001b[0m\u001b[91mgo: downloading github.com/googleapis/gax-go/v2 v2.0.5\n\u001b[0m\u001b[91mgo: downloading github.com/golang/groupcache v0.0.0-20191027212112-611e8accdfc9\n\u001b[0m\u001b[91mgo: downloading google.golang.org/genproto v0.0.0-20191028173616-919d9bdd9fe6\ngo: downloading github.com/golang/protobuf v1.3.2\n\u001b[0m\u001b[91mgo: downloading golang.org/x/text v0.3.2\n\u001b[0mRemoving intermediate container acefd7cb68a8\n ---> c9ac816e0d45\nStep 6/16 : FROM alpine\n ---> 49176f190c7e\nStep 7/16 : LABEL maintainer \"Knut Ahlers <knut@ahlers.me>\"\n ---> Running in fe3db0a51a0b\nRemoving intermediate container fe3db0a51a0b\n ---> a0851724fe35\nStep 8/16 : RUN set -ex  && apk --no-cache add       bash       ca-certificates       dumb-init\n ---> Running in ba3865ce309b\n\u001b[91m+ apk --no-cache add bash ca-certificates dumb-init\n\u001b[0mfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/6) Installing ncurses-terminfo-base (6.3_p20221119-r0)\n(2/6) Installing ncurses-libs (6.3_p20221119-r0)\n(3/6) Installing readline (8.2.0-r0)\n(4/6) Installing bash (5.2.15-r0)\nExecuting bash-5.2.15-r0.post-install\n(5/6) Installing ca-certificates (20220614-r3)\n(6/6) Installing dumb-init (1.2.5-r2)\nExecuting busybox-1.35.0-r29.trigger\nExecuting ca-certificates-20220614-r3.trigger\nOK: 10 MiB in 21 packages\nRemoving intermediate container ba3865ce309b\n ---> 3469192f602c\nStep 9/16 : COPY --from=builder /go/bin/nginx-sso                                     /usr/local/bin/\n ---> 568197c06a43\nStep 10/16 : COPY --from=builder /go/src/github.com/Luzifer/nginx-sso/config.yaml      /usr/local/share/nginx-sso/\n ---> 6c04f9ae88e8\nStep 11/16 : COPY --from=builder /go/src/github.com/Luzifer/nginx-sso/docker-start.sh  /usr/local/bin/\n ---> b35ec18fb306\nStep 12/16 : COPY --from=builder /go/src/github.com/Luzifer/nginx-sso/frontend/*       /usr/local/share/nginx-sso/frontend/\n ---> f7b6ebb8b279\nStep 13/16 : EXPOSE 8082\n ---> Running in 1d29e49896a1\nRemoving intermediate container 1d29e49896a1\n ---> 705957de1c99\nStep 14/16 : VOLUME [\"/data\"]\n ---> Running in 891d2134f777\nRemoving intermediate container 891d2134f777\n ---> b37a659cc617\nStep 15/16 : ENTRYPOINT [\"/usr/local/bin/docker-start.sh\"]\n ---> Running in a0ed95a05210\nRemoving intermediate container a0ed95a05210\n ---> a0b6aa6ce11c\nStep 16/16 : CMD [\"--\"]\n ---> Running in 368aea146e33\nRemoving intermediate container 368aea146e33\n ---> 55a940e90a7e\nSuccessfully built 55a940e90a7e\nSuccessfully tagged nginx-sso:latest\n","stderr":"","imageSize":25503507},"repair":{"violations":[{"name":"apkAddUseNoCache","position":{"start":8,"end":9,"columnStart":4,"columnEnd":9}}],"repairedDockerfile":"FROM golang:alpine as builder\n\nADD . /go/src/github.com/Luzifer/nginx-sso\nWORKDIR /go/src/github.com/Luzifer/nginx-sso\n\nENV CGO_ENABLED=0\n\nRUN set -ex \\\n && apk add --no-cache --update \\\n      git \\\n && go install \\\n      -ldflags \"-X main.version=$( git describe --tags || git rev-parse --short HEAD || echo dev)\" \\\n      -mod=readonly\n\nFROM alpine\n\nLABEL maintainer \"Knut Ahlers <knut@ahlers.me>\"\n\nRUN set -ex \\\n && apk --no-cache add \\\n      bash \\\n      ca-certificates \\\n      dumb-init\n\nCOPY --from=builder /go/bin/nginx-sso                                     /usr/local/bin/\nCOPY --from=builder /go/src/github.com/Luzifer/nginx-sso/config.yaml      /usr/local/share/nginx-sso/\nCOPY --from=builder /go/src/github.com/Luzifer/nginx-sso/docker-start.sh  /usr/local/bin/\nCOPY --from=builder /go/src/github.com/Luzifer/nginx-sso/frontend/*       /usr/local/share/nginx-sso/frontend/\n\nEXPOSE 8082\nVOLUME [\"/data\"]\n\nENTRYPOINT [\"/usr/local/bin/docker-start.sh\"]\nCMD [\"--\"]\n\n# vim: set ft=Dockerfile:\n"},"repairedBuild":{"startTimestamp":1672113730081,"endTimestamp":1672113776646,"error":null,"stdout":"Sending build context to Docker daemon    385kB\r\r\nStep 1/16 : FROM golang:alpine as builder\n ---> cae57157ceaa\nStep 2/16 : ADD . /go/src/github.com/Luzifer/nginx-sso\n ---> 1e563aa16ff1\nStep 3/16 : WORKDIR /go/src/github.com/Luzifer/nginx-sso\n ---> Running in 5775895df079\nRemoving intermediate container 5775895df079\n ---> 7814ca12e5a9\nStep 4/16 : ENV CGO_ENABLED=0\n ---> Running in ca4595424e1c\nRemoving intermediate container ca4595424e1c\n ---> 70f13c64accc\nStep 5/16 : RUN set -ex  && apk add --no-cache --update       git  && go install       -ldflags \"-X main.version=$( git describe --tags || git rev-parse --short HEAD || echo dev)\"       -mod=readonly\n ---> Running in 15402be11645\n\u001b[91m+ apk add --no-cache --update git\n\u001b[0mfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/6) Installing brotli-libs (1.0.9-r9)\n(2/6) Installing nghttp2-libs (1.51.0-r0)\n(3/6) Installing libcurl (7.87.0-r0)\n(4/6) Installing libexpat (2.5.0-r0)\n(5/6) Installing pcre2 (10.42-r0)\n(6/6) Installing git (2.38.2-r0)\nExecuting busybox-1.35.0-r29.trigger\nOK: 16 MiB in 22 packages\n\u001b[91m+ git describe --tags\n\u001b[0m\u001b[91mfatal: No names found, cannot describe anything.\n\u001b[0m\u001b[91m+ git rev-parse --short HEAD\n\u001b[0m\u001b[91m+ go install -ldflags '-X main.version=ef64b71' '-mod=readonly'\n\u001b[0m\u001b[91mgo: downloading github.com/flosch/pongo2 v0.0.0-20190707114632-bbf5a6c351f4\n\u001b[0m\u001b[91mgo: downloading github.com/Luzifer/go_helpers/v2 v2.9.1\n\u001b[0m\u001b[91mgo: downloading github.com/gorilla/context v1.1.1\n\u001b[0m\u001b[91mgo: downloading github.com/gorilla/sessions v1.2.0\n\u001b[0m\u001b[91mgo: downloading gopkg.in/yaml.v2 v2.2.4\ngo: downloading github.com/sirupsen/logrus v1.4.2\ngo: downloading gopkg.in/ldap.v2 v2.5.1\n\u001b[0m\u001b[91mgo: downloading golang.org/x/oauth2 v0.0.0-20190604053449-0f29369cfe45\n\u001b[0m\u001b[91mgo: downloading github.com/pkg/errors v0.8.1\n\u001b[0m\u001b[91mgo: downloading github.com/Luzifer/rconfig/v2 v2.2.1\n\u001b[0m\u001b[91mgo: downloading github.com/GeertJohan/yubigo v0.0.0-20190917122436-175bc097e60e\n\u001b[0m\u001b[91mgo: downloading github.com/jda/go-crowd v0.0.0-20180225080536-9c6f17811dc6\n\u001b[0m\u001b[91mgo: downloading github.com/pquerna/otp v1.2.0\n\u001b[0m\u001b[91mgo: downloading google.golang.org/api v0.13.0\n\u001b[0m\u001b[91mgo: downloading golang.org/x/crypto v0.0.0-20191029031824-8986dd9e96cf\n\u001b[0m\u001b[91mgo: downloading github.com/duosecurity/duo_api_golang v0.0.0-20190308151101-6c680f768e74\n\u001b[0m\u001b[91mgo: downloading github.com/coreos/go-oidc v2.1.0+incompatible\n\u001b[0m\u001b[91mgo: downloading github.com/Luzifer/rconfig v1.2.0\n\u001b[0m\u001b[91mgo: downloading github.com/boombuler/barcode v1.0.1-0.20190219062509-6c824513bacc\n\u001b[0m\u001b[91mgo: downloading github.com/gorilla/securecookie v1.1.1\n\u001b[0m\u001b[91mgo: downloading gopkg.in/asn1-ber.v1 v1.0.0-20181015200546-f715ec2f112d\ngo: downloading gopkg.in/validator.v2 v2.0.0-20191029180049-30e574a82075\ngo: downloading github.com/spf13/pflag v1.0.5\n\u001b[0m\u001b[91mgo: downloading gopkg.in/square/go-jose.v2 v2.4.0\ngo: downloading github.com/pquerna/cachecontrol v0.0.0-20180517163645-1555304b9b35\n\u001b[0m\u001b[91mgo: downloading golang.org/x/sys v0.0.0-20191029155521-f43be2a4598c\n\u001b[0m\u001b[91mgo: downloading golang.org/x/net v0.0.0-20191101175033-0deb6923b6d9\n\u001b[0m\u001b[91mgo: downloading cloud.google.com/go v0.47.0\n\u001b[0m\u001b[91mgo: downloading github.com/juju/errors v0.0.0-20190930114154-d42613fe1ab9\n\u001b[0m\u001b[91mgo: downloading go.opencensus.io v0.22.1\ngo: downloading google.golang.org/grpc v1.24.0\n\u001b[0m\u001b[91mgo: downloading github.com/googleapis/gax-go/v2 v2.0.5\n\u001b[0m\u001b[91mgo: downloading github.com/golang/groupcache v0.0.0-20191027212112-611e8accdfc9\n\u001b[0m\u001b[91mgo: downloading github.com/golang/protobuf v1.3.2\ngo: downloading google.golang.org/genproto v0.0.0-20191028173616-919d9bdd9fe6\n\u001b[0m\u001b[91mgo: downloading golang.org/x/text v0.3.2\n\u001b[0mRemoving intermediate container 15402be11645\n ---> 99528bd48981\nStep 6/16 : FROM alpine\n ---> 49176f190c7e\nStep 7/16 : LABEL maintainer \"Knut Ahlers <knut@ahlers.me>\"\n ---> Running in 10c73782d6eb\nRemoving intermediate container 10c73782d6eb\n ---> e01c2ca4462c\nStep 8/16 : RUN set -ex  && apk --no-cache add       bash       ca-certificates       dumb-init\n ---> Running in 5496d4033169\n\u001b[91m+ apk --no-cache add bash ca-certificates dumb-init\n\u001b[0mfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/6) Installing ncurses-terminfo-base (6.3_p20221119-r0)\n(2/6) Installing ncurses-libs (6.3_p20221119-r0)\n(3/6) Installing readline (8.2.0-r0)\n(4/6) Installing bash (5.2.15-r0)\nExecuting bash-5.2.15-r0.post-install\n(5/6) Installing ca-certificates (20220614-r3)\n(6/6) Installing dumb-init (1.2.5-r2)\nExecuting busybox-1.35.0-r29.trigger\nExecuting ca-certificates-20220614-r3.trigger\nOK: 10 MiB in 21 packages\nRemoving intermediate container 5496d4033169\n ---> d97d3a524673\nStep 9/16 : COPY --from=builder /go/bin/nginx-sso                                     /usr/local/bin/\n ---> b3086a82714d\nStep 10/16 : COPY --from=builder /go/src/github.com/Luzifer/nginx-sso/config.yaml      /usr/local/share/nginx-sso/\n ---> e7d61ac60af2\nStep 11/16 : COPY --from=builder /go/src/github.com/Luzifer/nginx-sso/docker-start.sh  /usr/local/bin/\n ---> 5de4b337ef1a\nStep 12/16 : COPY --from=builder /go/src/github.com/Luzifer/nginx-sso/frontend/*       /usr/local/share/nginx-sso/frontend/\n ---> ff2312acbe59\nStep 13/16 : EXPOSE 8082\n ---> Running in 6b64c94f50ab\nRemoving intermediate container 6b64c94f50ab\n ---> de1d7ad6cb96\nStep 14/16 : VOLUME [\"/data\"]\n ---> Running in f2dd04f0ff2f\nRemoving intermediate container f2dd04f0ff2f\n ---> d39720699726\nStep 15/16 : ENTRYPOINT [\"/usr/local/bin/docker-start.sh\"]\n ---> Running in 61f9b46a69fd\nRemoving intermediate container 61f9b46a69fd\n ---> 3ef1cf5a3668\nStep 16/16 : CMD [\"--\"]\n ---> Running in 29ca6c5e81e3\nRemoving intermediate container 29ca6c5e81e3\n ---> 6d400c96b475\nSuccessfully built 6d400c96b475\nSuccessfully tagged nginx-sso:latest\n","stderr":"","imageSize":25503507},"endTime":1672113776978}