{"repository":"https://github.com/vicanso/pike","dockerfilePath":"Dockerfile","startTime":1673059687199,"endTime":1673059798202,"clone":{"startTime":1673059687199,"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/vicanso/pike'...\n","error":null,"endTime":1673059688620,"commit":"9099e041f6ec3d4ed7d2799874c6a9f4157c3ca9"},"originalBuild":{"startTime":1673059688709,"endTime":1673059751054,"error":null,"stdout":"Sending build context to Docker daemon  9.478MB\r\r\nStep 1/11 : FROM golang:1.16-alpine as builder\n1.16-alpine: Pulling from library/golang\n59bf1c3509f3: Already exists\n666ba61612fd: Already exists\n8ed8ca486205: Already exists\nca4bf87e467a: Pulling fs layer\n0435e0963794: Pulling fs layer\n0435e0963794: Verifying Checksum\n0435e0963794: Download complete\nca4bf87e467a: Verifying Checksum\nca4bf87e467a: Download complete\nca4bf87e467a: Pull complete\n0435e0963794: Pull complete\nDigest: sha256:5616dca835fa90ef13a843824ba58394dad356b7d56198fb7c93cbe76d7d67fe\nStatus: Downloaded newer image for golang:1.16-alpine\n ---> 7642119cd161\nStep 2/11 : COPY ./ /pike\n ---> a0c6df161034\nStep 3/11 : RUN apk update   && apk add git make   && cd /pike   && env   && make cp-asset   && CGO_ENABLED=0 make build\n ---> Running in 93c603351f4f\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/community/x86_64/APKINDEX.tar.gz\nv3.15.6-242-g9cfdeb1de4 [https://dl-cdn.alpinelinux.org/alpine/v3.15/main]\nv3.15.6-237-g9ae8855cb5 [https://dl-cdn.alpinelinux.org/alpine/v3.15/community]\nOK: 15865 distinct packages available\n(1/7) Installing brotli-libs (1.0.9-r5)\n(2/7) Installing nghttp2-libs (1.46.0-r0)\n(3/7) Installing libcurl (7.80.0-r5)\n(4/7) Installing expat (2.5.0-r0)\n(5/7) Installing pcre2 (10.40-r0)\n(6/7) Installing git (2.34.5-r0)\n(7/7) Installing make (4.3-r0)\nExecuting busybox-1.34.1-r3.trigger\nOK: 19 MiB in 22 packages\nHOSTNAME=93c603351f4f\nSHLVL=1\nHOME=/root\nOLDPWD=/go\nPATH=/go/bin:/usr/local/go/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\nGOPATH=/go\nPWD=/pike\nGOLANG_VERSION=1.16.15\nrm -rf asset/web && cp -rf web asset/web\ngo build -ldflags \"-X main.date=`date -u +%Y%m%d.%H%M%S` -X main.commit=`git rev-parse --short HEAD`\" -o pike\n\u001b[91mgo: downloading github.com/spf13/cobra v1.1.3\n\u001b[0m\u001b[91mgo: downloading go.uber.org/automaxprocs v1.4.0\n\u001b[0m\u001b[91mgo: downloading github.com/shirou/gopsutil/v3 v3.21.5\ngo: downloading go.uber.org/zap v1.18.1\n\u001b[0m\u001b[91mgo: downloading go.uber.org/atomic v1.8.0\n\u001b[0m\u001b[91mgo: downloading github.com/andybalholm/brotli v1.0.3\n\u001b[0m\u001b[91mgo: downloading github.com/robfig/cron/v3 v3.0.1\n\u001b[0m\u001b[91mgo: downloading github.com/pierrec/lz4 v2.6.1+incompatible\n\u001b[0m\u001b[91mgo: downloading github.com/golang/snappy v0.0.3\n\u001b[0m\u001b[91mgo: downloading github.com/klauspost/compress v1.13.1\n\u001b[0m\u001b[91mgo: downloading github.com/golang/groupcache v0.0.0-20210331224755-41bb18bfe9da\n\u001b[0m\u001b[91mgo: downloading github.com/vicanso/elton v1.4.2\n\u001b[0m\u001b[91mgo: downloading gopkg.in/natefinch/lumberjack.v2 v2.0.0\ngo: downloading github.com/dgraph-io/badger/v3 v3.2103.0\n\u001b[0m\u001b[91mgo: downloading github.com/go-redis/redis/v8 v8.11.0\n\u001b[0m\u001b[91mgo: downloading github.com/vicanso/hes v0.3.9\ngo: downloading go.mongodb.org/mongo-driver v1.5.3\n\u001b[0m\u001b[91mgo: downloading github.com/dustin/go-humanize v1.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/vicanso/elton-jwt v1.2.1\n\u001b[0m\u001b[91mgo: downloading github.com/coreos/etcd v3.3.25+incompatible\n\u001b[0m\u001b[91mgo: downloading github.com/vicanso/upstream v0.2.0\n\u001b[0m\u001b[91mgo: downloading golang.org/x/net v0.0.0-20210614182718-04defd469f4e\n\u001b[0m\u001b[91mgo: downloading gopkg.in/yaml.v2 v2.4.0\n\u001b[0m\u001b[91mgo: downloading github.com/fsnotify/fsnotify v1.4.9\n\u001b[0m\u001b[91mgo: downloading github.com/go-playground/validator/v10 v10.6.1\n\u001b[0m\u001b[91mgo: downloading golang.org/x/sys v0.0.0-20210423082822-04245dca01da\n\u001b[0m\u001b[91mgo: downloading github.com/spf13/pflag v1.0.5\n\u001b[0m\u001b[91mgo: downloading go.uber.org/multierr v1.6.0\n\u001b[0m\u001b[91mgo: downloading github.com/dgrijalva/jwt-go v3.2.0+incompatible\n\u001b[0m\u001b[91mgo: downloading golang.org/x/text v0.3.6\ngo: downloading github.com/leodido/go-urn v1.2.0\ngo: downloading golang.org/x/crypto v0.0.0-20200622213623-75b288015ac9\n\u001b[0m\u001b[91mgo: downloading github.com/go-playground/universal-translator v0.17.0\n\u001b[0m\u001b[91mgo: downloading github.com/vicanso/keygrip v1.2.1\ngo: downloading github.com/vicanso/intranet-ip v0.0.1\n\u001b[0m\u001b[91mgo: downloading github.com/tidwall/gjson v1.8.1\n\u001b[0m\u001b[91mgo: downloading github.com/dgryski/go-rendezvous v0.0.0-20200823014737-9f7001d12a5f\ngo: downloading github.com/cespare/xxhash v1.1.0\n\u001b[0m\u001b[91mgo: downloading github.com/tklauser/go-sysconf v0.3.4\n\u001b[0m\u001b[91mgo: downloading github.com/go-playground/locales v0.13.0\n\u001b[0m\u001b[91mgo: downloading github.com/cespare/xxhash/v2 v2.1.1\n\u001b[0m\u001b[91mgo: downloading github.com/tidwall/pretty v1.1.0\ngo: downloading github.com/tidwall/match v1.0.3\n\u001b[0m\u001b[91mgo: downloading github.com/tklauser/numcpus v0.2.1\n\u001b[0m\u001b[91mgo: downloading go.opencensus.io v0.22.5\ngo: downloading github.com/dgraph-io/ristretto v0.0.4-0.20210309073149-3836124cdc5a\ngo: downloading github.com/golang/protobuf v1.4.2\n\u001b[0m\u001b[91mgo: downloading github.com/pkg/errors v0.9.1\n\u001b[0m\u001b[91mgo: downloading github.com/google/flatbuffers v1.12.0\ngo: downloading github.com/gogo/protobuf v1.3.2\n\u001b[0m\u001b[91mgo: downloading google.golang.org/protobuf v1.23.0\n\u001b[0m\u001b[91mgo: downloading google.golang.org/grpc v1.26.0\n\u001b[0m\u001b[91mgo: downloading github.com/coreos/pkg v0.0.0-20180928190104-399ea9e2e55f\ngo: downloading github.com/google/uuid v1.2.0\n\u001b[0m\u001b[91mgo: downloading github.com/coreos/go-semver v0.3.0\n\u001b[0m\u001b[91mgo: downloading google.golang.org/genproto v0.0.0-20191108220845-16a3f7862a1a\n\u001b[0m\u001b[91mgo: downloading github.com/coreos/go-systemd v0.0.0-20190321100706-95778dfbb74e\n\u001b[0m\u001b[91mgo: downloading github.com/youmark/pkcs8 v0.0.0-20181117223130-1be2e3e5546d\n\u001b[0m\u001b[91mgo: downloading github.com/go-stack/stack v1.8.0\n\u001b[0m\u001b[91mgo: downloading github.com/aws/aws-sdk-go v1.34.28\n\u001b[0m\u001b[91mgo: downloading github.com/xdg-go/scram v1.0.2\n\u001b[0m\u001b[91mgo: downloading github.com/xdg-go/stringprep v1.0.2\n\u001b[0m\u001b[91mgo: downloading golang.org/x/sync v0.0.0-20201020160332-67f06af15bc9\n\u001b[0m\u001b[91mgo: downloading github.com/xdg-go/pbkdf2 v1.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/jmespath/go-jmespath v0.4.0\n\u001b[0mRemoving intermediate container 93c603351f4f\n ---> ac8e09f59836\nStep 4/11 : FROM alpine:3.13\n ---> 6b5c5e00213a\nStep 5/11 : COPY --from=builder /pike/pike /usr/local/bin/pike\n ---> a791dc9d345e\nStep 6/11 : COPY --from=builder /pike/entrypoint.sh /usr/local/bin/entrypoint.sh\n ---> dc99d41f82ad\nStep 7/11 : RUN addgroup -g 1000 pike   && adduser -u 1000 -G pike -s /bin/sh -D pike   && chmod +x /usr/local/bin/entrypoint.sh   && apk add --no-cache ca-certificates\n ---> Running in 055a346ead1a\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.13/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.13/community/x86_64/APKINDEX.tar.gz\n(1/1) Installing ca-certificates (20220614-r0)\nExecuting busybox-1.32.1-r9.trigger\nExecuting ca-certificates-20220614-r0.trigger\nOK: 6 MiB in 15 packages\nRemoving intermediate container 055a346ead1a\n ---> fa1d4769482d\nStep 8/11 : USER pike\n ---> Running in 8b5e447e6ea3\nRemoving intermediate container 8b5e447e6ea3\n ---> 92c7900661d1\nStep 9/11 : WORKDIR /home/pike\n ---> Running in 420e23ef089d\nRemoving intermediate container 420e23ef089d\n ---> de1f827a8366\nStep 10/11 : CMD [\"pike\"]\n ---> Running in d7d483d451e9\nRemoving intermediate container d7d483d451e9\n ---> d4207372d50d\nStep 11/11 : ENTRYPOINT [\"entrypoint.sh\"]\n ---> Running in c004126d8259\nRemoving intermediate container c004126d8259\n ---> c56a3d3deb19\nSuccessfully built c56a3d3deb19\nSuccessfully tagged pike:latest\n","stderr":"","imageSize":47301489},"repair":{"startTime":1673059751115,"endTime":1673059751186,"violations":[{"name":"apkAddUseNoCache","position":{"start":5,"end":5,"columnStart":5,"columnEnd":21}}],"repairedDockerfile":"FROM golang:1.16-alpine as builder\n\nCOPY ./ /pike\n\nRUN apk update \\\n  && apk add --no-cache git make \\\n  && cd /pike \\\n  && env \\\n  && make cp-asset \\\n  && CGO_ENABLED=0 make build\n\nFROM alpine:3.13\n\nCOPY --from=builder /pike/pike /usr/local/bin/pike\nCOPY --from=builder /pike/entrypoint.sh /usr/local/bin/entrypoint.sh\n\nRUN addgroup -g 1000 pike \\\n  && adduser -u 1000 -G pike -s /bin/sh -D pike \\\n  && chmod +x /usr/local/bin/entrypoint.sh \\\n  && apk add --no-cache ca-certificates\n\n\nUSER pike\n\nWORKDIR /home/pike\n\nCMD [\"pike\"]\n\nENTRYPOINT [\"entrypoint.sh\"]\n"},"repairedBuild":{"startTime":1673059751369,"endTime":1673059797684,"error":null,"stdout":"Sending build context to Docker daemon  9.478MB\r\r\nStep 1/11 : FROM golang:1.16-alpine as builder\n ---> 7642119cd161\nStep 2/11 : COPY ./ /pike\n ---> 9bdc2384a05a\nStep 3/11 : RUN apk update   && apk add --no-cache git make   && cd /pike   && env   && make cp-asset   && CGO_ENABLED=0 make build\n ---> Running in b59103bf1748\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/community/x86_64/APKINDEX.tar.gz\nv3.15.6-242-g9cfdeb1de4 [https://dl-cdn.alpinelinux.org/alpine/v3.15/main]\nv3.15.6-237-g9ae8855cb5 [https://dl-cdn.alpinelinux.org/alpine/v3.15/community]\nOK: 15865 distinct packages available\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/community/x86_64/APKINDEX.tar.gz\n(1/7) Installing brotli-libs (1.0.9-r5)\n(2/7) Installing nghttp2-libs (1.46.0-r0)\n(3/7) Installing libcurl (7.80.0-r5)\n(4/7) Installing expat (2.5.0-r0)\n(5/7) Installing pcre2 (10.40-r0)\n(6/7) Installing git (2.34.5-r0)\n(7/7) Installing make (4.3-r0)\nExecuting busybox-1.34.1-r3.trigger\nOK: 19 MiB in 22 packages\nHOSTNAME=b59103bf1748\nSHLVL=1\nHOME=/root\nOLDPWD=/go\nPATH=/go/bin:/usr/local/go/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\nGOPATH=/go\nPWD=/pike\nGOLANG_VERSION=1.16.15\nrm -rf asset/web && cp -rf web asset/web\ngo build -ldflags \"-X main.date=`date -u +%Y%m%d.%H%M%S` -X main.commit=`git rev-parse --short HEAD`\" -o pike\n\u001b[91mgo: downloading github.com/spf13/cobra v1.1.3\n\u001b[0m\u001b[91mgo: downloading go.uber.org/automaxprocs v1.4.0\n\u001b[0m\u001b[91mgo: downloading go.uber.org/zap v1.18.1\n\u001b[0m\u001b[91mgo: downloading github.com/robfig/cron/v3 v3.0.1\n\u001b[0m\u001b[91mgo: downloading gopkg.in/natefinch/lumberjack.v2 v2.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/vicanso/hes v0.3.9\n\u001b[0m\u001b[91mgo: downloading github.com/vicanso/upstream v0.2.0\n\u001b[0m\u001b[91mgo: downloading github.com/vicanso/elton v1.4.2\n\u001b[0m\u001b[91mgo: downloading go.uber.org/atomic v1.8.0\n\u001b[0m\u001b[91mgo: downloading github.com/dgraph-io/badger/v3 v3.2103.0\n\u001b[0m\u001b[91mgo: downloading golang.org/x/net v0.0.0-20210614182718-04defd469f4e\n\u001b[0m\u001b[91mgo: downloading github.com/go-redis/redis/v8 v8.11.0\ngo: downloading go.mongodb.org/mongo-driver v1.5.3\n\u001b[0m\u001b[91mgo: downloading github.com/dustin/go-humanize v1.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/vicanso/elton-jwt v1.2.1\n\u001b[0m\u001b[91mgo: downloading gopkg.in/yaml.v2 v2.4.0\n\u001b[0m\u001b[91mgo: downloading github.com/fsnotify/fsnotify v1.4.9\ngo: downloading github.com/coreos/etcd v3.3.25+incompatible\n\u001b[0m\u001b[91mgo: downloading github.com/golang/groupcache v0.0.0-20210331224755-41bb18bfe9da\n\u001b[0m\u001b[91mgo: downloading github.com/go-playground/validator/v10 v10.6.1\n\u001b[0m\u001b[91mgo: downloading github.com/shirou/gopsutil/v3 v3.21.5\n\u001b[0m\u001b[91mgo: downloading github.com/andybalholm/brotli v1.0.3\n\u001b[0m\u001b[91mgo: downloading github.com/golang/snappy v0.0.3\ngo: downloading github.com/klauspost/compress v1.13.1\n\u001b[0m\u001b[91mgo: downloading github.com/pierrec/lz4 v2.6.1+incompatible\n\u001b[0m\u001b[91mgo: downloading github.com/dgrijalva/jwt-go v3.2.0+incompatible\n\u001b[0m\u001b[91mgo: downloading golang.org/x/sys v0.0.0-20210423082822-04245dca01da\n\u001b[0m\u001b[91mgo: downloading github.com/vicanso/keygrip v1.2.1\ngo: downloading github.com/vicanso/intranet-ip v0.0.1\n\u001b[0m\u001b[91mgo: downloading github.com/cespare/xxhash v1.1.0\n\u001b[0m\u001b[91mgo: downloading github.com/dgryski/go-rendezvous v0.0.0-20200823014737-9f7001d12a5f\n\u001b[0m\u001b[91mgo: downloading github.com/spf13/pflag v1.0.5\n\u001b[0m\u001b[91mgo: downloading github.com/tidwall/gjson v1.8.1\n\u001b[0m\u001b[91mgo: downloading github.com/go-playground/universal-translator v0.17.0\ngo: downloading github.com/leodido/go-urn v1.2.0\ngo: downloading golang.org/x/crypto v0.0.0-20200622213623-75b288015ac9\ngo: downloading golang.org/x/text v0.3.6\n\u001b[0m\u001b[91mgo: downloading go.uber.org/multierr v1.6.0\n\u001b[0m\u001b[91mgo: downloading github.com/tklauser/go-sysconf v0.3.4\n\u001b[0m\u001b[91mgo: downloading github.com/tidwall/pretty v1.1.0\ngo: downloading github.com/tidwall/match v1.0.3\n\u001b[0m\u001b[91mgo: downloading github.com/cespare/xxhash/v2 v2.1.1\n\u001b[0m\u001b[91mgo: downloading github.com/go-playground/locales v0.13.0\n\u001b[0m\u001b[91mgo: downloading github.com/tklauser/numcpus v0.2.1\n\u001b[0m\u001b[91mgo: downloading go.opencensus.io v0.22.5\n\u001b[0m\u001b[91mgo: downloading github.com/pkg/errors v0.9.1\ngo: downloading github.com/dgraph-io/ristretto v0.0.4-0.20210309073149-3836124cdc5a\n\u001b[0m\u001b[91mgo: downloading github.com/golang/protobuf v1.4.2\n\u001b[0m\u001b[91mgo: downloading github.com/gogo/protobuf v1.3.2\n\u001b[0m\u001b[91mgo: downloading github.com/google/flatbuffers v1.12.0\n\u001b[0m\u001b[91mgo: downloading google.golang.org/protobuf v1.23.0\n\u001b[0m\u001b[91mgo: downloading google.golang.org/grpc v1.26.0\ngo: downloading github.com/coreos/pkg v0.0.0-20180928190104-399ea9e2e55f\n\u001b[0m\u001b[91mgo: downloading github.com/google/uuid v1.2.0\n\u001b[0m\u001b[91mgo: downloading github.com/coreos/go-semver v0.3.0\n\u001b[0m\u001b[91mgo: downloading github.com/coreos/go-systemd v0.0.0-20190321100706-95778dfbb74e\n\u001b[0m\u001b[91mgo: downloading google.golang.org/genproto v0.0.0-20191108220845-16a3f7862a1a\n\u001b[0m\u001b[91mgo: downloading github.com/youmark/pkcs8 v0.0.0-20181117223130-1be2e3e5546d\n\u001b[0m\u001b[91mgo: downloading github.com/go-stack/stack v1.8.0\n\u001b[0m\u001b[91mgo: downloading github.com/aws/aws-sdk-go v1.34.28\n\u001b[0m\u001b[91mgo: downloading github.com/xdg-go/scram v1.0.2\n\u001b[0m\u001b[91mgo: downloading github.com/xdg-go/stringprep v1.0.2\n\u001b[0m\u001b[91mgo: downloading golang.org/x/sync v0.0.0-20201020160332-67f06af15bc9\n\u001b[0m\u001b[91mgo: downloading github.com/xdg-go/pbkdf2 v1.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/jmespath/go-jmespath v0.4.0\n\u001b[0mRemoving intermediate container b59103bf1748\n ---> 9b49f72473c7\nStep 4/11 : FROM alpine:3.13\n ---> 6b5c5e00213a\nStep 5/11 : COPY --from=builder /pike/pike /usr/local/bin/pike\n ---> ce03ae3c92bd\nStep 6/11 : COPY --from=builder /pike/entrypoint.sh /usr/local/bin/entrypoint.sh\n ---> 267fb1314b5a\nStep 7/11 : RUN addgroup -g 1000 pike   && adduser -u 1000 -G pike -s /bin/sh -D pike   && chmod +x /usr/local/bin/entrypoint.sh   && apk add --no-cache ca-certificates\n ---> Running in 935aaf0a3baa\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.13/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.13/community/x86_64/APKINDEX.tar.gz\n(1/1) Installing ca-certificates (20220614-r0)\nExecuting busybox-1.32.1-r9.trigger\nExecuting ca-certificates-20220614-r0.trigger\nOK: 6 MiB in 15 packages\nRemoving intermediate container 935aaf0a3baa\n ---> 7d470d2c23ee\nStep 8/11 : USER pike\n ---> Running in f00d37b263a6\nRemoving intermediate container f00d37b263a6\n ---> 9eeeee2f0bdc\nStep 9/11 : WORKDIR /home/pike\n ---> Running in d8250a2ab8fe\nRemoving intermediate container d8250a2ab8fe\n ---> 8aab222d9e5f\nStep 10/11 : CMD [\"pike\"]\n ---> Running in 2e304485c6b4\nRemoving intermediate container 2e304485c6b4\n ---> 0faef4639893\nStep 11/11 : ENTRYPOINT [\"entrypoint.sh\"]\n ---> Running in 2bcd74f88c9e\nRemoving intermediate container 2bcd74f88c9e\n ---> 28ed7bea4144\nSuccessfully built 28ed7bea4144\nSuccessfully tagged pike:latest\n","stderr":"","imageSize":47301489}}