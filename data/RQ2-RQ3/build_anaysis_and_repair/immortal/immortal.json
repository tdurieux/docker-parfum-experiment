{"repository":"https://github.com/immortal/immortal","dockerfilePath":"Dockerfile","startTime":1672558639953,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/immortal/immortal'...\n","error":null,"commit":"e33a880a2e6f5fb2cb09e6809534d5b87a622855"},"originalBuild":{"startTimestamp":1672558640751,"endTimestamp":1672559165544,"error":null,"stdout":"Sending build context to Docker daemon  381.4kB\r\r\nStep 1/33 : FROM golang:latest as builder\n ---> 6650307efe4a\nStep 2/33 : RUN groupadd -r toor && useradd --create-home --no-log-init -r -g toor toor\n ---> Running in 19b93542ff08\nRemoving intermediate container 19b93542ff08\n ---> 0032e2c14c12\nStep 3/33 : WORKDIR /go/src/github.com/immortal/immortal\n ---> Running in eb0483a3e118\nRemoving intermediate container eb0483a3e118\n ---> d6d037966a71\nStep 4/33 : COPY . .\n ---> ccca01640d30\nStep 5/33 : RUN chown -R toor:toor /go\n ---> Running in 6d71df395a1a\nRemoving intermediate container 6d71df395a1a\n ---> 16460ab5bb33\nStep 6/33 : ARG VERSION=0.0.0\n ---> Running in 936b8bd41e49\nRemoving intermediate container 936b8bd41e49\n ---> 965090e2dbdc\nStep 7/33 : ENV VERSION=\"${VERSION}\"\n ---> Running in e1540cbdd278\nRemoving intermediate container e1540cbdd278\n ---> 950c9311291b\nStep 8/33 : USER toor\n ---> Running in 83e44d317a32\nRemoving intermediate container 83e44d317a32\n ---> 5f3578103118\nStep 9/33 : RUN go test -race -v\n ---> Running in 499a69a54eac\n\u001b[91mgo: downloading github.com/go-yaml/yaml v2.1.0+incompatible\n\u001b[0m\u001b[91mgo: downloading github.com/immortal/logrotate v0.0.0-20180922190115-5a04431dbafb\n\u001b[0m\u001b[91mgo: downloading github.com/immortal/natcasesort v0.0.0-20180922190600-53ad4be8bc1a\n\u001b[0m\u001b[91mgo: downloading github.com/immortal/xtime v0.0.0-20170317233522-fb1aca1146ea\n\u001b[0m\u001b[91mgo: downloading github.com/nbari/violetear v0.0.0-20210524103009-ce83b52538c9\n\u001b[0m\u001b[91mgo: downloading github.com/immortal/multiwriter v0.0.0-20180922214543-2e0dd11a3549\n\u001b[0m=== RUN   TestColorRed\n--- PASS: TestColorRed (0.00s)\n=== RUN   TestColorGreen\n--- PASS: TestColorGreen (0.00s)\n=== RUN   TestColorYellow\n--- PASS: TestColorYellow (0.00s)\n=== RUN   TestGetStatus\n--- PASS: TestGetStatus (0.00s)\n=== RUN   TestSendSignal\n--- PASS: TestSendSignal (0.00s)\n=== RUN   TestFindServices\n--- PASS: TestFindServices (0.00s)\n=== RUN   TestFindServicesNonexistent\n--- PASS: TestFindServicesNonexistent (0.00s)\n=== RUN   TestPurgeServices\n--- PASS: TestPurgeServices (0.00s)\n=== RUN   TestRun\n--- PASS: TestRun (0.00s)\n=== RUN   TestDaemonNewCtl\n--- PASS: TestDaemonNewCtl (0.00s)\n=== RUN   TestDaemonNewCtlErr\n--- PASS: TestDaemonNewCtlErr (0.00s)\n=== RUN   TestDaemonNewCtlCwd\n--- PASS: TestDaemonNewCtlCwd (0.00s)\n=== RUN   TestBadUid\n--- PASS: TestBadUid (0.00s)\n=== RUN   TestBadGid\n--- PASS: TestBadGid (0.00s)\n=== RUN   TestBadPid\n--- PASS: TestBadPid (0.00s)\n=== RUN   TestUser\n--- PASS: TestUser (0.00s)\n=== RUN   TestBadWritePidParent\n--- PASS: TestBadWritePidParent (0.00s)\n=== RUN   TestBadWritePidChild\n--- PASS: TestBadWritePidChild (0.00s)\n=== RUN   TestSignalsUDOT\n    daemon_test.go:307: testing k\n    daemon_test.go:333: testing d\n    daemon_test.go:350: testing up\n    daemon_test.go:363: testing once\n    daemon_test.go:389: testing u\n    daemon_test.go:403: testing t\n    daemon_test.go:451: testing logfile\n--- PASS: TestSignalsUDOT (1.03s)\n=== RUN   TestDaemonNewEnvHOME\n--- PASS: TestDaemonNewEnvHOME (0.00s)\n=== RUN   TestDaemonConfigFile\n--- PASS: TestDaemonConfigFile (0.00s)\n=== RUN   TestDaemonFailSdir\n--- PASS: TestDaemonFailSdir (0.00s)\n=== RUN   TestFork\n--- PASS: TestFork (0.00s)\n=== RUN   TestForkErr\n--- PASS: TestForkErr (0.00s)\n=== RUN   TestAbsSince\n--- PASS: TestAbsSince (0.00s)\n=== RUN   TestMd5sumNonexistent\n--- PASS: TestMd5sumNonexistent (0.00s)\n=== RUN   TestMd5sum\n--- PASS: TestMd5sum (0.00s)\n=== RUN   TestInSlice\n--- PASS: TestInSlice (0.00s)\n=== RUN   TestGetUserSdir\n--- PASS: TestGetUserSdir (0.00s)\n=== RUN   TestIsDir\n--- PASS: TestIsDir (0.00s)\n=== RUN   TestIsFile\n--- PASS: TestIsFile (0.00s)\n=== RUN   TestNewStderrLogger\n--- PASS: TestNewStderrLogger (0.00s)\n=== RUN   TestNewStderrLoggerFileNone\n--- PASS: TestNewStderrLoggerFileNone (0.00s)\n=== RUN   TestNewLoggerFileNone\n--- PASS: TestNewLoggerFileNone (0.00s)\n=== RUN   TestNewLoggerBadLogger\n--- PASS: TestNewLoggerBadLogger (0.00s)\n=== RUN   TestNewLoggerLogger\n--- PASS: TestNewLoggerLogger (0.00s)\n=== RUN   TestNewLoggerKilled\n--- PASS: TestNewLoggerKilled (1.00s)\n=== RUN   TestNewLoggerRetry\n--- PASS: TestNewLoggerRetry (2.44s)\n=== RUN   TestLogWriterLog\n--- PASS: TestLogWriterLog (2.01s)\n=== RUN   TestParseHelp\n--- PASS: TestParseHelp (0.00s)\n=== RUN   TestParseDefault\n--- PASS: TestParseDefault (0.00s)\n=== RUN   TestParseFlags\n--- PASS: TestParseFlags (0.00s)\n=== RUN   TestParseArgsHelp\n--- PASS: TestParseArgsHelp (0.00s)\n=== RUN   TestParseArgsVersion\n--- PASS: TestParseArgsVersion (0.00s)\n=== RUN   TestParseArgsVersion2\n--- PASS: TestParseArgsVersion2 (0.00s)\n=== RUN   TestParseArgsCtl\n--- PASS: TestParseArgsCtl (0.00s)\n=== RUN   TestParseArgsNoargs\n--- PASS: TestParseArgsNoargs (0.00s)\n=== RUN   TestParseArgsTable\ncmd: sleep 30\nlog:\n  file: /tmp/foo.log\nretries: -1\n--- PASS: TestParseArgsTable (0.00s)\n=== RUN   TestParseYamlCmd\n--- PASS: TestParseYamlCmd (0.00s)\n=== RUN   TestParseYamlCwd\n--- PASS: TestParseYamlCwd (0.01s)\n=== RUN   TestParseYamlUsrErr\n--- PASS: TestParseYamlUsrErr (0.02s)\n=== RUN   TestParseYamlErr\n--- PASS: TestParseYamlErr (0.12s)\n=== RUN   TestParseParseYmlioutil\n--- PASS: TestParseParseYmlioutil (0.00s)\n=== RUN   TestParseYamlRequire\n--- PASS: TestParseYamlRequire (0.01s)\n=== RUN   TestParseYamlRequireEmpty\n--- PASS: TestParseYamlRequireEmpty (0.00s)\n=== RUN   TestParseYamlRequireCmd\n--- PASS: TestParseYamlRequireCmd (0.01s)\n=== RUN   TestParseYamlRequireEmptyCmd\n--- PASS: TestParseYamlRequireEmptyCmd (0.00s)\n=== RUN   TestParseYamlRetriesDefaults\n--- PASS: TestParseYamlRetriesDefaults (0.00s)\n=== RUN   TestParseYamlCustomRetries0\n--- PASS: TestParseYamlCustomRetries0 (0.00s)\n=== RUN   TestParseYamlCustomRetries10\n--- PASS: TestParseYamlCustomRetries10 (0.00s)\n=== RUN   TestParseBadYaml\n--- PASS: TestParseBadYaml (0.00s)\n=== RUN   TestParseArgsConfigfile\n--- PASS: TestParseArgsConfigfile (0.00s)\n=== RUN   TestParseArgsCheckConfig\n--- PASS: TestParseArgsCheckConfig (0.00s)\n=== RUN   TestProcessStart\n--- PASS: TestProcessStart (0.00s)\n=== RUN   TestProcessLogStderrStdout\n    process_test.go:102: verifying stdout\n    process_test.go:110: verifying stderr\n--- PASS: TestProcessLogStderrStdout (0.03s)\n=== RUN   TestProcessLogStderr\n    process_test.go:185: verifying stderr\n--- PASS: TestProcessLogStderr (0.03s)\n=== RUN   TestNewScanDir\n--- PASS: TestNewScanDir (0.00s)\n=== RUN   TestNewScanDirNonexistent\n--- PASS: TestNewScanDirNonexistent (0.00s)\n=== RUN   TestScanner\n--- PASS: TestScanner (2.01s)\n=== RUN   TestSignalsFiFo\n=== RUN   TestSignalsFiFo/a\n=== RUN   TestSignalsFiFo/alrm\n=== RUN   TestSignalsFiFo/c\n=== RUN   TestSignalsFiFo/cont\n=== RUN   TestSignalsFiFo/h\n=== RUN   TestSignalsFiFo/hup\n=== RUN   TestSignalsFiFo/i\n=== RUN   TestSignalsFiFo/int\n=== RUN   TestSignalsFiFo/q\n=== RUN   TestSignalsFiFo/quit\n=== RUN   TestSignalsFiFo/in\n=== RUN   TestSignalsFiFo/TTIN\n=== RUN   TestSignalsFiFo/ou\n=== RUN   TestSignalsFiFo/TTOU\n=== RUN   TestSignalsFiFo/1\n=== RUN   TestSignalsFiFo/usr1\n=== RUN   TestSignalsFiFo/2\n=== RUN   TestSignalsFiFo/usr2\n=== RUN   TestSignalsFiFo/w\n=== RUN   TestSignalsFiFo/winch\n=== RUN   TestSignalsFiFo/a#01\n=== RUN   TestSignalsFiFo/alrm#01\n=== RUN   TestSignalsFiFo/c#01\n=== RUN   TestSignalsFiFo/cont#01\n=== RUN   TestSignalsFiFo/h#01\n=== RUN   TestSignalsFiFo/hup#01\n=== RUN   TestSignalsFiFo/i#01\n=== RUN   TestSignalsFiFo/int#01\n=== RUN   TestSignalsFiFo/q#01\n=== RUN   TestSignalsFiFo/quit#01\n=== RUN   TestSignalsFiFo/in#01\n=== RUN   TestSignalsFiFo/TTIN#01\n=== RUN   TestSignalsFiFo/ou#01\n=== RUN   TestSignalsFiFo/TTOU#01\n=== RUN   TestSignalsFiFo/1#01\n=== RUN   TestSignalsFiFo/usr1#01\n=== RUN   TestSignalsFiFo/2#01\n=== RUN   TestSignalsFiFo/usr2#01\n=== RUN   TestSignalsFiFo/w#01\n=== RUN   TestSignalsFiFo/winch#01\n--- PASS: TestSignalsFiFo (1.11s)\n    --- PASS: TestSignalsFiFo/a (0.01s)\n    --- PASS: TestSignalsFiFo/alrm (0.00s)\n    --- PASS: TestSignalsFiFo/c (0.00s)\n    --- PASS: TestSignalsFiFo/cont (0.00s)\n    --- PASS: TestSignalsFiFo/h (0.00s)\n    --- PASS: TestSignalsFiFo/hup (0.00s)\n    --- PASS: TestSignalsFiFo/i (0.00s)\n    --- PASS: TestSignalsFiFo/int (0.00s)\n    --- PASS: TestSignalsFiFo/q (0.00s)\n    --- PASS: TestSignalsFiFo/quit (0.00s)\n    --- PASS: TestSignalsFiFo/in (0.00s)\n    --- PASS: TestSignalsFiFo/TTIN (0.00s)\n    --- PASS: TestSignalsFiFo/ou (0.00s)\n    --- PASS: TestSignalsFiFo/TTOU (0.00s)\n    --- PASS: TestSignalsFiFo/1 (0.00s)\n    --- PASS: TestSignalsFiFo/usr1 (0.00s)\n    --- PASS: TestSignalsFiFo/2 (0.00s)\n    --- PASS: TestSignalsFiFo/usr2 (0.00s)\n    --- PASS: TestSignalsFiFo/w (0.00s)\n    --- PASS: TestSignalsFiFo/winch (0.00s)\n    --- PASS: TestSignalsFiFo/a#01 (0.00s)\n    --- PASS: TestSignalsFiFo/alrm#01 (0.00s)\n    --- PASS: TestSignalsFiFo/c#01 (0.00s)\n    --- PASS: TestSignalsFiFo/cont#01 (0.00s)\n    --- PASS: TestSignalsFiFo/h#01 (0.00s)\n    --- PASS: TestSignalsFiFo/hup#01 (0.05s)\n    --- PASS: TestSignalsFiFo/i#01 (0.00s)\n    --- PASS: TestSignalsFiFo/int#01 (0.00s)\n    --- PASS: TestSignalsFiFo/q#01 (0.00s)\n    --- PASS: TestSignalsFiFo/quit#01 (0.00s)\n    --- PASS: TestSignalsFiFo/in#01 (0.00s)\n    --- PASS: TestSignalsFiFo/TTIN#01 (0.00s)\n    --- PASS: TestSignalsFiFo/ou#01 (0.00s)\n    --- PASS: TestSignalsFiFo/TTOU#01 (0.00s)\n    --- PASS: TestSignalsFiFo/1#01 (0.00s)\n    --- PASS: TestSignalsFiFo/usr1#01 (0.00s)\n    --- PASS: TestSignalsFiFo/2#01 (0.00s)\n    --- PASS: TestSignalsFiFo/usr2#01 (0.00s)\n    --- PASS: TestSignalsFiFo/w#01 (0.00s)\n    --- PASS: TestSignalsFiFo/winch#01 (0.00s)\n=== RUN   TestSocketListenError\n--- PASS: TestSocketListenError (0.00s)\n=== RUN   TestSupervise\n--- PASS: TestSupervise (4.02s)\n=== RUN   TestSuperviseWait\n--- PASS: TestSuperviseWait (3.07s)\n=== RUN   TestRetries\n=== RUN   TestRetries/retry_0\n=== RUN   TestRetries/retry_1\n=== RUN   TestRetries/retry_2\n--- PASS: TestRetries (3.68s)\n    --- PASS: TestRetries/retry_0 (0.21s)\n    --- PASS: TestRetries/retry_1 (1.22s)\n    --- PASS: TestRetries/retry_2 (2.22s)\n=== RUN   TestWatchPidGetpid\n--- PASS: TestWatchPidGetpid (0.00s)\n=== RUN   TestWatchPidGetpidKill\n--- PASS: TestWatchPidGetpidKill (0.00s)\nPASS\nok  \tgithub.com/immortal/immortal\t20.695s\nRemoving intermediate container 499a69a54eac\n ---> 2ca33e8187c4\nStep 10/33 : USER root\n ---> Running in 784775dd17ff\nRemoving intermediate container 784775dd17ff\n ---> 7c415fe7fe45\nStep 11/33 : RUN make build-linux\n ---> Running in 083558f25b6c\nfor arch in 386 amd64 arm arm64 ppc64 ppc64le mips mipsle mips64 mips64le; do \\\n\tmkdir -p build/${arch}; \\\n\tGOOS=linux GOARCH=${arch} go build -ldflags \"-s -w -X main.version=0.24.4\" -o build/${arch}/immortal cmd/immortal/main.go; \\\n\tGOOS=linux GOARCH=${arch} go build -ldflags \"-s -w -X main.version=0.24.4\" -o build/${arch}/immortalctl cmd/immortalctl/main.go; \\\n\tGOOS=linux GOARCH=${arch} go build -ldflags \"-s -w -X main.version=0.24.4\" -o build/${arch}/immortaldir cmd/immortaldir/main.go; \\\ndone\nRemoving intermediate container 083558f25b6c\n ---> dd30307936c8\nStep 12/33 : RUN mv man /\n ---> Running in 05b133b27faa\nRemoving intermediate container 05b133b27faa\n ---> 09565d5692ce\nStep 13/33 : RUN mv build /\n ---> Running in e5e48b5d86d5\nRemoving intermediate container e5e48b5d86d5\n ---> 260494910280\nStep 14/33 : FROM ruby:2.3\n2.3: Pulling from library/ruby\ne79bb959ec00: Already exists\nd4b7902036fe: Already exists\n1b2a72d4e030: Already exists\nd54db43011fd: Already exists\n69d473365bb3: Pulling fs layer\n84ed2a0dc034: Pulling fs layer\n8952ca0665c5: Pulling fs layer\nef485f36c624: Pulling fs layer\nef485f36c624: Waiting\n84ed2a0dc034: Download complete\nef485f36c624: Download complete\n8952ca0665c5: Verifying Checksum\n8952ca0665c5: Download complete\n69d473365bb3: Verifying Checksum\n69d473365bb3: Download complete\n69d473365bb3: Pull complete\n84ed2a0dc034: Pull complete\n8952ca0665c5: Pull complete\nef485f36c624: Pull complete\nDigest: sha256:78cc821d95c48621e577b6b0d44c9d509f0f2a4e089b9fd0ca2ae86f274773a8\nStatus: Downloaded newer image for ruby:2.3\n ---> c0d23ebb3ed6\nStep 15/33 : RUN apt-get update && apt-get install -y --no-install-recommends -q build-essential ca-certificates git rpm\n ---> Running in 1ac2151ad061\nIgn:1 http://deb.debian.org/debian stretch InRelease\nGet:2 http://deb.debian.org/debian stretch-updates InRelease [93.6 kB]\nGet:3 http://security.debian.org/debian-security stretch/updates InRelease [59.1 kB]\nGet:4 http://deb.debian.org/debian stretch Release [118 kB]\nGet:5 http://deb.debian.org/debian stretch Release.gpg [3177 B]\nGet:6 http://security.debian.org/debian-security stretch/updates/main amd64 Packages [782 kB]\nGet:7 http://deb.debian.org/debian stretch/main amd64 Packages [7080 kB]\nFetched 8135 kB in 1s (4164 kB/s)\nReading package lists...\nReading package lists...\nBuilding dependency tree...\nReading state information...\nThe following additional packages will be installed:\n  debugedit dpkg-dev libarchive13 libdpkg-perl liblua5.2-0 libnspr4 libnss3\n  libpopt0 librpm3 librpmbuild3 librpmio3 librpmsign3 rpm-common rpm2cpio\nSuggested packages:\n  rpm-i18n debian-keyring gettext-base git-daemon-run | git-daemon-sysvinit\n  git-doc git-el git-email git-gui gitk gitweb git-arch git-cvs git-mediawiki\n  git-svn lrzip alien elfutils rpmlint rpm2html\nRecommended packages:\n  fakeroot libalgorithm-merge-perl less rsync libfile-fcntllock-perl\n  liblocale-gettext-perl\nThe following NEW packages will be installed:\n  build-essential debugedit dpkg-dev libarchive13 liblua5.2-0 libnspr4 libnss3\n  libpopt0 librpm3 librpmbuild3 librpmio3 librpmsign3 rpm rpm-common rpm2cpio\nThe following packages will be upgraded:\n  ca-certificates git libdpkg-perl\n3 upgraded, 15 newly installed, 0 to remove and 165 not upgraded.\nNeed to get 18.3 MB of archives.\nAfter this operation, 18.2 MB of additional disk space will be used.\nGet:1 http://deb.debian.org/debian stretch/main amd64 git amd64 1:2.11.0-3+deb9u7 [4170 kB]\nGet:2 http://security.debian.org/debian-security stretch/updates/main amd64 libdpkg-perl all 1.18.26 [1290 kB]\nGet:3 http://security.debian.org/debian-security stretch/updates/main amd64 dpkg-dev all 1.18.26 [1597 kB]\nGet:4 http://security.debian.org/debian-security stretch/updates/main amd64 ca-certificates all 20200601~deb9u2 [168 kB]\nGet:5 http://security.debian.org/debian-security stretch/updates/main amd64 libnss3 amd64 2:3.26.2-1.1+deb9u5 [1244 kB]\nGet:6 http://deb.debian.org/debian stretch/main amd64 libpopt0 amd64 1.16-10+b2 [49.4 kB]\nGet:7 http://deb.debian.org/debian stretch/main amd64 build-essential amd64 12.3 [7346 B]\nGet:8 http://deb.debian.org/debian stretch/main amd64 liblua5.2-0 amd64 5.2.4-1.1+b2 [110 kB]\nGet:9 http://deb.debian.org/debian stretch/main amd64 libnspr4 amd64 2:4.12-6 [117 kB]\nGet:10 http://security.debian.org/debian-security stretch/updates/main amd64 libarchive13 amd64 3.2.2-2+deb9u3 [295 kB]\nGet:11 http://deb.debian.org/debian stretch/main amd64 librpmio3 amd64 4.12.0.2+dfsg1-2 [1166 kB]\nGet:12 http://deb.debian.org/debian stretch/main amd64 debugedit amd64 4.12.0.2+dfsg1-2 [1114 kB]\nGet:13 http://deb.debian.org/debian stretch/main amd64 librpm3 amd64 4.12.0.2+dfsg1-2 [1255 kB]\nGet:14 http://deb.debian.org/debian stretch/main amd64 librpmbuild3 amd64 4.12.0.2+dfsg1-2 [1157 kB]\nGet:15 http://deb.debian.org/debian stretch/main amd64 librpmsign3 amd64 4.12.0.2+dfsg1-2 [1106 kB]\nGet:16 http://deb.debian.org/debian stretch/main amd64 rpm-common amd64 4.12.0.2+dfsg1-2 [1124 kB]\nGet:17 http://deb.debian.org/debian stretch/main amd64 rpm2cpio amd64 4.12.0.2+dfsg1-2 [1106 kB]\nGet:18 http://deb.debian.org/debian stretch/main amd64 rpm amd64 4.12.0.2+dfsg1-2 [1213 kB]\n\u001b[91mdebconf: delaying package configuration, since apt-utils is not installed\n\u001b[0mFetched 18.3 MB in 0s (51.5 MB/s)\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 29619 files and directories currently installed.)\r\nPreparing to unpack .../00-git_1%3a2.11.0-3+deb9u7_amd64.deb ...\r\nUnpacking git (1:2.11.0-3+deb9u7) over (1:2.11.0-3+deb9u4) ...\r\nSelecting previously unselected package libpopt0:amd64.\r\nPreparing to unpack .../01-libpopt0_1.16-10+b2_amd64.deb ...\r\nUnpacking libpopt0:amd64 (1.16-10+b2) ...\r\nPreparing to unpack .../02-libdpkg-perl_1.18.26_all.deb ...\r\nUnpacking libdpkg-perl (1.18.26) over (1.18.25) ...\r\nSelecting previously unselected package dpkg-dev.\r\nPreparing to unpack .../03-dpkg-dev_1.18.26_all.deb ...\r\nUnpacking dpkg-dev (1.18.26) ...\r\nSelecting previously unselected package build-essential.\r\nPreparing to unpack .../04-build-essential_12.3_amd64.deb ...\r\nUnpacking build-essential (12.3) ...\r\nPreparing to unpack .../05-ca-certificates_20200601~deb9u2_all.deb ...\r\nUnpacking ca-certificates (20200601~deb9u2) over (20161130+nmu1+deb9u1) ...\r\nSelecting previously unselected package liblua5.2-0:amd64.\r\nPreparing to unpack .../06-liblua5.2-0_5.2.4-1.1+b2_amd64.deb ...\r\nUnpacking liblua5.2-0:amd64 (5.2.4-1.1+b2) ...\r\nSelecting previously unselected package libnspr4:amd64.\r\nPreparing to unpack .../07-libnspr4_2%3a4.12-6_amd64.deb ...\r\nUnpacking libnspr4:amd64 (2:4.12-6) ...\r\nSelecting previously unselected package libnss3:amd64.\r\nPreparing to unpack .../08-libnss3_2%3a3.26.2-1.1+deb9u5_amd64.deb ...\r\nUnpacking libnss3:amd64 (2:3.26.2-1.1+deb9u5) ...\r\nSelecting previously unselected package librpmio3.\r\nPreparing to unpack .../09-librpmio3_4.12.0.2+dfsg1-2_amd64.deb ...\r\nUnpacking librpmio3 (4.12.0.2+dfsg1-2) ...\r\nSelecting previously unselected package debugedit.\r\nPreparing to unpack .../10-debugedit_4.12.0.2+dfsg1-2_amd64.deb ...\r\nUnpacking debugedit (4.12.0.2+dfsg1-2) ...\r\nSelecting previously unselected package libarchive13:amd64.\r\nPreparing to unpack .../11-libarchive13_3.2.2-2+deb9u3_amd64.deb ...\r\nUnpacking libarchive13:amd64 (3.2.2-2+deb9u3) ...\r\nSelecting previously unselected package librpm3.\r\nPreparing to unpack .../12-librpm3_4.12.0.2+dfsg1-2_amd64.deb ...\r\nUnpacking librpm3 (4.12.0.2+dfsg1-2) ...\r\nSelecting previously unselected package librpmbuild3.\r\nPreparing to unpack .../13-librpmbuild3_4.12.0.2+dfsg1-2_amd64.deb ...\r\nUnpacking librpmbuild3 (4.12.0.2+dfsg1-2) ...\r\nSelecting previously unselected package librpmsign3.\r\nPreparing to unpack .../14-librpmsign3_4.12.0.2+dfsg1-2_amd64.deb ...\r\nUnpacking librpmsign3 (4.12.0.2+dfsg1-2) ...\r\nSelecting previously unselected package rpm-common.\r\nPreparing to unpack .../15-rpm-common_4.12.0.2+dfsg1-2_amd64.deb ...\r\nUnpacking rpm-common (4.12.0.2+dfsg1-2) ...\r\nSelecting previously unselected package rpm2cpio.\r\nPreparing to unpack .../16-rpm2cpio_4.12.0.2+dfsg1-2_amd64.deb ...\r\nUnpacking rpm2cpio (4.12.0.2+dfsg1-2) ...\r\nSelecting previously unselected package rpm.\r\nPreparing to unpack .../17-rpm_4.12.0.2+dfsg1-2_amd64.deb ...\r\nUnpacking rpm (4.12.0.2+dfsg1-2) ...\r\nSetting up libpopt0:amd64 (1.16-10+b2) ...\r\nSetting up libarchive13:amd64 (3.2.2-2+deb9u3) ...\r\nSetting up libdpkg-perl (1.18.26) ...\r\nSetting up libnspr4:amd64 (2:4.12-6) ...\r\nSetting up dpkg-dev (1.18.26) ...\r\nProcessing triggers for libc-bin (2.24-11+deb9u4) ...\r\nSetting up liblua5.2-0:amd64 (5.2.4-1.1+b2) ...\r\nSetting up ca-certificates (20200601~deb9u2) ...\r\ndebconf: unable to initialize frontend: Dialog\r\ndebconf: (TERM is not set, so the dialog frontend is not usable.)\r\ndebconf: falling back to frontend: Readline\r\nUpdating certificates in /etc/ssl/certs...\r\n15 added, 29 removed; done.\r\nSetting up git (1:2.11.0-3+deb9u7) ...\r\nSetting up build-essential (12.3) ...\r\nSetting up libnss3:amd64 (2:3.26.2-1.1+deb9u5) ...\r\nSetting up librpmio3 (4.12.0.2+dfsg1-2) ...\r\nSetting up debugedit (4.12.0.2+dfsg1-2) ...\r\nSetting up librpm3 (4.12.0.2+dfsg1-2) ...\r\nSetting up rpm-common (4.12.0.2+dfsg1-2) ...\r\nSetting up librpmbuild3 (4.12.0.2+dfsg1-2) ...\r\nSetting up librpmsign3 (4.12.0.2+dfsg1-2) ...\r\nSetting up rpm2cpio (4.12.0.2+dfsg1-2) ...\r\nSetting up rpm (4.12.0.2+dfsg1-2) ...\r\nProcessing triggers for libc-bin (2.24-11+deb9u4) ...\r\nProcessing triggers for ca-certificates (20200601~deb9u2) ...\r\nUpdating certificates in /etc/ssl/certs...\r\n0 added, 0 removed; done.\r\nRunning hooks in /etc/ca-certificates/update.d...\r\ndone.\r\nRemoving intermediate container 1ac2151ad061\n ---> 20af90e0f8cd\nStep 16/33 : ARG VERSION=0.0.0\n ---> Running in fae36a92ad89\nRemoving intermediate container fae36a92ad89\n ---> 06d55ce46f56\nStep 17/33 : ENV VERSION=\"${VERSION}\"\n ---> Running in bc102602f37a\nRemoving intermediate container bc102602f37a\n ---> 6590ee00486b\nStep 18/33 : ENV GEM_HOME /usr/local/bundle\n ---> Running in 0f1a54567025\nRemoving intermediate container 0f1a54567025\n ---> 5466a0fe79d4\nStep 19/33 : ENV BUNDLE_PATH=\"$GEM_HOME\"     BUNDLE_BIN=\"$GEM_HOME/bin\"     BUNDLE_SILENCE_ROOT_WARNING=1     BUNDLE_APP_CONFIG=\"$GEM_HOME\"\n ---> Running in 4bda6524f82d\nRemoving intermediate container 4bda6524f82d\n ---> 61859c321caa\nStep 20/33 : ENV PATH $BUNDLE_BIN:$PATH\n ---> Running in cadb2912e692\nRemoving intermediate container cadb2912e692\n ---> 397b8a9db13a\nStep 21/33 : RUN gem install --quiet --no-document fpm\n ---> Running in 126f6c4cfc0e\nSuccessfully installed cabin-0.9.0\nSuccessfully installed backports-3.23.0\nSuccessfully installed arr-pm-0.0.12\nSuccessfully installed clamp-1.0.1\nSuccessfully installed dotenv-2.8.1\nSuccessfully installed insist-1.0.0\nSuccessfully installed mustache-0.99.8\nSuccessfully installed stud-0.0.23\nSuccessfully installed pleaserun-0.0.32\nSuccessfully installed rexml-3.2.5\nSuccessfully installed fpm-1.15.0\n11 gems installed\nRemoving intermediate container 126f6c4cfc0e\n ---> f7c4d6959367\nStep 22/33 : RUN gem install --quiet --no-document package_cloud\n ---> Running in 5c2e2457ffee\nSuccessfully installed thor-1.2.1\nSuccessfully installed highline-2.0.3\nSuccessfully installed netrc-0.11.0\nSuccessfully installed mime-types-data-3.2022.0105\nSuccessfully installed mime-types-3.4.1\nBuilding native extensions. This could take a while...\nSuccessfully installed unf_ext-0.0.8.2\nSuccessfully installed unf-0.1.4\nSuccessfully installed domain_name-0.5.20190701\nSuccessfully installed http-cookie-1.0.5\nSuccessfully installed http-accept-1.7.0\nSuccessfully installed rest-client-2.1.0\nSuccessfully installed json_pure-2.3.1\nBuilding native extensions. This could take a while...\nSuccessfully installed rainbow-2.2.2\nSuccessfully installed package_cloud-0.3.11\n14 gems installed\nRemoving intermediate container 5c2e2457ffee\n ---> ea0a50bdc27c\nStep 23/33 : RUN mkdir /build\n ---> Running in 93702cfee635\nRemoving intermediate container 93702cfee635\n ---> 4734c944aea6\nStep 24/33 : RUN mkdir -p /source/etc/immortal   && mkdir -p /source/tmp/immortal   && mkdir -p /source/usr/local/man/man8\n ---> Running in 27d0112f9f48\nRemoving intermediate container 27d0112f9f48\n ---> c31b255896e5\nStep 25/33 : COPY --from=builder /build /build\n ---> 0f7b4a8f6e1d\nStep 26/33 : COPY --from=builder /man/* /source/usr/local/man/man8/\n ---> 8c25926f9c4a\nStep 27/33 : RUN mkdir deb-package\n ---> Running in 4b9e65292534\nRemoving intermediate container 4b9e65292534\n ---> 324b4eefbd44\nStep 28/33 : WORKDIR deb-package\n ---> Running in 7adfb93b47c3\nRemoving intermediate container 7adfb93b47c3\n ---> 3b1f1f81a21a\nStep 29/33 : RUN git clone https://github.com/immortal/packages.git scripts\n ---> Running in 784cfc5c9441\n\u001b[91mCloning into 'scripts'...\n\u001b[0mRemoving intermediate container 784cfc5c9441\n ---> 3d7e2d008b53\nStep 30/33 : RUN cp scripts/* /source/tmp/immortal\n ---> Running in 3e4b4df8af15\nRemoving intermediate container 3e4b4df8af15\n ---> be38ea7f02b2\nStep 31/33 : RUN fpm --output-type deb   --input-type dir   --name immortal   --version ${VERSION}   --description 'A *nix cross-platform (OS agnostic) supervisor'   --url 'https://immortal.run'   --after-install scripts/after-install.sh   --before-remove scripts/before-remove.sh   --package immortal_${VERSION}_i386.deb   --architecture i386   --chdir /   /source/=/ /build/386/=/usr/bin; done\n ---> Running in 37ae974e8126\n{:timestamp=>\"2023-01-01T07:44:33.191221+0000\", :message=>\"Debian packaging tools generally labels all files in /etc as config files, as mandated by policy, so fpm defaults to this behavior for deb packages. You can disable this default behavior with --deb-no-default-config-files flag\", :level=>:warn}\n{:timestamp=>\"2023-01-01T07:44:34.644454+0000\", :message=>\"Created package\", :path=>\"immortal_0.0.0_i386.deb\"}\nRemoving intermediate container 37ae974e8126\n ---> 60c61cc46bf2\nStep 32/33 : RUN for arch in /build/*; do   fpm --output-type deb   --input-type dir   --name immortal   --version ${VERSION}   --description 'A *nix cross-platform (OS agnostic) supervisor'   --url 'https://immortal.run'   --after-install scripts/after-install.sh   --before-remove scripts/before-remove.sh   --package immortal_${VERSION}_${arch##*/}.deb   --architecture ${arch##*/}   --chdir /   /source/=/ /build/${arch##*/}/=/usr/bin; done\n ---> Running in ed3a2f6d6b70\n{:timestamp=>\"2023-01-01T07:44:40.872467+0000\", :message=>\"Debian packaging tools generally labels all files in /etc as config files, as mandated by policy, so fpm defaults to this behavior for deb packages. You can disable this default behavior with --deb-no-default-config-files flag\", :level=>:warn}\n{:timestamp=>\"2023-01-01T07:44:41.813867+0000\", :message=>\"Created package\", :path=>\"immortal_0.0.0_386.deb\"}\n{:timestamp=>\"2023-01-01T07:44:42.217054+0000\", :message=>\"Debian packaging tools generally labels all files in /etc as config files, as mandated by policy, so fpm defaults to this behavior for deb packages. You can disable this default behavior with --deb-no-default-config-files flag\", :level=>:warn}\n{:timestamp=>\"2023-01-01T07:44:43.217491+0000\", :message=>\"Created package\", :path=>\"immortal_0.0.0_amd64.deb\"}\n{:timestamp=>\"2023-01-01T07:44:43.638506+0000\", :message=>\"Debian packaging tools generally labels all files in /etc as config files, as mandated by policy, so fpm defaults to this behavior for deb packages. You can disable this default behavior with --deb-no-default-config-files flag\", :level=>:warn}\n{:timestamp=>\"2023-01-01T07:44:44.748928+0000\", :message=>\"Created package\", :path=>\"immortal_0.0.0_arm.deb\"}\n{:timestamp=>\"2023-01-01T07:44:45.250985+0000\", :message=>\"Debian packaging tools generally labels all files in /etc as config files, as mandated by policy, so fpm defaults to this behavior for deb packages. You can disable this default behavior with --deb-no-default-config-files flag\", :level=>:warn}\n{:timestamp=>\"2023-01-01T07:44:46.183002+0000\", :message=>\"Created package\", :path=>\"immortal_0.0.0_arm64.deb\"}\n{:timestamp=>\"2023-01-01T07:44:47.725465+0000\", :message=>\"Debian packaging tools generally labels all files in /etc as config files, as mandated by policy, so fpm defaults to this behavior for deb packages. You can disable this default behavior with --deb-no-default-config-files flag\", :level=>:warn}\n{:timestamp=>\"2023-01-01T07:44:48.927820+0000\", :message=>\"Created package\", :path=>\"immortal_0.0.0_mips.deb\"}\n{:timestamp=>\"2023-01-01T07:44:49.748456+0000\", :message=>\"Debian packaging tools generally labels all files in /etc as config files, as mandated by policy, so fpm defaults to this behavior for deb packages. You can disable this default behavior with --deb-no-default-config-files flag\", :level=>:warn}\n{:timestamp=>\"2023-01-01T07:44:50.994175+0000\", :message=>\"Created package\", :path=>\"immortal_0.0.0_mips64.deb\"}\n{:timestamp=>\"2023-01-01T07:44:51.534829+0000\", :message=>\"Debian packaging tools generally labels all files in /etc as config files, as mandated by policy, so fpm defaults to this behavior for deb packages. You can disable this default behavior with --deb-no-default-config-files flag\", :level=>:warn}\n{:timestamp=>\"2023-01-01T07:44:52.725714+0000\", :message=>\"Created package\", :path=>\"immortal_0.0.0_mips64le.deb\"}\n{:timestamp=>\"2023-01-01T07:44:53.743587+0000\", :message=>\"Debian packaging tools generally labels all files in /etc as config files, as mandated by policy, so fpm defaults to this behavior for deb packages. You can disable this default behavior with --deb-no-default-config-files flag\", :level=>:warn}\n{:timestamp=>\"2023-01-01T07:44:54.982306+0000\", :message=>\"Created package\", :path=>\"immortal_0.0.0_mipsle.deb\"}\n{:timestamp=>\"2023-01-01T07:44:55.876031+0000\", :message=>\"Debian packaging tools generally labels all files in /etc as config files, as mandated by policy, so fpm defaults to this behavior for deb packages. You can disable this default behavior with --deb-no-default-config-files flag\", :level=>:warn}\n{:timestamp=>\"2023-01-01T07:44:57.606065+0000\", :message=>\"Created package\", :path=>\"immortal_0.0.0_ppc64.deb\"}\n{:timestamp=>\"2023-01-01T07:44:58.758311+0000\", :message=>\"Debian packaging tools generally labels all files in /etc as config files, as mandated by policy, so fpm defaults to this behavior for deb packages. You can disable this default behavior with --deb-no-default-config-files flag\", :level=>:warn}\n{:timestamp=>\"2023-01-01T07:44:59.840362+0000\", :message=>\"Created package\", :path=>\"immortal_0.0.0_ppc64le.deb\"}\nRemoving intermediate container ed3a2f6d6b70\n ---> 6eedc38a3077\nStep 33/33 : RUN for arch in /build/*; do   fpm --output-type rpm   --input-type dir   --name immortal   --version ${VERSION}   --description 'A *nix cross-platform (OS agnostic) supervisor'   --url 'https://immortal.run'   --after-install scripts/after-install.sh   --before-remove scripts/before-remove.sh   --package immortal_${VERSION}_${arch##*/}.rpm   --architecture ${arch##*/}   --chdir /   /source/=/ /build/${arch##*/}/=/usr/bin; done\n ---> Running in d4468ea2d2a9\n{:timestamp=>\"2023-01-01T07:45:20.517952+0000\", :message=>\"Created package\", :path=>\"immortal_0.0.0_386.rpm\"}\n{:timestamp=>\"2023-01-01T07:45:23.633443+0000\", :message=>\"Created package\", :path=>\"immortal_0.0.0_amd64.rpm\"}\n{:timestamp=>\"2023-01-01T07:45:27.725889+0000\", :message=>\"Created package\", :path=>\"immortal_0.0.0_arm.rpm\"}\n{:timestamp=>\"2023-01-01T07:45:30.094178+0000\", :message=>\"Created package\", :path=>\"immortal_0.0.0_arm64.rpm\"}\n{:timestamp=>\"2023-01-01T07:45:34.205799+0000\", :message=>\"Created package\", :path=>\"immortal_0.0.0_mips.rpm\"}\n{:timestamp=>\"2023-01-01T07:45:39.090081+0000\", :message=>\"Created package\", :path=>\"immortal_0.0.0_mips64.rpm\"}\n{:timestamp=>\"2023-01-01T07:45:43.081023+0000\", :message=>\"Created package\", :path=>\"immortal_0.0.0_mips64le.rpm\"}\n{:timestamp=>\"2023-01-01T07:45:45.881201+0000\", :message=>\"Created package\", :path=>\"immortal_0.0.0_mipsle.rpm\"}\n{:timestamp=>\"2023-01-01T07:45:49.842619+0000\", :message=>\"Created package\", :path=>\"immortal_0.0.0_ppc64.rpm\"}\n{:timestamp=>\"2023-01-01T07:45:52.687998+0000\", :message=>\"Created package\", :path=>\"immortal_0.0.0_ppc64le.rpm\"}\nRemoving intermediate container d4468ea2d2a9\n ---> 8fe01b9771c7\nSuccessfully built 8fe01b9771c7\nSuccessfully tagged immortal:latest\n","stderr":"","imageSize":1663520089},"repair":{"violations":[{"name":"ruleAptGetInstallThenRemoveAptLists","position":{"start":15,"end":15,"columnStart":22,"columnEnd":107}}],"repairedDockerfile":"FROM golang:latest as builder\nRUN groupadd -r toor && useradd --create-home --no-log-init -r -g toor toor\nWORKDIR /go/src/github.com/immortal/immortal\nCOPY . .\nRUN chown -R toor:toor /go\nARG VERSION=0.0.0\nENV VERSION=\"${VERSION}\"\nUSER toor\nRUN go test -race -v\nUSER root\nRUN make build-linux\nRUN mv man /\nRUN mv build /\n\nFROM ruby:2.3\nRUN apt-get update && apt-get install -y --no-install-recommends -q build-essential ca-certificates git rpm\nARG VERSION=0.0.0\nENV VERSION=\"${VERSION}\"\nENV GEM_HOME /usr/local/bundle\nENV BUNDLE_PATH=\"$GEM_HOME\" \\\n    BUNDLE_BIN=\"$GEM_HOME/bin\" \\\n    BUNDLE_SILENCE_ROOT_WARNING=1 \\\n    BUNDLE_APP_CONFIG=\"$GEM_HOME\"\nENV PATH $BUNDLE_BIN:$PATH\nRUN gem install --quiet --no-document fpm\nRUN gem install --quiet --no-document package_cloud\nRUN mkdir /build\nRUN mkdir -p /source/etc/immortal \\\n  && mkdir -p /source/tmp/immortal \\\n  && mkdir -p /source/usr/local/man/man8\nCOPY --from=builder /build /build\nCOPY --from=builder /man/* /source/usr/local/man/man8/\nRUN mkdir deb-package\nWORKDIR deb-package\nRUN git clone https://github.com/immortal/packages.git scripts\nRUN cp scripts/* /source/tmp/immortal\nRUN fpm --output-type deb \\\n  --input-type dir \\\n  --name immortal \\\n  --version ${VERSION} \\\n  --description 'A *nix cross-platform (OS agnostic) supervisor' \\\n  --url 'https://immortal.run' \\\n  --after-install scripts/after-install.sh \\\n  --before-remove scripts/before-remove.sh \\\n  --package immortal_${VERSION}_i386.deb \\\n  --architecture i386 \\\n  --chdir / \\\n  /source/=/ /build/386/=/usr/bin; done\nRUN for arch in /build/*; do \\\n  fpm --output-type deb \\\n  --input-type dir \\\n  --name immortal \\\n  --version ${VERSION} \\\n  --description 'A *nix cross-platform (OS agnostic) supervisor' \\\n  --url 'https://immortal.run' \\\n  --after-install scripts/after-install.sh \\\n  --before-remove scripts/before-remove.sh \\\n  --package immortal_${VERSION}_${arch##*/}.deb \\\n  --architecture ${arch##*/} \\\n  --chdir / \\\n  /source/=/ /build/${arch##*/}/=/usr/bin; done\nRUN for arch in /build/*; do \\\n  fpm --output-type rpm \\\n  --input-type dir \\\n  --name immortal \\\n  --version ${VERSION} \\\n  --description 'A *nix cross-platform (OS agnostic) supervisor' \\\n  --url 'https://immortal.run' \\\n  --after-install scripts/after-install.sh \\\n  --before-remove scripts/before-remove.sh \\\n  --package immortal_${VERSION}_${arch##*/}.rpm \\\n  --architecture ${arch##*/} \\\n  --chdir / \\\n  /source/=/ /build/${arch##*/}/=/usr/bin; done\n"},"repairedBuild":{"startTimestamp":1672559180559,"endTimestamp":1672559604283,"error":null,"stdout":"Sending build context to Docker daemon  381.4kB\r\r\nStep 1/33 : FROM golang:latest as builder\n ---> 6650307efe4a\nStep 2/33 : RUN groupadd -r toor && useradd --create-home --no-log-init -r -g toor toor\n ---> Running in 15b967359a11\nRemoving intermediate container 15b967359a11\n ---> 6d23603a644c\nStep 3/33 : WORKDIR /go/src/github.com/immortal/immortal\n ---> Running in 77d59f27feca\nRemoving intermediate container 77d59f27feca\n ---> adf711d14ac1\nStep 4/33 : COPY . .\n ---> 19940051d7e2\nStep 5/33 : RUN chown -R toor:toor /go\n ---> Running in 9d48b049dc4f\nRemoving intermediate container 9d48b049dc4f\n ---> 0d5ccdec13dc\nStep 6/33 : ARG VERSION=0.0.0\n ---> Running in 48ef22feae2b\nRemoving intermediate container 48ef22feae2b\n ---> c0e82b9466ea\nStep 7/33 : ENV VERSION=\"${VERSION}\"\n ---> Running in a63f66148df2\nRemoving intermediate container a63f66148df2\n ---> 59d7a9165006\nStep 8/33 : USER toor\n ---> Running in 4d3755b8c311\nRemoving intermediate container 4d3755b8c311\n ---> 3e4dba093164\nStep 9/33 : RUN go test -race -v\n ---> Running in 75f72dabc845\n\u001b[91mgo: downloading github.com/immortal/natcasesort v0.0.0-20180922190600-53ad4be8bc1a\n\u001b[0m\u001b[91mgo: downloading github.com/immortal/xtime v0.0.0-20170317233522-fb1aca1146ea\n\u001b[0m\u001b[91mgo: downloading github.com/nbari/violetear v0.0.0-20210524103009-ce83b52538c9\n\u001b[0m\u001b[91mgo: downloading github.com/immortal/logrotate v0.0.0-20180922190115-5a04431dbafb\n\u001b[0m\u001b[91mgo: downloading github.com/go-yaml/yaml v2.1.0+incompatible\n\u001b[0m\u001b[91mgo: downloading github.com/immortal/multiwriter v0.0.0-20180922214543-2e0dd11a3549\n\u001b[0m=== RUN   TestColorRed\n--- PASS: TestColorRed (0.00s)\n=== RUN   TestColorGreen\n--- PASS: TestColorGreen (0.00s)\n=== RUN   TestColorYellow\n--- PASS: TestColorYellow (0.00s)\n=== RUN   TestGetStatus\n--- PASS: TestGetStatus (0.00s)\n=== RUN   TestSendSignal\n--- PASS: TestSendSignal (0.00s)\n=== RUN   TestFindServices\n--- PASS: TestFindServices (0.00s)\n=== RUN   TestFindServicesNonexistent\n--- PASS: TestFindServicesNonexistent (0.00s)\n=== RUN   TestPurgeServices\n--- PASS: TestPurgeServices (0.00s)\n=== RUN   TestRun\n--- PASS: TestRun (0.01s)\n=== RUN   TestDaemonNewCtl\n--- PASS: TestDaemonNewCtl (0.00s)\n=== RUN   TestDaemonNewCtlErr\n--- PASS: TestDaemonNewCtlErr (0.00s)\n=== RUN   TestDaemonNewCtlCwd\n--- PASS: TestDaemonNewCtlCwd (0.00s)\n=== RUN   TestBadUid\n--- PASS: TestBadUid (0.00s)\n=== RUN   TestBadGid\n--- PASS: TestBadGid (0.00s)\n=== RUN   TestBadPid\n--- PASS: TestBadPid (0.00s)\n=== RUN   TestUser\n--- PASS: TestUser (0.00s)\n=== RUN   TestBadWritePidParent\n--- PASS: TestBadWritePidParent (0.00s)\n=== RUN   TestBadWritePidChild\n--- PASS: TestBadWritePidChild (0.00s)\n=== RUN   TestSignalsUDOT\n    daemon_test.go:307: testing k\n    daemon_test.go:333: testing d\n    daemon_test.go:350: testing up\n    daemon_test.go:363: testing once\n    daemon_test.go:389: testing u\n    daemon_test.go:403: testing t\n    daemon_test.go:451: testing logfile\n--- PASS: TestSignalsUDOT (1.03s)\n=== RUN   TestDaemonNewEnvHOME\n--- PASS: TestDaemonNewEnvHOME (0.00s)\n=== RUN   TestDaemonConfigFile\n--- PASS: TestDaemonConfigFile (0.00s)\n=== RUN   TestDaemonFailSdir\n--- PASS: TestDaemonFailSdir (0.00s)\n=== RUN   TestFork\n--- PASS: TestFork (0.00s)\n=== RUN   TestForkErr\n--- PASS: TestForkErr (0.00s)\n=== RUN   TestAbsSince\n--- PASS: TestAbsSince (0.00s)\n=== RUN   TestMd5sumNonexistent\n--- PASS: TestMd5sumNonexistent (0.00s)\n=== RUN   TestMd5sum\n--- PASS: TestMd5sum (0.00s)\n=== RUN   TestInSlice\n--- PASS: TestInSlice (0.00s)\n=== RUN   TestGetUserSdir\n--- PASS: TestGetUserSdir (0.00s)\n=== RUN   TestIsDir\n--- PASS: TestIsDir (0.00s)\n=== RUN   TestIsFile\n--- PASS: TestIsFile (0.00s)\n=== RUN   TestNewStderrLogger\n--- PASS: TestNewStderrLogger (0.00s)\n=== RUN   TestNewStderrLoggerFileNone\n--- PASS: TestNewStderrLoggerFileNone (0.00s)\n=== RUN   TestNewLoggerFileNone\n--- PASS: TestNewLoggerFileNone (0.00s)\n=== RUN   TestNewLoggerBadLogger\n--- PASS: TestNewLoggerBadLogger (0.00s)\n=== RUN   TestNewLoggerLogger\n--- PASS: TestNewLoggerLogger (0.01s)\n=== RUN   TestNewLoggerKilled\n--- PASS: TestNewLoggerKilled (1.01s)\n=== RUN   TestNewLoggerRetry\n--- PASS: TestNewLoggerRetry (2.00s)\n=== RUN   TestLogWriterLog\n--- PASS: TestLogWriterLog (2.00s)\n=== RUN   TestParseHelp\n--- PASS: TestParseHelp (0.00s)\n=== RUN   TestParseDefault\n--- PASS: TestParseDefault (0.00s)\n=== RUN   TestParseFlags\n--- PASS: TestParseFlags (0.00s)\n=== RUN   TestParseArgsHelp\n--- PASS: TestParseArgsHelp (0.00s)\n=== RUN   TestParseArgsVersion\n--- PASS: TestParseArgsVersion (0.00s)\n=== RUN   TestParseArgsVersion2\n--- PASS: TestParseArgsVersion2 (0.00s)\n=== RUN   TestParseArgsCtl\n--- PASS: TestParseArgsCtl (0.00s)\n=== RUN   TestParseArgsNoargs\n--- PASS: TestParseArgsNoargs (0.00s)\n=== RUN   TestParseArgsTable\ncmd: sleep 30\nlog:\n  file: /tmp/foo.log\nretries: -1\n--- PASS: TestParseArgsTable (0.00s)\n=== RUN   TestParseYamlCmd\n--- PASS: TestParseYamlCmd (0.00s)\n=== RUN   TestParseYamlCwd\n--- PASS: TestParseYamlCwd (0.00s)\n=== RUN   TestParseYamlUsrErr\n--- PASS: TestParseYamlUsrErr (0.00s)\n=== RUN   TestParseYamlErr\n--- PASS: TestParseYamlErr (0.00s)\n=== RUN   TestParseParseYmlioutil\n--- PASS: TestParseParseYmlioutil (0.00s)\n=== RUN   TestParseYamlRequire\n--- PASS: TestParseYamlRequire (0.00s)\n=== RUN   TestParseYamlRequireEmpty\n--- PASS: TestParseYamlRequireEmpty (0.00s)\n=== RUN   TestParseYamlRequireCmd\n--- PASS: TestParseYamlRequireCmd (0.00s)\n=== RUN   TestParseYamlRequireEmptyCmd\n--- PASS: TestParseYamlRequireEmptyCmd (0.00s)\n=== RUN   TestParseYamlRetriesDefaults\n--- PASS: TestParseYamlRetriesDefaults (0.00s)\n=== RUN   TestParseYamlCustomRetries0\n--- PASS: TestParseYamlCustomRetries0 (0.00s)\n=== RUN   TestParseYamlCustomRetries10\n--- PASS: TestParseYamlCustomRetries10 (0.00s)\n=== RUN   TestParseBadYaml\n--- PASS: TestParseBadYaml (0.00s)\n=== RUN   TestParseArgsConfigfile\n--- PASS: TestParseArgsConfigfile (0.00s)\n=== RUN   TestParseArgsCheckConfig\n--- PASS: TestParseArgsCheckConfig (0.00s)\n=== RUN   TestProcessStart\n--- PASS: TestProcessStart (0.00s)\n=== RUN   TestProcessLogStderrStdout\n    process_test.go:102: verifying stdout\n    process_test.go:110: verifying stderr\n--- PASS: TestProcessLogStderrStdout (0.03s)\n=== RUN   TestProcessLogStderr\n    process_test.go:185: verifying stderr\n--- PASS: TestProcessLogStderr (0.03s)\n=== RUN   TestNewScanDir\n--- PASS: TestNewScanDir (0.00s)\n=== RUN   TestNewScanDirNonexistent\n--- PASS: TestNewScanDirNonexistent (0.00s)\n=== RUN   TestScanner\n--- PASS: TestScanner (2.01s)\n=== RUN   TestSignalsFiFo\n=== RUN   TestSignalsFiFo/a\n=== RUN   TestSignalsFiFo/alrm\n=== RUN   TestSignalsFiFo/c\n=== RUN   TestSignalsFiFo/cont\n=== RUN   TestSignalsFiFo/h\n=== RUN   TestSignalsFiFo/hup\n=== RUN   TestSignalsFiFo/i\n=== RUN   TestSignalsFiFo/int\n=== RUN   TestSignalsFiFo/q\n=== RUN   TestSignalsFiFo/quit\n=== RUN   TestSignalsFiFo/in\n=== RUN   TestSignalsFiFo/TTIN\n=== RUN   TestSignalsFiFo/ou\n=== RUN   TestSignalsFiFo/TTOU\n=== RUN   TestSignalsFiFo/1\n=== RUN   TestSignalsFiFo/usr1\n=== RUN   TestSignalsFiFo/2\n=== RUN   TestSignalsFiFo/usr2\n=== RUN   TestSignalsFiFo/w\n=== RUN   TestSignalsFiFo/winch\n=== RUN   TestSignalsFiFo/a#01\n=== RUN   TestSignalsFiFo/alrm#01\n=== RUN   TestSignalsFiFo/c#01\n=== RUN   TestSignalsFiFo/cont#01\n=== RUN   TestSignalsFiFo/h#01\n=== RUN   TestSignalsFiFo/hup#01\n=== RUN   TestSignalsFiFo/i#01\n=== RUN   TestSignalsFiFo/int#01\n=== RUN   TestSignalsFiFo/q#01\n=== RUN   TestSignalsFiFo/quit#01\n=== RUN   TestSignalsFiFo/in#01\n=== RUN   TestSignalsFiFo/TTIN#01\n=== RUN   TestSignalsFiFo/ou#01\n=== RUN   TestSignalsFiFo/TTOU#01\n=== RUN   TestSignalsFiFo/1#01\n=== RUN   TestSignalsFiFo/usr1#01\n=== RUN   TestSignalsFiFo/2#01\n=== RUN   TestSignalsFiFo/usr2#01\n=== RUN   TestSignalsFiFo/w#01\n=== RUN   TestSignalsFiFo/winch#01\n--- PASS: TestSignalsFiFo (1.10s)\n    --- PASS: TestSignalsFiFo/a (0.00s)\n    --- PASS: TestSignalsFiFo/alrm (0.00s)\n    --- PASS: TestSignalsFiFo/c (0.00s)\n    --- PASS: TestSignalsFiFo/cont (0.00s)\n    --- PASS: TestSignalsFiFo/h (0.00s)\n    --- PASS: TestSignalsFiFo/hup (0.00s)\n    --- PASS: TestSignalsFiFo/i (0.00s)\n    --- PASS: TestSignalsFiFo/int (0.00s)\n    --- PASS: TestSignalsFiFo/q (0.00s)\n    --- PASS: TestSignalsFiFo/quit (0.00s)\n    --- PASS: TestSignalsFiFo/in (0.00s)\n    --- PASS: TestSignalsFiFo/TTIN (0.00s)\n    --- PASS: TestSignalsFiFo/ou (0.00s)\n    --- PASS: TestSignalsFiFo/TTOU (0.00s)\n    --- PASS: TestSignalsFiFo/1 (0.00s)\n    --- PASS: TestSignalsFiFo/usr1 (0.00s)\n    --- PASS: TestSignalsFiFo/2 (0.00s)\n    --- PASS: TestSignalsFiFo/usr2 (0.00s)\n    --- PASS: TestSignalsFiFo/w (0.00s)\n    --- PASS: TestSignalsFiFo/winch (0.00s)\n    --- PASS: TestSignalsFiFo/a#01 (0.00s)\n    --- PASS: TestSignalsFiFo/alrm#01 (0.00s)\n    --- PASS: TestSignalsFiFo/c#01 (0.00s)\n    --- PASS: TestSignalsFiFo/cont#01 (0.00s)\n    --- PASS: TestSignalsFiFo/h#01 (0.00s)\n    --- PASS: TestSignalsFiFo/hup#01 (0.05s)\n    --- PASS: TestSignalsFiFo/i#01 (0.00s)\n    --- PASS: TestSignalsFiFo/int#01 (0.00s)\n    --- PASS: TestSignalsFiFo/q#01 (0.00s)\n    --- PASS: TestSignalsFiFo/quit#01 (0.00s)\n    --- PASS: TestSignalsFiFo/in#01 (0.00s)\n    --- PASS: TestSignalsFiFo/TTIN#01 (0.00s)\n    --- PASS: TestSignalsFiFo/ou#01 (0.00s)\n    --- PASS: TestSignalsFiFo/TTOU#01 (0.00s)\n    --- PASS: TestSignalsFiFo/1#01 (0.00s)\n    --- PASS: TestSignalsFiFo/usr1#01 (0.00s)\n    --- PASS: TestSignalsFiFo/2#01 (0.00s)\n    --- PASS: TestSignalsFiFo/usr2#01 (0.00s)\n    --- PASS: TestSignalsFiFo/w#01 (0.00s)\n    --- PASS: TestSignalsFiFo/winch#01 (0.00s)\n=== RUN   TestSocketListenError\n--- PASS: TestSocketListenError (0.00s)\n=== RUN   TestSupervise\n--- PASS: TestSupervise (4.01s)\n=== RUN   TestSuperviseWait\n--- PASS: TestSuperviseWait (2.02s)\n=== RUN   TestRetries\n=== RUN   TestRetries/retry_0\n=== RUN   TestRetries/retry_1\n=== RUN   TestRetries/retry_2\n--- PASS: TestRetries (3.64s)\n    --- PASS: TestRetries/retry_0 (0.21s)\n    --- PASS: TestRetries/retry_1 (1.21s)\n    --- PASS: TestRetries/retry_2 (2.22s)\n=== RUN   TestWatchPidGetpid\n--- PASS: TestWatchPidGetpid (0.00s)\n=== RUN   TestWatchPidGetpidKill\n--- PASS: TestWatchPidGetpidKill (0.00s)\nPASS\nok  \tgithub.com/immortal/immortal\t19.002s\nRemoving intermediate container 75f72dabc845\n ---> 0727647b6ac9\nStep 10/33 : USER root\n ---> Running in e215e1f8a1bd\nRemoving intermediate container e215e1f8a1bd\n ---> b3d17ea18c6d\nStep 11/33 : RUN make build-linux\n ---> Running in cfbf82cae3b0\nfor arch in 386 amd64 arm arm64 ppc64 ppc64le mips mipsle mips64 mips64le; do \\\n\tmkdir -p build/${arch}; \\\n\tGOOS=linux GOARCH=${arch} go build -ldflags \"-s -w -X main.version=0.24.4\" -o build/${arch}/immortal cmd/immortal/main.go; \\\n\tGOOS=linux GOARCH=${arch} go build -ldflags \"-s -w -X main.version=0.24.4\" -o build/${arch}/immortalctl cmd/immortalctl/main.go; \\\n\tGOOS=linux GOARCH=${arch} go build -ldflags \"-s -w -X main.version=0.24.4\" -o build/${arch}/immortaldir cmd/immortaldir/main.go; \\\ndone\nRemoving intermediate container cfbf82cae3b0\n ---> 36ccce5ad331\nStep 12/33 : RUN mv man /\n ---> Running in ec0689fe5a01\nRemoving intermediate container ec0689fe5a01\n ---> 1e1ca2889872\nStep 13/33 : RUN mv build /\n ---> Running in ee599348619f\nRemoving intermediate container ee599348619f\n ---> fe60ed34d6ed\nStep 14/33 : FROM ruby:2.3\n ---> c0d23ebb3ed6\nStep 15/33 : RUN apt-get update && apt-get install -y --no-install-recommends -q build-essential ca-certificates git rpm\n ---> Running in 6838f621ce56\nGet:1 http://security.debian.org/debian-security stretch/updates InRelease [59.1 kB]\nIgn:2 http://deb.debian.org/debian stretch InRelease\nGet:3 http://deb.debian.org/debian stretch-updates InRelease [93.6 kB]\nGet:4 http://deb.debian.org/debian stretch Release [118 kB]\nGet:5 http://deb.debian.org/debian stretch Release.gpg [3177 B]\nGet:6 http://security.debian.org/debian-security stretch/updates/main amd64 Packages [782 kB]\nGet:7 http://deb.debian.org/debian stretch/main amd64 Packages [7080 kB]\nFetched 8135 kB in 1s (4943 kB/s)\nReading package lists...\nReading package lists...\nBuilding dependency tree...\nReading state information...\nThe following additional packages will be installed:\n  debugedit dpkg-dev libarchive13 libdpkg-perl liblua5.2-0 libnspr4 libnss3\n  libpopt0 librpm3 librpmbuild3 librpmio3 librpmsign3 rpm-common rpm2cpio\nSuggested packages:\n  rpm-i18n debian-keyring gettext-base git-daemon-run | git-daemon-sysvinit\n  git-doc git-el git-email git-gui gitk gitweb git-arch git-cvs git-mediawiki\n  git-svn lrzip alien elfutils rpmlint rpm2html\nRecommended packages:\n  fakeroot libalgorithm-merge-perl less rsync libfile-fcntllock-perl\n  liblocale-gettext-perl\nThe following NEW packages will be installed:\n  build-essential debugedit dpkg-dev libarchive13 liblua5.2-0 libnspr4 libnss3\n  libpopt0 librpm3 librpmbuild3 librpmio3 librpmsign3 rpm rpm-common rpm2cpio\nThe following packages will be upgraded:\n  ca-certificates git libdpkg-perl\n3 upgraded, 15 newly installed, 0 to remove and 165 not upgraded.\nNeed to get 18.3 MB of archives.\nAfter this operation, 18.2 MB of additional disk space will be used.\nGet:1 http://deb.debian.org/debian stretch/main amd64 git amd64 1:2.11.0-3+deb9u7 [4170 kB]\nGet:2 http://security.debian.org/debian-security stretch/updates/main amd64 libdpkg-perl all 1.18.26 [1290 kB]\nGet:3 http://security.debian.org/debian-security stretch/updates/main amd64 dpkg-dev all 1.18.26 [1597 kB]\nGet:4 http://deb.debian.org/debian stretch/main amd64 libpopt0 amd64 1.16-10+b2 [49.4 kB]\nGet:5 http://deb.debian.org/debian stretch/main amd64 build-essential amd64 12.3 [7346 B]\nGet:6 http://deb.debian.org/debian stretch/main amd64 liblua5.2-0 amd64 5.2.4-1.1+b2 [110 kB]\nGet:7 http://deb.debian.org/debian stretch/main amd64 libnspr4 amd64 2:4.12-6 [117 kB]\nGet:8 http://deb.debian.org/debian stretch/main amd64 librpmio3 amd64 4.12.0.2+dfsg1-2 [1166 kB]\nGet:9 http://security.debian.org/debian-security stretch/updates/main amd64 ca-certificates all 20200601~deb9u2 [168 kB]\nGet:10 http://security.debian.org/debian-security stretch/updates/main amd64 libnss3 amd64 2:3.26.2-1.1+deb9u5 [1244 kB]\nGet:11 http://deb.debian.org/debian stretch/main amd64 debugedit amd64 4.12.0.2+dfsg1-2 [1114 kB]\nGet:12 http://deb.debian.org/debian stretch/main amd64 librpm3 amd64 4.12.0.2+dfsg1-2 [1255 kB]\nGet:13 http://security.debian.org/debian-security stretch/updates/main amd64 libarchive13 amd64 3.2.2-2+deb9u3 [295 kB]\nGet:14 http://deb.debian.org/debian stretch/main amd64 librpmbuild3 amd64 4.12.0.2+dfsg1-2 [1157 kB]\nGet:15 http://deb.debian.org/debian stretch/main amd64 librpmsign3 amd64 4.12.0.2+dfsg1-2 [1106 kB]\nGet:16 http://deb.debian.org/debian stretch/main amd64 rpm-common amd64 4.12.0.2+dfsg1-2 [1124 kB]\nGet:17 http://deb.debian.org/debian stretch/main amd64 rpm2cpio amd64 4.12.0.2+dfsg1-2 [1106 kB]\nGet:18 http://deb.debian.org/debian stretch/main amd64 rpm amd64 4.12.0.2+dfsg1-2 [1213 kB]\n\u001b[91mdebconf: delaying package configuration, since apt-utils is not installed\n\u001b[0mFetched 18.3 MB in 0s (24.9 MB/s)\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 29619 files and directories currently installed.)\r\nPreparing to unpack .../00-git_1%3a2.11.0-3+deb9u7_amd64.deb ...\r\nUnpacking git (1:2.11.0-3+deb9u7) over (1:2.11.0-3+deb9u4) ...\r\nSelecting previously unselected package libpopt0:amd64.\r\nPreparing to unpack .../01-libpopt0_1.16-10+b2_amd64.deb ...\r\nUnpacking libpopt0:amd64 (1.16-10+b2) ...\r\nPreparing to unpack .../02-libdpkg-perl_1.18.26_all.deb ...\r\nUnpacking libdpkg-perl (1.18.26) over (1.18.25) ...\r\nSelecting previously unselected package dpkg-dev.\r\nPreparing to unpack .../03-dpkg-dev_1.18.26_all.deb ...\r\nUnpacking dpkg-dev (1.18.26) ...\r\nSelecting previously unselected package build-essential.\r\nPreparing to unpack .../04-build-essential_12.3_amd64.deb ...\r\nUnpacking build-essential (12.3) ...\r\nPreparing to unpack .../05-ca-certificates_20200601~deb9u2_all.deb ...\r\nUnpacking ca-certificates (20200601~deb9u2) over (20161130+nmu1+deb9u1) ...\r\nSelecting previously unselected package liblua5.2-0:amd64.\r\nPreparing to unpack .../06-liblua5.2-0_5.2.4-1.1+b2_amd64.deb ...\r\nUnpacking liblua5.2-0:amd64 (5.2.4-1.1+b2) ...\r\nSelecting previously unselected package libnspr4:amd64.\r\nPreparing to unpack .../07-libnspr4_2%3a4.12-6_amd64.deb ...\r\nUnpacking libnspr4:amd64 (2:4.12-6) ...\r\nSelecting previously unselected package libnss3:amd64.\r\nPreparing to unpack .../08-libnss3_2%3a3.26.2-1.1+deb9u5_amd64.deb ...\r\nUnpacking libnss3:amd64 (2:3.26.2-1.1+deb9u5) ...\r\nSelecting previously unselected package librpmio3.\r\nPreparing to unpack .../09-librpmio3_4.12.0.2+dfsg1-2_amd64.deb ...\r\nUnpacking librpmio3 (4.12.0.2+dfsg1-2) ...\r\nSelecting previously unselected package debugedit.\r\nPreparing to unpack .../10-debugedit_4.12.0.2+dfsg1-2_amd64.deb ...\r\nUnpacking debugedit (4.12.0.2+dfsg1-2) ...\r\nSelecting previously unselected package libarchive13:amd64.\r\nPreparing to unpack .../11-libarchive13_3.2.2-2+deb9u3_amd64.deb ...\r\nUnpacking libarchive13:amd64 (3.2.2-2+deb9u3) ...\r\nSelecting previously unselected package librpm3.\r\nPreparing to unpack .../12-librpm3_4.12.0.2+dfsg1-2_amd64.deb ...\r\nUnpacking librpm3 (4.12.0.2+dfsg1-2) ...\r\nSelecting previously unselected package librpmbuild3.\r\nPreparing to unpack .../13-librpmbuild3_4.12.0.2+dfsg1-2_amd64.deb ...\r\nUnpacking librpmbuild3 (4.12.0.2+dfsg1-2) ...\r\nSelecting previously unselected package librpmsign3.\r\nPreparing to unpack .../14-librpmsign3_4.12.0.2+dfsg1-2_amd64.deb ...\r\nUnpacking librpmsign3 (4.12.0.2+dfsg1-2) ...\r\nSelecting previously unselected package rpm-common.\r\nPreparing to unpack .../15-rpm-common_4.12.0.2+dfsg1-2_amd64.deb ...\r\nUnpacking rpm-common (4.12.0.2+dfsg1-2) ...\r\nSelecting previously unselected package rpm2cpio.\r\nPreparing to unpack .../16-rpm2cpio_4.12.0.2+dfsg1-2_amd64.deb ...\r\nUnpacking rpm2cpio (4.12.0.2+dfsg1-2) ...\r\nSelecting previously unselected package rpm.\r\nPreparing to unpack .../17-rpm_4.12.0.2+dfsg1-2_amd64.deb ...\r\nUnpacking rpm (4.12.0.2+dfsg1-2) ...\r\nSetting up libpopt0:amd64 (1.16-10+b2) ...\r\nSetting up libarchive13:amd64 (3.2.2-2+deb9u3) ...\r\nSetting up libdpkg-perl (1.18.26) ...\r\nSetting up libnspr4:amd64 (2:4.12-6) ...\r\nSetting up dpkg-dev (1.18.26) ...\r\nProcessing triggers for libc-bin (2.24-11+deb9u4) ...\r\nSetting up liblua5.2-0:amd64 (5.2.4-1.1+b2) ...\r\nSetting up ca-certificates (20200601~deb9u2) ...\r\ndebconf: unable to initialize frontend: Dialog\r\ndebconf: (TERM is not set, so the dialog frontend is not usable.)\r\ndebconf: falling back to frontend: Readline\r\nUpdating certificates in /etc/ssl/certs...\r\n15 added, 29 removed; done.\r\nSetting up git (1:2.11.0-3+deb9u7) ...\r\nSetting up build-essential (12.3) ...\r\nSetting up libnss3:amd64 (2:3.26.2-1.1+deb9u5) ...\r\nSetting up librpmio3 (4.12.0.2+dfsg1-2) ...\r\nSetting up debugedit (4.12.0.2+dfsg1-2) ...\r\nSetting up librpm3 (4.12.0.2+dfsg1-2) ...\r\nSetting up rpm-common (4.12.0.2+dfsg1-2) ...\r\nSetting up librpmbuild3 (4.12.0.2+dfsg1-2) ...\r\nSetting up librpmsign3 (4.12.0.2+dfsg1-2) ...\r\nSetting up rpm2cpio (4.12.0.2+dfsg1-2) ...\r\nSetting up rpm (4.12.0.2+dfsg1-2) ...\r\nProcessing triggers for libc-bin (2.24-11+deb9u4) ...\r\nProcessing triggers for ca-certificates (20200601~deb9u2) ...\r\nUpdating certificates in /etc/ssl/certs...\r\n0 added, 0 removed; done.\r\nRunning hooks in /etc/ca-certificates/update.d...\r\ndone.\r\nRemoving intermediate container 6838f621ce56\n ---> 38a8ebc53cca\nStep 16/33 : ARG VERSION=0.0.0\n ---> Running in 6db9a1b77f6b\nRemoving intermediate container 6db9a1b77f6b\n ---> 7abf4e459df2\nStep 17/33 : ENV VERSION=\"${VERSION}\"\n ---> Running in e4cf7a27eea5\nRemoving intermediate container e4cf7a27eea5\n ---> 41ae37f761a6\nStep 18/33 : ENV GEM_HOME /usr/local/bundle\n ---> Running in 50dea67fe8d2\nRemoving intermediate container 50dea67fe8d2\n ---> 0811f66e7189\nStep 19/33 : ENV BUNDLE_PATH=\"$GEM_HOME\"     BUNDLE_BIN=\"$GEM_HOME/bin\"     BUNDLE_SILENCE_ROOT_WARNING=1     BUNDLE_APP_CONFIG=\"$GEM_HOME\"\n ---> Running in 0e376c634ee7\nRemoving intermediate container 0e376c634ee7\n ---> 77c30bd37d2e\nStep 20/33 : ENV PATH $BUNDLE_BIN:$PATH\n ---> Running in 3f56c2a585c9\nRemoving intermediate container 3f56c2a585c9\n ---> 40614b7dc1fe\nStep 21/33 : RUN gem install --quiet --no-document fpm\n ---> Running in 5178b09d554e\nSuccessfully installed cabin-0.9.0\nSuccessfully installed backports-3.23.0\nSuccessfully installed arr-pm-0.0.12\nSuccessfully installed clamp-1.0.1\nSuccessfully installed dotenv-2.8.1\nSuccessfully installed insist-1.0.0\nSuccessfully installed mustache-0.99.8\nSuccessfully installed stud-0.0.23\nSuccessfully installed pleaserun-0.0.32\nSuccessfully installed rexml-3.2.5\nSuccessfully installed fpm-1.15.0\n11 gems installed\nRemoving intermediate container 5178b09d554e\n ---> 01e0faf1296f\nStep 22/33 : RUN gem install --quiet --no-document package_cloud\n ---> Running in 16fa43d2a393\nSuccessfully installed thor-1.2.1\nSuccessfully installed highline-2.0.3\nSuccessfully installed netrc-0.11.0\nSuccessfully installed mime-types-data-3.2022.0105\nSuccessfully installed mime-types-3.4.1\nBuilding native extensions. This could take a while...\nSuccessfully installed unf_ext-0.0.8.2\nSuccessfully installed unf-0.1.4\nSuccessfully installed domain_name-0.5.20190701\nSuccessfully installed http-cookie-1.0.5\nSuccessfully installed http-accept-1.7.0\nSuccessfully installed rest-client-2.1.0\nSuccessfully installed json_pure-2.3.1\nBuilding native extensions. This could take a while...\nSuccessfully installed rainbow-2.2.2\nSuccessfully installed package_cloud-0.3.11\n14 gems installed\nRemoving intermediate container 16fa43d2a393\n ---> 3dfa527563d4\nStep 23/33 : RUN mkdir /build\n ---> Running in 6ad272ef2fed\nRemoving intermediate container 6ad272ef2fed\n ---> 8ea2bd69f061\nStep 24/33 : RUN mkdir -p /source/etc/immortal   && mkdir -p /source/tmp/immortal   && mkdir -p /source/usr/local/man/man8\n ---> Running in 4d21d7c4c2e0\nRemoving intermediate container 4d21d7c4c2e0\n ---> 43d36e4a5f98\nStep 25/33 : COPY --from=builder /build /build\n ---> 3a8e22b0e62a\nStep 26/33 : COPY --from=builder /man/* /source/usr/local/man/man8/\n ---> 07ee5187cc15\nStep 27/33 : RUN mkdir deb-package\n ---> Running in 747feb34e4ac\nRemoving intermediate container 747feb34e4ac\n ---> f89f630c3b47\nStep 28/33 : WORKDIR deb-package\n ---> Running in 86cd3878374a\nRemoving intermediate container 86cd3878374a\n ---> b677ec7eda15\nStep 29/33 : RUN git clone https://github.com/immortal/packages.git scripts\n ---> Running in f7bca5f9453b\n\u001b[91mCloning into 'scripts'...\n\u001b[0mRemoving intermediate container f7bca5f9453b\n ---> 344dcabbfa1d\nStep 30/33 : RUN cp scripts/* /source/tmp/immortal\n ---> Running in 124fda6320ed\nRemoving intermediate container 124fda6320ed\n ---> 1c06bdcafc71\nStep 31/33 : RUN fpm --output-type deb   --input-type dir   --name immortal   --version ${VERSION}   --description 'A *nix cross-platform (OS agnostic) supervisor'   --url 'https://immortal.run'   --after-install scripts/after-install.sh   --before-remove scripts/before-remove.sh   --package immortal_${VERSION}_i386.deb   --architecture i386   --chdir /   /source/=/ /build/386/=/usr/bin; done\n ---> Running in 3be2f8af3897\n{:timestamp=>\"2023-01-01T07:51:48.399355+0000\", :message=>\"Debian packaging tools generally labels all files in /etc as config files, as mandated by policy, so fpm defaults to this behavior for deb packages. You can disable this default behavior with --deb-no-default-config-files flag\", :level=>:warn}\n{:timestamp=>\"2023-01-01T07:51:49.506013+0000\", :message=>\"Created package\", :path=>\"immortal_0.0.0_i386.deb\"}\nRemoving intermediate container 3be2f8af3897\n ---> 1e1468b13b51\nStep 32/33 : RUN for arch in /build/*; do   fpm --output-type deb   --input-type dir   --name immortal   --version ${VERSION}   --description 'A *nix cross-platform (OS agnostic) supervisor'   --url 'https://immortal.run'   --after-install scripts/after-install.sh   --before-remove scripts/before-remove.sh   --package immortal_${VERSION}_${arch##*/}.deb   --architecture ${arch##*/}   --chdir /   /source/=/ /build/${arch##*/}/=/usr/bin; done\n ---> Running in 401789678f9b\n{:timestamp=>\"2023-01-01T07:51:56.318349+0000\", :message=>\"Debian packaging tools generally labels all files in /etc as config files, as mandated by policy, so fpm defaults to this behavior for deb packages. You can disable this default behavior with --deb-no-default-config-files flag\", :level=>:warn}\n{:timestamp=>\"2023-01-01T07:51:57.606939+0000\", :message=>\"Created package\", :path=>\"immortal_0.0.0_386.deb\"}\n{:timestamp=>\"2023-01-01T07:51:58.052052+0000\", :message=>\"Debian packaging tools generally labels all files in /etc as config files, as mandated by policy, so fpm defaults to this behavior for deb packages. You can disable this default behavior with --deb-no-default-config-files flag\", :level=>:warn}\n{:timestamp=>\"2023-01-01T07:51:59.162041+0000\", :message=>\"Created package\", :path=>\"immortal_0.0.0_amd64.deb\"}\n{:timestamp=>\"2023-01-01T07:52:00.153228+0000\", :message=>\"Debian packaging tools generally labels all files in /etc as config files, as mandated by policy, so fpm defaults to this behavior for deb packages. You can disable this default behavior with --deb-no-default-config-files flag\", :level=>:warn}\n{:timestamp=>\"2023-01-01T07:52:01.270753+0000\", :message=>\"Created package\", :path=>\"immortal_0.0.0_arm.deb\"}\n{:timestamp=>\"2023-01-01T07:52:01.642448+0000\", :message=>\"Debian packaging tools generally labels all files in /etc as config files, as mandated by policy, so fpm defaults to this behavior for deb packages. You can disable this default behavior with --deb-no-default-config-files flag\", :level=>:warn}\n{:timestamp=>\"2023-01-01T07:52:02.642479+0000\", :message=>\"Created package\", :path=>\"immortal_0.0.0_arm64.deb\"}\n{:timestamp=>\"2023-01-01T07:52:03.334256+0000\", :message=>\"Debian packaging tools generally labels all files in /etc as config files, as mandated by policy, so fpm defaults to this behavior for deb packages. You can disable this default behavior with --deb-no-default-config-files flag\", :level=>:warn}\n{:timestamp=>\"2023-01-01T07:52:05.287394+0000\", :message=>\"Created package\", :path=>\"immortal_0.0.0_mips.deb\"}\n{:timestamp=>\"2023-01-01T07:52:06.503968+0000\", :message=>\"Debian packaging tools generally labels all files in /etc as config files, as mandated by policy, so fpm defaults to this behavior for deb packages. You can disable this default behavior with --deb-no-default-config-files flag\", :level=>:warn}\n{:timestamp=>\"2023-01-01T07:52:07.600939+0000\", :message=>\"Created package\", :path=>\"immortal_0.0.0_mips64.deb\"}\n{:timestamp=>\"2023-01-01T07:52:08.153520+0000\", :message=>\"Debian packaging tools generally labels all files in /etc as config files, as mandated by policy, so fpm defaults to this behavior for deb packages. You can disable this default behavior with --deb-no-default-config-files flag\", :level=>:warn}\n{:timestamp=>\"2023-01-01T07:52:09.141446+0000\", :message=>\"Created package\", :path=>\"immortal_0.0.0_mips64le.deb\"}\n{:timestamp=>\"2023-01-01T07:52:09.614273+0000\", :message=>\"Debian packaging tools generally labels all files in /etc as config files, as mandated by policy, so fpm defaults to this behavior for deb packages. You can disable this default behavior with --deb-no-default-config-files flag\", :level=>:warn}\n{:timestamp=>\"2023-01-01T07:52:10.716870+0000\", :message=>\"Created package\", :path=>\"immortal_0.0.0_mipsle.deb\"}\n{:timestamp=>\"2023-01-01T07:52:11.098155+0000\", :message=>\"Debian packaging tools generally labels all files in /etc as config files, as mandated by policy, so fpm defaults to this behavior for deb packages. You can disable this default behavior with --deb-no-default-config-files flag\", :level=>:warn}\n{:timestamp=>\"2023-01-01T07:52:12.034167+0000\", :message=>\"Created package\", :path=>\"immortal_0.0.0_ppc64.deb\"}\n{:timestamp=>\"2023-01-01T07:52:12.860260+0000\", :message=>\"Debian packaging tools generally labels all files in /etc as config files, as mandated by policy, so fpm defaults to this behavior for deb packages. You can disable this default behavior with --deb-no-default-config-files flag\", :level=>:warn}\n{:timestamp=>\"2023-01-01T07:52:15.170772+0000\", :message=>\"Created package\", :path=>\"immortal_0.0.0_ppc64le.deb\"}\nRemoving intermediate container 401789678f9b\n ---> da16a6ddf41e\nStep 33/33 : RUN for arch in /build/*; do   fpm --output-type rpm   --input-type dir   --name immortal   --version ${VERSION}   --description 'A *nix cross-platform (OS agnostic) supervisor'   --url 'https://immortal.run'   --after-install scripts/after-install.sh   --before-remove scripts/before-remove.sh   --package immortal_${VERSION}_${arch##*/}.rpm   --architecture ${arch##*/}   --chdir /   /source/=/ /build/${arch##*/}/=/usr/bin; done\n ---> Running in ec30507a7453\n{:timestamp=>\"2023-01-01T07:52:33.579697+0000\", :message=>\"Created package\", :path=>\"immortal_0.0.0_386.rpm\"}\n{:timestamp=>\"2023-01-01T07:52:36.884066+0000\", :message=>\"Created package\", :path=>\"immortal_0.0.0_amd64.rpm\"}\n{:timestamp=>\"2023-01-01T07:52:40.369868+0000\", :message=>\"Created package\", :path=>\"immortal_0.0.0_arm.rpm\"}\n{:timestamp=>\"2023-01-01T07:52:43.298131+0000\", :message=>\"Created package\", :path=>\"immortal_0.0.0_arm64.rpm\"}\n{:timestamp=>\"2023-01-01T07:52:47.569557+0000\", :message=>\"Created package\", :path=>\"immortal_0.0.0_mips.rpm\"}\n{:timestamp=>\"2023-01-01T07:52:52.961109+0000\", :message=>\"Created package\", :path=>\"immortal_0.0.0_mips64.rpm\"}\n{:timestamp=>\"2023-01-01T07:52:56.494048+0000\", :message=>\"Created package\", :path=>\"immortal_0.0.0_mips64le.rpm\"}\n{:timestamp=>\"2023-01-01T07:53:01.172151+0000\", :message=>\"Created package\", :path=>\"immortal_0.0.0_mipsle.rpm\"}\n{:timestamp=>\"2023-01-01T07:53:05.649611+0000\", :message=>\"Created package\", :path=>\"immortal_0.0.0_ppc64.rpm\"}\n{:timestamp=>\"2023-01-01T07:53:09.896363+0000\", :message=>\"Created package\", :path=>\"immortal_0.0.0_ppc64le.rpm\"}\nRemoving intermediate container ec30507a7453\n ---> d34fcae57ac7\nSuccessfully built d34fcae57ac7\nSuccessfully tagged immortal:latest\n","stderr":"","imageSize":1663520911},"endTime":1672559605420}