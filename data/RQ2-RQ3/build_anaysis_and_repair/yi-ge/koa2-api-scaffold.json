{"repository":"https://github.com/yi-ge/koa2-api-scaffold","dockerfilePath":"Dockerfile","startTime":1672681884825,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/yi-ge/koa2-api-scaffold'...\n","error":null,"commit":"57904e3f4c72e24794440a3a454f1b556b758e8d"},"originalBuild":{"startTimestamp":1672681885723,"endTimestamp":1672681946759,"error":null,"stdout":"Sending build context to Docker daemon  410.6kB\r\r\nStep 1/10 : FROM node:10-alpine\n10-alpine: Pulling from library/node\nddad3d7c1e96: Pulling fs layer\nde915e575d22: Pulling fs layer\n7150aa69525b: Pulling fs layer\nd7aa47be044e: Pulling fs layer\nd7aa47be044e: Waiting\nddad3d7c1e96: Verifying Checksum\nddad3d7c1e96: Download complete\n7150aa69525b: Verifying Checksum\n7150aa69525b: Download complete\nddad3d7c1e96: Pull complete\nde915e575d22: Verifying Checksum\nde915e575d22: Download complete\nd7aa47be044e: Verifying Checksum\nd7aa47be044e: Download complete\nde915e575d22: Pull complete\n7150aa69525b: Pull complete\nd7aa47be044e: Pull complete\nDigest: sha256:dc98dac24efd4254f75976c40bce46944697a110d06ce7fa47e7268470cf2e28\nStatus: Downloaded newer image for node:10-alpine\n ---> aa67ba258e18\nStep 2/10 : ENV EXPOSE_PORT 3000\n ---> Running in fef0b5c4478d\nRemoving intermediate container fef0b5c4478d\n ---> 4849439f02e8\nStep 3/10 : ENV TZ=Asia/Shanghai\n ---> Running in 43520f508300\nRemoving intermediate container 43520f508300\n ---> 653b18c44f47\nStep 4/10 : WORKDIR /app\n ---> Running in 951cc4a4b003\nRemoving intermediate container 951cc4a4b003\n ---> 9be42208ce7d\nStep 5/10 : COPY package*.json ./\n ---> c8cfb3e50f11\nStep 6/10 : RUN npm install -g @babel/cli @babel/core     && npm install\n ---> Running in efe0afed14d5\n/usr/local/bin/babel -> /usr/local/lib/node_modules/@babel/cli/bin/babel.js\n/usr/local/bin/babel-external-helpers -> /usr/local/lib/node_modules/@babel/cli/bin/babel-external-helpers.js\n\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.2 (node_modules/@babel/cli/node_modules/chokidar/node_modules/fsevents):\nnpm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\n\u001b[0m+ @babel/core@7.20.7\n+ @babel/cli@7.20.7\nadded 91 packages from 46 contributors in 7.156s\n\u001b[91mnpm WARN deprecated babel-eslint@10.1.0: babel-eslint is now @babel/eslint-parser. This package will no longer receive updates.\n\u001b[0m\u001b[91mnpm WARN deprecated sequelize@5.22.5: Please update to v6 or higher! A migration guide can be found here: https://sequelize.org/v6/manual/upgrade-to-v6.html\n\u001b[0m\u001b[91mnpm WARN deprecated formidable@1.2.6: Please upgrade to latest, formidable@v2 or formidable@v3! Check these notes: https://bit.ly/2ZEqIau\n\u001b[0m\u001b[91mnpm WARN deprecated chokidar@2.1.8: Chokidar 2 does not receive security updates since 2019. Upgrade to chokidar 3 with 15x fewer dependencies\n\u001b[0m\u001b[91mnpm WARN deprecated core-js@2.6.12: core-js@<3.23.3 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Some versions have web compatibility issues. Please, upgrade your dependencies to the actual version of core-js.\n\u001b[0m\u001b[91mnpm WARN deprecated fsevents@1.2.13: fsevents 1 will break on node v14+ and could be using insecure binaries. Upgrade to fsevents 2.\n\u001b[0m\u001b[91mnpm WARN deprecated sane@4.1.0: some dependency vulnerabilities fixed, support for node < 10 dropped, and newer ECMAScript syntax/features added\n\u001b[0m\u001b[91mnpm WARN deprecated source-map-resolve@0.5.3: See https://github.com/lydell/source-map-resolve#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142\n\u001b[0m\u001b[91mnpm WARN deprecated w3c-hr-time@1.0.2: Use your platform's native performance.now() and performance.timeOrigin.\n\u001b[0m\u001b[91mnpm WARN deprecated request-promise-native@1.0.9: request-promise-native has been deprecated because it extends the now deprecated request package, see https://github.com/request/request/issues/3142\n\u001b[0m\u001b[91mnpm WARN deprecated resolve-url@0.2.1: https://github.com/lydell/resolve-url#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated urix@0.1.0: Please see https://github.com/lydell/urix#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated har-validator@5.1.5: this library is no longer supported\n\u001b[0m\u001b[91mnpm WARN deprecated uuid@3.4.0: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.\n\u001b[0m\u001b[91mnpm WARN deprecated source-map-url@0.4.1: See https://github.com/lydell/source-map-url#deprecated\n\u001b[0m\n> core-js@2.6.12 postinstall /app/node_modules/core-js\n> node -e \"try{require('./postinstall')}catch(e){}\"\n\n\u001b[96mThank you for using core-js (\u001b[94m https://github.com/zloirock/core-js \u001b[96m) for polyfilling JavaScript standard library!\u001b[0m\n\n\u001b[96mThe project needs your help! Please consider supporting of core-js on Open Collective or Patreon: \u001b[0m\n\u001b[96m>\u001b[94m https://opencollective.com/core-js \u001b[0m\n\u001b[96m>\u001b[94m https://www.patreon.com/zloirock \u001b[0m\n\n\u001b[96mAlso, the author of core-js (\u001b[94m https://github.com/zloirock \u001b[96m) is looking for a good job -)\u001b[0m\n\n\n> es5-ext@0.10.62 postinstall /app/node_modules/es5-ext\n>  node -e \"try{require('./_postinstall')}catch(e){}\" || exit 0\n\n\u001b[91mnpm notice created a lockfile as package-lock.json. You should commit this file.\n\u001b[0m\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.2 (node_modules/chokidar/node_modules/fsevents):\nnpm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@^1.2.7 (node_modules/glob-watcher/node_modules/chokidar/node_modules/fsevents):\nnpm WARN notsup\u001b[0m\u001b[91m SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.2.13: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91mnpm WARN\u001b[0m\u001b[91m tsutils@3.21.0 requires a peer of typescript@>=2.8.0 || >= 3.2.0-dev || >= 3.3.0-dev || >= 3.4.0-dev || >= 3.5.0-dev || >= 3.6.0-dev || >= 3.6.0-beta || >= 3.7.0-dev || >= 3.7.0-beta but none is installed. You must install peer dependencies yourself.\n\u001b[0m\u001b[91mnpm WARN koa2-api-scaffold@1.0.4 No repository field.\n\u001b[0m\u001b[91m\n\u001b[0madded 1286 packages from 584 contributors and audited 1290 packages in 27.541s\n\n89 packages are looking for funding\n  run `npm fund` for details\n\nfound 20 vulnerabilities (13 moderate, 7 high)\n  run `npm audit fix` to fix them, or `npm audit` for details\nRemoving intermediate container efe0afed14d5\n ---> 471458218537\nStep 7/10 : COPY . .\n ---> 179ff178675b\nStep 8/10 : RUN npm run build\n ---> Running in f01833d6d892\n\n> koa2-api-scaffold@1.0.4 build /app\n> babel src -d dist\n\nSuccessfully compiled 14 files with Babel (473ms).\nRemoving intermediate container f01833d6d892\n ---> a92c0a9f710d\nStep 9/10 : EXPOSE ${EXPOSE_PORT}\n ---> Running in c7215b74e3a5\nRemoving intermediate container c7215b74e3a5\n ---> 34a450922034\nStep 10/10 : ENTRYPOINT [ \"node\", \"/app/dist/app.js\" ]\n ---> Running in a8c0411f234e\nRemoving intermediate container a8c0411f234e\n ---> 00cca0471a37\nSuccessfully built 00cca0471a37\nSuccessfully tagged koa2-api-scaffold:latest\n","stderr":"","imageSize":271091909},"repair":{"violations":[{"name":"npmCacheCleanAfterInstall","position":{"start":9,"end":9,"columnStart":4,"columnEnd":41}},{"name":"npmCacheCleanAfterInstall","position":{"start":10,"end":10,"columnStart":7,"columnEnd":18}}],"repairedDockerfile":"FROM node:10-alpine\n\nENV EXPOSE_PORT 3000\nENV TZ=Asia/Shanghai\n\nWORKDIR /app\n\nCOPY package*.json ./\n\nRUN npm install -g @babel/cli @babel/core \\\n    && npm install\n\nCOPY . .\n\nRUN npm run build\n\nEXPOSE ${EXPOSE_PORT}\n\nENTRYPOINT [ \"node\", \"/app/dist/app.js\" ]"},"repairedBuild":{"startTimestamp":1672681947621,"endTimestamp":1672681992440,"error":null,"stdout":"Sending build context to Docker daemon  410.6kB\r\r\nStep 1/10 : FROM node:10-alpine\n ---> aa67ba258e18\nStep 2/10 : ENV EXPOSE_PORT 3000\n ---> Running in 6d9bfba411b2\nRemoving intermediate container 6d9bfba411b2\n ---> f7ae92a62e82\nStep 3/10 : ENV TZ=Asia/Shanghai\n ---> Running in 8db68ac9f7e4\nRemoving intermediate container 8db68ac9f7e4\n ---> ee433cb64f58\nStep 4/10 : WORKDIR /app\n ---> Running in 904af71c9919\nRemoving intermediate container 904af71c9919\n ---> b737da0b245f\nStep 5/10 : COPY package*.json ./\n ---> 21c8bfdd9b2f\nStep 6/10 : RUN npm install -g @babel/cli @babel/core     && npm install\n ---> Running in 7f9ae767a14e\n/usr/local/bin/babel -> /usr/local/lib/node_modules/@babel/cli/bin/babel.js\n/usr/local/bin/babel-external-helpers -> /usr/local/lib/node_modules/@babel/cli/bin/babel-external-helpers.js\n\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.2 (node_modules/@babel/cli/node_modules/chokidar/node_modules/fsevents):\n\u001b[0m\u001b[91mnpm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91m\n\u001b[0m+ @babel/cli@7.20.7\n+ @babel/core@7.20.7\nadded 91 packages from 46 contributors in 5.109s\n\u001b[91mnpm WARN deprecated babel-eslint@10.1.0: babel-eslint is now @babel/eslint-parser. This package will no longer receive updates.\n\u001b[0m\u001b[91mnpm WARN deprecated sequelize@5.22.5: Please update to v6 or higher! A migration guide can be found here: https://sequelize.org/v6/manual/upgrade-to-v6.html\n\u001b[0m\u001b[91mnpm WARN deprecated formidable@1.2.6: Please upgrade to latest, formidable@v2 or formidable@v3! Check these notes: https://bit.ly/2ZEqIau\n\u001b[0m\u001b[91mnpm WARN deprecated chokidar@2.1.8: Chokidar 2 does not receive security updates since 2019. Upgrade to chokidar 3 with 15x fewer dependencies\n\u001b[0m\u001b[91mnpm WARN deprecated core-js@2.6.12: core-js@<3.23.3 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Some versions have web compatibility issues. Please, upgrade your dependencies to the actual version of core-js.\n\u001b[0m\u001b[91mnpm WARN deprecated sane@4.1.0: some dependency vulnerabilities fixed, support for node < 10 dropped, and newer ECMAScript syntax/features added\n\u001b[0m\u001b[91mnpm WARN deprecated fsevents@1.2.13: fsevents 1 will break on node v14+ and could be using insecure binaries. Upgrade to fsevents 2.\n\u001b[0m\u001b[91mnpm WARN deprecated source-map-resolve@0.5.3: See https://github.com/lydell/source-map-resolve#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated request-promise-native@1.0.9: request-promise-native has been deprecated because it extends the now deprecated request package, see https://github.com/request/request/issues/3142\n\u001b[0m\u001b[91mnpm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142\n\u001b[0m\u001b[91mnpm WARN deprecated w3c-hr-time@1.0.2: Use your platform's native performance.now() and performance.timeOrigin.\n\u001b[0m\u001b[91mnpm WARN deprecated resolve-url@0.2.1: https://github.com/lydell/resolve-url#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated source-map-url@0.4.1: See https://github.com/lydell/source-map-url#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated urix@0.1.0: Please see https://github.com/lydell/urix#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated har-validator@5.1.5: this library is no longer supported\n\u001b[0m\u001b[91mnpm WARN deprecated uuid@3.4.0: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.\n\u001b[0m\n> core-js@2.6.12 postinstall /app/node_modules/core-js\n> node -e \"try{require('./postinstall')}catch(e){}\"\n\n\u001b[96mThank you for using core-js (\u001b[94m https://github.com/zloirock/core-js \u001b[96m) for polyfilling JavaScript standard library!\u001b[0m\n\n\u001b[96mThe project needs your help! Please consider supporting of core-js on Open Collective or Patreon: \u001b[0m\n\u001b[96m>\u001b[94m https://opencollective.com/core-js \u001b[0m\n\u001b[96m>\u001b[94m https://www.patreon.com/zloirock \u001b[0m\n\n\u001b[96mAlso, the author of core-js (\u001b[94m https://github.com/zloirock \u001b[96m) is looking for a good job -)\u001b[0m\n\n\n> es5-ext@0.10.62 postinstall /app/node_modules/es5-ext\n>  node -e \"try{require('./_postinstall')}catch(e){}\" || exit 0\n\n\u001b[91mnpm notice created a lockfile as package-lock.json. You should commit this file.\n\u001b[0m\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.2 (node_modules/chokidar/node_modules/fsevents):\nnpm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@^1.2.7 (node_modules/glob-watcher/node_modules/chokidar/node_modules/fsevents):\nnpm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.2.13: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91mnpm WARN\u001b[0m\u001b[91m tsutils@3.21.0 requires a peer of typescript@>=2.8.0 || >= 3.2.0-dev || >= 3.3.0-dev || >= 3.4.0-dev || >= 3.5.0-dev || >= 3.6.0-dev || >= 3.6.0-beta || >= 3.7.0-dev || >= 3.7.0-beta but none is installed. You must install peer dependencies yourself.\n\u001b[0m\u001b[91mnpm WARN\u001b[0m\u001b[91m koa2-api-scaffold@1.0.4 No repository field.\n\u001b[0m\u001b[91m\n\u001b[0madded 1286 packages from 584 contributors and audited 1290 packages in 19.353s\n\n89 packages are looking for funding\n  run `npm fund` for details\n\nfound 20 vulnerabilities (13 moderate, 7 high)\n  run `npm audit fix` to fix them, or `npm audit` for details\nRemoving intermediate container 7f9ae767a14e\n ---> bfc8a1d1cbfb\nStep 7/10 : COPY . .\n ---> 84dd66c8e8d2\nStep 8/10 : RUN npm run build\n ---> Running in 99f43c5e8ca6\n\n> koa2-api-scaffold@1.0.4 build /app\n> babel src -d dist\n\nSuccessfully compiled 14 files with Babel (454ms).\nRemoving intermediate container 99f43c5e8ca6\n ---> 7e5b00c41900\nStep 9/10 : EXPOSE ${EXPOSE_PORT}\n ---> Running in 12d75e8d3551\nRemoving intermediate container 12d75e8d3551\n ---> 3ab8983489d7\nStep 10/10 : ENTRYPOINT [ \"node\", \"/app/dist/app.js\" ]\n ---> Running in dbe8b7512332\nRemoving intermediate container dbe8b7512332\n ---> e8ab540ee040\nSuccessfully built e8ab540ee040\nSuccessfully tagged koa2-api-scaffold:latest\n","stderr":"","imageSize":271100590},"endTime":1672681993195}