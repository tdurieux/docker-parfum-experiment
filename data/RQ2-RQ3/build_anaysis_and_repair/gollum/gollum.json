{"repository":"https://github.com/gollum/gollum","dockerfilePath":"Dockerfile","startTime":1672364775077,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/gollum/gollum'...\n","error":null,"commit":"178a6da140682de1d4cb682c45933874b599faab"},"originalBuild":{"startTimestamp":1672364776552,"endTimestamp":1672364966594,"error":null,"stdout":"Sending build context to Docker daemon  20.59MB\r\r\nStep 1/21 : FROM ruby:3.1-alpine AS builder\n3.1-alpine: Pulling from library/ruby\nc158987b0551: Already exists\nf1b187fb4925: Pulling fs layer\nddec471ccce4: Pulling fs layer\n24fc756522e2: Pulling fs layer\n960f237e1cd4: Pulling fs layer\n960f237e1cd4: Waiting\nddec471ccce4: Download complete\nf1b187fb4925: Verifying Checksum\nf1b187fb4925: Download complete\n24fc756522e2: Verifying Checksum\n24fc756522e2: Download complete\n960f237e1cd4: Download complete\nf1b187fb4925: Pull complete\nddec471ccce4: Pull complete\n24fc756522e2: Pull complete\n960f237e1cd4: Pull complete\nDigest: sha256:2b6520b4b99dd3aca29c1ea57c0a3bf406fff4624b5bd712984853989d650f51\nStatus: Downloaded newer image for ruby:3.1-alpine\n ---> ffd60f8fc6ad\nStep 2/21 : RUN apk add --update             --no-cache             build-base             cmake             git             icu-dev             openssl-dev             yaml-dev     && rm -rf /var/cache/apk/*\n ---> Running in 421c2c9e2b58\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/37) Installing binutils (2.39-r2)\n(2/37) Installing libmagic (5.43-r0)\n(3/37) Installing file (5.43-r0)\n(4/37) Installing libgomp (12.2.1_git20220924-r4)\n(5/37) Installing libatomic (12.2.1_git20220924-r4)\n(6/37) Installing isl25 (0.25-r0)\n(7/37) Installing mpfr4 (4.1.0-r0)\n(8/37) Installing mpc1 (1.2.1-r1)\n(9/37) Installing gcc (12.2.1_git20220924-r4)\n(10/37) Installing libstdc++-dev (12.2.1_git20220924-r4)\n(11/37) Installing musl-dev (1.2.3-r4)\n(12/37) Installing libc-dev (0.7.2-r3)\n(13/37) Installing g++ (12.2.1_git20220924-r4)\n(14/37) Installing make (4.3-r1)\n(15/37) Installing fortify-headers (1.1-r1)\n(16/37) Installing patch (2.7.6-r8)\n(17/37) Installing build-base (0.5-r3)\n(18/37) Installing libacl (2.3.1-r1)\n(19/37) Installing libbz2 (1.0.8-r4)\n(20/37) Installing libexpat (2.5.0-r0)\n(21/37) Installing lz4-libs (1.9.4-r1)\n(22/37) Installing xz-libs (5.2.9-r0)\n(23/37) Installing zstd-libs (1.5.2-r9)\n(24/37) Installing libarchive (3.6.1-r2)\n(25/37) Installing brotli-libs (1.0.9-r9)\n(26/37) Installing nghttp2-libs (1.51.0-r0)\n(27/37) Installing libcurl (7.87.0-r0)\n(28/37) Installing rhash-libs (1.4.3-r1)\n(29/37) Installing libuv (1.44.2-r0)\n(30/37) Installing cmake (3.24.3-r0)\n(31/37) Installing pcre2 (10.42-r0)\n(32/37) Installing git (2.38.2-r0)\n(33/37) Installing icu-data-en (72.1-r1)\nExecuting icu-data-en-72.1-r1.post-install\n\u001b[91m*\n* If you need ICU with non-English locales and legacy charset support, install\n* package icu-data-full.\n*\n\u001b[0m(34/37) Installing icu-libs (72.1-r1)\n(35/37) Installing icu (72.1-r1)\n(36/37) Installing icu-dev (72.1-r1)\n(37/37) Installing openssl-dev (3.0.7-r0)\nExecuting busybox-1.35.0-r29.trigger\nOK: 335 MiB in 73 packages\nRemoving intermediate container 421c2c9e2b58\n ---> 7e4851774ab8\nStep 3/21 : COPY Gemfile* /tmp/\n ---> 481215893bf4\nStep 4/21 : COPY gollum.gemspec* /tmp/\n ---> 48271c715d75\nStep 5/21 : WORKDIR /tmp\n ---> Running in bc2cc49d74d9\nRemoving intermediate container bc2cc49d74d9\n ---> 2d488c3c97bd\nStep 6/21 : RUN bundle install\n ---> Running in f25ebfa14740\nFetching gem metadata from https://rubygems.org/.........\nResolving dependencies...\nUsing rake 13.0.6\nUsing bundler 2.3.26\nUsing ruby2_keywords 0.0.5\nUsing matrix 0.4.2\nFetching racc 1.6.2\nFetching unf_ext 0.0.8.2\nUsing rexml 3.2.5\nFetching builder 3.2.4\nFetching execjs 2.8.1\nFetching json 2.6.3\nFetching mime-types 1.25.1\nFetching rouge 3.30.0\nFetching stringio 3.0.4\nFetching tilt 2.0.11\nFetching therubyrhino_jar 1.7.8\nFetching useragent 0.16.10\nFetching websocket 1.2.9\nFetching shoulda-context 1.2.2\nFetching concurrent-ruby 1.1.10\nFetching minitest 5.16.3\nFetching public_suffix 5.0.1\nFetching ansi 1.5.0\nFetching mini_mime 1.1.2\nFetching rack 2.2.5\nFetching regexp_parser 2.6.1\nFetching crass 1.0.6\nFetching github-markup 4.0.1\nFetching rugged 1.1.1\nFetching mustache 0.99.8\nFetching multi_json 1.15.0\nFetching webrick 1.7.0\nFetching metaclass 0.0.4\nFetching ruby-progressbar 1.11.0\nFetching power_assert 2.0.3\nFetching rubyzip 2.3.2\nUsing rss 0.2.9\nFetching kramdown 2.4.0\nFetching mustermann 3.0.0\nInstalling useragent 0.16.10\nInstalling metaclass 0.0.4\nInstalling power_assert 2.0.3\nInstalling execjs 2.8.1\nInstalling stringio 3.0.4 with native extensions\nInstalling crass 1.0.6\nInstalling shoulda-context 1.2.2\nInstalling builder 3.2.4\nInstalling websocket 1.2.9\nInstalling multi_json 1.15.0\nInstalling regexp_parser 2.6.1\nInstalling mustache 0.99.8\nInstalling ansi 1.5.0\nInstalling json 2.6.3 with native extensions\nInstalling mime-types 1.25.1\nInstalling minitest 5.16.3\nInstalling github-markup 4.0.1\nInstalling mustermann 3.0.0\nInstalling ruby-progressbar 1.11.0\nInstalling mini_mime 1.1.2\nInstalling public_suffix 5.0.1\nInstalling rack 2.2.5\nInstalling racc 1.6.2 with native extensions\nInstalling tilt 2.0.11\nInstalling webrick 1.7.0\nInstalling rubyzip 2.3.2\nInstalling kramdown 2.4.0\nFetching mocha 1.8.0\nFetching test-unit 3.3.9\nFetching terser 1.1.13\nInstalling unf_ext 0.0.8.2 with native extensions\nInstalling concurrent-ruby 1.1.10\nInstalling rouge 3.30.0\nInstalling test-unit 3.3.9\nInstalling terser 1.1.13\nFetching rack-test 0.6.3\nFetching rack-protection 3.0.5\nFetching minitest-reporters 1.3.8\nInstalling mocha 1.8.0\nInstalling rack-test 0.6.3\nInstalling rack-protection 3.0.5\nFetching selenium-webdriver 4.7.1\nFetching addressable 2.8.1\nInstalling addressable 2.8.1\nFetching mustache-sinatra 1.0.1\nFetching sinatra 3.0.5\nFetching psych 5.0.1\nInstalling mustache-sinatra 1.0.1\nInstalling psych 5.0.1 with native extensions\nInstalling minitest-reporters 1.3.8\nInstalling sinatra 3.0.5\nInstalling rugged 1.1.1 with native extensions\nFetching nokogiri 1.13.10 (x86_64-linux)\nInstalling therubyrhino_jar 1.7.8\nFetching sinatra-contrib 3.0.5\nInstalling sinatra-contrib 3.0.5\nFetching tzinfo 2.0.5\nFetching i18n 1.12.0\nFetching sprockets 4.2.0\nInstalling i18n 1.12.0\nInstalling sprockets 4.2.0\nInstalling tzinfo 2.0.5\nFetching therubyrhino 2.1.2\nInstalling therubyrhino 2.1.2\nFetching unf 0.1.4\nFetching gemojione 4.3.3\nFetching activesupport 7.0.4\nInstalling unf 0.1.4\nInstalling activesupport 7.0.4\nFetching sprockets-helpers 1.4.0\nInstalling sprockets-helpers 1.4.0\nFetching twitter-text 1.14.7\nInstalling twitter-text 1.14.7\nFetching kramdown-parser-gfm 1.1.0\nInstalling kramdown-parser-gfm 1.1.0\nInstalling nokogiri 1.13.10 (x86_64-linux)\nFetching shoulda-matchers 3.1.3\nFetching rdoc 6.5.0\nInstalling shoulda-matchers 3.1.3\nInstalling selenium-webdriver 4.7.1\nInstalling rdoc 6.5.0\nFetching shoulda 3.6.0\nInstalling shoulda 3.6.0\nFetching xpath 3.2.0\nFetching octicons 12.1.0\nFetching loofah 2.19.1\nInstalling xpath 3.2.0\nInstalling loofah 2.19.1\nFetching capybara 3.38.0\nInstalling octicons 12.1.0\nInstalling capybara 3.38.0\nInstalling gemojione 4.3.3\nFetching gollum-rugged_adapter 1.1.2\nInstalling gollum-rugged_adapter 1.1.2\nFetching gollum-lib 5.2.1\nInstalling gollum-lib 5.2.1\nUsing gollum 5.3.0 from source at `.` and installing its executables\nBundle complete! 11 Gemfile dependencies, 71 gems now installed.\nUse `bundle info [gemname]` to see where a bundled gem is installed.\nPost-install message from rubyzip:\nRubyZip 3.0 is coming!\n**********************\n\nThe public API of some Rubyzip classes has been modernized to use named\nparameters for optional arguments. Please check your usage of the\nfollowing classes:\n  * `Zip::File`\n  * `Zip::Entry`\n  * `Zip::InputStream`\n  * `Zip::OutputStream`\n\nPlease ensure that your Gemfiles and .gemspecs are suitably restrictive\nto avoid an unexpected breakage when 3.0 is released (e.g. ~> 2.3.0).\nSee https://github.com/rubyzip/rubyzip for details. The Changelog also\nlists other enhancements and bugfixes that have been implemented since\nversion 2.3.0.\nRemoving intermediate container f25ebfa14740\n ---> d0bbcc7686ff\nStep 7/21 : RUN gem install     asciidoctor     creole     wikicloth     org-ruby     RedCloth     bibtex-ruby     && echo \"gem-extra complete\"\n ---> Running in 784530150ced\nSuccessfully installed asciidoctor-2.0.18\nSuccessfully installed creole-0.5.0\nSuccessfully installed htmlentities-4.3.4\nSuccessfully installed expression_parser-0.9.0\nSuccessfully installed wikicloth-0.8.3\nSuccessfully installed rubypants-0.7.1\nSuccessfully installed org-ruby-0.9.12\nBuilding native extensions. This could take a while...\nSuccessfully installed RedCloth-4.3.2\nSuccessfully installed latex-decode-0.4.0\nSuccessfully installed bibtex-ruby-6.0.0\n10 gems installed\ngem-extra complete\nRemoving intermediate container 784530150ced\n ---> efc722a3e290\nStep 8/21 : WORKDIR /app\n ---> Running in cf36121e44cd\nRemoving intermediate container cf36121e44cd\n ---> 870b588f26d6\nStep 9/21 : COPY . /app\n ---> f765c3c8c2e6\nStep 10/21 : RUN bundle exec rake install\n ---> Running in 51254abd744f\n\u001b[91mmkdir -p pkg\n\u001b[0mUpdated gollum.gemspec\n\u001b[91mgem build gollum.gemspec\n\u001b[0m  Successfully built RubyGem\n  Name: gollum\n  Version: 5.3.0\n  File: gollum-5.3.0.gem\n\u001b[91mmv gollum-5.3.0.gem pkg\n\u001b[0m\u001b[91mgem install --local --no-document pkg/gollum-5.3.0.gem\n\u001b[0mSuccessfully installed gollum-5.3.0\n1 gem installed\nRemoving intermediate container 51254abd744f\n ---> b718487def9d\nStep 11/21 : FROM ruby:3.1-alpine\n ---> ffd60f8fc6ad\nStep 12/21 : ARG UID=${UID:-1000}\n ---> Running in 4332fa639543\nRemoving intermediate container 4332fa639543\n ---> cdb44adfce83\nStep 13/21 : ARG GID=${GID:-1000}\n ---> Running in df96744830fb\nRemoving intermediate container df96744830fb\n ---> 22cccad3f3af\nStep 14/21 : COPY --from=builder /usr/local/bundle/ /usr/local/bundle/\n ---> e4238a2dcde8\nStep 15/21 : WORKDIR /wiki\n ---> Running in e975a4d67f87\nRemoving intermediate container e975a4d67f87\n ---> 12703ade95c4\nStep 16/21 : RUN apk add --update             --no-cache             bash             git             libc6-compat             shadow     && rm -rf /var/cache/apk/*     && groupmod -g $GID www-data     && adduser -u $UID -S www-data -G www-data\n ---> Running in 0d56537c3553\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/10) Installing bash (5.2.15-r0)\nExecuting bash-5.2.15-r0.post-install\n(2/10) Installing brotli-libs (1.0.9-r9)\n(3/10) Installing nghttp2-libs (1.51.0-r0)\n(4/10) Installing libcurl (7.87.0-r0)\n(5/10) Installing libexpat (2.5.0-r0)\n(6/10) Installing pcre2 (10.42-r0)\n(7/10) Installing git (2.38.2-r0)\n(8/10) Installing libc6-compat (1.2.3-r4)\n(9/10) Installing linux-pam (1.5.2-r1)\n(10/10) Installing shadow (4.13-r0)\nExecuting busybox-1.35.0-r29.trigger\nOK: 35 MiB in 46 packages\nRemoving intermediate container 0d56537c3553\n ---> ffd2e9a23c31\nStep 17/21 : COPY docker-run.sh /docker-run.sh\n ---> 03062377f51d\nStep 18/21 : RUN chmod +x /docker-run.sh\n ---> Running in 498d5e46bab9\nRemoving intermediate container 498d5e46bab9\n ---> 5c912d0af374\nStep 19/21 : USER www-data\n ---> Running in 44583b38de6c\nRemoving intermediate container 44583b38de6c\n ---> 173ad891a9f6\nStep 20/21 : VOLUME /wiki\n ---> Running in 7239ad9b4ffb\nRemoving intermediate container 7239ad9b4ffb\n ---> 9a6d113aca09\nStep 21/21 : ENTRYPOINT [\"/docker-run.sh\"]\n ---> Running in ecfaea005fb3\nRemoving intermediate container ecfaea005fb3\n ---> dc8d55c023fb\nSuccessfully built dc8d55c023fb\nSuccessfully tagged gollum:latest\n","stderr":"","imageSize":272201030},"repair":{"violations":[],"repairedDockerfile":"FROM ruby:3.1-alpine AS builder\n\nRUN apk add --update \\\n            --no-cache \\\n            build-base \\\n            cmake \\\n            git \\\n            icu-dev \\\n            openssl-dev \\\n            yaml-dev \\\n    && rm -rf /var/cache/apk/*\n\nCOPY Gemfile* /tmp/\nCOPY gollum.gemspec* /tmp/\nWORKDIR /tmp\nRUN bundle install\n\nRUN gem install \\\n    asciidoctor \\\n    creole \\\n    wikicloth \\\n    org-ruby \\\n    RedCloth \\\n    bibtex-ruby \\\n    && echo \"gem-extra complete\"\n\nWORKDIR /app\nCOPY . /app\nRUN bundle exec rake install\n\nFROM ruby:3.1-alpine\n\nARG UID=${UID:-1000}\nARG GID=${GID:-1000}\n\nCOPY --from=builder /usr/local/bundle/ /usr/local/bundle/\n\nWORKDIR /wiki\nRUN apk add --update \\\n            --no-cache \\\n            bash \\\n            git \\\n            libc6-compat \\\n            shadow \\\n    && rm -rf /var/cache/apk/* \\\n    && groupmod -g $GID www-data \\\n    && adduser -u $UID -S www-data -G www-data\n\nCOPY docker-run.sh /docker-run.sh\nRUN chmod +x /docker-run.sh\nUSER www-data\nVOLUME /wiki\n\nENTRYPOINT [\"/docker-run.sh\"]"},"endTime":1672364967342}