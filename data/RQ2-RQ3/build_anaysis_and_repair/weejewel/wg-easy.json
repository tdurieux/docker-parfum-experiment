{"repository":"https://github.com/weejewel/wg-easy","dockerfilePath":"Dockerfile","startTime":1673176388866,"endTime":1673176457444,"clone":{"startTime":1673176388867,"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/weejewel/wg-easy'...\n","error":null,"endTime":1673176389880,"commit":"736c62b4369dc7a6502139a3cbd3a177d3f61727"},"originalBuild":{"startTime":1673176389962,"endTime":1673176427090,"error":null,"stdout":"Sending build context to Docker daemon  4.479MB\r\r\nStep 1/14 : FROM docker.io/library/node:14-alpine@sha256:dc92f36e7cd917816fa2df041d4e9081453366381a00f40398d99e9392e78664 AS build_node_modules\ndocker.io/library/node:14-alpine@sha256:dc92f36e7cd917816fa2df041d4e9081453366381a00f40398d99e9392e78664: Pulling from library/node\n6a428f9f83b0: Pulling fs layer\nc7ad74aede75: Pulling fs layer\n995c08d8ac36: Pulling fs layer\nb6f2cf983ada: Pulling fs layer\nb6f2cf983ada: Waiting\n6a428f9f83b0: Verifying Checksum\n6a428f9f83b0: Download complete\n995c08d8ac36: Verifying Checksum\n995c08d8ac36: Download complete\n6a428f9f83b0: Pull complete\nc7ad74aede75: Verifying Checksum\nc7ad74aede75: Download complete\nb6f2cf983ada: Verifying Checksum\nb6f2cf983ada: Download complete\nc7ad74aede75: Pull complete\n995c08d8ac36: Pull complete\nb6f2cf983ada: Pull complete\nDigest: sha256:dc92f36e7cd917816fa2df041d4e9081453366381a00f40398d99e9392e78664\nStatus: Downloaded newer image for node:14-alpine@sha256:dc92f36e7cd917816fa2df041d4e9081453366381a00f40398d99e9392e78664\n ---> 211bb86587c9\nStep 2/14 : COPY src/ /app/\n ---> f1bcc2b17f3f\nStep 3/14 : WORKDIR /app\n ---> Running in 1f530f4e3a2c\nRemoving intermediate container 1f530f4e3a2c\n ---> f4462bb970bc\nStep 4/14 : RUN npm ci --production\n ---> Running in 868049adce34\nadded 115 packages in 1.156s\nRemoving intermediate container 868049adce34\n ---> aef01fb240c0\nStep 5/14 : FROM docker.io/library/node:14-alpine@sha256:dc92f36e7cd917816fa2df041d4e9081453366381a00f40398d99e9392e78664\n ---> 211bb86587c9\nStep 6/14 : COPY --from=build_node_modules /app /app\n ---> ec2edac95324\nStep 7/14 : RUN mv /app/node_modules /node_modules\n ---> Running in bd9da1561f7d\nRemoving intermediate container bd9da1561f7d\n ---> 8a1df737bbc8\nStep 8/14 : RUN npm i -g nodemon\n ---> Running in 58933c405f2b\n/usr/local/bin/nodemon -> /usr/local/lib/node_modules/nodemon/bin/nodemon.js\n\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.2 (node_modules/nodemon/node_modules/chokidar/node_modules/fsevents):\nnpm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91m\n\u001b[0m+ nodemon@2.0.20\nadded 32 packages from 28 contributors in 2.425s\nRemoving intermediate container 58933c405f2b\n ---> 226670a0345b\nStep 9/14 : RUN apk add -U --no-cache   wireguard-tools   dumb-init\n ---> Running in 3aab80d48e46\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.11/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.11/community/x86_64/APKINDEX.tar.gz\n(1/13) Installing dumb-init (1.2.2-r1)\n(2/13) Installing libmnl (1.0.4-r0)\n(3/13) Installing wireguard-tools-wg (1.0.20200102-r0)\n(4/13) Installing libnftnl-libs (1.1.5-r0)\n(5/13) Installing iptables (1.8.3-r2)\n(6/13) Installing iproute2 (5.4.0-r1)\nExecuting iproute2-5.4.0-r1.post-install\n(7/13) Installing ncurses-terminfo-base (6.1_p20200118-r4)\n(8/13) Installing ncurses-libs (6.1_p20200118-r4)\n(9/13) Installing readline (8.0.1-r0)\n(10/13) Installing bash (5.0.11-r1)\nExecuting bash-5.0.11-r1.post-install\n(11/13) Installing openresolv (3.9.2-r0)\n(12/13) Installing wireguard-tools-wg-quick (1.0.20200102-r0)\n(13/13) Installing wireguard-tools (1.0.20200102-r0)\nExecuting busybox-1.31.1-r10.trigger\nOK: 14 MiB in 29 packages\nRemoving intermediate container 3aab80d48e46\n ---> 342c0dce41e9\nStep 10/14 : EXPOSE 51820/udp\n ---> Running in 2b9e1e36a672\nRemoving intermediate container 2b9e1e36a672\n ---> 2dbfbae93267\nStep 11/14 : EXPOSE 51821/tcp\n ---> Running in b0907611432e\nRemoving intermediate container b0907611432e\n ---> c85fcaf41933\nStep 12/14 : ENV DEBUG=Server,WireGuard\n ---> Running in f4eb7c45a5aa\nRemoving intermediate container f4eb7c45a5aa\n ---> aaf5bd0490c9\nStep 13/14 : WORKDIR /app\n ---> Running in 42f815f4e7ec\nRemoving intermediate container 42f815f4e7ec\n ---> 0d212e1a7b9e\nStep 14/14 : CMD [\"/usr/bin/dumb-init\", \"node\", \"server.js\"]\n ---> Running in 84b0a970e45d\nRemoving intermediate container 84b0a970e45d\n ---> f05a488ea038\nSuccessfully built f05a488ea038\nSuccessfully tagged wg-easy:latest\n","stderr":"","imageSize":137932154},"repair":{"startTime":1673176427144,"endTime":1673176427215,"violations":[{"name":"npmCacheCleanAfterInstall","position":{"start":33,"end":33,"columnStart":4,"columnEnd":20}}],"repairedDockerfile":"# There's an issue with node:16-alpine.\n# On Raspberry Pi, the following crash happens:\n\n# #FailureMessage Object: 0x7e87753c\n# #\n# # Fatal error in , line 0\n# # unreachable code\n# #\n# #\n# #\n\nFROM docker.io/library/node:14-alpine@sha256:dc92f36e7cd917816fa2df041d4e9081453366381a00f40398d99e9392e78664 AS build_node_modules\n\n# Copy Web UI\nCOPY src/ /app/\nWORKDIR /app\nRUN npm ci --production\n\n# Copy build result to a new image.\n# This saves a lot of disk space.\nFROM docker.io/library/node:14-alpine@sha256:dc92f36e7cd917816fa2df041d4e9081453366381a00f40398d99e9392e78664\nCOPY --from=build_node_modules /app /app\n\n# Move node_modules one directory up, so during development\n# we don't have to mount it in a volume.\n# This results in much faster reloading!\n#\n# Also, some node_modules might be native, and\n# the architecture & OS of your development machine might differ\n# than what runs inside of docker.\nRUN mv /app/node_modules /node_modules\n\n# Enable this to run `npm run serve`\nRUN npm i -g nodemon && npm cache clean --force;\n\n# Install Linux packages\nRUN apk add -U --no-cache \\\n  wireguard-tools \\\n  dumb-init\n\n# Expose Ports\nEXPOSE 51820/udp\nEXPOSE 51821/tcp\n\n# Set Environment\nENV DEBUG=Server,WireGuard\n\n# Run Web UI\nWORKDIR /app\nCMD [\"/usr/bin/dumb-init\", \"node\", \"server.js\"]\n"},"repairedBuild":{"startTime":1673176427416,"endTime":1673176457088,"error":null,"stdout":"Sending build context to Docker daemon  4.479MB\r\r\nStep 1/14 : FROM docker.io/library/node:14-alpine@sha256:dc92f36e7cd917816fa2df041d4e9081453366381a00f40398d99e9392e78664 AS build_node_modules\n ---> 211bb86587c9\nStep 2/14 : COPY src/ /app/\n ---> acf1421a9f25\nStep 3/14 : WORKDIR /app\n ---> Running in 61d4f9f99246\nRemoving intermediate container 61d4f9f99246\n ---> 81c24bdee97b\nStep 4/14 : RUN npm ci --production\n ---> Running in 471b73e97707\nadded 115 packages in 1.03s\nRemoving intermediate container 471b73e97707\n ---> 4bc5aeaff852\nStep 5/14 : FROM docker.io/library/node:14-alpine@sha256:dc92f36e7cd917816fa2df041d4e9081453366381a00f40398d99e9392e78664\n ---> 211bb86587c9\nStep 6/14 : COPY --from=build_node_modules /app /app\n ---> e08da198e1b9\nStep 7/14 : RUN mv /app/node_modules /node_modules\n ---> Running in e0635713d41e\nRemoving intermediate container e0635713d41e\n ---> 10e5f58bd7a0\nStep 8/14 : RUN npm i -g nodemon && npm cache clean --force;\n ---> Running in bb36fce19a50\n/usr/local/bin/nodemon -> /usr/local/lib/node_modules/nodemon/bin/nodemon.js\n\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.2 (node_modules/nodemon/node_modules/chokidar/node_modules/fsevents):\nnpm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\n\u001b[0m+ nodemon@2.0.20\nadded 32 packages from 28 contributors in 2.902s\n\u001b[91mnpm WARN using --force I sure hope you know what you are doing.\n\u001b[0mRemoving intermediate container bb36fce19a50\n ---> 1ed2deffa857\nStep 9/14 : RUN apk add -U --no-cache   wireguard-tools   dumb-init\n ---> Running in 3c33fb2b02bb\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.11/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.11/community/x86_64/APKINDEX.tar.gz\n(1/13) Installing dumb-init (1.2.2-r1)\n(2/13) Installing libmnl (1.0.4-r0)\n(3/13) Installing wireguard-tools-wg (1.0.20200102-r0)\n(4/13) Installing libnftnl-libs (1.1.5-r0)\n(5/13) Installing iptables (1.8.3-r2)\n(6/13) Installing iproute2 (5.4.0-r1)\nExecuting iproute2-5.4.0-r1.post-install\n(7/13) Installing ncurses-terminfo-base (6.1_p20200118-r4)\n(8/13) Installing ncurses-libs (6.1_p20200118-r4)\n(9/13) Installing readline (8.0.1-r0)\n(10/13) Installing bash (5.0.11-r1)\nExecuting bash-5.0.11-r1.post-install\n(11/13) Installing openresolv (3.9.2-r0)\n(12/13) Installing wireguard-tools-wg-quick (1.0.20200102-r0)\n(13/13) Installing wireguard-tools (1.0.20200102-r0)\nExecuting busybox-1.31.1-r10.trigger\nOK: 14 MiB in 29 packages\nRemoving intermediate container 3c33fb2b02bb\n ---> 1ee239d45bf0\nStep 10/14 : EXPOSE 51820/udp\n ---> Running in 59da667f15d7\nRemoving intermediate container 59da667f15d7\n ---> 607a9e6250ee\nStep 11/14 : EXPOSE 51821/tcp\n ---> Running in d2d083f52368\nRemoving intermediate container d2d083f52368\n ---> a2434806a564\nStep 12/14 : ENV DEBUG=Server,WireGuard\n ---> Running in e12e534efcb8\nRemoving intermediate container e12e534efcb8\n ---> 8e5d7d34338d\nStep 13/14 : WORKDIR /app\n ---> Running in 726cc23e4b77\nRemoving intermediate container 726cc23e4b77\n ---> 48268ee82052\nStep 14/14 : CMD [\"/usr/bin/dumb-init\", \"node\", \"server.js\"]\n ---> Running in 73d70d22edf2\nRemoving intermediate container 73d70d22edf2\n ---> cadd86fdfcec\nSuccessfully built cadd86fdfcec\nSuccessfully tagged wg-easy:latest\n","stderr":"","imageSize":136419259}}