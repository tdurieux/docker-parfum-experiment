{"repository":"https://github.com/tomsun28/usthe","dockerfilePath":"Dockerfile","startTime":1672325298802,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/tomsun28/usthe'...\n","error":null,"commit":"defaaa15e016ca4d5aae9e032d93d37857f71192"},"originalBuild":{"startTimestamp":1672325299852,"endTimestamp":1672325444562,"error":null,"stdout":"Sending build context to Docker daemon  2.436MB\r\r\nStep 1/12 : FROM node:8-alpine as builder\n8-alpine: Pulling from library/node\ne6b0cf9c0882: Pulling fs layer\n93f9cf0467ca: Pulling fs layer\na564402f98da: Pulling fs layer\nb68680f1d28f: Pulling fs layer\nb68680f1d28f: Waiting\na564402f98da: Verifying Checksum\ne6b0cf9c0882: Verifying Checksum\ne6b0cf9c0882: Download complete\n93f9cf0467ca: Verifying Checksum\n93f9cf0467ca: Download complete\ne6b0cf9c0882: Pull complete\nb68680f1d28f: Download complete\n93f9cf0467ca: Pull complete\na564402f98da: Pull complete\nb68680f1d28f: Pull complete\nDigest: sha256:38f7bf07ffd72ac612ec8c829cb20ad416518dbb679768d7733c93175453f4d4\nStatus: Downloaded newer image for node:8-alpine\n ---> 2b8fcdc6230a\nStep 2/12 : COPY package.json package-lock.json ./\n ---> 596a8457a513\nStep 3/12 : RUN npm set progress=false && npm config set depth 0 && npm cache clean --force\n ---> Running in 545eaa209435\n\u001b[91mnpm\u001b[0m\u001b[91m WARN\u001b[0m\u001b[91m using --force I sure hope you know what you are doing.\n\u001b[0mRemoving intermediate container 545eaa209435\n ---> ae7597a23808\nStep 4/12 : RUN npm i && mkdir /ng-app && cp -R ./node_modules ./ng-app\n ---> Running in 2df289babf08\n\n> uws@9.14.0 install /node_modules/uws\n> node-gyp rebuild > build_log.txt 2>&1 || exit 0\n\n\n> node-sass@4.8.3 install /node_modules/node-sass\n> node scripts/install.js\n\nDownloading binary from https://github.com/sass/node-sass/releases/download/v4.8.3/linux_musl-x64-57_binding.node\nDownload complete\nBinary saved to /node_modules/node-sass/vendor/linux_musl-x64-57/binding.node\nCaching binary to /root/.npm/node-sass/4.8.3/linux_musl-x64-57_binding.node\n\n> uglifyjs-webpack-plugin@0.4.6 postinstall /node_modules/webpack/node_modules/uglifyjs-webpack-plugin\n> node lib/post_install.js\n\n\n> node-sass@4.8.3 postinstall /node_modules/node-sass\n> node scripts/build.js\n\nBinary found at /node_modules/node-sass/vendor/linux_musl-x64-57/binding.node\nTesting binary\nBinary is fine\n\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@1.1.3 (node_modules/fsevents):\n\u001b[0m\u001b[91mnpm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.1.3: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91m\n\u001b[0madded 1276 packages from 1275 contributors and audited 1391 packages in 23.357s\nfound 428 vulnerabilities (23 low, 137 moderate, 198 high, 70 critical)\n  run `npm audit fix` to fix them, or `npm audit` for details\nRemoving intermediate container 2df289babf08\n ---> 5f8a3f575c9f\nStep 5/12 : WORKDIR /ng-app\n ---> Running in 1d412ce9096c\nRemoving intermediate container 1d412ce9096c\n ---> 23e83f5dcf65\nStep 6/12 : COPY . .\n ---> 74c436746458\nStep 7/12 : RUN $(npm bin)/ng build --prod\n ---> Running in 767527b7c7f9\n\u001b[0mDate: \u001b[1m\u001b[37m2022-12-29T14:50:34.840Z\u001b[39m\u001b[22m\u001b[0m\n\u001b[0mHash: \u001b[1m\u001b[37mba39e418731bb41d5ce2\u001b[39m\u001b[22m\u001b[0m\n\u001b[0mTime: \u001b[1m\u001b[37m32297\u001b[39m\u001b[22mms\u001b[0m\n\u001b[0mchunk {\u001b[1m\u001b[33mscripts\u001b[39m\u001b[22m} \u001b[1m\u001b[32mscripts.362a1bb871e3200c7053.bundle.js\u001b[39m\u001b[22m (scripts) 370 kB \u001b[1m\u001b[33m[initial]\u001b[39m\u001b[22m\u001b[1m\u001b[32m [rendered]\u001b[39m\u001b[22m\u001b[0m\n\u001b[0mchunk {\u001b[1m\u001b[33m0\u001b[39m\u001b[22m} \u001b[1m\u001b[32mpolyfills.bf95165a1d5098766b92.bundle.js\u001b[39m\u001b[22m (polyfills) 59.4 kB \u001b[1m\u001b[33m[initial]\u001b[39m\u001b[22m\u001b[1m\u001b[32m [rendered]\u001b[39m\u001b[22m\u001b[0m\n\u001b[0mchunk {\u001b[1m\u001b[33m1\u001b[39m\u001b[22m} \u001b[1m\u001b[32mmain.1d178c5884bb65e4db09.bundle.js\u001b[39m\u001b[22m (main) 725 kB \u001b[1m\u001b[33m[initial]\u001b[39m\u001b[22m\u001b[1m\u001b[32m [rendered]\u001b[39m\u001b[22m\u001b[0m\n\u001b[0mchunk {\u001b[1m\u001b[33m2\u001b[39m\u001b[22m} \u001b[1m\u001b[32mstyles.f48e3f2cd7c97e1bad10.bundle.css\u001b[39m\u001b[22m (styles) 346 kB \u001b[1m\u001b[33m[initial]\u001b[39m\u001b[22m\u001b[1m\u001b[32m [rendered]\u001b[39m\u001b[22m\u001b[0m\n\u001b[0mchunk {\u001b[1m\u001b[33m3\u001b[39m\u001b[22m} \u001b[1m\u001b[32minline.318b50c57b4eba3d437b.bundle.js\u001b[39m\u001b[22m (inline) 796 bytes \u001b[1m\u001b[33m[entry]\u001b[39m\u001b[22m\u001b[1m\u001b[32m [rendered]\u001b[39m\u001b[22m\u001b[0m\nRemoving intermediate container 767527b7c7f9\n ---> 12571f82c0dc\nStep 8/12 : FROM nginx:1.13.3-alpine\n1.13.3-alpine: Pulling from library/nginx\n019300c8a437: Pulling fs layer\na3fe4a77433d: Pulling fs layer\na5443900e7f5: Pulling fs layer\n0ae275323c0f: Pulling fs layer\n0ae275323c0f: Waiting\na5443900e7f5: Download complete\n019300c8a437: Verifying Checksum\n019300c8a437: Download complete\na3fe4a77433d: Verifying Checksum\na3fe4a77433d: Download complete\n019300c8a437: Pull complete\n0ae275323c0f: Verifying Checksum\n0ae275323c0f: Download complete\na3fe4a77433d: Pull complete\na5443900e7f5: Pull complete\n0ae275323c0f: Pull complete\nDigest: sha256:24a27241f0450b465f9e9deb30628c524aa81a1aa6936daa41ef7c4345515272\nStatus: Downloaded newer image for nginx:1.13.3-alpine\n ---> ba60b24dbad5\nStep 9/12 : COPY ./nginx/nginx-custom.conf /etc/nginx/conf.d/default.conf\n ---> 8608e7325331\nStep 10/12 : RUN rm -rf /usr/share/nginx/html/*\n ---> Running in 2bb77619bb76\nRemoving intermediate container 2bb77619bb76\n ---> ab81f295198c\nStep 11/12 : COPY --from=builder /ng-app/dist /usr/share/nginx/html\n ---> 5729193f6398\nStep 12/12 : CMD [\"nginx\", \"-g\", \"daemon off;\"]\n ---> Running in 16bbf57e7531\nRemoving intermediate container 16bbf57e7531\n ---> c85d59d3b2e1\nSuccessfully built c85d59d3b2e1\nSuccessfully tagged usthe:latest\n","stderr":"","imageSize":19129027},"repair":{"violations":[{"name":"npmCacheCleanAfterInstall","position":{"start":9,"end":9,"columnStart":4,"columnEnd":9}}],"repairedDockerfile":"# Stage 1, based on Node.js, to build and compile Angular\n\nFROM node:8-alpine as builder\n\nCOPY package.json package-lock.json ./\n\nRUN npm set progress=false && npm config set depth 0 && npm cache clean --force\n\n## Storing node modules on a separate layer will prevent unnecessary npm installs at each build\nRUN npm i && mkdir /ng-app && cp -R ./node_modules ./ng-app\n\nWORKDIR /ng-app\n\nCOPY . .\n\nRUN $(npm bin)/ng build --prod\n\n# Stage 2, based on Nginx, to have only the compiled app, ready for production with Nginx\n\nFROM nginx:1.13.3-alpine\n\nCOPY ./nginx/nginx-custom.conf /etc/nginx/conf.d/default.conf\n\n## Remove default nginx website\nRUN rm -rf /usr/share/nginx/html/*\n\n## From ‘builder’ stage copy over the artifacts in dist folder to default nginx public folder\nCOPY --from=builder /ng-app/dist /usr/share/nginx/html\n\nCMD [\"nginx\", \"-g\", \"daemon off;\"]\n"},"repairedBuild":{"startTimestamp":1672325444909,"endTimestamp":1672325578897,"error":null,"stdout":"Sending build context to Docker daemon  2.436MB\r\r\nStep 1/12 : FROM node:8-alpine as builder\n ---> 2b8fcdc6230a\nStep 2/12 : COPY package.json package-lock.json ./\n ---> bc98f3503ce5\nStep 3/12 : RUN npm set progress=false && npm config set depth 0 && npm cache clean --force\n ---> Running in 7ce48eb7591f\n\u001b[91mnpm\u001b[0m\u001b[91m WARN using --force I sure hope you know what you are doing.\n\u001b[0mRemoving intermediate container 7ce48eb7591f\n ---> 71c1016afd53\nStep 4/12 : RUN npm i && mkdir /ng-app && cp -R ./node_modules ./ng-app\n ---> Running in a2f1d8302379\n\n> uws@9.14.0 install /node_modules/uws\n> node-gyp rebuild > build_log.txt 2>&1 || exit 0\n\n\n> node-sass@4.8.3 install /node_modules/node-sass\n> node scripts/install.js\n\nDownloading binary from https://github.com/sass/node-sass/releases/download/v4.8.3/linux_musl-x64-57_binding.node\nDownload complete\nBinary saved to /node_modules/node-sass/vendor/linux_musl-x64-57/binding.node\nCaching binary to /root/.npm/node-sass/4.8.3/linux_musl-x64-57_binding.node\n\n> uglifyjs-webpack-plugin@0.4.6 postinstall /node_modules/webpack/node_modules/uglifyjs-webpack-plugin\n> node lib/post_install.js\n\n\n> node-sass@4.8.3 postinstall /node_modules/node-sass\n> node scripts/build.js\n\nBinary found at /node_modules/node-sass/vendor/linux_musl-x64-57/binding.node\nTesting binary\nBinary is fine\n\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@1.1.3 (node_modules/fsevents):\nnpm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.1.3: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91m\n\u001b[0madded 1276 packages from 1275 contributors and audited 1391 packages in 30.123s\nfound 428 vulnerabilities (23 low, 137 moderate, 198 high, 70 critical)\n  run `npm audit fix` to fix them, or `npm audit` for details\nRemoving intermediate container a2f1d8302379\n ---> 8a78302a1c7a\nStep 5/12 : WORKDIR /ng-app\n ---> Running in ead2047a6177\nRemoving intermediate container ead2047a6177\n ---> 67f77a1a6e70\nStep 6/12 : COPY . .\n ---> 50af6d8c00fe\nStep 7/12 : RUN $(npm bin)/ng build --prod\n ---> Running in 01658b3e6007\n\u001b[0mDate: \u001b[1m\u001b[37m2022-12-29T14:52:49.332Z\u001b[39m\u001b[22m\u001b[0m\n\u001b[0mHash: \u001b[1m\u001b[37mba39e418731bb41d5ce2\u001b[39m\u001b[22m\u001b[0m\n\u001b[0mTime: \u001b[1m\u001b[37m32516\u001b[39m\u001b[22mms\u001b[0m\n\u001b[0mchunk {\u001b[1m\u001b[33mscripts\u001b[39m\u001b[22m} \u001b[1m\u001b[32mscripts.362a1bb871e3200c7053.bundle.js\u001b[39m\u001b[22m (scripts) 370 kB \u001b[1m\u001b[33m[initial]\u001b[39m\u001b[22m\u001b[1m\u001b[32m [rendered]\u001b[39m\u001b[22m\u001b[0m\n\u001b[0mchunk {\u001b[1m\u001b[33m0\u001b[39m\u001b[22m} \u001b[1m\u001b[32mpolyfills.bf95165a1d5098766b92.bundle.js\u001b[39m\u001b[22m (polyfills) 59.4 kB \u001b[1m\u001b[33m[initial]\u001b[39m\u001b[22m\u001b[1m\u001b[32m [rendered]\u001b[39m\u001b[22m\u001b[0m\n\u001b[0mchunk {\u001b[1m\u001b[33m1\u001b[39m\u001b[22m} \u001b[1m\u001b[32mmain.1d178c5884bb65e4db09.bundle.js\u001b[39m\u001b[22m (main) 725 kB \u001b[1m\u001b[33m[initial]\u001b[39m\u001b[22m\u001b[1m\u001b[32m [rendered]\u001b[39m\u001b[22m\u001b[0m\n\u001b[0mchunk {\u001b[1m\u001b[33m2\u001b[39m\u001b[22m} \u001b[1m\u001b[32mstyles.f48e3f2cd7c97e1bad10.bundle.css\u001b[39m\u001b[22m (styles) 346 kB \u001b[1m\u001b[33m[initial]\u001b[39m\u001b[22m\u001b[1m\u001b[32m [rendered]\u001b[39m\u001b[22m\u001b[0m\n\u001b[0mchunk {\u001b[1m\u001b[33m3\u001b[39m\u001b[22m} \u001b[1m\u001b[32minline.318b50c57b4eba3d437b.bundle.js\u001b[39m\u001b[22m (inline) 796 bytes \u001b[1m\u001b[33m[entry]\u001b[39m\u001b[22m\u001b[1m\u001b[32m [rendered]\u001b[39m\u001b[22m\u001b[0m\nRemoving intermediate container 01658b3e6007\n ---> f361a2b732d7\nStep 8/12 : FROM nginx:1.13.3-alpine\n ---> ba60b24dbad5\nStep 9/12 : COPY ./nginx/nginx-custom.conf /etc/nginx/conf.d/default.conf\n ---> be1ab101600e\nStep 10/12 : RUN rm -rf /usr/share/nginx/html/*\n ---> Running in 4df3551020bf\nRemoving intermediate container 4df3551020bf\n ---> dfbcf3ec42d4\nStep 11/12 : COPY --from=builder /ng-app/dist /usr/share/nginx/html\n ---> 4740e2aacc9c\nStep 12/12 : CMD [\"nginx\", \"-g\", \"daemon off;\"]\n ---> Running in c68727fb8da0\nRemoving intermediate container c68727fb8da0\n ---> 71c2a485bfac\nSuccessfully built 71c2a485bfac\nSuccessfully tagged usthe:latest\n","stderr":"","imageSize":19129027},"endTime":1672325579109}