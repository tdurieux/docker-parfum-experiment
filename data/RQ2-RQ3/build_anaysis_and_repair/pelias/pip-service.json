{"repository":"https://github.com/pelias/pip-service","dockerfilePath":"Dockerfile","startTime":1672271288594,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/pelias/pip-service'...\n","error":null,"commit":"726228a6f4473b1db2f9423a6e1643f0ef67f90c"},"originalBuild":{"startTimestamp":1672271289382,"endTimestamp":1672271406676,"error":null,"stdout":"Sending build context to Docker daemon  38.91kB\r\r\nStep 1/10 : FROM pelias/baseimage\nlatest: Pulling from pelias/baseimage\n284055322776: Pulling fs layer\nfabdd7f2922a: Pulling fs layer\nf8540ef0f7df: Pulling fs layer\n6299b98d2899: Pulling fs layer\nb7a0afcdeee8: Pulling fs layer\na9224d0dd888: Pulling fs layer\n8cbdbe752c4e: Pulling fs layer\nb2c4749dd6b0: Pulling fs layer\n19098de62ed7: Pulling fs layer\nbda15fdc95e9: Pulling fs layer\n625428d5e357: Pulling fs layer\na30d3ceac264: Pulling fs layer\na9224d0dd888: Waiting\n19098de62ed7: Waiting\n625428d5e357: Waiting\nb2c4749dd6b0: Waiting\na30d3ceac264: Waiting\n8cbdbe752c4e: Waiting\n6299b98d2899: Waiting\nbda15fdc95e9: Waiting\nfabdd7f2922a: Verifying Checksum\nfabdd7f2922a: Download complete\n284055322776: Verifying Checksum\n284055322776: Download complete\n6299b98d2899: Verifying Checksum\n6299b98d2899: Download complete\nb7a0afcdeee8: Verifying Checksum\nb7a0afcdeee8: Download complete\nf8540ef0f7df: Verifying Checksum\nf8540ef0f7df: Download complete\na9224d0dd888: Verifying Checksum\na9224d0dd888: Download complete\n8cbdbe752c4e: Download complete\n19098de62ed7: Verifying Checksum\n19098de62ed7: Download complete\nbda15fdc95e9: Verifying Checksum\nbda15fdc95e9: Download complete\n625428d5e357: Verifying Checksum\n625428d5e357: Download complete\nb2c4749dd6b0: Download complete\n284055322776: Pull complete\na30d3ceac264: Verifying Checksum\na30d3ceac264: Download complete\nfabdd7f2922a: Pull complete\nf8540ef0f7df: Pull complete\n6299b98d2899: Pull complete\nb7a0afcdeee8: Pull complete\na9224d0dd888: Pull complete\n8cbdbe752c4e: Pull complete\nb2c4749dd6b0: Pull complete\n19098de62ed7: Pull complete\nbda15fdc95e9: Pull complete\n625428d5e357: Pull complete\na30d3ceac264: Pull complete\nDigest: sha256:3f8e7b2cd36fee21a33bfcd114666a65bd01ca248a3f65d710ba1f393cf803bf\nStatus: Downloaded newer image for pelias/baseimage:latest\n ---> 20d46db0f488\nStep 2/10 : RUN apt-get update && apt-get install -y bzip2 && rm -rf /var/lib/apt/lists/*\n ---> Running in 263964f8662e\nGet:1 http://security.ubuntu.com/ubuntu bionic-security InRelease [88.7 kB]\nGet:2 http://archive.ubuntu.com/ubuntu bionic InRelease [242 kB]\nGet:3 http://security.ubuntu.com/ubuntu bionic-security/universe amd64 Packages [1,568 kB]\nGet:4 http://security.ubuntu.com/ubuntu bionic-security/multiverse amd64 Packages [22.9 kB]\nGet:5 http://security.ubuntu.com/ubuntu bionic-security/restricted amd64 Packages [1,311 kB]\nGet:6 http://security.ubuntu.com/ubuntu bionic-security/main amd64 Packages [3,099 kB]\nGet:7 http://archive.ubuntu.com/ubuntu bionic-updates InRelease [88.7 kB]\nGet:8 http://archive.ubuntu.com/ubuntu bionic-backports InRelease [83.3 kB]\nGet:9 http://archive.ubuntu.com/ubuntu bionic/restricted amd64 Packages [13.5 kB]\nGet:10 http://archive.ubuntu.com/ubuntu bionic/main amd64 Packages [1,344 kB]\nGet:11 http://archive.ubuntu.com/ubuntu bionic/multiverse amd64 Packages [186 kB]\nGet:12 http://archive.ubuntu.com/ubuntu bionic/universe amd64 Packages [11.3 MB]\nGet:13 http://archive.ubuntu.com/ubuntu bionic-updates/main amd64 Packages [3,524 kB]\nGet:14 http://archive.ubuntu.com/ubuntu bionic-updates/universe amd64 Packages [2,342 kB]\nGet:15 http://archive.ubuntu.com/ubuntu bionic-updates/multiverse amd64 Packages [30.0 kB]\nGet:16 http://archive.ubuntu.com/ubuntu bionic-updates/restricted amd64 Packages [1,352 kB]\nGet:17 http://archive.ubuntu.com/ubuntu bionic-backports/universe amd64 Packages [20.5 kB]\nGet:18 http://archive.ubuntu.com/ubuntu bionic-backports/main amd64 Packages [64.0 kB]\nFetched 26.7 MB in 3s (8,462 kB/s)\nReading package lists...\nReading package lists...\nBuilding dependency tree...\nReading state information...\nbzip2 is already the newest version (1.0.6-8.1ubuntu0.2).\n0 upgraded, 0 newly installed, 0 to remove and 55 not upgraded.\nRemoving intermediate container 263964f8662e\n ---> 55cf17856e87\nStep 3/10 : ENV WORKDIR /code/pelias/pip-service\n ---> Running in a86407de3851\nRemoving intermediate container a86407de3851\n ---> d7ef4967090c\nStep 4/10 : WORKDIR ${WORKDIR}\n ---> Running in bc8139e59cee\nRemoving intermediate container bc8139e59cee\n ---> 9cb861dfba4e\nStep 5/10 : COPY ./package.json ${WORKDIR}\n ---> 410c43957a8c\nStep 6/10 : RUN npm install\n ---> Running in be511cffe232\n\u001b[91mnpm\u001b[0m\u001b[91m WARN \u001b[0m\u001b[91mdeprecated\u001b[0m\u001b[91m formidable@1.2.6: Please upgrade to latest, formidable@v2 or formidable@v3! Check these notes: https://bit.ly/2ZEqIau\n\u001b[0m\u001b[91mnpm WARN deprecated har-validator@5.1.5: this library is no longer supported\n\u001b[0m\u001b[91mnpm WARN deprecated stable@0.1.8: Modern JS already guarantees Array#sort() is a stable sort, so this library is deprecated. See the compatibility table on MDN: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/sort#browser_compatibility\n\u001b[0m\u001b[91mnpm WARN deprecated @hapi/topo@3.1.6: This version has been deprecated and is no longer supported or maintained\n\u001b[0m\u001b[91mnpm WARN \u001b[0m\u001b[91mdeprecated uuid@3.4.0: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.\n\u001b[0m\u001b[91mnpm WARN deprecated @hapi/address@2.1.4: Moved to 'npm install @sideway/address'\n\u001b[0m\u001b[91mnpm WARN deprecated @hapi/formula@1.2.0: Moved to 'npm install @sideway/formula'\n\u001b[0m\u001b[91mnpm WARN deprecated\u001b[0m\u001b[91m @hapi/pinpoint@1.0.2: Moved to 'npm install @sideway/pinpoint'\n\u001b[0m\u001b[91mnpm WARN deprecated @hapi/hoek@8.5.1: This version has been deprecated and is no longer supported or maintained\n\u001b[0m\u001b[91mnpm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142\n\u001b[0m\u001b[91mnpm WARN deprecated superagent@5.3.1: Please upgrade to v7.0.2+ of superagent.  We have fixed numerous issues with streams, form-data, attach(), filesystem errors not bubbling up (ENOENT on attach()), and all tests are now passing.  See the releases tab for more information at <https://github.com/visionmedia/superagent/releases>.\n\u001b[0m\u001b[91mnpm WARN deprecated\u001b[0m\u001b[91m @hapi/joi@16.1.8: Switch to 'npm install joi'\n\u001b[0m\u001b[91mnpm WARN deprecated elasticsearch@16.7.3: Package no longer supported. Contact Support at https://www.npmjs.com/support for more info.\n\u001b[0m\nadded 323 packages, and audited 324 packages in 32s\n\n58 packages are looking for funding\n  run `npm fund` for details\n\n3 high severity vulnerabilities\n\nTo address all issues (including breaking changes), run:\n  npm audit fix --force\n\nRun `npm audit` for details.\n\u001b[91mnpm notice\u001b[0m\u001b[91m \nnpm notice New major version of npm available! 8.1.2 -> 9.2.0\nnpm notice\u001b[0m\u001b[91m Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm notice\u001b[0m\u001b[91m Run `npm install -g npm@9.2.0` to update!\nnpm\u001b[0m\u001b[91m notice\u001b[0m\u001b[91m \n\u001b[0mRemoving intermediate container be511cffe232\n ---> f2c4f27d59cc\nStep 7/10 : ADD . ${WORKDIR}\n ---> f18b52cc9da9\nStep 8/10 : RUN npm test\n ---> Running in 86f86e64a3f9\n\n> pelias-pip-service@0.0.0-development test\n> ./bin/test\n\n\n  ...............................................................................................................  \n\n  13 tests\n  111 passed\n  \n  Pass!\nRemoving intermediate container 86f86e64a3f9\n ---> fa54455e005e\nStep 9/10 : USER pelias\n ---> Running in e40d01075784\nRemoving intermediate container e40d01075784\n ---> f90c43ceaa68\nStep 10/10 : CMD [\"./bin/start\"]\n ---> Running in 639bc5f5d055\nRemoving intermediate container 639bc5f5d055\n ---> 8b142cd01cfe\nSuccessfully built 8b142cd01cfe\nSuccessfully tagged pip-service:latest\n","stderr":"","imageSize":364183512},"repair":{"violations":[{"name":"npmCacheCleanAfterInstall","position":{"start":13,"end":13,"columnStart":4,"columnEnd":15}},{"name":"ruleAptGetInstallUseNoRec","position":{"start":5,"end":5,"columnStart":22,"columnEnd":46}}],"repairedDockerfile":"# base image\nFROM pelias/baseimage\n\n# downloader apt dependencies\n# note: this is done in one command in order to keep down the size of intermediate containers\nRUN apt-get update && apt-get install --no-install-recommends -y bzip2 && rm -rf /var/lib/apt/lists/*\n\n# change working dir\nENV WORKDIR /code/pelias/pip-service\nWORKDIR ${WORKDIR}\n\n# copy package.json first to prevent npm install being rerun when only code changes\nCOPY ./package.json ${WORKDIR}\nRUN npm install\n\n# copy code from local checkout\nADD . ${WORKDIR}\n\n# run tests\nRUN npm test\n\nUSER pelias\n\n# start the pip service using the directory the data was downloaded to\nCMD [\"./bin/start\"]\n"},"repairedBuild":{"startTimestamp":1672271410466,"endTimestamp":1672271477489,"error":null,"stdout":"Sending build context to Docker daemon  38.91kB\r\r\nStep 1/10 : FROM pelias/baseimage\n ---> 20d46db0f488\nStep 2/10 : RUN apt-get update && apt-get install --no-install-recommends -y bzip2 && rm -rf /var/lib/apt/lists/*\n ---> Running in 86bb4bccb085\nGet:1 http://archive.ubuntu.com/ubuntu bionic InRelease [242 kB]\nGet:2 http://security.ubuntu.com/ubuntu bionic-security InRelease [88.7 kB]\nGet:3 http://archive.ubuntu.com/ubuntu bionic-updates InRelease [88.7 kB]\nGet:4 http://archive.ubuntu.com/ubuntu bionic-backports InRelease [83.3 kB]\nGet:5 http://security.ubuntu.com/ubuntu bionic-security/universe amd64 Packages [1,568 kB]\nGet:6 http://archive.ubuntu.com/ubuntu bionic/main amd64 Packages [1,344 kB]\nGet:7 http://security.ubuntu.com/ubuntu bionic-security/main amd64 Packages [3,099 kB]\nGet:8 http://security.ubuntu.com/ubuntu bionic-security/multiverse amd64 Packages [22.9 kB]\nGet:9 http://security.ubuntu.com/ubuntu bionic-security/restricted amd64 Packages [1,311 kB]\nGet:10 http://archive.ubuntu.com/ubuntu bionic/multiverse amd64 Packages [186 kB]\nGet:11 http://archive.ubuntu.com/ubuntu bionic/restricted amd64 Packages [13.5 kB]\nGet:12 http://archive.ubuntu.com/ubuntu bionic/universe amd64 Packages [11.3 MB]\nGet:13 http://archive.ubuntu.com/ubuntu bionic-updates/multiverse amd64 Packages [30.0 kB]\nGet:14 http://archive.ubuntu.com/ubuntu bionic-updates/main amd64 Packages [3,524 kB]\nGet:15 http://archive.ubuntu.com/ubuntu bionic-updates/restricted amd64 Packages [1,352 kB]\nGet:16 http://archive.ubuntu.com/ubuntu bionic-updates/universe amd64 Packages [2,342 kB]\nGet:17 http://archive.ubuntu.com/ubuntu bionic-backports/universe amd64 Packages [20.5 kB]\nGet:18 http://archive.ubuntu.com/ubuntu bionic-backports/main amd64 Packages [64.0 kB]\nFetched 26.7 MB in 2s (10.9 MB/s)\nReading package lists...\nReading package lists...\nBuilding dependency tree...\nReading state information...\nbzip2 is already the newest version (1.0.6-8.1ubuntu0.2).\n0 upgraded, 0 newly installed, 0 to remove and 55 not upgraded.\nRemoving intermediate container 86bb4bccb085\n ---> 47434daf76cf\nStep 3/10 : ENV WORKDIR /code/pelias/pip-service\n ---> Running in 0cf56319352a\nRemoving intermediate container 0cf56319352a\n ---> 0256b0d72f37\nStep 4/10 : WORKDIR ${WORKDIR}\n ---> Running in 4cf91ff0d6ea\nRemoving intermediate container 4cf91ff0d6ea\n ---> 30b9124b0b61\nStep 5/10 : COPY ./package.json ${WORKDIR}\n ---> 7952ebdba9a8\nStep 6/10 : RUN npm install\n ---> Running in 1dbaa2f0fa95\n\u001b[91mnpm WARN deprecated formidable@1.2.6: Please upgrade to latest, formidable@v2 or formidable@v3! Check these notes: https://bit.ly/2ZEqIau\n\u001b[0m\u001b[91mnpm WARN deprecated har-validator@5.1.5: this library is no longer supported\n\u001b[0m\u001b[91mnpm WARN deprecated stable@0.1.8: Modern JS already guarantees Array#sort() is a stable sort, so this library is deprecated. See the compatibility table on MDN: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/sort#browser_compatibility\n\u001b[0m\u001b[91mnpm WARN deprecated @hapi/pinpoint@1.0.2: Moved to 'npm install @sideway/pinpoint'\n\u001b[0m\u001b[91mnpm WARN deprecated @hapi/formula@1.2.0: Moved to 'npm install @sideway/formula'\n\u001b[0m\u001b[91mnpm WARN deprecated uuid@3.4.0: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.\n\u001b[0m\u001b[91mnpm WARN deprecated @hapi/topo@3.1.6: This version has been deprecated and is no longer supported or maintained\n\u001b[0m\u001b[91mnpm WARN deprecated @hapi/address@2.1.4: Moved to 'npm install @sideway/address'\n\u001b[0m\u001b[91mnpm WARN deprecated @hapi/hoek@8.5.1: This version has been deprecated and is no longer supported or maintained\n\u001b[0m\u001b[91mnpm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142\n\u001b[0m\u001b[91mnpm WARN deprecated @hapi/joi@16.1.8: Switch to 'npm install joi'\n\u001b[0m\u001b[91mnpm WARN deprecated superagent@5.3.1: Please upgrade to v7.0.2+ of superagent.  We have fixed numerous issues with streams, form-data, attach(), filesystem errors not bubbling up (ENOENT on attach()), and all tests are now passing.  See the releases tab for more information at <https://github.com/visionmedia/superagent/releases>.\n\u001b[0m\u001b[91mnpm WARN deprecated elasticsearch@16.7.3: Package no longer supported. Contact Support at https://www.npmjs.com/support for more info.\n\u001b[0m\nadded 323 packages, and audited 324 packages in 19s\n\n58 packages are looking for funding\n  run `npm fund` for details\n\n3 high severity vulnerabilities\n\nTo address all issues (including breaking changes), run:\n  npm audit fix --force\n\nRun `npm audit` for details.\n\u001b[91mnpm notice \nnpm notice New major version of npm available! 8.1.2 -> 9.2.0\nnpm notice\u001b[0m\u001b[91m Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm notice Run `npm install -g npm@9.2.0` to update!\nnpm notice \n\u001b[0mRemoving intermediate container 1dbaa2f0fa95\n ---> 537a3f8f2f3d\nStep 7/10 : ADD . ${WORKDIR}\n ---> 8e90abffb26e\nStep 8/10 : RUN npm test\n ---> Running in 34baf5cae8ca\n\n> pelias-pip-service@0.0.0-development test\n> ./bin/test\n\n\n  ...............................................................................................................  \n\n  13 tests\n  111 passed\n  \n  Pass!\nRemoving intermediate container 34baf5cae8ca\n ---> 957428cd15cc\nStep 9/10 : USER pelias\n ---> Running in 63ac06265383\nRemoving intermediate container 63ac06265383\n ---> 7bf8f3f9ce0d\nStep 10/10 : CMD [\"./bin/start\"]\n ---> Running in a47f7278516d\nRemoving intermediate container a47f7278516d\n ---> a701517a4a11\nSuccessfully built a701517a4a11\nSuccessfully tagged pip-service:latest\n","stderr":"","imageSize":364183595},"endTime":1672271477939}