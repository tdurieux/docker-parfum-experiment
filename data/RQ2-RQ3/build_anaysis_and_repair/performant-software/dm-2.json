{"repository":"https://github.com/performant-software/dm-2","dockerfilePath":"Dockerfile","startTime":1672110751440,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/performant-software/dm-2'...\n","error":null,"commit":"eccdb50cf89eaebbda4516c61cb17722159269a3"},"originalBuild":{"startTimestamp":1672110752503,"endTimestamp":1672111292665,"error":null,"stdout":"Sending build context to Docker daemon   2.43MB\r\r\nStep 1/23 : FROM ruby:2.7.6 AS dm2-dev\n2.7.6: Pulling from library/ruby\na8ca11554fce: Pulling fs layer\ne4e46864aba2: Pulling fs layer\nc85a0be79bfb: Pulling fs layer\n195ea6a58ca8: Pulling fs layer\n157f16ed0a0c: Pulling fs layer\n3cb3f18bcb19: Pulling fs layer\nb381ff7e6476: Pulling fs layer\nd8699324d45a: Pulling fs layer\n195ea6a58ca8: Waiting\n157f16ed0a0c: Waiting\n3cb3f18bcb19: Waiting\nb381ff7e6476: Waiting\nd8699324d45a: Waiting\ne4e46864aba2: Verifying Checksum\ne4e46864aba2: Download complete\nc85a0be79bfb: Verifying Checksum\nc85a0be79bfb: Download complete\na8ca11554fce: Verifying Checksum\na8ca11554fce: Download complete\n195ea6a58ca8: Verifying Checksum\n195ea6a58ca8: Download complete\n3cb3f18bcb19: Download complete\nd8699324d45a: Verifying Checksum\nd8699324d45a: Download complete\nb381ff7e6476: Verifying Checksum\nb381ff7e6476: Download complete\n157f16ed0a0c: Verifying Checksum\n157f16ed0a0c: Download complete\na8ca11554fce: Pull complete\ne4e46864aba2: Pull complete\nc85a0be79bfb: Pull complete\n195ea6a58ca8: Pull complete\n157f16ed0a0c: Pull complete\n3cb3f18bcb19: Pull complete\nb381ff7e6476: Pull complete\nd8699324d45a: Pull complete\nDigest: sha256:7a7adf53e69f833eda3205c628ae7f83e32a8095bfb3a96686cf0369f6c2f63b\nStatus: Downloaded newer image for ruby:2.7.6\n ---> 39d45c2f7aa0\nStep 2/23 : RUN apt-get update -qq && apt-get install -y curl sudo\n ---> Running in a099d74a330a\nReading package lists...\nBuilding dependency tree...\nReading state information...\ncurl is already the newest version (7.74.0-1.3+deb11u3).\nThe following NEW packages will be installed:\n  sudo\n0 upgraded, 1 newly installed, 0 to remove and 22 not upgraded.\nNeed to get 1059 kB of archives.\nAfter this operation, 4699 kB of additional disk space will be used.\nGet:1 http://deb.debian.org/debian bullseye/main amd64 sudo amd64 1.9.5p2-3 [1059 kB]\n\u001b[91mdebconf: delaying package configuration, since apt-utils is not installed\n\u001b[0mFetched 1059 kB in 0s (21.8 MB/s)\nSelecting previously unselected package sudo.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 22790 files and directories currently installed.)\r\nPreparing to unpack .../sudo_1.9.5p2-3_amd64.deb ...\r\nUnpacking sudo (1.9.5p2-3) ...\r\nSetting up sudo (1.9.5p2-3) ...\r\ninvoke-rc.d: could not determine current runlevel\r\ninvoke-rc.d: policy-rc.d denied execution of start.\r\nRemoving intermediate container a099d74a330a\n ---> 97d271dbdfec\nStep 3/23 : RUN curl -fsSL https://deb.nodesource.com/setup_16.x | sudo -E bash -\n ---> Running in 3e11d7a5ef7c\n\n## Installing the NodeSource Node.js 16.x repo...\n\n\n## Populating apt-get cache...\n\n+ apt-get update\nHit:1 http://deb.debian.org/debian bullseye InRelease\nHit:2 http://deb.debian.org/debian-security bullseye-security InRelease\nHit:3 http://deb.debian.org/debian bullseye-updates InRelease\nReading package lists...\n\n## Installing packages required for setup: lsb-release...\n\n+ apt-get install -y lsb-release > /dev/null 2>&1\n\n## Confirming \"bullseye\" is supported...\n\n+ curl -sLf -o /dev/null 'https://deb.nodesource.com/node_16.x/dists/bullseye/Release'\n\n## Adding the NodeSource signing key to your keyring...\n\n+ curl -s https://deb.nodesource.com/gpgkey/nodesource.gpg.key | gpg --dearmor | tee /usr/share/keyrings/nodesource.gpg >/dev/null\n\n## Creating apt sources list file for the NodeSource Node.js 16.x repo...\n\n+ echo 'deb [signed-by=/usr/share/keyrings/nodesource.gpg] https://deb.nodesource.com/node_16.x bullseye main' > /etc/apt/sources.list.d/nodesource.list\n+ echo 'deb-src [signed-by=/usr/share/keyrings/nodesource.gpg] https://deb.nodesource.com/node_16.x bullseye main' >> /etc/apt/sources.list.d/nodesource.list\n\n## Running `apt-get update` for you...\n\n+ apt-get update\nHit:1 http://deb.debian.org/debian bullseye InRelease\nHit:2 http://deb.debian.org/debian-security bullseye-security InRelease\nHit:3 http://deb.debian.org/debian bullseye-updates InRelease\nGet:4 https://deb.nodesource.com/node_16.x bullseye InRelease [4586 B]\nGet:5 https://deb.nodesource.com/node_16.x bullseye/main amd64 Packages [773 B]\nFetched 5359 B in 1s (7275 B/s)\nReading package lists...\n\n## Run `sudo apt-get install -y nodejs` to install Node.js 16.x and npm\n## You may also need development tools to build native addons:\n     sudo apt-get install gcc g++ make\n## To install the Yarn package manager, run:\n     curl -sL https://dl.yarnpkg.com/debian/pubkey.gpg | gpg --dearmor | sudo tee /usr/share/keyrings/yarnkey.gpg >/dev/null\n     echo \"deb [signed-by=/usr/share/keyrings/yarnkey.gpg] https://dl.yarnpkg.com/debian stable main\" | sudo tee /etc/apt/sources.list.d/yarn.list\n     sudo apt-get update && sudo apt-get install yarn\n\n\nRemoving intermediate container 3e11d7a5ef7c\n ---> e16b3ef038c1\nStep 4/23 : RUN apt-get install -y nodejs\n ---> Running in adb4c3d7e55c\nReading package lists...\nBuilding dependency tree...\nReading state information...\nThe following NEW packages will be installed:\n  nodejs\n0 upgraded, 1 newly installed, 0 to remove and 22 not upgraded.\nNeed to get 27.2 MB of archives.\nAfter this operation, 128 MB of additional disk space will be used.\nGet:1 https://deb.nodesource.com/node_16.x bullseye/main amd64 nodejs amd64 16.19.0-deb-1nodesource1 [27.2 MB]\n\u001b[91mdebconf: delaying package configuration, since apt-utils is not installed\n\u001b[0mFetched 27.2 MB in 1s (39.6 MB/s)\nSelecting previously unselected package nodejs.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 22949 files and directories currently installed.)\r\nPreparing to unpack .../nodejs_16.19.0-deb-1nodesource1_amd64.deb ...\r\nUnpacking nodejs (16.19.0-deb-1nodesource1) ...\r\nSetting up nodejs (16.19.0-deb-1nodesource1) ...\r\nRemoving intermediate container adb4c3d7e55c\n ---> 2e7bdb23b50b\nStep 5/23 : RUN npm install -g yarn\n ---> Running in cae3304b927f\n\nadded 1 package, and audited 2 packages in 712ms\n\nfound 0 vulnerabilities\n\u001b[91mnpm notice\u001b[0m\u001b[91m \n\u001b[0m\u001b[91mnpm notice\u001b[0m\u001b[91m New major version of npm available! 8.19.3 -> 9.2.0\nnpm notice\u001b[0m\u001b[91m Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm\u001b[0m\u001b[91m notice\u001b[0m\u001b[91m Run `npm install -g npm@9.2.0` to update!\nnpm notice\u001b[0m\u001b[91m \n\u001b[0mRemoving intermediate container cae3304b927f\n ---> cfc2d61f0c83\nStep 6/23 : ENV INSTALL_PATH /opt/app\n ---> Running in 0a774b0240e7\nRemoving intermediate container 0a774b0240e7\n ---> 08486e07855a\nStep 7/23 : RUN mkdir -p $INSTALL_PATH\n ---> Running in f01f8359fd70\nRemoving intermediate container f01f8359fd70\n ---> 31aa8e44c7f2\nStep 8/23 : WORKDIR $INSTALL_PATH\n ---> Running in 0da56ee8a3a3\nRemoving intermediate container 0da56ee8a3a3\n ---> 42c947c500b6\nStep 9/23 : COPY . $INSTALL_PATH\n ---> e801de503d22\nStep 10/23 : RUN gem install bundler\n ---> Running in c8da8f6f8c1b\nSuccessfully installed bundler-2.4.1\n1 gem installed\nRemoving intermediate container c8da8f6f8c1b\n ---> bc27a13d820e\nStep 11/23 : RUN bundle install\n ---> Running in 40a909dfceb6\nFetching gem metadata from https://rubygems.org/..........\nFetching https://github.com/performant-software/storyblok-ruby-richtext-renderer.git\nFetching rake 13.0.6\nInstalling rake 13.0.6\nFetching rack 2.2.4\nUsing bundler 2.4.1\nFetching ffi 1.15.5\nFetching concurrent-ruby 1.1.9\nFetching thread_safe 0.3.6\nFetching erubi 1.10.0\nFetching racc 1.6.0\nFetching mini_mime 1.1.1\nFetching jsonapi-renderer 0.2.2\nFetching jmespath 1.6.1\nFetching msgpack 1.4.2\nUsing storyblok-richtext-renderer 0.0.6 from https://github.com/performant-software/storyblok-ruby-richtext-renderer.git (at 0a6c2e8@0a6c2e8)\nFetching byebug 11.1.3\nFetching orm_adapter 0.5.0\nFetching redis 4.7.1\nFetching minitest 5.14.4\nFetching builder 3.2.4\nFetching crass 1.0.6\nFetching nio4r 2.5.8\nFetching websocket-extensions 0.1.5\nFetching arel 9.0.0\nFetching marcel 1.0.1\nFetching aws-eventstream 1.1.1\nFetching aws-partitions 1.490.0\nFetching bcrypt 3.1.16\nFetching numerizer 0.1.1\nFetching connection_pool 2.2.5\nFetching method_source 1.0.0\nFetching thor 1.1.0\nFetching foreman 0.87.2\nFetching mini_magick 4.11.0\nFetching rb-fsevent 0.11.0\nFetching ruby_dep 1.5.0\nFetching open-uri 0.1.0\nFetching pg 1.2.3\nFetching pkg-config 1.4.6\nFetching spring 2.1.1\nInstalling jsonapi-renderer 0.2.2\nInstalling erubi 1.10.0\nInstalling orm_adapter 0.5.0\nInstalling numerizer 0.1.1\nInstalling jmespath 1.6.1\nInstalling websocket-extensions 0.1.5\nInstalling crass 1.0.6\nInstalling aws-eventstream 1.1.1\nInstalling mini_mime 1.1.1\nInstalling arel 9.0.0\nInstalling method_source 1.0.0\nInstalling builder 3.2.4\nInstalling ruby_dep 1.5.0\nInstalling connection_pool 2.2.5\nInstalling mini_magick 4.11.0\nInstalling open-uri 0.1.0\nInstalling marcel 1.0.1\nInstalling spring 2.1.1\nInstalling racc 1.6.0 with native extensions\nInstalling bcrypt 3.1.16 with native extensions\nInstalling redis 4.7.1\nInstalling aws-partitions 1.490.0\nInstalling msgpack 1.4.2 with native extensions\nInstalling byebug 11.1.3 with native extensions\nInstalling thor 1.1.0\nInstalling pkg-config 1.4.6\nInstalling minitest 5.14.4\nInstalling rb-fsevent 0.11.0\nInstalling foreman 0.87.2\nInstalling thread_safe 0.3.6\nInstalling nio4r 2.5.8 with native extensions\nFetching websocket-driver 0.7.5\nInstalling rack 2.2.4\nInstalling websocket-driver 0.7.5 with native extensions\nFetching aws-sigv4 1.2.4\nFetching chronic_duration 0.10.6\nInstalling aws-sigv4 1.2.4\nInstalling pg 1.2.3 with native extensions\nInstalling concurrent-ruby 1.1.9\nInstalling chronic_duration 0.10.6\nFetching mail 2.7.1\nInstalling ffi 1.15.5 with native extensions\nFetching figaro 1.2.0\nFetching aws-sdk-core 3.119.1\nInstalling figaro 1.2.0\nInstalling mail 2.7.1\nInstalling aws-sdk-core 3.119.1\nFetching tzinfo 1.2.9\nFetching rack-test 1.1.0\nFetching warden 1.2.9\nFetching rack-cors 1.1.1\nFetching sidekiq 6.5.1\nInstalling rack-test 1.1.0\nInstalling warden 1.2.9\nInstalling rack-cors 1.1.1\nFetching nokogiri 1.13.6 (x86_64-linux)\nInstalling sidekiq 6.5.1\nFetching i18n 1.8.10\nFetching sprockets 4.0.2\nInstalling i18n 1.8.10\nInstalling sprockets 4.0.2\nFetching sidekiq-status 2.1.3\nInstalling sidekiq-status 2.1.3\nFetching aws-sdk-kms 1.46.0\nInstalling aws-sdk-kms 1.46.0\nInstalling nokogiri 1.13.6 (x86_64-linux)\nFetching aws-sdk-s3 1.48.0\nInstalling aws-sdk-s3 1.48.0\nFetching loofah 2.18.0\nInstalling loofah 2.18.0\nFetching rails-html-sanitizer 1.4.3\nInstalling rails-html-sanitizer 1.4.3\nInstalling tzinfo 1.2.9\nFetching activesupport 5.2.6\nInstalling activesupport 5.2.6\nFetching globalid 0.5.2\nFetching rails-dom-testing 2.0.3\nFetching activemodel 5.2.6\nFetching case_transform 0.2\nInstalling globalid 0.5.2\nInstalling activemodel 5.2.6\nInstalling case_transform 0.2\nInstalling rails-dom-testing 2.0.3\nFetching activejob 5.2.6\nFetching actionview 5.2.6\nFetching activerecord 5.2.6\nInstalling activejob 5.2.6\nInstalling actionview 5.2.6\nInstalling activerecord 5.2.6\nFetching puma 4.3.12\nInstalling puma 4.3.12 with native extensions\nFetching actionpack 5.2.6\nFetching pg_search 2.3.5\nInstalling actionpack 5.2.6\nInstalling pg_search 2.3.5\nFetching sprockets-rails 3.2.2\nFetching actioncable 5.2.6\nFetching active_model_serializers 0.10.12\nFetching actionmailer 5.2.6\nFetching activestorage 5.2.6\nFetching railties 5.2.6\nInstalling sprockets-rails 3.2.2\nInstalling actionmailer 5.2.6\nInstalling actioncable 5.2.6\nInstalling active_model_serializers 0.10.12\nInstalling activestorage 5.2.6\nInstalling railties 5.2.6\nFetching responders 3.0.1\nFetching rails 5.2.6\nInstalling responders 3.0.1\nInstalling rails 5.2.6\nFetching devise 4.7.3\nInstalling devise 4.7.3\nFetching devise_token_auth 1.1.5\nInstalling devise_token_auth 1.1.5\nFetching ruby-vips 2.1.4\nFetching rb-inotify 0.10.1\nInstalling rb-inotify 0.10.1\nInstalling ruby-vips 2.1.4\nFetching listen 3.1.5\nFetching image_processing 1.12.2\nInstalling image_processing 1.12.2\nInstalling listen 3.1.5\nFetching spring-watcher-listen 2.0.1\nInstalling spring-watcher-listen 2.0.1\nFetching bootsnap 1.7.7\nInstalling bootsnap 1.7.7 with native extensions\nBundle complete! 23 Gemfile dependencies, 84 gems now installed.\nUse `bundle info [gemname]` to see where a bundled gem is installed.\nRemoving intermediate container 40a909dfceb6\n ---> f27716851d52\nStep 12/23 : COPY entrypoint.sh /usr/bin/\n ---> 796020e19150\nStep 13/23 : RUN chmod +x /usr/bin/entrypoint.sh\n ---> Running in d501be0b9073\nRemoving intermediate container d501be0b9073\n ---> 8fae447d434c\nStep 14/23 : ENTRYPOINT [\"entrypoint.sh\"]\n ---> Running in 1cb12a545ed6\nRemoving intermediate container 1cb12a545ed6\n ---> df7ad1540183\nStep 15/23 : EXPOSE 443\n ---> Running in 332bcf85a369\nRemoving intermediate container 332bcf85a369\n ---> e1a41708adb7\nStep 16/23 : EXPOSE 3000\n ---> Running in 068833a86176\nRemoving intermediate container 068833a86176\n ---> 618c2f4b0815\nStep 17/23 : EXPOSE 3001\n ---> Running in 1f0f03748939\nRemoving intermediate container 1f0f03748939\n ---> ec0bb6adcf6b\nStep 18/23 : WORKDIR $INSTALL_PATH/client\n ---> Running in bd0a4d051447\nRemoving intermediate container bd0a4d051447\n ---> 1b24ee61c6ca\nStep 19/23 : RUN yarn install && NODE_OPTIONS=\"--max_old_space_size=2560\" yarn build-craco\n ---> Running in 181d367ef12a\nyarn install v1.22.19\n[1/4] Resolving packages...\n[2/4] Fetching packages...\n[3/4] Linking dependencies...\n\u001b[91mwarning \"react-scripts > @typescript-eslint/eslint-plugin > tsutils@3.17.1\" has unmet peer dependency \"typescript@>=2.8.0 || >= 3.2.0-dev || >= 3.3.0-dev || >= 3.4.0-dev || >= 3.5.0-dev || >= 3.6.0-dev || >= 3.6.0-beta || >= 3.7.0-dev || >= 3.7.0-beta\".\n\u001b[0m[4/4] Building fresh packages...\nDone in 106.28s.\nyarn run v1.22.19\n$ craco build\nCreating an optimized production build...\n\u001b[91mBrowserslist: caniuse-lite is outdated. Please run next command `yarn upgrade`\n\u001b[0mCompiled successfully.\n\nFile sizes after gzip:\n\n  1.22 MB   build/static/js/2.20511579.chunk.js\n  54.87 KB  build/static/js/main.e1cbe628.chunk.js\n  1.68 KB   build/static/css/2.dcf10c62.chunk.css\n  1.36 KB   build/static/css/main.fa50b844.chunk.css\n  773 B     build/static/js/runtime-main.e077b804.js\n\nThe bundle size is significantly larger than recommended.\nConsider reducing it with code splitting: https://goo.gl/9VhYWB\nYou can also analyze the project dependencies: https://goo.gl/LeUzfb\n\nThe project was built assuming it is hosted at the server root.\nYou can control this with the homepage field in your package.json.\nFor example, add this to build it for GitHub Pages:\n\n  \"homepage\" : \"http://myname.github.io/myapp\",\n\nThe build folder is ready to be deployed.\nYou may serve it with a static server:\n\n  yarn global add serve\n  serve -s build\n\nFind out more about deployment here:\n\n  https://bit.ly/CRA-deploy\n\nDone in 126.24s.\nRemoving intermediate container 181d367ef12a\n ---> 0d77958a35d0\nStep 20/23 : WORKDIR $INSTALL_PATH\n ---> Running in ed18c0942db8\nRemoving intermediate container ed18c0942db8\n ---> 456f19458062\nStep 21/23 : RUN cp -a $INSTALL_PATH/client/build/. $INSTALL_PATH/public/\n ---> Running in 96f53dc8ed23\nRemoving intermediate container 96f53dc8ed23\n ---> a82f565a0159\nStep 22/23 : RUN yarn deploy\n ---> Running in 1b49bdaa3eba\nyarn run v1.22.19\n$ cp -a client/build/. public/\nDone in 0.22s.\nRemoving intermediate container 1b49bdaa3eba\n ---> cd0d8ea76fc7\nStep 23/23 : CMD [\"/bin/sh\"]\n ---> Running in ff26e85ff86b\nRemoving intermediate container ff26e85ff86b\n ---> 24dd7514ff56\nSuccessfully built 24dd7514ff56\nSuccessfully tagged dm-2:latest\n","stderr":"","imageSize":1776906170},"repair":{"violations":[{"name":"npmCacheCleanAfterInstall","position":{"start":7,"end":7,"columnStart":4,"columnEnd":23}},{"name":"ruleAptGetInstallUseNoRec","position":{"start":4,"end":4,"columnStart":26,"columnEnd":54}},{"name":"ruleAptGetInstallUseNoRec","position":{"start":6,"end":6,"columnStart":4,"columnEnd":29}},{"name":"ruleAptGetUpdatePrecedesInstall","position":{"start":6,"end":6,"columnStart":4,"columnEnd":29}},{"name":"ruleAptGetInstallThenRemoveAptLists","position":{"start":4,"end":4,"columnStart":26,"columnEnd":54}},{"name":"ruleAptGetInstallThenRemoveAptLists","position":{"start":6,"end":6,"columnStart":4,"columnEnd":29}}],"repairedDockerfile":"FROM ruby:2.7.6 AS dm2-dev\n\n# Install node.js and yarn\nRUN apt-get update -qq && apt-get install --no-install-recommends -y curl sudo\nRUN curl -fsSL https://deb.nodesource.com/setup_16.x | sudo -E bash -\nRUN apt-get install --no-install-recommends -y nodejs\nRUN npm install -g yarn\n\n# Install bundler and API\nENV INSTALL_PATH /opt/app\nRUN mkdir -p $INSTALL_PATH\nWORKDIR $INSTALL_PATH\nCOPY . $INSTALL_PATH\nRUN gem install bundler\nRUN bundle install\n\n# Add a script to be executed every time the container starts\nCOPY entrypoint.sh /usr/bin/\nRUN chmod +x /usr/bin/entrypoint.sh\nENTRYPOINT [\"entrypoint.sh\"]\nEXPOSE 443\nEXPOSE 3000\nEXPOSE 3001\n\n# Install frontend\nWORKDIR $INSTALL_PATH/client\nRUN yarn install && NODE_OPTIONS=\"--max_old_space_size=2560\" yarn build-craco\nWORKDIR $INSTALL_PATH\nRUN cp -a $INSTALL_PATH/client/build/. $INSTALL_PATH/public/\nRUN yarn deploy\n\n# Run shell\nCMD [\"/bin/sh\"]"},"repairedBuild":{"startTimestamp":1672111302295,"endTimestamp":1672111772689,"error":null,"stdout":"Sending build context to Docker daemon   2.43MB\r\r\nStep 1/23 : FROM ruby:2.7.6 AS dm2-dev\n ---> 39d45c2f7aa0\nStep 2/23 : RUN apt-get update -qq && apt-get install --no-install-recommends -y curl sudo\n ---> Running in 1bb66e37b262\nReading package lists...\nBuilding dependency tree...\nReading state information...\ncurl is already the newest version (7.74.0-1.3+deb11u3).\nThe following NEW packages will be installed:\n  sudo\n0 upgraded, 1 newly installed, 0 to remove and 22 not upgraded.\nNeed to get 1059 kB of archives.\nAfter this operation, 4699 kB of additional disk space will be used.\nGet:1 http://deb.debian.org/debian bullseye/main amd64 sudo amd64 1.9.5p2-3 [1059 kB]\n\u001b[91mdebconf: delaying package configuration, since apt-utils is not installed\n\u001b[0mFetched 1059 kB in 0s (35.7 MB/s)\nSelecting previously unselected package sudo.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 22790 files and directories currently installed.)\r\nPreparing to unpack .../sudo_1.9.5p2-3_amd64.deb ...\r\nUnpacking sudo (1.9.5p2-3) ...\r\nSetting up sudo (1.9.5p2-3) ...\r\ninvoke-rc.d: could not determine current runlevel\r\ninvoke-rc.d: policy-rc.d denied execution of start.\r\nRemoving intermediate container 1bb66e37b262\n ---> a575b6cca567\nStep 3/23 : RUN curl -fsSL https://deb.nodesource.com/setup_16.x | sudo -E bash -\n ---> Running in 025fdb7b5431\n\n## Installing the NodeSource Node.js 16.x repo...\n\n\n## Populating apt-get cache...\n\n+ apt-get update\nHit:1 http://deb.debian.org/debian bullseye InRelease\nHit:2 http://deb.debian.org/debian-security bullseye-security InRelease\nHit:3 http://deb.debian.org/debian bullseye-updates InRelease\nReading package lists...\n\n## Installing packages required for setup: lsb-release...\n\n+ apt-get install -y lsb-release > /dev/null 2>&1\n\n## Confirming \"bullseye\" is supported...\n\n+ curl -sLf -o /dev/null 'https://deb.nodesource.com/node_16.x/dists/bullseye/Release'\n\n## Adding the NodeSource signing key to your keyring...\n\n+ curl -s https://deb.nodesource.com/gpgkey/nodesource.gpg.key | gpg --dearmor | tee /usr/share/keyrings/nodesource.gpg >/dev/null\n\n## Creating apt sources list file for the NodeSource Node.js 16.x repo...\n\n+ echo 'deb [signed-by=/usr/share/keyrings/nodesource.gpg] https://deb.nodesource.com/node_16.x bullseye main' > /etc/apt/sources.list.d/nodesource.list\n+ echo 'deb-src [signed-by=/usr/share/keyrings/nodesource.gpg] https://deb.nodesource.com/node_16.x bullseye main' >> /etc/apt/sources.list.d/nodesource.list\n\n## Running `apt-get update` for you...\n\n+ apt-get update\nHit:1 http://deb.debian.org/debian bullseye InRelease\nHit:2 http://deb.debian.org/debian-security bullseye-security InRelease\nHit:3 http://deb.debian.org/debian bullseye-updates InRelease\nGet:4 https://deb.nodesource.com/node_16.x bullseye InRelease [4586 B]\nGet:5 https://deb.nodesource.com/node_16.x bullseye/main amd64 Packages [773 B]\nFetched 5359 B in 1s (3785 B/s)\nReading package lists...\n\n## Run `sudo apt-get install -y nodejs` to install Node.js 16.x and npm\n## You may also need development tools to build native addons:\n     sudo apt-get install gcc g++ make\n## To install the Yarn package manager, run:\n     curl -sL https://dl.yarnpkg.com/debian/pubkey.gpg | gpg --dearmor | sudo tee /usr/share/keyrings/yarnkey.gpg >/dev/null\n     echo \"deb [signed-by=/usr/share/keyrings/yarnkey.gpg] https://dl.yarnpkg.com/debian stable main\" | sudo tee /etc/apt/sources.list.d/yarn.list\n     sudo apt-get update && sudo apt-get install yarn\n\n\nRemoving intermediate container 025fdb7b5431\n ---> 61fdbad4110f\nStep 4/23 : RUN apt-get install --no-install-recommends -y nodejs\n ---> Running in e3f887362d88\nReading package lists...\nBuilding dependency tree...\nReading state information...\nThe following NEW packages will be installed:\n  nodejs\n0 upgraded, 1 newly installed, 0 to remove and 22 not upgraded.\nNeed to get 27.2 MB of archives.\nAfter this operation, 128 MB of additional disk space will be used.\nGet:1 https://deb.nodesource.com/node_16.x bullseye/main amd64 nodejs amd64 16.19.0-deb-1nodesource1 [27.2 MB]\n\u001b[91mdebconf: delaying package configuration, since apt-utils is not installed\n\u001b[0mFetched 27.2 MB in 1s (25.1 MB/s)\nSelecting previously unselected package nodejs.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 22949 files and directories currently installed.)\r\nPreparing to unpack .../nodejs_16.19.0-deb-1nodesource1_amd64.deb ...\r\nUnpacking nodejs (16.19.0-deb-1nodesource1) ...\r\nSetting up nodejs (16.19.0-deb-1nodesource1) ...\r\nRemoving intermediate container e3f887362d88\n ---> 63e16f18aa66\nStep 5/23 : RUN npm install -g yarn\n ---> Running in faf0a29f4214\n\nadded 1 package, and audited 2 packages in 1s\n\nfound 0 vulnerabilities\n\u001b[91mnpm\u001b[0m\u001b[91m notice\u001b[0m\u001b[91m \n\u001b[0m\u001b[91mnpm \u001b[0m\u001b[91mnotice\u001b[0m\u001b[91m New major version of npm available! 8.19.3 -> 9.2.0\nnpm notice\u001b[0m\u001b[91m Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm\u001b[0m\u001b[91m notice\u001b[0m\u001b[91m Run `npm install -g npm@9.2.0` to update!\nnpm notice\u001b[0m\u001b[91m \n\u001b[0mRemoving intermediate container faf0a29f4214\n ---> 2dfa918a9657\nStep 6/23 : ENV INSTALL_PATH /opt/app\n ---> Running in bb30deb33bef\nRemoving intermediate container bb30deb33bef\n ---> a3d2ebfbc729\nStep 7/23 : RUN mkdir -p $INSTALL_PATH\n ---> Running in d6127ee63719\nRemoving intermediate container d6127ee63719\n ---> 504e2fa26c0c\nStep 8/23 : WORKDIR $INSTALL_PATH\n ---> Running in 90e4a667dd1c\nRemoving intermediate container 90e4a667dd1c\n ---> 6fd01f42ae9c\nStep 9/23 : COPY . $INSTALL_PATH\n ---> 128972ce0f7f\nStep 10/23 : RUN gem install bundler\n ---> Running in 8a43b18c4b10\nSuccessfully installed bundler-2.4.1\n1 gem installed\nRemoving intermediate container 8a43b18c4b10\n ---> c1c02c549171\nStep 11/23 : RUN bundle install\n ---> Running in b61cbe9cfd21\nFetching gem metadata from https://rubygems.org/..........\nFetching https://github.com/performant-software/storyblok-ruby-richtext-renderer.git\nFetching rake 13.0.6\nInstalling rake 13.0.6\nFetching jmespath 1.6.1\nUsing bundler 2.4.1\nFetching builder 3.2.4\nFetching jsonapi-renderer 0.2.2\nFetching marcel 1.0.1\nUsing storyblok-richtext-renderer 0.0.6 from https://github.com/performant-software/storyblok-ruby-richtext-renderer.git (at 0a6c2e8@0a6c2e8)\nFetching foreman 0.87.2\nFetching redis 4.7.1\nFetching spring 2.1.1\nFetching concurrent-ruby 1.1.9\nFetching minitest 5.14.4\nFetching thread_safe 0.3.6\nFetching erubi 1.10.0\nFetching racc 1.6.0\nFetching crass 1.0.6\nFetching rack 2.2.4\nFetching nio4r 2.5.8\nFetching websocket-extensions 0.1.5\nFetching mini_mime 1.1.1\nFetching arel 9.0.0\nFetching aws-eventstream 1.1.1\nFetching aws-partitions 1.490.0\nFetching bcrypt 3.1.16\nFetching msgpack 1.4.2\nFetching byebug 11.1.3\nFetching numerizer 0.1.1\nFetching connection_pool 2.2.5\nFetching orm_adapter 0.5.0\nFetching method_source 1.0.0\nFetching thor 1.1.0\nFetching ffi 1.15.5\nFetching mini_magick 4.11.0\nFetching rb-fsevent 0.11.0\nFetching ruby_dep 1.5.0\nFetching open-uri 0.1.0\nFetching pg 1.2.3\nFetching pkg-config 1.4.6\nInstalling thread_safe 0.3.6\nInstalling crass 1.0.6\nInstalling minitest 5.14.4\nInstalling redis 4.7.1\nInstalling marcel 1.0.1\nInstalling jmespath 1.6.1\nInstalling websocket-extensions 0.1.5\nInstalling erubi 1.10.0\nInstalling numerizer 0.1.1\nInstalling spring 2.1.1\nInstalling ruby_dep 1.5.0\nInstalling aws-eventstream 1.1.1\nInstalling mini_mime 1.1.1\nInstalling method_source 1.0.0\nInstalling jsonapi-renderer 0.2.2\nInstalling orm_adapter 0.5.0\nInstalling connection_pool 2.2.5\nInstalling builder 3.2.4\nInstalling mini_magick 4.11.0\nInstalling foreman 0.87.2\nInstalling arel 9.0.0\nInstalling aws-partitions 1.490.0\nInstalling pkg-config 1.4.6\nInstalling open-uri 0.1.0\nInstalling racc 1.6.0 with native extensions\nInstalling byebug 11.1.3 with native extensions\nInstalling bcrypt 3.1.16 with native extensions\nInstalling thor 1.1.0\nInstalling rb-fsevent 0.11.0\nInstalling msgpack 1.4.2 with native extensions\nInstalling nio4r 2.5.8 with native extensions\nInstalling rack 2.2.4\nFetching websocket-driver 0.7.5\nInstalling pg 1.2.3 with native extensions\nInstalling websocket-driver 0.7.5 with native extensions\nInstalling concurrent-ruby 1.1.9\nFetching chronic_duration 0.10.6\nFetching aws-sigv4 1.2.4\nInstalling chronic_duration 0.10.6\nInstalling aws-sigv4 1.2.4\nFetching mail 2.7.1\nInstalling ffi 1.15.5 with native extensions\nInstalling mail 2.7.1\nFetching aws-sdk-core 3.119.1\nFetching figaro 1.2.0\nInstalling figaro 1.2.0\nInstalling aws-sdk-core 3.119.1\nFetching tzinfo 1.2.9\nInstalling tzinfo 1.2.9\nFetching rack-test 1.1.0\nFetching warden 1.2.9\nFetching rack-cors 1.1.1\nFetching sidekiq 6.5.1\nInstalling warden 1.2.9\nInstalling rack-test 1.1.0\nInstalling rack-cors 1.1.1\nInstalling sidekiq 6.5.1\nFetching i18n 1.8.10\nFetching sprockets 4.0.2\nInstalling i18n 1.8.10\nInstalling sprockets 4.0.2\nFetching sidekiq-status 2.1.3\nFetching activesupport 5.2.6\nFetching aws-sdk-kms 1.46.0\nInstalling aws-sdk-kms 1.46.0\nInstalling sidekiq-status 2.1.3\nInstalling activesupport 5.2.6\nFetching aws-sdk-s3 1.48.0\nInstalling aws-sdk-s3 1.48.0\nFetching globalid 0.5.2\nFetching activemodel 5.2.6\nFetching case_transform 0.2\nInstalling case_transform 0.2\nInstalling globalid 0.5.2\nInstalling activemodel 5.2.6\nFetching activejob 5.2.6\nFetching activerecord 5.2.6\nInstalling activejob 5.2.6\nInstalling activerecord 5.2.6\nFetching nokogiri 1.13.6 (x86_64-linux)\nInstalling nokogiri 1.13.6 (x86_64-linux)\nFetching pg_search 2.3.5\nInstalling pg_search 2.3.5\nFetching rails-dom-testing 2.0.3\nFetching loofah 2.18.0\nInstalling rails-dom-testing 2.0.3\nInstalling loofah 2.18.0\nFetching rails-html-sanitizer 1.4.3\nInstalling rails-html-sanitizer 1.4.3\nFetching actionview 5.2.6\nInstalling actionview 5.2.6\nFetching actionpack 5.2.6\nInstalling actionpack 5.2.6\nFetching actionmailer 5.2.6\nFetching active_model_serializers 0.10.12\nFetching activestorage 5.2.6\nFetching railties 5.2.6\nFetching sprockets-rails 3.2.2\nInstalling sprockets-rails 3.2.2\nInstalling actionmailer 5.2.6\nInstalling activestorage 5.2.6\nInstalling active_model_serializers 0.10.12\nInstalling railties 5.2.6\nFetching responders 3.0.1\nInstalling responders 3.0.1\nFetching devise 4.7.3\nInstalling devise 4.7.3\nFetching actioncable 5.2.6\nFetching puma 4.3.12\nInstalling actioncable 5.2.6\nInstalling puma 4.3.12 with native extensions\nFetching rails 5.2.6\nInstalling rails 5.2.6\nFetching devise_token_auth 1.1.5\nInstalling devise_token_auth 1.1.5\nFetching bootsnap 1.7.7\nInstalling bootsnap 1.7.7 with native extensions\nFetching ruby-vips 2.1.4\nFetching rb-inotify 0.10.1\nInstalling rb-inotify 0.10.1\nInstalling ruby-vips 2.1.4\nFetching listen 3.1.5\nInstalling listen 3.1.5\nFetching image_processing 1.12.2\nFetching spring-watcher-listen 2.0.1\nInstalling image_processing 1.12.2\nInstalling spring-watcher-listen 2.0.1\nBundle complete! 23 Gemfile dependencies, 84 gems now installed.\nUse `bundle info [gemname]` to see where a bundled gem is installed.\nRemoving intermediate container b61cbe9cfd21\n ---> 2e63267c57c2\nStep 12/23 : COPY entrypoint.sh /usr/bin/\n ---> 6bc6cf0fa9bb\nStep 13/23 : RUN chmod +x /usr/bin/entrypoint.sh\n ---> Running in aeaedf702d7a\nRemoving intermediate container aeaedf702d7a\n ---> e8093dace0b9\nStep 14/23 : ENTRYPOINT [\"entrypoint.sh\"]\n ---> Running in 211d6a65c7df\nRemoving intermediate container 211d6a65c7df\n ---> 4c00373b86db\nStep 15/23 : EXPOSE 443\n ---> Running in b84cfb5fa0e2\nRemoving intermediate container b84cfb5fa0e2\n ---> 9aa2fab28710\nStep 16/23 : EXPOSE 3000\n ---> Running in 8b65c1356ea3\nRemoving intermediate container 8b65c1356ea3\n ---> 752a6d6db184\nStep 17/23 : EXPOSE 3001\n ---> Running in e7d362f5ef82\nRemoving intermediate container e7d362f5ef82\n ---> af2ef1949a59\nStep 18/23 : WORKDIR $INSTALL_PATH/client\n ---> Running in eff45492f644\nRemoving intermediate container eff45492f644\n ---> 5183552d3f1f\nStep 19/23 : RUN yarn install && NODE_OPTIONS=\"--max_old_space_size=2560\" yarn build-craco\n ---> Running in 329ede81c572\nyarn install v1.22.19\n[1/4] Resolving packages...\n[2/4] Fetching packages...\n[3/4] Linking dependencies...\n\u001b[91mwarning \"react-scripts > @typescript-eslint/eslint-plugin > tsutils@3.17.1\" has unmet peer dependency \"typescript@>=2.8.0 || >= 3.2.0-dev || >= 3.3.0-dev || >= 3.4.0-dev || >= 3.5.0-dev || >= 3.6.0-dev || >= 3.6.0-beta || >= 3.7.0-dev || >= 3.7.0-beta\".\n\u001b[0m[4/4] Building fresh packages...\nDone in 44.50s.\nyarn run v1.22.19\n$ craco build\nCreating an optimized production build...\n\u001b[91mBrowserslist: caniuse-lite is outdated. Please run next command `yarn upgrade`\n\u001b[0mCompiled successfully.\n\nFile sizes after gzip:\n\n  1.22 MB   build/static/js/2.20511579.chunk.js\n  54.87 KB  build/static/js/main.e1cbe628.chunk.js\n  1.68 KB   build/static/css/2.dcf10c62.chunk.css\n  1.36 KB   build/static/css/main.fa50b844.chunk.css\n  773 B     build/static/js/runtime-main.e077b804.js\n\nThe bundle size is significantly larger than recommended.\nConsider reducing it with code splitting: https://goo.gl/9VhYWB\nYou can also analyze the project dependencies: https://goo.gl/LeUzfb\n\nThe project was built assuming it is hosted at the server root.\nYou can control this with the homepage field in your package.json.\nFor example, add this to build it for GitHub Pages:\n\n  \"homepage\" : \"http://myname.github.io/myapp\",\n\nThe build folder is ready to be deployed.\nYou may serve it with a static server:\n\n  yarn global add serve\n  serve -s build\n\nFind out more about deployment here:\n\n  https://bit.ly/CRA-deploy\n\nDone in 101.34s.\nRemoving intermediate container 329ede81c572\n ---> 30ac00fadb02\nStep 20/23 : WORKDIR $INSTALL_PATH\n ---> Running in 6e88a726bad6\nRemoving intermediate container 6e88a726bad6\n ---> b6ed26f9861b\nStep 21/23 : RUN cp -a $INSTALL_PATH/client/build/. $INSTALL_PATH/public/\n ---> Running in dc6fc44756e2\nRemoving intermediate container dc6fc44756e2\n ---> 2088a238c47e\nStep 22/23 : RUN yarn deploy\n ---> Running in ccef607c8ee3\nyarn run v1.22.19\n$ cp -a client/build/. public/\nDone in 0.42s.\nRemoving intermediate container ccef607c8ee3\n ---> ddb36e93558e\nStep 23/23 : CMD [\"/bin/sh\"]\n ---> Running in c1a3393269cd\nRemoving intermediate container c1a3393269cd\n ---> 9ceedd16dbfb\nSuccessfully built 9ceedd16dbfb\nSuccessfully tagged dm-2:latest\n","stderr":"","imageSize":1776906268},"endTime":1672111775900}