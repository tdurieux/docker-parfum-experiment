{"repository":"https://github.com/sockethub/sockethub","dockerfilePath":"Dockerfile","startTime":1672380765506,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/sockethub/sockethub'...\n","error":null,"commit":"d2688fbc13c95cbd8fafaff98b75b04849eef2dc"},"originalBuild":{"startTimestamp":1672380766552,"endTimestamp":1672381021089,"error":null,"stdout":"Sending build context to Docker daemon  2.399MB\r\r\nStep 1/14 : ARG node_version=18\nStep 2/14 : FROM node:${node_version}\n ---> 7b2a09676e2c\nStep 3/14 : ARG node_version\n ---> Running in 4dba148bbdbc\nRemoving intermediate container 4dba148bbdbc\n ---> b467224c9447\nStep 4/14 : LABEL authors=\"Ben Kero <ben.kero@gmail.com>, Nick Jennings <nick@silverbucket.net>\"\n ---> Running in 1e82dc0d0634\nRemoving intermediate container 1e82dc0d0634\n ---> a2c539bcbf50\nStep 5/14 : RUN echo \"Building Sockethub docker image with Node version ${node_version}\"\n ---> Running in 3a30df382211\nBuilding Sockethub docker image with Node version 18\nRemoving intermediate container 3a30df382211\n ---> d90df2238bc6\nStep 6/14 : WORKDIR /app\n ---> Running in d26853840633\nRemoving intermediate container d26853840633\n ---> d25a95b518b1\nStep 7/14 : RUN rm /usr/local/bin/yarn\n ---> Running in 1d9bbbc0934d\nRemoving intermediate container 1d9bbbc0934d\n ---> 03df587ff27a\nStep 8/14 : RUN rm /usr/local/bin/yarnpkg\n ---> Running in 4ad9f632c386\nRemoving intermediate container 4ad9f632c386\n ---> 4149e138fd84\nStep 9/14 : RUN npm install -g yarn@latest\n ---> Running in 4540d70da031\n\nadded 1 package, and audited 2 packages in 686ms\n\nfound 0 vulnerabilities\n\u001b[91mnpm \u001b[0m\u001b[91mnotice\u001b[0m\u001b[91m \n\u001b[0m\u001b[91mnpm notice\u001b[0m\u001b[91m New major version of npm available! 8.19.2 -> 9.2.0\nnpm \u001b[0m\u001b[91mnotice\u001b[0m\u001b[91m Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm\u001b[0m\u001b[91m notice Run `npm install -g npm@9.2.0` to update!\nnpm\u001b[0m\u001b[91m notice\u001b[0m\u001b[91m \n\u001b[0mRemoving intermediate container 4540d70da031\n ---> f6a53aa9af09\nStep 10/14 : COPY . .\n ---> 8a680eee81be\nStep 11/14 : RUN yarn install\n ---> Running in bfc65d7ef222\nyarn install v1.22.19\n[1/4] Resolving packages...\n[2/4] Fetching packages...\n[3/4] Linking dependencies...\n\u001b[91mwarning \"@nrwl/js > @nrwl/devkit@14.8.6\" has unmet peer dependency \"nx@>= 13.10 <= 15\".\n\u001b[0m\u001b[91mwarning \"@nrwl/node > @nrwl/webpack > babel-loader@8.3.0\" has unmet peer dependency \"@babel/core@^7.0.0\".\n\u001b[0m\u001b[91mwarning \"@nrwl/node > @nrwl/webpack > ts-node@10.9.1\" has unmet peer dependency \"@types/node@*\".\n\u001b[0m[4/4] Building fresh packages...\n$ lerna bootstrap && nx run-many --target=build --skip-nx-cache\n\u001b[91mlerna notice cli v6.0.3\n\u001b[0m\u001b[91mlerna info versioning independent\n\u001b[0m\u001b[91mlerna info Bootstrapping 12 packages\n\u001b[0m\u001b[91mlerna info Installing external dependencies\n\u001b[0m\u001b[91mlerna info Symlinking packages and binaries\n\u001b[0m\u001b[91mlerna success Bootstrapped 12 packages\n\u001b[0m\n >  NX   Running target build for 10 project(s):\n\n    - @sockethub/activity-streams\n    - @sockethub/platform-feeds\n    - @sockethub/platform-xmpp\n    - @sockethub/platform-irc\n    - @sockethub/data-layer\n    - sockethub\n    - @sockethub/schemas\n    - @sockethub/client\n    - @sockethub/crypto\n    - @sockethub/server\n\n \n\n> nx run @sockethub/schemas:build\n\n\u001b[2K\u001b[1G\u001b[1myarn run v1.22.19\u001b[22m\n\u001b[2K\u001b[1G\u001b[2m$ npx rimraf dist && tsc && ./scripts/export-json-schema.js\u001b[22m\n[\n  { '$ref': '#/definitions/type/feed' },\n  { '$ref': '#/definitions/type/message' },\n  { '$ref': '#/definitions/type/me' },\n  { '$ref': '#/definitions/type/person' },\n  { '$ref': '#/definitions/type/room' },\n  { '$ref': '#/definitions/type/service' },\n  { '$ref': '#/definitions/type/website' },\n  { '$ref': '#/definitions/type/attendance' },\n  { '$ref': '#/definitions/type/presence' },\n  { '$ref': '#/definitions/type/relationship' },\n  { '$ref': '#/definitions/type/topic' },\n  { '$ref': '#/definitions/type/address' }\n]\n\u001b[2K\u001b[1GDone in 3.13s.\n\n> nx run @sockethub/crypto:build\n\n\u001b[2K\u001b[1G\u001b[1myarn run v1.22.19\u001b[22m\n\u001b[2K\u001b[1G\u001b[2m$ tsc\u001b[22m\n\u001b[2K\u001b[1GDone in 1.81s.\n\n> nx run @sockethub/data-layer:build\n\n\u001b[2K\u001b[1G\u001b[1myarn run v1.22.19\u001b[22m\n\u001b[2K\u001b[1G\u001b[2m$ tsc\u001b[22m\n\u001b[2K\u001b[1GDone in 2.14s.\n\n> nx run @sockethub/activity-streams:build\n\n\u001b[2K\u001b[1G\u001b[1myarn run v1.22.19\u001b[22m\n\u001b[2K\u001b[1G\u001b[2m$ yarn compile && rollup -c config/rollup.config.esm.mjs && rollup -c config/rollup.config.umd.mjs && rollup -c config/rollup.config.test.mjs\u001b[22m\n\u001b[2K\u001b[1G\u001b[2m$ rimraf build dist && tsc -p config/tsconfig.cjs.json && tsc -p config/tsconfig.esm.json\u001b[22m\n\u001b[36m\n\u001b[1m./build/esm/activity-streams.js\u001b[22m → \u001b[1m./dist/activity-streams.esm.min.js\u001b[22m...\u001b[39m\n\u001b[32mcreated \u001b[1m./dist/activity-streams.esm.min.js\u001b[22m in \u001b[1m708ms\u001b[22m\u001b[39m\n\u001b[36m\n\u001b[1m./build/esm/activity-streams.js\u001b[22m → \u001b[1m./dist/activity-streams.js, ./dist/activity-streams.min.js\u001b[22m...\u001b[39m\n\u001b[32mcreated \u001b[1m./dist/activity-streams.js, ./dist/activity-streams.min.js\u001b[22m in \u001b[1m1.4s\u001b[22m\u001b[39m\n\u001b[36m\n\u001b[1m./build/esm/activity-streams.test.js\u001b[22m → \u001b[1m./dist/activity-streams.test.js\u001b[22m...\u001b[39m\n\u001b[1m\u001b[33m(!) Circular dependencies\u001b[39m\u001b[22m\nnode_modules/chai/lib/chai.js -> node_modules/chai/lib/chai/utils/index.js -> node_modules/chai/lib/chai/utils/addProperty.js -> node_modules/chai/lib/chai.js\nnode_modules/chai/lib/chai.js -> node_modules/chai/lib/chai/utils/index.js -> node_modules/chai/lib/chai/utils/addMethod.js -> node_modules/chai/lib/chai.js\nnode_modules/chai/lib/chai.js -> node_modules/chai/lib/chai/utils/index.js -> node_modules/chai/lib/chai/utils/overwriteProperty.js -> node_modules/chai/lib/chai.js\n...and 3 more\n\u001b[32mcreated \u001b[1m./dist/activity-streams.test.js\u001b[22m in \u001b[1m1.8s\u001b[22m\u001b[39m\n\u001b[2K\u001b[1GDone in 10.01s.\n\n> nx run @sockethub/client:build\n\n\u001b[2K\u001b[1G\u001b[1myarn run v1.22.19\u001b[22m\n\u001b[2K\u001b[1G\u001b[2m$ yarn compile && rollup -c config/rollup.config.esm.mjs && rollup -c config/rollup.config.umd.mjs\u001b[22m\n\u001b[2K\u001b[1G\u001b[2m$ rimraf build dist && tsc -p config/tsconfig.cjs.json && tsc -p config/tsconfig.esm.json\u001b[22m\n\u001b[36m\n\u001b[1m./build/esm/sockethub-client.js\u001b[22m → \u001b[1m./dist/sockethub-client.esm.min.js\u001b[22m...\u001b[39m\n\u001b[32mcreated \u001b[1m./dist/sockethub-client.esm.min.js\u001b[22m in \u001b[1m690ms\u001b[22m\u001b[39m\n\u001b[36m\n\u001b[1m./build/esm/sockethub-client.js\u001b[22m → \u001b[1m./dist/sockethub-client.js, ./dist/sockethub-client.min.js\u001b[22m...\u001b[39m\n\u001b[32mcreated \u001b[1m./dist/sockethub-client.js, ./dist/sockethub-client.min.js\u001b[22m in \u001b[1m1.6s\u001b[22m\u001b[39m\n\u001b[2K\u001b[1GDone in 7.74s.\n\n> nx run @sockethub/server:build\n\n\u001b[2K\u001b[1G\u001b[1myarn run v1.22.19\u001b[22m\n\u001b[2K\u001b[1G\u001b[2m$ npx rimraf dist && tsc && cp ./src/defaults.json ./dist/defaults.json && cp src/bootstrap/platforms.js dist/bootstrap/\u001b[22m\n\u001b[2K\u001b[1GDone in 2.51s.\n\n> nx run @sockethub/platform-irc:build\n\n\u001b[2K\u001b[1G\u001b[1myarn run v1.22.19\u001b[22m\n\u001b[2K\u001b[1G\u001b[2m$ true\u001b[22m\n\u001b[2K\u001b[1GDone in 0.06s.\n\n> nx run @sockethub/platform-xmpp:build\n\n\u001b[2K\u001b[1G\u001b[1myarn run v1.22.19\u001b[22m\n\u001b[2K\u001b[1G\u001b[2m$ yarn run doc\u001b[22m\n\u001b[2K\u001b[1G\u001b[2m$ jsdoc2md --no-gfm --heading-depth 1 src/index.js > API.md\u001b[22m\n\u001b[2K\u001b[1GDone in 0.89s.\n\n> nx run @sockethub/platform-feeds:build\n\n\u001b[2K\u001b[1G\u001b[1myarn run v1.22.19\u001b[22m\n\u001b[2K\u001b[1G\u001b[2m$ yarn run doc\u001b[22m\n\u001b[2K\u001b[1G\u001b[2m$ jsdoc2md --no-gfm --heading-depth 1 index.js  > API.md\u001b[22m\n\u001b[2K\u001b[1GDone in 0.86s.\n\n> nx run sockethub:build\n\n\u001b[2K\u001b[1G\u001b[1myarn run v1.22.19\u001b[22m\n\u001b[2K\u001b[1G\u001b[2m$ node build.js && test -f sockethub.config.json\u001b[22m\n\u001b[2K\u001b[1GDone in 0.11s.\n\n \n\n >  NX   Successfully ran target build for 10 projects\n\n\n   View logs and investigate cache misses at https://cloud.nx.app/runs/QwOJuL7aop\n\nDone in 124.79s.\nRemoving intermediate container bfc65d7ef222\n ---> 7b2097b7892a\nStep 12/14 : RUN yarn build\n ---> Running in 5b2cd2ee8953\nyarn run v1.22.19\n$ nx run-many --target=build --all\n\n >  NX   Running target build for 10 project(s):\n\n    - @sockethub/activity-streams\n    - @sockethub/platform-feeds\n    - @sockethub/platform-xmpp\n    - @sockethub/platform-irc\n    - @sockethub/data-layer\n    - sockethub\n    - @sockethub/schemas\n    - @sockethub/client\n    - @sockethub/crypto\n    - @sockethub/server\n\n \n\n> nx run @sockethub/schemas:build  [local cache]\n\n\u001b[2K\u001b[1G\u001b[1myarn run v1.22.19\u001b[22m\n\u001b[2K\u001b[1G\u001b[2m$ npx rimraf dist && tsc && ./scripts/export-json-schema.js\u001b[22m\n[\n  { '$ref': '#/definitions/type/feed' },\n  { '$ref': '#/definitions/type/message' },\n  { '$ref': '#/definitions/type/me' },\n  { '$ref': '#/definitions/type/person' },\n  { '$ref': '#/definitions/type/room' },\n  { '$ref': '#/definitions/type/service' },\n  { '$ref': '#/definitions/type/website' },\n  { '$ref': '#/definitions/type/attendance' },\n  { '$ref': '#/definitions/type/presence' },\n  { '$ref': '#/definitions/type/relationship' },\n  { '$ref': '#/definitions/type/topic' },\n  { '$ref': '#/definitions/type/address' }\n]\n\u001b[2K\u001b[1GDone in 3.13s.\n\n> nx run @sockethub/activity-streams:build  [local cache]\n\n\u001b[2K\u001b[1G\u001b[1myarn run v1.22.19\u001b[22m\n\u001b[2K\u001b[1G\u001b[2m$ yarn compile && rollup -c config/rollup.config.esm.mjs && rollup -c config/rollup.config.umd.mjs && rollup -c config/rollup.config.test.mjs\u001b[22m\n\u001b[2K\u001b[1G\u001b[2m$ rimraf build dist && tsc -p config/tsconfig.cjs.json && tsc -p config/tsconfig.esm.json\u001b[22m\n\u001b[36m\n\u001b[1m./build/esm/activity-streams.js\u001b[22m → \u001b[1m./dist/activity-streams.esm.min.js\u001b[22m...\u001b[39m\n\u001b[32mcreated \u001b[1m./dist/activity-streams.esm.min.js\u001b[22m in \u001b[1m708ms\u001b[22m\u001b[39m\n\u001b[36m\n\u001b[1m./build/esm/activity-streams.js\u001b[22m → \u001b[1m./dist/activity-streams.js, ./dist/activity-streams.min.js\u001b[22m...\u001b[39m\n\u001b[32mcreated \u001b[1m./dist/activity-streams.js, ./dist/activity-streams.min.js\u001b[22m in \u001b[1m1.4s\u001b[22m\u001b[39m\n\u001b[36m\n\u001b[1m./build/esm/activity-streams.test.js\u001b[22m → \u001b[1m./dist/activity-streams.test.js\u001b[22m...\u001b[39m\n\u001b[1m\u001b[33m(!) Circular dependencies\u001b[39m\u001b[22m\nnode_modules/chai/lib/chai.js -> node_modules/chai/lib/chai/utils/index.js -> node_modules/chai/lib/chai/utils/addProperty.js -> node_modules/chai/lib/chai.js\nnode_modules/chai/lib/chai.js -> node_modules/chai/lib/chai/utils/index.js -> node_modules/chai/lib/chai/utils/addMethod.js -> node_modules/chai/lib/chai.js\nnode_modules/chai/lib/chai.js -> node_modules/chai/lib/chai/utils/index.js -> node_modules/chai/lib/chai/utils/overwriteProperty.js -> node_modules/chai/lib/chai.js\n...and 3 more\n\u001b[32mcreated \u001b[1m./dist/activity-streams.test.js\u001b[22m in \u001b[1m1.8s\u001b[22m\u001b[39m\n\u001b[2K\u001b[1GDone in 10.01s.\n\n> nx run @sockethub/crypto:build  [local cache]\n\n\u001b[2K\u001b[1G\u001b[1myarn run v1.22.19\u001b[22m\n\u001b[2K\u001b[1G\u001b[2m$ tsc\u001b[22m\n\u001b[2K\u001b[1GDone in 1.81s.\n\n> nx run @sockethub/client:build  [local cache]\n\n\u001b[2K\u001b[1G\u001b[1myarn run v1.22.19\u001b[22m\n\u001b[2K\u001b[1G\u001b[2m$ yarn compile && rollup -c config/rollup.config.esm.mjs && rollup -c config/rollup.config.umd.mjs\u001b[22m\n\u001b[2K\u001b[1G\u001b[2m$ rimraf build dist && tsc -p config/tsconfig.cjs.json && tsc -p config/tsconfig.esm.json\u001b[22m\n\u001b[36m\n\u001b[1m./build/esm/sockethub-client.js\u001b[22m → \u001b[1m./dist/sockethub-client.esm.min.js\u001b[22m...\u001b[39m\n\u001b[32mcreated \u001b[1m./dist/sockethub-client.esm.min.js\u001b[22m in \u001b[1m690ms\u001b[22m\u001b[39m\n\u001b[36m\n\u001b[1m./build/esm/sockethub-client.js\u001b[22m → \u001b[1m./dist/sockethub-client.js, ./dist/sockethub-client.min.js\u001b[22m...\u001b[39m\n\u001b[32mcreated \u001b[1m./dist/sockethub-client.js, ./dist/sockethub-client.min.js\u001b[22m in \u001b[1m1.6s\u001b[22m\u001b[39m\n\u001b[2K\u001b[1GDone in 7.74s.\n\n> nx run @sockethub/data-layer:build  [local cache]\n\n\u001b[2K\u001b[1G\u001b[1myarn run v1.22.19\u001b[22m\n\u001b[2K\u001b[1G\u001b[2m$ tsc\u001b[22m\n\u001b[2K\u001b[1GDone in 2.14s.\n\n> nx run @sockethub/server:build  [local cache]\n\n\u001b[2K\u001b[1G\u001b[1myarn run v1.22.19\u001b[22m\n\u001b[2K\u001b[1G\u001b[2m$ npx rimraf dist && tsc && cp ./src/defaults.json ./dist/defaults.json && cp src/bootstrap/platforms.js dist/bootstrap/\u001b[22m\n\u001b[2K\u001b[1GDone in 2.51s.\n\n> nx run @sockethub/platform-feeds:build  [local cache]\n\n\u001b[2K\u001b[1G\u001b[1myarn run v1.22.19\u001b[22m\n\u001b[2K\u001b[1G\u001b[2m$ yarn run doc\u001b[22m\n\u001b[2K\u001b[1G\u001b[2m$ jsdoc2md --no-gfm --heading-depth 1 index.js  > API.md\u001b[22m\n\u001b[2K\u001b[1GDone in 0.86s.\n\n> nx run @sockethub/platform-xmpp:build  [local cache]\n\n\u001b[2K\u001b[1G\u001b[1myarn run v1.22.19\u001b[22m\n\u001b[2K\u001b[1G\u001b[2m$ yarn run doc\u001b[22m\n\u001b[2K\u001b[1G\u001b[2m$ jsdoc2md --no-gfm --heading-depth 1 src/index.js > API.md\u001b[22m\n\u001b[2K\u001b[1GDone in 0.89s.\n\n> nx run @sockethub/platform-irc:build  [local cache]\n\n\u001b[2K\u001b[1G\u001b[1myarn run v1.22.19\u001b[22m\n\u001b[2K\u001b[1G\u001b[2m$ true\u001b[22m\n\u001b[2K\u001b[1GDone in 0.06s.\n\n> nx run sockethub:build  [local cache]\n\n\u001b[2K\u001b[1G\u001b[1myarn run v1.22.19\u001b[22m\n\u001b[2K\u001b[1G\u001b[2m$ node build.js && test -f sockethub.config.json\u001b[22m\n\u001b[2K\u001b[1GDone in 0.11s.\n\n \n\n >  NX   Successfully ran target build for 10 projects\n\n   Nx read the output from the cache instead of running the command for 10 out of 10 tasks.\n\n   View logs and run details at https://cloud.nx.app/runs/vkpHagCY6d\n\nDone in 0.87s.\nRemoving intermediate container 5b2cd2ee8953\n ---> b11117163269\nStep 13/14 : EXPOSE 10550\n ---> Running in ffd2bdc2eeb6\nRemoving intermediate container ffd2bdc2eeb6\n ---> dcfc452b7ef5\nStep 14/14 : CMD DEBUG=sockethub*,*redis* /app/packages/sockethub/bin/sockethub --examples --host 0.0.0.0 -c /app/test/sockethub.config.docker.json\n ---> Running in 14df74f1873f\nRemoving intermediate container 14df74f1873f\n ---> 0f7cb12433ef\nSuccessfully built 0f7cb12433ef\nSuccessfully tagged sockethub:latest\n","stderr":"","imageSize":2534264265},"repair":{"violations":[{"name":"npmCacheCleanAfterInstall","position":{"start":11,"end":11,"columnStart":4,"columnEnd":30}}],"repairedDockerfile":"ARG node_version=18\nFROM node:${node_version}\nARG node_version\nLABEL authors=\"Ben Kero <ben.kero@gmail.com>, Nick Jennings <nick@silverbucket.net>\"\nRUN echo \"Building Sockethub docker image with Node version ${node_version}\"\n\nWORKDIR /app\n\n# Remove unwanted preinstalled version of yarn\nRUN rm /usr/local/bin/yarn\nRUN rm /usr/local/bin/yarnpkg\nRUN npm install -g yarn@latest\n\nCOPY . .\n\nRUN yarn install\nRUN yarn build\n\nEXPOSE 10550\nCMD DEBUG=sockethub*,*redis* /app/packages/sockethub/bin/sockethub --examples --host 0.0.0.0 -c /app/test/sockethub.config.docker.json\n"},"repairedBuild":{"startTimestamp":1672381024013,"endTimestamp":1672381226347,"error":null,"stdout":"Sending build context to Docker daemon  2.399MB\r\r\nStep 1/14 : ARG node_version=18\nStep 2/14 : FROM node:${node_version}\n ---> 7b2a09676e2c\nStep 3/14 : ARG node_version\n ---> Running in 412275b32d76\nRemoving intermediate container 412275b32d76\n ---> 74c90fdd60be\nStep 4/14 : LABEL authors=\"Ben Kero <ben.kero@gmail.com>, Nick Jennings <nick@silverbucket.net>\"\n ---> Running in 670c91ad4fd6\nRemoving intermediate container 670c91ad4fd6\n ---> 973be1cffcbe\nStep 5/14 : RUN echo \"Building Sockethub docker image with Node version ${node_version}\"\n ---> Running in 00313ef983bc\nBuilding Sockethub docker image with Node version 18\nRemoving intermediate container 00313ef983bc\n ---> 5f584eac428f\nStep 6/14 : WORKDIR /app\n ---> Running in a3bf1fc321d8\nRemoving intermediate container a3bf1fc321d8\n ---> c8764b8e8ca4\nStep 7/14 : RUN rm /usr/local/bin/yarn\n ---> Running in 032fcf97f322\nRemoving intermediate container 032fcf97f322\n ---> 3eba5cd52e1b\nStep 8/14 : RUN rm /usr/local/bin/yarnpkg\n ---> Running in ebdc03a85dc5\nRemoving intermediate container ebdc03a85dc5\n ---> ac63f8b268b4\nStep 9/14 : RUN npm install -g yarn@latest\n ---> Running in d2bd00007fef\n\nadded 1 package, and audited 2 packages in 731ms\n\nfound 0 vulnerabilities\n\u001b[91mnpm \u001b[0m\u001b[91mnotice\u001b[0m\u001b[91m \n\u001b[0m\u001b[91mnpm notice\u001b[0m\u001b[91m New major version of npm available! 8.19.2 -> 9.2.0\nnpm \u001b[0m\u001b[91mnotice Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm\u001b[0m\u001b[91m notice Run `npm install -g npm@9.2.0` to update!\nnpm notice\u001b[0m\u001b[91m \n\u001b[0mRemoving intermediate container d2bd00007fef\n ---> 46211d786527\nStep 10/14 : COPY . .\n ---> 90764ff8e2f6\nStep 11/14 : RUN yarn install\n ---> Running in 3a32b4a34ddf\nyarn install v1.22.19\n[1/4] Resolving packages...\n[2/4] Fetching packages...\n[3/4] Linking dependencies...\n\u001b[91mwarning \"@nrwl/js > @nrwl/devkit@14.8.6\" has unmet peer dependency \"nx@>= 13.10 <= 15\".\n\u001b[0m\u001b[91mwarning \"@nrwl/node > @nrwl/webpack > babel-loader@8.3.0\" has unmet peer dependency \"@babel/core@^7.0.0\".\n\u001b[0m\u001b[91mwarning \"@nrwl/node > @nrwl/webpack > ts-node@10.9.1\" has unmet peer dependency \"@types/node@*\".\n\u001b[0m[4/4] Building fresh packages...\n$ lerna bootstrap && nx run-many --target=build --skip-nx-cache\n\u001b[91mlerna\u001b[0m\u001b[91m notice cli v6.0.3\n\u001b[0m\u001b[91mlerna info versioning\u001b[0m\u001b[91m independent\n\u001b[0m\u001b[91mlerna info Bootstrapping 12 packages\n\u001b[0m\u001b[91mlerna info Installing external dependencies\n\u001b[0m\u001b[91mlerna info Symlinking packages and binaries\n\u001b[0m\u001b[91mlerna success Bootstrapped 12 packages\n\u001b[0m\n >  NX   Running target build for 10 project(s):\n\n    - @sockethub/activity-streams\n    - @sockethub/platform-feeds\n    - @sockethub/platform-xmpp\n    - @sockethub/platform-irc\n    - @sockethub/data-layer\n    - sockethub\n    - @sockethub/schemas\n    - @sockethub/client\n    - @sockethub/crypto\n    - @sockethub/server\n\n \n\n> nx run @sockethub/schemas:build\n\n\u001b[2K\u001b[1G\u001b[1myarn run v1.22.19\u001b[22m\n\u001b[2K\u001b[1G\u001b[2m$ npx rimraf dist && tsc && ./scripts/export-json-schema.js\u001b[22m\n[\n  { '$ref': '#/definitions/type/feed' },\n  { '$ref': '#/definitions/type/message' },\n  { '$ref': '#/definitions/type/me' },\n  { '$ref': '#/definitions/type/person' },\n  { '$ref': '#/definitions/type/room' },\n  { '$ref': '#/definitions/type/service' },\n  { '$ref': '#/definitions/type/website' },\n  { '$ref': '#/definitions/type/attendance' },\n  { '$ref': '#/definitions/type/presence' },\n  { '$ref': '#/definitions/type/relationship' },\n  { '$ref': '#/definitions/type/topic' },\n  { '$ref': '#/definitions/type/address' }\n]\n\u001b[2K\u001b[1GDone in 3.23s.\n\n> nx run @sockethub/crypto:build\n\n\u001b[2K\u001b[1G\u001b[1myarn run v1.22.19\u001b[22m\n\u001b[2K\u001b[1G\u001b[2m$ tsc\u001b[22m\n\u001b[2K\u001b[1GDone in 1.57s.\n\n> nx run @sockethub/data-layer:build\n\n\u001b[2K\u001b[1G\u001b[1myarn run v1.22.19\u001b[22m\n\u001b[2K\u001b[1G\u001b[2m$ tsc\u001b[22m\n\u001b[2K\u001b[1GDone in 1.95s.\n\n> nx run @sockethub/activity-streams:build\n\n\u001b[2K\u001b[1G\u001b[1myarn run v1.22.19\u001b[22m\n\u001b[2K\u001b[1G\u001b[2m$ yarn compile && rollup -c config/rollup.config.esm.mjs && rollup -c config/rollup.config.umd.mjs && rollup -c config/rollup.config.test.mjs\u001b[22m\n\u001b[2K\u001b[1G\u001b[2m$ rimraf build dist && tsc -p config/tsconfig.cjs.json && tsc -p config/tsconfig.esm.json\u001b[22m\n\u001b[36m\n\u001b[1m./build/esm/activity-streams.js\u001b[22m → \u001b[1m./dist/activity-streams.esm.min.js\u001b[22m...\u001b[39m\n\u001b[32mcreated \u001b[1m./dist/activity-streams.esm.min.js\u001b[22m in \u001b[1m674ms\u001b[22m\u001b[39m\n\u001b[36m\n\u001b[1m./build/esm/activity-streams.js\u001b[22m → \u001b[1m./dist/activity-streams.js, ./dist/activity-streams.min.js\u001b[22m...\u001b[39m\n\u001b[32mcreated \u001b[1m./dist/activity-streams.js, ./dist/activity-streams.min.js\u001b[22m in \u001b[1m1.4s\u001b[22m\u001b[39m\n\u001b[36m\n\u001b[1m./build/esm/activity-streams.test.js\u001b[22m → \u001b[1m./dist/activity-streams.test.js\u001b[22m...\u001b[39m\n\u001b[1m\u001b[33m(!) Circular dependencies\u001b[39m\u001b[22m\nnode_modules/chai/lib/chai.js -> node_modules/chai/lib/chai/utils/index.js -> node_modules/chai/lib/chai/utils/addProperty.js -> node_modules/chai/lib/chai.js\nnode_modules/chai/lib/chai.js -> node_modules/chai/lib/chai/utils/index.js -> node_modules/chai/lib/chai/utils/addMethod.js -> node_modules/chai/lib/chai.js\nnode_modules/chai/lib/chai.js -> node_modules/chai/lib/chai/utils/index.js -> node_modules/chai/lib/chai/utils/overwriteProperty.js -> node_modules/chai/lib/chai.js\n...and 3 more\n\u001b[32mcreated \u001b[1m./dist/activity-streams.test.js\u001b[22m in \u001b[1m1.7s\u001b[22m\u001b[39m\n\u001b[2K\u001b[1GDone in 9.84s.\n\n> nx run @sockethub/client:build\n\n\u001b[2K\u001b[1G\u001b[1myarn run v1.22.19\u001b[22m\n\u001b[2K\u001b[1G\u001b[2m$ yarn compile && rollup -c config/rollup.config.esm.mjs && rollup -c config/rollup.config.umd.mjs\u001b[22m\n\u001b[2K\u001b[1G\u001b[2m$ rimraf build dist && tsc -p config/tsconfig.cjs.json && tsc -p config/tsconfig.esm.json\u001b[22m\n\u001b[36m\n\u001b[1m./build/esm/sockethub-client.js\u001b[22m → \u001b[1m./dist/sockethub-client.esm.min.js\u001b[22m...\u001b[39m\n\u001b[32mcreated \u001b[1m./dist/sockethub-client.esm.min.js\u001b[22m in \u001b[1m812ms\u001b[22m\u001b[39m\n\u001b[36m\n\u001b[1m./build/esm/sockethub-client.js\u001b[22m → \u001b[1m./dist/sockethub-client.js, ./dist/sockethub-client.min.js\u001b[22m...\u001b[39m\n\u001b[32mcreated \u001b[1m./dist/sockethub-client.js, ./dist/sockethub-client.min.js\u001b[22m in \u001b[1m1.7s\u001b[22m\u001b[39m\n\u001b[2K\u001b[1GDone in 8.53s.\n\n> nx run @sockethub/server:build\n\n\u001b[2K\u001b[1G\u001b[1myarn run v1.22.19\u001b[22m\n\u001b[2K\u001b[1G\u001b[2m$ npx rimraf dist && tsc && cp ./src/defaults.json ./dist/defaults.json && cp src/bootstrap/platforms.js dist/bootstrap/\u001b[22m\n\u001b[2K\u001b[1GDone in 2.81s.\n\n> nx run @sockethub/platform-irc:build\n\n\u001b[2K\u001b[1G\u001b[1myarn run v1.22.19\u001b[22m\n\u001b[2K\u001b[1G\u001b[2m$ true\u001b[22m\n\u001b[2K\u001b[1GDone in 0.08s.\n\n> nx run @sockethub/platform-xmpp:build\n\n\u001b[2K\u001b[1G\u001b[1myarn run v1.22.19\u001b[22m\n\u001b[2K\u001b[1G\u001b[2m$ yarn run doc\u001b[22m\n\u001b[2K\u001b[1G\u001b[2m$ jsdoc2md --no-gfm --heading-depth 1 src/index.js > API.md\u001b[22m\n\u001b[2K\u001b[1GDone in 0.94s.\n\n> nx run @sockethub/platform-feeds:build\n\n\u001b[2K\u001b[1G\u001b[1myarn run v1.22.19\u001b[22m\n\u001b[2K\u001b[1G\u001b[2m$ yarn run doc\u001b[22m\n\u001b[2K\u001b[1G\u001b[2m$ jsdoc2md --no-gfm --heading-depth 1 index.js  > API.md\u001b[22m\n\u001b[2K\u001b[1GDone in 1.10s.\n\n> nx run sockethub:build\n\n\u001b[2K\u001b[1G\u001b[1myarn run v1.22.19\u001b[22m\n\u001b[2K\u001b[1G\u001b[2m$ node build.js && test -f sockethub.config.json\u001b[22m\n\u001b[2K\u001b[1GDone in 0.12s.\n\n \n\n >  NX   Successfully ran target build for 10 projects\n\n\n   View logs and investigate cache misses at https://cloud.nx.app/runs/MDygUPVefx\n\nDone in 106.77s.\nRemoving intermediate container 3a32b4a34ddf\n ---> 9d2b28ba3d82\nStep 12/14 : RUN yarn build\n ---> Running in da0e38659a50\nyarn run v1.22.19\n$ nx run-many --target=build --all\n\n >  NX   Running target build for 10 project(s):\n\n    - @sockethub/activity-streams\n    - @sockethub/platform-feeds\n    - @sockethub/platform-xmpp\n    - @sockethub/platform-irc\n    - @sockethub/data-layer\n    - sockethub\n    - @sockethub/schemas\n    - @sockethub/client\n    - @sockethub/crypto\n    - @sockethub/server\n\n \n\n> nx run @sockethub/schemas:build  [local cache]\n\n\u001b[2K\u001b[1G\u001b[1myarn run v1.22.19\u001b[22m\n\u001b[2K\u001b[1G\u001b[2m$ npx rimraf dist && tsc && ./scripts/export-json-schema.js\u001b[22m\n[\n  { '$ref': '#/definitions/type/feed' },\n  { '$ref': '#/definitions/type/message' },\n  { '$ref': '#/definitions/type/me' },\n  { '$ref': '#/definitions/type/person' },\n  { '$ref': '#/definitions/type/room' },\n  { '$ref': '#/definitions/type/service' },\n  { '$ref': '#/definitions/type/website' },\n  { '$ref': '#/definitions/type/attendance' },\n  { '$ref': '#/definitions/type/presence' },\n  { '$ref': '#/definitions/type/relationship' },\n  { '$ref': '#/definitions/type/topic' },\n  { '$ref': '#/definitions/type/address' }\n]\n\u001b[2K\u001b[1GDone in 3.23s.\n\n> nx run @sockethub/crypto:build  [local cache]\n\n\u001b[2K\u001b[1G\u001b[1myarn run v1.22.19\u001b[22m\n\u001b[2K\u001b[1G\u001b[2m$ tsc\u001b[22m\n\u001b[2K\u001b[1GDone in 1.57s.\n\n> nx run @sockethub/activity-streams:build  [local cache]\n\n\u001b[2K\u001b[1G\u001b[1myarn run v1.22.19\u001b[22m\n\u001b[2K\u001b[1G\u001b[2m$ yarn compile && rollup -c config/rollup.config.esm.mjs && rollup -c config/rollup.config.umd.mjs && rollup -c config/rollup.config.test.mjs\u001b[22m\n\u001b[2K\u001b[1G\u001b[2m$ rimraf build dist && tsc -p config/tsconfig.cjs.json && tsc -p config/tsconfig.esm.json\u001b[22m\n\u001b[36m\n\u001b[1m./build/esm/activity-streams.js\u001b[22m → \u001b[1m./dist/activity-streams.esm.min.js\u001b[22m...\u001b[39m\n\u001b[32mcreated \u001b[1m./dist/activity-streams.esm.min.js\u001b[22m in \u001b[1m674ms\u001b[22m\u001b[39m\n\u001b[36m\n\u001b[1m./build/esm/activity-streams.js\u001b[22m → \u001b[1m./dist/activity-streams.js, ./dist/activity-streams.min.js\u001b[22m...\u001b[39m\n\u001b[32mcreated \u001b[1m./dist/activity-streams.js, ./dist/activity-streams.min.js\u001b[22m in \u001b[1m1.4s\u001b[22m\u001b[39m\n\u001b[36m\n\u001b[1m./build/esm/activity-streams.test.js\u001b[22m → \u001b[1m./dist/activity-streams.test.js\u001b[22m...\u001b[39m\n\u001b[1m\u001b[33m(!) Circular dependencies\u001b[39m\u001b[22m\nnode_modules/chai/lib/chai.js -> node_modules/chai/lib/chai/utils/index.js -> node_modules/chai/lib/chai/utils/addProperty.js -> node_modules/chai/lib/chai.js\nnode_modules/chai/lib/chai.js -> node_modules/chai/lib/chai/utils/index.js -> node_modules/chai/lib/chai/utils/addMethod.js -> node_modules/chai/lib/chai.js\nnode_modules/chai/lib/chai.js -> node_modules/chai/lib/chai/utils/index.js -> node_modules/chai/lib/chai/utils/overwriteProperty.js -> node_modules/chai/lib/chai.js\n...and 3 more\n\u001b[32mcreated \u001b[1m./dist/activity-streams.test.js\u001b[22m in \u001b[1m1.7s\u001b[22m\u001b[39m\n\u001b[2K\u001b[1GDone in 9.84s.\n\n> nx run @sockethub/data-layer:build  [local cache]\n\n\u001b[2K\u001b[1G\u001b[1myarn run v1.22.19\u001b[22m\n\u001b[2K\u001b[1G\u001b[2m$ tsc\u001b[22m\n\u001b[2K\u001b[1GDone in 1.95s.\n\n> nx run @sockethub/client:build  [local cache]\n\n\u001b[2K\u001b[1G\u001b[1myarn run v1.22.19\u001b[22m\n\u001b[2K\u001b[1G\u001b[2m$ yarn compile && rollup -c config/rollup.config.esm.mjs && rollup -c config/rollup.config.umd.mjs\u001b[22m\n\u001b[2K\u001b[1G\u001b[2m$ rimraf build dist && tsc -p config/tsconfig.cjs.json && tsc -p config/tsconfig.esm.json\u001b[22m\n\u001b[36m\n\u001b[1m./build/esm/sockethub-client.js\u001b[22m → \u001b[1m./dist/sockethub-client.esm.min.js\u001b[22m...\u001b[39m\n\u001b[32mcreated \u001b[1m./dist/sockethub-client.esm.min.js\u001b[22m in \u001b[1m812ms\u001b[22m\u001b[39m\n\u001b[36m\n\u001b[1m./build/esm/sockethub-client.js\u001b[22m → \u001b[1m./dist/sockethub-client.js, ./dist/sockethub-client.min.js\u001b[22m...\u001b[39m\n\u001b[32mcreated \u001b[1m./dist/sockethub-client.js, ./dist/sockethub-client.min.js\u001b[22m in \u001b[1m1.7s\u001b[22m\u001b[39m\n\u001b[2K\u001b[1GDone in 8.53s.\n\n> nx run @sockethub/server:build  [local cache]\n\n\u001b[2K\u001b[1G\u001b[1myarn run v1.22.19\u001b[22m\n\u001b[2K\u001b[1G\u001b[2m$ npx rimraf dist && tsc && cp ./src/defaults.json ./dist/defaults.json && cp src/bootstrap/platforms.js dist/bootstrap/\u001b[22m\n\u001b[2K\u001b[1GDone in 2.81s.\n\n> nx run @sockethub/platform-feeds:build  [local cache]\n\n\u001b[2K\u001b[1G\u001b[1myarn run v1.22.19\u001b[22m\n\u001b[2K\u001b[1G\u001b[2m$ yarn run doc\u001b[22m\n\u001b[2K\u001b[1G\u001b[2m$ jsdoc2md --no-gfm --heading-depth 1 index.js  > API.md\u001b[22m\n\u001b[2K\u001b[1GDone in 1.10s.\n\n> nx run @sockethub/platform-xmpp:build  [local cache]\n\n\u001b[2K\u001b[1G\u001b[1myarn run v1.22.19\u001b[22m\n\u001b[2K\u001b[1G\u001b[2m$ yarn run doc\u001b[22m\n\u001b[2K\u001b[1G\u001b[2m$ jsdoc2md --no-gfm --heading-depth 1 src/index.js > API.md\u001b[22m\n\u001b[2K\u001b[1GDone in 0.94s.\n\n> nx run @sockethub/platform-irc:build  [local cache]\n\n\u001b[2K\u001b[1G\u001b[1myarn run v1.22.19\u001b[22m\n\u001b[2K\u001b[1G\u001b[2m$ true\u001b[22m\n\u001b[2K\u001b[1GDone in 0.08s.\n\n> nx run sockethub:build  [local cache]\n\n\u001b[2K\u001b[1G\u001b[1myarn run v1.22.19\u001b[22m\n\u001b[2K\u001b[1G\u001b[2m$ node build.js && test -f sockethub.config.json\u001b[22m\n\u001b[2K\u001b[1GDone in 0.12s.\n\n \n\n >  NX   Successfully ran target build for 10 projects\n\n   Nx read the output from the cache instead of running the command for 10 out of 10 tasks.\n\n   View logs and run details at https://cloud.nx.app/runs/olkA4XWi8D\n\nDone in 0.88s.\nRemoving intermediate container da0e38659a50\n ---> 8c91701c6342\nStep 13/14 : EXPOSE 10550\n ---> Running in d153fd2c9654\nRemoving intermediate container d153fd2c9654\n ---> b3f97e6faa57\nStep 14/14 : CMD DEBUG=sockethub*,*redis* /app/packages/sockethub/bin/sockethub --examples --host 0.0.0.0 -c /app/test/sockethub.config.docker.json\n ---> Running in c95a68ddf925\nRemoving intermediate container c95a68ddf925\n ---> b4afc27644b9\nSuccessfully built b4afc27644b9\nSuccessfully tagged sockethub:latest\n","stderr":"","imageSize":2534264222},"endTime":1672381229008}