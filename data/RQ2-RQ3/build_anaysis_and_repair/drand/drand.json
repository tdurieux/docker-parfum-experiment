{"repository":"https://github.com/drand/drand","dockerfilePath":"Dockerfile","startTime":1672962259939,"endTime":1672962479452,"clone":{"startTime":1672962259940,"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/drand/drand'...\n","error":null,"endTime":1672962261012,"commit":"fccedc4495b3f9faf56b31592a965456d26aea9f"},"originalBuild":{"startTime":1672962261078,"endTime":1672962406654,"error":null,"stdout":"Sending build context to Docker daemon  2.366MB\r\r\nStep 1/35 : FROM golang:1.19.2-buster AS builder\n1.19.2-buster: Pulling from library/golang\nfd31ec14dccd: Pulling fs layer\n1b6422bfa326: Pulling fs layer\n335cbfc794fe: Pulling fs layer\n2a348ba61fbe: Pulling fs layer\nb5858f738f60: Pulling fs layer\nb11426a1a5bc: Pulling fs layer\n967dda61ce15: Pulling fs layer\nb11426a1a5bc: Waiting\nb5858f738f60: Waiting\n2a348ba61fbe: Waiting\n1b6422bfa326: Verifying Checksum\n1b6422bfa326: Download complete\n335cbfc794fe: Download complete\nfd31ec14dccd: Verifying Checksum\nfd31ec14dccd: Download complete\n2a348ba61fbe: Verifying Checksum\n2a348ba61fbe: Download complete\n967dda61ce15: Download complete\nb5858f738f60: Verifying Checksum\nb5858f738f60: Download complete\nfd31ec14dccd: Pull complete\nb11426a1a5bc: Download complete\n1b6422bfa326: Pull complete\n335cbfc794fe: Pull complete\n2a348ba61fbe: Pull complete\nb5858f738f60: Pull complete\nb11426a1a5bc: Pull complete\n967dda61ce15: Pull complete\nDigest: sha256:b4480899915b13370161a7e574174212b21baccade35b4df86358d76f83da7f9\nStatus: Downloaded newer image for golang:1.19.2-buster\n ---> 042f6eeaba56\nStep 2/35 : MAINTAINER Hector Sanjuan <hector@protocol.ai>\n ---> Running in 5d2a0bbb082b\nRemoving intermediate container 5d2a0bbb082b\n ---> acee6ca0436c\nStep 3/35 : ARG major=0\n ---> Running in b12f2614c154\nRemoving intermediate container b12f2614c154\n ---> c9f29b1ffac9\nStep 4/35 : ARG minor=0\n ---> Running in 4bb7387c6b68\nRemoving intermediate container 4bb7387c6b68\n ---> f4588dc9029a\nStep 5/35 : ARG patch=0\n ---> Running in a5cc7aa3713a\nRemoving intermediate container a5cc7aa3713a\n ---> 767455381e5e\nStep 6/35 : ARG gitCommit\n ---> Running in f10005aae474\nRemoving intermediate container f10005aae474\n ---> e48f0ef5a7cd\nStep 7/35 : ENV GOPATH /go\n ---> Running in c564a55b6fd4\nRemoving intermediate container c564a55b6fd4\n ---> 10199358ad1e\nStep 8/35 : ENV SRC_PATH $GOPATH/src/github.com/drand/drand/\n ---> Running in b32877dbf1ab\nRemoving intermediate container b32877dbf1ab\n ---> 1f73697fd9c1\nStep 9/35 : ENV GOPROXY https://proxy.golang.org\n ---> Running in 51530948ada1\nRemoving intermediate container 51530948ada1\n ---> b86be7d2c8fd\nStep 10/35 : ENV SUEXEC_VERSION v0.2\n ---> Running in 5711a3f17bd2\nRemoving intermediate container 5711a3f17bd2\n ---> 8ca4adef8f50\nStep 11/35 : ENV TINI_VERSION v0.19.0\n ---> Running in c8bebd13a7a0\nRemoving intermediate container c8bebd13a7a0\n ---> 5f1d658fa0b1\nStep 12/35 : RUN set -x   && cd /tmp   && git clone https://github.com/ncopa/su-exec.git   && cd su-exec   && git checkout -q $SUEXEC_VERSION   && make   && cd /tmp   && wget -q -O tini https://github.com/krallin/tini/releases/download/$TINI_VERSION/tini   && chmod +x tini\n ---> Running in e4e52619ee29\n\u001b[91m+ cd /tmp\n+ git clone https://github.com/ncopa/su-exec.git\n\u001b[0m\u001b[91mCloning into 'su-exec'...\n\u001b[0m\u001b[91m+ cd su-exec\n+ git checkout -q v0.2\n\u001b[0m\u001b[91m+ make\n\u001b[0mcc -Wall -Werror -g -o su-exec su-exec.c \n\u001b[91m+ cd /tmp\n+ wget -q\u001b[0m\u001b[91m -O tini https://github.com/krallin/tini/releases/download/v0.19.0/tini\n\u001b[0m\u001b[91m+ chmod +x tini\n\u001b[0mRemoving intermediate container e4e52619ee29\n ---> 425fa530c65b\nStep 13/35 : RUN apt-get update && apt-get install -y ca-certificates\n ---> Running in 23c261001c40\nGet:1 http://deb.debian.org/debian buster InRelease [122 kB]\nGet:2 http://deb.debian.org/debian-security buster/updates InRelease [34.8 kB]\nGet:3 http://deb.debian.org/debian buster-updates InRelease [56.6 kB]\nGet:4 http://deb.debian.org/debian buster/main amd64 Packages [7909 kB]\nGet:5 http://deb.debian.org/debian-security buster/updates/main amd64 Packages [422 kB]\nGet:6 http://deb.debian.org/debian buster-updates/main amd64 Packages [8788 B]\nFetched 8553 kB in 1s (6240 kB/s)\nReading package lists...\nReading package lists...\nBuilding dependency tree...\nReading state information...\nca-certificates is already the newest version (20200601~deb10u2).\n0 upgraded, 0 newly installed, 0 to remove and 15 not upgraded.\nRemoving intermediate container 23c261001c40\n ---> aa3245b0daae\nStep 14/35 : COPY go.* $SRC_PATH\n ---> 48763564714e\nStep 15/35 : WORKDIR $SRC_PATH\n ---> Running in 7d18b66da59c\nRemoving intermediate container 7d18b66da59c\n ---> 71f798bf05b3\nStep 16/35 : RUN go mod download\n ---> Running in 66c015328562\nRemoving intermediate container 66c015328562\n ---> 13919329e83d\nStep 17/35 : COPY . $SRC_PATH\n ---> 54e3cc52761a\nStep 18/35 : RUN   go install   -mod=readonly   -ldflags   \"-X github.com/drand/drand/common.COMMIT=${gitCommit}   -X github.com/drand/drand/common.BUILDDATE=`date -u +%d/%m/%Y@%H:%M:%S`   -X github.com/drand/drand/cmd/drand-cli.buildDate=`date -u +%d/%m/%Y@%H:%M:%S`   -X github.com/drand/drand/cmd/drand-cli.gitCommit=${gitCommit}\"\n ---> Running in 67587449df74\nRemoving intermediate container 67587449df74\n ---> dc6f8819bd35\nStep 19/35 : FROM busybox:1-glibc\n1-glibc: Pulling from library/busybox\n205dae5015e7: Pulling fs layer\n205dae5015e7: Verifying Checksum\n205dae5015e7: Download complete\n205dae5015e7: Pull complete\nDigest: sha256:f2c7344e7c13f559171a602a16a49769cf524513d30379651afb5f0637cf6c27\nStatus: Downloaded newer image for busybox:1-glibc\n ---> 66ba00ad3de8\nStep 20/35 : MAINTAINER Hector Sanjuan <hector@protocol.ai>\n ---> Running in 068ca7f06b40\nRemoving intermediate container 068ca7f06b40\n ---> 87b922058084\nStep 21/35 : ENV GOPATH                 /go\n ---> Running in d5d1d7a49600\nRemoving intermediate container d5d1d7a49600\n ---> 7a944947b94e\nStep 22/35 : ENV SRC_PATH               /go/src/github.com/drand/drand\n ---> Running in 2617d9b9e90e\nRemoving intermediate container 2617d9b9e90e\n ---> 02ba66b601a7\nStep 23/35 : ENV DRAND_HOME             /data/drand\n ---> Running in 3d3921400f41\nRemoving intermediate container 3d3921400f41\n ---> 0073b3688b56\nStep 24/35 : ENV DRAND_PUBLIC_ADDRESS   \"\"\n ---> Running in 03962c139da4\nRemoving intermediate container 03962c139da4\n ---> 64b853569667\nStep 25/35 : EXPOSE 8888\n ---> Running in 17d070d2b9cb\nRemoving intermediate container 17d070d2b9cb\n ---> b507c9334b69\nStep 26/35 : EXPOSE 4444\n ---> Running in 6a2a41a84c21\nRemoving intermediate container 6a2a41a84c21\n ---> cb609cd543e8\nStep 27/35 : COPY --from=builder $GOPATH/bin/drand /usr/local/bin/drand\n ---> 6df2ab951cb0\nStep 28/35 : COPY --from=builder $SRC_PATH/docker/entrypoint.sh /usr/local/bin/entrypoint.sh\n ---> c015ef4de893\nStep 29/35 : COPY --from=builder /tmp/su-exec/su-exec /sbin/su-exec\n ---> 179751fb2a1b\nStep 30/35 : COPY --from=builder /tmp/tini /sbin/tini\n ---> 8fbd5cf9aa15\nStep 31/35 : COPY --from=builder /etc/ssl/certs /etc/ssl/certs\n ---> fc3dabd06ccc\nStep 32/35 : RUN mkdir -p $DRAND_HOME &&   addgroup -g 994 drand &&   adduser -D -h $DRAND_HOME -u 996 -G drand drand &&   chown drand:drand $DRAND_HOME\n ---> Running in 6d61115b669e\nRemoving intermediate container 6d61115b669e\n ---> 75c31109d9f0\nStep 33/35 : VOLUME $DRAND_HOME\n ---> Running in c3286861488e\nRemoving intermediate container c3286861488e\n ---> f7b5c22bd60b\nStep 34/35 : ENTRYPOINT [\"/sbin/tini\", \"--\", \"/usr/local/bin/entrypoint.sh\"]\n ---> Running in 2d6537f93808\nRemoving intermediate container 2d6537f93808\n ---> 04f65550cd34\nStep 35/35 : CMD [\"start\", \"--tls-disable\", \"--control 8888\", \"--private-listen 0.0.0.0:4444\"]\n ---> Running in 56df1c997719\nRemoving intermediate container 56df1c997719\n ---> 70b8e5a47d23\nSuccessfully built 70b8e5a47d23\nSuccessfully tagged drand:latest\n","stderr":"","imageSize":29205737},"repair":{"startTime":1672962406725,"endTime":1672962406897,"violations":[{"name":"aptGetInstallUseNoRec","position":{"start":25,"end":25,"columnStart":22,"columnEnd":56}},{"name":"ruleAptGetInstallThenRemoveAptLists","position":{"start":25,"end":25,"columnStart":22,"columnEnd":56}}],"repairedDockerfile":"FROM golang:1.19.2-buster AS builder\nMAINTAINER Hector Sanjuan <hector@protocol.ai>\n\nARG major=0\nARG minor=0\nARG patch=0\nARG gitCommit\n\nENV GOPATH /go\nENV SRC_PATH $GOPATH/src/github.com/drand/drand/\nENV GOPROXY https://proxy.golang.org\n\nENV SUEXEC_VERSION v0.2\nENV TINI_VERSION v0.19.0\nRUN set -x \\\n  && cd /tmp \\\n  && git clone https://github.com/ncopa/su-exec.git \\\n  && cd su-exec \\\n  && git checkout -q $SUEXEC_VERSION \\\n  && make \\\n  && cd /tmp \\\n  && wget -q -O tini https://github.com/krallin/tini/releases/download/$TINI_VERSION/tini \\\n  && chmod +x tini\n\n# Get the TLS CA certificates, they're not provided by busybox.\nRUN apt-get update && apt-get install --no-install-recommends -y ca-certificates && rm -rf /var/lib/apt/lists/*;\n\nCOPY go.* $SRC_PATH\nWORKDIR $SRC_PATH\nRUN go mod download\n\nCOPY . $SRC_PATH\nRUN \\\n  go install \\\n  -mod=readonly \\\n  -ldflags \\\n  \"-X github.com/drand/drand/common.COMMIT=${gitCommit} \\\n  -X github.com/drand/drand/common.BUILDDATE=`date -u +%d/%m/%Y@%H:%M:%S` \\\n  -X github.com/drand/drand/cmd/drand-cli.buildDate=`date -u +%d/%m/%Y@%H:%M:%S` \\\n  -X github.com/drand/drand/cmd/drand-cli.gitCommit=${gitCommit}\"\n\nFROM busybox:1-glibc\nMAINTAINER Hector Sanjuan <hector@protocol.ai>\n\nENV GOPATH                 /go\nENV SRC_PATH               /go/src/github.com/drand/drand\nENV DRAND_HOME             /data/drand\nENV DRAND_PUBLIC_ADDRESS   \"\"\n\nEXPOSE 8888\nEXPOSE 4444\n\nCOPY --from=builder $GOPATH/bin/drand /usr/local/bin/drand\nCOPY --from=builder $SRC_PATH/docker/entrypoint.sh /usr/local/bin/entrypoint.sh\nCOPY --from=builder /tmp/su-exec/su-exec /sbin/su-exec\nCOPY --from=builder /tmp/tini /sbin/tini\nCOPY --from=builder /etc/ssl/certs /etc/ssl/certs\n\nRUN mkdir -p $DRAND_HOME && \\\n  addgroup -g 994 drand && \\\n  adduser -D -h $DRAND_HOME -u 996 -G drand drand && \\\n  chown drand:drand $DRAND_HOME\n\nVOLUME $DRAND_HOME\nENTRYPOINT [\"/sbin/tini\", \"--\", \"/usr/local/bin/entrypoint.sh\"]\n\n# Defaults for drand go here\nCMD [\"start\", \"--tls-disable\", \"--control 8888\", \"--private-listen 0.0.0.0:4444\"]\n"},"repairedBuild":{"startTime":1672962407070,"endTime":1672962479210,"error":null,"stdout":"Sending build context to Docker daemon  2.366MB\r\r\nStep 1/35 : FROM golang:1.19.2-buster AS builder\n ---> 042f6eeaba56\nStep 2/35 : MAINTAINER Hector Sanjuan <hector@protocol.ai>\n ---> Running in 73f7ced077cd\nRemoving intermediate container 73f7ced077cd\n ---> e3d788871855\nStep 3/35 : ARG major=0\n ---> Running in 40ddf22baea1\nRemoving intermediate container 40ddf22baea1\n ---> c873cfb50355\nStep 4/35 : ARG minor=0\n ---> Running in aec3c3a99e8f\nRemoving intermediate container aec3c3a99e8f\n ---> e3cb2d59ffe8\nStep 5/35 : ARG patch=0\n ---> Running in a05aff039f1f\nRemoving intermediate container a05aff039f1f\n ---> 30fde71cd7f0\nStep 6/35 : ARG gitCommit\n ---> Running in b7b644e45e3e\nRemoving intermediate container b7b644e45e3e\n ---> 15f5492f5208\nStep 7/35 : ENV GOPATH /go\n ---> Running in ba9643836930\nRemoving intermediate container ba9643836930\n ---> 760de8b75791\nStep 8/35 : ENV SRC_PATH $GOPATH/src/github.com/drand/drand/\n ---> Running in 8a8ef9edf568\nRemoving intermediate container 8a8ef9edf568\n ---> 0205087830c1\nStep 9/35 : ENV GOPROXY https://proxy.golang.org\n ---> Running in 1a84a5b321c4\nRemoving intermediate container 1a84a5b321c4\n ---> a4bb25e66f84\nStep 10/35 : ENV SUEXEC_VERSION v0.2\n ---> Running in 4d1f180410ee\nRemoving intermediate container 4d1f180410ee\n ---> f468b5bb94dd\nStep 11/35 : ENV TINI_VERSION v0.19.0\n ---> Running in 7c7234e9a45c\nRemoving intermediate container 7c7234e9a45c\n ---> 77b22bcc8f2c\nStep 12/35 : RUN set -x   && cd /tmp   && git clone https://github.com/ncopa/su-exec.git   && cd su-exec   && git checkout -q $SUEXEC_VERSION   && make   && cd /tmp   && wget -q -O tini https://github.com/krallin/tini/releases/download/$TINI_VERSION/tini   && chmod +x tini\n ---> Running in f62874936cf7\n\u001b[91m+ cd /tmp\n\u001b[0m\u001b[91m+ git clone https://github.com/ncopa/su-exec.git\n\u001b[0m\u001b[91mCloning into 'su-exec'...\n\u001b[0m\u001b[91m+ cd su-exec\n+ git checkout -q v0.2\n\u001b[0m\u001b[91m+ make\n\u001b[0mcc -Wall -Werror -g -o su-exec su-exec.c \n\u001b[91m+ cd /tmp\n+ \u001b[0m\u001b[91mwget -q -O tini https://github.com/krallin/tini/releases/download/v0.19.0/tini\n\u001b[0m\u001b[91m+ chmod +x tini\n\u001b[0mRemoving intermediate container f62874936cf7\n ---> 2dbafbbd0e4c\nStep 13/35 : RUN apt-get update && apt-get install --no-install-recommends -y ca-certificates && rm -rf /var/lib/apt/lists/*;\n ---> Running in 7c5fec00efe6\nGet:1 http://deb.debian.org/debian buster InRelease [122 kB]\nGet:2 http://deb.debian.org/debian-security buster/updates InRelease [34.8 kB]\nGet:3 http://deb.debian.org/debian buster-updates InRelease [56.6 kB]\nGet:4 http://deb.debian.org/debian buster/main amd64 Packages [7909 kB]\nGet:5 http://deb.debian.org/debian-security buster/updates/main amd64 Packages [422 kB]\nGet:6 http://deb.debian.org/debian buster-updates/main amd64 Packages [8788 B]\nFetched 8553 kB in 1s (6077 kB/s)\nReading package lists...\nReading package lists...\nBuilding dependency tree...\nReading state information...\nca-certificates is already the newest version (20200601~deb10u2).\n0 upgraded, 0 newly installed, 0 to remove and 15 not upgraded.\nRemoving intermediate container 7c5fec00efe6\n ---> 692d381bd0f8\nStep 14/35 : COPY go.* $SRC_PATH\n ---> e25b1d336fba\nStep 15/35 : WORKDIR $SRC_PATH\n ---> Running in 44f10813c099\nRemoving intermediate container 44f10813c099\n ---> ee3593490021\nStep 16/35 : RUN go mod download\n ---> Running in e54647fd0bd3\nRemoving intermediate container e54647fd0bd3\n ---> 8b803f2efbcc\nStep 17/35 : COPY . $SRC_PATH\n ---> 0c4f63f7d15e\nStep 18/35 : RUN   go install   -mod=readonly   -ldflags   \"-X github.com/drand/drand/common.COMMIT=${gitCommit}   -X github.com/drand/drand/common.BUILDDATE=`date -u +%d/%m/%Y@%H:%M:%S`   -X github.com/drand/drand/cmd/drand-cli.buildDate=`date -u +%d/%m/%Y@%H:%M:%S`   -X github.com/drand/drand/cmd/drand-cli.gitCommit=${gitCommit}\"\n ---> Running in 1f735cf8e116\nRemoving intermediate container 1f735cf8e116\n ---> 8d64113720a8\nStep 19/35 : FROM busybox:1-glibc\n ---> 66ba00ad3de8\nStep 20/35 : MAINTAINER Hector Sanjuan <hector@protocol.ai>\n ---> Running in 7f35742f6f36\nRemoving intermediate container 7f35742f6f36\n ---> 0152bd332347\nStep 21/35 : ENV GOPATH                 /go\n ---> Running in 3150ae06fa43\nRemoving intermediate container 3150ae06fa43\n ---> b38e2822fada\nStep 22/35 : ENV SRC_PATH               /go/src/github.com/drand/drand\n ---> Running in a7b6266db0e0\nRemoving intermediate container a7b6266db0e0\n ---> 30bee193cf97\nStep 23/35 : ENV DRAND_HOME             /data/drand\n ---> Running in 35da885640f6\nRemoving intermediate container 35da885640f6\n ---> 0f48151b7bd2\nStep 24/35 : ENV DRAND_PUBLIC_ADDRESS   \"\"\n ---> Running in c9b6b83752f2\nRemoving intermediate container c9b6b83752f2\n ---> a66ec56c861a\nStep 25/35 : EXPOSE 8888\n ---> Running in e90dc0b36ad8\nRemoving intermediate container e90dc0b36ad8\n ---> 5dde87ff5efd\nStep 26/35 : EXPOSE 4444\n ---> Running in 041bb45103b7\nRemoving intermediate container 041bb45103b7\n ---> 174de6c4ecee\nStep 27/35 : COPY --from=builder $GOPATH/bin/drand /usr/local/bin/drand\n ---> 9adc4db53733\nStep 28/35 : COPY --from=builder $SRC_PATH/docker/entrypoint.sh /usr/local/bin/entrypoint.sh\n ---> bf1ecb68f9fe\nStep 29/35 : COPY --from=builder /tmp/su-exec/su-exec /sbin/su-exec\n ---> c9a971629510\nStep 30/35 : COPY --from=builder /tmp/tini /sbin/tini\n ---> 120735decf0d\nStep 31/35 : COPY --from=builder /etc/ssl/certs /etc/ssl/certs\n ---> 607bb4b3d519\nStep 32/35 : RUN mkdir -p $DRAND_HOME &&   addgroup -g 994 drand &&   adduser -D -h $DRAND_HOME -u 996 -G drand drand &&   chown drand:drand $DRAND_HOME\n ---> Running in c70868599796\nRemoving intermediate container c70868599796\n ---> 86463caf90ca\nStep 33/35 : VOLUME $DRAND_HOME\n ---> Running in 510740894e68\nRemoving intermediate container 510740894e68\n ---> 29832e73c64c\nStep 34/35 : ENTRYPOINT [\"/sbin/tini\", \"--\", \"/usr/local/bin/entrypoint.sh\"]\n ---> Running in b3ad302e840e\nRemoving intermediate container b3ad302e840e\n ---> 875b740897e2\nStep 35/35 : CMD [\"start\", \"--tls-disable\", \"--control 8888\", \"--private-listen 0.0.0.0:4444\"]\n ---> Running in 95918644d842\nRemoving intermediate container 95918644d842\n ---> b3032979c6b7\nSuccessfully built b3032979c6b7\nSuccessfully tagged drand:latest\n","stderr":"","imageSize":29205737}}