{"repository":"https://github.com/vincent/kisslists","dockerfilePath":"Dockerfile","startTime":1672229537121,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/vincent/kisslists'...\n","error":null,"commit":"6545b3fa87bf84d68b6518900477022614c072ac"},"originalBuild":{"startTimestamp":1672229537952,"endTimestamp":1672229618338,"error":null,"stdout":"Sending build context to Docker daemon  198.1kB\r\r\nStep 1/10 : FROM golang:alpine AS build\nalpine: Pulling from library/golang\nc158987b0551: Already exists\n019cfb932eb0: Pulling fs layer\na3a161a37303: Pulling fs layer\n3c6f08178a17: Pulling fs layer\n3c6f08178a17: Download complete\n019cfb932eb0: Download complete\n019cfb932eb0: Pull complete\na3a161a37303: Verifying Checksum\na3a161a37303: Download complete\na3a161a37303: Pull complete\n3c6f08178a17: Pull complete\nDigest: sha256:a9b24b67dc83b3383d22a14941c2b2b2ca6a103d805cac6820fd1355943beaf1\nStatus: Downloaded newer image for golang:alpine\n ---> cae57157ceaa\nStep 2/10 : LABEL maintainer=\"Vincent Lark <vincent.lark@gmail.com>\"\n ---> Running in b3b85c18d696\nRemoving intermediate container b3b85c18d696\n ---> 3d9a6e6db4d8\nStep 3/10 : RUN apk add build-base\n ---> Running in ab94fbbeafeb\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/20) Installing libgcc (12.2.1_git20220924-r4)\n(2/20) Installing libstdc++ (12.2.1_git20220924-r4)\n(3/20) Installing binutils (2.39-r2)\n(4/20) Installing libmagic (5.43-r0)\n(5/20) Installing file (5.43-r0)\n(6/20) Installing libgomp (12.2.1_git20220924-r4)\n(7/20) Installing libatomic (12.2.1_git20220924-r4)\n(8/20) Installing gmp (6.2.1-r2)\n(9/20) Installing isl25 (0.25-r0)\n(10/20) Installing mpfr4 (4.1.0-r0)\n(11/20) Installing mpc1 (1.2.1-r1)\n(12/20) Installing gcc (12.2.1_git20220924-r4)\n(13/20) Installing libstdc++-dev (12.2.1_git20220924-r4)\n(14/20) Installing musl-dev (1.2.3-r4)\n(15/20) Installing libc-dev (0.7.2-r3)\n(16/20) Installing g++ (12.2.1_git20220924-r4)\n(17/20) Installing make (4.3-r1)\n(18/20) Installing fortify-headers (1.1-r1)\n(19/20) Installing patch (2.7.6-r8)\n(20/20) Installing build-base (0.5-r3)\nExecuting busybox-1.35.0-r29.trigger\nOK: 245 MiB in 36 packages\nRemoving intermediate container ab94fbbeafeb\n ---> 53793e12e525\nStep 4/10 : ADD . /go/src/github.com/vincent/kisslists\n ---> ca4d9feff81f\nStep 5/10 : WORKDIR /go/src/github.com/vincent/kisslists\n ---> Running in ab427e474685\nRemoving intermediate container ab427e474685\n ---> 6c71201fb8bf\nStep 6/10 : RUN make full\n ---> Running in e1f209e9b54c\n\u001b[91mgo: downloading github.com/mattn/go-sqlite3 v2.0.1+incompatible\ngo: downloading github.com/gorilla/websocket v1.4.2\n\u001b[0m\u001b[91mgo: warning: github.com/mattn/go-sqlite3@v2.0.1+incompatible: retracted by module author: Accidental; no major changes or features.\ngo: to switch to the latest unretracted version, run:\n\tgo get github.com/mattn/go-sqlite3@latest\n\u001b[0m\u001b[91mgo: downloading github.com/matryer/is v1.4.0\n\u001b[0m[OK] Installed dependencies\n[OK] Files added to embed box\nCGO_ENABLED=1 go build -a -ldflags '-linkmode external -extldflags \"-static\"' -o ./dist/kisslists main.go\n\u001b[91m# github.com/mattn/go-sqlite3\nsqlite3-binding.c: In function 'sqlite3SelectNew':\nsqlite3-binding.c:125801:10: warning: function may return address of local variable [-Wreturn-local-addr]\n125801 |   return pNew;\n       |          ^~~~\nsqlite3-binding.c:125761:10: note: declared here\n125761 |   Select standin;\n       |          ^~~~~~~\n\u001b[0m[OK] App binary was created\nRemoving intermediate container e1f209e9b54c\n ---> 65dfd12acf8b\nStep 7/10 : FROM alpine:latest\nlatest: Pulling from library/alpine\nc158987b0551: Already exists\nDigest: sha256:8914eb54f968791faf6a8638949e480fef81e697984fba772b3976835194c6d4\nStatus: Downloaded newer image for alpine:latest\n ---> 49176f190c7e\nStep 8/10 : WORKDIR /root/\n ---> Running in 1218bc2ecee0\nRemoving intermediate container 1218bc2ecee0\n ---> 00e47f06bc86\nStep 9/10 : COPY --from=build /go/src/github.com/vincent/kisslists/dist/kisslists .\n ---> 132f52bd5a89\nStep 10/10 : ENTRYPOINT /root/kisslists -database /kisslists/kisslists.sqlite\n ---> Running in 9ac84a4694f4\nRemoving intermediate container 9ac84a4694f4\n ---> 39a2d260aa1f\nSuccessfully built 39a2d260aa1f\nSuccessfully tagged kisslists:latest\n","stderr":"","imageSize":19655384},"repair":{"violations":[{"name":"apkAddUseNoCache","position":{"start":6,"end":6,"columnStart":4,"columnEnd":22}}],"repairedDockerfile":"# Use golang:alpine using the given platform from buildx\nFROM golang:alpine AS build\n\nLABEL maintainer=\"Vincent Lark <vincent.lark@gmail.com>\"\n\n# We'll need make, gcc and friends\nRUN apk add --no-cache build-base\n\n# Use the whole project directory\nADD . /go/src/github.com/vincent/kisslists\nWORKDIR /go/src/github.com/vincent/kisslists\n\n# Compile binary\nRUN make full\n\nFROM alpine:latest\n\n# Copy only the binary on the final layer\nWORKDIR /root/\nCOPY --from=build /go/src/github.com/vincent/kisslists/dist/kisslists .\n\n# Use the binary as entrypoint\nENTRYPOINT /root/kisslists -database /kisslists/kisslists.sqlite\n"},"repairedBuild":{"startTimestamp":1672229618592,"endTimestamp":1672229678214,"error":null,"stdout":"Sending build context to Docker daemon  198.1kB\r\r\nStep 1/10 : FROM golang:alpine AS build\n ---> cae57157ceaa\nStep 2/10 : LABEL maintainer=\"Vincent Lark <vincent.lark@gmail.com>\"\n ---> Running in a6b93d22904c\nRemoving intermediate container a6b93d22904c\n ---> 6ac5a8ce10e8\nStep 3/10 : RUN apk add --no-cache build-base\n ---> Running in f98ad5a29516\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/20) Installing libgcc (12.2.1_git20220924-r4)\n(2/20) Installing libstdc++ (12.2.1_git20220924-r4)\n(3/20) Installing binutils (2.39-r2)\n(4/20) Installing libmagic (5.43-r0)\n(5/20) Installing file (5.43-r0)\n(6/20) Installing libgomp (12.2.1_git20220924-r4)\n(7/20) Installing libatomic (12.2.1_git20220924-r4)\n(8/20) Installing gmp (6.2.1-r2)\n(9/20) Installing isl25 (0.25-r0)\n(10/20) Installing mpfr4 (4.1.0-r0)\n(11/20) Installing mpc1 (1.2.1-r1)\n(12/20) Installing gcc (12.2.1_git20220924-r4)\n(13/20) Installing libstdc++-dev (12.2.1_git20220924-r4)\n(14/20) Installing musl-dev (1.2.3-r4)\n(15/20) Installing libc-dev (0.7.2-r3)\n(16/20) Installing g++ (12.2.1_git20220924-r4)\n(17/20) Installing make (4.3-r1)\n(18/20) Installing fortify-headers (1.1-r1)\n(19/20) Installing patch (2.7.6-r8)\n(20/20) Installing build-base (0.5-r3)\nExecuting busybox-1.35.0-r29.trigger\nOK: 245 MiB in 36 packages\nRemoving intermediate container f98ad5a29516\n ---> def69a95139a\nStep 4/10 : ADD . /go/src/github.com/vincent/kisslists\n ---> d7a1a2f13c78\nStep 5/10 : WORKDIR /go/src/github.com/vincent/kisslists\n ---> Running in d1e47f1ab186\nRemoving intermediate container d1e47f1ab186\n ---> 31b133fc28ba\nStep 6/10 : RUN make full\n ---> Running in 5e8f0211ccee\n\u001b[91mgo: downloading github.com/mattn/go-sqlite3 v2.0.1+incompatible\n\u001b[0m\u001b[91mgo: downloading github.com/gorilla/websocket v1.4.2\n\u001b[0m\u001b[91mgo: warning: github.com/mattn/go-sqlite3@v2.0.1+incompatible: retracted by module author: Accidental; no major changes or features.\ngo: to switch to the latest unretracted version, run:\n\tgo get github.com/mattn/go-sqlite3@latest\n\u001b[0m\u001b[91mgo: downloading github.com/matryer/is v1.4.0\n\u001b[0m[OK] Installed dependencies\n[OK] Files added to embed box\nCGO_ENABLED=1 go build -a -ldflags '-linkmode external -extldflags \"-static\"' -o ./dist/kisslists main.go\n\u001b[91m# github.com/mattn/go-sqlite3\nsqlite3-binding.c: In function 'sqlite3SelectNew':\nsqlite3-binding.c:125801:10: warning: function may return address of local variable [-Wreturn-local-addr]\n125801 |   return pNew;\n       |          ^~~~\nsqlite3-binding.c:125761:10: note: declared here\n125761 |   Select standin;\n       |          ^~~~~~~\n\u001b[0m[OK] App binary was created\nRemoving intermediate container 5e8f0211ccee\n ---> ac544ccb06af\nStep 7/10 : FROM alpine:latest\n ---> 49176f190c7e\nStep 8/10 : WORKDIR /root/\n ---> Running in 2b2670755195\nRemoving intermediate container 2b2670755195\n ---> f51aed714b0b\nStep 9/10 : COPY --from=build /go/src/github.com/vincent/kisslists/dist/kisslists .\n ---> ebd0ef996297\nStep 10/10 : ENTRYPOINT /root/kisslists -database /kisslists/kisslists.sqlite\n ---> Running in c69745277c78\nRemoving intermediate container c69745277c78\n ---> 462bffcd06fe\nSuccessfully built 462bffcd06fe\nSuccessfully tagged kisslists:latest\n","stderr":"","imageSize":19655384},"endTime":1672229678460}