{"repository":"https://github.com/splunk/splunk-operator","dockerfilePath":"Dockerfile","startTime":1672041478586,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/splunk/splunk-operator'...\n","error":null,"commit":"3f6372405830a101ccfd833c9daeb6d600e691ea"},"originalBuild":{"startTimestamp":1672041479754,"endTimestamp":1672041603967,"error":null,"stdout":"Sending build context to Docker daemon  13.69MB\r\r\nStep 1/32 : FROM golang:1.19 as builder\n1.19: Pulling from library/golang\n32de3c850997: Already exists\nfa1d4c8d85a4: Already exists\nc796299bbbdd: Already exists\n81283a9569ad: Already exists\nc768848b86a2: Already exists\n3a3324c1d283: Pulling fs layer\nea43a17566db: Pulling fs layer\nea43a17566db: Verifying Checksum\nea43a17566db: Download complete\n3a3324c1d283: Download complete\n3a3324c1d283: Pull complete\nea43a17566db: Pull complete\nDigest: sha256:660f138b4477001d65324a51fa158c1b868651b44e43f0953bf062e9f38b72f3\nStatus: Downloaded newer image for golang:1.19\n ---> 6650307efe4a\nStep 2/32 : WORKDIR /workspace\n ---> Running in 33f2de613706\nRemoving intermediate container 33f2de613706\n ---> 9b00768bce6a\nStep 3/32 : COPY go.mod go.mod\n ---> 8c1ee48ba39e\nStep 4/32 : COPY go.sum go.sum\n ---> 74facf4b56be\nStep 5/32 : RUN go mod download\n ---> Running in 94c3927efd6d\nRemoving intermediate container 94c3927efd6d\n ---> 442759d5e4de\nStep 6/32 : COPY main.go main.go\n ---> ffe370816c30\nStep 7/32 : COPY api/ api/\n ---> 0a36b122ed75\nStep 8/32 : COPY controllers/ controllers/\n ---> 27460820e3c5\nStep 9/32 : COPY pkg/ pkg/\n ---> 9e4b52e6db4b\nStep 10/32 : COPY tools/ tools/\n ---> d07fe8466d57\nStep 11/32 : COPY hack hack/\n ---> 81d575bb788e\nStep 12/32 : RUN CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -a -o manager main.go\n ---> Running in 3dffc51a48cf\nRemoving intermediate container 3dffc51a48cf\n ---> 4a5ae907276f\nStep 13/32 : FROM registry.access.redhat.com/ubi8/ubi:latest\nlatest: Pulling from ubi8/ubi\n0e0c4af1097a: Pulling fs layer\n0e0c4af1097a: Verifying Checksum\n0e0c4af1097a: Download complete\n0e0c4af1097a: Pull complete\nDigest: sha256:0234b7c6e5696435e8759e914ed19e80e595a89f380e1d0b5d324d71b7041a13\nStatus: Downloaded newer image for registry.access.redhat.com/ubi8/ubi:latest\n ---> b2276c479c60\nStep 14/32 : ENV OPERATOR=/manager     USER_UID=1001     USER_NAME=nonroot\n ---> Running in f6cf2156bd89\nRemoving intermediate container f6cf2156bd89\n ---> ed1e86da17a8\nStep 15/32 : RUN yum -y install shadow-utils\n ---> Running in cb48ec0f1c63\nUpdating Subscription Management repositories.\nUnable to read consumer identity\nSubscription Manager is operating in container mode.\n\nThis system is not registered with an entitlement server. You can use subscription-manager to register.\n\nRed Hat Universal Base Image 8 (RPMs) - BaseOS  6.8 MB/s | 827 kB     00:00    \nRed Hat Universal Base Image 8 (RPMs) - AppStre  25 MB/s | 3.2 MB     00:00    \nRed Hat Universal Base Image 8 (RPMs) - CodeRea  29 kB/s |  29 kB     00:00    \nPackage shadow-utils-2:4.6-17.el8.x86_64 is already installed.\nDependencies resolved.\nNothing to do.\nComplete!\nRemoving intermediate container cb48ec0f1c63\n ---> d62c6e750870\nStep 16/32 : RUN useradd -ms /bin/bash nonroot -u 1001\n ---> Running in 3e5eee09b68e\nRemoving intermediate container 3e5eee09b68e\n ---> bada2a9f2eb7\nStep 17/32 : RUN yum update -y krb5-libs && yum clean all\n ---> Running in 006ec300b77e\nUpdating Subscription Management repositories.\nUnable to read consumer identity\nSubscription Manager is operating in container mode.\n\nThis system is not registered with an entitlement server. You can use subscription-manager to register.\n\nLast metadata expiration check: 0:00:04 ago on Mon Dec 26 07:59:44 2022.\nDependencies resolved.\nNothing to do.\nComplete!\nUpdating Subscription Management repositories.\nUnable to read consumer identity\nSubscription Manager is operating in container mode.\n\nThis system is not registered with an entitlement server. You can use subscription-manager to register.\n\n25 files removed\nRemoving intermediate container 006ec300b77e\n ---> 77050b100cd1\nStep 18/32 : RUN yum -y update-minimal --security --sec-severity=Important --sec-severity=Critical\n ---> Running in 5433c450997f\nUpdating Subscription Management repositories.\nUnable to read consumer identity\nSubscription Manager is operating in container mode.\n\nThis system is not registered with an entitlement server. You can use subscription-manager to register.\n\nRed Hat Universal Base Image 8 (RPMs) - BaseOS   12 MB/s | 827 kB     00:00    \nRed Hat Universal Base Image 8 (RPMs) - AppStre  26 MB/s | 3.2 MB     00:00    \nRed Hat Universal Base Image 8 (RPMs) - CodeRea 483 kB/s |  29 kB     00:00    \n\u001b[91mNo security updates needed, but 1 update available\n\u001b[0mDependencies resolved.\nNothing to do.\nComplete!\nRemoving intermediate container 5433c450997f\n ---> b53ed1b1d7cf\nStep 19/32 : RUN yum -y update-minimal --security --sec-severity=Moderate\n ---> Running in be8971da109e\nUpdating Subscription Management repositories.\nUnable to read consumer identity\nSubscription Manager is operating in container mode.\n\nThis system is not registered with an entitlement server. You can use subscription-manager to register.\n\nLast metadata expiration check: 0:00:02 ago on Mon Dec 26 07:59:52 2022.\n\u001b[91mNo security updates needed, but 1 update available\n\u001b[0mDependencies resolved.\nNothing to do.\nComplete!\nRemoving intermediate container be8971da109e\n ---> 59d83f21d802\nStep 20/32 : RUN yum -y update-minimal --security --sec-severity=Low\n ---> Running in 573d0e3e909c\nUpdating Subscription Management repositories.\nUnable to read consumer identity\nSubscription Manager is operating in container mode.\n\nThis system is not registered with an entitlement server. You can use subscription-manager to register.\n\nLast metadata expiration check: 0:00:05 ago on Mon Dec 26 07:59:52 2022.\n\u001b[91mNo security updates needed, but 1 update available\n\u001b[0mDependencies resolved.\nNothing to do.\nComplete!\nRemoving intermediate container 573d0e3e909c\n ---> 46e98918a25f\nStep 21/32 : LABEL name=\"splunk\"       maintainer=\"support@splunk.com\"       vendor=\"splunk\"       version=\"2.1.0\"       release=\"1\"       summary=\"Simplify the Deployment & Management of Splunk Products on Kubernetes\"       description=\"The Splunk Operator for Kubernetes (SOK) makes it easy for Splunk Administrators to deploy and operate Enterprise deployments in a Kubernetes infrastructure. Packaged as a container, it uses the operator pattern to manage Splunk-specific custom resources, following best practices to manage all the underlying Kubernetes objects for you.\"\n ---> Running in 7d59be767ee1\nRemoving intermediate container 7d59be767ee1\n ---> 155ea5c58bee\nStep 22/32 : WORKDIR /\n ---> Running in 2a04b6298d80\nRemoving intermediate container 2a04b6298d80\n ---> 61105f1f8518\nStep 23/32 : RUN mkdir /licenses\n ---> Running in 7d222650aca0\nRemoving intermediate container 7d222650aca0\n ---> fcd7352c478a\nStep 24/32 : RUN mkdir -p /tools/k8_probes\n ---> Running in b9dd01d76747\nRemoving intermediate container b9dd01d76747\n ---> 8aa8261b239e\nStep 25/32 : COPY --from=builder /workspace/manager .\n ---> ae74f366fbf0\nStep 26/32 : COPY tools/EULA_Red_Hat_Universal_Base_Image_English_20190422.pdf /licenses\n ---> d82e938f9c70\nStep 27/32 : COPY LICENSE /licenses/LICENSE-2.0.txt\n ---> 9981bede5ac8\nStep 28/32 : COPY tools/k8_probes/livenessProbe.sh /tools/k8_probes/\n ---> 9e5020ded565\nStep 29/32 : COPY tools/k8_probes/readinessProbe.sh /tools/k8_probes/\n ---> 6ec8ec050f0e\nStep 30/32 : COPY tools/k8_probes/startupProbe.sh /tools/k8_probes/\n ---> 624673697686\nStep 31/32 : USER 1001\n ---> Running in 281a41308276\nRemoving intermediate container 281a41308276\n ---> d9a27e694f1f\nStep 32/32 : ENTRYPOINT [\"/manager\"]\n ---> Running in 5890cd1cb27f\nRemoving intermediate container 5890cd1cb27f\n ---> 802211afc0c3\nSuccessfully built 802211afc0c3\nSuccessfully tagged splunk-operator:latest\n","stderr":"","imageSize":302110202},"repair":{"violations":[],"repairedDockerfile":"# Build the manager binary\nFROM golang:1.19 as builder\n\nWORKDIR /workspace\n# Copy the Go Modules manifests\nCOPY go.mod go.mod\nCOPY go.sum go.sum\n# cache deps before building and copying source so that we don't need to re-download as much\n# and so that source changes don't invalidate our downloaded layer\nRUN go mod download\n\n# Copy the go source\nCOPY main.go main.go\nCOPY api/ api/\nCOPY controllers/ controllers/\nCOPY pkg/ pkg/\nCOPY tools/ tools/\nCOPY hack hack/\n\n# Build\nRUN CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -a -o manager main.go\n\n# Use distroless as minimal base image to package the manager binary\n# Refer to https://github.com/GoogleContainerTools/distroless for more details\nFROM registry.access.redhat.com/ubi8/ubi:latest\n\nENV OPERATOR=/manager \\\n    USER_UID=1001 \\\n    USER_NAME=nonroot\n\nRUN yum -y install shadow-utils\nRUN useradd -ms /bin/bash nonroot -u 1001\nRUN yum update -y krb5-libs && yum clean all\nRUN yum -y update-minimal --security --sec-severity=Important --sec-severity=Critical\nRUN yum -y update-minimal --security --sec-severity=Moderate\nRUN yum -y update-minimal --security --sec-severity=Low\n\nLABEL name=\"splunk\" \\\n      maintainer=\"support@splunk.com\" \\\n      vendor=\"splunk\" \\\n      version=\"2.1.0\" \\\n      release=\"1\" \\\n      summary=\"Simplify the Deployment & Management of Splunk Products on Kubernetes\" \\\n      description=\"The Splunk Operator for Kubernetes (SOK) makes it easy for Splunk Administrators to deploy and operate Enterprise deployments in a Kubernetes infrastructure. Packaged as a container, it uses the operator pattern to manage Splunk-specific custom resources, following best practices to manage all the underlying Kubernetes objects for you.\"\n\nWORKDIR /\nRUN mkdir /licenses\nRUN mkdir -p /tools/k8_probes\n\nCOPY --from=builder /workspace/manager .\nCOPY tools/EULA_Red_Hat_Universal_Base_Image_English_20190422.pdf /licenses\nCOPY LICENSE /licenses/LICENSE-2.0.txt\nCOPY tools/k8_probes/livenessProbe.sh /tools/k8_probes/\nCOPY tools/k8_probes/readinessProbe.sh /tools/k8_probes/\nCOPY tools/k8_probes/startupProbe.sh /tools/k8_probes/\n\nUSER 1001\n\nENTRYPOINT [\"/manager\"]\n"},"endTime":1672041604371}