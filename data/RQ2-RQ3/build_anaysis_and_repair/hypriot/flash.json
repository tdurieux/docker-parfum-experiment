{"repository":"https://github.com/hypriot/flash","dockerfilePath":"Dockerfile","startTime":1672875484911,"endTime":1672875580572,"clone":{"startTime":1672875484911,"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/hypriot/flash'...\n","error":null,"endTime":1672875485632,"commit":"66563d6ff32009079e50cb19e566433ed79c91c8"},"originalBuild":{"startTime":1672875485731,"endTime":1672875550608,"error":null,"stdout":"Sending build context to Docker daemon  226.8kB\r\r\nStep 1/10 : FROM node:8\n8: Pulling from library/node\nDigest: sha256:a681bf74805b80d03eb21a6c0ef168a976108a287a74167ab593fc953aac34df\nStatus: Downloaded newer image for node:8\n ---> 8eeadf3757f4\nStep 2/10 : WORKDIR /code/\n ---> Running in 23f9061293ce\nRemoving intermediate container 23f9061293ce\n ---> a5859461f99b\nStep 3/10 : COPY package.json .\n ---> 52e7420f9ffd\nStep 4/10 : RUN npm install &&     mv node_modules ..\n ---> Running in 8e18eac012ff\n\u001b[91mnpm\u001b[0m\u001b[91m \u001b[0m\u001b[91mnotice\u001b[0m\u001b[91m created a lockfile as package-lock.json. You should commit this file.\n\u001b[0m\u001b[91mnpm \u001b[0m\u001b[91mWARN\u001b[0m\u001b[91m flash-test@0.0.1 No repository field.\n\u001b[0m\u001b[91m\n\u001b[0madded 3 packages from 3 contributors and audited 3 packages in 1.379s\nfound 0 vulnerabilities\n\nRemoving intermediate container 8e18eac012ff\n ---> bd5c1280d3f6\nStep 5/10 : RUN apt-get update && apt-get install -y sudo pv curl unzip shellcheck udev\n ---> Running in 8cb04c5eb30a\nIgn:1 http://deb.debian.org/debian stretch InRelease\nGet:2 http://security.debian.org/debian-security stretch/updates InRelease [59.1 kB]\nGet:3 http://deb.debian.org/debian stretch-updates InRelease [93.6 kB]\nGet:4 http://deb.debian.org/debian stretch Release [118 kB]\nGet:5 http://deb.debian.org/debian stretch Release.gpg [3177 B]\nGet:6 http://security.debian.org/debian-security stretch/updates/main amd64 Packages [782 kB]\nGet:7 http://deb.debian.org/debian stretch/main amd64 Packages [7080 kB]\nFetched 8135 kB in 1s (5009 kB/s)\nReading package lists...\nReading package lists...\nBuilding dependency tree...\nReading state information...\nunzip is already the newest version (6.0-21+deb9u2).\nThe following additional packages will be installed:\n  libcurl3 libcurl4-openssl-dev libkmod2 libudev1\nSuggested packages:\n  libcurl4-doc libcurl3-dbg libidn11-dev libldap2-dev librtmp-dev\n  libssh2-1-dev libssl1.0-dev | libssl-dev doc-base\nThe following NEW packages will be installed:\n  libkmod2 pv shellcheck sudo udev\nThe following packages will be upgraded:\n  curl libcurl3 libcurl4-openssl-dev libudev1\n4 upgraded, 5 newly installed, 0 to remove and 158 not upgraded.\nNeed to get 5314 kB of archives.\nAfter this operation, 28.5 MB of additional disk space will be used.\nGet:1 http://deb.debian.org/debian stretch/main amd64 libkmod2 amd64 23-2 [48.1 kB]\nGet:2 http://security.debian.org/debian-security stretch/updates/main amd64 libudev1 amd64 232-25+deb9u14 [126 kB]\nGet:3 http://deb.debian.org/debian stretch/main amd64 pv amd64 1.6.0-1+b1 [48.3 kB]\nGet:4 http://security.debian.org/debian-security stretch/updates/main amd64 udev amd64 232-25+deb9u14 [1117 kB]\nGet:5 http://security.debian.org/debian-security stretch/updates/main amd64 libcurl4-openssl-dev amd64 7.52.1-5+deb9u16 [383 kB]\nGet:6 http://security.debian.org/debian-security stretch/updates/main amd64 curl amd64 7.52.1-5+deb9u16 [229 kB]\nGet:7 http://security.debian.org/debian-security stretch/updates/main amd64 libcurl3 amd64 7.52.1-5+deb9u16 [298 kB]\nGet:8 http://security.debian.org/debian-security stretch/updates/main amd64 sudo amd64 1.8.19p1-2.1+deb9u3 [1055 kB]\nGet:9 http://deb.debian.org/debian stretch/main amd64 shellcheck amd64 0.4.4-4 [2010 kB]\n\u001b[91mdebconf: delaying package configuration, since apt-utils is not installed\n\u001b[0mFetched 5314 kB in 0s (32.0 MB/s)\nSelecting previously unselected package libkmod2:amd64.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 29962 files and directories currently installed.)\r\nPreparing to unpack .../libkmod2_23-2_amd64.deb ...\r\nUnpacking libkmod2:amd64 (23-2) ...\r\nPreparing to unpack .../libudev1_232-25+deb9u14_amd64.deb ...\r\nUnpacking libudev1:amd64 (232-25+deb9u14) over (232-25+deb9u12) ...\r\nSetting up libudev1:amd64 (232-25+deb9u14) ...\r\nSelecting previously unselected package udev.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 29968 files and directories currently installed.)\r\nPreparing to unpack .../0-udev_232-25+deb9u14_amd64.deb ...\r\nUnpacking udev (232-25+deb9u14) ...\r\nPreparing to unpack .../1-libcurl4-openssl-dev_7.52.1-5+deb9u16_amd64.deb ...\r\nUnpacking libcurl4-openssl-dev:amd64 (7.52.1-5+deb9u16) over (7.52.1-5+deb9u9) ...\r\nPreparing to unpack .../2-curl_7.52.1-5+deb9u16_amd64.deb ...\r\nUnpacking curl (7.52.1-5+deb9u16) over (7.52.1-5+deb9u9) ...\r\nPreparing to unpack .../3-libcurl3_7.52.1-5+deb9u16_amd64.deb ...\r\nUnpacking libcurl3:amd64 (7.52.1-5+deb9u16) over (7.52.1-5+deb9u9) ...\r\nSelecting previously unselected package pv.\r\nPreparing to unpack .../4-pv_1.6.0-1+b1_amd64.deb ...\r\nUnpacking pv (1.6.0-1+b1) ...\r\nSelecting previously unselected package sudo.\r\nPreparing to unpack .../5-sudo_1.8.19p1-2.1+deb9u3_amd64.deb ...\r\nUnpacking sudo (1.8.19p1-2.1+deb9u3) ...\r\nSelecting previously unselected package shellcheck.\r\nPreparing to unpack .../6-shellcheck_0.4.4-4_amd64.deb ...\r\nUnpacking shellcheck (0.4.4-4) ...\r\nSetting up pv (1.6.0-1+b1) ...\r\nSetting up sudo (1.8.19p1-2.1+deb9u3) ...\r\nSetting up libcurl3:amd64 (7.52.1-5+deb9u16) ...\r\nSetting up libkmod2:amd64 (23-2) ...\r\nProcessing triggers for libc-bin (2.24-11+deb9u4) ...\r\nSetting up udev (232-25+deb9u14) ...\r\nAdding group `input' (GID 102) ...\r\nDone.\r\ninvoke-rc.d: could not determine current runlevel\r\ninvoke-rc.d: policy-rc.d denied execution of start.\r\nSetting up shellcheck (0.4.4-4) ...\r\nSetting up libcurl4-openssl-dev:amd64 (7.52.1-5+deb9u16) ...\r\nSetting up curl (7.52.1-5+deb9u16) ...\r\nRemoving intermediate container 8cb04c5eb30a\n ---> 1c8db047c2a1\nStep 6/10 : RUN useradd user &&     mkdir -p /home/user &&     chown user:users /home/user &&     echo \"user ALL=(ALL) NOPASSWD:ALL\" >> /etc/sudoers\n ---> Running in 7c2baa50cac1\nRemoving intermediate container 7c2baa50cac1\n ---> 50abdd8b82e3\nStep 7/10 : RUN echo \"#!/bin/bash\\necho 1\\n\" >/sbin/hdparm && chmod +x /sbin/hdparm\n ---> Running in 1caff9a49d32\nRemoving intermediate container 1caff9a49d32\n ---> 542740bafb1f\nStep 8/10 : RUN cp \"$(which mount)\" \"$(which mount).real\" &&     echo \"#!/bin/bash\\nmnt=\\$(echo \\$3 | sed 's/1\\$//')\\noffset=\\$(fdisk -l \\$mnt | grep -i fat | awk '{print \\$2*512}')\\nsudo mount.real -o loop,offset=\\$offset,uid=user,gid=user \\$mnt \\$4\\n\" >$(which mount)\n ---> Running in e764c0d8cd84\nRemoving intermediate container e764c0d8cd84\n ---> 0a68682e483e\nStep 9/10 : USER user\n ---> Running in bb4fbca55433\nRemoving intermediate container bb4fbca55433\n ---> f5aaeccc6bb5\nStep 10/10 : CMD [ \"npm\", \"test\" ]\n ---> Running in f22fe242deb1\nRemoving intermediate container f22fe242deb1\n ---> a44d5494539f\nSuccessfully built a44d5494539f\nSuccessfully tagged flash:latest\n","stderr":"","imageSize":959843525},"repair":{"startTime":1672875550671,"endTime":1672875550800,"violations":[{"name":"npmCacheCleanAfterInstall","position":{"start":3,"end":3,"columnStart":4,"columnEnd":15}},{"name":"aptGetInstallUseNoRec","position":{"start":6,"end":6,"columnStart":22,"columnEnd":75}},{"name":"ruleAptGetInstallThenRemoveAptLists","position":{"start":6,"end":6,"columnStart":22,"columnEnd":75}}],"repairedDockerfile":"FROM node:8\nWORKDIR /code/\nCOPY package.json .\nRUN npm install && \\\n    mv node_modules .. && npm cache clean --force;\n\nRUN apt-get update && apt-get install --no-install-recommends -y sudo pv curl unzip shellcheck udev && rm -rf /var/lib/apt/lists/*;\nRUN useradd user && \\\n    mkdir -p /home/user && \\\n    chown user:users /home/user && \\\n    echo \"user ALL=(ALL) NOPASSWD:ALL\" >> /etc/sudoers\nRUN echo \"#!/bin/bash\\necho 1\\n\" >/sbin/hdparm && chmod +x /sbin/hdparm\nRUN cp \"$(which mount)\" \"$(which mount).real\" && \\\n    echo \"#!/bin/bash\\nmnt=\\$(echo \\$3 | sed 's/1\\$//')\\noffset=\\$(fdisk -l \\$mnt | grep -i fat | awk '{print \\$2*512}')\\nsudo mount.real -o loop,offset=\\$offset,uid=user,gid=user \\$mnt \\$4\\n\" >$(which mount)\n\nUSER user\nCMD [ \"npm\", \"test\" ]\n"},"repairedBuild":{"startTime":1672875551021,"endTime":1672875580291,"error":null,"stdout":"Sending build context to Docker daemon  226.8kB\r\r\nStep 1/10 : FROM node:8\n ---> 8eeadf3757f4\nStep 2/10 : WORKDIR /code/\n ---> Running in c6db485d1671\nRemoving intermediate container c6db485d1671\n ---> b9da7f71be58\nStep 3/10 : COPY package.json .\n ---> c578a800bd1a\nStep 4/10 : RUN npm install &&     mv node_modules .. && npm cache clean --force;\n ---> Running in 42f4ad72f06c\n\u001b[91mnpm\u001b[0m\u001b[91m notice created a lockfile as package-lock.json. You should commit this file.\n\u001b[0m\u001b[91mnpm\u001b[0m\u001b[91m \u001b[0m\u001b[91mWARN\u001b[0m\u001b[91m flash-test@0.0.1 No repository field.\n\u001b[0m\u001b[91m\n\u001b[0madded 3 packages from 3 contributors and audited 3 packages in 0.408s\nfound 0 vulnerabilities\n\n\u001b[91mnpm WARN using --force I sure hope you know what you are doing.\n\u001b[0mRemoving intermediate container 42f4ad72f06c\n ---> 65dd9fc55270\nStep 5/10 : RUN apt-get update && apt-get install --no-install-recommends -y sudo pv curl unzip shellcheck udev && rm -rf /var/lib/apt/lists/*;\n ---> Running in 717251827c4c\nIgn:1 http://deb.debian.org/debian stretch InRelease\nGet:2 http://security.debian.org/debian-security stretch/updates InRelease [59.1 kB]\nGet:3 http://deb.debian.org/debian stretch-updates InRelease [93.6 kB]\nGet:4 http://deb.debian.org/debian stretch Release [118 kB]\nGet:5 http://deb.debian.org/debian stretch Release.gpg [3177 B]\nGet:6 http://security.debian.org/debian-security stretch/updates/main amd64 Packages [782 kB]\nGet:7 http://deb.debian.org/debian stretch/main amd64 Packages [7080 kB]\nFetched 8135 kB in 1s (4074 kB/s)\nReading package lists...\nReading package lists...\nBuilding dependency tree...\nReading state information...\nunzip is already the newest version (6.0-21+deb9u2).\nThe following additional packages will be installed:\n  libcurl3 libcurl4-openssl-dev libkmod2 libudev1\nSuggested packages:\n  libcurl4-doc libcurl3-dbg libidn11-dev libldap2-dev librtmp-dev\n  libssh2-1-dev libssl1.0-dev | libssl-dev doc-base\nThe following NEW packages will be installed:\n  libkmod2 pv shellcheck sudo udev\nThe following packages will be upgraded:\n  curl libcurl3 libcurl4-openssl-dev libudev1\n4 upgraded, 5 newly installed, 0 to remove and 158 not upgraded.\nNeed to get 5314 kB of archives.\nAfter this operation, 28.5 MB of additional disk space will be used.\nGet:1 http://security.debian.org/debian-security stretch/updates/main amd64 libudev1 amd64 232-25+deb9u14 [126 kB]\nGet:2 http://deb.debian.org/debian stretch/main amd64 libkmod2 amd64 23-2 [48.1 kB]\nGet:3 http://security.debian.org/debian-security stretch/updates/main amd64 udev amd64 232-25+deb9u14 [1117 kB]\nGet:4 http://deb.debian.org/debian stretch/main amd64 pv amd64 1.6.0-1+b1 [48.3 kB]\nGet:5 http://deb.debian.org/debian stretch/main amd64 shellcheck amd64 0.4.4-4 [2010 kB]\nGet:6 http://security.debian.org/debian-security stretch/updates/main amd64 libcurl4-openssl-dev amd64 7.52.1-5+deb9u16 [383 kB]\nGet:7 http://security.debian.org/debian-security stretch/updates/main amd64 curl amd64 7.52.1-5+deb9u16 [229 kB]\nGet:8 http://security.debian.org/debian-security stretch/updates/main amd64 libcurl3 amd64 7.52.1-5+deb9u16 [298 kB]\nGet:9 http://security.debian.org/debian-security stretch/updates/main amd64 sudo amd64 1.8.19p1-2.1+deb9u3 [1055 kB]\n\u001b[91mdebconf: delaying package configuration, since apt-utils is not installed\n\u001b[0mFetched 5314 kB in 0s (89.9 MB/s)\nSelecting previously unselected package libkmod2:amd64.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 29962 files and directories currently installed.)\r\nPreparing to unpack .../libkmod2_23-2_amd64.deb ...\r\nUnpacking libkmod2:amd64 (23-2) ...\r\nPreparing to unpack .../libudev1_232-25+deb9u14_amd64.deb ...\r\nUnpacking libudev1:amd64 (232-25+deb9u14) over (232-25+deb9u12) ...\r\nSetting up libudev1:amd64 (232-25+deb9u14) ...\r\nSelecting previously unselected package udev.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 29968 files and directories currently installed.)\r\nPreparing to unpack .../0-udev_232-25+deb9u14_amd64.deb ...\r\nUnpacking udev (232-25+deb9u14) ...\r\nPreparing to unpack .../1-libcurl4-openssl-dev_7.52.1-5+deb9u16_amd64.deb ...\r\nUnpacking libcurl4-openssl-dev:amd64 (7.52.1-5+deb9u16) over (7.52.1-5+deb9u9) ...\r\nPreparing to unpack .../2-curl_7.52.1-5+deb9u16_amd64.deb ...\r\nUnpacking curl (7.52.1-5+deb9u16) over (7.52.1-5+deb9u9) ...\r\nPreparing to unpack .../3-libcurl3_7.52.1-5+deb9u16_amd64.deb ...\r\nUnpacking libcurl3:amd64 (7.52.1-5+deb9u16) over (7.52.1-5+deb9u9) ...\r\nSelecting previously unselected package pv.\r\nPreparing to unpack .../4-pv_1.6.0-1+b1_amd64.deb ...\r\nUnpacking pv (1.6.0-1+b1) ...\r\nSelecting previously unselected package sudo.\r\nPreparing to unpack .../5-sudo_1.8.19p1-2.1+deb9u3_amd64.deb ...\r\nUnpacking sudo (1.8.19p1-2.1+deb9u3) ...\r\nSelecting previously unselected package shellcheck.\r\nPreparing to unpack .../6-shellcheck_0.4.4-4_amd64.deb ...\r\nUnpacking shellcheck (0.4.4-4) ...\r\nSetting up pv (1.6.0-1+b1) ...\r\nSetting up sudo (1.8.19p1-2.1+deb9u3) ...\r\nSetting up libcurl3:amd64 (7.52.1-5+deb9u16) ...\r\nSetting up libkmod2:amd64 (23-2) ...\r\nProcessing triggers for libc-bin (2.24-11+deb9u4) ...\r\nSetting up udev (232-25+deb9u14) ...\r\nAdding group `input' (GID 102) ...\r\nDone.\r\ninvoke-rc.d: could not determine current runlevel\r\ninvoke-rc.d: policy-rc.d denied execution of start.\r\nSetting up shellcheck (0.4.4-4) ...\r\nSetting up libcurl4-openssl-dev:amd64 (7.52.1-5+deb9u16) ...\r\nSetting up curl (7.52.1-5+deb9u16) ...\r\nRemoving intermediate container 717251827c4c\n ---> f24f7f2c3df3\nStep 6/10 : RUN useradd user &&     mkdir -p /home/user &&     chown user:users /home/user &&     echo \"user ALL=(ALL) NOPASSWD:ALL\" >> /etc/sudoers\n ---> Running in 065a24839843\nRemoving intermediate container 065a24839843\n ---> 67c6789e68be\nStep 7/10 : RUN echo \"#!/bin/bash\\necho 1\\n\" >/sbin/hdparm && chmod +x /sbin/hdparm\n ---> Running in fe801c2a3376\nRemoving intermediate container fe801c2a3376\n ---> 1538bdcb383d\nStep 8/10 : RUN cp \"$(which mount)\" \"$(which mount).real\" &&     echo \"#!/bin/bash\\nmnt=\\$(echo \\$3 | sed 's/1\\$//')\\noffset=\\$(fdisk -l \\$mnt | grep -i fat | awk '{print \\$2*512}')\\nsudo mount.real -o loop,offset=\\$offset,uid=user,gid=user \\$mnt \\$4\\n\" >$(which mount)\n ---> Running in 140fe8c7d144\nRemoving intermediate container 140fe8c7d144\n ---> b400aa30bd18\nStep 9/10 : USER user\n ---> Running in 629ce914cc36\nRemoving intermediate container 629ce914cc36\n ---> e5bd8b14d2df\nStep 10/10 : CMD [ \"npm\", \"test\" ]\n ---> Running in 470dfed80b4a\nRemoving intermediate container 470dfed80b4a\n ---> fe72b6576d49\nSuccessfully built fe72b6576d49\nSuccessfully tagged flash:latest\n","stderr":"","imageSize":942904632}}