{"repository":"https://github.com/thorchain/thorchain-tss","dockerfilePath":"Dockerfile","startTime":1672349304763,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/thorchain/thorchain-tss'...\n","error":null,"commit":"8f5e91b0ad5b8cd29caa05408edfcf44cd97dfff"},"originalBuild":{"startTimestamp":1672349305719,"endTimestamp":1672349474379,"error":null,"stdout":"Sending build context to Docker daemon  1.473MB\r\r\nStep 1/19 : FROM golang:1.17.0-alpine AS builder\n1.17.0-alpine: Pulling from library/golang\na0d0a0d46f8b: Pulling fs layer\n31adcdaf11c8: Pulling fs layer\nb8b176561691: Pulling fs layer\n5ea3a45ba3ce: Pulling fs layer\n19d3675075e9: Pulling fs layer\n5ea3a45ba3ce: Waiting\n19d3675075e9: Waiting\na0d0a0d46f8b: Verifying Checksum\na0d0a0d46f8b: Download complete\nb8b176561691: Verifying Checksum\nb8b176561691: Download complete\n31adcdaf11c8: Verifying Checksum\n31adcdaf11c8: Download complete\na0d0a0d46f8b: Pull complete\n31adcdaf11c8: Pull complete\nb8b176561691: Pull complete\n19d3675075e9: Verifying Checksum\n19d3675075e9: Download complete\n5ea3a45ba3ce: Download complete\n5ea3a45ba3ce: Pull complete\n19d3675075e9: Pull complete\nDigest: sha256:c03a922dfb0d6d3a94d46cc5be69002011763595ac2786068fde63ee174d797b\nStatus: Downloaded newer image for golang:1.17.0-alpine\n ---> 5a6ac0d9a8df\nStep 2/19 : RUN apk update && apk add --no-cache git\n ---> Running in 7463ea905625\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.14/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.14/community/x86_64/APKINDEX.tar.gz\nv3.14.8-161-g417a1aaf71 [https://dl-cdn.alpinelinux.org/alpine/v3.14/main]\nv3.14.8-160-ga64feecdb9 [https://dl-cdn.alpinelinux.org/alpine/v3.14/community]\nOK: 14968 distinct packages available\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.14/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.14/community/x86_64/APKINDEX.tar.gz\n(1/6) Installing brotli-libs (1.0.9-r5)\n(2/6) Installing nghttp2-libs (1.43.0-r0)\n(3/6) Installing libcurl (7.79.1-r4)\n(4/6) Installing expat (2.5.0-r0)\n(5/6) Installing pcre2 (10.36-r1)\n(6/6) Installing git (2.32.4-r0)\nExecuting busybox-1.33.1-r3.trigger\nOK: 19 MiB in 21 packages\nRemoving intermediate container 7463ea905625\n ---> aef22130e326\nStep 3/19 : WORKDIR /go/src/app\n ---> Running in c39f117643f5\nRemoving intermediate container c39f117643f5\n ---> 994440fa58b0\nStep 4/19 : COPY . .\n ---> b057a505b713\nStep 5/19 : RUN go mod download\n ---> Running in 58ca33aa2a82\nRemoving intermediate container 58ca33aa2a82\n ---> 2db9005f50a0\nStep 6/19 : WORKDIR /go/src/app/cmd/tss\n ---> Running in 2c9813fa580a\nRemoving intermediate container 2c9813fa580a\n ---> 4fac0c663c5a\nStep 7/19 : RUN GOOS=linux GOARCH=amd64 go build -ldflags=\"-w -s\" -o tss\n ---> Running in bd498045f84a\nRemoving intermediate container bd498045f84a\n ---> 4bc68db0aeaa\nStep 8/19 : FROM alpine:latest\n ---> 49176f190c7e\nStep 9/19 : ARG privkey\n ---> Running in 9db8d46be0e1\nRemoving intermediate container 9db8d46be0e1\n ---> 6c9eb6d1edcb\nStep 10/19 : ARG net\n ---> Running in 55588c9eb9e9\nRemoving intermediate container 55588c9eb9e9\n ---> 521e7902e787\nStep 11/19 : ENV PRIVKEY=$privkey\n ---> Running in d9ca5f1fe87c\nRemoving intermediate container d9ca5f1fe87c\n ---> c1f001248cc2\nStep 12/19 : ENV NET=$net\n ---> Running in b71098449412\nRemoving intermediate container b71098449412\n ---> ea9acb9d64f2\nStep 13/19 : RUN apk add --update ca-certificates curl\n ---> Running in 44a6419ded32\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/5) Installing ca-certificates (20220614-r3)\n(2/5) Installing brotli-libs (1.0.9-r9)\n(3/5) Installing nghttp2-libs (1.51.0-r0)\n(4/5) Installing libcurl (7.87.0-r0)\n(5/5) Installing curl (7.87.0-r0)\nExecuting busybox-1.35.0-r29.trigger\nExecuting ca-certificates-20220614-r3.trigger\nOK: 9 MiB in 20 packages\nRemoving intermediate container 44a6419ded32\n ---> 88efb8a266b8\nStep 14/19 : RUN mkdir -p /go/bin\n ---> Running in a9a968800012\nRemoving intermediate container a9a968800012\n ---> e2d1899b4e66\nStep 15/19 : COPY --from=builder /go/src/app/cmd/tss /go/bin\n ---> e8a9f4c6b5c2\nStep 16/19 : COPY build/start-tss.bash build/start.bash /go/bin/\n ---> be0409e2260c\nStep 17/19 : RUN chmod +x /go/bin/start-tss.bash /go/bin/start.bash\n ---> Running in b638ec9ddea8\nRemoving intermediate container b638ec9ddea8\n ---> b04baf895b85\nStep 18/19 : EXPOSE 6668\n ---> Running in b70ad76ed4d7\nRemoving intermediate container b70ad76ed4d7\n ---> 40722807e1cf\nStep 19/19 : EXPOSE 8080\n ---> Running in e3af089b59cd\nRemoving intermediate container e3af089b59cd\n ---> d33045a80657\nSuccessfully built d33045a80657\nSuccessfully tagged thorchain-tss:latest\n","stderr":"","imageSize":49679741},"repair":{"violations":[{"name":"apkAddUseNoCache","position":{"start":17,"end":17,"columnStart":4,"columnEnd":41}}],"repairedDockerfile":"FROM golang:1.17.0-alpine AS builder\n\nRUN apk update && apk add --no-cache git\nWORKDIR /go/src/app\nCOPY . .\nRUN go mod download\nWORKDIR /go/src/app/cmd/tss\nRUN GOOS=linux GOARCH=amd64 go build -ldflags=\"-w -s\" -o tss\n\n#\n# Main\n#\nFROM alpine:latest\nARG privkey\nARG net\nENV PRIVKEY=$privkey\nENV NET=$net\nRUN apk add --no-cache --update ca-certificates curl\nRUN mkdir -p /go/bin\nCOPY --from=builder /go/src/app/cmd/tss /go/bin\nCOPY build/start-tss.bash build/start.bash /go/bin/\nRUN chmod +x /go/bin/start-tss.bash /go/bin/start.bash\nEXPOSE 6668\nEXPOSE 8080\n"},"repairedBuild":{"startTimestamp":1672349474777,"endTimestamp":1672349606463,"error":null,"stdout":"Sending build context to Docker daemon  1.473MB\r\r\nStep 1/19 : FROM golang:1.17.0-alpine AS builder\n ---> 5a6ac0d9a8df\nStep 2/19 : RUN apk update && apk add --no-cache git\n ---> Running in 690517e38513\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.14/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.14/community/x86_64/APKINDEX.tar.gz\nv3.14.8-161-g417a1aaf71 [https://dl-cdn.alpinelinux.org/alpine/v3.14/main]\nv3.14.8-160-ga64feecdb9 [https://dl-cdn.alpinelinux.org/alpine/v3.14/community]\nOK: 14968 distinct packages available\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.14/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.14/community/x86_64/APKINDEX.tar.gz\n(1/6) Installing brotli-libs (1.0.9-r5)\n(2/6) Installing nghttp2-libs (1.43.0-r0)\n(3/6) Installing libcurl (7.79.1-r4)\n(4/6) Installing expat (2.5.0-r0)\n(5/6) Installing pcre2 (10.36-r1)\n(6/6) Installing git (2.32.4-r0)\nExecuting busybox-1.33.1-r3.trigger\nOK: 19 MiB in 21 packages\nRemoving intermediate container 690517e38513\n ---> 1b0dd642ec30\nStep 3/19 : WORKDIR /go/src/app\n ---> Running in d7040e4c4f3a\nRemoving intermediate container d7040e4c4f3a\n ---> c03a7390d339\nStep 4/19 : COPY . .\n ---> 8aba3fc146d8\nStep 5/19 : RUN go mod download\n ---> Running in 7ebc5812b093\nRemoving intermediate container 7ebc5812b093\n ---> f8d5cef1932e\nStep 6/19 : WORKDIR /go/src/app/cmd/tss\n ---> Running in a676982d763c\nRemoving intermediate container a676982d763c\n ---> c3b880c16d2a\nStep 7/19 : RUN GOOS=linux GOARCH=amd64 go build -ldflags=\"-w -s\" -o tss\n ---> Running in d308fd4c70ce\nRemoving intermediate container d308fd4c70ce\n ---> 49f2cbc7131a\nStep 8/19 : FROM alpine:latest\n ---> 49176f190c7e\nStep 9/19 : ARG privkey\n ---> Running in 58cb9552a7fa\nRemoving intermediate container 58cb9552a7fa\n ---> c7d21db27207\nStep 10/19 : ARG net\n ---> Running in 2f66ddef7356\nRemoving intermediate container 2f66ddef7356\n ---> a094977144c8\nStep 11/19 : ENV PRIVKEY=$privkey\n ---> Running in b0b7f53bf9ec\nRemoving intermediate container b0b7f53bf9ec\n ---> 0dff56a03561\nStep 12/19 : ENV NET=$net\n ---> Running in 332d16f8ddc9\nRemoving intermediate container 332d16f8ddc9\n ---> c5cdea40713b\nStep 13/19 : RUN apk add --no-cache --update ca-certificates curl\n ---> Running in a9e76bb5d8d9\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/5) Installing ca-certificates (20220614-r3)\n(2/5) Installing brotli-libs (1.0.9-r9)\n(3/5) Installing nghttp2-libs (1.51.0-r0)\n(4/5) Installing libcurl (7.87.0-r0)\n(5/5) Installing curl (7.87.0-r0)\nExecuting busybox-1.35.0-r29.trigger\nExecuting ca-certificates-20220614-r3.trigger\nOK: 9 MiB in 20 packages\nRemoving intermediate container a9e76bb5d8d9\n ---> a13f3fe6c527\nStep 14/19 : RUN mkdir -p /go/bin\n ---> Running in 505cfb1054a8\nRemoving intermediate container 505cfb1054a8\n ---> 25ef6271cb8a\nStep 15/19 : COPY --from=builder /go/src/app/cmd/tss /go/bin\n ---> 9c7467ccf6c0\nStep 16/19 : COPY build/start-tss.bash build/start.bash /go/bin/\n ---> e17a120a68ea\nStep 17/19 : RUN chmod +x /go/bin/start-tss.bash /go/bin/start.bash\n ---> Running in bb2d81daf747\nRemoving intermediate container bb2d81daf747\n ---> aac2cfa7f765\nStep 18/19 : EXPOSE 6668\n ---> Running in 4bfd43f8bc1d\nRemoving intermediate container 4bfd43f8bc1d\n ---> bfd83b44e36e\nStep 19/19 : EXPOSE 8080\n ---> Running in 46da018d17fd\nRemoving intermediate container 46da018d17fd\n ---> 7f78b10ec81f\nSuccessfully built 7f78b10ec81f\nSuccessfully tagged thorchain-tss:latest\n","stderr":"","imageSize":47097035},"endTime":1672349606738}