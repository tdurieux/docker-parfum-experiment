{"repository":"https://github.com/wangduanduan/siphub","dockerfilePath":"Dockerfile","startTime":1672362629146,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/wangduanduan/siphub'...\n","error":null,"commit":"7a4da7c82936490143008ee32453fd3b741eff6e"},"originalBuild":{"startTimestamp":1672362630108,"endTimestamp":1672362739905,"error":null,"stdout":"Sending build context to Docker daemon  1.512MB\r\r\nStep 1/15 : FROM golang:1.17.2 as builder\n1.17.2: Pulling from library/golang\nbb7d5a84853b: Pulling fs layer\nf02b617c6a8c: Pulling fs layer\nd32e17419b7e: Pulling fs layer\nc9d2d81226a4: Pulling fs layer\n7bd370e02e50: Pulling fs layer\nd51542c3a854: Pulling fs layer\na7be4545b9d7: Pulling fs layer\n7bd370e02e50: Waiting\nd51542c3a854: Waiting\na7be4545b9d7: Waiting\nc9d2d81226a4: Waiting\nd32e17419b7e: Verifying Checksum\nd32e17419b7e: Download complete\nf02b617c6a8c: Verifying Checksum\nf02b617c6a8c: Download complete\nc9d2d81226a4: Verifying Checksum\nc9d2d81226a4: Download complete\nbb7d5a84853b: Verifying Checksum\nbb7d5a84853b: Download complete\na7be4545b9d7: Download complete\n7bd370e02e50: Verifying Checksum\n7bd370e02e50: Download complete\nbb7d5a84853b: Pull complete\nd51542c3a854: Verifying Checksum\nd51542c3a854: Download complete\nf02b617c6a8c: Pull complete\nd32e17419b7e: Pull complete\nc9d2d81226a4: Pull complete\n7bd370e02e50: Pull complete\nd51542c3a854: Pull complete\na7be4545b9d7: Pull complete\nDigest: sha256:124966f5d54a41317ee81ccfe5f849d4f0deef4ed3c5c32c20be855c51c15027\nStatus: Downloaded newer image for golang:1.17.2\n ---> 9f8b89ee4475\nStep 2/15 : ENV GO111MODULE=on GOPROXY=https://goproxy.cn,direct\n ---> Running in 4f3a3a011fef\nRemoving intermediate container 4f3a3a011fef\n ---> 02f4e46af322\nStep 3/15 : WORKDIR /app\n ---> Running in f54052e8f29d\nRemoving intermediate container f54052e8f29d\n ---> fec222c1ba6b\nStep 4/15 : COPY . .\n ---> 3366dd79d847\nStep 5/15 : RUN CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -o run .\n ---> Running in 54f509a00777\n\u001b[91mgo: downloading github.com/prometheus/client_golang v1.11.0\n\u001b[0m\u001b[91mgo: downloading go.uber.org/zap v1.18.1\ngo: downloading gopkg.in/natefinch/lumberjack.v2 v2.0.0\ngo: downloading github.com/caarlos0/env/v6 v6.6.2\ngo: downloading gorm.io/gorm v1.21.16\ngo: downloading gorm.io/driver/mysql v1.1.2\n\u001b[0m\u001b[91mgo: downloading github.com/go-sql-driver/mysql v1.6.0\n\u001b[0m\u001b[91mgo: downloading github.com/prometheus/common v0.32.1\ngo: downloading github.com/prometheus/client_model v0.2.0\n\u001b[0m\u001b[91mgo: downloading github.com/golang/protobuf v1.5.2\ngo: downloading github.com/prometheus/procfs v0.7.3\ngo: downloading github.com/beorn7/perks v1.0.1\ngo: downloading github.com/cespare/xxhash/v2 v2.1.2\n\u001b[0m\u001b[91mgo: downloading github.com/jinzhu/inflection v1.0.0\ngo: downloading github.com/jinzhu/now v1.1.2\n\u001b[0m\u001b[91mgo: downloading google.golang.org/protobuf v1.27.1\n\u001b[0m\u001b[91mgo: downloading github.com/matttproud/golang_protobuf_extensions v1.0.1\n\u001b[0m\u001b[91mgo: downloading golang.org/x/sys v0.0.0-20211107104306-e0b2ad06fe42\n\u001b[0m\u001b[91mgo: downloading go.uber.org/multierr v1.7.0\ngo: downloading go.uber.org/atomic v1.9.0\n\u001b[0mRemoving intermediate container 54f509a00777\n ---> 70ecadb058cb\nStep 6/15 : FROM alpine:3.14.2\n3.14.2: Pulling from library/alpine\na0d0a0d46f8b: Pulling fs layer\na0d0a0d46f8b: Verifying Checksum\na0d0a0d46f8b: Download complete\na0d0a0d46f8b: Pull complete\nDigest: sha256:e1c082e3d3c45cccac829840a25941e679c25d438cc8412c2fa221cf1a824e6a\nStatus: Downloaded newer image for alpine:3.14.2\n ---> 14119a10abf4\nStep 7/15 : WORKDIR /app\n ---> Running in e360a4f61d22\nRemoving intermediate container e360a4f61d22\n ---> 390dbe144636\nStep 8/15 : RUN sed -i 's/dl-cdn.alpinelinux.org/mirrors.tuna.tsinghua.edu.cn/g' /etc/apk/repositories\n ---> Running in 2e1cf948c4dc\nRemoving intermediate container 2e1cf948c4dc\n ---> 0643c989ce2b\nStep 9/15 : RUN apk update && apk add tzdata curl net-tools && cp -r -f /usr/share/zoneinfo/Asia/Shanghai /etc/localtime\n ---> Running in 5ff8b8f0e63a\nfetch https://mirrors.tuna.tsinghua.edu.cn/alpine/v3.14/main/x86_64/APKINDEX.tar.gz\nfetch https://mirrors.tuna.tsinghua.edu.cn/alpine/v3.14/community/x86_64/APKINDEX.tar.gz\nv3.14.8-161-g417a1aaf71 [https://mirrors.tuna.tsinghua.edu.cn/alpine/v3.14/main]\nv3.14.8-160-ga64feecdb9 [https://mirrors.tuna.tsinghua.edu.cn/alpine/v3.14/community]\nOK: 14967 distinct packages available\n(1/8) Installing ca-certificates (20220614-r0)\n(2/8) Installing brotli-libs (1.0.9-r5)\n(3/8) Installing nghttp2-libs (1.43.0-r0)\n(4/8) Installing libcurl (7.79.1-r4)\n(5/8) Installing curl (7.79.1-r4)\n(6/8) Installing mii-tool (1.60_git20140218-r2)\n(7/8) Installing net-tools (1.60_git20140218-r2)\n(8/8) Installing tzdata (2022f-r1)\nExecuting busybox-1.33.1-r3.trigger\nExecuting ca-certificates-20220614-r0.trigger\nOK: 11 MiB in 22 packages\nRemoving intermediate container 5ff8b8f0e63a\n ---> 4b767a0a5143\nStep 10/15 : RUN echo \"curl http://localhost:3000/metrics/prometheus\" > /app/README.md\n ---> Running in 6a415777b314\nRemoving intermediate container 6a415777b314\n ---> 83c4b552c866\nStep 11/15 : COPY --from=builder /app/run .\n ---> eeb9c8fbda3c\nStep 12/15 : ENV TZ=Asia/Shanghai\n ---> Running in 0297829c4540\nRemoving intermediate container 0297829c4540\n ---> ac6a9d1c2a68\nStep 13/15 : EXPOSE 9060/udp\n ---> Running in 2c293fc8a696\nRemoving intermediate container 2c293fc8a696\n ---> 4606adbf6cfc\nStep 14/15 : EXPOSE 3000\n ---> Running in 6ebff5cfea00\nRemoving intermediate container 6ebff5cfea00\n ---> f0571f401cec\nStep 15/15 : ENTRYPOINT [\"/app/run\"]\n ---> Running in 0b06da3c62a0\nRemoving intermediate container 0b06da3c62a0\n ---> 676483f806b7\nSuccessfully built 676483f806b7\nSuccessfully tagged siphub:latest\n","stderr":"","imageSize":25453081},"repair":{"violations":[{"name":"apkAddUseNoCache","position":{"start":14,"end":14,"columnStart":18,"columnEnd":47}}],"repairedDockerfile":"FROM golang:1.17.2 as builder\n\nENV GO111MODULE=on GOPROXY=https://goproxy.cn,direct\n\nWORKDIR /app\n\nCOPY . .\n\nRUN CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -o run .\n\nFROM alpine:3.14.2\n\nWORKDIR /app\nRUN sed -i 's/dl-cdn.alpinelinux.org/mirrors.tuna.tsinghua.edu.cn/g' /etc/apk/repositories\nRUN apk update && apk add --no-cache tzdata curl net-tools && cp -r -f /usr/share/zoneinfo/Asia/Shanghai /etc/localtime\nRUN echo \"curl http://localhost:3000/metrics/prometheus\" > /app/README.md\n\nCOPY --from=builder /app/run .\n#COPY --from=builder /usr/share/zoneinfo /usr/share/zoneinfo\nENV TZ=Asia/Shanghai\n\nEXPOSE 9060/udp\nEXPOSE 3000\n\nENTRYPOINT [\"/app/run\"]\n\n"},"repairedBuild":{"startTimestamp":1672362740383,"endTimestamp":1672362901095,"error":null,"stdout":"Sending build context to Docker daemon  1.512MB\r\r\nStep 1/15 : FROM golang:1.17.2 as builder\n ---> 9f8b89ee4475\nStep 2/15 : ENV GO111MODULE=on GOPROXY=https://goproxy.cn,direct\n ---> Running in c006101d0e66\nRemoving intermediate container c006101d0e66\n ---> 0ffb90e2ed48\nStep 3/15 : WORKDIR /app\n ---> Running in f77fb9a726b4\nRemoving intermediate container f77fb9a726b4\n ---> a211c3f03a46\nStep 4/15 : COPY . .\n ---> 8eadbae97baf\nStep 5/15 : RUN CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -o run .\n ---> Running in 28aa3f61c64b\n\u001b[91mgo: downloading github.com/prometheus/client_golang v1.11.0\n\u001b[0m\u001b[91mgo: downloading github.com/caarlos0/env/v6 v6.6.2\n\u001b[0m\u001b[91mgo: downloading gorm.io/driver/mysql v1.1.2\n\u001b[0m\u001b[91mgo: downloading go.uber.org/zap v1.18.1\n\u001b[0m\u001b[91mgo: downloading gorm.io/gorm v1.21.16\n\u001b[0m\u001b[91mgo: downloading gopkg.in/natefinch/lumberjack.v2 v2.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/go-sql-driver/mysql v1.6.0\n\u001b[0m\u001b[91mgo: downloading github.com/jinzhu/inflection v1.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/jinzhu/now v1.1.2\n\u001b[0m\u001b[91mgo: downloading github.com/prometheus/client_model v0.2.0\ngo: downloading github.com/prometheus/common v0.32.1\n\u001b[0m\u001b[91mgo: downloading github.com/golang/protobuf v1.5.2\n\u001b[0m\u001b[91mgo: downloading github.com/prometheus/procfs v0.7.3\n\u001b[0m\u001b[91mgo: downloading github.com/cespare/xxhash/v2 v2.1.2\n\u001b[0m\u001b[91mgo: downloading github.com/beorn7/perks v1.0.1\n\u001b[0m\u001b[91mgo: downloading go.uber.org/multierr v1.7.0\n\u001b[0m\u001b[91mgo: downloading go.uber.org/atomic v1.9.0\n\u001b[0m\u001b[91mgo: downloading github.com/matttproud/golang_protobuf_extensions v1.0.1\n\u001b[0m\u001b[91mgo: downloading google.golang.org/protobuf v1.27.1\n\u001b[0m\u001b[91mgo: downloading golang.org/x/sys v0.0.0-20211107104306-e0b2ad06fe42\n\u001b[0mRemoving intermediate container 28aa3f61c64b\n ---> b7c6db96b9b4\nStep 6/15 : FROM alpine:3.14.2\n ---> 14119a10abf4\nStep 7/15 : WORKDIR /app\n ---> Running in 0b913e12ad20\nRemoving intermediate container 0b913e12ad20\n ---> 43be5b501c22\nStep 8/15 : RUN sed -i 's/dl-cdn.alpinelinux.org/mirrors.tuna.tsinghua.edu.cn/g' /etc/apk/repositories\n ---> Running in 50ee8e67e4e4\nRemoving intermediate container 50ee8e67e4e4\n ---> 89e89d96ec92\nStep 9/15 : RUN apk update && apk add --no-cache tzdata curl net-tools && cp -r -f /usr/share/zoneinfo/Asia/Shanghai /etc/localtime\n ---> Running in 2eac7ccbd418\nfetch https://mirrors.tuna.tsinghua.edu.cn/alpine/v3.14/main/x86_64/APKINDEX.tar.gz\nfetch https://mirrors.tuna.tsinghua.edu.cn/alpine/v3.14/community/x86_64/APKINDEX.tar.gz\nv3.14.8-161-g417a1aaf71 [https://mirrors.tuna.tsinghua.edu.cn/alpine/v3.14/main]\nv3.14.8-160-ga64feecdb9 [https://mirrors.tuna.tsinghua.edu.cn/alpine/v3.14/community]\nOK: 14967 distinct packages available\nfetch https://mirrors.tuna.tsinghua.edu.cn/alpine/v3.14/main/x86_64/APKINDEX.tar.gz\nfetch https://mirrors.tuna.tsinghua.edu.cn/alpine/v3.14/community/x86_64/APKINDEX.tar.gz\n(1/8) Installing ca-certificates (20220614-r0)\n(2/8) Installing brotli-libs (1.0.9-r5)\n(3/8) Installing nghttp2-libs (1.43.0-r0)\n(4/8) Installing libcurl (7.79.1-r4)\n(5/8) Installing curl (7.79.1-r4)\n(6/8) Installing mii-tool (1.60_git20140218-r2)\n(7/8) Installing net-tools (1.60_git20140218-r2)\n(8/8) Installing tzdata (2022f-r1)\nExecuting busybox-1.33.1-r3.trigger\nExecuting ca-certificates-20220614-r0.trigger\nOK: 11 MiB in 22 packages\nRemoving intermediate container 2eac7ccbd418\n ---> 8a1545c9c981\nStep 10/15 : RUN echo \"curl http://localhost:3000/metrics/prometheus\" > /app/README.md\n ---> Running in df0636f0a288\nRemoving intermediate container df0636f0a288\n ---> 6a91932c977a\nStep 11/15 : COPY --from=builder /app/run .\n ---> 45d98c71d3b9\nStep 12/15 : ENV TZ=Asia/Shanghai\n ---> Running in 32444964348e\nRemoving intermediate container 32444964348e\n ---> bf36bbc9c6f1\nStep 13/15 : EXPOSE 9060/udp\n ---> Running in cc055b8188a6\nRemoving intermediate container cc055b8188a6\n ---> 4afcc7ca4cb4\nStep 14/15 : EXPOSE 3000\n ---> Running in d0910239a6c6\nRemoving intermediate container d0910239a6c6\n ---> a7461ec6d601\nStep 15/15 : ENTRYPOINT [\"/app/run\"]\n ---> Running in 0fd7d5273331\nRemoving intermediate container 0fd7d5273331\n ---> af9ab29d1b3b\nSuccessfully built af9ab29d1b3b\nSuccessfully tagged siphub:latest\n","stderr":"","imageSize":25453081},"endTime":1672362901513}