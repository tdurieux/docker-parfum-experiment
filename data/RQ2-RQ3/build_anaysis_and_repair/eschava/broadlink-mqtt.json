{"repository":"https://github.com/eschava/broadlink-mqtt","dockerfilePath":"Dockerfile","startTime":1672554409983,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/eschava/broadlink-mqtt'...\n","error":null,"commit":"d16c9ee3893d8d560e62fd1e1cfbddad5a63d98a"},"originalBuild":{"startTimestamp":1672554410798,"endTimestamp":1672554636357,"error":null,"stdout":"Sending build context to Docker daemon  195.1kB\r\r\nStep 1/16 : FROM python:3.7.9\n3.7.9: Pulling from library/python\n0ecb575e629c: Pulling fs layer\n7467d1831b69: Pulling fs layer\nfeab2c490a3c: Pulling fs layer\nf15a0f46f8c3: Pulling fs layer\n937782447ff6: Pulling fs layer\ne78b7aaaab2c: Pulling fs layer\n5d8a97050e38: Pulling fs layer\nd36c23e9d08d: Pulling fs layer\nd39496292349: Pulling fs layer\n5d8a97050e38: Waiting\nd36c23e9d08d: Waiting\n937782447ff6: Waiting\nd39496292349: Waiting\ne78b7aaaab2c: Waiting\n7467d1831b69: Verifying Checksum\n7467d1831b69: Download complete\nfeab2c490a3c: Download complete\n0ecb575e629c: Verifying Checksum\n0ecb575e629c: Download complete\ne78b7aaaab2c: Verifying Checksum\ne78b7aaaab2c: Download complete\nf15a0f46f8c3: Verifying Checksum\nf15a0f46f8c3: Download complete\nd36c23e9d08d: Download complete\n5d8a97050e38: Verifying Checksum\n5d8a97050e38: Download complete\nd39496292349: Download complete\n937782447ff6: Verifying Checksum\n937782447ff6: Download complete\n0ecb575e629c: Pull complete\n7467d1831b69: Pull complete\nfeab2c490a3c: Pull complete\nf15a0f46f8c3: Pull complete\n937782447ff6: Pull complete\ne78b7aaaab2c: Pull complete\n5d8a97050e38: Pull complete\nd36c23e9d08d: Pull complete\nd39496292349: Pull complete\nDigest: sha256:7a2513d6225aecdf249b68f46dda559bcf5a82dc4850abd03620e465bb0bdf5a\nStatus: Downloaded newer image for python:3.7.9\n ---> 65d5b6c539fd\nStep 2/16 : RUN mkdir -p /opt/broadlink-mqtt\n ---> Running in bd8404466dc3\nRemoving intermediate container bd8404466dc3\n ---> bcdda856e9df\nStep 3/16 : WORKDIR /opt/broadlink-mqtt\n ---> Running in f6be60c04e73\nRemoving intermediate container f6be60c04e73\n ---> c305f277d492\nStep 4/16 : RUN mkdir -p /var/log/broadlink\n ---> Running in 5ad6bfb9a8c0\nRemoving intermediate container 5ad6bfb9a8c0\n ---> 7017cdef8194\nStep 5/16 : COPY ./requirements.txt /opt/broadlink-mqtt\n ---> 5d2b0d9c6588\nStep 6/16 : RUN pip install -r /opt/broadlink-mqtt/requirements.txt\n ---> Running in c28bebcdd517\nCollecting paho-mqtt\n  Downloading paho-mqtt-1.6.1.tar.gz (99 kB)\nCollecting broadlink>=0.15.0\n  Downloading broadlink-0.18.3-py3-none-any.whl (21 kB)\nCollecting cryptography>=3.2\n  Downloading cryptography-38.0.4-cp36-abi3-manylinux_2_28_x86_64.whl (4.2 MB)\nCollecting cffi>=1.12\n  Downloading cffi-1.15.1-cp37-cp37m-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (427 kB)\nCollecting pycparser\n  Downloading pycparser-2.21-py2.py3-none-any.whl (118 kB)\nBuilding wheels for collected packages: paho-mqtt\n  Building wheel for paho-mqtt (setup.py): started\n  Building wheel for paho-mqtt (setup.py): finished with status 'done'\n  Created wheel for paho-mqtt: filename=paho_mqtt-1.6.1-py3-none-any.whl size=62116 sha256=3a34efed69aa322d8d3cc20f5f92bb1c15d4735456b44854be77157ac21d1410\n  Stored in directory: /root/.cache/pip/wheels/d0/bf/ac/2b3f43f8c6fcd0f4ba5395397458c521eb0b52d33b574a5a40\nSuccessfully built paho-mqtt\nInstalling collected packages: pycparser, cffi, cryptography, paho-mqtt, broadlink\nSuccessfully installed broadlink-0.18.3 cffi-1.15.1 cryptography-38.0.4 paho-mqtt-1.6.1 pycparser-2.21\n\u001b[91mWARNING: You are using pip version 21.0.1; however, version 22.3.1 is available.\nYou should consider upgrading via the '/usr/local/bin/python -m pip install --upgrade pip' command.\n\u001b[0mRemoving intermediate container c28bebcdd517\n ---> c04413f586f2\nStep 7/16 : RUN groupadd -r broadlink && useradd -r -g broadlink broadlink\n ---> Running in fda1d025ceda\nRemoving intermediate container fda1d025ceda\n ---> 26cf363c18e4\nStep 8/16 : RUN chown -R broadlink:broadlink /opt/broadlink-mqtt\n ---> Running in b9041acadb80\nRemoving intermediate container b9041acadb80\n ---> 34fab6a1313f\nStep 9/16 : RUN chown -R broadlink:broadlink /var/log/broadlink\n ---> Running in 8f4e3492137b\nRemoving intermediate container 8f4e3492137b\n ---> 682ad63ae6c5\nStep 10/16 : USER broadlink\n ---> Running in 839473d149c1\nRemoving intermediate container 839473d149c1\n ---> d856fb8b2089\nStep 11/16 : VOLUME [\"/opt/broadlink-mqtt/conf\"]\n ---> Running in 109429dd1882\nRemoving intermediate container 109429dd1882\n ---> 5b65e6e9a6ef\nStep 12/16 : VOLUME [\"/opt/broadlink-mqtt/commands/\"]\n ---> Running in c4f4c3003e82\nRemoving intermediate container c4f4c3003e82\n ---> 8b9742ca66b7\nStep 13/16 : ENV BROADLINKMQTTCONFIG=\"/opt/broadlink-mqtt/conf/mqtt.conf\"\n ---> Running in 28b1a4f4bb6e\nRemoving intermediate container 28b1a4f4bb6e\n ---> d1259a7f5fd8\nStep 14/16 : ENV BROADLINKMQTTCONFIGCUSTOM=\"/opt/broadlink-mqtt/conf/custom.conf\"\n ---> Running in 4284d8538398\nRemoving intermediate container 4284d8538398\n ---> ee408ee7de62\nStep 15/16 : COPY . /opt/broadlink-mqtt\n ---> a8c9859a6c5e\nStep 16/16 : CMD python mqtt.py\n ---> Running in 015a74752f66\nRemoving intermediate container 015a74752f66\n ---> e12d9d23730c\nSuccessfully built e12d9d23730c\nSuccessfully tagged broadlink-mqtt:latest\n","stderr":"","imageSize":905092634},"repair":{"violations":[{"name":"pipUseNoCacheDir","position":{"start":13,"end":13,"columnStart":4,"columnEnd":55}}],"repairedDockerfile":"FROM python:3.7.9\n\n# based on https://github.com/pfichtner/docker-mqttwarn\n\n# install python libraries (TODO: any others?)\n#RUN pip install paho-mqtt broadlink\n\n# build /opt/mqttwarn\nRUN mkdir -p /opt/broadlink-mqtt\nWORKDIR /opt/broadlink-mqtt\nRUN mkdir -p /var/log/broadlink\n\nCOPY ./requirements.txt /opt/broadlink-mqtt\nRUN pip install --no-cache-dir -r /opt/broadlink-mqtt/requirements.txt\n\n\n# add user mqttwarn to image\nRUN groupadd -r broadlink && useradd -r -g broadlink broadlink\nRUN chown -R broadlink:broadlink /opt/broadlink-mqtt\nRUN chown -R broadlink:broadlink /var/log/broadlink\n#RUN chown -R broadlink /home/broadlink\n\n# process run as mqttwarn user\nUSER broadlink\n\n# conf file from host\nVOLUME [\"/opt/broadlink-mqtt/conf\"]\n\n# commands dir\nVOLUME [\"/opt/broadlink-mqtt/commands/\"]\n\n# set conf path\nENV BROADLINKMQTTCONFIG=\"/opt/broadlink-mqtt/conf/mqtt.conf\"\nENV BROADLINKMQTTCONFIGCUSTOM=\"/opt/broadlink-mqtt/conf/custom.conf\"\n\n# finally, copy the current code (ideally we'd copy only what we need, but it\n#  is not clear what that is, yet)\nCOPY . /opt/broadlink-mqtt\n\n# run process\nCMD python mqtt.py\n"},"repairedBuild":{"startTimestamp":1672554637041,"endTimestamp":1672554771859,"error":null,"stdout":"Sending build context to Docker daemon  195.1kB\r\r\nStep 1/16 : FROM python:3.7.9\n ---> 65d5b6c539fd\nStep 2/16 : RUN mkdir -p /opt/broadlink-mqtt\n ---> Running in 0bcb507c8b1e\nRemoving intermediate container 0bcb507c8b1e\n ---> 0498812e6da7\nStep 3/16 : WORKDIR /opt/broadlink-mqtt\n ---> Running in 786539427e2e\nRemoving intermediate container 786539427e2e\n ---> 6ae0d261e066\nStep 4/16 : RUN mkdir -p /var/log/broadlink\n ---> Running in 8afce9c911dd\nRemoving intermediate container 8afce9c911dd\n ---> 9b0aa3c2e89b\nStep 5/16 : COPY ./requirements.txt /opt/broadlink-mqtt\n ---> 2ba2100b97f2\nStep 6/16 : RUN pip install --no-cache-dir -r /opt/broadlink-mqtt/requirements.txt\n ---> Running in 68e944d1050f\nCollecting paho-mqtt\n  Downloading paho-mqtt-1.6.1.tar.gz (99 kB)\nCollecting broadlink>=0.15.0\n  Downloading broadlink-0.18.3-py3-none-any.whl (21 kB)\nCollecting cryptography>=3.2\n  Downloading cryptography-38.0.4-cp36-abi3-manylinux_2_28_x86_64.whl (4.2 MB)\nCollecting cffi>=1.12\n  Downloading cffi-1.15.1-cp37-cp37m-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (427 kB)\nCollecting pycparser\n  Downloading pycparser-2.21-py2.py3-none-any.whl (118 kB)\nBuilding wheels for collected packages: paho-mqtt\n  Building wheel for paho-mqtt (setup.py): started\n  Building wheel for paho-mqtt (setup.py): finished with status 'done'\n  Created wheel for paho-mqtt: filename=paho_mqtt-1.6.1-py3-none-any.whl size=62116 sha256=e42060b1ee1552efea66dd2644208ad5f2b421951e6491076056b47b97c8d758\n  Stored in directory: /tmp/pip-ephem-wheel-cache-8itamz13/wheels/d0/bf/ac/2b3f43f8c6fcd0f4ba5395397458c521eb0b52d33b574a5a40\nSuccessfully built paho-mqtt\nInstalling collected packages: pycparser, cffi, cryptography, paho-mqtt, broadlink\nSuccessfully installed broadlink-0.18.3 cffi-1.15.1 cryptography-38.0.4 paho-mqtt-1.6.1 pycparser-2.21\n\u001b[91mWARNING: You are using pip version 21.0.1; however, version 22.3.1 is available.\nYou should consider upgrading via the '/usr/local/bin/python -m pip install --upgrade pip' command.\n\u001b[0mRemoving intermediate container 68e944d1050f\n ---> a12431df0bce\nStep 7/16 : RUN groupadd -r broadlink && useradd -r -g broadlink broadlink\n ---> Running in f358c9930c87\nRemoving intermediate container f358c9930c87\n ---> 92decae9817a\nStep 8/16 : RUN chown -R broadlink:broadlink /opt/broadlink-mqtt\n ---> Running in 5ba390058c54\nRemoving intermediate container 5ba390058c54\n ---> 0131707d567d\nStep 9/16 : RUN chown -R broadlink:broadlink /var/log/broadlink\n ---> Running in 3fc97296b0e3\nRemoving intermediate container 3fc97296b0e3\n ---> 3cfc32ab0951\nStep 10/16 : USER broadlink\n ---> Running in eef90ed125a6\nRemoving intermediate container eef90ed125a6\n ---> 887d60f6a399\nStep 11/16 : VOLUME [\"/opt/broadlink-mqtt/conf\"]\n ---> Running in 3202b01de5ed\nRemoving intermediate container 3202b01de5ed\n ---> 35677057388a\nStep 12/16 : VOLUME [\"/opt/broadlink-mqtt/commands/\"]\n ---> Running in 4053b4ef98c5\nRemoving intermediate container 4053b4ef98c5\n ---> df003642d1df\nStep 13/16 : ENV BROADLINKMQTTCONFIG=\"/opt/broadlink-mqtt/conf/mqtt.conf\"\n ---> Running in b57916caea0f\nRemoving intermediate container b57916caea0f\n ---> 19fbbaec4a9a\nStep 14/16 : ENV BROADLINKMQTTCONFIGCUSTOM=\"/opt/broadlink-mqtt/conf/custom.conf\"\n ---> Running in 43ca20eaae25\nRemoving intermediate container 43ca20eaae25\n ---> 52b856f493a7\nStep 15/16 : COPY . /opt/broadlink-mqtt\n ---> 5642a901f37c\nStep 16/16 : CMD python mqtt.py\n ---> Running in 2a29c1525ff8\nRemoving intermediate container 2a29c1525ff8\n ---> b18a54163569\nSuccessfully built b18a54163569\nSuccessfully tagged broadlink-mqtt:latest\n","stderr":"","imageSize":899863064},"endTime":1672554772290}