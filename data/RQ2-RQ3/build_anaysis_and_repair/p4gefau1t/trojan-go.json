{"repository":"https://github.com/p4gefau1t/trojan-go","dockerfilePath":"Dockerfile","startTime":1673035724131,"endTime":1673035892503,"clone":{"startTime":1673035724131,"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/p4gefau1t/trojan-go'...\n","error":null,"endTime":1673035724952,"commit":"2dc60f52e79ff8b910e78e444f1e80678e936450"},"originalBuild":{"startTime":1673035725036,"endTime":1673035816877,"error":null,"stdout":"Sending build context to Docker daemon  1.023MB\r\r\nStep 1/13 : FROM golang:alpine AS builder\nalpine: Pulling from library/golang\nc158987b0551: Already exists\n019cfb932eb0: Already exists\na3a161a37303: Pulling fs layer\n3c6f08178a17: Pulling fs layer\n3c6f08178a17: Verifying Checksum\n3c6f08178a17: Download complete\na3a161a37303: Verifying Checksum\na3a161a37303: Download complete\na3a161a37303: Pull complete\n3c6f08178a17: Pull complete\nDigest: sha256:a9b24b67dc83b3383d22a14941c2b2b2ca6a103d805cac6820fd1355943beaf1\nStatus: Downloaded newer image for golang:alpine\n ---> cae57157ceaa\nStep 2/13 : WORKDIR /\n ---> Running in 7889c88c4fd8\nRemoving intermediate container 7889c88c4fd8\n ---> a31c4c45477b\nStep 3/13 : ARG REF\n ---> Running in 2c42a0812850\nRemoving intermediate container 2c42a0812850\n ---> 1e57ad884878\nStep 4/13 : RUN apk add git make &&    git clone https://github.com/p4gefau1t/trojan-go.git\n ---> Running in fa91cc58be3a\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/7) Installing brotli-libs (1.0.9-r9)\n(2/7) Installing nghttp2-libs (1.51.0-r0)\n(3/7) Installing libcurl (7.87.0-r0)\n(4/7) Installing libexpat (2.5.0-r0)\n(5/7) Installing pcre2 (10.42-r0)\n(6/7) Installing git (2.38.2-r0)\n(7/7) Installing make (4.3-r1)\nExecuting busybox-1.35.0-r29.trigger\nOK: 16 MiB in 23 packages\n\u001b[91mCloning into 'trojan-go'...\n\u001b[0mRemoving intermediate container fa91cc58be3a\n ---> bc592438567f\nStep 5/13 : RUN if [[ -z \"${REF}\" ]]; then         echo \"No specific commit provided, use the latest one.\"     ;else         echo \"Use commit ${REF}\" &&        cd trojan-go &&        git checkout ${REF}     ;fi\n ---> Running in 3529ef4d0d3b\nNo specific commit provided, use the latest one.\nRemoving intermediate container 3529ef4d0d3b\n ---> 1b1ba66f5541\nStep 6/13 : RUN cd trojan-go &&    make &&    wget https://github.com/v2fly/domain-list-community/raw/release/dlc.dat -O build/geosite.dat &&    wget https://github.com/v2fly/geoip/raw/release/geoip.dat -O build/geoip.dat &&    wget https://github.com/v2fly/geoip/raw/release/geoip-only-cn-private.dat -O build/geoip-only-cn-private.dat\n ---> Running in 7c1d463b0cde\nrm -rf build\nrm -f *.zip\nrm -f *.dat\nmkdir -p build\nenv CGO_ENABLED=0 go build -tags \"full\" -trimpath -ldflags=\"-s -w -buildid= -X github.com/p4gefau1t/trojan-go/constant.Version=`git describe --dirty` -X github.com/p4gefau1t/trojan-go/constant.Commit=`git rev-parse HEAD`\" -o build\n\u001b[91mgo: downloading github.com/txthinking/socks5 v0.0.0-20210716140126-fa1f52a8f2da\n\u001b[0m\u001b[91mgo: downloading golang.org/x/term v0.0.0-20210615171337-6886f2dfbf5b\n\u001b[0m\u001b[91mgo: downloading google.golang.org/grpc v1.40.0\n\u001b[0m\u001b[91mgo: downloading golang.org/x/net v0.0.0-20210913180222-943fd674d43e\n\u001b[0m\u001b[91mgo: downloading gopkg.in/yaml.v3 v3.0.0-20210107192922-496545a6307b\n\u001b[0m\u001b[91mgo: downloading google.golang.org/protobuf v1.27.1\n\u001b[0m\u001b[91mgo: downloading github.com/refraction-networking/utls v0.0.0-20210713165636-0b2885c8c0d4\n\u001b[0m\u001b[91mgo: downloading github.com/xtaci/smux v1.5.15\n\u001b[0m\u001b[91mgo: downloading github.com/v2fly/v2ray-core/v4 v4.42.1\n\u001b[0m\u001b[91mgo: downloading golang.org/x/time v0.0.0-20210723032227-1f47c861a9ac\n\u001b[0m\u001b[91mgo: downloading github.com/shadowsocks/go-shadowsocks2 v0.1.5\n\u001b[0m\u001b[91mgo: downloading github.com/go-sql-driver/mysql v1.6.0\n\u001b[0m\u001b[91mgo: downloading golang.org/x/sys v0.0.0-20210820121016-41cdb8703e55\n\u001b[0m\u001b[91mgo: downloading github.com/txthinking/x v0.0.0-20210326105829-476fab902fbe\ngo: downloading github.com/patrickmn/go-cache v2.1.0+incompatible\n\u001b[0m\u001b[91mgo: downloading github.com/txthinking/runnergroup v0.0.0-20210608031112-152c7c4432bf\n\u001b[0m\u001b[91mgo: downloading golang.org/x/crypto v0.0.0-20210817164053-32db794688a5\n\u001b[0m\u001b[91mgo: downloading github.com/riobard/go-bloom v0.0.0-20200614022211-cdc8013cb5b3\n\u001b[0m\u001b[91mgo: downloading github.com/golang/protobuf v1.5.2\n\u001b[0m\u001b[91mgo: downloading google.golang.org/genproto v0.0.0-20200526211855-cb27e3aa2013\n\u001b[0m\u001b[91mgo: downloading golang.org/x/text v0.3.6\n\u001b[0m\u001b[91mgo: downloading go.starlark.net v0.0.0-20210602144842-1cdb82c9e17a\n\u001b[0m\u001b[91mgo: downloading github.com/pires/go-proxyproto v0.6.0\n\u001b[0m\u001b[91mConnecting to github.com (140.82.121.3:443)\n\u001b[0m\u001b[91mConnecting to raw.githubusercontent.com (185.199.109.133:443)\n\u001b[0m\u001b[91msaving to 'build/geosite.dat'\n\u001b[0m\u001b[91mgeosite.dat          100% |********************************| 1468k  0:00:00 ETA\n'build/geosite.dat' saved\n\u001b[0m\u001b[91mConnecting to github.com (140.82.121.3:443)\n\u001b[0m\u001b[91mConnecting to raw.githubusercontent.com (185.199.109.133:443)\n\u001b[0m\u001b[91msaving to 'build/geoip.dat'\n\u001b[0m\u001b[91mgeoip.dat            100% |********************************| 9425k  0:00:00 ETA\n'build/geoip.dat' saved\n\u001b[0m\u001b[91mConnecting to github.com (140.82.121.3:443)\n\u001b[0m\u001b[91mConnecting to raw.githubusercontent.com (185.199.109.133:443)\n\u001b[0m\u001b[91msaving to 'build/geoip-only-cn-private.dat'\n\u001b[0m\u001b[91mgeoip-only-cn-privat 100% |********************************|  166k  0:00:00 ETA\n'build/geoip-only-cn-private.dat' saved\n\u001b[0mRemoving intermediate container 7c1d463b0cde\n ---> df90213af441\nStep 7/13 : FROM alpine\n ---> 49176f190c7e\nStep 8/13 : WORKDIR /\n ---> Running in e1d8149b776e\nRemoving intermediate container e1d8149b776e\n ---> 871c873011bb\nStep 9/13 : RUN apk add --no-cache tzdata ca-certificates\n ---> Running in 2052dc4b2170\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/2) Installing ca-certificates (20220614-r3)\n(2/2) Installing tzdata (2022f-r1)\nExecuting busybox-1.35.0-r29.trigger\nExecuting ca-certificates-20220614-r3.trigger\nOK: 11 MiB in 17 packages\nRemoving intermediate container 2052dc4b2170\n ---> 17e203f8e735\nStep 10/13 : COPY --from=builder /trojan-go/build /usr/local/bin/\n ---> a11ed87b6c4a\nStep 11/13 : COPY --from=builder /trojan-go/example/server.json /etc/trojan-go/config.json\n ---> ce6f59e2f0d0\nStep 12/13 : ENTRYPOINT [\"/usr/local/bin/trojan-go\", \"-config\"]\n ---> Running in 8c920ce1fedc\nRemoving intermediate container 8c920ce1fedc\n ---> 5dabd59205af\nStep 13/13 : CMD [\"/etc/trojan-go/config.json\"]\n ---> Running in 8208f69bf200\nRemoving intermediate container 8208f69bf200\n ---> 27685d3b4240\nSuccessfully built 27685d3b4240\nSuccessfully tagged trojan-go:latest\n","stderr":"","imageSize":33729556},"repair":{"startTime":1673035816942,"endTime":1673035817030,"violations":[{"name":"apkAddUseNoCache","position":{"start":3,"end":3,"columnStart":4,"columnEnd":20}}],"repairedDockerfile":"FROM golang:alpine AS builder\nWORKDIR /\nARG REF\nRUN apk add --no-cache git make && \\\n    git clone https://github.com/p4gefau1t/trojan-go.git\nRUN if [[ -z \"${REF}\" ]]; then \\\n        echo \"No specific commit provided, use the latest one.\" \\\n    ;else \\\n        echo \"Use commit ${REF}\" &&\\\n        cd trojan-go &&\\\n        git checkout ${REF} \\\n    ;fi\nRUN cd trojan-go &&\\\n    make &&\\\n    wget https://github.com/v2fly/domain-list-community/raw/release/dlc.dat -O build/geosite.dat &&\\\n    wget https://github.com/v2fly/geoip/raw/release/geoip.dat -O build/geoip.dat &&\\\n    wget https://github.com/v2fly/geoip/raw/release/geoip-only-cn-private.dat -O build/geoip-only-cn-private.dat\n\nFROM alpine\nWORKDIR /\nRUN apk add --no-cache tzdata ca-certificates\nCOPY --from=builder /trojan-go/build /usr/local/bin/\nCOPY --from=builder /trojan-go/example/server.json /etc/trojan-go/config.json\n\nENTRYPOINT [\"/usr/local/bin/trojan-go\", \"-config\"]\nCMD [\"/etc/trojan-go/config.json\"]\n"},"repairedBuild":{"startTime":1673035817214,"endTime":1673035892247,"error":null,"stdout":"Sending build context to Docker daemon  1.023MB\r\r\nStep 1/13 : FROM golang:alpine AS builder\n ---> cae57157ceaa\nStep 2/13 : WORKDIR /\n ---> Running in 3ccb8603bff4\nRemoving intermediate container 3ccb8603bff4\n ---> 1b714c56ecbe\nStep 3/13 : ARG REF\n ---> Running in 7fb43767cacd\nRemoving intermediate container 7fb43767cacd\n ---> 3c3ebe1c58ff\nStep 4/13 : RUN apk add --no-cache git make &&     git clone https://github.com/p4gefau1t/trojan-go.git\n ---> Running in 560fd9e45885\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/7) Installing brotli-libs (1.0.9-r9)\n(2/7) Installing nghttp2-libs (1.51.0-r0)\n(3/7) Installing libcurl (7.87.0-r0)\n(4/7) Installing libexpat (2.5.0-r0)\n(5/7) Installing pcre2 (10.42-r0)\n(6/7) Installing git (2.38.2-r0)\n(7/7) Installing make (4.3-r1)\nExecuting busybox-1.35.0-r29.trigger\nOK: 16 MiB in 23 packages\n\u001b[91mCloning into 'trojan-go'...\n\u001b[0mRemoving intermediate container 560fd9e45885\n ---> f45f5703f082\nStep 5/13 : RUN if [[ -z \"${REF}\" ]]; then         echo \"No specific commit provided, use the latest one.\"     ;else         echo \"Use commit ${REF}\" &&        cd trojan-go &&        git checkout ${REF}     ;fi\n ---> Running in f1eb375721d5\nNo specific commit provided, use the latest one.\nRemoving intermediate container f1eb375721d5\n ---> 305a953e0cfc\nStep 6/13 : RUN cd trojan-go &&    make &&    wget https://github.com/v2fly/domain-list-community/raw/release/dlc.dat -O build/geosite.dat &&    wget https://github.com/v2fly/geoip/raw/release/geoip.dat -O build/geoip.dat &&    wget https://github.com/v2fly/geoip/raw/release/geoip-only-cn-private.dat -O build/geoip-only-cn-private.dat\n ---> Running in c003240e08f9\nrm -rf build\nrm -f *.zip\nrm -f *.dat\nmkdir -p build\nenv CGO_ENABLED=0 go build -tags \"full\" -trimpath -ldflags=\"-s -w -buildid= -X github.com/p4gefau1t/trojan-go/constant.Version=`git describe --dirty` -X github.com/p4gefau1t/trojan-go/constant.Commit=`git rev-parse HEAD`\" -o build\n\u001b[91mgo: downloading google.golang.org/grpc v1.40.0\n\u001b[0m\u001b[91mgo: downloading gopkg.in/yaml.v3 v3.0.0-20210107192922-496545a6307b\n\u001b[0m\u001b[91mgo: downloading golang.org/x/time v0.0.0-20210723032227-1f47c861a9ac\n\u001b[0m\u001b[91mgo: downloading github.com/go-sql-driver/mysql v1.6.0\n\u001b[0m\u001b[91mgo: downloading github.com/xtaci/smux v1.5.15\n\u001b[0m\u001b[91mgo: downloading github.com/txthinking/socks5 v0.0.0-20210716140126-fa1f52a8f2da\n\u001b[0m\u001b[91mgo: downloading golang.org/x/net v0.0.0-20210913180222-943fd674d43e\n\u001b[0m\u001b[91mgo: downloading google.golang.org/protobuf v1.27.1\n\u001b[0m\u001b[91mgo: downloading github.com/shadowsocks/go-shadowsocks2 v0.1.5\n\u001b[0m\u001b[91mgo: downloading github.com/v2fly/v2ray-core/v4 v4.42.1\n\u001b[0m\u001b[91mgo: downloading golang.org/x/term v0.0.0-20210615171337-6886f2dfbf5b\n\u001b[0m\u001b[91mgo: downloading github.com/refraction-networking/utls v0.0.0-20210713165636-0b2885c8c0d4\n\u001b[0m\u001b[91mgo: downloading golang.org/x/sys v0.0.0-20210820121016-41cdb8703e55\n\u001b[0m\u001b[91mgo: downloading github.com/txthinking/runnergroup v0.0.0-20210608031112-152c7c4432bf\n\u001b[0m\u001b[91mgo: downloading github.com/patrickmn/go-cache v2.1.0+incompatible\n\u001b[0m\u001b[91mgo: downloading github.com/txthinking/x v0.0.0-20210326105829-476fab902fbe\n\u001b[0m\u001b[91mgo: downloading golang.org/x/crypto v0.0.0-20210817164053-32db794688a5\ngo: downloading github.com/riobard/go-bloom v0.0.0-20200614022211-cdc8013cb5b3\n\u001b[0m\u001b[91mgo: downloading google.golang.org/genproto v0.0.0-20200526211855-cb27e3aa2013\n\u001b[0m\u001b[91mgo: downloading github.com/golang/protobuf v1.5.2\n\u001b[0m\u001b[91mgo: downloading golang.org/x/text v0.3.6\n\u001b[0m\u001b[91mgo: downloading go.starlark.net v0.0.0-20210602144842-1cdb82c9e17a\n\u001b[0m\u001b[91mgo: downloading github.com/pires/go-proxyproto v0.6.0\n\u001b[0m\u001b[91mConnecting to github.com (140.82.121.4:443)\n\u001b[0m\u001b[91mConnecting to raw.githubusercontent.com (185.199.108.133:443)\n\u001b[0m\u001b[91msaving to 'build/geosite.dat'\n\u001b[0m\u001b[91mgeosite.dat          100% |********************************| 1468k  0:00:00 ETA\n'build/geosite.dat' saved\n\u001b[0m\u001b[91mConnecting to github.com (140.82.121.4:443)\n\u001b[0m\u001b[91mConnecting to raw.githubusercontent.com (185.199.109.133:443)\n\u001b[0m\u001b[91msaving to 'build/geoip.dat'\n\u001b[0m\u001b[91mgeoip.dat            100% |********************************| 9425k  0:00:00 ETA\n'build/geoip.dat' saved\n\u001b[0m\u001b[91mConnecting to github.com (140.82.121.4:443)\n\u001b[0m\u001b[91mConnecting to raw.githubusercontent.com (185.199.110.133:443)\n\u001b[0m\u001b[91msaving to 'build/geoip-only-cn-private.dat'\n\u001b[0m\u001b[91mgeoip-only-cn-privat 100% |********************************|  166k  0:00:00 ETA\n'build/geoip-only-cn-private.dat' saved\n\u001b[0mRemoving intermediate container c003240e08f9\n ---> c12a6dbc6d87\nStep 7/13 : FROM alpine\n ---> 49176f190c7e\nStep 8/13 : WORKDIR /\n ---> Running in bbc21b008811\nRemoving intermediate container bbc21b008811\n ---> d7868d9aa6d8\nStep 9/13 : RUN apk add --no-cache tzdata ca-certificates\n ---> Running in d0627b2e1568\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/2) Installing ca-certificates (20220614-r3)\n(2/2) Installing tzdata (2022f-r1)\nExecuting busybox-1.35.0-r29.trigger\nExecuting ca-certificates-20220614-r3.trigger\nOK: 11 MiB in 17 packages\nRemoving intermediate container d0627b2e1568\n ---> fc747a6d3f24\nStep 10/13 : COPY --from=builder /trojan-go/build /usr/local/bin/\n ---> 38da6e0a2b57\nStep 11/13 : COPY --from=builder /trojan-go/example/server.json /etc/trojan-go/config.json\n ---> e85b777a4e52\nStep 12/13 : ENTRYPOINT [\"/usr/local/bin/trojan-go\", \"-config\"]\n ---> Running in 5830021c8b1b\nRemoving intermediate container 5830021c8b1b\n ---> d6ce4a85dc13\nStep 13/13 : CMD [\"/etc/trojan-go/config.json\"]\n ---> Running in 0b4817815145\nRemoving intermediate container 0b4817815145\n ---> a2f461684e65\nSuccessfully built a2f461684e65\nSuccessfully tagged trojan-go:latest\n","stderr":"","imageSize":33729556}}