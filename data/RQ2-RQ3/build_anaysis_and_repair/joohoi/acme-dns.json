{"repository":"https://github.com/joohoi/acme-dns","dockerfilePath":"Dockerfile","startTime":1672186141190,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/joohoi/acme-dns'...\n","error":null,"commit":"6ba9360156b8658dbbd652eea100c11cc098b1f8"},"originalBuild":{"startTimestamp":1672186142185,"endTimestamp":1672186240459,"error":null,"stdout":"Sending build context to Docker daemon  359.4kB\r\r\nStep 1/18 : FROM golang:alpine AS builder\nalpine: Pulling from library/golang\nc158987b0551: Already exists\n019cfb932eb0: Pulling fs layer\na3a161a37303: Pulling fs layer\n3c6f08178a17: Pulling fs layer\n3c6f08178a17: Verifying Checksum\n3c6f08178a17: Download complete\n019cfb932eb0: Download complete\n019cfb932eb0: Pull complete\na3a161a37303: Verifying Checksum\na3a161a37303: Download complete\na3a161a37303: Pull complete\n3c6f08178a17: Pull complete\nDigest: sha256:a9b24b67dc83b3383d22a14941c2b2b2ca6a103d805cac6820fd1355943beaf1\nStatus: Downloaded newer image for golang:alpine\n ---> cae57157ceaa\nStep 2/18 : LABEL maintainer=\"joona@kuori.org\"\n ---> Running in 1cc358a5f1e5\nRemoving intermediate container 1cc358a5f1e5\n ---> 1c3428655252\nStep 3/18 : RUN apk add --update gcc musl-dev git\n ---> Running in 534fcbfb1196\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/17) Installing libgcc (12.2.1_git20220924-r4)\n(2/17) Installing libstdc++ (12.2.1_git20220924-r4)\n(3/17) Installing binutils (2.39-r2)\n(4/17) Installing libgomp (12.2.1_git20220924-r4)\n(5/17) Installing libatomic (12.2.1_git20220924-r4)\n(6/17) Installing gmp (6.2.1-r2)\n(7/17) Installing isl25 (0.25-r0)\n(8/17) Installing mpfr4 (4.1.0-r0)\n(9/17) Installing mpc1 (1.2.1-r1)\n(10/17) Installing gcc (12.2.1_git20220924-r4)\n(11/17) Installing brotli-libs (1.0.9-r9)\n(12/17) Installing nghttp2-libs (1.51.0-r0)\n(13/17) Installing libcurl (7.87.0-r0)\n(14/17) Installing libexpat (2.5.0-r0)\n(15/17) Installing pcre2 (10.42-r0)\n(16/17) Installing git (2.38.2-r0)\n(17/17) Installing musl-dev (1.2.3-r4)\nExecuting busybox-1.35.0-r29.trigger\nOK: 161 MiB in 33 packages\nRemoving intermediate container 534fcbfb1196\n ---> e353225e73c8\nStep 4/18 : ENV GOPATH /tmp/buildcache\n ---> Running in 80db27d80214\nRemoving intermediate container 80db27d80214\n ---> ea3a942160d4\nStep 5/18 : RUN git clone https://github.com/joohoi/acme-dns /tmp/acme-dns\n ---> Running in 651487f44a16\n\u001b[91mCloning into '/tmp/acme-dns'...\n\u001b[0mRemoving intermediate container 651487f44a16\n ---> f946bf09186a\nStep 6/18 : WORKDIR /tmp/acme-dns\n ---> Running in 91b37fd80e05\nRemoving intermediate container 91b37fd80e05\n ---> 341a8e0aa4fb\nStep 7/18 : RUN CGO_ENABLED=1 go build\n ---> Running in 55df7c20b3ed\n\u001b[91mgo: downloading github.com/mattn/go-sqlite3 v1.14.14\ngo: downloading github.com/BurntSushi/toml v1.2.0\ngo: downloading github.com/caddyserver/certmagic v0.16.2\n\u001b[0m\u001b[91mgo: downloading github.com/julienschmidt/httprouter v1.3.0\n\u001b[0m\u001b[91mgo: downloading github.com/lib/pq v1.10.6\n\u001b[0m\u001b[91mgo: downloading github.com/google/uuid v1.3.0\n\u001b[0m\u001b[91mgo: downloading github.com/sirupsen/logrus v1.9.0\n\u001b[0m\u001b[91mgo: downloading github.com/miekg/dns v1.1.50\n\u001b[0m\u001b[91mgo: downloading golang.org/x/crypto v0.0.0-20220722155217-630584e8d5aa\ngo: downloading github.com/mholt/acmez v1.0.4\n\u001b[0m\u001b[91mgo: downloading github.com/go-acme/lego/v3 v3.9.0\n\u001b[0m\u001b[91mgo: downloading github.com/rs/cors v1.8.2\n\u001b[0m\u001b[91mgo: downloading golang.org/x/sys v0.0.0-20220808155132-1c4a2a72c664\n\u001b[0m\u001b[91mgo: downloading go.uber.org/zap v1.22.0\n\u001b[0m\u001b[91mgo: downloading golang.org/x/net v0.0.0-20220809184613-07c6da5e1ced\n\u001b[0m\u001b[91mgo: downloading github.com/klauspost/cpuid/v2 v2.1.0\n\u001b[0m\u001b[91mgo: downloading github.com/libdns/libdns v0.2.1\n\u001b[0m\u001b[91mgo: downloading go.uber.org/multierr v1.8.0\ngo: downloading go.uber.org/atomic v1.9.0\n\u001b[0m\u001b[91mgo: downloading golang.org/x/text v0.3.7\n\u001b[0mRemoving intermediate container 55df7c20b3ed\n ---> f92eb551853f\nStep 8/18 : FROM alpine:latest\n ---> 49176f190c7e\nStep 9/18 : WORKDIR /root/\n ---> Running in 6391ed690948\nRemoving intermediate container 6391ed690948\n ---> fab79c667e8f\nStep 10/18 : COPY --from=builder /tmp/acme-dns .\n ---> 93976b5f8200\nStep 11/18 : RUN mkdir -p /etc/acme-dns\n ---> Running in 590850416b07\nRemoving intermediate container 590850416b07\n ---> de97556c8978\nStep 12/18 : RUN mkdir -p /var/lib/acme-dns\n ---> Running in 515af3bb97c3\nRemoving intermediate container 515af3bb97c3\n ---> 863b464e7a17\nStep 13/18 : RUN rm -rf ./config.cfg\n ---> Running in 048319d6b8c0\nRemoving intermediate container 048319d6b8c0\n ---> dc9e0741f9b3\nStep 14/18 : RUN apk --no-cache add ca-certificates && update-ca-certificates\n ---> Running in 532203b2b947\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/1) Installing ca-certificates (20220614-r3)\nExecuting busybox-1.35.0-r29.trigger\nExecuting ca-certificates-20220614-r3.trigger\nOK: 8 MiB in 16 packages\n\u001b[91mWARNING: ca-certificates.crt does not contain exactly one certificate or CRL: skipping\n\u001b[0mRemoving intermediate container 532203b2b947\n ---> cd7d36174142\nStep 15/18 : VOLUME [\"/etc/acme-dns\", \"/var/lib/acme-dns\"]\n ---> Running in 2b08ec07ac97\nRemoving intermediate container 2b08ec07ac97\n ---> 5e6c0f90a8c1\nStep 16/18 : ENTRYPOINT [\"./acme-dns\"]\n ---> Running in fc6fee4e9e4d\nRemoving intermediate container fc6fee4e9e4d\n ---> ca63bef7e426\nStep 17/18 : EXPOSE 53 80 443\n ---> Running in 1553c346707b\nRemoving intermediate container 1553c346707b\n ---> ae80a0d71888\nStep 18/18 : EXPOSE 53/udp\n ---> Running in 7bcc97fe0bb3\nRemoving intermediate container 7bcc97fe0bb3\n ---> 5322b2302af8\nSuccessfully built 5322b2302af8\nSuccessfully tagged acme-dns:latest\n","stderr":"","imageSize":51741692},"repair":{"violations":[{"name":"apkAddUseNoCache","position":{"start":3,"end":3,"columnStart":4,"columnEnd":37}}],"repairedDockerfile":"FROM golang:alpine AS builder\nLABEL maintainer=\"joona@kuori.org\"\n\nRUN apk add --no-cache --update gcc musl-dev git\n\nENV GOPATH /tmp/buildcache\nRUN git clone https://github.com/joohoi/acme-dns /tmp/acme-dns\nWORKDIR /tmp/acme-dns\nRUN CGO_ENABLED=1 go build\n\nFROM alpine:latest\n\nWORKDIR /root/\nCOPY --from=builder /tmp/acme-dns .\nRUN mkdir -p /etc/acme-dns\nRUN mkdir -p /var/lib/acme-dns\nRUN rm -rf ./config.cfg\nRUN apk --no-cache add ca-certificates && update-ca-certificates\n\nVOLUME [\"/etc/acme-dns\", \"/var/lib/acme-dns\"]\nENTRYPOINT [\"./acme-dns\"]\nEXPOSE 53 80 443\nEXPOSE 53/udp\n"},"repairedBuild":{"startTimestamp":1672186240850,"endTimestamp":1672186331637,"error":null,"stdout":"Sending build context to Docker daemon  359.4kB\r\r\nStep 1/18 : FROM golang:alpine AS builder\n ---> cae57157ceaa\nStep 2/18 : LABEL maintainer=\"joona@kuori.org\"\n ---> Running in 8296f875ab22\nRemoving intermediate container 8296f875ab22\n ---> 50f196d9efb4\nStep 3/18 : RUN apk add --no-cache --update gcc musl-dev git\n ---> Running in 30f84bf0c287\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/17) Installing libgcc (12.2.1_git20220924-r4)\n(2/17) Installing libstdc++ (12.2.1_git20220924-r4)\n(3/17) Installing binutils (2.39-r2)\n(4/17) Installing libgomp (12.2.1_git20220924-r4)\n(5/17) Installing libatomic (12.2.1_git20220924-r4)\n(6/17) Installing gmp (6.2.1-r2)\n(7/17) Installing isl25 (0.25-r0)\n(8/17) Installing mpfr4 (4.1.0-r0)\n(9/17) Installing mpc1 (1.2.1-r1)\n(10/17) Installing gcc (12.2.1_git20220924-r4)\n(11/17) Installing brotli-libs (1.0.9-r9)\n(12/17) Installing nghttp2-libs (1.51.0-r0)\n(13/17) Installing libcurl (7.87.0-r0)\n(14/17) Installing libexpat (2.5.0-r0)\n(15/17) Installing pcre2 (10.42-r0)\n(16/17) Installing git (2.38.2-r0)\n(17/17) Installing musl-dev (1.2.3-r4)\nExecuting busybox-1.35.0-r29.trigger\nOK: 161 MiB in 33 packages\nRemoving intermediate container 30f84bf0c287\n ---> 074ba4fe99c7\nStep 4/18 : ENV GOPATH /tmp/buildcache\n ---> Running in 4d318594bd06\nRemoving intermediate container 4d318594bd06\n ---> 35d89ab46b65\nStep 5/18 : RUN git clone https://github.com/joohoi/acme-dns /tmp/acme-dns\n ---> Running in 0e950aa8de11\n\u001b[91mCloning into '/tmp/acme-dns'...\n\u001b[0mRemoving intermediate container 0e950aa8de11\n ---> 6b092e7807b8\nStep 6/18 : WORKDIR /tmp/acme-dns\n ---> Running in 1e711071457c\nRemoving intermediate container 1e711071457c\n ---> 55c43a4f025d\nStep 7/18 : RUN CGO_ENABLED=1 go build\n ---> Running in c31dc7d26e99\n\u001b[91mgo: downloading github.com/BurntSushi/toml v1.2.0\n\u001b[0m\u001b[91mgo: downloading github.com/mattn/go-sqlite3 v1.14.14\n\u001b[0m\u001b[91mgo: downloading github.com/lib/pq v1.10.6\n\u001b[0m\u001b[91mgo: downloading github.com/rs/cors v1.8.2\ngo: downloading github.com/julienschmidt/httprouter v1.3.0\n\u001b[0m\u001b[91mgo: downloading github.com/google/uuid v1.3.0\n\u001b[0m\u001b[91mgo: downloading github.com/go-acme/lego/v3 v3.9.0\ngo: downloading github.com/caddyserver/certmagic v0.16.2\n\u001b[0m\u001b[91mgo: downloading github.com/miekg/dns v1.1.50\ngo: downloading github.com/mholt/acmez v1.0.4\n\u001b[0m\u001b[91mgo: downloading github.com/sirupsen/logrus v1.9.0\n\u001b[0m\u001b[91mgo: downloading golang.org/x/crypto v0.0.0-20220722155217-630584e8d5aa\n\u001b[0m\u001b[91mgo: downloading go.uber.org/zap v1.22.0\n\u001b[0m\u001b[91mgo: downloading golang.org/x/net v0.0.0-20220809184613-07c6da5e1ced\ngo: downloading github.com/libdns/libdns v0.2.1\n\u001b[0m\u001b[91mgo: downloading github.com/klauspost/cpuid/v2 v2.1.0\n\u001b[0m\u001b[91mgo: downloading golang.org/x/sys v0.0.0-20220808155132-1c4a2a72c664\n\u001b[0m\u001b[91mgo: downloading go.uber.org/atomic v1.9.0\ngo: downloading go.uber.org/multierr v1.8.0\n\u001b[0m\u001b[91mgo: downloading golang.org/x/text v0.3.7\n\u001b[0mRemoving intermediate container c31dc7d26e99\n ---> b2a3ca963071\nStep 8/18 : FROM alpine:latest\n ---> 49176f190c7e\nStep 9/18 : WORKDIR /root/\n ---> Running in 37ad3b26a37a\nRemoving intermediate container 37ad3b26a37a\n ---> 396217fb018b\nStep 10/18 : COPY --from=builder /tmp/acme-dns .\n ---> 9953ae4b7991\nStep 11/18 : RUN mkdir -p /etc/acme-dns\n ---> Running in 79c1cf075f40\nRemoving intermediate container 79c1cf075f40\n ---> 68d6b3e8b136\nStep 12/18 : RUN mkdir -p /var/lib/acme-dns\n ---> Running in 0d5c8e16188d\nRemoving intermediate container 0d5c8e16188d\n ---> 618242f2dd35\nStep 13/18 : RUN rm -rf ./config.cfg\n ---> Running in dea3edbebc88\nRemoving intermediate container dea3edbebc88\n ---> 5352c1fe0cee\nStep 14/18 : RUN apk --no-cache add ca-certificates && update-ca-certificates\n ---> Running in 0dfb68d653c8\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/1) Installing ca-certificates (20220614-r3)\nExecuting busybox-1.35.0-r29.trigger\nExecuting ca-certificates-20220614-r3.trigger\nOK: 8 MiB in 16 packages\n\u001b[91mWARNING: ca-certificates.crt does not contain exactly one certificate or CRL: skipping\n\u001b[0mRemoving intermediate container 0dfb68d653c8\n ---> ffa0d42fe43d\nStep 15/18 : VOLUME [\"/etc/acme-dns\", \"/var/lib/acme-dns\"]\n ---> Running in ee2870e1a863\nRemoving intermediate container ee2870e1a863\n ---> b1162517d1ae\nStep 16/18 : ENTRYPOINT [\"./acme-dns\"]\n ---> Running in 5507f6743a30\nRemoving intermediate container 5507f6743a30\n ---> 3263da3d0b88\nStep 17/18 : EXPOSE 53 80 443\n ---> Running in a112a61586f8\nRemoving intermediate container a112a61586f8\n ---> 04c0a609300c\nStep 18/18 : EXPOSE 53/udp\n ---> Running in 4d2a252ba759\nRemoving intermediate container 4d2a252ba759\n ---> 8723fb760f75\nSuccessfully built 8723fb760f75\nSuccessfully tagged acme-dns:latest\n","stderr":"","imageSize":51741692},"endTime":1672186331916}