{"repository":"https://github.com/kylemanna/docker-openvpn","dockerfilePath":"Dockerfile","startTime":1672248073634,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/kylemanna/docker-openvpn'...\n","error":null,"commit":"1228577d4598762285958ad98724ab37e7b11354"},"originalBuild":{"startTimestamp":1672248074454,"endTimestamp":1672248099985,"error":null,"stdout":"Sending build context to Docker daemon  349.7kB\r\r\nStep 1/11 : FROM alpine:latest\n ---> 49176f190c7e\nStep 2/11 : LABEL maintainer=\"Kyle Manna <kyle@kylemanna.com>\"\n ---> Running in 4f0324a59107\nRemoving intermediate container 4f0324a59107\n ---> 5689998bc9eb\nStep 3/11 : RUN echo \"http://dl-cdn.alpinelinux.org/alpine/edge/testing/\" >> /etc/apk/repositories &&     apk add --update openvpn iptables bash easy-rsa openvpn-auth-pam google-authenticator pamtester libqrencode &&     ln -s /usr/share/easy-rsa/easyrsa /usr/local/bin &&     rm -rf /tmp/* /var/tmp/* /var/cache/apk/* /var/cache/distfiles/*\n ---> Running in 23067a0a8575\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/edge/testing/x86_64/APKINDEX.tar.gz\n(1/23) Installing ncurses-terminfo-base (6.3_p20221119-r0)\n(2/23) Installing ncurses-libs (6.3_p20221119-r0)\n(3/23) Installing readline (8.2.0-r0)\n(4/23) Installing bash (5.2.15-r0)\nExecuting bash-5.2.15-r0.post-install\n(5/23) Installing openssl (3.0.7-r0)\n(6/23) Installing easy-rsa (3.1.1-r0)\n(7/23) Installing linux-pam (1.5.2-r1)\n(8/23) Installing google-authenticator (1.09-r2)\n(9/23) Installing libmnl (1.0.5-r0)\n(10/23) Installing libnftnl (1.2.4-r0)\n(11/23) Installing iptables (1.8.8-r2)\n(12/23) Installing libpng (1.6.38-r0)\n(13/23) Installing libqrencode (4.1.1-r1)\n(14/23) Installing libcap2 (2.66-r0)\n(15/23) Installing libbz2 (1.0.8-r4)\n(16/23) Installing musl-fts (1.2.7-r3)\n(17/23) Installing xz-libs (5.2.9-r0)\n(18/23) Installing libelf (0.187-r2)\n(19/23) Installing iproute2-minimal (6.0.0-r1)\n(20/23) Installing lzo (2.10-r3)\n(21/23) Installing openvpn (2.5.8-r0)\nExecuting openvpn-2.5.8-r0.pre-install\n(22/23) Installing openvpn-auth-pam (2.5.8-r0)\n(23/23) Installing pamtester (0.1.2-r3)\nExecuting busybox-1.35.0-r29.trigger\nOK: 17 MiB in 38 packages\nRemoving intermediate container 23067a0a8575\n ---> ae0be0131add\nStep 4/11 : ENV OPENVPN=/etc/openvpn\n ---> Running in 4c0cf5ecfcd4\nRemoving intermediate container 4c0cf5ecfcd4\n ---> 12e934fd4a8c\nStep 5/11 : ENV EASYRSA=/usr/share/easy-rsa     EASYRSA_CRL_DAYS=3650     EASYRSA_PKI=$OPENVPN/pki\n ---> Running in 06aac7b63604\nRemoving intermediate container 06aac7b63604\n ---> de49c5024ca9\nStep 6/11 : VOLUME [\"/etc/openvpn\"]\n ---> Running in 4cde3dbb4107\nRemoving intermediate container 4cde3dbb4107\n ---> d8151532e601\nStep 7/11 : EXPOSE 1194/udp\n ---> Running in 1f3435e09236\nRemoving intermediate container 1f3435e09236\n ---> fdc2bdb6147f\nStep 8/11 : CMD [\"ovpn_run\"]\n ---> Running in 04c2205e9d24\nRemoving intermediate container 04c2205e9d24\n ---> f9b028590f33\nStep 9/11 : ADD ./bin /usr/local/bin\n ---> 41a54c71c65a\nStep 10/11 : RUN chmod a+x /usr/local/bin/*\n ---> Running in 77ff206fd921\nRemoving intermediate container 77ff206fd921\n ---> 634007e1647d\nStep 11/11 : ADD ./otp/openvpn /etc/pam.d/\n ---> 7af2b53ab175\nSuccessfully built 7af2b53ab175\nSuccessfully tagged docker-openvpn:latest\n","stderr":"","imageSize":16475362},"repair":{"violations":[{"name":"apkAddUseNoCache","position":{"start":9,"end":9,"columnStart":4,"columnEnd":111}}],"repairedDockerfile":"# Original credit: https://github.com/jpetazzo/dockvpn\n\n# Smallest base image\nFROM alpine:latest\n\nLABEL maintainer=\"Kyle Manna <kyle@kylemanna.com>\"\n\n# Testing: pamtester\nRUN echo \"http://dl-cdn.alpinelinux.org/alpine/edge/testing/\" >> /etc/apk/repositories && \\\n    apk add --no-cache --update openvpn iptables bash easy-rsa openvpn-auth-pam google-authenticator pamtester libqrencode && \\\n    ln -s /usr/share/easy-rsa/easyrsa /usr/local/bin && \\\n    rm -rf /tmp/* /var/tmp/* /var/cache/apk/* /var/cache/distfiles/*\n\n# Needed by scripts\nENV OPENVPN=/etc/openvpn\nENV EASYRSA=/usr/share/easy-rsa \\\n    EASYRSA_CRL_DAYS=3650 \\\n    EASYRSA_PKI=$OPENVPN/pki\n\nVOLUME [\"/etc/openvpn\"]\n\n# Internally uses port 1194/udp, remap using `docker run -p 443:1194/tcp`\nEXPOSE 1194/udp\n\nCMD [\"ovpn_run\"]\n\nADD ./bin /usr/local/bin\nRUN chmod a+x /usr/local/bin/*\n\n# Add support for OTP authentication using a PAM module\nADD ./otp/openvpn /etc/pam.d/\n"},"repairedBuild":{"startTimestamp":1672248100287,"endTimestamp":1672248119526,"error":null,"stdout":"Sending build context to Docker daemon  349.7kB\r\r\nStep 1/11 : FROM alpine:latest\n ---> 49176f190c7e\nStep 2/11 : LABEL maintainer=\"Kyle Manna <kyle@kylemanna.com>\"\n ---> Running in 148c57531be9\nRemoving intermediate container 148c57531be9\n ---> 3bf62271f9e4\nStep 3/11 : RUN echo \"http://dl-cdn.alpinelinux.org/alpine/edge/testing/\" >> /etc/apk/repositories &&     apk add --no-cache --update openvpn iptables bash easy-rsa openvpn-auth-pam google-authenticator pamtester libqrencode &&     ln -s /usr/share/easy-rsa/easyrsa /usr/local/bin &&     rm -rf /tmp/* /var/tmp/* /var/cache/apk/* /var/cache/distfiles/*\n ---> Running in 3c1108d15e89\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/edge/testing/x86_64/APKINDEX.tar.gz\n(1/23) Installing ncurses-terminfo-base (6.3_p20221119-r0)\n(2/23) Installing ncurses-libs (6.3_p20221119-r0)\n(3/23) Installing readline (8.2.0-r0)\n(4/23) Installing bash (5.2.15-r0)\nExecuting bash-5.2.15-r0.post-install\n(5/23) Installing openssl (3.0.7-r0)\n(6/23) Installing easy-rsa (3.1.1-r0)\n(7/23) Installing linux-pam (1.5.2-r1)\n(8/23) Installing google-authenticator (1.09-r2)\n(9/23) Installing libmnl (1.0.5-r0)\n(10/23) Installing libnftnl (1.2.4-r0)\n(11/23) Installing iptables (1.8.8-r2)\n(12/23) Installing libpng (1.6.38-r0)\n(13/23) Installing libqrencode (4.1.1-r1)\n(14/23) Installing libcap2 (2.66-r0)\n(15/23) Installing libbz2 (1.0.8-r4)\n(16/23) Installing musl-fts (1.2.7-r3)\n(17/23) Installing xz-libs (5.2.9-r0)\n(18/23) Installing libelf (0.187-r2)\n(19/23) Installing iproute2-minimal (6.0.0-r1)\n(20/23) Installing lzo (2.10-r3)\n(21/23) Installing openvpn (2.5.8-r0)\nExecuting openvpn-2.5.8-r0.pre-install\n(22/23) Installing openvpn-auth-pam (2.5.8-r0)\n(23/23) Installing pamtester (0.1.2-r3)\nExecuting busybox-1.35.0-r29.trigger\nOK: 17 MiB in 38 packages\nRemoving intermediate container 3c1108d15e89\n ---> af8cde5c15c9\nStep 4/11 : ENV OPENVPN=/etc/openvpn\n ---> Running in 9c3382e6a129\nRemoving intermediate container 9c3382e6a129\n ---> a51a8f0930f8\nStep 5/11 : ENV EASYRSA=/usr/share/easy-rsa     EASYRSA_CRL_DAYS=3650     EASYRSA_PKI=$OPENVPN/pki\n ---> Running in b3d1059469b0\nRemoving intermediate container b3d1059469b0\n ---> ed153248d9f6\nStep 6/11 : VOLUME [\"/etc/openvpn\"]\n ---> Running in e115db89dc7a\nRemoving intermediate container e115db89dc7a\n ---> 6413e150eb4e\nStep 7/11 : EXPOSE 1194/udp\n ---> Running in c58a53078a72\nRemoving intermediate container c58a53078a72\n ---> 5a29a0628a34\nStep 8/11 : CMD [\"ovpn_run\"]\n ---> Running in 1fec78ae984b\nRemoving intermediate container 1fec78ae984b\n ---> 56dab3dce206\nStep 9/11 : ADD ./bin /usr/local/bin\n ---> c25fafbc9f90\nStep 10/11 : RUN chmod a+x /usr/local/bin/*\n ---> Running in 51701bfac286\nRemoving intermediate container 51701bfac286\n ---> 42b6d7af61e7\nStep 11/11 : ADD ./otp/openvpn /etc/pam.d/\n ---> f3dde77de4d5\nSuccessfully built f3dde77de4d5\nSuccessfully tagged docker-openvpn:latest\n","stderr":"","imageSize":16475362},"endTime":1672248119881}