{"repository":"https://github.com/zjc17/cook.zhangjc.tech","dockerfilePath":"Dockerfile","startTime":1673179796203,"endTime":1673180100543,"clone":{"startTime":1673179796203,"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/zjc17/cook.zhangjc.tech'...\n","error":null,"endTime":1673179797166,"commit":"46ecec57fa0373fce3ade02a674cc4d4cc48adc4"},"originalBuild":{"startTime":1673179797251,"endTime":1673179950080,"error":null,"stdout":"Sending build context to Docker daemon  4.706MB\r\r\nStep 1/13 : FROM node:lts-alpine AS builder\n ---> fcd8d07b068e\nStep 2/13 : ENV NEXT_PUBLIC_GOOGLE_ANALYTICS='G-B52Z1GBNX6'\n ---> Running in 444ceac61dc5\nRemoving intermediate container 444ceac61dc5\n ---> 2011f60e2a38\nStep 3/13 : ENV SITE_URL='https://cook.zhangjc.tech'\n ---> Running in 57c79441b113\nRemoving intermediate container 57c79441b113\n ---> e7792720629d\nStep 4/13 : ENV DISABLE_PWA=false\n ---> Running in 27a193aeffb1\nRemoving intermediate container 27a193aeffb1\n ---> 6b0177c04ccf\nStep 5/13 : ENV NEXT_PUBLIC_BAIDU_TRACE='6e2089c7a44e91b7a6fab00626c1fb08'\n ---> Running in 8536bd090389\nRemoving intermediate container 8536bd090389\n ---> a8b967e8a88f\nStep 6/13 : RUN apk update\n ---> Running in fdb34d8b36ca\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\nv3.17.0-332-g13963e2526 [https://dl-cdn.alpinelinux.org/alpine/v3.17/main]\nv3.17.0-347-g4a0616d66c [https://dl-cdn.alpinelinux.org/alpine/v3.17/community]\nOK: 17815 distinct packages available\nRemoving intermediate container fdb34d8b36ca\n ---> 7cf7fc8a20f2\nStep 7/13 : WORKDIR /app\n ---> Running in 61ca993efdca\nRemoving intermediate container 61ca993efdca\n ---> 4de6cad4931d\nStep 8/13 : COPY . .\n ---> 115880428fc1\nStep 9/13 : COPY .env.docker .env\n ---> 5c841caa1e91\nStep 10/13 : RUN npm install && npm run export\n ---> Running in a1e550f549ad\n\nadded 922 packages, and audited 923 packages in 34s\n\n3 vulnerabilities (2 high, 1 critical)\n\nTo address all issues, run:\n  npm audit fix\n\nRun `npm audit` for details.\n\u001b[91mnpm notice\u001b[0m\u001b[91m \nnpm notice New major version of npm available! 8.19.3 -> 9.2.0\nnpm notice Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm notice\u001b[0m\u001b[91m Run `npm install -g npm@9.2.0` to update!\nnpm notice \n\u001b[0m\n> preexport\n> npm run build\n\n\n> build\n> next build\n\ninfo  - Loaded env from /app/.env\nAttention: Next.js now collects completely anonymous telemetry regarding usage.\nThis information is used to shape Next.js' roadmap and prioritize features.\nYou can learn more, including how to opt-out if you'd not like to participate in this anonymous program, by visiting the following URL:\nhttps://nextjs.org/telemetry\n\n\u001b[91mBrowserslist: caniuse-lite is outdated. Please run:\n  npx browserslist@latest --update-db\n  Why you should do it regularly: https://github.com/browserslist/browserslist#browsers-data-updating\n\u001b[0minfo  - Checking validity of types...\ninfo  - Creating an optimized production build...\n> [PWA] Compile client (static)\n> [PWA] Custom worker found: /app/worker/index.js\n> [PWA] Build custom worker: /app/public/worker-dy31ae5-iKPN2s45oCTFJ.js\n> [PWA] Auto register service worker with: /app/node_modules/next-pwa/register.js\n> [PWA] Service worker: /app/public/sw.js\n> [PWA]   url: /sw.js\n> [PWA]   scope: /\n\u001b[91mBrowserslist: caniuse-lite is outdated. Please run:\n  npx browserslist@latest --update-db\n  Why you should do it regularly: https://github.com/browserslist/browserslist#browsers-data-updating\n\u001b[0m> [PWA] Compile server\n\u001b[91mBrowserslist: caniuse-lite is outdated. Please run:\n  npx browserslist@latest --update-db\n  Why you should do it regularly: https://github.com/browserslist/browserslist#browsers-data-updating\n\u001b[0minfo  - Compiled successfully\ninfo  - Collecting page data...\ninfo  - Generating static pages (0/16)\ninfo  - Generating static pages (4/16)\ninfo  - Generating static pages (8/16)\ninfo  - Generating static pages (12/16)\ninfo  - Generating static pages (16/16)\ninfo  - Finalizing page optimization...\n\nPage                                         Size     First Load JS\n┌ ● / (434 ms)                               5.12 kB         193 kB\n├   /_app                                    0 B             129 kB\n├ ○ /404                                     192 B           129 kB\n├ ○ /help (388 ms)                           30.6 kB         219 kB\n├ ○ /laofangu (394 ms)                       3.4 kB          191 kB\n├ ● /laofangu/category/[slug] (4095 ms)      3 kB            191 kB\n├   ├ /laofangu/category/dessert (441 ms)\n├   ├ /laofangu/category/fish (424 ms)\n├   ├ /laofangu/category/soup (418 ms)\n├   ├ /laofangu/category/daily (417 ms)\n├   ├ /laofangu/category/seafood (410 ms)\n├   ├ /laofangu/category/cold-dish (408 ms)\n├   ├ /laofangu/category/chicken (403 ms)\n├   └ [+3 more paths] (avg 391 ms)\n└ ○ /plant (393 ms)                          4.05 kB         192 kB\n+ First Load JS shared by all                129 kB\n  ├ chunks/framework-5f4595e5518b5600.js     42 kB\n  ├ chunks/main-7376ac512dd09c8f.js          30.3 kB\n  ├ chunks/pages/_app-8980b55f4e7fd85d.js    55.8 kB\n  ├ chunks/webpack-9b312e20a4e32339.js       836 B\n  └ css/c4af050f226c4a4a.css                 257 B\n\n○  (Static)  automatically rendered as static HTML (uses no initial props)\n●  (SSG)     automatically generated as static HTML + JSON (uses getStaticProps)\n\n\n> postbuild\n> next-sitemap\n\nLoaded env from /app/.env\n✅ [next-sitemap] Generated index sitemap and 1 sitemap(s)\n   ○ https://cook.zhangjc.tech/sitemap.xml (index)\n   ○ https://cook.zhangjc.tech/sitemap-0.xml \n\n> export\n> next export\n\ninfo  - Loaded env from /app/.env\n\u001b[91mBrowserslist: caniuse-lite is outdated. Please run:\n  npx browserslist@latest --update-db\n  Why you should do it regularly: https://github.com/browserslist/browserslist#browsers-data-updating\n\u001b[0minfo  - using build directory: /app/.next\ninfo  - Copying \"static build\" directory\ninfo  - No \"exportPathMap\" found in \"/app/next.config.js\". Generating map from \"./pages\"\ninfo  - Launching 35 workers\ninfo  - Exporting (0/5)\ninfo  - Copying \"public\" directory\ninfo  - Exporting (1/5)\ninfo  - Exporting (2/5)\ninfo  - Exporting (3/5)\ninfo  - Exporting (5/5)\nExport successful. Files written to /app/out\n\n> postexport\n> next-sitemap\n\nLoaded env from /app/.env\n✅ [next-sitemap] Generated index sitemap and 1 sitemap(s)\n   ○ https://cook.zhangjc.tech/sitemap.xml (index)\n   ○ https://cook.zhangjc.tech/sitemap-0.xml \nRemoving intermediate container a1e550f549ad\n ---> 3b2a470fc2c7\nStep 11/13 : FROM nginx:stable-alpine\n ---> c31fe73098ae\nStep 12/13 : COPY --from=builder /app/out /usr/share/nginx/html\n ---> 27f7f48f8225\nStep 13/13 : EXPOSE 80\n ---> Running in 1df15f19282a\nRemoving intermediate container 1df15f19282a\n ---> 7302289902c0\nSuccessfully built 7302289902c0\nSuccessfully tagged cook.zhangjc.tech:latest\n","stderr":"","imageSize":27021232},"repair":{"startTime":1673179950151,"endTime":1673179950231,"violations":[{"name":"npmCacheCleanAfterInstall","position":{"start":12,"end":12,"columnStart":4,"columnEnd":15}}],"repairedDockerfile":"FROM node:lts-alpine AS builder\n\nENV NEXT_PUBLIC_GOOGLE_ANALYTICS='G-B52Z1GBNX6'\nENV SITE_URL='https://cook.zhangjc.tech'\nENV DISABLE_PWA=false\nENV NEXT_PUBLIC_BAIDU_TRACE='6e2089c7a44e91b7a6fab00626c1fb08'\n\nRUN apk update\nWORKDIR /app\nCOPY . .\nCOPY .env.docker .env\n\nRUN npm install && npm run export && npm cache clean --force;\n\nFROM nginx:stable-alpine\nCOPY --from=builder /app/out /usr/share/nginx/html\nEXPOSE 80"},"repairedBuild":{"startTime":1673179950372,"endTime":1673180100183,"error":null,"stdout":"Sending build context to Docker daemon  4.706MB\r\r\nStep 1/13 : FROM node:lts-alpine AS builder\n ---> fcd8d07b068e\nStep 2/13 : ENV NEXT_PUBLIC_GOOGLE_ANALYTICS='G-B52Z1GBNX6'\n ---> Running in eed37156d1b6\nRemoving intermediate container eed37156d1b6\n ---> 8677536547e7\nStep 3/13 : ENV SITE_URL='https://cook.zhangjc.tech'\n ---> Running in 4555b239118a\nRemoving intermediate container 4555b239118a\n ---> bc04d25c9f95\nStep 4/13 : ENV DISABLE_PWA=false\n ---> Running in cb7f9d1702d3\nRemoving intermediate container cb7f9d1702d3\n ---> 40b668c5770d\nStep 5/13 : ENV NEXT_PUBLIC_BAIDU_TRACE='6e2089c7a44e91b7a6fab00626c1fb08'\n ---> Running in 57eff589cffe\nRemoving intermediate container 57eff589cffe\n ---> e5c668d30361\nStep 6/13 : RUN apk update\n ---> Running in bea0f160de27\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\nv3.17.0-332-g13963e2526 [https://dl-cdn.alpinelinux.org/alpine/v3.17/main]\nv3.17.0-347-g4a0616d66c [https://dl-cdn.alpinelinux.org/alpine/v3.17/community]\nOK: 17815 distinct packages available\nRemoving intermediate container bea0f160de27\n ---> 58d0752d1e1c\nStep 7/13 : WORKDIR /app\n ---> Running in c56b1c1b838f\nRemoving intermediate container c56b1c1b838f\n ---> 77e979d4dbb3\nStep 8/13 : COPY . .\n ---> c5d9e4dfebda\nStep 9/13 : COPY .env.docker .env\n ---> 4875ebe8f050\nStep 10/13 : RUN npm install && npm run export && npm cache clean --force;\n ---> Running in 06f5f7353fd0\n\nadded 922 packages, and audited 923 packages in 36s\n\n3 vulnerabilities (2 high, 1 critical)\n\nTo address all issues, run:\n  npm audit fix\n\nRun `npm audit` for details.\n\u001b[91mnpm notice \nnpm\u001b[0m\u001b[91m notice\u001b[0m\u001b[91m New major version of npm available! 8.19.3 -> 9.2.0\nnpm notice Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm notice\u001b[0m\u001b[91m Run `npm install -g npm@9.2.0` to update!\nnpm \u001b[0m\u001b[91mnotice\u001b[0m\u001b[91m \n\u001b[0m\n> preexport\n> npm run build\n\n\n> build\n> next build\n\ninfo  - Loaded env from /app/.env\nAttention: Next.js now collects completely anonymous telemetry regarding usage.\nThis information is used to shape Next.js' roadmap and prioritize features.\nYou can learn more, including how to opt-out if you'd not like to participate in this anonymous program, by visiting the following URL:\nhttps://nextjs.org/telemetry\n\n\u001b[91mBrowserslist: caniuse-lite is outdated. Please run:\n  npx browserslist@latest --update-db\n  Why you should do it regularly: https://github.com/browserslist/browserslist#browsers-data-updating\n\u001b[0minfo  - Checking validity of types...\ninfo  - Creating an optimized production build...\n> [PWA] Compile client (static)\n> [PWA] Custom worker found: /app/worker/index.js\n> [PWA] Build custom worker: /app/public/worker-0L8uWs0r_RGrRloBcNNeX.js\n> [PWA] Auto register service worker with: /app/node_modules/next-pwa/register.js\n> [PWA] Service worker: /app/public/sw.js\n> [PWA]   url: /sw.js\n> [PWA]   scope: /\n\u001b[91mBrowserslist: caniuse-lite is outdated. Please run:\n  npx browserslist@latest --update-db\n  Why you should do it regularly: https://github.com/browserslist/browserslist#browsers-data-updating\n\u001b[0m> [PWA] Compile server\n\u001b[91mBrowserslist: caniuse-lite is outdated. Please run:\n  npx browserslist@latest --update-db\n  Why you should do it regularly: https://github.com/browserslist/browserslist#browsers-data-updating\n\u001b[0minfo  - Compiled successfully\ninfo  - Collecting page data...\ninfo  - Generating static pages (0/16)\ninfo  - Generating static pages (4/16)\ninfo  - Generating static pages (8/16)\ninfo  - Generating static pages (12/16)\ninfo  - Generating static pages (16/16)\ninfo  - Finalizing page optimization...\n\nPage                                         Size     First Load JS\n┌ ● / (442 ms)                               5.12 kB         193 kB\n├   /_app                                    0 B             129 kB\n├ ○ /404                                     192 B           129 kB\n├ ○ /help (451 ms)                           30.6 kB         219 kB\n├ ○ /laofangu (383 ms)                       3.4 kB          191 kB\n├ ● /laofangu/category/[slug] (3865 ms)      3 kB            191 kB\n├   ├ /laofangu/category/chicken (410 ms)\n├   ├ /laofangu/category/soup (409 ms)\n├   ├ /laofangu/category/cold-dish (396 ms)\n├   ├ /laofangu/category/seafood (392 ms)\n├   ├ /laofangu/category/staple (387 ms)\n├   ├ /laofangu/category/beef (383 ms)\n├   ├ /laofangu/category/fish (376 ms)\n├   └ [+3 more paths] (avg 371 ms)\n└ ○ /plant (417 ms)                          4.05 kB         192 kB\n+ First Load JS shared by all                129 kB\n  ├ chunks/framework-5f4595e5518b5600.js     42 kB\n  ├ chunks/main-7376ac512dd09c8f.js          30.3 kB\n  ├ chunks/pages/_app-8980b55f4e7fd85d.js    55.8 kB\n  ├ chunks/webpack-9b312e20a4e32339.js       836 B\n  └ css/c4af050f226c4a4a.css                 257 B\n\n○  (Static)  automatically rendered as static HTML (uses no initial props)\n●  (SSG)     automatically generated as static HTML + JSON (uses getStaticProps)\n\n\n> postbuild\n> next-sitemap\n\nLoaded env from /app/.env\n✅ [next-sitemap] Generated index sitemap and 1 sitemap(s)\n   ○ https://cook.zhangjc.tech/sitemap.xml (index)\n   ○ https://cook.zhangjc.tech/sitemap-0.xml \n\n> export\n> next export\n\ninfo  - Loaded env from /app/.env\n\u001b[91mBrowserslist: caniuse-lite is outdated. Please run:\n  npx browserslist@latest --update-db\n  Why you should do it regularly: https://github.com/browserslist/browserslist#browsers-data-updating\n\u001b[0minfo  - using build directory: /app/.next\ninfo  - Copying \"static build\" directory\ninfo  - No \"exportPathMap\" found in \"/app/next.config.js\". Generating map from \"./pages\"\ninfo  - Launching 35 workers\ninfo  - Exporting (0/5)\ninfo  - Copying \"public\" directory\ninfo  - Exporting (1/5)\ninfo  - Exporting (2/5)\ninfo  - Exporting (3/5)\ninfo  - Exporting (5/5)\nExport successful. Files written to /app/out\n\n> postexport\n> next-sitemap\n\nLoaded env from /app/.env\n✅ [next-sitemap] Generated index sitemap and 1 sitemap(s)\n   ○ https://cook.zhangjc.tech/sitemap.xml (index)\n   ○ https://cook.zhangjc.tech/sitemap-0.xml \n\u001b[91mnpm\u001b[0m\u001b[91m WARN using --force Recommended protections disabled.\n\u001b[0mRemoving intermediate container 06f5f7353fd0\n ---> 949dc21d5b4a\nStep 11/13 : FROM nginx:stable-alpine\n ---> c31fe73098ae\nStep 12/13 : COPY --from=builder /app/out /usr/share/nginx/html\n ---> 4d63c769319c\nStep 13/13 : EXPOSE 80\n ---> Running in adbd5b6c8e08\nRemoving intermediate container adbd5b6c8e08\n ---> 78debaa59cc9\nSuccessfully built 78debaa59cc9\nSuccessfully tagged cook.zhangjc.tech:latest\n","stderr":"","imageSize":27021232}}