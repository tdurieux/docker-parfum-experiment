{"repository":"https://github.com/syzoj/syzoj","dockerfilePath":"Dockerfile","startTime":1672741554282,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/syzoj/syzoj'...\n","error":null,"commit":"e92d343d8cde50f12a9157864507342d28d6f358"},"originalBuild":{"startTimestamp":1672741556673,"endTimestamp":1672741678561,"error":null,"stdout":"Sending build context to Docker daemon  42.05MB\r\r\nStep 1/10 : FROM node:16-bullseye\n16-bullseye: Pulling from library/node\n32de3c850997: Already exists\nfa1d4c8d85a4: Already exists\nc796299bbbdd: Already exists\n81283a9569ad: Already exists\n60b38700e7fb: Already exists\n9537c7a3988e: Already exists\n1baa37c1a486: Pulling fs layer\na32c0cc32d74: Pulling fs layer\n5fd19098064a: Pulling fs layer\n5fd19098064a: Verifying Checksum\n5fd19098064a: Download complete\na32c0cc32d74: Verifying Checksum\na32c0cc32d74: Download complete\n1baa37c1a486: Verifying Checksum\n1baa37c1a486: Download complete\n1baa37c1a486: Pull complete\na32c0cc32d74: Pull complete\n5fd19098064a: Pull complete\nDigest: sha256:a20bfeb81a419dd3c0027c754f77746dfb8676b0d6b9f47a9ebdb0bc6543f2e2\nStatus: Downloaded newer image for node:16-bullseye\n ---> f0a59f79abde\nStep 2/10 : RUN apt-get update &&     apt-get install -y p7zip-full clang-format\n ---> Running in 87e01332c18a\nGet:1 http://deb.debian.org/debian bullseye InRelease [116 kB]\nGet:2 http://deb.debian.org/debian-security bullseye-security InRelease [48.4 kB]\nGet:3 http://deb.debian.org/debian bullseye-updates InRelease [44.1 kB]\nGet:4 http://deb.debian.org/debian bullseye/main amd64 Packages [8183 kB]\nGet:5 http://deb.debian.org/debian-security bullseye-security/main amd64 Packages [210 kB]\nGet:6 http://deb.debian.org/debian bullseye-updates/main amd64 Packages [14.6 kB]\nFetched 8616 kB in 1s (6507 kB/s)\nReading package lists...\nReading package lists...\nBuilding dependency tree...\nReading state information...\nThe following additional packages will be installed:\n  clang-format-11 libclang-cpp11 libllvm11 libz3-4 p7zip\nSuggested packages:\n  p7zip-rar\nThe following NEW packages will be installed:\n  clang-format clang-format-11 libclang-cpp11 libllvm11 libz3-4 p7zip\n  p7zip-full\n0 upgraded, 7 newly installed, 0 to remove and 1 not upgraded.\nNeed to get 36.1 MB of archives.\nAfter this operation, 160 MB of additional disk space will be used.\nGet:1 http://deb.debian.org/debian bullseye/main amd64 libz3-4 amd64 4.8.10-1 [6949 kB]\nGet:2 http://deb.debian.org/debian bullseye/main amd64 libllvm11 amd64 1:11.0.1-2 [17.9 MB]\nGet:3 http://deb.debian.org/debian bullseye/main amd64 libclang-cpp11 amd64 1:11.0.1-2 [9632 kB]\nGet:4 http://deb.debian.org/debian bullseye/main amd64 clang-format-11 amd64 1:11.0.1-2 [82.5 kB]\nGet:5 http://deb.debian.org/debian bullseye/main amd64 clang-format amd64 1:11.0-51+nmu5 [8860 B]\nGet:6 http://deb.debian.org/debian bullseye/main amd64 p7zip amd64 16.02+dfsg-8 [381 kB]\nGet:7 http://deb.debian.org/debian bullseye/main amd64 p7zip-full amd64 16.02+dfsg-8 [1183 kB]\n\u001b[91mdebconf: delaying package configuration, since apt-utils is not installed\n\u001b[0mFetched 36.1 MB in 0s (84.3 MB/s)\nSelecting previously unselected package libz3-4:amd64.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 22790 files and directories currently installed.)\r\nPreparing to unpack .../0-libz3-4_4.8.10-1_amd64.deb ...\r\nUnpacking libz3-4:amd64 (4.8.10-1) ...\r\nSelecting previously unselected package libllvm11:amd64.\r\nPreparing to unpack .../1-libllvm11_1%3a11.0.1-2_amd64.deb ...\r\nUnpacking libllvm11:amd64 (1:11.0.1-2) ...\r\nSelecting previously unselected package libclang-cpp11.\r\nPreparing to unpack .../2-libclang-cpp11_1%3a11.0.1-2_amd64.deb ...\r\nUnpacking libclang-cpp11 (1:11.0.1-2) ...\r\nSelecting previously unselected package clang-format-11.\r\nPreparing to unpack .../3-clang-format-11_1%3a11.0.1-2_amd64.deb ...\r\nUnpacking clang-format-11 (1:11.0.1-2) ...\r\nSelecting previously unselected package clang-format.\r\nPreparing to unpack .../4-clang-format_1%3a11.0-51+nmu5_amd64.deb ...\r\nUnpacking clang-format (1:11.0-51+nmu5) ...\r\nSelecting previously unselected package p7zip.\r\nPreparing to unpack .../5-p7zip_16.02+dfsg-8_amd64.deb ...\r\nUnpacking p7zip (16.02+dfsg-8) ...\r\nSelecting previously unselected package p7zip-full.\r\nPreparing to unpack .../6-p7zip-full_16.02+dfsg-8_amd64.deb ...\r\nUnpacking p7zip-full (16.02+dfsg-8) ...\r\nSetting up libz3-4:amd64 (4.8.10-1) ...\r\nSetting up libllvm11:amd64 (1:11.0.1-2) ...\r\nSetting up p7zip (16.02+dfsg-8) ...\r\nSetting up p7zip-full (16.02+dfsg-8) ...\r\nSetting up libclang-cpp11 (1:11.0.1-2) ...\r\nSetting up clang-format-11 (1:11.0.1-2) ...\r\nSetting up clang-format (1:11.0-51+nmu5) ...\r\nProcessing triggers for libc-bin (2.31-13+deb11u5) ...\r\nRemoving intermediate container 87e01332c18a\n ---> 5617d90bfd23\nStep 3/10 : WORKDIR /app\n ---> Running in 9780d3d00c57\nRemoving intermediate container 9780d3d00c57\n ---> 5a9a4b4f4d55\nStep 4/10 : COPY package.json yarn.lock ./\n ---> 85b619193e04\nStep 5/10 : RUN yarn --frozen-lockfile --ignore-scripts\n ---> Running in 2915650110dc\nyarn install v1.22.19\n[1/4] Resolving packages...\n[2/4] Fetching packages...\n[3/4] Linking dependencies...\n[4/4] Building fresh packages...\n\u001b[91mwarning Ignored scripts due to flag.\n\u001b[0mDone in 17.04s.\nRemoving intermediate container 2915650110dc\n ---> 73731f458e21\nStep 6/10 : COPY . .\n ---> 083d94be3676\nStep 7/10 : RUN yarn --frozen-lockfile\n ---> Running in 7f589a40c6b5\nyarn install v1.22.19\n[1/4] Resolving packages...\n[2/4] Fetching packages...\n[3/4] Linking dependencies...\n[4/4] Building fresh packages...\n$ tsc -p .\n$ patch-package\npatch-package 6.4.7\nApplying patches...\ntypeorm@0.2.16 ✔\nDone in 4.57s.\nRemoving intermediate container 7f589a40c6b5\n ---> eb246ba7485e\nStep 8/10 : ENV NODE_ENV=production     SYZOJ_WEB_LISTEN_HOSTNAME=0.0.0.0     SYZOJ_WEB_LISTEN_PORT=80\n ---> Running in f9e650ff5405\nRemoving intermediate container f9e650ff5405\n ---> 296ae10d88a8\nStep 9/10 : VOLUME [\"/app/config\", \"/app/uploads\", \"/app/sessions\"]\n ---> Running in 0f97b6badd5c\nRemoving intermediate container 0f97b6badd5c\n ---> 01ae31142620\nStep 10/10 : CMD [\"app.js\", \"-c\", \"config/web.json\"]\n ---> Running in 234ff931c887\nRemoving intermediate container 234ff931c887\n ---> ad1baa1af160\nSuccessfully built ad1baa1af160\nSuccessfully tagged syzoj:latest\n","stderr":"","imageSize":1509915870},"repair":{"violations":[{"name":"ruleAptGetInstallUseNoRec","position":{"start":4,"end":4,"columnStart":4,"columnEnd":46}},{"name":"ruleAptGetInstallThenRemoveAptLists","position":{"start":4,"end":4,"columnStart":4,"columnEnd":46}}],"repairedDockerfile":"FROM node:16-bullseye\n\n# Install OS dependencies\nRUN apt-get update && \\\n    apt-get install --no-install-recommends -y p7zip-full clang-format\n\nWORKDIR /app\n\n# Install NPM dependencies\nCOPY package.json yarn.lock ./\nRUN yarn --frozen-lockfile --ignore-scripts\n\n# Copy code and run post-install scripts\nCOPY . .\nRUN yarn --frozen-lockfile\n\nENV NODE_ENV=production \\\n    SYZOJ_WEB_LISTEN_HOSTNAME=0.0.0.0 \\\n    SYZOJ_WEB_LISTEN_PORT=80\n\nVOLUME [\"/app/config\", \"/app/uploads\", \"/app/sessions\"]\n\nCMD [\"app.js\", \"-c\", \"config/web.json\"]\n"},"repairedBuild":{"startTimestamp":1672741679680,"endTimestamp":1672741763566,"error":null,"stdout":"Sending build context to Docker daemon  42.05MB\r\r\nStep 1/10 : FROM node:16-bullseye\n ---> f0a59f79abde\nStep 2/10 : RUN apt-get update &&     apt-get install --no-install-recommends -y p7zip-full clang-format\n ---> Running in 0835cbdcb56f\nGet:1 http://deb.debian.org/debian bullseye InRelease [116 kB]\nGet:2 http://deb.debian.org/debian-security bullseye-security InRelease [48.4 kB]\nGet:3 http://deb.debian.org/debian bullseye-updates InRelease [44.1 kB]\nGet:4 http://deb.debian.org/debian bullseye/main amd64 Packages [8183 kB]\nGet:5 http://deb.debian.org/debian-security bullseye-security/main amd64 Packages [210 kB]\nGet:6 http://deb.debian.org/debian bullseye-updates/main amd64 Packages [14.6 kB]\nFetched 8616 kB in 1s (6646 kB/s)\nReading package lists...\nReading package lists...\nBuilding dependency tree...\nReading state information...\nThe following additional packages will be installed:\n  clang-format-11 libclang-cpp11 libllvm11 libz3-4 p7zip\nSuggested packages:\n  p7zip-rar\nThe following NEW packages will be installed:\n  clang-format clang-format-11 libclang-cpp11 libllvm11 libz3-4 p7zip\n  p7zip-full\n0 upgraded, 7 newly installed, 0 to remove and 1 not upgraded.\nNeed to get 36.1 MB of archives.\nAfter this operation, 160 MB of additional disk space will be used.\nGet:1 http://deb.debian.org/debian bullseye/main amd64 libz3-4 amd64 4.8.10-1 [6949 kB]\nGet:2 http://deb.debian.org/debian bullseye/main amd64 libllvm11 amd64 1:11.0.1-2 [17.9 MB]\nGet:3 http://deb.debian.org/debian bullseye/main amd64 libclang-cpp11 amd64 1:11.0.1-2 [9632 kB]\nGet:4 http://deb.debian.org/debian bullseye/main amd64 clang-format-11 amd64 1:11.0.1-2 [82.5 kB]\nGet:5 http://deb.debian.org/debian bullseye/main amd64 clang-format amd64 1:11.0-51+nmu5 [8860 B]\nGet:6 http://deb.debian.org/debian bullseye/main amd64 p7zip amd64 16.02+dfsg-8 [381 kB]\nGet:7 http://deb.debian.org/debian bullseye/main amd64 p7zip-full amd64 16.02+dfsg-8 [1183 kB]\n\u001b[91mdebconf: delaying package configuration, since apt-utils is not installed\n\u001b[0mFetched 36.1 MB in 0s (72.9 MB/s)\nSelecting previously unselected package libz3-4:amd64.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 22790 files and directories currently installed.)\r\nPreparing to unpack .../0-libz3-4_4.8.10-1_amd64.deb ...\r\nUnpacking libz3-4:amd64 (4.8.10-1) ...\r\nSelecting previously unselected package libllvm11:amd64.\r\nPreparing to unpack .../1-libllvm11_1%3a11.0.1-2_amd64.deb ...\r\nUnpacking libllvm11:amd64 (1:11.0.1-2) ...\r\nSelecting previously unselected package libclang-cpp11.\r\nPreparing to unpack .../2-libclang-cpp11_1%3a11.0.1-2_amd64.deb ...\r\nUnpacking libclang-cpp11 (1:11.0.1-2) ...\r\nSelecting previously unselected package clang-format-11.\r\nPreparing to unpack .../3-clang-format-11_1%3a11.0.1-2_amd64.deb ...\r\nUnpacking clang-format-11 (1:11.0.1-2) ...\r\nSelecting previously unselected package clang-format.\r\nPreparing to unpack .../4-clang-format_1%3a11.0-51+nmu5_amd64.deb ...\r\nUnpacking clang-format (1:11.0-51+nmu5) ...\r\nSelecting previously unselected package p7zip.\r\nPreparing to unpack .../5-p7zip_16.02+dfsg-8_amd64.deb ...\r\nUnpacking p7zip (16.02+dfsg-8) ...\r\nSelecting previously unselected package p7zip-full.\r\nPreparing to unpack .../6-p7zip-full_16.02+dfsg-8_amd64.deb ...\r\nUnpacking p7zip-full (16.02+dfsg-8) ...\r\nSetting up libz3-4:amd64 (4.8.10-1) ...\r\nSetting up libllvm11:amd64 (1:11.0.1-2) ...\r\nSetting up p7zip (16.02+dfsg-8) ...\r\nSetting up p7zip-full (16.02+dfsg-8) ...\r\nSetting up libclang-cpp11 (1:11.0.1-2) ...\r\nSetting up clang-format-11 (1:11.0.1-2) ...\r\nSetting up clang-format (1:11.0-51+nmu5) ...\r\nProcessing triggers for libc-bin (2.31-13+deb11u5) ...\r\nRemoving intermediate container 0835cbdcb56f\n ---> 415ff86732b9\nStep 3/10 : WORKDIR /app\n ---> Running in 0b566de29c88\nRemoving intermediate container 0b566de29c88\n ---> c08e18b5cc07\nStep 4/10 : COPY package.json yarn.lock ./\n ---> e5f0b2a7c43c\nStep 5/10 : RUN yarn --frozen-lockfile --ignore-scripts\n ---> Running in 3da128afcb12\nyarn install v1.22.19\n[1/4] Resolving packages...\n[2/4] Fetching packages...\n[3/4] Linking dependencies...\n[4/4] Building fresh packages...\n\u001b[91mwarning Ignored scripts due to flag.\n\u001b[0mDone in 14.51s.\nRemoving intermediate container 3da128afcb12\n ---> cc24405b730c\nStep 6/10 : COPY . .\n ---> 7f5ba66b02dd\nStep 7/10 : RUN yarn --frozen-lockfile\n ---> Running in 66fdb76e9cad\nyarn install v1.22.19\n[1/4] Resolving packages...\n[2/4] Fetching packages...\n[3/4] Linking dependencies...\n[4/4] Building fresh packages...\n$ tsc -p .\n$ patch-package\npatch-package 6.4.7\nApplying patches...\ntypeorm@0.2.16 ✔\nDone in 4.61s.\nRemoving intermediate container 66fdb76e9cad\n ---> db333adeef4e\nStep 8/10 : ENV NODE_ENV=production     SYZOJ_WEB_LISTEN_HOSTNAME=0.0.0.0     SYZOJ_WEB_LISTEN_PORT=80\n ---> Running in 74496759598f\nRemoving intermediate container 74496759598f\n ---> 69a47c2de2c2\nStep 9/10 : VOLUME [\"/app/config\", \"/app/uploads\", \"/app/sessions\"]\n ---> Running in 9809407d08eb\nRemoving intermediate container 9809407d08eb\n ---> 9ac29c018b38\nStep 10/10 : CMD [\"app.js\", \"-c\", \"config/web.json\"]\n ---> Running in 83298a50cad6\nRemoving intermediate container 83298a50cad6\n ---> 155aa9f4c190\nSuccessfully built 155aa9f4c190\nSuccessfully tagged syzoj:latest\n","stderr":"","imageSize":1509915894},"endTime":1672741764626}