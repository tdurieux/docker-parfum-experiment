{"repository":"https://github.com/librecaptcha/lc-core","dockerfilePath":"Dockerfile","startTime":1672022614231,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/librecaptcha/lc-core'...\n","error":null,"commit":"59934539a734eb9d0ad8dd2f2b3e138e648a7064"},"originalBuild":{"startTimestamp":1672022616072,"endTimestamp":1672022703935,"error":null,"stdout":"Sending build context to Docker daemon  8.718MB\r\r\nStep 1/26 : FROM adoptopenjdk/openjdk16:alpine AS base-builder\nalpine: Pulling from adoptopenjdk/openjdk16\nc7ed990a2339: Pulling fs layer\n1febd2343f77: Pulling fs layer\nd065a9d20871: Pulling fs layer\nc7ed990a2339: Download complete\n1febd2343f77: Verifying Checksum\n1febd2343f77: Download complete\nc7ed990a2339: Pull complete\n1febd2343f77: Pull complete\nd065a9d20871: Verifying Checksum\nd065a9d20871: Download complete\nd065a9d20871: Pull complete\nDigest: sha256:400f1f64750623cefd508002ebc02e6fac77e2453cbf8b268c16d25075e8bf7a\nStatus: Downloaded newer image for adoptopenjdk/openjdk16:alpine\n ---> 2d8dbf1972a8\nStep 2/26 : ARG SBT_VERSION=1.7.1\n ---> Running in 1eb748267d44\nRemoving intermediate container 1eb748267d44\n ---> 4d62c8a84608\nStep 3/26 : RUN apk add --no-cache bash\n ---> Running in 87bd745739f4\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.14/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.14/community/x86_64/APKINDEX.tar.gz\n(1/4) Installing ncurses-terminfo-base (6.2_p20210612-r1)\n(2/4) Installing ncurses-libs (6.2_p20210612-r1)\n(3/4) Installing readline (8.1.0-r0)\n(4/4) Installing bash (5.1.16-r0)\nExecuting bash-5.1.16-r0.post-install\nExecuting busybox-1.33.1-r8.trigger\nOK: 11 MiB in 21 packages\nRemoving intermediate container 87bd745739f4\n ---> 54bb0b1534b2\nStep 4/26 : ENV JAVA_HOME=\"/usr/lib/jvm/default-jvm/\"\n ---> Running in e97e87c54992\nRemoving intermediate container e97e87c54992\n ---> fbb122685383\nStep 5/26 : ENV PATH=$PATH:${JAVA_HOME}/bin\n ---> Running in f491324a233e\nRemoving intermediate container f491324a233e\n ---> fd2db2a5b9e1\nStep 6/26 : RUN \twget -O sbt-$SBT_VERSION.tgz https://github.com/sbt/sbt/releases/download/v$SBT_VERSION/sbt-$SBT_VERSION.tgz &&         tar -xzvf sbt-$SBT_VERSION.tgz &&         rm sbt-$SBT_VERSION.tgz\n ---> Running in db2f118ecd07\n\u001b[91mConnecting to github.com (140.82.121.4:443)\n\u001b[0m\u001b[91mConnecting to objects.githubusercontent.com (185.199.111.133:443)\n\u001b[0m\u001b[91msaving to 'sbt-1.7.1.tgz'\n\u001b[0m\u001b[91msbt-1.7.1.tgz          0% |                                | 48539  0:10:01 ETA\n\u001b[0m\u001b[91msbt-1.7.1.tgz         14% |****                            | 4096k  0:00:11 ETA\n\u001b[0m\u001b[91msbt-1.7.1.tgz        100% |********************************| 27.8M  0:00:00 ETA\n'sbt-1.7.1.tgz' saved\n\u001b[0msbt/\nsbt/bin/\nsbt/bin/sbtn-x86_64-pc-win32.exe\nsbt/bin/sbt\nsbt/bin/sbt.bat\nsbt/bin/sbtn-x86_64-pc-linux\nsbt/bin/sbt-launch.jar\nsbt/bin/sbtn-x86_64-apple-darwin\nsbt/conf/\nsbt/conf/sbtconfig.txt\nsbt/conf/sbtopts\nsbt/LICENSE\nsbt/NOTICE\nRemoving intermediate container db2f118ecd07\n ---> 83ad48f6ddd5\nStep 7/26 : ENV PATH=$PATH:/sbt/bin/\n ---> Running in e25274f47404\nRemoving intermediate container e25274f47404\n ---> 03a6063c3110\nStep 8/26 : FROM base-builder AS sbt-builder\n ---> 03a6063c3110\nStep 9/26 : WORKDIR /build\n ---> Running in d38f8c031363\nRemoving intermediate container d38f8c031363\n ---> 6ba5d1271233\nStep 10/26 : COPY lib/ lib/\n ---> a27224aa8640\nStep 11/26 : COPY project/plugins.sbt project/\n ---> 7162d4a2f65a\nStep 12/26 : COPY build.sbt .\n ---> 5fc9e5aca941\nStep 13/26 : RUN sbt assembly\n ---> Running in fe0a5fab055b\ncopying runtime jar...\n\u001b[91m[info] [launcher] getting org.scala-sbt sbt 1.7.1  (this may take some time)...\n\u001b[0m\u001b[91m[info] [launcher] getting Scala 2.12.16 (for sbt)...\n\u001b[0m[info] Updated file /build/project/build.properties: set sbt.version to 1.7.1\n[info] welcome to sbt 1.7.1 (Eclipse Adoptium Java 16.0.2)\n[info] loading settings for project build-build from plugins.sbt ...\n[info] loading project definition from /build/project\n[info] loading settings for project root from build.sbt ...\n[info] set current project to LibreCaptcha (in build file:/build/)\n[info] 11 file(s) merged using strategy 'Rename' (Run the task at debug level to see the details)\n[info] 66 file(s) merged using strategy 'Discard' (Run the task at debug level to see the details)\n[info] Built: /build/target/scala-3.2.1/LibreCaptcha.jar\n[info] Jar hash: 415b8e634462f4d0763cd5792dbe72ada2ea546f\n[success] Total time: 4 s, completed Dec 26, 2022, 2:44:21 AM\nRemoving intermediate container fe0a5fab055b\n ---> 5cd0fa88c3eb\nStep 14/26 : FROM sbt-builder as builder\n ---> 5cd0fa88c3eb\nStep 15/26 : COPY src/ src/\n ---> 45b8369e9057\nStep 16/26 : RUN sbt assembly\n ---> Running in 2e8f7502b544\n[info] welcome to sbt 1.7.1 (Eclipse Adoptium Java 16.0.2)\n[info] loading settings for project build-build from plugins.sbt ...\n[info] loading project definition from /build/project\n[info] loading settings for project root from build.sbt ...\n[info] set current project to LibreCaptcha (in build file:/build/)\n[info] compiling 14 Scala sources and 9 Java sources to /build/target/scala-3.2.1/classes ...\n[warn] -- Deprecation Warning: /build/src/main/scala/lc/core/config.scala:44:73 -------\n[warn] 44 |  private val configFields: ConfigField = configJson.extract[ConfigField]\n[warn]    |                                                                         ^\n[warn]    |Compiler synthesis of Manifest and OptManifest is deprecated, instead\n[warn]    |replace with the type `scala.reflect.ClassTag[lc.core.ConfigField]`.\n[warn]    |Alternatively, consider using the new metaprogramming features of Scala 3,\n[warn]    |see https://docs.scala-lang.org/scala3/reference/metaprogramming.html\n[warn] -- Deprecation Warning: /build/src/main/scala/lc/core/config.scala:60:94 -------\n[warn] 60 |  val captchaConfig: List[CaptchaConfig] = captchaConfigTransform.extract[List[CaptchaConfig]]\n[warn]    |                                                                                              ^\n[warn]    |Compiler synthesis of Manifest and OptManifest is deprecated, instead\n[warn]    |replace with the type `scala.reflect.ClassTag[List[lc.core.CaptchaConfig]]`.\n[warn]    |Alternatively, consider using the new metaprogramming features of Scala 3,\n[warn]    |see https://docs.scala-lang.org/scala3/reference/metaprogramming.html\n[warn] -- Deprecation Warning: /build/src/main/scala/lc/server/Server.scala:35:44 -----\n[warn] 35 |        val param = json.extract[Parameters]\n[warn]    |                                            ^\n[warn]    |Compiler synthesis of Manifest and OptManifest is deprecated, instead\n[warn]    |replace with the type `scala.reflect.ClassTag[lc.core.Parameters]`.\n[warn]    |Alternatively, consider using the new metaprogramming features of Scala 3,\n[warn]    |see https://docs.scala-lang.org/scala3/reference/metaprogramming.html\n[warn] -- Deprecation Warning: /build/src/main/scala/lc/server/Server.scala:58:41 -----\n[warn] 58 |        val answer = json.extract[Answer]\n[warn]    |                                         ^\n[warn]    |Compiler synthesis of Manifest and OptManifest is deprecated, instead\n[warn]    |replace with the type `scala.reflect.ClassTag[lc.core.Answer]`.\n[warn]    |Alternatively, consider using the new metaprogramming features of Scala 3,\n[warn]    |see https://docs.scala-lang.org/scala3/reference/metaprogramming.html\n[warn] four warnings found\n[info] done compiling\n[warn] multiple main classes detected: run 'show discoveredMainClasses' to see the list\n[info] 11 file(s) merged using strategy 'Rename' (Run the task at debug level to see the details)\n[info] 66 file(s) merged using strategy 'Discard' (Run the task at debug level to see the details)\n[info] Built: /build/target/scala-3.2.1/LibreCaptcha.jar\n[info] Jar hash: 17b0f84fbee83d1ea2661a3797df970891011844\n[success] Total time: 11 s, completed Dec 26, 2022, 2:44:48 AM\nRemoving intermediate container 2e8f7502b544\n ---> 0b360f0a0ab0\nStep 17/26 : FROM adoptopenjdk/openjdk16:alpine-jre  AS base-core\nalpine-jre: Pulling from adoptopenjdk/openjdk16\nc7ed990a2339: Already exists\n809a45ce5ec3: Pulling fs layer\nc123d5f2a53c: Pulling fs layer\n809a45ce5ec3: Download complete\n809a45ce5ec3: Pull complete\nc123d5f2a53c: Verifying Checksum\nc123d5f2a53c: Download complete\nc123d5f2a53c: Pull complete\nDigest: sha256:32ae498c2b0108862d8ae26df7fd9df15568fd59a1b052ba3fb0823d3f668ef5\nStatus: Downloaded newer image for adoptopenjdk/openjdk16:alpine-jre\n ---> 16ef634b9e12\nStep 18/26 : ENV JAVA_HOME=\"/usr/lib/jvm/default-jvm/\"\n ---> Running in fd00acf0f05f\nRemoving intermediate container fd00acf0f05f\n ---> b1cec6914b6a\nStep 19/26 : RUN apk add --update ttf-dejavu\n ---> Running in 8413beedecf7\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.14/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.14/community/x86_64/APKINDEX.tar.gz\n(1/11) Installing expat (2.5.0-r0)\n(2/11) Installing brotli-libs (1.0.9-r5)\n(3/11) Installing libbz2 (1.0.8-r1)\n(4/11) Installing libpng (1.6.37-r1)\n(5/11) Installing freetype (2.10.4-r3)\n(6/11) Installing libuuid (2.37.4-r0)\n(7/11) Installing fontconfig (2.13.1-r4)\n(8/11) Installing encodings (1.0.5-r0)\n(9/11) Installing libfontenc (1.1.4-r0)\n(10/11) Installing mkfontscale (1.2.1-r1)\n(11/11) Installing ttf-dejavu (2.37-r1)\nExecuting busybox-1.33.1-r8.trigger\nExecuting fontconfig-2.13.1-r4.trigger\nExecuting mkfontscale-1.2.1-r1.trigger\nOK: 30 MiB in 28 packages\nRemoving intermediate container 8413beedecf7\n ---> 9ed4004da7f1\nStep 20/26 : ENV PATH=$PATH:${JAVA_HOME}/bin\n ---> Running in 2921c228e29c\nRemoving intermediate container 2921c228e29c\n ---> ed207aa22cd4\nStep 21/26 : FROM base-core\n ---> ed207aa22cd4\nStep 22/26 : WORKDIR /lc-core\n ---> Running in 94d7ec965b57\nRemoving intermediate container 94d7ec965b57\n ---> 63f0f8e9d8e7\nStep 23/26 : COPY --from=builder /build/target/scala-3.2.1/LibreCaptcha.jar .\n ---> 13c893fcaf47\nStep 24/26 : RUN mkdir data/\n ---> Running in 8cb645b804da\nRemoving intermediate container 8cb645b804da\n ---> 46d7fc2281c1\nStep 25/26 : EXPOSE 8888\n ---> Running in f75ffdedd493\nRemoving intermediate container f75ffdedd493\n ---> 46d30994c8e6\nStep 26/26 : CMD [ \"java\", \"-jar\", \"LibreCaptcha.jar\" ]\n ---> Running in 7615257c96e2\nRemoving intermediate container 7615257c96e2\n ---> 4ef7756953d7\nSuccessfully built 4ef7756953d7\nSuccessfully tagged lc-core:latest\n","stderr":"","imageSize":204151015},"repair":{"violations":[],"repairedDockerfile":"FROM adoptopenjdk/openjdk16:alpine AS base-builder\nARG SBT_VERSION=1.7.1\nRUN apk add --no-cache bash\nENV JAVA_HOME=\"/usr/lib/jvm/default-jvm/\"\nENV PATH=$PATH:${JAVA_HOME}/bin\nRUN \\\n\twget -O sbt-$SBT_VERSION.tgz https://github.com/sbt/sbt/releases/download/v$SBT_VERSION/sbt-$SBT_VERSION.tgz && \\\n        tar -xzvf sbt-$SBT_VERSION.tgz && \\\n        rm sbt-$SBT_VERSION.tgz\n\nENV PATH=$PATH:/sbt/bin/\n\n\nFROM base-builder AS sbt-builder\nWORKDIR /build\nCOPY lib/ lib/\nCOPY project/plugins.sbt project/\nCOPY build.sbt .\nRUN sbt assembly\n\nFROM sbt-builder as builder\nCOPY src/ src/\nRUN sbt assembly\n\nFROM adoptopenjdk/openjdk16:alpine-jre  AS base-core\nENV JAVA_HOME=\"/usr/lib/jvm/default-jvm/\"\nRUN apk add --update ttf-dejavu\nENV PATH=$PATH:${JAVA_HOME}/bin\n\n\nFROM base-core\nWORKDIR /lc-core\nCOPY --from=builder /build/target/scala-3.2.1/LibreCaptcha.jar .\nRUN mkdir data/\n\nEXPOSE 8888\n\nCMD [ \"java\", \"-jar\", \"LibreCaptcha.jar\" ]\n"},"endTime":1672022704257}