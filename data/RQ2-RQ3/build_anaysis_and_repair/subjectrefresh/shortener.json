{"repository":"https://github.com/subjectrefresh/shortener","dockerfilePath":"Dockerfile","startTime":1672311439657,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/subjectrefresh/shortener'...\n","error":null,"commit":"5879ab50cf4ff76d8c85195b54aa501995f8506f"},"originalBuild":{"startTimestamp":1672311440475,"endTimestamp":1672311521297,"error":{"code":1,"killed":false,"signal":null,"cmd":"docker build --no-cache --force-rm -t shortener:latest -f /tmp/dinghy-analysis/subjectrefresh/shortener/Dockerfile ."},"stdout":"Sending build context to Docker daemon  328.7kB\r\r\nStep 1/19 : FROM node:8-alpine AS base\n8-alpine: Pulling from library/node\ne6b0cf9c0882: Pulling fs layer\n93f9cf0467ca: Pulling fs layer\na564402f98da: Pulling fs layer\nb68680f1d28f: Pulling fs layer\nb68680f1d28f: Waiting\na564402f98da: Verifying Checksum\na564402f98da: Download complete\ne6b0cf9c0882: Verifying Checksum\ne6b0cf9c0882: Download complete\n93f9cf0467ca: Verifying Checksum\n93f9cf0467ca: Download complete\nb68680f1d28f: Download complete\ne6b0cf9c0882: Pull complete\n93f9cf0467ca: Pull complete\na564402f98da: Pull complete\nb68680f1d28f: Pull complete\nDigest: sha256:38f7bf07ffd72ac612ec8c829cb20ad416518dbb679768d7733c93175453f4d4\nStatus: Downloaded newer image for node:8-alpine\n ---> 2b8fcdc6230a\nStep 2/19 : WORKDIR /shortener\n ---> Running in 275f27aeec6b\nRemoving intermediate container 275f27aeec6b\n ---> ebd6b80176b3\nStep 3/19 : RUN apk add --no-cache git\n ---> Running in c5e2e917a8fd\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.11/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.11/community/x86_64/APKINDEX.tar.gz\n(1/6) Installing ca-certificates (20191127-r2)\n(2/6) Installing nghttp2-libs (1.40.0-r1)\n(3/6) Installing libcurl (7.79.1-r0)\n(4/6) Installing expat (2.2.9-r1)\n(5/6) Installing pcre2 (10.34-r1)\n(6/6) Installing git (2.24.4-r0)\nExecuting busybox-1.31.1-r8.trigger\nExecuting ca-certificates-20191127-r2.trigger\nOK: 23 MiB in 22 packages\nRemoving intermediate container c5e2e917a8fd\n ---> 94c3fd74c830\nStep 4/19 : COPY package.json package-lock.json ./\n ---> d667bcaeff37\nStep 5/19 : FROM base AS dependencies\n ---> d667bcaeff37\nStep 6/19 : RUN npm set progress=false && npm config set depth 0 && npm cache clean --force\n ---> Running in b326b546f572\n\u001b[91mnpm\u001b[0m\u001b[91m WARN using --force I sure hope you know what you are doing.\n\u001b[0mRemoving intermediate container b326b546f572\n ---> 2fcf070cd215\nStep 7/19 : RUN npm install --only=production\n ---> Running in b71249201f03\n\u001b[91mnpm WARN deprecated har-validator@5.1.5: this library is no longer supported\n\u001b[0m\u001b[91mnpm WARN deprecated uuid@3.4.0: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.\n\u001b[0m\u001b[91mnpm WARN deprecated mongodb@2.0.34: Please upgrade to 2.2.19 or higher\n\u001b[0m\u001b[91mnpm WARN deprecated bson@0.3.2: Fixed a critical issue with BSON serialization documented in CVE-2019-2391, see https://bit.ly/2KcpXdo for more details\n\u001b[0m\u001b[91mnpm WARN deprecated\u001b[0m\u001b[91m bson@0.4.23: Fixed a critical issue with BSON serialization documented in CVE-2019-2391, see https://bit.ly/2KcpXdo for more details\n\u001b[0m\n> kerberos@0.0.24 install /shortener/node_modules/kerberos\n> (node-gyp rebuild) || (exit 0)\n\n\u001b[91mgyp\u001b[0m\u001b[91m \u001b[0m\u001b[91mERR!\u001b[0m\u001b[91m \u001b[0m\u001b[91mfind Python\u001b[0m\u001b[91m \n\u001b[0m\u001b[91mgyp\u001b[0m\u001b[91m \u001b[0m\u001b[91mERR!\u001b[0m\u001b[91m \u001b[0m\u001b[91mfind Python\u001b[0m\u001b[91m Python is not set from command line or npm configuration\ngyp \u001b[0m\u001b[91mERR! \u001b[0m\u001b[91mfind Python\u001b[0m\u001b[91m Python is not set from environment variable PYTHON\n\u001b[0m\u001b[91mgyp \u001b[0m\u001b[91mERR! \u001b[0m\u001b[91mfind Python checking if \"python\" can be used\ngyp\u001b[0m\u001b[91m ERR!\u001b[0m\u001b[91m \u001b[0m\u001b[91mfind Python - \"python\" is not in PATH or produced an error\n\u001b[0m\u001b[91mgyp\u001b[0m\u001b[91m \u001b[0m\u001b[91mERR! \u001b[0m\u001b[91mfind Python\u001b[0m\u001b[91m checking if \"python2\" can be used\ngyp\u001b[0m\u001b[91m ERR!\u001b[0m\u001b[91m find Python\u001b[0m\u001b[91m - \"python2\" is not in PATH or produced an error\n\u001b[0m\u001b[91mgyp \u001b[0m\u001b[91mERR! \u001b[0m\u001b[91mfind Python\u001b[0m\u001b[91m checking if \"python3\" can be used\n\u001b[0m\u001b[91mgyp ERR!\u001b[0m\u001b[91m find Python\u001b[0m\u001b[91m - \"python3\" is not in PATH or produced an error\ngyp\u001b[0m\u001b[91m ERR!\u001b[0m\u001b[91m find Python\u001b[0m\u001b[91m \n\u001b[0m\u001b[91mgyp\u001b[0m\u001b[91m ERR!\u001b[0m\u001b[91m \u001b[0m\u001b[91mfind Python **********************************************************\n\u001b[0m\u001b[91mgyp \u001b[0m\u001b[91mERR! \u001b[0m\u001b[91mfind Python\u001b[0m\u001b[91m You need to install the latest version of Python.\n\u001b[0m\u001b[91mgyp \u001b[0m\u001b[91mERR! \u001b[0m\u001b[91mfind Python\u001b[0m\u001b[91m Node-gyp should be able to find and use Python. If not,\n\u001b[0m\u001b[91mgyp \u001b[0m\u001b[91mERR!\u001b[0m\u001b[91m \u001b[0m\u001b[91mfind Python you can try one of the following options:\n\u001b[0m\u001b[91mgyp \u001b[0m\u001b[91mERR!\u001b[0m\u001b[91m find Python\u001b[0m\u001b[91m - Use the switch --python=\"/path/to/pythonexecutable\"\ngyp\u001b[0m\u001b[91m ERR!\u001b[0m\u001b[91m find Python\u001b[0m\u001b[91m   (accepted by both node-gyp and npm)\n\u001b[0m\u001b[91mgyp\u001b[0m\u001b[91m ERR!\u001b[0m\u001b[91m \u001b[0m\u001b[91mfind Python\u001b[0m\u001b[91m - Set the environment variable PYTHON\n\u001b[0m\u001b[91mgyp\u001b[0m\u001b[91m \u001b[0m\u001b[91mERR!\u001b[0m\u001b[91m \u001b[0m\u001b[91mfind Python\u001b[0m\u001b[91m - Set the npm configuration variable python:\ngyp\u001b[0m\u001b[91m \u001b[0m\u001b[91mERR!\u001b[0m\u001b[91m \u001b[0m\u001b[91mfind Python   npm config set python \"/path/to/pythonexecutable\"\n\u001b[0m\u001b[91mgyp\u001b[0m\u001b[91m ERR!\u001b[0m\u001b[91m find Python\u001b[0m\u001b[91m For more information consult the documentation at:\ngyp\u001b[0m\u001b[91m ERR!\u001b[0m\u001b[91m find Python\u001b[0m\u001b[91m https://github.com/nodejs/node-gyp#installation\ngyp\u001b[0m\u001b[91m ERR!\u001b[0m\u001b[91m find Python\u001b[0m\u001b[91m **********************************************************\ngyp\u001b[0m\u001b[91m ERR!\u001b[0m\u001b[91m find Python\u001b[0m\u001b[91m \n\u001b[0m\u001b[91mgyp\u001b[0m\u001b[91m \u001b[0m\u001b[91mERR!\u001b[0m\u001b[91m \u001b[0m\u001b[91mconfigure error\u001b[0m\u001b[91m \n\u001b[0m\u001b[91mgyp \u001b[0m\u001b[91mERR!\u001b[0m\u001b[91m \u001b[0m\u001b[91mstack Error: Could not find any Python installation to use\n\u001b[0m\u001b[91mgyp \u001b[0m\u001b[91mERR!\u001b[0m\u001b[91m \u001b[0m\u001b[91mstack\u001b[0m\u001b[91m     at PythonFinder.fail (/usr/local/lib/node_modules/npm/node_modules/node-gyp/lib/find-python.js:307:47)\ngyp\u001b[0m\u001b[91m \u001b[0m\u001b[91mERR! \u001b[0m\u001b[91mstack\u001b[0m\u001b[91m     at PythonFinder.runChecks (/usr/local/lib/node_modules/npm/node_modules/node-gyp/lib/find-python.js:136:21)\ngyp\u001b[0m\u001b[91m ERR!\u001b[0m\u001b[91m stack\u001b[0m\u001b[91m     at PythonFinder.<anonymous> (/usr/local/lib/node_modules/npm/node_modules/node-gyp/lib/find-python.js:179:16)\ngyp \u001b[0m\u001b[91mERR! \u001b[0m\u001b[91mstack     at PythonFinder.execFileCallback (/usr/local/lib/node_modules/npm/node_modules/node-gyp/lib/find-python.js:271:16)\n\u001b[0m\u001b[91mgyp \u001b[0m\u001b[91mERR!\u001b[0m\u001b[91m stack\u001b[0m\u001b[91m     at exithandler (child_process.js:288:5)\ngyp\u001b[0m\u001b[91m ERR!\u001b[0m\u001b[91m stack\u001b[0m\u001b[91m     at ChildProcess.errorhandler (child_process.js:300:5)\ngyp\u001b[0m\u001b[91m \u001b[0m\u001b[91mERR! \u001b[0m\u001b[91mstack\u001b[0m\u001b[91m     at emitOne (events.js:116:13)\ngyp\u001b[0m\u001b[91m \u001b[0m\u001b[91mERR!\u001b[0m\u001b[91m \u001b[0m\u001b[91mstack\u001b[0m\u001b[91m     at ChildProcess.emit (events.js:211:7)\ngyp\u001b[0m\u001b[91m \u001b[0m\u001b[91mERR!\u001b[0m\u001b[91m stack\u001b[0m\u001b[91m     at Process.ChildProcess._handle.onexit (internal/child_process.js:196:12)\n\u001b[0m\u001b[91mgyp \u001b[0m\u001b[91mERR!\u001b[0m\u001b[91m \u001b[0m\u001b[91mstack     at onErrorNT (internal/child_process.js:362:16)\n\u001b[0m\u001b[91mgyp \u001b[0m\u001b[91mERR!\u001b[0m\u001b[91m \u001b[0m\u001b[91mSystem\u001b[0m\u001b[91m Linux 5.4.0-113-generic\n\u001b[0m\u001b[91mgyp \u001b[0m\u001b[91mERR! \u001b[0m\u001b[91mcommand \"/usr/local/bin/node\" \"/usr/local/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js\" \"rebuild\"\n\u001b[0m\u001b[91mgyp\u001b[0m\u001b[91m \u001b[0m\u001b[91mERR!\u001b[0m\u001b[91m \u001b[0m\u001b[91mcwd\u001b[0m\u001b[91m /shortener/node_modules/kerberos\n\u001b[0m\u001b[91mgyp \u001b[0m\u001b[91mERR!\u001b[0m\u001b[91m node -v\u001b[0m\u001b[91m v8.17.0\n\u001b[0m\u001b[91mgyp \u001b[0m\u001b[91mERR!\u001b[0m\u001b[91m node-gyp -v\u001b[0m\u001b[91m v5.0.5\n\u001b[0m\u001b[91mgyp \u001b[0m\u001b[91mERR!\u001b[0m\u001b[91m \u001b[0m\u001b[91mnot ok \n\u001b[0m\n> bson-ext@0.1.13 install /shortener/node_modules/bson-ext\n> (node-gyp rebuild 2> builderror.log) || (exit 0)\n\nadded 225 packages from 203 contributors and audited 486 packages in 11.618s\n\n1 package is looking for funding\n  run `npm fund` for details\n\nfound 120 vulnerabilities (8 low, 31 moderate, 58 high, 23 critical)\n  run `npm audit fix` to fix them, or `npm audit` for details\nRemoving intermediate container b71249201f03\n ---> 60004ace7e64\nStep 8/19 : RUN cp -R node_modules prod_node_modules\n ---> Running in edfaba3da5cf\nRemoving intermediate container edfaba3da5cf\n ---> a92c5c8a6286\nStep 9/19 : RUN npm install\n ---> Running in d10565a9b22e\n\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@1.1.2 (node_modules/fsevents):\n\u001b[0m\u001b[91mnpm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.1.2: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91m\n\u001b[0madded 149 packages from 89 contributors and audited 489 packages in 6.211s\n\n1 package is looking for funding\n  run `npm fund` for details\n\nfound 120 vulnerabilities (8 low, 31 moderate, 58 high, 23 critical)\n  run `npm audit fix` to fix them, or `npm audit` for details\nRemoving intermediate container d10565a9b22e\n ---> 29b32c166dd0\nStep 10/19 : FROM dependencies AS build\n ---> 29b32c166dd0\nStep 11/19 : COPY . .\n ---> 06b712185c14\nStep 12/19 : RUN npm run build:docs\n ---> Running in a69b674f0cf3\n\n> shortener@2.0.19 build:docs /shortener\n> apidoc -i controllers/ -o docs\n\n\u001b[91mmodule.js:550\n    throw err;\n    ^\n\nError: Cannot find module 'has-color'\n    at Function.Module._resolveFilename (module.js:548:15)\n    at Function.Module._load (module.js:475:25)\n    at Module.require (module.js:597:17)\n    at require (internal/module.js:11:18)\n    at Object.<anonymous> (/shortener/node_modules/nomnom/node_modules/chalk/index.js:4:16)\n    at Module._compile (module.js:653:30)\n    at Object.Module._extensions..js (module.js:664:10)\n    at Module.load (module.js:566:32)\n    at tryModuleLoad (module.js:506:12)\n    at Function.Module._load (module.js:498:3)\n\u001b[0m\u001b[91mnpm ERR! code ELIFECYCLE\nnpm \u001b[0m\u001b[91mERR! errno\u001b[0m\u001b[91m 1\n\u001b[0m\u001b[91mnpm ERR!\u001b[0m\u001b[91m shortener@2.0.19 build:docs: `apidoc -i controllers/ -o docs`\nnpm ERR! Exit status 1\n\u001b[0m\u001b[91mnpm ERR! \n\u001b[0m\u001b[91mnpm\u001b[0m\u001b[91m ERR!\u001b[0m\u001b[91m Failed at the shortener@2.0.19 build:docs script.\n\u001b[0m\u001b[91mnpm \u001b[0m\u001b[91mERR! This is probably not a problem with npm. There is likely additional logging output above.\n\u001b[0m\u001b[91m\n\u001b[0m\u001b[91mnpm\u001b[0m\u001b[91m \u001b[0m\u001b[91mERR!\u001b[0m\u001b[91m A complete log of this run can be found in:\nnpm\u001b[0m\u001b[91m ERR!\u001b[0m\u001b[91m     /root/.npm/_logs/2022-12-29T10_58_40_354Z-debug.log\n\u001b[0mRemoving intermediate container a69b674f0cf3\n","stderr":"The command '/bin/sh -c npm run build:docs' returned a non-zero code: 1\n"},"endTime":1672311521413}