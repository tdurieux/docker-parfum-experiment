{"repository":"https://github.com/sgratzl/slack-cleaner","dockerfilePath":"Dockerfile","startTime":1672802737917,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/sgratzl/slack-cleaner'...\n","error":null,"commit":"a91b2ea0b3c7f0c2f24296ee45fcb4cf2f1a1962"},"originalBuild":{"startTimestamp":1672802738692,"endTimestamp":1672802763219,"error":null,"stdout":"Sending build context to Docker daemon  157.7kB\r\r\nStep 1/10 : FROM python:3.7-alpine\n3.7-alpine: Pulling from library/python\nc158987b0551: Already exists\n7ec3a91b66d9: Already exists\n806cc3ffa521: Pulling fs layer\n9a88ff2414d3: Pulling fs layer\n1200e05bcad2: Pulling fs layer\n9a88ff2414d3: Download complete\n1200e05bcad2: Verifying Checksum\n1200e05bcad2: Download complete\n806cc3ffa521: Verifying Checksum\n806cc3ffa521: Download complete\n806cc3ffa521: Pull complete\n9a88ff2414d3: Pull complete\n1200e05bcad2: Pull complete\nDigest: sha256:f1878142fbb04f418c3f67f78708559887ed5487dbe9bfcb191e726548c3f89e\nStatus: Downloaded newer image for python:3.7-alpine\n ---> 23de60bcccb1\nStep 2/10 : LABEL maintainer=\"Samuel Gratzl <sam@sgratzl.com>\"\n ---> Running in 69d1c146bc69\nRemoving intermediate container 69d1c146bc69\n ---> 4817fa491f59\nStep 3/10 : VOLUME [\"/backup\"]\n ---> Running in 1218acf2083e\nRemoving intermediate container 1218acf2083e\n ---> 99cb82726351\nStep 4/10 : WORKDIR /backup\n ---> Running in c8424f68c552\nRemoving intermediate container c8424f68c552\n ---> 4e981d16c721\nStep 5/10 : ENTRYPOINT [\"/bin/bash\"]\n ---> Running in 18ff2894498b\nRemoving intermediate container 18ff2894498b\n ---> 6aa4f16097c4\nStep 6/10 : RUN apk add --update bash && rm -rf /var/cache/apk/*\n ---> Running in d3a80303e082\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/1) Installing bash (5.2.15-r0)\nExecuting bash-5.2.15-r0.post-install\nExecuting busybox-1.35.0-r29.trigger\nOK: 17 MiB in 38 packages\nRemoving intermediate container d3a80303e082\n ---> a00c8a81851a\nStep 7/10 : RUN pip install slacker colorama\n ---> Running in 42a86f7ab1b7\nCollecting slacker\n  Downloading slacker-0.14.0.tar.gz (10 kB)\n  Preparing metadata (setup.py): started\n  Preparing metadata (setup.py): finished with status 'done'\nCollecting colorama\n  Downloading colorama-0.4.6-py2.py3-none-any.whl (25 kB)\nCollecting requests>=2.2.1\n  Downloading requests-2.28.1-py3-none-any.whl (62 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 62.8/62.8 KB 4.1 MB/s eta 0:00:00\nCollecting charset-normalizer<3,>=2\n  Downloading charset_normalizer-2.1.1-py3-none-any.whl (39 kB)\nCollecting urllib3<1.27,>=1.21.1\n  Downloading urllib3-1.26.13-py2.py3-none-any.whl (140 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 140.6/140.6 KB 11.1 MB/s eta 0:00:00\nCollecting idna<4,>=2.5\n  Downloading idna-3.4-py3-none-any.whl (61 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 61.5/61.5 KB 5.9 MB/s eta 0:00:00\nCollecting certifi>=2017.4.17\n  Downloading certifi-2022.12.7-py3-none-any.whl (155 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 155.3/155.3 KB 14.2 MB/s eta 0:00:00\nBuilding wheels for collected packages: slacker\n  Building wheel for slacker (setup.py): started\n  Building wheel for slacker (setup.py): finished with status 'done'\n  Created wheel for slacker: filename=slacker-0.14.0-py3-none-any.whl size=9396 sha256=42aad39919893a48d3172bf1c28d586067ec4f9bd439d736fe0b4523fa0abb7b\n  Stored in directory: /root/.cache/pip/wheels/96/03/7c/42cc27629dce1e0749cfb436300ae5965ccb9c4f7029527e34\nSuccessfully built slacker\nInstalling collected packages: urllib3, idna, colorama, charset-normalizer, certifi, requests, slacker\nSuccessfully installed certifi-2022.12.7 charset-normalizer-2.1.1 colorama-0.4.6 idna-3.4 requests-2.28.1 slacker-0.14.0 urllib3-1.26.13\n\u001b[91mWARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv\n\u001b[0m\u001b[91mWARNING: You are using pip version 22.0.4; however, version 22.3.1 is available.\nYou should consider upgrading via the '/usr/local/bin/python -m pip install --upgrade pip' command.\n\u001b[0mRemoving intermediate container 42a86f7ab1b7\n ---> 2ee571828a33\nStep 8/10 : ADD . /data\n ---> b718d52b729d\nStep 9/10 : RUN pip install -r /data/requirements.txt\n ---> Running in ecb9a929b23f\nRequirement already satisfied: slacker>=0.13.0 in /usr/local/lib/python3.7/site-packages (from -r /data/requirements.txt (line 1)) (0.14.0)\nRequirement already satisfied: colorama in /usr/local/lib/python3.7/site-packages (from -r /data/requirements.txt (line 2)) (0.4.6)\nRequirement already satisfied: requests>=2.2.1 in /usr/local/lib/python3.7/site-packages (from slacker>=0.13.0->-r /data/requirements.txt (line 1)) (2.28.1)\nRequirement already satisfied: idna<4,>=2.5 in /usr/local/lib/python3.7/site-packages (from requests>=2.2.1->slacker>=0.13.0->-r /data/requirements.txt (line 1)) (3.4)\nRequirement already satisfied: urllib3<1.27,>=1.21.1 in /usr/local/lib/python3.7/site-packages (from requests>=2.2.1->slacker>=0.13.0->-r /data/requirements.txt (line 1)) (1.26.13)\nRequirement already satisfied: charset-normalizer<3,>=2 in /usr/local/lib/python3.7/site-packages (from requests>=2.2.1->slacker>=0.13.0->-r /data/requirements.txt (line 1)) (2.1.1)\nRequirement already satisfied: certifi>=2017.4.17 in /usr/local/lib/python3.7/site-packages (from requests>=2.2.1->slacker>=0.13.0->-r /data/requirements.txt (line 1)) (2022.12.7)\n\u001b[91mWARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv\n\u001b[0m\u001b[91mWARNING: You are using pip version 22.0.4; however, version 22.3.1 is available.\nYou should consider upgrading via the '/usr/local/bin/python -m pip install --upgrade pip' command.\n\u001b[0mRemoving intermediate container ecb9a929b23f\n ---> b954d5c88efd\nStep 10/10 : RUN pip install /data\n ---> Running in d2a31daa9952\nProcessing /data\n  Preparing metadata (setup.py): started\n  Preparing metadata (setup.py): finished with status 'done'\nRequirement already satisfied: setuptools in /usr/local/lib/python3.7/site-packages (from slack-cleaner==0.7.4) (57.5.0)\nRequirement already satisfied: slacker>=0.13 in /usr/local/lib/python3.7/site-packages (from slack-cleaner==0.7.4) (0.14.0)\nRequirement already satisfied: colorama in /usr/local/lib/python3.7/site-packages (from slack-cleaner==0.7.4) (0.4.6)\nRequirement already satisfied: requests>=2.2.1 in /usr/local/lib/python3.7/site-packages (from slacker>=0.13->slack-cleaner==0.7.4) (2.28.1)\nRequirement already satisfied: charset-normalizer<3,>=2 in /usr/local/lib/python3.7/site-packages (from requests>=2.2.1->slacker>=0.13->slack-cleaner==0.7.4) (2.1.1)\nRequirement already satisfied: certifi>=2017.4.17 in /usr/local/lib/python3.7/site-packages (from requests>=2.2.1->slacker>=0.13->slack-cleaner==0.7.4) (2022.12.7)\nRequirement already satisfied: idna<4,>=2.5 in /usr/local/lib/python3.7/site-packages (from requests>=2.2.1->slacker>=0.13->slack-cleaner==0.7.4) (3.4)\nRequirement already satisfied: urllib3<1.27,>=1.21.1 in /usr/local/lib/python3.7/site-packages (from requests>=2.2.1->slacker>=0.13->slack-cleaner==0.7.4) (1.26.13)\nBuilding wheels for collected packages: slack-cleaner\n  Building wheel for slack-cleaner (setup.py): started\n  Building wheel for slack-cleaner (setup.py): finished with status 'done'\n  Created wheel for slack-cleaner: filename=slack_cleaner-0.7.4-py3-none-any.whl size=12098 sha256=219b7ba185574ab474a61da3c5fd03884ea18879dba3511162b6f11edf219f0b\n  Stored in directory: /tmp/pip-ephem-wheel-cache-vyxuyttj/wheels/48/65/70/a81ced4bac2c325fcbebef6aabfc0d634cd771b04ebb794375\nSuccessfully built slack-cleaner\nInstalling collected packages: slack-cleaner\nSuccessfully installed slack-cleaner-0.7.4\n\u001b[91mWARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv\n\u001b[0m\u001b[91mWARNING: You are using pip version 22.0.4; however, version 22.3.1 is available.\nYou should consider upgrading via the '/usr/local/bin/python -m pip install --upgrade pip' command.\n\u001b[0mRemoving intermediate container d2a31daa9952\n ---> 0e24f1ba3b43\nSuccessfully built 0e24f1ba3b43\nSuccessfully tagged slack-cleaner:latest\n","stderr":"","imageSize":59487135},"repair":{"violations":[{"name":"pipUseNoCacheDir","position":{"start":10,"end":10,"columnStart":4,"columnEnd":32}},{"name":"pipUseNoCacheDir","position":{"start":13,"end":13,"columnStart":4,"columnEnd":41}},{"name":"pipUseNoCacheDir","position":{"start":14,"end":14,"columnStart":4,"columnEnd":21}},{"name":"apkAddUseNoCache","position":{"start":8,"end":8,"columnStart":4,"columnEnd":25}}],"repairedDockerfile":"FROM python:3.7-alpine\n\nLABEL maintainer=\"Samuel Gratzl <sam@sgratzl.com>\"\n\nVOLUME [\"/backup\"]\nWORKDIR /backup\nENTRYPOINT [\"/bin/bash\"]\n\nRUN apk add --no-cache --update bash && rm -rf /var/cache/apk/*\n# for better layers\nRUN pip install --no-cache-dir slacker colorama\n\nADD . /data\nRUN pip install --no-cache-dir -r /data/requirements.txt\nRUN pip install --no-cache-dir /data\n"},"repairedBuild":{"startTimestamp":1672802763625,"endTimestamp":1672802781010,"error":null,"stdout":"Sending build context to Docker daemon  157.7kB\r\r\nStep 1/10 : FROM python:3.7-alpine\n ---> 23de60bcccb1\nStep 2/10 : LABEL maintainer=\"Samuel Gratzl <sam@sgratzl.com>\"\n ---> Running in 55bba8659ea7\nRemoving intermediate container 55bba8659ea7\n ---> e03495269fc4\nStep 3/10 : VOLUME [\"/backup\"]\n ---> Running in 417e433cc7e7\nRemoving intermediate container 417e433cc7e7\n ---> e8fec9775123\nStep 4/10 : WORKDIR /backup\n ---> Running in 58032807c6ed\nRemoving intermediate container 58032807c6ed\n ---> 00756abdecc9\nStep 5/10 : ENTRYPOINT [\"/bin/bash\"]\n ---> Running in be8012251283\nRemoving intermediate container be8012251283\n ---> 5e90891da9b9\nStep 6/10 : RUN apk add --no-cache --update bash && rm -rf /var/cache/apk/*\n ---> Running in ec6107f7a8e1\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/1) Installing bash (5.2.15-r0)\nExecuting bash-5.2.15-r0.post-install\nExecuting busybox-1.35.0-r29.trigger\nOK: 17 MiB in 38 packages\nRemoving intermediate container ec6107f7a8e1\n ---> 8aba03ed7759\nStep 7/10 : RUN pip install --no-cache-dir slacker colorama\n ---> Running in 27cff5afe931\nCollecting slacker\n  Downloading slacker-0.14.0.tar.gz (10 kB)\n  Preparing metadata (setup.py): started\n  Preparing metadata (setup.py): finished with status 'done'\nCollecting colorama\n  Downloading colorama-0.4.6-py2.py3-none-any.whl (25 kB)\nCollecting requests>=2.2.1\n  Downloading requests-2.28.1-py3-none-any.whl (62 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 62.8/62.8 KB 95.3 MB/s eta 0:00:00\nCollecting charset-normalizer<3,>=2\n  Downloading charset_normalizer-2.1.1-py3-none-any.whl (39 kB)\nCollecting idna<4,>=2.5\n  Downloading idna-3.4-py3-none-any.whl (61 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 61.5/61.5 KB 60.3 MB/s eta 0:00:00\nCollecting urllib3<1.27,>=1.21.1\n  Downloading urllib3-1.26.13-py2.py3-none-any.whl (140 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 140.6/140.6 KB 105.6 MB/s eta 0:00:00\nCollecting certifi>=2017.4.17\n  Downloading certifi-2022.12.7-py3-none-any.whl (155 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 155.3/155.3 KB 179.7 MB/s eta 0:00:00\nBuilding wheels for collected packages: slacker\n  Building wheel for slacker (setup.py): started\n  Building wheel for slacker (setup.py): finished with status 'done'\n  Created wheel for slacker: filename=slacker-0.14.0-py3-none-any.whl size=9396 sha256=8b15192192ec950f56e080321dd16d97e60523e6232b240b316394856168eba6\n  Stored in directory: /tmp/pip-ephem-wheel-cache-fc53uszi/wheels/96/03/7c/42cc27629dce1e0749cfb436300ae5965ccb9c4f7029527e34\nSuccessfully built slacker\nInstalling collected packages: urllib3, idna, colorama, charset-normalizer, certifi, requests, slacker\nSuccessfully installed certifi-2022.12.7 charset-normalizer-2.1.1 colorama-0.4.6 idna-3.4 requests-2.28.1 slacker-0.14.0 urllib3-1.26.13\n\u001b[91mWARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv\n\u001b[0m\u001b[91mWARNING: You are using pip version 22.0.4; however, version 22.3.1 is available.\nYou should consider upgrading via the '/usr/local/bin/python -m pip install --upgrade pip' command.\n\u001b[0mRemoving intermediate container 27cff5afe931\n ---> 5df4e360f94f\nStep 8/10 : ADD . /data\n ---> b1d95f9d9942\nStep 9/10 : RUN pip install --no-cache-dir -r /data/requirements.txt\n ---> Running in 42db255d0092\nRequirement already satisfied: slacker>=0.13.0 in /usr/local/lib/python3.7/site-packages (from -r /data/requirements.txt (line 1)) (0.14.0)\nRequirement already satisfied: colorama in /usr/local/lib/python3.7/site-packages (from -r /data/requirements.txt (line 2)) (0.4.6)\nRequirement already satisfied: requests>=2.2.1 in /usr/local/lib/python3.7/site-packages (from slacker>=0.13.0->-r /data/requirements.txt (line 1)) (2.28.1)\nRequirement already satisfied: idna<4,>=2.5 in /usr/local/lib/python3.7/site-packages (from requests>=2.2.1->slacker>=0.13.0->-r /data/requirements.txt (line 1)) (3.4)\nRequirement already satisfied: certifi>=2017.4.17 in /usr/local/lib/python3.7/site-packages (from requests>=2.2.1->slacker>=0.13.0->-r /data/requirements.txt (line 1)) (2022.12.7)\nRequirement already satisfied: urllib3<1.27,>=1.21.1 in /usr/local/lib/python3.7/site-packages (from requests>=2.2.1->slacker>=0.13.0->-r /data/requirements.txt (line 1)) (1.26.13)\nRequirement already satisfied: charset-normalizer<3,>=2 in /usr/local/lib/python3.7/site-packages (from requests>=2.2.1->slacker>=0.13.0->-r /data/requirements.txt (line 1)) (2.1.1)\n\u001b[91mWARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv\n\u001b[0m\u001b[91mWARNING: You are using pip version 22.0.4; however, version 22.3.1 is available.\nYou should consider upgrading via the '/usr/local/bin/python -m pip install --upgrade pip' command.\n\u001b[0mRemoving intermediate container 42db255d0092\n ---> e5ee992bf3cd\nStep 10/10 : RUN pip install --no-cache-dir /data\n ---> Running in 2693acc4f544\nProcessing /data\n  Preparing metadata (setup.py): started\n  Preparing metadata (setup.py): finished with status 'done'\nRequirement already satisfied: setuptools in /usr/local/lib/python3.7/site-packages (from slack-cleaner==0.7.4) (57.5.0)\nRequirement already satisfied: slacker>=0.13 in /usr/local/lib/python3.7/site-packages (from slack-cleaner==0.7.4) (0.14.0)\nRequirement already satisfied: colorama in /usr/local/lib/python3.7/site-packages (from slack-cleaner==0.7.4) (0.4.6)\nRequirement already satisfied: requests>=2.2.1 in /usr/local/lib/python3.7/site-packages (from slacker>=0.13->slack-cleaner==0.7.4) (2.28.1)\nRequirement already satisfied: charset-normalizer<3,>=2 in /usr/local/lib/python3.7/site-packages (from requests>=2.2.1->slacker>=0.13->slack-cleaner==0.7.4) (2.1.1)\nRequirement already satisfied: idna<4,>=2.5 in /usr/local/lib/python3.7/site-packages (from requests>=2.2.1->slacker>=0.13->slack-cleaner==0.7.4) (3.4)\nRequirement already satisfied: urllib3<1.27,>=1.21.1 in /usr/local/lib/python3.7/site-packages (from requests>=2.2.1->slacker>=0.13->slack-cleaner==0.7.4) (1.26.13)\nRequirement already satisfied: certifi>=2017.4.17 in /usr/local/lib/python3.7/site-packages (from requests>=2.2.1->slacker>=0.13->slack-cleaner==0.7.4) (2022.12.7)\nBuilding wheels for collected packages: slack-cleaner\n  Building wheel for slack-cleaner (setup.py): started\n  Building wheel for slack-cleaner (setup.py): finished with status 'done'\n  Created wheel for slack-cleaner: filename=slack_cleaner-0.7.4-py3-none-any.whl size=12098 sha256=81bad0bbaf26dfe26ed40deafa9ebd9f60bd5c4f285c5254109967796c0de3b4\n  Stored in directory: /tmp/pip-ephem-wheel-cache-p3zkte98/wheels/48/65/70/a81ced4bac2c325fcbebef6aabfc0d634cd771b04ebb794375\nSuccessfully built slack-cleaner\nInstalling collected packages: slack-cleaner\nSuccessfully installed slack-cleaner-0.7.4\n\u001b[91mWARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv\n\u001b[0m\u001b[91mWARNING: You are using pip version 22.0.4; however, version 22.3.1 is available.\nYou should consider upgrading via the '/usr/local/bin/python -m pip install --upgrade pip' command.\n\u001b[0mRemoving intermediate container 2693acc4f544\n ---> af256e9e0bd4\nSuccessfully built af256e9e0bd4\nSuccessfully tagged slack-cleaner:latest\n","stderr":"","imageSize":58828558},"endTime":1672802781294}