{"repository":"https://github.com/andresch/trackfs","dockerfilePath":"Dockerfile","startTime":1672874588287,"endTime":1672874643035,"clone":{"startTime":1672874588287,"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/andresch/trackfs'...\n","error":null,"endTime":1672874589021,"commit":"23b186b9c4fadc2b5e5f08c03f4bcce9bddff2dc"},"originalBuild":{"startTime":1672874589102,"endTime":1672874620113,"error":null,"stdout":"Sending build context to Docker daemon  213.5kB\r\r\nStep 1/11 : FROM docker.io/python:3.8-alpine as builder\n3.8-alpine: Pulling from library/python\nc158987b0551: Already exists\n7ec3a91b66d9: Already exists\nf9fb575d7a9e: Pulling fs layer\n59c63ce3438e: Pulling fs layer\n4ceace26d08f: Pulling fs layer\n59c63ce3438e: Verifying Checksum\n59c63ce3438e: Download complete\n4ceace26d08f: Verifying Checksum\n4ceace26d08f: Download complete\nf9fb575d7a9e: Verifying Checksum\nf9fb575d7a9e: Download complete\nf9fb575d7a9e: Pull complete\n59c63ce3438e: Pull complete\n4ceace26d08f: Pull complete\nDigest: sha256:7c7063333021414512e2d47232eae8cbdec46a2724265c6817f9eab29ca6e3c8\nStatus: Downloaded newer image for python:3.8-alpine\n ---> 13f1e3678aa9\nStep 2/11 : RUN   apk --no-cache add fuse fuse-dev flac   && /usr/local/bin/python -m pip install --upgrade pip\n ---> Running in 44a661af4677\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/9) Installing libgcc (12.2.1_git20220924-r4)\n(2/9) Installing libogg (1.3.5-r2)\n(3/9) Installing libstdc++ (12.2.1_git20220924-r4)\n(4/9) Installing flac-libs (1.4.2-r0)\n(5/9) Installing flac (1.4.2-r0)\n(6/9) Installing fuse-common (3.12.0-r0)\n(7/9) Installing fuse (2.9.9-r2)\n(8/9) Installing pkgconf (1.9.3-r0)\n(9/9) Installing fuse-dev (2.9.9-r2)\nExecuting busybox-1.35.0-r29.trigger\nOK: 19 MiB in 46 packages\nRequirement already satisfied: pip in /usr/local/lib/python3.8/site-packages (22.0.4)\nCollecting pip\n  Downloading pip-22.3.1-py3-none-any.whl (2.1 MB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 2.1/2.1 MB 32.0 MB/s eta 0:00:00\nInstalling collected packages: pip\n  Attempting uninstall: pip\n    Found existing installation: pip 22.0.4\n    Uninstalling pip-22.0.4:\n      Successfully uninstalled pip-22.0.4\nSuccessfully installed pip-22.3.1\n\u001b[91mWARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv\n\u001b[0mRemoving intermediate container 44a661af4677\n ---> 6d80ee77553b\nStep 3/11 : RUN echo \"user_allow_other\" >> /etc/fuse.conf\n ---> Running in 9a224869d210\nRemoving intermediate container 9a224869d210\n ---> 9940c09f2b96\nStep 4/11 : RUN chmod 666 /etc/passwd\n ---> Running in 3eddbea727fe\nRemoving intermediate container 3eddbea727fe\n ---> d0c2f61f9fdb\nStep 5/11 : ADD https://api.github.com/repos/andresch/trackfs/compare/master...HEAD /dev/null\n\n ---> bdf23c0683ca\nStep 6/11 : RUN   pip install trackfs\\>=0.2.5\n ---> Running in 81ae78d6ce96\nCollecting trackfs>=0.2.5\n  Downloading trackfs-0.2.6-py3-none-any.whl (22 kB)\nCollecting chardet\n  Downloading chardet-5.1.0-py3-none-any.whl (199 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 199.1/199.1 kB 11.4 MB/s eta 0:00:00\nCollecting Lark\n  Downloading lark-1.1.5-py3-none-any.whl (107 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 108.0/108.0 kB 8.6 MB/s eta 0:00:00\nCollecting fusepy\n  Downloading fusepy-3.0.1.tar.gz (11 kB)\n  Preparing metadata (setup.py): started\n  Preparing metadata (setup.py): finished with status 'done'\nCollecting mutagen\n  Downloading mutagen-1.46.0-py3-none-any.whl (193 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 193.6/193.6 kB 10.6 MB/s eta 0:00:00\nBuilding wheels for collected packages: fusepy\n  Building wheel for fusepy (setup.py): started\n  Building wheel for fusepy (setup.py): finished with status 'done'\n  Created wheel for fusepy: filename=fusepy-3.0.1-py3-none-any.whl size=10503 sha256=b5da61d3f6ba4032e8d07461c24da257bfa56a323dfa9caa79782b45b23424ae\n  Stored in directory: /root/.cache/pip/wheels/db/01/ee/105147547cf0ecd1031b26901757e1f17c98902c8cc7bcaa47\nSuccessfully built fusepy\nInstalling collected packages: Lark, fusepy, mutagen, chardet, trackfs\nSuccessfully installed Lark-1.1.5 chardet-5.1.0 fusepy-3.0.1 mutagen-1.46.0 trackfs-0.2.6\n\u001b[91mWARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv\n\u001b[0mRemoving intermediate container 81ae78d6ce96\n ---> 4ba0d9c25011\nStep 7/11 : VOLUME /src\n ---> Running in 9246dfbd0528\nRemoving intermediate container 9246dfbd0528\n ---> 948ffe795381\nStep 8/11 : VOLUME /dst\n ---> Running in 2514831d1e5b\nRemoving intermediate container 2514831d1e5b\n ---> 6d5bc6b7a830\nStep 9/11 : COPY launcher.sh /usr/local/bin/\n ---> 7bb4b1cf6747\nStep 10/11 : RUN chmod 555 /usr/local/bin/launcher.sh\n ---> Running in 4d7a796a2a95\nRemoving intermediate container 4d7a796a2a95\n ---> 101d87648fc6\nStep 11/11 : ENTRYPOINT [\"/usr/local/bin/launcher.sh\", \"/src\", \"/dst\"]\n ---> Running in cac801301135\nRemoving intermediate container cac801301135\n ---> ecd269ca2af2\nSuccessfully built ecd269ca2af2\nSuccessfully tagged trackfs:latest\n","stderr":"","imageSize":74330128},"repair":{"startTime":1672874620181,"endTime":1672874620237,"violations":[{"name":"pipUseNoCacheDir","position":{"start":40,"end":40,"columnStart":2,"columnEnd":29}}],"repairedDockerfile":"# =================================\n# Dockerfile for trackfs\n#\n# Copyright 2020 by Andreas Schmidt\n# All rights reserved.\n# This file is part of the trackfs project\n# and licensed under the terms of the GNU Lesser General Public License v3.0.\n# See https://github.com/andresch/trackfs for details.\n#\n# =================================\n\nFROM docker.io/python:3.8-alpine as builder\n\n# install dependencies \nRUN \\\n  apk --no-cache add fuse fuse-dev flac \\\n  && /usr/local/bin/python -m pip install --upgrade pip\n\n# enable non-root users to make FUSE fs non-private\nRUN echo \"user_allow_other\" >> /etc/fuse.conf\n\n# FUSE requires that the user that mounts the FUSE filesystem\n# has an entry in /etc/passwd\n# Since we want to allow (and encourage) the usage of docker's\n# --user option to run the container as non-root user,\n# and with that don't know the uid of the user at build time\n# we can't create the entry for that user at build time\n# and also can't use adduser command during runtime as this would\n# require root privileges.\n# Instead we open /etc/passwd for writing.\n# As /ets/shadow is still protected this should not cause harm,\n# even if some attacker finds a way to take over the container\n\nRUN chmod 666 /etc/passwd\n\n# Ensure that we get a docker image cache invalidation when there's new content available\nADD https://api.github.com/repos/andresch/trackfs/compare/master...HEAD /dev/null\n\n# Now install the latest trackfs version from pypi\nRUN \\\n  pip install --no-cache-dir trackfs\\>=0.2.5\n\n# source directory containing flac+cue files\nVOLUME /src\n\n# mount point where to generate the tracks from the flac+cue files\nVOLUME /dst\n\nCOPY launcher.sh /usr/local/bin/\nRUN chmod 555 /usr/local/bin/launcher.sh\n\nENTRYPOINT [\"/usr/local/bin/launcher.sh\", \"/src\", \"/dst\"]\n\n\n"},"repairedBuild":{"startTime":1672874620449,"endTime":1672874642737,"error":null,"stdout":"Sending build context to Docker daemon  213.5kB\r\r\nStep 1/11 : FROM docker.io/python:3.8-alpine as builder\n ---> 13f1e3678aa9\nStep 2/11 : RUN   apk --no-cache add fuse fuse-dev flac   && /usr/local/bin/python -m pip install --upgrade pip\n ---> Running in 88ae682b7efd\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/9) Installing libgcc (12.2.1_git20220924-r4)\n(2/9) Installing libogg (1.3.5-r2)\n(3/9) Installing libstdc++ (12.2.1_git20220924-r4)\n(4/9) Installing flac-libs (1.4.2-r0)\n(5/9) Installing flac (1.4.2-r0)\n(6/9) Installing fuse-common (3.12.0-r0)\n(7/9) Installing fuse (2.9.9-r2)\n(8/9) Installing pkgconf (1.9.3-r0)\n(9/9) Installing fuse-dev (2.9.9-r2)\nExecuting busybox-1.35.0-r29.trigger\nOK: 19 MiB in 46 packages\nRequirement already satisfied: pip in /usr/local/lib/python3.8/site-packages (22.0.4)\nCollecting pip\n  Downloading pip-22.3.1-py3-none-any.whl (2.1 MB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 2.1/2.1 MB 42.4 MB/s eta 0:00:00\nInstalling collected packages: pip\n  Attempting uninstall: pip\n    Found existing installation: pip 22.0.4\n    Uninstalling pip-22.0.4:\n      Successfully uninstalled pip-22.0.4\nSuccessfully installed pip-22.3.1\n\u001b[91mWARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv\n\u001b[0mRemoving intermediate container 88ae682b7efd\n ---> 5e796e38010d\nStep 3/11 : RUN echo \"user_allow_other\" >> /etc/fuse.conf\n ---> Running in 0857e6519e86\nRemoving intermediate container 0857e6519e86\n ---> 718175c6ea7c\nStep 4/11 : RUN chmod 666 /etc/passwd\n ---> Running in 833f1b362e75\nRemoving intermediate container 833f1b362e75\n ---> de76d5c46eb2\nStep 5/11 : ADD https://api.github.com/repos/andresch/trackfs/compare/master...HEAD /dev/null\n\n ---> 8214c3588775\nStep 6/11 : RUN   pip install --no-cache-dir trackfs\\>=0.2.5\n ---> Running in 3fb35b7c89ea\nCollecting trackfs>=0.2.5\n  Downloading trackfs-0.2.6-py3-none-any.whl (22 kB)\nCollecting fusepy\n  Downloading fusepy-3.0.1.tar.gz (11 kB)\n  Preparing metadata (setup.py): started\n  Preparing metadata (setup.py): finished with status 'done'\nCollecting chardet\n  Downloading chardet-5.1.0-py3-none-any.whl (199 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 199.1/199.1 kB 97.5 MB/s eta 0:00:00\nCollecting mutagen\n  Downloading mutagen-1.46.0-py3-none-any.whl (193 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 193.6/193.6 kB 185.8 MB/s eta 0:00:00\nCollecting Lark\n  Downloading lark-1.1.5-py3-none-any.whl (107 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 108.0/108.0 kB 142.0 MB/s eta 0:00:00\nBuilding wheels for collected packages: fusepy\n  Building wheel for fusepy (setup.py): started\n  Building wheel for fusepy (setup.py): finished with status 'done'\n  Created wheel for fusepy: filename=fusepy-3.0.1-py3-none-any.whl size=10503 sha256=279921aeecc7952122977fce72bdc5e87c6772b7eecd4a1123fe05583857c05f\n  Stored in directory: /tmp/pip-ephem-wheel-cache-_zu871ze/wheels/db/01/ee/105147547cf0ecd1031b26901757e1f17c98902c8cc7bcaa47\nSuccessfully built fusepy\nInstalling collected packages: Lark, fusepy, mutagen, chardet, trackfs\nSuccessfully installed Lark-1.1.5 chardet-5.1.0 fusepy-3.0.1 mutagen-1.46.0 trackfs-0.2.6\n\u001b[91mWARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv\n\u001b[0mRemoving intermediate container 3fb35b7c89ea\n ---> 4c4dc7c5b643\nStep 7/11 : VOLUME /src\n ---> Running in db2c9fa36873\nRemoving intermediate container db2c9fa36873\n ---> a337dae6f7e5\nStep 8/11 : VOLUME /dst\n ---> Running in 6c17586af6b6\nRemoving intermediate container 6c17586af6b6\n ---> 703ac445ada2\nStep 9/11 : COPY launcher.sh /usr/local/bin/\n ---> 44e7f30dcfd6\nStep 10/11 : RUN chmod 555 /usr/local/bin/launcher.sh\n ---> Running in 1d5c168a1dcd\nRemoving intermediate container 1d5c168a1dcd\n ---> 17cc86100ef8\nStep 11/11 : ENTRYPOINT [\"/usr/local/bin/launcher.sh\", \"/src\", \"/dst\"]\n ---> Running in 35294a6791e8\nRemoving intermediate container 35294a6791e8\n ---> 6bfd48197e4a\nSuccessfully built 6bfd48197e4a\nSuccessfully tagged trackfs:latest\n","stderr":"","imageSize":73745383}}