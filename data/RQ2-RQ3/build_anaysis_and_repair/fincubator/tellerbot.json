{"repository":"https://github.com/fincubator/tellerbot","dockerfilePath":"Dockerfile","startTime":1672243923534,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/fincubator/tellerbot'...\n","error":null,"commit":"5911adb337b23b81c5b025bbe7f538aa4736c101"},"originalBuild":{"startTimestamp":1672243924422,"endTimestamp":1672244044962,"error":null,"stdout":"Sending build context to Docker daemon    386kB\r\r\nStep 1/17 : FROM python:3.8-slim-buster\n3.8-slim-buster: Pulling from library/python\nb52ebda398ed: Already exists\n5ea3b77facf9: Already exists\n3cf88772a539: Pulling fs layer\n58e7c3cd0452: Pulling fs layer\n8b23ff4b1264: Pulling fs layer\n58e7c3cd0452: Verifying Checksum\n58e7c3cd0452: Download complete\n8b23ff4b1264: Verifying Checksum\n8b23ff4b1264: Download complete\n3cf88772a539: Verifying Checksum\n3cf88772a539: Download complete\n3cf88772a539: Pull complete\n58e7c3cd0452: Pull complete\n8b23ff4b1264: Pull complete\nDigest: sha256:4cda66a01b5571bd4f3d634b301f72e580a94b2c1ce87ead057040a6dea4a416\nStatus: Downloaded newer image for python:3.8-slim-buster\n ---> 6ba145ad2ad6\nStep 2/17 : LABEL mantainer=\"alfred richardsn <rchrdsn@protonmail.ch>\"\n ---> Running in 9b7ce4244a7b\nRemoving intermediate container 9b7ce4244a7b\n ---> c40226472144\nStep 3/17 : ARG ESCROW_ENABLED\n ---> Running in 03da1e229b04\nRemoving intermediate container 03da1e229b04\n ---> 623cd4557803\nStep 4/17 : RUN if test \"$ESCROW_ENABLED\" = true; then     apt-get update && apt-get install --yes --no-install-recommends git;     else exit 0; fi\n ---> Running in 3df7748e8167\nRemoving intermediate container 3df7748e8167\n ---> f2f817af34f0\nStep 5/17 : ARG USER=tellerbot\n ---> Running in b880cc3376c3\nRemoving intermediate container b880cc3376c3\n ---> 846b84e26509\nStep 6/17 : ARG GROUP=tellerbot\n ---> Running in baa693065b6b\nRemoving intermediate container baa693065b6b\n ---> 8e47dc821302\nStep 7/17 : ENV HOME /home/$USER\n ---> Running in 03aaa0d9c5d9\nRemoving intermediate container 03aaa0d9c5d9\n ---> 4de0225ead7a\nStep 8/17 : RUN groupadd -g 999 $GROUP  && useradd -g $GROUP -u 999 -l -s /sbin/nologin -m -d $HOME $USER\n ---> Running in 3fec2372ac29\nRemoving intermediate container 3fec2372ac29\n ---> 0a0caea2634b\nStep 9/17 : WORKDIR $HOME\n ---> Running in ad9666b7ed4b\nRemoving intermediate container ad9666b7ed4b\n ---> 2cabfee3bae4\nStep 10/17 : USER $USER:$GROUP\n ---> Running in 364d054d2364\nRemoving intermediate container 364d054d2364\n ---> 5cb3afb1c565\nStep 11/17 : COPY --chown=999:999 requirements.txt requirements-escrow.txt ./\n ---> 1bc6b1e377cd\nStep 12/17 : ENV PATH $PATH:$HOME/.local/bin\n ---> Running in 38d5a2816e83\nRemoving intermediate container 38d5a2816e83\n ---> f8b3c71efe37\nStep 13/17 : RUN pip install --user --no-cache-dir --requirement requirements.txt  && if test \"$ESCROW_ENABLED\" = true; then     pip install --user --no-cache-dir --requirement requirements-escrow.txt;     else exit 0; fi\n ---> Running in 2d658c6a2122\nCollecting aiogram==2.8\n  Downloading aiogram-2.8-py3-none-any.whl (159 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 159.8/159.8 KB 91.7 MB/s eta 0:00:00\nCollecting emoji==1.4.2\n  Downloading emoji-1.4.2.tar.gz (184 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 185.0/185.0 KB 98.0 MB/s eta 0:00:00\n  Preparing metadata (setup.py): started\n  Preparing metadata (setup.py): finished with status 'done'\nCollecting motor==2.5.0\n  Downloading motor-2.5.0-py3-none-any.whl (55 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 55.1/55.1 KB 83.1 MB/s eta 0:00:00\nCollecting pymongo==3.12.0\n  Downloading pymongo-3.12.0-cp38-cp38-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (545 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 545.5/545.5 KB 105.4 MB/s eta 0:00:00\nCollecting requests==2.26.0\n  Downloading requests-2.26.0-py2.py3-none-any.whl (62 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 62.3/62.3 KB 75.2 MB/s eta 0:00:00\nCollecting aiohttp<4.0.0,>=3.5.4\n  Downloading aiohttp-3.8.3-cp38-cp38-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (1.0 MB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 1.0/1.0 MB 148.0 MB/s eta 0:00:00\nCollecting Babel>=2.6.0\n  Downloading Babel-2.11.0-py3-none-any.whl (9.5 MB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 9.5/9.5 MB 116.1 MB/s eta 0:00:00\nCollecting certifi>=2019.3.9\n  Downloading certifi-2022.12.7-py3-none-any.whl (155 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 155.3/155.3 KB 269.3 MB/s eta 0:00:00\nCollecting charset-normalizer~=2.0.0\n  Downloading charset_normalizer-2.0.12-py3-none-any.whl (39 kB)\nCollecting idna<4,>=2.5\n  Downloading idna-3.4-py3-none-any.whl (61 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 61.5/61.5 KB 102.3 MB/s eta 0:00:00\nCollecting urllib3<1.27,>=1.21.1\n  Downloading urllib3-1.26.13-py2.py3-none-any.whl (140 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 140.6/140.6 KB 94.0 MB/s eta 0:00:00\nCollecting yarl<2.0,>=1.0\n  Downloading yarl-1.8.2-cp38-cp38-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (262 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 262.1/262.1 KB 107.2 MB/s eta 0:00:00\nCollecting aiosignal>=1.1.2\n  Downloading aiosignal-1.3.1-py3-none-any.whl (7.6 kB)\nCollecting frozenlist>=1.1.1\n  Downloading frozenlist-1.3.3-cp38-cp38-manylinux_2_5_x86_64.manylinux1_x86_64.manylinux_2_17_x86_64.manylinux2014_x86_64.whl (161 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 161.3/161.3 KB 298.5 MB/s eta 0:00:00\nCollecting attrs>=17.3.0\n  Downloading attrs-22.2.0-py3-none-any.whl (60 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 60.0/60.0 KB 253.1 MB/s eta 0:00:00\nCollecting multidict<7.0,>=4.5\n  Downloading multidict-6.0.4-cp38-cp38-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (121 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 121.3/121.3 KB 278.1 MB/s eta 0:00:00\nCollecting async-timeout<5.0,>=4.0.0a3\n  Downloading async_timeout-4.0.2-py3-none-any.whl (5.8 kB)\nCollecting pytz>=2015.7\n  Downloading pytz-2022.7-py2.py3-none-any.whl (499 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 499.4/499.4 KB 175.9 MB/s eta 0:00:00\nBuilding wheels for collected packages: emoji\n  Building wheel for emoji (setup.py): started\n  Building wheel for emoji (setup.py): finished with status 'done'\n  Created wheel for emoji: filename=emoji-1.4.2-py3-none-any.whl size=186469 sha256=9f21c9d812891f29911c4685233defafd2b7efa6a1da6a2f4fdd2211fb6fab60\n  Stored in directory: /tmp/pip-ephem-wheel-cache-_czartgu/wheels/71/4d/3c/cada364d4ea0026deee7208dee1e61bcebd20aa2ae5dc154ba\nSuccessfully built emoji\nInstalling collected packages: pytz, emoji, urllib3, pymongo, multidict, idna, frozenlist, charset-normalizer, certifi, Babel, attrs, async-timeout, yarl, requests, motor, aiosignal, aiohttp, aiogram\nSuccessfully installed Babel-2.11.0 aiogram-2.8 aiohttp-3.8.3 aiosignal-1.3.1 async-timeout-4.0.2 attrs-22.2.0 certifi-2022.12.7 charset-normalizer-2.0.12 emoji-1.4.2 frozenlist-1.3.3 idna-3.4 motor-2.5.0 multidict-6.0.4 pymongo-3.12.0 pytz-2022.7 requests-2.26.0 urllib3-1.26.13 yarl-1.8.2\n\u001b[91mWARNING: You are using pip version 22.0.4; however, version 22.3.1 is available.\nYou should consider upgrading via the '/usr/local/bin/python -m pip install --upgrade pip' command.\n\u001b[0mRemoving intermediate container 2d658c6a2122\n ---> 2e659d9ccad7\nStep 14/17 : COPY --chown=999:999 locale/ locale/\n ---> f308e7b12aae\nStep 15/17 : RUN pybabel compile --directory=locale/ --domain=bot\n ---> Running in b88a05410e09\n\u001b[91mcompiling catalog locale/tr/LC_MESSAGES/bot.po to locale/tr/LC_MESSAGES/bot.mo\n\u001b[0m\u001b[91mcompiling catalog locale/ru/LC_MESSAGES/bot.po to locale/ru/LC_MESSAGES/bot.mo\n\u001b[0m\u001b[91mcompiling catalog locale/fr/LC_MESSAGES/bot.po to locale/fr/LC_MESSAGES/bot.mo\n\u001b[0m\u001b[91mcompiling catalog locale/en/LC_MESSAGES/bot.po to locale/en/LC_MESSAGES/bot.mo\n\u001b[0m\u001b[91mcompiling catalog locale/id/LC_MESSAGES/bot.po to locale/id/LC_MESSAGES/bot.mo\n\u001b[0mRemoving intermediate container b88a05410e09\n ---> febbb19df60d\nStep 16/17 : COPY --chown=999:999 . .\n ---> 3a0793aeb290\nStep 17/17 : ENTRYPOINT [\"python\", \".\"]\n ---> Running in 087c16b62d12\nRemoving intermediate container 087c16b62d12\n ---> 283c82afc205\nSuccessfully built 283c82afc205\nSuccessfully tagged tellerbot:latest\n","stderr":"","imageSize":164790252},"repair":{"violations":[{"name":"ruleAptGetInstallThenRemoveAptLists","position":{"start":7,"end":7,"columnStart":22,"columnEnd":71}}],"repairedDockerfile":"FROM python:3.8-slim-buster\n\nLABEL mantainer=\"alfred richardsn <rchrdsn@protonmail.ch>\"\n\nARG ESCROW_ENABLED\n\nRUN if test \"$ESCROW_ENABLED\" = true; then \\\n    apt-get update && apt-get install --yes --no-install-recommends git; \\\n    else exit 0; fi\n\nARG USER=tellerbot\nARG GROUP=tellerbot\n\nENV HOME /home/$USER\n\nRUN groupadd -g 999 $GROUP \\\n && useradd -g $GROUP -u 999 -l -s /sbin/nologin -m -d $HOME $USER\nWORKDIR $HOME\nUSER $USER:$GROUP\n\nCOPY --chown=999:999 requirements.txt requirements-escrow.txt ./\nENV PATH $PATH:$HOME/.local/bin\nRUN pip install --user --no-cache-dir --requirement requirements.txt \\\n && if test \"$ESCROW_ENABLED\" = true; then \\\n    pip install --user --no-cache-dir --requirement requirements-escrow.txt; \\\n    else exit 0; fi fi\n\nCOPY --chown=999:999 locale/ locale/\nRUN pybabel compile --directory=locale/ --domain=bot\n\nCOPY --chown=999:999 . .\n\nENTRYPOINT [\"python\", \".\"]\n"},"repairedBuild":{"startTimestamp":1672244045373,"endTimestamp":1672244088194,"error":{"code":2,"killed":false,"signal":null,"cmd":"docker build --no-cache --force-rm -t tellerbot:latest -f /tmp/dinghy-analysis/fincubator/tellerbot/Dockerfile ."},"stdout":"Sending build context to Docker daemon    386kB\r\r\nStep 1/17 : FROM python:3.8-slim-buster\n ---> 6ba145ad2ad6\nStep 2/17 : LABEL mantainer=\"alfred richardsn <rchrdsn@protonmail.ch>\"\n ---> Running in 5d88c009410d\nRemoving intermediate container 5d88c009410d\n ---> ae53f85a73c0\nStep 3/17 : ARG ESCROW_ENABLED\n ---> Running in 7db31c8e1740\nRemoving intermediate container 7db31c8e1740\n ---> 356ece5bbf30\nStep 4/17 : RUN if test \"$ESCROW_ENABLED\" = true; then     apt-get update && apt-get install --yes --no-install-recommends git;     else exit 0; fi\n ---> Running in c71cf65c9b85\nRemoving intermediate container c71cf65c9b85\n ---> 43266be5a8dc\nStep 5/17 : ARG USER=tellerbot\n ---> Running in 9ab13e92b132\nRemoving intermediate container 9ab13e92b132\n ---> 188f847ee313\nStep 6/17 : ARG GROUP=tellerbot\n ---> Running in 4171a6d473b5\nRemoving intermediate container 4171a6d473b5\n ---> 2a8c261ebace\nStep 7/17 : ENV HOME /home/$USER\n ---> Running in 7df5f4312e7c\nRemoving intermediate container 7df5f4312e7c\n ---> dd8748287224\nStep 8/17 : RUN groupadd -g 999 $GROUP  && useradd -g $GROUP -u 999 -l -s /sbin/nologin -m -d $HOME $USER\n ---> Running in 5265a2921bd7\nRemoving intermediate container 5265a2921bd7\n ---> b622b2509316\nStep 9/17 : WORKDIR $HOME\n ---> Running in acf0be8c6a98\nRemoving intermediate container acf0be8c6a98\n ---> 0edee587e4aa\nStep 10/17 : USER $USER:$GROUP\n ---> Running in bb21287bd5e3\nRemoving intermediate container bb21287bd5e3\n ---> 8aaf708ac4f6\nStep 11/17 : COPY --chown=999:999 requirements.txt requirements-escrow.txt ./\n ---> 60e2098da8ed\nStep 12/17 : ENV PATH $PATH:$HOME/.local/bin\n ---> Running in 4126ec87c467\nRemoving intermediate container 4126ec87c467\n ---> 3bfb8b33d4b6\nStep 13/17 : RUN pip install --user --no-cache-dir --requirement requirements.txt  && if test \"$ESCROW_ENABLED\" = true; then     pip install --user --no-cache-dir --requirement requirements-escrow.txt;     else exit 0; fi fi\n ---> Running in 1b2ab259f78b\n\u001b[91m/bin/sh: 1: Syntax error: \"fi\" unexpected\n\u001b[0mRemoving intermediate container 1b2ab259f78b\n","stderr":"The command '/bin/sh -c pip install --user --no-cache-dir --requirement requirements.txt  && if test \"$ESCROW_ENABLED\" = true; then     pip install --user --no-cache-dir --requirement requirements-escrow.txt;     else exit 0; fi fi' returned a non-zero code: 2\n"},"endTime":1672244088281}