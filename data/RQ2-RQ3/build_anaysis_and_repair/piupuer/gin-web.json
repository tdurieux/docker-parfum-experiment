{"repository":"https://github.com/piupuer/gin-web","dockerfilePath":"Dockerfile","startTime":1672088735785,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/piupuer/gin-web'...\n","error":null,"commit":"e2e0a66ec00d4746db212b51e59635acfedb3f6f"},"originalBuild":{"startTimestamp":1672088736642,"endTimestamp":1672089033074,"error":null,"stdout":"Sending build context to Docker daemon  933.9kB\r\r\nStep 1/22 : FROM golang:1.17 AS gin-web\n1.17: Pulling from library/golang\nd836772a1c1f: Pulling fs layer\n66a9e63c657a: Pulling fs layer\nd1989b6e74cf: Pulling fs layer\nc28818711e1e: Pulling fs layer\n9d6246ba248c: Pulling fs layer\n21d43f0d73c2: Pulling fs layer\nd8a1c5873f40: Pulling fs layer\n21d43f0d73c2: Waiting\nd8a1c5873f40: Waiting\n9d6246ba248c: Waiting\nc28818711e1e: Waiting\n66a9e63c657a: Verifying Checksum\n66a9e63c657a: Download complete\nd1989b6e74cf: Verifying Checksum\nd1989b6e74cf: Download complete\nd836772a1c1f: Verifying Checksum\nd836772a1c1f: Download complete\nc28818711e1e: Verifying Checksum\nc28818711e1e: Download complete\nd8a1c5873f40: Download complete\n9d6246ba248c: Verifying Checksum\n9d6246ba248c: Download complete\n21d43f0d73c2: Verifying Checksum\n21d43f0d73c2: Download complete\nd836772a1c1f: Pull complete\n66a9e63c657a: Pull complete\nd1989b6e74cf: Pull complete\nc28818711e1e: Pull complete\n9d6246ba248c: Pull complete\n21d43f0d73c2: Pull complete\nd8a1c5873f40: Pull complete\nDigest: sha256:87262e4a4c7db56158a80a18fefdc4fee5accc41b59cde821e691d05541bbb18\nStatus: Downloaded newer image for golang:1.17\n ---> 742df529b073\nStep 2/22 : RUN echo \"----------------- Gin Web building -----------------\"\n ---> Running in 5ac484ea91b5\n----------------- Gin Web building -----------------\nRemoving intermediate container 5ac484ea91b5\n ---> 8232b31913c7\nStep 3/22 : ENV GO111MODULE=on\n ---> Running in 1214d6f7fa67\nRemoving intermediate container 1214d6f7fa67\n ---> 387d12b6cf43\nStep 4/22 : ENV GOPROXY=https://goproxy.cn,direct\n ---> Running in 4c438c71c4a0\nRemoving intermediate container 4c438c71c4a0\n ---> 7bb5b2b03a3b\nStep 5/22 : ENV APP_HOME /app/gin-web\n ---> Running in 9cdd704ecefa\nRemoving intermediate container 9cdd704ecefa\n ---> 147f5b2adde3\nStep 6/22 : RUN mkdir -p $APP_HOME\n ---> Running in 14483bcf2632\nRemoving intermediate container 14483bcf2632\n ---> 8afe45cc16ff\nStep 7/22 : WORKDIR $APP_HOME\n ---> Running in 08fa75b4db7f\nRemoving intermediate container 08fa75b4db7f\n ---> ac6e966d3019\nStep 8/22 : COPY go.mod go.sum ./\n ---> 470deb51a842\nStep 9/22 : RUN go mod tidy\n ---> Running in 12d3adab7c15\n\u001b[91mgo: warning: \"all\" matched no packages\n\u001b[0mRemoving intermediate container 12d3adab7c15\n ---> 9ab4f39deb4c\nStep 10/22 : COPY . .\n ---> afc36fb69373\nStep 11/22 : RUN chmod +x version.sh && ./version.sh\n ---> Running in 8a462ea1ece7\nRemoving intermediate container 8a462ea1ece7\n ---> 93a23a5840f1\nStep 12/22 : RUN go build -o gin-web .\n ---> Running in fcc9e2532882\n\u001b[91mgo: downloading github.com/piupuer/go-helper v1.1.1-0.20220727082312-411899a9856a\ngo: downloading go.opentelemetry.io/otel/sdk v1.6.3\ngo: downloading github.com/pkg/errors v0.9.1\ngo: downloading gorm.io/gorm v1.22.4\n\u001b[0m\u001b[91mgo: downloading github.com/casbin/casbin/v2 v2.40.6\n\u001b[0m\u001b[91mgo: downloading go.opentelemetry.io/contrib/propagators/aws v1.6.0\ngo: downloading github.com/go-redis/redis/v8 v8.11.5\ngo: downloading github.com/go-sql-driver/mysql v1.6.0\ngo: downloading github.com/spf13/viper v1.8.1\n\u001b[0m\u001b[91mgo: downloading github.com/casbin/gorm-adapter/v3 v3.4.6\n\u001b[0m\u001b[91mgo: downloading go.opentelemetry.io/otel/exporters/otlp/otlptrace v1.6.3\ngo: downloading go.opentelemetry.io/otel v1.6.3\ngo: downloading gorm.io/driver/mysql v1.2.2\n\u001b[0m\u001b[91mgo: downloading github.com/gin-gonic/gin v1.7.7\n\u001b[0m\u001b[91mgo: downloading go.opentelemetry.io/otel/exporters/otlp/otlptrace/otlptracehttp v1.6.3\n\u001b[0m\u001b[91mgo: downloading github.com/swaggo/files v0.0.0-20210815190702-a29dd2bc99b2\n\u001b[0m\u001b[91mgo: downloading github.com/swaggo/gin-swagger v1.3.3\n\u001b[0m\u001b[91mgo: downloading go.opentelemetry.io/contrib/instrumentation/github.com/gin-gonic/gin/otelgin v0.31.0\n\u001b[0m\u001b[91mgo: downloading github.com/golang-module/carbon/v2 v2.1.2\n\u001b[0m\u001b[91mgo: downloading github.com/swaggo/swag v1.7.8\n\u001b[0m\u001b[91mgo: downloading github.com/jinzhu/copier v0.3.4\n\u001b[0m\u001b[91mgo: downloading gorm.io/driver/postgres v1.2.2\n\u001b[0m\u001b[91mgo: downloading gorm.io/driver/sqlserver v1.2.1\n\u001b[0m\u001b[91mgo: downloading gorm.io/plugin/dbresolver v1.1.0\n\u001b[0m\u001b[91mgo: downloading github.com/fsnotify/fsnotify v1.4.9\ngo: downloading github.com/hashicorp/hcl v1.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/magiconair/properties v1.8.5\n\u001b[0m\u001b[91mgo: downloading github.com/mitchellh/mapstructure v1.4.1\n\u001b[0m\u001b[91mgo: downloading github.com/pelletier/go-toml v1.9.3\ngo: downloading github.com/spf13/afero v1.6.0\n\u001b[0m\u001b[91mgo: downloading github.com/spf13/cast v1.4.1\ngo: downloading github.com/spf13/jwalterweatherman v1.1.0\n\u001b[0m\u001b[91mgo: downloading github.com/spf13/pflag v1.0.5\n\u001b[0m\u001b[91mgo: downloading github.com/subosito/gotenv v1.2.0\n\u001b[0m\u001b[91mgo: downloading gopkg.in/ini.v1 v1.62.0\n\u001b[0m\u001b[91mgo: downloading gopkg.in/yaml.v2 v2.4.0\n\u001b[0m\u001b[91mgo: downloading github.com/cespare/xxhash/v2 v2.1.2\n\u001b[0m\u001b[91mgo: downloading github.com/dgryski/go-rendezvous v0.0.0-20200823014737-9f7001d12a5f\n\u001b[0m\u001b[91mgo: downloading github.com/google/uuid v1.3.0\n\u001b[0m\u001b[91mgo: downloading go.opentelemetry.io/otel/trace v1.6.3\n\u001b[0m\u001b[91mgo: downloading github.com/go-logr/logr v1.2.3\n\u001b[0m\u001b[91mgo: downloading golang.org/x/sys v0.0.0-20220429233432-b5fbb4746d32\n\u001b[0m\u001b[91mgo: downloading github.com/Knetic/govaluate v3.0.1-0.20171022003610-9aa49832a739+incompatible\n\u001b[0m\u001b[91mgo: downloading github.com/minio/minio-go/v7 v7.0.19\n\u001b[0m\u001b[91mgo: downloading google.golang.org/grpc v1.46.0\n\u001b[0m\u001b[91mgo: downloading github.com/go-mysql-org/go-mysql v1.4.0\n\u001b[0m\u001b[91mgo: downloading github.com/rubenv/sql-migrate v1.1.1\n\u001b[0m\u001b[91mgo: downloading github.com/sirupsen/logrus v1.8.1\n\u001b[0m\u001b[91mgo: downloading go.uber.org/zap v1.19.1\n\u001b[0m\u001b[91mgo: downloading github.com/looplab/fsm v0.3.0\n\u001b[0m\u001b[91mgo: downloading github.com/aliyun/aliyun-oss-go-sdk v2.2.0+incompatible\n\u001b[0m\u001b[91mgo: downloading github.com/hibiken/asynq v0.23.0\n\u001b[0m\u001b[91mgo: downloading github.com/robfig/cron/v3 v3.0.1\n\u001b[0m\u001b[91mgo: downloading github.com/gorilla/websocket v1.4.2\n\u001b[0m\u001b[91mgo: downloading golang.org/x/crypto v0.0.0-20220411220226-7b82a4e95df4\n\u001b[0m\u001b[91mgo: downloading github.com/foobaz/lossypng v0.0.0-20200814224715-48fa8819852a\n\u001b[0m\u001b[91mgo: downloading github.com/nfnt/resize v0.0.0-20180221191011-83c6a9932646\n\u001b[0m\u001b[91mgo: downloading github.com/shopspring/decimal v1.3.1\n\u001b[0m\u001b[91mgo: downloading github.com/thoas/go-funk v0.9.1\n\u001b[0m\u001b[91mgo: downloading golang.org/x/text v0.3.7\n\u001b[0m\u001b[91mgo: downloading github.com/appleboy/gin-jwt/v2 v2.8.0\n\u001b[0m\u001b[91mgo: downloading github.com/golang-jwt/jwt/v4 v4.2.0\n\u001b[0m\u001b[91mgo: downloading github.com/ulule/limiter/v3 v3.9.0\n\u001b[0m\u001b[91mgo: downloading github.com/go-playground/locales v0.14.0\n\u001b[0m\u001b[91mgo: downloading github.com/go-playground/universal-translator v0.18.0\n\u001b[0m\u001b[91mgo: downloading gopkg.in/go-playground/validator.v9 v9.31.0\n\u001b[0m\u001b[91mgo: downloading github.com/thedevsaddam/gojsonq/v2 v2.5.2\n\u001b[0m\u001b[91mgo: downloading github.com/go-logr/stdr v1.2.2\n\u001b[0m\u001b[91mgo: downloading github.com/grpc-ecosystem/go-grpc-middleware v1.3.0\n\u001b[0m\u001b[91mgo: downloading go.uber.org/atomic v1.7.0\n\u001b[0m\u001b[91mgo: downloading go.uber.org/multierr v1.6.0\n\u001b[0m\u001b[91mgo: downloading github.com/jinzhu/inflection v1.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/jinzhu/now v1.1.3\n\u001b[0m\u001b[91mgo: downloading github.com/gin-contrib/sse v0.1.0\n\u001b[0m\u001b[91mgo: downloading github.com/mattn/go-isatty v0.0.14\n\u001b[0m\u001b[91mgo: downloading github.com/denisenkom/go-mssqldb v0.11.0\n\u001b[0m\u001b[91mgo: downloading github.com/jackc/pgx/v4 v4.13.0\n\u001b[0m\u001b[91mgo: downloading github.com/mojocn/base64Captcha v1.3.5\n\u001b[0m\u001b[91mgo: downloading go.opentelemetry.io/proto/otlp v0.16.0\n\u001b[0m\u001b[91mgo: downloading go.opentelemetry.io/otel/exporters/otlp/internal/retry v1.6.3\n\u001b[0m\u001b[91mgo: downloading google.golang.org/protobuf v1.28.0\n\u001b[0m\u001b[91mgo: downloading github.com/go-gorp/gorp/v3 v3.0.2\n\u001b[0m\u001b[91mgo: downloading github.com/leodido/go-urn v1.2.1\n\u001b[0m\u001b[91mgo: downloading github.com/opentracing/opentracing-go v1.1.0\n\u001b[0m\u001b[91mgo: downloading golang.org/x/net v0.0.0-20220421235706-1d1ef9303861\n\u001b[0m\u001b[91mgo: downloading github.com/KyleBanks/depth v1.2.1\n\u001b[0m\u001b[91mgo: downloading github.com/go-openapi/spec v0.20.4\n\u001b[0m\u001b[91mgo: downloading golang.org/x/tools v0.1.7\n\u001b[0m\u001b[91mgo: downloading github.com/go-playground/validator/v10 v10.10.1\n\u001b[0m\u001b[91mgo: downloading github.com/golang/protobuf v1.5.2\n\u001b[0m\u001b[91mgo: downloading github.com/ugorji/go/codec v1.2.7\n\u001b[0m\u001b[91mgo: downloading github.com/pingcap/errors v0.11.5-0.20201126102027-b0a155152ca3\n\u001b[0m\u001b[91mgo: downloading github.com/BurntSushi/toml v0.3.1\n\u001b[0m\u001b[91mgo: downloading github.com/pingcap/parser v0.0.0-20210415081931-48e7f467fd74\n\u001b[0m\u001b[91mgo: downloading github.com/satori/go.uuid v1.2.0\n\u001b[0m\u001b[91mgo: downloading github.com/siddontang/go-log v0.0.0-20180807004314-8d05993dda07\n\u001b[0m\u001b[91mgo: downloading github.com/siddontang/go v0.0.0-20180604090527-bdc77568d726\n\u001b[0m\u001b[91mgo: downloading github.com/json-iterator/go v1.1.12\n\u001b[0m\u001b[91mgo: downloading github.com/minio/sha256-simd v0.1.1\n\u001b[0m\u001b[91mgo: downloading github.com/mitchellh/go-homedir v1.1.0\n\u001b[0m\u001b[91mgo: downloading github.com/klauspost/compress v1.13.6\n\u001b[0m\u001b[91mgo: downloading github.com/minio/md5-simd v1.1.0\n\u001b[0m\u001b[91mgo: downloading github.com/go-openapi/jsonpointer v0.19.5\n\u001b[0m\u001b[91mgo: downloading github.com/go-openapi/jsonreference v0.19.6\n\u001b[0m\u001b[91mgo: downloading github.com/go-openapi/swag v0.19.15\n\u001b[0m\u001b[91mgo: downloading github.com/cenkalti/backoff/v4 v4.1.3\n\u001b[0m\u001b[91mgo: downloading github.com/grpc-ecosystem/grpc-gateway/v2 v2.10.0\n\u001b[0m\u001b[91mgo: downloading github.com/rs/xid v1.2.1\n\u001b[0m\u001b[91mgo: downloading github.com/modern-go/concurrent v0.0.0-20180306012644-bacd9c7ef1dd\n\u001b[0m\u001b[91mgo: downloading github.com/modern-go/reflect2 v1.0.2\n\u001b[0m\u001b[91mgo: downloading github.com/klauspost/cpuid v1.3.1\n\u001b[0m\u001b[91mgo: downloading github.com/PuerkitoBio/purell v1.1.1\n\u001b[0m\u001b[91mgo: downloading github.com/mailru/easyjson v0.7.6\n\u001b[0m\u001b[91mgo: downloading github.com/jackc/pgconn v1.10.0\n\u001b[0m\u001b[91mgo: downloading github.com/jackc/pgtype v1.8.1\n\u001b[0m\u001b[91mgo: downloading github.com/jackc/pgio v1.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/jackc/pgproto3/v2 v2.1.1\n\u001b[0m\u001b[91mgo: downloading github.com/PuerkitoBio/urlesc v0.0.0-20170810143723-de5bf2ad4578\n\u001b[0m\u001b[91mgo: downloading github.com/josharian/intern v1.0.0\n\u001b[0m\u001b[91mgo: downloading golang.org/x/time v0.0.0-20220411224347-583f2d630306\n\u001b[0m\u001b[91mgo: downloading github.com/jackc/pgpassfile v1.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/jackc/chunkreader/v2 v2.0.1\n\u001b[0m\u001b[91mgo: downloading github.com/jackc/pgservicefile v0.0.0-20200714003250-2b9c44734f2b\n\u001b[0m\u001b[91mgo: downloading github.com/golang-sql/civil v0.0.0-20190719163853-cb61b32ac6fe\n\u001b[0m\u001b[91mgo: downloading github.com/pingcap/log v0.0.0-20210317133921-96f4fcab92a4\n\u001b[0m\u001b[91mgo: downloading gopkg.in/natefinch/lumberjack.v2 v2.0.0\n\u001b[0m\u001b[91mgo: downloading google.golang.org/genproto v0.0.0-20220422154200-b37d22cd5731\n\u001b[0m\u001b[91mgo: downloading golang.org/x/image v0.0.0-20190802002840-cff245a6509b\n\u001b[0m\u001b[91mgo: downloading github.com/golang/freetype v0.0.0-20170609003504-e2365dfdc4a0\n\u001b[0mRemoving intermediate container fcc9e2532882\n ---> f5811fdd5161\nStep 13/22 : FROM frolvlad/alpine-glibc:alpine-3.12\nalpine-3.12: Pulling from frolvlad/alpine-glibc\n1b7ca6aea1dd: Pulling fs layer\n58f2fe6e250d: Pulling fs layer\n1b7ca6aea1dd: Verifying Checksum\n1b7ca6aea1dd: Download complete\n58f2fe6e250d: Verifying Checksum\n58f2fe6e250d: Download complete\n1b7ca6aea1dd: Pull complete\n58f2fe6e250d: Pull complete\nDigest: sha256:7a026b8aec933a4db64677e675a82002b926199cb85662200995c68b9f3d5f66\nStatus: Downloaded newer image for frolvlad/alpine-glibc:alpine-3.12\n ---> 5328705308b4\nStep 14/22 : ENV APP_HOME /app/gin-web\n ---> Running in 2c0da665ca53\nRemoving intermediate container 2c0da665ca53\n ---> a1be651b293b\nStep 15/22 : RUN mkdir -p $APP_HOME\n ---> Running in 2ae4e41e5717\nRemoving intermediate container 2ae4e41e5717\n ---> 87e60fcecb9f\nStep 16/22 : WORKDIR $APP_HOME\n ---> Running in b31126993bd9\nRemoving intermediate container b31126993bd9\n ---> 2305bb23a1d7\nStep 17/22 : COPY --from=gin-web $APP_HOME/conf ./conf/\n ---> 3467d69efafd\nStep 18/22 : COPY --from=gin-web $APP_HOME/gin-web .\n ---> 6df15b57460f\nStep 19/22 : COPY --from=gin-web $APP_HOME/gitversion .\n ---> a996a4325b63\nStep 20/22 : RUN sed -i 's/dl-cdn.alpinelinux.org/mirrors.aliyun.com/g' /etc/apk/repositories\n ---> Running in 51796b88cab9\nRemoving intermediate container 51796b88cab9\n ---> 2857d45e2c98\nStep 21/22 : RUN apk update   && apk add tzdata   && apk add curl   && apk add libstdc++   && cp /usr/share/zoneinfo/Asia/Shanghai /etc/localtime   && echo \"Asia/Shanghai\" > /etc/timezone\n ---> Running in 022c160b87e9\nfetch http://mirrors.aliyun.com/alpine/v3.12/main/x86_64/APKINDEX.tar.gz\nfetch http://mirrors.aliyun.com/alpine/v3.12/community/x86_64/APKINDEX.tar.gz\nv3.12.12-45-g8116a127ec [http://mirrors.aliyun.com/alpine/v3.12/main]\nv3.12.12-46-g1df69604c4 [http://mirrors.aliyun.com/alpine/v3.12/community]\nOK: 12769 distinct packages available\n(1/1) Installing tzdata (2022a-r0)\nExecuting busybox-1.31.1-r22.trigger\nOK: 20 MiB in 18 packages\n(1/4) Installing ca-certificates (20220614-r0)\n(2/4) Installing nghttp2-libs (1.41.0-r0)\n(3/4) Installing libcurl (7.79.1-r1)\n(4/4) Installing curl (7.79.1-r1)\nExecuting busybox-1.31.1-r22.trigger\nExecuting ca-certificates-20220614-r0.trigger\nExecuting glibc-bin-2.32-r0.trigger\n\u001b[91m/usr/glibc-compat/sbin/ldconfig: /usr/glibc-compat/lib/ld-linux-x86-64.so.2 is not a symbolic link\n\n\u001b[0mOK: 22 MiB in 22 packages\n(1/1) Installing libstdc++ (9.3.0-r2)\nExecuting glibc-bin-2.32-r0.trigger\n\u001b[91m/usr/glibc-compat/sbin/ldconfig: /usr/glibc-compat/lib/ld-linux-x86-64.so.2 is not a symbolic link\n\n\u001b[0mOK: 24 MiB in 23 packages\nRemoving intermediate container 022c160b87e9\n ---> 712094c3669a\nStep 22/22 : CMD [\"./gin-web\"]\n ---> Running in 9156b62bdb3f\nRemoving intermediate container 9156b62bdb3f\n ---> 5174eafb74ad\nSuccessfully built 5174eafb74ad\nSuccessfully tagged gin-web:latest\n","stderr":"","imageSize":99390920},"repair":{"violations":[{"name":"apkAddUseNoCache","position":{"start":48,"end":48,"columnStart":5,"columnEnd":19}},{"name":"apkAddUseNoCache","position":{"start":49,"end":49,"columnStart":5,"columnEnd":17}},{"name":"apkAddUseNoCache","position":{"start":50,"end":50,"columnStart":5,"columnEnd":22}}],"repairedDockerfile":"FROM golang:1.17 AS gin-web\n#FROM registry.cn-shenzhen.aliyuncs.com/piupuer/golang:1.17-alpine AS gin-web\n\nRUN echo \"----------------- Gin Web building -----------------\"\n\n# set environments\n# enable go modules\nENV GO111MODULE=on\n# set up an agent to speed up downloading resources\nENV GOPROXY=https://goproxy.cn,direct\n# set app home dir\nENV APP_HOME /app/gin-web\n\nRUN mkdir -p $APP_HOME\n\nWORKDIR $APP_HOME\n\n# copy go.mod / go.sum to download dependent files\nCOPY go.mod go.sum ./\nRUN go mod tidy\n\n# copy source files\nCOPY . .\n\n# save current git version\nRUN chmod +x version.sh && ./version.sh\n\nRUN go build -o gin-web .\n\n# mysqldump need to use alpine-glibc\nFROM frolvlad/alpine-glibc:alpine-3.12\n#FROM registry.cn-shenzhen.aliyuncs.com/piupuer/frolvlad-alpine-glibc:alpine-3.12\n\n# set project run mode\nENV APP_HOME /app/gin-web\n\nRUN mkdir -p $APP_HOME\n\nWORKDIR $APP_HOME\n\nCOPY --from=gin-web $APP_HOME/conf ./conf/\nCOPY --from=gin-web $APP_HOME/gin-web .\nCOPY --from=gin-web $APP_HOME/gitversion .\n\n# use ali apk mirros\n# change timezone to Shanghai\nRUN sed -i 's/dl-cdn.alpinelinux.org/mirrors.aliyun.com/g' /etc/apk/repositories\nRUN apk update \\\n  && apk add --no-cache tzdata \\\n  && apk add --no-cache curl \\\n  && apk add --no-cache libstdc++ \\\n  && cp /usr/share/zoneinfo/Asia/Shanghai /etc/localtime \\\n  && echo \"Asia/Shanghai\" > /etc/timezone\n# verify that the time zone has been modified\n# RUN date -R\n\nCMD [\"./gin-web\"]\n"},"repairedBuild":{"startTimestamp":1672089035097,"endTimestamp":1672089334084,"error":null,"stdout":"Sending build context to Docker daemon  933.9kB\r\r\nStep 1/22 : FROM golang:1.17 AS gin-web\n ---> 742df529b073\nStep 2/22 : RUN echo \"----------------- Gin Web building -----------------\"\n ---> Running in b849fb853f93\n----------------- Gin Web building -----------------\nRemoving intermediate container b849fb853f93\n ---> 308c653dff42\nStep 3/22 : ENV GO111MODULE=on\n ---> Running in 38c66525ec65\nRemoving intermediate container 38c66525ec65\n ---> c393d29d1cc6\nStep 4/22 : ENV GOPROXY=https://goproxy.cn,direct\n ---> Running in 8719c182d688\nRemoving intermediate container 8719c182d688\n ---> e5f91b865a0b\nStep 5/22 : ENV APP_HOME /app/gin-web\n ---> Running in bf570f69e046\nRemoving intermediate container bf570f69e046\n ---> a631a9a84b5c\nStep 6/22 : RUN mkdir -p $APP_HOME\n ---> Running in 54196220d589\nRemoving intermediate container 54196220d589\n ---> 84e17aded839\nStep 7/22 : WORKDIR $APP_HOME\n ---> Running in 339ab659d5b9\nRemoving intermediate container 339ab659d5b9\n ---> 47376c466dc3\nStep 8/22 : COPY go.mod go.sum ./\n ---> 6acfc2f6b608\nStep 9/22 : RUN go mod tidy\n ---> Running in e538b57e5199\n\u001b[91mgo: warning: \"all\" matched no packages\n\u001b[0mRemoving intermediate container e538b57e5199\n ---> d9e06ff5c63e\nStep 10/22 : COPY . .\n ---> 39b44da16c95\nStep 11/22 : RUN chmod +x version.sh && ./version.sh\n ---> Running in fc2dd93e0db0\nRemoving intermediate container fc2dd93e0db0\n ---> a1e2d5cc9cf1\nStep 12/22 : RUN go build -o gin-web .\n ---> Running in 1d57504cc386\n\u001b[91mgo: downloading gorm.io/gorm v1.22.4\ngo: downloading github.com/piupuer/go-helper v1.1.1-0.20220727082312-411899a9856a\ngo: downloading go.opentelemetry.io/contrib/instrumentation/github.com/gin-gonic/gin/otelgin v0.31.0\ngo: downloading github.com/go-sql-driver/mysql v1.6.0\n\u001b[0m\u001b[91mgo: downloading github.com/go-redis/redis/v8 v8.11.5\ngo: downloading github.com/casbin/casbin/v2 v2.40.6\n\u001b[0m\u001b[91mgo: downloading github.com/casbin/gorm-adapter/v3 v3.4.6\n\u001b[0m\u001b[91mgo: downloading github.com/spf13/viper v1.8.1\n\u001b[0m\u001b[91mgo: downloading go.opentelemetry.io/otel v1.6.3\ngo: downloading go.opentelemetry.io/contrib/propagators/aws v1.6.0\n\u001b[0m\u001b[91mgo: downloading go.opentelemetry.io/otel/sdk v1.6.3\n\u001b[0m\u001b[91mgo: downloading github.com/swaggo/files v0.0.0-20210815190702-a29dd2bc99b2\ngo: downloading go.opentelemetry.io/otel/exporters/otlp/otlptrace v1.6.3\n\u001b[0m\u001b[91mgo: downloading github.com/pkg/errors v0.9.1\n\u001b[0m\u001b[91mgo: downloading github.com/gin-gonic/gin v1.7.7\n\u001b[0m\u001b[91mgo: downloading github.com/swaggo/gin-swagger v1.3.3\n\u001b[0m\u001b[91mgo: downloading go.opentelemetry.io/otel/exporters/otlp/otlptrace/otlptracehttp v1.6.3\n\u001b[0m\u001b[91mgo: downloading gorm.io/driver/mysql v1.2.2\n\u001b[0m\u001b[91mgo: downloading github.com/swaggo/swag v1.7.8\n\u001b[0m\u001b[91mgo: downloading github.com/golang-module/carbon/v2 v2.1.2\n\u001b[0m\u001b[91mgo: downloading github.com/jinzhu/copier v0.3.4\n\u001b[0m\u001b[91mgo: downloading go.opentelemetry.io/otel/trace v1.6.3\n\u001b[0m\u001b[91mgo: downloading gorm.io/driver/postgres v1.2.2\n\u001b[0m\u001b[91mgo: downloading gorm.io/driver/sqlserver v1.2.1\n\u001b[0m\u001b[91mgo: downloading gorm.io/plugin/dbresolver v1.1.0\n\u001b[0m\u001b[91mgo: downloading github.com/google/uuid v1.3.0\n\u001b[0m\u001b[91mgo: downloading github.com/fsnotify/fsnotify v1.4.9\n\u001b[0m\u001b[91mgo: downloading github.com/hashicorp/hcl v1.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/magiconair/properties v1.8.5\n\u001b[0m\u001b[91mgo: downloading github.com/mitchellh/mapstructure v1.4.1\ngo: downloading github.com/pelletier/go-toml v1.9.3\n\u001b[0m\u001b[91mgo: downloading github.com/spf13/afero v1.6.0\n\u001b[0m\u001b[91mgo: downloading github.com/spf13/cast v1.4.1\n\u001b[0m\u001b[91mgo: downloading github.com/spf13/jwalterweatherman v1.1.0\n\u001b[0m\u001b[91mgo: downloading github.com/spf13/pflag v1.0.5\n\u001b[0m\u001b[91mgo: downloading github.com/subosito/gotenv v1.2.0\n\u001b[0m\u001b[91mgo: downloading gopkg.in/ini.v1 v1.62.0\n\u001b[0m\u001b[91mgo: downloading gopkg.in/yaml.v2 v2.4.0\n\u001b[0m\u001b[91mgo: downloading github.com/jinzhu/inflection v1.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/jinzhu/now v1.1.3\n\u001b[0m\u001b[91mgo: downloading github.com/cespare/xxhash/v2 v2.1.2\n\u001b[0m\u001b[91mgo: downloading github.com/dgryski/go-rendezvous v0.0.0-20200823014737-9f7001d12a5f\n\u001b[0m\u001b[91mgo: downloading github.com/Knetic/govaluate v3.0.1-0.20171022003610-9aa49832a739+incompatible\n\u001b[0m\u001b[91mgo: downloading github.com/gin-contrib/sse v0.1.0\n\u001b[0m\u001b[91mgo: downloading github.com/mattn/go-isatty v0.0.14\n\u001b[0m\u001b[91mgo: downloading go.opentelemetry.io/proto/otlp v0.16.0\ngo: downloading go.opentelemetry.io/otel/exporters/otlp/internal/retry v1.6.3\n\u001b[0m\u001b[91mgo: downloading google.golang.org/protobuf v1.28.0\n\u001b[0m\u001b[91mgo: downloading github.com/go-logr/logr v1.2.3\n\u001b[0m\u001b[91mgo: downloading golang.org/x/sys v0.0.0-20220429233432-b5fbb4746d32\n\u001b[0m\u001b[91mgo: downloading github.com/jackc/pgx/v4 v4.13.0\n\u001b[0m\u001b[91mgo: downloading github.com/denisenkom/go-mssqldb v0.11.0\n\u001b[0m\u001b[91mgo: downloading github.com/sirupsen/logrus v1.8.1\n\u001b[0m\u001b[91mgo: downloading google.golang.org/grpc v1.46.0\ngo: downloading go.uber.org/zap v1.19.1\n\u001b[0m\u001b[91mgo: downloading github.com/minio/minio-go/v7 v7.0.19\n\u001b[0m\u001b[91mgo: downloading github.com/rubenv/sql-migrate v1.1.1\n\u001b[0m\u001b[91mgo: downloading github.com/looplab/fsm v0.3.0\n\u001b[0m\u001b[91mgo: downloading github.com/gorilla/websocket v1.4.2\n\u001b[0m\u001b[91mgo: downloading golang.org/x/crypto v0.0.0-20220411220226-7b82a4e95df4\n\u001b[0m\u001b[91mgo: downloading github.com/appleboy/gin-jwt/v2 v2.8.0\n\u001b[0m\u001b[91mgo: downloading github.com/golang-jwt/jwt/v4 v4.2.0\n\u001b[0m\u001b[91mgo: downloading github.com/golang/protobuf v1.5.2\n\u001b[0m\u001b[91mgo: downloading github.com/ugorji/go/codec v1.2.7\n\u001b[0m\u001b[91mgo: downloading github.com/thoas/go-funk v0.9.1\n\u001b[0m\u001b[91mgo: downloading github.com/ulule/limiter/v3 v3.9.0\n\u001b[0m\u001b[91mgo: downloading github.com/go-mysql-org/go-mysql v1.4.0\n\u001b[0m\u001b[91mgo: downloading github.com/aliyun/aliyun-oss-go-sdk v2.2.0+incompatible\n\u001b[0m\u001b[91mgo: downloading github.com/hibiken/asynq v0.23.0\n\u001b[0m\u001b[91mgo: downloading github.com/robfig/cron/v3 v3.0.1\n\u001b[0m\u001b[91mgo: downloading github.com/go-playground/locales v0.14.0\n\u001b[0m\u001b[91mgo: downloading github.com/go-playground/universal-translator v0.18.0\n\u001b[0m\u001b[91mgo: downloading gopkg.in/go-playground/validator.v9 v9.31.0\n\u001b[0m\u001b[91mgo: downloading github.com/go-logr/stdr v1.2.2\n\u001b[0m\u001b[91mgo: downloading github.com/foobaz/lossypng v0.0.0-20200814224715-48fa8819852a\n\u001b[0m\u001b[91mgo: downloading github.com/nfnt/resize v0.0.0-20180221191011-83c6a9932646\n\u001b[0m\u001b[91mgo: downloading github.com/shopspring/decimal v1.3.1\n\u001b[0m\u001b[91mgo: downloading golang.org/x/text v0.3.7\n\u001b[0m\u001b[91mgo: downloading github.com/thedevsaddam/gojsonq/v2 v2.5.2\n\u001b[0m\u001b[91mgo: downloading github.com/go-playground/validator/v10 v10.10.1\n\u001b[0m\u001b[91mgo: downloading github.com/KyleBanks/depth v1.2.1\n\u001b[0m\u001b[91mgo: downloading github.com/go-openapi/spec v0.20.4\n\u001b[0m\u001b[91mgo: downloading golang.org/x/tools v0.1.7\n\u001b[0m\u001b[91mgo: downloading github.com/grpc-ecosystem/go-grpc-middleware v1.3.0\n\u001b[0m\u001b[91mgo: downloading github.com/jackc/pgconn v1.10.0\n\u001b[0m\u001b[91mgo: downloading github.com/jackc/pgtype v1.8.1\n\u001b[0m\u001b[91mgo: downloading github.com/jackc/pgio v1.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/jackc/pgproto3/v2 v2.1.1\n\u001b[0m\u001b[91mgo: downloading github.com/cenkalti/backoff/v4 v4.1.3\n\u001b[0m\u001b[91mgo: downloading github.com/grpc-ecosystem/grpc-gateway/v2 v2.10.0\n\u001b[0m\u001b[91mgo: downloading github.com/go-gorp/gorp/v3 v3.0.2\n\u001b[0m\u001b[91mgo: downloading github.com/mojocn/base64Captcha v1.3.5\n\u001b[0m\u001b[91mgo: downloading go.uber.org/atomic v1.7.0\n\u001b[0m\u001b[91mgo: downloading go.uber.org/multierr v1.6.0\n\u001b[0m\u001b[91mgo: downloading github.com/leodido/go-urn v1.2.1\n\u001b[0m\u001b[91mgo: downloading github.com/json-iterator/go v1.1.12\n\u001b[0m\u001b[91mgo: downloading github.com/minio/sha256-simd v0.1.1\n\u001b[0m\u001b[91mgo: downloading github.com/mitchellh/go-homedir v1.1.0\n\u001b[0m\u001b[91mgo: downloading github.com/klauspost/compress v1.13.6\ngo: downloading github.com/minio/md5-simd v1.1.0\n\u001b[0m\u001b[91mgo: downloading golang.org/x/net v0.0.0-20220421235706-1d1ef9303861\n\u001b[0m\u001b[91mgo: downloading github.com/pingcap/errors v0.11.5-0.20201126102027-b0a155152ca3\n\u001b[0m\u001b[91mgo: downloading github.com/BurntSushi/toml v0.3.1\n\u001b[0m\u001b[91mgo: downloading github.com/pingcap/parser v0.0.0-20210415081931-48e7f467fd74\n\u001b[0m\u001b[91mgo: downloading github.com/satori/go.uuid v1.2.0\n\u001b[0m\u001b[91mgo: downloading github.com/siddontang/go-log v0.0.0-20180807004314-8d05993dda07\n\u001b[0m\u001b[91mgo: downloading github.com/siddontang/go v0.0.0-20180604090527-bdc77568d726\n\u001b[0m\u001b[91mgo: downloading github.com/golang-sql/civil v0.0.0-20190719163853-cb61b32ac6fe\n\u001b[0m\u001b[91mgo: downloading github.com/jackc/chunkreader/v2 v2.0.1\n\u001b[0m\u001b[91mgo: downloading github.com/jackc/pgpassfile v1.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/jackc/pgservicefile v0.0.0-20200714003250-2b9c44734f2b\n\u001b[0m\u001b[91mgo: downloading github.com/opentracing/opentracing-go v1.1.0\n\u001b[0m\u001b[91mgo: downloading golang.org/x/time v0.0.0-20220411224347-583f2d630306\n\u001b[0m\u001b[91mgo: downloading github.com/go-openapi/jsonpointer v0.19.5\n\u001b[0m\u001b[91mgo: downloading github.com/go-openapi/jsonreference v0.19.6\ngo: downloading github.com/go-openapi/swag v0.19.15\n\u001b[0m\u001b[91mgo: downloading github.com/rs/xid v1.2.1\n\u001b[0m\u001b[91mgo: downloading github.com/klauspost/cpuid v1.3.1\n\u001b[0m\u001b[91mgo: downloading github.com/modern-go/concurrent v0.0.0-20180306012644-bacd9c7ef1dd\n\u001b[0m\u001b[91mgo: downloading github.com/modern-go/reflect2 v1.0.2\n\u001b[0m\u001b[91mgo: downloading google.golang.org/genproto v0.0.0-20220422154200-b37d22cd5731\n\u001b[0m\u001b[91mgo: downloading github.com/PuerkitoBio/purell v1.1.1\n\u001b[0m\u001b[91mgo: downloading github.com/mailru/easyjson v0.7.6\n\u001b[0m\u001b[91mgo: downloading github.com/PuerkitoBio/urlesc v0.0.0-20170810143723-de5bf2ad4578\n\u001b[0m\u001b[91mgo: downloading github.com/pingcap/log v0.0.0-20210317133921-96f4fcab92a4\n\u001b[0m\u001b[91mgo: downloading gopkg.in/natefinch/lumberjack.v2 v2.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/josharian/intern v1.0.0\n\u001b[0m\u001b[91mgo: downloading golang.org/x/image v0.0.0-20190802002840-cff245a6509b\n\u001b[0m\u001b[91mgo: downloading github.com/golang/freetype v0.0.0-20170609003504-e2365dfdc4a0\n\u001b[0mRemoving intermediate container 1d57504cc386\n ---> 7291f4fe65b3\nStep 13/22 : FROM frolvlad/alpine-glibc:alpine-3.12\n ---> 5328705308b4\nStep 14/22 : ENV APP_HOME /app/gin-web\n ---> Running in bc247b7c0e0c\nRemoving intermediate container bc247b7c0e0c\n ---> d34be68294e3\nStep 15/22 : RUN mkdir -p $APP_HOME\n ---> Running in 1148ee41ed55\nRemoving intermediate container 1148ee41ed55\n ---> fa7c4ebe2bf9\nStep 16/22 : WORKDIR $APP_HOME\n ---> Running in eb7336d45809\nRemoving intermediate container eb7336d45809\n ---> d4450354702f\nStep 17/22 : COPY --from=gin-web $APP_HOME/conf ./conf/\n ---> da8a0f5fc7ec\nStep 18/22 : COPY --from=gin-web $APP_HOME/gin-web .\n ---> aa79fe34405c\nStep 19/22 : COPY --from=gin-web $APP_HOME/gitversion .\n ---> 758bd4d24ae9\nStep 20/22 : RUN sed -i 's/dl-cdn.alpinelinux.org/mirrors.aliyun.com/g' /etc/apk/repositories\n ---> Running in c6c0612ed99e\nRemoving intermediate container c6c0612ed99e\n ---> 5cc4983b0aca\nStep 21/22 : RUN apk update   && apk add --no-cache tzdata   && apk add --no-cache curl   && apk add --no-cache libstdc++   && cp /usr/share/zoneinfo/Asia/Shanghai /etc/localtime   && echo \"Asia/Shanghai\" > /etc/timezone\n ---> Running in 1b55f3b11322\nfetch http://mirrors.aliyun.com/alpine/v3.12/main/x86_64/APKINDEX.tar.gz\nfetch http://mirrors.aliyun.com/alpine/v3.12/community/x86_64/APKINDEX.tar.gz\nv3.12.12-45-g8116a127ec [http://mirrors.aliyun.com/alpine/v3.12/main]\nv3.12.12-46-g1df69604c4 [http://mirrors.aliyun.com/alpine/v3.12/community]\nOK: 12769 distinct packages available\nfetch http://mirrors.aliyun.com/alpine/v3.12/main/x86_64/APKINDEX.tar.gz\nfetch http://mirrors.aliyun.com/alpine/v3.12/community/x86_64/APKINDEX.tar.gz\n(1/1) Installing tzdata (2022a-r0)\nExecuting busybox-1.31.1-r22.trigger\nOK: 20 MiB in 18 packages\nfetch http://mirrors.aliyun.com/alpine/v3.12/main/x86_64/APKINDEX.tar.gz\nfetch http://mirrors.aliyun.com/alpine/v3.12/community/x86_64/APKINDEX.tar.gz\n(1/4) Installing ca-certificates (20220614-r0)\n(2/4) Installing nghttp2-libs (1.41.0-r0)\n(3/4) Installing libcurl (7.79.1-r1)\n(4/4) Installing curl (7.79.1-r1)\nExecuting busybox-1.31.1-r22.trigger\nExecuting ca-certificates-20220614-r0.trigger\nExecuting glibc-bin-2.32-r0.trigger\n\u001b[91m/usr/glibc-compat/sbin/ldconfig: /usr/glibc-compat/lib/ld-linux-x86-64.so.2 is not a symbolic link\n\n\u001b[0mOK: 22 MiB in 22 packages\nfetch http://mirrors.aliyun.com/alpine/v3.12/main/x86_64/APKINDEX.tar.gz\nfetch http://mirrors.aliyun.com/alpine/v3.12/community/x86_64/APKINDEX.tar.gz\n(1/1) Installing libstdc++ (9.3.0-r2)\nExecuting glibc-bin-2.32-r0.trigger\n\u001b[91m/usr/glibc-compat/sbin/ldconfig: /usr/glibc-compat/lib/ld-linux-x86-64.so.2 is not a symbolic link\n\n\u001b[0mOK: 24 MiB in 23 packages\nRemoving intermediate container 1b55f3b11322\n ---> c3398001462f\nStep 22/22 : CMD [\"./gin-web\"]\n ---> Running in fc6068560484\nRemoving intermediate container fc6068560484\n ---> 609ce25da8c2\nSuccessfully built 609ce25da8c2\nSuccessfully tagged gin-web:latest\n","stderr":"","imageSize":99390920},"endTime":1672089335439}