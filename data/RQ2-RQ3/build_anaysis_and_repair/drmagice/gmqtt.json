{"repository":"https://github.com/drmagice/gmqtt","dockerfilePath":"Dockerfile","startTime":1672353911426,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/drmagice/gmqtt'...\n","error":null,"commit":"61e59bcdc12d5c021fc8df15c33d58be1f2a6873"},"originalBuild":{"startTimestamp":1672353912410,"endTimestamp":1672353960020,"error":null,"stdout":"Sending build context to Docker daemon  1.769MB\r\r\nStep 1/15 : FROM golang:alpine AS builder\nalpine: Pulling from library/golang\nDigest: sha256:a9b24b67dc83b3383d22a14941c2b2b2ca6a103d805cac6820fd1355943beaf1\nStatus: Downloaded newer image for golang:alpine\n ---> cae57157ceaa\nStep 2/15 : RUN apk add make git\n ---> Running in b2300b7b9f7b\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/7) Installing brotli-libs (1.0.9-r9)\n(2/7) Installing nghttp2-libs (1.51.0-r0)\n(3/7) Installing libcurl (7.87.0-r0)\n(4/7) Installing libexpat (2.5.0-r0)\n(5/7) Installing pcre2 (10.42-r0)\n(6/7) Installing git (2.38.2-r0)\n(7/7) Installing make (4.3-r1)\nExecuting busybox-1.35.0-r29.trigger\nOK: 16 MiB in 23 packages\nRemoving intermediate container b2300b7b9f7b\n ---> 49d3d1d274e3\nStep 3/15 : ADD . /go/src/github.com/DrmagicE/gmqtt\n ---> e1f5bda95724\nStep 4/15 : WORKDIR /go/src/github.com/DrmagicE/gmqtt\n ---> Running in e7b647ec1d3f\nRemoving intermediate container e7b647ec1d3f\n ---> 44346d902e87\nStep 5/15 : ENV GO111MODULE on\n ---> Running in 92c1de887328\nRemoving intermediate container 92c1de887328\n ---> 859c8206a9ca\nStep 6/15 : EXPOSE 1883 8883 8082 8083 8084\n ---> Running in 9bc35f65505d\nRemoving intermediate container 9bc35f65505d\n ---> 4f63104ed3af\nStep 7/15 : RUN make binary\n ---> Running in d2bd92eaffdd\ngo generate ./...\n\u001b[91mgo: downloading github.com/spf13/cobra v1.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/gomodule/redigo v1.8.2\ngo: downloading github.com/grpc-ecosystem/go-grpc-middleware v1.0.0\n\u001b[0m\u001b[91mgo: downloading google.golang.org/grpc v1.50.1\n\u001b[0m\u001b[91mgo: downloading github.com/stretchr/testify v1.7.0\n\u001b[0m\u001b[91mgo: downloading go.uber.org/zap v1.13.0\n\u001b[0m\u001b[91mgo: downloading github.com/grpc-ecosystem/go-grpc-prometheus v1.2.0\ngo: downloading github.com/gorilla/websocket v1.4.2\ngo: downloading github.com/golang/mock v1.6.0\n\u001b[0m\u001b[91mgo: downloading github.com/grpc-ecosystem/grpc-gateway v1.16.0\n\u001b[0m\u001b[91mgo: downloading github.com/golang/protobuf v1.5.2\n\u001b[0m\u001b[91mgo: downloading github.com/prometheus/client_golang v1.4.0\n\u001b[0m\u001b[91mgo: downloading golang.org/x/crypto v0.0.0-20210921155107-089bfa567519\n\u001b[0m\u001b[91mgo: downloading github.com/iancoleman/strcase v0.1.2\ngo: downloading google.golang.org/genproto v0.0.0-20221201204527-e3fa12d562f3\n\u001b[0m\u001b[91mgo: downloading google.golang.org/protobuf v1.28.1\n\u001b[0m\u001b[91mgo: downloading gopkg.in/yaml.v2 v2.4.0\n\u001b[0m\u001b[91mgo: downloading github.com/pkg/errors v0.8.1\n\u001b[0m\u001b[91mgo: downloading github.com/google/uuid v1.3.0\n\u001b[0m\u001b[91mgo: downloading github.com/hashicorp/go-sockaddr v1.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/hashicorp/logutils v1.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/hashicorp/serf v0.9.5\n\u001b[0m\u001b[91mgo: downloading golang.org/x/net v0.0.0-20221014081412-f15817d10f9b\n\u001b[0m\u001b[91mgo: downloading github.com/davecgh/go-spew v1.1.1\n\u001b[0m\u001b[91mgo: downloading github.com/pmezard/go-difflib v1.0.0\n\u001b[0m\u001b[91mgo: downloading gopkg.in/yaml.v3 v3.0.0-20200313102051-9f266ea9e77c\n\u001b[0m\u001b[91mgo: downloading go.uber.org/atomic v1.5.0\n\u001b[0m\u001b[91mgo: downloading go.uber.org/multierr v1.3.0\n\u001b[0m\u001b[91mgo: downloading github.com/spf13/pflag v1.0.3\n\u001b[0m\u001b[91mgo: downloading github.com/cespare/xxhash/v2 v2.1.1\ngo: downloading github.com/prometheus/client_model v0.2.0\n\u001b[0m\u001b[91mgo: downloading github.com/beorn7/perks v1.0.1\n\u001b[0m\u001b[91mgo: downloading github.com/prometheus/common v0.9.1\n\u001b[0m\u001b[91mgo: downloading github.com/prometheus/procfs v0.0.8\n\u001b[0m\u001b[91mgo: downloading github.com/cespare/xxhash v1.1.0\n\u001b[0m\u001b[91mgo: downloading github.com/armon/go-metrics v0.0.0-20180917152333-f0300d1749da\n\u001b[0m\u001b[91mgo: downloading github.com/hashicorp/go-msgpack v0.5.3\n\u001b[0m\u001b[91mgo: downloading github.com/hashicorp/memberlist v0.2.2\n\u001b[0m\u001b[91mgo: downloading github.com/matttproud/golang_protobuf_extensions v1.0.1\n\u001b[0m\u001b[91mgo: downloading github.com/hashicorp/go-immutable-radix v1.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/hashicorp/golang-lru v0.5.1\n\u001b[0m\u001b[91mgo: downloading github.com/sean-/seed v0.0.0-20170313163322-e2103e2c3529\n\u001b[0m\u001b[91mgo: downloading github.com/google/btree v1.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/hashicorp/go-multierror v1.1.0\ngo: downloading github.com/miekg/dns v1.1.26\n\u001b[0m\u001b[91mgo: downloading github.com/hashicorp/errwrap v1.0.0\n\u001b[0m\u001b[91mgo: downloading golang.org/x/sys v0.0.0-20220728004956-3c1f35247d10\n\u001b[0m\u001b[91mgo: downloading golang.org/x/text v0.4.0\n\u001b[0mCGO_ENABLED=0 GOOS=linux go build  -ldflags '-s' -o build/gmqttd ./cmd/gmqttd\nRemoving intermediate container d2bd92eaffdd\n ---> ad07962ee9eb\nStep 8/15 : FROM alpine:3.12\n3.12: Pulling from library/alpine\n1b7ca6aea1dd: Pulling fs layer\n1b7ca6aea1dd: Verifying Checksum\n1b7ca6aea1dd: Download complete\n1b7ca6aea1dd: Pull complete\nDigest: sha256:c75ac27b49326926b803b9ed43bf088bc220d22556de1bc5f72d742c91398f69\nStatus: Downloaded newer image for alpine:3.12\n ---> 24c8ece58a1a\nStep 9/15 : WORKDIR /gmqttd\n ---> Running in 1ae8d5e099d0\nRemoving intermediate container 1ae8d5e099d0\n ---> dd342cc07d56\nStep 10/15 : COPY --from=builder /go/src/github.com/DrmagicE/gmqtt/build/gmqttd .\n ---> b5b68e1dca85\nStep 11/15 : RUN mkdir /etc/gmqtt\n ---> Running in 5cb2a40dc97a\nRemoving intermediate container 5cb2a40dc97a\n ---> 83daa107a24c\nStep 12/15 : COPY ./cmd/gmqttd/default_config.yml /etc/gmqtt/gmqttd.yml\n ---> f276784339b0\nStep 13/15 : ENV PATH=$PATH:/gmqttd\n ---> Running in d60ebf1cea9a\nRemoving intermediate container d60ebf1cea9a\n ---> 3d2ad86d84ee\nStep 14/15 : RUN chmod +x gmqttd\n ---> Running in 1e8e92ff0b8c\nRemoving intermediate container 1e8e92ff0b8c\n ---> 4e13493a0a24\nStep 15/15 : ENTRYPOINT [\"gmqttd\",\"start\"]\n ---> Running in af27b0186104\nRemoving intermediate container af27b0186104\n ---> 2a1b2d05d520\nSuccessfully built 2a1b2d05d520\nSuccessfully tagged gmqtt:latest\n","stderr":"","imageSize":35703132},"repair":{"violations":[{"name":"apkAddUseNoCache","position":{"start":2,"end":2,"columnStart":4,"columnEnd":20}}],"repairedDockerfile":"FROM golang:alpine AS builder\n\nRUN apk add --no-cache make git\n\nADD . /go/src/github.com/DrmagicE/gmqtt\nWORKDIR /go/src/github.com/DrmagicE/gmqtt\n\nENV GO111MODULE on\n#ENV GOPROXY https://goproxy.cn\n\nEXPOSE 1883 8883 8082 8083 8084\n\nRUN make binary\n\nFROM alpine:3.12\n\nWORKDIR /gmqttd\nCOPY --from=builder /go/src/github.com/DrmagicE/gmqtt/build/gmqttd .\nRUN mkdir /etc/gmqtt\nCOPY ./cmd/gmqttd/default_config.yml /etc/gmqtt/gmqttd.yml\nENV PATH=$PATH:/gmqttd\nRUN chmod +x gmqttd\nENTRYPOINT [\"gmqttd\",\"start\"]\n\n\n"},"repairedBuild":{"startTimestamp":1672353960322,"endTimestamp":1672354025819,"error":null,"stdout":"Sending build context to Docker daemon  1.769MB\r\r\nStep 1/15 : FROM golang:alpine AS builder\n ---> cae57157ceaa\nStep 2/15 : RUN apk add --no-cache make git\n ---> Running in fdd0df31d1b1\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/7) Installing brotli-libs (1.0.9-r9)\n(2/7) Installing nghttp2-libs (1.51.0-r0)\n(3/7) Installing libcurl (7.87.0-r0)\n(4/7) Installing libexpat (2.5.0-r0)\n(5/7) Installing pcre2 (10.42-r0)\n(6/7) Installing git (2.38.2-r0)\n(7/7) Installing make (4.3-r1)\nExecuting busybox-1.35.0-r29.trigger\nOK: 16 MiB in 23 packages\nRemoving intermediate container fdd0df31d1b1\n ---> 37ab571ea931\nStep 3/15 : ADD . /go/src/github.com/DrmagicE/gmqtt\n ---> c67d3dac76d7\nStep 4/15 : WORKDIR /go/src/github.com/DrmagicE/gmqtt\n ---> Running in 670c5f79e66c\nRemoving intermediate container 670c5f79e66c\n ---> 79f06af19f2d\nStep 5/15 : ENV GO111MODULE on\n ---> Running in d0a882044445\nRemoving intermediate container d0a882044445\n ---> a532ed345568\nStep 6/15 : EXPOSE 1883 8883 8082 8083 8084\n ---> Running in 5196b2953562\nRemoving intermediate container 5196b2953562\n ---> b785494a189c\nStep 7/15 : RUN make binary\n ---> Running in 69c1a7daa7b2\ngo generate ./...\n\u001b[91mgo: downloading github.com/golang/mock v1.6.0\n\u001b[0m\u001b[91mgo: downloading github.com/golang/protobuf v1.5.2\n\u001b[0m\u001b[91mgo: downloading github.com/grpc-ecosystem/grpc-gateway v1.16.0\ngo: downloading github.com/hashicorp/go-sockaddr v1.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/hashicorp/serf v0.9.5\n\u001b[0m\u001b[91mgo: downloading github.com/stretchr/testify v1.7.0\ngo: downloading go.uber.org/zap v1.13.0\ngo: downloading google.golang.org/genproto v0.0.0-20221201204527-e3fa12d562f3\n\u001b[0m\u001b[91mgo: downloading golang.org/x/crypto v0.0.0-20210921155107-089bfa567519\ngo: downloading github.com/google/uuid v1.3.0\n\u001b[0m\u001b[91mgo: downloading google.golang.org/grpc v1.50.1\ngo: downloading github.com/hashicorp/logutils v1.0.0\n\u001b[0m\u001b[91mgo: downloading google.golang.org/protobuf v1.28.1\n\u001b[0m\u001b[91mgo: downloading gopkg.in/yaml.v2 v2.4.0\n\u001b[0m\u001b[91mgo: downloading github.com/gorilla/websocket v1.4.2\n\u001b[0m\u001b[91mgo: downloading github.com/grpc-ecosystem/go-grpc-middleware v1.0.0\ngo: downloading github.com/grpc-ecosystem/go-grpc-prometheus v1.2.0\n\u001b[0m\u001b[91mgo: downloading github.com/gomodule/redigo v1.8.2\n\u001b[0m\u001b[91mgo: downloading github.com/iancoleman/strcase v0.1.2\n\u001b[0m\u001b[91mgo: downloading github.com/pkg/errors v0.8.1\n\u001b[0m\u001b[91mgo: downloading github.com/spf13/cobra v1.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/prometheus/client_golang v1.4.0\n\u001b[0m\u001b[91mgo: downloading golang.org/x/net v0.0.0-20221014081412-f15817d10f9b\n\u001b[0m\u001b[91mgo: downloading github.com/davecgh/go-spew v1.1.1\n\u001b[0m\u001b[91mgo: downloading github.com/pmezard/go-difflib v1.0.0\n\u001b[0m\u001b[91mgo: downloading gopkg.in/yaml.v3 v3.0.0-20200313102051-9f266ea9e77c\n\u001b[0m\u001b[91mgo: downloading github.com/spf13/pflag v1.0.3\n\u001b[0m\u001b[91mgo: downloading go.uber.org/multierr v1.3.0\n\u001b[0m\u001b[91mgo: downloading go.uber.org/atomic v1.5.0\n\u001b[0m\u001b[91mgo: downloading github.com/prometheus/common v0.9.1\ngo: downloading github.com/prometheus/procfs v0.0.8\ngo: downloading github.com/cespare/xxhash/v2 v2.1.1\ngo: downloading github.com/beorn7/perks v1.0.1\n\u001b[0m\u001b[91mgo: downloading github.com/prometheus/client_model v0.2.0\n\u001b[0m\u001b[91mgo: downloading github.com/cespare/xxhash v1.1.0\n\u001b[0m\u001b[91mgo: downloading github.com/hashicorp/go-msgpack v0.5.3\ngo: downloading github.com/armon/go-metrics v0.0.0-20180917152333-f0300d1749da\n\u001b[0m\u001b[91mgo: downloading github.com/hashicorp/memberlist v0.2.2\n\u001b[0m\u001b[91mgo: downloading github.com/matttproud/golang_protobuf_extensions v1.0.1\n\u001b[0m\u001b[91mgo: downloading github.com/hashicorp/go-immutable-radix v1.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/hashicorp/golang-lru v0.5.1\n\u001b[0m\u001b[91mgo: downloading github.com/sean-/seed v0.0.0-20170313163322-e2103e2c3529\ngo: downloading github.com/google/btree v1.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/miekg/dns v1.1.26\ngo: downloading github.com/hashicorp/go-multierror v1.1.0\n\u001b[0m\u001b[91mgo: downloading github.com/hashicorp/errwrap v1.0.0\n\u001b[0m\u001b[91mgo: downloading golang.org/x/sys v0.0.0-20220728004956-3c1f35247d10\n\u001b[0m\u001b[91mgo: downloading golang.org/x/text v0.4.0\n\u001b[0mCGO_ENABLED=0 GOOS=linux go build  -ldflags '-s' -o build/gmqttd ./cmd/gmqttd\nRemoving intermediate container 69c1a7daa7b2\n ---> 82c26fc84195\nStep 8/15 : FROM alpine:3.12\n ---> 24c8ece58a1a\nStep 9/15 : WORKDIR /gmqttd\n ---> Running in 718594552df0\nRemoving intermediate container 718594552df0\n ---> 103f9a0c99cd\nStep 10/15 : COPY --from=builder /go/src/github.com/DrmagicE/gmqtt/build/gmqttd .\n ---> fd6bf72a3c81\nStep 11/15 : RUN mkdir /etc/gmqtt\n ---> Running in d8808ec37021\nRemoving intermediate container d8808ec37021\n ---> 43f697fbd4f9\nStep 12/15 : COPY ./cmd/gmqttd/default_config.yml /etc/gmqtt/gmqttd.yml\n ---> f2f567bffb6f\nStep 13/15 : ENV PATH=$PATH:/gmqttd\n ---> Running in f86e9929f9e6\nRemoving intermediate container f86e9929f9e6\n ---> 4e88fd3f2894\nStep 14/15 : RUN chmod +x gmqttd\n ---> Running in 64b832330460\nRemoving intermediate container 64b832330460\n ---> c51127fda368\nStep 15/15 : ENTRYPOINT [\"gmqttd\",\"start\"]\n ---> Running in f1c5d278a128\nRemoving intermediate container f1c5d278a128\n ---> 13dec7405200\nSuccessfully built 13dec7405200\nSuccessfully tagged gmqtt:latest\n","stderr":"","imageSize":35703132},"endTime":1672354026251}