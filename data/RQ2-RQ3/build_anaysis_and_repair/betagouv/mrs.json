{"repository":"https://github.com/betagouv/mrs","dockerfilePath":"Dockerfile","startTime":1672632702746,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/betagouv/mrs'...\n","error":null,"commit":"3c63cc1f3623564597278dedeef14af313247a72"},"originalBuild":{"startTimestamp":1672632703907,"endTimestamp":1672632742585,"error":{"code":1,"killed":false,"signal":null,"cmd":"docker build --no-cache --force-rm -t mrs:latest -f /tmp/dinghy-analysis/betagouv/mrs/Dockerfile ."},"stdout":"Sending build context to Docker daemon  7.108MB\r\r\nStep 1/43 : FROM node:10-alpine\n ---> aa67ba258e18\nStep 2/43 : ENV DJANGO_SETTINGS_MODULE=mrs.settings\n ---> Running in 5e0fc6b8c90c\nRemoving intermediate container 5e0fc6b8c90c\n ---> 63c2d2bea3ec\nStep 3/43 : ENV UWSGI_MODULE=mrs.wsgi:application\n ---> Running in 016a2192d273\nRemoving intermediate container 016a2192d273\n ---> 7eb111d1968b\nStep 4/43 : ENV NODE_ENV=production\n ---> Running in 8aab33ddd685\nRemoving intermediate container 8aab33ddd685\n ---> b2aa9b732f23\nStep 5/43 : ENV PLAYLABS_PLUGINS=postgres,uwsgi,django,sentry\n ---> Running in 7129800f19cc\nRemoving intermediate container 7129800f19cc\n ---> dba4155467d9\nStep 6/43 : ENV PYTHONIOENCODING=UTF-8 PYTHONUNBUFFERED=1\n ---> Running in 15cf8be91ec1\nRemoving intermediate container 15cf8be91ec1\n ---> e01d836f889f\nStep 7/43 : ENV STATIC_URL=/static/ STATIC_ROOT=/app/static\n ---> Running in 65f37000c2d9\nRemoving intermediate container 65f37000c2d9\n ---> 03ef60682bc4\nStep 8/43 : ENV UWSGI_SPOOLER_NAMES=mail,stat UWSGI_SPOOLER_MOUNT=/app/spooler\n ---> Running in ea8b6465688d\nRemoving intermediate container ea8b6465688d\n ---> 31c57474f834\nStep 9/43 : ENV VIRTUAL_PROTO=uwsgi\n ---> Running in b8f3edbe95b2\nRemoving intermediate container b8f3edbe95b2\n ---> 3e87399576a3\nStep 10/43 : ENV LOG=/app/log\n ---> Running in 57837169ca0a\nRemoving intermediate container 57837169ca0a\n ---> bb48321e2d53\nStep 11/43 : ENV MEDIA_ROOT=/media\n ---> Running in e1b07635457f\nRemoving intermediate container e1b07635457f\n ---> 6f145c7295a5\nStep 12/43 : ENV ATTACHMENT_ROOT=/mrsattachments\n ---> Running in 098918835cc4\nRemoving intermediate container 098918835cc4\n ---> bc71e517a3e8\nStep 13/43 : EXPOSE 8000\n ---> Running in 6c8cbb4726f8\nRemoving intermediate container 6c8cbb4726f8\n ---> 0efdd7cbb10e\nStep 14/43 : RUN apk update && apk --no-cache upgrade && apk --no-cache add ca-certificates gettext shadow python3 py3-pillow py3-psycopg2 dumb-init bash git curl uwsgi-python uwsgi-http uwsgi-spooler uwsgi-cache uwsgi-router_cache uwsgi-router_static && pip3 install --upgrade pip\n ---> Running in 5a4ac0f91d05\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.11/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.11/community/x86_64/APKINDEX.tar.gz\nv3.11.13-12-g2cfa91a2b4 [http://dl-cdn.alpinelinux.org/alpine/v3.11/main]\nv3.11.11-124-gf2729ece5a [http://dl-cdn.alpinelinux.org/alpine/v3.11/community]\nOK: 11281 distinct packages available\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.11/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.11/community/x86_64/APKINDEX.tar.gz\nUpgrading critical system libraries and apk-tools:\n(1/1) Upgrading apk-tools (2.10.6-r0 -> 2.10.8-r0)\nExecuting busybox-1.31.1-r10.trigger\nContinuing the upgrade transaction with new apk-tools:\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.11/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.11/community/x86_64/APKINDEX.tar.gz\n(1/5) Upgrading busybox (1.31.1-r10 -> 1.31.1-r11)\nExecuting busybox-1.31.1-r11.post-upgrade\n(2/5) Upgrading libcrypto1.1 (1.1.1k-r0 -> 1.1.1l-r0)\n(3/5) Upgrading libssl1.1 (1.1.1k-r0 -> 1.1.1l-r0)\n(4/5) Upgrading ssl_client (1.31.1-r10 -> 1.31.1-r11)\n(5/5) Upgrading zlib (1.2.11-r3 -> 1.2.11-r5)\nExecuting busybox-1.31.1-r11.trigger\nOK: 7 MiB in 16 packages\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.11/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.11/community/x86_64/APKINDEX.tar.gz\n(1/51) Installing ncurses-terminfo-base (6.1_p20200118-r4)\n(2/51) Installing ncurses-libs (6.1_p20200118-r4)\n(3/51) Installing readline (8.0.1-r0)\n(4/51) Installing bash (5.0.11-r1)\nExecuting bash-5.0.11-r1.post-install\n(5/51) Installing ca-certificates (20191127-r2)\n(6/51) Installing nghttp2-libs (1.40.0-r1)\n(7/51) Installing libcurl (7.79.1-r0)\n(8/51) Installing curl (7.79.1-r0)\n(9/51) Installing dumb-init (1.2.2-r1)\n(10/51) Installing libgomp (9.3.0-r0)\n(11/51) Installing libintl (0.20.1-r2)\n(12/51) Installing libunistring (0.9.10-r0)\n(13/51) Installing gettext-libs (0.20.1-r2)\n(14/51) Installing xz-libs (5.2.4-r0)\n(15/51) Installing libxml2 (2.9.12-r0)\n(16/51) Installing gettext (0.20.1-r2)\n(17/51) Installing expat (2.2.9-r1)\n(18/51) Installing pcre2 (10.34-r1)\n(19/51) Installing git (2.24.4-r0)\n(20/51) Installing py3-olefile (0.46-r2)\n(21/51) Installing libbz2 (1.0.8-r1)\n(22/51) Installing libpng (1.6.37-r1)\n(23/51) Installing freetype (2.10.1-r1)\n(24/51) Installing libjpeg-turbo (2.0.4-r1)\n(25/51) Installing lcms2 (2.9-r1)\n(26/51) Installing tiff (4.1.0-r0)\n(27/51) Installing libwebp (1.0.3-r0)\n(28/51) Installing py3-pillow (6.2.1-r1)\n(29/51) Installing db (5.3.28-r1)\n(30/51) Installing libsasl (2.1.27-r5)\n(31/51) Installing libldap (2.4.48-r3)\n(32/51) Installing libpq (12.9-r0)\n(33/51) Installing py3-psycopg2 (2.8.4-r0)\n(34/51) Installing libffi (3.2.1-r6)\n(35/51) Installing gdbm (1.13-r1)\n(36/51) Installing sqlite-libs (3.30.1-r2)\n(37/51) Installing python3 (3.8.10-r0)\n(38/51) Installing linux-pam (1.3.1-r1)\n(39/51) Installing shadow (4.7-r1)\n(40/51) Installing mailcap (2.1.48-r0)\n(41/51) Installing libcap (2.27-r0)\n(42/51) Installing jansson (2.12-r0)\n(43/51) Installing pcre (8.43-r1)\n(44/51) Installing uwsgi (2.0.18-r7)\nExecuting uwsgi-2.0.18-r7.pre-install\n(45/51) Installing uwsgi-cache (2.0.18-r7)\n(46/51) Installing uwsgi-corerouter (2.0.18-r7)\n(47/51) Installing uwsgi-http (2.0.18-r7)\n(48/51) Installing uwsgi-python3 (2.0.18-r7)\n(49/51) Installing uwsgi-router_cache (2.0.18-r7)\n(50/51) Installing uwsgi-router_static (2.0.18-r7)\n(51/51) Installing uwsgi-spooler (2.0.18-r7)\nExecuting busybox-1.31.1-r11.trigger\nExecuting ca-certificates-20191127-r2.trigger\nOK: 106 MiB in 67 packages\nRequirement already satisfied: pip in /usr/lib/python3.8/site-packages (21.1.1)\nCollecting pip\n  Downloading pip-22.3.1-py3-none-any.whl (2.1 MB)\nInstalling collected packages: pip\n  Attempting uninstall: pip\n    Found existing installation: pip 21.1.1\n    Uninstalling pip-21.1.1:\n      Successfully uninstalled pip-21.1.1\nSuccessfully installed pip-22.3.1\n\u001b[91mWARNING: Running pip as root will break packages and permissions. You should install packages reliably by using venv: https://pip.pypa.io/warnings/venv\n\u001b[0mRemoving intermediate container 5a4ac0f91d05\n ---> 3a93ff642f4b\nStep 15/43 : RUN mkdir -p /app && usermod -d /app -l app node && groupmod -n app node && chown -R app:app /app\n ---> Running in 03f084b52bda\nRemoving intermediate container 03f084b52bda\n ---> 924be5953815\nStep 16/43 : RUN curl -sL https://sentry.io/get-cli/ | bash\n ---> Running in cd8c459b9b7d\nThis script will automatically install sentry-cli (latest) for you.\nInstallation path: /usr/local/bin/sentry-cli\nWarning: this script is currently running as root. This is dangerous. \n         Instead run it as normal user. We will sudo as needed.\n\u001b[91m\r######################################################################## \u001b[0m\u001b[91m100.0%\u001b[0m\u001b[91m\r###########                        \u001b[0m\u001b[91m                      \u001b[0m\u001b[91m   \u001b[0m\u001b[91m      \u001b[0m\u001b[91m      \u001b[0m\u001b[91m  16.0\u001b[0m\u001b[91m%\u001b[0m\u001b[91m\r########################################\u001b[0m\u001b[91m############     \u001b[0m\u001b[91m        \u001b[0m\u001b[91m   \u001b[0m\u001b[91m    \u001b[0m\u001b[91m \u001b[0m\u001b[91m 72\u001b[0m\u001b[91m.7%\u001b[0m\u001b[91m\r######################################\u001b[0m\u001b[91m###############\u001b[0m\u001b[91m######\u001b[0m\u001b[91m###\u001b[0m\u001b[91m###\u001b[0m\u001b[91m###\u001b[0m\u001b[91m#### \u001b[0m\u001b[91m100.0%\u001b[0m\u001b[91m\n\u001b[0mInstalled sentry-cli 2.11.0\nDone!\nRemoving intermediate container cd8c459b9b7d\n ---> 81b327fa777b\nStep 17/43 : WORKDIR /app\n ---> Running in 81816adf453e\nRemoving intermediate container 81816adf453e\n ---> b3709b90b734\nStep 18/43 : ARG GIT_COMMIT\n ---> Running in 5163be8ddc8c\nRemoving intermediate container 5163be8ddc8c\n ---> 72981062195b\nStep 19/43 : ENV GIT_COMMIT=$GIT_COMMIT\n ---> Running in 2e8941e68ecb\nRemoving intermediate container 2e8941e68ecb\n ---> 87507694c940\nStep 20/43 : COPY yarn.lock .babelrc package.json /app/\n ---> a665eb67621c\nStep 21/43 : RUN cd /app && yarn install --cache-folder /dev/shm/yarn --frozen-lockfile\n ---> Running in c17d525c6669\nyarn install v1.22.5\n[1/4] Resolving packages...\n[2/4] Fetching packages...\n\u001b[91merror An unexpected error occurred: \"https://registry.yarnpkg.com/node-sass/-/node-sass-4.12.0.tgz: ENOSPC: no space left on device, write\".\n\u001b[0minfo If you think this is a bug, please open a bug report with the information provided in \"/app/yarn-error.log\".\ninfo Visit https://yarnpkg.com/en/docs/cli/install for documentation about this command.\nRemoving intermediate container c17d525c6669\n","stderr":"The command '/bin/sh -c cd /app && yarn install --cache-folder /dev/shm/yarn --frozen-lockfile' returned a non-zero code: 1\n"},"endTime":1672632742680}