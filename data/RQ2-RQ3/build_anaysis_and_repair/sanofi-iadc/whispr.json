{"repository":"https://github.com/sanofi-iadc/whispr","dockerfilePath":"Dockerfile","startTime":1672121273213,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/sanofi-iadc/whispr'...\n","error":null,"commit":"5d22282042ad7fc70ca3cff8f5eaf24d27cca468"},"originalBuild":{"startTimestamp":1672121274334,"endTimestamp":1672121579833,"error":null,"stdout":"Sending build context to Docker daemon  3.662MB\r\r\nStep 1/19 : ARG NODE_VERSION=16.14.0\nStep 2/19 : FROM node:${NODE_VERSION}-alpine AS builder\n ---> beac28f7728d\nStep 3/19 : WORKDIR /app\n ---> Running in eaab0663b8e3\nRemoving intermediate container eaab0663b8e3\n ---> dcbf97736ef4\nStep 4/19 : COPY package*.json ./\n ---> 2753253c6030\nStep 5/19 : RUN npm ci --quiet\n ---> Running in 57d04391d82b\n\u001b[91mnpm WARN deprecated querystring@0.2.0: The querystring API is considered Legacy. new code should use the URLSearchParams API instead.\n\u001b[0m\u001b[91mnpm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142\n\u001b[0m\u001b[91mnpm WARN deprecated subscriptions-transport-ws@0.11.0: The `subscriptions-transport-ws` package is no longer maintained. We recommend you use `graphql-ws` instead. For help migrating Apollo software to `graphql-ws`, see https://www.apollographql.com/docs/apollo-server/data/subscriptions/#switching-from-subscriptions-transport-ws    For general help using `graphql-ws`, see https://github.com/enisdenjo/graphql-ws/blob/master/README.md\n\u001b[0m\u001b[91mnpm WARN deprecated har-validator@5.1.5: this library is no longer supported\n\u001b[0m\u001b[91mnpm WARN deprecated messageformat@2.3.0: Package renamed as '@messageformat/core', see messageformat.github.io for more details. 'messageformat' will eventually provide a polyfill for Intl.MessageFormat, once it's been defined by Unicode & ECMA.\n\u001b[0m\u001b[91mnpm WARN deprecated formidable@1.2.6: Please upgrade to latest, formidable@v2 or formidable@v3! Check these notes: https://bit.ly/2ZEqIau\n\u001b[0m\u001b[91mnpm WARN deprecated fastify-warning@0.2.0: This module renamed to process-warning\n\u001b[0m\u001b[91mnpm WARN deprecated superagent@6.1.0: Please upgrade to v7.0.2+ of superagent.  We have fixed numerous issues with streams, form-data, attach(), filesystem errors not bubbling up (ENOENT on attach()), and all tests are now passing.  See the releases tab for more information at <https://github.com/visionmedia/superagent/releases>.\n\u001b[0m\u001b[91mnpm WARN deprecated @types/graphql@14.5.0: This is a stub types definition. graphql provides its own type definitions, so you do not need this installed.\n\u001b[0m\u001b[91mnpm WARN deprecated uuid@3.4.0: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.\n\u001b[0m\u001b[91mnpm WARN deprecated uuid@3.3.2: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.\n\u001b[0m\u001b[91mnpm WARN deprecated subscriptions-transport-ws@0.9.19: The `subscriptions-transport-ws` package is no longer maintained. We recommend you use `graphql-ws` instead. For help migrating Apollo software to `graphql-ws`, see https://www.apollographql.com/docs/apollo-server/data/subscriptions/#switching-from-subscriptions-transport-ws    For general help using `graphql-ws`, see https://github.com/enisdenjo/graphql-ws/blob/master/README.md\n\u001b[0m\nadded 1848 packages, and audited 2049 packages in 44s\n\n170 packages are looking for funding\n  run `npm fund` for details\n\n40 vulnerabilities (1 low, 9 moderate, 28 high, 2 critical)\n\nTo address issues that do not require attention, run:\n  npm audit fix\n\nTo address all issues possible (including breaking changes), run:\n  npm audit fix --force\n\nSome issues need review, and may require choosing\na different dependency.\n\nRun `npm audit` for details.\n\u001b[91mnpm notice \nnpm \u001b[0m\u001b[91mnotice New major version of npm available! 8.3.1 -> 9.2.0\nnpm notice Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm notice Run `npm install -g npm@9.2.0` to update!\nnpm notice\u001b[0m\u001b[91m \n\u001b[0mRemoving intermediate container 57d04391d82b\n ---> 4aaff19c360b\nStep 6/19 : COPY ./ ./\n ---> 12c33c8605aa\nStep 7/19 : RUN npm run build\n ---> Running in 75aab7577a2c\n\n> @sanofi-iadc/whispr@4.10.0 build\n> rimraf dist && tsc -p tsconfig.build.json\n\nRemoving intermediate container 75aab7577a2c\n ---> f788252b5399\nStep 8/19 : FROM node:${NODE_VERSION}-alpine\n ---> beac28f7728d\nStep 9/19 : WORKDIR /app\n ---> Running in 9c5be3a04c47\nRemoving intermediate container 9c5be3a04c47\n ---> ce48787ed4d0\nStep 10/19 : RUN npm install -g pm2\n ---> Running in 44ea68370c3c\n\u001b[91mnpm\u001b[0m\u001b[91m WARN deprecated uuid@3.4.0: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.\n\u001b[0m\nadded 184 packages, and audited 185 packages in 13s\n\n12 packages are looking for funding\n  run `npm fund` for details\n\nfound 0 vulnerabilities\n\u001b[91mnpm notice\u001b[0m\u001b[91m \nnpm notice\u001b[0m\u001b[91m New major version of npm available! 8.3.1 -> 9.2.0\nnpm notice Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm notice\u001b[0m\u001b[91m Run `npm install -g npm@9.2.0` to update!\nnpm notice\u001b[0m\u001b[91m \n\u001b[0mRemoving intermediate container 44ea68370c3c\n ---> 6e09a3d0f7e4\nStep 11/19 : COPY package*.json ./\n ---> 3375f0ea9b09\nStep 12/19 : RUN npm ci --quiet --only=production\n ---> Running in 81f12e6ba33d\n\u001b[91mnpm WARN deprecated uuid@3.4.0: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.\n\u001b[0m\u001b[91mnpm WARN deprecated querystring@0.2.0: The querystring API is considered Legacy. new code should use the URLSearchParams API instead.\n\u001b[0m\u001b[91mnpm WARN deprecated har-validator@5.1.5: this library is no longer supported\n\u001b[0m\u001b[91mnpm WARN deprecated fastify-warning@0.2.0: This module renamed to process-warning\n\u001b[0m\u001b[91mnpm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142\n\u001b[0m\u001b[91mnpm WARN deprecated formidable@1.2.6: Please upgrade to latest, formidable@v2 or formidable@v3! Check these notes: https://bit.ly/2ZEqIau\n\u001b[0m\u001b[91mnpm WARN deprecated @types/graphql@14.5.0: This is a stub types definition. graphql provides its own type definitions, so you do not need this installed.\n\u001b[0m\u001b[91mnpm WARN deprecated subscriptions-transport-ws@0.11.0: The `subscriptions-transport-ws` package is no longer maintained. We recommend you use `graphql-ws` instead. For help migrating Apollo software to `graphql-ws`, see https://www.apollographql.com/docs/apollo-server/data/subscriptions/#switching-from-subscriptions-transport-ws    For general help using `graphql-ws`, see https://github.com/enisdenjo/graphql-ws/blob/master/README.md\n\u001b[0m\u001b[91mnpm WARN deprecated superagent@6.1.0: Please upgrade to v7.0.2+ of superagent.  We have fixed numerous issues with streams, form-data, attach(), filesystem errors not bubbling up (ENOENT on attach()), and all tests are now passing.  See the releases tab for more information at <https://github.com/visionmedia/superagent/releases>.\n\u001b[0m\u001b[91mnpm WARN deprecated uuid@3.3.2: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.\n\u001b[0m\u001b[91mnpm WARN deprecated subscriptions-transport-ws@0.9.19: The `subscriptions-transport-ws` package is no longer maintained. We recommend you use `graphql-ws` instead. For help migrating Apollo software to `graphql-ws`, see https://www.apollographql.com/docs/apollo-server/data/subscriptions/#switching-from-subscriptions-transport-ws    For general help using `graphql-ws`, see https://github.com/enisdenjo/graphql-ws/blob/master/README.md\n\u001b[0m\nadded 852 packages, and audited 853 packages in 20s\n\n79 packages are looking for funding\n  run `npm fund` for details\n\n32 vulnerabilities (8 moderate, 22 high, 2 critical)\n\nTo address issues that do not require attention, run:\n  npm audit fix\n\nTo address all issues possible (including breaking changes), run:\n  npm audit fix --force\n\nSome issues need review, and may require choosing\na different dependency.\n\nRun `npm audit` for details.\nRemoving intermediate container 81f12e6ba33d\n ---> 93380d5a3d37\nStep 13/19 : COPY --from=icr.io/instana/aws-fargate-nodejs:latest /instana /instana\n ---> bb9762f5aeb4\nStep 14/19 : RUN /instana/setup.sh\n ---> Running in 23ae4aa168ca\n\u001b[91mnpm\u001b[0m\u001b[91m ERR! code 1\n\u001b[0m\u001b[91mnpm ERR!\u001b[0m\u001b[91m path /instana/node_modules/gcstats.js\n\u001b[0m\u001b[91mnpm ERR! command failed\n\u001b[0m\u001b[91mnpm ERR! command\u001b[0m\u001b[91m sh -c node-gyp rebuild\n\u001b[0m\u001b[91mnpm\u001b[0m\u001b[91m ERR!\u001b[0m\u001b[91m gyp info it worked if it ends with ok\nnpm \u001b[0m\u001b[91mERR!\u001b[0m\u001b[91m gyp info using node-gyp@8.4.1\n\u001b[0m\u001b[91mnpm ERR!\u001b[0m\u001b[91m gyp info using node@16.14.0 | linux | x64\nnpm ERR!\u001b[0m\u001b[91m gyp ERR! find Python \nnpm ERR!\u001b[0m\u001b[91m gyp ERR! find Python Python is not set from command line or npm configuration\nnpm\u001b[0m\u001b[91m ERR!\u001b[0m\u001b[91m gyp ERR! find Python Python is not set from environment variable PYTHON\nnpm ERR!\u001b[0m\u001b[91m gyp ERR! find Python checking if \"python3\" can be used\n\u001b[0m\u001b[91mnpm\u001b[0m\u001b[91m ERR!\u001b[0m\u001b[91m gyp ERR! find Python - \"python3\" is not in PATH or produced an error\n\u001b[0m\u001b[91mnpm\u001b[0m\u001b[91m ERR!\u001b[0m\u001b[91m gyp ERR! find Python checking if \"python\" can be used\nnpm ERR! gyp ERR! find Python - \"python\" is not in PATH or produced an error\nnpm\u001b[0m\u001b[91m ERR! gyp ERR! find Python \nnpm\u001b[0m\u001b[91m ERR!\u001b[0m\u001b[91m gyp ERR! find Python **********************************************************\nnpm\u001b[0m\u001b[91m ERR!\u001b[0m\u001b[91m gyp ERR! find Python You need to install the latest version of Python.\nnpm ERR!\u001b[0m\u001b[91m gyp ERR! find Python Node-gyp should be able to find and use Python. If not,\nnpm ERR!\u001b[0m\u001b[91m gyp ERR! find Python you can try one of the following options:\nnpm\u001b[0m\u001b[91m ERR!\u001b[0m\u001b[91m gyp ERR! find Python - Use the switch --python=\"/path/to/pythonexecutable\"\nnpm \u001b[0m\u001b[91mERR!\u001b[0m\u001b[91m gyp ERR! find Python   (accepted by both node-gyp and npm)\nnpm \u001b[0m\u001b[91mERR!\u001b[0m\u001b[91m gyp ERR! find Python - Set the environment variable PYTHON\n\u001b[0m\u001b[91mnpm ERR! gyp ERR! find Python - Set the npm configuration variable python:\nnpm ERR!\u001b[0m\u001b[91m gyp ERR! find Python   npm config set python \"/path/to/pythonexecutable\"\nnpm ERR! gyp ERR! find Python For more information consult the documentation at:\nnpm ERR!\u001b[0m\u001b[91m gyp ERR! find Python https://github.com/nodejs/node-gyp#installation\n\u001b[0m\u001b[91mnpm\u001b[0m\u001b[91m \u001b[0m\u001b[91mERR!\u001b[0m\u001b[91m gyp ERR! find Python **********************************************************\nnpm ERR!\u001b[0m\u001b[91m gyp ERR! find Python \nnpm ERR!\u001b[0m\u001b[91m gyp ERR! configure error \nnpm\u001b[0m\u001b[91m \u001b[0m\u001b[91mERR!\u001b[0m\u001b[91m gyp ERR! stack Error: Could not find any Python installation to use\nnpm\u001b[0m\u001b[91m \u001b[0m\u001b[91mERR!\u001b[0m\u001b[91m gyp ERR! stack     at PythonFinder.fail (/usr/local/lib/node_modules/npm/node_modules/node-gyp/lib/find-python.js:330:47)\nnpm\u001b[0m\u001b[91m ERR!\u001b[0m\u001b[91m gyp ERR! stack     at PythonFinder.runChecks (/usr/local/lib/node_modules/npm/node_modules/node-gyp/lib/find-python.js:159:21)\nnpm ERR!\u001b[0m\u001b[91m gyp ERR! stack     at PythonFinder.<anonymous> (/usr/local/lib/node_modules/npm/node_modules/node-gyp/lib/find-python.js:202:16)\nnpm \u001b[0m\u001b[91mERR!\u001b[0m\u001b[91m gyp ERR! stack     at PythonFinder.execFileCallback (/usr/local/lib/node_modules/npm/node_modules/node-gyp/lib/find-python.js:294:16)\nnpm \u001b[0m\u001b[91mERR! gyp ERR! stack     at exithandler (node:child_process:406:5)\nnpm\u001b[0m\u001b[91m ERR! gyp ERR! stack     at ChildProcess.errorhandler (node:child_process:418:5)\n\u001b[0m\u001b[91mnpm ERR!\u001b[0m\u001b[91m gyp ERR! stack     at ChildProcess.emit (node:events:520:28)\nnpm \u001b[0m\u001b[91mERR! gyp ERR! stack     at Process.ChildProcess._handle.onexit (node:internal/child_process:289:12)\n\u001b[0m\u001b[91mnpm \u001b[0m\u001b[91mERR! gyp ERR! stack     at onErrorNT (node:internal/child_process:478:16)\n\u001b[0m\u001b[91mnpm ERR!\u001b[0m\u001b[91m gyp ERR! stack     at processTicksAndRejections (node:internal/process/task_queues:83:21)\nnpm ERR!\u001b[0m\u001b[91m gyp ERR! System Linux 5.4.0-113-generic\nnpm \u001b[0m\u001b[91mERR! gyp ERR! command \"/usr/local/bin/node\" \"/usr/local/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js\" \"rebuild\"\nnpm ERR!\u001b[0m\u001b[91m gyp ERR! cwd /instana/node_modules/gcstats.js\nnpm ERR!\u001b[0m\u001b[91m gyp ERR! node -v v16.14.0\nnpm ERR!\u001b[0m\u001b[91m gyp ERR! node-gyp -v v8.4.1\nnpm ERR!\u001b[0m\u001b[91m gyp ERR! not ok\n\u001b[0m\u001b[91m\n\u001b[0m\u001b[91mnpm ERR! A complete log of this run can be found in:\nnpm ERR!     /root/.npm/_logs/2022-12-27T06_12_53_174Z-debug-0.log\n\u001b[0mWarning: Rebuilding native add-ons for @instana/fargate failed. Monitoring the Fargate tasks will work nonetheless, but you will miss some Node.js metrics (GC metrics, event loop metrics, ...). See https://www.ibm.com/docs/de/obi/current?topic=agents-monitoring-aws-fargate#build-dependencies-and-native-add-ons for details.\nRemoving intermediate container 23ae4aa168ca\n ---> 72db2a453856\nStep 15/19 : ENV NODE_OPTIONS=\"--require /instana/node_modules/@instana/aws-fargate\"\n ---> Running in ac56dffb38c5\nRemoving intermediate container ac56dffb38c5\n ---> f7119b4b3ea6\nStep 16/19 : COPY --from=builder /app/pm2.config.js ./pm2.config.js\n ---> b46ce771133e\nStep 17/19 : COPY --from=builder /app/dist ./dist\n ---> 3dcb9ed15829\nStep 18/19 : EXPOSE 3000\n ---> Running in fcf2a098cece\nRemoving intermediate container fcf2a098cece\n ---> 043eabb6186f\nStep 19/19 : CMD [ \"pm2-runtime\", \"--json\", \"pm2.config.js\" ]\n ---> Running in ac065acb9426\nRemoving intermediate container ac065acb9426\n ---> 6378ebeac80d\nSuccessfully built 6378ebeac80d\nSuccessfully tagged whispr:latest\n","stderr":"","imageSize":493622478},"repair":{"violations":[{"name":"npmCacheCleanAfterInstall","position":{"start":26,"end":26,"columnStart":4,"columnEnd":22}}],"repairedDockerfile":"ARG NODE_VERSION=16.14.0\n\n########################\n# Builder stage\n#\nFROM node:${NODE_VERSION}-alpine AS builder\nWORKDIR /app\n\n# App build dependencies\n# This step is done before copying and building the app source code\n#  to benefit from Docker layer caching if the dependencies have not changed\n# A wildcard is used to ensure both package.json AND package-lock.json are copied\nCOPY package*.json ./\nRUN npm ci --quiet\n\n# Copy source code and build\nCOPY ./ ./\nRUN npm run build\n\n########################\n# Final image\n#\nFROM node:${NODE_VERSION}-alpine\nWORKDIR /app\n\n# Runtime dependencies\nRUN npm install -g pm2\n\n# App runtime dependencies\n# A wildcard is used to ensure both package.json AND package-lock.json are copied\nCOPY package*.json ./\nRUN npm ci --quiet --only=production\n\n# Add the Instana APM layer\nCOPY --from=icr.io/instana/aws-fargate-nodejs:latest /instana /instana\nRUN /instana/setup.sh\nENV NODE_OPTIONS=\"--require /instana/node_modules/@instana/aws-fargate\"\n\n# Build artifacts\nCOPY --from=builder /app/pm2.config.js ./pm2.config.js\nCOPY --from=builder /app/dist ./dist\n\nEXPOSE 3000\nCMD [ \"pm2-runtime\", \"--json\", \"pm2.config.js\" ]\n"},"repairedBuild":{"startTimestamp":1672121581075,"endTimestamp":1672121823066,"error":null,"stdout":"Sending build context to Docker daemon  3.662MB\r\r\nStep 1/19 : ARG NODE_VERSION=16.14.0\nStep 2/19 : FROM node:${NODE_VERSION}-alpine AS builder\n ---> beac28f7728d\nStep 3/19 : WORKDIR /app\n ---> Running in 7554c31eef29\nRemoving intermediate container 7554c31eef29\n ---> c9fdd4265c9c\nStep 4/19 : COPY package*.json ./\n ---> 45f7b87203c1\nStep 5/19 : RUN npm ci --quiet\n ---> Running in a845e4a8a64f\n\u001b[91mnpm WARN deprecated querystring@0.2.0: The querystring API is considered Legacy. new code should use the URLSearchParams API instead.\n\u001b[0m\u001b[91mnpm WARN deprecated fastify-warning@0.2.0: This module renamed to process-warning\n\u001b[0m\u001b[91mnpm WARN deprecated har-validator@5.1.5: this library is no longer supported\n\u001b[0m\u001b[91mnpm WARN deprecated formidable@1.2.6: Please upgrade to latest, formidable@v2 or formidable@v3! Check these notes: https://bit.ly/2ZEqIau\n\u001b[0m\u001b[91mnpm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142\n\u001b[0m\u001b[91mnpm WARN deprecated subscriptions-transport-ws@0.11.0: The `subscriptions-transport-ws` package is no longer maintained. We recommend you use `graphql-ws` instead. For help migrating Apollo software to `graphql-ws`, see https://www.apollographql.com/docs/apollo-server/data/subscriptions/#switching-from-subscriptions-transport-ws    For general help using `graphql-ws`, see https://github.com/enisdenjo/graphql-ws/blob/master/README.md\n\u001b[0m\u001b[91mnpm WARN deprecated messageformat@2.3.0: Package renamed as '@messageformat/core', see messageformat.github.io for more details. 'messageformat' will eventually provide a polyfill for Intl.MessageFormat, once it's been defined by Unicode & ECMA.\n\u001b[0m\u001b[91mnpm WARN deprecated superagent@6.1.0: Please upgrade to v7.0.2+ of superagent.  We have fixed numerous issues with streams, form-data, attach(), filesystem errors not bubbling up (ENOENT on attach()), and all tests are now passing.  See the releases tab for more information at <https://github.com/visionmedia/superagent/releases>.\n\u001b[0m\u001b[91mnpm WARN deprecated @types/graphql@14.5.0: This is a stub types definition. graphql provides its own type definitions, so you do not need this installed.\n\u001b[0m\u001b[91mnpm WARN deprecated uuid@3.4.0: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.\n\u001b[0m\u001b[91mnpm WARN deprecated uuid@3.3.2: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.\n\u001b[0m\u001b[91mnpm WARN deprecated subscriptions-transport-ws@0.9.19: The `subscriptions-transport-ws` package is no longer maintained. We recommend you use `graphql-ws` instead. For help migrating Apollo software to `graphql-ws`, see https://www.apollographql.com/docs/apollo-server/data/subscriptions/#switching-from-subscriptions-transport-ws    For general help using `graphql-ws`, see https://github.com/enisdenjo/graphql-ws/blob/master/README.md\n\u001b[0m\nadded 1848 packages, and audited 2049 packages in 47s\n\n170 packages are looking for funding\n  run `npm fund` for details\n\n40 vulnerabilities (1 low, 9 moderate, 28 high, 2 critical)\n\nTo address issues that do not require attention, run:\n  npm audit fix\n\nTo address all issues possible (including breaking changes), run:\n  npm audit fix --force\n\nSome issues need review, and may require choosing\na different dependency.\n\nRun `npm audit` for details.\n\u001b[91mnpm notice \nnpm notice New major version of npm available! 8.3.1 -> 9.2.0\nnpm notice Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm notice Run `npm install -g npm@9.2.0` to update!\n\u001b[0m\u001b[91mnpm notice \n\u001b[0mRemoving intermediate container a845e4a8a64f\n ---> 608e64c4852e\nStep 6/19 : COPY ./ ./\n ---> 4a64d6ad887f\nStep 7/19 : RUN npm run build\n ---> Running in ca457bd7bced\n\n> @sanofi-iadc/whispr@4.10.0 build\n> rimraf dist && tsc -p tsconfig.build.json\n\nRemoving intermediate container ca457bd7bced\n ---> 03d78036369d\nStep 8/19 : FROM node:${NODE_VERSION}-alpine\n ---> beac28f7728d\nStep 9/19 : WORKDIR /app\n ---> Running in 671189f2bfb5\nRemoving intermediate container 671189f2bfb5\n ---> 255fbebe7fd1\nStep 10/19 : RUN npm install -g pm2\n ---> Running in 886e83b34a90\n\u001b[91mnpm\u001b[0m\u001b[91m WARN deprecated\u001b[0m\u001b[91m uuid@3.4.0: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.\n\u001b[0m\nadded 184 packages, and audited 185 packages in 14s\n\n12 packages are looking for funding\n  run `npm fund` for details\n\nfound 0 vulnerabilities\n\u001b[91mnpm notice\u001b[0m\u001b[91m \nnpm notice\u001b[0m\u001b[91m New major version of npm available! 8.3.1 -> 9.2.0\nnpm \u001b[0m\u001b[91mnotice Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm notice\u001b[0m\u001b[91m Run `npm install -g npm@9.2.0` to update!\nnpm notice \n\u001b[0mRemoving intermediate container 886e83b34a90\n ---> a1451daf5b50\nStep 11/19 : COPY package*.json ./\n ---> a063659589b5\nStep 12/19 : RUN npm ci --quiet --only=production\n ---> Running in 6e4d283a099a\n\u001b[91mnpm WARN deprecated\u001b[0m\u001b[91m uuid@3.4.0: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.\n\u001b[0m\u001b[91mnpm WARN deprecated querystring@0.2.0: The querystring API is considered Legacy. new code should use the URLSearchParams API instead.\n\u001b[0m\u001b[91mnpm WARN deprecated har-validator@5.1.5: this library is no longer supported\n\u001b[0m\u001b[91mnpm WARN deprecated formidable@1.2.6: Please upgrade to latest, formidable@v2 or formidable@v3! Check these notes: https://bit.ly/2ZEqIau\n\u001b[0m\u001b[91mnpm WARN deprecated fastify-warning@0.2.0: This module renamed to process-warning\n\u001b[0m\u001b[91mnpm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142\n\u001b[0m\u001b[91mnpm WARN deprecated @types/graphql@14.5.0: This is a stub types definition. graphql provides its own type definitions, so you do not need this installed.\n\u001b[0m\u001b[91mnpm WARN deprecated subscriptions-transport-ws@0.11.0: The `subscriptions-transport-ws` package is no longer maintained. We recommend you use `graphql-ws` instead. For help migrating Apollo software to `graphql-ws`, see https://www.apollographql.com/docs/apollo-server/data/subscriptions/#switching-from-subscriptions-transport-ws    For general help using `graphql-ws`, see https://github.com/enisdenjo/graphql-ws/blob/master/README.md\n\u001b[0m\u001b[91mnpm WARN deprecated superagent@6.1.0: Please upgrade to v7.0.2+ of superagent.  We have fixed numerous issues with streams, form-data, attach(), filesystem errors not bubbling up (ENOENT on attach()), and all tests are now passing.  See the releases tab for more information at <https://github.com/visionmedia/superagent/releases>.\n\u001b[0m\u001b[91mnpm WARN deprecated uuid@3.3.2: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.\n\u001b[0m\u001b[91mnpm WARN deprecated subscriptions-transport-ws@0.9.19: The `subscriptions-transport-ws` package is no longer maintained. We recommend you use `graphql-ws` instead. For help migrating Apollo software to `graphql-ws`, see https://www.apollographql.com/docs/apollo-server/data/subscriptions/#switching-from-subscriptions-transport-ws    For general help using `graphql-ws`, see https://github.com/enisdenjo/graphql-ws/blob/master/README.md\n\u001b[0m\nadded 852 packages, and audited 853 packages in 19s\n\n79 packages are looking for funding\n  run `npm fund` for details\n\n32 vulnerabilities (8 moderate, 22 high, 2 critical)\n\nTo address issues that do not require attention, run:\n  npm audit fix\n\nTo address all issues possible (including breaking changes), run:\n  npm audit fix --force\n\nSome issues need review, and may require choosing\na different dependency.\n\nRun `npm audit` for details.\nRemoving intermediate container 6e4d283a099a\n ---> 4a4e80b87673\nStep 13/19 : COPY --from=icr.io/instana/aws-fargate-nodejs:latest /instana /instana\n ---> eb0e2e380d4e\nStep 14/19 : RUN /instana/setup.sh\n ---> Running in ef8699a1c52d\n\u001b[91mnpm\u001b[0m\u001b[91m ERR! code 1\n\u001b[0m\u001b[91mnpm ERR!\u001b[0m\u001b[91m path /instana/node_modules/event-loop-stats\n\u001b[0m\u001b[91mnpm ERR!\u001b[0m\u001b[91m command failed\n\u001b[0m\u001b[91mnpm ERR! command\u001b[0m\u001b[91m sh -c node-gyp rebuild\n\u001b[0m\u001b[91mnpm\u001b[0m\u001b[91m ERR! gyp info it worked if it ends with ok\nnpm ERR!\u001b[0m\u001b[91m gyp info using node-gyp@8.4.1\nnpm ERR!\u001b[0m\u001b[91m gyp info using node@16.14.0 | linux | x64\nnpm ERR! gyp ERR! find Python \n\u001b[0m\u001b[91mnpm ERR! gyp ERR! find Python Python is not set from command line or npm configuration\n\u001b[0m\u001b[91mnpm \u001b[0m\u001b[91mERR!\u001b[0m\u001b[91m gyp ERR! find Python Python is not set from environment variable PYTHON\nnpm ERR! gyp ERR! find Python checking if \"python3\" can be used\n\u001b[0m\u001b[91mnpm \u001b[0m\u001b[91mERR! gyp ERR! find Python - \"python3\" is not in PATH or produced an error\nnpm ERR! gyp ERR! find Python checking if \"python\" can be used\nnpm\u001b[0m\u001b[91m \u001b[0m\u001b[91mERR!\u001b[0m\u001b[91m gyp ERR! find Python - \"python\" is not in PATH or produced an error\n\u001b[0m\u001b[91mnpm \u001b[0m\u001b[91mERR!\u001b[0m\u001b[91m gyp ERR! find Python \nnpm\u001b[0m\u001b[91m ERR! gyp ERR! find Python **********************************************************\nnpm\u001b[0m\u001b[91m ERR! gyp ERR! find Python You need to install the latest version of Python.\nnpm \u001b[0m\u001b[91mERR! gyp ERR! find Python Node-gyp should be able to find and use Python. If not,\nnpm ERR! gyp ERR! find Python you can try one of the following options:\nnpm ERR!\u001b[0m\u001b[91m gyp ERR! find Python - Use the switch --python=\"/path/to/pythonexecutable\"\nnpm\u001b[0m\u001b[91m ERR!\u001b[0m\u001b[91m gyp ERR! find Python   (accepted by both node-gyp and npm)\n\u001b[0m\u001b[91mnpm ERR! gyp ERR! find Python - Set the environment variable PYTHON\nnpm \u001b[0m\u001b[91mERR! gyp ERR! find Python - Set the npm configuration variable python:\nnpm\u001b[0m\u001b[91m ERR!\u001b[0m\u001b[91m gyp ERR! find Python   npm config set python \"/path/to/pythonexecutable\"\nnpm \u001b[0m\u001b[91mERR!\u001b[0m\u001b[91m gyp ERR! find Python For more information consult the documentation at:\nnpm \u001b[0m\u001b[91mERR!\u001b[0m\u001b[91m gyp ERR! find Python https://github.com/nodejs/node-gyp#installation\nnpm ERR!\u001b[0m\u001b[91m gyp ERR! find Python **********************************************************\nnpm\u001b[0m\u001b[91m ERR! gyp ERR! find Python \nnpm \u001b[0m\u001b[91mERR!\u001b[0m\u001b[91m gyp ERR! configure error \nnpm\u001b[0m\u001b[91m ERR!\u001b[0m\u001b[91m gyp ERR! stack Error: Could not find any Python installation to use\nnpm\u001b[0m\u001b[91m ERR! gyp ERR! stack     at PythonFinder.fail (/usr/local/lib/node_modules/npm/node_modules/node-gyp/lib/find-python.js:330:47)\nnpm\u001b[0m\u001b[91m \u001b[0m\u001b[91mERR!\u001b[0m\u001b[91m gyp ERR! stack     at PythonFinder.runChecks (/usr/local/lib/node_modules/npm/node_modules/node-gyp/lib/find-python.js:159:21)\nnpm ERR!\u001b[0m\u001b[91m gyp ERR! stack     at PythonFinder.<anonymous> (/usr/local/lib/node_modules/npm/node_modules/node-gyp/lib/find-python.js:202:16)\nnpm\u001b[0m\u001b[91m \u001b[0m\u001b[91mERR!\u001b[0m\u001b[91m gyp ERR! stack     at PythonFinder.execFileCallback (/usr/local/lib/node_modules/npm/node_modules/node-gyp/lib/find-python.js:294:16)\nnpm\u001b[0m\u001b[91m ERR!\u001b[0m\u001b[91m gyp ERR! stack     at exithandler (node:child_process:406:5)\nnpm ERR!\u001b[0m\u001b[91m gyp ERR! stack     at ChildProcess.errorhandler (node:child_process:418:5)\nnpm ERR!\u001b[0m\u001b[91m gyp ERR! stack     at ChildProcess.emit (node:events:520:28)\nnpm ERR!\u001b[0m\u001b[91m gyp ERR! stack     at Process.ChildProcess._handle.onexit (node:internal/child_process:289:12)\nnpm ERR! gyp ERR! stack     at onErrorNT (node:internal/child_process:478:16)\nnpm\u001b[0m\u001b[91m ERR!\u001b[0m\u001b[91m gyp ERR! stack     at processTicksAndRejections (node:internal/process/task_queues:83:21)\nnpm \u001b[0m\u001b[91mERR! gyp ERR! System Linux 5.4.0-113-generic\nnpm\u001b[0m\u001b[91m \u001b[0m\u001b[91mERR!\u001b[0m\u001b[91m gyp ERR! command \"/usr/local/bin/node\" \"/usr/local/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js\" \"rebuild\"\nnpm ERR!\u001b[0m\u001b[91m gyp ERR! cwd /instana/node_modules/event-loop-stats\nnpm ERR!\u001b[0m\u001b[91m gyp ERR! node -v v16.14.0\nnpm \u001b[0m\u001b[91mERR!\u001b[0m\u001b[91m gyp ERR! node-gyp -v v8.4.1\nnpm\u001b[0m\u001b[91m ERR! gyp ERR! not ok\n\u001b[0m\u001b[91m\n\u001b[0m\u001b[91mnpm ERR!\u001b[0m\u001b[91m A complete log of this run can be found in:\nnpm \u001b[0m\u001b[91mERR!\u001b[0m\u001b[91m     /root/.npm/_logs/2022-12-27T06_16_53_345Z-debug-0.log\n\u001b[0mWarning: Rebuilding native add-ons for @instana/fargate failed. Monitoring the Fargate tasks will work nonetheless, but you will miss some Node.js metrics (GC metrics, event loop metrics, ...). See https://www.ibm.com/docs/de/obi/current?topic=agents-monitoring-aws-fargate#build-dependencies-and-native-add-ons for details.\nRemoving intermediate container ef8699a1c52d\n ---> dc03c1d3ace2\nStep 15/19 : ENV NODE_OPTIONS=\"--require /instana/node_modules/@instana/aws-fargate\"\n ---> Running in 4bce58869435\nRemoving intermediate container 4bce58869435\n ---> 20fc5ff3cbd5\nStep 16/19 : COPY --from=builder /app/pm2.config.js ./pm2.config.js\n ---> f81e05321233\nStep 17/19 : COPY --from=builder /app/dist ./dist\n ---> 2d9ecccbb5e0\nStep 18/19 : EXPOSE 3000\n ---> Running in 33c571031e2f\nRemoving intermediate container 33c571031e2f\n ---> c15765d98ad2\nStep 19/19 : CMD [ \"pm2-runtime\", \"--json\", \"pm2.config.js\" ]\n ---> Running in 78c1b7f4c5d5\nRemoving intermediate container 78c1b7f4c5d5\n ---> 8aaa8bab2175\nSuccessfully built 8aaa8bab2175\nSuccessfully tagged whispr:latest\n","stderr":"","imageSize":493622479},"endTime":1672121825123}