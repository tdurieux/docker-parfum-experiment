{"repository":"https://github.com/theconnman/jukebot","dockerfilePath":"Dockerfile","startTime":1672465670855,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/theconnman/jukebot'...\n","error":null,"commit":"849767eaa31f930831651e59ef6b99b26e4f94c7"},"originalBuild":{"startTimestamp":1672465671848,"endTimestamp":1672466666211,"error":null,"stdout":"Sending build context to Docker daemon  4.705MB\r\r\nStep 1/8 : FROM alpine:3.8\n3.8: Pulling from library/alpine\n486039affc0a: Already exists\nDigest: sha256:2bb501e6173d9d006e56de5bce2720eb06396803300fe1687b58a7ff32bf4c14\nStatus: Downloaded newer image for alpine:3.8\n ---> c8bccc0af957\nStep 2/8 : RUN apk add --no-cache git npm\n ---> Running in 12f053e9ca82\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.8/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.8/community/x86_64/APKINDEX.tar.gz\n(1/16) Installing ca-certificates (20191127-r2)\n(2/16) Installing nghttp2-libs (1.39.2-r0)\n(3/16) Installing libssh2 (1.9.0-r1)\n(4/16) Installing libcurl (7.61.1-r3)\n(5/16) Installing expat (2.2.8-r0)\n(6/16) Installing pcre2 (10.31-r0)\n(7/16) Installing git (2.18.4-r0)\n(8/16) Installing c-ares (1.14.0-r0)\n(9/16) Installing libcrypto1.0 (1.0.2u-r0)\n(10/16) Installing libgcc (6.4.0-r9)\n(11/16) Installing http-parser (2.8.1-r0)\n(12/16) Installing libssl1.0 (1.0.2u-r0)\n(13/16) Installing libstdc++ (6.4.0-r9)\n(14/16) Installing libuv (1.20.2-r0)\n(15/16) Installing nodejs (8.14.0-r0)\n(16/16) Installing npm (8.14.0-r0)\nExecuting busybox-1.28.4-r3.trigger\nExecuting ca-certificates-20191127-r2.trigger\nOK: 69 MiB in 29 packages\nRemoving intermediate container 12f053e9ca82\n ---> 05d90daa6581\nStep 3/8 : WORKDIR /usr/src/app\n ---> Running in 6e5cd07cb97a\nRemoving intermediate container 6e5cd07cb97a\n ---> 464960e569bf\nStep 4/8 : COPY package.json /usr/src/app\n ---> 023e7917cfc4\nStep 5/8 : RUN npm install\n ---> Running in 967c2f341211\n\u001b[91mnpm WARN\u001b[0m\u001b[91m deprecated log4js@1.1.1: 1.x is no longer supported. Please upgrade to 6.x or higher.\n\u001b[0m\u001b[91mnpm WARN deprecated chokidar@2.1.8: Chokidar 2 does not receive security updates since 2019. Upgrade to chokidar 3 with 15x fewer dependencies\n\u001b[0m\u001b[91mnpm WARN deprecated coffee-script@1.10.0: CoffeeScript on NPM has moved to \"coffeescript\" (no hyphen)\n\u001b[0m\u001b[91mnpm WARN deprecated fsevents@1.2.13: fsevents 1 will break on node v14+ and could be using insecure binaries. Upgrade to fsevents 2.\n\u001b[0m\u001b[91mnpm WARN deprecated streamroller@0.4.1: 0.x is no longer supported. Please upgrade to 3.x or higher.\n\u001b[0m\u001b[91mnpm WARN deprecated ejs@2.3.4: Critical security bugs fixed in 2.5.5\n\u001b[0m\u001b[91mnpm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142\n\u001b[0m\u001b[91mnpm WARN deprecated minimatch@2.0.10: Please update to minimatch 3.0.2 or higher to avoid a RegExp DoS issue\n\u001b[0m\u001b[91mnpm WARN deprecated date-format@0.0.0: 0.x is no longer supported. Please upgrade to 4.x or higher.\n\u001b[0m\u001b[91mnpm WARN deprecated ejs@0.8.8: Critical security bugs fixed in 2.5.5\n\u001b[0m\u001b[91mnpm WARN deprecated request@2.72.0: request has been deprecated, see https://github.com/request/request/issues/3142\n\u001b[0m\u001b[91mnpm WARN deprecated geojsonhint@1.2.1: This module is now under the @mapbox namespace: install @mapbox/geojsonhint instead\n\u001b[0m\u001b[91mnpm WARN deprecated uuid@3.0.1: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.\n\u001b[0m\u001b[91mnpm WARN deprecated har-validator@5.1.5: this library is no longer supported\n\u001b[0m\u001b[91mnpm WARN deprecated uuid@3.4.0: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.\n\u001b[0m\u001b[91mnpm WARN deprecated mkdirp@0.5.1: Legacy versions of mkdirp are no longer supported. Please update to mkdirp 1.x. (Note that the API surface has changed to use Promises in 1.x.)\n\u001b[0m\u001b[91mnpm WARN deprecated source-map-resolve@0.5.3: See https://github.com/lydell/source-map-resolve#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated har-validator@2.0.6: this library is no longer supported\n\u001b[0m\u001b[91mnpm WARN deprecated native-or-bluebird@1.1.2: 'native-or-bluebird' is deprecated. Please use 'any-promise' instead.\n\u001b[0m\u001b[91mnpm WARN deprecated tough-cookie@2.2.2: ReDoS vulnerability parsing Set-Cookie https://nodesecurity.io/advisories/130\n\u001b[0m\u001b[91mnpm WARN deprecated request@2.74.0: request has been deprecated, see https://github.com/request/request/issues/3142\n\u001b[0m\u001b[91mnpm WARN deprecated ini@1.1.0: Please update to ini >=1.3.6 to avoid a prototype pollution issue\n\u001b[0m\u001b[91mnpm WARN deprecated mkdirp@0.3.5: Legacy versions of mkdirp are no longer supported. Please update to mkdirp 1.x. (Note that the API surface has changed to use Promises in 1.x.)\n\u001b[0m\u001b[91mnpm WARN deprecated querystring@0.2.0: The querystring API is considered Legacy. new code should use the URLSearchParams API instead.\n\u001b[0m\u001b[91mnpm WARN deprecated hawk@3.1.3: This module moved to @hapi/hawk. Please make sure to switch over as this distribution is no longer supported and may contain bugs and critical security issues.\n\u001b[0m\u001b[91mnpm WARN deprecated node-uuid@1.4.8: Use uuid module instead\n\u001b[0m\u001b[91mnpm WARN deprecated cross-spawn-async@2.2.5: cross-spawn no longer requires a build toolchain, use it instead\n\u001b[0m\u001b[91mnpm WARN deprecated source-map-url@0.4.1: See https://github.com/lydell/source-map-url#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated resolve-url@0.2.1: https://github.com/lydell/resolve-url#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated urix@0.1.0: Please see https://github.com/lydell/urix#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated nomnom@1.8.1: Package no longer supported. Contact support@npmjs.com for more info.\n\u001b[0m\u001b[91mnpm WARN deprecated hoek@2.16.3: This version has been deprecated in accordance with the hapi support policy (hapi.im/support). Please upgrade to the latest version to get the best features, bug fixes, and security patches. If you are unable to upgrade at this time, paid support is available for older versions (hapi.im/commercial).\n\u001b[0m\u001b[91mnpm WARN deprecated boom@2.10.1: This version has been deprecated in accordance with the hapi support policy (hapi.im/support). Please upgrade to the latest version to get the best features, bug fixes, and security patches. If you are unable to upgrade at this time, paid support is available for older versions (hapi.im/commercial).\n\u001b[0m\u001b[91mnpm WARN deprecated cryptiles@2.0.5: This version has been deprecated in accordance with the hapi support policy (hapi.im/support). Please upgrade to the latest version to get the best features, bug fixes, and security patches. If you are unable to upgrade at this time, paid support is available for older versions (hapi.im/commercial).\n\u001b[0m\u001b[91mnpm WARN deprecated sntp@1.0.9: This module moved to @hapi/sntp. Please make sure to switch over as this distribution is no longer supported and may contain bugs and critical security issues.\n\u001b[0m\u001b[91mnpm WARN deprecated @mapbox/geojsonhint@2.0.1: Please make plans to check GeoJSON in some other way\n\u001b[0m\u001b[91mnpm WARN deprecated json3@3.3.2: Please use the native JSON object instead of JSON 3\n\u001b[0m\n> typechecker@2.0.8 preinstall /usr/src/app/node_modules/extract-opts/node_modules/typechecker\n> node ./cyclic.js\n\n\n> typechecker@2.0.8 preinstall /usr/src/app/node_modules/extendr/node_modules/typechecker\n> node ./cyclic.js\n\n\n> cpu-features@0.0.2 install /usr/src/app/node_modules/cpu-features\n> node-gyp rebuild\n\n\u001b[91mgyp\u001b[0m\u001b[91m \u001b[0m\u001b[91mERR! configure error \n\u001b[0m\u001b[91mgyp ERR! \u001b[0m\u001b[91mstack Error: Can't find Python executable \"python\", you can set the PYTHON env variable.\ngyp\u001b[0m\u001b[91m \u001b[0m\u001b[91mERR! \u001b[0m\u001b[91mstack     at PythonFinder.failNoPython (/usr/lib/node_modules/npm/node_modules/node-gyp/lib/configure.js:484:19)\ngyp \u001b[0m\u001b[91mERR! \u001b[0m\u001b[91mstack     at PythonFinder.<anonymous> (/usr/lib/node_modules/npm/node_modules/node-gyp/lib/configure.js:406:16)\n\u001b[0m\u001b[91mgyp\u001b[0m\u001b[91m ERR!\u001b[0m\u001b[91m stack     at F (/usr/lib/node_modules/npm/node_modules/which/which.js:68:16)\n\u001b[0m\u001b[91mgyp\u001b[0m\u001b[91m ERR! \u001b[0m\u001b[91mstack\u001b[0m\u001b[91m     at E (/usr/lib/node_modules/npm/node_modules/which/which.js:80:29)\ngyp ERR!\u001b[0m\u001b[91m stack     at /usr/lib/node_modules/npm/node_modules/which/which.js:89:16\n\u001b[0m\u001b[91mgyp \u001b[0m\u001b[91mERR!\u001b[0m\u001b[91m \u001b[0m\u001b[91mstack\u001b[0m\u001b[91m     at /usr/lib/node_modules/npm/node_modules/isexe/index.js:42:5\n\u001b[0m\u001b[91mgyp ERR! stack     at /usr/lib/node_modules/npm/node_modules/isexe/mode.js:8:5\ngyp\u001b[0m\u001b[91m \u001b[0m\u001b[91mERR! stack\u001b[0m\u001b[91m     at FSReqWrap.oncomplete (fs.js:152:21)\n\u001b[0m\u001b[91mgyp ERR! System\u001b[0m\u001b[91m Linux 5.4.0-113-generic\n\u001b[0m\u001b[91mgyp ERR! command\u001b[0m\u001b[91m \"/usr/bin/node\" \"/usr/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js\" \"rebuild\"\n\u001b[0m\u001b[91mgyp \u001b[0m\u001b[91mERR! \u001b[0m\u001b[91mcwd\u001b[0m\u001b[91m /usr/src/app/node_modules/cpu-features\n\u001b[0m\u001b[91mgyp \u001b[0m\u001b[91mERR!\u001b[0m\u001b[91m \u001b[0m\u001b[91mnode -v\u001b[0m\u001b[91m v8.14.0\ngyp\u001b[0m\u001b[91m \u001b[0m\u001b[91mERR!\u001b[0m\u001b[91m \u001b[0m\u001b[91mnode-gyp -v\u001b[0m\u001b[91m v3.8.0\ngyp \u001b[0m\u001b[91mERR! \u001b[0m\u001b[91mnot ok \n\u001b[0m\n> ssh2@1.4.0 install /usr/src/app/node_modules/ssh2\n> node install.js\n\n\u001b[91mgyp\u001b[0m\u001b[91m ERR!\u001b[0m\u001b[91m configure error\u001b[0m\u001b[91m \n\u001b[0m\u001b[91mgyp ERR!\u001b[0m\u001b[91m stack\u001b[0m\u001b[91m Error: Can't find Python executable \"python\", you can set the PYTHON env variable.\ngyp\u001b[0m\u001b[91m \u001b[0m\u001b[91mERR!\u001b[0m\u001b[91m \u001b[0m\u001b[91mstack\u001b[0m\u001b[91m     at PythonFinder.failNoPython (/usr/lib/node_modules/npm/node_modules/node-gyp/lib/configure.js:484:19)\ngyp ERR!\u001b[0m\u001b[91m stack     at PythonFinder.<anonymous> (/usr/lib/node_modules/npm/node_modules/node-gyp/lib/configure.js:406:16)\ngyp ERR!\u001b[0m\u001b[91m stack\u001b[0m\u001b[91m     at F (/usr/lib/node_modules/npm/node_modules/which/which.js:68:16)\ngyp ERR!\u001b[0m\u001b[91m stack\u001b[0m\u001b[91m     at E (/usr/lib/node_modules/npm/node_modules/which/which.js:80:29)\ngyp \u001b[0m\u001b[91mERR! \u001b[0m\u001b[91mstack\u001b[0m\u001b[91m     at /usr/lib/node_modules/npm/node_modules/which/which.js:89:16\n\u001b[0m\u001b[91mgyp\u001b[0m\u001b[91m \u001b[0m\u001b[91mERR!\u001b[0m\u001b[91m \u001b[0m\u001b[91mstack\u001b[0m\u001b[91m     at /usr/lib/node_modules/npm/node_modules/isexe/index.js:42:5\ngyp \u001b[0m\u001b[91mERR!\u001b[0m\u001b[91m stack     at /usr/lib/node_modules/npm/node_modules/isexe/mode.js:8:5\n\u001b[0m\u001b[91mgyp ERR! \u001b[0m\u001b[91mstack     at FSReqWrap.oncomplete (fs.js:152:21)\n\u001b[0m\u001b[91mgyp ERR! System\u001b[0m\u001b[91m Linux 5.4.0-113-generic\n\u001b[0m\u001b[91mgyp ERR! \u001b[0m\u001b[91mcommand \"/usr/bin/node\" \"/usr/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js\" \"--target=v8.14.0\" \"rebuild\"\n\u001b[0m\u001b[91mgyp ERR!\u001b[0m\u001b[91m cwd /usr/src/app/node_modules/ssh2/lib/protocol/crypto\ngyp ERR!\u001b[0m\u001b[91m node -v v8.14.0\n\u001b[0m\u001b[91mgyp \u001b[0m\u001b[91mERR! node-gyp -v v3.8.0\n\u001b[0m\u001b[91mgyp ERR!\u001b[0m\u001b[91m not ok \n\u001b[0mFailed to build optional crypto binding\n\n> ejs@2.7.4 postinstall /usr/src/app/node_modules/ejs\n> node ./postinstall.js\n\nThank you for installing \u001b[35mEJS\u001b[0m: built with the \u001b[32mJake\u001b[0m JavaScript build tool (\u001b[32mhttps://jakejs.com/\u001b[0m)\n\n\n> nodemon@1.19.4 postinstall /usr/src/app/node_modules/nodemon\n> node bin/postinstall || exit 0\n\n\u001b[32mLove nodemon? You can now support the project via the open collective:\u001b[22m\u001b[39m\n > \u001b[96m\u001b[1mhttps://opencollective.com/nodemon/donate\u001b[0m\n\n\u001b[91mnpm notice\u001b[0m\u001b[91m created a lockfile as package-lock.json. You should commit this file.\n\u001b[0m\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@^1.2.7 (node_modules/chokidar/node_modules/fsevents):\nnpm \u001b[0m\u001b[91mWARN notsup\u001b[0m\u001b[91m SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.2.13: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91mnpm \u001b[0m\u001b[91mWARN \u001b[0m\u001b[91moptional\u001b[0m\u001b[91m SKIPPING OPTIONAL DEPENDENCY: cpu-features@0.0.2 (node_modules/cpu-features):\n\u001b[0m\u001b[91mnpm WARN\u001b[0m\u001b[91m \u001b[0m\u001b[91moptional\u001b[0m\u001b[91m SKIPPING OPTIONAL DEPENDENCY: cpu-features@0.0.2 install: `node-gyp rebuild`\nnpm\u001b[0m\u001b[91m WARN optional\u001b[0m\u001b[91m SKIPPING OPTIONAL DEPENDENCY: Exit status 1\n\u001b[0m\u001b[91m\n\u001b[0madded 1112 packages from 531 contributors and audited 1116 packages in 960.066s\nfound 603 vulnerabilities (97 low, 173 moderate, 239 high, 94 critical)\n  run `npm audit fix` to fix them, or `npm audit` for details\nRemoving intermediate container 967c2f341211\n ---> 08a39cae3f0d\nStep 6/8 : COPY . /usr/src/app\n ---> 8ef353e9ace1\nStep 7/8 : EXPOSE 1337\n ---> Running in 790970dcbda9\nRemoving intermediate container 790970dcbda9\n ---> a2bb46daa792\nStep 8/8 : CMD if [[ -z \"${MYSQL_HOST}\" ]]; then npm start; else npm run migrate && npm start; fi\n ---> Running in b9b3a5fc14b2\nRemoving intermediate container b9b3a5fc14b2\n ---> bc5b96806468\nSuccessfully built bc5b96806468\nSuccessfully tagged jukebot:latest\n","stderr":"","imageSize":223427356},"repair":{"violations":[{"name":"npmCacheCleanAfterInstall","position":{"start":8,"end":8,"columnStart":4,"columnEnd":15}}],"repairedDockerfile":"FROM alpine:3.8\n\nRUN apk add --no-cache git npm\n\nWORKDIR /usr/src/app\n\nCOPY package.json /usr/src/app\n\nRUN npm install\n\nCOPY . /usr/src/app\n\nEXPOSE 1337\n\nCMD if [[ -z \"${MYSQL_HOST}\" ]]; then npm start; else npm run migrate && npm start; fi\n"},"repairedBuild":{"startTimestamp":1672466667800,"endTimestamp":1672467659357,"error":null,"stdout":"Sending build context to Docker daemon  4.705MB\r\r\nStep 1/8 : FROM alpine:3.8\n ---> c8bccc0af957\nStep 2/8 : RUN apk add --no-cache git npm\n ---> Running in 0612af71df1c\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.8/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.8/community/x86_64/APKINDEX.tar.gz\n(1/16) Installing ca-certificates (20191127-r2)\n(2/16) Installing nghttp2-libs (1.39.2-r0)\n(3/16) Installing libssh2 (1.9.0-r1)\n(4/16) Installing libcurl (7.61.1-r3)\n(5/16) Installing expat (2.2.8-r0)\n(6/16) Installing pcre2 (10.31-r0)\n(7/16) Installing git (2.18.4-r0)\n(8/16) Installing c-ares (1.14.0-r0)\n(9/16) Installing libcrypto1.0 (1.0.2u-r0)\n(10/16) Installing libgcc (6.4.0-r9)\n(11/16) Installing http-parser (2.8.1-r0)\n(12/16) Installing libssl1.0 (1.0.2u-r0)\n(13/16) Installing libstdc++ (6.4.0-r9)\n(14/16) Installing libuv (1.20.2-r0)\n(15/16) Installing nodejs (8.14.0-r0)\n(16/16) Installing npm (8.14.0-r0)\nExecuting busybox-1.28.4-r3.trigger\nExecuting ca-certificates-20191127-r2.trigger\nOK: 69 MiB in 29 packages\nRemoving intermediate container 0612af71df1c\n ---> ea6c3f45858c\nStep 3/8 : WORKDIR /usr/src/app\n ---> Running in ecc2b30b4d2c\nRemoving intermediate container ecc2b30b4d2c\n ---> 52970543abeb\nStep 4/8 : COPY package.json /usr/src/app\n ---> dc289762adaf\nStep 5/8 : RUN npm install\n ---> Running in b764b5642989\n\u001b[91mnpm WARN deprecated log4js@1.1.1: 1.x is no longer supported. Please upgrade to 6.x or higher.\n\u001b[0m\u001b[91mnpm WARN\u001b[0m\u001b[91m deprecated chokidar@2.1.8: Chokidar 2 does not receive security updates since 2019. Upgrade to chokidar 3 with 15x fewer dependencies\n\u001b[0m\u001b[91mnpm WARN deprecated coffee-script@1.10.0: CoffeeScript on NPM has moved to \"coffeescript\" (no hyphen)\n\u001b[0m\u001b[91mnpm WARN deprecated streamroller@0.4.1: 0.x is no longer supported. Please upgrade to 3.x or higher.\n\u001b[0m\u001b[91mnpm WARN deprecated fsevents@1.2.13: fsevents 1 will break on node v14+ and could be using insecure binaries. Upgrade to fsevents 2.\n\u001b[0m\u001b[91mnpm WARN deprecated ejs@2.3.4: Critical security bugs fixed in 2.5.5\n\u001b[0m\u001b[91mnpm WARN deprecated date-format@0.0.0: 0.x is no longer supported. Please upgrade to 4.x or higher.\n\u001b[0m\u001b[91mnpm WARN deprecated minimatch@2.0.10: Please update to minimatch 3.0.2 or higher to avoid a RegExp DoS issue\n\u001b[0m\u001b[91mnpm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142\n\u001b[0m\u001b[91mnpm WARN deprecated request@2.72.0: request has been deprecated, see https://github.com/request/request/issues/3142\n\u001b[0m\u001b[91mnpm WARN deprecated ejs@0.8.8: Critical security bugs fixed in 2.5.5\n\u001b[0m\u001b[91mnpm WARN deprecated geojsonhint@1.2.1: This module is now under the @mapbox namespace: install @mapbox/geojsonhint instead\n\u001b[0m\u001b[91mnpm WARN deprecated uuid@3.0.1: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.\n\u001b[0m\u001b[91mnpm WARN deprecated native-or-bluebird@1.1.2: 'native-or-bluebird' is deprecated. Please use 'any-promise' instead.\n\u001b[0m\u001b[91mnpm WARN deprecated source-map-resolve@0.5.3: See https://github.com/lydell/source-map-resolve#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated mkdirp@0.5.1: Legacy versions of mkdirp are no longer supported. Please update to mkdirp 1.x. (Note that the API surface has changed to use Promises in 1.x.)\n\u001b[0m\u001b[91mnpm WARN deprecated har-validator@5.1.5: this library is no longer supported\n\u001b[0m\u001b[91mnpm WARN deprecated uuid@3.4.0: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.\n\u001b[0m\u001b[91mnpm WARN deprecated har-validator@2.0.6: this library is no longer supported\n\u001b[0m\u001b[91mnpm WARN deprecated node-uuid@1.4.8: Use uuid module instead\n\u001b[0m\u001b[91mnpm WARN deprecated tough-cookie@2.2.2: ReDoS vulnerability parsing Set-Cookie https://nodesecurity.io/advisories/130\n\u001b[0m\u001b[91mnpm WARN deprecated request@2.74.0: request has been deprecated, see https://github.com/request/request/issues/3142\n\u001b[0m\u001b[91mnpm WARN deprecated querystring@0.2.0: The querystring API is considered Legacy. new code should use the URLSearchParams API instead.\n\u001b[0m\u001b[91mnpm WARN deprecated ini@1.1.0: Please update to ini >=1.3.6 to avoid a prototype pollution issue\n\u001b[0m\u001b[91mnpm WARN deprecated hawk@3.1.3: This module moved to @hapi/hawk. Please make sure to switch over as this distribution is no longer supported and may contain bugs and critical security issues.\n\u001b[0m\u001b[91mnpm WARN deprecated mkdirp@0.3.5: Legacy versions of mkdirp are no longer supported. Please update to mkdirp 1.x. (Note that the API surface has changed to use Promises in 1.x.)\n\u001b[0m\u001b[91mnpm WARN deprecated cross-spawn-async@2.2.5: cross-spawn no longer requires a build toolchain, use it instead\n\u001b[0m\u001b[91mnpm WARN deprecated resolve-url@0.2.1: https://github.com/lydell/resolve-url#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated source-map-url@0.4.1: See https://github.com/lydell/source-map-url#deprecated\n\u001b[0m\u001b[91mnpm WARN \u001b[0m\u001b[91mdeprecated urix@0.1.0: Please see https://github.com/lydell/urix#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated boom@2.10.1: This version has been deprecated in accordance with the hapi support policy (hapi.im/support). Please upgrade to the latest version to get the best features, bug fixes, and security patches. If you are unable to upgrade at this time, paid support is available for older versions (hapi.im/commercial).\n\u001b[0m\u001b[91mnpm WARN deprecated nomnom@1.8.1: Package no longer supported. Contact support@npmjs.com for more info.\n\u001b[0m\u001b[91mnpm WARN deprecated json3@3.3.2: Please use the native JSON object instead of JSON 3\n\u001b[0m\u001b[91mnpm WARN deprecated hoek@2.16.3: This version has been deprecated in accordance with the hapi support policy (hapi.im/support). Please upgrade to the latest version to get the best features, bug fixes, and security patches. If you are unable to upgrade at this time, paid support is available for older versions (hapi.im/commercial).\n\u001b[0m\u001b[91mnpm WARN deprecated sntp@1.0.9: This module moved to @hapi/sntp. Please make sure to switch over as this distribution is no longer supported and may contain bugs and critical security issues.\n\u001b[0m\u001b[91mnpm WARN deprecated cryptiles@2.0.5: This version has been deprecated in accordance with the hapi support policy (hapi.im/support). Please upgrade to the latest version to get the best features, bug fixes, and security patches. If you are unable to upgrade at this time, paid support is available for older versions (hapi.im/commercial).\n\u001b[0m\u001b[91mnpm WARN deprecated @mapbox/geojsonhint@2.0.1: Please make plans to check GeoJSON in some other way\n\u001b[0m\n> typechecker@2.0.8 preinstall /usr/src/app/node_modules/extract-opts/node_modules/typechecker\n> node ./cyclic.js\n\n\n> typechecker@2.0.8 preinstall /usr/src/app/node_modules/extendr/node_modules/typechecker\n> node ./cyclic.js\n\n\n> cpu-features@0.0.2 install /usr/src/app/node_modules/cpu-features\n> node-gyp rebuild\n\n\u001b[91mgyp\u001b[0m\u001b[91m ERR!\u001b[0m\u001b[91m configure error \n\u001b[0m\u001b[91mgyp ERR! stack Error: Can't find Python executable \"python\", you can set the PYTHON env variable.\ngyp \u001b[0m\u001b[91mERR! stack     at PythonFinder.failNoPython (/usr/lib/node_modules/npm/node_modules/node-gyp/lib/configure.js:484:19)\ngyp\u001b[0m\u001b[91m ERR! \u001b[0m\u001b[91mstack     at PythonFinder.<anonymous> (/usr/lib/node_modules/npm/node_modules/node-gyp/lib/configure.js:406:16)\n\u001b[0m\u001b[91mgyp\u001b[0m\u001b[91m ERR!\u001b[0m\u001b[91m \u001b[0m\u001b[91mstack     at F (/usr/lib/node_modules/npm/node_modules/which/which.js:68:16)\n\u001b[0m\u001b[91mgyp ERR! stack     at E (/usr/lib/node_modules/npm/node_modules/which/which.js:80:29)\ngyp\u001b[0m\u001b[91m ERR! stack     at /usr/lib/node_modules/npm/node_modules/which/which.js:89:16\n\u001b[0m\u001b[91mgyp \u001b[0m\u001b[91mERR! stack\u001b[0m\u001b[91m     at /usr/lib/node_modules/npm/node_modules/isexe/index.js:42:5\n\u001b[0m\u001b[91mgyp\u001b[0m\u001b[91m ERR! stack     at /usr/lib/node_modules/npm/node_modules/isexe/mode.js:8:5\ngyp ERR!\u001b[0m\u001b[91m stack     at FSReqWrap.oncomplete (fs.js:152:21)\n\u001b[0m\u001b[91mgyp ERR! System Linux 5.4.0-113-generic\n\u001b[0m\u001b[91mgyp ERR! command\u001b[0m\u001b[91m \"/usr/bin/node\" \"/usr/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js\" \"rebuild\"\n\u001b[0m\u001b[91mgyp \u001b[0m\u001b[91mERR! \u001b[0m\u001b[91mcwd\u001b[0m\u001b[91m /usr/src/app/node_modules/cpu-features\n\u001b[0m\u001b[91mgyp\u001b[0m\u001b[91m ERR! \u001b[0m\u001b[91mnode -v\u001b[0m\u001b[91m v8.14.0\n\u001b[0m\u001b[91mgyp \u001b[0m\u001b[91mERR!\u001b[0m\u001b[91m node-gyp -v v3.8.0\n\u001b[0m\u001b[91mgyp ERR!\u001b[0m\u001b[91m not ok \n\u001b[0m\n> ssh2@1.4.0 install /usr/src/app/node_modules/ssh2\n> node install.js\n\n\u001b[91mgyp\u001b[0m\u001b[91m ERR!\u001b[0m\u001b[91m \u001b[0m\u001b[91mconfigure error \n\u001b[0m\u001b[91mgyp ERR! stack Error: Can't find Python executable \"python\", you can set the PYTHON env variable.\ngyp ERR! stack     at PythonFinder.failNoPython (/usr/lib/node_modules/npm/node_modules/node-gyp/lib/configure.js:484:19)\ngyp ERR! stack     at PythonFinder.<anonymous> (/usr/lib/node_modules/npm/node_modules/node-gyp/lib/configure.js:406:16)\ngyp ERR!\u001b[0m\u001b[91m stack     at F (/usr/lib/node_modules/npm/node_modules/which/which.js:68:16)\ngyp ERR! stack     at E (/usr/lib/node_modules/npm/node_modules/which/which.js:80:29)\ngyp ERR! \u001b[0m\u001b[91mstack     at /usr/lib/node_modules/npm/node_modules/which/which.js:89:16\ngyp ERR! stack\u001b[0m\u001b[91m     at /usr/lib/node_modules/npm/node_modules/isexe/index.js:42:5\n\u001b[0m\u001b[91mgyp ERR!\u001b[0m\u001b[91m \u001b[0m\u001b[91mstack     at /usr/lib/node_modules/npm/node_modules/isexe/mode.js:8:5\ngyp \u001b[0m\u001b[91mERR! \u001b[0m\u001b[91mstack\u001b[0m\u001b[91m     at FSReqWrap.oncomplete (fs.js:152:21)\n\u001b[0m\u001b[91mgyp ERR! System\u001b[0m\u001b[91m Linux 5.4.0-113-generic\n\u001b[0m\u001b[91mgyp ERR! command\u001b[0m\u001b[91m \"/usr/bin/node\" \"/usr/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js\" \"--target=v8.14.0\" \"rebuild\"\n\u001b[0m\u001b[91mgyp \u001b[0m\u001b[91mERR! \u001b[0m\u001b[91mcwd /usr/src/app/node_modules/ssh2/lib/protocol/crypto\n\u001b[0m\u001b[91mgyp ERR!\u001b[0m\u001b[91m \u001b[0m\u001b[91mnode -v\u001b[0m\u001b[91m v8.14.0\ngyp \u001b[0m\u001b[91mERR!\u001b[0m\u001b[91m \u001b[0m\u001b[91mnode-gyp -v\u001b[0m\u001b[91m v3.8.0\n\u001b[0m\u001b[91mgyp ERR! \u001b[0m\u001b[91mnot ok \n\u001b[0mFailed to build optional crypto binding\n\n> ejs@2.7.4 postinstall /usr/src/app/node_modules/ejs\n> node ./postinstall.js\n\nThank you for installing \u001b[35mEJS\u001b[0m: built with the \u001b[32mJake\u001b[0m JavaScript build tool (\u001b[32mhttps://jakejs.com/\u001b[0m)\n\n\n> nodemon@1.19.4 postinstall /usr/src/app/node_modules/nodemon\n> node bin/postinstall || exit 0\n\n\u001b[32mLove nodemon? You can now support the project via the open collective:\u001b[22m\u001b[39m\n > \u001b[96m\u001b[1mhttps://opencollective.com/nodemon/donate\u001b[0m\n\n\u001b[91mnpm notice created a lockfile as package-lock.json. You should commit this file.\n\u001b[0m\u001b[91mnpm \u001b[0m\u001b[91mWARN \u001b[0m\u001b[91moptional\u001b[0m\u001b[91m SKIPPING OPTIONAL DEPENDENCY: fsevents@^1.2.7 (node_modules/chokidar/node_modules/fsevents):\n\u001b[0m\u001b[91mnpm\u001b[0m\u001b[91m WARN\u001b[0m\u001b[91m notsup\u001b[0m\u001b[91m SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.2.13: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91mnpm \u001b[0m\u001b[91mWARN\u001b[0m\u001b[91m \u001b[0m\u001b[91moptional SKIPPING OPTIONAL DEPENDENCY: cpu-features@0.0.2 (node_modules/cpu-features):\n\u001b[0m\u001b[91mnpm \u001b[0m\u001b[91mWARN \u001b[0m\u001b[91moptional\u001b[0m\u001b[91m SKIPPING OPTIONAL DEPENDENCY: cpu-features@0.0.2 install: `node-gyp rebuild`\nnpm\u001b[0m\u001b[91m \u001b[0m\u001b[91mWARN\u001b[0m\u001b[91m optional\u001b[0m\u001b[91m SKIPPING OPTIONAL DEPENDENCY: Exit status 1\n\u001b[0m\u001b[91m\n\u001b[0madded 1112 packages from 531 contributors and audited 1116 packages in 953.564s\nfound 603 vulnerabilities (97 low, 173 moderate, 239 high, 94 critical)\n  run `npm audit fix` to fix them, or `npm audit` for details\nRemoving intermediate container b764b5642989\n ---> 923afc7a7685\nStep 6/8 : COPY . /usr/src/app\n ---> a560cfe1e9c4\nStep 7/8 : EXPOSE 1337\n ---> Running in ef9970d5816a\nRemoving intermediate container ef9970d5816a\n ---> f4a9070badd1\nStep 8/8 : CMD if [[ -z \"${MYSQL_HOST}\" ]]; then npm start; else npm run migrate && npm start; fi\n ---> Running in f166aadbf78f\nRemoving intermediate container f166aadbf78f\n ---> b6809975241d\nSuccessfully built b6809975241d\nSuccessfully tagged jukebot:latest\n","stderr":"","imageSize":223441411},"endTime":1672467660247}