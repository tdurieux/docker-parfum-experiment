{"repository":"https://github.com/tiledesk/tiledesk-server","dockerfilePath":"Dockerfile","startTime":1672900219149,"endTime":1672900458103,"clone":{"startTime":1672900219149,"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/tiledesk/tiledesk-server'...\n","error":null,"endTime":1672900220309,"commit":"c9069c43f7b6cb6239d817e5f8b54453de58b3c2"},"originalBuild":{"startTime":1672900220396,"endTime":1672900383546,"error":null,"stdout":"Sending build context to Docker daemon   5.23MB\r\r\nStep 1/11 : FROM node:12\n12: Pulling from library/node\nf5196cdf2518: Pulling fs layer\n9bed1e86f01e: Pulling fs layer\nf44e4bdb3a6c: Pulling fs layer\n2f75d131f406: Pulling fs layer\n07dff4ad21eb: Pulling fs layer\ne0ac4f13b766: Pulling fs layer\ndf2c3b2eb7cc: Pulling fs layer\nefe636eac583: Pulling fs layer\nfe17849545bb: Pulling fs layer\ne0ac4f13b766: Waiting\ndf2c3b2eb7cc: Waiting\nefe636eac583: Waiting\nfe17849545bb: Waiting\n2f75d131f406: Waiting\n07dff4ad21eb: Waiting\nf44e4bdb3a6c: Verifying Checksum\nf44e4bdb3a6c: Download complete\n9bed1e86f01e: Verifying Checksum\n9bed1e86f01e: Download complete\nf5196cdf2518: Verifying Checksum\nf5196cdf2518: Download complete\ne0ac4f13b766: Verifying Checksum\ne0ac4f13b766: Download complete\n2f75d131f406: Verifying Checksum\n2f75d131f406: Download complete\nefe636eac583: Verifying Checksum\nefe636eac583: Download complete\ndf2c3b2eb7cc: Verifying Checksum\ndf2c3b2eb7cc: Download complete\nfe17849545bb: Verifying Checksum\nfe17849545bb: Download complete\nf5196cdf2518: Pull complete\n9bed1e86f01e: Pull complete\n07dff4ad21eb: Verifying Checksum\n07dff4ad21eb: Download complete\nf44e4bdb3a6c: Pull complete\n2f75d131f406: Pull complete\n07dff4ad21eb: Pull complete\ne0ac4f13b766: Pull complete\ndf2c3b2eb7cc: Pull complete\nefe636eac583: Pull complete\nfe17849545bb: Pull complete\nDigest: sha256:01627afeb110b3054ba4a1405541ca095c8bfca1cb6f2be9479c767a2711879e\nStatus: Downloaded newer image for node:12\n ---> 6c8de432fc7f\nStep 2/11 : RUN apt-get update\n ---> Running in 37e8510a919a\nIgn:1 http://deb.debian.org/debian stretch InRelease\nGet:2 http://security.debian.org/debian-security stretch/updates InRelease [59.1 kB]\nGet:3 http://deb.debian.org/debian stretch-updates InRelease [93.6 kB]\nGet:4 http://deb.debian.org/debian stretch Release [118 kB]\nGet:5 http://deb.debian.org/debian stretch Release.gpg [3177 B]\nGet:6 http://security.debian.org/debian-security stretch/updates/main amd64 Packages [782 kB]\nGet:7 http://deb.debian.org/debian stretch/main amd64 Packages [7080 kB]\nFetched 8135 kB in 1s (5298 kB/s)\nReading package lists...\nRemoving intermediate container 37e8510a919a\n ---> 5110b828bfff\nStep 3/11 : WORKDIR /usr/src/app\n ---> Running in db5367c3d6b3\nRemoving intermediate container db5367c3d6b3\n ---> a265c15d0ab7\nStep 4/11 : ARG NPM_TOKEN\n ---> Running in 96e549de49fd\nRemoving intermediate container 96e549de49fd\n ---> 532cd4812ad4\nStep 5/11 : RUN if [ \"$NPM_TOKEN\" ];     then RUN COPY .npmrc_ .npmrc     else export SOMEVAR=world;     fi\n ---> Running in 1ae0e8a0fc70\nRemoving intermediate container 1ae0e8a0fc70\n ---> 745893d7f9f2\nStep 6/11 : COPY package*.json ./\n ---> 529e6faa750c\nStep 7/11 : RUN npm install --production\n ---> Running in 51c37dc410a6\n\u001b[91mnpm\u001b[0m\u001b[91m WARN lifecycle @tiledesk/tiledesk-server@2.3.71~preinstall: cannot run in wd @tiledesk/tiledesk-server@2.3.71 if [ $ENABLE_ENTERPRISE_MODULE ]; then npm run enable-ent; fi (wd=/usr/src/app)\n\u001b[0m\n> sharp@0.27.2 install /usr/src/app/node_modules/sharp\n> (node install/libvips && node install/dll-copy && prebuild-install) || (node-gyp rebuild && node install/dll-copy)\n\n\u001b[91minfo\u001b[0m\u001b[91m sharp Downloading https://github.com/lovell/sharp-libvips/releases/download/v8.10.5/libvips-8.10.5-linux-x64.tar.br\n\u001b[0m\n> core-js@3.6.5 postinstall /usr/src/app/node_modules/core-js\n> node -e \"try{require('./postinstall')}catch(e){}\"\n\n\u001b[96mThank you for using core-js (\u001b[94m https://github.com/zloirock/core-js \u001b[96m) for polyfilling JavaScript standard library!\u001b[0m\n\n\u001b[96mThe project needs your help! Please consider supporting of core-js on Open Collective or Patreon: \u001b[0m\n\u001b[96m>\u001b[94m https://opencollective.com/core-js \u001b[0m\n\u001b[96m>\u001b[94m https://www.patreon.com/zloirock \u001b[0m\n\n\u001b[96mAlso, the author of core-js (\u001b[94m https://github.com/zloirock \u001b[96m) is looking for a good job -)\u001b[0m\n\n\n> protobufjs@7.1.1 postinstall /usr/src/app/node_modules/google-gax/node_modules/@grpc/grpc-js/node_modules/protobufjs\n> node scripts/postinstall\n\n\n> protobufjs@6.11.3 postinstall /usr/src/app/node_modules/@google-cloud/firestore/node_modules/protobufjs\n> node scripts/postinstall\n\n\n> protobufjs@6.11.3 postinstall /usr/src/app/node_modules/@grpc/proto-loader/node_modules/protobufjs\n> node scripts/postinstall\n\n\n> protobufjs@6.11.3 postinstall /usr/src/app/node_modules/dialogflow/node_modules/protobufjs\n> node scripts/postinstall\n\n\n> protobufjs@6.11.3 postinstall /usr/src/app/node_modules/google-gax/node_modules/protobufjs\n> node scripts/postinstall\n\n\n> protobufjs@6.11.3 postinstall /usr/src/app/node_modules/proto3-json-serializer/node_modules/protobufjs\n> node scripts/postinstall\n\n\n> protobufjs@7.1.1 postinstall /usr/src/app/node_modules/protobufjs\n> node scripts/postinstall\n\n\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: @tiledesk-ent/tiledesk-server-payments@1.1.6 (node_modules/@tiledesk-ent/tiledesk-server-payments):\nnpm WARN 404 SKIPPING OPTIONAL DEPENDENCY: Not Found - GET https://registry.npmjs.org/@tiledesk-ent/tiledesk-server-payments/-/tiledesk-server-payments-1.1.6.tgz\n\u001b[0m\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: @tiledesk-ent/tiledesk-server-request-history@1.1.5 (node_modules/@tiledesk-ent/tiledesk-server-request-history):\nnpm WARN\u001b[0m\u001b[91m 404 SKIPPING OPTIONAL DEPENDENCY: Not Found - GET https://registry.npmjs.org/@tiledesk-ent/tiledesk-server-request-history/-/tiledesk-server-request-history-1.1.5.tgz\n\u001b[0m\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: @tiledesk-ent/tiledesk-server-visitorcounter@1.1.1 (node_modules/@tiledesk-ent/tiledesk-server-visitorcounter):\nnpm WARN 404 SKIPPING OPTIONAL DEPENDENCY: Not Found - GET https://registry.npmjs.org/@tiledesk-ent/tiledesk-server-visitorcounter/-/tiledesk-server-visitorcounter-1.1.1.tgz\n\u001b[0m\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: @tiledesk-ent/tiledesk-server-enterprise@1.0.0 (node_modules/@tiledesk-ent/tiledesk-server-enterprise):\nnpm WARN 404 SKIPPING OPTIONAL DEPENDENCY: Not Found - GET https://registry.npmjs.org/@tiledesk-ent/tiledesk-server-enterprise/-/tiledesk-server-enterprise-1.0.0.tgz\n\u001b[0m\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: @tiledesk-ent/tiledesk-server-lm@1.1.4 (node_modules/@tiledesk-ent/tiledesk-server-lm):\n\u001b[0m\u001b[91mnpm WARN 404 SKIPPING OPTIONAL DEPENDENCY: Not Found - GET https://registry.npmjs.org/@tiledesk-ent/tiledesk-server-lm/-/tiledesk-server-lm-1.1.4.tgz\n\u001b[0m\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: @tiledesk-ent/tiledesk-server-jwthistory@1.1.9 (node_modules/@tiledesk-ent/tiledesk-server-jwthistory):\nnpm WARN 404\u001b[0m\u001b[91m SKIPPING OPTIONAL DEPENDENCY: Not Found - GET https://registry.npmjs.org/@tiledesk-ent/tiledesk-server-jwthistory/-/tiledesk-server-jwthistory-1.1.9.tgz\n\u001b[0m\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@2.3.2 (node_modules/fsevents):\n\u001b[0m\u001b[91mnpm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91m\n\u001b[0madded 1268 packages from 912 contributors and audited 1574 packages in 35.633s\n\n95 packages are looking for funding\n  run `npm fund` for details\n\nfound 113 vulnerabilities (10 low, 37 moderate, 52 high, 14 critical)\n  run `npm audit fix` to fix them, or `npm audit` for details\nRemoving intermediate container 51c37dc410a6\n ---> 7dc0d9c51ccf\nStep 8/11 : RUN rm -f .npmrc\n ---> Running in 029049bdf33c\nRemoving intermediate container 029049bdf33c\n ---> d9e7c495198d\nStep 9/11 : COPY . .\n ---> a906166cbefa\nStep 10/11 : EXPOSE 3000\n ---> Running in 355cd61c2c43\nRemoving intermediate container 355cd61c2c43\n ---> b8f7a16ea34f\nStep 11/11 : CMD [ \"npm\", \"start\" ]\n ---> Running in 3dd1012355bb\nRemoving intermediate container 3dd1012355bb\n ---> 050861536a05\nSuccessfully built 050861536a05\nSuccessfully tagged tiledesk-server:latest\n","stderr":"","imageSize":1618695183},"repair":{"startTime":1672900383608,"endTime":1672900383672,"violations":[{"name":"npmCacheCleanAfterInstall","position":{"start":20,"end":20,"columnStart":4,"columnEnd":28}}],"repairedDockerfile":"FROM node:12\n\nRUN apt-get update\n\n# Create app directory\nWORKDIR /usr/src/app\n\nARG NPM_TOKEN\n\nRUN if [ \"$NPM_TOKEN\" ]; \\\n    then RUN COPY .npmrc_ .npmrc \\\n    else export SOMEVAR=world; \\\n    fi\n\n\n# Install app dependencies\n# A wildcard is used to ensure both package.json AND package-lock.json are copied\n# where available (npm@5+)\nCOPY package*.json ./\n\nRUN npm install --production && npm cache clean --force;\n\nRUN rm -f .npmrc\n\n# Bundle app source\nCOPY . .\n\nEXPOSE 3000\n\nCMD [ \"npm\", \"start\" ]\n\n"},"repairedBuild":{"startTime":1672900385236,"endTime":1672900457149,"error":null,"stdout":"Sending build context to Docker daemon   5.23MB\r\r\nStep 1/11 : FROM node:12\n ---> 6c8de432fc7f\nStep 2/11 : RUN apt-get update\n ---> Running in 65f3a33036d5\nIgn:1 http://deb.debian.org/debian stretch InRelease\nGet:2 http://deb.debian.org/debian stretch-updates InRelease [93.6 kB]\nGet:3 http://security.debian.org/debian-security stretch/updates InRelease [59.1 kB]\nGet:4 http://deb.debian.org/debian stretch Release [118 kB]\nGet:5 http://deb.debian.org/debian stretch Release.gpg [3177 B]\nGet:6 http://security.debian.org/debian-security stretch/updates/main amd64 Packages [782 kB]\nGet:7 http://deb.debian.org/debian stretch/main amd64 Packages [7080 kB]\nFetched 8135 kB in 1s (5044 kB/s)\nReading package lists...\nRemoving intermediate container 65f3a33036d5\n ---> e84b29c4788a\nStep 3/11 : WORKDIR /usr/src/app\n ---> Running in c18f3f7645ad\nRemoving intermediate container c18f3f7645ad\n ---> 8a0e2b5311a8\nStep 4/11 : ARG NPM_TOKEN\n ---> Running in fc8e7678af83\nRemoving intermediate container fc8e7678af83\n ---> 464495519551\nStep 5/11 : RUN if [ \"$NPM_TOKEN\" ];     then RUN COPY .npmrc_ .npmrc     else export SOMEVAR=world;     fi\n ---> Running in b492bf7b73ab\nRemoving intermediate container b492bf7b73ab\n ---> a70c1e63c711\nStep 6/11 : COPY package*.json ./\n ---> c788d47f1ad9\nStep 7/11 : RUN npm install --production && npm cache clean --force;\n ---> Running in a945d18722f8\n\u001b[91mnpm\u001b[0m\u001b[91m WARN lifecycle @tiledesk/tiledesk-server@2.3.71~preinstall: cannot run in wd @tiledesk/tiledesk-server@2.3.71 if [ $ENABLE_ENTERPRISE_MODULE ]; then npm run enable-ent; fi (wd=/usr/src/app)\n\u001b[0m\n> sharp@0.27.2 install /usr/src/app/node_modules/sharp\n> (node install/libvips && node install/dll-copy && prebuild-install) || (node-gyp rebuild && node install/dll-copy)\n\n\u001b[91minfo\u001b[0m\u001b[91m sharp Downloading https://github.com/lovell/sharp-libvips/releases/download/v8.10.5/libvips-8.10.5-linux-x64.tar.br\n\u001b[0m\n> core-js@3.6.5 postinstall /usr/src/app/node_modules/core-js\n> node -e \"try{require('./postinstall')}catch(e){}\"\n\n\u001b[96mThank you for using core-js (\u001b[94m https://github.com/zloirock/core-js \u001b[96m) for polyfilling JavaScript standard library!\u001b[0m\n\n\u001b[96mThe project needs your help! Please consider supporting of core-js on Open Collective or Patreon: \u001b[0m\n\u001b[96m>\u001b[94m https://opencollective.com/core-js \u001b[0m\n\u001b[96m>\u001b[94m https://www.patreon.com/zloirock \u001b[0m\n\n\u001b[96mAlso, the author of core-js (\u001b[94m https://github.com/zloirock \u001b[96m) is looking for a good job -)\u001b[0m\n\n\n> protobufjs@7.1.1 postinstall /usr/src/app/node_modules/google-gax/node_modules/@grpc/grpc-js/node_modules/protobufjs\n> node scripts/postinstall\n\n\n> protobufjs@6.11.3 postinstall /usr/src/app/node_modules/@google-cloud/firestore/node_modules/protobufjs\n> node scripts/postinstall\n\n\n> protobufjs@6.11.3 postinstall /usr/src/app/node_modules/@grpc/proto-loader/node_modules/protobufjs\n> node scripts/postinstall\n\n\n> protobufjs@6.11.3 postinstall /usr/src/app/node_modules/dialogflow/node_modules/protobufjs\n> node scripts/postinstall\n\n\n> protobufjs@6.11.3 postinstall /usr/src/app/node_modules/google-gax/node_modules/protobufjs\n> node scripts/postinstall\n\n\n> protobufjs@6.11.3 postinstall /usr/src/app/node_modules/proto3-json-serializer/node_modules/protobufjs\n> node scripts/postinstall\n\n\n> protobufjs@7.1.1 postinstall /usr/src/app/node_modules/protobufjs\n> node scripts/postinstall\n\n\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: @tiledesk-ent/tiledesk-server-visitorcounter@1.1.1 (node_modules/@tiledesk-ent/tiledesk-server-visitorcounter):\nnpm WARN 404\u001b[0m\u001b[91m SKIPPING OPTIONAL DEPENDENCY: Not Found - GET https://registry.npmjs.org/@tiledesk-ent/tiledesk-server-visitorcounter/-/tiledesk-server-visitorcounter-1.1.1.tgz\n\u001b[0m\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: @tiledesk-ent/tiledesk-server-request-history@1.1.5 (node_modules/@tiledesk-ent/tiledesk-server-request-history):\nnpm WARN 404 SKIPPING OPTIONAL DEPENDENCY: Not Found - GET https://registry.npmjs.org/@tiledesk-ent/tiledesk-server-request-history/-/tiledesk-server-request-history-1.1.5.tgz\n\u001b[0m\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: @tiledesk-ent/tiledesk-server-enterprise@1.0.0 (node_modules/@tiledesk-ent/tiledesk-server-enterprise):\nnpm WARN 404 SKIPPING OPTIONAL DEPENDENCY: Not Found - GET https://registry.npmjs.org/@tiledesk-ent/tiledesk-server-enterprise/-/tiledesk-server-enterprise-1.0.0.tgz\n\u001b[0m\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: @tiledesk-ent/tiledesk-server-jwthistory@1.1.9 (node_modules/@tiledesk-ent/tiledesk-server-jwthistory):\nnpm WARN 404 SKIPPING OPTIONAL DEPENDENCY: Not Found - GET https://registry.npmjs.org/@tiledesk-ent/tiledesk-server-jwthistory/-/tiledesk-server-jwthistory-1.1.9.tgz\n\u001b[0m\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: @tiledesk-ent/tiledesk-server-payments@1.1.6 (node_modules/@tiledesk-ent/tiledesk-server-payments):\nnpm WARN\u001b[0m\u001b[91m 404 SKIPPING OPTIONAL DEPENDENCY: Not Found - GET https://registry.npmjs.org/@tiledesk-ent/tiledesk-server-payments/-/tiledesk-server-payments-1.1.6.tgz\n\u001b[0m\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@2.3.2 (node_modules/fsevents):\nnpm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91m\n\u001b[0madded 1268 packages from 912 contributors and audited 1574 packages in 33.155s\n\n95 packages are looking for funding\n  run `npm fund` for details\n\nfound 113 vulnerabilities (10 low, 37 moderate, 52 high, 14 critical)\n  run `npm audit fix` to fix them, or `npm audit` for details\n\u001b[91mnpm\u001b[0m\u001b[91m WARN\u001b[0m\u001b[91m using --force\u001b[0m\u001b[91m I sure hope you know what you are doing.\n\u001b[0mRemoving intermediate container a945d18722f8\n ---> 3a6da4e23301\nStep 8/11 : RUN rm -f .npmrc\n ---> Running in 84ae46e916fa\nRemoving intermediate container 84ae46e916fa\n ---> 697f2d135bba\nStep 9/11 : COPY . .\n ---> 6d95ff67abc1\nStep 10/11 : EXPOSE 3000\n ---> Running in 3a8e4e3c0eca\nRemoving intermediate container 3a8e4e3c0eca\n ---> ca10a77555c9\nStep 11/11 : CMD [ \"npm\", \"start\" ]\n ---> Running in a0028d60a58c\nRemoving intermediate container a0028d60a58c\n ---> fd66889a3e9f\nSuccessfully built fd66889a3e9f\nSuccessfully tagged tiledesk-server:latest\n","stderr":"","imageSize":1493169512}}