{"repository":"https://github.com/lynnesbian/mstdn-ebooks","dockerfilePath":"Dockerfile","startTime":1672127039390,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/lynnesbian/mstdn-ebooks'...\n","error":null,"commit":"d07d49d42e6f931b3c7b67a27cc8138619492b33"},"originalBuild":{"startTimestamp":1672127040212,"endTimestamp":1672127071775,"error":null,"stdout":"Sending build context to Docker daemon  136.2kB\r\r\nStep 1/9 : FROM python:3-alpine\n3-alpine: Pulling from library/python\nc158987b0551: Already exists\n7ec3a91b66d9: Already exists\nc89fd98887b3: Pulling fs layer\n877ccf16716c: Pulling fs layer\n3cfcd1e4ebae: Pulling fs layer\n877ccf16716c: Download complete\n3cfcd1e4ebae: Verifying Checksum\n3cfcd1e4ebae: Download complete\nc89fd98887b3: Verifying Checksum\nc89fd98887b3: Download complete\nc89fd98887b3: Pull complete\n877ccf16716c: Pull complete\n3cfcd1e4ebae: Pull complete\nDigest: sha256:af8fef83397b3886ed93d2c81bf3b4e70d39c0789c1c6feb1ecb86ca9bc42a0a\nStatus: Downloaded newer image for python:3-alpine\n ---> 18ccdc39ea28\nStep 2/9 : ADD requirements.txt /ebooks/\n ---> 5d7fd369d588\nStep 3/9 : WORKDIR /ebooks/\n ---> Running in 45d1b4267693\nRemoving intermediate container 45d1b4267693\n ---> dcaa084c7a06\nStep 4/9 : VOLUME /ebooks/data/\n ---> Running in b5dbb9fb6a22\nRemoving intermediate container b5dbb9fb6a22\n ---> beead7145873\nStep 5/9 : RUN apk add --virtual .build-deps gcc musl-dev libffi-dev openssl-dev  && pip install -r requirements.txt  && apk del --purge .build-deps  && ln -s data/config.json .  && ln -s data/toots.db .\n ---> Running in 03f5495ac8ef\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/16) Installing libgcc (12.2.1_git20220924-r4)\n(2/16) Installing libstdc++ (12.2.1_git20220924-r4)\n(3/16) Installing binutils (2.39-r2)\n(4/16) Installing libgomp (12.2.1_git20220924-r4)\n(5/16) Installing libatomic (12.2.1_git20220924-r4)\n(6/16) Installing gmp (6.2.1-r2)\n(7/16) Installing isl25 (0.25-r0)\n(8/16) Installing mpfr4 (4.1.0-r0)\n(9/16) Installing mpc1 (1.2.1-r1)\n(10/16) Installing gcc (12.2.1_git20220924-r4)\n(11/16) Installing musl-dev (1.2.3-r4)\n(12/16) Installing linux-headers (5.19.5-r0)\n(13/16) Installing pkgconf (1.9.3-r0)\n(14/16) Installing libffi-dev (3.4.4-r0)\n(15/16) Installing openssl-dev (3.0.7-r0)\n(16/16) Installing .build-deps (20221227.074409)\nExecuting busybox-1.35.0-r29.trigger\nOK: 171 MiB in 53 packages\nCollecting Mastodon.py==1.5.1\n  Downloading Mastodon.py-1.5.1-py2.py3-none-any.whl (36 kB)\nCollecting markovify==0.8.2\n  Downloading markovify-0.8.2.tar.gz (27 kB)\n  Preparing metadata (setup.py): started\n  Preparing metadata (setup.py): finished with status 'done'\nCollecting beautifulsoup4==4.9.1\n  Downloading beautifulsoup4-4.9.1-py3-none-any.whl (115 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 115.1/115.1 kB 4.0 MB/s eta 0:00:00\nCollecting requests==2.24.0\n  Downloading requests-2.24.0-py2.py3-none-any.whl (61 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 61.8/61.8 kB 1.5 MB/s eta 0:00:00\nCollecting blurhash>=1.1.4\n  Downloading blurhash-1.1.4-py2.py3-none-any.whl (5.3 kB)\nCollecting decorator>=4.0.0\n  Downloading decorator-5.1.1-py3-none-any.whl (9.1 kB)\nCollecting python-dateutil\n  Downloading python_dateutil-2.8.2-py2.py3-none-any.whl (247 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 247.7/247.7 kB 10.0 MB/s eta 0:00:00\nCollecting python-magic\n  Downloading python_magic-0.4.27-py2.py3-none-any.whl (13 kB)\nCollecting pytz\n  Downloading pytz-2022.7-py2.py3-none-any.whl (499 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 499.4/499.4 kB 25.6 MB/s eta 0:00:00\nCollecting six\n  Downloading six-1.16.0-py2.py3-none-any.whl (11 kB)\nCollecting unidecode\n  Downloading Unidecode-1.3.6-py3-none-any.whl (235 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 235.9/235.9 kB 7.5 MB/s eta 0:00:00\nCollecting soupsieve>1.2\n  Downloading soupsieve-2.3.2.post1-py3-none-any.whl (37 kB)\nCollecting chardet<4,>=3.0.2\n  Downloading chardet-3.0.4-py2.py3-none-any.whl (133 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 133.4/133.4 kB 6.9 MB/s eta 0:00:00\nCollecting idna<3,>=2.5\n  Downloading idna-2.10-py2.py3-none-any.whl (58 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 58.8/58.8 kB 3.6 MB/s eta 0:00:00\nCollecting urllib3!=1.25.0,!=1.25.1,<1.26,>=1.21.1\n  Downloading urllib3-1.25.11-py2.py3-none-any.whl (127 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 128.0/128.0 kB 7.1 MB/s eta 0:00:00\nCollecting certifi>=2017.4.17\n  Downloading certifi-2022.12.7-py3-none-any.whl (155 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 155.3/155.3 kB 11.2 MB/s eta 0:00:00\nBuilding wheels for collected packages: markovify\n  Building wheel for markovify (setup.py): started\n  Building wheel for markovify (setup.py): finished with status 'done'\n  Created wheel for markovify: filename=markovify-0.8.2-py3-none-any.whl size=18256 sha256=454b220a2198f0c423707e95e4a1046d32e6d5f6c863a08a05079b8ace448004\n  Stored in directory: /root/.cache/pip/wheels/2d/46/b2/22e4870439edcd5e7a2e2ba388124927b25c00975e36d92e6d\nSuccessfully built markovify\nInstalling collected packages: pytz, chardet, blurhash, urllib3, unidecode, soupsieve, six, python-magic, idna, decorator, certifi, requests, python-dateutil, markovify, beautifulsoup4, Mastodon.py\nSuccessfully installed Mastodon.py-1.5.1 beautifulsoup4-4.9.1 blurhash-1.1.4 certifi-2022.12.7 chardet-3.0.4 decorator-5.1.1 idna-2.10 markovify-0.8.2 python-dateutil-2.8.2 python-magic-0.4.27 pytz-2022.7 requests-2.24.0 six-1.16.0 soupsieve-2.3.2.post1 unidecode-1.3.6 urllib3-1.25.11\n\u001b[91mWARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv\n\u001b[0m(1/16) Purging .build-deps (20221227.074409)\n(2/16) Purging gcc (12.2.1_git20220924-r4)\n(3/16) Purging binutils (2.39-r2)\n(4/16) Purging libatomic (12.2.1_git20220924-r4)\n(5/16) Purging libgomp (12.2.1_git20220924-r4)\n(6/16) Purging musl-dev (1.2.3-r4)\n(7/16) Purging libffi-dev (3.4.4-r0)\n(8/16) Purging linux-headers (5.19.5-r0)\n(9/16) Purging openssl-dev (3.0.7-r0)\n(10/16) Purging libstdc++ (12.2.1_git20220924-r4)\n(11/16) Purging libgcc (12.2.1_git20220924-r4)\n(12/16) Purging isl25 (0.25-r0)\n(13/16) Purging mpc1 (1.2.1-r1)\n(14/16) Purging mpfr4 (4.1.0-r0)\n(15/16) Purging gmp (6.2.1-r2)\n(16/16) Purging pkgconf (1.9.3-r0)\nExecuting busybox-1.35.0-r29.trigger\nOK: 16 MiB in 37 packages\nRemoving intermediate container 03f5495ac8ef\n ---> 73a6361d820b\nStep 6/9 : ADD *.py /ebooks/\n ---> f82ba6fdd74a\nStep 7/9 : RUN (echo \"*/30 * * * * cd /ebooks/ && python gen.py\";      echo \"5 */2 * * * cd /ebooks/ && python main.py\";      echo \"@reboot cd /ebooks/ && python reply.py\") | crontab -\n ---> Running in 22acdc7e9223\nRemoving intermediate container 22acdc7e9223\n ---> 5e267dee3bc7\nStep 8/9 : ENV ebooks_site=https://botsin.space\n ---> Running in 8db7c0d7fb7b\nRemoving intermediate container 8db7c0d7fb7b\n ---> 1a722c652f0b\nStep 9/9 : CMD (test -f data/config.json || echo \"{\\\"site\\\":\\\"${ebooks_site}\\\"}\" > data/config.json)  && (test -f data/toots.db || (python main.py && exit))  && exec crond -f -L /dev/stdout\n ---> Running in b2828cf8a8d5\nRemoving intermediate container b2828cf8a8d5\n ---> fb8c98220820\nSuccessfully built fb8c98220820\nSuccessfully tagged mstdn-ebooks:latest\n","stderr":"","imageSize":78941771},"repair":{"violations":[{"name":"pipUseNoCacheDir","position":{"start":8,"end":8,"columnStart":4,"columnEnd":35}},{"name":"apkAddUseNoCache","position":{"start":7,"end":7,"columnStart":4,"columnEnd":69}}],"repairedDockerfile":"FROM python:3-alpine\n\nADD requirements.txt /ebooks/\n\nWORKDIR /ebooks/\nVOLUME /ebooks/data/\n\nRUN apk add --no-cache --virtual .build-deps gcc musl-dev libffi-dev openssl-dev \\\n && pip install --no-cache-dir -r requirements.txt \\\n && apk del --purge .build-deps \\\n && ln -s data/config.json . \\\n && ln -s data/toots.db .\n\nADD *.py /ebooks/\n\nRUN (echo \"*/30 * * * * cd /ebooks/ && python gen.py\"; \\\n     echo \"5 */2 * * * cd /ebooks/ && python main.py\"; \\\n     echo \"@reboot cd /ebooks/ && python reply.py\") | crontab -\n\nENV ebooks_site=https://botsin.space\n\nCMD (test -f data/config.json || echo \"{\\\"site\\\":\\\"${ebooks_site}\\\"}\" > data/config.json) \\\n && (test -f data/toots.db || (python main.py && exit)) \\\n && exec crond -f -L /dev/stdout\n"},"repairedBuild":{"startTimestamp":1672127072327,"endTimestamp":1672127098231,"error":null,"stdout":"Sending build context to Docker daemon  136.2kB\r\r\nStep 1/9 : FROM python:3-alpine\n ---> 18ccdc39ea28\nStep 2/9 : ADD requirements.txt /ebooks/\n ---> 21864343f7c4\nStep 3/9 : WORKDIR /ebooks/\n ---> Running in d09c98f11822\nRemoving intermediate container d09c98f11822\n ---> 06e748c420e2\nStep 4/9 : VOLUME /ebooks/data/\n ---> Running in ebffaf2781ef\nRemoving intermediate container ebffaf2781ef\n ---> af52643373a9\nStep 5/9 : RUN apk add --no-cache --virtual .build-deps gcc musl-dev libffi-dev openssl-dev  && pip install --no-cache-dir -r requirements.txt  && apk del --purge .build-deps  && ln -s data/config.json .  && ln -s data/toots.db .\n ---> Running in 4b3cd76360af\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/16) Installing libgcc (12.2.1_git20220924-r4)\n(2/16) Installing libstdc++ (12.2.1_git20220924-r4)\n(3/16) Installing binutils (2.39-r2)\n(4/16) Installing libgomp (12.2.1_git20220924-r4)\n(5/16) Installing libatomic (12.2.1_git20220924-r4)\n(6/16) Installing gmp (6.2.1-r2)\n(7/16) Installing isl25 (0.25-r0)\n(8/16) Installing mpfr4 (4.1.0-r0)\n(9/16) Installing mpc1 (1.2.1-r1)\n(10/16) Installing gcc (12.2.1_git20220924-r4)\n(11/16) Installing musl-dev (1.2.3-r4)\n(12/16) Installing linux-headers (5.19.5-r0)\n(13/16) Installing pkgconf (1.9.3-r0)\n(14/16) Installing libffi-dev (3.4.4-r0)\n(15/16) Installing openssl-dev (3.0.7-r0)\n(16/16) Installing .build-deps (20221227.074436)\nExecuting busybox-1.35.0-r29.trigger\nOK: 171 MiB in 53 packages\nCollecting Mastodon.py==1.5.1\n  Downloading Mastodon.py-1.5.1-py2.py3-none-any.whl (36 kB)\nCollecting markovify==0.8.2\n  Downloading markovify-0.8.2.tar.gz (27 kB)\n  Preparing metadata (setup.py): started\n  Preparing metadata (setup.py): finished with status 'done'\nCollecting beautifulsoup4==4.9.1\n  Downloading beautifulsoup4-4.9.1-py3-none-any.whl (115 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 115.1/115.1 kB 103.4 MB/s eta 0:00:00\nCollecting requests==2.24.0\n  Downloading requests-2.24.0-py2.py3-none-any.whl (61 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 61.8/61.8 kB 104.8 MB/s eta 0:00:00\nCollecting blurhash>=1.1.4\n  Downloading blurhash-1.1.4-py2.py3-none-any.whl (5.3 kB)\nCollecting decorator>=4.0.0\n  Downloading decorator-5.1.1-py3-none-any.whl (9.1 kB)\nCollecting python-dateutil\n  Downloading python_dateutil-2.8.2-py2.py3-none-any.whl (247 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 247.7/247.7 kB 321.7 MB/s eta 0:00:00\nCollecting python-magic\n  Downloading python_magic-0.4.27-py2.py3-none-any.whl (13 kB)\nCollecting pytz\n  Downloading pytz-2022.7-py2.py3-none-any.whl (499 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 499.4/499.4 kB 204.9 MB/s eta 0:00:00\nCollecting six\n  Downloading six-1.16.0-py2.py3-none-any.whl (11 kB)\nCollecting unidecode\n  Downloading Unidecode-1.3.6-py3-none-any.whl (235 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 235.9/235.9 kB 245.2 MB/s eta 0:00:00\nCollecting soupsieve>1.2\n  Downloading soupsieve-2.3.2.post1-py3-none-any.whl (37 kB)\nCollecting chardet<4,>=3.0.2\n  Downloading chardet-3.0.4-py2.py3-none-any.whl (133 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 133.4/133.4 kB 326.3 MB/s eta 0:00:00\nCollecting idna<3,>=2.5\n  Downloading idna-2.10-py2.py3-none-any.whl (58 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 58.8/58.8 kB 287.7 MB/s eta 0:00:00\nCollecting urllib3!=1.25.0,!=1.25.1,<1.26,>=1.21.1\n  Downloading urllib3-1.25.11-py2.py3-none-any.whl (127 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 128.0/128.0 kB 109.5 MB/s eta 0:00:00\nCollecting certifi>=2017.4.17\n  Downloading certifi-2022.12.7-py3-none-any.whl (155 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 155.3/155.3 kB 300.8 MB/s eta 0:00:00\nBuilding wheels for collected packages: markovify\n  Building wheel for markovify (setup.py): started\n  Building wheel for markovify (setup.py): finished with status 'done'\n  Created wheel for markovify: filename=markovify-0.8.2-py3-none-any.whl size=18256 sha256=cfdde8d1b2b7fc858578cc44ba508653673b4c700136bf022bc68c61cffb8d71\n  Stored in directory: /tmp/pip-ephem-wheel-cache-p0rud_k2/wheels/2d/46/b2/22e4870439edcd5e7a2e2ba388124927b25c00975e36d92e6d\nSuccessfully built markovify\nInstalling collected packages: pytz, chardet, blurhash, urllib3, unidecode, soupsieve, six, python-magic, idna, decorator, certifi, requests, python-dateutil, markovify, beautifulsoup4, Mastodon.py\nSuccessfully installed Mastodon.py-1.5.1 beautifulsoup4-4.9.1 blurhash-1.1.4 certifi-2022.12.7 chardet-3.0.4 decorator-5.1.1 idna-2.10 markovify-0.8.2 python-dateutil-2.8.2 python-magic-0.4.27 pytz-2022.7 requests-2.24.0 six-1.16.0 soupsieve-2.3.2.post1 unidecode-1.3.6 urllib3-1.25.11\n\u001b[91mWARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv\n\u001b[0m\u001b[91mWARNING: Ignoring https://dl-cdn.alpinelinux.org/alpine/v3.17/main: No such file or directory\nWARNING: Ignoring https://dl-cdn.alpinelinux.org/alpine/v3.17/community: No such file or directory\n\u001b[0m(1/16) Purging .build-deps (20221227.074436)\n(2/16) Purging gcc (12.2.1_git20220924-r4)\n(3/16) Purging binutils (2.39-r2)\n(4/16) Purging libatomic (12.2.1_git20220924-r4)\n(5/16) Purging libgomp (12.2.1_git20220924-r4)\n(6/16) Purging musl-dev (1.2.3-r4)\n(7/16) Purging libffi-dev (3.4.4-r0)\n(8/16) Purging linux-headers (5.19.5-r0)\n(9/16) Purging openssl-dev (3.0.7-r0)\n(10/16) Purging libstdc++ (12.2.1_git20220924-r4)\n(11/16) Purging libgcc (12.2.1_git20220924-r4)\n(12/16) Purging isl25 (0.25-r0)\n(13/16) Purging mpc1 (1.2.1-r1)\n(14/16) Purging mpfr4 (4.1.0-r0)\n(15/16) Purging gmp (6.2.1-r2)\n(16/16) Purging pkgconf (1.9.3-r0)\nExecuting busybox-1.35.0-r29.trigger\nOK: 16 MiB in 37 packages\nRemoving intermediate container 4b3cd76360af\n ---> 0a3130a84f35\nStep 6/9 : ADD *.py /ebooks/\n ---> e1325982e8e8\nStep 7/9 : RUN (echo \"*/30 * * * * cd /ebooks/ && python gen.py\";      echo \"5 */2 * * * cd /ebooks/ && python main.py\";      echo \"@reboot cd /ebooks/ && python reply.py\") | crontab -\n ---> Running in f825426b4eb0\nRemoving intermediate container f825426b4eb0\n ---> c4d30cf16fbb\nStep 8/9 : ENV ebooks_site=https://botsin.space\n ---> Running in fd3ea7d74ec5\nRemoving intermediate container fd3ea7d74ec5\n ---> ea06939d4296\nStep 9/9 : CMD (test -f data/config.json || echo \"{\\\"site\\\":\\\"${ebooks_site}\\\"}\" > data/config.json)  && (test -f data/toots.db || (python main.py && exit))  && exec crond -f -L /dev/stdout\n ---> Running in 088564e8b052\nRemoving intermediate container 088564e8b052\n ---> 3cb6134899f6\nSuccessfully built 3cb6134899f6\nSuccessfully tagged mstdn-ebooks:latest\n","stderr":"","imageSize":74346051},"endTime":1672127098691}