{"repository":"https://github.com/domino14/liwords","dockerfilePath":"Dockerfile","startTime":1672970740959,"endTime":1672970949001,"clone":{"startTime":1672970740960,"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/domino14/liwords'...\nChecking out files:  68% (494/724)   \rChecking out files:  69% (500/724)   \rChecking out files:  70% (507/724)   \rChecking out files:  71% (515/724)   \rChecking out files:  72% (522/724)   \rChecking out files:  73% (529/724)   \rChecking out files:  74% (536/724)   \rChecking out files:  75% (543/724)   \rChecking out files:  76% (551/724)   \rChecking out files:  77% (558/724)   \rChecking out files:  78% (565/724)   \rChecking out files:  79% (572/724)   \rChecking out files:  80% (580/724)   \rChecking out files:  81% (587/724)   \rChecking out files:  82% (594/724)   \rChecking out files:  83% (601/724)   \rChecking out files:  84% (609/724)   \rChecking out files:  85% (616/724)   \rChecking out files:  86% (623/724)   \rChecking out files:  87% (630/724)   \rChecking out files:  88% (638/724)   \rChecking out files:  89% (645/724)   \rChecking out files:  90% (652/724)   \rChecking out files:  91% (659/724)   \rChecking out files:  92% (667/724)   \rChecking out files:  93% (674/724)   \rChecking out files:  94% (681/724)   \rChecking out files:  95% (688/724)   \rChecking out files:  96% (696/724)   \rChecking out files:  97% (703/724)   \rChecking out files:  98% (710/724)   \rChecking out files:  99% (717/724)   \rChecking out files: 100% (724/724)   \rChecking out files: 100% (724/724), done.\n","error":null,"endTime":1672970748721,"commit":"378a52b4970689447b6f5eca78686307eb8599ae"},"originalBuild":{"startTime":1672970748807,"endTime":1672970853115,"error":null,"stdout":"Sending build context to Docker daemon  199.8MB\r\r\nStep 1/21 : FROM golang:alpine as build-env\n ---> cae57157ceaa\nStep 2/21 : RUN mkdir /opt/program\n ---> Running in 5977bf78a286\nRemoving intermediate container 5977bf78a286\n ---> 63cbd05f9c1d\nStep 3/21 : WORKDIR /opt/program\n ---> Running in 03487e8eff08\nRemoving intermediate container 03487e8eff08\n ---> ef010309cfd5\nStep 4/21 : RUN apk update\n ---> Running in 7f8d0bc45517\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\nv3.17.0-332-g13963e2526 [https://dl-cdn.alpinelinux.org/alpine/v3.17/main]\nv3.17.0-333-g9ec020d7a6 [https://dl-cdn.alpinelinux.org/alpine/v3.17/community]\nOK: 17816 distinct packages available\nRemoving intermediate container 7f8d0bc45517\n ---> d1ecbd291267\nStep 5/21 : RUN apk add build-base ca-certificates git\n ---> Running in b4c6e13815b3\n(1/26) Installing libgcc (12.2.1_git20220924-r4)\n(2/26) Installing libstdc++ (12.2.1_git20220924-r4)\n(3/26) Installing binutils (2.39-r2)\n(4/26) Installing libmagic (5.43-r0)\n(5/26) Installing file (5.43-r0)\n(6/26) Installing libgomp (12.2.1_git20220924-r4)\n(7/26) Installing libatomic (12.2.1_git20220924-r4)\n(8/26) Installing gmp (6.2.1-r2)\n(9/26) Installing isl25 (0.25-r0)\n(10/26) Installing mpfr4 (4.1.0-r0)\n(11/26) Installing mpc1 (1.2.1-r1)\n(12/26) Installing gcc (12.2.1_git20220924-r4)\n(13/26) Installing libstdc++-dev (12.2.1_git20220924-r4)\n(14/26) Installing musl-dev (1.2.3-r4)\n(15/26) Installing libc-dev (0.7.2-r3)\n(16/26) Installing g++ (12.2.1_git20220924-r4)\n(17/26) Installing make (4.3-r1)\n(18/26) Installing fortify-headers (1.1-r1)\n(19/26) Installing patch (2.7.6-r8)\n(20/26) Installing build-base (0.5-r3)\n(21/26) Installing brotli-libs (1.0.9-r9)\n(22/26) Installing nghttp2-libs (1.51.0-r0)\n(23/26) Installing libcurl (7.87.0-r0)\n(24/26) Installing libexpat (2.5.0-r0)\n(25/26) Installing pcre2 (10.42-r0)\n(26/26) Installing git (2.38.2-r0)\nExecuting busybox-1.35.0-r29.trigger\nOK: 253 MiB in 42 packages\nRemoving intermediate container b4c6e13815b3\n ---> 2811ee1e9ebb\nStep 6/21 : COPY go.mod .\n ---> 8ddb28a90b40\nStep 7/21 : COPY go.sum .\n ---> 2173a868d37f\nStep 8/21 : RUN go mod download\n ---> Running in c8863a28aa30\nRemoving intermediate container c8863a28aa30\n ---> 4ab2580c8df2\nStep 9/21 : COPY . .\n ---> 793c28781966\nStep 10/21 : WORKDIR /opt/program/cmd/liwords-api\n ---> Running in 51a7304884ad\nRemoving intermediate container 51a7304884ad\n ---> b96b9397de33\nStep 11/21 : ARG BUILD_HASH=unknown\n ---> Running in b9d00b12911f\nRemoving intermediate container b9d00b12911f\n ---> 109f20736680\nStep 12/21 : ARG BUILD_DATE=unknown\n ---> Running in 2317739b5e2b\nRemoving intermediate container 2317739b5e2b\n ---> 6cfdece5f8de\nStep 13/21 : RUN go build -ldflags  \"-X=main.BuildDate=${BUILD_DATE} -X=main.BuildHash=${BUILD_HASH}\"\n ---> Running in 668d0786b348\nRemoving intermediate container 668d0786b348\n ---> 14a3fa063460\nStep 14/21 : FROM alpine\n ---> 49176f190c7e\nStep 15/21 : COPY --from=build-env /opt/program/cmd/liwords-api/liwords-api /opt/liwords-api\n ---> 0352987379fb\nStep 16/21 : COPY --from=build-env /opt/program/db /opt/db\n ---> df88d126016c\nStep 17/21 : RUN apk --no-cache add curl\n ---> Running in 16ce866a03ef\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/5) Installing ca-certificates (20220614-r3)\n(2/5) Installing brotli-libs (1.0.9-r9)\n(3/5) Installing nghttp2-libs (1.51.0-r0)\n(4/5) Installing libcurl (7.87.0-r0)\n(5/5) Installing curl (7.87.0-r0)\nExecuting busybox-1.35.0-r29.trigger\nExecuting ca-certificates-20220614-r3.trigger\nOK: 9 MiB in 20 packages\nRemoving intermediate container 16ce866a03ef\n ---> 670fc5cff57e\nStep 18/21 : EXPOSE 8001\n ---> Running in 457bd19c514b\nRemoving intermediate container 457bd19c514b\n ---> a0160ffa142f\nStep 19/21 : WORKDIR /opt\n ---> Running in 926c8675dded\nRemoving intermediate container 926c8675dded\n ---> a104f5c958b0\nStep 20/21 : CMD [\"./liwords-api\"]\n ---> Running in f117f197c657\nRemoving intermediate container f117f197c657\n ---> 81d3df680718\nStep 21/21 : LABEL org.opencontainers.image.source https://github.com/domino14/liwords\n ---> Running in 178cc2511412\nRemoving intermediate container 178cc2511412\n ---> e9bfc4d4f59e\nSuccessfully built e9bfc4d4f59e\nSuccessfully tagged liwords:latest\n","stderr":"","imageSize":47025634},"repair":{"startTime":1672970853182,"endTime":1672970853238,"violations":[{"name":"apkAddUseNoCache","position":{"start":6,"end":6,"columnStart":4,"columnEnd":42}}],"repairedDockerfile":"FROM golang:alpine as build-env\n\nRUN mkdir /opt/program\nWORKDIR /opt/program\n\nRUN apk update\nRUN apk add --no-cache build-base ca-certificates git\n\nCOPY go.mod .\nCOPY go.sum .\nRUN go mod download\n\nCOPY . .\n\nWORKDIR /opt/program/cmd/liwords-api\n\nARG BUILD_HASH=unknown\nARG BUILD_DATE=unknown\n\nRUN go build -ldflags  \"-X=main.BuildDate=${BUILD_DATE} -X=main.BuildHash=${BUILD_HASH}\"\n\n# Build minimal image:\nFROM alpine\nCOPY --from=build-env /opt/program/cmd/liwords-api/liwords-api /opt/liwords-api\nCOPY --from=build-env /opt/program/db /opt/db\nRUN apk --no-cache add curl\nEXPOSE 8001\n\nWORKDIR /opt\nCMD [\"./liwords-api\"]\n\nLABEL org.opencontainers.image.source https://github.com/domino14/liwords"},"repairedBuild":{"startTime":1672970853518,"endTime":1672970948711,"error":null,"stdout":"Sending build context to Docker daemon  199.8MB\r\r\nStep 1/21 : FROM golang:alpine as build-env\n ---> cae57157ceaa\nStep 2/21 : RUN mkdir /opt/program\n ---> Running in 3f7adbb3d8cd\nRemoving intermediate container 3f7adbb3d8cd\n ---> 04a765689618\nStep 3/21 : WORKDIR /opt/program\n ---> Running in fb511ed781e8\nRemoving intermediate container fb511ed781e8\n ---> 201f2dbbec98\nStep 4/21 : RUN apk update\n ---> Running in 31df12f0ee04\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\nv3.17.0-332-g13963e2526 [https://dl-cdn.alpinelinux.org/alpine/v3.17/main]\nv3.17.0-333-g9ec020d7a6 [https://dl-cdn.alpinelinux.org/alpine/v3.17/community]\nOK: 17816 distinct packages available\nRemoving intermediate container 31df12f0ee04\n ---> 91c43649bf9b\nStep 5/21 : RUN apk add --no-cache build-base ca-certificates git\n ---> Running in 12b7daf867d8\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/26) Installing libgcc (12.2.1_git20220924-r4)\n(2/26) Installing libstdc++ (12.2.1_git20220924-r4)\n(3/26) Installing binutils (2.39-r2)\n(4/26) Installing libmagic (5.43-r0)\n(5/26) Installing file (5.43-r0)\n(6/26) Installing libgomp (12.2.1_git20220924-r4)\n(7/26) Installing libatomic (12.2.1_git20220924-r4)\n(8/26) Installing gmp (6.2.1-r2)\n(9/26) Installing isl25 (0.25-r0)\n(10/26) Installing mpfr4 (4.1.0-r0)\n(11/26) Installing mpc1 (1.2.1-r1)\n(12/26) Installing gcc (12.2.1_git20220924-r4)\n(13/26) Installing libstdc++-dev (12.2.1_git20220924-r4)\n(14/26) Installing musl-dev (1.2.3-r4)\n(15/26) Installing libc-dev (0.7.2-r3)\n(16/26) Installing g++ (12.2.1_git20220924-r4)\n(17/26) Installing make (4.3-r1)\n(18/26) Installing fortify-headers (1.1-r1)\n(19/26) Installing patch (2.7.6-r8)\n(20/26) Installing build-base (0.5-r3)\n(21/26) Installing brotli-libs (1.0.9-r9)\n(22/26) Installing nghttp2-libs (1.51.0-r0)\n(23/26) Installing libcurl (7.87.0-r0)\n(24/26) Installing libexpat (2.5.0-r0)\n(25/26) Installing pcre2 (10.42-r0)\n(26/26) Installing git (2.38.2-r0)\nExecuting busybox-1.35.0-r29.trigger\nOK: 253 MiB in 42 packages\nRemoving intermediate container 12b7daf867d8\n ---> 6740a228e9d0\nStep 6/21 : COPY go.mod .\n ---> cdd82654a120\nStep 7/21 : COPY go.sum .\n ---> 27c1d6e29080\nStep 8/21 : RUN go mod download\n ---> Running in c5b6968a38de\nRemoving intermediate container c5b6968a38de\n ---> 2051175d1000\nStep 9/21 : COPY . .\n ---> 0f540944f9d9\nStep 10/21 : WORKDIR /opt/program/cmd/liwords-api\n ---> Running in ee9b1e7f09a2\nRemoving intermediate container ee9b1e7f09a2\n ---> 9c8da78a24f3\nStep 11/21 : ARG BUILD_HASH=unknown\n ---> Running in 48418caa555a\nRemoving intermediate container 48418caa555a\n ---> 54b51db3253e\nStep 12/21 : ARG BUILD_DATE=unknown\n ---> Running in ef227c10f52d\nRemoving intermediate container ef227c10f52d\n ---> ca5c1b1df674\nStep 13/21 : RUN go build -ldflags  \"-X=main.BuildDate=${BUILD_DATE} -X=main.BuildHash=${BUILD_HASH}\"\n ---> Running in 28833ec9c5e3\nRemoving intermediate container 28833ec9c5e3\n ---> 8e0c3a31ea4f\nStep 14/21 : FROM alpine\n ---> 49176f190c7e\nStep 15/21 : COPY --from=build-env /opt/program/cmd/liwords-api/liwords-api /opt/liwords-api\n ---> c25d0f7856cd\nStep 16/21 : COPY --from=build-env /opt/program/db /opt/db\n ---> 8d8e390e2b63\nStep 17/21 : RUN apk --no-cache add curl\n ---> Running in 6feb68a2c749\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/5) Installing ca-certificates (20220614-r3)\n(2/5) Installing brotli-libs (1.0.9-r9)\n(3/5) Installing nghttp2-libs (1.51.0-r0)\n(4/5) Installing libcurl (7.87.0-r0)\n(5/5) Installing curl (7.87.0-r0)\nExecuting busybox-1.35.0-r29.trigger\nExecuting ca-certificates-20220614-r3.trigger\nOK: 9 MiB in 20 packages\nRemoving intermediate container 6feb68a2c749\n ---> db709b90fb2e\nStep 18/21 : EXPOSE 8001\n ---> Running in 2f1a72e06376\nRemoving intermediate container 2f1a72e06376\n ---> 95545d358ac3\nStep 19/21 : WORKDIR /opt\n ---> Running in e1cb876323cc\nRemoving intermediate container e1cb876323cc\n ---> ad8396d21cfc\nStep 20/21 : CMD [\"./liwords-api\"]\n ---> Running in aba6fb456c2c\nRemoving intermediate container aba6fb456c2c\n ---> c13dc8b5a9ec\nStep 21/21 : LABEL org.opencontainers.image.source https://github.com/domino14/liwords\n ---> Running in a6a3a7096d3d\nRemoving intermediate container a6a3a7096d3d\n ---> 67a14a44375f\nSuccessfully built 67a14a44375f\nSuccessfully tagged liwords:latest\n","stderr":"","imageSize":47025634}}