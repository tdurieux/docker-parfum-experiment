{"repository":"https://github.com/domino14/liwords-socket","dockerfilePath":"Dockerfile","startTime":1672986777115,"endTime":1672986982979,"clone":{"startTime":1672986777116,"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/domino14/liwords-socket'...\n","error":null,"endTime":1672986777955,"commit":"1b384c7d906464026086dd8c7b2dadb3f74683cd"},"originalBuild":{"startTime":1672986778049,"endTime":1672986874916,"error":null,"stdout":"Sending build context to Docker daemon  115.7kB\r\r\nStep 1/19 : FROM golang:alpine as build-env\nalpine: Pulling from library/golang\nDigest: sha256:a9b24b67dc83b3383d22a14941c2b2b2ca6a103d805cac6820fd1355943beaf1\nStatus: Downloaded newer image for golang:alpine\n ---> cae57157ceaa\nStep 2/19 : RUN mkdir /opt/program\n ---> Running in 2f9814004923\nRemoving intermediate container 2f9814004923\n ---> 553fa0ab5493\nStep 3/19 : WORKDIR /opt/program\n ---> Running in 3a0fab5c6bf2\nRemoving intermediate container 3a0fab5c6bf2\n ---> 91b0a836de2e\nStep 4/19 : RUN apk update\n ---> Running in 49011f555f38\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\nv3.17.0-332-g13963e2526 [https://dl-cdn.alpinelinux.org/alpine/v3.17/main]\nv3.17.0-335-g0aef3a6d7a [https://dl-cdn.alpinelinux.org/alpine/v3.17/community]\nOK: 17816 distinct packages available\nRemoving intermediate container 49011f555f38\n ---> d55e7a1e6f03\nStep 5/19 : RUN apk add build-base ca-certificates git\n ---> Running in be1e9898b983\n(1/26) Installing libgcc (12.2.1_git20220924-r4)\n(2/26) Installing libstdc++ (12.2.1_git20220924-r4)\n(3/26) Installing binutils (2.39-r2)\n(4/26) Installing libmagic (5.43-r0)\n(5/26) Installing file (5.43-r0)\n(6/26) Installing libgomp (12.2.1_git20220924-r4)\n(7/26) Installing libatomic (12.2.1_git20220924-r4)\n(8/26) Installing gmp (6.2.1-r2)\n(9/26) Installing isl25 (0.25-r0)\n(10/26) Installing mpfr4 (4.1.0-r0)\n(11/26) Installing mpc1 (1.2.1-r1)\n(12/26) Installing gcc (12.2.1_git20220924-r4)\n(13/26) Installing libstdc++-dev (12.2.1_git20220924-r4)\n(14/26) Installing musl-dev (1.2.3-r4)\n(15/26) Installing libc-dev (0.7.2-r3)\n(16/26) Installing g++ (12.2.1_git20220924-r4)\n(17/26) Installing make (4.3-r1)\n(18/26) Installing fortify-headers (1.1-r1)\n(19/26) Installing patch (2.7.6-r8)\n(20/26) Installing build-base (0.5-r3)\n(21/26) Installing brotli-libs (1.0.9-r9)\n(22/26) Installing nghttp2-libs (1.51.0-r0)\n(23/26) Installing libcurl (7.87.0-r0)\n(24/26) Installing libexpat (2.5.0-r0)\n(25/26) Installing pcre2 (10.42-r0)\n(26/26) Installing git (2.38.2-r0)\nExecuting busybox-1.35.0-r29.trigger\nOK: 253 MiB in 42 packages\nRemoving intermediate container be1e9898b983\n ---> 6535fccea376\nStep 6/19 : COPY go.mod .\n ---> 5660080e9f70\nStep 7/19 : COPY go.sum .\n ---> d19f410874a7\nStep 8/19 : RUN go mod download\n ---> Running in 268d7ba2d886\nRemoving intermediate container 268d7ba2d886\n ---> f65b6dc29c48\nStep 9/19 : COPY . .\n ---> f2b58d5db274\nStep 10/19 : WORKDIR /opt/program/cmd/socketsrv\n ---> Running in d1b8819af2d7\nRemoving intermediate container d1b8819af2d7\n ---> d3ce58322207\nStep 11/19 : ARG BUILD_HASH=unknown\n ---> Running in 438855ffbf8f\nRemoving intermediate container 438855ffbf8f\n ---> c53c10aab622\nStep 12/19 : ARG BUILD_DATE=unknown\n ---> Running in 183d2765a311\nRemoving intermediate container 183d2765a311\n ---> fca0acdea354\nStep 13/19 : RUN go build -ldflags  \"-X=main.BuildDate=${BUILD_DATE} -X=main.BuildHash=${BUILD_HASH}\"\n ---> Running in 7a27b6bc807b\nRemoving intermediate container 7a27b6bc807b\n ---> 20b2cf39ea50\nStep 14/19 : FROM alpine\n ---> 49176f190c7e\nStep 15/19 : COPY --from=build-env /opt/program/cmd/socketsrv/socketsrv /opt/socketsrv\n ---> 6f20b8e2216c\nStep 16/19 : RUN apk --no-cache add curl\n ---> Running in aa48c652635e\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/5) Installing ca-certificates (20220614-r3)\n(2/5) Installing brotli-libs (1.0.9-r9)\n(3/5) Installing nghttp2-libs (1.51.0-r0)\n(4/5) Installing libcurl (7.87.0-r0)\n(5/5) Installing curl (7.87.0-r0)\nExecuting busybox-1.35.0-r29.trigger\nExecuting ca-certificates-20220614-r3.trigger\nOK: 9 MiB in 20 packages\nRemoving intermediate container aa48c652635e\n ---> 0bded00614be\nStep 17/19 : EXPOSE 8087\n ---> Running in 7f270bb0bb25\nRemoving intermediate container 7f270bb0bb25\n ---> cf54b5283479\nStep 18/19 : WORKDIR /opt\n ---> Running in 6cb4a5927bb1\nRemoving intermediate container 6cb4a5927bb1\n ---> 67f24d0d0759\nStep 19/19 : CMD [\"./socketsrv\"]\n ---> Running in e1c06fe864dd\nRemoving intermediate container e1c06fe864dd\n ---> 2364162d9536\nSuccessfully built 2364162d9536\nSuccessfully tagged liwords-socket:latest\n","stderr":"","imageSize":22011822},"repair":{"startTime":1672986874981,"endTime":1672986875055,"violations":[{"name":"apkAddUseNoCache","position":{"start":6,"end":6,"columnStart":4,"columnEnd":42}}],"repairedDockerfile":"FROM golang:alpine as build-env\n\nRUN mkdir /opt/program\nWORKDIR /opt/program\n\nRUN apk update\nRUN apk add --no-cache build-base ca-certificates git\n\nCOPY go.mod .\nCOPY go.sum .\nRUN go mod download\n\nCOPY . .\n\nWORKDIR /opt/program/cmd/socketsrv\n\nARG BUILD_HASH=unknown\nARG BUILD_DATE=unknown\n\nRUN go build -ldflags  \"-X=main.BuildDate=${BUILD_DATE} -X=main.BuildHash=${BUILD_HASH}\"\n\n# Build minimal image:\nFROM alpine\nCOPY --from=build-env /opt/program/cmd/socketsrv/socketsrv /opt/socketsrv\nRUN apk --no-cache add curl\nEXPOSE 8087\n\nWORKDIR /opt\nCMD [\"./socketsrv\"]\n"},"repairedBuild":{"startTime":1672986875201,"endTime":1672986982712,"error":null,"stdout":"Sending build context to Docker daemon  115.7kB\r\r\nStep 1/19 : FROM golang:alpine as build-env\n ---> cae57157ceaa\nStep 2/19 : RUN mkdir /opt/program\n ---> Running in 4c301af4e70b\nRemoving intermediate container 4c301af4e70b\n ---> 3ee6f75f4720\nStep 3/19 : WORKDIR /opt/program\n ---> Running in e69d33abc484\nRemoving intermediate container e69d33abc484\n ---> 810961f64496\nStep 4/19 : RUN apk update\n ---> Running in 158ecd841a4f\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\nv3.17.0-332-g13963e2526 [https://dl-cdn.alpinelinux.org/alpine/v3.17/main]\nv3.17.0-335-g0aef3a6d7a [https://dl-cdn.alpinelinux.org/alpine/v3.17/community]\nOK: 17816 distinct packages available\nRemoving intermediate container 158ecd841a4f\n ---> c9c76e5ef36e\nStep 5/19 : RUN apk add --no-cache build-base ca-certificates git\n ---> Running in 29bde6575379\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/26) Installing libgcc (12.2.1_git20220924-r4)\n(2/26) Installing libstdc++ (12.2.1_git20220924-r4)\n(3/26) Installing binutils (2.39-r2)\n(4/26) Installing libmagic (5.43-r0)\n(5/26) Installing file (5.43-r0)\n(6/26) Installing libgomp (12.2.1_git20220924-r4)\n(7/26) Installing libatomic (12.2.1_git20220924-r4)\n(8/26) Installing gmp (6.2.1-r2)\n(9/26) Installing isl25 (0.25-r0)\n(10/26) Installing mpfr4 (4.1.0-r0)\n(11/26) Installing mpc1 (1.2.1-r1)\n(12/26) Installing gcc (12.2.1_git20220924-r4)\n(13/26) Installing libstdc++-dev (12.2.1_git20220924-r4)\n(14/26) Installing musl-dev (1.2.3-r4)\n(15/26) Installing libc-dev (0.7.2-r3)\n(16/26) Installing g++ (12.2.1_git20220924-r4)\n(17/26) Installing make (4.3-r1)\n(18/26) Installing fortify-headers (1.1-r1)\n(19/26) Installing patch (2.7.6-r8)\n(20/26) Installing build-base (0.5-r3)\n(21/26) Installing brotli-libs (1.0.9-r9)\n(22/26) Installing nghttp2-libs (1.51.0-r0)\n(23/26) Installing libcurl (7.87.0-r0)\n(24/26) Installing libexpat (2.5.0-r0)\n(25/26) Installing pcre2 (10.42-r0)\n(26/26) Installing git (2.38.2-r0)\nExecuting busybox-1.35.0-r29.trigger\nOK: 253 MiB in 42 packages\nRemoving intermediate container 29bde6575379\n ---> 015a8b238624\nStep 6/19 : COPY go.mod .\n ---> 4a8dfc8e8810\nStep 7/19 : COPY go.sum .\n ---> b9aba73256cf\nStep 8/19 : RUN go mod download\n ---> Running in 3b2912bf5bae\nRemoving intermediate container 3b2912bf5bae\n ---> 8253de0a402d\nStep 9/19 : COPY . .\n ---> 1ec883cfa9c1\nStep 10/19 : WORKDIR /opt/program/cmd/socketsrv\n ---> Running in 4e28b73a1276\nRemoving intermediate container 4e28b73a1276\n ---> 849ca01dd82c\nStep 11/19 : ARG BUILD_HASH=unknown\n ---> Running in d8cb335f48c5\nRemoving intermediate container d8cb335f48c5\n ---> e092e060564b\nStep 12/19 : ARG BUILD_DATE=unknown\n ---> Running in d1f7213e4226\nRemoving intermediate container d1f7213e4226\n ---> 9b7e70e52093\nStep 13/19 : RUN go build -ldflags  \"-X=main.BuildDate=${BUILD_DATE} -X=main.BuildHash=${BUILD_HASH}\"\n ---> Running in 1a9772c00510\nRemoving intermediate container 1a9772c00510\n ---> 4d3758363859\nStep 14/19 : FROM alpine\n ---> 49176f190c7e\nStep 15/19 : COPY --from=build-env /opt/program/cmd/socketsrv/socketsrv /opt/socketsrv\n ---> 559a5243984c\nStep 16/19 : RUN apk --no-cache add curl\n ---> Running in 078b31ecfc8e\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/5) Installing ca-certificates (20220614-r3)\n(2/5) Installing brotli-libs (1.0.9-r9)\n(3/5) Installing nghttp2-libs (1.51.0-r0)\n(4/5) Installing libcurl (7.87.0-r0)\n(5/5) Installing curl (7.87.0-r0)\nExecuting busybox-1.35.0-r29.trigger\nExecuting ca-certificates-20220614-r3.trigger\nOK: 9 MiB in 20 packages\nRemoving intermediate container 078b31ecfc8e\n ---> 9b56420ac7ba\nStep 17/19 : EXPOSE 8087\n ---> Running in 5edef98bbdb8\nRemoving intermediate container 5edef98bbdb8\n ---> 7bfcd6d27b45\nStep 18/19 : WORKDIR /opt\n ---> Running in 1b788bcabbd0\nRemoving intermediate container 1b788bcabbd0\n ---> 87a77fc06286\nStep 19/19 : CMD [\"./socketsrv\"]\n ---> Running in 9c87e0bbdcc5\nRemoving intermediate container 9c87e0bbdcc5\n ---> c40c0a140f50\nSuccessfully built c40c0a140f50\nSuccessfully tagged liwords-socket:latest\n","stderr":"","imageSize":22011822}}