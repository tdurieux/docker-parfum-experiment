{"repository":"https://github.com/swimauger/tsc-hooks","dockerfilePath":"Dockerfile","startTime":1673247997017,"endTime":1673248144181,"clone":{"startTime":1673247997018,"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/swimauger/tsc-hooks'...\n","error":null,"endTime":1673247997863,"commit":"911a1a90cd46935826b6d9e0bb838a99b3fa8ab9"},"originalBuild":{"startTime":1673247997949,"endTime":1673248068876,"error":null,"stdout":"Sending build context to Docker daemon  394.2kB\r\r\nStep 1/13 : FROM \"node\"\n ---> baeb96d69092\nStep 2/13 : WORKDIR /test\n ---> Running in 6230d4c50047\nRemoving intermediate container 6230d4c50047\n ---> 8b7be9b9a1d7\nStep 3/13 : COPY hooks hooks\n ---> 0d29226e599c\nStep 4/13 : COPY jest.config.js .\n ---> 8eb0a80c65c1\nStep 5/13 : RUN npm i -g jest\n ---> Running in ad71a5089720\n\nadded 277 packages in 14s\n\n30 packages are looking for funding\n  run `npm fund` for details\nRemoving intermediate container ad71a5089720\n ---> 804a341f5f39\nStep 6/13 : WORKDIR /test/hooks/copy-files/test\n ---> Running in 10a12ba95c0e\nRemoving intermediate container 10a12ba95c0e\n ---> 98b2607a1dca\nStep 7/13 : RUN yarn add tsc-hooks@dev && yarn build\n ---> Running in f86e8ddceafd\nyarn add v1.22.19\n\u001b[91mwarning package.json: No license field\n\u001b[0minfo No lockfile found.\n\u001b[91mwarning No license field\n\u001b[0m[1/4] Resolving packages...\n[2/4] Fetching packages...\n[3/4] Linking dependencies...\n[4/4] Building fresh packages...\nsuccess Saved lockfile.\n\u001b[91mwarning No license field\n\u001b[0msuccess Saved 17 new dependencies.\ninfo Direct dependencies\n└─ tsc-hooks@1.1.2-dev.20211115.4\ninfo All dependencies\n├─ anymatch@3.1.3\n├─ binary-extensions@2.2.0\n├─ braces@3.0.2\n├─ chokidar@3.5.3\n├─ fill-range@7.0.1\n├─ glob-parent@5.1.2\n├─ is-binary-path@2.1.0\n├─ is-extglob@2.1.1\n├─ is-glob@4.0.3\n├─ is-number@7.0.0\n├─ json5@2.2.3\n├─ normalize-path@3.0.0\n├─ picomatch@2.3.1\n├─ readdirp@3.6.0\n├─ to-regex-range@5.0.1\n├─ tsc-hooks@1.1.2-dev.20211115.4\n└─ typescript@4.9.4\nDone in 3.33s.\nyarn run v1.22.19\n\u001b[91mwarning package.json: No license field\n\u001b[0m$ tsc -p tsconfig.json\n\u001b[91m/test/hooks/copy-files/test/node_modules/tsc-hooks/hooks/copy-files/copy-files.hook.js:65\n    for (const file of includedFiles) {\n                       ^\n\nReferenceError: includedFiles is not defined\n    at Object.onPostCompilation (/test/hooks/copy-files/test/node_modules/tsc-hooks/hooks/copy-files/copy-files.hook.js:65:24)\n    at process.<anonymous> (/test/hooks/copy-files/test/node_modules/tsc-hooks/lib/injection.js:66:40)\n    at process.emit (node:events:525:35)\n    at process.exit (node:internal/process/per_thread:209:15)\n    at /test/hooks/copy-files/test/node_modules/typescript/lib/tsc.js:4573:69\n    at disableCPUProfiler (/test/hooks/copy-files/test/node_modules/typescript/lib/tsc.js:4684:21)\n    at Object.exit (/test/hooks/copy-files/test/node_modules/typescript/lib/tsc.js:4573:21)\n    at performCompilation (/test/hooks/copy-files/test/node_modules/typescript/lib/tsc.js:107869:20)\n    at executeCommandLineWorker (/test/hooks/copy-files/test/node_modules/typescript/lib/tsc.js:107739:17)\n    at Object.executeCommandLine (/test/hooks/copy-files/test/node_modules/typescript/lib/tsc.js:107784:20)\n\nNode.js v19.4.0\n\u001b[0mDone in 5.14s.\nRemoving intermediate container f86e8ddceafd\n ---> 880689c26e33\nStep 8/13 : WORKDIR /test/hooks/example/test\n ---> Running in 26e0b3e8100b\nRemoving intermediate container 26e0b3e8100b\n ---> a14f09986c1f\nStep 9/13 : RUN yarn add tsc-hooks@dev && yarn build\n ---> Running in 1a32c61e9e56\nyarn add v1.22.19\n\u001b[91mwarning package.json: No license field\n\u001b[0minfo No lockfile found.\n\u001b[91mwarning No license field\n\u001b[0m[1/4] Resolving packages...\n[2/4] Fetching packages...\n[3/4] Linking dependencies...\n[4/4] Building fresh packages...\nsuccess Saved lockfile.\n\u001b[91mwarning No license field\n\u001b[0msuccess Saved 17 new dependencies.\ninfo Direct dependencies\n└─ tsc-hooks@1.1.2-dev.20211115.4\ninfo All dependencies\n├─ anymatch@3.1.3\n├─ binary-extensions@2.2.0\n├─ braces@3.0.2\n├─ chokidar@3.5.3\n├─ fill-range@7.0.1\n├─ glob-parent@5.1.2\n├─ is-binary-path@2.1.0\n├─ is-extglob@2.1.1\n├─ is-glob@4.0.3\n├─ is-number@7.0.0\n├─ json5@2.2.3\n├─ normalize-path@3.0.0\n├─ picomatch@2.3.1\n├─ readdirp@3.6.0\n├─ to-regex-range@5.0.1\n├─ tsc-hooks@1.1.2-dev.20211115.4\n└─ typescript@4.9.4\nDone in 1.63s.\nyarn run v1.22.19\n\u001b[91mwarning package.json: No license field\n\u001b[0m$ tsc -p tsconfig.json\nonInitCompilation is executed before tsc has started compilation\nBelow is the api context in the onInitCompilation function:\n{\n  tsconfig: {\n    compilerOptions: { outDir: 'dist' },\n    message: 'INIT MESSAGE',\n    hooks: [ 'example' ],\n    save: [Function: save],\n    ignore: [Function: ignore],\n    path: '/test/hooks/example/test/tsconfig.json',\n    directory: '/test/hooks/example/test'\n  },\n  watch: [Function: watch]\n}\nInit Message: INIT MESSAGE\nonPostCompilation is executed after tsc has completed compilation\nBelow is the api context in the onPostCompilation function:\n{\n  tsconfig: {\n    compilerOptions: { outDir: 'dist' },\n    message: 'POST MESSAGE',\n    hooks: [ 'example' ],\n    save: [Function: save],\n    ignore: [Function: ignore],\n    path: '/test/hooks/example/test/tsconfig.json',\n    directory: '/test/hooks/example/test'\n  },\n  watch: [Function: watch]\n}\nPost Message: POST MESSAGE\nDone in 2.66s.\nRemoving intermediate container 1a32c61e9e56\n ---> d5e8634f0410\nStep 10/13 : WORKDIR /test/hooks/file-permissions/test\n ---> Running in c208034e6d03\nRemoving intermediate container c208034e6d03\n ---> 36ecd9f46a4c\nStep 11/13 : RUN yarn add tsc-hooks@dev && yarn build\n ---> Running in e57e8ceae8f1\nyarn add v1.22.19\n\u001b[91mwarning package.json: No license field\n\u001b[0minfo No lockfile found.\n\u001b[91mwarning No license field\n\u001b[0m[1/4] Resolving packages...\n[2/4] Fetching packages...\n[3/4] Linking dependencies...\n[4/4] Building fresh packages...\nsuccess Saved lockfile.\n\u001b[91mwarning No license field\n\u001b[0msuccess Saved 17 new dependencies.\ninfo Direct dependencies\n└─ tsc-hooks@1.1.2-dev.20211115.4\ninfo All dependencies\n├─ anymatch@3.1.3\n├─ binary-extensions@2.2.0\n├─ braces@3.0.2\n├─ chokidar@3.5.3\n├─ fill-range@7.0.1\n├─ glob-parent@5.1.2\n├─ is-binary-path@2.1.0\n├─ is-extglob@2.1.1\n├─ is-glob@4.0.3\n├─ is-number@7.0.0\n├─ json5@2.2.3\n├─ normalize-path@3.0.0\n├─ picomatch@2.3.1\n├─ readdirp@3.6.0\n├─ to-regex-range@5.0.1\n├─ tsc-hooks@1.1.2-dev.20211115.4\n└─ typescript@4.9.4\nDone in 1.21s.\nyarn run v1.22.19\n\u001b[91mwarning package.json: No license field\n\u001b[0m$ tsc -p tsconfig.json\n\u001b[91m/test/hooks/file-permissions/test/node_modules/tsc-hooks/hooks/copy-files/copy-files.hook.js:65\n    for (const file of includedFiles) {\n                       ^\n\nReferenceError: includedFiles is not defined\n    at Object.onPostCompilation (/test/hooks/file-permissions/test/node_modules/tsc-hooks/hooks/copy-files/copy-files.hook.js:65:24)\n    at process.<anonymous> (/test/hooks/file-permissions/test/node_modules/tsc-hooks/lib/injection.js:66:40)\n    at process.emit (node:events:525:35)\n    at process.exit (node:internal/process/per_thread:209:15)\n    at /test/hooks/file-permissions/test/node_modules/typescript/lib/tsc.js:4573:69\n    at disableCPUProfiler (/test/hooks/file-permissions/test/node_modules/typescript/lib/tsc.js:4684:21)\n    at Object.exit (/test/hooks/file-permissions/test/node_modules/typescript/lib/tsc.js:4573:21)\n    at performCompilation (/test/hooks/file-permissions/test/node_modules/typescript/lib/tsc.js:107869:20)\n    at executeCommandLineWorker (/test/hooks/file-permissions/test/node_modules/typescript/lib/tsc.js:107739:17)\n    at Object.executeCommandLine (/test/hooks/file-permissions/test/node_modules/typescript/lib/tsc.js:107784:20)\n\nNode.js v19.4.0\n\u001b[0mDone in 2.38s.\nRemoving intermediate container e57e8ceae8f1\n ---> 3d1fb86f9737\nStep 12/13 : WORKDIR /test/hooks\n ---> Running in f1b247be7798\nRemoving intermediate container f1b247be7798\n ---> 0686bb996fc3\nStep 13/13 : CMD [ \"jest\" ]\n ---> Running in e782320cb34d\nRemoving intermediate container e782320cb34d\n ---> 94bbfcaca728\nSuccessfully built 94bbfcaca728\nSuccessfully tagged tsc-hooks:latest\n","stderr":"","imageSize":1564941572},"repair":{"startTime":1673248068988,"endTime":1673248069078,"violations":[{"name":"npmCacheCleanAfterInstall","position":{"start":8,"end":8,"columnStart":4,"columnEnd":17}}],"repairedDockerfile":"FROM \"node\"\n\nWORKDIR /test\n\nCOPY hooks hooks\n\nCOPY jest.config.js .\n\nRUN npm i -g jest && npm cache clean --force;\n\nWORKDIR /test/hooks/copy-files/test\nRUN yarn add tsc-hooks@dev && yarn build\n\nWORKDIR /test/hooks/example/test\nRUN yarn add tsc-hooks@dev && yarn build\n\nWORKDIR /test/hooks/file-permissions/test\nRUN yarn add tsc-hooks@dev && yarn build\n\nWORKDIR /test/hooks\nCMD [ \"jest\" ]\n"},"repairedBuild":{"startTime":1673248071373,"endTime":1673248142745,"error":null,"stdout":"Sending build context to Docker daemon  394.2kB\r\r\nStep 1/13 : FROM \"node\"\n ---> baeb96d69092\nStep 2/13 : WORKDIR /test\n ---> Running in 18adef42e2e5\nRemoving intermediate container 18adef42e2e5\n ---> 6f49e7cbb17b\nStep 3/13 : COPY hooks hooks\n ---> 72bd49ab4e76\nStep 4/13 : COPY jest.config.js .\n ---> 74f559101e26\nStep 5/13 : RUN npm i -g jest && npm cache clean --force;\n ---> Running in 72cfdb124d90\n\nadded 277 packages in 5s\n\n30 packages are looking for funding\n  run `npm fund` for details\n\u001b[91mnpm\u001b[0m\u001b[91m WARN using --force Recommended protections disabled.\n\u001b[0mRemoving intermediate container 72cfdb124d90\n ---> 89785007f6a4\nStep 6/13 : WORKDIR /test/hooks/copy-files/test\n ---> Running in 0c2f227d3ed6\nRemoving intermediate container 0c2f227d3ed6\n ---> 777bbf764ae0\nStep 7/13 : RUN yarn add tsc-hooks@dev && yarn build\n ---> Running in 0eee18cb6211\nyarn add v1.22.19\n\u001b[91mwarning package.json: No license field\n\u001b[0minfo No lockfile found.\n\u001b[91mwarning No license field\n\u001b[0m[1/4] Resolving packages...\n[2/4] Fetching packages...\n[3/4] Linking dependencies...\n[4/4] Building fresh packages...\nsuccess Saved lockfile.\n\u001b[91mwarning No license field\n\u001b[0msuccess Saved 17 new dependencies.\ninfo Direct dependencies\n└─ tsc-hooks@1.1.2-dev.20211115.4\ninfo All dependencies\n├─ anymatch@3.1.3\n├─ binary-extensions@2.2.0\n├─ braces@3.0.2\n├─ chokidar@3.5.3\n├─ fill-range@7.0.1\n├─ glob-parent@5.1.2\n├─ is-binary-path@2.1.0\n├─ is-extglob@2.1.1\n├─ is-glob@4.0.3\n├─ is-number@7.0.0\n├─ json5@2.2.3\n├─ normalize-path@3.0.0\n├─ picomatch@2.3.1\n├─ readdirp@3.6.0\n├─ to-regex-range@5.0.1\n├─ tsc-hooks@1.1.2-dev.20211115.4\n└─ typescript@4.9.4\nDone in 3.88s.\nyarn run v1.22.19\n\u001b[91mwarning package.json: No license field\n\u001b[0m$ tsc -p tsconfig.json\n\u001b[91m/test/hooks/copy-files/test/node_modules/tsc-hooks/hooks/copy-files/copy-files.hook.js:65\n    for (const file of includedFiles) {\n                       ^\n\nReferenceError: includedFiles is not defined\n    at Object.onPostCompilation (/test/hooks/copy-files/test/node_modules/tsc-hooks/hooks/copy-files/copy-files.hook.js:65:24)\n    at process.<anonymous> (/test/hooks/copy-files/test/node_modules/tsc-hooks/lib/injection.js:66:40)\n    at process.emit (node:events:525:35)\n    at process.exit (node:internal/process/per_thread:209:15)\n    at /test/hooks/copy-files/test/node_modules/typescript/lib/tsc.js:4573:69\n    at disableCPUProfiler (/test/hooks/copy-files/test/node_modules/typescript/lib/tsc.js:4684:21)\n    at Object.exit (/test/hooks/copy-files/test/node_modules/typescript/lib/tsc.js:4573:21)\n    at performCompilation (/test/hooks/copy-files/test/node_modules/typescript/lib/tsc.js:107869:20)\n    at executeCommandLineWorker (/test/hooks/copy-files/test/node_modules/typescript/lib/tsc.js:107739:17)\n    at Object.executeCommandLine (/test/hooks/copy-files/test/node_modules/typescript/lib/tsc.js:107784:20)\n\nNode.js v19.4.0\n\u001b[0mDone in 4.97s.\nRemoving intermediate container 0eee18cb6211\n ---> 2f4cc3074a99\nStep 8/13 : WORKDIR /test/hooks/example/test\n ---> Running in 43bc780832d5\nRemoving intermediate container 43bc780832d5\n ---> 881ad1f384d7\nStep 9/13 : RUN yarn add tsc-hooks@dev && yarn build\n ---> Running in 8167a49969ce\nyarn add v1.22.19\n\u001b[91mwarning package.json: No license field\n\u001b[0minfo No lockfile found.\n\u001b[91mwarning No license field\n\u001b[0m[1/4] Resolving packages...\n[2/4] Fetching packages...\n[3/4] Linking dependencies...\n[4/4] Building fresh packages...\nsuccess Saved lockfile.\n\u001b[91mwarning No license field\n\u001b[0msuccess Saved 17 new dependencies.\ninfo Direct dependencies\n└─ tsc-hooks@1.1.2-dev.20211115.4\ninfo All dependencies\n├─ anymatch@3.1.3\n├─ binary-extensions@2.2.0\n├─ braces@3.0.2\n├─ chokidar@3.5.3\n├─ fill-range@7.0.1\n├─ glob-parent@5.1.2\n├─ is-binary-path@2.1.0\n├─ is-extglob@2.1.1\n├─ is-glob@4.0.3\n├─ is-number@7.0.0\n├─ json5@2.2.3\n├─ normalize-path@3.0.0\n├─ picomatch@2.3.1\n├─ readdirp@3.6.0\n├─ to-regex-range@5.0.1\n├─ tsc-hooks@1.1.2-dev.20211115.4\n└─ typescript@4.9.4\nDone in 0.82s.\nyarn run v1.22.19\n\u001b[91mwarning package.json: No license field\n\u001b[0m$ tsc -p tsconfig.json\nonInitCompilation is executed before tsc has started compilation\nBelow is the api context in the onInitCompilation function:\n{\n  tsconfig: {\n    compilerOptions: { outDir: 'dist' },\n    message: 'INIT MESSAGE',\n    hooks: [ 'example' ],\n    save: [Function: save],\n    ignore: [Function: ignore],\n    path: '/test/hooks/example/test/tsconfig.json',\n    directory: '/test/hooks/example/test'\n  },\n  watch: [Function: watch]\n}\nInit Message: INIT MESSAGE\nonPostCompilation is executed after tsc has completed compilation\nBelow is the api context in the onPostCompilation function:\n{\n  tsconfig: {\n    compilerOptions: { outDir: 'dist' },\n    message: 'POST MESSAGE',\n    hooks: [ 'example' ],\n    save: [Function: save],\n    ignore: [Function: ignore],\n    path: '/test/hooks/example/test/tsconfig.json',\n    directory: '/test/hooks/example/test'\n  },\n  watch: [Function: watch]\n}\nPost Message: POST MESSAGE\nDone in 2.70s.\nRemoving intermediate container 8167a49969ce\n ---> a682e63ca9b3\nStep 10/13 : WORKDIR /test/hooks/file-permissions/test\n ---> Running in 62f5ed08fc44\nRemoving intermediate container 62f5ed08fc44\n ---> b2ccb4fa34d4\nStep 11/13 : RUN yarn add tsc-hooks@dev && yarn build\n ---> Running in a82029aea4f7\nyarn add v1.22.19\n\u001b[91mwarning package.json: No license field\n\u001b[0minfo No lockfile found.\n\u001b[91mwarning No license field\n\u001b[0m[1/4] Resolving packages...\n[2/4] Fetching packages...\n[3/4] Linking dependencies...\n[4/4] Building fresh packages...\nsuccess Saved lockfile.\n\u001b[91mwarning No license field\n\u001b[0msuccess Saved 17 new dependencies.\ninfo Direct dependencies\n└─ tsc-hooks@1.1.2-dev.20211115.4\ninfo All dependencies\n├─ anymatch@3.1.3\n├─ binary-extensions@2.2.0\n├─ braces@3.0.2\n├─ chokidar@3.5.3\n├─ fill-range@7.0.1\n├─ glob-parent@5.1.2\n├─ is-binary-path@2.1.0\n├─ is-extglob@2.1.1\n├─ is-glob@4.0.3\n├─ is-number@7.0.0\n├─ json5@2.2.3\n├─ normalize-path@3.0.0\n├─ picomatch@2.3.1\n├─ readdirp@3.6.0\n├─ to-regex-range@5.0.1\n├─ tsc-hooks@1.1.2-dev.20211115.4\n└─ typescript@4.9.4\nDone in 1.21s.\nyarn run v1.22.19\n\u001b[91mwarning package.json: No license field\n\u001b[0m$ tsc -p tsconfig.json\n\u001b[91m/test/hooks/file-permissions/test/node_modules/tsc-hooks/hooks/copy-files/copy-files.hook.js:65\n    for (const file of includedFiles) {\n                       ^\n\nReferenceError: includedFiles is not defined\n    at Object.onPostCompilation (/test/hooks/file-permissions/test/node_modules/tsc-hooks/hooks/copy-files/copy-files.hook.js:65:24)\n    at process.<anonymous> (/test/hooks/file-permissions/test/node_modules/tsc-hooks/lib/injection.js:66:40)\n    at process.emit (node:events:525:35)\n    at process.exit (node:internal/process/per_thread:209:15)\n    at /test/hooks/file-permissions/test/node_modules/typescript/lib/tsc.js:4573:69\n    at disableCPUProfiler (/test/hooks/file-permissions/test/node_modules/typescript/lib/tsc.js:4684:21)\n    at Object.exit (/test/hooks/file-permissions/test/node_modules/typescript/lib/tsc.js:4573:21)\n    at performCompilation (/test/hooks/file-permissions/test/node_modules/typescript/lib/tsc.js:107869:20)\n    at executeCommandLineWorker (/test/hooks/file-permissions/test/node_modules/typescript/lib/tsc.js:107739:17)\n    at Object.executeCommandLine (/test/hooks/file-permissions/test/node_modules/typescript/lib/tsc.js:107784:20)\n\nNode.js v19.4.0\n\u001b[0mDone in 2.75s.\nRemoving intermediate container a82029aea4f7\n ---> 86230670ad61\nStep 12/13 : WORKDIR /test/hooks\n ---> Running in 5c5c86e711c4\nRemoving intermediate container 5c5c86e711c4\n ---> 2108b0561c1c\nStep 13/13 : CMD [ \"jest\" ]\n ---> Running in 499c6df47fa7\nRemoving intermediate container 499c6df47fa7\n ---> 18391d7668ff\nSuccessfully built 18391d7668ff\nSuccessfully tagged tsc-hooks:latest\n","stderr":"","imageSize":1525529554}}