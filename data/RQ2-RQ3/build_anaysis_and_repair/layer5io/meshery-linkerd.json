{"repository":"https://github.com/layer5io/meshery-linkerd","dockerfilePath":"Dockerfile","startTime":1672714355625,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/layer5io/meshery-linkerd'...\n","error":null,"commit":"3e8d075308dc1213eeee8ec31d39761fa55425df"},"originalBuild":{"startTimestamp":1672714356658,"endTimestamp":1672714580010,"error":null,"stdout":"Sending build context to Docker daemon  9.758MB\r\r\nStep 1/23 : FROM golang:1.19 as build-env\n1.19: Pulling from library/golang\n32de3c850997: Already exists\nfa1d4c8d85a4: Already exists\nc796299bbbdd: Already exists\n81283a9569ad: Already exists\nc768848b86a2: Already exists\n3a3324c1d283: Pulling fs layer\nea43a17566db: Pulling fs layer\nea43a17566db: Verifying Checksum\nea43a17566db: Download complete\n3a3324c1d283: Download complete\n3a3324c1d283: Pull complete\nea43a17566db: Pull complete\nDigest: sha256:660f138b4477001d65324a51fa158c1b868651b44e43f0953bf062e9f38b72f3\nStatus: Downloaded newer image for golang:1.19\n ---> 6650307efe4a\nStep 2/23 : ENV CGO_ENABLED=0\n ---> Running in de0286672180\nRemoving intermediate container de0286672180\n ---> e57bbabf709d\nStep 3/23 : ARG VERSION\n ---> Running in 1e2d40ae431e\nRemoving intermediate container 1e2d40ae431e\n ---> 776382b8558d\nStep 4/23 : ARG GIT_COMMITSHA\n ---> Running in b034e6b6031b\nRemoving intermediate container b034e6b6031b\n ---> 23ba024e0c38\nStep 5/23 : ARG GIT_VERSION\n ---> Running in b774ac92b097\nRemoving intermediate container b774ac92b097\n ---> 17011dde966b\nStep 6/23 : ARG GIT_STRIPPED_VERSION\n ---> Running in 56fc2c20fa7c\nRemoving intermediate container 56fc2c20fa7c\n ---> ac332e6269c0\nStep 7/23 : WORKDIR /github.com/layer5io/meshery-linkerd\n ---> Running in 158b8b70c72a\nRemoving intermediate container 158b8b70c72a\n ---> 7fb28c17ee28\nStep 8/23 : COPY go.mod go.sum ./\n ---> 1ec539a82407\nStep 9/23 : RUN go mod download\n ---> Running in 2a2537141844\nRemoving intermediate container 2a2537141844\n ---> 19532c15facb\nStep 10/23 : COPY main.go main.go\n ---> 5661a53e5fcd\nStep 11/23 : COPY internal/ internal/\n ---> 749087cdc16b\nStep 12/23 : COPY linkerd/ linkerd/\n ---> ab587d74614a\nStep 13/23 : COPY build/ build/\n ---> 59769032f3c4\nStep 14/23 : RUN VERSION=$(curl -L -s     https://api.github.com/repos/meshery/meshery-linkerd/releases/latest | \tgrep tag_name | sed \"s/ *\\\"tag_name\\\": *\\\"\\\\(.*\\\\)\\\",*/\\\\1/\" | \tgrep -v \"rc\\.[0-9]$\"| head -n 1 )\n ---> Running in 9585d5d82857\nRemoving intermediate container 9585d5d82857\n ---> a29e029fc3d6\nStep 15/23 : RUN go mod tidy; CGO_ENABLED=0 GOOS=linux GO111MODULE=on go build \t-ldflags=\"-w -s -X main.version=$VERSION -X main.gitsha=$GIT_COMMITSHA\" \t-a -o meshery-linkerd main.go\n ---> Running in 147e3d6ecf2f\n\u001b[91mgo: downloading gopkg.in/check.v1 v1.0.0-20201130134442-10cb98267c6c\ngo: downloading github.com/stretchr/testify v1.8.0\n\u001b[0m\u001b[91mgo: downloading github.com/go-git/go-git-fixtures/v4 v4.2.1\n\u001b[0m\u001b[91mgo: downloading github.com/rogpeppe/go-internal v1.8.1\n\u001b[0m\u001b[91mgo: downloading github.com/cockroachdb/apd v1.1.0\n\u001b[0m\u001b[91mgo: downloading github.com/gofrs/uuid v4.0.0+incompatible\n\u001b[0m\u001b[91mgo: downloading github.com/kr/pretty v0.2.1\n\u001b[0m\u001b[91mgo: downloading github.com/distribution/distribution/v3 v3.0.0-20220526142353-ffbd94cbe269\n\u001b[0m\u001b[91mgo: downloading github.com/phayes/freeport v0.0.0-20220201140144-74d24b5ae9f5\n\u001b[0m\u001b[91mgo: downloading github.com/DATA-DOG/go-sqlmock v1.5.0\n\u001b[0m\u001b[91mgo: downloading github.com/armon/go-socks5 v0.0.0-20160902184237-e75332964ef5\n\u001b[0m\u001b[91mgo: downloading github.com/gliderlabs/ssh v0.2.2\n\u001b[0m\u001b[91mgo: downloading github.com/matryer/is v1.2.0\n\u001b[0m\u001b[91mgo: downloading github.com/jackc/pgmock v0.0.0-20210724152146-4ad1a8207f65\n\u001b[0m\u001b[91mgo: downloading github.com/go-sql-driver/mysql v1.6.0\n\u001b[0m\u001b[91mgo: downloading github.com/onsi/gomega v1.23.0\ngo: downloading github.com/onsi/ginkgo/v2 v2.4.0\n\u001b[0m\u001b[91mgo: downloading github.com/gobuffalo/packr/v2 v2.8.3\n\u001b[0m\u001b[91mgo: downloading gotest.tools/v3 v3.0.3\n\u001b[0m\u001b[91mgo: downloading github.com/emicklei/proto v1.6.15\n\u001b[0m\u001b[91mgo: downloading github.com/protocolbuffers/txtpbfmt v0.0.0-20201118171849-f6a6b3f636fc\n\u001b[0m\u001b[91mgo: downloading github.com/poy/onpar v0.0.0-20190519213022-ee068f8ea4d1\n\u001b[0m\u001b[91mgo: downloading github.com/ziutek/mymysql v1.5.4\n\u001b[0m\u001b[91mgo: downloading github.com/docker/libtrust v0.0.0-20150114040149-fa567046d9b1\n\u001b[0m\u001b[91mgo: downloading github.com/creack/pty v1.1.11\n\u001b[0m\u001b[91mgo: downloading github.com/Microsoft/hcsshim v0.9.3\n\u001b[0m\u001b[91mgo: downloading github.com/moby/sys/mountinfo v0.5.0\n\u001b[0m\u001b[91mgo: downloading github.com/kr/text v0.2.0\n\u001b[0m\u001b[91mgo: downloading github.com/elazarl/goproxy v0.0.0-20180725130230-947c36da3153\n\u001b[0m\u001b[91mgo: downloading github.com/pmezard/go-difflib v1.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/stretchr/objx v0.4.0\n\u001b[0m\u001b[91mgo: downloading gotest.tools v2.2.0+incompatible\n\u001b[0m\u001b[91mgo: downloading github.com/anmitsu/go-shlex v0.0.0-20161002113705-648efa622239\n\u001b[0m\u001b[91mgo: downloading github.com/golang/glog v0.0.0-20160126235308-23def4e6c14b\n\u001b[0m\u001b[91mgo: downloading github.com/markbates/safe v1.0.1\ngo: downloading github.com/karrick/godirwalk v1.16.1\ngo: downloading github.com/gobuffalo/logger v1.0.6\ngo: downloading github.com/gobuffalo/packd v1.0.1\n\u001b[0m\u001b[91mgo: downloading github.com/markbates/oncer v1.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/markbates/errx v1.1.0\n\u001b[0m\u001b[91mgo: downloading github.com/onsi/ginkgo v1.16.4\n\u001b[0m\u001b[91mgo: downloading github.com/Shopify/logrus-bugsnag v0.0.0-20171204204709-577dee27f20d\ngo: downloading github.com/bugsnag/bugsnag-go v0.0.0-20141110184014-b1d153021fcd\ngo: downloading github.com/yvasiyarov/gorelic v0.0.0-20141212073537-a9bba5b9ab50\ngo: downloading github.com/gorilla/handlers v1.5.1\n\u001b[0m\u001b[91mgo: downloading github.com/bshuster-repo/logrus-logstash-hook v1.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/docker/go-events v0.0.0-20190806004212-e31b211e4f1c\n\u001b[0m\u001b[91mgo: downloading github.com/gomodule/redigo v1.8.2\n\u001b[0m\u001b[91mgo: downloading github.com/felixge/httpsnoop v1.0.1\n\u001b[0m\u001b[91mgo: downloading go.opencensus.io v0.23.0\n\u001b[0m\u001b[91mgo: downloading github.com/containerd/cgroups v1.0.3\n\u001b[0m\u001b[91mgo: downloading github.com/yvasiyarov/newrelic_platform_go v0.0.0-20140908184405-b21fdbd4370f\ngo: downloading github.com/yvasiyarov/go-metrics v0.0.0-20140926110328-57bccd1ccd43\n\u001b[0m\u001b[91mgo: downloading github.com/golang/groupcache v0.0.0-20210331224755-41bb18bfe9da\n\u001b[0m\u001b[91mgo: downloading github.com/bugsnag/panicwrap v0.0.0-20151223152923-e2c28503fcd0\n\u001b[0m\u001b[91mgo: downloading github.com/bugsnag/osext v0.0.0-20130617224835-0dd3f918b21b\n\u001b[0mRemoving intermediate container 147e3d6ecf2f\n ---> a0236f2c044c\nStep 16/23 : FROM gcr.io/distroless/nodejs:16\n16: Pulling from distroless/nodejs\nfc251a6e7981: Pulling fs layer\nfda4ba87f6fb: Pulling fs layer\na1f1879bb7de: Pulling fs layer\n51dfcb876247: Pulling fs layer\n51dfcb876247: Waiting\nfc251a6e7981: Verifying Checksum\nfc251a6e7981: Download complete\na1f1879bb7de: Verifying Checksum\na1f1879bb7de: Download complete\nfda4ba87f6fb: Verifying Checksum\nfda4ba87f6fb: Download complete\nfc251a6e7981: Pull complete\nfda4ba87f6fb: Pull complete\na1f1879bb7de: Pull complete\n51dfcb876247: Verifying Checksum\n51dfcb876247: Download complete\n51dfcb876247: Pull complete\nDigest: sha256:4e52ed00e9d6ae22d503d0504666e4ffbad39d6c756f52308022a0845bf230fa\nStatus: Downloaded newer image for gcr.io/distroless/nodejs:16\n ---> 37d336bef6f0\nStep 17/23 : ENV DISTRO=\"debian\"\n ---> Running in afd735de480e\nRemoving intermediate container afd735de480e\n ---> bcc7a66e57b9\nStep 18/23 : ENV SERVICE_ADDR=\"meshery-linkerd\"\n ---> Running in 07912c6efe33\nRemoving intermediate container 07912c6efe33\n ---> a640218f8f0b\nStep 19/23 : ENV MESHERY_SERVER=\"http://meshery:9081\"\n ---> Running in 5649fc14887e\nRemoving intermediate container 5649fc14887e\n ---> 1a21dad0177d\nStep 20/23 : WORKDIR /\n ---> Running in 08de063504e8\nRemoving intermediate container 08de063504e8\n ---> 9ffb5ee24d8b\nStep 21/23 : COPY templates/ ./templates\n ---> 7cf94b7fa809\nStep 22/23 : COPY --from=build-env /github.com/layer5io/meshery-linkerd/meshery-linkerd .\n ---> b6074bde4085\nStep 23/23 : ENTRYPOINT [\"./meshery-linkerd\"]\n ---> Running in 7bb30a60b316\nRemoving intermediate container 7bb30a60b316\n ---> 20df01bb1d7c\nSuccessfully built 20df01bb1d7c\nSuccessfully tagged meshery-linkerd:latest\n","stderr":"","imageSize":171945626},"repair":{"violations":[{"name":"curlUseFlagF","position":{"start":14,"end":15,"columnStart":14,"columnEnd":72}}],"repairedDockerfile":"FROM golang:1.19 as build-env\nENV CGO_ENABLED=0\nARG VERSION\nARG GIT_COMMITSHA\nARG GIT_VERSION\nARG GIT_STRIPPED_VERSION\n\nWORKDIR /github.com/layer5io/meshery-linkerd\nCOPY go.mod go.sum ./\nRUN go mod download\nCOPY main.go main.go\nCOPY internal/ internal/\nCOPY linkerd/ linkerd/\nCOPY build/ build/\nRUN VERSION=$( curl -f -L -s \\\n    https://api.github.com/repos/meshery/meshery-linkerd/releases/latest | \\\n\tgrep tag_name | sed \"s/ *\\\"tag_name\\\": *\\\"\\\\(.*\\\\)\\\",*/\\\\1/\" | \\\n\tgrep -v \"rc\\.[0-9]$\" | head -n 1)\nRUN go mod tidy; CGO_ENABLED=0 GOOS=linux GO111MODULE=on go build \\\n\t-ldflags=\"-w -s -X main.version=$VERSION -X main.gitsha=$GIT_COMMITSHA\" \\\n\t-a -o meshery-linkerd main.go\n\n\n\n# Use distroless as minimal base image to package the manager binary\n# Refer to https://github.com/GoogleContainerTools/distroless for more details\nFROM gcr.io/distroless/nodejs:16\nENV DISTRO=\"debian\"\nENV SERVICE_ADDR=\"meshery-linkerd\"\nENV MESHERY_SERVER=\"http://meshery:9081\"\nWORKDIR /\nCOPY templates/ ./templates\nCOPY --from=build-env /github.com/layer5io/meshery-linkerd/meshery-linkerd .\nENTRYPOINT [\"./meshery-linkerd\"]\n"},"repairedBuild":{"startTimestamp":1672714580366,"endTimestamp":1672714795592,"error":null,"stdout":"Sending build context to Docker daemon  9.758MB\r\r\nStep 1/23 : FROM golang:1.19 as build-env\n ---> 6650307efe4a\nStep 2/23 : ENV CGO_ENABLED=0\n ---> Running in 8898d8077bcc\nRemoving intermediate container 8898d8077bcc\n ---> d12b6be66776\nStep 3/23 : ARG VERSION\n ---> Running in 9573adaf21c3\nRemoving intermediate container 9573adaf21c3\n ---> 9b98310ed9a9\nStep 4/23 : ARG GIT_COMMITSHA\n ---> Running in 710a3e065712\nRemoving intermediate container 710a3e065712\n ---> 0330c5bf8fa1\nStep 5/23 : ARG GIT_VERSION\n ---> Running in d368de771422\nRemoving intermediate container d368de771422\n ---> ab16f061335d\nStep 6/23 : ARG GIT_STRIPPED_VERSION\n ---> Running in a121d2c48d4e\nRemoving intermediate container a121d2c48d4e\n ---> ce48e2fa542c\nStep 7/23 : WORKDIR /github.com/layer5io/meshery-linkerd\n ---> Running in 4c24e7d8d093\nRemoving intermediate container 4c24e7d8d093\n ---> 1519e6e2d441\nStep 8/23 : COPY go.mod go.sum ./\n ---> 8e911b157894\nStep 9/23 : RUN go mod download\n ---> Running in 39e223c11713\nRemoving intermediate container 39e223c11713\n ---> d526ba51c561\nStep 10/23 : COPY main.go main.go\n ---> 030c72f20126\nStep 11/23 : COPY internal/ internal/\n ---> cf134e1d58ef\nStep 12/23 : COPY linkerd/ linkerd/\n ---> c9c8c632598d\nStep 13/23 : COPY build/ build/\n ---> 8f055f8361ea\nStep 14/23 : RUN VERSION=$( curl -f -L -s     https://api.github.com/repos/meshery/meshery-linkerd/releases/latest | \tgrep tag_name | sed \"s/ *\\\"tag_name\\\": *\\\"\\\\(.*\\\\)\\\",*/\\\\1/\" | \tgrep -v \"rc\\.[0-9]$\" | head -n 1)\n ---> Running in 7084392589eb\nRemoving intermediate container 7084392589eb\n ---> 00fc5396552b\nStep 15/23 : RUN go mod tidy; CGO_ENABLED=0 GOOS=linux GO111MODULE=on go build \t-ldflags=\"-w -s -X main.version=$VERSION -X main.gitsha=$GIT_COMMITSHA\" \t-a -o meshery-linkerd main.go\n ---> Running in f97c85497b14\n\u001b[91mgo: downloading gopkg.in/check.v1 v1.0.0-20201130134442-10cb98267c6c\ngo: downloading github.com/stretchr/testify v1.8.0\n\u001b[0m\u001b[91mgo: downloading github.com/go-git/go-git-fixtures/v4 v4.2.1\n\u001b[0m\u001b[91mgo: downloading github.com/rogpeppe/go-internal v1.8.1\n\u001b[0m\u001b[91mgo: downloading github.com/distribution/distribution/v3 v3.0.0-20220526142353-ffbd94cbe269\n\u001b[0m\u001b[91mgo: downloading github.com/phayes/freeport v0.0.0-20220201140144-74d24b5ae9f5\n\u001b[0m\u001b[91mgo: downloading github.com/DATA-DOG/go-sqlmock v1.5.0\n\u001b[0m\u001b[91mgo: downloading github.com/kr/pretty v0.2.1\n\u001b[0m\u001b[91mgo: downloading github.com/cockroachdb/apd v1.1.0\n\u001b[0m\u001b[91mgo: downloading github.com/gofrs/uuid v4.0.0+incompatible\n\u001b[0m\u001b[91mgo: downloading github.com/matryer/is v1.2.0\n\u001b[0m\u001b[91mgo: downloading github.com/gliderlabs/ssh v0.2.2\ngo: downloading github.com/armon/go-socks5 v0.0.0-20160902184237-e75332964ef5\n\u001b[0m\u001b[91mgo: downloading github.com/go-sql-driver/mysql v1.6.0\ngo: downloading github.com/gobuffalo/packr/v2 v2.8.3\n\u001b[0m\u001b[91mgo: downloading github.com/jackc/pgmock v0.0.0-20210724152146-4ad1a8207f65\n\u001b[0m\u001b[91mgo: downloading github.com/onsi/ginkgo/v2 v2.4.0\n\u001b[0m\u001b[91mgo: downloading github.com/onsi/gomega v1.23.0\n\u001b[0m\u001b[91mgo: downloading github.com/poy/onpar v0.0.0-20190519213022-ee068f8ea4d1\n\u001b[0m\u001b[91mgo: downloading github.com/ziutek/mymysql v1.5.4\n\u001b[0m\u001b[91mgo: downloading gotest.tools/v3 v3.0.3\n\u001b[0m\u001b[91mgo: downloading github.com/emicklei/proto v1.6.15\ngo: downloading github.com/protocolbuffers/txtpbfmt v0.0.0-20201118171849-f6a6b3f636fc\n\u001b[0m\u001b[91mgo: downloading github.com/docker/libtrust v0.0.0-20150114040149-fa567046d9b1\n\u001b[0m\u001b[91mgo: downloading github.com/creack/pty v1.1.11\n\u001b[0m\u001b[91mgo: downloading github.com/kr/text v0.2.0\n\u001b[0m\u001b[91mgo: downloading github.com/elazarl/goproxy v0.0.0-20180725130230-947c36da3153\n\u001b[0m\u001b[91mgo: downloading github.com/anmitsu/go-shlex v0.0.0-20161002113705-648efa622239\n\u001b[0m\u001b[91mgo: downloading github.com/Microsoft/hcsshim v0.9.3\n\u001b[0m\u001b[91mgo: downloading github.com/moby/sys/mountinfo v0.5.0\n\u001b[0m\u001b[91mgo: downloading github.com/golang/glog v0.0.0-20160126235308-23def4e6c14b\n\u001b[0m\u001b[91mgo: downloading github.com/pmezard/go-difflib v1.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/stretchr/objx v0.4.0\n\u001b[0m\u001b[91mgo: downloading gotest.tools v2.2.0+incompatible\n\u001b[0m\u001b[91mgo: downloading github.com/markbates/safe v1.0.1\ngo: downloading github.com/gobuffalo/logger v1.0.6\n\u001b[0m\u001b[91mgo: downloading github.com/karrick/godirwalk v1.16.1\ngo: downloading github.com/gobuffalo/packd v1.0.1\ngo: downloading github.com/markbates/errx v1.1.0\n\u001b[0m\u001b[91mgo: downloading github.com/markbates/oncer v1.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/bshuster-repo/logrus-logstash-hook v1.0.0\ngo: downloading github.com/Shopify/logrus-bugsnag v0.0.0-20171204204709-577dee27f20d\n\u001b[0m\u001b[91mgo: downloading github.com/bugsnag/bugsnag-go v0.0.0-20141110184014-b1d153021fcd\n\u001b[0m\u001b[91mgo: downloading github.com/yvasiyarov/gorelic v0.0.0-20141212073537-a9bba5b9ab50\n\u001b[0m\u001b[91mgo: downloading github.com/gorilla/handlers v1.5.1\n\u001b[0m\u001b[91mgo: downloading github.com/docker/go-events v0.0.0-20190806004212-e31b211e4f1c\n\u001b[0m\u001b[91mgo: downloading github.com/gomodule/redigo v1.8.2\n\u001b[0m\u001b[91mgo: downloading github.com/yvasiyarov/newrelic_platform_go v0.0.0-20140908184405-b21fdbd4370f\n\u001b[0m\u001b[91mgo: downloading github.com/yvasiyarov/go-metrics v0.0.0-20140926110328-57bccd1ccd43\n\u001b[0m\u001b[91mgo: downloading github.com/felixge/httpsnoop v1.0.1\n\u001b[0m\u001b[91mgo: downloading github.com/bugsnag/panicwrap v0.0.0-20151223152923-e2c28503fcd0\n\u001b[0m\u001b[91mgo: downloading github.com/onsi/ginkgo v1.16.4\n\u001b[0m\u001b[91mgo: downloading github.com/bugsnag/osext v0.0.0-20130617224835-0dd3f918b21b\n\u001b[0m\u001b[91mgo: downloading go.opencensus.io v0.23.0\n\u001b[0m\u001b[91mgo: downloading github.com/containerd/cgroups v1.0.3\n\u001b[0m\u001b[91mgo: downloading github.com/golang/groupcache v0.0.0-20210331224755-41bb18bfe9da\n\u001b[0mRemoving intermediate container f97c85497b14\n ---> d82be0b646fb\nStep 16/23 : FROM gcr.io/distroless/nodejs:16\n ---> 37d336bef6f0\nStep 17/23 : ENV DISTRO=\"debian\"\n ---> Running in b3e9d43ab3c7\nRemoving intermediate container b3e9d43ab3c7\n ---> 18ef5fe76fa5\nStep 18/23 : ENV SERVICE_ADDR=\"meshery-linkerd\"\n ---> Running in c1cbb13aa202\nRemoving intermediate container c1cbb13aa202\n ---> bb467181b304\nStep 19/23 : ENV MESHERY_SERVER=\"http://meshery:9081\"\n ---> Running in 0ddb6e3d0af3\nRemoving intermediate container 0ddb6e3d0af3\n ---> c909829898bc\nStep 20/23 : WORKDIR /\n ---> Running in 7b82d0f8ee42\nRemoving intermediate container 7b82d0f8ee42\n ---> ac40bb71e080\nStep 21/23 : COPY templates/ ./templates\n ---> c72f356c1cdf\nStep 22/23 : COPY --from=build-env /github.com/layer5io/meshery-linkerd/meshery-linkerd .\n ---> a5aa4f8e4859\nStep 23/23 : ENTRYPOINT [\"./meshery-linkerd\"]\n ---> Running in 610acaa38ab4\nRemoving intermediate container 610acaa38ab4\n ---> 912fba2d1b4c\nSuccessfully built 912fba2d1b4c\nSuccessfully tagged meshery-linkerd:latest\n","stderr":"","imageSize":171945626},"endTime":1672714796736}