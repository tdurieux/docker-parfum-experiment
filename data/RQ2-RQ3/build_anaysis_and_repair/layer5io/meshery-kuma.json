{"repository":"https://github.com/layer5io/meshery-kuma","dockerfilePath":"Dockerfile","startTime":1672688045301,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/layer5io/meshery-kuma'...\n","error":null,"commit":"de8fe21b9ce037e428c40b6dbc6ef23d13b137be"},"originalBuild":{"startTimestamp":1672688046330,"endTimestamp":1672688230983,"error":null,"stdout":"Sending build context to Docker daemon  4.221MB\r\r\nStep 1/20 : FROM golang:1.19 as builder\n1.19: Pulling from library/golang\n32de3c850997: Already exists\nfa1d4c8d85a4: Already exists\nc796299bbbdd: Already exists\n81283a9569ad: Already exists\nc768848b86a2: Pulling fs layer\n3a3324c1d283: Pulling fs layer\nea43a17566db: Pulling fs layer\nea43a17566db: Download complete\nc768848b86a2: Verifying Checksum\nc768848b86a2: Download complete\n3a3324c1d283: Verifying Checksum\n3a3324c1d283: Download complete\nc768848b86a2: Pull complete\n3a3324c1d283: Pull complete\nea43a17566db: Pull complete\nDigest: sha256:660f138b4477001d65324a51fa158c1b868651b44e43f0953bf062e9f38b72f3\nStatus: Downloaded newer image for golang:1.19\n ---> 6650307efe4a\nStep 2/20 : ARG VERSION\n ---> Running in 5b991f0f204f\nRemoving intermediate container 5b991f0f204f\n ---> 7e5ec9439a76\nStep 3/20 : ARG GIT_COMMITSHA\n ---> Running in 8d6faca3819b\nRemoving intermediate container 8d6faca3819b\n ---> 64fac19bda48\nStep 4/20 : WORKDIR /build\n ---> Running in 40a420af140b\nRemoving intermediate container 40a420af140b\n ---> 07481f4bf4e9\nStep 5/20 : COPY go.mod go.mod\n ---> b43d615a5559\nStep 6/20 : COPY go.sum go.sum\n ---> 2c2356486b4c\nStep 7/20 : RUN GOPROXY=https://proxy.golang.org,direct go mod download\n ---> Running in 3aa57007f289\nRemoving intermediate container 3aa57007f289\n ---> 7cdda96c12d3\nStep 8/20 : COPY main.go main.go\n ---> a0b72a20fb4c\nStep 9/20 : COPY internal/ internal/\n ---> f9aacbe15698\nStep 10/20 : COPY kuma/ kuma/\n ---> 421b2f348351\nStep 11/20 : COPY build/ build/\n ---> 9bbdb6bb3765\nStep 12/20 : RUN GOPROXY=https://proxy.golang.org,direct CGO_ENABLED=1 GOOS=linux GO111MODULE=on go build -ldflags=\"-w -s -X main.version=$VERSION -X main.gitsha=$GIT_COMMITSHA\" -a -o meshery-kuma main.go\n ---> Running in c2e26cbde338\nRemoving intermediate container c2e26cbde338\n ---> a975bcd08640\nStep 13/20 : FROM gcr.io/distroless/nodejs:latest\nlatest: Pulling from distroless/nodejs\nfc251a6e7981: Pulling fs layer\nfda4ba87f6fb: Pulling fs layer\na1f1879bb7de: Pulling fs layer\na02cc7e9cd7d: Pulling fs layer\na02cc7e9cd7d: Waiting\na1f1879bb7de: Verifying Checksum\na1f1879bb7de: Download complete\nfc251a6e7981: Verifying Checksum\nfc251a6e7981: Download complete\nfda4ba87f6fb: Verifying Checksum\nfda4ba87f6fb: Download complete\nfc251a6e7981: Pull complete\nfda4ba87f6fb: Pull complete\na1f1879bb7de: Pull complete\na02cc7e9cd7d: Verifying Checksum\na02cc7e9cd7d: Download complete\na02cc7e9cd7d: Pull complete\nDigest: sha256:039aeeddc00d285be1a32d41648d3941cbdaab05cce03344a1267f49cce464d3\nStatus: Downloaded newer image for gcr.io/distroless/nodejs:latest\n ---> 494d034f1f6d\nStep 14/20 : WORKDIR /\n ---> Running in 7ec1d63c8d52\nRemoving intermediate container 7ec1d63c8d52\n ---> ec4d7f8fb4fe\nStep 15/20 : ENV DISTRO=\"debian\"\n ---> Running in cd2896e4f0ba\nRemoving intermediate container cd2896e4f0ba\n ---> 05a74c1b423e\nStep 16/20 : ENV SERVICE_ADDR=\"meshery-kuma\"\n ---> Running in 64c398f3cd7e\nRemoving intermediate container 64c398f3cd7e\n ---> ed7464c66d1c\nStep 17/20 : ENV MESHERY_SERVER=\"http://meshery:9081\"\n ---> Running in 4732734f797e\nRemoving intermediate container 4732734f797e\n ---> 994a4995d188\nStep 18/20 : COPY templates/ ./templates\n ---> 75d3d35966dc\nStep 19/20 : COPY --from=builder /build/meshery-kuma .\n ---> 70167a30387a\nStep 20/20 : ENTRYPOINT [\"/meshery-kuma\"]\n ---> Running in 3b6e5d7c9b07\nRemoving intermediate container 3b6e5d7c9b07\n ---> 6c1434f62911\nSuccessfully built 6c1434f62911\nSuccessfully tagged meshery-kuma:latest\n","stderr":"","imageSize":230032013},"repair":{"violations":[],"repairedDockerfile":"FROM golang:1.19 as builder\n\nARG VERSION\nARG GIT_COMMITSHA\nWORKDIR /build\n# Copy the Go Modules manifests\nCOPY go.mod go.mod\nCOPY go.sum go.sum\n# cache deps before building and copying source so that we don't need to re-download as much\n# and so that source changes don't invalidate our downloaded layer\nRUN GOPROXY=https://proxy.golang.org,direct go mod download\n# Copy the go source\nCOPY main.go main.go\nCOPY internal/ internal/\nCOPY kuma/ kuma/\nCOPY build/ build/\n# Build\nRUN GOPROXY=https://proxy.golang.org,direct CGO_ENABLED=1 GOOS=linux GO111MODULE=on go build -ldflags=\"-w -s -X main.version=$VERSION -X main.gitsha=$GIT_COMMITSHA\" -a -o meshery-kuma main.go\n\n# Use distroless as minimal base image to package the manager binary\n# Refer to https://github.com/GoogleContainerTools/distroless for more details\nFROM gcr.io/distroless/nodejs:latest\nWORKDIR /\nENV DISTRO=\"debian\"\nENV SERVICE_ADDR=\"meshery-kuma\"\nENV MESHERY_SERVER=\"http://meshery:9081\"\nCOPY templates/ ./templates\nCOPY --from=builder /build/meshery-kuma .\nENTRYPOINT [\"/meshery-kuma\"]\n"},"endTime":1672688231293}