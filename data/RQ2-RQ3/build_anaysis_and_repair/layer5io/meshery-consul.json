{"repository":"https://github.com/layer5io/meshery-consul","dockerfilePath":"Dockerfile","startTime":1672649935763,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/layer5io/meshery-consul'...\n","error":null,"commit":"db1321ef3a35b0321d46e49cb8e64d097110d225"},"originalBuild":{"startTimestamp":1672649936759,"endTimestamp":1672650084526,"error":null,"stdout":"Sending build context to Docker daemon  2.328MB\r\r\nStep 1/25 : FROM golang:1.19 as builder\n1.19: Pulling from library/golang\n32de3c850997: Already exists\nfa1d4c8d85a4: Already exists\nc796299bbbdd: Already exists\n81283a9569ad: Already exists\nc768848b86a2: Pulling fs layer\n3a3324c1d283: Pulling fs layer\nea43a17566db: Pulling fs layer\nea43a17566db: Download complete\nc768848b86a2: Verifying Checksum\nc768848b86a2: Download complete\n3a3324c1d283: Verifying Checksum\n3a3324c1d283: Download complete\nc768848b86a2: Pull complete\n3a3324c1d283: Pull complete\nea43a17566db: Pull complete\nDigest: sha256:660f138b4477001d65324a51fa158c1b868651b44e43f0953bf062e9f38b72f3\nStatus: Downloaded newer image for golang:1.19\n ---> 6650307efe4a\nStep 2/25 : ARG VERSION\n ---> Running in 92db326d13ff\nRemoving intermediate container 92db326d13ff\n ---> 5ea80c9d6078\nStep 3/25 : ARG GIT_COMMITSHA\n ---> Running in 8ca207ae9281\nRemoving intermediate container 8ca207ae9281\n ---> b9a064a1bcf3\nStep 4/25 : WORKDIR /build\n ---> Running in 42a08d216ad1\nRemoving intermediate container 42a08d216ad1\n ---> d41817a1d35d\nStep 5/25 : COPY go.mod go.mod\n ---> 718db078c155\nStep 6/25 : COPY go.sum go.sum\n ---> 9a73e6e5bda4\nStep 7/25 : RUN GOPROXY=https://proxy.golang.org,direct go mod download\n ---> Running in e36fa9dd8ad5\nRemoving intermediate container e36fa9dd8ad5\n ---> ad40ba247767\nStep 8/25 : COPY main.go main.go\n ---> 392c796032a2\nStep 9/25 : COPY internal/ internal/\n ---> d83e0a4338d1\nStep 10/25 : COPY consul/ consul/\n ---> 3e32c266fcea\nStep 11/25 : COPY build/ build/\n ---> 37ef8ca1f3fe\nStep 12/25 : RUN GOPROXY=https://proxy.golang.org,direct CGO_ENABLED=0 GOOS=linux GO111MODULE=on go build -ldflags=\"-w -s -X main.version=$VERSION -X main.gitsha=$GIT_COMMITSHA\" -a -o meshery-consul main.go\n ---> Running in 0550ab6e8d2c\nRemoving intermediate container 0550ab6e8d2c\n ---> 73452f201d69\nStep 13/25 : FROM alpine:3.15\n3.15: Pulling from library/alpine\n9621f1afde84: Pulling fs layer\n9621f1afde84: Verifying Checksum\n9621f1afde84: Download complete\n9621f1afde84: Pull complete\nDigest: sha256:cf34c62ee8eb3fe8aa24c1fab45d7e9d12768d945c3f5a6fd6a63d901e898479\nStatus: Downloaded newer image for alpine:3.15\n ---> c4fc93816858\nStep 14/25 : RUN addgroup -S appgroup && adduser -S appuser -G appgroup\n ---> Running in 889e865280e6\nRemoving intermediate container 889e865280e6\n ---> e11ade6e1a56\nStep 15/25 : RUN apk --update add ca-certificates &&     mkdir /lib64 &&     ln -s /lib/libc.musl-x86_64.so.1 /lib64/ld-linux-x86-64.so.2\n ---> Running in 732f6a8ec8fc\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/community/x86_64/APKINDEX.tar.gz\n(1/1) Installing ca-certificates (20220614-r0)\nExecuting busybox-1.34.1-r7.trigger\nExecuting ca-certificates-20220614-r0.trigger\nOK: 6 MiB in 15 packages\nRemoving intermediate container 732f6a8ec8fc\n ---> cbad109049c0\nStep 16/25 : USER appuser\n ---> Running in 3f102a34de7b\nRemoving intermediate container 3f102a34de7b\n ---> ae79f9f28e03\nStep 17/25 : ENV SERVICE_ADDR=\"meshery-consul\"\n ---> Running in 179b9b5829b7\nRemoving intermediate container 179b9b5829b7\n ---> 15b730e43834\nStep 18/25 : ENV MESHERY_SERVER=\"http://meshery:9081\"\n ---> Running in 20c521e57f9a\nRemoving intermediate container 20c521e57f9a\n ---> a5eab1c6120c\nStep 19/25 : RUN mkdir -p /home/appuser/.kube\n ---> Running in a979735d6ee3\nRemoving intermediate container a979735d6ee3\n ---> 2261eceeaddf\nStep 20/25 : RUN mkdir -p /home/appuser/.meshery\n ---> Running in 1b04cbe45f14\nRemoving intermediate container 1b04cbe45f14\n ---> d85fc5b00f44\nStep 21/25 : WORKDIR /home/appuser\n ---> Running in 61b36b25c3fc\nRemoving intermediate container 61b36b25c3fc\n ---> 2b383513081d\nStep 22/25 : COPY templates/ ./templates\n ---> ee2ecd5294c4\nStep 23/25 : COPY --from=builder /build/meshery-consul /home/appuser\n ---> 039724d16c36\nStep 24/25 : COPY consul /home/appuser/consul\n ---> 61faaaea306d\nStep 25/25 : CMD ./meshery-consul\n ---> Running in 653ecd0cf13d\nRemoving intermediate container 653ecd0cf13d\n ---> d44819f27175\nSuccessfully built d44819f27175\nSuccessfully tagged meshery-consul:latest\n","stderr":"","imageSize":63353473},"repair":{"violations":[{"name":"apkAddUseNoCache","position":{"start":21,"end":21,"columnStart":4,"columnEnd":36}}],"repairedDockerfile":"FROM golang:1.19 as builder\n\nARG VERSION\nARG GIT_COMMITSHA\nWORKDIR /build\n# Copy the Go Modules manifests\nCOPY go.mod go.mod\nCOPY go.sum go.sum\n# cache deps before building and copying source so that we don't need to re-download as much\n# and so that source changes don't invalidate our downloaded layer\nRUN GOPROXY=https://proxy.golang.org,direct go mod download\n# Copy the go source\nCOPY main.go main.go\nCOPY internal/ internal/\nCOPY consul/ consul/\nCOPY build/ build/\n\nRUN GOPROXY=https://proxy.golang.org,direct CGO_ENABLED=0 GOOS=linux GO111MODULE=on go build -ldflags=\"-w -s -X main.version=$VERSION -X main.gitsha=$GIT_COMMITSHA\" -a -o meshery-consul main.go\n\nFROM alpine:3.15\nRUN addgroup -S appgroup && adduser -S appuser -G appgroup\nRUN apk --update --no-cache add ca-certificates && \\\n    mkdir /lib64 && \\\n    ln -s /lib/libc.musl-x86_64.so.1 /lib64/ld-linux-x86-64.so.2\n\nUSER appuser\nENV SERVICE_ADDR=\"meshery-consul\"\nENV MESHERY_SERVER=\"http://meshery:9081\"\nRUN mkdir -p /home/appuser/.kube\nRUN mkdir -p /home/appuser/.meshery\nWORKDIR /home/appuser\nCOPY templates/ ./templates\nCOPY --from=builder /build/meshery-consul /home/appuser\nCOPY consul /home/appuser/consul\nCMD ./meshery-consul\n"},"repairedBuild":{"startTimestamp":1672650085334,"endTimestamp":1672650182131,"error":null,"stdout":"Sending build context to Docker daemon  2.328MB\r\r\nStep 1/25 : FROM golang:1.19 as builder\n ---> 6650307efe4a\nStep 2/25 : ARG VERSION\n ---> Running in 6d60fb79c0b9\nRemoving intermediate container 6d60fb79c0b9\n ---> 2aecbeab8226\nStep 3/25 : ARG GIT_COMMITSHA\n ---> Running in 6559bc2fe0f1\nRemoving intermediate container 6559bc2fe0f1\n ---> ce76c5eb51a3\nStep 4/25 : WORKDIR /build\n ---> Running in 5327c246c6a0\nRemoving intermediate container 5327c246c6a0\n ---> 20f7c19d19a7\nStep 5/25 : COPY go.mod go.mod\n ---> b5d184f9c0d5\nStep 6/25 : COPY go.sum go.sum\n ---> 6a49eecec778\nStep 7/25 : RUN GOPROXY=https://proxy.golang.org,direct go mod download\n ---> Running in 90e394a9b2a2\nRemoving intermediate container 90e394a9b2a2\n ---> c91d3b1843d7\nStep 8/25 : COPY main.go main.go\n ---> 65f7c616b569\nStep 9/25 : COPY internal/ internal/\n ---> fc48226bc41f\nStep 10/25 : COPY consul/ consul/\n ---> 8d240818b884\nStep 11/25 : COPY build/ build/\n ---> 37b0f1ca3a26\nStep 12/25 : RUN GOPROXY=https://proxy.golang.org,direct CGO_ENABLED=0 GOOS=linux GO111MODULE=on go build -ldflags=\"-w -s -X main.version=$VERSION -X main.gitsha=$GIT_COMMITSHA\" -a -o meshery-consul main.go\n ---> Running in b15a672cf864\nRemoving intermediate container b15a672cf864\n ---> 725ba8f29d19\nStep 13/25 : FROM alpine:3.15\n ---> c4fc93816858\nStep 14/25 : RUN addgroup -S appgroup && adduser -S appuser -G appgroup\n ---> Running in 8c4f5153d7cf\nRemoving intermediate container 8c4f5153d7cf\n ---> f277889606ee\nStep 15/25 : RUN apk --update --no-cache add ca-certificates &&     mkdir /lib64 &&     ln -s /lib/libc.musl-x86_64.so.1 /lib64/ld-linux-x86-64.so.2\n ---> Running in dc2ee0d8ea7c\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/community/x86_64/APKINDEX.tar.gz\n(1/1) Installing ca-certificates (20220614-r0)\nExecuting busybox-1.34.1-r7.trigger\nExecuting ca-certificates-20220614-r0.trigger\nOK: 6 MiB in 15 packages\nRemoving intermediate container dc2ee0d8ea7c\n ---> f2a22821f1b9\nStep 16/25 : USER appuser\n ---> Running in ef0e9d908b2a\nRemoving intermediate container ef0e9d908b2a\n ---> a59be5a9cd57\nStep 17/25 : ENV SERVICE_ADDR=\"meshery-consul\"\n ---> Running in afb43ad02b96\nRemoving intermediate container afb43ad02b96\n ---> 3f6c8e712599\nStep 18/25 : ENV MESHERY_SERVER=\"http://meshery:9081\"\n ---> Running in b9cc9a398476\nRemoving intermediate container b9cc9a398476\n ---> 66fb8a181698\nStep 19/25 : RUN mkdir -p /home/appuser/.kube\n ---> Running in cad247891138\nRemoving intermediate container cad247891138\n ---> 4a796f53bca3\nStep 20/25 : RUN mkdir -p /home/appuser/.meshery\n ---> Running in c0a42bd53a2a\nRemoving intermediate container c0a42bd53a2a\n ---> 1d8527b3eb74\nStep 21/25 : WORKDIR /home/appuser\n ---> Running in 17449f1a4812\nRemoving intermediate container 17449f1a4812\n ---> d871a53f984c\nStep 22/25 : COPY templates/ ./templates\n ---> ec30ce80f250\nStep 23/25 : COPY --from=builder /build/meshery-consul /home/appuser\n ---> 73d920e60fb7\nStep 24/25 : COPY consul /home/appuser/consul\n ---> 2fc1ee909c77\nStep 25/25 : CMD ./meshery-consul\n ---> Running in f6658b5065ee\nRemoving intermediate container f6658b5065ee\n ---> df10d856b9fc\nSuccessfully built df10d856b9fc\nSuccessfully tagged meshery-consul:latest\n","stderr":"","imageSize":61057665},"endTime":1672650182429}