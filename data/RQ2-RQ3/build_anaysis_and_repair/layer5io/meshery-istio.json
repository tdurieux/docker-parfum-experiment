{"repository":"https://github.com/layer5io/meshery-istio","dockerfilePath":"Dockerfile","startTime":1672291507755,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/layer5io/meshery-istio'...\n","error":null,"commit":"9c7d3517253066921fe7d4293541c4a67dc57f1c"},"originalBuild":{"startTimestamp":1672291508941,"endTimestamp":1672291815960,"error":null,"stdout":"Sending build context to Docker daemon   34.9MB\r\r\nStep 1/20 : FROM golang:1.19 as builder\n ---> 6650307efe4a\nStep 2/20 : ARG VERSION\n ---> Running in b0f27979844d\nRemoving intermediate container b0f27979844d\n ---> c281dbbd2930\nStep 3/20 : ARG GIT_COMMITSHA\n ---> Running in abf31a7d2911\nRemoving intermediate container abf31a7d2911\n ---> 9142c798b911\nStep 4/20 : WORKDIR /build\n ---> Running in fb2f2d0b949e\nRemoving intermediate container fb2f2d0b949e\n ---> 108dc1533a9c\nStep 5/20 : COPY go.mod go.mod\n ---> 665fc5156ebe\nStep 6/20 : COPY go.sum go.sum\n ---> d335718b9939\nStep 7/20 : RUN go mod download\n ---> Running in ed7a405530ef\nRemoving intermediate container ed7a405530ef\n ---> 40b0af983dfa\nStep 8/20 : COPY main.go main.go\n ---> c33bc2976848\nStep 9/20 : COPY internal/ internal/\n ---> fc23a2bf42d0\nStep 10/20 : COPY istio/ istio/\n ---> 693ca24b2aac\nStep 11/20 : COPY build/ build/\n ---> 649c764c8d53\nStep 12/20 : RUN GOPROXY=direct,https://proxy.golang.org CGO_ENABLED=0 GOOS=linux GO111MODULE=on go build -ldflags=\"-w -s -X main.version=$VERSION -X main.gitsha=$GIT_COMMITSHA\" -a -o meshery-istio main.go\n ---> Running in c93b601e0bed\nRemoving intermediate container c93b601e0bed\n ---> 274ee68a1702\nStep 13/20 : FROM gcr.io/distroless/nodejs:16\n16: Pulling from distroless/nodejs\nfc251a6e7981: Pulling fs layer\nfda4ba87f6fb: Pulling fs layer\na1f1879bb7de: Pulling fs layer\n51dfcb876247: Pulling fs layer\n51dfcb876247: Waiting\nfc251a6e7981: Verifying Checksum\nfc251a6e7981: Download complete\na1f1879bb7de: Verifying Checksum\na1f1879bb7de: Download complete\nfda4ba87f6fb: Verifying Checksum\nfda4ba87f6fb: Download complete\n51dfcb876247: Verifying Checksum\n51dfcb876247: Download complete\nfc251a6e7981: Pull complete\nfda4ba87f6fb: Pull complete\na1f1879bb7de: Pull complete\n51dfcb876247: Pull complete\nDigest: sha256:4e52ed00e9d6ae22d503d0504666e4ffbad39d6c756f52308022a0845bf230fa\nStatus: Downloaded newer image for gcr.io/distroless/nodejs:16\n ---> 37d336bef6f0\nStep 14/20 : ENV DISTRO=\"debian\"\n ---> Running in 0fac79d02a58\nRemoving intermediate container 0fac79d02a58\n ---> 5e0ea97893f4\nStep 15/20 : ENV SERVICE_ADDR=\"meshery-istio\"\n ---> Running in 64eb13dd1dfe\nRemoving intermediate container 64eb13dd1dfe\n ---> 6d4ae05d5b97\nStep 16/20 : ENV MESHERY_SERVER=\"http://meshery:9081\"\n ---> Running in 71ddf18609c8\nRemoving intermediate container 71ddf18609c8\n ---> 4cba3ef0a6fc\nStep 17/20 : COPY templates/ ./templates\n ---> 7e9416f9a64d\nStep 18/20 : WORKDIR /\n ---> Running in 03fcfab319b2\nRemoving intermediate container 03fcfab319b2\n ---> 2a1948f05e43\nStep 19/20 : COPY --from=builder /build/meshery-istio .\n ---> 70b0866979f1\nStep 20/20 : ENTRYPOINT [\"/meshery-istio\"]\n ---> Running in 6d1ca5087b55\nRemoving intermediate container 6d1ca5087b55\n ---> 52fb2e29f7c9\nSuccessfully built 52fb2e29f7c9\nSuccessfully tagged meshery-istio:latest\n","stderr":"","imageSize":197849250},"repair":{"violations":[],"repairedDockerfile":"FROM golang:1.19 as builder\n\nARG VERSION\nARG GIT_COMMITSHA\nWORKDIR /build\n# Copy the Go Modules manifests\nCOPY go.mod go.mod\nCOPY go.sum go.sum\n# cache deps before building and copying source so that we don't need to re-download as much\n# and so that source changes don't invalidate our downloaded layer\nRUN go mod download\n# Copy the go source\nCOPY main.go main.go\nCOPY internal/ internal/\nCOPY istio/ istio/\n# Build\nCOPY build/ build/\nRUN GOPROXY=direct,https://proxy.golang.org CGO_ENABLED=0 GOOS=linux GO111MODULE=on go build -ldflags=\"-w -s -X main.version=$VERSION -X main.gitsha=$GIT_COMMITSHA\" -a -o meshery-istio main.go\n\n\n# Use distroless as minimal base image to package the manager binary\n# Refer to https://github.com/GoogleContainerTools/distroless for more details\nFROM gcr.io/distroless/nodejs:16\nENV DISTRO=\"debian\"\nENV SERVICE_ADDR=\"meshery-istio\"\nENV MESHERY_SERVER=\"http://meshery:9081\"\nCOPY templates/ ./templates\nWORKDIR /\nCOPY --from=builder /build/meshery-istio .\nENTRYPOINT [\"/meshery-istio\"]\n"},"endTime":1672291816437}