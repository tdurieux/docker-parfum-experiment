{"repository":"https://github.com/boringproxy/boringproxy","dockerfilePath":"Dockerfile","startTime":1672215890491,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/boringproxy/boringproxy'...\n","error":null,"commit":"658a8841d78c0f891f288d52434f4d2a66378686"},"originalBuild":{"startTimestamp":1672215891410,"endTimestamp":1672215953300,"error":null,"stdout":"Sending build context to Docker daemon  257.5kB\r\r\nStep 1/21 : FROM golang:1.17-alpine3.15 as builder\n1.17-alpine3.15: Pulling from library/golang\nab6db1bc80d0: Pulling fs layer\n485d0e322d2f: Pulling fs layer\n1ba77e793143: Pulling fs layer\nc110c32fa8dc: Pulling fs layer\n32efda097915: Pulling fs layer\nc110c32fa8dc: Waiting\n32efda097915: Waiting\nab6db1bc80d0: Verifying Checksum\n1ba77e793143: Verifying Checksum\n1ba77e793143: Download complete\n485d0e322d2f: Verifying Checksum\n485d0e322d2f: Download complete\nab6db1bc80d0: Pull complete\n485d0e322d2f: Pull complete\n1ba77e793143: Pull complete\n32efda097915: Verifying Checksum\n32efda097915: Download complete\nc110c32fa8dc: Download complete\nc110c32fa8dc: Pull complete\n32efda097915: Pull complete\nDigest: sha256:543b0922baa147b87a568968462a9586e94b588426f51396a2666590cfba327a\nStatus: Downloaded newer image for golang:1.17-alpine3.15\n ---> 675faa0f5534\nStep 2/21 : LABEL boringproxy=builder\n ---> Running in 3d415b5e3160\nRemoving intermediate container 3d415b5e3160\n ---> 24a5cf6264a7\nStep 3/21 : ARG VERSION\n ---> Running in 6e4ade23f19c\nRemoving intermediate container 6e4ade23f19c\n ---> 1eef0938c48f\nStep 4/21 : ARG GOOS=\"linux\"\n ---> Running in 2ffb69decc49\nRemoving intermediate container 2ffb69decc49\n ---> debfc5e51fdc\nStep 5/21 : ARG GOARCH=\"amd64\"\n ---> Running in ce2c34b76deb\nRemoving intermediate container ce2c34b76deb\n ---> 57ea377455c3\nStep 6/21 : ARG BRANCH=\"master\"\n ---> Running in 4f1708e5997b\nRemoving intermediate container 4f1708e5997b\n ---> 8870775f0fc8\nStep 7/21 : ARG REPO=\"https://github.com/boringproxy/boringproxy.git\"\n ---> Running in bfbf349492f4\nRemoving intermediate container bfbf349492f4\n ---> d16b664ecebb\nStep 8/21 : ARG ORIGIN='local'\n ---> Running in 9aeb4ac60ece\nRemoving intermediate container 9aeb4ac60ece\n ---> 2f6d11e6da75\nStep 9/21 : WORKDIR /build\n ---> Running in 3372e43a8cdd\nRemoving intermediate container 3372e43a8cdd\n ---> 1287bda9c603\nStep 10/21 : RUN apk add git\n ---> Running in 7e4781a230fc\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/community/x86_64/APKINDEX.tar.gz\n(1/6) Installing brotli-libs (1.0.9-r5)\n(2/6) Installing nghttp2-libs (1.46.0-r0)\n(3/6) Installing libcurl (7.80.0-r5)\n(4/6) Installing expat (2.5.0-r0)\n(5/6) Installing pcre2 (10.40-r0)\n(6/6) Installing git (2.34.5-r0)\nExecuting busybox-1.34.1-r7.trigger\nOK: 19 MiB in 21 packages\nRemoving intermediate container 7e4781a230fc\n ---> 5db03e360070\nStep 11/21 : RUN if [[ \"ORIGIN\" == 'remote' ]] ; then git clone --depth 1 --branch \"${BRANCH}\" ${REPO}; fi\n ---> Running in ae673868fb45\nRemoving intermediate container ae673868fb45\n ---> 09cc36ada63b\nStep 12/21 : COPY go.* ./\n ---> a6846bac1d71\nStep 13/21 : RUN go mod download\n ---> Running in 643da6034393\nRemoving intermediate container 643da6034393\n ---> e69d93796739\nStep 14/21 : COPY . .\n ---> 4ce01cf65906\nStep 15/21 : RUN cd cmd/boringproxy && CGO_ENABLED=0 GOOS=${GOOS} GOARCH=${GOARCH} \tgo build -ldflags \"-X main.Version=${VERSION}\" \t-o boringproxy\n ---> Running in 74b3a198623b\nRemoving intermediate container 74b3a198623b\n ---> f1589518fbcc\nStep 16/21 : FROM scratch\n ---> \nStep 17/21 : EXPOSE 80 443\n ---> Running in 29c1c179ec35\nRemoving intermediate container 29c1c179ec35\n ---> bf1a2fff6032\nStep 18/21 : WORKDIR /storage\n ---> Running in 91bd2c689abc\nRemoving intermediate container 91bd2c689abc\n ---> 173350fc76f4\nStep 19/21 : COPY --from=builder /build/cmd/boringproxy/boringproxy /\n ---> db7f9157db0b\nStep 20/21 : ENTRYPOINT [\"/boringproxy\"]\n ---> Running in 54c66f98ca7b\nRemoving intermediate container 54c66f98ca7b\n ---> cce108277e93\nStep 21/21 : CMD [\"version\"]\n ---> Running in a77aaf4ce3ae\nRemoving intermediate container a77aaf4ce3ae\n ---> c00941d23efa\nSuccessfully built c00941d23efa\nSuccessfully tagged boringproxy:latest\n","stderr":"","imageSize":13311071},"repair":{"violations":[{"name":"apkAddUseNoCache","position":{"start":12,"end":12,"columnStart":4,"columnEnd":15}}],"repairedDockerfile":"FROM golang:1.17-alpine3.15 as builder\nLABEL boringproxy=builder\n\nARG VERSION\nARG GOOS=\"linux\"\nARG GOARCH=\"amd64\"\nARG BRANCH=\"master\"\nARG REPO=\"https://github.com/boringproxy/boringproxy.git\"\nARG ORIGIN='local'\n\nWORKDIR /build\n\nRUN apk add --no-cache git\n\nRUN if [[ \"ORIGIN\" == 'remote' ]] ; then \\\n git clone --depth 1 --branch \"${BRANCH}\" ${REPO}; fi\n\nCOPY go.* ./\nRUN go mod download\nCOPY . .\n\nRUN cd cmd/boringproxy && CGO_ENABLED=0 GOOS=${GOOS} GOARCH=${GOARCH} \\\n\tgo build -ldflags \"-X main.Version=${VERSION}\" \\\n\t-o boringproxy\n\nFROM scratch\nEXPOSE 80 443\nWORKDIR /storage\n\nCOPY --from=builder /build/cmd/boringproxy/boringproxy /\n\nENTRYPOINT [\"/boringproxy\"]\nCMD [\"version\"]"},"repairedBuild":{"startTimestamp":1672215953595,"endTimestamp":1672215997684,"error":null,"stdout":"Sending build context to Docker daemon  257.5kB\r\r\nStep 1/21 : FROM golang:1.17-alpine3.15 as builder\n ---> 675faa0f5534\nStep 2/21 : LABEL boringproxy=builder\n ---> Running in 234267aeff00\nRemoving intermediate container 234267aeff00\n ---> 5b419fe5236e\nStep 3/21 : ARG VERSION\n ---> Running in 2c538760e6d3\nRemoving intermediate container 2c538760e6d3\n ---> d5cd5650d5ae\nStep 4/21 : ARG GOOS=\"linux\"\n ---> Running in 8892d3c20c99\nRemoving intermediate container 8892d3c20c99\n ---> 1e742d53e10c\nStep 5/21 : ARG GOARCH=\"amd64\"\n ---> Running in 56af2149e168\nRemoving intermediate container 56af2149e168\n ---> e19ee7328a10\nStep 6/21 : ARG BRANCH=\"master\"\n ---> Running in 18390374eb73\nRemoving intermediate container 18390374eb73\n ---> 58d741e3dbe1\nStep 7/21 : ARG REPO=\"https://github.com/boringproxy/boringproxy.git\"\n ---> Running in e8beeddd8556\nRemoving intermediate container e8beeddd8556\n ---> 8226e83734ab\nStep 8/21 : ARG ORIGIN='local'\n ---> Running in d3d338aeeefd\nRemoving intermediate container d3d338aeeefd\n ---> ceb9d3f371bb\nStep 9/21 : WORKDIR /build\n ---> Running in 57c07d7dca4d\nRemoving intermediate container 57c07d7dca4d\n ---> 486c9ee0b6ce\nStep 10/21 : RUN apk add --no-cache git\n ---> Running in 739736bb798c\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/community/x86_64/APKINDEX.tar.gz\n(1/6) Installing brotli-libs (1.0.9-r5)\n(2/6) Installing nghttp2-libs (1.46.0-r0)\n(3/6) Installing libcurl (7.80.0-r5)\n(4/6) Installing expat (2.5.0-r0)\n(5/6) Installing pcre2 (10.40-r0)\n(6/6) Installing git (2.34.5-r0)\nExecuting busybox-1.34.1-r7.trigger\nOK: 19 MiB in 21 packages\nRemoving intermediate container 739736bb798c\n ---> 9669efc2151a\nStep 11/21 : RUN if [[ \"ORIGIN\" == 'remote' ]] ; then  git clone --depth 1 --branch \"${BRANCH}\" ${REPO}; fi\n ---> Running in 271d1993edf1\nRemoving intermediate container 271d1993edf1\n ---> 446a142916ef\nStep 12/21 : COPY go.* ./\n ---> a05db2f8f863\nStep 13/21 : RUN go mod download\n ---> Running in 27236d5faae4\nRemoving intermediate container 27236d5faae4\n ---> 96d5c1793674\nStep 14/21 : COPY . .\n ---> 758f44193a3b\nStep 15/21 : RUN cd cmd/boringproxy && CGO_ENABLED=0 GOOS=${GOOS} GOARCH=${GOARCH} \tgo build -ldflags \"-X main.Version=${VERSION}\" \t-o boringproxy\n ---> Running in cd61220618b5\nRemoving intermediate container cd61220618b5\n ---> 98b423abe3c8\nStep 16/21 : FROM scratch\n ---> \nStep 17/21 : EXPOSE 80 443\n ---> Running in 7c6ec7a33061\nRemoving intermediate container 7c6ec7a33061\n ---> 1cd2a961d299\nStep 18/21 : WORKDIR /storage\n ---> Running in 33d0cd52c573\nRemoving intermediate container 33d0cd52c573\n ---> ed47573f3571\nStep 19/21 : COPY --from=builder /build/cmd/boringproxy/boringproxy /\n ---> c1ae8c5565c4\nStep 20/21 : ENTRYPOINT [\"/boringproxy\"]\n ---> Running in fbeaaf40f57f\nRemoving intermediate container fbeaaf40f57f\n ---> 5d67b03f2b22\nStep 21/21 : CMD [\"version\"]\n ---> Running in 99270570418c\nRemoving intermediate container 99270570418c\n ---> 114297717c49\nSuccessfully built 114297717c49\nSuccessfully tagged boringproxy:latest\n","stderr":"","imageSize":13311071},"endTime":1672215997920}