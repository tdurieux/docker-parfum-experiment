{"repository":"https://github.com/judymou/spacedb","dockerfilePath":"Dockerfile","startTime":1673037347445,"endTime":1673037504033,"clone":{"startTime":1673037347445,"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/judymou/spacedb'...\n","error":null,"endTime":1673037349489,"commit":"b4afd213e4f912fb23f630f59272f13b72e2af4e"},"originalBuild":{"startTime":1673037349784,"endTime":1673037443971,"error":null,"stdout":"Sending build context to Docker daemon  49.64MB\r\r\nStep 1/14 : FROM python:3-alpine3.7\n3-alpine3.7: Pulling from library/python\n48ecbb6b270e: Pulling fs layer\n692f29ee68fa: Pulling fs layer\n6439819450d1: Pulling fs layer\n3c7be240f7bf: Pulling fs layer\nca4b349df8ed: Pulling fs layer\n3c7be240f7bf: Waiting\nca4b349df8ed: Waiting\n692f29ee68fa: Verifying Checksum\n692f29ee68fa: Download complete\n3c7be240f7bf: Verifying Checksum\n3c7be240f7bf: Download complete\n6439819450d1: Verifying Checksum\n6439819450d1: Download complete\n48ecbb6b270e: Verifying Checksum\n48ecbb6b270e: Download complete\nca4b349df8ed: Verifying Checksum\nca4b349df8ed: Download complete\n48ecbb6b270e: Pull complete\n692f29ee68fa: Pull complete\n6439819450d1: Pull complete\n3c7be240f7bf: Pull complete\nca4b349df8ed: Pull complete\nDigest: sha256:35f6f83ab08f98c727dbefd53738e3b3174a48b4571ccb1910bae480dcdba847\nStatus: Downloaded newer image for python:3-alpine3.7\n ---> 00be2573e9f7\nStep 2/14 : ENV PYTHONUNBUFFERED 1\n ---> Running in 164f82e767f8\nRemoving intermediate container 164f82e767f8\n ---> 3b38b9f93cc0\nStep 3/14 : WORKDIR /app\n ---> Running in 3da8809edbe6\nRemoving intermediate container 3da8809edbe6\n ---> d7a82c765d0e\nStep 4/14 : RUN apk update &&     apk add --virtual build-deps gcc python-dev musl-dev &&     apk add postgresql-dev curl bash\n ---> Running in 166566ce7183\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.7/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.7/community/x86_64/APKINDEX.tar.gz\nv3.7.3-184-gffd32bfd09 [http://dl-cdn.alpinelinux.org/alpine/v3.7/main]\nv3.7.3-194-gcddd1b2302 [http://dl-cdn.alpinelinux.org/alpine/v3.7/community]\nOK: 9062 distinct packages available\n(1/18) Upgrading musl (1.1.18-r3 -> 1.1.18-r4)\n(2/18) Installing binutils-libs (2.30-r2)\n(3/18) Installing binutils (2.30-r2)\n(4/18) Installing gmp (6.1.2-r1)\n(5/18) Installing isl (0.18-r0)\n(6/18) Installing libgomp (6.4.0-r5)\n(7/18) Installing libatomic (6.4.0-r5)\n(8/18) Installing pkgconf (1.3.10-r0)\n(9/18) Installing libgcc (6.4.0-r5)\n(10/18) Installing mpfr3 (3.1.5-r1)\n(11/18) Installing mpc1 (1.0.3-r1)\n(12/18) Installing libstdc++ (6.4.0-r5)\n(13/18) Installing gcc (6.4.0-r5)\n(14/18) Installing python2 (2.7.15-r3)\n(15/18) Installing python2-dev (2.7.15-r3)\n(16/18) Installing musl-dev (1.1.18-r4)\n(17/18) Installing build-deps (0)\n(18/18) Upgrading musl-utils (1.1.18-r3 -> 1.1.18-r4)\nExecuting busybox-1.27.2-r11.trigger\nOK: 160 MiB in 52 packages\n(1/11) Installing bash (4.4.19-r1)\nExecuting bash-4.4.19-r1.post-install\n(2/11) Installing libssh2 (1.9.0-r1)\n(3/11) Installing libcurl (7.61.1-r3)\n(4/11) Installing curl (7.61.1-r3)\n(5/11) Installing libressl-dev (2.6.5-r0)\n(6/11) Installing db (5.3.28-r0)\n(7/11) Installing libsasl (2.1.26-r11)\n(8/11) Installing libldap (2.4.48-r0)\n(9/11) Installing libpq (10.10-r0)\n(10/11) Installing postgresql-libs (10.10-r0)\n(11/11) Installing postgresql-dev (10.10-r0)\nExecuting busybox-1.27.2-r11.trigger\nOK: 189 MiB in 63 packages\nRemoving intermediate container 166566ce7183\n ---> 4ad689aea6f9\nStep 5/14 : COPY requirements.txt requirements.txt\n ---> 741f7812be2c\nStep 6/14 : RUN pip install -r requirements.txt\n ---> Running in 419e3c2e5d16\nCollecting Django==1.11.29 (from -r requirements.txt (line 1))\n  Downloading https://files.pythonhosted.org/packages/49/49/178daa8725d29c475216259eb19e90b2aa0b8c0431af8c7e9b490ae6481d/Django-1.11.29-py2.py3-none-any.whl (6.9MB)\nCollecting jsonfield==1.0.3 (from -r requirements.txt (line 2))\n  Downloading https://files.pythonhosted.org/packages/ad/e2/e1d8a62edb0aa3c9984ed5cb73d9001065520796f1740caf6daf1c5540c4/jsonfield-1.0.3.tar.gz\nCollecting gunicorn==19.9.0 (from -r requirements.txt (line 3))\n  Downloading https://files.pythonhosted.org/packages/8c/da/b8dd8deb741bff556db53902d4706774c8e1e67265f69528c14c003644e6/gunicorn-19.9.0-py2.py3-none-any.whl (112kB)\nCollecting psycopg2==2.7.6.1 (from -r requirements.txt (line 4))\n  Downloading https://files.pythonhosted.org/packages/c0/07/93573b97ed61b6fb907c8439bf58f09957564cf7c39612cef36c547e68c6/psycopg2-2.7.6.1.tar.gz (427kB)\nCollecting PyYAML==5.4 (from -r requirements.txt (line 5))\n  Downloading https://files.pythonhosted.org/packages/b5/fd/15638de2da0a5aa91c095718444624aa565f766fc178249ca6faa372f71a/PyYAML-5.4.tar.gz (174kB)\n  Installing build dependencies: started\n  Installing build dependencies: finished with status 'done'\n  Getting requirements to build wheel: started\n  Getting requirements to build wheel: finished with status 'done'\n    Preparing wheel metadata: started\n    Preparing wheel metadata: finished with status 'done'\nCollecting enum34==1.1.6 (from -r requirements.txt (line 6))\n  Downloading https://files.pythonhosted.org/packages/af/42/cb9355df32c69b553e72a2e28daee25d1611d2c0d9c272aa1d34204205b2/enum34-1.1.6-py3-none-any.whl\nCollecting setuptools==65.5.1 (from -r requirements.txt (line 7))\n  Downloading https://files.pythonhosted.org/packages/b6/40/353c051f77ee5618adaf1fd96f4f6bae9714ed0a22c7142c01c24eb77fe4/setuptools-65.5.1-py3-none-any.whl (1.2MB)\nCollecting pytz (from Django==1.11.29->-r requirements.txt (line 1))\n  Downloading https://files.pythonhosted.org/packages/3d/19/4de17f0d5cf5a0d87aa67532d4c2fa75e6e7d8df13c27635ff40fa6f4b76/pytz-2022.7-py2.py3-none-any.whl (499kB)\nBuilding wheels for collected packages: PyYAML\n  Building wheel for PyYAML (PEP 517): started\n  Building wheel for PyYAML (PEP 517): finished with status 'done'\n  Stored in directory: /root/.cache/pip/wheels/44/b8/7d/ebf87a5dfb63248d2e26442f798999ed39d61bd07d6ac3b222\nSuccessfully built PyYAML\nBuilding wheels for collected packages: jsonfield, psycopg2\n  Building wheel for jsonfield (setup.py): started\n  Building wheel for jsonfield (setup.py): finished with status 'done'\n  Stored in directory: /root/.cache/pip/wheels/cd/c6/9d/6ab674b816a7b0d04d9cd6a661f8afdae526a1ccdc27c0459b\n  Building wheel for psycopg2 (setup.py): started\n  Building wheel for psycopg2 (setup.py): finished with status 'done'\n  Stored in directory: /root/.cache/pip/wheels/a9/8d/bc/1a7c972b48a4fca9e773728396325709bf84a76695d01da3a7\nSuccessfully built jsonfield psycopg2\nInstalling collected packages: pytz, Django, jsonfield, gunicorn, psycopg2, PyYAML, enum34, setuptools\n  Found existing installation: setuptools 40.7.1\n    Uninstalling setuptools-40.7.1:\n      Successfully uninstalled setuptools-40.7.1\nSuccessfully installed Django-1.11.29 PyYAML-5.4 enum34-1.1.6 gunicorn-19.9.0 jsonfield-1.0.3 psycopg2-2.7.6.1 pytz-2022.7 setuptools-65.5.1\n\u001b[91mYou are using pip version 19.0.1, however version 22.3.1 is available.\nYou should consider upgrading via the 'pip install --upgrade pip' command.\n\u001b[0mRemoving intermediate container 419e3c2e5d16\n ---> 16ce7db51d00\nStep 7/14 : COPY spacedb spacedb\n ---> 728dda872f4f\nStep 8/14 : COPY spaceobjects spaceobjects\n ---> adf818e923ab\nStep 9/14 : COPY static static\n ---> 91f3a897e3b7\nStep 10/14 : COPY templates templates\n ---> a97c4ad1c734\nStep 11/14 : COPY data data\n ---> 0c74be00ad89\nStep 12/14 : COPY manage.py manage.py\n ---> 0a3b4a10985d\nStep 13/14 : EXPOSE 8000\n ---> Running in 5a7f78df88b2\nRemoving intermediate container 5a7f78df88b2\n ---> 0f4f2131a3e9\nStep 14/14 : CMD python /app/manage.py runserver 0.0.0.0:8000\n ---> Running in 3aed95f82a00\nRemoving intermediate container 3aed95f82a00\n ---> d3d5dd5b75c0\nSuccessfully built d3d5dd5b75c0\nSuccessfully tagged spacedb:latest\n","stderr":"","imageSize":331538661},"repair":{"startTime":1673037444030,"endTime":1673037444067,"violations":[{"name":"pipUseNoCacheDir","position":{"start":13,"end":13,"columnStart":4,"columnEnd":35}},{"name":"apkAddUseNoCache","position":{"start":8,"end":8,"columnStart":4,"columnEnd":56}},{"name":"apkAddUseNoCache","position":{"start":9,"end":9,"columnStart":4,"columnEnd":36}}],"repairedDockerfile":"FROM python:3-alpine3.7\n\nENV PYTHONUNBUFFERED 1\n\nWORKDIR /app\n\n# Postgres and python deps\nRUN apk update && \\\n    apk add --no-cache --virtual build-deps gcc python-dev musl-dev && \\\n    apk add --no-cache postgresql-dev curl bash\n\n# Install python deps\nCOPY requirements.txt requirements.txt\nRUN pip install --no-cache-dir -r requirements.txt\n\nCOPY spacedb spacedb\nCOPY spaceobjects spaceobjects\nCOPY static static\nCOPY templates templates\nCOPY data data\nCOPY manage.py manage.py\n\nEXPOSE 8000\n\nCMD python /app/manage.py runserver 0.0.0.0:8000\n"},"repairedBuild":{"startTime":1673037444891,"endTime":1673037503949,"error":{"code":2,"killed":false,"signal":null,"cmd":"docker build --no-cache --force-rm -t spacedb:latest -f /tmp/dinghy-analysis/judymou/spacedb/Dockerfile ."},"stdout":"Sending build context to Docker daemon  49.64MB\r\r\nStep 1/14 : FROM python:3-alpine3.7\n ---> 00be2573e9f7\nStep 2/14 : ENV PYTHONUNBUFFERED 1\n ---> Running in 69a89e7da5e9\nRemoving intermediate container 69a89e7da5e9\n ---> 443753dab570\nStep 3/14 : WORKDIR /app\n ---> Running in c719107c4ac5\nRemoving intermediate container c719107c4ac5\n ---> 6d3082bcdc35\nStep 4/14 : RUN apk update &&     apk add --no-cache --virtual build-deps gcc python-dev musl-dev &&     apk add --no-cache postgresql-dev curl bash\n ---> Running in ee4514588313\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.7/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.7/community/x86_64/APKINDEX.tar.gz\nv3.7.3-184-gffd32bfd09 [http://dl-cdn.alpinelinux.org/alpine/v3.7/main]\nv3.7.3-194-gcddd1b2302 [http://dl-cdn.alpinelinux.org/alpine/v3.7/community]\nOK: 9062 distinct packages available\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.7/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.7/community/x86_64/APKINDEX.tar.gz\n(1/18) Upgrading musl (1.1.18-r3 -> 1.1.18-r4)\n(2/18) Installing binutils-libs (2.30-r2)\n(3/18) Installing binutils (2.30-r2)\n(4/18) Installing gmp (6.1.2-r1)\n(5/18) Installing isl (0.18-r0)\n(6/18) Installing libgomp (6.4.0-r5)\n(7/18) Installing libatomic (6.4.0-r5)\n(8/18) Installing pkgconf (1.3.10-r0)\n(9/18) Installing libgcc (6.4.0-r5)\n(10/18) Installing mpfr3 (3.1.5-r1)\n(11/18) Installing mpc1 (1.0.3-r1)\n(12/18) Installing libstdc++ (6.4.0-r5)\n(13/18) Installing gcc (6.4.0-r5)\n(14/18) Installing python2 (2.7.15-r3)\n(15/18) Installing python2-dev (2.7.15-r3)\n(16/18) Installing musl-dev (1.1.18-r4)\n(17/18) Installing build-deps (0)\n(18/18) Upgrading musl-utils (1.1.18-r3 -> 1.1.18-r4)\nExecuting busybox-1.27.2-r11.trigger\nOK: 160 MiB in 52 packages\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.7/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.7/community/x86_64/APKINDEX.tar.gz\n(1/11) Installing bash (4.4.19-r1)\nExecuting bash-4.4.19-r1.post-install\n(2/11) Installing libssh2 (1.9.0-r1)\n(3/11) Installing libcurl (7.61.1-r3)\n(4/11) Installing curl (7.61.1-r3)\n(5/11) Installing libressl-dev (2.6.5-r0)\n(6/11) Installing db (5.3.28-r0)\n(7/11) Installing libsasl (2.1.26-r11)\n(8/11) Installing libldap (2.4.48-r0)\n(9/11) Installing libpq (10.10-r0)\n(10/11) Installing postgresql-libs (10.10-r0)\n(11/11) Installing postgresql-dev (10.10-r0)\nExecuting busybox-1.27.2-r11.trigger\nOK: 189 MiB in 63 packages\nRemoving intermediate container ee4514588313\n ---> 3769ff942d75\nStep 5/14 : COPY requirements.txt requirements.txt\n ---> 58608bcad808\nStep 6/14 : RUN pip install --no-cache-dir -r requirements.txt\n ---> Running in 32263b203402\nCollecting Django==1.11.29 (from -r requirements.txt (line 1))\n  Downloading https://files.pythonhosted.org/packages/49/49/178daa8725d29c475216259eb19e90b2aa0b8c0431af8c7e9b490ae6481d/Django-1.11.29-py2.py3-none-any.whl (6.9MB)\nCollecting jsonfield==1.0.3 (from -r requirements.txt (line 2))\n  Downloading https://files.pythonhosted.org/packages/ad/e2/e1d8a62edb0aa3c9984ed5cb73d9001065520796f1740caf6daf1c5540c4/jsonfield-1.0.3.tar.gz\nCollecting gunicorn==19.9.0 (from -r requirements.txt (line 3))\n  Downloading https://files.pythonhosted.org/packages/8c/da/b8dd8deb741bff556db53902d4706774c8e1e67265f69528c14c003644e6/gunicorn-19.9.0-py2.py3-none-any.whl (112kB)\nCollecting psycopg2==2.7.6.1 (from -r requirements.txt (line 4))\n  Downloading https://files.pythonhosted.org/packages/c0/07/93573b97ed61b6fb907c8439bf58f09957564cf7c39612cef36c547e68c6/psycopg2-2.7.6.1.tar.gz (427kB)\nCollecting PyYAML==5.4 (from -r requirements.txt (line 5))\n  Downloading https://files.pythonhosted.org/packages/b5/fd/15638de2da0a5aa91c095718444624aa565f766fc178249ca6faa372f71a/PyYAML-5.4.tar.gz (174kB)\n  Installing build dependencies: started\n  Installing build dependencies: finished with status 'done'\n  Getting requirements to build wheel: started\n  Getting requirements to build wheel: finished with status 'done'\n    Preparing wheel metadata: started\n    Preparing wheel metadata: finished with status 'done'\nCollecting enum34==1.1.6 (from -r requirements.txt (line 6))\n  Downloading https://files.pythonhosted.org/packages/af/42/cb9355df32c69b553e72a2e28daee25d1611d2c0d9c272aa1d34204205b2/enum34-1.1.6-py3-none-any.whl\nCollecting setuptools==65.5.1 (from -r requirements.txt (line 7))\n  Downloading https://files.pythonhosted.org/packages/b6/40/353c051f77ee5618adaf1fd96f4f6bae9714ed0a22c7142c01c24eb77fe4/setuptools-65.5.1-py3-none-any.whl (1.2MB)\nCollecting pytz (from Django==1.11.29->-r requirements.txt (line 1))\n  Downloading https://files.pythonhosted.org/packages/3d/19/4de17f0d5cf5a0d87aa67532d4c2fa75e6e7d8df13c27635ff40fa6f4b76/pytz-2022.7-py2.py3-none-any.whl (499kB)\n\u001b[91mException:\nTraceback (most recent call last):\n  File \"/usr/local/lib/python3.7/site-packages/pip/_internal/cli/base_command.py\", line 176, in main\n    status = self.run(options, args)\n  File \"/usr/local/lib/python3.7/site-packages/pip/_internal/commands/install.py\", line 346, in run\n    session=session, autobuilding=True\n  File \"/usr/local/lib/python3.7/site-packages/pip/_internal/wheel.py\", line 886, in build\n    assert have_directory_for_build\nAssertionError\n\u001b[0m\u001b[91mYou are using pip version 19.0.1, however version 22.3.1 is available.\nYou should consider upgrading via the 'pip install --upgrade pip' command.\n\u001b[0mRemoving intermediate container 32263b203402\n","stderr":"The command '/bin/sh -c pip install --no-cache-dir -r requirements.txt' returned a non-zero code: 2\n"}}