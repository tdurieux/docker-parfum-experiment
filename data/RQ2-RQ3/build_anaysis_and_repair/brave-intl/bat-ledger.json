{"repository":"https://github.com/brave-intl/bat-ledger","dockerfilePath":"Dockerfile","startTime":1672772257043,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/brave-intl/bat-ledger'...\n","error":null,"commit":"ed0c28805f243f1d01c6e418db5631a024bfcfd0"},"originalBuild":{"startTimestamp":1672772258037,"endTimestamp":1672772556516,"error":null,"stdout":"Sending build context to Docker daemon   1.74MB\r\r\nStep 1/10 : FROM node:16.16.0\n16.16.0: Pulling from library/node\n7e6a53d1988f: Pulling fs layer\n4fe4e1c58b4a: Pulling fs layer\ncc915d298757: Pulling fs layer\nf08b88f29371: Pulling fs layer\n28bcb226aca8: Pulling fs layer\n4ed42ef80d39: Pulling fs layer\nbebe51b791bc: Pulling fs layer\n986a235ce43f: Pulling fs layer\n92cdf774b883: Pulling fs layer\nf08b88f29371: Waiting\n28bcb226aca8: Waiting\nbebe51b791bc: Waiting\ncc915d298757: Verifying Checksum\ncc915d298757: Download complete\n4fe4e1c58b4a: Verifying Checksum\n4fe4e1c58b4a: Download complete\n7e6a53d1988f: Verifying Checksum\n7e6a53d1988f: Download complete\nf08b88f29371: Verifying Checksum\nf08b88f29371: Download complete\n4ed42ef80d39: Verifying Checksum\n4ed42ef80d39: Download complete\n986a235ce43f: Verifying Checksum\n986a235ce43f: Download complete\n92cdf774b883: Verifying Checksum\n92cdf774b883: Download complete\nbebe51b791bc: Verifying Checksum\nbebe51b791bc: Download complete\n28bcb226aca8: Verifying Checksum\n28bcb226aca8: Download complete\n7e6a53d1988f: Pull complete\n4fe4e1c58b4a: Pull complete\ncc915d298757: Pull complete\nf08b88f29371: Pull complete\n28bcb226aca8: Pull complete\n4ed42ef80d39: Pull complete\nbebe51b791bc: Pull complete\n986a235ce43f: Pull complete\n92cdf774b883: Pull complete\nDigest: sha256:1ed1e17ccabb09038cfb8a965337ebcda51ef9e9d32082164c502d44d9731a02\nStatus: Downloaded newer image for node:16.16.0\n ---> 954cea825b78\nStep 2/10 : RUN apt-get update && apt-get install -y postgresql-client\n ---> Running in f682231d3a7d\nGet:1 http://deb.debian.org/debian buster InRelease [122 kB]\nGet:2 http://deb.debian.org/debian-security buster/updates InRelease [34.8 kB]\nGet:3 http://deb.debian.org/debian buster-updates InRelease [56.6 kB]\nGet:4 http://deb.debian.org/debian buster/main amd64 Packages [7909 kB]\nGet:5 http://deb.debian.org/debian-security buster/updates/main amd64 Packages [422 kB]\nGet:6 http://deb.debian.org/debian buster-updates/main amd64 Packages [8788 B]\nFetched 8553 kB in 2s (5116 kB/s)\nReading package lists...\nReading package lists...\nBuilding dependency tree...\nReading state information...\nThe following additional packages will be installed:\n  distro-info-data libpq-dev libpq5 lsb-release postgresql-client-11\n  postgresql-client-common\nSuggested packages:\n  postgresql-doc-11 lsb postgresql-11\nThe following NEW packages will be installed:\n  distro-info-data lsb-release postgresql-client postgresql-client-11\n  postgresql-client-common\nThe following packages will be upgraded:\n  libpq-dev libpq5\n2 upgraded, 5 newly installed, 0 to remove and 76 not upgraded.\nNeed to get 1935 kB of archives.\nAfter this operation, 6615 kB of additional disk space will be used.\nGet:1 http://deb.debian.org/debian-security buster/updates/main amd64 distro-info-data all 0.41+deb10u6 [7080 B]\nGet:2 http://deb.debian.org/debian-security buster/updates/main amd64 libpq-dev amd64 11.18-0+deb10u1 [167 kB]\nGet:3 http://deb.debian.org/debian-security buster/updates/main amd64 libpq5 amd64 11.18-0+deb10u1 [173 kB]\nGet:4 http://deb.debian.org/debian buster/main amd64 lsb-release all 10.2019051400 [27.5 kB]\nGet:5 http://deb.debian.org/debian buster/main amd64 postgresql-client-common all 200+deb10u5 [85.0 kB]\nGet:6 http://deb.debian.org/debian-security buster/updates/main amd64 postgresql-client-11 amd64 11.18-0+deb10u1 [1414 kB]\nGet:7 http://deb.debian.org/debian buster/main amd64 postgresql-client all 11+200+deb10u5 [61.1 kB]\n\u001b[91mdebconf: delaying package configuration, since apt-utils is not installed\n\u001b[0mFetched 1935 kB in 0s (39.9 MB/s)\nSelecting previously unselected package distro-info-data.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 23988 files and directories currently installed.)\r\nPreparing to unpack .../0-distro-info-data_0.41+deb10u6_all.deb ...\r\nUnpacking distro-info-data (0.41+deb10u6) ...\r\nPreparing to unpack .../1-libpq-dev_11.18-0+deb10u1_amd64.deb ...\r\nUnpacking libpq-dev (11.18-0+deb10u1) over (11.16-0+deb10u1) ...\r\nPreparing to unpack .../2-libpq5_11.18-0+deb10u1_amd64.deb ...\r\nUnpacking libpq5:amd64 (11.18-0+deb10u1) over (11.16-0+deb10u1) ...\r\nSelecting previously unselected package lsb-release.\r\nPreparing to unpack .../3-lsb-release_10.2019051400_all.deb ...\r\nUnpacking lsb-release (10.2019051400) ...\r\nSelecting previously unselected package postgresql-client-common.\r\nPreparing to unpack .../4-postgresql-client-common_200+deb10u5_all.deb ...\r\nUnpacking postgresql-client-common (200+deb10u5) ...\r\nSelecting previously unselected package postgresql-client-11.\r\nPreparing to unpack .../5-postgresql-client-11_11.18-0+deb10u1_amd64.deb ...\r\nUnpacking postgresql-client-11 (11.18-0+deb10u1) ...\r\nSelecting previously unselected package postgresql-client.\r\nPreparing to unpack .../6-postgresql-client_11+200+deb10u5_all.deb ...\r\nUnpacking postgresql-client (11+200+deb10u5) ...\r\nSetting up postgresql-client-common (200+deb10u5) ...\r\nSetting up distro-info-data (0.41+deb10u6) ...\r\nSetting up libpq5:amd64 (11.18-0+deb10u1) ...\r\nSetting up libpq-dev (11.18-0+deb10u1) ...\r\nSetting up postgresql-client-11 (11.18-0+deb10u1) ...\r\nupdate-alternatives: using /usr/share/postgresql/11/man/man1/psql.1.gz to provide /usr/share/man/man1/psql.1.gz (psql.1.gz) in auto mode\r\nSetting up lsb-release (10.2019051400) ...\r\nSetting up postgresql-client (11+200+deb10u5) ...\r\nProcessing triggers for libc-bin (2.28-10+deb10u1) ...\r\nRemoving intermediate container f682231d3a7d\n ---> 944b6d673f14\nStep 3/10 : RUN mkdir -p /usr/src/app && mkdir /usr/src/app/bat-utils\n ---> Running in 098e1e2eb190\nRemoving intermediate container 098e1e2eb190\n ---> a3e04769bf4b\nStep 4/10 : WORKDIR /usr/src/app\n ---> Running in 0ac3093bfd97\nRemoving intermediate container 0ac3093bfd97\n ---> 6eac24c43fd2\nStep 5/10 : RUN npm install -g npm@8.15.1\n ---> Running in 147f511dbf48\n\u001b[91mnpm\u001b[0m\u001b[91m WARN config global `--global`, `--local` are deprecated. Use `--location=global` instead.\n\u001b[0m\nchanged 35 packages, and audited 202 packages in 29s\n\n11 packages are looking for funding\n  run `npm fund` for details\n\nfound 0 vulnerabilities\nRemoving intermediate container 147f511dbf48\n ---> 90eb66fdd7af\nStep 6/10 : COPY package.json /usr/src/app/\n ---> 716628c66651\nStep 7/10 : COPY bat-utils/package.json /usr/src/app/bat-utils/\n ---> 2ef693ae1ce6\nStep 8/10 : RUN npm install\n ---> Running in 2a553ed86925\n\u001b[91mnpm \u001b[0m\u001b[91mWARN deprecated har-validator@5.1.5: this library is no longer supported\n\u001b[0m\u001b[91mnpm WARN\u001b[0m\u001b[91m deprecated funding@1.0.9: I appreciate the thoughtful discussion and feedback from the community. I shared some thoughts about how this experiment went from my perspective here: https://feross.org/funding-experiment-recap/\n\u001b[0m\u001b[91mnpm WARN deprecated @types/bson@4.2.0: This is a stub types definition. bson provides its own type definitions, so you do not need this installed.\n\u001b[0m\u001b[91mnpm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142\n\u001b[0m\u001b[91mnpm WARN \u001b[0m\u001b[91mdeprecated uuid@3.4.0: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.\n\u001b[0m\n> bat-ledger@0.9.0 postinstall\n> test -e .git && { for file in `ls .git-hooks`; do ln -sf ../../.git-hooks/${file} .git/hooks/${file}; done } || true\n\n\nadded 879 packages, and audited 881 packages in 1m\n\n114 packages are looking for funding\n  run `npm fund` for details\n\nfound 0 vulnerabilities\n\u001b[91mnpm notice \nnpm notice\u001b[0m\u001b[91m New major version of npm available! 8.15.1 -> 9.2.0\nnpm notice Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm notice\u001b[0m\u001b[91m Run `npm install -g npm@9.2.0` to update!\nnpm notice \n\u001b[0mRemoving intermediate container 2a553ed86925\n ---> b51f26760851\nStep 9/10 : COPY . /usr/src/app\n ---> 9e6253cb5b01\nStep 10/10 : CMD npm run eyeshade-consumer\n ---> Running in 35982c989c0c\nRemoving intermediate container 35982c989c0c\n ---> 1d50081c7880\nSuccessfully built 1d50081c7880\nSuccessfully tagged bat-ledger:latest\n","stderr":"","imageSize":1114548916},"repair":{"violations":[{"name":"npmCacheCleanAfterInstall","position":{"start":7,"end":7,"columnStart":4,"columnEnd":29}},{"name":"npmCacheCleanAfterInstall","position":{"start":11,"end":11,"columnStart":4,"columnEnd":15}},{"name":"mkdirUsrSrcThenRemove","position":{"start":4,"end":4,"columnStart":4,"columnEnd":25}},{"name":"mkdirUsrSrcThenRemove","position":{"start":4,"end":4,"columnStart":29,"columnEnd":57}},{"name":"ruleAptGetInstallUseNoRec","position":{"start":2,"end":2,"columnStart":22,"columnEnd":58}},{"name":"ruleAptGetInstallThenRemoveAptLists","position":{"start":2,"end":2,"columnStart":22,"columnEnd":58}}],"repairedDockerfile":"FROM node:16.16.0\n\nRUN apt-get update && apt-get install --no-install-recommends -y postgresql-client\n\nRUN mkdir -p /usr/src/app && mkdir /usr/src/app/bat-utils\nWORKDIR /usr/src/app\n\nRUN npm install -g npm@8.15.1\n\nCOPY package.json /usr/src/app/\nCOPY bat-utils/package.json /usr/src/app/bat-utils/\nRUN npm install\nCOPY . /usr/src/app\n\nCMD npm run eyeshade-consumer\n"},"repairedBuild":{"startTimestamp":1672772559290,"endTimestamp":1672772791221,"error":null,"stdout":"Sending build context to Docker daemon   1.74MB\r\r\nStep 1/10 : FROM node:16.16.0\n ---> 954cea825b78\nStep 2/10 : RUN apt-get update && apt-get install --no-install-recommends -y postgresql-client\n ---> Running in 7d57b68a29eb\nGet:1 http://deb.debian.org/debian buster InRelease [122 kB]\nGet:2 http://deb.debian.org/debian-security buster/updates InRelease [34.8 kB]\nGet:3 http://deb.debian.org/debian buster-updates InRelease [56.6 kB]\nGet:4 http://deb.debian.org/debian buster/main amd64 Packages [7909 kB]\nGet:5 http://deb.debian.org/debian-security buster/updates/main amd64 Packages [422 kB]\nGet:6 http://deb.debian.org/debian buster-updates/main amd64 Packages [8788 B]\nFetched 8553 kB in 1s (5926 kB/s)\nReading package lists...\nReading package lists...\nBuilding dependency tree...\nReading state information...\nThe following additional packages will be installed:\n  libpq-dev libpq5 postgresql-client-11 postgresql-client-common\nSuggested packages:\n  postgresql-doc-11 postgresql-11\nRecommended packages:\n  lsb-release\nThe following NEW packages will be installed:\n  postgresql-client postgresql-client-11 postgresql-client-common\nThe following packages will be upgraded:\n  libpq-dev libpq5\n2 upgraded, 3 newly installed, 0 to remove and 76 not upgraded.\nNeed to get 1900 kB of archives.\nAfter this operation, 6534 kB of additional disk space will be used.\nGet:1 http://deb.debian.org/debian-security buster/updates/main amd64 libpq-dev amd64 11.18-0+deb10u1 [167 kB]\nGet:2 http://deb.debian.org/debian-security buster/updates/main amd64 libpq5 amd64 11.18-0+deb10u1 [173 kB]\nGet:3 http://deb.debian.org/debian buster/main amd64 postgresql-client-common all 200+deb10u5 [85.0 kB]\nGet:4 http://deb.debian.org/debian-security buster/updates/main amd64 postgresql-client-11 amd64 11.18-0+deb10u1 [1414 kB]\nGet:5 http://deb.debian.org/debian buster/main amd64 postgresql-client all 11+200+deb10u5 [61.1 kB]\n\u001b[91mdebconf: delaying package configuration, since apt-utils is not installed\n\u001b[0mFetched 1900 kB in 0s (27.7 MB/s)\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 23988 files and directories currently installed.)\r\nPreparing to unpack .../libpq-dev_11.18-0+deb10u1_amd64.deb ...\r\nUnpacking libpq-dev (11.18-0+deb10u1) over (11.16-0+deb10u1) ...\r\nPreparing to unpack .../libpq5_11.18-0+deb10u1_amd64.deb ...\r\nUnpacking libpq5:amd64 (11.18-0+deb10u1) over (11.16-0+deb10u1) ...\r\nSelecting previously unselected package postgresql-client-common.\r\nPreparing to unpack .../postgresql-client-common_200+deb10u5_all.deb ...\r\nUnpacking postgresql-client-common (200+deb10u5) ...\r\nSelecting previously unselected package postgresql-client-11.\r\nPreparing to unpack .../postgresql-client-11_11.18-0+deb10u1_amd64.deb ...\r\nUnpacking postgresql-client-11 (11.18-0+deb10u1) ...\r\nSelecting previously unselected package postgresql-client.\r\nPreparing to unpack .../postgresql-client_11+200+deb10u5_all.deb ...\r\nUnpacking postgresql-client (11+200+deb10u5) ...\r\nSetting up postgresql-client-common (200+deb10u5) ...\r\nSetting up libpq5:amd64 (11.18-0+deb10u1) ...\r\nSetting up libpq-dev (11.18-0+deb10u1) ...\r\nSetting up postgresql-client-11 (11.18-0+deb10u1) ...\r\nupdate-alternatives: using /usr/share/postgresql/11/man/man1/psql.1.gz to provide /usr/share/man/man1/psql.1.gz (psql.1.gz) in auto mode\r\nSetting up postgresql-client (11+200+deb10u5) ...\r\nProcessing triggers for libc-bin (2.28-10+deb10u1) ...\r\nRemoving intermediate container 7d57b68a29eb\n ---> d69d8c9c40de\nStep 3/10 : RUN mkdir -p /usr/src/app && mkdir /usr/src/app/bat-utils\n ---> Running in e1465c21a447\nRemoving intermediate container e1465c21a447\n ---> 0654abfab326\nStep 4/10 : WORKDIR /usr/src/app\n ---> Running in 543ac85ace2f\nRemoving intermediate container 543ac85ace2f\n ---> 4c14b370c282\nStep 5/10 : RUN npm install -g npm@8.15.1\n ---> Running in 3481f91663e6\n\u001b[91mnpm\u001b[0m\u001b[91m WARN config global `--global`, `--local` are deprecated. Use `--location=global` instead.\n\u001b[0m\nchanged 35 packages, and audited 202 packages in 1m\n\n11 packages are looking for funding\n  run `npm fund` for details\n\nfound 0 vulnerabilities\nRemoving intermediate container 3481f91663e6\n ---> 2c14338e86e2\nStep 6/10 : COPY package.json /usr/src/app/\n ---> da37ec28c370\nStep 7/10 : COPY bat-utils/package.json /usr/src/app/bat-utils/\n ---> 80b3a542e4b7\nStep 8/10 : RUN npm install\n ---> Running in f2f56237ee01\n\u001b[91mnpm WARN deprecated funding@1.0.9: I appreciate the thoughtful discussion and feedback from the community. I shared some thoughts about how this experiment went from my perspective here: https://feross.org/funding-experiment-recap/\n\u001b[0m\u001b[91mnpm WARN deprecated har-validator@5.1.5: this library is no longer supported\n\u001b[0m\u001b[91mnpm WARN deprecated @types/bson@4.2.0: This is a stub types definition. bson provides its own type definitions, so you do not need this installed.\n\u001b[0m\u001b[91mnpm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142\n\u001b[0m\u001b[91mnpm WARN deprecated uuid@3.4.0: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.\n\u001b[0m\n> bat-ledger@0.9.0 postinstall\n> test -e .git && { for file in `ls .git-hooks`; do ln -sf ../../.git-hooks/${file} .git/hooks/${file}; done } || true\n\n\nadded 879 packages, and audited 881 packages in 34s\n\n114 packages are looking for funding\n  run `npm fund` for details\n\nfound 0 vulnerabilities\n\u001b[91mnpm notice \nnpm notice New major version of npm available! 8.15.1 -> 9.2.0\nnpm notice Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\n\u001b[0m\u001b[91mnpm notice Run `npm install -g npm@9.2.0` to update!\nnpm\u001b[0m\u001b[91m \u001b[0m\u001b[91mnotice \n\u001b[0mRemoving intermediate container f2f56237ee01\n ---> 9a15b50f3947\nStep 9/10 : COPY . /usr/src/app\n ---> 25f39c629c72\nStep 10/10 : CMD npm run eyeshade-consumer\n ---> Running in f8cdc3e39758\nRemoving intermediate container f8cdc3e39758\n ---> ae33b357fd05\nSuccessfully built ae33b357fd05\nSuccessfully tagged bat-ledger:latest\n","stderr":"","imageSize":1114492167},"endTime":1672772794479}