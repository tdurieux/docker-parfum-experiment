{"repository":"https://github.com/ironsmile/euterpe","dockerfilePath":"Dockerfile","startTime":1672945351617,"endTime":1672945782179,"clone":{"startTime":1672945351618,"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/ironsmile/euterpe'...\n","error":null,"endTime":1672945353239,"commit":"0f04db85c775c642f4c0b739948deef968a87ec6"},"originalBuild":{"startTime":1672945353298,"endTime":1672945630583,"error":null,"stdout":"Sending build context to Docker daemon   23.9MB\r\r\nStep 1/15 : FROM golang:1.16-alpine3.13 as builder\n ---> e1b239f8b504\nStep 2/15 : RUN apk add --update taglib-dev libc-dev icu-dev upx make gcc git zlib-dev\n ---> Running in 50032090c623\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.13/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.13/community/x86_64/APKINDEX.tar.gz\n(1/30) Upgrading zlib (1.2.11-r3 -> 1.2.12-r3)\n(2/30) Installing libgcc (10.2.1_pre1-r3)\n(3/30) Installing libstdc++ (10.2.1_pre1-r3)\n(4/30) Installing binutils (2.35.2-r1)\n(5/30) Installing libgomp (10.2.1_pre1-r3)\n(6/30) Installing libatomic (10.2.1_pre1-r3)\n(7/30) Installing libgphobos (10.2.1_pre1-r3)\n(8/30) Installing gmp (6.2.1-r1)\n(9/30) Installing isl22 (0.22-r0)\n(10/30) Installing mpfr4 (4.1.0-r0)\n(11/30) Installing mpc1 (1.2.0-r0)\n(12/30) Installing gcc (10.2.1_pre1-r3)\n(13/30) Installing brotli-libs (1.0.9-r3)\n(14/30) Installing nghttp2-libs (1.42.0-r1)\n(15/30) Installing libcurl (7.79.1-r3)\n(16/30) Installing expat (2.2.10-r8)\n(17/30) Installing pcre2 (10.36-r1)\n(18/30) Installing git (2.30.6-r0)\n(19/30) Installing icu-libs (67.1-r2)\n(20/30) Installing icu (67.1-r2)\n(21/30) Installing pkgconf (1.7.3-r0)\n(22/30) Installing icu-dev (67.1-r2)\n(23/30) Installing musl-dev (1.2.2-r1)\n(24/30) Installing libc-dev (0.7.2-r3)\n(25/30) Installing make (4.3-r0)\n(26/30) Installing taglib (1.11.1-r3)\n(27/30) Installing taglib-dev (1.11.1-r3)\n(28/30) Installing ucl (1.03-r1)\n(29/30) Installing upx (3.96-r1)\n(30/30) Installing zlib-dev (1.2.12-r3)\nExecuting busybox-1.32.1-r7.trigger\nOK: 180 MiB in 44 packages\nRemoving intermediate container 50032090c623\n ---> 8e20a4036b4c\nStep 3/15 : COPY . /src/euterpe\n ---> 0dbc24222f07\nStep 4/15 : WORKDIR /src/euterpe\n ---> Running in 914deb79f100\nRemoving intermediate container 914deb79f100\n ---> d3f1bccebd45\nStep 5/15 : RUN make release\n ---> Running in 9306f7139f2c\ngo build \\\n\t--tags \"sqlite_icu\" \\\n\t-ldflags \"-X github.com/ironsmile/euterpe/src/version.Version=`git describe --tags --always`\" \\\n\t-o euterpe\n# Compress it somewhat. It seems that the Euterpe binary gets more than 3 times smaller\n# using upx.\nupx euterpe\n                       Ultimate Packer for eXecutables\n                          Copyright (C) 1996 - 2020\nUPX 3.96        Markus Oberhumer, Laszlo Molnar & John Reiser   Jan 23rd 2020\n\n        File size         Ratio      Format      Name\n   --------------------   ------   -----------   -----------\n  17463568 ->  10096456   57.81%   linux/amd64   euterpe\n\nPacked 1 file.\nRemoving intermediate container 9306f7139f2c\n ---> 281083a67e71\nStep 6/15 : RUN mv euterpe /tmp/euterpe\n ---> Running in b5a5162f8f3e\nRemoving intermediate container b5a5162f8f3e\n ---> 05f780748cae\nStep 7/15 : RUN /tmp/euterpe -config-gen && sed -i 's/localhost:9996/0.0.0.0:9996/' /root/.euterpe/config.json\n ---> Running in c697a2482ab3\nRemoving intermediate container c697a2482ab3\n ---> 70d4c92f9c8b\nStep 8/15 : FROM alpine:3.13\n3.13: Pulling from library/alpine\n72cfd02ff4d0: Pulling fs layer\n72cfd02ff4d0: Verifying Checksum\n72cfd02ff4d0: Download complete\n72cfd02ff4d0: Pull complete\nDigest: sha256:469b6e04ee185740477efa44ed5bdd64a07bbdd6c7e5f5d169e540889597b911\nStatus: Downloaded newer image for alpine:3.13\n ---> 6b5c5e00213a\nStep 9/15 : RUN apk add --update taglib icu\n ---> Running in 3441701751a1\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.13/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.13/community/x86_64/APKINDEX.tar.gz\n(1/5) Installing libgcc (10.2.1_pre1-r3)\n(2/5) Installing libstdc++ (10.2.1_pre1-r3)\n(3/5) Installing icu-libs (67.1-r2)\n(4/5) Installing icu (67.1-r2)\n(5/5) Installing taglib (1.11.1-r3)\nExecuting busybox-1.32.1-r9.trigger\nOK: 41 MiB in 19 packages\nRemoving intermediate container 3441701751a1\n ---> 190ff8dd4f16\nStep 10/15 : COPY --from=builder /tmp/euterpe /usr/local/bin/euterpe\n ---> f705ff6ff640\nStep 11/15 : COPY --from=builder /root/.euterpe/config.json /root/.euterpe/config.json\n ---> c688b2c7429f\nStep 12/15 : ENV HOME /root\n ---> Running in 896cd7b93a0a\nRemoving intermediate container 896cd7b93a0a\n ---> 28e4d9883512\nStep 13/15 : WORKDIR /root\n ---> Running in 55d96f183424\nRemoving intermediate container 55d96f183424\n ---> c3eed3459c5e\nStep 14/15 : EXPOSE 9996\n ---> Running in 092f472efe8e\nRemoving intermediate container 092f472efe8e\n ---> a12e64429c61\nStep 15/15 : CMD [\"euterpe\"]\n ---> Running in f33081193cec\nRemoving intermediate container f33081193cec\n ---> f370b69c4f72\nSuccessfully built f370b69c4f72\nSuccessfully tagged euterpe:latest\n","stderr":"","imageSize":54144683},"repair":{"startTime":1672945630691,"endTime":1672945630833,"violations":[{"name":"apkAddUseNoCache","position":{"start":2,"end":2,"columnStart":4,"columnEnd":74}},{"name":"apkAddUseNoCache","position":{"start":13,"end":13,"columnStart":4,"columnEnd":31}}],"repairedDockerfile":"FROM golang:1.16-alpine3.13 as builder\n\nRUN apk add --no-cache --update taglib-dev libc-dev icu-dev upx make gcc git zlib-dev\n\nCOPY . /src/euterpe\nWORKDIR /src/euterpe\n\nRUN make release\nRUN mv euterpe /tmp/euterpe\nRUN /tmp/euterpe -config-gen && sed -i 's/localhost:9996/0.0.0.0:9996/' /root/.euterpe/config.json\n\nFROM alpine:3.13\n\nRUN apk add --no-cache --update taglib icu\n\nCOPY --from=builder /tmp/euterpe /usr/local/bin/euterpe\nCOPY --from=builder /root/.euterpe/config.json /root/.euterpe/config.json\n\nENV HOME /root\nWORKDIR /root\nEXPOSE 9996\nCMD [\"euterpe\"]\n"},"repairedBuild":{"startTime":1672945631536,"endTime":1672945781883,"error":null,"stdout":"Sending build context to Docker daemon   23.9MB\r\r\nStep 1/15 : FROM golang:1.16-alpine3.13 as builder\n ---> e1b239f8b504\nStep 2/15 : RUN apk add --no-cache --update taglib-dev libc-dev icu-dev upx make gcc git zlib-dev\n ---> Running in 8cee7c26ecc7\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.13/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.13/community/x86_64/APKINDEX.tar.gz\n(1/30) Upgrading zlib (1.2.11-r3 -> 1.2.12-r3)\n(2/30) Installing libgcc (10.2.1_pre1-r3)\n(3/30) Installing libstdc++ (10.2.1_pre1-r3)\n(4/30) Installing binutils (2.35.2-r1)\n(5/30) Installing libgomp (10.2.1_pre1-r3)\n(6/30) Installing libatomic (10.2.1_pre1-r3)\n(7/30) Installing libgphobos (10.2.1_pre1-r3)\n(8/30) Installing gmp (6.2.1-r1)\n(9/30) Installing isl22 (0.22-r0)\n(10/30) Installing mpfr4 (4.1.0-r0)\n(11/30) Installing mpc1 (1.2.0-r0)\n(12/30) Installing gcc (10.2.1_pre1-r3)\n(13/30) Installing brotli-libs (1.0.9-r3)\n(14/30) Installing nghttp2-libs (1.42.0-r1)\n(15/30) Installing libcurl (7.79.1-r3)\n(16/30) Installing expat (2.2.10-r8)\n(17/30) Installing pcre2 (10.36-r1)\n(18/30) Installing git (2.30.6-r0)\n(19/30) Installing icu-libs (67.1-r2)\n(20/30) Installing icu (67.1-r2)\n(21/30) Installing pkgconf (1.7.3-r0)\n(22/30) Installing icu-dev (67.1-r2)\n(23/30) Installing musl-dev (1.2.2-r1)\n(24/30) Installing libc-dev (0.7.2-r3)\n(25/30) Installing make (4.3-r0)\n(26/30) Installing taglib (1.11.1-r3)\n(27/30) Installing taglib-dev (1.11.1-r3)\n(28/30) Installing ucl (1.03-r1)\n(29/30) Installing upx (3.96-r1)\n(30/30) Installing zlib-dev (1.2.12-r3)\nExecuting busybox-1.32.1-r7.trigger\nOK: 180 MiB in 44 packages\nRemoving intermediate container 8cee7c26ecc7\n ---> eedeaa2e9439\nStep 3/15 : COPY . /src/euterpe\n ---> befdc823422a\nStep 4/15 : WORKDIR /src/euterpe\n ---> Running in d50a3c5847e7\nRemoving intermediate container d50a3c5847e7\n ---> 071a51a23086\nStep 5/15 : RUN make release\n ---> Running in 138e6581d829\ngo build \\\n\t--tags \"sqlite_icu\" \\\n\t-ldflags \"-X github.com/ironsmile/euterpe/src/version.Version=`git describe --tags --always`\" \\\n\t-o euterpe\n# Compress it somewhat. It seems that the Euterpe binary gets more than 3 times smaller\n# using upx.\nupx euterpe\n                       Ultimate Packer for eXecutables\n                          Copyright (C) 1996 - 2020\nUPX 3.96        Markus Oberhumer, Laszlo Molnar & John Reiser   Jan 23rd 2020\n\n        File size         Ratio      Format      Name\n   --------------------   ------   -----------   -----------\n  17463568 ->  10096456   57.81%   linux/amd64   euterpe\n\nPacked 1 file.\nRemoving intermediate container 138e6581d829\n ---> 0fdf45b9429f\nStep 6/15 : RUN mv euterpe /tmp/euterpe\n ---> Running in ff42bea8a1c5\nRemoving intermediate container ff42bea8a1c5\n ---> 86bf07c3177c\nStep 7/15 : RUN /tmp/euterpe -config-gen && sed -i 's/localhost:9996/0.0.0.0:9996/' /root/.euterpe/config.json\n ---> Running in ba2616f3cbfa\nRemoving intermediate container ba2616f3cbfa\n ---> 5fcf260d8da8\nStep 8/15 : FROM alpine:3.13\n ---> 6b5c5e00213a\nStep 9/15 : RUN apk add --no-cache --update taglib icu\n ---> Running in e78c54b4f5b4\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.13/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.13/community/x86_64/APKINDEX.tar.gz\n(1/5) Installing libgcc (10.2.1_pre1-r3)\n(2/5) Installing libstdc++ (10.2.1_pre1-r3)\n(3/5) Installing icu-libs (67.1-r2)\n(4/5) Installing icu (67.1-r2)\n(5/5) Installing taglib (1.11.1-r3)\nExecuting busybox-1.32.1-r9.trigger\nOK: 41 MiB in 19 packages\nRemoving intermediate container e78c54b4f5b4\n ---> cad702bd0f10\nStep 10/15 : COPY --from=builder /tmp/euterpe /usr/local/bin/euterpe\n ---> 9acc8cf236b2\nStep 11/15 : COPY --from=builder /root/.euterpe/config.json /root/.euterpe/config.json\n ---> 797d4bf31960\nStep 12/15 : ENV HOME /root\n ---> Running in 7f2d07303c47\nRemoving intermediate container 7f2d07303c47\n ---> 0b5b1d361738\nStep 13/15 : WORKDIR /root\n ---> Running in 597f9b47a4c5\nRemoving intermediate container 597f9b47a4c5\n ---> d6175c22d6e9\nStep 14/15 : EXPOSE 9996\n ---> Running in 102d82920480\nRemoving intermediate container 102d82920480\n ---> 66ee3943a54e\nStep 15/15 : CMD [\"euterpe\"]\n ---> Running in f000d2b679ad\nRemoving intermediate container f000d2b679ad\n ---> febccac9caa4\nSuccessfully built febccac9caa4\nSuccessfully tagged euterpe:latest\n","stderr":"","imageSize":52156474}}