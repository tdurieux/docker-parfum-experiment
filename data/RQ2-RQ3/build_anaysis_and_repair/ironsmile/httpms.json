{"repository":"https://github.com/ironsmile/httpms","dockerfilePath":"Dockerfile","startTime":1672808598116,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/ironsmile/httpms'...\n","error":null,"commit":"0f04db85c775c642f4c0b739948deef968a87ec6"},"originalBuild":{"startTimestamp":1672808600206,"endTimestamp":1672808710131,"error":null,"stdout":"Sending build context to Docker daemon   23.9MB\r\r\nStep 1/15 : FROM golang:1.16-alpine3.13 as builder\n1.16-alpine3.13: Pulling from library/golang\n5758d4e389a3: Already exists\n04b7a40ca5d5: Pulling fs layer\n452a8c64b8e1: Pulling fs layer\n01da5aed4ae6: Pulling fs layer\n83967ad3b539: Pulling fs layer\n83967ad3b539: Waiting\n04b7a40ca5d5: Download complete\n452a8c64b8e1: Download complete\n04b7a40ca5d5: Pull complete\n452a8c64b8e1: Pull complete\n83967ad3b539: Verifying Checksum\n83967ad3b539: Download complete\n01da5aed4ae6: Verifying Checksum\n01da5aed4ae6: Download complete\n01da5aed4ae6: Pull complete\n83967ad3b539: Pull complete\nDigest: sha256:c538c29503b9ac4b874ae776a0537fe16fde4581af896d112e53a44a9963b116\nStatus: Downloaded newer image for golang:1.16-alpine3.13\n ---> e1b239f8b504\nStep 2/15 : RUN apk add --update taglib-dev libc-dev icu-dev upx make gcc git zlib-dev\n ---> Running in 67769b6634d4\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.13/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.13/community/x86_64/APKINDEX.tar.gz\n(1/30) Upgrading zlib (1.2.11-r3 -> 1.2.12-r3)\n(2/30) Installing libgcc (10.2.1_pre1-r3)\n(3/30) Installing libstdc++ (10.2.1_pre1-r3)\n(4/30) Installing binutils (2.35.2-r1)\n(5/30) Installing libgomp (10.2.1_pre1-r3)\n(6/30) Installing libatomic (10.2.1_pre1-r3)\n(7/30) Installing libgphobos (10.2.1_pre1-r3)\n(8/30) Installing gmp (6.2.1-r1)\n(9/30) Installing isl22 (0.22-r0)\n(10/30) Installing mpfr4 (4.1.0-r0)\n(11/30) Installing mpc1 (1.2.0-r0)\n(12/30) Installing gcc (10.2.1_pre1-r3)\n(13/30) Installing brotli-libs (1.0.9-r3)\n(14/30) Installing nghttp2-libs (1.42.0-r1)\n(15/30) Installing libcurl (7.79.1-r3)\n(16/30) Installing expat (2.2.10-r8)\n(17/30) Installing pcre2 (10.36-r1)\n(18/30) Installing git (2.30.6-r0)\n(19/30) Installing icu-libs (67.1-r2)\n(20/30) Installing icu (67.1-r2)\n(21/30) Installing pkgconf (1.7.3-r0)\n(22/30) Installing icu-dev (67.1-r2)\n(23/30) Installing musl-dev (1.2.2-r1)\n(24/30) Installing libc-dev (0.7.2-r3)\n(25/30) Installing make (4.3-r0)\n(26/30) Installing taglib (1.11.1-r3)\n(27/30) Installing taglib-dev (1.11.1-r3)\n(28/30) Installing ucl (1.03-r1)\n(29/30) Installing upx (3.96-r1)\n(30/30) Installing zlib-dev (1.2.12-r3)\nExecuting busybox-1.32.1-r7.trigger\nOK: 180 MiB in 44 packages\nRemoving intermediate container 67769b6634d4\n ---> 29aa1bb53f12\nStep 3/15 : COPY . /src/euterpe\n ---> 07a5069d89c7\nStep 4/15 : WORKDIR /src/euterpe\n ---> Running in 6b1aa3619b0b\nRemoving intermediate container 6b1aa3619b0b\n ---> 9a81ccaec87d\nStep 5/15 : RUN make release\n ---> Running in 001ce7417ab6\ngo build \\\n\t--tags \"sqlite_icu\" \\\n\t-ldflags \"-X github.com/ironsmile/euterpe/src/version.Version=`git describe --tags --always`\" \\\n\t-o euterpe\n# Compress it somewhat. It seems that the Euterpe binary gets more than 3 times smaller\n# using upx.\nupx euterpe\n                       Ultimate Packer for eXecutables\n                          Copyright (C) 1996 - 2020\nUPX 3.96        Markus Oberhumer, Laszlo Molnar & John Reiser   Jan 23rd 2020\n\n        File size         Ratio      Format      Name\n   --------------------   ------   -----------   -----------\n  17463568 ->  10096456   57.81%   linux/amd64   euterpe\n\nPacked 1 file.\nRemoving intermediate container 001ce7417ab6\n ---> b4ad35764ed0\nStep 6/15 : RUN mv euterpe /tmp/euterpe\n ---> Running in d23b70719580\nRemoving intermediate container d23b70719580\n ---> debd5f0b8ab3\nStep 7/15 : RUN /tmp/euterpe -config-gen && sed -i 's/localhost:9996/0.0.0.0:9996/' /root/.euterpe/config.json\n ---> Running in 5441d71c687c\nRemoving intermediate container 5441d71c687c\n ---> def069829bc7\nStep 8/15 : FROM alpine:3.13\n ---> 6b5c5e00213a\nStep 9/15 : RUN apk add --update taglib icu\n ---> Running in 86c5d96e4838\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.13/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.13/community/x86_64/APKINDEX.tar.gz\n(1/5) Installing libgcc (10.2.1_pre1-r3)\n(2/5) Installing libstdc++ (10.2.1_pre1-r3)\n(3/5) Installing icu-libs (67.1-r2)\n(4/5) Installing icu (67.1-r2)\n(5/5) Installing taglib (1.11.1-r3)\nExecuting busybox-1.32.1-r9.trigger\nOK: 41 MiB in 19 packages\nRemoving intermediate container 86c5d96e4838\n ---> d0321734a685\nStep 10/15 : COPY --from=builder /tmp/euterpe /usr/local/bin/euterpe\n ---> 5bf8af1ee639\nStep 11/15 : COPY --from=builder /root/.euterpe/config.json /root/.euterpe/config.json\n ---> 6f868e4aa162\nStep 12/15 : ENV HOME /root\n ---> Running in f82a1681a3f2\nRemoving intermediate container f82a1681a3f2\n ---> 062a1e96047c\nStep 13/15 : WORKDIR /root\n ---> Running in 0483db4d57a0\nRemoving intermediate container 0483db4d57a0\n ---> 65e27635711e\nStep 14/15 : EXPOSE 9996\n ---> Running in 4b9accaef022\nRemoving intermediate container 4b9accaef022\n ---> f87de056fd11\nStep 15/15 : CMD [\"euterpe\"]\n ---> Running in fefa47fcd05f\nRemoving intermediate container fefa47fcd05f\n ---> 0094e9e8dfaa\nSuccessfully built 0094e9e8dfaa\nSuccessfully tagged httpms:latest\n","stderr":"","imageSize":54144683},"repair":{"violations":[{"name":"apkAddUseNoCache","position":{"start":2,"end":2,"columnStart":4,"columnEnd":74}},{"name":"apkAddUseNoCache","position":{"start":13,"end":13,"columnStart":4,"columnEnd":31}}],"repairedDockerfile":"FROM golang:1.16-alpine3.13 as builder\n\nRUN apk add --no-cache --update taglib-dev libc-dev icu-dev upx make gcc git zlib-dev\n\nCOPY . /src/euterpe\nWORKDIR /src/euterpe\n\nRUN make release\nRUN mv euterpe /tmp/euterpe\nRUN /tmp/euterpe -config-gen && sed -i 's/localhost:9996/0.0.0.0:9996/' /root/.euterpe/config.json\n\nFROM alpine:3.13\n\nRUN apk add --no-cache --update taglib icu\n\nCOPY --from=builder /tmp/euterpe /usr/local/bin/euterpe\nCOPY --from=builder /root/.euterpe/config.json /root/.euterpe/config.json\n\nENV HOME /root\nWORKDIR /root\nEXPOSE 9996\nCMD [\"euterpe\"]\n"},"repairedBuild":{"startTimestamp":1672808710403,"endTimestamp":1672808795570,"error":null,"stdout":"Sending build context to Docker daemon   23.9MB\r\r\nStep 1/15 : FROM golang:1.16-alpine3.13 as builder\n ---> e1b239f8b504\nStep 2/15 : RUN apk add --no-cache --update taglib-dev libc-dev icu-dev upx make gcc git zlib-dev\n ---> Running in 82aae9778466\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.13/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.13/community/x86_64/APKINDEX.tar.gz\n(1/30) Upgrading zlib (1.2.11-r3 -> 1.2.12-r3)\n(2/30) Installing libgcc (10.2.1_pre1-r3)\n(3/30) Installing libstdc++ (10.2.1_pre1-r3)\n(4/30) Installing binutils (2.35.2-r1)\n(5/30) Installing libgomp (10.2.1_pre1-r3)\n(6/30) Installing libatomic (10.2.1_pre1-r3)\n(7/30) Installing libgphobos (10.2.1_pre1-r3)\n(8/30) Installing gmp (6.2.1-r1)\n(9/30) Installing isl22 (0.22-r0)\n(10/30) Installing mpfr4 (4.1.0-r0)\n(11/30) Installing mpc1 (1.2.0-r0)\n(12/30) Installing gcc (10.2.1_pre1-r3)\n(13/30) Installing brotli-libs (1.0.9-r3)\n(14/30) Installing nghttp2-libs (1.42.0-r1)\n(15/30) Installing libcurl (7.79.1-r3)\n(16/30) Installing expat (2.2.10-r8)\n(17/30) Installing pcre2 (10.36-r1)\n(18/30) Installing git (2.30.6-r0)\n(19/30) Installing icu-libs (67.1-r2)\n(20/30) Installing icu (67.1-r2)\n(21/30) Installing pkgconf (1.7.3-r0)\n(22/30) Installing icu-dev (67.1-r2)\n(23/30) Installing musl-dev (1.2.2-r1)\n(24/30) Installing libc-dev (0.7.2-r3)\n(25/30) Installing make (4.3-r0)\n(26/30) Installing taglib (1.11.1-r3)\n(27/30) Installing taglib-dev (1.11.1-r3)\n(28/30) Installing ucl (1.03-r1)\n(29/30) Installing upx (3.96-r1)\n(30/30) Installing zlib-dev (1.2.12-r3)\nExecuting busybox-1.32.1-r7.trigger\nOK: 180 MiB in 44 packages\nRemoving intermediate container 82aae9778466\n ---> 94ba9746a7d6\nStep 3/15 : COPY . /src/euterpe\n ---> 104509a77f50\nStep 4/15 : WORKDIR /src/euterpe\n ---> Running in b6c477f12765\nRemoving intermediate container b6c477f12765\n ---> 9c24c0db2e85\nStep 5/15 : RUN make release\n ---> Running in b764f57c1e84\ngo build \\\n\t--tags \"sqlite_icu\" \\\n\t-ldflags \"-X github.com/ironsmile/euterpe/src/version.Version=`git describe --tags --always`\" \\\n\t-o euterpe\n# Compress it somewhat. It seems that the Euterpe binary gets more than 3 times smaller\n# using upx.\nupx euterpe\n                       Ultimate Packer for eXecutables\n                          Copyright (C) 1996 - 2020\nUPX 3.96        Markus Oberhumer, Laszlo Molnar & John Reiser   Jan 23rd 2020\n\n        File size         Ratio      Format      Name\n   --------------------   ------   -----------   -----------\n  17463568 ->  10096456   57.81%   linux/amd64   euterpe\n\nPacked 1 file.\nRemoving intermediate container b764f57c1e84\n ---> 2a234c13732b\nStep 6/15 : RUN mv euterpe /tmp/euterpe\n ---> Running in 8554fe61d176\nRemoving intermediate container 8554fe61d176\n ---> 1d381ee5d1e0\nStep 7/15 : RUN /tmp/euterpe -config-gen && sed -i 's/localhost:9996/0.0.0.0:9996/' /root/.euterpe/config.json\n ---> Running in 2d148f0631de\nRemoving intermediate container 2d148f0631de\n ---> 8b790e29bf2e\nStep 8/15 : FROM alpine:3.13\n ---> 6b5c5e00213a\nStep 9/15 : RUN apk add --no-cache --update taglib icu\n ---> Running in 2d304c15ff15\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.13/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.13/community/x86_64/APKINDEX.tar.gz\n(1/5) Installing libgcc (10.2.1_pre1-r3)\n(2/5) Installing libstdc++ (10.2.1_pre1-r3)\n(3/5) Installing icu-libs (67.1-r2)\n(4/5) Installing icu (67.1-r2)\n(5/5) Installing taglib (1.11.1-r3)\nExecuting busybox-1.32.1-r9.trigger\nOK: 41 MiB in 19 packages\nRemoving intermediate container 2d304c15ff15\n ---> 118c5cf1ead8\nStep 10/15 : COPY --from=builder /tmp/euterpe /usr/local/bin/euterpe\n ---> 477e1e725815\nStep 11/15 : COPY --from=builder /root/.euterpe/config.json /root/.euterpe/config.json\n ---> d83d779a39b4\nStep 12/15 : ENV HOME /root\n ---> Running in 694005491c2a\nRemoving intermediate container 694005491c2a\n ---> 2b4a6e422aca\nStep 13/15 : WORKDIR /root\n ---> Running in 55b65f6214a9\nRemoving intermediate container 55b65f6214a9\n ---> 97e0659b419a\nStep 14/15 : EXPOSE 9996\n ---> Running in 442fe9fb83dc\nRemoving intermediate container 442fe9fb83dc\n ---> 20ac4c636c02\nStep 15/15 : CMD [\"euterpe\"]\n ---> Running in c80d881d713c\nRemoving intermediate container c80d881d713c\n ---> e4e45da004df\nSuccessfully built e4e45da004df\nSuccessfully tagged httpms:latest\n","stderr":"","imageSize":52156474},"endTime":1672808795819}