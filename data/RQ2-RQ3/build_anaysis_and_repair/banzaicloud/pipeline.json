{"repository":"https://github.com/banzaicloud/pipeline","dockerfilePath":"Dockerfile","startTime":1672820658815,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/banzaicloud/pipeline'...\n","error":null,"commit":"4db913dc5dde155f685550b4ec4fd9373be30f4b"},"originalBuild":{"startTimestamp":1672820660736,"endTimestamp":1672820912686,"error":null,"stdout":"Sending build context to Docker daemon  18.22MB\r\r\nStep 1/45 : ARG GO_VERSION=1.16\nStep 2/45 : ARG FROM_IMAGE=scratch\nStep 3/45 : FROM golang:${GO_VERSION}-alpine3.12 AS builder\n1.16-alpine3.12: Pulling from library/golang\n339de151aab4: Pulling fs layer\nc22b54d2d434: Pulling fs layer\na5898d3d0f1f: Pulling fs layer\n676bd4becac4: Pulling fs layer\n4d9ae1a13abd: Pulling fs layer\n4d9ae1a13abd: Waiting\na5898d3d0f1f: Download complete\nc22b54d2d434: Download complete\n339de151aab4: Verifying Checksum\n339de151aab4: Download complete\n4d9ae1a13abd: Verifying Checksum\n4d9ae1a13abd: Download complete\n339de151aab4: Pull complete\nc22b54d2d434: Pull complete\na5898d3d0f1f: Pull complete\n676bd4becac4: Verifying Checksum\n676bd4becac4: Download complete\n676bd4becac4: Pull complete\n4d9ae1a13abd: Pull complete\nDigest: sha256:db2475a1dbb2149508e5db31d7d77a75e6600d54be645f37681f03f2762169ba\nStatus: Downloaded newer image for golang:1.16-alpine3.12\n ---> baed0e68a17f\nStep 4/45 : RUN echo 'hosts: files dns' > /etc/nsswitch.conf.build\n ---> Running in 7c3220ea4fe7\nRemoving intermediate container 7c3220ea4fe7\n ---> 37ae5de3516c\nStep 5/45 : RUN apk add --update --no-cache bash ca-certificates make curl git mercurial tzdata\n ---> Running in c86107d9e8c5\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.12/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.12/community/x86_64/APKINDEX.tar.gz\n(1/19) Installing ncurses-terminfo-base (6.2_p20200523-r1)\n(2/19) Installing ncurses-libs (6.2_p20200523-r1)\n(3/19) Installing readline (8.0.4-r0)\n(4/19) Installing bash (5.0.17-r0)\nExecuting bash-5.0.17-r0.post-install\n(5/19) Installing nghttp2-libs (1.41.0-r0)\n(6/19) Installing libcurl (7.79.1-r1)\n(7/19) Installing curl (7.79.1-r1)\n(8/19) Installing expat (2.2.10-r4)\n(9/19) Installing pcre2 (10.35-r0)\n(10/19) Installing git (2.26.3-r1)\n(11/19) Installing make (4.3-r0)\n(12/19) Installing libbz2 (1.0.8-r1)\n(13/19) Installing libffi (3.3-r2)\n(14/19) Installing gdbm (1.13-r1)\n(15/19) Installing xz-libs (5.2.5-r1)\n(16/19) Installing sqlite-libs (3.32.1-r1)\n(17/19) Installing python3 (3.8.10-r0)\n(18/19) Installing mercurial (5.4-r0)\n(19/19) Installing tzdata (2022a-r0)\nExecuting busybox-1.31.1-r20.trigger\nOK: 96 MiB in 34 packages\nRemoving intermediate container c86107d9e8c5\n ---> c2bec72c80f5\nStep 6/45 : ENV GOFLAGS=\"-mod=readonly\"\n ---> Running in 6c6b330f9caf\nRemoving intermediate container 6c6b330f9caf\n ---> a0b933de9730\nStep 7/45 : ARG GOPROXY\n ---> Running in 356c81f64401\nRemoving intermediate container 356c81f64401\n ---> d11c42708882\nStep 8/45 : RUN mkdir -p /build\n ---> Running in 4847f5642936\nRemoving intermediate container 4847f5642936\n ---> 2a835b5da3bd\nStep 9/45 : WORKDIR /build\n ---> Running in 1c12334af8ff\nRemoving intermediate container 1c12334af8ff\n ---> cc05725183ea\nStep 10/45 : COPY go.* /build/\n ---> c43ad9720c0b\nStep 11/45 : COPY pkg/sdk/go.* /build/pkg/sdk/\n ---> 5f2645611869\nStep 12/45 : RUN go mod download\n ---> Running in 72913c71f977\nRemoving intermediate container 72913c71f977\n ---> 08442036a0aa\nStep 13/45 : ARG VERSION\n ---> Running in 199fffaa8844\nRemoving intermediate container 199fffaa8844\n ---> 5703ffd23c49\nStep 14/45 : ARG COMMIT_HASH\n ---> Running in 92547e452bd9\nRemoving intermediate container 92547e452bd9\n ---> 949c6ca7039a\nStep 15/45 : ARG BUILD_DATE\n ---> Running in e6df0e6bd842\nRemoving intermediate container e6df0e6bd842\n ---> 92331fee2ccb\nStep 16/45 : COPY . /build\n ---> 7b059b90e68b\nStep 17/45 : RUN make build-release\n ---> Running in 8b19152822ba\nmake[1]: Entering directory '/build'\ngo build -trimpath -tags \"\" -ldflags \"-w -X main.version=master -X main.commitHash=4db913d -X main.buildDate=2023-01-04T08:26:49+0000 -X main.helmVersion=3.6.1\" -o build/release/ ./cmd/...\nmake[1]: Leaving directory '/build'\nRemoving intermediate container 8b19152822ba\n ---> 68c8965d7c39\nStep 18/45 : FROM alpine:3.13 AS iamauth\n3.13: Pulling from library/alpine\n72cfd02ff4d0: Pulling fs layer\n72cfd02ff4d0: Verifying Checksum\n72cfd02ff4d0: Download complete\n72cfd02ff4d0: Pull complete\nDigest: sha256:469b6e04ee185740477efa44ed5bdd64a07bbdd6c7e5f5d169e540889597b911\nStatus: Downloaded newer image for alpine:3.13\n ---> 6b5c5e00213a\nStep 19/45 : WORKDIR /tmp\n ---> Running in ce9e2ba2f103\nRemoving intermediate container ce9e2ba2f103\n ---> b81d1257c45f\nStep 20/45 : ENV IAM_AUTH_VERSION 0.5.9\n ---> Running in 03301fdcd3ce\nRemoving intermediate container 03301fdcd3ce\n ---> 6359cadfb8d9\nStep 21/45 : ENV IAM_AUTH_URL \"https://github.com/kubernetes-sigs/aws-iam-authenticator/releases/download/v${IAM_AUTH_VERSION}\"\n ---> Running in 7fdd30985df0\nRemoving intermediate container 7fdd30985df0\n ---> 0768ecd33f5a\nStep 22/45 : RUN set -xe     && wget ${IAM_AUTH_URL}/aws-iam-authenticator_${IAM_AUTH_VERSION}_linux_amd64     && wget ${IAM_AUTH_URL}/authenticator_${IAM_AUTH_VERSION}_checksums.txt     && cat authenticator_${IAM_AUTH_VERSION}_checksums.txt | grep \"_linux_amd64\" | sha256sum -c -     && chmod +x aws-iam-authenticator_${IAM_AUTH_VERSION}_linux_amd64     && mv aws-iam-authenticator_${IAM_AUTH_VERSION}_linux_amd64 aws-iam-authenticator\n ---> Running in 2b30e2e7699a\n\u001b[91m+ wget https://github.com/kubernetes-sigs/aws-iam-authenticator/releases/download/v0.5.9/aws-iam-authenticator_0.5.9_linux_amd64\n\u001b[0m\u001b[91mConnecting to github.com (140.82.121.3:443)\n\u001b[0m\u001b[91mConnecting to objects.githubusercontent.com (185.199.108.133:443)\n\u001b[0m\u001b[91msaving to 'aws-iam-authenticator_0.5.9_linux_amd64'\n\u001b[0m\u001b[91maws-iam-authenticato   9% |**                              | 4096k  0:00:09 ETA\n\u001b[0m\u001b[91maws-iam-authenticato  72% |***********************         | 32.0M  0:00:00 ETA\n\u001b[0m\u001b[91maws-iam-authenticato 100% |********************************| 43.8M  0:00:00 ETA\n'aws-iam-authenticator_0.5.9_linux_amd64' saved\n\u001b[0m\u001b[91m+ wget https://github.com/kubernetes-sigs/aws-iam-authenticator/releases/download/v0.5.9/authenticator_0.5.9_checksums.txt\n\u001b[0m\u001b[91mConnecting to github.com (140.82.121.3:443)\n\u001b[0m\u001b[91mConnecting to objects.githubusercontent.com (185.199.110.133:443)\n\u001b[0m\u001b[91msaving to 'authenticator_0.5.9_checksums.txt'\nauthenticator_0.5.9_ 100% |********************************|   538  0:00:00 ETA\n'authenticator_0.5.9_checksums.txt' saved\n\u001b[0m\u001b[91m+ cat authenticator_0.5.9_checksums.txt\n\u001b[0m\u001b[91m+ grep _linux_amd64\n\u001b[0m\u001b[91m+ sha256sum -c -\n\u001b[0maws-iam-authenticator_0.5.9_linux_amd64: OK\n\u001b[91m+ chmod +x aws-iam-authenticator_0.5.9_linux_amd64\n\u001b[0m\u001b[91m+ mv aws-iam-authenticator_0.5.9_linux_amd64 aws-iam-authenticator\n\u001b[0mRemoving intermediate container 2b30e2e7699a\n ---> 711739052dfb\nStep 23/45 : FROM alpine:3.13 AS helms3\n ---> 6b5c5e00213a\nStep 24/45 : WORKDIR /tmp\n ---> Running in b5feeb7929d8\nRemoving intermediate container b5feeb7929d8\n ---> 9c414f56a7f5\nStep 25/45 : ENV HELM_S3_PLUGIN_VERSION=0.11.0\n ---> Running in 17a7ca7c6fc3\nRemoving intermediate container 17a7ca7c6fc3\n ---> b37d0dd59f0d\nStep 26/45 : ENV HELM_S3_ARCHIVE_FILE_NAME=\"helm-s3_${HELM_S3_PLUGIN_VERSION}_linux_amd64.tar.gz\"     HELM_S3_CHECKSUMS_FILE_NAME=\"helm-s3_${HELM_S3_PLUGIN_VERSION}_sha512_checksums.txt\"     HELM_S3_PLUGIN_URL=\"https://github.com/banzaicloud/helm-s3/releases/download/v${HELM_S3_PLUGIN_VERSION}\"\n ---> Running in 55632eaa6da0\nRemoving intermediate container 55632eaa6da0\n ---> 2e564e6cc6bd\nStep 27/45 : RUN set -xe     && mkdir -p helm-plugins/helm-s3     && wget \"${HELM_S3_PLUGIN_URL}/${HELM_S3_ARCHIVE_FILE_NAME}\"     && wget \"${HELM_S3_PLUGIN_URL}/${HELM_S3_CHECKSUMS_FILE_NAME}\"     && cat \"${HELM_S3_CHECKSUMS_FILE_NAME}\" | grep -E \"^[0-9a-z]+  ${HELM_S3_ARCHIVE_FILE_NAME}$\" | sha512sum -c -     && tar xzf \"${HELM_S3_ARCHIVE_FILE_NAME}\" -C \"helm-plugins/helm-s3\"\n ---> Running in 0de5b7d7dda3\n\u001b[91m+ mkdir -p helm-plugins/helm-s3\n\u001b[0m\u001b[91m+ wget https://github.com/banzaicloud/helm-s3/releases/download/v0.11.0/helm-s3_0.11.0_linux_amd64.tar.gz\n\u001b[0m\u001b[91mConnecting to github.com (140.82.121.3:443)\n\u001b[0m\u001b[91mConnecting to objects.githubusercontent.com (185.199.108.133:443)\n\u001b[0m\u001b[91msaving to 'helm-s3_0.11.0_linux_amd64.tar.gz'\n\u001b[0m\u001b[91mhelm-s3_0.11.0_linux   3% |                                |  303k  0:00:31 ETA\n\u001b[0m\u001b[91mhelm-s3_0.11.0_linux 100% |********************************| 9988k  0:00:00 ETA\n'helm-s3_0.11.0_linux_amd64.tar.gz' saved\n\u001b[0m\u001b[91m+ wget https://github.com/banzaicloud/helm-s3/releases/download/v0.11.0/helm-s3_0.11.0_sha512_checksums.txt\n\u001b[0m\u001b[91mConnecting to github.com (140.82.121.3:443)\n\u001b[0m\u001b[91mConnecting to objects.githubusercontent.com (185.199.110.133:443)\n\u001b[0m\u001b[91msaving to 'helm-s3_0.11.0_sha512_checksums.txt'\nhelm-s3_0.11.0_sha51 100% |********************************|  1284  0:00:00 ETA\n'helm-s3_0.11.0_sha512_checksums.txt' saved\n\u001b[0m\u001b[91m+ cat helm-s3_0.11.0_sha512_checksums.txt\n\u001b[0m\u001b[91m+ grep -E '^[0-9a-z]+  helm-s3_0.11.0_linux_amd64.tar.gz$'\n\u001b[0m\u001b[91m+ sha512sum -c -\n\u001b[0mhelm-s3_0.11.0_linux_amd64.tar.gz: OK\n\u001b[91m+ tar xzf helm-s3_0.11.0_linux_amd64.tar.gz -C helm-plugins/helm-s3\u001b[0m\u001b[91m\n\u001b[0mRemoving intermediate container 0de5b7d7dda3\n ---> 2ce68fb0287e\nStep 28/45 : FROM alpine:3.13 AS migrate\n ---> 6b5c5e00213a\nStep 29/45 : ENV MIGRATE_VERSION v4.9.1\n ---> Running in 8fe03182e515\nRemoving intermediate container 8fe03182e515\n ---> 44d2b45a0219\nStep 30/45 : RUN set -xe &&     apk add --update --no-cache ca-certificates curl &&     curl -L https://github.com/golang-migrate/migrate/releases/download/${MIGRATE_VERSION}/migrate.linux-amd64.tar.gz | tar xvz &&     mv migrate.linux-amd64 /tmp/migrate\n ---> Running in 07df08cbc87b\n\u001b[91m+ apk add --update --no-cache ca-certificates curl\n\u001b[0mfetch https://dl-cdn.alpinelinux.org/alpine/v3.13/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.13/community/x86_64/APKINDEX.tar.gz\n(1/5) Installing ca-certificates (20220614-r0)\n(2/5) Installing brotli-libs (1.0.9-r3)\n(3/5) Installing nghttp2-libs (1.42.0-r1)\n(4/5) Installing libcurl (7.79.1-r3)\n(5/5) Installing curl (7.79.1-r3)\nExecuting busybox-1.32.1-r9.trigger\nExecuting ca-certificates-20220614-r0.trigger\nOK: 8 MiB in 19 packages\n\u001b[91m+ curl -L https://github.com/golang-migrate/migrate/releases/download/v4.9.1/migrate.linux-amd64.tar.gz\n\u001b[0m\u001b[91m+ tar xvz\n\u001b[0m\u001b[91m  % Total    % Received % Xfe\u001b[0m\u001b[91mrd  Average Speed   \u001b[0m\u001b[91mTime    Tim\u001b[0m\u001b[91me     Time  \u001b[0m\u001b[91mCurrent\n                    \u001b[0m\u001b[91m             \u001b[0m\u001b[91mDload  Upload   Total   Spen\u001b[0m\u001b[91mt\u001b[0m\u001b[91m    \u001b[0m\u001b[91mL\u001b[0m\u001b[91meft  \u001b[0m\u001b[91mS\u001b[0m\u001b[91mpee\u001b[0m\u001b[91md\n\u001b[0m\u001b[91m\r  0   \u001b[0m\u001b[91m  0    0     \u001b[0m\u001b[91m0    \u001b[0m\u001b[91m0   \u001b[0m\u001b[91m \u001b[0m\u001b[91m 0     \u001b[0m\u001b[91m 0  \u001b[0m\u001b[91m \u001b[0m\u001b[91m   \u001b[0m\u001b[91m0 \u001b[0m\u001b[91m--:\u001b[0m\u001b[91m--:-- \u001b[0m\u001b[91m-\u001b[0m\u001b[91m-:-\u001b[0m\u001b[91m-:-- \u001b[0m\u001b[91m--:\u001b[0m\u001b[91m--:--\u001b[0m\u001b[91m  \u001b[0m\u001b[91m  \u001b[0m\u001b[91m 0\u001b[0m\u001b[91m\r  0     0    0     0    0     0      0      0 --:--:-- --:--:-\u001b[0m\u001b[91m- -\u001b[0m\u001b[91m-:--:--     0\n\u001b[0m\u001b[91m\r  0 15.9M    0  8259    0     0   95\u001b[0m\u001b[91m50      0  0:29:16\u001b[0m\u001b[91m --:--:--  0:\u001b[0m\u001b[91m29:16  9550\u001b[0m./migrate.linux-amd64\n\u001b[91m\r100 15.9M  100 15.9M    0     0  1\u001b[0m\u001b[91m1.3M      0  0:00:\u001b[0m\u001b[91m01  0:00:01 --:\u001b[0m\u001b[91m--:\u001b[0m\u001b[91m-- 29.\u001b[0m\u001b[91m3M\n\u001b[0m\u001b[91m+ mv migrate.linux-amd64 /tmp/migrate\n\u001b[0mRemoving intermediate container 07df08cbc87b\n ---> c0b0bba04cce\nStep 31/45 : FROM ${FROM_IMAGE}\n ---> \nStep 32/45 : ENV HELM_PLUGINS=/usr/share/helm/plugins\n ---> Running in e773b53767c5\nRemoving intermediate container e773b53767c5\n ---> a87e6e327571\nStep 33/45 : COPY --from=builder /etc/nsswitch.conf.build /etc/nsswitch.conf\n ---> 21696d18712f\nStep 34/45 : COPY --from=builder /usr/share/zoneinfo /usr/share/zoneinfo\n ---> 3f32623a1bdc\nStep 35/45 : COPY --from=builder /etc/ssl/certs/ca-certificates.crt /etc/ssl/certs/\n ---> 5572805efb5c\nStep 36/45 : COPY --from=iamauth /tmp/aws-iam-authenticator /usr/bin/\n ---> 075fdaed89ca\nStep 37/45 : COPY --from=helms3 /tmp/helm-plugins /usr/share/helm/plugins\n ---> 1e7e58b9de95\nStep 38/45 : COPY --from=migrate /tmp/migrate /usr/bin/\n ---> eda2e6bd24fe\nStep 39/45 : COPY --from=builder /build/database/migrations /migrations/\n ---> 71c0df470554\nStep 40/45 : COPY --from=builder /build/templates /templates/\n ---> fa6a21dd0b7a\nStep 41/45 : COPY --from=builder /build/build/release/pipeline /\n ---> 845df9663156\nStep 42/45 : COPY --from=builder /build/build/release/worker /\n ---> 7d1844f984c6\nStep 43/45 : COPY --from=builder /build/build/release/pipelinectl /\n ---> ebc4328b9355\nStep 44/45 : COPY config/anchore/policies/ /policies/\n ---> 2be153debf21\nStep 45/45 : CMD [\"/pipeline\"]\n ---> Running in 4d1d6db2cd03\nRemoving intermediate container 4d1d6db2cd03\n ---> 3e676b5b459d\nSuccessfully built 3e676b5b459d\nSuccessfully tagged pipeline:latest\n","stderr":"","imageSize":374676067},"repair":{"violations":[{"name":"curlUseFlagF","position":{"start":65,"end":65,"columnStart":4,"columnEnd":117}}],"repairedDockerfile":"ARG GO_VERSION=1.16\nARG FROM_IMAGE=scratch\n\nFROM golang:${GO_VERSION}-alpine3.12 AS builder\n\n# set up nsswitch.conf for Go's \"netgo\" implementation\n# https://github.com/gliderlabs/docker-alpine/issues/367#issuecomment-424546457\nRUN echo 'hosts: files dns' > /etc/nsswitch.conf.build\n\nRUN apk add --update --no-cache bash ca-certificates make curl git mercurial tzdata\n\nENV GOFLAGS=\"-mod=readonly\"\nARG GOPROXY\n\nRUN mkdir -p /build\nWORKDIR /build\n\nCOPY go.* /build/\nCOPY pkg/sdk/go.* /build/pkg/sdk/\nRUN go mod download\n\nARG VERSION\nARG COMMIT_HASH\nARG BUILD_DATE\n\nCOPY . /build\nRUN make build-release\n\n\nFROM alpine:3.13 AS iamauth\n\nWORKDIR /tmp\n\nENV IAM_AUTH_VERSION 0.5.9\nENV IAM_AUTH_URL \"https://github.com/kubernetes-sigs/aws-iam-authenticator/releases/download/v${IAM_AUTH_VERSION}\"\nRUN set -xe \\\n    && wget ${IAM_AUTH_URL}/aws-iam-authenticator_${IAM_AUTH_VERSION}_linux_amd64 \\\n    && wget ${IAM_AUTH_URL}/authenticator_${IAM_AUTH_VERSION}_checksums.txt \\\n    && cat authenticator_${IAM_AUTH_VERSION}_checksums.txt | grep \"_linux_amd64\" | sha256sum -c - \\\n    && chmod +x aws-iam-authenticator_${IAM_AUTH_VERSION}_linux_amd64 \\\n    && mv aws-iam-authenticator_${IAM_AUTH_VERSION}_linux_amd64 aws-iam-authenticator\n\nFROM alpine:3.13 AS helms3\n\nWORKDIR /tmp\n\nENV HELM_S3_PLUGIN_VERSION=0.11.0\n\nENV HELM_S3_ARCHIVE_FILE_NAME=\"helm-s3_${HELM_S3_PLUGIN_VERSION}_linux_amd64.tar.gz\" \\\n    HELM_S3_CHECKSUMS_FILE_NAME=\"helm-s3_${HELM_S3_PLUGIN_VERSION}_sha512_checksums.txt\" \\\n    HELM_S3_PLUGIN_URL=\"https://github.com/banzaicloud/helm-s3/releases/download/v${HELM_S3_PLUGIN_VERSION}\"\n\nRUN set -xe \\\n    && mkdir -p helm-plugins/helm-s3 \\\n    && wget \"${HELM_S3_PLUGIN_URL}/${HELM_S3_ARCHIVE_FILE_NAME}\" \\\n    && wget \"${HELM_S3_PLUGIN_URL}/${HELM_S3_CHECKSUMS_FILE_NAME}\" \\\n    && cat \"${HELM_S3_CHECKSUMS_FILE_NAME}\" | grep -E \"^[0-9a-z]+  ${HELM_S3_ARCHIVE_FILE_NAME}$\" | sha512sum -c - \\\n    && tar xzf \"${HELM_S3_ARCHIVE_FILE_NAME}\" -C \"helm-plugins/helm-s3\"\n\nFROM alpine:3.13 AS migrate\n\nENV MIGRATE_VERSION v4.9.1\n\nRUN set -xe && \\\n    apk add --update --no-cache ca-certificates curl && \\\n    curl -f -L https://github.com/golang-migrate/migrate/releases/download/${MIGRATE_VERSION}/migrate.linux-amd64.tar.gz | tar xvz && \\\n    mv migrate.linux-amd64 /tmp/migrate\n\n\nFROM ${FROM_IMAGE}\n\nENV HELM_PLUGINS=/usr/share/helm/plugins\n\nCOPY --from=builder /etc/nsswitch.conf.build /etc/nsswitch.conf\nCOPY --from=builder /usr/share/zoneinfo /usr/share/zoneinfo\nCOPY --from=builder /etc/ssl/certs/ca-certificates.crt /etc/ssl/certs/\nCOPY --from=iamauth /tmp/aws-iam-authenticator /usr/bin/\nCOPY --from=helms3 /tmp/helm-plugins /usr/share/helm/plugins\nCOPY --from=migrate /tmp/migrate /usr/bin/\nCOPY --from=builder /build/database/migrations /migrations/\nCOPY --from=builder /build/templates /templates/\nCOPY --from=builder /build/build/release/pipeline /\nCOPY --from=builder /build/build/release/worker /\nCOPY --from=builder /build/build/release/pipelinectl /\nCOPY config/anchore/policies/ /policies/\n\nCMD [\"/pipeline\"]\n"},"repairedBuild":{"startTimestamp":1672820913145,"endTimestamp":1672821172206,"error":null,"stdout":"Sending build context to Docker daemon  18.22MB\r\r\nStep 1/45 : ARG GO_VERSION=1.16\nStep 2/45 : ARG FROM_IMAGE=scratch\nStep 3/45 : FROM golang:${GO_VERSION}-alpine3.12 AS builder\n ---> baed0e68a17f\nStep 4/45 : RUN echo 'hosts: files dns' > /etc/nsswitch.conf.build\n ---> Running in cc8a07f3322a\nRemoving intermediate container cc8a07f3322a\n ---> 34e34b9ef931\nStep 5/45 : RUN apk add --update --no-cache bash ca-certificates make curl git mercurial tzdata\n ---> Running in 5aef9ff99630\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.12/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.12/community/x86_64/APKINDEX.tar.gz\n(1/19) Installing ncurses-terminfo-base (6.2_p20200523-r1)\n(2/19) Installing ncurses-libs (6.2_p20200523-r1)\n(3/19) Installing readline (8.0.4-r0)\n(4/19) Installing bash (5.0.17-r0)\nExecuting bash-5.0.17-r0.post-install\n(5/19) Installing nghttp2-libs (1.41.0-r0)\n(6/19) Installing libcurl (7.79.1-r1)\n(7/19) Installing curl (7.79.1-r1)\n(8/19) Installing expat (2.2.10-r4)\n(9/19) Installing pcre2 (10.35-r0)\n(10/19) Installing git (2.26.3-r1)\n(11/19) Installing make (4.3-r0)\n(12/19) Installing libbz2 (1.0.8-r1)\n(13/19) Installing libffi (3.3-r2)\n(14/19) Installing gdbm (1.13-r1)\n(15/19) Installing xz-libs (5.2.5-r1)\n(16/19) Installing sqlite-libs (3.32.1-r1)\n(17/19) Installing python3 (3.8.10-r0)\n(18/19) Installing mercurial (5.4-r0)\n(19/19) Installing tzdata (2022a-r0)\nExecuting busybox-1.31.1-r20.trigger\nOK: 96 MiB in 34 packages\nRemoving intermediate container 5aef9ff99630\n ---> 767e9d34a73e\nStep 6/45 : ENV GOFLAGS=\"-mod=readonly\"\n ---> Running in 33598ed48878\nRemoving intermediate container 33598ed48878\n ---> dd5d21af34d4\nStep 7/45 : ARG GOPROXY\n ---> Running in 2c67aa44fe4a\nRemoving intermediate container 2c67aa44fe4a\n ---> 9275bfe1c751\nStep 8/45 : RUN mkdir -p /build\n ---> Running in 26fd10d9061a\nRemoving intermediate container 26fd10d9061a\n ---> e0f47bffe34a\nStep 9/45 : WORKDIR /build\n ---> Running in 5778e46364db\nRemoving intermediate container 5778e46364db\n ---> 007bb32d7faa\nStep 10/45 : COPY go.* /build/\n ---> 3900f2c7b2e2\nStep 11/45 : COPY pkg/sdk/go.* /build/pkg/sdk/\n ---> fd90bced85a7\nStep 12/45 : RUN go mod download\n ---> Running in 597d5dbb0888\nRemoving intermediate container 597d5dbb0888\n ---> be7e4208e786\nStep 13/45 : ARG VERSION\n ---> Running in 6ea51d8d475c\nRemoving intermediate container 6ea51d8d475c\n ---> 0ec99cfb82e9\nStep 14/45 : ARG COMMIT_HASH\n ---> Running in f7ebc48438a7\nRemoving intermediate container f7ebc48438a7\n ---> 6d5694b5714c\nStep 15/45 : ARG BUILD_DATE\n ---> Running in fe89d160dfe1\nRemoving intermediate container fe89d160dfe1\n ---> 1aa799973c59\nStep 16/45 : COPY . /build\n ---> 5f3424fdb478\nStep 17/45 : RUN make build-release\n ---> Running in 4cb8a5e29f90\nmake[1]: Entering directory '/build'\ngo build -trimpath -tags \"\" -ldflags \"-w -X main.version=master -X main.commitHash=4db913d -X main.buildDate=2023-01-04T08:30:46+0000 -X main.helmVersion=3.6.1\" -o build/release/ ./cmd/...\nmake[1]: Leaving directory '/build'\nRemoving intermediate container 4cb8a5e29f90\n ---> 64d342677893\nStep 18/45 : FROM alpine:3.13 AS iamauth\n ---> 6b5c5e00213a\nStep 19/45 : WORKDIR /tmp\n ---> Running in 495db83aa577\nRemoving intermediate container 495db83aa577\n ---> b9aab0d768fd\nStep 20/45 : ENV IAM_AUTH_VERSION 0.5.9\n ---> Running in 1dd479357211\nRemoving intermediate container 1dd479357211\n ---> 0e890da61028\nStep 21/45 : ENV IAM_AUTH_URL \"https://github.com/kubernetes-sigs/aws-iam-authenticator/releases/download/v${IAM_AUTH_VERSION}\"\n ---> Running in d6b6750599a1\nRemoving intermediate container d6b6750599a1\n ---> b8503665173f\nStep 22/45 : RUN set -xe     && wget ${IAM_AUTH_URL}/aws-iam-authenticator_${IAM_AUTH_VERSION}_linux_amd64     && wget ${IAM_AUTH_URL}/authenticator_${IAM_AUTH_VERSION}_checksums.txt     && cat authenticator_${IAM_AUTH_VERSION}_checksums.txt | grep \"_linux_amd64\" | sha256sum -c -     && chmod +x aws-iam-authenticator_${IAM_AUTH_VERSION}_linux_amd64     && mv aws-iam-authenticator_${IAM_AUTH_VERSION}_linux_amd64 aws-iam-authenticator\n ---> Running in 2f9c615bda66\n\u001b[91m+ wget https://github.com/kubernetes-sigs/aws-iam-authenticator/releases/download/v0.5.9/aws-iam-authenticator_0.5.9_linux_amd64\n\u001b[0m\u001b[91mConnecting to github.com (140.82.121.4:443)\n\u001b[0m\u001b[91mConnecting to objects.githubusercontent.com (185.199.108.133:443)\n\u001b[0m\u001b[91msaving to 'aws-iam-authenticator_0.5.9_linux_amd64'\n\u001b[0m\u001b[91maws-iam-authenticato   9% |**                              | 4096k  0:00:09 ETA\n\u001b[0m\u001b[91maws-iam-authenticato  51% |****************                | 22.5M  0:00:01 ETA\n\u001b[0m\u001b[91maws-iam-authenticato  91% |*****************************   | 40.0M  0:00:00 ETA\n\u001b[0m\u001b[91maws-iam-authenticato 100% |********************************| 43.8M  0:00:00 ETA\n'aws-iam-authenticator_0.5.9_linux_amd64' saved\n+ wget https://github.com/kubernetes-sigs/aws-iam-authenticator/releases/download/v0.5.9/authenticator_0.5.9_checksums.txt\n\u001b[0m\u001b[91mConnecting to github.com (140.82.121.3:443)\n\u001b[0m\u001b[91mConnecting to objects.githubusercontent.com (185.199.111.133:443)\n\u001b[0m\u001b[91msaving to 'authenticator_0.5.9_checksums.txt'\nauthenticator_0.5.9_ 100% |********************************|   538  0:00:00 ETA\n'authenticator_0.5.9_checksums.txt' saved\n\u001b[0m\u001b[91m+ cat authenticator_0.5.9_checksums.txt\n\u001b[0m\u001b[91m+ grep _linux_amd64\n\u001b[0m\u001b[91m+ sha256sum -c -\n\u001b[0maws-iam-authenticator_0.5.9_linux_amd64: OK\n\u001b[91m+ chmod +x aws-iam-authenticator_0.5.9_linux_amd64\n\u001b[0m\u001b[91m+ mv aws-iam-authenticator_0.5.9_linux_amd64 aws-iam-authenticator\n\u001b[0mRemoving intermediate container 2f9c615bda66\n ---> 23818b7623cb\nStep 23/45 : FROM alpine:3.13 AS helms3\n ---> 6b5c5e00213a\nStep 24/45 : WORKDIR /tmp\n ---> Running in 41f2fdfdddd6\nRemoving intermediate container 41f2fdfdddd6\n ---> 76b19f68d4d5\nStep 25/45 : ENV HELM_S3_PLUGIN_VERSION=0.11.0\n ---> Running in c75e099650ab\nRemoving intermediate container c75e099650ab\n ---> 6c0b78cf5e88\nStep 26/45 : ENV HELM_S3_ARCHIVE_FILE_NAME=\"helm-s3_${HELM_S3_PLUGIN_VERSION}_linux_amd64.tar.gz\"     HELM_S3_CHECKSUMS_FILE_NAME=\"helm-s3_${HELM_S3_PLUGIN_VERSION}_sha512_checksums.txt\"     HELM_S3_PLUGIN_URL=\"https://github.com/banzaicloud/helm-s3/releases/download/v${HELM_S3_PLUGIN_VERSION}\"\n ---> Running in 92a9429cfde0\nRemoving intermediate container 92a9429cfde0\n ---> 20728befeab9\nStep 27/45 : RUN set -xe     && mkdir -p helm-plugins/helm-s3     && wget \"${HELM_S3_PLUGIN_URL}/${HELM_S3_ARCHIVE_FILE_NAME}\"     && wget \"${HELM_S3_PLUGIN_URL}/${HELM_S3_CHECKSUMS_FILE_NAME}\"     && cat \"${HELM_S3_CHECKSUMS_FILE_NAME}\" | grep -E \"^[0-9a-z]+  ${HELM_S3_ARCHIVE_FILE_NAME}$\" | sha512sum -c -     && tar xzf \"${HELM_S3_ARCHIVE_FILE_NAME}\" -C \"helm-plugins/helm-s3\"\n ---> Running in 16499de789ff\n\u001b[91m+ mkdir -p helm-plugins/helm-s3\n\u001b[0m\u001b[91m+ wget https://github.com/banzaicloud/helm-s3/releases/download/v0.11.0/helm-s3_0.11.0_linux_amd64.tar.gz\n\u001b[0m\u001b[91mConnecting to github.com (140.82.121.4:443)\n\u001b[0m\u001b[91mConnecting to objects.githubusercontent.com (185.199.108.133:443)\n\u001b[0m\u001b[91msaving to 'helm-s3_0.11.0_linux_amd64.tar.gz'\n\u001b[0m\u001b[91mhelm-s3_0.11.0_linux  82% |**************************      | 8192k  0:00:00 ETA\n\u001b[0m\u001b[91mhelm-s3_0.11.0_linux 100% |********************************| 9988k  0:00:00 ETA\n'helm-s3_0.11.0_linux_amd64.tar.gz' saved\n\u001b[0m\u001b[91m+ wget https://github.com/banzaicloud/helm-s3/releases/download/v0.11.0/helm-s3_0.11.0_sha512_checksums.txt\n\u001b[0m\u001b[91mConnecting to github.com (140.82.121.3:443)\n\u001b[0m\u001b[91mConnecting to objects.githubusercontent.com (185.199.109.133:443)\n\u001b[0m\u001b[91msaving to 'helm-s3_0.11.0_sha512_checksums.txt'\nhelm-s3_0.11.0_sha51 100% |********************************|  1284  0:00:00 ETA\n'helm-s3_0.11.0_sha512_checksums.txt' saved\n\u001b[0m\u001b[91m+ cat helm-s3_0.11.0_sha512_checksums.txt\n\u001b[0m\u001b[91m+ grep -E '^[0-9a-z]+  helm-s3_0.11.0_linux_amd64.tar.gz$'\n\u001b[0m\u001b[91m+ sha512sum -c -\n\u001b[0mhelm-s3_0.11.0_linux_amd64.tar.gz: OK\n\u001b[91m+ tar xzf helm-s3_0.11.0_linux_amd64.tar.gz -C helm-plugins/helm-s3\n\u001b[0mRemoving intermediate container 16499de789ff\n ---> 07bff208e42c\nStep 28/45 : FROM alpine:3.13 AS migrate\n ---> 6b5c5e00213a\nStep 29/45 : ENV MIGRATE_VERSION v4.9.1\n ---> Running in bd7c755db1db\nRemoving intermediate container bd7c755db1db\n ---> ea2a5eb73ced\nStep 30/45 : RUN set -xe &&     apk add --update --no-cache ca-certificates curl &&     curl -f -L https://github.com/golang-migrate/migrate/releases/download/${MIGRATE_VERSION}/migrate.linux-amd64.tar.gz | tar xvz &&     mv migrate.linux-amd64 /tmp/migrate\n ---> Running in 414913e77036\n\u001b[91m+ apk add --update --no-cache ca-certificates curl\n\u001b[0mfetch https://dl-cdn.alpinelinux.org/alpine/v3.13/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.13/community/x86_64/APKINDEX.tar.gz\n(1/5) Installing ca-certificates (20220614-r0)\n(2/5) Installing brotli-libs (1.0.9-r3)\n(3/5) Installing nghttp2-libs (1.42.0-r1)\n(4/5) Installing libcurl (7.79.1-r3)\n(5/5) Installing curl (7.79.1-r3)\nExecuting busybox-1.32.1-r9.trigger\nExecuting ca-certificates-20220614-r0.trigger\nOK: 8 MiB in 19 packages\n\u001b[91m+ curl -f -L https://github.com/golang-migrate/migrate/releases/download/v4.9.1/migrate.linux-amd64.tar.gz\n\u001b[0m\u001b[91m+ tar xvz\n\u001b[0m\u001b[91m  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n\r  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0\u001b[0m\u001b[91m\r  0     0    0     0    0     0      \u001b[0m\u001b[91m0      0 --:--:-\u001b[0m\u001b[91m- -\u001b[0m\u001b[91m-:-\u001b[0m\u001b[91m-:-- -\u001b[0m\u001b[91m-:-\u001b[0m\u001b[91m-:-\u001b[0m\u001b[91m-  \u001b[0m\u001b[91m   0\u001b[0m\u001b[91m\r  0     0    0     0    0     0      0      0 --:--:-- --:--:-\u001b[0m\u001b[91m- --:--:--     0\n\u001b[0m./migrate.linux-amd64\n\u001b[91m\r100 15.9M  100 15.9M    0     0  18\u001b[0m\u001b[91m.0M      0 --:--:-- --:--:-\u001b[0m\u001b[91m- --:--:-\u001b[0m\u001b[91m- 18.0M\n\u001b[0m\u001b[91m+ mv migrate.linux-amd64 /tmp/migrate\n\u001b[0mRemoving intermediate container 414913e77036\n ---> 7a5c5a04f1a6\nStep 31/45 : FROM ${FROM_IMAGE}\n ---> \nStep 32/45 : ENV HELM_PLUGINS=/usr/share/helm/plugins\n ---> Running in cc8b6dbadf3d\nRemoving intermediate container cc8b6dbadf3d\n ---> 337191b02e2d\nStep 33/45 : COPY --from=builder /etc/nsswitch.conf.build /etc/nsswitch.conf\n ---> 1b5066042b85\nStep 34/45 : COPY --from=builder /usr/share/zoneinfo /usr/share/zoneinfo\n ---> 6bf9b7ac4f25\nStep 35/45 : COPY --from=builder /etc/ssl/certs/ca-certificates.crt /etc/ssl/certs/\n ---> c61b0ccf2784\nStep 36/45 : COPY --from=iamauth /tmp/aws-iam-authenticator /usr/bin/\n ---> d15a39099909\nStep 37/45 : COPY --from=helms3 /tmp/helm-plugins /usr/share/helm/plugins\n ---> 974c87e187cb\nStep 38/45 : COPY --from=migrate /tmp/migrate /usr/bin/\n ---> 9570e86f371f\nStep 39/45 : COPY --from=builder /build/database/migrations /migrations/\n ---> 5467442c0be8\nStep 40/45 : COPY --from=builder /build/templates /templates/\n ---> 7c0c950e7c8a\nStep 41/45 : COPY --from=builder /build/build/release/pipeline /\n ---> e99ae6eec8d0\nStep 42/45 : COPY --from=builder /build/build/release/worker /\n ---> c88462dc3878\nStep 43/45 : COPY --from=builder /build/build/release/pipelinectl /\n ---> 18e62fe16fea\nStep 44/45 : COPY config/anchore/policies/ /policies/\n ---> c448ce836bcb\nStep 45/45 : CMD [\"/pipeline\"]\n ---> Running in a25c3ee270a2\nRemoving intermediate container a25c3ee270a2\n ---> b526cd4de5fc\nSuccessfully built b526cd4de5fc\nSuccessfully tagged pipeline:latest\n","stderr":"","imageSize":374676067},"endTime":1672821193069}