{"repository":"https://github.com/ixre/go2o","dockerfilePath":"Dockerfile","startTime":1672330004720,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/ixre/go2o'...\n","error":null,"commit":"ef7aa921fcb9cba23601b9b1f54bff620c1f2f08"},"originalBuild":{"startTimestamp":1672330007220,"endTimestamp":1672330144686,"error":null,"stdout":"Sending build context to Docker daemon  18.47MB\r\r\nStep 1/19 : FROM golang:1.19-alpine AS build\n1.19-alpine: Pulling from library/golang\nc158987b0551: Already exists\n019cfb932eb0: Pulling fs layer\na3a161a37303: Pulling fs layer\n3c6f08178a17: Pulling fs layer\n3c6f08178a17: Verifying Checksum\n3c6f08178a17: Download complete\n019cfb932eb0: Verifying Checksum\n019cfb932eb0: Download complete\n019cfb932eb0: Pull complete\na3a161a37303: Verifying Checksum\na3a161a37303: Download complete\na3a161a37303: Pull complete\n3c6f08178a17: Pull complete\nDigest: sha256:a9b24b67dc83b3383d22a14941c2b2b2ca6a103d805cac6820fd1355943beaf1\nStatus: Downloaded newer image for golang:1.19-alpine\n ---> cae57157ceaa\nStep 2/19 : ENV GOPATH=/gobuild\n ---> Running in 4360645da347\nRemoving intermediate container 4360645da347\n ---> 589644757840\nStep 3/19 : COPY ./app ./app\n ---> 5a18cc8cdb4e\nStep 4/19 : COPY ./core ./core\n ---> 8a6897b2a539\nStep 5/19 : COPY ./*.go go.mod LICENSE README.md ./container/app.conf ./\n ---> f00b633c6ee9\nStep 6/19 : ENV GOPROXY=https://goproxy.cn,direct\n ---> Running in dc213e6e0fef\nRemoving intermediate container dc213e6e0fef\n ---> ecc25ef5be6d\nStep 7/19 : RUN rm -rf go.sum && sed -i 's/replace github.com\\/ixre/\\/\\/replace  github.com\\/ixre/g' go.mod &&     go mod tidy &&     CGO_ENABLED=0 GOOS=linux ARCH=amd64 go build -o go2o go2o-serve.go &&     mkdir -p /opt/go2o/dist &&     cp -r go2o LICENSE README.md app.conf /opt/go2o/dist\n ---> Running in 8584fee92efb\n\u001b[91mgo: downloading github.com/ixre/gof v1.13.3\n\u001b[0m\u001b[91mgo: downloading github.com/labstack/echo/v4 v4.9.1\n\u001b[0m\u001b[91mgo: downloading github.com/gomodule/redigo v1.8.9\n\u001b[0m\u001b[91mgo: downloading github.com/smartwalle/resize v1.0.0\n\u001b[0m\u001b[91mgo: downloading google.golang.org/grpc v1.51.0\n\u001b[0m\u001b[91mgo: downloading google.golang.org/protobuf v1.28.1\n\u001b[0m\u001b[91mgo: downloading go.etcd.io/etcd/client/v3 v3.5.6\n\u001b[0m\u001b[91mgo: downloading github.com/robfig/cron/v3 v3.0.1\n\u001b[0m\u001b[91mgo: downloading github.com/nats-io/nats.go v1.20.0\n\u001b[0m\u001b[91mgo: downloading github.com/golang-jwt/jwt v3.2.2+incompatible\n\u001b[0m\u001b[91mgo: downloading golang.org/x/net v0.2.0\n\u001b[0m\u001b[91mgo: downloading github.com/ClickHouse/clickhouse-go/v2 v2.4.3\n\u001b[0m\u001b[91mgo: downloading golang.org/x/text v0.4.0\n\u001b[0m\u001b[91mgo: downloading github.com/ixre/alidayu v0.0.0-20160128071321-7eadea36c79c\n\u001b[0m\u001b[91mgo: downloading github.com/golang/protobuf v1.5.2\n\u001b[0m\u001b[91mgo: downloading google.golang.org/genproto v0.0.0-20221118155620-16455021b5e6\n\u001b[0m\u001b[91mgo: downloading github.com/nats-io/nkeys v0.3.0\n\u001b[0m\u001b[91mgo: downloading github.com/nats-io/nuid v1.0.1\n\u001b[0m\u001b[91mgo: downloading github.com/nats-io/nats-server/v2 v2.9.8\n\u001b[0m\u001b[91mgo: downloading golang.org/x/sys v0.2.0\n\u001b[0m\u001b[91mgo: downloading github.com/labstack/gommon v0.4.0\n\u001b[0m\u001b[91mgo: downloading golang.org/x/crypto v0.3.0\n\u001b[0m\u001b[91mgo: downloading github.com/valyala/fasttemplate v1.2.2\n\u001b[0m\u001b[91mgo: downloading golang.org/x/time v0.2.0\n\u001b[0m\u001b[91mgo: downloading github.com/fsnotify/fsnotify v1.6.0\n\u001b[0m\u001b[91mgo: downloading github.com/pelletier/go-toml v1.9.5\n\u001b[0m\u001b[91mgo: downloading github.com/go-sql-driver/mysql v1.6.0\ngo: downloading github.com/lib/pq v1.10.7\n\u001b[0m\u001b[91mgo: downloading github.com/valyala/bytebufferpool v1.0.0\n\u001b[0m\u001b[91mgo: downloading go.etcd.io/etcd/api/v3 v3.5.6\n\u001b[0m\u001b[91mgo: downloading go.etcd.io/etcd/client/pkg/v3 v3.5.6\ngo: downloading go.uber.org/zap v1.23.0\n\u001b[0m\u001b[91mgo: downloading go.uber.org/atomic v1.10.0\n\u001b[0m\u001b[91mgo: downloading go.uber.org/multierr v1.8.0\n\u001b[0m\u001b[91mgo: downloading github.com/pkg/errors v0.9.1\n\u001b[0m\u001b[91mgo: downloading gopkg.in/yaml.v3 v3.0.1\n\u001b[0m\u001b[91mgo: downloading github.com/mattn/go-isatty v0.0.16\ngo: downloading github.com/mattn/go-colorable v0.1.13\n\u001b[0m\u001b[91mgo: downloading github.com/coreos/go-systemd/v22 v22.5.0\n\u001b[0m\u001b[91mgo: downloading go.opentelemetry.io/otel/trace v1.11.1\n\u001b[0m\u001b[91mgo: downloading github.com/ClickHouse/ch-go v0.50.0\n\u001b[0m\u001b[91mgo: downloading github.com/andybalholm/brotli v1.0.4\n\u001b[0m\u001b[91mgo: downloading github.com/shopspring/decimal v1.3.1\ngo: downloading github.com/google/uuid v1.3.0\n\u001b[0m\u001b[91mgo: downloading github.com/paulmach/orb v0.7.1\n\u001b[0m\u001b[91mgo: downloading go.opentelemetry.io/otel v1.11.1\n\u001b[0m\u001b[91mgo: downloading github.com/coreos/go-semver v0.3.0\ngo: downloading github.com/gogo/protobuf v1.3.2\n\u001b[0m\u001b[91mgo: downloading github.com/go-faster/errors v0.6.1\ngo: downloading github.com/klauspost/compress v1.15.12\ngo: downloading github.com/pierrec/lz4/v4 v4.1.17\ngo: downloading github.com/segmentio/asm v1.2.0\ngo: downloading github.com/go-faster/city v1.0.1\n\u001b[0m\u001b[91mgo: downloading github.com/google/go-cmp v0.5.9\ngo: downloading github.com/stretchr/testify v1.8.1\ngo: downloading go.uber.org/goleak v1.1.11\n\u001b[0m\u001b[91mgo: downloading github.com/benbjohnson/clock v1.1.0\n\u001b[0m\u001b[91mgo: downloading gopkg.in/check.v1 v1.0.0-20190902080502-41f04d3bba15\n\u001b[0m\u001b[91mgo: downloading gopkg.in/yaml.v2 v2.4.0\ngo: downloading github.com/nats-io/jwt/v2 v2.3.0\n\u001b[0m\u001b[91mgo: downloading github.com/minio/highwayhash v1.0.2\n\u001b[0m\u001b[91mgo: downloading github.com/kr/pretty v0.1.0\n\u001b[0m\u001b[91mgo: downloading github.com/pmezard/go-difflib v1.0.0\ngo: downloading github.com/davecgh/go-spew v1.1.1\n\u001b[0m\u001b[91mgo: downloading github.com/kr/text v0.1.0\n\u001b[0mRemoving intermediate container 8584fee92efb\n ---> 9ba7d3d59106\nStep 8/19 : FROM alpine\n ---> 49176f190c7e\nStep 9/19 : MAINTAINER jarrysix\n ---> Running in 341b00be9207\nRemoving intermediate container 341b00be9207\n ---> 10033dc0f826\nStep 10/19 : LABEL vendor=\"Go2o\"\n ---> Running in 5bc73c1a7f04\nRemoving intermediate container 5bc73c1a7f04\n ---> f9647eb0b36a\nStep 11/19 : LABEL version=\"1.0.0\"\n ---> Running in ec19ed82d0d6\nRemoving intermediate container ec19ed82d0d6\n ---> 2ed56bc1676c\nStep 12/19 : ENV GO2O_NATS_ADDR=172.17.0.1:4222\n ---> Running in a9dd42527ffb\nRemoving intermediate container a9dd42527ffb\n ---> 98f1b0e7daaf\nStep 13/19 : WORKDIR /app\n ---> Running in 2c9caa1cd7c0\nRemoving intermediate container 2c9caa1cd7c0\n ---> b165ab8e9aec\nStep 14/19 : COPY --from=build /opt/go2o/dist/* /app/\n ---> 16f93ca98b08\nStep 15/19 : COPY ./assets ./assets\n ---> c5b3341a3545\nStep 16/19 : RUN sed -i 's/dl-cdn.alpinelinux.org/mirrors.ustc.edu.cn/g' /etc/apk/repositories  \t&& apk --update add tzdata ca-certificates \t&& cp /usr/share/zoneinfo/Asia/Shanghai /etc/localtime \t&& apk del tzdata \t&& ln -s /app/go2o /bin     && echo \"if [ ! -f '/data/app.conf' ];then cp -r /app/app.conf /data;fi;\"     \"go2o -conf /data/app.conf -d\"> /docker-boot.sh\n ---> Running in 799b702a1079\nfetch https://mirrors.ustc.edu.cn/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://mirrors.ustc.edu.cn/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/2) Installing ca-certificates (20220614-r3)\n(2/2) Installing tzdata (2022f-r1)\nExecuting busybox-1.35.0-r29.trigger\nExecuting ca-certificates-20220614-r3.trigger\nOK: 11 MiB in 17 packages\n(1/1) Purging tzdata (2022f-r1)\nOK: 8 MiB in 16 packages\nRemoving intermediate container 799b702a1079\n ---> 4b5a12bd24b0\nStep 17/19 : VOLUME [\"/data\"]\n ---> Running in 4ee1325e3c2e\nRemoving intermediate container 4ee1325e3c2e\n ---> d557609c0940\nStep 18/19 : EXPOSE 1427 1428\n ---> Running in f43be789eb16\nRemoving intermediate container f43be789eb16\n ---> 8d8cd1f16e24\nStep 19/19 : CMD [\"sh\",\"/docker-boot.sh\"]\n ---> Running in c2255e9dca46\nRemoving intermediate container c2255e9dca46\n ---> 7999acb23f63\nSuccessfully built 7999acb23f63\nSuccessfully tagged go2o:latest\n","stderr":"","imageSize":48069559},"repair":{"violations":[{"name":"apkAddUseNoCache","position":{"start":30,"end":30,"columnStart":4,"columnEnd":43}}],"repairedDockerfile":"# Go2o Docker Image\n# Version 1.0\n# Author : jarrysix(jarrysix@gmail.com)\n# Date : 2019-06-12 13:20\n\nFROM golang:1.19-alpine AS build\nENV GOPATH=/gobuild\nCOPY ./app ./app\nCOPY ./core ./core\nCOPY ./*.go go.mod LICENSE README.md ./container/app.conf ./\n\nENV GOPROXY=https://goproxy.cn,direct\nRUN rm -rf go.sum && sed -i 's/replace github.com\\/ixre/\\/\\/replace  github.com\\/ixre/g' go.mod && \\\n    go mod tidy && \\\n    CGO_ENABLED=0 GOOS=linux ARCH=amd64 go build -o go2o go2o-serve.go && \\\n    mkdir -p /opt/go2o/dist && \\\n    cp -r go2o LICENSE README.md app.conf /opt/go2o/dist\n\nFROM alpine\nMAINTAINER jarrysix\nLABEL vendor=\"Go2o\"\nLABEL version=\"1.0.0\"\n\nENV GO2O_NATS_ADDR=172.17.0.1:4222\n\nWORKDIR /app\nCOPY --from=build /opt/go2o/dist/* /app/\nCOPY ./assets ./assets\n\nRUN sed -i 's/dl-cdn.alpinelinux.org/mirrors.ustc.edu.cn/g' /etc/apk/repositories \\\n\t&& apk --update --no-cache add tzdata ca-certificates \\\n\t&& cp /usr/share/zoneinfo/Asia/Shanghai /etc/localtime \\\n\t&& apk del tzdata \\\n\t&& ln -s /app/go2o /bin \\\n    && echo \"if [ ! -f '/data/app.conf' ];then cp -r /app/app.conf /data;fi;\" \\\n    \"go2o -conf /data/app.conf -d\"> /docker-boot.sh\nVOLUME [\"/data\"]\nEXPOSE 1427 1428\nCMD [\"sh\",\"/docker-boot.sh\"]\n\n\n"},"repairedBuild":{"startTimestamp":1672330145405,"endTimestamp":1672330166549,"error":{"code":1,"killed":false,"signal":null,"cmd":"docker build --no-cache --force-rm -t go2o:latest -f /tmp/dinghy-analysis/ixre/go2o/Dockerfile ."},"stdout":"Sending build context to Docker daemon  18.47MB\r\r\nStep 1/19 : FROM golang:1.19-alpine AS build\n ---> cae57157ceaa\nStep 2/19 : ENV GOPATH=/gobuild\n ---> Running in 97cd9ca3b3c8\nRemoving intermediate container 97cd9ca3b3c8\n ---> cf0d92023bc7\nStep 3/19 : COPY ./app ./app\n ---> 34cef4998ca8\nStep 4/19 : COPY ./core ./core\n ---> 097a782530b8\nStep 5/19 : COPY ./*.go go.mod LICENSE README.md ./container/app.conf ./\n ---> 2546e8ade13b\nStep 6/19 : ENV GOPROXY=https://goproxy.cn,direct\n ---> Running in de5349bce4f7\nRemoving intermediate container de5349bce4f7\n ---> 8d8e8b8af3d7\nStep 7/19 : RUN rm -rf go.sum && sed -i 's/replace github.com\\/ixre/\\/\\/replace  github.com\\/ixre/g' go.mod &&     go mod tidy &&     CGO_ENABLED=0 GOOS=linux ARCH=amd64 go build -o go2o go2o-serve.go &&     mkdir -p /opt/go2o/dist &&     cp -r go2o LICENSE README.md app.conf /opt/go2o/dist\n ---> Running in c19520a5c46f\n\u001b[91mgo: downloading github.com/ixre/gof v1.13.3\ngo: downloading github.com/gomodule/redigo v1.8.9\n\u001b[0m\u001b[91mgo: downloading github.com/ClickHouse/clickhouse-go/v2 v2.4.3\n\u001b[0m\u001b[91mgo: downloading github.com/labstack/echo/v4 v4.9.1\n\u001b[0m\u001b[91mgo: downloading github.com/nats-io/nats.go v1.20.0\n\u001b[0m\u001b[91mgo: downloading google.golang.org/grpc v1.51.0\n\u001b[0m\u001b[91mgo: downloading github.com/smartwalle/resize v1.0.0\n\u001b[0m\u001b[91mgo: downloading google.golang.org/protobuf v1.28.1\n\u001b[0m\u001b[91mgo: downloading go.etcd.io/etcd/client/v3 v3.5.6\n\u001b[0m\u001b[91mgo: downloading github.com/robfig/cron/v3 v3.0.1\n\u001b[0m\u001b[91mgo: downloading github.com/golang-jwt/jwt v3.2.2+incompatible\n\u001b[0m\u001b[91mgo: downloading golang.org/x/net v0.2.0\n\u001b[0m\u001b[91mgo: downloading golang.org/x/text v0.4.0\n\u001b[0m\u001b[91mgo: downloading github.com/ixre/alidayu v0.0.0-20160128071321-7eadea36c79c\n\u001b[0m\u001b[91mgo: downloading github.com/lib/pq v1.10.7\n\u001b[0m\u001b[91mgo: downloading github.com/fsnotify/fsnotify v1.6.0\ngo: downloading github.com/go-sql-driver/mysql v1.6.0\n\u001b[0m\u001b[91mgo: downloading github.com/pelletier/go-toml v1.9.5\n\u001b[0m\u001b[91mgo: downloading go.etcd.io/etcd/api/v3 v3.5.6\n\u001b[0m\u001b[91mgo: downloading go.etcd.io/etcd/client/pkg/v3 v3.5.6\n\u001b[0m\u001b[91mgo: downloading go.uber.org/zap v1.23.0\n\u001b[0m\u001b[91mgo: downloading golang.org/x/crypto v0.3.0\n\u001b[0m\u001b[91mgo: downloading github.com/valyala/fasttemplate v1.2.2\n\u001b[0m\u001b[91mgo: downloading golang.org/x/time v0.2.0\n\u001b[0m\u001b[91mgo: downloading github.com/nats-io/nkeys v0.3.0\ngo: downloading github.com/labstack/gommon v0.4.0\n\u001b[0m\u001b[91mgo: downloading github.com/nats-io/nuid v1.0.1\n\u001b[0m\u001b[91mgo: downloading github.com/nats-io/nats-server/v2 v2.9.8\n\u001b[0m\u001b[91mgo: downloading github.com/gogo/protobuf v1.3.2\n\u001b[0m\u001b[91mgo: downloading github.com/golang/protobuf v1.5.2\ngo: downloading github.com/coreos/go-semver v0.3.0\ngo: downloading golang.org/x/sys v0.2.0\n\u001b[0m\u001b[91mgo: downloading google.golang.org/genproto v0.0.0-20221118155620-16455021b5e6\n\u001b[0m\u001b[91mgo: downloading github.com/coreos/go-systemd/v22 v22.5.0\n\u001b[0m\u001b[91mgo: downloading github.com/valyala/bytebufferpool v1.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/ClickHouse/ch-go v0.50.0\n\u001b[0m\u001b[91mgo: downloading github.com/andybalholm/brotli v1.0.4\n\u001b[0m\u001b[91mgo: downloading github.com/pkg/errors v0.9.1\n\u001b[0m\u001b[91mgo: downloading go.opentelemetry.io/otel/trace v1.11.1\n\u001b[0m\u001b[91mgo: downloading go.uber.org/atomic v1.10.0\n\u001b[0m\u001b[91mgo: downloading go.uber.org/multierr v1.8.0\n\u001b[0m\u001b[91mgo: downloading gopkg.in/yaml.v3 v3.0.1\n\u001b[0m\u001b[91mgo: downloading github.com/mattn/go-colorable v0.1.13\n\u001b[0m\u001b[91mgo: downloading github.com/mattn/go-isatty v0.0.16\n\u001b[0m\u001b[91mgo: downloading github.com/google/uuid v1.3.0\n\u001b[0m\u001b[91mgo: downloading go.opentelemetry.io/otel v1.11.1\n\u001b[0m\u001b[91mgo: downloading github.com/paulmach/orb v0.7.1\n\u001b[0m\u001b[91mgo: downloading github.com/shopspring/decimal v1.3.1\n\u001b[0m\u001b[91mgo: downloading github.com/go-faster/errors v0.6.1\ngo: downloading github.com/go-faster/city v1.0.1\n\u001b[0m\u001b[91mgo: downloading github.com/klauspost/compress v1.15.12\n\u001b[0m\u001b[91mgo: downloading github.com/pierrec/lz4/v4 v4.1.17\n\u001b[0m\u001b[91mgo: downloading github.com/segmentio/asm v1.2.0\n\u001b[0m\u001b[91mgo: downloading github.com/stretchr/testify v1.8.1\ngo: downloading gopkg.in/yaml.v2 v2.4.0\ngo: downloading go.uber.org/goleak v1.1.11\n\u001b[0m\u001b[91mgo: downloading github.com/benbjohnson/clock v1.1.0\n\u001b[0m\u001b[91mgo: downloading github.com/google/go-cmp v0.5.9\n\u001b[0m\u001b[91mgo: downloading gopkg.in/check.v1 v1.0.0-20190902080502-41f04d3bba15\ngo: downloading github.com/minio/highwayhash v1.0.2\n\u001b[0m\u001b[91mgo: downloading github.com/nats-io/jwt/v2 v2.3.0\n\u001b[0m\u001b[91mgo: downloading github.com/kr/pretty v0.1.0\n\u001b[0m\u001b[91mgo: downloading github.com/kr/text v0.1.0\n\u001b[0m\u001b[91mgo: downloading github.com/pmezard/go-difflib v1.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/davecgh/go-spew v1.1.1\n\u001b[0m\u001b[91mgithub.com/ixre/go2o/core/repos/clickhouse imports\n\tgithub.com/ClickHouse/clickhouse-go/v2 imports\n\tgithub.com/ClickHouse/ch-go/compress imports\n\tgithub.com/pierrec/lz4/v4: github.com/pierrec/lz4/v4@v4.1.17: read \"https:/goproxy.cn/@v/v4.1.17.zip\": http2: server sent GOAWAY and closed the connection; LastStreamID=1999, ErrCode=NO_ERROR, debug=\"\"\n\u001b[0mRemoving intermediate container c19520a5c46f\n","stderr":"The command '/bin/sh -c rm -rf go.sum && sed -i 's/replace github.com\\/ixre/\\/\\/replace  github.com\\/ixre/g' go.mod &&     go mod tidy &&     CGO_ENABLED=0 GOOS=linux ARCH=amd64 go build -o go2o go2o-serve.go &&     mkdir -p /opt/go2o/dist &&     cp -r go2o LICENSE README.md app.conf /opt/go2o/dist' returned a non-zero code: 1\n"},"endTime":1672330166646}