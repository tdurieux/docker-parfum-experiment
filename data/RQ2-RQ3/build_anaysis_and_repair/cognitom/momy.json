{"repository":"https://github.com/cognitom/momy","dockerfilePath":"Dockerfile","startTime":1672528978475,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/cognitom/momy'...\n","error":null,"commit":"cc95a747ad3ea29f2ba37544b0947af139b0b7d8"},"originalBuild":{"startTimestamp":1672528979280,"endTimestamp":1672529163419,"error":null,"stdout":"Sending build context to Docker daemon  414.7kB\r\r\nStep 1/14 : FROM node:10 AS build-env\n10: Pulling from library/node\n76b8ef87096f: Pulling fs layer\n2e2bafe8a0f4: Pulling fs layer\nb53ce1fd2746: Pulling fs layer\n84a8c1bd5887: Pulling fs layer\n7a803dc0b40f: Pulling fs layer\nb800e94e7303: Pulling fs layer\n0da9fbf60d48: Pulling fs layer\n04dccde934cf: Pulling fs layer\n73269890f6fd: Pulling fs layer\n84a8c1bd5887: Waiting\nb800e94e7303: Waiting\n0da9fbf60d48: Waiting\n7a803dc0b40f: Waiting\n04dccde934cf: Waiting\n73269890f6fd: Waiting\nb53ce1fd2746: Verifying Checksum\nb53ce1fd2746: Download complete\n2e2bafe8a0f4: Verifying Checksum\n2e2bafe8a0f4: Download complete\n76b8ef87096f: Verifying Checksum\n76b8ef87096f: Download complete\nb800e94e7303: Verifying Checksum\nb800e94e7303: Download complete\n84a8c1bd5887: Verifying Checksum\n84a8c1bd5887: Download complete\n04dccde934cf: Verifying Checksum\n73269890f6fd: Verifying Checksum\n73269890f6fd: Download complete\n0da9fbf60d48: Verifying Checksum\n0da9fbf60d48: Download complete\n76b8ef87096f: Pull complete\n2e2bafe8a0f4: Pull complete\nb53ce1fd2746: Pull complete\n7a803dc0b40f: Verifying Checksum\n7a803dc0b40f: Download complete\n84a8c1bd5887: Pull complete\n7a803dc0b40f: Pull complete\nb800e94e7303: Pull complete\n0da9fbf60d48: Pull complete\n04dccde934cf: Pull complete\n73269890f6fd: Pull complete\nDigest: sha256:59531d2835edd5161c8f9512f9e095b1836f7a1fcb0ab73e005ec46047384911\nStatus: Downloaded newer image for node:10\n ---> 28dca6642db8\nStep 2/14 : ENV TINI_VERSION v0.18.0\n ---> Running in d01aa72823f1\nRemoving intermediate container d01aa72823f1\n ---> f71d2b34f3ce\nStep 3/14 : ADD https://github.com/krallin/tini/releases/download/${TINI_VERSION}/tini /tini\n\n\n ---> afa0af4ab1f9\nStep 4/14 : RUN chmod +x /tini\n ---> Running in 9adbaaca8d69\nRemoving intermediate container 9adbaaca8d69\n ---> 9fdffe152191\nStep 5/14 : WORKDIR /app\n ---> Running in 233f921133b3\nRemoving intermediate container 233f921133b3\n ---> 814e1f296644\nStep 6/14 : COPY package*.json ./\n ---> 19e45e22c91f\nStep 7/14 : RUN npm install --only=production\n ---> Running in 19a9262ca270\nadded 42 packages from 27 contributors and audited 44 packages in 1.024s\nfound 5 vulnerabilities (1 moderate, 4 high)\n  run `npm audit fix` to fix them, or `npm audit` for details\nRemoving intermediate container 19a9262ca270\n ---> fe0de44891b4\nStep 8/14 : FROM gcr.io/distroless/nodejs\nlatest: Pulling from distroless/nodejs\nfc251a6e7981: Pulling fs layer\nfda4ba87f6fb: Pulling fs layer\na1f1879bb7de: Pulling fs layer\na02cc7e9cd7d: Pulling fs layer\na02cc7e9cd7d: Waiting\na1f1879bb7de: Verifying Checksum\na1f1879bb7de: Download complete\nfc251a6e7981: Verifying Checksum\nfda4ba87f6fb: Verifying Checksum\nfda4ba87f6fb: Download complete\nfc251a6e7981: Pull complete\nfda4ba87f6fb: Pull complete\na1f1879bb7de: Pull complete\na02cc7e9cd7d: Verifying Checksum\na02cc7e9cd7d: Download complete\na02cc7e9cd7d: Pull complete\nDigest: sha256:039aeeddc00d285be1a32d41648d3941cbdaab05cce03344a1267f49cce464d3\nStatus: Downloaded newer image for gcr.io/distroless/nodejs:latest\n ---> 494d034f1f6d\nStep 9/14 : COPY --from=build-env /tini /tini\n ---> 1ed0ada7d91f\nStep 10/14 : COPY --from=build-env /app /app\n ---> 3feb17559b7e\nStep 11/14 : COPY bin /app/bin\n ---> 81fbfe2f0324\nStep 12/14 : COPY lib /app/lib\n ---> 38a4e0421a31\nStep 13/14 : WORKDIR /workdir\n ---> Running in fa06d2b57801\nRemoving intermediate container fa06d2b57801\n ---> b0dfe179c8af\nStep 14/14 : ENTRYPOINT [\"/tini\", \"--\", \"/nodejs/bin/node\", \"/app/bin/momy.js\"]\n ---> Running in 83758d6550d4\nRemoving intermediate container 83758d6550d4\n ---> 26e0253262a2\nSuccessfully built 26e0253262a2\nSuccessfully tagged momy:latest\n","stderr":"","imageSize":166030410},"repair":{"violations":[{"name":"npmCacheCleanAfterInstall","position":{"start":10,"end":10,"columnStart":4,"columnEnd":33}}],"repairedDockerfile":"FROM node:10 AS build-env\n\n# install tini\nENV TINI_VERSION v0.18.0\nADD https://github.com/krallin/tini/releases/download/${TINI_VERSION}/tini /tini\nRUN chmod +x /tini\n\n# install dependencies via npm\nWORKDIR /app\nCOPY package*.json ./\nRUN npm install --only=production\n\n# multi-stage build for smaller package\nFROM gcr.io/distroless/nodejs\nCOPY --from=build-env /tini /tini\nCOPY --from=build-env /app /app\n\n# copy momy itself\nCOPY bin /app/bin\nCOPY lib /app/lib\n\n# set working directory which would be bound to host's $PWD\nWORKDIR /workdir\n\n# wrap tini for signal handling\nENTRYPOINT [\"/tini\", \"--\", \"/nodejs/bin/node\", \"/app/bin/momy.js\"]\n"},"repairedBuild":{"startTimestamp":1672529163728,"endTimestamp":1672529182860,"error":null,"stdout":"Sending build context to Docker daemon  414.7kB\r\r\nStep 1/14 : FROM node:10 AS build-env\n ---> 28dca6642db8\nStep 2/14 : ENV TINI_VERSION v0.18.0\n ---> Running in 0ef616faecac\nRemoving intermediate container 0ef616faecac\n ---> 9e60f2869139\nStep 3/14 : ADD https://github.com/krallin/tini/releases/download/${TINI_VERSION}/tini /tini\n\n\n ---> 1698cd589a84\nStep 4/14 : RUN chmod +x /tini\n ---> Running in 50f362d92dac\nRemoving intermediate container 50f362d92dac\n ---> b89d31569ddd\nStep 5/14 : WORKDIR /app\n ---> Running in eb402e4351b5\nRemoving intermediate container eb402e4351b5\n ---> ddb4ca9bcb1e\nStep 6/14 : COPY package*.json ./\n ---> 176b1772d4f2\nStep 7/14 : RUN npm install --only=production\n ---> Running in 757c5cf57ad7\nadded 42 packages from 27 contributors and audited 44 packages in 0.934s\nfound 5 vulnerabilities (1 moderate, 4 high)\n  run `npm audit fix` to fix them, or `npm audit` for details\nRemoving intermediate container 757c5cf57ad7\n ---> 43309df323bd\nStep 8/14 : FROM gcr.io/distroless/nodejs\n ---> 494d034f1f6d\nStep 9/14 : COPY --from=build-env /tini /tini\n ---> 8587710731f4\nStep 10/14 : COPY --from=build-env /app /app\n ---> 4a0b21ee2f34\nStep 11/14 : COPY bin /app/bin\n ---> ddbf623a81e0\nStep 12/14 : COPY lib /app/lib\n ---> 39a8087d0f26\nStep 13/14 : WORKDIR /workdir\n ---> Running in fffc44c06eda\nRemoving intermediate container fffc44c06eda\n ---> 8ba75a9ae86b\nStep 14/14 : ENTRYPOINT [\"/tini\", \"--\", \"/nodejs/bin/node\", \"/app/bin/momy.js\"]\n ---> Running in 16f869293d63\nRemoving intermediate container 16f869293d63\n ---> 9335d8df5753\nSuccessfully built 9335d8df5753\nSuccessfully tagged momy:latest\n","stderr":"","imageSize":166030410},"endTime":1672529183128}