{"repository":"https://github.com/mic92/cntr","dockerfilePath":"Dockerfile","startTime":1672831234671,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/mic92/cntr'...\n","error":null,"commit":"2087db2a20b283979534b220e6a3196302e65db7"},"originalBuild":{"startTimestamp":1672831235531,"endTimestamp":1672831327732,"error":null,"stdout":"Sending build context to Docker daemon  453.6kB\r\r\nStep 1/13 : FROM rust:1.66.0 as cntr\n1.66.0: Pulling from library/rust\nDigest: sha256:0067330b7e0eacacc5c32f21b720607c0cd61eda905c8d55e6a745f579ddeee9\nStatus: Downloaded newer image for rust:1.66.0\n ---> 5e0d0367026b\nStep 2/13 : RUN rustup target add x86_64-unknown-linux-musl\n ---> Running in c58b21f7754d\n\u001b[91minfo: downloading component 'rust-std' for 'x86_64-unknown-linux-musl'\n\u001b[0m\u001b[91minfo: installing component 'rust-std' for 'x86_64-unknown-linux-musl'\n\u001b[0mRemoving intermediate container c58b21f7754d\n ---> 77a711231a18\nStep 3/13 : RUN curl -sL https://github.com/Mic92/docker-pid/releases/download/1.0.2/docker-pid-linux-amd64       > /usr/bin/docker-pid &&       chmod 755 /usr/bin/docker-pid\n ---> Running in 8400063aa5ed\nRemoving intermediate container 8400063aa5ed\n ---> c89d662e0280\nStep 4/13 : COPY Cargo.toml Cargo.lock ./\n ---> 0a143b4c23ad\nStep 5/13 : RUN cargo build --release --target=x86_64-unknown-linux-musl || true\n ---> Running in 3ad760c3e0bf\n\u001b[91m    Updating crates.io index\n\u001b[0m\u001b[91m Downloading crates ...\n\u001b[0m\u001b[91m  Downloaded smallvec v1.8.0\n\u001b[0m\u001b[91m  Downloaded unicode-xid v0.2.2\n\u001b[0m\u001b[91m  Downloaded pkg-config v0.3.24\n\u001b[0m\u001b[91m  Downloaded parking_lot_core v0.9.1\n\u001b[0m\u001b[91m  Downloaded syn v1.0.86\n\u001b[0m\u001b[91m  Downloaded smallvec v0.6.14\n\u001b[0m\u001b[91m  Downloaded bitflags v1.2.1\n\u001b[0m\u001b[91m  Downloaded simple-error v0.2.3\n\u001b[0m\u001b[91m  Downloaded rand v0.4.6\n\u001b[0m\u001b[91m  Downloaded quote v1.0.15\n\u001b[0m\u001b[91m  Downloaded maybe-uninit v2.0.0\n\u001b[0m\u001b[91m  Downloaded os_str_bytes v6.0.0\n\u001b[0m\u001b[91m  Downloaded once_cell v1.13.0\n\u001b[0m\u001b[91m  Downloaded parking_lot v0.4.8\n\u001b[0m\u001b[91m  Downloaded container-pid v0.2.0\n\u001b[0m\u001b[91m  Downloaded chashmap v2.2.2\n\u001b[0m\u001b[91m  Downloaded cntr-fuse v0.4.1\n\u001b[0m\u001b[91m  Downloaded version_check v0.9.4\n\u001b[0m\u001b[91m  Downloaded parking_lot v0.12.1\n\u001b[0m\u001b[91m  Downloaded proc-macro-error v1.0.4\n\u001b[0m\u001b[91m  Downloaded pin-utils v0.1.0\n\u001b[0m\u001b[91m  Downloaded unicode-ident v1.0.5\n\u001b[0m\u001b[91m  Downloaded stable_deref_trait v1.2.0\n\u001b[0m\u001b[91m  Downloaded libc v0.2.139\n\u001b[0m\u001b[91m  Downloaded static_assertions v1.1.0\n\u001b[0m\u001b[91m  Downloaded scopeguard v1.1.0\n\u001b[0m\u001b[91m  Downloaded proc-macro-error-attr v1.0.4\n\u001b[0m\u001b[91m  Downloaded autocfg v1.1.0\n\u001b[0m\u001b[91m  Downloaded cfg-if v1.0.0\n\u001b[0m\u001b[91m  Downloaded lock_api v0.4.6\n\u001b[0m\u001b[91m  Downloaded nix v0.26.1\n\u001b[0m\u001b[91m  Downloaded heck v0.4.0\n\u001b[0m\u001b[91m  Downloaded memoffset v0.7.1\n\u001b[0m\u001b[91m  Downloaded log v0.4.17\n\u001b[0m\u001b[91m  Downloaded clap_lex v0.3.0\n\u001b[0m\u001b[91m  Downloaded clap_derive v4.0.21\n\u001b[0m\u001b[91m  Downloaded proc-macro2 v1.0.47\n\u001b[0m\u001b[91m  Downloaded clap v4.0.32\n\u001b[0m\u001b[91m  Downloaded cntr-fuse-sys v0.4.1\n\u001b[0m\u001b[91m  Downloaded cntr-fuse-abi v0.4.1\n\u001b[0m\u001b[91m  Downloaded owning_ref v0.3.3\n\u001b[0m\u001b[91m  Downloaded parking_lot_core v0.2.14\n\u001b[0m\u001b[91m   Compiling libc v0.2.139\n\u001b[0m\u001b[91m   Compiling version_check v0.9.4\n\u001b[0m\u001b[91m   Compiling proc-macro2 v1.0.47\n\u001b[0m\u001b[91m   Compiling unicode-ident v1.0.5\n\u001b[0m\u001b[91m   Compiling maybe-uninit v2.0.0\n\u001b[0m\u001b[91m   Compiling syn v1.0.86\n\u001b[0m\u001b[91m   Compiling cfg-if v1.0.0\n\u001b[0m\u001b[91m   Compiling unicode-xid v\u001b[0m\u001b[91m0.2.2\n\u001b[0m\u001b[91m   Compiling pkg-config v0.3.24\n\u001b[0m\u001b[91m   Compiling bitflags v1.2.\u001b[0m\u001b[91m1\n\u001b[0m\u001b[91m   Compiling autocfg v1.1.\u001b[0m\u001b[91m0\n\u001b[0m\u001b[91m   Compiling stable_deref_trait v1.2.0\n\u001b[0m\u001b[91m   Compiling log v0.4.17\n\u001b[0m\u001b[91m   Compiling parking_lot_core v0.9.1\n\u001b[0m\u001b[91m   Compiling scopeguard v1.1.0\n\u001b[0m\u001b[91m   Compiling os_str_bytes v6.0.0\n\u001b[0m\u001b[91m   Compiling heck v0.4.0\n   Compiling smallvec v1.8.0\n\u001b[0m\u001b[91m   Compiling simple-error v0.2.3\n\u001b[0m\u001b[91m   Compiling cntr-fuse-abi v0.4.1\n   Compiling pin-utils v0.1.0\n   Compiling once_cell v1.13.0\n   Compiling static_assertions v1.1.0\n\u001b[0m\u001b[91m   Compiling owning_ref v0.3.3\n\u001b[0m\u001b[91m   Compiling lock_api v0.4.6\n\u001b[0m\u001b[91m   Compiling clap_lex v0.3.0\n\u001b[0m\u001b[91m   Compiling proc-macro-error-attr v1.0.4\n   Compiling proc-macro-error v1.0.4\n\u001b[0m\u001b[91m   Compiling memoffset v0.7.1\n\u001b[0m\u001b[91m   Compiling cntr-fuse-sys v0.4.1\n\u001b[0m\u001b[91m   Compiling smallvec v0.6.14\n\u001b[0m\u001b[91m   Compiling quote v1.0.15\n\u001b[0m\u001b[91m   Compiling rand v0.4.6\n\u001b[0m\u001b[91m   Compiling cntr-fuse v0.4.1\n   Compiling container-pid v0.2.0\u001b[0m\u001b[91m\n   Compiling \u001b[0m\u001b[91mnix v0.26.1\n\u001b[0m\u001b[91m   Compiling parking_lot v0.12.1\n\u001b[0m\u001b[91m   Compiling parking_lot_core v0.2.14\n\u001b[0m\u001b[91m   Compiling parking_lot v0.4.8\n\u001b[0m\u001b[91m   Compiling chashmap v2.2.2\n\u001b[0m\u001b[91m   Compiling clap_derive v4.0.21\n\u001b[0m\u001b[91m   Compiling clap v4.0.32\n\u001b[0m\u001b[91m   Compiling cntr v1.5.1 (/)\n\u001b[0m\u001b[91merror: couldn't read src/bin/main.rs: No such file or directory (os error 2)\n\n\u001b[0m\u001b[91merror: could not compile `cntr` due to previous error\n\u001b[0mRemoving intermediate container 3ad760c3e0bf\n ---> 984aed55dbf6\nStep 6/13 : COPY src ./src/\n ---> b3c827212398\nStep 7/13 : RUN cargo build --release --target=x86_64-unknown-linux-musl\n ---> Running in 78f76eec2fec\n\u001b[91m   Compiling cntr v1.5.1 (/)\n\u001b[0m\u001b[91m    Finished release [optimized] target(s) in 13.14s\n\u001b[0mRemoving intermediate container 78f76eec2fec\n ---> 7e818b3805f0\nStep 8/13 : RUN strip target/x86_64-unknown-linux-musl/release/cntr -o /usr/bin/cntr\n ---> Running in 8b2d3ade3368\nRemoving intermediate container 8b2d3ade3368\n ---> c6507d8ace65\nStep 9/13 : FROM busybox\nlatest: Pulling from library/busybox\n2123501b93d4: Pulling fs layer\n2123501b93d4: Verifying Checksum\n2123501b93d4: Download complete\n2123501b93d4: Pull complete\nDigest: sha256:05a79c7279f71f86a2a0d05eb72fcb56ea36139150f0a75cd87e80a4272e4e39\nStatus: Downloaded newer image for busybox:latest\n ---> 827365c7baf1\nStep 10/13 : WORKDIR /root/\n ---> Running in b253cb414700\nRemoving intermediate container b253cb414700\n ---> 42e367b7310e\nStep 11/13 : COPY --from=cntr /usr/bin/cntr /usr/bin/cntr\n ---> 3bba55b7b037\nStep 12/13 : COPY --from=cntr /usr/bin/docker-pid /usr/bin/docker-pid\n ---> d306e7ad3b1e\nStep 13/13 : ENTRYPOINT [\"/usr/bin/cntr\"]\n ---> Running in 891d16910687\nRemoving intermediate container 891d16910687\n ---> d9fd71e92bf3\nSuccessfully built d9fd71e92bf3\nSuccessfully tagged cntr:latest\n","stderr":"","imageSize":12852698},"repair":{"violations":[{"name":"curlUseFlagF","position":{"start":4,"end":5,"columnStart":4,"columnEnd":27}}],"repairedDockerfile":"# Example for a slim/fat container setup\n\nFROM rust:1.66.0 as cntr\nRUN rustup target add x86_64-unknown-linux-musl\nRUN curl -f -sL https://github.com/Mic92/docker-pid/releases/download/1.0.2/docker-pid-linux-amd64 \\\n      > /usr/bin/docker-pid && \\\n      chmod 755 /usr/bin/docker-pid\nCOPY Cargo.toml Cargo.lock ./\n# weird trick to cache crates\nRUN cargo build --release --target=x86_64-unknown-linux-musl || true\nCOPY src ./src/\nRUN cargo build --release --target=x86_64-unknown-linux-musl\nRUN strip target/x86_64-unknown-linux-musl/release/cntr -o /usr/bin/cntr\n\nFROM busybox\nWORKDIR /root/\nCOPY --from=cntr /usr/bin/cntr /usr/bin/cntr\nCOPY --from=cntr /usr/bin/docker-pid /usr/bin/docker-pid\nENTRYPOINT [\"/usr/bin/cntr\"]\n\n# Build with:\n# $ docker build . -t cntr\n# Assuming you have a container called mycontainer, you want to attach to (docker run --name mycontainer -ti --rm busybox sh)\n# you can then run:\n# $ sudo docker run --pid=host --privileged=true -v /var/run/docker.sock:/var/run/docker.sock -ti --rm cntr attach mycontainer /bin/sh\n"},"repairedBuild":{"startTimestamp":1672831327992,"endTimestamp":1672831425386,"error":null,"stdout":"Sending build context to Docker daemon  453.6kB\r\r\nStep 1/13 : FROM rust:1.66.0 as cntr\n ---> 5e0d0367026b\nStep 2/13 : RUN rustup target add x86_64-unknown-linux-musl\n ---> Running in 16ee5aaa02dd\n\u001b[91minfo: downloading component 'rust-std' for 'x86_64-unknown-linux-musl'\n\u001b[0m\u001b[91minfo: installing component 'rust-std' for 'x86_64-unknown-linux-musl'\n\u001b[0mRemoving intermediate container 16ee5aaa02dd\n ---> 635fc779a86b\nStep 3/13 : RUN curl -f -sL https://github.com/Mic92/docker-pid/releases/download/1.0.2/docker-pid-linux-amd64       > /usr/bin/docker-pid &&       chmod 755 /usr/bin/docker-pid\n ---> Running in 0e3617dc2d05\nRemoving intermediate container 0e3617dc2d05\n ---> 46022f2db650\nStep 4/13 : COPY Cargo.toml Cargo.lock ./\n ---> c00bf29ca8cf\nStep 5/13 : RUN cargo build --release --target=x86_64-unknown-linux-musl || true\n ---> Running in e692505f40ac\n\u001b[91m    Updating crates.io index\n\u001b[0m\u001b[91m Downloading crates ...\n\u001b[0m\u001b[91m  Downloaded os_str_bytes v6.0.0\n\u001b[0m\u001b[91m  Downloaded rand v0.4.6\n\u001b[0m\u001b[91m  Downloaded smallvec v1.8.0\n\u001b[0m\u001b[91m  Downloaded simple-error v0.2.3\n\u001b[0m\u001b[91m  Downloaded unicode-xid v0.2.2\n\u001b[0m\u001b[91m  Downloaded static_assertions v1.1.0\n\u001b[0m\u001b[91m  Downloaded scopeguard v1.1.0\n\u001b[0m\u001b[91m  Downloaded proc-macro-error-attr v1.0.4\n\u001b[0m\u001b[91m  Downloaded pin-utils v0.1.0\n\u001b[0m\u001b[91m  Downloaded version_check v0.9.4\n\u001b[0m\u001b[91m  Downloaded stable_deref_trait v1.2.0\n\u001b[0m\u001b[91m  Downloaded parking_lot v0.12.1\n\u001b[0m\u001b[91m  Downloaded cfg-if v1.0.0\n\u001b[0m\u001b[91m  Downloaded clap_lex v0.3.0\n\u001b[0m\u001b[91m  Downloaded proc-macro-error v1.0.4\n\u001b[0m\u001b[91m  Downloaded owning_ref v0.3.3\n\u001b[0m\u001b[91m  Downloaded nix v0.26.1\n\u001b[0m\u001b[91m  Downloaded libc v0.2.139\n\u001b[0m\u001b[91m  Downloaded cntr-fuse-sys v0.4.1\n\u001b[0m\u001b[91m  Downloaded cntr-fuse-abi v0.4.1\n\u001b[0m\u001b[91m  Downloaded parking_lot_core v0.2.14\n\u001b[0m\u001b[91m  Downloaded log v0.4.17\n\u001b[0m\u001b[91m  Downloaded clap_derive v4.0.21\n\u001b[0m\u001b[91m  Downloaded autocfg v1.1.0\n\u001b[0m\u001b[91m  Downloaded parking_lot v0.4.8\n\u001b[0m\u001b[91m  Downloaded once_cell v1.13.0\n\u001b[0m\u001b[91m  Downloaded maybe-uninit v2.0.0\n\u001b[0m\u001b[91m  Downloaded container-pid v0.2.0\n\u001b[0m\u001b[91m  Downloaded cntr-fuse v0.4.1\n\u001b[0m\u001b[91m  Downloaded clap v4.0.32\n\u001b[0m\u001b[91m  Downloaded chashmap v2.2.2\n\u001b[0m\u001b[91m  Downloaded bitflags v1.2.1\n\u001b[0m\u001b[91m  Downloaded unicode-ident v1.0.5\n\u001b[0m\u001b[91m  Downloaded syn v1.0.86\n\u001b[0m\u001b[91m  Downloaded memoffset v0.7.1\n\u001b[0m\u001b[91m  Downloaded heck v0.4.0\n\u001b[0m\u001b[91m  Downloaded smallvec v0.6.14\n\u001b[0m\u001b[91m  Downloaded quote v1.0.15\n\u001b[0m\u001b[91m  Downloaded proc-macro2 v1.0.47\n\u001b[0m\u001b[91m  Downloaded pkg-config v0.3.24\n\u001b[0m\u001b[91m  Downloaded parking_lot_core v0.9.1\n\u001b[0m\u001b[91m  Downloaded lock_api v0.4.6\n\u001b[0m\u001b[91m   Compiling libc v0.2.139\n\u001b[0m\u001b[91m   Compiling version_check v0.9.4\n\u001b[0m\u001b[91m   Compiling proc-macro2 v1.0.47\n\u001b[0m\u001b[91m   Compiling unicode-ident v1.0.5\n\u001b[0m\u001b[91m   Compiling maybe-uninit v2.0.0\u001b[0m\u001b[91m\n\u001b[0m\u001b[91m   Compiling\u001b[0m\u001b[91m cfg-if v1.0.0\n\u001b[0m\u001b[91m   Compiling syn v1.0.86\n\u001b[0m\u001b[91m   Compiling unicode-xid v0.2.2\n\u001b[0m\u001b[91m   Compiling autocfg v1.1.0\n\u001b[0m\u001b[91m   Compiling pkg-config v0.3.24\u001b[0m\u001b[91m\n\u001b[0m\u001b[91m   Compiling bitflags v1.2.1\n\u001b[0m\u001b[91m   Compiling parking_lot_core v0.9.1\n\u001b[0m\u001b[91m   Compiling stable_deref_trait v1.2.0\n\u001b[0m\u001b[91m   Compiling log v0.4.17\n\u001b[0m\u001b[91m   Compiling scopeguard v1.1.0\n\u001b[0m\u001b[91m   Compiling heck v0.4\u001b[0m\u001b[91m.0\n\u001b[0m\u001b[91m   Compiling os_str_bytes v6.\u001b[0m\u001b[91m0.0\n\u001b[0m\u001b[91m   Compiling smallvec v1.8.0\n\u001b[0m\u001b[91m   Compiling static_assertions v1.1.0\n\u001b[0m\u001b[91m   Compiling cntr-fuse-abi v0.4.1\n\u001b[0m\u001b[91m   Compiling pin-utils v0.1.0\n\u001b[0m\u001b[91m   Compiling once_cell v1.13.0\n\u001b[0m\u001b[91m   Compiling simple-error v0.2.3\n\u001b[0m\u001b[91m   Compiling owning_ref v0.3.3\n\u001b[0m\u001b[91m   Compiling lock_api v0.4.6\n\u001b[0m\u001b[91m   Compiling clap_lex v0.3.0\n\u001b[0m\u001b[91m   Compiling memoffset v0.7.1\n\u001b[0m\u001b[91m   Compiling proc-macro-error-attr v1.0.4\n\u001b[0m\u001b[91m   Compiling proc-macro-error v1.0.4\n\u001b[0m\u001b[91m   Compiling cntr-fuse-sys v0.4.1\n\u001b[0m\u001b[91m   Compiling smallvec v0.6.14\n\u001b[0m\u001b[91m   Compiling quote v1.0.15\n\u001b[0m\u001b[91m   Compiling rand v0.4.6\n\u001b[0m\u001b[91m   Compiling cntr-fuse v0.4.1\n\u001b[0m\u001b[91m   Compiling container-pid v0.\u001b[0m\u001b[91m2\u001b[0m\u001b[91m.0\n\u001b[0m\u001b[91m   Compiling nix v0.26.1\n\u001b[0m\u001b[91m   Compiling parking_lot v0.12.1\n\u001b[0m\u001b[91m   Compiling parking_lot_core v0.2.14\n\u001b[0m\u001b[91m   Compiling parking_lot v0.4.8\n\u001b[0m\u001b[91m   Compiling chashmap v2.2.2\n\u001b[0m\u001b[91m   Compiling clap_derive v4.0.21\u001b[0m\u001b[91m\n\u001b[0m\u001b[91m   Compiling clap v4.0.32\n\u001b[0m\u001b[91m   Compiling cntr v1.5.1 (\u001b[0m\u001b[91m/)\n\u001b[0m\u001b[91merror: couldn't read src/bin/main.rs: No such file or directory (os error 2)\n\n\u001b[0m\u001b[91merror: could not compile `cntr` due to previous error\n\u001b[0mRemoving intermediate container e692505f40ac\n ---> 24a6f9c0e6f2\nStep 6/13 : COPY src ./src/\n ---> 6bd7f80e9415\nStep 7/13 : RUN cargo build --release --target=x86_64-unknown-linux-musl\n ---> Running in 275766f25d72\n\u001b[91m   Compiling cntr v1.5.1 (/)\n\u001b[0m\u001b[91m    Finished release [optimized] target(s) in 14.80s\n\u001b[0mRemoving intermediate container 275766f25d72\n ---> c040eb7bc14d\nStep 8/13 : RUN strip target/x86_64-unknown-linux-musl/release/cntr -o /usr/bin/cntr\n ---> Running in 73f6a80dfc78\nRemoving intermediate container 73f6a80dfc78\n ---> 2ebbda9f17b7\nStep 9/13 : FROM busybox\n ---> 827365c7baf1\nStep 10/13 : WORKDIR /root/\n ---> Running in c372c912b5c0\nRemoving intermediate container c372c912b5c0\n ---> 7cb4758528e6\nStep 11/13 : COPY --from=cntr /usr/bin/cntr /usr/bin/cntr\n ---> 1b44762e2be9\nStep 12/13 : COPY --from=cntr /usr/bin/docker-pid /usr/bin/docker-pid\n ---> f77c09375967\nStep 13/13 : ENTRYPOINT [\"/usr/bin/cntr\"]\n ---> Running in aaa17c37eec9\nRemoving intermediate container aaa17c37eec9\n ---> 45affd687f91\nSuccessfully built 45affd687f91\nSuccessfully tagged cntr:latest\n","stderr":"","imageSize":12852698},"endTime":1672831425613}