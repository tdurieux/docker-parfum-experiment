{"repository":"https://github.com/icyleaf/hpr","dockerfilePath":"Dockerfile","startTime":1672172242393,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/icyleaf/hpr'...\n","error":null,"commit":"45ec5a0dcfd204062147b28ebbe671da5485a675"},"originalBuild":{"startTimestamp":1672172243188,"endTimestamp":1672172288824,"error":null,"stdout":"Sending build context to Docker daemon  131.1kB\r\r\nStep 1/13 : FROM ruby:3.0-alpine\n3.0-alpine: Pulling from library/ruby\nca7dd9ec2225: Already exists\nfe71bb0ecfee: Pulling fs layer\n134ec6373770: Pulling fs layer\ne6e4d7eb1831: Pulling fs layer\n54d3014dbf6f: Pulling fs layer\n134ec6373770: Verifying Checksum\n134ec6373770: Download complete\nfe71bb0ecfee: Verifying Checksum\nfe71bb0ecfee: Download complete\ne6e4d7eb1831: Verifying Checksum\ne6e4d7eb1831: Download complete\n54d3014dbf6f: Download complete\nfe71bb0ecfee: Pull complete\n134ec6373770: Pull complete\ne6e4d7eb1831: Pull complete\n54d3014dbf6f: Pull complete\nDigest: sha256:2b43ce58697b3312db362926a317b7ba6b9e90ae34109a534ad982a6bc4f2a3e\nStatus: Downloaded newer image for ruby:3.0-alpine\n ---> 4c00d33f6ae2\nStep 2/13 : LABEL maintainer=\"icyleaf <icyleaf.cn@gmail.com>\"\n ---> Running in 805273056ba9\nRemoving intermediate container 805273056ba9\n ---> d370078933d1\nStep 3/13 : ENV S6_OVERLAY_VERSION=2.2.0.3\n ---> Running in 54e80eca9f1d\nRemoving intermediate container 54e80eca9f1d\n ---> 9ca3fe0de259\nStep 4/13 : RUN set -ex &&     apk add --update --no-cache curl &&     curl -sSL https://github.com/just-containers/s6-overlay/releases/download/v${S6_OVERLAY_VERSION}/s6-overlay-amd64.tar.gz | tar xfz - -C / &&     apk del --no-cache curl &&     apk add --no-cache build-base sqlite-dev openssh-client openssh-keygen git bash redis\n ---> Running in 5b0e980a4040\n\u001b[91m+ apk add --update --no-cache curl\n\u001b[0mfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/community/x86_64/APKINDEX.tar.gz\n(1/4) Installing brotli-libs (1.0.9-r6)\n(2/4) Installing nghttp2-libs (1.47.0-r0)\n(3/4) Installing libcurl (7.83.1-r5)\n(4/4) Installing curl (7.83.1-r5)\nExecuting busybox-1.35.0-r17.trigger\nOK: 22 MiB in 40 packages\n\u001b[91m+ curl -sSL https://github.com/just-containers/s6-overlay/releases/download/v2.2.0.3/s6-overlay-amd64.tar.gz\n\u001b[0m\u001b[91m+ tar xfz - -C /\n\u001b[0m\u001b[91m+ apk del --no-cache curl\n\u001b[0mfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/community/x86_64/APKINDEX.tar.gz\n(1/4) Purging curl (7.83.1-r5)\n(2/4) Purging libcurl (7.83.1-r5)\n(3/4) Purging brotli-libs (1.0.9-r6)\n(4/4) Purging nghttp2-libs (1.47.0-r0)\nExecuting busybox-1.35.0-r17.trigger\nOK: 21 MiB in 36 packages\n\u001b[91m+ apk add --no-cache build-base sqlite-dev openssh-client openssh-keygen git bash redis\n\u001b[0mfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/community/x86_64/APKINDEX.tar.gz\n(1/30) Installing bash (5.1.16-r2)\nExecuting bash-5.1.16-r2.post-install\n(2/30) Installing binutils (2.38-r3)\n(3/30) Installing libmagic (5.41-r0)\n(4/30) Installing file (5.41-r0)\n(5/30) Installing libgomp (11.2.1_git20220219-r2)\n(6/30) Installing libatomic (11.2.1_git20220219-r2)\n(7/30) Installing isl22 (0.22-r0)\n(8/30) Installing mpfr4 (4.1.0-r0)\n(9/30) Installing mpc1 (1.2.1-r0)\n(10/30) Installing gcc (11.2.1_git20220219-r2)\n(11/30) Installing musl-dev (1.2.3-r2)\n(12/30) Installing libc-dev (0.7.2-r3)\n(13/30) Installing g++ (11.2.1_git20220219-r2)\n(14/30) Installing make (4.3-r0)\n(15/30) Installing fortify-headers (1.1-r1)\n(16/30) Installing patch (2.7.6-r7)\n(17/30) Installing build-base (0.5-r3)\n(18/30) Installing brotli-libs (1.0.9-r6)\n(19/30) Installing nghttp2-libs (1.47.0-r0)\n(20/30) Installing libcurl (7.83.1-r5)\n(21/30) Installing expat (2.5.0-r0)\n(22/30) Installing pcre2 (10.40-r0)\n(23/30) Installing git (2.36.3-r0)\n(24/30) Installing openssh-keygen (9.0_p1-r2)\n(25/30) Installing libedit (20210910.3.1-r0)\n(26/30) Installing openssh-client-common (9.0_p1-r2)\n(27/30) Installing openssh-client-default (9.0_p1-r2)\n(28/30) Installing redis (7.0.5-r0)\nExecuting redis-7.0.5-r0.pre-install\nExecuting redis-7.0.5-r0.post-install\n(29/30) Installing sqlite-libs (3.38.5-r0)\n(30/30) Installing sqlite-dev (3.38.5-r0)\nExecuting busybox-1.35.0-r17.trigger\nOK: 222 MiB in 66 packages\nRemoving intermediate container 5b0e980a4040\n ---> b4d56ca0f0a8\nStep 5/13 : WORKDIR /app\n ---> Running in 6a274e999ee1\nRemoving intermediate container 6a274e999ee1\n ---> c942830dd74a\nStep 6/13 : COPY Gemfile* /app/\n ---> 192f1e88018f\nStep 7/13 : RUN bundle install --binstubs --jobs `expr $(cat /proc/cpuinfo | grep -c \"cpu cores\") - 1` --retry 3 --without development test\n ---> Running in 1df00cf6d4dc\n\u001b[91m[DEPRECATED] The `--without` flag is deprecated because it relies on being remembered across bundler invocations, which bundler will no longer do in future versions. Instead please use `bundle config set --local without 'development test'`, and stop using this flag\n\u001b[0m\u001b[91m[DEPRECATED] The --binstubs option will be removed in favor of `bundle binstubs --all`\n\u001b[0mFetching gem metadata from https://rubygems.org/.........\nFetching rake 13.0.6\nInstalling rake 13.0.6\nFetching concurrent-ruby 1.1.10\nUsing bundler 2.2.33\nFetching unicode-display_width 2.3.0\nFetching multi_json 1.15.0\nFetching nio4r 2.5.8\nFetching rack 2.2.4\nFetching minitest 5.16.3\nFetching numerizer 0.1.1\nFetching mini_portile2 2.8.0\nFetching settingslogic 2.0.9\nFetching tilt 2.0.11\nFetching public_suffix 5.0.1\nFetching highline 2.0.3\nFetching connection_pool 2.3.0\nFetching rchardet 1.8.0\nFetching mime-types-data 3.2022.0105\nFetching multi_xml 0.6.0\nFetching ruby2_keywords 0.0.5\nFetching redis 4.8.0\nInstalling settingslogic 2.0.9\nInstalling unicode-display_width 2.3.0\nInstalling numerizer 0.1.1\nInstalling multi_json 1.15.0\nInstalling multi_xml 0.6.0\nInstalling connection_pool 2.3.0\nInstalling ruby2_keywords 0.0.5\nInstalling tilt 2.0.11\nInstalling mini_portile2 2.8.0\nInstalling redis 4.8.0\nInstalling minitest 5.16.3\nInstalling public_suffix 5.0.1\nInstalling nio4r 2.5.8 with native extensions\nFetching mustermann 3.0.0\nFetching terminal-table 3.0.2\nInstalling rchardet 1.8.0\nFetching chronic_duration 0.10.6\nInstalling rack 2.2.4\nInstalling highline 2.0.3\nInstalling mime-types-data 3.2022.0105\nInstalling terminal-table 3.0.2\nInstalling mustermann 3.0.0\nInstalling chronic_duration 0.10.6\nInstalling concurrent-ruby 1.1.10\nFetching sqlite3 1.5.4 (x86_64-linux)\nFetching addressable 2.8.1\nFetching mime-types 3.4.1\nInstalling addressable 2.8.1\nInstalling mime-types 3.4.1\nFetching commander 4.6.0\nInstalling commander 4.6.0\nFetching rack-protection 3.0.5\nFetching sidekiq 6.5.7\nInstalling rack-protection 3.0.5\nFetching httparty 0.20.0\nInstalling httparty 0.20.0\nFetching git 1.13.0\nInstalling git 1.13.0\nFetching sinatra 3.0.5\nInstalling sidekiq 6.5.7\nInstalling sinatra 3.0.5\nFetching i18n 1.12.0\nFetching tzinfo 2.0.5\nFetching sentry-ruby 5.7.0\nFetching gitlab 4.19.0\nInstalling i18n 1.12.0\nInstalling sentry-ruby 5.7.0\nInstalling tzinfo 2.0.5\nInstalling gitlab 4.19.0\nFetching sinatra-contrib 3.0.5\nInstalling sinatra-contrib 3.0.5\nFetching activesupport 7.0.4\nInstalling activesupport 7.0.4\nInstalling sqlite3 1.5.4 (x86_64-linux)\nFetching sentry-sidekiq 5.7.0\nInstalling sentry-sidekiq 5.7.0\nFetching activemodel 7.0.4\nInstalling activemodel 7.0.4\nFetching activerecord 7.0.4\nInstalling activerecord 7.0.4\nFetching puma 6.0.1\nInstalling puma 6.0.1 with native extensions\nBundle complete! 21 Gemfile dependencies, 42 gems now installed.\nGems in the groups 'development' and 'test' were not installed.\nUse `bundle info [gemname]` to see where a bundled gem is installed.\nPost-install message from httparty:\nWhen you HTTParty, you must party hard!\nRemoving intermediate container 1df00cf6d4dc\n ---> 5d5eff3a04ce\nStep 8/13 : ENV HPR_ENV=production     HPR_RUNNING=docker\n ---> Running in a1f780369727\nRemoving intermediate container a1f780369727\n ---> ca2ccdb3a663\nStep 9/13 : COPY . /app\n ---> 30ae228c81d9\nStep 10/13 : COPY docker/root /\n ---> 727e63620b5a\nStep 11/13 : VOLUME /app\n ---> Running in db9b843acedd\nRemoving intermediate container db9b843acedd\n ---> 4d9f185cff3f\nStep 12/13 : EXPOSE 8848 6379\n ---> Running in 4304717aae4b\nRemoving intermediate container 4304717aae4b\n ---> a15cc8f84218\nStep 13/13 : ENTRYPOINT [ \"/init\" ]\n ---> Running in 8276685d5ca9\nRemoving intermediate container 8276685d5ca9\n ---> 7429c9a7fe15\nSuccessfully built 7429c9a7fe15\nSuccessfully tagged hpr:latest\n","stderr":"","imageSize":322660343},"repair":{"violations":[{"name":"curlUseFlagF","position":{"start":7,"end":7,"columnStart":4,"columnEnd":124}}],"repairedDockerfile":"FROM ruby:3.0-alpine\nLABEL maintainer=\"icyleaf <icyleaf.cn@gmail.com>\"\n\nENV S6_OVERLAY_VERSION=2.2.0.3\n\nRUN set -ex && \\\n    apk add --update --no-cache curl && \\\n    curl -f -sSL https://github.com/just-containers/s6-overlay/releases/download/v${S6_OVERLAY_VERSION}/s6-overlay-amd64.tar.gz | tar xfz - -C / && \\\n    apk del --no-cache curl && \\\n    apk add --no-cache build-base sqlite-dev openssh-client openssh-keygen git bash redis\n\nWORKDIR /app\n\nCOPY Gemfile* /app/\n\nRUN bundle install --binstubs --jobs `expr $(cat /proc/cpuinfo | grep -c \"cpu cores\") - 1` --retry 3 --without development test\n\nENV HPR_ENV=production \\\n    HPR_RUNNING=docker\n\nCOPY . /app\nCOPY docker/root /\n\nVOLUME /app\n\nEXPOSE 8848 6379\n\nENTRYPOINT [ \"/init\" ]\n"},"repairedBuild":{"startTimestamp":1672172289287,"endTimestamp":1672172322996,"error":null,"stdout":"Sending build context to Docker daemon  131.1kB\r\r\nStep 1/13 : FROM ruby:3.0-alpine\n ---> 4c00d33f6ae2\nStep 2/13 : LABEL maintainer=\"icyleaf <icyleaf.cn@gmail.com>\"\n ---> Running in 445ceaa48a12\nRemoving intermediate container 445ceaa48a12\n ---> 6fb61c43580b\nStep 3/13 : ENV S6_OVERLAY_VERSION=2.2.0.3\n ---> Running in 41d75eabee8d\nRemoving intermediate container 41d75eabee8d\n ---> 24997062c70f\nStep 4/13 : RUN set -ex &&     apk add --update --no-cache curl &&     curl -f -sSL https://github.com/just-containers/s6-overlay/releases/download/v${S6_OVERLAY_VERSION}/s6-overlay-amd64.tar.gz | tar xfz - -C / &&     apk del --no-cache curl &&     apk add --no-cache build-base sqlite-dev openssh-client openssh-keygen git bash redis\n ---> Running in 4b0ac4c5056f\n\u001b[91m+ apk add --update --no-cache curl\n\u001b[0mfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/community/x86_64/APKINDEX.tar.gz\n(1/4) Installing brotli-libs (1.0.9-r6)\n(2/4) Installing nghttp2-libs (1.47.0-r0)\n(3/4) Installing libcurl (7.83.1-r5)\n(4/4) Installing curl (7.83.1-r5)\nExecuting busybox-1.35.0-r17.trigger\nOK: 22 MiB in 40 packages\n\u001b[91m+ curl -f -sSL https://github.com/just-containers/s6-overlay/releases/download/v2.2.0.3/s6-overlay-amd64.tar.gz\n\u001b[0m\u001b[91m+ tar xfz - -C /\n\u001b[0m\u001b[91m+ apk del --no-cache curl\n\u001b[0mfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/community/x86_64/APKINDEX.tar.gz\n(1/4) Purging curl (7.83.1-r5)\n(2/4) Purging libcurl (7.83.1-r5)\n(3/4) Purging brotli-libs (1.0.9-r6)\n(4/4) Purging nghttp2-libs (1.47.0-r0)\nExecuting busybox-1.35.0-r17.trigger\nOK: 21 MiB in 36 packages\n\u001b[91m+ apk add --no-cache build-base sqlite-dev openssh-client openssh-keygen git bash redis\n\u001b[0mfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/community/x86_64/APKINDEX.tar.gz\n(1/30) Installing bash (5.1.16-r2)\nExecuting bash-5.1.16-r2.post-install\n(2/30) Installing binutils (2.38-r3)\n(3/30) Installing libmagic (5.41-r0)\n(4/30) Installing file (5.41-r0)\n(5/30) Installing libgomp (11.2.1_git20220219-r2)\n(6/30) Installing libatomic (11.2.1_git20220219-r2)\n(7/30) Installing isl22 (0.22-r0)\n(8/30) Installing mpfr4 (4.1.0-r0)\n(9/30) Installing mpc1 (1.2.1-r0)\n(10/30) Installing gcc (11.2.1_git20220219-r2)\n(11/30) Installing musl-dev (1.2.3-r2)\n(12/30) Installing libc-dev (0.7.2-r3)\n(13/30) Installing g++ (11.2.1_git20220219-r2)\n(14/30) Installing make (4.3-r0)\n(15/30) Installing fortify-headers (1.1-r1)\n(16/30) Installing patch (2.7.6-r7)\n(17/30) Installing build-base (0.5-r3)\n(18/30) Installing brotli-libs (1.0.9-r6)\n(19/30) Installing nghttp2-libs (1.47.0-r0)\n(20/30) Installing libcurl (7.83.1-r5)\n(21/30) Installing expat (2.5.0-r0)\n(22/30) Installing pcre2 (10.40-r0)\n(23/30) Installing git (2.36.3-r0)\n(24/30) Installing openssh-keygen (9.0_p1-r2)\n(25/30) Installing libedit (20210910.3.1-r0)\n(26/30) Installing openssh-client-common (9.0_p1-r2)\n(27/30) Installing openssh-client-default (9.0_p1-r2)\n(28/30) Installing redis (7.0.5-r0)\nExecuting redis-7.0.5-r0.pre-install\nExecuting redis-7.0.5-r0.post-install\n(29/30) Installing sqlite-libs (3.38.5-r0)\n(30/30) Installing sqlite-dev (3.38.5-r0)\nExecuting busybox-1.35.0-r17.trigger\nOK: 222 MiB in 66 packages\nRemoving intermediate container 4b0ac4c5056f\n ---> eb5a6725805b\nStep 5/13 : WORKDIR /app\n ---> Running in 63b1113eb9f1\nRemoving intermediate container 63b1113eb9f1\n ---> 364d20db0bbb\nStep 6/13 : COPY Gemfile* /app/\n ---> 5e6cdbcaa340\nStep 7/13 : RUN bundle install --binstubs --jobs `expr $(cat /proc/cpuinfo | grep -c \"cpu cores\") - 1` --retry 3 --without development test\n ---> Running in 50fac3bf34ae\n\u001b[91m[DEPRECATED] The `--without` flag is deprecated because it relies on being remembered across bundler invocations, which bundler will no longer do in future versions. Instead please use `bundle config set --local without 'development test'`, and stop using this flag\n\u001b[0m\u001b[91m[DEPRECATED] The --binstubs option will be removed in favor of `bundle binstubs --all`\n\u001b[0mFetching gem metadata from https://rubygems.org/.........\nFetching rake 13.0.6\nInstalling rake 13.0.6\nFetching concurrent-ruby 1.1.10\nUsing bundler 2.2.33\nFetching highline 2.0.3\nFetching multi_xml 0.6.0\nFetching redis 4.8.0\nFetching minitest 5.16.3\nFetching numerizer 0.1.1\nFetching mini_portile2 2.8.0\nFetching ruby2_keywords 0.0.5\nFetching nio4r 2.5.8\nFetching public_suffix 5.0.1\nFetching connection_pool 2.3.0\nFetching rchardet 1.8.0\nFetching mime-types-data 3.2022.0105\nFetching unicode-display_width 2.3.0\nFetching multi_json 1.15.0\nFetching rack 2.2.4\nFetching settingslogic 2.0.9\nFetching tilt 2.0.11\nInstalling ruby2_keywords 0.0.5\nInstalling numerizer 0.1.1\nInstalling multi_xml 0.6.0\nInstalling settingslogic 2.0.9\nInstalling mini_portile2 2.8.0\nInstalling unicode-display_width 2.3.0\nInstalling connection_pool 2.3.0\nInstalling tilt 2.0.11\nInstalling multi_json 1.15.0\nInstalling redis 4.8.0\nInstalling public_suffix 5.0.1\nInstalling minitest 5.16.3\nInstalling nio4r 2.5.8 with native extensions\nInstalling rchardet 1.8.0\nFetching chronic_duration 0.10.6\nInstalling rack 2.2.4\nFetching mustermann 3.0.0\nFetching terminal-table 3.0.2\nInstalling mime-types-data 3.2022.0105\nInstalling chronic_duration 0.10.6\nInstalling highline 2.0.3\nInstalling terminal-table 3.0.2\nInstalling mustermann 3.0.0\nInstalling concurrent-ruby 1.1.10\nFetching sqlite3 1.5.4 (x86_64-linux)\nFetching addressable 2.8.1\nInstalling addressable 2.8.1\nFetching mime-types 3.4.1\nInstalling mime-types 3.4.1\nFetching commander 4.6.0\nFetching sidekiq 6.5.7\nFetching rack-protection 3.0.5\nInstalling commander 4.6.0\nInstalling rack-protection 3.0.5\nFetching git 1.13.0\nInstalling git 1.13.0\nFetching httparty 0.20.0\nFetching sinatra 3.0.5\nInstalling httparty 0.20.0\nInstalling sidekiq 6.5.7\nInstalling sinatra 3.0.5\nFetching tzinfo 2.0.5\nFetching i18n 1.12.0\nFetching sentry-ruby 5.7.0\nInstalling i18n 1.12.0\nInstalling sentry-ruby 5.7.0\nInstalling tzinfo 2.0.5\nFetching gitlab 4.19.0\nFetching sinatra-contrib 3.0.5\nInstalling sinatra-contrib 3.0.5\nInstalling gitlab 4.19.0\nFetching activesupport 7.0.4\nInstalling activesupport 7.0.4\nInstalling sqlite3 1.5.4 (x86_64-linux)\nFetching sentry-sidekiq 5.7.0\nInstalling sentry-sidekiq 5.7.0\nFetching activemodel 7.0.4\nInstalling activemodel 7.0.4\nFetching activerecord 7.0.4\nInstalling activerecord 7.0.4\nFetching puma 6.0.1\nInstalling puma 6.0.1 with native extensions\nBundle complete! 21 Gemfile dependencies, 42 gems now installed.\nGems in the groups 'development' and 'test' were not installed.\nUse `bundle info [gemname]` to see where a bundled gem is installed.\nPost-install message from httparty:\nWhen you HTTParty, you must party hard!\nRemoving intermediate container 50fac3bf34ae\n ---> 8d0817e648d5\nStep 8/13 : ENV HPR_ENV=production     HPR_RUNNING=docker\n ---> Running in eb33f92c4646\nRemoving intermediate container eb33f92c4646\n ---> e511b3ee75a4\nStep 9/13 : COPY . /app\n ---> d9c00f8b3e43\nStep 10/13 : COPY docker/root /\n ---> 2ac52d5a5087\nStep 11/13 : VOLUME /app\n ---> Running in 236bb83e5fea\nRemoving intermediate container 236bb83e5fea\n ---> dfdae64141e4\nStep 12/13 : EXPOSE 8848 6379\n ---> Running in e61412141f20\nRemoving intermediate container e61412141f20\n ---> 7febfd826135\nStep 13/13 : ENTRYPOINT [ \"/init\" ]\n ---> Running in 1ee1936c1572\nRemoving intermediate container 1ee1936c1572\n ---> 757375e50813\nSuccessfully built 757375e50813\nSuccessfully tagged hpr:latest\n","stderr":"","imageSize":322660344},"endTime":1672172323406}