{"repository":"https://github.com/lincolnloop/saltdash","dockerfilePath":"Dockerfile","startTime":1672285270075,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/lincolnloop/saltdash'...\n","error":null,"commit":"4b0268cf9ce0320272f0182f33b046d4ab7766a2"},"originalBuild":{"startTimestamp":1672285270949,"endTimestamp":1672285480316,"error":null,"stdout":"Sending build context to Docker daemon  534.5kB\r\r\nStep 1/27 : FROM node:8-alpine as build-node\n ---> 2b8fcdc6230a\nStep 2/27 : WORKDIR /code\n ---> Running in e133a6cf061f\nRemoving intermediate container e133a6cf061f\n ---> fb5d3b3ec1eb\nStep 3/27 : RUN apk --no-cache add make rsync bash\n ---> Running in c8012816341d\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.11/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.11/community/x86_64/APKINDEX.tar.gz\n(1/8) Installing ncurses-terminfo-base (6.1_p20200118-r4)\n(2/8) Installing ncurses-libs (6.1_p20200118-r4)\n(3/8) Installing readline (8.0.1-r0)\n(4/8) Installing bash (5.0.11-r1)\nExecuting bash-5.0.11-r1.post-install\n(5/8) Installing make (4.2.1-r2)\n(6/8) Installing libacl (2.2.53-r0)\n(7/8) Installing popt (1.16-r7)\n(8/8) Installing rsync (3.1.3-r2)\nExecuting busybox-1.31.1-r8.trigger\nOK: 10 MiB in 24 packages\nRemoving intermediate container c8012816341d\n ---> a6de9dc2f9f8\nStep 4/27 : COPY Makefile ./\n ---> 347fceeae9b5\nStep 5/27 : COPY client/package.json client/package-lock.json ./client/\n ---> 674aed6ca071\nStep 6/27 : RUN make client-install\n ---> Running in e47b6d0a2e4e\n\u001b[91mbash: python3: command not found\n\u001b[0m\u001b[91mbash: python3: command not found\n\u001b[0m\u001b[91mbash: git: command not found\n\u001b[0mcd client; NOBUILD=1 npm install --production\n\n> deasync@0.1.20 install /code/client/node_modules/deasync\n> node ./build.js\n\n`linux-x64-node-8` exists; testing\nBinary is fine; exiting\n\n> core-js@2.6.11 postinstall /code/client/node_modules/core-js\n> node -e \"try{require('./postinstall')}catch(e){}\"\n\n\u001b[96mThank you for using core-js (\u001b[94m https://github.com/zloirock/core-js \u001b[96m) for polyfilling JavaScript standard library!\u001b[0m\n\n\u001b[96mThe project needs your help! Please consider supporting of core-js on Open Collective or Patreon: \u001b[0m\n\u001b[96m>\u001b[94m https://opencollective.com/core-js \u001b[0m\n\u001b[96m>\u001b[94m https://www.patreon.com/zloirock \u001b[0m\n\n\u001b[96mAlso, the author of core-js (\u001b[94m https://github.com/zloirock \u001b[96m) is looking for a good job -)\u001b[0m\n\n\n> parcel-bundler@1.12.4 postinstall /code/client/node_modules/parcel-bundler\n> node -e \"console.log('\\u001b[35m\\u001b[1mLove Parcel? You can now donate to our open collective:\\u001b[22m\\u001b[39m\\n > \\u001b[34mhttps://opencollective.com/parcel/donate\\u001b[0m')\"\n\n\u001b[35m\u001b[1mLove Parcel? You can now donate to our open collective:\u001b[22m\u001b[39m\n > \u001b[34mhttps://opencollective.com/parcel/donate\u001b[0m\n\u001b[91mnpm WARN lifecycle undefined~postinstall: cannot run in wd undefined test -n \"$NOBUILD\" || npm run build (wd=/code/client)\n\u001b[0m\u001b[91mnpm WARN client No description\nnpm WARN client No repository field.\n\u001b[0m\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@1.2.13 (node_modules/fsevents):\nnpm \u001b[0m\u001b[91mWARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.2.13: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91m\n\u001b[0madded 764 packages from 466 contributors and audited 833 packages in 10.563s\n\n26 packages are looking for funding\n  run `npm fund` for details\n\nfound 119 vulnerabilities (9 low, 49 moderate, 52 high, 9 critical)\n  run `npm audit fix` to fix them, or `npm audit` for details\nRemoving intermediate container e47b6d0a2e4e\n ---> 5fad83c58d80\nStep 7/27 : COPY client/ ./client\n ---> adc0838021b6\nStep 8/27 : RUN make client-build\n ---> Running in ae542bb51802\n\u001b[91mbash: python3: command not found\n\u001b[0m\u001b[91mbash: python3: command not found\n\u001b[0m\u001b[91mbash: git: command not found\n\u001b[0mcd client; npm run build\n\n> @ build /code/client\n> npm run build:css && npm run build:js && npm run build:assets\n\n\n> @ build:css /code/client\n> parcel build --no-autoinstall scss/app.scss\n\n\u001b[91m/bin/sh: lscpu: not found\n\u001b[0m\u001b[91mBrowserslist: caniuse-lite is outdated. Please run:\nnpx browserslist@latest --update-db\n\u001b[0m✨  Built in 3.66s.\n\ndist/app.css.map     261.8 KB     27ms\ndist/app.css        140.38 KB    3.60s\n\n> @ build:js /code/client\n> parcel build --no-autoinstall js/app.js\n\n\u001b[91m/bin/sh: lscpu: not found\n\u001b[0m\u001b[91mBrowserslist: caniuse-lite is outdated. Please run:\nnpx browserslist@latest --update-db\n\u001b[0m✨  Built in 4.29s.\n\ndist/app.js.map    736.23 KB     90ms\ndist/app.js        172.32 KB    4.03s\n\n> @ build:assets /code/client\n> rsync -av --delete ./assets ./dist/\n\nsending incremental file list\nassets/\nassets/icon.png\nassets/icon.svg\n\nsent 27,429 bytes  received 58 bytes  54,974.00 bytes/sec\ntotal size is 27,261  speedup is 0.99\nRemoving intermediate container ae542bb51802\n ---> 8f6347234869\nStep 9/27 : FROM python:3.6 as build-python\n3.6: Pulling from library/python\n0e29546d541c: Pulling fs layer\n9b829c73b52b: Pulling fs layer\ncb5b7ae36172: Pulling fs layer\n6494e4811622: Pulling fs layer\n6f9f74896dfa: Pulling fs layer\n5e3b1213efc5: Pulling fs layer\n9fddfdc56334: Pulling fs layer\n404f02044bac: Pulling fs layer\nc4f42be2be53: Pulling fs layer\n6494e4811622: Waiting\n9fddfdc56334: Waiting\n6f9f74896dfa: Waiting\nc4f42be2be53: Waiting\n404f02044bac: Waiting\n5e3b1213efc5: Waiting\n9b829c73b52b: Download complete\ncb5b7ae36172: Verifying Checksum\ncb5b7ae36172: Download complete\n0e29546d541c: Verifying Checksum\n0e29546d541c: Download complete\n5e3b1213efc5: Verifying Checksum\n5e3b1213efc5: Download complete\n6494e4811622: Verifying Checksum\n6494e4811622: Download complete\n9fddfdc56334: Verifying Checksum\n9fddfdc56334: Download complete\n404f02044bac: Verifying Checksum\n404f02044bac: Download complete\nc4f42be2be53: Verifying Checksum\nc4f42be2be53: Download complete\n6f9f74896dfa: Verifying Checksum\n6f9f74896dfa: Download complete\n0e29546d541c: Pull complete\n9b829c73b52b: Pull complete\ncb5b7ae36172: Pull complete\n6494e4811622: Pull complete\n6f9f74896dfa: Pull complete\n5e3b1213efc5: Pull complete\n9fddfdc56334: Pull complete\n404f02044bac: Pull complete\nc4f42be2be53: Pull complete\nDigest: sha256:f8652afaf88c25f0d22354d547d892591067aa4026a7fa9a6819df9f300af6fc\nStatus: Downloaded newer image for python:3.6\n ---> 54260638d07c\nStep 10/27 : ENV LANG C.UTF-8\n ---> Running in 9e2e939c05b2\nRemoving intermediate container 9e2e939c05b2\n ---> 686f479b32fc\nStep 11/27 : ENV PATH=\"/root/.local/bin:${PATH}\"\n ---> Running in 89f8ccf6fea8\nRemoving intermediate container 89f8ccf6fea8\n ---> c97a415868d0\nStep 12/27 : WORKDIR /code\n ---> Running in 1124e0b24509\nRemoving intermediate container 1124e0b24509\n ---> c3715946bebb\nStep 13/27 : RUN pip3 install --user pipenv shiv\n ---> Running in 4c6325f53e74\nCollecting pipenv\n  Downloading pipenv-2022.4.8-py2.py3-none-any.whl (3.6 MB)\nCollecting shiv\n  Downloading shiv-1.0.3-py2.py3-none-any.whl (19 kB)\nCollecting virtualenv-clone>=0.2.5\n  Downloading virtualenv_clone-0.5.7-py3-none-any.whl (6.6 kB)\nRequirement already satisfied: pip>=18.0 in /usr/local/lib/python3.6/site-packages (from pipenv) (21.2.4)\nRequirement already satisfied: setuptools>=36.2.1 in /usr/local/lib/python3.6/site-packages (from pipenv) (57.5.0)\nCollecting certifi\n  Downloading certifi-2022.12.7-py3-none-any.whl (155 kB)\nCollecting virtualenv\n  Downloading virtualenv-20.17.1-py3-none-any.whl (8.8 MB)\nCollecting importlib-resources\n  Downloading importlib_resources-5.4.0-py3-none-any.whl (28 kB)\nCollecting click!=7.0,>=6.7\n  Downloading click-8.0.4-py3-none-any.whl (97 kB)\nCollecting importlib-metadata\n  Downloading importlib_metadata-4.8.3-py3-none-any.whl (17 kB)\nCollecting zipp>=0.5\n  Downloading zipp-3.6.0-py3-none-any.whl (5.3 kB)\nCollecting typing-extensions>=3.6.4\n  Downloading typing_extensions-4.1.1-py3-none-any.whl (26 kB)\nCollecting distlib<1,>=0.3.6\n  Downloading distlib-0.3.6-py2.py3-none-any.whl (468 kB)\nCollecting filelock<4,>=3.4.1\n  Downloading filelock-3.4.1-py3-none-any.whl (9.9 kB)\nCollecting platformdirs<3,>=2.4\n  Downloading platformdirs-2.4.0-py3-none-any.whl (14 kB)\nInstalling collected packages: zipp, typing-extensions, platformdirs, importlib-resources, importlib-metadata, filelock, distlib, virtualenv-clone, virtualenv, click, certifi, shiv, pipenv\nSuccessfully installed certifi-2022.12.7 click-8.0.4 distlib-0.3.6 filelock-3.4.1 importlib-metadata-4.8.3 importlib-resources-5.4.0 pipenv-2022.4.8 platformdirs-2.4.0 shiv-1.0.3 typing-extensions-4.1.1 virtualenv-20.17.1 virtualenv-clone-0.5.7 zipp-3.6.0\n\u001b[91mWARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv\n\u001b[0m\u001b[91mWARNING: You are using pip version 21.2.4; however, version 21.3.1 is available.\nYou should consider upgrading via the '/usr/local/bin/python -m pip install --upgrade pip' command.\n\u001b[0mRemoving intermediate container 4c6325f53e74\n ---> ae1a5a6aebeb\nStep 14/27 : ADD . ./\n ---> e88a7e4e90ab\nStep 15/27 : COPY --from=build-node /code/client/dist/ ./client/dist\n ---> 262debc9a5db\nStep 16/27 : RUN set -ex && make setup && SECRET_KEY=s pipenv run saltdash collectstatic --noinput && make shiv\n ---> Running in 778c7c669de4\n\u001b[91m+ make setup\n\u001b[0mpipenv install --deploy | tee Pipfile.log\n\u001b[91mCreating a virtualenv for this project...\n\u001b[0m\u001b[91mPipfile: /code/Pipfile\n\u001b[0m\u001b[91mUsing /usr/local/bin/python3.6m (3.6.15) to create virtualenv...\n\u001b[0m\u001b[91m\r⠋\u001b[0m\u001b[91m Creating virtual environment...\u001b[0m\u001b[91m\b\u001b[0m\u001b[91m\r⠙ Creating virtual environment...\u001b[0m\u001b[91m\b\u001b[0m\u001b[91m\r⠹ Creating virtual environment...\u001b[0m\u001b[91m\b\r⠸ Creating virtual environment...\u001b[0m\u001b[91m\b\u001b[0m\u001b[91m\r⠼ Creating virtual environment...\u001b[0m\u001b[91m\b\u001b[0m\u001b[91m\r⠴\u001b[0m\u001b[91m Creating virtual environment...\u001b[0m\u001b[91m\b\u001b[0m\u001b[91m\r⠦\u001b[0m\u001b[91m Creating virtual environment...\u001b[0m\u001b[91m\b\u001b[0m\u001b[91m\r⠧\u001b[0m\u001b[91m Creating virtual environment...\u001b[0m\u001b[91m\b\u001b[0m\u001b[91m\r⠇ Creating virtual environment...\u001b[0m\u001b[91mcreated virtual environment CPython3.6.15.final.0-64 in 466ms\n  creator CPython3Posix(dest=/root/.local/share/virtualenvs/code-_Py8Si6I, clear=False, no_vcs_ignore=False, global=False)\n  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, wheel=bundle, via=copy, app_data_dir=/root/.local/share/virtualenv)\n    added seed packages: pip==21.3.1, setuptools==59.6.0, wheel==0.37.1\n  activators BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator,PythonActivator\n\n\u001b[0m\u001b[91m\b\u001b[0m\u001b[91m✔ Successfully created virtual environment! \n\u001b[0m\u001b[91mVirtualenv location: /root/.local/share/virtualenvs/code-_Py8Si6I\n\u001b[0mInstalling dependencies from Pipfile.lock (baa6eb)...\n\u001b[91m+ SECRET_KEY=s pipenv run saltdash collectstatic --noinput\n\u001b[0m\u001b[91m{\"asctime\": \"2022-12-29 03:43:29,714\", \"created\": 1672285409.7148902, \"levelname\": \"INFO\", \"levelno\": 20, \"filename\": \"__init__.py\", \"funcName\": \"<module>\", \"lineno\": 42, \"module\": \"__init__\", \"message\": \"Config loaded from environment.\", \"name\": \"saltdash.settings\", \"pathname\": \"/code/saltdash/settings/__init__.py\", \"process\": 339, \"processName\": \"MainProcess\"}\n\u001b[0m\u001b[91m{\"asctime\": \"2022-12-29 03:43:29,715\", \"created\": 1672285409.7159827, \"levelname\": \"WARNING\", \"levelno\": 30, \"filename\": \"__init__.py\", \"funcName\": \"<module>\", \"lineno\": 177, \"module\": \"__init__\", \"message\": \"GitHub login environment variables not present. Turning off login requirement.\", \"name\": \"saltdash.settings\", \"pathname\": \"/code/saltdash/settings/__init__.py\", \"process\": 339, \"processName\": \"MainProcess\"}\n\u001b[0m\n125 static files copied to '/code/saltdash/static', 395 post-processed.\n\u001b[91m+ make shiv\n\u001b[0mmkdir dist\nshiv -e saltdash:config.django_manage -o dist/saltdash-0.9.10.dev0+4b0268cf9ce0320272f0182f33b046d4ab7766a2-py36-linux-x86_64.pyz \\\n\t --site-packages=/root/.local/share/virtualenvs/code-_Py8Si6I/lib/python3.6/site-packages \\\n\t --no-deps .\nProcessing /code\n  DEPRECATION: A future pip version will change local packages to be built in-place without first copying to a temporary directory. We recommend you use --use-feature=in-tree-build to test your packages with this new behavior before it becomes the default.\n   pip 21.3 will remove support for this functionality. You can find discussion regarding this at https://github.com/pypa/pip/issues/7555.\nBuilding wheels for collected packages: saltdash\n  Building wheel for saltdash (setup.py): started\n  Building wheel for saltdash (setup.py): finished with status 'done'\n  Created wheel for saltdash: filename=saltdash-0.9.10.dev0-py2.py3-none-any.whl size=3281281 sha256=b82fe0736d36e24c8cc0cf3c330926b5e049c0a574551a26e95919e9693c44d7\n  Stored in directory: /tmp/pip-ephem-wheel-cache-0sa9pq96/wheels/59/06/9e/cd98ff3c95c17b4416957672b87792d4ec5f7eac1757e1b190\nSuccessfully built saltdash\nInstalling collected packages: saltdash\nSuccessfully installed saltdash-0.9.10.dev0\nWARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv\nRemoving intermediate container 778c7c669de4\n ---> ec90cd75f34e\nStep 17/27 : FROM python:3.6-slim\n3.6-slim: Pulling from library/python\na2abf6c4d29d: Pulling fs layer\n625294dad115: Pulling fs layer\n838e3a5a04bf: Pulling fs layer\ne93b4e59b689: Pulling fs layer\nc4401b8c7f9e: Pulling fs layer\ne93b4e59b689: Waiting\nc4401b8c7f9e: Waiting\n625294dad115: Verifying Checksum\n625294dad115: Download complete\n838e3a5a04bf: Verifying Checksum\n838e3a5a04bf: Download complete\na2abf6c4d29d: Download complete\ne93b4e59b689: Verifying Checksum\nc4401b8c7f9e: Verifying Checksum\na2abf6c4d29d: Pull complete\n625294dad115: Pull complete\n838e3a5a04bf: Pull complete\ne93b4e59b689: Pull complete\nc4401b8c7f9e: Pull complete\nDigest: sha256:2cfebc27956e6a55f78606864d91fe527696f9e32a724e6f9702b5f9602d0474\nStatus: Downloaded newer image for python:3.6-slim\n ---> c1e40b69532f\nStep 18/27 : COPY --from=build-python /code/dist /dist\n ---> e03c3453e107\nStep 19/27 : RUN groupadd -r saltdash &&     useradd --uid=1000 --create-home --home-dir=/srv/saltdash --no-log-init -r -g saltdash saltdash &&     ln -s /dist/*.pyz /bin/saltdash && chmod +x /dist/*.pyz\n ---> Running in 7c021a8c7d1f\nRemoving intermediate container 7c021a8c7d1f\n ---> ceb78dc90e00\nStep 20/27 : COPY --from=build-python /code/setup.cfg /srv/saltdash/setup.cfg\n ---> f9e09524995e\nStep 21/27 : USER saltdash\n ---> Running in 573a2c6ece84\nRemoving intermediate container 573a2c6ece84\n ---> f3913b8d6956\nStep 22/27 : RUN SECRET_KEY=s /bin/saltdash help\n ---> Running in 13fe82fa1413\n\u001b[91m{\"asctime\": \"2022-12-29 03:44:05,688\", \"created\": 1672285445.6886292, \"levelname\": \"INFO\", \"levelno\": 20, \"filename\": \"__init__.py\", \"funcName\": \"<module>\", \"lineno\": 42, \"module\": \"__init__\", \"message\": \"Config loaded from environment.\", \"name\": \"saltdash.settings\", \"pathname\": \"/srv/saltdash/.shiv/saltdash-0.9.10.dev0+4b0268cf9ce0320272f0182f33b046d4ab7766a2-py36-linux-x86_64.pyz_7c18873573bf5ade65f7f55cf32c03cb02046c96b7d5ddffcd11b4440218422d/site-packages/saltdash/settings/__init__.py\", \"process\": 7, \"processName\": \"MainProcess\"}\n\u001b[0m\u001b[91m{\"asctime\": \"2022-12-29 03:44:05,689\", \"created\": 1672285445.689095, \"levelname\": \"WARNING\", \"levelno\": 30, \"filename\": \"__init__.py\", \"funcName\": \"<module>\", \"lineno\": 177, \"module\": \"__init__\", \"message\": \"GitHub login environment variables not present. Turning off login requirement.\", \"name\": \"saltdash.settings\", \"pathname\": \"/srv/saltdash/.shiv/saltdash-0.9.10.dev0+4b0268cf9ce0320272f0182f33b046d4ab7766a2-py36-linux-x86_64.pyz_7c18873573bf5ade65f7f55cf32c03cb02046c96b7d5ddffcd11b4440218422d/site-packages/saltdash/settings/__init__.py\", \"process\": 7, \"processName\": \"MainProcess\"}\n\u001b[0m\nType 'saltdash help <subcommand>' for help on a specific subcommand.\n\nAvailable subcommands:\n\n[auth]\n    changepassword\n    createsuperuser\n\n[contenttypes]\n    remove_stale_contenttypes\n\n[dash]\n    purge_job_cache\n    serve\n\n[django]\n    check\n    compilemessages\n    createcachetable\n    dbshell\n    diffsettings\n    dumpdata\n    flush\n    inspectdb\n    loaddata\n    makemessages\n    makemigrations\n    migrate\n    sendtestemail\n    shell\n    showmigrations\n    sqlflush\n    sqlmigrate\n    sqlsequencereset\n    squashmigrations\n    startapp\n    startproject\n    test\n    testserver\n\n[sessions]\n    clearsessions\n\n[social_django]\n    clearsocial\n\n[staticfiles]\n    collectstatic\n    findstatic\n    runserver\nRemoving intermediate container 13fe82fa1413\n ---> 407ddf44b43e\nStep 23/27 : WORKDIR /srv/saltdash\n ---> Running in eaffa9468a08\nRemoving intermediate container eaffa9468a08\n ---> 1e45e4c6df54\nStep 24/27 : EXPOSE 8077\n ---> Running in 9c2cbc2e680c\nRemoving intermediate container 9c2cbc2e680c\n ---> a88e6c5dffa6\nStep 25/27 : ENV LISTEN *:8077\n ---> Running in e232353e3424\nRemoving intermediate container e232353e3424\n ---> a35b45951cc7\nStep 26/27 : VOLUME /etc/saltdash/\n ---> Running in 64d15926ed4a\nRemoving intermediate container 64d15926ed4a\n ---> 59c145ab18b3\nStep 27/27 : CMD /bin/saltdash serve\n ---> Running in 9c6302573fb9\nRemoving intermediate container 9c6302573fb9\n ---> 5ca5ff88e941\nSuccessfully built 5ca5ff88e941\nSuccessfully tagged saltdash:latest\n","stderr":"","imageSize":234014747},"repair":{"violations":[{"name":"pipUseNoCacheDir","position":{"start":16,"end":16,"columnStart":4,"columnEnd":35}}],"repairedDockerfile":"FROM node:8-alpine as build-node\n\nWORKDIR /code\nRUN apk --no-cache add make rsync bash\nCOPY Makefile ./\nCOPY client/package.json client/package-lock.json ./client/\nRUN make client-install\n\nCOPY client/ ./client\nRUN make client-build\n\nFROM python:3.6 as build-python\nENV LANG C.UTF-8\n\nENV PATH=\"/root/.local/bin:${PATH}\"\nWORKDIR /code\nRUN pip3 install --no-cache-dir --user pipenv shiv\nADD . ./\nCOPY --from=build-node /code/client/dist/ ./client/dist\nRUN set -ex && make setup && SECRET_KEY=s pipenv run saltdash collectstatic --noinput && make shiv\n\nFROM python:3.6-slim\nCOPY --from=build-python /code/dist /dist\nRUN groupadd -r saltdash && \\\n    useradd --uid=1000 --create-home --home-dir=/srv/saltdash --no-log-init -r -g saltdash saltdash && \\\n    ln -s /dist/*.pyz /bin/saltdash && chmod +x /dist/*.pyz\n\n# Test reqs if you want that\nCOPY --from=build-python /code/setup.cfg /srv/saltdash/setup.cfg\n\nUSER saltdash\n\n# Trigger shiv unpack\nRUN SECRET_KEY=s /bin/saltdash help\n\nWORKDIR /srv/saltdash\nEXPOSE 8077\nENV LISTEN *:8077\nVOLUME /etc/saltdash/\n# Run tests with `pytest`\nCMD /bin/saltdash serve\n"},"repairedBuild":{"startTimestamp":1672285480886,"endTimestamp":1672285662156,"error":null,"stdout":"Sending build context to Docker daemon  534.5kB\r\r\nStep 1/27 : FROM node:8-alpine as build-node\n ---> 2b8fcdc6230a\nStep 2/27 : WORKDIR /code\n ---> Running in bb7cc6e410a3\nRemoving intermediate container bb7cc6e410a3\n ---> 7f49fc3a5150\nStep 3/27 : RUN apk --no-cache add make rsync bash\n ---> Running in c9fe59a0aab6\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.11/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.11/community/x86_64/APKINDEX.tar.gz\n(1/8) Installing ncurses-terminfo-base (6.1_p20200118-r4)\n(2/8) Installing ncurses-libs (6.1_p20200118-r4)\n(3/8) Installing readline (8.0.1-r0)\n(4/8) Installing bash (5.0.11-r1)\nExecuting bash-5.0.11-r1.post-install\n(5/8) Installing make (4.2.1-r2)\n(6/8) Installing libacl (2.2.53-r0)\n(7/8) Installing popt (1.16-r7)\n(8/8) Installing rsync (3.1.3-r2)\nExecuting busybox-1.31.1-r8.trigger\nOK: 10 MiB in 24 packages\nRemoving intermediate container c9fe59a0aab6\n ---> d39b10608300\nStep 4/27 : COPY Makefile ./\n ---> 5dac9e4047a9\nStep 5/27 : COPY client/package.json client/package-lock.json ./client/\n ---> 4ef8f545be3c\nStep 6/27 : RUN make client-install\n ---> Running in fc86098b9075\n\u001b[91mbash: python3: command not found\n\u001b[0m\u001b[91mbash: python3: command not found\n\u001b[0m\u001b[91mbash: git: command not found\n\u001b[0mcd client; NOBUILD=1 npm install --production\n\n> deasync@0.1.20 install /code/client/node_modules/deasync\n> node ./build.js\n\n`linux-x64-node-8` exists; testing\nBinary is fine; exiting\n\n> core-js@2.6.11 postinstall /code/client/node_modules/core-js\n> node -e \"try{require('./postinstall')}catch(e){}\"\n\n\u001b[96mThank you for using core-js (\u001b[94m https://github.com/zloirock/core-js \u001b[96m) for polyfilling JavaScript standard library!\u001b[0m\n\n\u001b[96mThe project needs your help! Please consider supporting of core-js on Open Collective or Patreon: \u001b[0m\n\u001b[96m>\u001b[94m https://opencollective.com/core-js \u001b[0m\n\u001b[96m>\u001b[94m https://www.patreon.com/zloirock \u001b[0m\n\n\u001b[96mAlso, the author of core-js (\u001b[94m https://github.com/zloirock \u001b[96m) is looking for a good job -)\u001b[0m\n\n\n> parcel-bundler@1.12.4 postinstall /code/client/node_modules/parcel-bundler\n> node -e \"console.log('\\u001b[35m\\u001b[1mLove Parcel? You can now donate to our open collective:\\u001b[22m\\u001b[39m\\n > \\u001b[34mhttps://opencollective.com/parcel/donate\\u001b[0m')\"\n\n\u001b[35m\u001b[1mLove Parcel? You can now donate to our open collective:\u001b[22m\u001b[39m\n > \u001b[34mhttps://opencollective.com/parcel/donate\u001b[0m\n\u001b[91mnpm WARN lifecycle\u001b[0m\u001b[91m undefined~postinstall: cannot run in wd undefined test -n \"$NOBUILD\" || npm run build (wd=/code/client)\n\u001b[0m\u001b[91mnpm WARN client No description\nnpm WARN client No repository field.\n\u001b[0m\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@1.2.13 (node_modules/fsevents):\nnpm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.2.13: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91m\n\u001b[0madded 764 packages from 466 contributors and audited 833 packages in 15.275s\n\n26 packages are looking for funding\n  run `npm fund` for details\n\nfound 119 vulnerabilities (9 low, 49 moderate, 52 high, 9 critical)\n  run `npm audit fix` to fix them, or `npm audit` for details\nRemoving intermediate container fc86098b9075\n ---> efffac4f557f\nStep 7/27 : COPY client/ ./client\n ---> 6642cc8b3808\nStep 8/27 : RUN make client-build\n ---> Running in 6508d82e33b0\n\u001b[91mbash: python3: command not found\n\u001b[0m\u001b[91mbash: python3: command not found\n\u001b[0m\u001b[91mbash: git: command not found\n\u001b[0mcd client; npm run build\n\n> @ build /code/client\n> npm run build:css && npm run build:js && npm run build:assets\n\n\n> @ build:css /code/client\n> parcel build --no-autoinstall scss/app.scss\n\n\u001b[91m/bin/sh: lscpu: not found\n\u001b[0m\u001b[91mBrowserslist: caniuse-lite is outdated. Please run:\nnpx browserslist@latest --update-db\n\u001b[0m✨  Built in 3.75s.\n\ndist/app.css.map     261.8 KB     25ms\ndist/app.css        140.38 KB    3.67s\n\n> @ build:js /code/client\n> parcel build --no-autoinstall js/app.js\n\n\u001b[91m/bin/sh: lscpu: not found\n\u001b[0m\u001b[91mBrowserslist: caniuse-lite is outdated. Please run:\nnpx browserslist@latest --update-db\n\u001b[0m✨  Built in 4.07s.\n\ndist/app.js.map    736.23 KB     53ms\ndist/app.js        172.32 KB    3.84s\n\n> @ build:assets /code/client\n> rsync -av --delete ./assets ./dist/\n\nsending incremental file list\nassets/\nassets/icon.png\nassets/icon.svg\n\nsent 27,429 bytes  received 58 bytes  54,974.00 bytes/sec\ntotal size is 27,261  speedup is 0.99\nRemoving intermediate container 6508d82e33b0\n ---> 5634cf11d0f0\nStep 9/27 : FROM python:3.6 as build-python\n ---> 54260638d07c\nStep 10/27 : ENV LANG C.UTF-8\n ---> Running in 95bf8a93f3cd\nRemoving intermediate container 95bf8a93f3cd\n ---> 491b725ce481\nStep 11/27 : ENV PATH=\"/root/.local/bin:${PATH}\"\n ---> Running in 9917654abc3e\nRemoving intermediate container 9917654abc3e\n ---> b93bc817b234\nStep 12/27 : WORKDIR /code\n ---> Running in 2a9f87623f7c\nRemoving intermediate container 2a9f87623f7c\n ---> 83441b777f4a\nStep 13/27 : RUN pip3 install --no-cache-dir --user pipenv shiv\n ---> Running in 4e29d2f5833e\nCollecting pipenv\n  Downloading pipenv-2022.4.8-py2.py3-none-any.whl (3.6 MB)\nCollecting shiv\n  Downloading shiv-1.0.3-py2.py3-none-any.whl (19 kB)\nRequirement already satisfied: pip>=18.0 in /usr/local/lib/python3.6/site-packages (from pipenv) (21.2.4)\nCollecting certifi\n  Downloading certifi-2022.12.7-py3-none-any.whl (155 kB)\nRequirement already satisfied: setuptools>=36.2.1 in /usr/local/lib/python3.6/site-packages (from pipenv) (57.5.0)\nCollecting virtualenv-clone>=0.2.5\n  Downloading virtualenv_clone-0.5.7-py3-none-any.whl (6.6 kB)\nCollecting virtualenv\n  Downloading virtualenv-20.17.1-py3-none-any.whl (8.8 MB)\nCollecting click!=7.0,>=6.7\n  Downloading click-8.0.4-py3-none-any.whl (97 kB)\nCollecting importlib-resources\n  Downloading importlib_resources-5.4.0-py3-none-any.whl (28 kB)\nCollecting importlib-metadata\n  Downloading importlib_metadata-4.8.3-py3-none-any.whl (17 kB)\nCollecting typing-extensions>=3.6.4\n  Downloading typing_extensions-4.1.1-py3-none-any.whl (26 kB)\nCollecting zipp>=0.5\n  Downloading zipp-3.6.0-py3-none-any.whl (5.3 kB)\nCollecting distlib<1,>=0.3.6\n  Downloading distlib-0.3.6-py2.py3-none-any.whl (468 kB)\nCollecting filelock<4,>=3.4.1\n  Downloading filelock-3.4.1-py3-none-any.whl (9.9 kB)\nCollecting platformdirs<3,>=2.4\n  Downloading platformdirs-2.4.0-py3-none-any.whl (14 kB)\nInstalling collected packages: zipp, typing-extensions, platformdirs, importlib-resources, importlib-metadata, filelock, distlib, virtualenv-clone, virtualenv, click, certifi, shiv, pipenv\nSuccessfully installed certifi-2022.12.7 click-8.0.4 distlib-0.3.6 filelock-3.4.1 importlib-metadata-4.8.3 importlib-resources-5.4.0 pipenv-2022.4.8 platformdirs-2.4.0 shiv-1.0.3 typing-extensions-4.1.1 virtualenv-20.17.1 virtualenv-clone-0.5.7 zipp-3.6.0\n\u001b[91mWARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv\n\u001b[0m\u001b[91mWARNING: You are using pip version 21.2.4; however, version 21.3.1 is available.\nYou should consider upgrading via the '/usr/local/bin/python -m pip install --upgrade pip' command.\n\u001b[0mRemoving intermediate container 4e29d2f5833e\n ---> b4ead54aaedb\nStep 14/27 : ADD . ./\n ---> b050ebeac589\nStep 15/27 : COPY --from=build-node /code/client/dist/ ./client/dist\n ---> 48c6203fba07\nStep 16/27 : RUN set -ex && make setup && SECRET_KEY=s pipenv run saltdash collectstatic --noinput && make shiv\n ---> Running in 636474d5d1c6\n\u001b[91m+ make setup\n\u001b[0mpipenv install --deploy | tee Pipfile.log\n\u001b[91mCreating a virtualenv for this project...\n\u001b[0m\u001b[91mPipfile: /code/Pipfile\n\u001b[0m\u001b[91mUsing /usr/local/bin/python3.6m (3.6.15) to create virtualenv...\n\u001b[0m\u001b[91m\r⠋ Creating virtual environment...\u001b[0m\u001b[91m\b\u001b[0m\u001b[91m\r⠙\u001b[0m\u001b[91m Creating virtual environment...\u001b[0m\u001b[91m\b\u001b[0m\u001b[91m\r⠹\u001b[0m\u001b[91m Creating virtual environment...\u001b[0m\u001b[91m\b\u001b[0m\u001b[91m\r⠸ Creating virtual environment...\u001b[0m\u001b[91m\b\u001b[0m\u001b[91m\r⠼ Creating virtual environment...\u001b[0m\u001b[91m\b\u001b[0m\u001b[91m\r⠴ Creating virtual environment...\u001b[0m\u001b[91m\b\u001b[0m\u001b[91m\r⠦ Creating virtual environment...\u001b[0m\u001b[91m\b\u001b[0m\u001b[91m\r⠧ Creating virtual environment...\u001b[0m\u001b[91mcreated virtual environment CPython3.6.15.final.0-64 in 493ms\n  creator CPython3Posix(dest=/root/.local/share/virtualenvs/code-_Py8Si6I, clear=False, no_vcs_ignore=False, global=False)\n  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, wheel=bundle, via=copy, app_data_dir=/root/.local/share/virtualenv)\n    added seed packages: pip==21.3.1, setuptools==59.6.0, wheel==0.37.1\n  activators BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator,PythonActivator\n\n\u001b[0m\u001b[91m\b\u001b[0m\u001b[91m✔ Successfully created virtual environment!\u001b[0m\u001b[91m \n\u001b[0m\u001b[91mVirtualenv location: /root/.local/share/virtualenvs/code-_Py8Si6I\n\u001b[0mInstalling dependencies from Pipfile.lock (baa6eb)...\n\u001b[91m+ SECRET_KEY=s pipenv run saltdash collectstatic --noinput\n\u001b[0m\u001b[91m{\"asctime\": \"2022-12-29 03:46:38,948\", \"created\": 1672285598.948516, \"levelname\": \"INFO\", \"levelno\": 20, \"filename\": \"__init__.py\", \"funcName\": \"<module>\", \"lineno\": 42, \"module\": \"__init__\", \"message\": \"Config loaded from environment.\", \"name\": \"saltdash.settings\", \"pathname\": \"/code/saltdash/settings/__init__.py\", \"process\": 339, \"processName\": \"MainProcess\"}\n\u001b[0m\u001b[91m{\"asctime\": \"2022-12-29 03:46:38,949\", \"created\": 1672285598.949823, \"levelname\": \"WARNING\", \"levelno\": 30, \"filename\": \"__init__.py\", \"funcName\": \"<module>\", \"lineno\": 177, \"module\": \"__init__\", \"message\": \"GitHub login environment variables not present. Turning off login requirement.\", \"name\": \"saltdash.settings\", \"pathname\": \"/code/saltdash/settings/__init__.py\", \"process\": 339, \"processName\": \"MainProcess\"}\n\u001b[0m\n125 static files copied to '/code/saltdash/static', 395 post-processed.\n\u001b[91m+ make shiv\n\u001b[0mmkdir dist\nshiv -e saltdash:config.django_manage -o dist/saltdash-0.9.10.dev0+4b0268cf9ce0320272f0182f33b046d4ab7766a2-py36-linux-x86_64.pyz \\\n\t --site-packages=/root/.local/share/virtualenvs/code-_Py8Si6I/lib/python3.6/site-packages \\\n\t --no-deps .\nProcessing /code\n  DEPRECATION: A future pip version will change local packages to be built in-place without first copying to a temporary directory. We recommend you use --use-feature=in-tree-build to test your packages with this new behavior before it becomes the default.\n   pip 21.3 will remove support for this functionality. You can find discussion regarding this at https://github.com/pypa/pip/issues/7555.\nBuilding wheels for collected packages: saltdash\n  Building wheel for saltdash (setup.py): started\n  Building wheel for saltdash (setup.py): finished with status 'done'\n  Created wheel for saltdash: filename=saltdash-0.9.10.dev0-py2.py3-none-any.whl size=3281281 sha256=3437d177c97966f1baea151c5b1aee9ed312928d8bfe14de0c9bac5f5c5e107a\n  Stored in directory: /tmp/pip-ephem-wheel-cache-5z3d4h77/wheels/59/06/9e/cd98ff3c95c17b4416957672b87792d4ec5f7eac1757e1b190\nSuccessfully built saltdash\nInstalling collected packages: saltdash\nSuccessfully installed saltdash-0.9.10.dev0\nWARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv\nRemoving intermediate container 636474d5d1c6\n ---> 6d02090e1eb6\nStep 17/27 : FROM python:3.6-slim\n ---> c1e40b69532f\nStep 18/27 : COPY --from=build-python /code/dist /dist\n ---> 4dd0a3eade01\nStep 19/27 : RUN groupadd -r saltdash &&     useradd --uid=1000 --create-home --home-dir=/srv/saltdash --no-log-init -r -g saltdash saltdash &&     ln -s /dist/*.pyz /bin/saltdash && chmod +x /dist/*.pyz\n ---> Running in 515b63af1315\nRemoving intermediate container 515b63af1315\n ---> 5fcda2c140f3\nStep 20/27 : COPY --from=build-python /code/setup.cfg /srv/saltdash/setup.cfg\n ---> 872eca25afa1\nStep 21/27 : USER saltdash\n ---> Running in b8fd2a7c5743\nRemoving intermediate container b8fd2a7c5743\n ---> f506bdc9b6ea\nStep 22/27 : RUN SECRET_KEY=s /bin/saltdash help\n ---> Running in aa4a9dca1233\n\u001b[91m{\"asctime\": \"2022-12-29 03:47:22,378\", \"created\": 1672285642.3789968, \"levelname\": \"INFO\", \"levelno\": 20, \"filename\": \"__init__.py\", \"funcName\": \"<module>\", \"lineno\": 42, \"module\": \"__init__\", \"message\": \"Config loaded from environment.\", \"name\": \"saltdash.settings\", \"pathname\": \"/srv/saltdash/.shiv/saltdash-0.9.10.dev0+4b0268cf9ce0320272f0182f33b046d4ab7766a2-py36-linux-x86_64.pyz_97da56dacab713f49389cc00dcb93a21d4c75919823dbf4e79eb5df4ea9a488f/site-packages/saltdash/settings/__init__.py\", \"process\": 7, \"processName\": \"MainProcess\"}\n\u001b[0m\u001b[91m{\"asctime\": \"2022-12-29 03:47:22,379\", \"created\": 1672285642.379508, \"levelname\": \"WARNING\", \"levelno\": 30, \"filename\": \"__init__.py\", \"funcName\": \"<module>\", \"lineno\": 177, \"module\": \"__init__\", \"message\": \"GitHub login environment variables not present. Turning off login requirement.\", \"name\": \"saltdash.settings\", \"pathname\": \"/srv/saltdash/.shiv/saltdash-0.9.10.dev0+4b0268cf9ce0320272f0182f33b046d4ab7766a2-py36-linux-x86_64.pyz_97da56dacab713f49389cc00dcb93a21d4c75919823dbf4e79eb5df4ea9a488f/site-packages/saltdash/settings/__init__.py\", \"process\": 7, \"processName\": \"MainProcess\"}\n\u001b[0m\nType 'saltdash help <subcommand>' for help on a specific subcommand.\n\nAvailable subcommands:\n\n[auth]\n    changepassword\n    createsuperuser\n\n[contenttypes]\n    remove_stale_contenttypes\n\n[dash]\n    purge_job_cache\n    serve\n\n[django]\n    check\n    compilemessages\n    createcachetable\n    dbshell\n    diffsettings\n    dumpdata\n    flush\n    inspectdb\n    loaddata\n    makemessages\n    makemigrations\n    migrate\n    sendtestemail\n    shell\n    showmigrations\n    sqlflush\n    sqlmigrate\n    sqlsequencereset\n    squashmigrations\n    startapp\n    startproject\n    test\n    testserver\n\n[sessions]\n    clearsessions\n\n[social_django]\n    clearsocial\n\n[staticfiles]\n    collectstatic\n    findstatic\n    runserver\nRemoving intermediate container aa4a9dca1233\n ---> 7d6d869da9fb\nStep 23/27 : WORKDIR /srv/saltdash\n ---> Running in a5a741eb3d0e\nRemoving intermediate container a5a741eb3d0e\n ---> 8aa70f5245c4\nStep 24/27 : EXPOSE 8077\n ---> Running in 4a8012e7c5b0\nRemoving intermediate container 4a8012e7c5b0\n ---> 25f447f62dac\nStep 25/27 : ENV LISTEN *:8077\n ---> Running in c3dc6ce5a078\nRemoving intermediate container c3dc6ce5a078\n ---> 6997ea356f74\nStep 26/27 : VOLUME /etc/saltdash/\n ---> Running in 770d7597ecfc\nRemoving intermediate container 770d7597ecfc\n ---> 5aaab2dc3efa\nStep 27/27 : CMD /bin/saltdash serve\n ---> Running in 6f68d6f370d9\nRemoving intermediate container 6f68d6f370d9\n ---> d86cd22f09d6\nSuccessfully built d86cd22f09d6\nSuccessfully tagged saltdash:latest\n","stderr":"","imageSize":234014597},"endTime":1672285662608}