{"repository":"https://github.com/meshery/meshery-nginx-sm","dockerfilePath":"Dockerfile","startTime":1673166077983,"endTime":1673166600981,"clone":{"startTime":1673166077983,"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/meshery/meshery-nginx-sm'...\n","error":null,"endTime":1673166078811,"commit":"cdaf99c0bf825db9385e0dfebd02a5278b9b9b72"},"originalBuild":{"startTime":1673166078897,"endTime":1673166595650,"error":null,"stdout":"Sending build context to Docker daemon   1.42MB\r\r\nStep 1/20 : FROM golang:1.19 as builder\n ---> 6650307efe4a\nStep 2/20 : ARG VERSION\n ---> Running in cf44fac3b932\nRemoving intermediate container cf44fac3b932\n ---> 526cc2515e9c\nStep 3/20 : ARG GIT_COMMITSHA\n ---> Running in 4754a24330d1\nRemoving intermediate container 4754a24330d1\n ---> b9b923e5bb2d\nStep 4/20 : WORKDIR /build\n ---> Running in a5b8fecd6180\nRemoving intermediate container a5b8fecd6180\n ---> e5224c6bf883\nStep 5/20 : COPY go.mod go.mod\n ---> 21886ed8957f\nStep 6/20 : COPY go.sum go.sum\n ---> 0fdb01e1424f\nStep 7/20 : RUN go mod download\n ---> Running in 5c39b7da07d0\nRemoving intermediate container 5c39b7da07d0\n ---> 902b4243fe40\nStep 8/20 : COPY main.go main.go\n ---> 81420f280a22\nStep 9/20 : COPY internal/ internal/\n ---> 9cc79f6fc45b\nStep 10/20 : COPY nginx/ nginx/\n ---> 4746fb2eba39\nStep 11/20 : COPY build/ build/\n ---> aeb4bb6517cf\nStep 12/20 : RUN CGO_ENABLED=0 GOOS=linux go build -ldflags=\"-w -s -X main.version=$VERSION -X main.gitsha=$GIT_COMMITSHA\" -a -o meshery-nginx-sm main.go\n ---> Running in e0cd729d860c\nRemoving intermediate container e0cd729d860c\n ---> 15baa2235eeb\nStep 13/20 : FROM gcr.io/distroless/nodejs:14\n14: Pulling from distroless/nodejs\nfc251a6e7981: Pulling fs layer\nfda4ba87f6fb: Pulling fs layer\na1f1879bb7de: Pulling fs layer\na240df815e84: Pulling fs layer\na240df815e84: Waiting\nfc251a6e7981: Verifying Checksum\nfc251a6e7981: Download complete\na1f1879bb7de: Verifying Checksum\na1f1879bb7de: Download complete\nfda4ba87f6fb: Verifying Checksum\nfda4ba87f6fb: Download complete\na240df815e84: Verifying Checksum\na240df815e84: Download complete\nfc251a6e7981: Pull complete\nfda4ba87f6fb: Pull complete\na1f1879bb7de: Pull complete\na240df815e84: Pull complete\nDigest: sha256:7676a0d7b74069706e4040a70d7b6a9c4fc5c43c00526100b54029dd7070f475\nStatus: Downloaded newer image for gcr.io/distroless/nodejs:14\n ---> 9f3e5dc02a05\nStep 14/20 : ENV DISTRO=\"debian\"\n ---> Running in fc014402fb71\nRemoving intermediate container fc014402fb71\n ---> a4a99cd5a2ce\nStep 15/20 : ENV SERVICE_ADDR=\"meshery-nginx-sm\"\n ---> Running in 34c75d349033\nRemoving intermediate container 34c75d349033\n ---> e5afe67bf5e8\nStep 16/20 : ENV MESHERY_SERVER=\"http://meshery:9081\"\n ---> Running in 0f9c3b5155b8\nRemoving intermediate container 0f9c3b5155b8\n ---> 9ac936e365c2\nStep 17/20 : COPY templates/ ./templates\n ---> 18795dfb7c7e\nStep 18/20 : WORKDIR /\n ---> Running in 5d2201617084\nRemoving intermediate container 5d2201617084\n ---> 24aa98542346\nStep 19/20 : COPY --from=builder /build/meshery-nginx-sm .\n ---> 180bf45c80ce\nStep 20/20 : ENTRYPOINT [\"/meshery-nginx-sm\"]\n ---> Running in 2fce3a83e4c2\nRemoving intermediate container 2fce3a83e4c2\n ---> e85b00c26e1d\nSuccessfully built e85b00c26e1d\nSuccessfully tagged meshery-nginx-sm:latest\n","stderr":"","imageSize":157190303},"repair":{"startTime":1673166595712,"endTime":1673166595773,"violations":[],"repairedDockerfile":"FROM golang:1.19 as builder\n\nARG VERSION\nARG GIT_COMMITSHA\nWORKDIR /build\n# Copy the Go Modules manifests\nCOPY go.mod go.mod\nCOPY go.sum go.sum\n# cache deps before building and copying source so that we don't need to re-download as much\n# and so that source changes don't invalidate our downloaded layer\nRUN go mod download\n# Copy the go source\nCOPY main.go main.go\nCOPY internal/ internal/\nCOPY nginx/ nginx/\nCOPY build/ build/\n# Build\nRUN CGO_ENABLED=0 GOOS=linux go build -ldflags=\"-w -s -X main.version=$VERSION -X main.gitsha=$GIT_COMMITSHA\" -a -o meshery-nginx-sm main.go\n\n# Use distroless as minimal base image to package the manager binary\n# Refer to https://github.com/GoogleContainerTools/distroless for more details\nFROM gcr.io/distroless/nodejs:14\nENV DISTRO=\"debian\"\nENV SERVICE_ADDR=\"meshery-nginx-sm\"\nENV MESHERY_SERVER=\"http://meshery:9081\"\nCOPY templates/ ./templates\nWORKDIR /\nCOPY --from=builder /build/meshery-nginx-sm .\nENTRYPOINT [\"/meshery-nginx-sm\"]\n"}}