{"repository":"https://github.com/meshery/meshery-istio","dockerfilePath":"Dockerfile","startTime":1672792971198,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/meshery/meshery-istio'...\n","error":null,"commit":"9c7d3517253066921fe7d4293541c4a67dc57f1c"},"originalBuild":{"startTimestamp":1672792972412,"endTimestamp":1672793143612,"error":null,"stdout":"Sending build context to Docker daemon  34.91MB\r\r\nStep 1/20 : FROM golang:1.19 as builder\n1.19: Pulling from library/golang\n32de3c850997: Already exists\nfa1d4c8d85a4: Already exists\nc796299bbbdd: Already exists\n81283a9569ad: Already exists\nc768848b86a2: Pulling fs layer\n3a3324c1d283: Pulling fs layer\nea43a17566db: Pulling fs layer\nea43a17566db: Verifying Checksum\nea43a17566db: Download complete\nc768848b86a2: Verifying Checksum\nc768848b86a2: Download complete\n3a3324c1d283: Verifying Checksum\n3a3324c1d283: Download complete\nc768848b86a2: Pull complete\n3a3324c1d283: Pull complete\nea43a17566db: Pull complete\nDigest: sha256:660f138b4477001d65324a51fa158c1b868651b44e43f0953bf062e9f38b72f3\nStatus: Downloaded newer image for golang:1.19\n ---> 6650307efe4a\nStep 2/20 : ARG VERSION\n ---> Running in c95f01959d47\nRemoving intermediate container c95f01959d47\n ---> e02d9b962aaf\nStep 3/20 : ARG GIT_COMMITSHA\n ---> Running in 4974ea795bd3\nRemoving intermediate container 4974ea795bd3\n ---> 1d93b62dc2c4\nStep 4/20 : WORKDIR /build\n ---> Running in 90c2cfe3edcd\nRemoving intermediate container 90c2cfe3edcd\n ---> f30def8f3f42\nStep 5/20 : COPY go.mod go.mod\n ---> f70f043e8f05\nStep 6/20 : COPY go.sum go.sum\n ---> 9a1fb1da471d\nStep 7/20 : RUN go mod download\n ---> Running in bb9bda8e67af\nRemoving intermediate container bb9bda8e67af\n ---> 337859ab3948\nStep 8/20 : COPY main.go main.go\n ---> dff736d8fc04\nStep 9/20 : COPY internal/ internal/\n ---> 8c9792f5b135\nStep 10/20 : COPY istio/ istio/\n ---> 5a3c0caa87ce\nStep 11/20 : COPY build/ build/\n ---> 284279c5702f\nStep 12/20 : RUN GOPROXY=direct,https://proxy.golang.org CGO_ENABLED=0 GOOS=linux GO111MODULE=on go build -ldflags=\"-w -s -X main.version=$VERSION -X main.gitsha=$GIT_COMMITSHA\" -a -o meshery-istio main.go\n ---> Running in 70e9574bd5cf\nRemoving intermediate container 70e9574bd5cf\n ---> 4cb0ff00a19f\nStep 13/20 : FROM gcr.io/distroless/nodejs:16\n16: Pulling from distroless/nodejs\nfc251a6e7981: Pulling fs layer\nfda4ba87f6fb: Pulling fs layer\na1f1879bb7de: Pulling fs layer\n51dfcb876247: Pulling fs layer\n51dfcb876247: Waiting\nfc251a6e7981: Download complete\na1f1879bb7de: Download complete\nfda4ba87f6fb: Verifying Checksum\nfda4ba87f6fb: Download complete\nfc251a6e7981: Pull complete\nfda4ba87f6fb: Pull complete\na1f1879bb7de: Pull complete\n51dfcb876247: Verifying Checksum\n51dfcb876247: Download complete\n51dfcb876247: Pull complete\nDigest: sha256:cbb78f019c517954711d9905ad0da8da567cb3dc77c46f36490c86acc92d235d\nStatus: Downloaded newer image for gcr.io/distroless/nodejs:16\n ---> dccfdcefc615\nStep 14/20 : ENV DISTRO=\"debian\"\n ---> Running in 62d237268e3a\nRemoving intermediate container 62d237268e3a\n ---> 8f93635e6976\nStep 15/20 : ENV SERVICE_ADDR=\"meshery-istio\"\n ---> Running in 9dbdd667fc6e\nRemoving intermediate container 9dbdd667fc6e\n ---> f8328ff48dce\nStep 16/20 : ENV MESHERY_SERVER=\"http://meshery:9081\"\n ---> Running in 84bdc95e63ce\nRemoving intermediate container 84bdc95e63ce\n ---> f8ac8d8124d8\nStep 17/20 : COPY templates/ ./templates\n ---> 4814735ece82\nStep 18/20 : WORKDIR /\n ---> Running in ec04bd36ac5f\nRemoving intermediate container ec04bd36ac5f\n ---> 61aeb83a1b79\nStep 19/20 : COPY --from=builder /build/meshery-istio .\n ---> bc0c7ce25815\nStep 20/20 : ENTRYPOINT [\"/meshery-istio\"]\n ---> Running in 8d1a937c2c7d\nRemoving intermediate container 8d1a937c2c7d\n ---> 740d2423f327\nSuccessfully built 740d2423f327\nSuccessfully tagged meshery-istio:latest\n","stderr":"","imageSize":197849250},"repair":{"violations":[],"repairedDockerfile":"FROM golang:1.19 as builder\n\nARG VERSION\nARG GIT_COMMITSHA\nWORKDIR /build\n# Copy the Go Modules manifests\nCOPY go.mod go.mod\nCOPY go.sum go.sum\n# cache deps before building and copying source so that we don't need to re-download as much\n# and so that source changes don't invalidate our downloaded layer\nRUN go mod download\n# Copy the go source\nCOPY main.go main.go\nCOPY internal/ internal/\nCOPY istio/ istio/\n# Build\nCOPY build/ build/\nRUN GOPROXY=direct,https://proxy.golang.org CGO_ENABLED=0 GOOS=linux GO111MODULE=on go build -ldflags=\"-w -s -X main.version=$VERSION -X main.gitsha=$GIT_COMMITSHA\" -a -o meshery-istio main.go\n\n\n# Use distroless as minimal base image to package the manager binary\n# Refer to https://github.com/GoogleContainerTools/distroless for more details\nFROM gcr.io/distroless/nodejs:16\nENV DISTRO=\"debian\"\nENV SERVICE_ADDR=\"meshery-istio\"\nENV MESHERY_SERVER=\"http://meshery:9081\"\nCOPY templates/ ./templates\nWORKDIR /\nCOPY --from=builder /build/meshery-istio .\nENTRYPOINT [\"/meshery-istio\"]\n"},"endTime":1672793144075}