{"repository":"https://github.com/meshery/meshery-linkerd","dockerfilePath":"Dockerfile","startTime":1672717985721,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/meshery/meshery-linkerd'...\n","error":null,"commit":"3e8d075308dc1213eeee8ec31d39761fa55425df"},"originalBuild":{"startTimestamp":1672717987036,"endTimestamp":1672718296270,"error":null,"stdout":"Sending build context to Docker daemon  9.758MB\r\r\nStep 1/23 : FROM golang:1.19 as build-env\n ---> 6650307efe4a\nStep 2/23 : ENV CGO_ENABLED=0\n ---> Running in 1601d1ad384a\nRemoving intermediate container 1601d1ad384a\n ---> 626dcd74d47a\nStep 3/23 : ARG VERSION\n ---> Running in 217bb5fb451a\nRemoving intermediate container 217bb5fb451a\n ---> 255abed246c7\nStep 4/23 : ARG GIT_COMMITSHA\n ---> Running in 84c575a62d29\nRemoving intermediate container 84c575a62d29\n ---> 2b636e91edba\nStep 5/23 : ARG GIT_VERSION\n ---> Running in 38b8917d4da2\nRemoving intermediate container 38b8917d4da2\n ---> 9f3f82c8919f\nStep 6/23 : ARG GIT_STRIPPED_VERSION\n ---> Running in 16909587057a\nRemoving intermediate container 16909587057a\n ---> e55a76a589d1\nStep 7/23 : WORKDIR /github.com/layer5io/meshery-linkerd\n ---> Running in 0a5e9c0f4ee0\nRemoving intermediate container 0a5e9c0f4ee0\n ---> 4333c02fe7be\nStep 8/23 : COPY go.mod go.sum ./\n ---> 7ffe59e79bba\nStep 9/23 : RUN go mod download\n ---> Running in 3be7f35dd782\nRemoving intermediate container 3be7f35dd782\n ---> 5da551c8908a\nStep 10/23 : COPY main.go main.go\n ---> 094427974325\nStep 11/23 : COPY internal/ internal/\n ---> df1088330f50\nStep 12/23 : COPY linkerd/ linkerd/\n ---> fc53edbb0dd2\nStep 13/23 : COPY build/ build/\n ---> 0186659a6ed8\nStep 14/23 : RUN VERSION=$(curl -L -s     https://api.github.com/repos/meshery/meshery-linkerd/releases/latest | \tgrep tag_name | sed \"s/ *\\\"tag_name\\\": *\\\"\\\\(.*\\\\)\\\",*/\\\\1/\" | \tgrep -v \"rc\\.[0-9]$\"| head -n 1 )\n ---> Running in f37b0ca7e640\nRemoving intermediate container f37b0ca7e640\n ---> 8c6783dd7cda\nStep 15/23 : RUN go mod tidy; CGO_ENABLED=0 GOOS=linux GO111MODULE=on go build \t-ldflags=\"-w -s -X main.version=$VERSION -X main.gitsha=$GIT_COMMITSHA\" \t-a -o meshery-linkerd main.go\n ---> Running in e8f823bc9164\n\u001b[91mgo: downloading gopkg.in/check.v1 v1.0.0-20201130134442-10cb98267c6c\n\u001b[0m\u001b[91mgo: downloading github.com/stretchr/testify v1.8.0\n\u001b[0m\u001b[91mgo: downloading github.com/go-git/go-git-fixtures/v4 v4.2.1\n\u001b[0m\u001b[91mgo: downloading github.com/rogpeppe/go-internal v1.8.1\n\u001b[0m\u001b[91mgo: downloading github.com/kr/pretty v0.2.1\n\u001b[0m\u001b[91mgo: downloading github.com/pmezard/go-difflib v1.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/distribution/distribution/v3 v3.0.0-20220526142353-ffbd94cbe269\n\u001b[0m\u001b[91mgo: downloading github.com/phayes/freeport v0.0.0-20220201140144-74d24b5ae9f5\n\u001b[0m\u001b[91mgo: downloading github.com/DATA-DOG/go-sqlmock v1.5.0\n\u001b[0m\u001b[91mgo: downloading github.com/cockroachdb/apd v1.1.0\n\u001b[0m\u001b[91mgo: downloading github.com/armon/go-socks5 v0.0.0-20160902184237-e75332964ef5\n\u001b[0m\u001b[91mgo: downloading github.com/gliderlabs/ssh v0.2.2\n\u001b[0m\u001b[91mgo: downloading github.com/matryer/is v1.2.0\n\u001b[0m\u001b[91mgo: downloading github.com/gofrs/uuid v4.0.0+incompatible\n\u001b[0m\u001b[91mgo: downloading github.com/go-sql-driver/mysql v1.6.0\n\u001b[0m\u001b[91mgo: downloading github.com/gobuffalo/packr/v2 v2.8.3\n\u001b[0m\u001b[91mgo: downloading github.com/jackc/pgmock v0.0.0-20210724152146-4ad1a8207f65\n\u001b[0m\u001b[91mgo: downloading github.com/onsi/ginkgo/v2 v2.4.0\n\u001b[0m\u001b[91mgo: downloading github.com/onsi/gomega v1.23.0\n\u001b[0m\u001b[91mgo: downloading github.com/anmitsu/go-shlex v0.0.0-20161002113705-648efa622239\n\u001b[0m\u001b[91mgo: downloading github.com/poy/onpar v0.0.0-20190519213022-ee068f8ea4d1\n\u001b[0m\u001b[91mgo: downloading github.com/ziutek/mymysql v1.5.4\n\u001b[0m\u001b[91mgo: downloading github.com/emicklei/proto v1.6.15\n\u001b[0m\u001b[91mgo: downloading github.com/protocolbuffers/txtpbfmt v0.0.0-20201118171849-f6a6b3f636fc\n\u001b[0m\u001b[91mgo: downloading github.com/docker/libtrust v0.0.0-20150114040149-fa567046d9b1\n\u001b[0m\u001b[91mgo: downloading gotest.tools/v3 v3.0.3\n\u001b[0m\u001b[91mgo: downloading github.com/stretchr/objx v0.4.0\n\u001b[0m\u001b[91mgo: downloading github.com/kr/text v0.2.0\n\u001b[0m\u001b[91mgo: downloading github.com/gobuffalo/packd v1.0.1\n\u001b[0m\u001b[91mgo: downloading github.com/markbates/oncer v1.0.0\ngo: downloading github.com/markbates/safe v1.0.1\n\u001b[0m\u001b[91mgo: downloading github.com/creack/pty v1.1.11\ngo: downloading github.com/golang/glog v0.0.0-20160126235308-23def4e6c14b\n\u001b[0m\u001b[91mgo: downloading github.com/gobuffalo/logger v1.0.6\n\u001b[0m\u001b[91mgo: downloading github.com/Microsoft/hcsshim v0.9.3\n\u001b[0m\u001b[91mgo: downloading github.com/moby/sys/mountinfo v0.5.0\n\u001b[0m\u001b[91mgo: downloading github.com/karrick/godirwalk v1.16.1\n\u001b[0m\u001b[91mgo: downloading github.com/markbates/errx v1.1.0\n\u001b[0m\u001b[91mgo: downloading github.com/elazarl/goproxy v0.0.0-20180725130230-947c36da3153\n\u001b[0m\u001b[91mgo: downloading gotest.tools v2.2.0+incompatible\n\u001b[0m\u001b[91mgo: downloading github.com/bshuster-repo/logrus-logstash-hook v1.0.0\ngo: downloading github.com/bugsnag/bugsnag-go v0.0.0-20141110184014-b1d153021fcd\ngo: downloading github.com/gorilla/handlers v1.5.1\n\u001b[0m\u001b[91mgo: downloading github.com/yvasiyarov/gorelic v0.0.0-20141212073537-a9bba5b9ab50\n\u001b[0m\u001b[91mgo: downloading github.com/Shopify/logrus-bugsnag v0.0.0-20171204204709-577dee27f20d\n\u001b[0m\u001b[91mgo: downloading github.com/gomodule/redigo v1.8.2\n\u001b[0m\u001b[91mgo: downloading github.com/docker/go-events v0.0.0-20190806004212-e31b211e4f1c\n\u001b[0m\u001b[91mgo: downloading github.com/yvasiyarov/go-metrics v0.0.0-20140926110328-57bccd1ccd43\ngo: downloading github.com/yvasiyarov/newrelic_platform_go v0.0.0-20140908184405-b21fdbd4370f\n\u001b[0m\u001b[91mgo: downloading github.com/bugsnag/panicwrap v0.0.0-20151223152923-e2c28503fcd0\n\u001b[0m\u001b[91mgo: downloading github.com/bugsnag/osext v0.0.0-20130617224835-0dd3f918b21b\n\u001b[0m\u001b[91mgo: downloading github.com/onsi/ginkgo v1.16.4\n\u001b[0m\u001b[91mgo: downloading go.opencensus.io v0.23.0\n\u001b[0m\u001b[91mgo: downloading github.com/containerd/cgroups v1.0.3\n\u001b[0m\u001b[91mgo: downloading github.com/felixge/httpsnoop v1.0.1\n\u001b[0m\u001b[91mgo: downloading github.com/golang/groupcache v0.0.0-20210331224755-41bb18bfe9da\n\u001b[0mRemoving intermediate container e8f823bc9164\n ---> b278c63388c5\nStep 16/23 : FROM gcr.io/distroless/nodejs:16\n ---> 37d336bef6f0\nStep 17/23 : ENV DISTRO=\"debian\"\n ---> Running in 5d9e5a780ab7\nRemoving intermediate container 5d9e5a780ab7\n ---> 11d973fbccaa\nStep 18/23 : ENV SERVICE_ADDR=\"meshery-linkerd\"\n ---> Running in f0023f2ec1a2\nRemoving intermediate container f0023f2ec1a2\n ---> 8a343d1edc5e\nStep 19/23 : ENV MESHERY_SERVER=\"http://meshery:9081\"\n ---> Running in 6a8404c263bb\nRemoving intermediate container 6a8404c263bb\n ---> c55f1847d7fc\nStep 20/23 : WORKDIR /\n ---> Running in 39df54d281e8\nRemoving intermediate container 39df54d281e8\n ---> 897ac5e19558\nStep 21/23 : COPY templates/ ./templates\n ---> a3c993602971\nStep 22/23 : COPY --from=build-env /github.com/layer5io/meshery-linkerd/meshery-linkerd .\n ---> e0abd03186b9\nStep 23/23 : ENTRYPOINT [\"./meshery-linkerd\"]\n ---> Running in efd6aeb57773\nRemoving intermediate container efd6aeb57773\n ---> 521156a0ea78\nSuccessfully built 521156a0ea78\nSuccessfully tagged meshery-linkerd:latest\n","stderr":"","imageSize":171945626},"repair":{"violations":[{"name":"curlUseFlagF","position":{"start":14,"end":15,"columnStart":14,"columnEnd":72}}],"repairedDockerfile":"FROM golang:1.19 as build-env\nENV CGO_ENABLED=0\nARG VERSION\nARG GIT_COMMITSHA\nARG GIT_VERSION\nARG GIT_STRIPPED_VERSION\n\nWORKDIR /github.com/layer5io/meshery-linkerd\nCOPY go.mod go.sum ./\nRUN go mod download\nCOPY main.go main.go\nCOPY internal/ internal/\nCOPY linkerd/ linkerd/\nCOPY build/ build/\nRUN VERSION=$( curl -f -L -s \\\n    https://api.github.com/repos/meshery/meshery-linkerd/releases/latest | \\\n\tgrep tag_name | sed \"s/ *\\\"tag_name\\\": *\\\"\\\\(.*\\\\)\\\",*/\\\\1/\" | \\\n\tgrep -v \"rc\\.[0-9]$\" | head -n 1)\nRUN go mod tidy; CGO_ENABLED=0 GOOS=linux GO111MODULE=on go build \\\n\t-ldflags=\"-w -s -X main.version=$VERSION -X main.gitsha=$GIT_COMMITSHA\" \\\n\t-a -o meshery-linkerd main.go\n\n\n\n# Use distroless as minimal base image to package the manager binary\n# Refer to https://github.com/GoogleContainerTools/distroless for more details\nFROM gcr.io/distroless/nodejs:16\nENV DISTRO=\"debian\"\nENV SERVICE_ADDR=\"meshery-linkerd\"\nENV MESHERY_SERVER=\"http://meshery:9081\"\nWORKDIR /\nCOPY templates/ ./templates\nCOPY --from=build-env /github.com/layer5io/meshery-linkerd/meshery-linkerd .\nENTRYPOINT [\"./meshery-linkerd\"]\n"},"repairedBuild":{"startTimestamp":1672718298656,"endTimestamp":1672718449397,"error":null,"stdout":"Sending build context to Docker daemon  9.758MB\r\r\nStep 1/23 : FROM golang:1.19 as build-env\n ---> 6650307efe4a\nStep 2/23 : ENV CGO_ENABLED=0\n ---> Running in a2ec5645e10a\nRemoving intermediate container a2ec5645e10a\n ---> 193bd2c31b08\nStep 3/23 : ARG VERSION\n ---> Running in c38b34ecb8d6\nRemoving intermediate container c38b34ecb8d6\n ---> 2db86894644f\nStep 4/23 : ARG GIT_COMMITSHA\n ---> Running in c5e6a4a2a7cb\nRemoving intermediate container c5e6a4a2a7cb\n ---> 2bfc1c8e524f\nStep 5/23 : ARG GIT_VERSION\n ---> Running in b566fd871d23\nRemoving intermediate container b566fd871d23\n ---> 40ccf0347acc\nStep 6/23 : ARG GIT_STRIPPED_VERSION\n ---> Running in 6518a02f3c2a\nRemoving intermediate container 6518a02f3c2a\n ---> 64c3afa70204\nStep 7/23 : WORKDIR /github.com/layer5io/meshery-linkerd\n ---> Running in f8ff0b9b7730\nRemoving intermediate container f8ff0b9b7730\n ---> 0ad7b17f9a40\nStep 8/23 : COPY go.mod go.sum ./\n ---> 3b64ab805dd5\nStep 9/23 : RUN go mod download\n ---> Running in ca5426c256df\nRemoving intermediate container ca5426c256df\n ---> 637fd0fd67e3\nStep 10/23 : COPY main.go main.go\n ---> 9d55688e1d7c\nStep 11/23 : COPY internal/ internal/\n ---> ebec53271215\nStep 12/23 : COPY linkerd/ linkerd/\n ---> 3bcc69c24c0a\nStep 13/23 : COPY build/ build/\n ---> 402f6d941845\nStep 14/23 : RUN VERSION=$( curl -f -L -s     https://api.github.com/repos/meshery/meshery-linkerd/releases/latest | \tgrep tag_name | sed \"s/ *\\\"tag_name\\\": *\\\"\\\\(.*\\\\)\\\",*/\\\\1/\" | \tgrep -v \"rc\\.[0-9]$\" | head -n 1)\n ---> Running in d3bb6ed650b4\nRemoving intermediate container d3bb6ed650b4\n ---> 31723b0cd7f7\nStep 15/23 : RUN go mod tidy; CGO_ENABLED=0 GOOS=linux GO111MODULE=on go build \t-ldflags=\"-w -s -X main.version=$VERSION -X main.gitsha=$GIT_COMMITSHA\" \t-a -o meshery-linkerd main.go\n ---> Running in 470fc1c133ef\n\u001b[91mgo: downloading github.com/stretchr/testify v1.8.0\n\u001b[0m\u001b[91mgo: downloading gopkg.in/check.v1 v1.0.0-20201130134442-10cb98267c6c\n\u001b[0m\u001b[91mgo: downloading github.com/go-git/go-git-fixtures/v4 v4.2.1\n\u001b[0m\u001b[91mgo: downloading github.com/kr/pretty v0.2.1\n\u001b[0m\u001b[91mgo: downloading github.com/pmezard/go-difflib v1.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/kr/text v0.2.0\n\u001b[0m\u001b[91mgo: downloading github.com/rogpeppe/go-internal v1.8.1\n\u001b[0m\u001b[91mgo: downloading github.com/distribution/distribution/v3 v3.0.0-20220526142353-ffbd94cbe269\n\u001b[0m\u001b[91mgo: downloading github.com/phayes/freeport v0.0.0-20220201140144-74d24b5ae9f5\n\u001b[0m\u001b[91mgo: downloading github.com/DATA-DOG/go-sqlmock v1.5.0\n\u001b[0m\u001b[91mgo: downloading github.com/gofrs/uuid v4.0.0+incompatible\ngo: downloading github.com/cockroachdb/apd v1.1.0\n\u001b[0m\u001b[91mgo: downloading github.com/armon/go-socks5 v0.0.0-20160902184237-e75332964ef5\n\u001b[0m\u001b[91mgo: downloading github.com/gliderlabs/ssh v0.2.2\n\u001b[0m\u001b[91mgo: downloading github.com/matryer/is v1.2.0\n\u001b[0m\u001b[91mgo: downloading github.com/go-sql-driver/mysql v1.6.0\n\u001b[0m\u001b[91mgo: downloading github.com/gobuffalo/packr/v2 v2.8.3\n\u001b[0m\u001b[91mgo: downloading github.com/jackc/pgmock v0.0.0-20210724152146-4ad1a8207f65\n\u001b[0m\u001b[91mgo: downloading github.com/onsi/ginkgo/v2 v2.4.0\n\u001b[0m\u001b[91mgo: downloading github.com/onsi/gomega v1.23.0\n\u001b[0m\u001b[91mgo: downloading github.com/anmitsu/go-shlex v0.0.0-20161002113705-648efa622239\n\u001b[0m\u001b[91mgo: downloading github.com/poy/onpar v0.0.0-20190519213022-ee068f8ea4d1\n\u001b[0m\u001b[91mgo: downloading github.com/ziutek/mymysql v1.5.4\n\u001b[0m\u001b[91mgo: downloading github.com/stretchr/objx v0.4.0\n\u001b[0m\u001b[91mgo: downloading github.com/emicklei/proto v1.6.15\n\u001b[0m\u001b[91mgo: downloading github.com/protocolbuffers/txtpbfmt v0.0.0-20201118171849-f6a6b3f636fc\n\u001b[0m\u001b[91mgo: downloading github.com/docker/libtrust v0.0.0-20150114040149-fa567046d9b1\n\u001b[0m\u001b[91mgo: downloading gotest.tools/v3 v3.0.3\n\u001b[0m\u001b[91mgo: downloading github.com/creack/pty v1.1.11\n\u001b[0m\u001b[91mgo: downloading github.com/gobuffalo/packd v1.0.1\n\u001b[0m\u001b[91mgo: downloading github.com/markbates/oncer v1.0.0\ngo: downloading github.com/markbates/safe v1.0.1\n\u001b[0m\u001b[91mgo: downloading github.com/elazarl/goproxy v0.0.0-20180725130230-947c36da3153\n\u001b[0m\u001b[91mgo: downloading github.com/karrick/godirwalk v1.16.1\n\u001b[0m\u001b[91mgo: downloading github.com/gobuffalo/logger v1.0.6\n\u001b[0m\u001b[91mgo: downloading github.com/markbates/errx v1.1.0\n\u001b[0m\u001b[91mgo: downloading github.com/Microsoft/hcsshim v0.9.3\n\u001b[0m\u001b[91mgo: downloading github.com/moby/sys/mountinfo v0.5.0\n\u001b[0m\u001b[91mgo: downloading github.com/bshuster-repo/logrus-logstash-hook v1.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/gorilla/handlers v1.5.1\ngo: downloading github.com/Shopify/logrus-bugsnag v0.0.0-20171204204709-577dee27f20d\n\u001b[0m\u001b[91mgo: downloading github.com/yvasiyarov/gorelic v0.0.0-20141212073537-a9bba5b9ab50\ngo: downloading github.com/bugsnag/bugsnag-go v0.0.0-20141110184014-b1d153021fcd\n\u001b[0m\u001b[91mgo: downloading github.com/gomodule/redigo v1.8.2\n\u001b[0m\u001b[91mgo: downloading github.com/docker/go-events v0.0.0-20190806004212-e31b211e4f1c\n\u001b[0m\u001b[91mgo: downloading github.com/yvasiyarov/newrelic_platform_go v0.0.0-20140908184405-b21fdbd4370f\ngo: downloading github.com/yvasiyarov/go-metrics v0.0.0-20140926110328-57bccd1ccd43\n\u001b[0m\u001b[91mgo: downloading github.com/bugsnag/panicwrap v0.0.0-20151223152923-e2c28503fcd0\n\u001b[0m\u001b[91mgo: downloading github.com/golang/glog v0.0.0-20160126235308-23def4e6c14b\n\u001b[0m\u001b[91mgo: downloading gotest.tools v2.2.0+incompatible\n\u001b[0m\u001b[91mgo: downloading github.com/felixge/httpsnoop v1.0.1\n\u001b[0m\u001b[91mgo: downloading github.com/bugsnag/osext v0.0.0-20130617224835-0dd3f918b21b\n\u001b[0m\u001b[91mgo: downloading github.com/onsi/ginkgo v1.16.4\n\u001b[0m\u001b[91mgo: downloading go.opencensus.io v0.23.0\n\u001b[0m\u001b[91mgo: downloading github.com/containerd/cgroups v1.0.3\n\u001b[0m\u001b[91mgo: downloading github.com/golang/groupcache v0.0.0-20210331224755-41bb18bfe9da\n\u001b[0mRemoving intermediate container 470fc1c133ef\n ---> 36a7e526c652\nStep 16/23 : FROM gcr.io/distroless/nodejs:16\n ---> 37d336bef6f0\nStep 17/23 : ENV DISTRO=\"debian\"\n ---> Running in f9514cd88c61\nRemoving intermediate container f9514cd88c61\n ---> d26d8433e13d\nStep 18/23 : ENV SERVICE_ADDR=\"meshery-linkerd\"\n ---> Running in c374b1e4e6f5\nRemoving intermediate container c374b1e4e6f5\n ---> d1c39ef992b9\nStep 19/23 : ENV MESHERY_SERVER=\"http://meshery:9081\"\n ---> Running in f0b9108a85b5\nRemoving intermediate container f0b9108a85b5\n ---> deacc71d66e6\nStep 20/23 : WORKDIR /\n ---> Running in 0919d5c57efc\nRemoving intermediate container 0919d5c57efc\n ---> 0bddde011874\nStep 21/23 : COPY templates/ ./templates\n ---> a5c13bd639d9\nStep 22/23 : COPY --from=build-env /github.com/layer5io/meshery-linkerd/meshery-linkerd .\n ---> ffeabce43ef9\nStep 23/23 : ENTRYPOINT [\"./meshery-linkerd\"]\n ---> Running in e97bd80fb2de\nRemoving intermediate container e97bd80fb2de\n ---> eb227fadad2a\nSuccessfully built eb227fadad2a\nSuccessfully tagged meshery-linkerd:latest\n","stderr":"","imageSize":171945626},"endTime":1672718449889}