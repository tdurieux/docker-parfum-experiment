{"repository":"https://github.com/meshery/meshery-consul","dockerfilePath":"Dockerfile","startTime":1672782314329,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/meshery/meshery-consul'...\n","error":null,"commit":"db1321ef3a35b0321d46e49cb8e64d097110d225"},"originalBuild":{"startTimestamp":1672782315320,"endTimestamp":1672782436794,"error":null,"stdout":"Sending build context to Docker daemon  2.328MB\r\r\nStep 1/25 : FROM golang:1.19 as builder\n ---> 6650307efe4a\nStep 2/25 : ARG VERSION\n ---> Running in 07d44cf322a2\nRemoving intermediate container 07d44cf322a2\n ---> da076dc72fbe\nStep 3/25 : ARG GIT_COMMITSHA\n ---> Running in aac67931aa0f\nRemoving intermediate container aac67931aa0f\n ---> db80f528671c\nStep 4/25 : WORKDIR /build\n ---> Running in a3283bf405a1\nRemoving intermediate container a3283bf405a1\n ---> c0ea7d39fb23\nStep 5/25 : COPY go.mod go.mod\n ---> 2f399e8e5b3f\nStep 6/25 : COPY go.sum go.sum\n ---> 6c61a0b9ac88\nStep 7/25 : RUN GOPROXY=https://proxy.golang.org,direct go mod download\n ---> Running in 5a81dea88217\nRemoving intermediate container 5a81dea88217\n ---> 4c461a157df0\nStep 8/25 : COPY main.go main.go\n ---> 19102a01ed87\nStep 9/25 : COPY internal/ internal/\n ---> e330b109ca52\nStep 10/25 : COPY consul/ consul/\n ---> 79693ef5c9f7\nStep 11/25 : COPY build/ build/\n ---> ba9812dfe2b3\nStep 12/25 : RUN GOPROXY=https://proxy.golang.org,direct CGO_ENABLED=0 GOOS=linux GO111MODULE=on go build -ldflags=\"-w -s -X main.version=$VERSION -X main.gitsha=$GIT_COMMITSHA\" -a -o meshery-consul main.go\n ---> Running in 1488bc83013c\nRemoving intermediate container 1488bc83013c\n ---> e60bebafb72a\nStep 13/25 : FROM alpine:3.15\n ---> c4fc93816858\nStep 14/25 : RUN addgroup -S appgroup && adduser -S appuser -G appgroup\n ---> Running in 9de1c173fa2c\nRemoving intermediate container 9de1c173fa2c\n ---> a4d263574929\nStep 15/25 : RUN apk --update add ca-certificates &&     mkdir /lib64 &&     ln -s /lib/libc.musl-x86_64.so.1 /lib64/ld-linux-x86-64.so.2\n ---> Running in 37f81dcddafd\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/community/x86_64/APKINDEX.tar.gz\n(1/1) Installing ca-certificates (20220614-r0)\nExecuting busybox-1.34.1-r7.trigger\nExecuting ca-certificates-20220614-r0.trigger\nOK: 6 MiB in 15 packages\nRemoving intermediate container 37f81dcddafd\n ---> aff614e752d4\nStep 16/25 : USER appuser\n ---> Running in 6a567ebefad2\nRemoving intermediate container 6a567ebefad2\n ---> 14a929cb6bd6\nStep 17/25 : ENV SERVICE_ADDR=\"meshery-consul\"\n ---> Running in 2d6b87c75e4c\nRemoving intermediate container 2d6b87c75e4c\n ---> 63424379285f\nStep 18/25 : ENV MESHERY_SERVER=\"http://meshery:9081\"\n ---> Running in 7b1d5233091f\nRemoving intermediate container 7b1d5233091f\n ---> 3e13267b2867\nStep 19/25 : RUN mkdir -p /home/appuser/.kube\n ---> Running in bb732ac88493\nRemoving intermediate container bb732ac88493\n ---> d370a0a6e69d\nStep 20/25 : RUN mkdir -p /home/appuser/.meshery\n ---> Running in fefcd04f6a1a\nRemoving intermediate container fefcd04f6a1a\n ---> 120f1a4c8f00\nStep 21/25 : WORKDIR /home/appuser\n ---> Running in 70d807334878\nRemoving intermediate container 70d807334878\n ---> f368a28f4cb4\nStep 22/25 : COPY templates/ ./templates\n ---> 9ca4836fff2a\nStep 23/25 : COPY --from=builder /build/meshery-consul /home/appuser\n ---> 36b27758495b\nStep 24/25 : COPY consul /home/appuser/consul\n ---> 71d821188377\nStep 25/25 : CMD ./meshery-consul\n ---> Running in 20283010141b\nRemoving intermediate container 20283010141b\n ---> 959f177f8ed1\nSuccessfully built 959f177f8ed1\nSuccessfully tagged meshery-consul:latest\n","stderr":"","imageSize":63353538},"repair":{"violations":[{"name":"apkAddUseNoCache","position":{"start":21,"end":21,"columnStart":4,"columnEnd":36}}],"repairedDockerfile":"FROM golang:1.19 as builder\n\nARG VERSION\nARG GIT_COMMITSHA\nWORKDIR /build\n# Copy the Go Modules manifests\nCOPY go.mod go.mod\nCOPY go.sum go.sum\n# cache deps before building and copying source so that we don't need to re-download as much\n# and so that source changes don't invalidate our downloaded layer\nRUN GOPROXY=https://proxy.golang.org,direct go mod download\n# Copy the go source\nCOPY main.go main.go\nCOPY internal/ internal/\nCOPY consul/ consul/\nCOPY build/ build/\n\nRUN GOPROXY=https://proxy.golang.org,direct CGO_ENABLED=0 GOOS=linux GO111MODULE=on go build -ldflags=\"-w -s -X main.version=$VERSION -X main.gitsha=$GIT_COMMITSHA\" -a -o meshery-consul main.go\n\nFROM alpine:3.15\nRUN addgroup -S appgroup && adduser -S appuser -G appgroup\nRUN apk --update --no-cache add ca-certificates && \\\n    mkdir /lib64 && \\\n    ln -s /lib/libc.musl-x86_64.so.1 /lib64/ld-linux-x86-64.so.2\n\nUSER appuser\nENV SERVICE_ADDR=\"meshery-consul\"\nENV MESHERY_SERVER=\"http://meshery:9081\"\nRUN mkdir -p /home/appuser/.kube\nRUN mkdir -p /home/appuser/.meshery\nWORKDIR /home/appuser\nCOPY templates/ ./templates\nCOPY --from=builder /build/meshery-consul /home/appuser\nCOPY consul /home/appuser/consul\nCMD ./meshery-consul\n"},"repairedBuild":{"startTimestamp":1672782437177,"endTimestamp":1672782596576,"error":null,"stdout":"Sending build context to Docker daemon  2.328MB\r\r\nStep 1/25 : FROM golang:1.19 as builder\n ---> 6650307efe4a\nStep 2/25 : ARG VERSION\n ---> Running in 918bfb33f95a\nRemoving intermediate container 918bfb33f95a\n ---> 0332e47a844a\nStep 3/25 : ARG GIT_COMMITSHA\n ---> Running in ed1c7cb3b736\nRemoving intermediate container ed1c7cb3b736\n ---> f17c18917b56\nStep 4/25 : WORKDIR /build\n ---> Running in e1064e70ea22\nRemoving intermediate container e1064e70ea22\n ---> e01907c3b6c5\nStep 5/25 : COPY go.mod go.mod\n ---> 0ca2a874a1c6\nStep 6/25 : COPY go.sum go.sum\n ---> 9b68790e0edf\nStep 7/25 : RUN GOPROXY=https://proxy.golang.org,direct go mod download\n ---> Running in 21ed718835f0\nRemoving intermediate container 21ed718835f0\n ---> 50409560428e\nStep 8/25 : COPY main.go main.go\n ---> c33496046d77\nStep 9/25 : COPY internal/ internal/\n ---> db87bc53a0e0\nStep 10/25 : COPY consul/ consul/\n ---> 92382b9aeb8a\nStep 11/25 : COPY build/ build/\n ---> 57a84ad18a24\nStep 12/25 : RUN GOPROXY=https://proxy.golang.org,direct CGO_ENABLED=0 GOOS=linux GO111MODULE=on go build -ldflags=\"-w -s -X main.version=$VERSION -X main.gitsha=$GIT_COMMITSHA\" -a -o meshery-consul main.go\n ---> Running in 5b867c05ffbb\nRemoving intermediate container 5b867c05ffbb\n ---> c79542c42e03\nStep 13/25 : FROM alpine:3.15\n ---> c4fc93816858\nStep 14/25 : RUN addgroup -S appgroup && adduser -S appuser -G appgroup\n ---> Running in 26dd94b5763a\nRemoving intermediate container 26dd94b5763a\n ---> aa03603ca64f\nStep 15/25 : RUN apk --update --no-cache add ca-certificates &&     mkdir /lib64 &&     ln -s /lib/libc.musl-x86_64.so.1 /lib64/ld-linux-x86-64.so.2\n ---> Running in a56747f835e5\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/community/x86_64/APKINDEX.tar.gz\n(1/1) Installing ca-certificates (20220614-r0)\nExecuting busybox-1.34.1-r7.trigger\nExecuting ca-certificates-20220614-r0.trigger\nOK: 6 MiB in 15 packages\nRemoving intermediate container a56747f835e5\n ---> def54c5e50f5\nStep 16/25 : USER appuser\n ---> Running in 94cb88d102c4\nRemoving intermediate container 94cb88d102c4\n ---> 9d66e0652bdf\nStep 17/25 : ENV SERVICE_ADDR=\"meshery-consul\"\n ---> Running in ff511822f983\nRemoving intermediate container ff511822f983\n ---> 9acb1f22f41d\nStep 18/25 : ENV MESHERY_SERVER=\"http://meshery:9081\"\n ---> Running in 51149d8b564f\nRemoving intermediate container 51149d8b564f\n ---> 48fe5684f090\nStep 19/25 : RUN mkdir -p /home/appuser/.kube\n ---> Running in b3591ba3ec53\nRemoving intermediate container b3591ba3ec53\n ---> 30cb32034eef\nStep 20/25 : RUN mkdir -p /home/appuser/.meshery\n ---> Running in 1d71cba42586\nRemoving intermediate container 1d71cba42586\n ---> a61cffec67f3\nStep 21/25 : WORKDIR /home/appuser\n ---> Running in cf5523a951d8\nRemoving intermediate container cf5523a951d8\n ---> ced999bb7150\nStep 22/25 : COPY templates/ ./templates\n ---> 480ba12b2aa3\nStep 23/25 : COPY --from=builder /build/meshery-consul /home/appuser\n ---> 8c0df917afb4\nStep 24/25 : COPY consul /home/appuser/consul\n ---> f0207a2f1280\nStep 25/25 : CMD ./meshery-consul\n ---> Running in b0cc2d0d2a19\nRemoving intermediate container b0cc2d0d2a19\n ---> 13fdb24b7e80\nSuccessfully built 13fdb24b7e80\nSuccessfully tagged meshery-consul:latest\n","stderr":"","imageSize":61057665},"endTime":1672782596847}