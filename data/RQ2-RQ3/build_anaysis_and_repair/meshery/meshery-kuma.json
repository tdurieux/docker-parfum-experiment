{"repository":"https://github.com/meshery/meshery-kuma","dockerfilePath":"Dockerfile","startTime":1672008749241,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/meshery/meshery-kuma'...\n","error":null,"commit":"cf2fa63161898189da0c2df1a66bc25d4c3a2b7b"},"originalBuild":{"startTimestamp":1672008750237,"endTimestamp":1672008862170,"error":null,"stdout":"Sending build context to Docker daemon  4.219MB\r\r\nStep 1/20 : FROM golang:1.19 as builder\n1.19: Pulling from library/golang\nDigest: sha256:660f138b4477001d65324a51fa158c1b868651b44e43f0953bf062e9f38b72f3\nStatus: Downloaded newer image for golang:1.19\n ---> 6650307efe4a\nStep 2/20 : ARG VERSION\n ---> Running in fae093216485\nRemoving intermediate container fae093216485\n ---> ef116972cf87\nStep 3/20 : ARG GIT_COMMITSHA\n ---> Running in 27e731a78e72\nRemoving intermediate container 27e731a78e72\n ---> 789a74751654\nStep 4/20 : WORKDIR /build\n ---> Running in 004a05532da7\nRemoving intermediate container 004a05532da7\n ---> 0a171990051e\nStep 5/20 : COPY go.mod go.mod\n ---> cfef7f8d09d7\nStep 6/20 : COPY go.sum go.sum\n ---> fee43a09ca35\nStep 7/20 : RUN GOPROXY=https://proxy.golang.org,direct go mod download\n ---> Running in 6ee4b35301b1\nRemoving intermediate container 6ee4b35301b1\n ---> f9361f677ca6\nStep 8/20 : COPY main.go main.go\n ---> c234c50f2d53\nStep 9/20 : COPY internal/ internal/\n ---> 50fa57713f98\nStep 10/20 : COPY kuma/ kuma/\n ---> 83d0227de20c\nStep 11/20 : COPY build/ build/\n ---> 9a096dd1023c\nStep 12/20 : RUN GOPROXY=https://proxy.golang.org,direct CGO_ENABLED=1 GOOS=linux GO111MODULE=on go build -ldflags=\"-w -s -X main.version=$VERSION -X main.gitsha=$GIT_COMMITSHA\" -a -o meshery-kuma main.go\n ---> Running in 829337f19bd0\nRemoving intermediate container 829337f19bd0\n ---> 755a15e4c9e4\nStep 13/20 : FROM gcr.io/distroless/nodejs:latest\nlatest: Pulling from distroless/nodejs\nfc251a6e7981: Pulling fs layer\nfda4ba87f6fb: Pulling fs layer\na1f1879bb7de: Pulling fs layer\na02cc7e9cd7d: Pulling fs layer\na02cc7e9cd7d: Waiting\nfc251a6e7981: Verifying Checksum\nfc251a6e7981: Download complete\na1f1879bb7de: Verifying Checksum\na1f1879bb7de: Download complete\nfda4ba87f6fb: Verifying Checksum\nfda4ba87f6fb: Download complete\nfc251a6e7981: Pull complete\nfda4ba87f6fb: Pull complete\na1f1879bb7de: Pull complete\na02cc7e9cd7d: Verifying Checksum\na02cc7e9cd7d: Download complete\na02cc7e9cd7d: Pull complete\nDigest: sha256:039aeeddc00d285be1a32d41648d3941cbdaab05cce03344a1267f49cce464d3\nStatus: Downloaded newer image for gcr.io/distroless/nodejs:latest\n ---> 494d034f1f6d\nStep 14/20 : WORKDIR /\n ---> Running in 1d67a158aae1\nRemoving intermediate container 1d67a158aae1\n ---> 527241621815\nStep 15/20 : ENV DISTRO=\"debian\"\n ---> Running in 5610e9ea97fa\nRemoving intermediate container 5610e9ea97fa\n ---> 64bc4962b8ef\nStep 16/20 : ENV SERVICE_ADDR=\"meshery-kuma\"\n ---> Running in 3529d5f98c72\nRemoving intermediate container 3529d5f98c72\n ---> 83e0d5b4f2c5\nStep 17/20 : ENV MESHERY_SERVER=\"http://meshery:9081\"\n ---> Running in 86c54c55c321\nRemoving intermediate container 86c54c55c321\n ---> e233746561c2\nStep 18/20 : COPY templates/ ./templates\n ---> d0492ba79c96\nStep 19/20 : COPY --from=builder /build/meshery-kuma .\n ---> 056684fe0e73\nStep 20/20 : ENTRYPOINT [\"/meshery-kuma\"]\n ---> Running in 36b1a19e33e8\nRemoving intermediate container 36b1a19e33e8\n ---> 3e9a15fab174\nSuccessfully built 3e9a15fab174\nSuccessfully tagged meshery-kuma:latest\n","stderr":"","imageSize":230032013},"repair":{"violations":[],"repairedDockerfile":"FROM golang:1.19 as builder\n\nARG VERSION\nARG GIT_COMMITSHA\nWORKDIR /build\n# Copy the Go Modules manifests\nCOPY go.mod go.mod\nCOPY go.sum go.sum\n# cache deps before building and copying source so that we don't need to re-download as much\n# and so that source changes don't invalidate our downloaded layer\nRUN GOPROXY=https://proxy.golang.org,direct go mod download\n# Copy the go source\nCOPY main.go main.go\nCOPY internal/ internal/\nCOPY kuma/ kuma/\nCOPY build/ build/\n# Build\nRUN GOPROXY=https://proxy.golang.org,direct CGO_ENABLED=1 GOOS=linux GO111MODULE=on go build -ldflags=\"-w -s -X main.version=$VERSION -X main.gitsha=$GIT_COMMITSHA\" -a -o meshery-kuma main.go\n\n# Use distroless as minimal base image to package the manager binary\n# Refer to https://github.com/GoogleContainerTools/distroless for more details\nFROM gcr.io/distroless/nodejs:latest\nWORKDIR /\nENV DISTRO=\"debian\"\nENV SERVICE_ADDR=\"meshery-kuma\"\nENV MESHERY_SERVER=\"http://meshery:9081\"\nCOPY templates/ ./templates\nCOPY --from=builder /build/meshery-kuma .\nENTRYPOINT [\"/meshery-kuma\"]\n"},"endTime":1672008862525}