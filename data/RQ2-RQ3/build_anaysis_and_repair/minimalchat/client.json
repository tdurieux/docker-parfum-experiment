{"repository":"https://github.com/minimalchat/client","dockerfilePath":"Dockerfile","startTime":1672147863223,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/minimalchat/client'...\n","error":null,"commit":"111dcca5d63d68bdd460435923adb67c51628f33"},"originalBuild":{"startTimestamp":1672147864895,"endTimestamp":1672147959882,"error":null,"stdout":"Sending build context to Docker daemon    705kB\r\r\nStep 1/9 : FROM node:11\n11: Pulling from library/node\na4d8138d0f6b: Pulling fs layer\ndbdc36973392: Pulling fs layer\nf59d6d019dd5: Pulling fs layer\naaef3e026258: Pulling fs layer\n6e454d3b6c28: Pulling fs layer\nc717a7c205aa: Pulling fs layer\n69b68470ed80: Pulling fs layer\n05a0d45743c9: Pulling fs layer\nd0523573a78c: Pulling fs layer\nc717a7c205aa: Waiting\n6e454d3b6c28: Waiting\nd0523573a78c: Waiting\n05a0d45743c9: Waiting\n69b68470ed80: Waiting\nf59d6d019dd5: Verifying Checksum\ndbdc36973392: Verifying Checksum\ndbdc36973392: Download complete\na4d8138d0f6b: Verifying Checksum\na4d8138d0f6b: Download complete\nc717a7c205aa: Verifying Checksum\nc717a7c205aa: Download complete\naaef3e026258: Verifying Checksum\naaef3e026258: Download complete\n69b68470ed80: Verifying Checksum\n69b68470ed80: Download complete\n05a0d45743c9: Verifying Checksum\n05a0d45743c9: Download complete\nd0523573a78c: Download complete\na4d8138d0f6b: Pull complete\ndbdc36973392: Pull complete\nf59d6d019dd5: Pull complete\n6e454d3b6c28: Verifying Checksum\n6e454d3b6c28: Download complete\naaef3e026258: Pull complete\n6e454d3b6c28: Pull complete\nc717a7c205aa: Pull complete\n69b68470ed80: Pull complete\n05a0d45743c9: Pull complete\nd0523573a78c: Pull complete\nDigest: sha256:67ca28addce8ae818b144114a9376a6603aba09069b7313618d37b38584abba1\nStatus: Downloaded newer image for node:11\n ---> 5b97b72da029\nStep 2/9 : RUN mkdir -p /tmp\n ---> Running in 8708641deb3a\nRemoving intermediate container 8708641deb3a\n ---> 849869c7c719\nStep 3/9 : WORKDIR /tmp/client\n ---> Running in ada7a3d64fe8\nRemoving intermediate container ada7a3d64fe8\n ---> 81304c00798c\nStep 4/9 : RUN apt update &&       apt install -y git build-essential\n ---> Running in 3c9dbe35fdad\n\u001b[91m\nWARNING: apt does not have a stable CLI interface. Use with caution in scripts.\n\n\u001b[0mIgn:1 http://deb.debian.org/debian stretch InRelease\nGet:2 http://security.debian.org/debian-security stretch/updates InRelease [59.1 kB]\nGet:3 http://deb.debian.org/debian stretch-updates InRelease [93.6 kB]\nGet:4 http://deb.debian.org/debian stretch Release [118 kB]\nGet:5 http://deb.debian.org/debian stretch Release.gpg [3177 B]\nGet:6 http://security.debian.org/debian-security stretch/updates/main amd64 Packages [782 kB]\nGet:7 http://deb.debian.org/debian stretch/main amd64 Packages [7080 kB]\nFetched 8135 kB in 1s (5830 kB/s)\nReading package lists...\nBuilding dependency tree...\nReading state information...\n167 packages can be upgraded. Run 'apt list --upgradable' to see them.\n\u001b[91m\nWARNING: apt does not have a stable CLI interface. Use with caution in scripts.\n\n\u001b[0mReading package lists...\nBuilding dependency tree...\nReading state information...\nSuggested packages:\n  gettext-base git-daemon-run | git-daemon-sysvinit git-doc git-el git-email\n  git-gui gitk gitweb git-arch git-cvs git-mediawiki git-svn\nRecommended packages:\n  less rsync\nThe following NEW packages will be installed:\n  build-essential\nThe following packages will be upgraded:\n  git\n1 upgraded, 1 newly installed, 0 to remove and 166 not upgraded.\nNeed to get 4177 kB of archives.\nAfter this operation, 43.0 kB of additional disk space will be used.\nGet:1 http://deb.debian.org/debian stretch/main amd64 git amd64 1:2.11.0-3+deb9u7 [4170 kB]\nGet:2 http://deb.debian.org/debian stretch/main amd64 build-essential amd64 12.3 [7346 B]\n\u001b[91mdebconf: delaying package configuration, since apt-utils is not installed\n\u001b[0mFetched 4177 kB in 0s (68.5 MB/s)\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 29980 files and directories currently installed.)\r\nPreparing to unpack .../git_1%3a2.11.0-3+deb9u7_amd64.deb ...\r\nUnpacking git (1:2.11.0-3+deb9u7) over (1:2.11.0-3+deb9u4) ...\r\nSelecting previously unselected package build-essential.\r\nPreparing to unpack .../build-essential_12.3_amd64.deb ...\r\nUnpacking build-essential (12.3) ...\r\nSetting up build-essential (12.3) ...\r\nSetting up git (1:2.11.0-3+deb9u7) ...\r\nRemoving intermediate container 3c9dbe35fdad\n ---> 5de9206673cb\nStep 5/9 : RUN apt autoremove -y\n ---> Running in 01bfa814e6aa\n\u001b[91m\nWARNING: apt does not have a stable CLI interface. Use with caution in scripts.\n\n\u001b[0mReading package lists...\nBuilding dependency tree...\nReading state information...\n0 upgraded, 0 newly installed, 0 to remove and 166 not upgraded.\nRemoving intermediate container 01bfa814e6aa\n ---> 051228226577\nStep 6/9 : COPY . .\n ---> ada567c671af\nStep 7/9 : ENV REMOTE_HOST \"localhost:8000\"\n ---> Running in 80bd4c16cb6e\nRemoving intermediate container 80bd4c16cb6e\n ---> b62009ad2e52\nStep 8/9 : RUN make dependencies\n ---> Running in 0340075871f4\nnpm install\n\n> preact@8.3.1 postinstall /tmp/client/node_modules/preact\n> node -e \"console.log('\\u001b[35m\\u001b[1mLove Preact? You can now donate to our open collective:\\u001b[22m\\u001b[39m\\n > \\u001b[34mhttps://opencollective.com/preact/donate\\u001b[0m')\"\n\n\u001b[35m\u001b[1mLove Preact? You can now donate to our open collective:\u001b[22m\u001b[39m\n > \u001b[34mhttps://opencollective.com/preact/donate\u001b[0m\n\n> webpack-cli@3.3.2 postinstall /tmp/client/node_modules/webpack-cli\n> node ./bin/opencollective.js\n\n\n\n                            Thanks for using Webpack!\n                 Please consider donating to our Open Collective\n                        to help us maintain this package.\n\n\n\n                 Donate: https://opencollective.com/webpack/donate\n\n\n\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@1.2.9 (node_modules/fsevents):\nnpm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.2.9: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\n\u001b[0madded 1631 packages from 680 contributors and audited 1701 packages in 17.348s\nfound 658 vulnerabilities (19 low, 152 moderate, 411 high, 76 critical)\n  run `npm audit fix` to fix them, or `npm audit` for details\nRemoving intermediate container 0340075871f4\n ---> 38a6d9a4a298\nStep 9/9 : CMD [\"make\", \"compile\"]\n ---> Running in 28314e9302e8\nRemoving intermediate container 28314e9302e8\n ---> 16ca2e19d3a4\nSuccessfully built 16ca2e19d3a4\nSuccessfully tagged client:latest\n","stderr":"","imageSize":1161945569},"repair":{"violations":[{"name":"ruleAptGetInstallUseNoRec","position":{"start":8,"end":8,"columnStart":6,"columnEnd":40}},{"name":"ruleAptGetInstallThenRemoveAptLists","position":{"start":8,"end":8,"columnStart":6,"columnEnd":40}}],"repairedDockerfile":"FROM node:11\n\nRUN mkdir -p /tmp\nWORKDIR /tmp/client\n\n## Run these together otherwise we have to remember to run it with --no-cache\n#  occasionally\nRUN apt update && \\\n      apt install --no-install-recommends -y git build-essential\n\n\nRUN apt autoremove -y\n\n# RUN git clone https://github.com/minimalchat/client.git /tmp/client\nCOPY . .\n\nENV REMOTE_HOST \"localhost:8000\"\n\n# ENV DIGITAL_OCEAN_SPACES_KEY\n# ENV CLIENT_KEY\n\n\n# TODO: Is this the best way to go about supplying the theme details?\n# ENV CLIENT_THEME_PRIMARY_COLOUR\n\n# Build the scripts\nRUN make dependencies\n\nCMD [\"make\", \"compile\"]\n"},"repairedBuild":{"startTimestamp":1672147960740,"endTimestamp":1672148053576,"error":null,"stdout":"Sending build context to Docker daemon    705kB\r\r\nStep 1/9 : FROM node:11\n ---> 5b97b72da029\nStep 2/9 : RUN mkdir -p /tmp\n ---> Running in aa71d8409522\nRemoving intermediate container aa71d8409522\n ---> ee5e626209be\nStep 3/9 : WORKDIR /tmp/client\n ---> Running in 83898a9c2cbb\nRemoving intermediate container 83898a9c2cbb\n ---> 9f232669c195\nStep 4/9 : RUN apt update &&       apt install --no-install-recommends -y git build-essential\n ---> Running in 80b21014bf44\n\u001b[91m\nWARNING: apt does not have a stable CLI interface. Use with caution in scripts.\n\n\u001b[0mGet:1 http://security.debian.org/debian-security stretch/updates InRelease [59.1 kB]\nIgn:2 http://deb.debian.org/debian stretch InRelease\nGet:3 http://deb.debian.org/debian stretch-updates InRelease [93.6 kB]\nGet:4 http://deb.debian.org/debian stretch Release [118 kB]\nGet:5 http://deb.debian.org/debian stretch Release.gpg [3177 B]\nGet:6 http://security.debian.org/debian-security stretch/updates/main amd64 Packages [782 kB]\nGet:7 http://deb.debian.org/debian stretch/main amd64 Packages [7080 kB]\nFetched 8135 kB in 1s (5395 kB/s)\nReading package lists...\nBuilding dependency tree...\nReading state information...\n167 packages can be upgraded. Run 'apt list --upgradable' to see them.\n\u001b[91m\nWARNING: apt does not have a stable CLI interface. Use with caution in scripts.\n\n\u001b[0mReading package lists...\nBuilding dependency tree...\nReading state information...\nSuggested packages:\n  gettext-base git-daemon-run | git-daemon-sysvinit git-doc git-el git-email\n  git-gui gitk gitweb git-arch git-cvs git-mediawiki git-svn\nRecommended packages:\n  less rsync\nThe following NEW packages will be installed:\n  build-essential\nThe following packages will be upgraded:\n  git\n1 upgraded, 1 newly installed, 0 to remove and 166 not upgraded.\nNeed to get 4177 kB of archives.\nAfter this operation, 43.0 kB of additional disk space will be used.\nGet:1 http://deb.debian.org/debian stretch/main amd64 git amd64 1:2.11.0-3+deb9u7 [4170 kB]\nGet:2 http://deb.debian.org/debian stretch/main amd64 build-essential amd64 12.3 [7346 B]\n\u001b[91mdebconf: delaying package configuration, since apt-utils is not installed\n\u001b[0mFetched 4177 kB in 0s (51.4 MB/s)\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 29980 files and directories currently installed.)\r\nPreparing to unpack .../git_1%3a2.11.0-3+deb9u7_amd64.deb ...\r\nUnpacking git (1:2.11.0-3+deb9u7) over (1:2.11.0-3+deb9u4) ...\r\nSelecting previously unselected package build-essential.\r\nPreparing to unpack .../build-essential_12.3_amd64.deb ...\r\nUnpacking build-essential (12.3) ...\r\nSetting up build-essential (12.3) ...\r\nSetting up git (1:2.11.0-3+deb9u7) ...\r\nRemoving intermediate container 80b21014bf44\n ---> ff7a9374fe79\nStep 5/9 : RUN apt autoremove -y\n ---> Running in 1769c887dec1\n\u001b[91m\nWARNING: apt does not have a stable CLI interface. Use with caution in scripts.\n\n\u001b[0mReading package lists...\nBuilding dependency tree...\nReading state information...\n0 upgraded, 0 newly installed, 0 to remove and 166 not upgraded.\nRemoving intermediate container 1769c887dec1\n ---> d2a6c6407811\nStep 6/9 : COPY . .\n ---> b181526a91b5\nStep 7/9 : ENV REMOTE_HOST \"localhost:8000\"\n ---> Running in 33b94e98699a\nRemoving intermediate container 33b94e98699a\n ---> d824035770a6\nStep 8/9 : RUN make dependencies\n ---> Running in 64b00f52c8f6\nnpm install\n\n> preact@8.3.1 postinstall /tmp/client/node_modules/preact\n> node -e \"console.log('\\u001b[35m\\u001b[1mLove Preact? You can now donate to our open collective:\\u001b[22m\\u001b[39m\\n > \\u001b[34mhttps://opencollective.com/preact/donate\\u001b[0m')\"\n\n\u001b[35m\u001b[1mLove Preact? You can now donate to our open collective:\u001b[22m\u001b[39m\n > \u001b[34mhttps://opencollective.com/preact/donate\u001b[0m\n\n> webpack-cli@3.3.2 postinstall /tmp/client/node_modules/webpack-cli\n> node ./bin/opencollective.js\n\n\n\n                            Thanks for using Webpack!\n                 Please consider donating to our Open Collective\n                        to help us maintain this package.\n\n\n\n                 Donate: https://opencollective.com/webpack/donate\n\n\n\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@1.2.9 (node_modules/fsevents):\nnpm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.2.9: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91m\n\u001b[0madded 1631 packages from 680 contributors and audited 1701 packages in 21.143s\nfound 658 vulnerabilities (19 low, 152 moderate, 411 high, 76 critical)\n  run `npm audit fix` to fix them, or `npm audit` for details\nRemoving intermediate container 64b00f52c8f6\n ---> 4d0355b6f833\nStep 9/9 : CMD [\"make\", \"compile\"]\n ---> Running in 2830ac841ab4\nRemoving intermediate container 2830ac841ab4\n ---> 6e8b72fe5d2c\nSuccessfully built 6e8b72fe5d2c\nSuccessfully tagged client:latest\n","stderr":"","imageSize":1161940832},"endTime":1672148058912}