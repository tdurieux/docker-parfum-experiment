{"repository":"https://github.com/kumina/postfix_exporter","dockerfilePath":"Dockerfile","startTime":1672929172996,"endTime":1672929409159,"clone":{"startTime":1672929172997,"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/kumina/postfix_exporter'...\n","error":null,"endTime":1672929173854,"commit":"a6f58e9b2b2b4decc7e65c5a34b4fd53cd6665f1"},"originalBuild":{"startTime":1672929174002,"endTime":1672929344602,"error":null,"stdout":"Sending build context to Docker daemon  121.3kB\r\r\nStep 1/15 : FROM golang:1.16 AS builder\n ---> 972d8c0bc0fc\nStep 2/15 : WORKDIR /src\n ---> Running in 53a5ceefe82f\nRemoving intermediate container 53a5ceefe82f\n ---> 3839d277a389\nStep 3/15 : RUN apt-get update -qq && apt-get install -qqy   build-essential   libsystemd-dev\n ---> Running in ede6439b8c9b\n\u001b[91mdebconf: delaying package configuration, since apt-utils is not installed\n\u001b[0m(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 15709 files and directories currently installed.)\r\nPreparing to unpack .../libsystemd0_247.3-7+deb11u1_amd64.deb ...\r\nUnpacking libsystemd0:amd64 (247.3-7+deb11u1) over (247.3-6) ...\r\nSetting up libsystemd0:amd64 (247.3-7+deb11u1) ...\r\nSelecting previously unselected package bzip2.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 15709 files and directories currently installed.)\r\nPreparing to unpack .../00-bzip2_1.0.8-4_amd64.deb ...\r\nUnpacking bzip2 (1.0.8-4) ...\r\nSelecting previously unselected package xz-utils.\r\nPreparing to unpack .../01-xz-utils_5.2.5-2.1~deb11u1_amd64.deb ...\r\nUnpacking xz-utils (5.2.5-2.1~deb11u1) ...\r\nPreparing to unpack .../02-libdpkg-perl_1.20.12_all.deb ...\r\nUnpacking libdpkg-perl (1.20.12) over (1.20.9) ...\r\nSelecting previously unselected package patch.\r\nPreparing to unpack .../03-patch_2.7.6-7_amd64.deb ...\r\nUnpacking patch (2.7.6-7) ...\r\nSelecting previously unselected package dpkg-dev.\r\nPreparing to unpack .../04-dpkg-dev_1.20.12_all.deb ...\r\nUnpacking dpkg-dev (1.20.12) ...\r\nSelecting previously unselected package build-essential.\r\nPreparing to unpack .../05-build-essential_12.9_amd64.deb ...\r\nUnpacking build-essential (12.9) ...\r\nSelecting previously unselected package libfakeroot:amd64.\r\nPreparing to unpack .../06-libfakeroot_1.25.3-1.1_amd64.deb ...\r\nUnpacking libfakeroot:amd64 (1.25.3-1.1) ...\r\nSelecting previously unselected package fakeroot.\r\nPreparing to unpack .../07-fakeroot_1.25.3-1.1_amd64.deb ...\r\nUnpacking fakeroot (1.25.3-1.1) ...\r\nSelecting previously unselected package libalgorithm-diff-perl.\r\nPreparing to unpack .../08-libalgorithm-diff-perl_1.201-1_all.deb ...\r\nUnpacking libalgorithm-diff-perl (1.201-1) ...\r\nSelecting previously unselected package libalgorithm-diff-xs-perl.\r\nPreparing to unpack .../09-libalgorithm-diff-xs-perl_0.04-6+b1_amd64.deb ...\r\nUnpacking libalgorithm-diff-xs-perl (0.04-6+b1) ...\r\nSelecting previously unselected package libalgorithm-merge-perl.\r\nPreparing to unpack .../10-libalgorithm-merge-perl_0.08-3_all.deb ...\r\nUnpacking libalgorithm-merge-perl (0.08-3) ...\r\nSelecting previously unselected package libsystemd-dev:amd64.\r\nPreparing to unpack .../11-libsystemd-dev_247.3-7+deb11u1_amd64.deb ...\r\nUnpacking libsystemd-dev:amd64 (247.3-7+deb11u1) ...\r\nSetting up libalgorithm-diff-perl (1.201-1) ...\r\nSetting up bzip2 (1.0.8-4) ...\r\nSetting up libfakeroot:amd64 (1.25.3-1.1) ...\r\nSetting up fakeroot (1.25.3-1.1) ...\r\nupdate-alternatives: using /usr/bin/fakeroot-sysv to provide /usr/bin/fakeroot (fakeroot) in auto mode\r\nSetting up xz-utils (5.2.5-2.1~deb11u1) ...\r\nupdate-alternatives: using /usr/bin/xz to provide /usr/bin/lzma (lzma) in auto mode\r\nSetting up patch (2.7.6-7) ...\r\nSetting up libdpkg-perl (1.20.12) ...\r\nSetting up libalgorithm-diff-xs-perl (0.04-6+b1) ...\r\nSetting up libsystemd-dev:amd64 (247.3-7+deb11u1) ...\r\nSetting up libalgorithm-merge-perl (0.08-3) ...\r\nSetting up dpkg-dev (1.20.12) ...\r\nSetting up build-essential (12.9) ...\r\nProcessing triggers for libc-bin (2.31-13+deb11u2) ...\r\nRemoving intermediate container ede6439b8c9b\n ---> 68367949bd3e\nStep 4/15 : COPY go.mod go.sum ./\n ---> b09765557027\nStep 5/15 : RUN go mod download\n ---> Running in d0187fe16432\nRemoving intermediate container d0187fe16432\n ---> 6301add7f81a\nStep 6/15 : RUN go mod verify\n ---> Running in 388fea1725a3\nall modules verified\nRemoving intermediate container 388fea1725a3\n ---> fc6c1ff91a19\nStep 7/15 : COPY . .\n ---> 1455f0b16b6b\nStep 8/15 : ENV GO111MODULE=on\n ---> Running in e3332a8457a9\nRemoving intermediate container e3332a8457a9\n ---> b2e887885648\nStep 9/15 : RUN go test\n ---> Running in 6702c6c1021d\n2023/01/05 14:34:14 Unsupported Line: Apr 26 10:55:19 tcc1 postfix/smtpd[21126]: warning: SASL authentication failure: cannot connect to saslauthd server: Permission denied\n2023/01/05 14:34:14 Unsupported Line: Apr 26 10:55:19 tcc1 postfix/smtpd[21126]: warning: SASL authentication failure: Password verification failed\n2023/01/05 14:34:14 Unsupported Line: Dec 29 02:54:09 mail postfix/smtp[7648]: 732BB407C3: host mail.domain.com[1.1.1.1] said: 451 DT:SPM 163 mx13,P8CowECpNVM_oEVaenoEAQ--.23796S3 1514512449, please try again 15min later (in reply to end of DATA command)\n2023/01/05 14:34:14 Unsupported Line: Feb 14 19:05:25 123-mail postfix/smtpd[1517]: table hash:/etc/postfix/virtual_mailbox_maps(0,lock|fold_fix) has changed -- restarting\n2023/01/05 14:34:14 Unsupported Line: Mar 16 12:28:02 123-mail postfix/smtpd[16268]: fatal: file /etc/postfix/main.cf: parameter default_privs: unknown user name value: nobody\n2023/01/05 14:34:14 Unsupported Line: Mar 16 23:30:44 123-mail postfix/qmgr[29980]: warning: please avoid flushing the whole queue when you have\n2023/01/05 14:34:14 Unsupported Line: Mar 16 23:30:44 123-mail postfix/qmgr[29980]: warning: lots of deferred mail, that is bad for performance\nPASS\nok  \tgithub.com/kumina/postfix_exporter\t0.021s\nRemoving intermediate container 6702c6c1021d\n ---> 7ce13f018b52\nStep 10/15 : RUN go build -o /bin/postfix_exporter\n ---> Running in 74b33d5b3711\nRemoving intermediate container 74b33d5b3711\n ---> 6db6ea3d4d9d\nStep 11/15 : FROM debian:latest\n ---> 446440c01886\nStep 12/15 : EXPOSE 9154\n ---> Running in 19b5202d8ba3\nRemoving intermediate container 19b5202d8ba3\n ---> b69e7d4851a3\nStep 13/15 : WORKDIR /\n ---> Running in fbadf8e5955f\nRemoving intermediate container fbadf8e5955f\n ---> 60f066ff559d\nStep 14/15 : COPY --from=builder /bin/postfix_exporter /bin/\n ---> 7e979ccf29db\nStep 15/15 : ENTRYPOINT [\"/bin/postfix_exporter\"]\n ---> Running in d695b7665613\nRemoving intermediate container d695b7665613\n ---> aae473418a02\nSuccessfully built aae473418a02\nSuccessfully tagged postfix_exporter:latest\n","stderr":"","imageSize":136457184},"repair":{"startTime":1672929344672,"endTime":1672929344786,"violations":[{"name":"aptGetInstallUseNoRec","position":{"start":4,"end":6,"columnStart":26,"columnEnd":16}},{"name":"ruleAptGetInstallThenRemoveAptLists","position":{"start":4,"end":6,"columnStart":26,"columnEnd":16}}],"repairedDockerfile":"FROM golang:1.16 AS builder\nWORKDIR /src\n\n# avoid downloading the dependencies on succesive builds\nRUN apt-get update -qq && apt-get install --no-install-recommends -qqy \\\n  build-essential \\\n  libsystemd-dev && rm -rf /var/lib/apt/lists/*;\n\nCOPY go.mod go.sum ./\nRUN go mod download\nRUN go mod verify\n\nCOPY . .\n\n# Force the go compiler to use modules\nENV GO111MODULE=on\nRUN go test\nRUN go build -o /bin/postfix_exporter\n\nFROM debian:latest\nEXPOSE 9154\nWORKDIR /\nCOPY --from=builder /bin/postfix_exporter /bin/\nENTRYPOINT [\"/bin/postfix_exporter\"]\n"},"repairedBuild":{"startTime":1672929349901,"endTime":1672929408870,"error":null,"stdout":"Sending build context to Docker daemon  121.9kB\r\r\nStep 1/15 : FROM golang:1.16 AS builder\n ---> 972d8c0bc0fc\nStep 2/15 : WORKDIR /src\n ---> Running in e0fe9aedeb06\nRemoving intermediate container e0fe9aedeb06\n ---> 9a41642199b3\nStep 3/15 : RUN apt-get update -qq && apt-get install --no-install-recommends -qqy   build-essential   libsystemd-dev && rm -rf /var/lib/apt/lists/*;\n ---> Running in d2bcffc4f508\n\u001b[91mdebconf: delaying package configuration, since apt-utils is not installed\n\u001b[0m(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 15709 files and directories currently installed.)\r\nPreparing to unpack .../libsystemd0_247.3-7+deb11u1_amd64.deb ...\r\nUnpacking libsystemd0:amd64 (247.3-7+deb11u1) over (247.3-6) ...\r\nSetting up libsystemd0:amd64 (247.3-7+deb11u1) ...\r\nSelecting previously unselected package bzip2.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 15709 files and directories currently installed.)\r\nPreparing to unpack .../0-bzip2_1.0.8-4_amd64.deb ...\r\nUnpacking bzip2 (1.0.8-4) ...\r\nSelecting previously unselected package xz-utils.\r\nPreparing to unpack .../1-xz-utils_5.2.5-2.1~deb11u1_amd64.deb ...\r\nUnpacking xz-utils (5.2.5-2.1~deb11u1) ...\r\nPreparing to unpack .../2-libdpkg-perl_1.20.12_all.deb ...\r\nUnpacking libdpkg-perl (1.20.12) over (1.20.9) ...\r\nSelecting previously unselected package patch.\r\nPreparing to unpack .../3-patch_2.7.6-7_amd64.deb ...\r\nUnpacking patch (2.7.6-7) ...\r\nSelecting previously unselected package dpkg-dev.\r\nPreparing to unpack .../4-dpkg-dev_1.20.12_all.deb ...\r\nUnpacking dpkg-dev (1.20.12) ...\r\nSelecting previously unselected package build-essential.\r\nPreparing to unpack .../5-build-essential_12.9_amd64.deb ...\r\nUnpacking build-essential (12.9) ...\r\nSelecting previously unselected package libsystemd-dev:amd64.\r\nPreparing to unpack .../6-libsystemd-dev_247.3-7+deb11u1_amd64.deb ...\r\nUnpacking libsystemd-dev:amd64 (247.3-7+deb11u1) ...\r\nSetting up bzip2 (1.0.8-4) ...\r\nSetting up xz-utils (5.2.5-2.1~deb11u1) ...\r\nupdate-alternatives: using /usr/bin/xz to provide /usr/bin/lzma (lzma) in auto mode\r\nSetting up patch (2.7.6-7) ...\r\nSetting up libdpkg-perl (1.20.12) ...\r\nSetting up libsystemd-dev:amd64 (247.3-7+deb11u1) ...\r\nSetting up dpkg-dev (1.20.12) ...\r\nSetting up build-essential (12.9) ...\r\nProcessing triggers for libc-bin (2.31-13+deb11u2) ...\r\nRemoving intermediate container d2bcffc4f508\n ---> fd8cffe70a4a\nStep 4/15 : COPY go.mod go.sum ./\n ---> b5d0d3ff7e00\nStep 5/15 : RUN go mod download\n ---> Running in f85e8edbbcb8\nRemoving intermediate container f85e8edbbcb8\n ---> 37b438613f9f\nStep 6/15 : RUN go mod verify\n ---> Running in 534c205b80f5\nall modules verified\nRemoving intermediate container 534c205b80f5\n ---> 0d2897ea2c1e\nStep 7/15 : COPY . .\n ---> c81566b27194\nStep 8/15 : ENV GO111MODULE=on\n ---> Running in a6c0f73a203f\nRemoving intermediate container a6c0f73a203f\n ---> 0c5d3b9905ee\nStep 9/15 : RUN go test\n ---> Running in f91f1ca81917\n2023/01/05 14:36:35 Unsupported Line: Apr 26 10:55:19 tcc1 postfix/smtpd[21126]: warning: SASL authentication failure: cannot connect to saslauthd server: Permission denied\n2023/01/05 14:36:35 Unsupported Line: Apr 26 10:55:19 tcc1 postfix/smtpd[21126]: warning: SASL authentication failure: Password verification failed\n2023/01/05 14:36:35 Unsupported Line: Dec 29 02:54:09 mail postfix/smtp[7648]: 732BB407C3: host mail.domain.com[1.1.1.1] said: 451 DT:SPM 163 mx13,P8CowECpNVM_oEVaenoEAQ--.23796S3 1514512449, please try again 15min later (in reply to end of DATA command)\n2023/01/05 14:36:35 Unsupported Line: Feb 14 19:05:25 123-mail postfix/smtpd[1517]: table hash:/etc/postfix/virtual_mailbox_maps(0,lock|fold_fix) has changed -- restarting\n2023/01/05 14:36:35 Unsupported Line: Mar 16 12:28:02 123-mail postfix/smtpd[16268]: fatal: file /etc/postfix/main.cf: parameter default_privs: unknown user name value: nobody\n2023/01/05 14:36:35 Unsupported Line: Mar 16 23:30:44 123-mail postfix/qmgr[29980]: warning: please avoid flushing the whole queue when you have\n2023/01/05 14:36:35 Unsupported Line: Mar 16 23:30:44 123-mail postfix/qmgr[29980]: warning: lots of deferred mail, that is bad for performance\nPASS\nok  \tgithub.com/kumina/postfix_exporter\t0.015s\nRemoving intermediate container f91f1ca81917\n ---> bd74d2abb15c\nStep 10/15 : RUN go build -o /bin/postfix_exporter\n ---> Running in 9946073a69f3\nRemoving intermediate container 9946073a69f3\n ---> 80b491a816b5\nStep 11/15 : FROM debian:latest\n ---> 446440c01886\nStep 12/15 : EXPOSE 9154\n ---> Running in 2912d64fc138\nRemoving intermediate container 2912d64fc138\n ---> 83aeb4a6cac7\nStep 13/15 : WORKDIR /\n ---> Running in a2490140495c\nRemoving intermediate container a2490140495c\n ---> 1c2850285714\nStep 14/15 : COPY --from=builder /bin/postfix_exporter /bin/\n ---> 73cce36b9fda\nStep 15/15 : ENTRYPOINT [\"/bin/postfix_exporter\"]\n ---> Running in 83995e0b356b\nRemoving intermediate container 83995e0b356b\n ---> 61c9441f089e\nSuccessfully built 61c9441f089e\nSuccessfully tagged postfix_exporter:latest\n","stderr":"","imageSize":136457184}}