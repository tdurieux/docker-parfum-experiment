{"repository":"https://github.com/mayocream/pastebin-ipfs","dockerfilePath":"Dockerfile","startTime":1672884554068,"endTime":1672884986475,"clone":{"startTime":1672884554068,"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/mayocream/pastebin-ipfs'...\n","error":null,"endTime":1672884554796,"commit":"4fdcd108a177ac55d538c1662493df4618970860"},"originalBuild":{"startTime":1672884554890,"endTime":1672884729387,"error":null,"stdout":"Sending build context to Docker daemon  650.8kB\r\r\nStep 1/14 : FROM golang:1.16 AS go\n ---> 972d8c0bc0fc\nStep 2/14 : WORKDIR /data\n ---> Running in f467e7327cc4\nRemoving intermediate container f467e7327cc4\n ---> 4a1c7623f363\nStep 3/14 : ADD . .\n ---> c7af1899af20\nStep 4/14 : RUN make build\n ---> Running in 7e34226816e7\nCGO_ENABLED=0 go build -ldflags \"-s -w\" -o bin/pstbin cmd/main.go\n\u001b[91mgo: downloading go.uber.org/zap v1.21.0\n\u001b[0m\u001b[91mgo: downloading github.com/ipfs/go-ipfs-api v0.3.0\n\u001b[0m\u001b[91mgo: downloading go.uber.org/atomic v1.9.0\n\u001b[0m\u001b[91mgo: downloading github.com/ipfs/go-ipfs-files v0.1.1\n\u001b[0m\u001b[91mgo: downloading github.com/spf13/cast v1.4.1\n\u001b[0m\u001b[91mgo: downloading github.com/dgraph-io/badger/v3 v3.2103.2\n\u001b[0m\u001b[91mgo: downloading github.com/gofiber/fiber/v2 v2.26.0\n\u001b[0m\u001b[91mgo: downloading go.uber.org/multierr v1.6.0\n\u001b[0m\u001b[91mgo: downloading github.com/crackcomm/go-gitignore v0.0.0-20170627025303-887ab5e44cc3\n\u001b[0m\u001b[91mgo: downloading github.com/whyrusleeping/tar-utils v0.0.0-20180509141711-8c6c8ba81d5c\n\u001b[0m\u001b[91mgo: downloading github.com/multiformats/go-multiaddr v0.3.0\n\u001b[0m\u001b[91mgo: downloading github.com/libp2p/go-libp2p-core v0.6.1\ngo: downloading github.com/multiformats/go-multibase v0.0.3\n\u001b[0m\u001b[91mgo: downloading github.com/mitchellh/go-homedir v1.1.0\n\u001b[0m\u001b[91mgo: downloading github.com/multiformats/go-base36 v0.1.0\n\u001b[0m\u001b[91mgo: downloading github.com/mr-tron/base58 v1.2.0\n\u001b[0m\u001b[91mgo: downloading github.com/multiformats/go-base32 v0.0.3\n\u001b[0m\u001b[91mgo: downloading github.com/multiformats/go-multihash v0.1.0\ngo: downloading github.com/multiformats/go-varint v0.0.6\ngo: downloading github.com/ipfs/go-cid v0.1.0\n\u001b[0m\u001b[91mgo: downloading github.com/valyala/fasthttp v1.32.0\n\u001b[0m\u001b[91mgo: downloading golang.org/x/sys v0.0.0-20210514084401-e8d321eab015\n\u001b[0m\u001b[91mgo: downloading go.opencensus.io v0.22.5\ngo: downloading github.com/libp2p/go-flow-metrics v0.0.3\n\u001b[0m\u001b[91mgo: downloading github.com/gogo/protobuf v1.3.2\n\u001b[0m\u001b[91mgo: downloading github.com/libp2p/go-buffer-pool v0.0.2\n\u001b[0m\u001b[91mgo: downloading github.com/minio/sha256-simd v1.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/btcsuite/btcd v0.20.1-beta\n\u001b[0m\u001b[91mgo: downloading golang.org/x/crypto v0.0.0-20210513164829-c07d793c2f9a\ngo: downloading lukechampine.com/blake3 v1.1.6\n\u001b[0m\u001b[91mgo: downloading github.com/spaolacci/murmur3 v1.1.0\n\u001b[0m\u001b[91mgo: downloading github.com/minio/blake2b-simd v0.0.0-20160723061019-3f5f724cb5b1\n\u001b[0m\u001b[91mgo: downloading github.com/klauspost/cpuid/v2 v2.0.9\n\u001b[0m\u001b[91mgo: downloading github.com/golang/protobuf v1.3.1\ngo: downloading github.com/dgraph-io/ristretto v0.1.0\ngo: downloading github.com/dustin/go-humanize v1.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/pkg/errors v0.9.1\n\u001b[0m\u001b[91mgo: downloading github.com/google/flatbuffers v1.12.1\ngo: downloading github.com/golang/snappy v0.0.3\n\u001b[0m\u001b[91mgo: downloading golang.org/x/net v0.0.0-20211029224645-99673261e6eb\ngo: downloading github.com/cespare/xxhash v1.1.0\n\u001b[0m\u001b[91mgo: downloading github.com/klauspost/compress v1.13.4\n\u001b[0m\u001b[91mgo: downloading github.com/valyala/tcplisten v1.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/andybalholm/brotli v1.0.2\ngo: downloading github.com/valyala/bytebufferpool v1.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/golang/groupcache v0.0.0-20190702054246-869f871628b6\n\u001b[0m\u001b[91mgo: downloading github.com/golang/glog v0.0.0-20160126235308-23def4e6c14b\ngo: downloading github.com/cespare/xxhash/v2 v2.1.1\n\u001b[0mRemoving intermediate container 7e34226816e7\n ---> 8ba535a57aae\nStep 5/14 : FROM node:lts-buster AS node\nlts-buster: Pulling from library/node\nc7c50787e2da: Already exists\naff359114acb: Already exists\n821dc261e045: Already exists\n3790459d63d5: Already exists\nc09b016fff62: Already exists\n5348855a40c0: Already exists\nd205dc8889e3: Pulling fs layer\na1f360148b18: Pulling fs layer\nc9f2ae0ccdcb: Pulling fs layer\nc9f2ae0ccdcb: Verifying Checksum\nc9f2ae0ccdcb: Download complete\na1f360148b18: Verifying Checksum\na1f360148b18: Download complete\nd205dc8889e3: Verifying Checksum\nd205dc8889e3: Download complete\nd205dc8889e3: Pull complete\na1f360148b18: Pull complete\nc9f2ae0ccdcb: Pull complete\nDigest: sha256:1f0a8fd387451630d24724c967c83e1653fc3c97265ed05580e589fbe02058d4\nStatus: Downloaded newer image for node:lts-buster\n ---> 5cb49468341c\nStep 6/14 : WORKDIR /data\n ---> Running in 52c8371d04bc\nRemoving intermediate container 52c8371d04bc\n ---> f7670da52a8b\nStep 7/14 : ADD . .\n ---> 7fb65fe33fa4\nStep 8/14 : RUN npm install\n ---> Running in 727cdce5f518\n\u001b[91mnpm\u001b[0m\u001b[91m WARN old lockfile \nnpm \u001b[0m\u001b[91mWARN old lockfile The package-lock.json file was created with an old version of npm,\nnpm\u001b[0m\u001b[91m WARN \u001b[0m\u001b[91mold lockfile so supplemental metadata must be fetched from the registry.\nnpm WARN \u001b[0m\u001b[91mold lockfile\u001b[0m\u001b[91m \nnpm WARN old lockfile This is a one-time fix-up, please be patient...\nnpm WARN\u001b[0m\u001b[91m old lockfile \n\u001b[0m\u001b[91mnpm WARN deprecated sourcemap-codec@1.4.8: Please use @jridgewell/sourcemap-codec instead\n\u001b[0m\u001b[91mnpm WARN deprecated @vitejs/plugin-react-refresh@1.3.6: This package has been deprecated in favor of @vitejs/plugin-react\n\u001b[0m\u001b[91mnpm WARN deprecated core-js@3.19.1: core-js@<3.23.3 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Some versions have web compatibility issues. Please, upgrade your dependencies to the actual version of core-js.\n\u001b[0m\nadded 351 packages, and audited 352 packages in 15s\n\n40 packages are looking for funding\n  run `npm fund` for details\n\n6 vulnerabilities (3 moderate, 2 high, 1 critical)\n\nTo address issues that do not require attention, run:\n  npm audit fix\n\nTo address all issues (including breaking changes), run:\n  npm audit fix --force\n\nRun `npm audit` for details.\n\u001b[91mnpm notice \nnpm notice New major version of npm available! 8.19.2 -> 9.2.0\nnpm notice Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm notice Run `npm install -g npm@9.2.0` to update!\nnpm notice\u001b[0m\u001b[91m \n\u001b[0mRemoving intermediate container 727cdce5f518\n ---> add222aac65e\nStep 9/14 : RUN npm run build\n ---> Running in a2341f3ed75f\n\n> pastebin-ipfs@0.0.0 build\n> tsc && vite build\n\nvite v2.6.14 building for production...\ntransforming...\n\u001b[91mBrowserslist: caniuse-lite is outdated. Please run:\n  npx browserslist@latest --update-db\n  Why you should do it regularly: https://github.com/browserslist/browserslist#browsers-data-updating\n\u001b[0mâœ“ 11114 modules transformed.\nrendering chunks...\ndist/assets/index-legacy.73db2994.js       8.97 KiB / gzip: 3.86 KiB\ndist/assets/polyfills-legacy.9b470710.js   68.54 KiB / gzip: 28.00 KiB\ndist/assets/vendor-legacy.1c3dd204.js      570.65 KiB / gzip: 173.80 KiB\n\u001b[91m\n(!) Some chunks are larger than 500 KiB after minification. Consider:\n- Using dynamic import() to code-split the application\n- Use build.rollupOptions.output.manualChunks to improve chunking: https://rollupjs.org/guide/en/#outputmanualchunks\n- Adjust chunk size limit for this warning via build.chunkSizeWarningLimit.\n\u001b[0mdist/index.html                  2.26 KiB\ndist/assets/index.aef74a21.js    8.24 KiB / gzip: 3.58 KiB\ndist/assets/index.63130407.css   1.59 KiB / gzip: 0.72 KiB\ndist/assets/vendor.e578686e.js   570.57 KiB / gzip: 172.96 KiB\n\u001b[91m\n(!) Some chunks are larger than 500 KiB after minification. Consider:\n- Using dynamic import() to code-split the application\n- Use build.rollupOptions.output.manualChunks to improve chunking: https://rollupjs.org/guide/en/#outputmanualchunks\n- Adjust chunk size limit for this warning via build.chunkSizeWarningLimit.\n\u001b[0mRemoving intermediate container a2341f3ed75f\n ---> 5181b0166514\nStep 10/14 : FROM alpine\n ---> 49176f190c7e\nStep 11/14 : WORKDIR /data\n ---> Running in 35550a1f7004\nRemoving intermediate container 35550a1f7004\n ---> 095566c6bb53\nStep 12/14 : COPY --from=go /data/bin/pstbin /usr/bin/pstbin\n ---> 509b58670704\nStep 13/14 : COPY --from=node /data/dist /data/dist\n ---> e0978c15e75c\nStep 14/14 : CMD [\"pstbin\"]\n ---> Running in 495bbc38698c\nRemoving intermediate container 495bbc38698c\n ---> b42391bd86df\nSuccessfully built b42391bd86df\nSuccessfully tagged pastebin-ipfs:latest\n","stderr":"","imageSize":24247611},"repair":{"startTime":1672884729598,"endTime":1672884729671,"violations":[{"name":"npmCacheCleanAfterInstall","position":{"start":10,"end":10,"columnStart":4,"columnEnd":15}}],"repairedDockerfile":"FROM golang:1.16 AS go\n\nWORKDIR /data\nADD . .\nRUN make build\n\nFROM node:lts-buster AS node\n\nWORKDIR /data\nADD . .\nRUN npm install && npm cache clean --force;\nRUN npm run build\n\nFROM alpine\n\nWORKDIR /data\nCOPY --from=go /data/bin/pstbin /usr/bin/pstbin\nCOPY --from=node /data/dist /data/dist\n\nCMD [\"pstbin\"]\n"},"repairedBuild":{"startTime":1672884730224,"endTime":1672884985084,"error":null,"stdout":"Sending build context to Docker daemon  650.8kB\r\r\nStep 1/14 : FROM golang:1.16 AS go\n ---> 972d8c0bc0fc\nStep 2/14 : WORKDIR /data\n ---> Running in 41ea25c41048\nRemoving intermediate container 41ea25c41048\n ---> bf91a8d05bbb\nStep 3/14 : ADD . .\n ---> 408a32869644\nStep 4/14 : RUN make build\n ---> Running in 383f3ce7b0c2\nCGO_ENABLED=0 go build -ldflags \"-s -w\" -o bin/pstbin cmd/main.go\n\u001b[91mgo: downloading github.com/ipfs/go-ipfs-files v0.1.1\ngo: downloading github.com/ipfs/go-ipfs-api v0.3.0\n\u001b[0m\u001b[91mgo: downloading github.com/gofiber/fiber/v2 v2.26.0\ngo: downloading go.uber.org/zap v1.21.0\n\u001b[0m\u001b[91mgo: downloading go.uber.org/atomic v1.9.0\ngo: downloading github.com/dgraph-io/badger/v3 v3.2103.2\ngo: downloading github.com/spf13/cast v1.4.1\n\u001b[0m\u001b[91mgo: downloading github.com/whyrusleeping/tar-utils v0.0.0-20180509141711-8c6c8ba81d5c\n\u001b[0m\u001b[91mgo: downloading github.com/libp2p/go-libp2p-core v0.6.1\ngo: downloading github.com/mitchellh/go-homedir v1.1.0\ngo: downloading github.com/multiformats/go-multiaddr v0.3.0\ngo: downloading github.com/multiformats/go-multibase v0.0.3\ngo: downloading github.com/crackcomm/go-gitignore v0.0.0-20170627025303-887ab5e44cc3\n\u001b[0m\u001b[91mgo: downloading github.com/multiformats/go-base32 v0.0.3\ngo: downloading github.com/mr-tron/base58 v1.2.0\ngo: downloading github.com/multiformats/go-base36 v0.1.0\n\u001b[0m\u001b[91mgo: downloading go.uber.org/multierr v1.6.0\n\u001b[0m\u001b[91mgo: downloading github.com/multiformats/go-varint v0.0.6\ngo: downloading github.com/multiformats/go-multihash v0.1.0\n\u001b[0m\u001b[91mgo: downloading github.com/ipfs/go-cid v0.1.0\n\u001b[0m\u001b[91mgo: downloading github.com/minio/sha256-simd v1.0.0\n\u001b[0m\u001b[91mgo: downloading go.opencensus.io v0.22.5\n\u001b[0m\u001b[91mgo: downloading github.com/libp2p/go-flow-metrics v0.0.3\ngo: downloading golang.org/x/crypto v0.0.0-20210513164829-c07d793c2f9a\ngo: downloading github.com/gogo/protobuf v1.3.2\ngo: downloading lukechampine.com/blake3 v1.1.6\ngo: downloading github.com/minio/blake2b-simd v0.0.0-20160723061019-3f5f724cb5b1\ngo: downloading github.com/libp2p/go-buffer-pool v0.0.2\n\u001b[0m\u001b[91mgo: downloading github.com/spaolacci/murmur3 v1.1.0\n\u001b[0m\u001b[91mgo: downloading github.com/btcsuite/btcd v0.20.1-beta\n\u001b[0m\u001b[91mgo: downloading github.com/klauspost/cpuid/v2 v2.0.9\n\u001b[0m\u001b[91mgo: downloading golang.org/x/sys v0.0.0-20210514084401-e8d321eab015\n\u001b[0m\u001b[91mgo: downloading github.com/valyala/fasthttp v1.32.0\n\u001b[0m\u001b[91mgo: downloading github.com/dgraph-io/ristretto v0.1.0\ngo: downloading github.com/golang/groupcache v0.0.0-20190702054246-869f871628b6\n\u001b[0m\u001b[91mgo: downloading github.com/dustin/go-humanize v1.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/golang/protobuf v1.3.1\n\u001b[0m\u001b[91mgo: downloading github.com/pkg/errors v0.9.1\n\u001b[0m\u001b[91mgo: downloading github.com/google/flatbuffers v1.12.1\n\u001b[0m\u001b[91mgo: downloading github.com/golang/snappy v0.0.3\n\u001b[0m\u001b[91mgo: downloading golang.org/x/net v0.0.0-20211029224645-99673261e6eb\ngo: downloading github.com/cespare/xxhash v1.1.0\n\u001b[0m\u001b[91mgo: downloading github.com/klauspost/compress v1.13.4\n\u001b[0m\u001b[91mgo: downloading github.com/valyala/tcplisten v1.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/andybalholm/brotli v1.0.2\ngo: downloading github.com/valyala/bytebufferpool v1.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/golang/glog v0.0.0-20160126235308-23def4e6c14b\n\u001b[0m\u001b[91mgo: downloading github.com/cespare/xxhash/v2 v2.1.1\n\u001b[0mRemoving intermediate container 383f3ce7b0c2\n ---> 4d354e46d363\nStep 5/14 : FROM node:lts-buster AS node\n ---> 5cb49468341c\nStep 6/14 : WORKDIR /data\n ---> Running in 35ead69f7045\nRemoving intermediate container 35ead69f7045\n ---> 8fb85552bcdb\nStep 7/14 : ADD . .\n ---> eb2bb19bbf87\nStep 8/14 : RUN npm install && npm cache clean --force;\n ---> Running in 29cbac80651b\n\u001b[91mnpm\u001b[0m\u001b[91m WARN old lockfile \nnpm \u001b[0m\u001b[91mWARN old lockfile The package-lock.json file was created with an old version of npm,\nnpm\u001b[0m\u001b[91m WARN \u001b[0m\u001b[91mold lockfile so supplemental metadata must be fetched from the registry.\nnpm WARN old lockfile\u001b[0m\u001b[91m \nnpm WARN old lockfile This is a one-time fix-up, please be patient...\nnpm WARN old lockfile \n\u001b[0m\u001b[91mnpm WARN deprecated sourcemap-codec@1.4.8: Please use @jridgewell/sourcemap-codec instead\n\u001b[0m\u001b[91mnpm WARN deprecated @vitejs/plugin-react-refresh@1.3.6: This package has been deprecated in favor of @vitejs/plugin-react\n\u001b[0m\u001b[91mnpm WARN deprecated core-js@3.19.1: core-js@<3.23.3 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Some versions have web compatibility issues. Please, upgrade your dependencies to the actual version of core-js.\n\u001b[0m\nadded 351 packages, and audited 352 packages in 15s\n\n40 packages are looking for funding\n  run `npm fund` for details\n\n6 vulnerabilities (3 moderate, 2 high, 1 critical)\n\nTo address issues that do not require attention, run:\n  npm audit fix\n\nTo address all issues (including breaking changes), run:\n  npm audit fix --force\n\nRun `npm audit` for details.\n\u001b[91mnpm notice \nnpm notice New major version of npm available! 8.19.2 -> 9.2.0\nnpm notice Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm notice\u001b[0m\u001b[91m Run `npm install -g npm@9.2.0` to update!\nnpm notice \n\u001b[0m\u001b[91mnpm\u001b[0m\u001b[91m WARN using --force\u001b[0m\u001b[91m Recommended protections disabled.\n\u001b[0mRemoving intermediate container 29cbac80651b\n ---> 5bc6b33959d6\nStep 9/14 : RUN npm run build\n ---> Running in 20704139c04f\n\n> pastebin-ipfs@0.0.0 build\n> tsc && vite build\n\nvite v2.6.14 building for production...\ntransforming...\n\u001b[91mBrowserslist: caniuse-lite is outdated. Please run:\n  npx browserslist@latest --update-db\n  Why you should do it regularly: https://github.com/browserslist/browserslist#browsers-data-updating\n\u001b[0mâœ“ 11114 modules transformed.\nrendering chunks...\ndist/assets/index-legacy.73db2994.js       8.97 KiB / gzip: 3.86 KiB\ndist/assets/polyfills-legacy.9b470710.js   68.54 KiB / gzip: 28.00 KiB\ndist/assets/vendor-legacy.1c3dd204.js      570.65 KiB / gzip: 173.80 KiB\n\u001b[91m\n(!) Some chunks are larger than 500 KiB after minification. Consider:\n- Using dynamic import() to code-split the application\n- Use build.rollupOptions.output.manualChunks to improve chunking: https://rollupjs.org/guide/en/#outputmanualchunks\n- Adjust chunk size limit for this warning via build.chunkSizeWarningLimit.\n\u001b[0mdist/index.html                  2.26 KiB\ndist/assets/index.63130407.css   1.59 KiB / gzip: 0.72 KiB\ndist/assets/index.aef74a21.js    8.24 KiB / gzip: 3.58 KiB\ndist/assets/vendor.e578686e.js   570.57 KiB / gzip: 172.96 KiB\n\u001b[91m\n(!) Some chunks are larger than 500 KiB after minification. Consider:\n- Using dynamic import() to code-split the application\n- Use build.rollupOptions.output.manualChunks to improve chunking: https://rollupjs.org/guide/en/#outputmanualchunks\n- Adjust chunk size limit for this warning via build.chunkSizeWarningLimit.\n\u001b[0mRemoving intermediate container 20704139c04f\n ---> 6fd391593f3b\nStep 10/14 : FROM alpine\n ---> 49176f190c7e\nStep 11/14 : WORKDIR /data\n ---> Running in 1a23597ebd35\nRemoving intermediate container 1a23597ebd35\n ---> f54b8ec29845\nStep 12/14 : COPY --from=go /data/bin/pstbin /usr/bin/pstbin\n ---> 6d462746d396\nStep 13/14 : COPY --from=node /data/dist /data/dist\n ---> 9e153e1acbbd\nStep 14/14 : CMD [\"pstbin\"]\n ---> Running in b82c89cbc6a6\nRemoving intermediate container b82c89cbc6a6\n ---> d9a893988355\nSuccessfully built d9a893988355\nSuccessfully tagged pastebin-ipfs:latest\n","stderr":"","imageSize":24247611}}