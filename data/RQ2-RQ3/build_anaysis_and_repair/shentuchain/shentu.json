{"repository":"https://github.com/shentuchain/shentu","dockerfilePath":"Dockerfile","startTime":1672121908062,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/shentuchain/shentu'...\n","error":null,"commit":"cec1eea095e65e24c97fd98e6d320b05d791c406"},"originalBuild":{"startTimestamp":1672121909880,"endTimestamp":1672122246878,"error":null,"stdout":"Sending build context to Docker daemon  20.31MB\r\r\nStep 1/15 : ARG IMG_TAG=latest\nStep 2/15 : FROM golang:1.18-alpine AS shentud-builder\n1.18-alpine: Pulling from library/golang\nc158987b0551: Already exists\n019cfb932eb0: Already exists\n4e0e94741593: Pulling fs layer\n1ba1ea060658: Pulling fs layer\n1ba1ea060658: Verifying Checksum\n1ba1ea060658: Download complete\n4e0e94741593: Verifying Checksum\n4e0e94741593: Download complete\n4e0e94741593: Pull complete\n1ba1ea060658: Pull complete\nDigest: sha256:c2bb8281641f39a32e01854ae6b5fea45870f6f4c0c04365eadc0be596675456\nStatus: Downloaded newer image for golang:1.18-alpine\n ---> f37f1bcb329f\nStep 3/15 : WORKDIR /src/app/\n ---> Running in 2193910f5da6\nRemoving intermediate container 2193910f5da6\n ---> bcb3b2d9d93c\nStep 4/15 : COPY go.mod go.sum* ./\n ---> 9d5deeffbc4b\nStep 5/15 : RUN go mod download\n ---> Running in 150b82194954\nRemoving intermediate container 150b82194954\n ---> 3cef9ac1ef1e\nStep 6/15 : COPY . .\n ---> 9d41692bb4fb\nStep 7/15 : ENV PACKAGES curl make git libc-dev bash gcc linux-headers eudev-dev python3\n ---> Running in c45da1d77893\nRemoving intermediate container c45da1d77893\n ---> 62774bf6f689\nStep 8/15 : RUN apk add --no-cache $PACKAGES\n ---> Running in 1cf74d654582\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/40) Installing ncurses-terminfo-base (6.3_p20221119-r0)\n(2/40) Installing ncurses-libs (6.3_p20221119-r0)\n(3/40) Installing readline (8.2.0-r0)\n(4/40) Installing bash (5.2.15-r0)\nExecuting bash-5.2.15-r0.post-install\n(5/40) Installing brotli-libs (1.0.9-r9)\n(6/40) Installing nghttp2-libs (1.51.0-r0)\n(7/40) Installing libcurl (7.87.0-r0)\n(8/40) Installing curl (7.87.0-r0)\n(9/40) Installing udev-init-scripts (35-r1)\n(10/40) Installing eudev-libs (3.2.11-r4)\n(11/40) Installing libblkid (2.38.1-r0)\n(12/40) Installing xz-libs (5.2.9-r0)\n(13/40) Installing zstd-libs (1.5.2-r9)\n(14/40) Installing kmod-libs (30-r1)\n(15/40) Installing eudev (3.2.11-r4)\n(16/40) Installing pkgconf (1.9.3-r0)\n(17/40) Installing eudev-dev (3.2.11-r4)\n(18/40) Installing libgcc (12.2.1_git20220924-r4)\n(19/40) Installing libstdc++ (12.2.1_git20220924-r4)\n(20/40) Installing binutils (2.39-r2)\n(21/40) Installing libgomp (12.2.1_git20220924-r4)\n(22/40) Installing libatomic (12.2.1_git20220924-r4)\n(23/40) Installing gmp (6.2.1-r2)\n(24/40) Installing isl25 (0.25-r0)\n(25/40) Installing mpfr4 (4.1.0-r0)\n(26/40) Installing mpc1 (1.2.1-r1)\n(27/40) Installing gcc (12.2.1_git20220924-r4)\n(28/40) Installing libexpat (2.5.0-r0)\n(29/40) Installing pcre2 (10.42-r0)\n(30/40) Installing git (2.38.2-r0)\n(31/40) Installing musl-dev (1.2.3-r4)\n(32/40) Installing libc-dev (0.7.2-r3)\n(33/40) Installing linux-headers (5.19.5-r0)\n(34/40) Installing make (4.3-r1)\n(35/40) Installing libbz2 (1.0.8-r4)\n(36/40) Installing libffi (3.4.4-r0)\n(37/40) Installing gdbm (1.23-r0)\n(38/40) Installing mpdecimal (2.5.1-r1)\n(39/40) Installing sqlite-libs (3.40.0-r0)\n(40/40) Installing python3 (3.10.9-r1)\nExecuting busybox-1.35.0-r29.trigger\nExecuting eudev-3.2.11-r4.trigger\nOK: 223 MiB in 56 packages\nRemoving intermediate container 1cf74d654582\n ---> 9ee6cbe27766\nStep 9/15 : RUN CGO_ENABLED=0 make install\n ---> Running in 836f01867102\n\u001b[91mfatal: No names found, cannot describe anything.\n\u001b[0mgo install -tags \"netgo ledger\" -ldflags '-X github.com/cosmos/cosmos-sdk/version.Name=shentu -X github.com/cosmos/cosmos-sdk/version.AppName=shentud -X github.com/cosmos/cosmos-sdk/version.Version= -X github.com/cosmos/cosmos-sdk/version.Commit=cec1eea095e65e24c97fd98e6d320b05d791c406 -X \"github.com/cosmos/cosmos-sdk/version.BuildTags=netgo ledger,\"' ./app/shentud\nRemoving intermediate container 836f01867102\n ---> 511b5396d76a\nStep 10/15 : FROM distroless.dev/static:$IMG_TAG\nlatest: Pulling from static\nf15c85df4279: Pulling fs layer\nf15c85df4279: Verifying Checksum\nf15c85df4279: Download complete\nf15c85df4279: Pull complete\nDigest: sha256:4e108d39661f01865b821ed77e6a1792a6e910a5d8953dec08d258ad46fac044\nStatus: Downloaded newer image for distroless.dev/static:latest\n ---> 22424c232094\nStep 11/15 : ARG IMG_TAG\n ---> Running in 8db0df25cd70\nRemoving intermediate container 8db0df25cd70\n ---> 44a0cf6188d1\nStep 12/15 : COPY --from=shentud-builder /go/bin/shentud /usr/local/bin/\n ---> 0312fb4fde6f\nStep 13/15 : EXPOSE 26656 26657 1317 9090\n ---> Running in 14c8062492e6\nRemoving intermediate container 14c8062492e6\n ---> 0284f570f3b4\nStep 14/15 : USER 0\n ---> Running in 1cd6566ef875\nRemoving intermediate container 1cd6566ef875\n ---> 55a096593504\nStep 15/15 : ENTRYPOINT [\"shentud\", \"start\"]\n ---> Running in 8890fce53401\nRemoving intermediate container 8890fce53401\n ---> 5fdddc146c44\nSuccessfully built 5fdddc146c44\nSuccessfully tagged shentu:latest\n","stderr":"","imageSize":79639635},"repair":{"violations":[],"repairedDockerfile":"ARG IMG_TAG=latest\n\n# Compile the shentud binary\nFROM golang:1.18-alpine AS shentud-builder\nWORKDIR /src/app/\nCOPY go.mod go.sum* ./\nRUN go mod download\nCOPY . .\nENV PACKAGES curl make git libc-dev bash gcc linux-headers eudev-dev python3\nRUN apk add --no-cache $PACKAGES\nRUN CGO_ENABLED=0 make install\n\n# Add to a distroless container\nFROM distroless.dev/static:$IMG_TAG\nARG IMG_TAG\nCOPY --from=shentud-builder /go/bin/shentud /usr/local/bin/\nEXPOSE 26656 26657 1317 9090\nUSER 0\n\nENTRYPOINT [\"shentud\", \"start\"]\n"},"endTime":1672122247177}