{"repository":"https://github.com/exa-networks/exabgp","dockerfilePath":"Dockerfile","startTime":1672485499605,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/exa-networks/exabgp'...\n","error":null,"commit":"1acbeb84b4cc925271bc75a1e7baf97c0bc6ca34"},"originalBuild":{"startTimestamp":1672485500824,"endTimestamp":1672485526087,"error":null,"stdout":"Sending build context to Docker daemon  11.55MB\r\r\nStep 1/19 : FROM python:3-slim-buster\n3-slim-buster: Pulling from library/python\nb52ebda398ed: Already exists\n5ea3b77facf9: Already exists\n9a802181d0ac: Pulling fs layer\nb13f20a75ed5: Pulling fs layer\nf08e0cbab331: Pulling fs layer\nb13f20a75ed5: Verifying Checksum\nb13f20a75ed5: Download complete\nf08e0cbab331: Verifying Checksum\nf08e0cbab331: Download complete\n9a802181d0ac: Verifying Checksum\n9a802181d0ac: Download complete\n9a802181d0ac: Pull complete\nb13f20a75ed5: Pull complete\nf08e0cbab331: Pull complete\nDigest: sha256:687a73bfa1576c2dc516b50db7203a95f73545d2dd9b612a08da6abf0dafa64a\nStatus: Downloaded newer image for python:3-slim-buster\n ---> b5fc9ba9c17b\nStep 2/19 : RUN apt update\n ---> Running in aebedbe48840\n\u001b[91m\nWARNING: apt does not have a stable CLI interface. Use with caution in scripts.\n\n\u001b[0mGet:1 http://deb.debian.org/debian buster InRelease [122 kB]\nGet:2 http://deb.debian.org/debian-security buster/updates InRelease [34.8 kB]\nGet:3 http://deb.debian.org/debian buster-updates InRelease [56.6 kB]\nGet:4 http://deb.debian.org/debian buster/main amd64 Packages [7909 kB]\nGet:5 http://deb.debian.org/debian-security buster/updates/main amd64 Packages [417 kB]\nGet:6 http://deb.debian.org/debian buster-updates/main amd64 Packages [8788 B]\nFetched 8548 kB in 1s (5936 kB/s)\nReading package lists...\nBuilding dependency tree...\nReading state information...\nAll packages are up to date.\nRemoving intermediate container aebedbe48840\n ---> ff00bc13fcb7\nStep 3/19 : RUN apt -y dist-upgrade\n ---> Running in 99d1a825a229\n\u001b[91m\nWARNING: apt does not have a stable CLI interface. Use with caution in scripts.\n\n\u001b[0mReading package lists...\nBuilding dependency tree...\nReading state information...\nCalculating upgrade...\n0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.\nRemoving intermediate container 99d1a825a229\n ---> 41a24cb2ae57\nStep 4/19 : RUN apt install -y dumb-init\n ---> Running in c9929ba3267a\n\u001b[91m\nWARNING: apt does not have a stable CLI interface. Use with caution in scripts.\n\n\u001b[0mReading package lists...\nBuilding dependency tree...\nReading state information...\nThe following NEW packages will be installed:\n  dumb-init\n0 upgraded, 1 newly installed, 0 to remove and 0 not upgraded.\nNeed to get 13.6 kB of archives.\nAfter this operation, 33.8 kB of additional disk space will be used.\nGet:1 http://deb.debian.org/debian buster/main amd64 dumb-init amd64 1.2.2-1.1 [13.6 kB]\n\u001b[91mdebconf: delaying package configuration, since apt-utils is not installed\n\u001b[0mFetched 13.6 kB in 0s (0 B/s)\nSelecting previously unselected package dumb-init.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 6840 files and directories currently installed.)\r\nPreparing to unpack .../dumb-init_1.2.2-1.1_amd64.deb ...\r\nUnpacking dumb-init (1.2.2-1.1) ...\r\nSetting up dumb-init (1.2.2-1.1) ...\r\nRemoving intermediate container c9929ba3267a\n ---> 6fad029bc01c\nStep 5/19 : RUN rm -rf /var/lib/apt/lists/* /var/cache/apt/*\n ---> Running in 756c27a8b898\nRemoving intermediate container 756c27a8b898\n ---> a3c4c3fca9cd\nStep 6/19 : ADD . /opt/exabgp\n ---> cc6a04d94710\nStep 7/19 : RUN useradd -r exa\n ---> Running in caf78d57029c\nRemoving intermediate container caf78d57029c\n ---> 05d1ee4ba390\nStep 8/19 : RUN mkdir /etc/exabgp\n ---> Running in 59fa8100e1de\nRemoving intermediate container 59fa8100e1de\n ---> b2a377d299ca\nStep 9/19 : RUN mkfifo /run/exabgp.in\n ---> Running in 6b11aef2ac7d\nRemoving intermediate container 6b11aef2ac7d\n ---> 7b5b37d0836a\nStep 10/19 : RUN mkfifo /run/exabgp.out\n ---> Running in 76e47991712d\nRemoving intermediate container 76e47991712d\n ---> 12296db5d076\nStep 11/19 : RUN chown exa /run/exabgp.in\n ---> Running in 8a7807210780\nRemoving intermediate container 8a7807210780\n ---> fc00f4083e2d\nStep 12/19 : RUN chown exa /run/exabgp.out\n ---> Running in 72a6f240717e\nRemoving intermediate container 72a6f240717e\n ---> b44ebf49ae3d\nStep 13/19 : RUN chmod 600 /run/exabgp.in\n ---> Running in f475f22bee0c\nRemoving intermediate container f475f22bee0c\n ---> 5b9efe55a310\nStep 14/19 : RUN chmod 600 /run/exabgp.out\n ---> Running in b91c860d8113\nRemoving intermediate container b91c860d8113\n ---> 8871c75b2291\nStep 15/19 : RUN echo \"[exabgp.daemon]\" > /opt/exabgp/etc/exabgp/exabgp.env\n ---> Running in 533c2b7c13c8\nRemoving intermediate container 533c2b7c13c8\n ---> c3edfbc34fd0\nStep 16/19 : RUN echo \"user = 'exa'\" >> /opt/exabgp/etc/exabgp/exabgp.env\n ---> Running in d34861a550a7\nRemoving intermediate container d34861a550a7\n ---> 7af9621f4f91\nStep 17/19 : ENV PYTHONPATH=/opt/exabgp/src\n ---> Running in 173c9df19f44\nRemoving intermediate container 173c9df19f44\n ---> 1b926afdb822\nStep 18/19 : ENV PATH=$PATH:/opt/exabgp/sbin/\n ---> Running in 47aaaea96d13\nRemoving intermediate container 47aaaea96d13\n ---> fd6225e97198\nStep 19/19 : ENTRYPOINT [     \"/usr/bin/dumb-init\", \"--\",     \"/opt/exabgp/sbin/exabgp\" ]\n ---> Running in 5a3da58e366c\nRemoving intermediate container 5a3da58e366c\n ---> b85e1d48e73b\nSuccessfully built b85e1d48e73b\nSuccessfully tagged exabgp:latest\n","stderr":"","imageSize":151277717},"repair":{"violations":[{"name":"ruleAptGetInstallUseNoRec","position":{"start":16,"end":16,"columnStart":4,"columnEnd":28}},{"name":"ruleAptGetUpdatePrecedesInstall","position":{"start":16,"end":16,"columnStart":4,"columnEnd":28}},{"name":"ruleAptGetInstallThenRemoveAptLists","position":{"start":16,"end":16,"columnStart":4,"columnEnd":28}}],"repairedDockerfile":"# how to build and run exabgp using docker (using the local copy)\n# this dockerfile install exabgp in the container /opt\n\n# docker build -t exabgp ./\n# docker run -p 179:1790 --mount type=bind,source=`pwd`/etc/exabgp,target=/etc/\n\n# debug the build\n# docker build --progress=plain --no-cache -t exabgp ./\n\nFROM python:3-slim-buster\n\n# update packages\n\nRUN apt -y dist-upgrade\nRUN apt update && \\\n\napt install --no-install-recommends -y dumb-init\nRUN rm -rf /var/lib/apt/lists/* /var/cache/apt/*\n\n# Add ExaBGP\nADD . /opt/exabgp\nRUN useradd -r exa\nRUN mkdir /etc/exabgp\nRUN mkfifo /run/exabgp.in\nRUN mkfifo /run/exabgp.out\nRUN chown exa /run/exabgp.in\nRUN chown exa /run/exabgp.out\nRUN chmod 600 /run/exabgp.in\nRUN chmod 600 /run/exabgp.out\n\nRUN echo \"[exabgp.daemon]\" > /opt/exabgp/etc/exabgp/exabgp.env\nRUN echo \"user = 'exa'\" >> /opt/exabgp/etc/exabgp/exabgp.env\n\nENV PYTHONPATH=/opt/exabgp/src\nENV PATH=$PATH:/opt/exabgp/sbin/\n\n# ENTRYPOINT [ \"/bin/bash\"]\nENTRYPOINT [ \\\n    \"/usr/bin/dumb-init\", \"--\", \\ \n    \"/opt/exabgp/sbin/exabgp\" \\\n]\n"},"repairedBuild":{"startTimestamp":1672485526475,"endTimestamp":1672485545787,"error":null,"stdout":"Sending build context to Docker daemon  11.55MB\r\r\n\u001b[91m[WARNING]: Empty continuation line found in:\n    RUN apt update && apt install --no-install-recommends -y dumb-init\n[WARNING]: Empty continuation lines will become errors in a future release.\n\u001b[0mStep 1/18 : FROM python:3-slim-buster\n ---> b5fc9ba9c17b\nStep 2/18 : RUN apt -y dist-upgrade\n ---> Running in 22a05c8c5c99\n\u001b[91m\nWARNING: apt does not have a stable CLI interface. Use with caution in scripts.\n\n\u001b[0mReading package lists...\nBuilding dependency tree...\nReading state information...\nCalculating upgrade...\n0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.\nRemoving intermediate container 22a05c8c5c99\n ---> 729f5781cb6e\nStep 3/18 : RUN apt update && apt install --no-install-recommends -y dumb-init\n ---> Running in cbc27f00b664\n\u001b[91m\nWARNING: apt does not have a stable CLI interface. Use with caution in scripts.\n\n\u001b[0mGet:1 http://deb.debian.org/debian buster InRelease [122 kB]\nGet:2 http://deb.debian.org/debian-security buster/updates InRelease [34.8 kB]\nGet:3 http://deb.debian.org/debian buster-updates InRelease [56.6 kB]\nGet:4 http://deb.debian.org/debian buster/main amd64 Packages [7909 kB]\nGet:5 http://deb.debian.org/debian-security buster/updates/main amd64 Packages [417 kB]\nGet:6 http://deb.debian.org/debian buster-updates/main amd64 Packages [8788 B]\nFetched 8548 kB in 1s (6444 kB/s)\nReading package lists...\nBuilding dependency tree...\nReading state information...\nAll packages are up to date.\n\u001b[91m\nWARNING: apt does not have a stable CLI interface. Use with caution in scripts.\n\n\u001b[0mReading package lists...\nBuilding dependency tree...\nReading state information...\nThe following NEW packages will be installed:\n  dumb-init\n0 upgraded, 1 newly installed, 0 to remove and 0 not upgraded.\nNeed to get 13.6 kB of archives.\nAfter this operation, 33.8 kB of additional disk space will be used.\nGet:1 http://deb.debian.org/debian buster/main amd64 dumb-init amd64 1.2.2-1.1 [13.6 kB]\n\u001b[91mdebconf: delaying package configuration, since apt-utils is not installed\n\u001b[0mFetched 13.6 kB in 0s (0 B/s)\nSelecting previously unselected package dumb-init.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 6840 files and directories currently installed.)\r\nPreparing to unpack .../dumb-init_1.2.2-1.1_amd64.deb ...\r\nUnpacking dumb-init (1.2.2-1.1) ...\r\nSetting up dumb-init (1.2.2-1.1) ...\r\nRemoving intermediate container cbc27f00b664\n ---> baeb5c526109\nStep 4/18 : RUN rm -rf /var/lib/apt/lists/* /var/cache/apt/*\n ---> Running in 28d313f51a97\nRemoving intermediate container 28d313f51a97\n ---> bbe9ee17ae8f\nStep 5/18 : ADD . /opt/exabgp\n ---> f3469621325b\nStep 6/18 : RUN useradd -r exa\n ---> Running in 5a56b8ba9024\nRemoving intermediate container 5a56b8ba9024\n ---> da519b2db016\nStep 7/18 : RUN mkdir /etc/exabgp\n ---> Running in de2971aaebd5\nRemoving intermediate container de2971aaebd5\n ---> 4671812a76cf\nStep 8/18 : RUN mkfifo /run/exabgp.in\n ---> Running in 841db3c6d6bf\nRemoving intermediate container 841db3c6d6bf\n ---> f3306b5d77c8\nStep 9/18 : RUN mkfifo /run/exabgp.out\n ---> Running in 0dddab238387\nRemoving intermediate container 0dddab238387\n ---> 1ee3009552d7\nStep 10/18 : RUN chown exa /run/exabgp.in\n ---> Running in c7b1508b1012\nRemoving intermediate container c7b1508b1012\n ---> 8f5447753f45\nStep 11/18 : RUN chown exa /run/exabgp.out\n ---> Running in 041739f575a5\nRemoving intermediate container 041739f575a5\n ---> 3a85439d760c\nStep 12/18 : RUN chmod 600 /run/exabgp.in\n ---> Running in 21925247bb7b\nRemoving intermediate container 21925247bb7b\n ---> eb63cbacfa81\nStep 13/18 : RUN chmod 600 /run/exabgp.out\n ---> Running in 56e34eea8990\nRemoving intermediate container 56e34eea8990\n ---> 249035be9d20\nStep 14/18 : RUN echo \"[exabgp.daemon]\" > /opt/exabgp/etc/exabgp/exabgp.env\n ---> Running in f279f68de059\nRemoving intermediate container f279f68de059\n ---> 288304ee69e8\nStep 15/18 : RUN echo \"user = 'exa'\" >> /opt/exabgp/etc/exabgp/exabgp.env\n ---> Running in 67b698668f83\nRemoving intermediate container 67b698668f83\n ---> 2720c857d42d\nStep 16/18 : ENV PYTHONPATH=/opt/exabgp/src\n ---> Running in 59bb29c8ab0d\nRemoving intermediate container 59bb29c8ab0d\n ---> f2179a512b12\nStep 17/18 : ENV PATH=$PATH:/opt/exabgp/sbin/\n ---> Running in 521e337a4960\nRemoving intermediate container 521e337a4960\n ---> 45a259cc5923\nStep 18/18 : ENTRYPOINT [     \"/usr/bin/dumb-init\", \"--\",     \"/opt/exabgp/sbin/exabgp\" ]\n ---> Running in f5457a0ac1d1\nRemoving intermediate container f5457a0ac1d1\n ---> e0c17de2575c\nSuccessfully built e0c17de2575c\nSuccessfully tagged exabgp:latest\n","stderr":"","imageSize":151277736},"endTime":1672485546291}