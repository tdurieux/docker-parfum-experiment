{"repository":"https://github.com/certikfoundation/shentu","dockerfilePath":"Dockerfile","startTime":1672977807811,"endTime":1672978093215,"clone":{"startTime":1672977807811,"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/certikfoundation/shentu'...\n","error":null,"endTime":1672977809556,"commit":"3d024061089d90df2914ea2fa8ed85e6503ba6b7"},"originalBuild":{"startTime":1672977809641,"endTime":1672978092923,"error":null,"stdout":"Sending build context to Docker daemon  20.31MB\r\r\nStep 1/15 : ARG IMG_TAG=latest\nStep 2/15 : FROM golang:1.18-alpine AS shentud-builder\n1.18-alpine: Pulling from library/golang\nc158987b0551: Already exists\n019cfb932eb0: Already exists\n4e0e94741593: Pulling fs layer\n1ba1ea060658: Pulling fs layer\n1ba1ea060658: Verifying Checksum\n4e0e94741593: Verifying Checksum\n4e0e94741593: Download complete\n4e0e94741593: Pull complete\n1ba1ea060658: Pull complete\nDigest: sha256:c2bb8281641f39a32e01854ae6b5fea45870f6f4c0c04365eadc0be596675456\nStatus: Downloaded newer image for golang:1.18-alpine\n ---> f37f1bcb329f\nStep 3/15 : WORKDIR /src/app/\n ---> Running in 4b04578f1872\nRemoving intermediate container 4b04578f1872\n ---> f9c3dfc7caec\nStep 4/15 : COPY go.mod go.sum* ./\n ---> abcab32283b8\nStep 5/15 : RUN go mod download\n ---> Running in ba9d2ed83638\nRemoving intermediate container ba9d2ed83638\n ---> b204eb479059\nStep 6/15 : COPY . .\n ---> acf31ace1917\nStep 7/15 : ENV PACKAGES curl make git libc-dev bash gcc linux-headers eudev-dev python3\n ---> Running in 27f6bb6e395e\nRemoving intermediate container 27f6bb6e395e\n ---> 9efb4e1c3522\nStep 8/15 : RUN apk add --no-cache $PACKAGES\n ---> Running in 7ea4488ad2d6\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/40) Installing ncurses-terminfo-base (6.3_p20221119-r0)\n(2/40) Installing ncurses-libs (6.3_p20221119-r0)\n(3/40) Installing readline (8.2.0-r0)\n(4/40) Installing bash (5.2.15-r0)\nExecuting bash-5.2.15-r0.post-install\n(5/40) Installing brotli-libs (1.0.9-r9)\n(6/40) Installing nghttp2-libs (1.51.0-r0)\n(7/40) Installing libcurl (7.87.0-r0)\n(8/40) Installing curl (7.87.0-r0)\n(9/40) Installing udev-init-scripts (35-r1)\n(10/40) Installing eudev-libs (3.2.11-r4)\n(11/40) Installing libblkid (2.38.1-r1)\n(12/40) Installing xz-libs (5.2.9-r0)\n(13/40) Installing zstd-libs (1.5.2-r9)\n(14/40) Installing kmod-libs (30-r1)\n(15/40) Installing eudev (3.2.11-r4)\n(16/40) Installing pkgconf (1.9.3-r0)\n(17/40) Installing eudev-dev (3.2.11-r4)\n(18/40) Installing libgcc (12.2.1_git20220924-r4)\n(19/40) Installing libstdc++ (12.2.1_git20220924-r4)\n(20/40) Installing binutils (2.39-r2)\n(21/40) Installing libgomp (12.2.1_git20220924-r4)\n(22/40) Installing libatomic (12.2.1_git20220924-r4)\n(23/40) Installing gmp (6.2.1-r2)\n(24/40) Installing isl25 (0.25-r0)\n(25/40) Installing mpfr4 (4.1.0-r0)\n(26/40) Installing mpc1 (1.2.1-r1)\n(27/40) Installing gcc (12.2.1_git20220924-r4)\n(28/40) Installing libexpat (2.5.0-r0)\n(29/40) Installing pcre2 (10.42-r0)\n(30/40) Installing git (2.38.2-r0)\n(31/40) Installing musl-dev (1.2.3-r4)\n(32/40) Installing libc-dev (0.7.2-r3)\n(33/40) Installing linux-headers (5.19.5-r0)\n(34/40) Installing make (4.3-r1)\n(35/40) Installing libbz2 (1.0.8-r4)\n(36/40) Installing libffi (3.4.4-r0)\n(37/40) Installing gdbm (1.23-r0)\n(38/40) Installing mpdecimal (2.5.1-r1)\n(39/40) Installing sqlite-libs (3.40.1-r0)\n(40/40) Installing python3 (3.10.9-r1)\nExecuting busybox-1.35.0-r29.trigger\nExecuting eudev-3.2.11-r4.trigger\nOK: 223 MiB in 56 packages\nRemoving intermediate container 7ea4488ad2d6\n ---> bb5d40788ab2\nStep 9/15 : RUN CGO_ENABLED=0 make install\n ---> Running in 09a86b8eb07e\n\u001b[91mfatal: No names found, cannot describe anything.\n\u001b[0mgo install -tags \"netgo ledger\" -ldflags '-X github.com/cosmos/cosmos-sdk/version.Name=shentu -X github.com/cosmos/cosmos-sdk/version.AppName=shentud -X github.com/cosmos/cosmos-sdk/version.Version= -X github.com/cosmos/cosmos-sdk/version.Commit=3d024061089d90df2914ea2fa8ed85e6503ba6b7 -X \"github.com/cosmos/cosmos-sdk/version.BuildTags=netgo ledger,\"' ./app/shentud\nRemoving intermediate container 09a86b8eb07e\n ---> ea324b9e0f9e\nStep 10/15 : FROM distroless.dev/static:$IMG_TAG\nlatest: Pulling from static\ne19f0d59a47c: Pulling fs layer\ne19f0d59a47c: Verifying Checksum\ne19f0d59a47c: Download complete\ne19f0d59a47c: Pull complete\nDigest: sha256:9bf605d88e25a37fbbfe8a54f16e02b8bb070997d5c5100f854a7c29aa90ae56\nStatus: Downloaded newer image for distroless.dev/static:latest\n ---> 6ca61bd5fcf1\nStep 11/15 : ARG IMG_TAG\n ---> Running in ca7b018651ef\nRemoving intermediate container ca7b018651ef\n ---> 0a368bf0d686\nStep 12/15 : COPY --from=shentud-builder /go/bin/shentud /usr/local/bin/\n ---> 7ea2e3ed2bf5\nStep 13/15 : EXPOSE 26656 26657 1317 9090\n ---> Running in 8ffa0009abdd\nRemoving intermediate container 8ffa0009abdd\n ---> 9089bbd5c925\nStep 14/15 : USER 0\n ---> Running in 762affbdb310\nRemoving intermediate container 762affbdb310\n ---> 8c92c5c68b58\nStep 15/15 : ENTRYPOINT [\"shentud\", \"start\"]\n ---> Running in 1f9de035b07d\nRemoving intermediate container 1f9de035b07d\n ---> 75c17f92a23a\nSuccessfully built 75c17f92a23a\nSuccessfully tagged shentu:latest\n","stderr":"","imageSize":79639635},"repair":{"startTime":1672978092987,"endTime":1672978093033,"violations":[],"repairedDockerfile":"ARG IMG_TAG=latest\n\n# Compile the shentud binary\nFROM golang:1.18-alpine AS shentud-builder\nWORKDIR /src/app/\nCOPY go.mod go.sum* ./\nRUN go mod download\nCOPY . .\nENV PACKAGES curl make git libc-dev bash gcc linux-headers eudev-dev python3\nRUN apk add --no-cache $PACKAGES\nRUN CGO_ENABLED=0 make install\n\n# Add to a distroless container\nFROM distroless.dev/static:$IMG_TAG\nARG IMG_TAG\nCOPY --from=shentud-builder /go/bin/shentud /usr/local/bin/\nEXPOSE 26656 26657 1317 9090\nUSER 0\n\nENTRYPOINT [\"shentud\", \"start\"]\n"}}