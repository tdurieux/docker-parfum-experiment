{"repository":"https://github.com/launchdarkly/ld-relay","dockerfilePath":"Dockerfile","startTime":1672875326931,"endTime":1672875394288,"clone":{"startTime":1672875326931,"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/launchdarkly/ld-relay'...\n","error":null,"endTime":1672875327787,"commit":"15a30c6d57e9f4c27398c5f3db374a3b54289dfd"},"originalBuild":{"startTime":1672875327864,"endTime":1672875393984,"error":null,"stdout":"Sending build context to Docker daemon  2.092MB\r\r\nStep 1/19 : FROM golang:1.19.4-alpine3.16 as builder\n1.19.4-alpine3.16: Pulling from library/golang\nca7dd9ec2225: Already exists\nc41ae7ad2b39: Pulling fs layer\n20236f47f9be: Pulling fs layer\n74a276da2a69: Pulling fs layer\n74a276da2a69: Verifying Checksum\n74a276da2a69: Download complete\nc41ae7ad2b39: Download complete\nc41ae7ad2b39: Pull complete\n20236f47f9be: Verifying Checksum\n20236f47f9be: Download complete\n20236f47f9be: Pull complete\n74a276da2a69: Pull complete\nDigest: sha256:4b4f7127b01b372115ed9054abc6de0a0b3fdea224561b354af7bb6e946acaa9\nStatus: Downloaded newer image for golang:1.19.4-alpine3.16\n ---> d227b49ae926\nStep 2/19 : RUN apk --no-cache add     libc-dev  && rm -rf /var/cache/apk/*\n ---> Running in 0dd8906d5846\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/community/x86_64/APKINDEX.tar.gz\n(1/2) Installing musl-dev (1.2.3-r2)\n(2/2) Installing libc-dev (0.7.2-r3)\nOK: 16 MiB in 17 packages\nRemoving intermediate container 0dd8906d5846\n ---> 3ca8fcec3cc3\nStep 3/19 : ARG SRC_DIR=/go/ld-relay\n ---> Running in c27b05dd8147\nRemoving intermediate container c27b05dd8147\n ---> 60625dc42b2e\nStep 4/19 : RUN mkdir -p $SRC_DIR\n ---> Running in b64a3de75a98\nRemoving intermediate container b64a3de75a98\n ---> 4bf4aaa5ca29\nStep 5/19 : WORKDIR $SRC_DIR\n ---> Running in d204e0910bf8\nRemoving intermediate container d204e0910bf8\n ---> d0311ae3ea02\nStep 6/19 : COPY . .\n ---> 995799b4fe11\nStep 7/19 : ENV CGO_ENABLED=0\n ---> Running in b8384b1a27c2\nRemoving intermediate container b8384b1a27c2\n ---> 61540fa83ef8\nStep 8/19 : ENV GOOS=linux\n ---> Running in a8f0c8e1ffb9\nRemoving intermediate container a8f0c8e1ffb9\n ---> ad85494527b7\nStep 9/19 : ENV GOPATH=/go\n ---> Running in dcfdcb6e2746\nRemoving intermediate container dcfdcb6e2746\n ---> 3924278e0d66\nStep 10/19 : RUN go build -a -o ldr .\n ---> Running in 61002179b5b8\n\u001b[91mgo: downloading github.com/kardianos/minwinsvc v0.0.0-20151122163309-cad6b2b879b0\n\u001b[0m\u001b[91mgo: downloading github.com/launchdarkly/go-sdk-common/v3 v3.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/launchdarkly/go-configtypes v1.1.0\n\u001b[0m\u001b[91mgo: downloading gopkg.in/gcfg.v1 v1.2.3\n\u001b[0m\u001b[91mgo: downloading github.com/launchdarkly/go-server-sdk/v6 v6.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/gorilla/mux v1.8.0\ngo: downloading github.com/gregjones/httpcache v0.0.0-20180305231024-9cad4c3443a7\ngo: downloading github.com/launchdarkly/go-jsonstream/v3 v3.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/launchdarkly/go-sdk-events/v2 v2.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/launchdarkly/go-server-sdk-evaluation/v2 v2.0.1\n\u001b[0m\u001b[91mgo: downloading github.com/cyphar/filepath-securejoin v0.2.3\n\u001b[0m\u001b[91mgo: downloading github.com/fsnotify/fsnotify v1.4.9\n\u001b[0m\u001b[91mgo: downloading github.com/launchdarkly/eventsource v1.7.1\n\u001b[0m\u001b[91mgo: downloading gopkg.in/launchdarkly/go-server-sdk.v5 v5.9.0\n\u001b[0m\u001b[91mgo: downloading github.com/aws/aws-sdk-go-v2/service/dynamodb v1.16.4\n\u001b[0m\u001b[91mgo: downloading github.com/hashicorp/consul/api v1.15.3\n\u001b[0m\u001b[91mgo: downloading github.com/aws/aws-sdk-go-v2 v1.16.14\n\u001b[0m\u001b[91mgo: downloading github.com/gomodule/redigo v1.8.2\n\u001b[0m\u001b[91mgo: downloading github.com/aws/aws-sdk-go-v2/config v1.17.5\n\u001b[0m\u001b[91mgo: downloading github.com/launchdarkly/go-server-sdk-consul/v2 v2.0.2\n\u001b[0m\u001b[91mgo: downloading github.com/launchdarkly/go-server-sdk-dynamodb/v3 v3.0.1\n\u001b[0m\u001b[91mgo: downloading github.com/launchdarkly/go-server-sdk-redis-redigo/v2 v2.0.0\n\u001b[0m\u001b[91mgo: downloading contrib.go.opencensus.io/exporter/prometheus v0.4.0\n\u001b[0m\u001b[91mgo: downloading github.com/DataDog/opencensus-go-exporter-datadog v0.0.0-20210527074920-9baf37265e83\ngo: downloading github.com/launchdarkly/opencensus-go-exporter-stackdriver v0.14.2\n\u001b[0m\u001b[91mgo: downloading github.com/pborman/uuid v1.2.0\n\u001b[0m\u001b[91mgo: downloading go.opencensus.io v0.23.0\n\u001b[0m\u001b[91mgo: downloading github.com/go-redis/redis/v8 v8.8.0\n\u001b[0m\u001b[91mgo: downloading golang.org/x/sync v0.0.0-20220722155255-886fb9371eb4\n\u001b[0m\u001b[91mgo: downloading github.com/google/uuid v1.3.0\n\u001b[0m\u001b[91mgo: downloading github.com/prometheus/client_golang v1.11.1\n\u001b[0m\u001b[91mgo: downloading github.com/prometheus/statsd_exporter v0.21.0\n\u001b[0m\u001b[91mgo: downloading golang.org/x/sys v0.3.0\n\u001b[0m\u001b[91mgo: downloading gopkg.in/warnings.v0 v0.1.2\n\u001b[0m\u001b[91mgo: downloading github.com/hashicorp/go-cleanhttp v0.5.2\n\u001b[0m\u001b[91mgo: downloading github.com/hashicorp/go-hclog v0.16.2\n\u001b[0m\u001b[91mgo: downloading github.com/hashicorp/go-rootcerts v1.0.2\n\u001b[0m\u001b[91mgo: downloading github.com/hashicorp/serf v0.9.7\n\u001b[0m\u001b[91mgo: downloading github.com/mitchellh/mapstructure v1.4.2\n\u001b[0m\u001b[91mgo: downloading github.com/aws/smithy-go v1.13.2\n\u001b[0m\u001b[91mgo: downloading github.com/golang/groupcache v0.0.0-20210331224755-41bb18bfe9da\n\u001b[0m\u001b[91mgo: downloading github.com/go-kit/log v0.2.0\n\u001b[0m\u001b[91mgo: downloading gopkg.in/yaml.v2 v2.4.0\n\u001b[0m\u001b[91mgo: downloading github.com/aws/aws-sdk-go-v2/credentials v1.12.18\n\u001b[0m\u001b[91mgo: downloading github.com/aws/aws-sdk-go-v2/feature/ec2/imds v1.12.15\n\u001b[0m\u001b[91mgo: downloading github.com/aws/aws-sdk-go-v2/internal/ini v1.3.22\n\u001b[0m\u001b[91mgo: downloading github.com/aws/aws-sdk-go-v2/service/sso v1.11.21\n\u001b[0m\u001b[91mgo: downloading github.com/aws/aws-sdk-go-v2/service/ssooidc v1.13.3\n\u001b[0m\u001b[91mgo: downloading github.com/aws/aws-sdk-go-v2/service/sts v1.16.17\n\u001b[0m\u001b[91mgo: downloading github.com/cespare/xxhash/v2 v2.1.2\n\u001b[0m\u001b[91mgo: downloading github.com/dgryski/go-rendezvous v0.0.0-20200823014737-9f7001d12a5f\n\u001b[0m\u001b[91mgo: downloading go.opentelemetry.io/otel v0.19.0\n\u001b[0m\u001b[91mgo: downloading golang.org/x/exp v0.0.0-20220823124025-807a23277127\n\u001b[0m\u001b[91mgo: downloading github.com/beorn7/perks v1.0.1\n\u001b[0m\u001b[91mgo: downloading github.com/golang/protobuf v1.5.2\n\u001b[0m\u001b[91mgo: downloading github.com/prometheus/client_model v0.2.0\n\u001b[0m\u001b[91mgo: downloading github.com/prometheus/common v0.30.0\n\u001b[0m\u001b[91mgo: downloading github.com/prometheus/procfs v0.7.3\n\u001b[0m\u001b[91mgo: downloading github.com/DataDog/datadog-go v3.7.2+incompatible\ngo: downloading github.com/tinylib/msgp v1.1.2\n\u001b[0m\u001b[91mgo: downloading gopkg.in/DataDog/dd-trace-go.v1 v1.22.0\n\u001b[0m\u001b[91mgo: downloading gopkg.in/launchdarkly/go-sdk-common.v2 v2.4.0\n\u001b[0m\u001b[91mgo: downloading gopkg.in/launchdarkly/go-sdk-events.v1 v1.1.1\n\u001b[0m\u001b[91mgo: downloading github.com/armon/go-metrics v0.3.10\n\u001b[0m\u001b[91mgo: downloading go.opentelemetry.io/otel/metric v0.19.0\n\u001b[0m\u001b[91mgo: downloading go.opentelemetry.io/otel/trace v0.19.0\n\u001b[0m\u001b[91mgo: downloading github.com/launchdarkly/go-semver v1.0.2\n\u001b[0m\u001b[91mgo: downloading cloud.google.com/go v0.81.0\n\u001b[0m\u001b[91mgo: downloading github.com/census-instrumentation/opencensus-proto v0.3.0\n\u001b[0m\u001b[91mgo: downloading golang.org/x/oauth2 v0.0.0-20210514164344-f6687ab2804c\n\u001b[0m\u001b[91mgo: downloading google.golang.org/api v0.43.0\n\u001b[0m\u001b[91mgo: downloading google.golang.org/genproto v0.0.0-20210402141018-6c239bbf2bb1\n\u001b[0m\u001b[91mgo: downloading google.golang.org/protobuf v1.26.0\n\u001b[0m\u001b[91mgo: downloading github.com/aws/aws-sdk-go-v2/internal/configsources v1.1.21\n\u001b[0m\u001b[91mgo: downloading github.com/aws/aws-sdk-go-v2/service/internal/accept-encoding v1.9.8\ngo: downloading github.com/aws/aws-sdk-go-v2/service/internal/endpoint-discovery v1.7.15\n\u001b[0m\u001b[91mgo: downloading github.com/jmespath/go-jmespath v0.4.0\n\u001b[0m\u001b[91mgo: downloading github.com/fatih/color v1.12.0\n\u001b[0m\u001b[91mgo: downloading github.com/mattn/go-isatty v0.0.14\n\u001b[0m\u001b[91mgo: downloading github.com/launchdarkly/ccache v1.1.0\n\u001b[0m\u001b[91mgo: downloading github.com/launchdarkly/go-ntlm-proxy-auth v1.0.1\n\u001b[0m\u001b[91mgo: downloading github.com/matttproud/golang_protobuf_extensions v1.0.2-0.20181231171920-c182affec369\n\u001b[0m\u001b[91mgo: downloading gopkg.in/launchdarkly/go-jsonstream.v1 v1.0.1\n\u001b[0m\u001b[91mgo: downloading gopkg.in/launchdarkly/go-server-sdk-evaluation.v1 v1.5.0\n\u001b[0m\u001b[91mgo: downloading github.com/patrickmn/go-cache v2.1.0+incompatible\n\u001b[0m\u001b[91mgo: downloading github.com/hashicorp/go-immutable-radix v1.3.1\n\u001b[0m\u001b[91mgo: downloading github.com/go-logfmt/logfmt v0.5.1\n\u001b[0m\u001b[91mgo: downloading github.com/aws/aws-sdk-go-v2/internal/endpoints/v2 v2.4.15\n\u001b[0m\u001b[91mgo: downloading github.com/aws/aws-sdk-go-v2/service/internal/presigned-url v1.9.15\n\u001b[0m\u001b[91mgo: downloading github.com/hashicorp/golang-lru v0.5.4\n\u001b[0m\u001b[91mgo: downloading github.com/philhofer/fwd v1.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/mattn/go-colorable v0.1.8\n\u001b[0m\u001b[91mgo: downloading golang.org/x/net v0.4.0\n\u001b[0m\u001b[91mgo: downloading github.com/launchdarkly/go-ntlmssp v1.0.1\n\u001b[0m\u001b[91mgo: downloading golang.org/x/crypto v0.0.0-20220411220226-7b82a4e95df4\n\u001b[0m\u001b[91mgo: downloading github.com/googleapis/gax-go/v2 v2.0.5\ngo: downloading google.golang.org/grpc v1.36.1\n\u001b[0m\u001b[91mgo: downloading golang.org/x/text v0.5.0\n\u001b[0m\u001b[91mgo: downloading github.com/google/go-cmp v0.5.8\n\u001b[0mRemoving intermediate container 61002179b5b8\n ---> 2a77c2298eec\nStep 11/19 : FROM alpine:3.16.3\n3.16.3: Pulling from library/alpine\nDigest: sha256:b95359c2505145f16c6aa384f9cc74eeff78eb36d308ca4fd902eeeb0a0b161b\nStatus: Downloaded newer image for alpine:3.16.3\n ---> bfe296a52501\nStep 12/19 : RUN addgroup -g 1000 -S ldr-user &&     adduser -u 1000 -S ldr-user -G ldr-user &&     mkdir /ldr &&     chown 1000:1000 /ldr\n ---> Running in 80cdf6566c35\nRemoving intermediate container 80cdf6566c35\n ---> 0405a1a0279a\nStep 13/19 : RUN apk add --no-cache     ca-certificates  && apk add --upgrade libcrypto1.1 libssl1.1  && update-ca-certificates  && rm -rf /var/cache/apk/*\n ---> Running in ca14b942ec51\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/community/x86_64/APKINDEX.tar.gz\n(1/1) Installing ca-certificates (20220614-r0)\nExecuting busybox-1.35.0-r17.trigger\nExecuting ca-certificates-20220614-r0.trigger\nOK: 6 MiB in 15 packages\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/community/x86_64/APKINDEX.tar.gz\n(1/1) Upgrading musl (1.2.3-r1 -> 1.2.3-r2)\nOK: 6 MiB in 15 packages\n\u001b[91mWARNING: ca-certificates.crt does not contain exactly one certificate or CRL: skipping\n\u001b[0mRemoving intermediate container ca14b942ec51\n ---> c1defb551dee\nStep 14/19 : ARG SRC_DIR=/go/ld-relay\n ---> Running in 3dd0dbdc3a01\nRemoving intermediate container 3dd0dbdc3a01\n ---> e4c0e8c56990\nStep 15/19 : COPY --from=builder ${SRC_DIR}/ldr /usr/bin/ldr\n ---> f6317da30f3c\nStep 16/19 : USER 1000\n ---> Running in aa22c90f135e\nRemoving intermediate container aa22c90f135e\n ---> 140f65839d8b\nStep 17/19 : EXPOSE 8030\n ---> Running in f0fc2ff8aecc\nRemoving intermediate container f0fc2ff8aecc\n ---> 2e0a30cbeaa1\nStep 18/19 : ENV PORT=8030\n ---> Running in 1df5a6e6dc5b\nRemoving intermediate container 1df5a6e6dc5b\n ---> 814278428d5d\nStep 19/19 : ENTRYPOINT [\"/usr/bin/ldr\", \"--config\", \"/ldr/ld-relay.conf\", \"--allow-missing-file\", \"--from-env\"]\n ---> Running in fff65c5c7f92\nRemoving intermediate container fff65c5c7f92\n ---> 269650f6ad19\nSuccessfully built 269650f6ad19\nSuccessfully tagged ld-relay:latest\n","stderr":"","imageSize":41371650},"repair":{"startTime":1672875394050,"endTime":1672875394129,"violations":[],"repairedDockerfile":"# This is a standalone Dockerfile that does not depend on goreleaser building the binary\n# It is NOT the version that is pushed to dockerhub\nFROM golang:1.19.4-alpine3.16 as builder\n# See \"Runtime platform versions\" in CONTRIBUTING.md\n\nRUN apk --no-cache add \\\n    libc-dev \\\n && rm -rf /var/cache/apk/*\n\nARG SRC_DIR=/go/ld-relay\n\nRUN mkdir -p $SRC_DIR\n\nWORKDIR $SRC_DIR\n\nCOPY . .\n\nENV CGO_ENABLED=0\nENV GOOS=linux\nENV GOPATH=/go\n\nRUN go build -a -o ldr .\n\nFROM alpine:3.16.3\n\nRUN addgroup -g 1000 -S ldr-user && \\\n    adduser -u 1000 -S ldr-user -G ldr-user && \\\n    mkdir /ldr && \\\n    chown 1000:1000 /ldr\n\nRUN apk add --no-cache \\\n    ca-certificates \\\n && apk add --upgrade libcrypto1.1 libssl1.1 \\\n && update-ca-certificates \\\n && rm -rf /var/cache/apk/*\n\nARG SRC_DIR=/go/ld-relay\n\nCOPY --from=builder ${SRC_DIR}/ldr /usr/bin/ldr\n\nUSER 1000\n\nEXPOSE 8030\nENV PORT=8030\nENTRYPOINT [\"/usr/bin/ldr\", \"--config\", \"/ldr/ld-relay.conf\", \"--allow-missing-file\", \"--from-env\"]\n"}}