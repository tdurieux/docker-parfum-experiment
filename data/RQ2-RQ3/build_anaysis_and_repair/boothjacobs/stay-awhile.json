{"repository":"https://github.com/boothjacobs/stay-awhile","dockerfilePath":"Dockerfile","startTime":1672633677655,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/boothjacobs/stay-awhile'...\n","error":null,"commit":"0b25b10c27d2ecbdf8108eb736865047e140b81d"},"originalBuild":{"startTimestamp":1672633684275,"endTimestamp":1672633815818,"error":null,"stdout":"Sending build context to Docker daemon  51.79MB\r\r\nStep 1/17 : FROM node:12 AS build-stage\n12: Pulling from library/node\nDigest: sha256:01627afeb110b3054ba4a1405541ca095c8bfca1cb6f2be9479c767a2711879e\nStatus: Downloaded newer image for node:12\n ---> 6c8de432fc7f\nStep 2/17 : WORKDIR /react-template\n ---> Running in e9ee66f52a8c\nRemoving intermediate container e9ee66f52a8c\n ---> ca014c225bfd\nStep 3/17 : COPY react-template/. .\n ---> f5b48c20bbe7\nStep 4/17 : ENV REACT_APP_BASE_URL=https://stay-awhile.herokuapp.com/\n ---> Running in 366fbd80757c\nRemoving intermediate container 366fbd80757c\n ---> b44c67568779\nStep 5/17 : RUN npm install\n ---> Running in 5eb1e75ff452\n\n> core-js@2.6.12 postinstall /react-template/node_modules/babel-runtime/node_modules/core-js\n> node -e \"try{require('./postinstall')}catch(e){}\"\n\n\u001b[96mThank you for using core-js (\u001b[94m https://github.com/zloirock/core-js \u001b[96m) for polyfilling JavaScript standard library!\u001b[0m\n\n\u001b[96mThe project needs your help! Please consider supporting of core-js on Open Collective or Patreon: \u001b[0m\n\u001b[96m>\u001b[94m https://opencollective.com/core-js \u001b[0m\n\u001b[96m>\u001b[94m https://www.patreon.com/zloirock \u001b[0m\n\n\u001b[96mAlso, the author of core-js (\u001b[94m https://github.com/zloirock \u001b[96m) is looking for a good job -)\u001b[0m\n\n\n> core-js@3.15.1 postinstall /react-template/node_modules/core-js\n> node -e \"try{require('./postinstall')}catch(e){}\"\n\n\u001b[96mThank you for using core-js (\u001b[94m https://github.com/zloirock/core-js \u001b[96m) for polyfilling JavaScript standard library!\u001b[0m\n\n\u001b[96mThe project needs your help! Please consider supporting of core-js on Open Collective or Patreon: \u001b[0m\n\u001b[96m>\u001b[94m https://opencollective.com/core-js \u001b[0m\n\u001b[96m>\u001b[94m https://www.patreon.com/zloirock \u001b[0m\n\n\u001b[96mAlso, the author of core-js (\u001b[94m https://github.com/zloirock \u001b[96m) is looking for a good job -)\u001b[0m\n\n\n> core-js-pure@3.15.1 postinstall /react-template/node_modules/core-js-pure\n> node -e \"try{require('./postinstall')}catch(e){}\"\n\n\u001b[96mThank you for using core-js (\u001b[94m https://github.com/zloirock/core-js \u001b[96m) for polyfilling JavaScript standard library!\u001b[0m\n\n\u001b[96mThe project needs your help! Please consider supporting of core-js on Open Collective or Patreon: \u001b[0m\n\u001b[96m>\u001b[94m https://opencollective.com/core-js \u001b[0m\n\u001b[96m>\u001b[94m https://www.patreon.com/zloirock \u001b[0m\n\n\u001b[96mAlso, the author of core-js (\u001b[94m https://github.com/zloirock \u001b[96m) is looking for a good job -)\u001b[0m\n\n\n> ejs@2.7.4 postinstall /react-template/node_modules/ejs\n> node ./postinstall.js\n\nThank you for installing \u001b[35mEJS\u001b[0m: built with the \u001b[32mJake\u001b[0m JavaScript build tool (\u001b[32mhttps://jakejs.com/\u001b[0m)\n\n\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@1.2.13 (node_modules/webpack-dev-server/node_modules/fsevents):\n\u001b[0m\u001b[91mnpm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.2.13: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91mnpm\u001b[0m\u001b[91m WARN \u001b[0m\u001b[91moptional SKIPPING OPTIONAL DEPENDENCY: fsevents@1.2.13 (node_modules/watchpack-chokidar2/node_modules/fsevents):\nnpm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.2.13: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@2.3.2 (node_modules/fsevents):\nnpm WARN \u001b[0m\u001b[91mnotsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91m\n\u001b[0madded 1947 packages from 816 contributors and audited 1954 packages in 25.616s\n\n145 packages are looking for funding\n  run `npm fund` for details\n\nfound 145 vulnerabilities (16 low, 13 moderate, 91 high, 25 critical)\n  run `npm audit fix` to fix them, or `npm audit` for details\nRemoving intermediate container 5eb1e75ff452\n ---> 0ab4bcdcc870\nStep 6/17 : RUN npm run build\n ---> Running in 5807cec12dc0\n\n> react-template@0.1.0 build /react-template\n> react-scripts build\n\nCreating an optimized production build...\n\u001b[91mBrowserslist: caniuse-lite is outdated. Please run:\nnpx browserslist@latest --update-db\n\nWhy you should do it regularly:\nhttps://github.com/browserslist/browserslist#browsers-data-updating\n\u001b[0mCompiled with warnings.\n\nsrc/components/GuestSide/Bookings/BookingsPage.js\n  Line 26:42:  Array.prototype.map() expects a value to be returned at the end of arrow function  array-callback-return\n\nsrc/components/GuestSide/GuestHome.js\n  Line 69:46:  Array.prototype.map() expects a value to be returned at the end of arrow function  array-callback-return\n\nsrc/components/GuestSide/Invoices/MyInvoicesPage.js\n  Line 21:11:  'showDetails' is assigned a value but never used                                   no-unused-vars\n  Line 34:41:  Array.prototype.map() expects a value to be returned at the end of arrow function  array-callback-return\n  Line 50:41:  Array.prototype.map() expects a value to be returned at the end of arrow function  array-callback-return\n\nsrc/components/GuestSide/Invoices/PayInvoiceModal.js\n  Line 4:10:  'getUserInvoices' is defined but never used  no-unused-vars\n\nsrc/components/GuestSide/RanchProfile.js\n  Line 5:21:  'Redirect' is defined but never used             no-unused-vars\n  Line 39:9:  'myBookings' is assigned a value but never used  no-unused-vars\n\nsrc/components/GuestSide/SearchResults.js\n  Line 1:28:   'useState' is defined but never used          no-unused-vars\n  Line 4:10:   'searchRanches' is defined but never used     no-unused-vars\n  Line 12:11:  'history' is assigned a value but never used  no-unused-vars\n\nsrc/components/RanchSide/AllBookings.js\n  Line 16:11:  'ranch' is assigned a value but never used  no-unused-vars\n\nsrc/components/RanchSide/Cabins/DeleteCabinMod.js\n  Line 9:11:  'history' is assigned a value but never used  no-unused-vars\n\nsrc/components/RanchSide/RanchHome.js\n  Line 20:8:  React Hook useEffect has a missing dependency: 'user?.ranch_id'. Either include it or remove the dependency array  react-hooks/exhaustive-deps\n\nsrc/components/navigation/Footer.js\n  Line 2:10:  'Link' is defined but never used  no-unused-vars\n\nsrc/components/user-auth/LoginForm.js\n  Line 9:9:  'loaded' is assigned a value but never used  no-unused-vars\n\nsrc/components/user-auth/SignUpForm.js\n  Line 10:9:   'loaded' is assigned a value but never used  no-unused-vars\n  Line 96:15:  No duplicate props allowed                   react/jsx-no-duplicate-props\n\nSearch for the keywords to learn more about each warning.\nTo ignore, add // eslint-disable-next-line to the line before.\n\nFile sizes after gzip:\n\n  54.29 KB  build/static/js/2.23488d0b.chunk.js\n  12.79 KB  build/static/js/main.27002cb9.chunk.js\n  2.35 KB   build/static/css/main.c7b07682.chunk.css\n  780 B     build/static/js/runtime-main.5be16d21.js\n\nThe project was built assuming it is hosted at /.\nYou can control this with the homepage field in your package.json.\n\nThe build folder is ready to be deployed.\nYou may serve it with a static server:\n\n  npm install -g serve\n  serve -s build\n\nFind out more about deployment here:\n\n  https://cra.link/deployment\n\nRemoving intermediate container 5807cec12dc0\n ---> 7da514845f0f\nStep 7/17 : FROM python:3.9\n3.9: Pulling from library/python\n32de3c850997: Already exists\nfa1d4c8d85a4: Already exists\nc796299bbbdd: Already exists\n81283a9569ad: Already exists\n60b38700e7fb: Already exists\n0f67f32c26d3: Already exists\n4571fc720a51: Pulling fs layer\nf938eb1c6191: Pulling fs layer\n61498f7c3a63: Pulling fs layer\nf938eb1c6191: Verifying Checksum\nf938eb1c6191: Download complete\n61498f7c3a63: Verifying Checksum\n61498f7c3a63: Download complete\n4571fc720a51: Verifying Checksum\n4571fc720a51: Download complete\n4571fc720a51: Pull complete\nf938eb1c6191: Pull complete\n61498f7c3a63: Pull complete\nDigest: sha256:b8ddeb68904299c09a39aff59d4a713862253b137fdd7ace3a3b7ba0391971b1\nStatus: Downloaded newer image for python:3.9\n ---> 68cf04410baf\nStep 8/17 : ENV FLASK_APP=app\n ---> Running in 7e2ec8d7eb03\nRemoving intermediate container 7e2ec8d7eb03\n ---> 14b774fa2828\nStep 9/17 : ENV FLASK_ENV=production\n ---> Running in aba020bd48f9\nRemoving intermediate container aba020bd48f9\n ---> feba34e5acb6\nStep 10/17 : ENV SQLALCHEMY_ECHO=True\n ---> Running in c3ed59259351\nRemoving intermediate container c3ed59259351\n ---> 2ac25697dec2\nStep 11/17 : EXPOSE 8000\n ---> Running in 7039c2081eaf\nRemoving intermediate container 7039c2081eaf\n ---> d783a6356a8d\nStep 12/17 : WORKDIR /var/www\n ---> Running in 7973f3b23444\nRemoving intermediate container 7973f3b23444\n ---> 60b2852fc19b\nStep 13/17 : COPY . .\n ---> 8bf562990236\nStep 14/17 : COPY --from=build-stage /react-template/build/* app/static/\n ---> 4f7209f65120\nStep 15/17 : RUN pip install -r requirements.txt\n ---> Running in 95aface00648\nCollecting alembic==1.4.3\n  Downloading alembic-1.4.3-py2.py3-none-any.whl (159 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 159.9/159.9 KB 14.5 MB/s eta 0:00:00\nCollecting boto3==1.17.105\n  Downloading boto3-1.17.105-py2.py3-none-any.whl (131 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 131.6/131.6 KB 10.6 MB/s eta 0:00:00\nCollecting botocore==1.20.105\n  Downloading botocore-1.20.105-py2.py3-none-any.whl (7.7 MB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 7.7/7.7 MB 4.3 MB/s eta 0:00:00\nCollecting click==7.1.2\n  Downloading click-7.1.2-py2.py3-none-any.whl (82 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 82.8/82.8 KB 7.1 MB/s eta 0:00:00\nCollecting dnspython==2.1.0\n  Downloading dnspython-2.1.0-py3-none-any.whl (241 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 242.0/242.0 KB 18.3 MB/s eta 0:00:00\nCollecting email-validator==1.1.3\n  Downloading email_validator-1.1.3-py2.py3-none-any.whl (18 kB)\nCollecting flask-cors==3.0.8\n  Downloading Flask_Cors-3.0.8-py2.py3-none-any.whl (14 kB)\nCollecting flask-jwt-extended==3.24.1\n  Downloading Flask-JWT-Extended-3.24.1.tar.gz (31 kB)\n  Preparing metadata (setup.py): started\n  Preparing metadata (setup.py): finished with status 'done'\nCollecting flask-login==0.5.0\n  Downloading Flask_Login-0.5.0-py2.py3-none-any.whl (16 kB)\nCollecting flask-migrate==2.5.3\n  Downloading Flask_Migrate-2.5.3-py2.py3-none-any.whl (13 kB)\nCollecting flask-sqlalchemy==2.4.4\n  Downloading Flask_SQLAlchemy-2.4.4-py2.py3-none-any.whl (17 kB)\nCollecting flask-wtf==0.14.3\n  Downloading Flask_WTF-0.14.3-py2.py3-none-any.whl (13 kB)\nCollecting flask==1.1.2\n  Downloading Flask-1.1.2-py2.py3-none-any.whl (94 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 94.6/94.6 KB 8.9 MB/s eta 0:00:00\nCollecting gunicorn==20.0.4\n  Downloading gunicorn-20.0.4-py2.py3-none-any.whl (77 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 77.9/77.9 KB 8.3 MB/s eta 0:00:00\nCollecting idna==3.2\n  Downloading idna-3.2-py3-none-any.whl (59 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 59.6/59.6 KB 6.6 MB/s eta 0:00:00\nCollecting itsdangerous==1.1.0\n  Downloading itsdangerous-1.1.0-py2.py3-none-any.whl (16 kB)\nCollecting jinja2==2.11.2\n  Downloading Jinja2-2.11.2-py2.py3-none-any.whl (125 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 125.8/125.8 KB 9.3 MB/s eta 0:00:00\nCollecting jmespath==0.10.0\n  Downloading jmespath-0.10.0-py2.py3-none-any.whl (24 kB)\nCollecting mako==1.1.3\n  Downloading Mako-1.1.3-py2.py3-none-any.whl (75 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 75.5/75.5 KB 8.6 MB/s eta 0:00:00\nCollecting markupsafe==1.1.1\n  Downloading MarkupSafe-1.1.1-cp39-cp39-manylinux2010_x86_64.whl (32 kB)\nCollecting pyjwt==1.7.1\n  Downloading PyJWT-1.7.1-py2.py3-none-any.whl (18 kB)\nCollecting python-dateutil==2.8.1\n  Downloading python_dateutil-2.8.1-py2.py3-none-any.whl (227 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 227.2/227.2 KB 24.9 MB/s eta 0:00:00\nCollecting python-dotenv==0.14.0\n  Downloading python_dotenv-0.14.0-py2.py3-none-any.whl (17 kB)\nCollecting python-editor==1.0.4\n  Downloading python_editor-1.0.4-py3-none-any.whl (4.9 kB)\nCollecting s3transfer==0.4.2\n  Downloading s3transfer-0.4.2-py2.py3-none-any.whl (79 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 79.2/79.2 KB 4.3 MB/s eta 0:00:00\nCollecting six==1.15.0\n  Downloading six-1.15.0-py2.py3-none-any.whl (10 kB)\nCollecting sqlalchemy==1.3.19\n  Downloading SQLAlchemy-1.3.19.tar.gz (6.2 MB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 6.2/6.2 MB 9.9 MB/s eta 0:00:00\n  Preparing metadata (setup.py): started\n  Preparing metadata (setup.py): finished with status 'done'\nCollecting urllib3==1.26.6\n  Downloading urllib3-1.26.6-py2.py3-none-any.whl (138 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 138.5/138.5 KB 15.4 MB/s eta 0:00:00\nCollecting werkzeug==1.0.1\n  Downloading Werkzeug-1.0.1-py2.py3-none-any.whl (298 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 298.6/298.6 KB 18.3 MB/s eta 0:00:00\nCollecting wtforms==2.3.3\n  Downloading WTForms-2.3.3-py2.py3-none-any.whl (169 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 169.1/169.1 KB 9.7 MB/s eta 0:00:00\nRequirement already satisfied: setuptools>=3.0 in /usr/local/lib/python3.9/site-packages (from gunicorn==20.0.4->-r requirements.txt (line 22)) (58.1.0)\nBuilding wheels for collected packages: flask-jwt-extended, sqlalchemy\n  Building wheel for flask-jwt-extended (setup.py): started\n  Building wheel for flask-jwt-extended (setup.py): finished with status 'done'\n  Created wheel for flask-jwt-extended: filename=Flask_JWT_Extended-3.24.1-py2.py3-none-any.whl size=21528 sha256=a32982b00a21978305fe7bab128692e122cbc39524a4ac060f5f440c1f465cf7\n  Stored in directory: /root/.cache/pip/wheels/06/63/82/1e6d40e604b1f4a1592975a91805e7e897ac8abf27723bda2f\n  Building wheel for sqlalchemy (setup.py): started\n  Building wheel for sqlalchemy (setup.py): finished with status 'done'\n  Created wheel for sqlalchemy: filename=SQLAlchemy-1.3.19-cp39-cp39-linux_x86_64.whl size=1238124 sha256=4a02edad5077317dcc961771312c670e835ed6fc6e5957745517154b247e2c65\n  Stored in directory: /root/.cache/pip/wheels/ab/c8/25/b02cdeed551f8e5e7fa7e54eca202fd7a3ece3ec75c55c36b5\nSuccessfully built flask-jwt-extended sqlalchemy\nInstalling collected packages: python-editor, python-dotenv, pyjwt, werkzeug, urllib3, sqlalchemy, six, markupsafe, jmespath, itsdangerous, idna, gunicorn, dnspython, click, wtforms, python-dateutil, mako, jinja2, email-validator, flask, botocore, alembic, s3transfer, flask-wtf, flask-sqlalchemy, flask-login, flask-jwt-extended, flask-cors, flask-migrate, boto3\nSuccessfully installed alembic-1.4.3 boto3-1.17.105 botocore-1.20.105 click-7.1.2 dnspython-2.1.0 email-validator-1.1.3 flask-1.1.2 flask-cors-3.0.8 flask-jwt-extended-3.24.1 flask-login-0.5.0 flask-migrate-2.5.3 flask-sqlalchemy-2.4.4 flask-wtf-0.14.3 gunicorn-20.0.4 idna-3.2 itsdangerous-1.1.0 jinja2-2.11.2 jmespath-0.10.0 mako-1.1.3 markupsafe-1.1.1 pyjwt-1.7.1 python-dateutil-2.8.1 python-dotenv-0.14.0 python-editor-1.0.4 s3transfer-0.4.2 six-1.15.0 sqlalchemy-1.3.19 urllib3-1.26.6 werkzeug-1.0.1 wtforms-2.3.3\n\u001b[91mWARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv\n\u001b[0m\u001b[91mWARNING: You are using pip version 22.0.4; however, version 22.3.1 is available.\nYou should consider upgrading via the '/usr/local/bin/python -m pip install --upgrade pip' command.\n\u001b[0mRemoving intermediate container 95aface00648\n ---> f0e8e83f5029\nStep 16/17 : RUN pip install psycopg2\n ---> Running in 6518309626cc\nCollecting psycopg2\n  Downloading psycopg2-2.9.5.tar.gz (384 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 384.3/384.3 KB 21.3 MB/s eta 0:00:00\n  Preparing metadata (setup.py): started\n  Preparing metadata (setup.py): finished with status 'done'\nBuilding wheels for collected packages: psycopg2\n  Building wheel for psycopg2 (setup.py): started\n  Building wheel for psycopg2 (setup.py): finished with status 'done'\n  Created wheel for psycopg2: filename=psycopg2-2.9.5-cp39-cp39-linux_x86_64.whl size=472082 sha256=aab64a00c31ba23cee57f5567a469fe7a44a1c252fa4e9ad67bf1e075db2dd77\n  Stored in directory: /root/.cache/pip/wheels/37/c1/ad/4ee49165718dff2c018c9830204ef8e749afdce7919f078586\nSuccessfully built psycopg2\nInstalling collected packages: psycopg2\nSuccessfully installed psycopg2-2.9.5\n\u001b[91mWARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv\n\u001b[0m\u001b[91mWARNING: You are using pip version 22.0.4; however, version 22.3.1 is available.\nYou should consider upgrading via the '/usr/local/bin/python -m pip install --upgrade pip' command.\n\u001b[0mRemoving intermediate container 6518309626cc\n ---> 3b822d5b29ef\nStep 17/17 : CMD gunicorn app:app\n ---> Running in 6cd404310e4f\nRemoving intermediate container 6cd404310e4f\n ---> a17d55858467\nSuccessfully built a17d55858467\nSuccessfully tagged stay-awhile:latest\n","stderr":"","imageSize":1078559766},"repair":{"violations":[{"name":"npmCacheCleanAfterInstall","position":{"start":9,"end":9,"columnStart":4,"columnEnd":15}},{"name":"pipUseNoCacheDir","position":{"start":26,"end":26,"columnStart":4,"columnEnd":35}},{"name":"pipUseNoCacheDir","position":{"start":27,"end":27,"columnStart":4,"columnEnd":24}}],"repairedDockerfile":"FROM node:12 AS build-stage\n\nWORKDIR /react-template\nCOPY react-template/. .\n\n# You have to set this because it should be set during build time.\nENV REACT_APP_BASE_URL=https://stay-awhile.herokuapp.com/\n\n# Build our React App\nRUN npm install\nRUN npm run build\n\nFROM python:3.9\n\n# Setup Flask environment\nENV FLASK_APP=app\nENV FLASK_ENV=production\nENV SQLALCHEMY_ECHO=True\n\nEXPOSE 8000\n\nWORKDIR /var/www\nCOPY . .\nCOPY --from=build-stage /react-template/build/* app/static/\n\n# Install Python Dependencies\nRUN pip install --no-cache-dir -r requirements.txt\nRUN pip install --no-cache-dir psycopg2\n\n# Run flask environment\nCMD gunicorn app:app\n"},"repairedBuild":{"startTimestamp":1672633817914,"endTimestamp":1672633949791,"error":null,"stdout":"Sending build context to Docker daemon  51.79MB\r\r\nStep 1/17 : FROM node:12 AS build-stage\n ---> 6c8de432fc7f\nStep 2/17 : WORKDIR /react-template\n ---> Running in 157fa7fbad45\nRemoving intermediate container 157fa7fbad45\n ---> ff5e5317b028\nStep 3/17 : COPY react-template/. .\n ---> f0f723f9c8d4\nStep 4/17 : ENV REACT_APP_BASE_URL=https://stay-awhile.herokuapp.com/\n ---> Running in 4543c18607fc\nRemoving intermediate container 4543c18607fc\n ---> 2c55fd6804b9\nStep 5/17 : RUN npm install\n ---> Running in 3aa094e36ca8\n\n> core-js@2.6.12 postinstall /react-template/node_modules/babel-runtime/node_modules/core-js\n> node -e \"try{require('./postinstall')}catch(e){}\"\n\n\u001b[96mThank you for using core-js (\u001b[94m https://github.com/zloirock/core-js \u001b[96m) for polyfilling JavaScript standard library!\u001b[0m\n\n\u001b[96mThe project needs your help! Please consider supporting of core-js on Open Collective or Patreon: \u001b[0m\n\u001b[96m>\u001b[94m https://opencollective.com/core-js \u001b[0m\n\u001b[96m>\u001b[94m https://www.patreon.com/zloirock \u001b[0m\n\n\u001b[96mAlso, the author of core-js (\u001b[94m https://github.com/zloirock \u001b[96m) is looking for a good job -)\u001b[0m\n\n\n> core-js@3.15.1 postinstall /react-template/node_modules/core-js\n> node -e \"try{require('./postinstall')}catch(e){}\"\n\n\u001b[96mThank you for using core-js (\u001b[94m https://github.com/zloirock/core-js \u001b[96m) for polyfilling JavaScript standard library!\u001b[0m\n\n\u001b[96mThe project needs your help! Please consider supporting of core-js on Open Collective or Patreon: \u001b[0m\n\u001b[96m>\u001b[94m https://opencollective.com/core-js \u001b[0m\n\u001b[96m>\u001b[94m https://www.patreon.com/zloirock \u001b[0m\n\n\u001b[96mAlso, the author of core-js (\u001b[94m https://github.com/zloirock \u001b[96m) is looking for a good job -)\u001b[0m\n\n\n> core-js-pure@3.15.1 postinstall /react-template/node_modules/core-js-pure\n> node -e \"try{require('./postinstall')}catch(e){}\"\n\n\u001b[96mThank you for using core-js (\u001b[94m https://github.com/zloirock/core-js \u001b[96m) for polyfilling JavaScript standard library!\u001b[0m\n\n\u001b[96mThe project needs your help! Please consider supporting of core-js on Open Collective or Patreon: \u001b[0m\n\u001b[96m>\u001b[94m https://opencollective.com/core-js \u001b[0m\n\u001b[96m>\u001b[94m https://www.patreon.com/zloirock \u001b[0m\n\n\u001b[96mAlso, the author of core-js (\u001b[94m https://github.com/zloirock \u001b[96m) is looking for a good job -)\u001b[0m\n\n\n> ejs@2.7.4 postinstall /react-template/node_modules/ejs\n> node ./postinstall.js\n\nThank you for installing \u001b[35mEJS\u001b[0m: built with the \u001b[32mJake\u001b[0m JavaScript build tool (\u001b[32mhttps://jakejs.com/\u001b[0m)\n\n\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@1.2.13 (node_modules/webpack-dev-server/node_modules/fsevents):\nnpm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.2.13: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@1.2.13 (node_modules/watchpack-chokidar2/node_modules/fsevents):\nnpm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.2.13: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@2.3.2 (node_modules/fsevents):\nnpm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91m\n\u001b[0madded 1947 packages from 816 contributors and audited 1954 packages in 24.404s\n\n145 packages are looking for funding\n  run `npm fund` for details\n\nfound 145 vulnerabilities (16 low, 13 moderate, 91 high, 25 critical)\n  run `npm audit fix` to fix them, or `npm audit` for details\nRemoving intermediate container 3aa094e36ca8\n ---> c779e514e2d7\nStep 6/17 : RUN npm run build\n ---> Running in 52779bca7f22\n\n> react-template@0.1.0 build /react-template\n> react-scripts build\n\nCreating an optimized production build...\n\u001b[91mBrowserslist: caniuse-lite is outdated. Please run:\nnpx browserslist@latest --update-db\n\nWhy you should do it regularly:\nhttps://github.com/browserslist/browserslist#browsers-data-updating\n\u001b[0mCompiled with warnings.\n\nsrc/components/GuestSide/Bookings/BookingsPage.js\n  Line 26:42:  Array.prototype.map() expects a value to be returned at the end of arrow function  array-callback-return\n\nsrc/components/GuestSide/GuestHome.js\n  Line 69:46:  Array.prototype.map() expects a value to be returned at the end of arrow function  array-callback-return\n\nsrc/components/GuestSide/Invoices/MyInvoicesPage.js\n  Line 21:11:  'showDetails' is assigned a value but never used                                   no-unused-vars\n  Line 34:41:  Array.prototype.map() expects a value to be returned at the end of arrow function  array-callback-return\n  Line 50:41:  Array.prototype.map() expects a value to be returned at the end of arrow function  array-callback-return\n\nsrc/components/GuestSide/Invoices/PayInvoiceModal.js\n  Line 4:10:  'getUserInvoices' is defined but never used  no-unused-vars\n\nsrc/components/GuestSide/RanchProfile.js\n  Line 5:21:  'Redirect' is defined but never used             no-unused-vars\n  Line 39:9:  'myBookings' is assigned a value but never used  no-unused-vars\n\nsrc/components/GuestSide/SearchResults.js\n  Line 1:28:   'useState' is defined but never used          no-unused-vars\n  Line 4:10:   'searchRanches' is defined but never used     no-unused-vars\n  Line 12:11:  'history' is assigned a value but never used  no-unused-vars\n\nsrc/components/RanchSide/AllBookings.js\n  Line 16:11:  'ranch' is assigned a value but never used  no-unused-vars\n\nsrc/components/RanchSide/Cabins/DeleteCabinMod.js\n  Line 9:11:  'history' is assigned a value but never used  no-unused-vars\n\nsrc/components/RanchSide/RanchHome.js\n  Line 20:8:  React Hook useEffect has a missing dependency: 'user?.ranch_id'. Either include it or remove the dependency array  react-hooks/exhaustive-deps\n\nsrc/components/navigation/Footer.js\n  Line 2:10:  'Link' is defined but never used  no-unused-vars\n\nsrc/components/user-auth/LoginForm.js\n  Line 9:9:  'loaded' is assigned a value but never used  no-unused-vars\n\nsrc/components/user-auth/SignUpForm.js\n  Line 10:9:   'loaded' is assigned a value but never used  no-unused-vars\n  Line 96:15:  No duplicate props allowed                   react/jsx-no-duplicate-props\n\nSearch for the keywords to learn more about each warning.\nTo ignore, add // eslint-disable-next-line to the line before.\n\nFile sizes after gzip:\n\n  54.29 KB  build/static/js/2.23488d0b.chunk.js\n  12.79 KB  build/static/js/main.27002cb9.chunk.js\n  2.35 KB   build/static/css/main.c7b07682.chunk.css\n  780 B     build/static/js/runtime-main.5be16d21.js\n\nThe project was built assuming it is hosted at /.\nYou can control this with the homepage field in your package.json.\n\nThe build folder is ready to be deployed.\nYou may serve it with a static server:\n\n  npm install -g serve\n  serve -s build\n\nFind out more about deployment here:\n\n  https://cra.link/deployment\n\nRemoving intermediate container 52779bca7f22\n ---> fa278d05465d\nStep 7/17 : FROM python:3.9\n ---> 68cf04410baf\nStep 8/17 : ENV FLASK_APP=app\n ---> Running in de3224062b99\nRemoving intermediate container de3224062b99\n ---> 16cf92ae0100\nStep 9/17 : ENV FLASK_ENV=production\n ---> Running in f55063435176\nRemoving intermediate container f55063435176\n ---> a566674d2d77\nStep 10/17 : ENV SQLALCHEMY_ECHO=True\n ---> Running in 642a6a7a04ea\nRemoving intermediate container 642a6a7a04ea\n ---> 113cd77f3a01\nStep 11/17 : EXPOSE 8000\n ---> Running in d135fdc178cb\nRemoving intermediate container d135fdc178cb\n ---> 8e0a3f57fcfc\nStep 12/17 : WORKDIR /var/www\n ---> Running in 32452c9a47d2\nRemoving intermediate container 32452c9a47d2\n ---> 851cd0aa92f0\nStep 13/17 : COPY . .\n ---> 60ae0d1ec788\nStep 14/17 : COPY --from=build-stage /react-template/build/* app/static/\n ---> 6b3d2fab5b7e\nStep 15/17 : RUN pip install --no-cache-dir -r requirements.txt\n ---> Running in bf888e460429\nCollecting alembic==1.4.3\n  Downloading alembic-1.4.3-py2.py3-none-any.whl (159 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 159.9/159.9 KB 73.5 MB/s eta 0:00:00\nCollecting boto3==1.17.105\n  Downloading boto3-1.17.105-py2.py3-none-any.whl (131 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 131.6/131.6 KB 284.3 MB/s eta 0:00:00\nCollecting botocore==1.20.105\n  Downloading botocore-1.20.105-py2.py3-none-any.whl (7.7 MB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 7.7/7.7 MB 110.3 MB/s eta 0:00:00\nCollecting click==7.1.2\n  Downloading click-7.1.2-py2.py3-none-any.whl (82 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 82.8/82.8 KB 84.9 MB/s eta 0:00:00\nCollecting dnspython==2.1.0\n  Downloading dnspython-2.1.0-py3-none-any.whl (241 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 242.0/242.0 KB 103.3 MB/s eta 0:00:00\nCollecting email-validator==1.1.3\n  Downloading email_validator-1.1.3-py2.py3-none-any.whl (18 kB)\nCollecting flask-cors==3.0.8\n  Downloading Flask_Cors-3.0.8-py2.py3-none-any.whl (14 kB)\nCollecting flask-jwt-extended==3.24.1\n  Downloading Flask-JWT-Extended-3.24.1.tar.gz (31 kB)\n  Preparing metadata (setup.py): started\n  Preparing metadata (setup.py): finished with status 'done'\nCollecting flask-login==0.5.0\n  Downloading Flask_Login-0.5.0-py2.py3-none-any.whl (16 kB)\nCollecting flask-migrate==2.5.3\n  Downloading Flask_Migrate-2.5.3-py2.py3-none-any.whl (13 kB)\nCollecting flask-sqlalchemy==2.4.4\n  Downloading Flask_SQLAlchemy-2.4.4-py2.py3-none-any.whl (17 kB)\nCollecting flask-wtf==0.14.3\n  Downloading Flask_WTF-0.14.3-py2.py3-none-any.whl (13 kB)\nCollecting flask==1.1.2\n  Downloading Flask-1.1.2-py2.py3-none-any.whl (94 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 94.6/94.6 KB 269.2 MB/s eta 0:00:00\nCollecting gunicorn==20.0.4\n  Downloading gunicorn-20.0.4-py2.py3-none-any.whl (77 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 77.9/77.9 KB 267.7 MB/s eta 0:00:00\nCollecting idna==3.2\n  Downloading idna-3.2-py3-none-any.whl (59 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 59.6/59.6 KB 252.5 MB/s eta 0:00:00\nCollecting itsdangerous==1.1.0\n  Downloading itsdangerous-1.1.0-py2.py3-none-any.whl (16 kB)\nCollecting jinja2==2.11.2\n  Downloading Jinja2-2.11.2-py2.py3-none-any.whl (125 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 125.8/125.8 KB 225.2 MB/s eta 0:00:00\nCollecting jmespath==0.10.0\n  Downloading jmespath-0.10.0-py2.py3-none-any.whl (24 kB)\nCollecting mako==1.1.3\n  Downloading Mako-1.1.3-py2.py3-none-any.whl (75 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 75.5/75.5 KB 92.3 MB/s eta 0:00:00\nCollecting markupsafe==1.1.1\n  Downloading MarkupSafe-1.1.1-cp39-cp39-manylinux2010_x86_64.whl (32 kB)\nCollecting pyjwt==1.7.1\n  Downloading PyJWT-1.7.1-py2.py3-none-any.whl (18 kB)\nCollecting python-dateutil==2.8.1\n  Downloading python_dateutil-2.8.1-py2.py3-none-any.whl (227 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 227.2/227.2 KB 291.7 MB/s eta 0:00:00\nCollecting python-dotenv==0.14.0\n  Downloading python_dotenv-0.14.0-py2.py3-none-any.whl (17 kB)\nCollecting python-editor==1.0.4\n  Downloading python_editor-1.0.4-py3-none-any.whl (4.9 kB)\nCollecting s3transfer==0.4.2\n  Downloading s3transfer-0.4.2-py2.py3-none-any.whl (79 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 79.2/79.2 KB 278.7 MB/s eta 0:00:00\nCollecting six==1.15.0\n  Downloading six-1.15.0-py2.py3-none-any.whl (10 kB)\nCollecting sqlalchemy==1.3.19\n  Downloading SQLAlchemy-1.3.19.tar.gz (6.2 MB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 6.2/6.2 MB 119.1 MB/s eta 0:00:00\n  Preparing metadata (setup.py): started\n  Preparing metadata (setup.py): finished with status 'done'\nCollecting urllib3==1.26.6\n  Downloading urllib3-1.26.6-py2.py3-none-any.whl (138 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 138.5/138.5 KB 96.3 MB/s eta 0:00:00\nCollecting werkzeug==1.0.1\n  Downloading Werkzeug-1.0.1-py2.py3-none-any.whl (298 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 298.6/298.6 KB 255.4 MB/s eta 0:00:00\nCollecting wtforms==2.3.3\n  Downloading WTForms-2.3.3-py2.py3-none-any.whl (169 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 169.1/169.1 KB 295.9 MB/s eta 0:00:00\nRequirement already satisfied: setuptools>=3.0 in /usr/local/lib/python3.9/site-packages (from gunicorn==20.0.4->-r requirements.txt (line 22)) (58.1.0)\nBuilding wheels for collected packages: flask-jwt-extended, sqlalchemy\n  Building wheel for flask-jwt-extended (setup.py): started\n  Building wheel for flask-jwt-extended (setup.py): finished with status 'done'\n  Created wheel for flask-jwt-extended: filename=Flask_JWT_Extended-3.24.1-py2.py3-none-any.whl size=21528 sha256=399ed6189b57e6aa178293e1504a878a00ef638c0196143fa0d57db7f22fc2b6\n  Stored in directory: /tmp/pip-ephem-wheel-cache-_02jinui/wheels/06/63/82/1e6d40e604b1f4a1592975a91805e7e897ac8abf27723bda2f\n  Building wheel for sqlalchemy (setup.py): started\n  Building wheel for sqlalchemy (setup.py): finished with status 'done'\n  Created wheel for sqlalchemy: filename=SQLAlchemy-1.3.19-cp39-cp39-linux_x86_64.whl size=1238133 sha256=445e9699f578297ce21393d5fb9c9400d8dbe4f49518071d34527ec103d028f1\n  Stored in directory: /tmp/pip-ephem-wheel-cache-_02jinui/wheels/ab/c8/25/b02cdeed551f8e5e7fa7e54eca202fd7a3ece3ec75c55c36b5\nSuccessfully built flask-jwt-extended sqlalchemy\nInstalling collected packages: python-editor, python-dotenv, pyjwt, werkzeug, urllib3, sqlalchemy, six, markupsafe, jmespath, itsdangerous, idna, gunicorn, dnspython, click, wtforms, python-dateutil, mako, jinja2, email-validator, flask, botocore, alembic, s3transfer, flask-wtf, flask-sqlalchemy, flask-login, flask-jwt-extended, flask-cors, flask-migrate, boto3\nSuccessfully installed alembic-1.4.3 boto3-1.17.105 botocore-1.20.105 click-7.1.2 dnspython-2.1.0 email-validator-1.1.3 flask-1.1.2 flask-cors-3.0.8 flask-jwt-extended-3.24.1 flask-login-0.5.0 flask-migrate-2.5.3 flask-sqlalchemy-2.4.4 flask-wtf-0.14.3 gunicorn-20.0.4 idna-3.2 itsdangerous-1.1.0 jinja2-2.11.2 jmespath-0.10.0 mako-1.1.3 markupsafe-1.1.1 pyjwt-1.7.1 python-dateutil-2.8.1 python-dotenv-0.14.0 python-editor-1.0.4 s3transfer-0.4.2 six-1.15.0 sqlalchemy-1.3.19 urllib3-1.26.6 werkzeug-1.0.1 wtforms-2.3.3\n\u001b[91mWARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv\n\u001b[0m\u001b[91mWARNING: You are using pip version 22.0.4; however, version 22.3.1 is available.\nYou should consider upgrading via the '/usr/local/bin/python -m pip install --upgrade pip' command.\n\u001b[0mRemoving intermediate container bf888e460429\n ---> 810267e6e071\nStep 16/17 : RUN pip install --no-cache-dir psycopg2\n ---> Running in f7b9d90441ef\nCollecting psycopg2\n  Downloading psycopg2-2.9.5.tar.gz (384 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 384.3/384.3 KB 73.7 MB/s eta 0:00:00\n  Preparing metadata (setup.py): started\n  Preparing metadata (setup.py): finished with status 'done'\nBuilding wheels for collected packages: psycopg2\n  Building wheel for psycopg2 (setup.py): started\n  Building wheel for psycopg2 (setup.py): finished with status 'done'\n  Created wheel for psycopg2: filename=psycopg2-2.9.5-cp39-cp39-linux_x86_64.whl size=472069 sha256=d880468a6b89547a37b05e0f4b70477f62232cbaa69793c10ecf37c30d441c97\n  Stored in directory: /tmp/pip-ephem-wheel-cache-fyffsf11/wheels/37/c1/ad/4ee49165718dff2c018c9830204ef8e749afdce7919f078586\nSuccessfully built psycopg2\nInstalling collected packages: psycopg2\nSuccessfully installed psycopg2-2.9.5\n\u001b[91mWARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv\n\u001b[0m\u001b[91mWARNING: You are using pip version 22.0.4; however, version 22.3.1 is available.\nYou should consider upgrading via the '/usr/local/bin/python -m pip install --upgrade pip' command.\n\u001b[0mRemoving intermediate container f7b9d90441ef\n ---> 3751cc4b1bc7\nStep 17/17 : CMD gunicorn app:app\n ---> Running in 398fa05e6c7a\nRemoving intermediate container 398fa05e6c7a\n ---> c69d905f7e06\nSuccessfully built c69d905f7e06\nSuccessfully tagged stay-awhile:latest\n","stderr":"","imageSize":1059307836},"endTime":1672633950183}