{"repository":"https://github.com/ccb1900/redisbygo","dockerfilePath":"Dockerfile","startTime":1672179423838,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/ccb1900/redisbygo'...\n","error":null,"commit":"2aef6113704379a3ee32af6499323128d46b680a"},"originalBuild":{"startTimestamp":1672179424661,"endTimestamp":1672179610799,"error":null,"stdout":"Sending build context to Docker daemon  440.3kB\r\r\nStep 1/16 : FROM golang:1.14-alpine as builder\n1.14-alpine: Pulling from library/golang\n4c0d98bf9879: Pulling fs layer\n9e181322f1e7: Pulling fs layer\n6422294da7d3: Pulling fs layer\neb57f1833670: Pulling fs layer\nbd57f1a80d4e: Pulling fs layer\nbd57f1a80d4e: Waiting\neb57f1833670: Waiting\n6422294da7d3: Download complete\n9e181322f1e7: Download complete\n4c0d98bf9879: Verifying Checksum\n4c0d98bf9879: Download complete\n4c0d98bf9879: Pull complete\nbd57f1a80d4e: Download complete\n9e181322f1e7: Pull complete\n6422294da7d3: Pull complete\neb57f1833670: Verifying Checksum\neb57f1833670: Download complete\neb57f1833670: Pull complete\nbd57f1a80d4e: Pull complete\nDigest: sha256:e196a762bd349b188d66c539354fc23f0e5a0178c214e6dfe4d7894c3c2753f1\nStatus: Downloaded newer image for golang:1.14-alpine\n ---> 32dc91e030ac\nStep 2/16 : ARG CHINESE_ENABLE\n ---> Running in f9c6a650bf1a\nRemoving intermediate container f9c6a650bf1a\n ---> 617055cb975b\nStep 3/16 : ARG GOPROXY\n ---> Running in 42ec541a7524\nRemoving intermediate container 42ec541a7524\n ---> f756fe72a422\nStep 4/16 : ENV GOPROXY ${GOPROXY}\n ---> Running in 4bb4d68c41f7\nRemoving intermediate container 4bb4d68c41f7\n ---> 754803c0e8e5\nStep 5/16 : ENV CHINESE_ENABLE true\n ---> Running in ce3418e6b7d7\nRemoving intermediate container ce3418e6b7d7\n ---> 6f19f3819c3d\nStep 6/16 : WORKDIR /app\n ---> Running in 15928da2e130\nRemoving intermediate container 15928da2e130\n ---> 98879e65d9af\nStep 7/16 : RUN if [ ${CHINESE_ENABLE} ]; then     sed -i 's/dl-cdn.alpinelinux.org/mirrors.ustc.edu.cn/g' /etc/apk/repositories ;fi\n ---> Running in eb617de2982f\nRemoving intermediate container eb617de2982f\n ---> a2e6bd635ae3\nStep 8/16 : COPY . /app\n ---> 4b9307a23a47\nStep 9/16 : RUN export GOPROXY=\"https://goproxy.cn,direct\" && go mod download && apk add make && make clean && make && cp server.example.json server.json\n ---> Running in 34c7e525704a\nfetch https://mirrors.ustc.edu.cn/alpine/v3.13/main/x86_64/APKINDEX.tar.gz\nfetch https://mirrors.ustc.edu.cn/alpine/v3.13/community/x86_64/APKINDEX.tar.gz\n(1/1) Installing make (4.3-r0)\nExecuting busybox-1.32.1-r2.trigger\nOK: 7 MiB in 16 packages\nrm  -rf build && rm -rf appendonly.aof\nCGO_ENABLED=0  GOARCH=amd64 go build -o build/darwin/redis main/main.go && GOOS=linux go build -o build/linux/redis main/main.go && GOOS=windows  go build -o build/windows/redis.exe main/main.go\nRemoving intermediate container 34c7e525704a\n ---> 004d880f1e1a\nStep 10/16 : FROM alpine:latest as prod\nlatest: Pulling from library/alpine\nc158987b0551: Already exists\nDigest: sha256:8914eb54f968791faf6a8638949e480fef81e697984fba772b3976835194c6d4\nStatus: Downloaded newer image for alpine:latest\n ---> 49176f190c7e\nStep 11/16 : RUN if [ ${CHINESE_ENABLE} ]; then     sed -i 's/dl-cdn.alpinelinux.org/mirrors.ustc.edu.cn/g' /etc/apk/repositories ;fi\n ---> Running in a236c55f1f29\nRemoving intermediate container a236c55f1f29\n ---> e81029923491\nStep 12/16 : RUN apk --no-cache add ca-certificates\n ---> Running in 1eb87e012efc\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/1) Installing ca-certificates (20220614-r3)\nExecuting busybox-1.35.0-r29.trigger\nExecuting ca-certificates-20220614-r3.trigger\nOK: 8 MiB in 16 packages\nRemoving intermediate container 1eb87e012efc\n ---> 07bce71eb869\nStep 13/16 : WORKDIR /app/\n ---> Running in a67f7c84a38c\nRemoving intermediate container a67f7c84a38c\n ---> af15ba712b6d\nStep 14/16 : COPY --from=0 /app/build/linux/redis .\n ---> 0dd9527a12ad\nStep 15/16 : COPY --from=0 /app/server.json .\n ---> 35ccb127c772\nStep 16/16 : CMD [\"/app/redis\"]\n ---> Running in 9641fb6cb640\nRemoving intermediate container 9641fb6cb640\n ---> 34ffd2275a26\nSuccessfully built 34ffd2275a26\nSuccessfully tagged redisbygo:latest\n","stderr":"","imageSize":26525508},"repair":{"violations":[{"name":"apkAddUseNoCache","position":{"start":14,"end":14,"columnStart":69,"columnEnd":81}}],"repairedDockerfile":"FROM golang:1.14-alpine as builder\nARG CHINESE_ENABLE\nARG GOPROXY\n\nENV GOPROXY ${GOPROXY}\nENV CHINESE_ENABLE true\n\nWORKDIR /app\n\nRUN if [ ${CHINESE_ENABLE} ]; then \\\n    sed -i 's/dl-cdn.alpinelinux.org/mirrors.ustc.edu.cn/g' /etc/apk/repositories \\\n;fi\n\nCOPY . /app\nRUN export GOPROXY=\"https://goproxy.cn,direct\" && go mod download && apk add --no-cache make && make clean && make && cp server.example.json server.json\n\nFROM alpine:latest as prod\n\nRUN if [ ${CHINESE_ENABLE} ]; then \\\n    sed -i 's/dl-cdn.alpinelinux.org/mirrors.ustc.edu.cn/g' /etc/apk/repositories \\\n;fi\n\nRUN apk --no-cache add ca-certificates\n\nWORKDIR /app/\n\nCOPY --from=0 /app/build/linux/redis .\nCOPY --from=0 /app/server.json .\n\nCMD [\"/app/redis\"]"},"repairedBuild":{"startTimestamp":1672179611166,"endTimestamp":1672179684709,"error":null,"stdout":"Sending build context to Docker daemon  440.3kB\r\r\nStep 1/16 : FROM golang:1.14-alpine as builder\n ---> 32dc91e030ac\nStep 2/16 : ARG CHINESE_ENABLE\n ---> Running in fa2b79efc603\nRemoving intermediate container fa2b79efc603\n ---> e46d5b92a964\nStep 3/16 : ARG GOPROXY\n ---> Running in 13a6b14b1e87\nRemoving intermediate container 13a6b14b1e87\n ---> 17a0ca423b45\nStep 4/16 : ENV GOPROXY ${GOPROXY}\n ---> Running in 4a12fa225f87\nRemoving intermediate container 4a12fa225f87\n ---> 41688f6f6574\nStep 5/16 : ENV CHINESE_ENABLE true\n ---> Running in 6ad2e9ed48c2\nRemoving intermediate container 6ad2e9ed48c2\n ---> 770462c28084\nStep 6/16 : WORKDIR /app\n ---> Running in ca84c92adeae\nRemoving intermediate container ca84c92adeae\n ---> 9f74b48fd151\nStep 7/16 : RUN if [ ${CHINESE_ENABLE} ]; then     sed -i 's/dl-cdn.alpinelinux.org/mirrors.ustc.edu.cn/g' /etc/apk/repositories ;fi\n ---> Running in 3071708c9a06\nRemoving intermediate container 3071708c9a06\n ---> 826d2cd366a1\nStep 8/16 : COPY . /app\n ---> 6738528bcc71\nStep 9/16 : RUN export GOPROXY=\"https://goproxy.cn,direct\" && go mod download && apk add --no-cache make && make clean && make && cp server.example.json server.json\n ---> Running in cfb82c0df045\nfetch https://mirrors.ustc.edu.cn/alpine/v3.13/main/x86_64/APKINDEX.tar.gz\nfetch https://mirrors.ustc.edu.cn/alpine/v3.13/community/x86_64/APKINDEX.tar.gz\n(1/1) Installing make (4.3-r0)\nExecuting busybox-1.32.1-r2.trigger\nOK: 7 MiB in 16 packages\nrm  -rf build && rm -rf appendonly.aof\nCGO_ENABLED=0  GOARCH=amd64 go build -o build/darwin/redis main/main.go && GOOS=linux go build -o build/linux/redis main/main.go && GOOS=windows  go build -o build/windows/redis.exe main/main.go\nRemoving intermediate container cfb82c0df045\n ---> 79cb7045306f\nStep 10/16 : FROM alpine:latest as prod\n ---> 49176f190c7e\nStep 11/16 : RUN if [ ${CHINESE_ENABLE} ]; then     sed -i 's/dl-cdn.alpinelinux.org/mirrors.ustc.edu.cn/g' /etc/apk/repositories ;fi\n ---> Running in b5217f499905\nRemoving intermediate container b5217f499905\n ---> 8388c3134079\nStep 12/16 : RUN apk --no-cache add ca-certificates\n ---> Running in 980119934a40\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/1) Installing ca-certificates (20220614-r3)\nExecuting busybox-1.35.0-r29.trigger\nExecuting ca-certificates-20220614-r3.trigger\nOK: 8 MiB in 16 packages\nRemoving intermediate container 980119934a40\n ---> 0e558236aa5c\nStep 13/16 : WORKDIR /app/\n ---> Running in bb2910692af5\nRemoving intermediate container bb2910692af5\n ---> 67e66c1d78ec\nStep 14/16 : COPY --from=0 /app/build/linux/redis .\n ---> 04ea2ad7ec51\nStep 15/16 : COPY --from=0 /app/server.json .\n ---> b8959ff6dfbf\nStep 16/16 : CMD [\"/app/redis\"]\n ---> Running in a979c6b2e69a\nRemoving intermediate container a979c6b2e69a\n ---> 14edf783ae28\nSuccessfully built 14edf783ae28\nSuccessfully tagged redisbygo:latest\n","stderr":"","imageSize":26525508},"endTime":1672179684977}