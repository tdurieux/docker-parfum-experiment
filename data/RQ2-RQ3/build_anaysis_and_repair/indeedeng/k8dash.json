{"repository":"https://github.com/indeedeng/k8dash","dockerfilePath":"Dockerfile","startTime":1673181989739,"endTime":1673182311623,"clone":{"startTime":1673181989740,"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/indeedeng/k8dash'...\n","error":null,"endTime":1673181990798,"commit":"b8bd864a16b504b6100c1f538257c50b37efa576"},"originalBuild":{"startTime":1673181990870,"endTime":1673182172835,"error":null,"stdout":"Sending build context to Docker daemon   10.9MB\r\r\nStep 1/18 : FROM node:12.22.10-alpine as build-deps\n12.22.10-alpine: Pulling from library/node\n3d2430473443: Pulling fs layer\n77097efd96d4: Pulling fs layer\nfca9e648b17d: Pulling fs layer\n76bc0f9d5fc6: Pulling fs layer\n3d2430473443: Verifying Checksum\n3d2430473443: Download complete\nfca9e648b17d: Verifying Checksum\nfca9e648b17d: Download complete\n3d2430473443: Pull complete\n77097efd96d4: Verifying Checksum\n77097efd96d4: Download complete\n76bc0f9d5fc6: Verifying Checksum\n76bc0f9d5fc6: Download complete\n77097efd96d4: Pull complete\nfca9e648b17d: Pull complete\n76bc0f9d5fc6: Pull complete\nDigest: sha256:54017d3a3ed14f8e698607e7d17e15ae6c708f07c0fd5560b12f860987e8bf71\nStatus: Downloaded newer image for node:12.22.10-alpine\n ---> c049a5e21a30\nStep 2/18 : WORKDIR /usr/src/app\n ---> Running in 2c76fa2ce9e4\nRemoving intermediate container 2c76fa2ce9e4\n ---> a981bf72092c\nStep 3/18 : COPY client/package.json client/package-lock.json ./\n ---> 19a07baa2dcf\nStep 4/18 : RUN npm i\n ---> Running in 55a0652398fb\n\n> core-js@2.6.12 postinstall /usr/src/app/node_modules/babel-runtime/node_modules/core-js\n> node -e \"try{require('./postinstall')}catch(e){}\"\n\n\u001b[96mThank you for using core-js (\u001b[94m https://github.com/zloirock/core-js \u001b[96m) for polyfilling JavaScript standard library!\u001b[0m\n\n\u001b[96mThe project needs your help! Please consider supporting of core-js on Open Collective or Patreon: \u001b[0m\n\u001b[96m>\u001b[94m https://opencollective.com/core-js \u001b[0m\n\u001b[96m>\u001b[94m https://www.patreon.com/zloirock \u001b[0m\n\n\u001b[96mAlso, the author of core-js (\u001b[94m https://github.com/zloirock \u001b[96m) is looking for a good job -)\u001b[0m\n\n\n> core-js@3.8.3 postinstall /usr/src/app/node_modules/core-js\n> node -e \"try{require('./postinstall')}catch(e){}\"\n\n\u001b[96mThank you for using core-js (\u001b[94m https://github.com/zloirock/core-js \u001b[96m) for polyfilling JavaScript standard library!\u001b[0m\n\n\u001b[96mThe project needs your help! Please consider supporting of core-js on Open Collective or Patreon: \u001b[0m\n\u001b[96m>\u001b[94m https://opencollective.com/core-js \u001b[0m\n\u001b[96m>\u001b[94m https://www.patreon.com/zloirock \u001b[0m\n\n\u001b[96mAlso, the author of core-js (\u001b[94m https://github.com/zloirock \u001b[96m) is looking for a good job -)\u001b[0m\n\n\n> core-js-pure@3.8.3 postinstall /usr/src/app/node_modules/core-js-pure\n> node -e \"try{require('./postinstall')}catch(e){}\"\n\n\u001b[96mThank you for using core-js (\u001b[94m https://github.com/zloirock/core-js \u001b[96m) for polyfilling JavaScript standard library!\u001b[0m\n\n\u001b[96mThe project needs your help! Please consider supporting of core-js on Open Collective or Patreon: \u001b[0m\n\u001b[96m>\u001b[94m https://opencollective.com/core-js \u001b[0m\n\u001b[96m>\u001b[94m https://www.patreon.com/zloirock \u001b[0m\n\n\u001b[96mAlso, the author of core-js (\u001b[94m https://github.com/zloirock \u001b[96m) is looking for a good job -)\u001b[0m\n\n\n> protobufjs@6.10.2 postinstall /usr/src/app/node_modules/protobufjs\n> node scripts/postinstall\n\n\u001b[91mnpm WARN @skooner-k8s/skooner-client@0.1.0 No description\n\u001b[0m\u001b[91mnpm WARN @skooner-k8s/skooner-client@0.1.0 No license field.\n\u001b[0m\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@1.2.13 (node_modules/webpack-dev-server/node_modules/fsevents):\nnpm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.2.13: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91mnpm \u001b[0m\u001b[91mWARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@1.2.13 (node_modules/watchpack-chokidar2/node_modules/fsevents):\nnpm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.2.13: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@1.2.13 (node_modules/jest-haste-map/node_modules/fsevents):\nnpm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.2.13: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@2.1.2 (node_modules/fsevents):\nnpm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.1.2: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@2.3.1 (node_modules/chokidar/node_modules/fsevents):\nnpm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.1: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91m\n\u001b[0madded 1810 packages from 891 contributors and audited 1820 packages in 29.377s\n\n88 packages are looking for funding\n  run `npm fund` for details\n\nfound 144 vulnerabilities (18 low, 13 moderate, 106 high, 7 critical)\n  run `npm audit fix` to fix them, or `npm audit` for details\nRemoving intermediate container 55a0652398fb\n ---> ca60078a5d96\nStep 5/18 : COPY client/ ./\n ---> 53d44c35c93b\nStep 6/18 : RUN npm run build\n ---> Running in 22822fca1b11\n\n> @skooner-k8s/skooner-client@0.1.0 build /usr/src/app\n> react-scripts build\n\nCreating an optimized production build...\n\u001b[91mBrowserslist: caniuse-lite is outdated. Please run:\n  npx browserslist@latest --update-db\n  Why you should do it regularly: https://github.com/browserslist/browserslist#browsers-data-updating\n\u001b[0mCompiled successfully.\n\nFile sizes after gzip:\n\n  322.9 KB   build/static/js/2.8ecea4b8.chunk.js\n  131.43 KB  build/static/js/main.aaabf38a.chunk.js\n  4.25 KB    build/static/css/main.c514c7e6.chunk.css\n  786 B      build/static/js/runtime-main.be299e3a.js\n  589 B      build/static/css/2.b522e268.chunk.css\n\nThe project was built assuming it is hosted at ./.\nYou can control this with the homepage field in your package.json.\n\nThe build folder is ready to be deployed.\n\nFind out more about deployment here:\n\n  bit.ly/CRA-deploy\n\nRemoving intermediate container 22822fca1b11\n ---> 044a3eda763f\nStep 7/18 : FROM node:12.22.10-alpine\n ---> c049a5e21a30\nStep 8/18 : RUN apk add --no-cache tini\n ---> Running in 5933faa7ab6d\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/community/x86_64/APKINDEX.tar.gz\n(1/1) Installing tini (0.19.0-r0)\nExecuting busybox-1.34.1-r4.trigger\nOK: 7 MiB in 17 packages\nRemoving intermediate container 5933faa7ab6d\n ---> fdb2a5b740c9\nStep 9/18 : ENV NODE_ENV production\n ---> Running in f08aced837da\nRemoving intermediate container f08aced837da\n ---> 950adb2d208e\nStep 10/18 : WORKDIR /usr/src/app\n ---> Running in e76b3fa4e895\nRemoving intermediate container e76b3fa4e895\n ---> fb3f6d2cf81c\nStep 11/18 : RUN chown -R node:node /usr/src/app/\n ---> Running in 8ac1f89935c0\nRemoving intermediate container 8ac1f89935c0\n ---> d7b89f5eb994\nStep 12/18 : EXPOSE 4654\n ---> Running in 96468cefe863\nRemoving intermediate container 96468cefe863\n ---> 9ef6c95dc5ff\nStep 13/18 : COPY server/package.json server/package-lock.json ./\n ---> ed719a523c66\nStep 14/18 : RUN npm i --production\n ---> Running in d19da4088dc1\n\u001b[91mnpm WARN @skooner-k8s/skooner-server@1.0.0 No description\n\u001b[0m\u001b[91m\n\u001b[0madded 184 packages from 202 contributors and audited 291 packages in 3.799s\n\n18 packages are looking for funding\n  run `npm fund` for details\n\nfound 8 vulnerabilities (2 moderate, 6 high)\n  run `npm audit fix` to fix them, or `npm audit` for details\nRemoving intermediate container d19da4088dc1\n ---> 79c1e1ef5603\nStep 15/18 : COPY --from=build-deps /usr/src/app/build /usr/src/app/public\n ---> 401adfcae224\nStep 16/18 : COPY /server ./\n ---> b49189d3b6e2\nStep 17/18 : USER 1000\n ---> Running in 65bebcefb461\nRemoving intermediate container 65bebcefb461\n ---> cc7ba457e5aa\nStep 18/18 : ENTRYPOINT [\"/sbin/tini\", \"--\", \"node\", \".\"]\n ---> Running in f445137ec4e8\nRemoving intermediate container f445137ec4e8\n ---> 4664c45a3e13\nSuccessfully built 4664c45a3e13\nSuccessfully tagged k8dash:latest\n","stderr":"","imageSize":132315765},"repair":{"startTime":1673182172904,"endTime":1673182172999,"violations":[{"name":"npmCacheCleanAfterInstall","position":{"start":4,"end":4,"columnStart":4,"columnEnd":9}},{"name":"npmCacheCleanAfterInstall","position":{"start":19,"end":19,"columnStart":4,"columnEnd":22}}],"repairedDockerfile":"# Stage 1 - the build react app\nFROM node:12.22.10-alpine as build-deps\nWORKDIR /usr/src/app\nCOPY client/package.json client/package-lock.json ./\nRUN npm i && npm cache clean --force;\n\nCOPY client/ ./\nRUN npm run build\n\n# Stage 2 - the production environment\nFROM node:12.22.10-alpine\n\nRUN apk add --no-cache tini\nENV NODE_ENV production\nWORKDIR /usr/src/app\nRUN chown -R node:node /usr/src/app/\nEXPOSE 4654\n\nCOPY server/package.json server/package-lock.json ./\nRUN npm i --production && npm cache clean --force;\n\nCOPY --from=build-deps /usr/src/app/build /usr/src/app/public\nCOPY /server ./\n\n# USER 1000 is the \"node\" user\n# This is to avoid the \"container has runAsNonRoot and image has non-numeric user (node), cannot verify user is non-root\"\n# in clusters with PSP enabled\nUSER 1000\n\nENTRYPOINT [\"/sbin/tini\", \"--\", \"node\", \".\"]\n"},"repairedBuild":{"startTime":1673182173300,"endTime":1673182311305,"error":null,"stdout":"Sending build context to Docker daemon   10.9MB\r\r\nStep 1/18 : FROM node:12.22.10-alpine as build-deps\n ---> c049a5e21a30\nStep 2/18 : WORKDIR /usr/src/app\n ---> Running in 88273959aa3e\nRemoving intermediate container 88273959aa3e\n ---> 2eddae485909\nStep 3/18 : COPY client/package.json client/package-lock.json ./\n ---> 045b113b50c3\nStep 4/18 : RUN npm i && npm cache clean --force;\n ---> Running in a42676c3a5ed\n\n> core-js@2.6.12 postinstall /usr/src/app/node_modules/babel-runtime/node_modules/core-js\n> node -e \"try{require('./postinstall')}catch(e){}\"\n\n\u001b[96mThank you for using core-js (\u001b[94m https://github.com/zloirock/core-js \u001b[96m) for polyfilling JavaScript standard library!\u001b[0m\n\n\u001b[96mThe project needs your help! Please consider supporting of core-js on Open Collective or Patreon: \u001b[0m\n\u001b[96m>\u001b[94m https://opencollective.com/core-js \u001b[0m\n\u001b[96m>\u001b[94m https://www.patreon.com/zloirock \u001b[0m\n\n\u001b[96mAlso, the author of core-js (\u001b[94m https://github.com/zloirock \u001b[96m) is looking for a good job -)\u001b[0m\n\n\n> core-js@3.8.3 postinstall /usr/src/app/node_modules/core-js\n> node -e \"try{require('./postinstall')}catch(e){}\"\n\n\u001b[96mThank you for using core-js (\u001b[94m https://github.com/zloirock/core-js \u001b[96m) for polyfilling JavaScript standard library!\u001b[0m\n\n\u001b[96mThe project needs your help! Please consider supporting of core-js on Open Collective or Patreon: \u001b[0m\n\u001b[96m>\u001b[94m https://opencollective.com/core-js \u001b[0m\n\u001b[96m>\u001b[94m https://www.patreon.com/zloirock \u001b[0m\n\n\u001b[96mAlso, the author of core-js (\u001b[94m https://github.com/zloirock \u001b[96m) is looking for a good job -)\u001b[0m\n\n\n> core-js-pure@3.8.3 postinstall /usr/src/app/node_modules/core-js-pure\n> node -e \"try{require('./postinstall')}catch(e){}\"\n\n\u001b[96mThank you for using core-js (\u001b[94m https://github.com/zloirock/core-js \u001b[96m) for polyfilling JavaScript standard library!\u001b[0m\n\n\u001b[96mThe project needs your help! Please consider supporting of core-js on Open Collective or Patreon: \u001b[0m\n\u001b[96m>\u001b[94m https://opencollective.com/core-js \u001b[0m\n\u001b[96m>\u001b[94m https://www.patreon.com/zloirock \u001b[0m\n\n\u001b[96mAlso, the author of core-js (\u001b[94m https://github.com/zloirock \u001b[96m) is looking for a good job -)\u001b[0m\n\n\n> protobufjs@6.10.2 postinstall /usr/src/app/node_modules/protobufjs\n> node scripts/postinstall\n\n\u001b[91mnpm WARN @skooner-k8s/skooner-client@0.1.0 No description\n\u001b[0m\u001b[91mnpm WARN @skooner-k8s/skooner-client@0.1.0 No license field.\n\u001b[0m\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@1.2.13 (node_modules/webpack-dev-server/node_modules/fsevents):\nnpm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.2.13: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@1.2.13 (node_modules/watchpack-chokidar2/node_modules/fsevents):\nnpm \u001b[0m\u001b[91mWARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.2.13: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@1.2.13 (node_modules/jest-haste-map/node_modules/fsevents):\nnpm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.2.13: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@2.1.2 (node_modules/fsevents):\nnpm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.1.2: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@2.3.1 (node_modules/chokidar/node_modules/fsevents):\nnpm WARN notsup\u001b[0m\u001b[91m SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.1: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91m\n\u001b[0madded 1810 packages from 891 contributors and audited 1820 packages in 27.075s\n\n88 packages are looking for funding\n  run `npm fund` for details\n\nfound 144 vulnerabilities (18 low, 13 moderate, 106 high, 7 critical)\n  run `npm audit fix` to fix them, or `npm audit` for details\n\u001b[91mnpm\u001b[0m\u001b[91m WARN \u001b[0m\u001b[91musing --force I sure hope you know what you are doing.\n\u001b[0mRemoving intermediate container a42676c3a5ed\n ---> b34adb3ef14f\nStep 5/18 : COPY client/ ./\n ---> 127efbceed75\nStep 6/18 : RUN npm run build\n ---> Running in ac8fe23390cc\n\n> @skooner-k8s/skooner-client@0.1.0 build /usr/src/app\n> react-scripts build\n\nCreating an optimized production build...\n\u001b[91mBrowserslist: caniuse-lite is outdated. Please run:\n  npx browserslist@latest --update-db\n  Why you should do it regularly: https://github.com/browserslist/browserslist#browsers-data-updating\n\u001b[0mCompiled successfully.\n\nFile sizes after gzip:\n\n  322.9 KB   build/static/js/2.8ecea4b8.chunk.js\n  131.43 KB  build/static/js/main.aaabf38a.chunk.js\n  4.25 KB    build/static/css/main.c514c7e6.chunk.css\n  786 B      build/static/js/runtime-main.be299e3a.js\n  589 B      build/static/css/2.b522e268.chunk.css\n\nThe project was built assuming it is hosted at ./.\nYou can control this with the homepage field in your package.json.\n\nThe build folder is ready to be deployed.\n\nFind out more about deployment here:\n\n  bit.ly/CRA-deploy\n\nRemoving intermediate container ac8fe23390cc\n ---> 157f8eca7a54\nStep 7/18 : FROM node:12.22.10-alpine\n ---> c049a5e21a30\nStep 8/18 : RUN apk add --no-cache tini\n ---> Running in 92abe1a90fca\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/community/x86_64/APKINDEX.tar.gz\n(1/1) Installing tini (0.19.0-r0)\nExecuting busybox-1.34.1-r4.trigger\nOK: 7 MiB in 17 packages\nRemoving intermediate container 92abe1a90fca\n ---> 192b93098ceb\nStep 9/18 : ENV NODE_ENV production\n ---> Running in cace5df5805c\nRemoving intermediate container cace5df5805c\n ---> 1c532cccb6e6\nStep 10/18 : WORKDIR /usr/src/app\n ---> Running in bc0de9ebff85\nRemoving intermediate container bc0de9ebff85\n ---> 718750d40ab4\nStep 11/18 : RUN chown -R node:node /usr/src/app/\n ---> Running in 26e5b38fbf2d\nRemoving intermediate container 26e5b38fbf2d\n ---> fa2952d0c138\nStep 12/18 : EXPOSE 4654\n ---> Running in e22459d9f084\nRemoving intermediate container e22459d9f084\n ---> 9da687c0615c\nStep 13/18 : COPY server/package.json server/package-lock.json ./\n ---> d799ee0cf5d2\nStep 14/18 : RUN npm i --production && npm cache clean --force;\n ---> Running in 63b25ff37f86\n\u001b[91mnpm WARN @skooner-k8s/skooner-server@1.0.0 No description\n\u001b[0m\u001b[91m\n\u001b[0madded 184 packages from 202 contributors and audited 291 packages in 3.461s\n\n18 packages are looking for funding\n  run `npm fund` for details\n\nfound 8 vulnerabilities (2 moderate, 6 high)\n  run `npm audit fix` to fix them, or `npm audit` for details\n\u001b[91mnpm WARN\u001b[0m\u001b[91m using --force I sure hope you know what you are doing.\n\u001b[0mRemoving intermediate container 63b25ff37f86\n ---> 289d08e02dc8\nStep 15/18 : COPY --from=build-deps /usr/src/app/build /usr/src/app/public\n ---> cff72f6a64aa\nStep 16/18 : COPY /server ./\n ---> ee73c3593848\nStep 17/18 : USER 1000\n ---> Running in decbae6a7da3\nRemoving intermediate container decbae6a7da3\n ---> 00f8f082e054\nStep 18/18 : ENTRYPOINT [\"/sbin/tini\", \"--\", \"node\", \".\"]\n ---> Running in fc005cd38e93\nRemoving intermediate container fc005cd38e93\n ---> afa7edcb1e50\nSuccessfully built afa7edcb1e50\nSuccessfully tagged k8dash:latest\n","stderr":"","imageSize":126204688}}