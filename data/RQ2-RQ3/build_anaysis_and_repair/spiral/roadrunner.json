{"repository":"https://github.com/spiral/roadrunner","dockerfilePath":"Dockerfile","startTime":1672955546852,"endTime":1672956003081,"clone":{"startTime":1672955546853,"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/spiral/roadrunner'...\n","error":null,"endTime":1672955547781,"commit":"f6bc8835dc4d996992b6d4a2751ac10dc6138e4f"},"originalBuild":{"startTime":1672955547865,"endTime":1672955997483,"error":null,"stdout":"Sending build context to Docker daemon  657.9kB\r\r\nStep 1/26 : FROM --platform=${TARGETPLATFORM:-linux/amd64} golang:1.19-alpine as builder\n1.19-alpine: Pulling from library/golang\nDigest: sha256:a9b24b67dc83b3383d22a14941c2b2b2ca6a103d805cac6820fd1355943beaf1\nStatus: Downloaded newer image for golang:1.19-alpine\n ---> cae57157ceaa\nStep 2/26 : ARG APP_VERSION=\"undefined\"\n ---> Running in 8e42aebff7ba\nRemoving intermediate container 8e42aebff7ba\n ---> 3c1fc55ab929\nStep 3/26 : ARG BUILD_TIME=\"undefined\"\n ---> Running in d841e8381214\nRemoving intermediate container d841e8381214\n ---> 03ffc54b36b5\nStep 4/26 : COPY . /src\n ---> 590a53be699b\nStep 5/26 : WORKDIR /src\n ---> Running in 3322fc66205a\nRemoving intermediate container 3322fc66205a\n ---> 5390eef8a654\nStep 6/26 : ENV LDFLAGS=\"-s -X github.com/roadrunner-server/roadrunner/v2/internal/meta.version=$APP_VERSION -X github.com/roadrunner-server/roadrunner/v2/internal/meta.buildTime=$BUILD_TIME\"\n ---> Running in cb095674a09e\nRemoving intermediate container cb095674a09e\n ---> 9595eea30b87\nStep 7/26 : RUN set -x\n ---> Running in 3bcfd0b1137e\nRemoving intermediate container 3bcfd0b1137e\n ---> 71484b0b5c79\nStep 8/26 : RUN go mod download\n ---> Running in dad5a9e3cf22\nRemoving intermediate container dad5a9e3cf22\n ---> 0efe71433b14\nStep 9/26 : RUN go mod tidy\n ---> Running in 3d6b55ace32c\n\u001b[91mgo: downloading go.uber.org/goleak v1.2.0\ngo: downloading gopkg.in/check.v1 v1.0.0-20201130134442-10cb98267c6c\n\u001b[0m\u001b[91mgo: downloading github.com/prashantv/gostub v1.1.0\n\u001b[0m\u001b[91mgo: downloading github.com/google/go-cmp v0.5.9\n\u001b[0m\u001b[91mgo: downloading github.com/BurntSushi/toml v0.3.1\n\u001b[0m\u001b[91mgo: downloading github.com/frankban/quicktest v1.14.3\n\u001b[0m\u001b[91mgo: downloading github.com/benbjohnson/clock v1.3.0\n\u001b[0m\u001b[91mgo: downloading github.com/Shopify/toxiproxy/v2 v2.5.0\ngo: downloading github.com/fortytw2/leaktest v1.3.0\n\u001b[0m\u001b[91mgo: downloading github.com/nats-io/nats-server/v2 v2.7.4\n\u001b[0m\u001b[91mgo: downloading github.com/onsi/ginkgo v1.16.5\ngo: downloading github.com/onsi/gomega v1.24.1\n\u001b[0m\u001b[91mgo: downloading github.com/go-chi/cors v1.2.0\n\u001b[0m\u001b[91mgo: downloading github.com/jcmturner/goidentity/v6 v6.0.1\n\u001b[0m\u001b[91mgo: downloading github.com/dgryski/go-farm v0.0.0-20200201041132-a6ae2369ad13\n\u001b[0m\u001b[91mgo: downloading github.com/OneOfOne/xxhash v1.2.2\n\u001b[0m\u001b[91mgo: downloading github.com/spaolacci/murmur3 v1.1.0\n\u001b[0m\u001b[91mgo: downloading github.com/pascaldekloe/goe v0.1.0\n\u001b[0m\u001b[91mgo: downloading github.com/kr/pretty v0.3.1\n\u001b[0m\u001b[91mgo: downloading github.com/rogpeppe/go-internal v1.9.0\ngo: downloading github.com/kr/text v0.2.0\n\u001b[0m\u001b[91mgo: downloading github.com/nxadm/tail v1.4.8\n\u001b[0m\u001b[91mgo: downloading gopkg.in/tomb.v1 v1.0.0-20141024135613-dd632973f1e7\n\u001b[0mRemoving intermediate container 3d6b55ace32c\n ---> a664f58c7f94\nStep 10/26 : RUN CGO_ENABLED=0 go build -trimpath -ldflags \"$LDFLAGS\" -o ./rr ./cmd/rr\n ---> Running in db3e683ebe56\nRemoving intermediate container db3e683ebe56\n ---> 27d0db9d8618\nStep 11/26 : RUN ./rr -v\n ---> Running in 9230c2d7c11b\nrr version undefined (build time: undefined, go1.19.4), OS: linux, arch: amd64\nRemoving intermediate container 9230c2d7c11b\n ---> d0d8f6470a8b\nStep 12/26 : FROM --platform=${TARGETPLATFORM:-linux/amd64} alpine:3\n3: Pulling from library/alpine\nDigest: sha256:8914eb54f968791faf6a8638949e480fef81e697984fba772b3976835194c6d4\nStatus: Downloaded newer image for alpine:3\n ---> 49176f190c7e\nStep 13/26 : RUN apk upgrade --update-cache --available &&     apk add openssl &&     rm -rf /var/cache/apk/*\n ---> Running in 7bb5faa8a961\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/3) Upgrading ca-certificates-bundle (20220614-r2 -> 20220614-r3)\n(2/3) Upgrading libcrypto3 (3.0.7-r0 -> 3.0.7-r2)\n(3/3) Upgrading libssl3 (3.0.7-r0 -> 3.0.7-r2)\nOK: 7 MiB in 15 packages\n(1/1) Installing openssl (3.0.7-r2)\nExecuting busybox-1.35.0-r29.trigger\nOK: 8 MiB in 16 packages\nRemoving intermediate container 7bb5faa8a961\n ---> 6d3c811185c5\nStep 14/26 : ARG APP_VERSION=\"undefined\"\n ---> Running in 9669d92cec66\nRemoving intermediate container 9669d92cec66\n ---> 47232174bbf7\nStep 15/26 : ARG BUILD_TIME=\"undefined\"\n ---> Running in 9a3d251eb1e3\nRemoving intermediate container 9a3d251eb1e3\n ---> acebd8e3112d\nStep 16/26 : LABEL org.opencontainers.image.title=\"roadrunner\"\n ---> Running in 4217d862a5f5\nRemoving intermediate container 4217d862a5f5\n ---> 0347e4f22850\nStep 17/26 : LABEL org.opencontainers.image.description=\"High-performance PHP application server and process manager written in Go and powered with plugins\"\n ---> Running in 29e4f0aa1a20\nRemoving intermediate container 29e4f0aa1a20\n ---> adb054f48f25\nStep 18/26 : LABEL org.opencontainers.image.url=\"https://roadrunner.dev\"\n ---> Running in 7c4545cacfdc\nRemoving intermediate container 7c4545cacfdc\n ---> 0807e221e52c\nStep 19/26 : LABEL org.opencontainers.image.source=\"https://github.com/roadrunner-server/roadrunner\"\n ---> Running in 8fc5704b650b\nRemoving intermediate container 8fc5704b650b\n ---> 32b71dd8c1f0\nStep 20/26 : LABEL org.opencontainers.image.vendor=\"SpiralScout\"\n ---> Running in 7efbab979394\nRemoving intermediate container 7efbab979394\n ---> 4a93f98e1147\nStep 21/26 : LABEL org.opencontainers.image.version=\"$APP_VERSION\"\n ---> Running in dd0eb6a98b00\nRemoving intermediate container dd0eb6a98b00\n ---> 1cec553795e0\nStep 22/26 : LABEL org.opencontainers.image.created=\"$BUILD_TIME\"\n ---> Running in e0c757ca0253\nRemoving intermediate container e0c757ca0253\n ---> 9db525b3fec5\nStep 23/26 : LABEL org.opencontainers.image.licenses=\"MIT\"\n ---> Running in 561c22570d7b\nRemoving intermediate container 561c22570d7b\n ---> a2e7986fbfde\nStep 24/26 : COPY --from=builder /src/rr /usr/bin/rr\n ---> 846bcc2be917\nStep 25/26 : COPY --from=builder /src/.rr.yaml /etc/rr.yaml\n ---> 0b522ede5b95\nStep 26/26 : ENTRYPOINT [\"/usr/bin/rr\"]\n ---> Running in 4daca00aba62\nRemoving intermediate container 4daca00aba62\n ---> 9b438ead5ad3\nSuccessfully built 9b438ead5ad3\nSuccessfully tagged roadrunner:latest\n","stderr":"","imageSize":63171124},"repair":{"startTime":1672955998162,"endTime":1672955998288,"violations":[],"repairedDockerfile":"# Image page: <https://hub.docker.com/_/golang>\nFROM --platform=${TARGETPLATFORM:-linux/amd64} golang:1.19-alpine as builder\n\n# app version and build date must be passed during image building (version without any prefix).\n# e.g.: `docker build --build-arg \"APP_VERSION=1.2.3\" --build-arg \"BUILD_TIME=$(date +%FT%T%z)\" .`\nARG APP_VERSION=\"undefined\"\nARG BUILD_TIME=\"undefined\"\n\nCOPY . /src\n\nWORKDIR /src\n\n# arguments to pass on each go tool link invocation\nENV LDFLAGS=\"-s \\\n-X github.com/roadrunner-server/roadrunner/v2/internal/meta.version=$APP_VERSION \\\n-X github.com/roadrunner-server/roadrunner/v2/internal/meta.buildTime=$BUILD_TIME\"\n\n# compile binary file\nRUN set -x\nRUN go mod download\nRUN go mod tidy\nRUN CGO_ENABLED=0 go build -trimpath -ldflags \"$LDFLAGS\" -o ./rr ./cmd/rr\nRUN ./rr -v\n\nFROM --platform=${TARGETPLATFORM:-linux/amd64} alpine:3\n\nRUN apk upgrade --update-cache --available && \\\n    apk add openssl && \\\n    rm -rf /var/cache/apk/*\n\n# use same build arguments for image labels\nARG APP_VERSION=\"undefined\"\nARG BUILD_TIME=\"undefined\"\n\n# https://github.com/opencontainers/image-spec/blob/main/annotations.md\nLABEL org.opencontainers.image.title=\"roadrunner\"\nLABEL org.opencontainers.image.description=\"High-performance PHP application server and process manager written in Go and powered with plugins\"\nLABEL org.opencontainers.image.url=\"https://roadrunner.dev\"\nLABEL org.opencontainers.image.source=\"https://github.com/roadrunner-server/roadrunner\"\nLABEL org.opencontainers.image.vendor=\"SpiralScout\"\nLABEL org.opencontainers.image.version=\"$APP_VERSION\"\nLABEL org.opencontainers.image.created=\"$BUILD_TIME\"\nLABEL org.opencontainers.image.licenses=\"MIT\"\n\n# copy required files from builder image\nCOPY --from=builder /src/rr /usr/bin/rr\nCOPY --from=builder /src/.rr.yaml /etc/rr.yaml\n\n# use roadrunner binary as image entrypoint\nENTRYPOINT [\"/usr/bin/rr\"]\n"}}