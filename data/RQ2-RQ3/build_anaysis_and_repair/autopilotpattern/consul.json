{"repository":"https://github.com/autopilotpattern/consul","dockerfilePath":"Dockerfile","startTime":1672060573826,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/autopilotpattern/consul'...\n","error":null,"commit":"af9a5ae5863409565df2f61d6883b8c98576a870"},"originalBuild":{"startTimestamp":1672060574624,"endTimestamp":1672060600113,"error":null,"stdout":"Sending build context to Docker daemon  178.7kB\r\r\nStep 1/13 : FROM alpine:3.6\n3.6: Pulling from library/alpine\n5a3ea8efae5d: Pulling fs layer\n5a3ea8efae5d: Verifying Checksum\n5a3ea8efae5d: Download complete\n5a3ea8efae5d: Pull complete\nDigest: sha256:66790a2b79e1ea3e1dabac43990c54aca5d1ddf268d9a5a0285e4167c8b24475\nStatus: Downloaded newer image for alpine:3.6\n ---> 43773d1dba76\nStep 2/13 : RUN apk --no-cache     add         curl         bash         ca-certificates\n ---> Running in d24a3fc00d48\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.6/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.6/community/x86_64/APKINDEX.tar.gz\n(1/9) Installing ncurses-terminfo-base (6.0_p20171125-r1)\n(2/9) Installing ncurses-terminfo (6.0_p20171125-r1)\n(3/9) Installing ncurses-libs (6.0_p20171125-r1)\n(4/9) Installing readline (6.3.008-r5)\n(5/9) Installing bash (4.3.48-r1)\nExecuting bash-4.3.48-r1.post-install\n(6/9) Installing ca-certificates (20161130-r3)\n(7/9) Installing libssh2 (1.8.2-r0)\n(8/9) Installing libcurl (7.61.1-r2)\n(9/9) Installing curl (7.61.1-r2)\nExecuting busybox-1.26.2-r11.trigger\nExecuting ca-certificates-20161130-r3.trigger\nOK: 14 MiB in 22 packages\nRemoving intermediate container d24a3fc00d48\n ---> 8a5d1aba8b09\nStep 3/13 : ENV CONSUL_VERSION=1.0.0\n ---> Running in 374ced3a5bb1\nRemoving intermediate container 374ced3a5bb1\n ---> 2232802f985e\nStep 4/13 : RUN export CONSUL_CHECKSUM=585782e1fb25a2096e1776e2da206866b1d9e1f10b71317e682e03125f22f479     && export archive=consul_${CONSUL_VERSION}_linux_amd64.zip     && curl -Lso /tmp/${archive} https://releases.hashicorp.com/consul/${CONSUL_VERSION}/${archive}     && echo \"${CONSUL_CHECKSUM}  /tmp/${archive}\" | sha256sum -c     && cd /bin     && unzip /tmp/${archive}     && chmod +x /bin/consul     && rm /tmp/${archive}\n ---> Running in bd829da2c64f\n/tmp/consul_1.0.0_linux_amd64.zip: OK\nArchive:  /tmp/consul_1.0.0_linux_amd64.zip\n  inflating: consul\nRemoving intermediate container bd829da2c64f\n ---> d77494f6b3b5\nStep 5/13 : ENV CONTAINERPILOT_VER=3.6.0\n ---> Running in fc6f379b82b6\nRemoving intermediate container fc6f379b82b6\n ---> c1274ca21e1e\nStep 6/13 : ENV CONTAINERPILOT=/etc/containerpilot.json5\n ---> Running in 9eac72e1788a\nRemoving intermediate container 9eac72e1788a\n ---> e0b855d9fd02\nStep 7/13 : RUN export CONTAINERPILOT_CHECKSUM=1248784ff475e6fda69ebf7a2136adbfb902f74b     && curl -Lso /tmp/containerpilot.tar.gz          \"https://github.com/joyent/containerpilot/releases/download/${CONTAINERPILOT_VER}/containerpilot-${CONTAINERPILOT_VER}.tar.gz\"     && echo \"${CONTAINERPILOT_CHECKSUM}  /tmp/containerpilot.tar.gz\" | sha1sum -c     && tar zxf /tmp/containerpilot.tar.gz -C /usr/local/bin     && rm /tmp/containerpilot.tar.gz\n ---> Running in 7b55db352a9f\n/tmp/containerpilot.tar.gz: OK\nRemoving intermediate container 7b55db352a9f\n ---> 1363d4a23c68\nStep 8/13 : COPY etc/containerpilot.json5 /etc/\n ---> e516e94a2a4f\nStep 9/13 : COPY etc/consul.hcl /etc/consul/\n ---> b7a4a0db59a4\nStep 10/13 : COPY bin/* /usr/local/bin/\n ---> 58e7f25083de\nStep 11/13 : VOLUME [\"/data\"]\n ---> Running in 8e8e068bf46e\nRemoving intermediate container 8e8e068bf46e\n ---> 6f685d985db4\nStep 12/13 : EXPOSE 8300 8301 8301/udp 8302 8302/udp 8400 8500 53 53/udp\n ---> Running in 9626af5405b7\nRemoving intermediate container 9626af5405b7\n ---> f921345ebb99\nStep 13/13 : ENV SHELL /bin/bash\n ---> Running in c3c675a6bcd5\nRemoving intermediate container c3c675a6bcd5\n ---> b2f4290a6e6c\nSuccessfully built b2f4290a6e6c\nSuccessfully tagged consul:latest\n","stderr":"","imageSize":62876742},"repair":{"violations":[{"name":"curlUseFlagF","position":{"start":13,"end":13,"columnStart":7,"columnEnd":99}},{"name":"curlUseFlagF","position":{"start":24,"end":25,"columnStart":7,"columnEnd":135}},{"name":"sha256sumEchoOneSpaces","position":{"start":14,"end":14,"columnStart":7,"columnEnd":64}}],"repairedDockerfile":"FROM alpine:3.6\n\n# Alpine packages\nRUN apk --no-cache \\\n    add \\\n        curl \\\n        bash \\\n        ca-certificates\n\n# The Consul binary\nENV CONSUL_VERSION=1.0.0\nRUN export CONSUL_CHECKSUM=585782e1fb25a2096e1776e2da206866b1d9e1f10b71317e682e03125f22f479 \\\n    && export archive=consul_${CONSUL_VERSION}_linux_amd64.zip \\\n    && curl -f -Lso /tmp/${archive} https://releases.hashicorp.com/consul/${CONSUL_VERSION}/${archive} \\\n    && echo \"${CONSUL_CHECKSUM} /tmp/${archive}\" | sha256sum -c \\\n    && cd /bin \\\n    && unzip /tmp/${archive} \\\n    && chmod +x /bin/consul \\\n    && rm /tmp/${archive}\n\n# Add Containerpilot and set its configuration\nENV CONTAINERPILOT_VER=3.6.0\nENV CONTAINERPILOT=/etc/containerpilot.json5\nRUN export CONTAINERPILOT_CHECKSUM=1248784ff475e6fda69ebf7a2136adbfb902f74b \\\n    && curl -f -Lso /tmp/containerpilot.tar.gz \\\n         \"https://github.com/joyent/containerpilot/releases/download/${CONTAINERPILOT_VER}/containerpilot-${CONTAINERPILOT_VER}.tar.gz\" \\\n    && echo \"${CONTAINERPILOT_CHECKSUM}  /tmp/containerpilot.tar.gz\" | sha1sum -c \\\n    && tar zxf /tmp/containerpilot.tar.gz -C /usr/local/bin \\\n    && rm /tmp/containerpilot.tar.gz\n\n# configuration files and bootstrap scripts\nCOPY etc/containerpilot.json5 /etc/\nCOPY etc/consul.hcl /etc/consul/\nCOPY bin/* /usr/local/bin/\n\n# Put Consul data on a separate volume (via etc/consul.hcl) to avoid filesystem\n# performance issues with Docker image layers. Not necessary on Triton, but...\nVOLUME [\"/data\"]\n\n# We don't need to expose these ports in order for other containers on Triton\n# to reach this container in the default networking environment, but if we\n# leave this here then we get the ports as well-known environment variables\n# for purposes of linking.\nEXPOSE 8300 8301 8301/udp 8302 8302/udp 8400 8500 53 53/udp\n\n#ENV GOMAXPROCS 2\nENV SHELL /bin/bash\n"},"repairedBuild":{"startTimestamp":1672060600523,"endTimestamp":1672060611305,"error":{"code":1,"killed":false,"signal":null,"cmd":"docker build --no-cache --force-rm -t consul:latest -f /tmp/dinghy-analysis/autopilotpattern/consul/Dockerfile ."},"stdout":"Sending build context to Docker daemon  178.7kB\r\r\nStep 1/13 : FROM alpine:3.6\n ---> 43773d1dba76\nStep 2/13 : RUN apk --no-cache     add         curl         bash         ca-certificates\n ---> Running in ea15035cee49\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.6/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.6/community/x86_64/APKINDEX.tar.gz\n(1/9) Installing ncurses-terminfo-base (6.0_p20171125-r1)\n(2/9) Installing ncurses-terminfo (6.0_p20171125-r1)\n(3/9) Installing ncurses-libs (6.0_p20171125-r1)\n(4/9) Installing readline (6.3.008-r5)\n(5/9) Installing bash (4.3.48-r1)\nExecuting bash-4.3.48-r1.post-install\n(6/9) Installing ca-certificates (20161130-r3)\n(7/9) Installing libssh2 (1.8.2-r0)\n(8/9) Installing libcurl (7.61.1-r2)\n(9/9) Installing curl (7.61.1-r2)\nExecuting busybox-1.26.2-r11.trigger\nExecuting ca-certificates-20161130-r3.trigger\nOK: 14 MiB in 22 packages\nRemoving intermediate container ea15035cee49\n ---> ec834583e815\nStep 3/13 : ENV CONSUL_VERSION=1.0.0\n ---> Running in 42e7996065b2\nRemoving intermediate container 42e7996065b2\n ---> 30df5a1da644\nStep 4/13 : RUN export CONSUL_CHECKSUM=585782e1fb25a2096e1776e2da206866b1d9e1f10b71317e682e03125f22f479     && export archive=consul_${CONSUL_VERSION}_linux_amd64.zip     && curl -f -Lso /tmp/${archive} https://releases.hashicorp.com/consul/${CONSUL_VERSION}/${archive}     && echo \"${CONSUL_CHECKSUM} /tmp/${archive}\" | sha256sum -c     && cd /bin     && unzip /tmp/${archive}     && chmod +x /bin/consul     && rm /tmp/${archive}\n ---> Running in 2fa17146d528\n\u001b[91msha256sum: WARNING: 1 of 1 computed checksums did NOT match\n\u001b[0mRemoving intermediate container 2fa17146d528\n","stderr":"The command '/bin/sh -c export CONSUL_CHECKSUM=585782e1fb25a2096e1776e2da206866b1d9e1f10b71317e682e03125f22f479     && export archive=consul_${CONSUL_VERSION}_linux_amd64.zip     && curl -f -Lso /tmp/${archive} https://releases.hashicorp.com/consul/${CONSUL_VERSION}/${archive}     && echo \"${CONSUL_CHECKSUM} /tmp/${archive}\" | sha256sum -c     && cd /bin     && unzip /tmp/${archive}     && chmod +x /bin/consul     && rm /tmp/${archive}' returned a non-zero code: 1\n"},"endTime":1672060611375}