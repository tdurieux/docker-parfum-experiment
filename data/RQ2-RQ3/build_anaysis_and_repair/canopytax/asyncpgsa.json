{"repository":"https://github.com/canopytax/asyncpgsa","dockerfilePath":"Dockerfile","startTime":1672981021945,"endTime":1672981101475,"clone":{"startTime":1672981021946,"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/canopytax/asyncpgsa'...\n","error":null,"endTime":1672981022720,"commit":"b2445202a2484494d88fc5c484d5296991973d78"},"originalBuild":{"startTime":1672981022807,"endTime":1672981068868,"error":null,"stdout":"Sending build context to Docker daemon  271.9kB\r\r\nStep 1/5 : FROM python:3.8-alpine\n3.8-alpine: Pulling from library/python\nc158987b0551: Already exists\n7ec3a91b66d9: Pulling fs layer\nf9fb575d7a9e: Pulling fs layer\n59c63ce3438e: Pulling fs layer\n4ceace26d08f: Pulling fs layer\n4ceace26d08f: Waiting\n59c63ce3438e: Verifying Checksum\n59c63ce3438e: Download complete\n7ec3a91b66d9: Verifying Checksum\n7ec3a91b66d9: Download complete\nf9fb575d7a9e: Verifying Checksum\nf9fb575d7a9e: Download complete\n7ec3a91b66d9: Pull complete\n4ceace26d08f: Verifying Checksum\n4ceace26d08f: Download complete\nf9fb575d7a9e: Pull complete\n59c63ce3438e: Pull complete\n4ceace26d08f: Pull complete\nDigest: sha256:7c7063333021414512e2d47232eae8cbdec46a2724265c6817f9eab29ca6e3c8\nStatus: Downloaded newer image for python:3.8-alpine\n ---> 13f1e3678aa9\nStep 2/5 : RUN apk update &&     apk add     gcc     musl-dev     postgresql-dev\n ---> Running in 6cbcad07ce20\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\nv3.17.0-332-g13963e2526 [https://dl-cdn.alpinelinux.org/alpine/v3.17/main]\nv3.17.0-334-g83a039d241 [https://dl-cdn.alpinelinux.org/alpine/v3.17/community]\nOK: 17819 distinct packages available\n(1/35) Upgrading libcrypto3 (3.0.7-r0 -> 3.0.7-r2)\n(2/35) Upgrading libssl3 (3.0.7-r0 -> 3.0.7-r2)\n(3/35) Installing libgcc (12.2.1_git20220924-r4)\n(4/35) Installing libstdc++ (12.2.1_git20220924-r4)\n(5/35) Installing binutils (2.39-r2)\n(6/35) Installing libgomp (12.2.1_git20220924-r4)\n(7/35) Installing libatomic (12.2.1_git20220924-r4)\n(8/35) Installing gmp (6.2.1-r2)\n(9/35) Installing isl25 (0.25-r0)\n(10/35) Installing mpfr4 (4.1.0-r0)\n(11/35) Installing mpc1 (1.2.1-r1)\n(12/35) Installing gcc (12.2.1_git20220924-r4)\n(13/35) Installing musl-dev (1.2.3-r4)\n(14/35) Installing libpq (15.1-r0)\n(15/35) Installing pkgconf (1.9.3-r0)\n(16/35) Installing openssl-dev (3.0.7-r2)\n(17/35) Installing libpq-dev (15.1-r0)\n(18/35) Installing libecpg (15.1-r0)\n(19/35) Installing libecpg-dev (15.1-r0)\n(20/35) Installing libstdc++-dev (12.2.1_git20220924-r4)\n(21/35) Installing libxml2 (2.10.3-r1)\n(22/35) Installing llvm14-libs (14.0.6-r7)\n(23/35) Installing clang14-libs (14.0.6-r1)\n(24/35) Installing clang14-libclang (14.0.6-r1)\n(25/35) Installing clang14 (14.0.6-r1)\n(26/35) Installing icu-data-en (72.1-r1)\nExecuting icu-data-en-72.1-r1.post-install\n\u001b[91m*\n* If you need ICU with non-English locales and legacy charset support, install\n* package icu-data-full.\n*\n\u001b[0m(27/35) Installing icu-libs (72.1-r1)\n(28/35) Installing icu (72.1-r1)\n(29/35) Installing icu-dev (72.1-r1)\n(30/35) Installing llvm14 (14.0.6-r7)\n(31/35) Installing lz4-libs (1.9.4-r1)\n(32/35) Installing lz4-dev (1.9.4-r1)\n(33/35) Installing zstd-libs (1.5.2-r9)\n(34/35) Installing zstd-dev (1.5.2-r9)\n(35/35) Installing postgresql15-dev (15.1-r0)\nExecuting busybox-1.35.0-r29.trigger\nExecuting ca-certificates-20220614-r2.trigger\nOK: 550 MiB in 70 packages\nRemoving intermediate container 6cbcad07ce20\n ---> d65cbb376e8b\nStep 3/5 : ADD dev-requirements.txt /repo/dev-requirements.txt\n ---> 98914553dc2b\nStep 4/5 : RUN pip install -r /repo/dev-requirements.txt\n ---> Running in 718aa3305658\nCollecting asyncpg\n  Downloading asyncpg-0.27.0-cp38-cp38-musllinux_1_1_x86_64.whl (3.6 MB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 3.6/3.6 MB 8.3 MB/s eta 0:00:00\nCollecting pytest\n  Downloading pytest-7.2.0-py3-none-any.whl (316 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 316.8/316.8 KB 13.0 MB/s eta 0:00:00\nCollecting pytest-asyncio\n  Downloading pytest_asyncio-0.20.3-py3-none-any.whl (12 kB)\nCollecting sqlalchemy\n  Downloading SQLAlchemy-1.4.46.tar.gz (8.5 MB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 8.5/8.5 MB 48.1 MB/s eta 0:00:00\n  Preparing metadata (setup.py): started\n  Preparing metadata (setup.py): finished with status 'done'\nCollecting psycopg2-binary\n  Downloading psycopg2_binary-2.9.5-cp38-cp38-musllinux_1_1_x86_64.whl (1.9 MB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 1.9/1.9 MB 41.9 MB/s eta 0:00:00\nCollecting exceptiongroup>=1.0.0rc8\n  Downloading exceptiongroup-1.1.0-py3-none-any.whl (14 kB)\nCollecting packaging\n  Downloading packaging-22.0-py3-none-any.whl (42 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 42.6/42.6 KB 3.2 MB/s eta 0:00:00\nCollecting attrs>=19.2.0\n  Downloading attrs-22.2.0-py3-none-any.whl (60 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 60.0/60.0 KB 5.5 MB/s eta 0:00:00\nCollecting pluggy<2.0,>=0.12\n  Downloading pluggy-1.0.0-py2.py3-none-any.whl (13 kB)\nCollecting tomli>=1.0.0\n  Downloading tomli-2.0.1-py3-none-any.whl (12 kB)\nCollecting iniconfig\n  Downloading iniconfig-1.1.1-py2.py3-none-any.whl (5.0 kB)\nCollecting greenlet!=0.4.17\n  Downloading greenlet-2.0.1-cp38-cp38-musllinux_1_1_x86_64.whl (1.1 MB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 1.1/1.1 MB 38.0 MB/s eta 0:00:00\nBuilding wheels for collected packages: sqlalchemy\n  Building wheel for sqlalchemy (setup.py): started\n  Building wheel for sqlalchemy (setup.py): finished with status 'done'\n  Created wheel for sqlalchemy: filename=SQLAlchemy-1.4.46-cp38-cp38-linux_x86_64.whl size=1563999 sha256=9e87441a7eb9d0d6aaf991968b3310e06c6f74ffed1341b98a11c85007927835\n  Stored in directory: /root/.cache/pip/wheels/77/73/31/355312ea72be42bf208556c6c852a6d058de311c54bc00264f\nSuccessfully built sqlalchemy\nInstalling collected packages: iniconfig, tomli, psycopg2-binary, pluggy, packaging, greenlet, exceptiongroup, attrs, asyncpg, sqlalchemy, pytest, pytest-asyncio\nSuccessfully installed asyncpg-0.27.0 attrs-22.2.0 exceptiongroup-1.1.0 greenlet-2.0.1 iniconfig-1.1.1 packaging-22.0 pluggy-1.0.0 psycopg2-binary-2.9.5 pytest-7.2.0 pytest-asyncio-0.20.3 sqlalchemy-1.4.46 tomli-2.0.1\n\u001b[91mWARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv\n\u001b[0m\u001b[91mWARNING: You are using pip version 22.0.4; however, version 22.3.1 is available.\nYou should consider upgrading via the '/usr/local/bin/python -m pip install --upgrade pip' command.\n\u001b[0mRemoving intermediate container 718aa3305658\n ---> fb014c5f06f7\nStep 5/5 : ADD . /repo\n ---> 9c9a756f7afb\nSuccessfully built 9c9a756f7afb\nSuccessfully tagged asyncpgsa:latest\n","stderr":"","imageSize":674465929},"repair":{"startTime":1672981068932,"endTime":1672981068983,"violations":[{"name":"pipUseNoCacheDir","position":{"start":9,"end":9,"columnStart":4,"columnEnd":45}},{"name":"apkAddUseNoCache","position":{"start":3,"end":6,"columnStart":4,"columnEnd":18}}],"repairedDockerfile":"FROM python:3.8-alpine\n\nRUN apk update && \\\n    apk add --no-cache \\\n    gcc \\\n    musl-dev \\\n    postgresql-dev\n\nADD dev-requirements.txt /repo/dev-requirements.txt\nRUN pip install --no-cache-dir -r /repo/dev-requirements.txt\n\nADD . /repo\n"},"repairedBuild":{"startTime":1672981069317,"endTime":1672981100918,"error":null,"stdout":"Sending build context to Docker daemon  271.9kB\r\r\nStep 1/5 : FROM python:3.8-alpine\n ---> 13f1e3678aa9\nStep 2/5 : RUN apk update &&     apk add --no-cache     gcc     musl-dev     postgresql-dev\n ---> Running in dc35c51da8cb\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\nv3.17.0-332-g13963e2526 [https://dl-cdn.alpinelinux.org/alpine/v3.17/main]\nv3.17.0-334-g83a039d241 [https://dl-cdn.alpinelinux.org/alpine/v3.17/community]\nOK: 17819 distinct packages available\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/35) Upgrading libcrypto3 (3.0.7-r0 -> 3.0.7-r2)\n(2/35) Upgrading libssl3 (3.0.7-r0 -> 3.0.7-r2)\n(3/35) Installing libgcc (12.2.1_git20220924-r4)\n(4/35) Installing libstdc++ (12.2.1_git20220924-r4)\n(5/35) Installing binutils (2.39-r2)\n(6/35) Installing libgomp (12.2.1_git20220924-r4)\n(7/35) Installing libatomic (12.2.1_git20220924-r4)\n(8/35) Installing gmp (6.2.1-r2)\n(9/35) Installing isl25 (0.25-r0)\n(10/35) Installing mpfr4 (4.1.0-r0)\n(11/35) Installing mpc1 (1.2.1-r1)\n(12/35) Installing gcc (12.2.1_git20220924-r4)\n(13/35) Installing musl-dev (1.2.3-r4)\n(14/35) Installing libpq (15.1-r0)\n(15/35) Installing pkgconf (1.9.3-r0)\n(16/35) Installing openssl-dev (3.0.7-r2)\n(17/35) Installing libpq-dev (15.1-r0)\n(18/35) Installing libecpg (15.1-r0)\n(19/35) Installing libecpg-dev (15.1-r0)\n(20/35) Installing libstdc++-dev (12.2.1_git20220924-r4)\n(21/35) Installing libxml2 (2.10.3-r1)\n(22/35) Installing llvm14-libs (14.0.6-r7)\n(23/35) Installing clang14-libs (14.0.6-r1)\n(24/35) Installing clang14-libclang (14.0.6-r1)\n(25/35) Installing clang14 (14.0.6-r1)\n(26/35) Installing icu-data-en (72.1-r1)\nExecuting icu-data-en-72.1-r1.post-install\n\u001b[91m*\n* If you need ICU with non-English locales and legacy charset support, install\n* package icu-data-full.\n*\n\u001b[0m(27/35) Installing icu-libs (72.1-r1)\n(28/35) Installing icu (72.1-r1)\n(29/35) Installing icu-dev (72.1-r1)\n(30/35) Installing llvm14 (14.0.6-r7)\n(31/35) Installing lz4-libs (1.9.4-r1)\n(32/35) Installing lz4-dev (1.9.4-r1)\n(33/35) Installing zstd-libs (1.5.2-r9)\n(34/35) Installing zstd-dev (1.5.2-r9)\n(35/35) Installing postgresql15-dev (15.1-r0)\nExecuting busybox-1.35.0-r29.trigger\nExecuting ca-certificates-20220614-r2.trigger\nOK: 550 MiB in 70 packages\nRemoving intermediate container dc35c51da8cb\n ---> e0ba8e26294a\nStep 3/5 : ADD dev-requirements.txt /repo/dev-requirements.txt\n ---> 037627af23e8\nStep 4/5 : RUN pip install --no-cache-dir -r /repo/dev-requirements.txt\n ---> Running in 2ae8ad62a527\nCollecting asyncpg\n  Downloading asyncpg-0.27.0-cp38-cp38-musllinux_1_1_x86_64.whl (3.6 MB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 3.6/3.6 MB 76.5 MB/s eta 0:00:00\nCollecting pytest\n  Downloading pytest-7.2.0-py3-none-any.whl (316 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 316.8/316.8 KB 205.1 MB/s eta 0:00:00\nCollecting pytest-asyncio\n  Downloading pytest_asyncio-0.20.3-py3-none-any.whl (12 kB)\nCollecting sqlalchemy\n  Downloading SQLAlchemy-1.4.46.tar.gz (8.5 MB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 8.5/8.5 MB 59.8 MB/s eta 0:00:00\n  Preparing metadata (setup.py): started\n  Preparing metadata (setup.py): finished with status 'done'\nCollecting psycopg2-binary\n  Downloading psycopg2_binary-2.9.5-cp38-cp38-musllinux_1_1_x86_64.whl (1.9 MB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 1.9/1.9 MB 85.4 MB/s eta 0:00:00\nCollecting pluggy<2.0,>=0.12\n  Downloading pluggy-1.0.0-py2.py3-none-any.whl (13 kB)\nCollecting tomli>=1.0.0\n  Downloading tomli-2.0.1-py3-none-any.whl (12 kB)\nCollecting attrs>=19.2.0\n  Downloading attrs-22.2.0-py3-none-any.whl (60 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 60.0/60.0 KB 198.9 MB/s eta 0:00:00\nCollecting exceptiongroup>=1.0.0rc8\n  Downloading exceptiongroup-1.1.0-py3-none-any.whl (14 kB)\nCollecting iniconfig\n  Downloading iniconfig-1.1.1-py2.py3-none-any.whl (5.0 kB)\nCollecting packaging\n  Downloading packaging-22.0-py3-none-any.whl (42 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 42.6/42.6 KB 157.7 MB/s eta 0:00:00\nCollecting greenlet!=0.4.17\n  Downloading greenlet-2.0.1-cp38-cp38-musllinux_1_1_x86_64.whl (1.1 MB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 1.1/1.1 MB 138.3 MB/s eta 0:00:00\nBuilding wheels for collected packages: sqlalchemy\n  Building wheel for sqlalchemy (setup.py): started\n  Building wheel for sqlalchemy (setup.py): finished with status 'done'\n  Created wheel for sqlalchemy: filename=SQLAlchemy-1.4.46-cp38-cp38-linux_x86_64.whl size=1563999 sha256=b680fcb6efffc17522975fc6c8dbd10e6cce62e1bdcaeb623a4960dd949f06b0\n  Stored in directory: /tmp/pip-ephem-wheel-cache-8vwp2rsu/wheels/77/73/31/355312ea72be42bf208556c6c852a6d058de311c54bc00264f\nSuccessfully built sqlalchemy\nInstalling collected packages: iniconfig, tomli, psycopg2-binary, pluggy, packaging, greenlet, exceptiongroup, attrs, asyncpg, sqlalchemy, pytest, pytest-asyncio\nSuccessfully installed asyncpg-0.27.0 attrs-22.2.0 exceptiongroup-1.1.0 greenlet-2.0.1 iniconfig-1.1.1 packaging-22.0 pluggy-1.0.0 psycopg2-binary-2.9.5 pytest-7.2.0 pytest-asyncio-0.20.3 sqlalchemy-1.4.46 tomli-2.0.1\n\u001b[91mWARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv\n\u001b[0m\u001b[91mWARNING: You are using pip version 22.0.4; however, version 22.3.1 is available.\nYou should consider upgrading via the '/usr/local/bin/python -m pip install --upgrade pip' command.\n\u001b[0mRemoving intermediate container 2ae8ad62a527\n ---> a503dc003e13\nStep 5/5 : ADD . /repo\n ---> 2ce40b6057e8\nSuccessfully built 2ce40b6057e8\nSuccessfully tagged asyncpgsa:latest\n","stderr":"","imageSize":656793226}}