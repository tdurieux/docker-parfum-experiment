{"repository":"https://github.com/weareopensource/node","dockerfilePath":"Dockerfile","startTime":1672982434442,"endTime":1672982637470,"clone":{"startTime":1672982434442,"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/weareopensource/node'...\n","error":null,"endTime":1672982435551,"commit":"9ed4e547ab4e27a58829d7e442e72e625d6daf8d"},"originalBuild":{"startTime":1672982435639,"endTime":1672982477091,"error":null,"stdout":"Sending build context to Docker daemon  6.147MB\r\r\nStep 1/8 : FROM node:lts-slim\nlts-slim: Pulling from library/node\n3f4ca61aafcd: Already exists\n00fde01815c9: Already exists\n723367e6ef2d: Pulling fs layer\n907e6809ddf0: Pulling fs layer\n128624e9c76a: Pulling fs layer\n128624e9c76a: Download complete\n907e6809ddf0: Verifying Checksum\n907e6809ddf0: Download complete\n723367e6ef2d: Verifying Checksum\n723367e6ef2d: Download complete\n723367e6ef2d: Pull complete\n907e6809ddf0: Pull complete\n128624e9c76a: Pull complete\nDigest: sha256:70bf84739156657c85440e6a55a3d77a7cac668f9c4c3c44005bc29bdc529db7\nStatus: Downloaded newer image for node:lts-slim\n ---> a26e85f2ac41\nStep 2/8 : USER node\n ---> Running in 87a79594a883\nRemoving intermediate container 87a79594a883\n ---> cfcb676c4140\nStep 3/8 : WORKDIR /home/node\n ---> Running in a1dacddc5329\nRemoving intermediate container a1dacddc5329\n ---> bb8b686b53ba\nStep 4/8 : COPY --chown=node:node package*.json ./\n ---> 6c5f416b79f4\nStep 5/8 : RUN npm install --production\n ---> Running in 3c235b69620c\n\u001b[91mnpm\u001b[0m\u001b[91m WARN config production Use `--omit=dev` instead.\n\u001b[0m\u001b[91mnpm\u001b[0m\u001b[91m WARN deprecated multer@1.4.4: Multer 1.x is affected by CVE-2022-24434. This is fixed in v1.4.4-lts.1 which drops support for versions of Node.js before 6. Please upgrade to at least Node.js 6 and version 1.4.4-lts.1 of Multer. If you need support for older versions of Node.js, we are open to accepting patches that would fix the CVE on the main 1.x release line, whilst maintaining compatibility with Node.js 0.10.\n\u001b[0m\u001b[91mnpm WARN deprecated swig@1.4.2: This package is no longer maintained\n\u001b[0m\u001b[91mnpm WARN deprecated @hapi/formula@2.0.0: Moved to 'npm install @sideway/formula'\n\u001b[0m\u001b[91mnpm WARN deprecated @hapi/joi@17.1.1: Switch to 'npm install joi'\n\u001b[0m\u001b[91mnpm WARN deprecated @hapi/pinpoint@2.0.0: Moved to 'npm install @sideway/pinpoint'\n\u001b[0m\u001b[91mnpm WARN deprecated @hapi/address@4.1.0: Moved to 'npm install @sideway/address'\n\u001b[0m\u001b[91mnpm WARN deprecated bson@1.0.9: Fixed a critical issue with BSON serialization documented in CVE-2019-2391, see https://bit.ly/2KcpXdo for more details\n\u001b[0m\nadded 850 packages, and audited 851 packages in 12s\n\n58 packages are looking for funding\n  run `npm fund` for details\n\n15 vulnerabilities (3 moderate, 11 high, 1 critical)\n\nTo address issues that do not require attention, run:\n  npm audit fix\n\nTo address all issues possible (including breaking changes), run:\n  npm audit fix --force\n\nSome issues need review, and may require choosing\na different dependency.\n\nRun `npm audit` for details.\n\u001b[91mnpm notice \nnpm notice New major version of npm available! 8.19.2 -> 9.2.0\n\u001b[0m\u001b[91mnpm notice Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm notice Run `npm install -g npm@9.2.0` to update!\nnpm \u001b[0m\u001b[91mnotice \n\u001b[0mRemoving intermediate container 3c235b69620c\n ---> e4c8554994d4\nStep 6/8 : COPY --chown=node:node . .\n ---> b7cf4c1b72e7\nStep 7/8 : EXPOSE 3000 4200\n ---> Running in 2da4ed085db2\nRemoving intermediate container 2da4ed085db2\n ---> d84993c5573d\nStep 8/8 : CMD [ \"node\", \"server.js\" ]\n ---> Running in 423b5b8b463d\nRemoving intermediate container 423b5b8b463d\n ---> 237a27a44900\nSuccessfully built 237a27a44900\nSuccessfully tagged node:latest\n","stderr":"","imageSize":532480110},"repair":{"startTime":1672982477181,"endTime":1672982477230,"violations":[{"name":"npmCacheCleanAfterInstall","position":{"start":10,"end":10,"columnStart":4,"columnEnd":28}}],"repairedDockerfile":"FROM node:lts-slim\n\n# switch user\nUSER node\n\n# Create app directory\nWORKDIR /home/node\n\n# Install app dependencies & setup\nCOPY --chown=node:node package*.json ./\nRUN npm install --production && npm cache clean --force;\nCOPY --chown=node:node . .\n\n# Expose\nEXPOSE 3000 4200\n\n# Command to run\nCMD [ \"node\", \"server.js\" ]"},"repairedBuild":{"startTime":1672982477685,"endTime":1672982636998,"error":null,"stdout":"Sending build context to Docker daemon  6.147MB\r\r\nStep 1/8 : FROM node:lts-slim\n ---> a26e85f2ac41\nStep 2/8 : USER node\n ---> Running in b3a267108fb2\nRemoving intermediate container b3a267108fb2\n ---> 2ec197e32498\nStep 3/8 : WORKDIR /home/node\n ---> Running in f641dc847a68\nRemoving intermediate container f641dc847a68\n ---> 8b36177dc2a5\nStep 4/8 : COPY --chown=node:node package*.json ./\n ---> 4866be1fecd5\nStep 5/8 : RUN npm install --production && npm cache clean --force;\n ---> Running in 1211b80bea34\n\u001b[91mnpm WARN \u001b[0m\u001b[91mconfig production Use `--omit=dev` instead.\n\u001b[0m\u001b[91mnpm WARN deprecated multer@1.4.4: Multer 1.x is affected by CVE-2022-24434. This is fixed in v1.4.4-lts.1 which drops support for versions of Node.js before 6. Please upgrade to at least Node.js 6 and version 1.4.4-lts.1 of Multer. If you need support for older versions of Node.js, we are open to accepting patches that would fix the CVE on the main 1.x release line, whilst maintaining compatibility with Node.js 0.10.\n\u001b[0m\u001b[91mnpm WARN deprecated @hapi/formula@2.0.0: Moved to 'npm install @sideway/formula'\n\u001b[0m\u001b[91mnpm WARN deprecated @hapi/pinpoint@2.0.0: Moved to 'npm install @sideway/pinpoint'\n\u001b[0m\u001b[91mnpm WARN deprecated @hapi/address@4.1.0: Moved to 'npm install @sideway/address'\n\u001b[0m\u001b[91mnpm WARN deprecated swig@1.4.2: This package is no longer maintained\n\u001b[0m\u001b[91mnpm WARN deprecated @hapi/joi@17.1.1: Switch to 'npm install joi'\n\u001b[0m\u001b[91mnpm WARN deprecated bson@1.0.9: Fixed a critical issue with BSON serialization documented in CVE-2019-2391, see https://bit.ly/2KcpXdo for more details\n\u001b[0m\nadded 850 packages, and audited 851 packages in 2m\n\n58 packages are looking for funding\n  run `npm fund` for details\n\n15 vulnerabilities (3 moderate, 11 high, 1 critical)\n\nTo address issues that do not require attention, run:\n  npm audit fix\n\nTo address all issues possible (including breaking changes), run:\n  npm audit fix --force\n\nSome issues need review, and may require choosing\na different dependency.\n\nRun `npm audit` for details.\n\u001b[91mnpm notice \nnpm notice New major version of npm available! 8.19.2 -> 9.2.0\nnpm notice Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm notice Run `npm install -g npm@9.2.0` to update!\nnpm notice \n\u001b[0m\u001b[91mnpm\u001b[0m\u001b[91m WARN using --force Recommended protections disabled.\n\u001b[0mRemoving intermediate container 1211b80bea34\n ---> 9112ff4592c8\nStep 6/8 : COPY --chown=node:node . .\n ---> 12352d78c3eb\nStep 7/8 : EXPOSE 3000 4200\n ---> Running in e978936cbf1a\nRemoving intermediate container e978936cbf1a\n ---> d7ddcdb81c04\nStep 8/8 : CMD [ \"node\", \"server.js\" ]\n ---> Running in e162c24db5c6\nRemoving intermediate container e162c24db5c6\n ---> 0f81c653a85a\nSuccessfully built 0f81c653a85a\nSuccessfully tagged node:latest\n","stderr":"","imageSize":484698694}}