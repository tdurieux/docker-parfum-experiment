{"repository":"https://github.com/jeffersonlab/epics2web","dockerfilePath":"Dockerfile","startTime":1672552678954,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/jeffersonlab/epics2web'...\n","error":null,"commit":"4349c63a6c778c45bd94c8efe735dd0dc60ea5a0"},"originalBuild":{"startTimestamp":1672552679899,"endTimestamp":1672552793458,"error":null,"stdout":"Sending build context to Docker daemon  2.509MB\r\r\nStep 1/17 : ARG BUILD_IMAGE=gradle:7.4-jdk17-alpine\nStep 2/17 : ARG RUN_IMAGE=tomcat:9.0.68-jre8\nStep 3/17 : FROM ${BUILD_IMAGE} as builder\n7.4-jdk17-alpine: Pulling from library/gradle\n2408cc74d12b: Pulling fs layer\n3d4177d25912: Pulling fs layer\n192e69d5289d: Pulling fs layer\n2fbdc495bee8: Pulling fs layer\n0552d85672b2: Pulling fs layer\n336f20103a0e: Pulling fs layer\n32957fd24553: Pulling fs layer\n0552d85672b2: Waiting\n336f20103a0e: Waiting\n2fbdc495bee8: Waiting\n32957fd24553: Waiting\n2408cc74d12b: Verifying Checksum\n2408cc74d12b: Download complete\n2408cc74d12b: Pull complete\n2fbdc495bee8: Verifying Checksum\n2fbdc495bee8: Download complete\n3d4177d25912: Download complete\n0552d85672b2: Verifying Checksum\n0552d85672b2: Download complete\n3d4177d25912: Pull complete\n192e69d5289d: Verifying Checksum\n192e69d5289d: Download complete\n32957fd24553: Verifying Checksum\n32957fd24553: Download complete\n336f20103a0e: Verifying Checksum\n336f20103a0e: Download complete\n192e69d5289d: Pull complete\n2fbdc495bee8: Pull complete\n0552d85672b2: Pull complete\n336f20103a0e: Pull complete\n32957fd24553: Pull complete\nDigest: sha256:a070f18d41a2d53cbb40178341c89b54a92e6e490b3e8122e084ac0314724413\nStatus: Downloaded newer image for gradle:7.4-jdk17-alpine\n ---> 71c52caf9277\nStep 4/17 : ARG CUSTOM_CRT_URL\n ---> Running in 1a5ba07f9b87\nRemoving intermediate container 1a5ba07f9b87\n ---> 6aae7153e8d2\nStep 5/17 : USER root\n ---> Running in 43cf80681a8b\nRemoving intermediate container 43cf80681a8b\n ---> 78167da4d8ea\nStep 6/17 : WORKDIR /\n ---> Running in 7b94b5ad32d9\nRemoving intermediate container 7b94b5ad32d9\n ---> 58cbae57c09d\nStep 7/17 : RUN if [ -z \"${CUSTOM_CRT_URL}\" ] ; then echo \"No custom cert needed\"; else        wget -O /usr/local/share/ca-certificates/customcert.crt $CUSTOM_CRT_URL        && update-ca-certificates        && keytool -import -alias custom -file /usr/local/share/ca-certificates/customcert.crt -cacerts -storepass changeit -noprompt        && export OPTIONAL_CERT_ARG=--cert=/etc/ssl/certs/ca-certificates.crt     ; fi\n ---> Running in 1bce354208ef\nNo custom cert needed\nRemoving intermediate container 1bce354208ef\n ---> 3a98f4a34284\nStep 8/17 : COPY . /app\n ---> 35a9235d05ad\nStep 9/17 : RUN cd /app && gradle build -x test --no-watch-fs $OPTIONAL_CERT_ARG\n ---> Running in ce01f7050f3b\n\nWelcome to Gradle 7.4.2!\n\nHere are the highlights of this release:\n - Aggregated test and JaCoCo reports\n - Marking additional test source directories as tests in IntelliJ\n - Support for Adoptium JDKs in Java toolchains\n\nFor more details see https://docs.gradle.org/7.4.2/release-notes.html\n\nStarting a Gradle Daemon (subsequent builds will be faster)\n> Task :compileJava\n> Task :processResources\n> Task :classes\n\n> Task :cssMinifyIt\n\u001b[91mCss Minifier: 0 error(s), 0 warning(s)\n\u001b[0m\u001b[91m\n\u001b[0m\n> Task :jsMinifyIt\n\u001b[91mJs Minifier: 0 error(s), 0 warning(s)\n\u001b[0m\u001b[91m\n\u001b[0m\n> Task :war\n> Task :assemble\n> Task :check\n> Task :build\n\nBUILD SUCCESSFUL in 28s\n5 actionable tasks: 5 executed\nRemoving intermediate container ce01f7050f3b\n ---> 415e11edef55\nStep 10/17 : FROM ${RUN_IMAGE} as runner\n9.0.68-jre8: Pulling from library/tomcat\ne96e057aae67: Pulling fs layer\n4ced2591451d: Pulling fs layer\n76f23febae70: Pulling fs layer\n0ccbf47c061f: Pulling fs layer\nf68fcdac94aa: Pulling fs layer\n3eeee9921df5: Pulling fs layer\ne056e3621b1b: Pulling fs layer\ndd131b40e18f: Pulling fs layer\nf68fcdac94aa: Waiting\n3eeee9921df5: Waiting\ndd131b40e18f: Waiting\ne056e3621b1b: Waiting\n0ccbf47c061f: Waiting\n4ced2591451d: Verifying Checksum\n4ced2591451d: Download complete\ne96e057aae67: Verifying Checksum\ne96e057aae67: Download complete\n0ccbf47c061f: Verifying Checksum\n0ccbf47c061f: Download complete\nf68fcdac94aa: Verifying Checksum\nf68fcdac94aa: Download complete\ne96e057aae67: Pull complete\n76f23febae70: Verifying Checksum\n76f23febae70: Download complete\n3eeee9921df5: Verifying Checksum\n3eeee9921df5: Download complete\ne056e3621b1b: Verifying Checksum\ne056e3621b1b: Download complete\ndd131b40e18f: Verifying Checksum\ndd131b40e18f: Download complete\n4ced2591451d: Pull complete\n76f23febae70: Pull complete\n0ccbf47c061f: Pull complete\nf68fcdac94aa: Pull complete\n3eeee9921df5: Pull complete\ne056e3621b1b: Pull complete\ndd131b40e18f: Pull complete\nDigest: sha256:514df9f7cd98c86c00201181f4280c14414f18a38bf93fbf5531a962825f04d7\nStatus: Downloaded newer image for tomcat:9.0.68-jre8\n ---> 5adf181d5b32\nStep 11/17 : ARG CUSTOM_CRT_URL\n ---> Running in dac02d25ff5f\nRemoving intermediate container dac02d25ff5f\n ---> 2c8ce7d209e5\nStep 12/17 : ARG RUN_USER=tomcat\n ---> Running in 8e49c3929994\nRemoving intermediate container 8e49c3929994\n ---> b179eb2bb335\nStep 13/17 : ARG APP_HOME=/usr/local/tomcat/webapps\n ---> Running in 3655aaf5027d\nRemoving intermediate container 3655aaf5027d\n ---> cb5cd9353b8b\nStep 14/17 : USER root\n ---> Running in 4c91dc3de66b\nRemoving intermediate container 4c91dc3de66b\n ---> f950b409da07\nStep 15/17 : COPY --from=builder /app/build/libs /usr/local/tomcat/webapps\n ---> 72072f90b8a8\nStep 16/17 : RUN useradd -m tomcat     && if [ -z \"${CUSTOM_CRT_URL}\" ] ; then echo \"No custom cert needed\"; else        mkdir -p /usr/local/share/ca-certificates        && curl -o /usr/local/share/ca-certificates/customcert.crt $CUSTOM_CRT_URL        && update-ca-certificates     ; fi     && chown -R ${RUN_USER}:0 ${APP_HOME}     && chmod -R g+rw ${APP_HOME}\n ---> Running in 82445821f2ab\nNo custom cert needed\nRemoving intermediate container 82445821f2ab\n ---> 575934f378ba\nStep 17/17 : USER ${RUN_USER}\n ---> Running in 294905c8bfbf\nRemoving intermediate container 294905c8bfbf\n ---> 554616cc60d1\nSuccessfully built 554616cc60d1\nSuccessfully tagged epics2web:latest\n","stderr":"","imageSize":243372941},"repair":{"violations":[{"name":"curlUseFlagF","position":{"start":27,"end":27,"columnStart":10,"columnEnd":81}}],"repairedDockerfile":"ARG BUILD_IMAGE=gradle:7.4-jdk17-alpine\nARG RUN_IMAGE=tomcat:9.0.68-jre8\n\n################## Stage 0\nFROM ${BUILD_IMAGE} as builder\nARG CUSTOM_CRT_URL\nUSER root\nWORKDIR /\nRUN if [ -z \"${CUSTOM_CRT_URL}\" ] ;then echo \"No custom cert needed\"; else \\\n       wget -O /usr/local/share/ca-certificates/customcert.crt $CUSTOM_CRT_URL \\\n       && update-ca-certificates \\\n       && keytool -import -alias custom -file /usr/local/share/ca-certificates/customcert.crt -cacerts -storepass changeit -noprompt \\\n       && export OPTIONAL_CERT_ARG=--cert=/etc/ssl/certs/ca-certificates.crt \\\n    ; fi\nCOPY . /app\nRUN cd /app && gradle build -x test --no-watch-fs $OPTIONAL_CERT_ARG\n\n################## Stage 1\nFROM ${RUN_IMAGE} as runner\nARG CUSTOM_CRT_URL\nARG RUN_USER=tomcat\nARG APP_HOME=/usr/local/tomcat/webapps\nUSER root\nCOPY --from=builder /app/build/libs /usr/local/tomcat/webapps\nRUN useradd -m tomcat \\\n    && if [ -z \"${CUSTOM_CRT_URL}\" ] ;then echo \"No custom cert needed\"; else \\\n       mkdir -p /usr/local/share/ca-certificates \\\n       && curl -f -o /usr/local/share/ca-certificates/customcert.crt $CUSTOM_CRT_URL \\\n       && update-ca-certificates \\\n    ; fi \\\n    && chown -R ${RUN_USER}:0 ${APP_HOME} \\\n    && chmod -R g+rw ${APP_HOME}\nUSER ${RUN_USER}"},"repairedBuild":{"startTimestamp":1672552793760,"endTimestamp":1672552855461,"error":null,"stdout":"Sending build context to Docker daemon  2.509MB\r\r\nStep 1/17 : ARG BUILD_IMAGE=gradle:7.4-jdk17-alpine\nStep 2/17 : ARG RUN_IMAGE=tomcat:9.0.68-jre8\nStep 3/17 : FROM ${BUILD_IMAGE} as builder\n ---> 71c52caf9277\nStep 4/17 : ARG CUSTOM_CRT_URL\n ---> Running in ebc1afa7630a\nRemoving intermediate container ebc1afa7630a\n ---> 61ebf8e01ed4\nStep 5/17 : USER root\n ---> Running in 3638cd019495\nRemoving intermediate container 3638cd019495\n ---> 9dbfe0b50cdd\nStep 6/17 : WORKDIR /\n ---> Running in ad986d3fbb03\nRemoving intermediate container ad986d3fbb03\n ---> 6436a19e21f2\nStep 7/17 : RUN if [ -z \"${CUSTOM_CRT_URL}\" ] ;then echo \"No custom cert needed\"; else        wget -O /usr/local/share/ca-certificates/customcert.crt $CUSTOM_CRT_URL        && update-ca-certificates        && keytool -import -alias custom -file /usr/local/share/ca-certificates/customcert.crt -cacerts -storepass changeit -noprompt        && export OPTIONAL_CERT_ARG=--cert=/etc/ssl/certs/ca-certificates.crt     ; fi\n ---> Running in 48c10d6223a6\nNo custom cert needed\nRemoving intermediate container 48c10d6223a6\n ---> a781cada9152\nStep 8/17 : COPY . /app\n ---> 777672e2a165\nStep 9/17 : RUN cd /app && gradle build -x test --no-watch-fs $OPTIONAL_CERT_ARG\n ---> Running in f3c41ff64dd8\n\nWelcome to Gradle 7.4.2!\n\nHere are the highlights of this release:\n - Aggregated test and JaCoCo reports\n - Marking additional test source directories as tests in IntelliJ\n - Support for Adoptium JDKs in Java toolchains\n\nFor more details see https://docs.gradle.org/7.4.2/release-notes.html\n\nStarting a Gradle Daemon (subsequent builds will be faster)\n> Task :compileJava\n> Task :processResources\n> Task :classes\n\n> Task :cssMinifyIt\n\u001b[91mCss Minifier: 0 error(s), 0 warning(s)\n\u001b[0m\u001b[91m\n\u001b[0m\n> Task :jsMinifyIt\n\u001b[91mJs Minifier: 0 error(s), 0 warning(s)\n\u001b[0m\u001b[91m\n\u001b[0m\n> Task :war\n> Task :assemble\n> Task :check\n> Task :build\n\nBUILD SUCCESSFUL in 19s\n5 actionable tasks: 5 executed\nRemoving intermediate container f3c41ff64dd8\n ---> be515ad03e91\nStep 10/17 : FROM ${RUN_IMAGE} as runner\n ---> 5adf181d5b32\nStep 11/17 : ARG CUSTOM_CRT_URL\n ---> Running in c687dc0bcb8c\nRemoving intermediate container c687dc0bcb8c\n ---> db2fcf5e1944\nStep 12/17 : ARG RUN_USER=tomcat\n ---> Running in 279271fd2e7f\nRemoving intermediate container 279271fd2e7f\n ---> d5dd3cbc4ea2\nStep 13/17 : ARG APP_HOME=/usr/local/tomcat/webapps\n ---> Running in efd23fef3820\nRemoving intermediate container efd23fef3820\n ---> bfa76c10460d\nStep 14/17 : USER root\n ---> Running in c559e7462f7a\nRemoving intermediate container c559e7462f7a\n ---> fb6cd865ff0b\nStep 15/17 : COPY --from=builder /app/build/libs /usr/local/tomcat/webapps\n ---> 6734ac5ba210\nStep 16/17 : RUN useradd -m tomcat     && if [ -z \"${CUSTOM_CRT_URL}\" ] ;then echo \"No custom cert needed\"; else        mkdir -p /usr/local/share/ca-certificates        && curl -f -o /usr/local/share/ca-certificates/customcert.crt $CUSTOM_CRT_URL        && update-ca-certificates     ; fi     && chown -R ${RUN_USER}:0 ${APP_HOME}     && chmod -R g+rw ${APP_HOME}\n ---> Running in cf87e257fecb\nNo custom cert needed\nRemoving intermediate container cf87e257fecb\n ---> 0ee03af890b0\nStep 17/17 : USER ${RUN_USER}\n ---> Running in b4fd58aad934\nRemoving intermediate container b4fd58aad934\n ---> 905f5e3d718a\nSuccessfully built 905f5e3d718a\nSuccessfully tagged epics2web:latest\n","stderr":"","imageSize":243372941},"endTime":1672552855742}