{"repository":"https://github.com/sails-simulator/sailsd","dockerfilePath":"Dockerfile","startTime":1672873305192,"endTime":1672873375241,"clone":{"startTime":1672873305193,"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/sails-simulator/sailsd'...\n","error":null,"endTime":1672873305915,"commit":"0b7bd9b2431ad94f21e0e7ae12cb96df614ebf9e"},"originalBuild":{"startTime":1672873306004,"endTime":1672873338550,"error":null,"stdout":"Sending build context to Docker daemon  164.4kB\r\r\nStep 1/15 : FROM quay.io/sails/libsailing:latest as libsailing\nlatest: Pulling from sails/libsailing\n4fe2ade4980c: Pulling fs layer\n88121eb31932: Pulling fs layer\nfa121e43c3ed: Pulling fs layer\n88121eb31932: Verifying Checksum\n88121eb31932: Download complete\nfa121e43c3ed: Verifying Checksum\nfa121e43c3ed: Download complete\n4fe2ade4980c: Verifying Checksum\n4fe2ade4980c: Download complete\n4fe2ade4980c: Pull complete\n88121eb31932: Pull complete\nfa121e43c3ed: Pull complete\nDigest: sha256:209fdfffac06a930ecee7ea9ad3483112c7dd57d701d6d90b48ab3189d4f4975\nStatus: Downloaded newer image for quay.io/sails/libsailing:latest\n ---> e07319c1f1d3\nStep 2/15 : FROM alpine:latest as build\n ---> 49176f190c7e\nStep 3/15 : RUN apk update ;    apk add build-base jansson-dev\n ---> Running in dce505ebc5bf\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\nv3.17.0-327-g2bd80c4a14 [https://dl-cdn.alpinelinux.org/alpine/v3.17/main]\nv3.17.0-329-gf392921234 [https://dl-cdn.alpinelinux.org/alpine/v3.17/community]\nOK: 17815 distinct packages available\n(1/23) Installing libgcc (12.2.1_git20220924-r4)\n(2/23) Installing libstdc++ (12.2.1_git20220924-r4)\n(3/23) Installing binutils (2.39-r2)\n(4/23) Installing libmagic (5.43-r0)\n(5/23) Installing file (5.43-r0)\n(6/23) Installing libgomp (12.2.1_git20220924-r4)\n(7/23) Installing libatomic (12.2.1_git20220924-r4)\n(8/23) Installing gmp (6.2.1-r2)\n(9/23) Installing isl25 (0.25-r0)\n(10/23) Installing mpfr4 (4.1.0-r0)\n(11/23) Installing mpc1 (1.2.1-r1)\n(12/23) Installing gcc (12.2.1_git20220924-r4)\n(13/23) Installing libstdc++-dev (12.2.1_git20220924-r4)\n(14/23) Installing musl-dev (1.2.3-r4)\n(15/23) Installing libc-dev (0.7.2-r3)\n(16/23) Installing g++ (12.2.1_git20220924-r4)\n(17/23) Installing make (4.3-r1)\n(18/23) Installing fortify-headers (1.1-r1)\n(19/23) Installing patch (2.7.6-r8)\n(20/23) Installing build-base (0.5-r3)\n(21/23) Installing jansson (2.14-r0)\n(22/23) Installing pkgconf (1.9.3-r0)\n(23/23) Installing jansson-dev (2.14-r0)\nExecuting busybox-1.35.0-r29.trigger\nOK: 244 MiB in 38 packages\nRemoving intermediate container dce505ebc5bf\n ---> 14a2dc3b4f4c\nStep 4/15 : WORKDIR /sailsd\n ---> Running in d59ef6043bb5\nRemoving intermediate container d59ef6043bb5\n ---> 789cf4fc7d46\nStep 5/15 : COPY . ./\n ---> 29d4ee12c99c\nStep 6/15 : COPY --from=libsailing /usr/local/lib/libsailing/*.o libsailing/\n ---> 7923cf9dd636\nStep 7/15 : COPY --from=libsailing /usr/local/include/libsailing/*.h libsailing/\n ---> 3b05ed2646ec\nStep 8/15 : RUN sed -i.bak 's/127\\.0\\.0\\.1/0\\.0\\.0\\.0/g' sailsd.c\n ---> Running in acd0def20b76\nRemoving intermediate container acd0def20b76\n ---> 3c32737ada92\nStep 9/15 : RUN make sailsd install\n ---> Running in f3040f229deb\ngcc -c -o sailsd.o sailsd.c -I. -Ilibsailing -std=gnu99 -ljansson  -lpthread -Wall -lm\ngcc -c -o logging.o logging.c -I. -Ilibsailing -std=gnu99 -ljansson  -lpthread -Wall -lm\ngcc -o sailsd sailsd.o logging.o libsailing/sailing.o libsailing/physics.o libsailing/wind.o libsailing/boat.o -I. -Ilibsailing -std=gnu99 -ljansson  -lpthread -Wall -lm\nmkdir -pv /usr/local/bin\ncp sailsd /usr/local/bin/sailsd\nRemoving intermediate container f3040f229deb\n ---> 87cd31ef6d50\nStep 10/15 : FROM alpine:latest\n ---> 49176f190c7e\nStep 11/15 : RUN apk update && apk add jansson-dev\n ---> Running in 9cae79a298df\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\nv3.17.0-327-g2bd80c4a14 [https://dl-cdn.alpinelinux.org/alpine/v3.17/main]\nv3.17.0-329-gf392921234 [https://dl-cdn.alpinelinux.org/alpine/v3.17/community]\nOK: 17815 distinct packages available\n(1/3) Installing jansson (2.14-r0)\n(2/3) Installing pkgconf (1.9.3-r0)\n(3/3) Installing jansson-dev (2.14-r0)\nExecuting busybox-1.35.0-r29.trigger\nOK: 7 MiB in 18 packages\nRemoving intermediate container 9cae79a298df\n ---> 5fe470a2a8ed\nStep 12/15 : COPY --from=build /usr/local/bin/sailsd /usr/local/bin/sailsd\n ---> 8ce272d947c0\nStep 13/15 : EXPOSE 3333\n ---> Running in 08cf6a257f7a\nRemoving intermediate container 08cf6a257f7a\n ---> de9aaef42c78\nStep 14/15 : ENV PYTHONUNBUFFERED 1\n ---> Running in fb4019b01de0\nRemoving intermediate container fb4019b01de0\n ---> ac0ebace0290\nStep 15/15 : ENTRYPOINT [\"/bin/sh\", \"-c\", \"/usr/local/bin/sailsd\"]\n ---> Running in 9bfffbe6abb9\nRemoving intermediate container 9bfffbe6abb9\n ---> 0d1027a16eb8\nSuccessfully built 0d1027a16eb8\nSuccessfully tagged sailsd:latest\n","stderr":"","imageSize":9909912},"repair":{"startTime":1672873338616,"endTime":1672873338678,"violations":[{"name":"apkAddUseNoCache","position":{"start":5,"end":5,"columnStart":4,"columnEnd":34}},{"name":"apkAddUseNoCache","position":{"start":20,"end":20,"columnStart":18,"columnEnd":37}}],"repairedDockerfile":"FROM quay.io/sails/libsailing:latest as libsailing\n\nFROM alpine:latest as build\n\nRUN apk update ; \\\n    apk add --no-cache build-base jansson-dev\n\nWORKDIR /sailsd\n\nCOPY . ./\nCOPY --from=libsailing /usr/local/lib/libsailing/*.o libsailing/\nCOPY --from=libsailing /usr/local/include/libsailing/*.h libsailing/\n\n# Bind on all adapters so dockers bridge network works as expected\nRUN sed -i.bak 's/127\\.0\\.0\\.1/0\\.0\\.0\\.0/g' sailsd.c\n\nRUN make sailsd install\n\nFROM alpine:latest\n\nRUN apk update && apk add --no-cache jansson-dev\n\nCOPY --from=build /usr/local/bin/sailsd /usr/local/bin/sailsd\n\nEXPOSE 3333\n\nENV PYTHONUNBUFFERED 1\n\nENTRYPOINT [\"/bin/sh\", \"-c\", \"/usr/local/bin/sailsd\"]"},"repairedBuild":{"startTime":1672873338823,"endTime":1672873375004,"error":null,"stdout":"Sending build context to Docker daemon  164.4kB\r\r\nStep 1/15 : FROM quay.io/sails/libsailing:latest as libsailing\n ---> e07319c1f1d3\nStep 2/15 : FROM alpine:latest as build\n ---> 49176f190c7e\nStep 3/15 : RUN apk update ;     apk add --no-cache build-base jansson-dev\n ---> Running in d4c4c440770c\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\nv3.17.0-327-g2bd80c4a14 [https://dl-cdn.alpinelinux.org/alpine/v3.17/main]\nv3.17.0-329-gf392921234 [https://dl-cdn.alpinelinux.org/alpine/v3.17/community]\nOK: 17815 distinct packages available\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/23) Installing libgcc (12.2.1_git20220924-r4)\n(2/23) Installing libstdc++ (12.2.1_git20220924-r4)\n(3/23) Installing binutils (2.39-r2)\n(4/23) Installing libmagic (5.43-r0)\n(5/23) Installing file (5.43-r0)\n(6/23) Installing libgomp (12.2.1_git20220924-r4)\n(7/23) Installing libatomic (12.2.1_git20220924-r4)\n(8/23) Installing gmp (6.2.1-r2)\n(9/23) Installing isl25 (0.25-r0)\n(10/23) Installing mpfr4 (4.1.0-r0)\n(11/23) Installing mpc1 (1.2.1-r1)\n(12/23) Installing gcc (12.2.1_git20220924-r4)\n(13/23) Installing libstdc++-dev (12.2.1_git20220924-r4)\n(14/23) Installing musl-dev (1.2.3-r4)\n(15/23) Installing libc-dev (0.7.2-r3)\n(16/23) Installing g++ (12.2.1_git20220924-r4)\n(17/23) Installing make (4.3-r1)\n(18/23) Installing fortify-headers (1.1-r1)\n(19/23) Installing patch (2.7.6-r8)\n(20/23) Installing build-base (0.5-r3)\n(21/23) Installing jansson (2.14-r0)\n(22/23) Installing pkgconf (1.9.3-r0)\n(23/23) Installing jansson-dev (2.14-r0)\nExecuting busybox-1.35.0-r29.trigger\nOK: 244 MiB in 38 packages\nRemoving intermediate container d4c4c440770c\n ---> e54153458ed7\nStep 4/15 : WORKDIR /sailsd\n ---> Running in 2392f8901543\nRemoving intermediate container 2392f8901543\n ---> 390895679917\nStep 5/15 : COPY . ./\n ---> 6185314f0fe3\nStep 6/15 : COPY --from=libsailing /usr/local/lib/libsailing/*.o libsailing/\n ---> f46698a09e76\nStep 7/15 : COPY --from=libsailing /usr/local/include/libsailing/*.h libsailing/\n ---> 8a98b17a5756\nStep 8/15 : RUN sed -i.bak 's/127\\.0\\.0\\.1/0\\.0\\.0\\.0/g' sailsd.c\n ---> Running in 9aa877d2444d\nRemoving intermediate container 9aa877d2444d\n ---> 91370f5678db\nStep 9/15 : RUN make sailsd install\n ---> Running in c7a8d14048ae\ngcc -c -o sailsd.o sailsd.c -I. -Ilibsailing -std=gnu99 -ljansson  -lpthread -Wall -lm\ngcc -c -o logging.o logging.c -I. -Ilibsailing -std=gnu99 -ljansson  -lpthread -Wall -lm\ngcc -o sailsd sailsd.o logging.o libsailing/sailing.o libsailing/physics.o libsailing/wind.o libsailing/boat.o -I. -Ilibsailing -std=gnu99 -ljansson  -lpthread -Wall -lm\nmkdir -pv /usr/local/bin\ncp sailsd /usr/local/bin/sailsd\nRemoving intermediate container c7a8d14048ae\n ---> 7dcf2848fca9\nStep 10/15 : FROM alpine:latest\n ---> 49176f190c7e\nStep 11/15 : RUN apk update && apk add --no-cache jansson-dev\n ---> Running in 8729fd98501e\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\nv3.17.0-327-g2bd80c4a14 [https://dl-cdn.alpinelinux.org/alpine/v3.17/main]\nv3.17.0-329-gf392921234 [https://dl-cdn.alpinelinux.org/alpine/v3.17/community]\nOK: 17815 distinct packages available\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/3) Installing jansson (2.14-r0)\n(2/3) Installing pkgconf (1.9.3-r0)\n(3/3) Installing jansson-dev (2.14-r0)\nExecuting busybox-1.35.0-r29.trigger\nOK: 7 MiB in 18 packages\nRemoving intermediate container 8729fd98501e\n ---> cbb9e9e3d412\nStep 12/15 : COPY --from=build /usr/local/bin/sailsd /usr/local/bin/sailsd\n ---> f4eebee3f7a1\nStep 13/15 : EXPOSE 3333\n ---> Running in 09d7d03612fe\nRemoving intermediate container 09d7d03612fe\n ---> 947e887290d2\nStep 14/15 : ENV PYTHONUNBUFFERED 1\n ---> Running in 9361328797b4\nRemoving intermediate container 9361328797b4\n ---> 57a3349baa03\nStep 15/15 : ENTRYPOINT [\"/bin/sh\", \"-c\", \"/usr/local/bin/sailsd\"]\n ---> Running in fa4f313771e9\nRemoving intermediate container fa4f313771e9\n ---> 648cbb774e44\nSuccessfully built 648cbb774e44\nSuccessfully tagged sailsd:latest\n","stderr":"","imageSize":9909912}}