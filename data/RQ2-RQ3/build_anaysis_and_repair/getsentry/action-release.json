{"repository":"https://github.com/getsentry/action-release","dockerfilePath":"Dockerfile","startTime":1672706356566,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/getsentry/action-release'...\n","error":null,"commit":"63fcb741e165c6567a55d5c58f54527103cfe649"},"originalBuild":{"startTimestamp":1672706357443,"endTimestamp":1672706460939,"error":null,"stdout":"Sending build context to Docker daemon  295.4kB\r\r\nStep 1/14 : FROM node:12-alpine as builder\n12-alpine: Pulling from library/node\ndf9b9388f04a: Pulling fs layer\n3bf6d7380205: Pulling fs layer\n7939e601ee5e: Pulling fs layer\n31f0fb9de071: Pulling fs layer\n31f0fb9de071: Waiting\n7939e601ee5e: Verifying Checksum\n7939e601ee5e: Download complete\ndf9b9388f04a: Verifying Checksum\ndf9b9388f04a: Download complete\n31f0fb9de071: Verifying Checksum\n31f0fb9de071: Download complete\n3bf6d7380205: Verifying Checksum\n3bf6d7380205: Download complete\ndf9b9388f04a: Pull complete\n3bf6d7380205: Pull complete\n7939e601ee5e: Pull complete\n31f0fb9de071: Pull complete\nDigest: sha256:d4b15b3d48f42059a15bd659be60afe21762aae9d6cbea6f124440895c27db68\nStatus: Downloaded newer image for node:12-alpine\n ---> bb6d28039b8c\nStep 2/14 : WORKDIR /app\n ---> Running in c7923d54af26\nRemoving intermediate container c7923d54af26\n ---> 2fc9bb66dfd3\nStep 3/14 : COPY package.json yarn.lock ./\n ---> c9c1359c33a2\nStep 4/14 : RUN export YARN_CACHE_FOLDER=\"$(mktemp -d)\"   && yarn install --frozen-lockfile --quiet   && rm -r \"$YARN_CACHE_FOLDER\"\n ---> Running in 6c38e7b91516\nyarn install v1.22.18\n[1/4] Resolving packages...\n[2/4] Fetching packages...\n[3/4] Linking dependencies...\n[4/4] Building fresh packages...\nDone in 21.03s.\nRemoving intermediate container 6c38e7b91516\n ---> d3d1094705b9\nStep 5/14 : COPY . .\n ---> 90ca912cc984\nStep 6/14 : RUN yarn build\n ---> Running in d0eb8e98a68b\nyarn run v1.22.18\n$ ncc build src/main.ts\nncc: Version 0.22.3\nncc: Compiling file index.js\nncc: Using typescript@3.9.10 (local user-provided)\n  125kB  dist/index.js\n17485kB  dist/sentry-cli\n17610kB  [2464ms] - ncc 0.22.3\nDone in 3.79s.\nRemoving intermediate container d0eb8e98a68b\n ---> 4bfa23d635d1\nStep 7/14 : FROM node:12-alpine as app\n ---> bb6d28039b8c\nStep 8/14 : COPY package.json yarn.lock /action-release/\n ---> 01c42d8a3d69\nStep 9/14 : RUN export YARN_CACHE_FOLDER=\"$(mktemp -d)\"   && cd /action-release   && yarn install --frozen-lockfile --production --quiet   && rm -r \"$YARN_CACHE_FOLDER\"\n ---> Running in 4bc07102bd01\nyarn install v1.22.18\n[1/4] Resolving packages...\n[2/4] Fetching packages...\n[3/4] Linking dependencies...\n[4/4] Building fresh packages...\nDone in 9.74s.\nRemoving intermediate container 4bc07102bd01\n ---> 7f1a90bc8206\nStep 10/14 : COPY --from=builder /app/dist /action-release/dist/\n ---> a43791b9d2dd\nStep 11/14 : RUN chmod +x /action-release/dist/index.js\n ---> Running in c41544eda7bb\nRemoving intermediate container c41544eda7bb\n ---> f5892a9b5737\nStep 12/14 : COPY entrypoint.sh /entrypoint.sh\n ---> 3ad2ee15a40a\nStep 13/14 : RUN chmod +x /entrypoint.sh\n ---> Running in bd848af5b085\nRemoving intermediate container bd848af5b085\n ---> 1fdb074b3542\nStep 14/14 : ENTRYPOINT [\"/entrypoint.sh\"]\n ---> Running in 765bf9f81a9f\nRemoving intermediate container 765bf9f81a9f\n ---> a8e915910388\nSuccessfully built a8e915910388\nSuccessfully tagged action-release:latest\n","stderr":"","imageSize":128819814},"repair":{"violations":[{"name":"rmRecursiveAfterMktempD","position":{"start":6,"end":6,"columnStart":32,"columnEnd":41}},{"name":"rmRecursiveAfterMktempD","position":{"start":18,"end":18,"columnStart":32,"columnEnd":41}}],"repairedDockerfile":"# The multi stage set up *saves* up image size by avoiding the dev dependencies\n# required to produce dist/\nFROM node:12-alpine as builder\nWORKDIR /app\n# This layer will invalidate upon new dependencies\nCOPY package.json yarn.lock ./\nRUN export YARN_CACHE_FOLDER=\"$(mktemp -d)\" \\\n  && yarn install --frozen-lockfile --quiet \\\n  && rm -r \"$YARN_CACHE_FOLDER\"\n# If there's some code changes that causes this layer to\n# invalidate but it shouldn't, use .dockerignore to exclude it\nCOPY . .\nRUN yarn build\n\nFROM node:12-alpine as app\nCOPY package.json yarn.lock /action-release/\n# On the builder image, we install both types of dependencies rather than\n# just the production ones. This generates /action-release/node_modules\nRUN export YARN_CACHE_FOLDER=\"$(mktemp -d)\" \\\n  && cd /action-release \\\n  && yarn install --frozen-lockfile --production --quiet \\\n  && rm -r \"$YARN_CACHE_FOLDER\"\n\n# Copy the artifacts from `yarn build`\nCOPY --from=builder /app/dist /action-release/dist/\nRUN chmod +x /action-release/dist/index.js\n\n# XXX: This could probably be replaced with a standard CMD\nCOPY entrypoint.sh /entrypoint.sh\nRUN chmod +x /entrypoint.sh\nENTRYPOINT [\"/entrypoint.sh\"]\n"},"repairedBuild":{"startTimestamp":1672706461399,"endTimestamp":1672706863442,"error":null,"stdout":"Sending build context to Docker daemon  295.4kB\r\r\nStep 1/14 : FROM node:12-alpine as builder\n ---> bb6d28039b8c\nStep 2/14 : WORKDIR /app\n ---> Running in 525bbc10b06c\nRemoving intermediate container 525bbc10b06c\n ---> a1a29f052745\nStep 3/14 : COPY package.json yarn.lock ./\n ---> b6ebc7f29cf9\nStep 4/14 : RUN export YARN_CACHE_FOLDER=\"$(mktemp -d)\"   && yarn install --frozen-lockfile --quiet   && rm -r \"$YARN_CACHE_FOLDER\"\n ---> Running in 87eec42edccb\nyarn install v1.22.18\n[1/4] Resolving packages...\n[2/4] Fetching packages...\n[3/4] Linking dependencies...\n[4/4] Building fresh packages...\nDone in 18.32s.\nRemoving intermediate container 87eec42edccb\n ---> 0495ac8cda48\nStep 5/14 : COPY . .\n ---> 8a994e83c005\nStep 6/14 : RUN yarn build\n ---> Running in 5dcc24eb039d\nyarn run v1.22.18\n$ ncc build src/main.ts\nncc: Version 0.22.3\nncc: Compiling file index.js\nncc: Using typescript@3.9.10 (local user-provided)\n  125kB  dist/index.js\n17485kB  dist/sentry-cli\n17610kB  [2524ms] - ncc 0.22.3\nDone in 2.92s.\nRemoving intermediate container 5dcc24eb039d\n ---> 1433f3dd7c2d\nStep 7/14 : FROM node:12-alpine as app\n ---> bb6d28039b8c\nStep 8/14 : COPY package.json yarn.lock /action-release/\n ---> 7d62a295df2a\nStep 9/14 : RUN export YARN_CACHE_FOLDER=\"$(mktemp -d)\"   && cd /action-release   && yarn install --frozen-lockfile --production --quiet   && rm -r \"$YARN_CACHE_FOLDER\"\n ---> Running in 4bc058a8a721\nyarn install v1.22.18\n[1/4] Resolving packages...\n[2/4] Fetching packages...\n[3/4] Linking dependencies...\n[4/4] Building fresh packages...\nDone in 10.73s.\nRemoving intermediate container 4bc058a8a721\n ---> 7432bfd4fff6\nStep 10/14 : COPY --from=builder /app/dist /action-release/dist/\n ---> b83f787e5399\nStep 11/14 : RUN chmod +x /action-release/dist/index.js\n ---> Running in d6339a30789b\nRemoving intermediate container d6339a30789b\n ---> be29f72532ea\nStep 12/14 : COPY entrypoint.sh /entrypoint.sh\n ---> 641c09a4222a\nStep 13/14 : RUN chmod +x /entrypoint.sh\n ---> Running in 8f22ed8059fe\nRemoving intermediate container 8f22ed8059fe\n ---> ca373d67a3af\nStep 14/14 : ENTRYPOINT [\"/entrypoint.sh\"]\n ---> Running in 6c365f1d4988\nRemoving intermediate container 6c365f1d4988\n ---> ad52422d1dae\nSuccessfully built ad52422d1dae\nSuccessfully tagged action-release:latest\n","stderr":"","imageSize":128819814},"endTime":1672706865794}