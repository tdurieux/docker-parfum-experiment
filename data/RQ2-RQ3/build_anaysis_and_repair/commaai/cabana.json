{"repository":"https://github.com/commaai/cabana","dockerfilePath":"Dockerfile","startTime":1672513539703,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/commaai/cabana'...\n","error":null,"commit":"c9c7523174d5d375207757af1cd5541b1ae9dacb"},"originalBuild":{"startTimestamp":1672513540768,"endTimestamp":1672513857619,"error":null,"stdout":"Sending build context to Docker daemon  5.278MB\r\r\nStep 1/14 : FROM node:16-buster-slim\n16-buster-slim: Pulling from library/node\nb52ebda398ed: Already exists\nab06655d5b64: Pulling fs layer\n0d704ee2c0cf: Pulling fs layer\n977a2fe43c7f: Pulling fs layer\n4315dadb9483: Pulling fs layer\n4315dadb9483: Waiting\nab06655d5b64: Verifying Checksum\nab06655d5b64: Download complete\n977a2fe43c7f: Verifying Checksum\n977a2fe43c7f: Download complete\nab06655d5b64: Pull complete\n4315dadb9483: Download complete\n0d704ee2c0cf: Verifying Checksum\n0d704ee2c0cf: Download complete\n0d704ee2c0cf: Pull complete\n977a2fe43c7f: Pull complete\n4315dadb9483: Pull complete\nDigest: sha256:8e381b023efcf7a2fa4fb4e904ec9348d77bd3fc59f4551702db9aa52484082e\nStatus: Downloaded newer image for node:16-buster-slim\n ---> 5fb222735b86\nStep 2/14 : RUN apt-get update && apt-get install -y libusb-dev libudev-dev && rm -rf /var/lib/apt/lists/*\n ---> Running in 84a15e39fa23\nGet:1 http://deb.debian.org/debian buster InRelease [122 kB]\nGet:2 http://deb.debian.org/debian-security buster/updates InRelease [34.8 kB]\nGet:3 http://deb.debian.org/debian buster-updates InRelease [56.6 kB]\nGet:4 http://deb.debian.org/debian buster/main amd64 Packages [7909 kB]\nGet:5 http://deb.debian.org/debian-security buster/updates/main amd64 Packages [422 kB]\nGet:6 http://deb.debian.org/debian buster-updates/main amd64 Packages [8788 B]\nFetched 8553 kB in 3s (3061 kB/s)\nReading package lists...\nReading package lists...\nBuilding dependency tree...\nReading state information...\nThe following package was automatically installed and is no longer required:\n  lsb-base\nUse 'apt autoremove' to remove it.\nThe following additional packages will be installed:\n  libc-dev-bin libc6-dev libusb-0.1-4 linux-libc-dev manpages manpages-dev\nSuggested packages:\n  glibc-doc man-browser\nThe following NEW packages will be installed:\n  libc-dev-bin libc6-dev libudev-dev libusb-0.1-4 libusb-dev linux-libc-dev\n  manpages manpages-dev\n0 upgraded, 8 newly installed, 0 to remove and 0 not upgraded.\nNeed to get 8221 kB of archives.\nAfter this operation, 31.2 MB of additional disk space will be used.\nGet:1 http://deb.debian.org/debian buster/main amd64 manpages all 4.16-2 [1295 kB]\nGet:2 http://deb.debian.org/debian-security buster/updates/main amd64 libc-dev-bin amd64 2.28-10+deb10u2 [276 kB]\nGet:3 http://deb.debian.org/debian-security buster/updates/main amd64 linux-libc-dev amd64 4.19.269-1 [1553 kB]\nGet:4 http://deb.debian.org/debian-security buster/updates/main amd64 libc6-dev amd64 2.28-10+deb10u2 [2693 kB]\nGet:5 http://deb.debian.org/debian buster/main amd64 libudev-dev amd64 241-7~deb10u8 [110 kB]\nGet:6 http://deb.debian.org/debian buster/main amd64 libusb-0.1-4 amd64 2:0.1.12-32 [23.4 kB]\nGet:7 http://deb.debian.org/debian buster/main amd64 libusb-dev amd64 2:0.1.12-32 [37.9 kB]\nGet:8 http://deb.debian.org/debian buster/main amd64 manpages-dev all 4.16-2 [2232 kB]\n\u001b[91mdebconf: delaying package configuration, since apt-utils is not installed\n\u001b[0mFetched 8221 kB in 0s (44.2 MB/s)\nSelecting previously unselected package manpages.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 6469 files and directories currently installed.)\r\nPreparing to unpack .../0-manpages_4.16-2_all.deb ...\r\nUnpacking manpages (4.16-2) ...\r\nSelecting previously unselected package libc-dev-bin.\r\nPreparing to unpack .../1-libc-dev-bin_2.28-10+deb10u2_amd64.deb ...\r\nUnpacking libc-dev-bin (2.28-10+deb10u2) ...\r\nSelecting previously unselected package linux-libc-dev:amd64.\r\nPreparing to unpack .../2-linux-libc-dev_4.19.269-1_amd64.deb ...\r\nUnpacking linux-libc-dev:amd64 (4.19.269-1) ...\r\nSelecting previously unselected package libc6-dev:amd64.\r\nPreparing to unpack .../3-libc6-dev_2.28-10+deb10u2_amd64.deb ...\r\nUnpacking libc6-dev:amd64 (2.28-10+deb10u2) ...\r\nSelecting previously unselected package libudev-dev:amd64.\r\nPreparing to unpack .../4-libudev-dev_241-7~deb10u8_amd64.deb ...\r\nUnpacking libudev-dev:amd64 (241-7~deb10u8) ...\r\nSelecting previously unselected package libusb-0.1-4:amd64.\r\nPreparing to unpack .../5-libusb-0.1-4_2%3a0.1.12-32_amd64.deb ...\r\nUnpacking libusb-0.1-4:amd64 (2:0.1.12-32) ...\r\nSelecting previously unselected package libusb-dev.\r\nPreparing to unpack .../6-libusb-dev_2%3a0.1.12-32_amd64.deb ...\r\nUnpacking libusb-dev (2:0.1.12-32) ...\r\nSelecting previously unselected package manpages-dev.\r\nPreparing to unpack .../7-manpages-dev_4.16-2_all.deb ...\r\nUnpacking manpages-dev (4.16-2) ...\r\nSetting up manpages (4.16-2) ...\r\nSetting up linux-libc-dev:amd64 (4.19.269-1) ...\r\nSetting up libusb-0.1-4:amd64 (2:0.1.12-32) ...\r\nSetting up libudev-dev:amd64 (241-7~deb10u8) ...\r\nSetting up libc-dev-bin (2.28-10+deb10u2) ...\r\nSetting up manpages-dev (4.16-2) ...\r\nSetting up libc6-dev:amd64 (2.28-10+deb10u2) ...\r\nSetting up libusb-dev (2:0.1.12-32) ...\r\nProcessing triggers for libc-bin (2.28-10+deb10u2) ...\r\nRemoving intermediate container 84a15e39fa23\n ---> ac4d03452151\nStep 3/14 : WORKDIR /app\n ---> Running in ba338a76e344\nRemoving intermediate container ba338a76e344\n ---> aaf21c51f186\nStep 4/14 : COPY package.json yarn.lock /app/\n ---> 14b24410b7fc\nStep 5/14 : RUN yarn install --frozen-lockfile\n ---> Running in e7028eed55b3\nyarn install v1.22.19\n[1/4] Resolving packages...\n[2/4] Fetching packages...\n[3/4] Linking dependencies...\n\u001b[91mwarning \"react-scripts > @typescript-eslint/eslint-plugin > tsutils@3.21.0\" has unmet peer dependency \"typescript@>=2.8.0 || >= 3.2.0-dev || >= 3.3.0-dev || >= 3.4.0-dev || >= 3.5.0-dev || >= 3.6.0-dev || >= 3.6.0-beta || >= 3.7.0-dev || >= 3.7.0-beta\".\n\u001b[0m\u001b[91mwarning \"craco-sentry-plugin > @sentry/webpack-plugin@1.18.5\" has unmet peer dependency \"webpack@^4.41.31 || ^5.0.0\".\nwarning \" > worker-loader@2.0.0\" has unmet peer dependency \"webpack@^3.0.0 || ^4.0.0-alpha.0 || ^4.0.0\".\nwarning \" > webpack-sentry-plugin@1.16.0\" has unmet peer dependency \"webpack@^1.14.0 || >=2.2.0 <5.0.0\".\n\u001b[0m[4/4] Building fresh packages...\nDone in 68.79s.\nRemoving intermediate container e7028eed55b3\n ---> f435b3a5d6a8\nStep 6/14 : COPY . /app/\n ---> 3dc9eb6efd77\nStep 7/14 : ARG SENTRY_AUTH_TOKEN\n ---> Running in 15b5d9a46f00\nRemoving intermediate container 15b5d9a46f00\n ---> 75ef3fb28f17\nStep 8/14 : RUN yarn netlify-sass\n ---> Running in c0f41c02d4e7\nyarn run v1.22.19\n$ node-sass src/index.scss > src/index.css\nDone in 0.54s.\nRemoving intermediate container c0f41c02d4e7\n ---> 2bc128d8d007\nStep 9/14 : RUN yarn build\n ---> Running in 8c64a7bc5519\nyarn run v1.22.19\n$ env-cmd .env.production craco build\nCreating an optimized production build...\n\u001b[91mBrowserslist: caniuse-lite is outdated. Please run:\n  npx browserslist@latest --update-db\n  Why you should do it regularly: https://github.com/browserslist/browserslist#browsers-data-updating\n\u001b[0mCompiled successfully.\n\nFile sizes after gzip:\n\n  582.98 KB  build/static/js/2.ade8c5da.chunk.js\n  229.79 KB  build/959d7e6337f03a0a8e30.worker.js\n  47.77 KB   build/static/js/main.a0baafbe.chunk.js\n  34.18 KB   build/da0974e7861df9dac365.worker.js\n  20.71 KB   build/842bcbc707b442ce46bd.worker.js\n  12.78 KB   build/static/css/main.7b01f41a.chunk.css\n  9.87 KB    build/8b958d600e3d73bc8e28.worker.js\n  846 B      build/static/js/runtime-main.07802d3b.js\n\nThe project was built assuming it is hosted at /.\nYou can control this with the homepage field in your package.json.\n\nThe build folder is ready to be deployed.\nYou may serve it with a static server:\n\n  yarn global add serve\n  serve -s build\n\nFind out more about deployment here:\n\n  bit.ly/CRA-deploy\n\nDone in 60.41s.\nRemoving intermediate container 8c64a7bc5519\n ---> ee32493408f2\nStep 10/14 : FROM nginx:1.21\n1.21: Pulling from library/nginx\n42c077c10790: Pulling fs layer\n62c70f376f6a: Pulling fs layer\n915cc9bd79c2: Pulling fs layer\n75a963e94de0: Pulling fs layer\n7b1fab684d70: Pulling fs layer\ndb24d06d5af4: Pulling fs layer\ndb24d06d5af4: Waiting\n7b1fab684d70: Waiting\n75a963e94de0: Waiting\n915cc9bd79c2: Verifying Checksum\n915cc9bd79c2: Download complete\n62c70f376f6a: Verifying Checksum\n62c70f376f6a: Download complete\n75a963e94de0: Verifying Checksum\n75a963e94de0: Download complete\n42c077c10790: Verifying Checksum\n42c077c10790: Download complete\n7b1fab684d70: Download complete\ndb24d06d5af4: Verifying Checksum\ndb24d06d5af4: Download complete\n42c077c10790: Pull complete\n62c70f376f6a: Pull complete\n915cc9bd79c2: Pull complete\n75a963e94de0: Pull complete\n7b1fab684d70: Pull complete\ndb24d06d5af4: Pull complete\nDigest: sha256:2bcabc23b45489fb0885d69a06ba1d648aeda973fae7bb981bafbb884165e514\nStatus: Downloaded newer image for nginx:1.21\n ---> 0e901e68141f\nStep 11/14 : COPY config.js.template /etc/nginx/templates/config.js.template\n ---> 1e1ecd5e1447\nStep 12/14 : COPY nginx.conf /etc/nginx/conf.d/default.conf\n ---> f6e9a5436e33\nStep 13/14 : COPY --from=0 /app/build /usr/share/nginx/html\n ---> 049909e68e88\nStep 14/14 : ENV NGINX_ENVSUBST_OUTPUT_DIR /usr/share/nginx/html\n ---> Running in a6ded4d9b7e9\nRemoving intermediate container a6ded4d9b7e9\n ---> 9164ffca9ec9\nSuccessfully built 9164ffca9ec9\nSuccessfully tagged cabana:latest\n","stderr":"","imageSize":158628602},"repair":{"violations":[{"name":"ruleAptGetInstallUseNoRec","position":{"start":2,"end":2,"columnStart":22,"columnEnd":63}}],"repairedDockerfile":"FROM node:16-buster-slim\n\nRUN apt-get update && apt-get install --no-install-recommends -y libusb-dev libudev-dev && rm -rf /var/lib/apt/lists/*\n\nWORKDIR /app\n\nCOPY package.json yarn.lock /app/\nRUN yarn install --frozen-lockfile\n\nCOPY . /app/\nARG SENTRY_AUTH_TOKEN\nRUN yarn netlify-sass\nRUN yarn build\n\n\nFROM nginx:1.21\n\nCOPY config.js.template /etc/nginx/templates/config.js.template\nCOPY nginx.conf /etc/nginx/conf.d/default.conf\nCOPY --from=0 /app/build /usr/share/nginx/html\n\nENV NGINX_ENVSUBST_OUTPUT_DIR /usr/share/nginx/html\n"},"repairedBuild":{"startTimestamp":1672513858225,"endTimestamp":1672514142436,"error":null,"stdout":"Sending build context to Docker daemon  5.279MB\r\r\nStep 1/14 : FROM node:16-buster-slim\n ---> 5fb222735b86\nStep 2/14 : RUN apt-get update && apt-get install --no-install-recommends -y libusb-dev libudev-dev && rm -rf /var/lib/apt/lists/*\n ---> Running in 33ea22286c38\nGet:1 http://deb.debian.org/debian buster InRelease [122 kB]\nGet:2 http://deb.debian.org/debian-security buster/updates InRelease [34.8 kB]\nGet:3 http://deb.debian.org/debian buster-updates InRelease [56.6 kB]\nGet:4 http://deb.debian.org/debian buster/main amd64 Packages [7909 kB]\nGet:5 http://deb.debian.org/debian-security buster/updates/main amd64 Packages [422 kB]\nGet:6 http://deb.debian.org/debian buster-updates/main amd64 Packages [8788 B]\nFetched 8553 kB in 1s (6031 kB/s)\nReading package lists...\nReading package lists...\nBuilding dependency tree...\nReading state information...\nThe following package was automatically installed and is no longer required:\n  lsb-base\nUse 'apt autoremove' to remove it.\nThe following additional packages will be installed:\n  libc-dev-bin libc6-dev libusb-0.1-4 linux-libc-dev\nSuggested packages:\n  glibc-doc manpages-dev\nRecommended packages:\n  manpages manpages-dev\nThe following NEW packages will be installed:\n  libc-dev-bin libc6-dev libudev-dev libusb-0.1-4 libusb-dev linux-libc-dev\n0 upgraded, 6 newly installed, 0 to remove and 0 not upgraded.\nNeed to get 4694 kB of archives.\nAfter this operation, 25.8 MB of additional disk space will be used.\nGet:1 http://deb.debian.org/debian-security buster/updates/main amd64 libc-dev-bin amd64 2.28-10+deb10u2 [276 kB]\nGet:2 http://deb.debian.org/debian-security buster/updates/main amd64 linux-libc-dev amd64 4.19.269-1 [1553 kB]\nGet:3 http://deb.debian.org/debian-security buster/updates/main amd64 libc6-dev amd64 2.28-10+deb10u2 [2693 kB]\nGet:4 http://deb.debian.org/debian buster/main amd64 libudev-dev amd64 241-7~deb10u8 [110 kB]\nGet:5 http://deb.debian.org/debian buster/main amd64 libusb-0.1-4 amd64 2:0.1.12-32 [23.4 kB]\nGet:6 http://deb.debian.org/debian buster/main amd64 libusb-dev amd64 2:0.1.12-32 [37.9 kB]\n\u001b[91mdebconf: delaying package configuration, since apt-utils is not installed\n\u001b[0mFetched 4694 kB in 0s (23.3 MB/s)\nSelecting previously unselected package libc-dev-bin.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 6469 files and directories currently installed.)\r\nPreparing to unpack .../0-libc-dev-bin_2.28-10+deb10u2_amd64.deb ...\r\nUnpacking libc-dev-bin (2.28-10+deb10u2) ...\r\nSelecting previously unselected package linux-libc-dev:amd64.\r\nPreparing to unpack .../1-linux-libc-dev_4.19.269-1_amd64.deb ...\r\nUnpacking linux-libc-dev:amd64 (4.19.269-1) ...\r\nSelecting previously unselected package libc6-dev:amd64.\r\nPreparing to unpack .../2-libc6-dev_2.28-10+deb10u2_amd64.deb ...\r\nUnpacking libc6-dev:amd64 (2.28-10+deb10u2) ...\r\nSelecting previously unselected package libudev-dev:amd64.\r\nPreparing to unpack .../3-libudev-dev_241-7~deb10u8_amd64.deb ...\r\nUnpacking libudev-dev:amd64 (241-7~deb10u8) ...\r\nSelecting previously unselected package libusb-0.1-4:amd64.\r\nPreparing to unpack .../4-libusb-0.1-4_2%3a0.1.12-32_amd64.deb ...\r\nUnpacking libusb-0.1-4:amd64 (2:0.1.12-32) ...\r\nSelecting previously unselected package libusb-dev.\r\nPreparing to unpack .../5-libusb-dev_2%3a0.1.12-32_amd64.deb ...\r\nUnpacking libusb-dev (2:0.1.12-32) ...\r\nSetting up linux-libc-dev:amd64 (4.19.269-1) ...\r\nSetting up libusb-0.1-4:amd64 (2:0.1.12-32) ...\r\nSetting up libudev-dev:amd64 (241-7~deb10u8) ...\r\nSetting up libc-dev-bin (2.28-10+deb10u2) ...\r\nSetting up libc6-dev:amd64 (2.28-10+deb10u2) ...\r\nSetting up libusb-dev (2:0.1.12-32) ...\r\nProcessing triggers for libc-bin (2.28-10+deb10u2) ...\r\nRemoving intermediate container 33ea22286c38\n ---> 019b75929bd5\nStep 3/14 : WORKDIR /app\n ---> Running in 0a8e286b589a\nRemoving intermediate container 0a8e286b589a\n ---> 76e55b864047\nStep 4/14 : COPY package.json yarn.lock /app/\n ---> 5b1811a69ebe\nStep 5/14 : RUN yarn install --frozen-lockfile\n ---> Running in cb4e5a713f89\nyarn install v1.22.19\n[1/4] Resolving packages...\n[2/4] Fetching packages...\n[3/4] Linking dependencies...\n\u001b[91mwarning \"react-scripts > @typescript-eslint/eslint-plugin > tsutils@3.21.0\" has unmet peer dependency \"typescript@>=2.8.0 || >= 3.2.0-dev || >= 3.3.0-dev || >= 3.4.0-dev || >= 3.5.0-dev || >= 3.6.0-dev || >= 3.6.0-beta || >= 3.7.0-dev || >= 3.7.0-beta\".\n\u001b[0m\u001b[91mwarning \"craco-sentry-plugin > @sentry/webpack-plugin@1.18.5\" has unmet peer dependency \"webpack@^4.41.31 || ^5.0.0\".\n\u001b[0m\u001b[91mwarning \" > worker-loader@2.0.0\" has unmet peer dependency \"webpack@^3.0.0 || ^4.0.0-alpha.0 || ^4.0.0\".\n\u001b[0m\u001b[91mwarning \" > webpack-sentry-plugin@1.16.0\" has unmet peer dependency \"webpack@^1.14.0 || >=2.2.0 <5.0.0\".\n\u001b[0m[4/4] Building fresh packages...\nDone in 69.17s.\nRemoving intermediate container cb4e5a713f89\n ---> f866b1d4346c\nStep 6/14 : COPY . /app/\n ---> e44672e35865\nStep 7/14 : ARG SENTRY_AUTH_TOKEN\n ---> Running in d37c5bdf17a8\nRemoving intermediate container d37c5bdf17a8\n ---> 3ac8cf1f727e\nStep 8/14 : RUN yarn netlify-sass\n ---> Running in 4cf49ac60416\nyarn run v1.22.19\n$ node-sass src/index.scss > src/index.css\nDone in 0.49s.\nRemoving intermediate container 4cf49ac60416\n ---> 88f6e5a3f2d5\nStep 9/14 : RUN yarn build\n ---> Running in eb662cf58f8a\nyarn run v1.22.19\n$ env-cmd .env.production craco build\nCreating an optimized production build...\n\u001b[91mBrowserslist: caniuse-lite is outdated. Please run:\n  npx browserslist@latest --update-db\n  Why you should do it regularly: https://github.com/browserslist/browserslist#browsers-data-updating\n\u001b[0mCompiled successfully.\n\nFile sizes after gzip:\n\n  582.98 KB  build/static/js/2.ade8c5da.chunk.js\n  229.79 KB  build/959d7e6337f03a0a8e30.worker.js\n  47.77 KB   build/static/js/main.a0baafbe.chunk.js\n  34.18 KB   build/da0974e7861df9dac365.worker.js\n  20.71 KB   build/842bcbc707b442ce46bd.worker.js\n  12.78 KB   build/static/css/main.7b01f41a.chunk.css\n  9.87 KB    build/8b958d600e3d73bc8e28.worker.js\n  846 B      build/static/js/runtime-main.07802d3b.js\n\nThe project was built assuming it is hosted at /.\nYou can control this with the homepage field in your package.json.\n\nThe build folder is ready to be deployed.\nYou may serve it with a static server:\n\n  yarn global add serve\n  serve -s build\n\nFind out more about deployment here:\n\n  bit.ly/CRA-deploy\n\nDone in 63.13s.\nRemoving intermediate container eb662cf58f8a\n ---> 225ca521311e\nStep 10/14 : FROM nginx:1.21\n ---> 0e901e68141f\nStep 11/14 : COPY config.js.template /etc/nginx/templates/config.js.template\n ---> cf2e7f178556\nStep 12/14 : COPY nginx.conf /etc/nginx/conf.d/default.conf\n ---> 32917e8b5f5a\nStep 13/14 : COPY --from=0 /app/build /usr/share/nginx/html\n ---> e827596daedc\nStep 14/14 : ENV NGINX_ENVSUBST_OUTPUT_DIR /usr/share/nginx/html\n ---> Running in 070bb97b9ca8\nRemoving intermediate container 070bb97b9ca8\n ---> 0ed466c191b5\nSuccessfully built 0ed466c191b5\nSuccessfully tagged cabana:latest\n","stderr":"","imageSize":158628602},"endTime":1672514142840}