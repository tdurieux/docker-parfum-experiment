{"repository":"https://github.com/rohanthewiz/go_notes","dockerfilePath":"Dockerfile","startTime":1672136665712,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/rohanthewiz/go_notes'...\n","error":null,"commit":"f269b45b1e62d0520a6ed31e04b17c3e3c705f0d"},"originalBuild":{"startTimestamp":1672136666747,"endTimestamp":1672136816788,"error":null,"stdout":"Sending build context to Docker daemon  239.1kB\r\r\nStep 1/12 : FROM golang:1.16.4-alpine3.13 as buildStage\n1.16.4-alpine3.13: Pulling from library/golang\n540db60ca938: Pulling fs layer\nadcc1eea9eea: Pulling fs layer\n4c4ab2625f07: Pulling fs layer\nc5e7595549f7: Pulling fs layer\n3df88182f7ac: Pulling fs layer\nc5e7595549f7: Waiting\n3df88182f7ac: Waiting\nadcc1eea9eea: Verifying Checksum\nadcc1eea9eea: Download complete\n540db60ca938: Verifying Checksum\n540db60ca938: Download complete\n4c4ab2625f07: Verifying Checksum\n4c4ab2625f07: Download complete\n540db60ca938: Pull complete\n3df88182f7ac: Verifying Checksum\n3df88182f7ac: Download complete\nadcc1eea9eea: Pull complete\n4c4ab2625f07: Pull complete\nc5e7595549f7: Verifying Checksum\nc5e7595549f7: Download complete\nc5e7595549f7: Pull complete\n3df88182f7ac: Pull complete\nDigest: sha256:0dc62c5cc2d97657c17ff3bc0224214e10226e245c94317e352ee8a2c54368b4\nStatus: Downloaded newer image for golang:1.16.4-alpine3.13\n ---> 722a834ff95b\nStep 2/12 : WORKDIR /root\n ---> Running in 1687e927efda\nRemoving intermediate container 1687e927efda\n ---> 86b3fef0a42f\nStep 3/12 : ADD . .\n ---> 320ca04eb7ff\nStep 4/12 : RUN apk add build-base\n ---> Running in 8eddb90e73ba\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.13/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.13/community/x86_64/APKINDEX.tar.gz\n(1/21) Upgrading musl (1.2.2-r0 -> 1.2.2-r1)\n(2/21) Installing libgcc (10.2.1_pre1-r3)\n(3/21) Installing libstdc++ (10.2.1_pre1-r3)\n(4/21) Installing binutils (2.35.2-r1)\n(5/21) Installing libmagic (5.39-r0)\n(6/21) Installing file (5.39-r0)\n(7/21) Installing libgomp (10.2.1_pre1-r3)\n(8/21) Installing libatomic (10.2.1_pre1-r3)\n(9/21) Installing libgphobos (10.2.1_pre1-r3)\n(10/21) Installing gmp (6.2.1-r1)\n(11/21) Installing isl22 (0.22-r0)\n(12/21) Installing mpfr4 (4.1.0-r0)\n(13/21) Installing mpc1 (1.2.0-r0)\n(14/21) Installing gcc (10.2.1_pre1-r3)\n(15/21) Installing musl-dev (1.2.2-r1)\n(16/21) Installing libc-dev (0.7.2-r3)\n(17/21) Installing g++ (10.2.1_pre1-r3)\n(18/21) Installing make (4.3-r0)\n(19/21) Installing fortify-headers (1.1-r0)\n(20/21) Installing patch (2.7.6-r7)\n(21/21) Installing build-base (0.5-r3)\nExecuting busybox-1.32.1-r6.trigger\nOK: 196 MiB in 35 packages\nRemoving intermediate container 8eddb90e73ba\n ---> 9ac593b2f2dc\nStep 5/12 : RUN go build -o app\n ---> Running in dd34285d6bbf\n\u001b[91mgo: downloading github.com/julienschmidt/httprouter v1.1.0\n\u001b[0m\u001b[91mgo: downloading github.com/mattn/go-sqlite3 v1.2.0\n\u001b[0m\u001b[91mgo: downloading github.com/jinzhu/gorm v0.0.0-20160404144928-5174cc5c242a\n\u001b[0m\u001b[91mgo: downloading github.com/rohanthewiz/go_markdown v0.0.0-20160315044756-cbcef778537c\n\u001b[0m\u001b[91mgo: downloading github.com/rohanthewiz/element v0.2.2\n\u001b[0m\u001b[91mgo: downloading github.com/jinzhu/inflection v0.0.0-20170102125226-1c35d901db3d\n\u001b[0m\u001b[91mgo: downloading golang.org/x/net v0.0.0-20170110034938-60c41d1de8da\n\u001b[0m\u001b[91m# github.com/mattn/go-sqlite3\nsqlite3-binding.c: In function 'sqlite3SelectNew.isra':\nsqlite3-binding.c:114528:10: warning: function may return address of local variable [-Wreturn-local-addr]\n114528 |   return pNew;\n       |          ^~~~\nsqlite3-binding.c:114488:10: note: declared here\n114488 |   Select standin;\n       |          ^~~~~~~\n\u001b[0mRemoving intermediate container dd34285d6bbf\n ---> 465c8f54a6b6\nStep 6/12 : FROM alpine:3.13\n3.13: Pulling from library/alpine\n72cfd02ff4d0: Pulling fs layer\n72cfd02ff4d0: Verifying Checksum\n72cfd02ff4d0: Download complete\n72cfd02ff4d0: Pull complete\nDigest: sha256:469b6e04ee185740477efa44ed5bdd64a07bbdd6c7e5f5d169e540889597b911\nStatus: Downloaded newer image for alpine:3.13\n ---> 6b5c5e00213a\nStep 7/12 : RUN mkdir /gn\n ---> Running in 3aa6066209d8\nRemoving intermediate container 3aa6066209d8\n ---> d5399918de6f\nStep 8/12 : WORKDIR /gn\n ---> Running in cea944e1ef8c\nRemoving intermediate container cea944e1ef8c\n ---> 051d6f94a0d3\nStep 9/12 : COPY --from=buildStage /root/app app\n ---> a4cb942189f2\nStep 10/12 : COPY --from=buildStage /root/js js\n ---> 0b799a20245e\nStep 11/12 : EXPOSE 8092\n ---> Running in 48c7b89518c2\nRemoving intermediate container 48c7b89518c2\n ---> 96659a6436d6\nStep 12/12 : CMD [\"/gn/app\", \"-svr\", \"-db\", \"/gn/go_notes.sqlite\"]\n ---> Running in 63970126bb15\nRemoving intermediate container 63970126bb15\n ---> 0ad324d3a4a8\nSuccessfully built 0ad324d3a4a8\nSuccessfully tagged go_notes:latest\n","stderr":"","imageSize":18359499},"repair":{"violations":[{"name":"apkAddUseNoCache","position":{"start":3,"end":3,"columnStart":4,"columnEnd":22}}],"repairedDockerfile":"FROM golang:1.16.4-alpine3.13 as buildStage\nWORKDIR /root\nADD . .\nRUN apk add --no-cache build-base\nRUN go build -o app\n# For later - RUN go test -c -coverpkg=../root/... -covermode=atomic ./api_tests\n\nFROM alpine:3.13\n\nRUN mkdir /gn\nWORKDIR /gn\n\nCOPY --from=buildStage /root/app app\nCOPY --from=buildStage /root/js js\n# Document that the service listens on the specified port.\nEXPOSE 8092\n\n# (For persistence setup an external volume mount and point `-db` there)\nCMD [\"/gn/app\", \"-svr\", \"-db\", \"/gn/go_notes.sqlite\"]\n"},"repairedBuild":{"startTimestamp":1672136817225,"endTimestamp":1672136879023,"error":null,"stdout":"Sending build context to Docker daemon  239.6kB\r\r\nStep 1/12 : FROM golang:1.16.4-alpine3.13 as buildStage\n ---> 722a834ff95b\nStep 2/12 : WORKDIR /root\n ---> Running in 23a2b509fb00\nRemoving intermediate container 23a2b509fb00\n ---> 0f69ac544b81\nStep 3/12 : ADD . .\n ---> 56da6327ec78\nStep 4/12 : RUN apk add --no-cache build-base\n ---> Running in 3db7dfdc9459\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.13/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.13/community/x86_64/APKINDEX.tar.gz\n(1/21) Upgrading musl (1.2.2-r0 -> 1.2.2-r1)\n(2/21) Installing libgcc (10.2.1_pre1-r3)\n(3/21) Installing libstdc++ (10.2.1_pre1-r3)\n(4/21) Installing binutils (2.35.2-r1)\n(5/21) Installing libmagic (5.39-r0)\n(6/21) Installing file (5.39-r0)\n(7/21) Installing libgomp (10.2.1_pre1-r3)\n(8/21) Installing libatomic (10.2.1_pre1-r3)\n(9/21) Installing libgphobos (10.2.1_pre1-r3)\n(10/21) Installing gmp (6.2.1-r1)\n(11/21) Installing isl22 (0.22-r0)\n(12/21) Installing mpfr4 (4.1.0-r0)\n(13/21) Installing mpc1 (1.2.0-r0)\n(14/21) Installing gcc (10.2.1_pre1-r3)\n(15/21) Installing musl-dev (1.2.2-r1)\n(16/21) Installing libc-dev (0.7.2-r3)\n(17/21) Installing g++ (10.2.1_pre1-r3)\n(18/21) Installing make (4.3-r0)\n(19/21) Installing fortify-headers (1.1-r0)\n(20/21) Installing patch (2.7.6-r7)\n(21/21) Installing build-base (0.5-r3)\nExecuting busybox-1.32.1-r6.trigger\nOK: 196 MiB in 35 packages\nRemoving intermediate container 3db7dfdc9459\n ---> f9031a4d8d47\nStep 5/12 : RUN go build -o app\n ---> Running in ea7b783aa8ab\n\u001b[91mgo: downloading github.com/julienschmidt/httprouter v1.1.0\n\u001b[0m\u001b[91mgo: downloading github.com/jinzhu/gorm v0.0.0-20160404144928-5174cc5c242a\n\u001b[0m\u001b[91mgo: downloading github.com/mattn/go-sqlite3 v1.2.0\n\u001b[0m\u001b[91mgo: downloading github.com/rohanthewiz/element v0.2.2\n\u001b[0m\u001b[91mgo: downloading github.com/rohanthewiz/go_markdown v0.0.0-20160315044756-cbcef778537c\n\u001b[0m\u001b[91mgo: downloading github.com/jinzhu/inflection v0.0.0-20170102125226-1c35d901db3d\n\u001b[0m\u001b[91mgo: downloading golang.org/x/net v0.0.0-20170110034938-60c41d1de8da\n\u001b[0m\u001b[91m# github.com/mattn/go-sqlite3\nsqlite3-binding.c: In function 'sqlite3SelectNew.isra':\nsqlite3-binding.c:114528:10: warning: function may return address of local variable [-Wreturn-local-addr]\n114528 |   return pNew;\n       |          ^~~~\nsqlite3-binding.c:114488:10: note: declared here\n114488 |   Select standin;\n       |          ^~~~~~~\n\u001b[0mRemoving intermediate container ea7b783aa8ab\n ---> b09f37a70df4\nStep 6/12 : FROM alpine:3.13\n ---> 6b5c5e00213a\nStep 7/12 : RUN mkdir /gn\n ---> Running in d9339c2519f0\nRemoving intermediate container d9339c2519f0\n ---> 74ad41bed3ab\nStep 8/12 : WORKDIR /gn\n ---> Running in 8306aa6787eb\nRemoving intermediate container 8306aa6787eb\n ---> dbb94b48dc04\nStep 9/12 : COPY --from=buildStage /root/app app\n ---> cc45a24b8edc\nStep 10/12 : COPY --from=buildStage /root/js js\n ---> 1cf744903c25\nStep 11/12 : EXPOSE 8092\n ---> Running in 78759e113afb\nRemoving intermediate container 78759e113afb\n ---> f5d2e8c290ba\nStep 12/12 : CMD [\"/gn/app\", \"-svr\", \"-db\", \"/gn/go_notes.sqlite\"]\n ---> Running in 9f3175d6d3ad\nRemoving intermediate container 9f3175d6d3ad\n ---> de9fcf33e167\nSuccessfully built de9fcf33e167\nSuccessfully tagged go_notes:latest\n","stderr":"","imageSize":18359499},"endTime":1672136879291}