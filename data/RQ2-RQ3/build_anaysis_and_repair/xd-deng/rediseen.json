{"repository":"https://github.com/xd-deng/rediseen","dockerfilePath":"Dockerfile","startTime":1673177181888,"endTime":1673177388980,"clone":{"startTime":1673177181889,"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/xd-deng/rediseen'...\n","error":null,"endTime":1673177182594,"commit":"684d3d1cc6a1a4ccf0a157ccad7e54c9c7229d6c"},"originalBuild":{"startTime":1673177182676,"endTime":1673177317676,"error":null,"stdout":"Sending build context to Docker daemon  312.3kB\r\r\nStep 1/14 : FROM golang:1.14.7-alpine3.12 AS builder\n1.14.7-alpine3.12: Pulling from library/golang\ndf20fa9351a1: Pulling fs layer\ned8968b2872e: Pulling fs layer\na92cc7c5fd73: Pulling fs layer\n628f3eafb14e: Pulling fs layer\n4c45347fed5d: Pulling fs layer\n628f3eafb14e: Waiting\n4c45347fed5d: Waiting\na92cc7c5fd73: Verifying Checksum\na92cc7c5fd73: Download complete\ned8968b2872e: Verifying Checksum\ned8968b2872e: Download complete\ndf20fa9351a1: Verifying Checksum\ndf20fa9351a1: Download complete\n4c45347fed5d: Download complete\ndf20fa9351a1: Pull complete\n628f3eafb14e: Verifying Checksum\n628f3eafb14e: Download complete\ned8968b2872e: Pull complete\na92cc7c5fd73: Pull complete\n628f3eafb14e: Pull complete\n4c45347fed5d: Pull complete\nDigest: sha256:680a1ec90372b08a26c2bab408014fc4b5236a91dc701a1bf784d3c64f11d964\nStatus: Downloaded newer image for golang:1.14.7-alpine3.12\n ---> cf2ff089aa2c\nStep 2/14 : WORKDIR /app\n ---> Running in ca2f31ecc6ce\nRemoving intermediate container ca2f31ecc6ce\n ---> 8be2b89e235f\nStep 3/14 : COPY . /app\n ---> ebdba38dff71\nStep 4/14 : RUN apk add --no-cache git gcc\n ---> Running in ed43da05e81e\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.12/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.12/community/x86_64/APKINDEX.tar.gz\n(1/16) Installing libgcc (9.3.0-r2)\n(2/16) Installing libstdc++ (9.3.0-r2)\n(3/16) Installing binutils (2.34-r2)\n(4/16) Installing gmp (6.2.1-r1)\n(5/16) Installing isl (0.18-r0)\n(6/16) Installing libgomp (9.3.0-r2)\n(7/16) Installing libatomic (9.3.0-r2)\n(8/16) Installing libgphobos (9.3.0-r2)\n(9/16) Installing mpfr4 (4.0.2-r4)\n(10/16) Installing mpc1 (1.1.0-r1)\n(11/16) Installing gcc (9.3.0-r2)\n(12/16) Installing nghttp2-libs (1.41.0-r0)\n(13/16) Installing libcurl (7.79.1-r1)\n(14/16) Installing expat (2.2.10-r4)\n(15/16) Installing pcre2 (10.35-r0)\n(16/16) Installing git (2.26.3-r1)\nExecuting busybox-1.31.1-r16.trigger\nOK: 146 MiB in 31 packages\nRemoving intermediate container ed43da05e81e\n ---> aa6aa1e48c01\nStep 5/14 : RUN apk add libc-dev\n ---> Running in 756209886a5e\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.12/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.12/community/x86_64/APKINDEX.tar.gz\n(1/3) Upgrading musl (1.1.24-r9 -> 1.1.24-r10)\n(2/3) Installing musl-dev (1.1.24-r10)\n(3/3) Installing libc-dev (0.7.2-r3)\nOK: 156 MiB in 33 packages\nRemoving intermediate container 756209886a5e\n ---> 870acf1a3c3f\nStep 6/14 : RUN go build github.com/xd-deng/rediseen\n ---> Running in 1f17f745e3e1\n\u001b[91mgo: downloading github.com/go-redis/redis/v8 v8.0.0-beta.6\n\u001b[0m\u001b[91mgo: downloading github.com/spf13/cobra v1.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/spf13/pflag v1.0.3\n\u001b[0m\u001b[91mgo: downloading github.com/dgryski/go-rendezvous v0.0.0-20200624174652-8d2f3be8b2d9\n\u001b[0m\u001b[91mgo: downloading github.com/cespare/xxhash v1.1.0\n\u001b[0m\u001b[91mgo: downloading golang.org/x/exp v0.0.0-20200513190911-00229845015e\n\u001b[0m\u001b[91mgo: downloading go.opentelemetry.io/otel v0.7.0\n\u001b[0m\u001b[91mgo: downloading google.golang.org/grpc v1.30.0\n\u001b[0mRemoving intermediate container 1f17f745e3e1\n ---> 9c56d53fa909\nStep 7/14 : RUN REDISEEN_REDIS_URI=redis://:@localhost:6400 REDISEEN_KEY_PATTERN_EXPOSED=\"^key:[.]*\"     REDISEEN_TEST_MODE=true REDISEEN_DB_EXPOSED=0-5     go test -cover github.com/xd-deng/rediseen\n ---> Running in c40c88cd36fa\n\u001b[91mgo: downloading github.com/alicebob/miniredis v2.5.0+incompatible\n\u001b[0m\u001b[91mgo: downloading github.com/alicebob/gopher-json v0.0.0-20180125190556-5a6b3ba71ee6\ngo: downloading github.com/gomodule/redigo v1.8.8\ngo: downloading github.com/yuin/gopher-lua v0.0.0-20190514113301-1cd887cd7036\n\u001b[0mok  \tgithub.com/xd-deng/rediseen\t0.188s\tcoverage: 84.5% of statements\nRemoving intermediate container c40c88cd36fa\n ---> 7ffa51b47f17\nStep 8/14 : FROM alpine:3.12\n3.12: Pulling from library/alpine\n1b7ca6aea1dd: Pulling fs layer\n1b7ca6aea1dd: Verifying Checksum\n1b7ca6aea1dd: Download complete\n1b7ca6aea1dd: Pull complete\nDigest: sha256:c75ac27b49326926b803b9ed43bf088bc220d22556de1bc5f72d742c91398f69\nStatus: Downloaded newer image for alpine:3.12\n ---> 24c8ece58a1a\nStep 9/14 : WORKDIR /app\n ---> Running in 00c32885458d\nRemoving intermediate container 00c32885458d\n ---> feeb5633a0a5\nStep 10/14 : COPY --from=builder /app/rediseen ./rediseen\n ---> a8ac26053b83\nStep 11/14 : ENV REDISEEN_HOST=0.0.0.0\n ---> Running in 407ae82a8969\nRemoving intermediate container 407ae82a8969\n ---> 9b6c354d5045\nStep 12/14 : EXPOSE 8000\n ---> Running in 6c5af706b610\nRemoving intermediate container 6c5af706b610\n ---> d78bc8d3cabe\nStep 13/14 : ENV PATH=$PATH:${pwd}\n ---> Running in ecf971acfd76\nRemoving intermediate container ecf971acfd76\n ---> f8bccdddfd20\nStep 14/14 : CMD [\"./rediseen\", \"start\"]\n ---> Running in 70c2d679e0e1\nRemoving intermediate container 70c2d679e0e1\n ---> 588404a996da\nSuccessfully built 588404a996da\nSuccessfully tagged rediseen:latest\n","stderr":"","imageSize":19154056},"repair":{"startTime":1673177317747,"endTime":1673177317813,"violations":[{"name":"apkAddUseNoCache","position":{"start":6,"end":6,"columnStart":4,"columnEnd":20}}],"repairedDockerfile":"FROM golang:1.14.7-alpine3.12 AS builder\n\nWORKDIR /app\nCOPY . /app\n\nRUN apk add --no-cache git gcc\nRUN apk add --no-cache libc-dev\n\nRUN go build github.com/xd-deng/rediseen\n\n# Unit Test\nRUN REDISEEN_REDIS_URI=redis://:@localhost:6400 REDISEEN_KEY_PATTERN_EXPOSED=\"^key:[.]*\" \\\n    REDISEEN_TEST_MODE=true REDISEEN_DB_EXPOSED=0-5 \\\n    go test -cover github.com/xd-deng/rediseen\n\n\n# For smaller image size\n# see https://medium.com/@gdiener/how-to-build-a-smaller-docker-image-76779e18d48a\nFROM alpine:3.12\nWORKDIR /app\nCOPY --from=builder /app/rediseen ./rediseen\n\n# To allow the service to be accessible outside the container.\n# Whether the service should be accessible from only localhost or ALL interfaces will\n#   be decided when the container is started, rather than being decided by REDISEEN_HOST.\nENV REDISEEN_HOST=0.0.0.0\n\nEXPOSE 8000\n\nENV PATH=$PATH:${pwd}\n\nCMD [\"./rediseen\", \"start\"]\n"},"repairedBuild":{"startTime":1673177319035,"endTime":1673177388729,"error":null,"stdout":"Sending build context to Docker daemon  312.3kB\r\r\nStep 1/14 : FROM golang:1.14.7-alpine3.12 AS builder\n ---> cf2ff089aa2c\nStep 2/14 : WORKDIR /app\n ---> Running in 9803e0b73b2a\nRemoving intermediate container 9803e0b73b2a\n ---> d5829464eb95\nStep 3/14 : COPY . /app\n ---> 2123f01315e1\nStep 4/14 : RUN apk add --no-cache git gcc\n ---> Running in d4a9fa388c8a\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.12/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.12/community/x86_64/APKINDEX.tar.gz\n(1/16) Installing libgcc (9.3.0-r2)\n(2/16) Installing libstdc++ (9.3.0-r2)\n(3/16) Installing binutils (2.34-r2)\n(4/16) Installing gmp (6.2.1-r1)\n(5/16) Installing isl (0.18-r0)\n(6/16) Installing libgomp (9.3.0-r2)\n(7/16) Installing libatomic (9.3.0-r2)\n(8/16) Installing libgphobos (9.3.0-r2)\n(9/16) Installing mpfr4 (4.0.2-r4)\n(10/16) Installing mpc1 (1.1.0-r1)\n(11/16) Installing gcc (9.3.0-r2)\n(12/16) Installing nghttp2-libs (1.41.0-r0)\n(13/16) Installing libcurl (7.79.1-r1)\n(14/16) Installing expat (2.2.10-r4)\n(15/16) Installing pcre2 (10.35-r0)\n(16/16) Installing git (2.26.3-r1)\nExecuting busybox-1.31.1-r16.trigger\nOK: 146 MiB in 31 packages\nRemoving intermediate container d4a9fa388c8a\n ---> be42ae50f97b\nStep 5/14 : RUN apk add --no-cache libc-dev\n ---> Running in dc545615450b\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.12/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.12/community/x86_64/APKINDEX.tar.gz\n(1/3) Upgrading musl (1.1.24-r9 -> 1.1.24-r10)\n(2/3) Installing musl-dev (1.1.24-r10)\n(3/3) Installing libc-dev (0.7.2-r3)\nOK: 156 MiB in 33 packages\nRemoving intermediate container dc545615450b\n ---> 161ca3db8366\nStep 6/14 : RUN go build github.com/xd-deng/rediseen\n ---> Running in 8d089a11df5d\n\u001b[91mgo: downloading github.com/go-redis/redis/v8 v8.0.0-beta.6\ngo: downloading github.com/spf13/cobra v1.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/spf13/pflag v1.0.3\n\u001b[0m\u001b[91mgo: downloading github.com/dgryski/go-rendezvous v0.0.0-20200624174652-8d2f3be8b2d9\ngo: downloading golang.org/x/exp v0.0.0-20200513190911-00229845015e\ngo: downloading github.com/cespare/xxhash v1.1.0\n\u001b[0m\u001b[91mgo: downloading go.opentelemetry.io/otel v0.7.0\n\u001b[0m\u001b[91mgo: downloading google.golang.org/grpc v1.30.0\n\u001b[0mRemoving intermediate container 8d089a11df5d\n ---> 226bec7b0681\nStep 7/14 : RUN REDISEEN_REDIS_URI=redis://:@localhost:6400 REDISEEN_KEY_PATTERN_EXPOSED=\"^key:[.]*\"     REDISEEN_TEST_MODE=true REDISEEN_DB_EXPOSED=0-5     go test -cover github.com/xd-deng/rediseen\n ---> Running in 1f49ef30f296\n\u001b[91mgo: downloading github.com/alicebob/miniredis v2.5.0+incompatible\n\u001b[0m\u001b[91mgo: downloading github.com/gomodule/redigo v1.8.8\ngo: downloading github.com/yuin/gopher-lua v0.0.0-20190514113301-1cd887cd7036\ngo: downloading github.com/alicebob/gopher-json v0.0.0-20180125190556-5a6b3ba71ee6\n\u001b[0mok  \tgithub.com/xd-deng/rediseen\t1.621s\tcoverage: 84.5% of statements\nRemoving intermediate container 1f49ef30f296\n ---> 384334964809\nStep 8/14 : FROM alpine:3.12\n ---> 24c8ece58a1a\nStep 9/14 : WORKDIR /app\n ---> Running in 8d1526c5ebb9\nRemoving intermediate container 8d1526c5ebb9\n ---> d6a3fa407aa6\nStep 10/14 : COPY --from=builder /app/rediseen ./rediseen\n ---> 9b4a43aea95d\nStep 11/14 : ENV REDISEEN_HOST=0.0.0.0\n ---> Running in bb540ff15271\nRemoving intermediate container bb540ff15271\n ---> afb82eaf8302\nStep 12/14 : EXPOSE 8000\n ---> Running in a05e25428a7a\nRemoving intermediate container a05e25428a7a\n ---> 72f449b265b2\nStep 13/14 : ENV PATH=$PATH:${pwd}\n ---> Running in 4e31741c7110\nRemoving intermediate container 4e31741c7110\n ---> b132ebc391d0\nStep 14/14 : CMD [\"./rediseen\", \"start\"]\n ---> Running in 7f81d19b7e87\nRemoving intermediate container 7f81d19b7e87\n ---> d86dcbb7cac6\nSuccessfully built d86dcbb7cac6\nSuccessfully tagged rediseen:latest\n","stderr":"","imageSize":19154056}}