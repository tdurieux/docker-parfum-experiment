{"repository":"https://github.com/configcat/docs","dockerfilePath":"Dockerfile","startTime":1672996361581,"endTime":1672997067144,"clone":{"startTime":1672996361582,"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/configcat/docs'...\n","error":null,"endTime":1672996363973,"commit":"e1ff71fe217da4eac73d280a7f42ee4cbe8fedfc"},"originalBuild":{"startTime":1672996364048,"endTime":1672996734061,"error":null,"stdout":"Sending build context to Docker daemon  44.94MB\r\r\nStep 1/19 : FROM nginx:alpine AS base\nalpine: Pulling from library/nginx\nc158987b0551: Already exists\n1e35f6679fab: Pulling fs layer\ncb9626c74200: Pulling fs layer\nb6334b6ace34: Pulling fs layer\nf1d1c9928c82: Pulling fs layer\n9b6f639ec6ea: Pulling fs layer\nee68d3549ec8: Pulling fs layer\nee68d3549ec8: Waiting\nf1d1c9928c82: Waiting\n9b6f639ec6ea: Waiting\nb6334b6ace34: Verifying Checksum\nb6334b6ace34: Download complete\ncb9626c74200: Download complete\n1e35f6679fab: Verifying Checksum\n1e35f6679fab: Download complete\n9b6f639ec6ea: Verifying Checksum\n9b6f639ec6ea: Download complete\nf1d1c9928c82: Download complete\n1e35f6679fab: Pull complete\nee68d3549ec8: Verifying Checksum\nee68d3549ec8: Download complete\ncb9626c74200: Pull complete\nb6334b6ace34: Pull complete\nf1d1c9928c82: Pull complete\n9b6f639ec6ea: Pull complete\nee68d3549ec8: Pull complete\nDigest: sha256:dd8a054d7ef030e94a6449783605d6c306c1f69c10c2fa06b66a030e0d1db793\nStatus: Downloaded newer image for nginx:alpine\n ---> 1e415454686a\nStep 2/19 : RUN rm -rf /usr/share/nginx/html/*\n ---> Running in 727f163764b6\nRemoving intermediate container 727f163764b6\n ---> 38a13551ddbe\nStep 3/19 : COPY ./start.sh start.sh\n ---> 6c4375b13d1e\nStep 4/19 : COPY ./nginx/nginx.conf.template /etc/nginx/conf.d/nginx.conf.template\n ---> fd53d12db8a5\nStep 5/19 : FROM node:16.15 AS builder\n16.15: Pulling from library/node\nea267e4631a9: Pulling fs layer\n8a014c921489: Pulling fs layer\n293ff1be7001: Pulling fs layer\n4e42533e7311: Pulling fs layer\ne56e70ed0dfb: Pulling fs layer\n43ccf1ebdd00: Pulling fs layer\n06925feb028d: Pulling fs layer\n403a3da90881: Pulling fs layer\n8aa2a751e29b: Pulling fs layer\ne56e70ed0dfb: Waiting\n43ccf1ebdd00: Waiting\n06925feb028d: Waiting\n403a3da90881: Waiting\n8aa2a751e29b: Waiting\n8a014c921489: Verifying Checksum\n8a014c921489: Download complete\n293ff1be7001: Verifying Checksum\n293ff1be7001: Download complete\nea267e4631a9: Verifying Checksum\nea267e4631a9: Download complete\n43ccf1ebdd00: Verifying Checksum\n43ccf1ebdd00: Download complete\n4e42533e7311: Verifying Checksum\n4e42533e7311: Download complete\n403a3da90881: Verifying Checksum\n403a3da90881: Download complete\n8aa2a751e29b: Verifying Checksum\n8aa2a751e29b: Download complete\ne56e70ed0dfb: Verifying Checksum\ne56e70ed0dfb: Download complete\n06925feb028d: Verifying Checksum\n06925feb028d: Download complete\nea267e4631a9: Pull complete\n8a014c921489: Pull complete\n293ff1be7001: Pull complete\n4e42533e7311: Pull complete\ne56e70ed0dfb: Pull complete\n43ccf1ebdd00: Pull complete\n06925feb028d: Pull complete\n403a3da90881: Pull complete\n8aa2a751e29b: Pull complete\nDigest: sha256:a13d2d2aec7f0dae18a52ca4d38b592e45a45cc4456ffab82e5ff10d8a53d042\nStatus: Downloaded newer image for node:16.15\n ---> b9f398d30e45\nStep 6/19 : COPY ./website/package.json /app/website/package.json\n ---> 35655601ea57\nStep 7/19 : COPY ./website/package-lock.json /app/website/package-lock.json\n ---> fae58d2c66d9\nStep 8/19 : WORKDIR /app/website\n ---> Running in c9e0e807f2f8\nRemoving intermediate container c9e0e807f2f8\n ---> 5b4d856fafff\nStep 9/19 : RUN npm install\n ---> Running in 5f1079d08481\n\u001b[91mnpm WARN deprecated stable@0.1.8: Modern JS already guarantees Array#sort() is a stable sort, so this library is deprecated. See the compatibility table on MDN: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/sort#browser_compatibility\n\u001b[0m\nadded 1134 packages, and audited 1135 packages in 28s\n\n217 packages are looking for funding\n  run `npm fund` for details\n\n22 vulnerabilities (8 moderate, 14 high)\n\nTo address issues that do not require attention, run:\n  npm audit fix\n\nSome issues need review, and may require choosing\na different dependency.\n\nRun `npm audit` for details.\n\u001b[91mnpm notice \nnpm notice New major version of npm available! 8.11.0 -> 9.2.0\n\u001b[0m\u001b[91mnpm notice Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm notice\u001b[0m\u001b[91m Run `npm install -g npm@9.2.0` to update!\nnpm notice\u001b[0m\u001b[91m \n\u001b[0mRemoving intermediate container 5f1079d08481\n ---> c73be41e92e8\nStep 10/19 : COPY ./website /app/website\n ---> 41146f8b3c1f\nStep 11/19 : RUN npm run build\n ---> Running in af4336deab8a\n\n> configcat-docs@1.0.0 build\n> docusaurus build\n\n[INFO] [en] Creating an optimized production build...\nℹ Compiling Client\nℹ Compiling Server\n✔ Client: Compiled successfully in 29.20s\n✔ Server: Compiled successfully in 34.98s\n[SUCCESS] Generated static files in \"build\".\n[INFO] Use `npm run serve` command to test your build locally.\nRemoving intermediate container af4336deab8a\n ---> d8ee2bf1ac66\nStep 12/19 : FROM sonarsource/sonar-scanner-cli:4 AS sonarqube_scan\n4: Pulling from sonarsource/sonar-scanner-cli\nc158987b0551: Already exists\nd5b6d381b90f: Pulling fs layer\nbeb8e1d95ff8: Pulling fs layer\nbeb8e1d95ff8: Verifying Checksum\nbeb8e1d95ff8: Download complete\nd5b6d381b90f: Verifying Checksum\nd5b6d381b90f: Download complete\nd5b6d381b90f: Pull complete\nbeb8e1d95ff8: Pull complete\nDigest: sha256:ab2730009fab509398b9d964b667405bae6d8478667ffefa77988b9fe4bd0158\nStatus: Downloaded newer image for sonarsource/sonar-scanner-cli:4\n ---> fc2e84668619\nStep 13/19 : WORKDIR /app\n ---> Running in 2cf74484f5cc\nRemoving intermediate container 2cf74484f5cc\n ---> ec7845d7c587\nStep 14/19 : ARG SONAR_TOKEN\n ---> Running in b3939d58500c\nRemoving intermediate container b3939d58500c\n ---> 1764f04446fe\nStep 15/19 : COPY --from=builder /app/website/build /app\n ---> f324508b11f8\nStep 16/19 : RUN if [ -z \"$SONAR_TOKEN\" ]   ; then     echo Sonar scan skipped   ; else     sonar-scanner         -Dsonar.host.url=\"https://sonarcloud.io\"         -Dsonar.login=\"$SONAR_TOKEN\"         -Dsonar.projectKey=\"configcat_docs\"         -Dsonar.projectName=\"docs\"         -Dsonar.organization=\"configcat\"   ; fi\n ---> Running in eef8354d69fb\nSonar scan skipped\nRemoving intermediate container eef8354d69fb\n ---> 1ddece0c30b0\nStep 17/19 : FROM base as final\n ---> fd53d12db8a5\nStep 18/19 : COPY --from=builder /app/website/build /usr/share/nginx/temphtml\n ---> 98c8b71e5afa\nStep 19/19 : CMD [\"sh\", \"start.sh\"]\n ---> Running in bbd38f2c7417\nRemoving intermediate container bbd38f2c7417\n ---> b2aad5fcc2fd\nSuccessfully built b2aad5fcc2fd\nSuccessfully tagged docs:latest\n","stderr":"","imageSize":68152742},"repair":{"startTime":1672996734120,"endTime":1672996734209,"violations":[{"name":"npmCacheCleanAfterInstall","position":{"start":10,"end":10,"columnStart":4,"columnEnd":15}}],"repairedDockerfile":"FROM nginx:alpine AS base\nRUN rm -rf /usr/share/nginx/html/*\nCOPY ./start.sh start.sh\nCOPY ./nginx/nginx.conf.template /etc/nginx/conf.d/nginx.conf.template\n\n# If you update node version, please also update the node version in the .nvmrc file.\nFROM node:16.15 AS builder\nCOPY ./website/package.json /app/website/package.json\nCOPY ./website/package-lock.json /app/website/package-lock.json\nWORKDIR /app/website\nRUN npm install && npm cache clean --force;\nCOPY ./website /app/website\nRUN npm run build\n\nFROM sonarsource/sonar-scanner-cli:4 AS sonarqube_scan\nWORKDIR /app\nARG SONAR_TOKEN\nCOPY --from=builder /app/website/build /app\n\nRUN if [ -z \"$SONAR_TOKEN\" ] \\ \n  ; then \\\n    echo Sonar scan skipped \\ \n  ; else \\ \n    sonar-scanner \\\n        -Dsonar.host.url=\"https://sonarcloud.io\" \\\n        -Dsonar.login=\"$SONAR_TOKEN\" \\\n        -Dsonar.projectKey=\"configcat_docs\" \\\n        -Dsonar.projectName=\"docs\" \\\n        -Dsonar.organization=\"configcat\" \\\n  ; fi\n\nFROM base as final\nCOPY --from=builder /app/website/build /usr/share/nginx/temphtml\nCMD [\"sh\", \"start.sh\"]\n"},"repairedBuild":{"startTime":1672996739657,"endTime":1672997066882,"error":null,"stdout":"Sending build context to Docker daemon  44.94MB\r\r\nStep 1/19 : FROM nginx:alpine AS base\n ---> 1e415454686a\nStep 2/19 : RUN rm -rf /usr/share/nginx/html/*\n ---> Running in 56f5c9f90e42\nRemoving intermediate container 56f5c9f90e42\n ---> 9292651b9068\nStep 3/19 : COPY ./start.sh start.sh\n ---> 31919e3ba1ff\nStep 4/19 : COPY ./nginx/nginx.conf.template /etc/nginx/conf.d/nginx.conf.template\n ---> e6ae3ef805b8\nStep 5/19 : FROM node:16.15 AS builder\n ---> b9f398d30e45\nStep 6/19 : COPY ./website/package.json /app/website/package.json\n ---> 6271337de453\nStep 7/19 : COPY ./website/package-lock.json /app/website/package-lock.json\n ---> 7e9c26bb1634\nStep 8/19 : WORKDIR /app/website\n ---> Running in d84dbf48dacc\nRemoving intermediate container d84dbf48dacc\n ---> 4e863fd9f614\nStep 9/19 : RUN npm install && npm cache clean --force;\n ---> Running in 39748cf6cc2f\n\u001b[91mnpm WARN deprecated stable@0.1.8: Modern JS already guarantees Array#sort() is a stable sort, so this library is deprecated. See the compatibility table on MDN: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/sort#browser_compatibility\n\u001b[0m\nadded 1134 packages, and audited 1135 packages in 26s\n\n217 packages are looking for funding\n  run `npm fund` for details\n\n22 vulnerabilities (8 moderate, 14 high)\n\nTo address issues that do not require attention, run:\n  npm audit fix\n\nSome issues need review, and may require choosing\na different dependency.\n\nRun `npm audit` for details.\n\u001b[91mnpm notice \nnpm notice\u001b[0m\u001b[91m New major version of npm available! 8.11.0 -> 9.2.0\nnpm notice Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm notice\u001b[0m\u001b[91m Run `npm install -g npm@9.2.0` to update!\nnpm\u001b[0m\u001b[91m notice\u001b[0m\u001b[91m \n\u001b[0m\u001b[91mnpm\u001b[0m\u001b[91m WARN using --force Recommended protections disabled.\n\u001b[0mRemoving intermediate container 39748cf6cc2f\n ---> 161b525311d2\nStep 10/19 : COPY ./website /app/website\n ---> 2c4b220efc42\nStep 11/19 : RUN npm run build\n ---> Running in b79538f1ddf7\n\n> configcat-docs@1.0.0 build\n> docusaurus build\n\n[INFO] [en] Creating an optimized production build...\nℹ Compiling Client\nℹ Compiling Server\n✔ Client: Compiled successfully in 28.99s\n✔ Server: Compiled successfully in 34.48s\n[SUCCESS] Generated static files in \"build\".\n[INFO] Use `npm run serve` command to test your build locally.\nRemoving intermediate container b79538f1ddf7\n ---> e9be037b2a01\nStep 12/19 : FROM sonarsource/sonar-scanner-cli:4 AS sonarqube_scan\n ---> fc2e84668619\nStep 13/19 : WORKDIR /app\n ---> Running in 941197a45ad7\nRemoving intermediate container 941197a45ad7\n ---> 1f967ddce4f3\nStep 14/19 : ARG SONAR_TOKEN\n ---> Running in 0bc9fb233cb4\nRemoving intermediate container 0bc9fb233cb4\n ---> b980c9df5be0\nStep 15/19 : COPY --from=builder /app/website/build /app\n ---> 8a86ae9f707e\nStep 16/19 : RUN if [ -z \"$SONAR_TOKEN\" ]   ; then     echo Sonar scan skipped   ; else     sonar-scanner         -Dsonar.host.url=\"https://sonarcloud.io\"         -Dsonar.login=\"$SONAR_TOKEN\"         -Dsonar.projectKey=\"configcat_docs\"         -Dsonar.projectName=\"docs\"         -Dsonar.organization=\"configcat\"   ; fi\n ---> Running in 8c2aa5755d05\nSonar scan skipped\nRemoving intermediate container 8c2aa5755d05\n ---> ce1319daf367\nStep 17/19 : FROM base as final\n ---> e6ae3ef805b8\nStep 18/19 : COPY --from=builder /app/website/build /usr/share/nginx/temphtml\n ---> e32c2c7d2ca2\nStep 19/19 : CMD [\"sh\", \"start.sh\"]\n ---> Running in e101aa6b7e1b\nRemoving intermediate container e101aa6b7e1b\n ---> 48ba31da47cc\nSuccessfully built 48ba31da47cc\nSuccessfully tagged docs:latest\n","stderr":"","imageSize":68152742}}