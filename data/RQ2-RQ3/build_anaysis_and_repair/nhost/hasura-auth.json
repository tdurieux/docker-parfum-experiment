{"repository":"https://github.com/nhost/hasura-auth","dockerfilePath":"Dockerfile","startTime":1672203985864,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/nhost/hasura-auth'...\n","error":null,"commit":"d11cabf8d30a142e3526ceb5c45ad70f0d077a85"},"originalBuild":{"startTimestamp":1672203986841,"endTimestamp":1672204148354,"error":null,"stdout":"Sending build context to Docker daemon  1.178MB\r\r\nStep 1/21 : FROM node:16-alpine AS builder\n16-alpine: Pulling from library/node\nc158987b0551: Already exists\ne15b2da73907: Pulling fs layer\n90461d7cfbbe: Pulling fs layer\n06b1a47b9f99: Pulling fs layer\n06b1a47b9f99: Download complete\n90461d7cfbbe: Verifying Checksum\n90461d7cfbbe: Download complete\ne15b2da73907: Verifying Checksum\ne15b2da73907: Download complete\ne15b2da73907: Pull complete\n90461d7cfbbe: Pull complete\n06b1a47b9f99: Pull complete\nDigest: sha256:58e4dfcf063f67d71e608c3cace5a0bcf39e9dbab3047b41e20c15c7132d1d46\nStatus: Downloaded newer image for node:16-alpine\n ---> 610c0494e820\nStep 2/21 : WORKDIR /app\n ---> Running in fd97f95bca93\nRemoving intermediate container fd97f95bca93\n ---> 527075467636\nStep 3/21 : RUN npm i -g pnpm\n ---> Running in 0e4099f8aca9\n\nadded 1 package, and audited 2 packages in 748ms\n\n1 package is looking for funding\n  run `npm fund` for details\n\nfound 0 vulnerabilities\n\u001b[91mnpm\u001b[0m\u001b[91m \u001b[0m\u001b[91mnotice\u001b[0m\u001b[91m \n\u001b[0m\u001b[91mnpm\u001b[0m\u001b[91m notice\u001b[0m\u001b[91m New major version of npm available! 8.19.3 -> 9.2.0\nnpm\u001b[0m\u001b[91m \u001b[0m\u001b[91mnotice\u001b[0m\u001b[91m Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm notice\u001b[0m\u001b[91m Run `npm install -g npm@9.2.0` to update!\nnpm notice\u001b[0m\u001b[91m \n\u001b[0mRemoving intermediate container 0e4099f8aca9\n ---> b5c6e04856b2\nStep 4/21 : COPY package.json pnpm-lock.yaml tsconfig.json tsconfig.build.json ./\n ---> 4c601669c6d3\nStep 5/21 : RUN pnpm install --frozen-lockfile\n ---> Running in 878a5c188c85\nLockfile is up to date, resolution step is skipped\nProgress: resolved 1, reused 0, downloaded 0, added 0\nPackages: +1591\n++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++\nProgress: resolved 1591, reused 0, downloaded 0, added 0\nPackages are hard linked from the content-addressable store to the virtual store.\n  Content-addressable store is at: /root/.local/share/pnpm/store/v3\n  Virtual store is at:             node_modules/.pnpm\nProgress: resolved 1591, reused 0, downloaded 78, added 72\nProgress: resolved 1591, reused 0, downloaded 188, added 181\nProgress: resolved 1591, reused 0, downloaded 364, added 358\nProgress: resolved 1591, reused 0, downloaded 512, added 512\nProgress: resolved 1591, reused 0, downloaded 596, added 595\nProgress: resolved 1591, reused 0, downloaded 730, added 730\nProgress: resolved 1591, reused 0, downloaded 793, added 793\nProgress: resolved 1591, reused 0, downloaded 852, added 851\nProgress: resolved 1591, reused 0, downloaded 927, added 926\nProgress: resolved 1591, reused 0, downloaded 980, added 976\nProgress: resolved 1591, reused 0, downloaded 1022, added 1024\nProgress: resolved 1591, reused 0, downloaded 1088, added 1091\nProgress: resolved 1591, reused 0, downloaded 1159, added 1160\nProgress: resolved 1591, reused 0, downloaded 1257, added 1253\nProgress: resolved 1591, reused 0, downloaded 1398, added 1396\nProgress: resolved 1591, reused 0, downloaded 1508, added 1508\nProgress: resolved 1591, reused 0, downloaded 1575, added 1579\nProgress: resolved 1591, reused 0, downloaded 1581, added 1584\nProgress: resolved 1591, reused 0, downloaded 1585, added 1589\nProgress: resolved 1591, reused 0, downloaded 1586, added 1590\nProgress: resolved 1591, reused 0, downloaded 1587, added 1590\nProgress: resolved 1591, reused 0, downloaded 1587, added 1591, done\n.../core-js@2.6.12/node_modules/core-js postinstall$ node -e \"try{require('./postinstall')}catch(e){}\"\n.../node_modules/nodemailer postinstall$ node -e \"try{require('./postinstall')}catch(e){}\"\n.../node_modules/postinstall-postinstall postinstall$ node ./run.js\n.../node_modules/postinstall-postinstall postinstall: Done\n.../node_modules/nodemailer postinstall:                            === Nodemailer 6.4.11 ===\n.../node_modules/nodemailer postinstall: Thank you for using Nodemailer for your email sending needs! While Nodemailer\n.../node_modules/nodemailer postinstall: itself is mostly meant to be a SMTP client there are other related projects in\n.../node_modules/nodemailer postinstall: the Nodemailer project as well.\n.../node_modules/nodemailer postinstall: > IMAP API (  https://imapapi.com  ) is a server application to easily access\n.../node_modules/nodemailer postinstall:   IMAP accounts via REST API\n.../node_modules/nodemailer postinstall: > ImapFlow (  https://imapflow.com/  ) is an async IMAP client library for\n.../node_modules/nodemailer postinstall:   Node.js\n.../node_modules/nodemailer postinstall: > NodemailerApp (  https://nodemailer.com/app/  ) is a cross platform GUI app to\n.../node_modules/nodemailer postinstall:   debug emails\n.../node_modules/nodemailer postinstall: > Project Pending (  https://projectpending.com/  ) allows you to host DNS of\n.../node_modules/nodemailer postinstall:   your project domains\n.../node_modules/nodemailer postinstall: > Pending DNS (  https://pendingdns.com/  ) is the DNS server used that powers\n.../node_modules/nodemailer postinstall:   Project Pending\n.../node_modules/nodemailer postinstall: > Ethereal Email (  https://ethereal.email/  ) is an email testing service that\n.../node_modules/nodemailer postinstall:   accepts all your test emails\n.../node_modules/nodemailer postinstall:                             Don't like this message?\n.../node_modules/nodemailer postinstall:                   There's a Github Sponsors goal to remove it\n.../node_modules/nodemailer postinstall:                        https://github.com/sponsors/andris9 \n.../node_modules/nodemailer postinstall:                                         \n.../core-js@2.6.12/node_modules/core-js postinstall: Thank you for using core-js ( https://github.com/zloirock/core-js ) for polyfilling JavaScript standard library!\n.../core-js@2.6.12/node_modules/core-js postinstall: The project needs your help! Please consider supporting of core-js on Open Collective or Patreon: \n.../core-js@2.6.12/node_modules/core-js postinstall: > https://opencollective.com/core-js \n.../core-js@2.6.12/node_modules/core-js postinstall: > https://www.patreon.com/zloirock \n.../core-js@2.6.12/node_modules/core-js postinstall: Also, the author of core-js ( https://github.com/zloirock ) is looking for a good job -)\n.../core-js@2.6.12/node_modules/core-js postinstall: Done\n.../node_modules/nodemailer postinstall: ........\n.../node_modules/nodemailer postinstall: Done\n\ndependencies:\n+ @djgrant/postgres-migrations 4.1.0-rc.1\n+ @simplewebauthn/server 5.3.0\n+ axios 0.21.1\n+ bcryptjs 2.4.3\n+ body-parser 1.19.0\n+ compare-urls 2.0.0\n+ cors 2.8.5\n+ dot-prop 6.0.1\n+ dotenv 8.2.0\n+ email-templates 7.0.4\n+ email-validator 2.0.4\n+ express 4.17.1\n+ express-jsdoc-swagger 1.6.7\n+ express-session 1.17.3\n+ express-winston 4.2.0\n+ grant 5.4.21\n+ graphql 16.2.0\n+ graphql-request 3.7.0\n+ graphql-tag 2.12.6\n+ gravatar 1.8.2\n+ helmet 3.22.0\n+ hibp 9.0.0\n+ http-status-codes 2.2.0\n+ joi 17.6.0\n+ joi-to-swagger 6.0.1\n+ jose 4.8.3\n+ js-yaml 3.13.1\n+ json-to-graphql-query 2.2.3\n+ jsonata 1.8.6\n+ jsonwebtoken 8.5.1\n+ libphonenumber-js 1.10.6\n+ micromatch 4.0.5\n+ nocache 2.1.0\n+ node-fetch 2.6.7\n+ nodemailer 6.4.16\n+ otplib 12.0.1\n+ pascal-case 3.1.2\n+ pg 8.7.3\n+ postinstall-postinstall 2.1.0\n+ qrcode 1.4.4\n+ random-number-csprng 1.0.2\n+ twilio 3.75.0\n+ url-join 4.0.1\n+ uuid 7.0.3\n+ winston 3.8.2\n\ndevDependencies:\n+ @changesets/cli 2.25.2\n+ @commitlint/cli 16.2.1\n+ @commitlint/config-conventional 16.2.1\n+ @graphql-codegen/add 3.1.1\n+ @graphql-codegen/cli 2.13.7\n+ @graphql-codegen/typescript 2.8.0\n+ @graphql-codegen/typescript-graphql-request 4.5.7\n+ @graphql-codegen/typescript-operations 2.5.5\n+ @simplewebauthn/typescript-types 5.3.0\n+ @types/bcryptjs 2.4.2\n+ @types/body-parser 1.19.0\n+ @types/cors 2.8.6\n+ @types/ejs 3.0.2\n+ @types/email-templates 7.0.1\n+ @types/express 4.17.6\n+ @types/express-session 1.17.5\n+ @types/faker 5.5.9\n+ @types/gravatar 1.8.3\n+ @types/hapi__joi 16.0.12\n+ @types/helmet 0.0.45\n+ @types/jest 27.4.1\n+ @types/jsonwebtoken 8.5.9\n+ @types/micromatch 4.0.2\n+ @types/node 17.0.21\n+ @types/node-fetch 2.6.1\n+ @types/nodemailer 6.4.0\n+ @types/pg 7.14.11\n+ @types/qrcode 1.3.4\n+ @types/random-number-csprng 1.0.0\n+ @types/rfc2047 2.0.1\n+ @types/supertest 2.0.11\n+ @types/swagger-ui-express 4.1.3\n+ @types/url-join 4.0.1\n+ @types/uuid 7.0.2\n+ @typescript-eslint/eslint-plugin 2.28.0\n+ @typescript-eslint/parser 2.28.0\n+ @vuepress/plugin-back-to-top 1.4.1\n+ codecov 3.8.3\n+ commitizen 4.2.4\n+ cz-conventional-changelog 3.1.0\n+ dotenv-cli 4.1.1\n+ eslint 6.8.0\n+ eslint-config-prettier 6.10.1\n+ eslint-plugin-jest 23.8.2\n+ eslint-plugin-prettier 3.1.3\n+ faker 5.5.3\n+ get-port 5.1.1\n+ git-cz 4.8.0\n+ husky 7.0.4\n+ jest 27.5.1\n+ jest-extended 0.11.5\n+ lint-staged 10.1.3\n+ npm-run-all 4.1.5\n+ prettier 2.5.1\n+ rfc2047 3.0.1\n+ rimraf 3.0.2\n+ supertest 6.2.2\n+ ts-jest 27.1.3\n+ ts-node-dev 1.1.8\n+ tsc-alias 1.6.4\n+ tsconfig-paths 3.12.0\n+ typescript 4.5.4\n\nDone in 31.4s\nRemoving intermediate container 878a5c188c85\n ---> 1f0b1e56607a\nStep 6/21 : COPY src/ ./src/\n ---> 6e3d88a46def\nStep 7/21 : COPY types/ ./types/\n ---> 5fedd1398569\nStep 8/21 : RUN pnpm run build\n ---> Running in 5f512047376f\n\n> hasura-auth@0.17.1 build /app\n> rimraf dist && tsc --project tsconfig.build.json && tsc-alias\n\nRemoving intermediate container 5f512047376f\n ---> cedf69374217\nStep 9/21 : FROM node:16-alpine as remover\n ---> 610c0494e820\nStep 10/21 : ARG NODE_ENV=production\n ---> Running in bad79f782de4\nRemoving intermediate container bad79f782de4\n ---> cfa3c79fa8c9\nStep 11/21 : ENV NODE_ENV $NODE_ENV\n ---> Running in aad0ab3d1256\nRemoving intermediate container aad0ab3d1256\n ---> d1e280b40278\nStep 12/21 : ENV AUTH_PORT 4000\n ---> Running in 19189bdb4c1a\nRemoving intermediate container 19189bdb4c1a\n ---> 568e956d1857\nStep 13/21 : WORKDIR /app\n ---> Running in 83d237b7af28\nRemoving intermediate container 83d237b7af28\n ---> 24b02ea16dfa\nStep 14/21 : RUN npm i -g pnpm\n ---> Running in 6ff13fa5fe33\n\nadded 1 package, and audited 2 packages in 669ms\n\n1 package is looking for funding\n  run `npm fund` for details\n\nfound 0 vulnerabilities\n\u001b[91mnpm\u001b[0m\u001b[91m notice \nnpm\u001b[0m\u001b[91m notice New major version of npm available! 8.19.3 -> 9.2.0\nnpm notice\u001b[0m\u001b[91m Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm notice Run `npm install -g npm@9.2.0` to update!\nnpm notice \n\u001b[0mRemoving intermediate container 6ff13fa5fe33\n ---> 5cdbf7c38db4\nStep 15/21 : COPY package.json pnpm-lock.yaml ./\n ---> 92ae072be0ff\nStep 16/21 : RUN pnpm install --frozen-lockfile --prod  && pnpm store prune\n ---> Running in 8a3dfb80f982\nLockfile is up to date, resolution step is skipped\nProgress: resolved 1, reused 0, downloaded 0, added 0\nPackages: +551\n++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++\nPackages are hard linked from the content-addressable store to the virtual store.\n  Content-addressable store is at: /root/.local/share/pnpm/store/v3\n  Virtual store is at:             node_modules/.pnpm\nProgress: resolved 551, reused 0, downloaded 71, added 66\nProgress: resolved 551, reused 0, downloaded 232, added 227\nProgress: resolved 551, reused 0, downloaded 308, added 301\nProgress: resolved 551, reused 0, downloaded 487, added 481\nProgress: resolved 551, reused 0, downloaded 548, added 547\nProgress: resolved 551, reused 0, downloaded 551, added 551, done\n.../core-js@2.6.12/node_modules/core-js postinstall$ node -e \"try{require('./postinstall')}catch(e){}\"\n.../node_modules/nodemailer postinstall$ node -e \"try{require('./postinstall')}catch(e){}\"\n.../node_modules/postinstall-postinstall postinstall$ node ./run.js\n.../core-js@2.6.12/node_modules/core-js postinstall: Thank you for using core-js ( https://github.com/zloirock/core-js ) for polyfilling JavaScript standard library!\n.../core-js@2.6.12/node_modules/core-js postinstall: The project needs your help! Please consider supporting of core-js on Open Collective or Patreon: \n.../core-js@2.6.12/node_modules/core-js postinstall: > https://opencollective.com/core-js \n.../core-js@2.6.12/node_modules/core-js postinstall: > https://www.patreon.com/zloirock \n.../core-js@2.6.12/node_modules/core-js postinstall: Also, the author of core-js ( https://github.com/zloirock ) is looking for a good job -)\n.../node_modules/nodemailer postinstall:                            === Nodemailer 6.4.11 ===\n.../node_modules/nodemailer postinstall: Thank you for using Nodemailer for your email sending needs! While Nodemailer\n.../node_modules/nodemailer postinstall: itself is mostly meant to be a SMTP client there are other related projects in\n.../node_modules/nodemailer postinstall: the Nodemailer project as well.\n.../node_modules/nodemailer postinstall: > IMAP API (  https://imapapi.com  ) is a server application to easily access\n.../node_modules/nodemailer postinstall:   IMAP accounts via REST API\n.../node_modules/nodemailer postinstall: > ImapFlow (  https://imapflow.com/  ) is an async IMAP client library for\n.../node_modules/nodemailer postinstall:   Node.js\n.../node_modules/nodemailer postinstall: > NodemailerApp (  https://nodemailer.com/app/  ) is a cross platform GUI app to\n.../node_modules/nodemailer postinstall:   debug emails\n.../node_modules/nodemailer postinstall: > Project Pending (  https://projectpending.com/  ) allows you to host DNS of\n.../node_modules/nodemailer postinstall:   your project domains\n.../node_modules/nodemailer postinstall: > Pending DNS (  https://pendingdns.com/  ) is the DNS server used that powers\n.../node_modules/nodemailer postinstall:   Project Pending\n.../node_modules/nodemailer postinstall: > Ethereal Email (  https://ethereal.email/  ) is an email testing service that\n.../node_modules/nodemailer postinstall:   accepts all your test emails\n.../node_modules/nodemailer postinstall:                             Don't like this message?\n.../node_modules/nodemailer postinstall:                   There's a Github Sponsors goal to remove it\n.../node_modules/nodemailer postinstall:                        https://github.com/sponsors/andris9 \n.../node_modules/nodemailer postinstall:                                         \n.../core-js@2.6.12/node_modules/core-js postinstall: Done\n.../node_modules/postinstall-postinstall postinstall: Done\n.../node_modules/nodemailer postinstall: ........\n.../node_modules/nodemailer postinstall: Done\n\ndependencies:\n+ @djgrant/postgres-migrations 4.1.0-rc.1\n+ @simplewebauthn/server 5.3.0\n+ axios 0.21.1\n+ bcryptjs 2.4.3\n+ body-parser 1.19.0\n+ compare-urls 2.0.0\n+ cors 2.8.5\n+ dot-prop 6.0.1\n+ dotenv 8.2.0\n+ email-templates 7.0.4\n+ email-validator 2.0.4\n+ express 4.17.1\n+ express-jsdoc-swagger 1.6.7\n+ express-session 1.17.3\n+ express-winston 4.2.0\n+ grant 5.4.21\n+ graphql 16.2.0\n+ graphql-request 3.7.0\n+ graphql-tag 2.12.6\n+ gravatar 1.8.2\n+ helmet 3.22.0\n+ hibp 9.0.0\n+ http-status-codes 2.2.0\n+ joi 17.6.0\n+ joi-to-swagger 6.0.1\n+ jose 4.8.3\n+ js-yaml 3.13.1\n+ json-to-graphql-query 2.2.3\n+ jsonata 1.8.6\n+ jsonwebtoken 8.5.1\n+ libphonenumber-js 1.10.6\n+ micromatch 4.0.5\n+ nocache 2.1.0\n+ node-fetch 2.6.7\n+ nodemailer 6.4.16\n+ otplib 12.0.1\n+ pascal-case 3.1.2\n+ pg 8.7.3\n+ postinstall-postinstall 2.1.0\n+ qrcode 1.4.4\n+ random-number-csprng 1.0.2\n+ twilio 3.75.0\n+ url-join 4.0.1\n+ uuid 7.0.3\n+ winston 3.8.2\n\ndevDependencies: skipped because NODE_ENV is set to production\n\nDone in 11.2s\nRemoved all cached metadata files\nRemoved 787 files\nRemoved 8 packages\nRemoving intermediate container 8a3dfb80f982\n ---> f836d4ade9bd\nStep 17/21 : COPY migrations/ ./migrations/\n ---> 9f7404b76a9d\nStep 18/21 : COPY email-templates/ ./email-templates\n ---> 6d5cfd374e24\nStep 19/21 : COPY --from=builder ./app/dist dist/\n ---> 31a9f9f630a4\nStep 20/21 : HEALTHCHECK --interval=60s --timeout=2s --retries=3 CMD wget http://localhost:${AUTH_PORT}/healthz -q -O - > /dev/null 2>&1\n ---> Running in 75787c92e372\nRemoving intermediate container 75787c92e372\n ---> d97a592e2e14\nStep 21/21 : CMD [\"pnpm\", \"run\", \"start\"]\n ---> Running in 2a2fb4e530a2\nRemoving intermediate container 2a2fb4e530a2\n ---> 1bca737eeaa5\nSuccessfully built 1bca737eeaa5\nSuccessfully tagged hasura-auth:latest\n","stderr":"","imageSize":214435172},"repair":{"violations":[{"name":"npmCacheCleanAfterInstall","position":{"start":2,"end":2,"columnStart":4,"columnEnd":17}},{"name":"npmCacheCleanAfterInstall","position":{"start":14,"end":14,"columnStart":4,"columnEnd":17}}],"repairedDockerfile":"FROM node:16-alpine AS builder\nWORKDIR /app\nRUN npm i -g pnpm\nCOPY package.json pnpm-lock.yaml tsconfig.json tsconfig.build.json ./\nRUN pnpm install --frozen-lockfile\nCOPY src/ ./src/\nCOPY types/ ./types/\nRUN pnpm run build\n\nFROM node:16-alpine as remover\nARG NODE_ENV=production\nENV NODE_ENV $NODE_ENV\nENV AUTH_PORT 4000\nWORKDIR /app\nRUN npm i -g pnpm\nCOPY package.json pnpm-lock.yaml ./\nRUN pnpm install --frozen-lockfile --prod  && pnpm store prune\nCOPY migrations/ ./migrations/\nCOPY email-templates/ ./email-templates\nCOPY --from=builder ./app/dist dist/\nHEALTHCHECK --interval=60s --timeout=2s --retries=3 CMD wget http://localhost:${AUTH_PORT}/healthz -q -O - > /dev/null 2>&1\nCMD [\"pnpm\", \"run\", \"start\"]\n"},"repairedBuild":{"startTimestamp":1672204149681,"endTimestamp":1672204290965,"error":null,"stdout":"Sending build context to Docker daemon  1.178MB\r\r\nStep 1/21 : FROM node:16-alpine AS builder\n ---> 610c0494e820\nStep 2/21 : WORKDIR /app\n ---> Running in a210b2c90899\nRemoving intermediate container a210b2c90899\n ---> 4ee06f7d921b\nStep 3/21 : RUN npm i -g pnpm\n ---> Running in 02f6f3f8f180\n\nadded 1 package, and audited 2 packages in 729ms\n\n1 package is looking for funding\n  run `npm fund` for details\n\nfound 0 vulnerabilities\n\u001b[91mnpm\u001b[0m\u001b[91m notice \nnpm\u001b[0m\u001b[91m notice New major version of npm available! 8.19.3 -> 9.2.0\nnpm notice\u001b[0m\u001b[91m Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm notice Run `npm install -g npm@9.2.0` to update!\nnpm notice \n\u001b[0mRemoving intermediate container 02f6f3f8f180\n ---> 37cb7eac4a04\nStep 4/21 : COPY package.json pnpm-lock.yaml tsconfig.json tsconfig.build.json ./\n ---> fe62984c9cb1\nStep 5/21 : RUN pnpm install --frozen-lockfile\n ---> Running in a86c889fb83f\nLockfile is up to date, resolution step is skipped\nProgress: resolved 1, reused 0, downloaded 0, added 0\nPackages: +1591\n++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++\nPackages are hard linked from the content-addressable store to the virtual store.\n  Content-addressable store is at: /root/.local/share/pnpm/store/v3\n  Virtual store is at:             node_modules/.pnpm\nProgress: resolved 1591, reused 0, downloaded 23, added 17\nProgress: resolved 1591, reused 0, downloaded 152, added 144\nProgress: resolved 1591, reused 0, downloaded 267, added 262\nProgress: resolved 1591, reused 0, downloaded 469, added 463\nProgress: resolved 1591, reused 0, downloaded 585, added 579\nProgress: resolved 1591, reused 0, downloaded 723, added 715\nProgress: resolved 1591, reused 0, downloaded 845, added 842\nProgress: resolved 1591, reused 0, downloaded 932, added 931\nProgress: resolved 1591, reused 0, downloaded 1007, added 1006\nProgress: resolved 1591, reused 0, downloaded 1082, added 1078\nProgress: resolved 1591, reused 0, downloaded 1171, added 1171\nProgress: resolved 1591, reused 0, downloaded 1293, added 1292\nProgress: resolved 1591, reused 0, downloaded 1457, added 1461\nProgress: resolved 1591, reused 0, downloaded 1553, added 1554\nProgress: resolved 1591, reused 0, downloaded 1583, added 1585\nProgress: resolved 1591, reused 0, downloaded 1584, added 1588\nProgress: resolved 1591, reused 0, downloaded 1586, added 1590\nProgress: resolved 1591, reused 0, downloaded 1587, added 1590\n.../core-js@2.6.12/node_modules/core-js postinstall$ node -e \"try{require('./postinstall')}catch(e){}\"\n.../node_modules/postinstall-postinstall postinstall$ node ./run.js\n.../node_modules/nodemailer postinstall$ node -e \"try{require('./postinstall')}catch(e){}\"\n.../core-js@2.6.12/node_modules/core-js postinstall: Thank you for using core-js ( https://github.com/zloirock/core-js ) for polyfilling JavaScript standard library!\n.../core-js@2.6.12/node_modules/core-js postinstall: The project needs your help! Please consider supporting of core-js on Open Collective or Patreon: \n.../core-js@2.6.12/node_modules/core-js postinstall: > https://opencollective.com/core-js \n.../core-js@2.6.12/node_modules/core-js postinstall: > https://www.patreon.com/zloirock \n.../core-js@2.6.12/node_modules/core-js postinstall: Also, the author of core-js ( https://github.com/zloirock ) is looking for a good job -)\n.../core-js@2.6.12/node_modules/core-js postinstall: Done\n.../node_modules/postinstall-postinstall postinstall: Done\n.../node_modules/nodemailer postinstall:                            === Nodemailer 6.4.11 ===\n.../node_modules/nodemailer postinstall: Thank you for using Nodemailer for your email sending needs! While Nodemailer\n.../node_modules/nodemailer postinstall: itself is mostly meant to be a SMTP client there are other related projects in\n.../node_modules/nodemailer postinstall: the Nodemailer project as well.\n.../node_modules/nodemailer postinstall: > IMAP API (  https://imapapi.com  ) is a server application to easily access\n.../node_modules/nodemailer postinstall:   IMAP accounts via REST API\n.../node_modules/nodemailer postinstall: > ImapFlow (  https://imapflow.com/  ) is an async IMAP client library for\n.../node_modules/nodemailer postinstall:   Node.js\n.../node_modules/nodemailer postinstall: > NodemailerApp (  https://nodemailer.com/app/  ) is a cross platform GUI app to\n.../node_modules/nodemailer postinstall:   debug emails\n.../node_modules/nodemailer postinstall: > Project Pending (  https://projectpending.com/  ) allows you to host DNS of\n.../node_modules/nodemailer postinstall:   your project domains\n.../node_modules/nodemailer postinstall: > Pending DNS (  https://pendingdns.com/  ) is the DNS server used that powers\n.../node_modules/nodemailer postinstall:   Project Pending\n.../node_modules/nodemailer postinstall: > Ethereal Email (  https://ethereal.email/  ) is an email testing service that\n.../node_modules/nodemailer postinstall:   accepts all your test emails\n.../node_modules/nodemailer postinstall:                             Don't like this message?\n.../node_modules/nodemailer postinstall:                   There's a Github Sponsors goal to remove it\n.../node_modules/nodemailer postinstall:                        https://github.com/sponsors/andris9 \n.../node_modules/nodemailer postinstall:                                         \nProgress: resolved 1591, reused 0, downloaded 1587, added 1591, done\n.../node_modules/nodemailer postinstall: ........\n.../node_modules/nodemailer postinstall: Done\n\ndependencies:\n+ @djgrant/postgres-migrations 4.1.0-rc.1\n+ @simplewebauthn/server 5.3.0\n+ axios 0.21.1\n+ bcryptjs 2.4.3\n+ body-parser 1.19.0\n+ compare-urls 2.0.0\n+ cors 2.8.5\n+ dot-prop 6.0.1\n+ dotenv 8.2.0\n+ email-templates 7.0.4\n+ email-validator 2.0.4\n+ express 4.17.1\n+ express-jsdoc-swagger 1.6.7\n+ express-session 1.17.3\n+ express-winston 4.2.0\n+ grant 5.4.21\n+ graphql 16.2.0\n+ graphql-request 3.7.0\n+ graphql-tag 2.12.6\n+ gravatar 1.8.2\n+ helmet 3.22.0\n+ hibp 9.0.0\n+ http-status-codes 2.2.0\n+ joi 17.6.0\n+ joi-to-swagger 6.0.1\n+ jose 4.8.3\n+ js-yaml 3.13.1\n+ json-to-graphql-query 2.2.3\n+ jsonata 1.8.6\n+ jsonwebtoken 8.5.1\n+ libphonenumber-js 1.10.6\n+ micromatch 4.0.5\n+ nocache 2.1.0\n+ node-fetch 2.6.7\n+ nodemailer 6.4.16\n+ otplib 12.0.1\n+ pascal-case 3.1.2\n+ pg 8.7.3\n+ postinstall-postinstall 2.1.0\n+ qrcode 1.4.4\n+ random-number-csprng 1.0.2\n+ twilio 3.75.0\n+ url-join 4.0.1\n+ uuid 7.0.3\n+ winston 3.8.2\n\ndevDependencies:\n+ @changesets/cli 2.25.2\n+ @commitlint/cli 16.2.1\n+ @commitlint/config-conventional 16.2.1\n+ @graphql-codegen/add 3.1.1\n+ @graphql-codegen/cli 2.13.7\n+ @graphql-codegen/typescript 2.8.0\n+ @graphql-codegen/typescript-graphql-request 4.5.7\n+ @graphql-codegen/typescript-operations 2.5.5\n+ @simplewebauthn/typescript-types 5.3.0\n+ @types/bcryptjs 2.4.2\n+ @types/body-parser 1.19.0\n+ @types/cors 2.8.6\n+ @types/ejs 3.0.2\n+ @types/email-templates 7.0.1\n+ @types/express 4.17.6\n+ @types/express-session 1.17.5\n+ @types/faker 5.5.9\n+ @types/gravatar 1.8.3\n+ @types/hapi__joi 16.0.12\n+ @types/helmet 0.0.45\n+ @types/jest 27.4.1\n+ @types/jsonwebtoken 8.5.9\n+ @types/micromatch 4.0.2\n+ @types/node 17.0.21\n+ @types/node-fetch 2.6.1\n+ @types/nodemailer 6.4.0\n+ @types/pg 7.14.11\n+ @types/qrcode 1.3.4\n+ @types/random-number-csprng 1.0.0\n+ @types/rfc2047 2.0.1\n+ @types/supertest 2.0.11\n+ @types/swagger-ui-express 4.1.3\n+ @types/url-join 4.0.1\n+ @types/uuid 7.0.2\n+ @typescript-eslint/eslint-plugin 2.28.0\n+ @typescript-eslint/parser 2.28.0\n+ @vuepress/plugin-back-to-top 1.4.1\n+ codecov 3.8.3\n+ commitizen 4.2.4\n+ cz-conventional-changelog 3.1.0\n+ dotenv-cli 4.1.1\n+ eslint 6.8.0\n+ eslint-config-prettier 6.10.1\n+ eslint-plugin-jest 23.8.2\n+ eslint-plugin-prettier 3.1.3\n+ faker 5.5.3\n+ get-port 5.1.1\n+ git-cz 4.8.0\n+ husky 7.0.4\n+ jest 27.5.1\n+ jest-extended 0.11.5\n+ lint-staged 10.1.3\n+ npm-run-all 4.1.5\n+ prettier 2.5.1\n+ rfc2047 3.0.1\n+ rimraf 3.0.2\n+ supertest 6.2.2\n+ ts-jest 27.1.3\n+ ts-node-dev 1.1.8\n+ tsc-alias 1.6.4\n+ tsconfig-paths 3.12.0\n+ typescript 4.5.4\n\nDone in 27.1s\nRemoving intermediate container a86c889fb83f\n ---> 899b964286b4\nStep 6/21 : COPY src/ ./src/\n ---> f4a5e9c11490\nStep 7/21 : COPY types/ ./types/\n ---> f23a4cb9dfdc\nStep 8/21 : RUN pnpm run build\n ---> Running in 9f75dd4288e5\n\n> hasura-auth@0.17.1 build /app\n> rimraf dist && tsc --project tsconfig.build.json && tsc-alias\n\nRemoving intermediate container 9f75dd4288e5\n ---> b2149702d119\nStep 9/21 : FROM node:16-alpine as remover\n ---> 610c0494e820\nStep 10/21 : ARG NODE_ENV=production\n ---> Running in e7e2d825e6d8\nRemoving intermediate container e7e2d825e6d8\n ---> 71850c1080f2\nStep 11/21 : ENV NODE_ENV $NODE_ENV\n ---> Running in 38b74bd16c3a\nRemoving intermediate container 38b74bd16c3a\n ---> aecc0fa4ada0\nStep 12/21 : ENV AUTH_PORT 4000\n ---> Running in 7a8f7d682eaa\nRemoving intermediate container 7a8f7d682eaa\n ---> f5136a0cf642\nStep 13/21 : WORKDIR /app\n ---> Running in e4324e090236\nRemoving intermediate container e4324e090236\n ---> 9d96b4dc8d9d\nStep 14/21 : RUN npm i -g pnpm\n ---> Running in f76d12fe7dbc\n\nadded 1 package, and audited 2 packages in 627ms\n\n1 package is looking for funding\n  run `npm fund` for details\n\nfound 0 vulnerabilities\n\u001b[91mnpm\u001b[0m\u001b[91m notice\u001b[0m\u001b[91m \nnpm\u001b[0m\u001b[91m notice\u001b[0m\u001b[91m New major version of npm available! 8.19.3 -> 9.2.0\nnpm \u001b[0m\u001b[91mnotice\u001b[0m\u001b[91m Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm notice\u001b[0m\u001b[91m Run `npm install -g npm@9.2.0` to update!\nnpm notice \n\u001b[0mRemoving intermediate container f76d12fe7dbc\n ---> bcc9a5be2f30\nStep 15/21 : COPY package.json pnpm-lock.yaml ./\n ---> 029d77ba41e2\nStep 16/21 : RUN pnpm install --frozen-lockfile --prod  && pnpm store prune\n ---> Running in 042b842782f2\nLockfile is up to date, resolution step is skipped\nProgress: resolved 1, reused 0, downloaded 0, added 0\nPackages: +551\n++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++\nPackages are hard linked from the content-addressable store to the virtual store.\n  Content-addressable store is at: /root/.local/share/pnpm/store/v3\n  Virtual store is at:             node_modules/.pnpm\nProgress: resolved 551, reused 0, downloaded 74, added 65\nProgress: resolved 551, reused 0, downloaded 218, added 212\nProgress: resolved 551, reused 0, downloaded 383, added 377\nProgress: resolved 551, reused 0, downloaded 532, added 526\nProgress: resolved 551, reused 0, downloaded 548, added 547\nProgress: resolved 551, reused 0, downloaded 548, added 548\n.../core-js@2.6.12/node_modules/core-js postinstall$ node -e \"try{require('./postinstall')}catch(e){}\"\n.../node_modules/postinstall-postinstall postinstall$ node ./run.js\n.../node_modules/nodemailer postinstall$ node -e \"try{require('./postinstall')}catch(e){}\"\n.../core-js@2.6.12/node_modules/core-js postinstall: Thank you for using core-js ( https://github.com/zloirock/core-js ) for polyfilling JavaScript standard library!\n.../core-js@2.6.12/node_modules/core-js postinstall: The project needs your help! Please consider supporting of core-js on Open Collective or Patreon: \n.../core-js@2.6.12/node_modules/core-js postinstall: > https://opencollective.com/core-js \n.../core-js@2.6.12/node_modules/core-js postinstall: > https://www.patreon.com/zloirock \n.../core-js@2.6.12/node_modules/core-js postinstall: Also, the author of core-js ( https://github.com/zloirock ) is looking for a good job -)\n.../core-js@2.6.12/node_modules/core-js postinstall: Done\n.../node_modules/postinstall-postinstall postinstall: Done\n.../node_modules/nodemailer postinstall:                            === Nodemailer 6.4.11 ===\n.../node_modules/nodemailer postinstall: Thank you for using Nodemailer for your email sending needs! While Nodemailer\n.../node_modules/nodemailer postinstall: itself is mostly meant to be a SMTP client there are other related projects in\n.../node_modules/nodemailer postinstall: the Nodemailer project as well.\n.../node_modules/nodemailer postinstall: > IMAP API (  https://imapapi.com  ) is a server application to easily access\n.../node_modules/nodemailer postinstall:   IMAP accounts via REST API\n.../node_modules/nodemailer postinstall: > ImapFlow (  https://imapflow.com/  ) is an async IMAP client library for\n.../node_modules/nodemailer postinstall:   Node.js\n.../node_modules/nodemailer postinstall: > NodemailerApp (  https://nodemailer.com/app/  ) is a cross platform GUI app to\n.../node_modules/nodemailer postinstall:   debug emails\n.../node_modules/nodemailer postinstall: > Project Pending (  https://projectpending.com/  ) allows you to host DNS of\n.../node_modules/nodemailer postinstall:   your project domains\n.../node_modules/nodemailer postinstall: > Pending DNS (  https://pendingdns.com/  ) is the DNS server used that powers\n.../node_modules/nodemailer postinstall:   Project Pending\n.../node_modules/nodemailer postinstall: > Ethereal Email (  https://ethereal.email/  ) is an email testing service that\n.../node_modules/nodemailer postinstall:   accepts all your test emails\n.../node_modules/nodemailer postinstall:                             Don't like this message?\n.../node_modules/nodemailer postinstall:                   There's a Github Sponsors goal to remove it\n.../node_modules/nodemailer postinstall:                        https://github.com/sponsors/andris9 \n.../node_modules/nodemailer postinstall:                                         \nProgress: resolved 551, reused 0, downloaded 551, added 551, done\n.../node_modules/nodemailer postinstall: ........\n.../node_modules/nodemailer postinstall: Done\n\ndependencies:\n+ @djgrant/postgres-migrations 4.1.0-rc.1\n+ @simplewebauthn/server 5.3.0\n+ axios 0.21.1\n+ bcryptjs 2.4.3\n+ body-parser 1.19.0\n+ compare-urls 2.0.0\n+ cors 2.8.5\n+ dot-prop 6.0.1\n+ dotenv 8.2.0\n+ email-templates 7.0.4\n+ email-validator 2.0.4\n+ express 4.17.1\n+ express-jsdoc-swagger 1.6.7\n+ express-session 1.17.3\n+ express-winston 4.2.0\n+ grant 5.4.21\n+ graphql 16.2.0\n+ graphql-request 3.7.0\n+ graphql-tag 2.12.6\n+ gravatar 1.8.2\n+ helmet 3.22.0\n+ hibp 9.0.0\n+ http-status-codes 2.2.0\n+ joi 17.6.0\n+ joi-to-swagger 6.0.1\n+ jose 4.8.3\n+ js-yaml 3.13.1\n+ json-to-graphql-query 2.2.3\n+ jsonata 1.8.6\n+ jsonwebtoken 8.5.1\n+ libphonenumber-js 1.10.6\n+ micromatch 4.0.5\n+ nocache 2.1.0\n+ node-fetch 2.6.7\n+ nodemailer 6.4.16\n+ otplib 12.0.1\n+ pascal-case 3.1.2\n+ pg 8.7.3\n+ postinstall-postinstall 2.1.0\n+ qrcode 1.4.4\n+ random-number-csprng 1.0.2\n+ twilio 3.75.0\n+ url-join 4.0.1\n+ uuid 7.0.3\n+ winston 3.8.2\n\ndevDependencies: skipped because NODE_ENV is set to production\n\nDone in 11.6s\nRemoved all cached metadata files\nRemoved 787 files\nRemoved 8 packages\nRemoving intermediate container 042b842782f2\n ---> f0aefe0aacf6\nStep 17/21 : COPY migrations/ ./migrations/\n ---> 94f420c5f8fc\nStep 18/21 : COPY email-templates/ ./email-templates\n ---> ae67f706eb49\nStep 19/21 : COPY --from=builder ./app/dist dist/\n ---> c79fd46a11dc\nStep 20/21 : HEALTHCHECK --interval=60s --timeout=2s --retries=3 CMD wget http://localhost:${AUTH_PORT}/healthz -q -O - > /dev/null 2>&1\n ---> Running in cec6cf5450dd\nRemoving intermediate container cec6cf5450dd\n ---> 9ae79840d542\nStep 21/21 : CMD [\"pnpm\", \"run\", \"start\"]\n ---> Running in 846fc9be42a4\nRemoving intermediate container 846fc9be42a4\n ---> 6cd246deb868\nSuccessfully built 6cd246deb868\nSuccessfully tagged hasura-auth:latest\n","stderr":"","imageSize":214435172},"endTime":1672204291711}