{"repository":"https://github.com/dmachard/dnstap-receiver","dockerfilePath":"Dockerfile","startTime":1672009758812,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/dmachard/dnstap-receiver'...\n","error":null,"commit":"7176053e58b12070514aa12f84ac1f14e05342d7"},"originalBuild":{"startTimestamp":1672009759662,"endTimestamp":1672009787098,"error":null,"stdout":"Sending build context to Docker daemon  404.5kB\r\r\nStep 1/9 : FROM python:3.10-alpine\n3.10-alpine: Pulling from library/python\nc158987b0551: Already exists\n7ec3a91b66d9: Pulling fs layer\na004f9671752: Pulling fs layer\nf41086029229: Pulling fs layer\na8dbc4976a6c: Pulling fs layer\na8dbc4976a6c: Waiting\n7ec3a91b66d9: Download complete\na004f9671752: Verifying Checksum\na004f9671752: Download complete\n7ec3a91b66d9: Pull complete\na8dbc4976a6c: Verifying Checksum\na8dbc4976a6c: Download complete\na004f9671752: Pull complete\nf41086029229: Pull complete\na8dbc4976a6c: Pull complete\nDigest: sha256:63d0c387f30f82da7e9404b7157b6f077656b5263c8d64c7b7b889f4d8c1c60a\nStatus: Downloaded newer image for python:3.10-alpine\n ---> 2527f31628e7\nStep 2/9 : LABEL name=\"Python dnstap receiver\"       description=\"Dnstap streams receiver\"       url=\"https://github.com/dmachard/dnstap-receiver\"       maintainer=\"d.machard@gmail.com\"\n ---> Running in aef7a87fd5b6\nRemoving intermediate container aef7a87fd5b6\n ---> 577a0c33250a\nStep 3/9 : WORKDIR /home/dnstap\n ---> Running in 279d6c2aa5c1\nRemoving intermediate container 279d6c2aa5c1\n ---> 52931a378d18\nStep 4/9 : COPY . /home/dnstap/\n ---> cce76cf491ee\nStep 5/9 : RUN true     && apk update     && apk add gcc musl-dev     && adduser -D dnstap     && pip install --no-cache-dir -r requirements.txt    && apk del gcc musl-dev     && cd /home/dnstap     && mkdir -p /home/dnstap/logs/     && sed -i 's/local-address: 127.0.0.1/local-address: 0.0.0.0/g' ./dnstap_receiver/dnstap.conf     && chown -R dnstap:dnstap /home/dnstap     && true\n ---> Running in 3abc47f48837\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\nv3.17.0-298-g2104b16d70 [https://dl-cdn.alpinelinux.org/alpine/v3.17/main]\nv3.17.0-299-gc0880a1380 [https://dl-cdn.alpinelinux.org/alpine/v3.17/community]\nOK: 17815 distinct packages available\n(1/11) Installing libgcc (12.2.1_git20220924-r4)\n(2/11) Installing libstdc++ (12.2.1_git20220924-r4)\n(3/11) Installing binutils (2.39-r2)\n(4/11) Installing libgomp (12.2.1_git20220924-r4)\n(5/11) Installing libatomic (12.2.1_git20220924-r4)\n(6/11) Installing gmp (6.2.1-r2)\n(7/11) Installing isl25 (0.25-r0)\n(8/11) Installing mpfr4 (4.1.0-r0)\n(9/11) Installing mpc1 (1.2.1-r1)\n(10/11) Installing gcc (12.2.1_git20220924-r4)\n(11/11) Installing musl-dev (1.2.3-r4)\nExecuting busybox-1.35.0-r29.trigger\nOK: 160 MiB in 48 packages\nCollecting dnstap_pb==0.8.0\n  Downloading dnstap_pb-0.8.0-py3-none-any.whl (4.7 kB)\nCollecting pyyaml==6.0\n  Downloading PyYAML-6.0.tar.gz (124 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 125.0/125.0 kB 17.7 MB/s eta 0:00:00\n  Installing build dependencies: started\n  Installing build dependencies: finished with status 'done'\n  Getting requirements to build wheel: started\n  Getting requirements to build wheel: finished with status 'done'\n  Preparing metadata (pyproject.toml): started\n  Preparing metadata (pyproject.toml): finished with status 'done'\nCollecting aiohttp==3.8.3\n  Downloading aiohttp-3.8.3-cp310-cp310-musllinux_1_1_x86_64.whl (1.0 MB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 1.0/1.0 MB 104.2 MB/s eta 0:00:00\nCollecting geoip2==4.6.0\n  Downloading geoip2-4.6.0-py2.py3-none-any.whl (26 kB)\nCollecting tlds==2022070701\n  Downloading tlds-2022070701-py2.py3-none-any.whl (8.2 kB)\nCollecting cachetools==5.2.0\n  Downloading cachetools-5.2.0-py3-none-any.whl (9.3 kB)\nCollecting fstrm==0.5.0\n  Downloading fstrm-0.5.0-py3-none-any.whl (5.1 kB)\nCollecting protobuf\n  Downloading protobuf-4.21.12-py3-none-any.whl (291 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 291.7/291.7 kB 144.2 MB/s eta 0:00:00\nCollecting aiosignal>=1.1.2\n  Downloading aiosignal-1.3.1-py3-none-any.whl (7.6 kB)\nCollecting async-timeout<5.0,>=4.0.0a3\n  Downloading async_timeout-4.0.2-py3-none-any.whl (5.8 kB)\nCollecting charset-normalizer<3.0,>=2.0\n  Downloading charset_normalizer-2.1.1-py3-none-any.whl (39 kB)\nCollecting multidict<7.0,>=4.5\n  Downloading multidict-6.0.4-cp310-cp310-musllinux_1_1_x86_64.whl (134 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 134.8/134.8 kB 281.4 MB/s eta 0:00:00\nCollecting yarl<2.0,>=1.0\n  Downloading yarl-1.8.2-cp310-cp310-musllinux_1_1_x86_64.whl (248 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 248.1/248.1 kB 97.9 MB/s eta 0:00:00\nCollecting attrs>=17.3.0\n  Downloading attrs-22.2.0-py3-none-any.whl (60 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 60.0/60.0 kB 270.2 MB/s eta 0:00:00\nCollecting frozenlist>=1.1.1\n  Downloading frozenlist-1.3.3-cp310-cp310-musllinux_1_1_x86_64.whl (152 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 152.5/152.5 kB 135.7 MB/s eta 0:00:00\nCollecting requests<3.0.0,>=2.24.0\n  Downloading requests-2.28.1-py3-none-any.whl (62 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 62.8/62.8 kB 274.7 MB/s eta 0:00:00\nCollecting urllib3<2.0.0,>=1.25.2\n  Downloading urllib3-1.26.13-py2.py3-none-any.whl (140 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 140.6/140.6 kB 137.1 MB/s eta 0:00:00\nCollecting maxminddb<3.0.0,>=2.2.0\n  Downloading maxminddb-2.2.0.tar.gz (330 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 330.9/330.9 kB 86.5 MB/s eta 0:00:00\n  Preparing metadata (setup.py): started\n  Preparing metadata (setup.py): finished with status 'done'\nCollecting certifi>=2017.4.17\n  Downloading certifi-2022.12.7-py3-none-any.whl (155 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 155.3/155.3 kB 137.9 MB/s eta 0:00:00\nCollecting idna<4,>=2.5\n  Downloading idna-3.4-py3-none-any.whl (61 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 61.5/61.5 kB 231.9 MB/s eta 0:00:00\nBuilding wheels for collected packages: pyyaml, maxminddb\n  Building wheel for pyyaml (pyproject.toml): started\n  Building wheel for pyyaml (pyproject.toml): finished with status 'done'\n  Created wheel for pyyaml: filename=PyYAML-6.0-cp310-cp310-linux_x86_64.whl size=45330 sha256=43e965f69abb4ebd1b526df20fbaa343af1a57b48fb867561e77eb22a0479121\n  Stored in directory: /tmp/pip-ephem-wheel-cache-6ii2s3p5/wheels/06/72/f6/3f89f64cf1943a82e42cdd8e59d7b2aa98769fd48b08019fc7\n  Building wheel for maxminddb (setup.py): started\n  Building wheel for maxminddb (setup.py): finished with status 'done'\n  Created wheel for maxminddb: filename=maxminddb-2.2.0-py2.py3-none-any.whl size=16338 sha256=431dbbfeb07b0871993328ca3d73a2b2029eee90e37494d76c4c08e55ce09c3d\n  Stored in directory: /tmp/pip-ephem-wheel-cache-6ii2s3p5/wheels/60/cb/17/37e86fc58c8a6275e8810553ebb854eac3894453409b27562e\nSuccessfully built pyyaml maxminddb\nInstalling collected packages: tlds, fstrm, urllib3, pyyaml, protobuf, multidict, maxminddb, idna, frozenlist, charset-normalizer, certifi, cachetools, attrs, async-timeout, yarl, requests, dnstap_pb, aiosignal, aiohttp, geoip2\nSuccessfully installed aiohttp-3.8.3 aiosignal-1.3.1 async-timeout-4.0.2 attrs-22.2.0 cachetools-5.2.0 certifi-2022.12.7 charset-normalizer-2.1.1 dnstap_pb-0.8.0 frozenlist-1.3.3 fstrm-0.5.0 geoip2-4.6.0 idna-3.4 maxminddb-2.2.0 multidict-6.0.4 protobuf-4.21.12 pyyaml-6.0 requests-2.28.1 tlds-2022070701 urllib3-1.26.13 yarl-1.8.2\n\u001b[91mWARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv\n\u001b[0m(1/11) Purging gcc (12.2.1_git20220924-r4)\n(2/11) Purging binutils (2.39-r2)\n(3/11) Purging libatomic (12.2.1_git20220924-r4)\n(4/11) Purging libgomp (12.2.1_git20220924-r4)\n(5/11) Purging musl-dev (1.2.3-r4)\n(6/11) Purging libstdc++ (12.2.1_git20220924-r4)\n(7/11) Purging libgcc (12.2.1_git20220924-r4)\n(8/11) Purging isl25 (0.25-r0)\n(9/11) Purging mpc1 (1.2.1-r1)\n(10/11) Purging mpfr4 (4.1.0-r0)\n(11/11) Purging gmp (6.2.1-r2)\nExecuting busybox-1.35.0-r29.trigger\nOK: 16 MiB in 37 packages\nRemoving intermediate container 3abc47f48837\n ---> a3166c313dbc\nStep 6/9 : USER dnstap\n ---> Running in 433fb01855fe\nRemoving intermediate container 433fb01855fe\n ---> ab0898eb59ed\nStep 7/9 : EXPOSE 6000/tcp\n ---> Running in fda5c21e3bcf\nRemoving intermediate container fda5c21e3bcf\n ---> ad6466c7b8e6\nStep 8/9 : EXPOSE 8080/tcp\n ---> Running in 3035baa6c8a0\nRemoving intermediate container 3035baa6c8a0\n ---> 9bb1bbd639ab\nStep 9/9 : ENTRYPOINT [\"python\", \"-c\", \"from dnstap_receiver.receiver import start_receiver; start_receiver()\"]\n ---> Running in 8bfa75b3f4db\nRemoving intermediate container 8bfa75b3f4db\n ---> 77a889966f75\nSuccessfully built 77a889966f75\nSuccessfully tagged dnstap-receiver:latest\n","stderr":"","imageSize":77974164},"repair":{"violations":[],"repairedDockerfile":"FROM python:3.10-alpine\n\nLABEL name=\"Python dnstap receiver\" \\\n      description=\"Dnstap streams receiver\" \\\n      url=\"https://github.com/dmachard/dnstap-receiver\" \\\n      maintainer=\"d.machard@gmail.com\"\n      \nWORKDIR /home/dnstap\n\nCOPY . /home/dnstap/\n\nRUN true \\\n    && apk update \\\n    && apk add gcc musl-dev \\\n    && adduser -D dnstap \\\n    && pip install --no-cache-dir -r requirements.txt\\\n    && apk del gcc musl-dev \\\n    && cd /home/dnstap \\\n    && mkdir -p /home/dnstap/logs/ \\\n    && sed -i 's/local-address: 127.0.0.1/local-address: 0.0.0.0/g' ./dnstap_receiver/dnstap.conf \\\n    && chown -R dnstap:dnstap /home/dnstap \\\n    && true\n    \nUSER dnstap\n\nEXPOSE 6000/tcp\nEXPOSE 8080/tcp\n\nENTRYPOINT [\"python\", \"-c\", \"from dnstap_receiver.receiver import start_receiver; start_receiver()\"]\n"},"endTime":1672009787856}