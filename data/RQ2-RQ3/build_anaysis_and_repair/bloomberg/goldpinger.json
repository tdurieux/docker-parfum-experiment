{"repository":"https://github.com/bloomberg/goldpinger","dockerfilePath":"Dockerfile","startTime":1672864088541,"endTime":1672864664645,"clone":{"startTime":1672864088542,"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/bloomberg/goldpinger'...\n","error":null,"endTime":1672864092100,"commit":"95363554e4078ce20e4fe746ce98b332e472e469"},"originalBuild":{"startTime":1672864092280,"endTime":1672864345601,"error":null,"stdout":"Sending build context to Docker daemon  5.928MB\r\r\nStep 1/18 : FROM golang:1.15-alpine as builder\n1.15-alpine: Pulling from library/golang\n29291e31a76a: Pulling fs layer\ne4bc8fc554c3: Pulling fs layer\n803daa35ea47: Pulling fs layer\n38284154e396: Pulling fs layer\na66f7597198a: Pulling fs layer\na66f7597198a: Waiting\n38284154e396: Waiting\n803daa35ea47: Verifying Checksum\n803daa35ea47: Download complete\ne4bc8fc554c3: Verifying Checksum\ne4bc8fc554c3: Download complete\n29291e31a76a: Verifying Checksum\n29291e31a76a: Download complete\n29291e31a76a: Pull complete\na66f7597198a: Verifying Checksum\na66f7597198a: Download complete\ne4bc8fc554c3: Pull complete\n803daa35ea47: Pull complete\n38284154e396: Verifying Checksum\n38284154e396: Download complete\n38284154e396: Pull complete\na66f7597198a: Pull complete\nDigest: sha256:b58c367d52e46cdedc25ec9cd74cadb14ad65e8db75b25e5ec117cdb227aa264\nStatus: Downloaded newer image for golang:1.15-alpine\n ---> 1403af3b6d4a\nStep 2/18 : ARG TARGETARCH\n ---> Running in ee25208069ad\nRemoving intermediate container ee25208069ad\n ---> 10d605d328c0\nStep 3/18 : ARG TARGETOS\n ---> Running in cb2b09344a51\nRemoving intermediate container cb2b09344a51\n ---> 4fc2951cd03d\nStep 4/18 : ENV GO111MODULE=on\n ---> Running in e00bdc9d9642\nRemoving intermediate container e00bdc9d9642\n ---> 448dc17a4a05\nStep 5/18 : RUN apk add --update git make bash\n ---> Running in 0be8c674f5da\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.14/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.14/community/x86_64/APKINDEX.tar.gz\n(1/11) Installing ncurses-terminfo-base (6.2_p20210612-r1)\n(2/11) Installing ncurses-libs (6.2_p20210612-r1)\n(3/11) Installing readline (8.1.0-r0)\n(4/11) Installing bash (5.1.16-r0)\nExecuting bash-5.1.16-r0.post-install\n(5/11) Installing brotli-libs (1.0.9-r5)\n(6/11) Installing nghttp2-libs (1.43.0-r0)\n(7/11) Installing libcurl (7.79.1-r4)\n(8/11) Installing expat (2.5.0-r0)\n(9/11) Installing pcre2 (10.36-r1)\n(10/11) Installing git (2.32.4-r0)\n(11/11) Installing make (4.3-r0)\nExecuting busybox-1.33.1-r3.trigger\nOK: 21 MiB in 26 packages\nRemoving intermediate container 0be8c674f5da\n ---> 5689980ecfe4\nStep 6/18 : WORKDIR /w\n ---> Running in 8d27ae723bb7\nRemoving intermediate container 8d27ae723bb7\n ---> 6c97083896f5\nStep 7/18 : COPY go.mod go.sum ./\n ---> 5583d5a17cf3\nStep 8/18 : RUN go mod download\n ---> Running in 776087150be9\nRemoving intermediate container 776087150be9\n ---> 03a158934c30\nStep 9/18 : COPY . ./\n ---> 10d0788312e7\nStep 10/18 : RUN GOOS=$TARGETOS GOARCH=$TARGETARCH make bin/goldpinger\n ---> Running in d068fe0ad640\nGOOS= PKG=\"github.com/bloomberg/goldpinger\" ARCH= VERSION=v3.7.0 BIN=goldpinger ./build/build.sh\nRemoving intermediate container d068fe0ad640\n ---> 410bca811c9a\nStep 11/18 : RUN go mod vendor\n ---> Running in a82480c427ea\nRemoving intermediate container a82480c427ea\n ---> c76bddefbf34\nStep 12/18 : FROM scratch as simple\n ---> \nStep 13/18 : COPY --from=builder /w/bin/goldpinger /goldpinger\n ---> 4e75d65bf6a8\nStep 14/18 : COPY ./static /static\n ---> 67166df9f23d\nStep 15/18 : COPY ./config /config\n ---> 34e8419a9941\nStep 16/18 : ENTRYPOINT [\"/goldpinger\", \"--static-file-path\", \"/static\"]\n ---> Running in 7c12d6c7c8df\nRemoving intermediate container 7c12d6c7c8df\n ---> 38da60ef1bbf\nStep 17/18 : FROM simple as vendor\n ---> 38da60ef1bbf\nStep 18/18 : COPY --from=builder /w/vendor /goldpinger-vendor-sources\n ---> 32aad3c1d37c\nSuccessfully built 32aad3c1d37c\nSuccessfully tagged goldpinger:latest\n","stderr":"","imageSize":78905541},"repair":{"startTime":1672864345695,"endTime":1672864345782,"violations":[{"name":"apkAddUseNoCache","position":{"start":7,"end":7,"columnStart":4,"columnEnd":34}}],"repairedDockerfile":"FROM golang:1.15-alpine as builder\nARG TARGETARCH\nARG TARGETOS\nENV GO111MODULE=on\n\n# Install our build tools\n\nRUN apk add --no-cache --update git make bash\n\n# Get dependencies\n\nWORKDIR /w\nCOPY go.mod go.sum ./\nRUN go mod download\n\n# Build goldpinger\nCOPY . ./\nRUN GOOS=$TARGETOS GOARCH=$TARGETARCH make bin/goldpinger\n# Create vendor folder\nRUN go mod vendor\n\n# Build the asset container, copy over goldpinger\nFROM scratch as simple\nCOPY --from=builder /w/bin/goldpinger /goldpinger\nCOPY ./static /static\nCOPY ./config /config\nENTRYPOINT [\"/goldpinger\", \"--static-file-path\", \"/static\"]\n\n# For vendor builds, use the simple build and add the vendor'd files\nFROM simple as vendor\nCOPY --from=builder /w/vendor /goldpinger-vendor-sources\n"},"repairedBuild":{"startTime":1672864347597,"endTime":1672864663558,"error":null,"stdout":"Sending build context to Docker daemon  5.928MB\r\r\nStep 1/18 : FROM golang:1.15-alpine as builder\n ---> 1403af3b6d4a\nStep 2/18 : ARG TARGETARCH\n ---> Running in 0363a39f32da\nRemoving intermediate container 0363a39f32da\n ---> bf8df416e117\nStep 3/18 : ARG TARGETOS\n ---> Running in c145888178f6\nRemoving intermediate container c145888178f6\n ---> ea9bf174a849\nStep 4/18 : ENV GO111MODULE=on\n ---> Running in 631c90485175\nRemoving intermediate container 631c90485175\n ---> 35d14a7aba5d\nStep 5/18 : RUN apk add --no-cache --update git make bash\n ---> Running in 1a1e7b192266\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.14/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.14/community/x86_64/APKINDEX.tar.gz\n(1/11) Installing ncurses-terminfo-base (6.2_p20210612-r1)\n(2/11) Installing ncurses-libs (6.2_p20210612-r1)\n(3/11) Installing readline (8.1.0-r0)\n(4/11) Installing bash (5.1.16-r0)\nExecuting bash-5.1.16-r0.post-install\n(5/11) Installing brotli-libs (1.0.9-r5)\n(6/11) Installing nghttp2-libs (1.43.0-r0)\n(7/11) Installing libcurl (7.79.1-r4)\n(8/11) Installing expat (2.5.0-r0)\n(9/11) Installing pcre2 (10.36-r1)\n(10/11) Installing git (2.32.4-r0)\n(11/11) Installing make (4.3-r0)\nExecuting busybox-1.33.1-r3.trigger\nOK: 21 MiB in 26 packages\nRemoving intermediate container 1a1e7b192266\n ---> b76ba7a4489b\nStep 6/18 : WORKDIR /w\n ---> Running in 61c04c74ee5d\nRemoving intermediate container 61c04c74ee5d\n ---> 75d416b80757\nStep 7/18 : COPY go.mod go.sum ./\n ---> 2d1d670cdeb3\nStep 8/18 : RUN go mod download\n ---> Running in ee4bedc9463a\nRemoving intermediate container ee4bedc9463a\n ---> 2501e32bba18\nStep 9/18 : COPY . ./\n ---> 47ee6a0b6619\nStep 10/18 : RUN GOOS=$TARGETOS GOARCH=$TARGETARCH make bin/goldpinger\n ---> Running in 96693dc5eaf5\nGOOS= PKG=\"github.com/bloomberg/goldpinger\" ARCH= VERSION=v3.7.0 BIN=goldpinger ./build/build.sh\nRemoving intermediate container 96693dc5eaf5\n ---> 89dbdd6dfec2\nStep 11/18 : RUN go mod vendor\n ---> Running in 3c012d177c5f\nRemoving intermediate container 3c012d177c5f\n ---> 7a454208c03e\nStep 12/18 : FROM scratch as simple\n ---> \nStep 13/18 : COPY --from=builder /w/bin/goldpinger /goldpinger\n ---> 5112d6e11569\nStep 14/18 : COPY ./static /static\n ---> 193c792d01fd\nStep 15/18 : COPY ./config /config\n ---> 7b62797c3536\nStep 16/18 : ENTRYPOINT [\"/goldpinger\", \"--static-file-path\", \"/static\"]\n ---> Running in 30884cb4db36\nRemoving intermediate container 30884cb4db36\n ---> 36341c6de30d\nStep 17/18 : FROM simple as vendor\n ---> 36341c6de30d\nStep 18/18 : COPY --from=builder /w/vendor /goldpinger-vendor-sources\n ---> 47a99120f016\nSuccessfully built 47a99120f016\nSuccessfully tagged goldpinger:latest\n","stderr":"","imageSize":78905541}}