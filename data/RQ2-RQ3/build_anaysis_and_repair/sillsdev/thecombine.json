{"repository":"https://github.com/sillsdev/thecombine","dockerfilePath":"Dockerfile","startTime":1672273994076,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/sillsdev/thecombine'...\n","error":null,"commit":"f20ae7a07c8347324db4742105a047739f832bcf"},"originalBuild":{"startTimestamp":1672273997007,"endTimestamp":1672274585194,"error":{"code":1,"killed":false,"signal":null,"cmd":"docker build --no-cache --force-rm -t thecombine:latest -f /tmp/dinghy-analysis/sillsdev/thecombine/Dockerfile ."},"stdout":"Sending build context to Docker daemon  10.04MB\r\r\nStep 1/31 : FROM python:3.10 AS user_guide_builder\n3.10: Pulling from library/python\nDigest: sha256:e18f86de2e5eadcb00af7d57eefeeb377aec81a41d033bf20de426ae6c7bbff6\nStatus: Downloaded newer image for python:3.10\n ---> 3aae3bded9cf\nStep 2/31 : ENV PYTHONDONTWRITEBYTECODE 1\n ---> Running in ebe105c09c4e\nRemoving intermediate container ebe105c09c4e\n ---> b8cf765713e8\nStep 3/31 : ENV PYTHONUNBUFFERED 1\n ---> Running in 77f394665ee9\nRemoving intermediate container 77f394665ee9\n ---> 8b20c8879dc2\nStep 4/31 : ENV PIP_NO_CACHE_DIR 1\n ---> Running in 07907c7f61e7\nRemoving intermediate container 07907c7f61e7\n ---> 6c948e56cea3\nStep 5/31 : WORKDIR /app\n ---> Running in 6970e9bc0be8\nRemoving intermediate container 6970e9bc0be8\n ---> b258137bd717\nStep 6/31 : RUN pip install --upgrade pip &&     pip install tox\n ---> Running in 79386697630f\nRequirement already satisfied: pip in /usr/local/lib/python3.10/site-packages (22.3.1)\n\u001b[91mWARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv\n\u001b[0mCollecting tox\n  Downloading tox-4.0.19-py3-none-any.whl (144 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 144.0/144.0 kB 20.7 MB/s eta 0:00:00\nCollecting platformdirs>=2.6\n  Downloading platformdirs-2.6.2-py3-none-any.whl (14 kB)\nCollecting virtualenv>=20.17.1\n  Downloading virtualenv-20.17.1-py3-none-any.whl (8.8 MB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 8.8/8.8 MB 70.9 MB/s eta 0:00:00\nCollecting chardet>=5.1\n  Downloading chardet-5.1.0-py3-none-any.whl (199 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 199.1/199.1 kB 78.7 MB/s eta 0:00:00\nCollecting packaging>=22\n  Downloading packaging-22.0-py3-none-any.whl (42 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 42.6/42.6 kB 92.5 MB/s eta 0:00:00\nCollecting filelock>=3.8.2\n  Downloading filelock-3.9.0-py3-none-any.whl (9.7 kB)\nCollecting cachetools>=5.2\n  Downloading cachetools-5.2.0-py3-none-any.whl (9.3 kB)\nCollecting colorama>=0.4.6\n  Downloading colorama-0.4.6-py2.py3-none-any.whl (25 kB)\nCollecting pluggy>=1\n  Downloading pluggy-1.0.0-py2.py3-none-any.whl (13 kB)\nCollecting pyproject-api>=1.2.1\n  Downloading pyproject_api-1.2.1-py3-none-any.whl (11 kB)\nCollecting tomli>=2.0.1\n  Downloading tomli-2.0.1-py3-none-any.whl (12 kB)\nCollecting distlib<1,>=0.3.6\n  Downloading distlib-0.3.6-py2.py3-none-any.whl (468 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 468.5/468.5 kB 109.8 MB/s eta 0:00:00\nInstalling collected packages: distlib, tomli, pluggy, platformdirs, packaging, filelock, colorama, chardet, cachetools, virtualenv, pyproject-api, tox\nSuccessfully installed cachetools-5.2.0 chardet-5.1.0 colorama-0.4.6 distlib-0.3.6 filelock-3.9.0 packaging-22.0 platformdirs-2.6.2 pluggy-1.0.0 pyproject-api-1.2.1 tomli-2.0.1 tox-4.0.19 virtualenv-20.17.1\n\u001b[91mWARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv\n\u001b[0mRemoving intermediate container 79386697630f\n ---> 7e15ef3a5912\nStep 7/31 : COPY dev-requirements.txt tox.ini ./\n ---> 5012ac95453a\nStep 8/31 : COPY docs/user_guide docs/user_guide\n ---> 68430ac53891\nStep 9/31 : RUN tox -e user-guide\n ---> Running in 2465007d6324\nuser-guide: install_deps> python -I -m pip install -r /app/dev-requirements.txt\nuser-guide: commands[0] /app/docs/user_guide> mkdocs build\n\u001b[91mINFO     -  Cleaning site directory\nINFO     -  Building documentation to directory: /app/docs/user_guide/site\n\u001b[0m\u001b[91mINFO     -  Documentation built in 0.31 seconds\n\u001b[0m  user-guide: OK (39.89=setup[38.94]+cmd[0.96] seconds)\n  congratulations :) (40.33 seconds)\nRemoving intermediate container 2465007d6324\n ---> 5473124bccd6\nStep 10/31 : FROM node:16 AS frontend_builder\n ---> c910109adbfd\nStep 11/31 : WORKDIR /app\n ---> Running in c620d1e85aef\nRemoving intermediate container c620d1e85aef\n ---> 6ec244da562d\nStep 12/31 : COPY package*.json ./\n ---> 4a2e9e9e16e0\nStep 13/31 : RUN npm install\n ---> Running in cfbca9935322\n\u001b[91mnpm WARN deprecated urix@0.1.0: Please see https://github.com/lydell/urix#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated stable@0.1.8: Modern JS already guarantees Array#sort() is a stable sort, so this library is deprecated. See the compatibility table on MDN: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/sort#browser_compatibility\n\u001b[0m\u001b[91mnpm WARN deprecated source-map-url@0.4.1: See https://github.com/lydell/source-map-url#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated source-map-resolve@0.5.3: See https://github.com/lydell/source-map-resolve#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated sane@4.1.0: some dependency vulnerabilities fixed, support for node < 10 dropped, and newer ECMAScript syntax/features added\n\u001b[0m\u001b[91mnpm WARN deprecated resolve-url@0.2.1: https://github.com/lydell/resolve-url#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated redux-devtools-extension@2.13.9: Package moved to @redux-devtools/extension.\n\u001b[0m\u001b[91mnpm WARN deprecated querystring@0.2.0: The querystring API is considered Legacy. new code should use the URLSearchParams API instead.\n\u001b[0m\u001b[91mnpm WARN deprecated rollup-plugin-babel@4.4.0: This package has been deprecated and is no longer maintained. Please use @rollup/plugin-babel.\n\u001b[0m\u001b[91mnpm WARN deprecated flatten@1.0.3: flatten is deprecated in favor of utility frameworks such as lodash.\n\u001b[0m\u001b[91mnpm WARN deprecated svgo@1.3.2: This SVGO version is no longer supported. Upgrade to v2.x.x.\n\u001b[0m\u001b[91mnpm WARN deprecated babel-eslint@10.1.0: babel-eslint is now @babel/eslint-parser. This package will no longer receive updates.\n\u001b[0m\u001b[91mnpm WARN deprecated @hapi/topo@3.1.6: This version has been deprecated and is no longer supported or maintained\n\u001b[0m\u001b[91mnpm WARN deprecated @hapi/bourne@1.3.2: This version has been deprecated and is no longer supported or maintained\n\u001b[0m\u001b[91mnpm WARN deprecated @hapi/hoek@8.5.1: This version has been deprecated and is no longer supported or maintained\n\u001b[0m\u001b[91mnpm WARN deprecated @hapi/address@2.1.4: Moved to 'npm install @sideway/address'\n\u001b[0m\u001b[91mnpm WARN deprecated @hapi/joi@15.1.1: Switch to 'npm install joi'\n\u001b[0m\u001b[91mnpm WARN deprecated uuid@3.4.0: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.\n\u001b[0m\u001b[91mnpm WARN deprecated chokidar@2.1.8: Chokidar 2 does not receive security updates since 2019. Upgrade to chokidar 3 with 15x fewer dependencies\n\u001b[0m\u001b[91mnpm WARN deprecated chokidar@2.1.8: Chokidar 2 does not receive security updates since 2019. Upgrade to chokidar 3 with 15x fewer dependencies\n\u001b[0m\u001b[91mnpm WARN deprecated uuid@3.4.0: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.\n\u001b[0m\u001b[91mnpm WARN deprecated core-js@2.6.12: core-js@<3.23.3 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Some versions have web compatibility issues. Please, upgrade your dependencies to the actual version of core-js.\n\u001b[0m\nadded 2231 packages, and audited 2232 packages in 41s\n\n283 packages are looking for funding\n  run `npm fund` for details\n\n34 vulnerabilities (2 low, 2 moderate, 20 high, 10 critical)\n\nTo address issues that do not require attention, run:\n  npm audit fix\n\nTo address all issues (including breaking changes), run:\n  npm audit fix --force\n\nRun `npm audit` for details.\n\u001b[91mnpm notice \nnpm notice\u001b[0m\u001b[91m New major version of npm available! 8.19.3 -> 9.2.0\nnpm notice Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm notice\u001b[0m\u001b[91m Run `npm install -g npm@9.2.0` to update!\nnpm \u001b[0m\u001b[91mnotice\u001b[0m\u001b[91m \n\u001b[0mRemoving intermediate container cfbca9935322\n ---> 0f7be9bdf1ba\nStep 14/31 : COPY . ./\n ---> 9e433d2e781d\nStep 15/31 : RUN npm run build\n ---> Running in fe43e349268b\n\n> thecombine@1.0.0 build\n> react-scripts build\n\nCreating an optimized production build...\n\u001b[91mBrowserslist: caniuse-lite is outdated. Please run:\n  npx update-browserslist-db@latest\n  Why you should do it regularly: https://github.com/browserslist/update-db#readme\n\u001b[0mCompiled successfully.\n\nFile sizes after gzip:\n\n  1.03 MB    build/static/js/5.562b01ed.chunk.js\n  811.74 KB  build/static/js/12.22c835e2.chunk.js\n  171.84 KB  build/static/js/6.ccb2434f.chunk.js\n  90.72 KB   build/static/js/7.25c00e98.chunk.js\n  25.51 KB   build/static/js/13.547548bb.chunk.js\n  24.06 KB   build/static/js/main.206273ee.chunk.js\n  17.5 KB    build/static/js/9.6417cfa8.chunk.js\n  15.08 KB   build/static/js/1.208e0c0f.chunk.js\n  10.44 KB   build/static/js/8.3b5c8f48.chunk.js\n  10.32 KB   build/static/js/11.95eb9a94.chunk.js\n  5.78 KB    build/static/js/14.43d9c305.chunk.js\n  5.66 KB    build/static/js/10.d08eb6aa.chunk.js\n  5.23 KB    build/static/js/15.8736da50.chunk.js\n  4.33 KB    build/static/js/2.36f8e3c3.chunk.js\n  2.64 KB    build/static/css/5.68fdb14c.chunk.css\n  2.58 KB    build/static/js/0.6eb6ba48.chunk.js\n  2.4 KB     build/static/js/16.416d6c3a.chunk.js\n  1.63 KB    build/static/js/runtime-main.a99e85b5.js\n\nThe bundle size is significantly larger than recommended.\nConsider reducing it with code splitting: https://goo.gl/9VhYWB\nYou can also analyze the project dependencies: https://goo.gl/LeUzfb\n\nThe project was built assuming it is hosted at /.\nYou can control this with the homepage field in your package.json.\n\nThe build folder is ready to be deployed.\nYou may serve it with a static server:\n\n  npm install -g serve\n  serve -s build\n\nFind out more about deployment here:\n\n  https://cra.link/deployment\n\nRemoving intermediate container fe43e349268b\n ---> 8e8dd8e00bbb\nStep 16/31 : FROM nginx:1.23\n1.23: Pulling from library/nginx\nDigest: sha256:0047b729188a15da49380d9506d65959cce6d40291ccfb4e039f5dc7efd33286\nStatus: Downloaded newer image for nginx:1.23\n ---> 1403e55ab369\nStep 17/31 : WORKDIR /app\n ---> Running in 62da99e243e1\nRemoving intermediate container 62da99e243e1\n ---> 55695c7e9f8c\nStep 18/31 : ENV USER_GUIDE_HOST_DIR /usr/share/nginx/user_guide\n ---> Running in 6932f455d881\nRemoving intermediate container 6932f455d881\n ---> 60ff422b90f5\nStep 19/31 : ENV FRONTEND_HOST_DIR /usr/share/nginx/html\n ---> Running in ece8966ad855\nRemoving intermediate container ece8966ad855\n ---> 1b388cfd3540\nStep 20/31 : RUN mkdir /etc/nginx/templates\n ---> Running in 01ed4f8e74d2\nRemoving intermediate container 01ed4f8e74d2\n ---> 157fe6c88e8b\nStep 21/31 : RUN mkdir /etc/nginx/page_templates\n ---> Running in 83cd4d542588\nRemoving intermediate container 83cd4d542588\n ---> 0dc67f9f6118\nStep 22/31 : RUN mkdir ${FRONTEND_HOST_DIR}/scripts\n ---> Running in 4d88ac839fc9\nRemoving intermediate container 4d88ac839fc9\n ---> 050ff3726a05\nStep 23/31 : RUN mkdir ${FRONTEND_HOST_DIR}/url_moved\n ---> Running in 06fc3057d794\nRemoving intermediate container 06fc3057d794\n ---> 70057a3d2dcc\nStep 24/31 : COPY --from=user_guide_builder /app/docs/user_guide/site ${USER_GUIDE_HOST_DIR}\n ---> c31e7f100a63\nStep 25/31 : COPY --from=frontend_builder /app/build ${FRONTEND_HOST_DIR}\n ---> 924a0b844ce4\nStep 26/31 : COPY nginx/pages/url_moved_home.html /etc/nginx/page_templates/url_moved_home.html\n ---> 313504edc353\nStep 27/31 : COPY public/favicon.ico ${FRONTEND_HOST_DIR}/url_moved/favicon.ico\n ---> 4857d2dcf8b1\nStep 28/31 : COPY src/resources/tractor.png ${FRONTEND_HOST_DIR}/url_moved/tractor.png\n ---> fd0936571efc\nStep 29/31 : COPY public/scripts/release.js ${FRONTEND_HOST_DIR}/scripts/release.js\n","stderr":"COPY failed: file not found in build context or excluded by .dockerignore: stat public/scripts/release.js: file does not exist\n"},"endTime":1672274585298}