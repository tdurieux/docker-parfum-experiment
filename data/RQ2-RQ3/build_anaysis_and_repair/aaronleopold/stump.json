{"repository":"https://github.com/aaronleopold/stump","dockerfilePath":"Dockerfile","startTime":1672150755501,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/aaronleopold/stump'...\n","error":null,"commit":"54bd46700e50d54375bd263ed0cf9fdd5fb17e82"},"originalBuild":{"startTimestamp":1672150756828,"endTimestamp":1672151026078,"error":{"code":2,"killed":false,"signal":null,"cmd":"docker build --no-cache --force-rm -t stump:latest -f /tmp/dinghy-analysis/aaronleopold/stump/Dockerfile ."},"stdout":"Sending build context to Docker daemon  10.11MB\r\r\nStep 1/50 : FROM node:16-alpine3.14 as frontend\n16-alpine3.14: Pulling from library/node\n8663204ce13b: Pulling fs layer\nd19b13245430: Pulling fs layer\ne4a0f03ce8f3: Pulling fs layer\ne319ab3d00f8: Pulling fs layer\ne319ab3d00f8: Waiting\ne4a0f03ce8f3: Download complete\n8663204ce13b: Verifying Checksum\n8663204ce13b: Download complete\nd19b13245430: Verifying Checksum\nd19b13245430: Download complete\ne319ab3d00f8: Verifying Checksum\ne319ab3d00f8: Download complete\n8663204ce13b: Pull complete\nd19b13245430: Pull complete\ne4a0f03ce8f3: Pull complete\ne319ab3d00f8: Pull complete\nDigest: sha256:889139aa824c8b9dd29938eecfd300d51fc2e984f9cd03df391bcfbe9cf10b53\nStatus: Downloaded newer image for node:16-alpine3.14\n ---> 2680430c119d\nStep 2/50 : ARG TARGETARCH\n ---> Running in 8bea05f0a617\nRemoving intermediate container 8bea05f0a617\n ---> 809aff92bf54\nStep 3/50 : WORKDIR /app\n ---> Running in 433dbc6a4308\nRemoving intermediate container 433dbc6a4308\n ---> da8e5a5b94a1\nStep 4/50 : COPY . .\n ---> dcff298cd1a8\nStep 5/50 : RUN npm install -g pnpm\n ---> Running in 9c38eaaa6bc1\n\u001b[91mnpm\u001b[0m\u001b[91m WARN config global `--global`, `--local` are deprecated. Use `--location=global` instead.\n\u001b[0m\nadded 1 package, and audited 2 packages in 864ms\n\n1 package is looking for funding\n  run `npm fund` for details\n\nfound 0 vulnerabilities\n\u001b[91mnpm notice \nnpm\u001b[0m\u001b[91m \u001b[0m\u001b[91mnotice New major version of npm available! 8.11.0 -> 9.2.0\nnpm notice Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm \u001b[0m\u001b[91mnotice Run `npm install -g npm@9.2.0` to update!\nnpm notice\u001b[0m\u001b[91m \n\u001b[0mRemoving intermediate container 9c38eaaa6bc1\n ---> f42cf51e2f30\nStep 6/50 : RUN pnpm i\n ---> Running in 2b927ddca611\nScope: all 9 workspace projects\nProgress: resolved 1, reused 0, downloaded 0, added 0\ncommon/client                            |  WARN  deprecated @types/axios@0.14.0\nProgress: resolved 21, reused 0, downloaded 2, added 0\nProgress: resolved 37, reused 0, downloaded 19, added 0\nProgress: resolved 54, reused 0, downloaded 37, added 0\nProgress: resolved 64, reused 0, downloaded 56, added 0\nProgress: resolved 98, reused 0, downloaded 81, added 0\nProgress: resolved 155, reused 0, downloaded 131, added 0\nProgress: resolved 181, reused 0, downloaded 150, added 0\nProgress: resolved 206, reused 0, downloaded 171, added 0\ncommon/interface                         |  WARN  deprecated @types/localforage@0.0.34\nProgress: resolved 233, reused 0, downloaded 194, added 0\nProgress: resolved 261, reused 0, downloaded 223, added 0\napps/desktop                             |  WARN  deprecated sourcemap-codec@1.4.8\nProgress: resolved 310, reused 0, downloaded 264, added 0\nProgress: resolved 390, reused 0, downloaded 316, added 0\napps/desktop                             |  WARN  deprecated uuid@3.3.2\nProgress: resolved 413, reused 0, downloaded 347, added 0\nProgress: resolved 436, reused 0, downloaded 368, added 0\nProgress: resolved 476, reused 0, downloaded 401, added 0\napps/desktop                             |  WARN  deprecated core-js@2.6.12\nProgress: resolved 598, reused 0, downloaded 522, added 0\nProgress: resolved 692, reused 0, downloaded 580, added 0\nProgress: resolved 809, reused 0, downloaded 754, added 0\nPackages: +798\n++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++\nProgress: resolved 822, reused 0, downloaded 786, added 0\nPackages are copied from the content-addressable store to the virtual store.\n  Content-addressable store is at: /root/.local/share/pnpm/store/v3\n  Virtual store is at:             node_modules/.pnpm\nProgress: resolved 822, reused 0, downloaded 792, added 134\nProgress: resolved 822, reused 0, downloaded 793, added 525\nProgress: resolved 822, reused 0, downloaded 793, added 798, done\n.../core-js@2.6.12/node_modules/core-js postinstall$ node -e \"try{require('./postinstall')}catch(e){}\"\n.../core-js@3.27.0/node_modules/core-js postinstall$ node -e \"try{require('./postinstall')}catch(e){}\"\n.../es5-ext@0.10.62/node_modules/es5-ext postinstall$  node -e \"try{require('./_postinstall')}catch(e){}\" || exit 0\n.../core-js@3.27.0/node_modules/core-js postinstall: Thank you for using core-js ( https://github.com/zloirock/core-js ) for polyfilling JavaScript standard library!\n.../core-js@3.27.0/node_modules/core-js postinstall: The project needs your help! Please consider supporting of core-js:\n.../core-js@3.27.0/node_modules/core-js postinstall: > https://opencollective.com/core-js \n.../core-js@3.27.0/node_modules/core-js postinstall: > https://patreon.com/zloirock \n.../core-js@3.27.0/node_modules/core-js postinstall: > bitcoin: bc1qlea7544qtsmj2rayg0lthvza9fau63ux0fstcz \n.../core-js@3.27.0/node_modules/core-js postinstall: Also, the author of core-js ( https://github.com/zloirock ) is looking for a good job -)\n.../core-js@2.6.12/node_modules/core-js postinstall: Thank you for using core-js ( https://github.com/zloirock/core-js ) for polyfilling JavaScript standard library!\n.../core-js@2.6.12/node_modules/core-js postinstall: The project needs your help! Please consider supporting of core-js on Open Collective or Patreon: \n.../core-js@2.6.12/node_modules/core-js postinstall: > https://opencollective.com/core-js \n.../core-js@2.6.12/node_modules/core-js postinstall: > https://www.patreon.com/zloirock \n.../core-js@2.6.12/node_modules/core-js postinstall: Also, the author of core-js ( https://github.com/zloirock ) is looking for a good job -)\n.../core-js@3.27.0/node_modules/core-js postinstall: Done\n.../core-js@2.6.12/node_modules/core-js postinstall: Done\n.../es5-ext@0.10.62/node_modules/es5-ext postinstall: Done\n.../esbuild@0.15.18/node_modules/esbuild postinstall$ node install.js\n.../esbuild@0.15.18/node_modules/esbuild postinstall: Done\n. prepare$ husky install\n. prepare: Done\n\ndevDependencies:\n+ concurrently 7.6.0\n+ cpy-cli 4.2.0\n+ husky 8.0.2\n+ lint-staged 13.1.0\n+ move-cli 2.0.0\n+ prettier 2.8.1\n+ trash-cli 5.0.0\n\n WARN  Issues with peer dependencies found\ncommon/client\n├─┬ @tanstack/react-query 4.20.4\n│ ├── ✕ missing peer react@\"^16.8.0 || ^17.0.0 || ^18.0.0\"\n│ ├── ✕ missing peer react-dom@\"^16.8.0 || ^17.0.0 || ^18.0.0\"\n│ └─┬ use-sync-external-store 1.2.0\n│   └── ✕ missing peer react@\"^16.8.0 || ^17.0.0 || ^18.0.0\"\n├─┬ react-use-websocket 4.2.0\n│ ├── ✕ missing peer react@\">= 18.0.0\"\n│ └── ✕ missing peer react-dom@\">= 18.0.0\"\n└─┬ zustand 4.1.5\n  └── ✕ missing peer react@>=16.8\nPeer dependencies that should be installed:\n  react-dom@\">=18.0.0 <19.0.0\"\n  react@\">=18.0.0 <19.0.0\"\n\ncommon/interface\n├─┬ @emotion/react 11.10.5\n│ ├── ✕ missing peer @babel/core@^7.0.0\n│ └─┬ @emotion/babel-plugin 11.10.5\n│   ├── ✕ missing peer @babel/core@^7.0.0\n│   └─┬ @babel/plugin-syntax-jsx 7.18.6\n│     └── ✕ missing peer @babel/core@^7.0.0-0\n├─┬ @emotion/styled 11.10.5\n│ └── ✕ missing peer @babel/core@^7.0.0\n├─┬ chakra-react-select 4.4.3\n│ ├── ✕ missing peer @chakra-ui/form-control@^2.0.0\n│ ├── ✕ missing peer @chakra-ui/icon@^3.0.0\n│ ├── ✕ missing peer @chakra-ui/layout@^2.0.0\n│ ├── ✕ missing peer @chakra-ui/menu@^2.0.0\n│ ├── ✕ missing peer @chakra-ui/spinner@^2.0.0\n│ └── ✕ missing peer @chakra-ui/system@^2.0.0\n└─┬ react-hot-toast 2.4.0\n  └─┬ goober 2.1.11\n    └── ✕ missing peer csstype@^3.0.10\nPeer dependencies that should be installed:\n  @babel/core@\">=7.0.0 <8.0.0\"\n  @chakra-ui/form-control@^2.0.0\n  @chakra-ui/icon@^3.0.0\n  @chakra-ui/layout@^2.0.0\n  @chakra-ui/menu@^2.0.0\n  @chakra-ui/spinner@^2.0.0\n  @chakra-ui/system@^2.0.0\n  csstype@^3.0.10\n\nDone in 25.6s\nRemoving intermediate container 2b927ddca611\n ---> 5f1e9b87e84c\nStep 7/50 : RUN pnpm web build\n ---> Running in b31e4d518688\n\n> @stump/monorepo@0.0.0 web /app\n> pnpm --filter @stump/web -- \"build\"\n\n\n> @stump/web@0.0.0 build /app/apps/web\n> vite build\n\nvite v3.2.5 building for production...\ntransforming...\n✓ 2702 modules transformed.\nrendering chunks...\n../dist/index.html                                     0.42 KiB\n../dist/manifest.json                                  7.99 KiB\n../dist/assets/Home.aa9d6bdb.js                        0.76 KiB / gzip: 0.48 KiB\n../dist/assets/chunk-6FWJQRCB.d3a611f4.js              0.15 KiB / gzip: 0.14 KiB\n../dist/assets/LibrariesStats.444a02fa.js              4.91 KiB / gzip: 2.15 KiB\n../dist/assets/useGetPage.66c7fd5d.js                  4.48 KiB / gzip: 1.98 KiB\n../dist/assets/useWindowSize.51fe490a.js               0.54 KiB / gzip: 0.28 KiB\n../dist/assets/chunk-RACJ2OQY.6a9dcd89.js              0.54 KiB / gzip: 0.35 KiB\n../dist/assets/LibraryOverview.7a500ae8.js             8.10 KiB / gzip: 3.43 KiB\n../dist/assets/PagePopoverForm.6081e2ea.js             5.36 KiB / gzip: 1.78 KiB\n../dist/assets/Card.95155245.js                        5.10 KiB / gzip: 1.40 KiB\n../dist/assets/_commonjs-dynamic-modules.30ae7933.js   0.23 KiB / gzip: 0.19 KiB\n../dist/assets/LibraryFileExplorer.d08d896c.js         1.31 KiB / gzip: 0.76 KiB\n../dist/assets/media.558f6540.js                       0.96 KiB / gzip: 0.48 KiB\n../dist/assets/BookOverview.125313d6.js                1.06 KiB / gzip: 0.63 KiB\n../dist/assets/SettingsLayout.50a75775.js              1.20 KiB / gzip: 0.60 KiB\n../dist/assets/SeriesOverview.fac36ade.js              7.54 KiB / gzip: 2.42 KiB\n../dist/assets/ReadBook.d1d4b039.js                    6.63 KiB / gzip: 2.69 KiB\n../dist/assets/GeneralSettings.bdfb5f8e.js             0.23 KiB / gzip: 0.19 KiB\n../dist/assets/UserSettings.f2dd5ab0.js                0.13 KiB / gzip: 0.13 KiB\n../dist/assets/ServerSettings.0a40695e.js              0.39 KiB / gzip: 0.26 KiB\n../dist/assets/FourOhFour.3cd0ecdd.js                  0.12 KiB / gzip: 0.13 KiB\n../dist/assets/ServerConnectionError.ff2e0328.js       0.49 KiB / gzip: 0.36 KiB\n../dist/assets/chunk-SRMZVY4F.eb82ece5.js              0.33 KiB / gzip: 0.25 KiB\n../dist/assets/OnBoarding.bd8f3f1c.js                  0.70 KiB / gzip: 0.46 KiB\n../dist/assets/LoginOrClaim.875a8319.js                2.07 KiB / gzip: 0.98 KiB\n../dist/assets/ServerUrlForm.e660579b.js               7.78 KiB / gzip: 1.82 KiB\n../dist/assets/index.93604464.css                      15.33 KiB / gzip: 3.80 KiB\n../dist/assets/JobSettings.dc7eae95.js                 52.56 KiB / gzip: 14.54 KiB\n../dist/assets/ReadEpub.a246b6c9.js                    333.78 KiB / gzip: 98.89 KiB\n../dist/assets/index.cf7570fc.js                       1015.47 KiB / gzip: 308.92 KiB\n\u001b[91m\n(!) Some chunks are larger than 500 KiB after minification. Consider:\n- Using dynamic import() to code-split the application\n- Use build.rollupOptions.output.manualChunks to improve chunking: https://rollupjs.org/guide/en/#outputmanualchunks\n- Adjust chunk size limit for this warning via build.chunkSizeWarningLimit.\n\u001b[0mRemoving intermediate container b31e4d518688\n ---> 2ef1319a0a64\nStep 8/50 : RUN mv ./apps/web/dist build\n ---> Running in bce1ff7840d5\nRemoving intermediate container bce1ff7840d5\n ---> 5da548799c81\nStep 9/50 : FROM messense/rust-musl-cross:aarch64-musl AS arm64-backend\naarch64-musl: Pulling from messense/rust-musl-cross\n6e3729cf69e0: Already exists\n597f76f22e21: Pulling fs layer\n3b674f771e1a: Pulling fs layer\n83729a817d0b: Pulling fs layer\n137cbd824b6b: Pulling fs layer\n5b9a242f5f72: Pulling fs layer\n972d7ee348d5: Pulling fs layer\nc64ddc1ee278: Pulling fs layer\n4f4fb700ef54: Pulling fs layer\na6c3494cea32: Pulling fs layer\n8d653fe5b1ae: Pulling fs layer\n23950da66ab7: Pulling fs layer\nb967adbb5783: Pulling fs layer\n9937933f8df7: Pulling fs layer\n1436df6c379f: Pulling fs layer\n9b8f2c53b734: Pulling fs layer\n4f4fb700ef54: Waiting\nc64ddc1ee278: Waiting\na6c3494cea32: Waiting\n972d7ee348d5: Waiting\n5b9a242f5f72: Waiting\n1436df6c379f: Waiting\n8d653fe5b1ae: Waiting\n23950da66ab7: Waiting\n9b8f2c53b734: Waiting\nb967adbb5783: Waiting\n137cbd824b6b: Waiting\n3b674f771e1a: Download complete\n83729a817d0b: Verifying Checksum\n83729a817d0b: Download complete\n137cbd824b6b: Verifying Checksum\n137cbd824b6b: Download complete\n5b9a242f5f72: Verifying Checksum\nc64ddc1ee278: Verifying Checksum\nc64ddc1ee278: Download complete\n4f4fb700ef54: Verifying Checksum\n4f4fb700ef54: Download complete\na6c3494cea32: Download complete\n8d653fe5b1ae: Verifying Checksum\n8d653fe5b1ae: Download complete\n23950da66ab7: Verifying Checksum\n23950da66ab7: Download complete\nb967adbb5783: Verifying Checksum\nb967adbb5783: Download complete\n9937933f8df7: Download complete\n1436df6c379f: Verifying Checksum\n1436df6c379f: Download complete\n972d7ee348d5: Verifying Checksum\n972d7ee348d5: Download complete\n9b8f2c53b734: Verifying Checksum\n9b8f2c53b734: Download complete\n597f76f22e21: Verifying Checksum\n597f76f22e21: Download complete\n597f76f22e21: Pull complete\n3b674f771e1a: Pull complete\n83729a817d0b: Pull complete\n137cbd824b6b: Pull complete\n5b9a242f5f72: Pull complete\n972d7ee348d5: Pull complete\nc64ddc1ee278: Pull complete\n4f4fb700ef54: Pull complete\na6c3494cea32: Pull complete\n8d653fe5b1ae: Pull complete\n23950da66ab7: Pull complete\nb967adbb5783: Pull complete\n9937933f8df7: Pull complete\n1436df6c379f: Pull complete\n9b8f2c53b734: Pull complete\nDigest: sha256:4c77345b6432c0a5d5b41fab536d2ac07ff07b07337f2e7a20663a2d0937d363\nStatus: Downloaded newer image for messense/rust-musl-cross:aarch64-musl\n ---> b21200ad0dd6\nStep 10/50 : WORKDIR /app\n ---> Running in 6e5b18548c4d\nRemoving intermediate container 6e5b18548c4d\n ---> 9efd66356841\nStep 11/50 : COPY .cargo .cargo\n ---> 88ecff80d97a\nStep 12/50 : COPY . .\n ---> 264568857fcb\nStep 13/50 : ENV CARGO_NET_GIT_FETCH_WITH_CLI=true\n ---> Running in adc87113d76d\nRemoving intermediate container adc87113d76d\n ---> 18862766eb48\nStep 14/50 : RUN rustup target add aarch64-unknown-linux-musl\n ---> Running in a6a32dd55c58\n\u001b[91minfo: component 'rust-std' for target 'aarch64-unknown-linux-musl' is up to date\n\u001b[0mRemoving intermediate container a6a32dd55c58\n ---> 93e2926041f6\nStep 15/50 : RUN set -ex;     sed -i 's|\\/.*\\/core\\/prisma\\/schema.prisma|\\/app\\/core\\/prisma\\/schema.prisma|g' core/src/prisma.rs;     sed -i 's|\\/.*\\/core\\/prisma\\/migrations|\\/app\\/core\\/prisma\\/migrations|g' core/src/prisma.rs\n ---> Running in ac027bdd17c0\n\u001b[91m+ sed -i s|\\/.*\\/core\\/prisma\\/schema.prisma|\\/app\\/core\\/prisma\\/schema.prisma|g core/src/prisma.rs\n\u001b[0m\u001b[91msed: can't read core/src/prisma.rs: No such file or directory\n\u001b[0mRemoving intermediate container ac027bdd17c0\n","stderr":"The command '/bin/sh -c set -ex;     sed -i 's|\\/.*\\/core\\/prisma\\/schema.prisma|\\/app\\/core\\/prisma\\/schema.prisma|g' core/src/prisma.rs;     sed -i 's|\\/.*\\/core\\/prisma\\/migrations|\\/app\\/core\\/prisma\\/migrations|g' core/src/prisma.rs' returned a non-zero code: 2\n"},"endTime":1672151026178}