{"repository":"https://github.com/elementary/store","dockerfilePath":"Dockerfile","startTime":1672054895806,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/elementary/store'...\n","error":null,"commit":"49ab6979f859297e276210e6164db3d223f5aa67"},"originalBuild":{"startTimestamp":1672054896872,"endTimestamp":1672055109063,"error":null,"stdout":"Sending build context to Docker daemon  2.679MB\r\r\nStep 1/18 : FROM elixir:1.14.2-alpine as build\n1.14.2-alpine: Pulling from library/elixir\nca7dd9ec2225: Already exists\n54dd9149cc4e: Pulling fs layer\n662f1357606c: Pulling fs layer\n662f1357606c: Verifying Checksum\n662f1357606c: Download complete\n54dd9149cc4e: Verifying Checksum\n54dd9149cc4e: Download complete\n54dd9149cc4e: Pull complete\n662f1357606c: Pull complete\nDigest: sha256:dec764f24d28fa854085eb7e77e38525f00644d9ca559e0abac69811941a3219\nStatus: Downloaded newer image for elixir:1.14.2-alpine\n ---> f21569246959\nStep 2/18 : RUN mkdir -p /opt/app\n ---> Running in 18b3fbdedca4\nRemoving intermediate container 18b3fbdedca4\n ---> eb552a4537bb\nStep 3/18 : COPY . /opt/app\n ---> f0ad3922099b\nStep 4/18 : WORKDIR /opt/app\n ---> Running in 2a43e9f28213\nRemoving intermediate container 2a43e9f28213\n ---> 8c94cff62d70\nStep 5/18 : ENV MIX_ENV=prod\n ---> Running in 1ee595d5fafb\nRemoving intermediate container 1ee595d5fafb\n ---> ecfc7d97a17d\nStep 6/18 : RUN apk --no-cache --update add   g++   gcc   git   libc-dev   make   nodejs   npm   python3\n ---> Running in ab5a4114a802\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/community/x86_64/APKINDEX.tar.gz\n(1/30) Installing binutils (2.38-r3)\n(2/30) Installing libgomp (11.2.1_git20220219-r2)\n(3/30) Installing libatomic (11.2.1_git20220219-r2)\n(4/30) Installing gmp (6.2.1-r2)\n(5/30) Installing isl22 (0.22-r0)\n(6/30) Installing mpfr4 (4.1.0-r0)\n(7/30) Installing mpc1 (1.2.1-r0)\n(8/30) Installing gcc (11.2.1_git20220219-r2)\n(9/30) Installing musl-dev (1.2.3-r2)\n(10/30) Installing libc-dev (0.7.2-r3)\n(11/30) Installing g++ (11.2.1_git20220219-r2)\n(12/30) Installing brotli-libs (1.0.9-r6)\n(13/30) Installing nghttp2-libs (1.47.0-r0)\n(14/30) Installing libcurl (7.83.1-r5)\n(15/30) Installing expat (2.5.0-r0)\n(16/30) Installing pcre2 (10.40-r0)\n(17/30) Installing git (2.36.3-r0)\n(18/30) Installing make (4.3-r0)\n(19/30) Installing c-ares (1.18.1-r0)\n(20/30) Installing icu-data-en (71.1-r2)\nExecuting icu-data-en-71.1-r2.post-install\n\u001b[91m*\n* If you need ICU with non-English locales and legacy charset support, install\n* package icu-data-full.\n*\n\u001b[0m(21/30) Installing icu-libs (71.1-r2)\n(22/30) Installing nodejs (16.17.1-r0)\n(23/30) Installing npm (8.10.0-r0)\n(24/30) Installing libbz2 (1.0.8-r1)\n(25/30) Installing libffi (3.4.2-r1)\n(26/30) Installing gdbm (1.23-r0)\n(27/30) Installing xz-libs (5.2.5-r1)\n(28/30) Installing mpdecimal (2.5.1-r1)\n(29/30) Installing sqlite-libs (3.38.5-r0)\n(30/30) Installing python3 (3.10.9-r0)\nExecuting busybox-1.35.0-r17.trigger\nOK: 294 MiB in 54 packages\nRemoving intermediate container ab5a4114a802\n ---> 0231db51db1f\nStep 7/18 : RUN cd /opt/app &&   mix local.hex --force &&   mix local.rebar --force &&   mix deps.get\n ---> Running in fc410e5288de\n* creating /root/.mix/archives/hex-2.0.0\n* creating /root/.mix/elixir/1-14/rebar3\nResolving Hex dependencies...\nResolution completed in 0.169s\nUnchanged:\n  bamboo 2.2.0\n  bamboo_phoenix 1.0.0\n  bunt 0.2.1\n  castore 0.1.19\n  certifi 2.9.0\n  cowboy 2.9.0\n  cowboy_telemetry 0.3.1\n  cowlib 2.11.0\n  credo 1.6.7\n  decimal 2.0.0\n  file_system 0.2.10\n  gettext 0.20.0\n  hackney 1.18.1\n  idna 6.1.1\n  jason 1.4.0\n  libcluster 3.3.1\n  metrics 1.0.1\n  mime 1.6.0\n  mimerl 1.2.0\n  nebulex 2.4.2\n  parse_trans 3.3.1\n  phoenix 1.5.14\n  phoenix_html 2.14.3\n  phoenix_live_reload 1.4.1\n  phoenix_live_view 0.15.7\n  phoenix_pubsub 2.1.1\n  plug 1.14.0\n  plug_cowboy 2.6.0\n  plug_crypto 1.2.3\n  ranch 1.8.0\n  shards 1.1.0\n  ssl_verify_fun 1.1.6\n  stripity_stripe 2.17.2\n  telemetry 0.4.3\n  telemetry_metrics 0.6.1\n  telemetry_poller 0.5.1\n  tesla 1.4.4\n  unicode_util_compat 0.7.0\n  uri_query 0.1.2\n* Getting bamboo (Hex package)\n* Getting bamboo_phoenix (Hex package)\n* Getting castore (Hex package)\n* Getting credo (Hex package)\n* Getting decimal (Hex package)\n* Getting gettext (Hex package)\n* Getting hackney (Hex package)\n* Getting jason (Hex package)\n* Getting libcluster (Hex package)\n* Getting nebulex (Hex package)\n* Getting phoenix_html (Hex package)\n* Getting phoenix_live_reload (Hex package)\n* Getting phoenix_live_view (Hex package)\n* Getting phoenix (Hex package)\n* Getting plug_cowboy (Hex package)\n* Getting shards (Hex package)\n* Getting stripity_stripe (Hex package)\n* Getting telemetry_metrics (Hex package)\n* Getting telemetry_poller (Hex package)\n* Getting tesla (Hex package)\n* Getting mime (Hex package)\n* Getting telemetry (Hex package)\n* Getting uri_query (Hex package)\n* Getting cowboy (Hex package)\n* Getting cowboy_telemetry (Hex package)\n* Getting plug (Hex package)\n* Getting plug_crypto (Hex package)\n* Getting cowlib (Hex package)\n* Getting ranch (Hex package)\n* Getting phoenix_pubsub (Hex package)\n* Getting file_system (Hex package)\n* Getting certifi (Hex package)\n* Getting idna (Hex package)\n* Getting metrics (Hex package)\n* Getting mimerl (Hex package)\n* Getting parse_trans (Hex package)\n* Getting ssl_verify_fun (Hex package)\n* Getting unicode_util_compat (Hex package)\n* Getting bunt (Hex package)\nYou have added/upgraded packages you could sponsor, run `mix hex.sponsor` to learn more\nRemoving intermediate container fc410e5288de\n ---> 4d7ab190ecd8\nStep 8/18 : RUN npm install npm -g --no-progress &&   cd /opt/app/assets &&   npm ci &&   NODE_ENV=production npm run build\n ---> Running in 3b6f342f548e\n\nadded 1 package, and audited 232 packages in 2s\n\n14 packages are looking for funding\n  run `npm fund` for details\n\nfound 0 vulnerabilities\n\nadded 787 packages, and audited 791 packages in 15s\n\n42 packages are looking for funding\n  run `npm fund` for details\n\n1 moderate severity vulnerability\n\nTo address all issues, run:\n  npm audit fix\n\nRun `npm audit` for details.\n\n> @elementary/store@0.1.0 build\n> webpack --mode production\n\n\u001b[91mBrowserslist: caniuse-lite is outdated. Please run:\nnpx browserslist@latest --update-db\n\nWhy you should do it regularly:\nhttps://github.com/browserslist/browserslist#browsers-data-updating\n\u001b[0m\u001b[91mBrowserslist: caniuse-lite is outdated. Please run:\nnpx browserslist@latest --update-db\n\nWhy you should do it regularly:\nhttps://github.com/browserslist/browserslist#browsers-data-updating\n\u001b[0massets by chunk 122 KiB (name: app)\n  asset app.js 107 KiB [emitted] [minimized] (name: app) 1 related asset\n  asset ../styles/app.css 14.7 KiB [emitted] [minimized] (name: app)\nassets by path ../images/*.png 41.1 KiB\n  asset ../images/card.png 27 KiB [emitted] [from: static/images/card.png] [copied]\n  asset ../images/email-logo.png 14.2 KiB [emitted] [from: static/images/email-logo.png] [copied]\nasset ../favicon.png 137 KiB [emitted] [from: static/favicon.png] [copied]\nasset ../.well-known/apple-developer-merchantid-domain-association 8.9 KiB [emitted] [from: static/.well-known/apple-developer-merchantid-domain-association] [copied]\nasset ../elementary.svg 6.67 KiB [emitted] [from: static/elementary.svg] [copied]\nasset ../robots.txt 202 bytes [emitted] [from: static/robots.txt] [copied]\nEntrypoint app 122 KiB = ../styles/app.css 14.7 KiB app.js 107 KiB\nruntime modules 884 bytes 4 modules\norphan modules 1.96 KiB [orphan] 3 modules\nmodules by path ./ 28 KiB (javascript) 15.3 KiB (css/mini-extract)\n  modules by path ./node_modules/lodash/*.js 13.9 KiB 14 modules\n  modules by path ./node_modules/nprogress/ 11.3 KiB (javascript) 1.42 KiB (css/mini-extract)\n    ./node_modules/nprogress/nprogress.js 11.3 KiB [built] [code generated]\n    css ./node_modules/css-loader/dist/cjs.js!./node_modules/nprogress/nprogress.css 1.42 KiB [built] [code generated]\n  ./scripts/app.js + 2 modules 2.83 KiB [built] [code generated]\n  css ./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./styles/app.scss 13.8 KiB [built] [code generated]\nmodules by path ../deps/ 154 KiB\n  ../deps/phoenix_html/priv/static/phoenix_html.js 2.21 KiB [built] [code generated]\n  ../deps/phoenix/priv/static/phoenix.js 39.2 KiB [built] [code generated]\n  ../deps/phoenix_live_view/priv/static/phoenix_live_view.js 113 KiB [built] [code generated]\nwebpack 5.44.0 compiled successfully in 4978 ms\nRemoving intermediate container 3b6f342f548e\n ---> ffa8c4256b84\nStep 9/18 : RUN mix phx.digest\n ---> Running in 7452401a7d72\n==> uri_query\nCompiling 1 file (.ex)\nGenerated uri_query app\n==> decimal\nCompiling 4 files (.ex)\nGenerated decimal app\n==> mime\nCompiling 2 files (.ex)\nGenerated mime app\n===> Analyzing applications...\n===> Compiling unicode_util_compat\n===> Analyzing applications...\n===> Compiling idna\n===> Analyzing applications...\n===> Compiling telemetry\n==> telemetry_metrics\nCompiling 7 files (.ex)\nGenerated telemetry_metrics app\n===> Analyzing applications...\n===> Compiling telemetry_poller\n==> jason\nCompiling 10 files (.ex)\nGenerated jason app\n==> libcluster\nCompiling 13 files (.ex)\nGenerated libcluster app\n==> phoenix_pubsub\nCompiling 11 files (.ex)\nGenerated phoenix_pubsub app\n==> plug_crypto\nCompiling 5 files (.ex)\nGenerated plug_crypto app\n===> Analyzing applications...\n===> Compiling mimerl\n==> gettext\nCompiling 1 file (.yrl)\nCompiling 1 file (.erl)\nCompiling 21 files (.ex)\nGenerated gettext app\n===> Analyzing applications...\n===> Compiling ranch\n==> ssl_verify_fun\nCompiling 7 files (.erl)\nGenerated ssl_verify_fun app\n===> Analyzing applications...\n===> Compiling certifi\n===> Analyzing applications...\n===> Compiling shards\n==> plug\nCompiling 1 file (.erl)\nCompiling 41 files (.ex)\nGenerated plug app\n==> phoenix_html\nCompiling 8 files (.ex)\nGenerated phoenix_html app\n==> nebulex\nCompiling 44 files (.ex)\nGenerated nebulex app\n===> Analyzing applications...\n===> Compiling parse_trans\n===> Analyzing applications...\n===> Compiling metrics\n===> Analyzing applications...\n===> Compiling hackney\n==> bamboo\nCompiling 28 files (.ex)\nGenerated bamboo app\n==> stripity_stripe\nCompiling 92 files (.ex)\nGenerated stripity_stripe app\n==> castore\nCompiling 1 file (.ex)\nGenerated castore app\n==> tesla\nCompiling 29 files (.ex)\n\u001b[91mwarning: use Bitwise is deprecated. import Bitwise instead\n  lib/tesla/middleware/retry.ex:51: Tesla.Middleware.Retry\n\n\u001b[0m\u001b[91mwarning: Application.get_env/3 is discouraged in the module body, use Application.compile_env/3 instead\n  lib/tesla/middleware/telemetry.ex:83: Tesla.Middleware.Telemetry\n\n\u001b[0m\u001b[91mwarning: Application.get_env/3 is discouraged in the module body, use Application.compile_env/3 instead\n  lib/tesla/middleware/logger.ex:154: Tesla.Middleware.Logger\n\n\u001b[0mGenerated tesla app\n===> Analyzing applications...\n===> Compiling cowlib\n===> Analyzing applications...\n===> Compiling cowboy\n===> Analyzing applications...\n===> Compiling cowboy_telemetry\n==> plug_cowboy\nCompiling 5 files (.ex)\nGenerated plug_cowboy app\n==> phoenix\nCompiling 66 files (.ex)\nGenerated phoenix app\n==> bamboo_phoenix\nCompiling 1 file (.ex)\nGenerated bamboo_phoenix app\n==> phoenix_live_view\nCompiling 22 files (.ex)\nGenerated phoenix_live_view app\n==> store\nCheck your digested files at \"priv/static\"\nRemoving intermediate container 7452401a7d72\n ---> ddb2e6bc6c85\nStep 10/18 : RUN mix release\n ---> Running in a05ec372d9b8\n\u001b[91mwarning: the :gettext compiler is no longer required in your mix.exs.\n\nPlease find the following line in your mix.exs and remove the :gettext entry:\n\n    compilers: [..., :gettext, ...] ++ Mix.compilers(),\n\n  (gettext 0.20.0) lib/mix/tasks/compile.gettext.ex:5: Mix.Tasks.Compile.Gettext.run/1\n  (mix 1.14.2) lib/mix/task.ex:421: anonymous fn/3 in Mix.Task.run_task/4\n  (mix 1.14.2) lib/mix/tasks/compile.all.ex:92: Mix.Tasks.Compile.All.run_compiler/2\n  (mix 1.14.2) lib/mix/tasks/compile.all.ex:72: Mix.Tasks.Compile.All.compile/4\n  (mix 1.14.2) lib/mix/tasks/compile.all.ex:59: Mix.Tasks.Compile.All.with_logger_app/2\n  (mix 1.14.2) lib/mix/tasks/compile.all.ex:33: Mix.Tasks.Compile.All.run/1\n\n\u001b[0mCompiling 58 files (.ex)\n\u001b[91mwarning: variable \"product_one_start_price\" is unused (if the variable is not meant to be used, prefix it with an underscore)\n  lib/store/catalog/product.ex:47: Elementary.Store.Catalog.Product.compare/2\n\n\u001b[0m\u001b[91mwarning: variable \"product_two_start_price\" is unused (if the variable is not meant to be used, prefix it with an underscore)\n  lib/store/catalog/product.ex:48: Elementary.Store.Catalog.Product.compare/2\n\n\u001b[0m\u001b[91mwarning: Application.get_env/2 is discouraged in the module body, use Application.compile_env/3 instead\n  lib/store_web/endpoint.ex:22: Elementary.StoreWeb.Endpoint\n\n\u001b[0m\u001b[91mwarning: unused alias Shipping\n  lib/store/fulfillment/fulfillment.ex:7\n\n\u001b[0m\u001b[91mwarning: variable \"category\" is unused (if the variable is not meant to be used, prefix it with an underscore)\n  lib/store_web/templates/index/index.html.leex:55: Elementary.StoreWeb.IndexView.\"index.html\"/1\n\n\u001b[0m\u001b[91mwarning: unused alias PubSub\n  lib/store_web/live/checkout_live.ex:8\n\nwarning: unused alias StorePubSub\n  lib/store_web/live/checkout_live.ex:6\n\n\u001b[0m\u001b[91mwarning: unused alias Checkout\n  lib/store_web/views/checkout_view.ex:5\n\n\u001b[0m\u001b[91mwarning: Printful.Api.put/2 is undefined or private\n  lib/printful/order.ex:27: Printful.Order.update/2\n\n\u001b[0mGenerated store app\n* assembling store-0.1.0 on MIX_ENV=prod\n\u001b[91mwarning: config/releases.exs is deprecated, use config/runtime.exs or set :runtime_config_path in your release configuration instead\n  (mix 1.14.2) lib/mix/tasks/release.ex:1244: Mix.Tasks.Release.maybe_add_config_reader_provider/3\n  (mix 1.14.2) lib/mix/tasks/release.ex:1187: Mix.Tasks.Release.build_rel/2\n  (mix 1.14.2) lib/mix/tasks/release.ex:1108: Mix.Tasks.Release.assemble/1\n  (mix 1.14.2) lib/mix/tasks/release.ex:1084: Mix.Tasks.Release.run_steps/1\n  (mix 1.14.2) lib/mix/task.ex:421: anonymous fn/3 in Mix.Task.run_task/4\n  (mix 1.14.2) lib/mix/cli.ex:84: Mix.CLI.run_task/2\n\n\u001b[0m* using config/releases.exs to configure the release at runtime\n* skipping elixir.bat for windows (bin/elixir.bat not found in the Elixir installation)\n* skipping iex.bat for windows (bin/iex.bat not found in the Elixir installation)\n\nRelease created at _build/prod/rel/store\n\n    # To start your system\n    _build/prod/rel/store/bin/store start\n\nOnce the release is running:\n\n    # To connect to it remotely\n    _build/prod/rel/store/bin/store remote\n\n    # To stop it gracefully (you may also send SIGINT/SIGTERM)\n    _build/prod/rel/store/bin/store stop\n\nTo list all commands:\n\n    _build/prod/rel/store/bin/store\n\nRemoving intermediate container a05ec372d9b8\n ---> 986369101b70\nStep 11/18 : FROM elixir:1.14.2-alpine as release\n ---> f21569246959\nStep 12/18 : RUN apk add --no-cache bash openssl\n ---> Running in b9863dd06c8c\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/community/x86_64/APKINDEX.tar.gz\n(1/2) Installing bash (5.1.16-r2)\nExecuting bash-5.1.16-r2.post-install\n(2/2) Installing openssl (1.1.1s-r0)\nExecuting busybox-1.35.0-r17.trigger\nOK: 12 MiB in 26 packages\nRemoving intermediate container b9863dd06c8c\n ---> 0f0574a48efe\nStep 13/18 : RUN mkdir -p /opt/app\n ---> Running in 8c9d9d55b250\nRemoving intermediate container 8c9d9d55b250\n ---> e40ddde96f0c\nStep 14/18 : COPY --from=build /opt/app/_build/prod/rel/store /opt/app\n ---> f33527a65a96\nStep 15/18 : WORKDIR /opt/app\n ---> Running in d7a5f5fc54de\nRemoving intermediate container d7a5f5fc54de\n ---> 631dc1625067\nStep 16/18 : EXPOSE 4000\n ---> Running in 0ad1c96f6b8a\nRemoving intermediate container 0ad1c96f6b8a\n ---> 2c26a928277c\nStep 17/18 : ENTRYPOINT [\"/opt/app/bin/store\"]\n ---> Running in f3e6a3f38e76\nRemoving intermediate container f3e6a3f38e76\n ---> c80a0dae3e43\nStep 18/18 : CMD [\"start\"]\n ---> Running in c5489c5946fc\nRemoving intermediate container c5489c5946fc\n ---> df797a331be2\nSuccessfully built df797a331be2\nSuccessfully tagged store:latest\n","stderr":"","imageSize":104776290},"repair":{"violations":[{"name":"npmCacheCleanAfterInstall","position":{"start":27,"end":27,"columnStart":4,"columnEnd":36}}],"repairedDockerfile":"# Dockerfile\n# Building for production\n\nFROM elixir:1.14.2-alpine as build\n\nRUN mkdir -p /opt/app\n\nCOPY . /opt/app\nWORKDIR /opt/app\n\nENV MIX_ENV=prod\n\nRUN apk --no-cache --update add \\\n  g++ \\\n  gcc \\\n  git \\\n  libc-dev \\\n  make \\\n  nodejs \\\n  npm \\\n  python3\n\nRUN cd /opt/app && \\\n  mix local.hex --force && \\\n  mix local.rebar --force && \\\n  mix deps.get\n\nRUN npm install npm -g --no-progress && \\\n  cd /opt/app/assets && \\\n  npm ci && \\\n  NODE_ENV=production npm run build\n\nRUN mix phx.digest\nRUN mix release\n\n# Dockerfile\n# Runing in production\n\nFROM elixir:1.14.2-alpine as release\n\nRUN apk add --no-cache bash openssl\n\nRUN mkdir -p /opt/app\n\nCOPY --from=build /opt/app/_build/prod/rel/store /opt/app\n\nWORKDIR /opt/app\n\nEXPOSE 4000\n\nENTRYPOINT [\"/opt/app/bin/store\"]\nCMD [\"start\"]\n"},"repairedBuild":{"startTimestamp":1672055109489,"endTimestamp":1672055341473,"error":null,"stdout":"Sending build context to Docker daemon  2.679MB\r\r\nStep 1/18 : FROM elixir:1.14.2-alpine as build\n ---> f21569246959\nStep 2/18 : RUN mkdir -p /opt/app\n ---> Running in 19b44f865159\nRemoving intermediate container 19b44f865159\n ---> e75c3b736270\nStep 3/18 : COPY . /opt/app\n ---> f8ccea01d913\nStep 4/18 : WORKDIR /opt/app\n ---> Running in 351cddfd6eca\nRemoving intermediate container 351cddfd6eca\n ---> b156bb7dff26\nStep 5/18 : ENV MIX_ENV=prod\n ---> Running in fcb4bc46660d\nRemoving intermediate container fcb4bc46660d\n ---> fcc9ccf02faf\nStep 6/18 : RUN apk --no-cache --update add   g++   gcc   git   libc-dev   make   nodejs   npm   python3\n ---> Running in c3f98d551256\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/community/x86_64/APKINDEX.tar.gz\n(1/30) Installing binutils (2.38-r3)\n(2/30) Installing libgomp (11.2.1_git20220219-r2)\n(3/30) Installing libatomic (11.2.1_git20220219-r2)\n(4/30) Installing gmp (6.2.1-r2)\n(5/30) Installing isl22 (0.22-r0)\n(6/30) Installing mpfr4 (4.1.0-r0)\n(7/30) Installing mpc1 (1.2.1-r0)\n(8/30) Installing gcc (11.2.1_git20220219-r2)\n(9/30) Installing musl-dev (1.2.3-r2)\n(10/30) Installing libc-dev (0.7.2-r3)\n(11/30) Installing g++ (11.2.1_git20220219-r2)\n(12/30) Installing brotli-libs (1.0.9-r6)\n(13/30) Installing nghttp2-libs (1.47.0-r0)\n(14/30) Installing libcurl (7.83.1-r5)\n(15/30) Installing expat (2.5.0-r0)\n(16/30) Installing pcre2 (10.40-r0)\n(17/30) Installing git (2.36.3-r0)\n(18/30) Installing make (4.3-r0)\n(19/30) Installing c-ares (1.18.1-r0)\n(20/30) Installing icu-data-en (71.1-r2)\nExecuting icu-data-en-71.1-r2.post-install\n\u001b[91m*\n* If you need ICU with non-English locales and legacy charset support, install\n* package icu-data-full.\n*\n\u001b[0m(21/30) Installing icu-libs (71.1-r2)\n(22/30) Installing nodejs (16.17.1-r0)\n(23/30) Installing npm (8.10.0-r0)\n(24/30) Installing libbz2 (1.0.8-r1)\n(25/30) Installing libffi (3.4.2-r1)\n(26/30) Installing gdbm (1.23-r0)\n(27/30) Installing xz-libs (5.2.5-r1)\n(28/30) Installing mpdecimal (2.5.1-r1)\n(29/30) Installing sqlite-libs (3.38.5-r0)\n(30/30) Installing python3 (3.10.9-r0)\nExecuting busybox-1.35.0-r17.trigger\nOK: 294 MiB in 54 packages\nRemoving intermediate container c3f98d551256\n ---> 31710906c5af\nStep 7/18 : RUN cd /opt/app &&   mix local.hex --force &&   mix local.rebar --force &&   mix deps.get\n ---> Running in 80fe999e0139\n* creating /root/.mix/archives/hex-2.0.0\n* creating /root/.mix/elixir/1-14/rebar3\nResolving Hex dependencies...\nResolution completed in 0.148s\nUnchanged:\n  bamboo 2.2.0\n  bamboo_phoenix 1.0.0\n  bunt 0.2.1\n  castore 0.1.19\n  certifi 2.9.0\n  cowboy 2.9.0\n  cowboy_telemetry 0.3.1\n  cowlib 2.11.0\n  credo 1.6.7\n  decimal 2.0.0\n  file_system 0.2.10\n  gettext 0.20.0\n  hackney 1.18.1\n  idna 6.1.1\n  jason 1.4.0\n  libcluster 3.3.1\n  metrics 1.0.1\n  mime 1.6.0\n  mimerl 1.2.0\n  nebulex 2.4.2\n  parse_trans 3.3.1\n  phoenix 1.5.14\n  phoenix_html 2.14.3\n  phoenix_live_reload 1.4.1\n  phoenix_live_view 0.15.7\n  phoenix_pubsub 2.1.1\n  plug 1.14.0\n  plug_cowboy 2.6.0\n  plug_crypto 1.2.3\n  ranch 1.8.0\n  shards 1.1.0\n  ssl_verify_fun 1.1.6\n  stripity_stripe 2.17.2\n  telemetry 0.4.3\n  telemetry_metrics 0.6.1\n  telemetry_poller 0.5.1\n  tesla 1.4.4\n  unicode_util_compat 0.7.0\n  uri_query 0.1.2\n* Getting bamboo (Hex package)\n* Getting bamboo_phoenix (Hex package)\n* Getting castore (Hex package)\n* Getting credo (Hex package)\n* Getting decimal (Hex package)\n* Getting gettext (Hex package)\n* Getting hackney (Hex package)\n* Getting jason (Hex package)\n* Getting libcluster (Hex package)\n* Getting nebulex (Hex package)\n* Getting phoenix_html (Hex package)\n* Getting phoenix_live_reload (Hex package)\n* Getting phoenix_live_view (Hex package)\n* Getting phoenix (Hex package)\n* Getting plug_cowboy (Hex package)\n* Getting shards (Hex package)\n* Getting stripity_stripe (Hex package)\n* Getting telemetry_metrics (Hex package)\n* Getting telemetry_poller (Hex package)\n* Getting tesla (Hex package)\n* Getting mime (Hex package)\n* Getting telemetry (Hex package)\n* Getting uri_query (Hex package)\n* Getting cowboy (Hex package)\n* Getting cowboy_telemetry (Hex package)\n* Getting plug (Hex package)\n* Getting plug_crypto (Hex package)\n* Getting cowlib (Hex package)\n* Getting ranch (Hex package)\n* Getting phoenix_pubsub (Hex package)\n* Getting file_system (Hex package)\n* Getting certifi (Hex package)\n* Getting idna (Hex package)\n* Getting metrics (Hex package)\n* Getting mimerl (Hex package)\n* Getting parse_trans (Hex package)\n* Getting ssl_verify_fun (Hex package)\n* Getting unicode_util_compat (Hex package)\n* Getting bunt (Hex package)\nYou have added/upgraded packages you could sponsor, run `mix hex.sponsor` to learn more\nRemoving intermediate container 80fe999e0139\n ---> 5de81063692c\nStep 8/18 : RUN npm install npm -g --no-progress &&   cd /opt/app/assets &&   npm ci &&   NODE_ENV=production npm run build\n ---> Running in 2f59bd8941dd\n\nadded 1 package, and audited 232 packages in 2s\n\n14 packages are looking for funding\n  run `npm fund` for details\n\nfound 0 vulnerabilities\n\nadded 787 packages, and audited 791 packages in 14s\n\n42 packages are looking for funding\n  run `npm fund` for details\n\n1 moderate severity vulnerability\n\nTo address all issues, run:\n  npm audit fix\n\nRun `npm audit` for details.\n\n> @elementary/store@0.1.0 build\n> webpack --mode production\n\n\u001b[91mBrowserslist: caniuse-lite is outdated. Please run:\nnpx browserslist@latest --update-db\n\nWhy you should do it regularly:\nhttps://github.com/browserslist/browserslist#browsers-data-updating\n\u001b[0m\u001b[91mBrowserslist: caniuse-lite is outdated. Please run:\nnpx browserslist@latest --update-db\n\nWhy you should do it regularly:\nhttps://github.com/browserslist/browserslist#browsers-data-updating\n\u001b[0massets by chunk 122 KiB (name: app)\n  asset app.js 107 KiB [emitted] [minimized] (name: app) 1 related asset\n  asset ../styles/app.css 14.7 KiB [emitted] [minimized] (name: app)\nassets by path ../images/*.png 41.1 KiB\n  asset ../images/card.png 27 KiB [emitted] [from: static/images/card.png] [copied]\n  asset ../images/email-logo.png 14.2 KiB [emitted] [from: static/images/email-logo.png] [copied]\nasset ../favicon.png 137 KiB [emitted] [from: static/favicon.png] [copied]\nasset ../.well-known/apple-developer-merchantid-domain-association 8.9 KiB [emitted] [from: static/.well-known/apple-developer-merchantid-domain-association] [copied]\nasset ../elementary.svg 6.67 KiB [emitted] [from: static/elementary.svg] [copied]\nasset ../robots.txt 202 bytes [emitted] [from: static/robots.txt] [copied]\nEntrypoint app 122 KiB = ../styles/app.css 14.7 KiB app.js 107 KiB\nruntime modules 884 bytes 4 modules\norphan modules 1.96 KiB [orphan] 3 modules\nmodules by path ./ 28 KiB (javascript) 15.3 KiB (css/mini-extract)\n  modules by path ./node_modules/lodash/*.js 13.9 KiB 14 modules\n  modules by path ./node_modules/nprogress/ 11.3 KiB (javascript) 1.42 KiB (css/mini-extract)\n    ./node_modules/nprogress/nprogress.js 11.3 KiB [built] [code generated]\n    css ./node_modules/css-loader/dist/cjs.js!./node_modules/nprogress/nprogress.css 1.42 KiB [built] [code generated]\n  ./scripts/app.js + 2 modules 2.83 KiB [built] [code generated]\n  css ./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./styles/app.scss 13.8 KiB [built] [code generated]\nmodules by path ../deps/ 154 KiB\n  ../deps/phoenix_html/priv/static/phoenix_html.js 2.21 KiB [built] [code generated]\n  ../deps/phoenix/priv/static/phoenix.js 39.2 KiB [built] [code generated]\n  ../deps/phoenix_live_view/priv/static/phoenix_live_view.js 113 KiB [built] [code generated]\nwebpack 5.44.0 compiled successfully in 4984 ms\nRemoving intermediate container 2f59bd8941dd\n ---> 7014173db9ef\nStep 9/18 : RUN mix phx.digest\n ---> Running in 193051571f45\n==> uri_query\nCompiling 1 file (.ex)\nGenerated uri_query app\n==> decimal\nCompiling 4 files (.ex)\nGenerated decimal app\n==> mime\nCompiling 2 files (.ex)\nGenerated mime app\n===> Analyzing applications...\n===> Compiling unicode_util_compat\n===> Analyzing applications...\n===> Compiling idna\n===> Analyzing applications...\n===> Compiling telemetry\n==> telemetry_metrics\nCompiling 7 files (.ex)\nGenerated telemetry_metrics app\n===> Analyzing applications...\n===> Compiling telemetry_poller\n==> jason\nCompiling 10 files (.ex)\nGenerated jason app\n==> libcluster\nCompiling 13 files (.ex)\nGenerated libcluster app\n==> phoenix_pubsub\nCompiling 11 files (.ex)\nGenerated phoenix_pubsub app\n==> plug_crypto\nCompiling 5 files (.ex)\nGenerated plug_crypto app\n===> Analyzing applications...\n===> Compiling mimerl\n==> gettext\nCompiling 1 file (.yrl)\nCompiling 1 file (.erl)\nCompiling 21 files (.ex)\nGenerated gettext app\n===> Analyzing applications...\n===> Compiling ranch\n==> ssl_verify_fun\nCompiling 7 files (.erl)\nGenerated ssl_verify_fun app\n===> Analyzing applications...\n===> Compiling certifi\n===> Analyzing applications...\n===> Compiling shards\n==> plug\nCompiling 1 file (.erl)\nCompiling 41 files (.ex)\nGenerated plug app\n==> phoenix_html\nCompiling 8 files (.ex)\nGenerated phoenix_html app\n==> nebulex\nCompiling 44 files (.ex)\nGenerated nebulex app\n===> Analyzing applications...\n===> Compiling parse_trans\n===> Analyzing applications...\n===> Compiling metrics\n===> Analyzing applications...\n===> Compiling hackney\n==> bamboo\nCompiling 28 files (.ex)\nGenerated bamboo app\n==> stripity_stripe\nCompiling 92 files (.ex)\nGenerated stripity_stripe app\n==> castore\nCompiling 1 file (.ex)\nGenerated castore app\n==> tesla\nCompiling 29 files (.ex)\n\u001b[91mwarning: use Bitwise is deprecated. import Bitwise instead\n  lib/tesla/middleware/retry.ex:51: Tesla.Middleware.Retry\n\n\u001b[0m\u001b[91mwarning: Application.get_env/3 is discouraged in the module body, use Application.compile_env/3 instead\n  lib/tesla/middleware/telemetry.ex:83: Tesla.Middleware.Telemetry\n\n\u001b[0m\u001b[91mwarning: Application.get_env/3 is discouraged in the module body, use Application.compile_env/3 instead\n  lib/tesla/middleware/logger.ex:154: Tesla.Middleware.Logger\n\n\u001b[0mGenerated tesla app\n===> Analyzing applications...\n===> Compiling cowlib\n===> Analyzing applications...\n===> Compiling cowboy\n===> Analyzing applications...\n===> Compiling cowboy_telemetry\n==> plug_cowboy\nCompiling 5 files (.ex)\nGenerated plug_cowboy app\n==> phoenix\nCompiling 66 files (.ex)\nGenerated phoenix app\n==> bamboo_phoenix\nCompiling 1 file (.ex)\nGenerated bamboo_phoenix app\n==> phoenix_live_view\nCompiling 22 files (.ex)\nGenerated phoenix_live_view app\n==> store\nCheck your digested files at \"priv/static\"\nRemoving intermediate container 193051571f45\n ---> 05f99175c2e5\nStep 10/18 : RUN mix release\n ---> Running in 22b15480504e\n\u001b[91mwarning: the :gettext compiler is no longer required in your mix.exs.\n\nPlease find the following line in your mix.exs and remove the :gettext entry:\n\n    compilers: [..., :gettext, ...] ++ Mix.compilers(),\n\n  (gettext 0.20.0) lib/mix/tasks/compile.gettext.ex:5: Mix.Tasks.Compile.Gettext.run/1\n  (mix 1.14.2) lib/mix/task.ex:421: anonymous fn/3 in Mix.Task.run_task/4\n  (mix 1.14.2) lib/mix/tasks/compile.all.ex:92: Mix.Tasks.Compile.All.run_compiler/2\n  (mix 1.14.2) lib/mix/tasks/compile.all.ex:72: Mix.Tasks.Compile.All.compile/4\n  (mix 1.14.2) lib/mix/tasks/compile.all.ex:59: Mix.Tasks.Compile.All.with_logger_app/2\n  (mix 1.14.2) lib/mix/tasks/compile.all.ex:33: Mix.Tasks.Compile.All.run/1\n\n\u001b[0mCompiling 58 files (.ex)\n\u001b[91mwarning: variable \"product_one_start_price\" is unused (if the variable is not meant to be used, prefix it with an underscore)\n  lib/store/catalog/product.ex:47: Elementary.Store.Catalog.Product.compare/2\n\n\u001b[0m\u001b[91mwarning: variable \"product_two_start_price\" is unused (if the variable is not meant to be used, prefix it with an underscore)\n  lib/store/catalog/product.ex:48: Elementary.Store.Catalog.Product.compare/2\n\n\u001b[0m\u001b[91mwarning: Application.get_env/2 is discouraged in the module body, use Application.compile_env/3 instead\n  lib/store_web/endpoint.ex:22: Elementary.StoreWeb.Endpoint\n\n\u001b[0m\u001b[91mwarning: unused alias Shipping\n  lib/store/fulfillment/fulfillment.ex:7\n\n\u001b[0m\u001b[91mwarning: variable \"category\" is unused (if the variable is not meant to be used, prefix it with an underscore)\n  lib/store_web/templates/index/index.html.leex:55: Elementary.StoreWeb.IndexView.\"index.html\"/1\n\n\u001b[0m\u001b[91mwarning: unused alias PubSub\n  lib/store_web/live/checkout_live.ex:8\n\nwarning: unused alias StorePubSub\n  lib/store_web/live/checkout_live.ex:6\n\n\u001b[0m\u001b[91mwarning: unused alias Checkout\n  lib/store_web/views/checkout_view.ex:5\n\n\u001b[0m\u001b[91mwarning: Printful.Api.put/2 is undefined or private\n  lib/printful/order.ex:27: Printful.Order.update/2\n\n\u001b[0mGenerated store app\n* assembling store-0.1.0 on MIX_ENV=prod\n\u001b[91mwarning: config/releases.exs is deprecated, use config/runtime.exs or set :runtime_config_path in your release configuration instead\n  (mix 1.14.2) lib/mix/tasks/release.ex:1244: Mix.Tasks.Release.maybe_add_config_reader_provider/3\n  (mix 1.14.2) lib/mix/tasks/release.ex:1187: Mix.Tasks.Release.build_rel/2\n  (mix 1.14.2) lib/mix/tasks/release.ex:1108: Mix.Tasks.Release.assemble/1\n  (mix 1.14.2) lib/mix/tasks/release.ex:1084: Mix.Tasks.Release.run_steps/1\n  (mix 1.14.2) lib/mix/task.ex:421: anonymous fn/3 in Mix.Task.run_task/4\n  (mix 1.14.2) lib/mix/cli.ex:84: Mix.CLI.run_task/2\n\n\u001b[0m* using config/releases.exs to configure the release at runtime\n* skipping elixir.bat for windows (bin/elixir.bat not found in the Elixir installation)\n* skipping iex.bat for windows (bin/iex.bat not found in the Elixir installation)\n\nRelease created at _build/prod/rel/store\n\n    # To start your system\n    _build/prod/rel/store/bin/store start\n\nOnce the release is running:\n\n    # To connect to it remotely\n    _build/prod/rel/store/bin/store remote\n\n    # To stop it gracefully (you may also send SIGINT/SIGTERM)\n    _build/prod/rel/store/bin/store stop\n\nTo list all commands:\n\n    _build/prod/rel/store/bin/store\n\nRemoving intermediate container 22b15480504e\n ---> ad1601f70c37\nStep 11/18 : FROM elixir:1.14.2-alpine as release\n ---> f21569246959\nStep 12/18 : RUN apk add --no-cache bash openssl\n ---> Running in 3ba1cc169d93\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/community/x86_64/APKINDEX.tar.gz\n(1/2) Installing bash (5.1.16-r2)\nExecuting bash-5.1.16-r2.post-install\n(2/2) Installing openssl (1.1.1s-r0)\nExecuting busybox-1.35.0-r17.trigger\nOK: 12 MiB in 26 packages\nRemoving intermediate container 3ba1cc169d93\n ---> da0234def33a\nStep 13/18 : RUN mkdir -p /opt/app\n ---> Running in 7c03e6e3cd3a\nRemoving intermediate container 7c03e6e3cd3a\n ---> 5db2ee53a3e5\nStep 14/18 : COPY --from=build /opt/app/_build/prod/rel/store /opt/app\n ---> 9a29b842061d\nStep 15/18 : WORKDIR /opt/app\n ---> Running in 8b9f470d1f32\nRemoving intermediate container 8b9f470d1f32\n ---> daf0f4f7b46d\nStep 16/18 : EXPOSE 4000\n ---> Running in 400c23625eae\nRemoving intermediate container 400c23625eae\n ---> 59d03d1abaf5\nStep 17/18 : ENTRYPOINT [\"/opt/app/bin/store\"]\n ---> Running in 6fb59533e214\nRemoving intermediate container 6fb59533e214\n ---> 1f167812e3aa\nStep 18/18 : CMD [\"start\"]\n ---> Running in d6f697ac91d0\nRemoving intermediate container d6f697ac91d0\n ---> 45fed0644b5b\nSuccessfully built 45fed0644b5b\nSuccessfully tagged store:latest\n","stderr":"","imageSize":104776294},"endTime":1672055341772}