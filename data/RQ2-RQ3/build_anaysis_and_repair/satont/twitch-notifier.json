{"repository":"https://github.com/satont/twitch-notifier","dockerfilePath":"Dockerfile","startTime":1672754556264,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/satont/twitch-notifier'...\n","error":null,"commit":"d49e7f118c19d16c85829b1d23589630c6fc9955"},"originalBuild":{"startTimestamp":1672754557562,"endTimestamp":1672754607162,"error":null,"stdout":"Sending build context to Docker daemon  16.05MB\r\r\nStep 1/12 : FROM node:16-alpine\n ---> 610c0494e820\nStep 2/12 : RUN apk add --no-cache bash\n ---> Running in 5ba5abd0004c\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/4) Installing ncurses-terminfo-base (6.3_p20221119-r0)\n(2/4) Installing ncurses-libs (6.3_p20221119-r0)\n(3/4) Installing readline (8.2.0-r0)\n(4/4) Installing bash (5.2.15-r0)\nExecuting bash-5.2.15-r0.post-install\nExecuting busybox-1.35.0-r29.trigger\nOK: 12 MiB in 21 packages\nRemoving intermediate container 5ba5abd0004c\n ---> b09c79c5ea60\nStep 3/12 : EXPOSE 3000\n ---> Running in dce155af4e7b\nRemoving intermediate container dce155af4e7b\n ---> ddba8ca05e45\nStep 4/12 : EXPOSE 9229\n ---> Running in 8e4533be33a9\nRemoving intermediate container 8e4533be33a9\n ---> 51e56a23df49\nStep 5/12 : WORKDIR /app\n ---> Running in 1aec4fbab288\nRemoving intermediate container 1aec4fbab288\n ---> f123c0f91741\nStep 6/12 : COPY package.json pnpm-lock.yaml ./\n ---> 6759915de229\nStep 7/12 : RUN npm i -g pnpm && pnpm install\n ---> Running in 200a206da5b5\n\nadded 1 package, and audited 2 packages in 1s\n\n1 package is looking for funding\n  run `npm fund` for details\n\nfound 0 vulnerabilities\n\u001b[91mnpm\u001b[0m\u001b[91m notice \nnpm\u001b[0m\u001b[91m notice New major version of npm available! 8.19.3 -> 9.2.0\n\u001b[0m\u001b[91mnpm notice\u001b[0m\u001b[91m Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm notice Run `npm install -g npm@9.2.0` to update!\nnpm notice \n\u001b[0mProgress: resolved 1, reused 0, downloaded 0, added 0\nProgress: resolved 31, reused 0, downloaded 27, added 0\nProgress: resolved 39, reused 0, downloaded 37, added 0\nProgress: resolved 101, reused 0, downloaded 95, added 0\nProgress: resolved 148, reused 0, downloaded 146, added 0\nProgress: resolved 305, reused 0, downloaded 294, added 0\nProgress: resolved 453, reused 0, downloaded 443, added 0\nProgress: resolved 589, reused 0, downloaded 579, added 0\nProgress: resolved 635, reused 0, downloaded 633, added 0\nProgress: resolved 675, reused 0, downloaded 673, added 0\nPackages: +675\n++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++\nPackages are hard linked from the content-addressable store to the virtual store.\n  Content-addressable store is at: /root/.local/share/pnpm/store/v3\n  Virtual store is at:             node_modules/.pnpm\nProgress: resolved 675, reused 0, downloaded 674, added 675, done\n.../node_modules/@nestjs/core postinstall$ opencollective || exit 0\n.../nodemon@2.0.15/node_modules/nodemon postinstall$ node bin/postinstall || exit 0\n.../nodemon@2.0.15/node_modules/nodemon postinstall: Love nodemon? You can now support the project via the open collective:\n.../nodemon@2.0.15/node_modules/nodemon postinstall:  > https://opencollective.com/nodemon/donate\n.../node_modules/@nestjs/core postinstall:                            Thanks for installing nest \n.../node_modules/@nestjs/core postinstall:                  Please consider donating to our open collective\n.../node_modules/@nestjs/core postinstall:                         to help us maintain this package.\n.../node_modules/@nestjs/core postinstall:                                          \n.../node_modules/@nestjs/core postinstall:                             Number of contributors: 0\n.../node_modules/@nestjs/core postinstall:                               Number of backers: 878\n.../nodemon@2.0.15/node_modules/nodemon postinstall: Done\n.../node_modules/@nestjs/core postinstall:                              Annual budget: $183,492\n.../node_modules/@nestjs/core postinstall:                              Current balance: $21,080\n.../node_modules/@nestjs/core postinstall:                                          \n.../node_modules/@nestjs/core postinstall:              Become a partner: https://opencollective.com/nest/donate\n.../node_modules/@nestjs/core postinstall:                                          \n.../node_modules/@nestjs/core postinstall: Done\n\ndependencies:\n+ @grammyjs/menu 1.0.4\n+ @grammyjs/stateless-question 3.0.1\n+ @nestjs/common 7.6.18\n+ @nestjs/core 7.6.18\n+ @nestjs/platform-express 7.6.18\n+ @nestjs/schematics 7.3.1\n+ @sentry/node 5.30.0\n+ @twurple/api 5.0.13\n+ @twurple/auth 5.0.13\n+ @twurple/eventsub 5.0.13\n+ axios 0.21.4\n+ class-transformer 0.3.1\n+ class-validator 0.12.2\n+ dayjs 1.10.7\n+ dotenv 8.6.0\n+ glob 7.2.0\n+ grammy 1.7.0\n+ hbs 4.2.0\n+ lodash 4.17.21\n+ nestjs-pino 1.4.0\n+ pg 8.7.1\n+ pino-pretty 4.8.0\n+ reflect-metadata 0.1.13\n+ rotating-file-stream 2.1.6\n+ source-map-support 0.5.21\n+ strip-ansi 6.0.1\n+ typeorm 0.2.41\n\ndevDependencies:\n+ @nestjs/cli 7.6.0\n+ @types/express 4.17.13\n+ @types/glob 7.2.0\n+ @types/hbs 4.0.1\n+ @types/localtunnel 2.0.1\n+ @types/lodash 4.14.178\n+ @types/node 14.18.5\n+ @types/source-map-support 0.5.4\n+ @typescript-eslint/eslint-plugin 4.33.0\n+ @typescript-eslint/parser 4.33.0\n+ eslint 7.32.0\n+ nodemon 2.0.15\n+ rimraf 3.0.2\n+ ts-node 9.1.1\n+ typescript 4.5.4\n\n WARN  Issues with peer dependencies found\n.\n├─┬ @nestjs/common 7.6.18\n│ └── ✕ missing peer rxjs@^6.0.0\n└─┬ @nestjs/core 7.6.18\n  └── ✕ missing peer rxjs@^6.0.0\nPeer dependencies that should be installed:\n  rxjs@\">=6.0.0 <7.0.0\"\n\nDone in 11.7s\nRemoving intermediate container 200a206da5b5\n ---> 9588549f60b1\nStep 8/12 : COPY . /app\n ---> d5def77dc02f\nStep 9/12 : RUN pnpm run build\n ---> Running in a6d70d06566f\n\n> twitch-notifier@4.1.0 prebuild /app\n> rimraf dist\n\n\n> twitch-notifier@4.1.0 build /app\n> tsc\n\nRemoving intermediate container a6d70d06566f\n ---> 0e929fe08867\nStep 10/12 : COPY docker.sh /\n ---> 5cb3dd7c6915\nStep 11/12 : RUN chmod +x /docker.sh\n ---> Running in 0a4a3bb4a4fb\nRemoving intermediate container 0a4a3bb4a4fb\n ---> bc8c0c10768f\nStep 12/12 : ENTRYPOINT [\"/docker.sh\"]\n ---> Running in 0135927f0608\nRemoving intermediate container 0135927f0608\n ---> 660d12517d33\nSuccessfully built 660d12517d33\nSuccessfully tagged twitch-notifier:latest\n","stderr":"","imageSize":378594712},"repair":{"violations":[{"name":"npmCacheCleanAfterInstall","position":{"start":11,"end":11,"columnStart":4,"columnEnd":17}}],"repairedDockerfile":"FROM node:16-alpine\n\nRUN apk add --no-cache bash\n\n\nEXPOSE 3000\nEXPOSE 9229\n\nWORKDIR /app\n\nCOPY package.json pnpm-lock.yaml ./\nRUN npm i -g pnpm && pnpm install\n\nCOPY . /app\nRUN pnpm run build\n\nCOPY docker.sh /\nRUN chmod +x /docker.sh\nENTRYPOINT [\"/docker.sh\"]"},"repairedBuild":{"startTimestamp":1672754607988,"endTimestamp":1672754654031,"error":null,"stdout":"Sending build context to Docker daemon  16.05MB\r\r\nStep 1/12 : FROM node:16-alpine\n ---> 610c0494e820\nStep 2/12 : RUN apk add --no-cache bash\n ---> Running in 7566ce695568\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/4) Installing ncurses-terminfo-base (6.3_p20221119-r0)\n(2/4) Installing ncurses-libs (6.3_p20221119-r0)\n(3/4) Installing readline (8.2.0-r0)\n(4/4) Installing bash (5.2.15-r0)\nExecuting bash-5.2.15-r0.post-install\nExecuting busybox-1.35.0-r29.trigger\nOK: 12 MiB in 21 packages\nRemoving intermediate container 7566ce695568\n ---> ff14d34a9078\nStep 3/12 : EXPOSE 3000\n ---> Running in 2a18e87a0a6f\nRemoving intermediate container 2a18e87a0a6f\n ---> 9ba5420adb38\nStep 4/12 : EXPOSE 9229\n ---> Running in cc264a9ed1fd\nRemoving intermediate container cc264a9ed1fd\n ---> e732edf6c6bb\nStep 5/12 : WORKDIR /app\n ---> Running in 1c11c77b1daf\nRemoving intermediate container 1c11c77b1daf\n ---> c8344f825915\nStep 6/12 : COPY package.json pnpm-lock.yaml ./\n ---> abb87d2e233b\nStep 7/12 : RUN npm i -g pnpm && pnpm install\n ---> Running in 05eef32f259c\n\nadded 1 package, and audited 2 packages in 1s\n\n1 package is looking for funding\n  run `npm fund` for details\n\nfound 0 vulnerabilities\n\u001b[91mnpm\u001b[0m\u001b[91m \u001b[0m\u001b[91mnotice\u001b[0m\u001b[91m \n\u001b[0m\u001b[91mnpm\u001b[0m\u001b[91m notice\u001b[0m\u001b[91m New major version of npm available! 8.19.3 -> 9.2.0\nnpm notice\u001b[0m\u001b[91m Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm notice Run `npm install -g npm@9.2.0` to update!\nnpm \u001b[0m\u001b[91mnotice \n\u001b[0mProgress: resolved 1, reused 0, downloaded 0, added 0\nProgress: resolved 34, reused 0, downloaded 25, added 0\nProgress: resolved 52, reused 0, downloaded 45, added 0\nProgress: resolved 150, reused 0, downloaded 139, added 0\nProgress: resolved 292, reused 0, downloaded 281, added 0\nProgress: resolved 429, reused 0, downloaded 417, added 0\nProgress: resolved 548, reused 0, downloaded 534, added 0\nProgress: resolved 663, reused 0, downloaded 650, added 0\nPackages: +675\n++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++\nPackages are hard linked from the content-addressable store to the virtual store.\n  Content-addressable store is at: /root/.local/share/pnpm/store/v3\n  Virtual store is at:             node_modules/.pnpm\nProgress: resolved 675, reused 0, downloaded 671, added 145\nProgress: resolved 675, reused 0, downloaded 672, added 673\n.../node_modules/@nestjs/core postinstall$ opencollective || exit 0\n.../nodemon@2.0.15/node_modules/nodemon postinstall$ node bin/postinstall || exit 0\n.../nodemon@2.0.15/node_modules/nodemon postinstall: Love nodemon? You can now support the project via the open collective:\n.../nodemon@2.0.15/node_modules/nodemon postinstall:  > https://opencollective.com/nodemon/donate\n.../node_modules/@nestjs/core postinstall:                            Thanks for installing nest \n.../node_modules/@nestjs/core postinstall:                  Please consider donating to our open collective\n.../node_modules/@nestjs/core postinstall:                         to help us maintain this package.\n.../node_modules/@nestjs/core postinstall:                                          \n.../node_modules/@nestjs/core postinstall:                             Number of contributors: 0\n.../node_modules/@nestjs/core postinstall:                               Number of backers: 878\n.../node_modules/@nestjs/core postinstall:                              Annual budget: $183,492\n.../node_modules/@nestjs/core postinstall:                              Current balance: $21,080\n.../node_modules/@nestjs/core postinstall:                                          \n.../node_modules/@nestjs/core postinstall:              Become a partner: https://opencollective.com/nest/donate\n.../node_modules/@nestjs/core postinstall:                                          \n.../node_modules/@nestjs/core postinstall: Done\nProgress: resolved 675, reused 0, downloaded 674, added 675, done\n.../nodemon@2.0.15/node_modules/nodemon postinstall: Done\n\ndependencies:\n+ @grammyjs/menu 1.0.4\n+ @grammyjs/stateless-question 3.0.1\n+ @nestjs/common 7.6.18\n+ @nestjs/core 7.6.18\n+ @nestjs/platform-express 7.6.18\n+ @nestjs/schematics 7.3.1\n+ @sentry/node 5.30.0\n+ @twurple/api 5.0.13\n+ @twurple/auth 5.0.13\n+ @twurple/eventsub 5.0.13\n+ axios 0.21.4\n+ class-transformer 0.3.1\n+ class-validator 0.12.2\n+ dayjs 1.10.7\n+ dotenv 8.6.0\n+ glob 7.2.0\n+ grammy 1.7.0\n+ hbs 4.2.0\n+ lodash 4.17.21\n+ nestjs-pino 1.4.0\n+ pg 8.7.1\n+ pino-pretty 4.8.0\n+ reflect-metadata 0.1.13\n+ rotating-file-stream 2.1.6\n+ source-map-support 0.5.21\n+ strip-ansi 6.0.1\n+ typeorm 0.2.41\n\ndevDependencies:\n+ @nestjs/cli 7.6.0\n+ @types/express 4.17.13\n+ @types/glob 7.2.0\n+ @types/hbs 4.0.1\n+ @types/localtunnel 2.0.1\n+ @types/lodash 4.14.178\n+ @types/node 14.18.5\n+ @types/source-map-support 0.5.4\n+ @typescript-eslint/eslint-plugin 4.33.0\n+ @typescript-eslint/parser 4.33.0\n+ eslint 7.32.0\n+ nodemon 2.0.15\n+ rimraf 3.0.2\n+ ts-node 9.1.1\n+ typescript 4.5.4\n\n WARN  Issues with peer dependencies found\n.\n├─┬ @nestjs/common 7.6.18\n│ └── ✕ missing peer rxjs@^6.0.0\n└─┬ @nestjs/core 7.6.18\n  └── ✕ missing peer rxjs@^6.0.0\nPeer dependencies that should be installed:\n  rxjs@\">=6.0.0 <7.0.0\"\n\nDone in 11.4s\nRemoving intermediate container 05eef32f259c\n ---> 468ebd15816a\nStep 8/12 : COPY . /app\n ---> 1a54684487e8\nStep 9/12 : RUN pnpm run build\n ---> Running in 87979a3afbbe\n\n> twitch-notifier@4.1.0 prebuild /app\n> rimraf dist\n\n\n> twitch-notifier@4.1.0 build /app\n> tsc\n\nRemoving intermediate container 87979a3afbbe\n ---> 86d8fcdf27ad\nStep 10/12 : COPY docker.sh /\n ---> 71ef190a1d86\nStep 11/12 : RUN chmod +x /docker.sh\n ---> Running in cb2ed095fa21\nRemoving intermediate container cb2ed095fa21\n ---> e783dc099eed\nStep 12/12 : ENTRYPOINT [\"/docker.sh\"]\n ---> Running in 15d87fcdb61f\nRemoving intermediate container 15d87fcdb61f\n ---> 50e4c96237b7\nSuccessfully built 50e4c96237b7\nSuccessfully tagged twitch-notifier:latest\n","stderr":"","imageSize":378594714},"endTime":1672754654804}