{"repository":"https://github.com/skooner-k8s/skooner","dockerfilePath":"Dockerfile","startTime":1672290193331,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/skooner-k8s/skooner'...\n","error":null,"commit":"b8bd864a16b504b6100c1f538257c50b37efa576"},"originalBuild":{"startTimestamp":1672290194446,"endTimestamp":1672290389347,"error":null,"stdout":"Sending build context to Docker daemon   10.9MB\r\r\nStep 1/18 : FROM node:12.22.10-alpine as build-deps\n12.22.10-alpine: Pulling from library/node\n3d2430473443: Pulling fs layer\n77097efd96d4: Pulling fs layer\nfca9e648b17d: Pulling fs layer\n76bc0f9d5fc6: Pulling fs layer\n76bc0f9d5fc6: Waiting\n3d2430473443: Download complete\n3d2430473443: Pull complete\n77097efd96d4: Verifying Checksum\n77097efd96d4: Download complete\n76bc0f9d5fc6: Verifying Checksum\n76bc0f9d5fc6: Download complete\nfca9e648b17d: Verifying Checksum\nfca9e648b17d: Download complete\n77097efd96d4: Pull complete\nfca9e648b17d: Pull complete\n76bc0f9d5fc6: Pull complete\nDigest: sha256:54017d3a3ed14f8e698607e7d17e15ae6c708f07c0fd5560b12f860987e8bf71\nStatus: Downloaded newer image for node:12.22.10-alpine\n ---> c049a5e21a30\nStep 2/18 : WORKDIR /usr/src/app\n ---> Running in 2f18da72e860\nRemoving intermediate container 2f18da72e860\n ---> 724b125472ba\nStep 3/18 : COPY client/package.json client/package-lock.json ./\n ---> 25e66379fd27\nStep 4/18 : RUN npm i\n ---> Running in c3a2a44da20f\n\n> core-js@2.6.12 postinstall /usr/src/app/node_modules/babel-runtime/node_modules/core-js\n> node -e \"try{require('./postinstall')}catch(e){}\"\n\n\u001b[96mThank you for using core-js (\u001b[94m https://github.com/zloirock/core-js \u001b[96m) for polyfilling JavaScript standard library!\u001b[0m\n\n\u001b[96mThe project needs your help! Please consider supporting of core-js on Open Collective or Patreon: \u001b[0m\n\u001b[96m>\u001b[94m https://opencollective.com/core-js \u001b[0m\n\u001b[96m>\u001b[94m https://www.patreon.com/zloirock \u001b[0m\n\n\u001b[96mAlso, the author of core-js (\u001b[94m https://github.com/zloirock \u001b[96m) is looking for a good job -)\u001b[0m\n\n\n> core-js@3.8.3 postinstall /usr/src/app/node_modules/core-js\n> node -e \"try{require('./postinstall')}catch(e){}\"\n\n\u001b[96mThank you for using core-js (\u001b[94m https://github.com/zloirock/core-js \u001b[96m) for polyfilling JavaScript standard library!\u001b[0m\n\n\u001b[96mThe project needs your help! Please consider supporting of core-js on Open Collective or Patreon: \u001b[0m\n\u001b[96m>\u001b[94m https://opencollective.com/core-js \u001b[0m\n\u001b[96m>\u001b[94m https://www.patreon.com/zloirock \u001b[0m\n\n\u001b[96mAlso, the author of core-js (\u001b[94m https://github.com/zloirock \u001b[96m) is looking for a good job -)\u001b[0m\n\n\n> core-js-pure@3.8.3 postinstall /usr/src/app/node_modules/core-js-pure\n> node -e \"try{require('./postinstall')}catch(e){}\"\n\n\u001b[96mThank you for using core-js (\u001b[94m https://github.com/zloirock/core-js \u001b[96m) for polyfilling JavaScript standard library!\u001b[0m\n\n\u001b[96mThe project needs your help! Please consider supporting of core-js on Open Collective or Patreon: \u001b[0m\n\u001b[96m>\u001b[94m https://opencollective.com/core-js \u001b[0m\n\u001b[96m>\u001b[94m https://www.patreon.com/zloirock \u001b[0m\n\n\u001b[96mAlso, the author of core-js (\u001b[94m https://github.com/zloirock \u001b[96m) is looking for a good job -)\u001b[0m\n\n\n> protobufjs@6.10.2 postinstall /usr/src/app/node_modules/protobufjs\n> node scripts/postinstall\n\n\u001b[91mnpm WARN @skooner-k8s/skooner-client@0.1.0 No description\n\u001b[0m\u001b[91mnpm WARN @skooner-k8s/skooner-client@0.1.0 No license field.\n\u001b[0m\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@1.2.13 (node_modules/webpack-dev-server/node_modules/fsevents):\nnpm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.2.13: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@1.2.13 (node_modules/watchpack-chokidar2/node_modules/fsevents):\nnpm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.2.13: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@1.2.13 (node_modules/jest-haste-map/node_modules/fsevents):\nnpm WARN notsup\u001b[0m\u001b[91m SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.2.13: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@2.1.2 (node_modules/fsevents):\nnpm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.1.2: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@2.3.1 (node_modules/chokidar/node_modules/fsevents):\nnpm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.1: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91m\n\u001b[0madded 1810 packages from 891 contributors and audited 1820 packages in 27.957s\n\n88 packages are looking for funding\n  run `npm fund` for details\n\nfound 144 vulnerabilities (18 low, 13 moderate, 106 high, 7 critical)\n  run `npm audit fix` to fix them, or `npm audit` for details\nRemoving intermediate container c3a2a44da20f\n ---> ef3e7ec6d4e2\nStep 5/18 : COPY client/ ./\n ---> f2300334d7fa\nStep 6/18 : RUN npm run build\n ---> Running in 8c4596d10f4d\n\n> @skooner-k8s/skooner-client@0.1.0 build /usr/src/app\n> react-scripts build\n\nCreating an optimized production build...\n\u001b[91mBrowserslist: caniuse-lite is outdated. Please run:\n  npx browserslist@latest --update-db\n  Why you should do it regularly: https://github.com/browserslist/browserslist#browsers-data-updating\n\u001b[0mCompiled successfully.\n\nFile sizes after gzip:\n\n  322.9 KB   build/static/js/2.8ecea4b8.chunk.js\n  131.43 KB  build/static/js/main.aaabf38a.chunk.js\n  4.25 KB    build/static/css/main.c514c7e6.chunk.css\n  786 B      build/static/js/runtime-main.be299e3a.js\n  589 B      build/static/css/2.b522e268.chunk.css\n\nThe project was built assuming it is hosted at ./.\nYou can control this with the homepage field in your package.json.\n\nThe build folder is ready to be deployed.\n\nFind out more about deployment here:\n\n  bit.ly/CRA-deploy\n\nRemoving intermediate container 8c4596d10f4d\n ---> 40be36fae5e8\nStep 7/18 : FROM node:12.22.10-alpine\n ---> c049a5e21a30\nStep 8/18 : RUN apk add --no-cache tini\n ---> Running in 0c1afd2b132e\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/community/x86_64/APKINDEX.tar.gz\n(1/1) Installing tini (0.19.0-r0)\nExecuting busybox-1.34.1-r4.trigger\nOK: 7 MiB in 17 packages\nRemoving intermediate container 0c1afd2b132e\n ---> 891233d7d3af\nStep 9/18 : ENV NODE_ENV production\n ---> Running in 6e41138151f1\nRemoving intermediate container 6e41138151f1\n ---> 47ecca8ac3f3\nStep 10/18 : WORKDIR /usr/src/app\n ---> Running in 605fc566c5dd\nRemoving intermediate container 605fc566c5dd\n ---> 76cacae36271\nStep 11/18 : RUN chown -R node:node /usr/src/app/\n ---> Running in 5e61427bcb34\nRemoving intermediate container 5e61427bcb34\n ---> 39de6e138c59\nStep 12/18 : EXPOSE 4654\n ---> Running in bc5889d6a8b3\nRemoving intermediate container bc5889d6a8b3\n ---> c4e908d7281d\nStep 13/18 : COPY server/package.json server/package-lock.json ./\n ---> 5e017d6c7bf9\nStep 14/18 : RUN npm i --production\n ---> Running in d5a31f9f067d\n\u001b[91mnpm WARN @skooner-k8s/skooner-server@1.0.0 No description\n\u001b[0m\u001b[91m\n\u001b[0madded 184 packages from 202 contributors and audited 291 packages in 4.405s\n\n18 packages are looking for funding\n  run `npm fund` for details\n\nfound 8 vulnerabilities (2 moderate, 6 high)\n  run `npm audit fix` to fix them, or `npm audit` for details\nRemoving intermediate container d5a31f9f067d\n ---> 77f5364d400b\nStep 15/18 : COPY --from=build-deps /usr/src/app/build /usr/src/app/public\n ---> 3a1f8cab2634\nStep 16/18 : COPY /server ./\n ---> de1a7f3af629\nStep 17/18 : USER 1000\n ---> Running in 7d337b0fa71e\nRemoving intermediate container 7d337b0fa71e\n ---> b14fbf884075\nStep 18/18 : ENTRYPOINT [\"/sbin/tini\", \"--\", \"node\", \".\"]\n ---> Running in 3b0a37abeb23\nRemoving intermediate container 3b0a37abeb23\n ---> 2dfa6242c397\nSuccessfully built 2dfa6242c397\nSuccessfully tagged skooner:latest\n","stderr":"","imageSize":132313596},"repair":{"violations":[{"name":"npmCacheCleanAfterInstall","position":{"start":4,"end":4,"columnStart":4,"columnEnd":9}},{"name":"npmCacheCleanAfterInstall","position":{"start":19,"end":19,"columnStart":4,"columnEnd":22}}],"repairedDockerfile":"# Stage 1 - the build react app\nFROM node:12.22.10-alpine as build-deps\nWORKDIR /usr/src/app\nCOPY client/package.json client/package-lock.json ./\nRUN npm i\n\nCOPY client/ ./\nRUN npm run build\n\n# Stage 2 - the production environment\nFROM node:12.22.10-alpine\n\nRUN apk add --no-cache tini\nENV NODE_ENV production\nWORKDIR /usr/src/app\nRUN chown -R node:node /usr/src/app/\nEXPOSE 4654\n\nCOPY server/package.json server/package-lock.json ./\nRUN npm i --production\n\nCOPY --from=build-deps /usr/src/app/build /usr/src/app/public\nCOPY /server ./\n\n# USER 1000 is the \"node\" user\n# This is to avoid the \"container has runAsNonRoot and image has non-numeric user (node), cannot verify user is non-root\"\n# in clusters with PSP enabled\nUSER 1000\n\nENTRYPOINT [\"/sbin/tini\", \"--\", \"node\", \".\"]\n"},"repairedBuild":{"startTimestamp":1672290390022,"endTimestamp":1672290598029,"error":null,"stdout":"Sending build context to Docker daemon   10.9MB\r\r\nStep 1/18 : FROM node:12.22.10-alpine as build-deps\n ---> c049a5e21a30\nStep 2/18 : WORKDIR /usr/src/app\n ---> Running in 24b230266a02\nRemoving intermediate container 24b230266a02\n ---> c1ef5f31eea2\nStep 3/18 : COPY client/package.json client/package-lock.json ./\n ---> 208cf2708e4a\nStep 4/18 : RUN npm i\n ---> Running in b58927f1f185\n\n> core-js@2.6.12 postinstall /usr/src/app/node_modules/babel-runtime/node_modules/core-js\n> node -e \"try{require('./postinstall')}catch(e){}\"\n\n\u001b[96mThank you for using core-js (\u001b[94m https://github.com/zloirock/core-js \u001b[96m) for polyfilling JavaScript standard library!\u001b[0m\n\n\u001b[96mThe project needs your help! Please consider supporting of core-js on Open Collective or Patreon: \u001b[0m\n\u001b[96m>\u001b[94m https://opencollective.com/core-js \u001b[0m\n\u001b[96m>\u001b[94m https://www.patreon.com/zloirock \u001b[0m\n\n\u001b[96mAlso, the author of core-js (\u001b[94m https://github.com/zloirock \u001b[96m) is looking for a good job -)\u001b[0m\n\n\n> core-js@3.8.3 postinstall /usr/src/app/node_modules/core-js\n> node -e \"try{require('./postinstall')}catch(e){}\"\n\n\u001b[96mThank you for using core-js (\u001b[94m https://github.com/zloirock/core-js \u001b[96m) for polyfilling JavaScript standard library!\u001b[0m\n\n\u001b[96mThe project needs your help! Please consider supporting of core-js on Open Collective or Patreon: \u001b[0m\n\u001b[96m>\u001b[94m https://opencollective.com/core-js \u001b[0m\n\u001b[96m>\u001b[94m https://www.patreon.com/zloirock \u001b[0m\n\n\u001b[96mAlso, the author of core-js (\u001b[94m https://github.com/zloirock \u001b[96m) is looking for a good job -)\u001b[0m\n\n\n> core-js-pure@3.8.3 postinstall /usr/src/app/node_modules/core-js-pure\n> node -e \"try{require('./postinstall')}catch(e){}\"\n\n\u001b[96mThank you for using core-js (\u001b[94m https://github.com/zloirock/core-js \u001b[96m) for polyfilling JavaScript standard library!\u001b[0m\n\n\u001b[96mThe project needs your help! Please consider supporting of core-js on Open Collective or Patreon: \u001b[0m\n\u001b[96m>\u001b[94m https://opencollective.com/core-js \u001b[0m\n\u001b[96m>\u001b[94m https://www.patreon.com/zloirock \u001b[0m\n\n\u001b[96mAlso, the author of core-js (\u001b[94m https://github.com/zloirock \u001b[96m) is looking for a good job -)\u001b[0m\n\n\n> protobufjs@6.10.2 postinstall /usr/src/app/node_modules/protobufjs\n> node scripts/postinstall\n\n\u001b[91mnpm WARN @skooner-k8s/skooner-client@0.1.0 No description\n\u001b[0m\u001b[91mnpm WARN @skooner-k8s/skooner-client@0.1.0 No license field.\n\u001b[0m\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@1.2.13 (node_modules/webpack-dev-server/node_modules/fsevents):\nnpm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.2.13: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@1.2.13 (node_modules/watchpack-chokidar2/node_modules/fsevents):\nnpm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.2.13: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@1.2.13 (node_modules/jest-haste-map/node_modules/fsevents):\nnpm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.2.13: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@2.1.2 (node_modules/fsevents):\nnpm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.1.2: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@2.3.1 (node_modules/chokidar/node_modules/fsevents):\nnpm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.1: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91m\n\u001b[0madded 1810 packages from 891 contributors and audited 1820 packages in 25.495s\n\n88 packages are looking for funding\n  run `npm fund` for details\n\nfound 144 vulnerabilities (18 low, 13 moderate, 106 high, 7 critical)\n  run `npm audit fix` to fix them, or `npm audit` for details\nRemoving intermediate container b58927f1f185\n ---> cf7b15746665\nStep 5/18 : COPY client/ ./\n ---> 282e2ba3328e\nStep 6/18 : RUN npm run build\n ---> Running in 6a811cb4c0f8\n\n> @skooner-k8s/skooner-client@0.1.0 build /usr/src/app\n> react-scripts build\n\nCreating an optimized production build...\n\u001b[91mBrowserslist: caniuse-lite is outdated. Please run:\n  npx browserslist@latest --update-db\n  Why you should do it regularly: https://github.com/browserslist/browserslist#browsers-data-updating\n\u001b[0mCompiled successfully.\n\nFile sizes after gzip:\n\n  322.9 KB   build/static/js/2.8ecea4b8.chunk.js\n  131.43 KB  build/static/js/main.aaabf38a.chunk.js\n  4.25 KB    build/static/css/main.c514c7e6.chunk.css\n  786 B      build/static/js/runtime-main.be299e3a.js\n  589 B      build/static/css/2.b522e268.chunk.css\n\nThe project was built assuming it is hosted at ./.\nYou can control this with the homepage field in your package.json.\n\nThe build folder is ready to be deployed.\n\nFind out more about deployment here:\n\n  bit.ly/CRA-deploy\n\nRemoving intermediate container 6a811cb4c0f8\n ---> cd4100d8f58a\nStep 7/18 : FROM node:12.22.10-alpine\n ---> c049a5e21a30\nStep 8/18 : RUN apk add --no-cache tini\n ---> Running in b96a24fa1147\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/community/x86_64/APKINDEX.tar.gz\n(1/1) Installing tini (0.19.0-r0)\nExecuting busybox-1.34.1-r4.trigger\nOK: 7 MiB in 17 packages\nRemoving intermediate container b96a24fa1147\n ---> 6b6ded954745\nStep 9/18 : ENV NODE_ENV production\n ---> Running in 69a19119f46d\nRemoving intermediate container 69a19119f46d\n ---> f1b488fe3399\nStep 10/18 : WORKDIR /usr/src/app\n ---> Running in 6809f3eb7f3b\nRemoving intermediate container 6809f3eb7f3b\n ---> de879da2e143\nStep 11/18 : RUN chown -R node:node /usr/src/app/\n ---> Running in 19af424b2011\nRemoving intermediate container 19af424b2011\n ---> c67df98214c9\nStep 12/18 : EXPOSE 4654\n ---> Running in 9baaed1046fa\nRemoving intermediate container 9baaed1046fa\n ---> 33c2cd5d2946\nStep 13/18 : COPY server/package.json server/package-lock.json ./\n ---> d74209a56ef7\nStep 14/18 : RUN npm i --production\n ---> Running in df2d0c998b8c\n\u001b[91mnpm WARN @skooner-k8s/skooner-server@1.0.0 No description\n\u001b[0m\u001b[91m\n\u001b[0madded 184 packages from 202 contributors and audited 291 packages in 4.295s\n\n18 packages are looking for funding\n  run `npm fund` for details\n\nfound 8 vulnerabilities (2 moderate, 6 high)\n  run `npm audit fix` to fix them, or `npm audit` for details\nRemoving intermediate container df2d0c998b8c\n ---> d09d033700cc\nStep 15/18 : COPY --from=build-deps /usr/src/app/build /usr/src/app/public\n ---> 0a15d1cace9d\nStep 16/18 : COPY /server ./\n ---> 8a55d4a25482\nStep 17/18 : USER 1000\n ---> Running in 65b77864474b\nRemoving intermediate container 65b77864474b\n ---> abe9f19388e7\nStep 18/18 : ENTRYPOINT [\"/sbin/tini\", \"--\", \"node\", \".\"]\n ---> Running in e8d4ac570990\nRemoving intermediate container e8d4ac570990\n ---> a4fb9b9c1465\nSuccessfully built a4fb9b9c1465\nSuccessfully tagged skooner:latest\n","stderr":"","imageSize":132312375},"endTime":1672290598586}