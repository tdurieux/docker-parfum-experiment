{"repository":"https://github.com/spec-tacles/gateway","dockerfilePath":"Dockerfile","startTime":1672857149208,"endTime":1672857271169,"clone":{"startTime":1672857149215,"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/spec-tacles/gateway'...\n","error":null,"endTime":1672857150045,"commit":"48ced66f246ff456797ce4850abbbd7e2faee605"},"originalBuild":{"startTime":1672857150194,"endTime":1672857209847,"error":null,"stdout":"Sending build context to Docker daemon  122.9kB\r\r\nStep 1/9 : FROM golang:alpine AS build\n ---> cae57157ceaa\nStep 2/9 : WORKDIR /usr/gateway\n ---> Running in fd3c93676c44\nRemoving intermediate container fd3c93676c44\n ---> 20a82d26adde\nStep 3/9 : COPY go.mod go.sum ./\n ---> a6626766ccc6\nStep 4/9 : RUN go mod download\n ---> Running in 948901ad1a02\nRemoving intermediate container 948901ad1a02\n ---> 42c9348fbfdf\nStep 5/9 : COPY . .\n ---> 92db48affd0c\nStep 6/9 : RUN apk add gcc musl-dev libc-dev make &&     GOZSTD_VER=$(cat go.mod | fgrep github.com/valyala/gozstd | awk '{print $NF}') &&     go get -d github.com/valyala/gozstd@${GOZSTD_VER} &&     cd ${GOPATH}/pkg/mod/github.com/valyala/gozstd@${GOZSTD_VER} &&     make clean &&     make -j $(nproc) libzstd.a &&     cd /usr/gateway &&     go build -o build/gateway\n ---> Running in b6249a8b0e68\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/13) Installing libgcc (12.2.1_git20220924-r4)\n(2/13) Installing libstdc++ (12.2.1_git20220924-r4)\n(3/13) Installing binutils (2.39-r2)\n(4/13) Installing libgomp (12.2.1_git20220924-r4)\n(5/13) Installing libatomic (12.2.1_git20220924-r4)\n(6/13) Installing gmp (6.2.1-r2)\n(7/13) Installing isl25 (0.25-r0)\n(8/13) Installing mpfr4 (4.1.0-r0)\n(9/13) Installing mpc1 (1.2.1-r1)\n(10/13) Installing gcc (12.2.1_git20220924-r4)\n(11/13) Installing musl-dev (1.2.3-r4)\n(12/13) Installing libc-dev (0.7.2-r3)\n(13/13) Installing make (4.3-r1)\nExecuting busybox-1.35.0-r29.trigger\nOK: 153 MiB in 29 packages\nrm -f libzstd_linux_amd64.a\ncd zstd && make clean\nmake[1]: Entering directory '/go/pkg/mod/github.com/valyala/gozstd@v1.17.0/zstd'\nCleaning completed\nmake[1]: Leaving directory '/go/pkg/mod/github.com/valyala/gozstd@v1.17.0/zstd'\ncd zstd/lib && ZSTD_LEGACY_SUPPORT=0 MOREFLAGS= make clean libzstd.a\nmake[1]: Entering directory '/go/pkg/mod/github.com/valyala/gozstd@v1.17.0/zstd/lib'\nCleaning library completed\nCC obj/conf_e597a08ac690a6698090df207f2b57f4/static/debug.o\nCC obj/conf_e597a08ac690a6698090df207f2b57f4/static/entropy_common.o\nCC obj/conf_e597a08ac690a6698090df207f2b57f4/static/error_private.o\nCC obj/conf_e597a08ac690a6698090df207f2b57f4/static/fse_decompress.o\nCC obj/conf_e597a08ac690a6698090df207f2b57f4/static/pool.o\nCC obj/conf_e597a08ac690a6698090df207f2b57f4/static/threading.o\nCC obj/conf_e597a08ac690a6698090df207f2b57f4/static/xxhash.o\nCC obj/conf_e597a08ac690a6698090df207f2b57f4/static/zstd_common.o\nCC obj/conf_e597a08ac690a6698090df207f2b57f4/static/fse_compress.o\nCC obj/conf_e597a08ac690a6698090df207f2b57f4/static/hist.o\nCC obj/conf_e597a08ac690a6698090df207f2b57f4/static/huf_compress.o\nCC obj/conf_e597a08ac690a6698090df207f2b57f4/static/zstd_compress.o\nCC obj/conf_e597a08ac690a6698090df207f2b57f4/static/zstd_compress_literals.o\nCC obj/conf_e597a08ac690a6698090df207f2b57f4/static/zstd_compress_sequences.o\nCC obj/conf_e597a08ac690a6698090df207f2b57f4/static/zstd_compress_superblock.o\nCC obj/conf_e597a08ac690a6698090df207f2b57f4/static/zstd_double_fast.o\nCC obj/conf_e597a08ac690a6698090df207f2b57f4/static/zstd_fast.o\nCC obj/conf_e597a08ac690a6698090df207f2b57f4/static/zstd_lazy.o\nCC obj/conf_e597a08ac690a6698090df207f2b57f4/static/zstd_ldm.o\nCC obj/conf_e597a08ac690a6698090df207f2b57f4/static/zstd_opt.o\nCC obj/conf_e597a08ac690a6698090df207f2b57f4/static/zstdmt_compress.o\nCC obj/conf_e597a08ac690a6698090df207f2b57f4/static/huf_decompress.o\nCC obj/conf_e597a08ac690a6698090df207f2b57f4/static/zstd_ddict.o\nCC obj/conf_e597a08ac690a6698090df207f2b57f4/static/zstd_decompress.o\nCC obj/conf_e597a08ac690a6698090df207f2b57f4/static/zstd_decompress_block.o\nAS obj/conf_e597a08ac690a6698090df207f2b57f4/static/huf_decompress_amd64.o\nCC obj/conf_e597a08ac690a6698090df207f2b57f4/static/cover.o\nCC obj/conf_e597a08ac690a6698090df207f2b57f4/static/divsufsort.o\nCC obj/conf_e597a08ac690a6698090df207f2b57f4/static/fastcover.o\nCC obj/conf_e597a08ac690a6698090df207f2b57f4/static/zdict.o\ncompiling single-threaded static library 1.5.2\nmake[1]: Leaving directory '/go/pkg/mod/github.com/valyala/gozstd@v1.17.0/zstd/lib'\nmv zstd/lib/libzstd.a libzstd_linux_amd64.a\nRemoving intermediate container b6249a8b0e68\n ---> ebf4dc94459c\nStep 7/9 : FROM alpine:latest\n ---> 49176f190c7e\nStep 8/9 : COPY --from=build /usr/gateway/build/gateway /gateway\n ---> 132945ce42ca\nStep 9/9 : ENTRYPOINT [\"/gateway\"]\n ---> Running in 81e5dea3edc7\nRemoving intermediate container 81e5dea3edc7\n ---> c8fb2fec337c\nSuccessfully built c8fb2fec337c\nSuccessfully tagged gateway:latest\n","stderr":"","imageSize":24089296},"repair":{"startTime":1672857209920,"endTime":1672857210020,"violations":[{"name":"apkAddUseNoCache","position":{"start":7,"end":7,"columnStart":4,"columnEnd":38}}],"repairedDockerfile":"FROM golang:alpine AS build\n\nWORKDIR /usr/gateway\nCOPY go.mod go.sum ./\nRUN go mod download\nCOPY . .\n# https://github.com/valyala/gozstd/issues/20\nRUN apk add --no-cache gcc musl-dev libc-dev make && \\\n    GOZSTD_VER=$(cat go.mod | fgrep github.com/valyala/gozstd | awk '{print $NF}') && \\\n    go get -d github.com/valyala/gozstd@${GOZSTD_VER} && \\\n    cd ${GOPATH}/pkg/mod/github.com/valyala/gozstd@${GOZSTD_VER} && \\\n    make clean && \\\n    make -j $(nproc) libzstd.a && \\\n    cd /usr/gateway && \\\n    go build -o build/gateway\n\nFROM alpine:latest\nCOPY --from=build /usr/gateway/build/gateway /gateway\nENTRYPOINT [\"/gateway\"]\n"},"repairedBuild":{"startTime":1672857210564,"endTime":1672857270555,"error":null,"stdout":"Sending build context to Docker daemon  122.9kB\r\r\nStep 1/9 : FROM golang:alpine AS build\n ---> cae57157ceaa\nStep 2/9 : WORKDIR /usr/gateway\n ---> Running in 4308c62282da\nRemoving intermediate container 4308c62282da\n ---> 60cc966350ad\nStep 3/9 : COPY go.mod go.sum ./\n ---> 6ecf0ebf88d6\nStep 4/9 : RUN go mod download\n ---> Running in 5ce05b3b690f\nRemoving intermediate container 5ce05b3b690f\n ---> 99914811cb6a\nStep 5/9 : COPY . .\n ---> 3491f58efd71\nStep 6/9 : RUN apk add --no-cache gcc musl-dev libc-dev make &&     GOZSTD_VER=$(cat go.mod | fgrep github.com/valyala/gozstd | awk '{print $NF}') &&     go get -d github.com/valyala/gozstd@${GOZSTD_VER} &&     cd ${GOPATH}/pkg/mod/github.com/valyala/gozstd@${GOZSTD_VER} &&     make clean &&     make -j $(nproc) libzstd.a &&     cd /usr/gateway &&     go build -o build/gateway\n ---> Running in bc763d73b49f\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/13) Installing libgcc (12.2.1_git20220924-r4)\n(2/13) Installing libstdc++ (12.2.1_git20220924-r4)\n(3/13) Installing binutils (2.39-r2)\n(4/13) Installing libgomp (12.2.1_git20220924-r4)\n(5/13) Installing libatomic (12.2.1_git20220924-r4)\n(6/13) Installing gmp (6.2.1-r2)\n(7/13) Installing isl25 (0.25-r0)\n(8/13) Installing mpfr4 (4.1.0-r0)\n(9/13) Installing mpc1 (1.2.1-r1)\n(10/13) Installing gcc (12.2.1_git20220924-r4)\n(11/13) Installing musl-dev (1.2.3-r4)\n(12/13) Installing libc-dev (0.7.2-r3)\n(13/13) Installing make (4.3-r1)\nExecuting busybox-1.35.0-r29.trigger\nOK: 153 MiB in 29 packages\nrm -f libzstd_linux_amd64.a\ncd zstd && make clean\nmake[1]: Entering directory '/go/pkg/mod/github.com/valyala/gozstd@v1.17.0/zstd'\nCleaning completed\nmake[1]: Leaving directory '/go/pkg/mod/github.com/valyala/gozstd@v1.17.0/zstd'\ncd zstd/lib && ZSTD_LEGACY_SUPPORT=0 MOREFLAGS= make clean libzstd.a\nmake[1]: Entering directory '/go/pkg/mod/github.com/valyala/gozstd@v1.17.0/zstd/lib'\nCleaning library completed\nCC obj/conf_e597a08ac690a6698090df207f2b57f4/static/debug.o\nCC obj/conf_e597a08ac690a6698090df207f2b57f4/static/entropy_common.o\nCC obj/conf_e597a08ac690a6698090df207f2b57f4/static/error_private.o\nCC obj/conf_e597a08ac690a6698090df207f2b57f4/static/fse_decompress.o\nCC obj/conf_e597a08ac690a6698090df207f2b57f4/static/pool.o\nCC obj/conf_e597a08ac690a6698090df207f2b57f4/static/threading.o\nCC obj/conf_e597a08ac690a6698090df207f2b57f4/static/xxhash.o\nCC obj/conf_e597a08ac690a6698090df207f2b57f4/static/zstd_common.o\nCC obj/conf_e597a08ac690a6698090df207f2b57f4/static/fse_compress.o\nCC obj/conf_e597a08ac690a6698090df207f2b57f4/static/hist.o\nCC obj/conf_e597a08ac690a6698090df207f2b57f4/static/huf_compress.o\nCC obj/conf_e597a08ac690a6698090df207f2b57f4/static/zstd_compress.o\nCC obj/conf_e597a08ac690a6698090df207f2b57f4/static/zstd_compress_literals.o\nCC obj/conf_e597a08ac690a6698090df207f2b57f4/static/zstd_compress_sequences.o\nCC obj/conf_e597a08ac690a6698090df207f2b57f4/static/zstd_compress_superblock.o\nCC obj/conf_e597a08ac690a6698090df207f2b57f4/static/zstd_double_fast.o\nCC obj/conf_e597a08ac690a6698090df207f2b57f4/static/zstd_fast.o\nCC obj/conf_e597a08ac690a6698090df207f2b57f4/static/zstd_lazy.o\nCC obj/conf_e597a08ac690a6698090df207f2b57f4/static/zstd_ldm.o\nCC obj/conf_e597a08ac690a6698090df207f2b57f4/static/zstd_opt.o\nCC obj/conf_e597a08ac690a6698090df207f2b57f4/static/zstdmt_compress.o\nCC obj/conf_e597a08ac690a6698090df207f2b57f4/static/huf_decompress.o\nCC obj/conf_e597a08ac690a6698090df207f2b57f4/static/zstd_ddict.o\nCC obj/conf_e597a08ac690a6698090df207f2b57f4/static/zstd_decompress.o\nCC obj/conf_e597a08ac690a6698090df207f2b57f4/static/zstd_decompress_block.o\nAS obj/conf_e597a08ac690a6698090df207f2b57f4/static/huf_decompress_amd64.o\nCC obj/conf_e597a08ac690a6698090df207f2b57f4/static/cover.o\nCC obj/conf_e597a08ac690a6698090df207f2b57f4/static/divsufsort.o\nCC obj/conf_e597a08ac690a6698090df207f2b57f4/static/fastcover.o\nCC obj/conf_e597a08ac690a6698090df207f2b57f4/static/zdict.o\ncompiling single-threaded static library 1.5.2\nmake[1]: Leaving directory '/go/pkg/mod/github.com/valyala/gozstd@v1.17.0/zstd/lib'\nmv zstd/lib/libzstd.a libzstd_linux_amd64.a\nRemoving intermediate container bc763d73b49f\n ---> 9e0cda60e1ee\nStep 7/9 : FROM alpine:latest\n ---> 49176f190c7e\nStep 8/9 : COPY --from=build /usr/gateway/build/gateway /gateway\n ---> d684bf3e5a52\nStep 9/9 : ENTRYPOINT [\"/gateway\"]\n ---> Running in 01dda3fd61f1\nRemoving intermediate container 01dda3fd61f1\n ---> 557c79c18705\nSuccessfully built 557c79c18705\nSuccessfully tagged gateway:latest\n","stderr":"","imageSize":24089296}}