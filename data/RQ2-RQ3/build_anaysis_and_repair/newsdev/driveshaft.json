{"repository":"https://github.com/newsdev/driveshaft","dockerfilePath":"Dockerfile","startTime":1672262014415,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/newsdev/driveshaft'...\n","error":null,"commit":"fe579cd403642db8158b93585b9851938765f7b4"},"originalBuild":{"startTimestamp":1672262015228,"endTimestamp":1672262095838,"error":null,"stdout":"Sending build context to Docker daemon  196.1kB\r\r\nStep 1/11 : FROM ruby:2.5-alpine\n ---> 67ca994ddbc8\nStep 2/11 : RUN   bundle config --global frozen 1 &&   bundle config --global build.nokogiri --use-system-libraries\n ---> Running in e389ed2df4ff\nRemoving intermediate container e389ed2df4ff\n ---> a07a8dee2f89\nStep 3/11 : RUN mkdir -p /usr/src/app\n ---> Running in d4b1e1487858\nRemoving intermediate container d4b1e1487858\n ---> 52ae4aeda2c1\nStep 4/11 : WORKDIR /usr/src/app\n ---> Running in ee6ee529f23d\nRemoving intermediate container ee6ee529f23d\n ---> 9a3c628e4faf\nStep 5/11 : COPY Gemfile Gemfile.lock package.json /usr/src/app/\n ---> 468448b8c58e\nStep 6/11 : RUN apk --update add --virtual .build-deps         build-base g++ make       && apk add yarn --update-cache --repository http://dl-cdn.alpinelinux.org/alpine/edge/community       && apk add --no-cache         libxml2 libxslt-dev git       && bundle install --jobs `grep -c '^processor' /proc/cpuinfo`       && apk del .build-deps\n ---> Running in 65e2fd232b7e\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.13/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.13/community/x86_64/APKINDEX.tar.gz\n(1/19) Upgrading musl (1.2.2-r0 -> 1.2.2-r1)\n(2/19) Installing binutils (2.35.2-r1)\n(3/19) Installing libmagic (5.39-r0)\n(4/19) Installing file (5.39-r0)\n(5/19) Installing libgomp (10.2.1_pre1-r3)\n(6/19) Installing libatomic (10.2.1_pre1-r3)\n(7/19) Installing libgphobos (10.2.1_pre1-r3)\n(8/19) Installing isl22 (0.22-r0)\n(9/19) Installing mpfr4 (4.1.0-r0)\n(10/19) Installing mpc1 (1.2.0-r0)\n(11/19) Installing gcc (10.2.1_pre1-r3)\n(12/19) Installing musl-dev (1.2.2-r1)\n(13/19) Installing libc-dev (0.7.2-r3)\n(14/19) Installing g++ (10.2.1_pre1-r3)\n(15/19) Installing make (4.3-r0)\n(16/19) Installing fortify-headers (1.1-r0)\n(17/19) Installing patch (2.7.6-r7)\n(18/19) Installing build-base (0.5-r3)\n(19/19) Installing .build-deps (20221228.211348)\nExecuting busybox-1.32.1-r6.trigger\nOK: 207 MiB in 54 packages\nfetch http://dl-cdn.alpinelinux.org/alpine/edge/community/x86_64/APKINDEX.tar.gz\n\u001b[91mERROR: http://dl-cdn.alpinelinux.org/alpine/edge/community: UNTRUSTED signature\nWARNING: Ignoring http://dl-cdn.alpinelinux.org/alpine/edge/community: No such file or directory\n\u001b[0m(1/5) Installing nghttp2-libs (1.42.0-r1)\n(2/5) Installing brotli-libs (1.0.9-r3)\n(3/5) Installing c-ares (1.17.2-r0)\n(4/5) Installing nodejs (14.20.1-r0)\n(5/5) Installing yarn (1.22.10-r0)\nExecuting busybox-1.32.1-r6.trigger\nOK: 249 MiB in 59 packages\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.13/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.13/community/x86_64/APKINDEX.tar.gz\n(1/12) Installing libcurl (7.79.1-r3)\n(2/12) Installing expat (2.2.10-r8)\n(3/12) Installing pcre2 (10.36-r1)\n(4/12) Installing git (2.30.6-r0)\n(5/12) Installing xz-libs (5.2.5-r1)\n(6/12) Installing libxml2 (2.9.14-r2)\n(7/12) Installing libgpg-error (1.41-r0)\n(8/12) Installing libgcrypt (1.8.8-r1)\n(9/12) Installing libxslt (1.1.35-r0)\n(10/12) Installing xz-dev (5.2.5-r1)\n(11/12) Installing libxml2-dev (2.9.14-r2)\n(12/12) Installing libxslt-dev (1.1.35-r0)\nExecuting busybox-1.32.1-r6.trigger\nOK: 271 MiB in 71 packages\nFetching gem metadata from https://rubygems.org/........\nFetching rake 12.0.0\nInstalling rake 12.0.0\nFetching archieml 0.3.0\nFetching jmespath 1.3.1\nUsing bundler 1.17.3\nFetching declarative 0.0.9\nFetching eventmachine 1.2.5\nFetching jwt 1.5.6\nFetching concurrent-ruby 1.0.5\nFetching minitest 5.11.3\nFetching little-plugger 1.1.4\nFetching httpclient 2.8.3\nFetching mime-types-data 3.2016.0521\nFetching thread_safe 0.3.6\nFetching public_suffix 2.0.5\nFetching puma 3.9.1\nFetching multi_json 1.12.1\nFetching daemons 1.2.4\nFetching multipart-post 2.0.0\nFetching builder 3.2.3\nFetching os 0.9.6\nFetching rack 2.0.3\nFetching backports 3.11.3\nFetching tilt 2.0.8\nFetching declarative-option 0.1.0\nFetching uber 0.1.0\nFetching retriable 3.1.1\nFetching mini_portile2 2.3.0\nFetching mustermann 1.0.2\nFetching memoist 0.16.0\nInstalling multipart-post 2.0.0\nInstalling mini_portile2 2.3.0\nInstalling little-plugger 1.1.4\nInstalling archieml 0.3.0\nInstalling jwt 1.5.6\nInstalling jmespath 1.3.1\nInstalling os 0.9.6\nInstalling declarative-option 0.1.0\nInstalling uber 0.1.0\nInstalling builder 3.2.3\nInstalling memoist 0.16.0\nInstalling daemons 1.2.4\nInstalling declarative 0.0.9\nInstalling multi_json 1.12.1\nInstalling retriable 3.1.1\nInstalling mime-types-data 3.2016.0521\nInstalling tilt 2.0.8\nInstalling minitest 5.11.3\nInstalling public_suffix 2.0.5\nInstalling mustermann 1.0.2\nInstalling thread_safe 0.3.6\nInstalling puma 3.9.1 with native extensions\nInstalling concurrent-ruby 1.0.5\nInstalling backports 3.11.3\nInstalling rack 2.0.3\nInstalling eventmachine 1.2.5 with native extensions\nInstalling httpclient 2.8.3\nFetching logging 2.2.2\nFetching mime-types 3.1\nFetching faraday 0.13.0\nFetching representable 3.0.4\nInstalling faraday 0.13.0\nInstalling logging 2.2.2\nInstalling representable 3.0.4\nInstalling mime-types 3.1\nFetching nokogiri 1.8.2\nFetching addressable 2.5.1\nFetching aws-sdk-core 2.0.48\nInstalling addressable 2.5.1\nFetching tzinfo 1.2.5\nInstalling aws-sdk-core 2.0.48\nInstalling tzinfo 1.2.5\nFetching signet 0.7.3\nInstalling signet 0.7.3\nInstalling nokogiri 1.8.2 with native extensions\nFetching googleauth 0.5.3\nFetching i18n 1.0.1\nInstalling i18n 1.0.1\nInstalling googleauth 0.5.3\nFetching rack-protection 2.0.3\nFetching rack-flash3 1.0.5\nInstalling rack-protection 2.0.3\nInstalling rack-flash3 1.0.5\nFetching google-api-client 0.11.3\nFetching activesupport 5.2.0\nFetching sinatra 2.0.3\nInstalling sinatra 2.0.3\nInstalling activesupport 5.2.0\nFetching aws-sdk-resources 2.0.48\nInstalling aws-sdk-resources 2.0.48\nInstalling google-api-client 0.11.3\nFetching aws-sdk 2.0.48\nInstalling aws-sdk 2.0.48\nFetching sinatra-contrib 2.0.3\nInstalling sinatra-contrib 2.0.3\nFetching thin 1.7.2\nInstalling thin 1.7.2 with native extensions\nBundle complete! 11 Gemfile dependencies, 49 gems now installed.\nUse `bundle info [gemname]` to see where a bundled gem is installed.\n(1/18) Purging .build-deps (20221228.211348)\n(2/18) Purging build-base (0.5-r3)\n(3/18) Purging file (5.39-r0)\n(4/18) Purging fortify-headers (1.1-r0)\n(5/18) Purging patch (2.7.6-r7)\n(6/18) Purging g++ (10.2.1_pre1-r3)\n(7/18) Purging gcc (10.2.1_pre1-r3)\n(8/18) Purging binutils (2.35.2-r1)\n(9/18) Purging libatomic (10.2.1_pre1-r3)\n(10/18) Purging libgomp (10.2.1_pre1-r3)\n(11/18) Purging libgphobos (10.2.1_pre1-r3)\n(12/18) Purging libc-dev (0.7.2-r3)\n(13/18) Purging musl-dev (1.2.2-r1)\n(14/18) Purging make (4.3-r0)\n(15/18) Purging libmagic (5.39-r0)\n(16/18) Purging isl22 (0.22-r0)\n(17/18) Purging mpc1 (1.2.0-r0)\n(18/18) Purging mpfr4 (4.1.0-r0)\nExecuting busybox-1.32.1-r6.trigger\nOK: 84 MiB in 53 packages\nRemoving intermediate container 65e2fd232b7e\n ---> 73a562f311cc\nStep 7/11 : COPY package.json /usr/src/app/\n ---> d8f6fb763727\nStep 8/11 : RUN yarn install --ignore-scripts\n ---> Running in 2ddef72fe643\nyarn install v1.22.10\ninfo No lockfile found.\n[1/4] Resolving packages...\n[2/4] Fetching packages...\n[3/4] Linking dependencies...\n[4/4] Building fresh packages...\n\u001b[91mwarning Ignored scripts due to flag.\n\u001b[0msuccess Saved lockfile.\nDone in 2.00s.\nRemoving intermediate container 2ddef72fe643\n ---> 9404eebac438\nStep 9/11 : COPY . /usr/src/app\n ---> 186bc5d3872b\nStep 10/11 : EXPOSE 3000\n ---> Running in 5f6ad9512e15\nRemoving intermediate container 5f6ad9512e15\n ---> eb33b83737f5\nStep 11/11 : CMD [\"puma\", \"-t\", \"16:16\", \"-p\", \"3000\"]\n ---> Running in 26758fd9ce39\nRemoving intermediate container 26758fd9ce39\n ---> 79b7d9d1be79\nSuccessfully built 79b7d9d1be79\nSuccessfully tagged driveshaft:latest\n","stderr":"","imageSize":248787181},"repair":{"violations":[{"name":"mkdirUsrSrcThenRemove","position":{"start":8,"end":8,"columnStart":4,"columnEnd":25}},{"name":"apkAddUseNoCache","position":{"start":13,"end":14,"columnStart":4,"columnEnd":27}},{"name":"apkAddUseNoCache","position":{"start":15,"end":15,"columnStart":9,"columnEnd":101}}],"repairedDockerfile":"FROM ruby:2.5-alpine\n\n# Configure bundler\nRUN \\\n  bundle config --global frozen 1 && \\\n  bundle config --global build.nokogiri --use-system-libraries\n\n# Set the working directory\nRUN mkdir -p /usr/src/app\nWORKDIR /usr/src/app\n\n# Install gems and npm modules\nCOPY Gemfile Gemfile.lock package.json /usr/src/app/\nRUN apk --update --no-cache add --virtual .build-deps \\\n        build-base g++ make \\\n      && apk add --no-cache yarn --update-cache --repository http://dl-cdn.alpinelinux.org/alpine/edge/community \\\n      && apk add --no-cache \\\n        libxml2 libxslt-dev git \\\n      && bundle install --jobs `grep -c '^processor' /proc/cpuinfo` \\\n      && apk del .build-deps\n\n# Install npm packages\nCOPY package.json /usr/src/app/\nRUN yarn install --ignore-scripts\n\n# Copy the rest of the application source\nCOPY . /usr/src/app\n\n# Run the server\nEXPOSE 3000\nCMD [\"puma\", \"-t\", \"16:16\", \"-p\", \"3000\"]\n"},"repairedBuild":{"startTimestamp":1672262096313,"endTimestamp":1672262168442,"error":null,"stdout":"Sending build context to Docker daemon  196.1kB\r\r\nStep 1/11 : FROM ruby:2.5-alpine\n ---> 67ca994ddbc8\nStep 2/11 : RUN   bundle config --global frozen 1 &&   bundle config --global build.nokogiri --use-system-libraries\n ---> Running in fa4cb2107d14\nRemoving intermediate container fa4cb2107d14\n ---> 47b087d2125e\nStep 3/11 : RUN mkdir -p /usr/src/app\n ---> Running in 2833bfe065c6\nRemoving intermediate container 2833bfe065c6\n ---> 0b897d17cd6f\nStep 4/11 : WORKDIR /usr/src/app\n ---> Running in fba6f7708236\nRemoving intermediate container fba6f7708236\n ---> 426ff3188b96\nStep 5/11 : COPY Gemfile Gemfile.lock package.json /usr/src/app/\n ---> 88987d7c7710\nStep 6/11 : RUN apk --update --no-cache add --virtual .build-deps         build-base g++ make       && apk add --no-cache yarn --update-cache --repository http://dl-cdn.alpinelinux.org/alpine/edge/community       && apk add --no-cache         libxml2 libxslt-dev git       && bundle install --jobs `grep -c '^processor' /proc/cpuinfo`       && apk del .build-deps\n ---> Running in b2d67795a128\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.13/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.13/community/x86_64/APKINDEX.tar.gz\n(1/19) Upgrading musl (1.2.2-r0 -> 1.2.2-r1)\n(2/19) Installing binutils (2.35.2-r1)\n(3/19) Installing libmagic (5.39-r0)\n(4/19) Installing file (5.39-r0)\n(5/19) Installing libgomp (10.2.1_pre1-r3)\n(6/19) Installing libatomic (10.2.1_pre1-r3)\n(7/19) Installing libgphobos (10.2.1_pre1-r3)\n(8/19) Installing isl22 (0.22-r0)\n(9/19) Installing mpfr4 (4.1.0-r0)\n(10/19) Installing mpc1 (1.2.0-r0)\n(11/19) Installing gcc (10.2.1_pre1-r3)\n(12/19) Installing musl-dev (1.2.2-r1)\n(13/19) Installing libc-dev (0.7.2-r3)\n(14/19) Installing g++ (10.2.1_pre1-r3)\n(15/19) Installing make (4.3-r0)\n(16/19) Installing fortify-headers (1.1-r0)\n(17/19) Installing patch (2.7.6-r7)\n(18/19) Installing build-base (0.5-r3)\n(19/19) Installing .build-deps (20221228.211509)\nExecuting busybox-1.32.1-r6.trigger\nOK: 207 MiB in 54 packages\nfetch http://dl-cdn.alpinelinux.org/alpine/edge/community/x86_64/APKINDEX.tar.gz\n\u001b[91mWARNING: Ignoring http://dl-cdn.alpinelinux.org/alpine/edge/community: UNTRUSTED signature\n\u001b[0mfetch https://dl-cdn.alpinelinux.org/alpine/v3.13/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.13/community/x86_64/APKINDEX.tar.gz\n(1/5) Installing nghttp2-libs (1.42.0-r1)\n(2/5) Installing brotli-libs (1.0.9-r3)\n(3/5) Installing c-ares (1.17.2-r0)\n(4/5) Installing nodejs (14.20.1-r0)\n(5/5) Installing yarn (1.22.10-r0)\nExecuting busybox-1.32.1-r6.trigger\nOK: 249 MiB in 59 packages\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.13/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.13/community/x86_64/APKINDEX.tar.gz\n(1/12) Installing libcurl (7.79.1-r3)\n(2/12) Installing expat (2.2.10-r8)\n(3/12) Installing pcre2 (10.36-r1)\n(4/12) Installing git (2.30.6-r0)\n(5/12) Installing xz-libs (5.2.5-r1)\n(6/12) Installing libxml2 (2.9.14-r2)\n(7/12) Installing libgpg-error (1.41-r0)\n(8/12) Installing libgcrypt (1.8.8-r1)\n(9/12) Installing libxslt (1.1.35-r0)\n(10/12) Installing xz-dev (5.2.5-r1)\n(11/12) Installing libxml2-dev (2.9.14-r2)\n(12/12) Installing libxslt-dev (1.1.35-r0)\nExecuting busybox-1.32.1-r6.trigger\nOK: 271 MiB in 71 packages\nFetching gem metadata from https://rubygems.org/........\nFetching rake 12.0.0\nInstalling rake 12.0.0\nUsing bundler 1.17.3\nFetching declarative 0.0.9\nFetching declarative-option 0.1.0\nFetching os 0.9.6\nFetching public_suffix 2.0.5\nFetching jmespath 1.3.1\nFetching backports 3.11.3\nFetching daemons 1.2.4\nFetching multipart-post 2.0.0\nFetching puma 3.9.1\nFetching memoist 0.16.0\nFetching minitest 5.11.3\nFetching thread_safe 0.3.6\nFetching builder 3.2.3\nFetching httpclient 2.8.3\nFetching mime-types-data 3.2016.0521\nFetching uber 0.1.0\nFetching eventmachine 1.2.5\nFetching little-plugger 1.1.4\nFetching concurrent-ruby 1.0.5\nFetching archieml 0.3.0\nFetching multi_json 1.12.1\nFetching retriable 3.1.1\nFetching mini_portile2 2.3.0\nFetching mustermann 1.0.2\nFetching jwt 1.5.6\nFetching tilt 2.0.8\nFetching rack 2.0.3\nInstalling uber 0.1.0\nInstalling multipart-post 2.0.0\nInstalling retriable 3.1.1\nInstalling daemons 1.2.4\nInstalling memoist 0.16.0\nInstalling little-plugger 1.1.4\nInstalling jmespath 1.3.1\nInstalling declarative-option 0.1.0\nInstalling archieml 0.3.0\nInstalling builder 3.2.3\nInstalling os 0.9.6\nInstalling declarative 0.0.9\nInstalling multi_json 1.12.1\nInstalling mini_portile2 2.3.0\nInstalling jwt 1.5.6\nInstalling tilt 2.0.8\nInstalling mustermann 1.0.2\nInstalling mime-types-data 3.2016.0521\nInstalling public_suffix 2.0.5\nInstalling thread_safe 0.3.6\nInstalling minitest 5.11.3\nInstalling puma 3.9.1 with native extensions\nInstalling backports 3.11.3\nInstalling concurrent-ruby 1.0.5\nInstalling eventmachine 1.2.5 with native extensions\nInstalling rack 2.0.3\nInstalling httpclient 2.8.3\nFetching faraday 0.13.0\nInstalling faraday 0.13.0\nFetching mime-types 3.1\nFetching representable 3.0.4\nFetching logging 2.2.2\nInstalling mime-types 3.1\nInstalling representable 3.0.4\nInstalling logging 2.2.2\nFetching addressable 2.5.1\nFetching nokogiri 1.8.2\nFetching aws-sdk-core 2.0.48\nInstalling addressable 2.5.1\nInstalling aws-sdk-core 2.0.48\nFetching tzinfo 1.2.5\nFetching signet 0.7.3\nInstalling signet 0.7.3\nInstalling tzinfo 1.2.5\nFetching googleauth 0.5.3\nInstalling googleauth 0.5.3\nFetching i18n 1.0.1\nInstalling i18n 1.0.1\nFetching google-api-client 0.11.3\nInstalling nokogiri 1.8.2 with native extensions\nFetching rack-flash3 1.0.5\nFetching rack-protection 2.0.3\nInstalling rack-flash3 1.0.5\nInstalling rack-protection 2.0.3\nFetching sinatra 2.0.3\nInstalling google-api-client 0.11.3\nInstalling sinatra 2.0.3\nFetching activesupport 5.2.0\nInstalling activesupport 5.2.0\nFetching aws-sdk-resources 2.0.48\nInstalling aws-sdk-resources 2.0.48\nFetching aws-sdk 2.0.48\nInstalling aws-sdk 2.0.48\nFetching sinatra-contrib 2.0.3\nInstalling sinatra-contrib 2.0.3\nFetching thin 1.7.2\nInstalling thin 1.7.2 with native extensions\nBundle complete! 11 Gemfile dependencies, 49 gems now installed.\nUse `bundle info [gemname]` to see where a bundled gem is installed.\n\u001b[91mWARNING: Ignoring https://dl-cdn.alpinelinux.org/alpine/v3.13/main: No such file or directory\nWARNING: Ignoring https://dl-cdn.alpinelinux.org/alpine/v3.13/community: No such file or directory\n\u001b[0m(1/18) Purging .build-deps (20221228.211509)\n(2/18) Purging build-base (0.5-r3)\n(3/18) Purging file (5.39-r0)\n(4/18) Purging fortify-headers (1.1-r0)\n(5/18) Purging patch (2.7.6-r7)\n(6/18) Purging g++ (10.2.1_pre1-r3)\n(7/18) Purging gcc (10.2.1_pre1-r3)\n(8/18) Purging binutils (2.35.2-r1)\n(9/18) Purging libatomic (10.2.1_pre1-r3)\n(10/18) Purging libgomp (10.2.1_pre1-r3)\n(11/18) Purging libgphobos (10.2.1_pre1-r3)\n(12/18) Purging libc-dev (0.7.2-r3)\n(13/18) Purging musl-dev (1.2.2-r1)\n(14/18) Purging make (4.3-r0)\n(15/18) Purging libmagic (5.39-r0)\n(16/18) Purging isl22 (0.22-r0)\n(17/18) Purging mpc1 (1.2.0-r0)\n(18/18) Purging mpfr4 (4.1.0-r0)\nExecuting busybox-1.32.1-r6.trigger\nOK: 84 MiB in 53 packages\nRemoving intermediate container b2d67795a128\n ---> a1450f6f6555\nStep 7/11 : COPY package.json /usr/src/app/\n ---> 1e828fcc5ab2\nStep 8/11 : RUN yarn install --ignore-scripts\n ---> Running in 7d7c24e6834f\nyarn install v1.22.10\ninfo No lockfile found.\n[1/4] Resolving packages...\n[2/4] Fetching packages...\n[3/4] Linking dependencies...\n[4/4] Building fresh packages...\n\u001b[91mwarning Ignored scripts due to flag.\n\u001b[0msuccess Saved lockfile.\nDone in 2.06s.\nRemoving intermediate container 7d7c24e6834f\n ---> 5c4cf39f72a8\nStep 9/11 : COPY . /usr/src/app\n ---> 99dfc32fc539\nStep 10/11 : EXPOSE 3000\n ---> Running in 669c1ff5598a\nRemoving intermediate container 669c1ff5598a\n ---> 0def4d54ad1f\nStep 11/11 : CMD [\"puma\", \"-t\", \"16:16\", \"-p\", \"3000\"]\n ---> Running in 413f3845c031\nRemoving intermediate container 413f3845c031\n ---> f18a7651114d\nSuccessfully built f18a7651114d\nSuccessfully tagged driveshaft:latest\n","stderr":"","imageSize":246798991},"endTime":1672262168869}