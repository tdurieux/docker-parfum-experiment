{"repository":"https://github.com/evrythng/scanthng.js","dockerfilePath":"Dockerfile","startTime":1672811169383,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/evrythng/scanthng.js'...\n","error":null,"commit":"d4594a394a9ed99754e3aa0631d18c5c8e2435b9"},"originalBuild":{"startTimestamp":1672811170363,"endTimestamp":1672811238596,"error":null,"stdout":"Sending build context to Docker daemon  1.652MB\r\r\nStep 1/9 : FROM node:12-alpine\n ---> bb6d28039b8c\nStep 2/9 : RUN apk add --no-cache python3 py3-pip\n ---> Running in d18a64810148\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/community/x86_64/APKINDEX.tar.gz\n(1/37) Installing libbz2 (1.0.8-r1)\n(2/37) Installing expat (2.5.0-r0)\n(3/37) Installing libffi (3.4.2-r1)\n(4/37) Installing gdbm (1.22-r0)\n(5/37) Installing xz-libs (5.2.5-r1)\n(6/37) Installing mpdecimal (2.5.1-r1)\n(7/37) Installing ncurses-terminfo-base (6.3_p20211120-r1)\n(8/37) Installing ncurses-libs (6.3_p20211120-r1)\n(9/37) Installing readline (8.1.1-r0)\n(10/37) Installing sqlite-libs (3.36.0-r0)\n(11/37) Installing python3 (3.9.16-r0)\n(12/37) Installing py3-appdirs (1.4.4-r2)\n(13/37) Installing py3-certifi (2020.12.5-r1)\n(14/37) Installing py3-charset-normalizer (2.0.7-r0)\n(15/37) Installing py3-idna (3.3-r0)\n(16/37) Installing py3-urllib3 (1.26.7-r0)\n(17/37) Installing py3-requests (2.26.0-r1)\n(18/37) Installing py3-msgpack (1.0.2-r1)\n(19/37) Installing py3-lockfile (0.12.2-r4)\n(20/37) Installing py3-cachecontrol (0.12.10-r0)\n(21/37) Installing py3-colorama (0.4.4-r1)\n(22/37) Installing py3-contextlib2 (21.6.0-r1)\n(23/37) Installing py3-distlib (0.3.3-r0)\n(24/37) Installing py3-distro (1.6.0-r0)\n(25/37) Installing py3-six (1.16.0-r0)\n(26/37) Installing py3-webencodings (0.5.1-r4)\n(27/37) Installing py3-html5lib (1.1-r1)\n(28/37) Installing py3-parsing (2.4.7-r2)\n(29/37) Installing py3-packaging (20.9-r1)\n(30/37) Installing py3-tomli (1.2.2-r0)\n(31/37) Installing py3-pep517 (0.12.0-r0)\n(32/37) Installing py3-progress (1.6-r0)\n(33/37) Installing py3-retrying (1.3.3-r2)\n(34/37) Installing py3-ordered-set (4.0.2-r2)\n(35/37) Installing py3-setuptools (52.0.0-r4)\n(36/37) Installing py3-toml (0.10.2-r2)\n(37/37) Installing py3-pip (20.3.4-r1)\nExecuting busybox-1.34.1-r5.trigger\nOK: 76 MiB in 53 packages\nRemoving intermediate container d18a64810148\n ---> 9371a69d9ca3\nStep 3/9 : RUN pip3 install awscli --upgrade --user\n ---> Running in 5d9f90f1f120\nCollecting awscli\n  Downloading awscli-1.27.42-py3-none-any.whl (4.0 MB)\nRequirement already satisfied: colorama<0.4.5,>=0.2.5 in /usr/lib/python3.9/site-packages (from awscli) (0.4.4)\nCollecting docutils<0.17,>=0.10\n  Downloading docutils-0.16-py2.py3-none-any.whl (548 kB)\nCollecting rsa<4.8,>=3.1.2\n  Downloading rsa-4.7.2-py3-none-any.whl (34 kB)\nCollecting s3transfer<0.7.0,>=0.6.0\n  Downloading s3transfer-0.6.0-py3-none-any.whl (79 kB)\nCollecting PyYAML<5.5,>=3.10\n  Downloading PyYAML-5.4.1.tar.gz (175 kB)\n  Installing build dependencies: started\n  Installing build dependencies: finished with status 'done'\n  Getting requirements to build wheel: started\n  Getting requirements to build wheel: finished with status 'done'\n    Preparing wheel metadata: started\n    Preparing wheel metadata: finished with status 'done'\nCollecting botocore==1.29.42\n  Downloading botocore-1.29.42-py3-none-any.whl (10.3 MB)\nCollecting python-dateutil<3.0.0,>=2.1\n  Downloading python_dateutil-2.8.2-py2.py3-none-any.whl (247 kB)\nRequirement already satisfied: urllib3<1.27,>=1.25.4 in /usr/lib/python3.9/site-packages (from botocore==1.29.42->awscli) (1.26.7)\nCollecting jmespath<2.0.0,>=0.7.1\n  Downloading jmespath-1.0.1-py3-none-any.whl (20 kB)\nRequirement already satisfied: six>=1.5 in /usr/lib/python3.9/site-packages (from python-dateutil<3.0.0,>=2.1->botocore==1.29.42->awscli) (1.16.0)\nCollecting pyasn1>=0.1.3\n  Downloading pyasn1-0.4.8-py2.py3-none-any.whl (77 kB)\nBuilding wheels for collected packages: PyYAML\n  Building wheel for PyYAML (PEP 517): started\n  Building wheel for PyYAML (PEP 517): finished with status 'done'\n  Created wheel for PyYAML: filename=PyYAML-5.4.1-cp39-cp39-linux_x86_64.whl size=45656 sha256=d43aeb332f7948c22e9883c7ee6df1277346443ed07d3daecad1bdd4e5585b87\n  Stored in directory: /root/.cache/pip/wheels/b7/a5/c4/504d913c2a55bb09c607541578ec5f844d1ff33467abe93ba5\nSuccessfully built PyYAML\nInstalling collected packages: python-dateutil, jmespath, pyasn1, botocore, s3transfer, rsa, PyYAML, docutils, awscli\n\u001b[91m  WARNING: The scripts pyrsa-decrypt, pyrsa-encrypt, pyrsa-keygen, pyrsa-priv2pub, pyrsa-sign and pyrsa-verify are installed in '/root/.local/bin' which is not on PATH.\n  Consider adding this directory to PATH or, if you prefer to suppress this warning, use --no-warn-script-location.\n\u001b[0mSuccessfully installed PyYAML-5.4.1 awscli-1.27.42 botocore-1.29.42 docutils-0.16 jmespath-1.0.1 pyasn1-0.4.8 python-dateutil-2.8.2 rsa-4.7.2 s3transfer-0.6.0\nRemoving intermediate container 5d9f90f1f120\n ---> 924e1ca6fa74\nStep 4/9 : WORKDIR /srv\n ---> Running in 1bc9b51ea393\nRemoving intermediate container 1bc9b51ea393\n ---> f69511e011d3\nStep 5/9 : COPY package* /srv/\n ---> 06333708255b\nStep 6/9 : RUN npm ci\n ---> Running in 3851b2a2353a\nadded 421 packages in 5.073s\nRemoving intermediate container 3851b2a2353a\n ---> 2237407aee44\nStep 7/9 : COPY . /srv\n ---> 2774b11d8b9a\nStep 8/9 : RUN npm run build\n ---> Running in 3283368e0634\n\n> scanthng@4.13.0 build /srv\n> npm run lint && webpack --config webpack.config.js --mode production\n\n\n> scanthng@4.13.0 lint /srv\n> eslint --max-warnings 0 --ext .js ./src\n\n\u001b[91mBrowserslist: caniuse-lite is outdated. Please run:\n  npx browserslist@latest --update-db\n  Why you should do it regularly: https://github.com/browserslist/browserslist#browsers-data-updating\n\u001b[0masset scanthng.js 15.2 KiB [emitted] [minimized] (name: main)\n./src/index.js 12 KiB [built] [code generated]\n./src/utils.js 5.78 KiB [built] [code generated]\n./src/media.js 7.95 KiB [built] [code generated]\n./src/stream.js 15.9 KiB [built] [code generated]\n./src/convert.js 2.22 KiB [built] [code generated]\nwebpack 5.60.0 compiled successfully in 1450 ms\nRemoving intermediate container 3283368e0634\n ---> aba342bcc69d\nStep 9/9 : CMD [\"sh\", \"-c\", \"~/.local/bin/aws s3 cp /srv/dist/scanthng.js s3://$BUCKET/js/scanthng/$VERSION/scanthng-$VERSION.js --acl public-read\"]\n ---> Running in e9b1d4ac5eed\nRemoving intermediate container e9b1d4ac5eed\n ---> 49e3c4a1cc02\nSuccessfully built 49e3c4a1cc02\nSuccessfully tagged scanthng.js:latest\n","stderr":"","imageSize":310868936},"repair":{"violations":[{"name":"pipUseNoCacheDir","position":{"start":4,"end":4,"columnStart":4,"columnEnd":40}}],"repairedDockerfile":"FROM node:12-alpine\n\n# Install dependencies\nRUN apk add --no-cache python3 py3-pip\nRUN pip3 install --no-cache-dir awscli --upgrade --user\n\nWORKDIR /srv\n\n# npm dependencies\nCOPY package* /srv/\nRUN npm ci\n\nCOPY . /srv\n\n# Build\nRUN npm run build\n\n# Deploy\nCMD [\"sh\", \"-c\", \"~/.local/bin/aws s3 cp /srv/dist/scanthng.js s3://$BUCKET/js/scanthng/$VERSION/scanthng-$VERSION.js --acl public-read\"]\n"},"repairedBuild":{"startTimestamp":1672811239907,"endTimestamp":1672811299822,"error":null,"stdout":"Sending build context to Docker daemon  1.652MB\r\r\nStep 1/9 : FROM node:12-alpine\n ---> bb6d28039b8c\nStep 2/9 : RUN apk add --no-cache python3 py3-pip\n ---> Running in d040ad41e4a0\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/community/x86_64/APKINDEX.tar.gz\n(1/37) Installing libbz2 (1.0.8-r1)\n(2/37) Installing expat (2.5.0-r0)\n(3/37) Installing libffi (3.4.2-r1)\n(4/37) Installing gdbm (1.22-r0)\n(5/37) Installing xz-libs (5.2.5-r1)\n(6/37) Installing mpdecimal (2.5.1-r1)\n(7/37) Installing ncurses-terminfo-base (6.3_p20211120-r1)\n(8/37) Installing ncurses-libs (6.3_p20211120-r1)\n(9/37) Installing readline (8.1.1-r0)\n(10/37) Installing sqlite-libs (3.36.0-r0)\n(11/37) Installing python3 (3.9.16-r0)\n(12/37) Installing py3-appdirs (1.4.4-r2)\n(13/37) Installing py3-certifi (2020.12.5-r1)\n(14/37) Installing py3-charset-normalizer (2.0.7-r0)\n(15/37) Installing py3-idna (3.3-r0)\n(16/37) Installing py3-urllib3 (1.26.7-r0)\n(17/37) Installing py3-requests (2.26.0-r1)\n(18/37) Installing py3-msgpack (1.0.2-r1)\n(19/37) Installing py3-lockfile (0.12.2-r4)\n(20/37) Installing py3-cachecontrol (0.12.10-r0)\n(21/37) Installing py3-colorama (0.4.4-r1)\n(22/37) Installing py3-contextlib2 (21.6.0-r1)\n(23/37) Installing py3-distlib (0.3.3-r0)\n(24/37) Installing py3-distro (1.6.0-r0)\n(25/37) Installing py3-six (1.16.0-r0)\n(26/37) Installing py3-webencodings (0.5.1-r4)\n(27/37) Installing py3-html5lib (1.1-r1)\n(28/37) Installing py3-parsing (2.4.7-r2)\n(29/37) Installing py3-packaging (20.9-r1)\n(30/37) Installing py3-tomli (1.2.2-r0)\n(31/37) Installing py3-pep517 (0.12.0-r0)\n(32/37) Installing py3-progress (1.6-r0)\n(33/37) Installing py3-retrying (1.3.3-r2)\n(34/37) Installing py3-ordered-set (4.0.2-r2)\n(35/37) Installing py3-setuptools (52.0.0-r4)\n(36/37) Installing py3-toml (0.10.2-r2)\n(37/37) Installing py3-pip (20.3.4-r1)\nExecuting busybox-1.34.1-r5.trigger\nOK: 76 MiB in 53 packages\nRemoving intermediate container d040ad41e4a0\n ---> 3e6445230d09\nStep 3/9 : RUN pip3 install --no-cache-dir awscli --upgrade --user\n ---> Running in 4d2548ef09c2\nCollecting awscli\n  Downloading awscli-1.27.42-py3-none-any.whl (4.0 MB)\nCollecting docutils<0.17,>=0.10\n  Downloading docutils-0.16-py2.py3-none-any.whl (548 kB)\nCollecting PyYAML<5.5,>=3.10\n  Downloading PyYAML-5.4.1.tar.gz (175 kB)\n  Installing build dependencies: started\n  Installing build dependencies: finished with status 'done'\n  Getting requirements to build wheel: started\n  Getting requirements to build wheel: finished with status 'done'\n    Preparing wheel metadata: started\n    Preparing wheel metadata: finished with status 'done'\nCollecting botocore==1.29.42\n  Downloading botocore-1.29.42-py3-none-any.whl (10.3 MB)\nCollecting s3transfer<0.7.0,>=0.6.0\n  Downloading s3transfer-0.6.0-py3-none-any.whl (79 kB)\nCollecting rsa<4.8,>=3.1.2\n  Downloading rsa-4.7.2-py3-none-any.whl (34 kB)\nRequirement already satisfied: colorama<0.4.5,>=0.2.5 in /usr/lib/python3.9/site-packages (from awscli) (0.4.4)\nRequirement already satisfied: urllib3<1.27,>=1.25.4 in /usr/lib/python3.9/site-packages (from botocore==1.29.42->awscli) (1.26.7)\nCollecting jmespath<2.0.0,>=0.7.1\n  Downloading jmespath-1.0.1-py3-none-any.whl (20 kB)\nCollecting python-dateutil<3.0.0,>=2.1\n  Downloading python_dateutil-2.8.2-py2.py3-none-any.whl (247 kB)\nRequirement already satisfied: six>=1.5 in /usr/lib/python3.9/site-packages (from python-dateutil<3.0.0,>=2.1->botocore==1.29.42->awscli) (1.16.0)\nCollecting pyasn1>=0.1.3\n  Downloading pyasn1-0.4.8-py2.py3-none-any.whl (77 kB)\nBuilding wheels for collected packages: PyYAML\n  Building wheel for PyYAML (PEP 517): started\n  Building wheel for PyYAML (PEP 517): finished with status 'done'\n  Created wheel for PyYAML: filename=PyYAML-5.4.1-cp39-cp39-linux_x86_64.whl size=45656 sha256=e3862dddc6df4e062865a558866c08f9c4be397325979f6cdb46224c9a33d488\n  Stored in directory: /tmp/pip-ephem-wheel-cache-__neleho/wheels/b7/a5/c4/504d913c2a55bb09c607541578ec5f844d1ff33467abe93ba5\nSuccessfully built PyYAML\nInstalling collected packages: python-dateutil, jmespath, pyasn1, botocore, s3transfer, rsa, PyYAML, docutils, awscli\n\u001b[91m  WARNING: The scripts pyrsa-decrypt, pyrsa-encrypt, pyrsa-keygen, pyrsa-priv2pub, pyrsa-sign and pyrsa-verify are installed in '/root/.local/bin' which is not on PATH.\n  Consider adding this directory to PATH or, if you prefer to suppress this warning, use --no-warn-script-location.\n\u001b[0mSuccessfully installed PyYAML-5.4.1 awscli-1.27.42 botocore-1.29.42 docutils-0.16 jmespath-1.0.1 pyasn1-0.4.8 python-dateutil-2.8.2 rsa-4.7.2 s3transfer-0.6.0\nRemoving intermediate container 4d2548ef09c2\n ---> ad3c2ba26eae\nStep 4/9 : WORKDIR /srv\n ---> Running in a032880c54bc\nRemoving intermediate container a032880c54bc\n ---> ec46ac330c33\nStep 5/9 : COPY package* /srv/\n ---> 932bb96c5e92\nStep 6/9 : RUN npm ci\n ---> Running in 332848d91bac\nadded 421 packages in 3.459s\nRemoving intermediate container 332848d91bac\n ---> d3286f21611b\nStep 7/9 : COPY . /srv\n ---> 77a7d800c016\nStep 8/9 : RUN npm run build\n ---> Running in 160d2904f6a6\n\n> scanthng@4.13.0 build /srv\n> npm run lint && webpack --config webpack.config.js --mode production\n\n\n> scanthng@4.13.0 lint /srv\n> eslint --max-warnings 0 --ext .js ./src\n\n\u001b[91mBrowserslist: caniuse-lite is outdated. Please run:\n  npx browserslist@latest --update-db\n  Why you should do it regularly: https://github.com/browserslist/browserslist#browsers-data-updating\n\u001b[0masset scanthng.js 15.2 KiB [emitted] [minimized] (name: main)\n./src/index.js 12 KiB [built] [code generated]\n./src/utils.js 5.78 KiB [built] [code generated]\n./src/media.js 7.95 KiB [built] [code generated]\n./src/stream.js 15.9 KiB [built] [code generated]\n./src/convert.js 2.22 KiB [built] [code generated]\nwebpack 5.60.0 compiled successfully in 1502 ms\nRemoving intermediate container 160d2904f6a6\n ---> 6d0acb399b8a\nStep 9/9 : CMD [\"sh\", \"-c\", \"~/.local/bin/aws s3 cp /srv/dist/scanthng.js s3://$BUCKET/js/scanthng/$VERSION/scanthng-$VERSION.js --acl public-read\"]\n ---> Running in 08739d9e4219\nRemoving intermediate container 08739d9e4219\n ---> 67430519464e\nSuccessfully built 67430519464e\nSuccessfully tagged scanthng.js:latest\n","stderr":"","imageSize":294719675},"endTime":1672811300470}