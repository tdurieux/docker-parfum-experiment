{"repository":"https://github.com/yunyoujun/cook","dockerfilePath":"Dockerfile","startTime":1673008269957,"endTime":1673008740222,"clone":{"startTime":1673008269957,"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/yunyoujun/cook'...\n","error":null,"endTime":1673008270734,"commit":"1f5d2802417ccce9895d81a15f6fc31f00c7a925"},"originalBuild":{"startTime":1673008270810,"endTime":1673008502786,"error":null,"stdout":"Sending build context to Docker daemon  712.2kB\r\r\nStep 1/9 : FROM node:lts-alpine AS builder\nlts-alpine: Pulling from library/node\nDigest: sha256:a136ed7b0df71082cdb171f36d640ea3b392a5c70401c642326acee767b8c540\nStatus: Downloaded newer image for node:lts-alpine\n ---> 6d7b7852bcd3\nStep 2/9 : RUN apk update\n ---> Running in f4bbb8ec0fc8\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\nv3.17.0-332-g13963e2526 [https://dl-cdn.alpinelinux.org/alpine/v3.17/main]\nv3.17.0-336-ga9d27aafa7 [https://dl-cdn.alpinelinux.org/alpine/v3.17/community]\nOK: 17815 distinct packages available\nRemoving intermediate container f4bbb8ec0fc8\n ---> ac323285e1f0\nStep 3/9 : RUN npm install -g pnpm\n ---> Running in 48e816f5a32f\n\nadded 1 package, and audited 2 packages in 949ms\n\n1 package is looking for funding\n  run `npm fund` for details\n\nfound 0 vulnerabilities\n\u001b[91mnpm\u001b[0m\u001b[91m \u001b[0m\u001b[91mnotice\u001b[0m\u001b[91m \n\u001b[0m\u001b[91mnpm notice New major version of npm available! 8.19.2 -> 9.2.0\nnpm\u001b[0m\u001b[91m notice\u001b[0m\u001b[91m Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm notice Run `npm install -g npm@9.2.0` to update!\nnpm notice\u001b[0m\u001b[91m \n\u001b[0mRemoving intermediate container 48e816f5a32f\n ---> 42a095d863f4\nStep 4/9 : WORKDIR /app\n ---> Running in ad4a83d2b5e0\nRemoving intermediate container ad4a83d2b5e0\n ---> 8986a0049769\nStep 5/9 : COPY . .\n ---> c551154e2a1b\nStep 6/9 : RUN pnpm install && pnpm run build\n ---> Running in 609be33ad32d\nLockfile is up to date, resolution step is skipped\nProgress: resolved 1, reused 0, downloaded 0, added 0\nPackages: +713\n++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++\nPackages are hard linked from the content-addressable store to the virtual store.\n  Content-addressable store is at: /root/.local/share/pnpm/store/v3\n  Virtual store is at:             node_modules/.pnpm\nProgress: resolved 713, reused 0, downloaded 23, added 23\nProgress: resolved 713, reused 0, downloaded 86, added 79\nProgress: resolved 713, reused 0, downloaded 181, added 176\nProgress: resolved 713, reused 0, downloaded 261, added 254\nProgress: resolved 713, reused 0, downloaded 318, added 316\nProgress: resolved 713, reused 0, downloaded 354, added 351\nProgress: resolved 713, reused 0, downloaded 405, added 398\nProgress: resolved 713, reused 0, downloaded 405, added 399\nProgress: resolved 713, reused 0, downloaded 487, added 486\nProgress: resolved 713, reused 0, downloaded 557, added 557\nProgress: resolved 713, reused 0, downloaded 666, added 663\nProgress: resolved 713, reused 0, downloaded 709, added 710\nProgress: resolved 713, reused 0, downloaded 711, added 712\n.../core-js@3.26.1/node_modules/core-js postinstall$ node -e \"try{require('./postinstall')}catch(e){}\"\n.../node_modules/vue-demi postinstall$ node ./scripts/postinstall.js\n.../core-js@3.26.1/node_modules/core-js postinstall: Thank you for using core-js ( https://github.com/zloirock/core-js ) for polyfilling JavaScript standard library!\n.../core-js@3.26.1/node_modules/core-js postinstall: The project needs your help! Please consider supporting of core-js:\n.../core-js@3.26.1/node_modules/core-js postinstall: > https://opencollective.com/core-js \n.../core-js@3.26.1/node_modules/core-js postinstall: > https://patreon.com/zloirock \n.../core-js@3.26.1/node_modules/core-js postinstall: > bitcoin: bc1qlea7544qtsmj2rayg0lthvza9fau63ux0fstcz \n.../core-js@3.26.1/node_modules/core-js postinstall: Also, the author of core-js ( https://github.com/zloirock ) is looking for a good job -)\n.../core-js@3.26.1/node_modules/core-js postinstall: Done\n.../node_modules/vue-demi postinstall: Done\nProgress: resolved 713, reused 0, downloaded 712, added 713, done\n.../esbuild@0.15.15/node_modules/esbuild postinstall$ node install.js\n.../esbuild@0.16.9/node_modules/esbuild postinstall$ node install.js\n.../esbuild@0.15.15/node_modules/esbuild postinstall: Done\n.../esbuild@0.16.9/node_modules/esbuild postinstall: Done\n\ndependencies:\n+ @gtm-support/vue-gtm 1.6.0\n+ @vueuse/core 9.7.0\n+ @vueuse/head 1.0.22\n+ nprogress 0.2.0\n+ pinia 2.0.28\n+ prism-theme-vars 0.2.4\n+ vue 3.2.45\n+ vue-about-me 1.2.7\n+ vue-demi 0.13.11\n+ vue-router 4.1.6\n\ndevDependencies:\n+ @antfu/eslint-config 0.34.0\n+ @iconify-json/fe 1.1.3\n+ @iconify-json/gg 1.1.3\n+ @iconify-json/ic 1.1.10\n+ @iconify-json/mdi 1.1.38\n+ @iconify-json/ri 1.1.4\n+ @pinia/testing 0.0.14\n+ @types/markdown-it-link-attributes 3.0.1\n+ @types/nprogress 0.2.0\n+ @vitejs/plugin-legacy 3.0.1\n+ @vitejs/plugin-vue 4.0.0\n+ @vue/test-utils 2.2.6\n+ consola 2.15.3\n+ critters 0.0.16\n+ cross-env 7.0.3\n+ eslint 8.30.0\n+ https-localhost 4.7.1\n+ markdown-it-link-attributes 4.0.1\n+ markdown-it-prism 2.3.0\n+ pnpm 7.18.2\n+ sass 1.57.0\n+ star-markdown-css 0.4.1\n+ terser 5.16.1\n+ tsx 3.12.1\n+ typescript 4.9.4\n+ unocss 0.47.6\n+ unplugin-auto-import 0.12.1\n+ unplugin-vue-components 0.22.12\n+ vite 4.0.2\n+ vite-plugin-inspect 0.7.10\n+ vite-plugin-pages 0.28.0\n+ vite-plugin-vue-layouts 0.7.0\n+ vite-plugin-vue-markdown 0.22.1\n+ vite-ssg 0.22.1\n+ vite-ssg-sitemap 0.4.3\n+ vitest 0.25.8\n+ vue-toastification 2.0.0-rc.5\n+ vue-tsc 1.0.14\n\n\n> @ postinstall /app\n> npm run convert\n\n\n> convert\n> tsx scripts/convert.ts\n\n✔ Generate file: /app/src/data/recipe.json\nDone in 19s\n\n> @ build /app\n> npm run convert && cross-env VITE_APP_BUILD_TIME=$(date +%s) vite-ssg build\n\n\n> convert\n> tsx scripts/convert.ts\n\n✔ Generate file: /app/src/data/recipe.json\n\n[vite-ssg] Build for client...\nvite v4.0.2 building for production...\ntransforming...\n✓ 115 modules transformed.\nrendering chunks...\ncomputing gzip size...\ndist/ssr-manifest.json                     17.13 kB\ndist/assets/_...all_-legacy-84ab57b3.js     0.31 kB │ gzip:   0.27 kB\ndist/assets/WrapperMd-legacy-755ea513.js    0.52 kB │ gzip:   0.39 kB\ndist/assets/404-legacy-36c8f306.js          0.61 kB │ gzip:   0.45 kB\ndist/assets/wechat-legacy-d2b396cd.js       0.95 kB │ gzip:   0.68 kB\ndist/assets/help-legacy-1b3c0886.js         2.09 kB │ gzip:   1.33 kB\ndist/assets/about-legacy-b019579a.js       16.50 kB │ gzip:   6.96 kB\ndist/assets/polyfills-legacy-fad92f7c.js   23.90 kB │ gzip:   9.44 kB\ndist/assets/app-legacy-385e3baa.js        344.31 kB │ gzip: 110.09 kB\ndist/index.html                      2.58 kB\ndist/ssr-manifest.json              17.79 kB\ndist/assets/about-200c0a88.css       1.95 kB │ gzip:   0.71 kB\ndist/assets/index-328d0107.css      43.41 kB │ gzip:  10.05 kB\ndist/assets/_...all_-ee2c95da.js     0.23 kB │ gzip:   0.22 kB\ndist/assets/WrapperMd-ab62f32b.js    0.47 kB │ gzip:   0.36 kB\ndist/assets/404-39affba2.js          0.53 kB │ gzip:   0.39 kB\ndist/assets/wechat-20285ab4.js       0.86 kB │ gzip:   0.62 kB\ndist/assets/help-fca0995c.js         2.00 kB │ gzip:   1.27 kB\ndist/assets/about-c08a978a.js       14.49 kB │ gzip:   6.32 kB\ndist/assets/app-eeeafaac.js        304.67 kB │ gzip: 103.85 kB\n\n[vite-ssg] Build for server...\nvite v4.0.2 building SSR bundle for production...\ntransforming...\n✓ 61 modules transformed.\nrendering chunks...\n.vite-ssg-temp/assets/style-378be73a.css      52.61 kB\n.vite-ssg-temp/assets/_...all_-cfc1bfb6.js     0.94 kB\n.vite-ssg-temp/assets/WrapperMd-54b9959a.js    1.28 kB\n.vite-ssg-temp/assets/wechat-3bfca47e.js       2.77 kB\n.vite-ssg-temp/assets/help-e5cd0d79.js         7.40 kB\n.vite-ssg-temp/assets/about-f81b4aa2.js       12.05 kB\n.vite-ssg-temp/main.mjs                      158.47 kB\n\n[vite-ssg] Rendering Pages... (5)\n[vite-ssg] Critical CSS generation enabled via `critters`\ndist/.html            36.64 KiB\ndist/index.html       36.63 KiB\ndist/help.html        20.00 KiB\ndist/wechat.html      18.74 KiB\ndist/about.html       30.91 KiB\n\n[vite-ssg] Build finished.\nRemoving intermediate container 609be33ad32d\n ---> c463767854c5\nStep 7/9 : FROM nginx:stable-alpine\nstable-alpine: Pulling from library/nginx\nca7dd9ec2225: Pulling fs layer\n33c6b9f4e775: Pulling fs layer\n41718ec56cb6: Pulling fs layer\n9a2b3c874906: Pulling fs layer\n71a3f979d23b: Pulling fs layer\na2f02aac7fab: Pulling fs layer\n9a2b3c874906: Waiting\na2f02aac7fab: Waiting\n71a3f979d23b: Waiting\n41718ec56cb6: Download complete\nca7dd9ec2225: Verifying Checksum\nca7dd9ec2225: Download complete\n33c6b9f4e775: Verifying Checksum\n33c6b9f4e775: Download complete\n9a2b3c874906: Download complete\n71a3f979d23b: Verifying Checksum\n71a3f979d23b: Download complete\na2f02aac7fab: Download complete\nca7dd9ec2225: Pull complete\n33c6b9f4e775: Pull complete\n41718ec56cb6: Pull complete\n9a2b3c874906: Pull complete\n71a3f979d23b: Pull complete\na2f02aac7fab: Pull complete\nDigest: sha256:2366ede62d2e26a20f7ce7d0294694fe52b166107fd346894e4658dfb5273f9c\nStatus: Downloaded newer image for nginx:stable-alpine\n ---> c31fe73098ae\nStep 8/9 : COPY --from=builder /app/dist /usr/share/nginx/html\n ---> 237ff5d8826c\nStep 9/9 : EXPOSE 80\n ---> Running in 926869f5a1d8\nRemoving intermediate container 926869f5a1d8\n ---> 26d88b724685\nSuccessfully built 26d88b724685\nSuccessfully tagged cook:latest\n","stderr":"","imageSize":24545804},"repair":{"startTime":1673008502847,"endTime":1673008502905,"violations":[{"name":"npmCacheCleanAfterInstall","position":{"start":3,"end":3,"columnStart":4,"columnEnd":23}}],"repairedDockerfile":"FROM node:lts-alpine AS builder\n\nRUN apk update\nRUN npm install -g pnpm && npm cache clean --force;\n\nWORKDIR /app\nCOPY . .\n\nRUN pnpm install && pnpm run build\n\nFROM nginx:stable-alpine\nCOPY --from=builder /app/dist /usr/share/nginx/html\nEXPOSE 80\n"},"repairedBuild":{"startTime":1673008503556,"endTime":1673008740014,"error":null,"stdout":"Sending build context to Docker daemon  712.2kB\r\r\nStep 1/9 : FROM node:lts-alpine AS builder\n ---> 6d7b7852bcd3\nStep 2/9 : RUN apk update\n ---> Running in 3e4c53746aac\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\nv3.17.0-332-g13963e2526 [https://dl-cdn.alpinelinux.org/alpine/v3.17/main]\nv3.17.0-336-ga9d27aafa7 [https://dl-cdn.alpinelinux.org/alpine/v3.17/community]\nOK: 17815 distinct packages available\nRemoving intermediate container 3e4c53746aac\n ---> 19f12fd36076\nStep 3/9 : RUN npm install -g pnpm && npm cache clean --force;\n ---> Running in 2c98503e5ba5\n\nadded 1 package, and audited 2 packages in 913ms\n\n1 package is looking for funding\n  run `npm fund` for details\n\nfound 0 vulnerabilities\n\u001b[91mnpm\u001b[0m\u001b[91m notice \nnpm\u001b[0m\u001b[91m notice New major version of npm available! 8.19.2 -> 9.2.0\nnpm\u001b[0m\u001b[91m notice\u001b[0m\u001b[91m Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm notice Run `npm install -g npm@9.2.0` to update!\nnpm notice \n\u001b[0m\u001b[91mnpm\u001b[0m\u001b[91m WARN using --force Recommended protections disabled.\n\u001b[0mRemoving intermediate container 2c98503e5ba5\n ---> 78d247daa180\nStep 4/9 : WORKDIR /app\n ---> Running in bf6896a7138f\nRemoving intermediate container bf6896a7138f\n ---> 415a0e8a500c\nStep 5/9 : COPY . .\n ---> 12f0440992db\nStep 6/9 : RUN pnpm install && pnpm run build\n ---> Running in 7cae600b505f\nLockfile is up to date, resolution step is skipped\nProgress: resolved 1, reused 0, downloaded 0, added 0\nPackages: +713\n++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++\nProgress: resolved 713, reused 0, downloaded 0, added 0\nProgress: resolved 713, reused 0, downloaded 2, added 0\nProgress: resolved 713, reused 0, downloaded 3, added 0\nPackages are hard linked from the content-addressable store to the virtual store.\n  Content-addressable store is at: /root/.local/share/pnpm/store/v3\n  Virtual store is at:             node_modules/.pnpm\nProgress: resolved 713, reused 0, downloaded 48, added 42\nProgress: resolved 713, reused 0, downloaded 171, added 167\nProgress: resolved 713, reused 0, downloaded 250, added 241\nProgress: resolved 713, reused 0, downloaded 307, added 301\nProgress: resolved 713, reused 0, downloaded 341, added 341\nProgress: resolved 713, reused 0, downloaded 376, added 373\nProgress: resolved 713, reused 0, downloaded 435, added 433\nProgress: resolved 713, reused 0, downloaded 445, added 443\nProgress: resolved 713, reused 0, downloaded 494, added 491\nProgress: resolved 713, reused 0, downloaded 578, added 578\nProgress: resolved 713, reused 0, downloaded 624, added 618\nProgress: resolved 713, reused 0, downloaded 703, added 704\n.../core-js@3.26.1/node_modules/core-js postinstall$ node -e \"try{require('./postinstall')}catch(e){}\"\nProgress: resolved 713, reused 0, downloaded 712, added 713, done\n.../node_modules/vue-demi postinstall$ node ./scripts/postinstall.js\n.../core-js@3.26.1/node_modules/core-js postinstall: Thank you for using core-js ( https://github.com/zloirock/core-js ) for polyfilling JavaScript standard library!\n.../core-js@3.26.1/node_modules/core-js postinstall: The project needs your help! Please consider supporting of core-js:\n.../core-js@3.26.1/node_modules/core-js postinstall: > https://opencollective.com/core-js \n.../core-js@3.26.1/node_modules/core-js postinstall: > https://patreon.com/zloirock \n.../core-js@3.26.1/node_modules/core-js postinstall: > bitcoin: bc1qlea7544qtsmj2rayg0lthvza9fau63ux0fstcz \n.../core-js@3.26.1/node_modules/core-js postinstall: Also, the author of core-js ( https://github.com/zloirock ) is looking for a good job -)\n.../core-js@3.26.1/node_modules/core-js postinstall: Done\n.../node_modules/vue-demi postinstall: Done\n.../esbuild@0.16.9/node_modules/esbuild postinstall$ node install.js\n.../esbuild@0.15.15/node_modules/esbuild postinstall$ node install.js\n.../esbuild@0.16.9/node_modules/esbuild postinstall: Done\n.../esbuild@0.15.15/node_modules/esbuild postinstall: Done\n\ndependencies:\n+ @gtm-support/vue-gtm 1.6.0\n+ @vueuse/core 9.7.0\n+ @vueuse/head 1.0.22\n+ nprogress 0.2.0\n+ pinia 2.0.28\n+ prism-theme-vars 0.2.4\n+ vue 3.2.45\n+ vue-about-me 1.2.7\n+ vue-demi 0.13.11\n+ vue-router 4.1.6\n\ndevDependencies:\n+ @antfu/eslint-config 0.34.0\n+ @iconify-json/fe 1.1.3\n+ @iconify-json/gg 1.1.3\n+ @iconify-json/ic 1.1.10\n+ @iconify-json/mdi 1.1.38\n+ @iconify-json/ri 1.1.4\n+ @pinia/testing 0.0.14\n+ @types/markdown-it-link-attributes 3.0.1\n+ @types/nprogress 0.2.0\n+ @vitejs/plugin-legacy 3.0.1\n+ @vitejs/plugin-vue 4.0.0\n+ @vue/test-utils 2.2.6\n+ consola 2.15.3\n+ critters 0.0.16\n+ cross-env 7.0.3\n+ eslint 8.30.0\n+ https-localhost 4.7.1\n+ markdown-it-link-attributes 4.0.1\n+ markdown-it-prism 2.3.0\n+ pnpm 7.18.2\n+ sass 1.57.0\n+ star-markdown-css 0.4.1\n+ terser 5.16.1\n+ tsx 3.12.1\n+ typescript 4.9.4\n+ unocss 0.47.6\n+ unplugin-auto-import 0.12.1\n+ unplugin-vue-components 0.22.12\n+ vite 4.0.2\n+ vite-plugin-inspect 0.7.10\n+ vite-plugin-pages 0.28.0\n+ vite-plugin-vue-layouts 0.7.0\n+ vite-plugin-vue-markdown 0.22.1\n+ vite-ssg 0.22.1\n+ vite-ssg-sitemap 0.4.3\n+ vitest 0.25.8\n+ vue-toastification 2.0.0-rc.5\n+ vue-tsc 1.0.14\n\n\n> @ postinstall /app\n> npm run convert\n\n\n> convert\n> tsx scripts/convert.ts\n\n✔ Generate file: /app/src/data/recipe.json\nDone in 23.9s\n\n> @ build /app\n> npm run convert && cross-env VITE_APP_BUILD_TIME=$(date +%s) vite-ssg build\n\n\n> convert\n> tsx scripts/convert.ts\n\n✔ Generate file: /app/src/data/recipe.json\n\n[vite-ssg] Build for client...\nvite v4.0.2 building for production...\ntransforming...\n✓ 115 modules transformed.\nrendering chunks...\ncomputing gzip size...\ndist/ssr-manifest.json                     17.13 kB\ndist/assets/_...all_-legacy-972c5cae.js     0.31 kB │ gzip:   0.27 kB\ndist/assets/WrapperMd-legacy-16be4be6.js    0.52 kB │ gzip:   0.39 kB\ndist/assets/404-legacy-01c31738.js          0.61 kB │ gzip:   0.45 kB\ndist/assets/wechat-legacy-13dcee27.js       0.95 kB │ gzip:   0.68 kB\ndist/assets/help-legacy-00ae7639.js         2.09 kB │ gzip:   1.33 kB\ndist/assets/about-legacy-a0d6663d.js       16.50 kB │ gzip:   6.96 kB\ndist/assets/polyfills-legacy-fad92f7c.js   23.90 kB │ gzip:   9.44 kB\ndist/assets/app-legacy-8c886412.js        344.31 kB │ gzip: 110.09 kB\ndist/index.html                      2.58 kB\ndist/ssr-manifest.json              17.79 kB\ndist/assets/about-200c0a88.css       1.95 kB │ gzip:   0.71 kB\ndist/assets/index-328d0107.css      43.41 kB │ gzip:  10.05 kB\ndist/assets/_...all_-c14261aa.js     0.23 kB │ gzip:   0.23 kB\ndist/assets/WrapperMd-3b219fea.js    0.47 kB │ gzip:   0.36 kB\ndist/assets/404-23ab851d.js          0.53 kB │ gzip:   0.40 kB\ndist/assets/wechat-df1299a7.js       0.86 kB │ gzip:   0.63 kB\ndist/assets/help-ee6d4c02.js         2.00 kB │ gzip:   1.27 kB\ndist/assets/about-6bff060c.js       14.49 kB │ gzip:   6.31 kB\ndist/assets/app-381a101c.js        304.67 kB │ gzip: 103.85 kB\n\n[vite-ssg] Build for server...\nvite v4.0.2 building SSR bundle for production...\ntransforming...\n✓ 61 modules transformed.\nrendering chunks...\n.vite-ssg-temp/assets/style-378be73a.css      52.61 kB\n.vite-ssg-temp/assets/_...all_-cfc1bfb6.js     0.94 kB\n.vite-ssg-temp/assets/WrapperMd-54b9959a.js    1.28 kB\n.vite-ssg-temp/assets/wechat-3bfca47e.js       2.77 kB\n.vite-ssg-temp/assets/help-e5cd0d79.js         7.40 kB\n.vite-ssg-temp/assets/about-f81b4aa2.js       12.05 kB\n.vite-ssg-temp/main.mjs                      158.47 kB\n\n[vite-ssg] Rendering Pages... (5)\n[vite-ssg] Critical CSS generation enabled via `critters`\ndist/.html            36.47 KiB\ndist/index.html       36.47 KiB\ndist/wechat.html      18.74 KiB\ndist/help.html        20.00 KiB\ndist/about.html       30.91 KiB\n\n[vite-ssg] Build finished.\nRemoving intermediate container 7cae600b505f\n ---> b84c4fb15373\nStep 7/9 : FROM nginx:stable-alpine\n ---> c31fe73098ae\nStep 8/9 : COPY --from=builder /app/dist /usr/share/nginx/html\n ---> fcbe07bae241\nStep 9/9 : EXPOSE 80\n ---> Running in 9b006c31ca8d\nRemoving intermediate container 9b006c31ca8d\n ---> 0b701df71d84\nSuccessfully built 0b701df71d84\nSuccessfully tagged cook:latest\n","stderr":"","imageSize":24545438}}