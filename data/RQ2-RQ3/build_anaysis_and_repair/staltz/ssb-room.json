{"repository":"https://github.com/staltz/ssb-room","dockerfilePath":"Dockerfile","startTime":1672648832239,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/staltz/ssb-room'...\n","error":null,"commit":"1922e7a74b9447a757b871d2f3e8998588a38a9c"},"originalBuild":{"startTimestamp":1672648833107,"endTimestamp":1672648940954,"error":null,"stdout":"Sending build context to Docker daemon  874.5kB\r\r\nStep 1/17 : FROM node:10.16\n10.16: Pulling from library/node\n9a0b0ce99936: Pulling fs layer\ndb3b6004c61a: Pulling fs layer\nf8f075920295: Pulling fs layer\n6ef14aff1139: Pulling fs layer\n0bbd8b48260f: Pulling fs layer\n524be717efb1: Pulling fs layer\naad1e8812bc2: Pulling fs layer\n13fb072986db: Pulling fs layer\n627a2df19018: Pulling fs layer\n6ef14aff1139: Waiting\n0bbd8b48260f: Waiting\n524be717efb1: Waiting\n13fb072986db: Waiting\naad1e8812bc2: Waiting\n627a2df19018: Waiting\nf8f075920295: Verifying Checksum\nf8f075920295: Download complete\ndb3b6004c61a: Verifying Checksum\ndb3b6004c61a: Download complete\n9a0b0ce99936: Download complete\n524be717efb1: Verifying Checksum\n524be717efb1: Download complete\n6ef14aff1139: Verifying Checksum\n6ef14aff1139: Download complete\n13fb072986db: Verifying Checksum\n13fb072986db: Download complete\naad1e8812bc2: Verifying Checksum\naad1e8812bc2: Download complete\n627a2df19018: Verifying Checksum\n627a2df19018: Download complete\n9a0b0ce99936: Pull complete\ndb3b6004c61a: Pull complete\n0bbd8b48260f: Verifying Checksum\n0bbd8b48260f: Download complete\nf8f075920295: Pull complete\n6ef14aff1139: Pull complete\n0bbd8b48260f: Pull complete\n524be717efb1: Pull complete\naad1e8812bc2: Pull complete\n13fb072986db: Pull complete\n627a2df19018: Pull complete\nDigest: sha256:f4b6f471cdd4b66b27eef899e7f8423ecd9fbfc863b2cb7a59978a7f64c8e0c3\nStatus: Downloaded newer image for node:10.16\n ---> a68faf70e589\nStep 2/17 : MAINTAINER Andre Staltz <contact@staltz.com>\n ---> Running in 1675579ca588\nRemoving intermediate container 1675579ca588\n ---> 6c45d5bf8e4c\nStep 3/17 : USER root\n ---> Running in 29180e54dc09\nRemoving intermediate container 29180e54dc09\n ---> b96e6b240b41\nStep 4/17 : ADD https://github.com/krallin/tini/releases/download/v0.18.0/tini /tini\n\n\n ---> f7e81f5248dd\nStep 5/17 : RUN chmod +x /tini\n ---> Running in 4a62c1f2e425\nRemoving intermediate container 4a62c1f2e425\n ---> e0d2a3135291\nStep 6/17 : RUN mkdir /home/node/.npm-global ;     chown -R node:node /home/node/\n ---> Running in 29ef407d6606\nRemoving intermediate container 29ef407d6606\n ---> ccf0e92f13bb\nStep 7/17 : ENV PATH=/home/node/.npm-global/bin:$PATH\n ---> Running in 1ac4b749b181\nRemoving intermediate container 1ac4b749b181\n ---> 451cd5d9a118\nStep 8/17 : ENV NPM_CONFIG_PREFIX=/home/node/.npm-global\n ---> Running in 0fe97452e7b4\nRemoving intermediate container 0fe97452e7b4\n ---> 720cd07c9901\nStep 9/17 : ENV DEBUG=\"*\"\n ---> Running in 670c03a689c8\nRemoving intermediate container 670c03a689c8\n ---> fe82935aecb1\nStep 10/17 : USER node\n ---> Running in 126d07119f76\nRemoving intermediate container 126d07119f76\n ---> f589ac6c70e6\nStep 11/17 : RUN npm install -g ssb-room@1.3.0\n ---> Running in 3ad539b07547\n\u001b[91mnpm WARN deprecated debug@4.1.1: Debug versions >=3.2.0 <3.2.7 || >=4 <4.3.1 have a low-severity ReDos regression when used in a Node.js environment. It is recommended you upgrade to 3.2.7 or 4.3.1. (https://github.com/visionmedia/debug/issues/797)\n\u001b[0m/home/node/.npm-global/bin/ssb-room -> /home/node/.npm-global/lib/node_modules/ssb-room/bin.js\n\n> sodium-native@3.4.1 install /home/node/.npm-global/lib/node_modules/ssb-room/node_modules/sodium-native\n> node-gyp-build\n\n\u001b[91minternal/modules/cjs/loader.js:638\n    throw err;\n    ^\n\nError: Cannot find module 'fs/promises'\n    at Function.Module._resolveFilename (internal/modules/cjs/loader.js:636:15)\n    at Function.Module._load (internal/modules/cjs/loader.js:562:25)\n    at Module.require (internal/modules/cjs/loader.js:692:17)\n    at require (internal/modules/cjs/helpers.js:25:18)\n    at Object.<anonymous> (/home/node/.npm-global/lib/node_modules/ssb-room/node_modules/sodium-native/deps/bin.js:5:12)\n    at Module._compile (internal/modules/cjs/loader.js:778:30)\n    at Object.Module._extensions..js (internal/modules/cjs/loader.js:789:10)\n    at Module.load (internal/modules/cjs/loader.js:653:32)\n    at tryModuleLoad (internal/modules/cjs/loader.js:593:12)\n    at Function.Module._load (internal/modules/cjs/loader.js:585:3)\n\u001b[0m\u001b[91mgyp: Call to 'node deps/bin.js --print-lib' returned exit status 1 while in binding.gyp. while trying to load binding.gyp\n\u001b[0m\u001b[91mgyp\u001b[0m\u001b[91m ERR! \u001b[0m\u001b[91mconfigure error \n\u001b[0m\u001b[91mgyp ERR! \u001b[0m\u001b[91mstack Error: `gyp` failed with exit code: 1\ngyp \u001b[0m\u001b[91mERR!\u001b[0m\u001b[91m \u001b[0m\u001b[91mstack     at ChildProcess.onCpExit (/usr/local/lib/node_modules/npm/node_modules/node-gyp/lib/configure.js:345:16)\ngyp ERR!\u001b[0m\u001b[91m \u001b[0m\u001b[91mstack     at ChildProcess.emit (events.js:198:13)\ngyp ERR! \u001b[0m\u001b[91mstack     at Process.ChildProcess._handle.onexit (internal/child_process.js:248:12)\n\u001b[0m\u001b[91mgyp \u001b[0m\u001b[91mERR! System Linux 5.4.0-113-generic\n\u001b[0m\u001b[91mgyp ERR! command \"/usr/local/bin/node\" \"/usr/local/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js\" \"rebuild\"\n\u001b[0m\u001b[91mgyp ERR!\u001b[0m\u001b[91m cwd /home/node/.npm-global/lib/node_modules/ssb-room/node_modules/sodium-native\ngyp \u001b[0m\u001b[91mERR! node -v\u001b[0m\u001b[91m v10.16.3\ngyp\u001b[0m\u001b[91m ERR! \u001b[0m\u001b[91mnode-gyp -v\u001b[0m\u001b[91m v3.8.0\n\u001b[0m\u001b[91mgyp\u001b[0m\u001b[91m ERR!\u001b[0m\u001b[91m not ok \n\u001b[0m\n> ejs@2.7.4 postinstall /home/node/.npm-global/lib/node_modules/ssb-room/node_modules/ejs\n> node ./postinstall.js\n\nThank you for installing \u001b[35mEJS\u001b[0m: built with the \u001b[32mJake\u001b[0m JavaScript build tool (\u001b[32mhttps://jakejs.com/\u001b[0m)\n\n\u001b[91mnpm WARN ws@7.5.9 requires a peer of bufferutil@^4.0.1 but none is installed. You must install peer dependencies yourself.\nnpm WARN\u001b[0m\u001b[91m ws@7.5.9 requires a peer of utf-8-validate@^5.0.2 but none is installed. You must install peer dependencies yourself.\n\u001b[0m\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: sodium-native@3.4.1 (node_modules/ssb-room/node_modules/sodium-native):\nnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: sodium-native@3.4.1 install: `node-gyp-build`\nnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: Exit status 1\n\u001b[0m\u001b[91m\n\u001b[0m+ ssb-room@1.3.0\nadded 184 packages from 90 contributors in 43.607s\nRemoving intermediate container 3ad539b07547\n ---> 27062d42aa9c\nStep 12/17 : EXPOSE 8008\n ---> Running in 37dfa7039605\nRemoving intermediate container 37dfa7039605\n ---> 79574c90bf92\nStep 13/17 : EXPOSE 8007\n ---> Running in b7acdde19fbe\nRemoving intermediate container b7acdde19fbe\n ---> 0f6e9bb02f3e\nStep 14/17 : HEALTHCHECK --interval=30s --timeout=30s --start-period=10s --retries=10   CMD ssb-room check || exit 1\n ---> Running in bb850f7f0e79\nRemoving intermediate container bb850f7f0e79\n ---> 15aa5f503bac\nStep 15/17 : ENV HEALING_ACTION RESTART\n ---> Running in 15ed0ab3fe46\nRemoving intermediate container 15ed0ab3fe46\n ---> 24438cb74fda\nStep 16/17 : ENTRYPOINT [ \"/tini\", \"--\", \"ssb-room\" ]\n ---> Running in e2ca48ceb31f\nRemoving intermediate container e2ca48ceb31f\n ---> c8cdab5fae37\nStep 17/17 : CMD [ \"start\" ]\n ---> Running in 4cbbd883dbcf\nRemoving intermediate container 4cbbd883dbcf\n ---> 743c00720d87\nSuccessfully built 743c00720d87\nSuccessfully tagged ssb-room:latest\n","stderr":"","imageSize":922983824},"repair":{"violations":[{"name":"npmCacheCleanAfterInstall","position":{"start":14,"end":14,"columnStart":4,"columnEnd":33}}],"repairedDockerfile":"FROM node:10.16\n\nMAINTAINER Andre Staltz <contact@staltz.com>\n\nUSER root\nADD https://github.com/krallin/tini/releases/download/v0.18.0/tini /tini\nRUN chmod +x /tini\nRUN mkdir /home/node/.npm-global ; \\\n    chown -R node:node /home/node/\nENV PATH=/home/node/.npm-global/bin:$PATH\nENV NPM_CONFIG_PREFIX=/home/node/.npm-global\nENV DEBUG=\"*\"\n\nUSER node\nRUN npm install -g ssb-room@1.3.0\n\nEXPOSE 8008\nEXPOSE 8007\n\nHEALTHCHECK --interval=30s --timeout=30s --start-period=10s --retries=10 \\\n  CMD ssb-room check || exit 1\nENV HEALING_ACTION RESTART\n\nENTRYPOINT [ \"/tini\", \"--\", \"ssb-room\" ]\nCMD [ \"start\" ]\n"},"repairedBuild":{"startTimestamp":1672648941361,"endTimestamp":1672648969909,"error":null,"stdout":"Sending build context to Docker daemon  874.5kB\r\r\nStep 1/17 : FROM node:10.16\n ---> a68faf70e589\nStep 2/17 : MAINTAINER Andre Staltz <contact@staltz.com>\n ---> Running in d9fe0e8e20c2\nRemoving intermediate container d9fe0e8e20c2\n ---> e58d03bcd826\nStep 3/17 : USER root\n ---> Running in e5610c41417d\nRemoving intermediate container e5610c41417d\n ---> e9a1cf389705\nStep 4/17 : ADD https://github.com/krallin/tini/releases/download/v0.18.0/tini /tini\n\n\n ---> 7ab2eba4a255\nStep 5/17 : RUN chmod +x /tini\n ---> Running in e73b74fda411\nRemoving intermediate container e73b74fda411\n ---> 1dcb0700c333\nStep 6/17 : RUN mkdir /home/node/.npm-global ;     chown -R node:node /home/node/\n ---> Running in 8b2f036e8f63\nRemoving intermediate container 8b2f036e8f63\n ---> c4c47f6fe295\nStep 7/17 : ENV PATH=/home/node/.npm-global/bin:$PATH\n ---> Running in 50d6d3c3a00f\nRemoving intermediate container 50d6d3c3a00f\n ---> 95f4dc465f63\nStep 8/17 : ENV NPM_CONFIG_PREFIX=/home/node/.npm-global\n ---> Running in 6d2d3073e6de\nRemoving intermediate container 6d2d3073e6de\n ---> e574c5bbafa6\nStep 9/17 : ENV DEBUG=\"*\"\n ---> Running in 1400a56f51a3\nRemoving intermediate container 1400a56f51a3\n ---> 2a6e0eb30517\nStep 10/17 : USER node\n ---> Running in a7512726797e\nRemoving intermediate container a7512726797e\n ---> 446c0dd62952\nStep 11/17 : RUN npm install -g ssb-room@1.3.0\n ---> Running in 394ccc90b70e\n\u001b[91mnpm WARN deprecated debug@4.1.1: Debug versions >=3.2.0 <3.2.7 || >=4 <4.3.1 have a low-severity ReDos regression when used in a Node.js environment. It is recommended you upgrade to 3.2.7 or 4.3.1. (https://github.com/visionmedia/debug/issues/797)\n\u001b[0m/home/node/.npm-global/bin/ssb-room -> /home/node/.npm-global/lib/node_modules/ssb-room/bin.js\n\n> sodium-native@3.4.1 install /home/node/.npm-global/lib/node_modules/ssb-room/node_modules/sodium-native\n> node-gyp-build\n\n\u001b[91minternal/modules/cjs/loader.js:638\n    throw err;\n    ^\n\nError: Cannot find module 'fs/promises'\n    at Function.Module._resolveFilename (internal/modules/cjs/loader.js:636:15)\n    at Function.Module._load (internal/modules/cjs/loader.js:562:25)\n    at Module.require (internal/modules/cjs/loader.js:692:17)\n    at require (internal/modules/cjs/helpers.js:25:18)\n    at Object.<anonymous> (/home/node/.npm-global/lib/node_modules/ssb-room/node_modules/sodium-native/deps/bin.js:5:12)\n    at Module._compile (internal/modules/cjs/loader.js:778:30)\n    at Object.Module._extensions..js (internal/modules/cjs/loader.js:789:10)\n    at Module.load (internal/modules/cjs/loader.js:653:32)\n    at tryModuleLoad (internal/modules/cjs/loader.js:593:12)\n    at Function.Module._load (internal/modules/cjs/loader.js:585:3)\n\u001b[0m\u001b[91mgyp: Call to 'node deps/bin.js --print-lib' returned exit status 1 while in binding.gyp. while trying to load binding.gyp\n\u001b[0m\u001b[91mgyp\u001b[0m\u001b[91m ERR!\u001b[0m\u001b[91m configure error\u001b[0m\u001b[91m \n\u001b[0m\u001b[91mgyp \u001b[0m\u001b[91mERR! \u001b[0m\u001b[91mstack Error: `gyp` failed with exit code: 1\ngyp\u001b[0m\u001b[91m ERR!\u001b[0m\u001b[91m stack\u001b[0m\u001b[91m     at ChildProcess.onCpExit (/usr/local/lib/node_modules/npm/node_modules/node-gyp/lib/configure.js:345:16)\ngyp ERR!\u001b[0m\u001b[91m stack\u001b[0m\u001b[91m     at ChildProcess.emit (events.js:198:13)\ngyp \u001b[0m\u001b[91mERR! \u001b[0m\u001b[91mstack     at Process.ChildProcess._handle.onexit (internal/child_process.js:248:12)\n\u001b[0m\u001b[91mgyp ERR!\u001b[0m\u001b[91m System\u001b[0m\u001b[91m Linux 5.4.0-113-generic\n\u001b[0m\u001b[91mgyp \u001b[0m\u001b[91mERR!\u001b[0m\u001b[91m \u001b[0m\u001b[91mcommand \"/usr/local/bin/node\" \"/usr/local/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js\" \"rebuild\"\n\u001b[0m\u001b[91mgyp \u001b[0m\u001b[91mERR! \u001b[0m\u001b[91mcwd\u001b[0m\u001b[91m /home/node/.npm-global/lib/node_modules/ssb-room/node_modules/sodium-native\n\u001b[0m\u001b[91mgyp \u001b[0m\u001b[91mERR! \u001b[0m\u001b[91mnode -v\u001b[0m\u001b[91m v10.16.3\ngyp\u001b[0m\u001b[91m ERR!\u001b[0m\u001b[91m node-gyp -v\u001b[0m\u001b[91m v3.8.0\n\u001b[0m\u001b[91mgyp\u001b[0m\u001b[91m \u001b[0m\u001b[91mERR! \u001b[0m\u001b[91mnot ok \n\u001b[0m\n> ejs@2.7.4 postinstall /home/node/.npm-global/lib/node_modules/ssb-room/node_modules/ejs\n> node ./postinstall.js\n\nThank you for installing \u001b[35mEJS\u001b[0m: built with the \u001b[32mJake\u001b[0m JavaScript build tool (\u001b[32mhttps://jakejs.com/\u001b[0m)\n\n\u001b[91mnpm WARN ws@7.5.9 requires a peer of bufferutil@^4.0.1 but none is installed. You must install peer dependencies yourself.\n\u001b[0m\u001b[91mnpm WARN\u001b[0m\u001b[91m ws@7.5.9 requires a peer of utf-8-validate@^5.0.2 but none is installed. You must install peer dependencies yourself.\n\u001b[0m\u001b[91mnpm WARN optional\u001b[0m\u001b[91m SKIPPING OPTIONAL DEPENDENCY: sodium-native@3.4.1 (node_modules/ssb-room/node_modules/sodium-native):\nnpm WARN optional\u001b[0m\u001b[91m SKIPPING OPTIONAL DEPENDENCY: sodium-native@3.4.1 install: `node-gyp-build`\nnpm WARN \u001b[0m\u001b[91moptional\u001b[0m\u001b[91m SKIPPING OPTIONAL DEPENDENCY: Exit status 1\n\u001b[0m\u001b[91m\n\u001b[0m+ ssb-room@1.3.0\nadded 184 packages from 90 contributors in 9.492s\nRemoving intermediate container 394ccc90b70e\n ---> f7ececc52a70\nStep 12/17 : EXPOSE 8008\n ---> Running in beb14ecb1e71\nRemoving intermediate container beb14ecb1e71\n ---> d4d24cf5970c\nStep 13/17 : EXPOSE 8007\n ---> Running in 5271dbd5e7eb\nRemoving intermediate container 5271dbd5e7eb\n ---> 9706cfbbdb22\nStep 14/17 : HEALTHCHECK --interval=30s --timeout=30s --start-period=10s --retries=10   CMD ssb-room check || exit 1\n ---> Running in 7bce75c4aeb9\nRemoving intermediate container 7bce75c4aeb9\n ---> 9210f0e1b250\nStep 15/17 : ENV HEALING_ACTION RESTART\n ---> Running in f8ad236d3fca\nRemoving intermediate container f8ad236d3fca\n ---> b529d916acde\nStep 16/17 : ENTRYPOINT [ \"/tini\", \"--\", \"ssb-room\" ]\n ---> Running in 159aa05ec833\nRemoving intermediate container 159aa05ec833\n ---> be1171abf419\nStep 17/17 : CMD [ \"start\" ]\n ---> Running in 0f59837ed299\nRemoving intermediate container 0f59837ed299\n ---> c28a2f5b1e8b\nSuccessfully built c28a2f5b1e8b\nSuccessfully tagged ssb-room:latest\n","stderr":"","imageSize":922985291},"endTime":1672648970259}