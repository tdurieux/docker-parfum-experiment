{"repository":"https://github.com/jshimko/meteor-launchpad","dockerfilePath":"Dockerfile","startTime":1672672698790,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/jshimko/meteor-launchpad'...\n","error":null,"commit":"79e9b996811625670426412465acb10f42f27073"},"originalBuild":{"startTimestamp":1672672699616,"endTimestamp":1672672720319,"error":null,"stdout":"Sending build context to Docker daemon   25.6kB\r\r\nStep 1/38 : FROM debian:stable\nstable: Pulling from library/debian\n68be6800823f: Pulling fs layer\n68be6800823f: Download complete\n68be6800823f: Pull complete\nDigest: sha256:7ca0fecd790bd1297cb92c4405906b0c4d7df22c8a5f0367a2697daf73c99cd7\nStatus: Downloaded newer image for debian:stable\n ---> 39ddc2c842dc\nStep 2/38 : MAINTAINER Jeremy Shimko <jeremy.shimko@gmail.com>\n ---> Running in 790ed2bae6ef\nRemoving intermediate container 790ed2bae6ef\n ---> 20918f2dcd0d\nStep 3/38 : ARG DEBIAN_FRONTEND=noninteractive\n ---> Running in acc28cb8d204\nRemoving intermediate container acc28cb8d204\n ---> 4b2d039b4cf8\nStep 4/38 : RUN groupadd -r node && useradd -m -g node node\n ---> Running in e3ba894a1295\nRemoving intermediate container e3ba894a1295\n ---> d23805c3f808\nStep 5/38 : ENV GOSU_VERSION 1.10\n ---> Running in e437a301d5b4\nRemoving intermediate container e437a301d5b4\n ---> 52ea8d12aa6b\nStep 6/38 : ENV MONGO_VERSION 3.4.10\n ---> Running in 9cd60a41b870\nRemoving intermediate container 9cd60a41b870\n ---> beb697437b08\nStep 7/38 : ENV MONGO_MAJOR 3.4\n ---> Running in 5714ad4f8ae6\nRemoving intermediate container 5714ad4f8ae6\n ---> 1c4f6a0b935e\nStep 8/38 : ENV MONGO_PACKAGE mongodb-org\n ---> Running in c588405182c8\nRemoving intermediate container c588405182c8\n ---> 04a8797266ce\nStep 9/38 : ENV PHANTOM_VERSION 2.1.1\n ---> Running in 6e9424813b81\nRemoving intermediate container 6e9424813b81\n ---> 752ff4780466\nStep 10/38 : ENV APP_SOURCE_DIR /opt/meteor/src\n ---> Running in ffebd643c8b9\nRemoving intermediate container ffebd643c8b9\n ---> 7820f1d52914\nStep 11/38 : ENV APP_BUNDLE_DIR /opt/meteor/dist\n ---> Running in bd1a8ccbba86\nRemoving intermediate container bd1a8ccbba86\n ---> e88b2b5bad45\nStep 12/38 : ENV BUILD_SCRIPTS_DIR /opt/build_scripts\n ---> Running in 1638b8906ca0\nRemoving intermediate container 1638b8906ca0\n ---> acfcabb805d9\nStep 13/38 : COPY scripts $BUILD_SCRIPTS_DIR\n ---> c8dc78f729e4\nStep 14/38 : RUN chmod -R 750 $BUILD_SCRIPTS_DIR\n ---> Running in dda7cd796de7\nRemoving intermediate container dda7cd796de7\n ---> 5f91e636664a\nStep 15/38 : ONBUILD ARG APT_GET_INSTALL\n ---> Running in c8a4851b3acb\nRemoving intermediate container c8a4851b3acb\n ---> 0a65c81c9d16\nStep 16/38 : ONBUILD ENV APT_GET_INSTALL $APT_GET_INSTALL\n ---> Running in d7035ed4d422\nRemoving intermediate container d7035ed4d422\n ---> 9bda7422c57b\nStep 17/38 : ONBUILD ARG NODE_VERSION\n ---> Running in 0b773bd4f887\nRemoving intermediate container 0b773bd4f887\n ---> 21592e31ffc9\nStep 18/38 : ONBUILD ENV NODE_VERSION ${NODE_VERSION:-14.17.4}\n ---> Running in 5a21eb7e4847\nRemoving intermediate container 5a21eb7e4847\n ---> ffed6d6f3046\nStep 19/38 : ONBUILD ARG NPM_TOKEN\n ---> Running in 7bcde4c2b6d6\nRemoving intermediate container 7bcde4c2b6d6\n ---> 2776c4dcedb5\nStep 20/38 : ONBUILD ENV NPM_TOKEN $NPM_TOKEN\n ---> Running in 8d27de462184\nRemoving intermediate container 8d27de462184\n ---> 81bf304d1f69\nStep 21/38 : ONBUILD ARG INSTALL_MONGO\n ---> Running in 5e5502f14068\nRemoving intermediate container 5e5502f14068\n ---> 07a343eae6ea\nStep 22/38 : ONBUILD ENV INSTALL_MONGO $INSTALL_MONGO\n ---> Running in 10e01623ec65\nRemoving intermediate container 10e01623ec65\n ---> 87c90d3b25cc\nStep 23/38 : ONBUILD ARG INSTALL_PHANTOMJS\n ---> Running in 4a9ffe44b02a\nRemoving intermediate container 4a9ffe44b02a\n ---> 726aef66780a\nStep 24/38 : ONBUILD ENV INSTALL_PHANTOMJS $INSTALL_PHANTOMJS\n ---> Running in 294dbd53e850\nRemoving intermediate container 294dbd53e850\n ---> 6c54f2422262\nStep 25/38 : ONBUILD ARG INSTALL_GRAPHICSMAGICK\n ---> Running in 26ccb581dbff\nRemoving intermediate container 26ccb581dbff\n ---> 61c1011e7013\nStep 26/38 : ONBUILD ENV INSTALL_GRAPHICSMAGICK $INSTALL_GRAPHICSMAGICK\n ---> Running in 692993b87635\nRemoving intermediate container 692993b87635\n ---> e3edb4a8c128\nStep 27/38 : ONBUILD ARG TOOL_NODE_FLAGS\n ---> Running in 509ac0ebe39d\nRemoving intermediate container 509ac0ebe39d\n ---> 351b8d9a6c18\nStep 28/38 : ONBUILD ENV TOOL_NODE_FLAGS $TOOL_NODE_FLAGS\n ---> Running in 7a4f1c46ccd1\nRemoving intermediate container 7a4f1c46ccd1\n ---> a5d8669ed65e\nStep 29/38 : ONBUILD RUN if [ \"$APT_GET_INSTALL\" ]; then apt-get update && apt-get install -y $APT_GET_INSTALL; fi\n ---> Running in dcc161e38131\nRemoving intermediate container dcc161e38131\n ---> d57efff17e98\nStep 30/38 : ONBUILD COPY . $APP_SOURCE_DIR\n ---> Running in 072c2d91aafc\nRemoving intermediate container 072c2d91aafc\n ---> f7576b6236c5\nStep 31/38 : ONBUILD RUN cd $APP_SOURCE_DIR &&   $BUILD_SCRIPTS_DIR/install-deps.sh &&   $BUILD_SCRIPTS_DIR/install-node.sh &&   $BUILD_SCRIPTS_DIR/install-phantom.sh &&   $BUILD_SCRIPTS_DIR/install-graphicsmagick.sh &&   $BUILD_SCRIPTS_DIR/install-mongo.sh &&   $BUILD_SCRIPTS_DIR/install-meteor.sh &&   $BUILD_SCRIPTS_DIR/build-meteor.sh &&   $BUILD_SCRIPTS_DIR/post-build-cleanup.sh\n ---> Running in 037c57828325\nRemoving intermediate container 037c57828325\n ---> 284d35ab9b42\nStep 32/38 : ENV ROOT_URL http://localhost\n ---> Running in 93919db169a5\nRemoving intermediate container 93919db169a5\n ---> 1cf948fae0ea\nStep 33/38 : ENV MONGO_URL mongodb://127.0.0.1:27017/meteor\n ---> Running in 15a0b7c7dbad\nRemoving intermediate container 15a0b7c7dbad\n ---> 23c2a9f08939\nStep 34/38 : ENV PORT 3000\n ---> Running in 8244aa8e2987\nRemoving intermediate container 8244aa8e2987\n ---> ee0f67f5e31a\nStep 35/38 : EXPOSE 3000\n ---> Running in 1e4ee7ea8168\nRemoving intermediate container 1e4ee7ea8168\n ---> 528a2abe1c68\nStep 36/38 : WORKDIR $APP_BUNDLE_DIR/bundle\n ---> Running in ec8348f18fad\nRemoving intermediate container ec8348f18fad\n ---> b718332f5d28\nStep 37/38 : ENTRYPOINT [\"./entrypoint.sh\"]\n ---> Running in 0f3c726d7d53\nRemoving intermediate container 0f3c726d7d53\n ---> 6458f13263f4\nStep 38/38 : CMD [\"node\", \"main.js\"]\n ---> Running in 7c7bba0be381\nRemoving intermediate container 7c7bba0be381\n ---> e1a90509a552\nSuccessfully built e1a90509a552\nSuccessfully tagged meteor-launchpad:latest\n","stderr":"","imageSize":124442528},"repair":{"violations":[{"name":"ruleAptGetInstallUseNoRec","position":{"start":0,"end":0,"columnStart":54,"columnEnd":89}},{"name":"ruleAptGetInstallThenRemoveAptLists","position":{"start":0,"end":0,"columnStart":54,"columnEnd":89}}],"repairedDockerfile":"FROM debian:stable\nMAINTAINER Jeremy Shimko <jeremy.shimko@gmail.com>\nARG DEBIAN_FRONTEND=noninteractive\n\nRUN groupadd -r node && useradd -m -g node node\n\n# Gosu\nENV GOSU_VERSION 1.10\n\n# MongoDB\nENV MONGO_VERSION 3.4.10\nENV MONGO_MAJOR 3.4\nENV MONGO_PACKAGE mongodb-org\n\n# PhantomJS\nENV PHANTOM_VERSION 2.1.1\n\n# build directories\nENV APP_SOURCE_DIR /opt/meteor/src\nENV APP_BUNDLE_DIR /opt/meteor/dist\nENV BUILD_SCRIPTS_DIR /opt/build_scripts\n\n# Add entrypoint and build scripts\nCOPY scripts $BUILD_SCRIPTS_DIR\nRUN chmod -R 750 $BUILD_SCRIPTS_DIR\n# Define all --build-arg options\nONBUILD ARG APT_GET_INSTALL\nONBUILD ENV APT_GET_INSTALL $APT_GET_INSTALL\n\nONBUILD ARG NODE_VERSION\nONBUILD ENV NODE_VERSION ${NODE_VERSION:-14.17.4}\n\nONBUILD ARG NPM_TOKEN\nONBUILD ENV NPM_TOKEN $NPM_TOKEN\n\nONBUILD ARG INSTALL_MONGO\nONBUILD ENV INSTALL_MONGO $INSTALL_MONGO\n\nONBUILD ARG INSTALL_PHANTOMJS\nONBUILD ENV INSTALL_PHANTOMJS $INSTALL_PHANTOMJS\n\nONBUILD ARG INSTALL_GRAPHICSMAGICK\nONBUILD ENV INSTALL_GRAPHICSMAGICK $INSTALL_GRAPHICSMAGICK\n\n# Node flags for the Meteor build tool\nONBUILD ARG TOOL_NODE_FLAGS\nONBUILD ENV TOOL_NODE_FLAGS $TOOL_NODE_FLAGS\n\n# optionally custom apt dependencies at app build time\n \\\nRUN if [ \"$APT_GET_INSTALL\" ]; then \\\n apt-get update && apt-get install --no-install-recommends -y $APT_GET_INSTALL; fiONBUILD\n\n# copy the app to the container\nONBUILD COPY . $APP_SOURCE_DIR\n\n# install all dependencies, build app, clean up\nONBUILD RUN cd $APP_SOURCE_DIR && \\\n  $BUILD_SCRIPTS_DIR/install-deps.sh && \\\n  $BUILD_SCRIPTS_DIR/install-node.sh && \\\n  $BUILD_SCRIPTS_DIR/install-phantom.sh && \\\n  $BUILD_SCRIPTS_DIR/install-graphicsmagick.sh && \\\n  $BUILD_SCRIPTS_DIR/install-mongo.sh && \\\n  $BUILD_SCRIPTS_DIR/install-meteor.sh && \\\n  $BUILD_SCRIPTS_DIR/build-meteor.sh && \\\n  $BUILD_SCRIPTS_DIR/post-build-cleanup.sh\n\n# Default values for Meteor environment variables\nENV ROOT_URL http://localhost\nENV MONGO_URL mongodb://127.0.0.1:27017/meteor\nENV PORT 3000\n\nEXPOSE 3000\n\nWORKDIR $APP_BUNDLE_DIR/bundle\n\n# start the app\nENTRYPOINT [\"./entrypoint.sh\"]\nCMD [\"node\", \"main.js\"]"},"repairedBuild":{"startTimestamp":1672672720761,"endTimestamp":1672672738869,"error":{"code":2,"killed":false,"signal":null,"cmd":"docker build --no-cache --force-rm -t meteor-launchpad:latest -f /tmp/dinghy-analysis/jshimko/meteor-launchpad/Dockerfile ."},"stdout":"Sending build context to Docker daemon   25.6kB\r\r\nStep 1/38 : FROM debian:stable\n ---> 39ddc2c842dc\nStep 2/38 : MAINTAINER Jeremy Shimko <jeremy.shimko@gmail.com>\n ---> Running in a5252b00946c\nRemoving intermediate container a5252b00946c\n ---> c97cd9d12d89\nStep 3/38 : ARG DEBIAN_FRONTEND=noninteractive\n ---> Running in fbdb767eb763\nRemoving intermediate container fbdb767eb763\n ---> 921a5f0cb0dc\nStep 4/38 : RUN groupadd -r node && useradd -m -g node node\n ---> Running in c0c3e362974c\nRemoving intermediate container c0c3e362974c\n ---> a9a054176d08\nStep 5/38 : ENV GOSU_VERSION 1.10\n ---> Running in 334c8722253d\nRemoving intermediate container 334c8722253d\n ---> b12841192de2\nStep 6/38 : ENV MONGO_VERSION 3.4.10\n ---> Running in 48f35242960c\nRemoving intermediate container 48f35242960c\n ---> 928e6d28e606\nStep 7/38 : ENV MONGO_MAJOR 3.4\n ---> Running in 2e57e619c221\nRemoving intermediate container 2e57e619c221\n ---> 59c00c80c6fe\nStep 8/38 : ENV MONGO_PACKAGE mongodb-org\n ---> Running in ac91e3ad8bbc\nRemoving intermediate container ac91e3ad8bbc\n ---> ad6a681da48f\nStep 9/38 : ENV PHANTOM_VERSION 2.1.1\n ---> Running in 60673197d289\nRemoving intermediate container 60673197d289\n ---> 6931c54c5bfe\nStep 10/38 : ENV APP_SOURCE_DIR /opt/meteor/src\n ---> Running in 917a9e010f3c\nRemoving intermediate container 917a9e010f3c\n ---> 5217f2354c5e\nStep 11/38 : ENV APP_BUNDLE_DIR /opt/meteor/dist\n ---> Running in f5b2ed042ba2\nRemoving intermediate container f5b2ed042ba2\n ---> 3e6936d0e420\nStep 12/38 : ENV BUILD_SCRIPTS_DIR /opt/build_scripts\n ---> Running in 8d6f1b70496a\nRemoving intermediate container 8d6f1b70496a\n ---> 918aa41abf7e\nStep 13/38 : COPY scripts $BUILD_SCRIPTS_DIR\n ---> 6897d42fe4bd\nStep 14/38 : RUN chmod -R 750 $BUILD_SCRIPTS_DIR\n ---> Running in b1de2a9aaa50\nRemoving intermediate container b1de2a9aaa50\n ---> 132b5c3c1baa\nStep 15/38 : ONBUILD ARG APT_GET_INSTALL\n ---> Running in f4eda486959b\nRemoving intermediate container f4eda486959b\n ---> a861e22a85b8\nStep 16/38 : ONBUILD ENV APT_GET_INSTALL $APT_GET_INSTALL\n ---> Running in ab5ab5648252\nRemoving intermediate container ab5ab5648252\n ---> 586f1ae9e6ed\nStep 17/38 : ONBUILD ARG NODE_VERSION\n ---> Running in fc3e3d592c81\nRemoving intermediate container fc3e3d592c81\n ---> cecdd46c4c33\nStep 18/38 : ONBUILD ENV NODE_VERSION ${NODE_VERSION:-14.17.4}\n ---> Running in cfc8990ec73e\nRemoving intermediate container cfc8990ec73e\n ---> 3c1279c88363\nStep 19/38 : ONBUILD ARG NPM_TOKEN\n ---> Running in a1af4caba1db\nRemoving intermediate container a1af4caba1db\n ---> ea9c8fb5a080\nStep 20/38 : ONBUILD ENV NPM_TOKEN $NPM_TOKEN\n ---> Running in 6c541e500589\nRemoving intermediate container 6c541e500589\n ---> 6429aefb6636\nStep 21/38 : ONBUILD ARG INSTALL_MONGO\n ---> Running in f5b549847d34\nRemoving intermediate container f5b549847d34\n ---> ab7c1a095491\nStep 22/38 : ONBUILD ENV INSTALL_MONGO $INSTALL_MONGO\n ---> Running in 9eb2491272ad\nRemoving intermediate container 9eb2491272ad\n ---> 739e6fcbe892\nStep 23/38 : ONBUILD ARG INSTALL_PHANTOMJS\n ---> Running in bd07e52082b2\nRemoving intermediate container bd07e52082b2\n ---> c79baba5f4fc\nStep 24/38 : ONBUILD ENV INSTALL_PHANTOMJS $INSTALL_PHANTOMJS\n ---> Running in 9a9eb887cff2\nRemoving intermediate container 9a9eb887cff2\n ---> 299832e7625e\nStep 25/38 : ONBUILD ARG INSTALL_GRAPHICSMAGICK\n ---> Running in 778e5f27c1f0\nRemoving intermediate container 778e5f27c1f0\n ---> 51668661971b\nStep 26/38 : ONBUILD ENV INSTALL_GRAPHICSMAGICK $INSTALL_GRAPHICSMAGICK\n ---> Running in 8437148329db\nRemoving intermediate container 8437148329db\n ---> 7172b1b80722\nStep 27/38 : ONBUILD ARG TOOL_NODE_FLAGS\n ---> Running in adfa921cceaa\nRemoving intermediate container adfa921cceaa\n ---> 4678d568eb85\nStep 28/38 : ONBUILD ENV TOOL_NODE_FLAGS $TOOL_NODE_FLAGS\n ---> Running in 9e0fa8e1b3cc\nRemoving intermediate container 9e0fa8e1b3cc\n ---> 221545217c89\nStep 29/38 : RUN if [ \"$APT_GET_INSTALL\" ]; then  apt-get update && apt-get install --no-install-recommends -y $APT_GET_INSTALL; fiONBUILD\n ---> Running in 96080f64134b\n\u001b[91m/bin/sh: 1: Syntax error: end of file unexpected (expecting \"fi\")\n\u001b[0mRemoving intermediate container 96080f64134b\n","stderr":"The command '/bin/sh -c if [ \"$APT_GET_INSTALL\" ]; then  apt-get update && apt-get install --no-install-recommends -y $APT_GET_INSTALL; fiONBUILD' returned a non-zero code: 2\n"},"endTime":1672672738944}