{"repository":"https://github.com/knarfeh/zhihu2ebook","dockerfilePath":"Dockerfile","startTime":1672230097627,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/knarfeh/zhihu2ebook'...\n","error":null,"commit":"541502671805a4fb6be72bdefea744dd64a3031c"},"originalBuild":{"startTimestamp":1672230098435,"endTimestamp":1672230135482,"error":null,"stdout":"Sending build context to Docker daemon  157.2kB\r\r\nStep 1/9 : FROM python:3.6-rc-alpine\n3.6-rc-alpine: Pulling from library/python\n90f4dba627d6: Pulling fs layer\n19bc0bb0be9f: Pulling fs layer\n3eb4a5c04c94: Pulling fs layer\nb5ecb1b8da81: Pulling fs layer\n9359a2d8d298: Pulling fs layer\nb5ecb1b8da81: Waiting\n9359a2d8d298: Waiting\n19bc0bb0be9f: Download complete\n90f4dba627d6: Verifying Checksum\n90f4dba627d6: Download complete\n90f4dba627d6: Pull complete\n19bc0bb0be9f: Pull complete\nb5ecb1b8da81: Verifying Checksum\nb5ecb1b8da81: Download complete\n9359a2d8d298: Verifying Checksum\n9359a2d8d298: Download complete\n3eb4a5c04c94: Verifying Checksum\n3eb4a5c04c94: Download complete\n3eb4a5c04c94: Pull complete\nb5ecb1b8da81: Pull complete\n9359a2d8d298: Pull complete\nDigest: sha256:461b4c316da101fdb0a16cbf5245b7b3d658c47024d59efddaafbb1b44e0ed83\nStatus: Downloaded newer image for python:3.6-rc-alpine\n ---> 7ad56e4a2409\nStep 2/9 : MAINTAINER He Jun knarfeh@outlook.com\n ---> Running in 2810edb681d0\nRemoving intermediate container 2810edb681d0\n ---> 3dae807010a9\nStep 3/9 : RUN apk --update add --no-cache openssl ca-certificates\n ---> Running in f9124517df96\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.4/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.4/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.4/community/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.4/community/x86_64/APKINDEX.tar.gz\n(1/1) Installing openssl (1.0.2n-r0)\nExecuting busybox-1.24.2-r13.trigger\nExecuting ca-certificates-20161130-r0.trigger\nOK: 32 MiB in 35 packages\nRemoving intermediate container f9124517df96\n ---> f891df808072\nStep 4/9 : RUN apk add --no-cache gcc g++ libxslt-dev python3-dev musl-dev make\n ---> Running in 23aad5986367\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.4/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.4/community/x86_64/APKINDEX.tar.gz\n(1/28) Upgrading musl (1.1.14-r15 -> 1.1.14-r16)\n(2/28) Installing libgcc (5.3.0-r0)\n(3/28) Installing libstdc++ (5.3.0-r0)\n(4/28) Installing binutils-libs (2.26-r1)\n(5/28) Installing binutils (2.26-r1)\n(6/28) Installing gmp (6.1.0-r0)\n(7/28) Installing isl (0.14.1-r0)\n(8/28) Installing libgomp (5.3.0-r0)\n(9/28) Installing libatomic (5.3.0-r0)\n(10/28) Installing pkgconf (0.9.12-r0)\n(11/28) Installing pkgconfig (0.25-r1)\n(12/28) Installing mpfr3 (3.1.2-r0)\n(13/28) Installing mpc1 (1.0.3-r0)\n(14/28) Installing gcc (5.3.0-r0)\n(15/28) Installing musl-dev (1.1.14-r16)\n(16/28) Installing libc-dev (0.7-r0)\n(17/28) Installing g++ (5.3.0-r0)\n(18/28) Upgrading musl-utils (1.1.14-r15 -> 1.1.14-r16)\n(19/28) Installing libgpg-error (1.23-r0)\n(20/28) Installing libgcrypt (1.7.9-r0)\n(21/28) Installing libxml2 (2.9.5-r0)\n(22/28) Installing libxslt (1.1.29-r1)\n(23/28) Installing zlib-dev (1.2.11-r0)\n(24/28) Installing libxml2-dev (2.9.5-r0)\n(25/28) Installing libxslt-dev (1.1.29-r1)\n(26/28) Installing make (4.1-r1)\n(27/28) Installing python3 (3.5.2-r2)\n(28/28) Installing python3-dev (3.5.2-r2)\nExecuting busybox-1.24.2-r13.trigger\nOK: 261 MiB in 61 packages\nRemoving intermediate container 23aad5986367\n ---> 3697e1c2ed6b\nStep 5/9 : RUN apk add curl\n ---> Running in a65ba61c9761\n(1/3) Installing libssh2 (1.7.0-r0)\n(2/3) Installing libcurl (7.60.0-r1)\n(3/3) Installing curl (7.60.0-r1)\nExecuting busybox-1.24.2-r13.trigger\nOK: 262 MiB in 64 packages\nRemoving intermediate container a65ba61c9761\n ---> 15344262a87c\nStep 6/9 : COPY . /src/\n ---> 88aa71474b31\nStep 7/9 : RUN pip3 install -U pip     && pip install -r /src/requirements/dev.txt\n ---> Running in 40363f5002c8\nCollecting pip\n  Downloading https://files.pythonhosted.org/packages/a4/6d/6463d49a933f547439d6b5b98b46af8742cc03ae83543e4d7688c2420f8b/pip-21.3.1-py3-none-any.whl (1.7MB)\nInstalling collected packages: pip\n  Found existing installation: pip 9.0.1\n    Uninstalling pip-9.0.1:\n      Successfully uninstalled pip-9.0.1\nSuccessfully installed pip-21.3.1\nCollecting requests\n  Downloading requests-2.27.1-py2.py3-none-any.whl (63 kB)\nCollecting elasticsearch\n  Downloading elasticsearch-8.5.3-py3-none-any.whl (385 kB)\nCollecting lxml\n  Downloading lxml-4.9.2-cp36-cp36m-musllinux_1_1_x86_64.whl (7.3 MB)\nCollecting amqp==1.4.9\n  Downloading amqp-1.4.9-py2.py3-none-any.whl (51 kB)\nCollecting anyjson==0.3.3\n  Downloading anyjson-0.3.3.tar.gz (8.3 kB)\n  Preparing metadata (setup.py): started\n  Preparing metadata (setup.py): finished with status 'done'\nCollecting beautifulsoup4==4.4.1\n  Downloading beautifulsoup4-4.4.1-py3-none-any.whl (81 kB)\nCollecting billiard==3.3.0.23\n  Downloading billiard-3.3.0.23.tar.gz (151 kB)\n  Preparing metadata (setup.py): started\n  Preparing metadata (setup.py): finished with status 'done'\nCollecting eventlet==0.19.0\n  Downloading eventlet-0.19.0-py2.py3-none-any.whl (138 kB)\nCollecting greenlet==0.4.10\n  Downloading greenlet-0.4.10.zip (82 kB)\n  Preparing metadata (setup.py): started\n  Preparing metadata (setup.py): finished with status 'done'\nCollecting kombu==3.0.30\n  Downloading kombu-3.0.30-py2.py3-none-any.whl (241 kB)\nCollecting pytz==2016.4\n  Downloading pytz-2016.4-py2.py3-none-any.whl (480 kB)\nCollecting zhihu-oauth==0.0.41\n  Downloading zhihu_oauth-0.0.41-py2.py3-none-any.whl (76 kB)\nCollecting charset-normalizer~=2.0.0\n  Downloading charset_normalizer-2.0.12-py3-none-any.whl (39 kB)\nCollecting idna<4,>=2.5\n  Downloading idna-3.4-py3-none-any.whl (61 kB)\nCollecting urllib3<1.27,>=1.21.1\n  Downloading urllib3-1.26.13-py2.py3-none-any.whl (140 kB)\nCollecting certifi>=2017.4.17\n  Downloading certifi-2022.12.7-py3-none-any.whl (155 kB)\nCollecting elastic-transport<9,>=8\n  Downloading elastic_transport-8.4.0-py3-none-any.whl (59 kB)\nCollecting dataclasses\n  Downloading dataclasses-0.8-py3-none-any.whl (19 kB)\nBuilding wheels for collected packages: anyjson, billiard, greenlet\n  Building wheel for anyjson (setup.py): started\n  Building wheel for anyjson (setup.py): finished with status 'done'\n  Created wheel for anyjson: filename=anyjson-0.3.3-py3-none-any.whl size=5635 sha256=c20b0934a45524ca6177ebcb89072bba3ae9bc58dce85bb77203d55bd5d22be2\n  Stored in directory: /root/.cache/pip/wheels/b9/bd/95/00661ac6fe3bc60296ccb45e91518eb6b57c905fd077177aeb\n  Building wheel for billiard (setup.py): started\n  Building wheel for billiard (setup.py): finished with status 'done'\n  Created wheel for billiard: filename=billiard-3.3.0.23-py3-none-any.whl size=93155 sha256=6a2fd6831192cec58033806e71a2af0d13d261c58f15e2d3cdf691a1cedaff24\n  Stored in directory: /root/.cache/pip/wheels/89/f8/06/7754aec6ec491bb766fe2c75271b046c824ebb3d090edbc591\n  Building wheel for greenlet (setup.py): started\n  Building wheel for greenlet (setup.py): finished with status 'done'\n  Created wheel for greenlet: filename=greenlet-0.4.10-cp36-cp36m-linux_x86_64.whl size=41805 sha256=ded58e2d6110e12ea4eb23b227be2ec8e19b7b61d2f85c102831884a9c5dcd24\n  Stored in directory: /root/.cache/pip/wheels/19/90/10/5861f77fe5f7a14c892c44999f255374eb88e3401b64cb4d9d\nSuccessfully built anyjson billiard greenlet\nInstalling collected packages: urllib3, idna, dataclasses, charset-normalizer, certifi, requests, greenlet, elastic-transport, anyjson, amqp, zhihu-oauth, pytz, lxml, kombu, eventlet, elasticsearch, billiard, beautifulsoup4\nSuccessfully installed amqp-1.4.9 anyjson-0.3.3 beautifulsoup4-4.4.1 billiard-3.3.0.23 certifi-2022.12.7 charset-normalizer-2.0.12 dataclasses-0.8 elastic-transport-8.4.0 elasticsearch-8.5.3 eventlet-0.19.0 greenlet-0.4.10 idna-3.4 kombu-3.0.30 lxml-4.9.2 pytz-2016.4 requests-2.27.1 urllib3-1.26.13 zhihu-oauth-0.0.41\n\u001b[91mWARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv\n\u001b[0mRemoving intermediate container 40363f5002c8\n ---> 17f24e531546\nStep 8/9 : WORKDIR /src\n ---> Running in f8b5d3002d01\nRemoving intermediate container f8b5d3002d01\n ---> fa7749e0955a\nStep 9/9 : CMD [\"python\", \"main.py\"]\n ---> Running in aee8e2c305d3\nRemoving intermediate container aee8e2c305d3\n ---> 980b7eca063e\nSuccessfully built 980b7eca063e\nSuccessfully tagged zhihu2ebook:latest\n","stderr":"","imageSize":369530422},"repair":{"violations":[{"name":"pipUseNoCacheDir","position":{"start":13,"end":13,"columnStart":4,"columnEnd":23}},{"name":"pipUseNoCacheDir","position":{"start":14,"end":14,"columnStart":7,"columnEnd":47}},{"name":"apkAddUseNoCache","position":{"start":10,"end":10,"columnStart":4,"columnEnd":16}}],"repairedDockerfile":"FROM python:3.6-rc-alpine\nMAINTAINER He Jun knarfeh@outlook.com\n\n# base pkgs\nRUN apk --update add --no-cache openssl ca-certificates\n\n# build pkgs\nRUN apk add --no-cache gcc g++ libxslt-dev python3-dev musl-dev make\n\n# dev pkgs\nRUN apk add --no-cache curl\n\nCOPY . /src/\nRUN pip3 install --no-cache-dir -U pip \\\n    && pip install --no-cache-dir -r /src/requirements/dev.txt\n\nWORKDIR /src\n\nCMD [\"python\", \"main.py\"]"},"repairedBuild":{"startTimestamp":1672230136039,"endTimestamp":1672230169297,"error":null,"stdout":"Sending build context to Docker daemon  157.2kB\r\r\nStep 1/9 : FROM python:3.6-rc-alpine\n ---> 7ad56e4a2409\nStep 2/9 : MAINTAINER He Jun knarfeh@outlook.com\n ---> Running in 42f7313b2924\nRemoving intermediate container 42f7313b2924\n ---> a8b403f571db\nStep 3/9 : RUN apk --update add --no-cache openssl ca-certificates\n ---> Running in 7dce41cc8372\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.4/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.4/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.4/community/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.4/community/x86_64/APKINDEX.tar.gz\n(1/1) Installing openssl (1.0.2n-r0)\nExecuting busybox-1.24.2-r13.trigger\nExecuting ca-certificates-20161130-r0.trigger\nOK: 32 MiB in 35 packages\nRemoving intermediate container 7dce41cc8372\n ---> 2311dce413e1\nStep 4/9 : RUN apk add --no-cache gcc g++ libxslt-dev python3-dev musl-dev make\n ---> Running in ef2acd0db3f7\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.4/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.4/community/x86_64/APKINDEX.tar.gz\n(1/28) Upgrading musl (1.1.14-r15 -> 1.1.14-r16)\n(2/28) Installing libgcc (5.3.0-r0)\n(3/28) Installing libstdc++ (5.3.0-r0)\n(4/28) Installing binutils-libs (2.26-r1)\n(5/28) Installing binutils (2.26-r1)\n(6/28) Installing gmp (6.1.0-r0)\n(7/28) Installing isl (0.14.1-r0)\n(8/28) Installing libgomp (5.3.0-r0)\n(9/28) Installing libatomic (5.3.0-r0)\n(10/28) Installing pkgconf (0.9.12-r0)\n(11/28) Installing pkgconfig (0.25-r1)\n(12/28) Installing mpfr3 (3.1.2-r0)\n(13/28) Installing mpc1 (1.0.3-r0)\n(14/28) Installing gcc (5.3.0-r0)\n(15/28) Installing musl-dev (1.1.14-r16)\n(16/28) Installing libc-dev (0.7-r0)\n(17/28) Installing g++ (5.3.0-r0)\n(18/28) Upgrading musl-utils (1.1.14-r15 -> 1.1.14-r16)\n(19/28) Installing libgpg-error (1.23-r0)\n(20/28) Installing libgcrypt (1.7.9-r0)\n(21/28) Installing libxml2 (2.9.5-r0)\n(22/28) Installing libxslt (1.1.29-r1)\n(23/28) Installing zlib-dev (1.2.11-r0)\n(24/28) Installing libxml2-dev (2.9.5-r0)\n(25/28) Installing libxslt-dev (1.1.29-r1)\n(26/28) Installing make (4.1-r1)\n(27/28) Installing python3 (3.5.2-r2)\n(28/28) Installing python3-dev (3.5.2-r2)\nExecuting busybox-1.24.2-r13.trigger\nOK: 261 MiB in 61 packages\nRemoving intermediate container ef2acd0db3f7\n ---> 9faba2a701fa\nStep 5/9 : RUN apk add --no-cache curl\n ---> Running in 9ac87ac5f969\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.4/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.4/community/x86_64/APKINDEX.tar.gz\n(1/3) Installing libssh2 (1.7.0-r0)\n(2/3) Installing libcurl (7.60.0-r1)\n(3/3) Installing curl (7.60.0-r1)\nExecuting busybox-1.24.2-r13.trigger\nOK: 262 MiB in 64 packages\nRemoving intermediate container 9ac87ac5f969\n ---> 7300fe255f2e\nStep 6/9 : COPY . /src/\n ---> 94befc6ebee1\nStep 7/9 : RUN pip3 install --no-cache-dir -U pip     && pip install --no-cache-dir -r /src/requirements/dev.txt\n ---> Running in 1cabc8af1a22\nCollecting pip\n  Downloading https://files.pythonhosted.org/packages/a4/6d/6463d49a933f547439d6b5b98b46af8742cc03ae83543e4d7688c2420f8b/pip-21.3.1-py3-none-any.whl (1.7MB)\nInstalling collected packages: pip\n  Found existing installation: pip 9.0.1\n    Uninstalling pip-9.0.1:\n      Successfully uninstalled pip-9.0.1\nSuccessfully installed pip-21.3.1\nCollecting requests\n  Downloading requests-2.27.1-py2.py3-none-any.whl (63 kB)\nCollecting elasticsearch\n  Downloading elasticsearch-8.5.3-py3-none-any.whl (385 kB)\nCollecting lxml\n  Downloading lxml-4.9.2-cp36-cp36m-musllinux_1_1_x86_64.whl (7.3 MB)\nCollecting amqp==1.4.9\n  Downloading amqp-1.4.9-py2.py3-none-any.whl (51 kB)\nCollecting anyjson==0.3.3\n  Downloading anyjson-0.3.3.tar.gz (8.3 kB)\n  Preparing metadata (setup.py): started\n  Preparing metadata (setup.py): finished with status 'done'\nCollecting beautifulsoup4==4.4.1\n  Downloading beautifulsoup4-4.4.1-py3-none-any.whl (81 kB)\nCollecting billiard==3.3.0.23\n  Downloading billiard-3.3.0.23.tar.gz (151 kB)\n  Preparing metadata (setup.py): started\n  Preparing metadata (setup.py): finished with status 'done'\nCollecting eventlet==0.19.0\n  Downloading eventlet-0.19.0-py2.py3-none-any.whl (138 kB)\nCollecting greenlet==0.4.10\n  Downloading greenlet-0.4.10.zip (82 kB)\n  Preparing metadata (setup.py): started\n  Preparing metadata (setup.py): finished with status 'done'\nCollecting kombu==3.0.30\n  Downloading kombu-3.0.30-py2.py3-none-any.whl (241 kB)\nCollecting pytz==2016.4\n  Downloading pytz-2016.4-py2.py3-none-any.whl (480 kB)\nCollecting zhihu-oauth==0.0.41\n  Downloading zhihu_oauth-0.0.41-py2.py3-none-any.whl (76 kB)\nCollecting idna<4,>=2.5\n  Downloading idna-3.4-py3-none-any.whl (61 kB)\nCollecting charset-normalizer~=2.0.0\n  Downloading charset_normalizer-2.0.12-py3-none-any.whl (39 kB)\nCollecting certifi>=2017.4.17\n  Downloading certifi-2022.12.7-py3-none-any.whl (155 kB)\nCollecting urllib3<1.27,>=1.21.1\n  Downloading urllib3-1.26.13-py2.py3-none-any.whl (140 kB)\nCollecting elastic-transport<9,>=8\n  Downloading elastic_transport-8.4.0-py3-none-any.whl (59 kB)\nCollecting dataclasses\n  Downloading dataclasses-0.8-py3-none-any.whl (19 kB)\nBuilding wheels for collected packages: anyjson, billiard, greenlet\n  Building wheel for anyjson (setup.py): started\n  Building wheel for anyjson (setup.py): finished with status 'done'\n  Created wheel for anyjson: filename=anyjson-0.3.3-py3-none-any.whl size=5635 sha256=b0f4ff06b9f30c3d6c330a24ff5a1dbbf2c2386aea9562baef7a265733e75491\n  Stored in directory: /tmp/pip-ephem-wheel-cache-6jininos/wheels/b9/bd/95/00661ac6fe3bc60296ccb45e91518eb6b57c905fd077177aeb\n  Building wheel for billiard (setup.py): started\n  Building wheel for billiard (setup.py): finished with status 'done'\n  Created wheel for billiard: filename=billiard-3.3.0.23-py3-none-any.whl size=93155 sha256=4cdfef135fa6d26921a48d98aa8c1163d5a8e6ca4b3e3155bf92763a6738480f\n  Stored in directory: /tmp/pip-ephem-wheel-cache-6jininos/wheels/89/f8/06/7754aec6ec491bb766fe2c75271b046c824ebb3d090edbc591\n  Building wheel for greenlet (setup.py): started\n  Building wheel for greenlet (setup.py): finished with status 'done'\n  Created wheel for greenlet: filename=greenlet-0.4.10-cp36-cp36m-linux_x86_64.whl size=41798 sha256=da68d9664607cc3e505d4fc31505f2a60bb07e70e255a34cf1528bff427b1578\n  Stored in directory: /tmp/pip-ephem-wheel-cache-6jininos/wheels/19/90/10/5861f77fe5f7a14c892c44999f255374eb88e3401b64cb4d9d\nSuccessfully built anyjson billiard greenlet\nInstalling collected packages: urllib3, idna, dataclasses, charset-normalizer, certifi, requests, greenlet, elastic-transport, anyjson, amqp, zhihu-oauth, pytz, lxml, kombu, eventlet, elasticsearch, billiard, beautifulsoup4\nSuccessfully installed amqp-1.4.9 anyjson-0.3.3 beautifulsoup4-4.4.1 billiard-3.3.0.23 certifi-2022.12.7 charset-normalizer-2.0.12 dataclasses-0.8 elastic-transport-8.4.0 elasticsearch-8.5.3 eventlet-0.19.0 greenlet-0.4.10 idna-3.4 kombu-3.0.30 lxml-4.9.2 pytz-2016.4 requests-2.27.1 urllib3-1.26.13 zhihu-oauth-0.0.41\n\u001b[91mWARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv\n\u001b[0mRemoving intermediate container 1cabc8af1a22\n ---> 6eb380f6eb6e\nStep 8/9 : WORKDIR /src\n ---> Running in 65c20d3370f5\nRemoving intermediate container 65c20d3370f5\n ---> dcf2bfe85ed6\nStep 9/9 : CMD [\"python\", \"main.py\"]\n ---> Running in f9c88f7ddf9c\nRemoving intermediate container f9c88f7ddf9c\n ---> 1f964093f43f\nSuccessfully built 1f964093f43f\nSuccessfully tagged zhihu2ebook:latest\n","stderr":"","imageSize":357559284},"endTime":1672230169760}