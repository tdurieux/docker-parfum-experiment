{"repository":"https://github.com/vocascan/vocascan-server","dockerfilePath":"Dockerfile","startTime":1673084019190,"endTime":1673084110445,"clone":{"startTime":1673084019190,"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/vocascan/vocascan-server'...\n","error":null,"endTime":1673084020178,"commit":"ae77ac824b99887029e6983904dcda1c58088c0a"},"originalBuild":{"startTime":1673084020260,"endTime":1673084066684,"error":null,"stdout":"Sending build context to Docker daemon  5.149MB\r\r\nStep 1/11 : FROM node:14-alpine as builder\n ---> fb7170aa2b9b\nStep 2/11 : RUN apk add --no-cache build-base python3\n ---> Running in 4d189fcc16c7\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/29) Installing binutils (2.39-r2)\n(2/29) Installing libmagic (5.43-r0)\n(3/29) Installing file (5.43-r0)\n(4/29) Installing libgomp (12.2.1_git20220924-r4)\n(5/29) Installing libatomic (12.2.1_git20220924-r4)\n(6/29) Installing gmp (6.2.1-r2)\n(7/29) Installing isl25 (0.25-r0)\n(8/29) Installing mpfr4 (4.1.0-r0)\n(9/29) Installing mpc1 (1.2.1-r1)\n(10/29) Installing gcc (12.2.1_git20220924-r4)\n(11/29) Installing libstdc++-dev (12.2.1_git20220924-r4)\n(12/29) Installing musl-dev (1.2.3-r4)\n(13/29) Installing libc-dev (0.7.2-r3)\n(14/29) Installing g++ (12.2.1_git20220924-r4)\n(15/29) Installing make (4.3-r1)\n(16/29) Installing fortify-headers (1.1-r1)\n(17/29) Installing patch (2.7.6-r8)\n(18/29) Installing build-base (0.5-r3)\n(19/29) Installing libbz2 (1.0.8-r4)\n(20/29) Installing libexpat (2.5.0-r0)\n(21/29) Installing libffi (3.4.4-r0)\n(22/29) Installing gdbm (1.23-r0)\n(23/29) Installing xz-libs (5.2.9-r0)\n(24/29) Installing mpdecimal (2.5.1-r1)\n(25/29) Installing ncurses-terminfo-base (6.3_p20221119-r0)\n(26/29) Installing ncurses-libs (6.3_p20221119-r0)\n(27/29) Installing readline (8.2.0-r0)\n(28/29) Installing sqlite-libs (3.40.1-r0)\n(29/29) Installing python3 (3.10.9-r1)\nExecuting busybox-1.35.0-r29.trigger\nOK: 295 MiB in 46 packages\nRemoving intermediate container 4d189fcc16c7\n ---> dba5b688029b\nStep 3/11 : WORKDIR /build\n ---> Running in 428af3d5ee8f\nRemoving intermediate container 428af3d5ee8f\n ---> 20ec61dfd1a0\nStep 4/11 : COPY ./package*.json ./\n ---> c8fa682d721f\nStep 5/11 : RUN npm i --only=production --sqlite\n ---> Running in 79968e853341\n\u001b[91mnpm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!\n\u001b[0m\n> bcrypt@5.0.1 install /build/node_modules/bcrypt\n> node-pre-gyp install --fallback-to-build\n\n[bcrypt] Success: \"/build/node_modules/bcrypt/lib/binding/napi-v3/bcrypt_lib.node\" is installed via remote\n\u001b[91mnpm WARN \u001b[0m\u001b[91mlifecycle @vocascan/server@1.3.0~postinstall: cannot run in wd @vocascan/server@1.3.0 node -e \"process.exit(process.env.npm_config_sqlite === 'true')\" || npm i --no-save --no-package-lock sqlite3 (wd=/build)\n\u001b[0m\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@2.3.2 (node_modules/fsevents):\nnpm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91m\n\u001b[0madded 373 packages from 416 contributors and audited 704 packages in 6.408s\n\n23 packages are looking for funding\n  run `npm fund` for details\n\nfound 55 vulnerabilities (1 low, 12 moderate, 38 high, 4 critical)\n  run `npm audit fix` to fix them, or `npm audit` for details\nRemoving intermediate container 79968e853341\n ---> b1326e6098ab\nStep 6/11 : FROM node:14-alpine\n ---> fb7170aa2b9b\nStep 7/11 : WORKDIR /app\n ---> Running in d8da3d94473c\nRemoving intermediate container d8da3d94473c\n ---> 752666b1d057\nStep 8/11 : COPY --from=builder /build/node_modules /app/node_modules\n ---> 910d636368b0\nStep 9/11 : COPY . .\n ---> 6ffedd0c8a7a\nStep 10/11 : RUN npm link\n ---> Running in 9317c28d663d\n\u001b[91mnpm\u001b[0m\u001b[91m WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!\n\u001b[0m\n> nodemon@2.0.7 postinstall /app/node_modules/nodemon\n> node bin/postinstall || exit 0\n\n\u001b[32mLove nodemon? You can now support the project via the open collective:\u001b[22m\u001b[39m\n > \u001b[96m\u001b[1mhttps://opencollective.com/nodemon/donate\u001b[0m\n\n\u001b[91mnpm WARN lifecycle @vocascan/server@1.3.0~postinstall: cannot run in wd @vocascan/server@1.3.0 node -e \"process.exit(process.env.npm_config_sqlite === 'true')\" || npm i --no-save --no-package-lock sqlite3 (wd=/app)\n\u001b[0m\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@2.3.2 (node_modules/fsevents):\nnpm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91m\n\u001b[0madded 327 packages from 149 contributors and audited 704 packages in 6.798s\n\n70 packages are looking for funding\n  run `npm fund` for details\n\nfound 55 vulnerabilities (1 low, 12 moderate, 38 high, 4 critical)\n  run `npm audit fix` to fix them, or `npm audit` for details\n/usr/local/bin/vocascan-server -> /usr/local/lib/node_modules/@vocascan/server/vocascan-server.js\n/usr/local/lib/node_modules/@vocascan/server -> /app\nRemoving intermediate container 9317c28d663d\n ---> def6d58f8753\nStep 11/11 : CMD [\"vocascan-server\", \"web\"]\n ---> Running in 615c68761638\nRemoving intermediate container 615c68761638\n ---> db7e5e9c09bb\nSuccessfully built db7e5e9c09bb\nSuccessfully tagged vocascan-server:latest\n","stderr":"","imageSize":272210838},"repair":{"startTime":1673084066750,"endTime":1673084066813,"violations":[{"name":"npmCacheCleanAfterInstall","position":{"start":8,"end":8,"columnStart":4,"columnEnd":36}}],"repairedDockerfile":"FROM node:14-alpine as builder\n\nRUN apk add --no-cache build-base python3\n\nWORKDIR /build\n\nCOPY ./package*.json ./\n\nRUN npm i --only=production --sqlite && npm cache clean --force;\n\nFROM node:14-alpine\n\nWORKDIR /app\n\nCOPY --from=builder /build/node_modules /app/node_modules\n\nCOPY . .\n\nRUN npm link\n\nCMD [\"vocascan-server\", \"web\"]\n"},"repairedBuild":{"startTime":1673084067225,"endTime":1673084109969,"error":null,"stdout":"Sending build context to Docker daemon  5.149MB\r\r\nStep 1/11 : FROM node:14-alpine as builder\n ---> fb7170aa2b9b\nStep 2/11 : RUN apk add --no-cache build-base python3\n ---> Running in 78a6652fb6ce\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/29) Installing binutils (2.39-r2)\n(2/29) Installing libmagic (5.43-r0)\n(3/29) Installing file (5.43-r0)\n(4/29) Installing libgomp (12.2.1_git20220924-r4)\n(5/29) Installing libatomic (12.2.1_git20220924-r4)\n(6/29) Installing gmp (6.2.1-r2)\n(7/29) Installing isl25 (0.25-r0)\n(8/29) Installing mpfr4 (4.1.0-r0)\n(9/29) Installing mpc1 (1.2.1-r1)\n(10/29) Installing gcc (12.2.1_git20220924-r4)\n(11/29) Installing libstdc++-dev (12.2.1_git20220924-r4)\n(12/29) Installing musl-dev (1.2.3-r4)\n(13/29) Installing libc-dev (0.7.2-r3)\n(14/29) Installing g++ (12.2.1_git20220924-r4)\n(15/29) Installing make (4.3-r1)\n(16/29) Installing fortify-headers (1.1-r1)\n(17/29) Installing patch (2.7.6-r8)\n(18/29) Installing build-base (0.5-r3)\n(19/29) Installing libbz2 (1.0.8-r4)\n(20/29) Installing libexpat (2.5.0-r0)\n(21/29) Installing libffi (3.4.4-r0)\n(22/29) Installing gdbm (1.23-r0)\n(23/29) Installing xz-libs (5.2.9-r0)\n(24/29) Installing mpdecimal (2.5.1-r1)\n(25/29) Installing ncurses-terminfo-base (6.3_p20221119-r0)\n(26/29) Installing ncurses-libs (6.3_p20221119-r0)\n(27/29) Installing readline (8.2.0-r0)\n(28/29) Installing sqlite-libs (3.40.1-r0)\n(29/29) Installing python3 (3.10.9-r1)\nExecuting busybox-1.35.0-r29.trigger\nOK: 295 MiB in 46 packages\nRemoving intermediate container 78a6652fb6ce\n ---> ffd388130bbd\nStep 3/11 : WORKDIR /build\n ---> Running in d2e6b36c46ee\nRemoving intermediate container d2e6b36c46ee\n ---> 59dd3a7958fd\nStep 4/11 : COPY ./package*.json ./\n ---> a80788905a47\nStep 5/11 : RUN npm i --only=production --sqlite && npm cache clean --force;\n ---> Running in 09abbe84a06a\n\u001b[91mnpm WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!\n\u001b[0m\n> bcrypt@5.0.1 install /build/node_modules/bcrypt\n> node-pre-gyp install --fallback-to-build\n\n[bcrypt] Success: \"/build/node_modules/bcrypt/lib/binding/napi-v3/bcrypt_lib.node\" is installed via remote\n\u001b[91mnpm WARN lifecycle @vocascan/server@1.3.0~postinstall: cannot run in wd @vocascan/server@1.3.0 node -e \"process.exit(process.env.npm_config_sqlite === 'true')\" || npm i --no-save --no-package-lock sqlite3 (wd=/build)\n\u001b[0m\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@2.3.2 (node_modules/fsevents):\nnpm WARN notsup\u001b[0m\u001b[91m SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91m\n\u001b[0madded 373 packages from 416 contributors and audited 704 packages in 6.257s\n\n23 packages are looking for funding\n  run `npm fund` for details\n\nfound 55 vulnerabilities (1 low, 12 moderate, 38 high, 4 critical)\n  run `npm audit fix` to fix them, or `npm audit` for details\n\u001b[91mnpm WARN using --force I sure hope you know what you are doing.\n\u001b[0mRemoving intermediate container 09abbe84a06a\n ---> 4d4ba659de41\nStep 6/11 : FROM node:14-alpine\n ---> fb7170aa2b9b\nStep 7/11 : WORKDIR /app\n ---> Running in 5ee25704973f\nRemoving intermediate container 5ee25704973f\n ---> fb16459f8eb2\nStep 8/11 : COPY --from=builder /build/node_modules /app/node_modules\n ---> 06bc61b8891d\nStep 9/11 : COPY . .\n ---> 59634d9ad7eb\nStep 10/11 : RUN npm link\n ---> Running in 5a02ae970e53\n\u001b[91mnpm\u001b[0m\u001b[91m WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!\n\u001b[0m\n> nodemon@2.0.7 postinstall /app/node_modules/nodemon\n> node bin/postinstall || exit 0\n\n\u001b[32mLove nodemon? You can now support the project via the open collective:\u001b[22m\u001b[39m\n > \u001b[96m\u001b[1mhttps://opencollective.com/nodemon/donate\u001b[0m\n\n\u001b[91mnpm WARN lifecycle @vocascan/server@1.3.0~postinstall: cannot run in wd @vocascan/server@1.3.0 node -e \"process.exit(process.env.npm_config_sqlite === 'true')\" || npm i --no-save --no-package-lock sqlite3 (wd=/app)\n\u001b[0m\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@2.3.2 (node_modules/fsevents):\nnpm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91m\n\u001b[0madded 327 packages from 149 contributors and audited 704 packages in 6.162s\n\n70 packages are looking for funding\n  run `npm fund` for details\n\nfound 55 vulnerabilities (1 low, 12 moderate, 38 high, 4 critical)\n  run `npm audit fix` to fix them, or `npm audit` for details\n/usr/local/bin/vocascan-server -> /usr/local/lib/node_modules/@vocascan/server/vocascan-server.js\n/usr/local/lib/node_modules/@vocascan/server -> /app\nRemoving intermediate container 5a02ae970e53\n ---> 5e263ceacc77\nStep 11/11 : CMD [\"vocascan-server\", \"web\"]\n ---> Running in 187234ca4c4f\nRemoving intermediate container 187234ca4c4f\n ---> 42b8266b2e74\nSuccessfully built 42b8266b2e74\nSuccessfully tagged vocascan-server:latest\n","stderr":"","imageSize":272210900}}