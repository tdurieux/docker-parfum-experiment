{"repository":"https://github.com/vyvy-vi/teardrops","dockerfilePath":"Dockerfile","startTime":1672615662046,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/vyvy-vi/teardrops'...\n","error":null,"commit":"9712e58c6d4ee3239461559b9892f34eaab5b479"},"originalBuild":{"startTimestamp":1672615662998,"endTimestamp":1672615696330,"error":null,"stdout":"Sending build context to Docker daemon  116.2kB\r\r\nStep 1/19 : FROM python:3.8-slim as base\n ---> 61afbf515f15\nStep 2/19 : ENV LANG C.UTF-8\n ---> Running in 82f4497d96db\nRemoving intermediate container 82f4497d96db\n ---> 9780f194ffe8\nStep 3/19 : ENV LC_ALL C.UTF-8\n ---> Running in 689ed5d5b967\nRemoving intermediate container 689ed5d5b967\n ---> 487a82183497\nStep 4/19 : ENV PYTHONDONTWRITEBYTECODE 1\n ---> Running in 7827adc49c99\nRemoving intermediate container 7827adc49c99\n ---> 7c5c26af54c6\nStep 5/19 : ENV PYTHONFAULTHANDLER 1\n ---> Running in 81df5b4669ea\nRemoving intermediate container 81df5b4669ea\n ---> fac69eedc616\nStep 6/19 : FROM base AS python-deps\n ---> fac69eedc616\nStep 7/19 : RUN pip install pipenv\n ---> Running in 0a84240ac684\nCollecting pipenv\n  Downloading pipenv-2022.12.19-py3-none-any.whl (2.9 MB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 2.9/2.9 MB 46.6 MB/s eta 0:00:00\nCollecting certifi\n  Downloading certifi-2022.12.7-py3-none-any.whl (155 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 155.3/155.3 KB 14.7 MB/s eta 0:00:00\nCollecting virtualenv\n  Downloading virtualenv-20.17.1-py3-none-any.whl (8.8 MB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 8.8/8.8 MB 44.4 MB/s eta 0:00:00\nCollecting virtualenv-clone>=0.2.5\n  Downloading virtualenv_clone-0.5.7-py3-none-any.whl (6.6 kB)\nRequirement already satisfied: setuptools>=36.2.1 in /usr/local/lib/python3.8/site-packages (from pipenv) (57.5.0)\nCollecting distlib<1,>=0.3.6\n  Downloading distlib-0.3.6-py2.py3-none-any.whl (468 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 468.5/468.5 KB 33.3 MB/s eta 0:00:00\nCollecting filelock<4,>=3.4.1\n  Downloading filelock-3.9.0-py3-none-any.whl (9.7 kB)\nCollecting platformdirs<3,>=2.4\n  Downloading platformdirs-2.6.2-py3-none-any.whl (14 kB)\nInstalling collected packages: distlib, virtualenv-clone, platformdirs, filelock, certifi, virtualenv, pipenv\nSuccessfully installed certifi-2022.12.7 distlib-0.3.6 filelock-3.9.0 pipenv-2022.12.19 platformdirs-2.6.2 virtualenv-20.17.1 virtualenv-clone-0.5.7\n\u001b[91mWARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv\n\u001b[0m\u001b[91mWARNING: You are using pip version 22.0.4; however, version 22.3.1 is available.\nYou should consider upgrading via the '/usr/local/bin/python -m pip install --upgrade pip' command.\n\u001b[0mRemoving intermediate container 0a84240ac684\n ---> 8c0b790da662\nStep 8/19 : RUN apt-get update && apt-get install -y --no-install-recommends\n ---> Running in ef5b32df826d\nGet:1 http://deb.debian.org/debian bullseye InRelease [116 kB]\nGet:2 http://deb.debian.org/debian-security bullseye-security InRelease [48.4 kB]\nGet:3 http://deb.debian.org/debian bullseye-updates InRelease [44.1 kB]\nGet:4 http://deb.debian.org/debian bullseye/main amd64 Packages [8183 kB]\nGet:5 http://deb.debian.org/debian-security bullseye-security/main amd64 Packages [210 kB]\nGet:6 http://deb.debian.org/debian bullseye-updates/main amd64 Packages [14.6 kB]\nFetched 8616 kB in 1s (7045 kB/s)\nReading package lists...\nReading package lists...\nBuilding dependency tree...\nReading state information...\n0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.\nRemoving intermediate container ef5b32df826d\n ---> af9be09b4478\nStep 9/19 : COPY Pipfile .\n ---> 9d2f2ea0175a\nStep 10/19 : COPY Pipfile.lock .\n ---> 44a567f081da\nStep 11/19 : RUN PIPENV_VENV_IN_PROJECT=1 pipenv install --deploy\n ---> Running in d402bee0b786\n\u001b[91mCreating a virtualenv for this project...\nPipfile: /Pipfile\n\u001b[0m\u001b[91mUsing /usr/local/bin/python3.8 (3.8.16) to create virtualenv...\n\u001b[0m\u001b[91mcreated virtual environment CPython3.8.16.final.0-64 in 639ms\n  creator CPython3Posix(dest=/.venv, clear=False, no_vcs_ignore=False, global=False)\n  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, wheel=bundle, via=copy, app_data_dir=/root/.local/share/virtualenv)\n    added seed packages: pip==22.3.1, setuptools==65.6.3, wheel==0.38.4\n  activators BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator,PythonActivator\n\n\u001b[0m\u001b[91m✔ Successfully created virtual environment!\n\u001b[0m\u001b[91mVirtualenv location: /.venv\n\u001b[0mInstalling dependencies from Pipfile.lock (20233a)...\nRemoving intermediate container d402bee0b786\n ---> 9568a0330acd\nStep 12/19 : FROM base AS runtime\n ---> fac69eedc616\nStep 13/19 : COPY --from=python-deps /.venv /.venv\n ---> 2855166fea0d\nStep 14/19 : ENV PATH=\"/.venv/bin:$PATH\"\n ---> Running in b263ae6c4d7c\nRemoving intermediate container b263ae6c4d7c\n ---> a5bd431f600d\nStep 15/19 : RUN useradd --create-home appuser\n ---> Running in 4cb9221f4f94\nRemoving intermediate container 4cb9221f4f94\n ---> 2097686c07c0\nStep 16/19 : WORKDIR /home/appuser\n ---> Running in 982d5996f1c2\nRemoving intermediate container 982d5996f1c2\n ---> c3e6a2b719d0\nStep 17/19 : USER appuser\n ---> Running in ed16c1ebf064\nRemoving intermediate container ed16c1ebf064\n ---> 659c937fbdd4\nStep 18/19 : COPY . .\n ---> c8d9b954db16\nStep 19/19 : CMD [\"python\", \"./bot/main.py\"]\n ---> Running in 4460a6b4961f\nRemoving intermediate container 4460a6b4961f\n ---> 5638c560aff1\nSuccessfully built 5638c560aff1\nSuccessfully tagged teardrops:latest\n","stderr":"","imageSize":158919496},"repair":{"violations":[{"name":"pipUseNoCacheDir","position":{"start":12,"end":12,"columnStart":4,"columnEnd":22}},{"name":"ruleAptGetInstallThenRemoveAptLists","position":{"start":13,"end":13,"columnStart":22,"columnEnd":64}}],"repairedDockerfile":"FROM python:3.8-slim as base\n\n# Setup env\nENV LANG C.UTF-8\nENV LC_ALL C.UTF-8\nENV PYTHONDONTWRITEBYTECODE 1\nENV PYTHONFAULTHANDLER 1\n\n\nFROM base AS python-deps\n\n# Install pipenv and compilation deps\nRUN pip install --no-cache-dir pipenv\nRUN apt-get update && apt-get install -y --no-install-recommends\n\n# Install python deps\nCOPY Pipfile .\nCOPY Pipfile.lock .\nRUN PIPENV_VENV_IN_PROJECT=1 pipenv install --deploy\n\n\nFROM base AS runtime\n\n# Copy virtual env from python-deps stage\nCOPY --from=python-deps /.venv /.venv\nENV PATH=\"/.venv/bin:$PATH\"\n\n# Create and switch to a new user\nRUN useradd --create-home appuser\nWORKDIR /home/appuser\nUSER appuser\n\n# Install application into container\nCOPY . .\n\n# Run the application\nCMD [\"python\", \"./bot/main.py\"]\n"},"repairedBuild":{"startTimestamp":1672615696688,"endTimestamp":1672615730893,"error":null,"stdout":"Sending build context to Docker daemon  116.2kB\r\r\nStep 1/19 : FROM python:3.8-slim as base\n ---> 61afbf515f15\nStep 2/19 : ENV LANG C.UTF-8\n ---> Running in dad9e044a3ab\nRemoving intermediate container dad9e044a3ab\n ---> b1a5d4d9b379\nStep 3/19 : ENV LC_ALL C.UTF-8\n ---> Running in 76c0a133d80b\nRemoving intermediate container 76c0a133d80b\n ---> d8cbd747f057\nStep 4/19 : ENV PYTHONDONTWRITEBYTECODE 1\n ---> Running in 75c95d2b9404\nRemoving intermediate container 75c95d2b9404\n ---> 78eadd744666\nStep 5/19 : ENV PYTHONFAULTHANDLER 1\n ---> Running in 2894e7eb2d1d\nRemoving intermediate container 2894e7eb2d1d\n ---> 5810f1c40119\nStep 6/19 : FROM base AS python-deps\n ---> 5810f1c40119\nStep 7/19 : RUN pip install --no-cache-dir pipenv\n ---> Running in 5e1980a672de\nCollecting pipenv\n  Downloading pipenv-2022.12.19-py3-none-any.whl (2.9 MB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 2.9/2.9 MB 109.5 MB/s eta 0:00:00\nCollecting virtualenv-clone>=0.2.5\n  Downloading virtualenv_clone-0.5.7-py3-none-any.whl (6.6 kB)\nRequirement already satisfied: setuptools>=36.2.1 in /usr/local/lib/python3.8/site-packages (from pipenv) (57.5.0)\nCollecting certifi\n  Downloading certifi-2022.12.7-py3-none-any.whl (155 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 155.3/155.3 KB 280.7 MB/s eta 0:00:00\nCollecting virtualenv\n  Downloading virtualenv-20.17.1-py3-none-any.whl (8.8 MB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 8.8/8.8 MB 118.4 MB/s eta 0:00:00\nCollecting platformdirs<3,>=2.4\n  Downloading platformdirs-2.6.2-py3-none-any.whl (14 kB)\nCollecting distlib<1,>=0.3.6\n  Downloading distlib-0.3.6-py2.py3-none-any.whl (468 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 468.5/468.5 KB 168.3 MB/s eta 0:00:00\nCollecting filelock<4,>=3.4.1\n  Downloading filelock-3.9.0-py3-none-any.whl (9.7 kB)\nInstalling collected packages: distlib, virtualenv-clone, platformdirs, filelock, certifi, virtualenv, pipenv\nSuccessfully installed certifi-2022.12.7 distlib-0.3.6 filelock-3.9.0 pipenv-2022.12.19 platformdirs-2.6.2 virtualenv-20.17.1 virtualenv-clone-0.5.7\n\u001b[91mWARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv\n\u001b[0m\u001b[91mWARNING: You are using pip version 22.0.4; however, version 22.3.1 is available.\nYou should consider upgrading via the '/usr/local/bin/python -m pip install --upgrade pip' command.\n\u001b[0mRemoving intermediate container 5e1980a672de\n ---> 2261885ed1d9\nStep 8/19 : RUN apt-get update && apt-get install -y --no-install-recommends\n ---> Running in dbf4dae10d6c\nGet:1 http://deb.debian.org/debian bullseye InRelease [116 kB]\nGet:2 http://deb.debian.org/debian-security bullseye-security InRelease [48.4 kB]\nGet:3 http://deb.debian.org/debian bullseye-updates InRelease [44.1 kB]\nGet:4 http://deb.debian.org/debian bullseye/main amd64 Packages [8183 kB]\nGet:5 http://deb.debian.org/debian-security bullseye-security/main amd64 Packages [210 kB]\nGet:6 http://deb.debian.org/debian bullseye-updates/main amd64 Packages [14.6 kB]\nFetched 8616 kB in 1s (6670 kB/s)\nReading package lists...\nReading package lists...\nBuilding dependency tree...\nReading state information...\n0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.\nRemoving intermediate container dbf4dae10d6c\n ---> d5ba88be5b27\nStep 9/19 : COPY Pipfile .\n ---> a1a852774589\nStep 10/19 : COPY Pipfile.lock .\n ---> 99f957cd6dea\nStep 11/19 : RUN PIPENV_VENV_IN_PROJECT=1 pipenv install --deploy\n ---> Running in c22bf388504e\n\u001b[91mCreating a virtualenv for this project...\nPipfile: /Pipfile\n\u001b[0m\u001b[91mUsing /usr/local/bin/python3.8 (3.8.16) to create virtualenv...\n\u001b[0m\u001b[91mcreated virtual environment CPython3.8.16.final.0-64 in 714ms\n  creator CPython3Posix(dest=/.venv, clear=False, no_vcs_ignore=False, global=False)\n  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, wheel=bundle, via=copy, app_data_dir=/root/.local/share/virtualenv)\n    added seed packages: pip==22.3.1, setuptools==65.6.3, wheel==0.38.4\n  activators BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator,PythonActivator\n\n\u001b[0m\u001b[91m✔ Successfully created virtual environment!\n\u001b[0m\u001b[91mVirtualenv location: /.venv\n\u001b[0mInstalling dependencies from Pipfile.lock (20233a)...\nRemoving intermediate container c22bf388504e\n ---> 6ca330265bb7\nStep 12/19 : FROM base AS runtime\n ---> 5810f1c40119\nStep 13/19 : COPY --from=python-deps /.venv /.venv\n ---> cc2e307d1d05\nStep 14/19 : ENV PATH=\"/.venv/bin:$PATH\"\n ---> Running in b4c3ad724685\nRemoving intermediate container b4c3ad724685\n ---> a9401023889d\nStep 15/19 : RUN useradd --create-home appuser\n ---> Running in a617912df8a5\nRemoving intermediate container a617912df8a5\n ---> 4a54d8e52cc2\nStep 16/19 : WORKDIR /home/appuser\n ---> Running in 58e44caf75b2\nRemoving intermediate container 58e44caf75b2\n ---> 17fb78ca3e1f\nStep 17/19 : USER appuser\n ---> Running in 52633fcb7f86\nRemoving intermediate container 52633fcb7f86\n ---> 762fc6bbc4bb\nStep 18/19 : COPY . .\n ---> 2997ac373abb\nStep 19/19 : CMD [\"python\", \"./bot/main.py\"]\n ---> Running in 581c2beb6308\nRemoving intermediate container 581c2beb6308\n ---> c946fd57ada1\nSuccessfully built c946fd57ada1\nSuccessfully tagged teardrops:latest\n","stderr":"","imageSize":158919511},"endTime":1672615731213}