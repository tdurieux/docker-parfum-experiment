{"repository":"https://github.com/bmoers/docker-mid-server","dockerfilePath":"Dockerfile","startTime":1672733476656,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/bmoers/docker-mid-server'...\n","error":null,"commit":"b6a0fb8a143f0fd45a18e53259f22b550657057b"},"originalBuild":{"startTimestamp":1672733477495,"endTimestamp":1672733525806,"error":null,"stdout":"Sending build context to Docker daemon   80.9kB\r\r\nStep 1/10 : FROM docker:20.10.17\n20.10.17: Pulling from library/docker\n213ec9aee27d: Already exists\n6eb510456a42: Pulling fs layer\n4627ba0696d0: Pulling fs layer\ne001120e1cd4: Pulling fs layer\nff3ada922ff1: Pulling fs layer\nd14644374e46: Pulling fs layer\n6de03787241b: Pulling fs layer\ne89f86b0af45: Pulling fs layer\n40f2e1afd0a5: Pulling fs layer\n6de03787241b: Waiting\nd14644374e46: Waiting\nff3ada922ff1: Waiting\n40f2e1afd0a5: Waiting\ne89f86b0af45: Waiting\n6eb510456a42: Verifying Checksum\n6eb510456a42: Download complete\n4627ba0696d0: Verifying Checksum\n4627ba0696d0: Download complete\ne001120e1cd4: Verifying Checksum\ne001120e1cd4: Download complete\n6eb510456a42: Pull complete\n4627ba0696d0: Pull complete\nff3ada922ff1: Verifying Checksum\nff3ada922ff1: Download complete\n6de03787241b: Verifying Checksum\n6de03787241b: Download complete\nd14644374e46: Verifying Checksum\nd14644374e46: Download complete\ne89f86b0af45: Verifying Checksum\ne89f86b0af45: Download complete\n40f2e1afd0a5: Download complete\ne001120e1cd4: Pull complete\nff3ada922ff1: Pull complete\nd14644374e46: Pull complete\n6de03787241b: Pull complete\ne89f86b0af45: Pull complete\n40f2e1afd0a5: Pull complete\nDigest: sha256:6c5c8b70d0de524ff092921c05ebe9c1b0d05c29962d6717666b29049e52aefe\nStatus: Downloaded newer image for docker:20.10.17\n ---> 0dfb722b2a54\nStep 2/10 : COPY --from=docker/buildx-bin:v0.9 /buildx /usr/libexec/docker/cli-plugins/docker-buildx\nv0.9: Pulling from docker/buildx-bin\n944eb5bc0d82: Pulling fs layer\n944eb5bc0d82: Verifying Checksum\n944eb5bc0d82: Download complete\n944eb5bc0d82: Pull complete\nDigest: sha256:e26933028c4c75a5313d19f71f1bbeebd4c954216db7947149fd7d7fe431fd7c\nStatus: Downloaded newer image for docker/buildx-bin:v0.9\n ---> aef3288b076a\nStep 3/10 : RUN apk add --update nodejs     npm     openrc     bash &&     rm -rf /var/cache/apk/*\n ---> Running in 4724f0f46444\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/community/x86_64/APKINDEX.tar.gz\n(1/13) Installing readline (8.1.2-r0)\n(2/13) Installing bash (5.1.16-r2)\nExecuting bash-5.1.16-r2.post-install\n(3/13) Installing nghttp2-libs (1.47.0-r0)\n(4/13) Installing brotli-libs (1.0.9-r6)\n(5/13) Installing c-ares (1.18.1-r0)\n(6/13) Installing libgcc (11.2.1_git20220219-r2)\n(7/13) Installing icu-data-en (71.1-r2)\nExecuting icu-data-en-71.1-r2.post-install\n\u001b[91m*\n* If you need ICU with non-English locales and legacy charset support, install\n* package icu-data-full.\n*\n\u001b[0m(8/13) Installing libstdc++ (11.2.1_git20220219-r2)\n(9/13) Installing icu-libs (71.1-r2)\n(10/13) Installing nodejs (16.17.1-r0)\n(11/13) Installing npm (8.10.0-r0)\n(12/13) Installing ifupdown-ng (0.12.1-r0)\n(13/13) Installing openrc (0.44.10-r7)\nExecuting openrc-0.44.10-r7.post-install\nExecuting busybox-1.35.0-r17.trigger\nOK: 68 MiB in 35 packages\nRemoving intermediate container 4724f0f46444\n ---> 33f56299e5c6\nStep 4/10 : RUN mkdir /opt/node\n ---> Running in d5c39ef2c372\nRemoving intermediate container d5c39ef2c372\n ---> 3dcf72a97e72\nStep 5/10 : WORKDIR /opt/node\n ---> Running in 59d012c92fa9\nRemoving intermediate container 59d012c92fa9\n ---> 1bfa0082ef41\nStep 6/10 : COPY docker/ ./docker\n ---> 9f07dca3225f\nStep 7/10 : COPY package*.json ./\n ---> 73fc05889e18\nStep 8/10 : RUN npm install --no-optional && npm cache clean --force\n ---> Running in dd580f57910b\n\u001b[91mnpm\u001b[0m\u001b[91m WARN config\u001b[0m\u001b[91m optional Use `--omit=optional` to exclude optional dependencies, or\nnpm \u001b[0m\u001b[91mWARN\u001b[0m\u001b[91m config `--include=optional` to include them.\n\u001b[0m\u001b[91mnpm\u001b[0m\u001b[91m \u001b[0m\u001b[91mWARN \u001b[0m\u001b[91mconfig\u001b[0m\u001b[91m \nnpm \u001b[0m\u001b[91mWARN \u001b[0m\u001b[91mconfig\u001b[0m\u001b[91m     Default value does install optional deps unless otherwise omitted.\n\u001b[0m\u001b[91mnpm WARN deprecated har-validator@5.1.3: this library is no longer supported\n\u001b[0m\u001b[91mnpm WARN deprecated request-promise@4.2.6: request-promise has been deprecated because it extends the now deprecated request package, see https://github.com/request/request/issues/3142\n\u001b[0m\u001b[91mnpm WARN deprecated uuid@3.4.0: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.\n\u001b[0m\u001b[91mnpm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142\n\u001b[0m\u001b[91mnpm WARN \u001b[0m\u001b[91mdeprecated core-js@2.6.9: core-js@<3.3 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.\n\u001b[0m\nadded 76 packages, and audited 77 packages in 4s\n\n5 packages are looking for funding\n  run `npm fund` for details\n\n1 high severity vulnerability\n\nTo address all issues, run:\n  npm audit fix\n\nRun `npm audit` for details.\n\u001b[91mnpm\u001b[0m\u001b[91m WARN\u001b[0m\u001b[91m \u001b[0m\u001b[91musing --force\u001b[0m\u001b[91m Recommended protections disabled.\n\u001b[0mRemoving intermediate container dd580f57910b\n ---> d99a79d08cf7\nStep 9/10 : COPY ./app.js .\n ---> 3c34c72aca34\nStep 10/10 : CMD node app.js\n ---> Running in cce09c6484e8\nRemoving intermediate container cce09c6484e8\n ---> 7c838718a367\nSuccessfully built 7c838718a367\nSuccessfully tagged docker-mid-server:latest\n","stderr":"","imageSize":252152196},"repair":{"violations":[{"name":"apkAddUseNoCache","position":{"start":13,"end":16,"columnStart":4,"columnEnd":8}}],"repairedDockerfile":"FROM docker:20.10.17\n\nCOPY --from=docker/buildx-bin:v0.9 /buildx /usr/libexec/docker/cli-plugins/docker-buildx\n\n# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #\n#\n#   The MID Server image can be found here:\n#   https://github.com/bmoers/docker-mid-server/blob/master/docker/Dockerfile\n#\n#   This Dockerfile is only to refresh the MID docker images\n#\n# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #\n\nRUN apk add --no-cache --update nodejs \\\n    npm \\\n    openrc \\\n    bash && \\\n    rm -rf /var/cache/apk/*\n\nRUN mkdir /opt/node\nWORKDIR /opt/node\n\nCOPY docker/ ./docker\nCOPY package*.json ./\n\nRUN npm install --no-optional && npm cache clean --force\n\nCOPY ./app.js .\n\nCMD node app.js\n"},"repairedBuild":{"startTimestamp":1672733527430,"endTimestamp":1672733547888,"error":null,"stdout":"Sending build context to Docker daemon   80.9kB\r\r\nStep 1/10 : FROM docker:20.10.17\n ---> 0dfb722b2a54\nStep 2/10 : COPY --from=docker/buildx-bin:v0.9 /buildx /usr/libexec/docker/cli-plugins/docker-buildx\n ---> 6374ff82deab\nStep 3/10 : RUN apk add --no-cache --update nodejs     npm     openrc     bash &&     rm -rf /var/cache/apk/*\n ---> Running in 3309b66fa969\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/community/x86_64/APKINDEX.tar.gz\n(1/13) Installing readline (8.1.2-r0)\n(2/13) Installing bash (5.1.16-r2)\nExecuting bash-5.1.16-r2.post-install\n(3/13) Installing nghttp2-libs (1.47.0-r0)\n(4/13) Installing brotli-libs (1.0.9-r6)\n(5/13) Installing c-ares (1.18.1-r0)\n(6/13) Installing libgcc (11.2.1_git20220219-r2)\n(7/13) Installing icu-data-en (71.1-r2)\nExecuting icu-data-en-71.1-r2.post-install\n\u001b[91m*\n* If you need ICU with non-English locales and legacy charset support, install\n* package icu-data-full.\n*\n\u001b[0m(8/13) Installing libstdc++ (11.2.1_git20220219-r2)\n(9/13) Installing icu-libs (71.1-r2)\n(10/13) Installing nodejs (16.17.1-r0)\n(11/13) Installing npm (8.10.0-r0)\n(12/13) Installing ifupdown-ng (0.12.1-r0)\n(13/13) Installing openrc (0.44.10-r7)\nExecuting openrc-0.44.10-r7.post-install\nExecuting busybox-1.35.0-r17.trigger\nOK: 68 MiB in 35 packages\nRemoving intermediate container 3309b66fa969\n ---> c284fadc1d64\nStep 4/10 : RUN mkdir /opt/node\n ---> Running in 5f4f81e2ccaf\nRemoving intermediate container 5f4f81e2ccaf\n ---> b40a3554e37d\nStep 5/10 : WORKDIR /opt/node\n ---> Running in 28e2b911c504\nRemoving intermediate container 28e2b911c504\n ---> 4484c71b1354\nStep 6/10 : COPY docker/ ./docker\n ---> e455442cd5a0\nStep 7/10 : COPY package*.json ./\n ---> 6889666ed55f\nStep 8/10 : RUN npm install --no-optional && npm cache clean --force\n ---> Running in 22aa235e9fe8\n\u001b[91mnpm\u001b[0m\u001b[91m WARN config optional Use `--omit=optional` to exclude optional dependencies, or\nnpm WARN\u001b[0m\u001b[91m config `--include=optional` to include them.\n\u001b[0m\u001b[91mnpm WARN config\u001b[0m\u001b[91m \nnpm \u001b[0m\u001b[91mWARN \u001b[0m\u001b[91mconfig     Default value does install optional deps unless otherwise omitted.\n\u001b[0m\u001b[91mnpm WARN deprecated har-validator@5.1.3: this library is no longer supported\n\u001b[0m\u001b[91mnpm WARN deprecated request-promise@4.2.6: request-promise has been deprecated because it extends the now deprecated request package, see https://github.com/request/request/issues/3142\n\u001b[0m\u001b[91mnpm WARN deprecated uuid@3.4.0: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.\n\u001b[0m\u001b[91mnpm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142\n\u001b[0m\u001b[91mnpm WARN \u001b[0m\u001b[91mdeprecated core-js@2.6.9: core-js@<3.3 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.\n\u001b[0m\nadded 76 packages, and audited 77 packages in 2s\n\n5 packages are looking for funding\n  run `npm fund` for details\n\n1 high severity vulnerability\n\nTo address all issues, run:\n  npm audit fix\n\nRun `npm audit` for details.\n\u001b[91mnpm\u001b[0m\u001b[91m WARN using --force Recommended protections disabled.\n\u001b[0mRemoving intermediate container 22aa235e9fe8\n ---> 0b885bc620a7\nStep 9/10 : COPY ./app.js .\n ---> fe561c39f9eb\nStep 10/10 : CMD node app.js\n ---> Running in 48e90eac4cb6\nRemoving intermediate container 48e90eac4cb6\n ---> e4c980a3338e\nSuccessfully built e4c980a3338e\nSuccessfully tagged docker-mid-server:latest\n","stderr":"","imageSize":252152221},"endTime":1672733548286}