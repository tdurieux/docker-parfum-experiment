{"repository":"https://github.com/vakenbolt/go-test-report","dockerfilePath":"Dockerfile","startTime":1672902974616,"endTime":1672903154655,"clone":{"startTime":1672902974617,"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/vakenbolt/go-test-report'...\n","error":null,"endTime":1672902975417,"commit":"75f29009b567b2ec336dd4986a61691bcd6df11c"},"originalBuild":{"startTime":1672902975506,"endTime":1672903054667,"error":null,"stdout":"Sending build context to Docker daemon  501.2kB\r\r\nStep 1/12 : FROM golang:1.14-alpine\n1.14-alpine: Pulling from library/golang\n4c0d98bf9879: Already exists\n9e181322f1e7: Pulling fs layer\n6422294da7d3: Pulling fs layer\neb57f1833670: Pulling fs layer\nbd57f1a80d4e: Pulling fs layer\nbd57f1a80d4e: Waiting\n6422294da7d3: Download complete\n9e181322f1e7: Verifying Checksum\n9e181322f1e7: Pull complete\n6422294da7d3: Pull complete\nbd57f1a80d4e: Verifying Checksum\neb57f1833670: Verifying Checksum\neb57f1833670: Download complete\neb57f1833670: Pull complete\nbd57f1a80d4e: Pull complete\nDigest: sha256:e196a762bd349b188d66c539354fc23f0e5a0178c214e6dfe4d7894c3c2753f1\nStatus: Downloaded newer image for golang:1.14-alpine\n ---> 32dc91e030ac\nStep 2/12 : RUN apk add build-base\n ---> Running in 3a231d920ff4\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.13/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.13/community/x86_64/APKINDEX.tar.gz\n(1/21) Upgrading musl (1.2.2-r0 -> 1.2.2-r1)\n(2/21) Installing libgcc (10.2.1_pre1-r3)\n(3/21) Installing libstdc++ (10.2.1_pre1-r3)\n(4/21) Installing binutils (2.35.2-r1)\n(5/21) Installing libmagic (5.39-r0)\n(6/21) Installing file (5.39-r0)\n(7/21) Installing libgomp (10.2.1_pre1-r3)\n(8/21) Installing libatomic (10.2.1_pre1-r3)\n(9/21) Installing libgphobos (10.2.1_pre1-r3)\n(10/21) Installing gmp (6.2.1-r1)\n(11/21) Installing isl22 (0.22-r0)\n(12/21) Installing mpfr4 (4.1.0-r0)\n(13/21) Installing mpc1 (1.2.0-r0)\n(14/21) Installing gcc (10.2.1_pre1-r3)\n(15/21) Installing musl-dev (1.2.2-r1)\n(16/21) Installing libc-dev (0.7.2-r3)\n(17/21) Installing g++ (10.2.1_pre1-r3)\n(18/21) Installing make (4.3-r0)\n(19/21) Installing fortify-headers (1.1-r0)\n(20/21) Installing patch (2.7.6-r7)\n(21/21) Installing build-base (0.5-r3)\nExecuting busybox-1.32.1-r2.trigger\nOK: 196 MiB in 35 packages\nRemoving intermediate container 3a231d920ff4\n ---> 3e67caafc417\nStep 3/12 : RUN apk add --no-cache shadow\n ---> Running in cbc6af54e173\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.13/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.13/community/x86_64/APKINDEX.tar.gz\n(1/2) Installing linux-pam (1.5.1-r0)\n(2/2) Installing shadow (4.8.1-r0)\nExecuting busybox-1.32.1-r2.trigger\nOK: 198 MiB in 37 packages\nRemoving intermediate container cbc6af54e173\n ---> e074dae7676b\nStep 4/12 : RUN apk add --update nodejs npm\n ---> Running in 0041f34c6521\n(1/5) Installing nghttp2-libs (1.42.0-r1)\n(2/5) Installing brotli-libs (1.0.9-r3)\n(3/5) Installing c-ares (1.17.2-r0)\n(4/5) Installing nodejs (14.20.1-r0)\n(5/5) Installing npm (14.20.1-r0)\nExecuting busybox-1.32.1-r2.trigger\nOK: 262 MiB in 42 packages\nRemoving intermediate container 0041f34c6521\n ---> de0fb3a6c312\nStep 5/12 : RUN groupadd -r dockeruser && useradd -r -g dockeruser dockeruser\n ---> Running in a592a1c3afb3\nRemoving intermediate container a592a1c3afb3\n ---> 8db3a0aef259\nStep 6/12 : WORKDIR /home/dockeruser\n ---> Running in 648d7cbb1a80\nRemoving intermediate container 648d7cbb1a80\n ---> 957412d74295\nStep 7/12 : ADD . .\n ---> 9a0ea99880fd\nStep 8/12 : RUN npm install\n ---> Running in 996d9ee93618\n\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@2.2.1 (node_modules/fsevents):\n\u001b[0m\u001b[91mnpm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.2.1: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91m\n\u001b[0madded 514 packages from 349 contributors and audited 515 packages in 7.423s\n\n23 packages are looking for funding\n  run `npm fund` for details\n\nfound 47 vulnerabilities (10 low, 4 moderate, 20 high, 13 critical)\n  run `npm audit fix` to fix them, or `npm audit` for details\nRemoving intermediate container 996d9ee93618\n ---> 7e28015c3382\nStep 9/12 : RUN npm fund\n ---> Running in 8f9ca6d70736\ngo-test-report@0.9.0\n+-- https://github.com/chalk/chalk?sponsor=1\n| `-- chalk@4.1.0\n+-- https://github.com/chalk/ansi-styles?sponsor=1\n| `-- ansi-styles@4.3.0\n+-- https://github.com/sponsors/jonschlinkert\n| `-- picomatch@2.2.2\n+-- https://github.com/sponsors/sindresorhus\n| `-- ansi-escapes@4.3.1, p-each-series@2.2.0, terminal-link@2.1.1, is-docker@2.1.1, make-dir@3.1.0, p-limit@2.3.0, type-fest@0.11.0, get-stream@5.2.0, onetime@5.1.2, read-pkg-up@7.0.1, parse-json@5.1.0, camelcase@6.2.0\n+-- https://github.com/sponsors/isaacs\n| `-- rimraf@3.0.2, glob@7.1.6\n+-- https://opencollective.com/babel\n| `-- @babel/core@7.12.9\n+-- https://github.com/sponsors/ljharb\n| `-- resolve@1.19.0, is-core-module@2.2.0\n+-- https://github.com/sindresorhus/execa?sponsor=1\n| `-- execa@4.1.0\n+-- https://github.com/sponsors/epoberezkin\n| `-- ajv@6.12.6\n`-- https://github.com/sindresorhus/emittery?sponsor=1\n  `-- emittery@0.7.2\n\nRemoving intermediate container 8f9ca6d70736\n ---> e589cdf05491\nStep 10/12 : RUN npm run test\n ---> Running in 43f742a1c1c0\n\n> go-test-report@0.9.0 test /home/dockeruser\n> jest\n\n\u001b[91mPASS ./test_report.test.js\n\u001b[0m\u001b[91m  ✓ test GoTestReport constructor with click event on a test group (15 ms)\n  ✓ test testGroupListHandler using [test group: 0] (16 ms)\n  ✓ test testGroupListHandler using [test group: 1] (6 ms)\n\n\u001b[0m\u001b[91mTest Suites: 1 passed, 1 total\nTests:       3 passed, 3 total\nSnapshots:   0 total\nTime:        1.247 s\nRan all test suites.\n\u001b[0mRemoving intermediate container 43f742a1c1c0\n ---> 5dab816ba56f\nStep 11/12 : RUN make genbuild\n ---> Running in 7eb0288bc846\n(cd embed_assets/;set -e;go build;./embed_assets)\ngo build\n\u001b[91mgo: downloading github.com/spf13/cobra v1.1.3\n\u001b[0m\u001b[91mgo: downloading golang.org/x/sync v0.0.0-20210220032951-036812b2e83c\n\u001b[0m\u001b[91mgo: downloading github.com/spf13/pflag v1.0.5\n\u001b[0mRemoving intermediate container 7eb0288bc846\n ---> 53e406c02d1d\nStep 12/12 : RUN go test -v\n ---> Running in 2b7be47a18b0\n\u001b[91mgo: downloading github.com/stretchr/testify v1.6.1\n\u001b[0m\u001b[91mgo: downloading github.com/pmezard/go-difflib v1.0.0\ngo: downloading github.com/davecgh/go-spew v1.1.1\ngo: downloading gopkg.in/yaml.v3 v3.0.0-20200615113413-eeeca48fe776\n\u001b[0m=== RUN   TestVersionCommand\n--- PASS: TestVersionCommand (0.00s)\n=== RUN   TestTitleFlag\nError: ERROR: missing ≪ stdin ≫ pipe\n--- PASS: TestTitleFlag (0.00s)\n=== RUN   TestTitleFlagIfMissingValue\nError: flag needs an argument: --title\n--- PASS: TestTitleFlagIfMissingValue (0.00s)\n=== RUN   TestSizeFlag\nError: ERROR: missing ≪ stdin ≫ pipe\n--- PASS: TestSizeFlag (0.00s)\n=== RUN   TestSizeFlagWithFullDimensions\nError: ERROR: missing ≪ stdin ≫ pipe\n--- PASS: TestSizeFlagWithFullDimensions (0.00s)\n=== RUN   TestSizeFlagIfMissingValue\nError: flag needs an argument: --size\n--- PASS: TestSizeFlagIfMissingValue (0.00s)\n=== RUN   TestGroupSizeFlag\nError: ERROR: missing ≪ stdin ≫ pipe\n--- PASS: TestGroupSizeFlag (0.00s)\n=== RUN   TestGroupSizeFlagIfMissingValue\nError: flag needs an argument: --groupSize\n--- PASS: TestGroupSizeFlagIfMissingValue (0.00s)\n=== RUN   TestGroupOutputFlag\nError: ERROR: missing ≪ stdin ≫ pipe\n--- PASS: TestGroupOutputFlag (0.00s)\n=== RUN   TestGroupOutputFlagIfMissingValue\nError: flag needs an argument: --output\n--- PASS: TestGroupOutputFlagIfMissingValue (0.00s)\n=== RUN   TestReadTestDataFromStdIn\n--- PASS: TestReadTestDataFromStdIn (0.00s)\n=== RUN   TestGetAllDetails\n--- PASS: TestGetAllDetails (0.00s)\n=== RUN   TestGenerateReport\n--- PASS: TestGenerateReport (0.00s)\n=== RUN   TestSameTestName\n--- PASS: TestSameTestName (0.00s)\n=== RUN   TestParseSizeFlagIfValueIsNotInteger\n--- PASS: TestParseSizeFlagIfValueIsNotInteger (0.00s)\n=== RUN   TestParseSizeFlagIfWidthValueIsNotInteger\n--- PASS: TestParseSizeFlagIfWidthValueIsNotInteger (0.00s)\n=== RUN   TestParseSizeFlagIfHeightValueIsNotInteger\n--- PASS: TestParseSizeFlagIfHeightValueIsNotInteger (0.00s)\n=== RUN   TestParseSizeFlagIfMalformedSize\n--- PASS: TestParseSizeFlagIfMalformedSize (0.00s)\nPASS\nok  \tgithub.com/vakenbolt/go-test-report\t0.014s\nRemoving intermediate container 2b7be47a18b0\n ---> 3d8ef40d6f3e\nSuccessfully built 3d8ef40d6f3e\nSuccessfully tagged go-test-report:latest\n","stderr":"","imageSize":611045375},"repair":{"startTime":1672903054740,"endTime":1672903054828,"violations":[{"name":"npmCacheCleanAfterInstall","position":{"start":18,"end":18,"columnStart":4,"columnEnd":15}},{"name":"apkAddUseNoCache","position":{"start":4,"end":4,"columnStart":4,"columnEnd":22}},{"name":"apkAddUseNoCache","position":{"start":9,"end":9,"columnStart":4,"columnEnd":31}}],"repairedDockerfile":"#FROM alpine\nFROM golang:1.14-alpine\n\n# installs GCC, libc-dev, etc\nRUN apk add --no-cache build-base\n\n# makes working with alpine-linux a little easier\nRUN apk add --no-cache shadow\n\nRUN apk add --no-cache --update nodejs npm\n\n# Create a non-privileged user for running the go app\nRUN groupadd -r dockeruser && useradd -r -g dockeruser dockeruser\n\nWORKDIR /home/dockeruser\n\nADD . .\n\nRUN npm install && npm cache clean --force;\nRUN npm fund\nRUN npm run test\n\n# Our Makefile version is GNU Make which alpine uses by default\nRUN make genbuild\nRUN go test -v\n"},"repairedBuild":{"startTime":1672903055544,"endTime":1672903154103,"error":null,"stdout":"Sending build context to Docker daemon  501.8kB\r\r\nStep 1/12 : FROM golang:1.14-alpine\n ---> 32dc91e030ac\nStep 2/12 : RUN apk add --no-cache build-base\n ---> Running in 40cc1f1262dc\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.13/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.13/community/x86_64/APKINDEX.tar.gz\n(1/21) Upgrading musl (1.2.2-r0 -> 1.2.2-r1)\n(2/21) Installing libgcc (10.2.1_pre1-r3)\n(3/21) Installing libstdc++ (10.2.1_pre1-r3)\n(4/21) Installing binutils (2.35.2-r1)\n(5/21) Installing libmagic (5.39-r0)\n(6/21) Installing file (5.39-r0)\n(7/21) Installing libgomp (10.2.1_pre1-r3)\n(8/21) Installing libatomic (10.2.1_pre1-r3)\n(9/21) Installing libgphobos (10.2.1_pre1-r3)\n(10/21) Installing gmp (6.2.1-r1)\n(11/21) Installing isl22 (0.22-r0)\n(12/21) Installing mpfr4 (4.1.0-r0)\n(13/21) Installing mpc1 (1.2.0-r0)\n(14/21) Installing gcc (10.2.1_pre1-r3)\n(15/21) Installing musl-dev (1.2.2-r1)\n(16/21) Installing libc-dev (0.7.2-r3)\n(17/21) Installing g++ (10.2.1_pre1-r3)\n(18/21) Installing make (4.3-r0)\n(19/21) Installing fortify-headers (1.1-r0)\n(20/21) Installing patch (2.7.6-r7)\n(21/21) Installing build-base (0.5-r3)\nExecuting busybox-1.32.1-r2.trigger\nOK: 196 MiB in 35 packages\nRemoving intermediate container 40cc1f1262dc\n ---> 26897e164f54\nStep 3/12 : RUN apk add --no-cache shadow\n ---> Running in 2e19e298b8bd\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.13/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.13/community/x86_64/APKINDEX.tar.gz\n(1/2) Installing linux-pam (1.5.1-r0)\n(2/2) Installing shadow (4.8.1-r0)\nExecuting busybox-1.32.1-r2.trigger\nOK: 198 MiB in 37 packages\nRemoving intermediate container 2e19e298b8bd\n ---> f5402daa78d5\nStep 4/12 : RUN apk add --no-cache --update nodejs npm\n ---> Running in eddd46131982\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.13/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.13/community/x86_64/APKINDEX.tar.gz\n(1/5) Installing nghttp2-libs (1.42.0-r1)\n(2/5) Installing brotli-libs (1.0.9-r3)\n(3/5) Installing c-ares (1.17.2-r0)\n(4/5) Installing nodejs (14.20.1-r0)\n(5/5) Installing npm (14.20.1-r0)\nExecuting busybox-1.32.1-r2.trigger\nOK: 262 MiB in 42 packages\nRemoving intermediate container eddd46131982\n ---> ebf81eb3ab96\nStep 5/12 : RUN groupadd -r dockeruser && useradd -r -g dockeruser dockeruser\n ---> Running in 80ccfbbff677\nRemoving intermediate container 80ccfbbff677\n ---> 29b167068c86\nStep 6/12 : WORKDIR /home/dockeruser\n ---> Running in 1246363b1d88\nRemoving intermediate container 1246363b1d88\n ---> 038cc913a0a8\nStep 7/12 : ADD . .\n ---> bdcdedaf6672\nStep 8/12 : RUN npm install && npm cache clean --force;\n ---> Running in af2bbd124c8c\n\u001b[91mnpm WARN optional\u001b[0m\u001b[91m SKIPPING OPTIONAL DEPENDENCY: fsevents@2.2.1 (node_modules/fsevents):\n\u001b[0m\u001b[91mnpm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.2.1: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91m\n\u001b[0madded 514 packages from 349 contributors and audited 515 packages in 9.497s\n\n23 packages are looking for funding\n  run `npm fund` for details\n\nfound 47 vulnerabilities (10 low, 4 moderate, 20 high, 13 critical)\n  run `npm audit fix` to fix them, or `npm audit` for details\n\u001b[91mnpm\u001b[0m\u001b[91m WARN using --force I sure hope you know what you are doing.\n\u001b[0mRemoving intermediate container af2bbd124c8c\n ---> 08d686d2c0cf\nStep 9/12 : RUN npm fund\n ---> Running in 91a787e16c2d\ngo-test-report@0.9.0\n+-- https://github.com/chalk/chalk?sponsor=1\n| `-- chalk@4.1.0\n+-- https://github.com/chalk/ansi-styles?sponsor=1\n| `-- ansi-styles@4.3.0\n+-- https://github.com/sponsors/jonschlinkert\n| `-- picomatch@2.2.2\n+-- https://github.com/sponsors/sindresorhus\n| `-- ansi-escapes@4.3.1, p-each-series@2.2.0, terminal-link@2.1.1, is-docker@2.1.1, make-dir@3.1.0, p-limit@2.3.0, type-fest@0.11.0, get-stream@5.2.0, onetime@5.1.2, read-pkg-up@7.0.1, parse-json@5.1.0, camelcase@6.2.0\n+-- https://github.com/sponsors/isaacs\n| `-- rimraf@3.0.2, glob@7.1.6\n+-- https://opencollective.com/babel\n| `-- @babel/core@7.12.9\n+-- https://github.com/sponsors/ljharb\n| `-- resolve@1.19.0, is-core-module@2.2.0\n+-- https://github.com/sindresorhus/execa?sponsor=1\n| `-- execa@4.1.0\n+-- https://github.com/sponsors/epoberezkin\n| `-- ajv@6.12.6\n`-- https://github.com/sindresorhus/emittery?sponsor=1\n  `-- emittery@0.7.2\n\nRemoving intermediate container 91a787e16c2d\n ---> aae05cb2f3e7\nStep 10/12 : RUN npm run test\n ---> Running in c133cb4e5cb7\n\n> go-test-report@0.9.0 test /home/dockeruser\n> jest\n\n\u001b[91mPASS ./test_report.test.js\n\u001b[0m\u001b[91m  ✓ test GoTestReport constructor with click event on a test group (20 ms)\n  ✓ test testGroupListHandler using [test group: 0] (16 ms)\n  ✓ test testGroupListHandler using [test group: 1] (6 ms)\n\n\u001b[0m\u001b[91mTest Suites: 1 passed, 1 total\nTests:       3 passed, 3 total\nSnapshots:   0 total\nTime:        1.323 s\nRan all test suites.\n\u001b[0mRemoving intermediate container c133cb4e5cb7\n ---> bc238269db8c\nStep 11/12 : RUN make genbuild\n ---> Running in 30904d173249\n(cd embed_assets/;set -e;go build;./embed_assets)\ngo build\n\u001b[91mgo: downloading github.com/spf13/cobra v1.1.3\n\u001b[0m\u001b[91mgo: downloading golang.org/x/sync v0.0.0-20210220032951-036812b2e83c\n\u001b[0m\u001b[91mgo: downloading github.com/spf13/pflag v1.0.5\n\u001b[0mRemoving intermediate container 30904d173249\n ---> 253de932f1a2\nStep 12/12 : RUN go test -v\n ---> Running in 01a498b6abde\n\u001b[91mgo: downloading github.com/stretchr/testify v1.6.1\n\u001b[0m\u001b[91mgo: downloading github.com/pmezard/go-difflib v1.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/davecgh/go-spew v1.1.1\ngo: downloading gopkg.in/yaml.v3 v3.0.0-20200615113413-eeeca48fe776\n\u001b[0m=== RUN   TestVersionCommand\n--- PASS: TestVersionCommand (0.00s)\n=== RUN   TestTitleFlag\nError: ERROR: missing ≪ stdin ≫ pipe\n--- PASS: TestTitleFlag (0.00s)\n=== RUN   TestTitleFlagIfMissingValue\nError: flag needs an argument: --title\n--- PASS: TestTitleFlagIfMissingValue (0.00s)\n=== RUN   TestSizeFlag\nError: ERROR: missing ≪ stdin ≫ pipe\n--- PASS: TestSizeFlag (0.00s)\n=== RUN   TestSizeFlagWithFullDimensions\nError: ERROR: missing ≪ stdin ≫ pipe\n--- PASS: TestSizeFlagWithFullDimensions (0.00s)\n=== RUN   TestSizeFlagIfMissingValue\nError: flag needs an argument: --size\n--- PASS: TestSizeFlagIfMissingValue (0.00s)\n=== RUN   TestGroupSizeFlag\nError: ERROR: missing ≪ stdin ≫ pipe\n--- PASS: TestGroupSizeFlag (0.00s)\n=== RUN   TestGroupSizeFlagIfMissingValue\nError: flag needs an argument: --groupSize\n--- PASS: TestGroupSizeFlagIfMissingValue (0.00s)\n=== RUN   TestGroupOutputFlag\nError: ERROR: missing ≪ stdin ≫ pipe\n--- PASS: TestGroupOutputFlag (0.00s)\n=== RUN   TestGroupOutputFlagIfMissingValue\nError: flag needs an argument: --output\n--- PASS: TestGroupOutputFlagIfMissingValue (0.00s)\n=== RUN   TestReadTestDataFromStdIn\n--- PASS: TestReadTestDataFromStdIn (0.00s)\n=== RUN   TestGetAllDetails\n--- PASS: TestGetAllDetails (0.00s)\n=== RUN   TestGenerateReport\n--- PASS: TestGenerateReport (0.00s)\n=== RUN   TestSameTestName\n--- PASS: TestSameTestName (0.00s)\n=== RUN   TestParseSizeFlagIfValueIsNotInteger\n--- PASS: TestParseSizeFlagIfValueIsNotInteger (0.00s)\n=== RUN   TestParseSizeFlagIfWidthValueIsNotInteger\n--- PASS: TestParseSizeFlagIfWidthValueIsNotInteger (0.00s)\n=== RUN   TestParseSizeFlagIfHeightValueIsNotInteger\n--- PASS: TestParseSizeFlagIfHeightValueIsNotInteger (0.00s)\n=== RUN   TestParseSizeFlagIfMalformedSize\n--- PASS: TestParseSizeFlagIfMalformedSize (0.00s)\nPASS\nok  \tgithub.com/vakenbolt/go-test-report\t0.019s\nRemoving intermediate container 01a498b6abde\n ---> ab360ce7966d\nSuccessfully built ab360ce7966d\nSuccessfully tagged go-test-report:latest\n","stderr":"","imageSize":597762569}}