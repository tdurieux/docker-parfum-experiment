{"repository":"https://github.com/peggyjv/sommelier","dockerfilePath":"Dockerfile","startTime":1672249400512,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/peggyjv/sommelier'...\n","error":null,"commit":"63059ce05fcc8945997eb03497196f42c68f4f45"},"originalBuild":{"startTimestamp":1672249401759,"endTimestamp":1672249732310,"error":null,"stdout":"Sending build context to Docker daemon  4.342MB\r\r\nStep 1/12 : FROM golang:alpine AS build-env\n ---> cae57157ceaa\nStep 2/12 : RUN apk add --no-cache curl make git libc-dev bash gcc linux-headers eudev-dev python3\n ---> Running in 0ab7cb9c097d\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/40) Installing ncurses-terminfo-base (6.3_p20221119-r0)\n(2/40) Installing ncurses-libs (6.3_p20221119-r0)\n(3/40) Installing readline (8.2.0-r0)\n(4/40) Installing bash (5.2.15-r0)\nExecuting bash-5.2.15-r0.post-install\n(5/40) Installing brotli-libs (1.0.9-r9)\n(6/40) Installing nghttp2-libs (1.51.0-r0)\n(7/40) Installing libcurl (7.87.0-r0)\n(8/40) Installing curl (7.87.0-r0)\n(9/40) Installing udev-init-scripts (35-r1)\n(10/40) Installing eudev-libs (3.2.11-r4)\n(11/40) Installing libblkid (2.38.1-r0)\n(12/40) Installing xz-libs (5.2.9-r0)\n(13/40) Installing zstd-libs (1.5.2-r9)\n(14/40) Installing kmod-libs (30-r1)\n(15/40) Installing eudev (3.2.11-r4)\n(16/40) Installing pkgconf (1.9.3-r0)\n(17/40) Installing eudev-dev (3.2.11-r4)\n(18/40) Installing libgcc (12.2.1_git20220924-r4)\n(19/40) Installing libstdc++ (12.2.1_git20220924-r4)\n(20/40) Installing binutils (2.39-r2)\n(21/40) Installing libgomp (12.2.1_git20220924-r4)\n(22/40) Installing libatomic (12.2.1_git20220924-r4)\n(23/40) Installing gmp (6.2.1-r2)\n(24/40) Installing isl25 (0.25-r0)\n(25/40) Installing mpfr4 (4.1.0-r0)\n(26/40) Installing mpc1 (1.2.1-r1)\n(27/40) Installing gcc (12.2.1_git20220924-r4)\n(28/40) Installing libexpat (2.5.0-r0)\n(29/40) Installing pcre2 (10.42-r0)\n(30/40) Installing git (2.38.2-r0)\n(31/40) Installing musl-dev (1.2.3-r4)\n(32/40) Installing libc-dev (0.7.2-r3)\n(33/40) Installing linux-headers (5.19.5-r0)\n(34/40) Installing make (4.3-r1)\n(35/40) Installing libbz2 (1.0.8-r4)\n(36/40) Installing libffi (3.4.4-r0)\n(37/40) Installing gdbm (1.23-r0)\n(38/40) Installing mpdecimal (2.5.1-r1)\n(39/40) Installing sqlite-libs (3.40.0-r0)\n(40/40) Installing python3 (3.10.9-r1)\nExecuting busybox-1.35.0-r29.trigger\nExecuting eudev-3.2.11-r4.trigger\nOK: 223 MiB in 56 packages\nRemoving intermediate container 0ab7cb9c097d\n ---> 5da04bd3e1cb\nStep 3/12 : WORKDIR /go/src/github.com/peggyjv/sommelier\n ---> Running in 42d3c99076b2\nRemoving intermediate container 42d3c99076b2\n ---> 3dc8361f47d0\nStep 4/12 : COPY go.mod .\n ---> 1ea37d11c6a6\nStep 5/12 : COPY go.sum .\n ---> 6b379c41ffaa\nStep 6/12 : RUN go mod download\n ---> Running in 409a860d0c7e\nRemoving intermediate container 409a860d0c7e\n ---> 3e5cbb7ad595\nStep 7/12 : COPY . .\n ---> 0b525b79922d\nStep 8/12 : RUN make install\n ---> Running in d0ed3ef60839\ngo install -mod=readonly -tags \"netgo ledger\" -ldflags '-X github.com/cosmos/cosmos-sdk/version.Name=sommelier -X github.com/cosmos/cosmos-sdk/version.AppName=sommelier -X github.com/cosmos/cosmos-sdk/version.Version=63059c-dirty -X github.com/cosmos/cosmos-sdk/version.Commit=63059ce05fcc8945997eb03497196f42c68f4f45 -X \"github.com/cosmos/cosmos-sdk/version.BuildTags=netgo ledger,\" -w -s' -trimpath ./cmd/sommelier\n\u001b[91m# github.com/zondax/hid\nIn file included from /go/pkg/mod/github.com/zondax/hid@v0.9.0/hid_enabled.go:22:\n/usr/include/sys/poll.h:1:2: warning: #warning redirecting incorrect #include <sys/poll.h> to <poll.h> [-Wcpp]\n    1 | #warning redirecting incorrect #include <sys/poll.h> to <poll.h>\n      |  ^~~~~~~\n\u001b[0mRemoving intermediate container d0ed3ef60839\n ---> 67e24dd89820\nStep 9/12 : FROM alpine:edge\nedge: Pulling from library/alpine\na71ff8a5264a: Pulling fs layer\na71ff8a5264a: Verifying Checksum\na71ff8a5264a: Download complete\na71ff8a5264a: Pull complete\nDigest: sha256:c223f84e05c23c0571ce8decefef818864869187e1a3ea47719412e205c8c64e\nStatus: Downloaded newer image for alpine:edge\n ---> 121d0da75751\nStep 10/12 : RUN apk add --update ca-certificates bash\n ---> Running in dc61ff837c87\nfetch https://dl-cdn.alpinelinux.org/alpine/edge/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/edge/community/x86_64/APKINDEX.tar.gz\n(1/5) Installing ncurses-terminfo-base (6.3_p20221224-r0)\n(2/5) Installing ncurses-libs (6.3_p20221224-r0)\n(3/5) Installing readline (8.2.0-r0)\n(4/5) Installing bash (5.2.15-r0)\nExecuting bash-5.2.15-r0.post-install\n(5/5) Installing ca-certificates (20221203-r1)\nExecuting busybox-1.35.0-r27.trigger\nExecuting ca-certificates-20221203-r1.trigger\nOK: 10 MiB in 20 packages\nRemoving intermediate container dc61ff837c87\n ---> 2ac7fc4717d4\nStep 11/12 : COPY --from=build-env /go/bin/sommelier /usr/bin/sommelier\n ---> ac45b4a5a9fc\nStep 12/12 : CMD [\"sommelier\", \"start\"]\n ---> Running in 3ce1826c7b1c\nRemoving intermediate container 3ce1826c7b1c\n ---> a829e984cef9\nSuccessfully built a829e984cef9\nSuccessfully tagged sommelier:latest\n","stderr":"","imageSize":59271555},"repair":{"violations":[{"name":"apkAddUseNoCache","position":{"start":22,"end":22,"columnStart":4,"columnEnd":41}}],"repairedDockerfile":"FROM golang:alpine AS build-env\n\nRUN apk add --no-cache curl make git libc-dev bash gcc linux-headers eudev-dev python3\n\n# Set working directory for the build\nWORKDIR /go/src/github.com/peggyjv/sommelier\n\n# Get dependancies - will also be cached if we won't change mod/sum\nCOPY go.mod .\nCOPY go.sum .\nRUN go mod download\n\n# Add source files\nCOPY . .\n\n# build Sommelier\nRUN make install\n\n# Final image\nFROM alpine:edge\n\n# Install ca-certificates\nRUN apk add --no-cache --update ca-certificates bash\n\n# Copy over binaries from the build-env\nCOPY --from=build-env /go/bin/sommelier /usr/bin/sommelier\n\nCMD [\"sommelier\", \"start\"]\n"},"repairedBuild":{"startTimestamp":1672249732851,"endTimestamp":1672250073669,"error":null,"stdout":"Sending build context to Docker daemon  4.342MB\r\r\nStep 1/12 : FROM golang:alpine AS build-env\n ---> cae57157ceaa\nStep 2/12 : RUN apk add --no-cache curl make git libc-dev bash gcc linux-headers eudev-dev python3\n ---> Running in bcc6f5672072\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/40) Installing ncurses-terminfo-base (6.3_p20221119-r0)\n(2/40) Installing ncurses-libs (6.3_p20221119-r0)\n(3/40) Installing readline (8.2.0-r0)\n(4/40) Installing bash (5.2.15-r0)\nExecuting bash-5.2.15-r0.post-install\n(5/40) Installing brotli-libs (1.0.9-r9)\n(6/40) Installing nghttp2-libs (1.51.0-r0)\n(7/40) Installing libcurl (7.87.0-r0)\n(8/40) Installing curl (7.87.0-r0)\n(9/40) Installing udev-init-scripts (35-r1)\n(10/40) Installing eudev-libs (3.2.11-r4)\n(11/40) Installing libblkid (2.38.1-r0)\n(12/40) Installing xz-libs (5.2.9-r0)\n(13/40) Installing zstd-libs (1.5.2-r9)\n(14/40) Installing kmod-libs (30-r1)\n(15/40) Installing eudev (3.2.11-r4)\n(16/40) Installing pkgconf (1.9.3-r0)\n(17/40) Installing eudev-dev (3.2.11-r4)\n(18/40) Installing libgcc (12.2.1_git20220924-r4)\n(19/40) Installing libstdc++ (12.2.1_git20220924-r4)\n(20/40) Installing binutils (2.39-r2)\n(21/40) Installing libgomp (12.2.1_git20220924-r4)\n(22/40) Installing libatomic (12.2.1_git20220924-r4)\n(23/40) Installing gmp (6.2.1-r2)\n(24/40) Installing isl25 (0.25-r0)\n(25/40) Installing mpfr4 (4.1.0-r0)\n(26/40) Installing mpc1 (1.2.1-r1)\n(27/40) Installing gcc (12.2.1_git20220924-r4)\n(28/40) Installing libexpat (2.5.0-r0)\n(29/40) Installing pcre2 (10.42-r0)\n(30/40) Installing git (2.38.2-r0)\n(31/40) Installing musl-dev (1.2.3-r4)\n(32/40) Installing libc-dev (0.7.2-r3)\n(33/40) Installing linux-headers (5.19.5-r0)\n(34/40) Installing make (4.3-r1)\n(35/40) Installing libbz2 (1.0.8-r4)\n(36/40) Installing libffi (3.4.4-r0)\n(37/40) Installing gdbm (1.23-r0)\n(38/40) Installing mpdecimal (2.5.1-r1)\n(39/40) Installing sqlite-libs (3.40.0-r0)\n(40/40) Installing python3 (3.10.9-r1)\nExecuting busybox-1.35.0-r29.trigger\nExecuting eudev-3.2.11-r4.trigger\nOK: 223 MiB in 56 packages\nRemoving intermediate container bcc6f5672072\n ---> 046dad68216f\nStep 3/12 : WORKDIR /go/src/github.com/peggyjv/sommelier\n ---> Running in 7575920a428b\nRemoving intermediate container 7575920a428b\n ---> e756cb113497\nStep 4/12 : COPY go.mod .\n ---> 69ae203da816\nStep 5/12 : COPY go.sum .\n ---> e0fe8a4e4e34\nStep 6/12 : RUN go mod download\n ---> Running in 7a63fe16cea9\nRemoving intermediate container 7a63fe16cea9\n ---> dd6458f58792\nStep 7/12 : COPY . .\n ---> 355e388c0071\nStep 8/12 : RUN make install\n ---> Running in 0b21bbb2b272\ngo install -mod=readonly -tags \"netgo ledger\" -ldflags '-X github.com/cosmos/cosmos-sdk/version.Name=sommelier -X github.com/cosmos/cosmos-sdk/version.AppName=sommelier -X github.com/cosmos/cosmos-sdk/version.Version=63059c-dirty -X github.com/cosmos/cosmos-sdk/version.Commit=63059ce05fcc8945997eb03497196f42c68f4f45 -X \"github.com/cosmos/cosmos-sdk/version.BuildTags=netgo ledger,\" -w -s' -trimpath ./cmd/sommelier\n\u001b[91m# github.com/zondax/hid\nIn file included from /go/pkg/mod/github.com/zondax/hid@v0.9.0/hid_enabled.go:22:\n/usr/include/sys/poll.h:1:2: warning: #warning redirecting incorrect #include <sys/poll.h> to <poll.h> [-Wcpp]\n    1 | #warning redirecting incorrect #include <sys/poll.h> to <poll.h>\n      |  ^~~~~~~\n\u001b[0mRemoving intermediate container 0b21bbb2b272\n ---> 49389bfbcbfa\nStep 9/12 : FROM alpine:edge\n ---> 121d0da75751\nStep 10/12 : RUN apk add --no-cache --update ca-certificates bash\n ---> Running in 4e417208f57c\nfetch https://dl-cdn.alpinelinux.org/alpine/edge/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/edge/community/x86_64/APKINDEX.tar.gz\n(1/5) Installing ncurses-terminfo-base (6.3_p20221224-r0)\n(2/5) Installing ncurses-libs (6.3_p20221224-r0)\n(3/5) Installing readline (8.2.0-r0)\n(4/5) Installing bash (5.2.15-r0)\nExecuting bash-5.2.15-r0.post-install\n(5/5) Installing ca-certificates (20221203-r1)\nExecuting busybox-1.35.0-r27.trigger\nExecuting ca-certificates-20221203-r1.trigger\nOK: 10 MiB in 20 packages\nRemoving intermediate container 4e417208f57c\n ---> 88199cabc31a\nStep 11/12 : COPY --from=build-env /go/bin/sommelier /usr/bin/sommelier\n ---> c654e0ec6c4b\nStep 12/12 : CMD [\"sommelier\", \"start\"]\n ---> Running in 4f6d6219fb33\nRemoving intermediate container 4f6d6219fb33\n ---> c411bd842956\nSuccessfully built c411bd842956\nSuccessfully tagged sommelier:latest\n","stderr":"","imageSize":56691323},"endTime":1672250074315}