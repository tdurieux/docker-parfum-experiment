{"repository":"https://github.com/davidsbond/homelab","dockerfilePath":"Dockerfile","startTime":1672882666234,"endTime":1672883037826,"clone":{"startTime":1672882666234,"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/davidsbond/homelab'...\n","error":null,"endTime":1672882669072,"commit":"bb60f613cc1ffeaa144d4f238746bf8f458aa4a2"},"originalBuild":{"startTime":1672882669163,"endTime":1672882877140,"error":null,"stdout":"Sending build context to Docker daemon  77.22MB\r\r\nStep 1/10 : FROM golang:1.18.1 as builder\n1.18.1: Pulling from library/golang\n6aefca2dc61d: Pulling fs layer\n967757d56527: Pulling fs layer\nc357e2c68cb3: Pulling fs layer\nc766e27afb21: Pulling fs layer\nd6a8ea6bd5f8: Pulling fs layer\n13a9b904f742: Pulling fs layer\n3447e3508f49: Pulling fs layer\nc766e27afb21: Waiting\nd6a8ea6bd5f8: Waiting\n13a9b904f742: Waiting\n967757d56527: Verifying Checksum\n967757d56527: Download complete\n6aefca2dc61d: Verifying Checksum\n6aefca2dc61d: Download complete\nc357e2c68cb3: Verifying Checksum\nc357e2c68cb3: Download complete\nc766e27afb21: Verifying Checksum\nc766e27afb21: Download complete\n3447e3508f49: Verifying Checksum\n3447e3508f49: Download complete\nd6a8ea6bd5f8: Verifying Checksum\nd6a8ea6bd5f8: Download complete\n13a9b904f742: Verifying Checksum\n13a9b904f742: Download complete\n6aefca2dc61d: Pull complete\n967757d56527: Pull complete\nc357e2c68cb3: Pull complete\nc766e27afb21: Pull complete\nd6a8ea6bd5f8: Pull complete\n13a9b904f742: Pull complete\n3447e3508f49: Pull complete\nDigest: sha256:12d3995156cb0dcdbb9d3edb5827e4e8e1bf5bf92436bfd12d696ec997001a9a\nStatus: Downloaded newer image for golang:1.18.1\n ---> 65375c930b21\nStep 2/10 : RUN apt-get update -y\n ---> Running in 9a0dd48cefe2\nGet:1 http://deb.debian.org/debian bullseye InRelease [116 kB]\nGet:2 http://security.debian.org/debian-security bullseye-security InRelease [48.4 kB]\nGet:3 http://deb.debian.org/debian bullseye-updates InRelease [44.1 kB]\nGet:4 http://deb.debian.org/debian bullseye/main amd64 Packages [8183 kB]\nGet:5 http://deb.debian.org/debian bullseye-updates/main amd64 Packages [14.6 kB]\nGet:6 http://security.debian.org/debian-security bullseye-security/main amd64 Packages [210 kB]\nFetched 8616 kB in 2s (5637 kB/s)\nReading package lists...\nRemoving intermediate container 9a0dd48cefe2\n ---> f80f24340ab6\nStep 3/10 : RUN apt-get install -y upx\n ---> Running in c827c59fb398\nReading package lists...\nBuilding dependency tree...\nReading state information...\nThe following additional packages will be installed:\n  libucl1\nThe following NEW packages will be installed:\n  libucl1 upx-ucl\n0 upgraded, 2 newly installed, 0 to remove and 45 not upgraded.\nNeed to get 438 kB of archives.\nAfter this operation, 2137 kB of additional disk space will be used.\nGet:1 http://deb.debian.org/debian bullseye/main amd64 libucl1 amd64 1.03+repack-6 [27.1 kB]\nGet:2 http://deb.debian.org/debian bullseye/main amd64 upx-ucl amd64 3.96-2 [411 kB]\n\u001b[91mdebconf: delaying package configuration, since apt-utils is not installed\n\u001b[0mFetched 438 kB in 0s (8959 kB/s)\nSelecting previously unselected package libucl1:amd64.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 15709 files and directories currently installed.)\r\nPreparing to unpack .../libucl1_1.03+repack-6_amd64.deb ...\r\nUnpacking libucl1:amd64 (1.03+repack-6) ...\r\nSelecting previously unselected package upx-ucl.\r\nPreparing to unpack .../upx-ucl_3.96-2_amd64.deb ...\r\nUnpacking upx-ucl (3.96-2) ...\r\nSetting up libucl1:amd64 (1.03+repack-6) ...\r\nSetting up upx-ucl (3.96-2) ...\r\nupdate-alternatives: error: no alternatives for upx\r\nupdate-alternatives: using /usr/bin/upx-ucl to provide /usr/bin/upx (upx) in auto mode\r\nProcessing triggers for libc-bin (2.31-13+deb11u3) ...\r\nRemoving intermediate container c827c59fb398\n ---> 3f98ea65c7eb\nStep 4/10 : ADD . /project\n ---> c801edb7a5ae\nStep 5/10 : WORKDIR /project\n ---> Running in abf04bf54faa\nRemoving intermediate container abf04bf54faa\n ---> fc4efb4ad4af\nStep 6/10 : RUN make\n ---> Running in c9664d8b38f1\n./scripts/build.sh\nRemoving intermediate container c9664d8b38f1\n ---> da3a89fc8ed8\nStep 7/10 : RUN make pack\n ---> Running in 026948a35864\nupx `find ./bin -type f`\n                       Ultimate Packer for eXecutables\n                          Copyright (C) 1996 - 2020\nUPX 3.96        Markus Oberhumer, Laszlo Molnar & John Reiser   Jan 23rd 2020\n\n        File size         Ratio      Format      Name\n   --------------------   ------   -----------   -----------\n  11857920 ->   4620148   38.96%   linux/amd64   prometheus-exporter-minecraft\n  17391616 ->   6009272   34.55%   linux/amd64   ftp-backup\n  17215488 ->   5940576   34.51%   linux/amd64   bucket-object-cleaner\n  14610432 ->   5345316   36.59%   linux/amd64   sqlexec\n  12042240 ->   4697524   39.01%   linux/amd64   prometheus-exporter-speedtest\n  11866112 ->   4621736   38.95%   linux/amd64   prometheus-exporter-pihole\n  13037568 ->   4789844   36.74%   linux/amd64   directory\n  11870208 ->   4433064   37.35%   linux/amd64   prometheus-exporter-coronavirus\n  12214272 ->   4544648   37.21%   linux/amd64   prometheus-exporter-worldping\n  12816384 ->   4906836   38.29%   linux/amd64   alertmanager-discord\n  17268736 ->   5958976   34.51%   linux/amd64   grafana-backup\n  12017664 ->   4688328   39.01%   linux/amd64   prometheus-exporter-homehub\n  12812288 ->   4903520   38.27%   linux/amd64   prometheus-exporter-home-assistant\n  35254272 ->  10556128   29.94%   linux/amd64   health-dashboard\n  11898880 ->   4440900   37.32%   linux/amd64   prometheus-exporter-synology\n  11878400 ->   4625524   38.94%   linux/amd64   prometheus-exporter-weather\n   --------------------   ------   -----------   -----------\n 236052480 ->  85082340   36.04%                 [ 16 files ]\n\nPacked 16 files.\nRemoving intermediate container 026948a35864\n ---> 6f1a4f4a3728\nStep 8/10 : FROM scratch\n ---> \nStep 9/10 : COPY --from=builder /etc/ssl/certs/ca-certificates.crt /etc/ssl/certs/\n ---> 768670201fa2\nStep 10/10 : COPY --from=builder /project/bin /bin\n ---> d71f8eba73ba\nSuccessfully built d71f8eba73ba\nSuccessfully tagged homelab:latest\n","stderr":"","imageSize":85282653},"repair":{"startTime":1672882877210,"endTime":1672882877267,"violations":[{"name":"aptGetInstallUseNoRec","position":{"start":4,"end":4,"columnStart":4,"columnEnd":26}},{"name":"aptGetUpdatePrecedesInstall","position":{"start":4,"end":4,"columnStart":4,"columnEnd":26}},{"name":"ruleAptGetInstallThenRemoveAptLists","position":{"start":4,"end":4,"columnStart":4,"columnEnd":26}}],"repairedDockerfile":"FROM golang:1.18.1 as builder\n\n# Install required tools\n\nRUN apt-get update -y && \\\napt-get install --no-install-recommends -y upx && rm -rf /var/lib/apt/lists/*;\n\nADD . /project\nWORKDIR /project\n\n# Compile binaries\nRUN make\nRUN make pack\n\nFROM scratch\n\nCOPY --from=builder /etc/ssl/certs/ca-certificates.crt /etc/ssl/certs/\nCOPY --from=builder /project/bin /bin\n"},"repairedBuild":{"startTime":1672882878029,"endTime":1672883037318,"error":null,"stdout":"Sending build context to Docker daemon  77.22MB\r\r\nStep 1/9 : FROM golang:1.18.1 as builder\n ---> 65375c930b21\nStep 2/9 : RUN apt-get update -y && apt-get install --no-install-recommends -y upx && rm -rf /var/lib/apt/lists/*;\n ---> Running in 2c37606d7167\nGet:1 http://deb.debian.org/debian bullseye InRelease [116 kB]\nGet:2 http://security.debian.org/debian-security bullseye-security InRelease [48.4 kB]\nGet:3 http://deb.debian.org/debian bullseye-updates InRelease [44.1 kB]\nGet:4 http://security.debian.org/debian-security bullseye-security/main amd64 Packages [210 kB]\nGet:5 http://deb.debian.org/debian bullseye/main amd64 Packages [8183 kB]\nGet:6 http://deb.debian.org/debian bullseye-updates/main amd64 Packages [14.6 kB]\nFetched 8616 kB in 1s (6176 kB/s)\nReading package lists...\nReading package lists...\nBuilding dependency tree...\nReading state information...\nThe following additional packages will be installed:\n  libucl1\nThe following NEW packages will be installed:\n  libucl1 upx-ucl\n0 upgraded, 2 newly installed, 0 to remove and 45 not upgraded.\nNeed to get 438 kB of archives.\nAfter this operation, 2137 kB of additional disk space will be used.\nGet:1 http://deb.debian.org/debian bullseye/main amd64 libucl1 amd64 1.03+repack-6 [27.1 kB]\nGet:2 http://deb.debian.org/debian bullseye/main amd64 upx-ucl amd64 3.96-2 [411 kB]\n\u001b[91mdebconf: delaying package configuration, since apt-utils is not installed\n\u001b[0mFetched 438 kB in 0s (16.1 MB/s)\nSelecting previously unselected package libucl1:amd64.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 15709 files and directories currently installed.)\r\nPreparing to unpack .../libucl1_1.03+repack-6_amd64.deb ...\r\nUnpacking libucl1:amd64 (1.03+repack-6) ...\r\nSelecting previously unselected package upx-ucl.\r\nPreparing to unpack .../upx-ucl_3.96-2_amd64.deb ...\r\nUnpacking upx-ucl (3.96-2) ...\r\nSetting up libucl1:amd64 (1.03+repack-6) ...\r\nSetting up upx-ucl (3.96-2) ...\r\nupdate-alternatives: error: no alternatives for upx\r\nupdate-alternatives: using /usr/bin/upx-ucl to provide /usr/bin/upx (upx) in auto mode\r\nProcessing triggers for libc-bin (2.31-13+deb11u3) ...\r\nRemoving intermediate container 2c37606d7167\n ---> eba68130f86c\nStep 3/9 : ADD . /project\n ---> fa0b5e56db75\nStep 4/9 : WORKDIR /project\n ---> Running in 1d16399c01ba\nRemoving intermediate container 1d16399c01ba\n ---> ae1f68a7fe86\nStep 5/9 : RUN make\n ---> Running in b655d8068d54\n./scripts/build.sh\nRemoving intermediate container b655d8068d54\n ---> 7e157f9713a6\nStep 6/9 : RUN make pack\n ---> Running in ad55e6478ade\nupx `find ./bin -type f`\n                       Ultimate Packer for eXecutables\n                          Copyright (C) 1996 - 2020\nUPX 3.96        Markus Oberhumer, Laszlo Molnar & John Reiser   Jan 23rd 2020\n\n        File size         Ratio      Format      Name\n   --------------------   ------   -----------   -----------\n  11857920 ->   4620148   38.96%   linux/amd64   prometheus-exporter-minecraft\n  17391616 ->   6009272   34.55%   linux/amd64   ftp-backup\n  17215488 ->   5940584   34.51%   linux/amd64   bucket-object-cleaner\n  14610432 ->   5345324   36.59%   linux/amd64   sqlexec\n  12042240 ->   4697516   39.01%   linux/amd64   prometheus-exporter-speedtest\n  11866112 ->   4621736   38.95%   linux/amd64   prometheus-exporter-pihole\n  13037568 ->   4789844   36.74%   linux/amd64   directory\n  11870208 ->   4433064   37.35%   linux/amd64   prometheus-exporter-coronavirus\n  12214272 ->   4544648   37.21%   linux/amd64   prometheus-exporter-worldping\n  12816384 ->   4906836   38.29%   linux/amd64   alertmanager-discord\n  17268736 ->   5958984   34.51%   linux/amd64   grafana-backup\n  12017664 ->   4688320   39.01%   linux/amd64   prometheus-exporter-homehub\n  12812288 ->   4903520   38.27%   linux/amd64   prometheus-exporter-home-assistant\n  35254272 ->  10556128   29.94%   linux/amd64   health-dashboard\n  11898880 ->   4440900   37.32%   linux/amd64   prometheus-exporter-synology\n  11878400 ->   4625524   38.94%   linux/amd64   prometheus-exporter-weather\n   --------------------   ------   -----------   -----------\n 236052480 ->  85082348   36.04%                 [ 16 files ]\n\nPacked 16 files.\nRemoving intermediate container ad55e6478ade\n ---> f9997e1dae9a\nStep 7/9 : FROM scratch\n ---> \nStep 8/9 : COPY --from=builder /etc/ssl/certs/ca-certificates.crt /etc/ssl/certs/\n ---> 0f74aa04d4ca\nStep 9/9 : COPY --from=builder /project/bin /bin\n ---> a038e17836b5\nSuccessfully built a038e17836b5\nSuccessfully tagged homelab:latest\n","stderr":"","imageSize":85282661}}