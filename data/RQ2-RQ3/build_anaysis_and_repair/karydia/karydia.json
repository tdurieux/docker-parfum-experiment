{"repository":"https://github.com/karydia/karydia","dockerfilePath":"Dockerfile","startTime":1672704533371,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/karydia/karydia'...\n","error":null,"commit":"154e96d9f6e93d44c553f088a7e0633529050d2b"},"originalBuild":{"startTimestamp":1672704535638,"endTimestamp":1672704650868,"error":null,"stdout":"Sending build context to Docker daemon  46.66MB\r\r\nStep 1/16 : ARG golangImageTag=1.13.3\nStep 2/16 : ARG alpineImageTag=3.10.2\nStep 3/16 : FROM golang:${golangImageTag} as build-stage\n1.13.3: Pulling from library/golang\nc7b7d16361e0: Pulling fs layer\nb7a128769df1: Pulling fs layer\n1128949d0793: Pulling fs layer\n667692510b70: Pulling fs layer\nc70d80036479: Pulling fs layer\nf332e1ccc3d8: Pulling fs layer\n07e0a3e01633: Pulling fs layer\nf332e1ccc3d8: Waiting\nc70d80036479: Waiting\n07e0a3e01633: Waiting\n667692510b70: Waiting\n1128949d0793: Verifying Checksum\n1128949d0793: Download complete\nb7a128769df1: Verifying Checksum\nb7a128769df1: Download complete\nc7b7d16361e0: Verifying Checksum\nc7b7d16361e0: Download complete\n667692510b70: Verifying Checksum\n667692510b70: Download complete\n07e0a3e01633: Verifying Checksum\n07e0a3e01633: Download complete\nf332e1ccc3d8: Verifying Checksum\nf332e1ccc3d8: Download complete\nc7b7d16361e0: Pull complete\nb7a128769df1: Pull complete\nc70d80036479: Verifying Checksum\nc70d80036479: Download complete\n1128949d0793: Pull complete\n667692510b70: Pull complete\nc70d80036479: Pull complete\nf332e1ccc3d8: Pull complete\n07e0a3e01633: Pull complete\nDigest: sha256:6a693fbaba7dd8d816f6afce049fb92b280c588e0a677c4c8db26645e613fc15\nStatus: Downloaded newer image for golang:1.13.3\n ---> dc7582e06f8e\nStep 4/16 : RUN mkdir -p /go/src/github.com/karydia/karydia/\n ---> Running in 7a3bf994399f\nRemoving intermediate container 7a3bf994399f\n ---> 9038decfd89a\nStep 5/16 : WORKDIR /go/src/github.com/karydia/karydia/\n ---> Running in d32449b57cf8\nRemoving intermediate container d32449b57cf8\n ---> 84f633e8cb0e\nStep 6/16 : COPY ./ ./\n ---> 7ff12db17b13\nStep 7/16 : RUN make\n ---> Running in 719638699d88\nCGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -o bin/karydia \\\n\t-ldflags \"-s -X github.com/karydia/karydia.Version=154e96d-dirty\" \\\n\tcli/main.go\nRemoving intermediate container 719638699d88\n ---> 863a4d886363\nStep 8/16 : RUN make test\n ---> Running in 876bb3e4431b\ngo test github.com/karydia/karydia github.com/karydia/karydia/cli github.com/karydia/karydia/cli/cmd github.com/karydia/karydia/pkg/admission github.com/karydia/karydia/pkg/admission/karydia github.com/karydia/karydia/pkg/apis/karydia github.com/karydia/karydia/pkg/apis/karydia/v1alpha1 github.com/karydia/karydia/pkg/client/clientset/versioned github.com/karydia/karydia/pkg/client/clientset/versioned/fake github.com/karydia/karydia/pkg/client/clientset/versioned/scheme github.com/karydia/karydia/pkg/client/clientset/versioned/typed/karydia/v1alpha1 github.com/karydia/karydia/pkg/client/clientset/versioned/typed/karydia/v1alpha1/fake github.com/karydia/karydia/pkg/client/informers/externalversions github.com/karydia/karydia/pkg/client/informers/externalversions/internalinterfaces github.com/karydia/karydia/pkg/client/informers/externalversions/karydia github.com/karydia/karydia/pkg/client/informers/externalversions/karydia/v1alpha1 github.com/karydia/karydia/pkg/client/listers/karydia/v1alpha1 github.com/karydia/karydia/pkg/controller github.com/karydia/karydia/pkg/k8sutil github.com/karydia/karydia/pkg/k8sutil/scheme github.com/karydia/karydia/pkg/logger github.com/karydia/karydia/pkg/server github.com/karydia/karydia/pkg/util/tls github.com/karydia/karydia/pkg/webhook\n?   \tgithub.com/karydia/karydia\t[no test files]\n?   \tgithub.com/karydia/karydia/cli\t[no test files]\n?   \tgithub.com/karydia/karydia/cli/cmd\t[no test files]\n?   \tgithub.com/karydia/karydia/pkg/admission\t[no test files]\nok  \tgithub.com/karydia/karydia/pkg/admission/karydia\t0.039s\n?   \tgithub.com/karydia/karydia/pkg/apis/karydia\t[no test files]\n?   \tgithub.com/karydia/karydia/pkg/apis/karydia/v1alpha1\t[no test files]\n?   \tgithub.com/karydia/karydia/pkg/client/clientset/versioned\t[no test files]\n?   \tgithub.com/karydia/karydia/pkg/client/clientset/versioned/fake\t[no test files]\n?   \tgithub.com/karydia/karydia/pkg/client/clientset/versioned/scheme\t[no test files]\n?   \tgithub.com/karydia/karydia/pkg/client/clientset/versioned/typed/karydia/v1alpha1\t[no test files]\n?   \tgithub.com/karydia/karydia/pkg/client/clientset/versioned/typed/karydia/v1alpha1/fake\t[no test files]\n?   \tgithub.com/karydia/karydia/pkg/client/informers/externalversions\t[no test files]\n?   \tgithub.com/karydia/karydia/pkg/client/informers/externalversions/internalinterfaces\t[no test files]\n?   \tgithub.com/karydia/karydia/pkg/client/informers/externalversions/karydia\t[no test files]\n?   \tgithub.com/karydia/karydia/pkg/client/informers/externalversions/karydia/v1alpha1\t[no test files]\n?   \tgithub.com/karydia/karydia/pkg/client/listers/karydia/v1alpha1\t[no test files]\nok  \tgithub.com/karydia/karydia/pkg/controller\t1.058s\n?   \tgithub.com/karydia/karydia/pkg/k8sutil\t[no test files]\n?   \tgithub.com/karydia/karydia/pkg/k8sutil/scheme\t[no test files]\n?   \tgithub.com/karydia/karydia/pkg/logger\t[no test files]\n?   \tgithub.com/karydia/karydia/pkg/server\t[no test files]\n?   \tgithub.com/karydia/karydia/pkg/util/tls\t[no test files]\n?   \tgithub.com/karydia/karydia/pkg/webhook\t[no test files]\nRemoving intermediate container 876bb3e4431b\n ---> e369e24b8b80\nStep 9/16 : FROM build-stage as dev-image\n ---> e369e24b8b80\nStep 10/16 : RUN apt-get -qq update && apt-get -qq install inotify-tools lsof\n ---> Running in fe2adb95b517\n\u001b[91mdebconf: delaying package configuration, since apt-utils is not installed\n\u001b[0mSelecting previously unselected package lsof.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 15394 files and directories currently installed.)\r\nPreparing to unpack .../lsof_4.91+dfsg-1_amd64.deb ...\r\nUnpacking lsof (4.91+dfsg-1) ...\r\nSelecting previously unselected package libinotifytools0:amd64.\r\nPreparing to unpack .../libinotifytools0_3.14-7_amd64.deb ...\r\nUnpacking libinotifytools0:amd64 (3.14-7) ...\r\nSelecting previously unselected package inotify-tools.\r\nPreparing to unpack .../inotify-tools_3.14-7_amd64.deb ...\r\nUnpacking inotify-tools (3.14-7) ...\r\nSetting up libinotifytools0:amd64 (3.14-7) ...\r\nSetting up lsof (4.91+dfsg-1) ...\r\nSetting up inotify-tools (3.14-7) ...\r\nProcessing triggers for libc-bin (2.28-10) ...\r\nRemoving intermediate container fe2adb95b517\n ---> 42aedc951c86\nStep 11/16 : RUN go get -u github.com/go-delve/delve/cmd/dlv\n ---> Running in 1a4ccaf3cd21\nRemoving intermediate container 1a4ccaf3cd21\n ---> ae6956f33ffe\nStep 12/16 : COPY --from=build-stage /go/src/github.com/karydia/karydia/bin/karydia /usr/local/bin/karydia\n ---> 580fd6651366\nStep 13/16 : COPY ./scripts/hotswap-dev /usr/local/bin/hotswap-dev\n ---> 3533dae632a1\nStep 14/16 : FROM alpine:${alpineImageTag} as prod-image\n3.10.2: Pulling from library/alpine\n9d48c3bd43c5: Already exists\nDigest: sha256:72c42ed48c3a2db31b7dafe17d275b634664a708d901ec9fd57b1529280f01fb\nStatus: Downloaded newer image for alpine:3.10.2\n ---> 961769676411\nStep 15/16 : COPY --from=build-stage /go/src/github.com/karydia/karydia/bin/karydia /usr/local/bin/karydia\n ---> 659a098b0720\nStep 16/16 : USER 65534:65534\n ---> Running in 0c033a8867e3\nRemoving intermediate container 0c033a8867e3\n ---> a16cc3462bc4\nSuccessfully built a16cc3462bc4\nSuccessfully tagged karydia:latest\n","stderr":"","imageSize":35204018},"repair":{"violations":[{"name":"ruleAptGetInstallUseY","position":{"start":29,"end":29,"columnStart":26,"columnEnd":64}},{"name":"ruleAptGetInstallUseNoRec","position":{"start":29,"end":29,"columnStart":26,"columnEnd":64}},{"name":"ruleAptGetInstallThenRemoveAptLists","position":{"start":29,"end":29,"columnStart":26,"columnEnd":64}}],"repairedDockerfile":"# Copyright (C) 2019 SAP SE or an SAP affiliate company. All rights reserved.\n# This file is licensed under the Apache Software License, v. 2 except as\n# noted otherwise in the LICENSE file.\n#\n# Licensed under the Apache License, Version 2.0 (the \"License\");\n# you may not use this file except in compliance with the License.\n# You may obtain a copy of the License at\n#\n#      http://www.apache.org/licenses/LICENSE-2.0\n#\n# Unless required by applicable law or agreed to in writing, software\n# distributed under the License is distributed on an \"AS IS\" BASIS,\n# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n# See the License for the specific language governing permissions and\n# limitations under the License.\n\nARG golangImageTag=1.13.3\nARG alpineImageTag=3.10.2\n\n# build\nFROM golang:${golangImageTag} as build-stage\nRUN mkdir -p /go/src/github.com/karydia/karydia/\nWORKDIR /go/src/github.com/karydia/karydia/\nCOPY ./ ./\nRUN make\nRUN make test\n\n# dev-image (only for development)\nFROM build-stage as dev-image\nRUN apt-get -qq update && apt-get -qq -y --no-install-recommends install inotify-tools lsof\nRUN go get -u github.com/go-delve/delve/cmd/dlv\nCOPY --from=build-stage /go/src/github.com/karydia/karydia/bin/karydia /usr/local/bin/karydia\nCOPY ./scripts/hotswap-dev /usr/local/bin/hotswap-dev\n\n# prod-image (production usage)\nFROM alpine:${alpineImageTag} as prod-image\nCOPY --from=build-stage /go/src/github.com/karydia/karydia/bin/karydia /usr/local/bin/karydia\nUSER 65534:65534\n\n"},"repairedBuild":{"startTimestamp":1672704651205,"endTimestamp":1672704808086,"error":null,"stdout":"Sending build context to Docker daemon  46.66MB\r\r\nStep 1/16 : ARG golangImageTag=1.13.3\nStep 2/16 : ARG alpineImageTag=3.10.2\nStep 3/16 : FROM golang:${golangImageTag} as build-stage\n ---> dc7582e06f8e\nStep 4/16 : RUN mkdir -p /go/src/github.com/karydia/karydia/\n ---> Running in 19b58b049e7f\nRemoving intermediate container 19b58b049e7f\n ---> 22d8c044e605\nStep 5/16 : WORKDIR /go/src/github.com/karydia/karydia/\n ---> Running in 72234e5c71be\nRemoving intermediate container 72234e5c71be\n ---> 29495a7725ae\nStep 6/16 : COPY ./ ./\n ---> b15536f18393\nStep 7/16 : RUN make\n ---> Running in 84dd5fe00d5a\nCGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -o bin/karydia \\\n\t-ldflags \"-s -X github.com/karydia/karydia.Version=154e96d-dirty\" \\\n\tcli/main.go\nRemoving intermediate container 84dd5fe00d5a\n ---> 111649e2af9a\nStep 8/16 : RUN make test\n ---> Running in 61152cd95c4e\ngo test github.com/karydia/karydia github.com/karydia/karydia/cli github.com/karydia/karydia/cli/cmd github.com/karydia/karydia/pkg/admission github.com/karydia/karydia/pkg/admission/karydia github.com/karydia/karydia/pkg/apis/karydia github.com/karydia/karydia/pkg/apis/karydia/v1alpha1 github.com/karydia/karydia/pkg/client/clientset/versioned github.com/karydia/karydia/pkg/client/clientset/versioned/fake github.com/karydia/karydia/pkg/client/clientset/versioned/scheme github.com/karydia/karydia/pkg/client/clientset/versioned/typed/karydia/v1alpha1 github.com/karydia/karydia/pkg/client/clientset/versioned/typed/karydia/v1alpha1/fake github.com/karydia/karydia/pkg/client/informers/externalversions github.com/karydia/karydia/pkg/client/informers/externalversions/internalinterfaces github.com/karydia/karydia/pkg/client/informers/externalversions/karydia github.com/karydia/karydia/pkg/client/informers/externalversions/karydia/v1alpha1 github.com/karydia/karydia/pkg/client/listers/karydia/v1alpha1 github.com/karydia/karydia/pkg/controller github.com/karydia/karydia/pkg/k8sutil github.com/karydia/karydia/pkg/k8sutil/scheme github.com/karydia/karydia/pkg/logger github.com/karydia/karydia/pkg/server github.com/karydia/karydia/pkg/util/tls github.com/karydia/karydia/pkg/webhook\n?   \tgithub.com/karydia/karydia\t[no test files]\n?   \tgithub.com/karydia/karydia/cli\t[no test files]\n?   \tgithub.com/karydia/karydia/cli/cmd\t[no test files]\n?   \tgithub.com/karydia/karydia/pkg/admission\t[no test files]\nok  \tgithub.com/karydia/karydia/pkg/admission/karydia\t0.042s\n?   \tgithub.com/karydia/karydia/pkg/apis/karydia\t[no test files]\n?   \tgithub.com/karydia/karydia/pkg/apis/karydia/v1alpha1\t[no test files]\n?   \tgithub.com/karydia/karydia/pkg/client/clientset/versioned\t[no test files]\n?   \tgithub.com/karydia/karydia/pkg/client/clientset/versioned/fake\t[no test files]\n?   \tgithub.com/karydia/karydia/pkg/client/clientset/versioned/scheme\t[no test files]\n?   \tgithub.com/karydia/karydia/pkg/client/clientset/versioned/typed/karydia/v1alpha1\t[no test files]\n?   \tgithub.com/karydia/karydia/pkg/client/clientset/versioned/typed/karydia/v1alpha1/fake\t[no test files]\n?   \tgithub.com/karydia/karydia/pkg/client/informers/externalversions\t[no test files]\n?   \tgithub.com/karydia/karydia/pkg/client/informers/externalversions/internalinterfaces\t[no test files]\n?   \tgithub.com/karydia/karydia/pkg/client/informers/externalversions/karydia\t[no test files]\n?   \tgithub.com/karydia/karydia/pkg/client/informers/externalversions/karydia/v1alpha1\t[no test files]\n?   \tgithub.com/karydia/karydia/pkg/client/listers/karydia/v1alpha1\t[no test files]\nok  \tgithub.com/karydia/karydia/pkg/controller\t1.045s\n?   \tgithub.com/karydia/karydia/pkg/k8sutil\t[no test files]\n?   \tgithub.com/karydia/karydia/pkg/k8sutil/scheme\t[no test files]\n?   \tgithub.com/karydia/karydia/pkg/logger\t[no test files]\n?   \tgithub.com/karydia/karydia/pkg/server\t[no test files]\n?   \tgithub.com/karydia/karydia/pkg/util/tls\t[no test files]\n?   \tgithub.com/karydia/karydia/pkg/webhook\t[no test files]\nRemoving intermediate container 61152cd95c4e\n ---> a4b075db80b8\nStep 9/16 : FROM build-stage as dev-image\n ---> a4b075db80b8\nStep 10/16 : RUN apt-get -qq update && apt-get -qq -y --no-install-recommends install inotify-tools lsof\n ---> Running in 6ef491f166cf\n\u001b[91mdebconf: delaying package configuration, since apt-utils is not installed\n\u001b[0mSelecting previously unselected package lsof.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 15394 files and directories currently installed.)\r\nPreparing to unpack .../lsof_4.91+dfsg-1_amd64.deb ...\r\nUnpacking lsof (4.91+dfsg-1) ...\r\nSelecting previously unselected package libinotifytools0:amd64.\r\nPreparing to unpack .../libinotifytools0_3.14-7_amd64.deb ...\r\nUnpacking libinotifytools0:amd64 (3.14-7) ...\r\nSelecting previously unselected package inotify-tools.\r\nPreparing to unpack .../inotify-tools_3.14-7_amd64.deb ...\r\nUnpacking inotify-tools (3.14-7) ...\r\nSetting up libinotifytools0:amd64 (3.14-7) ...\r\nSetting up lsof (4.91+dfsg-1) ...\r\nSetting up inotify-tools (3.14-7) ...\r\nProcessing triggers for libc-bin (2.28-10) ...\r\nRemoving intermediate container 6ef491f166cf\n ---> 60104ea60ebe\nStep 11/16 : RUN go get -u github.com/go-delve/delve/cmd/dlv\n ---> Running in 7bdf86730833\nRemoving intermediate container 7bdf86730833\n ---> 53fc6e8c6664\nStep 12/16 : COPY --from=build-stage /go/src/github.com/karydia/karydia/bin/karydia /usr/local/bin/karydia\n ---> 85070839dc1b\nStep 13/16 : COPY ./scripts/hotswap-dev /usr/local/bin/hotswap-dev\n ---> 5cdb4a81fb2a\nStep 14/16 : FROM alpine:${alpineImageTag} as prod-image\n ---> 961769676411\nStep 15/16 : COPY --from=build-stage /go/src/github.com/karydia/karydia/bin/karydia /usr/local/bin/karydia\n ---> c74f67679208\nStep 16/16 : USER 65534:65534\n ---> Running in b7792a6e5408\nRemoving intermediate container b7792a6e5408\n ---> 179bdd918021\nSuccessfully built 179bdd918021\nSuccessfully tagged karydia:latest\n","stderr":"","imageSize":35204018},"endTime":1672704808416}