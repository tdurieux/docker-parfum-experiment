{"repository":"https://github.com/go-graphite/go-carbon","dockerfilePath":"Dockerfile","startTime":1672198268592,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/go-graphite/go-carbon'...\n","error":null,"commit":"7ee3224a18ab82c449a89468a32c14e623a9d4fc"},"originalBuild":{"startTimestamp":1672198270404,"endTimestamp":1672198320252,"error":null,"stdout":"Sending build context to Docker daemon  29.78MB\r\r\nStep 1/12 : FROM golang:1.17.4-alpine3.15 AS build\n1.17.4-alpine3.15: Pulling from library/golang\n59bf1c3509f3: Already exists\n666ba61612fd: Pulling fs layer\n8ed8ca486205: Pulling fs layer\n72523939f3be: Pulling fs layer\n2b39598efe42: Pulling fs layer\n2b39598efe42: Waiting\n8ed8ca486205: Download complete\n666ba61612fd: Verifying Checksum\n666ba61612fd: Download complete\n666ba61612fd: Pull complete\n2b39598efe42: Verifying Checksum\n2b39598efe42: Download complete\n8ed8ca486205: Pull complete\n72523939f3be: Verifying Checksum\n72523939f3be: Download complete\n72523939f3be: Pull complete\n2b39598efe42: Pull complete\nDigest: sha256:d8bd35607c405fcef71d749aa367f86954706c3a57a602fb0bcaae3581043f8f\nStatus: Downloaded newer image for golang:1.17.4-alpine3.15\n ---> 6f9d081b1170\nStep 2/12 : COPY . /usr/local/src/go-carbon\n ---> 940bde1af6c7\nStep 3/12 : RUN apk add --update git make bash  && cd /usr/local/src/go-carbon  && make go-carbon  && chmod +x go-carbon && cp -fv go-carbon /tmp\n ---> Running in bd77c1d89af1\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/community/x86_64/APKINDEX.tar.gz\n(1/11) Installing ncurses-terminfo-base (6.3_p20211120-r1)\n(2/11) Installing ncurses-libs (6.3_p20211120-r1)\n(3/11) Installing readline (8.1.1-r0)\n(4/11) Installing bash (5.1.16-r0)\nExecuting bash-5.1.16-r0.post-install\n(5/11) Installing brotli-libs (1.0.9-r5)\n(6/11) Installing nghttp2-libs (1.46.0-r0)\n(7/11) Installing libcurl (7.80.0-r5)\n(8/11) Installing expat (2.5.0-r0)\n(9/11) Installing pcre2 (10.40-r0)\n(10/11) Installing git (2.34.5-r0)\n(11/11) Installing make (4.3-r0)\nExecuting busybox-1.34.1-r3.trigger\nOK: 22 MiB in 26 packages\ngo build -mod vendor --ldflags '-X main.BuildVersion=7ee3-dirty' github.com/go-graphite/go-carbon\n'go-carbon' -> '/tmp/go-carbon'\nRemoving intermediate container bd77c1d89af1\n ---> d74e5a1ab05f\nStep 4/12 : FROM alpine:3.15\n ---> c4fc93816858\nStep 5/12 : RUN addgroup -S carbon && adduser -S carbon -G carbon     && mkdir -p /var/lib/graphite/whisper /var/lib/graphite/dump /var/lib/graphite/tagging /var/log/go-carbon /etc/go-carbon/     && chown -R carbon:carbon /var/lib/graphite/ /var/log/go-carbon\n ---> Running in fb02e128da25\nRemoving intermediate container fb02e128da25\n ---> 523387a5bdf6\nStep 6/12 : COPY --from=build /tmp/go-carbon /usr/sbin/go-carbon\n ---> 07ae2a29710e\nStep 7/12 : ADD go-carbon.conf.example /etc/go-carbon/go-carbon.conf\n ---> 48f004860d99\nStep 8/12 : ADD deploy/storage*.conf /etc/go-carbon/\n ---> 1215d060ca69\nStep 9/12 : USER carbon\n ---> Running in 72e743226cc6\nRemoving intermediate container 72e743226cc6\n ---> 2761642a5141\nStep 10/12 : CMD [\"/usr/sbin/go-carbon\", \"-daemon=false\", \"-config\", \"/etc/go-carbon/go-carbon.conf\"]\n ---> Running in 1c20cbf71d48\nRemoving intermediate container 1c20cbf71d48\n ---> a37a1a684f14\nStep 11/12 : EXPOSE 2003 2004 7002 7003 7007 8080 2003/udp\n ---> Running in 682d32f8e2e8\nRemoving intermediate container 682d32f8e2e8\n ---> b0abc6869f1c\nStep 12/12 : VOLUME /var/lib/graphite /etc/go-carbon\n ---> Running in 657e18680698\nRemoving intermediate container 657e18680698\n ---> 44d037c47659\nSuccessfully built 44d037c47659\nSuccessfully tagged go-carbon:latest\n","stderr":"","imageSize":31618551},"repair":{"violations":[{"name":"apkAddUseNoCache","position":{"start":3,"end":3,"columnStart":4,"columnEnd":34}}],"repairedDockerfile":"FROM golang:1.17.4-alpine3.15 AS build\n\nCOPY . /usr/local/src/go-carbon\nRUN apk add --no-cache --update git make bash \\\n && cd /usr/local/src/go-carbon \\\n && make go-carbon \\\n && chmod +x go-carbon && cp -fv go-carbon /tmp\n\nFROM alpine:3.15\n\nRUN addgroup -S carbon && adduser -S carbon -G carbon \\\n    && mkdir -p /var/lib/graphite/whisper /var/lib/graphite/dump /var/lib/graphite/tagging /var/log/go-carbon /etc/go-carbon/ \\\n    && chown -R carbon:carbon /var/lib/graphite/ /var/log/go-carbon\n\nCOPY --from=build /tmp/go-carbon /usr/sbin/go-carbon\nADD go-carbon.conf.example /etc/go-carbon/go-carbon.conf\nADD deploy/storage*.conf /etc/go-carbon/\n\nUSER carbon\nCMD [\"/usr/sbin/go-carbon\", \"-daemon=false\", \"-config\", \"/etc/go-carbon/go-carbon.conf\"]\n\nEXPOSE 2003 2004 7002 7003 7007 8080 2003/udp\nVOLUME /var/lib/graphite /etc/go-carbon\n"},"repairedBuild":{"startTimestamp":1672198320617,"endTimestamp":1672198361341,"error":null,"stdout":"Sending build context to Docker daemon  29.78MB\r\r\nStep 1/12 : FROM golang:1.17.4-alpine3.15 AS build\n ---> 6f9d081b1170\nStep 2/12 : COPY . /usr/local/src/go-carbon\n ---> bb7290071384\nStep 3/12 : RUN apk add --no-cache --update git make bash  && cd /usr/local/src/go-carbon  && make go-carbon  && chmod +x go-carbon && cp -fv go-carbon /tmp\n ---> Running in e29d5dd30a10\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/community/x86_64/APKINDEX.tar.gz\n(1/11) Installing ncurses-terminfo-base (6.3_p20211120-r1)\n(2/11) Installing ncurses-libs (6.3_p20211120-r1)\n(3/11) Installing readline (8.1.1-r0)\n(4/11) Installing bash (5.1.16-r0)\nExecuting bash-5.1.16-r0.post-install\n(5/11) Installing brotli-libs (1.0.9-r5)\n(6/11) Installing nghttp2-libs (1.46.0-r0)\n(7/11) Installing libcurl (7.80.0-r5)\n(8/11) Installing expat (2.5.0-r0)\n(9/11) Installing pcre2 (10.40-r0)\n(10/11) Installing git (2.34.5-r0)\n(11/11) Installing make (4.3-r0)\nExecuting busybox-1.34.1-r3.trigger\nOK: 22 MiB in 26 packages\ngo build -mod vendor --ldflags '-X main.BuildVersion=7ee3-dirty' github.com/go-graphite/go-carbon\n'go-carbon' -> '/tmp/go-carbon'\nRemoving intermediate container e29d5dd30a10\n ---> 7299a3ff7454\nStep 4/12 : FROM alpine:3.15\n ---> c4fc93816858\nStep 5/12 : RUN addgroup -S carbon && adduser -S carbon -G carbon     && mkdir -p /var/lib/graphite/whisper /var/lib/graphite/dump /var/lib/graphite/tagging /var/log/go-carbon /etc/go-carbon/     && chown -R carbon:carbon /var/lib/graphite/ /var/log/go-carbon\n ---> Running in f62eb436827e\nRemoving intermediate container f62eb436827e\n ---> f8dcd8542b00\nStep 6/12 : COPY --from=build /tmp/go-carbon /usr/sbin/go-carbon\n ---> 14f850c89377\nStep 7/12 : ADD go-carbon.conf.example /etc/go-carbon/go-carbon.conf\n ---> 492c89ca802b\nStep 8/12 : ADD deploy/storage*.conf /etc/go-carbon/\n ---> d46fa11b64e2\nStep 9/12 : USER carbon\n ---> Running in 3d80ca20083a\nRemoving intermediate container 3d80ca20083a\n ---> 42b58bcc4c9c\nStep 10/12 : CMD [\"/usr/sbin/go-carbon\", \"-daemon=false\", \"-config\", \"/etc/go-carbon/go-carbon.conf\"]\n ---> Running in 539a51ad2ef2\nRemoving intermediate container 539a51ad2ef2\n ---> b2105c66e35b\nStep 11/12 : EXPOSE 2003 2004 7002 7003 7007 8080 2003/udp\n ---> Running in 86df2d6061cb\nRemoving intermediate container 86df2d6061cb\n ---> 55f0e42d0dff\nStep 12/12 : VOLUME /var/lib/graphite /etc/go-carbon\n ---> Running in 2e435521de1e\nRemoving intermediate container 2e435521de1e\n ---> 97a1bef84c07\nSuccessfully built 97a1bef84c07\nSuccessfully tagged go-carbon:latest\n","stderr":"","imageSize":31618551},"endTime":1672198361770}