{"repository":"https://github.com/mozilla/123done","dockerfilePath":"Dockerfile","startTime":1672604172772,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/mozilla/123done'...\n","error":null,"commit":"a475d6ec4728dbdaff880b59a10e24d0c518c687"},"originalBuild":{"startTimestamp":1672604173703,"endTimestamp":1672604325443,"error":null,"stdout":"Sending build context to Docker daemon  1.445MB\r\r\nStep 1/16 : FROM node:10-alpine\n10-alpine: Pulling from library/node\nddad3d7c1e96: Pulling fs layer\nde915e575d22: Pulling fs layer\n7150aa69525b: Pulling fs layer\nd7aa47be044e: Pulling fs layer\n7150aa69525b: Verifying Checksum\n7150aa69525b: Download complete\nddad3d7c1e96: Verifying Checksum\nddad3d7c1e96: Download complete\nde915e575d22: Verifying Checksum\nde915e575d22: Download complete\nd7aa47be044e: Verifying Checksum\nd7aa47be044e: Download complete\nddad3d7c1e96: Pull complete\nde915e575d22: Pull complete\n7150aa69525b: Pull complete\nd7aa47be044e: Pull complete\nDigest: sha256:dc98dac24efd4254f75976c40bce46944697a110d06ce7fa47e7268470cf2e28\nStatus: Downloaded newer image for node:10-alpine\n ---> aa67ba258e18\nStep 2/16 : RUN apk update\n ---> Running in c83667eeb4f5\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.11/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.11/community/x86_64/APKINDEX.tar.gz\nv3.11.13-12-g2cfa91a2b4 [http://dl-cdn.alpinelinux.org/alpine/v3.11/main]\nv3.11.11-124-gf2729ece5a [http://dl-cdn.alpinelinux.org/alpine/v3.11/community]\nOK: 11281 distinct packages available\nRemoving intermediate container c83667eeb4f5\n ---> 67bf3cd05b9d\nStep 3/16 : RUN apk add g++ git\n ---> Running in d2c560751365\n(1/17) Installing binutils (2.33.1-r1)\n(2/17) Installing gmp (6.1.2-r1)\n(3/17) Installing isl (0.18-r0)\n(4/17) Installing libgomp (9.3.0-r0)\n(5/17) Installing libatomic (9.3.0-r0)\n(6/17) Installing mpfr4 (4.0.2-r1)\n(7/17) Installing mpc1 (1.1.0-r1)\n(8/17) Installing gcc (9.3.0-r0)\n(9/17) Installing musl-dev (1.1.24-r3)\n(10/17) Installing libc-dev (0.7.2-r0)\n(11/17) Installing g++ (9.3.0-r0)\n(12/17) Installing ca-certificates (20191127-r2)\n(13/17) Installing nghttp2-libs (1.40.0-r1)\n(14/17) Installing libcurl (7.79.1-r0)\n(15/17) Installing expat (2.2.9-r1)\n(16/17) Installing pcre2 (10.34-r1)\n(17/17) Installing git (2.24.4-r0)\nExecuting busybox-1.31.1-r10.trigger\nExecuting ca-certificates-20191127-r2.trigger\nOK: 187 MiB in 33 packages\nRemoving intermediate container d2c560751365\n ---> b2835ae566f8\nStep 4/16 : RUN npm install -g bower\n ---> Running in 1cfcb1a9c31b\n/usr/local/bin/bower -> /usr/local/lib/node_modules/bower/bin/bower\n+ bower@1.8.14\nadded 1 package from 1 contributor in 2.266s\nRemoving intermediate container 1cfcb1a9c31b\n ---> 5ac10e879de8\nStep 5/16 : RUN addgroup -g 10001 app && adduser -D -G app -h /app -u 10001 app\n ---> Running in bcfa1753ed14\nRemoving intermediate container bcfa1753ed14\n ---> b38d0a4b92a7\nStep 6/16 : WORKDIR /app\n ---> Running in 55f5c6c18210\nRemoving intermediate container 55f5c6c18210\n ---> 28c3c6b7f68e\nStep 7/16 : USER app\n ---> Running in 3b7474006008\nRemoving intermediate container 3b7474006008\n ---> 28031c2971c1\nStep 8/16 : COPY package.json package.json\n ---> 2ee676e71a5e\nStep 9/16 : COPY bower.json bower.json\n ---> e8f005c51029\nStep 10/16 : COPY .bowerrc .bowerrc\n ---> f7166df35a1e\nStep 11/16 : RUN npm install\n ---> Running in 8c6141b6f67a\n\u001b[91mnpm WARN deprecated request@2.67.0: request has been deprecated, see https://github.com/request/request/issues/3142\n\u001b[0m\u001b[91mnpm WARN \u001b[0m\u001b[91mdeprecated connect@2.14.5: connect 2.x series is deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated mkdirp@0.4.0: Legacy versions of mkdirp are no longer supported. Please update to mkdirp 1.x. (Note that the API surface has changed to use Promises in 1.x.)\n\u001b[0m\u001b[91mnpm \u001b[0m\u001b[91mWARN\u001b[0m\u001b[91m \u001b[0m\u001b[91mdeprecated\u001b[0m\u001b[91m hawk@3.1.3: This module moved to @hapi/hawk. Please make sure to switch over as this distribution is no longer supported and may contain bugs and critical security issues.\n\u001b[0m\u001b[91mnpm WARN deprecated har-validator@2.0.6: this library is no longer supported\n\u001b[0m\u001b[91mnpm WARN deprecated tough-cookie@2.2.2: ReDoS vulnerability parsing Set-Cookie https://nodesecurity.io/advisories/130\n\u001b[0m\u001b[91mnpm WARN deprecated node-uuid@1.4.8: Use uuid module instead\n\u001b[0m\u001b[91mnpm WARN deprecated static-favicon@1.0.2: use serve-favicon module\n\u001b[0m\u001b[91mnpm WARN deprecated hoek@2.16.3: This version has been deprecated in accordance with the hapi support policy (hapi.im/support). Please upgrade to the latest version to get the best features, bug fixes, and security patches. If you are unable to upgrade at this time, paid support is available for older versions (hapi.im/commercial).\n\u001b[0m\u001b[91mnpm WARN deprecated boom@2.10.1: This version has been deprecated in accordance with the hapi support policy (hapi.im/support). Please upgrade to the latest version to get the best features, bug fixes, and security patches. If you are unable to upgrade at this time, paid support is available for older versions (hapi.im/commercial).\n\u001b[0m\u001b[91mnpm WARN deprecated cryptiles@2.0.5: This version has been deprecated in accordance with the hapi support policy (hapi.im/support). Please upgrade to the latest version to get the best features, bug fixes, and security patches. If you are unable to upgrade at this time, paid support is available for older versions (hapi.im/commercial).\n\u001b[0m\u001b[91mnpm WARN deprecated sntp@1.0.9: This module moved to @hapi/sntp. Please make sure to switch over as this distribution is no longer supported and may contain bugs and critical security issues.\n\u001b[0m\u001b[91mnpm WARN deprecated circular-json@0.3.3: CircularJSON is in maintenance only, flatted is its successor.\n\u001b[0m\u001b[91mnpm WARN deprecated scmp@0.0.3: scmp v2 uses improved core crypto comparison since Node v6.6.0\n\u001b[0m\u001b[91mnpm WARN deprecated ejs@1.0.0: Critical security bugs fixed in 2.5.5\n\u001b[0m\n> es5-ext@0.10.62 postinstall /app/node_modules/es5-ext\n>  node -e \"try{require('./_postinstall')}catch(e){}\" || exit 0\n\n\n> 123done@0.0.2 postinstall /app\n> bower install --config.interactive=false -s\n\n\u001b[91mnpm notice created a lockfile as package-lock.json. You should commit this file.\n\u001b[0madded 285 packages from 188 contributors and audited 285 packages in 15.713s\n\n4 packages are looking for funding\n  run `npm fund` for details\n\nfound 70 vulnerabilities (11 low, 26 moderate, 27 high, 6 critical)\n  run `npm audit fix` to fix them, or `npm audit` for details\nRemoving intermediate container 8c6141b6f67a\n ---> 6b4a76c3c454\nStep 12/16 : RUN /bin/rm -rf .npm\n ---> Running in 5947c6ade780\nRemoving intermediate container 5947c6ade780\n ---> 66f967b612f6\nStep 13/16 : COPY . /app\n ---> eff4e1d4ab93\nStep 14/16 : USER root\n ---> Running in 998343b384e2\nRemoving intermediate container 998343b384e2\n ---> bb40f5cd8017\nStep 15/16 : RUN apk del -r g++ git\n ---> Running in 5272631b61de\n(1/17) Purging g++ (9.3.0-r0)\n(2/17) Purging gcc (9.3.0-r0)\n(3/17) Purging binutils (2.33.1-r1)\n(4/17) Purging libatomic (9.3.0-r0)\n(5/17) Purging libgomp (9.3.0-r0)\n(6/17) Purging libc-dev (0.7.2-r0)\n(7/17) Purging musl-dev (1.1.24-r3)\n(8/17) Purging git (2.24.4-r0)\n(9/17) Purging isl (0.18-r0)\n(10/17) Purging mpc1 (1.1.0-r1)\n(11/17) Purging mpfr4 (4.0.2-r1)\n(12/17) Purging gmp (6.1.2-r1)\n(13/17) Purging libcurl (7.79.1-r0)\n(14/17) Purging ca-certificates (20191127-r2)\nExecuting ca-certificates-20191127-r2.post-deinstall\n(15/17) Purging nghttp2-libs (1.40.0-r1)\n(16/17) Purging expat (2.2.9-r1)\n(17/17) Purging pcre2 (10.34-r1)\nExecuting busybox-1.31.1-r10.trigger\nOK: 7 MiB in 16 packages\nRemoving intermediate container 5272631b61de\n ---> 993adb5b518a\nStep 16/16 : CMD node ./server.js\n ---> Running in d0a9ee0f5f10\nRemoving intermediate container d0a9ee0f5f10\n ---> d08c58eafa59\nSuccessfully built d08c58eafa59\nSuccessfully tagged 123done:latest\n","stderr":"","imageSize":426088638},"repair":{"violations":[{"name":"npmCacheCleanAfterInstall","position":{"start":5,"end":5,"columnStart":4,"columnEnd":24}},{"name":"npmCacheCleanAfterInstall","position":{"start":15,"end":15,"columnStart":4,"columnEnd":15}},{"name":"apkAddUseNoCache","position":{"start":4,"end":4,"columnStart":4,"columnEnd":19}}],"repairedDockerfile":"FROM node:10-alpine\n\n# as root\nRUN apk update\nRUN apk add --no-cache g++ git\nRUN npm install -g bower\n\nRUN addgroup -g 10001 app && adduser -D -G app -h /app -u 10001 app\nWORKDIR /app\nUSER app\n\n# as app\nCOPY package.json package.json\nCOPY bower.json bower.json\nCOPY .bowerrc .bowerrc\nRUN npm install\nRUN /bin/rm -rf .npm\n\nCOPY . /app\n\nUSER root\nRUN apk del -r g++ git\n\nCMD node ./server.js\n\n\n"},"repairedBuild":{"startTimestamp":1672604332988,"endTimestamp":1672604414224,"error":null,"stdout":"Sending build context to Docker daemon  1.445MB\r\r\nStep 1/16 : FROM node:10-alpine\n ---> aa67ba258e18\nStep 2/16 : RUN apk update\n ---> Running in 4c253617940a\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.11/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.11/community/x86_64/APKINDEX.tar.gz\nv3.11.13-12-g2cfa91a2b4 [http://dl-cdn.alpinelinux.org/alpine/v3.11/main]\nv3.11.11-124-gf2729ece5a [http://dl-cdn.alpinelinux.org/alpine/v3.11/community]\nOK: 11281 distinct packages available\nRemoving intermediate container 4c253617940a\n ---> 3f0a2fc0c785\nStep 3/16 : RUN apk add --no-cache g++ git\n ---> Running in 06e9b2a7bbe2\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.11/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.11/community/x86_64/APKINDEX.tar.gz\n(1/17) Installing binutils (2.33.1-r1)\n(2/17) Installing gmp (6.1.2-r1)\n(3/17) Installing isl (0.18-r0)\n(4/17) Installing libgomp (9.3.0-r0)\n(5/17) Installing libatomic (9.3.0-r0)\n(6/17) Installing mpfr4 (4.0.2-r1)\n(7/17) Installing mpc1 (1.1.0-r1)\n(8/17) Installing gcc (9.3.0-r0)\n(9/17) Installing musl-dev (1.1.24-r3)\n(10/17) Installing libc-dev (0.7.2-r0)\n(11/17) Installing g++ (9.3.0-r0)\n(12/17) Installing ca-certificates (20191127-r2)\n(13/17) Installing nghttp2-libs (1.40.0-r1)\n(14/17) Installing libcurl (7.79.1-r0)\n(15/17) Installing expat (2.2.9-r1)\n(16/17) Installing pcre2 (10.34-r1)\n(17/17) Installing git (2.24.4-r0)\nExecuting busybox-1.31.1-r10.trigger\nExecuting ca-certificates-20191127-r2.trigger\nOK: 187 MiB in 33 packages\nRemoving intermediate container 06e9b2a7bbe2\n ---> 3383a3074666\nStep 4/16 : RUN npm install -g bower\n ---> Running in 97e49c9ec002\n/usr/local/bin/bower -> /usr/local/lib/node_modules/bower/bin/bower\n+ bower@1.8.14\nadded 1 package from 1 contributor in 1.493s\nRemoving intermediate container 97e49c9ec002\n ---> a95237379a1f\nStep 5/16 : RUN addgroup -g 10001 app && adduser -D -G app -h /app -u 10001 app\n ---> Running in 40ca882792c4\nRemoving intermediate container 40ca882792c4\n ---> 2811defeb493\nStep 6/16 : WORKDIR /app\n ---> Running in e132523cc757\nRemoving intermediate container e132523cc757\n ---> ae6ea462d37c\nStep 7/16 : USER app\n ---> Running in 5dce860ea6d1\nRemoving intermediate container 5dce860ea6d1\n ---> 50c3f19dfb41\nStep 8/16 : COPY package.json package.json\n ---> b303396b6986\nStep 9/16 : COPY bower.json bower.json\n ---> dbeda7c43b75\nStep 10/16 : COPY .bowerrc .bowerrc\n ---> 60838a4fe749\nStep 11/16 : RUN npm install\n ---> Running in 60817da5f074\n\u001b[91mnpm WARN deprecated request@2.67.0: request has been deprecated, see https://github.com/request/request/issues/3142\n\u001b[0m\u001b[91mnpm WARN deprecated mkdirp@0.4.0: Legacy versions of mkdirp are no longer supported. Please update to mkdirp 1.x. (Note that the API surface has changed to use Promises in 1.x.)\n\u001b[0m\u001b[91mnpm WARN deprecated connect@2.14.5: connect 2.x series is deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated node-uuid@1.4.8: Use uuid module instead\n\u001b[0m\u001b[91mnpm WARN deprecated tough-cookie@2.2.2: ReDoS vulnerability parsing Set-Cookie https://nodesecurity.io/advisories/130\n\u001b[0m\u001b[91mnpm WARN deprecated hawk@3.1.3: This module moved to @hapi/hawk. Please make sure to switch over as this distribution is no longer supported and may contain bugs and critical security issues.\n\u001b[0m\u001b[91mnpm WARN deprecated har-validator@2.0.6: this library is no longer supported\n\u001b[0m\u001b[91mnpm WARN deprecated ejs@1.0.0: Critical security bugs fixed in 2.5.5\n\u001b[0m\u001b[91mnpm WARN deprecated static-favicon@1.0.2: use serve-favicon module\n\u001b[0m\u001b[91mnpm WARN deprecated hoek@2.16.3: This version has been deprecated in accordance with the hapi support policy (hapi.im/support). Please upgrade to the latest version to get the best features, bug fixes, and security patches. If you are unable to upgrade at this time, paid support is available for older versions (hapi.im/commercial).\n\u001b[0m\u001b[91mnpm WARN deprecated boom@2.10.1: This version has been deprecated in accordance with the hapi support policy (hapi.im/support). Please upgrade to the latest version to get the best features, bug fixes, and security patches. If you are unable to upgrade at this time, paid support is available for older versions (hapi.im/commercial).\n\u001b[0m\u001b[91mnpm WARN deprecated\u001b[0m\u001b[91m cryptiles@2.0.5: This version has been deprecated in accordance with the hapi support policy (hapi.im/support). Please upgrade to the latest version to get the best features, bug fixes, and security patches. If you are unable to upgrade at this time, paid support is available for older versions (hapi.im/commercial).\n\u001b[0m\u001b[91mnpm WARN deprecated\u001b[0m\u001b[91m sntp@1.0.9: This module moved to @hapi/sntp. Please make sure to switch over as this distribution is no longer supported and may contain bugs and critical security issues.\n\u001b[0m\u001b[91mnpm WARN deprecated scmp@0.0.3: scmp v2 uses improved core crypto comparison since Node v6.6.0\n\u001b[0m\u001b[91mnpm WARN deprecated circular-json@0.3.3: CircularJSON is in maintenance only, flatted is its successor.\n\u001b[0m\n> es5-ext@0.10.62 postinstall /app/node_modules/es5-ext\n>  node -e \"try{require('./_postinstall')}catch(e){}\" || exit 0\n\n\n> 123done@0.0.2 postinstall /app\n> bower install --config.interactive=false -s\n\n\u001b[91mnpm notice created a lockfile as package-lock.json. You should commit this file.\n\u001b[0madded 285 packages from 188 contributors and audited 285 packages in 12.489s\n\n4 packages are looking for funding\n  run `npm fund` for details\n\nfound 70 vulnerabilities (11 low, 26 moderate, 27 high, 6 critical)\n  run `npm audit fix` to fix them, or `npm audit` for details\nRemoving intermediate container 60817da5f074\n ---> ba92627dcbb2\nStep 12/16 : RUN /bin/rm -rf .npm\n ---> Running in b175a749d1cc\nRemoving intermediate container b175a749d1cc\n ---> 63f2006f687c\nStep 13/16 : COPY . /app\n ---> 2d85c92e106f\nStep 14/16 : USER root\n ---> Running in 55bfe7609308\nRemoving intermediate container 55bfe7609308\n ---> 7dc566971da9\nStep 15/16 : RUN apk del -r g++ git\n ---> Running in 3db6ae923a2b\n(1/17) Purging g++ (9.3.0-r0)\n(2/17) Purging gcc (9.3.0-r0)\n(3/17) Purging binutils (2.33.1-r1)\n(4/17) Purging libatomic (9.3.0-r0)\n(5/17) Purging libgomp (9.3.0-r0)\n(6/17) Purging libc-dev (0.7.2-r0)\n(7/17) Purging musl-dev (1.1.24-r3)\n(8/17) Purging git (2.24.4-r0)\n(9/17) Purging isl (0.18-r0)\n(10/17) Purging mpc1 (1.1.0-r1)\n(11/17) Purging mpfr4 (4.0.2-r1)\n(12/17) Purging gmp (6.1.2-r1)\n(13/17) Purging libcurl (7.79.1-r0)\n(14/17) Purging ca-certificates (20191127-r2)\nExecuting ca-certificates-20191127-r2.post-deinstall\n(15/17) Purging nghttp2-libs (1.40.0-r1)\n(16/17) Purging expat (2.2.9-r1)\n(17/17) Purging pcre2 (10.34-r1)\nExecuting busybox-1.31.1-r10.trigger\nOK: 7 MiB in 16 packages\nRemoving intermediate container 3db6ae923a2b\n ---> 98b2abf96014\nStep 16/16 : CMD node ./server.js\n ---> Running in 96891b92b63a\nRemoving intermediate container 96891b92b63a\n ---> 715cd6a56019\nSuccessfully built 715cd6a56019\nSuccessfully tagged 123done:latest\n","stderr":"","imageSize":426098594},"endTime":1672604415425}