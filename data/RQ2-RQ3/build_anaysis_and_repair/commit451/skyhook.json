{"repository":"https://github.com/commit451/skyhook","dockerfilePath":"Dockerfile","startTime":1672238062432,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/commit451/skyhook'...\n","error":null,"commit":"2cc1cdc45a46f5b81dc9a4db4f79d430ff68c960"},"originalBuild":{"startTimestamp":1672238063372,"endTimestamp":1672238141112,"error":null,"stdout":"Sending build context to Docker daemon  775.7kB\r\r\nStep 1/17 : FROM node:16 as buildenv\n16: Pulling from library/node\nc7c50787e2da: Already exists\naff359114acb: Already exists\n821dc261e045: Already exists\n3790459d63d5: Already exists\nc09b016fff62: Already exists\n5348855a40c0: Pulling fs layer\n8f331a0ab6eb: Pulling fs layer\n1b7fba8c2ddb: Pulling fs layer\n138e31cf9c76: Pulling fs layer\n138e31cf9c76: Waiting\n5348855a40c0: Verifying Checksum\n5348855a40c0: Download complete\n1b7fba8c2ddb: Verifying Checksum\n1b7fba8c2ddb: Download complete\n138e31cf9c76: Verifying Checksum\n138e31cf9c76: Download complete\n8f331a0ab6eb: Verifying Checksum\n8f331a0ab6eb: Download complete\n5348855a40c0: Pull complete\n8f331a0ab6eb: Pull complete\n1b7fba8c2ddb: Pull complete\n138e31cf9c76: Pull complete\nDigest: sha256:64e8bcdfdad6718050801a2639f7e6645fdaf85ec37a98cdb61f6a5331217618\nStatus: Downloaded newer image for node:16\n ---> c910109adbfd\nStep 2/17 : WORKDIR /app\n ---> Running in 13f4511fcd0b\nRemoving intermediate container 13f4511fcd0b\n ---> 52d0259f9efa\nStep 3/17 : COPY . .\n ---> ace7deadfa22\nStep 4/17 : RUN npm install && npm run build\n ---> Running in bbe96da03b96\n\u001b[91mnpm WARN deprecated querystring@0.2.0: The querystring API is considered Legacy. new code should use the URLSearchParams API instead.\n\u001b[0m\u001b[91mnpm WARN deprecated formidable@1.2.6: Please upgrade to latest, formidable@v2 or formidable@v3! Check these notes: https://bit.ly/2ZEqIau\n\u001b[0m\u001b[91mnpm WARN deprecated superagent@3.8.3: Please upgrade to v7.0.2+ of superagent.  We have fixed numerous issues with streams, form-data, attach(), filesystem errors not bubbling up (ENOENT on attach()), and all tests are now passing.  See the releases tab for more information at <https://github.com/visionmedia/superagent/releases>.\n\u001b[0m\nadded 431 packages, and audited 432 packages in 5s\n\n58 packages are looking for funding\n  run `npm fund` for details\n\n5 moderate severity vulnerabilities\n\nTo address all issues, run:\n  npm audit fix\n\nRun `npm audit` for details.\n\u001b[91mnpm notice \nnpm notice New major version of npm available! 8.19.3 -> 9.2.0\nnpm notice Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm notice\u001b[0m\u001b[91m Run `npm install -g npm@9.2.0` to update!\nnpm notice \n\u001b[0m\n> skyhook@0.0.1 build\n> npm run tsc\n\n\n> skyhook@0.0.1 tsc\n> tsc\n\nRemoving intermediate container bbe96da03b96\n ---> cc0206bb50ff\nStep 5/17 : FROM node:16\n ---> c910109adbfd\nStep 6/17 : RUN mkdir -p /usr/src/app\n ---> Running in dd64c8f31fa0\nRemoving intermediate container dd64c8f31fa0\n ---> 8e9038ede089\nStep 7/17 : WORKDIR /usr/src/app\n ---> Running in bfa2ce431dec\nRemoving intermediate container bfa2ce431dec\n ---> 3e432fc12231\nStep 8/17 : ARG NODE_ENV\n ---> Running in 856e749c8b25\nRemoving intermediate container 856e749c8b25\n ---> 140d5a0c97af\nStep 9/17 : ENV NODE_ENV $NODE_ENV\n ---> Running in 7fdc9645af69\nRemoving intermediate container 7fdc9645af69\n ---> 300d04e0f07f\nStep 10/17 : COPY package.json /usr/src/app/\n ---> cdde253aebd2\nStep 11/17 : COPY package-lock.json /usr/src/app/\n ---> 80f38156737f\nStep 12/17 : RUN npm install && npm cache clean --force\n ---> Running in 4b62f7100de1\n\u001b[91mnpm WARN deprecated querystring@0.2.0: The querystring API is considered Legacy. new code should use the URLSearchParams API instead.\n\u001b[0m\u001b[91mnpm WARN deprecated formidable@1.2.6: Please upgrade to latest, formidable@v2 or formidable@v3! Check these notes: https://bit.ly/2ZEqIau\n\u001b[0m\u001b[91mnpm WARN deprecated superagent@3.8.3: Please upgrade to v7.0.2+ of superagent.  We have fixed numerous issues with streams, form-data, attach(), filesystem errors not bubbling up (ENOENT on attach()), and all tests are now passing.  See the releases tab for more information at <https://github.com/visionmedia/superagent/releases>.\n\u001b[0m\nadded 431 packages, and audited 432 packages in 5s\n\n58 packages are looking for funding\n  run `npm fund` for details\n\n5 moderate severity vulnerabilities\n\nTo address all issues, run:\n  npm audit fix\n\nRun `npm audit` for details.\n\u001b[91mnpm notice \nnpm notice New major version of npm available! 8.19.3 -> 9.2.0\nnpm notice Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm \u001b[0m\u001b[91mnotice Run `npm install -g npm@9.2.0` to update!\nnpm notice \n\u001b[0m\u001b[91mnpm\u001b[0m\u001b[91m WARN using --force Recommended protections disabled.\n\u001b[0mRemoving intermediate container 4b62f7100de1\n ---> 05f0464bc595\nStep 13/17 : COPY . /usr/src/app\n ---> afae10d939cc\nStep 14/17 : RUN mkdir dist\n ---> Running in a7e258d7d2f3\nRemoving intermediate container a7e258d7d2f3\n ---> ee70f599c2dd\nStep 15/17 : COPY --from=buildenv /app/dist /usr/src/app/dist\n ---> 81e4b3ab7347\nStep 16/17 : EXPOSE 8080\n ---> Running in 4102e0873d8e\nRemoving intermediate container 4102e0873d8e\n ---> a8336739023a\nStep 17/17 : CMD [ \"npm\", \"run\", \"start\" ]\n ---> Running in efab511a8ff8\nRemoving intermediate container efab511a8ff8\n ---> 8cd0a4fb4200\nSuccessfully built 8cd0a4fb4200\nSuccessfully tagged skyhook:latest\n","stderr":"","imageSize":1016400687},"repair":{"violations":[{"name":"npmCacheCleanAfterInstall","position":{"start":4,"end":4,"columnStart":4,"columnEnd":15}},{"name":"mkdirUsrSrcThenRemove","position":{"start":8,"end":8,"columnStart":4,"columnEnd":25}}],"repairedDockerfile":"FROM node:16 as buildenv\n\nWORKDIR /app\nCOPY . .\nRUN npm install && npm run build\n\nFROM node:16\n\nRUN mkdir -p /usr/src/app\nWORKDIR /usr/src/app\n\nARG NODE_ENV\nENV NODE_ENV $NODE_ENV\nCOPY package.json /usr/src/app/\nCOPY package-lock.json /usr/src/app/\nRUN npm install && npm cache clean --force\nCOPY . /usr/src/app\n\nRUN mkdir dist\nCOPY --from=buildenv /app/dist /usr/src/app/dist\n\nEXPOSE 8080\n\nCMD [ \"npm\", \"run\", \"start\" ]\n"},"repairedBuild":{"startTimestamp":1672238141582,"endTimestamp":1672238306668,"error":null,"stdout":"Sending build context to Docker daemon  775.7kB\r\r\nStep 1/17 : FROM node:16 as buildenv\n ---> c910109adbfd\nStep 2/17 : WORKDIR /app\n ---> Running in ab79143c2976\nRemoving intermediate container ab79143c2976\n ---> 649c50ccea76\nStep 3/17 : COPY . .\n ---> 399e6cbddb5f\nStep 4/17 : RUN npm install && npm run build\n ---> Running in 12aca112557a\n\u001b[91mnpm WARN deprecated querystring@0.2.0: The querystring API is considered Legacy. new code should use the URLSearchParams API instead.\n\u001b[0m\u001b[91mnpm WARN deprecated formidable@1.2.6: Please upgrade to latest, formidable@v2 or formidable@v3! Check these notes: https://bit.ly/2ZEqIau\n\u001b[0m\u001b[91mnpm WARN deprecated superagent@3.8.3: Please upgrade to v7.0.2+ of superagent.  We have fixed numerous issues with streams, form-data, attach(), filesystem errors not bubbling up (ENOENT on attach()), and all tests are now passing.  See the releases tab for more information at <https://github.com/visionmedia/superagent/releases>.\n\u001b[0m\nadded 431 packages, and audited 432 packages in 6s\n\n58 packages are looking for funding\n  run `npm fund` for details\n\n5 moderate severity vulnerabilities\n\nTo address all issues, run:\n  npm audit fix\n\nRun `npm audit` for details.\n\u001b[91mnpm notice \nnpm notice New major version of npm available! 8.19.3 -> 9.2.0\nnpm notice Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm \u001b[0m\u001b[91mnotice Run `npm install -g npm@9.2.0` to update!\nnpm notice\u001b[0m\u001b[91m \n\u001b[0m\n> skyhook@0.0.1 build\n> npm run tsc\n\n\n> skyhook@0.0.1 tsc\n> tsc\n\nRemoving intermediate container 12aca112557a\n ---> 3511e8b00bc1\nStep 5/17 : FROM node:16\n ---> c910109adbfd\nStep 6/17 : RUN mkdir -p /usr/src/app\n ---> Running in a9b1709900bd\nRemoving intermediate container a9b1709900bd\n ---> 57b1a20a2cdf\nStep 7/17 : WORKDIR /usr/src/app\n ---> Running in 5ef23765c95e\nRemoving intermediate container 5ef23765c95e\n ---> 4b0d2aa6de01\nStep 8/17 : ARG NODE_ENV\n ---> Running in 5068f6ed5061\nRemoving intermediate container 5068f6ed5061\n ---> ba00e4d5538c\nStep 9/17 : ENV NODE_ENV $NODE_ENV\n ---> Running in fb3eb4f37f15\nRemoving intermediate container fb3eb4f37f15\n ---> 333407c5c93b\nStep 10/17 : COPY package.json /usr/src/app/\n ---> 5b69003668a8\nStep 11/17 : COPY package-lock.json /usr/src/app/\n ---> 4c3f8c21e56d\nStep 12/17 : RUN npm install && npm cache clean --force\n ---> Running in 8a38adfc4ec7\n\u001b[91mnpm WARN deprecated querystring@0.2.0: The querystring API is considered Legacy. new code should use the URLSearchParams API instead.\n\u001b[0m\u001b[91mnpm WARN deprecated formidable@1.2.6: Please upgrade to latest, formidable@v2 or formidable@v3! Check these notes: https://bit.ly/2ZEqIau\n\u001b[0m\u001b[91mnpm WARN deprecated superagent@3.8.3: Please upgrade to v7.0.2+ of superagent.  We have fixed numerous issues with streams, form-data, attach(), filesystem errors not bubbling up (ENOENT on attach()), and all tests are now passing.  See the releases tab for more information at <https://github.com/visionmedia/superagent/releases>.\n\u001b[0m\nadded 431 packages, and audited 432 packages in 6s\n\n58 packages are looking for funding\n  run `npm fund` for details\n\n5 moderate severity vulnerabilities\n\nTo address all issues, run:\n  npm audit fix\n\nRun `npm audit` for details.\n\u001b[91mnpm notice \nnpm notice New major version of npm available! 8.19.3 -> 9.2.0\nnpm notice Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm \u001b[0m\u001b[91mnotice Run `npm install -g npm@9.2.0` to update!\nnpm notice \n\u001b[0m\u001b[91mnpm\u001b[0m\u001b[91m WARN using --force Recommended protections disabled.\n\u001b[0mRemoving intermediate container 8a38adfc4ec7\n ---> 0908c92f0f63\nStep 13/17 : COPY . /usr/src/app\n ---> 6296cb541b9c\nStep 14/17 : RUN mkdir dist\n ---> Running in 9cb545b73326\nRemoving intermediate container 9cb545b73326\n ---> 6d52a7d60fbb\nStep 15/17 : COPY --from=buildenv /app/dist /usr/src/app/dist\n ---> 8e6a696d468d\nStep 16/17 : EXPOSE 8080\n ---> Running in abedd917b29f\nRemoving intermediate container abedd917b29f\n ---> e50b3609de3f\nStep 17/17 : CMD [ \"npm\", \"run\", \"start\" ]\n ---> Running in 3ed451ae2ebe\nRemoving intermediate container 3ed451ae2ebe\n ---> 4b8b8c4c71b3\nSuccessfully built 4b8b8c4c71b3\nSuccessfully tagged skyhook:latest\n","stderr":"","imageSize":1016400668},"endTime":1672238311417}