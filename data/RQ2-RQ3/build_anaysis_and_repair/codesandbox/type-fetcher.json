{"repository":"https://github.com/codesandbox/type-fetcher","dockerfilePath":"Dockerfile","startTime":1672205106704,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/codesandbox/type-fetcher'...\n","error":null,"commit":"efd0099c29743bfeec92168faf20704e10cc62a4"},"originalBuild":{"startTimestamp":1672205107704,"endTimestamp":1672205363655,"error":null,"stdout":"Sending build context to Docker daemon  365.6kB\r\r\nStep 1/18 : FROM node:14.13.1 as builder\n14.13.1: Pulling from library/node\n0400ac8f7460: Pulling fs layer\nfa8559aa5ebb: Pulling fs layer\nda32bfbbc3ba: Pulling fs layer\ne1dc6725529d: Pulling fs layer\n572866ab72a6: Pulling fs layer\n63ee7d0b743d: Pulling fs layer\nedecccb83d49: Pulling fs layer\nbc759b1ea810: Pulling fs layer\nc672a0c72296: Pulling fs layer\n572866ab72a6: Waiting\ne1dc6725529d: Waiting\n63ee7d0b743d: Waiting\nedecccb83d49: Waiting\nbc759b1ea810: Waiting\nc672a0c72296: Waiting\nda32bfbbc3ba: Verifying Checksum\nda32bfbbc3ba: Download complete\nfa8559aa5ebb: Verifying Checksum\nfa8559aa5ebb: Download complete\n0400ac8f7460: Verifying Checksum\n0400ac8f7460: Download complete\n63ee7d0b743d: Verifying Checksum\n63ee7d0b743d: Download complete\nedecccb83d49: Verifying Checksum\nedecccb83d49: Download complete\n572866ab72a6: Verifying Checksum\n572866ab72a6: Download complete\ne1dc6725529d: Verifying Checksum\ne1dc6725529d: Download complete\nbc759b1ea810: Verifying Checksum\nbc759b1ea810: Download complete\nc672a0c72296: Verifying Checksum\nc672a0c72296: Download complete\n0400ac8f7460: Pull complete\nfa8559aa5ebb: Pull complete\nda32bfbbc3ba: Pull complete\ne1dc6725529d: Pull complete\n572866ab72a6: Pull complete\n63ee7d0b743d: Pull complete\nedecccb83d49: Pull complete\nbc759b1ea810: Pull complete\nc672a0c72296: Pull complete\nDigest: sha256:2d1077c78724caf4f8bba75b680c2266321d8ecbce23eb33fce08fa8de8d083e\nStatus: Downloaded newer image for node:14.13.1\n ---> 5377c9a2fb1f\nStep 2/18 : WORKDIR /home/node/app\n ---> Running in 1d0a6f249f6b\nRemoving intermediate container 1d0a6f249f6b\n ---> 1cdce1d75d76\nStep 3/18 : ADD package.json /home/node/app/package.json\n ---> b14a69b229e3\nStep 4/18 : ADD yarn.lock /home/node/app/yarn.lock\n ---> d500805b91aa\nStep 5/18 : RUN yarn\n ---> Running in 2b1dc1d1895e\nyarn install v1.22.5\n[1/4] Resolving packages...\n[2/4] Fetching packages...\ninfo fsevents@1.2.7: The platform \"linux\" is incompatible with this module.\ninfo \"fsevents@1.2.7\" is an optional dependency and failed compatibility check. Excluding it from installation.\n[3/4] Linking dependencies...\n[4/4] Building fresh packages...\nDone in 20.86s.\nRemoving intermediate container 2b1dc1d1895e\n ---> adc0c5fc5419\nStep 6/18 : ADD . /home/node/app\n ---> 5a681960ba2e\nStep 7/18 : RUN yarn build && rm -rf node_modules\n ---> Running in ce31b43ce7a0\nyarn run v1.22.5\n$ tsc\nDone in 5.02s.\nRemoving intermediate container ce31b43ce7a0\n ---> b48e996d6ebf\nStep 8/18 : FROM node:14.13.1-alpine as runner\n14.13.1-alpine: Pulling from library/node\ncbdbe7a5bc2a: Pulling fs layer\nda4848f6799e: Pulling fs layer\n38e2b8b36c07: Pulling fs layer\n48cc30bb13fe: Pulling fs layer\n48cc30bb13fe: Waiting\ncbdbe7a5bc2a: Verifying Checksum\ncbdbe7a5bc2a: Download complete\ncbdbe7a5bc2a: Pull complete\n38e2b8b36c07: Verifying Checksum\n38e2b8b36c07: Download complete\n48cc30bb13fe: Download complete\nda4848f6799e: Download complete\nda4848f6799e: Pull complete\n38e2b8b36c07: Pull complete\n48cc30bb13fe: Pull complete\nDigest: sha256:0f8634b451a9e88e1e920ea1ddf931156efca89bc22494d9a2a7a505f14e9abd\nStatus: Downloaded newer image for node:14.13.1-alpine\n ---> 87e4e57acaa5\nStep 9/18 : RUN apk add git python make g++\n ---> Running in 418684d6e851\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.11/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.11/community/x86_64/APKINDEX.tar.gz\n(1/27) Upgrading musl (1.1.24-r2 -> 1.1.24-r3)\n(2/27) Installing binutils (2.33.1-r1)\n(3/27) Installing gmp (6.1.2-r1)\n(4/27) Installing isl (0.18-r0)\n(5/27) Installing libgomp (9.3.0-r0)\n(6/27) Installing libatomic (9.3.0-r0)\n(7/27) Installing mpfr4 (4.0.2-r1)\n(8/27) Installing mpc1 (1.1.0-r1)\n(9/27) Installing gcc (9.3.0-r0)\n(10/27) Installing musl-dev (1.1.24-r3)\n(11/27) Installing libc-dev (0.7.2-r0)\n(12/27) Installing g++ (9.3.0-r0)\n(13/27) Installing ca-certificates (20191127-r2)\n(14/27) Installing nghttp2-libs (1.40.0-r1)\n(15/27) Installing libcurl (7.79.1-r0)\n(16/27) Installing expat (2.2.9-r1)\n(17/27) Installing pcre2 (10.34-r1)\n(18/27) Installing git (2.24.4-r0)\n(19/27) Installing make (4.2.1-r2)\n(20/27) Installing libbz2 (1.0.8-r1)\n(21/27) Installing libffi (3.2.1-r6)\n(22/27) Installing gdbm (1.13-r1)\n(23/27) Installing ncurses-terminfo-base (6.1_p20200118-r4)\n(24/27) Installing ncurses-libs (6.1_p20200118-r4)\n(25/27) Installing readline (8.0.1-r0)\n(26/27) Installing sqlite-libs (3.30.1-r2)\n(27/27) Installing python2 (2.7.18-r0)\nExecuting busybox-1.31.1-r9.trigger\nExecuting ca-certificates-20191127-r2.trigger\nOK: 228 MiB in 42 packages\nRemoving intermediate container 418684d6e851\n ---> d4fba16620cf\nStep 10/18 : WORKDIR /home/node/app\n ---> Running in 2b1c65125294\nRemoving intermediate container 2b1c65125294\n ---> 5398f8f9dc10\nStep 11/18 : COPY --from=builder /home/node/app/package.json /home/node/app/package.json\n ---> f92994de1e2a\nStep 12/18 : COPY --from=builder /home/node/app/yarn.lock /home/node/app/yarn.lock\n ---> 587f8144aa7f\nStep 13/18 : RUN yarn --production\n ---> Running in b20286333fbc\nyarn install v1.22.5\n[1/4] Resolving packages...\n[2/4] Fetching packages...\ninfo fsevents@1.2.7: The platform \"linux\" is incompatible with this module.\ninfo \"fsevents@1.2.7\" is an optional dependency and failed compatibility check. Excluding it from installation.\n[3/4] Linking dependencies...\n[4/4] Building fresh packages...\nDone in 9.04s.\nRemoving intermediate container b20286333fbc\n ---> ae5bdca37339\nStep 14/18 : COPY --from=builder /home/node/app/dist /home/node/app/dist\n ---> bed2486dbf2a\nStep 15/18 : COPY --from=builder /home/node/app/api /home/node/app/api\n ---> d090b5f0edae\nStep 16/18 : ENV PORT=8080\n ---> Running in a283f97a2e16\nRemoving intermediate container a283f97a2e16\n ---> 402273e66fbb\nStep 17/18 : EXPOSE 8080\n ---> Running in 349ff7f8c72d\nRemoving intermediate container 349ff7f8c72d\n ---> bde1eb800534\nStep 18/18 : CMD yarn start\n ---> Running in 92e56d3378ec\nRemoving intermediate container 92e56d3378ec\n ---> 4d75610ed3a8\nSuccessfully built 4d75610ed3a8\nSuccessfully tagged type-fetcher:latest\n","stderr":"","imageSize":585931187},"repair":{"violations":[{"name":"apkAddUseNoCache","position":{"start":12,"end":12,"columnStart":4,"columnEnd":31}}],"repairedDockerfile":"FROM node:14.13.1 as builder\n\nWORKDIR /home/node/app\n\nADD package.json /home/node/app/package.json\nADD yarn.lock /home/node/app/yarn.lock\nRUN yarn\n\nADD . /home/node/app\nRUN yarn build && rm -rf node_modules\n\nFROM node:14.13.1-alpine as runner\nRUN apk add --no-cache git python make g++\n\nWORKDIR /home/node/app\n\nCOPY --from=builder /home/node/app/package.json /home/node/app/package.json\nCOPY --from=builder /home/node/app/yarn.lock /home/node/app/yarn.lock\nRUN yarn --production\n\nCOPY --from=builder /home/node/app/dist /home/node/app/dist\nCOPY --from=builder /home/node/app/api /home/node/app/api\n\n\nENV PORT=8080\nEXPOSE 8080\n\nCMD yarn start\n\n"},"repairedBuild":{"startTimestamp":1672205364411,"endTimestamp":1672205486107,"error":null,"stdout":"Sending build context to Docker daemon  365.6kB\r\r\nStep 1/18 : FROM node:14.13.1 as builder\n ---> 5377c9a2fb1f\nStep 2/18 : WORKDIR /home/node/app\n ---> Running in ccb6ff3ec4f3\nRemoving intermediate container ccb6ff3ec4f3\n ---> 3fb27f8c424d\nStep 3/18 : ADD package.json /home/node/app/package.json\n ---> 7c10df5e7761\nStep 4/18 : ADD yarn.lock /home/node/app/yarn.lock\n ---> 51a8d57a5d8d\nStep 5/18 : RUN yarn\n ---> Running in 0da4a095cb01\nyarn install v1.22.5\n[1/4] Resolving packages...\n[2/4] Fetching packages...\ninfo fsevents@1.2.7: The platform \"linux\" is incompatible with this module.\ninfo \"fsevents@1.2.7\" is an optional dependency and failed compatibility check. Excluding it from installation.\n[3/4] Linking dependencies...\n[4/4] Building fresh packages...\nDone in 8.54s.\nRemoving intermediate container 0da4a095cb01\n ---> f87ff860d199\nStep 6/18 : ADD . /home/node/app\n ---> 8c58afa13f38\nStep 7/18 : RUN yarn build && rm -rf node_modules\n ---> Running in 4ad2e62981b9\nyarn run v1.22.5\n$ tsc\nDone in 5.26s.\nRemoving intermediate container 4ad2e62981b9\n ---> 882c34cf2977\nStep 8/18 : FROM node:14.13.1-alpine as runner\n ---> 87e4e57acaa5\nStep 9/18 : RUN apk add --no-cache git python make g++\n ---> Running in 56ce4725d184\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.11/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.11/community/x86_64/APKINDEX.tar.gz\n(1/27) Upgrading musl (1.1.24-r2 -> 1.1.24-r3)\n(2/27) Installing binutils (2.33.1-r1)\n(3/27) Installing gmp (6.1.2-r1)\n(4/27) Installing isl (0.18-r0)\n(5/27) Installing libgomp (9.3.0-r0)\n(6/27) Installing libatomic (9.3.0-r0)\n(7/27) Installing mpfr4 (4.0.2-r1)\n(8/27) Installing mpc1 (1.1.0-r1)\n(9/27) Installing gcc (9.3.0-r0)\n(10/27) Installing musl-dev (1.1.24-r3)\n(11/27) Installing libc-dev (0.7.2-r0)\n(12/27) Installing g++ (9.3.0-r0)\n(13/27) Installing ca-certificates (20191127-r2)\n(14/27) Installing nghttp2-libs (1.40.0-r1)\n(15/27) Installing libcurl (7.79.1-r0)\n(16/27) Installing expat (2.2.9-r1)\n(17/27) Installing pcre2 (10.34-r1)\n(18/27) Installing git (2.24.4-r0)\n(19/27) Installing make (4.2.1-r2)\n(20/27) Installing libbz2 (1.0.8-r1)\n(21/27) Installing libffi (3.2.1-r6)\n(22/27) Installing gdbm (1.13-r1)\n(23/27) Installing ncurses-terminfo-base (6.1_p20200118-r4)\n(24/27) Installing ncurses-libs (6.1_p20200118-r4)\n(25/27) Installing readline (8.0.1-r0)\n(26/27) Installing sqlite-libs (3.30.1-r2)\n(27/27) Installing python2 (2.7.18-r0)\nExecuting busybox-1.31.1-r9.trigger\nExecuting ca-certificates-20191127-r2.trigger\nOK: 228 MiB in 42 packages\nRemoving intermediate container 56ce4725d184\n ---> c0dc30e916ca\nStep 10/18 : WORKDIR /home/node/app\n ---> Running in 24e2c346ff13\nRemoving intermediate container 24e2c346ff13\n ---> 9663e4be937b\nStep 11/18 : COPY --from=builder /home/node/app/package.json /home/node/app/package.json\n ---> 6ac8519bee22\nStep 12/18 : COPY --from=builder /home/node/app/yarn.lock /home/node/app/yarn.lock\n ---> bdd6a41a269e\nStep 13/18 : RUN yarn --production\n ---> Running in 4b1b02700064\nyarn install v1.22.5\n[1/4] Resolving packages...\n[2/4] Fetching packages...\ninfo fsevents@1.2.7: The platform \"linux\" is incompatible with this module.\ninfo \"fsevents@1.2.7\" is an optional dependency and failed compatibility check. Excluding it from installation.\n[3/4] Linking dependencies...\n[4/4] Building fresh packages...\nDone in 8.94s.\nRemoving intermediate container 4b1b02700064\n ---> e0c3093d5fe7\nStep 14/18 : COPY --from=builder /home/node/app/dist /home/node/app/dist\n ---> 97126a10b07f\nStep 15/18 : COPY --from=builder /home/node/app/api /home/node/app/api\n ---> 1004aab73eb8\nStep 16/18 : ENV PORT=8080\n ---> Running in e1b374b59174\nRemoving intermediate container e1b374b59174\n ---> 5158be979651\nStep 17/18 : EXPOSE 8080\n ---> Running in bc051eeb68bd\nRemoving intermediate container bc051eeb68bd\n ---> 3ffac617a3cb\nStep 18/18 : CMD yarn start\n ---> Running in 352df1329847\nRemoving intermediate container 352df1329847\n ---> dd9e19f73158\nSuccessfully built dd9e19f73158\nSuccessfully tagged type-fetcher:latest\n","stderr":"","imageSize":584350777},"endTime":1672205486649}