{"repository":"https://github.com/satoshiportal/batcher","dockerfilePath":"Dockerfile","startTime":1672155714784,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/satoshiportal/batcher'...\n","error":null,"commit":"3dca19fb2c6e98dd60e53d28cf7b5f40562f1d89"},"originalBuild":{"startTimestamp":1672155715691,"endTimestamp":1672155883471,"error":null,"stdout":"Sending build context to Docker daemon  533.5kB\r\r\nStep 1/14 : FROM node:14.11.0-alpine3.11 as build-base\n14.11.0-alpine3.11: Pulling from library/node\ncbdbe7a5bc2a: Pulling fs layer\nf2ddd8e54216: Pulling fs layer\n1a9fa31d8c27: Pulling fs layer\n5882f170bc7b: Pulling fs layer\n1a9fa31d8c27: Waiting\n5882f170bc7b: Waiting\ncbdbe7a5bc2a: Verifying Checksum\ncbdbe7a5bc2a: Download complete\ncbdbe7a5bc2a: Pull complete\n1a9fa31d8c27: Verifying Checksum\n1a9fa31d8c27: Download complete\n5882f170bc7b: Verifying Checksum\n5882f170bc7b: Download complete\nf2ddd8e54216: Verifying Checksum\nf2ddd8e54216: Download complete\nf2ddd8e54216: Pull complete\n1a9fa31d8c27: Pull complete\n5882f170bc7b: Pull complete\nDigest: sha256:f7c6c13cd2b18c58acc1eb4ca9135468c1ab42beba34102fc25b2d512a517fbb\nStatus: Downloaded newer image for node:14.11.0-alpine3.11\n ---> b85fc218c00b\nStep 2/14 : WORKDIR /batcher\n ---> Running in f742066a17ef\nRemoving intermediate container f742066a17ef\n ---> cefbbac260bf\nStep 3/14 : COPY package.json /batcher\n ---> 1da0e3a3f4f0\nStep 4/14 : RUN apk add --update --no-cache --virtual .gyp   python   make   g++\n ---> Running in 5d2c995f80bb\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.11/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.11/community/x86_64/APKINDEX.tar.gz\n(1/23) Upgrading musl (1.1.24-r2 -> 1.1.24-r3)\n(2/23) Installing libbz2 (1.0.8-r1)\n(3/23) Installing expat (2.2.9-r1)\n(4/23) Installing libffi (3.2.1-r6)\n(5/23) Installing gdbm (1.13-r1)\n(6/23) Installing ncurses-terminfo-base (6.1_p20200118-r4)\n(7/23) Installing ncurses-libs (6.1_p20200118-r4)\n(8/23) Installing readline (8.0.1-r0)\n(9/23) Installing sqlite-libs (3.30.1-r2)\n(10/23) Installing python2 (2.7.18-r0)\n(11/23) Installing make (4.2.1-r2)\n(12/23) Installing binutils (2.33.1-r1)\n(13/23) Installing gmp (6.1.2-r1)\n(14/23) Installing isl (0.18-r0)\n(15/23) Installing libgomp (9.3.0-r0)\n(16/23) Installing libatomic (9.3.0-r0)\n(17/23) Installing mpfr4 (4.0.2-r1)\n(18/23) Installing mpc1 (1.1.0-r1)\n(19/23) Installing gcc (9.3.0-r0)\n(20/23) Installing musl-dev (1.1.24-r3)\n(21/23) Installing libc-dev (0.7.2-r0)\n(22/23) Installing g++ (9.3.0-r0)\n(23/23) Installing .gyp (20221227.154209)\nExecuting busybox-1.31.1-r9.trigger\nOK: 212 MiB in 38 packages\nRemoving intermediate container 5d2c995f80bb\n ---> e7cc673158bb\nStep 5/14 : RUN npm install\n ---> Running in cf1731d4fb7d\n\n> better-sqlite3@7.6.2 install /batcher/node_modules/better-sqlite3\n> prebuild-install || npm run build-release\n\n\u001b[91mprebuild-install warn install Error relocating /batcher/node_modules/better-sqlite3/build/Release/better_sqlite3.node: _ZSt28__throw_bad_array_new_lengthv: symbol not found\n\u001b[0m\n> better-sqlite3@7.6.2 build-release /batcher/node_modules/better-sqlite3\n> node-gyp rebuild --release\n\nmake: Entering directory '/batcher/node_modules/better-sqlite3/build'\n  TOUCH ba23eeee118cd63e16015df367567cb043fed872.intermediate\n  ACTION deps_sqlite3_gyp_locate_sqlite3_target_copy_builtin_sqlite3 ba23eeee118cd63e16015df367567cb043fed872.intermediate\n  TOUCH Release/obj.target/deps/locate_sqlite3.stamp\n  CC(target) Release/obj.target/sqlite3/gen/sqlite3/sqlite3.o\n  AR(target) Release/obj.target/deps/sqlite3.a\n  COPY Release/sqlite3.a\n  CXX(target) Release/obj.target/better_sqlite3/src/better_sqlite3.o\n\u001b[91mIn file included from ./src/better_sqlite3.lzz:11,\n                 from ../src/better_sqlite3.cpp:4:\n/root/.cache/node-gyp/14.11.0/include/node/node.h:766:51: warning: cast between incompatible function types from 'void (*)(v8::Local<v8::Object>, v8::Local<v8::Value>, v8::Local<v8::Context>)' to 'node::addon_context_register_func' {aka 'void (*)(v8::Local<v8::Object>, v8::Local<v8::Value>, v8::Local<v8::Context>, void*)'} [-Wcast-function-type]\n  766 |       (node::addon_context_register_func) (regfunc),                  \\\n      |                                                   ^\n/root/.cache/node-gyp/14.11.0/include/node/node.h:784:3: note: in expansion of macro 'NODE_MODULE_CONTEXT_AWARE_X'\n  784 |   NODE_MODULE_CONTEXT_AWARE_X(modname, regfunc, NULL, 0)\n      |   ^~~~~~~~~~~~~~~~~~~~~~~~~~~\n/root/.cache/node-gyp/14.11.0/include/node/node.h:815:3: note: in expansion of macro 'NODE_MODULE_CONTEXT_AWARE'\n  815 |   NODE_MODULE_CONTEXT_AWARE(NODE_GYP_MODULE_NAME,                     \\\n      |   ^~~~~~~~~~~~~~~~~~~~~~~~~\n./src/better_sqlite3.lzz:67:1: note: in expansion of macro 'NODE_MODULE_INIT'\n\u001b[0m\u001b[91m./src/objects/database.lzz: In static member function 'static void Database::JS_new(const v8::FunctionCallbackInfo<v8::Value>&)':\n./src/objects/database.lzz:180:21: warning: variable 'status' set but not used [-Wunused-but-set-variable]\n\u001b[0m\u001b[91m./src/util/data.lzz: In function 'v8::Local<v8::Value> Data::GetValueJS(v8::Isolate*, sqlite3_stmt*, int, bool)':\n./src/util/data.lzz:73:92: warning: this statement may fall through [-Wimplicit-fallthrough=]\n./src/util/data.lzz:73:197: note: here\n\u001b[0m\u001b[91m./src/util/data.lzz: In function 'v8::Local<v8::Value> Data::GetValueJS(v8::Isolate*, sqlite3_value*, bool)':\n./src/util/data.lzz:77:81: warning: this statement may fall through [-Wimplicit-fallthrough=]\n./src/util/data.lzz:77:175: note: here\n\u001b[0m  SOLINK_MODULE(target) Release/obj.target/better_sqlite3.node\n  COPY Release/better_sqlite3.node\n  CC(target) Release/obj.target/test_extension/deps/test_extension.o\n  SOLINK_MODULE(target) Release/obj.target/test_extension.node\n  COPY Release/test_extension.node\nrm ba23eeee118cd63e16015df367567cb043fed872.intermediate\nmake: Leaving directory '/batcher/node_modules/better-sqlite3/build'\n\u001b[91mnpm notice created a lockfile as package-lock.json. You should commit this file.\n\u001b[0m\u001b[91mnpm WARN\u001b[0m\u001b[91m batcher@0.1.0 No description\n\u001b[0m\u001b[91m\n\u001b[0madded 328 packages from 369 contributors and audited 329 packages in 92.406s\n\n40 packages are looking for funding\n  run `npm fund` for details\n\nfound 0 vulnerabilities\n\nRemoving intermediate container cf1731d4fb7d\n ---> 210faedb09e2\nStep 6/14 : FROM node:14.11.0-alpine3.11\n ---> b85fc218c00b\nStep 7/14 : WORKDIR /batcher\n ---> Running in 8353eb7ed2bf\nRemoving intermediate container 8353eb7ed2bf\n ---> 6c33ee2de730\nStep 8/14 : COPY --from=build-base /batcher/node_modules/ /batcher/node_modules/\n ---> 3996d726a689\nStep 9/14 : COPY package.json /batcher\n ---> 1afb9cdf3957\nStep 10/14 : COPY tsconfig.json /batcher\n ---> 17a939589ede\nStep 11/14 : COPY src /batcher/src\n ---> 4c5e5817e8bf\nStep 12/14 : RUN npm run build\n ---> Running in 4cc5b0c903e0\n\n> batcher@0.1.0 build /batcher\n> rimraf ./build && tsc\n\nRemoving intermediate container 4cc5b0c903e0\n ---> 71251e91c6b4\nStep 13/14 : EXPOSE 9229 3000\n ---> Running in c5f46c1f1307\nRemoving intermediate container c5f46c1f1307\n ---> 0fe176df3e73\nStep 14/14 : ENTRYPOINT [ \"npm\", \"run\", \"start\" ]\n ---> Running in d43417e2a4b4\nRemoving intermediate container d43417e2a4b4\n ---> ae61051003da\nSuccessfully built ae61051003da\nSuccessfully tagged batcher:latest\n","stderr":"","imageSize":292708971},"repair":{"violations":[{"name":"npmCacheCleanAfterInstall","position":{"start":10,"end":10,"columnStart":4,"columnEnd":15}}],"repairedDockerfile":"FROM node:14.11.0-alpine3.11 as build-base\n\nWORKDIR /batcher\n\nCOPY package.json /batcher\n\nRUN apk add --update --no-cache --virtual .gyp \\\n  python \\\n  make \\\n  g++\nRUN npm install\n\n#--------------------------------------------------------------\n\nFROM node:14.11.0-alpine3.11\nWORKDIR /batcher\n\nCOPY --from=build-base /batcher/node_modules/ /batcher/node_modules/\nCOPY package.json /batcher\nCOPY tsconfig.json /batcher\nCOPY src /batcher/src\n\nRUN npm run build\n\nEXPOSE 9229 3000\n\nENTRYPOINT [ \"npm\", \"run\", \"start\" ]\n"},"repairedBuild":{"startTimestamp":1672155885910,"endTimestamp":1672156051093,"error":null,"stdout":"Sending build context to Docker daemon  533.5kB\r\r\nStep 1/14 : FROM node:14.11.0-alpine3.11 as build-base\n ---> b85fc218c00b\nStep 2/14 : WORKDIR /batcher\n ---> Running in 126d14e598a7\nRemoving intermediate container 126d14e598a7\n ---> 926f2e3dfa7e\nStep 3/14 : COPY package.json /batcher\n ---> 334c3032a97f\nStep 4/14 : RUN apk add --update --no-cache --virtual .gyp   python   make   g++\n ---> Running in e7416ada105d\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.11/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.11/community/x86_64/APKINDEX.tar.gz\n(1/23) Upgrading musl (1.1.24-r2 -> 1.1.24-r3)\n(2/23) Installing libbz2 (1.0.8-r1)\n(3/23) Installing expat (2.2.9-r1)\n(4/23) Installing libffi (3.2.1-r6)\n(5/23) Installing gdbm (1.13-r1)\n(6/23) Installing ncurses-terminfo-base (6.1_p20200118-r4)\n(7/23) Installing ncurses-libs (6.1_p20200118-r4)\n(8/23) Installing readline (8.0.1-r0)\n(9/23) Installing sqlite-libs (3.30.1-r2)\n(10/23) Installing python2 (2.7.18-r0)\n(11/23) Installing make (4.2.1-r2)\n(12/23) Installing binutils (2.33.1-r1)\n(13/23) Installing gmp (6.1.2-r1)\n(14/23) Installing isl (0.18-r0)\n(15/23) Installing libgomp (9.3.0-r0)\n(16/23) Installing libatomic (9.3.0-r0)\n(17/23) Installing mpfr4 (4.0.2-r1)\n(18/23) Installing mpc1 (1.1.0-r1)\n(19/23) Installing gcc (9.3.0-r0)\n(20/23) Installing musl-dev (1.1.24-r3)\n(21/23) Installing libc-dev (0.7.2-r0)\n(22/23) Installing g++ (9.3.0-r0)\n(23/23) Installing .gyp (20221227.154448)\nExecuting busybox-1.31.1-r9.trigger\nOK: 212 MiB in 38 packages\nRemoving intermediate container e7416ada105d\n ---> 60fb6205ee59\nStep 5/14 : RUN npm install\n ---> Running in 422ffbe03c99\n\n> better-sqlite3@7.6.2 install /batcher/node_modules/better-sqlite3\n> prebuild-install || npm run build-release\n\n\u001b[91mprebuild-install warn install Error relocating /batcher/node_modules/better-sqlite3/build/Release/better_sqlite3.node: _ZSt28__throw_bad_array_new_lengthv: symbol not found\n\u001b[0m\n> better-sqlite3@7.6.2 build-release /batcher/node_modules/better-sqlite3\n> node-gyp rebuild --release\n\nmake: Entering directory '/batcher/node_modules/better-sqlite3/build'\n  TOUCH ba23eeee118cd63e16015df367567cb043fed872.intermediate\n  ACTION deps_sqlite3_gyp_locate_sqlite3_target_copy_builtin_sqlite3 ba23eeee118cd63e16015df367567cb043fed872.intermediate\n  TOUCH Release/obj.target/deps/locate_sqlite3.stamp\n  CC(target) Release/obj.target/sqlite3/gen/sqlite3/sqlite3.o\n  AR(target) Release/obj.target/deps/sqlite3.a\n  COPY Release/sqlite3.a\n  CXX(target) Release/obj.target/better_sqlite3/src/better_sqlite3.o\n\u001b[91mIn file included from ./src/better_sqlite3.lzz:11,\n                 from ../src/better_sqlite3.cpp:4:\n/root/.cache/node-gyp/14.11.0/include/node/node.h:766:51: warning: cast between incompatible function types from 'void (*)(v8::Local<v8::Object>, v8::Local<v8::Value>, v8::Local<v8::Context>)' to 'node::addon_context_register_func' {aka 'void (*)(v8::Local<v8::Object>, v8::Local<v8::Value>, v8::Local<v8::Context>, void*)'} [-Wcast-function-type]\n  766 |       (node::addon_context_register_func) (regfunc),                  \\\n      |                                                   ^\n/root/.cache/node-gyp/14.11.0/include/node/node.h:784:3: note: in expansion of macro 'NODE_MODULE_CONTEXT_AWARE_X'\n  784 |   NODE_MODULE_CONTEXT_AWARE_X(modname, regfunc, NULL, 0)\n      |   ^~~~~~~~~~~~~~~~~~~~~~~~~~~\n/root/.cache/node-gyp/14.11.0/include/node/node.h:815:3: note: in expansion of macro 'NODE_MODULE_CONTEXT_AWARE'\n  815 |   NODE_MODULE_CONTEXT_AWARE(NODE_GYP_MODULE_NAME,                     \\\n      |   ^~~~~~~~~~~~~~~~~~~~~~~~~\n./src/better_sqlite3.lzz:67:1: note: in expansion of macro 'NODE_MODULE_INIT'\n\u001b[0m\u001b[91m./src/objects/database.lzz: In static member function 'static void Database::JS_new(const v8::FunctionCallbackInfo<v8::Value>&)':\n./src/objects/database.lzz:180:21: warning: variable 'status' set but not used [-Wunused-but-set-variable]\n\u001b[0m\u001b[91m./src/util/data.lzz: In function 'v8::Local<v8::Value> Data::GetValueJS(v8::Isolate*, sqlite3_stmt*, int, bool)':\n./src/util/data.lzz:73:92: warning: this statement may fall through [-Wimplicit-fallthrough=]\n./src/util/data.lzz:73:197: note: here\n./src/util/data.lzz: In function 'v8::Local<v8::Value> Data::GetValueJS(v8::Isolate*, sqlite3_value*, bool)':\n./src/util/data.lzz:77:81: warning: this statement may fall through [-Wimplicit-fallthrough=]\n./src/util/data.lzz:77:175: note: here\n\u001b[0m  SOLINK_MODULE(target) Release/obj.target/better_sqlite3.node\n  COPY Release/better_sqlite3.node\n  CC(target) Release/obj.target/test_extension/deps/test_extension.o\n  SOLINK_MODULE(target) Release/obj.target/test_extension.node\n  COPY Release/test_extension.node\nrm ba23eeee118cd63e16015df367567cb043fed872.intermediate\nmake: Leaving directory '/batcher/node_modules/better-sqlite3/build'\n\u001b[91mnpm\u001b[0m\u001b[91m notice created a lockfile as package-lock.json. You should commit this file.\n\u001b[0m\u001b[91mnpm\u001b[0m\u001b[91m WARN\u001b[0m\u001b[91m batcher@0.1.0 No description\n\u001b[0m\u001b[91m\n\u001b[0madded 328 packages from 369 contributors and audited 329 packages in 92.397s\n\n40 packages are looking for funding\n  run `npm fund` for details\n\nfound 0 vulnerabilities\n\nRemoving intermediate container 422ffbe03c99\n ---> 4147a876b068\nStep 6/14 : FROM node:14.11.0-alpine3.11\n ---> b85fc218c00b\nStep 7/14 : WORKDIR /batcher\n ---> Running in 38eeb9acca32\nRemoving intermediate container 38eeb9acca32\n ---> 8385db27c340\nStep 8/14 : COPY --from=build-base /batcher/node_modules/ /batcher/node_modules/\n ---> 2b1a15d8e14d\nStep 9/14 : COPY package.json /batcher\n ---> 9500bec694c2\nStep 10/14 : COPY tsconfig.json /batcher\n ---> cf7e4fedc19e\nStep 11/14 : COPY src /batcher/src\n ---> c2455d08a4a4\nStep 12/14 : RUN npm run build\n ---> Running in 73ac2b5752a8\n\n> batcher@0.1.0 build /batcher\n> rimraf ./build && tsc\n\nRemoving intermediate container 73ac2b5752a8\n ---> 0eee957b6438\nStep 13/14 : EXPOSE 9229 3000\n ---> Running in ce85df7cee1a\nRemoving intermediate container ce85df7cee1a\n ---> ba1d05c1a200\nStep 14/14 : ENTRYPOINT [ \"npm\", \"run\", \"start\" ]\n ---> Running in 53837fc91d1e\nRemoving intermediate container 53837fc91d1e\n ---> f2c0457403c4\nSuccessfully built f2c0457403c4\nSuccessfully tagged batcher:latest\n","stderr":"","imageSize":292708971},"endTime":1672156052369}