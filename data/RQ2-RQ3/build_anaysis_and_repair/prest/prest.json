{"repository":"https://github.com/prest/prest","dockerfilePath":"Dockerfile","startTime":1672151355220,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/prest/prest'...\n","error":null,"commit":"48390c78b9edd20e98f71dd32c2703ae8692ca7d"},"originalBuild":{"startTimestamp":1672151356202,"endTimestamp":1672151398321,"error":null,"stdout":"Sending build context to Docker daemon  1.337MB\r\r\nStep 1/16 : FROM registry.hub.docker.com/library/golang:1.18 as builder\n1.18: Pulling from library/golang\n32de3c850997: Already exists\nfa1d4c8d85a4: Already exists\nc796299bbbdd: Already exists\n81283a9569ad: Already exists\nc768848b86a2: Already exists\n160a777925fe: Pulling fs layer\n1be94824532a: Pulling fs layer\n1be94824532a: Verifying Checksum\n1be94824532a: Download complete\n160a777925fe: Verifying Checksum\n160a777925fe: Download complete\n160a777925fe: Pull complete\n1be94824532a: Pull complete\nDigest: sha256:00d63686b480f6dc866e93ddc4b29efa2db03274a687e6495c2cfbfe615d638e\nStatus: Downloaded newer image for registry.hub.docker.com/library/golang:1.18\n ---> fffd0d9a59da\nStep 2/16 : WORKDIR /workspace\n ---> Running in debdf4d931b9\nRemoving intermediate container debdf4d931b9\n ---> 0c629c364410\nStep 3/16 : COPY . .\n ---> 7094c14a0c75\nStep 4/16 : ENV GOOS linux\n ---> Running in 450aeab3c155\nRemoving intermediate container 450aeab3c155\n ---> fb4542d559df\nStep 5/16 : ENV CGO_ENABLED 1\n ---> Running in edb6df6e0ced\nRemoving intermediate container edb6df6e0ced\n ---> 4c76be25771e\nStep 6/16 : RUN go mod vendor &&     go build -ldflags \"-s -w\" -o prestd cmd/prestd/main.go &&     apt-get update && apt-get install --no-install-recommends -yq netcat\n ---> Running in 4cab558d8560\n\u001b[91mgo: downloading github.com/urfave/negroni v1.0.0\n\u001b[0m\u001b[91mgo: downloading gopkg.in/square/go-jose.v2 v2.6.0\n\u001b[0m\u001b[91mgo: downloading github.com/rs/cors v1.8.2\n\u001b[0m\u001b[91mgo: downloading github.com/clbanning/mxj v1.8.4\n\u001b[0m\u001b[91mgo: downloading github.com/jmoiron/sqlx v1.3.5\n\u001b[0m\u001b[91mgo: downloading github.com/lib/pq v1.10.6\ngo: downloading github.com/stretchr/testify v1.8.1\n\u001b[0m\u001b[91mgo: downloading github.com/gorilla/mux v1.8.0\ngo: downloading github.com/structy/log v0.0.0-20220126185905-65895d7017d5\n\u001b[0m\u001b[91mgo: downloading github.com/pkg/errors v0.9.1\n\u001b[0m\u001b[91mgo: downloading github.com/avelino/slugify v0.0.0-20180501145920-855f152bd774\n\u001b[0m\u001b[91mgo: downloading github.com/tidwall/buntdb v1.2.10\n\u001b[0m\u001b[91mgo: downloading github.com/mitchellh/go-homedir v1.1.0\n\u001b[0m\u001b[91mgo: downloading github.com/spf13/viper v1.13.0\n\u001b[0m\u001b[91mgo: downloading github.com/gosidekick/migration/v3 v3.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/spf13/cobra v1.6.0\n\u001b[0m\u001b[91mgo: downloading github.com/davecgh/go-spew v1.1.1\ngo: downloading gopkg.in/yaml.v3 v3.0.1\n\u001b[0m\u001b[91mgo: downloading github.com/pmezard/go-difflib v1.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/spf13/jwalterweatherman v1.1.0\n\u001b[0m\u001b[91mgo: downloading github.com/spf13/afero v1.8.2\n\u001b[0m\u001b[91mgo: downloading github.com/spf13/pflag v1.0.5\ngo: downloading github.com/mitchellh/mapstructure v1.5.0\n\u001b[0m\u001b[91mgo: downloading github.com/fsnotify/fsnotify v1.5.4\n\u001b[0m\u001b[91mgo: downloading github.com/spf13/cast v1.5.0\n\u001b[0m\u001b[91mgo: downloading github.com/magiconair/properties v1.8.6\ngo: downloading gopkg.in/ini.v1 v1.67.0\n\u001b[0m\u001b[91mgo: downloading github.com/pelletier/go-toml v1.9.5\n\u001b[0m\u001b[91mgo: downloading gopkg.in/yaml.v2 v2.4.0\ngo: downloading github.com/subosito/gotenv v1.4.1\n\u001b[0m\u001b[91mgo: downloading github.com/pelletier/go-toml/v2 v2.0.5\n\u001b[0m\u001b[91mgo: downloading github.com/inconshreveable/mousetrap v1.0.1\n\u001b[0m\u001b[91mgo: downloading github.com/hashicorp/hcl v1.0.0\n\u001b[0m\u001b[91mgo: downloading golang.org/x/crypto v0.0.0-20220411220226-7b82a4e95df4\n\u001b[0m\u001b[91mgo: downloading golang.org/x/sys v0.0.0-20220520151302-bc2c85ada10a\n\u001b[0m\u001b[91mgo: downloading golang.org/x/text v0.3.7\n\u001b[0m\u001b[91mgo: downloading golang.org/x/xerrors v0.0.0-20220517211312-f3a8303e98df\n\u001b[0m\u001b[91mgo: downloading github.com/tidwall/btree v1.4.2\ngo: downloading github.com/tidwall/rtred v0.1.2\n\u001b[0m\u001b[91mgo: downloading github.com/tidwall/grect v0.1.4\n\u001b[0m\u001b[91mgo: downloading github.com/tidwall/gjson v1.14.3\n\u001b[0m\u001b[91mgo: downloading github.com/tidwall/match v1.1.1\n\u001b[0m\u001b[91mgo: downloading github.com/tidwall/tinyqueue v0.1.1\n\u001b[0m\u001b[91mgo: downloading github.com/tidwall/pretty v1.2.0\n\u001b[0mGet:1 http://deb.debian.org/debian bullseye InRelease [116 kB]\nGet:2 http://deb.debian.org/debian-security bullseye-security InRelease [48.4 kB]\nGet:3 http://deb.debian.org/debian bullseye-updates InRelease [44.1 kB]\nGet:4 http://deb.debian.org/debian bullseye/main amd64 Packages [8183 kB]\nGet:5 http://deb.debian.org/debian-security bullseye-security/main amd64 Packages [210 kB]\nGet:6 http://deb.debian.org/debian bullseye-updates/main amd64 Packages [14.6 kB]\nFetched 8616 kB in 2s (3715 kB/s)\nReading package lists...\nReading package lists...\nBuilding dependency tree...\nReading state information...\nThe following additional packages will be installed:\n  netcat-openbsd\nThe following NEW packages will be installed:\n  netcat netcat-openbsd\n0 upgraded, 2 newly installed, 0 to remove and 1 not upgraded.\nNeed to get 50.8 kB of archives.\nAfter this operation, 130 kB of additional disk space will be used.\nGet:1 http://deb.debian.org/debian bullseye/main amd64 netcat-openbsd amd64 1.217-3 [41.1 kB]\nGet:2 http://deb.debian.org/debian bullseye/main amd64 netcat all 1.10-46 [9728 B]\n\u001b[91mdebconf: delaying package configuration, since apt-utils is not installed\n\u001b[0mFetched 50.8 kB in 0s (2247 kB/s)\nSelecting previously unselected package netcat-openbsd.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 15718 files and directories currently installed.)\r\nPreparing to unpack .../netcat-openbsd_1.217-3_amd64.deb ...\r\nUnpacking netcat-openbsd (1.217-3) ...\r\nSelecting previously unselected package netcat.\r\nPreparing to unpack .../netcat_1.10-46_all.deb ...\r\nUnpacking netcat (1.10-46) ...\r\nSetting up netcat-openbsd (1.217-3) ...\r\nupdate-alternatives: using /bin/nc.openbsd to provide /bin/nc (nc) in auto mode\r\nSetting up netcat (1.10-46) ...\r\nRemoving intermediate container 4cab558d8560\n ---> e01604485a93\nStep 7/16 : FROM registry.hub.docker.com/library/golang:1.18\n ---> fffd0d9a59da\nStep 8/16 : ENV CGO_ENABLED 1\n ---> Running in 24bfff8a2c09\nRemoving intermediate container 24bfff8a2c09\n ---> af3c1d7fcc34\nStep 9/16 : COPY --from=builder /bin/nc /bin/nc\n ---> cd9c46e8ced6\nStep 10/16 : COPY --from=builder /workspace/prestd /bin/prestd\n ---> 433d7680df9b\nStep 11/16 : COPY --from=builder /workspace/etc/prest.toml /app/prest.toml\n ---> 09fa1ebed205\nStep 12/16 : COPY --from=builder /workspace/etc/entrypoint.sh /app/entrypoint.sh\n ---> a949511799fa\nStep 13/16 : COPY --from=builder /workspace/lib /app/lib\n ---> 4f058cd86cea\nStep 14/16 : COPY --from=builder /workspace/etc/plugin /app/plugin\n ---> a6421036e158\nStep 15/16 : WORKDIR /app\n ---> Running in 4d6f8f8473ef\nRemoving intermediate container 4d6f8f8473ef\n ---> 6894b29b8239\nStep 16/16 : ENTRYPOINT [\"sh\", \"/app/entrypoint.sh\"]\n ---> Running in 8fe62a555178\nRemoving intermediate container 8fe62a555178\n ---> 0e361281f1e9\nSuccessfully built 0e361281f1e9\nSuccessfully tagged prest:latest\n","stderr":"","imageSize":979073942},"repair":{"violations":[{"name":"ruleAptGetInstallThenRemoveAptLists","position":{"start":7,"end":7,"columnStart":22,"columnEnd":72}}],"repairedDockerfile":"FROM registry.hub.docker.com/library/golang:1.18 as builder\nWORKDIR /workspace\nCOPY . .\nENV GOOS linux\nENV CGO_ENABLED 1\nRUN go mod vendor && \\\n    go build -ldflags \"-s -w\" -o prestd cmd/prestd/main.go && \\\n    apt-get update && apt-get install --no-install-recommends -yq netcat\n\n# Use golang image\n# needs go to compile the plugin system\nFROM registry.hub.docker.com/library/golang:1.18\nENV CGO_ENABLED 1\nCOPY --from=builder /bin/nc /bin/nc\nCOPY --from=builder /workspace/prestd /bin/prestd\nCOPY --from=builder /workspace/etc/prest.toml /app/prest.toml\nCOPY --from=builder /workspace/etc/entrypoint.sh /app/entrypoint.sh\nCOPY --from=builder /workspace/lib /app/lib\nCOPY --from=builder /workspace/etc/plugin /app/plugin\nWORKDIR /app\nENTRYPOINT [\"sh\", \"/app/entrypoint.sh\"]\n"},"repairedBuild":{"startTimestamp":1672151398653,"endTimestamp":1672151436016,"error":null,"stdout":"Sending build context to Docker daemon  1.337MB\r\r\nStep 1/16 : FROM registry.hub.docker.com/library/golang:1.18 as builder\n ---> fffd0d9a59da\nStep 2/16 : WORKDIR /workspace\n ---> Running in f78919c6a420\nRemoving intermediate container f78919c6a420\n ---> c3cc95144cd2\nStep 3/16 : COPY . .\n ---> a23a67b3446f\nStep 4/16 : ENV GOOS linux\n ---> Running in 2eb20d35ff1e\nRemoving intermediate container 2eb20d35ff1e\n ---> 6d9edd300aa5\nStep 5/16 : ENV CGO_ENABLED 1\n ---> Running in 0e6cc9ffc377\nRemoving intermediate container 0e6cc9ffc377\n ---> 0f0d394067cc\nStep 6/16 : RUN go mod vendor &&     go build -ldflags \"-s -w\" -o prestd cmd/prestd/main.go &&     apt-get update && apt-get install --no-install-recommends -yq netcat\n ---> Running in a349ecf76347\n\u001b[91mgo: downloading github.com/tidwall/buntdb v1.2.10\n\u001b[0m\u001b[91mgo: downloading github.com/urfave/negroni v1.0.0\ngo: downloading github.com/gosidekick/migration/v3 v3.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/avelino/slugify v0.0.0-20180501145920-855f152bd774\n\u001b[0m\u001b[91mgo: downloading github.com/gorilla/mux v1.8.0\n\u001b[0m\u001b[91mgo: downloading github.com/spf13/cobra v1.6.0\n\u001b[0m\u001b[91mgo: downloading github.com/lib/pq v1.10.6\n\u001b[0m\u001b[91mgo: downloading github.com/jmoiron/sqlx v1.3.5\n\u001b[0m\u001b[91mgo: downloading github.com/stretchr/testify v1.8.1\n\u001b[0m\u001b[91mgo: downloading github.com/rs/cors v1.8.2\n\u001b[0m\u001b[91mgo: downloading github.com/clbanning/mxj v1.8.4\n\u001b[0m\u001b[91mgo: downloading gopkg.in/square/go-jose.v2 v2.6.0\n\u001b[0m\u001b[91mgo: downloading github.com/mitchellh/go-homedir v1.1.0\n\u001b[0m\u001b[91mgo: downloading github.com/spf13/viper v1.13.0\n\u001b[0m\u001b[91mgo: downloading github.com/structy/log v0.0.0-20220126185905-65895d7017d5\n\u001b[0m\u001b[91mgo: downloading github.com/pkg/errors v0.9.1\n\u001b[0m\u001b[91mgo: downloading golang.org/x/text v0.3.7\n\u001b[0m\u001b[91mgo: downloading golang.org/x/xerrors v0.0.0-20220517211312-f3a8303e98df\n\u001b[0m\u001b[91mgo: downloading github.com/tidwall/gjson v1.14.3\ngo: downloading github.com/tidwall/btree v1.4.2\n\u001b[0m\u001b[91mgo: downloading github.com/tidwall/match v1.1.1\n\u001b[0m\u001b[91mgo: downloading github.com/tidwall/rtred v0.1.2\n\u001b[0m\u001b[91mgo: downloading github.com/tidwall/grect v0.1.4\n\u001b[0m\u001b[91mgo: downloading github.com/spf13/pflag v1.0.5\ngo: downloading github.com/inconshreveable/mousetrap v1.0.1\n\u001b[0m\u001b[91mgo: downloading gopkg.in/yaml.v3 v3.0.1\n\u001b[0m\u001b[91mgo: downloading github.com/davecgh/go-spew v1.1.1\ngo: downloading github.com/pmezard/go-difflib v1.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/mitchellh/mapstructure v1.5.0\ngo: downloading github.com/spf13/cast v1.5.0\n\u001b[0m\u001b[91mgo: downloading github.com/spf13/jwalterweatherman v1.1.0\n\u001b[0m\u001b[91mgo: downloading github.com/fsnotify/fsnotify v1.5.4\n\u001b[0m\u001b[91mgo: downloading github.com/spf13/afero v1.8.2\n\u001b[0m\u001b[91mgo: downloading gopkg.in/yaml.v2 v2.4.0\ngo: downloading github.com/subosito/gotenv v1.4.1\n\u001b[0m\u001b[91mgo: downloading github.com/hashicorp/hcl v1.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/magiconair/properties v1.8.6\n\u001b[0m\u001b[91mgo: downloading gopkg.in/ini.v1 v1.67.0\n\u001b[0m\u001b[91mgo: downloading github.com/pelletier/go-toml v1.9.5\n\u001b[0m\u001b[91mgo: downloading github.com/pelletier/go-toml/v2 v2.0.5\n\u001b[0m\u001b[91mgo: downloading github.com/tidwall/tinyqueue v0.1.1\n\u001b[0m\u001b[91mgo: downloading github.com/tidwall/pretty v1.2.0\n\u001b[0m\u001b[91mgo: downloading golang.org/x/crypto v0.0.0-20220411220226-7b82a4e95df4\n\u001b[0m\u001b[91mgo: downloading golang.org/x/sys v0.0.0-20220520151302-bc2c85ada10a\n\u001b[0mGet:1 http://deb.debian.org/debian bullseye InRelease [116 kB]\nGet:2 http://deb.debian.org/debian-security bullseye-security InRelease [48.4 kB]\nGet:3 http://deb.debian.org/debian bullseye-updates InRelease [44.1 kB]\nGet:4 http://deb.debian.org/debian bullseye/main amd64 Packages [8183 kB]\nGet:5 http://deb.debian.org/debian-security bullseye-security/main amd64 Packages [210 kB]\nGet:6 http://deb.debian.org/debian bullseye-updates/main amd64 Packages [14.6 kB]\nFetched 8616 kB in 2s (4893 kB/s)\nReading package lists...\nReading package lists...\nBuilding dependency tree...\nReading state information...\nThe following additional packages will be installed:\n  netcat-openbsd\nThe following NEW packages will be installed:\n  netcat netcat-openbsd\n0 upgraded, 2 newly installed, 0 to remove and 1 not upgraded.\nNeed to get 50.8 kB of archives.\nAfter this operation, 130 kB of additional disk space will be used.\nGet:1 http://deb.debian.org/debian bullseye/main amd64 netcat-openbsd amd64 1.217-3 [41.1 kB]\nGet:2 http://deb.debian.org/debian bullseye/main amd64 netcat all 1.10-46 [9728 B]\n\u001b[91mdebconf: delaying package configuration, since apt-utils is not installed\n\u001b[0mFetched 50.8 kB in 0s (519 kB/s)\nSelecting previously unselected package netcat-openbsd.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 15718 files and directories currently installed.)\r\nPreparing to unpack .../netcat-openbsd_1.217-3_amd64.deb ...\r\nUnpacking netcat-openbsd (1.217-3) ...\r\nSelecting previously unselected package netcat.\r\nPreparing to unpack .../netcat_1.10-46_all.deb ...\r\nUnpacking netcat (1.10-46) ...\r\nSetting up netcat-openbsd (1.217-3) ...\r\nupdate-alternatives: using /bin/nc.openbsd to provide /bin/nc (nc) in auto mode\r\nSetting up netcat (1.10-46) ...\r\nRemoving intermediate container a349ecf76347\n ---> eaffec7e16d2\nStep 7/16 : FROM registry.hub.docker.com/library/golang:1.18\n ---> fffd0d9a59da\nStep 8/16 : ENV CGO_ENABLED 1\n ---> Running in 5e4ba4e894e2\nRemoving intermediate container 5e4ba4e894e2\n ---> f6b4d324224e\nStep 9/16 : COPY --from=builder /bin/nc /bin/nc\n ---> 5c4cc8fc4c0d\nStep 10/16 : COPY --from=builder /workspace/prestd /bin/prestd\n ---> 3b1a42df4c11\nStep 11/16 : COPY --from=builder /workspace/etc/prest.toml /app/prest.toml\n ---> c146f44762ca\nStep 12/16 : COPY --from=builder /workspace/etc/entrypoint.sh /app/entrypoint.sh\n ---> 97b171ff2c89\nStep 13/16 : COPY --from=builder /workspace/lib /app/lib\n ---> 11942155af80\nStep 14/16 : COPY --from=builder /workspace/etc/plugin /app/plugin\n ---> 7d372856a2f4\nStep 15/16 : WORKDIR /app\n ---> Running in 9802110e7722\nRemoving intermediate container 9802110e7722\n ---> a0a54f8b2ba4\nStep 16/16 : ENTRYPOINT [\"sh\", \"/app/entrypoint.sh\"]\n ---> Running in 2fb60466eb17\nRemoving intermediate container 2fb60466eb17\n ---> 5232354cc820\nSuccessfully built 5232354cc820\nSuccessfully tagged prest:latest\n","stderr":"","imageSize":979073942},"endTime":1672151436256}