{"repository":"https://github.com/statsd/statsd","dockerfilePath":"Dockerfile","startTime":1672732651694,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/statsd/statsd'...\n","error":null,"commit":"0de340f864b498c8e522dd2ac6604cded4048176"},"originalBuild":{"startTimestamp":1672732652626,"endTimestamp":1672732730390,"error":null,"stdout":"Sending build context to Docker daemon  302.6kB\r\r\nStep 1/12 : FROM node:12.18.3\n12.18.3: Pulling from library/node\n4f250268ed6a: Pulling fs layer\n1b49aa113642: Pulling fs layer\nc159512f4cc2: Pulling fs layer\n8439168fd8dc: Pulling fs layer\n55abbc6cc158: Pulling fs layer\ne5c5821cd889: Pulling fs layer\nd2ea03d5fa99: Pulling fs layer\n1f9173e85dd7: Pulling fs layer\n4d9009fcd264: Pulling fs layer\nd2ea03d5fa99: Waiting\n1f9173e85dd7: Waiting\ne5c5821cd889: Waiting\n4d9009fcd264: Waiting\n8439168fd8dc: Waiting\nc159512f4cc2: Verifying Checksum\nc159512f4cc2: Download complete\n1b49aa113642: Verifying Checksum\n1b49aa113642: Download complete\n4f250268ed6a: Verifying Checksum\n4f250268ed6a: Download complete\ne5c5821cd889: Verifying Checksum\ne5c5821cd889: Download complete\n8439168fd8dc: Verifying Checksum\n8439168fd8dc: Download complete\nd2ea03d5fa99: Verifying Checksum\nd2ea03d5fa99: Download complete\n55abbc6cc158: Verifying Checksum\n55abbc6cc158: Download complete\n4d9009fcd264: Verifying Checksum\n4d9009fcd264: Download complete\n1f9173e85dd7: Verifying Checksum\n1f9173e85dd7: Download complete\n4f250268ed6a: Pull complete\n1b49aa113642: Pull complete\nc159512f4cc2: Pull complete\n8439168fd8dc: Pull complete\n55abbc6cc158: Pull complete\ne5c5821cd889: Pull complete\nd2ea03d5fa99: Pull complete\n1f9173e85dd7: Pull complete\n4d9009fcd264: Pull complete\nDigest: sha256:20ffb04c1d35e273dc7aa68fe31ef136630d95128689283a8eb914329158022b\nStatus: Downloaded newer image for node:12.18.3\n ---> bc72e39bf44c\nStep 2/12 : RUN mkdir -p /usr/src/app\n ---> Running in 9d174671c741\nRemoving intermediate container 9d174671c741\n ---> 831c22762381\nStep 3/12 : WORKDIR /usr/src/app\n ---> Running in c172fc056e93\nRemoving intermediate container c172fc056e93\n ---> 66c3521a4cdf\nStep 4/12 : ARG NODE_ENV\n ---> Running in a5858a3d3e65\nRemoving intermediate container a5858a3d3e65\n ---> 9a8c55eb81b6\nStep 5/12 : ENV NODE_ENV $NODE_ENV\n ---> Running in 51f042562f29\nRemoving intermediate container 51f042562f29\n ---> 46b0d2cd9e25\nStep 6/12 : COPY package.json /usr/src/app/\n ---> 8b6f4a4d8eb1\nStep 7/12 : RUN npm install && npm cache clean --force\n ---> Running in 4e9164201b3f\n\u001b[91mnpm WARN deprecated nodeunit@0.11.3: you are strongly encouraged to use other testing options\n\u001b[0m\u001b[91mnpm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142\n\u001b[0m\u001b[91mnpm WARN deprecated uuid@3.4.0: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.\n\u001b[0m\u001b[91mnpm WARN deprecated har-validator@5.1.5: this library is no longer supported\n\u001b[0m\n> modern-syslog@1.2.0 install /usr/src/app/node_modules/modern-syslog\n> node-gyp rebuild\n\nmake: Entering directory '/usr/src/app/node_modules/modern-syslog/build'\n  CXX(target) Release/obj.target/core/core.o\n  SOLINK_MODULE(target) Release/obj.target/core.node\n  COPY Release/core.node\nmake: Leaving directory '/usr/src/app/node_modules/modern-syslog/build'\n\n> ejs@2.7.4 postinstall /usr/src/app/node_modules/ejs\n> node ./postinstall.js\n\nThank you for installing \u001b[35mEJS\u001b[0m: built with the \u001b[32mJake\u001b[0m JavaScript build tool (\u001b[32mhttps://jakejs.com/\u001b[0m)\n\n\u001b[91mnpm notice created a lockfile as package-lock.json. You should commit this file.\n\u001b[0madded 253 packages from 220 contributors and audited 253 packages in 12.237s\n\n9 packages are looking for funding\n  run `npm fund` for details\n\nfound 3 vulnerabilities (1 high, 2 critical)\n  run `npm audit fix` to fix them, or `npm audit` for details\n\u001b[91mnpm WARN using --force I sure hope you know what you are doing.\n\u001b[0mRemoving intermediate container 4e9164201b3f\n ---> be9808cbf5cb\nStep 8/12 : COPY . /usr/src/app\n ---> 7503c6ee2c02\nStep 9/12 : RUN   ls -la &&   cp -v exampleConfig.js config.js &&   sed -i 's/graphite.example.com/graphite/' config.js\n ---> Running in 5fe8202fa1da\ntotal 188\ndrwxr-xr-x   1 root root  4096 Jan  3 07:58 .\ndrwxr-xr-x   1 root root  4096 Jan  3 07:58 ..\n-rw-rw-r--   1 root root   184 Jan  3 07:57 .dockerignore\n-rw-rw-r--   1 root root   653 Jan  3 07:57 Dockerfile\n-rw-rw-r--   1 root root  1072 Jan  3 07:57 LICENSE\ndrwxrwxr-x   2 root root  4096 Jan  3 07:57 backends\ndrwxrwxr-x   2 root root  4096 Jan  3 07:57 bin\n-rw-rw-r--   1 root root   386 Jan  3 07:57 docker-compose.yml\n-rw-rw-r--   1 root root  8001 Jan  3 07:57 exampleConfig.js\ndrwxrwxr-x   2 root root  4096 Jan  3 07:57 lib\ndrwxr-xr-x 225 root root 12288 Jan  3 07:58 node_modules\n-rw-rw-r--   1 root root 85414 Jan  3 07:57 package-lock.json\n-rw-rw-r--   1 root root  1104 Jan  3 07:57 package.json\n-rw-rw-r--   1 root root  8663 Jan  3 07:57 proxy.js\n-rwxrwxr-x   1 root root   352 Jan  3 07:57 run_tests.js\ndrwxrwxr-x   2 root root  4096 Jan  3 07:57 servers\n-rw-rw-r--   1 root root 15626 Jan  3 07:57 stats.js\ndrwxrwxr-x   2 root root  4096 Jan  3 07:57 test\ndrwxrwxr-x   2 root root  4096 Jan  3 07:57 utils\n'exampleConfig.js' -> 'config.js'\nRemoving intermediate container 5fe8202fa1da\n ---> f42c65d1e150\nStep 10/12 : EXPOSE 8125/udp\n ---> Running in dbda6f320ca9\nRemoving intermediate container dbda6f320ca9\n ---> fca5be296931\nStep 11/12 : EXPOSE 8126\n ---> Running in 74fe3ac1bd9f\nRemoving intermediate container 74fe3ac1bd9f\n ---> be4f52fda4a8\nStep 12/12 : ENTRYPOINT [ \"node\", \"stats.js\", \"config.js\" ]\n ---> Running in 805244c55750\nRemoving intermediate container 805244c55750\n ---> 1e173bbaf958\nSuccessfully built 1e173bbaf958\nSuccessfully tagged statsd:latest\n","stderr":"","imageSize":1000001088},"repair":{"violations":[{"name":"mkdirUsrSrcThenRemove","position":{"start":2,"end":2,"columnStart":4,"columnEnd":25}}],"repairedDockerfile":"FROM node:12.18.3\n\nRUN mkdir -p /usr/src/app\nWORKDIR /usr/src/app\n\n# Install python\n# RUN apk add --no-cache --update g++ gcc libgcc libstdc++ linux-headers make python\n\n# Setup node envs\nARG NODE_ENV\nENV NODE_ENV $NODE_ENV\n\n# Install dependencies\nCOPY package.json /usr/src/app/\nRUN npm install && npm cache clean --force\n\n# Copy required src (see .dockerignore)\nCOPY . /usr/src/app\n\n# Set graphite hostname to \"graphite\"\nRUN \\\n  ls -la && \\\n  cp -v exampleConfig.js config.js && \\\n  sed -i 's/graphite.example.com/graphite/' config.js\n\n# Expose required ports\nEXPOSE 8125/udp\nEXPOSE 8126\n\n# Start statsd\nENTRYPOINT [ \"node\", \"stats.js\", \"config.js\" ]\n"},"repairedBuild":{"startTimestamp":1672732731033,"endTimestamp":1672732764100,"error":null,"stdout":"Sending build context to Docker daemon  302.6kB\r\r\nStep 1/12 : FROM node:12.18.3\n ---> bc72e39bf44c\nStep 2/12 : RUN mkdir -p /usr/src/app\n ---> Running in 6d2f0aa93d09\nRemoving intermediate container 6d2f0aa93d09\n ---> e86df73efe68\nStep 3/12 : WORKDIR /usr/src/app\n ---> Running in 59ce7666df44\nRemoving intermediate container 59ce7666df44\n ---> d0f3f5f0444f\nStep 4/12 : ARG NODE_ENV\n ---> Running in 4ff24fb942fa\nRemoving intermediate container 4ff24fb942fa\n ---> d6bcf6dfc165\nStep 5/12 : ENV NODE_ENV $NODE_ENV\n ---> Running in eb500614079a\nRemoving intermediate container eb500614079a\n ---> 41be6e2d3924\nStep 6/12 : COPY package.json /usr/src/app/\n ---> 6b085915ca44\nStep 7/12 : RUN npm install && npm cache clean --force\n ---> Running in c606d8a85647\n\u001b[91mnpm WARN deprecated nodeunit@0.11.3: you are strongly encouraged to use other testing options\n\u001b[0m\u001b[91mnpm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142\n\u001b[0m\u001b[91mnpm WARN deprecated uuid@3.4.0: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.\n\u001b[0m\u001b[91mnpm WARN deprecated har-validator@5.1.5: this library is no longer supported\n\u001b[0m\n> modern-syslog@1.2.0 install /usr/src/app/node_modules/modern-syslog\n> node-gyp rebuild\n\nmake: Entering directory '/usr/src/app/node_modules/modern-syslog/build'\n  CXX(target) Release/obj.target/core/core.o\n  SOLINK_MODULE(target) Release/obj.target/core.node\n  COPY Release/core.node\nmake: Leaving directory '/usr/src/app/node_modules/modern-syslog/build'\n\n> ejs@2.7.4 postinstall /usr/src/app/node_modules/ejs\n> node ./postinstall.js\n\nThank you for installing \u001b[35mEJS\u001b[0m: built with the \u001b[32mJake\u001b[0m JavaScript build tool (\u001b[32mhttps://jakejs.com/\u001b[0m)\n\n\u001b[91mnpm notice created a lockfile as package-lock.json. You should commit this file.\n\u001b[0madded 253 packages from 220 contributors and audited 253 packages in 8.035s\n\n9 packages are looking for funding\n  run `npm fund` for details\n\nfound 3 vulnerabilities (1 high, 2 critical)\n  run `npm audit fix` to fix them, or `npm audit` for details\n\u001b[91mnpm WARN using --force I sure hope you know what you are doing.\n\u001b[0mRemoving intermediate container c606d8a85647\n ---> 8334d64358fa\nStep 8/12 : COPY . /usr/src/app\n ---> 0c50087fe09a\nStep 9/12 : RUN   ls -la &&   cp -v exampleConfig.js config.js &&   sed -i 's/graphite.example.com/graphite/' config.js\n ---> Running in d87376d35d60\ntotal 188\ndrwxr-xr-x   1 root root  4096 Jan  3 07:59 .\ndrwxr-xr-x   1 root root  4096 Jan  3 07:58 ..\n-rw-rw-r--   1 root root   184 Jan  3 07:57 .dockerignore\n-rw-rw-r--   1 root root   653 Jan  3 07:58 Dockerfile\n-rw-rw-r--   1 root root  1072 Jan  3 07:57 LICENSE\ndrwxrwxr-x   2 root root  4096 Jan  3 07:57 backends\ndrwxrwxr-x   2 root root  4096 Jan  3 07:57 bin\n-rw-rw-r--   1 root root   386 Jan  3 07:57 docker-compose.yml\n-rw-rw-r--   1 root root  8001 Jan  3 07:57 exampleConfig.js\ndrwxrwxr-x   2 root root  4096 Jan  3 07:57 lib\ndrwxr-xr-x 225 root root 12288 Jan  3 07:59 node_modules\n-rw-rw-r--   1 root root 85414 Jan  3 07:57 package-lock.json\n-rw-rw-r--   1 root root  1104 Jan  3 07:57 package.json\n-rw-rw-r--   1 root root  8663 Jan  3 07:57 proxy.js\n-rwxrwxr-x   1 root root   352 Jan  3 07:57 run_tests.js\ndrwxrwxr-x   2 root root  4096 Jan  3 07:57 servers\n-rw-rw-r--   1 root root 15626 Jan  3 07:57 stats.js\ndrwxrwxr-x   2 root root  4096 Jan  3 07:57 test\ndrwxrwxr-x   2 root root  4096 Jan  3 07:57 utils\n'exampleConfig.js' -> 'config.js'\nRemoving intermediate container d87376d35d60\n ---> 9c7826bb0553\nStep 10/12 : EXPOSE 8125/udp\n ---> Running in 9c366b6149c1\nRemoving intermediate container 9c366b6149c1\n ---> ef94d642d161\nStep 11/12 : EXPOSE 8126\n ---> Running in 350b1fcfc494\nRemoving intermediate container 350b1fcfc494\n ---> 37f6a82ed4a3\nStep 12/12 : ENTRYPOINT [ \"node\", \"stats.js\", \"config.js\" ]\n ---> Running in 3296cd116607\nRemoving intermediate container 3296cd116607\n ---> 53f7344a2f0b\nSuccessfully built 53f7344a2f0b\nSuccessfully tagged statsd:latest\n","stderr":"","imageSize":1000001088},"endTime":1672732764530}