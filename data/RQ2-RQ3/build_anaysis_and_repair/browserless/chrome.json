{"repository":"https://github.com/browserless/chrome","dockerfilePath":"Dockerfile","startTime":1672057868108,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/browserless/chrome'...\n","error":null,"commit":"aa771567cd221f3bce4a5b12543cd7100000fff0"},"originalBuild":{"startTimestamp":1672057870567,"endTimestamp":1672057974939,"error":null,"stdout":"Sending build context to Docker daemon  27.13MB\r\r\nStep 1/28 : ARG BASE_VERSION=1.19.0\nStep 2/28 : FROM browserless/base:${BASE_VERSION}\n1.19.0: Pulling from browserless/base\ncf92e523b49e: Pulling fs layer\n3c53cedbe08c: Pulling fs layer\nc10d3a1de6b0: Pulling fs layer\n775f99d05856: Pulling fs layer\n44c1e142ab52: Pulling fs layer\n794715bd4fb8: Pulling fs layer\nb7b045ef8bcb: Pulling fs layer\n4d958a3c23d8: Pulling fs layer\n1036736f6a12: Pulling fs layer\n775f99d05856: Waiting\n4d958a3c23d8: Waiting\nb7b045ef8bcb: Waiting\n1036736f6a12: Waiting\n44c1e142ab52: Waiting\n3c53cedbe08c: Verifying Checksum\n3c53cedbe08c: Download complete\ncf92e523b49e: Verifying Checksum\ncf92e523b49e: Download complete\nc10d3a1de6b0: Verifying Checksum\nc10d3a1de6b0: Download complete\n44c1e142ab52: Verifying Checksum\n44c1e142ab52: Download complete\ncf92e523b49e: Pull complete\nb7b045ef8bcb: Verifying Checksum\nb7b045ef8bcb: Download complete\n775f99d05856: Verifying Checksum\n775f99d05856: Download complete\n3c53cedbe08c: Pull complete\n4d958a3c23d8: Verifying Checksum\n4d958a3c23d8: Download complete\n1036736f6a12: Download complete\nc10d3a1de6b0: Pull complete\n794715bd4fb8: Verifying Checksum\n794715bd4fb8: Download complete\n775f99d05856: Pull complete\n44c1e142ab52: Pull complete\n794715bd4fb8: Pull complete\nb7b045ef8bcb: Pull complete\n4d958a3c23d8: Pull complete\n1036736f6a12: Pull complete\nDigest: sha256:8af0219443d407cbb84037a57b2af222b81fe2765207b387ed846e1e60583811\nStatus: Downloaded newer image for browserless/base:1.19.0\n ---> b294aa687483\nStep 3/28 : ARG USE_CHROME_STABLE\n ---> Running in 5f2cadd1bba5\nRemoving intermediate container 5f2cadd1bba5\n ---> 23b78d34de61\nStep 4/28 : ARG PUPPETEER_CHROMIUM_REVISION\n ---> Running in 9b4beec07b50\nRemoving intermediate container 9b4beec07b50\n ---> b710ed6f7b63\nStep 5/28 : ARG PUPPETEER_VERSION\n ---> Running in 0278b2a20703\nRemoving intermediate container 0278b2a20703\n ---> a9e93f700633\nStep 6/28 : ARG PORT=3000\n ---> Running in 1099b3066752\nRemoving intermediate container 1099b3066752\n ---> d293f4a777ec\nStep 7/28 : ENV APP_DIR=/usr/src/app\n ---> Running in 98bd2244b51f\nRemoving intermediate container 98bd2244b51f\n ---> ff68637caf43\nStep 8/28 : ENV PUPPETEER_CACHE_DIR=${APP_DIR}\n ---> Running in 910629f7860e\nRemoving intermediate container 910629f7860e\n ---> dcd9c5170815\nStep 9/28 : ENV PLAYWRIGHT_BROWSERS_PATH=${APP_DIR}\n ---> Running in e9ebb999f4fe\nRemoving intermediate container e9ebb999f4fe\n ---> 82c2092c6521\nStep 10/28 : ENV CONNECTION_TIMEOUT=60000\n ---> Running in 92b38ca0b739\nRemoving intermediate container 92b38ca0b739\n ---> f7a8044be53e\nStep 11/28 : ENV CHROME_PATH=/usr/bin/google-chrome\n ---> Running in dcfe3b7ff51e\nRemoving intermediate container dcfe3b7ff51e\n ---> 38a2e8737bed\nStep 12/28 : ENV HOST=0.0.0.0\n ---> Running in fd6d1916b873\nRemoving intermediate container fd6d1916b873\n ---> ec010761157b\nStep 13/28 : ENV IS_DOCKER=true\n ---> Running in e60b3578c469\nRemoving intermediate container e60b3578c469\n ---> c909af77befa\nStep 14/28 : ENV LANG=\"C.UTF-8\"\n ---> Running in d812b8875906\nRemoving intermediate container d812b8875906\n ---> fb8ff0e4a7d1\nStep 15/28 : ENV NODE_ENV=production\n ---> Running in c4c8c5dc9243\nRemoving intermediate container c4c8c5dc9243\n ---> a0a44f65d032\nStep 16/28 : ENV PORT=${PORT}\n ---> Running in 5b99de6965ce\nRemoving intermediate container 5b99de6965ce\n ---> 73159605bd12\nStep 17/28 : ENV PUPPETEER_CHROMIUM_REVISION=${PUPPETEER_CHROMIUM_REVISION}\n ---> Running in b03bb6b0eaf4\nRemoving intermediate container b03bb6b0eaf4\n ---> 94b2458d1620\nStep 18/28 : ENV PUPPETEER_SKIP_CHROMIUM_DOWNLOAD=true\n ---> Running in d963d7653eb5\nRemoving intermediate container d963d7653eb5\n ---> 90c75df0c7ed\nStep 19/28 : ENV USE_CHROME_STABLE=${USE_CHROME_STABLE}\n ---> Running in de0aafe4b17f\nRemoving intermediate container de0aafe4b17f\n ---> 08ef57a8e20e\nStep 20/28 : ENV WORKSPACE_DIR=$APP_DIR/workspace\n ---> Running in c8cdb6f69f1d\nRemoving intermediate container c8cdb6f69f1d\n ---> 961753b7d0ea\nStep 21/28 : RUN mkdir -p $APP_DIR $WORKSPACE_DIR\n ---> Running in 980e663a3d99\nRemoving intermediate container 980e663a3d99\n ---> 892fe868f330\nStep 22/28 : WORKDIR $APP_DIR\n ---> Running in 461256dfe5c1\nRemoving intermediate container 461256dfe5c1\n ---> bf86382114ef\nStep 23/28 : COPY . .\n ---> 595b16d93362\nStep 24/28 : RUN if [ \"$USE_CHROME_STABLE\" = \"true\" ]; then     cd /tmp &&    wget -q https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb &&    dpkg -i google-chrome-stable_current_amd64.deb;  fi\n ---> Running in 51d4d58d4165\nRemoving intermediate container 51d4d58d4165\n ---> a697d2f23c3d\nStep 25/28 : RUN if [ \"$USE_CHROME_STABLE\" = \"true\" ]; then     export CHROMEDRIVER_SKIP_DOWNLOAD=false;  else     export CHROMEDRIVER_SKIP_DOWNLOAD=true;  fi &&  npm i puppeteer@$PUPPETEER_VERSION;  npm run postinstall &&  npm run build &&  npm prune --production &&  chown -R blessuser:blessuser $APP_DIR\n ---> Running in 77bbca9c7b7e\n\nadded 634 packages, and audited 635 packages in 12s\n\n53 packages are looking for funding\n  run `npm fund` for details\n\nfound 0 vulnerabilities\n\u001b[91mnpm notice \nnpm notice\u001b[0m\u001b[91m New major version of npm available! 8.19.2 -> 9.2.0\nnpm notice\u001b[0m\u001b[91m Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm notice Run `npm install -g npm@9.2.0` to update!\nnpm notice\u001b[0m\u001b[91m \n\u001b[0m\n> browserless-chrome@1.57.0 postinstall\n> node ./scripts/postinstall.js\n\nDownloading chromium for revision 1069273\nDownloading chromedriver for revision 1069273\nDownloading devtools assets for revision 1069273\nDownloading ad-blocking list\nSymlinking chrome from /usr/bin/google-chrome to /usr/src/app/chrome/linux-1069273/chrome-linux/chrome\nDone unpacking chromedriver and devtools assets\n\n> browserless-chrome@1.57.0 build\n> npm run clean && tsc\n\n\n> browserless-chrome@1.57.0 clean\n> rimraf build\n\n\u001b[91mnpm\u001b[0m\u001b[91m WARN config production Use `--omit=dev` instead.\n\u001b[0m\nup to date, audited 635 packages in 1s\n\n53 packages are looking for funding\n  run `npm fund` for details\n\nfound 0 vulnerabilities\nRemoving intermediate container 77bbca9c7b7e\n ---> f8a4fcf8401d\nStep 26/28 : USER blessuser\n ---> Running in 43beb8dc36db\nRemoving intermediate container 43beb8dc36db\n ---> 386eac83e461\nStep 27/28 : EXPOSE ${PORT}\n ---> Running in 5ad84bfdebf1\nRemoving intermediate container 5ad84bfdebf1\n ---> 51e822f3f65d\nStep 28/28 : CMD [\"./start.sh\"]\n ---> Running in 9ce93c588b13\nRemoving intermediate container 9ce93c588b13\n ---> 25fedbe8e960\nSuccessfully built 25fedbe8e960\nSuccessfully tagged chrome:latest\n","stderr":"","imageSize":2397041428},"repair":{"violations":[{"name":"npmCacheCleanAfterInstall","position":{"start":47,"end":47,"columnStart":2,"columnEnd":36}}],"repairedDockerfile":"ARG BASE_VERSION=1.19.0\nFROM browserless/base:${BASE_VERSION}\n\n# Build Args\nARG USE_CHROME_STABLE\nARG PUPPETEER_CHROMIUM_REVISION\nARG PUPPETEER_VERSION\nARG PORT=3000\n\n# Application parameters and variables\nENV APP_DIR=/usr/src/app\nENV PUPPETEER_CACHE_DIR=${APP_DIR}\nENV PLAYWRIGHT_BROWSERS_PATH=${APP_DIR}\nENV CONNECTION_TIMEOUT=60000\nENV CHROME_PATH=/usr/bin/google-chrome\nENV HOST=0.0.0.0\nENV IS_DOCKER=true\nENV LANG=\"C.UTF-8\"\nENV NODE_ENV=production\nENV PORT=${PORT}\nENV PUPPETEER_CHROMIUM_REVISION=${PUPPETEER_CHROMIUM_REVISION}\nENV PUPPETEER_SKIP_CHROMIUM_DOWNLOAD=true\nENV USE_CHROME_STABLE=${USE_CHROME_STABLE}\nENV WORKSPACE_DIR=$APP_DIR/workspace\n\nRUN mkdir -p $APP_DIR $WORKSPACE_DIR\n\nWORKDIR $APP_DIR\n\n# Install app dependencies\nCOPY . .\n\n# Install Chrome Stable when specified\nRUN if [ \"$USE_CHROME_STABLE\" = \"true\" ]; then \\\n    cd /tmp &&\\\n    wget -q https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb && \\\n    dpkg -i google-chrome-stable_current_amd64.deb; \\\n  fi\n\n# Build and install external binaries + assets\n# NOTE: The `PUPPETEER_VERSION` is needed for production versions\n# listed in package.json\nRUN if [ \"$USE_CHROME_STABLE\" = \"true\" ]; then \\\n    export CHROMEDRIVER_SKIP_DOWNLOAD=false;\\\n  else \\\n    export CHROMEDRIVER_SKIP_DOWNLOAD=true;\\\n  fi &&\\\n  npm i puppeteer@$PUPPETEER_VERSION;\\\n  npm run postinstall &&\\\n  npm run build &&\\\n  npm prune --production &&\\\n  chown -R blessuser:blessuser $APP_DIR\n\n# Run everything after as non-privileged user.\nUSER blessuser\n\n# Expose the web-socket and HTTP ports\nEXPOSE ${PORT}\n\nCMD [\"./start.sh\"]\n"},"repairedBuild":{"startTimestamp":1672057975795,"endTimestamp":1672058090339,"error":null,"stdout":"Sending build context to Docker daemon  27.13MB\r\r\nStep 1/28 : ARG BASE_VERSION=1.19.0\nStep 2/28 : FROM browserless/base:${BASE_VERSION}\n ---> b294aa687483\nStep 3/28 : ARG USE_CHROME_STABLE\n ---> Running in 6227fd170d61\nRemoving intermediate container 6227fd170d61\n ---> cfe17a06ce64\nStep 4/28 : ARG PUPPETEER_CHROMIUM_REVISION\n ---> Running in df7a6fd36b8b\nRemoving intermediate container df7a6fd36b8b\n ---> fb191537ac47\nStep 5/28 : ARG PUPPETEER_VERSION\n ---> Running in cafc11169fbb\nRemoving intermediate container cafc11169fbb\n ---> 07deb0545750\nStep 6/28 : ARG PORT=3000\n ---> Running in ed857f09a57b\nRemoving intermediate container ed857f09a57b\n ---> 425038272831\nStep 7/28 : ENV APP_DIR=/usr/src/app\n ---> Running in b9943fdaac6f\nRemoving intermediate container b9943fdaac6f\n ---> bfdfbb253cb3\nStep 8/28 : ENV PUPPETEER_CACHE_DIR=${APP_DIR}\n ---> Running in b1182cdc6a5b\nRemoving intermediate container b1182cdc6a5b\n ---> 8dde45009923\nStep 9/28 : ENV PLAYWRIGHT_BROWSERS_PATH=${APP_DIR}\n ---> Running in 9c44b681f650\nRemoving intermediate container 9c44b681f650\n ---> 6c34cc102087\nStep 10/28 : ENV CONNECTION_TIMEOUT=60000\n ---> Running in 28df5bce24ca\nRemoving intermediate container 28df5bce24ca\n ---> 5619e3cb99f0\nStep 11/28 : ENV CHROME_PATH=/usr/bin/google-chrome\n ---> Running in 4168df1d3031\nRemoving intermediate container 4168df1d3031\n ---> 81c01cc6b00b\nStep 12/28 : ENV HOST=0.0.0.0\n ---> Running in 0f24c46d13f9\nRemoving intermediate container 0f24c46d13f9\n ---> 81e494ae17e6\nStep 13/28 : ENV IS_DOCKER=true\n ---> Running in cf2e3c1571a2\nRemoving intermediate container cf2e3c1571a2\n ---> e86aaf405a87\nStep 14/28 : ENV LANG=\"C.UTF-8\"\n ---> Running in 8d9befbc1e82\nRemoving intermediate container 8d9befbc1e82\n ---> 7ec6c8315bf1\nStep 15/28 : ENV NODE_ENV=production\n ---> Running in fb353fe3fc9c\nRemoving intermediate container fb353fe3fc9c\n ---> 7071c61a4aa6\nStep 16/28 : ENV PORT=${PORT}\n ---> Running in b169fc0c6fc0\nRemoving intermediate container b169fc0c6fc0\n ---> 8b26c5c06b90\nStep 17/28 : ENV PUPPETEER_CHROMIUM_REVISION=${PUPPETEER_CHROMIUM_REVISION}\n ---> Running in 2ccb1bb5afc6\nRemoving intermediate container 2ccb1bb5afc6\n ---> 1e0c7448d879\nStep 18/28 : ENV PUPPETEER_SKIP_CHROMIUM_DOWNLOAD=true\n ---> Running in e630d241e91e\nRemoving intermediate container e630d241e91e\n ---> 63bf4c3caf17\nStep 19/28 : ENV USE_CHROME_STABLE=${USE_CHROME_STABLE}\n ---> Running in 228fa27b67f7\nRemoving intermediate container 228fa27b67f7\n ---> d7e183ee07df\nStep 20/28 : ENV WORKSPACE_DIR=$APP_DIR/workspace\n ---> Running in 141387982d47\nRemoving intermediate container 141387982d47\n ---> 1b2fe1e94da6\nStep 21/28 : RUN mkdir -p $APP_DIR $WORKSPACE_DIR\n ---> Running in e6422fee906b\nRemoving intermediate container e6422fee906b\n ---> 56083d533ab3\nStep 22/28 : WORKDIR $APP_DIR\n ---> Running in 98e4c250d825\nRemoving intermediate container 98e4c250d825\n ---> 4085b91c0515\nStep 23/28 : COPY . .\n ---> c04a2da8af2b\nStep 24/28 : RUN if [ \"$USE_CHROME_STABLE\" = \"true\" ]; then     cd /tmp &&    wget -q https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb &&     dpkg -i google-chrome-stable_current_amd64.deb;   fi\n ---> Running in b0cbf9c746e7\nRemoving intermediate container b0cbf9c746e7\n ---> a3f589cdb0ff\nStep 25/28 : RUN if [ \"$USE_CHROME_STABLE\" = \"true\" ]; then     export CHROMEDRIVER_SKIP_DOWNLOAD=false;  else     export CHROMEDRIVER_SKIP_DOWNLOAD=true;  fi &&  npm i puppeteer@$PUPPETEER_VERSION;  npm run postinstall &&  npm run build &&  npm prune --production &&  chown -R blessuser:blessuser $APP_DIR\n ---> Running in b2c4e1bf0363\n\nadded 634 packages, and audited 635 packages in 11s\n\n53 packages are looking for funding\n  run `npm fund` for details\n\nfound 0 vulnerabilities\n\u001b[91mnpm notice \nnpm notice New major version of npm available! 8.19.2 -> 9.2.0\nnpm notice Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm notice\u001b[0m\u001b[91m Run `npm install -g npm@9.2.0` to update!\nnpm notice \n\u001b[0m\n> browserless-chrome@1.57.0 postinstall\n> node ./scripts/postinstall.js\n\nDownloading chromium for revision 1069273\nDownloading chromedriver for revision 1069273\nDownloading devtools assets for revision 1069273\nDownloading ad-blocking list\nSymlinking chrome from /usr/bin/google-chrome to /usr/src/app/chrome/linux-1069273/chrome-linux/chrome\nDone unpacking chromedriver and devtools assets\n\n> browserless-chrome@1.57.0 build\n> npm run clean && tsc\n\n\n> browserless-chrome@1.57.0 clean\n> rimraf build\n\n\u001b[91mnpm\u001b[0m\u001b[91m WARN config production Use `--omit=dev` instead.\n\u001b[0m\nup to date, audited 635 packages in 1s\n\n53 packages are looking for funding\n  run `npm fund` for details\n\nfound 0 vulnerabilities\nRemoving intermediate container b2c4e1bf0363\n ---> 0daf90f3c2a1\nStep 26/28 : USER blessuser\n ---> Running in 3938a437c58f\nRemoving intermediate container 3938a437c58f\n ---> 8c1cdd9091c1\nStep 27/28 : EXPOSE ${PORT}\n ---> Running in 5f798625133a\nRemoving intermediate container 5f798625133a\n ---> ad39778d830c\nStep 28/28 : CMD [\"./start.sh\"]\n ---> Running in 34f5a56b6122\nRemoving intermediate container 34f5a56b6122\n ---> 125c8dbe7154\nSuccessfully built 125c8dbe7154\nSuccessfully tagged chrome:latest\n","stderr":"","imageSize":2397041442},"endTime":1672058091487}