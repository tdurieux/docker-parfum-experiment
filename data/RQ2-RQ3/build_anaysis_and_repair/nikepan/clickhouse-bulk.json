{"repository":"https://github.com/nikepan/clickhouse-bulk","dockerfilePath":"Dockerfile","startTime":1672776540104,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/nikepan/clickhouse-bulk'...\n","error":null,"commit":"94c164d4f91f827d44d2a30adcfbe2b36a290324"},"originalBuild":{"startTimestamp":1672776541288,"endTimestamp":1672776616034,"error":null,"stdout":"Sending build context to Docker daemon  206.8kB\r\r\nStep 1/16 : FROM golang:1.18 as builder\n1.18: Pulling from library/golang\n32de3c850997: Already exists\nfa1d4c8d85a4: Pulling fs layer\nc796299bbbdd: Pulling fs layer\n81283a9569ad: Pulling fs layer\nc768848b86a2: Pulling fs layer\n160a777925fe: Pulling fs layer\n1be94824532a: Pulling fs layer\n160a777925fe: Waiting\nc768848b86a2: Waiting\n1be94824532a: Waiting\nc796299bbbdd: Verifying Checksum\nc796299bbbdd: Download complete\nfa1d4c8d85a4: Verifying Checksum\nfa1d4c8d85a4: Download complete\n81283a9569ad: Verifying Checksum\n81283a9569ad: Download complete\n1be94824532a: Verifying Checksum\n1be94824532a: Download complete\n160a777925fe: Verifying Checksum\n160a777925fe: Download complete\nc768848b86a2: Verifying Checksum\nc768848b86a2: Download complete\nfa1d4c8d85a4: Pull complete\nc796299bbbdd: Pull complete\n81283a9569ad: Pull complete\nc768848b86a2: Pull complete\n160a777925fe: Pull complete\n1be94824532a: Pull complete\nDigest: sha256:00d63686b480f6dc866e93ddc4b29efa2db03274a687e6495c2cfbfe615d638e\nStatus: Downloaded newer image for golang:1.18\n ---> fffd0d9a59da\nStep 2/16 : ARG GOPROXY\n ---> Running in 34f1285256d7\nRemoving intermediate container 34f1285256d7\n ---> a48b78db0b11\nStep 3/16 : ENV GOOS=linux     GOARCH=amd64     CGO_ENABLED=0     GO111MODULE=on\n ---> Running in 4be3ef38277e\nRemoving intermediate container 4be3ef38277e\n ---> ca47f0c79873\nStep 4/16 : WORKDIR /go/src/github.com/nikepan/clickhouse-bulk\n ---> Running in a093b851d2a2\nRemoving intermediate container a093b851d2a2\n ---> 3eda0c339203\nStep 5/16 : ADD go.* ./\n ---> 895293770005\nStep 6/16 : RUN go mod download\n ---> Running in 896aab763188\nRemoving intermediate container 896aab763188\n ---> a5ffb7ee8cb6\nStep 7/16 : ADD . ./\n ---> f8297292b676\nStep 8/16 : RUN go build -v\n ---> Running in 52257696b3e8\n\u001b[91mgithub.com/beorn7/perks/quantile\n\u001b[0m\u001b[91mgithub.com/valyala/bytebufferpool\n\u001b[0m\u001b[91mgolang.org/x/text/transform\n\u001b[0m\u001b[91mgithub.com/prometheus/common/internal/bitbucket.org/ww/goautoneg\n\u001b[0m\u001b[91mgithub.com/mattn/go-isatty\n\u001b[0m\u001b[91mgithub.com/nikepan/go-datastructures/queue\n\u001b[0m\u001b[91mgithub.com/prometheus/procfs/internal/fs\n\u001b[0m\u001b[91mgithub.com/prometheus/common/model\n\u001b[0m\u001b[91mgolang.org/x/text/unicode/bidi\n\u001b[0m\u001b[91mnet\n\u001b[0m\u001b[91mgithub.com/golang/protobuf/proto\n\u001b[0m\u001b[91mgithub.com/mattn/go-colorable\n\u001b[0m\u001b[91mgithub.com/valyala/fasttemplate\n\u001b[0m\u001b[91mgithub.com/labstack/gommon/color\n\u001b[0m\u001b[91mgolang.org/x/text/unicode/norm\n\u001b[0m\u001b[91mgithub.com/labstack/gommon/log\n\u001b[0m\u001b[91mgolang.org/x/text/secure/bidirule\n\u001b[0m\u001b[91mgolang.org/x/net/idna\n\u001b[0m\u001b[91mgithub.com/prometheus/client_model/go\n\u001b[0m\u001b[91mgithub.com/matttproud/golang_protobuf_extensions/pbutil\n\u001b[0m\u001b[91mvendor/golang.org/x/net/http/httpproxy\n\u001b[0m\u001b[91mcrypto/x509\ngithub.com/prometheus/procfs\n\u001b[0m\u001b[91mnet/textproto\n\u001b[0m\u001b[91mgithub.com/prometheus/client_golang/prometheus/internal\n\u001b[0m\u001b[91mvendor/golang.org/x/net/http/httpguts\n\u001b[0m\u001b[91mmime/multipart\n\u001b[0m\u001b[91mcrypto/tls\n\u001b[0m\u001b[91mnet/http/httptrace\n\u001b[0m\u001b[91mnet/http\n\u001b[0m\u001b[91mnet/http/pprof\n\u001b[0m\u001b[91mexpvar\n\u001b[0m\u001b[91mgolang.org/x/crypto/acme\n\u001b[0m\u001b[91mgithub.com/prometheus/common/expfmt\n\u001b[0m\u001b[91mgithub.com/prometheus/client_golang/prometheus\n\u001b[0m\u001b[91mgolang.org/x/crypto/acme/autocert\n\u001b[0m\u001b[91mgithub.com/labstack/echo\n\u001b[0m\u001b[91mgithub.com/prometheus/client_golang/prometheus/promhttp\n\u001b[0m\u001b[91mgithub.com/nikepan/clickhouse-bulk\n\u001b[0mRemoving intermediate container 52257696b3e8\n ---> 6c2cdfc667e4\nStep 9/16 : FROM alpine:latest\nlatest: Pulling from library/alpine\nc158987b0551: Already exists\nDigest: sha256:8914eb54f968791faf6a8638949e480fef81e697984fba772b3976835194c6d4\nStatus: Downloaded newer image for alpine:latest\n ---> 49176f190c7e\nStep 10/16 : RUN apk add ca-certificates\n ---> Running in 7e0ce0668dd0\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/1) Installing ca-certificates (20220614-r3)\nExecuting busybox-1.35.0-r29.trigger\nExecuting ca-certificates-20220614-r3.trigger\nOK: 8 MiB in 16 packages\nRemoving intermediate container 7e0ce0668dd0\n ---> 348cd113ddf3\nStep 11/16 : WORKDIR /app\n ---> Running in f7889369eb33\nRemoving intermediate container f7889369eb33\n ---> 493461fcea43\nStep 12/16 : RUN mkdir /app/dumps\n ---> Running in daf168a96215\nRemoving intermediate container daf168a96215\n ---> 1eac4feca2e8\nStep 13/16 : COPY --from=builder /go/src/github.com/nikepan/clickhouse-bulk/config.sample.json .\n ---> 4cf407fa366b\nStep 14/16 : COPY --from=builder /go/src/github.com/nikepan/clickhouse-bulk/clickhouse-bulk .\n ---> e9ce8c06ac24\nStep 15/16 : EXPOSE 8123\n ---> Running in 53a18dfde11b\nRemoving intermediate container 53a18dfde11b\n ---> d80e0733bc8d\nStep 16/16 : ENTRYPOINT [\"./clickhouse-bulk\", \"-config=config.sample.json\"]\n ---> Running in 0db79d8e5366\nRemoving intermediate container 0db79d8e5366\n ---> eed44e885118\nSuccessfully built eed44e885118\nSuccessfully tagged clickhouse-bulk:latest\n","stderr":"","imageSize":22364967},"repair":{"violations":[{"name":"apkAddUseNoCache","position":{"start":18,"end":18,"columnStart":4,"columnEnd":27}}],"repairedDockerfile":"FROM golang:1.18 as builder\n\nARG GOPROXY\nENV GOOS=linux \\\n    GOARCH=amd64 \\\n    CGO_ENABLED=0 \\\n    GO111MODULE=on\n\nWORKDIR /go/src/github.com/nikepan/clickhouse-bulk\n\n# cache dependencies\nADD go.* ./\nRUN go mod download\n\nADD . ./\nRUN go build -v\n\nFROM alpine:latest\nRUN apk add --no-cache ca-certificates\nWORKDIR /app\nRUN mkdir /app/dumps\nCOPY --from=builder /go/src/github.com/nikepan/clickhouse-bulk/config.sample.json .\nCOPY --from=builder /go/src/github.com/nikepan/clickhouse-bulk/clickhouse-bulk .\nEXPOSE 8123\nENTRYPOINT [\"./clickhouse-bulk\", \"-config=config.sample.json\"]"},"repairedBuild":{"startTimestamp":1672776616413,"endTimestamp":1672776652998,"error":null,"stdout":"Sending build context to Docker daemon  206.8kB\r\r\nStep 1/16 : FROM golang:1.18 as builder\n ---> fffd0d9a59da\nStep 2/16 : ARG GOPROXY\n ---> Running in 39f9294f6157\nRemoving intermediate container 39f9294f6157\n ---> f14dad20a82c\nStep 3/16 : ENV GOOS=linux     GOARCH=amd64     CGO_ENABLED=0     GO111MODULE=on\n ---> Running in dfd016455c80\nRemoving intermediate container dfd016455c80\n ---> 468026270c81\nStep 4/16 : WORKDIR /go/src/github.com/nikepan/clickhouse-bulk\n ---> Running in 94f6d0337e8b\nRemoving intermediate container 94f6d0337e8b\n ---> e4089c8d63d6\nStep 5/16 : ADD go.* ./\n ---> 796f460cd3d0\nStep 6/16 : RUN go mod download\n ---> Running in 9604a9adea3c\nRemoving intermediate container 9604a9adea3c\n ---> 397fafcbe401\nStep 7/16 : ADD . ./\n ---> 5871fa2b3bbc\nStep 8/16 : RUN go build -v\n ---> Running in 97110f8e4a83\n\u001b[91mgithub.com/beorn7/perks/quantile\n\u001b[0m\u001b[91mgithub.com/valyala/bytebufferpool\n\u001b[0m\u001b[91mgolang.org/x/text/transform\n\u001b[0m\u001b[91mgithub.com/prometheus/common/internal/bitbucket.org/ww/goautoneg\n\u001b[0m\u001b[91mgithub.com/mattn/go-isatty\n\u001b[0m\u001b[91mgithub.com/nikepan/go-datastructures/queue\n\u001b[0m\u001b[91mgithub.com/prometheus/procfs/internal/fs\n\u001b[0m\u001b[91mgithub.com/prometheus/common/model\n\u001b[0m\u001b[91mgolang.org/x/text/unicode/bidi\n\u001b[0m\u001b[91mgithub.com/valyala/fasttemplate\n\u001b[0m\u001b[91mgithub.com/golang/protobuf/proto\n\u001b[0m\u001b[91mnet\n\u001b[0m\u001b[91mgithub.com/mattn/go-colorable\n\u001b[0m\u001b[91mgithub.com/labstack/gommon/color\n\u001b[0m\u001b[91mgolang.org/x/text/unicode/norm\n\u001b[0m\u001b[91mgithub.com/labstack/gommon/log\n\u001b[0m\u001b[91mgolang.org/x/text/secure/bidirule\n\u001b[0m\u001b[91mgolang.org/x/net/idna\n\u001b[0m\u001b[91mgithub.com/prometheus/client_model/go\n\u001b[0m\u001b[91mgithub.com/matttproud/golang_protobuf_extensions/pbutil\n\u001b[0m\u001b[91mnet/textproto\nvendor/golang.org/x/net/http/httpproxy\ngithub.com/prometheus/procfs\n\u001b[0m\u001b[91mcrypto/x509\n\u001b[0m\u001b[91mgithub.com/prometheus/client_golang/prometheus/internal\n\u001b[0m\u001b[91mvendor/golang.org/x/net/http/httpguts\n\u001b[0m\u001b[91mmime/multipart\n\u001b[0m\u001b[91mcrypto/tls\n\u001b[0m\u001b[91mnet/http/httptrace\n\u001b[0m\u001b[91mnet/http\n\u001b[0m\u001b[91mgolang.org/x/crypto/acme\nexpvar\n\u001b[0m\u001b[91mnet/http/pprof\n\u001b[0m\u001b[91mgithub.com/prometheus/common/expfmt\n\u001b[0m\u001b[91mgithub.com/prometheus/client_golang/prometheus\n\u001b[0m\u001b[91mgolang.org/x/crypto/acme/autocert\n\u001b[0m\u001b[91mgithub.com/labstack/echo\n\u001b[0m\u001b[91mgithub.com/prometheus/client_golang/prometheus/promhttp\n\u001b[0m\u001b[91mgithub.com/nikepan/clickhouse-bulk\n\u001b[0mRemoving intermediate container 97110f8e4a83\n ---> 0216b6fcaf10\nStep 9/16 : FROM alpine:latest\n ---> 49176f190c7e\nStep 10/16 : RUN apk add --no-cache ca-certificates\n ---> Running in 19dbf061436b\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/1) Installing ca-certificates (20220614-r3)\nExecuting busybox-1.35.0-r29.trigger\nExecuting ca-certificates-20220614-r3.trigger\nOK: 8 MiB in 16 packages\nRemoving intermediate container 19dbf061436b\n ---> 122fb62ce14a\nStep 11/16 : WORKDIR /app\n ---> Running in 36330d377443\nRemoving intermediate container 36330d377443\n ---> 44a6cf114252\nStep 12/16 : RUN mkdir /app/dumps\n ---> Running in e6f0faced910\nRemoving intermediate container e6f0faced910\n ---> a2fefcce2c1e\nStep 13/16 : COPY --from=builder /go/src/github.com/nikepan/clickhouse-bulk/config.sample.json .\n ---> 52c4bcbd1676\nStep 14/16 : COPY --from=builder /go/src/github.com/nikepan/clickhouse-bulk/clickhouse-bulk .\n ---> 495899d64513\nStep 15/16 : EXPOSE 8123\n ---> Running in d37cafb95689\nRemoving intermediate container d37cafb95689\n ---> 7c9bf91ebaf1\nStep 16/16 : ENTRYPOINT [\"./clickhouse-bulk\", \"-config=config.sample.json\"]\n ---> Running in e64e3914f585\nRemoving intermediate container e64e3914f585\n ---> 5434da3fd4f5\nSuccessfully built 5434da3fd4f5\nSuccessfully tagged clickhouse-bulk:latest\n","stderr":"","imageSize":19782002},"endTime":1672776653231}