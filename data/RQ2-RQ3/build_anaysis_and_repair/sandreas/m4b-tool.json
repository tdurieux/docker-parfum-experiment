{"repository":"https://github.com/sandreas/m4b-tool","dockerfilePath":"Dockerfile","startTime":1672202260906,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/sandreas/m4b-tool'...\n","error":null,"commit":"54bc2b6722fab8ec2f42db6a800f39ce5f7f86de"},"originalBuild":{"startTimestamp":1672202261854,"endTimestamp":1672202338558,"error":null,"stdout":"Sending build context to Docker daemon   5.12kB\r\r\nStep 1/19 : FROM sandreas/ffmpeg:5.0.1-3 as ffmpeg\n5.0.1-3: Pulling from sandreas/ffmpeg\n2408cc74d12b: Pulling fs layer\n748444ca483a: Pulling fs layer\nb88dfd618572: Pulling fs layer\n8e850dffe67b: Pulling fs layer\nfa541957a432: Pulling fs layer\n612ca5fe5313: Pulling fs layer\ndce5d61c0d9f: Pulling fs layer\n8e850dffe67b: Waiting\nfa541957a432: Waiting\ndce5d61c0d9f: Waiting\n612ca5fe5313: Waiting\n2408cc74d12b: Download complete\n748444ca483a: Verifying Checksum\n748444ca483a: Download complete\n2408cc74d12b: Pull complete\n748444ca483a: Pull complete\nb88dfd618572: Download complete\nb88dfd618572: Pull complete\n612ca5fe5313: Verifying Checksum\n612ca5fe5313: Download complete\nfa541957a432: Verifying Checksum\nfa541957a432: Download complete\ndce5d61c0d9f: Verifying Checksum\ndce5d61c0d9f: Download complete\n8e850dffe67b: Verifying Checksum\n8e850dffe67b: Download complete\n8e850dffe67b: Pull complete\nfa541957a432: Pull complete\n612ca5fe5313: Pull complete\ndce5d61c0d9f: Pull complete\nDigest: sha256:27661e7fb9b5361eef44bc2681b1e229c6c8c95805e6218c74dedb622692c47f\nStatus: Downloaded newer image for sandreas/ffmpeg:5.0.1-3\n ---> 664f2ecf0c25\nStep 2/19 : FROM sandreas/tone:v0.1.0 as tone\nv0.1.0: Pulling from sandreas/tone\n2408cc74d12b: Already exists\n570d83be9ad6: Pulling fs layer\n4f4fb700ef54: Pulling fs layer\n4f4fb700ef54: Verifying Checksum\n4f4fb700ef54: Download complete\n570d83be9ad6: Download complete\n570d83be9ad6: Pull complete\n4f4fb700ef54: Pull complete\nDigest: sha256:3ac289f28934705dd3ec0f9b801fb049f14a33f29186c756cc70081fff49e0d4\nStatus: Downloaded newer image for sandreas/tone:v0.1.0\n ---> 186c131146f2\nStep 3/19 : FROM sandreas/mp4v2:2.1.1 as mp4v2\n2.1.1: Pulling from sandreas/mp4v2\nc7ed990a2339: Pulling fs layer\n6b60f96bd051: Pulling fs layer\n761b5e1c814e: Pulling fs layer\nd117ead12603: Pulling fs layer\nd117ead12603: Waiting\nc7ed990a2339: Verifying Checksum\nc7ed990a2339: Download complete\n6b60f96bd051: Download complete\nc7ed990a2339: Pull complete\n761b5e1c814e: Verifying Checksum\n761b5e1c814e: Download complete\n6b60f96bd051: Pull complete\nd117ead12603: Verifying Checksum\nd117ead12603: Download complete\n761b5e1c814e: Pull complete\nd117ead12603: Pull complete\nDigest: sha256:c186cccc63b69a428be6a60359c29aff84bfacbd8597a4237038c7ccd7628a2d\nStatus: Downloaded newer image for sandreas/mp4v2:2.1.1\n ---> 7b5cc2c32185\nStep 4/19 : FROM sandreas/fdkaac:2.0.1 as fdkaac\n2.0.1: Pulling from sandreas/fdkaac\nc7ed990a2339: Already exists\na831ae11abd8: Pulling fs layer\nfaca64721040: Pulling fs layer\na831ae11abd8: Verifying Checksum\na831ae11abd8: Download complete\nfaca64721040: Download complete\na831ae11abd8: Pull complete\nfaca64721040: Pull complete\nDigest: sha256:37500ad28938f33c90892ef34f71b62bed2ae44ba76c480da7e6cb0ae5a2e622\nStatus: Downloaded newer image for sandreas/fdkaac:2.0.1\n ---> c049a1f55506\nStep 5/19 : FROM alpine:3.14\n3.14: Pulling from library/alpine\nc7ed990a2339: Already exists\nDigest: sha256:4c869a63e1b7c0722fed1e402a6466610327c3b83bdddb94bd94fb71da7f638a\nStatus: Downloaded newer image for alpine:3.14\n ---> dd53f409bf0b\nStep 6/19 : ENV WORKDIR /mnt/\n ---> Running in fca939191b43\nRemoving intermediate container fca939191b43\n ---> 5d6a4a4608ba\nStep 7/19 : ENV M4BTOOL_TMP_DIR /tmp/m4b-tool/\n ---> Running in fed258f78470\nRemoving intermediate container fed258f78470\n ---> 82fe88b875d9\nStep 8/19 : RUN echo \"---- INSTALL RUNTIME PACKAGES ----\" &&   apk add --no-cache --update --upgrade   libstdc++   php8-cli   php8-dom   php8-json   php8-xml   php8-mbstring   php8-phar   php8-tokenizer   php8-xmlwriter   php8-openssl   && echo \"date.timezone = UTC\" >> /etc/php8/php.ini   && ln -s /usr/bin/php8 /bin/php\n ---> Running in 9db88e8f98d1\n---- INSTALL RUNTIME PACKAGES ----\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.14/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.14/community/x86_64/APKINDEX.tar.gz\n(1/21) Upgrading libcrypto1.1 (1.1.1q-r0 -> 1.1.1s-r0)\n(2/21) Upgrading libssl1.1 (1.1.1q-r0 -> 1.1.1s-r0)\n(3/21) Installing libgcc (10.3.1_git20210424-r2)\n(4/21) Installing libstdc++ (10.3.1_git20210424-r2)\n(5/21) Installing php8-common (8.0.24-r0)\n(6/21) Installing argon2-libs (20190702-r1)\n(7/21) Installing ncurses-terminfo-base (6.2_p20210612-r1)\n(8/21) Installing ncurses-libs (6.2_p20210612-r1)\n(9/21) Installing libedit (20210216.3.1-r0)\n(10/21) Installing pcre2 (10.36-r1)\n(11/21) Installing xz-libs (5.2.5-r1)\n(12/21) Installing libxml2 (2.9.14-r2)\n(13/21) Installing php8 (8.0.24-r0)\n(14/21) Installing php8-dom (8.0.24-r0)\n(15/21) Installing oniguruma (6.9.7.1-r0)\n(16/21) Installing php8-mbstring (8.0.24-r0)\n(17/21) Installing php8-openssl (8.0.24-r0)\n(18/21) Installing php8-phar (8.0.24-r0)\n(19/21) Installing php8-tokenizer (8.0.24-r0)\n(20/21) Installing php8-xml (8.0.24-r0)\n(21/21) Installing php8-xmlwriter (8.0.24-r0)\nExecuting busybox-1.33.1-r8.trigger\nOK: 18 MiB in 33 packages\nRemoving intermediate container 9db88e8f98d1\n ---> 5c0b092a2038\nStep 9/19 : COPY --from=ffmpeg /usr/local/bin/ffmpeg /usr/local/bin/\n ---> 6b4a13cd697a\nStep 10/19 : COPY --from=tone /usr/local/bin/tone /usr/local/bin/\n ---> 322a43d7dc91\nStep 11/19 : COPY --from=mp4v2 /usr/local/bin/mp4* /usr/local/bin/\n ---> 9c11b8adcc13\nStep 12/19 : COPY --from=mp4v2 /usr/local/lib/libmp4v2* /usr/local/lib/\n ---> 4844dc83c763\nStep 13/19 : COPY --from=fdkaac /usr/local/bin/fdkaac /usr/local/bin/\n ---> f1da5aaa20b2\nStep 14/19 : ARG M4B_TOOL_DOWNLOAD_LINK=\"https://github.com/sandreas/m4b-tool/releases/latest/download/m4b-tool.tar.gz\"\n ---> Running in 899a9555256e\nRemoving intermediate container 899a9555256e\n ---> 581930224be4\nStep 15/19 : ADD ./Dockerfile ./dist/m4b-tool.phar* /tmp/\n ---> 42de8055e15f\nStep 16/19 : RUN echo \"---- INSTALL M4B-TOOL ----\"     && if [ ! -f /tmp/m4b-tool.phar ]; then             echo \"!!! DOWNLOADING ${M4B_TOOL_DOWNLOAD_LINK} !!!\" && wget \"${M4B_TOOL_DOWNLOAD_LINK}\" -O /tmp/m4b-tool.tar.gz &&             if [ ! -f /tmp/m4b-tool.phar ]; then                 tar xzf /tmp/m4b-tool.tar.gz -C /tmp/ && rm /tmp/m4b-tool.tar.gz ;            fi        fi     && mv /tmp/m4b-tool.phar /usr/local/bin/m4b-tool     && M4B_TOOL_PRE_RELEASE_LINK=$(wget -q -O - https://github.com/sandreas/m4b-tool/releases/tag/latest | grep -o 'M4B_TOOL_DOWNLOAD_LINK=[^ ]*' | head -1 | cut -d '=' -f 2)     && echo \"!!! DOWNLOADING PRE_RELEASE ${M4B_TOOL_DOWNLOAD_LINK} !!!\" && wget \"${M4B_TOOL_PRE_RELEASE_LINK}\" -O /tmp/m4b-tool.tar.gz     && tar xzf /tmp/m4b-tool.tar.gz -C /tmp/ && rm /tmp/m4b-tool.tar.gz     && mv /tmp/m4b-tool.phar /usr/local/bin/m4b-tool-pre     && chmod +x /usr/local/bin/m4b-tool /usr/local/bin/m4b-tool-pre\n ---> Running in 057aa8f66284\n---- INSTALL M4B-TOOL ----\n!!! DOWNLOADING https://github.com/sandreas/m4b-tool/releases/latest/download/m4b-tool.tar.gz !!!\n\u001b[91mConnecting to github.com (140.82.121.3:443)\n\u001b[0m\u001b[91mConnecting to github.com (140.82.121.3:443)\n\u001b[0m\u001b[91mConnecting to objects.githubusercontent.com (185.199.111.133:443)\n\u001b[0m\u001b[91msaving to '/tmp/m4b-tool.tar.gz'\n\u001b[0m\u001b[91mm4b-tool.tar.gz      100% |********************************|  447k  0:00:00 ETA\n'/tmp/m4b-tool.tar.gz' saved\n\u001b[0m!!! DOWNLOADING PRE_RELEASE https://github.com/sandreas/m4b-tool/releases/latest/download/m4b-tool.tar.gz !!!\n\u001b[91mConnecting to github.com (140.82.121.4:443)\n\u001b[0m\u001b[91mConnecting to objects.githubusercontent.com (185.199.109.133:443)\n\u001b[0m\u001b[91msaving to '/tmp/m4b-tool.tar.gz'\n\u001b[0m\u001b[91mm4b-tool.tar.gz      100% |********************************|  534k  0:00:00 ETA\n'/tmp/m4b-tool.tar.gz' saved\n\u001b[0mRemoving intermediate container 057aa8f66284\n ---> f7b75bac971b\nStep 17/19 : WORKDIR ${WORKDIR}\n ---> Running in 3462bb96116c\nRemoving intermediate container 3462bb96116c\n ---> 77da759461ea\nStep 18/19 : CMD [\"list\"]\n ---> Running in a0b9b7f3bead\nRemoving intermediate container a0b9b7f3bead\n ---> 2c48f637da7b\nStep 19/19 : ENTRYPOINT [\"m4b-tool\"]\n ---> Running in 24e4250cf0c1\nRemoving intermediate container 24e4250cf0c1\n ---> 0bba02dc33a2\nSuccessfully built 0bba02dc33a2\nSuccessfully tagged m4b-tool:latest\n","stderr":"","imageSize":154450267},"repair":{"violations":[],"repairedDockerfile":"FROM sandreas/ffmpeg:5.0.1-3 as ffmpeg\nFROM sandreas/tone:v0.1.0 as tone\nFROM sandreas/mp4v2:2.1.1 as mp4v2\nFROM sandreas/fdkaac:2.0.1 as fdkaac\n\n##############################\n#\n#   m4b-tool development image\n#\n##############################\nFROM alpine:3.14\nENV WORKDIR /mnt/\nENV M4BTOOL_TMP_DIR /tmp/m4b-tool/\n\n\nRUN echo \"---- INSTALL RUNTIME PACKAGES ----\" && \\\n  apk add --no-cache --update --upgrade \\\n  # mp4v2: required libraries\n  libstdc++ \\\n  # m4b-tool: php cli, required extensions and php settings\n  php8-cli \\\n  php8-dom \\\n  php8-json \\\n  php8-xml \\\n  php8-mbstring \\\n  php8-phar \\\n  php8-tokenizer \\\n  php8-xmlwriter \\\n  php8-openssl \\\n  && echo \"date.timezone = UTC\" >> /etc/php8/php.ini \\\n  && ln -s /usr/bin/php8 /bin/php\n\n\n\nCOPY --from=ffmpeg /usr/local/bin/ffmpeg /usr/local/bin/\nCOPY --from=tone /usr/local/bin/tone /usr/local/bin/\nCOPY --from=mp4v2 /usr/local/bin/mp4* /usr/local/bin/\nCOPY --from=mp4v2 /usr/local/lib/libmp4v2* /usr/local/lib/\nCOPY --from=fdkaac /usr/local/bin/fdkaac /usr/local/bin/\n\nARG M4B_TOOL_DOWNLOAD_LINK=\"https://github.com/sandreas/m4b-tool/releases/latest/download/m4b-tool.tar.gz\"\n\n# workaround to copy a local m4b-tool.phar IF it exists\nADD ./Dockerfile ./dist/m4b-tool.phar* /tmp/\nRUN echo \"---- INSTALL M4B-TOOL ----\" \\\n    && if [ ! -f /tmp/m4b-tool.phar ]; then \\\n            echo \"!!! DOWNLOADING ${M4B_TOOL_DOWNLOAD_LINK} !!!\" && wget \"${M4B_TOOL_DOWNLOAD_LINK}\" -O /tmp/m4b-tool.tar.gz && \\\n            if [ ! -f /tmp/m4b-tool.phar ]; then \\\n                tar xzf /tmp/m4b-tool.tar.gz -C /tmp/ && rm /tmp/m4b-tool.tar.gz; \\\n            fi \\\n       fi \\\n    && mv /tmp/m4b-tool.phar /usr/local/bin/m4b-tool \\\n    && M4B_TOOL_PRE_RELEASE_LINK=$( wget -q -O - https://github.com/sandreas/m4b-tool/releases/tag/latest | grep -o 'M4B_TOOL_DOWNLOAD_LINK=[^ ]*' | head -1 | cut -d '=' -f 2) \\\n    && echo \"!!! DOWNLOADING PRE_RELEASE ${M4B_TOOL_DOWNLOAD_LINK} !!!\" && wget \"${M4B_TOOL_PRE_RELEASE_LINK}\" -O /tmp/m4b-tool.tar.gz \\\n    && tar xzf /tmp/m4b-tool.tar.gz -C /tmp/ && rm /tmp/m4b-tool.tar.gz \\\n    && mv /tmp/m4b-tool.phar /usr/local/bin/m4b-tool-pre \\\n    && chmod +x /usr/local/bin/m4b-tool /usr/local/bin/m4b-tool-pre\n\nWORKDIR ${WORKDIR}\nCMD [\"list\"]\nENTRYPOINT [\"m4b-tool\"]\n\n"},"endTime":1672202339089}