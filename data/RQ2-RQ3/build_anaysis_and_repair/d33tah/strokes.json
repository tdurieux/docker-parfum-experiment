{"repository":"https://github.com/d33tah/strokes","dockerfilePath":"Dockerfile","startTime":1672523690513,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/d33tah/strokes'...\n","error":null,"commit":"8eec1e8bbdc380b44e722a37e8e6f72d13b2fe6c"},"originalBuild":{"startTimestamp":1672523691398,"endTimestamp":1672523770427,"error":{"code":1,"killed":false,"signal":null,"cmd":"docker build --no-cache --force-rm -t strokes:latest -f /tmp/dinghy-analysis/d33tah/strokes/Dockerfile ."},"stdout":"Sending build context to Docker daemon  4.686MB\r\r\nStep 1/23 : FROM alpine/git\nlatest: Pulling from alpine/git\nca7dd9ec2225: Already exists\neb878e0a08e4: Pulling fs layer\nb4f093b99828: Pulling fs layer\nb4f093b99828: Verifying Checksum\nb4f093b99828: Download complete\neb878e0a08e4: Verifying Checksum\neb878e0a08e4: Download complete\neb878e0a08e4: Pull complete\nb4f093b99828: Pull complete\nDigest: sha256:66b210a97bc07bfd4019826bcd13a488b371a6cbe2630a4b37d23275658bd3f2\nStatus: Downloaded newer image for alpine/git:latest\n ---> 22d84a66cda4\nStep 2/23 : ADD ./.git/ /git\n ---> 1ea9025ebb39\nStep 3/23 : RUN git -C /git rev-parse HEAD > /tmp/commit-id\n ---> Running in d7313fee2788\nRemoving intermediate container d7313fee2788\n ---> 3498518a56bc\nStep 4/23 : FROM python:3.9-alpine\n3.9-alpine: Pulling from library/python\nc158987b0551: Already exists\n7ec3a91b66d9: Already exists\na3a2c937b8a7: Pulling fs layer\n25083a7b8521: Pulling fs layer\ne2f7f5886088: Pulling fs layer\n25083a7b8521: Verifying Checksum\n25083a7b8521: Download complete\ne2f7f5886088: Verifying Checksum\ne2f7f5886088: Download complete\na3a2c937b8a7: Verifying Checksum\na3a2c937b8a7: Download complete\na3a2c937b8a7: Pull complete\n25083a7b8521: Pull complete\ne2f7f5886088: Pull complete\nDigest: sha256:8ea03bf88df73d21c72b3a941d1337c54357ee6386c2824f90b39a007792d1bb\nStatus: Downloaded newer image for python:3.9-alpine\n ---> d6d1ed462b20\nStep 5/23 : ENV HTML2PDF_URL=http://html2pdf:5000\n ---> Running in 5353c6284176\nRemoving intermediate container 5353c6284176\n ---> f79d18a729f0\nStep 6/23 : RUN adduser -D strokes && mkdir -p /home/strokes && chown -R strokes /home/strokes\n ---> Running in 57df1c5adc27\nRemoving intermediate container 57df1c5adc27\n ---> 19c8c9de6adb\nStep 7/23 : WORKDIR /tmp\n ---> Running in 53a8f95b57a9\nRemoving intermediate container 53a8f95b57a9\n ---> 79f18b523682\nStep 8/23 : ADD ./requirements.txt .\n ---> 669caedb25de\nStep 9/23 : RUN pip3 install -r requirements.txt\n ---> Running in 58ca2963532a\nCollecting flask\n  Downloading Flask-2.2.2-py3-none-any.whl (101 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 101.5/101.5 KB 2.1 MB/s eta 0:00:00\nCollecting requests\n  Downloading requests-2.28.1-py3-none-any.whl (62 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 62.8/62.8 KB 1.7 MB/s eta 0:00:00\nCollecting pypdf2\n  Downloading pypdf2-3.0.1-py3-none-any.whl (232 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 232.6/232.6 KB 1.6 MB/s eta 0:00:00\nCollecting Jinja2>=3.0\n  Downloading Jinja2-3.1.2-py3-none-any.whl (133 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 133.1/133.1 KB 1.3 MB/s eta 0:00:00\nCollecting Werkzeug>=2.2.2\n  Downloading Werkzeug-2.2.2-py3-none-any.whl (232 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 232.7/232.7 KB 12.6 MB/s eta 0:00:00\nCollecting importlib-metadata>=3.6.0\n  Downloading importlib_metadata-5.2.0-py3-none-any.whl (21 kB)\nCollecting click>=8.0\n  Downloading click-8.1.3-py3-none-any.whl (96 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 96.6/96.6 KB 900.9 kB/s eta 0:00:00\nCollecting itsdangerous>=2.0\n  Downloading itsdangerous-2.1.2-py3-none-any.whl (15 kB)\nCollecting urllib3<1.27,>=1.21.1\n  Downloading urllib3-1.26.13-py2.py3-none-any.whl (140 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 140.6/140.6 KB 3.7 MB/s eta 0:00:00\nCollecting charset-normalizer<3,>=2\n  Downloading charset_normalizer-2.1.1-py3-none-any.whl (39 kB)\nCollecting idna<4,>=2.5\n  Downloading idna-3.4-py3-none-any.whl (61 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 61.5/61.5 KB 3.7 MB/s eta 0:00:00\nCollecting certifi>=2017.4.17\n  Downloading certifi-2022.12.7-py3-none-any.whl (155 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 155.3/155.3 KB 8.8 MB/s eta 0:00:00\nCollecting typing_extensions>=3.10.0.0\n  Downloading typing_extensions-4.4.0-py3-none-any.whl (26 kB)\nCollecting zipp>=0.5\n  Downloading zipp-3.11.0-py3-none-any.whl (6.6 kB)\nCollecting MarkupSafe>=2.0\n  Downloading MarkupSafe-2.1.1-cp39-cp39-musllinux_1_1_x86_64.whl (29 kB)\nInstalling collected packages: zipp, urllib3, typing_extensions, MarkupSafe, itsdangerous, idna, click, charset-normalizer, certifi, Werkzeug, requests, pypdf2, Jinja2, importlib-metadata, flask\nSuccessfully installed Jinja2-3.1.2 MarkupSafe-2.1.1 Werkzeug-2.2.2 certifi-2022.12.7 charset-normalizer-2.1.1 click-8.1.3 flask-2.2.2 idna-3.4 importlib-metadata-5.2.0 itsdangerous-2.1.2 pypdf2-3.0.1 requests-2.28.1 typing_extensions-4.4.0 urllib3-1.26.13 zipp-3.11.0\n\u001b[91mWARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv\n\u001b[0m\u001b[91mWARNING: You are using pip version 22.0.4; however, version 22.3.1 is available.\nYou should consider upgrading via the '/usr/local/bin/python -m pip install --upgrade pip' command.\n\u001b[0mRemoving intermediate container 58ca2963532a\n ---> cbafaad28f41\nStep 10/23 : ADD ./requirements-dev.txt .\n ---> df4e5b3f65a2\nStep 11/23 : RUN pip3 install -r requirements-dev.txt\n ---> Running in 17d777b29f60\nCollecting coverage\n  Downloading coverage-7.0.1-cp39-cp39-musllinux_1_1_x86_64.whl (220 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 221.0/221.0 KB 15.2 MB/s eta 0:00:00\nCollecting nose\n  Downloading nose-1.3.7-py3-none-any.whl (154 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 154.7/154.7 KB 17.9 MB/s eta 0:00:00\nCollecting flake8\n  Downloading flake8-6.0.0-py2.py3-none-any.whl (57 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 57.8/57.8 KB 6.2 MB/s eta 0:00:00\nCollecting pycodestyle<2.11.0,>=2.10.0\n  Downloading pycodestyle-2.10.0-py2.py3-none-any.whl (41 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 41.3/41.3 KB 3.1 MB/s eta 0:00:00\nCollecting pyflakes<3.1.0,>=3.0.0\n  Downloading pyflakes-3.0.1-py2.py3-none-any.whl (62 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 62.8/62.8 KB 5.6 MB/s eta 0:00:00\nCollecting mccabe<0.8.0,>=0.7.0\n  Downloading mccabe-0.7.0-py2.py3-none-any.whl (7.3 kB)\nInstalling collected packages: nose, pyflakes, pycodestyle, mccabe, coverage, flake8\nSuccessfully installed coverage-7.0.1 flake8-6.0.0 mccabe-0.7.0 nose-1.3.7 pycodestyle-2.10.0 pyflakes-3.0.1\n\u001b[91mWARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv\n\u001b[0m\u001b[91mWARNING: You are using pip version 22.0.4; however, version 22.3.1 is available.\nYou should consider upgrading via the '/usr/local/bin/python -m pip install --upgrade pip' command.\n\u001b[0mRemoving intermediate container 17d777b29f60\n ---> 4b112af14d23\nStep 12/23 : USER strokes\n ---> Running in 27e7ec327a65\nRemoving intermediate container 27e7ec327a65\n ---> c5ec0a3c08b0\nStep 13/23 : WORKDIR /home/strokes\n ---> Running in bf6a1767d855\nRemoving intermediate container bf6a1767d855\n ---> b1939e9c7dda\nStep 14/23 : RUN wget -nv https://github.com/skishore/makemeahanzi/blob/master/graphics.txt?raw=true -Ographics.txt\n ---> Running in f5b061374248\n\u001b[91mConnecting to github.com (140.82.121.4:443)\n\u001b[0m\u001b[91mConnecting to github.com (140.82.121.3:443)\n\u001b[0m\u001b[91mConnecting to raw.githubusercontent.com (185.199.110.133:443)\n\u001b[0m\u001b[91msaving to 'graphics.txt'\n\u001b[0m\u001b[91mgraphics.txt         100% |********************************| 29.3M  0:00:00 ETA\n'graphics.txt' saved\n\u001b[0mRemoving intermediate container f5b061374248\n ---> 5d328a6e10b4\nStep 15/23 : RUN wget -nv https://github.com/skishore/makemeahanzi/blob/master/dictionary.txt?raw=true -Odictionary.txt\n ---> Running in f58b77721f00\n\u001b[91mConnecting to github.com (140.82.121.3:443)\n\u001b[0m\u001b[91mConnecting to github.com (140.82.121.4:443)\n\u001b[0m\u001b[91mConnecting to raw.githubusercontent.com (185.199.109.133:443)\n\u001b[0m\u001b[91msaving to 'dictionary.txt'\n\u001b[0m\u001b[91mdictionary.txt       100% |********************************| 2509k  0:00:00 ETA\n'dictionary.txt' saved\n\u001b[0mRemoving intermediate container f58b77721f00\n ---> d59ffdccb66c\nStep 16/23 : ADD ./strokes.py .\n ---> 57a679f66726\nStep 17/23 : ADD ./wiktionary-data.json .\n ---> bfc1cf9d0646\nStep 18/23 : CMD FLASK_APP=strokes.py flask run -h 0.0.0.0\n ---> Running in c73a1bec66f4\nRemoving intermediate container c73a1bec66f4\n ---> ef16836a7eda\nStep 19/23 : RUN flake8 strokes.py\n ---> Running in 0750f1c8646b\nRemoving intermediate container 0750f1c8646b\n ---> 2b87cc3bd0ed\nStep 20/23 : RUN coverage run --source=. --branch -m nose strokes.py\n ---> Running in 5b715668a309\n\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91mE.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m\n======================================================================\n\u001b[0m\u001b[91mERROR: test_gen_pdf (strokes.SystemTests)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/usr/local/lib/python3.9/unittest/mock.py\", line 1768, in _inner\n    return f(*args, **kw)\n  File \"/home/strokes/strokes.py\", line 703, in test_gen_pdf\n    rv = self.app.get('/gen_strokes', query_string=data)\n  File \"/usr/local/lib/python3.9/site-packages/werkzeug/test.py\", line 1140, in get\n    return self.open(*args, **kw)\n  File \"/usr/local/lib/python3.9/site-packages/flask/testing.py\", line 223, in open\n    response = super().open(\n  File \"/usr/local/lib/python3.9/site-packages/werkzeug/test.py\", line 1094, in open\n    response = self.run_wsgi_app(request.environ, buffered=buffered)\n  File \"/usr/local/lib/python3.9/site-packages/werkzeug/test.py\", line 961, in run_wsgi_app\n    rv = run_wsgi_app(self.application, environ, buffered=buffered)\n  File \"/usr/local/lib/python3.9/site-packages/werkzeug/test.py\", line 1242, in run_wsgi_app\n    app_rv = app(environ, start_response)\n  File \"/usr/local/lib/python3.9/site-packages/flask/app.py\", line 2548, in __call__\n    return self.wsgi_app(environ, start_response)\n  File \"/usr/local/lib/python3.9/site-packages/flask/app.py\", line 2528, in wsgi_app\n    response = self.handle_exception(e)\n  File \"/usr/local/lib/python3.9/site-packages/flask/app.py\", line 2525, in wsgi_app\n    response = self.full_dispatch_request()\n  File \"/usr/local/lib/python3.9/site-packages/flask/app.py\", line 1822, in full_dispatch_request\n    rv = self.handle_user_exception(e)\n  File \"/usr/local/lib/python3.9/site-packages/flask/app.py\", line 1820, in full_dispatch_request\n    rv = self.dispatch_request()\n  File \"/usr/local/lib/python3.9/site-packages/flask/app.py\", line 1796, in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)\n  File \"/home/strokes/strokes.py\", line 532, in gen_strokes\n    resp_args, resp_kwargs = draw(C, size, num_repetitions, action)\n  File \"/home/strokes/strokes.py\", line 479, in draw\n    return [gen_pdfs(pages)], {'mimetype': 'application/pdf'}\n  File \"/home/strokes/strokes.py\", line 382, in gen_pdfs\n    merger = PdfFileMerger()\n  File \"/usr/local/lib/python3.9/site-packages/PyPDF2/_merger.py\", line 817, in __init__\n    deprecation_with_replacement(\"PdfFileMerger\", \"PdfMerger\", \"3.0.0\")\n  File \"/usr/local/lib/python3.9/site-packages/PyPDF2/_utils.py\", line 369, in deprecation_with_replacement\n    deprecation(DEPR_MSG_HAPPENED.format(old_name, removed_in, new_name))\n  File \"/usr/local/lib/python3.9/site-packages/PyPDF2/_utils.py\", line 351, in deprecation\n    raise DeprecationError(msg)\nPyPDF2.errors.DeprecationError: PdfFileMerger is deprecated and was removed in PyPDF2 3.0.0. Use PdfMerger instead.\n\n----------------------------------------------------------------------\nRan 18 tests in 0.063s\n\nFAILED (errors=1)\n\u001b[0mRemoving intermediate container 5b715668a309\n","stderr":"The command '/bin/sh -c coverage run --source=. --branch -m nose strokes.py' returned a non-zero code: 1\n"},"endTime":1672523770498}