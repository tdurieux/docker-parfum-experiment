{"repository":"https://github.com/watwowmap/reactmap","dockerfilePath":"Dockerfile","startTime":1672645817016,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/watwowmap/reactmap'...\n","error":null,"commit":"1044e4098c20cee25cc2277b3cace7d99c6eb94f"},"originalBuild":{"startTimestamp":1672645818159,"endTimestamp":1672645894063,"error":null,"stdout":"Sending build context to Docker daemon  5.528MB\r\r\nStep 1/11 : FROM node:16-alpine\n ---> 610c0494e820\nStep 2/11 : ENV NPM_CONFIG_PREFIX=/home/node/.npm-global\n ---> Running in 6e7af556d07a\nRemoving intermediate container 6e7af556d07a\n ---> 496aafff2e6d\nStep 3/11 : ENV PATH=$PATH:/home/node/.npm-global/bin\n ---> Running in 2024c091b7b6\nRemoving intermediate container 2024c091b7b6\n ---> e75bfb581007\nStep 4/11 : WORKDIR /home/node\n ---> Running in a310d6bc2e7f\nRemoving intermediate container a310d6bc2e7f\n ---> e862ea98b624\nStep 5/11 : COPY package.json .\n ---> 8ca110cde9eb\nStep 6/11 : COPY yarn.lock .\n ---> 1fd8cc84d9e9\nStep 7/11 : RUN apk add git\n ---> Running in 666acca9f5cf\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/7) Installing ca-certificates (20220614-r3)\n(2/7) Installing brotli-libs (1.0.9-r9)\n(3/7) Installing nghttp2-libs (1.51.0-r0)\n(4/7) Installing libcurl (7.87.0-r0)\n(5/7) Installing libexpat (2.5.0-r0)\n(6/7) Installing pcre2 (10.42-r0)\n(7/7) Installing git (2.38.2-r0)\nExecuting busybox-1.35.0-r29.trigger\nExecuting ca-certificates-20220614-r3.trigger\nOK: 18 MiB in 24 packages\nRemoving intermediate container 666acca9f5cf\n ---> c7e93db5b2d5\nStep 8/11 : RUN npm install -g yarn\n ---> Running in cb1b625b9061\n\nadded 1 package, and audited 2 packages in 966ms\n\nfound 0 vulnerabilities\n\u001b[91mnpm \u001b[0m\u001b[91mnotice\u001b[0m\u001b[91m \n\u001b[0m\u001b[91mnpm notice\u001b[0m\u001b[91m New major version of npm available! 8.19.3 -> 9.2.0\nnpm notice\u001b[0m\u001b[91m Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm\u001b[0m\u001b[91m notice Run `npm install -g npm@9.2.0` to update!\nnpm \u001b[0m\u001b[91mnotice\u001b[0m\u001b[91m \n\u001b[0mRemoving intermediate container cb1b625b9061\n ---> 4b822032e471\nStep 9/11 : COPY . .\n ---> e2fba8e53e44\nStep 10/11 : RUN yarn install --ignore-optional\n ---> Running in 1e4f2db81ec8\nyarn install v1.22.19\n[1/5] Validating package.json...\n[2/5] Resolving packages...\n[3/5] Fetching packages...\n[4/5] Linking dependencies...\n\u001b[91mwarning \" > passport-telegram-official@2.0.1\" has incorrect peer dependency \"passport@^0.4.1\".\n\u001b[0m[5/5] Building fresh packages...\nDone in 25.63s.\nRemoving intermediate container 1e4f2db81ec8\n ---> 1b697ccaf611\nStep 11/11 : RUN yarn build\n ---> Running in 600cdb6ca9b1\nyarn run v1.22.19\n$ yarn create-locales && node esbuild.config.js\n$ node server/scripts/createLocales.js\n\u001b[91mMissing scanner database config! \nCheck to make sure you have SCANNER_DB_HOST,SCANNER_DB_PORT, SCANNER_DB_NAME, SCANNER_DB_USERNAME, and SCANNER_DB_PASSWORD\n\u001b[0mMissing ReactMap specific table, attempting to use the manual database instead.\n\u001b[91mMissing manual database config! \nCheck to make sure you have MANUAL_DB_HOST,MANUAL_DB_PORT, MANUAL_DB_NAME, MANUAL_DB_USERNAME, and MANUAL_DB_PASSWORD\nMissing, MAP_GENERAL_START_LAT OR MAP_GENERAL_START_LON\nYou will be able to proceed but you should add these values to your docker-compose file\n\u001b[0m\u001b[91m[CONFIG] No authentication strategies enabled, adding the following perms to alwaysEnabledPerms array:\n [\n  'map',             'pokemon',\n  'iv',              'pvp',\n  'gyms',            'raids',\n  'pokestops',       'quests',\n  'lures',           'portals',\n  'submissionCells', 'invasions',\n  'nests',           'scanAreas',\n  'weather',         'spawnpoints',\n  'scanCells',       'devices',\n  'donor',           'gymBadges'\n]\n\u001b[0m[LOCALES] locales folder created\n[LOCALES] de.json folder created\n[LOCALES] en.json folder created\n[LOCALES] es.json folder created\n[LOCALES] fr.json folder created\n[LOCALES] hi.json folder created\n[LOCALES] id.json folder created\n[LOCALES] it.json folder created\n[LOCALES] ja.json folder created\n[LOCALES] ko.json folder created\n[LOCALES] nl.json folder created\n[LOCALES] pl.json folder created\n[LOCALES] pt-br.json folder created\n[LOCALES] ru.json folder created\n[LOCALES] sv.json folder created\n[LOCALES] th.json folder created\n[LOCALES] tr.json folder created\n[LOCALES] zh-tw.json folder created\n[LOCALES] sv.json file saved.\n[LOCALES] ja.json file saved.\n[LOCALES] pl.json file saved.\n[LOCALES] ko.json file saved.\n[LOCALES] es.json file saved.\n[LOCALES] zh-tw.json file saved.\n[LOCALES] de.json file saved.\n\u001b[91m[LOCALES] No remote translation found for nl.json using English\n\u001b[0m[LOCALES] nl.json file saved.\n[LOCALES] en.json file saved.\n[LOCALES] id.json file saved.\n[LOCALES] fr.json file saved.\n[LOCALES] it.json file saved.\n[LOCALES] pt-br.json file saved.\n[LOCALES] tr.json file saved.\n[LOCALES] ru.json file saved.\n[LOCALES] hi.json file saved.\n[LOCALES] th.json file saved.\n[LOCALES] Translations generated\n[BUILD] Building production version: 1.7.5\n[BUILD] React Map Compiled\nDone in 2.84s.\nRemoving intermediate container 600cdb6ca9b1\n ---> be94b499a38e\nSuccessfully built be94b499a38e\nSuccessfully tagged reactmap:latest\n","stderr":"","imageSize":744870720},"repair":{"violations":[{"name":"npmCacheCleanAfterInstall","position":{"start":16,"end":16,"columnStart":4,"columnEnd":23}},{"name":"apkAddUseNoCache","position":{"start":15,"end":15,"columnStart":4,"columnEnd":15}}],"repairedDockerfile":"## Simple Dockerfile to build ReactMap (main branch)\n# - Inside the container, the content of this git repo lives in /home/node/\n## You have to mount your configs into the container:\n# - mount local.json to /home/node/server/src/configs/local.json\n# - mount areas.json to /home/node/server/src/configs/areas.json\n# - Also mount every other configuration file necessary into the according directory.\n\nFROM node:16-alpine\n\nENV NPM_CONFIG_PREFIX=/home/node/.npm-global\nENV PATH=$PATH:/home/node/.npm-global/bin\n\nWORKDIR /home/node\nCOPY package.json .\nCOPY yarn.lock .\nRUN apk add --no-cache git\nRUN npm install -g yarn\nCOPY . .\nRUN yarn install --ignore-optional\nRUN yarn build\n"},"repairedBuild":{"startTimestamp":1672645895568,"endTimestamp":1672646013728,"error":null,"stdout":"Sending build context to Docker daemon  5.528MB\r\r\nStep 1/11 : FROM node:16-alpine\n ---> 610c0494e820\nStep 2/11 : ENV NPM_CONFIG_PREFIX=/home/node/.npm-global\n ---> Running in 77277035231c\nRemoving intermediate container 77277035231c\n ---> d64bec0f0c02\nStep 3/11 : ENV PATH=$PATH:/home/node/.npm-global/bin\n ---> Running in 2ca90ce92700\nRemoving intermediate container 2ca90ce92700\n ---> 779c9cf30828\nStep 4/11 : WORKDIR /home/node\n ---> Running in 53a9f1faf504\nRemoving intermediate container 53a9f1faf504\n ---> d08248bbd7a7\nStep 5/11 : COPY package.json .\n ---> 59f4fe5ced37\nStep 6/11 : COPY yarn.lock .\n ---> 2a8828e78455\nStep 7/11 : RUN apk add --no-cache git\n ---> Running in 77fbbb7caea7\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/7) Installing ca-certificates (20220614-r3)\n(2/7) Installing brotli-libs (1.0.9-r9)\n(3/7) Installing nghttp2-libs (1.51.0-r0)\n(4/7) Installing libcurl (7.87.0-r0)\n(5/7) Installing libexpat (2.5.0-r0)\n(6/7) Installing pcre2 (10.42-r0)\n(7/7) Installing git (2.38.2-r0)\nExecuting busybox-1.35.0-r29.trigger\nExecuting ca-certificates-20220614-r3.trigger\nOK: 18 MiB in 24 packages\nRemoving intermediate container 77fbbb7caea7\n ---> dd385667a453\nStep 8/11 : RUN npm install -g yarn\n ---> Running in 15764a2d17c2\n\nadded 1 package, and audited 2 packages in 713ms\n\nfound 0 vulnerabilities\n\u001b[91mnpm \u001b[0m\u001b[91mnotice \n\u001b[0m\u001b[91mnpm notice\u001b[0m\u001b[91m New major version of npm available! 8.19.3 -> 9.2.0\nnpm notice\u001b[0m\u001b[91m Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm\u001b[0m\u001b[91m notice\u001b[0m\u001b[91m Run `npm install -g npm@9.2.0` to update!\nnpm notice\u001b[0m\u001b[91m \n\u001b[0mRemoving intermediate container 15764a2d17c2\n ---> 361709b775f6\nStep 9/11 : COPY . .\n ---> 460297e5e366\nStep 10/11 : RUN yarn install --ignore-optional\n ---> Running in b13fcab3111e\nyarn install v1.22.19\n[1/5] Validating package.json...\n[2/5] Resolving packages...\n[3/5] Fetching packages...\n[4/5] Linking dependencies...\n\u001b[91mwarning \" > passport-telegram-official@2.0.1\" has incorrect peer dependency \"passport@^0.4.1\".\n\u001b[0m[5/5] Building fresh packages...\nDone in 27.51s.\nRemoving intermediate container b13fcab3111e\n ---> 2d8d95a662db\nStep 11/11 : RUN yarn build\n ---> Running in 8d00f3324c9e\nyarn run v1.22.19\n$ yarn create-locales && node esbuild.config.js\n$ node server/scripts/createLocales.js\n\u001b[91mMissing scanner database config! \nCheck to make sure you have SCANNER_DB_HOST,SCANNER_DB_PORT, SCANNER_DB_NAME, SCANNER_DB_USERNAME, and SCANNER_DB_PASSWORD\n\u001b[0mMissing ReactMap specific table, attempting to use the manual database instead.\n\u001b[91mMissing manual database config! \nCheck to make sure you have MANUAL_DB_HOST,MANUAL_DB_PORT, MANUAL_DB_NAME, MANUAL_DB_USERNAME, and MANUAL_DB_PASSWORD\nMissing, MAP_GENERAL_START_LAT OR MAP_GENERAL_START_LON\nYou will be able to proceed but you should add these values to your docker-compose file\n\u001b[0m\u001b[91m[CONFIG] No authentication strategies enabled, adding the following perms to alwaysEnabledPerms array:\n [\n  'map',             'pokemon',\n  'iv',              'pvp',\n  'gyms',            'raids',\n  'pokestops',       'quests',\n  'lures',           'portals',\n  'submissionCells', 'invasions',\n  'nests',           'scanAreas',\n  'weather',         'spawnpoints',\n  'scanCells',       'devices',\n  'donor',           'gymBadges'\n]\n\u001b[0m[LOCALES] locales folder created\n[LOCALES] de.json folder created\n[LOCALES] en.json folder created\n[LOCALES] es.json folder created\n[LOCALES] fr.json folder created\n[LOCALES] hi.json folder created\n[LOCALES] id.json folder created\n[LOCALES] it.json folder created\n[LOCALES] ja.json folder created\n[LOCALES] ko.json folder created\n[LOCALES] nl.json folder created\n[LOCALES] pl.json folder created\n[LOCALES] pt-br.json folder created\n[LOCALES] ru.json folder created\n[LOCALES] sv.json folder created\n[LOCALES] th.json folder created\n[LOCALES] tr.json folder created\n[LOCALES] zh-tw.json folder created\n[LOCALES] en.json file saved.\n[LOCALES] de.json file saved.\n[LOCALES] id.json file saved.\n[LOCALES] ko.json file saved.\n[LOCALES] es.json file saved.\n[LOCALES] zh-tw.json file saved.\n[LOCALES] sv.json file saved.\n[LOCALES] it.json file saved.\n[LOCALES] ja.json file saved.\n[LOCALES] fr.json file saved.\n[LOCALES] pt-br.json file saved.\n\u001b[91m[LOCALES] No remote translation found for nl.json using English\n\u001b[0m[LOCALES] nl.json file saved.\n[LOCALES] pl.json file saved.\n[LOCALES] tr.json file saved.\n[LOCALES] th.json file saved.\n[LOCALES] hi.json file saved.\n[LOCALES] ru.json file saved.\n[LOCALES] Translations generated\n[BUILD] Building production version: 1.7.5\n[BUILD] React Map Compiled\nDone in 2.81s.\nRemoving intermediate container 8d00f3324c9e\n ---> 4bb9bdbcd569\nSuccessfully built 4bb9bdbcd569\nSuccessfully tagged reactmap:latest\n","stderr":"","imageSize":742287849},"endTime":1672646015084}