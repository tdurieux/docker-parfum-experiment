{"repository":"https://github.com/coder/deploy-code-server","dockerfilePath":"Dockerfile","startTime":1672084115352,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/coder/deploy-code-server'...\n","error":null,"commit":"4738acd5c51f216979fa8f8e89cab8e81d4ba92c"},"originalBuild":{"startTimestamp":1672084117194,"endTimestamp":1672084196502,"error":null,"stdout":"Sending build context to Docker daemon   32.3MB\r\r\nStep 1/11 : FROM codercom/code-server:4.9.0\n4.9.0: Pulling from codercom/code-server\nf2f58072e9ed: Already exists\nded8ad9df582: Pulling fs layer\n8d037de38c7b: Pulling fs layer\n24c9b517d995: Pulling fs layer\nd6577fe0c14e: Pulling fs layer\n2afc2d1bd979: Pulling fs layer\n6b929fc9b488: Pulling fs layer\n4f4fb700ef54: Pulling fs layer\n4f4fb700ef54: Waiting\n6b929fc9b488: Waiting\nd6577fe0c14e: Waiting\n2afc2d1bd979: Waiting\n24c9b517d995: Verifying Checksum\n24c9b517d995: Download complete\n8d037de38c7b: Verifying Checksum\n8d037de38c7b: Download complete\n2afc2d1bd979: Verifying Checksum\n2afc2d1bd979: Download complete\nd6577fe0c14e: Verifying Checksum\nd6577fe0c14e: Download complete\n4f4fb700ef54: Verifying Checksum\n4f4fb700ef54: Download complete\n6b929fc9b488: Verifying Checksum\n6b929fc9b488: Download complete\nded8ad9df582: Verifying Checksum\nded8ad9df582: Download complete\nded8ad9df582: Pull complete\n8d037de38c7b: Pull complete\n24c9b517d995: Pull complete\nd6577fe0c14e: Pull complete\n2afc2d1bd979: Pull complete\n6b929fc9b488: Pull complete\n4f4fb700ef54: Pull complete\nDigest: sha256:36a802d2ff2d78c287603133dc305ddbbd68a608f52800feee42294eb0eb1f68\nStatus: Downloaded newer image for codercom/code-server:4.9.0\n ---> 575d56268625\nStep 2/11 : USER coder\n ---> Running in eab30bcbe470\nRemoving intermediate container eab30bcbe470\n ---> 2c30b6b7a86b\nStep 3/11 : COPY deploy-container/settings.json .local/share/code-server/User/settings.json\n ---> 727a37494f3a\nStep 4/11 : ENV SHELL=/bin/bash\n ---> Running in 43d0144512f0\nRemoving intermediate container 43d0144512f0\n ---> 2b4f8695692e\nStep 5/11 : RUN sudo apt-get update && sudo apt-get install unzip -y\n ---> Running in 0d4fad9fea00\nGet:1 http://deb.debian.org/debian bullseye InRelease [116 kB]\nGet:2 http://deb.debian.org/debian-security bullseye-security InRelease [48.4 kB]\nGet:3 http://deb.debian.org/debian bullseye-updates InRelease [44.1 kB]\nGet:4 http://deb.debian.org/debian bullseye/main amd64 Packages [8,183 kB]\nGet:5 http://deb.debian.org/debian-security bullseye-security/main amd64 Packages [210 kB]\nGet:6 http://deb.debian.org/debian bullseye-updates/main amd64 Packages [14.6 kB]\nFetched 8,616 kB in 2s (5,177 kB/s)\nReading package lists...\nReading package lists...\nBuilding dependency tree...\nReading state information...\nSuggested packages:\n  zip\nThe following NEW packages will be installed:\n  unzip\n0 upgraded, 1 newly installed, 0 to remove and 4 not upgraded.\nNeed to get 172 kB of archives.\nAfter this operation, 393 kB of additional disk space will be used.\nGet:1 http://deb.debian.org/debian bullseye/main amd64 unzip amd64 6.0-26+deb11u1 [172 kB]\n\u001b[91mdebconf: delaying package configuration, since apt-utils is not installed\n\u001b[0mFetched 172 kB in 0s (7,876 kB/s)\nSelecting previously unselected package unzip.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 23658 files and directories currently installed.)\r\nPreparing to unpack .../unzip_6.0-26+deb11u1_amd64.deb ...\r\nUnpacking unzip (6.0-26+deb11u1) ...\r\nSetting up unzip (6.0-26+deb11u1) ...\r\nProcessing triggers for man-db (2.9.4-2) ...\r\nRemoving intermediate container 0d4fad9fea00\n ---> c7d3cbab5b44\nStep 6/11 : RUN curl https://rclone.org/install.sh | sudo bash\n ---> Running in fb81a1d8dcd9\n\u001b[91m  % Total    % Received % Xferd\u001b[0m\u001b[91m  Average Speed   Time    Time     Ti\u001b[0m\u001b[91mme  Cur\u001b[0m\u001b[91mrent\n  \u001b[0m\u001b[91m      \u001b[0m\u001b[91m   \u001b[0m\u001b[91m             \u001b[0m\u001b[91m   \u001b[0m\u001b[91m   \u001b[0m\u001b[91m   Dlo\u001b[0m\u001b[91mad  Upload\u001b[0m\u001b[91m   T\u001b[0m\u001b[91mot\u001b[0m\u001b[91ma\u001b[0m\u001b[91ml   Spent    L\u001b[0m\u001b[91meft  S\u001b[0m\u001b[91mpe\u001b[0m\u001b[91med\n\u001b[0m\u001b[91m\r\u001b[0m\u001b[91m  \u001b[0m\u001b[91m0     0    0\u001b[0m\u001b[91m     0 \u001b[0m\u001b[91m  \u001b[0m\u001b[91m 0   \u001b[0m\u001b[91m  0\u001b[0m\u001b[91m      0   \u001b[0m\u001b[91m   0 --:--:-- --:--:-- --:\u001b[0m\u001b[91m--:-\u001b[0m\u001b[91m-  \u001b[0m\u001b[91m   0\u001b[0m\u001b[91m\r100  4669  100  4669\u001b[0m\u001b[91m    0     0  35641\u001b[0m\u001b[91m      0 \u001b[0m\u001b[91m--:--:\u001b[0m\u001b[91m-- \u001b[0m\u001b[91m--:--:--\u001b[0m\u001b[91m -\u001b[0m\u001b[91m-:\u001b[0m\u001b[91m--:\u001b[0m\u001b[91m--\u001b[0m\u001b[91m 3\u001b[0m\u001b[91m564\u001b[0m\u001b[91m1\n\u001b[0mArchive:  rclone-current-linux-amd64.zip\n   creating: tmp_unzip_dir_for_rclone/rclone-v1.61.1-linux-amd64/\n  inflating: tmp_unzip_dir_for_rclone/rclone-v1.61.1-linux-amd64/README.html  [text]  \n  inflating: tmp_unzip_dir_for_rclone/rclone-v1.61.1-linux-amd64/rclone  [binary]\n  inflating: tmp_unzip_dir_for_rclone/rclone-v1.61.1-linux-amd64/README.txt  [text]  \n  inflating: tmp_unzip_dir_for_rclone/rclone-v1.61.1-linux-amd64/rclone.1  [text]  \n  inflating: tmp_unzip_dir_for_rclone/rclone-v1.61.1-linux-amd64/git-log.txt  [text]  \n\u001b[91mUpdating index cache for path `/usr/local/man/man1'. Wait...\n\u001b[0mPurging old database entries in /usr/share/man...\nProcessing manual pages under /usr/share/man...\nPurging old database entries in /usr/share/man/cs...\nProcessing manual pages under /usr/share/man/cs...\nPurging old database entries in /usr/share/man/zh_CN...\nProcessing manual pages under /usr/share/man/zh_CN...\nPurging old database entries in /usr/share/man/de...\nProcessing manual pages under /usr/share/man/de...\nPurging old database entries in /usr/share/man/nl...\nProcessing manual pages under /usr/share/man/nl...\nPurging old database entries in /usr/share/man/tr...\nProcessing manual pages under /usr/share/man/tr...\nPurging old database entries in /usr/share/man/sl...\nProcessing manual pages under /usr/share/man/sl...\nPurging old database entries in /usr/share/man/pt_BR...\nProcessing manual pages under /usr/share/man/pt_BR...\nPurging old database entries in /usr/share/man/fi...\nProcessing manual pages under /usr/share/man/fi...\nPurging old database entries in /usr/share/man/ru...\nProcessing manual pages under /usr/share/man/ru...\nPurging old database entries in /usr/share/man/it...\nProcessing manual pages under /usr/share/man/it...\nPurging old database entries in /usr/share/man/fr...\nProcessing manual pages under /usr/share/man/fr...\nPurging old database entries in /usr/share/man/ja...\nProcessing manual pages under /usr/share/man/ja...\nPurging old database entries in /usr/share/man/pl...\nProcessing manual pages under /usr/share/man/pl...\nPurging old database entries in /usr/share/man/es...\nProcessing manual pages under /usr/share/man/es...\nPurging old database entries in /usr/share/man/da...\nProcessing manual pages under /usr/share/man/da...\nPurging old database entries in /usr/share/man/zh_TW...\nProcessing manual pages under /usr/share/man/zh_TW...\nPurging old database entries in /usr/share/man/ko...\nProcessing manual pages under /usr/share/man/ko...\nPurging old database entries in /usr/share/man/pt...\nProcessing manual pages under /usr/share/man/pt...\nPurging old database entries in /usr/share/man/sv...\nProcessing manual pages under /usr/share/man/sv...\nPurging old database entries in /usr/share/man/hu...\nProcessing manual pages under /usr/share/man/hu...\nPurging old database entries in /usr/share/man/id...\nProcessing manual pages under /usr/share/man/id...\nPurging old database entries in /usr/share/man/ro...\nProcessing manual pages under /usr/share/man/ro...\nPurging old database entries in /usr/share/man/uk...\nProcessing manual pages under /usr/share/man/uk...\nPurging old database entries in /usr/share/man/sr...\nProcessing manual pages under /usr/share/man/sr...\nProcessing manual pages under /usr/local/man...\n\u001b[91mdone.\n\u001b[0mChecking for stray cats under /usr/local/man...\nChecking for stray cats under /var/cache/man/oldlocal...\n1 man subdirectory contained newer manual pages.\n1 manual page was added.\n0 stray cats were added.\n1 old database entry was purged.\n\nrclone v1.61.1 has successfully installed.\nNow run \"rclone config\" for setup. Check https://rclone.org/docs/ for more details.\n\nRemoving intermediate container fb81a1d8dcd9\n ---> a7d7e9e7da49\nStep 7/11 : COPY deploy-container/rclone-tasks.json /tmp/rclone-tasks.json\n ---> 44fafcc58dfb\nStep 8/11 : RUN sudo chown -R coder:coder /home/coder/.local\n ---> Running in e148e9c864d0\nRemoving intermediate container e148e9c864d0\n ---> 07c260be6a1c\nStep 9/11 : ENV PORT=8080\n ---> Running in 80aff578b1e1\nRemoving intermediate container 80aff578b1e1\n ---> 345cf246b507\nStep 10/11 : COPY deploy-container/entrypoint.sh /usr/bin/deploy-container-entrypoint.sh\n ---> 6cda75efe7f3\nStep 11/11 : ENTRYPOINT [\"/usr/bin/deploy-container-entrypoint.sh\"]\n ---> Running in 606134a56d41\nRemoving intermediate container 606134a56d41\n ---> 16f4f2f54648\nSuccessfully built 16f4f2f54648\nSuccessfully tagged deploy-code-server:latest\n","stderr":"","imageSize":882774243},"repair":{"violations":[{"name":"curlUseFlagF","position":{"start":13,"end":13,"columnStart":4,"columnEnd":38}},{"name":"ruleAptGetInstallUseNoRec","position":{"start":12,"end":12,"columnStart":32,"columnEnd":56}},{"name":"ruleAptGetInstallThenRemoveAptLists","position":{"start":12,"end":12,"columnStart":32,"columnEnd":56}}],"repairedDockerfile":"# Start from the code-server Debian base image\nFROM codercom/code-server:4.9.0\n\nUSER coder\n\n# Apply VS Code settings\nCOPY deploy-container/settings.json .local/share/code-server/User/settings.json\n\n# Use bash shell\nENV SHELL=/bin/bash\n\n# Install unzip + rclone (support for remote filesystem)\nRUN sudo apt-get update && sudo apt-get install --no-install-recommends unzip -y\nRUN curl -f https://rclone.org/install.sh | sudo bash\n\n# Copy rclone tasks to /tmp, to potentially be used\nCOPY deploy-container/rclone-tasks.json /tmp/rclone-tasks.json\n\n# Fix permissions for code-server\nRUN sudo chown -R coder:coder /home/coder/.local\n\n# You can add custom software and dependencies for your environment below\n# -----------\n\n# Install a VS Code extension:\n# Note: we use a different marketplace than VS Code. See https://github.com/cdr/code-server/blob/main/docs/FAQ.md#differences-compared-to-vs-code\n# RUN code-server --install-extension esbenp.prettier-vscode\n\n# Install apt packages:\n# RUN sudo apt-get install -y ubuntu-make\n\n# Copy files:\n# COPY deploy-container/myTool /home/coder/myTool\n\n# -----------\n\n# Port\nENV PORT=8080\n\n# Use our custom entrypoint script first\nCOPY deploy-container/entrypoint.sh /usr/bin/deploy-container-entrypoint.sh\nENTRYPOINT [\"/usr/bin/deploy-container-entrypoint.sh\"]\n"},"repairedBuild":{"startTimestamp":1672084197023,"endTimestamp":1672084221498,"error":null,"stdout":"Sending build context to Docker daemon   32.3MB\r\r\nStep 1/11 : FROM codercom/code-server:4.9.0\n ---> 575d56268625\nStep 2/11 : USER coder\n ---> Running in 6af7ee0af153\nRemoving intermediate container 6af7ee0af153\n ---> b2494dcb7e16\nStep 3/11 : COPY deploy-container/settings.json .local/share/code-server/User/settings.json\n ---> bab02a4ef18b\nStep 4/11 : ENV SHELL=/bin/bash\n ---> Running in 2a903207b2af\nRemoving intermediate container 2a903207b2af\n ---> 133c590e99b3\nStep 5/11 : RUN sudo apt-get update && sudo apt-get install --no-install-recommends unzip -y\n ---> Running in 2ef4960a878f\nGet:1 http://deb.debian.org/debian bullseye InRelease [116 kB]\nGet:2 http://deb.debian.org/debian-security bullseye-security InRelease [48.4 kB]\nGet:3 http://deb.debian.org/debian bullseye-updates InRelease [44.1 kB]\nGet:4 http://deb.debian.org/debian bullseye/main amd64 Packages [8,183 kB]\nGet:5 http://deb.debian.org/debian-security bullseye-security/main amd64 Packages [210 kB]\nGet:6 http://deb.debian.org/debian bullseye-updates/main amd64 Packages [14.6 kB]\nFetched 8,616 kB in 1s (6,309 kB/s)\nReading package lists...\nReading package lists...\nBuilding dependency tree...\nReading state information...\nSuggested packages:\n  zip\nThe following NEW packages will be installed:\n  unzip\n0 upgraded, 1 newly installed, 0 to remove and 4 not upgraded.\nNeed to get 172 kB of archives.\nAfter this operation, 393 kB of additional disk space will be used.\nGet:1 http://deb.debian.org/debian bullseye/main amd64 unzip amd64 6.0-26+deb11u1 [172 kB]\n\u001b[91mdebconf: delaying package configuration, since apt-utils is not installed\n\u001b[0mFetched 172 kB in 0s (4,419 kB/s)\nSelecting previously unselected package unzip.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 23658 files and directories currently installed.)\r\nPreparing to unpack .../unzip_6.0-26+deb11u1_amd64.deb ...\r\nUnpacking unzip (6.0-26+deb11u1) ...\r\nSetting up unzip (6.0-26+deb11u1) ...\r\nProcessing triggers for man-db (2.9.4-2) ...\r\nRemoving intermediate container 2ef4960a878f\n ---> fb202e9e53e8\nStep 6/11 : RUN curl -f https://rclone.org/install.sh | sudo bash\n ---> Running in 4a7b8e52e2f0\n\u001b[91m  % Total    % Received % Xferd\u001b[0m\u001b[91m  Average \u001b[0m\u001b[91mSpeed   Tim\u001b[0m\u001b[91me    Time     T\u001b[0m\u001b[91mime  Curr\u001b[0m\u001b[91ment\n     \u001b[0m\u001b[91m    \u001b[0m\u001b[91m      \u001b[0m\u001b[91m   \u001b[0m\u001b[91m             \u001b[0m\u001b[91m  Dload  \u001b[0m\u001b[91mUpload  \u001b[0m\u001b[91m Total   S\u001b[0m\u001b[91mpent   \u001b[0m\u001b[91m Left  Speed\u001b[0m\u001b[91m\n\r\u001b[0m\u001b[91m  0\u001b[0m\u001b[91m     0\u001b[0m\u001b[91m    0     0    \u001b[0m\u001b[91m0  \u001b[0m\u001b[91m   \u001b[0m\u001b[91m0  \u001b[0m\u001b[91m  \u001b[0m\u001b[91m  0      0 --:-\u001b[0m\u001b[91m-:-- -\u001b[0m\u001b[91m-:--:-- --:\u001b[0m\u001b[91m--:--  \u001b[0m\u001b[91m   0\u001b[0m\u001b[91m\r100  4669  100  4669  \u001b[0m\u001b[91m  0     0  48134    \u001b[0m\u001b[91m  0 -\u001b[0m\u001b[91m-:-\u001b[0m\u001b[91m-:-- --:--:-- \u001b[0m\u001b[91m--:--\u001b[0m\u001b[91m:-- 48\u001b[0m\u001b[91m635\n\u001b[0mArchive:  rclone-current-linux-amd64.zip\n   creating: tmp_unzip_dir_for_rclone/rclone-v1.61.1-linux-amd64/\n  inflating: tmp_unzip_dir_for_rclone/rclone-v1.61.1-linux-amd64/README.html  [text]  \n  inflating: tmp_unzip_dir_for_rclone/rclone-v1.61.1-linux-amd64/rclone  [binary]\n  inflating: tmp_unzip_dir_for_rclone/rclone-v1.61.1-linux-amd64/README.txt  [text]  \n  inflating: tmp_unzip_dir_for_rclone/rclone-v1.61.1-linux-amd64/rclone.1  [text]  \n  inflating: tmp_unzip_dir_for_rclone/rclone-v1.61.1-linux-amd64/git-log.txt  [text]  \n\u001b[91mUpdating index cache for path `/usr/local/man/man1'. Wait...\n\u001b[0mPurging old database entries in /usr/share/man...\nProcessing manual pages under /usr/share/man...\nPurging old database entries in /usr/share/man/cs...\nProcessing manual pages under /usr/share/man/cs...\nPurging old database entries in /usr/share/man/zh_CN...\nProcessing manual pages under /usr/share/man/zh_CN...\nPurging old database entries in /usr/share/man/de...\nProcessing manual pages under /usr/share/man/de...\nPurging old database entries in /usr/share/man/nl...\nProcessing manual pages under /usr/share/man/nl...\nPurging old database entries in /usr/share/man/tr...\nProcessing manual pages under /usr/share/man/tr...\nPurging old database entries in /usr/share/man/sl...\nProcessing manual pages under /usr/share/man/sl...\nPurging old database entries in /usr/share/man/pt_BR...\nProcessing manual pages under /usr/share/man/pt_BR...\nPurging old database entries in /usr/share/man/fi...\nProcessing manual pages under /usr/share/man/fi...\nPurging old database entries in /usr/share/man/ru...\nProcessing manual pages under /usr/share/man/ru...\nPurging old database entries in /usr/share/man/it...\nProcessing manual pages under /usr/share/man/it...\nPurging old database entries in /usr/share/man/fr...\nProcessing manual pages under /usr/share/man/fr...\nPurging old database entries in /usr/share/man/ja...\nProcessing manual pages under /usr/share/man/ja...\nPurging old database entries in /usr/share/man/pl...\nProcessing manual pages under /usr/share/man/pl...\nPurging old database entries in /usr/share/man/es...\nProcessing manual pages under /usr/share/man/es...\nPurging old database entries in /usr/share/man/da...\nProcessing manual pages under /usr/share/man/da...\nPurging old database entries in /usr/share/man/zh_TW...\nProcessing manual pages under /usr/share/man/zh_TW...\nPurging old database entries in /usr/share/man/ko...\nProcessing manual pages under /usr/share/man/ko...\nPurging old database entries in /usr/share/man/pt...\nProcessing manual pages under /usr/share/man/pt...\nPurging old database entries in /usr/share/man/sv...\nProcessing manual pages under /usr/share/man/sv...\nPurging old database entries in /usr/share/man/hu...\nProcessing manual pages under /usr/share/man/hu...\nPurging old database entries in /usr/share/man/id...\nProcessing manual pages under /usr/share/man/id...\nPurging old database entries in /usr/share/man/ro...\nProcessing manual pages under /usr/share/man/ro...\nPurging old database entries in /usr/share/man/uk...\nProcessing manual pages under /usr/share/man/uk...\nPurging old database entries in /usr/share/man/sr...\nProcessing manual pages under /usr/share/man/sr...\nProcessing manual pages under /usr/local/man...\n\u001b[91mdone.\n\u001b[0mChecking for stray cats under /usr/local/man...\nChecking for stray cats under /var/cache/man/oldlocal...\n1 man subdirectory contained newer manual pages.\n1 manual page was added.\n0 stray cats were added.\n1 old database entry was purged.\n\nrclone v1.61.1 has successfully installed.\nNow run \"rclone config\" for setup. Check https://rclone.org/docs/ for more details.\n\nRemoving intermediate container 4a7b8e52e2f0\n ---> 86c6a4b1ef08\nStep 7/11 : COPY deploy-container/rclone-tasks.json /tmp/rclone-tasks.json\n ---> a19b844e6c4d\nStep 8/11 : RUN sudo chown -R coder:coder /home/coder/.local\n ---> Running in 6d69f88b5c64\nRemoving intermediate container 6d69f88b5c64\n ---> 50705e73f8b5\nStep 9/11 : ENV PORT=8080\n ---> Running in 1785d4bd7c95\nRemoving intermediate container 1785d4bd7c95\n ---> 54c5955d7f46\nStep 10/11 : COPY deploy-container/entrypoint.sh /usr/bin/deploy-container-entrypoint.sh\n ---> 62706ffae1d5\nStep 11/11 : ENTRYPOINT [\"/usr/bin/deploy-container-entrypoint.sh\"]\n ---> Running in f3bbf00de52a\nRemoving intermediate container f3bbf00de52a\n ---> 73a1b3874eac\nSuccessfully built 73a1b3874eac\nSuccessfully tagged deploy-code-server:latest\n","stderr":"","imageSize":882774267},"endTime":1672084221806}