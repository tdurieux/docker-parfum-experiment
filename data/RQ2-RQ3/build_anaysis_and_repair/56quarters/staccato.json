{"repository":"https://github.com/56quarters/staccato","dockerfilePath":"Dockerfile","startTime":1672545577991,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/56quarters/staccato'...\n","error":null,"commit":"5533ee2c1e61dc782cd944448ef7ca63cadc4d5e"},"originalBuild":{"startTimestamp":1672545578959,"endTimestamp":1672545713970,"error":null,"stdout":"Sending build context to Docker daemon  74.75kB\r\r\nStep 1/9 : FROM rust:slim AS build\nslim: Pulling from library/rust\n3f4ca61aafcd: Already exists\n765bc84ec3e0: Pulling fs layer\n765bc84ec3e0: Verifying Checksum\n765bc84ec3e0: Download complete\n765bc84ec3e0: Pull complete\nDigest: sha256:2bcbf9c3c854168ce803d8cec4301778bdf360df7bc0bd4196b3ad71567288f9\nStatus: Downloaded newer image for rust:slim\n ---> f3b18f1fa3b8\nStep 2/9 : WORKDIR /usr/src/staccato\n ---> Running in 739ac79108a1\nRemoving intermediate container 739ac79108a1\n ---> f6ce8ee21e4b\nStep 3/9 : RUN apt-get update     && apt-get install -y musl-tools     && rustup target add x86_64-unknown-linux-musl\n ---> Running in c9fff55db26d\nGet:1 http://deb.debian.org/debian bullseye InRelease [116 kB]\nGet:2 http://deb.debian.org/debian-security bullseye-security InRelease [48.4 kB]\nGet:3 http://deb.debian.org/debian bullseye-updates InRelease [44.1 kB]\nGet:4 http://deb.debian.org/debian bullseye/main amd64 Packages [8183 kB]\nGet:5 http://deb.debian.org/debian-security bullseye-security/main amd64 Packages [210 kB]\nGet:6 http://deb.debian.org/debian bullseye-updates/main amd64 Packages [14.6 kB]\nFetched 8616 kB in 2s (5430 kB/s)\nReading package lists...\nReading package lists...\nBuilding dependency tree...\nReading state information...\nThe following additional packages will be installed:\n  musl musl-dev\nRecommended packages:\n  linux-musl-dev\nThe following NEW packages will be installed:\n  musl musl-dev musl-tools\n0 upgraded, 3 newly installed, 0 to remove and 0 not upgraded.\nNeed to get 1063 kB of archives.\nAfter this operation, 4240 kB of additional disk space will be used.\nGet:1 http://deb.debian.org/debian bullseye/main amd64 musl amd64 1.2.2-1 [418 kB]\nGet:2 http://deb.debian.org/debian bullseye/main amd64 musl-dev amd64 1.2.2-1 [604 kB]\nGet:3 http://deb.debian.org/debian bullseye/main amd64 musl-tools amd64 1.2.2-1 [41.7 kB]\n\u001b[91mdebconf: delaying package configuration, since apt-utils is not installed\n\u001b[0mFetched 1063 kB in 0s (21.5 MB/s)\nSelecting previously unselected package musl:amd64.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 9293 files and directories currently installed.)\r\nPreparing to unpack .../musl_1.2.2-1_amd64.deb ...\r\nUnpacking musl:amd64 (1.2.2-1) ...\r\nSelecting previously unselected package musl-dev:amd64.\r\nPreparing to unpack .../musl-dev_1.2.2-1_amd64.deb ...\r\nUnpacking musl-dev:amd64 (1.2.2-1) ...\r\nSelecting previously unselected package musl-tools.\r\nPreparing to unpack .../musl-tools_1.2.2-1_amd64.deb ...\r\nUnpacking musl-tools (1.2.2-1) ...\r\nSetting up musl:amd64 (1.2.2-1) ...\r\nSetting up musl-dev:amd64 (1.2.2-1) ...\r\nSetting up musl-tools (1.2.2-1) ...\r\n\u001b[91minfo: downloading component 'rust-std' for 'x86_64-unknown-linux-musl'\n\u001b[0m\u001b[91minfo: installing component 'rust-std' for 'x86_64-unknown-linux-musl'\n\u001b[0mRemoving intermediate container c9fff55db26d\n ---> 43f459de8131\nStep 4/9 : COPY . .\n ---> ce94589d668c\nStep 5/9 : RUN cargo build --release --target=x86_64-unknown-linux-musl     && strip --strip-debug target/x86_64-unknown-linux-musl/release/st\n ---> Running in 957064d3320d\n\u001b[91m    Updating crates.io index\n\u001b[0m\u001b[91m Downloading crates ...\n\u001b[0m\u001b[91m  Downloaded heck v0.3.1\n\u001b[0m\u001b[91m  Downloaded os_str_bytes v2.3.2\n\u001b[0m\u001b[91m  Downloaded vec_map v0.8.2\n\u001b[0m\u001b[91m  Downloaded libc v0.2.80\n\u001b[0m\u001b[91m  Downloaded version_check v0.9.2\n\u001b[0m\u001b[91m  Downloaded termcolor v1.1.0\n\u001b[0m\u001b[91m  Downloaded indexmap v1.6.0\n\u001b[0m\u001b[91m  Downloaded unicode-width v0.1.8\n\u001b[0m\u001b[91m  Downloaded clap v3.0.0-beta.2\n\u001b[0m\u001b[91m  Downloaded hashbrown v0.9.1\n\u001b[0m\u001b[91m  Downloaded clap_derive v3.0.0-beta.2\n\u001b[0m\u001b[91m  Downloaded textwrap v0.12.1\n\u001b[0m\u001b[91m  Downloaded syn v1.0.48\n\u001b[0m\u001b[91m  Downloaded unicode-segmentation v1.6.0\n\u001b[0m\u001b[91m  Downloaded proc-macro-error v1.0.4\n\u001b[0m\u001b[91m  Downloaded autocfg v1.0.1\n\u001b[0m\u001b[91m  Downloaded strsim v0.10.0\n\u001b[0m\u001b[91m  Downloaded unicode-xid v0.2.1\n\u001b[0m\u001b[91m  Downloaded proc-macro-error-attr v1.0.4\n\u001b[0m\u001b[91m  Downloaded bitflags v1.2.1\n\u001b[0m\u001b[91m  Downloaded quote v1.0.7\n\u001b[0m\u001b[91m  Downloaded atty v0.2.14\n\u001b[0m\u001b[91m  Downloaded proc-macro2 v1.0.24\n\u001b[0m\u001b[91m  Downloaded lazy_static v1.4.0\n\u001b[0m\u001b[91m   Compiling proc-macro2 v1.0.24\n\u001b[0m\u001b[91m   Compiling version_check v0.9.2\n\u001b[0m\u001b[91m   Compiling unicode-xid v0.2.1\n   Compiling syn v1.0.48\n\u001b[0m\u001b[91m   Compiling autocfg v1.0.1\n   Compiling libc v0.2.80\n   Compiling bitflags v1.2.1\n   Compiling unicode-segmentation v1.6.0\n\u001b[0m\u001b[91m   Compiling unicode-width v0.1.8\n\u001b[0m\u001b[91m   Compiling hashbrown v0.9.1\n\u001b[0m\u001b[91m   Compiling vec_map v0.8.2\n\u001b[0m\u001b[91m   Compiling termcolor v1.1.0\n\u001b[0m\u001b[91m   Compiling lazy_static v1.4.0\n\u001b[0m\u001b[91m   Compiling strsim v0.10.0\n\u001b[0m\u001b[91m   Compiling os_str_bytes v2.3.2\n\u001b[0m\u001b[91m   Compiling textwrap v0.12.1\n\u001b[0m\u001b[91m   Compiling indexmap v1.6.0\n\u001b[0m\u001b[91m   Compiling proc-macro-error-attr v1.0.4\n   \u001b[0m\u001b[91mCompiling proc-macro-error v1.0.4\n\u001b[0m\u001b[91m   Compiling heck v0.3.1\n\u001b[0m\u001b[91m   Compiling quote v1.0.7\n\u001b[0m\u001b[91m   Compiling atty v0.2.14\n\u001b[0m\u001b[91m   Compiling clap_derive v3.0.0-beta.2\n\u001b[0m\u001b[91m   Compiling clap v3.0.0-beta.2\n\u001b[0m\u001b[91m   Compiling staccato v0.1.9 (/usr/src/staccato)\n\u001b[0m\u001b[91m    Finished release [optimized] target(s) in 26.75s\n\u001b[0mRemoving intermediate container 957064d3320d\n ---> 84c8e93b6be9\nStep 6/9 : FROM scratch\n ---> \nStep 7/9 : COPY --from=build /usr/src/staccato/target/x86_64-unknown-linux-musl/release/st /bin/st\n ---> fa15ba8e2638\nStep 8/9 : ENTRYPOINT [\"/bin/st\"]\n ---> Running in 49b07b61777f\nRemoving intermediate container 49b07b61777f\n ---> 8992b43500bc\nStep 9/9 : CMD [\"--help\"]\n ---> Running in 8494c9e23fe3\nRemoving intermediate container 8494c9e23fe3\n ---> 4b3f56b74eaf\nSuccessfully built 4b3f56b74eaf\nSuccessfully tagged staccato:latest\n","stderr":"","imageSize":1122952},"repair":{"violations":[{"name":"ruleAptGetInstallUseNoRec","position":{"start":3,"end":3,"columnStart":7,"columnEnd":36}},{"name":"ruleAptGetInstallThenRemoveAptLists","position":{"start":3,"end":3,"columnStart":7,"columnEnd":36}}],"repairedDockerfile":"FROM rust:slim AS build\nWORKDIR /usr/src/staccato\nRUN apt-get update \\\n    && apt-get install --no-install-recommends -y musl-tools \\\n    && rustup target add x86_64-unknown-linux-musl\nCOPY . .\nRUN cargo build --release --target=x86_64-unknown-linux-musl \\\n    && strip --strip-debug target/x86_64-unknown-linux-musl/release/st\n\nFROM scratch\nCOPY --from=build /usr/src/staccato/target/x86_64-unknown-linux-musl/release/st /bin/st\nENTRYPOINT [\"/bin/st\"]\nCMD [\"--help\"]\n"},"repairedBuild":{"startTimestamp":1672545714247,"endTimestamp":1672545796039,"error":null,"stdout":"Sending build context to Docker daemon  74.75kB\r\r\nStep 1/9 : FROM rust:slim AS build\n ---> f3b18f1fa3b8\nStep 2/9 : WORKDIR /usr/src/staccato\n ---> Running in 102031ed294c\nRemoving intermediate container 102031ed294c\n ---> 87bcc14a58b7\nStep 3/9 : RUN apt-get update     && apt-get install --no-install-recommends -y musl-tools     && rustup target add x86_64-unknown-linux-musl\n ---> Running in a22812f18513\nGet:1 http://deb.debian.org/debian bullseye InRelease [116 kB]\nGet:2 http://deb.debian.org/debian-security bullseye-security InRelease [48.4 kB]\nGet:3 http://deb.debian.org/debian bullseye-updates InRelease [44.1 kB]\nGet:4 http://deb.debian.org/debian bullseye/main amd64 Packages [8183 kB]\nGet:5 http://deb.debian.org/debian-security bullseye-security/main amd64 Packages [210 kB]\nGet:6 http://deb.debian.org/debian bullseye-updates/main amd64 Packages [14.6 kB]\nFetched 8616 kB in 2s (5511 kB/s)\nReading package lists...\nReading package lists...\nBuilding dependency tree...\nReading state information...\nThe following additional packages will be installed:\n  musl musl-dev\nRecommended packages:\n  linux-musl-dev\nThe following NEW packages will be installed:\n  musl musl-dev musl-tools\n0 upgraded, 3 newly installed, 0 to remove and 0 not upgraded.\nNeed to get 1063 kB of archives.\nAfter this operation, 4240 kB of additional disk space will be used.\nGet:1 http://deb.debian.org/debian bullseye/main amd64 musl amd64 1.2.2-1 [418 kB]\nGet:2 http://deb.debian.org/debian bullseye/main amd64 musl-dev amd64 1.2.2-1 [604 kB]\nGet:3 http://deb.debian.org/debian bullseye/main amd64 musl-tools amd64 1.2.2-1 [41.7 kB]\n\u001b[91mdebconf: delaying package configuration, since apt-utils is not installed\n\u001b[0mFetched 1063 kB in 0s (34.1 MB/s)\nSelecting previously unselected package musl:amd64.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 9293 files and directories currently installed.)\r\nPreparing to unpack .../musl_1.2.2-1_amd64.deb ...\r\nUnpacking musl:amd64 (1.2.2-1) ...\r\nSelecting previously unselected package musl-dev:amd64.\r\nPreparing to unpack .../musl-dev_1.2.2-1_amd64.deb ...\r\nUnpacking musl-dev:amd64 (1.2.2-1) ...\r\nSelecting previously unselected package musl-tools.\r\nPreparing to unpack .../musl-tools_1.2.2-1_amd64.deb ...\r\nUnpacking musl-tools (1.2.2-1) ...\r\nSetting up musl:amd64 (1.2.2-1) ...\r\nSetting up musl-dev:amd64 (1.2.2-1) ...\r\nSetting up musl-tools (1.2.2-1) ...\r\n\u001b[91minfo: downloading component 'rust-std' for 'x86_64-unknown-linux-musl'\n\u001b[0m\u001b[91minfo: installing component 'rust-std' for 'x86_64-unknown-linux-musl'\n\u001b[0mRemoving intermediate container a22812f18513\n ---> e5d59baadbcf\nStep 4/9 : COPY . .\n ---> c22307f2db9c\nStep 5/9 : RUN cargo build --release --target=x86_64-unknown-linux-musl     && strip --strip-debug target/x86_64-unknown-linux-musl/release/st\n ---> Running in a7e0c267f481\n\u001b[91m    Updating crates.io index\n\u001b[0m\u001b[91m Downloading crates ...\n\u001b[0m\u001b[91m  Downloaded atty v0.2.14\n\u001b[0m\u001b[91m  Downloaded unicode-xid v0.2.1\n\u001b[0m\u001b[91m  Downloaded autocfg v1.0.1\n\u001b[0m\u001b[91m  Downloaded bitflags v1.2.1\n\u001b[0m\u001b[91m  Downloaded proc-macro2 v1.0.24\n\u001b[0m\u001b[91m  Downloaded quote v1.0.7\n\u001b[0m\u001b[91m  Downloaded unicode-width v0.1.8\n\u001b[0m\u001b[91m  Downloaded proc-macro-error-attr v1.0.4\n\u001b[0m\u001b[91m  Downloaded vec_map v0.8.2\n\u001b[0m\u001b[91m  Downloaded lazy_static v1.4.0\n\u001b[0m\u001b[91m  Downloaded libc v0.2.80\n\u001b[0m\u001b[91m  Downloaded version_check v0.9.2\n\u001b[0m\u001b[91m  Downloaded textwrap v0.12.1\n\u001b[0m\u001b[91m  Downloaded termcolor v1.1.0\n\u001b[0m\u001b[91m  Downloaded os_str_bytes v2.3.2\n\u001b[0m\u001b[91m  Downloaded syn v1.0.48\n\u001b[0m\u001b[91m  Downloaded unicode-segmentation v1.6.0\n\u001b[0m\u001b[91m  Downloaded strsim v0.10.0\n\u001b[0m\u001b[91m  Downloaded heck v0.3.1\n\u001b[0m\u001b[91m  Downloaded clap_derive v3.0.0-beta.2\n\u001b[0m\u001b[91m  Downloaded clap v3.0.0-beta.2\n\u001b[0m\u001b[91m  Downloaded hashbrown v0.9.1\n\u001b[0m\u001b[91m  Downloaded proc-macro-error v1.0.4\n\u001b[0m\u001b[91m  Downloaded indexmap v1.6.0\n\u001b[0m\u001b[91m   Compiling proc-macro2 v1.0.24\n   Compiling version_check v0.9.2\n\u001b[0m\u001b[91m   Compiling unicode-xid v0.2.\u001b[0m\u001b[91m1\n\u001b[0m\u001b[91m   Compiling syn v1.0.48\n   Compiling autocfg v1.0.1\n   Compiling libc v0.2.80\n   Compiling unicode-segmentation v1.6.0\n\u001b[0m\u001b[91m   Compiling bitflags v1.2.1\n\u001b[0m\u001b[91m   Compiling hashbrown v0.9.1\n\u001b[0m\u001b[91m   Compiling unicode-width v0.1.8\n   Compiling vec_map v0.8.2\n   Compiling lazy_static v1.4.0\n\u001b[0m\u001b[91m   Compiling strsim v0.10.0\n\u001b[0m\u001b[91m   Compiling termcolor v1.1.0\n\u001b[0m\u001b[91m   Compiling os_str_bytes v2.3.2\n\u001b[0m\u001b[91m   Compiling textwrap v0.12.1\n\u001b[0m\u001b[91m   Compiling proc-macro-error-attr v1.0.4\n\u001b[0m\u001b[91m   Compiling proc-macro-error v1.0.4\u001b[0m\u001b[91m\n\u001b[0m\u001b[91m   Compiling indexmap v1.6.0\n\u001b[0m\u001b[91m   Compiling heck v0.3.1\n\u001b[0m\u001b[91m   Compiling quote v1.0.7\n\u001b[0m\u001b[91m   Compiling atty v0.2.14\n\u001b[0m\u001b[91m   Compiling clap_derive v3.0.0-beta.2\n\u001b[0m\u001b[91m   Compiling clap v3.0.0-beta.2\n\u001b[0m\u001b[91m   Compiling staccato v0.1.9 (/usr/src/staccato)\n\u001b[0m\u001b[91m    Finished release [optimized] target(s) in 25.49s\n\u001b[0mRemoving intermediate container a7e0c267f481\n ---> f9462dd8bcb1\nStep 6/9 : FROM scratch\n ---> \nStep 7/9 : COPY --from=build /usr/src/staccato/target/x86_64-unknown-linux-musl/release/st /bin/st\n ---> 0ddb26405597\nStep 8/9 : ENTRYPOINT [\"/bin/st\"]\n ---> Running in 6552044cb0cc\nRemoving intermediate container 6552044cb0cc\n ---> 43ba9b02fc47\nStep 9/9 : CMD [\"--help\"]\n ---> Running in 51390c4f9edd\nRemoving intermediate container 51390c4f9edd\n ---> 052d49913655\nSuccessfully built 052d49913655\nSuccessfully tagged staccato:latest\n","stderr":"","imageSize":1122952},"endTime":1672545796250}