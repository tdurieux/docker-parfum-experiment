{"repository":"https://github.com/vibranthq/press-ready","dockerfilePath":"Dockerfile","startTime":1672828288154,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/vibranthq/press-ready'...\n","error":null,"commit":"1c931fbeaa8d5d2e476c5e05dce7abb3cb0e56e3"},"originalBuild":{"startTimestamp":1672828289207,"endTimestamp":1672828386097,"error":null,"stdout":"Sending build context to Docker daemon  958.5kB\r\r\nStep 1/17 : FROM node:14-alpine as base\n14-alpine: Pulling from library/node\nc158987b0551: Already exists\n859c8d0e9faf: Pulling fs layer\n69c317f5cbe1: Pulling fs layer\nd0c4a6a4173f: Pulling fs layer\nd0c4a6a4173f: Verifying Checksum\nd0c4a6a4173f: Download complete\n69c317f5cbe1: Verifying Checksum\n69c317f5cbe1: Download complete\n859c8d0e9faf: Verifying Checksum\n859c8d0e9faf: Download complete\n859c8d0e9faf: Pull complete\n69c317f5cbe1: Pull complete\nd0c4a6a4173f: Pull complete\nDigest: sha256:80e825b1f5ab859498a2f0f98f8197131a562906e5f8c95977057502e68ca05a\nStatus: Downloaded newer image for node:14-alpine\n ---> fb7170aa2b9b\nStep 2/17 : LABEL maintainer=\"Yasuaki Uechi\"\n ---> Running in 19c21734253d\nRemoving intermediate container 19c21734253d\n ---> 88e5af6b1957\nStep 3/17 : LABEL license=\"Apache-2.0\"\n ---> Running in 9426157b20ff\nRemoving intermediate container 9426157b20ff\n ---> d8fe962bbe50\nStep 4/17 : RUN apk add ghostscript poppler-utils\n ---> Running in 3a0761272ceb\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/38) Installing dbus-libs (1.14.4-r0)\n(2/38) Installing libintl (0.21.1-r1)\n(3/38) Installing avahi-libs (0.8-r6)\n(4/38) Installing gmp (6.2.1-r2)\n(5/38) Installing nettle (3.8.1-r0)\n(6/38) Installing libffi (3.4.4-r0)\n(7/38) Installing p11-kit (0.24.1-r1)\n(8/38) Installing libtasn1 (4.19.0-r0)\n(9/38) Installing libunistring (1.1-r0)\n(10/38) Installing gnutls (3.7.8-r2)\n(11/38) Installing cups-libs (2.4.2-r1)\n(12/38) Installing libexpat (2.5.0-r0)\n(13/38) Installing brotli-libs (1.0.9-r9)\n(14/38) Installing libbz2 (1.0.8-r4)\n(15/38) Installing libpng (1.6.38-r0)\n(16/38) Installing freetype (2.12.1-r0)\n(17/38) Installing fontconfig (2.14.1-r0)\n(18/38) Installing jbig2dec (0.19-r1)\n(19/38) Installing libjpeg-turbo (2.1.4-r0)\n(20/38) Installing lcms2 (2.14-r0)\n(21/38) Installing xz-libs (5.2.9-r0)\n(22/38) Installing libwebp (1.2.4-r1)\n(23/38) Installing zstd-libs (1.5.2-r9)\n(24/38) Installing tiff (4.4.0-r1)\n(25/38) Installing ghostscript (10.0.0-r0)\n(26/38) Installing libxau (1.0.10-r0)\n(27/38) Installing libmd (1.0.4-r0)\n(28/38) Installing libbsd (0.11.7-r0)\n(29/38) Installing libxdmcp (1.1.4-r0)\n(30/38) Installing libxcb (1.15-r0)\n(31/38) Installing libx11 (1.8.3-r0)\n(32/38) Installing libxext (1.3.5-r0)\n(33/38) Installing libxrender (0.9.11-r0)\n(34/38) Installing pixman (0.42.2-r0)\n(35/38) Installing cairo (1.17.6-r3)\n(36/38) Installing openjpeg (2.5.0-r0)\n(37/38) Installing poppler (22.11.0-r0)\n(38/38) Installing poppler-utils (22.11.0-r0)\nExecuting busybox-1.35.0-r29.trigger\nExecuting fontconfig-2.14.1-r0.trigger\nOK: 99 MiB in 55 packages\nRemoving intermediate container 3a0761272ceb\n ---> 3eb9a443315a\nStep 5/17 : WORKDIR /app\n ---> Running in 63f224d7fbe6\nRemoving intermediate container 63f224d7fbe6\n ---> 51fbd1d92fc7\nStep 6/17 : COPY assets/* /app/assets/\n ---> d720ff5eee13\nStep 7/17 : COPY package.json yarn.lock /app/\n ---> 2776d04224ce\nStep 8/17 : FROM base as build\n ---> 2776d04224ce\nStep 9/17 : RUN yarn install --frozen-lockfile\n ---> Running in 75f6b45f0c18\nyarn install v1.22.19\n[1/4] Resolving packages...\n[2/4] Fetching packages...\n[3/4] Linking dependencies...\n[4/4] Building fresh packages...\nDone in 11.56s.\nRemoving intermediate container 75f6b45f0c18\n ---> 66b9303a0636\nStep 10/17 : COPY tsconfig.json .\n ---> 92f063643119\nStep 11/17 : COPY src/ src/\n ---> 36e6564751c6\nStep 12/17 : RUN yarn build\n ---> Running in ada939f61391\nyarn run v1.22.19\n$ tsc && shx chmod +x lib/cli.js\nDone in 3.71s.\nRemoving intermediate container ada939f61391\n ---> 9722b251c38b\nStep 13/17 : FROM base as runtime\n ---> 2776d04224ce\nStep 14/17 : COPY --from=build /app/lib/ lib/\n ---> 0153ba8f374d\nStep 15/17 : RUN yarn install --frozen-lockfile --production\n ---> Running in c8a83df29217\nyarn install v1.22.19\n[1/4] Resolving packages...\n[2/4] Fetching packages...\n[3/4] Linking dependencies...\n[4/4] Building fresh packages...\nDone in 8.47s.\nRemoving intermediate container c8a83df29217\n ---> b7f852607947\nStep 16/17 : WORKDIR /workdir\n ---> Running in 73d902cc9ec2\nRemoving intermediate container 73d902cc9ec2\n ---> 9123f6326b0d\nStep 17/17 : ENTRYPOINT [ \"/app/lib/cli.js\" ]\n ---> Running in 63996a6c53ee\nRemoving intermediate container 63996a6c53ee\n ---> 5086602256c6\nSuccessfully built 5086602256c6\nSuccessfully tagged press-ready:latest\n","stderr":"","imageSize":369610521},"repair":{"violations":[{"name":"apkAddUseNoCache","position":{"start":5,"end":5,"columnStart":4,"columnEnd":37}}],"repairedDockerfile":"FROM node:14-alpine as base\n\nLABEL maintainer=\"Yasuaki Uechi\"\nLABEL license=\"Apache-2.0\"\n\nRUN apk add --no-cache ghostscript poppler-utils\n\nWORKDIR /app\nCOPY assets/* /app/assets/\nCOPY package.json yarn.lock /app/\n\n# build press-ready\nFROM base as build\nRUN yarn install --frozen-lockfile\nCOPY tsconfig.json .\nCOPY src/ src/\nRUN yarn build\n\n# runtime\nFROM base as runtime\nCOPY --from=build /app/lib/ lib/\nRUN yarn install --frozen-lockfile --production\n\nWORKDIR /workdir\nENTRYPOINT [ \"/app/lib/cli.js\" ]"},"repairedBuild":{"startTimestamp":1672828386989,"endTimestamp":1672828471934,"error":null,"stdout":"Sending build context to Docker daemon  958.5kB\r\r\nStep 1/17 : FROM node:14-alpine as base\n ---> fb7170aa2b9b\nStep 2/17 : LABEL maintainer=\"Yasuaki Uechi\"\n ---> Running in d61d22822b59\nRemoving intermediate container d61d22822b59\n ---> 70f891cd4d6c\nStep 3/17 : LABEL license=\"Apache-2.0\"\n ---> Running in ba76cc563dd2\nRemoving intermediate container ba76cc563dd2\n ---> 3e17e6fc40e5\nStep 4/17 : RUN apk add --no-cache ghostscript poppler-utils\n ---> Running in dd57be6a2c29\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/38) Installing dbus-libs (1.14.4-r0)\n(2/38) Installing libintl (0.21.1-r1)\n(3/38) Installing avahi-libs (0.8-r6)\n(4/38) Installing gmp (6.2.1-r2)\n(5/38) Installing nettle (3.8.1-r0)\n(6/38) Installing libffi (3.4.4-r0)\n(7/38) Installing p11-kit (0.24.1-r1)\n(8/38) Installing libtasn1 (4.19.0-r0)\n(9/38) Installing libunistring (1.1-r0)\n(10/38) Installing gnutls (3.7.8-r2)\n(11/38) Installing cups-libs (2.4.2-r1)\n(12/38) Installing libexpat (2.5.0-r0)\n(13/38) Installing brotli-libs (1.0.9-r9)\n(14/38) Installing libbz2 (1.0.8-r4)\n(15/38) Installing libpng (1.6.38-r0)\n(16/38) Installing freetype (2.12.1-r0)\n(17/38) Installing fontconfig (2.14.1-r0)\n(18/38) Installing jbig2dec (0.19-r1)\n(19/38) Installing libjpeg-turbo (2.1.4-r0)\n(20/38) Installing lcms2 (2.14-r0)\n(21/38) Installing xz-libs (5.2.9-r0)\n(22/38) Installing libwebp (1.2.4-r1)\n(23/38) Installing zstd-libs (1.5.2-r9)\n(24/38) Installing tiff (4.4.0-r1)\n(25/38) Installing ghostscript (10.0.0-r0)\n(26/38) Installing libxau (1.0.10-r0)\n(27/38) Installing libmd (1.0.4-r0)\n(28/38) Installing libbsd (0.11.7-r0)\n(29/38) Installing libxdmcp (1.1.4-r0)\n(30/38) Installing libxcb (1.15-r0)\n(31/38) Installing libx11 (1.8.3-r0)\n(32/38) Installing libxext (1.3.5-r0)\n(33/38) Installing libxrender (0.9.11-r0)\n(34/38) Installing pixman (0.42.2-r0)\n(35/38) Installing cairo (1.17.6-r3)\n(36/38) Installing openjpeg (2.5.0-r0)\n(37/38) Installing poppler (22.11.0-r0)\n(38/38) Installing poppler-utils (22.11.0-r0)\nExecuting busybox-1.35.0-r29.trigger\nExecuting fontconfig-2.14.1-r0.trigger\nOK: 99 MiB in 55 packages\nRemoving intermediate container dd57be6a2c29\n ---> 90ca8af41d6a\nStep 5/17 : WORKDIR /app\n ---> Running in a88299e9247a\nRemoving intermediate container a88299e9247a\n ---> ac4b0f876427\nStep 6/17 : COPY assets/* /app/assets/\n ---> 4dcf303538bc\nStep 7/17 : COPY package.json yarn.lock /app/\n ---> 65c7a7a19343\nStep 8/17 : FROM base as build\n ---> 65c7a7a19343\nStep 9/17 : RUN yarn install --frozen-lockfile\n ---> Running in 5c6be4a8888f\nyarn install v1.22.19\n[1/4] Resolving packages...\n[2/4] Fetching packages...\n[3/4] Linking dependencies...\n[4/4] Building fresh packages...\nDone in 12.80s.\nRemoving intermediate container 5c6be4a8888f\n ---> db8f64340417\nStep 10/17 : COPY tsconfig.json .\n ---> dd04d6b19bfc\nStep 11/17 : COPY src/ src/\n ---> 38508c59c4b1\nStep 12/17 : RUN yarn build\n ---> Running in 041054dd252a\nyarn run v1.22.19\n$ tsc && shx chmod +x lib/cli.js\nDone in 3.44s.\nRemoving intermediate container 041054dd252a\n ---> 2e3c15d2400f\nStep 13/17 : FROM base as runtime\n ---> 65c7a7a19343\nStep 14/17 : COPY --from=build /app/lib/ lib/\n ---> 8737e9b27aea\nStep 15/17 : RUN yarn install --frozen-lockfile --production\n ---> Running in 1b8afd1a8256\nyarn install v1.22.19\n[1/4] Resolving packages...\n[2/4] Fetching packages...\n[3/4] Linking dependencies...\n[4/4] Building fresh packages...\nDone in 7.90s.\nRemoving intermediate container 1b8afd1a8256\n ---> 76c847fde8e6\nStep 16/17 : WORKDIR /workdir\n ---> Running in d4bf00bb8f0b\nRemoving intermediate container d4bf00bb8f0b\n ---> 45b955797c27\nStep 17/17 : ENTRYPOINT [ \"/app/lib/cli.js\" ]\n ---> Running in 264f233ff091\nRemoving intermediate container 264f233ff091\n ---> 3fd47b855c82\nSuccessfully built 3fd47b855c82\nSuccessfully tagged press-ready:latest\n","stderr":"","imageSize":367027481},"endTime":1672828472402}