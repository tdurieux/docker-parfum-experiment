{"repository":"https://github.com/bittorrent/go-btfs","dockerfilePath":"Dockerfile","startTime":1672771522675,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/bittorrent/go-btfs'...\n","error":null,"commit":"46b46ba57db139cc524c520244bfaa4f9a224f1c"},"originalBuild":{"startTimestamp":1672771525270,"endTimestamp":1672772034416,"error":null,"stdout":"Sending build context to Docker daemon  28.05MB\r\r\nStep 1/42 : FROM golang:1.18\n1.18: Pulling from library/golang\n32de3c850997: Already exists\nfa1d4c8d85a4: Already exists\nc796299bbbdd: Already exists\n81283a9569ad: Already exists\nc768848b86a2: Already exists\n160a777925fe: Pulling fs layer\n1be94824532a: Pulling fs layer\n1be94824532a: Verifying Checksum\n1be94824532a: Download complete\n160a777925fe: Verifying Checksum\n160a777925fe: Download complete\n160a777925fe: Pull complete\n1be94824532a: Pull complete\nDigest: sha256:00d63686b480f6dc866e93ddc4b29efa2db03274a687e6495c2cfbfe615d638e\nStatus: Downloaded newer image for golang:1.18\n ---> fffd0d9a59da\nStep 2/42 : MAINTAINER TRON-US <support@tron.network>\n ---> Running in cbdff735a716\nRemoving intermediate container cbdff735a716\n ---> 05fe41d49ae6\nStep 3/42 : RUN apt-get update && apt-get install -y   libssl-dev   ca-certificates   fuse\n ---> Running in 671f44af2f37\nGet:1 http://deb.debian.org/debian bullseye InRelease [116 kB]\nGet:2 http://deb.debian.org/debian-security bullseye-security InRelease [48.4 kB]\nGet:3 http://deb.debian.org/debian bullseye-updates InRelease [44.1 kB]\nGet:4 http://deb.debian.org/debian bullseye/main amd64 Packages [8183 kB]\nGet:5 http://deb.debian.org/debian-security bullseye-security/main amd64 Packages [210 kB]\nGet:6 http://deb.debian.org/debian bullseye-updates/main amd64 Packages [14.6 kB]\nFetched 8616 kB in 2s (5167 kB/s)\nReading package lists...\nReading package lists...\nBuilding dependency tree...\nReading state information...\nca-certificates is already the newest version (20210119).\nSuggested packages:\n  libssl-doc\nThe following NEW packages will be installed:\n  fuse libfuse2 libssl-dev\n0 upgraded, 3 newly installed, 0 to remove and 1 not upgraded.\nNeed to get 2016 kB of archives.\nAfter this operation, 8673 kB of additional disk space will be used.\nGet:1 http://deb.debian.org/debian bullseye/main amd64 libfuse2 amd64 2.9.9-5 [130 kB]\nGet:2 http://deb.debian.org/debian bullseye/main amd64 fuse amd64 2.9.9-5 [72.4 kB]\nGet:3 http://deb.debian.org/debian bullseye/main amd64 libssl-dev amd64 1.1.1n-0+deb11u3 [1814 kB]\n\u001b[91mdebconf: delaying package configuration, since apt-utils is not installed\n\u001b[0mFetched 2016 kB in 0s (42.9 MB/s)\nSelecting previously unselected package libfuse2:amd64.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 15718 files and directories currently installed.)\r\nPreparing to unpack .../libfuse2_2.9.9-5_amd64.deb ...\r\nUnpacking libfuse2:amd64 (2.9.9-5) ...\r\nSelecting previously unselected package fuse.\r\nPreparing to unpack .../fuse_2.9.9-5_amd64.deb ...\r\nUnpacking fuse (2.9.9-5) ...\r\nSelecting previously unselected package libssl-dev:amd64.\r\nPreparing to unpack .../libssl-dev_1.1.1n-0+deb11u3_amd64.deb ...\r\nUnpacking libssl-dev:amd64 (1.1.1n-0+deb11u3) ...\r\nSetting up libfuse2:amd64 (2.9.9-5) ...\r\nSetting up libssl-dev:amd64 (1.1.1n-0+deb11u3) ...\r\nSetting up fuse (2.9.9-5) ...\r\nProcessing triggers for libc-bin (2.31-13+deb11u5) ...\r\nRemoving intermediate container 671f44af2f37\n ---> e72eefe28fba\nStep 4/42 : ENV SRC_DIR /go-btfs\n ---> Running in 08e5b7d2606a\nRemoving intermediate container 08e5b7d2606a\n ---> 3cf6b1d724c9\nStep 5/42 : COPY go.mod go.sum $SRC_DIR/\n ---> 6b41e4332a2c\nStep 6/42 : RUN cd $SRC_DIR   && go mod download\n ---> Running in 372a5b28c106\nRemoving intermediate container 372a5b28c106\n ---> 2d9b845cc7ca\nStep 7/42 : COPY . $SRC_DIR\n ---> eb3e6ec25fe7\nStep 8/42 : ARG gitdir=.git\n ---> Running in a69e7f97d2d4\nRemoving intermediate container a69e7f97d2d4\n ---> 774f4172d158\nStep 9/42 : RUN test -d $SRC_DIR/.git   || mv $SRC_DIR/$gitdir $SRC_DIR/.git\n ---> Running in 33b53aa54a6b\nRemoving intermediate container 33b53aa54a6b\n ---> 3f4ee40e4876\nStep 10/42 : ARG IPFS_PLUGINS\n ---> Running in b789640c11c6\nRemoving intermediate container b789640c11c6\n ---> a1116ef03ad8\nStep 11/42 : RUN cd $SRC_DIR   && mkdir .git/objects   && GOFLAGS=-buildvcs=false make build GOTAGS=openssl IPFS_PLUGINS=$IPFS_PLUGINS\n ---> Running in ca09d7139d3e\ngo version go1.18.9 linux/amd64\nbin/check_go_version 1.15\nplugin/loader/preload.sh > plugin/loader/preload.go\ngo fmt plugin/loader/preload.go >/dev/null\ngo build -buildvcs=false \"-asmflags=all='-trimpath=/go'\" \"-gcflags=all='-trimpath=/go'\" -ldflags=\"-X \"github.com/bittorrent/go-btfs\".CurrentCommit=46b46ba\" -tags=\"openssl\" -o \"cmd/btfs/btfs\" \"github.com/bittorrent/go-btfs/cmd/btfs\"\nRemoving intermediate container ca09d7139d3e\n ---> 0641bfd087f1\nStep 12/42 : ENV SUEXEC_VERSION v0.2\n ---> Running in a6aa645df4fa\nRemoving intermediate container a6aa645df4fa\n ---> 3d478fd7dafb\nStep 13/42 : ENV TINI_VERSION v0.19.0\n ---> Running in c3541066aa6e\nRemoving intermediate container c3541066aa6e\n ---> a8f9c05a03dc\nStep 14/42 : RUN set -eux;     dpkgArch=\"$(dpkg --print-architecture)\";     case \"${dpkgArch##*-}\" in         \"amd64\" | \"armhf\" | \"arm64\") tiniArch=\"tini-static-$dpkgArch\" ;;        *) echo >&2 \"unsupported architecture: ${dpkgArch}\"; exit 1 ;;     esac;   cd /tmp   && git clone https://github.com/ncopa/su-exec.git   && cd su-exec   && git checkout -q $SUEXEC_VERSION   && make su-exec-static   && cd /tmp   && wget -q -O tini https://github.com/krallin/tini/releases/download/$TINI_VERSION/$tiniArch   && chmod +x tini\n ---> Running in 522371174d84\n\u001b[91m+ dpkg --print-architecture\n\u001b[0m\u001b[91m+ dpkgArch=amd64\n+ tiniArch=tini-static-amd64\n+ cd /tmp\n\u001b[0m\u001b[91m+ git clone https://github.com/ncopa/su-exec.git\n\u001b[0m\u001b[91mCloning into 'su-exec'...\n\u001b[0m\u001b[91m+ cd su-exec\n\u001b[0m\u001b[91m+ git checkout -q v0.2\n\u001b[0m\u001b[91m+ make su-exec-static\n\u001b[0mcc -Wall -Werror -g -o su-exec-static su-exec.c -static \n\u001b[91m/usr/bin/ld: \u001b[0m\u001b[91m/tmp/cc67m8tP.o: in function `main':\n/tmp/su-exec/su-exec.c:83: warning: Using 'getgrouplist' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking\n\u001b[0m\u001b[91m/usr/bin/ld: /tmp/su-exec/su-exec.c:66: warning: Using 'getgrgid' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking\n/usr/bin/ld: /tmp/su-exec/su-exec.c:62: warning: Using 'getgrnam' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking\n/usr/bin/ld: /tmp/su-exec/su-exec.c:43: warning: Using 'getpwnam' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking\n/usr/bin/ld: /tmp/su-exec/su-exec.c:49: warning: Using 'getpwuid' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking\n\u001b[0m\u001b[91m+ cd /tmp\n+ wget -q -O tini https://github.com/krallin/tini/releases/download/v0.19.0/tini-static-amd64\n\u001b[0m\u001b[91m+ chmod +x tini\n\u001b[0mRemoving intermediate container 522371174d84\n ---> a21146dd64e3\nStep 15/42 : FROM busybox:1.31.1-glibc\n1.31.1-glibc: Pulling from library/busybox\nb2d221698d1d: Pulling fs layer\nb2d221698d1d: Verifying Checksum\nb2d221698d1d: Download complete\nb2d221698d1d: Pull complete\nDigest: sha256:1f81263701cddf6402afe9f33fca0266d9fff379e59b1748f33d3072da71ee85\nStatus: Downloaded newer image for busybox:1.31.1-glibc\n ---> 7a2331af2292\nStep 16/42 : MAINTAINER TRON-US <support@tron.network>\n ---> Running in 86b66d2f0d24\nRemoving intermediate container 86b66d2f0d24\n ---> 42cea54e4888\nStep 17/42 : ENV SRC_DIR /go-btfs\n ---> Running in bbe2fa493bd4\nRemoving intermediate container bbe2fa493bd4\n ---> fbc8c90ee77d\nStep 18/42 : COPY --from=0 $SRC_DIR/cmd/btfs/btfs /usr/local/bin/btfs\n ---> 0b7fe205eea8\nStep 19/42 : COPY --from=0 $SRC_DIR/bin/container_daemon /usr/local/bin/start_btfs\n ---> 02d3f2ec2ae8\nStep 20/42 : COPY --from=0 /tmp/su-exec/su-exec-static /sbin/su-exec\n ---> 0a3c17419833\nStep 21/42 : COPY --from=0 /tmp/tini /sbin/tini\n ---> dfd11194c13a\nStep 22/42 : COPY --from=0 /bin/fusermount /usr/local/bin/fusermount\n ---> 294da7a6124f\nStep 23/42 : COPY --from=0 /etc/ssl/certs /etc/ssl/certs\n ---> 55ba8d5b91b1\nStep 24/42 : RUN chmod 4755 /usr/local/bin/fusermount\n ---> Running in 5f36709877eb\nRemoving intermediate container 5f36709877eb\n ---> 5770a9f29287\nStep 25/42 : RUN chmod 0755 /usr/local/bin/start_btfs\n ---> Running in a0f7867f47f0\nRemoving intermediate container a0f7867f47f0\n ---> a0ec1764bbea\nStep 26/42 : COPY --from=0 /lib/*-linux-gnu*/libdl.so.2 /lib/\n ---> 86b3e4471f7a\nStep 27/42 : COPY --from=0 /lib/*-linux-gnu*/libm.so.6 /lib/\n ---> 834df57baf39\nStep 28/42 : COPY --from=0 /lib/*-linux-gnu*/libgcc_s.so.1 /lib/\n ---> 034eac0a97ed\nStep 29/42 : COPY --from=0 /usr/lib/*-linux-gnu*/libstdc++.so.6 /usr/lib/\n ---> 2f1fb810e5f7\nStep 30/42 : COPY --from=0 /usr/lib/*-linux-gnu*/libssl.so* /usr/lib/\n ---> cf9ccded4496\nStep 31/42 : COPY --from=0 /usr/lib/*-linux-gnu*/libcrypto.so* /usr/lib/\n ---> 7aba93d36a78\nStep 32/42 : EXPOSE 4001\n ---> Running in 22d2fe9f45e8\nRemoving intermediate container 22d2fe9f45e8\n ---> d26636225738\nStep 33/42 : EXPOSE 5001\n ---> Running in 089f54532675\nRemoving intermediate container 089f54532675\n ---> 1c7336eefce6\nStep 34/42 : EXPOSE 8080\n ---> Running in c2f95c28c28c\nRemoving intermediate container c2f95c28c28c\n ---> acad74332417\nStep 35/42 : EXPOSE 8081\n ---> Running in 2c8a3f20918b\nRemoving intermediate container 2c8a3f20918b\n ---> 15f94fff400a\nStep 36/42 : ENV BTFS_PATH /data/btfs\n ---> Running in 1f2703517d33\nRemoving intermediate container 1f2703517d33\n ---> b52b290e4768\nStep 37/42 : RUN mkdir -p $BTFS_PATH   && adduser -D -h $BTFS_PATH -u 1000 -G users btfs   && chown btfs:users $BTFS_PATH\n ---> Running in c81c939d4619\nRemoving intermediate container c81c939d4619\n ---> a15db9d246d6\nStep 38/42 : RUN mkdir /btfs /btns   && chown btfs:users /btfs /btns\n ---> Running in 454ddf6672c9\nRemoving intermediate container 454ddf6672c9\n ---> fa0c073f4f12\nStep 39/42 : VOLUME $BTFS_PATH\n ---> Running in 1b801fc1a8d4\nRemoving intermediate container 1b801fc1a8d4\n ---> b7b5f220cd6d\nStep 40/42 : ENV BTFS_LOGGING \"\"\n ---> Running in 31e7b9cc53d4\nRemoving intermediate container 31e7b9cc53d4\n ---> 32dbb6a93186\nStep 41/42 : ENTRYPOINT [\"/sbin/tini\", \"--\", \"/usr/local/bin/start_btfs\"]\n ---> Running in 498428245f13\nRemoving intermediate container 498428245f13\n ---> d1c9c65e11f0\nStep 42/42 : CMD [\"daemon\", \"--migrate=true\"]\n ---> Running in 14b70c4941d2\nRemoving intermediate container 14b70c4941d2\n ---> c7ef2218ecdb\nSuccessfully built c7ef2218ecdb\nSuccessfully tagged go-btfs:latest\n","stderr":"","imageSize":130064344},"repair":{"violations":[{"name":"ruleAptGetInstallUseNoRec","position":{"start":4,"end":7,"columnStart":22,"columnEnd":6}},{"name":"ruleAptGetInstallThenRemoveAptLists","position":{"start":4,"end":7,"columnStart":22,"columnEnd":6}}],"repairedDockerfile":"FROM golang:1.18\nMAINTAINER TRON-US <support@tron.network>\n\n# Install deps\nRUN apt-get update && apt-get install --no-install-recommends -y \\\n  libssl-dev \\\n  ca-certificates \\\n  fuse\n\nENV SRC_DIR /go-btfs\n\n# Download packages first so they can be cached.\nCOPY go.mod go.sum $SRC_DIR/\nRUN cd $SRC_DIR \\\n  && go mod download\n\nCOPY . $SRC_DIR\n\n# Newer git submodule uses \"absorbgitdirs\" option by default which does not\n# include .git folder inside a submodule.\n# Use a build time variable $gitdir to specify the location of the actual .git folder.\nARG gitdir=.git\nRUN test -d $SRC_DIR/.git \\\n  || mv $SRC_DIR/$gitdir $SRC_DIR/.git\n\n# Preload an in-tree but disabled-by-default plugin by adding it to the IPFS_PLUGINS variable\n# e.g. docker build --build-arg IPFS_PLUGINS=\"foo bar baz\"\nARG IPFS_PLUGINS\n\n# Build the thing.\n# Also: fix getting HEAD commit hash via git rev-parse.\nRUN cd $SRC_DIR \\\n  && mkdir .git/objects \\\n  && GOFLAGS=-buildvcs=false make build GOTAGS=openssl IPFS_PLUGINS=$IPFS_PLUGINS\n\n# Get su-exec, a very minimal tool for dropping privileges,\n# and tini, a very minimal init daemon for containers\nENV SUEXEC_VERSION v0.2\nENV TINI_VERSION v0.19.0\nRUN set -eux; \\\n    dpkgArch=\"$(dpkg --print-architecture)\"; \\\n    case \"${dpkgArch##*-}\" in \\\n        \"amd64\" | \"armhf\" | \"arm64\") tiniArch=\"tini-static-$dpkgArch\" ;;\\\n        *) echo >&2 \"unsupported architecture: ${dpkgArch}\"; exit 1 ;; \\\n    esac; \\\n  cd /tmp \\\n  && git clone https://github.com/ncopa/su-exec.git \\\n  && cd su-exec \\\n  && git checkout -q $SUEXEC_VERSION \\\n  && make su-exec-static \\\n  && cd /tmp \\\n  && wget -q -O tini https://github.com/krallin/tini/releases/download/$TINI_VERSION/$tiniArch \\\n  && chmod +x tini\n\n# Now comes the actual target image, which aims to be as small as possible.\nFROM busybox:1.31.1-glibc\nMAINTAINER TRON-US <support@tron.network>\n\n# Get the btfs binary, entrypoint script, and TLS CAs from the build container.\nENV SRC_DIR /go-btfs\nCOPY --from=0 $SRC_DIR/cmd/btfs/btfs /usr/local/bin/btfs\nCOPY --from=0 $SRC_DIR/bin/container_daemon /usr/local/bin/start_btfs\nCOPY --from=0 /tmp/su-exec/su-exec-static /sbin/su-exec\nCOPY --from=0 /tmp/tini /sbin/tini\nCOPY --from=0 /bin/fusermount /usr/local/bin/fusermount\nCOPY --from=0 /etc/ssl/certs /etc/ssl/certs\n\n# Add suid bit on fusermount so it will run properly\nRUN chmod 4755 /usr/local/bin/fusermount\n\n# Fix permissions on start_btfs (ignore the build machine's permissions)\nRUN chmod 0755 /usr/local/bin/start_btfs\n\n# This shared lib (part of glibc) doesn't seem to be included with busybox.\nCOPY --from=0 /lib/*-linux-gnu*/libdl.so.2 /lib/\nCOPY --from=0 /lib/*-linux-gnu*/libm.so.6 /lib/\nCOPY --from=0 /lib/*-linux-gnu*/libgcc_s.so.1 /lib/\nCOPY --from=0 /usr/lib/*-linux-gnu*/libstdc++.so.6 /usr/lib/\n\n# Copy over SSL libraries.\nCOPY --from=0 /usr/lib/*-linux-gnu*/libssl.so* /usr/lib/\nCOPY --from=0 /usr/lib/*-linux-gnu*/libcrypto.so* /usr/lib/\n\n# Swarm TCP; should be exposed to the public\nEXPOSE 4001\n# Daemon API; must not be exposed publicly but to client services under you control\nEXPOSE 5001\n# Web Gateway; can be exposed publicly with a proxy, e.g. as https://ipfs.example.org\nEXPOSE 8080\n# Swarm Websockets; must be exposed publicly when the node is listening using the websocket transport (/ipX/.../tcp/8081/ws).\nEXPOSE 8081\n\n# Create the fs-repo directory and switch to a non-privileged user.\nENV BTFS_PATH /data/btfs\nRUN mkdir -p $BTFS_PATH \\\n  && adduser -D -h $BTFS_PATH -u 1000 -G users btfs \\\n  && chown btfs:users $BTFS_PATH\n\n# Create mount points for `btfs mount` command\nRUN mkdir /btfs /btns \\\n  && chown btfs:users /btfs /btns\n\n# Expose the fs-repo as a volume.\n# start_btfs initializes an fs-repo if none is mounted.\n# Important this happens after the USER directive so permission are correct.\nVOLUME $BTFS_PATH\n\n# The default logging level\nENV BTFS_LOGGING \"\"\n\n# This just makes sure that:\n# 1. There's an fs-repo, and initializes one if there isn't.\n# 2. The API and Gateway are accessible from outside the container.\nENTRYPOINT [\"/sbin/tini\", \"--\", \"/usr/local/bin/start_btfs\"]\n\n# Execute the daemon subcommand by default\nCMD [\"daemon\", \"--migrate=true\"]\n"},"repairedBuild":{"startTimestamp":1672772035213,"endTimestamp":1672772527737,"error":null,"stdout":"Sending build context to Docker daemon  28.05MB\r\r\nStep 1/42 : FROM golang:1.18\n ---> fffd0d9a59da\nStep 2/42 : MAINTAINER TRON-US <support@tron.network>\n ---> Running in 4c38ce127e00\nRemoving intermediate container 4c38ce127e00\n ---> fbf0b36b10f2\nStep 3/42 : RUN apt-get update && apt-get install --no-install-recommends -y   libssl-dev   ca-certificates   fuse\n ---> Running in 10fa36968c90\nGet:1 http://deb.debian.org/debian bullseye InRelease [116 kB]\nGet:2 http://deb.debian.org/debian-security bullseye-security InRelease [48.4 kB]\nGet:3 http://deb.debian.org/debian bullseye-updates InRelease [44.1 kB]\nGet:4 http://deb.debian.org/debian bullseye/main amd64 Packages [8183 kB]\nGet:5 http://deb.debian.org/debian-security bullseye-security/main amd64 Packages [210 kB]\nGet:6 http://deb.debian.org/debian bullseye-updates/main amd64 Packages [14.6 kB]\nFetched 8616 kB in 1s (6117 kB/s)\nReading package lists...\nReading package lists...\nBuilding dependency tree...\nReading state information...\nca-certificates is already the newest version (20210119).\nSuggested packages:\n  libssl-doc\nThe following NEW packages will be installed:\n  fuse libfuse2 libssl-dev\n0 upgraded, 3 newly installed, 0 to remove and 1 not upgraded.\nNeed to get 2016 kB of archives.\nAfter this operation, 8673 kB of additional disk space will be used.\nGet:1 http://deb.debian.org/debian bullseye/main amd64 libfuse2 amd64 2.9.9-5 [130 kB]\nGet:2 http://deb.debian.org/debian bullseye/main amd64 fuse amd64 2.9.9-5 [72.4 kB]\nGet:3 http://deb.debian.org/debian bullseye/main amd64 libssl-dev amd64 1.1.1n-0+deb11u3 [1814 kB]\n\u001b[91mdebconf: delaying package configuration, since apt-utils is not installed\n\u001b[0mFetched 2016 kB in 0s (14.8 MB/s)\nSelecting previously unselected package libfuse2:amd64.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 15718 files and directories currently installed.)\r\nPreparing to unpack .../libfuse2_2.9.9-5_amd64.deb ...\r\nUnpacking libfuse2:amd64 (2.9.9-5) ...\r\nSelecting previously unselected package fuse.\r\nPreparing to unpack .../fuse_2.9.9-5_amd64.deb ...\r\nUnpacking fuse (2.9.9-5) ...\r\nSelecting previously unselected package libssl-dev:amd64.\r\nPreparing to unpack .../libssl-dev_1.1.1n-0+deb11u3_amd64.deb ...\r\nUnpacking libssl-dev:amd64 (1.1.1n-0+deb11u3) ...\r\nSetting up libfuse2:amd64 (2.9.9-5) ...\r\nSetting up libssl-dev:amd64 (1.1.1n-0+deb11u3) ...\r\nSetting up fuse (2.9.9-5) ...\r\nProcessing triggers for libc-bin (2.31-13+deb11u5) ...\r\nRemoving intermediate container 10fa36968c90\n ---> 04b61a9e1e3a\nStep 4/42 : ENV SRC_DIR /go-btfs\n ---> Running in 9846b7e1fd53\nRemoving intermediate container 9846b7e1fd53\n ---> 08a416ad67d7\nStep 5/42 : COPY go.mod go.sum $SRC_DIR/\n ---> d912daf87768\nStep 6/42 : RUN cd $SRC_DIR   && go mod download\n ---> Running in 3c1217d919e0\nRemoving intermediate container 3c1217d919e0\n ---> 889e5c4a57ad\nStep 7/42 : COPY . $SRC_DIR\n ---> c27b8fe36ed1\nStep 8/42 : ARG gitdir=.git\n ---> Running in 47b679c2ef23\nRemoving intermediate container 47b679c2ef23\n ---> f56b5ff2c6f6\nStep 9/42 : RUN test -d $SRC_DIR/.git   || mv $SRC_DIR/$gitdir $SRC_DIR/.git\n ---> Running in 07c246e4c483\nRemoving intermediate container 07c246e4c483\n ---> 623942b03861\nStep 10/42 : ARG IPFS_PLUGINS\n ---> Running in 44fbd62b61c1\nRemoving intermediate container 44fbd62b61c1\n ---> fe6b64f09c14\nStep 11/42 : RUN cd $SRC_DIR   && mkdir .git/objects   && GOFLAGS=-buildvcs=false make build GOTAGS=openssl IPFS_PLUGINS=$IPFS_PLUGINS\n ---> Running in e98e67cc5f13\ngo version go1.18.9 linux/amd64\nbin/check_go_version 1.15\nplugin/loader/preload.sh > plugin/loader/preload.go\ngo fmt plugin/loader/preload.go >/dev/null\ngo build -buildvcs=false \"-asmflags=all='-trimpath=/go'\" \"-gcflags=all='-trimpath=/go'\" -ldflags=\"-X \"github.com/bittorrent/go-btfs\".CurrentCommit=46b46ba\" -tags=\"openssl\" -o \"cmd/btfs/btfs\" \"github.com/bittorrent/go-btfs/cmd/btfs\"\nRemoving intermediate container e98e67cc5f13\n ---> bb97a1003362\nStep 12/42 : ENV SUEXEC_VERSION v0.2\n ---> Running in 02ec1dc08921\nRemoving intermediate container 02ec1dc08921\n ---> 332ccd49c6af\nStep 13/42 : ENV TINI_VERSION v0.19.0\n ---> Running in 1171c99938ae\nRemoving intermediate container 1171c99938ae\n ---> 3baed5c45aa9\nStep 14/42 : RUN set -eux;     dpkgArch=\"$(dpkg --print-architecture)\";     case \"${dpkgArch##*-}\" in         \"amd64\" | \"armhf\" | \"arm64\") tiniArch=\"tini-static-$dpkgArch\" ;;        *) echo >&2 \"unsupported architecture: ${dpkgArch}\"; exit 1 ;;     esac;   cd /tmp   && git clone https://github.com/ncopa/su-exec.git   && cd su-exec   && git checkout -q $SUEXEC_VERSION   && make su-exec-static   && cd /tmp   && wget -q -O tini https://github.com/krallin/tini/releases/download/$TINI_VERSION/$tiniArch   && chmod +x tini\n ---> Running in 998de6741dca\n\u001b[91m+ dpkg --print-architecture\n\u001b[0m\u001b[91m+ dpkgArch=amd64\n+ tiniArch=tini-static-amd64\n+ cd /tmp\n\u001b[0m\u001b[91m+ git clone https://github.com/ncopa/su-exec.git\n\u001b[0m\u001b[91mCloning into 'su-exec'...\n\u001b[0m\u001b[91m+ cd su-exec\n+ git checkout -q v0.2\n\u001b[0m\u001b[91m+ make su-exec-static\n\u001b[0mcc -Wall -Werror -g -o su-exec-static su-exec.c -static \n\u001b[91m/usr/bin/ld: \u001b[0m\u001b[91m/tmp/ccXBhFNP.o: in function `main':\n/tmp/su-exec/su-exec.c:83: \u001b[0m\u001b[91mwarning: Using 'getgrouplist' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking\n\u001b[0m\u001b[91m/usr/bin/ld: /tmp/su-exec/su-exec.c:66: warning: Using 'getgrgid' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking\n\u001b[0m\u001b[91m/usr/bin/ld: /tmp/su-exec/su-exec.c:62: warning: Using 'getgrnam' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking\n\u001b[0m\u001b[91m/usr/bin/ld: /tmp/su-exec/su-exec.c:43: warning: Using 'getpwnam' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking\n\u001b[0m\u001b[91m/usr/bin/ld: /tmp/su-exec/su-exec.c:49: warning: Using 'getpwuid' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking\n\u001b[0m\u001b[91m+ cd /tmp\n+ wget -q -O tini https://github.com/krallin/tini/releases/download/v0.19.0/tini-static-amd64\n\u001b[0m\u001b[91m+ chmod +x tini\n\u001b[0mRemoving intermediate container 998de6741dca\n ---> 9b4f1fe7d256\nStep 15/42 : FROM busybox:1.31.1-glibc\n ---> 7a2331af2292\nStep 16/42 : MAINTAINER TRON-US <support@tron.network>\n ---> Running in bce2b46b9194\nRemoving intermediate container bce2b46b9194\n ---> bab31839c491\nStep 17/42 : ENV SRC_DIR /go-btfs\n ---> Running in f92d73e5349b\nRemoving intermediate container f92d73e5349b\n ---> 8e0fb61c09dd\nStep 18/42 : COPY --from=0 $SRC_DIR/cmd/btfs/btfs /usr/local/bin/btfs\n ---> 2f0a836d2676\nStep 19/42 : COPY --from=0 $SRC_DIR/bin/container_daemon /usr/local/bin/start_btfs\n ---> 6b4d20ba549d\nStep 20/42 : COPY --from=0 /tmp/su-exec/su-exec-static /sbin/su-exec\n ---> 5ec2cfc38e7c\nStep 21/42 : COPY --from=0 /tmp/tini /sbin/tini\n ---> cbf5ba3a41a5\nStep 22/42 : COPY --from=0 /bin/fusermount /usr/local/bin/fusermount\n ---> e9cabe0c734a\nStep 23/42 : COPY --from=0 /etc/ssl/certs /etc/ssl/certs\n ---> 956614e1e915\nStep 24/42 : RUN chmod 4755 /usr/local/bin/fusermount\n ---> Running in 0f5b04dd693e\nRemoving intermediate container 0f5b04dd693e\n ---> 1fc7f003c499\nStep 25/42 : RUN chmod 0755 /usr/local/bin/start_btfs\n ---> Running in d942b0f47ded\nRemoving intermediate container d942b0f47ded\n ---> 1532af6ed628\nStep 26/42 : COPY --from=0 /lib/*-linux-gnu*/libdl.so.2 /lib/\n ---> 84c075a9eec7\nStep 27/42 : COPY --from=0 /lib/*-linux-gnu*/libm.so.6 /lib/\n ---> b1f2f990364a\nStep 28/42 : COPY --from=0 /lib/*-linux-gnu*/libgcc_s.so.1 /lib/\n ---> 20665bad8c41\nStep 29/42 : COPY --from=0 /usr/lib/*-linux-gnu*/libstdc++.so.6 /usr/lib/\n ---> a9b3291a15a7\nStep 30/42 : COPY --from=0 /usr/lib/*-linux-gnu*/libssl.so* /usr/lib/\n ---> f725cbd31ada\nStep 31/42 : COPY --from=0 /usr/lib/*-linux-gnu*/libcrypto.so* /usr/lib/\n ---> 6ac86a2239dd\nStep 32/42 : EXPOSE 4001\n ---> Running in 5cf1b5cf805b\nRemoving intermediate container 5cf1b5cf805b\n ---> a1f7556380cd\nStep 33/42 : EXPOSE 5001\n ---> Running in a704a1096c42\nRemoving intermediate container a704a1096c42\n ---> 250e93f0f703\nStep 34/42 : EXPOSE 8080\n ---> Running in 45f08c8d091a\nRemoving intermediate container 45f08c8d091a\n ---> 58fd728bb2c4\nStep 35/42 : EXPOSE 8081\n ---> Running in 894c0eec987a\nRemoving intermediate container 894c0eec987a\n ---> c6999c5fc0f4\nStep 36/42 : ENV BTFS_PATH /data/btfs\n ---> Running in 9d3ebc193127\nRemoving intermediate container 9d3ebc193127\n ---> d3878771da92\nStep 37/42 : RUN mkdir -p $BTFS_PATH   && adduser -D -h $BTFS_PATH -u 1000 -G users btfs   && chown btfs:users $BTFS_PATH\n ---> Running in 56a89eb5864b\nRemoving intermediate container 56a89eb5864b\n ---> f1af4ef28a53\nStep 38/42 : RUN mkdir /btfs /btns   && chown btfs:users /btfs /btns\n ---> Running in 64e9ef0edc4a\nRemoving intermediate container 64e9ef0edc4a\n ---> 73f8e588c384\nStep 39/42 : VOLUME $BTFS_PATH\n ---> Running in 93b2d9e920ec\nRemoving intermediate container 93b2d9e920ec\n ---> 66d836acc02e\nStep 40/42 : ENV BTFS_LOGGING \"\"\n ---> Running in 86af64d9ca63\nRemoving intermediate container 86af64d9ca63\n ---> 86ca02e0dff6\nStep 41/42 : ENTRYPOINT [\"/sbin/tini\", \"--\", \"/usr/local/bin/start_btfs\"]\n ---> Running in d809cfa0ddb9\nRemoving intermediate container d809cfa0ddb9\n ---> e290fdbb4c44\nStep 42/42 : CMD [\"daemon\", \"--migrate=true\"]\n ---> Running in eee5b4c0cfdd\nRemoving intermediate container eee5b4c0cfdd\n ---> 44122aca8509\nSuccessfully built 44122aca8509\nSuccessfully tagged go-btfs:latest\n","stderr":"","imageSize":130064352},"endTime":1672772528770}