{"repository":"https://github.com/crflynn/pypistats.org","dockerfilePath":"Dockerfile","startTime":1672019969052,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/crflynn/pypistats.org'...\n","error":null,"commit":"70a10f994173b4b9e8905fb3494dd5d0d5bd1bbb"},"originalBuild":{"startTimestamp":1672019969980,"endTimestamp":1672020075663,"error":null,"stdout":"Sending build context to Docker daemon  202.8kB\r\r\nStep 1/14 : FROM python:3.8.5-slim\n3.8.5-slim: Pulling from library/python\nd121f8d1c412: Pulling fs layer\nca572574cc82: Pulling fs layer\n776716b0aa87: Pulling fs layer\nc37461631ba3: Pulling fs layer\nbdb458dd27ea: Pulling fs layer\nc37461631ba3: Waiting\nbdb458dd27ea: Waiting\nca572574cc82: Verifying Checksum\nca572574cc82: Download complete\n776716b0aa87: Verifying Checksum\n776716b0aa87: Download complete\nd121f8d1c412: Verifying Checksum\nd121f8d1c412: Download complete\nc37461631ba3: Verifying Checksum\nc37461631ba3: Download complete\nbdb458dd27ea: Verifying Checksum\nbdb458dd27ea: Download complete\nd121f8d1c412: Pull complete\nca572574cc82: Pull complete\n776716b0aa87: Pull complete\nc37461631ba3: Pull complete\nbdb458dd27ea: Pull complete\nDigest: sha256:502cd057453744145010eceb5a4af1e4f04ebed54f6e1e8d23d29ebe2afdbe6d\nStatus: Downloaded newer image for python:3.8.5-slim\n ---> 6cf621cb1327\nStep 2/14 : RUN apt-get update &&     apt-get install -y curl libpq-dev &&     apt-get clean\n ---> Running in 365bdff83704\nGet:1 http://deb.debian.org/debian buster InRelease [122 kB]\nGet:2 http://security.debian.org/debian-security buster/updates InRelease [34.8 kB]\nGet:3 http://deb.debian.org/debian buster-updates InRelease [56.6 kB]\nGet:4 http://security.debian.org/debian-security buster/updates/main amd64 Packages [416 kB]\nGet:5 http://deb.debian.org/debian buster/main amd64 Packages [7909 kB]\nGet:6 http://deb.debian.org/debian buster-updates/main amd64 Packages [8788 B]\nFetched 8547 kB in 2s (5531 kB/s)\nReading package lists...\nReading package lists...\nBuilding dependency tree...\nReading state information...\nThe following additional packages will be installed:\n  krb5-locales libcurl4 libgssapi-krb5-2 libk5crypto3 libkeyutils1 libkrb5-3\n  libkrb5support0 libldap-2.4-2 libldap-common libnghttp2-14 libpq5 libpsl5\n  librtmp1 libsasl2-2 libsasl2-modules libsasl2-modules-db libssh2-1\n  publicsuffix\nSuggested packages:\n  krb5-doc krb5-user postgresql-doc-11 libsasl2-modules-gssapi-mit\n  | libsasl2-modules-gssapi-heimdal libsasl2-modules-ldap libsasl2-modules-otp\n  libsasl2-modules-sql\nThe following NEW packages will be installed:\n  curl krb5-locales libcurl4 libgssapi-krb5-2 libk5crypto3 libkeyutils1\n  libkrb5-3 libkrb5support0 libldap-2.4-2 libldap-common libnghttp2-14\n  libpq-dev libpq5 libpsl5 librtmp1 libsasl2-2 libsasl2-modules\n  libsasl2-modules-db libssh2-1 publicsuffix\n0 upgraded, 20 newly installed, 0 to remove and 33 not upgraded.\nNeed to get 2824 kB of archives.\nAfter this operation, 7344 kB of additional disk space will be used.\nGet:1 http://security.debian.org/debian-security buster/updates/main amd64 krb5-locales all 1.17-3+deb10u5 [95.7 kB]\nGet:2 http://deb.debian.org/debian buster/main amd64 libkeyutils1 amd64 1.6-6 [15.0 kB]\nGet:3 http://deb.debian.org/debian buster/main amd64 libsasl2-modules-db amd64 2.1.27+dfsg-1+deb10u2 [69.2 kB]\nGet:4 http://security.debian.org/debian-security buster/updates/main amd64 libkrb5support0 amd64 1.17-3+deb10u5 [66.0 kB]\nGet:5 http://deb.debian.org/debian buster/main amd64 libsasl2-2 amd64 2.1.27+dfsg-1+deb10u2 [106 kB]\nGet:6 http://security.debian.org/debian-security buster/updates/main amd64 libk5crypto3 amd64 1.17-3+deb10u5 [122 kB]\nGet:7 http://deb.debian.org/debian buster/main amd64 libldap-common all 2.4.47+dfsg-3+deb10u7 [90.1 kB]\nGet:8 http://security.debian.org/debian-security buster/updates/main amd64 libkrb5-3 amd64 1.17-3+deb10u5 [369 kB]\nGet:9 http://deb.debian.org/debian buster/main amd64 libldap-2.4-2 amd64 2.4.47+dfsg-3+deb10u7 [224 kB]\nGet:10 http://deb.debian.org/debian buster/main amd64 libnghttp2-14 amd64 1.36.0-2+deb10u1 [85.0 kB]\nGet:11 http://deb.debian.org/debian buster/main amd64 libpsl5 amd64 0.20.2-2 [53.7 kB]\nGet:12 http://security.debian.org/debian-security buster/updates/main amd64 libgssapi-krb5-2 amd64 1.17-3+deb10u5 [159 kB]\nGet:13 http://deb.debian.org/debian buster/main amd64 librtmp1 amd64 2.4+20151223.gitfa8646d.1-2 [60.5 kB]\nGet:14 http://deb.debian.org/debian buster/main amd64 libssh2-1 amd64 1.8.0-2.1 [140 kB]\nGet:15 http://security.debian.org/debian-security buster/updates/main amd64 libcurl4 amd64 7.64.0-4+deb10u3 [333 kB]\nGet:16 http://deb.debian.org/debian buster/main amd64 libsasl2-modules amd64 2.1.27+dfsg-1+deb10u2 [104 kB]\nGet:17 http://deb.debian.org/debian buster/main amd64 publicsuffix all 20220811.1734-0+deb10u1 [127 kB]\nGet:18 http://security.debian.org/debian-security buster/updates/main amd64 curl amd64 7.64.0-4+deb10u3 [265 kB]\nGet:19 http://security.debian.org/debian-security buster/updates/main amd64 libpq5 amd64 11.18-0+deb10u1 [173 kB]\nGet:20 http://security.debian.org/debian-security buster/updates/main amd64 libpq-dev amd64 11.18-0+deb10u1 [167 kB]\n\u001b[91mdebconf: delaying package configuration, since apt-utils is not installed\n\u001b[0mFetched 2824 kB in 0s (74.1 MB/s)\nSelecting previously unselected package krb5-locales.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 6829 files and directories currently installed.)\r\nPreparing to unpack .../00-krb5-locales_1.17-3+deb10u5_all.deb ...\r\nUnpacking krb5-locales (1.17-3+deb10u5) ...\r\nSelecting previously unselected package libkeyutils1:amd64.\r\nPreparing to unpack .../01-libkeyutils1_1.6-6_amd64.deb ...\r\nUnpacking libkeyutils1:amd64 (1.6-6) ...\r\nSelecting previously unselected package libkrb5support0:amd64.\r\nPreparing to unpack .../02-libkrb5support0_1.17-3+deb10u5_amd64.deb ...\r\nUnpacking libkrb5support0:amd64 (1.17-3+deb10u5) ...\r\nSelecting previously unselected package libk5crypto3:amd64.\r\nPreparing to unpack .../03-libk5crypto3_1.17-3+deb10u5_amd64.deb ...\r\nUnpacking libk5crypto3:amd64 (1.17-3+deb10u5) ...\r\nSelecting previously unselected package libkrb5-3:amd64.\r\nPreparing to unpack .../04-libkrb5-3_1.17-3+deb10u5_amd64.deb ...\r\nUnpacking libkrb5-3:amd64 (1.17-3+deb10u5) ...\r\nSelecting previously unselected package libgssapi-krb5-2:amd64.\r\nPreparing to unpack .../05-libgssapi-krb5-2_1.17-3+deb10u5_amd64.deb ...\r\nUnpacking libgssapi-krb5-2:amd64 (1.17-3+deb10u5) ...\r\nSelecting previously unselected package libsasl2-modules-db:amd64.\r\nPreparing to unpack .../06-libsasl2-modules-db_2.1.27+dfsg-1+deb10u2_amd64.deb ...\r\nUnpacking libsasl2-modules-db:amd64 (2.1.27+dfsg-1+deb10u2) ...\r\nSelecting previously unselected package libsasl2-2:amd64.\r\nPreparing to unpack .../07-libsasl2-2_2.1.27+dfsg-1+deb10u2_amd64.deb ...\r\nUnpacking libsasl2-2:amd64 (2.1.27+dfsg-1+deb10u2) ...\r\nSelecting previously unselected package libldap-common.\r\nPreparing to unpack .../08-libldap-common_2.4.47+dfsg-3+deb10u7_all.deb ...\r\nUnpacking libldap-common (2.4.47+dfsg-3+deb10u7) ...\r\nSelecting previously unselected package libldap-2.4-2:amd64.\r\nPreparing to unpack .../09-libldap-2.4-2_2.4.47+dfsg-3+deb10u7_amd64.deb ...\r\nUnpacking libldap-2.4-2:amd64 (2.4.47+dfsg-3+deb10u7) ...\r\nSelecting previously unselected package libnghttp2-14:amd64.\r\nPreparing to unpack .../10-libnghttp2-14_1.36.0-2+deb10u1_amd64.deb ...\r\nUnpacking libnghttp2-14:amd64 (1.36.0-2+deb10u1) ...\r\nSelecting previously unselected package libpsl5:amd64.\r\nPreparing to unpack .../11-libpsl5_0.20.2-2_amd64.deb ...\r\nUnpacking libpsl5:amd64 (0.20.2-2) ...\r\nSelecting previously unselected package librtmp1:amd64.\r\nPreparing to unpack .../12-librtmp1_2.4+20151223.gitfa8646d.1-2_amd64.deb ...\r\nUnpacking librtmp1:amd64 (2.4+20151223.gitfa8646d.1-2) ...\r\nSelecting previously unselected package libssh2-1:amd64.\r\nPreparing to unpack .../13-libssh2-1_1.8.0-2.1_amd64.deb ...\r\nUnpacking libssh2-1:amd64 (1.8.0-2.1) ...\r\nSelecting previously unselected package libcurl4:amd64.\r\nPreparing to unpack .../14-libcurl4_7.64.0-4+deb10u3_amd64.deb ...\r\nUnpacking libcurl4:amd64 (7.64.0-4+deb10u3) ...\r\nSelecting previously unselected package curl.\r\nPreparing to unpack .../15-curl_7.64.0-4+deb10u3_amd64.deb ...\r\nUnpacking curl (7.64.0-4+deb10u3) ...\r\nSelecting previously unselected package libpq5:amd64.\r\nPreparing to unpack .../16-libpq5_11.18-0+deb10u1_amd64.deb ...\r\nUnpacking libpq5:amd64 (11.18-0+deb10u1) ...\r\nSelecting previously unselected package libpq-dev.\r\nPreparing to unpack .../17-libpq-dev_11.18-0+deb10u1_amd64.deb ...\r\nUnpacking libpq-dev (11.18-0+deb10u1) ...\r\nSelecting previously unselected package libsasl2-modules:amd64.\r\nPreparing to unpack .../18-libsasl2-modules_2.1.27+dfsg-1+deb10u2_amd64.deb ...\r\nUnpacking libsasl2-modules:amd64 (2.1.27+dfsg-1+deb10u2) ...\r\nSelecting previously unselected package publicsuffix.\r\nPreparing to unpack .../19-publicsuffix_20220811.1734-0+deb10u1_all.deb ...\r\nUnpacking publicsuffix (20220811.1734-0+deb10u1) ...\r\nSetting up libkeyutils1:amd64 (1.6-6) ...\r\nSetting up libpsl5:amd64 (0.20.2-2) ...\r\nSetting up libsasl2-modules:amd64 (2.1.27+dfsg-1+deb10u2) ...\r\nSetting up libnghttp2-14:amd64 (1.36.0-2+deb10u1) ...\r\nSetting up krb5-locales (1.17-3+deb10u5) ...\r\nSetting up libldap-common (2.4.47+dfsg-3+deb10u7) ...\r\nSetting up libkrb5support0:amd64 (1.17-3+deb10u5) ...\r\nSetting up libsasl2-modules-db:amd64 (2.1.27+dfsg-1+deb10u2) ...\r\nSetting up librtmp1:amd64 (2.4+20151223.gitfa8646d.1-2) ...\r\nSetting up libk5crypto3:amd64 (1.17-3+deb10u5) ...\r\nSetting up libsasl2-2:amd64 (2.1.27+dfsg-1+deb10u2) ...\r\nSetting up libssh2-1:amd64 (1.8.0-2.1) ...\r\nSetting up libkrb5-3:amd64 (1.17-3+deb10u5) ...\r\nSetting up publicsuffix (20220811.1734-0+deb10u1) ...\r\nSetting up libldap-2.4-2:amd64 (2.4.47+dfsg-3+deb10u7) ...\r\nSetting up libgssapi-krb5-2:amd64 (1.17-3+deb10u5) ...\r\nSetting up libcurl4:amd64 (7.64.0-4+deb10u3) ...\r\nSetting up curl (7.64.0-4+deb10u3) ...\r\nSetting up libpq5:amd64 (11.18-0+deb10u1) ...\r\nSetting up libpq-dev (11.18-0+deb10u1) ...\r\nProcessing triggers for libc-bin (2.28-10) ...\r\nRemoving intermediate container 365bdff83704\n ---> a958f9b47140\nStep 3/14 : WORKDIR /app\n ---> Running in 7561ff9e3673\nRemoving intermediate container 7561ff9e3673\n ---> 75c387d292a4\nStep 4/14 : RUN useradd -m python &&     chown python:python -R /app\n ---> Running in 73cf16e2cff4\nRemoving intermediate container 73cf16e2cff4\n ---> 8237125a6db6\nStep 5/14 : USER python\n ---> Running in c5cfaf507590\nRemoving intermediate container c5cfaf507590\n ---> 5e626f2b4c96\nStep 6/14 : ARG POETRY_VERSION=1.0.10\n ---> Running in 26a71ab45a33\nRemoving intermediate container 26a71ab45a33\n ---> ae952ee18f67\nStep 7/14 : ENV PYTHONUNBUFFERED=1\n ---> Running in 4acca17037a2\nRemoving intermediate container 4acca17037a2\n ---> f21d66618f0c\nStep 8/14 : ENV PATH=/home/python/.poetry/bin:/home/python/.local/bin:$PATH\n ---> Running in 99305fad5b44\nRemoving intermediate container 99305fad5b44\n ---> 18163e31f806\nStep 9/14 : RUN curl -sSL https://raw.githubusercontent.com/python-poetry/poetry/master/get-poetry.py | python\n ---> Running in 2447e1d61d46\nRetrieving Poetry metadata\n\nThis installer is deprecated, and scheduled for removal from the Poetry repository on or after January 1, 2023.\nSee https://github.com/python-poetry/poetry/issues/6377 for details.\n\nYou should migrate to https://install.python-poetry.org instead, which supports all versions of Poetry, and allows for `self update` of versions 1.1.7 or newer.\nInstructions are available at https://python-poetry.org/docs/#installation.\n\n# Welcome to Poetry!\n\nThis will download and install the latest version of Poetry,\na dependency and package manager for Python.\n\nIt will add the `poetry` command to Poetry's bin directory, located at:\n\n$HOME/.poetry/bin\n\nThis path will then be added to your `PATH` environment variable by\nmodifying the profile file located at:\n\n$HOME/.profile\n\nYou can uninstall at any time by executing this script with the --uninstall option,\nand these changes will be reverted.\n\nInstalling version: 1.0.10\n  - Downloading poetry-1.0.10-linux.tar.gz (29.66MB)\n\nPoetry (1.0.10) is installed now. Great!\n\nTo get started you need Poetry's bin directory ($HOME/.poetry/bin) in your `PATH`\nenvironment variable. Next time you log in this will be done\nautomatically.\n\nTo configure your current shell run `source $HOME/.poetry/env`\n\nRemoving intermediate container 2447e1d61d46\n ---> 598ab41ae866\nStep 10/14 : ADD pyproject.toml .\n ---> 4988d9d5ebac\nStep 11/14 : ADD poetry.lock .\n ---> b9e1eb922bf1\nStep 12/14 : RUN poetry config virtualenvs.create false &&     poetry run pip install --user -U pip &&     poetry install --no-dev &&     \"yes\" | poetry cache clear --all pypi\n ---> Running in 53a414a829d9\nSkipping virtualenv creation, as specified in config file.\nCollecting pip\n  Downloading pip-22.3.1-py3-none-any.whl (2.1 MB)\nInstalling collected packages: pip\nSuccessfully installed pip-22.3.1\n\u001b[91mWARNING: You are using pip version 20.2.3; however, version 22.3.1 is available.\nYou should consider upgrading via the '/usr/local/bin/python -m pip install --upgrade pip' command.\n\u001b[0mSkipping virtualenv creation, as specified in config file.\nInstalling dependencies from lock file\n\n\nPackage operations: 53 installs, 0 updates, 0 removals\n\n  - Installing pyasn1 (0.4.8)\n  - Installing six (1.15.0)\n  - Installing cachetools (4.1.1)\n  - Installing certifi (2020.6.20)\n  - Installing chardet (3.0.4)\n  - Installing idna (2.10)\n  - Installing markupsafe (1.1.1)\n  - Installing protobuf (3.12.4)\n  - Installing pyasn1-modules (0.2.8)\n  - Installing pycparser (2.20)\n  - Installing rsa (4.6)\n  - Installing urllib3 (1.25.10)\n  - Installing vine (1.3.0)\n  - Installing amqp (2.6.1)\n  - Installing cffi (1.14.1)\n  - Installing click (7.1.2)\n  - Installing google-auth (1.20.1)\n  - Installing googleapis-common-protos (1.52.0)\n  - Installing itsdangerous (1.1.0)\n  - Installing jinja2 (2.11.2)\n  - Installing pytz (2020.1)\n  - Installing requests (2.24.0)\n  - Installing werkzeug (1.0.1)\n  - Installing billiard (3.6.3.0)\n  - Installing flask (1.1.2)\n  - Installing google-api-core (1.22.1)\n  - Installing google-crc32c (0.1.0)\n  - Installing kombu (4.6.11)\n  - Installing mako (1.1.3)\n  - Installing python-dateutil (2.8.1)\n  - Installing python-editor (1.0.4)\n  - Installing sqlalchemy (1.3.18)\n  - Installing alembic (1.4.2)\n  - Installing celery (4.4.7)\n  - Installing flask-sqlalchemy (2.4.4)\n  - Installing google-cloud-core (1.4.1)\n  - Installing google-resumable-media (0.7.1)\n  - Installing humanize (2.6.0)\n  - Installing limits (1.5.1)\n  - Installing prometheus-client (0.8.0)\n  - Installing tornado (6.0.4)\n  - Installing wtforms (2.3.3)\n  - Installing flask-httpauth (4.1.0)\n  - Installing flask-limiter (1.3.1)\n  - Installing flask-login (0.4.1)\n  - Installing flask-migrate (2.5.3)\n  - Installing flask-wtf (0.14.3)\n  - Installing flower (0.9.5)\n  - Installing github-flask (3.2.0)\n  - Installing google-cloud-bigquery (1.26.1)\n  - Installing gunicorn (19.10.0)\n  - Installing psycopg2-binary (2.8.5)\n  - Installing redis (3.5.3)\nNo cache entries for pypi\nRemoving intermediate container 53a414a829d9\n ---> 096510364b77\nStep 13/14 : ADD . .\n ---> 014994a9163a\nStep 14/14 : ENTRYPOINT [\"./docker-entrypoint.sh\"]\n ---> Running in a5384e48e006\nRemoving intermediate container a5384e48e006\n ---> 60f9eb7b9f61\nSuccessfully built 60f9eb7b9f61\nSuccessfully tagged pypistats.org:latest\n","stderr":"","imageSize":319151297},"repair":{"violations":[],"repairedDockerfile":"FROM python:3.8.5-slim\n\n# Add build deps for python packages\n# libpq-dev is required to install psycopg2-binary\n# curl is used to install poetry\nRUN apt-get update && \\\n    apt-get install -y curl libpq-dev && \\\n    apt-get clean\n\n# Set the working directory to /app\nWORKDIR /app\n\n# Create python user to avoid having to run as root\nRUN useradd -m python && \\\n    chown python:python -R /app\n# Set the user\nUSER python\n\n# Set the poetry version\nARG POETRY_VERSION=1.0.10\n# Set to ensure logs are output promptly\nENV PYTHONUNBUFFERED=1\n# Update the path\nENV PATH=/home/python/.poetry/bin:/home/python/.local/bin:$PATH\n\n# Install vendored poetry\nRUN curl -sSL https://raw.githubusercontent.com/python-poetry/poetry/master/get-poetry.py | python\n\n# Add poetry stuff\nADD pyproject.toml .\nADD poetry.lock .\n\n# Install all the dependencies and cleanup\nRUN poetry config virtualenvs.create false && \\\n    poetry run pip install --user -U pip && \\\n    poetry install --no-dev && \\\n    \"yes\" | poetry cache clear --all pypi\n\n# Add everything\nADD . .\n\n# Set the entrypoint script\nENTRYPOINT [\"./docker-entrypoint.sh\"]\n"},"endTime":1672020076211}