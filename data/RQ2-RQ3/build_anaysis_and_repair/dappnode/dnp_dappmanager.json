{"repository":"https://github.com/dappnode/dnp_dappmanager","dockerfilePath":"Dockerfile","startTime":1672003426271,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/dappnode/dnp_dappmanager'...\n","error":null,"commit":"6bf15c0e5cc9bd40e1ce0076984aedc34f0c7a9f"},"originalBuild":{"startTimestamp":1672003427979,"endTimestamp":1672003733858,"error":null,"stdout":"Sending build context to Docker daemon  10.76MB\r\r\nStep 1/42 : ARG NODE_VERSION=18.12.1\nStep 2/42 : FROM --platform=${BUILDPLATFORM:-amd64} node:${NODE_VERSION}-alpine as build-monorepo\n18.12.1-alpine: Pulling from library/node\nDigest: sha256:a136ed7b0df71082cdb171f36d640ea3b392a5c70401c642326acee767b8c540\nStatus: Downloaded newer image for node:18.12.1-alpine\n ---> 6d7b7852bcd3\nStep 3/42 : WORKDIR /app\n ---> Running in 5f848b931ef2\nRemoving intermediate container 5f848b931ef2\n ---> 1a67dd5c673a\nStep 4/42 : RUN apk add --no-cache python3 build-base bash\n ---> Running in 4c5d97be843d\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/30) Installing ncurses-terminfo-base (6.3_p20221119-r0)\n(2/30) Installing ncurses-libs (6.3_p20221119-r0)\n(3/30) Installing readline (8.2.0-r0)\n(4/30) Installing bash (5.2.15-r0)\nExecuting bash-5.2.15-r0.post-install\n(5/30) Installing binutils (2.39-r2)\n(6/30) Installing libmagic (5.43-r0)\n(7/30) Installing file (5.43-r0)\n(8/30) Installing libgomp (12.2.1_git20220924-r4)\n(9/30) Installing libatomic (12.2.1_git20220924-r4)\n(10/30) Installing gmp (6.2.1-r2)\n(11/30) Installing isl25 (0.25-r0)\n(12/30) Installing mpfr4 (4.1.0-r0)\n(13/30) Installing mpc1 (1.2.1-r1)\n(14/30) Installing gcc (12.2.1_git20220924-r4)\n(15/30) Installing libstdc++-dev (12.2.1_git20220924-r4)\n(16/30) Installing musl-dev (1.2.3-r4)\n(17/30) Installing libc-dev (0.7.2-r3)\n(18/30) Installing g++ (12.2.1_git20220924-r4)\n(19/30) Installing make (4.3-r1)\n(20/30) Installing fortify-headers (1.1-r1)\n(21/30) Installing patch (2.7.6-r8)\n(22/30) Installing build-base (0.5-r3)\n(23/30) Installing libbz2 (1.0.8-r4)\n(24/30) Installing libexpat (2.5.0-r0)\n(25/30) Installing libffi (3.4.4-r0)\n(26/30) Installing gdbm (1.23-r0)\n(27/30) Installing xz-libs (5.2.9-r0)\n(28/30) Installing mpdecimal (2.5.1-r1)\n(29/30) Installing sqlite-libs (3.40.0-r0)\n(30/30) Installing python3 (3.10.9-r1)\nExecuting busybox-1.35.0-r29.trigger\nOK: 296 MiB in 47 packages\nRemoving intermediate container 4c5d97be843d\n ---> 2996fcb2b597\nStep 5/42 : COPY package.json yarn.lock lerna.json ./\n ---> 7ae6944f517b\nStep 6/42 : COPY patches patches/\n ---> 594233371377\nStep 7/42 : RUN yarn --frozen-lockfile --non-interactive --ignore-scripts --ignore-optional\n ---> Running in d2ce3e728b29\nyarn install v1.22.19\n[1/4] Resolving packages...\n[2/4] Fetching packages...\n[3/4] Linking dependencies...\n\u001b[91mwarning \"lerna > @lerna/version > @lerna/github-client > @octokit/rest > @octokit/plugin-request-log@1.0.4\" has unmet peer dependency \"@octokit/core@>=3\".\n\u001b[0m\u001b[91mwarning \" > ts-node@10.8.1\" has unmet peer dependency \"@types/node@*\".\nwarning \" > ts-node@10.8.1\" has unmet peer dependency \"typescript@>=2.7\".\n\u001b[0m[4/4] Building fresh packages...\n\u001b[91mwarning Ignored scripts due to flag.\n\u001b[0mDone in 19.17s.\nRemoving intermediate container d2ce3e728b29\n ---> 364510cc6f5e\nStep 8/42 : COPY packages/admin-ui/package.json   packages/admin-ui/\n ---> a4cf7dcadf60\nStep 9/42 : COPY packages/dappmanager/package.json   packages/dappmanager/\n ---> bb082cd74b29\nStep 10/42 : RUN yarn bootstrap --production\n ---> Running in 7ee5a2e9fa72\nyarn run v1.22.19\n$ lerna bootstrap -- --frozen-lockfile --non-interactive --ignore-optional --production\n\u001b[91mlerna\u001b[0m\u001b[91m notice cli v3.22.1\n\u001b[0m\u001b[91mlerna info\u001b[0m\u001b[91m versioning independent\n\u001b[0m\u001b[91mlerna \u001b[0m\u001b[91minfo bootstrap root only\n\u001b[0m[1/4] Resolving packages...\n[2/4] Fetching packages...\n\u001b[91mwarning ipfs-car@0.7.0: Invalid bin entry for \"ðŸš˜\" (in \"ipfs-car\").\n\u001b[0m[3/4] Linking dependencies...\n\u001b[91mwarning \"lerna > @lerna/version > @lerna/github-client > @octokit/rest > @octokit/plugin-request-log@1.0.4\" has unmet peer dependency \"@octokit/core@>=3\".\n\u001b[0m\u001b[91mwarning \" > ts-node@10.8.1\" has unmet peer dependency \"@types/node@*\".\nwarning \" > ts-node@10.8.1\" has unmet peer dependency \"typescript@>=2.7\".\n\u001b[0m\u001b[91mwarning \"workspace-aggregator-a7d8d0a1-11ff-45c4-994f-c9169d7984d3 > @dappnode/admin-ui > bootstrap@4.6.1\" has unmet peer dependency \"jquery@1.9.1 - 3\".\nwarning \"workspace-aggregator-a7d8d0a1-11ff-45c4-994f-c9169d7984d3 > @dappnode/admin-ui > bootstrap@4.6.1\" has unmet peer dependency \"popper.js@^1.16.1\".\n\u001b[0m\u001b[91mwarning \"workspace-aggregator-a7d8d0a1-11ff-45c4-994f-c9169d7984d3 > @dappnode/dappmanager > webpack-cli@3.3.12\" has incorrect peer dependency \"webpack@4.x.x\".\n\u001b[0m\u001b[91mwarning \"workspace-aggregator-a7d8d0a1-11ff-45c4-994f-c9169d7984d3 > @dappnode/admin-ui > react-scripts > tailwindcss@3.0.23\" has unmet peer dependency \"autoprefixer@^10.0.2\".\n\u001b[0m\u001b[91mwarning \"workspace-aggregator-a7d8d0a1-11ff-45c4-994f-c9169d7984d3 > @dappnode/admin-ui > react-scripts > eslint-config-react-app > eslint-plugin-flowtype@8.0.3\" has unmet peer dependency \"@babel/plugin-syntax-flow@^7.14.5\".\nwarning \"workspace-aggregator-a7d8d0a1-11ff-45c4-994f-c9169d7984d3 > @dappnode/admin-ui > react-scripts > eslint-config-react-app > eslint-plugin-flowtype@8.0.3\" has unmet peer dependency \"@babel/plugin-transform-react-jsx@^7.14.9\".\n\u001b[0m\u001b[91mwarning Workspaces can only be enabled in private projects.\nwarning Workspaces can only be enabled in private projects.\n\u001b[0m[4/4] Building fresh packages...\n$ CI=true patch-package\npatch-package 6.4.7\nApplying patches...\nany-observable@0.3.0 âœ”\nDone in 63.36s.\nRemoving intermediate container 7ee5a2e9fa72\n ---> a3ba27052367\nStep 11/42 : WORKDIR /app/packages/admin-ui/\n ---> Running in d2b2c8c2bc2d\nRemoving intermediate container d2b2c8c2bc2d\n ---> c178ef6fd287\nStep 12/42 : COPY packages/admin-ui/ .\n ---> 74050ca5dfa9\nStep 13/42 : ENV REACT_APP_API_URL /\n ---> Running in 9cbf27559050\nRemoving intermediate container 9cbf27559050\n ---> 8566242e358f\nStep 14/42 : RUN yarn build\n ---> Running in 528fc0e14b63\nyarn run v1.22.19\n$ npm run generate\n\n> @dappnode/admin-ui@0.1.0 generate\n> cd ../.. && node packages/admin-ui/src/common/validation/generateSchemas.js packages/admin-ui/tsconfig.json packages/admin-ui/src/common/schemas/\n\nGenerating .schema.json of RoutesArguments\nGenerating .schema.json of RoutesReturn\nGenerating .schema.json of SubscriptionsArguments\n\u001b[91mnpm\u001b[0m\u001b[91m notice\u001b[0m\u001b[91m \n\u001b[0m\u001b[91mnpm\u001b[0m\u001b[91m \u001b[0m\u001b[91mnotice\u001b[0m\u001b[91m New major version of npm available! 8.19.2 -> 9.2.0\n\u001b[0m\u001b[91mnpm\u001b[0m\u001b[91m \u001b[0m\u001b[91mnotice\u001b[0m\u001b[91m Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm \u001b[0m\u001b[91mnotice\u001b[0m\u001b[91m Run `npm install -g npm@9.2.0` to update!\n\u001b[0m\u001b[91mnpm\u001b[0m\u001b[91m \u001b[0m\u001b[91mnotice \n\u001b[0m$ react-scripts build\nCreating an optimized production build...\n\u001b[91mBrowserslist: caniuse-lite is outdated. Please run:\n  npx browserslist@latest --update-db\n  Why you should do it regularly: https://github.com/browserslist/browserslist#browsers-data-updating\n\u001b[0m\u001b[91mBrowserslist: caniuse-lite is outdated. Please run:\n  npx browserslist@latest --update-db\n  Why you should do it regularly: https://github.com/browserslist/browserslist#browsers-data-updating\n\u001b[0mCompiled successfully.\n\nFile sizes after gzip:\n\n  375.41 kB  build/static/js/main.bf94eb55.js\n  36.15 kB   build/static/css/main.5bc25667.css\n  20.49 kB   build/static/js/755.bf38f6cd.chunk.js\n\nThe project was built assuming it is hosted at /.\nYou can control this with the homepage field in your package.json.\n\nThe build folder is ready to be deployed.\nYou may serve it with a static server:\n\n  npm install -g serve\n  serve -s build\n\nFind out more about deployment here:\n\n  https://cra.link/deployment\n\nDone in 60.42s.\nRemoving intermediate container 528fc0e14b63\n ---> 40931362b9b8\nStep 15/42 : WORKDIR /app/packages/dappmanager/\n ---> Running in 99fb10d2ac54\nRemoving intermediate container 99fb10d2ac54\n ---> 619ef07895ff\nStep 16/42 : COPY packages/dappmanager/ .\n ---> 77e6bbec87a0\nStep 17/42 : RUN yarn build\n ---> Running in cb03c492ed55\nyarn run v1.22.19\n$ webpack\nasset index.js 21.3 MiB [emitted] (name: main) 1 related asset\norphan modules 2.58 MiB [orphan] 599 modules\nruntime modules 1.4 KiB 7 modules\nmodules by path ../ 19.3 MiB\n  javascript modules 18.3 MiB\n    modules by path ../../node_modules/ 18.3 MiB 1941 modules\n    modules by path ../admin-ui/src/common/ 17.7 KiB 8 modules\n  json modules 1010 KiB\n    modules by path ../../node_modules/ 911 KiB 52 modules\n    modules by path ../admin-ui/src/common/ 103 KiB 3 modules\nmodules by path ./ 1.36 MiB\n  modules by path ./src/ 1.2 MiB\n    javascript modules 1.19 MiB 411 modules\n    json modules 8.49 KiB 5 modules\n  modules by path ./node_modules/ 162 KiB 19 modules\n+ 32 modules\n\nWARNING in ../../node_modules/any-observable/register.js 15:14-37\nCritical dependency: the request of a dependency is an expression\n @ ../../node_modules/any-observable/index.js 2:17-38\n @ ../../node_modules/@samverschueren/stream-to-observable/index.js 2:19-44\n @ ../../node_modules/listr/lib/task.js 3:27-74\n @ ../../node_modules/listr/index.js 3:13-34\n @ ../../node_modules/@dappnode/dappnodesdk/dist/commands/build.js 18:32-48\n @ ../../node_modules/@dappnode/dappnodesdk/dist/index.js 18:16-43\n @ ./src/modules/compose/labelsDb.ts 5:22-54\n @ ./src/modules/compose/index.ts 17:13-34\n @ ./src/modules/globalEnvs.ts 43:18-47\n @ ./src/index.ts 33:21-52\n\nWARNING in ../../node_modules/bunyan/lib/bunyan.js 79:17-48\nModule not found: Error: Can't resolve 'dtrace-provider' in '/app/node_modules/bunyan/lib'\n @ ../../node_modules/debugnyan/dist/index.js 14:14-31\n @ ../../node_modules/bitcoin-core/dist/src/index.js 16:40-60\n @ ./src/modules/chains/drivers/bitcoin.ts 13:15-38\n @ ./src/modules/chains/drivers/index.ts 14:18-38\n @ ./src/modules/chains/index.ts 16:18-38\n @ ./src/calls/chainDataGet.ts 17:17-45\n @ ./src/calls/index.ts 27:21-46\n @ ./src/index.ts 39:27-45\n\nWARNING in ../../node_modules/bunyan/lib/bunyan.js 90:28-58\nModule not found: Error: Can't resolve 'safe-json-stringify' in '/app/node_modules/bunyan/lib'\n @ ../../node_modules/debugnyan/dist/index.js 14:14-31\n @ ../../node_modules/bitcoin-core/dist/src/index.js 16:40-60\n @ ./src/modules/chains/drivers/bitcoin.ts 13:15-38\n @ ./src/modules/chains/drivers/index.ts 14:18-38\n @ ./src/modules/chains/index.ts 16:18-38\n @ ./src/calls/chainDataGet.ts 17:17-45\n @ ./src/calls/index.ts 27:21-46\n @ ./src/index.ts 39:27-45\n\nWARNING in ../../node_modules/bunyan/lib/bunyan.js 100:13-31\nModule not found: Error: Can't resolve 'mv' in '/app/node_modules/bunyan/lib'\n @ ../../node_modules/debugnyan/dist/index.js 14:14-31\n @ ../../node_modules/bitcoin-core/dist/src/index.js 16:40-60\n @ ./src/modules/chains/drivers/bitcoin.ts 13:15-38\n @ ./src/modules/chains/drivers/index.ts 14:18-38\n @ ./src/modules/chains/index.ts 16:18-38\n @ ./src/calls/chainDataGet.ts 17:17-45\n @ ./src/calls/index.ts 27:21-46\n @ ./src/index.ts 39:27-45\n\nWARNING in ../../node_modules/engine.io/node_modules/ws/lib/buffer-util.js 103:21-42\nModule not found: Error: Can't resolve 'bufferutil' in '/app/node_modules/engine.io/node_modules/ws/lib'\n @ ../../node_modules/engine.io/node_modules/ws/lib/websocket.js 31:21-45\n @ ../../node_modules/engine.io/node_modules/ws/index.js 3:18-44\n @ ../../node_modules/engine.io/build/server.js 12:13-26\n @ ../../node_modules/engine.io/build/engine.io.js 5:17-36\n @ ../../node_modules/socket.io/dist/index.js 32:20-40\n @ ./src/api/startHttpApi.ts 23:36-56\n @ ./src/startDappmanager.ts 7:23-52\n @ ./src/index.ts 47:27-56\n\nWARNING in ../../node_modules/engine.io/node_modules/ws/lib/validation.js 109:22-47\nModule not found: Error: Can't resolve 'utf-8-validate' in '/app/node_modules/engine.io/node_modules/ws/lib'\n @ ../../node_modules/engine.io/node_modules/ws/lib/receiver.js 13:43-66\n @ ../../node_modules/engine.io/node_modules/ws/index.js 7:21-46\n @ ../../node_modules/engine.io/build/server.js 12:13-26\n @ ../../node_modules/engine.io/build/engine.io.js 5:17-36\n @ ../../node_modules/socket.io/dist/index.js 32:20-40\n @ ./src/api/startHttpApi.ts 23:36-56\n @ ./src/startDappmanager.ts 7:23-52\n @ ./src/index.ts 47:27-56\n\nWARNING in ../../node_modules/express/lib/view.js 81:13-25\nCritical dependency: the request of a dependency is an expression\n @ ../../node_modules/express/lib/application.js 22:11-28\n @ ../../node_modules/express/lib/express.js 18:12-36\n @ ../../node_modules/express/index.js 11:0-41\n @ ./src/api/startTestApi.ts 32:34-52\n @ ./src/index.ts 51:23-52\n\nWARNING in ../../node_modules/keyv/src/index.js 23:14-40\nCritical dependency: the request of a dependency is an expression\n @ ../../node_modules/cacheable-lookup/index.js 5:13-28\n @ ../../node_modules/got/dist/source/normalize-arguments.js 11:27-54\n @ ../../node_modules/got/dist/source/create.js 7:30-62\n @ ../../node_modules/got/dist/source/index.js 7:17-36\n @ ../../node_modules/@dappnode/dappnodesdk/dist/commands/from_github.js 17:30-44\n @ ../../node_modules/@dappnode/dappnodesdk/dist/index.js 19:22-55\n @ ./src/modules/compose/labelsDb.ts 5:22-54\n @ ./src/modules/compose/index.ts 17:13-34\n @ ./src/modules/globalEnvs.ts 43:18-47\n @ ./src/index.ts 33:21-52\n\nWARNING in ../../node_modules/prettier/index.js 6429:17-61\nCritical dependency: the request of a dependency is an expression\n @ ../../node_modules/@dappnode/dappnodesdk/dist/files/compose/writeCompose.js 8:35-54\n @ ../../node_modules/@dappnode/dappnodesdk/dist/files/compose/index.js 30:21-46\n @ ../../node_modules/@dappnode/dappnodesdk/dist/commands/init.js 21:18-45\n @ ../../node_modules/@dappnode/dappnodesdk/dist/index.js 21:15-41\n @ ./src/modules/compose/labelsDb.ts 5:22-54\n @ ./src/modules/compose/index.ts 17:13-34\n @ ./src/modules/globalEnvs.ts 43:18-47\n @ ./src/index.ts 33:21-52\n\nWARNING in ../../node_modules/prettier/index.js 15721:8-15\nCritical dependency: require function is used in a way in which dependencies cannot be statically extracted\n @ ../../node_modules/@dappnode/dappnodesdk/dist/files/compose/writeCompose.js 8:35-54\n @ ../../node_modules/@dappnode/dappnodesdk/dist/files/compose/index.js 30:21-46\n @ ../../node_modules/@dappnode/dappnodesdk/dist/commands/init.js 21:18-45\n @ ../../node_modules/@dappnode/dappnodesdk/dist/index.js 21:15-41\n @ ./src/modules/compose/labelsDb.ts 5:22-54\n @ ./src/modules/compose/index.ts 17:13-34\n @ ./src/modules/globalEnvs.ts 43:18-47\n @ ./src/index.ts 33:21-52\n\nWARNING in ../../node_modules/prettier/index.js 18209:30-49\nCritical dependency: the request of a dependency is an expression\n @ ../../node_modules/@dappnode/dappnodesdk/dist/files/compose/writeCompose.js 8:35-54\n @ ../../node_modules/@dappnode/dappnodesdk/dist/files/compose/index.js 30:21-46\n @ ../../node_modules/@dappnode/dappnodesdk/dist/commands/init.js 21:18-45\n @ ../../node_modules/@dappnode/dappnodesdk/dist/index.js 21:15-41\n @ ./src/modules/compose/labelsDb.ts 5:22-54\n @ ./src/modules/compose/index.ts 17:13-34\n @ ./src/modules/globalEnvs.ts 43:18-47\n @ ./src/index.ts 33:21-52\n\nWARNING in ../../node_modules/prettier/index.js 37189:9-48\nCritical dependency: the request of a dependency is an expression\n @ ../../node_modules/@dappnode/dappnodesdk/dist/files/compose/writeCompose.js 8:35-54\n @ ../../node_modules/@dappnode/dappnodesdk/dist/files/compose/index.js 30:21-46\n @ ../../node_modules/@dappnode/dappnodesdk/dist/commands/init.js 21:18-45\n @ ../../node_modules/@dappnode/dappnodesdk/dist/index.js 21:15-41\n @ ./src/modules/compose/labelsDb.ts 5:22-54\n @ ./src/modules/compose/index.ts 17:13-34\n @ ./src/modules/globalEnvs.ts 43:18-47\n @ ./src/index.ts 33:21-52\n\nWARNING in ../../node_modules/prettier/third-party.js 83:33-50\nCritical dependency: the request of a dependency is an expression\n @ ../../node_modules/prettier/index.js 18188:21-48 37134:21-48\n @ ../../node_modules/@dappnode/dappnodesdk/dist/files/compose/writeCompose.js 8:35-54\n @ ../../node_modules/@dappnode/dappnodesdk/dist/files/compose/index.js 30:21-46\n @ ../../node_modules/@dappnode/dappnodesdk/dist/commands/init.js 21:18-45\n @ ../../node_modules/@dappnode/dappnodesdk/dist/index.js 21:15-41\n @ ./src/modules/compose/labelsDb.ts 5:22-54\n @ ./src/modules/compose/index.ts 17:13-34\n @ ./src/modules/globalEnvs.ts 43:18-47\n @ ./src/index.ts 33:21-52\n\nWARNING in ../../node_modules/ssh2/lib/protocol/constants.js 7:12-35\nModule not found: Error: Can't resolve 'cpu-features' in '/app/node_modules/ssh2/lib/protocol'\n @ ../../node_modules/ssh2/lib/server.js 26:4-38\n @ ../../node_modules/ssh2/lib/index.js 33:10-32\n @ ../../node_modules/docker-modem/lib/ssh.js 1:13-35\n @ ../../node_modules/docker-modem/lib/modem.js 6:8-24\n @ ../../node_modules/dockerode/lib/docker.js 2:10-33\n @ ./src/modules/docker/api/docker.ts 7:36-56\n @ ./src/modules/docker/api/container.ts 13:17-36\n @ ./src/modules/docker/api/index.ts 17:13-35\n @ ./src/utils/getDappmanagerImage.ts 15:14-46\n @ ./src/initializeDb.ts 41:46-84\n @ ./src/index.ts 32:39-64\n\nWARNING in ../../node_modules/ssh2/lib/protocol/crypto.js 30:12-60\nModule not found: Error: Can't resolve './crypto/build/Release/sshcrypto.node' in '/app/node_modules/ssh2/lib/protocol'\n @ ../../node_modules/ssh2/lib/server.js 27:29-60\n @ ../../node_modules/ssh2/lib/index.js 33:10-32\n @ ../../node_modules/docker-modem/lib/ssh.js 1:13-35\n @ ../../node_modules/docker-modem/lib/modem.js 6:8-24\n @ ../../node_modules/dockerode/lib/docker.js 2:10-33\n @ ./src/modules/docker/api/docker.ts 7:36-56\n @ ./src/modules/docker/api/container.ts 13:17-36\n @ ./src/modules/docker/api/index.ts 17:13-35\n @ ./src/utils/getDappmanagerImage.ts 15:14-46\n @ ./src/initializeDb.ts 41:46-84\n @ ./src/index.ts 32:39-64\n\nWARNING in ../../node_modules/ws/lib/buffer-util.js 105:21-42\nModule not found: Error: Can't resolve 'bufferutil' in '/app/node_modules/ws/lib'\n @ ../../node_modules/ws/lib/websocket.js 24:21-45\n @ ../../node_modules/ws/index.js 3:18-44\n @ ../../node_modules/@ethersproject/providers/lib.esm/ws.js 6:9-18\n @ ../../node_modules/@ethersproject/providers/lib.esm/websocket-provider.js 14:0-33 52:51-60 283:46-66\n @ ../../node_modules/@ethersproject/providers/lib.esm/index.js 18:0-57 41:31-48 70:0-84:12\n @ ../../node_modules/ethers/lib.esm/ethers.js 7:0-54 8:0-62 19:0-22:20 19:0-22:20\n @ ../../node_modules/ethers/lib.esm/index.js 3:0-35 7:28-34 11:0-18 12:0-15:36 12:0-15:36 12:0-15:36 12:0-15:36 12:0-15:36 12:0-15:36 12:0-15:36 12:0-15:36 12:0-15:36 12:0-15:36 12:0-15:36 12:0-15:36 12:0-15:36 12:0-15:36 12:0-15:36 12:0-15:36 12:0-15:36 12:0-15:36\n @ ./src/modules/dyndns/generateKeys.ts\n @ ./src/modules/dyndns/index.ts 9:39-64\n @ ./src/initializeDb.ts 40:28-55\n @ ./src/index.ts 32:39-64\n\nWARNING in ../../node_modules/ws/lib/validation.js 86:20-45\nModule not found: Error: Can't resolve 'utf-8-validate' in '/app/node_modules/ws/lib'\n @ ../../node_modules/ws/lib/sender.js 7:30-53\n @ ../../node_modules/ws/index.js 8:19-42\n @ ../../node_modules/@ethersproject/providers/lib.esm/ws.js 6:9-18\n @ ../../node_modules/@ethersproject/providers/lib.esm/websocket-provider.js 14:0-33 52:51-60 283:46-66\n @ ../../node_modules/@ethersproject/providers/lib.esm/index.js 18:0-57 41:31-48 70:0-84:12\n @ ../../node_modules/ethers/lib.esm/ethers.js 7:0-54 8:0-62 19:0-22:20 19:0-22:20\n @ ../../node_modules/ethers/lib.esm/index.js 3:0-35 7:28-34 11:0-18 12:0-15:36 12:0-15:36 12:0-15:36 12:0-15:36 12:0-15:36 12:0-15:36 12:0-15:36 12:0-15:36 12:0-15:36 12:0-15:36 12:0-15:36 12:0-15:36 12:0-15:36 12:0-15:36 12:0-15:36 12:0-15:36 12:0-15:36 12:0-15:36\n @ ./src/modules/dyndns/generateKeys.ts\n @ ./src/modules/dyndns/index.ts 9:39-64\n @ ./src/initializeDb.ts 40:28-55\n @ ./src/index.ts 32:39-64\n\n17 warnings have detailed information that is not shown.\nUse 'stats.errorDetails: true' resp. '--stats-error-details' to show it.\n\nwebpack 5.69.0 compiled with 17 warnings in 23919 ms\nDone in 25.39s.\nRemoving intermediate container cb03c492ed55\n ---> 3ae8195b02ae\nStep 18/42 : FROM --platform=${BUILDPLATFORM:-amd64} node:${NODE_VERSION}-alpine as git-data\n ---> 6d7b7852bcd3\nStep 19/42 : WORKDIR /usr/src/app\n ---> Running in 3b41a4299f2d\nRemoving intermediate container 3b41a4299f2d\n ---> ca7f4a75231e\nStep 20/42 : RUN apk add --no-cache git\n ---> Running in 3e5928e2d72e\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/7) Installing ca-certificates (20220614-r3)\n(2/7) Installing brotli-libs (1.0.9-r9)\n(3/7) Installing nghttp2-libs (1.51.0-r0)\n(4/7) Installing libcurl (7.87.0-r0)\n(5/7) Installing libexpat (2.5.0-r0)\n(6/7) Installing pcre2 (10.42-r0)\n(7/7) Installing git (2.38.2-r0)\nExecuting busybox-1.35.0-r29.trigger\nExecuting ca-certificates-20220614-r3.trigger\nOK: 18 MiB in 24 packages\nRemoving intermediate container 3e5928e2d72e\n ---> f849a79f4fe1\nStep 21/42 : COPY .git .git\n ---> b329cf1ecdbc\nStep 22/42 : COPY dappnode_package.json .\n ---> 55ffc6c4dfcc\nStep 23/42 : COPY docker/getGitData.js .\n ---> 940e6f5d632d\nStep 24/42 : RUN node getGitData /usr/src/app/.git-data.json\n ---> Running in 5f86232f7ac9\n{\n  version: '0.2.43',\n  branch: 'develop',\n  commit: '6bf15c0e5cc9bd40e1ce0076984aedc34f0c7a9f'\n}\nRemoving intermediate container 5f86232f7ac9\n ---> 11b6b4470266\nStep 25/42 : FROM node:${NODE_VERSION}-alpine as build-binaries\n ---> 6d7b7852bcd3\nStep 26/42 : RUN apk add --no-cache bind-tools docker\n ---> Running in dee2d0cfad21\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/26) Installing fstrm (0.6.1-r1)\n(2/26) Installing krb5-conf (1.0-r2)\n(3/26) Installing libcom_err (1.46.5-r4)\n(4/26) Installing keyutils-libs (1.6.3-r1)\n(5/26) Installing libverto (0.3.2-r1)\n(6/26) Installing krb5-libs (1.20.1-r0)\n(7/26) Installing nghttp2-libs (1.51.0-r0)\n(8/26) Installing protobuf-c (1.4.1-r1)\n(9/26) Installing libuv (1.44.2-r0)\n(10/26) Installing xz-libs (5.2.9-r0)\n(11/26) Installing libxml2 (2.10.3-r1)\n(12/26) Installing bind-libs (9.18.10-r0)\n(13/26) Installing bind-tools (9.18.10-r0)\n(14/26) Installing ca-certificates (20220614-r3)\n(15/26) Installing libseccomp (2.5.4-r0)\n(16/26) Installing runc (1.1.4-r4)\n(17/26) Installing containerd (1.6.12-r1)\n(18/26) Installing libmnl (1.0.5-r0)\n(19/26) Installing libnftnl (1.2.4-r0)\n(20/26) Installing iptables (1.8.8-r2)\n(21/26) Installing ip6tables (1.8.8-r2)\n(22/26) Installing tini-static (0.19.0-r1)\n(23/26) Installing device-mapper-libs (2.03.17-r1)\n(24/26) Installing docker-engine (20.10.21-r2)\n(25/26) Installing docker-cli (20.10.21-r2)\n(26/26) Installing docker (20.10.21-r2)\nExecuting docker-20.10.21-r2.pre-install\nExecuting busybox-1.35.0-r29.trigger\nExecuting ca-certificates-20220614-r3.trigger\nOK: 250 MiB in 43 packages\nRemoving intermediate container dee2d0cfad21\n ---> 137d4faf16f5\nStep 27/42 : FROM node:${NODE_VERSION}-alpine\n ---> 6d7b7852bcd3\nStep 28/42 : ENV DOCKER_COMPOSE_VERSION v2.5.0\n ---> Running in b0aab1da48ad\nRemoving intermediate container b0aab1da48ad\n ---> 72cb4af8cdb6\nStep 29/42 : RUN apk add --no-cache curl bind-dev xz libltdl miniupnpc zip unzip dbus bind   avahi-tools\n ---> Running in 49cc95d739ca\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/39) Installing dbus-libs (1.14.4-r0)\n(2/39) Installing libintl (0.21.1-r1)\n(3/39) Installing avahi-libs (0.8-r6)\n(4/39) Installing gdbm (1.23-r0)\n(5/39) Installing avahi-tools (0.8-r6)\n(6/39) Installing ca-certificates (20220614-r3)\n(7/39) Installing brotli-libs (1.0.9-r9)\n(8/39) Installing nghttp2-libs (1.51.0-r0)\n(9/39) Installing libcurl (7.87.0-r0)\n(10/39) Installing curl (7.87.0-r0)\n(11/39) Installing libbz2 (1.0.8-r4)\n(12/39) Installing libgpg-error (1.46-r1)\n(13/39) Installing libgcrypt (1.10.1-r0)\n(14/39) Installing gpgv (2.2.40-r0)\n(15/39) Installing dns-root-hints (2022062901-r0)\n(16/39) Installing fstrm (0.6.1-r1)\n(17/39) Installing krb5-conf (1.0-r2)\n(18/39) Installing libcom_err (1.46.5-r4)\n(19/39) Installing keyutils-libs (1.6.3-r1)\n(20/39) Installing libverto (0.3.2-r1)\n(21/39) Installing krb5-libs (1.20.1-r0)\n(22/39) Installing protobuf-c (1.4.1-r1)\n(23/39) Installing libuv (1.44.2-r0)\n(24/39) Installing xz-libs (5.2.9-r0)\n(25/39) Installing libxml2 (2.10.3-r1)\n(26/39) Installing bind-libs (9.18.10-r0)\n(27/39) Installing bind-tools (9.18.10-r0)\n(28/39) Installing bind-dnssec-root (9.18.10-r0)\n(29/39) Installing libcap2 (2.66-r0)\n(30/39) Installing bind (9.18.10-r0)\nExecuting bind-9.18.10-r0.pre-install\nExecuting bind-9.18.10-r0.post-install\nwrote key file \"/etc/bind/rndc.key\"\n(31/39) Installing bind-plugins (9.18.10-r0)\n(32/39) Installing bind-dev (9.18.10-r0)\n(33/39) Installing libexpat (2.5.0-r0)\n(34/39) Installing dbus (1.14.4-r0)\nExecuting dbus-1.14.4-r0.pre-install\nExecuting dbus-1.14.4-r0.post-install\n(35/39) Installing libltdl (2.4.7-r0)\n(36/39) Installing miniupnpc (2.2.3-r1)\n(37/39) Installing unzip (6.0-r13)\n(38/39) Installing xz (5.2.9-r0)\n(39/39) Installing zip (3.0-r10)\nExecuting busybox-1.35.0-r29.trigger\nExecuting ca-certificates-20220614-r3.trigger\nExecuting dbus-1.14.4-r0.trigger\nOK: 31 MiB in 56 packages\nRemoving intermediate container 49cc95d739ca\n ---> b64084d525ce\nStep 30/42 : RUN curl -L https://github.com/docker/compose/releases/download/$DOCKER_COMPOSE_VERSION/docker-compose-linux-$(uname -m) > /usr/local/bin/docker-compose   && chmod +x /usr/local/bin/docker-compose\n ---> Running in ec519e0f4907\n\u001b[91m  % Total    % Received % Xferd  Average Speed   \u001b[0m\u001b[91mTime \u001b[0m\u001b[91m   Time     Time  Current\n \u001b[0m\u001b[91m                       \u001b[0m\u001b[91m      \u001b[0m\u001b[91m   Dload  Upload   Total\u001b[0m\u001b[91m   Spent   \u001b[0m\u001b[91m Left\u001b[0m\u001b[91m  Speed\n\u001b[0m\u001b[91m\r  0 \u001b[0m\u001b[91m    0\u001b[0m\u001b[91m    0\u001b[0m\u001b[91m     0    0\u001b[0m\u001b[91m     \u001b[0m\u001b[91m0      0   \u001b[0m\u001b[91m   0 --:--:-- -\u001b[0m\u001b[91m-:--:-- --\u001b[0m\u001b[91m:--:--\u001b[0m\u001b[91m     0\u001b[0m\u001b[91m\r  0     0    0     0    0     0 \u001b[0m\u001b[91m     0      0 -\u001b[0m\u001b[91m-:--:-- --:--:-- --:--:--     0\u001b[0m\u001b[91m\r  0     0    0    \u001b[0m\u001b[91m 0    \u001b[0m\u001b[91m0     0  \u001b[0m\u001b[91m    0    \u001b[0m\u001b[91m  0 --:--:-- -\u001b[0m\u001b[91m-:--:-\u001b[0m\u001b[91m- --:--:\u001b[0m\u001b[91m-- \u001b[0m\u001b[91m    0\n\u001b[0m\u001b[91m\r  0 25.2M    0 32141    0     0  22727      0  0:19:27  0:00:01  0:19:26 22727\u001b[0m\u001b[91m\r 11 25.2M   11 3033k    0  \u001b[0m\u001b[91m   0  1271k\u001b[0m\u001b[91m      \u001b[0m\u001b[91m0  0:0\u001b[0m\u001b[91m0:20  0:00:02  0:0\u001b[0m\u001b[91m0:18 3088\u001b[0m\u001b[91mk\u001b[0m\u001b[91m\r 82 25.2M   82 20.8M    0     0  6430k      0  0:00:04  0:00:03  0:00:01 10.9M\u001b[0m\u001b[91m\r100 25.2M  100 25.2M    0     0  7558k      0  0:00:03  0:00:03 --:--:-- 12.5M\n\u001b[0mRemoving intermediate container ec519e0f4907\n ---> f4000f2040a9\nStep 31/42 : WORKDIR /usr/src/app\n ---> Running in 4c6a647b74d9\nRemoving intermediate container 4c6a647b74d9\n ---> 8d3cfc00bffe\nStep 32/42 : ENV COMPOSE_HTTP_TIMEOUT=300   DOCKER_CLIENT_TIMEOUT=300   DOCKER_HOST=unix:///var/run/docker.sock   UI_FILES_PATH=dist   GIT_DATA_PATH=.git-data.json\n ---> Running in 108885214a40\nRemoving intermediate container 108885214a40\n ---> 0ad02be821cb\nStep 33/42 : COPY --from=build-binaries /usr/bin/nsupdate /usr/bin/nsupdate\n ---> 625a2e6b823f\nStep 34/42 : COPY --from=build-binaries /usr/bin/docker /usr/bin/docker\n ---> c2e3a396ae3c\nStep 35/42 : COPY packages/dappmanager/hostScripts /usr/src/app/hostScripts\n ---> f7906292ab2d\nStep 36/42 : COPY packages/dappmanager/hostServices /usr/src/app/hostServices\n ---> 12139ca3f237\nStep 37/42 : COPY --from=build-monorepo /app/packages/admin-ui/build $UI_FILES_PATH\n ---> 472a93dd2721\nStep 38/42 : COPY --from=build-monorepo /app/packages/dappmanager/build /usr/src/app/\n ---> 2c98d433d8da\nStep 39/42 : COPY --from=git-data /usr/src/app/.git-data.json $GIT_DATA_PATH\n ---> 5c66082b4d56\nStep 40/42 : COPY docker/rndc.conf /etc/bind/\n ---> c9cf4f9daf8a\nStep 41/42 : COPY docker/update_local_dyndns.sh /usr/local/bin/update_local_dyndns\n ---> 97c5327834eb\nStep 42/42 : CMD [ \"node\", \"index\" ]\n ---> Running in 6563dfd274f6\nRemoving intermediate container 6563dfd274f6\n ---> 6a7bc4f72c9a\nSuccessfully built 6a7bc4f72c9a\nSuccessfully tagged dnp_dappmanager:latest\n","stderr":"","imageSize":324327002},"repair":{"violations":[],"repairedDockerfile":"ARG NODE_VERSION=18.12.1\n\n# Common base so it's cached\n# --platform=$BUILDPLATFORM is used build javascript source with host arch\n# Otherwise webpack builds on emulated archs can be extremely slow (+1h)\n#####################################\nFROM --platform=${BUILDPLATFORM:-amd64} node:${NODE_VERSION}-alpine as build-monorepo\n\nWORKDIR /app\n\nRUN apk add --no-cache python3 build-base bash\n\n# Copy and install deps first to cache\nCOPY package.json yarn.lock lerna.json ./\nCOPY patches patches/\n# Install lerna first\nRUN yarn --frozen-lockfile --non-interactive --ignore-scripts --ignore-optional\nCOPY packages/admin-ui/package.json \\ \n  packages/admin-ui/\nCOPY packages/dappmanager/package.json \\ \n  packages/dappmanager/\nRUN yarn bootstrap --production\n\n# Build UI\nWORKDIR /app/packages/admin-ui/\nCOPY packages/admin-ui/ .\nENV REACT_APP_API_URL /\nRUN yarn build\n# Results in build/*\n\nWORKDIR /app/packages/dappmanager/\nCOPY packages/dappmanager/ .\nRUN yarn build\n# Results in build/index.js\n\n\n\n# Compute git data\n#####################################\nFROM --platform=${BUILDPLATFORM:-amd64} node:${NODE_VERSION}-alpine as git-data\n\nWORKDIR /usr/src/app\n\nRUN apk add --no-cache git\nCOPY .git .git\nCOPY dappnode_package.json .\nCOPY docker/getGitData.js .\nRUN node getGitData /usr/src/app/.git-data.json\n\n\n\n# Build binaries\n#####################################\nFROM node:${NODE_VERSION}-alpine as build-binaries\n\nRUN apk add --no-cache bind-tools docker\n\n\n\n# Final layer\n#####################################\nFROM node:${NODE_VERSION}-alpine\n\nENV DOCKER_COMPOSE_VERSION v2.5.0\n\nRUN apk add --no-cache curl bind-dev xz libltdl miniupnpc zip unzip dbus bind \\\n  # See https://github.com/dappnode/DNP_DAPPMANAGER/issues/669\n  avahi-tools\n\nRUN curl -L https://github.com/docker/compose/releases/download/$DOCKER_COMPOSE_VERSION/docker-compose-linux-$(uname -m) > /usr/local/bin/docker-compose \\\n  && chmod +x /usr/local/bin/docker-compose\n\nWORKDIR /usr/src/app\n\nENV COMPOSE_HTTP_TIMEOUT=300 \\\n  DOCKER_CLIENT_TIMEOUT=300 \\\n  DOCKER_HOST=unix:///var/run/docker.sock \\\n  UI_FILES_PATH=dist \\\n  GIT_DATA_PATH=.git-data.json\n\nCOPY --from=build-binaries /usr/bin/nsupdate /usr/bin/nsupdate\nCOPY --from=build-binaries /usr/bin/docker /usr/bin/docker\n\n# Copy the src last as it's the layer most likely to change\nCOPY packages/dappmanager/hostScripts /usr/src/app/hostScripts\nCOPY packages/dappmanager/hostServices /usr/src/app/hostServices\nCOPY --from=build-monorepo /app/packages/admin-ui/build $UI_FILES_PATH\nCOPY --from=build-monorepo /app/packages/dappmanager/build /usr/src/app/\nCOPY --from=git-data /usr/src/app/.git-data.json $GIT_DATA_PATH\n\nCOPY docker/rndc.conf /etc/bind/\nCOPY docker/update_local_dyndns.sh /usr/local/bin/update_local_dyndns\n\nCMD [ \"node\", \"index\" ]\n"},"endTime":1672003734278}