{"repository":"https://github.com/nakamauwu/nakama","dockerfilePath":"Dockerfile","startTime":1672295218677,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/nakamauwu/nakama'...\n","error":null,"commit":"fbb79da4a1878956d3182de51a7577d3d3bf7189"},"originalBuild":{"startTimestamp":1672295219579,"endTimestamp":1672295454463,"error":null,"stdout":"Sending build context to Docker daemon  1.422MB\r\r\nStep 1/25 : FROM golang:alpine AS build\nalpine: Pulling from library/golang\nc158987b0551: Already exists\n019cfb932eb0: Pulling fs layer\na3a161a37303: Pulling fs layer\n3c6f08178a17: Pulling fs layer\n3c6f08178a17: Verifying Checksum\n3c6f08178a17: Download complete\n019cfb932eb0: Verifying Checksum\n019cfb932eb0: Download complete\n019cfb932eb0: Pull complete\na3a161a37303: Verifying Checksum\na3a161a37303: Download complete\na3a161a37303: Pull complete\n3c6f08178a17: Pull complete\nDigest: sha256:a9b24b67dc83b3383d22a14941c2b2b2ca6a103d805cac6820fd1355943beaf1\nStatus: Downloaded newer image for golang:alpine\n ---> cae57157ceaa\nStep 2/25 : ARG VAPID_PUBLIC_KEY\n ---> Running in 8bfca5890ca8\nRemoving intermediate container 8bfca5890ca8\n ---> e2fab0cb5733\nStep 3/25 : ENV VAPID_PUBLIC_KEY=${VAPID_PUBLIC_KEY}\n ---> Running in 5d1f400bfeda\nRemoving intermediate container 5d1f400bfeda\n ---> 0104e3fd61bc\nStep 4/25 : ENV VITE_VAPID_PUBLIC_KEY=${VAPID_PUBLIC_KEY}\n ---> Running in 3b737be1b1b2\nRemoving intermediate container 3b737be1b1b2\n ---> 7e28d24d7c71\nStep 5/25 : RUN apk add --update --no-cache git python3 make g++ nodejs npm ca-certificates\n ---> Running in af9e268c7f8b\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/36) Installing libgcc (12.2.1_git20220924-r4)\n(2/36) Installing libstdc++ (12.2.1_git20220924-r4)\n(3/36) Installing libstdc++-dev (12.2.1_git20220924-r4)\n(4/36) Installing binutils (2.39-r2)\n(5/36) Installing libgomp (12.2.1_git20220924-r4)\n(6/36) Installing libatomic (12.2.1_git20220924-r4)\n(7/36) Installing gmp (6.2.1-r2)\n(8/36) Installing isl25 (0.25-r0)\n(9/36) Installing mpfr4 (4.1.0-r0)\n(10/36) Installing mpc1 (1.2.1-r1)\n(11/36) Installing gcc (12.2.1_git20220924-r4)\n(12/36) Installing musl-dev (1.2.3-r4)\n(13/36) Installing libc-dev (0.7.2-r3)\n(14/36) Installing g++ (12.2.1_git20220924-r4)\n(15/36) Installing brotli-libs (1.0.9-r9)\n(16/36) Installing nghttp2-libs (1.51.0-r0)\n(17/36) Installing libcurl (7.87.0-r0)\n(18/36) Installing libexpat (2.5.0-r0)\n(19/36) Installing pcre2 (10.42-r0)\n(20/36) Installing git (2.38.2-r0)\n(21/36) Installing make (4.3-r1)\n(22/36) Installing c-ares (1.18.1-r1)\n(23/36) Installing icu-data-en (72.1-r1)\nExecuting icu-data-en-72.1-r1.post-install\n\u001b[91m*\n* If you need ICU with non-English locales and legacy charset support, install\n* package icu-data-full.\n*\n\u001b[0m(24/36) Installing icu-libs (72.1-r1)\n(25/36) Installing nodejs (18.12.1-r0)\n(26/36) Installing npm (9.1.2-r0)\n(27/36) Installing libbz2 (1.0.8-r4)\n(28/36) Installing libffi (3.4.4-r0)\n(29/36) Installing gdbm (1.23-r0)\n(30/36) Installing xz-libs (5.2.9-r0)\n(31/36) Installing mpdecimal (2.5.1-r1)\n(32/36) Installing ncurses-terminfo-base (6.3_p20221119-r0)\n(33/36) Installing ncurses-libs (6.3_p20221119-r0)\n(34/36) Installing readline (8.2.0-r0)\n(35/36) Installing sqlite-libs (3.40.1-r0)\n(36/36) Installing python3 (3.10.9-r1)\nExecuting busybox-1.35.0-r29.trigger\nOK: 349 MiB in 52 packages\nRemoving intermediate container af9e268c7f8b\n ---> 4757fe5512de\nStep 6/25 : RUN update-ca-certificates\n ---> Running in 5efa4df30575\n\u001b[91mWARNING: ca-certificates.crt does not contain exactly one certificate or CRL: skipping\n\u001b[0mRemoving intermediate container 5efa4df30575\n ---> 1fd4d2cc23fc\nStep 7/25 : WORKDIR /go/src/github.com/nakamauwu/nakama\n ---> Running in 6b13324e6863\nRemoving intermediate container 6b13324e6863\n ---> 6f549dec6553\nStep 8/25 : COPY . .\n ---> af18f0e9eac7\nStep 9/25 : WORKDIR /go/src/github.com/nakamauwu/nakama/web/app\n ---> Running in d51d463fa085\nRemoving intermediate container d51d463fa085\n ---> cdac9363360f\nStep 10/25 : RUN npm i\n ---> Running in 358f29d34188\n\nadded 36 packages, and audited 37 packages in 6s\n\n4 packages are looking for funding\n  run `npm fund` for details\n\nfound 0 vulnerabilities\nRemoving intermediate container 358f29d34188\n ---> d6c0645992cd\nStep 11/25 : RUN npm run build\n ---> Running in 7a07f2d8b939\n\n> build\n> vite build\n\nvite v3.0.9 building for production...\ntransforming...\nâœ“ 144 modules transformed.\n\u001b[91m\n(!) outDir /go/src/github.com/nakamauwu/nakama/web/dist is not inside project root and will not be emptied.\nUse --emptyOutDir to override.\n\n\u001b[0mrendering chunks...\n../dist/index.html                                2.33 KiB\n../dist/assets/access-callback-page.d488dd3e.js   2.13 KiB / gzip: 0.98 KiB\n../dist/assets/access-page.26b55c22.js            4.67 KiB / gzip: 1.85 KiB\n../dist/assets/toast-item.2a072c54.js             0.55 KiB / gzip: 0.35 KiB\n../dist/assets/index.0c4f4975.js                  47.32 KiB / gzip: 15.42 KiB\n../dist/assets/home-page.40606139.js              10.83 KiB / gzip: 3.62 KiB\n../dist/assets/intersectable-comp.f31a19a9.js     0.45 KiB / gzip: 0.32 KiB\n../dist/assets/relative-datetime.1ae7ba37.js      0.79 KiB / gzip: 0.48 KiB\n../dist/assets/repeat.89fe9d2d.js                 2.34 KiB / gzip: 1.08 KiB\n../dist/assets/not-found-page.9ec7b781.js         0.17 KiB / gzip: 0.15 KiB\n../dist/assets/notifications-page.46fd5586.js     8.57 KiB / gzip: 2.76 KiB\n../dist/assets/index.e6dc1ebf.js                  20.73 KiB / gzip: 6.52 KiB\n../dist/assets/post-page.c40c7ead.js              5.98 KiB / gzip: 2.28 KiB\n../dist/assets/user-item.96010112.js              0.85 KiB / gzip: 0.45 KiB\n../dist/assets/user-follow-counts.c2b6702b.js     2.31 KiB / gzip: 0.97 KiB\n../dist/assets/search-page.e8efcd22.js            2.99 KiB / gzip: 1.25 KiB\n../dist/assets/tagged-posts-page.3c974a5d.js      2.66 KiB / gzip: 1.12 KiB\n../dist/assets/user-followees-page.d48e2aaf.js    2.15 KiB / gzip: 0.92 KiB\n../dist/assets/user-followers-page.8ddfd2fe.js    2.15 KiB / gzip: 0.93 KiB\n../dist/assets/privacy-policy-page.64a5006e.js    9.99 KiB / gzip: 3.51 KiB\n../dist/assets/dialog-polyfill.esm.8bcb7267.js    11.33 KiB / gzip: 3.81 KiB\n../dist/assets/user-page.4e78278a.js              17.00 KiB / gzip: 4.84 KiB\n../dist/assets/index.c81a6330.css                 24.30 KiB / gzip: 4.72 KiB\n../dist/assets/post-item.5df5790b.js              63.07 KiB / gzip: 23.58 KiB\n../dist/assets/index.6761e500.js                  41.44 KiB / gzip: 14.98 KiB\nRemoving intermediate container 7a07f2d8b939\n ---> 7ad86b8d15d6\nStep 12/25 : WORKDIR /go/src/github.com/nakamauwu/nakama\n ---> Running in 66d1ebbd0bec\nRemoving intermediate container 66d1ebbd0bec\n ---> bbcc37980010\nStep 13/25 : RUN go mod download\n ---> Running in 0a9ba7965173\nRemoving intermediate container 0a9ba7965173\n ---> d9ccd7ff9fbd\nStep 14/25 : RUN CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags=\"-s -w\" -o /go/bin/nakama ./cmd/nakama\n ---> Running in 40ee2f883a20\nRemoving intermediate container 40ee2f883a20\n ---> 048c0aa0273a\nStep 15/25 : FROM scratch\n ---> \nStep 16/25 : ARG DISABLE_DEV_LOGIN=true\n ---> Running in f9bf83b40e65\nRemoving intermediate container f9bf83b40e65\n ---> a2ddf8f252db\nStep 17/25 : ENV DISABLE_DEV_LOGIN=$DISABLE_DEV_LOGIN\n ---> Running in aff280c13013\nRemoving intermediate container aff280c13013\n ---> d7d14821ae0a\nStep 18/25 : ARG EMBED_STATIC=true\n ---> Running in 08dfff4bd18f\nRemoving intermediate container 08dfff4bd18f\n ---> 07a1e8716531\nStep 19/25 : ENV EMBED_STATIC=$EMBED_STATIC\n ---> Running in 417b9ac9330b\nRemoving intermediate container 417b9ac9330b\n ---> 98895cc0f129\nStep 20/25 : ARG EXEC_SCHEMA=true\n ---> Running in e6b9b7102b2f\nRemoving intermediate container e6b9b7102b2f\n ---> 49c748d840b4\nStep 21/25 : ENV EXEC_SCHEMA=$EXEC_SCHEMA\n ---> Running in 9d0e47368ed0\nRemoving intermediate container 9d0e47368ed0\n ---> 759d7d9fdc90\nStep 22/25 : COPY --from=build /etc/ssl/certs/ca-certificates.crt /etc/ssl/certs/\n ---> cb2ed1c752ce\nStep 23/25 : COPY --from=build /go/bin/nakama /usr/bin/nakama\n ---> 31df6c01a8a8\nStep 24/25 : EXPOSE 3000\n ---> Running in f61160949f21\nRemoving intermediate container f61160949f21\n ---> 42fa2eb95372\nStep 25/25 : ENTRYPOINT [ \"nakama\" ]\n ---> Running in 5ec4cc52373e\nRemoving intermediate container 5ec4cc52373e\n ---> 966471713307\nSuccessfully built 966471713307\nSuccessfully tagged nakama:latest\n","stderr":"","imageSize":17290446},"repair":{"violations":[{"name":"npmCacheCleanAfterInstall","position":{"start":14,"end":14,"columnStart":4,"columnEnd":9}}],"repairedDockerfile":"FROM golang:alpine AS build\n\nARG VAPID_PUBLIC_KEY\nENV VAPID_PUBLIC_KEY=${VAPID_PUBLIC_KEY}\nENV VITE_VAPID_PUBLIC_KEY=${VAPID_PUBLIC_KEY}\n\nRUN apk add --update --no-cache git python3 make g++ nodejs npm ca-certificates\nRUN update-ca-certificates\n\nWORKDIR /go/src/github.com/nakamauwu/nakama\n\nCOPY . .\n\nWORKDIR /go/src/github.com/nakamauwu/nakama/web/app\nRUN npm i\nRUN npm run build\n\nWORKDIR /go/src/github.com/nakamauwu/nakama\n\nRUN go mod download\nRUN CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags=\"-s -w\" -o /go/bin/nakama ./cmd/nakama\n\nFROM scratch\n\nARG DISABLE_DEV_LOGIN=true\nENV DISABLE_DEV_LOGIN=$DISABLE_DEV_LOGIN\n\nARG EMBED_STATIC=true\nENV EMBED_STATIC=$EMBED_STATIC\n\nARG EXEC_SCHEMA=true\nENV EXEC_SCHEMA=$EXEC_SCHEMA\n\nCOPY --from=build /etc/ssl/certs/ca-certificates.crt /etc/ssl/certs/\nCOPY --from=build /go/bin/nakama /usr/bin/nakama\n\nEXPOSE 3000\nENTRYPOINT [ \"nakama\" ]\n"},"repairedBuild":{"startTimestamp":1672295454788,"endTimestamp":1672295551544,"error":null,"stdout":"Sending build context to Docker daemon  1.422MB\r\r\nStep 1/25 : FROM golang:alpine AS build\n ---> cae57157ceaa\nStep 2/25 : ARG VAPID_PUBLIC_KEY\n ---> Running in 79ed437cd335\nRemoving intermediate container 79ed437cd335\n ---> b29d5609ed66\nStep 3/25 : ENV VAPID_PUBLIC_KEY=${VAPID_PUBLIC_KEY}\n ---> Running in 777780b488dd\nRemoving intermediate container 777780b488dd\n ---> a7c5ab8684d6\nStep 4/25 : ENV VITE_VAPID_PUBLIC_KEY=${VAPID_PUBLIC_KEY}\n ---> Running in cd426c40cf94\nRemoving intermediate container cd426c40cf94\n ---> a6377972bd83\nStep 5/25 : RUN apk add --update --no-cache git python3 make g++ nodejs npm ca-certificates\n ---> Running in 491224365b5f\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/36) Installing libgcc (12.2.1_git20220924-r4)\n(2/36) Installing libstdc++ (12.2.1_git20220924-r4)\n(3/36) Installing libstdc++-dev (12.2.1_git20220924-r4)\n(4/36) Installing binutils (2.39-r2)\n(5/36) Installing libgomp (12.2.1_git20220924-r4)\n(6/36) Installing libatomic (12.2.1_git20220924-r4)\n(7/36) Installing gmp (6.2.1-r2)\n(8/36) Installing isl25 (0.25-r0)\n(9/36) Installing mpfr4 (4.1.0-r0)\n(10/36) Installing mpc1 (1.2.1-r1)\n(11/36) Installing gcc (12.2.1_git20220924-r4)\n(12/36) Installing musl-dev (1.2.3-r4)\n(13/36) Installing libc-dev (0.7.2-r3)\n(14/36) Installing g++ (12.2.1_git20220924-r4)\n(15/36) Installing brotli-libs (1.0.9-r9)\n(16/36) Installing nghttp2-libs (1.51.0-r0)\n(17/36) Installing libcurl (7.87.0-r0)\n(18/36) Installing libexpat (2.5.0-r0)\n(19/36) Installing pcre2 (10.42-r0)\n(20/36) Installing git (2.38.2-r0)\n(21/36) Installing make (4.3-r1)\n(22/36) Installing c-ares (1.18.1-r1)\n(23/36) Installing icu-data-en (72.1-r1)\nExecuting icu-data-en-72.1-r1.post-install\n\u001b[91m*\n* If you need ICU with non-English locales and legacy charset support, install\n* package icu-data-full.\n*\n\u001b[0m(24/36) Installing icu-libs (72.1-r1)\n(25/36) Installing nodejs (18.12.1-r0)\n(26/36) Installing npm (9.1.2-r0)\n(27/36) Installing libbz2 (1.0.8-r4)\n(28/36) Installing libffi (3.4.4-r0)\n(29/36) Installing gdbm (1.23-r0)\n(30/36) Installing xz-libs (5.2.9-r0)\n(31/36) Installing mpdecimal (2.5.1-r1)\n(32/36) Installing ncurses-terminfo-base (6.3_p20221119-r0)\n(33/36) Installing ncurses-libs (6.3_p20221119-r0)\n(34/36) Installing readline (8.2.0-r0)\n(35/36) Installing sqlite-libs (3.40.1-r0)\n(36/36) Installing python3 (3.10.9-r1)\nExecuting busybox-1.35.0-r29.trigger\nOK: 349 MiB in 52 packages\nRemoving intermediate container 491224365b5f\n ---> a8ca6b7ee5f9\nStep 6/25 : RUN update-ca-certificates\n ---> Running in 928e572b6229\n\u001b[91mWARNING: ca-certificates.crt does not contain exactly one certificate or CRL: skipping\n\u001b[0mRemoving intermediate container 928e572b6229\n ---> 02dea9c91227\nStep 7/25 : WORKDIR /go/src/github.com/nakamauwu/nakama\n ---> Running in 7dfba336b0dc\nRemoving intermediate container 7dfba336b0dc\n ---> fd7348b9d404\nStep 8/25 : COPY . .\n ---> 19786742aa9c\nStep 9/25 : WORKDIR /go/src/github.com/nakamauwu/nakama/web/app\n ---> Running in adc1d6bae69f\nRemoving intermediate container adc1d6bae69f\n ---> 86f6e62b70d6\nStep 10/25 : RUN npm i\n ---> Running in e08a6e00ce99\n\nadded 36 packages, and audited 37 packages in 3s\n\n4 packages are looking for funding\n  run `npm fund` for details\n\nfound 0 vulnerabilities\nRemoving intermediate container e08a6e00ce99\n ---> 002e2ac7d2a2\nStep 11/25 : RUN npm run build\n ---> Running in a744eef9df70\n\n> build\n> vite build\n\nvite v3.0.9 building for production...\ntransforming...\nâœ“ 144 modules transformed.\n\u001b[91m\n(!) outDir /go/src/github.com/nakamauwu/nakama/web/dist is not inside project root and will not be emptied.\nUse --emptyOutDir to override.\n\n\u001b[0mrendering chunks...\n../dist/index.html                                2.33 KiB\n../dist/assets/access-callback-page.d488dd3e.js   2.13 KiB / gzip: 0.98 KiB\n../dist/assets/toast-item.2a072c54.js             0.55 KiB / gzip: 0.35 KiB\n../dist/assets/access-page.26b55c22.js            4.67 KiB / gzip: 1.85 KiB\n../dist/assets/repeat.89fe9d2d.js                 2.34 KiB / gzip: 1.08 KiB\n../dist/assets/intersectable-comp.f31a19a9.js     0.45 KiB / gzip: 0.32 KiB\n../dist/assets/home-page.40606139.js              10.83 KiB / gzip: 3.62 KiB\n../dist/assets/relative-datetime.1ae7ba37.js      0.79 KiB / gzip: 0.48 KiB\n../dist/assets/not-found-page.9ec7b781.js         0.17 KiB / gzip: 0.15 KiB\n../dist/assets/notifications-page.46fd5586.js     8.57 KiB / gzip: 2.76 KiB\n../dist/assets/index.e6dc1ebf.js                  20.73 KiB / gzip: 6.52 KiB\n../dist/assets/post-page.c40c7ead.js              5.98 KiB / gzip: 2.28 KiB\n../dist/assets/search-page.e8efcd22.js            2.99 KiB / gzip: 1.25 KiB\n../dist/assets/user-item.96010112.js              0.85 KiB / gzip: 0.45 KiB\n../dist/assets/user-follow-counts.c2b6702b.js     2.31 KiB / gzip: 0.97 KiB\n../dist/assets/tagged-posts-page.3c974a5d.js      2.66 KiB / gzip: 1.12 KiB\n../dist/assets/privacy-policy-page.64a5006e.js    9.99 KiB / gzip: 3.51 KiB\n../dist/assets/user-followees-page.d48e2aaf.js    2.15 KiB / gzip: 0.92 KiB\n../dist/assets/user-followers-page.8ddfd2fe.js    2.15 KiB / gzip: 0.93 KiB\n../dist/assets/dialog-polyfill.esm.8bcb7267.js    11.33 KiB / gzip: 3.81 KiB\n../dist/assets/user-page.4e78278a.js              17.00 KiB / gzip: 4.84 KiB\n../dist/assets/index.c81a6330.css                 24.30 KiB / gzip: 4.72 KiB\n../dist/assets/index.0c4f4975.js                  47.32 KiB / gzip: 15.42 KiB\n../dist/assets/index.6761e500.js                  41.44 KiB / gzip: 14.98 KiB\n../dist/assets/post-item.5df5790b.js              63.07 KiB / gzip: 23.58 KiB\nRemoving intermediate container a744eef9df70\n ---> 44d3d620c33e\nStep 12/25 : WORKDIR /go/src/github.com/nakamauwu/nakama\n ---> Running in 96991eeba82a\nRemoving intermediate container 96991eeba82a\n ---> d3b709d7e7e6\nStep 13/25 : RUN go mod download\n ---> Running in e55c16e6f41a\nRemoving intermediate container e55c16e6f41a\n ---> 4cf7f6f3e758\nStep 14/25 : RUN CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags=\"-s -w\" -o /go/bin/nakama ./cmd/nakama\n ---> Running in d3700a083f7e\nRemoving intermediate container d3700a083f7e\n ---> a4ac39492cf1\nStep 15/25 : FROM scratch\n ---> \nStep 16/25 : ARG DISABLE_DEV_LOGIN=true\n ---> Running in 77cfc3740d41\nRemoving intermediate container 77cfc3740d41\n ---> 6756fab76034\nStep 17/25 : ENV DISABLE_DEV_LOGIN=$DISABLE_DEV_LOGIN\n ---> Running in ccaf23209680\nRemoving intermediate container ccaf23209680\n ---> 514a817a78f3\nStep 18/25 : ARG EMBED_STATIC=true\n ---> Running in 028757aab231\nRemoving intermediate container 028757aab231\n ---> 2c069d3d8a70\nStep 19/25 : ENV EMBED_STATIC=$EMBED_STATIC\n ---> Running in 4fa6d1323fc0\nRemoving intermediate container 4fa6d1323fc0\n ---> 0066cbc35ea0\nStep 20/25 : ARG EXEC_SCHEMA=true\n ---> Running in 98ead2b0dcf4\nRemoving intermediate container 98ead2b0dcf4\n ---> 449b93a992bd\nStep 21/25 : ENV EXEC_SCHEMA=$EXEC_SCHEMA\n ---> Running in 1f44e7417ba7\nRemoving intermediate container 1f44e7417ba7\n ---> 7b68069967fc\nStep 22/25 : COPY --from=build /etc/ssl/certs/ca-certificates.crt /etc/ssl/certs/\n ---> a74557eb81a4\nStep 23/25 : COPY --from=build /go/bin/nakama /usr/bin/nakama\n ---> ff0522e7011a\nStep 24/25 : EXPOSE 3000\n ---> Running in 948eadce2fbb\nRemoving intermediate container 948eadce2fbb\n ---> 24b5f5ba5975\nStep 25/25 : ENTRYPOINT [ \"nakama\" ]\n ---> Running in 60c81aaef5f5\nRemoving intermediate container 60c81aaef5f5\n ---> 1adb0fd90d54\nSuccessfully built 1adb0fd90d54\nSuccessfully tagged nakama:latest\n","stderr":"","imageSize":17290446},"endTime":1672295551774}