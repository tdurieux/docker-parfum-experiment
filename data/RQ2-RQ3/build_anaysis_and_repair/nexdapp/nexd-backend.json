{"repository":"https://github.com/nexdapp/nexd-backend","dockerfilePath":"Dockerfile","startTime":1673037854011,"endTime":1673038077284,"clone":{"startTime":1673037854014,"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/nexdapp/nexd-backend'...\n","error":null,"endTime":1673037855794,"commit":"fe6a1b11bf8f62ded14b02a3c5e768b3184e0945"},"originalBuild":{"startTime":1673037855884,"endTime":1673037986868,"error":null,"stdout":"Sending build context to Docker daemon  9.093MB\r\r\nStep 1/14 : FROM node:12.16.1-alpine3.9\n12.16.1-alpine3.9: Pulling from library/node\n9123ac7c32f7: Pulling fs layer\n2615c043d431: Pulling fs layer\ndbac7aff664e: Pulling fs layer\nf0ba575a490b: Pulling fs layer\nf0ba575a490b: Waiting\n9123ac7c32f7: Verifying Checksum\n9123ac7c32f7: Download complete\ndbac7aff664e: Verifying Checksum\ndbac7aff664e: Download complete\nf0ba575a490b: Verifying Checksum\nf0ba575a490b: Download complete\n2615c043d431: Verifying Checksum\n2615c043d431: Download complete\n9123ac7c32f7: Pull complete\n2615c043d431: Pull complete\ndbac7aff664e: Pull complete\nf0ba575a490b: Pull complete\nDigest: sha256:3d27d3fb498f0513248d268111ad2d6820eafb4127114002666fc8e63165aff4\nStatus: Downloaded newer image for node:12.16.1-alpine3.9\n ---> ff35dd88f6e1\nStep 2/14 : RUN apk add g++ make python\n ---> Running in 684b7dc11e44\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.9/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.9/community/x86_64/APKINDEX.tar.gz\n(1/24) Upgrading musl (1.1.20-r5 -> 1.1.20-r6)\n(2/24) Installing binutils (2.31.1-r2)\n(3/24) Installing gmp (6.1.2-r1)\n(4/24) Installing isl (0.18-r0)\n(5/24) Installing libgomp (8.3.0-r0)\n(6/24) Installing libatomic (8.3.0-r0)\n(7/24) Installing mpfr3 (3.1.5-r1)\n(8/24) Installing mpc1 (1.0.3-r1)\n(9/24) Installing gcc (8.3.0-r0)\n(10/24) Installing musl-dev (1.1.20-r6)\n(11/24) Installing libc-dev (0.7.1-r0)\n(12/24) Installing g++ (8.3.0-r0)\n(13/24) Upgrading musl-utils (1.1.20-r5 -> 1.1.20-r6)\n(14/24) Installing make (4.2.1-r2)\n(15/24) Installing libbz2 (1.0.6-r7)\n(16/24) Installing expat (2.2.8-r0)\n(17/24) Installing libffi (3.2.1-r6)\n(18/24) Installing gdbm (1.13-r1)\n(19/24) Installing ncurses-terminfo-base (6.1_p20190105-r0)\n(20/24) Installing ncurses-terminfo (6.1_p20190105-r0)\n(21/24) Installing ncurses-libs (6.1_p20190105-r0)\n(22/24) Installing readline (7.0.003-r1)\n(23/24) Installing sqlite-libs (3.28.0-r3)\n(24/24) Installing python2 (2.7.18-r0)\nExecuting busybox-1.29.3-r10.trigger\nOK: 206 MiB in 38 packages\nRemoving intermediate container 684b7dc11e44\n ---> c5bfba6c4747\nStep 3/14 : WORKDIR /usr/src/app\n ---> Running in 6f1dc2b84b2f\nRemoving intermediate container 6f1dc2b84b2f\n ---> c503c85ca5eb\nStep 4/14 : COPY package.json .\n ---> ed28e88d68fb\nStep 5/14 : COPY package-lock.json .\n ---> cc0af2316c67\nStep 6/14 : RUN npm clean-install\n ---> Running in cf3b639b7bfd\n\n> bcrypt@4.0.1 install /usr/src/app/node_modules/bcrypt\n> node-pre-gyp install --fallback-to-build\n\n\u001b[91mnode-pre-gyp\u001b[0m\u001b[91m WARN Using request for node-pre-gyp https download \n\u001b[0m[bcrypt] Success: \"/usr/src/app/node_modules/bcrypt/lib/binding/napi-v3/bcrypt_lib.node\" is installed via remote\n\n> @nestjs/core@7.0.8 postinstall /usr/src/app/node_modules/@nestjs/core\n> opencollective || exit 0\n\n                           Thanks for installing nest \n                 Please consider donating to our open collective\n                        to help us maintain this package.\n                                         \n                            Number of contributors: 0\n                              Number of backers: 879\n                             Annual budget: $179,223\n                             Current balance: $21,177\n                                         \n             Become a partner: https://opencollective.com/nest/donate\n                                         \n\n> fsevents@1.2.12 install /usr/src/app/node_modules/watchpack/node_modules/fsevents\n> node-gyp rebuild\n\nmake: Entering directory '/usr/src/app/node_modules/watchpack/node_modules/fsevents/build'\n  SOLINK_MODULE(target) Release/obj.target/.node\n  COPY Release/.node\nmake: Leaving directory '/usr/src/app/node_modules/watchpack/node_modules/fsevents/build'\n\n> core-js@2.6.11 postinstall /usr/src/app/node_modules/core-js\n> node -e \"try{require('./postinstall')}catch(e){}\"\n\n\u001b[96mThank you for using core-js (\u001b[94m https://github.com/zloirock/core-js \u001b[96m) for polyfilling JavaScript standard library!\u001b[0m\n\n\u001b[96mThe project needs your help! Please consider supporting of core-js on Open Collective or Patreon: \u001b[0m\n\u001b[96m>\u001b[94m https://opencollective.com/core-js \u001b[0m\n\u001b[96m>\u001b[94m https://www.patreon.com/zloirock \u001b[0m\n\n\u001b[96mAlso, the author of core-js (\u001b[94m https://github.com/zloirock \u001b[96m) is looking for a good job -)\u001b[0m\n\n\n> fsevents@1.2.13 install /usr/src/app/node_modules/live-server/node_modules/fsevents\n> node install.js\n\n\nSkipping 'fsevents' build as platform linux is not supported\n\n> @compodoc/compodoc@1.1.11 postinstall /usr/src/app/node_modules/@compodoc/compodoc\n> opencollective-postinstall || exit 0\n\n\u001b[96m\u001b[1mThank you for using @compodoc/compodoc!\u001b[96m\u001b[1m\n\u001b[0m\u001b[96mIf you rely on this package, please consider supporting our open collective:\u001b[22m\u001b[39m\n> \u001b[94mhttps://opencollective.com/compodoc/donate\u001b[0m\n\nadded 1904 packages in 19.187s\nRemoving intermediate container cf3b639b7bfd\n ---> 9ab4154c91b0\nStep 7/14 : COPY . .\n ---> 89a2dfc73002\nStep 8/14 : RUN npm run build\n ---> Running in 02923876c07b\n\n> nexd-backend@0.1.0 prebuild /usr/src/app\n> rimraf dist\n\n\n> nexd-backend@0.1.0 build /usr/src/app\n> cross-env NODE_ENV=production nest build\n\nRemoving intermediate container 02923876c07b\n ---> 1a4715af77e8\nStep 9/14 : EXPOSE 8080\n ---> Running in 7c1d52af48bf\nRemoving intermediate container 7c1d52af48bf\n ---> adca75056157\nStep 10/14 : RUN adduser -D localuser\n ---> Running in efbeb1e2d54d\nRemoving intermediate container efbeb1e2d54d\n ---> 20e1e5f07c69\nStep 11/14 : RUN touch ormconfig.json\n ---> Running in 78afae554ac2\nRemoving intermediate container 78afae554ac2\n ---> 3180b63d88f0\nStep 12/14 : RUN chown localuser:localuser ormconfig.json\n ---> Running in 5335bfa35be3\nRemoving intermediate container 5335bfa35be3\n ---> 057b4071f4a1\nStep 13/14 : USER localuser\n ---> Running in 9d8c632b75a8\nRemoving intermediate container 9d8c632b75a8\n ---> 86878ab1f5c5\nStep 14/14 : CMD [ \"npm\", \"run\", \"start:prod:withmigrations\" ]\n ---> Running in 92b04fcc3a0f\nRemoving intermediate container 92b04fcc3a0f\n ---> c78bf49d8404\nSuccessfully built c78bf49d8404\nSuccessfully tagged nexd-backend:latest\n","stderr":"","imageSize":765816458},"repair":{"startTime":1673037986920,"endTime":1673037986969,"violations":[{"name":"apkAddUseNoCache","position":{"start":2,"end":2,"columnStart":4,"columnEnd":27}}],"repairedDockerfile":"FROM node:12.16.1-alpine3.9\n\nRUN apk add --no-cache g++ make python\n\nWORKDIR /usr/src/app\n\n# Install app dependencies\nCOPY package.json .\nCOPY package-lock.json .\nRUN npm clean-install\n\n# Bundle app source\nCOPY . .\n\nRUN npm run build\n\n# Add docs later\n#RUN npm run docs\n\nEXPOSE 8080\n\n\nRUN adduser -D localuser\n\nRUN touch ormconfig.json\nRUN chown localuser:localuser ormconfig.json\n\nUSER localuser\n\n\nCMD [ \"npm\", \"run\", \"start:prod:withmigrations\" ]\n"},"repairedBuild":{"startTime":1673037988954,"endTime":1673038075426,"error":null,"stdout":"Sending build context to Docker daemon  9.093MB\r\r\nStep 1/14 : FROM node:12.16.1-alpine3.9\n ---> ff35dd88f6e1\nStep 2/14 : RUN apk add --no-cache g++ make python\n ---> Running in 3a4c61c41be5\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.9/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.9/community/x86_64/APKINDEX.tar.gz\n(1/24) Upgrading musl (1.1.20-r5 -> 1.1.20-r6)\n(2/24) Installing binutils (2.31.1-r2)\n(3/24) Installing gmp (6.1.2-r1)\n(4/24) Installing isl (0.18-r0)\n(5/24) Installing libgomp (8.3.0-r0)\n(6/24) Installing libatomic (8.3.0-r0)\n(7/24) Installing mpfr3 (3.1.5-r1)\n(8/24) Installing mpc1 (1.0.3-r1)\n(9/24) Installing gcc (8.3.0-r0)\n(10/24) Installing musl-dev (1.1.20-r6)\n(11/24) Installing libc-dev (0.7.1-r0)\n(12/24) Installing g++ (8.3.0-r0)\n(13/24) Upgrading musl-utils (1.1.20-r5 -> 1.1.20-r6)\n(14/24) Installing make (4.2.1-r2)\n(15/24) Installing libbz2 (1.0.6-r7)\n(16/24) Installing expat (2.2.8-r0)\n(17/24) Installing libffi (3.2.1-r6)\n(18/24) Installing gdbm (1.13-r1)\n(19/24) Installing ncurses-terminfo-base (6.1_p20190105-r0)\n(20/24) Installing ncurses-terminfo (6.1_p20190105-r0)\n(21/24) Installing ncurses-libs (6.1_p20190105-r0)\n(22/24) Installing readline (7.0.003-r1)\n(23/24) Installing sqlite-libs (3.28.0-r3)\n(24/24) Installing python2 (2.7.18-r0)\nExecuting busybox-1.29.3-r10.trigger\nOK: 206 MiB in 38 packages\nRemoving intermediate container 3a4c61c41be5\n ---> 089de3f67d8d\nStep 3/14 : WORKDIR /usr/src/app\n ---> Running in bb27c4b12b1d\nRemoving intermediate container bb27c4b12b1d\n ---> 583dbeeb3086\nStep 4/14 : COPY package.json .\n ---> 86bfc18072ac\nStep 5/14 : COPY package-lock.json .\n ---> 21afbf1fcc6d\nStep 6/14 : RUN npm clean-install\n ---> Running in deb873e3de56\n\n> bcrypt@4.0.1 install /usr/src/app/node_modules/bcrypt\n> node-pre-gyp install --fallback-to-build\n\n\u001b[91mnode-pre-gyp\u001b[0m\u001b[91m WARN Using request for node-pre-gyp https download \n\u001b[0m[bcrypt] Success: \"/usr/src/app/node_modules/bcrypt/lib/binding/napi-v3/bcrypt_lib.node\" is installed via remote\n\n> @nestjs/core@7.0.8 postinstall /usr/src/app/node_modules/@nestjs/core\n> opencollective || exit 0\n\n                           Thanks for installing nest \n                 Please consider donating to our open collective\n                        to help us maintain this package.\n                                         \n                            Number of contributors: 0\n                              Number of backers: 879\n                             Annual budget: $179,223\n                             Current balance: $21,177\n                                         \n             Become a partner: https://opencollective.com/nest/donate\n                                         \n\n> fsevents@1.2.12 install /usr/src/app/node_modules/watchpack/node_modules/fsevents\n> node-gyp rebuild\n\nmake: Entering directory '/usr/src/app/node_modules/watchpack/node_modules/fsevents/build'\n  SOLINK_MODULE(target) Release/obj.target/.node\n  COPY Release/.node\nmake: Leaving directory '/usr/src/app/node_modules/watchpack/node_modules/fsevents/build'\n\n> core-js@2.6.11 postinstall /usr/src/app/node_modules/core-js\n> node -e \"try{require('./postinstall')}catch(e){}\"\n\n\u001b[96mThank you for using core-js (\u001b[94m https://github.com/zloirock/core-js \u001b[96m) for polyfilling JavaScript standard library!\u001b[0m\n\n\u001b[96mThe project needs your help! Please consider supporting of core-js on Open Collective or Patreon: \u001b[0m\n\u001b[96m>\u001b[94m https://opencollective.com/core-js \u001b[0m\n\u001b[96m>\u001b[94m https://www.patreon.com/zloirock \u001b[0m\n\n\u001b[96mAlso, the author of core-js (\u001b[94m https://github.com/zloirock \u001b[96m) is looking for a good job -)\u001b[0m\n\n\n> fsevents@1.2.13 install /usr/src/app/node_modules/live-server/node_modules/fsevents\n> node install.js\n\n\nSkipping 'fsevents' build as platform linux is not supported\n\n> @compodoc/compodoc@1.1.11 postinstall /usr/src/app/node_modules/@compodoc/compodoc\n> opencollective-postinstall || exit 0\n\n\u001b[96m\u001b[1mThank you for using @compodoc/compodoc!\u001b[96m\u001b[1m\n\u001b[0m\u001b[96mIf you rely on this package, please consider supporting our open collective:\u001b[22m\u001b[39m\n> \u001b[94mhttps://opencollective.com/compodoc/donate\u001b[0m\n\nadded 1904 packages in 17.161s\nRemoving intermediate container deb873e3de56\n ---> 677142dcf232\nStep 7/14 : COPY . .\n ---> caac3077e6cc\nStep 8/14 : RUN npm run build\n ---> Running in 82a455a10047\n\n> nexd-backend@0.1.0 prebuild /usr/src/app\n> rimraf dist\n\n\n> nexd-backend@0.1.0 build /usr/src/app\n> cross-env NODE_ENV=production nest build\n\nRemoving intermediate container 82a455a10047\n ---> 358efa97062d\nStep 9/14 : EXPOSE 8080\n ---> Running in b68fb30cf14e\nRemoving intermediate container b68fb30cf14e\n ---> e4941108d161\nStep 10/14 : RUN adduser -D localuser\n ---> Running in 981360c7bae7\nRemoving intermediate container 981360c7bae7\n ---> 083371d442be\nStep 11/14 : RUN touch ormconfig.json\n ---> Running in 6f79460560c3\nRemoving intermediate container 6f79460560c3\n ---> 3e192518e0c5\nStep 12/14 : RUN chown localuser:localuser ormconfig.json\n ---> Running in 525d3f4ddde9\nRemoving intermediate container 525d3f4ddde9\n ---> e68683ff2468\nStep 13/14 : USER localuser\n ---> Running in 051f2c219ddd\nRemoving intermediate container 051f2c219ddd\n ---> 95bcac1e2176\nStep 14/14 : CMD [ \"npm\", \"run\", \"start:prod:withmigrations\" ]\n ---> Running in 268f76d06717\nRemoving intermediate container 268f76d06717\n ---> a92a8be38bdc\nSuccessfully built a92a8be38bdc\nSuccessfully tagged nexd-backend:latest\n","stderr":"","imageSize":764503420}}