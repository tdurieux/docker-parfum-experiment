{"repository":"https://github.com/nccgroup/winpayloads","dockerfilePath":"Dockerfile","startTime":1672959010539,"endTime":1672959102941,"clone":{"startTime":1672959010540,"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/nccgroup/winpayloads'...\n","error":null,"endTime":1672959011271,"commit":"809c97090fc151ff7c0d1ab602ce06ca28db094b"},"originalBuild":{"startTime":1672959011352,"endTime":1672959102870,"error":{"code":20,"killed":false,"signal":null,"cmd":"docker build --no-cache --force-rm -t winpayloads:latest -f /tmp/dinghy-analysis/nccgroup/winpayloads/Dockerfile ."},"stdout":"Sending build context to Docker daemon  290.3kB\r\r\n\u001b[91m[WARNING]: Empty continuation line found in:\n    RUN echo \"x86\" > /etc/apk/arch && mkdir -p /root/.win32 && mkdir /root/temp &&     apk --update add --no-cache ruby ruby-bigdecimal ruby-bundler build-base                                 libpcap-dev zlib-dev sqlite-dev ruby-dev postgresql-dev                                 python2 py-pip git wine python2-dev ncurses linux-headers                                 curl p7zip openssl libffi-dev &&     git clone https://github.com/rapid7/metasploit-framework /opt/metasploit &&     cd /opt/metasploit &&     bundle install &&     ln -s /opt/metasploit/msf* /usr/local/bin &&     cd /root/temp &&     curl -L -O https://www.python.org/ftp/python/2.7.10/python-2.7.10.msi &&     wine msiexec /i python-2.7.10.msi TARGETDIR=C:\\Python27 ALLUSERS=1 /q &&     wineserver -w &&     curl -L -O http://www.voidspace.org.uk/downloads/pycrypto26/pycrypto-2.6.win32-py2.7.exe &&     7za -y x pycrypto-2.6.win32-py2.7.exe &&     curl -L -O https://download.microsoft.com/download/1/1/1/1116b75a-9ec3-481a-a3c8-1777b5381140/vcredist_x86.exe &&     7za -y e vcredist_x86.exe &&     wine msiexec /i vc_red.msi ALLUSERS=1 /q &&     wineserver -w &&     curl -L -O https://github.com/mhammond/pywin32/releases/download/b224/pywin32-224.win32-py2.7.exe &&     7za -y x pywin32-224.win32-py2.7.exe &&     cp -rf PLATLIB/* /root/.win32/drive_c/Python27/Lib/site-packages/ &&     cp -rf SCRIPTS/* /root/.win32/drive_c/Python27/Lib/site-packages/ &&     cp -rf SCRIPTS/* /root/.win32/drive_c/Python27/Scripts/ &&     wine /root/.win32/drive_c/Python27/python.exe /root/.win32/drive_c/Python27/Scripts/pywin32_postinstall.py -install -silent &&     wineserver -w &&     git clone https://github.com/pyinstaller/pyinstaller.git /opt/pyinstaller &&     cd /opt/pyinstaller &&     wine /root/.win32/drive_c/Python27/python.exe -m pip install --no-cache-dir pywin32-ctypes dis3 pefile altgraph macholib &&     wine /root/.win32/drive_c/Python27/python.exe setup.py install &&     wineserver -w &&     pip install --no-cache-dir pip --upgrade &&     pip install --no-cache-dir pycrypto ldap3==2.5.1 blessed pyasn1 prompt-toolkit==1.0.15 netifaces requests &&     git clone https://github.com/CoreSecurity/impacket.git /opt/impacket &&     cd /opt/impacket &&     python /opt/impacket/setup.py install &&     git clone https://github.com/nccgroup/winpayloads.git /opt/winpayloads &&     cd /opt/winpayloads/lib &&     curl -O https://raw.githubusercontent.com/Charliedean/PsexecSpray/master/psexecspray.py &&     cd /opt/winpayloads &&     mkdir externalmodules && cd /opt/winpayloads/externalmodules &&     curl -O https://raw.githubusercontent.com/Charliedean/InvokeShellcode1803/master/Invoke-Shellcode.ps1 &&     sed -i -e 's/Invoke-Shellcode/Invoke-Code/g' Invoke-Shellcode.ps1 &&     sed -i -e '/<#/,/#>/c\\\\' Invoke-Shellcode.ps1 &&     sed -i -e 's/^[[:space:]]*#.*$//g' Invoke-Shellcode.ps1 &&     curl -O https://raw.githubusercontent.com/EmpireProject/Empire/master/data/module_source/privesc/Invoke-BypassUAC.ps1 &&     curl -O https://raw.githubusercontent.com/Charliedean/Invoke-SilentCleanUpBypass/master/Invoke-SilentCleanUpBypass.ps1 &&     curl -O https://raw.githubusercontent.com/PowerShellEmpire/PowerTools/master/PowerUp/PowerUp.ps1 &&     curl -O https://raw.githubusercontent.com/PowerShellMafia/PowerSploit/master/Exfiltration/Invoke-Mimikatz.ps1 &&     cd /opt/winpayloads &&     openssl genrsa -out server.pass.key 2048 &&     openssl rsa -in server.pass.key -out server.key &&     openssl req -new -key server.key -out server.csr -subj \"/C=US/ST=Denial/L=Springfield/O=Dis/CN=www.example.com\" &&     openssl x509 -req -days 365 -in server.csr -signkey server.key -out server.crt &&     rm server.csr server.pass.key &&     apk del libpcap-dev zlib-dev sqlite-dev ruby-dev postgresql-dev             build-base p7zip libffi-dev linux-headers py-pip python2-dev &&     rm -rf /root/temp /opt/impacket /opt/metasploit/.git /opt/pyinstaller/.git            /root/.cache /var/cache /root/.win32/drive_c/Python27/Lib/test            /root/.win32/drive_c/Python27/Lib/site-packages/pip            /root/.win32/drive_c/Python27/Lib/site-packages/setuptools            /root/.win32/drive_c/Python27/Lib/idlelib\n[WARNING]: Empty continuation lines will become errors in a future release.\n\u001b[0mStep 1/9 : FROM alpine:3.7\n3.7: Pulling from library/alpine\n5d20c808ce19: Pulling fs layer\n5d20c808ce19: Verifying Checksum\n5d20c808ce19: Download complete\n5d20c808ce19: Pull complete\nDigest: sha256:8421d9a84432575381bfabd248f1eb56f3aa21d9d7cd2511583c68c9b7511d10\nStatus: Downloaded newer image for alpine:3.7\n ---> 6d1ef012b567\nStep 2/9 : MAINTAINER CharlieDean\n ---> Running in bb66ab7356dd\nRemoving intermediate container bb66ab7356dd\n ---> 7abf0b90afae\nStep 3/9 : LABEL version=\"2.0\"\n ---> Running in 4175270919d8\nRemoving intermediate container 4175270919d8\n ---> 5170dcb0ed9a\nStep 4/9 : LABEL description=\"Winpayloads Docker in Alpine!\"\n ---> Running in e1a85c2e72ef\nRemoving intermediate container e1a85c2e72ef\n ---> 3fb7072240ef\nStep 5/9 : ENV WINEARCH=win32\n ---> Running in 65a762c75ff6\nRemoving intermediate container 65a762c75ff6\n ---> 5ebb0a784032\nStep 6/9 : ENV WINEPREFIX=/root/.win32\n ---> Running in 0de46d5c6668\nRemoving intermediate container 0de46d5c6668\n ---> 51b3523f0d86\nStep 7/9 : RUN echo \"x86\" > /etc/apk/arch && mkdir -p /root/.win32 && mkdir /root/temp &&     apk --update add --no-cache ruby ruby-bigdecimal ruby-bundler build-base                                 libpcap-dev zlib-dev sqlite-dev ruby-dev postgresql-dev                                 python2 py-pip git wine python2-dev ncurses linux-headers                                 curl p7zip openssl libffi-dev &&     git clone https://github.com/rapid7/metasploit-framework /opt/metasploit &&     cd /opt/metasploit &&     bundle install &&     ln -s /opt/metasploit/msf* /usr/local/bin &&     cd /root/temp &&     curl -L -O https://www.python.org/ftp/python/2.7.10/python-2.7.10.msi &&     wine msiexec /i python-2.7.10.msi TARGETDIR=C:\\Python27 ALLUSERS=1 /q &&     wineserver -w &&     curl -L -O http://www.voidspace.org.uk/downloads/pycrypto26/pycrypto-2.6.win32-py2.7.exe &&     7za -y x pycrypto-2.6.win32-py2.7.exe &&     curl -L -O https://download.microsoft.com/download/1/1/1/1116b75a-9ec3-481a-a3c8-1777b5381140/vcredist_x86.exe &&     7za -y e vcredist_x86.exe &&     wine msiexec /i vc_red.msi ALLUSERS=1 /q &&     wineserver -w &&     curl -L -O https://github.com/mhammond/pywin32/releases/download/b224/pywin32-224.win32-py2.7.exe &&     7za -y x pywin32-224.win32-py2.7.exe &&     cp -rf PLATLIB/* /root/.win32/drive_c/Python27/Lib/site-packages/ &&     cp -rf SCRIPTS/* /root/.win32/drive_c/Python27/Lib/site-packages/ &&     cp -rf SCRIPTS/* /root/.win32/drive_c/Python27/Scripts/ &&     wine /root/.win32/drive_c/Python27/python.exe /root/.win32/drive_c/Python27/Scripts/pywin32_postinstall.py -install -silent &&     wineserver -w &&     git clone https://github.com/pyinstaller/pyinstaller.git /opt/pyinstaller &&     cd /opt/pyinstaller &&     wine /root/.win32/drive_c/Python27/python.exe -m pip install --no-cache-dir pywin32-ctypes dis3 pefile altgraph macholib &&     wine /root/.win32/drive_c/Python27/python.exe setup.py install &&     wineserver -w &&     pip install --no-cache-dir pip --upgrade &&     pip install --no-cache-dir pycrypto ldap3==2.5.1 blessed pyasn1 prompt-toolkit==1.0.15 netifaces requests &&     git clone https://github.com/CoreSecurity/impacket.git /opt/impacket &&     cd /opt/impacket &&     python /opt/impacket/setup.py install &&     git clone https://github.com/nccgroup/winpayloads.git /opt/winpayloads &&     cd /opt/winpayloads/lib &&     curl -O https://raw.githubusercontent.com/Charliedean/PsexecSpray/master/psexecspray.py &&     cd /opt/winpayloads &&     mkdir externalmodules && cd /opt/winpayloads/externalmodules &&     curl -O https://raw.githubusercontent.com/Charliedean/InvokeShellcode1803/master/Invoke-Shellcode.ps1 &&     sed -i -e 's/Invoke-Shellcode/Invoke-Code/g' Invoke-Shellcode.ps1 &&     sed -i -e '/<#/,/#>/c\\\\' Invoke-Shellcode.ps1 &&     sed -i -e 's/^[[:space:]]*#.*$//g' Invoke-Shellcode.ps1 &&     curl -O https://raw.githubusercontent.com/EmpireProject/Empire/master/data/module_source/privesc/Invoke-BypassUAC.ps1 &&     curl -O https://raw.githubusercontent.com/Charliedean/Invoke-SilentCleanUpBypass/master/Invoke-SilentCleanUpBypass.ps1 &&     curl -O https://raw.githubusercontent.com/PowerShellEmpire/PowerTools/master/PowerUp/PowerUp.ps1 &&     curl -O https://raw.githubusercontent.com/PowerShellMafia/PowerSploit/master/Exfiltration/Invoke-Mimikatz.ps1 &&     cd /opt/winpayloads &&     openssl genrsa -out server.pass.key 2048 &&     openssl rsa -in server.pass.key -out server.key &&     openssl req -new -key server.key -out server.csr -subj \"/C=US/ST=Denial/L=Springfield/O=Dis/CN=www.example.com\" &&     openssl x509 -req -days 365 -in server.csr -signkey server.key -out server.crt &&     rm server.csr server.pass.key &&     apk del libpcap-dev zlib-dev sqlite-dev ruby-dev postgresql-dev             build-base p7zip libffi-dev linux-headers py-pip python2-dev &&     rm -rf /root/temp /opt/impacket /opt/metasploit/.git /opt/pyinstaller/.git            /root/.cache /var/cache /root/.win32/drive_c/Python27/Lib/test            /root/.win32/drive_c/Python27/Lib/site-packages/pip            /root/.win32/drive_c/Python27/Lib/site-packages/setuptools            /root/.win32/drive_c/Python27/Lib/idlelib\n ---> Running in 0fd51d0289d5\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.7/main/x86/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.7/community/x86/APKINDEX.tar.gz\n(1/88) Upgrading musl (1.1.18-r3 -> 1.1.18-r4)\n(2/88) Replacing busybox (1.27.2-r11 -> 1.27.2-r11)\nExecuting busybox-1.27.2-r11.post-upgrade\n(3/88) Replacing alpine-baselayout (3.0.5-r2 -> 3.0.5-r2)\nExecuting alpine-baselayout-3.0.5-r2.pre-upgrade\nExecuting alpine-baselayout-3.0.5-r2.post-upgrade\n(4/88) Replacing libressl2.6-libcrypto (2.6.5-r0 -> 2.6.5-r0)\n(5/88) Replacing libressl2.6-libssl (2.6.5-r0 -> 2.6.5-r0)\n(6/88) Replacing libressl2.6-libtls (2.6.5-r0 -> 2.6.5-r0)\n(7/88) Replacing ssl_client (1.27.2-r11 -> 1.27.2-r11)\n(8/88) Replacing zlib (1.2.11-r1 -> 1.2.11-r1)\n(9/88) Replacing apk-tools (2.10.1-r0 -> 2.10.1-r0)\n(10/88) Installing binutils-libs (2.30-r2)\n(11/88) Installing binutils (2.30-r2)\n(12/88) Installing gmp (6.1.2-r1)\n(13/88) Installing isl (0.18-r0)\n(14/88) Installing libgomp (6.4.0-r5)\n(15/88) Installing libatomic (6.4.0-r5)\n(16/88) Installing pkgconf (1.3.10-r0)\n(17/88) Installing libgcc (6.4.0-r5)\n(18/88) Installing mpfr3 (3.1.5-r1)\n(19/88) Installing mpc1 (1.0.3-r1)\n(20/88) Installing libstdc++ (6.4.0-r5)\n(21/88) Installing gcc (6.4.0-r5)\n(22/88) Installing musl-dev (1.1.18-r4)\n(23/88) Installing libc-dev (0.7.1-r0)\n(24/88) Installing g++ (6.4.0-r5)\n(25/88) Installing make (4.2.1-r0)\n(26/88) Installing fortify-headers (0.9-r0)\n(27/88) Installing build-base (0.5-r0)\n(28/88) Installing ca-certificates (20190108-r0)\n(29/88) Installing libssh2 (1.9.0-r1)\n(30/88) Installing libcurl (7.61.1-r3)\n(31/88) Installing curl (7.61.1-r3)\n(32/88) Installing expat (2.2.8-r0)\n(33/88) Installing pcre2 (10.30-r0)\n(34/88) Installing git (2.15.4-r0)\n(35/88) Replacing scanelf (1.2.2-r1 -> 1.2.2-r1)\n(36/88) Upgrading musl-utils (1.1.18-r3 -> 1.1.18-r4)\n(37/88) Installing libffi (3.2.1-r4)\n(38/88) Installing libffi-dev (3.2.1-r4)\n(39/88) Installing libpcap (1.8.1-r1)\n(40/88) Installing libpcap-dev (1.8.1-r1)\n(41/88) Installing linux-headers (4.4.6-r2)\n(42/88) Installing ncurses-terminfo-base (6.0_p20171125-r1)\n(43/88) Installing ncurses-terminfo (6.0_p20171125-r1)\n(44/88) Installing ncurses-libs (6.0_p20171125-r1)\n(45/88) Installing ncurses (6.0_p20171125-r1)\n(46/88) Installing libcrypto1.0 (1.0.2t-r0)\n(47/88) Installing libssl1.0 (1.0.2t-r0)\n(48/88) Installing openssl (1.0.2t-r0)\n(49/88) Installing p7zip (16.02-r3)\n(50/88) Installing libressl-dev (2.6.5-r0)\n(51/88) Installing db (5.3.28-r0)\n(52/88) Installing libsasl (2.1.26-r11)\n(53/88) Installing libldap (2.4.48-r0)\n(54/88) Installing libpq (10.10-r0)\n(55/88) Installing postgresql-libs (10.10-r0)\n(56/88) Installing postgresql-dev (10.10-r0)\n(57/88) Installing libbz2 (1.0.6-r7)\n(58/88) Installing gdbm (1.13-r1)\n(59/88) Installing readline (7.0.003-r0)\n(60/88) Installing sqlite-libs (3.25.3-r2)\n(61/88) Installing python2 (2.7.15-r3)\n(62/88) Installing py-setuptools (33.1.1-r1)\n(63/88) Installing py2-pip (9.0.1-r1)\n(64/88) Installing python2-dev (2.7.15-r3)\n(65/88) Installing yaml (0.1.7-r0)\n(66/88) Installing ruby-libs (2.4.10-r0)\n(67/88) Installing ruby (2.4.10-r0)\n(68/88) Installing ruby-bigdecimal (2.4.10-r0)\n(69/88) Installing ruby-io-console (2.4.10-r0)\n(70/88) Installing ruby-bundler (1.16.1-r0)\n(71/88) Installing libgmpxx (6.1.2-r1)\n(72/88) Installing gmp-dev (6.1.2-r1)\n(73/88) Installing ruby-dev (2.4.10-r0)\n(74/88) Installing sqlite-dev (3.25.3-r2)\n(75/88) Installing m4 (1.4.18-r0)\n(76/88) Installing flex-libs (2.6.4-r1)\n(77/88) Installing libxau (1.0.8-r2)\n(78/88) Installing libbsd (0.8.6-r1)\n(79/88) Installing libxdmcp (1.1.2-r4)\n(80/88) Installing libxcb (1.12-r1)\n(81/88) Installing libx11 (1.6.6-r0)\n(82/88) Installing libxext (1.3.3-r2)\n(83/88) Installing alsa-lib (1.1.4.1-r2)\n(84/88) Installing eudev-libs (3.2.4-r1)\n(85/88) Installing libxml2 (2.9.8-r1)\n(86/88) Installing wine-libs (2.0.3-r0)\n(87/88) Installing wine (2.0.3-r0)\n(88/88) Installing zlib-dev (1.2.11-r1)\nExecuting busybox-1.27.2-r11.trigger\nExecuting ca-certificates-20190108-r0.trigger\nOK: 454 MiB in 90 packages\n\u001b[91mCloning into '/opt/metasploit'...\n\u001b[0mDon't run Bundler as root. Bundler can ask for sudo if it is needed, and\ninstalling your bundle as root will break this application for all non-root\nusers on this machine.\nYou must use Bundler 2 or greater with this lockfile.\nRemoving intermediate container 0fd51d0289d5\n","stderr":"The command '/bin/sh -c echo \"x86\" > /etc/apk/arch && mkdir -p /root/.win32 && mkdir /root/temp &&     apk --update add --no-cache ruby ruby-bigdecimal ruby-bundler build-base                                 libpcap-dev zlib-dev sqlite-dev ruby-dev postgresql-dev                                 python2 py-pip git wine python2-dev ncurses linux-headers                                 curl p7zip openssl libffi-dev &&     git clone https://github.com/rapid7/metasploit-framework /opt/metasploit &&     cd /opt/metasploit &&     bundle install &&     ln -s /opt/metasploit/msf* /usr/local/bin &&     cd /root/temp &&     curl -L -O https://www.python.org/ftp/python/2.7.10/python-2.7.10.msi &&     wine msiexec /i python-2.7.10.msi TARGETDIR=C:\\Python27 ALLUSERS=1 /q &&     wineserver -w &&     curl -L -O http://www.voidspace.org.uk/downloads/pycrypto26/pycrypto-2.6.win32-py2.7.exe &&     7za -y x pycrypto-2.6.win32-py2.7.exe &&     curl -L -O https://download.microsoft.com/download/1/1/1/1116b75a-9ec3-481a-a3c8-1777b5381140/vcredist_x86.exe &&     7za -y e vcredist_x86.exe &&     wine msiexec /i vc_red.msi ALLUSERS=1 /q &&     wineserver -w &&     curl -L -O https://github.com/mhammond/pywin32/releases/download/b224/pywin32-224.win32-py2.7.exe &&     7za -y x pywin32-224.win32-py2.7.exe &&     cp -rf PLATLIB/* /root/.win32/drive_c/Python27/Lib/site-packages/ &&     cp -rf SCRIPTS/* /root/.win32/drive_c/Python27/Lib/site-packages/ &&     cp -rf SCRIPTS/* /root/.win32/drive_c/Python27/Scripts/ &&     wine /root/.win32/drive_c/Python27/python.exe /root/.win32/drive_c/Python27/Scripts/pywin32_postinstall.py -install -silent &&     wineserver -w &&     git clone https://github.com/pyinstaller/pyinstaller.git /opt/pyinstaller &&     cd /opt/pyinstaller &&     wine /root/.win32/drive_c/Python27/python.exe -m pip install --no-cache-dir pywin32-ctypes dis3 pefile altgraph macholib &&     wine /root/.win32/drive_c/Python27/python.exe setup.py install &&     wineserver -w &&     pip install --no-cache-dir pip --upgrade &&     pip install --no-cache-dir pycrypto ldap3==2.5.1 blessed pyasn1 prompt-toolkit==1.0.15 netifaces requests &&     git clone https://github.com/CoreSecurity/impacket.git /opt/impacket &&     cd /opt/impacket &&     python /opt/impacket/setup.py install &&     git clone https://github.com/nccgroup/winpayloads.git /opt/winpayloads &&     cd /opt/winpayloads/lib &&     curl -O https://raw.githubusercontent.com/Charliedean/PsexecSpray/master/psexecspray.py &&     cd /opt/winpayloads &&     mkdir externalmodules && cd /opt/winpayloads/externalmodules &&     curl -O https://raw.githubusercontent.com/Charliedean/InvokeShellcode1803/master/Invoke-Shellcode.ps1 &&     sed -i -e 's/Invoke-Shellcode/Invoke-Code/g' Invoke-Shellcode.ps1 &&     sed -i -e '/<#/,/#>/c\\\\' Invoke-Shellcode.ps1 &&     sed -i -e 's/^[[:space:]]*#.*$//g' Invoke-Shellcode.ps1 &&     curl -O https://raw.githubusercontent.com/EmpireProject/Empire/master/data/module_source/privesc/Invoke-BypassUAC.ps1 &&     curl -O https://raw.githubusercontent.com/Charliedean/Invoke-SilentCleanUpBypass/master/Invoke-SilentCleanUpBypass.ps1 &&     curl -O https://raw.githubusercontent.com/PowerShellEmpire/PowerTools/master/PowerUp/PowerUp.ps1 &&     curl -O https://raw.githubusercontent.com/PowerShellMafia/PowerSploit/master/Exfiltration/Invoke-Mimikatz.ps1 &&     cd /opt/winpayloads &&     openssl genrsa -out server.pass.key 2048 &&     openssl rsa -in server.pass.key -out server.key &&     openssl req -new -key server.key -out server.csr -subj \"/C=US/ST=Denial/L=Springfield/O=Dis/CN=www.example.com\" &&     openssl x509 -req -days 365 -in server.csr -signkey server.key -out server.crt &&     rm server.csr server.pass.key &&     apk del libpcap-dev zlib-dev sqlite-dev ruby-dev postgresql-dev             build-base p7zip libffi-dev linux-headers py-pip python2-dev &&     rm -rf /root/temp /opt/impacket /opt/metasploit/.git /opt/pyinstaller/.git            /root/.cache /var/cache /root/.win32/drive_c/Python27/Lib/test            /root/.win32/drive_c/Python27/Lib/site-packages/pip            /root/.win32/drive_c/Python27/Lib/site-packages/setuptools            /root/.win32/drive_c/Python27/Lib/idlelib' returned a non-zero code: 20\n"}}