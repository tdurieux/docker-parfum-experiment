{"repository":"https://github.com/strzibny/invoice_printer","dockerfilePath":"Dockerfile","startTime":1672904851000,"endTime":1672904976050,"clone":{"startTime":1672904851001,"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/strzibny/invoice_printer'...\n","error":null,"endTime":1672904851959,"commit":"5cda55ee339d25ad05eeab4968b81483bd3e8b17"},"originalBuild":{"startTime":1672904852044,"endTime":1672904941337,"error":null,"stdout":"Sending build context to Docker daemon  5.132MB\r\r\nStep 1/10 : FROM alpine:3.13\n3.13: Pulling from library/alpine\nDigest: sha256:469b6e04ee185740477efa44ed5bdd64a07bbdd6c7e5f5d169e540889597b911\nStatus: Downloaded newer image for alpine:3.13\n ---> 6b5c5e00213a\nStep 2/10 : MAINTAINER Josef Strzibny <strzibny@strzibny.name>\n ---> Running in 6353bf31deb2\nRemoving intermediate container 6353bf31deb2\n ---> 24fb1da00184\nStep 3/10 : ENV GEM_HOME=\"/usr/local/bundle\"\n ---> Running in 216ab58cb328\nRemoving intermediate container 216ab58cb328\n ---> b12c9cfd0f72\nStep 4/10 : ENV PATH $GEM_HOME/bin:$GEM_HOME/gems/bin:$PATH\n ---> Running in e62bc5c12d28\nRemoving intermediate container e62bc5c12d28\n ---> 48d4d95cd6b4\nStep 5/10 : RUN apk update && apk upgrade\n ---> Running in 262ac82d3352\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.13/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.13/community/x86_64/APKINDEX.tar.gz\nv3.13.12-94-g0551adbecc [https://dl-cdn.alpinelinux.org/alpine/v3.13/main]\nv3.13.12-94-g0551adbecc [https://dl-cdn.alpinelinux.org/alpine/v3.13/community]\nOK: 13899 distinct packages available\n(1/2) Upgrading libcrypto1.1 (1.1.1q-r0 -> 1.1.1s-r0)\n(2/2) Upgrading libssl1.1 (1.1.1q-r0 -> 1.1.1s-r0)\nOK: 6 MiB in 14 packages\nRemoving intermediate container 262ac82d3352\n ---> 9aa7cdefead7\nStep 6/10 : RUN apk add build-base bash ruby ruby-etc ruby-dev\n ---> Running in 302be2c58484\n(1/36) Installing ncurses-terminfo-base (6.2_p20210109-r1)\n(2/36) Installing ncurses-libs (6.2_p20210109-r1)\n(3/36) Installing readline (8.1.0-r0)\n(4/36) Installing bash (5.1.16-r0)\nExecuting bash-5.1.16-r0.post-install\n(5/36) Installing libgcc (10.2.1_pre1-r3)\n(6/36) Installing libstdc++ (10.2.1_pre1-r3)\n(7/36) Installing binutils (2.35.2-r1)\n(8/36) Installing libmagic (5.39-r0)\n(9/36) Installing file (5.39-r0)\n(10/36) Installing libgomp (10.2.1_pre1-r3)\n(11/36) Installing libatomic (10.2.1_pre1-r3)\n(12/36) Installing libgphobos (10.2.1_pre1-r3)\n(13/36) Installing gmp (6.2.1-r1)\n(14/36) Installing isl22 (0.22-r0)\n(15/36) Installing mpfr4 (4.1.0-r0)\n(16/36) Installing mpc1 (1.2.0-r0)\n(17/36) Installing gcc (10.2.1_pre1-r3)\n(18/36) Installing musl-dev (1.2.2-r1)\n(19/36) Installing libc-dev (0.7.2-r3)\n(20/36) Installing g++ (10.2.1_pre1-r3)\n(21/36) Installing make (4.3-r0)\n(22/36) Installing fortify-headers (1.1-r0)\n(23/36) Installing patch (2.7.6-r7)\n(24/36) Installing build-base (0.5-r3)\n(25/36) Installing ca-certificates (20220614-r0)\n(26/36) Installing gdbm (1.19-r0)\n(27/36) Installing yaml (0.2.5-r0)\n(28/36) Installing ruby-libs (2.7.6-r0)\n(29/36) Installing ruby (2.7.6-r0)\n(30/36) Installing libgmpxx (6.2.1-r1)\n(31/36) Installing pkgconf (1.7.3-r0)\n(32/36) Installing gmp-dev (6.2.1-r1)\n(33/36) Installing libucontext (1.0-r0)\n(34/36) Installing libucontext-dev (1.0-r0)\n(35/36) Installing ruby-dev (2.7.6-r0)\n(36/36) Installing ruby-etc (2.7.6-r0)\nExecuting busybox-1.32.1-r9.trigger\nExecuting ca-certificates-20220614-r0.trigger\nOK: 215 MiB in 50 packages\nRemoving intermediate container 302be2c58484\n ---> a62e491db197\nStep 7/10 : RUN gem install invoice_printer_fonts --version 2.2.0 --no-document\n ---> Running in eac9fa26f6d7\nSuccessfully installed ttfunk-1.7.0\nSuccessfully installed pdf-core-0.9.0\nSuccessfully installed prawn-2.4.0\nSuccessfully installed prawn-table-0.2.2\nBuilding native extensions. This could take a while...\nSuccessfully installed json-2.6.3\nSuccessfully installed invoice_printer-2.2.0\nSuccessfully installed invoice_printer_fonts-2.2.0\n7 gems installed\nRemoving intermediate container eac9fa26f6d7\n ---> 0723d741a4fd\nStep 8/10 : RUN gem install invoice_printer_server --version 2.2.0 --no-document\n ---> Running in 8732d426fa1d\nBuilding native extensions. This could take a while...\nSuccessfully installed nio4r-2.5.8\nBuilding native extensions. This could take a while...\nSuccessfully installed puma-6.0.2\nSuccessfully installed rack-3.0.3\nSuccessfully installed roda-3.63.0\nSuccessfully installed invoice_printer_server-2.2.0\n5 gems installed\nRemoving intermediate container 8732d426fa1d\n ---> 2f8146f4ed92\nStep 9/10 : RUN rm -rf /var/cache/apk/*\n ---> Running in ee58b94ad9b5\nRemoving intermediate container ee58b94ad9b5\n ---> d14e2182694b\nStep 10/10 : ENTRYPOINT [\"/usr/local/bundle/bin/invoice_printer_server\", \"-p9393\"]\n ---> Running in f0795c232f06\nRemoving intermediate container f0795c232f06\n ---> d744f6b56ff7\nSuccessfully built d744f6b56ff7\nSuccessfully tagged invoice_printer:latest\n","stderr":"","imageSize":233304060},"repair":{"startTime":1672904941401,"endTime":1672904941482,"violations":[{"name":"apkAddUseNoCache","position":{"start":25,"end":25,"columnStart":4,"columnEnd":50}}],"repairedDockerfile":"# To build the Docker image:\n#\n#   $ sudo systemctl start docker\n#   $ sudo docker build -t printer .\n#\n# To run it:\n#\n#   $ sudo docker run -d -p 9393:9393 -t printer\n#\n# To push to repository:\n#\n#   $ sudo docker login\n#   $ sudo docker tag printer docker.io/strzibnyj/invoice_printer_server:latest\n#   $ sudo docker push strzibnyj/invoice_printer_server:$VERSION\n#   $ sudo docker push strzibnyj/invoice_printer_server:latest\nFROM alpine:3.13\nMAINTAINER Josef Strzibny <strzibny@strzibny.name>\n\nENV GEM_HOME=\"/usr/local/bundle\"\nENV PATH $GEM_HOME/bin:$GEM_HOME/gems/bin:$PATH\n\n# Update system\nRUN apk update && apk upgrade\n\n# Install Ruby and build dependencies\nRUN apk add --no-cache build-base bash ruby ruby-etc ruby-dev\n\n# Install builtin fonts\nRUN gem install invoice_printer_fonts --version 2.2.0 --no-document\n\n# Install the gem from RubyGems.org\nRUN gem install invoice_printer_server --version 2.2.0 --no-document\n\n# Clean APK cache\nRUN rm -rf /var/cache/apk/*\n\n# Run the server on port 80\nENTRYPOINT [\"/usr/local/bundle/bin/invoice_printer_server\", \"-p9393\"]\n"},"repairedBuild":{"startTime":1672904941975,"endTime":1672904975665,"error":null,"stdout":"Sending build context to Docker daemon  5.132MB\r\r\nStep 1/10 : FROM alpine:3.13\n ---> 6b5c5e00213a\nStep 2/10 : MAINTAINER Josef Strzibny <strzibny@strzibny.name>\n ---> Running in f94d239c9213\nRemoving intermediate container f94d239c9213\n ---> a94c38d8db29\nStep 3/10 : ENV GEM_HOME=\"/usr/local/bundle\"\n ---> Running in 3467c2a302d1\nRemoving intermediate container 3467c2a302d1\n ---> e72c2ec4fb64\nStep 4/10 : ENV PATH $GEM_HOME/bin:$GEM_HOME/gems/bin:$PATH\n ---> Running in c993f90e6f13\nRemoving intermediate container c993f90e6f13\n ---> 9c1a39c54d29\nStep 5/10 : RUN apk update && apk upgrade\n ---> Running in 98a1d975e202\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.13/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.13/community/x86_64/APKINDEX.tar.gz\nv3.13.12-94-g0551adbecc [https://dl-cdn.alpinelinux.org/alpine/v3.13/main]\nv3.13.12-94-g0551adbecc [https://dl-cdn.alpinelinux.org/alpine/v3.13/community]\nOK: 13899 distinct packages available\n(1/2) Upgrading libcrypto1.1 (1.1.1q-r0 -> 1.1.1s-r0)\n(2/2) Upgrading libssl1.1 (1.1.1q-r0 -> 1.1.1s-r0)\nOK: 6 MiB in 14 packages\nRemoving intermediate container 98a1d975e202\n ---> 50b563318287\nStep 6/10 : RUN apk add --no-cache build-base bash ruby ruby-etc ruby-dev\n ---> Running in 2edaa8fea4d1\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.13/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.13/community/x86_64/APKINDEX.tar.gz\n(1/36) Installing ncurses-terminfo-base (6.2_p20210109-r1)\n(2/36) Installing ncurses-libs (6.2_p20210109-r1)\n(3/36) Installing readline (8.1.0-r0)\n(4/36) Installing bash (5.1.16-r0)\nExecuting bash-5.1.16-r0.post-install\n(5/36) Installing libgcc (10.2.1_pre1-r3)\n(6/36) Installing libstdc++ (10.2.1_pre1-r3)\n(7/36) Installing binutils (2.35.2-r1)\n(8/36) Installing libmagic (5.39-r0)\n(9/36) Installing file (5.39-r0)\n(10/36) Installing libgomp (10.2.1_pre1-r3)\n(11/36) Installing libatomic (10.2.1_pre1-r3)\n(12/36) Installing libgphobos (10.2.1_pre1-r3)\n(13/36) Installing gmp (6.2.1-r1)\n(14/36) Installing isl22 (0.22-r0)\n(15/36) Installing mpfr4 (4.1.0-r0)\n(16/36) Installing mpc1 (1.2.0-r0)\n(17/36) Installing gcc (10.2.1_pre1-r3)\n(18/36) Installing musl-dev (1.2.2-r1)\n(19/36) Installing libc-dev (0.7.2-r3)\n(20/36) Installing g++ (10.2.1_pre1-r3)\n(21/36) Installing make (4.3-r0)\n(22/36) Installing fortify-headers (1.1-r0)\n(23/36) Installing patch (2.7.6-r7)\n(24/36) Installing build-base (0.5-r3)\n(25/36) Installing ca-certificates (20220614-r0)\n(26/36) Installing gdbm (1.19-r0)\n(27/36) Installing yaml (0.2.5-r0)\n(28/36) Installing ruby-libs (2.7.6-r0)\n(29/36) Installing ruby (2.7.6-r0)\n(30/36) Installing libgmpxx (6.2.1-r1)\n(31/36) Installing pkgconf (1.7.3-r0)\n(32/36) Installing gmp-dev (6.2.1-r1)\n(33/36) Installing libucontext (1.0-r0)\n(34/36) Installing libucontext-dev (1.0-r0)\n(35/36) Installing ruby-dev (2.7.6-r0)\n(36/36) Installing ruby-etc (2.7.6-r0)\nExecuting busybox-1.32.1-r9.trigger\nExecuting ca-certificates-20220614-r0.trigger\nOK: 215 MiB in 50 packages\nRemoving intermediate container 2edaa8fea4d1\n ---> 1628c5815700\nStep 7/10 : RUN gem install invoice_printer_fonts --version 2.2.0 --no-document\n ---> Running in 49440a2e61c5\nSuccessfully installed ttfunk-1.7.0\nSuccessfully installed pdf-core-0.9.0\nSuccessfully installed prawn-2.4.0\nSuccessfully installed prawn-table-0.2.2\nBuilding native extensions. This could take a while...\nSuccessfully installed json-2.6.3\nSuccessfully installed invoice_printer-2.2.0\nSuccessfully installed invoice_printer_fonts-2.2.0\n7 gems installed\nRemoving intermediate container 49440a2e61c5\n ---> 063f515ee89f\nStep 8/10 : RUN gem install invoice_printer_server --version 2.2.0 --no-document\n ---> Running in e8f3b2008b4b\nBuilding native extensions. This could take a while...\nSuccessfully installed nio4r-2.5.8\nBuilding native extensions. This could take a while...\nSuccessfully installed puma-6.0.2\nSuccessfully installed rack-3.0.3\nSuccessfully installed roda-3.63.0\nSuccessfully installed invoice_printer_server-2.2.0\n5 gems installed\nRemoving intermediate container e8f3b2008b4b\n ---> 697eff3a132e\nStep 9/10 : RUN rm -rf /var/cache/apk/*\n ---> Running in a7f0a4b36095\nRemoving intermediate container a7f0a4b36095\n ---> e4ae5d7b60a6\nStep 10/10 : ENTRYPOINT [\"/usr/local/bundle/bin/invoice_printer_server\", \"-p9393\"]\n ---> Running in 36e55c2e41cb\nRemoving intermediate container 36e55c2e41cb\n ---> 19dd062ec1c0\nSuccessfully built 19dd062ec1c0\nSuccessfully tagged invoice_printer:latest\n","stderr":"","imageSize":233304063}}