{"repository":"https://github.com/messagebird/pushprom","dockerfilePath":"Dockerfile","startTime":1672868371753,"endTime":1672868585450,"clone":{"startTime":1672868371756,"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/messagebird/pushprom'...\n","error":null,"endTime":1672868372512,"commit":"49691b2fe874c81f637ff7c49b13e6e1da8eff8f"},"originalBuild":{"startTime":1672868372597,"endTime":1672868512331,"error":null,"stdout":"Sending build context to Docker daemon  215.6kB\r\r\nStep 1/12 : FROM golang:1.17-alpine as build-env\n1.17-alpine: Pulling from library/golang\n530afca65e2e: Already exists\nd450d4da0343: Pulling fs layer\n8162171ecb65: Pulling fs layer\nff63b82a42d3: Pulling fs layer\n5b4b56e6b994: Pulling fs layer\n5b4b56e6b994: Waiting\n8162171ecb65: Download complete\nd450d4da0343: Download complete\n5b4b56e6b994: Verifying Checksum\n5b4b56e6b994: Download complete\nd450d4da0343: Pull complete\nff63b82a42d3: Verifying Checksum\nff63b82a42d3: Download complete\n8162171ecb65: Pull complete\nff63b82a42d3: Pull complete\n5b4b56e6b994: Pull complete\nDigest: sha256:99ddec1bbfd6d6bca3f9804c02363daee8c8524dae50df7942e8e60788fd17c9\nStatus: Downloaded newer image for golang:1.17-alpine\n ---> 270c4f58750f\nStep 2/12 : RUN apk add git\n ---> Running in 5afaade7c64e\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/community/x86_64/APKINDEX.tar.gz\n(1/6) Installing brotli-libs (1.0.9-r6)\n(2/6) Installing nghttp2-libs (1.47.0-r0)\n(3/6) Installing libcurl (7.83.1-r5)\n(4/6) Installing expat (2.5.0-r0)\n(5/6) Installing pcre2 (10.40-r0)\n(6/6) Installing git (2.36.3-r0)\nExecuting busybox-1.35.0-r15.trigger\nOK: 19 MiB in 21 packages\nRemoving intermediate container 5afaade7c64e\n ---> 303c88a53041\nStep 3/12 : RUN mkdir /pushprom\n ---> Running in c90aa65ef0ce\nRemoving intermediate container c90aa65ef0ce\n ---> ddd359ccc69e\nStep 4/12 : WORKDIR /pushprom\n ---> Running in 463c0c4c6891\nRemoving intermediate container 463c0c4c6891\n ---> 446def344a2e\nStep 5/12 : COPY go.mod .\n ---> 14b912f0035d\nStep 6/12 : COPY go.sum .\n ---> b96e5dd6e7f3\nStep 7/12 : RUN go mod download\n ---> Running in e0150c13b31f\nRemoving intermediate container e0150c13b31f\n ---> 69b1b6171407\nStep 8/12 : COPY . .\n ---> e917d2269ca6\nStep 9/12 : RUN CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -a -ldflags \"-s -w\" -o /go/bin/pushprom .\n ---> Running in 09980d285b25\nRemoving intermediate container 09980d285b25\n ---> f6fed7693701\nStep 10/12 : FROM scratch\n ---> \nStep 11/12 : COPY --from=build-env /go/bin/pushprom /go/bin/pushprom\n ---> 83a98e2ceb4c\nStep 12/12 : ENTRYPOINT [\"/go/bin/pushprom\"]\n ---> Running in 442c67593fc4\nRemoving intermediate container 442c67593fc4\n ---> b91f960fa30b\nSuccessfully built b91f960fa30b\nSuccessfully tagged pushprom:latest\n","stderr":"","imageSize":8163328},"repair":{"startTime":1672868512389,"endTime":1672868512466,"violations":[{"name":"apkAddUseNoCache","position":{"start":2,"end":2,"columnStart":4,"columnEnd":15}}],"repairedDockerfile":"FROM golang:1.17-alpine as build-env\n\nRUN apk add --no-cache git\nRUN mkdir /pushprom\nWORKDIR /pushprom\nCOPY go.mod .\nCOPY go.sum .\n\n# Get dependencies - will also be cached if we won't change mod/sum\nRUN go mod download\n# COPY the source code as the last step\nCOPY . .\n\n# Build the binary\nRUN CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -a -ldflags \"-s -w\" -o /go/bin/pushprom .\n\n# <- Second step to build minimal image\nFROM scratch\nCOPY --from=build-env /go/bin/pushprom /go/bin/pushprom\nENTRYPOINT [\"/go/bin/pushprom\"]\n"},"repairedBuild":{"startTime":1672868512625,"endTime":1672868584856,"error":null,"stdout":"Sending build context to Docker daemon  215.6kB\r\r\nStep 1/12 : FROM golang:1.17-alpine as build-env\n ---> 270c4f58750f\nStep 2/12 : RUN apk add --no-cache git\n ---> Running in 4f274dc610a3\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/community/x86_64/APKINDEX.tar.gz\n(1/6) Installing brotli-libs (1.0.9-r6)\n(2/6) Installing nghttp2-libs (1.47.0-r0)\n(3/6) Installing libcurl (7.83.1-r5)\n(4/6) Installing expat (2.5.0-r0)\n(5/6) Installing pcre2 (10.40-r0)\n(6/6) Installing git (2.36.3-r0)\nExecuting busybox-1.35.0-r15.trigger\nOK: 19 MiB in 21 packages\nRemoving intermediate container 4f274dc610a3\n ---> 250e97e2e2c4\nStep 3/12 : RUN mkdir /pushprom\n ---> Running in ad60538f6bd8\nRemoving intermediate container ad60538f6bd8\n ---> e69473b11897\nStep 4/12 : WORKDIR /pushprom\n ---> Running in deffec74d19a\nRemoving intermediate container deffec74d19a\n ---> 8f3f36ec5fec\nStep 5/12 : COPY go.mod .\n ---> aac3fe755f35\nStep 6/12 : COPY go.sum .\n ---> 3bc03dc2989c\nStep 7/12 : RUN go mod download\n ---> Running in dc145eec9212\nRemoving intermediate container dc145eec9212\n ---> a7de27b85ad2\nStep 8/12 : COPY . .\n ---> fd30f23f0c1a\nStep 9/12 : RUN CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -a -ldflags \"-s -w\" -o /go/bin/pushprom .\n ---> Running in 0bff1150b147\nRemoving intermediate container 0bff1150b147\n ---> 68683b9dd079\nStep 10/12 : FROM scratch\n ---> \nStep 11/12 : COPY --from=build-env /go/bin/pushprom /go/bin/pushprom\n ---> a8c9ff092374\nStep 12/12 : ENTRYPOINT [\"/go/bin/pushprom\"]\n ---> Running in 04ded67d1755\nRemoving intermediate container 04ded67d1755\n ---> cfbe2d6ff8cd\nSuccessfully built cfbe2d6ff8cd\nSuccessfully tagged pushprom:latest\n","stderr":"","imageSize":8163328}}