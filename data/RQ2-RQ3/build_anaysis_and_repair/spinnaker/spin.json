{"repository":"https://github.com/spinnaker/spin","dockerfilePath":"Dockerfile","startTime":1673014760206,"endTime":1673014905863,"clone":{"startTime":1673014760207,"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/spinnaker/spin'...\n","error":null,"endTime":1673014761099,"commit":"b28a919772665b8fa8dc16577d19f66f8eda08d5"},"originalBuild":{"startTime":1673014761174,"endTime":1673014905511,"error":null,"stdout":"Sending build context to Docker daemon  2.412MB\r\r\nStep 1/13 : FROM golang:1.17 as build\n1.17: Pulling from library/golang\nd836772a1c1f: Pulling fs layer\n66a9e63c657a: Pulling fs layer\nd1989b6e74cf: Pulling fs layer\nc28818711e1e: Pulling fs layer\n9d6246ba248c: Pulling fs layer\n21d43f0d73c2: Pulling fs layer\nd8a1c5873f40: Pulling fs layer\n9d6246ba248c: Waiting\n21d43f0d73c2: Waiting\nc28818711e1e: Waiting\n66a9e63c657a: Verifying Checksum\n66a9e63c657a: Download complete\nd1989b6e74cf: Verifying Checksum\nd1989b6e74cf: Download complete\nd836772a1c1f: Verifying Checksum\nd836772a1c1f: Download complete\nc28818711e1e: Verifying Checksum\nc28818711e1e: Download complete\n9d6246ba248c: Verifying Checksum\n9d6246ba248c: Download complete\nd8a1c5873f40: Verifying Checksum\nd8a1c5873f40: Download complete\nd836772a1c1f: Pull complete\n21d43f0d73c2: Verifying Checksum\n21d43f0d73c2: Download complete\n66a9e63c657a: Pull complete\nd1989b6e74cf: Pull complete\nc28818711e1e: Pull complete\n9d6246ba248c: Pull complete\n21d43f0d73c2: Pull complete\nd8a1c5873f40: Pull complete\nDigest: sha256:87262e4a4c7db56158a80a18fefdc4fee5accc41b59cde821e691d05541bbb18\nStatus: Downloaded newer image for golang:1.17\n ---> 742df529b073\nStep 2/13 : ARG VERSION=dev\n ---> Running in fcfac730af87\nRemoving intermediate container fcfac730af87\n ---> b7e85e3d8681\nStep 3/13 : WORKDIR /app\n ---> Running in 5115e5928cca\nRemoving intermediate container 5115e5928cca\n ---> 4f44582e310a\nStep 4/13 : COPY ./ ./\n ---> e8593857b592\nStep 5/13 : ENV LD_VERSION=\"-X github.com/spinnaker/spin/version.Version=${VERSION}\"\n ---> Running in a439c676a77c\nRemoving intermediate container a439c676a77c\n ---> 38fcbab65fdd\nStep 6/13 : RUN GOARCH=amd64 GOOS=linux CGO_ENABLED=0 go build     -ldflags \"${LD_VERSION}\" .\n ---> Running in ee18bb434303\n\u001b[91mgo: downloading github.com/spf13/cobra v1.5.0\n\u001b[0m\u001b[91mgo: downloading golang.org/x/oauth2 v0.0.0-20220630143837-2104d58473e0\n\u001b[0m\u001b[91mgo: downloading github.com/antihax/optional v1.0.0\n\u001b[0m\u001b[91mgo: downloading golang.org/x/crypto v0.0.0-20220622213112-05595931fe9d\n\u001b[0m\u001b[91mgo: downloading sigs.k8s.io/yaml v1.3.0\n\u001b[0m\u001b[91mgo: downloading k8s.io/client-go v0.24.2\ngo: downloading github.com/andreyvit/diff v0.0.0-20170406064948-c7f18ee00883\n\u001b[0m\u001b[91mgo: downloading github.com/mitchellh/cli v1.1.4\n\u001b[0m\u001b[91mgo: downloading github.com/mitchellh/colorstring v0.0.0-20190213212951-d06e56a500db\n\u001b[0m\u001b[91mgo: downloading github.com/pkg/errors v0.9.1\n\u001b[0m\u001b[91mgo: downloading github.com/sergi/go-diff v1.2.0\n\u001b[0m\u001b[91mgo: downloading gopkg.in/yaml.v2 v2.4.0\n\u001b[0m\u001b[91mgo: downloading github.com/armon/go-radix v1.0.0\ngo: downloading github.com/fatih/color v1.13.0\ngo: downloading github.com/posener/complete v1.2.3\ngo: downloading github.com/bgentry/speakeasy v0.1.0\ngo: downloading github.com/Masterminds/sprig/v3 v3.2.2\ngo: downloading github.com/mattn/go-isatty v0.0.14\n\u001b[0m\u001b[91mgo: downloading github.com/spf13/pflag v1.0.5\n\u001b[0m\u001b[91mgo: downloading github.com/mattn/go-colorable v0.1.12\n\u001b[0m\u001b[91mgo: downloading golang.org/x/sys v0.0.0-20220708085239-5a0f0661e09d\n\u001b[0m\u001b[91mgo: downloading github.com/hashicorp/go-multierror v1.1.1\n\u001b[0m\u001b[91mgo: downloading cloud.google.com/go/compute v1.7.0\n\u001b[0m\u001b[91mgo: downloading golang.org/x/net v0.0.0-20220708220712-1185a9018129\n\u001b[0m\u001b[91mgo: downloading github.com/hashicorp/errwrap v1.1.0\n\u001b[0m\u001b[91mgo: downloading github.com/mitchellh/copystructure v1.2.0\ngo: downloading github.com/Masterminds/semver/v3 v3.1.1\n\u001b[0m\u001b[91mgo: downloading github.com/Masterminds/goutils v1.1.1\ngo: downloading github.com/huandu/xstrings v1.3.2\n\u001b[0m\u001b[91mgo: downloading github.com/google/uuid v1.3.0\ngo: downloading github.com/shopspring/decimal v1.3.1\n\u001b[0m\u001b[91mgo: downloading github.com/spf13/cast v1.5.0\n\u001b[0m\u001b[91mgo: downloading github.com/imdario/mergo v0.3.13\n\u001b[0m\u001b[91mgo: downloading github.com/mitchellh/reflectwalk v1.0.2\n\u001b[0m\u001b[91mgo: downloading golang.org/x/term v0.0.0-20220526004731-065cf7ba2467\n\u001b[0mRemoving intermediate container ee18bb434303\n ---> 9b17c34fd0dd\nStep 7/13 : FROM alpine\n ---> 49176f190c7e\nStep 8/13 : RUN apk update     && apk add ca-certificates     && rm -rf /var/cache/apk/*\n ---> Running in e088107ea4e4\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\nv3.17.0-332-g13963e2526 [https://dl-cdn.alpinelinux.org/alpine/v3.17/main]\nv3.17.0-336-ga9d27aafa7 [https://dl-cdn.alpinelinux.org/alpine/v3.17/community]\nOK: 17815 distinct packages available\n(1/1) Installing ca-certificates (20220614-r3)\nExecuting busybox-1.35.0-r29.trigger\nExecuting ca-certificates-20220614-r3.trigger\nOK: 8 MiB in 16 packages\nRemoving intermediate container e088107ea4e4\n ---> 2dc6ae1850b6\nStep 9/13 : COPY --from=build /app/spin /usr/local/bin\n ---> d2b2a41be9d5\nStep 10/13 : RUN addgroup -S -g 10111 spinnaker\n ---> Running in e57b7ec53baa\nRemoving intermediate container e57b7ec53baa\n ---> 0df6f52a197d\nStep 11/13 : RUN adduser -S -G spinnaker -u 10111 spinnaker\n ---> Running in ff46c4908fb5\nRemoving intermediate container ff46c4908fb5\n ---> 93581986ffc5\nStep 12/13 : USER spinnaker\n ---> Running in 8e78b600afb2\nRemoving intermediate container 8e78b600afb2\n ---> 99dfb7fca057\nStep 13/13 : ENTRYPOINT [\"spin\"]\n ---> Running in 5d1b8f3b6ecf\nRemoving intermediate container 5d1b8f3b6ecf\n ---> 3084be5a018b\nSuccessfully built 3084be5a018b\nSuccessfully tagged spin:latest\n","stderr":"","imageSize":20931245},"repair":{"startTime":1673014905584,"endTime":1673014905650,"violations":[],"repairedDockerfile":"FROM golang:1.17 as build\nARG VERSION=dev\n\nWORKDIR /app\nCOPY ./ ./\n\nENV LD_VERSION=\"-X github.com/spinnaker/spin/version.Version=${VERSION}\"\n\nRUN GOARCH=amd64 GOOS=linux CGO_ENABLED=0 go build \\\n    -ldflags \"${LD_VERSION}\" .\n\nFROM alpine\n\nRUN apk update \\\n    && apk add ca-certificates \\\n    && rm -rf /var/cache/apk/*\n\nCOPY --from=build /app/spin /usr/local/bin\n\nRUN addgroup -S -g 10111 spinnaker\nRUN adduser -S -G spinnaker -u 10111 spinnaker\nUSER spinnaker\n\nENTRYPOINT [\"spin\"]\n"}}