{"repository":"https://github.com/astroband/astrograph","dockerfilePath":"Dockerfile","startTime":1672734145955,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/astroband/astrograph'...\n","error":null,"commit":"63df431d21ae6253c7a564bcda3c657bdc76d108"},"originalBuild":{"startTimestamp":1672734146912,"endTimestamp":1672734262773,"error":null,"stdout":"Sending build context to Docker daemon  1.135MB\r\r\nStep 1/16 : FROM node:10-alpine\n ---> aa67ba258e18\nStep 2/16 : RUN npm install -g typescript@3.4\n ---> Running in 8c80fa46910b\n/usr/local/bin/tsc -> /usr/local/lib/node_modules/typescript/bin/tsc\n/usr/local/bin/tsserver -> /usr/local/lib/node_modules/typescript/bin/tsserver\n+ typescript@3.4.5\nadded 1 package from 1 contributor in 1.158s\nRemoving intermediate container 8c80fa46910b\n ---> 40747a8a763a\nStep 3/16 : WORKDIR /home/node/astrograph\n ---> Running in fde9e4191019\nRemoving intermediate container fde9e4191019\n ---> 3be00c26cdf8\nStep 4/16 : COPY package.json ./\n ---> 1ac0936b3755\nStep 5/16 : COPY yarn.lock ./\n ---> a450a0098dd8\nStep 6/16 : RUN mkdir -p /home/node/astrograph/node_modules && chown -R node:node /home/node/astrograph\n ---> Running in 1d43c6217a41\nRemoving intermediate container 1d43c6217a41\n ---> 179e9417c6e0\nStep 7/16 : USER node\n ---> Running in 3fc1a0aa21d0\nRemoving intermediate container 3fc1a0aa21d0\n ---> 9bc43462e8c7\nStep 8/16 : RUN yarn install --ignore-optional\n ---> Running in 2e6be7ad4f5d\nyarn install v1.22.5\n[1/4] Resolving packages...\n[2/4] Fetching packages...\ninfo fsevents@1.2.9: The platform \"linux\" is incompatible with this module.\ninfo \"fsevents@1.2.9\" is an optional dependency and failed compatibility check. Excluding it from installation.\n[3/4] Linking dependencies...\n\u001b[91mwarning \" > @astroband/graphql-postgres-subscriptions@1.0.10\" has incorrect peer dependency \"graphql@^0.13.2\".\n\u001b[0m\u001b[91mwarning \" > @astroband/graphql-postgres-subscriptions@1.0.10\" has incorrect peer dependency \"pg@^7.4.1\".\n\u001b[0m\u001b[91mwarning \" > graphql-resolve-batch@1.0.2\" has incorrect peer dependency \"graphql@>=0.6.0 <1.0.0\".\n\u001b[0m[4/4] Building fresh packages...\nDone in 21.19s.\nRemoving intermediate container 2e6be7ad4f5d\n ---> b022487aaabf\nStep 9/16 : COPY --chown=node:node . .\n ---> 2e683f197215\nStep 10/16 : RUN yarn build\n ---> Running in 2e54da69f650\nyarn run v1.22.5\n$ tsc --build tsconfig.build.json\nDone in 10.45s.\nRemoving intermediate container 2e54da69f650\n ---> bf65dd1e1645\nStep 11/16 : FROM node:10-alpine\n ---> aa67ba258e18\nStep 12/16 : ENV NODE_ENV=production\n ---> Running in 2d8828e4b2ca\nRemoving intermediate container 2d8828e4b2ca\n ---> f98b1a5337c8\nStep 13/16 : RUN mkdir -p /home/node/astrograph-server\n ---> Running in 2f3768c60351\nRemoving intermediate container 2f3768c60351\n ---> c6decb2af8c1\nStep 14/16 : WORKDIR /home/node/astrograph-server\n ---> Running in 0fdcfe89cc5e\nRemoving intermediate container 0fdcfe89cc5e\n ---> d9914ab2b9f1\nStep 15/16 : COPY --from=0 /home/node/astrograph/dist ./\n ---> 2d805e08bd7a\nStep 16/16 : COPY --from=0 /home/node/astrograph/node_modules ./node_modules\n ---> ccae9b729d15\nSuccessfully built ccae9b729d15\nSuccessfully tagged astrograph:latest\n","stderr":"","imageSize":311975926},"repair":{"violations":[{"name":"npmCacheCleanAfterInstall","position":{"start":1,"end":1,"columnStart":4,"columnEnd":33}}],"repairedDockerfile":"FROM node:10-alpine\nRUN npm install -g typescript@3.4\n\nWORKDIR /home/node/astrograph\n\nCOPY package.json ./\nCOPY yarn.lock ./\n\nRUN mkdir -p /home/node/astrograph/node_modules && chown -R node:node /home/node/astrograph\n\nUSER node\n\nRUN yarn install --ignore-optional\n\nCOPY --chown=node:node . .\n\nRUN yarn build\n\n# ================================================================================================\n\nFROM node:10-alpine\nENV NODE_ENV=production\n\nRUN mkdir -p /home/node/astrograph-server\nWORKDIR /home/node/astrograph-server\n\nCOPY --from=0 /home/node/astrograph/dist ./\nCOPY --from=0 /home/node/astrograph/node_modules ./node_modules\n"},"repairedBuild":{"startTimestamp":1672734263522,"endTimestamp":1672734364075,"error":null,"stdout":"Sending build context to Docker daemon  1.135MB\r\r\nStep 1/16 : FROM node:10-alpine\n ---> aa67ba258e18\nStep 2/16 : RUN npm install -g typescript@3.4\n ---> Running in 0b7698522b0b\n/usr/local/bin/tsc -> /usr/local/lib/node_modules/typescript/bin/tsc\n/usr/local/bin/tsserver -> /usr/local/lib/node_modules/typescript/bin/tsserver\n+ typescript@3.4.5\nadded 1 package from 1 contributor in 1.247s\nRemoving intermediate container 0b7698522b0b\n ---> 82cea174e073\nStep 3/16 : WORKDIR /home/node/astrograph\n ---> Running in c85c7b64d953\nRemoving intermediate container c85c7b64d953\n ---> 31ad9115821f\nStep 4/16 : COPY package.json ./\n ---> 4d653b67fa56\nStep 5/16 : COPY yarn.lock ./\n ---> 78be40cb2230\nStep 6/16 : RUN mkdir -p /home/node/astrograph/node_modules && chown -R node:node /home/node/astrograph\n ---> Running in f82be1580d1b\nRemoving intermediate container f82be1580d1b\n ---> d5f0db60ecf9\nStep 7/16 : USER node\n ---> Running in ffd99c1e0264\nRemoving intermediate container ffd99c1e0264\n ---> f0d808a088e4\nStep 8/16 : RUN yarn install --ignore-optional\n ---> Running in 4f132a95d9bf\nyarn install v1.22.5\n[1/4] Resolving packages...\n[2/4] Fetching packages...\ninfo fsevents@1.2.9: The platform \"linux\" is incompatible with this module.\ninfo \"fsevents@1.2.9\" is an optional dependency and failed compatibility check. Excluding it from installation.\n[3/4] Linking dependencies...\n\u001b[91mwarning \" > @astroband/graphql-postgres-subscriptions@1.0.10\" has incorrect peer dependency \"graphql@^0.13.2\".\n\u001b[0m\u001b[91mwarning \" > @astroband/graphql-postgres-subscriptions@1.0.10\" has incorrect peer dependency \"pg@^7.4.1\".\n\u001b[0m\u001b[91mwarning \" > graphql-resolve-batch@1.0.2\" has incorrect peer dependency \"graphql@>=0.6.0 <1.0.0\".\n\u001b[0m[4/4] Building fresh packages...\nDone in 14.98s.\nRemoving intermediate container 4f132a95d9bf\n ---> e98662e0848d\nStep 9/16 : COPY --chown=node:node . .\n ---> ae169a67ae1f\nStep 10/16 : RUN yarn build\n ---> Running in a2875fe4666a\nyarn run v1.22.5\n$ tsc --build tsconfig.build.json\nDone in 10.84s.\nRemoving intermediate container a2875fe4666a\n ---> 1523a16c1371\nStep 11/16 : FROM node:10-alpine\n ---> aa67ba258e18\nStep 12/16 : ENV NODE_ENV=production\n ---> Running in 2d363b5887e6\nRemoving intermediate container 2d363b5887e6\n ---> d68f51d38d3f\nStep 13/16 : RUN mkdir -p /home/node/astrograph-server\n ---> Running in 05b17626c7b6\nRemoving intermediate container 05b17626c7b6\n ---> bb883cc52877\nStep 14/16 : WORKDIR /home/node/astrograph-server\n ---> Running in 8bb534e09bb4\nRemoving intermediate container 8bb534e09bb4\n ---> 1b6745db30cd\nStep 15/16 : COPY --from=0 /home/node/astrograph/dist ./\n ---> 252530dd78f5\nStep 16/16 : COPY --from=0 /home/node/astrograph/node_modules ./node_modules\n ---> 23ee1eb85092\nSuccessfully built 23ee1eb85092\nSuccessfully tagged astrograph:latest\n","stderr":"","imageSize":311975926},"endTime":1672734364695}