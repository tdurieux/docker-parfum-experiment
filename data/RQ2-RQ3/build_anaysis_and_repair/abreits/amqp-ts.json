{"repository":"https://github.com/abreits/amqp-ts","dockerfilePath":"Dockerfile","startTime":1672358873243,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/abreits/amqp-ts'...\n","error":null,"commit":"0ca8250b61ea3ea2128d1034cc54e88b0df3568d"},"originalBuild":{"startTimestamp":1672358874104,"endTimestamp":1672358989880,"error":null,"stdout":"Sending build context to Docker daemon  672.3kB\r\r\nStep 1/9 : FROM node:latest\nlatest: Pulling from library/node\n32de3c850997: Already exists\nfa1d4c8d85a4: Already exists\nc796299bbbdd: Already exists\n81283a9569ad: Already exists\n60b38700e7fb: Already exists\n9537c7a3988e: Already exists\ndfc2ed565c15: Pulling fs layer\nb65dd9eadf26: Pulling fs layer\nc46cc3bcdf59: Pulling fs layer\nc46cc3bcdf59: Download complete\nb65dd9eadf26: Verifying Checksum\nb65dd9eadf26: Download complete\ndfc2ed565c15: Verifying Checksum\ndfc2ed565c15: Download complete\ndfc2ed565c15: Pull complete\nb65dd9eadf26: Pull complete\nc46cc3bcdf59: Pull complete\nDigest: sha256:d5222e1ebd7dd7e9683f47a8861a4711cb4407a4830cbe04a582ca4986245700\nStatus: Downloaded newer image for node:latest\n ---> 548714e444f4\nStep 2/9 : WORKDIR /src\n ---> Running in d8c2acc0eab6\nRemoving intermediate container d8c2acc0eab6\n ---> 9165a7ec57a7\nStep 3/9 : RUN npm install -g gulp\n ---> Running in 40a1f1040c5d\n\u001b[91mnpm WARN deprecated urix@0.1.0: Please see https://github.com/lydell/urix#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated source-map-url@0.4.1: See https://github.com/lydell/source-map-url#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated resolve-url@0.2.1: https://github.com/lydell/resolve-url#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated source-map-resolve@0.5.3: See https://github.com/lydell/source-map-resolve#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated chokidar@2.1.8: Chokidar 2 does not receive security updates since 2019. Upgrade to chokidar 3 with 15x fewer dependencies\n\u001b[0m\nadded 350 packages in 13s\n\n11 packages are looking for funding\n  run `npm fund` for details\nRemoving intermediate container 40a1f1040c5d\n ---> d49cc9bf89fd\nStep 4/9 : COPY package.json /src/\n ---> 6660ca338cc5\nStep 5/9 : RUN npm install\n ---> Running in c867cacd8a38\n\u001b[91mnpm WARN EBADENGINE Unsupported engine {\nnpm WARN EBADENGINE   package: 'amqplib@0.4.2',\nnpm WARN EBADENGINE   required: { node: '>=0.8 <6 || ^6' },\nnpm WARN EBADENGINE   current: { node: 'v19.3.0', npm: '9.2.0' }\nnpm WARN EBADENGINE }\n\u001b[0m\u001b[91mnpm WARN deprecated source-map-url@0.4.1: See https://github.com/lydell/source-map-url#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated urix@0.1.0: Please see https://github.com/lydell/urix#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated resolve-url@0.2.1: https://github.com/lydell/resolve-url#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated source-map-resolve@0.5.3: See https://github.com/lydell/source-map-resolve#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated mkdirp@0.5.4: Legacy versions of mkdirp are no longer supported. Please update to mkdirp 1.x. (Note that the API surface has changed to use Promises in 1.x.)\n\u001b[0m\u001b[91mnpm WARN deprecated chokidar@2.1.8: Chokidar 2 does not receive security updates since 2019. Upgrade to chokidar 3 with 15x fewer dependencies\n\u001b[0m\u001b[91mnpm WARN deprecated debug@3.2.6: Debug versions >=3.2.0 <3.2.7 || >=4 <4.3.1 have a low-severity ReDos regression when used in a Node.js environment. It is recommended you upgrade to 3.2.7 or 4.3.1. (https://github.com/visionmedia/debug/issues/797)\n\u001b[0m\nadded 649 packages, and audited 650 packages in 15s\n\n47 packages are looking for funding\n  run `npm fund` for details\n\n11 high severity vulnerabilities\n\nTo address all issues (including breaking changes), run:\n  npm audit fix --force\n\nRun `npm audit` for details.\nRemoving intermediate container c867cacd8a38\n ---> 7ab4721884a2\nStep 6/9 : VOLUME [\"/src\", \"/src/node_modules\"]\n ---> Running in dc12cd9148c3\nRemoving intermediate container dc12cd9148c3\n ---> 3e45402c3021\nStep 7/9 : EXPOSE 5858\n ---> Running in 22e561599c0e\nRemoving intermediate container 22e561599c0e\n ---> 87503548c1aa\nStep 8/9 : ENV AMQPTEST_CONNECTION_URL=amqp://rabbitmq\n ---> Running in 3958f5dd7733\nRemoving intermediate container 3958f5dd7733\n ---> 02834d6258af\nStep 9/9 : CMD [\"node\", \"tools/alive\"]\n ---> Running in 6781aa4f1b7f\nRemoving intermediate container 6781aa4f1b7f\n ---> 7048d9c5b911\nSuccessfully built 7048d9c5b911\nSuccessfully tagged amqp-ts:latest\n","stderr":"","imageSize":1120164636},"repair":{"violations":[{"name":"npmCacheCleanAfterInstall","position":{"start":35,"end":35,"columnStart":4,"columnEnd":23}},{"name":"npmCacheCleanAfterInstall","position":{"start":39,"end":39,"columnStart":4,"columnEnd":15}}],"repairedDockerfile":"# Dockerfile to build and test this library in a docker container with an external IDE (in this case visual studio code)\n#\n# execute the following commands to build this docker image:\n#  $ docker build -t amqp-ts .\n#\n# to start the development process with docker\n#  $ docker run -d --hostname rabbitmq --name rabbitmq rabbitmq:3\n#  $\n#  $ docker run --name dev-amqp-ts -d -v <absolute_local_amqp-ts_path>:/src --link rabbitmq amqp-ts\n# or to start development with docker-compose (does the hard work for you)\n#  $ docker-compose up -d\n#\n# to build execute the following command:\n#  $ docker exec dev-amqp-ts gulp\n#\n# to automatically build from within Visual Studio Code with CTRL-SHIFT-B\n# create a tasks.json file in the .vscode folder with the following content:\n# {\n#     // See https://go.microsoft.com/fwlink/?LinkId=733558\n#     // for the documentation about the tasks.json format\n#     \"version\": \"0.1.0\",\n#     \"command\": \"docker\",\n#     \"isShellCommand\": true,\n#     \"args\": [\"exec\", \"dev-amqp-ts\", \"gulp\"],\n#     \"showOutput\": \"always\"\n# }\n#\n# to debug (in this case the mocha tests) execute the following line and run the 'Attach' Visual Studio Code Debugger:\n#  $ docker exec dev-amqp-ts node --debug-brk --nolazy /src/node_modules/mocha/bin/_mocha transpiled/amqp-ts.spec.js\n# todo: create better integration\nFROM node:latest\n\nWORKDIR /src\n\n# install global modules needed\nRUN npm install -g gulp\n\n# copy and install local development libraries\nCOPY package.json /src/\nRUN npm install\n\n# needed to keep the docker version of the libraries separate from the local version\nVOLUME [\"/src\", \"/src/node_modules\"]\n# default node debug port\nEXPOSE 5858\n\n# define the default rabbitmq server to use\nENV AMQPTEST_CONNECTION_URL=amqp://rabbitmq\n\n#initialize the docker development environment\n#CMD [\"npm\", \"run\", \"docker-develop\"]\nCMD [\"node\", \"tools/alive\"]"},"repairedBuild":{"startTimestamp":1672358991098,"endTimestamp":1672359077897,"error":null,"stdout":"Sending build context to Docker daemon  672.3kB\r\r\nStep 1/9 : FROM node:latest\n ---> 548714e444f4\nStep 2/9 : WORKDIR /src\n ---> Running in c2749f495676\nRemoving intermediate container c2749f495676\n ---> 8e279ce23244\nStep 3/9 : RUN npm install -g gulp\n ---> Running in 5d498c2f60c2\n\u001b[91mnpm WARN deprecated\u001b[0m\u001b[91m urix@0.1.0: Please see https://github.com/lydell/urix#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated source-map-url@0.4.1: See https://github.com/lydell/source-map-url#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated resolve-url@0.2.1: https://github.com/lydell/resolve-url#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated source-map-resolve@0.5.3: See https://github.com/lydell/source-map-resolve#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated chokidar@2.1.8: Chokidar 2 does not receive security updates since 2019. Upgrade to chokidar 3 with 15x fewer dependencies\n\u001b[0m\nadded 350 packages in 13s\n\n11 packages are looking for funding\n  run `npm fund` for details\nRemoving intermediate container 5d498c2f60c2\n ---> a351d0826bad\nStep 4/9 : COPY package.json /src/\n ---> 8f83f896f235\nStep 5/9 : RUN npm install\n ---> Running in 51f5803db1ad\n\u001b[91mnpm WARN EBADENGINE Unsupported engine {\nnpm WARN \u001b[0m\u001b[91mEBADENGINE   package: 'amqplib@0.4.2',\nnpm WARN EBADENGINE   required: { node: '>=0.8 <6 || ^6' },\nnpm WARN EBADENGINE   current: { node: 'v19.3.0', npm: '9.2.0' }\nnpm WARN EBADENGINE }\n\u001b[0m\u001b[91mnpm WARN deprecated source-map-url@0.4.1: See https://github.com/lydell/source-map-url#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated urix@0.1.0: Please see https://github.com/lydell/urix#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated resolve-url@0.2.1: https://github.com/lydell/resolve-url#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated source-map-resolve@0.5.3: See https://github.com/lydell/source-map-resolve#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated mkdirp@0.5.4: Legacy versions of mkdirp are no longer supported. Please update to mkdirp 1.x. (Note that the API surface has changed to use Promises in 1.x.)\n\u001b[0m\u001b[91mnpm WARN deprecated chokidar@2.1.8: Chokidar 2 does not receive security updates since 2019. Upgrade to chokidar 3 with 15x fewer dependencies\n\u001b[0m\u001b[91mnpm WARN deprecated debug@3.2.6: Debug versions >=3.2.0 <3.2.7 || >=4 <4.3.1 have a low-severity ReDos regression when used in a Node.js environment. It is recommended you upgrade to 3.2.7 or 4.3.1. (https://github.com/visionmedia/debug/issues/797)\n\u001b[0m\nadded 649 packages, and audited 650 packages in 11s\n\n47 packages are looking for funding\n  run `npm fund` for details\n\n11 high severity vulnerabilities\n\nTo address all issues (including breaking changes), run:\n  npm audit fix --force\n\nRun `npm audit` for details.\nRemoving intermediate container 51f5803db1ad\n ---> 3e691089ebb2\nStep 6/9 : VOLUME [\"/src\", \"/src/node_modules\"]\n ---> Running in 6456ea88ce71\nRemoving intermediate container 6456ea88ce71\n ---> 918da5150f38\nStep 7/9 : EXPOSE 5858\n ---> Running in 9474a284ca6d\nRemoving intermediate container 9474a284ca6d\n ---> 26e566ef6f41\nStep 8/9 : ENV AMQPTEST_CONNECTION_URL=amqp://rabbitmq\n ---> Running in 17641d93effb\nRemoving intermediate container 17641d93effb\n ---> 0971db162d40\nStep 9/9 : CMD [\"node\", \"tools/alive\"]\n ---> Running in ea6fbc802ce4\nRemoving intermediate container ea6fbc802ce4\n ---> cc1729e49ea2\nSuccessfully built cc1729e49ea2\nSuccessfully tagged amqp-ts:latest\n","stderr":"","imageSize":1120164877},"endTime":1672359079007}