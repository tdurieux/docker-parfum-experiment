{"repository":"https://github.com/gravitl/netmaker","dockerfilePath":"Dockerfile","startTime":1672713440618,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/gravitl/netmaker'...\n","error":null,"commit":"e8fbe18bca40bf9260ccf77457434c3495ae5fa2"},"originalBuild":{"startTimestamp":1672713443540,"endTimestamp":1672713617769,"error":null,"stdout":"Sending build context to Docker daemon   76.3MB\r\r\nStep 1/16 : FROM gravitl/go-builder as builder\nlatest: Pulling from gravitl/go-builder\nca7dd9ec2225: Already exists\nc41ae7ad2b39: Pulling fs layer\n20236f47f9be: Pulling fs layer\n74a276da2a69: Pulling fs layer\nb197ea682839: Pulling fs layer\nb443d7a65cf5: Pulling fs layer\n6d2339ae44bc: Pulling fs layer\n8dac33468a3d: Pulling fs layer\nb443d7a65cf5: Waiting\nb197ea682839: Waiting\n6d2339ae44bc: Waiting\n8dac33468a3d: Waiting\n74a276da2a69: Verifying Checksum\n74a276da2a69: Download complete\nc41ae7ad2b39: Download complete\nc41ae7ad2b39: Pull complete\nb443d7a65cf5: Verifying Checksum\nb443d7a65cf5: Download complete\n6d2339ae44bc: Download complete\n20236f47f9be: Verifying Checksum\n20236f47f9be: Download complete\nb197ea682839: Verifying Checksum\n8dac33468a3d: Verifying Checksum\n8dac33468a3d: Download complete\n20236f47f9be: Pull complete\n74a276da2a69: Pull complete\nb197ea682839: Pull complete\nb443d7a65cf5: Pull complete\n6d2339ae44bc: Pull complete\n8dac33468a3d: Pull complete\nDigest: sha256:50b8aa6a2d01bac0c19c906486b07ed8a1178250c45bc41c3a95154593b4504b\nStatus: Downloaded newer image for gravitl/go-builder:latest\n ---> e036e86eb84a\nStep 2/16 : ARG version\n ---> Running in 49c3f0a81b2f\nRemoving intermediate container 49c3f0a81b2f\n ---> d522acbe5243\nStep 3/16 : ARG tags\n ---> Running in 71af8deb75f2\nRemoving intermediate container 71af8deb75f2\n ---> 085dbac1fa3a\nStep 4/16 : WORKDIR /app\n ---> Running in 5fe2d4446415\nRemoving intermediate container 5fe2d4446415\n ---> 4d7f4e50dbea\nStep 5/16 : COPY . .\n ---> 02996416fdf2\nStep 6/16 : ENV GO111MODULE=auto\n ---> Running in d10fee186261\nRemoving intermediate container d10fee186261\n ---> a1698f5c9a16\nStep 7/16 : RUN apk add git\n ---> Running in ed921e28e011\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/community/x86_64/APKINDEX.tar.gz\n(1/6) Installing brotli-libs (1.0.9-r6)\n(2/6) Installing nghttp2-libs (1.47.0-r0)\n(3/6) Installing libcurl (7.83.1-r5)\n(4/6) Installing expat (2.5.0-r0)\n(5/6) Installing pcre2 (10.40-r0)\n(6/6) Installing git (2.36.3-r0)\nExecuting busybox-1.35.0-r17.trigger\nOK: 200 MiB in 40 packages\nRemoving intermediate container ed921e28e011\n ---> 606e99bd40bb\nStep 8/16 : RUN GOOS=linux CGO_ENABLED=1 go build -ldflags=\"-s -X 'main.version=${version}'\" -tags ${tags} .\n ---> Running in 95972be3eda6\nRemoving intermediate container 95972be3eda6\n ---> 1ed0b96c16da\nStep 9/16 : FROM alpine:3.16.2\n3.16.2: Pulling from library/alpine\n213ec9aee27d: Already exists\nDigest: sha256:65a2763f593ae85fab3b5406dc9e80f744ec5b449f269b699b5efd37a07ad32e\nStatus: Downloaded newer image for alpine:3.16.2\n ---> 9c6f07244728\nStep 10/16 : RUN apk add gcompat iptables wireguard-tools\n ---> Running in de0dce148d06\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/community/x86_64/APKINDEX.tar.gz\n(1/24) Installing musl-obstack (1.2.3-r0)\n(2/24) Installing libucontext (1.2-r0)\n(3/24) Installing gcompat (1.0.0-r4)\n(4/24) Installing libmnl (1.0.5-r0)\n(5/24) Installing libnftnl (1.2.3-r0)\n(6/24) Installing iptables (1.8.8-r1)\n(7/24) Installing wireguard-tools-wg (1.0.20210914-r0)\n(8/24) Installing libcap (2.64-r0)\n(9/24) Installing libbz2 (1.0.8-r1)\n(10/24) Installing fts (1.2.7-r1)\n(11/24) Installing xz-libs (5.2.5-r1)\n(12/24) Installing libelf (0.186-r0)\n(13/24) Installing iproute2-minimal (5.17.0-r0)\n(14/24) Installing iproute2-tc (5.17.0-r0)\n(15/24) Installing iproute2-ss (5.17.0-r0)\n(16/24) Installing iproute2 (5.17.0-r0)\nExecuting iproute2-5.17.0-r0.post-install\n(17/24) Installing ip6tables (1.8.8-r1)\n(18/24) Installing ncurses-terminfo-base (6.3_p20220521-r0)\n(19/24) Installing ncurses-libs (6.3_p20220521-r0)\n(20/24) Installing readline (8.1.2-r0)\n(21/24) Installing bash (5.1.16-r2)\nExecuting bash-5.1.16-r2.post-install\n(22/24) Installing openresolv (3.12.0-r0)\n(23/24) Installing wireguard-tools-wg-quick (1.0.20210914-r0)\n(24/24) Installing wireguard-tools (1.0.20210914-r0)\nExecuting busybox-1.35.0-r17.trigger\nOK: 14 MiB in 38 packages\nRemoving intermediate container de0dce148d06\n ---> 31f28b2debd0\nStep 11/16 : WORKDIR /root/\n ---> Running in 05be81e0ffbb\nRemoving intermediate container 05be81e0ffbb\n ---> 6e6cec699c98\nStep 12/16 : RUN mkdir -p /etc/netclient/config\n ---> Running in 985bcbd860b5\nRemoving intermediate container 985bcbd860b5\n ---> 3580b16350ea\nStep 13/16 : COPY --from=builder /app/netmaker .\n ---> a4bcfc180624\nStep 14/16 : COPY --from=builder /app/config config\n ---> 8769e832210c\nStep 15/16 : EXPOSE 8081\n ---> Running in 4cf5444d4047\nRemoving intermediate container 4cf5444d4047\n ---> 4cee04991bf8\nStep 16/16 : ENTRYPOINT [\"./netmaker\"]\n ---> Running in f7f0e212fe6e\nRemoving intermediate container f7f0e212fe6e\n ---> 01aeeedf1b89\nSuccessfully built 01aeeedf1b89\nSuccessfully tagged netmaker:latest\n","stderr":"","imageSize":29006760},"repair":{"violations":[{"name":"apkAddUseNoCache","position":{"start":8,"end":8,"columnStart":4,"columnEnd":15}},{"name":"apkAddUseNoCache","position":{"start":14,"end":14,"columnStart":4,"columnEnd":44}}],"repairedDockerfile":"#first stage - builder\nFROM gravitl/go-builder as builder\nARG version\nARG tags\nWORKDIR /app\nCOPY . .\nENV GO111MODULE=auto\n\nRUN apk add --no-cache git\nRUN GOOS=linux CGO_ENABLED=1 go build -ldflags=\"-s -X 'main.version=${version}'\" -tags ${tags} .\n# RUN go build -tags=ee . -o netmaker main.go\nFROM alpine:3.16.2\n\n# add a c lib\nRUN apk add --no-cache gcompat iptables wireguard-tools\n# set the working directory\nWORKDIR /root/\nRUN mkdir -p /etc/netclient/config\nCOPY --from=builder /app/netmaker .\nCOPY --from=builder /app/config config\nEXPOSE 8081\nENTRYPOINT [\"./netmaker\"]\n"},"repairedBuild":{"startTimestamp":1672713618058,"endTimestamp":1672713776169,"error":null,"stdout":"Sending build context to Docker daemon   76.3MB\r\r\nStep 1/16 : FROM gravitl/go-builder as builder\n ---> e036e86eb84a\nStep 2/16 : ARG version\n ---> Running in 531086973aad\nRemoving intermediate container 531086973aad\n ---> 8c6bea158dbd\nStep 3/16 : ARG tags\n ---> Running in bf2d979ada84\nRemoving intermediate container bf2d979ada84\n ---> 6d9bd7b7f14a\nStep 4/16 : WORKDIR /app\n ---> Running in 105425555ac1\nRemoving intermediate container 105425555ac1\n ---> a7d8cc82599c\nStep 5/16 : COPY . .\n ---> 2c51bc125d97\nStep 6/16 : ENV GO111MODULE=auto\n ---> Running in 4e00afbbcc8a\nRemoving intermediate container 4e00afbbcc8a\n ---> dc447bc0390e\nStep 7/16 : RUN apk add --no-cache git\n ---> Running in 50d92c8cbada\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/community/x86_64/APKINDEX.tar.gz\n(1/6) Installing brotli-libs (1.0.9-r6)\n(2/6) Installing nghttp2-libs (1.47.0-r0)\n(3/6) Installing libcurl (7.83.1-r5)\n(4/6) Installing expat (2.5.0-r0)\n(5/6) Installing pcre2 (10.40-r0)\n(6/6) Installing git (2.36.3-r0)\nExecuting busybox-1.35.0-r17.trigger\nOK: 200 MiB in 40 packages\nRemoving intermediate container 50d92c8cbada\n ---> ee6406b9f333\nStep 8/16 : RUN GOOS=linux CGO_ENABLED=1 go build -ldflags=\"-s -X 'main.version=${version}'\" -tags ${tags} .\n ---> Running in f12552693613\nRemoving intermediate container f12552693613\n ---> 6b4d0de60c4b\nStep 9/16 : FROM alpine:3.16.2\n ---> 9c6f07244728\nStep 10/16 : RUN apk add --no-cache gcompat iptables wireguard-tools\n ---> Running in 6e6887062bf5\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/community/x86_64/APKINDEX.tar.gz\n(1/24) Installing musl-obstack (1.2.3-r0)\n(2/24) Installing libucontext (1.2-r0)\n(3/24) Installing gcompat (1.0.0-r4)\n(4/24) Installing libmnl (1.0.5-r0)\n(5/24) Installing libnftnl (1.2.3-r0)\n(6/24) Installing iptables (1.8.8-r1)\n(7/24) Installing wireguard-tools-wg (1.0.20210914-r0)\n(8/24) Installing libcap (2.64-r0)\n(9/24) Installing libbz2 (1.0.8-r1)\n(10/24) Installing fts (1.2.7-r1)\n(11/24) Installing xz-libs (5.2.5-r1)\n(12/24) Installing libelf (0.186-r0)\n(13/24) Installing iproute2-minimal (5.17.0-r0)\n(14/24) Installing iproute2-tc (5.17.0-r0)\n(15/24) Installing iproute2-ss (5.17.0-r0)\n(16/24) Installing iproute2 (5.17.0-r0)\nExecuting iproute2-5.17.0-r0.post-install\n(17/24) Installing ip6tables (1.8.8-r1)\n(18/24) Installing ncurses-terminfo-base (6.3_p20220521-r0)\n(19/24) Installing ncurses-libs (6.3_p20220521-r0)\n(20/24) Installing readline (8.1.2-r0)\n(21/24) Installing bash (5.1.16-r2)\nExecuting bash-5.1.16-r2.post-install\n(22/24) Installing openresolv (3.12.0-r0)\n(23/24) Installing wireguard-tools-wg-quick (1.0.20210914-r0)\n(24/24) Installing wireguard-tools (1.0.20210914-r0)\nExecuting busybox-1.35.0-r17.trigger\nOK: 14 MiB in 38 packages\nRemoving intermediate container 6e6887062bf5\n ---> 3b67c161801a\nStep 11/16 : WORKDIR /root/\n ---> Running in 7c5f90ecf944\nRemoving intermediate container 7c5f90ecf944\n ---> 1f91f10730bb\nStep 12/16 : RUN mkdir -p /etc/netclient/config\n ---> Running in 23a9f70aeae7\nRemoving intermediate container 23a9f70aeae7\n ---> b08d8d602093\nStep 13/16 : COPY --from=builder /app/netmaker .\n ---> 13345a521fe5\nStep 14/16 : COPY --from=builder /app/config config\n ---> b181fc01977b\nStep 15/16 : EXPOSE 8081\n ---> Running in 7630ebb9e57f\nRemoving intermediate container 7630ebb9e57f\n ---> 2f83f25698dd\nStep 16/16 : ENTRYPOINT [\"./netmaker\"]\n ---> Running in 6ec5f7549a33\nRemoving intermediate container 6ec5f7549a33\n ---> 194d40f05ae6\nSuccessfully built 194d40f05ae6\nSuccessfully tagged netmaker:latest\n","stderr":"","imageSize":26540423},"endTime":1672713783473}