{"repository":"https://github.com/suborbital/atmo","dockerfilePath":"Dockerfile","startTime":1672154852718,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/suborbital/atmo'...\n","error":null,"commit":"38384f765df5f0a22fa807a62dea4eaa55109402"},"originalBuild":{"startTimestamp":1672154855584,"endTimestamp":1672155030263,"error":null,"stdout":"Sending build context to Docker daemon  96.47MB\r\r\nStep 1/15 : FROM golang:1.19 as builder\n1.19: Pulling from library/golang\n32de3c850997: Already exists\nfa1d4c8d85a4: Already exists\nc796299bbbdd: Already exists\n81283a9569ad: Already exists\nc768848b86a2: Already exists\n3a3324c1d283: Pulling fs layer\nea43a17566db: Pulling fs layer\nea43a17566db: Verifying Checksum\nea43a17566db: Download complete\n3a3324c1d283: Verifying Checksum\n3a3324c1d283: Download complete\n3a3324c1d283: Pull complete\nea43a17566db: Pull complete\nDigest: sha256:660f138b4477001d65324a51fa158c1b868651b44e43f0953bf062e9f38b72f3\nStatus: Downloaded newer image for golang:1.19\n ---> 6650307efe4a\nStep 2/15 : RUN mkdir -p /go/src/github.com/suborbital/e2core\n ---> Running in b1b3bb0d0262\nRemoving intermediate container b1b3bb0d0262\n ---> 4c153801f0c4\nStep 3/15 : WORKDIR /go/src/github.com/suborbital/e2core/\n ---> Running in b148a8194922\nRemoving intermediate container b148a8194922\n ---> 9d34b3dbf251\nStep 4/15 : COPY go.mod go.sum ./\n ---> 352a37e3996d\nStep 5/15 : RUN go mod download\n ---> Running in 6d63347aa77d\nRemoving intermediate container 6d63347aa77d\n ---> 5ba5c4ac1709\nStep 6/15 : COPY . ./\n ---> bb982536e91c\nStep 7/15 : RUN go mod vendor\n ---> Running in fbb707c3b2ce\nRemoving intermediate container fbb707c3b2ce\n ---> af01e275e65d\nStep 8/15 : RUN make e2core/static\n ---> Running in 24cf61fb7274\ngo build -o .bin/e2core -tags netgo -ldflags=\"-extldflags=-static\" .\n\u001b[91m# github.com/suborbital/e2core\n/usr/bin/ld: /tmp/go-link-177601017/000003.o: in function `mygetgrouplist':\n/_/os/user/getgrouplist_unix.go:15: warning: Using 'getgrouplist' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking\n/usr/bin/ld: /tmp/go-link-177601017/000002.o: in function `mygetgrgid_r':\n/_/os/user/cgo_lookup_unix.go:37: warning: Using 'getgrgid_r' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking\n/usr/bin/ld: /tmp/go-link-177601017/000002.o: in function `mygetgrnam_r':\n/_/os/user/cgo_lookup_unix.go:42: warning: Using 'getgrnam_r' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking\n/usr/bin/ld: /tmp/go-link-177601017/000002.o: in function `mygetpwnam_r':\n/_/os/user/cgo_lookup_unix.go:32: warning: Using 'getpwnam_r' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking\n/usr/bin/ld: /tmp/go-link-177601017/000002.o: in function `mygetpwuid_r':\n/_/os/user/cgo_lookup_unix.go:27: warning: Using 'getpwuid_r' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking\n/usr/bin/ld: /go/src/github.com/suborbital/e2core/vendor/github.com/bytecodealliance/wasmtime-go/build/linux-x86_64/libwasmtime.a(std-8f1929c73c3f8167.std.4fd68eda-cgu.0.rcgu.o): in function `<std::sys_common::net::LookupHost as core::convert::TryFrom<(&str,u16)>>::try_from':\n/rustc/4b91a6ea7258a947e59c6522cd5898e7c0a6a88f/library/std/src/sys_common/net.rs:205: warning: Using 'getaddrinfo' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking\n\u001b[0mRemoving intermediate container 24cf61fb7274\n ---> 548ff056ae6e\nStep 9/15 : FROM debian:buster-slim\nbuster-slim: Pulling from library/debian\nb52ebda398ed: Already exists\nDigest: sha256:c9c3c682452791a9c301786a2beedb20f291e107c1b699fed0d4d145cc247d4f\nStatus: Downloaded newer image for debian:buster-slim\n ---> 101a5b2953f2\nStep 10/15 : RUN groupadd -g 999 e2core && \tuseradd -r -u 999 -g e2core e2core && \tmkdir -p /home/e2core && \tchown -R e2core /home/e2core && \tchmod -R 700 /home/e2core\n ---> Running in 2d8e407d5ab7\nRemoving intermediate container 2d8e407d5ab7\n ---> d768cea7e3e6\nStep 11/15 : RUN apt-get update \t&& apt-get install -y ca-certificates\n ---> Running in facc73f922aa\nGet:1 http://deb.debian.org/debian buster InRelease [122 kB]\nGet:2 http://deb.debian.org/debian-security buster/updates InRelease [34.8 kB]\nGet:3 http://deb.debian.org/debian buster-updates InRelease [56.6 kB]\nGet:4 http://deb.debian.org/debian buster/main amd64 Packages [7909 kB]\nGet:5 http://deb.debian.org/debian-security buster/updates/main amd64 Packages [416 kB]\nGet:6 http://deb.debian.org/debian buster-updates/main amd64 Packages [8788 B]\nFetched 8547 kB in 3s (3378 kB/s)\nReading package lists...\nReading package lists...\nBuilding dependency tree...\nReading state information...\nThe following additional packages will be installed:\n  libssl1.1 openssl\nThe following NEW packages will be installed:\n  ca-certificates libssl1.1 openssl\n0 upgraded, 3 newly installed, 0 to remove and 0 not upgraded.\nNeed to get 2571 kB of archives.\nAfter this operation, 6112 kB of additional disk space will be used.\nGet:1 http://deb.debian.org/debian buster/main amd64 libssl1.1 amd64 1.1.1n-0+deb10u3 [1551 kB]\nGet:2 http://deb.debian.org/debian buster/main amd64 openssl amd64 1.1.1n-0+deb10u3 [855 kB]\nGet:3 http://deb.debian.org/debian buster/main amd64 ca-certificates all 20200601~deb10u2 [166 kB]\n\u001b[91mdebconf: delaying package configuration, since apt-utils is not installed\n\u001b[0mFetched 2571 kB in 0s (50.2 MB/s)\nSelecting previously unselected package libssl1.1:amd64.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 6460 files and directories currently installed.)\r\nPreparing to unpack .../libssl1.1_1.1.1n-0+deb10u3_amd64.deb ...\r\nUnpacking libssl1.1:amd64 (1.1.1n-0+deb10u3) ...\r\nSelecting previously unselected package openssl.\r\nPreparing to unpack .../openssl_1.1.1n-0+deb10u3_amd64.deb ...\r\nUnpacking openssl (1.1.1n-0+deb10u3) ...\r\nSelecting previously unselected package ca-certificates.\r\nPreparing to unpack .../ca-certificates_20200601~deb10u2_all.deb ...\r\nUnpacking ca-certificates (20200601~deb10u2) ...\r\nSetting up libssl1.1:amd64 (1.1.1n-0+deb10u3) ...\r\ndebconf: unable to initialize frontend: Dialog\r\ndebconf: (TERM is not set, so the dialog frontend is not usable.)\r\ndebconf: falling back to frontend: Readline\r\ndebconf: unable to initialize frontend: Readline\r\ndebconf: (Can't locate Term/ReadLine.pm in @INC (you may need to install the Term::ReadLine module) (@INC contains: /etc/perl /usr/local/lib/x86_64-linux-gnu/perl/5.28.1 /usr/local/share/perl/5.28.1 /usr/lib/x86_64-linux-gnu/perl5/5.28 /usr/share/perl5 /usr/lib/x86_64-linux-gnu/perl/5.28 /usr/share/perl/5.28 /usr/local/lib/site_perl /usr/lib/x86_64-linux-gnu/perl-base) at /usr/share/perl5/Debconf/FrontEnd/Readline.pm line 7.)\r\ndebconf: falling back to frontend: Teletype\r\nSetting up openssl (1.1.1n-0+deb10u3) ...\r\nSetting up ca-certificates (20200601~deb10u2) ...\r\ndebconf: unable to initialize frontend: Dialog\r\ndebconf: (TERM is not set, so the dialog frontend is not usable.)\r\ndebconf: falling back to frontend: Readline\r\ndebconf: unable to initialize frontend: Readline\r\ndebconf: (Can't locate Term/ReadLine.pm in @INC (you may need to install the Term::ReadLine module) (@INC contains: /etc/perl /usr/local/lib/x86_64-linux-gnu/perl/5.28.1 /usr/local/share/perl/5.28.1 /usr/lib/x86_64-linux-gnu/perl5/5.28 /usr/share/perl5 /usr/lib/x86_64-linux-gnu/perl/5.28 /usr/share/perl/5.28 /usr/local/lib/site_perl /usr/lib/x86_64-linux-gnu/perl-base) at /usr/share/perl5/Debconf/FrontEnd/Readline.pm line 7.)\r\ndebconf: falling back to frontend: Teletype\r\nUpdating certificates in /etc/ssl/certs...\r\n137 added, 0 removed; done.\r\nProcessing triggers for libc-bin (2.28-10+deb10u2) ...\r\nProcessing triggers for ca-certificates (20200601~deb10u2) ...\r\nUpdating certificates in /etc/ssl/certs...\r\n0 added, 0 removed; done.\r\nRunning hooks in /etc/ca-certificates/update.d...\r\ndone.\r\nRemoving intermediate container facc73f922aa\n ---> ddcff35748c0\nStep 12/15 : COPY --from=builder /go/src/github.com/suborbital/e2core/.bin/e2core /usr/local/bin/\n ---> 9f3cfdd1a739\nStep 13/15 : WORKDIR /home/e2core\n ---> Running in 2e84d18347bf\nRemoving intermediate container 2e84d18347bf\n ---> dbe98a6655dc\nStep 14/15 : USER e2core\n ---> Running in 38ada7387237\nRemoving intermediate container 38ada7387237\n ---> 326262df6070\nStep 15/15 : CMD [\"/usr/local/bin/e2core\", \"start\"]\n ---> Running in 8e0b33dec7f3\nRemoving intermediate container 8e0b33dec7f3\n ---> 2ece74dbabd8\nSuccessfully built 2ece74dbabd8\nSuccessfully tagged atmo:latest\n","stderr":"","imageSize":151799555},"repair":{"violations":[{"name":"ruleAptGetInstallUseNoRec","position":{"start":24,"end":24,"columnStart":4,"columnEnd":38}},{"name":"ruleAptGetInstallThenRemoveAptLists","position":{"start":24,"end":24,"columnStart":4,"columnEnd":38}}],"repairedDockerfile":"FROM golang:1.19 as builder\n\nRUN mkdir -p /go/src/github.com/suborbital/e2core\nWORKDIR /go/src/github.com/suborbital/e2core/\n\n# Deps first\nCOPY go.mod go.sum ./\nRUN go mod download\n\n# Then the rest\nCOPY . ./\nRUN go mod vendor\n\nRUN make e2core/static\n\nFROM debian:buster-slim\n\nRUN groupadd -g 999 e2core && \\\n\tuseradd -r -u 999 -g e2core e2core && \\\n\tmkdir -p /home/e2core && \\\n\tchown -R e2core /home/e2core && \\\n\tchmod -R 700 /home/e2core\n\nRUN apt-get update \\\n\t&& apt-get install --no-install-recommends -y ca-certificates\n\n# e2core binary\nCOPY --from=builder /go/src/github.com/suborbital/e2core/.bin/e2core /usr/local/bin/\n\nWORKDIR /home/e2core\n\nUSER e2core\nCMD [\"/usr/local/bin/e2core\", \"start\"]\n"},"repairedBuild":{"startTimestamp":1672155030662,"endTimestamp":1672155194369,"error":null,"stdout":"Sending build context to Docker daemon  96.47MB\r\r\nStep 1/15 : FROM golang:1.19 as builder\n ---> 6650307efe4a\nStep 2/15 : RUN mkdir -p /go/src/github.com/suborbital/e2core\n ---> Running in 6df783266fd0\nRemoving intermediate container 6df783266fd0\n ---> 3d4057ff2a5c\nStep 3/15 : WORKDIR /go/src/github.com/suborbital/e2core/\n ---> Running in 9620b03358a5\nRemoving intermediate container 9620b03358a5\n ---> c180cbe2149d\nStep 4/15 : COPY go.mod go.sum ./\n ---> 47eb64a2c009\nStep 5/15 : RUN go mod download\n ---> Running in a2e5ce55aeee\nRemoving intermediate container a2e5ce55aeee\n ---> 8675646469a2\nStep 6/15 : COPY . ./\n ---> 51d6e3c1578a\nStep 7/15 : RUN go mod vendor\n ---> Running in 4fe3951fb6f8\nRemoving intermediate container 4fe3951fb6f8\n ---> 6606602f1d08\nStep 8/15 : RUN make e2core/static\n ---> Running in ac5625b02fb9\ngo build -o .bin/e2core -tags netgo -ldflags=\"-extldflags=-static\" .\n\u001b[91m# github.com/suborbital/e2core\n/usr/bin/ld: /tmp/go-link-1590440038/000003.o: in function `mygetgrouplist':\n/_/os/user/getgrouplist_unix.go:15: warning: Using 'getgrouplist' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking\n/usr/bin/ld: /tmp/go-link-1590440038/000002.o: in function `mygetgrgid_r':\n/_/os/user/cgo_lookup_unix.go:37: warning: Using 'getgrgid_r' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking\n/usr/bin/ld: /tmp/go-link-1590440038/000002.o: in function `mygetgrnam_r':\n/_/os/user/cgo_lookup_unix.go:42: warning: Using 'getgrnam_r' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking\n/usr/bin/ld: /tmp/go-link-1590440038/000002.o: in function `mygetpwnam_r':\n/_/os/user/cgo_lookup_unix.go:32: warning: Using 'getpwnam_r' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking\n/usr/bin/ld: /tmp/go-link-1590440038/000002.o: in function `mygetpwuid_r':\n/_/os/user/cgo_lookup_unix.go:27: warning: Using 'getpwuid_r' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking\n/usr/bin/ld: /go/src/github.com/suborbital/e2core/vendor/github.com/bytecodealliance/wasmtime-go/build/linux-x86_64/libwasmtime.a(std-8f1929c73c3f8167.std.4fd68eda-cgu.0.rcgu.o): in function `<std::sys_common::net::LookupHost as core::convert::TryFrom<(&str,u16)>>::try_from':\n/rustc/4b91a6ea7258a947e59c6522cd5898e7c0a6a88f/library/std/src/sys_common/net.rs:205: warning: Using 'getaddrinfo' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking\n\u001b[0mRemoving intermediate container ac5625b02fb9\n ---> 30d498b9f691\nStep 9/15 : FROM debian:buster-slim\n ---> 101a5b2953f2\nStep 10/15 : RUN groupadd -g 999 e2core && \tuseradd -r -u 999 -g e2core e2core && \tmkdir -p /home/e2core && \tchown -R e2core /home/e2core && \tchmod -R 700 /home/e2core\n ---> Running in 6d0fb2b16f27\nRemoving intermediate container 6d0fb2b16f27\n ---> 09ef328f2840\nStep 11/15 : RUN apt-get update \t&& apt-get install --no-install-recommends -y ca-certificates\n ---> Running in 869516794a6a\nGet:1 http://deb.debian.org/debian buster InRelease [122 kB]\nGet:2 http://deb.debian.org/debian-security buster/updates InRelease [34.8 kB]\nGet:3 http://deb.debian.org/debian buster-updates InRelease [56.6 kB]\nGet:4 http://deb.debian.org/debian buster/main amd64 Packages [7909 kB]\nGet:5 http://deb.debian.org/debian-security buster/updates/main amd64 Packages [416 kB]\nGet:6 http://deb.debian.org/debian buster-updates/main amd64 Packages [8788 B]\nFetched 8547 kB in 2s (4241 kB/s)\nReading package lists...\nReading package lists...\nBuilding dependency tree...\nReading state information...\nThe following additional packages will be installed:\n  libssl1.1 openssl\nThe following NEW packages will be installed:\n  ca-certificates libssl1.1 openssl\n0 upgraded, 3 newly installed, 0 to remove and 0 not upgraded.\nNeed to get 2571 kB of archives.\nAfter this operation, 6112 kB of additional disk space will be used.\nGet:1 http://deb.debian.org/debian buster/main amd64 libssl1.1 amd64 1.1.1n-0+deb10u3 [1551 kB]\nGet:2 http://deb.debian.org/debian buster/main amd64 openssl amd64 1.1.1n-0+deb10u3 [855 kB]\nGet:3 http://deb.debian.org/debian buster/main amd64 ca-certificates all 20200601~deb10u2 [166 kB]\n\u001b[91mdebconf: delaying package configuration, since apt-utils is not installed\n\u001b[0mFetched 2571 kB in 0s (47.5 MB/s)\nSelecting previously unselected package libssl1.1:amd64.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 6460 files and directories currently installed.)\r\nPreparing to unpack .../libssl1.1_1.1.1n-0+deb10u3_amd64.deb ...\r\nUnpacking libssl1.1:amd64 (1.1.1n-0+deb10u3) ...\r\nSelecting previously unselected package openssl.\r\nPreparing to unpack .../openssl_1.1.1n-0+deb10u3_amd64.deb ...\r\nUnpacking openssl (1.1.1n-0+deb10u3) ...\r\nSelecting previously unselected package ca-certificates.\r\nPreparing to unpack .../ca-certificates_20200601~deb10u2_all.deb ...\r\nUnpacking ca-certificates (20200601~deb10u2) ...\r\nSetting up libssl1.1:amd64 (1.1.1n-0+deb10u3) ...\r\ndebconf: unable to initialize frontend: Dialog\r\ndebconf: (TERM is not set, so the dialog frontend is not usable.)\r\ndebconf: falling back to frontend: Readline\r\ndebconf: unable to initialize frontend: Readline\r\ndebconf: (Can't locate Term/ReadLine.pm in @INC (you may need to install the Term::ReadLine module) (@INC contains: /etc/perl /usr/local/lib/x86_64-linux-gnu/perl/5.28.1 /usr/local/share/perl/5.28.1 /usr/lib/x86_64-linux-gnu/perl5/5.28 /usr/share/perl5 /usr/lib/x86_64-linux-gnu/perl/5.28 /usr/share/perl/5.28 /usr/local/lib/site_perl /usr/lib/x86_64-linux-gnu/perl-base) at /usr/share/perl5/Debconf/FrontEnd/Readline.pm line 7.)\r\ndebconf: falling back to frontend: Teletype\r\nSetting up openssl (1.1.1n-0+deb10u3) ...\r\nSetting up ca-certificates (20200601~deb10u2) ...\r\ndebconf: unable to initialize frontend: Dialog\r\ndebconf: (TERM is not set, so the dialog frontend is not usable.)\r\ndebconf: falling back to frontend: Readline\r\ndebconf: unable to initialize frontend: Readline\r\ndebconf: (Can't locate Term/ReadLine.pm in @INC (you may need to install the Term::ReadLine module) (@INC contains: /etc/perl /usr/local/lib/x86_64-linux-gnu/perl/5.28.1 /usr/local/share/perl/5.28.1 /usr/lib/x86_64-linux-gnu/perl5/5.28 /usr/share/perl5 /usr/lib/x86_64-linux-gnu/perl/5.28 /usr/share/perl/5.28 /usr/local/lib/site_perl /usr/lib/x86_64-linux-gnu/perl-base) at /usr/share/perl5/Debconf/FrontEnd/Readline.pm line 7.)\r\ndebconf: falling back to frontend: Teletype\r\nUpdating certificates in /etc/ssl/certs...\r\n137 added, 0 removed; done.\r\nProcessing triggers for libc-bin (2.28-10+deb10u2) ...\r\nProcessing triggers for ca-certificates (20200601~deb10u2) ...\r\nUpdating certificates in /etc/ssl/certs...\r\n0 added, 0 removed; done.\r\nRunning hooks in /etc/ca-certificates/update.d...\r\ndone.\r\nRemoving intermediate container 869516794a6a\n ---> 7a7c54094131\nStep 12/15 : COPY --from=builder /go/src/github.com/suborbital/e2core/.bin/e2core /usr/local/bin/\n ---> 006c97383c88\nStep 13/15 : WORKDIR /home/e2core\n ---> Running in 410d11f0eee5\nRemoving intermediate container 410d11f0eee5\n ---> 111a8827aa6a\nStep 14/15 : USER e2core\n ---> Running in 4d19128dc288\nRemoving intermediate container 4d19128dc288\n ---> a27c12a81c25\nStep 15/15 : CMD [\"/usr/local/bin/e2core\", \"start\"]\n ---> Running in 124d35efe33d\nRemoving intermediate container 124d35efe33d\n ---> 5026d8795d84\nSuccessfully built 5026d8795d84\nSuccessfully tagged atmo:latest\n","stderr":"","imageSize":151799579},"endTime":1672155194644}