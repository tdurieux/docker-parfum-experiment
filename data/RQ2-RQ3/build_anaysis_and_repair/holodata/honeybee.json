{"repository":"https://github.com/holodata/honeybee","dockerfilePath":"Dockerfile","startTime":1672280345716,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/holodata/honeybee'...\n","error":null,"commit":"22a5c0361424c82b7f3416a89d5dcd86354e12f3"},"originalBuild":{"startTimestamp":1672280349618,"endTimestamp":1672280613959,"error":{"code":1,"killed":false,"signal":null,"cmd":"docker build --no-cache --force-rm -t honeybee:latest -f /tmp/dinghy-analysis/holodata/honeybee/Dockerfile ."},"stdout":"Sending build context to Docker daemon  5.448MB\r\r\nStep 1/13 : FROM node:16-alpine\n16-alpine: Pulling from library/node\nc158987b0551: Already exists\ne15b2da73907: Pulling fs layer\n90461d7cfbbe: Pulling fs layer\n06b1a47b9f99: Pulling fs layer\n06b1a47b9f99: Verifying Checksum\n06b1a47b9f99: Download complete\n90461d7cfbbe: Verifying Checksum\n90461d7cfbbe: Download complete\ne15b2da73907: Download complete\ne15b2da73907: Pull complete\n90461d7cfbbe: Pull complete\n06b1a47b9f99: Pull complete\nDigest: sha256:58e4dfcf063f67d71e608c3cace5a0bcf39e9dbab3047b41e20c15c7132d1d46\nStatus: Downloaded newer image for node:16-alpine\n ---> 610c0494e820\nStep 2/13 : WORKDIR /app\n ---> Running in 7905903c44c9\nRemoving intermediate container 7905903c44c9\n ---> 1a3781d93f71\nStep 3/13 : RUN apk add terraform --repository=http://dl-cdn.alpinelinux.org/alpine/edge/community\n ---> Running in b9abdd890b72\nfetch http://dl-cdn.alpinelinux.org/alpine/edge/community/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/1) Installing terraform (1.3.6-r1)\nExecuting busybox-1.35.0-r29.trigger\nOK: 73 MiB in 18 packages\nRemoving intermediate container b9abdd890b72\n ---> 05ab2370d987\nStep 4/13 : RUN apk add git ruby ruby-dev docker-cli build-base openssh\n ---> Running in 2d65dc5d8c3f\n(1/48) Installing binutils (2.39-r2)\n(2/48) Installing libmagic (5.43-r0)\n(3/48) Installing file (5.43-r0)\n(4/48) Installing libgomp (12.2.1_git20220924-r4)\n(5/48) Installing libatomic (12.2.1_git20220924-r4)\n(6/48) Installing gmp (6.2.1-r2)\n(7/48) Installing isl25 (0.25-r0)\n(8/48) Installing mpfr4 (4.1.0-r0)\n(9/48) Installing mpc1 (1.2.1-r1)\n(10/48) Installing gcc (12.2.1_git20220924-r4)\n(11/48) Installing libstdc++-dev (12.2.1_git20220924-r4)\n(12/48) Installing musl-dev (1.2.3-r4)\n(13/48) Installing libc-dev (0.7.2-r3)\n(14/48) Installing g++ (12.2.1_git20220924-r4)\n(15/48) Installing make (4.3-r1)\n(16/48) Installing fortify-headers (1.1-r1)\n(17/48) Installing patch (2.7.6-r8)\n(18/48) Installing build-base (0.5-r3)\n(19/48) Installing ca-certificates (20220614-r3)\n(20/48) Installing docker-cli (20.10.21-r2)\n(21/48) Installing brotli-libs (1.0.9-r9)\n(22/48) Installing nghttp2-libs (1.51.0-r0)\n(23/48) Installing libcurl (7.87.0-r0)\n(24/48) Installing libexpat (2.5.0-r0)\n(25/48) Installing pcre2 (10.42-r0)\n(26/48) Installing git (2.38.2-r0)\n(27/48) Installing openssh-keygen (9.1_p1-r1)\n(28/48) Installing ncurses-terminfo-base (6.3_p20221119-r0)\n(29/48) Installing ncurses-libs (6.3_p20221119-r0)\n(30/48) Installing libedit (20221030.3.1-r0)\n(31/48) Installing openssh-client-common (9.1_p1-r1)\n(32/48) Installing openssh-client-default (9.1_p1-r1)\n(33/48) Installing openssh-sftp-server (9.1_p1-r1)\n(34/48) Installing openssh-server-common (9.1_p1-r1)\n(35/48) Installing openssh-server (9.1_p1-r1)\n(36/48) Installing openssh (9.1_p1-r1)\n(37/48) Installing libffi (3.4.4-r0)\n(38/48) Installing readline (8.2.0-r0)\n(39/48) Installing yaml (0.2.5-r0)\n(40/48) Installing ruby-libs (3.1.3-r0)\n(41/48) Installing libucontext (1.2-r0)\n(42/48) Installing ruby (3.1.3-r0)\n(43/48) Installing ruby-rdoc (3.1.3-r0)\n(44/48) Installing libgmpxx (6.2.1-r2)\n(45/48) Installing pkgconf (1.9.3-r0)\n(46/48) Installing gmp-dev (6.2.1-r2)\n(47/48) Installing libucontext-dev (1.2-r0)\n(48/48) Installing ruby-dev (3.1.3-r0)\nExecuting busybox-1.35.0-r29.trigger\nExecuting ca-certificates-20220614-r3.trigger\nOK: 388 MiB in 66 packages\nRemoving intermediate container 2d65dc5d8c3f\n ---> 93379f1f2244\nStep 5/13 : RUN gem install json\n ---> Running in 8673e9ac877c\nBuilding native extensions. This could take a while...\nSuccessfully installed json-2.6.3\nParsing documentation for json-2.6.3\nInstalling ri documentation for json-2.6.3\nDone installing documentation for json after 0 seconds\n1 gem installed\nRemoving intermediate container 8673e9ac877c\n ---> 06d5882173cf\nStep 6/13 : COPY package.json yarn.lock /app/\n ---> faf8a6840201\nStep 7/13 : RUN yarn --frozen-lockfile\n ---> Running in 9136cfcd82d7\nyarn install v1.22.19\n[1/5] Validating package.json...\n[2/5] Resolving packages...\n[3/5] Fetching packages...\n\u001b[91mwarning iterator-helpers-polyfill@2.2.8: The engine \"chrome\" appears to be invalid.\n\u001b[0m\u001b[91mwarning iterator-helpers-polyfill@2.2.8: The engine \"firefox\" appears to be invalid.\nwarning iterator-helpers-polyfill@2.2.8: The engine \"safari\" appears to be invalid.\n\u001b[0m[4/5] Linking dependencies...\n[5/5] Building fresh packages...\nDone in 21.69s.\nRemoving intermediate container 9136cfcd82d7\n ---> 5901d3161be5\nStep 8/13 : RUN git clone https://github.com/holodata/masterchat /masterchat && cd /masterchat && git switch dev && yarn install --frozen-lockfile && yarn build && yarn link\n ---> Running in 82de074ee118\n\u001b[91mCloning into '/masterchat'...\n\u001b[0mbranch 'dev' set up to track 'origin/dev'.\n\u001b[91mSwitched to a new branch 'dev'\n\u001b[0myarn install v1.22.19\ninfo No lockfile found.\n\u001b[91mwarning package-lock.json found. Your project contains lock files generated by tools other than Yarn. It is advised not to mix package managers in order to avoid resolution inconsistencies caused by unsynchronized lock files. To clear this warning, remove package-lock.json.\n\u001b[0m[1/5] Validating package.json...\n[2/5] Resolving packages...\n\u001b[91mwarning @rollup/plugin-commonjs > magic-string > sourcemap-codec@1.4.8: Please use @jridgewell/sourcemap-codec instead\n\u001b[0m\u001b[91mwarning rollup-plugin-dts > magic-string > sourcemap-codec@1.4.8: Please use @jridgewell/sourcemap-codec instead\n\u001b[0m\u001b[91mwarning rollup-plugin-node-polyfills > rollup-plugin-inject@3.0.2: This package has been deprecated and is no longer maintained. Please use @rollup/plugin-inject.\n\u001b[0m\u001b[91mwarning rollup-plugin-terser@7.0.2: This package has been deprecated and is no longer maintained. Please use @rollup/plugin-terser\n\u001b[0m[3/5] Fetching packages...\n\u001b[91mwarning iterator-helpers-polyfill@2.2.8: The engine \"chrome\" appears to be invalid.\nwarning iterator-helpers-polyfill@2.2.8: The engine \"firefox\" appears to be invalid.\nwarning iterator-helpers-polyfill@2.2.8: The engine \"safari\" appears to be invalid.\n\u001b[0m[4/5] Linking dependencies...\n[5/5] Building fresh packages...\n$ husky install\nhusky - Git hooks installed\nDone in 28.11s.\nyarn run v1.22.19\n$ cross-env NODE_ENV=production rollup -c && shx rm -rf lib/lib lib/*.map && patch lib/masterchat.d.ts patches/fix-dts.patch\n\u001b[91m\u001b[36m\n\u001b[1m./src/index.ts\u001b[22m → \u001b[1m./lib/masterchat.js, ./lib/masterchat.mjs\u001b[22m...\u001b[39m\n\u001b[0m\u001b[91m\u001b[1m\u001b[33m(!) Plugin typescript: @rollup/plugin-typescript TS2769: No overload matches this call.\n  Overload 1 of 2, '(o: { [s: string]: unknown; } | ArrayLike<unknown>): [string, unknown][]', gave the following error.\n    Argument of type 'T' is not assignable to parameter of type '{ [s: string]: unknown; } | ArrayLike<unknown>'.\n      Type 'T' is not assignable to type 'ArrayLike<unknown>'.\n  Overload 2 of 2, '(o: {}): [string, any][]', gave the following error.\n    Argument of type 'T' is not assignable to parameter of type '{}'.\u001b[39m\u001b[22m\n\u001b[1msrc/utils.ts: (379:25)\u001b[22m\n\u001b[90m\n\u001b[7m379\u001b[0m   return Object.entries(obj)\n\u001b[7m   \u001b[0m \u001b[91m                        ~~~\u001b[0m\n\n  \u001b[96msrc/utils.ts\u001b[0m:\u001b[93m378\u001b[0m:\u001b[93m36\u001b[0m\n    \u001b[7m378\u001b[0m export function omitTrackingParams<T>(obj: T): OmitTrackingParams<T> {\n    \u001b[7m   \u001b[0m \u001b[96m                                   ~\u001b[0m\n    This type parameter might need an `extends ArrayLike<unknown>` constraint.\n  \u001b[96msrc/utils.ts\u001b[0m:\u001b[93m378\u001b[0m:\u001b[93m36\u001b[0m\n    \u001b[7m378\u001b[0m export function omitTrackingParams<T>(obj: T): OmitTrackingParams<T> {\n    \u001b[7m   \u001b[0m \u001b[96m                                   ~\u001b[0m\n    This type parameter might need an `extends { [s: string]: unknown; } | ArrayLike<unknown>` constraint.\n  \u001b[96msrc/utils.ts\u001b[0m:\u001b[93m378\u001b[0m:\u001b[93m36\u001b[0m\n    \u001b[7m378\u001b[0m export function omitTrackingParams<T>(obj: T): OmitTrackingParams<T> {\n    \u001b[7m   \u001b[0m \u001b[96m                                   ~\u001b[0m\n    This type parameter might need an `extends {}` constraint.\n\u001b[39m\n\u001b[1m\u001b[33m(!) Plugin typescript: @rollup/plugin-typescript TS2322: Type 'unknown' is not assignable to type 'T[Exclude<keyof T, \"clickTrackingParams\" | \"trackingParams\">]'.\u001b[39m\u001b[22m\n\u001b[0m\u001b[91m\u001b[1msrc/utils.ts: (382:26)\u001b[22m\n\u001b[90m\n\u001b[7m382\u001b[0m       (sum, [k, v]) => ((sum[k as keyof OmitTrackingParams<T>] = v), sum),\n\u001b[7m   \u001b[0m \u001b[91m                         ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\u001b[39m\n\u001b[1m\u001b[33m(!) Plugin typescript: @rollup/plugin-typescript: Rollup 'sourcemap' option must be set to generate source maps.\u001b[39m\u001b[22m\n\u001b[0m\u001b[91m\u001b[1m\u001b[33m(!) Circular dependencies\u001b[39m\u001b[22m\nsrc/chat/index.ts -> src/chat/actions/addBannerToLiveChatCommand.ts -> src/chat/index.ts\nsrc/chat/index.ts -> src/chat/actions/addChatItemAction.ts -> src/chat/index.ts\nsrc/chat/index.ts -> src/chat/actions/addLiveChatTickerItemAction.ts -> src/chat/index.ts\n\u001b[0m\u001b[91m\u001b[32mcreated \u001b[1m./lib/masterchat.js, ./lib/masterchat.mjs\u001b[22m in \u001b[1m3.6s\u001b[22m\u001b[39m\n\u001b[0m\u001b[91m\u001b[36m\n\u001b[1m./lib/lib/index.d.ts\u001b[22m → \u001b[1m./lib/masterchat.d.ts\u001b[22m...\u001b[39m\n\u001b[0m\u001b[91m\u001b[1m\u001b[31m[!] \u001b[1mError: Could not resolve entry module (./lib/lib/index.d.ts).\u001b[22m\u001b[1m\u001b[39m\u001b[22m\n\u001b[0m\u001b[91m\u001b[2mError: Could not resolve entry module (./lib/lib/index.d.ts).\n    at error (/masterchat/node_modules/rollup/dist/shared/rollup.js:198:30)\n    at ModuleLoader.loadEntryModule (/masterchat/node_modules/rollup/dist/shared/rollup.js:22306:20)\n    at async Promise.all (index 0)\u001b[22m\n\n\u001b[0m\u001b[91merror Command failed with exit code 1.\n\u001b[0minfo Visit https://yarnpkg.com/en/docs/cli/run for documentation about this command.\nRemoving intermediate container 82de074ee118\n","stderr":"The command '/bin/sh -c git clone https://github.com/holodata/masterchat /masterchat && cd /masterchat && git switch dev && yarn install --frozen-lockfile && yarn build && yarn link' returned a non-zero code: 1\n"},"endTime":1672280614046}