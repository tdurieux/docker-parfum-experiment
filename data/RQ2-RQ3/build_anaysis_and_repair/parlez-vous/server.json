{"repository":"https://github.com/parlez-vous/server","dockerfilePath":"Dockerfile","startTime":1673248119153,"endTime":1673248249094,"clone":{"startTime":1673248119154,"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/parlez-vous/server'...\n","error":null,"endTime":1673248119971,"commit":"9006a6f4af17004b0de3691faa437577851caa30"},"originalBuild":{"startTime":1673248120059,"endTime":1673248190601,"error":null,"stdout":"Sending build context to Docker daemon  848.4kB\r\r\nStep 1/10 : FROM node:14.15-stretch\n14.15-stretch: Pulling from library/node\n1e987daa2432: Already exists\na0edb687a3da: Already exists\n6891892cc2ec: Already exists\n684eb726ddc5: Already exists\nb0af097f0da6: Already exists\n154aee36a7da: Already exists\n01e6b0c72136: Pulling fs layer\n42cbb8df654e: Pulling fs layer\n9c969f3ebb14: Pulling fs layer\n9c969f3ebb14: Verifying Checksum\n9c969f3ebb14: Download complete\n42cbb8df654e: Verifying Checksum\n42cbb8df654e: Download complete\n01e6b0c72136: Verifying Checksum\n01e6b0c72136: Download complete\n01e6b0c72136: Pull complete\n42cbb8df654e: Pull complete\n9c969f3ebb14: Pull complete\nDigest: sha256:1b1bf1f5023ddd7e08774fa5fcef15f3773833b194bac4e55134fa5f156dcdd6\nStatus: Downloaded newer image for node:14.15-stretch\n ---> 060aed823995\nStep 2/10 : WORKDIR /usr/app\n ---> Running in 7154be639aa4\nRemoving intermediate container 7154be639aa4\n ---> 355f77afb590\nStep 3/10 : ENV PORT 8080\n ---> Running in dbdb30d10475\nRemoving intermediate container dbdb30d10475\n ---> 2a77fa1b5d2d\nStep 4/10 : ENV NODE_PATH ./build\n ---> Running in 7c6b1cf33d0f\nRemoving intermediate container 7c6b1cf33d0f\n ---> 4310a164c828\nStep 5/10 : COPY package*.json ./\n ---> f8d00be88812\nStep 6/10 : COPY tsconfig.json ./\n ---> 4ce96a5e12e8\nStep 7/10 : COPY src/ ./src\n ---> da289590ad29\nStep 8/10 : COPY schema.prisma ./\n ---> 3119489819f1\nStep 9/10 : RUN npm install &&     npm run build\n ---> Running in bd0d570011f2\n\n> prisma@2.21.2 preinstall /usr/app/node_modules/prisma\n> node scripts/preinstall-entry.js\n\n\n> bcrypt@3.0.6 install /usr/app/node_modules/bcrypt\n> node-pre-gyp install --fallback-to-build\n\n\u001b[91mnode-pre-gyp\u001b[0m\u001b[91m WARN Using request for node-pre-gyp https download \n\u001b[0m\u001b[91mnode-pre-gyp\u001b[0m\u001b[91m \u001b[0m\u001b[91mWARN\u001b[0m\u001b[91m Tried to download(404): https://github.com/kelektiv/node.bcrypt.js/releases/download/v3.0.6/bcrypt_lib-v3.0.6-node-v83-linux-x64-glibc.tar.gz\u001b[0m\u001b[91m \n\u001b[0m\u001b[91mnode-pre-gyp \u001b[0m\u001b[91mWARN \u001b[0m\u001b[91mPre-built binaries not found for bcrypt@3.0.6 and node@14.15.5 (node-v83 ABI, glibc) (falling back to source compile with node-gyp)\u001b[0m\u001b[91m \n\u001b[0mmake: Entering directory '/usr/app/node_modules/bcrypt/build'\n  CXX(target) Release/obj.target/bcrypt_lib/src/blowfish.o\n  CXX(target) Release/obj.target/bcrypt_lib/src/bcrypt.o\n  CXX(target) Release/obj.target/bcrypt_lib/src/bcrypt_node.o\n  SOLINK_MODULE(target) Release/obj.target/bcrypt_lib.node\n  COPY Release/bcrypt_lib.node\n  COPY /usr/app/node_modules/bcrypt/lib/binding/bcrypt_lib.node\n  TOUCH Release/obj.target/action_after_build.stamp\nmake: Leaving directory '/usr/app/node_modules/bcrypt/build'\n\n> prisma@2.21.2 install /usr/app/node_modules/prisma\n> node scripts/install-entry.js\n\n\n> @prisma/engines@2.21.0-36.e421996c87d5f3c8f7eeadd502d4ad402c89464d postinstall /usr/app/node_modules/@prisma/engines\n> node download/index.js\n\n\n> @prisma/client@2.21.2 postinstall /usr/app/node_modules/@prisma/client\n> node scripts/postinstall.js\n\nPrisma schema loaded from schema.prisma\n\n✔ Generated Prisma Client (2.21.2) to ./node_modules/.prisma/client in 309ms\nYou can now start using Prisma Client in your code. Reference: https://pris.ly/d/client\n```\nimport { PrismaClient } from './node_modules/.prisma/client'\nconst prisma = new PrismaClient()\n```\n\n> nodemon@2.0.4 postinstall /usr/app/node_modules/nodemon\n> node bin/postinstall || exit 0\n\n\u001b[32mLove nodemon? You can now support the project via the open collective:\u001b[22m\u001b[39m\n > \u001b[96m\u001b[1mhttps://opencollective.com/nodemon/donate\u001b[0m\n\n\u001b[91mnpm WARN beta-parlez-vous@0.0.1 No description\n\u001b[0m\u001b[91mnpm WARN beta-parlez-vous@0.0.1 No repository field.\n\u001b[0m\u001b[91mnpm WARN \u001b[0m\u001b[91moptional SKIPPING OPTIONAL DEPENDENCY: fsevents@2.1.2 (node_modules/jest-haste-map/node_modules/fsevents):\nnpm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.1.2: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@2.1.3 (node_modules/fsevents):\nnpm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.1.3: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91m\n\u001b[0madded 1200 packages from 634 contributors and audited 1203 packages in 29.83s\n\n57 packages are looking for funding\n  run `npm fund` for details\n\nfound 186 vulnerabilities (12 low, 46 moderate, 102 high, 26 critical)\n  run `npm audit fix` to fix them, or `npm audit` for details\n\n> beta-parlez-vous@0.0.1 build /usr/app\n> rm -rf ./build && tsc\n\nRemoving intermediate container bd0d570011f2\n ---> c4fc768dce02\nStep 10/10 : CMD [ \"npm\", \"start\" ]\n ---> Running in 106189b73dea\nRemoving intermediate container 106189b73dea\n ---> 97d36bfe1f7a\nSuccessfully built 97d36bfe1f7a\nSuccessfully tagged server:latest\n","stderr":"","imageSize":1605049268},"repair":{"startTime":1673248190655,"endTime":1673248190733,"violations":[{"name":"npmCacheCleanAfterInstall","position":{"start":23,"end":23,"columnStart":4,"columnEnd":15}}],"repairedDockerfile":"# This Dockerfile creates the Staging / Production image that runs on a remote server\n\nFROM node:14.15-stretch\n\n# Create app directory\nWORKDIR /usr/app\n\n# In production / staging, the following vars are\n# injected by GCP App Engine\n# - DATABASE_URL\n# - CRON_INTERVAL_MS\n\nENV PORT 8080\nENV NODE_PATH ./build\n\n# Install app dependencies\n# A wildcard is used to ensure both package.json AND package-lock.json are copied\n# where available (npm@5+)\nCOPY package*.json ./\nCOPY tsconfig.json ./\nCOPY src/ ./src\nCOPY schema.prisma ./\n\nRUN npm install && \\\n    npm run build && npm cache clean --force;\n\nCMD [ \"npm\", \"start\" ]\n\n"},"repairedBuild":{"startTime":1673248192289,"endTime":1673248248372,"error":null,"stdout":"Sending build context to Docker daemon  848.4kB\r\r\nStep 1/10 : FROM node:14.15-stretch\n ---> 060aed823995\nStep 2/10 : WORKDIR /usr/app\n ---> Running in 405e5f113905\nRemoving intermediate container 405e5f113905\n ---> 6db10e435c94\nStep 3/10 : ENV PORT 8080\n ---> Running in d87adf7d7082\nRemoving intermediate container d87adf7d7082\n ---> 06f0f45028f2\nStep 4/10 : ENV NODE_PATH ./build\n ---> Running in cbd07d001739\nRemoving intermediate container cbd07d001739\n ---> 6108edf8946e\nStep 5/10 : COPY package*.json ./\n ---> 83a205d44d2c\nStep 6/10 : COPY tsconfig.json ./\n ---> 21d1d00f630f\nStep 7/10 : COPY src/ ./src\n ---> 91dbfcc9a543\nStep 8/10 : COPY schema.prisma ./\n ---> 4bca1adfa24d\nStep 9/10 : RUN npm install &&     npm run build && npm cache clean --force;\n ---> Running in ee3023098b14\n\n> prisma@2.21.2 preinstall /usr/app/node_modules/prisma\n> node scripts/preinstall-entry.js\n\n\n> bcrypt@3.0.6 install /usr/app/node_modules/bcrypt\n> node-pre-gyp install --fallback-to-build\n\n\u001b[91mnode-pre-gyp\u001b[0m\u001b[91m WARN Using request for node-pre-gyp https download \n\u001b[0m\u001b[91mnode-pre-gyp\u001b[0m\u001b[91m \u001b[0m\u001b[91mWARN\u001b[0m\u001b[91m Tried to download(404): https://github.com/kelektiv/node.bcrypt.js/releases/download/v3.0.6/bcrypt_lib-v3.0.6-node-v83-linux-x64-glibc.tar.gz\u001b[0m\u001b[91m \n\u001b[0m\u001b[91mnode-pre-gyp \u001b[0m\u001b[91mWARN \u001b[0m\u001b[91mPre-built binaries not found for bcrypt@3.0.6 and node@14.15.5 (node-v83 ABI, glibc) (falling back to source compile with node-gyp) \n\u001b[0mmake: Entering directory '/usr/app/node_modules/bcrypt/build'\n  CXX(target) Release/obj.target/bcrypt_lib/src/blowfish.o\n  CXX(target) Release/obj.target/bcrypt_lib/src/bcrypt.o\n  CXX(target) Release/obj.target/bcrypt_lib/src/bcrypt_node.o\n  SOLINK_MODULE(target) Release/obj.target/bcrypt_lib.node\n  COPY Release/bcrypt_lib.node\n  COPY /usr/app/node_modules/bcrypt/lib/binding/bcrypt_lib.node\n  TOUCH Release/obj.target/action_after_build.stamp\nmake: Leaving directory '/usr/app/node_modules/bcrypt/build'\n\n> prisma@2.21.2 install /usr/app/node_modules/prisma\n> node scripts/install-entry.js\n\n\n> @prisma/engines@2.21.0-36.e421996c87d5f3c8f7eeadd502d4ad402c89464d postinstall /usr/app/node_modules/@prisma/engines\n> node download/index.js\n\n\n> @prisma/client@2.21.2 postinstall /usr/app/node_modules/@prisma/client\n> node scripts/postinstall.js\n\nPrisma schema loaded from schema.prisma\n\n✔ Generated Prisma Client (2.21.2) to ./node_modules/.prisma/client in 352ms\nYou can now start using Prisma Client in your code. Reference: https://pris.ly/d/client\n```\nimport { PrismaClient } from './node_modules/.prisma/client'\nconst prisma = new PrismaClient()\n```\n\n> nodemon@2.0.4 postinstall /usr/app/node_modules/nodemon\n> node bin/postinstall || exit 0\n\n\u001b[32mLove nodemon? You can now support the project via the open collective:\u001b[22m\u001b[39m\n > \u001b[96m\u001b[1mhttps://opencollective.com/nodemon/donate\u001b[0m\n\n\u001b[91mnpm WARN beta-parlez-vous@0.0.1 No description\n\u001b[0m\u001b[91mnpm WARN beta-parlez-vous@0.0.1 No repository field.\n\u001b[0m\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@2.1.2 (node_modules/jest-haste-map/node_modules/fsevents):\nnpm WARN notsup\u001b[0m\u001b[91m SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.1.2: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@2.1.3 (node_modules/fsevents):\nnpm WARN \u001b[0m\u001b[91mnotsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.1.3: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91m\n\u001b[0madded 1200 packages from 634 contributors and audited 1203 packages in 22.229s\n\n57 packages are looking for funding\n  run `npm fund` for details\n\nfound 186 vulnerabilities (12 low, 46 moderate, 102 high, 26 critical)\n  run `npm audit fix` to fix them, or `npm audit` for details\n\n> beta-parlez-vous@0.0.1 build /usr/app\n> rm -rf ./build && tsc\n\n\u001b[91mnpm\u001b[0m\u001b[91m WARN using --force I sure hope you know what you are doing.\n\u001b[0mRemoving intermediate container ee3023098b14\n ---> e2e3616fd838\nStep 10/10 : CMD [ \"npm\", \"start\" ]\n ---> Running in 60435cf3bb60\nRemoving intermediate container 60435cf3bb60\n ---> 7d8c4242f283\nSuccessfully built 7d8c4242f283\nSuccessfully tagged server:latest\n","stderr":"","imageSize":1540523897}}