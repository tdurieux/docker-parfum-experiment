{"repository":"https://github.com/nimona/go-nimona","dockerfilePath":"Dockerfile","startTime":1672784048238,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/nimona/go-nimona'...\n","error":null,"commit":"8ec79adc037f193e3ce9a1a3cac44fd4d3e938c0"},"originalBuild":{"startTimestamp":1672784049483,"endTimestamp":1672784187959,"error":null,"stdout":"Sending build context to Docker daemon  2.488MB\r\r\nStep 1/13 : FROM golang:1.18 AS builder\n1.18: Pulling from library/golang\n32de3c850997: Already exists\nfa1d4c8d85a4: Already exists\nc796299bbbdd: Already exists\n81283a9569ad: Already exists\nc768848b86a2: Already exists\n160a777925fe: Pulling fs layer\n1be94824532a: Pulling fs layer\n1be94824532a: Waiting\n1be94824532a: Download complete\n160a777925fe: Verifying Checksum\n160a777925fe: Download complete\n160a777925fe: Pull complete\n1be94824532a: Pull complete\nDigest: sha256:00d63686b480f6dc866e93ddc4b29efa2db03274a687e6495c2cfbfe615d638e\nStatus: Downloaded newer image for golang:1.18\n ---> fffd0d9a59da\nStep 2/13 : RUN apt-get update && apt-get install -y ca-certificates openssl\n ---> Running in 31b07bb48e3c\nGet:1 http://deb.debian.org/debian bullseye InRelease [116 kB]\nGet:2 http://deb.debian.org/debian-security bullseye-security InRelease [48.4 kB]\nGet:3 http://deb.debian.org/debian bullseye-updates InRelease [44.1 kB]\nGet:4 http://deb.debian.org/debian bullseye/main amd64 Packages [8183 kB]\nGet:5 http://deb.debian.org/debian-security bullseye-security/main amd64 Packages [210 kB]\nGet:6 http://deb.debian.org/debian bullseye-updates/main amd64 Packages [14.6 kB]\nFetched 8616 kB in 2s (4998 kB/s)\nReading package lists...\nReading package lists...\nBuilding dependency tree...\nReading state information...\nca-certificates is already the newest version (20210119).\nopenssl is already the newest version (1.1.1n-0+deb11u3).\nopenssl set to manually installed.\n0 upgraded, 0 newly installed, 0 to remove and 1 not upgraded.\nRemoving intermediate container 31b07bb48e3c\n ---> aea6db71c5c2\nStep 3/13 : ARG version=dev\n ---> Running in e3229267788a\nRemoving intermediate container e3229267788a\n ---> 2c78ee1c7db3\nStep 4/13 : WORKDIR /src/nimona.io\n ---> Running in b8b5db6a9401\nRemoving intermediate container b8b5db6a9401\n ---> 60557467d053\nStep 5/13 : ENV CGO_ENABLED=1\n ---> Running in 576ea3dcfe05\nRemoving intermediate container 576ea3dcfe05\n ---> 0231d0b3c22c\nStep 6/13 : ENV VERSION=$version\n ---> Running in 2e072ee20af4\nRemoving intermediate container 2e072ee20af4\n ---> f2bd01f40ada\nStep 7/13 : COPY . .\n ---> c1728c038e1e\nStep 8/13 : RUN make build\n ---> Running in 14867b80da05\nmkdir -p \"bin\"\ncd \"cmd/bootstrap\" && go build -a  \\\n\t-o \"/src/nimona.io/bin/bootstrap\" \\\n\t-ldflags \"-w -s \\\n\t\t-X nimona.io/pkg/version.Date=2023-01-03T22:14:59Z \\\n\t\t-X nimona.io/pkg/version.Version=dev \\\n\t\t-X nimona.io/pkg/version.Commit=8ec79ad\"\n\u001b[91mgo: downloading github.com/stretchr/testify v1.7.1\n\u001b[0m\u001b[91mgo: downloading github.com/multiformats/go-multibase v0.0.3\ngo: downloading github.com/pyroscope-io/pyroscope v0.13.0\n\u001b[0m\u001b[91mgo: downloading github.com/multiformats/go-multicodec v0.4.1\n\u001b[0m\u001b[91mgo: downloading github.com/ghodss/yaml v1.0.0\ngo: downloading github.com/teserakt-io/golang-ed25519 v0.0.0-20210104091850-3888c087a4c8\ngo: downloading github.com/muesli/termenv v0.11.0\n\u001b[0m\u001b[91mgo: downloading github.com/tyler-smith/go-bip39 v1.1.0\ngo: downloading github.com/patrickmn/go-cache v2.1.0+incompatible\ngo: downloading github.com/Tv0ridobro/data-structure v0.0.0-20220227210127-8d31a0422295\n\u001b[0m\u001b[91mgo: downloading github.com/prometheus/client_golang v1.12.1\n\u001b[0m\u001b[91mgo: downloading golang.org/x/crypto v0.0.0-20220321153916-2c7772ba3064\n\u001b[0m\u001b[91mgo: downloading github.com/kelseyhightower/envconfig v1.4.0\n\u001b[0m\u001b[91mgo: downloading github.com/geoah/go-queue v2.0.0+incompatible\n\u001b[0m\u001b[91mgo: downloading github.com/hashicorp/go-multierror v1.1.1\ngo: downloading github.com/gobwas/glob v0.2.3\n\u001b[0m\u001b[91mgo: downloading github.com/multiformats/go-varint v0.0.6\n\u001b[0m\u001b[91mgo: downloading github.com/buger/jsonparser v1.1.1\n\u001b[0m\u001b[91mgo: downloading github.com/libp2p/go-nat v0.1.0\n\u001b[0m\u001b[91mgo: downloading github.com/mitchellh/copystructure v1.2.0\n\u001b[0m\u001b[91mgo: downloading github.com/mr-tron/base58 v1.2.0\n\u001b[0m\u001b[91mgo: downloading gopkg.in/yaml.v2 v2.4.0\n\u001b[0m\u001b[91mgo: downloading github.com/huin/goupnp v1.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/jackpal/go-nat-pmp v1.0.2\ngo: downloading github.com/koron/go-ssdp v0.0.0-20191105050749-2e1c40ed0b5d\n\u001b[0m\u001b[91mgo: downloading github.com/libp2p/go-netroute v0.1.2\n\u001b[0m\u001b[91mgo: downloading github.com/hashicorp/errwrap v1.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/multiformats/go-base36 v0.1.0\n\u001b[0m\u001b[91mgo: downloading github.com/multiformats/go-base32 v0.0.3\n\u001b[0m\u001b[91mgo: downloading golang.org/x/net v0.0.0-20211112202133-69e39bad7dc2\n\u001b[0m\u001b[91mgo: downloading github.com/pmezard/go-difflib v1.0.0\ngo: downloading gopkg.in/yaml.v3 v3.0.0-20210107192922-496545a6307b\n\u001b[0m\u001b[91mgo: downloading github.com/davecgh/go-spew v1.1.1\n\u001b[0m\u001b[91mgo: downloading github.com/prometheus/common v0.32.1\ngo: downloading github.com/prometheus/client_model v0.2.0\n\u001b[0m\u001b[91mgo: downloading github.com/beorn7/perks v1.0.1\ngo: downloading github.com/golang/protobuf v1.5.2\n\u001b[0m\u001b[91mgo: downloading google.golang.org/protobuf v1.27.1\ngo: downloading github.com/prometheus/procfs v0.7.3\n\u001b[0m\u001b[91mgo: downloading github.com/cespare/xxhash/v2 v2.1.2\n\u001b[0m\u001b[91mgo: downloading github.com/matttproud/golang_protobuf_extensions v1.0.2-0.20181231171920-c182affec369\n\u001b[0m\u001b[91mgo: downloading github.com/mitchellh/reflectwalk v1.0.2\n\u001b[0m\u001b[91mgo: downloading github.com/google/gopacket v1.1.17\n\u001b[0m\u001b[91mgo: downloading golang.org/x/sys v0.0.0-20220114195835-da31bd327af9\n\u001b[0m\u001b[91mgo: downloading github.com/lucasb-eyer/go-colorful v1.2.0\ngo: downloading github.com/mattn/go-isatty v0.0.14\n\u001b[0m\u001b[91mgo: downloading github.com/mattn/go-runewidth v0.0.13\n\u001b[0m\u001b[91mgo: downloading github.com/rivo/uniseg v0.2.0\n\u001b[0m\u001b[91mgo: downloading golang.org/x/text v0.3.7\n\u001b[0m\u001b[91mgo: downloading github.com/mitchellh/go-ps v1.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/shirou/gopsutil v3.21.4+incompatible\n\u001b[0m\u001b[91mgo: downloading github.com/valyala/bytebufferpool v1.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/tklauser/go-sysconf v0.3.6\n\u001b[0m\u001b[91mgo: downloading github.com/tklauser/numcpus v0.2.2\n\u001b[0mmkdir -p \"bin\"\ncd \"cmd/keygen\" && go build -a  \\\n\t-o \"/src/nimona.io/bin/keygen\" \\\n\t-ldflags \"-w -s \\\n\t\t-X nimona.io/pkg/version.Date=2023-01-03T22:15:10Z \\\n\t\t-X nimona.io/pkg/version.Version=dev \\\n\t\t-X nimona.io/pkg/version.Commit=8ec79ad\"\nmkdir -p \"bin\"\ncd \"cmd/sonar\" && go build -a  \\\n\t-o \"/src/nimona.io/bin/sonar\" \\\n\t-ldflags \"-w -s \\\n\t\t-X nimona.io/pkg/version.Date=2023-01-03T22:15:16Z \\\n\t\t-X nimona.io/pkg/version.Version=dev \\\n\t\t-X nimona.io/pkg/version.Commit=8ec79ad\"\n\u001b[91mgo: downloading github.com/geoah/go-pubsub v0.0.1\n\u001b[0m\u001b[91mgo: downloading github.com/jinzhu/copier v0.3.5\n\u001b[0m\u001b[91mgo: downloading github.com/Code-Hex/go-generics-cache v1.0.0\n\u001b[0m\u001b[91mgo: downloading modernc.org/sqlite v1.15.3\n\u001b[0m\u001b[91mgo: downloading github.com/google/go-cmp v0.5.7\n\u001b[0m\u001b[91mgo: downloading modernc.org/libc v1.14.12\n\u001b[0m\u001b[91mgo: downloading github.com/google/uuid v1.3.0\n\u001b[0m\u001b[91mgo: downloading modernc.org/mathutil v1.4.1\n\u001b[0m\u001b[91mgo: downloading modernc.org/memory v1.0.7\n\u001b[0m\u001b[91mgo: downloading github.com/remyoudompheng/bigfft v0.0.0-20200410134404-eec4a21b6bb0\n\u001b[0mRemoving intermediate container 14867b80da05\n ---> 6ebc4b37d75a\nStep 9/13 : FROM debian:buster-slim\nbuster-slim: Pulling from library/debian\nb52ebda398ed: Already exists\nDigest: sha256:c9c3c682452791a9c301786a2beedb20f291e107c1b699fed0d4d145cc247d4f\nStatus: Downloaded newer image for debian:buster-slim\n ---> 101a5b2953f2\nStep 10/13 : COPY --from=builder /src/nimona.io/bin/bootstrap /bootstrap\n ---> 9454116d624e\nStep 11/13 : COPY --from=builder /src/nimona.io/bin/sonar /sonar\n ---> 53e6a11f6c13\nStep 12/13 : COPY --from=builder /etc/ssl/certs/ca-certificates.crt /etc/ssl/certs/ca-certificates.crt\n ---> aa3bcb1f9653\nStep 13/13 : ENTRYPOINT [\"/bootstrap\"]\n ---> Running in dbdbec9eab2f\nRemoving intermediate container dbdbec9eab2f\n ---> 2d1c24d64157\nSuccessfully built 2d1c24d64157\nSuccessfully tagged go-nimona:latest\n","stderr":"","imageSize":96651656},"repair":{"violations":[{"name":"ruleAptGetInstallUseNoRec","position":{"start":2,"end":2,"columnStart":22,"columnEnd":64}},{"name":"ruleAptGetInstallThenRemoveAptLists","position":{"start":2,"end":2,"columnStart":22,"columnEnd":64}}],"repairedDockerfile":"FROM golang:1.18 AS builder\n\nRUN apt-get update && apt-get install --no-install-recommends -y ca-certificates openssl\n\nARG version=dev\n\nWORKDIR /src/nimona.io\n\nENV CGO_ENABLED=1\nENV VERSION=$version\n\nCOPY . .\n\nRUN make build\n\n###\n\nFROM debian:buster-slim\n\nCOPY --from=builder /src/nimona.io/bin/bootstrap /bootstrap\nCOPY --from=builder /src/nimona.io/bin/sonar /sonar\nCOPY --from=builder /etc/ssl/certs/ca-certificates.crt /etc/ssl/certs/ca-certificates.crt\n\nENTRYPOINT [\"/bootstrap\"]\n"},"repairedBuild":{"startTimestamp":1672784188710,"endTimestamp":1672784289459,"error":null,"stdout":"Sending build context to Docker daemon  2.488MB\r\r\nStep 1/13 : FROM golang:1.18 AS builder\n ---> fffd0d9a59da\nStep 2/13 : RUN apt-get update && apt-get install --no-install-recommends -y ca-certificates openssl\n ---> Running in 08710db2062f\nGet:1 http://deb.debian.org/debian bullseye InRelease [116 kB]\nGet:2 http://deb.debian.org/debian-security bullseye-security InRelease [48.4 kB]\nGet:3 http://deb.debian.org/debian bullseye-updates InRelease [44.1 kB]\nGet:4 http://deb.debian.org/debian bullseye/main amd64 Packages [8183 kB]\nGet:5 http://deb.debian.org/debian-security bullseye-security/main amd64 Packages [210 kB]\nGet:6 http://deb.debian.org/debian bullseye-updates/main amd64 Packages [14.6 kB]\nFetched 8616 kB in 1s (6381 kB/s)\nReading package lists...\nReading package lists...\nBuilding dependency tree...\nReading state information...\nca-certificates is already the newest version (20210119).\nopenssl is already the newest version (1.1.1n-0+deb11u3).\nopenssl set to manually installed.\n0 upgraded, 0 newly installed, 0 to remove and 1 not upgraded.\nRemoving intermediate container 08710db2062f\n ---> 9a18ebbd9df9\nStep 3/13 : ARG version=dev\n ---> Running in bf7613638b47\nRemoving intermediate container bf7613638b47\n ---> c8d3764eec59\nStep 4/13 : WORKDIR /src/nimona.io\n ---> Running in a24a0275117f\nRemoving intermediate container a24a0275117f\n ---> 4e098585de32\nStep 5/13 : ENV CGO_ENABLED=1\n ---> Running in 940fa82db546\nRemoving intermediate container 940fa82db546\n ---> a45acf547179\nStep 6/13 : ENV VERSION=$version\n ---> Running in 24dbc308648e\nRemoving intermediate container 24dbc308648e\n ---> d20267875f71\nStep 7/13 : COPY . .\n ---> ecbb2f98ea11\nStep 8/13 : RUN make build\n ---> Running in 69ab53dd8919\nmkdir -p \"bin\"\ncd \"cmd/bootstrap\" && go build -a  \\\n\t-o \"/src/nimona.io/bin/bootstrap\" \\\n\t-ldflags \"-w -s \\\n\t\t-X nimona.io/pkg/version.Date=2023-01-03T22:16:37Z \\\n\t\t-X nimona.io/pkg/version.Version=dev \\\n\t\t-X nimona.io/pkg/version.Commit=8ec79ad\"\n\u001b[91mgo: downloading github.com/prometheus/client_golang v1.12.1\n\u001b[0m\u001b[91mgo: downloading github.com/kelseyhightower/envconfig v1.4.0\n\u001b[0m\u001b[91mgo: downloading github.com/pyroscope-io/pyroscope v0.13.0\n\u001b[0m\u001b[91mgo: downloading golang.org/x/crypto v0.0.0-20220321153916-2c7772ba3064\ngo: downloading github.com/stretchr/testify v1.7.1\ngo: downloading github.com/hashicorp/go-multierror v1.1.1\n\u001b[0m\u001b[91mgo: downloading github.com/gobwas/glob v0.2.3\ngo: downloading github.com/muesli/termenv v0.11.0\n\u001b[0m\u001b[91mgo: downloading github.com/tyler-smith/go-bip39 v1.1.0\n\u001b[0m\u001b[91mgo: downloading github.com/teserakt-io/golang-ed25519 v0.0.0-20210104091850-3888c087a4c8\n\u001b[0m\u001b[91mgo: downloading github.com/ghodss/yaml v1.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/multiformats/go-multibase v0.0.3\ngo: downloading github.com/geoah/go-queue v2.0.0+incompatible\n\u001b[0m\u001b[91mgo: downloading github.com/multiformats/go-multicodec v0.4.1\ngo: downloading github.com/libp2p/go-nat v0.1.0\n\u001b[0m\u001b[91mgo: downloading github.com/Tv0ridobro/data-structure v0.0.0-20220227210127-8d31a0422295\n\u001b[0m\u001b[91mgo: downloading github.com/patrickmn/go-cache v2.1.0+incompatible\n\u001b[0m\u001b[91mgo: downloading github.com/buger/jsonparser v1.1.1\n\u001b[0m\u001b[91mgo: downloading github.com/mitchellh/copystructure v1.2.0\n\u001b[0m\u001b[91mgo: downloading github.com/multiformats/go-varint v0.0.6\n\u001b[0m\u001b[91mgo: downloading github.com/mr-tron/base58 v1.2.0\n\u001b[0m\u001b[91mgo: downloading gopkg.in/yaml.v2 v2.4.0\n\u001b[0m\u001b[91mgo: downloading github.com/hashicorp/errwrap v1.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/multiformats/go-base36 v0.1.0\n\u001b[0m\u001b[91mgo: downloading github.com/multiformats/go-base32 v0.0.3\n\u001b[0m\u001b[91mgo: downloading github.com/mitchellh/reflectwalk v1.0.2\n\u001b[0m\u001b[91mgo: downloading github.com/koron/go-ssdp v0.0.0-20191105050749-2e1c40ed0b5d\ngo: downloading github.com/jackpal/go-nat-pmp v1.0.2\ngo: downloading github.com/huin/goupnp v1.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/libp2p/go-netroute v0.1.2\n\u001b[0m\u001b[91mgo: downloading github.com/google/gopacket v1.1.17\n\u001b[0m\u001b[91mgo: downloading golang.org/x/net v0.0.0-20211112202133-69e39bad7dc2\n\u001b[0m\u001b[91mgo: downloading github.com/davecgh/go-spew v1.1.1\ngo: downloading github.com/pmezard/go-difflib v1.0.0\ngo: downloading gopkg.in/yaml.v3 v3.0.0-20210107192922-496545a6307b\n\u001b[0m\u001b[91mgo: downloading golang.org/x/sys v0.0.0-20220114195835-da31bd327af9\n\u001b[0m\u001b[91mgo: downloading github.com/mattn/go-isatty v0.0.14\ngo: downloading github.com/mattn/go-runewidth v0.0.13\n\u001b[0m\u001b[91mgo: downloading github.com/lucasb-eyer/go-colorful v1.2.0\n\u001b[0m\u001b[91mgo: downloading github.com/rivo/uniseg v0.2.0\n\u001b[0m\u001b[91mgo: downloading github.com/prometheus/common v0.32.1\n\u001b[0m\u001b[91mgo: downloading github.com/prometheus/client_model v0.2.0\n\u001b[0m\u001b[91mgo: downloading github.com/golang/protobuf v1.5.2\n\u001b[0m\u001b[91mgo: downloading github.com/prometheus/procfs v0.7.3\n\u001b[0m\u001b[91mgo: downloading google.golang.org/protobuf v1.27.1\n\u001b[0m\u001b[91mgo: downloading github.com/beorn7/perks v1.0.1\n\u001b[0m\u001b[91mgo: downloading github.com/cespare/xxhash/v2 v2.1.2\n\u001b[0m\u001b[91mgo: downloading github.com/matttproud/golang_protobuf_extensions v1.0.2-0.20181231171920-c182affec369\n\u001b[0m\u001b[91mgo: downloading golang.org/x/text v0.3.7\n\u001b[0m\u001b[91mgo: downloading github.com/mitchellh/go-ps v1.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/shirou/gopsutil v3.21.4+incompatible\n\u001b[0m\u001b[91mgo: downloading github.com/valyala/bytebufferpool v1.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/tklauser/go-sysconf v0.3.6\n\u001b[0m\u001b[91mgo: downloading github.com/tklauser/numcpus v0.2.2\n\u001b[0mmkdir -p \"bin\"\ncd \"cmd/keygen\" && go build -a  \\\n\t-o \"/src/nimona.io/bin/keygen\" \\\n\t-ldflags \"-w -s \\\n\t\t-X nimona.io/pkg/version.Date=2023-01-03T22:16:49Z \\\n\t\t-X nimona.io/pkg/version.Version=dev \\\n\t\t-X nimona.io/pkg/version.Commit=8ec79ad\"\nmkdir -p \"bin\"\ncd \"cmd/sonar\" && go build -a  \\\n\t-o \"/src/nimona.io/bin/sonar\" \\\n\t-ldflags \"-w -s \\\n\t\t-X nimona.io/pkg/version.Date=2023-01-03T22:16:55Z \\\n\t\t-X nimona.io/pkg/version.Version=dev \\\n\t\t-X nimona.io/pkg/version.Commit=8ec79ad\"\n\u001b[91mgo: downloading github.com/google/go-cmp v0.5.7\n\u001b[0m\u001b[91mgo: downloading modernc.org/sqlite v1.15.3\n\u001b[0m\u001b[91mgo: downloading github.com/jinzhu/copier v0.3.5\n\u001b[0m\u001b[91mgo: downloading github.com/geoah/go-pubsub v0.0.1\n\u001b[0m\u001b[91mgo: downloading github.com/Code-Hex/go-generics-cache v1.0.0\n\u001b[0m\u001b[91mgo: downloading modernc.org/libc v1.14.12\n\u001b[0m\u001b[91mgo: downloading modernc.org/memory v1.0.7\n\u001b[0m\u001b[91mgo: downloading modernc.org/mathutil v1.4.1\n\u001b[0m\u001b[91mgo: downloading github.com/google/uuid v1.3.0\n\u001b[0m\u001b[91mgo: downloading github.com/remyoudompheng/bigfft v0.0.0-20200410134404-eec4a21b6bb0\n\u001b[0mRemoving intermediate container 69ab53dd8919\n ---> 50c31cdf1b39\nStep 9/13 : FROM debian:buster-slim\n ---> 101a5b2953f2\nStep 10/13 : COPY --from=builder /src/nimona.io/bin/bootstrap /bootstrap\n ---> 65bed831c5c6\nStep 11/13 : COPY --from=builder /src/nimona.io/bin/sonar /sonar\n ---> 2301e6087d28\nStep 12/13 : COPY --from=builder /etc/ssl/certs/ca-certificates.crt /etc/ssl/certs/ca-certificates.crt\n ---> 7bb535655457\nStep 13/13 : ENTRYPOINT [\"/bootstrap\"]\n ---> Running in 8ab71487e0da\nRemoving intermediate container 8ab71487e0da\n ---> 3e24f0fc4805\nSuccessfully built 3e24f0fc4805\nSuccessfully tagged go-nimona:latest\n","stderr":"","imageSize":96651656},"endTime":1672784290008}