{"repository":"https://github.com/crops/extsdk-container","dockerfilePath":"Dockerfile","startTime":1672630247636,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/crops/extsdk-container'...\n","error":null,"commit":"5a78815d398f46eb6ffb7b9d881b0965f4eb9d82"},"originalBuild":{"startTimestamp":1672630248488,"endTimestamp":1672630290113,"error":null,"stdout":"Sending build context to Docker daemon  62.98kB\r\r\nStep 1/8 : FROM crops/yocto:ubuntu-18.04-base\nubuntu-18.04-base: Pulling from crops/yocto\nfb668870d8a7: Already exists\n05051b376f9d: Pulling fs layer\n92bccaff3d7f: Pulling fs layer\ne6b0c9859e1f: Pulling fs layer\n92bccaff3d7f: Verifying Checksum\n92bccaff3d7f: Download complete\n05051b376f9d: Verifying Checksum\n05051b376f9d: Download complete\ne6b0c9859e1f: Verifying Checksum\ne6b0c9859e1f: Download complete\n05051b376f9d: Pull complete\n92bccaff3d7f: Pull complete\ne6b0c9859e1f: Pull complete\nDigest: sha256:334e39b03d2337c200a3a1ceb254b6f71a981ffb6ee6f50d4b6e26b7b0ac76d2\nStatus: Downloaded newer image for crops/yocto:ubuntu-18.04-base\n ---> 76be7c87d6aa\nStep 2/8 : USER root\n ---> Running in 48b4533f7527\nRemoving intermediate container 48b4533f7527\n ---> 2215715ee592\nStep 3/8 : COPY usersetup.py          esdk-launch.py          esdk-entry.py          restrict_groupadd.sh          restrict_useradd.sh      /usr/bin/\n ---> 087571c1797d\nStep 4/8 : COPY sudoers.usersetup /etc/\n ---> cce48d9de25b\nStep 5/8 : RUN userdel -r yoctouser &&     groupadd -g 70 usersetup &&     useradd -N -m -u 70 -g 70 usersetup &&     apt-get -y install curl sudo &&     echo \"#include /etc/sudoers.usersetup\" >> /etc/sudoers &&     chmod 755 /usr/bin/usersetup.py         /usr/bin/esdk-launch.py         /usr/bin/esdk-entry.py         /usr/bin/restrict_groupadd.sh         /usr/bin/restrict_useradd.sh\n ---> Running in 682258f2d204\n\u001b[91muserdel: yoctouser mail spool (/var/mail/yoctouser) not found\n\u001b[0mReading package lists...\nBuilding dependency tree...\nReading state information...\nsudo is already the newest version (1.8.21p2-3ubuntu1.4).\nThe following packages were automatically installed and are no longer required:\n  dbus dh-python gir1.2-glib-2.0 libapparmor1 libdbus-1-3 libexpat1-dev\n  libgirepository-1.0-1 libglib2.0-0 libglib2.0-data libpython3-dev\n  libpython3.6 libpython3.6-dev python-pip-whl python3-asn1crypto\n  python3-cffi-backend python3-crypto python3-cryptography python3-dbus\n  python3-dev python3-distutils python3-gi python3-idna python3-keyring\n  python3-keyrings.alt python3-lib2to3 python3-pkg-resources\n  python3-secretstorage python3-setuptools python3-six python3-wheel\n  python3-xdg python3.6-dev shared-mime-info xdg-user-dirs\nUse 'apt autoremove' to remove them.\nThe following NEW packages will be installed:\n  curl\n0 upgraded, 1 newly installed, 0 to remove and 0 not upgraded.\nNeed to get 159 kB of archives.\nAfter this operation, 397 kB of additional disk space will be used.\nGet:1 http://archive.ubuntu.com/ubuntu bionic-updates/main amd64 curl amd64 7.58.0-2ubuntu3.21 [159 kB]\n\u001b[91mshell-init: error retrieving current directory: getcwd: cannot access parent directories: No such file or directory\n\u001b[0m\u001b[91mdebconf: delaying package configuration, since apt-utils is not installed\n\u001b[0mFetched 159 kB in 0s (1039 kB/s)\nSelecting previously unselected package curl.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 23484 files and directories currently installed.)\r\nPreparing to unpack .../curl_7.58.0-2ubuntu3.21_amd64.deb ...\r\nUnpacking curl (7.58.0-2ubuntu3.21) ...\r\nSetting up curl (7.58.0-2ubuntu3.21) ...\r\nRemoving intermediate container 682258f2d204\n ---> ae5049eccb58\nStep 6/8 : USER usersetup\n ---> Running in 05d7663679a9\nRemoving intermediate container 05d7663679a9\n ---> 0eb738970e1b\nStep 7/8 : ENV LANG=en_US.UTF-8\n ---> Running in 01618cb0d740\nRemoving intermediate container 01618cb0d740\n ---> 560904f0a414\nStep 8/8 : ENTRYPOINT [\"/usr/bin/dumb-init\", \"--\", \"/usr/bin/esdk-entry.py\"]\n ---> Running in 64ecc2afff78\nRemoving intermediate container 64ecc2afff78\n ---> 8f063e54bd09\nSuccessfully built 8f063e54bd09\nSuccessfully tagged extsdk-container:latest\n","stderr":"","imageSize":934624088},"repair":{"violations":[{"name":"ruleAptGetInstallUseNoRec","position":{"start":26,"end":26,"columnStart":4,"columnEnd":32}},{"name":"ruleAptGetUpdatePrecedesInstall","position":{"start":26,"end":26,"columnStart":4,"columnEnd":32}},{"name":"ruleAptGetInstallThenRemoveAptLists","position":{"start":26,"end":26,"columnStart":4,"columnEnd":32}}],"repairedDockerfile":"# Copyright (C) 2015-2016 Intel Corporation\n# Copyright (C) 2022 Konsulko Group\n#\n# SPDX-License-Identifier: GPL-2.0-only\n#\n\n# ext sdk container\n#\nFROM crops/yocto:ubuntu-18.04-base\n\nUSER root\n\nCOPY usersetup.py \\\n         esdk-launch.py \\\n         esdk-entry.py \\\n         restrict_groupadd.sh \\\n         restrict_useradd.sh \\\n     /usr/bin/\nCOPY sudoers.usersetup /etc/\n\n# We remove the user because we add a new one of our own.\n# The usersetup user is solely for adding a new user that has the same uid,\n# as the workspace. 70 is an arbitrary *low* unused uid on debian.\nRUN userdel -r yoctouser && \\\n    groupadd -g 70 usersetup && \\\n    useradd -N -m -u 70 -g 70 usersetup && \\\n    apt-get -y --no-install-recommends install curl sudo && \\\n    echo \"#include /etc/sudoers.usersetup\" >> /etc/sudoers && \\\n    chmod 755 /usr/bin/usersetup.py \\\n        /usr/bin/esdk-launch.py \\\n        /usr/bin/esdk-entry.py \\\n        /usr/bin/restrict_groupadd.sh \\\n        /usr/bin/restrict_useradd.sh\n\nUSER usersetup\nENV LANG=en_US.UTF-8\n\nENTRYPOINT [\"/usr/bin/dumb-init\", \"--\", \"/usr/bin/esdk-entry.py\"]\n"},"repairedBuild":{"startTimestamp":1672630290499,"endTimestamp":1672630301807,"error":null,"stdout":"Sending build context to Docker daemon  62.98kB\r\r\nStep 1/8 : FROM crops/yocto:ubuntu-18.04-base\n ---> 76be7c87d6aa\nStep 2/8 : USER root\n ---> Running in 6c6f230f5d9c\nRemoving intermediate container 6c6f230f5d9c\n ---> 0794a2b39fca\nStep 3/8 : COPY usersetup.py          esdk-launch.py          esdk-entry.py          restrict_groupadd.sh          restrict_useradd.sh      /usr/bin/\n ---> dc6cde93c5d3\nStep 4/8 : COPY sudoers.usersetup /etc/\n ---> bae6055fc12d\nStep 5/8 : RUN userdel -r yoctouser &&     groupadd -g 70 usersetup &&     useradd -N -m -u 70 -g 70 usersetup &&     apt-get -y --no-install-recommends install curl sudo &&     echo \"#include /etc/sudoers.usersetup\" >> /etc/sudoers &&     chmod 755 /usr/bin/usersetup.py         /usr/bin/esdk-launch.py         /usr/bin/esdk-entry.py         /usr/bin/restrict_groupadd.sh         /usr/bin/restrict_useradd.sh\n ---> Running in c7795b60e8b6\n\u001b[91muserdel: yoctouser mail spool (/var/mail/yoctouser) not found\n\u001b[0mReading package lists...\nBuilding dependency tree...\nReading state information...\nsudo is already the newest version (1.8.21p2-3ubuntu1.4).\nThe following packages were automatically installed and are no longer required:\n  dbus dh-python gir1.2-glib-2.0 libapparmor1 libdbus-1-3 libexpat1-dev\n  libgirepository-1.0-1 libglib2.0-0 libglib2.0-data libpython3-dev\n  libpython3.6 libpython3.6-dev python-pip-whl python3-asn1crypto\n  python3-cffi-backend python3-crypto python3-cryptography python3-dbus\n  python3-dev python3-distutils python3-gi python3-idna python3-keyring\n  python3-keyrings.alt python3-lib2to3 python3-pkg-resources\n  python3-secretstorage python3-setuptools python3-six python3-wheel\n  python3-xdg python3.6-dev shared-mime-info xdg-user-dirs\nUse 'apt autoremove' to remove them.\nThe following NEW packages will be installed:\n  curl\n0 upgraded, 1 newly installed, 0 to remove and 0 not upgraded.\nNeed to get 159 kB of archives.\nAfter this operation, 397 kB of additional disk space will be used.\nGet:1 http://archive.ubuntu.com/ubuntu bionic-updates/main amd64 curl amd64 7.58.0-2ubuntu3.21 [159 kB]\n\u001b[91mshell-init: error retrieving current directory: getcwd: cannot access parent directories: No such file or directory\n\u001b[0m\u001b[91mdebconf: delaying package configuration, since apt-utils is not installed\n\u001b[0mFetched 159 kB in 1s (247 kB/s)\nSelecting previously unselected package curl.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 23484 files and directories currently installed.)\r\nPreparing to unpack .../curl_7.58.0-2ubuntu3.21_amd64.deb ...\r\nUnpacking curl (7.58.0-2ubuntu3.21) ...\r\nSetting up curl (7.58.0-2ubuntu3.21) ...\r\nRemoving intermediate container c7795b60e8b6\n ---> b9f2fba273af\nStep 6/8 : USER usersetup\n ---> Running in 47b5fe731954\nRemoving intermediate container 47b5fe731954\n ---> 9b812cb15fbc\nStep 7/8 : ENV LANG=en_US.UTF-8\n ---> Running in 8127a70ec1a4\nRemoving intermediate container 8127a70ec1a4\n ---> a8167de386a1\nStep 8/8 : ENTRYPOINT [\"/usr/bin/dumb-init\", \"--\", \"/usr/bin/esdk-entry.py\"]\n ---> Running in d7962e12a900\nRemoving intermediate container d7962e12a900\n ---> a9832ea820db\nSuccessfully built a9832ea820db\nSuccessfully tagged extsdk-container:latest\n","stderr":"","imageSize":934624112},"endTime":1672630302050}