{"repository":"https://github.com/chapsuk/miga","dockerfilePath":"Dockerfile","startTime":1672594828657,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/chapsuk/miga'...\n","error":null,"commit":"cf8f8a13c4ffa074c2884c2710363cf802439ddd"},"originalBuild":{"startTimestamp":1672594829942,"endTimestamp":1672594868304,"error":null,"stdout":"Sending build context to Docker daemon  13.26MB\r\r\nStep 1/8 : FROM golang:1.16.3-alpine3.13\n1.16.3-alpine3.13: Pulling from library/golang\n540db60ca938: Pulling fs layer\nadcc1eea9eea: Pulling fs layer\n4c4ab2625f07: Pulling fs layer\n0510c868ecb4: Pulling fs layer\nafea3b2eda06: Pulling fs layer\n0510c868ecb4: Waiting\n4c4ab2625f07: Verifying Checksum\n4c4ab2625f07: Download complete\nadcc1eea9eea: Verifying Checksum\nadcc1eea9eea: Download complete\n540db60ca938: Verifying Checksum\n540db60ca938: Download complete\n540db60ca938: Pull complete\nadcc1eea9eea: Pull complete\nafea3b2eda06: Verifying Checksum\nafea3b2eda06: Download complete\n4c4ab2625f07: Pull complete\n0510c868ecb4: Verifying Checksum\n0510c868ecb4: Download complete\n0510c868ecb4: Pull complete\nafea3b2eda06: Pull complete\nDigest: sha256:49c07aa83790aca732250c2258b5912659df31b6bfa2ab428661bc66833769e1\nStatus: Downloaded newer image for golang:1.16.3-alpine3.13\n ---> 270727b8fd0f\nStep 2/8 : RUN apk add make\n ---> Running in ed9817e7686b\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.13/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.13/community/x86_64/APKINDEX.tar.gz\n(1/1) Installing make (4.3-r0)\nExecuting busybox-1.32.1-r6.trigger\nOK: 7 MiB in 16 packages\nRemoving intermediate container ed9817e7686b\n ---> 88633f460d21\nStep 3/8 : ADD . /go/src/miga\n ---> 6fedaf11bcbc\nStep 4/8 : WORKDIR /go/src/miga\n ---> Running in 8ff0ded7dada\nRemoving intermediate container 8ff0ded7dada\n ---> ece595b4a6f4\nStep 5/8 : RUN make build\n ---> Running in 18a92f681c28\nCGO_ENABLED=0 go build -v -o bin/miga -ldflags \"-w -v -extldflags \\\"-static\\\" -X main.Version=v0.9.1\" main.go\n\u001b[91mgithub.com/ClickHouse/clickhouse-go/lib/protocol\n\u001b[0m\u001b[91mgithub.com/lib/pq/oid\n\u001b[0m\u001b[91mgithub.com/ClickHouse/clickhouse-go/lib/leakypool\n\u001b[0m\u001b[91mgolang.org/x/sys/internal/unsafeheader\n\u001b[0m\u001b[91mgithub.com/hashicorp/hcl/hcl/strconv\n\u001b[0m\u001b[91mgithub.com/ClickHouse/clickhouse-go/lib/lz4\ngithub.com/vertica/vertica-sql-go/parse\n\u001b[0m\u001b[91mgolang.org/x/crypto/pbkdf2\n\u001b[0m\u001b[91mgolang.org/x/text/transform\n\u001b[0m\u001b[91mgo.uber.org/zap/buffer\n\u001b[0m\u001b[91mgithub.com/hashicorp/errwrap\n\u001b[0m\u001b[91mgithub.com/ClickHouse/clickhouse-go/lib/cityhash102\n\u001b[0m\u001b[91mgithub.com/jinzhu/inflection\n\u001b[0m\u001b[91mgo.uber.org/atomic\n\u001b[0m\u001b[91mgithub.com/ClickHouse/clickhouse-go/lib/writebuffer\n\u001b[0m\u001b[91mgo.uber.org/zap/internal/exit\n\u001b[0m\u001b[91mgithub.com/vertica/vertica-sql-go/logger\n\u001b[0m\u001b[91mgithub.com/pkg/errors\n\u001b[0m\u001b[91mgo.uber.org/zap/internal/color\n\u001b[0m\u001b[91mos/user\ngithub.com/ClickHouse/clickhouse-go/lib/types\ngithub.com/golang-migrate/migrate/v4/database\ngithub.com/spf13/afero/mem\n\u001b[0m\u001b[91mgolang.org/x/sys/unix\n\u001b[0m\u001b[91mgithub.com/go-pg/pg/internal\n\u001b[0m\u001b[91mgithub.com/pelletier/go-toml\ngithub.com/golang-migrate/migrate/v4/source\n\u001b[0m\u001b[91mgithub.com/vertica/vertica-sql-go/common\n\u001b[0m\u001b[91mgithub.com/spf13/jwalterweatherman\n\u001b[0m\u001b[91mgithub.com/hashicorp/hcl/hcl/token\n\u001b[0m\u001b[91mnet\n\u001b[0m\u001b[91mgopkg.in/yaml.v2\n\u001b[0m\u001b[91mgopkg.in/urfave/cli.v2\n\u001b[0m\u001b[91mgithub.com/spf13/cast\n\u001b[0m\u001b[91mgo.uber.org/zap/internal/bufferpool\n\u001b[0m\u001b[91mgithub.com/hashicorp/go-multierror\n\u001b[0m\u001b[91mgithub.com/vertica/vertica-sql-go/msgs\n\u001b[0m\u001b[91mgithub.com/ClickHouse/clickhouse-go/lib/binary\n\u001b[0m\u001b[91mgithub.com/hashicorp/hcl/hcl/ast\ngithub.com/hashicorp/hcl/hcl/scanner\n\u001b[0m\u001b[91mgithub.com/hashicorp/hcl/json/token\n\u001b[0m\u001b[91mgithub.com/golang-migrate/migrate/v4/source/file\n\u001b[0m\u001b[91mgithub.com/golang-migrate/migrate/v4\n\u001b[0m\u001b[91mgithub.com/pressly/goose\n\u001b[0m\u001b[91mgo.uber.org/multierr\n\u001b[0m\u001b[91mgolang.org/x/text/unicode/norm\ngithub.com/go-pg/pg/internal/parser\n\u001b[0m\u001b[91mgithub.com/hashicorp/hcl/json/scanner\n\u001b[0m\u001b[91mgo.uber.org/zap/zapcore\n\u001b[0m\u001b[91mgithub.com/go-pg/pg/internal/tag\n\u001b[0m\u001b[91mgithub.com/hashicorp/hcl/json/parser\n\u001b[0m\u001b[91mgithub.com/hashicorp/hcl/hcl/parser\n\u001b[0m\u001b[91mgithub.com/vertica/vertica-sql-go/rowcache\n\u001b[0m\u001b[91mgithub.com/hashicorp/hcl/hcl/printer\ngithub.com/hashicorp/hcl\n\u001b[0m\u001b[91mgithub.com/fsnotify/fsnotify\n\u001b[0m\u001b[91mvendor/golang.org/x/net/http/httpproxy\n\u001b[0m\u001b[91mgithub.com/mitchellh/mapstructure\n\u001b[0m\u001b[91mgithub.com/go-pg/pg/internal/pool\n\u001b[0m\u001b[91mnet/textproto\n\u001b[0m\u001b[91mcrypto/x509\n\u001b[0m\u001b[91mgithub.com/go-pg/pg/types\ngithub.com/ClickHouse/clickhouse-go/lib/column\n\u001b[0m\u001b[91mgithub.com/spf13/pflag\n\u001b[0m\u001b[91mvendor/golang.org/x/net/http/httpguts\n\u001b[0m\u001b[91mmime/multipart\n\u001b[0m\u001b[91mgithub.com/go-pg/pg/internal/iszero\n\u001b[0m\u001b[91mgithub.com/ClickHouse/clickhouse-go/lib/data\n\u001b[0m\u001b[91mgithub.com/go-pg/pg/internal/struct_filter\n\u001b[0m\u001b[91mcrypto/tls\n\u001b[0m\u001b[91mgithub.com/go-pg/pg/orm\n\u001b[0m\u001b[91mgithub.com/vertica/vertica-sql-go\nnet/http/httptrace\ngithub.com/ClickHouse/clickhouse-go\nmellium.im/sasl\ngithub.com/go-sql-driver/mysql\ngithub.com/lib/pq\n\u001b[0m\u001b[91mnet/http\n\u001b[0m\u001b[91mgithub.com/go-pg/pg\n\u001b[0m\u001b[91mgithub.com/golang-migrate/migrate/v4/database/postgres\n\u001b[0m\u001b[91mgithub.com/golang-migrate/migrate/v4/database/mysql\n\u001b[0m\u001b[91mgithub.com/im-kulikov/migrate\n\u001b[0m\u001b[91mgithub.com/magiconair/properties\n\u001b[0m\u001b[91mgo.uber.org/zap\n\u001b[0m\u001b[91mgithub.com/spf13/afero\n\u001b[0m\u001b[91mmiga/logger\n\u001b[0m\u001b[91mgithub.com/spf13/viper\n\u001b[0m\u001b[91mmiga/utils\n\u001b[0m\u001b[91mmiga/driver/goose\n\u001b[0m\u001b[91mmiga/driver/migrate\nmiga/driver/impg\n\u001b[0m\u001b[91mmiga/driver\n\u001b[0m\u001b[91mmiga/config\nmiga/converter\n\u001b[0m\u001b[91mmiga/commands\n\u001b[0m\u001b[91mmiga/commands/all\n\u001b[0m\u001b[91mmiga/commands/migrate\n\u001b[0m\u001b[91mmiga/commands/seed\n\u001b[0m\u001b[91mcommand-line-arguments\n\u001b[0m\u001b[91m# command-line-arguments\nHEADER = -H5 -T0x401000 -R0x1000\n269599 symbols, 128855 reachable\n\t1 package symbols, 102876 hashed symbols, 157869 non-package symbols, 8853 external symbols\n428468 liveness data\n\u001b[0mRemoving intermediate container 18a92f681c28\n ---> 04d8b236ec4d\nStep 6/8 : FROM scratch\n ---> \nStep 7/8 : COPY --from=0 /go/src/miga/bin/miga /miga\n ---> df4ff8477c29\nStep 8/8 : ENTRYPOINT [ \"/miga\" ]\n ---> Running in 55474f33aa23\nRemoving intermediate container 55474f33aa23\n ---> e0f5908cdf89\nSuccessfully built e0f5908cdf89\nSuccessfully tagged miga:latest\n","stderr":"","imageSize":10319044},"repair":{"violations":[{"name":"apkAddUseNoCache","position":{"start":1,"end":1,"columnStart":4,"columnEnd":16}}],"repairedDockerfile":"FROM golang:1.16.3-alpine3.13\nRUN apk add --no-cache make\nADD . /go/src/miga\nWORKDIR /go/src/miga\nRUN make build\n\nFROM scratch\nCOPY --from=0 /go/src/miga/bin/miga /miga\nENTRYPOINT [ \"/miga\" ]\n"},"repairedBuild":{"startTimestamp":1672594869040,"endTimestamp":1672594886963,"error":null,"stdout":"Sending build context to Docker daemon  13.26MB\r\r\nStep 1/8 : FROM golang:1.16.3-alpine3.13\n ---> 270727b8fd0f\nStep 2/8 : RUN apk add --no-cache make\n ---> Running in 5f7fa13284cf\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.13/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.13/community/x86_64/APKINDEX.tar.gz\n(1/1) Installing make (4.3-r0)\nExecuting busybox-1.32.1-r6.trigger\nOK: 7 MiB in 16 packages\nRemoving intermediate container 5f7fa13284cf\n ---> 252fe7bcd054\nStep 3/8 : ADD . /go/src/miga\n ---> a0869d0d2392\nStep 4/8 : WORKDIR /go/src/miga\n ---> Running in 8aa3aede955f\nRemoving intermediate container 8aa3aede955f\n ---> 506f3ddb4450\nStep 5/8 : RUN make build\n ---> Running in 7f65a94c9d03\nCGO_ENABLED=0 go build -v -o bin/miga -ldflags \"-w -v -extldflags \\\"-static\\\" -X main.Version=v0.9.1\" main.go\n\u001b[91mgithub.com/ClickHouse/clickhouse-go/lib/leakypool\n\u001b[0m\u001b[91mgithub.com/ClickHouse/clickhouse-go/lib/protocol\n\u001b[0m\u001b[91mgithub.com/lib/pq/oid\n\u001b[0m\u001b[91mgolang.org/x/sys/internal/unsafeheader\n\u001b[0m\u001b[91mgithub.com/hashicorp/hcl/hcl/strconv\n\u001b[0m\u001b[91mgithub.com/ClickHouse/clickhouse-go/lib/writebuffer\n\u001b[0m\u001b[91mgithub.com/ClickHouse/clickhouse-go/lib/lz4\n\u001b[0m\u001b[91mgolang.org/x/crypto/pbkdf2\n\u001b[0m\u001b[91mgolang.org/x/text/transform\n\u001b[0m\u001b[91mgithub.com/vertica/vertica-sql-go/parse\n\u001b[0m\u001b[91mgo.uber.org/zap/buffer\n\u001b[0m\u001b[91mgithub.com/hashicorp/errwrap\n\u001b[0m\u001b[91mgithub.com/ClickHouse/clickhouse-go/lib/cityhash102\ngithub.com/jinzhu/inflection\ngo.uber.org/atomic\n\u001b[0m\u001b[91mgo.uber.org/zap/internal/exit\n\u001b[0m\u001b[91mgo.uber.org/zap/internal/color\ngithub.com/pkg/errors\n\u001b[0m\u001b[91mos/user\n\u001b[0m\u001b[91mgithub.com/vertica/vertica-sql-go/common\ngithub.com/vertica/vertica-sql-go/logger\n\u001b[0m\u001b[91mgithub.com/ClickHouse/clickhouse-go/lib/types\n\u001b[0m\u001b[91mgithub.com/golang-migrate/migrate/v4/source\n\u001b[0m\u001b[91mgithub.com/spf13/afero/mem\ngithub.com/spf13/jwalterweatherman\n\u001b[0m\u001b[91mgolang.org/x/sys/unix\n\u001b[0m\u001b[91mgopkg.in/yaml.v2\ngithub.com/spf13/cast\n\u001b[0m\u001b[91mgithub.com/golang-migrate/migrate/v4/database\n\u001b[0m\u001b[91mgithub.com/go-pg/pg/internal\n\u001b[0m\u001b[91mgopkg.in/urfave/cli.v2\n\u001b[0m\u001b[91mgithub.com/pelletier/go-toml\n\u001b[0m\u001b[91mnet\n\u001b[0m\u001b[91mgithub.com/hashicorp/hcl/hcl/token\n\u001b[0m\u001b[91mgithub.com/hashicorp/go-multierror\n\u001b[0m\u001b[91mgo.uber.org/zap/internal/bufferpool\n\u001b[0m\u001b[91mgithub.com/vertica/vertica-sql-go/msgs\n\u001b[0m\u001b[91mgolang.org/x/text/unicode/norm\n\u001b[0m\u001b[91mgithub.com/pressly/goose\n\u001b[0m\u001b[91mgo.uber.org/multierr\n\u001b[0m\u001b[91mgithub.com/golang-migrate/migrate/v4/source/file\n\u001b[0m\u001b[91mgithub.com/ClickHouse/clickhouse-go/lib/binary\n\u001b[0m\u001b[91mgithub.com/golang-migrate/migrate/v4\n\u001b[0m\u001b[91mgithub.com/hashicorp/hcl/hcl/ast\n\u001b[0m\u001b[91mgithub.com/hashicorp/hcl/json/token\n\u001b[0m\u001b[91mgithub.com/hashicorp/hcl/hcl/scanner\n\u001b[0m\u001b[91mgithub.com/go-pg/pg/internal/parser\n\u001b[0m\u001b[91mgo.uber.org/zap/zapcore\n\u001b[0m\u001b[91mgithub.com/hashicorp/hcl/json/scanner\n\u001b[0m\u001b[91mgithub.com/go-pg/pg/internal/tag\n\u001b[0m\u001b[91mgithub.com/hashicorp/hcl/hcl/parser\n\u001b[0m\u001b[91mgithub.com/hashicorp/hcl/json/parser\n\u001b[0m\u001b[91mgithub.com/vertica/vertica-sql-go/rowcache\n\u001b[0m\u001b[91mgithub.com/hashicorp/hcl/hcl/printer\n\u001b[0m\u001b[91mgithub.com/hashicorp/hcl\n\u001b[0m\u001b[91mgithub.com/fsnotify/fsnotify\n\u001b[0m\u001b[91mvendor/golang.org/x/net/http/httpproxy\n\u001b[0m\u001b[91mgithub.com/go-pg/pg/internal/pool\n\u001b[0m\u001b[91mcrypto/x509\nnet/textproto\n\u001b[0m\u001b[91mgithub.com/mitchellh/mapstructure\n\u001b[0m\u001b[91mgithub.com/go-pg/pg/types\n\u001b[0m\u001b[91mgithub.com/ClickHouse/clickhouse-go/lib/column\n\u001b[0m\u001b[91mgithub.com/spf13/pflag\n\u001b[0m\u001b[91mvendor/golang.org/x/net/http/httpguts\n\u001b[0m\u001b[91mmime/multipart\n\u001b[0m\u001b[91mgithub.com/go-pg/pg/internal/iszero\n\u001b[0m\u001b[91mgithub.com/ClickHouse/clickhouse-go/lib/data\n\u001b[0m\u001b[91mcrypto/tls\n\u001b[0m\u001b[91mgithub.com/go-pg/pg/internal/struct_filter\n\u001b[0m\u001b[91mgithub.com/go-pg/pg/orm\n\u001b[0m\u001b[91mnet/http/httptrace\n\u001b[0m\u001b[91mmellium.im/sasl\n\u001b[0m\u001b[91mgithub.com/vertica/vertica-sql-go\n\u001b[0m\u001b[91mgithub.com/ClickHouse/clickhouse-go\n\u001b[0m\u001b[91mgithub.com/lib/pq\n\u001b[0m\u001b[91mgithub.com/go-sql-driver/mysql\n\u001b[0m\u001b[91mnet/http\n\u001b[0m\u001b[91mgithub.com/go-pg/pg\n\u001b[0m\u001b[91mgithub.com/golang-migrate/migrate/v4/database/mysql\n\u001b[0m\u001b[91mgithub.com/golang-migrate/migrate/v4/database/postgres\n\u001b[0m\u001b[91mgithub.com/im-kulikov/migrate\n\u001b[0m\u001b[91mgo.uber.org/zap\n\u001b[0m\u001b[91mgithub.com/magiconair/properties\n\u001b[0m\u001b[91mgithub.com/spf13/afero\n\u001b[0m\u001b[91mgithub.com/spf13/viper\n\u001b[0m\u001b[91mmiga/logger\n\u001b[0m\u001b[91mmiga/utils\n\u001b[0m\u001b[91mmiga/driver/goose\n\u001b[0m\u001b[91mmiga/driver/impg\n\u001b[0m\u001b[91mmiga/driver/migrate\n\u001b[0m\u001b[91mmiga/driver\n\u001b[0m\u001b[91mmiga/config\nmiga/converter\n\u001b[0m\u001b[91mmiga/commands\n\u001b[0m\u001b[91mmiga/commands/all\n\u001b[0m\u001b[91mmiga/commands/migrate\nmiga/commands/seed\n\u001b[0m\u001b[91mcommand-line-arguments\n\u001b[0m\u001b[91m# command-line-arguments\nHEADER = -H5 -T0x401000 -R0x1000\n269599 symbols, 128855 reachable\n\t1 package symbols, 102876 hashed symbols, 157869 non-package symbols, 8853 external symbols\n428468 liveness data\n\u001b[0mRemoving intermediate container 7f65a94c9d03\n ---> 255fd2982574\nStep 6/8 : FROM scratch\n ---> \nStep 7/8 : COPY --from=0 /go/src/miga/bin/miga /miga\n ---> 6d9f942b5b21\nStep 8/8 : ENTRYPOINT [ \"/miga\" ]\n ---> Running in 235595135ba0\nRemoving intermediate container 235595135ba0\n ---> de4e2fbbc21c\nSuccessfully built de4e2fbbc21c\nSuccessfully tagged miga:latest\n","stderr":"","imageSize":10319044},"endTime":1672594887322}