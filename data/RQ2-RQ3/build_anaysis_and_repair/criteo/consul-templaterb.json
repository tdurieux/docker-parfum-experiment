{"repository":"https://github.com/criteo/consul-templaterb","dockerfilePath":"Dockerfile","startTime":1672003097758,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/criteo/consul-templaterb'...\n","error":null,"commit":"0fe8a7967c548acfa1a2316fdb920b267cb0f0ee"},"originalBuild":{"startTimestamp":1672003099111,"endTimestamp":1672003351354,"error":null,"stdout":"Sending build context to Docker daemon  1.736MB\r\r\nStep 1/10 : FROM ruby:2.5\n2.5: Pulling from library/ruby\n0bc3020d05f1: Pulling fs layer\na110e5871660: Pulling fs layer\n83d3c0fa203a: Pulling fs layer\na8fd09c11b02: Pulling fs layer\n14feb89c4a52: Pulling fs layer\n958d2475f181: Pulling fs layer\nba6c4f28fec1: Pulling fs layer\n83d3c0fa203a: Waiting\na8fd09c11b02: Waiting\na110e5871660: Waiting\n958d2475f181: Waiting\n14feb89c4a52: Waiting\n757d13b54b5e: Pulling fs layer\n757d13b54b5e: Waiting\na110e5871660: Verifying Checksum\na110e5871660: Download complete\n0bc3020d05f1: Verifying Checksum\n0bc3020d05f1: Download complete\n83d3c0fa203a: Verifying Checksum\n83d3c0fa203a: Download complete\na8fd09c11b02: Verifying Checksum\na8fd09c11b02: Download complete\n958d2475f181: Verifying Checksum\n958d2475f181: Download complete\n757d13b54b5e: Verifying Checksum\n757d13b54b5e: Download complete\n0bc3020d05f1: Pull complete\nba6c4f28fec1: Verifying Checksum\nba6c4f28fec1: Download complete\na110e5871660: Pull complete\n83d3c0fa203a: Pull complete\n14feb89c4a52: Verifying Checksum\n14feb89c4a52: Download complete\na8fd09c11b02: Pull complete\n14feb89c4a52: Pull complete\n958d2475f181: Pull complete\nba6c4f28fec1: Pull complete\n757d13b54b5e: Pull complete\nDigest: sha256:ecc3e4f5da13d881a415c9692bb52d2b85b090f38f4ad99ae94f932b3598444b\nStatus: Downloaded newer image for ruby:2.5\n ---> 27d049ce98db\nStep 2/10 : WORKDIR /usr/src/app\n ---> Running in ca4ace29daa5\nRemoving intermediate container ca4ace29daa5\n ---> 323dee512654\nStep 3/10 : COPY . .\n ---> 82b108221d7d\nStep 4/10 : RUN apt-get update -qq && apt-get install -y build-essential nginx-light\n ---> Running in 590e97bf4e91\nReading package lists...\nBuilding dependency tree...\nReading state information...\nThe following additional packages will be installed:\n  libnginx-mod-http-echo nginx-common\nSuggested packages:\n  fcgiwrap nginx-doc ssl-cert\nThe following NEW packages will be installed:\n  build-essential libnginx-mod-http-echo nginx-common nginx-light\n0 upgraded, 4 newly installed, 0 to remove and 120 not upgraded.\nNeed to get 712 kB of archives.\nAfter this operation, 1712 kB of additional disk space will be used.\nGet:1 http://deb.debian.org/debian buster/main amd64 build-essential amd64 12.6 [7576 B]\nGet:2 http://security.debian.org/debian-security buster/updates/main amd64 nginx-common all 1.14.2-2+deb10u5 [121 kB]\nGet:3 http://security.debian.org/debian-security buster/updates/main amd64 libnginx-mod-http-echo amd64 1.14.2-2+deb10u5 [105 kB]\nGet:4 http://security.debian.org/debian-security buster/updates/main amd64 nginx-light amd64 1.14.2-2+deb10u5 [478 kB]\n\u001b[91mdebconf: delaying package configuration, since apt-utils is not installed\n\u001b[0mFetched 712 kB in 0s (31.7 MB/s)\nSelecting previously unselected package build-essential.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 23987 files and directories currently installed.)\r\nPreparing to unpack .../build-essential_12.6_amd64.deb ...\r\nUnpacking build-essential (12.6) ...\r\nSelecting previously unselected package nginx-common.\r\nPreparing to unpack .../nginx-common_1.14.2-2+deb10u5_all.deb ...\r\nUnpacking nginx-common (1.14.2-2+deb10u5) ...\r\nSelecting previously unselected package libnginx-mod-http-echo.\r\nPreparing to unpack .../libnginx-mod-http-echo_1.14.2-2+deb10u5_amd64.deb ...\r\nUnpacking libnginx-mod-http-echo (1.14.2-2+deb10u5) ...\r\nSelecting previously unselected package nginx-light.\r\nPreparing to unpack .../nginx-light_1.14.2-2+deb10u5_amd64.deb ...\r\nUnpacking nginx-light (1.14.2-2+deb10u5) ...\r\nSetting up nginx-common (1.14.2-2+deb10u5) ...\r\ndebconf: unable to initialize frontend: Dialog\r\ndebconf: (TERM is not set, so the dialog frontend is not usable.)\r\ndebconf: falling back to frontend: Readline\r\nSetting up libnginx-mod-http-echo (1.14.2-2+deb10u5) ...\r\nSetting up build-essential (12.6) ...\r\nSetting up nginx-light (1.14.2-2+deb10u5) ...\r\ninvoke-rc.d: could not determine current runlevel\r\ninvoke-rc.d: policy-rc.d denied execution of start.\r\nRemoving intermediate container 590e97bf4e91\n ---> 986ac135b7ce\nStep 5/10 : RUN bundle install\n ---> Running in 19513c8676f3\nFetching gem metadata from https://rubygems.org/...........\nFetching gem metadata from https://rubygems.org/.\nResolving dependencies...\nUsing rake 12.3.3\nFetching concurrent-ruby 1.1.10\nInstalling concurrent-ruby 1.1.10\nFetching i18n 1.12.0\nInstalling i18n 1.12.0\nFetching minitest 5.15.0\nInstalling minitest 5.15.0\nFetching tzinfo 2.0.5\nInstalling tzinfo 2.0.5\nFetching zeitwerk 2.6.6\nInstalling zeitwerk 2.6.6\nFetching activesupport 6.1.7\nInstalling activesupport 6.1.7\nFetching builder 3.2.4\nInstalling builder 3.2.4\nFetching erubi 1.12.0\nInstalling erubi 1.12.0\nFetching mini_portile2 2.6.1\nInstalling mini_portile2 2.6.1\nFetching racc 1.6.2\nInstalling racc 1.6.2 with native extensions\nFetching nokogiri 1.12.5 (x86_64-linux)\nInstalling nokogiri 1.12.5 (x86_64-linux)\nFetching rails-dom-testing 2.0.3\nInstalling rails-dom-testing 2.0.3\nFetching crass 1.0.6\nInstalling crass 1.0.6\nFetching loofah 2.19.1\nInstalling loofah 2.19.1\nFetching rails-html-sanitizer 1.4.4\nInstalling rails-html-sanitizer 1.4.4\nFetching actionview 6.1.7\nInstalling actionview 6.1.7\nFetching rack 2.2.4\nInstalling rack 2.2.4\nFetching rack-test 2.0.2\nInstalling rack-test 2.0.2\nFetching actionpack 6.1.7\nInstalling actionpack 6.1.7\nFetching public_suffix 4.0.7\nInstalling public_suffix 4.0.7\nFetching addressable 2.8.1\nInstalling addressable 2.8.1\nFetching ast 2.4.2\nInstalling ast 2.4.2\nFetching execjs 2.8.1\nInstalling execjs 2.8.1\nFetching autoprefixer-rails 10.4.7.0\nInstalling autoprefixer-rails 10.4.7.0\nFetching popper_js 1.16.1\nInstalling popper_js 1.16.1\nFetching method_source 1.0.0\nInstalling method_source 1.0.0\nFetching thor 1.2.1\nInstalling thor 1.2.1\nFetching railties 6.1.7\nInstalling railties 6.1.7\nFetching ffi 1.15.5\nInstalling ffi 1.15.5 with native extensions\nFetching sassc 2.4.0\nInstalling sassc 2.4.0 with native extensions\nFetching sprockets 4.2.0\nInstalling sprockets 4.2.0\nFetching sprockets-rails 3.4.2\nInstalling sprockets-rails 3.4.2\nFetching tilt 2.0.11\nInstalling tilt 2.0.11\nFetching sassc-rails 2.1.2\nInstalling sassc-rails 2.1.2\nFetching bootstrap 4.6.2\nInstalling bootstrap 4.6.2\nUsing bundler 1.17.3\nFetching cookiejar 0.3.3\nInstalling cookiejar 0.3.3\nFetching eventmachine 1.2.7\nInstalling eventmachine 1.2.7 with native extensions\nFetching em-socksify 0.3.2\nInstalling em-socksify 0.3.2\nFetching http_parser.rb 0.8.0\nInstalling http_parser.rb 0.8.0 with native extensions\nFetching em-http-request 1.1.7\nInstalling em-http-request 1.1.7\nFetching parallel 1.22.1\nInstalling parallel 1.22.1\nUsing consul-templaterb 1.33.2 from source at `.`\nFetching rexml 3.2.5\nInstalling rexml 3.2.5\nFetching crack 0.4.5\nInstalling crack 0.4.5\nFetching diff-lcs 1.5.0\nInstalling diff-lcs 1.5.0\nFetching hashdiff 1.0.1\nInstalling hashdiff 1.0.1\nFetching jaro_winkler 1.5.4\nInstalling jaro_winkler 1.5.4 with native extensions\nFetching parser 3.1.3.0\nInstalling parser 3.1.3.0\nFetching rainbow 3.1.1\nInstalling rainbow 3.1.1\nFetching rspec-support 3.12.0\nInstalling rspec-support 3.12.0\nFetching rspec-core 3.12.0\nInstalling rspec-core 3.12.0\nFetching rspec-expectations 3.12.1\nInstalling rspec-expectations 3.12.1\nFetching rspec-mocks 3.12.1\nInstalling rspec-mocks 3.12.1\nFetching rspec 3.12.0\nInstalling rspec 3.12.0\nFetching rspec_junit_formatter 0.4.1\nInstalling rspec_junit_formatter 0.4.1\nFetching ruby-progressbar 1.11.0\nInstalling ruby-progressbar 1.11.0\nFetching unicode-display_width 1.6.1\nInstalling unicode-display_width 1.6.1\nFetching rubocop 0.80.1\nInstalling rubocop 0.80.1\nFetching rubocop-junit-formatter 0.1.4\nInstalling rubocop-junit-formatter 0.1.4\nFetching webmock 2.3.2\nInstalling webmock 2.3.2\nBundle complete! 9 Gemfile dependencies, 62 gems now installed.\nUse `bundle info [gemname]` to see where a bundled gem is installed.\nRemoving intermediate container 19513c8676f3\n ---> a3986bc13d83\nStep 6/10 : EXPOSE 80\n ---> Running in 5581cae21da3\nRemoving intermediate container 5581cae21da3\n ---> 98598765e6bb\nStep 7/10 : ENV LANG C.UTF-8\n ---> Running in 860a46d5755c\nRemoving intermediate container 860a46d5755c\n ---> 7646531c87d1\nStep 8/10 : ENV CONSUL_HTTP_ADDR http://consul-relay.service.consul.preprod.crto.in:8500\n ---> Running in 727ef36ddf69\nRemoving intermediate container 727ef36ddf69\n ---> ca44e0a33d17\nStep 9/10 : ENTRYPOINT [\"/usr/local/bin/bundle\", \"exec\", \"consul-templaterb\"]\n ---> Running in c5def108a3c8\nRemoving intermediate container c5def108a3c8\n ---> de86c6cc8a8f\nStep 10/10 : CMD [\"--template\", \"samples/consul-ui/consul-keys-ui.html.erb\", \"--template\", \"samples/consul-ui/decorators.js.erb\", \"--template\", \"samples/consul-ui/consul-nodes-ui.html.erb\", \"--template\", \"samples/consul-ui/consul-services-ui.html.erb\", \"--template\", \"samples/consul-ui/consul-timeline-ui.html.erb\", \"--template\", \"samples/consul-ui/consul_keys.json.erb\", \"--template\", \"samples/consul-ui/consul_nodes.json.erb\", \"--template\", \"samples/consul-ui/consul_services.json.erb\", \"--template\", \"samples/consul-ui/timeline.json.erb\", \"--template\", \"samples/consul-ui/consul-services-ui.html.erb:samples/consul-ui/index.html:touch samples/consul-ui/ready\", \"--sig-reload=NONE\", \"--exec=nginx -c /usr/src/app/docker-nginx-conf/nginx.conf\"]\n ---> Running in 070e47bb71b3\nRemoving intermediate container 070e47bb71b3\n ---> 7be1d62d6b9b\nSuccessfully built 7be1d62d6b9b\nSuccessfully tagged consul-templaterb:latest\n","stderr":"","imageSize":1165646453},"repair":{"violations":[],"repairedDockerfile":"FROM ruby:2.5\n\nWORKDIR /usr/src/app\nCOPY . .\n\nRUN apt-get update -qq && apt-get install -y build-essential nginx-light\n\nRUN bundle install\n\nEXPOSE 80\nENV LANG C.UTF-8\nENV CONSUL_HTTP_ADDR http://consul-relay.service.consul.preprod.crto.in:8500\n\nENTRYPOINT [\"/usr/local/bin/bundle\", \"exec\", \"consul-templaterb\"]\nCMD [\"--template\", \"samples/consul-ui/consul-keys-ui.html.erb\", \"--template\", \"samples/consul-ui/decorators.js.erb\", \"--template\", \"samples/consul-ui/consul-nodes-ui.html.erb\", \"--template\", \"samples/consul-ui/consul-services-ui.html.erb\", \"--template\", \"samples/consul-ui/consul-timeline-ui.html.erb\", \"--template\", \"samples/consul-ui/consul_keys.json.erb\", \"--template\", \"samples/consul-ui/consul_nodes.json.erb\", \"--template\", \"samples/consul-ui/consul_services.json.erb\", \"--template\", \"samples/consul-ui/timeline.json.erb\", \"--template\", \"samples/consul-ui/consul-services-ui.html.erb:samples/consul-ui/index.html:touch samples/consul-ui/ready\", \"--sig-reload=NONE\", \"--exec=nginx -c /usr/src/app/docker-nginx-conf/nginx.conf\"]\n"},"endTime":1672003351743}