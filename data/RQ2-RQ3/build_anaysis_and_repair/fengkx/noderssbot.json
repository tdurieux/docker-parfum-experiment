{"repository":"https://github.com/fengkx/noderssbot","dockerfilePath":"Dockerfile","startTime":1672003651216,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/fengkx/noderssbot'...\n","error":null,"commit":"139c81c6c4637b8ea469905b1a98371f8ea36715"},"originalBuild":{"startTimestamp":1672003652111,"endTimestamp":1672003848067,"error":null,"stdout":"Sending build context to Docker daemon  886.8kB\r\r\nStep 1/20 : FROM node:16-alpine as ts-builder\n16-alpine: Pulling from library/node\nc158987b0551: Already exists\ne15b2da73907: Pulling fs layer\n90461d7cfbbe: Pulling fs layer\n06b1a47b9f99: Pulling fs layer\n06b1a47b9f99: Verifying Checksum\n06b1a47b9f99: Download complete\n90461d7cfbbe: Verifying Checksum\n90461d7cfbbe: Download complete\ne15b2da73907: Verifying Checksum\ne15b2da73907: Download complete\ne15b2da73907: Pull complete\n90461d7cfbbe: Pull complete\n06b1a47b9f99: Pull complete\nDigest: sha256:58e4dfcf063f67d71e608c3cace5a0bcf39e9dbab3047b41e20c15c7132d1d46\nStatus: Downloaded newer image for node:16-alpine\n ---> 610c0494e820\nStep 2/20 : WORKDIR /app\n ---> Running in abb400773a11\nRemoving intermediate container abb400773a11\n ---> 3e4ce5ac86a1\nStep 3/20 : COPY . /app\n ---> 1087b460d2f4\nStep 4/20 : RUN npm i -g npm && npm ci --ignore-scripts && npm run build\n ---> Running in 7c105c2968b0\n\nremoved 14 packages, changed 75 packages, and audited 232 packages in 35s\n\n14 packages are looking for funding\n  run `npm fund` for details\n\nfound 0 vulnerabilities\n\u001b[91mnpm\u001b[0m\u001b[91m WARN skipping integrity check for git dependency https://git@github.com/Dexus/pem.git \n\u001b[0m\nadded 916 packages, and audited 917 packages in 30s\n\n128 packages are looking for funding\n  run `npm fund` for details\n\n1 high severity vulnerability\n\nSome issues need review, and may require choosing\na different dependency.\n\nRun `npm audit` for details.\n\n> node_rssbot@0.11.0 build\n> del-cli dist && tsc && node tools/copy-assets.mjs\n\nRemoving intermediate container 7c105c2968b0\n ---> 19ff19f6fb95\nStep 5/20 : FROM node:16-alpine as dep-builder\n ---> 610c0494e820\nStep 6/20 : WORKDIR /app\n ---> Running in 2d4ef2e843e4\nRemoving intermediate container 2d4ef2e843e4\n ---> 8f260c8d2469\nStep 7/20 : COPY package.json package-lock.json /app/\n ---> b606ca471f04\nStep 8/20 : COPY tools /app/tools\n ---> d57468c25b70\nStep 9/20 : RUN apk add --no-cache --update build-base python3\n ---> Running in a5c53ad464f6\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/29) Installing binutils (2.39-r2)\n(2/29) Installing libmagic (5.43-r0)\n(3/29) Installing file (5.43-r0)\n(4/29) Installing libgomp (12.2.1_git20220924-r4)\n(5/29) Installing libatomic (12.2.1_git20220924-r4)\n(6/29) Installing gmp (6.2.1-r2)\n(7/29) Installing isl25 (0.25-r0)\n(8/29) Installing mpfr4 (4.1.0-r0)\n(9/29) Installing mpc1 (1.2.1-r1)\n(10/29) Installing gcc (12.2.1_git20220924-r4)\n(11/29) Installing libstdc++-dev (12.2.1_git20220924-r4)\n(12/29) Installing musl-dev (1.2.3-r4)\n(13/29) Installing libc-dev (0.7.2-r3)\n(14/29) Installing g++ (12.2.1_git20220924-r4)\n(15/29) Installing make (4.3-r1)\n(16/29) Installing fortify-headers (1.1-r1)\n(17/29) Installing patch (2.7.6-r8)\n(18/29) Installing build-base (0.5-r3)\n(19/29) Installing libbz2 (1.0.8-r4)\n(20/29) Installing libexpat (2.5.0-r0)\n(21/29) Installing libffi (3.4.4-r0)\n(22/29) Installing gdbm (1.23-r0)\n(23/29) Installing xz-libs (5.2.9-r0)\n(24/29) Installing mpdecimal (2.5.1-r1)\n(25/29) Installing ncurses-terminfo-base (6.3_p20221119-r0)\n(26/29) Installing ncurses-libs (6.3_p20221119-r0)\n(27/29) Installing readline (8.2.0-r0)\n(28/29) Installing sqlite-libs (3.40.0-r0)\n(29/29) Installing python3 (3.10.9-r1)\nExecuting busybox-1.35.0-r29.trigger\nOK: 295 MiB in 46 packages\nRemoving intermediate container a5c53ad464f6\n ---> b1c006673dc5\nStep 10/20 : COPY --from=ts-builder /app/dist /app/dist\n ---> d48c60f4f9c2\nStep 11/20 : RUN npm i -g npm && npm ci && node tools/minify-docker.js && sh tools/clean-nm.sh\n ---> Running in f52e3a024223\n\nremoved 14 packages, changed 75 packages, and audited 232 packages in 35s\n\n14 packages are looking for funding\n  run `npm fund` for details\n\nfound 0 vulnerabilities\n\u001b[91mnpm WARN skipping integrity check for git dependency https://git@github.com/Dexus/pem.git \n\u001b[0m\nadded 916 packages, and audited 917 packages in 23s\n\n128 packages are looking for funding\n  run `npm fund` for details\n\n1 high severity vulnerability\n\nSome issues need review, and may require choosing\na different dependency.\n\nRun `npm audit` for details.\nRemoving intermediate container f52e3a024223\n ---> c58ff05c8cb3\nStep 12/20 : FROM node:16-alpine as app\n ---> 610c0494e820\nStep 13/20 : WORKDIR /app\n ---> Running in 86a83ff629a5\nRemoving intermediate container 86a83ff629a5\n ---> feb70d244828\nStep 14/20 : ENV NODE_PRODUCTION true\n ---> Running in c07ef04a86fc\nRemoving intermediate container c07ef04a86fc\n ---> 876fbcca56b0\nStep 15/20 : COPY data /app/data\n ---> 14f4228078bf\nStep 16/20 : COPY logs /app/logs\n ---> a6032135d488\nStep 17/20 : COPY package.json /app/package.json\n ---> adef1e7beb2e\nStep 18/20 : COPY --from=ts-builder /app/dist /app/dist\n ---> 62c011fa0f6f\nStep 19/20 : COPY --from=dep-builder /app/node_modules-minimal/node_modules /app/node_modules\n ---> 9692744d71d0\nStep 20/20 : CMD npm run start-docker\n ---> Running in 06a862f34bb2\nRemoving intermediate container 06a862f34bb2\n ---> 83b09782dcb2\nSuccessfully built 83b09782dcb2\nSuccessfully tagged noderssbot:latest\n","stderr":"","imageSize":126437836},"repair":{"violations":[],"repairedDockerfile":"FROM node:16-alpine as ts-builder\nWORKDIR /app\nCOPY . /app\nRUN npm i -g npm && npm ci --ignore-scripts && npm run build\n\nFROM node:16-alpine as dep-builder\nWORKDIR /app\nCOPY package.json package-lock.json /app/\nCOPY tools /app/tools\nRUN apk add --no-cache --update build-base python3\nCOPY --from=ts-builder /app/dist /app/dist\nRUN npm i -g npm && npm ci && node tools/minify-docker.js && sh tools/clean-nm.sh\n\nFROM node:16-alpine as app\nWORKDIR /app\nENV NODE_PRODUCTION true\nCOPY data /app/data\nCOPY logs /app/logs\nCOPY package.json /app/package.json\nCOPY --from=ts-builder /app/dist /app/dist\nCOPY --from=dep-builder /app/node_modules-minimal/node_modules /app/node_modules\nCMD npm run start-docker\n"},"endTime":1672003848408}