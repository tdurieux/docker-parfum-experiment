{"repository":"https://github.com/anontown/server","dockerfilePath":"Dockerfile","startTime":1672555792236,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/anontown/server'...\n","error":null,"commit":"117c8d182f59b382a4c49958a59f11e927b25bde"},"originalBuild":{"startTimestamp":1672555793252,"endTimestamp":1672555888524,"error":null,"stdout":"Sending build context to Docker daemon   1.18MB\r\r\nStep 1/13 : FROM node:10.15.3\n10.15.3: Pulling from library/node\nc5e155d5a1d1: Already exists\n221d80d00ae9: Already exists\n4250b3117dca: Already exists\n3b7ca19181b2: Already exists\n425d7b2a5bcc: Already exists\n69df12c70287: Already exists\nad53476a61f2: Pulling fs layer\n204bb8bac4a1: Pulling fs layer\n204bb8bac4a1: Verifying Checksum\n204bb8bac4a1: Download complete\nad53476a61f2: Verifying Checksum\nad53476a61f2: Download complete\nad53476a61f2: Pull complete\n204bb8bac4a1: Pull complete\nDigest: sha256:c5e919a89352d3ce6a883dde54a5d51dde12229c2d11088593cd1f3efefcc16e\nStatus: Downloaded newer image for node:10.15.3\n ---> 5a401340b79f\nStep 2/13 : ENV HOME=/home/app\n ---> Running in f16c470fecb5\nRemoving intermediate container f16c470fecb5\n ---> 247286028d6c\nStep 3/13 : ENV APP_HOME=$HOME/.anontown\n ---> Running in 5786be972caa\nRemoving intermediate container 5786be972caa\n ---> 470eda621a74\nStep 4/13 : WORKDIR $APP_HOME\n ---> Running in 44d97cbc6a02\nRemoving intermediate container 44d97cbc6a02\n ---> 74dd0ac1bf32\nStep 5/13 : COPY package.json package-lock.json $APP_HOME/\n ---> e82c8905915b\nStep 6/13 : RUN npm i --no-progress\n ---> Running in b802327ea598\n\n> protobufjs@6.8.8 postinstall /home/app/.anontown/node_modules/protobufjs\n> node scripts/postinstall\n\n\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@1.2.7 (node_modules/fsevents):\nnpm WARN \u001b[0m\u001b[91mnotsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.2.7: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91m\n\u001b[0madded 1255 packages from 778 contributors and audited 1330 packages in 17.596s\nfound 570 vulnerabilities (24 low, 130 moderate, 302 high, 114 critical)\n  run `npm audit fix` to fix them, or `npm audit` for details\nRemoving intermediate container b802327ea598\n ---> 520ac538db1f\nStep 7/13 : COPY src/ $APP_HOME/src/\n ---> 21d72f44fd97\nStep 8/13 : COPY tsconfig.json codegen.yml $APP_HOME/\n ---> 1e2349ea2f33\nStep 9/13 : RUN npm run build\n ---> Running in 6d2c13dc4e9f\n\n> @anontown/server@1.0.0 build /home/app/.anontown\n> npm run codegen&&tsc\n\n\n> @anontown/server@1.0.0 codegen /home/app/.anontown\n> gql-gen --config codegen.yml\n\n[06:51:14] Parse configuration [started]\n[06:51:14] Parse configuration [completed]\n[06:51:14] Generate outputs [started]\n[06:51:14] Generate src/generated/graphql.ts [started]\n[06:51:14] Load GraphQL schemas [started]\n[06:51:14] Load GraphQL schemas [completed]\n[06:51:14] Load GraphQL documents [started]\n[06:51:14] Load GraphQL documents [completed]\n[06:51:14] Generate [started]\n[06:51:14] Generate [completed]\n[06:51:14] Generate src/generated/graphql.ts [completed]\n[06:51:14] Generate outputs [completed]\nRemoving intermediate container 6d2c13dc4e9f\n ---> 8720cbe31799\nStep 10/13 : ADD https://raw.githubusercontent.com/vishnubob/wait-for-it/master/wait-for-it.sh $APP_HOME/wait-for-it.sh\n\n ---> 8db02dafa649\nStep 11/13 : RUN chmod +x ./wait-for-it.sh\n ---> Running in f9ae205ced77\nRemoving intermediate container f9ae205ced77\n ---> 8721a78ee6e4\nStep 12/13 : COPY jest.config.js $APP_HOME/\n ---> 1438d2bd10db\nStep 13/13 : CMD if [ \"$AT_MODE\" = \"TEST\" ] ; then echo \"TEST MODE\"&&sleep infinity ; else ./wait-for-it.sh -t 0 $ES_HOST -- npm start ; fi\n ---> Running in 79394d138f4c\nRemoving intermediate container 79394d138f4c\n ---> fcb0933a6f2a\nSuccessfully built fcb0933a6f2a\nSuccessfully tagged server:latest\n","stderr":"","imageSize":1113962477},"repair":{"violations":[{"name":"npmCacheCleanAfterInstall","position":{"start":8,"end":8,"columnStart":4,"columnEnd":23}}],"repairedDockerfile":"FROM node:10.15.3\n\nENV HOME=/home/app\nENV APP_HOME=$HOME/.anontown\n\nWORKDIR $APP_HOME\n\nCOPY package.json package-lock.json $APP_HOME/\nRUN npm i --no-progress\nCOPY src/ $APP_HOME/src/\nCOPY tsconfig.json codegen.yml $APP_HOME/\n\nRUN npm run build\n\nADD https://raw.githubusercontent.com/vishnubob/wait-for-it/master/wait-for-it.sh $APP_HOME/wait-for-it.sh\nRUN chmod +x ./wait-for-it.sh\n\nCOPY jest.config.js $APP_HOME/\n\nCMD if [ \"$AT_MODE\" = \"TEST\" ] ; then echo \"TEST MODE\"&&sleep infinity ; else ./wait-for-it.sh -t 0 $ES_HOST -- npm start ; fi"},"repairedBuild":{"startTimestamp":1672555889956,"endTimestamp":1672556138934,"error":null,"stdout":"Sending build context to Docker daemon   1.18MB\r\r\nStep 1/13 : FROM node:10.15.3\n ---> 5a401340b79f\nStep 2/13 : ENV HOME=/home/app\n ---> Running in 222bc0c2afd9\nRemoving intermediate container 222bc0c2afd9\n ---> 39f0e00d1357\nStep 3/13 : ENV APP_HOME=$HOME/.anontown\n ---> Running in 538e32c3dc31\nRemoving intermediate container 538e32c3dc31\n ---> 03f7f4085911\nStep 4/13 : WORKDIR $APP_HOME\n ---> Running in 6c82870046e7\nRemoving intermediate container 6c82870046e7\n ---> 1f1ab086e5d8\nStep 5/13 : COPY package.json package-lock.json $APP_HOME/\n ---> bcda3f64f088\nStep 6/13 : RUN npm i --no-progress\n ---> Running in 9b86cbc1d160\n\n> protobufjs@6.8.8 postinstall /home/app/.anontown/node_modules/protobufjs\n> node scripts/postinstall\n\n\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@1.2.7 (node_modules/fsevents):\nnpm WARN \u001b[0m\u001b[91mnotsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.2.7: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91m\n\u001b[0madded 1255 packages from 778 contributors and audited 1330 packages in 15.55s\nfound 570 vulnerabilities (24 low, 130 moderate, 302 high, 114 critical)\n  run `npm audit fix` to fix them, or `npm audit` for details\nRemoving intermediate container 9b86cbc1d160\n ---> 9fd7e1a2ccfb\nStep 7/13 : COPY src/ $APP_HOME/src/\n ---> 4f36e3cb9b6e\nStep 8/13 : COPY tsconfig.json codegen.yml $APP_HOME/\n ---> 82da55870804\nStep 9/13 : RUN npm run build\n ---> Running in 0cc99002f89b\n\n> @anontown/server@1.0.0 build /home/app/.anontown\n> npm run codegen&&tsc\n\n\n> @anontown/server@1.0.0 codegen /home/app/.anontown\n> gql-gen --config codegen.yml\n\n[06:52:50] Parse configuration [started]\n[06:52:50] Parse configuration [completed]\n[06:52:50] Generate outputs [started]\n[06:52:50] Generate src/generated/graphql.ts [started]\n[06:52:50] Load GraphQL schemas [started]\n[06:52:50] Load GraphQL schemas [completed]\n[06:52:50] Load GraphQL documents [started]\n[06:52:50] Load GraphQL documents [completed]\n[06:52:50] Generate [started]\n[06:52:50] Generate [completed]\n[06:52:50] Generate src/generated/graphql.ts [completed]\n[06:52:50] Generate outputs [completed]\nRemoving intermediate container 0cc99002f89b\n ---> 1c27966b347e\nStep 10/13 : ADD https://raw.githubusercontent.com/vishnubob/wait-for-it/master/wait-for-it.sh $APP_HOME/wait-for-it.sh\n\n ---> 12b69940305b\nStep 11/13 : RUN chmod +x ./wait-for-it.sh\n ---> Running in 8c7e11514e1a\nRemoving intermediate container 8c7e11514e1a\n ---> bcc5fc0e6f8c\nStep 12/13 : COPY jest.config.js $APP_HOME/\n ---> 3828dad49327\nStep 13/13 : CMD if [ \"$AT_MODE\" = \"TEST\" ] ; then echo \"TEST MODE\"&&sleep infinity ; else ./wait-for-it.sh -t 0 $ES_HOST -- npm start ; fi\n ---> Running in cb1e913a7be3\nRemoving intermediate container cb1e913a7be3\n ---> 364c8e95197c\nSuccessfully built 364c8e95197c\nSuccessfully tagged server:latest\n","stderr":"","imageSize":1113969996},"endTime":1672556145447}