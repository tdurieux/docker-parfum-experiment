{"repository":"https://github.com/barelyhuman/goblin","dockerfilePath":"Dockerfile","startTime":1672280971450,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/barelyhuman/goblin'...\n","error":null,"commit":"197b201e5994b6a303da18a3badeb9883b03a889"},"originalBuild":{"startTimestamp":1672280972288,"endTimestamp":1672281148711,"error":null,"stdout":"Sending build context to Docker daemon    511kB\r\r\nStep 1/16 : FROM node:16-alpine3.15 as website-builder\n16-alpine3.15: Pulling from library/node\n9621f1afde84: Pulling fs layer\n102675dae453: Pulling fs layer\n4a6597b8a3d4: Pulling fs layer\n2c0998f43d9d: Pulling fs layer\n2c0998f43d9d: Waiting\n9621f1afde84: Verifying Checksum\n9621f1afde84: Download complete\n4a6597b8a3d4: Verifying Checksum\n4a6597b8a3d4: Download complete\n2c0998f43d9d: Verifying Checksum\n2c0998f43d9d: Download complete\n102675dae453: Verifying Checksum\n102675dae453: Download complete\n9621f1afde84: Pull complete\n102675dae453: Pull complete\n4a6597b8a3d4: Pull complete\n2c0998f43d9d: Pull complete\nDigest: sha256:ecf74556cdeee48382e555a377ddb12d36161bd33349dc79290f733f763df711\nStatus: Downloaded newer image for node:16-alpine3.15\n ---> 477eb7db0f23\nStep 2/16 : WORKDIR /www\n ---> Running in 70fa16248bbb\nRemoving intermediate container 70fa16248bbb\n ---> 1a2d815c29d9\nStep 3/16 : COPY ./www .\n ---> 6a0dbafe3cc7\nStep 4/16 : RUN npm i -g pnpm\n ---> Running in 81aed89f9201\n\nadded 1 package, and audited 2 packages in 1s\n\n1 package is looking for funding\n  run `npm fund` for details\n\nfound 0 vulnerabilities\n\u001b[91mnpm\u001b[0m\u001b[91m notice\u001b[0m\u001b[91m \n\u001b[0m\u001b[91mnpm\u001b[0m\u001b[91m notice\u001b[0m\u001b[91m New major version of npm available! 8.19.2 -> 9.2.0\nnpm\u001b[0m\u001b[91m notice\u001b[0m\u001b[91m Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm notice Run `npm install -g npm@9.2.0` to update!\nnpm \u001b[0m\u001b[91mnotice \n\u001b[0mRemoving intermediate container 81aed89f9201\n ---> e6c5f5c6e51a\nStep 5/16 : RUN pnpm install\n ---> Running in 7130f1f0acf4\nProgress: resolved 1, reused 0, downloaded 0, added 0\nProgress: resolved 9, reused 0, downloaded 8, added 0\nProgress: resolved 11, reused 0, downloaded 11, added 0\nProgress: resolved 12, reused 0, downloaded 12, added 0\n WARN  GET https://registry.npmjs.org/typescript/-/typescript-4.5.4.tgz error (ERR_SOCKET_TIMEOUT). Will retry in 10 seconds. 2 retries left.\nProgress: resolved 13, reused 0, downloaded 12, added 0\nProgress: resolved 88, reused 0, downloaded 77, added 0\nProgress: resolved 133, reused 0, downloaded 130, added 0\nPackages: +152\n++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++\nProgress: resolved 172, reused 0, downloaded 152, added 0\nPackages are hard linked from the content-addressable store to the virtual store.\n  Content-addressable store is at: /root/.local/share/pnpm/store/v3\n  Virtual store is at:             node_modules/.pnpm\n.../node_modules/svelte-preprocess postinstall$ echo \"[svelte-preprocess] Don't forget to install the preprocessors packages that will be used: node-sass/sass, stylus, less, postcss & postcss-load-config, coffeescript, pug, etc...\"\n.../node_modules/svelte-preprocess postinstall: [svelte-preprocess] Don't forget to install the preprocessors packages that will be used: node-sass/sass, stylus, less, postcss & postcss-load-config, coffeescript, pug, etc...\n.../node_modules/svelte-preprocess postinstall: Done\n.../esbuild@0.14.27/node_modules/esbuild postinstall$ node install.js\n.../esbuild@0.14.27/node_modules/esbuild postinstall: Done\nProgress: resolved 172, reused 0, downloaded 152, added 152, done\n\ndevDependencies:\n+ @sveltejs/adapter-static 1.0.0-next.29\n+ @sveltejs/kit 1.0.0-next.301\n+ autoprefixer 10.4.2\n+ postcss 8.4.5\n+ prettier 2.5.1\n+ prettier-plugin-svelte 2.6.0\n+ svelte 3.46.2\n+ svelte-check 2.3.0\n+ svelte-preprocess 4.10.2\n+ tailwind-scrollbar-hide 1.1.7\n+ tailwindcss 3.0.15\n+ tslib 2.3.1\n+ typescript 4.5.4\n\nDone in 1m 15s\nRemoving intermediate container 7130f1f0acf4\n ---> 32457924bc89\nStep 6/16 : RUN pnpm build\n ---> Running in 1955b5ba7a8c\n\n> goblin-site@0.0.0 build /www\n> svelte-kit build\n\nvite v2.8.6 building for production...\ntransforming...\n\u001b[91mBrowserslist: caniuse-lite is outdated. Please run:\n  npx browserslist@latest --update-db\n  Why you should do it regularly: https://github.com/browserslist/browserslist#browsers-data-updating\n\u001b[0m✓ 19 modules transformed.\nrendering chunks...\n.svelte-kit/output/client/_app/manifest.json                               1.17 KiB\n.svelte-kit/output/client/_app/pages/__layout.svelte-52d4b858.js           1.83 KiB / gzip: 0.99 KiB\n.svelte-kit/output/client/_app/error.svelte-9b74cb60.js                    1.56 KiB / gzip: 0.75 KiB\n.svelte-kit/output/client/_app/assets/pages/__layout.svelte-1d47aeb2.css   8.17 KiB / gzip: 2.64 KiB\n.svelte-kit/output/client/_app/chunks/vendor-ee41000f.js                   7.27 KiB / gzip: 2.99 KiB\n.svelte-kit/output/client/_app/pages/index.svelte-bb43fc48.js              30.44 KiB / gzip: 9.05 KiB\n.svelte-kit/output/client/_app/start-86fb6ca5.js                           22.22 KiB / gzip: 8.38 KiB\nvite v2.8.6 building SSR bundle for production...\ntransforming...\n✓ 17 modules transformed.\n\u001b[91mGenerated an empty chunk: \"hooks\"\n\u001b[0mrendering chunks...\n.svelte-kit/output/server/manifest.json                       1.13 KiB\n.svelte-kit/output/server/index.js                            65.61 KiB\n.svelte-kit/output/server/entries/pages/__layout.svelte.js    1.49 KiB\n.svelte-kit/output/server/entries/fallbacks/error.svelte.js   0.72 KiB\n.svelte-kit/output/server/entries/pages/index.svelte.js       14.33 KiB\n.svelte-kit/output/server/chunks/index-23c9ac97.js            2.95 KiB\n.svelte-kit/output/server/chunks/hooks-1c45ba0b.js            0.00 KiB\n\nRun npm run preview to preview your production build locally.\n\n> Using @sveltejs/adapter-static\n  Wrote site to \"build\"\n  ✔ done\nRemoving intermediate container 1955b5ba7a8c\n ---> eada7e352857\nStep 7/16 : FROM golang:1.17\n1.17: Pulling from library/golang\nd836772a1c1f: Pulling fs layer\n66a9e63c657a: Pulling fs layer\nd1989b6e74cf: Pulling fs layer\nc28818711e1e: Pulling fs layer\n9d6246ba248c: Pulling fs layer\n21d43f0d73c2: Pulling fs layer\nd8a1c5873f40: Pulling fs layer\n9d6246ba248c: Waiting\n21d43f0d73c2: Waiting\nd8a1c5873f40: Waiting\nc28818711e1e: Waiting\n66a9e63c657a: Verifying Checksum\n66a9e63c657a: Download complete\nd1989b6e74cf: Verifying Checksum\nd1989b6e74cf: Download complete\nd836772a1c1f: Verifying Checksum\nd836772a1c1f: Download complete\nc28818711e1e: Verifying Checksum\nc28818711e1e: Download complete\nd8a1c5873f40: Verifying Checksum\nd8a1c5873f40: Download complete\n9d6246ba248c: Verifying Checksum\n9d6246ba248c: Download complete\n21d43f0d73c2: Verifying Checksum\n21d43f0d73c2: Download complete\nd836772a1c1f: Pull complete\n66a9e63c657a: Pull complete\nd1989b6e74cf: Pull complete\nc28818711e1e: Pull complete\n9d6246ba248c: Pull complete\n21d43f0d73c2: Pull complete\nd8a1c5873f40: Pull complete\nDigest: sha256:87262e4a4c7db56158a80a18fefdc4fee5accc41b59cde821e691d05541bbb18\nStatus: Downloaded newer image for golang:1.17\n ---> 742df529b073\nStep 8/16 : WORKDIR /app\n ---> Running in 40664d9a33ac\nRemoving intermediate container 40664d9a33ac\n ---> aa72c135bd29\nStep 9/16 : COPY go.* ./\n ---> 21f93bb19cd1\nStep 10/16 : RUN go mod download\n ---> Running in 9970e2457910\nRemoving intermediate container 9970e2457910\n ---> d1b37f606bd4\nStep 11/16 : COPY . ./\n ---> 15f5119b3906\nStep 12/16 : RUN mkdir -p ./static\n ---> Running in fa0f9f34c06b\nRemoving intermediate container fa0f9f34c06b\n ---> 7a74c0dc96fb\nStep 13/16 : COPY --from=\"website-builder\" /www/build ./static\n ---> 64f3104a603f\nStep 14/16 : RUN go build -o /server cmd/goblin-api/main.go\n ---> Running in d4eda16f575f\nRemoving intermediate container d4eda16f575f\n ---> 440254df1f00\nStep 15/16 : EXPOSE 3000\n ---> Running in 0e89cee93643\nRemoving intermediate container 0e89cee93643\n ---> 3a49514782d1\nStep 16/16 : CMD [ \"/server\" ]\n ---> Running in 8c40836279ab\nRemoving intermediate container 8c40836279ab\n ---> 6502edd2bc55\nSuccessfully built 6502edd2bc55\nSuccessfully tagged goblin:latest\n","stderr":"","imageSize":1110484289},"repair":{"violations":[{"name":"npmCacheCleanAfterInstall","position":{"start":3,"end":3,"columnStart":4,"columnEnd":17}}],"repairedDockerfile":"FROM node:16-alpine3.15 as website-builder\nWORKDIR /www\nCOPY ./www .\nRUN npm i -g pnpm\nRUN pnpm install\nRUN pnpm build\n\nFROM golang:1.17\nWORKDIR /app\nCOPY go.* ./\nRUN go mod download\nCOPY . ./\nRUN mkdir -p ./static\nCOPY --from=\"website-builder\" /www/build ./static\nRUN go build -o /server cmd/goblin-api/main.go\n\nEXPOSE 3000\n\nCMD [ \"/server\" ]"},"repairedBuild":{"startTimestamp":1672281149194,"endTimestamp":1672281202960,"error":null,"stdout":"Sending build context to Docker daemon    511kB\r\r\nStep 1/16 : FROM node:16-alpine3.15 as website-builder\n ---> 477eb7db0f23\nStep 2/16 : WORKDIR /www\n ---> Running in 1f2a176ebeb6\nRemoving intermediate container 1f2a176ebeb6\n ---> 164a80424e6b\nStep 3/16 : COPY ./www .\n ---> cd3ba54f2633\nStep 4/16 : RUN npm i -g pnpm\n ---> Running in 3c188e6d6507\n\nadded 1 package, and audited 2 packages in 666ms\n\n1 package is looking for funding\n  run `npm fund` for details\n\nfound 0 vulnerabilities\n\u001b[91mnpm\u001b[0m\u001b[91m notice \nnpm\u001b[0m\u001b[91m notice New major version of npm available! 8.19.2 -> 9.2.0\nnpm notice\u001b[0m\u001b[91m Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm notice Run `npm install -g npm@9.2.0` to update!\nnpm notice \n\u001b[0mRemoving intermediate container 3c188e6d6507\n ---> 2022bc98d85e\nStep 5/16 : RUN pnpm install\n ---> Running in 16169e55afb5\nProgress: resolved 1, reused 0, downloaded 0, added 0\nProgress: resolved 16, reused 0, downloaded 11, added 0\nProgress: resolved 118, reused 0, downloaded 114, added 0\nPackages: +152\n++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++\nProgress: resolved 172, reused 0, downloaded 150, added 0\nPackages are hard linked from the content-addressable store to the virtual store.\n  Content-addressable store is at: /root/.local/share/pnpm/store/v3\n  Virtual store is at:             node_modules/.pnpm\nProgress: resolved 172, reused 0, downloaded 151, added 151\n.../node_modules/svelte-preprocess postinstall$ echo \"[svelte-preprocess] Don't forget to install the preprocessors packages that will be used: node-sass/sass, stylus, less, postcss & postcss-load-config, coffeescript, pug, etc...\"\n.../node_modules/svelte-preprocess postinstall: [svelte-preprocess] Don't forget to install the preprocessors packages that will be used: node-sass/sass, stylus, less, postcss & postcss-load-config, coffeescript, pug, etc...\n.../node_modules/svelte-preprocess postinstall: Done\n.../esbuild@0.14.27/node_modules/esbuild postinstall$ node install.js\n.../esbuild@0.14.27/node_modules/esbuild postinstall: Done\n\ndevDependencies:\n+ @sveltejs/adapter-static 1.0.0-next.29\n+ @sveltejs/kit 1.0.0-next.301\n+ autoprefixer 10.4.2\n+ postcss 8.4.5\n+ prettier 2.5.1\n+ prettier-plugin-svelte 2.6.0\n+ svelte 3.46.2\n+ svelte-check 2.3.0\n+ svelte-preprocess 4.10.2\n+ tailwind-scrollbar-hide 1.1.7\n+ tailwindcss 3.0.15\n+ tslib 2.3.1\n+ typescript 4.5.4\n\nDone in 5.7s\nProgress: resolved 172, reused 0, downloaded 152, added 152, done\nRemoving intermediate container 16169e55afb5\n ---> c046e39fce39\nStep 6/16 : RUN pnpm build\n ---> Running in 4e36b49b588d\n\n> goblin-site@0.0.0 build /www\n> svelte-kit build\n\nvite v2.8.6 building for production...\ntransforming...\n\u001b[91mBrowserslist: caniuse-lite is outdated. Please run:\n  npx browserslist@latest --update-db\n  Why you should do it regularly: https://github.com/browserslist/browserslist#browsers-data-updating\n\u001b[0m✓ 19 modules transformed.\nrendering chunks...\n.svelte-kit/output/client/_app/manifest.json                               1.17 KiB\n.svelte-kit/output/client/_app/pages/__layout.svelte-52d4b858.js           1.83 KiB / gzip: 0.99 KiB\n.svelte-kit/output/client/_app/error.svelte-9b74cb60.js                    1.56 KiB / gzip: 0.75 KiB\n.svelte-kit/output/client/_app/chunks/vendor-ee41000f.js                   7.27 KiB / gzip: 2.99 KiB\n.svelte-kit/output/client/_app/assets/pages/__layout.svelte-1d47aeb2.css   8.17 KiB / gzip: 2.64 KiB\n.svelte-kit/output/client/_app/start-72d15468.js                           22.22 KiB / gzip: 8.38 KiB\n.svelte-kit/output/client/_app/pages/index.svelte-171b4437.js              30.44 KiB / gzip: 9.05 KiB\nvite v2.8.6 building SSR bundle for production...\ntransforming...\n✓ 17 modules transformed.\n\u001b[91mGenerated an empty chunk: \"hooks\"\n\u001b[0mrendering chunks...\n.svelte-kit/output/server/manifest.json                       1.13 KiB\n.svelte-kit/output/server/index.js                            65.61 KiB\n.svelte-kit/output/server/entries/pages/__layout.svelte.js    1.49 KiB\n.svelte-kit/output/server/entries/fallbacks/error.svelte.js   0.72 KiB\n.svelte-kit/output/server/entries/pages/index.svelte.js       14.33 KiB\n.svelte-kit/output/server/chunks/index-23c9ac97.js            2.95 KiB\n.svelte-kit/output/server/chunks/hooks-1c45ba0b.js            0.00 KiB\n\nRun npm run preview to preview your production build locally.\n\n> Using @sveltejs/adapter-static\n  Wrote site to \"build\"\n  ✔ done\nRemoving intermediate container 4e36b49b588d\n ---> 51014fbf5469\nStep 7/16 : FROM golang:1.17\n ---> 742df529b073\nStep 8/16 : WORKDIR /app\n ---> Running in 4fe04f9df1df\nRemoving intermediate container 4fe04f9df1df\n ---> 1f0edd28b51c\nStep 9/16 : COPY go.* ./\n ---> 886278b165fb\nStep 10/16 : RUN go mod download\n ---> Running in cf045b0b68af\nRemoving intermediate container cf045b0b68af\n ---> 7db9fc986239\nStep 11/16 : COPY . ./\n ---> 1992fc2bd383\nStep 12/16 : RUN mkdir -p ./static\n ---> Running in 05fe2d1d98c4\nRemoving intermediate container 05fe2d1d98c4\n ---> b9525cab74a3\nStep 13/16 : COPY --from=\"website-builder\" /www/build ./static\n ---> 031e75f45868\nStep 14/16 : RUN go build -o /server cmd/goblin-api/main.go\n ---> Running in e045e795a0f0\nRemoving intermediate container e045e795a0f0\n ---> d2ab72c966f9\nStep 15/16 : EXPOSE 3000\n ---> Running in 102f073fb530\nRemoving intermediate container 102f073fb530\n ---> 0c10fe9f6876\nStep 16/16 : CMD [ \"/server\" ]\n ---> Running in 1f181748c5d9\nRemoving intermediate container 1f181748c5d9\n ---> 19ba008d238b\nSuccessfully built 19ba008d238b\nSuccessfully tagged goblin:latest\n","stderr":"","imageSize":1110471969},"endTime":1672281203372}