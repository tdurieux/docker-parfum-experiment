{"repository":"https://github.com/mpihlak/mongoproxy","dockerfilePath":"Dockerfile","startTime":1672976809633,"endTime":1672977140561,"clone":{"startTime":1672976809633,"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/mpihlak/mongoproxy'...\n","error":null,"endTime":1672976810503,"commit":"859c34fba816cafbd26d170cacf61d4e9d162ffc"},"originalBuild":{"startTime":1672976810588,"endTime":1672977001541,"error":null,"stdout":"Sending build context to Docker daemon  1.279MB\r\r\nStep 1/17 : FROM rust:1.61-buster as builder\n1.61-buster: Pulling from library/rust\nea267e4631a9: Pulling fs layer\n8a014c921489: Pulling fs layer\n293ff1be7001: Pulling fs layer\n4e42533e7311: Pulling fs layer\ne56e70ed0dfb: Pulling fs layer\ncf1bd4467b49: Pulling fs layer\ne56e70ed0dfb: Waiting\ncf1bd4467b49: Waiting\n4e42533e7311: Waiting\n293ff1be7001: Verifying Checksum\n293ff1be7001: Download complete\n8a014c921489: Verifying Checksum\n8a014c921489: Download complete\nea267e4631a9: Verifying Checksum\nea267e4631a9: Download complete\n4e42533e7311: Verifying Checksum\n4e42533e7311: Download complete\nea267e4631a9: Pull complete\n8a014c921489: Pull complete\n293ff1be7001: Pull complete\ncf1bd4467b49: Verifying Checksum\ncf1bd4467b49: Download complete\ne56e70ed0dfb: Verifying Checksum\ne56e70ed0dfb: Download complete\n4e42533e7311: Pull complete\ne56e70ed0dfb: Pull complete\ncf1bd4467b49: Pull complete\nDigest: sha256:3c7cc70ad77bdcd8b79b2621a509324ad595899eaffe755fe8e7187cc007f2cf\nStatus: Downloaded newer image for rust:1.61-buster\n ---> 858e47a5e90a\nStep 2/17 : WORKDIR /build/mongoproxy\n ---> Running in 8ae6fb12ad31\nRemoving intermediate container 8ae6fb12ad31\n ---> a1f249162482\nStep 3/17 : COPY Cargo.* ./\n ---> 9fd07b4fbfe7\nStep 4/17 : COPY proxy/ ./proxy\n ---> 8a14ce942c1c\nStep 5/17 : COPY mongo-protocol/ ./mongo-protocol\n ---> 4635c042a2a6\nStep 6/17 : COPY async-bson/ ./async-bson\n ---> 45b63e89be33\nStep 7/17 : RUN cargo build --release\n ---> Running in 8fcc08a06940\n\u001b[91m    Updating crates.io index\n\u001b[0m\u001b[91m Downloading crates ...\n\u001b[0m\u001b[91m  Downloaded ppv-lite86 v0.2.10\n\u001b[0m\u001b[91m  Downloaded rand_core v0.6.2\n\u001b[0m\u001b[91m  Downloaded serde_json v1.0.59\n\u001b[0m\u001b[91m  Downloaded serde v1.0.117\n\u001b[0m\u001b[91m  Downloaded httparse v1.8.0\n\u001b[0m\u001b[91m  Downloaded maybe-uninit v2.0.0\n\u001b[0m\u001b[91m  Downloaded http v0.2.1\n\u001b[0m\u001b[91m  Downloaded num-integer v0.1.44\n\u001b[0m\u001b[91m  Downloaded once_cell v1.15.0\n\u001b[0m\u001b[91m  Downloaded opentelemetry-jaeger v0.11.0\n\u001b[0m\u001b[91m  Downloaded pin-project-lite v0.2.0\n\u001b[0m\u001b[91m  Downloaded rand_chacha v0.3.0\n\u001b[0m\u001b[91m  Downloaded ryu v1.0.5\n\u001b[0m\u001b[91m  Downloaded regex-automata v0.1.9\n\u001b[0m\u001b[91m  Downloaded strsim v0.8.0\n\u001b[0m\u001b[91m  Downloaded threadpool v1.8.1\n\u001b[0m\u001b[91m  Downloaded thiserror-impl v1.0.24\n\u001b[0m\u001b[91m  Downloaded tokio-macros v1.8.0\n\u001b[0m\u001b[91m  Downloaded tokio-stream v0.1.5\n\u001b[0m\u001b[91m  Downloaded tracing-attributes v0.1.22\n\u001b[0m\u001b[91m  Downloaded unicode-xid v0.2.1\n\u001b[0m\u001b[91m  Downloaded vec_map v0.8.2\n\u001b[0m\u001b[91m  Downloaded bytes v0.5.6\n\u001b[0m\u001b[91m  Downloaded futures-core v0.3.8\n\u001b[0m\u001b[91m  Downloaded futures-macro v0.3.8\n\u001b[0m\u001b[91m  Downloaded proc-macro-nested v0.1.6\n\u001b[0m\u001b[91m  Downloaded pin-utils v0.1.0\n\u001b[0m\u001b[91m  Downloaded tracing-serde v0.1.2\n\u001b[0m\u001b[91m  Downloaded hex v0.4.2\n\u001b[0m\u001b[91m  Downloaded want v0.3.0\n\u001b[0m\u001b[91m  Downloaded regex-syntax v0.6.21\n\u001b[0m\u001b[91m  Downloaded opentelemetry v0.12.0\n\u001b[0m\u001b[91m  Downloaded textwrap v0.11.0\n\u001b[0m\u001b[91m  Downloaded slab v0.4.2\n\u001b[0m\u001b[91m  Downloaded spin v0.5.2\n\u001b[0m\u001b[91m  Downloaded matchers v0.0.1\n\u001b[0m\u001b[91m  Downloaded isatty v0.1.9\n\u001b[0m\u001b[91m  Downloaded tracing-appender v0.1.1\n\u001b[0m\u001b[91m  Downloaded tokio v1.19.2\n\u001b[0m\u001b[91m  Downloaded prometheus v0.7.0\n\u001b[0m\u001b[91m  Downloaded proc-macro2 v1.0.24\n\u001b[0m\u001b[91m  Downloaded rand v0.8.3\n\u001b[0m\u001b[91m  Downloaded tracing-subscriber v0.2.15\n\u001b[0m\u001b[91m  Downloaded httpdate v1.0.2\n\u001b[0m\u001b[91m  Downloaded quote v1.0.7\n\u001b[0m\u001b[91m  Downloaded protobuf v2.18.1\n\u001b[0m\u001b[91m  Downloaded percent-encoding v2.1.0\n\u001b[0m\u001b[91m  Downloaded hyper v0.14.8\n\u001b[0m\u001b[91m  Downloaded thrift v0.13.0\n\u001b[0m\u001b[91m  Downloaded bson v1.1.0\n\u001b[0m\u001b[91m  Downloaded tracing v0.1.35\n\u001b[0m\u001b[91m  Downloaded maybe-async v0.2.2\n\u001b[0m\u001b[91m  Downloaded bitflags v1.2.1\n\u001b[0m\u001b[91m  Downloaded cfg-if v0.1.10\n\u001b[0m\u001b[91m  Downloaded try-lock v0.2.3\n\u001b[0m\u001b[91m  Downloaded tracing-core v0.1.29\n\u001b[0m\u001b[91m  Downloaded ordered-float v1.1.1\n\u001b[0m\u001b[91m  Downloaded http-body v0.4.1\n\u001b[0m\u001b[91m  Downloaded h2 v0.3.14\n\u001b[0m\u001b[91m  Downloaded getrandom v0.2.2\n\u001b[0m\u001b[91m  Downloaded futures-channel v0.3.8\n\u001b[0m\u001b[91m  Downloaded base64 v0.12.3\n\u001b[0m\u001b[91m  Downloaded ansi_term v0.11.0\n\u001b[0m\u001b[91m  Downloaded tokio-util v0.6.5\n\u001b[0m\u001b[91m  Downloaded pin-project-internal v0.4.27\n\u001b[0m\u001b[91m  Downloaded num-traits v0.2.14\n\u001b[0m\u001b[91m  Downloaded getrandom v0.1.15\n\u001b[0m\u001b[91m  Downloaded futures-sink v0.3.8\n\u001b[0m\u001b[91m  Downloaded futures-io v0.3.8\n\u001b[0m\u001b[91m  Downloaded crossbeam-channel v0.4.4\n\u001b[0m\u001b[91m  Downloaded chrono v0.4.19\n\u001b[0m\u001b[91m  Downloaded futures v0.3.8\n\u001b[0m\u001b[91m  Downloaded byteorder v1.3.4\n\u001b[0m\u001b[91m  Downloaded async-trait v0.1.42\n\u001b[0m\u001b[91m  Downloaded atty v0.2.14\n\u001b[0m\u001b[91m  Downloaded ansi_term v0.12.1\n\u001b[0m\u001b[91m  Downloaded unicode-width v0.1.8\n\u001b[0m\u001b[91m  Downloaded tracing-futures v0.2.4\n\u001b[0m\u001b[91m  Downloaded tokio-util v0.7.3\n\u001b[0m\u001b[91m  Downloaded tower-service v0.3.0\n\u001b[0m\u001b[91m  Downloaded time v0.1.44\n\u001b[0m\u001b[91m  Downloaded syn v1.0.67\n\u001b[0m\u001b[91m  Downloaded thread_local v1.1.4\n\u001b[0m\u001b[91m  Downloaded thiserror v1.0.24\n\u001b[0m\u001b[91m  Downloaded socket2 v0.4.7\n\u001b[0m\u001b[91m  Downloaded smallvec v1.8.0\n\u001b[0m\u001b[91m  Downloaded sharded-slab v0.1.0\n\u001b[0m\u001b[91m  Downloaded serde_derive v1.0.117\n\u001b[0m\u001b[91m  Downloaded regex v1.4.2\n\u001b[0m\u001b[91m  Downloaded rand_core v0.5.1\n\u001b[0m\u001b[91m  Downloaded rand v0.7.3\n\u001b[0m\u001b[91m  Downloaded rand_chacha v0.2.2\n\u001b[0m\u001b[91m  Downloaded quick-error v1.2.3\n\u001b[0m\u001b[91m  Downloaded proc-macro-hack v0.5.19\n\u001b[0m\u001b[91m  Downloaded pin-project v1.0.2\n\u001b[0m\u001b[91m  Downloaded pin-project-internal v1.0.2\n\u001b[0m\u001b[91m  Downloaded pin-project v0.4.27\n\u001b[0m\u001b[91m  Downloaded itoa v0.4.6\n\u001b[0m\u001b[91m  Downloaded num_cpus v1.13.0\n\u001b[0m\u001b[91m  Downloaded libc v0.2.133\n\u001b[0m\u001b[91m  Downloaded lazy_static v1.4.0\n\u001b[0m\u001b[91m  Downloaded mio v0.8.4\n\u001b[0m\u001b[91m  Downloaded memchr v2.3.4\n\u001b[0m\u001b[91m  Downloaded log v0.4.11\n\u001b[0m\u001b[91m  Downloaded linked-hash-map v0.5.3\n\u001b[0m\u001b[91m  Downloaded indexmap v1.6.0\n\u001b[0m\u001b[91m  Downloaded futures-util v0.3.8\n\u001b[0m\u001b[91m  Downloaded hashbrown v0.9.1\n\u001b[0m\u001b[91m  Downloaded clap v2.33.3\n\u001b[0m\u001b[91m  Downloaded integer-encoding v1.1.5\n\u001b[0m\u001b[91m  Downloaded futures-task v0.3.8\n\u001b[0m\u001b[91m  Downloaded futures-executor v0.3.8\n\u001b[0m\u001b[91m  Downloaded fnv v1.0.7\n\u001b[0m\u001b[91m  Downloaded crossbeam-utils v0.7.2\n\u001b[0m\u001b[91m  Downloaded bytes v1.0.1\n\u001b[0m\u001b[91m  Downloaded cfg-if v1.0.0\n\u001b[0m\u001b[91m  Downloaded autocfg v1.0.1\n\u001b[0m\u001b[91m  Downloaded tracing-log v0.1.1\n\u001b[0m\u001b[91m   Compiling proc-macro2 v1.0.24\n   Compiling unicode-xid v0.2.1\n   Compiling syn v1.0.67\n   Compiling libc v0.2.133\n\u001b[0m\u001b[91m   Compiling cfg-if v0.1.10\n   Compiling autocfg v1.0.1\n   Compiling once_cell v1.15.0\n   Compiling log v0.4.11\n   Compiling pin-project-lite v0.2.0\n   Compiling memchr v2.3.4\n\u001b[0m\u001b[91m   Compiling cfg-if v1.0.0\n\u001b[0m\u001b[91m   Compiling futures-core v0.3.8\n\u001b[0m\u001b[91m   Compiling lazy_static v1.4.0\n\u001b[0m\u001b[91m   Compiling bytes v1.0.1\n\u001b[0m\u001b[91m   Compiling proc-macro-hack v0.5.19\n\u001b[0m\u001b[91m   Compiling futures-sink v0.3\u001b[0m\u001b[91m.8\n\u001b[0m\u001b[91m   Compiling serde_derive v1.0.117\n\u001b[0m\u001b[91m   Compiling proc-macro-nested v0.1.6\n\u001b[0m\u001b[91m   Compiling itoa v0.4.6\n\u001b[0m\u001b[91m   Compiling byteorder v1.3.4\n\u001b[0m\u001b[91m   Compiling ppv-lite86 v0.2.10\n\u001b[0m\u001b[91m   Compiling serde v1.0.117\n\u001b[0m\u001b[91m   Compiling hashbrown v0.9.1\n\u001b[0m\u001b[91m   Compiling getrandom v0.1.15\n\u001b[0m\u001b[91m   Compiling slab v0.4.2\n\u001b[0m\u001b[91m   Compiling ryu v1.0.5\n\u001b[0m\u001b[91m   Compiling pin-utils v0.1.0\u001b[0m\u001b[91m\n\u001b[0m\u001b[91m   Compiling getrandom v0.2.2\u001b[0m\u001b[91m\n\u001b[0m\u001b[91m   Compiling futures-io v0.3\u001b[0m\u001b[91m.8\n\u001b[0m\u001b[91m   Compiling fnv v1.0.7\n\u001b[0m\u001b[91m   Compiling serde_json v1.0.59\u001b[0m\u001b[91m\n\u001b[0m\u001b[91m   Compiling regex-syntax v0.6.21\u001b[0m\u001b[91m\n\u001b[0m\u001b[91m   Compiling protobuf v2.18.1\n\u001b[0m\u001b[91m   Compiling maybe-uninit v2.0.0\n\u001b[0m\u001b[91m   Compiling pin-project-internal v0.4.27\n\u001b[0m\u001b[91m   Compiling bytes v0.5.6\n\u001b[0m\u001b[91m   \u001b[0m\u001b[91mCompiling \u001b[0m\u001b[91mprometheus v\u001b[0m\u001b[91m0\u001b[0m\u001b[91m.7.0\n\u001b[0m\u001b[91m   Compiling httparse v1.8.0\n\u001b[0m\u001b[91m   Compiling bitflags v1.2.1\n\u001b[0m\u001b[91m   Compiling hex v0.4.2\n\u001b[0m\u001b[91m   Compiling smallvec v1.8.0\n\u001b[0m\u001b[91m  \u001b[0m\u001b[91m Compiling try-lock v0.2.3\n\u001b[0m\u001b[91m   Compiling base64 v0.12.3\n\u001b[0m\u001b[91m   Compiling percent-encoding v2.1.0\n\u001b[0m\u001b[91m   Compiling spin v0.5.2\n\u001b[0m\u001b[91m   Compiling quick-error v1.2.3\n\u001b[0m\u001b[91m   Compiling linked-hash-map v0.5.3\n\u001b[0m\u001b[91m   Compiling integer-encoding v1.1.5\n\u001b[0m\u001b[91m   Compiling ansi_term v0.12.1\n\u001b[0m\u001b[91m   Compiling unicode-width v0.1.8\n\u001b[0m\u001b[91m   Compiling httpdate v1.0.2\n\u001b[0m\u001b[91m   Compiling strsim v0.8.0\n\u001b[0m\u001b[91m   Compiling ansi_term v0.11.0\n\u001b[0m\u001b[91m   Compiling tower-service v0.3.0\n\u001b[0m\u001b[91m  \u001b[0m\u001b[91m Compiling \u001b[0m\u001b[91mvec_map\u001b[0m\u001b[91m v\u001b[0m\u001b[91m0.\u001b[0m\u001b[91m8\u001b[0m\u001b[91m.\u001b[0m\u001b[91m2\n\u001b[0m\u001b[91m   Compiling sharded-slab v0.1.0\n\u001b[0m\u001b[91m   Compiling futures-channel v0.3.8\n\u001b[0m\u001b[91m \u001b[0m\u001b[91m  Compiling tracing-core v\u001b[0m\u001b[91m0.1.\u001b[0m\u001b[91m29\n\u001b[0m\u001b[91m   Compiling futures-task v0.3.8\n\u001b[0m\u001b[91m \u001b[0m\u001b[91m \u001b[0m\u001b[91m Compiling thread_local v1.1.4\n\u001b[0m\u001b[91m   Compiling http v0.2.1\n\u001b[0m\u001b[91m   \u001b[0m\u001b[91mCompiling\u001b[0m\u001b[91m \u001b[0m\u001b[91mtextwrap v\u001b[0m\u001b[91m0.\u001b[0m\u001b[91m11.\u001b[0m\u001b[91m0\u001b[0m\u001b[91m\n\u001b[0m\u001b[91m   Compiling num-traits v0.2.14\n\u001b[0m\u001b[91m \u001b[0m\u001b[91m  Compiling indexmap v1.6.0\n\u001b[0m\u001b[91m  \u001b[0m\u001b[91m Compiling num-integer v0.1.44\n\u001b[0m\u001b[91m   Compiling crossbeam-utils v0.7.2\n\u001b[0m\u001b[91m   Compiling want v0.3.0\n\u001b[0m\u001b[91m   \u001b[0m\u001b[91mCompiling tracing-log\u001b[0m\u001b[91m v\u001b[0m\u001b[91m0\u001b[0m\u001b[91m.\u001b[0m\u001b[91m1\u001b[0m\u001b[91m.\u001b[0m\u001b[91m1\u001b[0m\u001b[91m\n\u001b[0m\u001b[91m   Compiling quote v1.0.7\n\u001b[0m\u001b[91m   Compiling num_cpus v1.13.0\n\u001b[0m\u001b[91m   Compiling socket2 v0.4.7\n\u001b[0m\u001b[91m   Compiling mio v0.8.4\n\u001b[0m\u001b[91m   Compiling time v0.1.44\n\u001b[0m\u001b[91m   Compiling atty v0.2.14\n   Compiling isatty v0.1.9\n\u001b[0m\u001b[91m   Compiling clap v2.33.3\n\u001b[0m\u001b[91m   Compiling threadpool v1.8.1\n\u001b[0m\u001b[91m   Compiling rand_core v0.6.2\n\u001b[0m\u001b[91m   Compiling rand_core v0.5.1\n\u001b[0m\u001b[91m   Compiling rand_chacha v0.2.2\n\u001b[0m\u001b[91m   Compiling rand_chacha v0.3.0\n\u001b[0m\u001b[91m   Compiling regex-automata v0.1.9\n\u001b[0m\u001b[91m   Compiling regex v1.4.2\n\u001b[0m\u001b[91m   Compiling rand v0.8.3\n\u001b[0m\u001b[91m   Compiling rand v0.7\u001b[0m\u001b[91m.3\n\u001b[0m\u001b[91m   Compiling http-body v0.4.1\n\u001b[0m\u001b[91m   Compiling ordered-float v1.1.1\n\u001b[0m\u001b[91m   Compiling crossbeam-channel v0.4.4\n\u001b[0m\u001b[91m   Compiling thrift v0.13.0\n\u001b[0m\u001b[91m   Compiling\u001b[0m\u001b[91m chrono\u001b[0m\u001b[91m v\u001b[0m\u001b[91m0\u001b[0m\u001b[91m.4\u001b[0m\u001b[91m.19\u001b[0m\u001b[91m\n\u001b[0m\u001b[91m   Compiling matchers v0.0.1\n\u001b[0m\u001b[91m   Compiling tokio-macros v1.8.0\n\u001b[0m\u001b[91m   Compiling tracing-attributes v0.1.22\n\u001b[0m\u001b[91m   Compiling pin-project-internal v1.0.2\n\u001b[0m\u001b[91m   Compiling futures-macro v0.3.8\n\u001b[0m\u001b[91m   Compiling thiserror-impl v1.0.24\n\u001b[0m\u001b[91m   Compiling maybe-async v0.2.2\n\u001b[0m\u001b[91m   Compiling async-trait v0.1.42\n\u001b[0m\u001b[91m   Compiling tokio v1.19.2\n\u001b[0m\u001b[91m   Compiling thiserror v1.0.24\n\u001b[0m\u001b[91m   Compiling pin-project v1.0.2\n\u001b[0m\u001b[91m   Compiling pin-project v0.4.27\n\u001b[0m\u001b[91m   Compiling futures-util v0.3.8\n\u001b[0m\u001b[91m   Compiling tracing v0.1.35\n\u001b[0m\u001b[91m   Compiling tracing-futures v0.2.4\n\u001b[0m\u001b[91m   Compiling tokio-stream v0.1.5\n\u001b[0m\u001b[91m   Compiling tokio-util v0.7.3\n\u001b[0m\u001b[91m   Compiling async-bson v0.2.3 (\u001b[0m\u001b[91m/build/mongoproxy/async-bson)\n\u001b[0m\u001b[91m   Compiling tokio-util v0.6.5\n\u001b[0m\u001b[91m   Compiling futures-executor v0.3.8\n\u001b[0m\u001b[91m   Compiling h2 v0.3.14\n\u001b[0m\u001b[91m   Compiling futures v0.3.8\n\u001b[0m\u001b[91m   Compiling opentelemetry v0.12.0\n\u001b[0m\u001b[91m   Compiling opentelemetry-jaeger v0.11.0\n\u001b[0m\u001b[91m   Compiling tracing-serde v0.1.2\n\u001b[0m\u001b[91m   Compiling tracing-subscriber v0.2.15\n\u001b[0m\u001b[91m   Compiling bson v1.1.0\n\u001b[0m\u001b[91m   Compiling mongo-protocol v0.1.0 (/build/mongoproxy/mongo-protocol)\n\u001b[0m\u001b[91m   Compiling tracing-appender v0.1.1\n\u001b[0m\u001b[91m   Compiling hyper v0.14.8\n\u001b[0m\u001b[91m   Compiling mongoproxy v0.5.21 (/build/mongoproxy/proxy)\n\u001b[0m\u001b[91m    Finished release [optimized] target(s) in 49.36s\n\u001b[0mRemoving intermediate container 8fcc08a06940\n ---> 9802b42ee5fb\nStep 8/17 : RUN cargo test --release\n ---> Running in a0cae75da0d1\n\u001b[91m   Compiling mongo-protocol v0.1.0 (/build/mongoproxy/mongo-protocol)\n   Compiling async-bson v0.2.3 (/build/mongoproxy/async-bson)\n\u001b[0m\u001b[91m   Compiling mongoproxy v0.5.21 (/build/mongoproxy/proxy)\n\u001b[0m\u001b[91m    Finished release [optimized] target(s) in 6.26s\n\u001b[0m\u001b[91m     Running unittests src/lib.rs (target/release/deps/async_bson-daaed55be00147a5)\n\u001b[0m\nrunning 6 tests\ntest tests::benchmark_parser ... ignored\ntest tests::test_keep_bytes ... ok\ntest tests::test_read_cstring ... ok\ntest tests::test_nested_array ... ok\ntest tests::test_parse_bson ... ok\ntest tests::test_multiple_docs ... ok\n\ntest result: ok. 5 passed; 0 failed; 1 ignored; 0 measured; 0 filtered out; finished in 0.00s\n\n\u001b[91m     Running unittests src/lib.rs (target/release/deps/mongo_protocol-b1a698ab350a5f58)\n\u001b[0m\nrunning 12 tests\ntest tests::test_debug_fmt ... ok\ntest tests::test_parse_header ... ok\ntest tests::test_parse_op_getmore ... ok\ntest tests::test_checksummed_message ... ok\ntest tests::test_parse_op_msg_raw ... ok\ntest tests::test_parse_op_query ... ok\ntest tests::test_parse_op_msg ... ok\ntest tests::test_parse_op_insert ... ok\ntest tests::test_parse_op_update ... ok\ntest tests::test_parse_multiple_message ... ok\ntest tests::test_parse_op_delete ... ok\ntest tests::test_parse_op_reply ... ok\n\ntest result: ok. 12 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s\n\n\u001b[91m     Running unittests src/lib.rs (target/release/deps/mongoproxy-0175be68630efe98)\n\u001b[0m\nrunning 0 tests\n\ntest result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s\n\n\u001b[91m     Running unittests src/main.rs (target/release/deps/mongoproxy-8694b78479fa4ddf)\n\u001b[0m\nrunning 0 tests\n\ntest result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s\n\n\u001b[91m   Doc-tests async-bson\n\u001b[0m\nrunning 6 tests\ntest src/lib.rs - DocumentParser::match_array_len (line 247) ... ok\ntest src/lib.rs - DocumentParser::match_value_at (line 233) ... ok\ntest src/lib.rs - DocumentParser::match_name_at (line 219) ... ok\ntest src/lib.rs - Matcher (line 108) ... ok\ntest src/lib.rs - DocumentParser::match_exact (line 205) ... ok\ntest src/lib.rs - (line 28) ... ok\n\ntest result: ok. 6 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.76s\n\n\u001b[91m   Doc-tests mongo-protocol\n\u001b[0m\nrunning 0 tests\n\ntest result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s\n\n\u001b[91m   Doc-tests mongoproxy\n\u001b[0m\nrunning 0 tests\n\ntest result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s\n\nRemoving intermediate container a0cae75da0d1\n ---> 027c237a53d6\nStep 9/17 : FROM debian:buster-slim\nbuster-slim: Pulling from library/debian\nb52ebda398ed: Already exists\nDigest: sha256:c9c3c682452791a9c301786a2beedb20f291e107c1b699fed0d4d145cc247d4f\nStatus: Downloaded newer image for debian:buster-slim\n ---> 101a5b2953f2\nStep 10/17 : RUN apt-get update && apt-get install -y iptables\n ---> Running in 00ab23a1866c\nGet:1 http://deb.debian.org/debian buster InRelease [122 kB]\nGet:2 http://deb.debian.org/debian-security buster/updates InRelease [34.8 kB]\nGet:3 http://deb.debian.org/debian buster-updates InRelease [56.6 kB]\nGet:4 http://deb.debian.org/debian buster/main amd64 Packages [7909 kB]\nGet:5 http://deb.debian.org/debian-security buster/updates/main amd64 Packages [422 kB]\nGet:6 http://deb.debian.org/debian buster-updates/main amd64 Packages [8788 B]\nFetched 8553 kB in 1s (5918 kB/s)\nReading package lists...\nReading package lists...\nBuilding dependency tree...\nReading state information...\nThe following additional packages will be installed:\n  libip4tc0 libip6tc0 libiptc0 libjansson4 libmnl0 libnetfilter-conntrack3\n  libnfnetlink0 libnftables0 libnftnl11 libreadline7 libxtables12 nftables\n  readline-common\nSuggested packages:\n  kmod readline-doc\nThe following NEW packages will be installed:\n  iptables libip4tc0 libip6tc0 libiptc0 libjansson4 libmnl0\n  libnetfilter-conntrack3 libnfnetlink0 libnftables0 libnftnl11 libreadline7\n  libxtables12 nftables readline-common\n0 upgraded, 14 newly installed, 0 to remove and 0 not upgraded.\nNeed to get 1312 kB of archives.\nAfter this operation, 4990 kB of additional disk space will be used.\nGet:1 http://deb.debian.org/debian buster/main amd64 libjansson4 amd64 2.12-1 [38.0 kB]\nGet:2 http://deb.debian.org/debian buster/main amd64 libmnl0 amd64 1.0.4-2 [12.2 kB]\nGet:3 http://deb.debian.org/debian buster/main amd64 libnftnl11 amd64 1.1.2-2 [56.2 kB]\nGet:4 http://deb.debian.org/debian buster/main amd64 readline-common all 7.0-5 [70.6 kB]\nGet:5 http://deb.debian.org/debian buster/main amd64 libreadline7 amd64 7.0-5 [151 kB]\nGet:6 http://deb.debian.org/debian buster/main amd64 libxtables12 amd64 1.8.2-4 [80.0 kB]\nGet:7 http://deb.debian.org/debian buster/main amd64 libnftables0 amd64 0.9.0-2 [203 kB]\nGet:8 http://deb.debian.org/debian buster/main amd64 nftables amd64 0.9.0-2 [45.2 kB]\nGet:9 http://deb.debian.org/debian buster/main amd64 libip4tc0 amd64 1.8.2-4 [70.2 kB]\nGet:10 http://deb.debian.org/debian buster/main amd64 libip6tc0 amd64 1.8.2-4 [70.5 kB]\nGet:11 http://deb.debian.org/debian buster/main amd64 libiptc0 amd64 1.8.2-4 [59.6 kB]\nGet:12 http://deb.debian.org/debian buster/main amd64 libnfnetlink0 amd64 1.0.1-3+b1 [13.9 kB]\nGet:13 http://deb.debian.org/debian buster/main amd64 libnetfilter-conntrack3 amd64 1.0.7-1 [42.4 kB]\nGet:14 http://deb.debian.org/debian buster/main amd64 iptables amd64 1.8.2-4 [399 kB]\n\u001b[91mdebconf: delaying package configuration, since apt-utils is not installed\n\u001b[0mFetched 1312 kB in 0s (41.3 MB/s)\nSelecting previously unselected package libjansson4:amd64.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 6460 files and directories currently installed.)\r\nPreparing to unpack .../00-libjansson4_2.12-1_amd64.deb ...\r\nUnpacking libjansson4:amd64 (2.12-1) ...\r\nSelecting previously unselected package libmnl0:amd64.\r\nPreparing to unpack .../01-libmnl0_1.0.4-2_amd64.deb ...\r\nUnpacking libmnl0:amd64 (1.0.4-2) ...\r\nSelecting previously unselected package libnftnl11:amd64.\r\nPreparing to unpack .../02-libnftnl11_1.1.2-2_amd64.deb ...\r\nUnpacking libnftnl11:amd64 (1.1.2-2) ...\r\nSelecting previously unselected package readline-common.\r\nPreparing to unpack .../03-readline-common_7.0-5_all.deb ...\r\nUnpacking readline-common (7.0-5) ...\r\nSelecting previously unselected package libreadline7:amd64.\r\nPreparing to unpack .../04-libreadline7_7.0-5_amd64.deb ...\r\nUnpacking libreadline7:amd64 (7.0-5) ...\r\nSelecting previously unselected package libxtables12:amd64.\r\nPreparing to unpack .../05-libxtables12_1.8.2-4_amd64.deb ...\r\nUnpacking libxtables12:amd64 (1.8.2-4) ...\r\nSelecting previously unselected package libnftables0:amd64.\r\nPreparing to unpack .../06-libnftables0_0.9.0-2_amd64.deb ...\r\nUnpacking libnftables0:amd64 (0.9.0-2) ...\r\nSelecting previously unselected package nftables.\r\nPreparing to unpack .../07-nftables_0.9.0-2_amd64.deb ...\r\nUnpacking nftables (0.9.0-2) ...\r\nSelecting previously unselected package libip4tc0:amd64.\r\nPreparing to unpack .../08-libip4tc0_1.8.2-4_amd64.deb ...\r\nUnpacking libip4tc0:amd64 (1.8.2-4) ...\r\nSelecting previously unselected package libip6tc0:amd64.\r\nPreparing to unpack .../09-libip6tc0_1.8.2-4_amd64.deb ...\r\nUnpacking libip6tc0:amd64 (1.8.2-4) ...\r\nSelecting previously unselected package libiptc0:amd64.\r\nPreparing to unpack .../10-libiptc0_1.8.2-4_amd64.deb ...\r\nUnpacking libiptc0:amd64 (1.8.2-4) ...\r\nSelecting previously unselected package libnfnetlink0:amd64.\r\nPreparing to unpack .../11-libnfnetlink0_1.0.1-3+b1_amd64.deb ...\r\nUnpacking libnfnetlink0:amd64 (1.0.1-3+b1) ...\r\nSelecting previously unselected package libnetfilter-conntrack3:amd64.\r\nPreparing to unpack .../12-libnetfilter-conntrack3_1.0.7-1_amd64.deb ...\r\nUnpacking libnetfilter-conntrack3:amd64 (1.0.7-1) ...\r\nSelecting previously unselected package iptables.\r\nPreparing to unpack .../13-iptables_1.8.2-4_amd64.deb ...\r\nUnpacking iptables (1.8.2-4) ...\r\nSetting up libip6tc0:amd64 (1.8.2-4) ...\r\nSetting up libip4tc0:amd64 (1.8.2-4) ...\r\nSetting up libjansson4:amd64 (2.12-1) ...\r\nSetting up libiptc0:amd64 (1.8.2-4) ...\r\nSetting up libmnl0:amd64 (1.0.4-2) ...\r\nSetting up libxtables12:amd64 (1.8.2-4) ...\r\nSetting up libnfnetlink0:amd64 (1.0.1-3+b1) ...\r\nSetting up readline-common (7.0-5) ...\r\nSetting up libreadline7:amd64 (7.0-5) ...\r\nSetting up libnftnl11:amd64 (1.1.2-2) ...\r\nSetting up libnetfilter-conntrack3:amd64 (1.0.7-1) ...\r\nSetting up libnftables0:amd64 (0.9.0-2) ...\r\nSetting up iptables (1.8.2-4) ...\r\nupdate-alternatives: using /usr/sbin/iptables-legacy to provide /usr/sbin/iptables (iptables) in auto mode\r\nupdate-alternatives: using /usr/sbin/ip6tables-legacy to provide /usr/sbin/ip6tables (ip6tables) in auto mode\r\nupdate-alternatives: using /usr/sbin/iptables-nft to provide /usr/sbin/iptables (iptables) in auto mode\r\nupdate-alternatives: using /usr/sbin/ip6tables-nft to provide /usr/sbin/ip6tables (ip6tables) in auto mode\r\nupdate-alternatives: using /usr/sbin/arptables-nft to provide /usr/sbin/arptables (arptables) in auto mode\r\nupdate-alternatives: using /usr/sbin/ebtables-nft to provide /usr/sbin/ebtables (ebtables) in auto mode\r\nSetting up nftables (0.9.0-2) ...\r\nProcessing triggers for libc-bin (2.28-10+deb10u2) ...\r\nRemoving intermediate container 00ab23a1866c\n ---> 10eb03c6a7b7\nStep 11/17 : RUN update-alternatives --set iptables /usr/sbin/iptables-legacy\n ---> Running in a1be5778d344\nupdate-alternatives: using /usr/sbin/iptables-legacy to provide /usr/sbin/iptables (iptables) in manual mode\nRemoving intermediate container a1be5778d344\n ---> c3270d702286\nStep 12/17 : RUN adduser --uid 9999 --disabled-password --gecos '' mongoproxy\n ---> Running in ab6d17509382\nAdding user `mongoproxy' ...\nAdding new group `mongoproxy' (9999) ...\nAdding new user `mongoproxy' (9999) with group `mongoproxy' ...\nCreating home directory `/home/mongoproxy' ...\nCopying files from `/etc/skel' ...\nRemoving intermediate container ab6d17509382\n ---> 30de1b5fb27f\nStep 13/17 : USER mongoproxy\n ---> Running in 9c7e3565dfe5\nRemoving intermediate container 9c7e3565dfe5\n ---> 088969292cd5\nStep 14/17 : WORKDIR /mongoproxy\n ---> Running in a707f7c60668\nRemoving intermediate container a707f7c60668\n ---> f0b4b6994b63\nStep 15/17 : COPY --from=builder /build/mongoproxy/target/release/mongoproxy ./\n ---> 54c8c37a6489\nStep 16/17 : COPY iptables-init.sh .\n ---> 0bfd167d19ce\nStep 17/17 : ENV MALLOC_ARENA_MAX 2\n ---> Running in f4500ac63ffd\nRemoving intermediate container f4500ac63ffd\n ---> b7b6cffc9c43\nSuccessfully built b7b6cffc9c43\nSuccessfully tagged mongoproxy:latest\n","stderr":"","imageSize":107805557},"repair":{"startTime":1672977001604,"endTime":1672977001701,"violations":[{"name":"aptGetInstallUseNoRec","position":{"start":14,"end":14,"columnStart":22,"columnEnd":49}},{"name":"ruleAptGetInstallThenRemoveAptLists","position":{"start":14,"end":14,"columnStart":22,"columnEnd":49}}],"repairedDockerfile":"FROM rust:1.61-buster as builder\n\nWORKDIR /build/mongoproxy\n\nCOPY Cargo.* ./\nCOPY proxy/ ./proxy\nCOPY mongo-protocol/ ./mongo-protocol\nCOPY async-bson/ ./async-bson\n\nRUN cargo build --release\nRUN cargo test --release\n\nFROM debian:buster-slim\n\nRUN apt-get update && apt-get install --no-install-recommends -y iptables && rm -rf /var/lib/apt/lists/*;\nRUN update-alternatives --set iptables /usr/sbin/iptables-legacy\n\nRUN adduser --uid 9999 --disabled-password --gecos '' mongoproxy\nUSER mongoproxy\n\nWORKDIR /mongoproxy\nCOPY --from=builder /build/mongoproxy/target/release/mongoproxy ./\nCOPY iptables-init.sh .\n\nENV MALLOC_ARENA_MAX 2\n"},"repairedBuild":{"startTime":1672977001914,"endTime":1672977140308,"error":null,"stdout":"Sending build context to Docker daemon  1.279MB\r\r\nStep 1/17 : FROM rust:1.61-buster as builder\n ---> 858e47a5e90a\nStep 2/17 : WORKDIR /build/mongoproxy\n ---> Running in dac9050613ad\nRemoving intermediate container dac9050613ad\n ---> 38e69cc095cd\nStep 3/17 : COPY Cargo.* ./\n ---> bdb1fbd0538b\nStep 4/17 : COPY proxy/ ./proxy\n ---> b32a546a82a7\nStep 5/17 : COPY mongo-protocol/ ./mongo-protocol\n ---> 0538bd421c53\nStep 6/17 : COPY async-bson/ ./async-bson\n ---> c95ea90cb4dd\nStep 7/17 : RUN cargo build --release\n ---> Running in 108dd9d053a8\n\u001b[91m    Updating crates.io index\n\u001b[0m\u001b[91m Downloading crates ...\n\u001b[0m\u001b[91m  Downloaded quote v1.0.7\n\u001b[0m\u001b[91m  Downloaded rand_chacha v0.2.2\n\u001b[0m\u001b[91m  Downloaded ryu v1.0.5\n\u001b[0m\u001b[91m  Downloaded serde_derive v1.0.117\n\u001b[0m\u001b[91m  Downloaded tokio-util v0.7.3\n\u001b[0m\u001b[91m  Downloaded tokio-stream v0.1.5\n\u001b[0m\u001b[91m  Downloaded thrift v0.13.0\n\u001b[0m\u001b[91m  Downloaded vec_map v0.8.2\n\u001b[0m\u001b[91m  Downloaded http v0.2.1\n\u001b[0m\u001b[91m  Downloaded hyper v0.14.8\n\u001b[0m\u001b[91m  Downloaded once_cell v1.15.0\n\u001b[0m\u001b[91m  Downloaded rand_chacha v0.3.0\n\u001b[0m\u001b[91m  Downloaded want v0.3.0\n\u001b[0m\u001b[91m  Downloaded lazy_static v1.4.0\n\u001b[0m\u001b[91m  Downloaded tracing-serde v0.1.2\n\u001b[0m\u001b[91m  Downloaded tokio-util v0.6.5\n\u001b[0m\u001b[91m  Downloaded spin v0.5.2\n\u001b[0m\u001b[91m  Downloaded mio v0.8.4\n\u001b[0m\u001b[91m  Downloaded time v0.1.44\n\u001b[0m\u001b[91m  Downloaded proc-macro-hack v0.5.19\n\u001b[0m\u001b[91m  Downloaded tracing v0.1.35\n\u001b[0m\u001b[91m  Downloaded pin-project v1.0.2\n\u001b[0m\u001b[91m  Downloaded regex-syntax v0.6.21\n\u001b[0m\u001b[91m  Downloaded tokio v1.19.2\n\u001b[0m\u001b[91m  Downloaded pin-project v0.4.27\n\u001b[0m\u001b[91m  Downloaded tracing-futures v0.2.4\n\u001b[0m\u001b[91m  Downloaded tracing-log v0.1.1\n\u001b[0m\u001b[91m  Downloaded httparse v1.8.0\n\u001b[0m\u001b[91m  Downloaded chrono v0.4.19\n\u001b[0m\u001b[91m  Downloaded prometheus v0.7.0\n\u001b[0m\u001b[91m  Downloaded futures v0.3.8\n\u001b[0m\u001b[91m  Downloaded tracing-attributes v0.1.22\n\u001b[0m\u001b[91m  Downloaded futures-sink v0.3.8\n\u001b[0m\u001b[91m  Downloaded futures-io v0.3.8\n\u001b[0m\u001b[91m  Downloaded cfg-if v0.1.10\n\u001b[0m\u001b[91m  Downloaded fnv v1.0.7\n\u001b[0m\u001b[91m  Downloaded libc v0.2.133\n\u001b[0m\u001b[91m  Downloaded async-trait v0.1.42\n\u001b[0m\u001b[91m  Downloaded opentelemetry v0.12.0\n\u001b[0m\u001b[91m  Downloaded isatty v0.1.9\n\u001b[0m\u001b[91m  Downloaded futures-core v0.3.8\n\u001b[0m\u001b[91m  Downloaded atty v0.2.14\n\u001b[0m\u001b[91m  Downloaded ansi_term v0.12.1\n\u001b[0m\u001b[91m  Downloaded h2 v0.3.14\n\u001b[0m\u001b[91m  Downloaded quick-error v1.2.3\n\u001b[0m\u001b[91m  Downloaded proc-macro2 v1.0.24\n\u001b[0m\u001b[91m  Downloaded maybe-uninit v2.0.0\n\u001b[0m\u001b[91m  Downloaded itoa v0.4.6\n\u001b[0m\u001b[91m  Downloaded http-body v0.4.1\n\u001b[0m\u001b[91m  Downloaded pin-utils v0.1.0\n\u001b[0m\u001b[91m  Downloaded httpdate v1.0.2\n\u001b[0m\u001b[91m  Downloaded cfg-if v1.0.0\n\u001b[0m\u001b[91m  Downloaded try-lock v0.2.3\n\u001b[0m\u001b[91m  Downloaded tower-service v0.3.0\n\u001b[0m\u001b[91m  Downloaded tokio-macros v1.8.0\n\u001b[0m\u001b[91m  Downloaded regex-automata v0.1.9\n\u001b[0m\u001b[91m  Downloaded rand v0.8.3\n\u001b[0m\u001b[91m  Downloaded rand v0.7.3\n\u001b[0m\u001b[91m  Downloaded protobuf v2.18.1\n\u001b[0m\u001b[91m  Downloaded proc-macro-nested v0.1.6\n\u001b[0m\u001b[91m  Downloaded ppv-lite86 v0.2.10\n\u001b[0m\u001b[91m  Downloaded pin-project-lite v0.2.0\n\u001b[0m\u001b[91m  Downloaded pin-project-internal v1.0.2\n\u001b[0m\u001b[91m  Downloaded pin-project-internal v0.4.27\n\u001b[0m\u001b[91m  Downloaded percent-encoding v2.1.0\n\u001b[0m\u001b[91m  Downloaded ordered-float v1.1.1\n\u001b[0m\u001b[91m  Downloaded opentelemetry-jaeger v0.11.0\n\u001b[0m\u001b[91m  Downloaded num-traits v0.2.14\n\u001b[0m\u001b[91m  Downloaded num-integer v0.1.44\n\u001b[0m\u001b[91m  Downloaded memchr v2.3.4\n\u001b[0m\u001b[91m  Downloaded maybe-async v0.2.2\n\u001b[0m\u001b[91m  Downloaded matchers v0.0.1\n\u001b[0m\u001b[91m  Downloaded log v0.4.11\n\u001b[0m\u001b[91m  Downloaded linked-hash-map v0.5.3\n\u001b[0m\u001b[91m  Downloaded integer-encoding v1.1.5\n\u001b[0m\u001b[91m  Downloaded indexmap v1.6.0\n\u001b[0m\u001b[91m  Downloaded futures-macro v0.3.8\n\u001b[0m\u001b[91m  Downloaded hashbrown v0.9.1\n\u001b[0m\u001b[91m  Downloaded hex v0.4.2\n\u001b[0m\u001b[91m  Downloaded getrandom v0.2.2\n\u001b[0m\u001b[91m  Downloaded getrandom v0.1.15\n\u001b[0m\u001b[91m  Downloaded futures-util v0.3.8\n\u001b[0m\u001b[91m  Downloaded futures-task v0.3.8\n\u001b[0m\u001b[91m  Downloaded futures-executor v0.3.8\n\u001b[0m\u001b[91m  Downloaded futures-channel v0.3.8\n\u001b[0m\u001b[91m  Downloaded crossbeam-utils v0.7.2\n\u001b[0m\u001b[91m  Downloaded crossbeam-channel v0.4.4\n\u001b[0m\u001b[91m  Downloaded clap v2.33.3\n\u001b[0m\u001b[91m  Downloaded bytes v1.0.1\n\u001b[0m\u001b[91m  Downloaded bytes v0.5.6\n\u001b[0m\u001b[91m  Downloaded byteorder v1.3.4\n\u001b[0m\u001b[91m  Downloaded bson v1.1.0\n\u001b[0m\u001b[91m  Downloaded bitflags v1.2.1\n\u001b[0m\u001b[91m  Downloaded base64 v0.12.3\n\u001b[0m\u001b[91m  Downloaded ansi_term v0.11.0\n\u001b[0m\u001b[91m  Downloaded unicode-xid v0.2.1\n\u001b[0m\u001b[91m  Downloaded unicode-width v0.1.8\n\u001b[0m\u001b[91m  Downloaded tracing-subscriber v0.2.15\n\u001b[0m\u001b[91m  Downloaded tracing-core v0.1.29\n\u001b[0m\u001b[91m  Downloaded tracing-appender v0.1.1\n\u001b[0m\u001b[91m  Downloaded regex v1.4.2\n\u001b[0m\u001b[91m  Downloaded threadpool v1.8.1\n\u001b[0m\u001b[91m  Downloaded thread_local v1.1.4\n\u001b[0m\u001b[91m  Downloaded thiserror-impl v1.0.24\n\u001b[0m\u001b[91m  Downloaded thiserror v1.0.24\n\u001b[0m\u001b[91m  Downloaded textwrap v0.11.0\n\u001b[0m\u001b[91m  Downloaded syn v1.0.67\n\u001b[0m\u001b[91m  Downloaded strsim v0.8.0\n\u001b[0m\u001b[91m  Downloaded socket2 v0.4.7\n\u001b[0m\u001b[91m  Downloaded smallvec v1.8.0\n\u001b[0m\u001b[91m  Downloaded slab v0.4.2\n\u001b[0m\u001b[91m  Downloaded sharded-slab v0.1.0\n\u001b[0m\u001b[91m  Downloaded serde_json v1.0.59\n\u001b[0m\u001b[91m  Downloaded serde v1.0.117\n\u001b[0m\u001b[91m  Downloaded rand_core v0.6.2\n\u001b[0m\u001b[91m  Downloaded rand_core v0.5.1\n\u001b[0m\u001b[91m  Downloaded num_cpus v1.13.0\n\u001b[0m\u001b[91m  Downloaded autocfg v1.0.1\n\u001b[0m\u001b[91m   Compiling proc-macro2 v1.0.24\n   Compiling unicode-xid v0.2.1\u001b[0m\u001b[91m\n\u001b[0m\u001b[91m   Compiling syn v1.0.67\n\u001b[0m\u001b[91m   Compiling libc v0.2.133\n\u001b[0m\u001b[91m   Compiling cfg-if v0.1.10\n\u001b[0m\u001b[91m   Compiling autocfg v1.0.1\n\u001b[0m\u001b[91m   Compiling once_cell v1.15.0\n\u001b[0m\u001b[91m   Compiling log v0.4.11\n\u001b[0m\u001b[91m   Compiling memchr v2.3.\u001b[0m\u001b[91m4\n\u001b[0m\u001b[91m   Compiling pin-project-lite v0.2.0\n\u001b[0m\u001b[91m   Compiling cfg-if v1.0.0\n\u001b[0m\u001b[91m   Compiling futures-core v0.3.8\n\u001b[0m\u001b[91m   Compiling lazy_static v1.4.0\n\u001b[0m\u001b[91m   Compiling bytes v1.0.1\n\u001b[0m\u001b[91m   Compiling futures-sink v0.3.8\n\u001b[0m\u001b[91m   Compiling proc-macro-hack v0.5.19\n\u001b[0m\u001b[91m   Compiling byteorder v1.3.4\n\u001b[0m\u001b[91m   Compiling proc-macro-nested v0.\u001b[0m\u001b[91m1.6\n\u001b[0m\u001b[91m   Compiling itoa v0.4.6\n\u001b[0m\u001b[91m   Compiling serde_derive v1.0.117\n\u001b[0m\u001b[91m   Compiling ppv-lite86 v0.2.10\n\u001b[0m\u001b[91m   Compiling hashbrown v0.9\u001b[0m\u001b[91m.1\n\u001b[0m\u001b[91m   Compiling serde v1.0.117\n\u001b[0m\u001b[91m   Compiling getrandom v0.1.15\n\u001b[0m\u001b[91m   Compiling slab v0.4.2\n\u001b[0m\u001b[91m   Compiling pin-utils v0\u001b[0m\u001b[91m.1.0\n\u001b[0m\u001b[91m   Compiling ryu v1.0.5\n\u001b[0m\u001b[91m   Compiling getrandom v0.2.2\n\u001b[0m\u001b[91m   Compiling futures-io v0.3.8\n\u001b[0m\u001b[91m   Compiling fnv v1.0.7\u001b[0m\u001b[91m\n\u001b[0m\u001b[91m   Compiling serde_json v1.0.59\n   Compiling \u001b[0m\u001b[91mregex-syntax v0.6.21\n\u001b[0m\u001b[91m   Compiling maybe-uninit v2.0.0\n\u001b[0m\u001b[91m   Compiling bytes v0.5.6\n\u001b[0m\u001b[91m   Compiling pin-project-internal v0.4.27\n\u001b[0m\u001b[91m   Compiling protobuf v2.18.1\n\u001b[0m\u001b[91m   Compiling bitflags v1.2.1\n\u001b[0m\u001b[91m   Compiling httparse v1.8.0\n   Compiling prometheus v0.7.0\n\u001b[0m\u001b[91m   Compiling base64 v0.12.3\n\u001b[0m\u001b[91m   Compiling quick-error v1.2.3\n\u001b[0m\u001b[91m   Compiling hex v0.4.2\n\u001b[0m\u001b[91m   Compiling percent-encoding v2.1.0\n\u001b[0m\u001b[91m   Compiling spin v0.5.2\n\u001b[0m\u001b[91m   Compiling smallvec v1.8.0\n\u001b[0m\u001b[91m   Compiling linked-hash-map v0.5.3\n\u001b[0m\u001b[91m   Compiling try-lock v0.2.3\n\u001b[0m\u001b[91m   Compiling unicode-width v0.1.8\n\u001b[0m\u001b[91m   Compiling ansi_term v0.12.1\n\u001b[0m\u001b[91m   Compiling integer-encoding v1.1.5\n\u001b[0m\u001b[91m \u001b[0m\u001b[91m \u001b[0m\u001b[91m \u001b[0m\u001b[91mCompiling\u001b[0m\u001b[91m \u001b[0m\u001b[91mstrsim\u001b[0m\u001b[91m v\u001b[0m\u001b[91m0\u001b[0m\u001b[91m.\u001b[0m\u001b[91m8\u001b[0m\u001b[91m.\u001b[0m\u001b[91m0\u001b[0m\u001b[91m\n\u001b[0m\u001b[91m   Compiling vec_map v0.8.2\n\u001b[0m\u001b[91m  \u001b[0m\u001b[91m \u001b[0m\u001b[91mCompiling\u001b[0m\u001b[91m httpdate v1.0.2\n\u001b[0m\u001b[91m \u001b[0m\u001b[91m  \u001b[0m\u001b[91mCompiling \u001b[0m\u001b[91mansi_term v\u001b[0m\u001b[91m0\u001b[0m\u001b[91m.11\u001b[0m\u001b[91m.\u001b[0m\u001b[91m0\n\u001b[0m\u001b[91m   Compiling\u001b[0m\u001b[91m tower-service v0\u001b[0m\u001b[91m.\u001b[0m\u001b[91m3\u001b[0m\u001b[91m.\u001b[0m\u001b[91m0\u001b[0m\u001b[91m\n\u001b[0m\u001b[91m   Compiling sharded-slab v0.1.0\n\u001b[0m\u001b[91m   Compiling futures-channel v0.3.8\n\u001b[0m\u001b[91m   Compiling tracing-core v0.1.29\n\u001b[0m\u001b[91m   Compiling futures-task v0.3.8\n\u001b[0m\u001b[91m   Compiling thread_local v1.1.4\n\u001b[0m\u001b[91m   Compiling textwrap v0.11.0\n\u001b[0m\u001b[91m   Compiling http v0.2.1\n\u001b[0m\u001b[91m   Compiling num-traits v0.2.14\n\u001b[0m\u001b[91m   Compiling indexmap v1.6.0\n   Compiling num-integer v0.1.44\n   Compiling crossbeam-utils v0.7.2\n\u001b[0m\u001b[91m  \u001b[0m\u001b[91m Compiling\u001b[0m\u001b[91m want\u001b[0m\u001b[91m v0\u001b[0m\u001b[91m.3\u001b[0m\u001b[91m.0\u001b[0m\u001b[91m\n\u001b[0m\u001b[91m   Compiling tracing-log v0.1.1\n\u001b[0m\u001b[91m   Compiling quote v1.0.7\n\u001b[0m\u001b[91m   Compiling regex-automata v0.1.9\n\u001b[0m\u001b[91m   Compiling regex v1.4.2\n\u001b[0m\u001b[91m   Compiling num_cpus v1.13.0\n\u001b[0m\u001b[91m   Compiling socket2 v0.4.7\n\u001b[0m\u001b[91m   Compiling mio v0.8.4\n\u001b[0m\u001b[91m   Compiling time v0.1.44\n\u001b[0m\u001b[91m   Compiling atty v0.2.14\n\u001b[0m\u001b[91m   Compiling isatty v0.1.9\n\u001b[0m\u001b[91m   Compiling clap v2.33.3\n\u001b[0m\u001b[91m   Compiling threadpool v1.8.1\n\u001b[0m\u001b[91m   Compiling rand_core v0.\u001b[0m\u001b[91m5.1\n\u001b[0m\u001b[91m   Compiling rand_core v0.6.2\n\u001b[0m\u001b[91m   Compiling rand_chacha v0.3.0\n\u001b[0m\u001b[91m   Compiling rand_chacha v0.2.2\n\u001b[0m\u001b[91m   Compiling http-body v0.4.1\n\u001b[0m\u001b[91m   Compiling rand v0.8.3\n\u001b[0m\u001b[91m   Compiling matchers v0.0.1\n\u001b[0m\u001b[91m  \u001b[0m\u001b[91m \u001b[0m\u001b[91mCompiling rand v0\u001b[0m\u001b[91m.7\u001b[0m\u001b[91m.\u001b[0m\u001b[91m3\n\u001b[0m\u001b[91m \u001b[0m\u001b[91m  \u001b[0m\u001b[91mCompiling\u001b[0m\u001b[91m crossbeam-channel v0.4.4\n\u001b[0m\u001b[91m   Compiling ordered-float\u001b[0m\u001b[91m v\u001b[0m\u001b[91m1\u001b[0m\u001b[91m.1.1\n\u001b[0m\u001b[91m \u001b[0m\u001b[91m  Compiling\u001b[0m\u001b[91m \u001b[0m\u001b[91mthrift\u001b[0m\u001b[91m v0\u001b[0m\u001b[91m.\u001b[0m\u001b[91m13\u001b[0m\u001b[91m.\u001b[0m\u001b[91m0\u001b[0m\u001b[91m\n\u001b[0m\u001b[91m   Compiling chrono v0.4.19\n\u001b[0m\u001b[91m   Compiling tokio-macros v1.8.0\n\u001b[0m\u001b[91m   Compiling tracing-attributes v0.1.22\n   Compiling pin-project-internal v1.0.2\n\u001b[0m\u001b[91m   Compiling futures-macro v0.3.8\n\u001b[0m\u001b[91m   Compiling thiserror-impl v1.0.24\n\u001b[0m\u001b[91m   Compiling maybe-async v0.2.2\n\u001b[0m\u001b[91m   Compiling async-trait v0.1.42\n\u001b[0m\u001b[91m   Compiling tokio v1.19.2\n\u001b[0m\u001b[91m   Compiling pin-project v1.0.2\n\u001b[0m\u001b[91m   Compiling pin-project v0.4.27\n\u001b[0m\u001b[91m   Compiling futures-util v0.3.8\n\u001b[0m\u001b[91m   Compiling tracing v0.1.35\n\u001b[0m\u001b[91m   Compiling thiserror v1.0.24\n\u001b[0m\u001b[91m   Compiling tracing-futures v0.2.4\n\u001b[0m\u001b[91m   Compiling tokio-stream v0.1.5\n   Compiling \u001b[0m\u001b[91mtokio-util v0.7.3\n\u001b[0m\u001b[91m   Compiling async-bson v0.2.3 (\u001b[0m\u001b[91m/build/mongoproxy/async-bson)\n\u001b[0m\u001b[91m   Compiling tokio-util v0\u001b[0m\u001b[91m.6.\u001b[0m\u001b[91m5\n\u001b[0m\u001b[91m   Compiling futures-executor v0.3.8\n\u001b[0m\u001b[91m   Compiling h2 v0.3.14\n\u001b[0m\u001b[91m   Compiling futures v0.3.8\n\u001b[0m\u001b[91m   Compiling opentelemetry v0.12.0\n\u001b[0m\u001b[91m   Compiling opentelemetry-jaeger v0.11.0\n\u001b[0m\u001b[91m   Compiling tracing-serde v0.1.2\n\u001b[0m\u001b[91m   Compiling bson v1.1.0\n\u001b[0m\u001b[91m   Compiling tracing-subscriber v0.2.15\n\u001b[0m\u001b[91m   Compiling hyper v0.14.8\n\u001b[0m\u001b[91m   Compiling mongo-protocol v0.1.0 (/build/mongoproxy/mongo-protocol)\n\u001b[0m\u001b[91m   Compiling tracing-appender v0.1.1\n\u001b[0m\u001b[91m   Compiling mongoproxy v0.5.21 (/build/mongoproxy/proxy)\n\u001b[0m\u001b[91m    Finished release [optimized] target(s) in 54.72s\n\u001b[0mRemoving intermediate container 108dd9d053a8\n ---> 4f4dfdb177c1\nStep 8/17 : RUN cargo test --release\n ---> Running in 4802adb7f6db\n\u001b[91m   Compiling mongo-protocol v0.1.0 (/build/mongoproxy/mongo-protocol)\n   Compiling async-bson v0.2.3 (/build/mongoproxy/async-bson)\n\u001b[0m\u001b[91m   Compiling mongoproxy v0.5.21 (/build/mongoproxy/proxy)\n\u001b[0m\u001b[91m    Finished release [optimized] target(s) in 6.19s\n\u001b[0m\u001b[91m     Running unittests src/lib.rs (target/release/deps/async_bson-daaed55be00147a5)\n\u001b[0m\nrunning 6 tests\ntest tests::benchmark_parser ... ignored\ntest tests::test_keep_bytes ... ok\ntest tests::test_multiple_docs ... ok\ntest tests::test_nested_array ... ok\ntest tests::test_parse_bson ... ok\ntest tests::test_read_cstring ... ok\n\ntest result: ok. 5 passed; 0 failed; 1 ignored; 0 measured; 0 filtered out; finished in 0.00s\n\n\u001b[91m     Running unittests src/lib.rs (target/release/deps/mongo_protocol-b1a698ab350a5f58)\n\u001b[0m\nrunning 12 tests\ntest tests::test_debug_fmt ... ok\ntest tests::test_checksummed_message ... ok\ntest tests::test_parse_op_getmore ... ok\ntest tests::test_parse_op_delete ... ok\ntest tests::test_parse_header ... ok\ntest tests::test_parse_op_insert ... ok\ntest tests::test_parse_op_msg ... ok\ntest tests::test_parse_multiple_message ... ok\ntest tests::test_parse_op_msg_raw ... ok\ntest tests::test_parse_op_query ... ok\ntest tests::test_parse_op_reply ... ok\ntest tests::test_parse_op_update ... ok\n\ntest result: ok. 12 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s\n\n\u001b[91m     Running unittests src/lib.rs (target/release/deps/mongoproxy-0175be68630efe98)\n\u001b[0m\nrunning 0 tests\n\ntest result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s\n\n\u001b[91m     Running unittests src/main.rs (target/release/deps/mongoproxy-8694b78479fa4ddf)\n\u001b[0m\nrunning 0 tests\n\ntest result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s\n\n\u001b[91m   Doc-tests async-bson\n\u001b[0m\nrunning 6 tests\ntest src/lib.rs - DocumentParser::match_exact (line 205) ... ok\ntest src/lib.rs - Matcher (line 108) ... ok\ntest src/lib.rs - DocumentParser::match_value_at (line 233) ... ok\ntest src/lib.rs - DocumentParser::match_array_len (line 247) ... ok\ntest src/lib.rs - DocumentParser::match_name_at (line 219) ... ok\ntest src/lib.rs - (line 28) ... ok\n\ntest result: ok. 6 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 1.06s\n\n\u001b[91m   Doc-tests mongo-protocol\n\u001b[0m\nrunning 0 tests\n\ntest result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s\n\n\u001b[91m   Doc-tests mongoproxy\n\u001b[0m\nrunning 0 tests\n\ntest result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s\n\nRemoving intermediate container 4802adb7f6db\n ---> d14cdad7c417\nStep 9/17 : FROM debian:buster-slim\n ---> 101a5b2953f2\nStep 10/17 : RUN apt-get update && apt-get install --no-install-recommends -y iptables && rm -rf /var/lib/apt/lists/*;\n ---> Running in ca0b3befd0ef\nGet:1 http://deb.debian.org/debian buster InRelease [122 kB]\nGet:2 http://deb.debian.org/debian-security buster/updates InRelease [34.8 kB]\nGet:3 http://deb.debian.org/debian buster-updates InRelease [56.6 kB]\nGet:4 http://deb.debian.org/debian buster/main amd64 Packages [7909 kB]\nGet:5 http://deb.debian.org/debian-security buster/updates/main amd64 Packages [422 kB]\nGet:6 http://deb.debian.org/debian buster-updates/main amd64 Packages [8788 B]\nFetched 8553 kB in 1s (5819 kB/s)\nReading package lists...\nReading package lists...\nBuilding dependency tree...\nReading state information...\nThe following additional packages will be installed:\n  libip4tc0 libip6tc0 libiptc0 libmnl0 libnetfilter-conntrack3 libnfnetlink0\n  libnftnl11 libxtables12\nSuggested packages:\n  kmod\nRecommended packages:\n  nftables\nThe following NEW packages will be installed:\n  iptables libip4tc0 libip6tc0 libiptc0 libmnl0 libnetfilter-conntrack3\n  libnfnetlink0 libnftnl11 libxtables12\n0 upgraded, 9 newly installed, 0 to remove and 0 not upgraded.\nNeed to get 804 kB of archives.\nAfter this operation, 3577 kB of additional disk space will be used.\nGet:1 http://deb.debian.org/debian buster/main amd64 libip4tc0 amd64 1.8.2-4 [70.2 kB]\nGet:2 http://deb.debian.org/debian buster/main amd64 libip6tc0 amd64 1.8.2-4 [70.5 kB]\nGet:3 http://deb.debian.org/debian buster/main amd64 libiptc0 amd64 1.8.2-4 [59.6 kB]\nGet:4 http://deb.debian.org/debian buster/main amd64 libxtables12 amd64 1.8.2-4 [80.0 kB]\nGet:5 http://deb.debian.org/debian buster/main amd64 libmnl0 amd64 1.0.4-2 [12.2 kB]\nGet:6 http://deb.debian.org/debian buster/main amd64 libnfnetlink0 amd64 1.0.1-3+b1 [13.9 kB]\nGet:7 http://deb.debian.org/debian buster/main amd64 libnetfilter-conntrack3 amd64 1.0.7-1 [42.4 kB]\nGet:8 http://deb.debian.org/debian buster/main amd64 libnftnl11 amd64 1.1.2-2 [56.2 kB]\nGet:9 http://deb.debian.org/debian buster/main amd64 iptables amd64 1.8.2-4 [399 kB]\n\u001b[91mdebconf: delaying package configuration, since apt-utils is not installed\n\u001b[0mFetched 804 kB in 0s (15.5 MB/s)\nSelecting previously unselected package libip4tc0:amd64.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 6460 files and directories currently installed.)\r\nPreparing to unpack .../0-libip4tc0_1.8.2-4_amd64.deb ...\r\nUnpacking libip4tc0:amd64 (1.8.2-4) ...\r\nSelecting previously unselected package libip6tc0:amd64.\r\nPreparing to unpack .../1-libip6tc0_1.8.2-4_amd64.deb ...\r\nUnpacking libip6tc0:amd64 (1.8.2-4) ...\r\nSelecting previously unselected package libiptc0:amd64.\r\nPreparing to unpack .../2-libiptc0_1.8.2-4_amd64.deb ...\r\nUnpacking libiptc0:amd64 (1.8.2-4) ...\r\nSelecting previously unselected package libxtables12:amd64.\r\nPreparing to unpack .../3-libxtables12_1.8.2-4_amd64.deb ...\r\nUnpacking libxtables12:amd64 (1.8.2-4) ...\r\nSelecting previously unselected package libmnl0:amd64.\r\nPreparing to unpack .../4-libmnl0_1.0.4-2_amd64.deb ...\r\nUnpacking libmnl0:amd64 (1.0.4-2) ...\r\nSelecting previously unselected package libnfnetlink0:amd64.\r\nPreparing to unpack .../5-libnfnetlink0_1.0.1-3+b1_amd64.deb ...\r\nUnpacking libnfnetlink0:amd64 (1.0.1-3+b1) ...\r\nSelecting previously unselected package libnetfilter-conntrack3:amd64.\r\nPreparing to unpack .../6-libnetfilter-conntrack3_1.0.7-1_amd64.deb ...\r\nUnpacking libnetfilter-conntrack3:amd64 (1.0.7-1) ...\r\nSelecting previously unselected package libnftnl11:amd64.\r\nPreparing to unpack .../7-libnftnl11_1.1.2-2_amd64.deb ...\r\nUnpacking libnftnl11:amd64 (1.1.2-2) ...\r\nSelecting previously unselected package iptables.\r\nPreparing to unpack .../8-iptables_1.8.2-4_amd64.deb ...\r\nUnpacking iptables (1.8.2-4) ...\r\nSetting up libip6tc0:amd64 (1.8.2-4) ...\r\nSetting up libip4tc0:amd64 (1.8.2-4) ...\r\nSetting up libiptc0:amd64 (1.8.2-4) ...\r\nSetting up libmnl0:amd64 (1.0.4-2) ...\r\nSetting up libxtables12:amd64 (1.8.2-4) ...\r\nSetting up libnfnetlink0:amd64 (1.0.1-3+b1) ...\r\nSetting up libnftnl11:amd64 (1.1.2-2) ...\r\nSetting up libnetfilter-conntrack3:amd64 (1.0.7-1) ...\r\nSetting up iptables (1.8.2-4) ...\r\nupdate-alternatives: using /usr/sbin/iptables-legacy to provide /usr/sbin/iptables (iptables) in auto mode\r\nupdate-alternatives: using /usr/sbin/ip6tables-legacy to provide /usr/sbin/ip6tables (ip6tables) in auto mode\r\nupdate-alternatives: using /usr/sbin/iptables-nft to provide /usr/sbin/iptables (iptables) in auto mode\r\nupdate-alternatives: using /usr/sbin/ip6tables-nft to provide /usr/sbin/ip6tables (ip6tables) in auto mode\r\nupdate-alternatives: using /usr/sbin/arptables-nft to provide /usr/sbin/arptables (arptables) in auto mode\r\nupdate-alternatives: using /usr/sbin/ebtables-nft to provide /usr/sbin/ebtables (ebtables) in auto mode\r\nProcessing triggers for libc-bin (2.28-10+deb10u2) ...\r\nRemoving intermediate container ca0b3befd0ef\n ---> 3848b73977db\nStep 11/17 : RUN update-alternatives --set iptables /usr/sbin/iptables-legacy\n ---> Running in 0211b5aa3f1c\nupdate-alternatives: using /usr/sbin/iptables-legacy to provide /usr/sbin/iptables (iptables) in manual mode\nRemoving intermediate container 0211b5aa3f1c\n ---> aa58f5dae85c\nStep 12/17 : RUN adduser --uid 9999 --disabled-password --gecos '' mongoproxy\n ---> Running in 25939a1bd35f\nAdding user `mongoproxy' ...\nAdding new group `mongoproxy' (9999) ...\nAdding new user `mongoproxy' (9999) with group `mongoproxy' ...\nCreating home directory `/home/mongoproxy' ...\nCopying files from `/etc/skel' ...\nRemoving intermediate container 25939a1bd35f\n ---> 9cc60adf816d\nStep 13/17 : USER mongoproxy\n ---> Running in 926293d6ca9b\nRemoving intermediate container 926293d6ca9b\n ---> b50279e5d602\nStep 14/17 : WORKDIR /mongoproxy\n ---> Running in 5ce914d7ba9f\nRemoving intermediate container 5ce914d7ba9f\n ---> e434c7438614\nStep 15/17 : COPY --from=builder /build/mongoproxy/target/release/mongoproxy ./\n ---> 0b15671a41b9\nStep 16/17 : COPY iptables-init.sh .\n ---> 9321f9685a4f\nStep 17/17 : ENV MALLOC_ARENA_MAX 2\n ---> Running in 997596b1da6c\nRemoving intermediate container 997596b1da6c\n ---> 68e7b034be9b\nSuccessfully built 68e7b034be9b\nSuccessfully tagged mongoproxy:latest\n","stderr":"","imageSize":88778578}}