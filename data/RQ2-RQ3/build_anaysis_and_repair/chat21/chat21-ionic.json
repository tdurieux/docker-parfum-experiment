{"repository":"https://github.com/chat21/chat21-ionic","dockerfilePath":"Dockerfile","startTime":1672774985162,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/chat21/chat21-ionic'...\n","error":null,"commit":"e4570c3b5854d65f46891463bdf3c25eeed4a472"},"originalBuild":{"startTimestamp":1672774987122,"endTimestamp":1672775877193,"error":null,"stdout":"Sending build context to Docker daemon  22.83MB\r\r\nStep 1/17 : FROM node:10-alpine as builder\n10-alpine: Pulling from library/node\nddad3d7c1e96: Already exists\nde915e575d22: Pulling fs layer\n7150aa69525b: Pulling fs layer\nd7aa47be044e: Pulling fs layer\nd7aa47be044e: Verifying Checksum\nd7aa47be044e: Download complete\n7150aa69525b: Verifying Checksum\n7150aa69525b: Download complete\nde915e575d22: Verifying Checksum\nde915e575d22: Download complete\nde915e575d22: Pull complete\n7150aa69525b: Pull complete\nd7aa47be044e: Pull complete\nDigest: sha256:dc98dac24efd4254f75976c40bce46944697a110d06ce7fa47e7268470cf2e28\nStatus: Downloaded newer image for node:10-alpine\n ---> aa67ba258e18\nStep 2/17 : RUN npm install -g ionic cordova@8.0.0\n ---> Running in b9d769b0cdfc\n\u001b[91mnpm WARN deprecated ionic@5.4.16: The Ionic CLI now uses âœ¨ @ionic/cli âœ¨ for its package name! ðŸ‘‰ https://twitter.com/ionicframework/status/1223268498362851330\n\u001b[0m\u001b[91mnpm WARN deprecated uuid@2.0.3: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.\n\u001b[0m\u001b[91mnpm WARN deprecated xmldom@0.1.31: Deprecated due to CVE-2021-21366 resolved in 0.5.0\n\u001b[0m\u001b[91mnpm WARN deprecated request@2.79.0: request has been deprecated, see https://github.com/request/request/issues/3142\n\u001b[0m\u001b[91mnpm WARN deprecated tar@2.2.1: This version of tar is no longer supported, and will not receive security updates. Please upgrade asap.\n\u001b[0m\u001b[91mnpm WARN deprecated querystring@0.2.0: The querystring API is considered Legacy. new code should use the URLSearchParams API instead.\n\u001b[0m\u001b[91mnpm WARN deprecated har-validator@2.0.6: this library is no longer supported\n\u001b[0m\u001b[91mnpm WARN deprecated hawk@3.1.3: This module moved to @hapi/hawk. Please make sure to switch over as this distribution is no longer supported and may contain bugs and critical security issues.\n\u001b[0m\u001b[91mnpm WARN deprecated uuid@3.4.0: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.\n\u001b[0m\u001b[91mnpm WARN deprecated boom@2.10.1: This version has been deprecated in accordance with the hapi support policy (hapi.im/support). Please upgrade to the latest version to get the best features, bug fixes, and security patches. If you are unable to upgrade at this time, paid support is available for older versions (hapi.im/commercial).\n\u001b[0m\u001b[91mnpm WARN deprecated hoek@2.16.3: This version has been deprecated in accordance with the hapi support policy (hapi.im/support). Please upgrade to the latest version to get the best features, bug fixes, and security patches. If you are unable to upgrade at this time, paid support is available for older versions (hapi.im/commercial).\n\u001b[0m\u001b[91mnpm WARN deprecated cryptiles@2.0.5: This version has been deprecated in accordance with the hapi support policy (hapi.im/support). Please upgrade to the latest version to get the best features, bug fixes, and security patches. If you are unable to upgrade at this time, paid support is available for older versions (hapi.im/commercial).\nnpm\u001b[0m\u001b[91m WARN deprecated sntp@1.0.9: This module moved to @hapi/sntp. Please make sure to switch over as this distribution is no longer supported and may contain bugs and critical security issues.\n\u001b[0m\u001b[91mnpm WARN deprecated superagent@4.1.0: Please upgrade to v7.0.2+ of superagent.  We have fixed numerous issues with streams, form-data, attach(), filesystem errors not bubbling up (ENOENT on attach()), and all tests are now passing.  See the releases tab for more information at <https://github.com/visionmedia/superagent/releases>.\n\u001b[0m\u001b[91mnpm WARN deprecated formidable@1.2.6: Please upgrade to latest, formidable@v2 or formidable@v3! Check these notes: https://bit.ly/2ZEqIau\n\u001b[0m/usr/local/bin/cordova -> /usr/local/lib/node_modules/cordova/bin/cordova\n/usr/local/bin/ionic -> /usr/local/lib/node_modules/ionic/bin/ionic\n+ ionic@5.4.16\n+ cordova@8.0.0\nadded 666 packages from 460 contributors in 43.961s\nRemoving intermediate container b9d769b0cdfc\n ---> 14c2c46ba219\nStep 3/17 : WORKDIR /app\n ---> Running in eb14fba47027\nRemoving intermediate container eb14fba47027\n ---> 52f10cf32e45\nStep 4/17 : COPY . ./\n ---> e0c4d0d267c4\nStep 5/17 : RUN npm install\n ---> Running in 08d92a464ee7\n\n> sharp@0.25.4 install /app/node_modules/sharp\n> (node install/libvips && node install/dll-copy && prebuild-install --runtime=napi) || (node-gyp rebuild && node install/dll-copy)\n\n\u001b[91minfo\u001b[0m\u001b[91m \u001b[0m\u001b[91msharp Downloading https://github.com/lovell/sharp-libvips/releases/download/v8.9.1/libvips-8.9.1-linuxmusl-x64.tar.gz\n\u001b[0m\n> core-js@3.6.4 postinstall /app/node_modules/@angular-devkit/build-angular/node_modules/core-js\n> node -e \"try{require('./postinstall')}catch(e){}\"\n\n\u001b[96mThank you for using core-js (\u001b[94m https://github.com/zloirock/core-js \u001b[96m) for polyfilling JavaScript standard library!\u001b[0m\n\n\u001b[96mThe project needs your help! Please consider supporting of core-js on Open Collective or Patreon: \u001b[0m\n\u001b[96m>\u001b[94m https://opencollective.com/core-js \u001b[0m\n\u001b[96m>\u001b[94m https://www.patreon.com/zloirock \u001b[0m\n\n\u001b[96mAlso, the author of core-js (\u001b[94m https://github.com/zloirock \u001b[96m) is looking for a good job -)\u001b[0m\n\n\n> core-js@3.6.5 postinstall /app/node_modules/@firebase/polyfill/node_modules/core-js\n> node -e \"try{require('./postinstall')}catch(e){}\"\n\n\u001b[96mThank you for using core-js (\u001b[94m https://github.com/zloirock/core-js \u001b[96m) for polyfilling JavaScript standard library!\u001b[0m\n\n\u001b[96mThe project needs your help! Please consider supporting of core-js on Open Collective or Patreon: \u001b[0m\n\u001b[96m>\u001b[94m https://opencollective.com/core-js \u001b[0m\n\u001b[96m>\u001b[94m https://www.patreon.com/zloirock \u001b[0m\n\n\u001b[96mAlso, the author of core-js (\u001b[94m https://github.com/zloirock \u001b[96m) is looking for a good job -)\u001b[0m\n\n\n> core-js@2.6.11 postinstall /app/node_modules/core-js\n> node -e \"try{require('./postinstall')}catch(e){}\"\n\n\u001b[96mThank you for using core-js (\u001b[94m https://github.com/zloirock/core-js \u001b[96m) for polyfilling JavaScript standard library!\u001b[0m\n\n\u001b[96mThe project needs your help! Please consider supporting of core-js on Open Collective or Patreon: \u001b[0m\n\u001b[96m>\u001b[94m https://opencollective.com/core-js \u001b[0m\n\u001b[96m>\u001b[94m https://www.patreon.com/zloirock \u001b[0m\n\n\u001b[96mAlso, the author of core-js (\u001b[94m https://github.com/zloirock \u001b[96m) is looking for a good job -)\u001b[0m\n\n\n> protobufjs@6.11.2 postinstall /app/node_modules/protobufjs\n> node scripts/postinstall\n\n\n> @angular/cli@8.3.29 postinstall /app/node_modules/@angular/cli\n> node ./bin/postinstall/script.js\n\n\u001b[91mnpm WARN\u001b[0m\u001b[91m @chat21/chat21-ionic@3.0.6-2.3 No repository field.\n\u001b[0m\u001b[91mnpm WARN\u001b[0m\u001b[91m @chat21/chat21-ionic@3.0.6-2.3 No license field.\n\u001b[0m\u001b[91mnpm WARN optional\u001b[0m\u001b[91m SKIPPING OPTIONAL DEPENDENCY: fsevents@1.2.13 (node_modules/webpack-dev-server/node_modules/fsevents):\nnpm WARN \u001b[0m\u001b[91mnotsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.2.13: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@1.2.13 (node_modules/watchpack-chokidar2/node_modules/fsevents):\nnpm WARN\u001b[0m\u001b[91m notsup\u001b[0m\u001b[91m SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.2.13: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@1.2.13 (node_modules/karma/node_modules/fsevents):\nnpm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.2.13: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@1.2.13 (node_modules/@angular/compiler-cli/node_modules/fsevents):\nnpm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.2.13: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@2.1.3 (node_modules/fsevents):\nnpm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.1.3: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91m\n\u001b[0madded 1734 packages from 1344 contributors and audited 1745 packages in 76.549s\n\n55 packages are looking for funding\n  run `npm fund` for details\n\nfound 264 vulnerabilities (12 low, 76 moderate, 137 high, 39 critical)\n  run `npm audit fix` to fix them, or `npm audit` for details\nRemoving intermediate container 08d92a464ee7\n ---> 950f8fb2036a\nStep 6/17 : RUN mkdir -p ./www\n ---> Running in 947a2918c3cb\nRemoving intermediate container 947a2918c3cb\n ---> 73d55ff6297e\nStep 7/17 : RUN cordova platform add browser@latest\n ---> Running in f0a8e385c4d0\n\nYou have been opted out of telemetry. To change this, run: cordova telemetry on.\nUsing cordova-fetch for cordova-browser@latest\nAdding browser project...\nCreating Cordova project for cordova-browser:\n\tPath: /app/platforms/browser\n\tName: Chat21\nDiscovered plugin \"cordova-android-support-gradle-release\" in config.xml. Adding it to the project\nInstalling \"cordova-android-support-gradle-release\" for browser\nAdding cordova-android-support-gradle-release to package.json\nSaved plugin info for \"cordova-android-support-gradle-release\" to config.xml\nDiscovered plugin \"cordova-plugin-chooser\" in config.xml. Adding it to the project\nInstalling \"cordova-plugin-chooser\" for browser\nAdding cordova-plugin-chooser to package.json\nSaved plugin info for \"cordova-plugin-chooser\" to config.xml\nDiscovered plugin \"cordova-plugin-ionic-keyboard\" in config.xml. Adding it to the project\nInstalling \"cordova-plugin-ionic-keyboard\" for browser\nAdding cordova-plugin-ionic-keyboard to package.json\nSaved plugin info for \"cordova-plugin-ionic-keyboard\" to config.xml\nDiscovered plugin \"cordova-plugin-ionic-webview\" in config.xml. Adding it to the project\nInstalling \"cordova-plugin-ionic-webview\" for browser\nAdding cordova-plugin-ionic-webview to package.json\nSaved plugin info for \"cordova-plugin-ionic-webview\" to config.xml\nDiscovered plugin \"cordova-plugin-network-information\" in config.xml. Adding it to the project\nInstalling \"cordova-plugin-network-information\" for browser\nAdding cordova-plugin-network-information to package.json\nSaved plugin info for \"cordova-plugin-network-information\" to config.xml\nDiscovered plugin \"cordova-plugin-splashscreen\" in config.xml. Adding it to the project\nInstalling \"cordova-plugin-splashscreen\" for browser\nAdding cordova-plugin-splashscreen to package.json\nSaved plugin info for \"cordova-plugin-splashscreen\" to config.xml\nDiscovered plugin \"cordova-plugin-statusbar\" in config.xml. Adding it to the project\nInstalling \"cordova-plugin-statusbar\" for browser\nAdding cordova-plugin-statusbar to package.json\nSaved plugin info for \"cordova-plugin-statusbar\" to config.xml\nDiscovered plugin \"cordova-plugin-whitelist\" in config.xml. Adding it to the project\nInstalling \"cordova-plugin-whitelist\" for browser\nAdding cordova-plugin-whitelist to package.json\nSaved plugin info for \"cordova-plugin-whitelist\" to config.xml\n--save flag or autosave detected\nSaving browser@latest into config.xml file ...\nRemoving intermediate container f0a8e385c4d0\n ---> 1f2cd1808f24\nStep 8/17 : RUN ionic cordova build browser\n ---> Running in 786109bcae9d\n> ng run app:ionic-cordova-build --platform=browser\n\nchunk {0} 0.js, 0.js.map () 33.3 kB  [rendered]\nchunk {1} 1.js, 1.js.map () 52 kB  [rendered]\nchunk {2} 2.js, 2.js.map () 79.2 kB  [rendered]\nchunk {3} 3.js, 3.js.map () 6.42 kB  [rendered]\nchunk {4} 4.js, 4.js.map () 18.1 kB  [rendered]\nchunk {5} 5.js, 5.js.map () 3.98 kB  [rendered]\nchunk {6} 6.js, 6.js.map () 35.1 kB  [rendered]\nchunk {7} 7.js, 7.js.map () 17.4 kB  [rendered]\nchunk {8} 8.js, 8.js.map () 12.2 kB  [rendered]\nchunk {9} 9.js, 9.js.map () 9.81 kB  [rendered]\nchunk {10} 10.js, 10.js.map () 16.9 kB  [rendered]\nchunk {11} 11.js, 11.js.map () 86.6 kB  [rendered]\nchunk {12} 12.js, 12.js.map () 29.2 kB  [rendered]\nchunk {13} 13.js, 13.js.map () 4.22 kB  [rendered]\nchunk {14} 14.js, 14.js.map () 16.5 kB  [rendered]\nchunk {15} 15.js, 15.js.map () 22.5 kB  [rendered]\nchunk {16} 16.js, 16.js.map () 37.9 kB  [rendered]\nchunk {17} 17.js, 17.js.map () 75.5 kB  [rendered]\nchunk {18} 18.js, 18.js.map () 17.2 kB  [rendered]\nchunk {19} 19.js, 19.js.map () 42.4 kB  [rendered]\nchunk {20} 20.js, 20.js.map () 32.5 kB  [rendered]\nchunk {21} 21.js, 21.js.map () 44.5 kB  [rendered]\nchunk {22} 22.js, 22.js.map () 24.4 kB  [rendered]\nchunk {23} 23.js, 23.js.map () 21.8 kB  [rendered]\nchunk {24} 24.js, 24.js.map () 18.1 kB  [rendered]\nchunk {25} 25.js, 25.js.map () 30.8 kB  [rendered]\nchunk {26} 26.js, 26.js.map () 60.1 kB  [rendered]\nchunk {27} 27.js, 27.js.map () 15.5 kB  [rendered]\nchunk {28} 28.js, 28.js.map () 7.88 kB  [rendered]\nchunk {29} 29.js, 29.js.map () 38.6 kB  [rendered]\nchunk {30} 30.js, 30.js.map () 34.8 kB  [rendered]\nchunk {31} 31.js, 31.js.map () 40.8 kB  [rendered]\nchunk {32} 32.js, 32.js.map () 30.3 kB  [rendered]\nchunk {33} 33.js, 33.js.map () 67.9 kB  [rendered]\nchunk {34} 34.js, 34.js.map () 8.45 kB  [rendered]\nchunk {35} 35.js, 35.js.map () 10.6 kB  [rendered]\nchunk {36} 36.js, 36.js.map () 25.7 kB  [rendered]\nchunk {37} 37.js, 37.js.map () 13.3 kB  [rendered]\nchunk {38} 38.js, 38.js.map () 1.99 kB  [rendered]\nchunk {39} 39.js, 39.js.map () 19.9 kB  [rendered]\nchunk {40} 40.js, 40.js.map () 25.8 kB  [rendered]\nchunk {41} 41.js, 41.js.map () 19 kB  [rendered]\nchunk {42} 42.js, 42.js.map () 23.1 kB  [rendered]\nchunk {common} common.js, common.js.map (common) 16.4 kB  [rendered]\nchunk {cordova} cordova.js (cordova) 50.5 kB [entry] [rendered]\nchunk {focus-visible-15ada7f7-js} focus-visible-15ada7f7-js.js, focus-visible-15ada7f7-js.js.map (focus-visible-15ada7f7-js) 2.19 kB  [rendered]\nchunk {input-shims-ba28b23a-js} input-shims-ba28b23a-js.js, input-shims-ba28b23a-js.js.map (input-shims-ba28b23a-js) 18.8 kB  [rendered]\nchunk {keyboard-dd970efc-js} keyboard-dd970efc-js.js, keyboard-dd970efc-js.js.map (keyboard-dd970efc-js) 6.26 kB  [rendered]\nchunk {main} main.js, main.js.map (main) 2.05 MB [initial] [rendered]\nchunk {polyfills} polyfills.js, polyfills.js.map (polyfills) 316 kB [initial] [rendered]\nchunk {polyfills-core-js} polyfills-core-js.js, polyfills-core-js.js.map (polyfills-core-js) 92.4 kB  [rendered]\nchunk {polyfills-css-shim} polyfills-css-shim.js, polyfills-css-shim.js.map (polyfills-css-shim) 12.3 kB  [rendered]\nchunk {polyfills-dom} polyfills-dom.js, polyfills-dom.js.map (polyfills-dom) 46.3 kB  [rendered]\nchunk {polyfills-es5} polyfills-es5.js, polyfills-es5.js.map (polyfills-es5) 716 kB [initial] [rendered]\nchunk {runtime} runtime.js, runtime.js.map (runtime) 9.49 kB [entry] [rendered]\nchunk {scripts} scripts.js, scripts.js.map (scripts) 183 kB [entry] [rendered]\nchunk {shadow-css-c63963b5-js} shadow-css-c63963b5-js.js, shadow-css-c63963b5-js.js.map (shadow-css-c63963b5-js) 16.8 kB  [rendered]\nchunk {status-tap-0b3e89c4-js} status-tap-0b3e89c4-js.js, status-tap-0b3e89c4-js.js.map (status-tap-0b3e89c4-js) 1.65 kB  [rendered]\nchunk {styles} styles.js, styles.js.map (styles) 397 kB [initial] [rendered]\nchunk {swipe-back-2c765762-js} swipe-back-2c765762-js.js, swipe-back-2c765762-js.js.map (swipe-back-2c765762-js) 3.1 kB  [rendered]\nchunk {swiper-bundle-95afeea2-js} swiper-bundle-95afeea2-js.js, swiper-bundle-95afeea2-js.js.map (swiper-bundle-95afeea2-js) 238 kB  [rendered]\nchunk {tap-click-9e4a1234-js} tap-click-9e4a1234-js.js, tap-click-9e4a1234-js.js.map (tap-click-9e4a1234-js) 6.32 kB  [rendered]\nchunk {vendor} vendor.js, vendor.js.map (vendor) 9.77 MB [initial] [rendered]\nDate: 2023-01-03T19:56:33.863Z - Hash: 518561a4d614df36ad6e - Time: 15367ms\n> cordova build browser\n\nYou have been opted out of telemetry. To change this, run: cordova telemetry on.\nRemoving intermediate container 786109bcae9d\n ---> 2a36ee4e8fd2\nStep 9/17 : FROM nginx:1.14.1-alpine\n1.14.1-alpine: Pulling from library/nginx\n4fe2ade4980c: Pulling fs layer\nc691664ebb08: Pulling fs layer\na6f6a50701b6: Pulling fs layer\n5980ba3b5a39: Pulling fs layer\n5980ba3b5a39: Waiting\n4fe2ade4980c: Verifying Checksum\na6f6a50701b6: Verifying Checksum\na6f6a50701b6: Download complete\nc691664ebb08: Verifying Checksum\nc691664ebb08: Download complete\n5980ba3b5a39: Verifying Checksum\n5980ba3b5a39: Download complete\n4fe2ade4980c: Pull complete\nc691664ebb08: Pull complete\na6f6a50701b6: Pull complete\n5980ba3b5a39: Pull complete\nDigest: sha256:3c1380fd5f6f0e4c468a922ed6331831e60cea9db317b8ac4a8ad36335e53bbd\nStatus: Downloaded newer image for nginx:1.14.1-alpine\n ---> 77bae8d00654\nStep 10/17 : COPY nginx.conf /etc/nginx/nginx.conf\n ---> 9d90463afe93\nStep 11/17 : RUN rm -rf /usr/share/nginx/html/*\n ---> Running in 2a2acb9572c5\nRemoving intermediate container 2a2acb9572c5\n ---> dec545f2a802\nStep 12/17 : COPY --from=builder /app/platforms/browser/www/ /usr/share/nginx/html\n ---> d47fab930eba\nStep 13/17 : COPY --from=builder /app/src/chat-config-template.json /usr/share/nginx/html\n ---> 1391de3f4563\nStep 14/17 : COPY --from=builder /app/src/firebase-messaging-sw-template.js /usr/share/nginx/html\n ---> de4493141015\nStep 15/17 : WORKDIR /usr/share/nginx/html\n ---> Running in 99cfd171f28c\nRemoving intermediate container 99cfd171f28c\n ---> ff1870b6e738\nStep 16/17 : RUN echo \"Chat21 Ionic Started!!\"\n ---> Running in feab617a0119\nChat21 Ionic Started!!\nRemoving intermediate container feab617a0119\n ---> 66572e860c9b\nStep 17/17 : CMD [\"/bin/sh\",  \"-c\",  \"envsubst < /usr/share/nginx/html/chat-config-template.json > /usr/share/nginx/html/chat-config.json && envsubst < /usr/share/nginx/html/firebase-messaging-sw-template.js > /usr/share/nginx/html/firebase-messaging-sw.js && exec nginx -g 'daemon off;'\"]\n ---> Running in 8702738349a9\nRemoving intermediate container 8702738349a9\n ---> ff05080c6ff8\nSuccessfully built ff05080c6ff8\nSuccessfully tagged chat21-ionic:latest\n","stderr":"","imageSize":54871043},"repair":{"violations":[{"name":"npmCacheCleanAfterInstall","position":{"start":5,"end":5,"columnStart":4,"columnEnd":38}},{"name":"npmCacheCleanAfterInstall","position":{"start":11,"end":11,"columnStart":4,"columnEnd":15}}],"repairedDockerfile":"### STAGE 1: Build ###\n\n# We label our stage as â€˜builderâ€™\nFROM node:10-alpine as builder\n\nRUN npm install -g ionic cordova@8.0.0\n\nWORKDIR /app\n\nCOPY . ./\n\nRUN npm install\n\nRUN mkdir -p ./www\n\nRUN cordova platform add browser@latest\n\nRUN ionic cordova build browser\n\n### STAGE 2: Setup ###\n\nFROM nginx:1.14.1-alpine\n\n## Copy our default nginx config\nCOPY nginx.conf /etc/nginx/nginx.conf\n\n## Remove default nginx website\nRUN rm -rf /usr/share/nginx/html/*\n\nCOPY --from=builder /app/platforms/browser/www/ /usr/share/nginx/html\nCOPY --from=builder /app/src/chat-config-template.json /usr/share/nginx/html\nCOPY --from=builder /app/src/firebase-messaging-sw-template.js /usr/share/nginx/html\n\n\n\nWORKDIR /usr/share/nginx/html\n\nRUN echo \"Chat21 Ionic Started!!\"\n\nCMD [\"/bin/sh\",  \"-c\",  \"envsubst < /usr/share/nginx/html/chat-config-template.json > /usr/share/nginx/html/chat-config.json && envsubst < /usr/share/nginx/html/firebase-messaging-sw-template.js > /usr/share/nginx/html/firebase-messaging-sw.js && exec nginx -g 'daemon off;'\"]\n\n\n"},"repairedBuild":{"startTimestamp":1672775904124,"endTimestamp":1672776579418,"error":null,"stdout":"Sending build context to Docker daemon  22.83MB\r\r\nStep 1/17 : FROM node:10-alpine as builder\n ---> aa67ba258e18\nStep 2/17 : RUN npm install -g ionic cordova@8.0.0\n ---> Running in 69cec89ffd34\n\u001b[91mnpm\u001b[0m\u001b[91m WARN \u001b[0m\u001b[91mdeprecated ionic@5.4.16: The Ionic CLI now uses âœ¨ @ionic/cli âœ¨ for its package name! ðŸ‘‰ https://twitter.com/ionicframework/status/1223268498362851330\n\u001b[0m\u001b[91mnpm WARN deprecated uuid@2.0.3: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.\n\u001b[0m\u001b[91mnpm WARN deprecated xmldom@0.1.31: Deprecated due to CVE-2021-21366 resolved in 0.5.0\n\u001b[0m\u001b[91mnpm WARN deprecated request@2.79.0: request has been deprecated, see https://github.com/request/request/issues/3142\n\u001b[0m\u001b[91mnpm WARN deprecated tar@2.2.1: This version of tar is no longer supported, and will not receive security updates. Please upgrade asap.\n\u001b[0m\u001b[91mnpm WARN deprecated querystring@0.2.0: The querystring API is considered Legacy. new code should use the URLSearchParams API instead.\n\u001b[0m\u001b[91mnpm WARN deprecated har-validator@2.0.6: this library is no longer supported\n\u001b[0m\u001b[91mnpm WARN deprecated hawk@3.1.3: This module moved to @hapi/hawk. Please make sure to switch over as this distribution is no longer supported and may contain bugs and critical security issues.\n\u001b[0m\u001b[91mnpm WARN deprecated uuid@3.4.0: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.\n\u001b[0m\u001b[91mnpm WARN deprecated boom@2.10.1: This version has been deprecated in accordance with the hapi support policy (hapi.im/support). Please upgrade to the latest version to get the best features, bug fixes, and security patches. If you are unable to upgrade at this time, paid support is available for older versions (hapi.im/commercial).\n\u001b[0m\u001b[91mnpm WARN deprecated sntp@1.0.9: This module moved to @hapi/sntp. Please make sure to switch over as this distribution is no longer supported and may contain bugs and critical security issues.\n\u001b[0m\u001b[91mnpm WARN deprecated hoek@2.16.3: This version has been deprecated in accordance with the hapi support policy (hapi.im/support). Please upgrade to the latest version to get the best features, bug fixes, and security patches. If you are unable to upgrade at this time, paid support is available for older versions (hapi.im/commercial).\n\u001b[0m\u001b[91mnpm WARN deprecated cryptiles@2.0.5: This version has been deprecated in accordance with the hapi support policy (hapi.im/support). Please upgrade to the latest version to get the best features, bug fixes, and security patches. If you are unable to upgrade at this time, paid support is available for older versions (hapi.im/commercial).\n\u001b[0m\u001b[91mnpm WARN deprecated superagent@4.1.0: Please upgrade to v7.0.2+ of superagent.  We have fixed numerous issues with streams, form-data, attach(), filesystem errors not bubbling up (ENOENT on attach()), and all tests are now passing.  See the releases tab for more information at <https://github.com/visionmedia/superagent/releases>.\n\u001b[0m\u001b[91mnpm WARN deprecated formidable@1.2.6: Please upgrade to latest, formidable@v2 or formidable@v3! Check these notes: https://bit.ly/2ZEqIau\n\u001b[0m/usr/local/bin/cordova -> /usr/local/lib/node_modules/cordova/bin/cordova\n/usr/local/bin/ionic -> /usr/local/lib/node_modules/ionic/bin/ionic\n+ cordova@8.0.0\n+ ionic@5.4.16\nadded 666 packages from 460 contributors in 41.641s\nRemoving intermediate container 69cec89ffd34\n ---> 629d025265ae\nStep 3/17 : WORKDIR /app\n ---> Running in e9f279a6cfa0\nRemoving intermediate container e9f279a6cfa0\n ---> aaff8c1b7646\nStep 4/17 : COPY . ./\n ---> 37852b3469b3\nStep 5/17 : RUN npm install\n ---> Running in 7ffa5b37324c\n\n> sharp@0.25.4 install /app/node_modules/sharp\n> (node install/libvips && node install/dll-copy && prebuild-install --runtime=napi) || (node-gyp rebuild && node install/dll-copy)\n\n\u001b[91minfo\u001b[0m\u001b[91m \u001b[0m\u001b[91msharp\u001b[0m\u001b[91m Downloading https://github.com/lovell/sharp-libvips/releases/download/v8.9.1/libvips-8.9.1-linuxmusl-x64.tar.gz\n\u001b[0m\n> core-js@3.6.4 postinstall /app/node_modules/@angular-devkit/build-angular/node_modules/core-js\n> node -e \"try{require('./postinstall')}catch(e){}\"\n\n\u001b[96mThank you for using core-js (\u001b[94m https://github.com/zloirock/core-js \u001b[96m) for polyfilling JavaScript standard library!\u001b[0m\n\n\u001b[96mThe project needs your help! Please consider supporting of core-js on Open Collective or Patreon: \u001b[0m\n\u001b[96m>\u001b[94m https://opencollective.com/core-js \u001b[0m\n\u001b[96m>\u001b[94m https://www.patreon.com/zloirock \u001b[0m\n\n\u001b[96mAlso, the author of core-js (\u001b[94m https://github.com/zloirock \u001b[96m) is looking for a good job -)\u001b[0m\n\n\n> core-js@3.6.5 postinstall /app/node_modules/@firebase/polyfill/node_modules/core-js\n> node -e \"try{require('./postinstall')}catch(e){}\"\n\n\u001b[96mThank you for using core-js (\u001b[94m https://github.com/zloirock/core-js \u001b[96m) for polyfilling JavaScript standard library!\u001b[0m\n\n\u001b[96mThe project needs your help! Please consider supporting of core-js on Open Collective or Patreon: \u001b[0m\n\u001b[96m>\u001b[94m https://opencollective.com/core-js \u001b[0m\n\u001b[96m>\u001b[94m https://www.patreon.com/zloirock \u001b[0m\n\n\u001b[96mAlso, the author of core-js (\u001b[94m https://github.com/zloirock \u001b[96m) is looking for a good job -)\u001b[0m\n\n\n> core-js@2.6.11 postinstall /app/node_modules/core-js\n> node -e \"try{require('./postinstall')}catch(e){}\"\n\n\u001b[96mThank you for using core-js (\u001b[94m https://github.com/zloirock/core-js \u001b[96m) for polyfilling JavaScript standard library!\u001b[0m\n\n\u001b[96mThe project needs your help! Please consider supporting of core-js on Open Collective or Patreon: \u001b[0m\n\u001b[96m>\u001b[94m https://opencollective.com/core-js \u001b[0m\n\u001b[96m>\u001b[94m https://www.patreon.com/zloirock \u001b[0m\n\n\u001b[96mAlso, the author of core-js (\u001b[94m https://github.com/zloirock \u001b[96m) is looking for a good job -)\u001b[0m\n\n\n> protobufjs@6.11.2 postinstall /app/node_modules/protobufjs\n> node scripts/postinstall\n\n\n> @angular/cli@8.3.29 postinstall /app/node_modules/@angular/cli\n> node ./bin/postinstall/script.js\n\n\u001b[91mnpm \u001b[0m\u001b[91mWARN\u001b[0m\u001b[91m @chat21/chat21-ionic@3.0.6-2.3 No repository field.\n\u001b[0m\u001b[91mnpm WARN\u001b[0m\u001b[91m @chat21/chat21-ionic@3.0.6-2.3 No license field.\n\u001b[0m\u001b[91mnpm WARN optional\u001b[0m\u001b[91m SKIPPING OPTIONAL DEPENDENCY: fsevents@1.2.13 (node_modules/webpack-dev-server/node_modules/fsevents):\n\u001b[0m\u001b[91mnpm WARN notsup\u001b[0m\u001b[91m SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.2.13: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91mnpm WARN optional\u001b[0m\u001b[91m SKIPPING OPTIONAL DEPENDENCY: fsevents@1.2.13 (node_modules/watchpack-chokidar2/node_modules/fsevents):\n\u001b[0m\u001b[91mnpm WARN notsup\u001b[0m\u001b[91m SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.2.13: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91mnpm WARN optional\u001b[0m\u001b[91m SKIPPING OPTIONAL DEPENDENCY: fsevents@1.2.13 (node_modules/karma/node_modules/fsevents):\nnpm \u001b[0m\u001b[91mWARN notsup\u001b[0m\u001b[91m SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.2.13: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@1.2.13 (node_modules/@angular/compiler-cli/node_modules/fsevents):\n\u001b[0m\u001b[91mnpm WARN\u001b[0m\u001b[91m notsup\u001b[0m\u001b[91m SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.2.13: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@2.1.3 (node_modules/fsevents):\n\u001b[0m\u001b[91mnpm WARN notsup\u001b[0m\u001b[91m SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.1.3: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91m\n\u001b[0madded 1734 packages from 1344 contributors and audited 1745 packages in 48.334s\n\n55 packages are looking for funding\n  run `npm fund` for details\n\nfound 264 vulnerabilities (12 low, 76 moderate, 137 high, 39 critical)\n  run `npm audit fix` to fix them, or `npm audit` for details\nRemoving intermediate container 7ffa5b37324c\n ---> b3eb2c4f6452\nStep 6/17 : RUN mkdir -p ./www\n ---> Running in d185ec3ce1af\nRemoving intermediate container d185ec3ce1af\n ---> 60b00065c3a8\nStep 7/17 : RUN cordova platform add browser@latest\n ---> Running in 4641980fde38\n\nYou have been opted out of telemetry. To change this, run: cordova telemetry on.\nUsing cordova-fetch for cordova-browser@latest\nAdding browser project...\nCreating Cordova project for cordova-browser:\n\tPath: /app/platforms/browser\n\tName: Chat21\nDiscovered plugin \"cordova-android-support-gradle-release\" in config.xml. Adding it to the project\nInstalling \"cordova-android-support-gradle-release\" for browser\nAdding cordova-android-support-gradle-release to package.json\nSaved plugin info for \"cordova-android-support-gradle-release\" to config.xml\nDiscovered plugin \"cordova-plugin-chooser\" in config.xml. Adding it to the project\nInstalling \"cordova-plugin-chooser\" for browser\nAdding cordova-plugin-chooser to package.json\nSaved plugin info for \"cordova-plugin-chooser\" to config.xml\nDiscovered plugin \"cordova-plugin-ionic-keyboard\" in config.xml. Adding it to the project\nInstalling \"cordova-plugin-ionic-keyboard\" for browser\nAdding cordova-plugin-ionic-keyboard to package.json\nSaved plugin info for \"cordova-plugin-ionic-keyboard\" to config.xml\nDiscovered plugin \"cordova-plugin-ionic-webview\" in config.xml. Adding it to the project\nInstalling \"cordova-plugin-ionic-webview\" for browser\nAdding cordova-plugin-ionic-webview to package.json\nSaved plugin info for \"cordova-plugin-ionic-webview\" to config.xml\nDiscovered plugin \"cordova-plugin-network-information\" in config.xml. Adding it to the project\nInstalling \"cordova-plugin-network-information\" for browser\nAdding cordova-plugin-network-information to package.json\nSaved plugin info for \"cordova-plugin-network-information\" to config.xml\nDiscovered plugin \"cordova-plugin-splashscreen\" in config.xml. Adding it to the project\nInstalling \"cordova-plugin-splashscreen\" for browser\nAdding cordova-plugin-splashscreen to package.json\nSaved plugin info for \"cordova-plugin-splashscreen\" to config.xml\nDiscovered plugin \"cordova-plugin-statusbar\" in config.xml. Adding it to the project\nInstalling \"cordova-plugin-statusbar\" for browser\nAdding cordova-plugin-statusbar to package.json\nSaved plugin info for \"cordova-plugin-statusbar\" to config.xml\nDiscovered plugin \"cordova-plugin-whitelist\" in config.xml. Adding it to the project\nInstalling \"cordova-plugin-whitelist\" for browser\nAdding cordova-plugin-whitelist to package.json\nSaved plugin info for \"cordova-plugin-whitelist\" to config.xml\n--save flag or autosave detected\nSaving browser@latest into config.xml file ...\nRemoving intermediate container 4641980fde38\n ---> 4dbff420eec6\nStep 8/17 : RUN ionic cordova build browser\n ---> Running in 3545626ea2db\n> ng run app:ionic-cordova-build --platform=browser\n\nchunk {0} 0.js, 0.js.map () 33.3 kB  [rendered]\nchunk {1} 1.js, 1.js.map () 52 kB  [rendered]\nchunk {2} 2.js, 2.js.map () 79.2 kB  [rendered]\nchunk {3} 3.js, 3.js.map () 6.42 kB  [rendered]\nchunk {4} 4.js, 4.js.map () 18.1 kB  [rendered]\nchunk {5} 5.js, 5.js.map () 3.98 kB  [rendered]\nchunk {6} 6.js, 6.js.map () 35.1 kB  [rendered]\nchunk {7} 7.js, 7.js.map () 17.4 kB  [rendered]\nchunk {8} 8.js, 8.js.map () 12.2 kB  [rendered]\nchunk {9} 9.js, 9.js.map () 9.81 kB  [rendered]\nchunk {10} 10.js, 10.js.map () 16.9 kB  [rendered]\nchunk {11} 11.js, 11.js.map () 86.6 kB  [rendered]\nchunk {12} 12.js, 12.js.map () 29.2 kB  [rendered]\nchunk {13} 13.js, 13.js.map () 4.22 kB  [rendered]\nchunk {14} 14.js, 14.js.map () 16.5 kB  [rendered]\nchunk {15} 15.js, 15.js.map () 22.5 kB  [rendered]\nchunk {16} 16.js, 16.js.map () 37.9 kB  [rendered]\nchunk {17} 17.js, 17.js.map () 75.5 kB  [rendered]\nchunk {18} 18.js, 18.js.map () 17.2 kB  [rendered]\nchunk {19} 19.js, 19.js.map () 42.4 kB  [rendered]\nchunk {20} 20.js, 20.js.map () 32.5 kB  [rendered]\nchunk {21} 21.js, 21.js.map () 44.5 kB  [rendered]\nchunk {22} 22.js, 22.js.map () 24.4 kB  [rendered]\nchunk {23} 23.js, 23.js.map () 21.8 kB  [rendered]\nchunk {24} 24.js, 24.js.map () 18.1 kB  [rendered]\nchunk {25} 25.js, 25.js.map () 30.8 kB  [rendered]\nchunk {26} 26.js, 26.js.map () 60.1 kB  [rendered]\nchunk {27} 27.js, 27.js.map () 15.5 kB  [rendered]\nchunk {28} 28.js, 28.js.map () 7.88 kB  [rendered]\nchunk {29} 29.js, 29.js.map () 38.6 kB  [rendered]\nchunk {30} 30.js, 30.js.map () 34.8 kB  [rendered]\nchunk {31} 31.js, 31.js.map () 40.8 kB  [rendered]\nchunk {32} 32.js, 32.js.map () 30.3 kB  [rendered]\nchunk {33} 33.js, 33.js.map () 67.9 kB  [rendered]\nchunk {34} 34.js, 34.js.map () 8.45 kB  [rendered]\nchunk {35} 35.js, 35.js.map () 10.6 kB  [rendered]\nchunk {36} 36.js, 36.js.map () 25.7 kB  [rendered]\nchunk {37} 37.js, 37.js.map () 13.3 kB  [rendered]\nchunk {38} 38.js, 38.js.map () 1.99 kB  [rendered]\nchunk {39} 39.js, 39.js.map () 19.9 kB  [rendered]\nchunk {40} 40.js, 40.js.map () 25.8 kB  [rendered]\nchunk {41} 41.js, 41.js.map () 19 kB  [rendered]\nchunk {42} 42.js, 42.js.map () 23.1 kB  [rendered]\nchunk {common} common.js, common.js.map (common) 16.4 kB  [rendered]\nchunk {cordova} cordova.js (cordova) 50.5 kB [entry] [rendered]\nchunk {focus-visible-15ada7f7-js} focus-visible-15ada7f7-js.js, focus-visible-15ada7f7-js.js.map (focus-visible-15ada7f7-js) 2.19 kB  [rendered]\nchunk {input-shims-ba28b23a-js} input-shims-ba28b23a-js.js, input-shims-ba28b23a-js.js.map (input-shims-ba28b23a-js) 18.8 kB  [rendered]\nchunk {keyboard-dd970efc-js} keyboard-dd970efc-js.js, keyboard-dd970efc-js.js.map (keyboard-dd970efc-js) 6.26 kB  [rendered]\nchunk {main} main.js, main.js.map (main) 2.05 MB [initial] [rendered]\nchunk {polyfills} polyfills.js, polyfills.js.map (polyfills) 316 kB [initial] [rendered]\nchunk {polyfills-core-js} polyfills-core-js.js, polyfills-core-js.js.map (polyfills-core-js) 92.4 kB  [rendered]\nchunk {polyfills-css-shim} polyfills-css-shim.js, polyfills-css-shim.js.map (polyfills-css-shim) 12.3 kB  [rendered]\nchunk {polyfills-dom} polyfills-dom.js, polyfills-dom.js.map (polyfills-dom) 46.3 kB  [rendered]\nchunk {polyfills-es5} polyfills-es5.js, polyfills-es5.js.map (polyfills-es5) 716 kB [initial] [rendered]\nchunk {runtime} runtime.js, runtime.js.map (runtime) 9.49 kB [entry] [rendered]\nchunk {scripts} scripts.js, scripts.js.map (scripts) 183 kB [entry] [rendered]\nchunk {shadow-css-c63963b5-js} shadow-css-c63963b5-js.js, shadow-css-c63963b5-js.js.map (shadow-css-c63963b5-js) 16.8 kB  [rendered]\nchunk {status-tap-0b3e89c4-js} status-tap-0b3e89c4-js.js, status-tap-0b3e89c4-js.js.map (status-tap-0b3e89c4-js) 1.65 kB  [rendered]\nchunk {styles} styles.js, styles.js.map (styles) 397 kB [initial] [rendered]\nchunk {swipe-back-2c765762-js} swipe-back-2c765762-js.js, swipe-back-2c765762-js.js.map (swipe-back-2c765762-js) 3.1 kB  [rendered]\nchunk {swiper-bundle-95afeea2-js} swiper-bundle-95afeea2-js.js, swiper-bundle-95afeea2-js.js.map (swiper-bundle-95afeea2-js) 238 kB  [rendered]\nchunk {tap-click-9e4a1234-js} tap-click-9e4a1234-js.js, tap-click-9e4a1234-js.js.map (tap-click-9e4a1234-js) 6.32 kB  [rendered]\nchunk {vendor} vendor.js, vendor.js.map (vendor) 9.77 MB [initial] [rendered]\nDate: 2023-01-03T20:08:11.611Z - Hash: 518561a4d614df36ad6e - Time: 15256ms\n> cordova build browser\n\nYou have been opted out of telemetry. To change this, run: cordova telemetry on.\nRemoving intermediate container 3545626ea2db\n ---> 17cb8b63d52c\nStep 9/17 : FROM nginx:1.14.1-alpine\n ---> 77bae8d00654\nStep 10/17 : COPY nginx.conf /etc/nginx/nginx.conf\n ---> 6e4b1f15269a\nStep 11/17 : RUN rm -rf /usr/share/nginx/html/*\n ---> Running in 70352e90dc45\nRemoving intermediate container 70352e90dc45\n ---> 33d518932056\nStep 12/17 : COPY --from=builder /app/platforms/browser/www/ /usr/share/nginx/html\n ---> b99a141b3c30\nStep 13/17 : COPY --from=builder /app/src/chat-config-template.json /usr/share/nginx/html\n ---> 9446c202be76\nStep 14/17 : COPY --from=builder /app/src/firebase-messaging-sw-template.js /usr/share/nginx/html\n ---> efbbb2cd8aa3\nStep 15/17 : WORKDIR /usr/share/nginx/html\n ---> Running in e57b516a3119\nRemoving intermediate container e57b516a3119\n ---> 9877c8d4c66a\nStep 16/17 : RUN echo \"Chat21 Ionic Started!!\"\n ---> Running in ce64b4e8c4e9\nChat21 Ionic Started!!\nRemoving intermediate container ce64b4e8c4e9\n ---> 2f6ffbebf4cc\nStep 17/17 : CMD [\"/bin/sh\",  \"-c\",  \"envsubst < /usr/share/nginx/html/chat-config-template.json > /usr/share/nginx/html/chat-config.json && envsubst < /usr/share/nginx/html/firebase-messaging-sw-template.js > /usr/share/nginx/html/firebase-messaging-sw.js && exec nginx -g 'daemon off;'\"]\n ---> Running in f4bfc42c07d2\nRemoving intermediate container f4bfc42c07d2\n ---> 44c58f4dc1a6\nSuccessfully built 44c58f4dc1a6\nSuccessfully tagged chat21-ionic:latest\n","stderr":"","imageSize":54871043},"endTime":1672776580014}