{"repository":"https://github.com/valocode/bubbly","dockerfilePath":"Dockerfile","startTime":1673082966234,"endTime":1673083462990,"clone":{"startTime":1673082966235,"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/valocode/bubbly'...\n","error":null,"endTime":1673082967958,"commit":"aca7f8deb2e02c62583a5a0e3599f5c1cb096a3b"},"originalBuild":{"startTime":1673082968047,"endTime":1673083263844,"error":null,"stdout":"Sending build context to Docker daemon  23.83MB\r\r\nStep 1/20 : FROM node:16.8.0-buster as ui\n16.8.0-buster: Pulling from library/node\n8f04e8168e38: Pulling fs layer\n82e5f66f5d0e: Pulling fs layer\nc1c8f1c77d66: Pulling fs layer\n5095cab27771: Pulling fs layer\nea7fe362a971: Pulling fs layer\n9000ed6ad541: Pulling fs layer\nf64d13e9f3f2: Pulling fs layer\nb36e0273922e: Pulling fs layer\n48d4aea366a2: Pulling fs layer\nea7fe362a971: Waiting\n48d4aea366a2: Waiting\nb36e0273922e: Waiting\n9000ed6ad541: Waiting\n5095cab27771: Waiting\n82e5f66f5d0e: Verifying Checksum\n82e5f66f5d0e: Download complete\nc1c8f1c77d66: Verifying Checksum\nc1c8f1c77d66: Download complete\n8f04e8168e38: Verifying Checksum\n8f04e8168e38: Download complete\n9000ed6ad541: Download complete\n5095cab27771: Verifying Checksum\n5095cab27771: Download complete\nb36e0273922e: Verifying Checksum\nb36e0273922e: Download complete\nf64d13e9f3f2: Verifying Checksum\nf64d13e9f3f2: Download complete\n48d4aea366a2: Verifying Checksum\n48d4aea366a2: Download complete\n8f04e8168e38: Pull complete\nea7fe362a971: Verifying Checksum\nea7fe362a971: Download complete\n82e5f66f5d0e: Pull complete\nc1c8f1c77d66: Pull complete\n5095cab27771: Pull complete\nea7fe362a971: Pull complete\n9000ed6ad541: Pull complete\nf64d13e9f3f2: Pull complete\nb36e0273922e: Pull complete\n48d4aea366a2: Pull complete\nDigest: sha256:ba82c1fd24e2b735ca0e980f1d227e48b2debb641315c3e9ad72d220a5a534e4\nStatus: Downloaded newer image for node:16.8.0-buster\n ---> 5253bf937d3e\nStep 2/20 : WORKDIR /work\n ---> Running in f92c1abeedc8\nRemoving intermediate container f92c1abeedc8\n ---> 112a80d541c1\nStep 3/20 : COPY ui/package*.json ./\n ---> 847a04a0bf5a\nStep 4/20 : RUN npm install\n ---> Running in 2054c3972c06\n\nadded 325 packages, and audited 326 packages in 7s\n\n52 packages are looking for funding\n  run `npm fund` for details\n\n9 vulnerabilities (3 moderate, 5 high, 1 critical)\n\nTo address all issues, run:\n  npm audit fix\n\nRun `npm audit` for details.\n\u001b[91mnpm notice \nnpm notice New major version of npm available! 7.21.0 -> 9.2.0\nnpm notice Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm notice Run `npm install -g npm@9.2.0` to update!\nnpm notice \n\u001b[0mRemoving intermediate container 2054c3972c06\n ---> e129232bf442\nStep 5/20 : COPY ui .\n ---> 59f6d31c9b16\nStep 6/20 : RUN npm run build\n ---> Running in aa5148214ffc\n\n> bubbly@0.0.1 build\n> svelte-kit build\n\nvite v2.5.3 building for production...\ntransforming...\n\u001b[91m9:16:59 AM [vite-plugin-svelte] /work/src/routes/releases/_releaseRow.svelte:13:2 A11y: 'javascript:void(null);' is not a valid href attribute\n11: <li>\n12:   <a\n13:     href=\"javascript:void(null);\"\n        ^\n14:     class=\"block hover:bg-gray-50\"\n15:     on:click={() => (selectedRelease = release)}\n\u001b[0m\u001b[91mBrowserslist: caniuse-lite is outdated. Please run:\n  npx browserslist@latest --update-db\n  Why you should do it regularly: https://github.com/browserslist/browserslist#browsers-data-updating\n\u001b[0m\u001b[91m\n\u001b[0m\u001b[91mwarn - You have enabled the JIT engine which is currently in preview.\nwarn - Preview features are not covered by semver, may introduce breaking changes, and can change at any time.\n\u001b[0m✓ 99 modules transformed.\nrendering chunks...\n.svelte-kit/output/client/_app/manifest.json                                     2.53 KiB\n.svelte-kit/output/client/_app/pages/index.svelte-cbbf13a7.js                    0.34 KiB / brotli: 0.20 KiB\n.svelte-kit/output/client/_app/pages/__error.svelte-d0e048a9.js                  1.76 KiB / brotli: 0.78 KiB\n.svelte-kit/output/client/_app/pages/releases/projectFilter.svelte-35531856.js   0.14 KiB / brotli: 0.10 KiB\n.svelte-kit/output/client/_app/start-5acf52ad.js                                 18.36 KiB / brotli: 5.76 KiB\n.svelte-kit/output/client/_app/chunks/singletons-12a22614.js                     0.05 KiB / brotli: 0.05 KiB\n.svelte-kit/output/client/_app/chunks/paths-28a87002.js                          0.06 KiB / brotli: 0.07 KiB\n.svelte-kit/output/client/_app/pages/__layout.svelte-0c243ff9.js                 15.86 KiB / brotli: 4.52 KiB\n.svelte-kit/output/client/_app/chunks/Icon-813318d6.js                           9.85 KiB / brotli: 2.41 KiB\n.svelte-kit/output/client/_app/assets/start-464e9d0a.css                         0.19 KiB / brotli: 0.12 KiB\n.svelte-kit/output/client/_app/chunks/projectFilter-f9ea85f3.js                  6.99 KiB / brotli: 2.62 KiB\n.svelte-kit/output/client/_app/pages/releases/index.svelte-7a19ccc7.js           34.67 KiB / brotli: 8.49 KiB\n.svelte-kit/output/client/_app/chunks/vendor-d2f50a30.js                         29.52 KiB / brotli: 10.31 KiB\n.svelte-kit/output/client/_app/assets/pages/__layout.svelte-49f4d6b8.css         24.69 KiB / brotli: 4.62 KiB\nvite v2.5.3 building SSR bundle for production...\ntransforming...\n\u001b[91m9:17:02 AM [vite-plugin-svelte] /work/src/routes/releases/_releaseRow.svelte:13:2 A11y: 'javascript:void(null);' is not a valid href attribute\n11: <li>\n12:   <a\n13:     href=\"javascript:void(null);\"\n        ^\n14:     class=\"block hover:bg-gray-50\"\n15:     on:click={() => (selectedRelease = release)}\n\u001b[0m✓ 43 modules transformed.\nrendering chunks...\n.svelte-kit/output/server/app.js   123.87 KiB\n\nRun npm run preview to preview your production build locally.\n\n> Using @sveltejs/adapter-static\n  ✔ done\nRemoving intermediate container aa5148214ffc\n ---> f331e8ebdb2e\nStep 7/20 : FROM golang:1.17-buster AS builder\n1.17-buster: Pulling from library/golang\n80b89a2b88b2: Pulling fs layer\n5b0405f798f5: Pulling fs layer\nab80b2b0494a: Pulling fs layer\nbb827974c1cb: Pulling fs layer\n107910070fdd: Pulling fs layer\n4a2b7c896891: Pulling fs layer\nbaca0e06c4e4: Pulling fs layer\n4a2b7c896891: Waiting\nbb827974c1cb: Waiting\n107910070fdd: Waiting\nbaca0e06c4e4: Waiting\nab80b2b0494a: Verifying Checksum\nab80b2b0494a: Download complete\n80b89a2b88b2: Verifying Checksum\n80b89a2b88b2: Download complete\n5b0405f798f5: Download complete\nbb827974c1cb: Verifying Checksum\nbb827974c1cb: Download complete\nbaca0e06c4e4: Download complete\n107910070fdd: Verifying Checksum\n107910070fdd: Download complete\n80b89a2b88b2: Pull complete\n4a2b7c896891: Verifying Checksum\n4a2b7c896891: Download complete\n5b0405f798f5: Pull complete\nab80b2b0494a: Pull complete\nbb827974c1cb: Pull complete\n107910070fdd: Pull complete\n4a2b7c896891: Pull complete\nbaca0e06c4e4: Pull complete\nDigest: sha256:cf57fd6a33fee81c4a7450b2017bf862990e796316b30c22f03fd1f6b53ddcec\nStatus: Downloaded newer image for golang:1.17-buster\n ---> 36c834315aca\nStep 8/20 : WORKDIR $GOPATH/src/github.com/valocode/bubbly\n ---> Running in 628ebb8c7912\nRemoving intermediate container 628ebb8c7912\n ---> 3d85ba5bf058\nStep 9/20 : COPY go.sum .\n ---> ec83163b3944\nStep 10/20 : COPY go.mod .\n ---> 7f8256c0d857\nStep 11/20 : RUN go mod download     && go mod verify\n ---> Running in d32eb7642f1c\nall modules verified\nRemoving intermediate container d32eb7642f1c\n ---> d23e7821bd06\nStep 12/20 : COPY . .\n ---> 8a6865ba517d\nStep 13/20 : COPY --from=ui /work/build ui/build\n ---> 7055720f19f3\nStep 14/20 : RUN go build -tags ui -o /go/bin/bubbly\n ---> Running in f462d88571ec\nRemoving intermediate container f462d88571ec\n ---> d57a464e60d3\nStep 15/20 : FROM gcr.io/distroless/base-debian10\nlatest: Pulling from distroless/base-debian10\n2445dbf7678f: Pulling fs layer\nf291067d32d8: Pulling fs layer\n2445dbf7678f: Verifying Checksum\n2445dbf7678f: Download complete\nf291067d32d8: Verifying Checksum\nf291067d32d8: Download complete\n2445dbf7678f: Pull complete\nf291067d32d8: Pull complete\nDigest: sha256:101798a3b76599762d3528635113f0466dc9655ecba82e8e33d410e2bf5cd319\nStatus: Downloaded newer image for gcr.io/distroless/base-debian10:latest\n ---> fd7fe75216cc\nStep 16/20 : COPY --from=builder /go/bin/bubbly /bubbly\n ---> 111c8cb219f4\nStep 17/20 : USER nonroot:nonroot\n ---> Running in 76ed15c8fb5f\nRemoving intermediate container 76ed15c8fb5f\n ---> d97349a92f7f\nStep 18/20 : EXPOSE 8111\n ---> Running in b98140a6e451\nRemoving intermediate container b98140a6e451\n ---> 51bd9ca93ed4\nStep 19/20 : ENTRYPOINT [\"/bubbly\"]\n ---> Running in 688f0ab23083\nRemoving intermediate container 688f0ab23083\n ---> 4ff344b93868\nStep 20/20 : CMD [\"server\"]\n ---> Running in 6d1356963f84\nRemoving intermediate container 6d1356963f84\n ---> 1a0146b0e8c1\nSuccessfully built 1a0146b0e8c1\nSuccessfully tagged bubbly:latest\n","stderr":"","imageSize":85397237},"repair":{"startTime":1673083263920,"endTime":1673083264015,"violations":[{"name":"npmCacheCleanAfterInstall","position":{"start":7,"end":7,"columnStart":4,"columnEnd":15}}],"repairedDockerfile":"# Stage 1 build\nFROM node:16.8.0-buster as ui\n\nWORKDIR /work\n\nCOPY ui/package*.json ./\n\nRUN npm install && npm cache clean --force;\n\nCOPY ui .\n\nRUN npm run build\n\nFROM golang:1.17-buster AS builder\n\nWORKDIR $GOPATH/src/github.com/valocode/bubbly\n\nCOPY go.sum .\nCOPY go.mod .\n\nRUN go mod download \\\n    && go mod verify\n\nCOPY . .\n\n# Copy the built UI over\nCOPY --from=ui /work/build ui/build\n\nRUN go build -tags ui -o /go/bin/bubbly\n\n# step 2 deploy\nFROM gcr.io/distroless/base-debian10\n\n# Copy our static executable.\nCOPY --from=builder /go/bin/bubbly /bubbly\n\n# Use an unprivileged user.\nUSER nonroot:nonroot\n\nEXPOSE 8111\nENTRYPOINT [\"/bubbly\"]\nCMD [\"server\"]\n\n\n"},"repairedBuild":{"startTime":1673083264160,"endTime":1673083462741,"error":null,"stdout":"Sending build context to Docker daemon  23.83MB\r\r\nStep 1/20 : FROM node:16.8.0-buster as ui\n ---> 5253bf937d3e\nStep 2/20 : WORKDIR /work\n ---> Running in 12e1a757ddb2\nRemoving intermediate container 12e1a757ddb2\n ---> 8d16d7feea10\nStep 3/20 : COPY ui/package*.json ./\n ---> cfce0ce09eb3\nStep 4/20 : RUN npm install && npm cache clean --force;\n ---> Running in 8e2eb00432b0\n\nadded 325 packages, and audited 326 packages in 8s\n\n52 packages are looking for funding\n  run `npm fund` for details\n\n9 vulnerabilities (3 moderate, 5 high, 1 critical)\n\nTo address all issues, run:\n  npm audit fix\n\nRun `npm audit` for details.\n\u001b[91mnpm notice \nnpm \u001b[0m\u001b[91mnotice New major version of npm available! 7.21.0 -> 9.2.0\nnpm notice\u001b[0m\u001b[91m Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm\u001b[0m\u001b[91m notice\u001b[0m\u001b[91m Run `npm install -g npm@9.2.0` to update!\nnpm\u001b[0m\u001b[91m \u001b[0m\u001b[91mnotice \n\u001b[0m\u001b[91mnpm\u001b[0m\u001b[91m WARN using --force Recommended protections disabled.\n\u001b[0mRemoving intermediate container 8e2eb00432b0\n ---> a62ea0cf0008\nStep 5/20 : COPY ui .\n ---> 57e8277c433d\nStep 6/20 : RUN npm run build\n ---> Running in 57145c9a1c25\n\n> bubbly@0.0.1 build\n> svelte-kit build\n\nvite v2.5.3 building for production...\ntransforming...\n\u001b[91m9:21:21 AM [vite-plugin-svelte] /work/src/routes/releases/_releaseRow.svelte:13:2 A11y: 'javascript:void(null);' is not a valid href attribute\n11: <li>\n12:   <a\n13:     href=\"javascript:void(null);\"\n        ^\n14:     class=\"block hover:bg-gray-50\"\n15:     on:click={() => (selectedRelease = release)}\n\u001b[0m\u001b[91mBrowserslist: caniuse-lite is outdated. Please run:\n  npx browserslist@latest --update-db\n  Why you should do it regularly: https://github.com/browserslist/browserslist#browsers-data-updating\n\u001b[0m\u001b[91m\n\u001b[0m\u001b[91mwarn - You have enabled the JIT engine which is currently in preview.\nwarn - Preview features are not covered by semver, may introduce breaking changes, and can change at any time.\n\u001b[0m✓ 99 modules transformed.\nrendering chunks...\n.svelte-kit/output/client/_app/manifest.json                                     2.53 KiB\n.svelte-kit/output/client/_app/pages/index.svelte-cbbf13a7.js                    0.34 KiB / brotli: 0.20 KiB\n.svelte-kit/output/client/_app/pages/__error.svelte-d0e048a9.js                  1.76 KiB / brotli: 0.78 KiB\n.svelte-kit/output/client/_app/pages/releases/projectFilter.svelte-35531856.js   0.14 KiB / brotli: 0.10 KiB\n.svelte-kit/output/client/_app/pages/__layout.svelte-0c243ff9.js                 15.86 KiB / brotli: 4.52 KiB\n.svelte-kit/output/client/_app/chunks/singletons-12a22614.js                     0.05 KiB / brotli: 0.05 KiB\n.svelte-kit/output/client/_app/chunks/paths-28a87002.js                          0.06 KiB / brotli: 0.07 KiB\n.svelte-kit/output/client/_app/start-5acf52ad.js                                 18.36 KiB / brotli: 5.76 KiB\n.svelte-kit/output/client/_app/pages/releases/index.svelte-7a19ccc7.js           34.67 KiB / brotli: 8.49 KiB\n.svelte-kit/output/client/_app/assets/start-464e9d0a.css                         0.19 KiB / brotli: 0.12 KiB\n.svelte-kit/output/client/_app/chunks/Icon-813318d6.js                           9.85 KiB / brotli: 2.41 KiB\n.svelte-kit/output/client/_app/chunks/projectFilter-f9ea85f3.js                  6.99 KiB / brotli: 2.62 KiB\n.svelte-kit/output/client/_app/chunks/vendor-d2f50a30.js                         29.52 KiB / brotli: 10.31 KiB\n.svelte-kit/output/client/_app/assets/pages/__layout.svelte-49f4d6b8.css         24.69 KiB / brotli: 4.62 KiB\nvite v2.5.3 building SSR bundle for production...\ntransforming...\n\u001b[91m9:21:24 AM [vite-plugin-svelte] /work/src/routes/releases/_releaseRow.svelte:13:2 A11y: 'javascript:void(null);' is not a valid href attribute\n11: <li>\n12:   <a\n13:     href=\"javascript:void(null);\"\n        ^\n14:     class=\"block hover:bg-gray-50\"\n15:     on:click={() => (selectedRelease = release)}\n\u001b[0m✓ 43 modules transformed.\nrendering chunks...\n.svelte-kit/output/server/app.js   123.87 KiB\n\nRun npm run preview to preview your production build locally.\n\n> Using @sveltejs/adapter-static\n  ✔ done\nRemoving intermediate container 57145c9a1c25\n ---> 09c14cbd5f91\nStep 7/20 : FROM golang:1.17-buster AS builder\n ---> 36c834315aca\nStep 8/20 : WORKDIR $GOPATH/src/github.com/valocode/bubbly\n ---> Running in b1f5cff8ebd8\nRemoving intermediate container b1f5cff8ebd8\n ---> 57bb1ddf08c4\nStep 9/20 : COPY go.sum .\n ---> d92af0be2eea\nStep 10/20 : COPY go.mod .\n ---> e51e597ba888\nStep 11/20 : RUN go mod download     && go mod verify\n ---> Running in 208a5a722ec3\nall modules verified\nRemoving intermediate container 208a5a722ec3\n ---> 242bbd8005ed\nStep 12/20 : COPY . .\n ---> fcc8f02eecbb\nStep 13/20 : COPY --from=ui /work/build ui/build\n ---> b5639b768384\nStep 14/20 : RUN go build -tags ui -o /go/bin/bubbly\n ---> Running in aefb77f0d061\nRemoving intermediate container aefb77f0d061\n ---> 66e7e1032454\nStep 15/20 : FROM gcr.io/distroless/base-debian10\n ---> fd7fe75216cc\nStep 16/20 : COPY --from=builder /go/bin/bubbly /bubbly\n ---> 0e63e792de0c\nStep 17/20 : USER nonroot:nonroot\n ---> Running in 39988c1a08c1\nRemoving intermediate container 39988c1a08c1\n ---> 91dfd3483c85\nStep 18/20 : EXPOSE 8111\n ---> Running in 2a9c8c70d601\nRemoving intermediate container 2a9c8c70d601\n ---> d81f3bd246b9\nStep 19/20 : ENTRYPOINT [\"/bubbly\"]\n ---> Running in ec7f0cac8a5c\nRemoving intermediate container ec7f0cac8a5c\n ---> 384042763a1f\nStep 20/20 : CMD [\"server\"]\n ---> Running in 8f0da89e2ea8\nRemoving intermediate container 8f0da89e2ea8\n ---> 962d4ab67242\nSuccessfully built 962d4ab67242\nSuccessfully tagged bubbly:latest\n","stderr":"","imageSize":85397237}}