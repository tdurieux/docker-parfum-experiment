{"repository":"https://github.com/yunionio/ocboot","dockerfilePath":"Dockerfile","startTime":1673037122492,"endTime":1673037311700,"clone":{"startTime":1673037122492,"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/yunionio/ocboot'...\n","error":null,"endTime":1673037124187,"commit":"c44365958b8e9f5f93e986c29af5c4a65a0456cc"},"originalBuild":{"startTime":1673037124276,"endTime":1673037246390,"error":null,"stdout":"Sending build context to Docker daemon  2.335MB\r\r\nStep 1/8 : FROM registry.cn-beijing.aliyuncs.com/yunionio/ansibleserver-base:v1.1.1\nv1.1.1: Pulling from yunionio/ansibleserver-base\n540db60ca938: Pulling fs layer\n0e6e1a750ac5: Pulling fs layer\n7a2b22977345: Pulling fs layer\n9d6b31966def: Pulling fs layer\nea8807e900f3: Pulling fs layer\n13b79f7b0e52: Pulling fs layer\nabfd6efd301f: Pulling fs layer\n9d6b31966def: Waiting\nea8807e900f3: Waiting\n13b79f7b0e52: Waiting\nabfd6efd301f: Waiting\n0e6e1a750ac5: Verifying Checksum\n0e6e1a750ac5: Download complete\n9d6b31966def: Verifying Checksum\n9d6b31966def: Download complete\n540db60ca938: Download complete\n7a2b22977345: Verifying Checksum\n7a2b22977345: Download complete\nea8807e900f3: Verifying Checksum\nea8807e900f3: Download complete\n540db60ca938: Pull complete\n0e6e1a750ac5: Pull complete\n7a2b22977345: Pull complete\n9d6b31966def: Pull complete\nabfd6efd301f: Verifying Checksum\nabfd6efd301f: Download complete\nea8807e900f3: Pull complete\n13b79f7b0e52: Verifying Checksum\n13b79f7b0e52: Download complete\n13b79f7b0e52: Pull complete\nabfd6efd301f: Pull complete\nDigest: sha256:73af77d649d8e0e3e958510c1d51cd77494cbf195f33dc0006470153b3a87d08\nStatus: Downloaded newer image for registry.cn-beijing.aliyuncs.com/yunionio/ansibleserver-base:v1.1.1\n ---> 84a640ba94d9\nStep 2/8 : RUN apk add --no-cache openssh openssl curl rsync pv mariadb-client\n ---> Running in dfcfa7427efa\nfetch https://mirrors.ustc.edu.cn/alpine/v3.13/main/x86_64/APKINDEX.tar.gz\nfetch https://mirrors.ustc.edu.cn/alpine/v3.13/community/x86_64/APKINDEX.tar.gz\n(1/14) Installing mariadb-common (10.5.17-r0)\n(2/14) Installing libgcc (10.2.1_pre1-r3)\n(3/14) Installing libstdc++ (10.2.1_pre1-r3)\n(4/14) Installing mariadb-client (10.5.17-r0)\n(5/14) Installing openssh-sftp-server (8.4_p1-r4)\n(6/14) Installing openssh-server-common (8.4_p1-r4)\n(7/14) Installing openssh-server (8.4_p1-r4)\n(8/14) Installing openssh (8.4_p1-r4)\n(9/14) Installing openssl (1.1.1s-r0)\n(10/14) Installing pv (1.6.6-r1)\n(11/14) Installing libacl (2.2.53-r0)\n(12/14) Installing popt (1.18-r0)\n(13/14) Installing zstd-libs (1.4.9-r0)\n(14/14) Installing rsync (3.2.5-r0)\nExecuting busybox-1.32.1-r6.trigger\nOK: 524 MiB in 93 packages\nRemoving intermediate container dfcfa7427efa\n ---> f1c48a4b9b82\nStep 3/8 : RUN apk add --no-cache --virtual .build-dependencies     libffi-dev openssl-dev python3-dev build-base py-setuptools rust cargo mariadb-dev &&     pip3 install paramiko mysqlclient &&     apk del --no-network .build-dependencies &&     rm -rf /root/.cache /root/.cargo\n ---> Running in 962c3c722f73\nfetch https://mirrors.ustc.edu.cn/alpine/v3.13/main/x86_64/APKINDEX.tar.gz\nfetch https://mirrors.ustc.edu.cn/alpine/v3.13/community/x86_64/APKINDEX.tar.gz\n(1/44) Installing linux-headers (5.7.8-r0)\n(2/44) Upgrading musl (1.2.2-r0 -> 1.2.2-r1)\n(3/44) Installing pkgconf (1.7.3-r0)\n(4/44) Installing libffi-dev (3.3-r2)\n(5/44) Upgrading libcrypto1.1 (1.1.1k-r0 -> 1.1.1s-r0)\n(6/44) Upgrading libssl1.1 (1.1.1k-r0 -> 1.1.1s-r0)\n(7/44) Installing openssl-dev (1.1.1s-r0)\n(8/44) Upgrading zlib (1.2.11-r3 -> 1.2.12-r3)\n(9/44) Upgrading python3 (3.8.10-r0 -> 3.8.15-r0)\n(10/44) Installing python3-dev (3.8.15-r0)\n(11/44) Installing binutils (2.35.2-r1)\n(12/44) Installing libmagic (5.39-r0)\n(13/44) Installing file (5.39-r0)\n(14/44) Installing libgomp (10.2.1_pre1-r3)\n(15/44) Installing libatomic (10.2.1_pre1-r3)\n(16/44) Installing libgphobos (10.2.1_pre1-r3)\n(17/44) Installing gmp (6.2.1-r1)\n(18/44) Installing isl22 (0.22-r0)\n(19/44) Installing mpfr4 (4.1.0-r0)\n(20/44) Installing mpc1 (1.2.0-r0)\n(21/44) Installing gcc (10.2.1_pre1-r3)\n(22/44) Installing musl-dev (1.2.2-r1)\n(23/44) Installing libc-dev (0.7.2-r3)\n(24/44) Installing g++ (10.2.1_pre1-r3)\n(25/44) Installing make (4.3-r0)\n(26/44) Installing fortify-headers (1.1-r0)\n(27/44) Installing patch (2.7.6-r7)\n(28/44) Installing build-base (0.5-r3)\n(29/44) Installing rust-stdlib (1.47.0-r2)\n(30/44) Installing libxml2 (2.9.14-r2)\n(31/44) Installing llvm10-libs (10.0.1-r1)\n(32/44) Installing rust (1.47.0-r2)\n(33/44) Installing http-parser (2.9.4-r0)\n(34/44) Installing pcre (8.44-r0)\n(35/44) Installing libssh2 (1.9.0-r1)\n(36/44) Installing libgit2 (1.1.0-r1)\n(37/44) Installing cargo (1.47.0-r2)\n(38/44) Installing zlib-dev (1.2.12-r3)\n(39/44) Installing mariadb-connector-c (3.1.11-r0)\n(40/44) Installing mariadb-connector-c-dev (3.1.11-r0)\n(41/44) Installing libaio (0.3.112-r1)\n(42/44) Installing mariadb-embedded (10.5.17-r0)\n(43/44) Installing mariadb-dev (10.5.17-r0)\n(44/44) Installing .build-dependencies (20230106.203321)\nExecuting busybox-1.32.1-r6.trigger\nExecuting ca-certificates-20191127-r5.trigger\nOK: 1047 MiB in 132 packages\nRequirement already satisfied: paramiko in /usr/lib/python3.8/site-packages (2.7.2)\nCollecting mysqlclient\n  Downloading mysqlclient-2.1.1.tar.gz (88 kB)\nRequirement already satisfied: bcrypt>=3.1.3 in /usr/lib/python3.8/site-packages (from paramiko) (3.2.0)\nRequirement already satisfied: cryptography>=2.5 in /usr/lib/python3.8/site-packages (from paramiko) (3.3.2)\nRequirement already satisfied: pynacl>=1.0.1 in /usr/lib/python3.8/site-packages (from paramiko) (1.4.0)\nRequirement already satisfied: cffi>=1.1 in /usr/lib/python3.8/site-packages (from bcrypt>=3.1.3->paramiko) (1.14.4)\nRequirement already satisfied: six>=1.4.1 in /usr/lib/python3.8/site-packages (from bcrypt>=3.1.3->paramiko) (1.15.0)\nRequirement already satisfied: pycparser in /usr/lib/python3.8/site-packages (from cffi>=1.1->bcrypt>=3.1.3->paramiko) (2.20)\nUsing legacy 'setup.py install' for mysqlclient, since package 'wheel' is not installed.\nInstalling collected packages: mysqlclient\n    Running setup.py install for mysqlclient: started\n    Running setup.py install for mysqlclient: finished with status 'done'\nSuccessfully installed mysqlclient-2.1.1\n\u001b[91mWARNING: Ignoring https://mirrors.ustc.edu.cn/alpine/v3.13/main: No such file or directory\nWARNING: Ignoring https://mirrors.ustc.edu.cn/alpine/v3.13/community: No such file or directory\n\u001b[0m(1/39) Purging .build-dependencies (20230106.203321)\n(2/39) Purging libffi-dev (3.3-r2)\n(3/39) Purging linux-headers (5.7.8-r0)\n(4/39) Purging python3-dev (3.8.15-r0)\n(5/39) Purging build-base (0.5-r3)\n(6/39) Purging file (5.39-r0)\n(7/39) Purging g++ (10.2.1_pre1-r3)\n(8/39) Purging make (4.3-r0)\n(9/39) Purging libc-dev (0.7.2-r3)\n(10/39) Purging fortify-headers (1.1-r0)\n(11/39) Purging patch (2.7.6-r7)\n(12/39) Purging cargo (1.47.0-r2)\n(13/39) Purging rust (1.47.0-r2)\n(14/39) Purging rust-stdlib (1.47.0-r2)\n(15/39) Purging gcc (10.2.1_pre1-r3)\n(16/39) Purging binutils (2.35.2-r1)\n(17/39) Purging libatomic (10.2.1_pre1-r3)\n(18/39) Purging libgomp (10.2.1_pre1-r3)\n(19/39) Purging libgphobos (10.2.1_pre1-r3)\n(20/39) Purging musl-dev (1.2.2-r1)\n(21/39) Purging mariadb-dev (10.5.17-r0)\n(22/39) Purging mariadb-connector-c-dev (3.1.11-r0)\n(23/39) Purging openssl-dev (1.1.1s-r0)\n(24/39) Purging zlib-dev (1.2.12-r3)\n(25/39) Purging mariadb-connector-c (3.1.11-r0)\n(26/39) Purging mariadb-embedded (10.5.17-r0)\n(27/39) Purging pkgconf (1.7.3-r0)\n(28/39) Purging libmagic (5.39-r0)\n(29/39) Purging mpc1 (1.2.0-r0)\n(30/39) Purging mpfr4 (4.1.0-r0)\n(31/39) Purging isl22 (0.22-r0)\n(32/39) Purging gmp (6.2.1-r1)\n(33/39) Purging llvm10-libs (10.0.1-r1)\n(34/39) Purging libxml2 (2.9.14-r2)\n(35/39) Purging libgit2 (1.1.0-r1)\n(36/39) Purging http-parser (2.9.4-r0)\n(37/39) Purging pcre (8.44-r0)\n(38/39) Purging libssh2 (1.9.0-r1)\n(39/39) Purging libaio (0.3.112-r1)\nExecuting busybox-1.32.1-r6.trigger\nOK: 524 MiB in 93 packages\nRemoving intermediate container 962c3c722f73\n ---> fd2a9f55fe50\nStep 4/8 : RUN ln -s /usr/bin/python3 /usr/bin/python\n ---> Running in 62d0e89e56cc\nRemoving intermediate container 62d0e89e56cc\n ---> a3269d68dcf8\nStep 5/8 : RUN mkdir -p /opt/ocboot\n ---> Running in 63bf3af27378\nRemoving intermediate container 63bf3af27378\n ---> d225220c47b3\nStep 6/8 : ADD . /opt/ocboot\n ---> db85fceb3c8e\nStep 7/8 : WORKDIR /opt/ocboot\n ---> Running in 75785da57e0e\nRemoving intermediate container 75785da57e0e\n ---> 1bb5ac93541f\nStep 8/8 : ENTRYPOINT [ \"/opt/ocboot/ocboot.py\" ]\n ---> Running in 7b9dabc8e60c\nRemoving intermediate container 7b9dabc8e60c\n ---> 1cd4a45ac413\nSuccessfully built 1cd4a45ac413\nSuccessfully tagged ocboot:latest\n","stderr":"","imageSize":459767187},"repair":{"startTime":1673037246450,"endTime":1673037246540,"violations":[{"name":"pipUseNoCacheDir","position":{"start":4,"end":4,"columnStart":4,"columnEnd":37}}],"repairedDockerfile":"FROM registry.cn-beijing.aliyuncs.com/yunionio/ansibleserver-base:v1.1.1\nRUN apk add --no-cache openssh openssl curl rsync pv mariadb-client\nRUN apk add --no-cache --virtual .build-dependencies \\\n    libffi-dev openssl-dev python3-dev build-base py-setuptools rust cargo mariadb-dev && \\\n    pip3 install --no-cache-dir paramiko mysqlclient && \\\n    apk del --no-network .build-dependencies && \\\n    rm -rf /root/.cache /root/.cargo\nRUN ln -s /usr/bin/python3 /usr/bin/python\nRUN mkdir -p /opt/ocboot\nADD . /opt/ocboot\nWORKDIR /opt/ocboot\nENTRYPOINT [ \"/opt/ocboot/ocboot.py\" ]\n"},"repairedBuild":{"startTime":1673037246790,"endTime":1673037311382,"error":null,"stdout":"Sending build context to Docker daemon  2.335MB\r\r\nStep 1/8 : FROM registry.cn-beijing.aliyuncs.com/yunionio/ansibleserver-base:v1.1.1\n ---> 84a640ba94d9\nStep 2/8 : RUN apk add --no-cache openssh openssl curl rsync pv mariadb-client\n ---> Running in e7d0aedec3d5\nfetch https://mirrors.ustc.edu.cn/alpine/v3.13/main/x86_64/APKINDEX.tar.gz\nfetch https://mirrors.ustc.edu.cn/alpine/v3.13/community/x86_64/APKINDEX.tar.gz\n(1/14) Installing mariadb-common (10.5.17-r0)\n(2/14) Installing libgcc (10.2.1_pre1-r3)\n(3/14) Installing libstdc++ (10.2.1_pre1-r3)\n(4/14) Installing mariadb-client (10.5.17-r0)\n(5/14) Installing openssh-sftp-server (8.4_p1-r4)\n(6/14) Installing openssh-server-common (8.4_p1-r4)\n(7/14) Installing openssh-server (8.4_p1-r4)\n(8/14) Installing openssh (8.4_p1-r4)\n(9/14) Installing openssl (1.1.1s-r0)\n(10/14) Installing pv (1.6.6-r1)\n(11/14) Installing libacl (2.2.53-r0)\n(12/14) Installing popt (1.18-r0)\n(13/14) Installing zstd-libs (1.4.9-r0)\n(14/14) Installing rsync (3.2.5-r0)\nExecuting busybox-1.32.1-r6.trigger\nOK: 524 MiB in 93 packages\nRemoving intermediate container e7d0aedec3d5\n ---> 67e1f001149f\nStep 3/8 : RUN apk add --no-cache --virtual .build-dependencies     libffi-dev openssl-dev python3-dev build-base py-setuptools rust cargo mariadb-dev &&     pip3 install --no-cache-dir paramiko mysqlclient &&     apk del --no-network .build-dependencies &&     rm -rf /root/.cache /root/.cargo\n ---> Running in 2d1dba6f1ef7\nfetch https://mirrors.ustc.edu.cn/alpine/v3.13/main/x86_64/APKINDEX.tar.gz\nfetch https://mirrors.ustc.edu.cn/alpine/v3.13/community/x86_64/APKINDEX.tar.gz\n(1/44) Installing linux-headers (5.7.8-r0)\n(2/44) Upgrading musl (1.2.2-r0 -> 1.2.2-r1)\n(3/44) Installing pkgconf (1.7.3-r0)\n(4/44) Installing libffi-dev (3.3-r2)\n(5/44) Upgrading libcrypto1.1 (1.1.1k-r0 -> 1.1.1s-r0)\n(6/44) Upgrading libssl1.1 (1.1.1k-r0 -> 1.1.1s-r0)\n(7/44) Installing openssl-dev (1.1.1s-r0)\n(8/44) Upgrading zlib (1.2.11-r3 -> 1.2.12-r3)\n(9/44) Upgrading python3 (3.8.10-r0 -> 3.8.15-r0)\n(10/44) Installing python3-dev (3.8.15-r0)\n(11/44) Installing binutils (2.35.2-r1)\n(12/44) Installing libmagic (5.39-r0)\n(13/44) Installing file (5.39-r0)\n(14/44) Installing libgomp (10.2.1_pre1-r3)\n(15/44) Installing libatomic (10.2.1_pre1-r3)\n(16/44) Installing libgphobos (10.2.1_pre1-r3)\n(17/44) Installing gmp (6.2.1-r1)\n(18/44) Installing isl22 (0.22-r0)\n(19/44) Installing mpfr4 (4.1.0-r0)\n(20/44) Installing mpc1 (1.2.0-r0)\n(21/44) Installing gcc (10.2.1_pre1-r3)\n(22/44) Installing musl-dev (1.2.2-r1)\n(23/44) Installing libc-dev (0.7.2-r3)\n(24/44) Installing g++ (10.2.1_pre1-r3)\n(25/44) Installing make (4.3-r0)\n(26/44) Installing fortify-headers (1.1-r0)\n(27/44) Installing patch (2.7.6-r7)\n(28/44) Installing build-base (0.5-r3)\n(29/44) Installing rust-stdlib (1.47.0-r2)\n(30/44) Installing libxml2 (2.9.14-r2)\n(31/44) Installing llvm10-libs (10.0.1-r1)\n(32/44) Installing rust (1.47.0-r2)\n(33/44) Installing http-parser (2.9.4-r0)\n(34/44) Installing pcre (8.44-r0)\n(35/44) Installing libssh2 (1.9.0-r1)\n(36/44) Installing libgit2 (1.1.0-r1)\n(37/44) Installing cargo (1.47.0-r2)\n(38/44) Installing zlib-dev (1.2.12-r3)\n(39/44) Installing mariadb-connector-c (3.1.11-r0)\n(40/44) Installing mariadb-connector-c-dev (3.1.11-r0)\n(41/44) Installing libaio (0.3.112-r1)\n(42/44) Installing mariadb-embedded (10.5.17-r0)\n(43/44) Installing mariadb-dev (10.5.17-r0)\n(44/44) Installing .build-dependencies (20230106.203420)\nExecuting busybox-1.32.1-r6.trigger\nExecuting ca-certificates-20191127-r5.trigger\nOK: 1047 MiB in 132 packages\nRequirement already satisfied: paramiko in /usr/lib/python3.8/site-packages (2.7.2)\nCollecting mysqlclient\n  Downloading mysqlclient-2.1.1.tar.gz (88 kB)\nRequirement already satisfied: bcrypt>=3.1.3 in /usr/lib/python3.8/site-packages (from paramiko) (3.2.0)\nRequirement already satisfied: cryptography>=2.5 in /usr/lib/python3.8/site-packages (from paramiko) (3.3.2)\nRequirement already satisfied: pynacl>=1.0.1 in /usr/lib/python3.8/site-packages (from paramiko) (1.4.0)\nRequirement already satisfied: cffi>=1.1 in /usr/lib/python3.8/site-packages (from bcrypt>=3.1.3->paramiko) (1.14.4)\nRequirement already satisfied: six>=1.4.1 in /usr/lib/python3.8/site-packages (from bcrypt>=3.1.3->paramiko) (1.15.0)\nRequirement already satisfied: pycparser in /usr/lib/python3.8/site-packages (from cffi>=1.1->bcrypt>=3.1.3->paramiko) (2.20)\nUsing legacy 'setup.py install' for mysqlclient, since package 'wheel' is not installed.\nInstalling collected packages: mysqlclient\n    Running setup.py install for mysqlclient: started\n    Running setup.py install for mysqlclient: finished with status 'done'\nSuccessfully installed mysqlclient-2.1.1\n\u001b[91mWARNING: Ignoring https://mirrors.ustc.edu.cn/alpine/v3.13/main: No such file or directory\nWARNING: Ignoring https://mirrors.ustc.edu.cn/alpine/v3.13/community: No such file or directory\n\u001b[0m(1/39) Purging .build-dependencies (20230106.203420)\n(2/39) Purging libffi-dev (3.3-r2)\n(3/39) Purging linux-headers (5.7.8-r0)\n(4/39) Purging python3-dev (3.8.15-r0)\n(5/39) Purging build-base (0.5-r3)\n(6/39) Purging file (5.39-r0)\n(7/39) Purging g++ (10.2.1_pre1-r3)\n(8/39) Purging make (4.3-r0)\n(9/39) Purging libc-dev (0.7.2-r3)\n(10/39) Purging fortify-headers (1.1-r0)\n(11/39) Purging patch (2.7.6-r7)\n(12/39) Purging cargo (1.47.0-r2)\n(13/39) Purging rust (1.47.0-r2)\n(14/39) Purging rust-stdlib (1.47.0-r2)\n(15/39) Purging gcc (10.2.1_pre1-r3)\n(16/39) Purging binutils (2.35.2-r1)\n(17/39) Purging libatomic (10.2.1_pre1-r3)\n(18/39) Purging libgomp (10.2.1_pre1-r3)\n(19/39) Purging libgphobos (10.2.1_pre1-r3)\n(20/39) Purging musl-dev (1.2.2-r1)\n(21/39) Purging mariadb-dev (10.5.17-r0)\n(22/39) Purging mariadb-connector-c-dev (3.1.11-r0)\n(23/39) Purging openssl-dev (1.1.1s-r0)\n(24/39) Purging zlib-dev (1.2.12-r3)\n(25/39) Purging mariadb-connector-c (3.1.11-r0)\n(26/39) Purging mariadb-embedded (10.5.17-r0)\n(27/39) Purging pkgconf (1.7.3-r0)\n(28/39) Purging libmagic (5.39-r0)\n(29/39) Purging mpc1 (1.2.0-r0)\n(30/39) Purging mpfr4 (4.1.0-r0)\n(31/39) Purging isl22 (0.22-r0)\n(32/39) Purging gmp (6.2.1-r1)\n(33/39) Purging llvm10-libs (10.0.1-r1)\n(34/39) Purging libxml2 (2.9.14-r2)\n(35/39) Purging libgit2 (1.1.0-r1)\n(36/39) Purging http-parser (2.9.4-r0)\n(37/39) Purging pcre (8.44-r0)\n(38/39) Purging libssh2 (1.9.0-r1)\n(39/39) Purging libaio (0.3.112-r1)\nExecuting busybox-1.32.1-r6.trigger\nOK: 524 MiB in 93 packages\nRemoving intermediate container 2d1dba6f1ef7\n ---> e1df2ff213b2\nStep 4/8 : RUN ln -s /usr/bin/python3 /usr/bin/python\n ---> Running in a97180c4da1f\nRemoving intermediate container a97180c4da1f\n ---> 7587e16c050b\nStep 5/8 : RUN mkdir -p /opt/ocboot\n ---> Running in 97492292c8ba\nRemoving intermediate container 97492292c8ba\n ---> 11eb82dbfa91\nStep 6/8 : ADD . /opt/ocboot\n ---> fc4af83ba657\nStep 7/8 : WORKDIR /opt/ocboot\n ---> Running in c1bb66d3326c\nRemoving intermediate container c1bb66d3326c\n ---> d6adf18fa773\nStep 8/8 : ENTRYPOINT [ \"/opt/ocboot/ocboot.py\" ]\n ---> Running in 7cce1fe91109\nRemoving intermediate container 7cce1fe91109\n ---> 618879dc1687\nSuccessfully built 618879dc1687\nSuccessfully tagged ocboot:latest\n","stderr":"","imageSize":459767202}}