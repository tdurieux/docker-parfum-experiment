{"repository":"https://github.com/oldsmokegun/go-scaffold","dockerfilePath":"Dockerfile","startTime":1672716571265,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/oldsmokegun/go-scaffold'...\n","error":null,"commit":"e01de9235ef6d8e8caa969bdaecda10d2756c6e2"},"originalBuild":{"startTimestamp":1672716572578,"endTimestamp":1672717704886,"error":null,"stdout":"Sending build context to Docker daemon  975.4kB\r\r\nStep 1/19 : FROM golang:1.19 as builder\n ---> 6650307efe4a\nStep 2/19 : ARG PROTOC_VERSION=3.19.1\n ---> Running in ed0981b66f95\nRemoving intermediate container ed0981b66f95\n ---> 4546af2cbe07\nStep 3/19 : ARG PROTOC_ZIP=protoc-${PROTOC_VERSION}-linux-x86_64.zip\n ---> Running in 144fa8939f0b\nRemoving intermediate container 144fa8939f0b\n ---> f79a797c3363\nStep 4/19 : RUN apt-get update && apt-get install -y unzip\n ---> Running in 48d800d99509\nGet:1 http://deb.debian.org/debian bullseye InRelease [116 kB]\nGet:2 http://deb.debian.org/debian-security bullseye-security InRelease [48.4 kB]\nGet:3 http://deb.debian.org/debian bullseye-updates InRelease [44.1 kB]\nGet:4 http://deb.debian.org/debian bullseye/main amd64 Packages [8183 kB]\nGet:5 http://deb.debian.org/debian-security bullseye-security/main amd64 Packages [210 kB]\nGet:6 http://deb.debian.org/debian bullseye-updates/main amd64 Packages [14.6 kB]\nFetched 8616 kB in 3s (3022 kB/s)\nReading package lists...\nReading package lists...\nBuilding dependency tree...\nReading state information...\nSuggested packages:\n  zip\nThe following NEW packages will be installed:\n  unzip\n0 upgraded, 1 newly installed, 0 to remove and 1 not upgraded.\nNeed to get 172 kB of archives.\nAfter this operation, 393 kB of additional disk space will be used.\nGet:1 http://deb.debian.org/debian bullseye/main amd64 unzip amd64 6.0-26+deb11u1 [172 kB]\n\u001b[91mdebconf: delaying package configuration, since apt-utils is not installed\n\u001b[0mFetched 172 kB in 0s (9903 kB/s)\nSelecting previously unselected package unzip.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 15718 files and directories currently installed.)\r\nPreparing to unpack .../unzip_6.0-26+deb11u1_amd64.deb ...\r\nUnpacking unzip (6.0-26+deb11u1) ...\r\nSetting up unzip (6.0-26+deb11u1) ...\r\nRemoving intermediate container 48d800d99509\n ---> 144e9bb0d871\nStep 5/19 : RUN curl -OL https://github.com/protocolbuffers/protobuf/releases/download/v${PROTOC_VERSION}/${PROTOC_ZIP}     && unzip -o ${PROTOC_ZIP} -d /usr/local bin/protoc     && rm -f ${PROTOC_ZIP}     && apt-get autoclean && apt-get clean\n ---> Running in 75e455b979ef\n\u001b[91m  % Total    % Received % X\u001b[0m\u001b[91mferd  Average Spe\u001b[0m\u001b[91med   Time    Ti\u001b[0m\u001b[91mme \u001b[0m\u001b[91m   \u001b[0m\u001b[91m Ti\u001b[0m\u001b[91mme  Curr\u001b[0m\u001b[91ment\n         \u001b[0m\u001b[91m      \u001b[0m\u001b[91m           \u001b[0m\u001b[91m       \u001b[0m\u001b[91mDl\u001b[0m\u001b[91moad\u001b[0m\u001b[91m  \u001b[0m\u001b[91mUp\u001b[0m\u001b[91mload   Tot\u001b[0m\u001b[91mal   Spent  \u001b[0m\u001b[91m  Left  \u001b[0m\u001b[91mSpeed\n\r \u001b[0m\u001b[91m 0 \u001b[0m\u001b[91m   \u001b[0m\u001b[91m 0\u001b[0m\u001b[91m  \u001b[0m\u001b[91m  0\u001b[0m\u001b[91m    \u001b[0m\u001b[91m 0    \u001b[0m\u001b[91m0     0      \u001b[0m\u001b[91m0   \u001b[0m\u001b[91m   0 --:\u001b[0m\u001b[91m--:-- \u001b[0m\u001b[91m--:--:-\u001b[0m\u001b[91m- --:--\u001b[0m\u001b[91m:--     0\u001b[0m\u001b[91m\r  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0\n\u001b[0m\u001b[91m\r  0     0    0     0    0\u001b[0m\u001b[91m     0    \u001b[0m\u001b[91m  0   \u001b[0m\u001b[91m   0 -\u001b[0m\u001b[91m-\u001b[0m\u001b[91m:-\u001b[0m\u001b[91m-:\u001b[0m\u001b[91m-- --\u001b[0m\u001b[91m:--:\u001b[0m\u001b[91m-- --\u001b[0m\u001b[91m:-\u001b[0m\u001b[91m-:-- \u001b[0m\u001b[91m   \u001b[0m\u001b[91m 0\u001b[0m\u001b[91m\r 25 1660k   25  424k    0 \u001b[0m\u001b[91m    0   291k  \u001b[0m\u001b[91m  \u001b[0m\u001b[91m  \u001b[0m\u001b[91m0  0\u001b[0m\u001b[91m:00:05 \u001b[0m\u001b[91m 0:00:01 \u001b[0m\u001b[91m 0\u001b[0m\u001b[91m:\u001b[0m\u001b[91m00\u001b[0m\u001b[91m:04  \u001b[0m\u001b[91m445k\u001b[0m\u001b[91m\r100 1660k  100 1660k    0 \u001b[0m\u001b[91m    0   930k \u001b[0m\u001b[91m    \u001b[0m\u001b[91m 0  \u001b[0m\u001b[91m0:00:01  0\u001b[0m\u001b[91m:00:01 --:--:-- \u001b[0m\u001b[91m1297k\u001b[0m\u001b[91m\n\u001b[0mArchive:  protoc-3.19.1-linux-x86_64.zip\n  inflating: /usr/local/bin/protoc   \nReading package lists...\nBuilding dependency tree...\nReading state information...\nRemoving intermediate container 75e455b979ef\n ---> 70b995fb43d8\nStep 6/19 : WORKDIR /app/\n ---> Running in 6d19f06a67d3\nRemoving intermediate container 6d19f06a67d3\n ---> 5e4e61f0699d\nStep 7/19 : COPY . .\n ---> a84e0bbb5aa0\nStep 8/19 : RUN make download && make proto && make build\n ---> Running in a9dc1bbeb076\n\u001b[91mgo: downloading golang.org/x/tools v0.0.0-20190422233926-fe54fb35175b\n\u001b[0m\u001b[91mgo: downloading github.com/cosmtrek/air v1.40.4\n\u001b[0m\u001b[91mgo: downloading github.com/fsnotify/fsnotify v1.4.9\n\u001b[0m\u001b[91mgo: downloading github.com/creack/pty v1.1.11\n\u001b[0m\u001b[91mgo: downloading github.com/imdario/mergo v0.3.12\n\u001b[0m\u001b[91mgo: downloading github.com/pelletier/go-toml v1.8.1\n\u001b[0m\u001b[91mgo: downloading github.com/fatih/color v1.10.0\n\u001b[0m\u001b[91mgo: downloading golang.org/x/sys v0.0.0-20211216021012-1d35b9e2eb4e\n\u001b[0m\u001b[91mgo: downloading github.com/mattn/go-isatty v0.0.12\ngo: downloading github.com/mattn/go-colorable v0.1.8\n\u001b[0m\u001b[91mgo: downloading github.com/ghodss/yaml v1.0.0\ngo: downloading github.com/urfave/cli/v2 v2.3.0\n\u001b[0m\u001b[91mgo: downloading github.com/go-openapi/spec v0.20.4\n\u001b[0m\u001b[91mgo: downloading github.com/go-openapi/jsonreference v0.19.6\n\u001b[0m\u001b[91mgo: downloading golang.org/x/tools v0.1.10\n\u001b[0m\u001b[91mgo: downloading github.com/cpuguy83/go-md2man/v2 v2.0.0-20190314233015-f79a8a8ca69d\n\u001b[0m\u001b[91mgo: downloading github.com/russross/blackfriday/v2 v2.0.1\n\u001b[0m\u001b[91mgo: downloading github.com/shurcooL/sanitized_anchor_name v1.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/PuerkitoBio/purell v1.1.1\n\u001b[0m\u001b[91mgo: downloading golang.org/x/net v0.0.0-20220425223048-2871e0cb64e4\ngo: downloading github.com/PuerkitoBio/urlesc v0.0.0-20170810143723-de5bf2ad4578\n\u001b[0m\u001b[91mgo: downloading github.com/go-openapi/swag v0.19.15\n\u001b[0m\u001b[91mgo: downloading github.com/mailru/easyjson v0.7.6\n\u001b[0m\u001b[91mgo: downloading golang.org/x/tools v0.1.1\n\u001b[0m\u001b[91mgo: downloading golang.org/x/mod v0.4.2\n\u001b[0m\u001b[91mgo: downloading golang.org/x/xerrors v0.0.0-20200804184101-5ec99f83aff1\n\u001b[0m\u001b[91mgo: downloading golang.org/x/sys v0.0.0-20210510120138-977fb7262007\n\u001b[0m\u001b[91mgo: downloading github.com/go-kratos/kratos/cmd/kratos/v2 v2.0.0-20230102133229-480b16b817a0\n\u001b[0m\u001b[91mgo: downloading github.com/go-kratos/kratos/cmd/kratos v0.0.0-20210217095515-c4e4aa563867\n\u001b[0m\u001b[91mgo: downloading github.com/go-kratos/kratos v1.0.1\n\u001b[0m\u001b[91mgo: downloading github.com/spf13/cobra v1.4.0\ngo: downloading github.com/AlecAivazis/survey/v2 v2.3.4\n\u001b[0m\u001b[91mgo: downloading golang.org/x/mod v0.5.1\n\u001b[0m\u001b[91mgo: downloading github.com/emicklei/proto v1.10.0\n\u001b[0m\u001b[91mgo: downloading golang.org/x/sys v0.0.0-20211205182925-97ca703d548d\n\u001b[0m\u001b[91mgo: downloading golang.org/x/term v0.0.0-20210503060354-a79de5458b56\ngo: downloading github.com/mgutz/ansi v0.0.0-20170206155736-9520e82c474b\ngo: downloading github.com/kballard/go-shellquote v0.0.0-20180428030007-95032a82bc51\n\u001b[0m\u001b[91mgo: downloading github.com/envoyproxy/protoc-gen-validate v0.9.1\n\u001b[0m\u001b[91mgo: downloading github.com/lyft/protoc-gen-star v0.6.1\n\u001b[0m\u001b[91mgo: downloading github.com/iancoleman/strcase v0.2.0\n\u001b[0m\u001b[91mgo: downloading golang.org/x/text v0.4.0\n\u001b[0m\u001b[91mgo: downloading github.com/favadi/protoc-go-inject-tag v1.4.0\n\u001b[0m\u001b[91mgo: downloading golang.org/x/tools v0.1.9-0.20211216111533-8d383106f7e7\n\u001b[0m\u001b[91mgo: downloading github.com/olekukonko/tablewriter v0.0.5\n\u001b[0m\u001b[91mgo: downloading ariga.io/atlas v0.4.3-0.20220711120113-a190b01c6ef9\n\u001b[0m\u001b[91mgo: downloading github.com/mattn/go-runewidth v0.0.9\n\u001b[0m\u001b[91mgo: downloading github.com/zclconf/go-cty v1.8.0\ngo: downloading github.com/hashicorp/hcl/v2 v2.10.0\n\u001b[0m\u001b[91mgo: downloading github.com/google/go-cmp v0.5.6\n\u001b[0m\u001b[91mgo: downloading github.com/mitchellh/go-wordwrap v0.0.0-20150314170334-ad45545899c7\n\u001b[0m\u001b[91mgo: downloading github.com/agext/levenshtein v1.2.1\n\u001b[0mgo install github.com/go-kratos/kratos/cmd/kratos/v2@latest\ngo install github.com/go-kratos/kratos/cmd/protoc-gen-go-http/v2@latest\n\u001b[91mgo: downloading github.com/go-kratos/kratos/cmd/protoc-gen-go-http v0.0.0-20210217095515-c4e4aa563867\n\u001b[0m\u001b[91mgo: downloading github.com/go-kratos/kratos/cmd/protoc-gen-go-http/v2 v2.0.0-20230102133229-480b16b817a0\n\u001b[0m\u001b[91mgo: downloading google.golang.org/genproto v0.0.0-20220519153652-3a47de7e79bd\n\u001b[0m\u001b[91mgo: downloading google.golang.org/protobuf v1.28.0\n\u001b[0mgo install github.com/go-kratos/kratos/cmd/protoc-gen-go-errors/v2@latest\n\u001b[91mgo: downloading github.com/go-kratos/kratos/cmd/protoc-gen-go-errors v0.0.0-20210217095515-c4e4aa563867\n\u001b[0m\u001b[91mgo: downloading github.com/go-kratos/kratos/cmd/protoc-gen-go-errors/v2 v2.0.0-20230102133229-480b16b817a0\n\u001b[0mgo install google.golang.org/protobuf/cmd/protoc-gen-go@latest\ngo install google.golang.org/grpc/cmd/protoc-gen-go-grpc@latest\n\u001b[91mgo: downloading google.golang.org/grpc v1.51.0\n\u001b[0m\u001b[91mgo: downloading google.golang.org/grpc/cmd/protoc-gen-go-grpc v1.2.0\n\u001b[0m\u001b[91mgo: downloading google.golang.org/protobuf v1.27.1\n\u001b[0mgo install github.com/google/gnostic/cmd/protoc-gen-openapi@latest\n\u001b[91mgo: downloading github.com/google/gnostic v0.6.9\n\u001b[0m\u001b[91mgo: downloading google.golang.org/genproto v0.0.0-20220107163113-42d7afdf6368\ngo: downloading gopkg.in/yaml.v3 v3.0.0-20200615113413-eeeca48fe776\n\u001b[0mproto: internal/app/transport/grpc/api/scaffold/v1/greet/greet.proto\nproto: internal/app/transport/grpc/api/scaffold/v1/user/user.proto\nmake[1]: Entering directory '/app'\ngo generate ./...\n\u001b[91mwire: go-scaffold/cmd/app: wrote /app/cmd/app/wire_gen.go\n\u001b[0m2023/01/03 03:44:54 Generate swagger docs....\n2023/01/03 03:44:54 Generate general API Info, search dir:./\n2023/01/03 03:44:54 Generating example.Success\n2023/01/03 03:44:54 Generating greet.HelloResponse\n2023/01/03 03:44:54 Generating example.ServerError\n2023/01/03 03:44:54 Generating example.ClientError\n2023/01/03 03:44:54 Generating example.Unauthorized\n2023/01/03 03:44:54 Generating example.PermissionDenied\n2023/01/03 03:44:54 Generating example.ResourceNotFound\n2023/01/03 03:44:54 Generating example.TooManyRequest\n2023/01/03 03:44:54 Generating user.CreateRequest\n2023/01/03 03:44:54 Generating user.DetailResponse\n2023/01/03 03:44:54 Generating user.ListResponse\n2023/01/03 03:44:54 Generating user.ListItem\n2023/01/03 03:44:54 create docs.go at  transport/http/api/docs/docs.go\n2023/01/03 03:44:54 create swagger.json at  transport/http/api/docs/swagger.json\n2023/01/03 03:44:54 create swagger.yaml at  transport/http/api/docs/swagger.yaml\n\u001b[91mwire: go-scaffold/internal/app/tests: wrote /app/internal/app/tests/wire_gen.go\n\u001b[0mproto: greet/greet.proto\nproto: user/user.proto\nmake[1]: Leaving directory '/app'\nCGO_ENABLED=0 go build  -o bin/app cmd/app/main.go cmd/app/wire_gen.go\nRemoving intermediate container a9dc1bbeb076\n ---> 80eada4afb25\nStep 9/19 : FROM alpine:3.14\n3.14: Pulling from library/alpine\nc7ed990a2339: Pulling fs layer\nc7ed990a2339: Verifying Checksum\nc7ed990a2339: Download complete\nc7ed990a2339: Pull complete\nDigest: sha256:4c869a63e1b7c0722fed1e402a6466610327c3b83bdddb94bd94fb71da7f638a\nStatus: Downloaded newer image for alpine:3.14\n ---> dd53f409bf0b\nStep 10/19 : ENV TZ=Asia/Shanghai\n ---> Running in fd1c64c14cc5\nRemoving intermediate container fd1c64c14cc5\n ---> 0e964c66b35f\nStep 11/19 : ENV ZONEINFO=/usr/local/go/lib/time/zoneinfo.zip\n ---> Running in 81fcd38f8051\nRemoving intermediate container 81fcd38f8051\n ---> c36d5dcbd818\nStep 12/19 : WORKDIR /app/\n ---> Running in 0cb7e5b981c2\nRemoving intermediate container 0cb7e5b981c2\n ---> 4487d0ceccf9\nStep 13/19 : COPY --from=builder /usr/local/go/lib/time/zoneinfo.zip /usr/local/go/lib/time/zoneinfo.zip\n ---> 8f9a352f8602\nStep 14/19 : COPY --from=builder /etc/ssl/certs/ca-certificates.crt /etc/ssl/certs/ca-certificates.crt\n ---> a95b92955f6e\nStep 15/19 : COPY --from=builder /app/.air.conf.example /app/.air.conf\n ---> 656bfcb3024e\nStep 16/19 : COPY --from=builder /app/etc/config.yaml.example /app/etc/config.yaml\n ---> 25db8f06fc70\nStep 17/19 : COPY --from=builder /app/assets /app/assets\n ---> b7fb2beab655\nStep 18/19 : COPY --from=builder /app/bin/app /app/bin/app\n ---> 0bdde7cd03cc\nStep 19/19 : CMD [\"./bin/app\"]\n ---> Running in 1ed3e851d190\nRemoving intermediate container 1ed3e851d190\n ---> ebb71c5d7a08\nSuccessfully built ebb71c5d7a08\nSuccessfully tagged go-scaffold:latest\n","stderr":"","imageSize":70991947},"repair":{"violations":[{"name":"curlUseFlagF","position":{"start":6,"end":6,"columnStart":4,"columnEnd":107}},{"name":"ruleAptGetInstallUseNoRec","position":{"start":5,"end":5,"columnStart":22,"columnEnd":46}},{"name":"ruleAptGetInstallThenRemoveAptLists","position":{"start":5,"end":5,"columnStart":22,"columnEnd":46}}],"repairedDockerfile":"FROM golang:1.19 as builder\n\nARG PROTOC_VERSION=3.19.1\nARG PROTOC_ZIP=protoc-${PROTOC_VERSION}-linux-x86_64.zip\n\nRUN apt-get update && apt-get install --no-install-recommends -y unzip\nRUN curl -f -OL https://github.com/protocolbuffers/protobuf/releases/download/v${PROTOC_VERSION}/${PROTOC_ZIP} \\\n    && unzip -o ${PROTOC_ZIP} -d /usr/local bin/protoc \\\n    && rm -f ${PROTOC_ZIP} \\\n    && apt-get autoclean && apt-get clean\n\nWORKDIR /app/\n\nCOPY . .\n\nRUN make download && make proto && make build\n\nFROM alpine:3.14\n\nENV TZ=Asia/Shanghai\nENV ZONEINFO=/usr/local/go/lib/time/zoneinfo.zip\n\nWORKDIR /app/\n\nCOPY --from=builder /usr/local/go/lib/time/zoneinfo.zip /usr/local/go/lib/time/zoneinfo.zip\nCOPY --from=builder /etc/ssl/certs/ca-certificates.crt /etc/ssl/certs/ca-certificates.crt\nCOPY --from=builder /app/.air.conf.example /app/.air.conf\nCOPY --from=builder /app/etc/config.yaml.example /app/etc/config.yaml\nCOPY --from=builder /app/assets /app/assets\nCOPY --from=builder /app/bin/app /app/bin/app\n\nCMD [\"./bin/app\"]\n"},"repairedBuild":{"startTimestamp":1672717705751,"endTimestamp":1672718133707,"error":null,"stdout":"Sending build context to Docker daemon  975.4kB\r\r\nStep 1/19 : FROM golang:1.19 as builder\n ---> 6650307efe4a\nStep 2/19 : ARG PROTOC_VERSION=3.19.1\n ---> Running in 90b96ab7ba35\nRemoving intermediate container 90b96ab7ba35\n ---> b3b486ff05b0\nStep 3/19 : ARG PROTOC_ZIP=protoc-${PROTOC_VERSION}-linux-x86_64.zip\n ---> Running in 04700ef46c98\nRemoving intermediate container 04700ef46c98\n ---> a3b020458859\nStep 4/19 : RUN apt-get update && apt-get install --no-install-recommends -y unzip\n ---> Running in 53388da3c53f\nGet:1 http://deb.debian.org/debian bullseye InRelease [116 kB]\nGet:2 http://deb.debian.org/debian-security bullseye-security InRelease [48.4 kB]\nGet:3 http://deb.debian.org/debian bullseye-updates InRelease [44.1 kB]\nGet:4 http://deb.debian.org/debian bullseye/main amd64 Packages [8183 kB]\nGet:5 http://deb.debian.org/debian-security bullseye-security/main amd64 Packages [210 kB]\nGet:6 http://deb.debian.org/debian bullseye-updates/main amd64 Packages [14.6 kB]\nFetched 8616 kB in 2s (4604 kB/s)\nReading package lists...\nReading package lists...\nBuilding dependency tree...\nReading state information...\nSuggested packages:\n  zip\nThe following NEW packages will be installed:\n  unzip\n0 upgraded, 1 newly installed, 0 to remove and 1 not upgraded.\nNeed to get 172 kB of archives.\nAfter this operation, 393 kB of additional disk space will be used.\nGet:1 http://deb.debian.org/debian bullseye/main amd64 unzip amd64 6.0-26+deb11u1 [172 kB]\n\u001b[91mdebconf: delaying package configuration, since apt-utils is not installed\n\u001b[0mFetched 172 kB in 0s (5372 kB/s)\nSelecting previously unselected package unzip.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 15718 files and directories currently installed.)\r\nPreparing to unpack .../unzip_6.0-26+deb11u1_amd64.deb ...\r\nUnpacking unzip (6.0-26+deb11u1) ...\r\nSetting up unzip (6.0-26+deb11u1) ...\r\nRemoving intermediate container 53388da3c53f\n ---> 2d91f7fbe05b\nStep 5/19 : RUN curl -f -OL https://github.com/protocolbuffers/protobuf/releases/download/v${PROTOC_VERSION}/${PROTOC_ZIP}     && unzip -o ${PROTOC_ZIP} -d /usr/local bin/protoc     && rm -f ${PROTOC_ZIP}     && apt-get autoclean && apt-get clean\n ---> Running in 6ac160124be0\n\u001b[91m  % Total    % Received % Xferd  Average Speed   \u001b[0m\u001b[91mTime    Time     Time  \u001b[0m\u001b[91mCurrent\n                                 Dload  Upload   Total   Spent    Left  Speed\n\r  0     0    0  \u001b[0m\u001b[91m   0    0\u001b[0m\u001b[91m     0      0      0 --:--:-- \u001b[0m\u001b[91m--:--:-- \u001b[0m\u001b[91m--:--:--     0\u001b[0m\u001b[91m\r  0     0    0     0   \u001b[0m\u001b[91m 0     0 \u001b[0m\u001b[91m     0 \u001b[0m\u001b[91m  \u001b[0m\u001b[91m   0 --:--:\u001b[0m\u001b[91m-- --:--:-- --:--:-\u001b[0m\u001b[91m-     \u001b[0m\u001b[91m0\u001b[0m\u001b[91m\r  0     0    0     0  \u001b[0m\u001b[91m  0     \u001b[0m\u001b[91m0    \u001b[0m\u001b[91m  0     \u001b[0m\u001b[91m 0 --:-\u001b[0m\u001b[91m-:-- \u001b[0m\u001b[91m--:--:-- --\u001b[0m\u001b[91m:--\u001b[0m\u001b[91m:--\u001b[0m\u001b[91m \u001b[0m\u001b[91m   \u001b[0m\u001b[91m 0\n\u001b[0m\u001b[91m\r 11 1660k   11  191k    0     0   148k      0  0:00:11  0:00\u001b[0m\u001b[91m:01  0:00:10  148k\u001b[0m\u001b[91m\r100 1660k  100 1660k    0     0   9\u001b[0m\u001b[91m62k      0  0:00:0\u001b[0m\u001b[91m1  \u001b[0m\u001b[91m0:00\u001b[0m\u001b[91m:01\u001b[0m\u001b[91m --:\u001b[0m\u001b[91m--:-- 3\u001b[0m\u001b[91m391k\n\u001b[0mArchive:  protoc-3.19.1-linux-x86_64.zip\n  inflating: /usr/local/bin/protoc   \nReading package lists...\nBuilding dependency tree...\nReading state information...\nRemoving intermediate container 6ac160124be0\n ---> ec6cbd7c0fa7\nStep 6/19 : WORKDIR /app/\n ---> Running in ee27b380d4fe\nRemoving intermediate container ee27b380d4fe\n ---> c90d4db02b19\nStep 7/19 : COPY . .\n ---> 689495a292d9\nStep 8/19 : RUN make download && make proto && make build\n ---> Running in d174eec7726b\n\u001b[91mgo: downloading golang.org/x/tools v0.0.0-20190422233926-fe54fb35175b\n\u001b[0m\u001b[91mgo: downloading github.com/cosmtrek/air v1.40.4\n\u001b[0m\u001b[91mgo: downloading github.com/fatih/color v1.10.0\n\u001b[0m\u001b[91mgo: downloading github.com/creack/pty v1.1.11\n\u001b[0m\u001b[91mgo: downloading github.com/imdario/mergo v0.3.12\n\u001b[0m\u001b[91mgo: downloading github.com/pelletier/go-toml v1.8.1\n\u001b[0m\u001b[91mgo: downloading github.com/fsnotify/fsnotify v1.4.9\n\u001b[0m\u001b[91mgo: downloading github.com/mattn/go-isatty v0.0.12\ngo: downloading github.com/mattn/go-colorable v0.1.8\n\u001b[0m\u001b[91mgo: downloading golang.org/x/sys v0.0.0-20211216021012-1d35b9e2eb4e\n\u001b[0m\u001b[91mgo: downloading github.com/urfave/cli/v2 v2.3.0\n\u001b[0m\u001b[91mgo: downloading github.com/ghodss/yaml v1.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/go-openapi/spec v0.20.4\n\u001b[0m\u001b[91mgo: downloading github.com/go-openapi/jsonreference v0.19.6\ngo: downloading golang.org/x/tools v0.1.10\n\u001b[0m\u001b[91mgo: downloading github.com/go-openapi/swag v0.19.15\n\u001b[0m\u001b[91mgo: downloading github.com/mailru/easyjson v0.7.6\n\u001b[0m\u001b[91mgo: downloading github.com/PuerkitoBio/purell v1.1.1\n\u001b[0m\u001b[91mgo: downloading golang.org/x/net v0.0.0-20220425223048-2871e0cb64e4\ngo: downloading github.com/PuerkitoBio/urlesc v0.0.0-20170810143723-de5bf2ad4578\n\u001b[0m\u001b[91mgo: downloading github.com/cpuguy83/go-md2man/v2 v2.0.0-20190314233015-f79a8a8ca69d\n\u001b[0m\u001b[91mgo: downloading github.com/russross/blackfriday/v2 v2.0.1\n\u001b[0m\u001b[91mgo: downloading github.com/shurcooL/sanitized_anchor_name v1.0.0\n\u001b[0m\u001b[91mgo: downloading golang.org/x/tools v0.1.1\n\u001b[0m\u001b[91mgo: downloading golang.org/x/mod v0.4.2\n\u001b[0m\u001b[91mgo: downloading golang.org/x/xerrors v0.0.0-20200804184101-5ec99f83aff1\n\u001b[0m\u001b[91mgo: downloading golang.org/x/sys v0.0.0-20210510120138-977fb7262007\n\u001b[0m\u001b[91mgo: downloading github.com/go-kratos/kratos v1.0.1\n\u001b[0m\u001b[91mgo: downloading github.com/go-kratos/kratos/cmd/kratos/v2 v2.0.0-20230102133229-480b16b817a0\n\u001b[0m\u001b[91mgo: downloading github.com/go-kratos/kratos/cmd/kratos v0.0.0-20210217095515-c4e4aa563867\n\u001b[0m\u001b[91mgo: downloading github.com/emicklei/proto v1.10.0\ngo: downloading github.com/AlecAivazis/survey/v2 v2.3.4\n\u001b[0m\u001b[91mgo: downloading github.com/spf13/cobra v1.4.0\ngo: downloading golang.org/x/mod v0.5.1\n\u001b[0m\u001b[91mgo: downloading golang.org/x/sys v0.0.0-20211205182925-97ca703d548d\n\u001b[0m\u001b[91mgo: downloading golang.org/x/term v0.0.0-20210503060354-a79de5458b56\n\u001b[0m\u001b[91mgo: downloading github.com/mgutz/ansi v0.0.0-20170206155736-9520e82c474b\ngo: downloading github.com/kballard/go-shellquote v0.0.0-20180428030007-95032a82bc51\n\u001b[0m\u001b[91mgo: downloading github.com/envoyproxy/protoc-gen-validate v0.9.1\n\u001b[0m\u001b[91mgo: downloading github.com/lyft/protoc-gen-star v0.6.1\n\u001b[0m\u001b[91mgo: downloading github.com/iancoleman/strcase v0.2.0\n\u001b[0m\u001b[91mgo: downloading golang.org/x/text v0.4.0\n\u001b[0m\u001b[91mgo: downloading github.com/favadi/protoc-go-inject-tag v1.4.0\n\u001b[0m\u001b[91mgo: downloading github.com/olekukonko/tablewriter v0.0.5\n\u001b[0m\u001b[91mgo: downloading golang.org/x/tools v0.1.9-0.20211216111533-8d383106f7e7\n\u001b[0m\u001b[91mgo: downloading ariga.io/atlas v0.4.3-0.20220711120113-a190b01c6ef9\n\u001b[0m\u001b[91mgo: downloading github.com/mattn/go-runewidth v0.0.9\n\u001b[0m\u001b[91mgo: downloading github.com/hashicorp/hcl/v2 v2.10.0\n\u001b[0m\u001b[91mgo: downloading github.com/zclconf/go-cty v1.8.0\n\u001b[0m\u001b[91mgo: downloading github.com/agext/levenshtein v1.2.1\n\u001b[0m\u001b[91mgo: downloading github.com/google/go-cmp v0.5.6\n\u001b[0m\u001b[91mgo: downloading github.com/mitchellh/go-wordwrap v0.0.0-20150314170334-ad45545899c7\n\u001b[0mgo install github.com/go-kratos/kratos/cmd/kratos/v2@latest\ngo install github.com/go-kratos/kratos/cmd/protoc-gen-go-http/v2@latest\n\u001b[91mgo: downloading github.com/go-kratos/kratos/cmd/protoc-gen-go-http v0.0.0-20210217095515-c4e4aa563867\n\u001b[0m\u001b[91mgo: downloading github.com/go-kratos/kratos/cmd/protoc-gen-go-http/v2 v2.0.0-20230102133229-480b16b817a0\n\u001b[0m\u001b[91mgo: downloading google.golang.org/protobuf v1.28.0\n\u001b[0m\u001b[91mgo: downloading google.golang.org/genproto v0.0.0-20220519153652-3a47de7e79bd\n\u001b[0mgo install github.com/go-kratos/kratos/cmd/protoc-gen-go-errors/v2@latest\n\u001b[91mgo: downloading github.com/go-kratos/kratos/cmd/protoc-gen-go-errors v0.0.0-20210217095515-c4e4aa563867\n\u001b[0m\u001b[91mgo: downloading github.com/go-kratos/kratos/cmd/protoc-gen-go-errors/v2 v2.0.0-20230102133229-480b16b817a0\n\u001b[0mgo install google.golang.org/protobuf/cmd/protoc-gen-go@latest\ngo install google.golang.org/grpc/cmd/protoc-gen-go-grpc@latest\n\u001b[91mgo: downloading google.golang.org/grpc v1.51.0\n\u001b[0m\u001b[91mgo: downloading google.golang.org/grpc/cmd/protoc-gen-go-grpc v1.2.0\n\u001b[0m\u001b[91mgo: downloading google.golang.org/protobuf v1.27.1\n\u001b[0mgo install github.com/google/gnostic/cmd/protoc-gen-openapi@latest\n\u001b[91mgo: downloading github.com/google/gnostic v0.6.9\n\u001b[0m\u001b[91mgo: downloading google.golang.org/genproto v0.0.0-20220107163113-42d7afdf6368\n\u001b[0m\u001b[91mgo: downloading gopkg.in/yaml.v3 v3.0.0-20200615113413-eeeca48fe776\n\u001b[0mproto: internal/app/transport/grpc/api/scaffold/v1/greet/greet.proto\nproto: internal/app/transport/grpc/api/scaffold/v1/user/user.proto\nmake[1]: Entering directory '/app'\ngo generate ./...\n\u001b[91mwire: go-scaffold/cmd/app: wrote /app/cmd/app/wire_gen.go\n\u001b[0m2023/01/03 03:51:03 Generate swagger docs....\n2023/01/03 03:51:03 Generate general API Info, search dir:./\n2023/01/03 03:51:04 Generating example.Success\n2023/01/03 03:51:04 Generating greet.HelloResponse\n2023/01/03 03:51:04 Generating example.ServerError\n2023/01/03 03:51:04 Generating example.ClientError\n2023/01/03 03:51:04 Generating example.Unauthorized\n2023/01/03 03:51:04 Generating example.PermissionDenied\n2023/01/03 03:51:04 Generating example.ResourceNotFound\n2023/01/03 03:51:04 Generating example.TooManyRequest\n2023/01/03 03:51:04 Generating user.CreateRequest\n2023/01/03 03:51:04 Generating user.DetailResponse\n2023/01/03 03:51:04 Generating user.ListResponse\n2023/01/03 03:51:04 Generating user.ListItem\n2023/01/03 03:51:04 create docs.go at  transport/http/api/docs/docs.go\n2023/01/03 03:51:04 create swagger.json at  transport/http/api/docs/swagger.json\n2023/01/03 03:51:04 create swagger.yaml at  transport/http/api/docs/swagger.yaml\n\u001b[91mwire: go-scaffold/internal/app/tests: wrote /app/internal/app/tests/wire_gen.go\n\u001b[0mproto: greet/greet.proto\nproto: user/user.proto\nmake[1]: Leaving directory '/app'\nCGO_ENABLED=0 go build  -o bin/app cmd/app/main.go cmd/app/wire_gen.go\nRemoving intermediate container d174eec7726b\n ---> f78828a3f72b\nStep 9/19 : FROM alpine:3.14\n ---> dd53f409bf0b\nStep 10/19 : ENV TZ=Asia/Shanghai\n ---> Running in a90c3b1e800a\nRemoving intermediate container a90c3b1e800a\n ---> b013c12f8fe3\nStep 11/19 : ENV ZONEINFO=/usr/local/go/lib/time/zoneinfo.zip\n ---> Running in 7a0a7d40dc8a\nRemoving intermediate container 7a0a7d40dc8a\n ---> 5c4f67b08e74\nStep 12/19 : WORKDIR /app/\n ---> Running in 42f1e805bab8\nRemoving intermediate container 42f1e805bab8\n ---> 2b3111812223\nStep 13/19 : COPY --from=builder /usr/local/go/lib/time/zoneinfo.zip /usr/local/go/lib/time/zoneinfo.zip\n ---> d149ded14056\nStep 14/19 : COPY --from=builder /etc/ssl/certs/ca-certificates.crt /etc/ssl/certs/ca-certificates.crt\n ---> 2a0ca2fef174\nStep 15/19 : COPY --from=builder /app/.air.conf.example /app/.air.conf\n ---> 8eee06e85dac\nStep 16/19 : COPY --from=builder /app/etc/config.yaml.example /app/etc/config.yaml\n ---> 2634eeb4dbd5\nStep 17/19 : COPY --from=builder /app/assets /app/assets\n ---> 8d5635d4b2a0\nStep 18/19 : COPY --from=builder /app/bin/app /app/bin/app\n ---> d23b7e21e390\nStep 19/19 : CMD [\"./bin/app\"]\n ---> Running in 6feaa2fb70fc\nRemoving intermediate container 6feaa2fb70fc\n ---> 676542f7ec8a\nSuccessfully built 676542f7ec8a\nSuccessfully tagged go-scaffold:latest\n","stderr":"","imageSize":70991947},"endTime":1672718135863}