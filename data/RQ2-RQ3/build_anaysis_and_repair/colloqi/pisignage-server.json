{"repository":"https://github.com/colloqi/pisignage-server","dockerfilePath":"Dockerfile","startTime":1672818473181,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/colloqi/pisignage-server'...\n","error":null,"commit":"a710a366b9f9029a2cae9a73d4437373400ee300"},"originalBuild":{"startTimestamp":1672818474534,"endTimestamp":1672818518084,"error":null,"stdout":"Sending build context to Docker daemon  21.35MB\r\r\nStep 1/12 : FROM node:14.15-alpine3.10\n14.15-alpine3.10: Pulling from library/node\n21c83c524219: Already exists\n2455617cecef: Pulling fs layer\n442e5ddf305d: Pulling fs layer\na1261ff52349: Pulling fs layer\n442e5ddf305d: Verifying Checksum\n442e5ddf305d: Download complete\na1261ff52349: Verifying Checksum\na1261ff52349: Download complete\n2455617cecef: Verifying Checksum\n2455617cecef: Download complete\n2455617cecef: Pull complete\n442e5ddf305d: Pull complete\na1261ff52349: Pull complete\nDigest: sha256:fd87531f9bf187273c77ad3ddd5067110ef983f998fc2ea1b9932950df78bd8c\nStatus: Downloaded newer image for node:14.15-alpine3.10\n ---> 778240c0fddd\nStep 2/12 : RUN apk update && apk add bash\n ---> Running in 1b130e0e87e4\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.10/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.10/community/x86_64/APKINDEX.tar.gz\nv3.10.9-43-g3feb769ea3 [http://dl-cdn.alpinelinux.org/alpine/v3.10/main]\nv3.10.6-10-ged79a86de3 [http://dl-cdn.alpinelinux.org/alpine/v3.10/community]\nOK: 10351 distinct packages available\n(1/4) Installing ncurses-terminfo-base (6.1_p20190518-r2)\n(2/4) Installing ncurses-libs (6.1_p20190518-r2)\n(3/4) Installing readline (8.0.0-r0)\n(4/4) Installing bash (5.0.0-r0)\nExecuting bash-5.0.0-r0.post-install\nExecuting busybox-1.30.1-r3.trigger\nOK: 9 MiB in 20 packages\nRemoving intermediate container 1b130e0e87e4\n ---> 0cbbeb058d49\nStep 3/12 : RUN apk add git\n ---> Running in 4b48e645016a\n(1/6) Installing ca-certificates (20191127-r2)\n(2/6) Installing nghttp2-libs (1.39.2-r1)\n(3/6) Installing libcurl (7.66.0-r4)\n(4/6) Installing expat (2.2.8-r0)\n(5/6) Installing pcre2 (10.33-r0)\n(6/6) Installing git (2.22.5-r0)\nExecuting busybox-1.30.1-r3.trigger\nExecuting ca-certificates-20191127-r2.trigger\nOK: 24 MiB in 26 packages\nRemoving intermediate container 4b48e645016a\n ---> b3bd19b0568d\nStep 4/12 : RUN apk add  ffmpeg\n ---> Running in 09a89a725e16\n(1/41) Installing sdl2 (2.0.10-r0)\n(2/41) Installing libxau (1.0.9-r0)\n(3/41) Installing libbsd (0.9.1-r1)\n(4/41) Installing libxdmcp (1.1.3-r0)\n(5/41) Installing libxcb (1.13.1-r0)\n(6/41) Installing libx11 (1.6.12-r1)\n(7/41) Installing alsa-lib (1.1.9-r0)\n(8/41) Installing libbz2 (1.0.6-r7)\n(9/41) Installing libpng (1.6.37-r1)\n(10/41) Installing freetype (2.10.0-r1)\n(11/41) Installing libuuid (2.33.2-r0)\n(12/41) Installing fontconfig (2.13.1-r0)\n(13/41) Installing fribidi (1.0.5-r2)\n(14/41) Installing libass (0.14.0-r0)\n(15/41) Installing gmp (6.1.2-r1)\n(16/41) Installing nettle (3.4.1-r1)\n(17/41) Installing libffi (3.2.1-r6)\n(18/41) Installing p11-kit (0.23.16.1-r1)\n(19/41) Installing libtasn1 (4.14-r0)\n(20/41) Installing libunistring (0.9.10-r0)\n(21/41) Installing gnutls (3.6.15-r1)\n(22/41) Installing lame (3.100-r0)\n(23/41) Installing opus (1.3.1-r0)\n(24/41) Installing libogg (1.3.3-r2)\n(25/41) Installing libtheora (1.1.1-r14)\n(26/41) Installing libjpeg-turbo (2.0.4-r1)\n(27/41) Installing v4l-utils-libs (1.16.6-r0)\n(28/41) Installing libxext (1.3.4-r0)\n(29/41) Installing libxfixes (5.0.3-r2)\n(30/41) Installing libpciaccess (0.14-r0)\n(31/41) Installing libdrm (2.4.98-r0)\n(32/41) Installing wayland-libs-client (1.17.0-r0)\n(33/41) Installing libva (2.4.1-r0)\n(34/41) Installing libvdpau (1.2-r0)\n(35/41) Installing libvorbis (1.3.6-r2)\n(36/41) Installing libvpx (1.8.0-r0)\n(37/41) Installing x264-libs (20180304-r1)\n(38/41) Installing x265-libs (3.0-r0)\n(39/41) Installing xvidcore (1.3.4-r1)\n(40/41) Installing ffmpeg-libs (4.1.6-r0)\n(41/41) Installing ffmpeg (4.1.6-r0)\nExecuting busybox-1.30.1-r3.trigger\nOK: 74 MiB in 67 packages\nRemoving intermediate container 09a89a725e16\n ---> d9a7bc776feb\nStep 5/12 : RUN apk add imagemagick\n ---> Running in 0165de4b195d\n(1/30) Installing lcms2 (2.9-r1)\n(2/30) Installing libltdl (2.4.6-r6)\n(3/30) Installing libxml2 (2.9.9-r5)\n(4/30) Installing imagemagick-libs (7.0.8.68-r0)\n(5/30) Installing libxrender (0.9.10-r3)\n(6/30) Installing pixman (0.38.4-r0)\n(7/30) Installing cairo (1.16.0-r3)\n(8/30) Installing libintl (0.19.8.1-r4)\n(9/30) Installing libblkid (2.33.2-r0)\n(10/30) Installing libmount (2.33.2-r0)\n(11/30) Installing pcre (8.43-r1)\n(12/30) Installing glib (2.60.4-r0)\n(13/30) Installing dbus-libs (1.12.16-r1)\n(14/30) Installing avahi-libs (0.7-r2)\n(15/30) Installing cups-libs (2.2.12-r1)\n(16/30) Installing jbig2dec (0.16-r1)\n(17/30) Installing tiff (4.0.10-r3)\n(18/30) Installing ghostscript (9.27-r5)\n(19/30) Installing libde265 (1.0.3-r0)\n(20/30) Installing libheif (1.3.2-r2)\n(21/30) Installing libxft (2.3.3-r0)\n(22/30) Installing graphite2 (1.3.13-r1)\n(23/30) Installing harfbuzz (2.5.1-r0)\n(24/30) Installing pango (1.42.4-r2)\n(25/30) Installing libcroco (0.6.13-r1)\n(26/30) Installing shared-mime-info (1.12-r0)\n(27/30) Installing gdk-pixbuf (2.38.1-r0)\n(28/30) Installing librsvg (2.40.21-r0)\n(29/30) Installing libwebp (1.0.2-r0)\n(30/30) Installing imagemagick (7.0.8.68-r0)\nExecuting busybox-1.30.1-r3.trigger\nExecuting fontconfig-2.13.1-r0.trigger\nExecuting shared-mime-info-1.12-r0.trigger\nExecuting gdk-pixbuf-2.38.1-r0.trigger\nOK: 145 MiB in 97 packages\nRemoving intermediate container 0165de4b195d\n ---> bcfa071a44a1\nStep 6/12 : ENV NODE_ENV=production\n ---> Running in 0026f8c0df02\nRemoving intermediate container 0026f8c0df02\n ---> f2c722ff65a5\nStep 7/12 : WORKDIR /pisignage-server\n ---> Running in 266d1cb2ddda\nRemoving intermediate container 266d1cb2ddda\n ---> 33db5d8c72a0\nStep 8/12 : COPY [\"package.json\", \"package-lock.json*\", \"./\"]\n ---> 10a0f1726d1f\nStep 9/12 : RUN npm install --production\n ---> Running in 9078f1fe2fb3\n\u001b[91mnpm\u001b[0m\u001b[91m WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!\n\u001b[0m\n> ws@0.4.32 install /pisignage-server/node_modules/socket.io-client/node_modules/ws\n> (node-gyp rebuild 2> builderror.log) || (exit 0)\n\n\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.2 (node_modules/chokidar/node_modules/fsevents):\nnpm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91m\n\u001b[0madded 266 packages from 268 contributors and audited 299 packages in 6.144s\n\n27 packages are looking for funding\n  run `npm fund` for details\n\nfound 8 vulnerabilities (1 low, 4 high, 3 critical)\n  run `npm audit fix` to fix them, or `npm audit` for details\nRemoving intermediate container 9078f1fe2fb3\n ---> 9347371d4629\nStep 10/12 : COPY . .\n ---> bd9f1b6fdf03\nStep 11/12 : RUN chmod +x ./wait-for-it.sh\n ---> Running in ac6f12c3e90d\nRemoving intermediate container ac6f12c3e90d\n ---> 628ecfb85d64\nStep 12/12 : CMD [ \"./wait-for-it.sh\", \"mongo:27017\", \"--\", \"node\", \"server.js\"]\n ---> Running in a8928a0e1cc7\nRemoving intermediate container a8928a0e1cc7\n ---> 70a943cdc10e\nSuccessfully built 70a943cdc10e\nSuccessfully tagged pisignage-server:latest\n","stderr":"","imageSize":341124708},"repair":{"violations":[{"name":"npmCacheCleanAfterInstall","position":{"start":14,"end":14,"columnStart":4,"columnEnd":28}},{"name":"apkAddUseNoCache","position":{"start":1,"end":1,"columnStart":18,"columnEnd":30}},{"name":"apkAddUseNoCache","position":{"start":2,"end":2,"columnStart":4,"columnEnd":15}},{"name":"apkAddUseNoCache","position":{"start":3,"end":3,"columnStart":4,"columnEnd":19}},{"name":"apkAddUseNoCache","position":{"start":4,"end":4,"columnStart":4,"columnEnd":23}}],"repairedDockerfile":"FROM node:14.15-alpine3.10\nRUN apk update && apk add --no-cache bash\nRUN apk add --no-cache git\nRUN apk add --no-cache ffmpeg\nRUN apk add --no-cache imagemagick\n\nENV NODE_ENV=production\n\nWORKDIR /pisignage-server\n\nCOPY [\"package.json\", \"package-lock.json*\", \"./\"]\n\n#RUN rm -rf node_modues package-lock.json\n\nRUN npm install --production\n\nCOPY . .\nRUN chmod +x ./wait-for-it.sh\n\nCMD [ \"./wait-for-it.sh\", \"mongo:27017\", \"--\", \"node\", \"server.js\"]"},"repairedBuild":{"startTimestamp":1672818518955,"endTimestamp":1672818549316,"error":null,"stdout":"Sending build context to Docker daemon  21.35MB\r\r\nStep 1/12 : FROM node:14.15-alpine3.10\n ---> 778240c0fddd\nStep 2/12 : RUN apk update && apk add --no-cache bash\n ---> Running in f63ab2e371b9\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.10/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.10/community/x86_64/APKINDEX.tar.gz\nv3.10.9-43-g3feb769ea3 [http://dl-cdn.alpinelinux.org/alpine/v3.10/main]\nv3.10.6-10-ged79a86de3 [http://dl-cdn.alpinelinux.org/alpine/v3.10/community]\nOK: 10351 distinct packages available\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.10/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.10/community/x86_64/APKINDEX.tar.gz\n(1/4) Installing ncurses-terminfo-base (6.1_p20190518-r2)\n(2/4) Installing ncurses-libs (6.1_p20190518-r2)\n(3/4) Installing readline (8.0.0-r0)\n(4/4) Installing bash (5.0.0-r0)\nExecuting bash-5.0.0-r0.post-install\nExecuting busybox-1.30.1-r3.trigger\nOK: 9 MiB in 20 packages\nRemoving intermediate container f63ab2e371b9\n ---> a1132a4fe8f6\nStep 3/12 : RUN apk add --no-cache git\n ---> Running in d3bf8961ea0a\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.10/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.10/community/x86_64/APKINDEX.tar.gz\n(1/6) Installing ca-certificates (20191127-r2)\n(2/6) Installing nghttp2-libs (1.39.2-r1)\n(3/6) Installing libcurl (7.66.0-r4)\n(4/6) Installing expat (2.2.8-r0)\n(5/6) Installing pcre2 (10.33-r0)\n(6/6) Installing git (2.22.5-r0)\nExecuting busybox-1.30.1-r3.trigger\nExecuting ca-certificates-20191127-r2.trigger\nOK: 24 MiB in 26 packages\nRemoving intermediate container d3bf8961ea0a\n ---> 91c2ce01f343\nStep 4/12 : RUN apk add --no-cache ffmpeg\n ---> Running in 7a438d0b9e67\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.10/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.10/community/x86_64/APKINDEX.tar.gz\n(1/41) Installing sdl2 (2.0.10-r0)\n(2/41) Installing libxau (1.0.9-r0)\n(3/41) Installing libbsd (0.9.1-r1)\n(4/41) Installing libxdmcp (1.1.3-r0)\n(5/41) Installing libxcb (1.13.1-r0)\n(6/41) Installing libx11 (1.6.12-r1)\n(7/41) Installing alsa-lib (1.1.9-r0)\n(8/41) Installing libbz2 (1.0.6-r7)\n(9/41) Installing libpng (1.6.37-r1)\n(10/41) Installing freetype (2.10.0-r1)\n(11/41) Installing libuuid (2.33.2-r0)\n(12/41) Installing fontconfig (2.13.1-r0)\n(13/41) Installing fribidi (1.0.5-r2)\n(14/41) Installing libass (0.14.0-r0)\n(15/41) Installing gmp (6.1.2-r1)\n(16/41) Installing nettle (3.4.1-r1)\n(17/41) Installing libffi (3.2.1-r6)\n(18/41) Installing p11-kit (0.23.16.1-r1)\n(19/41) Installing libtasn1 (4.14-r0)\n(20/41) Installing libunistring (0.9.10-r0)\n(21/41) Installing gnutls (3.6.15-r1)\n(22/41) Installing lame (3.100-r0)\n(23/41) Installing opus (1.3.1-r0)\n(24/41) Installing libogg (1.3.3-r2)\n(25/41) Installing libtheora (1.1.1-r14)\n(26/41) Installing libjpeg-turbo (2.0.4-r1)\n(27/41) Installing v4l-utils-libs (1.16.6-r0)\n(28/41) Installing libxext (1.3.4-r0)\n(29/41) Installing libxfixes (5.0.3-r2)\n(30/41) Installing libpciaccess (0.14-r0)\n(31/41) Installing libdrm (2.4.98-r0)\n(32/41) Installing wayland-libs-client (1.17.0-r0)\n(33/41) Installing libva (2.4.1-r0)\n(34/41) Installing libvdpau (1.2-r0)\n(35/41) Installing libvorbis (1.3.6-r2)\n(36/41) Installing libvpx (1.8.0-r0)\n(37/41) Installing x264-libs (20180304-r1)\n(38/41) Installing x265-libs (3.0-r0)\n(39/41) Installing xvidcore (1.3.4-r1)\n(40/41) Installing ffmpeg-libs (4.1.6-r0)\n(41/41) Installing ffmpeg (4.1.6-r0)\nExecuting busybox-1.30.1-r3.trigger\nOK: 74 MiB in 67 packages\nRemoving intermediate container 7a438d0b9e67\n ---> b6772c6f0dcd\nStep 5/12 : RUN apk add --no-cache imagemagick\n ---> Running in eda9bcc6ce2d\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.10/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.10/community/x86_64/APKINDEX.tar.gz\n(1/30) Installing lcms2 (2.9-r1)\n(2/30) Installing libltdl (2.4.6-r6)\n(3/30) Installing libxml2 (2.9.9-r5)\n(4/30) Installing imagemagick-libs (7.0.8.68-r0)\n(5/30) Installing libxrender (0.9.10-r3)\n(6/30) Installing pixman (0.38.4-r0)\n(7/30) Installing cairo (1.16.0-r3)\n(8/30) Installing libintl (0.19.8.1-r4)\n(9/30) Installing libblkid (2.33.2-r0)\n(10/30) Installing libmount (2.33.2-r0)\n(11/30) Installing pcre (8.43-r1)\n(12/30) Installing glib (2.60.4-r0)\n(13/30) Installing dbus-libs (1.12.16-r1)\n(14/30) Installing avahi-libs (0.7-r2)\n(15/30) Installing cups-libs (2.2.12-r1)\n(16/30) Installing jbig2dec (0.16-r1)\n(17/30) Installing tiff (4.0.10-r3)\n(18/30) Installing ghostscript (9.27-r5)\n(19/30) Installing libde265 (1.0.3-r0)\n(20/30) Installing libheif (1.3.2-r2)\n(21/30) Installing libxft (2.3.3-r0)\n(22/30) Installing graphite2 (1.3.13-r1)\n(23/30) Installing harfbuzz (2.5.1-r0)\n(24/30) Installing pango (1.42.4-r2)\n(25/30) Installing libcroco (0.6.13-r1)\n(26/30) Installing shared-mime-info (1.12-r0)\n(27/30) Installing gdk-pixbuf (2.38.1-r0)\n(28/30) Installing librsvg (2.40.21-r0)\n(29/30) Installing libwebp (1.0.2-r0)\n(30/30) Installing imagemagick (7.0.8.68-r0)\nExecuting busybox-1.30.1-r3.trigger\nExecuting fontconfig-2.13.1-r0.trigger\nExecuting shared-mime-info-1.12-r0.trigger\nExecuting gdk-pixbuf-2.38.1-r0.trigger\nOK: 145 MiB in 97 packages\nRemoving intermediate container eda9bcc6ce2d\n ---> f6358f5612e8\nStep 6/12 : ENV NODE_ENV=production\n ---> Running in e9abcbc2b612\nRemoving intermediate container e9abcbc2b612\n ---> 89159948fb1d\nStep 7/12 : WORKDIR /pisignage-server\n ---> Running in 54797b726c82\nRemoving intermediate container 54797b726c82\n ---> 777e3b41c319\nStep 8/12 : COPY [\"package.json\", \"package-lock.json*\", \"./\"]\n ---> 9dae4716dc05\nStep 9/12 : RUN npm install --production\n ---> Running in 61f21d4d6af4\n\u001b[91mnpm\u001b[0m\u001b[91m WARN read-shrinkwrap This version of npm is compatible with lockfileVersion@1, but package-lock.json was generated for lockfileVersion@2. I'll try to do my best with it!\n\u001b[0m\n> ws@0.4.32 install /pisignage-server/node_modules/socket.io-client/node_modules/ws\n> (node-gyp rebuild 2> builderror.log) || (exit 0)\n\n\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.2 (node_modules/chokidar/node_modules/fsevents):\nnpm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91m\n\u001b[0madded 266 packages from 268 contributors and audited 299 packages in 4.807s\n\n27 packages are looking for funding\n  run `npm fund` for details\n\nfound 8 vulnerabilities (1 low, 4 high, 3 critical)\n  run `npm audit fix` to fix them, or `npm audit` for details\nRemoving intermediate container 61f21d4d6af4\n ---> b48f10bc58ff\nStep 10/12 : COPY . .\n ---> c2e929eefffc\nStep 11/12 : RUN chmod +x ./wait-for-it.sh\n ---> Running in 7d0635524536\nRemoving intermediate container 7d0635524536\n ---> ab0c7f116537\nStep 12/12 : CMD [ \"./wait-for-it.sh\", \"mongo:27017\", \"--\", \"node\", \"server.js\"]\n ---> Running in 36555a0d1b2e\nRemoving intermediate container 36555a0d1b2e\n ---> 3e5b8d79f0ca\nSuccessfully built 3e5b8d79f0ca\nSuccessfully tagged pisignage-server:latest\n","stderr":"","imageSize":341124776},"endTime":1672818549758}