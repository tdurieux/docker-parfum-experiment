{"repository":"https://github.com/thcyron/tracklog","dockerfilePath":"Dockerfile","startTime":1672610060526,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/thcyron/tracklog'...\n","error":null,"commit":"eaf11b803ed9a14eefb067b4c3d0e216d2c54ddd"},"originalBuild":{"startTimestamp":1672610061484,"endTimestamp":1672610186753,"error":null,"stdout":"Sending build context to Docker daemon  2.894MB\r\r\nStep 1/21 : FROM node:12 as node-builder\n ---> 6c8de432fc7f\nStep 2/21 : WORKDIR /tracklog\n ---> Running in f9c9b3fd62af\nRemoving intermediate container f9c9b3fd62af\n ---> 40f479b0bd8c\nStep 3/21 : COPY package.json .babelrc ./\n ---> 595bd3217f0e\nStep 4/21 : RUN npm install\n ---> Running in 81a86d7c6de6\n\u001b[91mnpm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142\n\u001b[0m\u001b[91mnpm WARN deprecated tar@2.2.2: This version of tar is no longer supported, and will not receive security updates. Please upgrade asap.\n\u001b[0m\u001b[91mnpm WARN deprecated uuid@3.4.0: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.\n\u001b[0m\u001b[91mnpm WARN deprecated har-validator@5.1.5: this library is no longer supported\n\u001b[0m\u001b[91mnpm WARN deprecated querystring@0.2.0: The querystring API is considered Legacy. new code should use the URLSearchParams API instead.\n\u001b[0m\u001b[91mnpm WARN deprecated core-js@1.2.7: core-js@<3.23.3 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Some versions have web compatibility issues. Please, upgrade your dependencies to the actual version of core-js.\n\u001b[0m\n> node-sass@4.14.1 install /tracklog/node_modules/node-sass\n> node scripts/install.js\n\nDownloading binary from https://github.com/sass/node-sass/releases/download/v4.14.1/linux-x64-72_binding.node\nDownload complete\nBinary saved to /tracklog/node_modules/node-sass/vendor/linux-x64-72/binding.node\nCaching binary to /root/.npm/node-sass/4.14.1/linux-x64-72_binding.node\n\n> node-sass@4.14.1 postinstall /tracklog/node_modules/node-sass\n> node scripts/build.js\n\nBinary found at /tracklog/node_modules/node-sass/vendor/linux-x64-72/binding.node\nTesting binary\nBinary is fine\n\u001b[91mnpm notice\u001b[0m\u001b[91m created a lockfile as package-lock.json. You should commit this file.\n\u001b[0m\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.2 (node_modules/chokidar/node_modules/fsevents):\nnpm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91mnpm WARN tracklog@0.1.0 No description\n\u001b[0m\u001b[91mnpm WARN tracklog@0.1.0 No repository field.\n\u001b[0m\u001b[91mnpm WARN tracklog@0.1.0 No license field.\n\u001b[0m\u001b[91m\n\u001b[0madded 525 packages from 396 contributors and audited 527 packages in 19.113s\n\n24 packages are looking for funding\n  run `npm fund` for details\n\nfound 13 vulnerabilities (2 low, 1 moderate, 10 high)\n  run `npm audit fix` to fix them, or `npm audit` for details\nRemoving intermediate container 81a86d7c6de6\n ---> 1d5a9db25608\nStep 5/21 : COPY css css/\n ---> 7d4468cf35d7\nStep 6/21 : COPY js js/\n ---> 54c7ae6d4e3b\nStep 7/21 : RUN mkdir public && npm run production:build\n ---> Running in 93fd80211569\n\n> tracklog@0.1.0 production:build /tracklog\n> npm run build:css & npm run production:build:js\n\n\n> tracklog@0.1.0 build:css /tracklog\n> node-sass --output-style compressed css/tracklog.scss public/app.css\n\n\n> tracklog@0.1.0 production:build:js /tracklog\n> NODE_ENV=production browserify -t babelify js/tracklog.js | uglifyjs -m -c > public/app.js\n\n\u001b[91m{\n  \"status\": 1,\n  \"file\": \"/tracklog/node_modules/bootstrap-sass/assets/stylesheets/bootstrap/_variables.scss\",\n  \"line\": 369,\n  \"column\": 46,\n  \"message\": \"Invalid CSS after \\\"...     floor(math\\\": expected expression (e.g. 1px, bold), was \\\".div($grid-gutter-w\\\"\",\n  \"formatted\": \"Error: Invalid CSS after \\\"...     floor(math\\\": expected expression (e.g. 1px, bold), was \\\".div($grid-gutter-w\\\"\\n        on line 369 of node_modules/bootstrap-sass/assets/stylesheets/bootstrap/_variables.scss\\n        from line 8 of node_modules/bootstrap-sass/assets/stylesheets/_bootstrap.scss\\n        from line 3 of css/tracklog.scss\\n>> vbar-padding-horizontal:        floor(math.div($grid-gutter-width, 2)) !defa\\n   ------------------------------------------^\\n\"\n}\n\u001b[0m\u001b[91mnpm\u001b[0m\u001b[91m ERR! code\u001b[0m\u001b[91m ELIFECYCLE\n\u001b[0m\u001b[91mnpm\u001b[0m\u001b[91m ERR!\u001b[0m\u001b[91m \u001b[0m\u001b[91merrno\u001b[0m\u001b[91m 1\n\u001b[0m\u001b[91mnpm \u001b[0m\u001b[91mERR!\u001b[0m\u001b[91m tracklog@0.1.0 build:css: `node-sass --output-style compressed css/tracklog.scss public/app.css`\nnpm\u001b[0m\u001b[91m \u001b[0m\u001b[91mERR!\u001b[0m\u001b[91m Exit status 1\n\u001b[0m\u001b[91mnpm \u001b[0m\u001b[91mERR! \n\u001b[0m\u001b[91mnpm \u001b[0m\u001b[91mERR! Failed at the tracklog@0.1.0 build:css script.\n\u001b[0m\u001b[91mnpm ERR!\u001b[0m\u001b[91m This is probably not a problem with npm. There is likely additional logging output above.\n\u001b[0m\u001b[91m\n\u001b[0m\u001b[91mnpm \u001b[0m\u001b[91mERR!\u001b[0m\u001b[91m A complete log of this run can be found in:\nnpm \u001b[0m\u001b[91mERR!\u001b[0m\u001b[91m     /root/.npm/_logs/2023-01-01T21_54_54_277Z-debug.log\n\u001b[0mRemoving intermediate container 93fd80211569\n ---> ebe62bdd6d09\nStep 8/21 : FROM golang:1.12 as go-builder\n1.12: Pulling from library/golang\ndc65f448a2e2: Pulling fs layer\n346ffb2b67d7: Pulling fs layer\ndea4ecac934f: Pulling fs layer\n8ac92ddf84b3: Pulling fs layer\n7ca605383307: Pulling fs layer\n020f524b99dd: Pulling fs layer\n06036b0307c9: Pulling fs layer\n7ca605383307: Waiting\n020f524b99dd: Waiting\n8ac92ddf84b3: Waiting\n06036b0307c9: Waiting\n346ffb2b67d7: Verifying Checksum\n346ffb2b67d7: Download complete\ndea4ecac934f: Verifying Checksum\ndea4ecac934f: Download complete\ndc65f448a2e2: Verifying Checksum\ndc65f448a2e2: Download complete\n8ac92ddf84b3: Verifying Checksum\n8ac92ddf84b3: Download complete\n06036b0307c9: Verifying Checksum\n06036b0307c9: Download complete\n7ca605383307: Verifying Checksum\n7ca605383307: Download complete\n020f524b99dd: Verifying Checksum\n020f524b99dd: Download complete\ndc65f448a2e2: Pull complete\n346ffb2b67d7: Pull complete\ndea4ecac934f: Pull complete\n8ac92ddf84b3: Pull complete\n7ca605383307: Pull complete\n020f524b99dd: Pull complete\n06036b0307c9: Pull complete\nDigest: sha256:d0e79a9c39cdb3d71cc45fec929d1308d50420b79201467ec602b1b80cc314a8\nStatus: Downloaded newer image for golang:1.12\n ---> ffcaee6f7d8b\nStep 9/21 : WORKDIR /tracklog\n ---> Running in af3bb9d6be3b\nRemoving intermediate container af3bb9d6be3b\n ---> d97a2f061778\nStep 10/21 : COPY go.mod go.sum ./\n ---> 4af6a6fc3d78\nStep 11/21 : RUN go mod download\n ---> Running in 560b31560407\n\u001b[91mgo: finding github.com/kylelemons/godebug v1.1.0\n\u001b[0m\u001b[91mgo: finding github.com/naoina/go-stringutil v0.1.0\n\u001b[0m\u001b[91mgo: finding github.com/gorilla/context v1.1.1\n\u001b[0m\u001b[91mgo: finding github.com/julienschmidt/httprouter v1.2.0\n\u001b[0m\u001b[91mgo: finding github.com/naoina/toml v0.1.1\n\u001b[0m\u001b[91mgo: finding github.com/thcyron/sqlbuilder v2.0.1-0.20160307210201-609a1abb836e+incompatible\n\u001b[0m\u001b[91mgo: finding github.com/gorilla/handlers v1.4.2\n\u001b[0m\u001b[91mgo: finding github.com/codegangsta/negroni v1.0.0\n\u001b[0m\u001b[91mgo: finding github.com/dgrijalva/jwt-go v3.2.0+incompatible\n\u001b[0m\u001b[91mgo: finding github.com/gorilla/csrf v1.6.0\n\u001b[0m\u001b[91mgo: finding github.com/lib/pq v1.2.0\n\u001b[0m\u001b[91mgo: finding github.com/thcyron/gpx v0.0.0-20160210223831-f95a7bb694cc\n\u001b[0m\u001b[91mgo: finding github.com/gorilla/securecookie v1.1.1\ngo: finding github.com/pkg/errors v0.8.0\n\u001b[0m\u001b[91mgo: finding golang.org/x/crypto v0.0.0-20190701094942-4def268fd1a4\n\u001b[0m\u001b[91mgo: finding golang.org/x/net v0.0.0-20190404232315-eb5bcb51f2a3\n\u001b[0m\u001b[91mgo: finding golang.org/x/sys v0.0.0-20190412213103-97732733099d\n\u001b[0m\u001b[91mgo: finding golang.org/x/crypto v0.0.0-20190308221718-c2843e01d9a2\n\u001b[0m\u001b[91mgo: finding golang.org/x/sys v0.0.0-20190215142949-d0b11bdaac8a\n\u001b[0m\u001b[91mgo: finding golang.org/x/text v0.3.0\n\u001b[0mRemoving intermediate container 560b31560407\n ---> 401daed4a223\nStep 12/21 : COPY . .\n ---> e64ff098b68d\nStep 13/21 : RUN CGO_ENABLED=0 go build -o /bin/tracklog-server ./cmd/server\n ---> Running in e2bb505f9975\nRemoving intermediate container e2bb505f9975\n ---> 3a700676c8f8\nStep 14/21 : RUN CGO_ENABLED=0 go build -o /bin/tracklog-control ./cmd/control\n ---> Running in 8dc8e103f907\nRemoving intermediate container 8dc8e103f907\n ---> b1b712587444\nStep 15/21 : FROM alpine:3.10\n ---> e7b300aee9f9\nStep 16/21 : WORKDIR /tracklog\n ---> Running in 19f40834312b\nRemoving intermediate container 19f40834312b\n ---> 39dc5f6c8dcf\nStep 17/21 : COPY templates templates/\n ---> e66c8e975aad\nStep 18/21 : COPY --from=node-builder /tracklog/public public/\n ---> d4ac8d6a9451\nStep 19/21 : COPY --from=go-builder /bin/tracklog-server /bin/tracklog-server\n ---> f3a4584f0be9\nStep 20/21 : COPY --from=go-builder /bin/tracklog-control /bin/tracklog-control\n ---> f09bfb635968\nStep 21/21 : ENTRYPOINT [\"/bin/tracklog-server\"]\n ---> Running in 1e1e3824bb2c\nRemoving intermediate container 1e1e3824bb2c\n ---> bb7a2c8a3ca4\nSuccessfully built bb7a2c8a3ca4\nSuccessfully tagged tracklog:latest\n","stderr":"","imageSize":26156207},"repair":{"violations":[{"name":"npmCacheCleanAfterInstall","position":{"start":3,"end":3,"columnStart":4,"columnEnd":15}}],"repairedDockerfile":"FROM node:12 as node-builder\nWORKDIR /tracklog\nCOPY package.json .babelrc ./\nRUN npm install\nCOPY css css/\nCOPY js js/\nRUN mkdir public && npm run production:build\n\nFROM golang:1.12 as go-builder\nWORKDIR /tracklog\nCOPY go.mod go.sum ./\nRUN go mod download\nCOPY . .\nRUN CGO_ENABLED=0 go build -o /bin/tracklog-server ./cmd/server\nRUN CGO_ENABLED=0 go build -o /bin/tracklog-control ./cmd/control\n\nFROM alpine:3.10\nWORKDIR /tracklog\nCOPY templates templates/\nCOPY --from=node-builder /tracklog/public public/\nCOPY --from=go-builder /bin/tracklog-server /bin/tracklog-server\nCOPY --from=go-builder /bin/tracklog-control /bin/tracklog-control\nENTRYPOINT [\"/bin/tracklog-server\"]\n"},"repairedBuild":{"startTimestamp":1672610187122,"endTimestamp":1672610266362,"error":null,"stdout":"Sending build context to Docker daemon  2.894MB\r\r\nStep 1/21 : FROM node:12 as node-builder\n ---> 6c8de432fc7f\nStep 2/21 : WORKDIR /tracklog\n ---> Running in 8178d970bc5b\nRemoving intermediate container 8178d970bc5b\n ---> 69f0375e04ad\nStep 3/21 : COPY package.json .babelrc ./\n ---> 1d5965d31f38\nStep 4/21 : RUN npm install\n ---> Running in 9f0f5636eddc\n\u001b[91mnpm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142\n\u001b[0m\u001b[91mnpm WARN deprecated har-validator@5.1.5: this library is no longer supported\n\u001b[0m\u001b[91mnpm WARN deprecated tar@2.2.2: This version of tar is no longer supported, and will not receive security updates. Please upgrade asap.\n\u001b[0m\u001b[91mnpm WARN deprecated uuid@3.4.0: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.\n\u001b[0m\u001b[91mnpm WARN deprecated querystring@0.2.0: The querystring API is considered Legacy. new code should use the URLSearchParams API instead.\n\u001b[0m\u001b[91mnpm WARN deprecated core-js@1.2.7: core-js@<3.23.3 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Some versions have web compatibility issues. Please, upgrade your dependencies to the actual version of core-js.\n\u001b[0m\n> node-sass@4.14.1 install /tracklog/node_modules/node-sass\n> node scripts/install.js\n\nDownloading binary from https://github.com/sass/node-sass/releases/download/v4.14.1/linux-x64-72_binding.node\nDownload complete\nBinary saved to /tracklog/node_modules/node-sass/vendor/linux-x64-72/binding.node\nCaching binary to /root/.npm/node-sass/4.14.1/linux-x64-72_binding.node\n\n> node-sass@4.14.1 postinstall /tracklog/node_modules/node-sass\n> node scripts/build.js\n\nBinary found at /tracklog/node_modules/node-sass/vendor/linux-x64-72/binding.node\nTesting binary\nBinary is fine\n\u001b[91mnpm notice created a lockfile as package-lock.json. You should commit this file.\n\u001b[0m\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.2 (node_modules/chokidar/node_modules/fsevents):\n\u001b[0m\u001b[91mnpm WARN notsup\u001b[0m\u001b[91m SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91mnpm WARN tracklog@0.1.0 No description\n\u001b[0m\u001b[91mnpm WARN tracklog@0.1.0 No repository field.\n\u001b[0m\u001b[91mnpm WARN tracklog@0.1.0 No license field.\n\u001b[0m\u001b[91m\n\u001b[0madded 525 packages from 396 contributors and audited 527 packages in 12.429s\n\n24 packages are looking for funding\n  run `npm fund` for details\n\nfound 13 vulnerabilities (2 low, 1 moderate, 10 high)\n  run `npm audit fix` to fix them, or `npm audit` for details\nRemoving intermediate container 9f0f5636eddc\n ---> 45f1f814ad74\nStep 5/21 : COPY css css/\n ---> b3bb136981bf\nStep 6/21 : COPY js js/\n ---> 698dc05cc9f4\nStep 7/21 : RUN mkdir public && npm run production:build\n ---> Running in a6846120c99a\n\n> tracklog@0.1.0 production:build /tracklog\n> npm run build:css & npm run production:build:js\n\n\n> tracklog@0.1.0 build:css /tracklog\n> node-sass --output-style compressed css/tracklog.scss public/app.css\n\n\n> tracklog@0.1.0 production:build:js /tracklog\n> NODE_ENV=production browserify -t babelify js/tracklog.js | uglifyjs -m -c > public/app.js\n\n\u001b[91m{\n  \"status\": 1,\n  \"file\": \"/tracklog/node_modules/bootstrap-sass/assets/stylesheets/bootstrap/_variables.scss\",\n  \"line\": 369,\n  \"column\": 46,\n  \"message\": \"Invalid CSS after \\\"...     floor(math\\\": expected expression (e.g. 1px, bold), was \\\".div($grid-gutter-w\\\"\",\n  \"formatted\": \"Error: Invalid CSS after \\\"...     floor(math\\\": expected expression (e.g. 1px, bold), was \\\".div($grid-gutter-w\\\"\\n        on line 369 of node_modules/bootstrap-sass/assets/stylesheets/bootstrap/_variables.scss\\n        from line 8 of node_modules/bootstrap-sass/assets/stylesheets/_bootstrap.scss\\n        from line 3 of css/tracklog.scss\\n>> vbar-padding-horizontal:        floor(math.div($grid-gutter-width, 2)) !defa\\n   ------------------------------------------^\\n\"\n}\n\u001b[0m\u001b[91mnpm ERR! code\u001b[0m\u001b[91m ELIFECYCLE\n\u001b[0m\u001b[91mnpm\u001b[0m\u001b[91m ERR!\u001b[0m\u001b[91m errno\u001b[0m\u001b[91m 1\n\u001b[0m\u001b[91mnpm ERR! tracklog@0.1.0 build:css: `node-sass --output-style compressed css/tracklog.scss public/app.css`\nnpm ERR! Exit status 1\nnpm ERR! \nnpm \u001b[0m\u001b[91mERR! Failed at the tracklog@0.1.0 build:css script.\nnpm \u001b[0m\u001b[91mERR! This is probably not a problem with npm. There is likely additional logging output above.\n\u001b[0m\u001b[91m\nnpm ERR! A complete log of this run can be found in:\nnpm ERR!     /root/.npm/_logs/2023-01-01T21_56_57_865Z-debug.log\n\u001b[0mRemoving intermediate container a6846120c99a\n ---> 15c6fc2be6ee\nStep 8/21 : FROM golang:1.12 as go-builder\n ---> ffcaee6f7d8b\nStep 9/21 : WORKDIR /tracklog\n ---> Running in 2d4a347cc08d\nRemoving intermediate container 2d4a347cc08d\n ---> ff6cc83a7cf3\nStep 10/21 : COPY go.mod go.sum ./\n ---> fb07141a4a6e\nStep 11/21 : RUN go mod download\n ---> Running in 64f4a36980e5\n\u001b[91mgo: finding github.com/thcyron/sqlbuilder v2.0.1-0.20160307210201-609a1abb836e+incompatible\ngo: finding github.com/gorilla/context v1.1.1\n\u001b[0m\u001b[91mgo: finding github.com/naoina/toml v0.1.1\ngo: finding github.com/kylelemons/godebug v1.1.0\n\u001b[0m\u001b[91mgo: finding github.com/dgrijalva/jwt-go v3.2.0+incompatible\n\u001b[0m\u001b[91mgo: finding github.com/gorilla/handlers v1.4.2\n\u001b[0m\u001b[91mgo: finding github.com/gorilla/csrf v1.6.0\n\u001b[0m\u001b[91mgo: finding github.com/julienschmidt/httprouter v1.2.0\n\u001b[0m\u001b[91mgo: finding github.com/naoina/go-stringutil v0.1.0\n\u001b[0m\u001b[91mgo: finding github.com/codegangsta/negroni v1.0.0\n\u001b[0m\u001b[91mgo: finding github.com/lib/pq v1.2.0\n\u001b[0m\u001b[91mgo: finding github.com/thcyron/gpx v0.0.0-20160210223831-f95a7bb694cc\ngo: finding github.com/pkg/errors v0.8.0\n\u001b[0m\u001b[91mgo: finding github.com/gorilla/securecookie v1.1.1\n\u001b[0m\u001b[91mgo: finding golang.org/x/crypto v0.0.0-20190701094942-4def268fd1a4\n\u001b[0m\u001b[91mgo: finding golang.org/x/net v0.0.0-20190404232315-eb5bcb51f2a3\ngo: finding golang.org/x/sys v0.0.0-20190412213103-97732733099d\n\u001b[0m\u001b[91mgo: finding golang.org/x/crypto v0.0.0-20190308221718-c2843e01d9a2\n\u001b[0m\u001b[91mgo: finding golang.org/x/sys v0.0.0-20190215142949-d0b11bdaac8a\n\u001b[0m\u001b[91mgo: finding golang.org/x/text v0.3.0\n\u001b[0mRemoving intermediate container 64f4a36980e5\n ---> 54acbcc32cb4\nStep 12/21 : COPY . .\n ---> df2f050f108a\nStep 13/21 : RUN CGO_ENABLED=0 go build -o /bin/tracklog-server ./cmd/server\n ---> Running in 1add8cc45027\nRemoving intermediate container 1add8cc45027\n ---> eb94868840f7\nStep 14/21 : RUN CGO_ENABLED=0 go build -o /bin/tracklog-control ./cmd/control\n ---> Running in d6ef6897743e\nRemoving intermediate container d6ef6897743e\n ---> e9a64d26a38f\nStep 15/21 : FROM alpine:3.10\n ---> e7b300aee9f9\nStep 16/21 : WORKDIR /tracklog\n ---> Running in 9bf7abf58f7e\nRemoving intermediate container 9bf7abf58f7e\n ---> 39f0f66c7eac\nStep 17/21 : COPY templates templates/\n ---> bb94455c2c02\nStep 18/21 : COPY --from=node-builder /tracklog/public public/\n ---> 16ddd1fb7356\nStep 19/21 : COPY --from=go-builder /bin/tracklog-server /bin/tracklog-server\n ---> 98cb8a22c968\nStep 20/21 : COPY --from=go-builder /bin/tracklog-control /bin/tracklog-control\n ---> bf396fb12f0d\nStep 21/21 : ENTRYPOINT [\"/bin/tracklog-server\"]\n ---> Running in dc0f7d5c33cd\nRemoving intermediate container dc0f7d5c33cd\n ---> 401f261164a4\nSuccessfully built 401f261164a4\nSuccessfully tagged tracklog:latest\n","stderr":"","imageSize":26156207},"endTime":1672610266608}