{"repository":"https://github.com/kcleal/dysgu","dockerfilePath":"Dockerfile","startTime":1672497754860,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/kcleal/dysgu'...\n","error":null,"commit":"34c5d3b78e423936f0d14bf725cba08582190c7f"},"originalBuild":{"startTimestamp":1672497755949,"endTimestamp":1672497865890,"error":null,"stdout":"Sending build context to Docker daemon  6.195MB\r\r\nStep 1/8 : FROM python:3.9\n ---> 68cf04410baf\nStep 2/8 : MAINTAINER Kez Cleal clealk@cardiff.ac.uk\n ---> Running in db09e5c5770f\nRemoving intermediate container db09e5c5770f\n ---> fcd8012a7955\nStep 3/8 : USER root\n ---> Running in 50e22ed59bec\nRemoving intermediate container 50e22ed59bec\n ---> 832ab56c8000\nStep 4/8 : ENV VIRTUAL_ENV=/opt/venv\n ---> Running in 29f53a1a4b10\nRemoving intermediate container 29f53a1a4b10\n ---> ec8179c0c115\nStep 5/8 : RUN python3 -m venv $VIRTUAL_ENV\n ---> Running in c9269f05c1ab\nRemoving intermediate container c9269f05c1ab\n ---> 6907a91331eb\nStep 6/8 : ENV PATH=\"$VIRTUAL_ENV/bin:$PATH\"\n ---> Running in 234304f7f307\nRemoving intermediate container 234304f7f307\n ---> d96ece6d7874\nStep 7/8 : RUN pip install --upgrade pip; pip install numpy; pip install dysgu --upgrade\n ---> Running in af495858a33a\nRequirement already satisfied: pip in /opt/venv/lib/python3.9/site-packages (22.0.4)\nCollecting pip\n  Downloading pip-22.3.1-py3-none-any.whl (2.1 MB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 2.1/2.1 MB 41.7 MB/s eta 0:00:00\nInstalling collected packages: pip\n  Attempting uninstall: pip\n    Found existing installation: pip 22.0.4\n    Uninstalling pip-22.0.4:\n      Successfully uninstalled pip-22.0.4\nSuccessfully installed pip-22.3.1\nCollecting numpy\n  Downloading numpy-1.24.1-cp39-cp39-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (17.3 MB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 17.3/17.3 MB 25.9 MB/s eta 0:00:00\nInstalling collected packages: numpy\nSuccessfully installed numpy-1.24.1\nCollecting dysgu\n  Downloading dysgu-1.3.12-cp39-cp39-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (26.1 MB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 26.1/26.1 MB 9.5 MB/s eta 0:00:00\nCollecting cython\n  Downloading Cython-0.29.32-cp39-cp39-manylinux_2_17_x86_64.manylinux2014_x86_64.manylinux_2_24_x86_64.whl (2.0 MB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 2.0/2.0 MB 32.2 MB/s eta 0:00:00\nCollecting scikit-learn>=0.22\n  Downloading scikit_learn-1.2.0-cp39-cp39-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (9.5 MB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 9.5/9.5 MB 43.0 MB/s eta 0:00:00\nCollecting sortedcontainers\n  Downloading sortedcontainers-2.4.0-py2.py3-none-any.whl (29 kB)\nCollecting networkx>=2.4\n  Downloading networkx-2.8.8-py3-none-any.whl (2.0 MB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 2.0/2.0 MB 2.0 MB/s eta 0:00:00\nCollecting click>=8.0\n  Downloading click-8.1.3-py3-none-any.whl (96 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 96.6/96.6 kB 328.3 kB/s eta 0:00:00\nCollecting pysam\n  Downloading pysam-0.20.0-cp39-cp39-manylinux_2_24_x86_64.whl (15.6 MB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 15.6/15.6 MB 13.1 MB/s eta 0:00:00\nRequirement already satisfied: numpy>=1.18 in /opt/venv/lib/python3.9/site-packages (from dysgu) (1.24.1)\nCollecting lightgbm\n  Downloading lightgbm-3.3.3-py3-none-manylinux1_x86_64.whl (2.0 MB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 2.0/2.0 MB 14.3 MB/s eta 0:00:00\nCollecting pandas\n  Downloading pandas-1.5.2-cp39-cp39-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (12.2 MB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 12.2/12.2 MB 34.6 MB/s eta 0:00:00\nCollecting edlib\n  Downloading edlib-1.3.9-cp39-cp39-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (352 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 352.1/352.1 kB 8.8 MB/s eta 0:00:00\nCollecting scipy\n  Downloading scipy-1.9.3-cp39-cp39-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (33.8 MB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 33.8/33.8 MB 14.6 MB/s eta 0:00:00\nCollecting joblib>=1.1.1\n  Downloading joblib-1.2.0-py3-none-any.whl (297 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 298.0/298.0 kB 1.4 MB/s eta 0:00:00\nCollecting threadpoolctl>=2.0.0\n  Downloading threadpoolctl-3.1.0-py3-none-any.whl (14 kB)\nCollecting wheel\n  Downloading wheel-0.38.4-py3-none-any.whl (36 kB)\nCollecting python-dateutil>=2.8.1\n  Downloading python_dateutil-2.8.2-py2.py3-none-any.whl (247 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 247.7/247.7 kB 11.1 MB/s eta 0:00:00\nCollecting pytz>=2020.1\n  Downloading pytz-2022.7-py2.py3-none-any.whl (499 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 499.4/499.4 kB 20.9 MB/s eta 0:00:00\nCollecting six>=1.5\n  Downloading six-1.16.0-py2.py3-none-any.whl (11 kB)\nInstalling collected packages: sortedcontainers, pytz, pysam, edlib, wheel, threadpoolctl, six, scipy, networkx, joblib, cython, click, scikit-learn, python-dateutil, pandas, lightgbm, dysgu\nSuccessfully installed click-8.1.3 cython-0.29.32 dysgu-1.3.12 edlib-1.3.9 joblib-1.2.0 lightgbm-3.3.3 networkx-2.8.8 pandas-1.5.2 pysam-0.20.0 python-dateutil-2.8.2 pytz-2022.7 scikit-learn-1.2.0 scipy-1.9.3 six-1.16.0 sortedcontainers-2.4.0 threadpoolctl-3.1.0 wheel-0.38.4\nRemoving intermediate container af495858a33a\n ---> ea55e213ab5f\nStep 8/8 : CMD [\"/bin/sh\"]\n ---> Running in aa944aaff60c\nRemoving intermediate container aa944aaff60c\n ---> 211370ee43ac\nSuccessfully built 211370ee43ac\nSuccessfully tagged dysgu:latest\n","stderr":"","imageSize":1529188513},"repair":{"violations":[{"name":"pipUseNoCacheDir","position":{"start":12,"end":12,"columnStart":4,"columnEnd":30}},{"name":"pipUseNoCacheDir","position":{"start":12,"end":12,"columnStart":31,"columnEnd":49}},{"name":"pipUseNoCacheDir","position":{"start":12,"end":12,"columnStart":50,"columnEnd":77}}],"repairedDockerfile":"# FROM quay.io/pypa/manylinux2014_x86_64\nFROM python:3.9\n\nMAINTAINER Kez Cleal clealk@cardiff.ac.uk\n\nUSER root\n\nENV VIRTUAL_ENV=/opt/venv\nRUN python3 -m venv $VIRTUAL_ENV\nENV PATH=\"$VIRTUAL_ENV/bin:$PATH\"\n\nRUN pip install --no-cache-dir --upgrade pip; pip install --no-cache-dir numpy; pip install --no-cache-dir dysgu --upgrade\n\nCMD [\"/bin/sh\"]\n\n\n# Docker user guide\n# -----------------\n## Make an 'input_folder', put your bam file and reference genome inside:\n\n# ./input_folder/\n#     sample.bam\n#     reference.fasta\n#     reference.fasta.fai\n\n## Make an 'output_folder'\n# mkdir output_folder\n\n## Set up docker\n# docker pull kcleal/dysgu\n# docker run -it \\\n#      --mount src=\"${PWD}\"/input_folder,target=/input_folder,type=bind \\\n#      --mount src=\"${PWD}\"/output_folder,target=/output_folder,type=bind \\\n#      kcleal/dysgu\n# cd input_folder\n\n## Run dysgu:\n\n# dysgu run reference.fasta wd sample.bam > ../output_folder/sample.vcf\n# exit"},"repairedBuild":{"startTimestamp":1672497867472,"endTimestamp":1672498074709,"error":null,"stdout":"Sending build context to Docker daemon  6.195MB\r\r\nStep 1/8 : FROM python:3.9\n ---> 68cf04410baf\nStep 2/8 : MAINTAINER Kez Cleal clealk@cardiff.ac.uk\n ---> Running in 3f518f12c6e6\nRemoving intermediate container 3f518f12c6e6\n ---> 154dc5318ca2\nStep 3/8 : USER root\n ---> Running in d8b785f2c379\nRemoving intermediate container d8b785f2c379\n ---> 5afa4890336f\nStep 4/8 : ENV VIRTUAL_ENV=/opt/venv\n ---> Running in 961da1204ce3\nRemoving intermediate container 961da1204ce3\n ---> 2bdd24a5b91f\nStep 5/8 : RUN python3 -m venv $VIRTUAL_ENV\n ---> Running in 1e4414c812a0\nRemoving intermediate container 1e4414c812a0\n ---> 807425ca10c3\nStep 6/8 : ENV PATH=\"$VIRTUAL_ENV/bin:$PATH\"\n ---> Running in f509dc9f31ca\nRemoving intermediate container f509dc9f31ca\n ---> 3f43c28be1a7\nStep 7/8 : RUN pip install --no-cache-dir --upgrade pip; pip install --no-cache-dir numpy; pip install --no-cache-dir dysgu --upgrade\n ---> Running in 6b6eb1536685\nRequirement already satisfied: pip in /opt/venv/lib/python3.9/site-packages (22.0.4)\nCollecting pip\n  Downloading pip-22.3.1-py3-none-any.whl (2.1 MB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 2.1/2.1 MB 68.0 MB/s eta 0:00:00\nInstalling collected packages: pip\n  Attempting uninstall: pip\n    Found existing installation: pip 22.0.4\n    Uninstalling pip-22.0.4:\n      Successfully uninstalled pip-22.0.4\nSuccessfully installed pip-22.3.1\nCollecting numpy\n  Downloading numpy-1.24.1-cp39-cp39-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (17.3 MB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 17.3/17.3 MB 99.6 MB/s eta 0:00:00\nInstalling collected packages: numpy\nSuccessfully installed numpy-1.24.1\nCollecting dysgu\n  Downloading dysgu-1.3.12-cp39-cp39-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (26.1 MB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 26.1/26.1 MB 90.8 MB/s eta 0:00:00\nCollecting pysam\n  Downloading pysam-0.20.0-cp39-cp39-manylinux_2_24_x86_64.whl (15.6 MB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 15.6/15.6 MB 95.0 MB/s eta 0:00:00\nCollecting sortedcontainers\n  Downloading sortedcontainers-2.4.0-py2.py3-none-any.whl (29 kB)\nCollecting cython\n  Downloading Cython-0.29.32-cp39-cp39-manylinux_2_17_x86_64.manylinux2014_x86_64.manylinux_2_24_x86_64.whl (2.0 MB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 2.0/2.0 MB 102.5 MB/s eta 0:00:00\nRequirement already satisfied: numpy>=1.18 in /opt/venv/lib/python3.9/site-packages (from dysgu) (1.24.1)\nCollecting lightgbm\n  Downloading lightgbm-3.3.3-py3-none-manylinux1_x86_64.whl (2.0 MB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 2.0/2.0 MB 92.1 MB/s eta 0:00:00\nCollecting scipy\n  Downloading scipy-1.9.3-cp39-cp39-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (33.8 MB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 33.8/33.8 MB 93.2 MB/s eta 0:00:00\nCollecting pandas\n  Downloading pandas-1.5.2-cp39-cp39-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (12.2 MB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 12.2/12.2 MB 95.4 MB/s eta 0:00:00\nCollecting edlib\n  Downloading edlib-1.3.9-cp39-cp39-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (352 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 352.1/352.1 kB 202.6 MB/s eta 0:00:00\nCollecting scikit-learn>=0.22\n  Downloading scikit_learn-1.2.0-cp39-cp39-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (9.5 MB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 9.5/9.5 MB 89.4 MB/s eta 0:00:00\nCollecting networkx>=2.4\n  Downloading networkx-2.8.8-py3-none-any.whl (2.0 MB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 2.0/2.0 MB 108.8 MB/s eta 0:00:00\nCollecting click>=8.0\n  Downloading click-8.1.3-py3-none-any.whl (96 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 96.6/96.6 kB 299.5 MB/s eta 0:00:00\nCollecting threadpoolctl>=2.0.0\n  Downloading threadpoolctl-3.1.0-py3-none-any.whl (14 kB)\nCollecting joblib>=1.1.1\n  Downloading joblib-1.2.0-py3-none-any.whl (297 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 298.0/298.0 kB 104.5 MB/s eta 0:00:00\nCollecting wheel\n  Downloading wheel-0.38.4-py3-none-any.whl (36 kB)\nCollecting pytz>=2020.1\n  Downloading pytz-2022.7-py2.py3-none-any.whl (499 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 499.4/499.4 kB 140.6 MB/s eta 0:00:00\nCollecting python-dateutil>=2.8.1\n  Downloading python_dateutil-2.8.2-py2.py3-none-any.whl (247 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 247.7/247.7 kB 119.5 MB/s eta 0:00:00\nCollecting six>=1.5\n  Downloading six-1.16.0-py2.py3-none-any.whl (11 kB)\nInstalling collected packages: sortedcontainers, pytz, pysam, edlib, wheel, threadpoolctl, six, scipy, networkx, joblib, cython, click, scikit-learn, python-dateutil, pandas, lightgbm, dysgu\nSuccessfully installed click-8.1.3 cython-0.29.32 dysgu-1.3.12 edlib-1.3.9 joblib-1.2.0 lightgbm-3.3.3 networkx-2.8.8 pandas-1.5.2 pysam-0.20.0 python-dateutil-2.8.2 pytz-2022.7 scikit-learn-1.2.0 scipy-1.9.3 six-1.16.0 sortedcontainers-2.4.0 threadpoolctl-3.1.0 wheel-0.38.4\nRemoving intermediate container 6b6eb1536685\n ---> ba161ab51d4f\nStep 8/8 : CMD [\"/bin/sh\"]\n ---> Running in c769d501ff9b\nRemoving intermediate container c769d501ff9b\n ---> c7cf7d17c7cb\nSuccessfully built c7cf7d17c7cb\nSuccessfully tagged dysgu:latest\n","stderr":"","imageSize":1404069626},"endTime":1672498076081}