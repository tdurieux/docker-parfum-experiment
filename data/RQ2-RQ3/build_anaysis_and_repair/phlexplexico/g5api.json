{"repository":"https://github.com/phlexplexico/g5api","dockerfilePath":"Dockerfile","startTime":1673027307528,"endTime":1673027588002,"clone":{"startTime":1673027307528,"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/phlexplexico/g5api'...\n","error":null,"endTime":1673027308366,"commit":"2a9243261d7a53a55a9ec1547d0878f37c3545e5"},"originalBuild":{"startTime":1673027308497,"endTime":1673027477921,"error":null,"stdout":"Sending build context to Docker daemon  1.224MB\r\r\nStep 1/9 : FROM node:16-alpine\n16-alpine: Pulling from library/node\nc158987b0551: Already exists\ne15b2da73907: Pulling fs layer\n90461d7cfbbe: Pulling fs layer\n06b1a47b9f99: Pulling fs layer\n06b1a47b9f99: Verifying Checksum\n06b1a47b9f99: Download complete\n90461d7cfbbe: Verifying Checksum\n90461d7cfbbe: Download complete\ne15b2da73907: Verifying Checksum\ne15b2da73907: Download complete\ne15b2da73907: Pull complete\n90461d7cfbbe: Pull complete\n06b1a47b9f99: Pull complete\nDigest: sha256:58e4dfcf063f67d71e608c3cace5a0bcf39e9dbab3047b41e20c15c7132d1d46\nStatus: Downloaded newer image for node:16-alpine\n ---> 610c0494e820\nStep 2/9 : RUN apk add gettext python3 build-base\n ---> Running in 66f402c51552\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/34) Installing binutils (2.39-r2)\n(2/34) Installing libmagic (5.43-r0)\n(3/34) Installing file (5.43-r0)\n(4/34) Installing libgomp (12.2.1_git20220924-r4)\n(5/34) Installing libatomic (12.2.1_git20220924-r4)\n(6/34) Installing gmp (6.2.1-r2)\n(7/34) Installing isl25 (0.25-r0)\n(8/34) Installing mpfr4 (4.1.0-r0)\n(9/34) Installing mpc1 (1.2.1-r1)\n(10/34) Installing gcc (12.2.1_git20220924-r4)\n(11/34) Installing libstdc++-dev (12.2.1_git20220924-r4)\n(12/34) Installing musl-dev (1.2.3-r4)\n(13/34) Installing libc-dev (0.7.2-r3)\n(14/34) Installing g++ (12.2.1_git20220924-r4)\n(15/34) Installing make (4.3-r1)\n(16/34) Installing fortify-headers (1.1-r1)\n(17/34) Installing patch (2.7.6-r8)\n(18/34) Installing build-base (0.5-r3)\n(19/34) Installing libintl (0.21.1-r1)\n(20/34) Installing ncurses-terminfo-base (6.3_p20221119-r0)\n(21/34) Installing ncurses-libs (6.3_p20221119-r0)\n(22/34) Installing libunistring (1.1-r0)\n(23/34) Installing gettext-libs (0.21.1-r1)\n(24/34) Installing xz-libs (5.2.9-r0)\n(25/34) Installing libxml2 (2.10.3-r1)\n(26/34) Installing gettext (0.21.1-r1)\n(27/34) Installing libbz2 (1.0.8-r4)\n(28/34) Installing libexpat (2.5.0-r0)\n(29/34) Installing libffi (3.4.4-r0)\n(30/34) Installing gdbm (1.23-r0)\n(31/34) Installing mpdecimal (2.5.1-r1)\n(32/34) Installing readline (8.2.0-r0)\n(33/34) Installing sqlite-libs (3.40.1-r0)\n(34/34) Installing python3 (3.10.9-r1)\nExecuting busybox-1.35.0-r29.trigger\nOK: 300 MiB in 51 packages\nRemoving intermediate container 66f402c51552\n ---> ba5ab48182b8\nStep 3/9 : EXPOSE 3301\n ---> Running in 716684da44d2\nRemoving intermediate container 716684da44d2\n ---> 7c45ab80bf5c\nStep 4/9 : WORKDIR /Get5API\n ---> Running in 38c39bc1014e\nRemoving intermediate container 38c39bc1014e\n ---> b1865ff3aea7\nStep 5/9 : COPY package*.json .\n ---> 12e90f1a1db6\nStep 6/9 : COPY yarn.lock .\n ---> 5a63479010a5\nStep 7/9 : RUN yarn\n ---> Running in 8ae0e5591a48\nyarn install v1.22.19\n\u001b[91mwarning package.json: Unable to read \"./bin/\" directory of module \"g5api\"\n\u001b[0m\u001b[91mwarning g5api@1.7.0.0: Unable to read \"./bin/\" directory of module \"g5api\"\n\u001b[0m\u001b[91mwarning g5api@1.7.0.0: Unable to read \"./bin/\" directory of module \"g5api\"\n\u001b[0m\u001b[91mwarning g5api@1.7.0.0: Unable to read \"./bin/\" directory of module \"g5api\"\n\u001b[0m[1/5] Validating package.json...\n\u001b[91mwarning g5api@1.7.0.0: Unable to read \"./bin/\" directory of module \"g5api\"\n\u001b[0m[2/5] Resolving packages...\n[3/5] Fetching packages...\n[4/5] Linking dependencies...\n\u001b[91mwarning \"swagger-jsdoc > swagger-parser > @apidevtools/swagger-parser@10.0.2\" has unmet peer dependency \"openapi-types@>=7\".\n\u001b[0m\u001b[91mwarning Workspaces can only be enabled in private projects.\n\u001b[0m[5/5] Building fresh packages...\n\u001b[91mwarning Error running install script for optional dependency: \"/Get5API/node_modules/cpu-features: Command failed.\nExit code: 1\nCommand: node-gyp rebuild\nArguments: \nDirectory: /Get5API/node_modules/cpu-features\nOutput:\ngyp info it worked if it ends with ok\ngyp info using node-gyp@9.1.0\ngyp info using node@16.19.0 | linux | x64\ngyp info find Python using Python version 3.10.9 found at \\\"/usr/bin/python3\\\"\ngyp http GET https://unofficial-builds.nodejs.org/download/release/v16.19.0/node-v16.19.0-headers.tar.gz\ngyp http 200 https://unofficial-builds.nodejs.org/download/release/v16.19.0/node-v16.19.0-headers.tar.gz\ngyp http GET https://unofficial-builds.nodejs.org/download/release/v16.19.0/SHASUMS256.txt\ngyp http 200 https://unofficial-builds.nodejs.org/download/release/v16.19.0/SHASUMS256.txt\ngyp info spawn /usr/bin/python3\ngyp info spawn args [\ngyp info spawn args   '/usr/local/lib/node_modules/npm/node_modules/node-gyp/gyp/gyp_main.py',\ngyp info spawn args   'binding.gyp',\ngyp info spawn args   '-f',\ngyp info spawn args   'make',\ngyp info spawn args   '-I',\ngyp info spawn args   '/Get5API/node_modules/cpu-features/build/config.gypi',\ngyp info spawn args   '-I',\ngyp info spawn args   '/usr/local/lib/node_modules/npm/node_modules/node-gyp/addon.gypi',\ngyp info spawn args   '-I',\ngyp info spawn args   '/root/.cache/node-gyp/16.19.0/include/node/common.gypi',\ngyp info spawn args   '-Dlibrary=shared_library',\ngyp info spawn args   '-Dvisibility=default',\ngyp info spawn args   '-Dnode_root_dir=/root/.cache/node-gyp/16.19.0',\ngyp info spawn args   '-Dnode_gyp_dir=/usr/local/lib/node_modules/npm/node_modules/node-gyp',\ngyp info spawn args   '-Dnode_lib_file=/root/.cache/node-gyp/16.19.0/<(target_arch)/node.lib',\ngyp info spawn args   '-Dmodule_root_dir=/Get5API/node_modules/cpu-features',\ngyp info spawn args   '-Dnode_engine=v8',\ngyp info spawn args   '--depth=.',\ngyp info spawn args   '--no-parallel',\ngyp info spawn args   '--generator-output',\ngyp info spawn args   'build',\ngyp info spawn args   '-Goutput_dir=.'\ngyp info spawn args ]\ngyp info spawn make\ngyp info spawn args [ 'BUILDTYPE=Release', '-C', 'build' ]\nmake: Entering directory '/Get5API/node_modules/cpu-features/build'\n  ACTION Configuring dependencies /Get5API/node_modules/cpu-features/deps/cpu_features/build/Makefile\n/bin/sh: cmake: not found\nmake: *** [config_deps.target.mk:13: /Get5API/node_modules/cpu-features/deps/cpu_features/build/Makefile] Error 127\nmake: Leaving directory '/Get5API/node_modules/cpu-features/build'\ngyp ERR! build error \ngyp ERR! stack Error: `make` failed with exit code: 2\ngyp ERR! stack     at ChildProcess.onExit (/usr/local/lib/node_modules/npm/node_modules/node-gyp/lib/build.js:201:23)\ngyp ERR! stack     at ChildProcess.emit (node:events:513:28)\ngyp ERR! stack     at Process.ChildProcess._handle.onexit (node:internal/child_process:293:12)\ngyp ERR! System Linux 5.4.0-113-generic\ngyp ERR! command \\\"/usr/local/bin/node\\\" \\\"/usr/local/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js\\\" \\\"rebuild\\\"\ngyp ERR! cwd /Get5API/node_modules/cpu-features\ngyp ERR! node -v v16.19.0\ngyp ERR! node-gyp -v v9.1.0\ngyp ERR! not ok\"\n\u001b[0minfo This module is OPTIONAL, you can safely ignore this error\n\u001b[91mwarning g5api@1.7.0.0: Unable to read \"./bin/\" directory of module \"g5api\"\n\u001b[0m\u001b[91mwarning g5api@1.7.0.0: Unable to read \"./bin/\" directory of module \"g5api\"\n\u001b[0m\u001b[91mwarning g5api@1.7.0.0: Unable to read \"./bin/\" directory of module \"g5api\"\n\u001b[0m\u001b[91mwarning g5api@1.7.0.0: Unable to read \"./bin/\" directory of module \"g5api\"\n\u001b[0mDone in 20.01s.\nRemoving intermediate container 8ae0e5591a48\n ---> c5d71ff33ce4\nStep 8/9 : COPY . .\n ---> f131b7e1297c\nStep 9/9 : CMD envsubst < /Get5API/config/production.json.template > /Get5API/config/production.json  &&     yarn migrate-create-prod &&     yarn migrate-prod-upgrade &&     yarn startprod &&     yarn pm2 logs\n ---> Running in 7d01c2b69fca\nRemoving intermediate container 7d01c2b69fca\n ---> 8155e043272e\nSuccessfully built 8155e043272e\nSuccessfully tagged g5api:latest\n","stderr":"","imageSize":607896014},"repair":{"startTime":1673027478335,"endTime":1673027478363,"violations":[{"name":"apkAddUseNoCache","position":{"start":2,"end":2,"columnStart":4,"columnEnd":38}}],"repairedDockerfile":"FROM node:16-alpine\n\nRUN apk add --no-cache gettext python3 build-base\n\nEXPOSE 3301\n# clone and move into Get5API folder\nWORKDIR /Get5API\nCOPY package*.json .\nCOPY yarn.lock .\nRUN yarn\n\nCOPY . .\n\n# set config with env variables, build, and run application\nCMD envsubst < /Get5API/config/production.json.template > /Get5API/config/production.json  && \\\n    yarn migrate-create-prod && \\\n    yarn migrate-prod-upgrade && \\\n    yarn startprod && \\\n    yarn pm2 logs\n"},"repairedBuild":{"startTime":1673027480449,"endTime":1673027587075,"error":null,"stdout":"Sending build context to Docker daemon  1.224MB\r\r\nStep 1/9 : FROM node:16-alpine\n ---> 610c0494e820\nStep 2/9 : RUN apk add --no-cache gettext python3 build-base\n ---> Running in 52f7cf58b144\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/34) Installing binutils (2.39-r2)\n(2/34) Installing libmagic (5.43-r0)\n(3/34) Installing file (5.43-r0)\n(4/34) Installing libgomp (12.2.1_git20220924-r4)\n(5/34) Installing libatomic (12.2.1_git20220924-r4)\n(6/34) Installing gmp (6.2.1-r2)\n(7/34) Installing isl25 (0.25-r0)\n(8/34) Installing mpfr4 (4.1.0-r0)\n(9/34) Installing mpc1 (1.2.1-r1)\n(10/34) Installing gcc (12.2.1_git20220924-r4)\n(11/34) Installing libstdc++-dev (12.2.1_git20220924-r4)\n(12/34) Installing musl-dev (1.2.3-r4)\n(13/34) Installing libc-dev (0.7.2-r3)\n(14/34) Installing g++ (12.2.1_git20220924-r4)\n(15/34) Installing make (4.3-r1)\n(16/34) Installing fortify-headers (1.1-r1)\n(17/34) Installing patch (2.7.6-r8)\n(18/34) Installing build-base (0.5-r3)\n(19/34) Installing libintl (0.21.1-r1)\n(20/34) Installing ncurses-terminfo-base (6.3_p20221119-r0)\n(21/34) Installing ncurses-libs (6.3_p20221119-r0)\n(22/34) Installing libunistring (1.1-r0)\n(23/34) Installing gettext-libs (0.21.1-r1)\n(24/34) Installing xz-libs (5.2.9-r0)\n(25/34) Installing libxml2 (2.10.3-r1)\n(26/34) Installing gettext (0.21.1-r1)\n(27/34) Installing libbz2 (1.0.8-r4)\n(28/34) Installing libexpat (2.5.0-r0)\n(29/34) Installing libffi (3.4.4-r0)\n(30/34) Installing gdbm (1.23-r0)\n(31/34) Installing mpdecimal (2.5.1-r1)\n(32/34) Installing readline (8.2.0-r0)\n(33/34) Installing sqlite-libs (3.40.1-r0)\n(34/34) Installing python3 (3.10.9-r1)\nExecuting busybox-1.35.0-r29.trigger\nOK: 300 MiB in 51 packages\nRemoving intermediate container 52f7cf58b144\n ---> 4c0abd0387f7\nStep 3/9 : EXPOSE 3301\n ---> Running in eb7ee8ae1d57\nRemoving intermediate container eb7ee8ae1d57\n ---> 5c9ba7c719a4\nStep 4/9 : WORKDIR /Get5API\n ---> Running in 6415338d31cb\nRemoving intermediate container 6415338d31cb\n ---> 35f4a5f354ce\nStep 5/9 : COPY package*.json .\n ---> e65c5b2d0afb\nStep 6/9 : COPY yarn.lock .\n ---> 016924b5b218\nStep 7/9 : RUN yarn\n ---> Running in 19597189bbbd\nyarn install v1.22.19\n\u001b[91mwarning package.json: Unable to read \"./bin/\" directory of module \"g5api\"\n\u001b[0m\u001b[91mwarning g5api@1.7.0.0: Unable to read \"./bin/\" directory of module \"g5api\"\n\u001b[0m\u001b[91mwarning g5api@1.7.0.0: Unable to read \"./bin/\" directory of module \"g5api\"\n\u001b[0m\u001b[91mwarning g5api@1.7.0.0: Unable to read \"./bin/\" directory of module \"g5api\"\n\u001b[0m[1/5] Validating package.json...\n\u001b[91mwarning g5api@1.7.0.0: Unable to read \"./bin/\" directory of module \"g5api\"\n\u001b[0m[2/5] Resolving packages...\n[3/5] Fetching packages...\n[4/5] Linking dependencies...\n\u001b[91mwarning \"swagger-jsdoc > swagger-parser > @apidevtools/swagger-parser@10.0.2\" has unmet peer dependency \"openapi-types@>=7\".\n\u001b[0m\u001b[91mwarning Workspaces can only be enabled in private projects.\n\u001b[0m[5/5] Building fresh packages...\n\u001b[91mwarning Error running install script for optional dependency: \"/Get5API/node_modules/cpu-features: Command failed.\nExit code: 1\nCommand: node-gyp rebuild\nArguments: \nDirectory: /Get5API/node_modules/cpu-features\nOutput:\ngyp info it worked if it ends with ok\ngyp info using node-gyp@9.1.0\ngyp info using node@16.19.0 | linux | x64\ngyp info find Python using Python version 3.10.9 found at \\\"/usr/bin/python3\\\"\ngyp http GET https://unofficial-builds.nodejs.org/download/release/v16.19.0/node-v16.19.0-headers.tar.gz\ngyp http 200 https://unofficial-builds.nodejs.org/download/release/v16.19.0/node-v16.19.0-headers.tar.gz\ngyp http GET https://unofficial-builds.nodejs.org/download/release/v16.19.0/SHASUMS256.txt\ngyp http 200 https://unofficial-builds.nodejs.org/download/release/v16.19.0/SHASUMS256.txt\ngyp info spawn /usr/bin/python3\ngyp info spawn args [\ngyp info spawn args   '/usr/local/lib/node_modules/npm/node_modules/node-gyp/gyp/gyp_main.py',\ngyp info spawn args   'binding.gyp',\ngyp info spawn args   '-f',\ngyp info spawn args   'make',\ngyp info spawn args   '-I',\ngyp info spawn args   '/Get5API/node_modules/cpu-features/build/config.gypi',\ngyp info spawn args   '-I',\ngyp info spawn args   '/usr/local/lib/node_modules/npm/node_modules/node-gyp/addon.gypi',\ngyp info spawn args   '-I',\ngyp info spawn args   '/root/.cache/node-gyp/16.19.0/include/node/common.gypi',\ngyp info spawn args   '-Dlibrary=shared_library',\ngyp info spawn args   '-Dvisibility=default',\ngyp info spawn args   '-Dnode_root_dir=/root/.cache/node-gyp/16.19.0',\ngyp info spawn args   '-Dnode_gyp_dir=/usr/local/lib/node_modules/npm/node_modules/node-gyp',\ngyp info spawn args   '-Dnode_lib_file=/root/.cache/node-gyp/16.19.0/<(target_arch)/node.lib',\ngyp info spawn args   '-Dmodule_root_dir=/Get5API/node_modules/cpu-features',\ngyp info spawn args   '-Dnode_engine=v8',\ngyp info spawn args   '--depth=.',\ngyp info spawn args   '--no-parallel',\ngyp info spawn args   '--generator-output',\ngyp info spawn args   'build',\ngyp info spawn args   '-Goutput_dir=.'\ngyp info spawn args ]\ngyp info spawn make\ngyp info spawn args [ 'BUILDTYPE=Release', '-C', 'build' ]\nmake: Entering directory '/Get5API/node_modules/cpu-features/build'\n  ACTION Configuring dependencies /Get5API/node_modules/cpu-features/deps/cpu_features/build/Makefile\n/bin/sh: cmake: not found\nmake: *** [config_deps.target.mk:13: /Get5API/node_modules/cpu-features/deps/cpu_features/build/Makefile] Error 127\nmake: Leaving directory '/Get5API/node_modules/cpu-features/build'\ngyp ERR! build error \ngyp ERR! stack Error: `make` failed with exit code: 2\ngyp ERR! stack     at ChildProcess.onExit (/usr/local/lib/node_modules/npm/node_modules/node-gyp/lib/build.js:201:23)\ngyp ERR! stack     at ChildProcess.emit (node:events:513:28)\ngyp ERR! stack     at Process.ChildProcess._handle.onexit (node:internal/child_process:293:12)\ngyp ERR! System Linux 5.4.0-113-generic\ngyp ERR! command \\\"/usr/local/bin/node\\\" \\\"/usr/local/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js\\\" \\\"rebuild\\\"\ngyp ERR! cwd /Get5API/node_modules/cpu-features\ngyp ERR! node -v v16.19.0\ngyp ERR! node-gyp -v v9.1.0\ngyp ERR! not ok\"\n\u001b[0minfo This module is OPTIONAL, you can safely ignore this error\n\u001b[91mwarning g5api@1.7.0.0: Unable to read \"./bin/\" directory of module \"g5api\"\n\u001b[0m\u001b[91mwarning g5api@1.7.0.0: Unable to read \"./bin/\" directory of module \"g5api\"\n\u001b[0m\u001b[91mwarning g5api@1.7.0.0: Unable to read \"./bin/\" directory of module \"g5api\"\n\u001b[0m\u001b[91mwarning g5api@1.7.0.0: Unable to read \"./bin/\" directory of module \"g5api\"\n\u001b[0mDone in 16.96s.\nRemoving intermediate container 19597189bbbd\n ---> 3dccc0a126d7\nStep 8/9 : COPY . .\n ---> 675ce5f34dc4\nStep 9/9 : CMD envsubst < /Get5API/config/production.json.template > /Get5API/config/production.json  &&     yarn migrate-create-prod &&     yarn migrate-prod-upgrade &&     yarn startprod &&     yarn pm2 logs\n ---> Running in 4ee0cd99cc90\nRemoving intermediate container 4ee0cd99cc90\n ---> eadd6252c5a5\nSuccessfully built eadd6252c5a5\nSuccessfully tagged g5api:latest\n","stderr":"","imageSize":605312730}}