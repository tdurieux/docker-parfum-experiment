{"repository":"https://github.com/discord-docs/ddocs","dockerfilePath":"Dockerfile","startTime":1672099749581,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/discord-docs/ddocs'...\n","error":null,"commit":"ce3a883e3b21e3d2d5da9de2a76e47b677b4034d"},"originalBuild":{"startTimestamp":1672099750481,"endTimestamp":1672100011146,"error":{"code":1,"killed":false,"signal":null,"cmd":"docker build --no-cache --force-rm -t ddocs:latest -f /tmp/dinghy-analysis/discord-docs/ddocs/Dockerfile ."},"stdout":"Sending build context to Docker daemon  1.294MB\r\r\nStep 1/25 : FROM node:17-alpine AS deps\n17-alpine: Pulling from library/node\ndf9b9388f04a: Already exists\n1bedfac31d6a: Pulling fs layer\n6463b5f3dbb1: Pulling fs layer\n885e68a88c76: Pulling fs layer\n885e68a88c76: Verifying Checksum\n885e68a88c76: Download complete\n6463b5f3dbb1: Verifying Checksum\n6463b5f3dbb1: Download complete\n1bedfac31d6a: Verifying Checksum\n1bedfac31d6a: Download complete\n1bedfac31d6a: Pull complete\n6463b5f3dbb1: Pull complete\n885e68a88c76: Pull complete\nDigest: sha256:76e638eb0d73ac5f0b76d70df3ce1ddad941ac63595d44092b625e2cd557ddbf\nStatus: Downloaded newer image for node:17-alpine\n ---> 57488723f087\nStep 2/25 : RUN apk add --no-cache libc6-compat\n ---> Running in 981ac265cfa6\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/community/x86_64/APKINDEX.tar.gz\n(1/1) Installing libc6-compat (1.2.2-r7)\nOK: 7 MiB in 17 packages\nRemoving intermediate container 981ac265cfa6\n ---> 2d381b1299da\nStep 3/25 : RUN npm install -g pnpm\n ---> Running in cd07698a430f\n\u001b[91mnpm\u001b[0m\u001b[91m WARN config global `--global`, `--local` are deprecated. Use `--location=global` instead.\n\u001b[0m\nadded 1 package, and audited 2 packages in 807ms\n\n1 package is looking for funding\n  run `npm fund` for details\n\nfound 0 vulnerabilities\n\u001b[91mnpm notice\u001b[0m\u001b[91m \nnpm \u001b[0m\u001b[91mnotice New major version of npm available! 8.11.0 -> 9.2.0\nnpm notice Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm notice\u001b[0m\u001b[91m Run `npm install -g npm@9.2.0` to update!\nnpm notice\u001b[0m\u001b[91m \n\u001b[0mRemoving intermediate container cd07698a430f\n ---> ca8ba28a1608\nStep 4/25 : WORKDIR /app\n ---> Running in 22571a2af2d1\nRemoving intermediate container 22571a2af2d1\n ---> ad78a66ed56a\nStep 5/25 : COPY package.json pnpm-lock.yaml ./\n ---> 18110a0e1aeb\nStep 6/25 : RUN pnpm install\n ---> Running in 22edc7db62f3\nProgress: resolved 1, reused 0, downloaded 0, added 0\nProgress: resolved 21, reused 0, downloaded 20, added 0\nProgress: resolved 24, reused 0, downloaded 24, added 0\nProgress: resolved 75, reused 0, downloaded 60, added 0\nProgress: resolved 146, reused 0, downloaded 131, added 0\nProgress: resolved 168, reused 0, downloaded 146, added 0\nProgress: resolved 333, reused 0, downloaded 314, added 0\nProgress: resolved 454, reused 0, downloaded 440, added 0\nProgress: resolved 560, reused 0, downloaded 537, added 0\nProgress: resolved 623, reused 0, downloaded 611, added 0\nPackages: +614\n++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++\nPackages are hard linked from the content-addressable store to the virtual store.\n  Content-addressable store is at: /root/.local/share/pnpm/store/v3\n  Virtual store is at:             node_modules/.pnpm\nProgress: resolved 624, reused 0, downloaded 612, added 413\nProgress: resolved 624, reused 0, downloaded 613, added 612\nProgress: resolved 624, reused 0, downloaded 613, added 613\nProgress: resolved 624, reused 0, downloaded 614, added 613\n.../node_modules/core-js-pure postinstall$ node -e \"try{require('./postinstall')}catch(e){}\"\n.../sharp@0.30.3/node_modules/sharp install$ (node install/libvips && node install/dll-copy && prebuild-install) || (node install/can-compile && node-gyp rebuild && node install/dll-copy)\nProgress: resolved 624, reused 0, downloaded 614, added 614, done\n.../node_modules/core-js-pure postinstall: Thank you for using core-js ( https://github.com/zloirock/core-js ) for polyfilling JavaScript standard library!\n.../node_modules/core-js-pure postinstall: The project needs your help! Please consider supporting of core-js:\n.../node_modules/core-js-pure postinstall: > https://opencollective.com/core-js \n.../node_modules/core-js-pure postinstall: > https://patreon.com/zloirock \n.../node_modules/core-js-pure postinstall: > https://paypal.me/zloirock \n.../node_modules/core-js-pure postinstall: > bitcoin: bc1qlea7544qtsmj2rayg0lthvza9fau63ux0fstcz \n.../node_modules/core-js-pure postinstall: Also, the author of core-js ( https://github.com/zloirock ) is looking for a good job -)\n.../node_modules/core-js-pure postinstall: Done\n.../sharp@0.30.3/node_modules/sharp install: sharp: Downloading https://github.com/lovell/sharp-libvips/releases/download/v8.12.2/libvips-8.12.2-linuxmusl-x64.tar.br\n.../sharp@0.30.3/node_modules/sharp install: sharp: Integrity check passed for linuxmusl-x64\n.../sharp@0.30.3/node_modules/sharp install: Done\n\ndependencies:\n+ @stitches/react 1.2.7\n+ @types/jsonwebtoken 8.5.8\n+ @types/react-syntax-highlighter 13.5.2\n+ axios 0.26.1\n+ jsonwebtoken 8.5.1\n+ luxon 2.3.1\n+ next 12.1.2\n+ next-themes 0.0.15\n+ nextjs-progressbar 0.0.14\n+ react 17.0.2\n+ react-dom 17.0.2\n+ react-draggable 4.4.4\n+ react-markdown 8.0.1\n+ react-progressive-graceful-image 0.6.14\n+ react-syntax-highlighter 15.5.0\n+ react-tooltip 4.2.21\n+ remark-gfm 3.0.1\n+ sharp 0.30.3\n\ndevDependencies:\n+ @svgr/webpack 6.2.1\n+ @types/luxon 2.3.1\n+ @types/node 17.0.16\n+ @types/react 17.0.43\n+ eslint 8.11.0\n+ eslint-config-next 12.1.2\n+ prettier 2.6.1\n+ typescript 4.6.3\n\n WARN  Issues with peer dependencies found\n.\n└─┬ react-progressive-graceful-image 0.6.14\n  └─┬ @researchgate/react-intersection-observer 1.3.5\n    ├── ✕ unmet peer react@^16.3.2: found 17.0.2\n    └── ✕ unmet peer react-dom@^16.3.2: found 17.0.2\n\nDone in 24.3s\nRemoving intermediate container 22edc7db62f3\n ---> 3c0fa58e41b0\nStep 7/25 : FROM node:17-alpine AS builder\n ---> 57488723f087\nStep 8/25 : WORKDIR /app\n ---> Running in be66e31c3d65\nRemoving intermediate container be66e31c3d65\n ---> 43b28b7019c8\nStep 9/25 : COPY --from=deps /app/node_modules ./node_modules\n ---> 2719d27510b9\nStep 10/25 : COPY . .\n ---> 297a9ddf8ae5\nStep 11/25 : RUN npm run build:ci\n ---> Running in f051953063be\n\n> build:ci\n> CI=true npm run build\n\n\n> build\n> next build\n\n\u001b[91mwarn  - You have enabled experimental feature(s).\n\u001b[0m\u001b[91mwarn  - Experimental features are not covered by semver, and may cause unexpected or broken application behavior. Use them at your own risk.\n\n\u001b[0m\u001b[91mwarn  - SWC minify release candidate enabled. https://nextjs.org/docs/messages/swc-minify-enabled\n\u001b[0mwarn  - No build cache found. Please configure build caching for faster rebuilds. Read more: https://nextjs.org/docs/messages/no-cache\nAttention: Next.js now collects completely anonymous telemetry regarding usage.\nThis information is used to shape Next.js' roadmap and prioritize features.\nYou can learn more, including how to opt-out if you'd not like to participate in this anonymous program, by visiting the following URL:\nhttps://nextjs.org/telemetry\n\n\u001b[91mBrowserslist: caniuse-lite is outdated. Please run:\n  npx browserslist@latest --update-db\n  Why you should do it regularly: https://github.com/browserslist/browserslist#browsers-data-updating\n\u001b[0minfo  - Checking validity of types...\n\n./pages/login.tsx\n47:6  Warning: React Hook useEffect has missing dependencies: 'code', 'login', and 'router'. Either include them or remove the dependency array.  react-hooks/exhaustive-deps\n63:11  Warning: Do not use <img>. Use Image from 'next/image' instead. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element\n63:11  Warning: img elements must have an alt prop, either with meaningful text, or an empty string for decorative images.  jsx-a11y/alt-text\n\n./pages/logout.tsx\n25:6  Warning: React Hook useEffect has missing dependencies: 'auth' and 'logout'. Either include them or remove the dependency array.  react-hooks/exhaustive-deps\n\n./pages/summaries.tsx\n129:6  Warning: React Hook useEffect has a missing dependency: 'getEvents'. Either include it or remove the dependency array.  react-hooks/exhaustive-deps\n134:9  Warning: passHref is missing. See: https://nextjs.org/docs/messages/link-passhref  @next/next/link-passhref\n\n./components/layout/account/AccountButton.tsx\n156:11  Warning: passHref is missing. See: https://nextjs.org/docs/messages/link-passhref  @next/next/link-passhref\n201:13  Warning: passHref is missing. See: https://nextjs.org/docs/messages/link-passhref  @next/next/link-passhref\n\n./components/layout/account/AccountHeader.tsx\n28:6  Warning: React Hook useEffect has a missing dependency: 'auth'. Either include it or remove the dependency array.  react-hooks/exhaustive-deps\n\n./components/layout/account/LoginButton.tsx\n43:5  Warning: passHref is missing. See: https://nextjs.org/docs/messages/link-passhref  @next/next/link-passhref\n\n./components/page/events/EventSidebar.tsx\n96:15  Warning: passHref is missing. See: https://nextjs.org/docs/messages/link-passhref  @next/next/link-passhref\n\n./components/page/events/SidebarEventCard.tsx\n30:7  Warning: Image elements must have an alt prop, either with meaningful text, or an empty string for decorative images.  jsx-a11y/alt-text\n\n./components/page/events/Summary.tsx\n64:6  Warning: React Hook useEffect has missing dependencies: 'init', 'open', and 'shrink'. Either include them or remove the dependency array.  react-hooks/exhaustive-deps\n74:6  Warning: React Hook useEffect has missing dependencies: 'headerHeight' and 'init'. Either include them or remove the dependency array. You can also replace multiple useState variables with useReducer if 'setBodyHeight' needs the current value of 'headerHeight'.  react-hooks/exhaustive-deps\n\n./components/typography/Link.tsx\n78:5  Warning: passHref is missing. See: https://nextjs.org/docs/messages/link-passhref  @next/next/link-passhref\n\n./components/typography/Markdown.tsx\n150:18  Warning: Image elements must have an alt prop, either with meaningful text, or an empty string for decorative images.  jsx-a11y/alt-text\n\n./components/util/GracefulImage.tsx\n33:13  Warning: Do not use <img>. Use Image from 'next/image' instead. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element\n50:9  Warning: Do not use <img>. Use Image from 'next/image' instead. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element\n\n./components/util/Icon.tsx\n15:6  Warning: React Hook useEffect has a missing dependency: 'props'. Either include it or remove the dependency array. If 'setComponent' needs the current value of 'props', you can also switch to useReducer instead of useState and read 'props' in the reducer.  react-hooks/exhaustive-deps\n\n./components/util/form/Searchbar.tsx\n66:6  Warning: React Hook useEffect has a missing dependency: 'onChange'. Either include it or remove the dependency array. If 'onChange' changes too often, find the parent component that defines it and wrap that definition in useCallback.  react-hooks/exhaustive-deps\n\ninfo  - Need to disable some ESLint rules? Learn more here: https://nextjs.org/docs/basic-features/eslint#disabling-rules\ninfo  - Creating an optimized production build...\n\u001b[91mwarn  - using beta Middleware (not covered by semver) - https://nextjs.org/docs/messages/beta-middleware\n\u001b[0m\u001b[91mBrowserslist: caniuse-lite is outdated. Please run:\n  npx browserslist@latest --update-db\n  Why you should do it regularly: https://github.com/browserslist/browserslist#browsers-data-updating\n\u001b[0m\u001b[91mFailed to compile.\n\n./pages/summaries.tsx\nError: error: the name `Summary` is defined multiple times\n  \n   |\n12 | import Summary from \"../lib/api-models/summary\";\n   |        ------- previous definition of `Summary` here\n...\n67 | const Summary = styled(Card, {\n   |       ^^^^^^^ `Summary` redefined here\n\n\u001b[0m\u001b[91m\n\u001b[0m\u001b[91m> Build failed because of webpack errors\n\u001b[0m\u001b[91mnpm\u001b[0m\u001b[91m \u001b[0m\u001b[91mnotice\u001b[0m\u001b[91m \n\u001b[0m\u001b[91mnpm \u001b[0m\u001b[91mnotice\u001b[0m\u001b[91m New major version of npm available! 8.11.0 -> 9.2.0\n\u001b[0m\u001b[91mnpm\u001b[0m\u001b[91m \u001b[0m\u001b[91mnotice\u001b[0m\u001b[91m Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm\u001b[0m\u001b[91m \u001b[0m\u001b[91mnotice\u001b[0m\u001b[91m Run `npm install -g npm@9.2.0` to update!\n\u001b[0m\u001b[91mnpm\u001b[0m\u001b[91m \u001b[0m\u001b[91mnotice \n\u001b[0mRemoving intermediate container f051953063be\n","stderr":"The command '/bin/sh -c npm run build:ci' returned a non-zero code: 1\n"},"endTime":1672100011213}