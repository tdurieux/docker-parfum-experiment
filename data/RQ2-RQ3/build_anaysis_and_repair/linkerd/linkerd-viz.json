{"repository":"https://github.com/linkerd/linkerd-viz","dockerfilePath":"Dockerfile","startTime":1672334777771,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/linkerd/linkerd-viz'...\n","error":null,"commit":"eae7c5f4b305ceb24c40217e032cc89af06e52a3"},"originalBuild":{"startTimestamp":1672334778686,"endTimestamp":1672334841248,"error":null,"stdout":"Sending build context to Docker daemon    215kB\r\r\nStep 1/14 : FROM grafana/grafana:5.2.2\n5.2.2: Pulling from grafana/grafana\nbe8881be8156: Pulling fs layer\n728ffd1b8130: Pulling fs layer\n426111690cea: Pulling fs layer\n426111690cea: Waiting\nbe8881be8156: Waiting\n728ffd1b8130: Waiting\nbe8881be8156: Verifying Checksum\nbe8881be8156: Download complete\n426111690cea: Verifying Checksum\n426111690cea: Download complete\n728ffd1b8130: Verifying Checksum\n728ffd1b8130: Download complete\nbe8881be8156: Pull complete\n728ffd1b8130: Pull complete\n426111690cea: Pull complete\nDigest: sha256:b5591419cfa3a930cecdddff0a338c03296d29b617d9f340dc72ee839dd1c5be\nStatus: Downloaded newer image for grafana/grafana:5.2.2\n ---> 3e16e05be9a3\nStep 2/14 : LABEL maintainer=\"linkerd-users@googlegroups.com\"\n ---> Running in 0acefadee6c2\nRemoving intermediate container 0acefadee6c2\n ---> 0715f0d80bba\nStep 3/14 : USER root\n ---> Running in d50b2cf59c0f\nRemoving intermediate container d50b2cf59c0f\n ---> 801c195dcea8\nStep 4/14 : EXPOSE 3000 9191\n ---> Running in 81a836c80ec4\nRemoving intermediate container 81a836c80ec4\n ---> 8c9d85d8166a\nStep 5/14 : ARG prometheus_version=2.3.2\n ---> Running in b372f380b293\nRemoving intermediate container b372f380b293\n ---> 7e2c96fb516e\nStep 6/14 : ARG prometheus_archive_name=prometheus-$prometheus_version.linux-amd64\n ---> Running in 7c45d3133566\nRemoving intermediate container 7c45d3133566\n ---> 1de7f7394bb3\nStep 7/14 : RUN mkdir -p /etc/prometheus\n ---> Running in bc3ea5cda44c\nRemoving intermediate container bc3ea5cda44c\n ---> 0438b2042982\nStep 8/14 : RUN curl -L -o $prometheus_archive_name.tar.gz https://github.com/prometheus/prometheus/releases/download/v$prometheus_version/$prometheus_archive_name.tar.gz &&     tar -xf /$prometheus_archive_name.tar.gz                                                               &&     cp      /$prometheus_archive_name/prometheus        /bin/                                              &&     cp      /$prometheus_archive_name/promtool          /bin/                                              &&     cp -a   /$prometheus_archive_name/console_libraries /etc/prometheus/                                   &&     cp -a   /$prometheus_archive_name/consoles          /etc/prometheus/                                   &&     rm -rf  /$prometheus_archive_name*\n ---> Running in 3896e890651c\n\u001b[91m  % Total    % Received %\u001b[0m\u001b[91m Xferd  Average Speed   Time    Ti\u001b[0m\u001b[91mme     \u001b[0m\u001b[91mTime \u001b[0m\u001b[91m Cur\u001b[0m\u001b[91mrent\n    \u001b[0m\u001b[91m      \u001b[0m\u001b[91m      \u001b[0m\u001b[91m  \u001b[0m\u001b[91m         \u001b[0m\u001b[91m   \u001b[0m\u001b[91m   Dload\u001b[0m\u001b[91m  \u001b[0m\u001b[91mUpload  \u001b[0m\u001b[91m Total\u001b[0m\u001b[91m   Spen\u001b[0m\u001b[91mt    Left  Speed\n\u001b[0m\u001b[91m\r  0     0    0 \u001b[0m\u001b[91m    0 \u001b[0m\u001b[91m  \u001b[0m\u001b[91m 0     \u001b[0m\u001b[91m0      \u001b[0m\u001b[91m0      0 --:\u001b[0m\u001b[91m--:-- -\u001b[0m\u001b[91m-:--\u001b[0m\u001b[91m:-- --\u001b[0m\u001b[91m:--\u001b[0m\u001b[91m:--   \u001b[0m\u001b[91m  0\u001b[0m\u001b[91m\r  0     0    0     0    0    \u001b[0m\u001b[91m 0      0      0 --:-\u001b[0m\u001b[91m-:-\u001b[0m\u001b[91m- --:-\u001b[0m\u001b[91m-:\u001b[0m\u001b[91m-- --:\u001b[0m\u001b[91m--\u001b[0m\u001b[91m:\u001b[0m\u001b[91m--\u001b[0m\u001b[91m     0\n\u001b[0m\u001b[91m\r 31 26.1M   31 8336k    0\u001b[0m\u001b[91m     0  916\u001b[0m\u001b[91m8k      \u001b[0m\u001b[91m0  0:0\u001b[0m\u001b[91m0:02 --\u001b[0m\u001b[91m:--:--  0:00:\u001b[0m\u001b[91m02 9\u001b[0m\u001b[91m168k\u001b[0m\u001b[91m\r100 26.1M  100 26.1M    0     0  18.7M      0  0:00:01  0\u001b[0m\u001b[91m:00:01 --:--:-- 36.8M\n\u001b[0mRemoving intermediate container 3896e890651c\n ---> 05dad5075e3d\nStep 9/14 : COPY linkerd-viz                                   /linkerd-viz\n ---> 2f970f99ca28\nStep 10/14 : COPY */prometheus-*.yml                            /etc/prometheus/\n ---> fa3b68eab53f\nStep 11/14 : COPY grafana/dashboards.yaml                       $GF_PATHS_PROVISIONING/dashboards/\n ---> f65120357f8d\nStep 12/14 : COPY grafana/dashboards/*                          $GF_PATHS_PROVISIONING/dashboards/\n ---> 098ae7421655\nStep 13/14 : COPY grafana/dashboards/linkerd-viz-dashboard.json $GF_PATHS_HOME/public/dashboards/home.json\n ---> 4e3daabbf863\nStep 14/14 : ENTRYPOINT [ \"/linkerd-viz\" ]\n ---> Running in cb44e0246979\nRemoving intermediate container cb44e0246979\n ---> 5f96be70e829\nSuccessfully built 5f96be70e829\nSuccessfully tagged linkerd-viz:latest\n","stderr":"","imageSize":361537285},"repair":{"violations":[{"name":"curlUseFlagF","position":{"start":14,"end":14,"columnStart":4,"columnEnd":158}},{"name":"tarSomethingRmTheSomething","position":{"start":15,"end":15,"columnStart":4,"columnEnd":44}}],"repairedDockerfile":"FROM grafana/grafana:5.2.2\nLABEL maintainer=\"linkerd-users@googlegroups.com\"\n\n# mimic behavior from grafana/grafana:4.6.2, to allow for copying files onto this image's local filesystem\nUSER root\n\nEXPOSE 3000 9191\n\nARG prometheus_version=2.3.2\nARG prometheus_archive_name=prometheus-$prometheus_version.linux-amd64\n\nRUN mkdir -p /etc/prometheus\n\n# prometheus setup\nRUN curl -f -L -o $prometheus_archive_name.tar.gz https://github.com/prometheus/prometheus/releases/download/v$prometheus_version/$prometheus_archive_name.tar.gz && \\\n    tar -xf /$prometheus_archive_name.tar.gz && \\\n    cp      /$prometheus_archive_name/prometheus        /bin/ && \\\n    cp      /$prometheus_archive_name/promtool          /bin/ && \\\n    cp -a   /$prometheus_archive_name/console_libraries /etc/prometheus/ && \\\n    cp -a   /$prometheus_archive_name/consoles          /etc/prometheus/ && \\\n    rm -rf  /$prometheus_archive_name*\n\n# linkerd-viz setup\nCOPY linkerd-viz                                   /linkerd-viz\nCOPY */prometheus-*.yml                            /etc/prometheus/\nCOPY grafana/dashboards.yaml                       $GF_PATHS_PROVISIONING/dashboards/\nCOPY grafana/dashboards/*                          $GF_PATHS_PROVISIONING/dashboards/\nCOPY grafana/dashboards/linkerd-viz-dashboard.json $GF_PATHS_HOME/public/dashboards/home.json\n\nENTRYPOINT [ \"/linkerd-viz\" ]\n"},"repairedBuild":{"startTimestamp":1672334841606,"endTimestamp":1672334861937,"error":null,"stdout":"Sending build context to Docker daemon  214.5kB\r\r\nStep 1/14 : FROM grafana/grafana:5.2.2\n ---> 3e16e05be9a3\nStep 2/14 : LABEL maintainer=\"linkerd-users@googlegroups.com\"\n ---> Running in 4e8328708f8c\nRemoving intermediate container 4e8328708f8c\n ---> f7fc9cbc616f\nStep 3/14 : USER root\n ---> Running in e18e41431889\nRemoving intermediate container e18e41431889\n ---> 1aa4c52ff3ad\nStep 4/14 : EXPOSE 3000 9191\n ---> Running in c3bd96f8fdb6\nRemoving intermediate container c3bd96f8fdb6\n ---> a19195a51e00\nStep 5/14 : ARG prometheus_version=2.3.2\n ---> Running in 4115e4647362\nRemoving intermediate container 4115e4647362\n ---> d6ec0320d8ce\nStep 6/14 : ARG prometheus_archive_name=prometheus-$prometheus_version.linux-amd64\n ---> Running in a53177c6d8ca\nRemoving intermediate container a53177c6d8ca\n ---> bb506f5e4865\nStep 7/14 : RUN mkdir -p /etc/prometheus\n ---> Running in f4974b7e3ee3\nRemoving intermediate container f4974b7e3ee3\n ---> 549d6ccc42c7\nStep 8/14 : RUN curl -f -L -o $prometheus_archive_name.tar.gz https://github.com/prometheus/prometheus/releases/download/v$prometheus_version/$prometheus_archive_name.tar.gz &&     tar -xf /$prometheus_archive_name.tar.gz &&     cp      /$prometheus_archive_name/prometheus        /bin/ &&     cp      /$prometheus_archive_name/promtool          /bin/ &&     cp -a   /$prometheus_archive_name/console_libraries /etc/prometheus/ &&     cp -a   /$prometheus_archive_name/consoles          /etc/prometheus/ &&     rm -rf  /$prometheus_archive_name*\n ---> Running in 5c294f840b78\n\u001b[91m  % Total    % Received % Xferd  Averag\u001b[0m\u001b[91me Speed  \u001b[0m\u001b[91m Time    \u001b[0m\u001b[91mTime     \u001b[0m\u001b[91mTime  Current\n  \u001b[0m\u001b[91m                    \u001b[0m\u001b[91m          \u001b[0m\u001b[91m Dloa\u001b[0m\u001b[91md  Uplo\u001b[0m\u001b[91mad   Total   Spent    Le\u001b[0m\u001b[91mft\u001b[0m\u001b[91m  Speed\n\r  0     0    0\u001b[0m\u001b[91m     0    \u001b[0m\u001b[91m0     0      0   \u001b[0m\u001b[91m   0 --:-\u001b[0m\u001b[91m-:\u001b[0m\u001b[91m-- --\u001b[0m\u001b[91m:--:-- -\u001b[0m\u001b[91m-:--:--\u001b[0m\u001b[91m     \u001b[0m\u001b[91m0\u001b[0m\u001b[91m\r  0     0    0     0    0     0      0      0 --:--:-- --:--\u001b[0m\u001b[91m:-- --:--:--     0\u001b[0m\u001b[91m\r  0     0    0  \u001b[0m\u001b[91m   0    0     0    \u001b[0m\u001b[91m  0  \u001b[0m\u001b[91m    0 --\u001b[0m\u001b[91m:--:-- -\u001b[0m\u001b[91m-:--:--\u001b[0m\u001b[91m --:--:--     0\n\u001b[0m\u001b[91m\r100 26.1M  100 26.1M    0    \u001b[0m\u001b[91m 0  28.1M  \u001b[0m\u001b[91m    0 --:--:--\u001b[0m\u001b[91m --:--:-- -\u001b[0m\u001b[91m-:--:\u001b[0m\u001b[91m--\u001b[0m\u001b[91m 28.1\u001b[0m\u001b[91mM\n\u001b[0mRemoving intermediate container 5c294f840b78\n ---> 49f08b39c9a4\nStep 9/14 : COPY linkerd-viz                                   /linkerd-viz\n ---> 6cbac02277f9\nStep 10/14 : COPY */prometheus-*.yml                            /etc/prometheus/\n ---> 145d3e601200\nStep 11/14 : COPY grafana/dashboards.yaml                       $GF_PATHS_PROVISIONING/dashboards/\n ---> 2177427b0620\nStep 12/14 : COPY grafana/dashboards/*                          $GF_PATHS_PROVISIONING/dashboards/\n ---> eec5aedc7fe3\nStep 13/14 : COPY grafana/dashboards/linkerd-viz-dashboard.json $GF_PATHS_HOME/public/dashboards/home.json\n ---> 58ec8d8964df\nStep 14/14 : ENTRYPOINT [ \"/linkerd-viz\" ]\n ---> Running in 5e082f113c40\nRemoving intermediate container 5e082f113c40\n ---> 32c96c029862\nSuccessfully built 32c96c029862\nSuccessfully tagged linkerd-viz:latest\n","stderr":"","imageSize":361537285},"endTime":1672334862243}