{"repository":"https://github.com/namoscato/action-tinify","dockerfilePath":"Dockerfile","startTime":1672075897657,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/namoscato/action-tinify'...\n","error":null,"commit":"dffa7ebd7f5ff069c4a603960acb7c1339914c5d"},"originalBuild":{"startTimestamp":1672075898602,"endTimestamp":1672075970005,"error":null,"stdout":"Sending build context to Docker daemon  1.271MB\r\r\nStep 1/14 : FROM node:18 AS builder\n18: Pulling from library/node\n32de3c850997: Already exists\nfa1d4c8d85a4: Already exists\nc796299bbbdd: Already exists\n81283a9569ad: Already exists\n60b38700e7fb: Already exists\n9537c7a3988e: Pulling fs layer\nfd36cab452a2: Pulling fs layer\n2d0da1e46288: Pulling fs layer\n1815baed2c16: Pulling fs layer\n1815baed2c16: Waiting\n9537c7a3988e: Verifying Checksum\n9537c7a3988e: Download complete\n2d0da1e46288: Verifying Checksum\n2d0da1e46288: Download complete\n1815baed2c16: Download complete\n9537c7a3988e: Pull complete\nfd36cab452a2: Verifying Checksum\nfd36cab452a2: Download complete\nfd36cab452a2: Pull complete\n2d0da1e46288: Pull complete\n1815baed2c16: Pull complete\nDigest: sha256:e9ad817b0d42b4d177a4bef8a0aff97c352468a008c3fdb2b4a82533425480df\nStatus: Downloaded newer image for node:18\n ---> 7b2a09676e2c\nStep 2/14 : WORKDIR /usr/app\n ---> Running in b4430571dcf1\nRemoving intermediate container b4430571dcf1\n ---> c3ccdb73582e\nStep 3/14 : COPY package*.json ./\n ---> ac5e2296557c\nStep 4/14 : RUN npm ci\n ---> Running in b3d978113b57\n\u001b[91mnpm WARN deprecated sane@4.1.0: some dependency vulnerabilities fixed, support for node < 10 dropped, and newer ECMAScript syntax/features added\n\u001b[0m\u001b[91mnpm WARN deprecated urix@0.1.0: Please see https://github.com/lydell/urix#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated source-map-url@0.4.0: See https://github.com/lydell/source-map-url#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated resolve-url@0.2.1: https://github.com/lydell/resolve-url#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated w3c-hr-time@1.0.1: Use your platform's native performance.now() and performance.timeOrigin.\n\u001b[0m\u001b[91mnpm WARN deprecated request-promise-native@1.0.8: request-promise-native has been deprecated because it extends the now deprecated request package, see https://github.com/request/request/issues/3142\n\u001b[0m\u001b[91mnpm WARN deprecated left-pad@1.3.0: use String.prototype.padStart()\n\u001b[0m\u001b[91mnpm WARN deprecated source-map-resolve@0.5.2: See https://github.com/lydell/source-map-resolve#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated uuid@3.3.3: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.\n\u001b[0m\u001b[91mnpm WARN deprecated\u001b[0m\u001b[91m request@2.88.0: request has been deprecated, see https://github.com/request/request/issues/3142\n\u001b[0m\u001b[91mnpm WARN deprecated har-validator@5.1.3: this library is no longer supported\n\u001b[0m\u001b[91mnpm WARN deprecated mkdirp@0.5.1: Legacy versions of mkdirp are no longer supported. Please update to mkdirp 1.x. (Note that the API surface has changed to use Promises in 1.x.)\n\u001b[0m\u001b[91mnpm WARN deprecated debug@4.1.1: Debug versions >=3.2.0 <3.2.7 || >=4 <4.3.1 have a low-severity ReDos regression when used in a Node.js environment. It is recommended you upgrade to 3.2.7 or 4.3.1. (https://github.com/visionmedia/debug/issues/797)\n\u001b[0m\u001b[91mnpm WARN deprecated @types/nock@11.1.0: This is a stub types definition. nock provides its own type definitions, so you do not need this installed.\n\u001b[0m\u001b[91mnpm WARN deprecated w3c-hr-time@1.0.2: Use your platform's native performance.now() and performance.timeOrigin.\n\u001b[0m\u001b[91mnpm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142\n\u001b[0m\nadded 1028 packages, and audited 1029 packages in 13s\n\n75 packages are looking for funding\n  run `npm fund` for details\n\n20 vulnerabilities (15 moderate, 2 high, 3 critical)\n\nTo address issues that do not require attention, run:\n  npm audit fix\n\nTo address all issues (including breaking changes), run:\n  npm audit fix --force\n\nRun `npm audit` for details.\n\u001b[91mnpm notice \nnpm notice New major version of npm available! 8.19.2 -> 9.2.0\nnpm notice Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm notice Run `npm install -g npm@9.2.0` to update!\nnpm notice \n\u001b[0mRemoving intermediate container b3d978113b57\n ---> 53b6ea13469d\nStep 5/14 : COPY tsconfig.json .\n ---> 4cf80e0836d2\nStep 6/14 : COPY src ./src\n ---> 7d2ca8e120df\nStep 7/14 : RUN npm run build\n ---> Running in 3a13816713fb\n\n> action-tinify@0.1.0 build\n> tsc\n\nRemoving intermediate container 3a13816713fb\n ---> 8a3b0df66136\nStep 8/14 : FROM node:18\n ---> 7b2a09676e2c\nStep 9/14 : RUN apt-get update   && apt-get -y install exiftool   && rm -rf /var/lib/apt/lists/*\n ---> Running in f04dfa7615d4\nGet:1 http://deb.debian.org/debian bullseye InRelease [116 kB]\nGet:2 http://deb.debian.org/debian-security bullseye-security InRelease [48.4 kB]\nGet:3 http://deb.debian.org/debian bullseye-updates InRelease [44.1 kB]\nGet:4 http://deb.debian.org/debian bullseye/main amd64 Packages [8183 kB]\nGet:5 http://deb.debian.org/debian-security bullseye-security/main amd64 Packages [210 kB]\nGet:6 http://deb.debian.org/debian bullseye-updates/main amd64 Packages [14.6 kB]\nFetched 8616 kB in 2s (3668 kB/s)\nReading package lists...\nReading package lists...\nBuilding dependency tree...\nReading state information...\nThe following additional packages will be installed:\n  libarchive-zip-perl libmime-charset-perl libposix-strptime-perl libsombok3\n  libunicode-linebreak-perl\nSuggested packages:\n  libencode-hanextra-perl libpod2-base-perl\nThe following NEW packages will be installed:\n  libarchive-zip-perl libimage-exiftool-perl libmime-charset-perl\n  libposix-strptime-perl libsombok3 libunicode-linebreak-perl\n0 upgraded, 6 newly installed, 0 to remove and 1 not upgraded.\nNeed to get 3900 kB of archives.\nAfter this operation, 22.7 MB of additional disk space will be used.\nGet:1 http://deb.debian.org/debian bullseye/main amd64 libarchive-zip-perl all 1.68-1 [104 kB]\nGet:2 http://deb.debian.org/debian bullseye/main amd64 libimage-exiftool-perl all 12.16+dfsg-2 [3618 kB]\nGet:3 http://deb.debian.org/debian bullseye/main amd64 libmime-charset-perl all 1.012.2-1 [35.4 kB]\nGet:4 http://deb.debian.org/debian bullseye/main amd64 libposix-strptime-perl amd64 0.13-1+b7 [9304 B]\nGet:5 http://deb.debian.org/debian bullseye/main amd64 libsombok3 amd64 2.4.0-2+b1 [31.4 kB]\nGet:6 http://deb.debian.org/debian bullseye/main amd64 libunicode-linebreak-perl amd64 0.0.20190101-1+b3 [102 kB]\n\u001b[91mdebconf: delaying package configuration, since apt-utils is not installed\n\u001b[0mFetched 3900 kB in 0s (58.3 MB/s)\nSelecting previously unselected package libarchive-zip-perl.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 22790 files and directories currently installed.)\r\nPreparing to unpack .../0-libarchive-zip-perl_1.68-1_all.deb ...\r\nUnpacking libarchive-zip-perl (1.68-1) ...\r\nSelecting previously unselected package libimage-exiftool-perl.\r\nPreparing to unpack .../1-libimage-exiftool-perl_12.16+dfsg-2_all.deb ...\r\nUnpacking libimage-exiftool-perl (12.16+dfsg-2) ...\r\nSelecting previously unselected package libmime-charset-perl.\r\nPreparing to unpack .../2-libmime-charset-perl_1.012.2-1_all.deb ...\r\nUnpacking libmime-charset-perl (1.012.2-1) ...\r\nSelecting previously unselected package libposix-strptime-perl.\r\nPreparing to unpack .../3-libposix-strptime-perl_0.13-1+b7_amd64.deb ...\r\nUnpacking libposix-strptime-perl (0.13-1+b7) ...\r\nSelecting previously unselected package libsombok3:amd64.\r\nPreparing to unpack .../4-libsombok3_2.4.0-2+b1_amd64.deb ...\r\nUnpacking libsombok3:amd64 (2.4.0-2+b1) ...\r\nSelecting previously unselected package libunicode-linebreak-perl.\r\nPreparing to unpack .../5-libunicode-linebreak-perl_0.0.20190101-1+b3_amd64.deb ...\r\nUnpacking libunicode-linebreak-perl (0.0.20190101-1+b3) ...\r\nSetting up libsombok3:amd64 (2.4.0-2+b1) ...\r\nSetting up libarchive-zip-perl (1.68-1) ...\r\nSetting up libimage-exiftool-perl (12.16+dfsg-2) ...\r\nSetting up libposix-strptime-perl (0.13-1+b7) ...\r\nSetting up libmime-charset-perl (1.012.2-1) ...\r\nSetting up libunicode-linebreak-perl (0.0.20190101-1+b3) ...\r\nProcessing triggers for libc-bin (2.31-13+deb11u5) ...\r\nRemoving intermediate container f04dfa7615d4\n ---> 5675f0c0ba5d\nStep 10/14 : WORKDIR /usr/app\n ---> Running in 65b121573150\nRemoving intermediate container 65b121573150\n ---> f2c758fc5c56\nStep 11/14 : COPY package*.json ./\n ---> 2a6030d54b94\nStep 12/14 : RUN npm ci --only=production\n ---> Running in b3c6c52bf2df\n\u001b[91mnpm\u001b[0m\u001b[91m WARN config only Use `--omit=dev` to omit dev dependencies from the install.\n\u001b[0m\nadded 57 packages, and audited 58 packages in 2s\n\n1 package is looking for funding\n  run `npm fund` for details\n\nfound 0 vulnerabilities\n\u001b[91mnpm notice \nnpm notice New major version of npm available! 8.19.2 -> 9.2.0\nnpm notice Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm notice Run `npm install -g npm@9.2.0` to update!\nnpm notice \n\u001b[0mRemoving intermediate container b3c6c52bf2df\n ---> f8f77015d583\nStep 13/14 : COPY --from=builder /usr/app/lib ./lib\n ---> 26207c4aa957\nStep 14/14 : CMD [\"node\", \"/usr/app/lib/main.js\"]\n ---> Running in b1cd28729a81\nRemoving intermediate container b1cd28729a81\n ---> 4352dc79e059\nSuccessfully built 4352dc79e059\nSuccessfully tagged action-tinify:latest\n","stderr":"","imageSize":1028087727},"repair":{"violations":[{"name":"ruleAptGetInstallUseNoRec","position":{"start":10,"end":10,"columnStart":5,"columnEnd":32}}],"repairedDockerfile":"FROM node:18 AS builder\nWORKDIR /usr/app\nCOPY package*.json ./\nRUN npm ci\nCOPY tsconfig.json .\nCOPY src ./src\nRUN npm run build\n\nFROM node:18\nRUN apt-get update \\\n  && apt-get -y --no-install-recommends install exiftool \\\n  && rm -rf /var/lib/apt/lists/*\nWORKDIR /usr/app\nCOPY package*.json ./\nRUN npm ci --only=production\nCOPY --from=builder /usr/app/lib ./lib\nCMD [\"node\", \"/usr/app/lib/main.js\"]\n"},"repairedBuild":{"startTimestamp":1672075970337,"endTimestamp":1672076062300,"error":null,"stdout":"Sending build context to Docker daemon  1.271MB\r\r\nStep 1/14 : FROM node:18 AS builder\n ---> 7b2a09676e2c\nStep 2/14 : WORKDIR /usr/app\n ---> Running in 5c2568ed18c8\nRemoving intermediate container 5c2568ed18c8\n ---> fa05e1918f5e\nStep 3/14 : COPY package*.json ./\n ---> 7b204b1c5dbc\nStep 4/14 : RUN npm ci\n ---> Running in f64be93d6cfb\n\u001b[91mnpm WARN deprecated urix@0.1.0: Please see https://github.com/lydell/urix#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated w3c-hr-time@1.0.1: Use your platform's native performance.now() and performance.timeOrigin.\n\u001b[0m\u001b[91mnpm WARN deprecated source-map-url@0.4.0: See https://github.com/lydell/source-map-url#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated sane@4.1.0: some dependency vulnerabilities fixed, support for node < 10 dropped, and newer ECMAScript syntax/features added\n\u001b[0m\u001b[91mnpm WARN deprecated request-promise-native@1.0.8: request-promise-native has been deprecated because it extends the now deprecated request package, see https://github.com/request/request/issues/3142\n\u001b[0m\u001b[91mnpm WARN deprecated resolve-url@0.2.1: https://github.com/lydell/resolve-url#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated source-map-resolve@0.5.2: See https://github.com/lydell/source-map-resolve#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated uuid@3.3.3: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.\n\u001b[0m\u001b[91mnpm WARN deprecated request@2.88.0: request has been deprecated, see https://github.com/request/request/issues/3142\n\u001b[0m\u001b[91mnpm WARN deprecated left-pad@1.3.0: use String.prototype.padStart()\n\u001b[0m\u001b[91mnpm WARN deprecated har-validator@5.1.3: this library is no longer supported\n\u001b[0m\u001b[91mnpm WARN deprecated mkdirp@0.5.1: Legacy versions of mkdirp are no longer supported. Please update to mkdirp 1.x. (Note that the API surface has changed to use Promises in 1.x.)\n\u001b[0m\u001b[91mnpm WARN deprecated debug@4.1.1: Debug versions >=3.2.0 <3.2.7 || >=4 <4.3.1 have a low-severity ReDos regression when used in a Node.js environment. It is recommended you upgrade to 3.2.7 or 4.3.1. (https://github.com/visionmedia/debug/issues/797)\n\u001b[0m\u001b[91mnpm WARN deprecated @types/nock@11.1.0: This is a stub types definition. nock provides its own type definitions, so you do not need this installed.\n\u001b[0m\u001b[91mnpm WARN deprecated w3c-hr-time@1.0.2: Use your platform's native performance.now() and performance.timeOrigin.\n\u001b[0m\u001b[91mnpm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142\n\u001b[0m\nadded 1028 packages, and audited 1029 packages in 13s\n\n75 packages are looking for funding\n  run `npm fund` for details\n\n23 vulnerabilities (15 moderate, 5 high, 3 critical)\n\nTo address issues that do not require attention, run:\n  npm audit fix\n\nTo address all issues (including breaking changes), run:\n  npm audit fix --force\n\nRun `npm audit` for details.\n\u001b[91mnpm notice \nnpm notice New major version of npm available! 8.19.2 -> 9.2.0\nnpm notice Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm \u001b[0m\u001b[91mnotice Run `npm install -g npm@9.2.0` to update!\nnpm notice\u001b[0m\u001b[91m \n\u001b[0mRemoving intermediate container f64be93d6cfb\n ---> 6e240ba5ff4d\nStep 5/14 : COPY tsconfig.json .\n ---> 94bafc4f44b4\nStep 6/14 : COPY src ./src\n ---> 0f4c67207db4\nStep 7/14 : RUN npm run build\n ---> Running in ead3fcf73ec9\n\n> action-tinify@0.1.0 build\n> tsc\n\nRemoving intermediate container ead3fcf73ec9\n ---> 8d7f3dc3c0d6\nStep 8/14 : FROM node:18\n ---> 7b2a09676e2c\nStep 9/14 : RUN apt-get update   && apt-get -y --no-install-recommends install exiftool   && rm -rf /var/lib/apt/lists/*\n ---> Running in f0fe3fdb83f9\nGet:1 http://deb.debian.org/debian bullseye InRelease [116 kB]\nGet:2 http://deb.debian.org/debian-security bullseye-security InRelease [48.4 kB]\nGet:3 http://deb.debian.org/debian bullseye-updates InRelease [44.1 kB]\nGet:4 http://deb.debian.org/debian bullseye/main amd64 Packages [8183 kB]\nGet:5 http://deb.debian.org/debian-security bullseye-security/main amd64 Packages [210 kB]\nGet:6 http://deb.debian.org/debian bullseye-updates/main amd64 Packages [14.6 kB]\nFetched 8616 kB in 2s (5447 kB/s)\nReading package lists...\nReading package lists...\nBuilding dependency tree...\nReading state information...\nRecommended packages:\n  libarchive-zip-perl libposix-strptime-perl libunicode-linebreak-perl\nThe following NEW packages will be installed:\n  libimage-exiftool-perl\n0 upgraded, 1 newly installed, 0 to remove and 1 not upgraded.\nNeed to get 3618 kB of archives.\nAfter this operation, 21.8 MB of additional disk space will be used.\nGet:1 http://deb.debian.org/debian bullseye/main amd64 libimage-exiftool-perl all 12.16+dfsg-2 [3618 kB]\n\u001b[91mdebconf: delaying package configuration, since apt-utils is not installed\n\u001b[0mFetched 3618 kB in 0s (50.0 MB/s)\nSelecting previously unselected package libimage-exiftool-perl.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 22790 files and directories currently installed.)\r\nPreparing to unpack .../libimage-exiftool-perl_12.16+dfsg-2_all.deb ...\r\nUnpacking libimage-exiftool-perl (12.16+dfsg-2) ...\r\nSetting up libimage-exiftool-perl (12.16+dfsg-2) ...\r\nRemoving intermediate container f0fe3fdb83f9\n ---> 0c9c76bc52db\nStep 10/14 : WORKDIR /usr/app\n ---> Running in f04ade0772e5\nRemoving intermediate container f04ade0772e5\n ---> 882fb7244480\nStep 11/14 : COPY package*.json ./\n ---> 5741ce59d389\nStep 12/14 : RUN npm ci --only=production\n ---> Running in 2c7a5cd35775\n\u001b[91mnpm\u001b[0m\u001b[91m WARN config only Use `--omit=dev` to omit dev dependencies from the install.\n\u001b[0m\nadded 57 packages, and audited 58 packages in 2s\n\n1 package is looking for funding\n  run `npm fund` for details\n\nfound 0 vulnerabilities\n\u001b[91mnpm notice \nnpm notice New major version of npm available! 8.19.2 -> 9.2.0\nnpm notice\u001b[0m\u001b[91m Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\n\u001b[0m\u001b[91mnpm notice\u001b[0m\u001b[91m Run `npm install -g npm@9.2.0` to update!\nnpm notice\u001b[0m\u001b[91m \n\u001b[0mRemoving intermediate container 2c7a5cd35775\n ---> f8148186ef5b\nStep 13/14 : COPY --from=builder /usr/app/lib ./lib\n ---> 1534c612db5d\nStep 14/14 : CMD [\"node\", \"/usr/app/lib/main.js\"]\n ---> Running in 354f3cf3cf59\nRemoving intermediate container 354f3cf3cf59\n ---> feb089b74e18\nSuccessfully built feb089b74e18\nSuccessfully tagged action-tinify:latest\n","stderr":"","imageSize":1027250049},"endTime":1672076062846}