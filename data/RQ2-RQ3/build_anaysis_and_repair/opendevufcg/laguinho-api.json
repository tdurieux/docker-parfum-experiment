{"repository":"https://github.com/opendevufcg/laguinho-api","dockerfilePath":"Dockerfile","startTime":1672308224851,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/opendevufcg/laguinho-api'...\n","error":null,"commit":"9288d1ba748e83eefca258a0c6087445da0dac9f"},"originalBuild":{"startTimestamp":1672308225732,"endTimestamp":1672308326442,"error":null,"stdout":"Sending build context to Docker daemon  166.9kB\r\r\nStep 1/8 : FROM python:alpine\nalpine: Pulling from library/python\nc158987b0551: Already exists\n7ec3a91b66d9: Already exists\nc89fd98887b3: Pulling fs layer\n877ccf16716c: Pulling fs layer\n3cfcd1e4ebae: Pulling fs layer\n877ccf16716c: Verifying Checksum\n877ccf16716c: Download complete\n3cfcd1e4ebae: Verifying Checksum\n3cfcd1e4ebae: Download complete\nc89fd98887b3: Verifying Checksum\nc89fd98887b3: Download complete\nc89fd98887b3: Pull complete\n877ccf16716c: Pull complete\n3cfcd1e4ebae: Pull complete\nDigest: sha256:af8fef83397b3886ed93d2c81bf3b4e70d39c0789c1c6feb1ecb86ca9bc42a0a\nStatus: Downloaded newer image for python:alpine\n ---> 18ccdc39ea28\nStep 2/8 : EXPOSE 80\n ---> Running in a738e378e722\nRemoving intermediate container a738e378e722\n ---> cb4db51ef330\nStep 3/8 : ENV FLASK_RUN_HOST=\"0.0.0.0\"\n ---> Running in 880f1dc0b11c\nRemoving intermediate container 880f1dc0b11c\n ---> 5c95b06cc035\nStep 4/8 : ENV PIP_NO_CACHE_DIR=\"true\"\n ---> Running in 899dd1bd352a\nRemoving intermediate container 899dd1bd352a\n ---> 11a534687cd8\nStep 5/8 : WORKDIR /opt\n ---> Running in 7d26bac9d109\nRemoving intermediate container 7d26bac9d109\n ---> ceed792a1ed5\nStep 6/8 : COPY . /opt/\n ---> cb4043f57a0a\nStep 7/8 : RUN apk add --no-cache --virtual .build-deps gcc musl-dev  && pip install pipenv  && pipenv install waitress  && pipenv install --deploy --system  && apk del .build-deps\n ---> Running in f3993c0d1702\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/12) Installing libgcc (12.2.1_git20220924-r4)\n(2/12) Installing libstdc++ (12.2.1_git20220924-r4)\n(3/12) Installing binutils (2.39-r2)\n(4/12) Installing libgomp (12.2.1_git20220924-r4)\n(5/12) Installing libatomic (12.2.1_git20220924-r4)\n(6/12) Installing gmp (6.2.1-r2)\n(7/12) Installing isl25 (0.25-r0)\n(8/12) Installing mpfr4 (4.1.0-r0)\n(9/12) Installing mpc1 (1.2.1-r1)\n(10/12) Installing gcc (12.2.1_git20220924-r4)\n(11/12) Installing musl-dev (1.2.3-r4)\n(12/12) Installing .build-deps (20221229.100413)\nExecuting busybox-1.35.0-r29.trigger\nOK: 160 MiB in 49 packages\nCollecting pipenv\n  Downloading pipenv-2022.12.19-py3-none-any.whl (2.9 MB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 2.9/2.9 MB 69.5 MB/s eta 0:00:00\nCollecting certifi\n  Downloading certifi-2022.12.7-py3-none-any.whl (155 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 155.3/155.3 kB 249.2 MB/s eta 0:00:00\nRequirement already satisfied: setuptools>=36.2.1 in /usr/local/lib/python3.11/site-packages (from pipenv) (65.5.0)\nCollecting virtualenv-clone>=0.2.5\n  Downloading virtualenv_clone-0.5.7-py3-none-any.whl (6.6 kB)\nCollecting virtualenv\n  Downloading virtualenv-20.17.1-py3-none-any.whl (8.8 MB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 8.8/8.8 MB 111.1 MB/s eta 0:00:00\nCollecting distlib<1,>=0.3.6\n  Downloading distlib-0.3.6-py2.py3-none-any.whl (468 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 468.5/468.5 kB 163.8 MB/s eta 0:00:00\nCollecting filelock<4,>=3.4.1\n  Downloading filelock-3.9.0-py3-none-any.whl (9.7 kB)\nCollecting platformdirs<3,>=2.4\n  Downloading platformdirs-2.6.2-py3-none-any.whl (14 kB)\nInstalling collected packages: distlib, virtualenv-clone, platformdirs, filelock, certifi, virtualenv, pipenv\nSuccessfully installed certifi-2022.12.7 distlib-0.3.6 filelock-3.9.0 pipenv-2022.12.19 platformdirs-2.6.2 virtualenv-20.17.1 virtualenv-clone-0.5.7\n\u001b[91mWARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv\n\u001b[0m\u001b[91mCreating a virtualenv for this project...\nPipfile: /opt/Pipfile\n\u001b[0m\u001b[91mUsing /usr/local/bin/python3 (3.11.1) to create virtualenv...\n\u001b[0m\u001b[91mcreated virtual environment CPython3.11.1.final.0-64 in 468ms\n  creator CPython3Posix(dest=/root/.local/share/virtualenvs/opt-zvmYt2-H, clear=False, no_vcs_ignore=False, global=False)\n  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, wheel=bundle, via=copy, app_data_dir=/root/.local/share/virtualenv)\n    added seed packages: pip==22.3.1, setuptools==65.6.3, wheel==0.38.4\n  activators BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator,PythonActivator\n\n\u001b[0m\u001b[91m✔ Successfully created virtual environment!\n\u001b[0m\u001b[91mVirtualenv location: /root/.local/share/virtualenvs/opt-zvmYt2-H\n\u001b[0mInstalling waitress...\n\u001b[91mPipfile.lock (b6ae57) out of date, updating to (d4c02c)...\n\u001b[0m\u001b[91mLocking [packages] dependencies...\n\u001b[0m\u001b[91mLocking [dev-packages] dependencies...\n\u001b[0m\u001b[91mUpdated Pipfile.lock (8013c152772d749dd3a2cf921205e083da818804bc15cba15d3fe1b72dd4c02c)!\n\u001b[0mInstalling dependencies from Pipfile.lock (d4c02c)...\nTo activate this project's virtualenv, run pipenv shell.\nAlternatively, run a command inside the virtualenv with pipenv run.\nInstalling dependencies from Pipfile.lock (d4c02c)...\n\u001b[91mWARNING: Ignoring https://dl-cdn.alpinelinux.org/alpine/v3.17/main: No such file or directory\nWARNING: Ignoring https://dl-cdn.alpinelinux.org/alpine/v3.17/community: No such file or directory\n\u001b[0m(1/12) Purging .build-deps (20221229.100413)\n(2/12) Purging gcc (12.2.1_git20220924-r4)\n(3/12) Purging binutils (2.39-r2)\n(4/12) Purging libatomic (12.2.1_git20220924-r4)\n(5/12) Purging libgomp (12.2.1_git20220924-r4)\n(6/12) Purging musl-dev (1.2.3-r4)\n(7/12) Purging libstdc++ (12.2.1_git20220924-r4)\n(8/12) Purging libgcc (12.2.1_git20220924-r4)\n(9/12) Purging isl25 (0.25-r0)\n(10/12) Purging mpc1 (1.2.1-r1)\n(11/12) Purging mpfr4 (4.1.0-r0)\n(12/12) Purging gmp (6.2.1-r2)\nExecuting busybox-1.35.0-r29.trigger\nOK: 16 MiB in 37 packages\nRemoving intermediate container f3993c0d1702\n ---> 564a298ebfeb\nStep 8/8 : ENTRYPOINT [\"pipenv\", \"run\", \"waitress-serve\", \"--port=80\", \"--call\", \"laguinho:create_app\"]\n ---> Running in f263d124e2c6\nRemoving intermediate container f263d124e2c6\n ---> a4a342fa99f6\nSuccessfully built a4a342fa99f6\nSuccessfully tagged laguinho-api:latest\n","stderr":"","imageSize":147416540},"repair":{"violations":[{"name":"pipUseNoCacheDir","position":{"start":15,"end":15,"columnStart":4,"columnEnd":22}}],"repairedDockerfile":"FROM python:alpine\n\nEXPOSE 80\n# set proper ENV to run app on docker\nENV FLASK_RUN_HOST=\"0.0.0.0\"\nENV PIP_NO_CACHE_DIR=\"true\"\n\nWORKDIR /opt\n\n# copy project files to /opt\nCOPY . /opt/\n\n# installs pipenv, and gcc to compile required cython and then purge it to save space.\n# this is needed to run on a single RUN to create only one container layer.\nRUN apk add --no-cache --virtual .build-deps gcc musl-dev \\\n && pip install --no-cache-dir pipenv \\\n && pipenv install waitress \\\n && pipenv install --deploy --system \\\n && apk del .build-deps\n\nENTRYPOINT [\"pipenv\", \"run\", \"waitress-serve\", \"--port=80\", \"--call\", \"laguinho:create_app\"]\n"},"repairedBuild":{"startTimestamp":1672308326830,"endTimestamp":1672308378858,"error":null,"stdout":"Sending build context to Docker daemon  166.9kB\r\r\nStep 1/8 : FROM python:alpine\n ---> 18ccdc39ea28\nStep 2/8 : EXPOSE 80\n ---> Running in 4c99b38727b2\nRemoving intermediate container 4c99b38727b2\n ---> c777d9dcb72c\nStep 3/8 : ENV FLASK_RUN_HOST=\"0.0.0.0\"\n ---> Running in 2b6917c0046e\nRemoving intermediate container 2b6917c0046e\n ---> 1222340cc3bb\nStep 4/8 : ENV PIP_NO_CACHE_DIR=\"true\"\n ---> Running in 6b5022d929b3\nRemoving intermediate container 6b5022d929b3\n ---> d1c7782a8a75\nStep 5/8 : WORKDIR /opt\n ---> Running in 70114a331ae6\nRemoving intermediate container 70114a331ae6\n ---> 0d7faffa7f45\nStep 6/8 : COPY . /opt/\n ---> 64250d9f9eb3\nStep 7/8 : RUN apk add --no-cache --virtual .build-deps gcc musl-dev  && pip install --no-cache-dir pipenv  && pipenv install waitress  && pipenv install --deploy --system  && apk del .build-deps\n ---> Running in 7442eab6bf59\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/12) Installing libgcc (12.2.1_git20220924-r4)\n(2/12) Installing libstdc++ (12.2.1_git20220924-r4)\n(3/12) Installing binutils (2.39-r2)\n(4/12) Installing libgomp (12.2.1_git20220924-r4)\n(5/12) Installing libatomic (12.2.1_git20220924-r4)\n(6/12) Installing gmp (6.2.1-r2)\n(7/12) Installing isl25 (0.25-r0)\n(8/12) Installing mpfr4 (4.1.0-r0)\n(9/12) Installing mpc1 (1.2.1-r1)\n(10/12) Installing gcc (12.2.1_git20220924-r4)\n(11/12) Installing musl-dev (1.2.3-r4)\n(12/12) Installing .build-deps (20221229.100530)\nExecuting busybox-1.35.0-r29.trigger\nOK: 160 MiB in 49 packages\nCollecting pipenv\n  Downloading pipenv-2022.12.19-py3-none-any.whl (2.9 MB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 2.9/2.9 MB 78.9 MB/s eta 0:00:00\nCollecting certifi\n  Downloading certifi-2022.12.7-py3-none-any.whl (155 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 155.3/155.3 kB 307.4 MB/s eta 0:00:00\nRequirement already satisfied: setuptools>=36.2.1 in /usr/local/lib/python3.11/site-packages (from pipenv) (65.5.0)\nCollecting virtualenv-clone>=0.2.5\n  Downloading virtualenv_clone-0.5.7-py3-none-any.whl (6.6 kB)\nCollecting virtualenv\n  Downloading virtualenv-20.17.1-py3-none-any.whl (8.8 MB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 8.8/8.8 MB 99.2 MB/s eta 0:00:00\nCollecting distlib<1,>=0.3.6\n  Downloading distlib-0.3.6-py2.py3-none-any.whl (468 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 468.5/468.5 kB 96.5 MB/s eta 0:00:00\nCollecting filelock<4,>=3.4.1\n  Downloading filelock-3.9.0-py3-none-any.whl (9.7 kB)\nCollecting platformdirs<3,>=2.4\n  Downloading platformdirs-2.6.2-py3-none-any.whl (14 kB)\nInstalling collected packages: distlib, virtualenv-clone, platformdirs, filelock, certifi, virtualenv, pipenv\nSuccessfully installed certifi-2022.12.7 distlib-0.3.6 filelock-3.9.0 pipenv-2022.12.19 platformdirs-2.6.2 virtualenv-20.17.1 virtualenv-clone-0.5.7\n\u001b[91mWARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv\n\u001b[0m\u001b[91mCreating a virtualenv for this project...\nPipfile: /opt/Pipfile\n\u001b[0m\u001b[91mUsing /usr/local/bin/python3 (3.11.1) to create virtualenv...\n\u001b[0m\u001b[91mcreated virtual environment CPython3.11.1.final.0-64 in 636ms\n  creator CPython3Posix(dest=/root/.local/share/virtualenvs/opt-zvmYt2-H, clear=False, no_vcs_ignore=False, global=False)\n  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, wheel=bundle, via=copy, app_data_dir=/root/.local/share/virtualenv)\n    added seed packages: pip==22.3.1, setuptools==65.6.3, wheel==0.38.4\n  activators BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator,PythonActivator\n\n\u001b[0m\u001b[91m✔ Successfully created virtual environment!\n\u001b[0m\u001b[91mVirtualenv location: /root/.local/share/virtualenvs/opt-zvmYt2-H\n\u001b[0mInstalling waitress...\n\u001b[91mPipfile.lock (b6ae57) out of date, updating to (d4c02c)...\n\u001b[0m\u001b[91mLocking [packages] dependencies...\n\u001b[0m\u001b[91mLocking [dev-packages] dependencies...\n\u001b[0m\u001b[91mUpdated Pipfile.lock (8013c152772d749dd3a2cf921205e083da818804bc15cba15d3fe1b72dd4c02c)!\n\u001b[0mInstalling dependencies from Pipfile.lock (d4c02c)...\nTo activate this project's virtualenv, run pipenv shell.\nAlternatively, run a command inside the virtualenv with pipenv run.\nInstalling dependencies from Pipfile.lock (d4c02c)...\n\u001b[91mWARNING: Ignoring https://dl-cdn.alpinelinux.org/alpine/v3.17/main: No such file or directory\nWARNING: Ignoring https://dl-cdn.alpinelinux.org/alpine/v3.17/community: No such file or directory\n\u001b[0m(1/12) Purging .build-deps (20221229.100530)\n(2/12) Purging gcc (12.2.1_git20220924-r4)\n(3/12) Purging binutils (2.39-r2)\n(4/12) Purging libatomic (12.2.1_git20220924-r4)\n(5/12) Purging libgomp (12.2.1_git20220924-r4)\n(6/12) Purging musl-dev (1.2.3-r4)\n(7/12) Purging libstdc++ (12.2.1_git20220924-r4)\n(8/12) Purging libgcc (12.2.1_git20220924-r4)\n(9/12) Purging isl25 (0.25-r0)\n(10/12) Purging mpc1 (1.2.1-r1)\n(11/12) Purging mpfr4 (4.1.0-r0)\n(12/12) Purging gmp (6.2.1-r2)\nExecuting busybox-1.35.0-r29.trigger\nOK: 16 MiB in 37 packages\nRemoving intermediate container 7442eab6bf59\n ---> c40a63245425\nStep 8/8 : ENTRYPOINT [\"pipenv\", \"run\", \"waitress-serve\", \"--port=80\", \"--call\", \"laguinho:create_app\"]\n ---> Running in 3beb15825702\nRemoving intermediate container 3beb15825702\n ---> 78661214ea5d\nSuccessfully built 78661214ea5d\nSuccessfully tagged laguinho-api:latest\n","stderr":"","imageSize":147416557},"endTime":1672308379236}