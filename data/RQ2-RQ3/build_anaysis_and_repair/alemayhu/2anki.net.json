{"repository":"https://github.com/alemayhu/2anki.net","dockerfilePath":"Dockerfile","startTime":1672852664585,"endTime":1672853393828,"clone":{"startTime":1672852664586,"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/alemayhu/2anki.net'...\n","error":null,"endTime":1672852665560,"commit":"60ab36e650934fccd16d0d5d52bf26eb53265e23"},"originalBuild":{"startTime":1672852665659,"endTime":1672853007283,"error":null,"stdout":"Sending build context to Docker daemon  2.114MB\r\r\nStep 1/18 : FROM alemayhu/base-image-n2a\nlatest: Pulling from alemayhu/base-image-n2a\n6552179c3509: Pulling fs layer\nd4debff14640: Pulling fs layer\n1bdb8b461a93: Pulling fs layer\nff8b420e4fe8: Pulling fs layer\n76789d39bc4a: Pulling fs layer\neeb319d6e332: Pulling fs layer\n012681d33bad: Pulling fs layer\nf4e0aef23557: Pulling fs layer\nfc7a8e426e4c: Pulling fs layer\na4f7821398ff: Pulling fs layer\ndb0633a9b2c0: Pulling fs layer\n2f85e1129a87: Pulling fs layer\nff8b420e4fe8: Waiting\n012681d33bad: Waiting\nf4e0aef23557: Waiting\ndb0633a9b2c0: Waiting\neeb319d6e332: Waiting\n76789d39bc4a: Waiting\na4f7821398ff: Waiting\nfc7a8e426e4c: Waiting\nd4debff14640: Verifying Checksum\nd4debff14640: Download complete\n1bdb8b461a93: Verifying Checksum\n1bdb8b461a93: Download complete\nff8b420e4fe8: Verifying Checksum\nff8b420e4fe8: Download complete\n76789d39bc4a: Verifying Checksum\n76789d39bc4a: Download complete\n012681d33bad: Verifying Checksum\n012681d33bad: Download complete\n6552179c3509: Download complete\nf4e0aef23557: Verifying Checksum\nf4e0aef23557: Download complete\nfc7a8e426e4c: Verifying Checksum\nfc7a8e426e4c: Download complete\na4f7821398ff: Verifying Checksum\na4f7821398ff: Download complete\ndb0633a9b2c0: Verifying Checksum\ndb0633a9b2c0: Download complete\n2f85e1129a87: Verifying Checksum\n2f85e1129a87: Download complete\n6552179c3509: Pull complete\neeb319d6e332: Verifying Checksum\neeb319d6e332: Download complete\nd4debff14640: Pull complete\n1bdb8b461a93: Pull complete\nff8b420e4fe8: Pull complete\n76789d39bc4a: Pull complete\neeb319d6e332: Pull complete\n012681d33bad: Pull complete\nf4e0aef23557: Pull complete\nfc7a8e426e4c: Pull complete\na4f7821398ff: Pull complete\ndb0633a9b2c0: Pull complete\n2f85e1129a87: Pull complete\nDigest: sha256:90f467e91be2151d88c83f87e48979e7cb1c6f5db23697038f9d604c9424315a\nStatus: Downloaded newer image for alemayhu/base-image-n2a:latest\n ---> d577e5294ee1\nStep 2/18 : RUN mkdir -pv /tmp/workspaces\n ---> Running in cef6f264f737\nmkdir: created directory '/tmp/workspaces'\nRemoving intermediate container cef6f264f737\n ---> 979de14dc9b2\nStep 3/18 : WORKDIR /app\n ---> Running in c8b7c7d3e0fa\nRemoving intermediate container c8b7c7d3e0fa\n ---> 07d10970a681\nStep 4/18 : COPY . /app/server\n ---> dc8c4d01f32e\nStep 5/18 : RUN node --version\n ---> Running in f76c2adab09f\nv16.13.2\nRemoving intermediate container f76c2adab09f\n ---> 956dc8899a9d\nStep 6/18 : RUN rm -rvf /app/node_modules\n ---> Running in 875ddb41147a\nRemoving intermediate container 875ddb41147a\n ---> cf834385fad4\nStep 7/18 : RUN git clone https://github.com/2anki/web /app/web\n ---> Running in a781c9fd10e3\n\u001b[91mCloning into '/app/web'...\n\u001b[0mRemoving intermediate container a781c9fd10e3\n ---> 90a7d6ea5851\nStep 8/18 : RUN git clone https://github.com/2anki/create_deck /app/create_deck\n ---> Running in 844513078e67\n\u001b[91mCloning into '/app/create_deck'...\n\u001b[0mRemoving intermediate container 844513078e67\n ---> 95937f240bae\nStep 9/18 : RUN npm --prefix /app/web install\n ---> Running in f211f3581353\n\u001b[91mnpm WARN deprecated mini-create-react-context@0.4.1: Package no longer supported. Contact Support at https://www.npmjs.com/support for more info.\n\u001b[0m\u001b[91mnpm WARN deprecated source-map-resolve@0.6.0: See https://github.com/lydell/source-map-resolve#deprecated\n\u001b[0m\nadded 1383 packages, and audited 1384 packages in 23s\n\n202 packages are looking for funding\n  run `npm fund` for details\n\n9 high severity vulnerabilities\n\nTo address issues that do not require attention, run:\n  npm audit fix\n\nTo address all issues (including breaking changes), run:\n  npm audit fix --force\n\nRun `npm audit` for details.\n\u001b[91mnpm notice\u001b[0m\u001b[91m \nnpm notice New major version of npm available! 8.1.2 -> 9.2.0\nnpm notice Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm notice Run `npm install -g npm@9.2.0` to update!\nnpm \u001b[0m\u001b[91mnotice \n\u001b[0mRemoving intermediate container f211f3581353\n ---> a395bab7a96a\nStep 10/18 : RUN npm install typescript -g\n ---> Running in a4805cd48574\n\nadded 1 package, and audited 2 packages in 1s\n\nfound 0 vulnerabilities\nRemoving intermediate container a4805cd48574\n ---> 53ea81127ad1\nStep 11/18 : RUN npm --prefix /app/server install\n ---> Running in bb7263dbc935\n\u001b[91mnpm WARN deprecated @types/dotenv@8.2.0: This is a stub types definition. dotenv provides its own type definitions, so you do not need this installed.\n\u001b[0m\n> notion2anki-server@1.0.0-alpha.41 prepare\n> cd .. && husky install .husky\n\n\u001b[91mfatal: not a git repository (or any of the parent directories): .git\n\u001b[0m\nadded 942 packages, and audited 943 packages in 14s\n\n120 packages are looking for funding\n  run `npm fund` for details\n\n2 high severity vulnerabilities\n\nTo address issues that do not require attention, run:\n  npm audit fix\n\nSome issues need review, and may require choosing\na different dependency.\n\nRun `npm audit` for details.\nRemoving intermediate container bb7263dbc935\n ---> 79669330a7f7\nStep 12/18 : RUN npm --prefix /app/server run build\n ---> Running in eda1cc0e3e59\n\n> notion2anki-server@1.0.0-alpha.41 build\n> tsc -p .\n\nRemoving intermediate container eda1cc0e3e59\n ---> 1e77b9e6c7ef\nStep 13/18 : RUN npm --prefix /app/web run build\n ---> Running in e386118102e3\n\n> web@0.1.1 build\n> react-scripts build\n\nCreating an optimized production build...\n\u001b[91mBrowserslist: caniuse-lite is outdated. Please run:\n  npx browserslist@latest --update-db\n  Why you should do it regularly: https://github.com/browserslist/browserslist#browsers-data-updating\n\u001b[0m\u001b[91mBrowserslist: caniuse-lite is outdated. Please run:\n  npx browserslist@latest --update-db\n  Why you should do it regularly: https://github.com/browserslist/browserslist#browsers-data-updating\n\u001b[0mCompiled successfully.\n\nFile sizes after gzip:\n\n  128.33 kB  build/static/js/main.bdcdeffb.js\n  29.01 kB   build/static/css/main.0aebd5ef.css\n  24.72 kB   build/static/js/763.2dde2366.chunk.js\n  6.8 kB     build/static/js/811.c4be6022.chunk.js\n  4.64 kB    build/static/js/318.e2abce0d.chunk.js\n  2.84 kB    build/static/js/571.2830416a.chunk.js\n  2.73 kB    build/static/js/564.9c8a93d5.chunk.js\n  1.45 kB    build/static/js/247.baeff78e.chunk.js\n  1.04 kB    build/static/js/7.59bdfef4.chunk.js\n\nThe project was built assuming it is hosted at /.\nYou can control this with the homepage field in your package.json.\n\nThe build folder is ready to be deployed.\nYou may serve it with a static server:\n\n  npm install -g serve\n  serve -s build\n\nFind out more about deployment here:\n\n  https://cra.link/deployment\n\nRemoving intermediate container e386118102e3\n ---> f14e11db4194\nStep 14/18 : RUN rm -rf /app/web/node_modules\n ---> Running in a14c15206303\nRemoving intermediate container a14c15206303\n ---> dc20de73db74\nStep 15/18 : ENV WEB_BUILD_DIR /app/web/build\n ---> Running in ffe3a9bc8306\nRemoving intermediate container ffe3a9bc8306\n ---> 72f17a2c735a\nStep 16/18 : ENV PORT 8080\n ---> Running in 83f65f29e9b3\nRemoving intermediate container 83f65f29e9b3\n ---> 18be6c9a5f1c\nStep 17/18 : EXPOSE 8080\n ---> Running in 0912f9fc9c68\nRemoving intermediate container 0912f9fc9c68\n ---> 181f78b18de8\nStep 18/18 : CMD [\"node\", \"/app/server/src/server.js\"]\n ---> Running in bb3979e8ce69\nRemoving intermediate container bb3979e8ce69\n ---> 91ce361d717d\nSuccessfully built 91ce361d717d\nSuccessfully tagged 2anki.net:latest\n","stderr":"","imageSize":1400786035},"repair":{"startTime":1672853007347,"endTime":1672853007492,"violations":[{"name":"npmCacheCleanAfterInstall","position":{"start":13,"end":13,"columnStart":4,"columnEnd":33}},{"name":"npmCacheCleanAfterInstall","position":{"start":15,"end":15,"columnStart":4,"columnEnd":29}},{"name":"npmCacheCleanAfterInstall","position":{"start":16,"end":16,"columnStart":4,"columnEnd":36}}],"repairedDockerfile":"FROM alemayhu/base-image-n2a\n\nRUN mkdir -pv /tmp/workspaces\n\nWORKDIR /app\n\nCOPY . /app/server\n\nRUN node --version\n\nRUN rm -rvf /app/node_modules\nRUN git clone https://github.com/2anki/web /app/web\nRUN git clone https://github.com/2anki/create_deck /app/create_deck\nRUN npm --prefix /app/web install && npm cache clean --force;\n\nRUN npm install typescript -g && npm cache clean --force;\nRUN npm --prefix /app/server install && npm cache clean --force;\n\nRUN npm --prefix /app/server run build\nRUN npm --prefix /app/web run build\n\n# Clean up\nRUN rm -rf /app/web/node_modules\n\nENV WEB_BUILD_DIR /app/web/build\nENV PORT 8080\nEXPOSE 8080\n\nCMD [\"node\", \"/app/server/src/server.js\"]\n"},"repairedBuild":{"startTime":1672853009661,"endTime":1672853388597,"error":null,"stdout":"Sending build context to Docker daemon  2.114MB\r\r\nStep 1/18 : FROM alemayhu/base-image-n2a\n ---> d577e5294ee1\nStep 2/18 : RUN mkdir -pv /tmp/workspaces\n ---> Running in 2e957b0f0c3e\nmkdir: created directory '/tmp/workspaces'\nRemoving intermediate container 2e957b0f0c3e\n ---> 0e2a1907eba1\nStep 3/18 : WORKDIR /app\n ---> Running in 64c5f9e7d0fb\nRemoving intermediate container 64c5f9e7d0fb\n ---> 000b2b99df62\nStep 4/18 : COPY . /app/server\n ---> 3871489110ce\nStep 5/18 : RUN node --version\n ---> Running in e06fb188f2cd\nv16.13.2\nRemoving intermediate container e06fb188f2cd\n ---> 3a48b04edd1f\nStep 6/18 : RUN rm -rvf /app/node_modules\n ---> Running in d556a4d9339d\nRemoving intermediate container d556a4d9339d\n ---> 15a5aef7025a\nStep 7/18 : RUN git clone https://github.com/2anki/web /app/web\n ---> Running in ffab47cb8f07\n\u001b[91mCloning into '/app/web'...\n\u001b[0mRemoving intermediate container ffab47cb8f07\n ---> 793c3affc724\nStep 8/18 : RUN git clone https://github.com/2anki/create_deck /app/create_deck\n ---> Running in 2f33cc036e9d\n\u001b[91mCloning into '/app/create_deck'...\n\u001b[0mRemoving intermediate container 2f33cc036e9d\n ---> ffb7b9c71c29\nStep 9/18 : RUN npm --prefix /app/web install && npm cache clean --force;\n ---> Running in 538d08f43add\n\u001b[91mnpm WARN deprecated mini-create-react-context@0.4.1: Package no longer supported. Contact Support at https://www.npmjs.com/support for more info.\n\u001b[0m\u001b[91mnpm WARN deprecated source-map-resolve@0.6.0: See https://github.com/lydell/source-map-resolve#deprecated\n\u001b[0m\nadded 1383 packages, and audited 1384 packages in 25s\n\n202 packages are looking for funding\n  run `npm fund` for details\n\n9 high severity vulnerabilities\n\nTo address issues that do not require attention, run:\n  npm audit fix\n\nTo address all issues (including breaking changes), run:\n  npm audit fix --force\n\nRun `npm audit` for details.\n\u001b[91mnpm notice\u001b[0m\u001b[91m \nnpm notice New major version of npm available! 8.1.2 -> 9.2.0\n\u001b[0m\u001b[91mnpm notice Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm notice Run `npm install -g npm@9.2.0` to update!\nnpm \u001b[0m\u001b[91mnotice \n\u001b[0m\u001b[91mnpm\u001b[0m\u001b[91m WARN using --force Recommended protections disabled.\n\u001b[0mRemoving intermediate container 538d08f43add\n ---> 1f7ec5c18151\nStep 10/18 : RUN npm install typescript -g && npm cache clean --force;\n ---> Running in 3af32e1509d8\n\nadded 1 package, and audited 2 packages in 1s\n\nfound 0 vulnerabilities\n\u001b[91mnpm\u001b[0m\u001b[91m WARN using --force Recommended protections disabled.\n\u001b[0mRemoving intermediate container 3af32e1509d8\n ---> c2c66a0b7334\nStep 11/18 : RUN npm --prefix /app/server install && npm cache clean --force;\n ---> Running in f7a267922847\n\u001b[91mnpm WARN deprecated @types/dotenv@8.2.0: This is a stub types definition. dotenv provides its own type definitions, so you do not need this installed.\n\u001b[0m\n> notion2anki-server@1.0.0-alpha.41 prepare\n> cd .. && husky install .husky\n\n\u001b[91mfatal: not a git repository (or any of the parent directories): .git\n\u001b[0m\nadded 942 packages, and audited 943 packages in 18s\n\n120 packages are looking for funding\n  run `npm fund` for details\n\n2 high severity vulnerabilities\n\nTo address issues that do not require attention, run:\n  npm audit fix\n\nSome issues need review, and may require choosing\na different dependency.\n\nRun `npm audit` for details.\n\u001b[91mnpm\u001b[0m\u001b[91m WARN using --force\u001b[0m\u001b[91m Recommended protections disabled.\n\u001b[0mRemoving intermediate container f7a267922847\n ---> 725f33214f48\nStep 12/18 : RUN npm --prefix /app/server run build\n ---> Running in c17bd480503c\n\n> notion2anki-server@1.0.0-alpha.41 build\n> tsc -p .\n\nRemoving intermediate container c17bd480503c\n ---> 1c80ef73be65\nStep 13/18 : RUN npm --prefix /app/web run build\n ---> Running in 07f305f98ede\n\n> web@0.1.1 build\n> react-scripts build\n\nCreating an optimized production build...\n\u001b[91mBrowserslist: caniuse-lite is outdated. Please run:\n  npx browserslist@latest --update-db\n  Why you should do it regularly: https://github.com/browserslist/browserslist#browsers-data-updating\n\u001b[0m\u001b[91mBrowserslist: caniuse-lite is outdated. Please run:\n  npx browserslist@latest --update-db\n  Why you should do it regularly: https://github.com/browserslist/browserslist#browsers-data-updating\n\u001b[0mCompiled successfully.\n\nFile sizes after gzip:\n\n  128.33 kB  build/static/js/main.bdcdeffb.js\n  29.01 kB   build/static/css/main.0aebd5ef.css\n  24.72 kB   build/static/js/763.2dde2366.chunk.js\n  6.8 kB     build/static/js/811.c4be6022.chunk.js\n  4.64 kB    build/static/js/318.e2abce0d.chunk.js\n  2.84 kB    build/static/js/571.2830416a.chunk.js\n  2.73 kB    build/static/js/564.9c8a93d5.chunk.js\n  1.45 kB    build/static/js/247.baeff78e.chunk.js\n  1.04 kB    build/static/js/7.59bdfef4.chunk.js\n\nThe project was built assuming it is hosted at /.\nYou can control this with the homepage field in your package.json.\n\nThe build folder is ready to be deployed.\nYou may serve it with a static server:\n\n  npm install -g serve\n  serve -s build\n\nFind out more about deployment here:\n\n  https://cra.link/deployment\n\nRemoving intermediate container 07f305f98ede\n ---> fb378e5313f4\nStep 14/18 : RUN rm -rf /app/web/node_modules\n ---> Running in 04ef2a758384\nRemoving intermediate container 04ef2a758384\n ---> ac3f33a5582d\nStep 15/18 : ENV WEB_BUILD_DIR /app/web/build\n ---> Running in 8b41b9d4e938\nRemoving intermediate container 8b41b9d4e938\n ---> 4ad80e86bded\nStep 16/18 : ENV PORT 8080\n ---> Running in 72d87ffc98fa\nRemoving intermediate container 72d87ffc98fa\n ---> f421dd2556a7\nStep 17/18 : EXPOSE 8080\n ---> Running in bb7ec5cb3092\nRemoving intermediate container bb7ec5cb3092\n ---> 2092eebdf64f\nStep 18/18 : CMD [\"node\", \"/app/server/src/server.js\"]\n ---> Running in f5a3ad425a3e\nRemoving intermediate container f5a3ad425a3e\n ---> 893d5ab0eefc\nSuccessfully built 893d5ab0eefc\nSuccessfully tagged 2anki.net:latest\n","stderr":"","imageSize":1301277321}}