{"repository":"https://github.com/alemayhu/notion-to-anki","dockerfilePath":"Dockerfile","startTime":1673251162435,"endTime":1673251499290,"clone":{"startTime":1673251162437,"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/alemayhu/notion-to-anki'...\n","error":null,"endTime":1673251163385,"commit":"94b1862b2cbbcc11202eee1e8f89fa12bce6c43b"},"originalBuild":{"startTime":1673251163460,"endTime":1673251343657,"error":null,"stdout":"Sending build context to Docker daemon  2.118MB\r\r\nStep 1/18 : FROM alemayhu/base-image-n2a\nlatest: Pulling from alemayhu/base-image-n2a\n6552179c3509: Pulling fs layer\nd4debff14640: Pulling fs layer\n1bdb8b461a93: Pulling fs layer\nff8b420e4fe8: Pulling fs layer\n76789d39bc4a: Pulling fs layer\neeb319d6e332: Pulling fs layer\n012681d33bad: Pulling fs layer\nf4e0aef23557: Pulling fs layer\nfc7a8e426e4c: Pulling fs layer\na4f7821398ff: Pulling fs layer\ndb0633a9b2c0: Pulling fs layer\n2f85e1129a87: Pulling fs layer\nff8b420e4fe8: Waiting\na4f7821398ff: Waiting\n76789d39bc4a: Waiting\neeb319d6e332: Waiting\n012681d33bad: Waiting\ndb0633a9b2c0: Waiting\n2f85e1129a87: Waiting\nfc7a8e426e4c: Waiting\nd4debff14640: Verifying Checksum\nd4debff14640: Download complete\n6552179c3509: Verifying Checksum\n6552179c3509: Download complete\n1bdb8b461a93: Verifying Checksum\n1bdb8b461a93: Download complete\n76789d39bc4a: Verifying Checksum\n76789d39bc4a: Download complete\nff8b420e4fe8: Verifying Checksum\nff8b420e4fe8: Download complete\n012681d33bad: Verifying Checksum\n012681d33bad: Download complete\n6552179c3509: Pull complete\nf4e0aef23557: Download complete\nd4debff14640: Pull complete\ndb0633a9b2c0: Download complete\na4f7821398ff: Download complete\n2f85e1129a87: Verifying Checksum\n2f85e1129a87: Download complete\n1bdb8b461a93: Pull complete\nff8b420e4fe8: Pull complete\n76789d39bc4a: Pull complete\neeb319d6e332: Verifying Checksum\neeb319d6e332: Download complete\neeb319d6e332: Pull complete\n012681d33bad: Pull complete\nf4e0aef23557: Pull complete\nfc7a8e426e4c: Pull complete\na4f7821398ff: Pull complete\ndb0633a9b2c0: Pull complete\n2f85e1129a87: Pull complete\nDigest: sha256:90f467e91be2151d88c83f87e48979e7cb1c6f5db23697038f9d604c9424315a\nStatus: Downloaded newer image for alemayhu/base-image-n2a:latest\n ---> d577e5294ee1\nStep 2/18 : RUN mkdir -pv /tmp/workspaces\n ---> Running in d5f039b7c3e6\nmkdir: created directory '/tmp/workspaces'\nRemoving intermediate container d5f039b7c3e6\n ---> 760643d3a860\nStep 3/18 : WORKDIR /app\n ---> Running in 49d1cc0986f4\nRemoving intermediate container 49d1cc0986f4\n ---> 8a6be87a4756\nStep 4/18 : COPY . /app/server\n ---> 378efa38272d\nStep 5/18 : RUN node --version\n ---> Running in 2401aa46087b\nv16.13.2\nRemoving intermediate container 2401aa46087b\n ---> 8af0cd313d01\nStep 6/18 : RUN rm -rvf /app/node_modules\n ---> Running in 1a39b3b3a64e\nRemoving intermediate container 1a39b3b3a64e\n ---> 6224142eb81d\nStep 7/18 : RUN git clone https://github.com/2anki/web /app/web\n ---> Running in 8b1e592372e7\n\u001b[91mCloning into '/app/web'...\n\u001b[0mRemoving intermediate container 8b1e592372e7\n ---> 44d201e488d8\nStep 8/18 : RUN git clone https://github.com/2anki/create_deck /app/create_deck\n ---> Running in 63cb685ab45f\n\u001b[91mCloning into '/app/create_deck'...\n\u001b[0mRemoving intermediate container 63cb685ab45f\n ---> 1bbd837fb3b4\nStep 9/18 : RUN npm --prefix /app/web install\n ---> Running in 6dfde7081659\n\u001b[91mnpm WARN deprecated mini-create-react-context@0.4.1: Package no longer supported. Contact Support at https://www.npmjs.com/support for more info.\n\u001b[0m\u001b[91mnpm WARN deprecated source-map-resolve@0.6.0: See https://github.com/lydell/source-map-resolve#deprecated\n\u001b[0m\nadded 1383 packages, and audited 1384 packages in 24s\n\n202 packages are looking for funding\n  run `npm fund` for details\n\n9 high severity vulnerabilities\n\nTo address issues that do not require attention, run:\n  npm audit fix\n\nTo address all issues (including breaking changes), run:\n  npm audit fix --force\n\nRun `npm audit` for details.\n\u001b[91mnpm notice\u001b[0m\u001b[91m \nnpm notice New major version of npm available! 8.1.2 -> 9.2.0\nnpm notice Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm notice Run `npm install -g npm@9.2.0` to update!\nnpm \u001b[0m\u001b[91mnotice \n\u001b[0mRemoving intermediate container 6dfde7081659\n ---> 1f28a3332e26\nStep 10/18 : RUN npm install typescript -g\n ---> Running in 82fddd218133\n\nadded 1 package, and audited 2 packages in 1s\n\nfound 0 vulnerabilities\nRemoving intermediate container 82fddd218133\n ---> 221f4a8c39dc\nStep 11/18 : RUN npm --prefix /app/server install\n ---> Running in 6d9500c819aa\n\u001b[91mnpm WARN deprecated @types/dotenv@8.2.0: This is a stub types definition. dotenv provides its own type definitions, so you do not need this installed.\n\u001b[0m\n> notion2anki-server@1.0.0-alpha.41 prepare\n> cd .. && husky install .husky\n\n\u001b[91mfatal: not a git repository (or any of the parent directories): .git\n\u001b[0m\nadded 946 packages, and audited 947 packages in 12s\n\n129 packages are looking for funding\n  run `npm fund` for details\n\n2 high severity vulnerabilities\n\nTo address all issues, run:\n  npm audit fix\n\nRun `npm audit` for details.\nRemoving intermediate container 6d9500c819aa\n ---> c5b2107e22b8\nStep 12/18 : RUN npm --prefix /app/server run build\n ---> Running in 5cc6114a2cb9\n\n> notion2anki-server@1.0.0-alpha.41 build\n> tsc -p .\n\nRemoving intermediate container 5cc6114a2cb9\n ---> 3aca80f12a70\nStep 13/18 : RUN npm --prefix /app/web run build\n ---> Running in 10b2dd9197e7\n\n> web@0.1.1 build\n> react-scripts build\n\nCreating an optimized production build...\n\u001b[91mBrowserslist: caniuse-lite is outdated. Please run:\n  npx browserslist@latest --update-db\n  Why you should do it regularly: https://github.com/browserslist/browserslist#browsers-data-updating\n\u001b[0m\u001b[91mBrowserslist: caniuse-lite is outdated. Please run:\n  npx browserslist@latest --update-db\n  Why you should do it regularly: https://github.com/browserslist/browserslist#browsers-data-updating\n\u001b[0mCompiled successfully.\n\nFile sizes after gzip:\n\n  128.33 kB  build/static/js/main.bdcdeffb.js\n  29.01 kB   build/static/css/main.0aebd5ef.css\n  24.72 kB   build/static/js/763.2dde2366.chunk.js\n  6.8 kB     build/static/js/811.c4be6022.chunk.js\n  4.64 kB    build/static/js/318.e2abce0d.chunk.js\n  2.84 kB    build/static/js/571.2830416a.chunk.js\n  2.73 kB    build/static/js/564.9c8a93d5.chunk.js\n  1.45 kB    build/static/js/247.baeff78e.chunk.js\n  1.04 kB    build/static/js/7.59bdfef4.chunk.js\n\nThe project was built assuming it is hosted at /.\nYou can control this with the homepage field in your package.json.\n\nThe build folder is ready to be deployed.\nYou may serve it with a static server:\n\n  npm install -g serve\n  serve -s build\n\nFind out more about deployment here:\n\n  https://cra.link/deployment\n\nRemoving intermediate container 10b2dd9197e7\n ---> f46a03ab95bd\nStep 14/18 : RUN rm -rf /app/web/node_modules\n ---> Running in d4c305a385a0\nRemoving intermediate container d4c305a385a0\n ---> 3dec293f6f15\nStep 15/18 : ENV WEB_BUILD_DIR /app/web/build\n ---> Running in 7e688d4a9c2e\nRemoving intermediate container 7e688d4a9c2e\n ---> f95b681c2001\nStep 16/18 : ENV PORT 8080\n ---> Running in b7d0fdad603d\nRemoving intermediate container b7d0fdad603d\n ---> 332c9c9adeaf\nStep 17/18 : EXPOSE 8080\n ---> Running in 24adf9f5b440\nRemoving intermediate container 24adf9f5b440\n ---> f16d3fdf7d68\nStep 18/18 : CMD [\"node\", \"/app/server/src/server.js\"]\n ---> Running in 7fb18edbe3a2\nRemoving intermediate container 7fb18edbe3a2\n ---> f1591a26a6fc\nSuccessfully built f1591a26a6fc\nSuccessfully tagged notion-to-anki:latest\n","stderr":"","imageSize":1402636104},"repair":{"startTime":1673251343727,"endTime":1673251343878,"violations":[{"name":"npmCacheCleanAfterInstall","position":{"start":13,"end":13,"columnStart":4,"columnEnd":33}},{"name":"npmCacheCleanAfterInstall","position":{"start":15,"end":15,"columnStart":4,"columnEnd":29}},{"name":"npmCacheCleanAfterInstall","position":{"start":16,"end":16,"columnStart":4,"columnEnd":36}}],"repairedDockerfile":"FROM alemayhu/base-image-n2a\n\nRUN mkdir -pv /tmp/workspaces\n\nWORKDIR /app\n\nCOPY . /app/server\n\nRUN node --version\n\nRUN rm -rvf /app/node_modules\nRUN git clone https://github.com/2anki/web /app/web\nRUN git clone https://github.com/2anki/create_deck /app/create_deck\nRUN npm --prefix /app/web install && npm cache clean --force;\n\nRUN npm install typescript -g && npm cache clean --force;\nRUN npm --prefix /app/server install && npm cache clean --force;\n\nRUN npm --prefix /app/server run build\nRUN npm --prefix /app/web run build\n\n# Clean up\nRUN rm -rf /app/web/node_modules\n\nENV WEB_BUILD_DIR /app/web/build\nENV PORT 8080\nEXPOSE 8080\n\nCMD [\"node\", \"/app/server/src/server.js\"]\n"},"repairedBuild":{"startTime":1673251345257,"endTime":1673251498130,"error":null,"stdout":"Sending build context to Docker daemon  2.118MB\r\r\nStep 1/18 : FROM alemayhu/base-image-n2a\n ---> d577e5294ee1\nStep 2/18 : RUN mkdir -pv /tmp/workspaces\n ---> Running in 67c615950bf2\nmkdir: created directory '/tmp/workspaces'\nRemoving intermediate container 67c615950bf2\n ---> a4e69f901db0\nStep 3/18 : WORKDIR /app\n ---> Running in 5ee9b34c7952\nRemoving intermediate container 5ee9b34c7952\n ---> 8002c87e1a21\nStep 4/18 : COPY . /app/server\n ---> 17a2cef29e18\nStep 5/18 : RUN node --version\n ---> Running in 759e47e03837\nv16.13.2\nRemoving intermediate container 759e47e03837\n ---> a5bfd4c4e4fe\nStep 6/18 : RUN rm -rvf /app/node_modules\n ---> Running in 85acee01b563\nRemoving intermediate container 85acee01b563\n ---> fd78e183ca2d\nStep 7/18 : RUN git clone https://github.com/2anki/web /app/web\n ---> Running in a601bf4f9a5e\n\u001b[91mCloning into '/app/web'...\n\u001b[0mRemoving intermediate container a601bf4f9a5e\n ---> 1a97f7e376a2\nStep 8/18 : RUN git clone https://github.com/2anki/create_deck /app/create_deck\n ---> Running in 1e2cfde771d2\n\u001b[91mCloning into '/app/create_deck'...\n\u001b[0mRemoving intermediate container 1e2cfde771d2\n ---> a9657f555afa\nStep 9/18 : RUN npm --prefix /app/web install && npm cache clean --force;\n ---> Running in 31a9e3883aa3\n\u001b[91mnpm WARN deprecated mini-create-react-context@0.4.1: Package no longer supported. Contact Support at https://www.npmjs.com/support for more info.\n\u001b[0m\u001b[91mnpm WARN deprecated source-map-resolve@0.6.0: See https://github.com/lydell/source-map-resolve#deprecated\n\u001b[0m\nadded 1383 packages, and audited 1384 packages in 26s\n\n202 packages are looking for funding\n  run `npm fund` for details\n\n9 high severity vulnerabilities\n\nTo address issues that do not require attention, run:\n  npm audit fix\n\nTo address all issues (including breaking changes), run:\n  npm audit fix --force\n\nRun `npm audit` for details.\n\u001b[91mnpm notice\u001b[0m\u001b[91m \nnpm notice New major version of npm available! 8.1.2 -> 9.2.0\nnpm notice Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\n\u001b[0m\u001b[91mnpm notice Run `npm install -g npm@9.2.0` to update!\nnpm\u001b[0m\u001b[91m notice \n\u001b[0m\u001b[91mnpm\u001b[0m\u001b[91m WARN using --force Recommended protections disabled.\n\u001b[0mRemoving intermediate container 31a9e3883aa3\n ---> 16de98965129\nStep 10/18 : RUN npm install typescript -g && npm cache clean --force;\n ---> Running in eec7bf40c6c1\n\nadded 1 package, and audited 2 packages in 1s\n\nfound 0 vulnerabilities\n\u001b[91mnpm\u001b[0m\u001b[91m WARN using --force Recommended protections disabled.\n\u001b[0mRemoving intermediate container eec7bf40c6c1\n ---> 280e5615c8a2\nStep 11/18 : RUN npm --prefix /app/server install && npm cache clean --force;\n ---> Running in 1fffde02b59b\n\u001b[91mnpm WARN deprecated @types/dotenv@8.2.0: This is a stub types definition. dotenv provides its own type definitions, so you do not need this installed.\n\u001b[0m\n> notion2anki-server@1.0.0-alpha.41 prepare\n> cd .. && husky install .husky\n\n\u001b[91mfatal: not a git repository (or any of the parent directories): .git\n\u001b[0m\nadded 946 packages, and audited 947 packages in 18s\n\n129 packages are looking for funding\n  run `npm fund` for details\n\n2 high severity vulnerabilities\n\nTo address all issues, run:\n  npm audit fix\n\nRun `npm audit` for details.\n\u001b[91mnpm\u001b[0m\u001b[91m WARN using --force Recommended protections disabled.\n\u001b[0mRemoving intermediate container 1fffde02b59b\n ---> 3c1f62c89190\nStep 12/18 : RUN npm --prefix /app/server run build\n ---> Running in 6be278d9f858\n\n> notion2anki-server@1.0.0-alpha.41 build\n> tsc -p .\n\nRemoving intermediate container 6be278d9f858\n ---> 412f6e17d707\nStep 13/18 : RUN npm --prefix /app/web run build\n ---> Running in afe709242a90\n\n> web@0.1.1 build\n> react-scripts build\n\nCreating an optimized production build...\n\u001b[91mBrowserslist: caniuse-lite is outdated. Please run:\n  npx browserslist@latest --update-db\n  Why you should do it regularly: https://github.com/browserslist/browserslist#browsers-data-updating\n\u001b[0m\u001b[91mBrowserslist: caniuse-lite is outdated. Please run:\n  npx browserslist@latest --update-db\n  Why you should do it regularly: https://github.com/browserslist/browserslist#browsers-data-updating\n\u001b[0mCompiled successfully.\n\nFile sizes after gzip:\n\n  128.33 kB  build/static/js/main.bdcdeffb.js\n  29.01 kB   build/static/css/main.0aebd5ef.css\n  24.72 kB   build/static/js/763.2dde2366.chunk.js\n  6.8 kB     build/static/js/811.c4be6022.chunk.js\n  4.64 kB    build/static/js/318.e2abce0d.chunk.js\n  2.84 kB    build/static/js/571.2830416a.chunk.js\n  2.73 kB    build/static/js/564.9c8a93d5.chunk.js\n  1.45 kB    build/static/js/247.baeff78e.chunk.js\n  1.04 kB    build/static/js/7.59bdfef4.chunk.js\n\nThe project was built assuming it is hosted at /.\nYou can control this with the homepage field in your package.json.\n\nThe build folder is ready to be deployed.\nYou may serve it with a static server:\n\n  npm install -g serve\n  serve -s build\n\nFind out more about deployment here:\n\n  https://cra.link/deployment\n\nRemoving intermediate container afe709242a90\n ---> be43b20c1981\nStep 14/18 : RUN rm -rf /app/web/node_modules\n ---> Running in 4c66fcd16a97\nRemoving intermediate container 4c66fcd16a97\n ---> 962356843675\nStep 15/18 : ENV WEB_BUILD_DIR /app/web/build\n ---> Running in 4ecf0c822351\nRemoving intermediate container 4ecf0c822351\n ---> af97e17c8dfb\nStep 16/18 : ENV PORT 8080\n ---> Running in f7ac549f787b\nRemoving intermediate container f7ac549f787b\n ---> 28ea247da344\nStep 17/18 : EXPOSE 8080\n ---> Running in 19d69e98d7e4\nRemoving intermediate container 19d69e98d7e4\n ---> 1b060a3d8079\nStep 18/18 : CMD [\"node\", \"/app/server/src/server.js\"]\n ---> Running in 34f1c8ac010f\nRemoving intermediate container 34f1c8ac010f\n ---> bacb2b26c3c1\nSuccessfully built bacb2b26c3c1\nSuccessfully tagged notion-to-anki:latest\n","stderr":"","imageSize":1302750101}}