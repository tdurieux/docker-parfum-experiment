{"repository":"https://github.com/eddiejaoude/stargate","dockerfilePath":"Dockerfile","startTime":1672215295177,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/eddiejaoude/stargate'...\n","error":null,"commit":"e4852058eeaf37c099f81524ea000c2d91f227c0"},"originalBuild":{"startTimestamp":1672215296062,"endTimestamp":1672215333150,"error":null,"stdout":"Sending build context to Docker daemon  395.3kB\r\r\nStep 1/18 : FROM node:15 As development\n15: Pulling from library/node\nbfde2ec33fbc: Already exists\n787f5e2f1047: Already exists\n7b6173a10eb8: Already exists\ndc05be471d51: Already exists\n55fab5cadd3c: Already exists\nbd821d20ef8c: Pulling fs layer\n6041b69671c6: Pulling fs layer\n989c5d2d2313: Pulling fs layer\n4b57d41e8391: Pulling fs layer\n4b57d41e8391: Waiting\nbd821d20ef8c: Download complete\nbd821d20ef8c: Pull complete\n989c5d2d2313: Verifying Checksum\n989c5d2d2313: Download complete\n6041b69671c6: Verifying Checksum\n6041b69671c6: Download complete\n4b57d41e8391: Download complete\n6041b69671c6: Pull complete\n989c5d2d2313: Pull complete\n4b57d41e8391: Pull complete\nDigest: sha256:608bba799613b1ebf754034ae008849ba51e88b23271412427b76d60ae0d0627\nStatus: Downloaded newer image for node:15\n ---> 3d3f41722daf\nStep 2/18 : LABEL org.opencontainers.image.source https://github.com/eddiejaoude/stargate\n ---> Running in 61173e6ca496\nRemoving intermediate container 61173e6ca496\n ---> 685d7b1938c1\nStep 3/18 : WORKDIR /usr/src/app\n ---> Running in 85a230ae5a6c\nRemoving intermediate container 85a230ae5a6c\n ---> eddf98885665\nStep 4/18 : COPY package*.json ./\n ---> 97c3b78fb748\nStep 5/18 : RUN npm install --only=development\n ---> Running in d6c20df27d4a\n\u001b[91mnpm\u001b[0m\u001b[91m WARN invalid config only=\"development\" set in command line options\n\u001b[0m\u001b[91mnpm WARN invalid config\u001b[0m\u001b[91m Must be one of: null, prod, production\n\u001b[0m\n> stargate@0.9.0 prepare\n> if test \"$HUSKY\" != \"0\" ; then husky install ; fi\n\nhusky - not a Git repository, skipping hooks installation\n\nadded 361 packages, and audited 362 packages in 7s\n\n12 vulnerabilities (4 moderate, 6 high, 2 critical)\n\nTo address all issues, run:\n  npm audit fix\n\nRun `npm audit` for details.\n\u001b[91mnpm notice\u001b[0m\u001b[91m \nnpm \u001b[0m\u001b[91mnotice\u001b[0m\u001b[91m New major version of npm available! 7.7.6 -> 9.2.0\n\u001b[0m\u001b[91mnpm \u001b[0m\u001b[91mnotice\u001b[0m\u001b[91m Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\n\u001b[0m\u001b[91mnpm notice\u001b[0m\u001b[91m Run `npm install -g npm@9.2.0` to update!\nnpm \u001b[0m\u001b[91mnotice \n\u001b[0mRemoving intermediate container d6c20df27d4a\n ---> 868a4d98ab60\nStep 6/18 : COPY . .\n ---> 0e155f05c5a3\nStep 7/18 : RUN npm run build\n ---> Running in fb9c5a033d56\n\n> stargate@0.9.0 prebuild\n> rm -rf ./dist\n\n\n> stargate@0.9.0 build\n> tsc\n\n\u001b[91mnpm notice \nnpm \u001b[0m\u001b[91mnotice New major version of npm available! 7.7.6 -> 9.2.0\nnpm notice Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm notice\u001b[0m\u001b[91m Run `npm install -g npm@9.2.0` to update!\nnpm \u001b[0m\u001b[91mnotice\u001b[0m\u001b[91m \n\u001b[0mRemoving intermediate container fb9c5a033d56\n ---> 2d025f6f9790\nStep 8/18 : FROM node:15 as production\n ---> 3d3f41722daf\nStep 9/18 : ARG NODE_ENV=production\n ---> Running in 94fb6c79ed1e\nRemoving intermediate container 94fb6c79ed1e\n ---> c045724a355d\nStep 10/18 : ENV NODE_ENV=${NODE_ENV}\n ---> Running in 6cbe8a525769\nRemoving intermediate container 6cbe8a525769\n ---> e23405ea30bc\nStep 11/18 : ENV HUSKY=0\n ---> Running in 5ed38b15ad38\nRemoving intermediate container 5ed38b15ad38\n ---> a91d3fa9a6e6\nStep 12/18 : ENV VERSION=\"v0.0.0\"\n ---> Running in e32ac81daa9c\nRemoving intermediate container e32ac81daa9c\n ---> 161075648b91\nStep 13/18 : WORKDIR /usr/src/app\n ---> Running in 6f6e5a839531\nRemoving intermediate container 6f6e5a839531\n ---> 4175ed6ccb84\nStep 14/18 : COPY package*.json ./\n ---> 890242848d4d\nStep 15/18 : RUN npm install --only=production\n ---> Running in 98b5972839ac\n\n> stargate@0.9.0 prepare\n> if test \"$HUSKY\" != \"0\" ; then husky install ; fi\n\n\nadded 16 packages, and audited 17 packages in 4s\n\n2 vulnerabilities (1 moderate, 1 high)\n\nTo address all issues, run:\n  npm audit fix\n\nRun `npm audit` for details.\n\u001b[91mnpm notice \nnpm\u001b[0m\u001b[91m notice New major version of npm available! 7.7.6 -> 9.2.0\nnpm notice Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm\u001b[0m\u001b[91m notice\u001b[0m\u001b[91m Run `npm install -g npm@9.2.0` to update!\n\u001b[0m\u001b[91mnpm notice\u001b[0m\u001b[91m \n\u001b[0mRemoving intermediate container 98b5972839ac\n ---> fbce801622d5\nStep 16/18 : COPY . .\n ---> a42a38c8d6ac\nStep 17/18 : COPY --from=development /usr/src/app/dist ./dist\n ---> 3cb49711bf9f\nStep 18/18 : CMD [\"npm\", \"run\", \"start:prod\"]\n ---> Running in f222c6004ef2\nRemoving intermediate container f222c6004ef2\n ---> 3b06cb12baf8\nSuccessfully built 3b06cb12baf8\nSuccessfully tagged stargate:latest\n","stderr":"","imageSize":945227656},"repair":{"violations":[{"name":"npmCacheCleanAfterInstall","position":{"start":7,"end":7,"columnStart":4,"columnEnd":34}},{"name":"npmCacheCleanAfterInstall","position":{"start":24,"end":24,"columnStart":4,"columnEnd":33}}],"repairedDockerfile":"FROM node:15 As development\nLABEL org.opencontainers.image.source https://github.com/eddiejaoude/stargate\n\nWORKDIR /usr/src/app\n\nCOPY package*.json ./\n\nRUN npm install --only=development\n\nCOPY . .\n\nRUN npm run build\n\nFROM node:15 as production\n\nARG NODE_ENV=production\nENV NODE_ENV=${NODE_ENV}\nENV HUSKY=0\nENV VERSION=\"v0.0.0\"\n\nWORKDIR /usr/src/app\n\nCOPY package*.json ./\n\nRUN npm install --only=production\n\nCOPY . .\n\nCOPY --from=development /usr/src/app/dist ./dist\n\nCMD [\"npm\", \"run\", \"start:prod\"]\n"},"repairedBuild":{"startTimestamp":1672215333487,"endTimestamp":1672215361486,"error":null,"stdout":"Sending build context to Docker daemon  395.3kB\r\r\nStep 1/18 : FROM node:15 As development\n ---> 3d3f41722daf\nStep 2/18 : LABEL org.opencontainers.image.source https://github.com/eddiejaoude/stargate\n ---> Running in 5ab8f4ed8aca\nRemoving intermediate container 5ab8f4ed8aca\n ---> 6f1b5273c88d\nStep 3/18 : WORKDIR /usr/src/app\n ---> Running in e095d55b700b\nRemoving intermediate container e095d55b700b\n ---> 2b98a190b054\nStep 4/18 : COPY package*.json ./\n ---> e75e51da0f36\nStep 5/18 : RUN npm install --only=development\n ---> Running in f2c31978a2c3\n\u001b[91mnpm\u001b[0m\u001b[91m WARN invalid config only=\"development\" set in command line options\n\u001b[0m\u001b[91mnpm WARN invalid config\u001b[0m\u001b[91m Must be one of: null, prod, production\n\u001b[0m\n> stargate@0.9.0 prepare\n> if test \"$HUSKY\" != \"0\" ; then husky install ; fi\n\nhusky - not a Git repository, skipping hooks installation\n\nadded 361 packages, and audited 362 packages in 7s\n\n12 vulnerabilities (4 moderate, 6 high, 2 critical)\n\nTo address all issues, run:\n  npm audit fix\n\nRun `npm audit` for details.\n\u001b[91mnpm notice \nnpm notice New major version of npm available! 7.7.6 -> 9.2.0\nnpm\u001b[0m\u001b[91m notice Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm notice Run `npm install -g npm@9.2.0` to update!\nnpm notice\u001b[0m\u001b[91m \n\u001b[0mRemoving intermediate container f2c31978a2c3\n ---> df5bf61f86ad\nStep 6/18 : COPY . .\n ---> 682bc9fba618\nStep 7/18 : RUN npm run build\n ---> Running in e6b82504aeab\n\n> stargate@0.9.0 prebuild\n> rm -rf ./dist\n\n\n> stargate@0.9.0 build\n> tsc\n\n\u001b[91mnpm\u001b[0m\u001b[91m \u001b[0m\u001b[91mnotice\u001b[0m\u001b[91m \nnpm\u001b[0m\u001b[91m \u001b[0m\u001b[91mnotice\u001b[0m\u001b[91m New major version of npm available! 7.7.6 -> 9.2.0\n\u001b[0m\u001b[91mnpm\u001b[0m\u001b[91m \u001b[0m\u001b[91mnotice Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\n\u001b[0m\u001b[91mnpm \u001b[0m\u001b[91mnotice\u001b[0m\u001b[91m Run `npm install -g npm@9.2.0` to update!\nnpm\u001b[0m\u001b[91m \u001b[0m\u001b[91mnotice\u001b[0m\u001b[91m \n\u001b[0mRemoving intermediate container e6b82504aeab\n ---> d624c50db2ca\nStep 8/18 : FROM node:15 as production\n ---> 3d3f41722daf\nStep 9/18 : ARG NODE_ENV=production\n ---> Running in 0e8a9899f715\nRemoving intermediate container 0e8a9899f715\n ---> 8ab4abbcfce4\nStep 10/18 : ENV NODE_ENV=${NODE_ENV}\n ---> Running in 34eae319d76b\nRemoving intermediate container 34eae319d76b\n ---> e0d9c6fd9fea\nStep 11/18 : ENV HUSKY=0\n ---> Running in 96d48aec9ac6\nRemoving intermediate container 96d48aec9ac6\n ---> 41068ff21fe1\nStep 12/18 : ENV VERSION=\"v0.0.0\"\n ---> Running in bf3c56c8f3bb\nRemoving intermediate container bf3c56c8f3bb\n ---> f11989d98b0c\nStep 13/18 : WORKDIR /usr/src/app\n ---> Running in 99f50a937bdb\nRemoving intermediate container 99f50a937bdb\n ---> 9a36ee079741\nStep 14/18 : COPY package*.json ./\n ---> ad78f8a98684\nStep 15/18 : RUN npm install --only=production\n ---> Running in d3818454283e\n\n> stargate@0.9.0 prepare\n> if test \"$HUSKY\" != \"0\" ; then husky install ; fi\n\n\nadded 16 packages, and audited 17 packages in 1s\n\n2 vulnerabilities (1 moderate, 1 high)\n\nTo address all issues, run:\n  npm audit fix\n\nRun `npm audit` for details.\n\u001b[91mnpm notice\u001b[0m\u001b[91m \nnpm notice New major version of npm available! 7.7.6 -> 9.2.0\nnpm notice\u001b[0m\u001b[91m Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm notice Run `npm install -g npm@9.2.0` to update!\nnpm notice\u001b[0m\u001b[91m \n\u001b[0mRemoving intermediate container d3818454283e\n ---> 441b87d03d22\nStep 16/18 : COPY . .\n ---> 97ccc1782def\nStep 17/18 : COPY --from=development /usr/src/app/dist ./dist\n ---> 79ba6856731d\nStep 18/18 : CMD [\"npm\", \"run\", \"start:prod\"]\n ---> Running in b55896916307\nRemoving intermediate container b55896916307\n ---> b9e069c7e64a\nSuccessfully built b9e069c7e64a\nSuccessfully tagged stargate:latest\n","stderr":"","imageSize":945227657},"endTime":1672215361764}