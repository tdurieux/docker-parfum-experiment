{"repository":"https://github.com/adzerk/node-lru-native","dockerfilePath":"Dockerfile","startTime":1672416789180,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/adzerk/node-lru-native'...\n","error":null,"commit":"8ff98c68ebe11c09bac50c6feb85840ef7a6af01"},"originalBuild":{"startTimestamp":1672416790211,"endTimestamp":1672416821420,"error":null,"stdout":"Sending build context to Docker daemon  127.5kB\r\r\nStep 1/7 : FROM node:11-alpine\n11-alpine: Pulling from library/node\ne7c96db7181b: Pulling fs layer\n0119aca44649: Pulling fs layer\n40df19605a18: Pulling fs layer\n82194b8b4a64: Pulling fs layer\n40df19605a18: Verifying Checksum\n40df19605a18: Download complete\ne7c96db7181b: Verifying Checksum\ne7c96db7181b: Download complete\n0119aca44649: Verifying Checksum\n0119aca44649: Download complete\ne7c96db7181b: Pull complete\n82194b8b4a64: Verifying Checksum\n82194b8b4a64: Download complete\n0119aca44649: Pull complete\n40df19605a18: Pull complete\n82194b8b4a64: Pull complete\nDigest: sha256:8bb56bab197299c8ff820f1a55462890caf08f57ffe3b91f5fa6945a4d505932\nStatus: Downloaded newer image for node:11-alpine\n ---> f18da2f58c3d\nStep 2/7 : RUN apk add --no-cache make gcc g++ python\n ---> Running in fc6c2bfd014a\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.9/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.9/community/x86_64/APKINDEX.tar.gz\n(1/24) Upgrading musl (1.1.20-r4 -> 1.1.20-r6)\n(2/24) Installing binutils (2.31.1-r2)\n(3/24) Installing gmp (6.1.2-r1)\n(4/24) Installing isl (0.18-r0)\n(5/24) Installing libgomp (8.3.0-r0)\n(6/24) Installing libatomic (8.3.0-r0)\n(7/24) Installing mpfr3 (3.1.5-r1)\n(8/24) Installing mpc1 (1.0.3-r1)\n(9/24) Installing gcc (8.3.0-r0)\n(10/24) Installing musl-dev (1.1.20-r6)\n(11/24) Installing libc-dev (0.7.1-r0)\n(12/24) Installing g++ (8.3.0-r0)\n(13/24) Upgrading musl-utils (1.1.20-r4 -> 1.1.20-r6)\n(14/24) Installing make (4.2.1-r2)\n(15/24) Installing libbz2 (1.0.6-r7)\n(16/24) Installing expat (2.2.8-r0)\n(17/24) Installing libffi (3.2.1-r6)\n(18/24) Installing gdbm (1.13-r1)\n(19/24) Installing ncurses-terminfo-base (6.1_p20190105-r0)\n(20/24) Installing ncurses-terminfo (6.1_p20190105-r0)\n(21/24) Installing ncurses-libs (6.1_p20190105-r0)\n(22/24) Installing readline (7.0.003-r1)\n(23/24) Installing sqlite-libs (3.28.0-r3)\n(24/24) Installing python2 (2.7.18-r0)\nExecuting busybox-1.29.3-r10.trigger\nOK: 206 MiB in 38 packages\nRemoving intermediate container fc6c2bfd014a\n ---> 2eb3294ebabc\nStep 3/7 : ARG DIR=/build\n ---> Running in ca104cebfc65\nRemoving intermediate container ca104cebfc65\n ---> 1eb508213a1c\nStep 4/7 : ADD . ${DIR}\n ---> d894546a1562\nStep 5/7 : WORKDIR ${DIR}\n ---> Running in 2e904d5b52a6\nRemoving intermediate container 2e904d5b52a6\n ---> 8ec7f3844a11\nStep 6/7 : RUN npm install --production --silent\n ---> Running in daff030e576b\nadded 1 package from 8 contributors and audited 134 packages in 4.775s\nfound 16 vulnerabilities (3 moderate, 12 high, 1 critical)\n  run `npm audit fix` to fix them, or `npm audit` for details\nRemoving intermediate container daff030e576b\n ---> beca3b1f0bd0\nStep 7/7 : RUN npm run build\n ---> Running in 7047fcfda278\n\n> lru-native2@1.2.5 build /build\n> node-gyp rebuild\n\nmake: Entering directory '/build/build'\n  CXX(target) Release/obj.target/native/src/native.o\n\u001b[91mIn file included from ../node_modules/nan/nan.h:56,\n                 from ../src/native.cc:1:\n/root/.node-gyp/11.15.0/include/node/node.h:544:43: warning: cast between incompatible function types from 'void (*)(Nan::ADDON_REGISTER_FUNCTION_ARGS_TYPE)' {aka 'void (*)(v8::Local<v8::Object>)'} to 'node::addon_register_func' {aka 'void (*)(v8::Local<v8::Object>, v8::Local<v8::Value>, void*)'} [-Wcast-function-type]\n       (node::addon_register_func) (regfunc),                          \\\n                                           ^\n/root/.node-gyp/11.15.0/include/node/node.h:578:3: note: in expansion of macro 'NODE_MODULE_X'\n   NODE_MODULE_X(modname, regfunc, NULL, 0)  // NOLINT (readability/null_usage)\n   ^~~~~~~~~~~~~\n../src/native.cc:8:1: note: in expansion of macro 'NODE_MODULE'\n NODE_MODULE(native, Init)\n ^~~~~~~~~~~\n\u001b[0m\u001b[91mIn file included from /root/.node-gyp/11.15.0/include/node/node.h:63,\n                 from ../node_modules/nan/nan.h:56,\n                 from ../src/native.cc:1:\n/root/.node-gyp/11.15.0/include/node/v8.h: In instantiation of 'void v8::PersistentBase<T>::SetWeak(P*, typename v8::WeakCallbackInfo<P>::Callback, v8::WeakCallbackType) [with P = node::ObjectWrap; T = v8::Object; typename v8::WeakCallbackInfo<P>::Callback = void (*)(const v8::WeakCallbackInfo<node::ObjectWrap>&)]':\n/root/.node-gyp/11.15.0/include/node/node_object_wrap.h:84:78:   required from here\n/root/.node-gyp/11.15.0/include/node/v8.h:9710:16: warning: cast between incompatible function types from 'v8::WeakCallbackInfo<node::ObjectWrap>::Callback' {aka 'void (*)(const v8::WeakCallbackInfo<node::ObjectWrap>&)'} to 'Callback' {aka 'void (*)(const v8::WeakCallbackInfo<void>&)'} [-Wcast-function-type]\n                reinterpret_cast<Callback>(callback), type);\n                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n\u001b[0m\u001b[91m/root/.node-gyp/11.15.0/include/node/v8.h: In instantiation of 'void v8::PersistentBase<T>::SetWeak(P*, typename v8::WeakCallbackInfo<P>::Callback, v8::WeakCallbackType) [with P = Nan::ObjectWrap; T = v8::Object; typename v8::WeakCallbackInfo<P>::Callback = void (*)(const v8::WeakCallbackInfo<Nan::ObjectWrap>&)]':\n../node_modules/nan/nan_object_wrap.h:65:61:   required from here\n/root/.node-gyp/11.15.0/include/node/v8.h:9710:16: warning: cast between incompatible function types from 'v8::WeakCallbackInfo<Nan::ObjectWrap>::Callback' {aka 'void (*)(const v8::WeakCallbackInfo<Nan::ObjectWrap>&)'} to 'Callback' {aka 'void (*)(const v8::WeakCallbackInfo<void>&)'} [-Wcast-function-type]\n\u001b[0m  CXX(target) Release/obj.target/native/src/LRUCache.o\n\u001b[91mIn file included from /root/.node-gyp/11.15.0/include/node/node.h:63,\n                 from ../node_modules/nan/nan.h:56,\n                 from ../src/LRUCache.h:4,\n                 from ../src/LRUCache.cc:1:\n/root/.node-gyp/11.15.0/include/node/v8.h: In instantiation of 'void v8::PersistentBase<T>::SetWeak(P*, typename v8::WeakCallbackInfo<P>::Callback, v8::WeakCallbackType) [with P = node::ObjectWrap; T = v8::Object; typename v8::WeakCallbackInfo<P>::Callback = void (*)(const v8::WeakCallbackInfo<node::ObjectWrap>&)]':\n/root/.node-gyp/11.15.0/include/node/node_object_wrap.h:84:78:   required from here\n/root/.node-gyp/11.15.0/include/node/v8.h:9710:16: warning: cast between incompatible function types from 'v8::WeakCallbackInfo<node::ObjectWrap>::Callback' {aka 'void (*)(const v8::WeakCallbackInfo<node::ObjectWrap>&)'} to 'Callback' {aka 'void (*)(const v8::WeakCallbackInfo<void>&)'} [-Wcast-function-type]\n                reinterpret_cast<Callback>(callback), type);\n                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n\u001b[0m\u001b[91m/root/.node-gyp/11.15.0/include/node/v8.h: In instantiation of 'void v8::PersistentBase<T>::SetWeak(P*, typename v8::WeakCallbackInfo<P>::Callback, v8::WeakCallbackType) [with P = Nan::ObjectWrap; T = v8::Object; typename v8::WeakCallbackInfo<P>::Callback = void (*)(const v8::WeakCallbackInfo<Nan::ObjectWrap>&)]':\n../node_modules/nan/nan_object_wrap.h:65:61:   required from here\n/root/.node-gyp/11.15.0/include/node/v8.h:9710:16: warning: cast between incompatible function types from 'v8::WeakCallbackInfo<Nan::ObjectWrap>::Callback' {aka 'void (*)(const v8::WeakCallbackInfo<Nan::ObjectWrap>&)'} to 'Callback' {aka 'void (*)(const v8::WeakCallbackInfo<void>&)'} [-Wcast-function-type]\n\u001b[0m  SOLINK_MODULE(target) Release/obj.target/native.node\n  COPY Release/native.node\nmake: Leaving directory '/build/build'\nRemoving intermediate container 7047fcfda278\n ---> 4637df318e1f\nSuccessfully built 4637df318e1f\nSuccessfully tagged node-lru-native:latest\n","stderr":"","imageSize":274369593},"repair":{"violations":[{"name":"npmCacheCleanAfterInstall","position":{"start":10,"end":10,"columnStart":4,"columnEnd":37}}],"repairedDockerfile":"FROM node:11-alpine\n\n# Add toolchain for compiling native modules\nRUN apk add --no-cache make gcc g++ python\n\nARG DIR=/build\nADD . ${DIR}\nWORKDIR ${DIR}\n\n# Fetch Dependencies\nRUN npm install --production --silent\n\n# Build\nRUN npm run build\n"},"repairedBuild":{"startTimestamp":1672416821852,"endTimestamp":1672416844285,"error":null,"stdout":"Sending build context to Docker daemon  127.5kB\r\r\nStep 1/7 : FROM node:11-alpine\n ---> f18da2f58c3d\nStep 2/7 : RUN apk add --no-cache make gcc g++ python\n ---> Running in 369da60a40d1\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.9/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.9/community/x86_64/APKINDEX.tar.gz\n(1/24) Upgrading musl (1.1.20-r4 -> 1.1.20-r6)\n(2/24) Installing binutils (2.31.1-r2)\n(3/24) Installing gmp (6.1.2-r1)\n(4/24) Installing isl (0.18-r0)\n(5/24) Installing libgomp (8.3.0-r0)\n(6/24) Installing libatomic (8.3.0-r0)\n(7/24) Installing mpfr3 (3.1.5-r1)\n(8/24) Installing mpc1 (1.0.3-r1)\n(9/24) Installing gcc (8.3.0-r0)\n(10/24) Installing musl-dev (1.1.20-r6)\n(11/24) Installing libc-dev (0.7.1-r0)\n(12/24) Installing g++ (8.3.0-r0)\n(13/24) Upgrading musl-utils (1.1.20-r4 -> 1.1.20-r6)\n(14/24) Installing make (4.2.1-r2)\n(15/24) Installing libbz2 (1.0.6-r7)\n(16/24) Installing expat (2.2.8-r0)\n(17/24) Installing libffi (3.2.1-r6)\n(18/24) Installing gdbm (1.13-r1)\n(19/24) Installing ncurses-terminfo-base (6.1_p20190105-r0)\n(20/24) Installing ncurses-terminfo (6.1_p20190105-r0)\n(21/24) Installing ncurses-libs (6.1_p20190105-r0)\n(22/24) Installing readline (7.0.003-r1)\n(23/24) Installing sqlite-libs (3.28.0-r3)\n(24/24) Installing python2 (2.7.18-r0)\nExecuting busybox-1.29.3-r10.trigger\nOK: 206 MiB in 38 packages\nRemoving intermediate container 369da60a40d1\n ---> 763823172a19\nStep 3/7 : ARG DIR=/build\n ---> Running in 68e8e98e0e88\nRemoving intermediate container 68e8e98e0e88\n ---> be42e661ceaf\nStep 4/7 : ADD . ${DIR}\n ---> e2235fe49119\nStep 5/7 : WORKDIR ${DIR}\n ---> Running in 836744cec57a\nRemoving intermediate container 836744cec57a\n ---> a575341d1143\nStep 6/7 : RUN npm install --production --silent\n ---> Running in 0bf7b20e5f62\nadded 1 package from 8 contributors and audited 134 packages in 3.193s\nfound 16 vulnerabilities (3 moderate, 12 high, 1 critical)\n  run `npm audit fix` to fix them, or `npm audit` for details\nRemoving intermediate container 0bf7b20e5f62\n ---> 555f31f1009e\nStep 7/7 : RUN npm run build\n ---> Running in 7c70918b63ce\n\n> lru-native2@1.2.5 build /build\n> node-gyp rebuild\n\nmake: Entering directory '/build/build'\n  CXX(target) Release/obj.target/native/src/native.o\n\u001b[91mIn file included from ../node_modules/nan/nan.h:56,\n                 from ../src/native.cc:1:\n/root/.node-gyp/11.15.0/include/node/node.h:544:43: warning: cast between incompatible function types from 'void (*)(Nan::ADDON_REGISTER_FUNCTION_ARGS_TYPE)' {aka 'void (*)(v8::Local<v8::Object>)'} to 'node::addon_register_func' {aka 'void (*)(v8::Local<v8::Object>, v8::Local<v8::Value>, void*)'} [-Wcast-function-type]\n       (node::addon_register_func) (regfunc),                          \\\n                                           ^\n/root/.node-gyp/11.15.0/include/node/node.h:578:3: note: in expansion of macro 'NODE_MODULE_X'\n   NODE_MODULE_X(modname, regfunc, NULL, 0)  // NOLINT (readability/null_usage)\n   ^~~~~~~~~~~~~\n../src/native.cc:8:1: note: in expansion of macro 'NODE_MODULE'\n NODE_MODULE(native, Init)\n ^~~~~~~~~~~\n\u001b[0m\u001b[91mIn file included from /root/.node-gyp/11.15.0/include/node/node.h:63,\n                 from ../node_modules/nan/nan.h:56,\n                 from ../src/native.cc:1:\n/root/.node-gyp/11.15.0/include/node/v8.h: In instantiation of 'void v8::PersistentBase<T>::SetWeak(P*, typename v8::WeakCallbackInfo<P>::Callback, v8::WeakCallbackType) [with P = node::ObjectWrap; T = v8::Object; typename v8::WeakCallbackInfo<P>::Callback = void (*)(const v8::WeakCallbackInfo<node::ObjectWrap>&)]':\n/root/.node-gyp/11.15.0/include/node/node_object_wrap.h:84:78:   required from here\n/root/.node-gyp/11.15.0/include/node/v8.h:9710:16: warning: cast between incompatible function types from 'v8::WeakCallbackInfo<node::ObjectWrap>::Callback' {aka 'void (*)(const v8::WeakCallbackInfo<node::ObjectWrap>&)'} to 'Callback' {aka 'void (*)(const v8::WeakCallbackInfo<void>&)'} [-Wcast-function-type]\n                reinterpret_cast<Callback>(callback), type);\n                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n\u001b[0m\u001b[91m/root/.node-gyp/11.15.0/include/node/v8.h: In instantiation of 'void v8::PersistentBase<T>::SetWeak(P*, typename v8::WeakCallbackInfo<P>::Callback, v8::WeakCallbackType) [with P = Nan::ObjectWrap; T = v8::Object; typename v8::WeakCallbackInfo<P>::Callback = void (*)(const v8::WeakCallbackInfo<Nan::ObjectWrap>&)]':\n../node_modules/nan/nan_object_wrap.h:65:61:   required from here\n/root/.node-gyp/11.15.0/include/node/v8.h:9710:16: warning: cast between incompatible function types from 'v8::WeakCallbackInfo<Nan::ObjectWrap>::Callback' {aka 'void (*)(const v8::WeakCallbackInfo<Nan::ObjectWrap>&)'} to 'Callback' {aka 'void (*)(const v8::WeakCallbackInfo<void>&)'} [-Wcast-function-type]\n\u001b[0m  CXX(target) Release/obj.target/native/src/LRUCache.o\n\u001b[91mIn file included from /root/.node-gyp/11.15.0/include/node/node.h:63,\n                 from ../node_modules/nan/nan.h:56,\n                 from ../src/LRUCache.h:4,\n                 from ../src/LRUCache.cc:1:\n/root/.node-gyp/11.15.0/include/node/v8.h: In instantiation of 'void v8::PersistentBase<T>::SetWeak(P*, typename v8::WeakCallbackInfo<P>::Callback, v8::WeakCallbackType) [with P = node::ObjectWrap; T = v8::Object; typename v8::WeakCallbackInfo<P>::Callback = void (*)(const v8::WeakCallbackInfo<node::ObjectWrap>&)]':\n/root/.node-gyp/11.15.0/include/node/node_object_wrap.h:84:78:   required from here\n/root/.node-gyp/11.15.0/include/node/v8.h:9710:16: warning: cast between incompatible function types from 'v8::WeakCallbackInfo<node::ObjectWrap>::Callback' {aka 'void (*)(const v8::WeakCallbackInfo<node::ObjectWrap>&)'} to 'Callback' {aka 'void (*)(const v8::WeakCallbackInfo<void>&)'} [-Wcast-function-type]\n                reinterpret_cast<Callback>(callback), type);\n                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n\u001b[0m\u001b[91m/root/.node-gyp/11.15.0/include/node/v8.h: In instantiation of 'void v8::PersistentBase<T>::SetWeak(P*, typename v8::WeakCallbackInfo<P>::Callback, v8::WeakCallbackType) [with P = Nan::ObjectWrap; T = v8::Object; typename v8::WeakCallbackInfo<P>::Callback = void (*)(const v8::WeakCallbackInfo<Nan::ObjectWrap>&)]':\n../node_modules/nan/nan_object_wrap.h:65:61:   required from here\n/root/.node-gyp/11.15.0/include/node/v8.h:9710:16: warning: cast between incompatible function types from 'v8::WeakCallbackInfo<Nan::ObjectWrap>::Callback' {aka 'void (*)(const v8::WeakCallbackInfo<Nan::ObjectWrap>&)'} to 'Callback' {aka 'void (*)(const v8::WeakCallbackInfo<void>&)'} [-Wcast-function-type]\n\u001b[0m  SOLINK_MODULE(target) Release/obj.target/native.node\n  COPY Release/native.node\nmake: Leaving directory '/build/build'\nRemoving intermediate container 7c70918b63ce\n ---> 96dfe1f2a7a2\nSuccessfully built 96dfe1f2a7a2\nSuccessfully tagged node-lru-native:latest\n","stderr":"","imageSize":274369593},"endTime":1672416844663}