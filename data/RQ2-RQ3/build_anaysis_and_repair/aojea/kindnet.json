{"repository":"https://github.com/aojea/kindnet","dockerfilePath":"Dockerfile","startTime":1672710275310,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/aojea/kindnet'...\n","error":null,"commit":"b5a3f87afe47979bea845cad13c7cc6478a901de"},"originalBuild":{"startTimestamp":1672710276115,"endTimestamp":1672710369881,"error":null,"stdout":"Sending build context to Docker daemon    258kB\r\r\nStep 1/16 : ARG GOARCH=\"amd64\"\nStep 2/16 : FROM golang:1.18 AS builder\n1.18: Pulling from library/golang\n32de3c850997: Already exists\nfa1d4c8d85a4: Already exists\nc796299bbbdd: Already exists\n81283a9569ad: Already exists\nc768848b86a2: Already exists\n160a777925fe: Pulling fs layer\n1be94824532a: Pulling fs layer\n1be94824532a: Download complete\n160a777925fe: Verifying Checksum\n160a777925fe: Download complete\n160a777925fe: Pull complete\n1be94824532a: Pull complete\nDigest: sha256:00d63686b480f6dc866e93ddc4b29efa2db03274a687e6495c2cfbfe615d638e\nStatus: Downloaded newer image for golang:1.18\n ---> fffd0d9a59da\nStep 3/16 : ARG GOARCH=\"amd64\"\n ---> Running in 35994562690f\nRemoving intermediate container 35994562690f\n ---> 9b64be21be9b\nStep 4/16 : ARG CNI_VERSION=\"v1.1.1\"\n ---> Running in e251268384ff\nRemoving intermediate container e251268384ff\n ---> cf951a1e3c8e\nStep 5/16 : ARG GOOS=linux\n ---> Running in 57123ed63afd\nRemoving intermediate container 57123ed63afd\n ---> 1d59a20f115b\nStep 6/16 : ENV CGO_ENABLED=0\n ---> Running in ae51f335caef\nRemoving intermediate container ae51f335caef\n ---> 53105403b77b\nStep 7/16 : ENV GO111MODULE=\"on\"\n ---> Running in 5cc884ac74e2\nRemoving intermediate container 5cc884ac74e2\n ---> 2da43296d386\nStep 8/16 : ENV GOPROXY=https://proxy.golang.org\n ---> Running in 65d7f41ca26a\nRemoving intermediate container 65d7f41ca26a\n ---> cfbec76300b8\nStep 9/16 : WORKDIR /src\n ---> Running in 479937ef0672\nRemoving intermediate container 479937ef0672\n ---> 714c520022fd\nStep 10/16 : COPY . .\n ---> d2774aad4a75\nStep 11/16 : RUN CGO_ENABLED=0 go build -o /go/bin/kindnetd ./cmd/kindnetd\n ---> Running in 42d3ca7d388c\n\u001b[91mgo: downloading github.com/coreos/go-iptables v0.6.0\n\u001b[0m\u001b[91mgo: downloading k8s.io/api v0.24.2\n\u001b[0m\u001b[91mgo: downloading k8s.io/apimachinery v0.24.2\n\u001b[0m\u001b[91mgo: downloading k8s.io/klog/v2 v2.70.0\ngo: downloading k8s.io/client-go v0.24.2\n\u001b[0m\u001b[91mgo: downloading github.com/pkg/errors v0.9.1\n\u001b[0m\u001b[91mgo: downloading github.com/vishvananda/netlink v1.1.0\n\u001b[0m\u001b[91mgo: downloading golang.org/x/sys v0.0.0-20220209214540-3681064d5158\ngo: downloading github.com/vishvananda/netns v0.0.0-20191106174202-0a2b9b5464df\n\u001b[0m\u001b[91mgo: downloading github.com/go-logr/logr v1.2.0\n\u001b[0m\u001b[91mgo: downloading github.com/gogo/protobuf v1.3.2\ngo: downloading github.com/google/gofuzz v1.1.0\n\u001b[0m\u001b[91mgo: downloading k8s.io/utils v0.0.0-20220210201930-3a6ce19ff2f9\n\u001b[0m\u001b[91mgo: downloading gopkg.in/inf.v0 v0.9.1\n\u001b[0m\u001b[91mgo: downloading golang.org/x/net v0.0.0-20220127200216-cd36cc0744dd\n\u001b[0m\u001b[91mgo: downloading sigs.k8s.io/structured-merge-diff/v4 v4.2.1\n\u001b[0m\u001b[91mgo: downloading sigs.k8s.io/json v0.0.0-20211208200746-9f7c6b3444d2\n\u001b[0m\u001b[91mgo: downloading gopkg.in/yaml.v2 v2.4.0\ngo: downloading github.com/json-iterator/go v1.1.12\n\u001b[0m\u001b[91mgo: downloading github.com/modern-go/reflect2 v1.0.2\n\u001b[0m\u001b[91mgo: downloading github.com/modern-go/concurrent v0.0.0-20180306012644-bacd9c7ef1dd\n\u001b[0m\u001b[91mgo: downloading golang.org/x/text v0.3.7\n\u001b[0m\u001b[91mgo: downloading github.com/golang/protobuf v1.5.2\ngo: downloading github.com/google/gnostic v0.5.7-v3refs\n\u001b[0m\u001b[91mgo: downloading golang.org/x/time v0.0.0-20220210224613-90d013bbcef8\n\u001b[0m\u001b[91mgo: downloading google.golang.org/protobuf v1.27.1\n\u001b[0m\u001b[91mgo: downloading k8s.io/kube-openapi v0.0.0-20220328201542-3ee0da9b0b42\n\u001b[0m\u001b[91mgo: downloading github.com/davecgh/go-spew v1.1.1\n\u001b[0m\u001b[91mgo: downloading golang.org/x/term v0.0.0-20210927222741-03fcf44c2211\n\u001b[0m\u001b[91mgo: downloading sigs.k8s.io/yaml v1.2.0\n\u001b[0m\u001b[91mgo: downloading golang.org/x/oauth2 v0.0.0-20211104180415-d3ed0bb246c8\n\u001b[0m\u001b[91mgo: downloading gopkg.in/yaml.v3 v3.0.1\n\u001b[0m\u001b[91mgo: downloading github.com/munnerz/goautoneg v0.0.0-20191010083416-a7dc8b61c822\n\u001b[0m\u001b[91mgo: downloading github.com/emicklei/go-restful v2.9.5+incompatible\n\u001b[0m\u001b[91mgo: downloading github.com/go-openapi/swag v0.19.14\ngo: downloading github.com/go-openapi/jsonreference v0.19.5\n\u001b[0m\u001b[91mgo: downloading github.com/go-openapi/jsonpointer v0.19.5\n\u001b[0m\u001b[91mgo: downloading github.com/PuerkitoBio/purell v1.1.1\n\u001b[0m\u001b[91mgo: downloading github.com/mailru/easyjson v0.7.6\n\u001b[0m\u001b[91mgo: downloading github.com/PuerkitoBio/urlesc v0.0.0-20170810143723-de5bf2ad4578\n\u001b[0m\u001b[91mgo: downloading github.com/josharian/intern v1.0.0\n\u001b[0mRemoving intermediate container 42d3ca7d388c\n ---> 8f2962ac2d2e\nStep 12/16 : RUN echo \"Installing CNI binaries ...\"     && export CNI_TARBALL=\"${CNI_VERSION}/cni-plugins-linux-${GOARCH}-${CNI_VERSION}.tgz\"     && export CNI_URL=\"https://github.com/containernetworking/plugins/releases/download/${CNI_TARBALL}\"     && curl -sSL --retry 5 --output /tmp/cni.tgz \"${CNI_URL}\"     && mkdir -p /opt/cni/bin     && tar -C /opt/cni/bin -xzf /tmp/cni.tgz     && rm -rf /tmp/cni.tgz     && find /opt/cni/bin -type f -not \\(          -iname host-local          -o -iname ptp          -o -iname bridge          -o -iname portmap          -o -iname loopback       \\)       -delete\n ---> Running in f4c133922413\nInstalling CNI binaries ...\nRemoving intermediate container f4c133922413\n ---> 5d0a82fe1b17\nStep 13/16 : FROM registry.k8s.io/build-image/debian-iptables:bullseye-v1.4.0\nbullseye-v1.4.0: Pulling from build-image/debian-iptables\n51b0e3ff7517: Pulling fs layer\ndd22051c691b: Pulling fs layer\ndd22051c691b: Verifying Checksum\ndd22051c691b: Download complete\n51b0e3ff7517: Verifying Checksum\n51b0e3ff7517: Download complete\n51b0e3ff7517: Pull complete\ndd22051c691b: Pull complete\nDigest: sha256:272dec676cfca74ade797c0918494707a1d66240dfda761693cf527148eeccab\nStatus: Downloaded newer image for registry.k8s.io/build-image/debian-iptables:bullseye-v1.4.0\n ---> 92f512047023\nStep 14/16 : COPY --from=builder --chown=root:root /go/bin/kindnetd /bin/kindnetd\n ---> a006b0f186ba\nStep 15/16 : COPY --from=builder --chown=root:root /opt/cni/bin /opt/cni/bin\n ---> f9357ef080e1\nStep 16/16 : CMD [\"/bin/kindnetd\"]\n ---> Running in 79b427fb0788\nRemoving intermediate container 79b427fb0788\n ---> 1af1f3e428b7\nSuccessfully built 1af1f3e428b7\nSuccessfully tagged kindnet:latest\n","stderr":"","imageSize":127994548},"repair":{"violations":[{"name":"curlUseFlagF","position":{"start":33,"end":33,"columnStart":7,"columnEnd":61}}],"repairedDockerfile":"# Copyright 2019 The Kubernetes Authors.\n#\n# Licensed under the Apache License, Version 2.0 (the \"License\");\n# you may not use this file except in compliance with the License.\n# You may obtain a copy of the License at\n#\n#     http://www.apache.org/licenses/LICENSE-2.0\n#\n# Unless required by applicable law or agreed to in writing, software\n# distributed under the License is distributed on an \"AS IS\" BASIS,\n# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n# See the License for the specific language governing permissions and\n# limitations under the License.\n\nARG GOARCH=\"amd64\"\n# STEP 1: Build kindnetd binary\nFROM golang:1.18 AS builder\n# golang envs\nARG GOARCH=\"amd64\"\nARG CNI_VERSION=\"v1.1.1\"\nARG GOOS=linux\nENV CGO_ENABLED=0\nENV GO111MODULE=\"on\"\nENV GOPROXY=https://proxy.golang.org\n# copy in sources\nWORKDIR /src\nCOPY . .\n# build\nRUN CGO_ENABLED=0 go build -o /go/bin/kindnetd ./cmd/kindnetd\n# Install CNI plugins\nRUN echo \"Installing CNI binaries ...\" \\\n    && export CNI_TARBALL=\"${CNI_VERSION}/cni-plugins-linux-${GOARCH}-${CNI_VERSION}.tgz\" \\\n    && export CNI_URL=\"https://github.com/containernetworking/plugins/releases/download/${CNI_TARBALL}\" \\\n    && curl -f -sSL --retry 5 --output /tmp/cni.tgz \"${CNI_URL}\" \\\n    && mkdir -p /opt/cni/bin \\\n    && tar -C /opt/cni/bin -xzf /tmp/cni.tgz \\\n    && rm -rf /tmp/cni.tgz \\\n    && find /opt/cni/bin -type f -not \\( \\\n         -iname host-local \\\n         -o -iname ptp \\\n         -o -iname bridge \\\n         -o -iname portmap \\\n         -o -iname loopback \\\n      \\) \\\n      -delete\n# STEP 2: Build small image\nFROM registry.k8s.io/build-image/debian-iptables:bullseye-v1.4.0\nCOPY --from=builder --chown=root:root /go/bin/kindnetd /bin/kindnetd\nCOPY --from=builder --chown=root:root /opt/cni/bin /opt/cni/bin\nCMD [\"/bin/kindnetd\"]\n"},"repairedBuild":{"startTimestamp":1672710370279,"endTimestamp":1672710468683,"error":null,"stdout":"Sending build context to Docker daemon    258kB\r\r\nStep 1/16 : ARG GOARCH=\"amd64\"\nStep 2/16 : FROM golang:1.18 AS builder\n ---> fffd0d9a59da\nStep 3/16 : ARG GOARCH=\"amd64\"\n ---> Running in c92a7cf93f13\nRemoving intermediate container c92a7cf93f13\n ---> 31925781ee15\nStep 4/16 : ARG CNI_VERSION=\"v1.1.1\"\n ---> Running in a9b878486331\nRemoving intermediate container a9b878486331\n ---> 826b6f8af7da\nStep 5/16 : ARG GOOS=linux\n ---> Running in 8e9c9551e8c8\nRemoving intermediate container 8e9c9551e8c8\n ---> b2ec4468089c\nStep 6/16 : ENV CGO_ENABLED=0\n ---> Running in ffc71ef50ad1\nRemoving intermediate container ffc71ef50ad1\n ---> 31a6d81616cf\nStep 7/16 : ENV GO111MODULE=\"on\"\n ---> Running in 16589e9c427f\nRemoving intermediate container 16589e9c427f\n ---> e4a53a34f45e\nStep 8/16 : ENV GOPROXY=https://proxy.golang.org\n ---> Running in a8d66489e1b1\nRemoving intermediate container a8d66489e1b1\n ---> ef7aaa8775a5\nStep 9/16 : WORKDIR /src\n ---> Running in 70a6422abbaf\nRemoving intermediate container 70a6422abbaf\n ---> 87c5bbd737f3\nStep 10/16 : COPY . .\n ---> 4b6b4f0c2975\nStep 11/16 : RUN CGO_ENABLED=0 go build -o /go/bin/kindnetd ./cmd/kindnetd\n ---> Running in 55f6f698ac4a\n\u001b[91mgo: downloading k8s.io/apimachinery v0.24.2\n\u001b[0m\u001b[91mgo: downloading k8s.io/client-go v0.24.2\n\u001b[0m\u001b[91mgo: downloading k8s.io/klog/v2 v2.70.0\n\u001b[0m\u001b[91mgo: downloading github.com/pkg/errors v0.9.1\n\u001b[0m\u001b[91mgo: downloading github.com/vishvananda/netlink v1.1.0\n\u001b[0m\u001b[91mgo: downloading k8s.io/api v0.24.2\ngo: downloading github.com/coreos/go-iptables v0.6.0\n\u001b[0m\u001b[91mgo: downloading github.com/go-logr/logr v1.2.0\n\u001b[0m\u001b[91mgo: downloading golang.org/x/sys v0.0.0-20220209214540-3681064d5158\n\u001b[0m\u001b[91mgo: downloading github.com/vishvananda/netns v0.0.0-20191106174202-0a2b9b5464df\n\u001b[0m\u001b[91mgo: downloading github.com/gogo/protobuf v1.3.2\ngo: downloading github.com/google/gofuzz v1.1.0\n\u001b[0m\u001b[91mgo: downloading k8s.io/utils v0.0.0-20220210201930-3a6ce19ff2f9\n\u001b[0m\u001b[91mgo: downloading golang.org/x/net v0.0.0-20220127200216-cd36cc0744dd\n\u001b[0m\u001b[91mgo: downloading gopkg.in/inf.v0 v0.9.1\ngo: downloading sigs.k8s.io/structured-merge-diff/v4 v4.2.1\ngo: downloading sigs.k8s.io/json v0.0.0-20211208200746-9f7c6b3444d2\n\u001b[0m\u001b[91mgo: downloading github.com/json-iterator/go v1.1.12\ngo: downloading gopkg.in/yaml.v2 v2.4.0\n\u001b[0m\u001b[91mgo: downloading github.com/modern-go/reflect2 v1.0.2\ngo: downloading github.com/modern-go/concurrent v0.0.0-20180306012644-bacd9c7ef1dd\n\u001b[0m\u001b[91mgo: downloading golang.org/x/text v0.3.7\n\u001b[0m\u001b[91mgo: downloading github.com/golang/protobuf v1.5.2\n\u001b[0m\u001b[91mgo: downloading github.com/google/gnostic v0.5.7-v3refs\n\u001b[0m\u001b[91mgo: downloading golang.org/x/time v0.0.0-20220210224613-90d013bbcef8\n\u001b[0m\u001b[91mgo: downloading github.com/davecgh/go-spew v1.1.1\n\u001b[0m\u001b[91mgo: downloading golang.org/x/term v0.0.0-20210927222741-03fcf44c2211\n\u001b[0m\u001b[91mgo: downloading golang.org/x/oauth2 v0.0.0-20211104180415-d3ed0bb246c8\ngo: downloading google.golang.org/protobuf v1.27.1\n\u001b[0m\u001b[91mgo: downloading k8s.io/kube-openapi v0.0.0-20220328201542-3ee0da9b0b42\n\u001b[0m\u001b[91mgo: downloading sigs.k8s.io/yaml v1.2.0\n\u001b[0m\u001b[91mgo: downloading gopkg.in/yaml.v3 v3.0.1\n\u001b[0m\u001b[91mgo: downloading github.com/munnerz/goautoneg v0.0.0-20191010083416-a7dc8b61c822\n\u001b[0m\u001b[91mgo: downloading github.com/emicklei/go-restful v2.9.5+incompatible\n\u001b[0m\u001b[91mgo: downloading github.com/go-openapi/jsonreference v0.19.5\n\u001b[0m\u001b[91mgo: downloading github.com/go-openapi/swag v0.19.14\n\u001b[0m\u001b[91mgo: downloading github.com/go-openapi/jsonpointer v0.19.5\n\u001b[0m\u001b[91mgo: downloading github.com/PuerkitoBio/purell v1.1.1\n\u001b[0m\u001b[91mgo: downloading github.com/mailru/easyjson v0.7.6\n\u001b[0m\u001b[91mgo: downloading github.com/PuerkitoBio/urlesc v0.0.0-20170810143723-de5bf2ad4578\n\u001b[0m\u001b[91mgo: downloading github.com/josharian/intern v1.0.0\n\u001b[0mRemoving intermediate container 55f6f698ac4a\n ---> 930921bbbf58\nStep 12/16 : RUN echo \"Installing CNI binaries ...\"     && export CNI_TARBALL=\"${CNI_VERSION}/cni-plugins-linux-${GOARCH}-${CNI_VERSION}.tgz\"     && export CNI_URL=\"https://github.com/containernetworking/plugins/releases/download/${CNI_TARBALL}\"     && curl -f -sSL --retry 5 --output /tmp/cni.tgz \"${CNI_URL}\"     && mkdir -p /opt/cni/bin     && tar -C /opt/cni/bin -xzf /tmp/cni.tgz     && rm -rf /tmp/cni.tgz     && find /opt/cni/bin -type f -not \\(          -iname host-local          -o -iname ptp          -o -iname bridge          -o -iname portmap          -o -iname loopback       \\)       -delete\n ---> Running in 27a15a1815e5\nInstalling CNI binaries ...\nRemoving intermediate container 27a15a1815e5\n ---> a534e17cc926\nStep 13/16 : FROM registry.k8s.io/build-image/debian-iptables:bullseye-v1.4.0\n ---> 92f512047023\nStep 14/16 : COPY --from=builder --chown=root:root /go/bin/kindnetd /bin/kindnetd\n ---> c1d7eff05054\nStep 15/16 : COPY --from=builder --chown=root:root /opt/cni/bin /opt/cni/bin\n ---> 51759ec2f609\nStep 16/16 : CMD [\"/bin/kindnetd\"]\n ---> Running in 17b3b0f340c2\nRemoving intermediate container 17b3b0f340c2\n ---> 7e4372cacfef\nSuccessfully built 7e4372cacfef\nSuccessfully tagged kindnet:latest\n","stderr":"","imageSize":127994548},"endTime":1672710468987}