{"repository":"https://github.com/gnehs/pokaplayer","dockerfilePath":"Dockerfile","startTime":1672367303336,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/gnehs/pokaplayer'...\n","error":null,"commit":"25e263b21a66bb74c49de7b484d23ed41e96a6bb"},"originalBuild":{"startTimestamp":1672367304318,"endTimestamp":1672367366505,"error":null,"stdout":"Sending build context to Docker daemon  2.889MB\r\r\nStep 1/8 : FROM node:14-alpine3.15\n14-alpine3.15: Pulling from library/node\n9621f1afde84: Pulling fs layer\nd73bf3671585: Pulling fs layer\n8a386db6482e: Pulling fs layer\nb583706c415a: Pulling fs layer\n9621f1afde84: Verifying Checksum\n9621f1afde84: Download complete\n8a386db6482e: Verifying Checksum\n8a386db6482e: Download complete\n9621f1afde84: Pull complete\nb583706c415a: Verifying Checksum\nb583706c415a: Download complete\nd73bf3671585: Verifying Checksum\nd73bf3671585: Download complete\nd73bf3671585: Pull complete\n8a386db6482e: Pull complete\nb583706c415a: Pull complete\nDigest: sha256:e05affcbacf8fadfe605dd64a0cdd94f27c9357a9af16237feeac7cce58753bd\nStatus: Downloaded newer image for node:14-alpine3.15\n ---> 6dad24e1870b\nStep 2/8 : WORKDIR /app\n ---> Running in ad299060172e\nRemoving intermediate container ad299060172e\n ---> 25bdddf2e124\nStep 3/8 : RUN apk add git && git clone https://github.com/gnehs/Pokaplayer .\n ---> Running in af048141480e\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/community/x86_64/APKINDEX.tar.gz\n(1/7) Installing ca-certificates (20220614-r0)\n(2/7) Installing brotli-libs (1.0.9-r5)\n(3/7) Installing nghttp2-libs (1.46.0-r0)\n(4/7) Installing libcurl (7.80.0-r5)\n(5/7) Installing expat (2.5.0-r0)\n(6/7) Installing pcre2 (10.40-r0)\n(7/7) Installing git (2.34.5-r0)\nExecuting busybox-1.34.1-r7.trigger\nExecuting ca-certificates-20220614-r0.trigger\nOK: 21 MiB in 23 packages\n\u001b[91mCloning into '.'...\n\u001b[0mRemoving intermediate container af048141480e\n ---> a2974a347b4e\nStep 4/8 : COPY . /app/\n ---> e650c0c49766\nStep 5/8 : RUN apk update && apk add --no-cache --virtual build-pkg build-base python2 && npm install --production --silent && apk del build-pkg\n ---> Running in b088cace41e4\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/community/x86_64/APKINDEX.tar.gz\nv3.15.6-230-gea65028923 [https://dl-cdn.alpinelinux.org/alpine/v3.15/main]\nv3.15.6-228-g9181cbcdab [https://dl-cdn.alpinelinux.org/alpine/v3.15/community]\nOK: 15859 distinct packages available\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/community/x86_64/APKINDEX.tar.gz\n(1/27) Installing binutils (2.37-r3)\n(2/27) Installing libmagic (5.41-r0)\n(3/27) Installing file (5.41-r0)\n(4/27) Installing libgomp (10.3.1_git20211027-r0)\n(5/27) Installing libatomic (10.3.1_git20211027-r0)\n(6/27) Installing libgphobos (10.3.1_git20211027-r0)\n(7/27) Installing gmp (6.2.1-r1)\n(8/27) Installing isl22 (0.22-r0)\n(9/27) Installing mpfr4 (4.1.0-r0)\n(10/27) Installing mpc1 (1.2.1-r0)\n(11/27) Installing gcc (10.3.1_git20211027-r0)\n(12/27) Installing musl-dev (1.2.2-r7)\n(13/27) Installing libc-dev (0.7.2-r3)\n(14/27) Installing g++ (10.3.1_git20211027-r0)\n(15/27) Installing make (4.3-r0)\n(16/27) Installing fortify-headers (1.1-r1)\n(17/27) Installing patch (2.7.6-r7)\n(18/27) Installing build-base (0.5-r3)\n(19/27) Installing libbz2 (1.0.8-r1)\n(20/27) Installing libffi (3.4.2-r1)\n(21/27) Installing gdbm (1.22-r0)\n(22/27) Installing ncurses-terminfo-base (6.3_p20211120-r1)\n(23/27) Installing ncurses-libs (6.3_p20211120-r1)\n(24/27) Installing readline (8.1.1-r0)\n(25/27) Installing sqlite-libs (3.36.0-r0)\n(26/27) Installing python2 (2.7.18-r4)\n(27/27) Installing build-pkg (20221230.022857)\nExecuting busybox-1.34.1-r7.trigger\nOK: 250 MiB in 50 packages\nadded 213 packages from 245 contributors and audited 311 packages in 4.737s\n\n23 packages are looking for funding\n  run `npm fund` for details\n\nfound 3 vulnerabilities (1 moderate, 2 high)\n  run `npm audit fix` to fix them, or `npm audit` for details\n(1/27) Purging build-pkg (20221230.022857)\n(2/27) Purging build-base (0.5-r3)\n(3/27) Purging file (5.41-r0)\n(4/27) Purging g++ (10.3.1_git20211027-r0)\n(5/27) Purging gcc (10.3.1_git20211027-r0)\n(6/27) Purging binutils (2.37-r3)\n(7/27) Purging libatomic (10.3.1_git20211027-r0)\n(8/27) Purging libgomp (10.3.1_git20211027-r0)\n(9/27) Purging libgphobos (10.3.1_git20211027-r0)\n(10/27) Purging make (4.3-r0)\n(11/27) Purging libc-dev (0.7.2-r3)\n(12/27) Purging musl-dev (1.2.2-r7)\n(13/27) Purging fortify-headers (1.1-r1)\n(14/27) Purging patch (2.7.6-r7)\n(15/27) Purging python2 (2.7.18-r4)\n(16/27) Purging libmagic (5.41-r0)\n(17/27) Purging mpc1 (1.2.1-r0)\n(18/27) Purging mpfr4 (4.1.0-r0)\n(19/27) Purging isl22 (0.22-r0)\n(20/27) Purging gmp (6.2.1-r1)\n(21/27) Purging libbz2 (1.0.8-r1)\n(22/27) Purging libffi (3.4.2-r1)\n(23/27) Purging gdbm (1.22-r0)\n(24/27) Purging readline (8.1.1-r0)\n(25/27) Purging ncurses-libs (6.3_p20211120-r1)\n(26/27) Purging ncurses-terminfo-base (6.3_p20211120-r1)\n(27/27) Purging sqlite-libs (3.36.0-r0)\nExecuting busybox-1.34.1-r7.trigger\nOK: 21 MiB in 23 packages\nRemoving intermediate container b088cace41e4\n ---> be591dfadc17\nStep 6/8 : ENV NODE_ENV=production\n ---> Running in 925a6e3b8882\nRemoving intermediate container 925a6e3b8882\n ---> 0f26b6f708ab\nStep 7/8 : EXPOSE 3000\n ---> Running in 5e5fb0450036\nRemoving intermediate container 5e5fb0450036\n ---> 12289add852f\nStep 8/8 : CMD [\"npm\", \"start\"]\n ---> Running in 5c04372040cf\nRemoving intermediate container 5c04372040cf\n ---> 30e287ec2b44\nSuccessfully built 30e287ec2b44\nSuccessfully tagged pokaplayer:latest\n","stderr":"","imageSize":276176934},"repair":{"violations":[{"name":"npmCacheCleanAfterInstall","position":{"start":11,"end":11,"columnStart":0,"columnEnd":33}},{"name":"apkAddUseNoCache","position":{"start":5,"end":5,"columnStart":4,"columnEnd":15}}],"repairedDockerfile":"FROM node:14-alpine3.15\n\nWORKDIR /app\n\nRUN apk add --no-cache git && git clone https://github.com/gnehs/Pokaplayer .\n\nCOPY . /app/\n\nRUN apk update && \\\n apk add --no-cache --virtual build-pkg build-base python2 && \\\nnpm install --production --silent && \\\napk del build-pkg\n\n# 環境設定\nENV NODE_ENV=production\nEXPOSE 3000\n# 啟動\nCMD [\"npm\", \"start\"]\n\n"},"repairedBuild":{"startTimestamp":1672367366982,"endTimestamp":1672367462310,"error":null,"stdout":"Sending build context to Docker daemon  2.889MB\r\r\nStep 1/8 : FROM node:14-alpine3.15\n ---> 6dad24e1870b\nStep 2/8 : WORKDIR /app\n ---> Running in f843c4692406\nRemoving intermediate container f843c4692406\n ---> 6dbfb199c764\nStep 3/8 : RUN apk add --no-cache git && git clone https://github.com/gnehs/Pokaplayer .\n ---> Running in 1ced01f7dced\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/community/x86_64/APKINDEX.tar.gz\n(1/7) Installing ca-certificates (20220614-r0)\n(2/7) Installing brotli-libs (1.0.9-r5)\n(3/7) Installing nghttp2-libs (1.46.0-r0)\n(4/7) Installing libcurl (7.80.0-r5)\n(5/7) Installing expat (2.5.0-r0)\n(6/7) Installing pcre2 (10.40-r0)\n(7/7) Installing git (2.34.5-r0)\nExecuting busybox-1.34.1-r7.trigger\nExecuting ca-certificates-20220614-r0.trigger\nOK: 21 MiB in 23 packages\n\u001b[91mCloning into '.'...\n\u001b[0mRemoving intermediate container 1ced01f7dced\n ---> cbb90613b478\nStep 4/8 : COPY . /app/\n ---> ea649424801f\nStep 5/8 : RUN apk update &&  apk add --no-cache --virtual build-pkg build-base python2 && npm install --production --silent && apk del build-pkg\n ---> Running in ed1941fd6a36\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/community/x86_64/APKINDEX.tar.gz\nv3.15.6-230-gea65028923 [https://dl-cdn.alpinelinux.org/alpine/v3.15/main]\nv3.15.6-228-g9181cbcdab [https://dl-cdn.alpinelinux.org/alpine/v3.15/community]\nOK: 15859 distinct packages available\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/community/x86_64/APKINDEX.tar.gz\n(1/27) Installing binutils (2.37-r3)\n(2/27) Installing libmagic (5.41-r0)\n(3/27) Installing file (5.41-r0)\n(4/27) Installing libgomp (10.3.1_git20211027-r0)\n(5/27) Installing libatomic (10.3.1_git20211027-r0)\n(6/27) Installing libgphobos (10.3.1_git20211027-r0)\n(7/27) Installing gmp (6.2.1-r1)\n(8/27) Installing isl22 (0.22-r0)\n(9/27) Installing mpfr4 (4.1.0-r0)\n(10/27) Installing mpc1 (1.2.1-r0)\n(11/27) Installing gcc (10.3.1_git20211027-r0)\n(12/27) Installing musl-dev (1.2.2-r7)\n(13/27) Installing libc-dev (0.7.2-r3)\n(14/27) Installing g++ (10.3.1_git20211027-r0)\n(15/27) Installing make (4.3-r0)\n(16/27) Installing fortify-headers (1.1-r1)\n(17/27) Installing patch (2.7.6-r7)\n(18/27) Installing build-base (0.5-r3)\n(19/27) Installing libbz2 (1.0.8-r1)\n(20/27) Installing libffi (3.4.2-r1)\n(21/27) Installing gdbm (1.22-r0)\n(22/27) Installing ncurses-terminfo-base (6.3_p20211120-r1)\n(23/27) Installing ncurses-libs (6.3_p20211120-r1)\n(24/27) Installing readline (8.1.1-r0)\n(25/27) Installing sqlite-libs (3.36.0-r0)\n(26/27) Installing python2 (2.7.18-r4)\n(27/27) Installing build-pkg (20221230.023018)\nExecuting busybox-1.34.1-r7.trigger\nOK: 250 MiB in 50 packages\nadded 213 packages from 245 contributors and audited 311 packages in 5.303s\n\n23 packages are looking for funding\n  run `npm fund` for details\n\nfound 3 vulnerabilities (1 moderate, 2 high)\n  run `npm audit fix` to fix them, or `npm audit` for details\n(1/27) Purging build-pkg (20221230.023018)\n(2/27) Purging build-base (0.5-r3)\n(3/27) Purging file (5.41-r0)\n(4/27) Purging g++ (10.3.1_git20211027-r0)\n(5/27) Purging gcc (10.3.1_git20211027-r0)\n(6/27) Purging binutils (2.37-r3)\n(7/27) Purging libatomic (10.3.1_git20211027-r0)\n(8/27) Purging libgomp (10.3.1_git20211027-r0)\n(9/27) Purging libgphobos (10.3.1_git20211027-r0)\n(10/27) Purging make (4.3-r0)\n(11/27) Purging libc-dev (0.7.2-r3)\n(12/27) Purging musl-dev (1.2.2-r7)\n(13/27) Purging fortify-headers (1.1-r1)\n(14/27) Purging patch (2.7.6-r7)\n(15/27) Purging python2 (2.7.18-r4)\n(16/27) Purging libmagic (5.41-r0)\n(17/27) Purging mpc1 (1.2.1-r0)\n(18/27) Purging mpfr4 (4.1.0-r0)\n(19/27) Purging isl22 (0.22-r0)\n(20/27) Purging gmp (6.2.1-r1)\n(21/27) Purging libbz2 (1.0.8-r1)\n(22/27) Purging libffi (3.4.2-r1)\n(23/27) Purging gdbm (1.22-r0)\n(24/27) Purging readline (8.1.1-r0)\n(25/27) Purging ncurses-libs (6.3_p20211120-r1)\n(26/27) Purging ncurses-terminfo-base (6.3_p20211120-r1)\n(27/27) Purging sqlite-libs (3.36.0-r0)\nExecuting busybox-1.34.1-r7.trigger\nOK: 21 MiB in 23 packages\nRemoving intermediate container ed1941fd6a36\n ---> 09105b95a110\nStep 6/8 : ENV NODE_ENV=production\n ---> Running in 77d9158ba6f4\nRemoving intermediate container 77d9158ba6f4\n ---> bede4c400a5c\nStep 7/8 : EXPOSE 3000\n ---> Running in 24fb3994bc64\nRemoving intermediate container 24fb3994bc64\n ---> fb75876f3a5b\nStep 8/8 : CMD [\"npm\", \"start\"]\n ---> Running in d56488b4216b\nRemoving intermediate container d56488b4216b\n ---> 0b1c3e9f1613\nSuccessfully built 0b1c3e9f1613\nSuccessfully tagged pokaplayer:latest\n","stderr":"","imageSize":273881195},"endTime":1672367462872}