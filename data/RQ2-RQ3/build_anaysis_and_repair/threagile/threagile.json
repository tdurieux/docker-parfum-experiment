{"repository":"https://github.com/threagile/threagile","dockerfilePath":"Dockerfile","startTime":1672667778256,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/threagile/threagile'...\n","error":null,"commit":"3db6e96abb0a2d179eb24f03676e2fbc3fbd6a56"},"originalBuild":{"startTimestamp":1672667779540,"endTimestamp":1672667906861,"error":null,"stdout":"Sending build context to Docker daemon  11.13MB\r\r\nStep 1/41 : FROM alpine/git as clone\nlatest: Pulling from alpine/git\nca7dd9ec2225: Already exists\neb878e0a08e4: Pulling fs layer\nb4f093b99828: Pulling fs layer\nb4f093b99828: Verifying Checksum\nb4f093b99828: Download complete\neb878e0a08e4: Verifying Checksum\neb878e0a08e4: Download complete\neb878e0a08e4: Pull complete\nb4f093b99828: Pull complete\nDigest: sha256:66b210a97bc07bfd4019826bcd13a488b371a6cbe2630a4b37d23275658bd3f2\nStatus: Downloaded newer image for alpine/git:latest\n ---> 22d84a66cda4\nStep 2/41 : WORKDIR /app\n ---> Running in 3b115f60831a\nRemoving intermediate container 3b115f60831a\n ---> 2d6c3f21b34c\nStep 3/41 : RUN git clone https://github.com/threagile/threagile.git\n ---> Running in 2a437b2895eb\n\u001b[91mCloning into 'threagile'...\n\u001b[0mRemoving intermediate container 2a437b2895eb\n ---> 41b749394118\nStep 4/41 : FROM golang as build\n ---> 6650307efe4a\nStep 5/41 : ENV GO111MODULE=on\n ---> Running in 5cd012cd2c78\nRemoving intermediate container 5cd012cd2c78\n ---> b8bf070e907e\nStep 6/41 : WORKDIR /app\n ---> Running in b18d76f1a91c\nRemoving intermediate container b18d76f1a91c\n ---> bb44b17f5c40\nStep 7/41 : COPY --from=clone /app/threagile /app\n ---> 1ffc7e237e7c\nStep 8/41 : RUN go version\n ---> Running in adf696dff454\ngo version go1.19.4 linux/amd64\nRemoving intermediate container adf696dff454\n ---> e7b64aedf27f\nStep 9/41 : RUN\tgo test ./...\n ---> Running in 7f4a319b12ea\n\u001b[91mgo: downloading github.com/jung-kurt/gofpdf v1.16.2\n\u001b[0m\u001b[91mgo: downloading github.com/wcharczuk/go-chart v2.0.1+incompatible\n\u001b[0m\u001b[91mgo: downloading github.com/xuri/excelize/v2 v2.4.1\n\u001b[0m\u001b[91mgo: downloading github.com/gin-gonic/gin v1.7.3\ngo: downloading github.com/google/uuid v1.3.0\n\u001b[0m\u001b[91mgo: downloading golang.org/x/crypto v0.0.0-20210711020723-a769d52b0f97\n\u001b[0m\u001b[91mgo: downloading gopkg.in/yaml.v3 v3.0.0-20210107192922-496545a6307b\n\u001b[0m\u001b[91mgo: downloading github.com/mohae/deepcopy v0.0.0-20170929034955-c48cc78d4826\ngo: downloading github.com/richardlehane/mscfb v1.0.3\ngo: downloading golang.org/x/net v0.0.0-20210726213435-c6fcb2dbf985\ngo: downloading golang.org/x/text v0.3.6\n\u001b[0m\u001b[91mgo: downloading github.com/xuri/efp v0.0.0-20210322160811-ab561f5b45e3\n\u001b[0m\u001b[91mgo: downloading github.com/richardlehane/msoleps v1.0.1\n\u001b[0m\u001b[91mgo: downloading github.com/gin-contrib/sse v0.1.0\n\u001b[0m\u001b[91mgo: downloading github.com/mattn/go-isatty v0.0.13\n\u001b[0m\u001b[91mgo: downloading gopkg.in/yaml.v2 v2.4.0\ngo: downloading github.com/golang/protobuf v1.5.2\n\u001b[0m\u001b[91mgo: downloading github.com/ugorji/go/codec v1.1.7\n\u001b[0m\u001b[91mgo: downloading github.com/go-playground/validator/v10 v10.8.0\n\u001b[0m\u001b[91mgo: downloading golang.org/x/sys v0.0.0-20210630005230-0f9fa26af87c\n\u001b[0m\u001b[91mgo: downloading google.golang.org/protobuf v1.27.1\n\u001b[0m\u001b[91mgo: downloading github.com/ugorji/go v1.1.7\n\u001b[0m\u001b[91mgo: downloading github.com/phpdave11/gofpdi v1.0.13\n\u001b[0m\u001b[91mgo: downloading github.com/pkg/errors v0.9.1\n\u001b[0m\u001b[91mgo: downloading github.com/go-playground/universal-translator v0.17.0\ngo: downloading github.com/leodido/go-urn v1.2.1\n\u001b[0m\u001b[91mgo: downloading github.com/go-playground/locales v0.13.0\n\u001b[0m\u001b[91mgo: downloading golang.org/x/image v0.0.0-20210628002857-a66eb6448b8d\ngo: downloading github.com/golang/freetype v0.0.0-20170609003504-e2365dfdc4a0\n\u001b[0m?   \tgithub.com/threagile/threagile\t[no test files]\n?   \tgithub.com/threagile/threagile/colors\t[no test files]\n?   \tgithub.com/threagile/threagile/macros/built-in/add-build-pipeline\t[no test files]\n?   \tgithub.com/threagile/threagile/macros/built-in/add-vault\t[no test files]\n?   \tgithub.com/threagile/threagile/macros/built-in/pretty-print\t[no test files]\n?   \tgithub.com/threagile/threagile/macros/built-in/remove-unused-tags\t[no test files]\n?   \tgithub.com/threagile/threagile/macros/built-in/seed-risk-tracking\t[no test files]\n?   \tgithub.com/threagile/threagile/macros/built-in/seed-tags\t[no test files]\n?   \tgithub.com/threagile/threagile/model\t[no test files]\n?   \tgithub.com/threagile/threagile/raa/dummy\t[no test files]\n?   \tgithub.com/threagile/threagile/raa/raa\t[no test files]\n?   \tgithub.com/threagile/threagile/report\t[no test files]\n?   \tgithub.com/threagile/threagile/risks/built-in/accidental-secret-leak\t[no test files]\n?   \tgithub.com/threagile/threagile/risks/built-in/code-backdooring\t[no test files]\n?   \tgithub.com/threagile/threagile/risks/built-in/container-baseimage-backdooring\t[no test files]\n?   \tgithub.com/threagile/threagile/risks/built-in/container-platform-escape\t[no test files]\n?   \tgithub.com/threagile/threagile/risks/built-in/cross-site-request-forgery\t[no test files]\n?   \tgithub.com/threagile/threagile/risks/built-in/cross-site-scripting\t[no test files]\n?   \tgithub.com/threagile/threagile/risks/built-in/dos-risky-access-across-trust-boundary\t[no test files]\n?   \tgithub.com/threagile/threagile/risks/built-in/incomplete-model\t[no test files]\n?   \tgithub.com/threagile/threagile/risks/built-in/ldap-injection\t[no test files]\n?   \tgithub.com/threagile/threagile/risks/built-in/missing-authentication\t[no test files]\n?   \tgithub.com/threagile/threagile/risks/built-in/missing-authentication-second-factor\t[no test files]\n?   \tgithub.com/threagile/threagile/risks/built-in/missing-build-infrastructure\t[no test files]\n?   \tgithub.com/threagile/threagile/risks/built-in/missing-cloud-hardening\t[no test files]\n?   \tgithub.com/threagile/threagile/risks/built-in/missing-file-validation\t[no test files]\n?   \tgithub.com/threagile/threagile/risks/built-in/missing-hardening\t[no test files]\n?   \tgithub.com/threagile/threagile/risks/built-in/missing-identity-propagation\t[no test files]\n?   \tgithub.com/threagile/threagile/risks/built-in/missing-identity-provider-isolation\t[no test files]\n?   \tgithub.com/threagile/threagile/risks/built-in/missing-identity-store\t[no test files]\n?   \tgithub.com/threagile/threagile/risks/built-in/missing-network-segmentation\t[no test files]\n?   \tgithub.com/threagile/threagile/risks/built-in/missing-vault\t[no test files]\n?   \tgithub.com/threagile/threagile/risks/built-in/missing-vault-isolation\t[no test files]\n?   \tgithub.com/threagile/threagile/risks/built-in/missing-waf\t[no test files]\n?   \tgithub.com/threagile/threagile/risks/built-in/mixed-targets-on-shared-runtime\t[no test files]\n?   \tgithub.com/threagile/threagile/risks/built-in/path-traversal\t[no test files]\n?   \tgithub.com/threagile/threagile/risks/built-in/push-instead-of-pull-deployment\t[no test files]\n?   \tgithub.com/threagile/threagile/risks/built-in/search-query-injection\t[no test files]\n?   \tgithub.com/threagile/threagile/risks/built-in/server-side-request-forgery\t[no test files]\n?   \tgithub.com/threagile/threagile/risks/built-in/service-registry-poisoning\t[no test files]\n?   \tgithub.com/threagile/threagile/risks/built-in/sql-nosql-injection\t[no test files]\n?   \tgithub.com/threagile/threagile/risks/built-in/unchecked-deployment\t[no test files]\n?   \tgithub.com/threagile/threagile/risks/built-in/unencrypted-asset\t[no test files]\n?   \tgithub.com/threagile/threagile/risks/built-in/unencrypted-communication\t[no test files]\n?   \tgithub.com/threagile/threagile/risks/built-in/unguarded-access-from-internet\t[no test files]\n?   \tgithub.com/threagile/threagile/risks/built-in/unguarded-direct-datastore-access\t[no test files]\n?   \tgithub.com/threagile/threagile/risks/built-in/unnecessary-communication-link\t[no test files]\n?   \tgithub.com/threagile/threagile/risks/built-in/unnecessary-data-asset\t[no test files]\n?   \tgithub.com/threagile/threagile/risks/built-in/unnecessary-data-transfer\t[no test files]\n?   \tgithub.com/threagile/threagile/risks/built-in/unnecessary-technical-asset\t[no test files]\n?   \tgithub.com/threagile/threagile/risks/built-in/untrusted-deserialization\t[no test files]\n?   \tgithub.com/threagile/threagile/risks/built-in/wrong-communication-link-content\t[no test files]\n?   \tgithub.com/threagile/threagile/risks/built-in/wrong-trust-boundary-content\t[no test files]\n?   \tgithub.com/threagile/threagile/risks/built-in/xml-external-entity\t[no test files]\n?   \tgithub.com/threagile/threagile/risks/custom/demo\t[no test files]\nRemoving intermediate container 7f4a319b12ea\n ---> 5fe1d40888ed\nStep 10/41 : RUN GOOS=linux go build -a -trimpath -ldflags=\"-s -w -X main.buildTimestamp=$(date '+%Y%m%d%H%M%S')\" -gcflags=\"all=-trimpath=/src\" -asmflags=\"all=-trimpath=/src\" -buildmode=plugin -o raa.so raa/raa/raa.go\n ---> Running in 9d1c15328787\nRemoving intermediate container 9d1c15328787\n ---> 613cb6167cdc\nStep 11/41 : RUN GOOS=linux go build -a -trimpath -ldflags=\"-s -w -X main.buildTimestamp=$(date '+%Y%m%d%H%M%S')\" -gcflags=\"all=-trimpath=/src\" -asmflags=\"all=-trimpath=/src\" -buildmode=plugin -o dummy.so raa/dummy/dummy.go\n ---> Running in 0e6474cc04e5\nRemoving intermediate container 0e6474cc04e5\n ---> c6ed6860b6c5\nStep 12/41 : RUN GOOS=linux go build -a -trimpath -ldflags=\"-s -w -X main.buildTimestamp=$(date '+%Y%m%d%H%M%S')\" -gcflags=\"all=-trimpath=/src\" -asmflags=\"all=-trimpath=/src\" -buildmode=plugin -o demo-rule.so risks/custom/demo/demo-rule.go\n ---> Running in 32d86839d00b\nRemoving intermediate container 32d86839d00b\n ---> 35278be24a4b\nStep 13/41 : RUN GOOS=linux go build -a -trimpath -ldflags=\"-s -w -X main.buildTimestamp=$(date '+%Y%m%d%H%M%S')\" -gcflags=\"all=-trimpath=/src\" -asmflags=\"all=-trimpath=/src\" -o threagile\n ---> Running in 3af0f8d71190\nRemoving intermediate container 3af0f8d71190\n ---> 144aa96e86f2\nStep 14/41 : FROM alpine\n ---> 49176f190c7e\nStep 15/41 : LABEL type=\"threagile\"\n ---> Running in 6e128ead08c4\nRemoving intermediate container 6e128ead08c4\n ---> 52e50f1c778b\nStep 16/41 : RUN apk add ca-certificates\n ---> Running in 84688c733258\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/1) Installing ca-certificates (20220614-r3)\nExecuting busybox-1.35.0-r29.trigger\nExecuting ca-certificates-20220614-r3.trigger\nOK: 8 MiB in 16 packages\nRemoving intermediate container 84688c733258\n ---> b1ff723db903\nStep 17/41 : RUN apk add --update --no-cache graphviz ttf-freefont\n ---> Running in 270c4393cae5\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/49) Installing libxau (1.0.10-r0)\n(2/49) Installing libmd (1.0.4-r0)\n(3/49) Installing libbsd (0.11.7-r0)\n(4/49) Installing libxdmcp (1.1.4-r0)\n(5/49) Installing libxcb (1.15-r0)\n(6/49) Installing libx11 (1.8.3-r0)\n(7/49) Installing libxext (1.3.5-r0)\n(8/49) Installing libxrender (0.9.11-r0)\n(9/49) Installing libexpat (2.5.0-r0)\n(10/49) Installing brotli-libs (1.0.9-r9)\n(11/49) Installing libbz2 (1.0.8-r4)\n(12/49) Installing libpng (1.6.38-r0)\n(13/49) Installing freetype (2.12.1-r0)\n(14/49) Installing fontconfig (2.14.1-r0)\n(15/49) Installing pixman (0.42.2-r0)\n(16/49) Installing cairo (1.17.6-r3)\n(17/49) Installing graphviz-libs (7.0.5-r0)\n(18/49) Installing libgcc (12.2.1_git20220924-r4)\n(19/49) Installing libice (1.0.10-r1)\n(20/49) Installing libuuid (2.38.1-r0)\n(21/49) Installing libsm (1.2.3-r1)\n(22/49) Installing libxt (1.2.1-r0)\n(23/49) Installing libxpm (3.5.14-r0)\n(24/49) Installing aom-libs (3.5.0-r0)\n(25/49) Installing libdav1d (1.0.0-r2)\n(26/49) Installing libavif (0.11.1-r0)\n(27/49) Installing libjpeg-turbo (2.1.4-r0)\n(28/49) Installing xz-libs (5.2.9-r0)\n(29/49) Installing libwebp (1.2.4-r1)\n(30/49) Installing zstd-libs (1.5.2-r9)\n(31/49) Installing tiff (4.4.0-r1)\n(32/49) Installing libgd (2.3.3-r3)\n(33/49) Installing libffi (3.4.4-r0)\n(34/49) Installing libintl (0.21.1-r1)\n(35/49) Installing libblkid (2.38.1-r0)\n(36/49) Installing libmount (2.38.1-r0)\n(37/49) Installing pcre2 (10.42-r0)\n(38/49) Installing glib (2.74.4-r0)\n(39/49) Installing libxft (2.3.7-r0)\n(40/49) Installing fribidi (1.0.12-r0)\n(41/49) Installing graphite2 (1.3.14-r2)\n(42/49) Installing harfbuzz (5.3.1-r1)\n(43/49) Installing pango (1.50.12-r0)\n(44/49) Installing libstdc++ (12.2.1_git20220924-r4)\n(45/49) Installing graphviz (7.0.5-r0)\n(46/49) Installing encodings (1.0.6-r0)\n(47/49) Installing libfontenc (1.1.6-r0)\n(48/49) Installing mkfontscale (1.2.2-r1)\n(49/49) Installing font-freefont (20120503-r3)\nExecuting busybox-1.35.0-r29.trigger\nExecuting fontconfig-2.14.1-r0.trigger\nExecuting graphviz-7.0.5-r0.trigger\nExecuting mkfontscale-1.2.2-r1.trigger\nOK: 50 MiB in 65 packages\nRemoving intermediate container 270c4393cae5\n ---> c4180bf029cf\nStep 18/41 : RUN apk add libc6-compat\n ---> Running in f7b5ebb59381\n(1/1) Installing libc6-compat (1.2.3-r4)\nOK: 50 MiB in 66 packages\nRemoving intermediate container f7b5ebb59381\n ---> 1e9619fb97ea\nStep 19/41 : RUN rm -rf /var/cache/apk/*\n ---> Running in 294bab2f821a\nRemoving intermediate container 294bab2f821a\n ---> 4556235151b9\nStep 20/41 : WORKDIR /app\n ---> Running in 20bbbb402e22\nRemoving intermediate container 20bbbb402e22\n ---> 0a1fbd175f36\nStep 21/41 : COPY --from=build /app/threagile /app/threagile\n ---> 30b7b94c2f8e\nStep 22/41 : COPY --from=build /app/raa.so /app/raa.so\n ---> d1061db14e17\nStep 23/41 : COPY --from=build /app/dummy.so /app/dummy.so\n ---> da69c79db8a1\nStep 24/41 : COPY --from=build /app/demo-rule.so /app/demo-rule.so\n ---> 89cae473a32f\nStep 25/41 : COPY --from=build /app/LICENSE.txt /app/LICENSE.txt\n ---> a348e63cf345\nStep 26/41 : COPY --from=build /app/report/template/background.pdf /app/background.pdf\n ---> 580d05ea1aec\nStep 27/41 : COPY --from=build /app/support/openapi.yaml /app/openapi.yaml\n ---> bdfd5b607c0a\nStep 28/41 : COPY --from=build /app/support/schema.json /app/schema.json\n ---> 82b346a327fe\nStep 29/41 : COPY --from=build /app/support/live-templates.txt /app/live-templates.txt\n ---> 7b266ea3a88f\nStep 30/41 : COPY --from=build /app/support/render-data-asset-diagram.sh /app/render-data-asset-diagram.sh\n ---> 98a9d25cdb95\nStep 31/41 : COPY --from=build /app/support/render-data-flow-diagram.sh /app/render-data-flow-diagram.sh\n ---> 2a19c49ad37e\nStep 32/41 : COPY --from=build /app/server /app/server\n ---> 22e6dbd4c2b2\nStep 33/41 : COPY --from=build /app/demo/example/threagile.yaml /app/threagile-example-model.yaml\n ---> f33bcbdf97f6\nStep 34/41 : COPY --from=build /app/demo/stub/threagile.yaml /app/threagile-stub-model.yaml\n ---> e881a0026837\nStep 35/41 : RUN mkdir /data\n ---> Running in b2d4789d2844\nRemoving intermediate container b2d4789d2844\n ---> 2e0c81aeedfc\nStep 36/41 : RUN chown -R 1000:1000 /app /data\n ---> Running in 2a511e5fdff6\nRemoving intermediate container 2a511e5fdff6\n ---> 9c93a9ea2b2a\nStep 37/41 : USER 1000:1000\n ---> Running in eb0fe109e539\nRemoving intermediate container eb0fe109e539\n ---> 5701ec4361ac\nStep 38/41 : ENV PATH=/app:$PATH\n ---> Running in 96a8a34eb0d4\nRemoving intermediate container 96a8a34eb0d4\n ---> 4b771873b4ba\nStep 39/41 : ENV GIN_MODE=release\n ---> Running in 7157d1604636\nRemoving intermediate container 7157d1604636\n ---> fb32e4236eac\nStep 40/41 : ENTRYPOINT [\"/app/threagile\"]\n ---> Running in 0ae7bad16e4f\nRemoving intermediate container 0ae7bad16e4f\n ---> 1447ba2a73d6\nStep 41/41 : CMD [\"-help\"]\n ---> Running in 3b19951a23f8\nRemoving intermediate container 3b19951a23f8\n ---> 0f542bdc62a9\nSuccessfully built 0f542bdc62a9\nSuccessfully tagged threagile:latest\n","stderr":"","imageSize":144293613},"repair":{"violations":[{"name":"apkAddUseNoCache","position":{"start":39,"end":39,"columnStart":4,"columnEnd":27}},{"name":"apkAddUseNoCache","position":{"start":43,"end":43,"columnStart":4,"columnEnd":24}}],"repairedDockerfile":"######\n## Stage 1: Clone the Git repository\n######\nFROM alpine/git as clone\nWORKDIR /app\nRUN git clone https://github.com/threagile/threagile.git\n\n\n\n\n######\n## Stage 2: Build application with Go's build tools\n######\nFROM golang as build\nENV GO111MODULE=on\n# https://stackoverflow.com/questions/36279253/go-compiled-binary-wont-run-in-an-alpine-docker-container-on-ubuntu-host\n#ENV CGO_ENABLED=0 # cannot be set as otherwise plugins don't run\nWORKDIR /app\nCOPY --from=clone /app/threagile /app\nRUN go version\nRUN\tgo test ./...\nRUN GOOS=linux go build -a -trimpath -ldflags=\"-s -w -X main.buildTimestamp=$(date '+%Y%m%d%H%M%S')\" -gcflags=\"all=-trimpath=/src\" -asmflags=\"all=-trimpath=/src\" -buildmode=plugin -o raa.so raa/raa/raa.go\nRUN GOOS=linux go build -a -trimpath -ldflags=\"-s -w -X main.buildTimestamp=$(date '+%Y%m%d%H%M%S')\" -gcflags=\"all=-trimpath=/src\" -asmflags=\"all=-trimpath=/src\" -buildmode=plugin -o dummy.so raa/dummy/dummy.go\nRUN GOOS=linux go build -a -trimpath -ldflags=\"-s -w -X main.buildTimestamp=$(date '+%Y%m%d%H%M%S')\" -gcflags=\"all=-trimpath=/src\" -asmflags=\"all=-trimpath=/src\" -buildmode=plugin -o demo-rule.so risks/custom/demo/demo-rule.go\nRUN GOOS=linux go build -a -trimpath -ldflags=\"-s -w -X main.buildTimestamp=$(date '+%Y%m%d%H%M%S')\" -gcflags=\"all=-trimpath=/src\" -asmflags=\"all=-trimpath=/src\" -o threagile\n# add the -race parameter to go build call in order to instrument with race condition detector: https://blog.golang.org/race-detector\n\n\n\n\n######\n## Stage 3: Make final small image\n######\nFROM alpine\n\n# label used in other scripts to filter\nLABEL type=\"threagile\"\n\n# add certificates\nRUN apk add --no-cache ca-certificates\n# add graphviz, fonts\nRUN apk add --update --no-cache graphviz ttf-freefont\n# https://stackoverflow.com/questions/66963068/docker-alpine-executable-binary-not-found-even-if-in-path\nRUN apk add --no-cache libc6-compat\n# https://stackoverflow.com/questions/34729748/installed-go-binary-not-found-in-path-on-alpine-linux-docker\n# RUN mkdir -p /lib64 && ln -s /lib/libc.musl-x86_64.so.1 /lib64/ld-linux-x86-64.so.2\n# clean apk cache\nRUN rm -rf /var/cache/apk/*\n\nWORKDIR /app\n\nCOPY --from=build /app/threagile /app/threagile\nCOPY --from=build /app/raa.so /app/raa.so\nCOPY --from=build /app/dummy.so /app/dummy.so\nCOPY --from=build /app/demo-rule.so /app/demo-rule.so\nCOPY --from=build /app/LICENSE.txt /app/LICENSE.txt\nCOPY --from=build /app/report/template/background.pdf /app/background.pdf\nCOPY --from=build /app/support/openapi.yaml /app/openapi.yaml\nCOPY --from=build /app/support/schema.json /app/schema.json\nCOPY --from=build /app/support/live-templates.txt /app/live-templates.txt\nCOPY --from=build /app/support/render-data-asset-diagram.sh /app/render-data-asset-diagram.sh\nCOPY --from=build /app/support/render-data-flow-diagram.sh /app/render-data-flow-diagram.sh\nCOPY --from=build /app/server /app/server\nCOPY --from=build /app/demo/example/threagile.yaml /app/threagile-example-model.yaml\nCOPY --from=build /app/demo/stub/threagile.yaml /app/threagile-stub-model.yaml\n\nRUN mkdir /data\n\nRUN chown -R 1000:1000 /app /data\nUSER 1000:1000\n\nENV PATH=/app:$PATH\nENV GIN_MODE=release\n\nENTRYPOINT [\"/app/threagile\"]\nCMD [\"-help\"]"},"repairedBuild":{"startTimestamp":1672667907405,"endTimestamp":1672667998836,"error":null,"stdout":"Sending build context to Docker daemon  11.13MB\r\r\nStep 1/41 : FROM alpine/git as clone\n ---> 22d84a66cda4\nStep 2/41 : WORKDIR /app\n ---> Running in e9e82e79873d\nRemoving intermediate container e9e82e79873d\n ---> b8da1726fb7f\nStep 3/41 : RUN git clone https://github.com/threagile/threagile.git\n ---> Running in aec3ee9b52c8\n\u001b[91mCloning into 'threagile'...\n\u001b[0mRemoving intermediate container aec3ee9b52c8\n ---> cd4d02617036\nStep 4/41 : FROM golang as build\n ---> 6650307efe4a\nStep 5/41 : ENV GO111MODULE=on\n ---> Running in 16c2db10f413\nRemoving intermediate container 16c2db10f413\n ---> 9d7ff5133450\nStep 6/41 : WORKDIR /app\n ---> Running in b4de17cc488d\nRemoving intermediate container b4de17cc488d\n ---> 7e7d23f8a957\nStep 7/41 : COPY --from=clone /app/threagile /app\n ---> ff56acb11627\nStep 8/41 : RUN go version\n ---> Running in 4618df2e867d\ngo version go1.19.4 linux/amd64\nRemoving intermediate container 4618df2e867d\n ---> 9471da689058\nStep 9/41 : RUN\tgo test ./...\n ---> Running in a4eedcc6d0c3\n\u001b[91mgo: downloading github.com/jung-kurt/gofpdf v1.16.2\n\u001b[0m\u001b[91mgo: downloading github.com/wcharczuk/go-chart v2.0.1+incompatible\n\u001b[0m\u001b[91mgo: downloading github.com/gin-gonic/gin v1.7.3\n\u001b[0m\u001b[91mgo: downloading gopkg.in/yaml.v3 v3.0.0-20210107192922-496545a6307b\n\u001b[0m\u001b[91mgo: downloading github.com/xuri/excelize/v2 v2.4.1\n\u001b[0m\u001b[91mgo: downloading github.com/google/uuid v1.3.0\n\u001b[0m\u001b[91mgo: downloading golang.org/x/crypto v0.0.0-20210711020723-a769d52b0f97\n\u001b[0m\u001b[91mgo: downloading github.com/gin-contrib/sse v0.1.0\ngo: downloading gopkg.in/yaml.v2 v2.4.0\ngo: downloading github.com/mattn/go-isatty v0.0.13\ngo: downloading github.com/ugorji/go/codec v1.1.7\n\u001b[0m\u001b[91mgo: downloading github.com/golang/protobuf v1.5.2\n\u001b[0m\u001b[91mgo: downloading github.com/go-playground/validator/v10 v10.8.0\n\u001b[0m\u001b[91mgo: downloading github.com/mohae/deepcopy v0.0.0-20170929034955-c48cc78d4826\ngo: downloading github.com/xuri/efp v0.0.0-20210322160811-ab561f5b45e3\ngo: downloading golang.org/x/text v0.3.6\ngo: downloading golang.org/x/net v0.0.0-20210726213435-c6fcb2dbf985\n\u001b[0m\u001b[91mgo: downloading github.com/richardlehane/mscfb v1.0.3\n\u001b[0m\u001b[91mgo: downloading google.golang.org/protobuf v1.27.1\n\u001b[0m\u001b[91mgo: downloading github.com/leodido/go-urn v1.2.1\ngo: downloading github.com/go-playground/universal-translator v0.17.0\n\u001b[0m\u001b[91mgo: downloading golang.org/x/sys v0.0.0-20210630005230-0f9fa26af87c\n\u001b[0m\u001b[91mgo: downloading github.com/ugorji/go v1.1.7\n\u001b[0m\u001b[91mgo: downloading github.com/richardlehane/msoleps v1.0.1\n\u001b[0m\u001b[91mgo: downloading github.com/go-playground/locales v0.13.0\n\u001b[0m\u001b[91mgo: downloading github.com/phpdave11/gofpdi v1.0.13\n\u001b[0m\u001b[91mgo: downloading golang.org/x/image v0.0.0-20210628002857-a66eb6448b8d\n\u001b[0m\u001b[91mgo: downloading github.com/golang/freetype v0.0.0-20170609003504-e2365dfdc4a0\n\u001b[0m\u001b[91mgo: downloading github.com/pkg/errors v0.9.1\n\u001b[0m?   \tgithub.com/threagile/threagile\t[no test files]\n?   \tgithub.com/threagile/threagile/colors\t[no test files]\n?   \tgithub.com/threagile/threagile/macros/built-in/add-build-pipeline\t[no test files]\n?   \tgithub.com/threagile/threagile/macros/built-in/add-vault\t[no test files]\n?   \tgithub.com/threagile/threagile/macros/built-in/pretty-print\t[no test files]\n?   \tgithub.com/threagile/threagile/macros/built-in/remove-unused-tags\t[no test files]\n?   \tgithub.com/threagile/threagile/macros/built-in/seed-risk-tracking\t[no test files]\n?   \tgithub.com/threagile/threagile/macros/built-in/seed-tags\t[no test files]\n?   \tgithub.com/threagile/threagile/model\t[no test files]\n?   \tgithub.com/threagile/threagile/raa/dummy\t[no test files]\n?   \tgithub.com/threagile/threagile/raa/raa\t[no test files]\n?   \tgithub.com/threagile/threagile/report\t[no test files]\n?   \tgithub.com/threagile/threagile/risks/built-in/accidental-secret-leak\t[no test files]\n?   \tgithub.com/threagile/threagile/risks/built-in/code-backdooring\t[no test files]\n?   \tgithub.com/threagile/threagile/risks/built-in/container-baseimage-backdooring\t[no test files]\n?   \tgithub.com/threagile/threagile/risks/built-in/container-platform-escape\t[no test files]\n?   \tgithub.com/threagile/threagile/risks/built-in/cross-site-request-forgery\t[no test files]\n?   \tgithub.com/threagile/threagile/risks/built-in/cross-site-scripting\t[no test files]\n?   \tgithub.com/threagile/threagile/risks/built-in/dos-risky-access-across-trust-boundary\t[no test files]\n?   \tgithub.com/threagile/threagile/risks/built-in/incomplete-model\t[no test files]\n?   \tgithub.com/threagile/threagile/risks/built-in/ldap-injection\t[no test files]\n?   \tgithub.com/threagile/threagile/risks/built-in/missing-authentication\t[no test files]\n?   \tgithub.com/threagile/threagile/risks/built-in/missing-authentication-second-factor\t[no test files]\n?   \tgithub.com/threagile/threagile/risks/built-in/missing-build-infrastructure\t[no test files]\n?   \tgithub.com/threagile/threagile/risks/built-in/missing-cloud-hardening\t[no test files]\n?   \tgithub.com/threagile/threagile/risks/built-in/missing-file-validation\t[no test files]\n?   \tgithub.com/threagile/threagile/risks/built-in/missing-hardening\t[no test files]\n?   \tgithub.com/threagile/threagile/risks/built-in/missing-identity-propagation\t[no test files]\n?   \tgithub.com/threagile/threagile/risks/built-in/missing-identity-provider-isolation\t[no test files]\n?   \tgithub.com/threagile/threagile/risks/built-in/missing-identity-store\t[no test files]\n?   \tgithub.com/threagile/threagile/risks/built-in/missing-network-segmentation\t[no test files]\n?   \tgithub.com/threagile/threagile/risks/built-in/missing-vault\t[no test files]\n?   \tgithub.com/threagile/threagile/risks/built-in/missing-vault-isolation\t[no test files]\n?   \tgithub.com/threagile/threagile/risks/built-in/missing-waf\t[no test files]\n?   \tgithub.com/threagile/threagile/risks/built-in/mixed-targets-on-shared-runtime\t[no test files]\n?   \tgithub.com/threagile/threagile/risks/built-in/path-traversal\t[no test files]\n?   \tgithub.com/threagile/threagile/risks/built-in/push-instead-of-pull-deployment\t[no test files]\n?   \tgithub.com/threagile/threagile/risks/built-in/search-query-injection\t[no test files]\n?   \tgithub.com/threagile/threagile/risks/built-in/server-side-request-forgery\t[no test files]\n?   \tgithub.com/threagile/threagile/risks/built-in/service-registry-poisoning\t[no test files]\n?   \tgithub.com/threagile/threagile/risks/built-in/sql-nosql-injection\t[no test files]\n?   \tgithub.com/threagile/threagile/risks/built-in/unchecked-deployment\t[no test files]\n?   \tgithub.com/threagile/threagile/risks/built-in/unencrypted-asset\t[no test files]\n?   \tgithub.com/threagile/threagile/risks/built-in/unencrypted-communication\t[no test files]\n?   \tgithub.com/threagile/threagile/risks/built-in/unguarded-access-from-internet\t[no test files]\n?   \tgithub.com/threagile/threagile/risks/built-in/unguarded-direct-datastore-access\t[no test files]\n?   \tgithub.com/threagile/threagile/risks/built-in/unnecessary-communication-link\t[no test files]\n?   \tgithub.com/threagile/threagile/risks/built-in/unnecessary-data-asset\t[no test files]\n?   \tgithub.com/threagile/threagile/risks/built-in/unnecessary-data-transfer\t[no test files]\n?   \tgithub.com/threagile/threagile/risks/built-in/unnecessary-technical-asset\t[no test files]\n?   \tgithub.com/threagile/threagile/risks/built-in/untrusted-deserialization\t[no test files]\n?   \tgithub.com/threagile/threagile/risks/built-in/wrong-communication-link-content\t[no test files]\n?   \tgithub.com/threagile/threagile/risks/built-in/wrong-trust-boundary-content\t[no test files]\n?   \tgithub.com/threagile/threagile/risks/built-in/xml-external-entity\t[no test files]\n?   \tgithub.com/threagile/threagile/risks/custom/demo\t[no test files]\nRemoving intermediate container a4eedcc6d0c3\n ---> 2ab7015bb887\nStep 10/41 : RUN GOOS=linux go build -a -trimpath -ldflags=\"-s -w -X main.buildTimestamp=$(date '+%Y%m%d%H%M%S')\" -gcflags=\"all=-trimpath=/src\" -asmflags=\"all=-trimpath=/src\" -buildmode=plugin -o raa.so raa/raa/raa.go\n ---> Running in e14c4eb6323b\nRemoving intermediate container e14c4eb6323b\n ---> d87ba11e1c25\nStep 11/41 : RUN GOOS=linux go build -a -trimpath -ldflags=\"-s -w -X main.buildTimestamp=$(date '+%Y%m%d%H%M%S')\" -gcflags=\"all=-trimpath=/src\" -asmflags=\"all=-trimpath=/src\" -buildmode=plugin -o dummy.so raa/dummy/dummy.go\n ---> Running in f6721a9f287f\nRemoving intermediate container f6721a9f287f\n ---> 331644f40747\nStep 12/41 : RUN GOOS=linux go build -a -trimpath -ldflags=\"-s -w -X main.buildTimestamp=$(date '+%Y%m%d%H%M%S')\" -gcflags=\"all=-trimpath=/src\" -asmflags=\"all=-trimpath=/src\" -buildmode=plugin -o demo-rule.so risks/custom/demo/demo-rule.go\n ---> Running in 52ce1863c685\nRemoving intermediate container 52ce1863c685\n ---> 29c3010eab98\nStep 13/41 : RUN GOOS=linux go build -a -trimpath -ldflags=\"-s -w -X main.buildTimestamp=$(date '+%Y%m%d%H%M%S')\" -gcflags=\"all=-trimpath=/src\" -asmflags=\"all=-trimpath=/src\" -o threagile\n ---> Running in 572bb6653b5d\nRemoving intermediate container 572bb6653b5d\n ---> e342fdaa3f22\nStep 14/41 : FROM alpine\n ---> 49176f190c7e\nStep 15/41 : LABEL type=\"threagile\"\n ---> Running in eafa67be90f7\nRemoving intermediate container eafa67be90f7\n ---> 7d9f7fe53684\nStep 16/41 : RUN apk add --no-cache ca-certificates\n ---> Running in 7bfa81656417\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/1) Installing ca-certificates (20220614-r3)\nExecuting busybox-1.35.0-r29.trigger\nExecuting ca-certificates-20220614-r3.trigger\nOK: 8 MiB in 16 packages\nRemoving intermediate container 7bfa81656417\n ---> f89187cf6943\nStep 17/41 : RUN apk add --update --no-cache graphviz ttf-freefont\n ---> Running in d7be690e6d4a\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/49) Installing libxau (1.0.10-r0)\n(2/49) Installing libmd (1.0.4-r0)\n(3/49) Installing libbsd (0.11.7-r0)\n(4/49) Installing libxdmcp (1.1.4-r0)\n(5/49) Installing libxcb (1.15-r0)\n(6/49) Installing libx11 (1.8.3-r0)\n(7/49) Installing libxext (1.3.5-r0)\n(8/49) Installing libxrender (0.9.11-r0)\n(9/49) Installing libexpat (2.5.0-r0)\n(10/49) Installing brotli-libs (1.0.9-r9)\n(11/49) Installing libbz2 (1.0.8-r4)\n(12/49) Installing libpng (1.6.38-r0)\n(13/49) Installing freetype (2.12.1-r0)\n(14/49) Installing fontconfig (2.14.1-r0)\n(15/49) Installing pixman (0.42.2-r0)\n(16/49) Installing cairo (1.17.6-r3)\n(17/49) Installing graphviz-libs (7.0.5-r0)\n(18/49) Installing libgcc (12.2.1_git20220924-r4)\n(19/49) Installing libice (1.0.10-r1)\n(20/49) Installing libuuid (2.38.1-r0)\n(21/49) Installing libsm (1.2.3-r1)\n(22/49) Installing libxt (1.2.1-r0)\n(23/49) Installing libxpm (3.5.14-r0)\n(24/49) Installing aom-libs (3.5.0-r0)\n(25/49) Installing libdav1d (1.0.0-r2)\n(26/49) Installing libavif (0.11.1-r0)\n(27/49) Installing libjpeg-turbo (2.1.4-r0)\n(28/49) Installing xz-libs (5.2.9-r0)\n(29/49) Installing libwebp (1.2.4-r1)\n(30/49) Installing zstd-libs (1.5.2-r9)\n(31/49) Installing tiff (4.4.0-r1)\n(32/49) Installing libgd (2.3.3-r3)\n(33/49) Installing libffi (3.4.4-r0)\n(34/49) Installing libintl (0.21.1-r1)\n(35/49) Installing libblkid (2.38.1-r0)\n(36/49) Installing libmount (2.38.1-r0)\n(37/49) Installing pcre2 (10.42-r0)\n(38/49) Installing glib (2.74.4-r0)\n(39/49) Installing libxft (2.3.7-r0)\n(40/49) Installing fribidi (1.0.12-r0)\n(41/49) Installing graphite2 (1.3.14-r2)\n(42/49) Installing harfbuzz (5.3.1-r1)\n(43/49) Installing pango (1.50.12-r0)\n(44/49) Installing libstdc++ (12.2.1_git20220924-r4)\n(45/49) Installing graphviz (7.0.5-r0)\n(46/49) Installing encodings (1.0.6-r0)\n(47/49) Installing libfontenc (1.1.6-r0)\n(48/49) Installing mkfontscale (1.2.2-r1)\n(49/49) Installing font-freefont (20120503-r3)\nExecuting busybox-1.35.0-r29.trigger\nExecuting fontconfig-2.14.1-r0.trigger\nExecuting graphviz-7.0.5-r0.trigger\nExecuting mkfontscale-1.2.2-r1.trigger\nOK: 50 MiB in 65 packages\nRemoving intermediate container d7be690e6d4a\n ---> 726774c6eaf3\nStep 18/41 : RUN apk add --no-cache libc6-compat\n ---> Running in 871897552f97\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/1) Installing libc6-compat (1.2.3-r4)\nOK: 50 MiB in 66 packages\nRemoving intermediate container 871897552f97\n ---> b427b30f42b5\nStep 19/41 : RUN rm -rf /var/cache/apk/*\n ---> Running in 9741f223e167\nRemoving intermediate container 9741f223e167\n ---> 6bb0f6d1e8d9\nStep 20/41 : WORKDIR /app\n ---> Running in 026de6b8db1f\nRemoving intermediate container 026de6b8db1f\n ---> fde66dbc00dd\nStep 21/41 : COPY --from=build /app/threagile /app/threagile\n ---> 600f93d59248\nStep 22/41 : COPY --from=build /app/raa.so /app/raa.so\n ---> 0d21537714d8\nStep 23/41 : COPY --from=build /app/dummy.so /app/dummy.so\n ---> a8726353d043\nStep 24/41 : COPY --from=build /app/demo-rule.so /app/demo-rule.so\n ---> c156b78d33c1\nStep 25/41 : COPY --from=build /app/LICENSE.txt /app/LICENSE.txt\n ---> 262c2dd42e1c\nStep 26/41 : COPY --from=build /app/report/template/background.pdf /app/background.pdf\n ---> 69da0359b3a4\nStep 27/41 : COPY --from=build /app/support/openapi.yaml /app/openapi.yaml\n ---> b0ba95ed14c9\nStep 28/41 : COPY --from=build /app/support/schema.json /app/schema.json\n ---> 509f52a563db\nStep 29/41 : COPY --from=build /app/support/live-templates.txt /app/live-templates.txt\n ---> b6cd1a4d6ed4\nStep 30/41 : COPY --from=build /app/support/render-data-asset-diagram.sh /app/render-data-asset-diagram.sh\n ---> ccc7f2cbb458\nStep 31/41 : COPY --from=build /app/support/render-data-flow-diagram.sh /app/render-data-flow-diagram.sh\n ---> 7c71d8eaea72\nStep 32/41 : COPY --from=build /app/server /app/server\n ---> 63e8fe955853\nStep 33/41 : COPY --from=build /app/demo/example/threagile.yaml /app/threagile-example-model.yaml\n ---> 9f76ff70f29f\nStep 34/41 : COPY --from=build /app/demo/stub/threagile.yaml /app/threagile-stub-model.yaml\n ---> a0a8cc13e912\nStep 35/41 : RUN mkdir /data\n ---> Running in c923ea65e35e\nRemoving intermediate container c923ea65e35e\n ---> fe2d14ce4837\nStep 36/41 : RUN chown -R 1000:1000 /app /data\n ---> Running in dc5af589c5a0\nRemoving intermediate container dc5af589c5a0\n ---> fbce6db3cac6\nStep 37/41 : USER 1000:1000\n ---> Running in 4a0c0cc64317\nRemoving intermediate container 4a0c0cc64317\n ---> 735bdcdcb478\nStep 38/41 : ENV PATH=/app:$PATH\n ---> Running in 20c67c77fd25\nRemoving intermediate container 20c67c77fd25\n ---> 64b35fcf9d67\nStep 39/41 : ENV GIN_MODE=release\n ---> Running in ed0ce3340865\nRemoving intermediate container ed0ce3340865\n ---> 1a03860e9848\nStep 40/41 : ENTRYPOINT [\"/app/threagile\"]\n ---> Running in bb1e8edfd472\nRemoving intermediate container bb1e8edfd472\n ---> ef1cf3ca4f33\nStep 41/41 : CMD [\"-help\"]\n ---> Running in 790127261efe\nRemoving intermediate container 790127261efe\n ---> 18d23f80a1e5\nSuccessfully built 18d23f80a1e5\nSuccessfully tagged threagile:latest\n","stderr":"","imageSize":141710767},"endTime":1672667999174}