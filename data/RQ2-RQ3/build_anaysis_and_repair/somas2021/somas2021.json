{"repository":"https://github.com/somas2021/somas2021","dockerfilePath":"Dockerfile","startTime":1672894397556,"endTime":1672894867632,"clone":{"startTime":1672894397556,"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/somas2021/somas2021'...\n","error":null,"endTime":1672894398541,"commit":"acaa13e3d663d3f59589f3b26860db643b3bf29e"},"originalBuild":{"startTime":1672894398626,"endTime":1672894751899,"error":null,"stdout":"Sending build context to Docker daemon   2.17MB\r\r\nStep 1/18 : FROM node:latest AS FRONTEND\nlatest: Pulling from library/node\n32de3c850997: Already exists\nfa1d4c8d85a4: Already exists\nc796299bbbdd: Already exists\n81283a9569ad: Already exists\n60b38700e7fb: Already exists\n9537c7a3988e: Pulling fs layer\ndfc2ed565c15: Pulling fs layer\nb65dd9eadf26: Pulling fs layer\nc46cc3bcdf59: Pulling fs layer\nc46cc3bcdf59: Waiting\n9537c7a3988e: Verifying Checksum\n9537c7a3988e: Download complete\nb65dd9eadf26: Download complete\nc46cc3bcdf59: Download complete\ndfc2ed565c15: Verifying Checksum\ndfc2ed565c15: Download complete\n9537c7a3988e: Pull complete\ndfc2ed565c15: Pull complete\nb65dd9eadf26: Pull complete\nc46cc3bcdf59: Pull complete\nDigest: sha256:d5222e1ebd7dd7e9683f47a8861a4711cb4407a4830cbe04a582ca4986245700\nStatus: Downloaded newer image for node:latest\n ---> 548714e444f4\nStep 2/18 : RUN mkdir /app\n ---> Running in 6dd30939dbff\nRemoving intermediate container 6dd30939dbff\n ---> 02bdca5a5e04\nStep 3/18 : WORKDIR /app\n ---> Running in 2bb9f80c18bb\nRemoving intermediate container 2bb9f80c18bb\n ---> 52b8168cfdae\nStep 4/18 : ADD . /app/\n ---> 6881bbbba7f3\nStep 5/18 : WORKDIR /app/frontend/\n ---> Running in 5d3973cb36aa\nRemoving intermediate container 5d3973cb36aa\n ---> 0a555ff41c1e\nStep 6/18 : RUN npm ci\n ---> Running in 4a9a28b1d45a\n\u001b[91mnpm WARN deprecated svgo@1.3.2: This SVGO version is no longer supported. Upgrade to v2.x.x.\n\u001b[0m\u001b[91mnpm WARN deprecated popper.js@1.16.1: You can find the new Popper v2 at @popperjs/core, this package is dedicated to the legacy v1\n\u001b[0m\nadded 1456 packages, and audited 1457 packages in 17s\n\n166 packages are looking for funding\n  run `npm fund` for details\n\n25 vulnerabilities (1 low, 4 moderate, 17 high, 3 critical)\n\nTo address issues that do not require attention, run:\n  npm audit fix\n\nTo address all issues (including breaking changes), run:\n  npm audit fix --force\n\nRun `npm audit` for details.\nRemoving intermediate container 4a9a28b1d45a\n ---> e8d77c1173a8\nStep 7/18 : RUN npm run build\n ---> Running in 84e5e3455018\n\n> frontend@0.1.0 build\n> react-scripts build\n\nCreating an optimized production build...\n\u001b[91mBrowserslist: caniuse-lite is outdated. Please run:\n  npx browserslist@latest --update-db\n  Why you should do it regularly: https://github.com/browserslist/browserslist#browsers-data-updating\n\u001b[0m\u001b[91mBrowserslist: caniuse-lite is outdated. Please run:\n  npx browserslist@latest --update-db\n  Why you should do it regularly: https://github.com/browserslist/browserslist#browsers-data-updating\n\u001b[0mCompiled successfully.\n\nFile sizes after gzip:\n\n  358.64 kB  build/static/js/main.22bb1fe0.js\n  54.42 kB   build/static/css/main.9e99c559.css\n  1.77 kB    build/static/js/787.774729bc.chunk.js\n\nThe project was built assuming it is hosted at /.\nYou can control this with the homepage field in your package.json.\n\nThe build folder is ready to be deployed.\nYou may serve it with a static server:\n\n  npm install -g serve\n  serve -s build\n\nFind out more about deployment here:\n\n  https://cra.link/deployment\n\nRemoving intermediate container 84e5e3455018\n ---> bf0493ee9c38\nStep 8/18 : FROM golang:1.17-alpine AS APP\n1.17-alpine: Pulling from library/golang\n530afca65e2e: Pulling fs layer\nd450d4da0343: Pulling fs layer\n8162171ecb65: Pulling fs layer\nff63b82a42d3: Pulling fs layer\n5b4b56e6b994: Pulling fs layer\nff63b82a42d3: Waiting\n8162171ecb65: Download complete\nd450d4da0343: Download complete\n530afca65e2e: Verifying Checksum\n530afca65e2e: Download complete\n5b4b56e6b994: Download complete\n530afca65e2e: Pull complete\nd450d4da0343: Pull complete\n8162171ecb65: Pull complete\nff63b82a42d3: Verifying Checksum\nff63b82a42d3: Download complete\nff63b82a42d3: Pull complete\n5b4b56e6b994: Pull complete\nDigest: sha256:99ddec1bbfd6d6bca3f9804c02363daee8c8524dae50df7942e8e60788fd17c9\nStatus: Downloaded newer image for golang:1.17-alpine\n ---> 270c4f58750f\nStep 9/18 : RUN mkdir /app\n ---> Running in 8e57aa088aef\nRemoving intermediate container 8e57aa088aef\n ---> a2b0310d6629\nStep 10/18 : WORKDIR /app\n ---> Running in 510c97a8a8c3\nRemoving intermediate container 510c97a8a8c3\n ---> 7eebc4b8cf7f\nStep 11/18 : RUN mkdir /build\n ---> Running in d50bdd523c26\nRemoving intermediate container d50bdd523c26\n ---> cb4fa876c532\nStep 12/18 : RUN apk add git gcc libc-dev g++\n ---> Running in cee337acbd18\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/community/x86_64/APKINDEX.tar.gz\n(1/20) Upgrading musl (1.2.3-r0 -> 1.2.3-r2)\n(2/20) Installing libgcc (11.2.1_git20220219-r2)\n(3/20) Installing libstdc++ (11.2.1_git20220219-r2)\n(4/20) Installing binutils (2.38-r3)\n(5/20) Installing libgomp (11.2.1_git20220219-r2)\n(6/20) Installing libatomic (11.2.1_git20220219-r2)\n(7/20) Installing gmp (6.2.1-r2)\n(8/20) Installing isl22 (0.22-r0)\n(9/20) Installing mpfr4 (4.1.0-r0)\n(10/20) Installing mpc1 (1.2.1-r0)\n(11/20) Installing gcc (11.2.1_git20220219-r2)\n(12/20) Installing musl-dev (1.2.3-r2)\n(13/20) Installing libc-dev (0.7.2-r3)\n(14/20) Installing g++ (11.2.1_git20220219-r2)\n(15/20) Installing brotli-libs (1.0.9-r6)\n(16/20) Installing nghttp2-libs (1.47.0-r0)\n(17/20) Installing libcurl (7.83.1-r5)\n(18/20) Installing expat (2.5.0-r0)\n(19/20) Installing pcre2 (10.40-r0)\n(20/20) Installing git (2.36.3-r0)\nExecuting busybox-1.35.0-r15.trigger\nOK: 192 MiB in 34 packages\nRemoving intermediate container cee337acbd18\n ---> f9ab8a4fb858\nStep 13/18 : ADD . /app/\n ---> ccc4e2882587\nStep 14/18 : COPY --from=FRONTEND /app/frontend/build /app/build\n ---> f28a1a8e7964\nStep 15/18 : RUN go mod download\n ---> Running in 2c79ca201fe7\nRemoving intermediate container 2c79ca201fe7\n ---> 84b05e7ec0d3\nStep 16/18 : RUN go build -o main main.go\n ---> Running in 3e8b46c32b97\nRemoving intermediate container 3e8b46c32b97\n ---> 691474de1dbc\nStep 17/18 : EXPOSE 9000\n ---> Running in b1cf8cb02a51\nRemoving intermediate container b1cf8cb02a51\n ---> 50b48cfe59e6\nStep 18/18 : CMD [\"/app/main\", \"--mode=serve\"]\n ---> Running in 5218b893f36a\nRemoving intermediate container 5218b893f36a\n ---> 897bad669511\nSuccessfully built 897bad669511\nSuccessfully tagged somas2021:latest\n","stderr":"","imageSize":617756927},"repair":{"startTime":1672894751965,"endTime":1672894752037,"violations":[{"name":"apkAddUseNoCache","position":{"start":25,"end":25,"columnStart":4,"columnEnd":32}}],"repairedDockerfile":"FROM node:latest AS FRONTEND\n\n# make the 'app' folder the current working directory\nRUN mkdir /app\n\n# make the new app the working directory\nWORKDIR /app\n\n# add all the files from the existing\nADD . /app/\n\n# make frontend folder\nWORKDIR /app/frontend/\n\n# install dependencies and build app\nRUN npm ci\nRUN npm run build\n\n\nFROM golang:1.17-alpine AS APP\nRUN mkdir /app\nWORKDIR /app\nRUN mkdir /build\nRUN apk add --no-cache git gcc libc-dev g++\nADD . /app/\nCOPY --from=FRONTEND /app/frontend/build /app/build\nRUN go mod download\nRUN go build -o main main.go\nEXPOSE 9000\nCMD [\"/app/main\", \"--mode=serve\"]\n"},"repairedBuild":{"startTime":1672894753598,"endTime":1672894867222,"error":null,"stdout":"Sending build context to Docker daemon   2.17MB\r\r\nStep 1/18 : FROM node:latest AS FRONTEND\n ---> 548714e444f4\nStep 2/18 : RUN mkdir /app\n ---> Running in 4249ed881290\nRemoving intermediate container 4249ed881290\n ---> e77ce32a3989\nStep 3/18 : WORKDIR /app\n ---> Running in 3ddfc5bb9489\nRemoving intermediate container 3ddfc5bb9489\n ---> 41c5b30abaaf\nStep 4/18 : ADD . /app/\n ---> 3e62b4540016\nStep 5/18 : WORKDIR /app/frontend/\n ---> Running in 888c5785a7f0\nRemoving intermediate container 888c5785a7f0\n ---> fe500050ddc6\nStep 6/18 : RUN npm ci\n ---> Running in 5a4be0939d7c\n\u001b[91mnpm WARN deprecated svgo@1.3.2: This SVGO version is no longer supported. Upgrade to v2.x.x.\n\u001b[0m\u001b[91mnpm WARN deprecated popper.js@1.16.1: You can find the new Popper v2 at @popperjs/core, this package is dedicated to the legacy v1\n\u001b[0m\nadded 1456 packages, and audited 1457 packages in 20s\n\n166 packages are looking for funding\n  run `npm fund` for details\n\n25 vulnerabilities (1 low, 4 moderate, 17 high, 3 critical)\n\nTo address issues that do not require attention, run:\n  npm audit fix\n\nTo address all issues (including breaking changes), run:\n  npm audit fix --force\n\nRun `npm audit` for details.\nRemoving intermediate container 5a4be0939d7c\n ---> bb7f06470d9a\nStep 7/18 : RUN npm run build\n ---> Running in f143076a6639\n\n> frontend@0.1.0 build\n> react-scripts build\n\nCreating an optimized production build...\n\u001b[91mBrowserslist: caniuse-lite is outdated. Please run:\n  npx browserslist@latest --update-db\n  Why you should do it regularly: https://github.com/browserslist/browserslist#browsers-data-updating\n\u001b[0m\u001b[91mBrowserslist: caniuse-lite is outdated. Please run:\n  npx browserslist@latest --update-db\n  Why you should do it regularly: https://github.com/browserslist/browserslist#browsers-data-updating\n\u001b[0mCompiled successfully.\n\nFile sizes after gzip:\n\n  358.64 kB  build/static/js/main.22bb1fe0.js\n  54.42 kB   build/static/css/main.9e99c559.css\n  1.77 kB    build/static/js/787.774729bc.chunk.js\n\nThe project was built assuming it is hosted at /.\nYou can control this with the homepage field in your package.json.\n\nThe build folder is ready to be deployed.\nYou may serve it with a static server:\n\n  npm install -g serve\n  serve -s build\n\nFind out more about deployment here:\n\n  https://cra.link/deployment\n\nRemoving intermediate container f143076a6639\n ---> 5bc641664817\nStep 8/18 : FROM golang:1.17-alpine AS APP\n ---> 270c4f58750f\nStep 9/18 : RUN mkdir /app\n ---> Running in 28366191a937\nRemoving intermediate container 28366191a937\n ---> 98a499e8b829\nStep 10/18 : WORKDIR /app\n ---> Running in 4dc25fb90648\nRemoving intermediate container 4dc25fb90648\n ---> 7ee1f1016293\nStep 11/18 : RUN mkdir /build\n ---> Running in 98db41949676\nRemoving intermediate container 98db41949676\n ---> 158f6c7c32ed\nStep 12/18 : RUN apk add --no-cache git gcc libc-dev g++\n ---> Running in 5dff490e80cc\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/community/x86_64/APKINDEX.tar.gz\n(1/20) Upgrading musl (1.2.3-r0 -> 1.2.3-r2)\n(2/20) Installing libgcc (11.2.1_git20220219-r2)\n(3/20) Installing libstdc++ (11.2.1_git20220219-r2)\n(4/20) Installing binutils (2.38-r3)\n(5/20) Installing libgomp (11.2.1_git20220219-r2)\n(6/20) Installing libatomic (11.2.1_git20220219-r2)\n(7/20) Installing gmp (6.2.1-r2)\n(8/20) Installing isl22 (0.22-r0)\n(9/20) Installing mpfr4 (4.1.0-r0)\n(10/20) Installing mpc1 (1.2.1-r0)\n(11/20) Installing gcc (11.2.1_git20220219-r2)\n(12/20) Installing musl-dev (1.2.3-r2)\n(13/20) Installing libc-dev (0.7.2-r3)\n(14/20) Installing g++ (11.2.1_git20220219-r2)\n(15/20) Installing brotli-libs (1.0.9-r6)\n(16/20) Installing nghttp2-libs (1.47.0-r0)\n(17/20) Installing libcurl (7.83.1-r5)\n(18/20) Installing expat (2.5.0-r0)\n(19/20) Installing pcre2 (10.40-r0)\n(20/20) Installing git (2.36.3-r0)\nExecuting busybox-1.35.0-r15.trigger\nOK: 192 MiB in 34 packages\nRemoving intermediate container 5dff490e80cc\n ---> 1069a1726608\nStep 13/18 : ADD . /app/\n ---> 70e23c47f36e\nStep 14/18 : COPY --from=FRONTEND /app/frontend/build /app/build\n ---> 4a1594134c07\nStep 15/18 : RUN go mod download\n ---> Running in 874f12f106e3\nRemoving intermediate container 874f12f106e3\n ---> 583a4d51f88f\nStep 16/18 : RUN go build -o main main.go\n ---> Running in 851b6f4560bd\nRemoving intermediate container 851b6f4560bd\n ---> 08855295b7ef\nStep 17/18 : EXPOSE 9000\n ---> Running in 9e974759b5a6\nRemoving intermediate container 9e974759b5a6\n ---> dc4d4f0888fa\nStep 18/18 : CMD [\"/app/main\", \"--mode=serve\"]\n ---> Running in 7f6f0d972c2a\nRemoving intermediate container 7f6f0d972c2a\n ---> b93985cd9bc8\nSuccessfully built b93985cd9bc8\nSuccessfully tagged somas2021:latest\n","stderr":"","imageSize":615290571}}