{"repository":"https://github.com/eepmoody/open5e-api","dockerfilePath":"Dockerfile","startTime":1672495841098,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/eepmoody/open5e-api'...\n","error":null,"commit":"8403ac451e3c90a119a46f9e016560440b6cfed1"},"originalBuild":{"startTimestamp":1672495842895,"endTimestamp":1672496562061,"error":null,"stdout":"Sending build context to Docker daemon  29.61MB\r\r\nStep 1/18 : FROM python:3.8\n3.8: Pulling from library/python\n32de3c850997: Already exists\nfa1d4c8d85a4: Already exists\nc796299bbbdd: Already exists\n81283a9569ad: Already exists\n60b38700e7fb: Already exists\n0f67f32c26d3: Already exists\ne04be0d92e59: Pulling fs layer\nb5052f164cdb: Pulling fs layer\ne9c72aa5d062: Pulling fs layer\nb5052f164cdb: Download complete\ne9c72aa5d062: Verifying Checksum\ne9c72aa5d062: Download complete\ne04be0d92e59: Verifying Checksum\ne04be0d92e59: Download complete\ne04be0d92e59: Pull complete\nb5052f164cdb: Pull complete\ne9c72aa5d062: Pull complete\nDigest: sha256:3a519327ab069a4e356a8aa279e80b7ef6270e17c5df1493dd0a5b281755e95a\nStatus: Downloaded newer image for python:3.8\n ---> 51a078947558\nStep 2/18 : RUN mkdir -p /opt/services/open5e-api\n ---> Running in 701c5063ce1e\nRemoving intermediate container 701c5063ce1e\n ---> a01bde2f2378\nStep 3/18 : WORKDIR /opt/services/open5e-api\n ---> Running in 7f8ef0f796dc\nRemoving intermediate container 7f8ef0f796dc\n ---> 9814fcc9f7d3\nStep 4/18 : RUN pip install pipenv gunicorn\n ---> Running in 07bc8c90c636\nCollecting pipenv\n  Downloading pipenv-2022.12.19-py3-none-any.whl (2.9 MB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 2.9/2.9 MB 11.7 MB/s eta 0:00:00\nCollecting gunicorn\n  Downloading gunicorn-20.1.0-py3-none-any.whl (79 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 79.5/79.5 KB 4.4 MB/s eta 0:00:00\nRequirement already satisfied: setuptools>=36.2.1 in /usr/local/lib/python3.8/site-packages (from pipenv) (57.5.0)\nCollecting virtualenv\n  Downloading virtualenv-20.17.1-py3-none-any.whl (8.8 MB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 8.8/8.8 MB 32.1 MB/s eta 0:00:00\nCollecting virtualenv-clone>=0.2.5\n  Downloading virtualenv_clone-0.5.7-py3-none-any.whl (6.6 kB)\nCollecting certifi\n  Downloading certifi-2022.12.7-py3-none-any.whl (155 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 155.3/155.3 KB 6.1 MB/s eta 0:00:00\nCollecting filelock<4,>=3.4.1\n  Downloading filelock-3.9.0-py3-none-any.whl (9.7 kB)\nCollecting distlib<1,>=0.3.6\n  Downloading distlib-0.3.6-py2.py3-none-any.whl (468 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 468.5/468.5 KB 19.1 MB/s eta 0:00:00\nCollecting platformdirs<3,>=2.4\n  Downloading platformdirs-2.6.2-py3-none-any.whl (14 kB)\nInstalling collected packages: distlib, virtualenv-clone, platformdirs, gunicorn, filelock, certifi, virtualenv, pipenv\nSuccessfully installed certifi-2022.12.7 distlib-0.3.6 filelock-3.9.0 gunicorn-20.1.0 pipenv-2022.12.19 platformdirs-2.6.2 virtualenv-20.17.1 virtualenv-clone-0.5.7\n\u001b[91mWARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv\n\u001b[0m\u001b[91mWARNING: You are using pip version 22.0.4; however, version 22.3.1 is available.\nYou should consider upgrading via the '/usr/local/bin/python -m pip install --upgrade pip' command.\n\u001b[0mRemoving intermediate container 07bc8c90c636\n ---> 244db46afe0f\nStep 5/18 : COPY . /opt/services/open5e-api\n ---> 039c9c5401fc\nStep 6/18 : RUN pipenv install\n ---> Running in 5937559e267f\n\u001b[91mLoading .env environment variables...\n\u001b[0m\u001b[91mCreating a virtualenv for this project...\nPipfile: /opt/services/open5e-api/Pipfile\n\u001b[0m\u001b[91mUsing /usr/local/bin/python3.8 (3.8.16) to create virtualenv...\n\u001b[0m\u001b[91mcreated virtual environment CPython3.8.16.final.0-64 in 723ms\n  creator CPython3Posix(dest=/root/.local/share/virtualenvs/open5e-api-GCOA7Kjv, clear=False, no_vcs_ignore=False, global=False)\n  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, wheel=bundle, via=copy, app_data_dir=/root/.local/share/virtualenv)\n    added seed packages: pip==22.3.1, setuptools==65.6.3, wheel==0.38.4\n  activators BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator,PythonActivator\n\n\u001b[0m\u001b[91m✔ Successfully created virtual environment!\n\u001b[0m\u001b[91mVirtualenv location: /root/.local/share/virtualenvs/open5e-api-GCOA7Kjv\n\u001b[0mInstalling dependencies from Pipfile.lock (0f334c)...\nTo activate this project's virtualenv, run pipenv shell.\nAlternatively, run a command inside the virtualenv with pipenv run.\nRemoving intermediate container 5937559e267f\n ---> 8eae986a1dee\nStep 7/18 : RUN pipenv run python manage.py makemigrations\n ---> Running in 3c93476352e7\n\u001b[91mLoading .env environment variables...\n\u001b[0mNo changes detected\nRemoving intermediate container 3c93476352e7\n ---> 1b607ccb0088\nStep 8/18 : RUN pipenv run python manage.py migrate\n ---> Running in 6bb82b4512ae\n\u001b[91mLoading .env environment variables...\n\u001b[0mOperations to perform:\n  Apply all migrations: admin, api, auth, contenttypes, sessions\nRunning migrations:\n  Applying contenttypes.0001_initial... OK\n  Applying auth.0001_initial... OK\n  Applying admin.0001_initial... OK\n  Applying admin.0002_logentry_remove_auto_add... OK\n  Applying admin.0003_logentry_add_action_flag_choices... OK\n  Applying api.0001_initial... OK\n  Applying api.0002_document_copyright... OK\n  Applying api.0003_armor... OK\n  Applying api.0004_auto_20191029_0215... OK\n  Applying api.0005_auto_20191029_0216... OK\n  Applying api.0003_auto_20191110_1830... OK\n  Applying api.0006_merge_20220705_2007... OK\n  Applying api.0007_auto_20220705_2007... OK\n  Applying api.0008_manifest... OK\n  Applying contenttypes.0002_remove_content_type_name... OK\n  Applying auth.0002_alter_permission_name_max_length... OK\n  Applying auth.0003_alter_user_email_max_length... OK\n  Applying auth.0004_alter_user_username_opts... OK\n  Applying auth.0005_alter_user_last_login_null... OK\n  Applying auth.0006_require_contenttypes_0002... OK\n  Applying auth.0007_alter_validators_add_error_messages... OK\n  Applying auth.0008_alter_user_username_max_length... OK\n  Applying auth.0009_alter_user_last_name_max_length... OK\n  Applying sessions.0001_initial... OK\nRemoving intermediate container 6bb82b4512ae\n ---> 855fcc74f3bb\nStep 9/18 : RUN pipenv run python manage.py collectstatic --noinput\n ---> Running in bf9d86c139a9\n\u001b[91mLoading .env environment variables...\n\u001b[0m\n175 static files copied to '/opt/services/open5e-api/staticfiles', 507 post-processed.\nRemoving intermediate container bf9d86c139a9\n ---> 98a76eaba275\nStep 10/18 : RUN pipenv run python manage.py populatedb --flush ./data/open5e_original/\n ---> Running in 2e5b8ca7ab2f\n\u001b[91mLoading .env environment variables...\n\u001b[0mFlushing existing database.\nReading in files from ['./data/open5e_original/']\nCompleted loading Document.         Added:1     Updated:0   Skipped:0\nCompleted loading Backgrounds.      Added:2     Updated:0   Skipped:0\nCompleted loading Spells.           Added:2     Updated:0   Skipped:0\nRemoving intermediate container 2e5b8ca7ab2f\n ---> e0c02cd51218\nStep 11/18 : RUN pipenv run python manage.py populatedb --append ./data/WOTC_5e_SRD_v5.1/\n ---> Running in c44d4d388de7\n\u001b[91mLoading .env environment variables...\n\u001b[0mInserting new items into the database. Skipping conflicts (if any).\nReading in files from ['./data/WOTC_5e_SRD_v5.1/']\nCompleted loading Document.         Added:1     Updated:0   Skipped:0\nCompleted loading Backgrounds.      Added:1     Updated:0   Skipped:0\nCompleted loading Classes.          Added:12    Updated:0   Skipped:0\nCompleted loading Conditions.       Added:15    Updated:0   Skipped:0\nCompleted loading Feats.            Added:1     Updated:0   Skipped:0\nCompleted loading Magic Items.      Added:237   Updated:0   Skipped:0\nCompleted loading Spells.           Added:319   Updated:0   Skipped:0\nCompleted loading Monsters.         Added:322   Updated:0   Skipped:0\nCompleted loading Planes.           Added:1     Updated:0   Skipped:0\nCompleted loading Sections.         Added:26    Updated:0   Skipped:0\nCompleted loading Races.            Added:9     Updated:0   Skipped:0\nCompleted loading Weapons.          Added:37    Updated:0   Skipped:0\nCompleted loading Armor.            Added:18    Updated:0   Skipped:0\nRemoving intermediate container c44d4d388de7\n ---> 3fe67b6c00bc\nStep 12/18 : RUN pipenv run python manage.py populatedb --append ./data/tome_of_beasts/\n ---> Running in cefb7a9eb021\n\u001b[91mLoading .env environment variables...\n\u001b[0mInserting new items into the database. Skipping conflicts (if any).\nReading in files from ['./data/tome_of_beasts/']\nCompleted loading Document.         Added:1     Updated:0   Skipped:0\nCompleted loading Monsters.         Added:408   Updated:0   Skipped:0\nRemoving intermediate container cefb7a9eb021\n ---> a797a648e2f2\nStep 13/18 : RUN pipenv run python manage.py populatedb --append ./data/creature_codex/\n ---> Running in 9115c891e7af\n\u001b[91mLoading .env environment variables...\n\u001b[0mInserting new items into the database. Skipping conflicts (if any).\nReading in files from ['./data/creature_codex/']\nCompleted loading Document.         Added:1     Updated:0   Skipped:0\nCompleted loading Monsters.         Added:356   Updated:0   Skipped:0\nRemoving intermediate container 9115c891e7af\n ---> 7339d34d7eb5\nStep 14/18 : RUN pipenv run python manage.py populatedb --append ./data/tome_of_beasts_2/\n ---> Running in 48780049a793\n\u001b[91mLoading .env environment variables...\n\u001b[0mInserting new items into the database. Skipping conflicts (if any).\nReading in files from ['./data/tome_of_beasts_2/']\nCompleted loading Document.         Added:1     Updated:0   Skipped:0\nCompleted loading Monsters.         Added:383   Updated:0   Skipped:0\nRemoving intermediate container 48780049a793\n ---> add928620644\nStep 15/18 : RUN pipenv run python manage.py populatedb --append ./data/deep_magic/\n ---> Running in 7f78ea3d9287\n\u001b[91mLoading .env environment variables...\n\u001b[0mInserting new items into the database. Skipping conflicts (if any).\nReading in files from ['./data/deep_magic/']\nCompleted loading Document.         Added:1     Updated:0   Skipped:0\nCompleted loading Spells.           Added:514   Updated:0   Skipped:0\nRemoving intermediate container 7f78ea3d9287\n ---> 32a8bc25bd7e\nStep 16/18 : RUN pipenv run python manage.py update_index --remove\n ---> Running in bb5036eb6b50\n\u001b[91mLoading .env environment variables...\n\u001b[0mIndexing 835 spells\nIndexing 1469 monsters\nIndexing 12 char classs\nIndexing 9 races\nIndexing 26 sections\nIndexing 15 conditions\nIndexing 237 magic items\nRemoving intermediate container bb5036eb6b50\n ---> 3054f047d1e5\nStep 17/18 : RUN pipenv run sh ./scripts/generate_self_signed_cert.sh\n ---> Running in b69afef1dec1\n\u001b[91mLoading .env environment variables...\n\u001b[0m\u001b[91m./scripts/generate_self_signed_cert.sh: 2: source: not found\n\u001b[0mKEYFILE = selfsigned.key\nCERTFILE = selfsigned.crt\nSERVER_NAME = api.open5e.com\nGenerating Self-signed certs.\n\u001b[91mrm: cannot remove 'selfsigned.*': No such file or directory\n\u001b[0m\u001b[91mGenerating a RSA private key\n\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m+\u001b[0m\u001b[91m+\u001b[0m\u001b[91m+\u001b[0m\u001b[91m+\u001b[0m\u001b[91m+\n\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m+\u001b[0m\u001b[91m+\u001b[0m\u001b[91m+\u001b[0m\u001b[91m+\u001b[0m\u001b[91m+\n\u001b[0m\u001b[91mwriting new private key to 'selfsigned.key'\n\u001b[0m\u001b[91m-----\n\u001b[0mRemoving intermediate container b69afef1dec1\n ---> 0d4cfa345424\nStep 18/18 : CMD [\"pipenv\", \"run\", \"gunicorn\",\"--certfile=${CERTFILE}\", \"--keyfile=${KEYFILE}\",\"-b\", \":8888\", \"server.wsgi:application\"]\n ---> Running in 8fc03dca0ac4\nRemoving intermediate container 8fc03dca0ac4\n ---> 6ec44578bfaf\nSuccessfully built 6ec44578bfaf\nSuccessfully tagged open5e-api:latest\n","stderr":"","imageSize":1143651714},"repair":{"violations":[{"name":"pipUseNoCacheDir","position":{"start":7,"end":7,"columnStart":4,"columnEnd":31}}],"repairedDockerfile":"FROM python:3.8\n\nRUN mkdir -p /opt/services/open5e-api\nWORKDIR /opt/services/open5e-api\n# copy our project code\n\n# install our dependencies\nRUN pip install --no-cache-dir pipenv gunicorn\nCOPY . /opt/services/open5e-api\n\nRUN pipenv install\n\n# migrate the db\nRUN pipenv run python manage.py makemigrations\nRUN pipenv run python manage.py migrate\n\n# collect the static files\nRUN pipenv run python manage.py collectstatic --noinput\n\n#add original open5e content\nRUN pipenv run python manage.py populatedb --flush ./data/open5e_original/\n\n#populate the db\nRUN pipenv run python manage.py populatedb --append ./data/WOTC_5e_SRD_v5.1/\n\n#add the tome of beasts\nRUN pipenv run python manage.py populatedb --append ./data/tome_of_beasts/\n\n#add the creature codex\nRUN pipenv run python manage.py populatedb --append ./data/creature_codex/\n\n#add the tome of beasts 2\nRUN pipenv run python manage.py populatedb --append ./data/tome_of_beasts_2/\n\n#add deep magic\nRUN pipenv run python manage.py populatedb --append ./data/deep_magic/\n\n#build the search index\nRUN pipenv run python manage.py update_index --remove\n\n# Create the self-signed certs for gunicorn.\nRUN pipenv run sh ./scripts/generate_self_signed_cert.sh\n\n#run gunicorn.\nCMD [\"pipenv\", \"run\", \"gunicorn\",\"--certfile=${CERTFILE}\", \"--keyfile=${KEYFILE}\",\"-b\", \":8888\", \"server.wsgi:application\"]\n"},"repairedBuild":{"startTimestamp":1672496562859,"endTimestamp":1672497104466,"error":null,"stdout":"Sending build context to Docker daemon  29.61MB\r\r\nStep 1/18 : FROM python:3.8\n ---> 51a078947558\nStep 2/18 : RUN mkdir -p /opt/services/open5e-api\n ---> Running in baa2490da4a6\nRemoving intermediate container baa2490da4a6\n ---> 4fd53364f349\nStep 3/18 : WORKDIR /opt/services/open5e-api\n ---> Running in 69121f536cbc\nRemoving intermediate container 69121f536cbc\n ---> e7072b0d70fb\nStep 4/18 : RUN pip install --no-cache-dir pipenv gunicorn\n ---> Running in 55cb4d320cf0\nCollecting pipenv\n  Downloading pipenv-2022.12.19-py3-none-any.whl (2.9 MB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 2.9/2.9 MB 48.6 MB/s eta 0:00:00\nCollecting gunicorn\n  Downloading gunicorn-20.1.0-py3-none-any.whl (79 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 79.5/79.5 KB 258.7 MB/s eta 0:00:00\nRequirement already satisfied: setuptools>=36.2.1 in /usr/local/lib/python3.8/site-packages (from pipenv) (57.5.0)\nCollecting certifi\n  Downloading certifi-2022.12.7-py3-none-any.whl (155 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 155.3/155.3 KB 100.7 MB/s eta 0:00:00\nCollecting virtualenv\n  Downloading virtualenv-20.17.1-py3-none-any.whl (8.8 MB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 8.8/8.8 MB 114.1 MB/s eta 0:00:00\nCollecting virtualenv-clone>=0.2.5\n  Downloading virtualenv_clone-0.5.7-py3-none-any.whl (6.6 kB)\nCollecting distlib<1,>=0.3.6\n  Downloading distlib-0.3.6-py2.py3-none-any.whl (468 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 468.5/468.5 KB 154.4 MB/s eta 0:00:00\nCollecting platformdirs<3,>=2.4\n  Downloading platformdirs-2.6.2-py3-none-any.whl (14 kB)\nCollecting filelock<4,>=3.4.1\n  Downloading filelock-3.9.0-py3-none-any.whl (9.7 kB)\nInstalling collected packages: distlib, virtualenv-clone, platformdirs, gunicorn, filelock, certifi, virtualenv, pipenv\nSuccessfully installed certifi-2022.12.7 distlib-0.3.6 filelock-3.9.0 gunicorn-20.1.0 pipenv-2022.12.19 platformdirs-2.6.2 virtualenv-20.17.1 virtualenv-clone-0.5.7\n\u001b[91mWARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv\n\u001b[0m\u001b[91mWARNING: You are using pip version 22.0.4; however, version 22.3.1 is available.\nYou should consider upgrading via the '/usr/local/bin/python -m pip install --upgrade pip' command.\n\u001b[0mRemoving intermediate container 55cb4d320cf0\n ---> 559c4af6d324\nStep 5/18 : COPY . /opt/services/open5e-api\n ---> c87a05a114fc\nStep 6/18 : RUN pipenv install\n ---> Running in 2c8a5f26d739\n\u001b[91mLoading .env environment variables...\n\u001b[0m\u001b[91mCreating a virtualenv for this project...\nPipfile: /opt/services/open5e-api/Pipfile\n\u001b[0m\u001b[91mUsing /usr/local/bin/python3.8 (3.8.16) to create virtualenv...\n\u001b[0m\u001b[91mcreated virtual environment CPython3.8.16.final.0-64 in 577ms\n  creator CPython3Posix(dest=/root/.local/share/virtualenvs/open5e-api-GCOA7Kjv, clear=False, no_vcs_ignore=False, global=False)\n  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, wheel=bundle, via=copy, app_data_dir=/root/.local/share/virtualenv)\n    added seed packages: pip==22.3.1, setuptools==65.6.3, wheel==0.38.4\n  activators BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator,PythonActivator\n\n\u001b[0m\u001b[91m✔ Successfully created virtual environment!\n\u001b[0m\u001b[91mVirtualenv location: /root/.local/share/virtualenvs/open5e-api-GCOA7Kjv\n\u001b[0mInstalling dependencies from Pipfile.lock (0f334c)...\nTo activate this project's virtualenv, run pipenv shell.\nAlternatively, run a command inside the virtualenv with pipenv run.\nRemoving intermediate container 2c8a5f26d739\n ---> d34eed3a227e\nStep 7/18 : RUN pipenv run python manage.py makemigrations\n ---> Running in b6da9e330dd3\n\u001b[91mLoading .env environment variables...\n\u001b[0mNo changes detected\nRemoving intermediate container b6da9e330dd3\n ---> d65f1c169892\nStep 8/18 : RUN pipenv run python manage.py migrate\n ---> Running in c2a5ed3ce52e\n\u001b[91mLoading .env environment variables...\n\u001b[0mOperations to perform:\n  Apply all migrations: admin, api, auth, contenttypes, sessions\nRunning migrations:\n  Applying contenttypes.0001_initial... OK\n  Applying auth.0001_initial... OK\n  Applying admin.0001_initial... OK\n  Applying admin.0002_logentry_remove_auto_add... OK\n  Applying admin.0003_logentry_add_action_flag_choices... OK\n  Applying api.0001_initial... OK\n  Applying api.0002_document_copyright... OK\n  Applying api.0003_armor... OK\n  Applying api.0004_auto_20191029_0215... OK\n  Applying api.0005_auto_20191029_0216... OK\n  Applying api.0003_auto_20191110_1830... OK\n  Applying api.0006_merge_20220705_2007... OK\n  Applying api.0007_auto_20220705_2007... OK\n  Applying api.0008_manifest... OK\n  Applying contenttypes.0002_remove_content_type_name... OK\n  Applying auth.0002_alter_permission_name_max_length... OK\n  Applying auth.0003_alter_user_email_max_length... OK\n  Applying auth.0004_alter_user_username_opts... OK\n  Applying auth.0005_alter_user_last_login_null... OK\n  Applying auth.0006_require_contenttypes_0002... OK\n  Applying auth.0007_alter_validators_add_error_messages... OK\n  Applying auth.0008_alter_user_username_max_length... OK\n  Applying auth.0009_alter_user_last_name_max_length... OK\n  Applying sessions.0001_initial... OK\nRemoving intermediate container c2a5ed3ce52e\n ---> d7659b3dea2a\nStep 9/18 : RUN pipenv run python manage.py collectstatic --noinput\n ---> Running in a1927cbad09c\n\u001b[91mLoading .env environment variables...\n\u001b[0m\n175 static files copied to '/opt/services/open5e-api/staticfiles', 507 post-processed.\nRemoving intermediate container a1927cbad09c\n ---> 8267a99ab446\nStep 10/18 : RUN pipenv run python manage.py populatedb --flush ./data/open5e_original/\n ---> Running in 5db13e6b5c2e\n\u001b[91mLoading .env environment variables...\n\u001b[0mFlushing existing database.\nReading in files from ['./data/open5e_original/']\nCompleted loading Document.         Added:1     Updated:0   Skipped:0\nCompleted loading Backgrounds.      Added:2     Updated:0   Skipped:0\nCompleted loading Spells.           Added:2     Updated:0   Skipped:0\nRemoving intermediate container 5db13e6b5c2e\n ---> b2e9c3ad25af\nStep 11/18 : RUN pipenv run python manage.py populatedb --append ./data/WOTC_5e_SRD_v5.1/\n ---> Running in 25c0c4735114\n\u001b[91mLoading .env environment variables...\n\u001b[0mInserting new items into the database. Skipping conflicts (if any).\nReading in files from ['./data/WOTC_5e_SRD_v5.1/']\nCompleted loading Document.         Added:1     Updated:0   Skipped:0\nCompleted loading Backgrounds.      Added:1     Updated:0   Skipped:0\nCompleted loading Classes.          Added:12    Updated:0   Skipped:0\nCompleted loading Conditions.       Added:15    Updated:0   Skipped:0\nCompleted loading Feats.            Added:1     Updated:0   Skipped:0\nCompleted loading Magic Items.      Added:237   Updated:0   Skipped:0\nCompleted loading Spells.           Added:319   Updated:0   Skipped:0\nCompleted loading Monsters.         Added:322   Updated:0   Skipped:0\nCompleted loading Planes.           Added:1     Updated:0   Skipped:0\nCompleted loading Sections.         Added:26    Updated:0   Skipped:0\nCompleted loading Races.            Added:9     Updated:0   Skipped:0\nCompleted loading Weapons.          Added:37    Updated:0   Skipped:0\nCompleted loading Armor.            Added:18    Updated:0   Skipped:0\nRemoving intermediate container 25c0c4735114\n ---> e08ddfd6e599\nStep 12/18 : RUN pipenv run python manage.py populatedb --append ./data/tome_of_beasts/\n ---> Running in 2b0ccfa7c3eb\n\u001b[91mLoading .env environment variables...\n\u001b[0mInserting new items into the database. Skipping conflicts (if any).\nReading in files from ['./data/tome_of_beasts/']\nCompleted loading Document.         Added:1     Updated:0   Skipped:0\nCompleted loading Monsters.         Added:408   Updated:0   Skipped:0\nRemoving intermediate container 2b0ccfa7c3eb\n ---> b4350616348b\nStep 13/18 : RUN pipenv run python manage.py populatedb --append ./data/creature_codex/\n ---> Running in 1b877a8ca693\n\u001b[91mLoading .env environment variables...\n\u001b[0mInserting new items into the database. Skipping conflicts (if any).\nReading in files from ['./data/creature_codex/']\nCompleted loading Document.         Added:1     Updated:0   Skipped:0\nCompleted loading Monsters.         Added:356   Updated:0   Skipped:0\nRemoving intermediate container 1b877a8ca693\n ---> 17a3d5a88c06\nStep 14/18 : RUN pipenv run python manage.py populatedb --append ./data/tome_of_beasts_2/\n ---> Running in 1373812612f3\n\u001b[91mLoading .env environment variables...\n\u001b[0mInserting new items into the database. Skipping conflicts (if any).\nReading in files from ['./data/tome_of_beasts_2/']\nCompleted loading Document.         Added:1     Updated:0   Skipped:0\nCompleted loading Monsters.         Added:383   Updated:0   Skipped:0\nRemoving intermediate container 1373812612f3\n ---> 1e6479e169e3\nStep 15/18 : RUN pipenv run python manage.py populatedb --append ./data/deep_magic/\n ---> Running in 522103a95799\n\u001b[91mLoading .env environment variables...\n\u001b[0mInserting new items into the database. Skipping conflicts (if any).\nReading in files from ['./data/deep_magic/']\nCompleted loading Document.         Added:1     Updated:0   Skipped:0\nCompleted loading Spells.           Added:514   Updated:0   Skipped:0\nRemoving intermediate container 522103a95799\n ---> fb7b44b1bb2d\nStep 16/18 : RUN pipenv run python manage.py update_index --remove\n ---> Running in e2e4a0f6e10c\n\u001b[91mLoading .env environment variables...\n\u001b[0mIndexing 835 spells\nIndexing 1469 monsters\nIndexing 12 char classs\nIndexing 9 races\nIndexing 26 sections\nIndexing 15 conditions\nIndexing 237 magic items\nRemoving intermediate container e2e4a0f6e10c\n ---> 6697cbdbd6cf\nStep 17/18 : RUN pipenv run sh ./scripts/generate_self_signed_cert.sh\n ---> Running in c69164de8f16\n\u001b[91mLoading .env environment variables...\n\u001b[0m\u001b[91m./scripts/generate_self_signed_cert.sh: 2: source: not found\n\u001b[0mKEYFILE = selfsigned.key\nCERTFILE = selfsigned.crt\nSERVER_NAME = api.open5e.com\nGenerating Self-signed certs.\n\u001b[91mrm: cannot remove 'selfsigned.*': No such file or directory\n\u001b[0m\u001b[91mGenerating a RSA private key\n\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m+\u001b[0m\u001b[91m+\u001b[0m\u001b[91m+\u001b[0m\u001b[91m+\u001b[0m\u001b[91m+\n\u001b[0m\u001b[91m.\u001b[0m\u001b[91m.\u001b[0m\u001b[91m+\u001b[0m\u001b[91m+\u001b[0m\u001b[91m+\u001b[0m\u001b[91m+\u001b[0m\u001b[91m+\n\u001b[0m\u001b[91mwriting new private key to 'selfsigned.key'\n\u001b[0m\u001b[91m-----\n\u001b[0mRemoving intermediate container c69164de8f16\n ---> 5e6b3c1c08d3\nStep 18/18 : CMD [\"pipenv\", \"run\", \"gunicorn\",\"--certfile=${CERTFILE}\", \"--keyfile=${KEYFILE}\",\"-b\", \":8888\", \"server.wsgi:application\"]\n ---> Running in 522dfe0e8e58\nRemoving intermediate container 522dfe0e8e58\n ---> 30889c38bd0e\nSuccessfully built 30889c38bd0e\nSuccessfully tagged open5e-api:latest\n","stderr":"","imageSize":1131048368},"endTime":1672497105191}