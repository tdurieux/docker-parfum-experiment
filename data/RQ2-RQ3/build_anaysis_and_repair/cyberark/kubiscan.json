{"repository":"https://github.com/cyberark/kubiscan","dockerfilePath":"Dockerfile","startTime":1672041312865,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/cyberark/kubiscan'...\n","error":null,"commit":"b8e7f427692953d59284eb8d23033371c9026bdb"},"originalBuild":{"startTimestamp":1672041313714,"endTimestamp":1672041338837,"error":null,"stdout":"Sending build context to Docker daemon  399.4kB\r\r\nStep 1/12 : ARG DOCKER_REGISTRY=index.docker.io\nStep 2/12 : ARG PYTHON_IMAGE=${DOCKER_REGISTRY}/python:3.8.0-slim-buster\nStep 3/12 : FROM ${PYTHON_IMAGE} AS build-image\n3.8.0-slim-buster: Pulling from library/python\n000eee12ec04: Pulling fs layer\nddc2d83f8229: Pulling fs layer\n3ae1660fa0d9: Pulling fs layer\nef709117d3d3: Pulling fs layer\n487a0421e8fa: Pulling fs layer\nef709117d3d3: Waiting\n487a0421e8fa: Waiting\n000eee12ec04: Verifying Checksum\n000eee12ec04: Download complete\nddc2d83f8229: Verifying Checksum\nddc2d83f8229: Download complete\nef709117d3d3: Download complete\n487a0421e8fa: Verifying Checksum\n487a0421e8fa: Download complete\n000eee12ec04: Pull complete\n3ae1660fa0d9: Verifying Checksum\n3ae1660fa0d9: Download complete\nddc2d83f8229: Pull complete\n3ae1660fa0d9: Pull complete\nef709117d3d3: Pull complete\n487a0421e8fa: Pull complete\nDigest: sha256:8e243f41e500238f78f7a29a81656114d3fe603d5c34079a462d090f71c4b225\nStatus: Downloaded newer image for python:3.8.0-slim-buster\n ---> 577b86e4ee11\nStep 4/12 : WORKDIR /tmp/build-kubiscan\n ---> Running in 2f27de00cd60\nRemoving intermediate container 2f27de00cd60\n ---> e01e3bf336b7\nStep 5/12 : COPY requirements.txt requirements.txt\n ---> be7f18c5458c\nStep 6/12 : RUN pip3 install -r requirements.txt\n ---> Running in 59878a197181\nCollecting kubernetes==11.0.0\n  Downloading https://files.pythonhosted.org/packages/59/46/d4b9364fcab59b5f9248e014c7592df8de84ad6548a6fe3de2d805bb75fc/kubernetes-11.0.0-py3-none-any.whl (1.5MB)\nCollecting PTable==0.9.2\n  Downloading https://files.pythonhosted.org/packages/ab/b3/b54301811173ca94119eb474634f120a49cd370f257d1aae5a4abaf12729/PTable-0.9.2.tar.gz\nCollecting certifi>=14.05.14\n  Downloading https://files.pythonhosted.org/packages/71/4c/3db2b8021bd6f2f0ceb0e088d6b2d49147671f25832fb17970e9b583d742/certifi-2022.12.7-py3-none-any.whl (155kB)\nCollecting google-auth>=1.0.1\n  Downloading https://files.pythonhosted.org/packages/59/18/f8201fa70cbc7bebc14a50e891783c88c277a9158e9c8c07a9044ecd98eb/google_auth-2.15.0-py2.py3-none-any.whl (177kB)\nCollecting python-dateutil>=2.5.3\n  Downloading https://files.pythonhosted.org/packages/36/7a/87837f39d0296e723bb9b62bbb257d0355c7f6128853c78955f57342a56d/python_dateutil-2.8.2-py2.py3-none-any.whl (247kB)\nCollecting websocket-client!=0.40.0,!=0.41.*,!=0.42.*,>=0.32.0\n  Downloading https://files.pythonhosted.org/packages/78/d5/2b5719b738791cd798e8f097eba4bb093ff5efca5cef2f3d37a72daa111f/websocket_client-1.4.2-py3-none-any.whl (55kB)\nCollecting requests\n  Downloading https://files.pythonhosted.org/packages/ca/91/6d9b8ccacd0412c08820f72cebaa4f0c0441b5cda699c90f618b6f8a1b42/requests-2.28.1-py3-none-any.whl (62kB)\nCollecting requests-oauthlib\n  Downloading https://files.pythonhosted.org/packages/6f/bb/5deac77a9af870143c684ab46a7934038a53eb4aa975bc0687ed6ca2c610/requests_oauthlib-1.3.1-py2.py3-none-any.whl\nRequirement already satisfied: setuptools>=21.0.0 in /usr/local/lib/python3.8/site-packages (from kubernetes==11.0.0->-r requirements.txt (line 1)) (41.6.0)\nCollecting six>=1.9.0\n  Downloading https://files.pythonhosted.org/packages/d9/5a/e7c31adbe875f2abbb91bd84cf2dc52d792b5a01506781dbcf25c91daf11/six-1.16.0-py2.py3-none-any.whl\nCollecting pyyaml>=3.12\n  Downloading https://files.pythonhosted.org/packages/d7/42/7ad4b6d67a16229496d4f6e74201bdbebcf4bc1e87d5a70c9297d4961bd2/PyYAML-6.0-cp38-cp38-manylinux_2_5_x86_64.manylinux1_x86_64.manylinux_2_12_x86_64.manylinux2010_x86_64.whl (701kB)\nCollecting urllib3>=1.24.2\n  Downloading https://files.pythonhosted.org/packages/65/0c/cc6644eaa594585e5875f46f3c83ee8762b647b51fc5b0fb253a242df2dc/urllib3-1.26.13-py2.py3-none-any.whl (140kB)\nCollecting cachetools<6.0,>=2.0.0\n  Downloading https://files.pythonhosted.org/packages/68/aa/5fc646cae6e997c3adf3b0a7e257cda75cff21fcba15354dffd67789b7bb/cachetools-5.2.0-py3-none-any.whl\nCollecting pyasn1-modules>=0.2.1\n  Downloading https://files.pythonhosted.org/packages/95/de/214830a981892a3e286c3794f41ae67a4495df1108c3da8a9f62159b9a9d/pyasn1_modules-0.2.8-py2.py3-none-any.whl (155kB)\nCollecting rsa<5,>=3.1.4; python_version >= \"3.6\"\n  Downloading https://files.pythonhosted.org/packages/49/97/fa78e3d2f65c02c8e1268b9aba606569fe97f6c8f7c2d74394553347c145/rsa-4.9-py3-none-any.whl\nCollecting idna<4,>=2.5\n  Downloading https://files.pythonhosted.org/packages/fc/34/3030de6f1370931b9dbb4dad48f6ab1015ab1d32447850b9fc94e60097be/idna-3.4-py3-none-any.whl (61kB)\nCollecting charset-normalizer<3,>=2\n  Downloading https://files.pythonhosted.org/packages/db/51/a507c856293ab05cdc1db77ff4bc1268ddd39f29e7dc4919aa497f0adbec/charset_normalizer-2.1.1-py3-none-any.whl\nCollecting oauthlib>=3.0.0\n  Downloading https://files.pythonhosted.org/packages/7e/80/cab10959dc1faead58dc8384a781dfbf93cb4d33d50988f7a69f1b7c9bbe/oauthlib-3.2.2-py3-none-any.whl (151kB)\nCollecting pyasn1<0.5.0,>=0.4.6\n  Downloading https://files.pythonhosted.org/packages/62/1e/a94a8d635fa3ce4cfc7f506003548d0a2447ae76fd5ca53932970fe3053f/pyasn1-0.4.8-py2.py3-none-any.whl (77kB)\nBuilding wheels for collected packages: PTable\n  Building wheel for PTable (setup.py): started\n  Building wheel for PTable (setup.py): finished with status 'done'\n  Created wheel for PTable: filename=PTable-0.9.2-cp38-none-any.whl size=22907 sha256=c07f04e4094d2cbf6b96ac0e8362fe373cc7f46686d50407f30d90960c53f9d8\n  Stored in directory: /root/.cache/pip/wheels/22/cc/2e/55980bfe86393df3e9896146a01f6802978d09d7ebcba5ea56\nSuccessfully built PTable\nInstalling collected packages: certifi, cachetools, six, pyasn1, pyasn1-modules, rsa, google-auth, python-dateutil, websocket-client, idna, charset-normalizer, urllib3, requests, oauthlib, requests-oauthlib, pyyaml, kubernetes, PTable\nSuccessfully installed PTable-0.9.2 cachetools-5.2.0 certifi-2022.12.7 charset-normalizer-2.1.1 google-auth-2.15.0 idna-3.4 kubernetes-11.0.0 oauthlib-3.2.2 pyasn1-0.4.8 pyasn1-modules-0.2.8 python-dateutil-2.8.2 pyyaml-6.0 requests-2.28.1 requests-oauthlib-1.3.1 rsa-4.9 six-1.16.0 urllib3-1.26.13 websocket-client-1.4.2\n\u001b[91mWARNING: You are using pip version 19.3.1; however, version 22.3.1 is available.\nYou should consider upgrading via the 'pip install --upgrade pip' command.\n\u001b[0mRemoving intermediate container 59878a197181\n ---> 5b222453e5a3\nStep 7/12 : FROM ${PYTHON_IMAGE} AS run-image\n ---> 577b86e4ee11\nStep 8/12 : COPY --from=build-image /usr/local /usr/local\n ---> 07ce3fbe2016\nStep 9/12 : COPY . /opt/kubiscan\n ---> b83b856a76a3\nStep 10/12 : RUN set -ex   && echo 'python3 /opt/kubiscan/KubiScan.py $@' > /usr/local/bin/kubiscan   && chmod a+x /usr/local/bin/kubiscan   && which kubiscan\n ---> Running in 28d171b5cc6c\n\u001b[91m+ echo python3 /opt/kubiscan/KubiScan.py $@\n\u001b[0m\u001b[91m+ chmod a+x /usr/local/bin/kubiscan\n\u001b[0m\u001b[91m+ which kubiscan\n\u001b[0m/usr/local/bin/kubiscan\nRemoving intermediate container 28d171b5cc6c\n ---> f6c5b0e5dc72\nStep 11/12 : RUN set -ex   && addgroup kubiscan   && adduser     --no-create-home     --disabled-password     --gecos ',,,,'     --ingroup kubiscan     --disabled-login     kubiscan   && > /var/log/faillog   && > /var/log/lastlog\n ---> Running in 21103738682e\n\u001b[91m+ addgroup kubiscan\n\u001b[0mAdding group `kubiscan' (GID 1000) ...\nDone.\n\u001b[91m+ adduser --no-create-home --disabled-password --gecos ,,,, --ingroup kubiscan --disabled-login kubiscan\n\u001b[0mAdding user `kubiscan' ...\nAdding new user `kubiscan' (1000) with group `kubiscan' ...\nNot creating home directory `/home/kubiscan'.\n\u001b[91m+ \n\u001b[0m\u001b[91m+ \n\u001b[0mRemoving intermediate container 21103738682e\n ---> c9b0ffce7b53\nStep 12/12 : ENV RUNNING_IN_A_CONTAINER=true\n ---> Running in ff07e95f3721\nRemoving intermediate container ff07e95f3721\n ---> e9e252672675\nSuccessfully built e9e252672675\nSuccessfully tagged kubiscan:latest\n","stderr":"","imageSize":344049263},"repair":{"violations":[],"repairedDockerfile":"# Default to the Docker Hub container registry\nARG DOCKER_REGISTRY=index.docker.io\n\n# Default to the official Python Debian image\nARG PYTHON_IMAGE=${DOCKER_REGISTRY}/python:3.8.0-slim-buster\n\n\nFROM ${PYTHON_IMAGE} AS build-image\n\nWORKDIR /tmp/build-kubiscan\nCOPY requirements.txt requirements.txt\n\n# The default image provides `pip`, `pip3`, `python` and `python3` commands and\n# for portability's sake, the `pip3` and `python3` names will be used in this\n# configuration.\n\n# Install Python dependencies from requirements.txt\n# As customary with Python projects, the requirements.txt, when provided,\n# should contain all packages necessary to run the Python source for the\n# project. As such changes to the dependencies would merely warrant a change to\n# the requirements.txt file, while the Dockerfile files remain unaffected.\nRUN pip3 install -r requirements.txt\n\n\nFROM ${PYTHON_IMAGE} AS run-image\n# Copy Python packages installed in the build stage\nCOPY --from=build-image /usr/local /usr/local\n\n# Copy source\nCOPY . /opt/kubiscan\n\n# Create kubiscan executable shortcut for all users\n# NOTE that this image does not default to using this shortcut but rather\n# resorts to directly starting the KubiScan Python script. It may prove useful\n# to remove this shortcut altogether unless end-users are expected to spawn a\n# Bash inside the resulting container in which case the `kubiscan` shortcut\n# will come in handy.\nRUN set -ex \\\n  && echo 'python3 /opt/kubiscan/KubiScan.py $@' > /usr/local/bin/kubiscan \\\n  && chmod a+x /usr/local/bin/kubiscan \\\n  && which kubiscan\n\n# Create a non-root user and group\nRUN set -ex \\\n  && addgroup kubiscan \\\n  && adduser \\\n    --no-create-home \\\n    --disabled-password \\\n    --gecos ',,,,' \\\n    --ingroup kubiscan \\\n    --disabled-login \\\n    kubiscan \\\n  && > /var/log/faillog \\\n  && > /var/log/lastlog\n\n# Environment variable to know if running in a container\nENV RUNNING_IN_A_CONTAINER=true"},"endTime":1672041339218}