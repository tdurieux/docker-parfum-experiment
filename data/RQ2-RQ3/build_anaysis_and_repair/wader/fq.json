{"repository":"https://github.com/wader/fq","dockerfilePath":"Dockerfile","startTime":1672632988040,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/wader/fq'...\n","error":null,"commit":"d13790826d7bb26e22b70999c8e65b04b3fed2e4"},"originalBuild":{"startTimestamp":1672632992668,"endTimestamp":1672633073781,"error":null,"stdout":"Sending build context to Docker daemon  99.72MB\r\r\nStep 1/17 : FROM golang:1.19.4-bullseye AS base\n1.19.4-bullseye: Pulling from library/golang\n32de3c850997: Already exists\nfa1d4c8d85a4: Already exists\nc796299bbbdd: Already exists\n81283a9569ad: Already exists\nc768848b86a2: Pulling fs layer\n3a3324c1d283: Pulling fs layer\nea43a17566db: Pulling fs layer\nea43a17566db: Download complete\nc768848b86a2: Verifying Checksum\nc768848b86a2: Download complete\n3a3324c1d283: Verifying Checksum\n3a3324c1d283: Download complete\nc768848b86a2: Pull complete\n3a3324c1d283: Pull complete\nea43a17566db: Pull complete\nDigest: sha256:9d235ae41bff699b44255bf912e77acac5046b06e61b018561239a35d9bd2ebb\nStatus: Downloaded newer image for golang:1.19.4-bullseye\n ---> 6650307efe4a\nStep 2/17 : RUN     apt-get update -q &&     apt-get install --no-install-recommends -qy     expect\n ---> Running in bdcb7537bc9b\nGet:1 http://deb.debian.org/debian bullseye InRelease [116 kB]\nGet:2 http://deb.debian.org/debian-security bullseye-security InRelease [48.4 kB]\nGet:3 http://deb.debian.org/debian bullseye-updates InRelease [44.1 kB]\nGet:4 http://deb.debian.org/debian bullseye/main amd64 Packages [8183 kB]\nGet:5 http://deb.debian.org/debian-security bullseye-security/main amd64 Packages [210 kB]\nGet:6 http://deb.debian.org/debian bullseye-updates/main amd64 Packages [14.6 kB]\nFetched 8616 kB in 2s (5590 kB/s)\nReading package lists...\nReading package lists...\nBuilding dependency tree...\nReading state information...\nThe following additional packages will be installed:\n  libtcl8.6 tcl-expect tcl8.6\nSuggested packages:\n  tk8.6 tcl-tclreadline\nThe following NEW packages will be installed:\n  expect libtcl8.6 tcl-expect tcl8.6\n0 upgraded, 4 newly installed, 0 to remove and 1 not upgraded.\nNeed to get 1441 kB of archives.\nAfter this operation, 5042 kB of additional disk space will be used.\nGet:1 http://deb.debian.org/debian bullseye/main amd64 libtcl8.6 amd64 8.6.11+dfsg-1 [1018 kB]\nGet:2 http://deb.debian.org/debian bullseye/main amd64 tcl8.6 amd64 8.6.11+dfsg-1 [124 kB]\nGet:3 http://deb.debian.org/debian bullseye/main amd64 tcl-expect amd64 5.45.4-2+b1 [133 kB]\nGet:4 http://deb.debian.org/debian bullseye/main amd64 expect amd64 5.45.4-2+b1 [166 kB]\n\u001b[91mdebconf: delaying package configuration, since apt-utils is not installed\n\u001b[0mFetched 1441 kB in 0s (13.3 MB/s)\nSelecting previously unselected package libtcl8.6:amd64.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 15718 files and directories currently installed.)\r\nPreparing to unpack .../libtcl8.6_8.6.11+dfsg-1_amd64.deb ...\r\nUnpacking libtcl8.6:amd64 (8.6.11+dfsg-1) ...\r\nSelecting previously unselected package tcl8.6.\r\nPreparing to unpack .../tcl8.6_8.6.11+dfsg-1_amd64.deb ...\r\nUnpacking tcl8.6 (8.6.11+dfsg-1) ...\r\nSelecting previously unselected package tcl-expect:amd64.\r\nPreparing to unpack .../tcl-expect_5.45.4-2+b1_amd64.deb ...\r\nUnpacking tcl-expect:amd64 (5.45.4-2+b1) ...\r\nSelecting previously unselected package expect.\r\nPreparing to unpack .../expect_5.45.4-2+b1_amd64.deb ...\r\nUnpacking expect (5.45.4-2+b1) ...\r\nSetting up libtcl8.6:amd64 (8.6.11+dfsg-1) ...\r\nSetting up tcl8.6 (8.6.11+dfsg-1) ...\r\nSetting up tcl-expect:amd64 (5.45.4-2+b1) ...\r\nSetting up expect (5.45.4-2+b1) ...\r\nProcessing triggers for libc-bin (2.31-13+deb11u5) ...\r\nRemoving intermediate container bdcb7537bc9b\n ---> a37ae8d97fc8\nStep 3/17 : FROM base AS dev\n ---> a37ae8d97fc8\nStep 4/17 : FROM base AS builder\n ---> a37ae8d97fc8\nStep 5/17 : WORKDIR $GOPATH/src/fq\n ---> Running in eef850b7fe91\nRemoving intermediate container eef850b7fe91\n ---> 9af7789cd08d\nStep 6/17 : COPY go.mod go.sum ./\n ---> e9ef2a87eb9d\nStep 7/17 : RUN go mod download\n ---> Running in 2febf86e8ccf\nRemoving intermediate container 2febf86e8ccf\n ---> 528501b35231\nStep 8/17 : COPY Makefile *.go ./\n ---> c0be84024dbe\nStep 9/17 : COPY pkg pkg\n ---> f89a1701a585\nStep 10/17 : COPY internal internal\n ---> 20fe2a8eb448\nStep 11/17 : COPY format format\n ---> b3072ba4f60d\nStep 12/17 : RUN make test fq\n ---> Running in f87189242596\ngo test -timeout 20m    ./format ./internal/aheadreadseeker ./internal/ansi ./internal/asciiwriter ./internal/ctxreadseeker ./internal/ctxstack ./internal/hexdump ./internal/hexpairwriter ./internal/mathex ./internal/recoverfn ./internal/shquote ./pkg/bitio ./pkg/interp ./pkg/ranges\nok  \tgithub.com/wader/fq/format\t10.036s\nok  \tgithub.com/wader/fq/internal/aheadreadseeker\t0.009s\nok  \tgithub.com/wader/fq/internal/ansi\t0.004s\nok  \tgithub.com/wader/fq/internal/asciiwriter\t0.001s\nok  \tgithub.com/wader/fq/internal/ctxreadseeker\t0.014s\nok  \tgithub.com/wader/fq/internal/ctxstack\t0.006s\n?   \tgithub.com/wader/fq/internal/hexdump\t[no test files]\nok  \tgithub.com/wader/fq/internal/hexpairwriter\t0.005s\nok  \tgithub.com/wader/fq/internal/mathex\t0.008s\nok  \tgithub.com/wader/fq/internal/recoverfn\t0.006s\nok  \tgithub.com/wader/fq/internal/shquote\t0.010s\nok  \tgithub.com/wader/fq/pkg/bitio\t0.047s\nok  \tgithub.com/wader/fq/pkg/interp\t3.782s\nok  \tgithub.com/wader/fq/pkg/ranges\t0.007s\nCGO_ENABLED=0 go build -o fq -ldflags \"-s -w\" -trimpath .\npkg/interp/args.jq.test\n1 of 1 tests passed\npkg/interp/query.jq.test\n1 of 1 tests passed\npkg/interp/funcs.jq.test\n9 of 9 tests passed\npkg/cli/test_exp.sh\npkg/cli/test_exp.sh\npkg/cli/test_exp.sh\nmake: 'fq' is up to date.\nRemoving intermediate container f87189242596\n ---> e40b83631892\nStep 13/17 : RUN cp fq /fq\n ---> Running in 5fb655d0390d\nRemoving intermediate container 5fb655d0390d\n ---> 55ef2486700c\nStep 14/17 : FROM scratch\n ---> \nStep 15/17 : COPY --from=builder /fq /fq\n ---> 7caca4ab6195\nStep 16/17 : RUN [\"/fq\", \"--version\"]\n ---> Running in 65eba56595be\n0.2.0 (linux amd64)\nRemoving intermediate container 65eba56595be\n ---> 7c748670ee5c\nStep 17/17 : ENTRYPOINT [\"/fq\"]\n ---> Running in dde3d3cffa45\nRemoving intermediate container dde3d3cffa45\n ---> ef6228fa22e6\nSuccessfully built ef6228fa22e6\nSuccessfully tagged fq:latest\n","stderr":"","imageSize":10039296},"repair":{"violations":[{"name":"ruleAptGetInstallThenRemoveAptLists","position":{"start":6,"end":7,"columnStart":4,"columnEnd":10}}],"repairedDockerfile":"# bump: docker-golang /FROM golang:([\\d.]+)/ docker:golang|^1\nFROM golang:1.19.4-bullseye AS base\n\n# expect is used to test cli\nRUN \\\n    apt-get update -q && \\\n    apt-get install --no-install-recommends -qy \\\n    expect\n\n# docker build --target dev -t fq-dev - < Dockerfile && docker run --rm -ti -v \"$PWD:/$PWD\" -w \"$PWD\" fq-dev\nFROM base AS dev\n\nFROM base AS builder\n\nWORKDIR $GOPATH/src/fq\nCOPY go.mod go.sum ./\nRUN go mod download\nCOPY Makefile *.go ./\nCOPY pkg pkg\nCOPY internal internal\nCOPY format format\nRUN make test fq\nRUN cp fq /fq\n\nFROM scratch\nCOPY --from=builder /fq /fq\nRUN [\"/fq\", \"--version\"]\nENTRYPOINT [\"/fq\"]\n"},"repairedBuild":{"startTimestamp":1672633074092,"endTimestamp":1672633136850,"error":null,"stdout":"Sending build context to Docker daemon  99.72MB\r\r\nStep 1/17 : FROM golang:1.19.4-bullseye AS base\n ---> 6650307efe4a\nStep 2/17 : RUN     apt-get update -q &&     apt-get install --no-install-recommends -qy     expect\n ---> Running in 03a961f9c6f2\nGet:1 http://deb.debian.org/debian bullseye InRelease [116 kB]\nGet:2 http://deb.debian.org/debian-security bullseye-security InRelease [48.4 kB]\nGet:3 http://deb.debian.org/debian bullseye-updates InRelease [44.1 kB]\nGet:4 http://deb.debian.org/debian bullseye/main amd64 Packages [8183 kB]\nGet:5 http://deb.debian.org/debian-security bullseye-security/main amd64 Packages [210 kB]\nGet:6 http://deb.debian.org/debian bullseye-updates/main amd64 Packages [14.6 kB]\nFetched 8616 kB in 1s (6906 kB/s)\nReading package lists...\nReading package lists...\nBuilding dependency tree...\nReading state information...\nThe following additional packages will be installed:\n  libtcl8.6 tcl-expect tcl8.6\nSuggested packages:\n  tk8.6 tcl-tclreadline\nThe following NEW packages will be installed:\n  expect libtcl8.6 tcl-expect tcl8.6\n0 upgraded, 4 newly installed, 0 to remove and 1 not upgraded.\nNeed to get 1441 kB of archives.\nAfter this operation, 5042 kB of additional disk space will be used.\nGet:1 http://deb.debian.org/debian bullseye/main amd64 libtcl8.6 amd64 8.6.11+dfsg-1 [1018 kB]\nGet:2 http://deb.debian.org/debian bullseye/main amd64 tcl8.6 amd64 8.6.11+dfsg-1 [124 kB]\nGet:3 http://deb.debian.org/debian bullseye/main amd64 tcl-expect amd64 5.45.4-2+b1 [133 kB]\nGet:4 http://deb.debian.org/debian bullseye/main amd64 expect amd64 5.45.4-2+b1 [166 kB]\n\u001b[91mdebconf: delaying package configuration, since apt-utils is not installed\n\u001b[0mFetched 1441 kB in 0s (35.5 MB/s)\nSelecting previously unselected package libtcl8.6:amd64.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 15718 files and directories currently installed.)\r\nPreparing to unpack .../libtcl8.6_8.6.11+dfsg-1_amd64.deb ...\r\nUnpacking libtcl8.6:amd64 (8.6.11+dfsg-1) ...\r\nSelecting previously unselected package tcl8.6.\r\nPreparing to unpack .../tcl8.6_8.6.11+dfsg-1_amd64.deb ...\r\nUnpacking tcl8.6 (8.6.11+dfsg-1) ...\r\nSelecting previously unselected package tcl-expect:amd64.\r\nPreparing to unpack .../tcl-expect_5.45.4-2+b1_amd64.deb ...\r\nUnpacking tcl-expect:amd64 (5.45.4-2+b1) ...\r\nSelecting previously unselected package expect.\r\nPreparing to unpack .../expect_5.45.4-2+b1_amd64.deb ...\r\nUnpacking expect (5.45.4-2+b1) ...\r\nSetting up libtcl8.6:amd64 (8.6.11+dfsg-1) ...\r\nSetting up tcl8.6 (8.6.11+dfsg-1) ...\r\nSetting up tcl-expect:amd64 (5.45.4-2+b1) ...\r\nSetting up expect (5.45.4-2+b1) ...\r\nProcessing triggers for libc-bin (2.31-13+deb11u5) ...\r\nRemoving intermediate container 03a961f9c6f2\n ---> b7bb526ab7b2\nStep 3/17 : FROM base AS dev\n ---> b7bb526ab7b2\nStep 4/17 : FROM base AS builder\n ---> b7bb526ab7b2\nStep 5/17 : WORKDIR $GOPATH/src/fq\n ---> Running in f3cdeba24143\nRemoving intermediate container f3cdeba24143\n ---> 5c3240464bba\nStep 6/17 : COPY go.mod go.sum ./\n ---> 050b77665129\nStep 7/17 : RUN go mod download\n ---> Running in 1d227e161f3f\nRemoving intermediate container 1d227e161f3f\n ---> 8ee86501b53f\nStep 8/17 : COPY Makefile *.go ./\n ---> 7e0af89f84ec\nStep 9/17 : COPY pkg pkg\n ---> e1d333d2b5c2\nStep 10/17 : COPY internal internal\n ---> 43dcd89d000d\nStep 11/17 : COPY format format\n ---> 9ee2416b8d79\nStep 12/17 : RUN make test fq\n ---> Running in e22b888d30ce\ngo test -timeout 20m    ./format ./internal/aheadreadseeker ./internal/ansi ./internal/asciiwriter ./internal/ctxreadseeker ./internal/ctxstack ./internal/hexdump ./internal/hexpairwriter ./internal/mathex ./internal/recoverfn ./internal/shquote ./pkg/bitio ./pkg/interp ./pkg/ranges\nok  \tgithub.com/wader/fq/format\t9.563s\nok  \tgithub.com/wader/fq/internal/aheadreadseeker\t0.002s\nok  \tgithub.com/wader/fq/internal/ansi\t0.011s\nok  \tgithub.com/wader/fq/internal/asciiwriter\t0.010s\nok  \tgithub.com/wader/fq/internal/ctxreadseeker\t0.023s\nok  \tgithub.com/wader/fq/internal/ctxstack\t0.012s\n?   \tgithub.com/wader/fq/internal/hexdump\t[no test files]\nok  \tgithub.com/wader/fq/internal/hexpairwriter\t0.009s\nok  \tgithub.com/wader/fq/internal/mathex\t0.003s\nok  \tgithub.com/wader/fq/internal/recoverfn\t0.003s\nok  \tgithub.com/wader/fq/internal/shquote\t0.004s\nok  \tgithub.com/wader/fq/pkg/bitio\t0.050s\nok  \tgithub.com/wader/fq/pkg/interp\t3.949s\nok  \tgithub.com/wader/fq/pkg/ranges\t0.008s\nCGO_ENABLED=0 go build -o fq -ldflags \"-s -w\" -trimpath .\npkg/interp/args.jq.test\n1 of 1 tests passed\npkg/interp/query.jq.test\n1 of 1 tests passed\npkg/interp/funcs.jq.test\n9 of 9 tests passed\npkg/cli/test_exp.sh\npkg/cli/test_exp.sh\npkg/cli/test_exp.sh\nmake: 'fq' is up to date.\nRemoving intermediate container e22b888d30ce\n ---> 5044b703764e\nStep 13/17 : RUN cp fq /fq\n ---> Running in 48e8f17074d6\nRemoving intermediate container 48e8f17074d6\n ---> 2c5d7b857907\nStep 14/17 : FROM scratch\n ---> \nStep 15/17 : COPY --from=builder /fq /fq\n ---> 40adb4be2c55\nStep 16/17 : RUN [\"/fq\", \"--version\"]\n ---> Running in e37c9e634b8b\n0.2.0 (linux amd64)\nRemoving intermediate container e37c9e634b8b\n ---> fb4d5b874d57\nStep 17/17 : ENTRYPOINT [\"/fq\"]\n ---> Running in ade1b4bea970\nRemoving intermediate container ade1b4bea970\n ---> 3a1aeebc8444\nSuccessfully built 3a1aeebc8444\nSuccessfully tagged fq:latest\n","stderr":"","imageSize":10039296},"endTime":1672633137287}