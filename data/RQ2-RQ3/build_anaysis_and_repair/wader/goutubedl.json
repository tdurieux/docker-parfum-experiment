{"repository":"https://github.com/wader/goutubedl","dockerfilePath":"Dockerfile","startTime":1672438339353,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/wader/goutubedl'...\n","error":null,"commit":"6c90f272c96dc406d6efeeb431234a07e342b3d7"},"originalBuild":{"startTimestamp":1672438340122,"endTimestamp":1672438410863,"error":null,"stdout":"Sending build context to Docker daemon  132.1kB\r\r\nStep 1/11 : ARG GOLANG_VERSION=1.19.4\nStep 2/11 : ARG YT_DLP=2022.11.11\nStep 3/11 : FROM golang:$GOLANG_VERSION AS base\n1.19.4: Pulling from library/golang\n32de3c850997: Already exists\nfa1d4c8d85a4: Already exists\nc796299bbbdd: Already exists\n81283a9569ad: Already exists\nc768848b86a2: Pulling fs layer\n3a3324c1d283: Pulling fs layer\nea43a17566db: Pulling fs layer\nea43a17566db: Verifying Checksum\nea43a17566db: Download complete\nc768848b86a2: Download complete\n3a3324c1d283: Verifying Checksum\n3a3324c1d283: Download complete\nc768848b86a2: Pull complete\n3a3324c1d283: Pull complete\nea43a17566db: Pull complete\nDigest: sha256:660f138b4477001d65324a51fa158c1b868651b44e43f0953bf062e9f38b72f3\nStatus: Downloaded newer image for golang:1.19.4\n ---> 6650307efe4a\nStep 4/11 : ARG YT_DLP\n ---> Running in fb05b5e0b592\nRemoving intermediate container fb05b5e0b592\n ---> 13a64a6331ec\nStep 5/11 : RUN   apt-get update -q &&   apt-get install -y -q python-is-python3 &&   curl -L https://github.com/yt-dlp/yt-dlp/releases/download/$YT_DLP/yt-dlp -o /usr/local/bin/yt-dlp &&   chmod a+x /usr/local/bin/yt-dlp\n ---> Running in 1197475e1e43\nGet:1 http://deb.debian.org/debian bullseye InRelease [116 kB]\nGet:2 http://deb.debian.org/debian-security bullseye-security InRelease [48.4 kB]\nGet:3 http://deb.debian.org/debian bullseye-updates InRelease [44.1 kB]\nGet:4 http://deb.debian.org/debian bullseye/main amd64 Packages [8183 kB]\nGet:5 http://deb.debian.org/debian-security bullseye-security/main amd64 Packages [210 kB]\nGet:6 http://deb.debian.org/debian bullseye-updates/main amd64 Packages [14.6 kB]\nFetched 8616 kB in 1s (6840 kB/s)\nReading package lists...\nReading package lists...\nBuilding dependency tree...\nReading state information...\nThe following NEW packages will be installed:\n  python-is-python3\n0 upgraded, 1 newly installed, 0 to remove and 1 not upgraded.\nNeed to get 2800 B of archives.\nAfter this operation, 13.3 kB of additional disk space will be used.\nGet:1 http://deb.debian.org/debian bullseye/main amd64 python-is-python3 all 3.9.2-1 [2800 B]\n\u001b[91mdebconf: delaying package configuration, since apt-utils is not installed\n\u001b[0mFetched 2800 B in 0s (168 kB/s)\nSelecting previously unselected package python-is-python3.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 15718 files and directories currently installed.)\r\nPreparing to unpack .../python-is-python3_3.9.2-1_all.deb ...\r\nUnpacking python-is-python3 (3.9.2-1) ...\r\nSetting up python-is-python3 (3.9.2-1) ...\r\n\u001b[91m  % Total    % Recei\u001b[0m\u001b[91mved % Xferd  \u001b[0m\u001b[91mAve\u001b[0m\u001b[91mrag\u001b[0m\u001b[91me \u001b[0m\u001b[91mSp\u001b[0m\u001b[91meed  \u001b[0m\u001b[91m Time \u001b[0m\u001b[91m   T\u001b[0m\u001b[91mime\u001b[0m\u001b[91m     \u001b[0m\u001b[91mTim\u001b[0m\u001b[91me  Current\u001b[0m\u001b[91m\n               \u001b[0m\u001b[91m           \u001b[0m\u001b[91m  \u001b[0m\u001b[91m     D\u001b[0m\u001b[91ml\u001b[0m\u001b[91moad  \u001b[0m\u001b[91mUpload   \u001b[0m\u001b[91mTo\u001b[0m\u001b[91mtal\u001b[0m\u001b[91m   Sp\u001b[0m\u001b[91ment  \u001b[0m\u001b[91m  \u001b[0m\u001b[91mLeft  \u001b[0m\u001b[91mSpe\u001b[0m\u001b[91med\n\u001b[0m\u001b[91m\r\u001b[0m\u001b[91m  0 \u001b[0m\u001b[91m    0    \u001b[0m\u001b[91m0  \u001b[0m\u001b[91m   \u001b[0m\u001b[91m0    0   \u001b[0m\u001b[91m  0  \u001b[0m\u001b[91m  \u001b[0m\u001b[91m  \u001b[0m\u001b[91m0  \u001b[0m\u001b[91m   \u001b[0m\u001b[91m 0\u001b[0m\u001b[91m --\u001b[0m\u001b[91m:--:-\u001b[0m\u001b[91m- -\u001b[0m\u001b[91m-:--:\u001b[0m\u001b[91m-- --:\u001b[0m\u001b[91m--:--\u001b[0m\u001b[91m  \u001b[0m\u001b[91m  \u001b[0m\u001b[91m 0\u001b[0m\u001b[91m\r  0     0    0     0   \u001b[0m\u001b[91m 0    \u001b[0m\u001b[91m 0      0    \u001b[0m\u001b[91m  0 --:--:-- --:\u001b[0m\u001b[91m--:-- --:\u001b[0m\u001b[91m--:--  \u001b[0m\u001b[91m   \u001b[0m\u001b[91m0\n\u001b[0m\u001b[91m\r100 2583k  100 2583k    0    \u001b[0m\u001b[91m 0  6021k\u001b[0m\u001b[91m     \u001b[0m\u001b[91m 0 --:--:-- --\u001b[0m\u001b[91m:--:-- --:--:--\u001b[0m\u001b[91m 6021k\n\u001b[0mRemoving intermediate container 1197475e1e43\n ---> 6acaa44c8878\nStep 6/11 : FROM base AS dev\n ---> 6acaa44c8878\nStep 7/11 : FROM base\n ---> 6acaa44c8878\nStep 8/11 : WORKDIR /src\n ---> Running in 7ae894d0e9be\nRemoving intermediate container 7ae894d0e9be\n ---> 9e3f39312319\nStep 9/11 : COPY go.* *.go ./\n ---> a6e47bb0f3dd\nStep 10/11 : COPY cmd cmd\n ---> 186eb82ab773\nStep 11/11 : RUN   go mod download &&   go build ./cmd/goutubedl &&   go test -v -race -cover\n ---> Running in 5e83a4c26866\n=== RUN   TestBinaryNotPath\n--- PASS: TestBinaryNotPath (0.06s)\n=== RUN   TestVersion\n--- PASS: TestVersion (0.50s)\n=== RUN   TestDownload\n--- PASS: TestDownload (2.11s)\n=== RUN   TestParseInfo\n=== RUN   TestParseInfo/https://soundcloud.com/avalonemerson/avalon-emerson-live-at-printworks-london-march-2017\n=== RUN   TestParseInfo/https://www.infoq.com/presentations/Simple-Made-Easy\n=== RUN   TestParseInfo/https://www.youtube.com/watch?v=uVYWQJ5BB_w\n--- PASS: TestParseInfo (7.39s)\n    --- PASS: TestParseInfo/https://soundcloud.com/avalonemerson/avalon-emerson-live-at-printworks-london-march-2017 (2.22s)\n    --- PASS: TestParseInfo/https://www.infoq.com/presentations/Simple-Made-Easy (3.63s)\n    --- PASS: TestParseInfo/https://www.youtube.com/watch?v=uVYWQJ5BB_w (1.53s)\n=== RUN   TestPlaylist\n--- PASS: TestPlaylist (3.85s)\n=== RUN   TestTestUnsupportedURL\n--- PASS: TestTestUnsupportedURL (3.19s)\n=== RUN   TestPlaylistWithPrivateVideo\n--- PASS: TestPlaylistWithPrivateVideo (2.92s)\n=== RUN   TestSubtitles\n--- PASS: TestSubtitles (2.70s)\n=== RUN   TestErrorNotAPlaylist\n--- PASS: TestErrorNotAPlaylist (1.37s)\n=== RUN   TestErrorNotASingleEntry\n--- PASS: TestErrorNotASingleEntry (3.73s)\nPASS\ncoverage: 88.1% of statements\nok  \tgithub.com/wader/goutubedl\t27.860s\nRemoving intermediate container 5e83a4c26866\n ---> e5a6de3d4ac0\nSuccessfully built e5a6de3d4ac0\nSuccessfully tagged goutubedl:latest\n","stderr":"","imageSize":1023315167},"repair":{"violations":[{"name":"curlUseFlagF","position":{"start":13,"end":13,"columnStart":2,"columnEnd":100}},{"name":"ruleAptGetInstallUseNoRec","position":{"start":12,"end":12,"columnStart":2,"columnEnd":41}},{"name":"ruleAptGetInstallThenRemoveAptLists","position":{"start":12,"end":12,"columnStart":2,"columnEnd":41}}],"repairedDockerfile":"# bump: golang link \"Release notes\" https://golang.org/doc/devel/release.html\nARG GOLANG_VERSION=1.19.4\n# bump: yt-dlp /YT_DLP=([\\d.-]+)/ https://github.com/yt-dlp/yt-dlp.git|/^\\d/|sort\n# bump: yt-dlp link \"Release notes\" https://github.com/yt-dlp/yt-dlp/releases/tag/$LATEST\nARG YT_DLP=2022.11.11\n\nFROM golang:$GOLANG_VERSION AS base\nARG YT_DLP\n\nRUN \\\n  apt-get update -q && \\\n  apt-get install --no-install-recommends -y -q python-is-python3 && \\\n  curl -f -L https://github.com/yt-dlp/yt-dlp/releases/download/$YT_DLP/yt-dlp -o /usr/local/bin/yt-dlp && \\\n  chmod a+x /usr/local/bin/yt-dlp\n\nFROM base AS dev\n\nFROM base\nWORKDIR /src\nCOPY go.* *.go ./\nCOPY cmd cmd\nRUN \\\n  go mod download && \\\n  go build ./cmd/goutubedl && \\\n  go test -v -race -cover\n"},"repairedBuild":{"startTimestamp":1672438411231,"endTimestamp":1672438460432,"error":null,"stdout":"Sending build context to Docker daemon  132.1kB\r\r\nStep 1/11 : ARG GOLANG_VERSION=1.19.4\nStep 2/11 : ARG YT_DLP=2022.11.11\nStep 3/11 : FROM golang:$GOLANG_VERSION AS base\n ---> 6650307efe4a\nStep 4/11 : ARG YT_DLP\n ---> Running in 03b5e98e931f\nRemoving intermediate container 03b5e98e931f\n ---> 0d5ca8f3ca19\nStep 5/11 : RUN   apt-get update -q &&   apt-get install --no-install-recommends -y -q python-is-python3 &&   curl -f -L https://github.com/yt-dlp/yt-dlp/releases/download/$YT_DLP/yt-dlp -o /usr/local/bin/yt-dlp &&   chmod a+x /usr/local/bin/yt-dlp\n ---> Running in a921899e9900\nGet:1 http://deb.debian.org/debian bullseye InRelease [116 kB]\nGet:2 http://deb.debian.org/debian-security bullseye-security InRelease [48.4 kB]\nGet:3 http://deb.debian.org/debian bullseye-updates InRelease [44.1 kB]\nGet:4 http://deb.debian.org/debian bullseye/main amd64 Packages [8183 kB]\nGet:5 http://deb.debian.org/debian-security bullseye-security/main amd64 Packages [210 kB]\nGet:6 http://deb.debian.org/debian bullseye-updates/main amd64 Packages [14.6 kB]\nFetched 8616 kB in 1s (6954 kB/s)\nReading package lists...\nReading package lists...\nBuilding dependency tree...\nReading state information...\nThe following NEW packages will be installed:\n  python-is-python3\n0 upgraded, 1 newly installed, 0 to remove and 1 not upgraded.\nNeed to get 2800 B of archives.\nAfter this operation, 13.3 kB of additional disk space will be used.\nGet:1 http://deb.debian.org/debian bullseye/main amd64 python-is-python3 all 3.9.2-1 [2800 B]\n\u001b[91mdebconf: delaying package configuration, since apt-utils is not installed\n\u001b[0mFetched 2800 B in 0s (151 kB/s)\nSelecting previously unselected package python-is-python3.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 15718 files and directories currently installed.)\r\nPreparing to unpack .../python-is-python3_3.9.2-1_all.deb ...\r\nUnpacking python-is-python3 (3.9.2-1) ...\r\nSetting up python-is-python3 (3.9.2-1) ...\r\n\u001b[91m  % Total    % Received % Xferd  \u001b[0m\u001b[91mAverage Speed   Time    Ti\u001b[0m\u001b[91mme     T\u001b[0m\u001b[91mime  Current\n \u001b[0m\u001b[91m   \u001b[0m\u001b[91m   \u001b[0m\u001b[91m     \u001b[0m\u001b[91m \u001b[0m\u001b[91m    \u001b[0m\u001b[91m    \u001b[0m\u001b[91m          \u001b[0m\u001b[91m  Dload  Upload   Total\u001b[0m\u001b[91m   Spe\u001b[0m\u001b[91mnt \u001b[0m\u001b[91m  \u001b[0m\u001b[91m \u001b[0m\u001b[91mLe\u001b[0m\u001b[91mft \u001b[0m\u001b[91m Speed\n\u001b[0m\u001b[91m\r  0  \u001b[0m\u001b[91m   0 \u001b[0m\u001b[91m   \u001b[0m\u001b[91m0   \u001b[0m\u001b[91m  0 \u001b[0m\u001b[91m   0  \u001b[0m\u001b[91m \u001b[0m\u001b[91m  \u001b[0m\u001b[91m0  \u001b[0m\u001b[91m  \u001b[0m\u001b[91m  \u001b[0m\u001b[91m0  \u001b[0m\u001b[91m  \u001b[0m\u001b[91m \u001b[0m\u001b[91m 0\u001b[0m\u001b[91m -\u001b[0m\u001b[91m-:-\u001b[0m\u001b[91m-:\u001b[0m\u001b[91m--\u001b[0m\u001b[91m -\u001b[0m\u001b[91m-:\u001b[0m\u001b[91m--:\u001b[0m\u001b[91m--\u001b[0m\u001b[91m -\u001b[0m\u001b[91m-:\u001b[0m\u001b[91m--:\u001b[0m\u001b[91m--\u001b[0m\u001b[91m  \u001b[0m\u001b[91m  \u001b[0m\u001b[91m 0\u001b[0m\u001b[91m\r  0     0    0     0  \u001b[0m\u001b[91m  0     0\u001b[0m\u001b[91m      0     \u001b[0m\u001b[91m 0 --:--:-- --:-\u001b[0m\u001b[91m-:-- \u001b[0m\u001b[91m--:--\u001b[0m\u001b[91m:-- \u001b[0m\u001b[91m    0\n\u001b[0m\u001b[91m\r  0 2583k    0     0    0     0      0      0 --:--\u001b[0m\u001b[91m:-- --:--:-- --:--:--   \u001b[0m\u001b[91m  0\u001b[0m\u001b[91m\r100 2583k  100 2583k    0     0  9973k      0 --:--:-- --:--:-- --:--:-- 81.3M\n\u001b[0mRemoving intermediate container a921899e9900\n ---> 29e764ff37a1\nStep 6/11 : FROM base AS dev\n ---> 29e764ff37a1\nStep 7/11 : FROM base\n ---> 29e764ff37a1\nStep 8/11 : WORKDIR /src\n ---> Running in 8258380c6ace\nRemoving intermediate container 8258380c6ace\n ---> 2ae77301d7f1\nStep 9/11 : COPY go.* *.go ./\n ---> 8da1bb6e215b\nStep 10/11 : COPY cmd cmd\n ---> 55f2c7793074\nStep 11/11 : RUN   go mod download &&   go build ./cmd/goutubedl &&   go test -v -race -cover\n ---> Running in ca64a2fc6064\n=== RUN   TestBinaryNotPath\n--- PASS: TestBinaryNotPath (0.06s)\n=== RUN   TestVersion\n--- PASS: TestVersion (0.54s)\n=== RUN   TestDownload\n--- PASS: TestDownload (2.01s)\n=== RUN   TestParseInfo\n=== RUN   TestParseInfo/https://soundcloud.com/avalonemerson/avalon-emerson-live-at-printworks-london-march-2017\n=== RUN   TestParseInfo/https://www.infoq.com/presentations/Simple-Made-Easy\n=== RUN   TestParseInfo/https://www.youtube.com/watch?v=uVYWQJ5BB_w\n--- PASS: TestParseInfo (6.69s)\n    --- PASS: TestParseInfo/https://soundcloud.com/avalonemerson/avalon-emerson-live-at-printworks-london-march-2017 (1.64s)\n    --- PASS: TestParseInfo/https://www.infoq.com/presentations/Simple-Made-Easy (3.54s)\n    --- PASS: TestParseInfo/https://www.youtube.com/watch?v=uVYWQJ5BB_w (1.51s)\n=== RUN   TestPlaylist\n--- PASS: TestPlaylist (3.90s)\n=== RUN   TestTestUnsupportedURL\n--- PASS: TestTestUnsupportedURL (3.22s)\n=== RUN   TestPlaylistWithPrivateVideo\n--- PASS: TestPlaylistWithPrivateVideo (2.65s)\n=== RUN   TestSubtitles\n--- PASS: TestSubtitles (2.76s)\n=== RUN   TestErrorNotAPlaylist\n--- PASS: TestErrorNotAPlaylist (1.27s)\n=== RUN   TestErrorNotASingleEntry\n--- PASS: TestErrorNotASingleEntry (3.87s)\nPASS\ncoverage: 88.1% of statements\nok  \tgithub.com/wader/goutubedl\t27.016s\nRemoving intermediate container ca64a2fc6064\n ---> ffefc4a711b2\nSuccessfully built ffefc4a711b2\nSuccessfully tagged goutubedl:latest\n","stderr":"","imageSize":1023315191},"endTime":1672438460695}