{"repository":"https://github.com/laverdet/xxscreeps","dockerfilePath":"Dockerfile","startTime":1672379467735,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/laverdet/xxscreeps'...\n","error":null,"commit":"eb7a2ef0432e61e83340ab573793ad72ab80d5ef"},"originalBuild":{"startTimestamp":1672379468889,"endTimestamp":1672379633577,"error":null,"stdout":"Sending build context to Docker daemon  2.512MB\r\r\nStep 1/14 : FROM node:16 as build\n16: Pulling from library/node\nc7c50787e2da: Already exists\naff359114acb: Pulling fs layer\n821dc261e045: Pulling fs layer\n3790459d63d5: Pulling fs layer\nc09b016fff62: Pulling fs layer\n5348855a40c0: Pulling fs layer\n8f331a0ab6eb: Pulling fs layer\n1b7fba8c2ddb: Pulling fs layer\n138e31cf9c76: Pulling fs layer\n8f331a0ab6eb: Waiting\n5348855a40c0: Waiting\nc09b016fff62: Waiting\n1b7fba8c2ddb: Waiting\n138e31cf9c76: Waiting\naff359114acb: Verifying Checksum\naff359114acb: Download complete\n821dc261e045: Verifying Checksum\n821dc261e045: Download complete\n5348855a40c0: Verifying Checksum\n5348855a40c0: Download complete\n3790459d63d5: Verifying Checksum\n3790459d63d5: Download complete\naff359114acb: Pull complete\n1b7fba8c2ddb: Verifying Checksum\n1b7fba8c2ddb: Download complete\n8f331a0ab6eb: Verifying Checksum\n8f331a0ab6eb: Download complete\n138e31cf9c76: Verifying Checksum\n138e31cf9c76: Download complete\n821dc261e045: Pull complete\nc09b016fff62: Verifying Checksum\nc09b016fff62: Download complete\n3790459d63d5: Pull complete\nc09b016fff62: Pull complete\n5348855a40c0: Pull complete\n8f331a0ab6eb: Pull complete\n1b7fba8c2ddb: Pull complete\n138e31cf9c76: Pull complete\nDigest: sha256:64e8bcdfdad6718050801a2639f7e6645fdaf85ec37a98cdb61f6a5331217618\nStatus: Downloaded newer image for node:16\n ---> c910109adbfd\nStep 2/14 : WORKDIR /usr/app/xxscreeps\n ---> Running in 1ca48d03caa0\nRemoving intermediate container 1ca48d03caa0\n ---> 337f7bb83165\nStep 3/14 : RUN touch .screepsrc.yaml\n ---> Running in 12adde3f5dd0\nRemoving intermediate container 12adde3f5dd0\n ---> 190d316bc6cd\nStep 4/14 : COPY package*.json ./\n ---> a9e7a8d06d21\nStep 5/14 : COPY bin bin\n ---> b26551061c65\nStep 6/14 : RUN npm install\n ---> Running in bebe9bdd4289\n\u001b[91mnpm WARN skipping integrity check for git dependency ssh://git@github.com/laverdet/eslint-config.git \n\u001b[0m\u001b[91mnpm WARN deprecated uuid@3.4.0: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.\n\u001b[0m\u001b[91mnpm WARN deprecated jquery.terminal@0.11.23: Scroll issue in Chrome fixed in version 1.0.5\n\u001b[0m\u001b[91mnpm WARN deprecated angular@1.8.3: For the actively supported Angular, see https://www.npmjs.com/package/@angular/core. AngularJS support has officially ended. For extended AngularJS support options, see https://goo.gle/angularjs-path-forward.\n\u001b[0m\nadded 471 packages, and audited 473 packages in 1m\n\n57 packages are looking for funding\n  run `npm fund` for details\n\n13 vulnerabilities (6 moderate, 4 high, 3 critical)\n\nTo address issues that do not require attention, run:\n  npm audit fix\n\nTo address all issues possible (including breaking changes), run:\n  npm audit fix --force\n\nSome issues need review, and may require choosing\na different dependency.\n\nRun `npm audit` for details.\n\u001b[91mnpm notice \nnpm notice New major version of npm available! 8.19.3 -> 9.2.0\nnpm notice Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm notice Run `npm install -g npm@9.2.0` to update!\nnpm notice \n\u001b[0mRemoving intermediate container bebe9bdd4289\n ---> b4cb94437b16\nStep 7/14 : COPY tsconfig*.json ./\n ---> a68fb6d7aa2f\nStep 8/14 : COPY src src\n ---> 75e448aa90b4\nStep 9/14 : RUN echo 'update-notifier=false' >> .npmrc && \tnpm explore @xxscreeps/path-finder -- npm install && \tnpm run build\n ---> Running in bbd2d3081907\n\n> install\n> node-gyp rebuild --release\n\n\u001b[91mgyp\u001b[0m\u001b[91m info it worked if it ends with ok\n\u001b[0m\u001b[91mgyp info using node-gyp@9.1.0\ngyp info using\u001b[0m\u001b[91m node@16.19.0 | linux | x64\n\u001b[0m\u001b[91mgyp info\u001b[0m\u001b[91m \u001b[0m\u001b[91mfind Python\u001b[0m\u001b[91m using Python version 3.7.3 found at \"/usr/bin/python3\"\n\u001b[0m\u001b[91mgyp info spawn /usr/bin/python3\n\u001b[0m\u001b[91mgyp info spawn args [\ngyp info spawn args   '/usr/local/lib/node_modules/npm/node_modules/node-gyp/gyp/gyp_main.py',\ngyp info\u001b[0m\u001b[91m spawn args   'binding.gyp',\ngyp \u001b[0m\u001b[91minfo spawn args   '-f',\n\u001b[0m\u001b[91mgyp info spawn args   'make',\ngyp info spawn args   '-I',\ngyp info spawn args   '/usr/app/xxscreeps/src/driver/path-finder/build/config.gypi',\ngyp info spawn args   '-I',\ngyp\u001b[0m\u001b[91m info spawn args   '/usr/local/lib/node_modules/npm/node_modules/node-gyp/addon.gypi',\ngyp info spawn args   '-I',\ngyp info spawn args   '/root/.cache/node-gyp/16.19.0/include/node/common.gypi',\ngyp info spawn args   '-Dlibrary=shared_library',\n\u001b[0m\u001b[91mgyp info\u001b[0m\u001b[91m spawn args   '-Dvisibility=default',\ngyp info spawn args\u001b[0m\u001b[91m   '-Dnode_root_dir=/root/.cache/node-gyp/16.19.0',\ngyp info spawn args   '-Dnode_gyp_dir=/usr/local/lib/node_modules/npm/node_modules/node-gyp',\ngyp\u001b[0m\u001b[91m info spawn args   '-Dnode_lib_file=/root/.cache/node-gyp/16.19.0/<(target_arch)/node.lib',\ngyp info spawn args   '-Dmodule_root_dir=/usr/app/xxscreeps/src/driver/path-finder',\ngyp\u001b[0m\u001b[91m info spawn args   '-Dnode_engine=v8',\ngyp info spawn args   '--depth=.',\n\u001b[0m\u001b[91mgyp \u001b[0m\u001b[91minfo spawn args   '--no-parallel',\n\u001b[0m\u001b[91mgyp info \u001b[0m\u001b[91mspawn args   '--generator-output',\ngyp info spawn args\u001b[0m\u001b[91m   'build',\ngyp info\u001b[0m\u001b[91m spawn args   '-Goutput_dir=.'\ngyp\u001b[0m\u001b[91m info spawn args ]\n\u001b[0m\u001b[91mgyp info spawn make\n\u001b[0m\u001b[91mgyp info spawn args [ 'BUILDTYPE=Release', '-C', 'build' ]\n\u001b[0mmake: Entering directory '/usr/app/xxscreeps/src/driver/path-finder/build'\n  CXX(target) Release/obj.target/pf/main.o\n  CXX(target) Release/obj.target/pf/pf.o\n\u001b[91mIn file included from ../pf.cc:2:\n../pf.h: In member function 'screeps::world_position_t screeps::world_position_t::position_in_direction(screeps::world_position_t::direction_t) const':\n../pf.h:111:3: warning: control reaches end of non-void function [-Wreturn-type]\n   }\n   ^\n\u001b[0m  SOLINK_MODULE(target) Release/obj.target/pf.node\n  COPY Release/pf.node\n  COPY ../out/x64-linux-v16.19.0/pf.node\n  TOUCH Release/obj.target/action_after_build.stamp\nmake: Leaving directory '/usr/app/xxscreeps/src/driver/path-finder/build'\n\u001b[91mgyp info ok\u001b[0m\u001b[91m \n\u001b[0m\n> postinstall\n> node-gyp clean\n\n\u001b[91mgyp\u001b[0m\u001b[91m info it worked if it ends with\u001b[0m\u001b[91m ok\n\u001b[0m\u001b[91mgyp info\u001b[0m\u001b[91m using node-gyp@9.1.0\n\u001b[0m\u001b[91mgyp \u001b[0m\u001b[91minfo using node@16.19.0 | linux | x64\n\u001b[0m\u001b[91mgyp info ok \n\u001b[0m\nup to date, audited 1 package in 4s\n\nfound 0 vulnerabilities\n\n> xxscreeps@0.0.6 build\n> tsc\n\nRemoving intermediate container bbd2d3081907\n ---> 4f0c2eded66f\nStep 10/14 : FROM node:16-slim as run\n16-slim: Pulling from library/node\nb52ebda398ed: Already exists\nab06655d5b64: Pulling fs layer\n0d704ee2c0cf: Pulling fs layer\n977a2fe43c7f: Pulling fs layer\n4315dadb9483: Pulling fs layer\nab06655d5b64: Verifying Checksum\nab06655d5b64: Download complete\n977a2fe43c7f: Verifying Checksum\n977a2fe43c7f: Download complete\nab06655d5b64: Pull complete\n0d704ee2c0cf: Verifying Checksum\n0d704ee2c0cf: Download complete\n4315dadb9483: Verifying Checksum\n0d704ee2c0cf: Pull complete\n977a2fe43c7f: Pull complete\n4315dadb9483: Pull complete\nDigest: sha256:8e381b023efcf7a2fa4fb4e904ec9348d77bd3fc59f4551702db9aa52484082e\nStatus: Downloaded newer image for node:16-slim\n ---> 5fb222735b86\nStep 11/14 : WORKDIR /usr/app/xxscreeps\n ---> Running in c873c9289869\nRemoving intermediate container c873c9289869\n ---> badf032ed99d\nStep 12/14 : COPY --from=build /usr/app/xxscreeps/ ./\n ---> 6a1103c8f075\nStep 13/14 : EXPOSE 21025\n ---> Running in 914d1a036b8c\nRemoving intermediate container 914d1a036b8c\n ---> 2e57c335c7c3\nStep 14/14 : ENTRYPOINT /bin/sh -c 'npx xxscreeps import --dont-overwrite && npx xxscreeps start'\n ---> Running in 05ab931c1b25\nRemoving intermediate container 05ab931c1b25\n ---> b0798e361f0d\nSuccessfully built b0798e361f0d\nSuccessfully tagged xxscreeps:latest\n","stderr":"","imageSize":415925621},"repair":{"violations":[{"name":"npmCacheCleanAfterInstall","position":{"start":5,"end":5,"columnStart":4,"columnEnd":15}}],"repairedDockerfile":"FROM node:16 as build\nWORKDIR /usr/app/xxscreeps\nRUN touch .screepsrc.yaml\nCOPY package*.json ./\nCOPY bin bin\nRUN npm install\nCOPY tsconfig*.json ./\nCOPY src src\nRUN echo 'update-notifier=false' >> .npmrc && \\\n\tnpm explore @xxscreeps/path-finder -- npm install && \\\n\tnpm run build\n\nFROM node:16-slim as run\nWORKDIR /usr/app/xxscreeps\nCOPY --from=build /usr/app/xxscreeps/ ./\nEXPOSE 21025\nENTRYPOINT /bin/sh -c 'npx xxscreeps import --dont-overwrite && npx xxscreeps start'\n"},"repairedBuild":{"startTimestamp":1672379634153,"endTimestamp":1672379744648,"error":null,"stdout":"Sending build context to Docker daemon  2.512MB\r\r\nStep 1/14 : FROM node:16 as build\n ---> c910109adbfd\nStep 2/14 : WORKDIR /usr/app/xxscreeps\n ---> Running in 804525fa23e8\nRemoving intermediate container 804525fa23e8\n ---> d6bafbff77ed\nStep 3/14 : RUN touch .screepsrc.yaml\n ---> Running in fb47f9457353\nRemoving intermediate container fb47f9457353\n ---> eb4040f79c99\nStep 4/14 : COPY package*.json ./\n ---> 8b458cd2ab9c\nStep 5/14 : COPY bin bin\n ---> c41f87bb185b\nStep 6/14 : RUN npm install\n ---> Running in c3404a14b7b4\n\u001b[91mnpm WARN skipping integrity check for git dependency ssh://git@github.com/laverdet/eslint-config.git \n\u001b[0m\u001b[91mnpm WARN deprecated uuid@3.4.0: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.\n\u001b[0m\u001b[91mnpm WARN deprecated jquery.terminal@0.11.23: Scroll issue in Chrome fixed in version 1.0.5\n\u001b[0m\u001b[91mnpm WARN deprecated angular@1.8.3: For the actively supported Angular, see https://www.npmjs.com/package/@angular/core. AngularJS support has officially ended. For extended AngularJS support options, see https://goo.gle/angularjs-path-forward.\n\u001b[0m\nadded 471 packages, and audited 473 packages in 49s\n\n57 packages are looking for funding\n  run `npm fund` for details\n\n13 vulnerabilities (6 moderate, 4 high, 3 critical)\n\nTo address issues that do not require attention, run:\n  npm audit fix\n\nTo address all issues possible (including breaking changes), run:\n  npm audit fix --force\n\nSome issues need review, and may require choosing\na different dependency.\n\nRun `npm audit` for details.\n\u001b[91mnpm notice \nnpm notice New major version of npm available! 8.19.3 -> 9.2.0\nnpm notice Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm notice Run `npm install -g npm@9.2.0` to update!\nnpm notice \n\u001b[0mRemoving intermediate container c3404a14b7b4\n ---> 5bb54899158a\nStep 7/14 : COPY tsconfig*.json ./\n ---> 82682a62d299\nStep 8/14 : COPY src src\n ---> 6f436d5f3870\nStep 9/14 : RUN echo 'update-notifier=false' >> .npmrc && \tnpm explore @xxscreeps/path-finder -- npm install && \tnpm run build\n ---> Running in b029d025a743\n\n> install\n> node-gyp rebuild --release\n\n\u001b[91mgyp\u001b[0m\u001b[91m info it worked if it ends with ok\n\u001b[0m\u001b[91mgyp info\u001b[0m\u001b[91m using node-gyp@9.1.0\n\u001b[0m\u001b[91mgyp info using node@16.19.0 | linux | x64\n\u001b[0m\u001b[91mgyp \u001b[0m\u001b[91minfo \u001b[0m\u001b[91mfind Python using Python version 3.7.3 found at \"/usr/bin/python3\"\n\u001b[0m\u001b[91mgyp info spawn /usr/bin/python3\n\u001b[0m\u001b[91mgyp info spawn args [\ngyp info \u001b[0m\u001b[91mspawn args   '/usr/local/lib/node_modules/npm/node_modules/node-gyp/gyp/gyp_main.py',\ngyp info spawn args   'binding.gyp',\ngyp\u001b[0m\u001b[91m info\u001b[0m\u001b[91m spawn args\u001b[0m\u001b[91m   '-f',\n\u001b[0m\u001b[91mgyp info spawn args   'make',\ngyp info\u001b[0m\u001b[91m spawn args   '-I',\ngyp \u001b[0m\u001b[91minfo spawn args\u001b[0m\u001b[91m   '/usr/app/xxscreeps/src/driver/path-finder/build/config.gypi',\ngyp \u001b[0m\u001b[91minfo spawn args   '-I',\n\u001b[0m\u001b[91mgyp info spawn args   '/usr/local/lib/node_modules/npm/node_modules/node-gyp/addon.gypi',\ngyp info spawn args   '-I',\ngyp info \u001b[0m\u001b[91mspawn args   '/root/.cache/node-gyp/16.19.0/include/node/common.gypi',\ngyp \u001b[0m\u001b[91minfo spawn args   '-Dlibrary=shared_library',\ngyp \u001b[0m\u001b[91minfo spawn args   '-Dvisibility=default',\ngyp info \u001b[0m\u001b[91mspawn args   '-Dnode_root_dir=/root/.cache/node-gyp/16.19.0',\ngyp info spawn args   '-Dnode_gyp_dir=/usr/local/lib/node_modules/npm/node_modules/node-gyp',\n\u001b[0m\u001b[91mgyp info spawn args   '-Dnode_lib_file=/root/.cache/node-gyp/16.19.0/<(target_arch)/node.lib',\ngyp \u001b[0m\u001b[91minfo spawn args\u001b[0m\u001b[91m   '-Dmodule_root_dir=/usr/app/xxscreeps/src/driver/path-finder',\ngyp info spawn args   '-Dnode_engine=v8',\ngyp info \u001b[0m\u001b[91mspawn args   '--depth=.',\ngyp info \u001b[0m\u001b[91mspawn args   '--no-parallel',\ngyp info\u001b[0m\u001b[91m spawn args   '--generator-output',\n\u001b[0m\u001b[91mgyp info spawn args\u001b[0m\u001b[91m   'build',\ngyp info spawn args   '-Goutput_dir=.'\n\u001b[0m\u001b[91mgyp info\u001b[0m\u001b[91m spawn args ]\n\u001b[0m\u001b[91mgyp info spawn make\n\u001b[0m\u001b[91mgyp info \u001b[0m\u001b[91mspawn args [ 'BUILDTYPE=Release', '-C', 'build' ]\n\u001b[0mmake: Entering directory '/usr/app/xxscreeps/src/driver/path-finder/build'\n  CXX(target) Release/obj.target/pf/main.o\n  CXX(target) Release/obj.target/pf/pf.o\n\u001b[91mIn file included from ../pf.cc:2:\n../pf.h: In member function 'screeps::world_position_t screeps::world_position_t::position_in_direction(screeps::world_position_t::direction_t) const':\n../pf.h:111:3: warning: control reaches end of non-void function [-Wreturn-type]\n   }\n   ^\n\u001b[0m  SOLINK_MODULE(target) Release/obj.target/pf.node\n  COPY Release/pf.node\n  COPY ../out/x64-linux-v16.19.0/pf.node\n  TOUCH Release/obj.target/action_after_build.stamp\nmake: Leaving directory '/usr/app/xxscreeps/src/driver/path-finder/build'\n\u001b[91mgyp info ok\u001b[0m\u001b[91m \n\u001b[0m\n> postinstall\n> node-gyp clean\n\n\u001b[91mgyp\u001b[0m\u001b[91m info it worked if it ends with\u001b[0m\u001b[91m ok\n\u001b[0m\u001b[91mgyp info using node-gyp@9.1.0\n\u001b[0m\u001b[91mgyp \u001b[0m\u001b[91minfo using\u001b[0m\u001b[91m node@16.19.0 | linux | x64\n\u001b[0m\u001b[91mgyp \u001b[0m\u001b[91minfo \u001b[0m\u001b[91mok \n\u001b[0m\nup to date, audited 1 package in 3s\n\nfound 0 vulnerabilities\n\n> xxscreeps@0.0.6 build\n> tsc\n\nRemoving intermediate container b029d025a743\n ---> 403698fa9716\nStep 10/14 : FROM node:16-slim as run\n ---> 5fb222735b86\nStep 11/14 : WORKDIR /usr/app/xxscreeps\n ---> Running in de56de3da44d\nRemoving intermediate container de56de3da44d\n ---> 68b0563a1b65\nStep 12/14 : COPY --from=build /usr/app/xxscreeps/ ./\n ---> 89ad85e09887\nStep 13/14 : EXPOSE 21025\n ---> Running in 295616d49feb\nRemoving intermediate container 295616d49feb\n ---> dafc733b6a59\nStep 14/14 : ENTRYPOINT /bin/sh -c 'npx xxscreeps import --dont-overwrite && npx xxscreeps start'\n ---> Running in 83b6bdd9eeb3\nRemoving intermediate container 83b6bdd9eeb3\n ---> 2dda17f77c0e\nSuccessfully built 2dda17f77c0e\nSuccessfully tagged xxscreeps:latest\n","stderr":"","imageSize":415925621},"endTime":1672379745118}