{"repository":"https://github.com/overhangio/tutor","dockerfilePath":"Dockerfile","startTime":1672456179661,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/overhangio/tutor'...\n","error":null,"commit":"380786219e8e7af9c429eda8b5e47117d7af6b5e"},"originalBuild":{"startTimestamp":1672456181023,"endTimestamp":1672456238762,"error":null,"stdout":"Sending build context to Docker daemon  20.79MB\r\r\nStep 1/9 : FROM docker.io/python:3.7-slim-stretch\n3.7-slim-stretch: Pulling from library/python\n778066204fb7: Pulling fs layer\n0036158cfada: Pulling fs layer\n4641e3c54218: Pulling fs layer\nd63de095ae3f: Pulling fs layer\na638abaa6c1a: Pulling fs layer\nd63de095ae3f: Waiting\na638abaa6c1a: Waiting\n0036158cfada: Verifying Checksum\n0036158cfada: Download complete\n778066204fb7: Verifying Checksum\n778066204fb7: Download complete\nd63de095ae3f: Verifying Checksum\nd63de095ae3f: Download complete\n778066204fb7: Pull complete\na638abaa6c1a: Verifying Checksum\na638abaa6c1a: Download complete\n0036158cfada: Pull complete\n4641e3c54218: Verifying Checksum\n4641e3c54218: Download complete\n4641e3c54218: Pull complete\nd63de095ae3f: Pull complete\na638abaa6c1a: Pull complete\nDigest: sha256:649b13bc3e6a70f7722d5eba4d78afbf4e9cec63193a29148271124840013286\nStatus: Downloaded newer image for python:3.7-slim-stretch\n ---> 80b07211911e\nStep 2/9 : COPY --from=library/docker:19.03 /usr/local/bin/docker /usr/bin/docker\n19.03: Pulling from library/docker\n540db60ca938: Pulling fs layer\n5a38b3726f4b: Pulling fs layer\ne5fa5deb3340: Pulling fs layer\n09182082685c: Pulling fs layer\n4562e3055ed2: Pulling fs layer\nb4de57a4336a: Pulling fs layer\n542e5df0dc5e: Pulling fs layer\n4562e3055ed2: Waiting\n09182082685c: Waiting\nb4de57a4336a: Waiting\n542e5df0dc5e: Waiting\ne5fa5deb3340: Verifying Checksum\ne5fa5deb3340: Download complete\n5a38b3726f4b: Verifying Checksum\n5a38b3726f4b: Download complete\n540db60ca938: Verifying Checksum\n540db60ca938: Download complete\n4562e3055ed2: Download complete\nb4de57a4336a: Download complete\n540db60ca938: Pull complete\n542e5df0dc5e: Download complete\n5a38b3726f4b: Pull complete\ne5fa5deb3340: Pull complete\n09182082685c: Verifying Checksum\n09182082685c: Download complete\n09182082685c: Pull complete\n4562e3055ed2: Pull complete\nb4de57a4336a: Pull complete\n542e5df0dc5e: Pull complete\nDigest: sha256:ea1f0761c92b600417ad14bc9b2b3a30abf8e96e94895fee6cbb5353316f30b0\nStatus: Downloaded newer image for docker:19.03\n ---> 0a034a1bc4ed\nStep 3/9 : COPY --from=docker/compose:1.24.0 /usr/local/bin/docker-compose /usr/bin/docker-compose\n1.24.0: Pulling from docker/compose\nc87736221ed0: Pulling fs layer\nfd62eea86738: Pulling fs layer\nd1c71acdc1c9: Pulling fs layer\n2bda82058d67: Pulling fs layer\n2bda82058d67: Waiting\nc87736221ed0: Verifying Checksum\nc87736221ed0: Download complete\nfd62eea86738: Verifying Checksum\nfd62eea86738: Download complete\nd1c71acdc1c9: Verifying Checksum\nd1c71acdc1c9: Download complete\nc87736221ed0: Pull complete\nfd62eea86738: Pull complete\n2bda82058d67: Verifying Checksum\n2bda82058d67: Download complete\nd1c71acdc1c9: Pull complete\n2bda82058d67: Pull complete\nDigest: sha256:58a5e1dfd1d46813700de1c728362f5d0dc6312a3017791d0ed9d4c05187e5a9\nStatus: Downloaded newer image for docker/compose:1.24.0\n ---> e62d6e7f7cae\nStep 4/9 : RUN pip install tutor\n ---> Running in ecafa9088672\nCollecting tutor\n  Downloading tutor-15.1.0.tar.gz (81 kB)\nCollecting appdirs\n  Downloading appdirs-1.4.4-py2.py3-none-any.whl (9.6 kB)\nCollecting click>=8.0\n  Downloading click-8.1.3-py3-none-any.whl (96 kB)\nCollecting jinja2>=2.10\n  Downloading Jinja2-3.1.2-py3-none-any.whl (133 kB)\nCollecting kubernetes\n  Downloading kubernetes-25.3.0-py2.py3-none-any.whl (1.4 MB)\nCollecting mypy\n  Downloading mypy-0.991-cp37-cp37m-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (15.5 MB)\nCollecting pycryptodome\n  Downloading pycryptodome-3.16.0-cp35-abi3-manylinux_2_5_x86_64.manylinux1_x86_64.manylinux_2_12_x86_64.manylinux2010_x86_64.whl (2.3 MB)\nCollecting pyyaml>=6.0\n  Downloading PyYAML-6.0-cp37-cp37m-manylinux_2_5_x86_64.manylinux1_x86_64.manylinux_2_12_x86_64.manylinux2010_x86_64.whl (596 kB)\nCollecting typing-extensions>=4.4.0\n  Downloading typing_extensions-4.4.0-py3-none-any.whl (26 kB)\nCollecting importlib-metadata\n  Downloading importlib_metadata-5.2.0-py3-none-any.whl (21 kB)\nCollecting MarkupSafe>=2.0\n  Downloading MarkupSafe-2.1.1-cp37-cp37m-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (25 kB)\nCollecting zipp>=0.5\n  Downloading zipp-3.11.0-py3-none-any.whl (6.6 kB)\nCollecting requests\n  Downloading requests-2.28.1-py3-none-any.whl (62 kB)\nCollecting requests-oauthlib\n  Downloading requests_oauthlib-1.3.1-py2.py3-none-any.whl (23 kB)\nRequirement already satisfied: setuptools>=21.0.0 in /usr/local/lib/python3.7/site-packages (from kubernetes->tutor) (57.4.0)\nCollecting python-dateutil>=2.5.3\n  Downloading python_dateutil-2.8.2-py2.py3-none-any.whl (247 kB)\nCollecting websocket-client!=0.40.0,!=0.41.*,!=0.42.*,>=0.32.0\n  Downloading websocket_client-1.4.2-py3-none-any.whl (55 kB)\nCollecting certifi>=14.05.14\n  Downloading certifi-2022.12.7-py3-none-any.whl (155 kB)\nCollecting urllib3>=1.24.2\n  Downloading urllib3-1.26.13-py2.py3-none-any.whl (140 kB)\nCollecting google-auth>=1.0.1\n  Downloading google_auth-2.15.0-py2.py3-none-any.whl (177 kB)\nCollecting six>=1.9.0\n  Downloading six-1.16.0-py2.py3-none-any.whl (11 kB)\nCollecting pyasn1-modules>=0.2.1\n  Downloading pyasn1_modules-0.2.8-py2.py3-none-any.whl (155 kB)\nCollecting cachetools<6.0,>=2.0.0\n  Downloading cachetools-5.2.0-py3-none-any.whl (9.3 kB)\nCollecting rsa<5,>=3.1.4\n  Downloading rsa-4.9-py3-none-any.whl (34 kB)\nCollecting pyasn1<0.5.0,>=0.4.6\n  Downloading pyasn1-0.4.8-py2.py3-none-any.whl (77 kB)\nCollecting typed-ast<2,>=1.4.0\n  Downloading typed_ast-1.5.4-cp37-cp37m-manylinux_2_5_x86_64.manylinux1_x86_64.manylinux_2_12_x86_64.manylinux2010_x86_64.whl (843 kB)\nCollecting tomli>=1.1.0\n  Downloading tomli-2.0.1-py3-none-any.whl (12 kB)\nCollecting mypy-extensions>=0.4.3\n  Downloading mypy_extensions-0.4.3-py2.py3-none-any.whl (4.5 kB)\nCollecting charset-normalizer<3,>=2\n  Downloading charset_normalizer-2.1.1-py3-none-any.whl (39 kB)\nCollecting idna<4,>=2.5\n  Downloading idna-3.4-py3-none-any.whl (61 kB)\nCollecting oauthlib>=3.0.0\n  Downloading oauthlib-3.2.2-py3-none-any.whl (151 kB)\nBuilding wheels for collected packages: tutor\n  Building wheel for tutor (setup.py): started\n  Building wheel for tutor (setup.py): finished with status 'done'\n  Created wheel for tutor: filename=tutor-15.1.0-py3-none-any.whl size=113460 sha256=8cc09743642bda71ccdf77453dc1d05ecc4b4a5770b1b333600012bab3e28134\n  Stored in directory: /root/.cache/pip/wheels/8f/e6/e5/68d56de7061dd4f6d0b4b0c2cc0dba42f92ed5ed912baab62e\nSuccessfully built tutor\nInstalling collected packages: urllib3, pyasn1, idna, charset-normalizer, certifi, zipp, typing-extensions, six, rsa, requests, pyasn1-modules, oauthlib, cachetools, websocket-client, typed-ast, tomli, requests-oauthlib, pyyaml, python-dateutil, mypy-extensions, MarkupSafe, importlib-metadata, google-auth, pycryptodome, mypy, kubernetes, jinja2, click, appdirs, tutor\nSuccessfully installed MarkupSafe-2.1.1 appdirs-1.4.4 cachetools-5.2.0 certifi-2022.12.7 charset-normalizer-2.1.1 click-8.1.3 google-auth-2.15.0 idna-3.4 importlib-metadata-5.2.0 jinja2-3.1.2 kubernetes-25.3.0 mypy-0.991 mypy-extensions-0.4.3 oauthlib-3.2.2 pyasn1-0.4.8 pyasn1-modules-0.2.8 pycryptodome-3.16.0 python-dateutil-2.8.2 pyyaml-6.0 requests-2.28.1 requests-oauthlib-1.3.1 rsa-4.9 six-1.16.0 tomli-2.0.1 tutor-15.1.0 typed-ast-1.5.4 typing-extensions-4.4.0 urllib3-1.26.13 websocket-client-1.4.2 zipp-3.11.0\n\u001b[91mWARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv\n\u001b[0m\u001b[91mWARNING: You are using pip version 21.2.4; however, version 22.3.1 is available.\nYou should consider upgrading via the '/usr/local/bin/python -m pip install --upgrade pip' command.\n\u001b[0mRemoving intermediate container ecafa9088672\n ---> 3d7ad418bd44\nStep 5/9 : RUN mkdir /opt/tutor\n ---> Running in 8adfa39ff7fc\nRemoving intermediate container 8adfa39ff7fc\n ---> 512440a81084\nStep 6/9 : ENV TUTOR_ROOT /opt/tutor\n ---> Running in b6d699160e7c\nRemoving intermediate container b6d699160e7c\n ---> c7205ec9bdf3\nStep 7/9 : EXPOSE 80\n ---> Running in c9bba8406fd9\nRemoving intermediate container c9bba8406fd9\n ---> ca313bb47a29\nStep 8/9 : EXPOSE 443\n ---> Running in 8697fc3abf87\nRemoving intermediate container 8697fc3abf87\n ---> 741d1c9f1372\nStep 9/9 : ENTRYPOINT [\"tutor\"]\n ---> Running in 24fb1e6d3844\nRemoving intermediate container 24fb1e6d3844\n ---> a0600b9dff4a\nSuccessfully built a0600b9dff4a\nSuccessfully tagged tutor:latest\n","stderr":"","imageSize":303111121},"repair":{"violations":[{"name":"pipUseNoCacheDir","position":{"start":18,"end":18,"columnStart":4,"columnEnd":21}}],"repairedDockerfile":"# This image is still very much a work in progress. It was tested on Linux and allows\n# to run tutor from inside docker. In practice, all \"tutor\" commands should be replaced # by:\n#\n#     docker run --rm -it -P \\\n#        -v /var/run/docker.sock:/var/run/docker.sock \\\n#         -v /opt/tutor:/opt/tutor tutor\n#\n# Note that this image does not come with any plugin, by default. Also, the image does\n# not include the `kubectl` binary, so `k8s` commands will not work.\n# Because this image is still experimental, and we are not quite sure if it's going to\n# be very useful, we do not provide any usage documentation.\n\nFROM docker.io/python:3.7-slim-stretch\n\n# As per https://github.com/docker/compose/issues/3918\nCOPY --from=library/docker:19.03 /usr/local/bin/docker /usr/bin/docker\nCOPY --from=docker/compose:1.24.0 /usr/local/bin/docker-compose /usr/bin/docker-compose\n\nRUN pip install --no-cache-dir tutor\nRUN mkdir /opt/tutor\nENV TUTOR_ROOT /opt/tutor\n\nEXPOSE 80\nEXPOSE 443\n\nENTRYPOINT [\"tutor\"]\n"},"repairedBuild":{"startTimestamp":1672456239145,"endTimestamp":1672456269869,"error":null,"stdout":"Sending build context to Docker daemon  20.79MB\r\r\nStep 1/9 : FROM docker.io/python:3.7-slim-stretch\n ---> 80b07211911e\nStep 2/9 : COPY --from=library/docker:19.03 /usr/local/bin/docker /usr/bin/docker\n ---> 024cc3131766\nStep 3/9 : COPY --from=docker/compose:1.24.0 /usr/local/bin/docker-compose /usr/bin/docker-compose\n ---> 78a853ff2678\nStep 4/9 : RUN pip install --no-cache-dir tutor\n ---> Running in e3143eb569c8\nCollecting tutor\n  Downloading tutor-15.1.0.tar.gz (81 kB)\nCollecting appdirs\n  Downloading appdirs-1.4.4-py2.py3-none-any.whl (9.6 kB)\nCollecting click>=8.0\n  Downloading click-8.1.3-py3-none-any.whl (96 kB)\nCollecting jinja2>=2.10\n  Downloading Jinja2-3.1.2-py3-none-any.whl (133 kB)\nCollecting kubernetes\n  Downloading kubernetes-25.3.0-py2.py3-none-any.whl (1.4 MB)\nCollecting mypy\n  Downloading mypy-0.991-cp37-cp37m-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (15.5 MB)\nCollecting pycryptodome\n  Downloading pycryptodome-3.16.0-cp35-abi3-manylinux_2_5_x86_64.manylinux1_x86_64.manylinux_2_12_x86_64.manylinux2010_x86_64.whl (2.3 MB)\nCollecting pyyaml>=6.0\n  Downloading PyYAML-6.0-cp37-cp37m-manylinux_2_5_x86_64.manylinux1_x86_64.manylinux_2_12_x86_64.manylinux2010_x86_64.whl (596 kB)\nCollecting typing-extensions>=4.4.0\n  Downloading typing_extensions-4.4.0-py3-none-any.whl (26 kB)\nCollecting importlib-metadata\n  Downloading importlib_metadata-5.2.0-py3-none-any.whl (21 kB)\nCollecting MarkupSafe>=2.0\n  Downloading MarkupSafe-2.1.1-cp37-cp37m-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (25 kB)\nCollecting zipp>=0.5\n  Downloading zipp-3.11.0-py3-none-any.whl (6.6 kB)\nRequirement already satisfied: setuptools>=21.0.0 in /usr/local/lib/python3.7/site-packages (from kubernetes->tutor) (57.4.0)\nCollecting google-auth>=1.0.1\n  Downloading google_auth-2.15.0-py2.py3-none-any.whl (177 kB)\nCollecting urllib3>=1.24.2\n  Downloading urllib3-1.26.13-py2.py3-none-any.whl (140 kB)\nCollecting requests\n  Downloading requests-2.28.1-py3-none-any.whl (62 kB)\nCollecting requests-oauthlib\n  Downloading requests_oauthlib-1.3.1-py2.py3-none-any.whl (23 kB)\nCollecting websocket-client!=0.40.0,!=0.41.*,!=0.42.*,>=0.32.0\n  Downloading websocket_client-1.4.2-py3-none-any.whl (55 kB)\nCollecting six>=1.9.0\n  Downloading six-1.16.0-py2.py3-none-any.whl (11 kB)\nCollecting certifi>=14.05.14\n  Downloading certifi-2022.12.7-py3-none-any.whl (155 kB)\nCollecting python-dateutil>=2.5.3\n  Downloading python_dateutil-2.8.2-py2.py3-none-any.whl (247 kB)\nCollecting rsa<5,>=3.1.4\n  Downloading rsa-4.9-py3-none-any.whl (34 kB)\nCollecting pyasn1-modules>=0.2.1\n  Downloading pyasn1_modules-0.2.8-py2.py3-none-any.whl (155 kB)\nCollecting cachetools<6.0,>=2.0.0\n  Downloading cachetools-5.2.0-py3-none-any.whl (9.3 kB)\nCollecting pyasn1<0.5.0,>=0.4.6\n  Downloading pyasn1-0.4.8-py2.py3-none-any.whl (77 kB)\nCollecting mypy-extensions>=0.4.3\n  Downloading mypy_extensions-0.4.3-py2.py3-none-any.whl (4.5 kB)\nCollecting tomli>=1.1.0\n  Downloading tomli-2.0.1-py3-none-any.whl (12 kB)\nCollecting typed-ast<2,>=1.4.0\n  Downloading typed_ast-1.5.4-cp37-cp37m-manylinux_2_5_x86_64.manylinux1_x86_64.manylinux_2_12_x86_64.manylinux2010_x86_64.whl (843 kB)\nCollecting idna<4,>=2.5\n  Downloading idna-3.4-py3-none-any.whl (61 kB)\nCollecting charset-normalizer<3,>=2\n  Downloading charset_normalizer-2.1.1-py3-none-any.whl (39 kB)\nCollecting oauthlib>=3.0.0\n  Downloading oauthlib-3.2.2-py3-none-any.whl (151 kB)\nBuilding wheels for collected packages: tutor\n  Building wheel for tutor (setup.py): started\n  Building wheel for tutor (setup.py): finished with status 'done'\n  Created wheel for tutor: filename=tutor-15.1.0-py3-none-any.whl size=113460 sha256=732547947f2f20858a75d3fb8fbea67d4e895f71828f65e631fc9e8b66103fe9\n  Stored in directory: /tmp/pip-ephem-wheel-cache-5gv0know/wheels/8f/e6/e5/68d56de7061dd4f6d0b4b0c2cc0dba42f92ed5ed912baab62e\nSuccessfully built tutor\nInstalling collected packages: urllib3, pyasn1, idna, charset-normalizer, certifi, zipp, typing-extensions, six, rsa, requests, pyasn1-modules, oauthlib, cachetools, websocket-client, typed-ast, tomli, requests-oauthlib, pyyaml, python-dateutil, mypy-extensions, MarkupSafe, importlib-metadata, google-auth, pycryptodome, mypy, kubernetes, jinja2, click, appdirs, tutor\nSuccessfully installed MarkupSafe-2.1.1 appdirs-1.4.4 cachetools-5.2.0 certifi-2022.12.7 charset-normalizer-2.1.1 click-8.1.3 google-auth-2.15.0 idna-3.4 importlib-metadata-5.2.0 jinja2-3.1.2 kubernetes-25.3.0 mypy-0.991 mypy-extensions-0.4.3 oauthlib-3.2.2 pyasn1-0.4.8 pyasn1-modules-0.2.8 pycryptodome-3.16.0 python-dateutil-2.8.2 pyyaml-6.0 requests-2.28.1 requests-oauthlib-1.3.1 rsa-4.9 six-1.16.0 tomli-2.0.1 tutor-15.1.0 typed-ast-1.5.4 typing-extensions-4.4.0 urllib3-1.26.13 websocket-client-1.4.2 zipp-3.11.0\n\u001b[91mWARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv\n\u001b[0m\u001b[91mWARNING: You are using pip version 21.2.4; however, version 22.3.1 is available.\nYou should consider upgrading via the '/usr/local/bin/python -m pip install --upgrade pip' command.\n\u001b[0mRemoving intermediate container e3143eb569c8\n ---> a9cbe25efd4c\nStep 5/9 : RUN mkdir /opt/tutor\n ---> Running in f163d4f67fdf\nRemoving intermediate container f163d4f67fdf\n ---> f53b8b5ef87c\nStep 6/9 : ENV TUTOR_ROOT /opt/tutor\n ---> Running in 169918c8fd27\nRemoving intermediate container 169918c8fd27\n ---> c4c111572da3\nStep 7/9 : EXPOSE 80\n ---> Running in 9b25061c2796\nRemoving intermediate container 9b25061c2796\n ---> 1e22c14fe33b\nStep 8/9 : EXPOSE 443\n ---> Running in 599579f6bbd4\nRemoving intermediate container 599579f6bbd4\n ---> 689478110d9f\nStep 9/9 : ENTRYPOINT [\"tutor\"]\n ---> Running in de6677facd06\nRemoving intermediate container de6677facd06\n ---> 5871d8af6a9f\nSuccessfully built 5871d8af6a9f\nSuccessfully tagged tutor:latest\n","stderr":"","imageSize":279899525},"endTime":1672456270230}