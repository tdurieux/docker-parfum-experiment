{"repository":"https://github.com/pypiserver/pypiserver","dockerfilePath":"Dockerfile","startTime":1672856838489,"endTime":1672857601567,"clone":{"startTime":1672856838490,"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/pypiserver/pypiserver'...\n","error":null,"endTime":1672856839372,"commit":"ae3dcf2bbd26f9c282e54327f6ceb0baab1b5420"},"originalBuild":{"startTime":1672856839462,"endTime":1672857169155,"error":null,"stdout":"Sending build context to Docker daemon  310.8kB\r\r\nStep 1/26 : FROM python:3.8-alpine3.12 as base\n3.8-alpine3.12: Pulling from library/python\n339de151aab4: Pulling fs layer\na860e27ad689: Pulling fs layer\n910a9a405b4b: Pulling fs layer\nbde2ad12a253: Pulling fs layer\nc6c8e9f0153d: Pulling fs layer\n339de151aab4: Waiting\nbde2ad12a253: Waiting\na860e27ad689: Waiting\nc6c8e9f0153d: Waiting\n910a9a405b4b: Waiting\n339de151aab4: Verifying Checksum\n339de151aab4: Download complete\na860e27ad689: Verifying Checksum\na860e27ad689: Download complete\nbde2ad12a253: Verifying Checksum\nbde2ad12a253: Download complete\n910a9a405b4b: Verifying Checksum\n910a9a405b4b: Download complete\nc6c8e9f0153d: Verifying Checksum\nc6c8e9f0153d: Download complete\n339de151aab4: Pull complete\na860e27ad689: Pull complete\n910a9a405b4b: Pull complete\nbde2ad12a253: Pull complete\nc6c8e9f0153d: Pull complete\nDigest: sha256:9d617fdd463125ba48e0c619719b4499e6829e5f99382283f32c44ec3580919b\nStatus: Downloaded newer image for python:3.8-alpine3.12\n ---> c1ddef08cac5\nStep 2/26 : FROM base AS builder_gosu\n ---> c1ddef08cac5\nStep 3/26 : ENV GOSU_VERSION 1.12\n ---> Running in 10db08235d32\nRemoving intermediate container 10db08235d32\n ---> b1ee162540bc\nStep 4/26 : RUN apk add --no-cache --virtual .build-deps         ca-certificates         dpkg         gnupg     && dpkgArch=\"$(dpkg --print-architecture | awk -F- '{ print $NF }')\"     && wget -O /usr/local/bin/gosu https://github.com/tianon/gosu/releases/download/${GOSU_VERSION}/gosu-${dpkgArch}     && wget -O /usr/local/bin/gosu.asc https://github.com/tianon/gosu/releases/download/${GOSU_VERSION}/gosu-${dpkgArch}.asc     && export GNUPGHOME=\"$(mktemp -d)\"     && gpg --batch --keyserver hkps://keys.openpgp.org --recv-keys B42F6819007F00F88E364FD4036A9C25BF357DD4     && gpg --batch --verify /usr/local/bin/gosu.asc /usr/local/bin/gosu     && command -v gpgconf && gpgconf --kill all || true     && rm -rf \"$GNUPGHOME\" /usr/local/bin/gosu.asc     && chmod +x /usr/local/bin/gosu     && gosu --version     && gosu nobody true     && apk del --no-cache         .build-deps     && rm -rf /var/cache/apk/*     && rm -rf /tmp/*\n ---> Running in 93aa52083bff\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.12/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.12/community/x86_64/APKINDEX.tar.gz\n(1/26) Installing libacl (2.2.53-r0)\n(2/26) Installing tar (1.32-r2)\n(3/26) Installing dpkg (1.20.0-r0)\n(4/26) Installing libgpg-error (1.37-r0)\n(5/26) Installing libassuan (2.5.3-r0)\n(6/26) Installing libcap (2.27-r0)\n(7/26) Installing libblkid (2.37.4-r0)\n(8/26) Installing libmount (2.37.4-r0)\n(9/26) Installing pcre (8.44-r0)\n(10/26) Installing glib (2.64.6-r0)\n(11/26) Installing libgcrypt (1.8.8-r1)\n(12/26) Installing libsecret (0.20.3-r0)\n(13/26) Installing pinentry (1.1.0-r2)\nExecuting pinentry-1.1.0-r2.post-install\n(14/26) Installing gmp (6.2.1-r1)\n(15/26) Installing nettle (3.5.1-r2)\n(16/26) Installing p11-kit (0.23.22-r0)\n(17/26) Installing libtasn1 (4.16.0-r1)\n(18/26) Installing libunistring (0.9.10-r0)\n(19/26) Installing gnutls (3.6.15-r1)\n(20/26) Installing libksba (1.4.0-r0)\n(21/26) Installing db (5.3.28-r1)\n(22/26) Installing libsasl (2.1.28-r0)\n(23/26) Installing libldap (2.4.58-r0)\n(24/26) Installing npth (1.6-r0)\n(25/26) Installing gnupg (2.2.23-r1)\n(26/26) Installing .build-deps (20230104.182750)\nExecuting busybox-1.31.1-r20.trigger\nOK: 31 MiB in 61 packages\n\u001b[91mConnecting to github.com (140.82.121.4:443)\n\u001b[0m\u001b[91mConnecting to objects.githubusercontent.com (185.199.110.133:443)\n\u001b[0m\u001b[91msaving to '/usr/local/bin/gosu'\n\u001b[0m\u001b[91mgosu                  11% |***                             |  271k  0:00:07 ETA\n\u001b[0m\u001b[91mgosu                 100% |********************************| 2348k  0:00:00 ETA\n\u001b[0m\u001b[91m'/usr/local/bin/gosu' saved\n\u001b[0m\u001b[91mConnecting to github.com (140.82.121.3:443)\n\u001b[0m\u001b[91mConnecting to objects.githubusercontent.com (185.199.108.133:443)\n\u001b[0m\u001b[91msaving to '/usr/local/bin/gosu.asc'\ngosu.asc             100% |********************************|   566  0:00:00 ETA\n'/usr/local/bin/gosu.asc' saved\n\u001b[0m\u001b[91mgpg: keybox '/tmp/tmp.pcnBJF/pubring.kbx' created\n\u001b[0m\u001b[91mgpg: /tmp/tmp.pcnBJF/trustdb.gpg: trustdb created\n\u001b[0m\u001b[91mgpg: key 036A9C25BF357DD4: public key \"Tianon Gravi <tianon@tianon.xyz>\" imported\n\u001b[0m\u001b[91mgpg: Total number processed: 1\ngpg:               imported: 1\n\u001b[0m\u001b[91mgpg: Signature made Thu Apr 16 06:40:32 2020 UTC\ngpg:                using RSA key B42F6819007F00F88E364FD4036A9C25BF357DD4\n\u001b[0m\u001b[91mgpg: Good signature from \"Tianon Gravi <tianon@tianon.xyz>\" [unknown]\ngpg:                 aka \"Andrew Page (Tianon Gravi) <admwiggin@gmail.com>\" [unknown]\ngpg:                 aka \"Tianon Gravi (Andrew Page) <tianon@infosiftr.com>\" [unknown]\ngpg:                 aka \"Tianon Gravi <tianon@debian.org>\" [unknown]\ngpg:                 aka \"Tianon Gravi <tianon@dockerproject.org>\" [unknown]\n\u001b[0m\u001b[91mgpg: WARNING: This key is not certified with a trusted signature!\ngpg:          There is no indication that the signature belongs to the owner.\nPrimary key fingerprint: B42F 6819 007F 00F8 8E36  4FD4 036A 9C25 BF35 7DD4\n\u001b[0m/usr/bin/gpgconf\n1.12 (go1.13.10 on linux/amd64; gc)\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.12/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.12/community/x86_64/APKINDEX.tar.gz\n(1/26) Purging .build-deps (20230104.182750)\n(2/26) Purging dpkg (1.20.0-r0)\n(3/26) Purging tar (1.32-r2)\n(4/26) Purging gnupg (2.2.23-r1)\n(5/26) Purging pinentry (1.1.0-r2)\n(6/26) Purging libacl (2.2.53-r0)\n(7/26) Purging libksba (1.4.0-r0)\n(8/26) Purging libsecret (0.20.3-r0)\n(9/26) Purging libgcrypt (1.8.8-r1)\n(10/26) Purging libassuan (2.5.3-r0)\n(11/26) Purging libgpg-error (1.37-r0)\n(12/26) Purging libcap (2.27-r0)\n(13/26) Purging glib (2.64.6-r0)\n(14/26) Purging libmount (2.37.4-r0)\n(15/26) Purging libblkid (2.37.4-r0)\n(16/26) Purging pcre (8.44-r0)\n(17/26) Purging gnutls (3.6.15-r1)\n(18/26) Purging nettle (3.5.1-r2)\n(19/26) Purging gmp (6.2.1-r1)\n(20/26) Purging p11-kit (0.23.22-r0)\n(21/26) Purging libtasn1 (4.16.0-r1)\n(22/26) Purging libunistring (0.9.10-r0)\n(23/26) Purging libldap (2.4.58-r0)\n(24/26) Purging libsasl (2.1.28-r0)\n(25/26) Purging db (5.3.28-r1)\n(26/26) Purging npth (1.6-r0)\nExecuting busybox-1.31.1-r20.trigger\nOK: 11 MiB in 35 packages\nRemoving intermediate container 93aa52083bff\n ---> c8ded04f85db\nStep 5/26 : FROM base AS builder_dependencies\n ---> c1ddef08cac5\nStep 6/26 : WORKDIR /code\n ---> Running in 2156ea99d55a\nRemoving intermediate container 2156ea99d55a\n ---> 4f650ae4fdc6\nStep 7/26 : COPY docker/docker-requirements.txt .\n ---> 1ee15d308716\nStep 8/26 : RUN apk add --no-cache --virtual .build-deps         build-base         libffi-dev     && mkdir /install     && python -m pip install         --no-warn-script-location         --prefix=/install         --requirement docker-requirements.txt\n ---> Running in e2f5d4f966da\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.12/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.12/community/x86_64/APKINDEX.tar.gz\n(1/24) Installing libgcc (9.3.0-r2)\n(2/24) Installing libstdc++ (9.3.0-r2)\n(3/24) Installing binutils (2.34-r2)\n(4/24) Installing libmagic (5.38-r0)\n(5/24) Installing file (5.38-r0)\n(6/24) Installing gmp (6.2.1-r1)\n(7/24) Installing isl (0.18-r0)\n(8/24) Installing libgomp (9.3.0-r2)\n(9/24) Installing libatomic (9.3.0-r2)\n(10/24) Installing libgphobos (9.3.0-r2)\n(11/24) Installing mpfr4 (4.0.2-r4)\n(12/24) Installing mpc1 (1.1.0-r1)\n(13/24) Installing gcc (9.3.0-r2)\n(14/24) Installing musl-dev (1.1.24-r10)\n(15/24) Installing libc-dev (0.7.2-r3)\n(16/24) Installing g++ (9.3.0-r2)\n(17/24) Installing make (4.3-r0)\n(18/24) Installing fortify-headers (1.1-r0)\n(19/24) Installing patch (2.7.6-r7)\n(20/24) Installing build-base (0.5-r2)\n(21/24) Installing linux-headers (5.4.5-r1)\n(22/24) Installing pkgconf (1.7.2-r0)\n(23/24) Installing libffi-dev (3.3-r2)\n(24/24) Installing .build-deps (20230104.182801)\nExecuting busybox-1.31.1-r20.trigger\nOK: 219 MiB in 59 packages\nCollecting gevent==21.12.0\n  Downloading gevent-21.12.0.tar.gz (6.2 MB)\n  Installing build dependencies: started\n  Installing build dependencies: finished with status 'done'\n  Getting requirements to build wheel: started\n  Getting requirements to build wheel: finished with status 'done'\n    Preparing wheel metadata: started\n    Preparing wheel metadata: finished with status 'done'\nCollecting gunicorn==20.0.4\n  Downloading gunicorn-20.0.4-py2.py3-none-any.whl (77 kB)\nCollecting passlib==1.7.4\n  Downloading passlib-1.7.4-py2.py3-none-any.whl (525 kB)\nCollecting bcrypt==3.2.0\n  Downloading bcrypt-3.2.0.tar.gz (42 kB)\n  Installing build dependencies: started\n  Installing build dependencies: finished with status 'done'\n  Getting requirements to build wheel: started\n  Getting requirements to build wheel: finished with status 'done'\n    Preparing wheel metadata: started\n    Preparing wheel metadata: finished with status 'done'\nCollecting waitress==1.4.4\n  Downloading waitress-1.4.4-py2.py3-none-any.whl (58 kB)\nCollecting watchdog==1.0.2\n  Downloading watchdog-1.0.2.tar.gz (98 kB)\nRequirement already satisfied: setuptools in /usr/local/lib/python3.8/site-packages (from gevent==21.12.0->-r docker-requirements.txt (line 3)) (57.0.0)\nCollecting zope.event\n  Downloading zope.event-4.6-py2.py3-none-any.whl (6.8 kB)\nCollecting zope.interface\n  Downloading zope.interface-5.5.2.tar.gz (300 kB)\nCollecting greenlet<2.0,>=1.1.0\n  Using cached greenlet-1.1.3.post0-cp38-cp38-linux_x86_64.whl\nCollecting cffi>=1.1\n  Using cached cffi-1.15.1-cp38-cp38-linux_x86_64.whl\nCollecting six>=1.4.1\n  Downloading six-1.16.0-py2.py3-none-any.whl (11 kB)\nCollecting pycparser\n  Using cached pycparser-2.21-py2.py3-none-any.whl (118 kB)\nBuilding wheels for collected packages: gevent, bcrypt, watchdog, zope.interface\n  Building wheel for gevent (PEP 517): started\n  Building wheel for gevent (PEP 517): still running...\n  Building wheel for gevent (PEP 517): still running...\n  Building wheel for gevent (PEP 517): finished with status 'done'\n  Created wheel for gevent: filename=gevent-21.12.0-cp38-cp38-linux_x86_64.whl size=1900727 sha256=c0fd9ad264b0c00e17bf39c6e8179ee248234911b755ab8548b00711a3ca02fc\n  Stored in directory: /root/.cache/pip/wheels/25/0b/ce/a0414b754525d3d04ffe95972ec36beb56ae64bc48955944b4\n  Building wheel for bcrypt (PEP 517): started\n  Building wheel for bcrypt (PEP 517): finished with status 'done'\n  Created wheel for bcrypt: filename=bcrypt-3.2.0-cp38-cp38-linux_x86_64.whl size=31976 sha256=b6a425a4a1ab2e47b8135fc2ab3f0663e16c45e7d2881a60921beac27fbec056\n  Stored in directory: /root/.cache/pip/wheels/af/42/cb/78425eb7d565a75b710a82f213c19f7100b873af40ddb372fc\n  Building wheel for watchdog (setup.py): started\n  Building wheel for watchdog (setup.py): finished with status 'done'\n  Created wheel for watchdog: filename=watchdog-1.0.2-py3-none-any.whl size=72585 sha256=d2645b04be08c11e91f56daff7419a5f9f93ab444793d22a629b4ad4ecc8f8c9\n  Stored in directory: /root/.cache/pip/wheels/49/bf/76/8a157879ddadea670548d5f9fc23dc0c797fae2a27e6c00c1b\n  Building wheel for zope.interface (setup.py): started\n  Building wheel for zope.interface (setup.py): finished with status 'done'\n  Created wheel for zope.interface: filename=zope.interface-5.5.2-cp38-cp38-linux_x86_64.whl size=212116 sha256=3cd2aeac40130aca1d9c3e5a924707cb9f06e8589707b1c0c6fc8e0483df7a37\n  Stored in directory: /root/.cache/pip/wheels/d0/fa/f2/8833c86c3b1460554363110034549b8a5a7c536461dcc4a83f\nSuccessfully built gevent bcrypt watchdog zope.interface\nInstalling collected packages: pycparser, zope.interface, zope.event, six, greenlet, cffi, watchdog, waitress, passlib, gunicorn, gevent, bcrypt\nSuccessfully installed bcrypt-3.2.0 cffi-1.15.1 gevent-21.12.0 greenlet-1.1.3.post0 gunicorn-20.0.4 passlib-1.7.4 pycparser-2.21 six-1.16.0 waitress-1.4.4 watchdog-1.0.2 zope.event-4.6 zope.interface-5.5.2\n\u001b[91mWARNING: Running pip as root will break packages and permissions. You should install packages reliably by using venv: https://pip.pypa.io/warnings/venv\n\u001b[0m\u001b[91mWARNING: You are using pip version 21.1.2; however, version 22.3.1 is available.\nYou should consider upgrading via the '/usr/local/bin/python -m pip install --upgrade pip' command.\n\u001b[0mRemoving intermediate container e2f5d4f966da\n ---> 73ba0f848f78\nStep 9/26 : COPY pypiserver pypiserver\n ---> 9192390f12b0\nStep 10/26 : COPY setup.cfg .\n ---> b93573086dd6\nStep 11/26 : COPY setup.py .\n ---> c139fe614a96\nStep 12/26 : COPY README.rst .\n ---> f4eb18d8abf6\nStep 13/26 : RUN python -m pip install --no-warn-script-location --prefix=/install .\n ---> Running in 8954a5b121de\nProcessing /code\n\u001b[91m  DEPRECATION: A future pip version will change local packages to be built in-place without first copying to a temporary directory. We recommend you use --use-feature=in-tree-build to test your packages with this new behavior before it becomes the default.\n   pip 21.3 will remove support for this functionality. You can find discussion regarding this at https://github.com/pypa/pip/issues/7555.\n\u001b[0mBuilding wheels for collected packages: pypiserver\n  Building wheel for pypiserver (setup.py): started\n  Building wheel for pypiserver (setup.py): finished with status 'done'\n  Created wheel for pypiserver: filename=pypiserver-1.5.1-py2.py3-none-any.whl size=89450 sha256=6b232409001f11b4350c25b59cd58e293f78902b1fad0b63420adeb6ea475c92\n  Stored in directory: /tmp/pip-ephem-wheel-cache-nolah699/wheels/f0/39/54/7f2932f0f7867edc500ea1587881523566e580689122a7124a\nSuccessfully built pypiserver\nInstalling collected packages: pypiserver\nSuccessfully installed pypiserver-1.5.1\n\u001b[91mWARNING: Running pip as root will break packages and permissions. You should install packages reliably by using venv: https://pip.pypa.io/warnings/venv\n\u001b[0m\u001b[91mWARNING: You are using pip version 21.1.2; however, version 22.3.1 is available.\nYou should consider upgrading via the '/usr/local/bin/python -m pip install --upgrade pip' command.\n\u001b[0mRemoving intermediate container 8954a5b121de\n ---> 25bd67a43b32\nStep 14/26 : FROM base\n ---> c1ddef08cac5\nStep 15/26 : WORKDIR /data\n ---> Running in e93864c458bc\nRemoving intermediate container e93864c458bc\n ---> 5ea010a33737\nStep 16/26 : COPY --from=builder_dependencies /install /usr/local\n ---> 5888acbb0fd8\nStep 17/26 : COPY --from=builder_gosu /usr/local/bin/gosu /usr/local/bin/gosu\n ---> a974718b3aed\nStep 18/26 : COPY docker/entrypoint.sh /entrypoint.sh\n ---> be2cd70161e4\nStep 19/26 : COPY docker/gunicorn.conf.py /data\n ---> c4c4202d8e6d\nStep 20/26 : RUN apk add bash     && rm -rf /var/cache/apk/*     && rm -rf /tmp/*     && addgroup -S -g 9898 pypiserver     && adduser -S -u 9898 -G pypiserver pypiserver --home /data    && mkdir -p /data/packages     && chmod +x /entrypoint.sh\n ---> Running in 2423c14eeb03\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.12/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.12/community/x86_64/APKINDEX.tar.gz\n(1/1) Installing bash (5.0.17-r0)\nExecuting bash-5.0.17-r0.post-install\nExecuting busybox-1.31.1-r20.trigger\nOK: 12 MiB in 36 packages\nRemoving intermediate container 2423c14eeb03\n ---> 8c168b344830\nStep 21/26 : VOLUME /data/packages\n ---> Running in 80d7b5a9dd99\nRemoving intermediate container 80d7b5a9dd99\n ---> d1ecb70afec4\nStep 22/26 : ENV PYPISERVER_PORT=8080\n ---> Running in 2828d0f10977\nRemoving intermediate container 2828d0f10977\n ---> d027c23d0963\nStep 23/26 : ENV PORT=$PYPISERVER_PORT\n ---> Running in f6103bcc6ab5\nRemoving intermediate container f6103bcc6ab5\n ---> aa98091abce3\nStep 24/26 : ENV PYTHONUNBUFFERED=t\n ---> Running in c3a4835fb818\nRemoving intermediate container c3a4835fb818\n ---> 1c8bed65a736\nStep 25/26 : EXPOSE $PYPISERVER_PORT\n ---> Running in 17669cc623ab\nRemoving intermediate container 17669cc623ab\n ---> 513d0367ffc6\nStep 26/26 : ENTRYPOINT [\"/entrypoint.sh\"]\n ---> Running in f6f11d1b74cd\nRemoving intermediate container f6f11d1b74cd\n ---> 14a2bda5392b\nSuccessfully built 14a2bda5392b\nSuccessfully tagged pypiserver:latest\n","stderr":"","imageSize":63145175},"repair":{"startTime":1672857169227,"endTime":1672857169466,"violations":[{"name":"apkAddUseNoCache","position":{"start":68,"end":68,"columnStart":4,"columnEnd":16}}],"repairedDockerfile":"FROM python:3.8-alpine3.12 as base\n\n# Copy the requirements & code and install them\n# Do this in a separate image in a separate directory\n# to not have all the build stuff in the final image\nFROM base AS builder_gosu\n\nENV GOSU_VERSION 1.12\n\nRUN apk add --no-cache --virtual .build-deps \\\n        ca-certificates \\\n        dpkg \\\n        gnupg \\\n    && dpkgArch=\"$(dpkg --print-architecture | awk -F- '{ print $NF }')\" \\\n    && wget -O /usr/local/bin/gosu https://github.com/tianon/gosu/releases/download/${GOSU_VERSION}/gosu-${dpkgArch} \\\n    && wget -O /usr/local/bin/gosu.asc https://github.com/tianon/gosu/releases/download/${GOSU_VERSION}/gosu-${dpkgArch}.asc \\\n    # verify the signature\n    && export GNUPGHOME=\"$(mktemp -d)\" \\\n    && gpg --batch --keyserver hkps://keys.openpgp.org --recv-keys B42F6819007F00F88E364FD4036A9C25BF357DD4 \\\n    && gpg --batch --verify /usr/local/bin/gosu.asc /usr/local/bin/gosu \\\n    && command -v gpgconf && gpgconf --kill all || true \\\n    && rm -rf \"$GNUPGHOME\" /usr/local/bin/gosu.asc \\\n    && chmod +x /usr/local/bin/gosu \\\n    # check installation\n    && gosu --version \\\n    && gosu nobody true \\\n    && apk del --no-cache \\\n        .build-deps \\\n    && rm -rf /var/cache/apk/* \\\n    && rm -rf /tmp/*\n\nFROM base AS builder_dependencies\n\nWORKDIR /code\n\nCOPY docker/docker-requirements.txt .\n\n# Install requirements\nRUN apk add --no-cache --virtual .build-deps \\\n        build-base \\\n        libffi-dev \\\n    && mkdir /install \\\n    && python -m pip install \\\n        --no-warn-script-location \\\n        --prefix=/install \\\n        --requirement docker-requirements.txt\n\n# Install pypiserver\n# - do this separately from deps so that when developing, every change does not\n#   require reinstalling deps\nCOPY pypiserver pypiserver\nCOPY setup.cfg .\nCOPY setup.py .\nCOPY README.rst .\nRUN python -m pip install --no-warn-script-location --prefix=/install .\n\nFROM base\n\nWORKDIR /data\n# Copy the libraries installed via pip\nCOPY --from=builder_dependencies /install /usr/local\nCOPY --from=builder_gosu /usr/local/bin/gosu /usr/local/bin/gosu\nCOPY docker/entrypoint.sh /entrypoint.sh\nCOPY docker/gunicorn.conf.py /data\n\n# Use a consistent user and group ID so that linux users\n# can create a corresponding system user and set permissions\n# if desired.\nRUN apk add --no-cache bash \\\n    && rm -rf /var/cache/apk/* \\\n    && rm -rf /tmp/* \\\n    && addgroup -S -g 9898 pypiserver \\\n    && adduser -S -u 9898 -G pypiserver pypiserver --home /data \\\n    && mkdir -p /data/packages \\\n    && chmod +x /entrypoint.sh\n\nVOLUME /data/packages\nENV PYPISERVER_PORT=8080\n# PORT is deprecated. Please use PYPISERVER_PORT instead\nENV PORT=$PYPISERVER_PORT\n# Flush logs immediately to stdout\nENV PYTHONUNBUFFERED=t\nEXPOSE $PYPISERVER_PORT\n\nENTRYPOINT [\"/entrypoint.sh\"]\n"},"repairedBuild":{"startTime":1672857169685,"endTime":1672857601266,"error":null,"stdout":"Sending build context to Docker daemon  310.8kB\r\r\nStep 1/26 : FROM python:3.8-alpine3.12 as base\n ---> c1ddef08cac5\nStep 2/26 : FROM base AS builder_gosu\n ---> c1ddef08cac5\nStep 3/26 : ENV GOSU_VERSION 1.12\n ---> Running in 5222ec2f598c\nRemoving intermediate container 5222ec2f598c\n ---> 6d15ccfc5475\nStep 4/26 : RUN apk add --no-cache --virtual .build-deps         ca-certificates         dpkg         gnupg     && dpkgArch=\"$(dpkg --print-architecture | awk -F- '{ print $NF }')\"     && wget -O /usr/local/bin/gosu https://github.com/tianon/gosu/releases/download/${GOSU_VERSION}/gosu-${dpkgArch}     && wget -O /usr/local/bin/gosu.asc https://github.com/tianon/gosu/releases/download/${GOSU_VERSION}/gosu-${dpkgArch}.asc     && export GNUPGHOME=\"$(mktemp -d)\"     && gpg --batch --keyserver hkps://keys.openpgp.org --recv-keys B42F6819007F00F88E364FD4036A9C25BF357DD4     && gpg --batch --verify /usr/local/bin/gosu.asc /usr/local/bin/gosu     && command -v gpgconf && gpgconf --kill all || true     && rm -rf \"$GNUPGHOME\" /usr/local/bin/gosu.asc     && chmod +x /usr/local/bin/gosu     && gosu --version     && gosu nobody true     && apk del --no-cache         .build-deps     && rm -rf /var/cache/apk/*     && rm -rf /tmp/*\n ---> Running in c2a34f20bd1c\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.12/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.12/community/x86_64/APKINDEX.tar.gz\n(1/26) Installing libacl (2.2.53-r0)\n(2/26) Installing tar (1.32-r2)\n(3/26) Installing dpkg (1.20.0-r0)\n(4/26) Installing libgpg-error (1.37-r0)\n(5/26) Installing libassuan (2.5.3-r0)\n(6/26) Installing libcap (2.27-r0)\n(7/26) Installing libblkid (2.37.4-r0)\n(8/26) Installing libmount (2.37.4-r0)\n(9/26) Installing pcre (8.44-r0)\n(10/26) Installing glib (2.64.6-r0)\n(11/26) Installing libgcrypt (1.8.8-r1)\n(12/26) Installing libsecret (0.20.3-r0)\n(13/26) Installing pinentry (1.1.0-r2)\nExecuting pinentry-1.1.0-r2.post-install\n(14/26) Installing gmp (6.2.1-r1)\n(15/26) Installing nettle (3.5.1-r2)\n(16/26) Installing p11-kit (0.23.22-r0)\n(17/26) Installing libtasn1 (4.16.0-r1)\n(18/26) Installing libunistring (0.9.10-r0)\n(19/26) Installing gnutls (3.6.15-r1)\n(20/26) Installing libksba (1.4.0-r0)\n(21/26) Installing db (5.3.28-r1)\n(22/26) Installing libsasl (2.1.28-r0)\n(23/26) Installing libldap (2.4.58-r0)\n(24/26) Installing npth (1.6-r0)\n(25/26) Installing gnupg (2.2.23-r1)\n(26/26) Installing .build-deps (20230104.183251)\nExecuting busybox-1.31.1-r20.trigger\nOK: 31 MiB in 61 packages\n\u001b[91mConnecting to github.com (140.82.121.4:443)\n\u001b[0m\u001b[91mConnecting to objects.githubusercontent.com (185.199.110.133:443)\n\u001b[0m\u001b[91msaving to '/usr/local/bin/gosu'\n\u001b[0m\u001b[91mgosu                 100% |********************************| 2348k  0:00:00 ETA\n'/usr/local/bin/gosu' saved\n\u001b[0m\u001b[91mConnecting to github.com (140.82.121.4:443)\n\u001b[0m\u001b[91mConnecting to objects.githubusercontent.com (185.199.109.133:443)\n\u001b[0m\u001b[91msaving to '/usr/local/bin/gosu.asc'\ngosu.asc             100% |********************************|   566  0:00:00 ETA\n'/usr/local/bin/gosu.asc' saved\n\u001b[0m\u001b[91mgpg: keybox '/tmp/tmp.hIPEnJ/pubring.kbx' created\n\u001b[0m\u001b[91mgpg: /tmp/tmp.hIPEnJ/trustdb.gpg: trustdb created\n\u001b[0m\u001b[91mgpg: key 036A9C25BF357DD4: public key \"Tianon Gravi <tianon@tianon.xyz>\" imported\n\u001b[0m\u001b[91mgpg: Total number processed: 1\ngpg:               imported: 1\n\u001b[0m\u001b[91mgpg: Signature made Thu Apr 16 06:40:32 2020 UTC\n\u001b[0m\u001b[91mgpg:                using RSA key B42F6819007F00F88E364FD4036A9C25BF357DD4\n\u001b[0m\u001b[91mgpg: Good signature from \"Tianon Gravi <tianon@tianon.xyz>\" [unknown]\n\u001b[0m\u001b[91mgpg:                 aka \"Andrew Page (Tianon Gravi) <admwiggin@gmail.com>\" [unknown\u001b[0m\u001b[91m]\n\u001b[0m\u001b[91mgpg:                 aka \"Tianon Gravi (Andrew Page) <tianon@infosiftr.com>\" [unknown]\ngpg:                 aka \"Tianon Gravi <tianon@debian.org>\" [unknown]\ngpg:                 aka \"Tianon Gravi <tianon@dockerproject.org>\" [unknown]\n\u001b[0m\u001b[91mgpg: WARNING: This key is not certified with a trusted signature!\ngpg:          There is no indication that the signature belongs to the owner.\nPrimary key fingerprint: B42F 6819 007F 00F8 8E36  4FD4 036A 9C25 BF35 7DD4\n\u001b[0m/usr/bin/gpgconf\n1.12 (go1.13.10 on linux/amd64; gc)\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.12/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.12/community/x86_64/APKINDEX.tar.gz\n(1/26) Purging .build-deps (20230104.183251)\n(2/26) Purging dpkg (1.20.0-r0)\n(3/26) Purging tar (1.32-r2)\n(4/26) Purging gnupg (2.2.23-r1)\n(5/26) Purging pinentry (1.1.0-r2)\n(6/26) Purging libacl (2.2.53-r0)\n(7/26) Purging libksba (1.4.0-r0)\n(8/26) Purging libsecret (0.20.3-r0)\n(9/26) Purging libgcrypt (1.8.8-r1)\n(10/26) Purging libassuan (2.5.3-r0)\n(11/26) Purging libgpg-error (1.37-r0)\n(12/26) Purging libcap (2.27-r0)\n(13/26) Purging glib (2.64.6-r0)\n(14/26) Purging libmount (2.37.4-r0)\n(15/26) Purging libblkid (2.37.4-r0)\n(16/26) Purging pcre (8.44-r0)\n(17/26) Purging gnutls (3.6.15-r1)\n(18/26) Purging nettle (3.5.1-r2)\n(19/26) Purging gmp (6.2.1-r1)\n(20/26) Purging p11-kit (0.23.22-r0)\n(21/26) Purging libtasn1 (4.16.0-r1)\n(22/26) Purging libunistring (0.9.10-r0)\n(23/26) Purging libldap (2.4.58-r0)\n(24/26) Purging libsasl (2.1.28-r0)\n(25/26) Purging db (5.3.28-r1)\n(26/26) Purging npth (1.6-r0)\nExecuting busybox-1.31.1-r20.trigger\nOK: 11 MiB in 35 packages\nRemoving intermediate container c2a34f20bd1c\n ---> 61b785ac43a9\nStep 5/26 : FROM base AS builder_dependencies\n ---> c1ddef08cac5\nStep 6/26 : WORKDIR /code\n ---> Running in 1658bf1b24c7\nRemoving intermediate container 1658bf1b24c7\n ---> c0945a37dc90\nStep 7/26 : COPY docker/docker-requirements.txt .\n ---> 65b90fe35717\nStep 8/26 : RUN apk add --no-cache --virtual .build-deps         build-base         libffi-dev     && mkdir /install     && python -m pip install         --no-warn-script-location         --prefix=/install         --requirement docker-requirements.txt\n ---> Running in 39e234efbd14\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.12/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.12/community/x86_64/APKINDEX.tar.gz\n(1/24) Installing libgcc (9.3.0-r2)\n(2/24) Installing libstdc++ (9.3.0-r2)\n(3/24) Installing binutils (2.34-r2)\n(4/24) Installing libmagic (5.38-r0)\n(5/24) Installing file (5.38-r0)\n(6/24) Installing gmp (6.2.1-r1)\n(7/24) Installing isl (0.18-r0)\n(8/24) Installing libgomp (9.3.0-r2)\n(9/24) Installing libatomic (9.3.0-r2)\n(10/24) Installing libgphobos (9.3.0-r2)\n(11/24) Installing mpfr4 (4.0.2-r4)\n(12/24) Installing mpc1 (1.1.0-r1)\n(13/24) Installing gcc (9.3.0-r2)\n(14/24) Installing musl-dev (1.1.24-r10)\n(15/24) Installing libc-dev (0.7.2-r3)\n(16/24) Installing g++ (9.3.0-r2)\n(17/24) Installing make (4.3-r0)\n(18/24) Installing fortify-headers (1.1-r0)\n(19/24) Installing patch (2.7.6-r7)\n(20/24) Installing build-base (0.5-r2)\n(21/24) Installing linux-headers (5.4.5-r1)\n(22/24) Installing pkgconf (1.7.2-r0)\n(23/24) Installing libffi-dev (3.3-r2)\n(24/24) Installing .build-deps (20230104.183302)\nExecuting busybox-1.31.1-r20.trigger\nOK: 219 MiB in 59 packages\nCollecting gevent==21.12.0\n  Downloading gevent-21.12.0.tar.gz (6.2 MB)\n  Installing build dependencies: started\n  Installing build dependencies: finished with status 'done'\n  Getting requirements to build wheel: started\n  Getting requirements to build wheel: finished with status 'done'\n    Preparing wheel metadata: started\n    Preparing wheel metadata: finished with status 'done'\nCollecting gunicorn==20.0.4\n  Downloading gunicorn-20.0.4-py2.py3-none-any.whl (77 kB)\nCollecting passlib==1.7.4\n  Downloading passlib-1.7.4-py2.py3-none-any.whl (525 kB)\nCollecting bcrypt==3.2.0\n  Downloading bcrypt-3.2.0.tar.gz (42 kB)\n  Installing build dependencies: started\n  Installing build dependencies: finished with status 'done'\n  Getting requirements to build wheel: started\n  Getting requirements to build wheel: finished with status 'done'\n    Preparing wheel metadata: started\n    Preparing wheel metadata: finished with status 'done'\nCollecting waitress==1.4.4\n  Downloading waitress-1.4.4-py2.py3-none-any.whl (58 kB)\nCollecting watchdog==1.0.2\n  Downloading watchdog-1.0.2.tar.gz (98 kB)\nRequirement already satisfied: setuptools in /usr/local/lib/python3.8/site-packages (from gevent==21.12.0->-r docker-requirements.txt (line 3)) (57.0.0)\nCollecting zope.interface\n  Downloading zope.interface-5.5.2.tar.gz (300 kB)\nCollecting greenlet<2.0,>=1.1.0\n  Using cached greenlet-1.1.3.post0-cp38-cp38-linux_x86_64.whl\nCollecting zope.event\n  Downloading zope.event-4.6-py2.py3-none-any.whl (6.8 kB)\nCollecting six>=1.4.1\n  Downloading six-1.16.0-py2.py3-none-any.whl (11 kB)\nCollecting cffi>=1.1\n  Using cached cffi-1.15.1-cp38-cp38-linux_x86_64.whl\nCollecting pycparser\n  Using cached pycparser-2.21-py2.py3-none-any.whl (118 kB)\nBuilding wheels for collected packages: gevent, bcrypt, watchdog, zope.interface\n  Building wheel for gevent (PEP 517): started\n  Building wheel for gevent (PEP 517): still running...\n  Building wheel for gevent (PEP 517): still running...\n  Building wheel for gevent (PEP 517): finished with status 'done'\n  Created wheel for gevent: filename=gevent-21.12.0-cp38-cp38-linux_x86_64.whl size=1900727 sha256=26f54eb699bf9bda22fed2189f2a853b343b9a16a5d3bf65b1ccbd6951bd3e5c\n  Stored in directory: /root/.cache/pip/wheels/25/0b/ce/a0414b754525d3d04ffe95972ec36beb56ae64bc48955944b4\n  Building wheel for bcrypt (PEP 517): started\n  Building wheel for bcrypt (PEP 517): finished with status 'done'\n  Created wheel for bcrypt: filename=bcrypt-3.2.0-cp38-cp38-linux_x86_64.whl size=31976 sha256=7a319c4bb623f26ec8cd26dfa883e6077327a9efe24dc00fff35536da5b3a2f2\n  Stored in directory: /root/.cache/pip/wheels/af/42/cb/78425eb7d565a75b710a82f213c19f7100b873af40ddb372fc\n  Building wheel for watchdog (setup.py): started\n  Building wheel for watchdog (setup.py): finished with status 'done'\n  Created wheel for watchdog: filename=watchdog-1.0.2-py3-none-any.whl size=72585 sha256=2dfe67c65392b785f9b9b013d82bc194999a01db3617ed14d8cecb4a340fe5a4\n  Stored in directory: /root/.cache/pip/wheels/49/bf/76/8a157879ddadea670548d5f9fc23dc0c797fae2a27e6c00c1b\n  Building wheel for zope.interface (setup.py): started\n  Building wheel for zope.interface (setup.py): finished with status 'done'\n  Created wheel for zope.interface: filename=zope.interface-5.5.2-cp38-cp38-linux_x86_64.whl size=212116 sha256=1f1859d1abf2e7a33e6e55076f5c41d229eac95ee55c0fa85a6e7fd5ab971dda\n  Stored in directory: /root/.cache/pip/wheels/d0/fa/f2/8833c86c3b1460554363110034549b8a5a7c536461dcc4a83f\nSuccessfully built gevent bcrypt watchdog zope.interface\nInstalling collected packages: pycparser, zope.interface, zope.event, six, greenlet, cffi, watchdog, waitress, passlib, gunicorn, gevent, bcrypt\nSuccessfully installed bcrypt-3.2.0 cffi-1.15.1 gevent-21.12.0 greenlet-1.1.3.post0 gunicorn-20.0.4 passlib-1.7.4 pycparser-2.21 six-1.16.0 waitress-1.4.4 watchdog-1.0.2 zope.event-4.6 zope.interface-5.5.2\n\u001b[91mWARNING: Running pip as root will break packages and permissions. You should install packages reliably by using venv: https://pip.pypa.io/warnings/venv\n\u001b[0m\u001b[91mWARNING: You are using pip version 21.1.2; however, version 22.3.1 is available.\nYou should consider upgrading via the '/usr/local/bin/python -m pip install --upgrade pip' command.\n\u001b[0mRemoving intermediate container 39e234efbd14\n ---> 99ac8a779852\nStep 9/26 : COPY pypiserver pypiserver\n ---> ea825c663260\nStep 10/26 : COPY setup.cfg .\n ---> 9ca047359c3c\nStep 11/26 : COPY setup.py .\n ---> 6706ea2f9430\nStep 12/26 : COPY README.rst .\n ---> ceb830310a49\nStep 13/26 : RUN python -m pip install --no-warn-script-location --prefix=/install .\n ---> Running in 2a9d7cf28ee5\nProcessing /code\n\u001b[91m  DEPRECATION: A future pip version will change local packages to be built in-place without first copying to a temporary directory. We recommend you use --use-feature=in-tree-build to test your packages with this new behavior before it becomes the default.\n   pip 21.3 will remove support for this functionality. You can find discussion regarding this at https://github.com/pypa/pip/issues/7555.\n\u001b[0mBuilding wheels for collected packages: pypiserver\n  Building wheel for pypiserver (setup.py): started\n  Building wheel for pypiserver (setup.py): finished with status 'done'\n  Created wheel for pypiserver: filename=pypiserver-1.5.1-py2.py3-none-any.whl size=89450 sha256=bfbaa868e3a170ec1ab32f55ddee9e82294b2e3947899a9c656b08d41139d87a\n  Stored in directory: /tmp/pip-ephem-wheel-cache-9uxq77et/wheels/f0/39/54/7f2932f0f7867edc500ea1587881523566e580689122a7124a\nSuccessfully built pypiserver\nInstalling collected packages: pypiserver\nSuccessfully installed pypiserver-1.5.1\n\u001b[91mWARNING: Running pip as root will break packages and permissions. You should install packages reliably by using venv: https://pip.pypa.io/warnings/venv\n\u001b[0m\u001b[91mWARNING: You are using pip version 21.1.2; however, version 22.3.1 is available.\nYou should consider upgrading via the '/usr/local/bin/python -m pip install --upgrade pip' command.\n\u001b[0mRemoving intermediate container 2a9d7cf28ee5\n ---> 7fdf642cc1d9\nStep 14/26 : FROM base\n ---> c1ddef08cac5\nStep 15/26 : WORKDIR /data\n ---> Running in 281a962490b6\nRemoving intermediate container 281a962490b6\n ---> c740d085bd40\nStep 16/26 : COPY --from=builder_dependencies /install /usr/local\n ---> ca06dc9d2a6e\nStep 17/26 : COPY --from=builder_gosu /usr/local/bin/gosu /usr/local/bin/gosu\n ---> 4af93102fccd\nStep 18/26 : COPY docker/entrypoint.sh /entrypoint.sh\n ---> 6c47aed1a5de\nStep 19/26 : COPY docker/gunicorn.conf.py /data\n ---> d54fa6b7533a\nStep 20/26 : RUN apk add --no-cache bash     && rm -rf /var/cache/apk/*     && rm -rf /tmp/*     && addgroup -S -g 9898 pypiserver     && adduser -S -u 9898 -G pypiserver pypiserver --home /data     && mkdir -p /data/packages     && chmod +x /entrypoint.sh\n ---> Running in a2a73e7da80f\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.12/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.12/community/x86_64/APKINDEX.tar.gz\n(1/1) Installing bash (5.0.17-r0)\nExecuting bash-5.0.17-r0.post-install\nExecuting busybox-1.31.1-r20.trigger\nOK: 12 MiB in 36 packages\nRemoving intermediate container a2a73e7da80f\n ---> addb67dc9d3d\nStep 21/26 : VOLUME /data/packages\n ---> Running in 0b62a26cb2cf\nRemoving intermediate container 0b62a26cb2cf\n ---> 94a38df47b11\nStep 22/26 : ENV PYPISERVER_PORT=8080\n ---> Running in 8e0f9d6586f1\nRemoving intermediate container 8e0f9d6586f1\n ---> e1295634d575\nStep 23/26 : ENV PORT=$PYPISERVER_PORT\n ---> Running in ead0f5ffa96d\nRemoving intermediate container ead0f5ffa96d\n ---> c9e0bd7befb3\nStep 24/26 : ENV PYTHONUNBUFFERED=t\n ---> Running in 6a1e1111a8e9\nRemoving intermediate container 6a1e1111a8e9\n ---> f0ff57983e00\nStep 25/26 : EXPOSE $PYPISERVER_PORT\n ---> Running in 7fc0a7c9e06a\nRemoving intermediate container 7fc0a7c9e06a\n ---> c05ff9fa673f\nStep 26/26 : ENTRYPOINT [\"/entrypoint.sh\"]\n ---> Running in b004ed4c6f1d\nRemoving intermediate container b004ed4c6f1d\n ---> 2ab4e4f33ace\nSuccessfully built 2ab4e4f33ace\nSuccessfully tagged pypiserver:latest\n","stderr":"","imageSize":63145175}}