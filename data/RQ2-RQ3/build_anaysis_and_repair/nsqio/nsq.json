{"repository":"https://github.com/nsqio/nsq","dockerfilePath":"Dockerfile","startTime":1672076121866,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/nsqio/nsq'...\n","error":null,"commit":"cf12b9608ede42ccbc76a8d2c266bcf43dbf7d4d"},"originalBuild":{"startTimestamp":1672076122857,"endTimestamp":1672076235771,"error":{"code":1,"killed":false,"signal":null,"cmd":"docker build --no-cache --force-rm -t nsq:latest -f /tmp/dinghy-analysis/nsqio/nsq/Dockerfile ."},"stdout":"Sending build context to Docker daemon  3.845MB\r\r\nStep 1/14 : FROM golang:alpine AS build\nalpine: Pulling from library/golang\nDigest: sha256:a9b24b67dc83b3383d22a14941c2b2b2ca6a103d805cac6820fd1355943beaf1\nStatus: Downloaded newer image for golang:alpine\n ---> cae57157ceaa\nStep 2/14 : RUN apk update && apk add make gcc musl-dev\n ---> Running in 78e753580497\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\nv3.17.0-298-g2104b16d70 [https://dl-cdn.alpinelinux.org/alpine/v3.17/main]\nv3.17.0-299-gc0880a1380 [https://dl-cdn.alpinelinux.org/alpine/v3.17/community]\nOK: 17814 distinct packages available\n(1/12) Installing libgcc (12.2.1_git20220924-r4)\n(2/12) Installing libstdc++ (12.2.1_git20220924-r4)\n(3/12) Installing binutils (2.39-r2)\n(4/12) Installing libgomp (12.2.1_git20220924-r4)\n(5/12) Installing libatomic (12.2.1_git20220924-r4)\n(6/12) Installing gmp (6.2.1-r2)\n(7/12) Installing isl25 (0.25-r0)\n(8/12) Installing mpfr4 (4.1.0-r0)\n(9/12) Installing mpc1 (1.2.1-r1)\n(10/12) Installing gcc (12.2.1_git20220924-r4)\n(11/12) Installing make (4.3-r1)\n(12/12) Installing musl-dev (1.2.3-r4)\nExecuting busybox-1.35.0-r29.trigger\nOK: 153 MiB in 28 packages\nRemoving intermediate container 78e753580497\n ---> 62367a13b4c0\nStep 3/14 : RUN mkdir -p /go/src/github.com/nsqio/nsq\n ---> Running in 8ac4b9afd076\nRemoving intermediate container 8ac4b9afd076\n ---> 12a3468891f2\nStep 4/14 : COPY    .    /go/src/github.com/nsqio/nsq\n ---> 3a47f88698c3\nStep 5/14 : WORKDIR      /go/src/github.com/nsqio/nsq\n ---> Running in bc9fc427ffa4\nRemoving intermediate container bc9fc427ffa4\n ---> 0c4f6f593de3\nStep 6/14 : RUN ./test.sh\n ---> Running in ea4c63699974\n\u001b[91mgo: downloading github.com/nsqio/go-nsq v1.1.0\n\u001b[0m\u001b[91mgo: downloading github.com/mreiferson/go-options v1.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/bitly/go-hostpool v0.1.0\n\u001b[0m\u001b[91mgo: downloading github.com/bitly/timer_metrics v1.0.0\n\u001b[0m\u001b[91mgo: downloading github.com/BurntSushi/toml v0.4.1\n\u001b[0m\u001b[91mgo: downloading github.com/mreiferson/go-svc v1.2.2-0.20210815184239-7a96e00010f6\n\u001b[0m\u001b[91mgo: downloading github.com/blang/semver v3.5.1+incompatible\n\u001b[0m\u001b[91mgo: downloading github.com/julienschmidt/httprouter v1.3.0\n\u001b[0m\u001b[91mgo: downloading github.com/bmizerany/perks v0.0.0-20141205001514-d9a9656a3a4b\n\u001b[0m\u001b[91mgo: downloading github.com/golang/snappy v0.0.4\n\u001b[0m\u001b[91mgo: downloading github.com/nsqio/go-diskqueue v1.1.0\n\u001b[0m?   \tgithub.com/nsqio/nsq/apps/nsq_stat\t[no test files]\n?   \tgithub.com/nsqio/nsq/apps/nsq_tail\t[no test files]\n?   \tgithub.com/nsqio/nsq/apps/nsq_to_file\t[no test files]\nok  \tgithub.com/nsqio/nsq/apps/nsq_to_http\t0.005s\n?   \tgithub.com/nsqio/nsq/apps/nsq_to_nsq\t[no test files]\nok  \tgithub.com/nsqio/nsq/apps/nsqadmin\t0.004s\nok  \tgithub.com/nsqio/nsq/apps/nsqd\t0.007s\nok  \tgithub.com/nsqio/nsq/apps/nsqlookupd\t0.005s\n?   \tgithub.com/nsqio/nsq/apps/to_nsq\t[no test files]\n?   \tgithub.com/nsqio/nsq/bench/bench_channels\t[no test files]\n?   \tgithub.com/nsqio/nsq/bench/bench_reader\t[no test files]\n?   \tgithub.com/nsqio/nsq/bench/bench_writer\t[no test files]\n?   \tgithub.com/nsqio/nsq/internal/app\t[no test files]\n?   \tgithub.com/nsqio/nsq/internal/auth\t[no test files]\nok  \tgithub.com/nsqio/nsq/internal/clusterinfo\t0.004s\n?   \tgithub.com/nsqio/nsq/internal/dirlock\t[no test files]\n?   \tgithub.com/nsqio/nsq/internal/http_api\t[no test files]\nok  \tgithub.com/nsqio/nsq/internal/lg\t0.004s\nok  \tgithub.com/nsqio/nsq/internal/pqueue\t0.003s\nok  \tgithub.com/nsqio/nsq/internal/protocol\t0.003s [no tests to run]\n?   \tgithub.com/nsqio/nsq/internal/quantile\t[no test files]\n?   \tgithub.com/nsqio/nsq/internal/statsd\t[no test files]\nok  \tgithub.com/nsqio/nsq/internal/stringy\t0.002s\n?   \tgithub.com/nsqio/nsq/internal/test\t[no test files]\nok  \tgithub.com/nsqio/nsq/internal/util\t0.003s\n?   \tgithub.com/nsqio/nsq/internal/version\t[no test files]\n?   \tgithub.com/nsqio/nsq/internal/writers\t[no test files]\nok  \tgithub.com/nsqio/nsq/nsqadmin\t6.004s\nok  \tgithub.com/nsqio/nsq/nsqd\t7.231s\nok  \tgithub.com/nsqio/nsq/nsqlookupd\t1.980s\nbuilding apps/nsq_stat\nbuilding apps/nsq_tail\nbuilding apps/nsq_to_file\nbuilding apps/nsq_to_http\nbuilding apps/nsq_to_nsq\nbuilding apps/nsqadmin\nbuilding apps/nsqd\nbuilding apps/nsqlookupd\nbuilding apps/to_nsq\nbuilding bench/bench_channels\nbuilding bench/bench_reader\nbuilding bench/bench_writer\nRemoving intermediate container ea4c63699974\n ---> 4d0e0d119478\nStep 7/14 : RUN CGO_ENABLED=0 make PREFIX=/opt/nsq BLDFLAGS='-ldflags=\"-s -w\"' install\n ---> Running in 19237e6d1c74\ngo build -ldflags=\"-s -w\" -o build/nsqd ./apps/nsqd\ngo build -ldflags=\"-s -w\" -o build/nsqlookupd ./apps/nsqlookupd\ngo build -ldflags=\"-s -w\" -o build/nsqadmin ./apps/nsqadmin\ngo build -ldflags=\"-s -w\" -o build/nsq_to_nsq ./apps/nsq_to_nsq\ngo build -ldflags=\"-s -w\" -o build/nsq_to_file ./apps/nsq_to_file\ngo build -ldflags=\"-s -w\" -o build/nsq_to_http ./apps/nsq_to_http\ngo build -ldflags=\"-s -w\" -o build/nsq_tail ./apps/nsq_tail\ngo build -ldflags=\"-s -w\" -o build/nsq_stat ./apps/nsq_stat\ngo build -ldflags=\"-s -w\" -o build/to_nsq ./apps/to_nsq\ninstall -m 755 -d /opt/nsq/bin\nfor APP in nsqd nsqlookupd nsqadmin nsq_to_nsq nsq_to_file nsq_to_http nsq_tail nsq_stat to_nsq ; do install -m 755 build/$APP /opt/nsq/bin/$APP ; done\nRemoving intermediate container 19237e6d1c74\n ---> 3d17cb54bf69\nStep 8/14 : FROM alpine:latest\n ---> 49176f190c7e\nStep 9/14 : EXPOSE 4150 4151 4160 4161 4170 4171\n ---> Running in 1a7bf11f5383\nRemoving intermediate container 1a7bf11f5383\n ---> e20e4d844f07\nStep 10/14 : RUN mkdir -p /data\n ---> Running in 90635f62e390\nRemoving intermediate container 90635f62e390\n ---> 70b6e4b4daf3\nStep 11/14 : WORKDIR      /data\n ---> Running in 5ed0ea85102e\nRemoving intermediate container 5ed0ea85102e\n ---> 02cde9db37d7\nStep 12/14 : RUN [ ! -e /etc/nsswitch.conf ] && echo 'hosts: files dns' > /etc/nsswitch.conf\n ---> Running in 863e7ec46027\nRemoving intermediate container 863e7ec46027\n","stderr":"The command '/bin/sh -c [ ! -e /etc/nsswitch.conf ] && echo 'hosts: files dns' > /etc/nsswitch.conf' returned a non-zero code: 1\n"},"endTime":1672076235847}