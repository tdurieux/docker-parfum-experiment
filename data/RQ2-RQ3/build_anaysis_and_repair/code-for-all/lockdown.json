{"repository":"https://github.com/code-for-all/lockdown","dockerfilePath":"Dockerfile","startTime":1672966361135,"endTime":1672966509490,"clone":{"startTime":1672966361136,"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/code-for-all/lockdown'...\n","error":null,"endTime":1672966362312,"commit":"7f2f3f61130f541537b89b150be49feeb5587dfa"},"originalBuild":{"startTime":1672966362396,"endTime":1672966444755,"error":null,"stdout":"Sending build context to Docker daemon  14.28MB\r\r\nStep 1/11 : FROM node:10-alpine as build-deps\n10-alpine: Pulling from library/node\nddad3d7c1e96: Pulling fs layer\nde915e575d22: Pulling fs layer\n7150aa69525b: Pulling fs layer\nd7aa47be044e: Pulling fs layer\nd7aa47be044e: Waiting\nddad3d7c1e96: Verifying Checksum\nddad3d7c1e96: Download complete\n7150aa69525b: Verifying Checksum\n7150aa69525b: Download complete\nde915e575d22: Verifying Checksum\nde915e575d22: Download complete\nddad3d7c1e96: Pull complete\nd7aa47be044e: Verifying Checksum\nd7aa47be044e: Download complete\nde915e575d22: Pull complete\n7150aa69525b: Pull complete\nd7aa47be044e: Pull complete\nDigest: sha256:dc98dac24efd4254f75976c40bce46944697a110d06ce7fa47e7268470cf2e28\nStatus: Downloaded newer image for node:10-alpine\n ---> aa67ba258e18\nStep 2/11 : WORKDIR /usr/src/app\n ---> Running in e7cebe9182ff\nRemoving intermediate container e7cebe9182ff\n ---> dc510cab7af0\nStep 3/11 : COPY . ./\n ---> 19942ae9f645\nStep 4/11 : RUN npm i && npm run build\n ---> Running in 421c259a0cf4\n\u001b[91mnpm WARN deprecated rollup-plugin-terser@5.3.1: This package has been deprecated and is no longer maintained. Please use @rollup/plugin-terser\n\u001b[0m\u001b[91mnpm WARN deprecated rollup-plugin-terser@6.1.0: This package has been deprecated and is no longer maintained. Please use @rollup/plugin-terser\n\u001b[0m\u001b[91mnpm WARN \u001b[0m\u001b[91mdeprecated @types/browserslist@4.15.0: This is a stub types definition. browserslist provides its own type definitions, so you do not need this installed.\n\u001b[0m\u001b[91mnpm WARN deprecated sourcemap-codec@1.4.8: Please use @jridgewell/sourcemap-codec instead\n\u001b[0m\u001b[91mnpm WARN deprecated rollup-plugin-babel@4.4.0: This package has been deprecated and is no longer maintained. Please use @rollup/plugin-babel.\n\u001b[0m\u001b[91mnpm WARN deprecated source-map-url@0.4.1: See https://github.com/lydell/source-map-url#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated @hapi/joi@15.1.1: Switch to 'npm install joi'\n\u001b[0m\u001b[91mnpm WARN deprecated @hapi/address@2.1.4: Moved to 'npm install @sideway/address'\n\u001b[0m\u001b[91mnpm WARN deprecated @hapi/bourne@1.3.2: This version has been deprecated and is no longer supported or maintained\n\u001b[0m\u001b[91mnpm WARN deprecated @hapi/hoek@8.5.1: This version has been deprecated and is no longer supported or maintained\n\u001b[0m\u001b[91mnpm WARN deprecated @hapi/topo@3.1.6: This version has been deprecated and is no longer supported or maintained\n\u001b[0m\u001b[91mnpm\u001b[0m\u001b[91m WARN deprecated core-js@2.6.12: core-js@<3.23.3 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Some versions have web compatibility issues. Please, upgrade your dependencies to the actual version of core-js.\n\u001b[0m\n> husky@4.3.8 install /usr/src/app/node_modules/husky\n> node husky install\n\nhusky > Setting up git hooks\ngit --version command failed. Got null.\nhusky > Failed to install\n\n> core-js@2.6.12 postinstall /usr/src/app/node_modules/core-js\n> node -e \"try{require('./postinstall')}catch(e){}\"\n\n\u001b[96mThank you for using core-js (\u001b[94m https://github.com/zloirock/core-js \u001b[96m) for polyfilling JavaScript standard library!\u001b[0m\n\n\u001b[96mThe project needs your help! Please consider supporting of core-js on Open Collective or Patreon: \u001b[0m\n\u001b[96m>\u001b[94m https://opencollective.com/core-js \u001b[0m\n\u001b[96m>\u001b[94m https://www.patreon.com/zloirock \u001b[0m\n\n\u001b[96mAlso, the author of core-js (\u001b[94m https://github.com/zloirock \u001b[96m) is looking for a good job -)\u001b[0m\n\n\n> core-js-bundle@3.27.1 postinstall /usr/src/app/node_modules/core-js-bundle\n> node -e \"try{require('./postinstall')}catch(e){}\"\n\n\u001b[96mThank you for using core-js (\u001b[94m https://github.com/zloirock/core-js \u001b[96m) for polyfilling JavaScript standard library!\u001b[0m\n\n\u001b[96mThe project needs your help! Please consider supporting of core-js:\u001b[0m\n\u001b[96m>\u001b[94m https://opencollective.com/core-js \u001b[0m\n\u001b[96m>\u001b[94m https://patreon.com/zloirock \u001b[0m\n\u001b[96m>\u001b[94m bitcoin: bc1qlea7544qtsmj2rayg0lthvza9fau63ux0fstcz \u001b[0m\n\n\u001b[96mAlso, the author of core-js (\u001b[94m https://github.com/zloirock \u001b[96m) is looking for a good job -)\u001b[0m\n\n\n> ejs@2.7.4 postinstall /usr/src/app/node_modules/ejs\n> node ./postinstall.js\n\nThank you for installing \u001b[35mEJS\u001b[0m: built with the \u001b[32mJake\u001b[0m JavaScript build tool (\u001b[32mhttps://jakejs.com/\u001b[0m)\n\n\n> husky@4.3.8 postinstall /usr/src/app/node_modules/husky\n> opencollective-postinstall || exit 0\n\n\u001b[96m\u001b[1mThank you for using husky!\u001b[96m\u001b[1m\n\u001b[0m\u001b[96mIf you rely on this package, please consider supporting our open collective:\u001b[22m\u001b[39m\n> \u001b[94mhttps://opencollective.com/husky/donate\u001b[0m\n\n\u001b[91mnpm notice created a lockfile as package-lock.json. You should commit this file.\n\u001b[0m\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.2 (node_modules/chokidar/node_modules/fsevents):\nnpm \u001b[0m\u001b[91mWARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91mnpm WARN rslider@2.16.3 requires a peer of react@16.3.1 but none is installed. You must install peer dependencies yourself.\n\u001b[0m\u001b[91mnpm WARN rslider@2.16.3 requires a peer of react-dom@^16.3.1 but none is installed. You must install peer dependencies yourself.\n\u001b[0m\u001b[91mnpm WARN rslider@2.16.3 requires a peer of mobx@^4.1.1 but none is installed. You must install peer dependencies yourself.\n\u001b[0m\u001b[91mnpm WARN rslider@2.16.3 requires a peer of mobx-react@^5.0.0 but none is installed. You must install peer dependencies yourself.\n\u001b[0m\u001b[91mnpm WARN rslider@2.16.3 requires a peer of prop-types@^15.6.0 but none is installed. You must install peer dependencies yourself.\n\u001b[0m\u001b[91mnpm WARN lockdown@0.0.0 No repository field.\n\u001b[0m\u001b[91mnpm WARN lockdown@0.0.0 No license field.\n\u001b[0m\u001b[91m\n\u001b[0madded 651 packages from 423 contributors and audited 655 packages in 27.259s\n\n53 packages are looking for funding\n  run `npm fund` for details\n\nfound 2 vulnerabilities (1 high, 1 critical)\n  run `npm audit fix` to fix them, or `npm audit` for details\n\n> lockdown@0.0.0 build /usr/src/app\n> rimraf build && rollup -c rollup.config.js\n\n\u001b[91m\u001b[36m\n\u001b[1msw.js\u001b[22m → \u001b[1mbuild\u001b[22m...\u001b[39m\n\u001b[0m\u001b[91m\u001b[1m\u001b[33m(!) Plugin replace: @rollup/plugin-replace: 'preventAssignment' currently defaults to false. It is recommended to set this option to `true`, as the next major version will default this option to `true`.\u001b[39m\u001b[22m\n\u001b[1m\u001b[33m(!) Generated an empty chunk\u001b[39m\u001b[22m\nsw\n\u001b[32mcreated \u001b[1mbuild\u001b[22m in \u001b[1m535ms\u001b[22m\u001b[39m\n\u001b[36m\n\u001b[1mindex.html\u001b[22m → \u001b[1mbuild\u001b[22m...\u001b[39m\n\u001b[0m\u001b[91m\u001b[1m\u001b[33m(!) To preserve the export signature of the entry module \"src/bootstrap.js\", an empty facade chunk was created. This often happens when creating a bundle for a web app where chunks are placed in script tags and exports are ignored. In this case it is recommended to set \"preserveEntrySignatures: false\" to avoid this and reduce the number of chunks. Otherwise if this is intentional, set \"preserveEntrySignatures: 'strict'\" explicitly to silence this warning.\u001b[39m\u001b[22m\n\u001b[90mhttps://rollupjs.org/guide/en/#preserveentrysignatures\u001b[39m\n\u001b[1msrc/bootstrap.js\u001b[22m\n\u001b[0minitialImports [ '345008c8.js' ]\n\u001b[91mError: Unable to find a place to inject the manifest. This is likely because swSrc and swDest are configured to the same file. Please ensure that your swSrc file contains the following: self.__WB_MANIFEST\n    at Object.injectManifest (/usr/src/app/node_modules/workbox-build/build/inject-manifest.js:165:13)\n\u001b[0m\u001b[91m\u001b[32mcreated \u001b[1mbuild\u001b[22m in \u001b[1m14.6s\u001b[22m\u001b[39m\n\u001b[0mRemoving intermediate container 421c259a0cf4\n ---> 913a51d3eec5\nStep 5/11 : FROM nginx:1.17-alpine\n1.17-alpine: Pulling from library/nginx\ncbdbe7a5bc2a: Already exists\nc554c602ff32: Pulling fs layer\nc554c602ff32: Verifying Checksum\nc554c602ff32: Download complete\nc554c602ff32: Pull complete\nDigest: sha256:763e7f0188e378fef0c761854552c70bbd817555dc4de029681a2e972e25e30e\nStatus: Downloaded newer image for nginx:1.17-alpine\n ---> 89ec9da68213\nStep 6/11 : RUN rm /etc/nginx/conf.d/default.conf\n ---> Running in 4ffa736efbec\nRemoving intermediate container 4ffa736efbec\n ---> 3393be8d3a82\nStep 7/11 : COPY nginx.conf /etc/nginx/conf.d/000-react.conf\n ---> d1631c939c31\nStep 8/11 : COPY --from=build-deps /usr/src/app/build /usr/share/nginx/html\n ---> 42d3c9b1681d\nStep 9/11 : RUN sed -i -r \"s/\\/lockdown\\//\\//g\" /usr/share/nginx/html/index.html\n ---> Running in 0306e9c1e1c5\nRemoving intermediate container 0306e9c1e1c5\n ---> 1e69db195cc5\nStep 10/11 : EXPOSE 80\n ---> Running in 5b79b0182f37\nRemoving intermediate container 5b79b0182f37\n ---> aafb1bb34467\nStep 11/11 : CMD [\"nginx\", \"-g\", \"daemon off;\"]\n ---> Running in 00e8e5e194f5\nRemoving intermediate container 00e8e5e194f5\n ---> 548befb52c5c\nSuccessfully built 548befb52c5c\nSuccessfully tagged lockdown:latest\n","stderr":"","imageSize":27622075},"repair":{"startTime":1672966444819,"endTime":1672966444894,"violations":[{"name":"npmCacheCleanAfterInstall","position":{"start":4,"end":4,"columnStart":4,"columnEnd":9}}],"repairedDockerfile":"# Stage 1 - the build process\nFROM node:10-alpine as build-deps\nWORKDIR /usr/src/app\nCOPY . ./\nRUN npm i && npm run build && npm cache clean --force;\n\n# Stage 2 - the production environment\nFROM nginx:1.17-alpine\nRUN rm /etc/nginx/conf.d/default.conf\nCOPY nginx.conf /etc/nginx/conf.d/000-react.conf\nCOPY --from=build-deps /usr/src/app/build /usr/share/nginx/html\nRUN sed -i -r \"s/\\/lockdown\\//\\//g\" /usr/share/nginx/html/index.html\nEXPOSE 80\nCMD [\"nginx\", \"-g\", \"daemon off;\"]\n"},"repairedBuild":{"startTime":1672966445060,"endTime":1672966509238,"error":null,"stdout":"Sending build context to Docker daemon  14.28MB\r\r\nStep 1/11 : FROM node:10-alpine as build-deps\n ---> aa67ba258e18\nStep 2/11 : WORKDIR /usr/src/app\n ---> Running in f332e7a2dbd4\nRemoving intermediate container f332e7a2dbd4\n ---> e3e3e76e3059\nStep 3/11 : COPY . ./\n ---> c117c6093d0e\nStep 4/11 : RUN npm i && npm run build && npm cache clean --force;\n ---> Running in 841788dedfa7\n\u001b[91mnpm WARN deprecated rollup-plugin-terser@5.3.1: This package has been deprecated and is no longer maintained. Please use @rollup/plugin-terser\n\u001b[0m\u001b[91mnpm WARN deprecated\u001b[0m\u001b[91m @types/browserslist@4.15.0: This is a stub types definition. browserslist provides its own type definitions, so you do not need this installed.\n\u001b[0m\u001b[91mnpm WARN deprecated rollup-plugin-terser@6.1.0: This package has been deprecated and is no longer maintained. Please use @rollup/plugin-terser\n\u001b[0m\u001b[91mnpm WARN deprecated sourcemap-codec@1.4.8: Please use @jridgewell/sourcemap-codec instead\n\u001b[0m\u001b[91mnpm WARN deprecated rollup-plugin-babel@4.4.0: This package has been deprecated and is no longer maintained. Please use @rollup/plugin-babel.\n\u001b[0m\u001b[91mnpm WARN deprecated @hapi/joi@15.1.1: Switch to 'npm install joi'\n\u001b[0m\u001b[91mnpm WARN deprecated source-map-url@0.4.1: See https://github.com/lydell/source-map-url#deprecated\n\u001b[0m\u001b[91mnpm WARN deprecated @hapi/address@2.1.4: Moved to 'npm install @sideway/address'\n\u001b[0m\u001b[91mnpm WARN deprecated @hapi/bourne@1.3.2: This version has been deprecated and is no longer supported or maintained\n\u001b[0m\u001b[91mnpm WARN deprecated @hapi/topo@3.1.6: This version has been deprecated and is no longer supported or maintained\n\u001b[0m\u001b[91mnpm WARN deprecated @hapi/hoek@8.5.1: This version has been deprecated and is no longer supported or maintained\n\u001b[0m\u001b[91mnpm WARN deprecated core-js@2.6.12: core-js@<3.23.3 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Some versions have web compatibility issues. Please, upgrade your dependencies to the actual version of core-js.\n\u001b[0m\n> husky@4.3.8 install /usr/src/app/node_modules/husky\n> node husky install\n\nhusky > Setting up git hooks\ngit --version command failed. Got null.\nhusky > Failed to install\n\n> core-js@2.6.12 postinstall /usr/src/app/node_modules/core-js\n> node -e \"try{require('./postinstall')}catch(e){}\"\n\n\u001b[96mThank you for using core-js (\u001b[94m https://github.com/zloirock/core-js \u001b[96m) for polyfilling JavaScript standard library!\u001b[0m\n\n\u001b[96mThe project needs your help! Please consider supporting of core-js on Open Collective or Patreon: \u001b[0m\n\u001b[96m>\u001b[94m https://opencollective.com/core-js \u001b[0m\n\u001b[96m>\u001b[94m https://www.patreon.com/zloirock \u001b[0m\n\n\u001b[96mAlso, the author of core-js (\u001b[94m https://github.com/zloirock \u001b[96m) is looking for a good job -)\u001b[0m\n\n\n> core-js-bundle@3.27.1 postinstall /usr/src/app/node_modules/core-js-bundle\n> node -e \"try{require('./postinstall')}catch(e){}\"\n\n\u001b[96mThank you for using core-js (\u001b[94m https://github.com/zloirock/core-js \u001b[96m) for polyfilling JavaScript standard library!\u001b[0m\n\n\u001b[96mThe project needs your help! Please consider supporting of core-js:\u001b[0m\n\u001b[96m>\u001b[94m https://opencollective.com/core-js \u001b[0m\n\u001b[96m>\u001b[94m https://patreon.com/zloirock \u001b[0m\n\u001b[96m>\u001b[94m bitcoin: bc1qlea7544qtsmj2rayg0lthvza9fau63ux0fstcz \u001b[0m\n\n\u001b[96mAlso, the author of core-js (\u001b[94m https://github.com/zloirock \u001b[96m) is looking for a good job -)\u001b[0m\n\n\n> ejs@2.7.4 postinstall /usr/src/app/node_modules/ejs\n> node ./postinstall.js\n\nThank you for installing \u001b[35mEJS\u001b[0m: built with the \u001b[32mJake\u001b[0m JavaScript build tool (\u001b[32mhttps://jakejs.com/\u001b[0m)\n\n\n> husky@4.3.8 postinstall /usr/src/app/node_modules/husky\n> opencollective-postinstall || exit 0\n\n\u001b[96m\u001b[1mThank you for using husky!\u001b[96m\u001b[1m\n\u001b[0m\u001b[96mIf you rely on this package, please consider supporting our open collective:\u001b[22m\u001b[39m\n> \u001b[94mhttps://opencollective.com/husky/donate\u001b[0m\n\n\u001b[91mnpm notice\u001b[0m\u001b[91m created a lockfile as package-lock.json. You should commit this file.\n\u001b[0m\u001b[91mnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.2 (node_modules/chokidar/node_modules/fsevents):\nnpm WARN notsup\u001b[0m\u001b[91m SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\u001b[0m\u001b[91mnpm WARN\u001b[0m\u001b[91m rslider@2.16.3 requires a peer of react@16.3.1 but none is installed. You must install peer dependencies yourself.\n\u001b[0m\u001b[91mnpm WARN rslider@2.16.3 requires a peer of react-dom@^16.3.1 but none is installed. You must install peer dependencies yourself.\n\u001b[0m\u001b[91mnpm WARN rslider@2.16.3 requires a peer of mobx@^4.1.1 but none is installed. You must install peer dependencies yourself.\n\u001b[0m\u001b[91mnpm WARN rslider@2.16.3 requires a peer of mobx-react@^5.0.0 but none is installed. You must install peer dependencies yourself.\n\u001b[0m\u001b[91mnpm WARN rslider@2.16.3 requires a peer of prop-types@^15.6.0 but none is installed. You must install peer dependencies yourself.\n\u001b[0m\u001b[91mnpm WARN lockdown@0.0.0 No repository field.\n\u001b[0m\u001b[91mnpm WARN lockdown@0.0.0 No license field.\n\u001b[0m\u001b[91m\n\u001b[0madded 651 packages from 423 contributors and audited 655 packages in 18.62s\n\n53 packages are looking for funding\n  run `npm fund` for details\n\nfound 2 vulnerabilities (1 high, 1 critical)\n  run `npm audit fix` to fix them, or `npm audit` for details\n\n> lockdown@0.0.0 build /usr/src/app\n> rimraf build && rollup -c rollup.config.js\n\n\u001b[91m\u001b[36m\n\u001b[1msw.js\u001b[22m → \u001b[1mbuild\u001b[22m...\u001b[39m\n\u001b[0m\u001b[91m\u001b[1m\u001b[33m(!) Plugin replace: @rollup/plugin-replace: 'preventAssignment' currently defaults to false. It is recommended to set this option to `true`, as the next major version will default this option to `true`.\u001b[39m\u001b[22m\n\u001b[0m\u001b[91m\u001b[1m\u001b[33m(!) Generated an empty chunk\u001b[39m\u001b[22m\n\u001b[0m\u001b[91msw\n\u001b[0m\u001b[91m\u001b[32mcreated \u001b[1mbuild\u001b[22m in \u001b[1m503ms\u001b[22m\u001b[39m\n\u001b[0m\u001b[91m\u001b[36m\n\u001b[1mindex.html\u001b[22m → \u001b[1mbuild\u001b[22m...\u001b[39m\n\u001b[0m\u001b[91m\u001b[1m\u001b[33m(!) To preserve the export signature of the entry module \"src/bootstrap.js\", an empty facade chunk was created. This often happens when creating a bundle for a web app where chunks are placed in script tags and exports are ignored. In this case it is recommended to set \"preserveEntrySignatures: false\" to avoid this and reduce the number of chunks. Otherwise if this is intentional, set \"preserveEntrySignatures: 'strict'\" explicitly to silence this warning.\u001b[39m\u001b[22m\n\u001b[90mhttps://rollupjs.org/guide/en/#preserveentrysignatures\u001b[39m\n\u001b[1msrc/bootstrap.js\u001b[22m\n\u001b[0minitialImports [ '345008c8.js' ]\n\u001b[91mError: Unable to find a place to inject the manifest. This is likely because swSrc and swDest are configured to the same file. Please ensure that your swSrc file contains the following: self.__WB_MANIFEST\n    at Object.injectManifest (/usr/src/app/node_modules/workbox-build/build/inject-manifest.js:165:13)\n\u001b[0m\u001b[91m\u001b[32mcreated \u001b[1mbuild\u001b[22m in \u001b[1m15s\u001b[22m\u001b[39m\n\u001b[0m\u001b[91mnpm\u001b[0m\u001b[91m WARN using --force I sure hope you know what you are doing.\n\u001b[0mRemoving intermediate container 841788dedfa7\n ---> 470a1d434a63\nStep 5/11 : FROM nginx:1.17-alpine\n ---> 89ec9da68213\nStep 6/11 : RUN rm /etc/nginx/conf.d/default.conf\n ---> Running in 024720a89a2b\nRemoving intermediate container 024720a89a2b\n ---> caf05b97ea88\nStep 7/11 : COPY nginx.conf /etc/nginx/conf.d/000-react.conf\n ---> 27ab68f0cf5c\nStep 8/11 : COPY --from=build-deps /usr/src/app/build /usr/share/nginx/html\n ---> af63ea3a1692\nStep 9/11 : RUN sed -i -r \"s/\\/lockdown\\//\\//g\" /usr/share/nginx/html/index.html\n ---> Running in c7e0c314117c\nRemoving intermediate container c7e0c314117c\n ---> e57a29a28e08\nStep 10/11 : EXPOSE 80\n ---> Running in 9acb0743c6dd\nRemoving intermediate container 9acb0743c6dd\n ---> 4f1188ab3b0f\nStep 11/11 : CMD [\"nginx\", \"-g\", \"daemon off;\"]\n ---> Running in db8e33448d39\nRemoving intermediate container db8e33448d39\n ---> ea1001888ad4\nSuccessfully built ea1001888ad4\nSuccessfully tagged lockdown:latest\n","stderr":"","imageSize":27622075}}