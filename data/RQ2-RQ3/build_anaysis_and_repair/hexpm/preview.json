{"repository":"https://github.com/hexpm/preview","dockerfilePath":"Dockerfile","startTime":1672582910478,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/hexpm/preview'...\n","error":null,"commit":"5ce0f85633cf1570433b0b5530af8ac508a9c78a"},"originalBuild":{"startTimestamp":1672582911421,"endTimestamp":1672583175229,"error":null,"stdout":"Sending build context to Docker daemon  841.7kB\r\r\nStep 1/26 : FROM hexpm/elixir:1.11.3-erlang-23.1.5-alpine-3.12.1 as build\n1.11.3-erlang-23.1.5-alpine-3.12.1: Pulling from hexpm/elixir\n188c0c94c7c5: Pulling fs layer\n36e58f9d27e5: Pulling fs layer\n94e158d79721: Pulling fs layer\n27da8698f3c6: Pulling fs layer\n27da8698f3c6: Waiting\n188c0c94c7c5: Verifying Checksum\n188c0c94c7c5: Download complete\n36e58f9d27e5: Verifying Checksum\n36e58f9d27e5: Download complete\n188c0c94c7c5: Pull complete\n94e158d79721: Verifying Checksum\n94e158d79721: Download complete\n36e58f9d27e5: Pull complete\n94e158d79721: Pull complete\n27da8698f3c6: Verifying Checksum\n27da8698f3c6: Download complete\n27da8698f3c6: Pull complete\nDigest: sha256:ddea96eee5f2784868ba6b5db3d88c62d8ae040ec64db7b739c369f966336166\nStatus: Downloaded newer image for hexpm/elixir:1.11.3-erlang-23.1.5-alpine-3.12.1\n ---> 06fa908e57bf\nStep 2/26 : RUN apk add --update git build-base nodejs yarn\n ---> Running in f4fa47dc7db9\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.12/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.12/community/x86_64/APKINDEX.tar.gz\n(1/29) Upgrading musl (1.1.24-r9 -> 1.1.24-r10)\n(2/29) Installing binutils (2.34-r2)\n(3/29) Installing libmagic (5.38-r0)\n(4/29) Installing file (5.38-r0)\n(5/29) Installing gmp (6.2.1-r1)\n(6/29) Installing isl (0.18-r0)\n(7/29) Installing libgomp (9.3.0-r2)\n(8/29) Installing libatomic (9.3.0-r2)\n(9/29) Installing libgphobos (9.3.0-r2)\n(10/29) Installing mpfr4 (4.0.2-r4)\n(11/29) Installing mpc1 (1.1.0-r1)\n(12/29) Installing gcc (9.3.0-r2)\n(13/29) Installing musl-dev (1.1.24-r10)\n(14/29) Installing libc-dev (0.7.2-r3)\n(15/29) Installing g++ (9.3.0-r2)\n(16/29) Installing make (4.3-r0)\n(17/29) Installing fortify-headers (1.1-r0)\n(18/29) Installing patch (2.7.6-r7)\n(19/29) Installing build-base (0.5-r2)\n(20/29) Installing ca-certificates (20220614-r0)\n(21/29) Installing nghttp2-libs (1.41.0-r0)\n(22/29) Installing libcurl (7.79.1-r1)\n(23/29) Installing expat (2.2.10-r4)\n(24/29) Installing pcre2 (10.35-r0)\n(25/29) Installing git (2.26.3-r1)\n(26/29) Installing brotli-libs (1.0.9-r1)\n(27/29) Installing c-ares (1.17.2-r0)\n(28/29) Installing nodejs (12.22.12-r0)\n(29/29) Installing yarn (1.22.4-r0)\nExecuting busybox-1.31.1-r19.trigger\nExecuting ca-certificates-20220614-r0.trigger\nOK: 260 MiB in 52 packages\nRemoving intermediate container f4fa47dc7db9\n ---> 979232911cac\nStep 3/26 : RUN mkdir /app\n ---> Running in 7981cb0556e1\nRemoving intermediate container 7981cb0556e1\n ---> 1297a98cfff5\nStep 4/26 : WORKDIR /app\n ---> Running in 17235ce29a18\nRemoving intermediate container 17235ce29a18\n ---> 34106a14526c\nStep 5/26 : RUN mix local.hex --force &&     mix local.rebar --force\n ---> Running in 1363787a2e3f\n* creating /root/.mix/archives/hex-2.0.0\n* creating /root/.mix/rebar\n* creating /root/.mix/rebar3\nRemoving intermediate container 1363787a2e3f\n ---> a1a2014433b6\nStep 6/26 : ENV MIX_ENV=prod\n ---> Running in dd340f0af881\nRemoving intermediate container dd340f0af881\n ---> c20fa4d30409\nStep 7/26 : COPY mix.exs mix.lock ./\n ---> 15bb0cd4b487\nStep 8/26 : COPY config config\n ---> 20fecee5a385\nStep 9/26 : RUN mix deps.get\n ---> Running in 6c513cac067d\nResolving Hex dependencies...\nResolution completed in 0.333s\nUnchanged:\n  broadway 0.6.2\n  broadway_sqs 0.6.1\n  castore 0.1.11\n  certifi 2.6.1\n  cowboy 2.8.0\n  cowboy_telemetry 0.3.1\n  cowlib 2.9.1\n  ex_aws 2.1.6\n  ex_aws_s3 2.1.0\n  ex_aws_sqs 3.2.1\n  file_system 0.2.10\n  finch 0.6.0\n  floki 0.29.0\n  gen_stage 1.0.0\n  gettext 0.18.2\n  goth 1.3.0-rc.2\n  hackney 1.17.4\n  hex_core 0.8.0\n  html_entities 0.5.1\n  idna 6.1.1\n  jason 1.2.2\n  jose 1.11.1\n  logster 1.0.2\n  makeup 1.0.5\n  makeup_elixir 0.15.0\n  makeup_erlang 0.1.1\n  metrics 1.0.1\n  mime 1.5.0\n  mimerl 1.2.0\n  mint 1.3.0\n  mox 1.0.0\n  nimble_options 0.3.5\n  nimble_parsec 1.1.0\n  nimble_pool 0.2.3\n  parse_trans 3.3.1\n  phoenix 1.5.7\n  phoenix_html 2.14.3\n  phoenix_live_dashboard 0.4.0\n  phoenix_live_reload 1.3.0\n  phoenix_live_view 0.15.3\n  phoenix_pubsub 2.0.0\n  plug 1.11.0\n  plug_cowboy 2.4.1\n  plug_crypto 1.2.2\n  ranch 1.7.1\n  rollbax 0.11.0\n  saxy 1.3.0\n  ssl_verify_fun 1.1.6\n  sweet_xml 0.6.6\n  telemetry 0.4.2\n  telemetry_metrics 0.6.0\n  telemetry_poller 0.5.1\n  unicode_util_compat 0.7.0\n* Getting broadway (Hex package)\n* Getting broadway_sqs (Hex package)\n* Getting ex_aws (Hex package)\n* Getting ex_aws_s3 (Hex package)\n* Getting finch (Hex package)\n* Getting gettext (Hex package)\n* Getting goth (Hex package)\n* Getting hex_core (Hex package)\n* Getting jason (Hex package)\n* Getting logster (Hex package)\n* Getting mint (Hex package)\n* Getting makeup (Hex package)\n* Getting makeup_elixir (Hex package)\n* Getting makeup_erlang (Hex package)\n* Getting phoenix_html (Hex package)\n* Getting phoenix_live_dashboard (Hex package)\n* Getting phoenix_live_reload (Hex package)\n* Getting phoenix_live_view (Hex package)\n* Getting phoenix (Hex package)\n* Getting plug_cowboy (Hex package)\n* Getting rollbax (Hex package)\n* Getting sweet_xml (Hex package)\n* Getting telemetry_metrics (Hex package)\n* Getting telemetry_poller (Hex package)\n* Getting floki (Hex package)\n* Getting mox (Hex package)\n* Getting html_entities (Hex package)\n* Getting telemetry (Hex package)\n* Getting hackney (Hex package)\n* Getting certifi (Hex package)\n* Getting idna (Hex package)\n* Getting metrics (Hex package)\n* Getting mimerl (Hex package)\n* Getting parse_trans (Hex package)\n* Getting ssl_verify_fun (Hex package)\n* Getting unicode_util_compat (Hex package)\n* Getting cowboy (Hex package)\n* Getting cowboy_telemetry (Hex package)\n* Getting plug (Hex package)\n* Getting mime (Hex package)\n* Getting plug_crypto (Hex package)\n* Getting cowlib (Hex package)\n* Getting ranch (Hex package)\n* Getting phoenix_pubsub (Hex package)\n* Getting file_system (Hex package)\n* Getting nimble_parsec (Hex package)\n* Getting jose (Hex package)\n* Getting castore (Hex package)\n* Getting nimble_options (Hex package)\n* Getting nimble_pool (Hex package)\n* Getting ex_aws_sqs (Hex package)\n* Getting saxy (Hex package)\n* Getting gen_stage (Hex package)\nRemoving intermediate container 6c513cac067d\n ---> 0f8d32e1cc35\nStep 10/26 : RUN mix deps.compile\n ---> Running in 6eacd9325cb0\n==> nimble_options\nCompiling 3 files (.ex)\nGenerated nimble_options app\n===> Compiling parse_trans\n===> Compiling mimerl\n==> nimble_pool\nCompiling 2 files (.ex)\nGenerated nimble_pool app\n==> nimble_parsec\nCompiling 4 files (.ex)\nGenerated nimble_parsec app\n==> makeup\nCompiling 44 files (.ex)\nGenerated makeup app\n===> Compiling metrics\n===> Compiling unicode_util_compat\n===> Rebar3 detected a lock file from a newer version. It will be loaded in compatibility mode, but important information may be missing or lost. It is recommended to upgrade Rebar3.\n===> Compiling idna\n==> gettext\nCompiling 1 file (.yrl)\nCompiling 1 file (.erl)\nCompiling 20 files (.ex)\nGenerated gettext app\n==> gen_stage\nCompiling 10 files (.ex)\n\u001b[91mwarning: System.stacktrace/0 is deprecated, use __STACKTRACE__ instead\n  lib/consumer_supervisor.ex:574\n\n\u001b[0mGenerated gen_stage app\n==> jose\nCompiling 106 files (.erl)\nCompiling 8 files (.ex)\nGenerated jose app\n===> Compiling ranch\n===> Compiling telemetry\n==> broadway\nCompiling 19 files (.ex)\nGenerated broadway app\n==> telemetry_metrics\nCompiling 7 files (.ex)\nGenerated telemetry_metrics app\n===> Compiling telemetry_poller\n==> jason\nCompiling 8 files (.ex)\nGenerated jason app\n==> ssl_verify_fun\nCompiling 7 files (.erl)\nGenerated ssl_verify_fun app\n===> Compiling hex_core\n==> castore\nCompiling 1 file (.ex)\nGenerated castore app\n==> mint\nCompiling 1 file (.erl)\nCompiling 23 files (.ex)\nGenerated mint app\n==> finch\nCompiling 9 files (.ex)\nGenerated finch app\n===> Compiling certifi\n===> Rebar3 detected a lock file from a newer version. It will be loaded in compatibility mode, but important information may be missing or lost. It is recommended to upgrade Rebar3.\n===> Compiling hackney\n==> goth\nCompiling 10 files (.ex)\nGenerated goth app\n==> sweet_xml\nCompiling 1 file (.ex)\nGenerated sweet_xml app\n==> ex_aws\nCompiling 26 files (.ex)\nGenerated ex_aws app\n==> ex_aws_s3\nCompiling 7 files (.ex)\nGenerated ex_aws_s3 app\n==> makeup_elixir\nCompiling 6 files (.ex)\nGenerated makeup_elixir app\n==> phoenix_pubsub\nCompiling 11 files (.ex)\nGenerated phoenix_pubsub app\n===> Compiling cowlib\n===> Compiling cowboy\n===> Compiling cowboy_telemetry\n==> mime\nCompiling 2 files (.ex)\nGenerated mime app\n==> makeup_erlang\nCompiling 3 files (.ex)\nGenerated makeup_erlang app\n==> rollbax\nCompiling 8 files (.ex)\n\u001b[91mwarning: Supervisor.Spec.worker/2 is deprecated. Use the new child specifications outlined in the Supervisor module instead\n  lib/rollbax.ex:93: Rollbax.start/2\n\n\u001b[0mGenerated rollbax app\n==> saxy\nCompiling 17 files (.ex)\nGenerated saxy app\n==> ex_aws_sqs\nCompiling 4 files (.ex)\nGenerated ex_aws_sqs app\n==> broadway_sqs\nCompiling 3 files (.ex)\nGenerated broadway_sqs app\n==> plug_crypto\nCompiling 5 files (.ex)\nGenerated plug_crypto app\n==> plug\nCompiling 1 file (.erl)\nCompiling 41 files (.ex)\n\u001b[91mwarning: System.stacktrace/0 is deprecated, use __STACKTRACE__ instead\n  lib/plug/conn/wrapper_error.ex:23\n\n\u001b[0mGenerated plug app\n==> logster\nCompiling 4 files (.ex)\nGenerated logster app\n==> phoenix_html\nCompiling 8 files (.ex)\nGenerated phoenix_html app\n==> plug_cowboy\nCompiling 5 files (.ex)\nGenerated plug_cowboy app\n==> phoenix\nCompiling 66 files (.ex)\nGenerated phoenix app\n==> phoenix_live_view\nCompiling 22 files (.ex)\nGenerated phoenix_live_view app\n==> phoenix_live_dashboard\nCompiling 36 files (.ex)\nGenerated phoenix_live_dashboard app\nRemoving intermediate container 6eacd9325cb0\n ---> 8f413a51620e\nStep 11/26 : COPY assets assets\n ---> 3cec88e0c474\nStep 12/26 : RUN cd assets && yarn install && yarn run webpack --mode production\n ---> Running in 1adeb3a439ef\nyarn install v1.22.4\n[1/4] Resolving packages...\n[2/4] Fetching packages...\ninfo fsevents@2.3.1: The platform \"linux\" is incompatible with this module.\ninfo \"fsevents@2.3.1\" is an optional dependency and failed compatibility check. Excluding it from installation.\ninfo fsevents@1.2.13: The platform \"linux\" is incompatible with this module.\ninfo \"fsevents@1.2.13\" is an optional dependency and failed compatibility check. Excluding it from installation.\n[3/4] Linking dependencies...\n[4/4] Building fresh packages...\nDone in 13.28s.\nyarn run v1.22.4\n$ /app/assets/node_modules/.bin/webpack --mode production\n\u001b[91mBrowserslist: caniuse-lite is outdated. Please run:\nnpx browserslist@latest --update-db\n\nWhy you should do it regularly:\nhttps://github.com/browserslist/browserslist#browsers-data-updating\n\u001b[0mHash: 8a7ed0fdda1cc3847323\nVersion: webpack 4.41.5\nTime: 4256ms\nBuilt at: 01/01/2023 2:24:57 PM\n                   Asset       Size  Chunks             Chunk Names\n          ../css/app.css   14.6 KiB       0  [emitted]  app\n          ../favicon.ico   14.7 KiB          [emitted]  \n../images/hexpreview.svg   98.5 KiB          [emitted]  \n           ../robots.txt  202 bytes          [emitted]  \n                  app.js    102 KiB       0  [emitted]  app\n      app.js.LICENSE.txt   98 bytes          [emitted]  \nEntrypoint app = ../css/app.css app.js\n[3] multi ./js/app.js 28 bytes {0} [built]\n[4] ./js/app.js 2.17 KiB {0} [built]\n[5] ./css/app.scss 39 bytes {0} [built]\n    + 7 hidden modules\nChild mini-css-extract-plugin node_modules/css-loader/dist/cjs.js!node_modules/sass-loader/dist/cjs.js!css/app.scss:\n    Entrypoint mini-css-extract-plugin = *\n    [1] ./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./css/app.scss 6.25 KiB {0} [built]\n    [2] ./node_modules/css-loader/dist/cjs.js!./css/milligram.css 11.1 KiB {0} [built]\n        + 2 hidden modules\nDone in 5.30s.\nRemoving intermediate container 1adeb3a439ef\n ---> 1f86ad4cf70a\nStep 13/26 : RUN mix phx.digest\n ---> Running in 2e148b988645\nCheck your digested files at \"priv/static\"\nRemoving intermediate container 2e148b988645\n ---> 7b5bf779b62a\nStep 14/26 : COPY priv priv\n ---> b80579bb4444\nStep 15/26 : COPY lib lib\n ---> 13354bda2b51\nStep 16/26 : RUN mix compile\n ---> Running in 5672c5f198e2\nCompiling 34 files (.ex)\nGenerated preview app\nRemoving intermediate container 5672c5f198e2\n ---> fb5f6d6db801\nStep 17/26 : COPY rel rel\n ---> db4da6367aee\nStep 18/26 : RUN mix release\n ---> Running in 2af1bc6afc88\n* assembling preview-0.1.0 on MIX_ENV=prod\n* using config/runtime.exs to configure the release at runtime\n* creating _build/prod/rel/preview/releases/0.1.0/vm.args\n* creating _build/prod/rel/preview/releases/0.1.0/env.sh\n\nRelease created at _build/prod/rel/preview!\n\n    # To start your system\n    _build/prod/rel/preview/bin/preview start\n\nOnce the release is running:\n\n    # To connect to it remotely\n    _build/prod/rel/preview/bin/preview remote\n\n    # To stop it gracefully (you may also send SIGINT/SIGTERM)\n    _build/prod/rel/preview/bin/preview stop\n\nTo list all commands:\n\n    _build/prod/rel/preview/bin/preview\n\nRemoving intermediate container 2af1bc6afc88\n ---> fbb41d2277a0\nStep 19/26 : FROM alpine:3.12.1 AS app\n3.12.1: Pulling from library/alpine\n188c0c94c7c5: Already exists\nDigest: sha256:c0e9560cda118f9ec63ddefb4a173a2b2a0347082d7dff7dc14272e7841a5b5a\nStatus: Downloaded newer image for alpine:3.12.1\n ---> d6e46aa2470d\nStep 20/26 : RUN apk add --update bash openssl\n ---> Running in 6399ec52e980\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.12/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.12/community/x86_64/APKINDEX.tar.gz\n(1/5) Installing ncurses-terminfo-base (6.2_p20200523-r1)\n(2/5) Installing ncurses-libs (6.2_p20200523-r1)\n(3/5) Installing readline (8.0.4-r0)\n(4/5) Installing bash (5.0.17-r0)\nExecuting bash-5.0.17-r0.post-install\n(5/5) Installing openssl (1.1.1o-r0)\nExecuting busybox-1.31.1-r19.trigger\nOK: 8 MiB in 19 packages\nRemoving intermediate container 6399ec52e980\n ---> e12bb2948e18\nStep 21/26 : RUN mkdir /app\n ---> Running in 9895ee31cde4\nRemoving intermediate container 9895ee31cde4\n ---> ebed5cbb7667\nStep 22/26 : WORKDIR /app\n ---> Running in 7d119a70cc0f\nRemoving intermediate container 7d119a70cc0f\n ---> 721391efc502\nStep 23/26 : COPY --from=build /app/_build/prod/rel/preview ./\n ---> 73d3e54f3889\nStep 24/26 : RUN chown -R nobody: /app\n ---> Running in 1ac7f13a8f49\nRemoving intermediate container 1ac7f13a8f49\n ---> fa1048a347a1\nStep 25/26 : USER nobody\n ---> Running in 5c3d67ac1962\nRemoving intermediate container 5c3d67ac1962\n ---> 228a96043fae\nStep 26/26 : ENV HOME=/app\n ---> Running in f130a5731ab5\nRemoving intermediate container f130a5731ab5\n ---> 72b6e0ecb624\nSuccessfully built 72b6e0ecb624\nSuccessfully tagged preview:latest\n","stderr":"","imageSize":39614438},"repair":{"violations":[{"name":"apkAddUseNoCache","position":{"start":3,"end":3,"columnStart":4,"columnEnd":47}},{"name":"apkAddUseNoCache","position":{"start":38,"end":38,"columnStart":4,"columnEnd":33}}],"repairedDockerfile":"FROM hexpm/elixir:1.11.3-erlang-23.1.5-alpine-3.12.1 as build\n\n# install build dependencies\nRUN apk add --no-cache --update git build-base nodejs yarn\n\n# prepare build dir\nRUN mkdir /app\nWORKDIR /app\n\n# install hex + rebar\nRUN mix local.hex --force && \\\n    mix local.rebar --force\n\n# set build ENV\nENV MIX_ENV=prod\n\n# install mix dependencies\nCOPY mix.exs mix.lock ./\nCOPY config config\nRUN mix deps.get\nRUN mix deps.compile\n\n# build assets\nCOPY assets assets\nRUN cd assets && yarn install && yarn run webpack --mode production\nRUN mix phx.digest\n\n# build project\nCOPY priv priv\nCOPY lib lib\nRUN mix compile\n\n# build release\nCOPY rel rel\nRUN mix release\n\n# prepare release image\nFROM alpine:3.12.1 AS app\nRUN apk add --no-cache --update bash openssl\n\nRUN mkdir /app\nWORKDIR /app\n\nCOPY --from=build /app/_build/prod/rel/preview ./\nRUN chown -R nobody: /app\nUSER nobody\n\nENV HOME=/app\n"},"repairedBuild":{"startTimestamp":1672583175726,"endTimestamp":1672583425158,"error":null,"stdout":"Sending build context to Docker daemon  841.7kB\r\r\nStep 1/26 : FROM hexpm/elixir:1.11.3-erlang-23.1.5-alpine-3.12.1 as build\n ---> 06fa908e57bf\nStep 2/26 : RUN apk add --no-cache --update git build-base nodejs yarn\n ---> Running in f485042e5a82\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.12/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.12/community/x86_64/APKINDEX.tar.gz\n(1/29) Upgrading musl (1.1.24-r9 -> 1.1.24-r10)\n(2/29) Installing binutils (2.34-r2)\n(3/29) Installing libmagic (5.38-r0)\n(4/29) Installing file (5.38-r0)\n(5/29) Installing gmp (6.2.1-r1)\n(6/29) Installing isl (0.18-r0)\n(7/29) Installing libgomp (9.3.0-r2)\n(8/29) Installing libatomic (9.3.0-r2)\n(9/29) Installing libgphobos (9.3.0-r2)\n(10/29) Installing mpfr4 (4.0.2-r4)\n(11/29) Installing mpc1 (1.1.0-r1)\n(12/29) Installing gcc (9.3.0-r2)\n(13/29) Installing musl-dev (1.1.24-r10)\n(14/29) Installing libc-dev (0.7.2-r3)\n(15/29) Installing g++ (9.3.0-r2)\n(16/29) Installing make (4.3-r0)\n(17/29) Installing fortify-headers (1.1-r0)\n(18/29) Installing patch (2.7.6-r7)\n(19/29) Installing build-base (0.5-r2)\n(20/29) Installing ca-certificates (20220614-r0)\n(21/29) Installing nghttp2-libs (1.41.0-r0)\n(22/29) Installing libcurl (7.79.1-r1)\n(23/29) Installing expat (2.2.10-r4)\n(24/29) Installing pcre2 (10.35-r0)\n(25/29) Installing git (2.26.3-r1)\n(26/29) Installing brotli-libs (1.0.9-r1)\n(27/29) Installing c-ares (1.17.2-r0)\n(28/29) Installing nodejs (12.22.12-r0)\n(29/29) Installing yarn (1.22.4-r0)\nExecuting busybox-1.31.1-r19.trigger\nExecuting ca-certificates-20220614-r0.trigger\nOK: 260 MiB in 52 packages\nRemoving intermediate container f485042e5a82\n ---> c3eb317489a0\nStep 3/26 : RUN mkdir /app\n ---> Running in 08029892ce7e\nRemoving intermediate container 08029892ce7e\n ---> 9b2ead4c8140\nStep 4/26 : WORKDIR /app\n ---> Running in d79cbf00d228\nRemoving intermediate container d79cbf00d228\n ---> 6e10aead129f\nStep 5/26 : RUN mix local.hex --force &&     mix local.rebar --force\n ---> Running in 4fbe9e90ac2c\n* creating /root/.mix/archives/hex-2.0.0\n* creating /root/.mix/rebar\n* creating /root/.mix/rebar3\nRemoving intermediate container 4fbe9e90ac2c\n ---> 75cad4540285\nStep 6/26 : ENV MIX_ENV=prod\n ---> Running in f7c6a46381c5\nRemoving intermediate container f7c6a46381c5\n ---> 00e7fd3b676b\nStep 7/26 : COPY mix.exs mix.lock ./\n ---> 4d0e87c99489\nStep 8/26 : COPY config config\n ---> 084c796aec10\nStep 9/26 : RUN mix deps.get\n ---> Running in 2a93a91df171\nResolving Hex dependencies...\nResolution completed in 0.307s\nUnchanged:\n  broadway 0.6.2\n  broadway_sqs 0.6.1\n  castore 0.1.11\n  certifi 2.6.1\n  cowboy 2.8.0\n  cowboy_telemetry 0.3.1\n  cowlib 2.9.1\n  ex_aws 2.1.6\n  ex_aws_s3 2.1.0\n  ex_aws_sqs 3.2.1\n  file_system 0.2.10\n  finch 0.6.0\n  floki 0.29.0\n  gen_stage 1.0.0\n  gettext 0.18.2\n  goth 1.3.0-rc.2\n  hackney 1.17.4\n  hex_core 0.8.0\n  html_entities 0.5.1\n  idna 6.1.1\n  jason 1.2.2\n  jose 1.11.1\n  logster 1.0.2\n  makeup 1.0.5\n  makeup_elixir 0.15.0\n  makeup_erlang 0.1.1\n  metrics 1.0.1\n  mime 1.5.0\n  mimerl 1.2.0\n  mint 1.3.0\n  mox 1.0.0\n  nimble_options 0.3.5\n  nimble_parsec 1.1.0\n  nimble_pool 0.2.3\n  parse_trans 3.3.1\n  phoenix 1.5.7\n  phoenix_html 2.14.3\n  phoenix_live_dashboard 0.4.0\n  phoenix_live_reload 1.3.0\n  phoenix_live_view 0.15.3\n  phoenix_pubsub 2.0.0\n  plug 1.11.0\n  plug_cowboy 2.4.1\n  plug_crypto 1.2.2\n  ranch 1.7.1\n  rollbax 0.11.0\n  saxy 1.3.0\n  ssl_verify_fun 1.1.6\n  sweet_xml 0.6.6\n  telemetry 0.4.2\n  telemetry_metrics 0.6.0\n  telemetry_poller 0.5.1\n  unicode_util_compat 0.7.0\n* Getting broadway (Hex package)\n* Getting broadway_sqs (Hex package)\n* Getting ex_aws (Hex package)\n* Getting ex_aws_s3 (Hex package)\n* Getting finch (Hex package)\n* Getting gettext (Hex package)\n* Getting goth (Hex package)\n* Getting hex_core (Hex package)\n* Getting jason (Hex package)\n* Getting logster (Hex package)\n* Getting mint (Hex package)\n* Getting makeup (Hex package)\n* Getting makeup_elixir (Hex package)\n* Getting makeup_erlang (Hex package)\n* Getting phoenix_html (Hex package)\n* Getting phoenix_live_dashboard (Hex package)\n* Getting phoenix_live_reload (Hex package)\n* Getting phoenix_live_view (Hex package)\n* Getting phoenix (Hex package)\n* Getting plug_cowboy (Hex package)\n* Getting rollbax (Hex package)\n* Getting sweet_xml (Hex package)\n* Getting telemetry_metrics (Hex package)\n* Getting telemetry_poller (Hex package)\n* Getting floki (Hex package)\n* Getting mox (Hex package)\n* Getting html_entities (Hex package)\n* Getting telemetry (Hex package)\n* Getting hackney (Hex package)\n* Getting certifi (Hex package)\n* Getting idna (Hex package)\n* Getting metrics (Hex package)\n* Getting mimerl (Hex package)\n* Getting parse_trans (Hex package)\n* Getting ssl_verify_fun (Hex package)\n* Getting unicode_util_compat (Hex package)\n* Getting cowboy (Hex package)\n* Getting cowboy_telemetry (Hex package)\n* Getting plug (Hex package)\n* Getting mime (Hex package)\n* Getting plug_crypto (Hex package)\n* Getting cowlib (Hex package)\n* Getting ranch (Hex package)\n* Getting phoenix_pubsub (Hex package)\n* Getting file_system (Hex package)\n* Getting nimble_parsec (Hex package)\n* Getting jose (Hex package)\n* Getting castore (Hex package)\n* Getting nimble_options (Hex package)\n* Getting nimble_pool (Hex package)\n* Getting ex_aws_sqs (Hex package)\n* Getting saxy (Hex package)\n* Getting gen_stage (Hex package)\nRemoving intermediate container 2a93a91df171\n ---> 2507745c2a9a\nStep 10/26 : RUN mix deps.compile\n ---> Running in 8a79883095fe\n==> nimble_options\nCompiling 3 files (.ex)\nGenerated nimble_options app\n===> Compiling parse_trans\n===> Compiling mimerl\n==> nimble_pool\nCompiling 2 files (.ex)\nGenerated nimble_pool app\n==> nimble_parsec\nCompiling 4 files (.ex)\nGenerated nimble_parsec app\n==> makeup\nCompiling 44 files (.ex)\nGenerated makeup app\n===> Compiling metrics\n===> Compiling unicode_util_compat\n===> Rebar3 detected a lock file from a newer version. It will be loaded in compatibility mode, but important information may be missing or lost. It is recommended to upgrade Rebar3.\n===> Compiling idna\n==> gettext\nCompiling 1 file (.yrl)\nCompiling 1 file (.erl)\nCompiling 20 files (.ex)\nGenerated gettext app\n==> gen_stage\nCompiling 10 files (.ex)\n\u001b[91mwarning: System.stacktrace/0 is deprecated, use __STACKTRACE__ instead\n  lib/consumer_supervisor.ex:574\n\n\u001b[0mGenerated gen_stage app\n==> jose\nCompiling 106 files (.erl)\nCompiling 8 files (.ex)\nGenerated jose app\n===> Compiling ranch\n===> Compiling telemetry\n==> broadway\nCompiling 19 files (.ex)\nGenerated broadway app\n==> telemetry_metrics\nCompiling 7 files (.ex)\nGenerated telemetry_metrics app\n===> Compiling telemetry_poller\n==> jason\nCompiling 8 files (.ex)\nGenerated jason app\n==> ssl_verify_fun\nCompiling 7 files (.erl)\nGenerated ssl_verify_fun app\n===> Compiling hex_core\n==> castore\nCompiling 1 file (.ex)\nGenerated castore app\n==> mint\nCompiling 1 file (.erl)\nCompiling 23 files (.ex)\nGenerated mint app\n==> finch\nCompiling 9 files (.ex)\nGenerated finch app\n===> Compiling certifi\n===> Rebar3 detected a lock file from a newer version. It will be loaded in compatibility mode, but important information may be missing or lost. It is recommended to upgrade Rebar3.\n===> Compiling hackney\n==> goth\nCompiling 10 files (.ex)\nGenerated goth app\n==> sweet_xml\nCompiling 1 file (.ex)\nGenerated sweet_xml app\n==> ex_aws\nCompiling 26 files (.ex)\nGenerated ex_aws app\n==> ex_aws_s3\nCompiling 7 files (.ex)\nGenerated ex_aws_s3 app\n==> makeup_elixir\nCompiling 6 files (.ex)\nGenerated makeup_elixir app\n==> phoenix_pubsub\nCompiling 11 files (.ex)\nGenerated phoenix_pubsub app\n===> Compiling cowlib\n===> Compiling cowboy\n===> Compiling cowboy_telemetry\n==> mime\nCompiling 2 files (.ex)\nGenerated mime app\n==> makeup_erlang\nCompiling 3 files (.ex)\nGenerated makeup_erlang app\n==> rollbax\nCompiling 8 files (.ex)\n\u001b[91mwarning: Supervisor.Spec.worker/2 is deprecated. Use the new child specifications outlined in the Supervisor module instead\n  lib/rollbax.ex:93: Rollbax.start/2\n\n\u001b[0mGenerated rollbax app\n==> saxy\nCompiling 17 files (.ex)\nGenerated saxy app\n==> ex_aws_sqs\nCompiling 4 files (.ex)\nGenerated ex_aws_sqs app\n==> broadway_sqs\nCompiling 3 files (.ex)\nGenerated broadway_sqs app\n==> plug_crypto\nCompiling 5 files (.ex)\nGenerated plug_crypto app\n==> plug\nCompiling 1 file (.erl)\nCompiling 41 files (.ex)\n\u001b[91mwarning: System.stacktrace/0 is deprecated, use __STACKTRACE__ instead\n  lib/plug/conn/wrapper_error.ex:23\n\n\u001b[0mGenerated plug app\n==> logster\nCompiling 4 files (.ex)\nGenerated logster app\n==> phoenix_html\nCompiling 8 files (.ex)\nGenerated phoenix_html app\n==> plug_cowboy\nCompiling 5 files (.ex)\nGenerated plug_cowboy app\n==> phoenix\nCompiling 66 files (.ex)\nGenerated phoenix app\n==> phoenix_live_view\nCompiling 22 files (.ex)\nGenerated phoenix_live_view app\n==> phoenix_live_dashboard\nCompiling 36 files (.ex)\nGenerated phoenix_live_dashboard app\nRemoving intermediate container 8a79883095fe\n ---> de81c7406daa\nStep 11/26 : COPY assets assets\n ---> 59110277ddef\nStep 12/26 : RUN cd assets && yarn install && yarn run webpack --mode production\n ---> Running in c69641fc9042\nyarn install v1.22.4\n[1/4] Resolving packages...\n[2/4] Fetching packages...\ninfo fsevents@2.3.1: The platform \"linux\" is incompatible with this module.\ninfo \"fsevents@2.3.1\" is an optional dependency and failed compatibility check. Excluding it from installation.\ninfo fsevents@1.2.13: The platform \"linux\" is incompatible with this module.\ninfo \"fsevents@1.2.13\" is an optional dependency and failed compatibility check. Excluding it from installation.\n[3/4] Linking dependencies...\n[4/4] Building fresh packages...\nDone in 11.43s.\nyarn run v1.22.4\n$ /app/assets/node_modules/.bin/webpack --mode production\n\u001b[91mBrowserslist: caniuse-lite is outdated. Please run:\nnpx browserslist@latest --update-db\n\nWhy you should do it regularly:\nhttps://github.com/browserslist/browserslist#browsers-data-updating\n\u001b[0mHash: 8a7ed0fdda1cc3847323\nVersion: webpack 4.41.5\nTime: 3998ms\nBuilt at: 01/01/2023 2:28:46 PM\n                   Asset       Size  Chunks             Chunk Names\n          ../css/app.css   14.6 KiB       0  [emitted]  app\n          ../favicon.ico   14.7 KiB          [emitted]  \n../images/hexpreview.svg   98.5 KiB          [emitted]  \n           ../robots.txt  202 bytes          [emitted]  \n                  app.js    102 KiB       0  [emitted]  app\n      app.js.LICENSE.txt   98 bytes          [emitted]  \nEntrypoint app = ../css/app.css app.js\n[3] multi ./js/app.js 28 bytes {0} [built]\n[4] ./js/app.js 2.17 KiB {0} [built]\n[5] ./css/app.scss 39 bytes {0} [built]\n    + 7 hidden modules\nChild mini-css-extract-plugin node_modules/css-loader/dist/cjs.js!node_modules/sass-loader/dist/cjs.js!css/app.scss:\n    Entrypoint mini-css-extract-plugin = *\n    [1] ./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./css/app.scss 6.25 KiB {0} [built]\n    [2] ./node_modules/css-loader/dist/cjs.js!./css/milligram.css 11.1 KiB {0} [built]\n        + 2 hidden modules\nDone in 4.96s.\nRemoving intermediate container c69641fc9042\n ---> 500b9ac14c5a\nStep 13/26 : RUN mix phx.digest\n ---> Running in 4e374f6a1b54\nCheck your digested files at \"priv/static\"\nRemoving intermediate container 4e374f6a1b54\n ---> 9dff4f0ef782\nStep 14/26 : COPY priv priv\n ---> f24ac430f7e6\nStep 15/26 : COPY lib lib\n ---> 725a35236922\nStep 16/26 : RUN mix compile\n ---> Running in cfa33f65efcc\nCompiling 34 files (.ex)\nGenerated preview app\nRemoving intermediate container cfa33f65efcc\n ---> f1953a967c24\nStep 17/26 : COPY rel rel\n ---> 0db039ec011a\nStep 18/26 : RUN mix release\n ---> Running in 443efd019302\n* assembling preview-0.1.0 on MIX_ENV=prod\n* using config/runtime.exs to configure the release at runtime\n* creating _build/prod/rel/preview/releases/0.1.0/vm.args\n* creating _build/prod/rel/preview/releases/0.1.0/env.sh\n\nRelease created at _build/prod/rel/preview!\n\n    # To start your system\n    _build/prod/rel/preview/bin/preview start\n\nOnce the release is running:\n\n    # To connect to it remotely\n    _build/prod/rel/preview/bin/preview remote\n\n    # To stop it gracefully (you may also send SIGINT/SIGTERM)\n    _build/prod/rel/preview/bin/preview stop\n\nTo list all commands:\n\n    _build/prod/rel/preview/bin/preview\n\nRemoving intermediate container 443efd019302\n ---> 0dbe0a851c54\nStep 19/26 : FROM alpine:3.12.1 AS app\n ---> d6e46aa2470d\nStep 20/26 : RUN apk add --no-cache --update bash openssl\n ---> Running in cbc4c7fdaefc\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.12/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.12/community/x86_64/APKINDEX.tar.gz\n(1/5) Installing ncurses-terminfo-base (6.2_p20200523-r1)\n(2/5) Installing ncurses-libs (6.2_p20200523-r1)\n(3/5) Installing readline (8.0.4-r0)\n(4/5) Installing bash (5.0.17-r0)\nExecuting bash-5.0.17-r0.post-install\n(5/5) Installing openssl (1.1.1o-r0)\nExecuting busybox-1.31.1-r19.trigger\nOK: 8 MiB in 19 packages\nRemoving intermediate container cbc4c7fdaefc\n ---> 6d881c25867d\nStep 21/26 : RUN mkdir /app\n ---> Running in 9089a7fcc3ba\nRemoving intermediate container 9089a7fcc3ba\n ---> 101c9892a1c7\nStep 22/26 : WORKDIR /app\n ---> Running in 02b6c9dacc75\nRemoving intermediate container 02b6c9dacc75\n ---> b08f470fa49f\nStep 23/26 : COPY --from=build /app/_build/prod/rel/preview ./\n ---> 5e11fc6351fc\nStep 24/26 : RUN chown -R nobody: /app\n ---> Running in b21a76f6bfdd\nRemoving intermediate container b21a76f6bfdd\n ---> 31cfa17827d5\nStep 25/26 : USER nobody\n ---> Running in 671ef256efa0\nRemoving intermediate container 671ef256efa0\n ---> 730b15536eb2\nStep 26/26 : ENV HOME=/app\n ---> Running in 26bc5ce03b3f\nRemoving intermediate container 26bc5ce03b3f\n ---> 3fe94e5ca482\nSuccessfully built 3fe94e5ca482\nSuccessfully tagged preview:latest\n","stderr":"","imageSize":37826217},"endTime":1672583425520}