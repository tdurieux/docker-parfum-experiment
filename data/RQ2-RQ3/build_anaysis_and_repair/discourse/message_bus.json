{"repository":"https://github.com/discourse/message_bus","dockerfilePath":"Dockerfile","startTime":1672910886244,"endTime":1672910979273,"clone":{"startTime":1672910886247,"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/discourse/message_bus'...\n","error":null,"endTime":1672910887168,"commit":"b64498e7876f951cc53a457bc58d1173a767012d"},"originalBuild":{"startTime":1672910887233,"endTime":1672910970739,"error":null,"stdout":"Sending build context to Docker daemon   1.06MB\r\r\nStep 1/9 : FROM ruby:2.7\n2.7: Pulling from library/ruby\n32de3c850997: Already exists\nfa1d4c8d85a4: Already exists\nc796299bbbdd: Already exists\n81283a9569ad: Already exists\n60b38700e7fb: Already exists\n5fe064c92718: Pulling fs layer\n82cf2b446a79: Pulling fs layer\n919a7c0c7192: Pulling fs layer\n5fe064c92718: Verifying Checksum\n5fe064c92718: Download complete\n919a7c0c7192: Download complete\n5fe064c92718: Pull complete\n82cf2b446a79: Verifying Checksum\n82cf2b446a79: Download complete\n82cf2b446a79: Pull complete\n919a7c0c7192: Pull complete\nDigest: sha256:85860033c72fc9d0f3c20fb38a9b71981c6a9002afcc28048b923790ba409df2\nStatus: Downloaded newer image for ruby:2.7\n ---> 35f703a364a3\nStep 2/9 : RUN cd /tmp &&   wget --quiet https://bitbucket.org/ariya/phantomjs/downloads/phantomjs-2.1.1-linux-x86_64.tar.bz2 &&   tar -xf phantomjs-2.1.1-linux-x86_64.tar.bz2 &&   mv phantomjs-2.1.1-linux-x86_64/bin/phantomjs /usr/local/bin &&   rm -rf phantomjs*\n ---> Running in 0067a400e315\nRemoving intermediate container 0067a400e315\n ---> 4e4e955ece32\nStep 3/9 : WORKDIR /usr/src/app\n ---> Running in 14292b9f73dc\nRemoving intermediate container 14292b9f73dc\n ---> e55a5ea861f5\nStep 4/9 : RUN mkdir -p ./lib/message_bus\n ---> Running in 4811768a6dff\nRemoving intermediate container 4811768a6dff\n ---> a585e17c2a78\nStep 5/9 : COPY lib/message_bus/version.rb ./lib/message_bus\n ---> 12d0c134f659\nStep 6/9 : COPY Gemfile *.gemspec ./\n ---> 2d32a2dc2056\nStep 7/9 : RUN bundle install\n ---> Running in 216a82da82a3\n\u001b[91mfatal: not a git repository (or any of the parent directories): .git\n\u001b[0mFetching gem metadata from https://rubygems.org/..........\nResolving dependencies...\nFetching rake 13.0.6\nInstalling rake 13.0.6\nFetching ast 2.4.2\nInstalling ast 2.4.2\nUsing bundler 2.1.4\nFetching byebug 11.1.3\nInstalling byebug 11.1.3 with native extensions\nFetching concurrent-ruby 1.1.10\nInstalling concurrent-ruby 1.1.10\nFetching connection_pool 2.3.0\nInstalling connection_pool 2.3.0\nFetching daemons 1.4.1\nInstalling daemons 1.4.1\nFetching eventmachine 1.2.7\nInstalling eventmachine 1.2.7 with native extensions\nFetching http_parser.rb 0.8.0\nInstalling http_parser.rb 0.8.0 with native extensions\nFetching json 2.6.3\nInstalling json 2.6.3 with native extensions\nFetching method_source 1.0.0\nInstalling method_source 1.0.0\nFetching m 1.6.1\nInstalling m 1.6.1\nFetching rack 2.2.5\nInstalling rack 2.2.5\nUsing message_bus 4.3.0 from source at `.`\nFetching minitest 5.17.0\nInstalling minitest 5.17.0\nFetching minitest-global_expectations 1.0.1\nInstalling minitest-global_expectations 1.0.1\nFetching minitest-hooks 1.5.0\nInstalling minitest-hooks 1.5.0\nFetching nio4r 2.5.8\nInstalling nio4r 2.5.8 with native extensions\nFetching oj 3.13.23\nInstalling oj 3.13.23 with native extensions\nFetching parallel 1.22.1\nInstalling parallel 1.22.1\nFetching parser 3.2.0.0\nInstalling parser 3.2.0.0\nFetching pg 1.4.5\nInstalling pg 1.4.5 with native extensions\nFetching puma 6.0.2\nInstalling puma 6.0.2 with native extensions\nFetching rack-test 2.0.2\nInstalling rack-test 2.0.2\nFetching rainbow 3.1.1\nInstalling rainbow 3.1.1\nFetching redis-client 0.11.2\nInstalling redis-client 0.11.2\nFetching redis 5.0.5\nInstalling redis 5.0.5\nFetching regexp_parser 2.6.1\nInstalling regexp_parser 2.6.1\nFetching rexml 3.2.5\nInstalling rexml 3.2.5\nFetching rubocop-ast 1.24.1\nInstalling rubocop-ast 1.24.1\nFetching ruby-progressbar 1.11.0\nInstalling ruby-progressbar 1.11.0\nFetching unicode-display_width 2.4.2\nInstalling unicode-display_width 2.4.2\nFetching rubocop 1.42.0\nInstalling rubocop 1.42.0\nFetching rubocop-rspec 2.16.0\nInstalling rubocop-rspec 2.16.0\nFetching rubocop-discourse 3.0.1\nInstalling rubocop-discourse 3.0.1\nFetching thin 1.8.1\nInstalling thin 1.8.1 with native extensions\nFetching webrick 1.7.0\nInstalling webrick 1.7.0\nFetching yard 0.9.28\nInstalling yard 0.9.28\nBundle complete! 18 Gemfile dependencies, 38 gems now installed.\nUse `bundle info [gemname]` to see where a bundled gem is installed.\nRemoving intermediate container 216a82da82a3\n ---> 18fd58def574\nStep 8/9 : COPY . .\n ---> a7a1c104e397\nStep 9/9 : CMD [\"rake\"]\n ---> Running in fc9ee67d7ffe\nRemoving intermediate container fc9ee67d7ffe\n ---> b552623fc4b4\nSuccessfully built b552623fc4b4\nSuccessfully tagged message_bus:latest\n","stderr":"","imageSize":1003130119},"repair":{"startTime":1672910970786,"endTime":1672910970850,"violations":[{"name":"tarSomethingRmTheSomething","position":{"start":4,"end":4,"columnStart":2,"columnEnd":46}}],"repairedDockerfile":"FROM ruby:2.7\n\nRUN cd /tmp && \\\n  wget --quiet https://bitbucket.org/ariya/phantomjs/downloads/phantomjs-2.1.1-linux-x86_64.tar.bz2 && \\\n  tar -xf phantomjs-2.1.1-linux-x86_64.tar.bz2 && \\\n  mv phantomjs-2.1.1-linux-x86_64/bin/phantomjs /usr/local/bin && \\\n  rm -rf phantomjs* && rm phantomjs-2.1.1-linux-x86_64.tar.bz2\n\nWORKDIR /usr/src/app\n\nRUN mkdir -p ./lib/message_bus\nCOPY lib/message_bus/version.rb ./lib/message_bus\nCOPY Gemfile *.gemspec ./\nRUN bundle install\n\nCOPY . .\n\nCMD [\"rake\"]\n"},"repairedBuild":{"startTime":1672910971085,"endTime":1672910979224,"error":{"code":1,"killed":false,"signal":null,"cmd":"docker build --no-cache --force-rm -t message_bus:latest -f /tmp/dinghy-analysis/discourse/message_bus/Dockerfile ."},"stdout":"Sending build context to Docker daemon   1.06MB\r\r\nStep 1/9 : FROM ruby:2.7\n ---> 35f703a364a3\nStep 2/9 : RUN cd /tmp &&   wget --quiet https://bitbucket.org/ariya/phantomjs/downloads/phantomjs-2.1.1-linux-x86_64.tar.bz2 &&   tar -xf phantomjs-2.1.1-linux-x86_64.tar.bz2 &&   mv phantomjs-2.1.1-linux-x86_64/bin/phantomjs /usr/local/bin &&   rm -rf phantomjs* && rm phantomjs-2.1.1-linux-x86_64.tar.bz2\n ---> Running in bed973fb0ce5\n\u001b[91mrm: cannot remove 'phantomjs-2.1.1-linux-x86_64.tar.bz2': No such file or directory\n\u001b[0mRemoving intermediate container bed973fb0ce5\n","stderr":"The command '/bin/sh -c cd /tmp &&   wget --quiet https://bitbucket.org/ariya/phantomjs/downloads/phantomjs-2.1.1-linux-x86_64.tar.bz2 &&   tar -xf phantomjs-2.1.1-linux-x86_64.tar.bz2 &&   mv phantomjs-2.1.1-linux-x86_64/bin/phantomjs /usr/local/bin &&   rm -rf phantomjs* && rm phantomjs-2.1.1-linux-x86_64.tar.bz2' returned a non-zero code: 1\n"}}