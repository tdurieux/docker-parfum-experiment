{"repository":"https://github.com/vx-labs/mqtt-broker","dockerfilePath":"Dockerfile","startTime":1672884190972,"endTime":1672884283781,"clone":{"startTime":1672884190972,"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/vx-labs/mqtt-broker'...\n","error":null,"endTime":1672884191900,"commit":"75429ac88f10b839f8e75ddda3a33c05d5dd2cc6"},"originalBuild":{"startTime":1672884191988,"endTime":1672884283263,"error":null,"stdout":"Sending build context to Docker daemon  1.086MB\r\r\nStep 1/14 : FROM golang:alpine as builder\n ---> cae57157ceaa\nStep 2/14 : ENV CGO_ENABLED=0\n ---> Running in 52fa5eff54d0\nRemoving intermediate container 52fa5eff54d0\n ---> eec77db6870a\nStep 3/14 : RUN mkdir -p $GOPATH/src/github.com/vx-labs\n ---> Running in 27d870a89b56\nRemoving intermediate container 27d870a89b56\n ---> aba74b85a563\nStep 4/14 : WORKDIR $GOPATH/src/github.com/vx-labs/mqtt-broker\n ---> Running in 5a10ad45b213\nRemoving intermediate container 5a10ad45b213\n ---> e717d1bb2a17\nStep 5/14 : COPY go.* ./\n ---> 8dde016b359d\nStep 6/14 : RUN go mod download\n ---> Running in ff7ffbbc8fff\nRemoving intermediate container ff7ffbbc8fff\n ---> c79436bfeab8\nStep 7/14 : COPY . ./\n ---> c80d5bf8ae38\nStep 8/14 : RUN go test ./...\n ---> Running in 338796a56952\n?   \tgithub.com/vx-labs/mqtt-broker/adapters/ap\t[no test files]\n?   \tgithub.com/vx-labs/mqtt-broker/adapters/ap/gossip\t[no test files]\n?   \tgithub.com/vx-labs/mqtt-broker/adapters/ap/pb\t[no test files]\n?   \tgithub.com/vx-labs/mqtt-broker/adapters/cp\t[no test files]\n?   \tgithub.com/vx-labs/mqtt-broker/adapters/cp/pb\t[no test files]\n?   \tgithub.com/vx-labs/mqtt-broker/adapters/cp/raft\t[no test files]\n?   \tgithub.com/vx-labs/mqtt-broker/adapters/discovery\t[no test files]\n?   \tgithub.com/vx-labs/mqtt-broker/adapters/discovery/consul\t[no test files]\n?   \tgithub.com/vx-labs/mqtt-broker/adapters/discovery/listeners\t[no test files]\n?   \tgithub.com/vx-labs/mqtt-broker/adapters/discovery/nomad\t[no test files]\n?   \tgithub.com/vx-labs/mqtt-broker/adapters/discovery/pb\t[no test files]\n?   \tgithub.com/vx-labs/mqtt-broker/adapters/discovery/static\t[no test files]\n?   \tgithub.com/vx-labs/mqtt-broker/adapters/identity\t[no test files]\n?   \tgithub.com/vx-labs/mqtt-broker/adapters/membership\t[no test files]\n?   \tgithub.com/vx-labs/mqtt-broker/adapters/membership/mesh\t[no test files]\n?   \tgithub.com/vx-labs/mqtt-broker/adapters/membership/pb\t[no test files]\n?   \tgithub.com/vx-labs/mqtt-broker/cli\t[no test files]\n?   \tgithub.com/vx-labs/mqtt-broker/cli/broker\t[no test files]\n?   \tgithub.com/vx-labs/mqtt-broker/cli/mqttctl\t[no test files]\nok  \tgithub.com/vx-labs/mqtt-broker/crdt\t0.004s\n?   \tgithub.com/vx-labs/mqtt-broker/events\t[no test files]\n?   \tgithub.com/vx-labs/mqtt-broker/events/cobra\t[no test files]\n?   \tgithub.com/vx-labs/mqtt-broker/format\t[no test files]\n?   \tgithub.com/vx-labs/mqtt-broker/network\t[no test files]\n?   \tgithub.com/vx-labs/mqtt-broker/path\t[no test files]\n?   \tgithub.com/vx-labs/mqtt-broker/services/api\t[no test files]\n?   \tgithub.com/vx-labs/mqtt-broker/services/auth\t[no test files]\n?   \tgithub.com/vx-labs/mqtt-broker/services/auth/cobra\t[no test files]\n?   \tgithub.com/vx-labs/mqtt-broker/services/auth/pb\t[no test files]\n?   \tgithub.com/vx-labs/mqtt-broker/services/auth/providers\t[no test files]\n?   \tgithub.com/vx-labs/mqtt-broker/services/auth/store\t[no test files]\n?   \tgithub.com/vx-labs/mqtt-broker/services/broker\t[no test files]\n?   \tgithub.com/vx-labs/mqtt-broker/services/broker/pb\t[no test files]\n?   \tgithub.com/vx-labs/mqtt-broker/services/endpoints\t[no test files]\n?   \tgithub.com/vx-labs/mqtt-broker/services/endpoints/cobra\t[no test files]\n?   \tgithub.com/vx-labs/mqtt-broker/services/kv\t[no test files]\n?   \tgithub.com/vx-labs/mqtt-broker/services/kv/cobra\t[no test files]\n?   \tgithub.com/vx-labs/mqtt-broker/services/kv/pb\t[no test files]\nok  \tgithub.com/vx-labs/mqtt-broker/services/kv/store\t0.002s [no tests to run]\n?   \tgithub.com/vx-labs/mqtt-broker/services/listener\t[no test files]\nok  \tgithub.com/vx-labs/mqtt-broker/services/messages\t0.009s\n?   \tgithub.com/vx-labs/mqtt-broker/services/messages/cobra\t[no test files]\n?   \tgithub.com/vx-labs/mqtt-broker/services/messages/pb\t[no test files]\n?   \tgithub.com/vx-labs/mqtt-broker/services/messages/store\t[no test files]\n?   \tgithub.com/vx-labs/mqtt-broker/services/queues\t[no test files]\n?   \tgithub.com/vx-labs/mqtt-broker/services/queues/cobra\t[no test files]\n?   \tgithub.com/vx-labs/mqtt-broker/services/queues/pb\t[no test files]\n?   \tgithub.com/vx-labs/mqtt-broker/services/queues/store\t[no test files]\n?   \tgithub.com/vx-labs/mqtt-broker/services/router\t[no test files]\nok  \tgithub.com/vx-labs/mqtt-broker/services/sessions\t0.005s\n?   \tgithub.com/vx-labs/mqtt-broker/services/sessions/cli\t[no test files]\n?   \tgithub.com/vx-labs/mqtt-broker/services/sessions/cobra\t[no test files]\n?   \tgithub.com/vx-labs/mqtt-broker/services/sessions/pb\t[no test files]\nok  \tgithub.com/vx-labs/mqtt-broker/services/subscriptions\t0.009s\n?   \tgithub.com/vx-labs/mqtt-broker/services/subscriptions/cli\t[no test files]\n?   \tgithub.com/vx-labs/mqtt-broker/services/subscriptions/cobra\t[no test files]\n?   \tgithub.com/vx-labs/mqtt-broker/services/subscriptions/pb\t[no test files]\n?   \tgithub.com/vx-labs/mqtt-broker/services/subscriptions/topic\t[no test files]\nok  \tgithub.com/vx-labs/mqtt-broker/services/subscriptions/tree\t0.003s\nok  \tgithub.com/vx-labs/mqtt-broker/services/topics\t0.005s\nok  \tgithub.com/vx-labs/mqtt-broker/services/topics/pb\t0.004s\nok  \tgithub.com/vx-labs/mqtt-broker/services/topics/tree\t0.003s\n?   \tgithub.com/vx-labs/mqtt-broker/stream\t[no test files]\n?   \tgithub.com/vx-labs/mqtt-broker/struct/queues/inflight\t[no test files]\n?   \tgithub.com/vx-labs/mqtt-broker/transport\t[no test files]\n?   \tgithub.com/vx-labs/mqtt-broker/vaultacme\t[no test files]\nRemoving intermediate container 338796a56952\n ---> 2aa245696ef1\nStep 9/14 : ARG BUILT_VERSION=\"snapshot\"\n ---> Running in ae7695dc822f\nRemoving intermediate container ae7695dc822f\n ---> 49c51721aba1\nStep 10/14 : RUN go build -buildmode=exe -ldflags=\"-s -w -X github.com/vx-labs/mqtt-broker/cli.BuiltVersion=${BUILT_VERSION}\"        -a -o /bin/broker ./cli/broker\n ---> Running in 0fa9c50ba34e\nRemoving intermediate container 0fa9c50ba34e\n ---> 836aba51574b\nStep 11/14 : FROM alpine as prod\n ---> 49176f190c7e\nStep 12/14 : ENTRYPOINT [\"/usr/bin/broker\"]\n ---> Running in 8070cbe660e8\nRemoving intermediate container 8070cbe660e8\n ---> f8af6fd8014a\nStep 13/14 : RUN apk -U add ca-certificates &&     rm -rf /var/cache/apk/*\n ---> Running in 3f6aaaa1ecc9\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/1) Installing ca-certificates (20220614-r3)\nExecuting busybox-1.35.0-r29.trigger\nExecuting ca-certificates-20220614-r3.trigger\nOK: 8 MiB in 16 packages\nRemoving intermediate container 3f6aaaa1ecc9\n ---> 8cb9952aabfd\nStep 14/14 : COPY --from=builder /bin/broker /usr/bin/broker\n ---> 0f7cba1d27b0\nSuccessfully built 0f7cba1d27b0\nSuccessfully tagged mqtt-broker:latest\n","stderr":"","imageSize":25157497},"repair":{"startTime":1672884283343,"endTime":1672884283411,"violations":[],"repairedDockerfile":"FROM golang:alpine as builder\nENV CGO_ENABLED=0\nRUN mkdir -p $GOPATH/src/github.com/vx-labs\nWORKDIR $GOPATH/src/github.com/vx-labs/mqtt-broker\nCOPY go.* ./\nRUN go mod download\nCOPY . ./\nRUN go test ./...\nARG BUILT_VERSION=\"snapshot\"\nRUN go build -buildmode=exe -ldflags=\"-s -w -X github.com/vx-labs/mqtt-broker/cli.BuiltVersion=${BUILT_VERSION}\" \\\n       -a -o /bin/broker ./cli/broker\n\nFROM alpine as prod\nENTRYPOINT [\"/usr/bin/broker\"]\nRUN apk -U add ca-certificates && \\\n    rm -rf /var/cache/apk/*\nCOPY --from=builder /bin/broker /usr/bin/broker\n"}}