{"repository":"https://github.com/zhycorp/gorou","dockerfilePath":"Dockerfile","startTime":1673024077472,"endTime":1673024336515,"clone":{"startTime":1673024077472,"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/zhycorp/gorou'...\n","error":null,"endTime":1673024078330,"commit":"e58bbc0935ef5b77e92f2198c50c5e6e268e117e"},"originalBuild":{"startTime":1673024078414,"endTime":1673024181151,"error":null,"stdout":"Sending build context to Docker daemon  500.2kB\r\r\nStep 1/22 : FROM node:17.4.0-alpine as build-stage\n17.4.0-alpine: Pulling from library/node\n59bf1c3509f3: Already exists\n66fcb0eb5bed: Pulling fs layer\n564b5778c99c: Pulling fs layer\n596dbe9943ae: Pulling fs layer\n596dbe9943ae: Download complete\n564b5778c99c: Verifying Checksum\n564b5778c99c: Download complete\n66fcb0eb5bed: Verifying Checksum\n66fcb0eb5bed: Download complete\n66fcb0eb5bed: Pull complete\n564b5778c99c: Pull complete\n596dbe9943ae: Pull complete\nDigest: sha256:6f8ae702a7609f6f18d81ac72998e5d6f5d0ace9a13b866318c76340c6d986b2\nStatus: Downloaded newer image for node:17.4.0-alpine\n ---> 025c3cbb849f\nStep 2/22 : LABEL name \"gorou (build-stage)\"\n ---> Running in 0d1b5329243e\nRemoving intermediate container 0d1b5329243e\n ---> 1095960bf42b\nStep 3/22 : LABEL maintainer \"Zen Shibata\"\n ---> Running in 4a28972bfe6a\nRemoving intermediate container 4a28972bfe6a\n ---> 9f180e6ed2ef\nStep 4/22 : WORKDIR /tmp/build\n ---> Running in 7b08e030d7c0\nRemoving intermediate container 7b08e030d7c0\n ---> 10806a85eb79\nStep 5/22 : RUN apk add --no-cache build-base git python3\n ---> Running in b947898c8752\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/community/x86_64/APKINDEX.tar.gz\n(1/35) Installing binutils (2.37-r3)\n(2/35) Installing libmagic (5.41-r0)\n(3/35) Installing file (5.41-r0)\n(4/35) Installing libgomp (10.3.1_git20211027-r0)\n(5/35) Installing libatomic (10.3.1_git20211027-r0)\n(6/35) Installing libgphobos (10.3.1_git20211027-r0)\n(7/35) Installing gmp (6.2.1-r1)\n(8/35) Installing isl22 (0.22-r0)\n(9/35) Installing mpfr4 (4.1.0-r0)\n(10/35) Installing mpc1 (1.2.1-r0)\n(11/35) Installing gcc (10.3.1_git20211027-r0)\n(12/35) Installing musl-dev (1.2.2-r7)\n(13/35) Installing libc-dev (0.7.2-r3)\n(14/35) Installing g++ (10.3.1_git20211027-r0)\n(15/35) Installing make (4.3-r0)\n(16/35) Installing fortify-headers (1.1-r1)\n(17/35) Installing patch (2.7.6-r7)\n(18/35) Installing build-base (0.5-r3)\n(19/35) Installing ca-certificates (20220614-r0)\n(20/35) Installing brotli-libs (1.0.9-r5)\n(21/35) Installing nghttp2-libs (1.46.0-r0)\n(22/35) Installing libcurl (7.80.0-r5)\n(23/35) Installing expat (2.5.0-r0)\n(24/35) Installing pcre2 (10.40-r0)\n(25/35) Installing git (2.34.5-r0)\n(26/35) Installing libbz2 (1.0.8-r1)\n(27/35) Installing libffi (3.4.2-r1)\n(28/35) Installing gdbm (1.22-r0)\n(29/35) Installing xz-libs (5.2.5-r1)\n(30/35) Installing mpdecimal (2.5.1-r1)\n(31/35) Installing ncurses-terminfo-base (6.3_p20211120-r1)\n(32/35) Installing ncurses-libs (6.3_p20211120-r1)\n(33/35) Installing readline (8.1.1-r0)\n(34/35) Installing sqlite-libs (3.36.0-r0)\n(35/35) Installing python3 (3.9.16-r0)\nExecuting busybox-1.34.1-r3.trigger\nExecuting ca-certificates-20220614-r0.trigger\nOK: 258 MiB in 51 packages\nRemoving intermediate container b947898c8752\n ---> 1fb6ad8aa49e\nStep 6/22 : COPY package.json .\n ---> 17bf65d78967\nStep 7/22 : COPY package-lock.json .\n ---> ecd299e7f681\nStep 8/22 : RUN npm install\n ---> Running in f5ed3364b36c\n\nadded 293 packages, and audited 294 packages in 22s\n\n45 packages are looking for funding\n  run `npm fund` for details\n\n4 vulnerabilities (2 moderate, 2 high)\n\nTo address all issues, run:\n  npm audit fix\n\nRun `npm audit` for details.\n\u001b[91mnpm notice \nnpm notice New major version of npm available! 8.3.1 -> 9.2.0\nnpm notice Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm notice Run `npm install -g npm@9.2.0` to update!\nnpm notice \n\u001b[0mRemoving intermediate container f5ed3364b36c\n ---> a5fb9092a144\nStep 9/22 : COPY . .\n ---> 83e5ac29bd72\nStep 10/22 : RUN npm run build\n ---> Running in 3caa647e542d\n\n> gorou@2.14.3 build\n> npm run lint && npm run compile\n\n\n> gorou@2.14.3 lint\n> eslint . --ext .ts\n\n\n> gorou@2.14.3 compile\n> tsc --build tsconfig.json\n\nRemoving intermediate container 3caa647e542d\n ---> 821511255fe6\nStep 11/22 : RUN npm prune --production\n ---> Running in a51e053647f5\n\nup to date, audited 179 packages in 793ms\n\n23 packages are looking for funding\n  run `npm fund` for details\n\n4 vulnerabilities (2 moderate, 2 high)\n\nTo address all issues, run:\n  npm audit fix\n\nRun `npm audit` for details.\nRemoving intermediate container a51e053647f5\n ---> 77fec560a0dd\nStep 12/22 : FROM node:17.4.0-alpine\n ---> 025c3cbb849f\nStep 13/22 : LABEL name \"gorou\"\n ---> Running in 0e370e21daa9\nRemoving intermediate container 0e370e21daa9\n ---> 9fe911e6759c\nStep 14/22 : LABEL maintainer \"Zen Shibata\"\n ---> Running in aaefd09d6171\nRemoving intermediate container aaefd09d6171\n ---> d2c6cac89523\nStep 15/22 : WORKDIR /app\n ---> Running in b4c4bfc8577b\nRemoving intermediate container b4c4bfc8577b\n ---> aaab321e5d09\nStep 16/22 : RUN apk add --no-cache tzdata\n ---> Running in 6947e62d0c66\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/community/x86_64/APKINDEX.tar.gz\n(1/1) Installing tzdata (2022f-r1)\nExecuting busybox-1.34.1-r3.trigger\nOK: 10 MiB in 17 packages\nRemoving intermediate container 6947e62d0c66\n ---> 28cb4a750386\nStep 17/22 : COPY --from=build-stage /tmp/build/package.json .\n ---> 1013ebbbb740\nStep 18/22 : COPY --from=build-stage /tmp/build/package-lock.json .\n ---> bce73f312026\nStep 19/22 : COPY --from=build-stage /tmp/build/node_modules ./node_modules\n ---> 4a5fd04ac2bb\nStep 20/22 : COPY --from=build-stage /tmp/build/dist .\n ---> d624f9a94977\nStep 21/22 : VOLUME [ \"/app/logs\" ]\n ---> Running in ea145e7e0989\nRemoving intermediate container ea145e7e0989\n ---> f8a00b64c099\nStep 22/22 : CMD [\"node\", \"index.js\"]\n ---> Running in a3ae4b258d61\nRemoving intermediate container a3ae4b258d61\n ---> 48c2c80d5d77\nSuccessfully built 48c2c80d5d77\nSuccessfully tagged gorou:latest\n","stderr":"","imageSize":216846729},"repair":{"startTime":1673024181213,"endTime":1673024181309,"violations":[{"name":"npmCacheCleanAfterInstall","position":{"start":16,"end":16,"columnStart":4,"columnEnd":15}}],"repairedDockerfile":"FROM node:17.4.0-alpine as build-stage\n\n# NOTE: Change these as you want\nLABEL name \"gorou (build-stage)\"\nLABEL maintainer \"Zen Shibata\"\n\nWORKDIR /tmp/build\n\n# Install build tools for node-gyp\nRUN apk add --no-cache build-base git python3\n\n# Copy package.json and package-lock.json\nCOPY package.json .\nCOPY package-lock.json .\n\n# Install node dependencies\nRUN npm install && npm cache clean --force;\n\n# Now copy project files\nCOPY . .\n\n# Build typescript project\nRUN npm run build\n\n# Prune dev dependencies\nRUN npm prune --production\n\n# Get ready for production\nFROM node:17.4.0-alpine\n\n# NOTE: Change these as you want\nLABEL name \"gorou\"\nLABEL maintainer \"Zen Shibata\"\n\nWORKDIR /app\n\n# Install dependencies\nRUN apk add --no-cache tzdata\n\n# Copy needed project files\nCOPY --from=build-stage /tmp/build/package.json .\nCOPY --from=build-stage /tmp/build/package-lock.json .\nCOPY --from=build-stage /tmp/build/node_modules ./node_modules\nCOPY --from=build-stage /tmp/build/dist .\n\nVOLUME [ \"/app/logs\" ]\n\nCMD [\"node\", \"index.js\"]"},"repairedBuild":{"startTime":1673024181649,"endTime":1673024336032,"error":null,"stdout":"Sending build context to Docker daemon  500.7kB\r\r\nStep 1/22 : FROM node:17.4.0-alpine as build-stage\n ---> 025c3cbb849f\nStep 2/22 : LABEL name \"gorou (build-stage)\"\n ---> Running in 541686f8b58f\nRemoving intermediate container 541686f8b58f\n ---> eef9ce36e9b0\nStep 3/22 : LABEL maintainer \"Zen Shibata\"\n ---> Running in b92fd0633041\nRemoving intermediate container b92fd0633041\n ---> edcc63a09f52\nStep 4/22 : WORKDIR /tmp/build\n ---> Running in 32835e91a8d5\nRemoving intermediate container 32835e91a8d5\n ---> e8baae77195b\nStep 5/22 : RUN apk add --no-cache build-base git python3\n ---> Running in 15fca4fedb90\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/community/x86_64/APKINDEX.tar.gz\n(1/35) Installing binutils (2.37-r3)\n(2/35) Installing libmagic (5.41-r0)\n(3/35) Installing file (5.41-r0)\n(4/35) Installing libgomp (10.3.1_git20211027-r0)\n(5/35) Installing libatomic (10.3.1_git20211027-r0)\n(6/35) Installing libgphobos (10.3.1_git20211027-r0)\n(7/35) Installing gmp (6.2.1-r1)\n(8/35) Installing isl22 (0.22-r0)\n(9/35) Installing mpfr4 (4.1.0-r0)\n(10/35) Installing mpc1 (1.2.1-r0)\n(11/35) Installing gcc (10.3.1_git20211027-r0)\n(12/35) Installing musl-dev (1.2.2-r7)\n(13/35) Installing libc-dev (0.7.2-r3)\n(14/35) Installing g++ (10.3.1_git20211027-r0)\n(15/35) Installing make (4.3-r0)\n(16/35) Installing fortify-headers (1.1-r1)\n(17/35) Installing patch (2.7.6-r7)\n(18/35) Installing build-base (0.5-r3)\n(19/35) Installing ca-certificates (20220614-r0)\n(20/35) Installing brotli-libs (1.0.9-r5)\n(21/35) Installing nghttp2-libs (1.46.0-r0)\n(22/35) Installing libcurl (7.80.0-r5)\n(23/35) Installing expat (2.5.0-r0)\n(24/35) Installing pcre2 (10.40-r0)\n(25/35) Installing git (2.34.5-r0)\n(26/35) Installing libbz2 (1.0.8-r1)\n(27/35) Installing libffi (3.4.2-r1)\n(28/35) Installing gdbm (1.22-r0)\n(29/35) Installing xz-libs (5.2.5-r1)\n(30/35) Installing mpdecimal (2.5.1-r1)\n(31/35) Installing ncurses-terminfo-base (6.3_p20211120-r1)\n(32/35) Installing ncurses-libs (6.3_p20211120-r1)\n(33/35) Installing readline (8.1.1-r0)\n(34/35) Installing sqlite-libs (3.36.0-r0)\n(35/35) Installing python3 (3.9.16-r0)\nExecuting busybox-1.34.1-r3.trigger\nExecuting ca-certificates-20220614-r0.trigger\nOK: 258 MiB in 51 packages\nRemoving intermediate container 15fca4fedb90\n ---> 04e607b1ce16\nStep 6/22 : COPY package.json .\n ---> 78bca6d30b57\nStep 7/22 : COPY package-lock.json .\n ---> 876977bcfff1\nStep 8/22 : RUN npm install && npm cache clean --force;\n ---> Running in 8903d0f9bf10\n\nadded 293 packages, and audited 294 packages in 20s\n\n45 packages are looking for funding\n  run `npm fund` for details\n\n4 vulnerabilities (2 moderate, 2 high)\n\nTo address all issues, run:\n  npm audit fix\n\nRun `npm audit` for details.\n\u001b[91mnpm notice \nnpm notice\u001b[0m\u001b[91m New major version of npm available! 8.3.1 -> 9.2.0\nnpm notice Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm notice Run `npm install -g npm@9.2.0` to update!\n\u001b[0m\u001b[91mnpm notice \n\u001b[0m\u001b[91mnpm\u001b[0m\u001b[91m WARN using --force\u001b[0m\u001b[91m Recommended protections disabled.\n\u001b[0mRemoving intermediate container 8903d0f9bf10\n ---> f2c790a4702d\nStep 9/22 : COPY . .\n ---> edd5c3a281fd\nStep 10/22 : RUN npm run build\n ---> Running in 53be63f1e28e\n\n> gorou@2.14.3 build\n> npm run lint && npm run compile\n\n\n> gorou@2.14.3 lint\n> eslint . --ext .ts\n\n\n> gorou@2.14.3 compile\n> tsc --build tsconfig.json\n\nRemoving intermediate container 53be63f1e28e\n ---> a8faa91b1366\nStep 11/22 : RUN npm prune --production\n ---> Running in e1a34612b40e\n\nup to date, audited 179 packages in 1s\n\n23 packages are looking for funding\n  run `npm fund` for details\n\n4 vulnerabilities (2 moderate, 2 high)\n\nTo address all issues, run:\n  npm audit fix\n\nRun `npm audit` for details.\nRemoving intermediate container e1a34612b40e\n ---> 0070b9576f2e\nStep 12/22 : FROM node:17.4.0-alpine\n ---> 025c3cbb849f\nStep 13/22 : LABEL name \"gorou\"\n ---> Running in 01bc5a257cf7\nRemoving intermediate container 01bc5a257cf7\n ---> 5d4156d5eaa5\nStep 14/22 : LABEL maintainer \"Zen Shibata\"\n ---> Running in 73252cf19ba9\nRemoving intermediate container 73252cf19ba9\n ---> 5735bddff225\nStep 15/22 : WORKDIR /app\n ---> Running in 81625d3d3165\nRemoving intermediate container 81625d3d3165\n ---> 06bc97382593\nStep 16/22 : RUN apk add --no-cache tzdata\n ---> Running in c5d5ba4174d8\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/community/x86_64/APKINDEX.tar.gz\n(1/1) Installing tzdata (2022f-r1)\nExecuting busybox-1.34.1-r3.trigger\nOK: 10 MiB in 17 packages\nRemoving intermediate container c5d5ba4174d8\n ---> 39756fa63386\nStep 17/22 : COPY --from=build-stage /tmp/build/package.json .\n ---> c158bf37d11d\nStep 18/22 : COPY --from=build-stage /tmp/build/package-lock.json .\n ---> 39c6290d4c03\nStep 19/22 : COPY --from=build-stage /tmp/build/node_modules ./node_modules\n ---> 4e2756c68254\nStep 20/22 : COPY --from=build-stage /tmp/build/dist .\n ---> 0701f3e5c9d3\nStep 21/22 : VOLUME [ \"/app/logs\" ]\n ---> Running in b1c1e2b0a916\nRemoving intermediate container b1c1e2b0a916\n ---> 2d038ce45f26\nStep 22/22 : CMD [\"node\", \"index.js\"]\n ---> Running in 4de1574e7d7b\nRemoving intermediate container 4de1574e7d7b\n ---> 738820d662db\nSuccessfully built 738820d662db\nSuccessfully tagged gorou:latest\n","stderr":"","imageSize":216846729}}