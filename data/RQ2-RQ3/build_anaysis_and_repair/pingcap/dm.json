{"repository":"https://github.com/pingcap/dm","dockerfilePath":"Dockerfile","startTime":1672085328654,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/pingcap/dm'...\n","error":null,"commit":"da80bda17dce4d44c2bd830b58d822dac544b08b"},"originalBuild":{"startTimestamp":1672085331287,"endTimestamp":1672085678274,"error":null,"stdout":"Sending build context to Docker daemon  21.32MB\r\r\nStep 1/19 : FROM golang:1.16-alpine as builder\n1.16-alpine: Pulling from library/golang\n59bf1c3509f3: Already exists\n666ba61612fd: Pulling fs layer\n8ed8ca486205: Pulling fs layer\nca4bf87e467a: Pulling fs layer\n0435e0963794: Pulling fs layer\n0435e0963794: Waiting\n8ed8ca486205: Verifying Checksum\n8ed8ca486205: Download complete\n666ba61612fd: Download complete\n666ba61612fd: Pull complete\n8ed8ca486205: Pull complete\n0435e0963794: Verifying Checksum\n0435e0963794: Download complete\nca4bf87e467a: Verifying Checksum\nca4bf87e467a: Download complete\nca4bf87e467a: Pull complete\n0435e0963794: Pull complete\nDigest: sha256:5616dca835fa90ef13a843824ba58394dad356b7d56198fb7c93cbe76d7d67fe\nStatus: Downloaded newer image for golang:1.16-alpine\n ---> 7642119cd161\nStep 2/19 : MAINTAINER siddontang\n ---> Running in dbc008d7712b\nRemoving intermediate container dbc008d7712b\n ---> 59b49d91dc0e\nStep 3/19 : RUN apk add --no-cache git make\n ---> Running in 04e2c25b4a06\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/community/x86_64/APKINDEX.tar.gz\n(1/7) Installing brotli-libs (1.0.9-r5)\n(2/7) Installing nghttp2-libs (1.46.0-r0)\n(3/7) Installing libcurl (7.80.0-r5)\n(4/7) Installing expat (2.5.0-r0)\n(5/7) Installing pcre2 (10.40-r0)\n(6/7) Installing git (2.34.5-r0)\n(7/7) Installing make (4.3-r0)\nExecuting busybox-1.34.1-r3.trigger\nOK: 19 MiB in 22 packages\nRemoving intermediate container 04e2c25b4a06\n ---> 5a11b1026df6\nStep 4/19 : RUN mkdir -p /go/src/github.com/pingcap/dm\n ---> Running in fcf629aea326\nRemoving intermediate container fcf629aea326\n ---> c6ee1fb4d2b4\nStep 5/19 : WORKDIR /go/src/github.com/pingcap/dm\n ---> Running in 0dcdf7e26e5c\nRemoving intermediate container 0dcdf7e26e5c\n ---> 796da3813ae6\nStep 6/19 : COPY go.mod .\n ---> c6042ac553b0\nStep 7/19 : COPY go.sum .\n ---> 0130dd83edc2\nStep 8/19 : RUN GO111MODULE=on go mod download\n ---> Running in baf4e6345bf7\nRemoving intermediate container baf4e6345bf7\n ---> 8b6b1c689e5e\nStep 9/19 : COPY . .\n ---> cb33ee403f4d\nStep 10/19 : RUN apk update && apk add bash\n ---> Running in 755d8c450390\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/community/x86_64/APKINDEX.tar.gz\nv3.15.6-229-g7974f8e7c3 [https://dl-cdn.alpinelinux.org/alpine/v3.15/main]\nv3.15.6-228-g9181cbcdab [https://dl-cdn.alpinelinux.org/alpine/v3.15/community]\nOK: 15865 distinct packages available\n(1/4) Installing ncurses-terminfo-base (6.3_p20211120-r1)\n(2/4) Installing ncurses-libs (6.3_p20211120-r1)\n(3/4) Installing readline (8.1.1-r0)\n(4/4) Installing bash (5.1.16-r0)\nExecuting bash-5.1.16-r0.post-install\nExecuting busybox-1.34.1-r3.trigger\nOK: 22 MiB in 26 packages\nRemoving intermediate container 755d8c450390\n ---> ad9cde3393a3\nStep 11/19 : RUN make dm-worker dm-master dmctl\n ---> Running in faf0b690ddb0\n\u001b[91mfatal: No names found, cannot describe anything.\n\u001b[0mCGO_ENABLED=0 GO111MODULE=on go build -ldflags '-X \"github.com/pingcap/dm/pkg/utils.ReleaseVersion=\" -X \"github.com/pingcap/dm/pkg/utils.BuildTS=2022-12-26 20:12:00\" -X \"github.com/pingcap/dm/pkg/utils.GitHash=da80bda17dce4d44c2bd830b58d822dac544b08b\" -X \"github.com/pingcap/dm/pkg/utils.GitBranch=master\" -X \"github.com/pingcap/dm/pkg/utils.GoVersion=go version go1.16.15 linux/amd64\"' -o bin/dm-worker ./cmd/dm-worker\n\u001b[91mfatal: No names found, cannot describe anything.\n\u001b[0mCGO_ENABLED=0 GO111MODULE=on go build -ldflags '-X \"github.com/pingcap/dm/pkg/utils.ReleaseVersion=\" -X \"github.com/pingcap/dm/pkg/utils.BuildTS=2022-12-26 20:12:42\" -X \"github.com/pingcap/dm/pkg/utils.GitHash=da80bda17dce4d44c2bd830b58d822dac544b08b\" -X \"github.com/pingcap/dm/pkg/utils.GitBranch=master\" -X \"github.com/pingcap/dm/pkg/utils.GoVersion=go version go1.16.15 linux/amd64\"' -o bin/dm-master ./cmd/dm-master\n\u001b[91mfatal: No names found, cannot describe anything.\n\u001b[0mCGO_ENABLED=0 GO111MODULE=on go build -ldflags '-X \"github.com/pingcap/dm/pkg/utils.ReleaseVersion=\" -X \"github.com/pingcap/dm/pkg/utils.BuildTS=2022-12-26 20:13:03\" -X \"github.com/pingcap/dm/pkg/utils.GitHash=da80bda17dce4d44c2bd830b58d822dac544b08b\" -X \"github.com/pingcap/dm/pkg/utils.GitBranch=master\" -X \"github.com/pingcap/dm/pkg/utils.GoVersion=go version go1.16.15 linux/amd64\"' -o bin/dmctl ./cmd/dm-ctl\nRemoving intermediate container faf0b690ddb0\n ---> 42266432c837\nStep 12/19 : FROM alpine:3.10\n3.10: Pulling from library/alpine\n396c31837116: Pulling fs layer\n396c31837116: Verifying Checksum\n396c31837116: Download complete\n396c31837116: Pull complete\nDigest: sha256:451eee8bedcb2f029756dc3e9d73bab0e7943c1ac55cff3a4861c52a0fdd3e98\nStatus: Downloaded newer image for alpine:3.10\n ---> e7b300aee9f9\nStep 13/19 : COPY --from=builder /go/src/github.com/pingcap/dm/bin/dm-worker /dm-worker\n ---> 44db39510dc6\nStep 14/19 : COPY --from=builder /go/src/github.com/pingcap/dm/bin/dm-master /dm-master\n ---> d3e3467f38a6\nStep 15/19 : COPY --from=builder /go/src/github.com/pingcap/dm/bin/dmctl /dmctl\n ---> 7bbd13dd7245\nStep 16/19 : COPY --from=builder /go/src/github.com/pingcap/dm/bin/dm-worker /bin/dm-worker\n ---> 0e50361e030a\nStep 17/19 : COPY --from=builder /go/src/github.com/pingcap/dm/bin/dm-master /bin/dm-master\n ---> 501b3dd39f71\nStep 18/19 : COPY --from=builder /go/src/github.com/pingcap/dm/bin/dmctl /bin/dmctl\n ---> 57be970c73b5\nStep 19/19 : EXPOSE 8261 8262 8291\n ---> Running in 2dbbc2d7a61e\nRemoving intermediate container 2dbbc2d7a61e\n ---> 8908cc71004b\nSuccessfully built 8908cc71004b\nSuccessfully tagged dm:latest\n","stderr":"","imageSize":585457958},"repair":{"violations":[{"name":"apkAddUseNoCache","position":{"start":16,"end":16,"columnStart":18,"columnEnd":30}}],"repairedDockerfile":"FROM golang:1.16-alpine as builder\nMAINTAINER siddontang\n\nRUN apk add --no-cache git make\n\nRUN mkdir -p /go/src/github.com/pingcap/dm\nWORKDIR /go/src/github.com/pingcap/dm\n\n# Cache dependencies\nCOPY go.mod .\nCOPY go.sum .\n\nRUN GO111MODULE=on go mod download\n\nCOPY . .\n\nRUN apk update && apk add --no-cache bash\n\nRUN make dm-worker dm-master dmctl\n\nFROM alpine:3.10\n\n# keep compatibility\nCOPY --from=builder /go/src/github.com/pingcap/dm/bin/dm-worker /dm-worker\nCOPY --from=builder /go/src/github.com/pingcap/dm/bin/dm-master /dm-master\nCOPY --from=builder /go/src/github.com/pingcap/dm/bin/dmctl /dmctl\n\nCOPY --from=builder /go/src/github.com/pingcap/dm/bin/dm-worker /bin/dm-worker\nCOPY --from=builder /go/src/github.com/pingcap/dm/bin/dm-master /bin/dm-master\nCOPY --from=builder /go/src/github.com/pingcap/dm/bin/dmctl /bin/dmctl\n\nEXPOSE 8261 8262 8291\n\n"},"repairedBuild":{"startTimestamp":1672085678721,"endTimestamp":1672085896643,"error":null,"stdout":"Sending build context to Docker daemon  21.32MB\r\r\nStep 1/19 : FROM golang:1.16-alpine as builder\n ---> 7642119cd161\nStep 2/19 : MAINTAINER siddontang\n ---> Running in 19a53e7aef6b\nRemoving intermediate container 19a53e7aef6b\n ---> e8b93bdf7dc4\nStep 3/19 : RUN apk add --no-cache git make\n ---> Running in d1260e0d8810\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/community/x86_64/APKINDEX.tar.gz\n(1/7) Installing brotli-libs (1.0.9-r5)\n(2/7) Installing nghttp2-libs (1.46.0-r0)\n(3/7) Installing libcurl (7.80.0-r5)\n(4/7) Installing expat (2.5.0-r0)\n(5/7) Installing pcre2 (10.40-r0)\n(6/7) Installing git (2.34.5-r0)\n(7/7) Installing make (4.3-r0)\nExecuting busybox-1.34.1-r3.trigger\nOK: 19 MiB in 22 packages\nRemoving intermediate container d1260e0d8810\n ---> dccda44bf4c2\nStep 4/19 : RUN mkdir -p /go/src/github.com/pingcap/dm\n ---> Running in b244c16346bf\nRemoving intermediate container b244c16346bf\n ---> cb5c84e669e1\nStep 5/19 : WORKDIR /go/src/github.com/pingcap/dm\n ---> Running in 31fec2c9977c\nRemoving intermediate container 31fec2c9977c\n ---> 741bd13bdd6e\nStep 6/19 : COPY go.mod .\n ---> 8163c5d90dd0\nStep 7/19 : COPY go.sum .\n ---> f33c32252a6a\nStep 8/19 : RUN GO111MODULE=on go mod download\n ---> Running in 45443225b2b8\nRemoving intermediate container 45443225b2b8\n ---> ef00b6d5d61e\nStep 9/19 : COPY . .\n ---> e22670003529\nStep 10/19 : RUN apk update && apk add --no-cache bash\n ---> Running in c6b40ab66234\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/community/x86_64/APKINDEX.tar.gz\nv3.15.6-229-g7974f8e7c3 [https://dl-cdn.alpinelinux.org/alpine/v3.15/main]\nv3.15.6-228-g9181cbcdab [https://dl-cdn.alpinelinux.org/alpine/v3.15/community]\nOK: 15865 distinct packages available\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.15/community/x86_64/APKINDEX.tar.gz\n(1/4) Installing ncurses-terminfo-base (6.3_p20211120-r1)\n(2/4) Installing ncurses-libs (6.3_p20211120-r1)\n(3/4) Installing readline (8.1.1-r0)\n(4/4) Installing bash (5.1.16-r0)\nExecuting bash-5.1.16-r0.post-install\nExecuting busybox-1.34.1-r3.trigger\nOK: 22 MiB in 26 packages\nRemoving intermediate container c6b40ab66234\n ---> 17f6bc8fd76b\nStep 11/19 : RUN make dm-worker dm-master dmctl\n ---> Running in 9183852d2e8e\n\u001b[91mfatal: No names found, cannot describe anything.\n\u001b[0mCGO_ENABLED=0 GO111MODULE=on go build -ldflags '-X \"github.com/pingcap/dm/pkg/utils.ReleaseVersion=\" -X \"github.com/pingcap/dm/pkg/utils.BuildTS=2022-12-26 20:16:33\" -X \"github.com/pingcap/dm/pkg/utils.GitHash=da80bda17dce4d44c2bd830b58d822dac544b08b\" -X \"github.com/pingcap/dm/pkg/utils.GitBranch=master\" -X \"github.com/pingcap/dm/pkg/utils.GoVersion=go version go1.16.15 linux/amd64\"' -o bin/dm-worker ./cmd/dm-worker\n\u001b[91mfatal: No names found, cannot describe anything.\n\u001b[0mCGO_ENABLED=0 GO111MODULE=on go build -ldflags '-X \"github.com/pingcap/dm/pkg/utils.ReleaseVersion=\" -X \"github.com/pingcap/dm/pkg/utils.BuildTS=2022-12-26 20:17:13\" -X \"github.com/pingcap/dm/pkg/utils.GitHash=da80bda17dce4d44c2bd830b58d822dac544b08b\" -X \"github.com/pingcap/dm/pkg/utils.GitBranch=master\" -X \"github.com/pingcap/dm/pkg/utils.GoVersion=go version go1.16.15 linux/amd64\"' -o bin/dm-master ./cmd/dm-master\n\u001b[91mfatal: No names found, cannot describe anything.\n\u001b[0mCGO_ENABLED=0 GO111MODULE=on go build -ldflags '-X \"github.com/pingcap/dm/pkg/utils.ReleaseVersion=\" -X \"github.com/pingcap/dm/pkg/utils.BuildTS=2022-12-26 20:17:25\" -X \"github.com/pingcap/dm/pkg/utils.GitHash=da80bda17dce4d44c2bd830b58d822dac544b08b\" -X \"github.com/pingcap/dm/pkg/utils.GitBranch=master\" -X \"github.com/pingcap/dm/pkg/utils.GoVersion=go version go1.16.15 linux/amd64\"' -o bin/dmctl ./cmd/dm-ctl\nRemoving intermediate container 9183852d2e8e\n ---> c7ff53c76521\nStep 12/19 : FROM alpine:3.10\n ---> e7b300aee9f9\nStep 13/19 : COPY --from=builder /go/src/github.com/pingcap/dm/bin/dm-worker /dm-worker\n ---> df63e4edcb6d\nStep 14/19 : COPY --from=builder /go/src/github.com/pingcap/dm/bin/dm-master /dm-master\n ---> 77933c9d8675\nStep 15/19 : COPY --from=builder /go/src/github.com/pingcap/dm/bin/dmctl /dmctl\n ---> 58982ae1616a\nStep 16/19 : COPY --from=builder /go/src/github.com/pingcap/dm/bin/dm-worker /bin/dm-worker\n ---> d4aa044c2afe\nStep 17/19 : COPY --from=builder /go/src/github.com/pingcap/dm/bin/dm-master /bin/dm-master\n ---> 5e7842fd8764\nStep 18/19 : COPY --from=builder /go/src/github.com/pingcap/dm/bin/dmctl /bin/dmctl\n ---> f2138ee7c52d\nStep 19/19 : EXPOSE 8261 8262 8291\n ---> Running in 2ce644294367\nRemoving intermediate container 2ce644294367\n ---> a520a4630890\nSuccessfully built a520a4630890\nSuccessfully tagged dm:latest\n","stderr":"","imageSize":585457958},"endTime":1672085897072}