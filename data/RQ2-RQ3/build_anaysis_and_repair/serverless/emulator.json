{"repository":"https://github.com/serverless/emulator","dockerfilePath":"Dockerfile","startTime":1672294125202,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/serverless/emulator'...\n","error":null,"commit":"c1de8d8893b6cb173bc215a22e38dcadbd459fbf"},"originalBuild":{"startTimestamp":1672294126485,"endTimestamp":1672294186229,"error":null,"stdout":"Sending build context to Docker daemon  478.7kB\r\r\nStep 1/6 : FROM node:latest\n ---> 548714e444f4\nStep 2/6 : WORKDIR /app\n ---> Running in bb493c356ea9\nRemoving intermediate container bb493c356ea9\n ---> ae47d0f1abd6\nStep 3/6 : COPY . /app\n ---> c99d09f80052\nStep 4/6 : RUN npm install &&     scripts/sync-storage &&     npm run build\n ---> Running in 7c8c45a63e7e\n\u001b[91mnpm WARN ancient lockfile \nnpm \u001b[0m\u001b[91mWARN ancient lockfile The package-lock.json file was created with an old version of npm,\nnpm WARN \u001b[0m\u001b[91mancient lockfile so supplemental metadata must be fetched from the registry.\nnpm WARN ancient lockfile\u001b[0m\u001b[91m \nnpm WARN ancient lockfile This is a one-time fix-up, please be patient...\nnpm WARN ancient lockfile \n\u001b[0m\u001b[91mnpm WARN deprecated is-buffer@1.1.5: This version of 'is-buffer' is out-of-date. You must update to v1.1.6 or newer\n\u001b[0m\u001b[91mnpm WARN deprecated ini@1.3.4: Please update to ini >=1.3.6 to avoid a prototype pollution issue\n\u001b[0m\u001b[91mnpm WARN deprecated sane@1.6.0: some dependency vulnerabilities fixed, support for node < 10 dropped, and newer ECMAScript syntax/features added\n\u001b[0m\u001b[91mnpm WARN deprecated uuid@3.1.0: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.\n\u001b[0m\u001b[91mnpm WARN deprecated sntp@1.0.9: This module moved to @hapi/sntp. Please make sure to switch over as this distribution is no longer supported and may contain bugs and critical security issues.\n\u001b[0m\u001b[91mnpm WARN deprecated cryptiles@2.0.5: This version has been deprecated in accordance with the hapi support policy (hapi.im/support). Please upgrade to the latest version to get the best features, bug fixes, and security patches. If you are unable to upgrade at this time, paid support is available for older versions (hapi.im/commercial).\n\u001b[0m\u001b[91mnpm WARN deprecated circular-json@0.3.3: CircularJSON is in maintenance only, flatted is its successor.\n\u001b[0m\u001b[91mnpm WARN deprecated mkdirp@0.5.1: Legacy versions of mkdirp are no longer supported. Please update to mkdirp 1.x. (Note that the API surface has changed to use Promises in 1.x.)\n\u001b[0m\u001b[91mnpm WARN deprecated chokidar@1.7.0: Chokidar 2 will break on node v14+. Upgrade to chokidar 3 with 15x less dependencies.\n\u001b[0m\u001b[91mnpm WARN deprecated request@2.81.0: request has been deprecated, see https://github.com/request/request/issues/3142\n\u001b[0m\u001b[91mnpm WARN deprecated hoek@2.16.3: This version has been deprecated in accordance with the hapi support policy (hapi.im/support). Please upgrade to the latest version to get the best features, bug fixes, and security patches. If you are unable to upgrade at this time, paid support is available for older versions (hapi.im/commercial).\n\u001b[0m\u001b[91mnpm WARN deprecated har-validator@4.2.1: this library is no longer supported\n\u001b[0m\u001b[91mnpm WARN deprecated boom@2.10.1: This version has been deprecated in accordance with the hapi support policy (hapi.im/support). Please upgrade to the latest version to get the best features, bug fixes, and security patches. If you are unable to upgrade at this time, paid support is available for older versions (hapi.im/commercial).\n\u001b[0m\u001b[91mnpm WARN deprecated browserslist@2.3.3: Browserslist 2 could fail on reading Browserslist >3.0 config used in other tools.\n\u001b[0m\u001b[91mnpm WARN deprecated hawk@3.1.3: This module moved to @hapi/hawk. Please make sure to switch over as this distribution is no longer supported and may contain bugs and critical security issues.\n\u001b[0m\u001b[91mnpm WARN deprecated uuid@2.0.3: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.\n\u001b[0m\u001b[91mnpm WARN deprecated buffer@3.6.0: This version of 'buffer' is out-of-date. You must update to v3.6.2 or newer\n\u001b[0m\u001b[91mnpm WARN deprecated core-js@2.5.0: core-js@<3.23.3 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Some versions have web compatibility issues. Please, upgrade your dependencies to the actual version of core-js.\n\u001b[0m\nadded 663 packages, and audited 664 packages in 14s\n\n84 vulnerabilities (13 low, 27 moderate, 34 high, 10 critical)\n\nTo address issues that do not require attention, run:\n  npm audit fix\n\nTo address all issues possible (including breaking changes), run:\n  npm audit fix --force\n\nSome issues need review, and may require choosing\na different dependency.\n\nRun `npm audit` for details.\n\n> @serverless/emulator@0.1.18 build\n> rm -rf dist && mkdir -p dist && babel src -d dist --source-maps\n\nsrc/core-middlewares/0-defaults.js -> dist/core-middlewares/0-defaults.js\nsrc/core-middlewares/1-aws-transform.js -> dist/core-middlewares/1-aws-transform.js\nsrc/core-middlewares/1-google-transform.js -> dist/core-middlewares/1-google-transform.js\nsrc/core-middlewares/z-scaffold.js -> dist/core-middlewares/z-scaffold.js\nsrc/index.js -> dist/index.js\nsrc/main.js -> dist/main.js\nsrc/runtimes/node.js -> dist/runtimes/node.js\nsrc/utils/fs/copyDirContentsSync.js -> dist/utils/fs/copyDirContentsSync.js\nsrc/utils/fs/fileExists.js -> dist/utils/fs/fileExists.js\nsrc/utils/fs/fse.js -> dist/utils/fs/fse.js\nsrc/utils/fs/parse.js -> dist/utils/fs/parse.js\nsrc/utils/fs/readFile.js -> dist/utils/fs/readFile.js\nsrc/utils/fs/readFileIfExists.js -> dist/utils/fs/readFileIfExists.js\nsrc/utils/fs/removeFile.js -> dist/utils/fs/removeFile.js\nsrc/utils/fs/walkDirSync.js -> dist/utils/fs/walkDirSync.js\nsrc/utils/fs/writeFile.js -> dist/utils/fs/writeFile.js\nsrc/utils/generateContainer.js -> dist/utils/generateContainer.js\nsrc/utils/getContainerKey.js -> dist/utils/getContainerKey.js\nsrc/utils/getFreePort.js -> dist/utils/getFreePort.js\nsrc/utils/getFunctionCodeDirectoryPath.js -> dist/utils/getFunctionCodeDirectoryPath.js\nsrc/utils/getFunctionConfigFilePath.js -> dist/utils/getFunctionConfigFilePath.js\nsrc/utils/getFunctionDirectoryPath.js -> dist/utils/getFunctionDirectoryPath.js\nsrc/utils/getFunctionsDirectoryPath.js -> dist/utils/getFunctionsDirectoryPath.js\nsrc/utils/getRuntimeExecName.js -> dist/utils/getRuntimeExecName.js\nsrc/utils/getRuntimeFileExtension.js -> dist/utils/getRuntimeFileExtension.js\nsrc/utils/getRuntimeScriptName.js -> dist/utils/getRuntimeScriptName.js\nsrc/utils/invokeFunction.js -> dist/utils/invokeFunction.js\nsrc/utils/loadCoreMiddlewares.js -> dist/utils/loadCoreMiddlewares.js\nsrc/utils/middlewareHelpers.js -> dist/utils/middlewareHelpers.js\nsrc/utils/readFunctionConfigFile.js -> dist/utils/readFunctionConfigFile.js\nsrc/utils/runMiddlewares.js -> dist/utils/runMiddlewares.js\nsrc/utils/unzipFunctionCode.js -> dist/utils/unzipFunctionCode.js\nsrc/utils/validateFunctionId.js -> dist/utils/validateFunctionId.js\nsrc/utils/validateRuntime.js -> dist/utils/validateRuntime.js\nsrc/utils/validateZipFilePath.js -> dist/utils/validateZipFilePath.js\nsrc/utils/writeFunctionConfigFile.js -> dist/utils/writeFunctionConfigFile.js\nRemoving intermediate container 7c8c45a63e7e\n ---> e4542ddd19c0\nStep 5/6 : EXPOSE 4002\n ---> Running in 080ed03c7755\nRemoving intermediate container 080ed03c7755\n ---> 443fe8b1e3ec\nStep 6/6 : CMD [\"npm\", \"start\"]\n ---> Running in 5dc8ce0524fd\nRemoving intermediate container 5dc8ce0524fd\n ---> bac4c8d9f135\nSuccessfully built bac4c8d9f135\nSuccessfully tagged emulator:latest\n","stderr":"","imageSize":1087064653},"repair":{"violations":[{"name":"npmCacheCleanAfterInstall","position":{"start":5,"end":5,"columnStart":4,"columnEnd":15}}],"repairedDockerfile":"FROM node:latest\n\nWORKDIR /app\nCOPY . /app\n\nRUN npm install && \\\n    scripts/sync-storage && \\\n    npm run build\n\nEXPOSE 4002\n\nCMD [\"npm\", \"start\"]\n"},"repairedBuild":{"startTimestamp":1672294186871,"endTimestamp":1672294210747,"error":null,"stdout":"Sending build context to Docker daemon  478.7kB\r\r\nStep 1/6 : FROM node:latest\n ---> 548714e444f4\nStep 2/6 : WORKDIR /app\n ---> Running in a24398db8385\nRemoving intermediate container a24398db8385\n ---> 7e5264ef018e\nStep 3/6 : COPY . /app\n ---> 49d3449136a0\nStep 4/6 : RUN npm install &&     scripts/sync-storage &&     npm run build\n ---> Running in bd8d39ead2e6\n\u001b[91mnpm WARN ancient lockfile \nnpm WARN ancient lockfile The package-lock.json file was created with an old version of npm,\nnpm WARN ancient lockfile so supplemental metadata must be fetched from the registry.\nnpm WARN ancient lockfile\u001b[0m\u001b[91m \nnpm WARN ancient lockfile This is a one-time fix-up, please be patient...\nnpm WARN ancient lockfile\u001b[0m\u001b[91m \n\u001b[0m\u001b[91mnpm WARN deprecated sane@1.6.0: some dependency vulnerabilities fixed, support for node < 10 dropped, and newer ECMAScript syntax/features added\n\u001b[0m\u001b[91mnpm WARN deprecated uuid@3.1.0: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.\n\u001b[0m\u001b[91mnpm WARN deprecated ini@1.3.4: Please update to ini >=1.3.6 to avoid a prototype pollution issue\n\u001b[0m\u001b[91mnpm WARN deprecated sntp@1.0.9: This module moved to @hapi/sntp. Please make sure to switch over as this distribution is no longer supported and may contain bugs and critical security issues.\n\u001b[0m\u001b[91mnpm WARN deprecated is-buffer@1.1.5: This version of 'is-buffer' is out-of-date. You must update to v1.1.6 or newer\n\u001b[0m\u001b[91mnpm WARN deprecated cryptiles@2.0.5: This version has been deprecated in accordance with the hapi support policy (hapi.im/support). Please upgrade to the latest version to get the best features, bug fixes, and security patches. If you are unable to upgrade at this time, paid support is available for older versions (hapi.im/commercial).\n\u001b[0m\u001b[91mnpm WARN deprecated browserslist@2.3.3: Browserslist 2 could fail on reading Browserslist >3.0 config used in other tools.\n\u001b[0m\u001b[91mnpm WARN deprecated request@2.81.0: request has been deprecated, see https://github.com/request/request/issues/3142\n\u001b[0m\u001b[91mnpm WARN deprecated mkdirp@0.5.1: Legacy versions of mkdirp are no longer supported. Please update to mkdirp 1.x. (Note that the API surface has changed to use Promises in 1.x.)\n\u001b[0m\u001b[91mnpm WARN deprecated circular-json@0.3.3: CircularJSON is in maintenance only, flatted is its successor.\n\u001b[0m\u001b[91mnpm WARN deprecated chokidar@1.7.0: Chokidar 2 will break on node v14+. Upgrade to chokidar 3 with 15x less dependencies.\n\u001b[0m\u001b[91mnpm WARN deprecated boom@2.10.1: This version has been deprecated in accordance with the hapi support policy (hapi.im/support). Please upgrade to the latest version to get the best features, bug fixes, and security patches. If you are unable to upgrade at this time, paid support is available for older versions (hapi.im/commercial).\n\u001b[0m\u001b[91mnpm WARN deprecated hoek@2.16.3: This version has been deprecated in accordance with the hapi support policy (hapi.im/support). Please upgrade to the latest version to get the best features, bug fixes, and security patches. If you are unable to upgrade at this time, paid support is available for older versions (hapi.im/commercial).\n\u001b[0m\u001b[91mnpm WARN deprecated har-validator@4.2.1: this library is no longer supported\n\u001b[0m\u001b[91mnpm WARN deprecated uuid@2.0.3: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.\n\u001b[0m\u001b[91mnpm WARN deprecated hawk@3.1.3: This module moved to @hapi/hawk. Please make sure to switch over as this distribution is no longer supported and may contain bugs and critical security issues.\n\u001b[0m\u001b[91mnpm WARN deprecated buffer@3.6.0: This version of 'buffer' is out-of-date. You must update to v3.6.2 or newer\n\u001b[0m\u001b[91mnpm WARN deprecated core-js@2.5.0: core-js@<3.23.3 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Some versions have web compatibility issues. Please, upgrade your dependencies to the actual version of core-js.\n\u001b[0m\nadded 663 packages, and audited 664 packages in 11s\n\n84 vulnerabilities (13 low, 27 moderate, 34 high, 10 critical)\n\nTo address issues that do not require attention, run:\n  npm audit fix\n\nTo address all issues possible (including breaking changes), run:\n  npm audit fix --force\n\nSome issues need review, and may require choosing\na different dependency.\n\nRun `npm audit` for details.\n\n> @serverless/emulator@0.1.18 build\n> rm -rf dist && mkdir -p dist && babel src -d dist --source-maps\n\nsrc/core-middlewares/0-defaults.js -> dist/core-middlewares/0-defaults.js\nsrc/core-middlewares/1-aws-transform.js -> dist/core-middlewares/1-aws-transform.js\nsrc/core-middlewares/1-google-transform.js -> dist/core-middlewares/1-google-transform.js\nsrc/core-middlewares/z-scaffold.js -> dist/core-middlewares/z-scaffold.js\nsrc/index.js -> dist/index.js\nsrc/main.js -> dist/main.js\nsrc/runtimes/node.js -> dist/runtimes/node.js\nsrc/utils/fs/copyDirContentsSync.js -> dist/utils/fs/copyDirContentsSync.js\nsrc/utils/fs/fileExists.js -> dist/utils/fs/fileExists.js\nsrc/utils/fs/fse.js -> dist/utils/fs/fse.js\nsrc/utils/fs/parse.js -> dist/utils/fs/parse.js\nsrc/utils/fs/readFile.js -> dist/utils/fs/readFile.js\nsrc/utils/fs/readFileIfExists.js -> dist/utils/fs/readFileIfExists.js\nsrc/utils/fs/removeFile.js -> dist/utils/fs/removeFile.js\nsrc/utils/fs/walkDirSync.js -> dist/utils/fs/walkDirSync.js\nsrc/utils/fs/writeFile.js -> dist/utils/fs/writeFile.js\nsrc/utils/generateContainer.js -> dist/utils/generateContainer.js\nsrc/utils/getContainerKey.js -> dist/utils/getContainerKey.js\nsrc/utils/getFreePort.js -> dist/utils/getFreePort.js\nsrc/utils/getFunctionCodeDirectoryPath.js -> dist/utils/getFunctionCodeDirectoryPath.js\nsrc/utils/getFunctionConfigFilePath.js -> dist/utils/getFunctionConfigFilePath.js\nsrc/utils/getFunctionDirectoryPath.js -> dist/utils/getFunctionDirectoryPath.js\nsrc/utils/getFunctionsDirectoryPath.js -> dist/utils/getFunctionsDirectoryPath.js\nsrc/utils/getRuntimeExecName.js -> dist/utils/getRuntimeExecName.js\nsrc/utils/getRuntimeFileExtension.js -> dist/utils/getRuntimeFileExtension.js\nsrc/utils/getRuntimeScriptName.js -> dist/utils/getRuntimeScriptName.js\nsrc/utils/invokeFunction.js -> dist/utils/invokeFunction.js\nsrc/utils/loadCoreMiddlewares.js -> dist/utils/loadCoreMiddlewares.js\nsrc/utils/middlewareHelpers.js -> dist/utils/middlewareHelpers.js\nsrc/utils/readFunctionConfigFile.js -> dist/utils/readFunctionConfigFile.js\nsrc/utils/runMiddlewares.js -> dist/utils/runMiddlewares.js\nsrc/utils/unzipFunctionCode.js -> dist/utils/unzipFunctionCode.js\nsrc/utils/validateFunctionId.js -> dist/utils/validateFunctionId.js\nsrc/utils/validateRuntime.js -> dist/utils/validateRuntime.js\nsrc/utils/validateZipFilePath.js -> dist/utils/validateZipFilePath.js\nsrc/utils/writeFunctionConfigFile.js -> dist/utils/writeFunctionConfigFile.js\nRemoving intermediate container bd8d39ead2e6\n ---> abe4435bf46d\nStep 5/6 : EXPOSE 4002\n ---> Running in 7daac3a0ffb7\nRemoving intermediate container 7daac3a0ffb7\n ---> 1a6175860635\nStep 6/6 : CMD [\"npm\", \"start\"]\n ---> Running in f966fb8b3015\nRemoving intermediate container f966fb8b3015\n ---> 85c113356740\nSuccessfully built 85c113356740\nSuccessfully tagged emulator:latest\n","stderr":"","imageSize":1087065369},"endTime":1672294211321}