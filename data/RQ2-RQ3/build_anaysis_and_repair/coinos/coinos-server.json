{"repository":"https://github.com/coinos/coinos-server","dockerfilePath":"Dockerfile","startTime":1672312246759,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/coinos/coinos-server'...\n","error":null,"commit":"33d8a7d5235281d705bc1ac27113e150b2b9c617"},"originalBuild":{"startTimestamp":1672312247830,"endTimestamp":1672312315325,"error":{"code":1,"killed":false,"signal":null,"cmd":"docker build --no-cache --force-rm -t coinos-server:latest -f /tmp/dinghy-analysis/coinos/coinos-server/Dockerfile ."},"stdout":"Sending build context to Docker daemon   2.48MB\r\r\nStep 1/9 : FROM node:18-alpine\n18-alpine: Pulling from library/node\nDigest: sha256:a136ed7b0df71082cdb171f36d640ea3b392a5c70401c642326acee767b8c540\nStatus: Downloaded newer image for node:18-alpine\n ---> 6d7b7852bcd3\nStep 2/9 : ARG NODE_ENV=production\n ---> Running in e47ab9d8f8d4\nRemoving intermediate container e47ab9d8f8d4\n ---> 625252fd480e\nStep 3/9 : ENV NODE_ENV $NODE_ENV\n ---> Running in 343d3b2a669f\nRemoving intermediate container 343d3b2a669f\n ---> fb176b5230bd\nStep 4/9 : RUN apk add --update inotify-tools npm vips-dev\n ---> Running in f13c1a517205\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/151) Installing inotify-tools-libs (3.22.6.0-r0)\n(2/151) Installing inotify-tools (3.22.6.0-r0)\n(3/151) Installing ca-certificates (20220614-r3)\n(4/151) Installing brotli-libs (1.0.9-r9)\n(5/151) Installing c-ares (1.18.1-r1)\n(6/151) Installing icu-data-en (72.1-r1)\nExecuting icu-data-en-72.1-r1.post-install\n\u001b[91m*\n* If you need ICU with non-English locales and legacy charset support, install\n* package icu-data-full.\n*\n\u001b[0m(7/151) Installing icu-libs (72.1-r1)\n(8/151) Installing nghttp2-libs (1.51.0-r0)\n(9/151) Installing libuv (1.44.2-r0)\n(10/151) Installing nodejs-current (19.3.0-r0)\n(11/151) Installing npm (9.1.2-r0)\n(12/151) Installing openexr (3.1.5-r3)\n(13/151) Installing pkgconf (1.9.3-r0)\n(14/151) Installing openexr-dev (3.1.5-r3)\n(15/151) Installing cairo-tools (1.17.6-r3)\n(16/151) Installing libexpat (2.5.0-r0)\n(17/151) Installing libbz2 (1.0.8-r4)\n(18/151) Installing libpng (1.6.38-r0)\n(19/151) Installing freetype (2.12.1-r0)\n(20/151) Installing fontconfig (2.14.1-r0)\n(21/151) Installing expat (2.5.0-r0)\n(22/151) Installing expat-dev (2.5.0-r0)\n(23/151) Installing bzip2-dev (1.0.8-r4)\n(24/151) Installing brotli (1.0.9-r9)\n(25/151) Installing brotli-dev (1.0.9-r9)\n(26/151) Installing zlib-dev (1.2.13-r0)\n(27/151) Installing libpng-dev (1.6.38-r0)\n(28/151) Installing freetype-dev (2.12.1-r0)\n(29/151) Installing fontconfig-dev (2.14.1-r0)\n(30/151) Installing libxau (1.0.10-r0)\n(31/151) Installing xorgproto (2022.2-r0)\n(32/151) Installing libxau-dev (1.0.10-r0)\n(33/151) Installing libmd (1.0.4-r0)\n(34/151) Installing libbsd (0.11.7-r0)\n(35/151) Installing libxdmcp (1.1.4-r0)\n(36/151) Installing libxcb (1.15-r0)\n(37/151) Installing libx11 (1.8.3-r0)\n(38/151) Installing libxext (1.3.5-r0)\n(39/151) Installing xcb-proto (1.15.2-r0)\n(40/151) Installing libxdmcp-dev (1.1.4-r0)\n(41/151) Installing libxcb-dev (1.15-r0)\n(42/151) Installing xtrans (1.4.0-r2)\n(43/151) Installing libx11-dev (1.8.3-r0)\n(44/151) Installing libxext-dev (1.3.5-r0)\n(45/151) Installing libxrender (0.9.11-r0)\n(46/151) Installing libxrender-dev (0.9.11-r0)\n(47/151) Installing pixman (0.42.2-r0)\n(48/151) Installing pixman-dev (0.42.2-r0)\n(49/151) Installing util-macros (1.19.3-r0)\n(50/151) Installing xcb-util (0.4.0-r3)\n(51/151) Installing xcb-util-dev (0.4.0-r3)\n(52/151) Installing cairo (1.17.6-r3)\n(53/151) Installing libffi (3.4.4-r0)\n(54/151) Installing libintl (0.21.1-r1)\n(55/151) Installing libblkid (2.38.1-r0)\n(56/151) Installing libmount (2.38.1-r0)\n(57/151) Installing pcre2 (10.42-r0)\n(58/151) Installing glib (2.74.4-r0)\n(59/151) Installing cairo-gobject (1.17.6-r3)\n(60/151) Installing xz-libs (5.2.9-r0)\n(61/151) Installing libxml2 (2.10.3-r1)\n(62/151) Installing libxml2-utils (2.10.3-r1)\n(63/151) Installing docbook-xml (4.5-r8)\nExecuting docbook-xml-4.5-r8.post-install\n(64/151) Installing libgpg-error (1.46-r1)\n(65/151) Installing libgcrypt (1.10.1-r0)\n(66/151) Installing libxslt (1.1.37-r0)\n(67/151) Installing docbook-xsl (1.79.2-r8)\nExecuting docbook-xsl-1.79.2-r8.post-install\n(68/151) Installing gettext-asprintf (0.21.1-r1)\n(69/151) Installing ncurses-terminfo-base (6.3_p20221119-r0)\n(70/151) Installing ncurses-libs (6.3_p20221119-r0)\n(71/151) Installing libunistring (1.1-r0)\n(72/151) Installing gettext-libs (0.21.1-r1)\n(73/151) Installing libgomp (12.2.1_git20220924-r4)\n(74/151) Installing gettext (0.21.1-r1)\n(75/151) Installing gettext-dev (0.21.1-r1)\n(76/151) Installing gdbm (1.23-r0)\n(77/151) Installing mpdecimal (2.5.1-r1)\n(78/151) Installing readline (8.2.0-r0)\n(79/151) Installing sqlite-libs (3.40.1-r0)\n(80/151) Installing python3 (3.10.9-r1)\n(81/151) Installing linux-headers (5.19.5-r0)\n(82/151) Installing libffi-dev (3.4.4-r0)\n(83/151) Installing bsd-compat-headers (0.7.2-r3)\n(84/151) Installing ncurses-dev (6.3_p20221119-r0)\n(85/151) Installing libedit (20221030.3.1-r0)\n(86/151) Installing libedit-dev (20221030.3.1-r0)\n(87/151) Installing libpcre2-16 (10.42-r0)\n(88/151) Installing libpcre2-32 (10.42-r0)\n(89/151) Installing pcre2-dev (10.42-r0)\n(90/151) Installing libuuid (2.38.1-r0)\n(91/151) Installing libfdisk (2.38.1-r0)\n(92/151) Installing libsmartcols (2.38.1-r0)\n(93/151) Installing util-linux-dev (2.38.1-r0)\n(94/151) Installing glib-dev (2.74.4-r0)\n(95/151) Installing cairo-dev (1.17.6-r3)\n(96/151) Installing libcurl (7.87.0-r0)\n(97/151) Installing cfitsio (4.2.0-r0)\n(98/151) Installing cfitsio-dev (4.2.0-r0)\n(99/151) Installing cgif (0.3.0-r0)\n(100/151) Installing cgif-dev (0.3.0-r0)\n(101/151) Installing fftw-double-libs (3.3.10-r1)\n(102/151) Installing fftw-long-double-libs (3.3.10-r1)\n(103/151) Installing fftw-single-libs (3.3.10-r1)\n(104/151) Installing fftw-dev (3.3.10-r1)\n(105/151) Installing libimagequant (4.0.4-r0)\n(106/151) Installing libimagequant-dev (4.0.4-r0)\n(107/151) Installing libjpeg-turbo (2.1.4-r0)\n(108/151) Installing libjpeg-turbo-dev (2.1.4-r0)\n(109/151) Installing libwebp (1.2.4-r1)\n(110/151) Installing libwebp-dev (1.2.4-r1)\n(111/151) Installing xz-dev (5.2.9-r0)\n(112/151) Installing zstd-libs (1.5.2-r9)\n(113/151) Installing zstd-dev (1.5.2-r9)\n(114/151) Installing tiff (4.4.0-r1)\n(115/151) Installing libtiffxx (4.4.0-r1)\n(116/151) Installing tiff-dev (4.4.0-r1)\n(117/151) Installing lcms2 (2.14-r0)\n(118/151) Installing lcms2-dev (2.14-r0)\n(119/151) Installing libexif (0.6.24-r0)\n(120/151) Installing libexif-dev (0.6.24-r0)\n(121/151) Installing openjpeg (2.5.0-r0)\n(122/151) Installing openjpeg-tools (2.5.0-r0)\n(123/151) Installing openjpeg-dev (2.5.0-r0)\n(124/151) Installing shared-mime-info (2.2-r2)\n(125/151) Installing gdk-pixbuf (2.42.10-r0)\n(126/151) Installing libxft (2.3.7-r0)\n(127/151) Installing fribidi (1.0.12-r0)\n(128/151) Installing graphite2 (1.3.14-r2)\n(129/151) Installing harfbuzz (5.3.1-r1)\n(130/151) Installing pango (1.50.12-r0)\n(131/151) Installing rsvg-convert (2.55.1-r0)\n(132/151) Installing librsvg (2.55.1-r0)\n(133/151) Installing gdk-pixbuf-dev (2.42.10-r0)\n(134/151) Installing librsvg-dev (2.55.1-r0)\n(135/151) Installing orc (0.4.33-r0)\n(136/151) Installing orc-compiler (0.4.33-r0)\n(137/151) Installing orc-dev (0.4.33-r0)\n(138/151) Installing pango-tools (1.50.12-r0)\n(139/151) Installing fribidi-dev (1.0.12-r0)\n(140/151) Installing harfbuzz-icu (5.3.1-r1)\n(141/151) Installing graphite2-dev (1.3.14-r2)\n(142/151) Installing icu (72.1-r1)\n(143/151) Installing icu-dev (72.1-r1)\n(144/151) Installing harfbuzz-dev (5.3.1-r1)\n(145/151) Installing libxft-dev (2.3.7-r0)\n(146/151) Installing pango-dev (1.50.12-r0)\n(147/151) Installing libspng (0.7.2-r1)\n(148/151) Installing libspng-dev (0.7.2-r1)\n(149/151) Installing vips (8.13.3-r1)\n(150/151) Installing vips-cpp (8.13.3-r1)\n(151/151) Installing vips-dev (8.13.3-r1)\nExecuting busybox-1.35.0-r29.trigger\nExecuting ca-certificates-20220614-r3.trigger\nExecuting glib-2.74.4-r0.trigger\nNo schema files found: doing nothing.\nExecuting shared-mime-info-2.2-r2.trigger\nExecuting gdk-pixbuf-2.42.10-r0.trigger\nOK: 264 MiB in 168 packages\nRemoving intermediate container f13c1a517205\n ---> f52aa77e10e9\nStep 5/9 : RUN npm i -g pnpm\n ---> Running in e5e066fa39eb\n\nadded 1 package, and audited 2 packages in 1s\n\n1 package is looking for funding\n  run `npm fund` for details\n\nfound 0 vulnerabilities\n\u001b[91mnpm\u001b[0m\u001b[91m notice \nnpm\u001b[0m\u001b[91m notice\u001b[0m\u001b[91m New major version of npm available! 8.19.2 -> 9.2.0\nnpm notice\u001b[0m\u001b[91m Changelog: <https://github.com/npm/cli/releases/tag/v9.2.0>\nnpm notice Run `npm install -g npm@9.2.0` to update!\nnpm notice \n\u001b[0mRemoving intermediate container e5e066fa39eb\n ---> 30cdb81f1e6c\nStep 6/9 : COPY . /app\n ---> 577ed7734333\nStep 7/9 : WORKDIR /app\n ---> Running in d836be99a2a3\nRemoving intermediate container d836be99a2a3\n ---> 2a51470fccca\nStep 8/9 : RUN NODE_ENV=development NODE_OPTIONS=\"\" pnpm i\n ---> Running in 0fb9c79b3005\nLockfile is up to date, resolution step is skipped\nProgress: resolved 1, reused 0, downloaded 0, added 0\nPackages: +625\n++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++\nProgress: resolved 625, reused 0, downloaded 0, added 0\nPackages are hard linked from the content-addressable store to the virtual store.\n  Content-addressable store is at: /root/.local/share/pnpm/store/v3\n  Virtual store is at:             node_modules/.pnpm\nProgress: resolved 625, reused 0, downloaded 83, added 81\nProgress: resolved 625, reused 0, downloaded 204, added 202\nProgress: resolved 625, reused 0, downloaded 316, added 309\nProgress: resolved 625, reused 0, downloaded 393, added 385\nProgress: resolved 625, reused 0, downloaded 411, added 409\nProgress: resolved 625, reused 0, downloaded 477, added 471\nProgress: resolved 625, reused 0, downloaded 571, added 567\nProgress: resolved 625, reused 0, downloaded 621, added 622\nProgress: resolved 625, reused 0, downloaded 624, added 625, done\n.../node_modules/tiny-secp256k1 install$ npm run build || echo \"secp256k1 bindings compilation fail. Pure JS implementation will be used.\"\n.../bcrypt@5.1.0/node_modules/bcrypt install$ node-pre-gyp install --fallback-to-build\n.../sharp@0.31.1/node_modules/sharp install$ (node install/libvips && node install/dll-copy && prebuild-install) || (node install/can-compile && node-gyp rebuild && node install/dll-copy)\n.../node_modules/secp256k1 install$ node-gyp-build || exit 0\n.../node_modules/sodium-native install$ node-gyp-build\n.../bcrypt@5.1.0/node_modules/bcrypt install: node-pre-gyp info it worked if it ends with ok\n.../bcrypt@5.1.0/node_modules/bcrypt install: node-pre-gyp info using node-pre-gyp@1.0.10\n.../bcrypt@5.1.0/node_modules/bcrypt install: node-pre-gyp info using node@18.12.1 | linux | x64\n.../bcrypt@5.1.0/node_modules/bcrypt install: node-pre-gyp info check checked for \"/app/node_modules/.pnpm/bcrypt@5.1.0/node_modules/bcrypt/lib/binding/napi-v3/bcrypt_lib.node\" (not found)\n.../bcrypt@5.1.0/node_modules/bcrypt install: node-pre-gyp http GET https://github.com/kelektiv/node.bcrypt.js/releases/download/v5.1.0/bcrypt_lib-v5.1.0-napi-v3-linux-x64-musl.tar.gz\n.../sharp@0.31.1/node_modules/sharp install: sharp: Detected globally-installed libvips v8.13.3\n.../sharp@0.31.1/node_modules/sharp install: sharp: Building from source via node-gyp\n.../node_modules/sodium-native install: Done\n.../node_modules/secp256k1 install: Done\n.../sharp@0.31.1/node_modules/sharp install: gyp info it worked if it ends with ok\n.../sharp@0.31.1/node_modules/sharp install: gyp info using node-gyp@9.3.0\n.../sharp@0.31.1/node_modules/sharp install: gyp info using node@18.12.1 | linux | x64\n.../node_modules/zeromq install$ node-gyp-build\n.../node_modules/tiny-secp256k1 install: > tiny-secp256k1@1.1.6 build\n.../node_modules/tiny-secp256k1 install: > node-gyp rebuild\n.../node_modules/tiny-secp256k1 install: gyp info it worked if it ends with ok\n.../node_modules/tiny-secp256k1 install: gyp info using node-gyp@8.4.1\n.../node_modules/tiny-secp256k1 install: gyp info using node@18.12.1 | linux | x64\n.../sharp@0.31.1/node_modules/sharp install: gyp info find Python using Python version 3.10.9 found at \"/usr/bin/python3\"\n.../bcrypt@5.1.0/node_modules/bcrypt install: node-pre-gyp info install unpacking napi-v3/bcrypt_lib.node\n.../bcrypt@5.1.0/node_modules/bcrypt install: node-pre-gyp info extracted file count: 1 \n.../bcrypt@5.1.0/node_modules/bcrypt install: node-pre-gyp info ok \n.../bcrypt@5.1.0/node_modules/bcrypt install: [bcrypt] Success: \"/app/node_modules/.pnpm/bcrypt@5.1.0/node_modules/bcrypt/lib/binding/napi-v3/bcrypt_lib.node\" is installed via remote\n.../bcrypt@5.1.0/node_modules/bcrypt install: Done\n.../node_modules/tiny-secp256k1 install: gyp info find Python using Python version 3.10.9 found at \"/usr/bin/python3\"\n.../sharp@0.31.1/node_modules/sharp install: gyp http GET https://unofficial-builds.nodejs.org/download/release/v18.12.1/node-v18.12.1-headers.tar.gz\n.../node_modules/zeromq install: Done\n.../node_modules/tiny-secp256k1 install: gyp http GET https://unofficial-builds.nodejs.org/download/release/v18.12.1/node-v18.12.1-headers.tar.gz\n.../sharp@0.31.1/node_modules/sharp install: gyp http 200 https://unofficial-builds.nodejs.org/download/release/v18.12.1/node-v18.12.1-headers.tar.gz\n.../node_modules/tiny-secp256k1 install: gyp http 200 https://unofficial-builds.nodejs.org/download/release/v18.12.1/node-v18.12.1-headers.tar.gz\n.../sharp@0.31.1/node_modules/sharp install: gyp http GET https://unofficial-builds.nodejs.org/download/release/v18.12.1/SHASUMS256.txt\n.../sharp@0.31.1/node_modules/sharp install: gyp http 200 https://unofficial-builds.nodejs.org/download/release/v18.12.1/SHASUMS256.txt\n.../sharp@0.31.1/node_modules/sharp install: gyp info spawn /usr/bin/python3\n.../sharp@0.31.1/node_modules/sharp install: gyp info spawn args [\n.../sharp@0.31.1/node_modules/sharp install: gyp info spawn args   '/usr/local/lib/node_modules/pnpm/dist/node_modules/node-gyp/gyp/gyp_main.py',\n.../sharp@0.31.1/node_modules/sharp install: gyp info spawn args   'binding.gyp',\n.../sharp@0.31.1/node_modules/sharp install: gyp info spawn args   '-f',\n.../sharp@0.31.1/node_modules/sharp install: gyp info spawn args   'make',\n.../sharp@0.31.1/node_modules/sharp install: gyp info spawn args   '-I',\n.../sharp@0.31.1/node_modules/sharp install: gyp info spawn args   '/app/node_modules/.pnpm/sharp@0.31.1/node_modules/sharp/build/config.gypi',\n.../sharp@0.31.1/node_modules/sharp install: gyp info spawn args   '-I',\n.../sharp@0.31.1/node_modules/sharp install: gyp info spawn args   '/usr/local/lib/node_modules/pnpm/dist/node_modules/node-gyp/addon.gypi',\n.../sharp@0.31.1/node_modules/sharp install: gyp info spawn args   '-I',\n.../sharp@0.31.1/node_modules/sharp install: gyp info spawn args   '/root/.cache/node-gyp/18.12.1/include/node/common.gypi',\n.../sharp@0.31.1/node_modules/sharp install: gyp info spawn args   '-Dlibrary=shared_library',\n.../sharp@0.31.1/node_modules/sharp install: gyp info spawn args   '-Dvisibility=default',\n.../sharp@0.31.1/node_modules/sharp install: gyp info spawn args   '-Dnode_root_dir=/root/.cache/node-gyp/18.12.1',\n.../sharp@0.31.1/node_modules/sharp install: gyp info spawn args   '-Dnode_gyp_dir=/usr/local/lib/node_modules/pnpm/dist/node_modules/node-gyp',\n.../sharp@0.31.1/node_modules/sharp install: gyp info spawn args   '-Dnode_lib_file=/root/.cache/node-gyp/18.12.1/<(target_arch)/node.lib',\n.../sharp@0.31.1/node_modules/sharp install: gyp info spawn args   '-Dmodule_root_dir=/app/node_modules/.pnpm/sharp@0.31.1/node_modules/sharp',\n.../sharp@0.31.1/node_modules/sharp install: gyp info spawn args   '-Dnode_engine=v8',\n.../sharp@0.31.1/node_modules/sharp install: gyp info spawn args   '--depth=.',\n.../sharp@0.31.1/node_modules/sharp install: gyp info spawn args   '--no-parallel',\n.../sharp@0.31.1/node_modules/sharp install: gyp info spawn args   '--generator-output',\n.../sharp@0.31.1/node_modules/sharp install: gyp info spawn args   'build',\n.../sharp@0.31.1/node_modules/sharp install: gyp info spawn args   '-Goutput_dir=.'\n.../sharp@0.31.1/node_modules/sharp install: gyp info spawn args ]\n.../sharp@0.31.1/node_modules/sharp install: /bin/sh: c++filt: not found\n.../sharp@0.31.1/node_modules/sharp install: /bin/sh: readelf: not found\n.../sharp@0.31.1/node_modules/sharp install: gyp ERR! build error \n.../sharp@0.31.1/node_modules/sharp install: gyp ERR! stack Error: not found: make\n.../sharp@0.31.1/node_modules/sharp install: gyp ERR! stack     at getNotFoundError (/usr/local/lib/node_modules/pnpm/dist/node_modules/which/which.js:10:17)\n.../sharp@0.31.1/node_modules/sharp install: gyp ERR! stack     at /usr/local/lib/node_modules/pnpm/dist/node_modules/which/which.js:57:18\n.../sharp@0.31.1/node_modules/sharp install: gyp ERR! stack     at new Promise (<anonymous>)\n.../sharp@0.31.1/node_modules/sharp install: gyp ERR! stack     at step (/usr/local/lib/node_modules/pnpm/dist/node_modules/which/which.js:54:21)\n.../sharp@0.31.1/node_modules/sharp install: gyp ERR! stack     at /usr/local/lib/node_modules/pnpm/dist/node_modules/which/which.js:71:22\n.../sharp@0.31.1/node_modules/sharp install: gyp ERR! stack     at new Promise (<anonymous>)\n.../sharp@0.31.1/node_modules/sharp install: gyp ERR! stack     at subStep (/usr/local/lib/node_modules/pnpm/dist/node_modules/which/which.js:69:33)\n.../sharp@0.31.1/node_modules/sharp install: gyp ERR! stack     at /usr/local/lib/node_modules/pnpm/dist/node_modules/which/which.js:80:22\n.../sharp@0.31.1/node_modules/sharp install: gyp ERR! stack     at /usr/local/lib/node_modules/pnpm/dist/node_modules/isexe/index.js:42:5\n.../sharp@0.31.1/node_modules/sharp install: gyp ERR! stack     at /usr/local/lib/node_modules/pnpm/dist/node_modules/isexe/mode.js:8:5\n.../sharp@0.31.1/node_modules/sharp install: gyp ERR! System Linux 5.4.0-113-generic\n.../sharp@0.31.1/node_modules/sharp install: gyp ERR! command \"/usr/local/bin/node\" \"/usr/local/lib/node_modules/pnpm/dist/node_modules/node-gyp/bin/node-gyp.js\" \"rebuild\"\n.../sharp@0.31.1/node_modules/sharp install: gyp ERR! cwd /app/node_modules/.pnpm/sharp@0.31.1/node_modules/sharp\n.../sharp@0.31.1/node_modules/sharp install: gyp ERR! node -v v18.12.1\n.../sharp@0.31.1/node_modules/sharp install: gyp ERR! node-gyp -v v9.3.0\n.../sharp@0.31.1/node_modules/sharp install: gyp ERR! not ok \n.../sharp@0.31.1/node_modules/sharp install: Failed\n ELIFECYCLE  Command failed with exit code 1.\nRemoving intermediate container 0fb9c79b3005\n","stderr":"The command '/bin/sh -c NODE_ENV=development NODE_OPTIONS=\"\" pnpm i' returned a non-zero code: 1\n"},"endTime":1672312315404}