{"repository":"https://github.com/alexbrazier/go-url","dockerfilePath":"Dockerfile","startTime":1672470317070,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/alexbrazier/go-url'...\n","error":null,"commit":"1471a74fb5b46d16cf1d489edd6634e56367854e"},"originalBuild":{"startTimestamp":1672470318002,"endTimestamp":1672470535935,"error":null,"stdout":"Sending build context to Docker daemon  1.842MB\r\r\nStep 1/18 : FROM golang:1.15.15-alpine3.14 AS apibuilder\n1.15.15-alpine3.14: Pulling from library/golang\n29291e31a76a: Pulling fs layer\ne4bc8fc554c3: Pulling fs layer\n803daa35ea47: Pulling fs layer\n38284154e396: Pulling fs layer\na66f7597198a: Pulling fs layer\n38284154e396: Waiting\na66f7597198a: Waiting\n803daa35ea47: Verifying Checksum\n803daa35ea47: Download complete\ne4bc8fc554c3: Verifying Checksum\ne4bc8fc554c3: Download complete\n29291e31a76a: Verifying Checksum\n29291e31a76a: Download complete\n29291e31a76a: Pull complete\na66f7597198a: Download complete\ne4bc8fc554c3: Pull complete\n803daa35ea47: Pull complete\n38284154e396: Verifying Checksum\n38284154e396: Download complete\n38284154e396: Pull complete\na66f7597198a: Pull complete\nDigest: sha256:5b8a2dd7cbf2d0f59906d8cc4bff338d73faa481b492187863ab72839037b2cc\nStatus: Downloaded newer image for golang:1.15.15-alpine3.14\n ---> 1403af3b6d4a\nStep 2/18 : RUN apk update && apk add --no-cache git dep\n ---> Running in 91697cd1fccb\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.14/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.14/community/x86_64/APKINDEX.tar.gz\nv3.14.8-161-g417a1aaf71 [https://dl-cdn.alpinelinux.org/alpine/v3.14/main]\nv3.14.8-160-ga64feecdb9 [https://dl-cdn.alpinelinux.org/alpine/v3.14/community]\nOK: 14968 distinct packages available\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.14/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.14/community/x86_64/APKINDEX.tar.gz\n(1/7) Installing dep (0.5.4-r5)\n(2/7) Installing brotli-libs (1.0.9-r5)\n(3/7) Installing nghttp2-libs (1.43.0-r0)\n(4/7) Installing libcurl (7.79.1-r4)\n(5/7) Installing expat (2.5.0-r0)\n(6/7) Installing pcre2 (10.36-r1)\n(7/7) Installing git (2.32.4-r0)\nExecuting busybox-1.33.1-r3.trigger\nOK: 30 MiB in 22 packages\nRemoving intermediate container 91697cd1fccb\n ---> 3b8716e7881c\nStep 3/18 : COPY api $GOPATH/src/github.com/alexbrazier/go-url/api\n ---> 6640354cbe93\nStep 4/18 : WORKDIR $GOPATH/src/github.com/alexbrazier/go-url/api\n ---> Running in 31ec65409963\nRemoving intermediate container 31ec65409963\n ---> f090031800bc\nStep 5/18 : RUN dep ensure -vendor-only\n ---> Running in 3a488f18d80d\nRemoving intermediate container 3a488f18d80d\n ---> ed52aeb67fd7\nStep 6/18 : RUN go build -o /go/bin/server\n ---> Running in b32e026ed9b3\nRemoving intermediate container b32e026ed9b3\n ---> 3fa6228362b5\nStep 7/18 : FROM node:16.16.0-alpine AS frontendbuilder\n16.16.0-alpine: Pulling from library/node\n213ec9aee27d: Already exists\n015fad1872e1: Pulling fs layer\nc93f3de25c33: Pulling fs layer\nbc5d1f30ff35: Pulling fs layer\nbc5d1f30ff35: Verifying Checksum\nbc5d1f30ff35: Download complete\nc93f3de25c33: Verifying Checksum\nc93f3de25c33: Download complete\n015fad1872e1: Verifying Checksum\n015fad1872e1: Download complete\n015fad1872e1: Pull complete\nc93f3de25c33: Pull complete\nbc5d1f30ff35: Pull complete\nDigest: sha256:1c8769a8c9ed57817ef07162744a3722421333a438185c560aa42a9a1fc6ea23\nStatus: Downloaded newer image for node:16.16.0-alpine\n ---> b1ca7421d2e7\nStep 8/18 : COPY frontend /app\n ---> 8725ae20e8e6\nStep 9/18 : WORKDIR /app\n ---> Running in b7174fa842da\nRemoving intermediate container b7174fa842da\n ---> 97199658c743\nStep 10/18 : RUN yarn --frozen-lockfile --network-timeout 600000 &&     yarn build\n ---> Running in 6f7ee1e2b551\nyarn install v1.22.19\n[1/4] Resolving packages...\n[2/4] Fetching packages...\n[3/4] Linking dependencies...\n\u001b[91mwarning \"react-scripts > eslint-config-react-app > eslint-plugin-flowtype@8.0.3\" has unmet peer dependency \"@babel/plugin-syntax-flow@^7.14.5\".\nwarning \"react-scripts > eslint-config-react-app > eslint-plugin-flowtype@8.0.3\" has unmet peer dependency \"@babel/plugin-transform-react-jsx@^7.14.9\".\n\u001b[0m\u001b[91mwarning \" > @cypress/webpack-preprocessor@5.12.2\" has unmet peer dependency \"@babel/core@^7.0.1\".\nwarning \" > @cypress/webpack-preprocessor@5.12.2\" has unmet peer dependency \"@babel/preset-env@^7.0.0\".\nwarning \" > @cypress/webpack-preprocessor@5.12.2\" has unmet peer dependency \"babel-loader@^8.0.2\".\nwarning \" > @cypress/webpack-preprocessor@5.12.2\" has unmet peer dependency \"webpack@^4 || ^5\".\n\u001b[0m\u001b[91mwarning \" > eslint-config-airbnb@19.0.4\" has unmet peer dependency \"eslint-plugin-react-hooks@^4.3.0\".\n\u001b[0m\u001b[91mwarning \" > ts-loader@9.3.1\" has unmet peer dependency \"webpack@^5.0.0\".\n\u001b[0m[4/4] Building fresh packages...\nDone in 49.57s.\nyarn run v1.22.19\n$ react-scripts build\nCreating an optimized production build...\nCompiled successfully.\n\nFile sizes after gzip:\n\n  155.55 kB  build/static/js/main.400347b1.js\n  965 B      build/static/css/main.9d1e0d79.css\n\nThe project was built assuming it is hosted at /go/.\nYou can control this with the homepage field in your package.json.\n\nThe build folder is ready to be deployed.\n\nFind out more about deployment here:\n\n  https://cra.link/deployment\n\nDone in 17.96s.\nRemoving intermediate container 6f7ee1e2b551\n ---> 078c613a89fe\nStep 11/18 : FROM alpine:3.16\n ---> bfe296a52501\nStep 12/18 : RUN apk update && apk add bash dumb-init ca-certificates && rm -rf /var/cache/apk/*\n ---> Running in c2dceb6f599b\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/community/x86_64/APKINDEX.tar.gz\nv3.16.3-91-gd0e167f17b [https://dl-cdn.alpinelinux.org/alpine/v3.16/main]\nv3.16.3-88-gef347edb61 [https://dl-cdn.alpinelinux.org/alpine/v3.16/community]\nOK: 17039 distinct packages available\n(1/6) Installing ncurses-terminfo-base (6.3_p20220521-r0)\n(2/6) Installing ncurses-libs (6.3_p20220521-r0)\n(3/6) Installing readline (8.1.2-r0)\n(4/6) Installing bash (5.1.16-r2)\nExecuting bash-5.1.16-r2.post-install\n(5/6) Installing ca-certificates (20220614-r0)\n(6/6) Installing dumb-init (1.2.5-r1)\nExecuting busybox-1.35.0-r17.trigger\nExecuting ca-certificates-20220614-r0.trigger\nOK: 9 MiB in 20 packages\nRemoving intermediate container c2dceb6f599b\n ---> 710871e510e4\nStep 13/18 : COPY --from=apibuilder /go/bin/server /go/bin/server\n ---> 62d0eca4c1f7\nStep 14/18 : COPY --from=frontendbuilder /app/build /go/bin/public\n ---> ed7ba7830e37\nStep 15/18 : WORKDIR /go/bin\n ---> Running in 2103e7fdfe1f\nRemoving intermediate container 2103e7fdfe1f\n ---> a7dcf3e4f8bc\nStep 16/18 : COPY entrypoint.sh .\n ---> b37901da6c52\nStep 17/18 : ENTRYPOINT [\"/usr/bin/dumb-init\", \"--\"]\n ---> Running in 6e0a7b836abe\nRemoving intermediate container 6e0a7b836abe\n ---> e5dff1c8f827\nStep 18/18 : CMD [\"/go/bin/entrypoint.sh\"]\n ---> Running in fcaff2d73618\nRemoving intermediate container fcaff2d73618\n ---> b96d9620e864\nSuccessfully built b96d9620e864\nSuccessfully tagged go-url:latest\n","stderr":"","imageSize":28058250},"repair":{"violations":[{"name":"apkAddUseNoCache","position":{"start":30,"end":30,"columnStart":18,"columnEnd":56}}],"repairedDockerfile":"############################\n# Build api\n############################\nFROM golang:1.15.15-alpine3.14 AS apibuilder\nRUN apk update && apk add --no-cache git dep\nCOPY api $GOPATH/src/github.com/alexbrazier/go-url/api\nWORKDIR $GOPATH/src/github.com/alexbrazier/go-url/api\n\n# install the dependencies without checking for go code\nRUN dep ensure -vendor-only\n\n# Build my app\nRUN go build -o /go/bin/server\n\n############################\n# Build frontend\n############################\nFROM node:16.16.0-alpine AS frontendbuilder\n\nCOPY frontend /app\nWORKDIR /app\n\nRUN yarn --frozen-lockfile --network-timeout 600000 && \\\n    yarn build\n\n############################\n# Build actual image\n############################\nFROM alpine:3.16\n# Need to get updated certificates to connect to Slack API\nRUN apk update && apk add --no-cache bash dumb-init ca-certificates && rm -rf /var/cache/apk/*\n# Copy our static executable.\nCOPY --from=apibuilder /go/bin/server /go/bin/server\nCOPY --from=frontendbuilder /app/build /go/bin/public\nWORKDIR /go/bin\nCOPY entrypoint.sh .\nENTRYPOINT [\"/usr/bin/dumb-init\", \"--\"]\nCMD [\"/go/bin/entrypoint.sh\"]\n"},"repairedBuild":{"startTimestamp":1672470536250,"endTimestamp":1672470689825,"error":null,"stdout":"Sending build context to Docker daemon  1.842MB\r\r\nStep 1/18 : FROM golang:1.15.15-alpine3.14 AS apibuilder\n ---> 1403af3b6d4a\nStep 2/18 : RUN apk update && apk add --no-cache git dep\n ---> Running in 31d00d90281b\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.14/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.14/community/x86_64/APKINDEX.tar.gz\nv3.14.8-161-g417a1aaf71 [https://dl-cdn.alpinelinux.org/alpine/v3.14/main]\nv3.14.8-160-ga64feecdb9 [https://dl-cdn.alpinelinux.org/alpine/v3.14/community]\nOK: 14968 distinct packages available\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.14/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.14/community/x86_64/APKINDEX.tar.gz\n(1/7) Installing dep (0.5.4-r5)\n(2/7) Installing brotli-libs (1.0.9-r5)\n(3/7) Installing nghttp2-libs (1.43.0-r0)\n(4/7) Installing libcurl (7.79.1-r4)\n(5/7) Installing expat (2.5.0-r0)\n(6/7) Installing pcre2 (10.36-r1)\n(7/7) Installing git (2.32.4-r0)\nExecuting busybox-1.33.1-r3.trigger\nOK: 30 MiB in 22 packages\nRemoving intermediate container 31d00d90281b\n ---> 2ad127eca361\nStep 3/18 : COPY api $GOPATH/src/github.com/alexbrazier/go-url/api\n ---> b4053b0a4831\nStep 4/18 : WORKDIR $GOPATH/src/github.com/alexbrazier/go-url/api\n ---> Running in 282749e6028d\nRemoving intermediate container 282749e6028d\n ---> 44d7f0697d97\nStep 5/18 : RUN dep ensure -vendor-only\n ---> Running in e7fb86568946\nRemoving intermediate container e7fb86568946\n ---> da7c69011268\nStep 6/18 : RUN go build -o /go/bin/server\n ---> Running in 80f0428c9733\nRemoving intermediate container 80f0428c9733\n ---> 2742b9eac809\nStep 7/18 : FROM node:16.16.0-alpine AS frontendbuilder\n ---> b1ca7421d2e7\nStep 8/18 : COPY frontend /app\n ---> aeb44b75b3da\nStep 9/18 : WORKDIR /app\n ---> Running in 8dc779a0c766\nRemoving intermediate container 8dc779a0c766\n ---> 7bafea21f047\nStep 10/18 : RUN yarn --frozen-lockfile --network-timeout 600000 &&     yarn build\n ---> Running in 82ec2888a00f\nyarn install v1.22.19\n[1/4] Resolving packages...\n[2/4] Fetching packages...\n[3/4] Linking dependencies...\n\u001b[91mwarning \"react-scripts > eslint-config-react-app > eslint-plugin-flowtype@8.0.3\" has unmet peer dependency \"@babel/plugin-syntax-flow@^7.14.5\".\nwarning \"react-scripts > eslint-config-react-app > eslint-plugin-flowtype@8.0.3\" has unmet peer dependency \"@babel/plugin-transform-react-jsx@^7.14.9\".\n\u001b[0m\u001b[91mwarning \" > @cypress/webpack-preprocessor@5.12.2\" has unmet peer dependency \"@babel/core@^7.0.1\".\nwarning \" > @cypress/webpack-preprocessor@5.12.2\" has unmet peer dependency \"@babel/preset-env@^7.0.0\".\nwarning \" > @cypress/webpack-preprocessor@5.12.2\" has unmet peer dependency \"babel-loader@^8.0.2\".\nwarning \" > @cypress/webpack-preprocessor@5.12.2\" has unmet peer dependency \"webpack@^4 || ^5\".\n\u001b[0m\u001b[91mwarning \" > eslint-config-airbnb@19.0.4\" has unmet peer dependency \"eslint-plugin-react-hooks@^4.3.0\".\n\u001b[0m\u001b[91mwarning \" > ts-loader@9.3.1\" has unmet peer dependency \"webpack@^5.0.0\".\n\u001b[0m[4/4] Building fresh packages...\nDone in 42.22s.\nyarn run v1.22.19\n$ react-scripts build\nCreating an optimized production build...\nCompiled successfully.\n\nFile sizes after gzip:\n\n  155.55 kB  build/static/js/main.400347b1.js\n  965 B      build/static/css/main.9d1e0d79.css\n\nThe project was built assuming it is hosted at /go/.\nYou can control this with the homepage field in your package.json.\n\nThe build folder is ready to be deployed.\n\nFind out more about deployment here:\n\n  https://cra.link/deployment\n\nDone in 17.28s.\nRemoving intermediate container 82ec2888a00f\n ---> 19f4646a2a27\nStep 11/18 : FROM alpine:3.16\n ---> bfe296a52501\nStep 12/18 : RUN apk update && apk add --no-cache bash dumb-init ca-certificates && rm -rf /var/cache/apk/*\n ---> Running in 44d9b58dea0a\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/community/x86_64/APKINDEX.tar.gz\nv3.16.3-91-gd0e167f17b [https://dl-cdn.alpinelinux.org/alpine/v3.16/main]\nv3.16.3-88-gef347edb61 [https://dl-cdn.alpinelinux.org/alpine/v3.16/community]\nOK: 17039 distinct packages available\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/community/x86_64/APKINDEX.tar.gz\n(1/6) Installing ncurses-terminfo-base (6.3_p20220521-r0)\n(2/6) Installing ncurses-libs (6.3_p20220521-r0)\n(3/6) Installing readline (8.1.2-r0)\n(4/6) Installing bash (5.1.16-r2)\nExecuting bash-5.1.16-r2.post-install\n(5/6) Installing ca-certificates (20220614-r0)\n(6/6) Installing dumb-init (1.2.5-r1)\nExecuting busybox-1.35.0-r17.trigger\nExecuting ca-certificates-20220614-r0.trigger\nOK: 9 MiB in 20 packages\nRemoving intermediate container 44d9b58dea0a\n ---> 0d6197d48804\nStep 13/18 : COPY --from=apibuilder /go/bin/server /go/bin/server\n ---> 1af6a9eed31b\nStep 14/18 : COPY --from=frontendbuilder /app/build /go/bin/public\n ---> 7a73658fd1b4\nStep 15/18 : WORKDIR /go/bin\n ---> Running in e9c52728d259\nRemoving intermediate container e9c52728d259\n ---> c10942f1022f\nStep 16/18 : COPY entrypoint.sh .\n ---> ef9205cf5c22\nStep 17/18 : ENTRYPOINT [\"/usr/bin/dumb-init\", \"--\"]\n ---> Running in d34d7e6d08f6\nRemoving intermediate container d34d7e6d08f6\n ---> ddc0d3eaa9a9\nStep 18/18 : CMD [\"/go/bin/entrypoint.sh\"]\n ---> Running in 76f8ba65c25b\nRemoving intermediate container 76f8ba65c25b\n ---> 7880a4815985\nSuccessfully built 7880a4815985\nSuccessfully tagged go-url:latest\n","stderr":"","imageSize":28058250},"endTime":1672470690071}