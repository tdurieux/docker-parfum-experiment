{"repository":"https://github.com/xetus-oss/docker-archiva","dockerfilePath":"Dockerfile","startTime":1673175255725,"endTime":1673175304956,"clone":{"startTime":1673175255726,"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/xetus-oss/docker-archiva'...\n","error":null,"endTime":1673175256443,"commit":"6f4188ed99bd1e5e223c35502e2695baa868cc4f"},"originalBuild":{"startTime":1673175256532,"endTime":1673175285081,"error":null,"stdout":"Sending build context to Docker daemon  56.83kB\r\r\nStep 1/14 : FROM eclipse-temurin:8-jdk-alpine\n8-jdk-alpine: Pulling from library/eclipse-temurin\nc158987b0551: Already exists\nd8e5acd5897d: Pulling fs layer\n3d6621093056: Pulling fs layer\n01654942074e: Pulling fs layer\n01654942074e: Verifying Checksum\n01654942074e: Download complete\nd8e5acd5897d: Verifying Checksum\nd8e5acd5897d: Download complete\nd8e5acd5897d: Pull complete\n3d6621093056: Verifying Checksum\n3d6621093056: Download complete\n3d6621093056: Pull complete\n01654942074e: Pull complete\nDigest: sha256:a9071af26973c97552d921f893856e95de165d73d90f4724942c7ca7357ed2b4\nStatus: Downloaded newer image for eclipse-temurin:8-jdk-alpine\n ---> c99b6a870e03\nStep 2/14 : MAINTAINER Xetus OSS <xetusoss@xetus.com>\n ---> Running in bf9034142d57\nRemoving intermediate container bf9034142d57\n ---> 4fbda306b8a2\nStep 3/14 : RUN addgroup --gid 1000 archiva &&\tadduser --system -u 1000 -G archiva archiva &&\tapk add bash curl\n ---> Running in 7e66ebf7ad5d\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/8) Installing ncurses-terminfo-base (6.3_p20221119-r0)\n(2/8) Installing ncurses-libs (6.3_p20221119-r0)\n(3/8) Installing readline (8.2.0-r0)\n(4/8) Installing bash (5.2.15-r0)\nExecuting bash-5.2.15-r0.post-install\n(5/8) Installing ca-certificates (20220614-r3)\n(6/8) Installing nghttp2-libs (1.51.0-r0)\n(7/8) Installing libcurl (7.87.0-r0)\n(8/8) Installing curl (7.87.0-r0)\nExecuting busybox-1.35.0-r29.trigger\nExecuting ca-certificates-20220614-r3.trigger\nOK: 36 MiB in 37 packages\nRemoving intermediate container 7e66ebf7ad5d\n ---> 8f77e6ebfe22\nStep 4/14 : ENV ARCHIVA_HOME /archiva\n ---> Running in 45bf5f04fea2\nRemoving intermediate container 45bf5f04fea2\n ---> cfe8e88dfa85\nStep 5/14 : ENV ARCHIVA_BASE /archiva-data\n ---> Running in cd87bc33f850\nRemoving intermediate container cd87bc33f850\n ---> a9ee12395b7e\nStep 6/14 : ARG BUILD_SNAPSHOT_RELEASE\n ---> Running in c92994775364\nRemoving intermediate container c92994775364\n ---> 3aaccc21f86d\nStep 7/14 : ADD files /tmp\n ---> ccb09aa67ac9\nStep 8/14 : RUN chmod +x /tmp/resource-retriever.sh &&\t/tmp/resource-retriever.sh &&\trm /tmp/resource-retriever.sh &&\tchmod +x /tmp/setup.sh &&\t/tmp/setup.sh &&\trm /tmp/setup.sh\n ---> Running in 266856a60a7a\n\u001b[91m  % Total    % Received % Xferd  Avera\u001b[0m\u001b[91mge Speed   Time   \u001b[0m\u001b[91m Time\u001b[0m\u001b[91m   \u001b[0m\u001b[91m  Ti\u001b[0m\u001b[91mme \u001b[0m\u001b[91m C\u001b[0m\u001b[91mur\u001b[0m\u001b[91mre\u001b[0m\u001b[91mnt\u001b[0m\u001b[91m\n \u001b[0m\u001b[91m   \u001b[0m\u001b[91m  \u001b[0m\u001b[91m  \u001b[0m\u001b[91m  \u001b[0m\u001b[91m   \u001b[0m\u001b[91m  \u001b[0m\u001b[91m  \u001b[0m\u001b[91m   \u001b[0m\u001b[91m  \u001b[0m\u001b[91m  \u001b[0m\u001b[91m  \u001b[0m\u001b[91m   \u001b[0m\u001b[91m   \u001b[0m\u001b[91m Dlo\u001b[0m\u001b[91mad  Upload   \u001b[0m\u001b[91mTotal   Spent  \u001b[0m\u001b[91m  \u001b[0m\u001b[91mLeft  \u001b[0m\u001b[91mSp\u001b[0m\u001b[91meed\n\u001b[0m\u001b[91m\r  \u001b[0m\u001b[91m0 \u001b[0m\u001b[91m    \u001b[0m\u001b[91m0    0     \u001b[0m\u001b[91m0    0     \u001b[0m\u001b[91m0  \u001b[0m\u001b[91m   \u001b[0m\u001b[91m 0 \u001b[0m\u001b[91m  \u001b[0m\u001b[91m  \u001b[0m\u001b[91m 0 --\u001b[0m\u001b[91m:-\u001b[0m\u001b[91m-:\u001b[0m\u001b[91m-- --:--:--\u001b[0m\u001b[91m --:\u001b[0m\u001b[91m--:-- \u001b[0m\u001b[91m    0\u001b[0m\u001b[91m\r100   162  100   162    0     0    525      0 --:--:-- --:--:-- --:\u001b[0m\u001b[91m--:--   527\n\u001b[0mDownloading archiva from https://downloads.apache.org/archiva/2.2.8/binaries/apache-archiva-2.2.8-bin.tar.gz\n\u001b[91m  % Total    % Received % Xf\u001b[0m\u001b[91merd  Aver\u001b[0m\u001b[91mage Speed   Time    Ti\u001b[0m\u001b[91mme    \u001b[0m\u001b[91m Ti\u001b[0m\u001b[91mme \u001b[0m\u001b[91m Cu\u001b[0m\u001b[91mrre\u001b[0m\u001b[91mnt\n\u001b[0m\u001b[91m        \u001b[0m\u001b[91m      \u001b[0m\u001b[91m     \u001b[0m\u001b[91m           \u001b[0m\u001b[91m   \u001b[0m\u001b[91mDloa\u001b[0m\u001b[91md  \u001b[0m\u001b[91mUpload   Total   S\u001b[0m\u001b[91mpent  \u001b[0m\u001b[91m  Left \u001b[0m\u001b[91m Speed\n\r\u001b[0m\u001b[91m  0\u001b[0m\u001b[91m     0\u001b[0m\u001b[91m    0  \u001b[0m\u001b[91m   0    \u001b[0m\u001b[91m0     0   \u001b[0m\u001b[91m   0  \u001b[0m\u001b[91m    0 --:--:\u001b[0m\u001b[91m-- --\u001b[0m\u001b[91m:--:--\u001b[0m\u001b[91m --:--:--\u001b[0m\u001b[91m   \u001b[0m\u001b[91m  0\u001b[0m\u001b[91m\r  2 64.5M    2 1776k    0     0  3697k      0  0\u001b[0m\u001b[91m:00:17 --:--:--\u001b[0m\u001b[91m  0:0\u001b[0m\u001b[91m0:17 \u001b[0m\u001b[91m36\u001b[0m\u001b[91m92k\u001b[0m\u001b[91m\r100 64.5M  100 64.5M    0     0  51.3M      \u001b[0m\u001b[91m0  0:00:01  0:00:01 --:\u001b[0m\u001b[91m--:-- 51.3M\n\u001b[0mARCHIVA_RELEASE_FILENAME=apache-archiva-2.2.8-bin.tar.gz\nremoved '/tmp/apache-archiva-2.2.8-bin.tar.gz'\n\u001b[91m  % Total    % Received % Xferd  Average Speed   Time \u001b[0m\u001b[91m   Time \u001b[0m\u001b[91m    Tim\u001b[0m\u001b[91me  Current\n                  \u001b[0m\u001b[91m \u001b[0m\u001b[91m   \u001b[0m\u001b[91m           Dload  Upload   To\u001b[0m\u001b[91mtal   Spen\u001b[0m\u001b[91mt \u001b[0m\u001b[91m   \u001b[0m\u001b[91mLeft  S\u001b[0m\u001b[91mpeed\u001b[0m\u001b[91m\n\r  0  \u001b[0m\u001b[91m   \u001b[0m\u001b[91m0    0\u001b[0m\u001b[91m   \u001b[0m\u001b[91m  0 \u001b[0m\u001b[91m   \u001b[0m\u001b[91m0   \u001b[0m\u001b[91m  0\u001b[0m\u001b[91m    \u001b[0m\u001b[91m  \u001b[0m\u001b[91m0  \u001b[0m\u001b[91m \u001b[0m\u001b[91m   0\u001b[0m\u001b[91m -\u001b[0m\u001b[91m-:-\u001b[0m\u001b[91m-:-\u001b[0m\u001b[91m- --\u001b[0m\u001b[91m:--:-- --:--:--     0\u001b[0m\u001b[91m\r100 2329k  100 2329k    0 \u001b[0m\u001b[91m    0  5979k      0 --:--:-- --:--:-- --\u001b[0m\u001b[91m:--:-- 5988k\n\u001b[0m'/tmp/mysql-connector-java-8.0.20.jar' -> '/archiva/lib/mysql-connector-java-8.0.20.jar'\n'/archiva/logs' -> '/archiva-templates/logs'\n'/archiva/conf' -> '/archiva-templates/conf'\n'/archiva/temp' -> '/archiva-templates/temp'\n'/tmp/jetty-template.xml' -> '/archiva-templates/jetty-conf/jetty-template.xml'\n'/tmp/derby-db-fragment.xml' -> '/archiva-templates/jetty-conf/derby-db-fragment.xml'\n'/tmp/mysql-db-fragment.xml' -> '/archiva-templates/jetty-conf/mysql-db-fragment.xml'\nRemoving intermediate container 266856a60a7a\n ---> 922a53a0d394\nStep 9/14 : EXPOSE 8080/tcp\n ---> Running in e8c37dce9042\nRemoving intermediate container e8c37dce9042\n ---> c9d1db8e9964\nStep 10/14 : HEALTHCHECK CMD /healthcheck.sh\n ---> Running in a15039dae519\nRemoving intermediate container a15039dae519\n ---> f8ad2c2e1147\nStep 11/14 : USER archiva\n ---> Running in f89a772c7e8f\nRemoving intermediate container f89a772c7e8f\n ---> cef64dfaedbf\nStep 12/14 : VOLUME /archiva-data\n ---> Running in d90a2368bc22\nRemoving intermediate container d90a2368bc22\n ---> 359d2bf4eef8\nStep 13/14 : STOPSIGNAL SIGINT\n ---> Running in d04fd4faa70b\nRemoving intermediate container d04fd4faa70b\n ---> 1006bfd2c842\nStep 14/14 : ENTRYPOINT [ \"/entrypoint.sh\" ]\n ---> Running in 70f91e0ff948\nRemoving intermediate container 70f91e0ff948\n ---> 33288fd201fc\nSuccessfully built 33288fd201fc\nSuccessfully tagged docker-archiva:latest\n","stderr":"","imageSize":319038743},"repair":{"startTime":1673175285140,"endTime":1673175285200,"violations":[{"name":"apkAddUseNoCache","position":{"start":6,"end":6,"columnStart":1,"columnEnd":18}}],"repairedDockerfile":"FROM eclipse-temurin:8-jdk-alpine\nMAINTAINER Xetus OSS <xetusoss@xetus.com>\n\n# Add the archiva user and group with a specific UID/GUI to ensure\nRUN addgroup --gid 1000 archiva &&\\\n\tadduser --system -u 1000 -G archiva archiva && \\\n\tapk add --no-cache bash curl\n\n# Set archiva-base as the root directory we will symlink out of.\nENV ARCHIVA_HOME /archiva\nENV ARCHIVA_BASE /archiva-data\nARG BUILD_SNAPSHOT_RELEASE\n\n# Add local scripts\nADD files /tmp\n\n# Perform most initialization actions in this layer\nRUN chmod +x /tmp/resource-retriever.sh &&\\\n\t/tmp/resource-retriever.sh &&\\\n\trm /tmp/resource-retriever.sh &&\\\n\tchmod +x /tmp/setup.sh &&\\\n\t/tmp/setup.sh &&\\\n\trm /tmp/setup.sh\n\n# Standard web ports exposted\nEXPOSE 8080/tcp\n\nHEALTHCHECK CMD /healthcheck.sh\n\n# Switch to the archiva user\nUSER archiva\n\n# The volume for archiva\nVOLUME /archiva-data\n\n# Use SIGINT for stopping\nSTOPSIGNAL SIGINT\n\n# Use our custom entrypoint\nENTRYPOINT [ \"/entrypoint.sh\" ]"},"repairedBuild":{"startTime":1673175285393,"endTime":1673175304645,"error":null,"stdout":"Sending build context to Docker daemon  56.83kB\r\r\nStep 1/14 : FROM eclipse-temurin:8-jdk-alpine\n ---> c99b6a870e03\nStep 2/14 : MAINTAINER Xetus OSS <xetusoss@xetus.com>\n ---> Running in 723748f44d03\nRemoving intermediate container 723748f44d03\n ---> a80a943fad9d\nStep 3/14 : RUN addgroup --gid 1000 archiva &&\tadduser --system -u 1000 -G archiva archiva && \tapk add --no-cache bash curl\n ---> Running in ed0411879165\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.17/community/x86_64/APKINDEX.tar.gz\n(1/8) Installing ncurses-terminfo-base (6.3_p20221119-r0)\n(2/8) Installing ncurses-libs (6.3_p20221119-r0)\n(3/8) Installing readline (8.2.0-r0)\n(4/8) Installing bash (5.2.15-r0)\nExecuting bash-5.2.15-r0.post-install\n(5/8) Installing ca-certificates (20220614-r3)\n(6/8) Installing nghttp2-libs (1.51.0-r0)\n(7/8) Installing libcurl (7.87.0-r0)\n(8/8) Installing curl (7.87.0-r0)\nExecuting busybox-1.35.0-r29.trigger\nExecuting ca-certificates-20220614-r3.trigger\nOK: 36 MiB in 37 packages\nRemoving intermediate container ed0411879165\n ---> 42f5bd165d3b\nStep 4/14 : ENV ARCHIVA_HOME /archiva\n ---> Running in 2ec130912c26\nRemoving intermediate container 2ec130912c26\n ---> a53145f19733\nStep 5/14 : ENV ARCHIVA_BASE /archiva-data\n ---> Running in 978fa4e6d4ee\nRemoving intermediate container 978fa4e6d4ee\n ---> 102d8177a92d\nStep 6/14 : ARG BUILD_SNAPSHOT_RELEASE\n ---> Running in 698b24e3ec07\nRemoving intermediate container 698b24e3ec07\n ---> da8c52be27db\nStep 7/14 : ADD files /tmp\n ---> 8c6f1d766885\nStep 8/14 : RUN chmod +x /tmp/resource-retriever.sh &&\t/tmp/resource-retriever.sh &&\trm /tmp/resource-retriever.sh &&\tchmod +x /tmp/setup.sh &&\t/tmp/setup.sh &&\trm /tmp/setup.sh\n ---> Running in db8d3296d251\n\u001b[91m  % Total    % Received % Xfe\u001b[0m\u001b[91mrd  Average Speed   Time    Time     Time\u001b[0m\u001b[91m  Current\n       \u001b[0m\u001b[91m      \u001b[0m\u001b[91m     \u001b[0m\u001b[91m  \u001b[0m\u001b[91m    \u001b[0m\u001b[91m \u001b[0m\u001b[91m    \u001b[0m\u001b[91m  \u001b[0m\u001b[91m  \u001b[0m\u001b[91mDlo\u001b[0m\u001b[91mad  Up\u001b[0m\u001b[91mlo\u001b[0m\u001b[91mad\u001b[0m\u001b[91m   T\u001b[0m\u001b[91mo\u001b[0m\u001b[91mtal  \u001b[0m\u001b[91m Spe\u001b[0m\u001b[91mnt  \u001b[0m\u001b[91m  \u001b[0m\u001b[91mLef\u001b[0m\u001b[91mt  S\u001b[0m\u001b[91mpe\u001b[0m\u001b[91med\n\u001b[0m\u001b[91m\r  0     0  \u001b[0m\u001b[91m  0 \u001b[0m\u001b[91m    0 \u001b[0m\u001b[91m  \u001b[0m\u001b[91m 0     0 \u001b[0m\u001b[91m  \u001b[0m\u001b[91m   0\u001b[0m\u001b[91m   \u001b[0m\u001b[91m   \u001b[0m\u001b[91m0 -\u001b[0m\u001b[91m-:-\u001b[0m\u001b[91m-\u001b[0m\u001b[91m:-- \u001b[0m\u001b[91m--\u001b[0m\u001b[91m:--\u001b[0m\u001b[91m:-- -\u001b[0m\u001b[91m-:\u001b[0m\u001b[91m--:-- \u001b[0m\u001b[91m  \u001b[0m\u001b[91m  0\u001b[0m\u001b[91m\r100   162  100   162    0     0    532\u001b[0m\u001b[91m      0 --:-\u001b[0m\u001b[91m-:-- --:--\u001b[0m\u001b[91m:-- --:--\u001b[0m\u001b[91m:--\u001b[0m\u001b[91m   534\n\u001b[0mDownloading archiva from https://downloads.apache.org/archiva/2.2.8/binaries/apache-archiva-2.2.8-bin.tar.gz\n\u001b[91m  % Total    % Received % Xfer\u001b[0m\u001b[91md  Average Speed  \u001b[0m\u001b[91m Time \u001b[0m\u001b[91m   Time  \u001b[0m\u001b[91m   Time  Current\u001b[0m\u001b[91m\n  \u001b[0m\u001b[91m                   \u001b[0m\u001b[91m         \u001b[0m\u001b[91m   Dlo\u001b[0m\u001b[91mad \u001b[0m\u001b[91m Upl\u001b[0m\u001b[91moad\u001b[0m\u001b[91m   Tot\u001b[0m\u001b[91mal   S\u001b[0m\u001b[91mpen\u001b[0m\u001b[91mt    L\u001b[0m\u001b[91meft\u001b[0m\u001b[91m  S\u001b[0m\u001b[91mpeed\n\r  0     0    0   \u001b[0m\u001b[91m  0    0    \u001b[0m\u001b[91m 0    \u001b[0m\u001b[91m  0\u001b[0m\u001b[91m    \u001b[0m\u001b[91m  0\u001b[0m\u001b[91m -\u001b[0m\u001b[91m-:\u001b[0m\u001b[91m--:\u001b[0m\u001b[91m-- --:\u001b[0m\u001b[91m--:\u001b[0m\u001b[91m-- -\u001b[0m\u001b[91m-:--\u001b[0m\u001b[91m:--     \u001b[0m\u001b[91m0\u001b[0m\u001b[91m\r  1 64.5M    1  960k    0\u001b[0m\u001b[91m     0  2116k      0\u001b[0m\u001b[91m  0:00:3\u001b[0m\u001b[91m1 --:--:--\u001b[0m\u001b[91m  0:00:31 2114\u001b[0m\u001b[91mk\u001b[0m\u001b[91m\r 82 64.5M   82 53.0M    0     0  36.8M      0  0:00:01  0:00:\u001b[0m\u001b[91m01 --:--:-- 36.8M\u001b[0m\u001b[91m\r100 64.5M  100 64.5M    0     0  39.4\u001b[0m\u001b[91mM      0  0:00:01\u001b[0m\u001b[91m  0:00:01 --:--:--\u001b[0m\u001b[91m 39.4M\n\u001b[0mARCHIVA_RELEASE_FILENAME=apache-archiva-2.2.8-bin.tar.gz\nremoved '/tmp/apache-archiva-2.2.8-bin.tar.gz'\n\u001b[91m  % Total    % Recei\u001b[0m\u001b[91mved % Xfe\u001b[0m\u001b[91mrd  \u001b[0m\u001b[91mAver\u001b[0m\u001b[91mage \u001b[0m\u001b[91mSpeed   Time    \u001b[0m\u001b[91mTime    \u001b[0m\u001b[91m Time  Cu\u001b[0m\u001b[91mrrent\n   \u001b[0m\u001b[91m        \u001b[0m\u001b[91m                \u001b[0m\u001b[91m      Dload  \u001b[0m\u001b[91mUpload\u001b[0m\u001b[91m   Total   Spent  \u001b[0m\u001b[91m  Left  S\u001b[0m\u001b[91mpeed\n\r  0 \u001b[0m\u001b[91m   \u001b[0m\u001b[91m 0 \u001b[0m\u001b[91m   \u001b[0m\u001b[91m0   \u001b[0m\u001b[91m  0\u001b[0m\u001b[91m    0  \u001b[0m\u001b[91m   \u001b[0m\u001b[91m0      0\u001b[0m\u001b[91m      0 --:-\u001b[0m\u001b[91m-:-- --:--:-- --:--\u001b[0m\u001b[91m:--     0\u001b[0m\u001b[91m\r  1 2329k    1 43838    0     0   145k      0  0:0\u001b[0m\u001b[91m0:16 --:-\u001b[0m\u001b[91m-:--  0:00:16 \u001b[0m\u001b[91m 144k\u001b[0m\u001b[91m\r100 2329k  100 2329k    0     0  6909k      0\u001b[0m\u001b[91m --:--:-- --:--:-- --:--:-- 6\u001b[0m\u001b[91m913k\n\u001b[0m'/tmp/mysql-connector-java-8.0.20.jar' -> '/archiva/lib/mysql-connector-java-8.0.20.jar'\n'/archiva/logs' -> '/archiva-templates/logs'\n'/archiva/conf' -> '/archiva-templates/conf'\n'/archiva/temp' -> '/archiva-templates/temp'\n'/tmp/jetty-template.xml' -> '/archiva-templates/jetty-conf/jetty-template.xml'\n'/tmp/derby-db-fragment.xml' -> '/archiva-templates/jetty-conf/derby-db-fragment.xml'\n'/tmp/mysql-db-fragment.xml' -> '/archiva-templates/jetty-conf/mysql-db-fragment.xml'\nRemoving intermediate container db8d3296d251\n ---> d04618cca63a\nStep 9/14 : EXPOSE 8080/tcp\n ---> Running in ac0013c0e164\nRemoving intermediate container ac0013c0e164\n ---> 6ef6e465506e\nStep 10/14 : HEALTHCHECK CMD /healthcheck.sh\n ---> Running in 9e7f8d7b280f\nRemoving intermediate container 9e7f8d7b280f\n ---> 885fb600bdf7\nStep 11/14 : USER archiva\n ---> Running in 8b425cefafc4\nRemoving intermediate container 8b425cefafc4\n ---> 1e3f5885c911\nStep 12/14 : VOLUME /archiva-data\n ---> Running in c23fcc7550cb\nRemoving intermediate container c23fcc7550cb\n ---> 6dd0856b9962\nStep 13/14 : STOPSIGNAL SIGINT\n ---> Running in 9098bbdfa7a5\nRemoving intermediate container 9098bbdfa7a5\n ---> a91184d4b03f\nStep 14/14 : ENTRYPOINT [ \"/entrypoint.sh\" ]\n ---> Running in d9c2b512591b\nRemoving intermediate container d9c2b512591b\n ---> 333cf493f278\nSuccessfully built 333cf493f278\nSuccessfully tagged docker-archiva:latest\n","stderr":"","imageSize":316454752}}