{"repository":"https://github.com/katosys/portus","dockerfilePath":"Dockerfile","startTime":1672237626718,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/katosys/portus'...\n","error":null,"commit":"7f2705db8c5b4d296e33121e4a4777133087398b"},"originalBuild":{"startTimestamp":1672237627488,"endTimestamp":1672237697893,"error":null,"stdout":"Sending build context to Docker daemon  143.4kB\r\r\nStep 1/8 : FROM alpine:3.5\n ---> f80194ae2e0c\nStep 2/8 : MAINTAINER Marc Villacorta Morera <marc.villacorta@gmail.com>\n ---> Running in d32712d262d1\nRemoving intermediate container d32712d262d1\n ---> 944d2df3f144\nStep 3/8 : ENV PORTUS_VERSION=\"2.2.0\"     NOKOGIRI_USE_SYSTEM_LIBRARIES=\"1\"\n ---> Running in d5dc6fe0fbe3\nRemoving intermediate container d5dc6fe0fbe3\n ---> b1566aa97943\nStep 4/8 : RUN apk --no-cache add -U -t dev git gcc make musl-dev libxml2-dev     libxslt-dev mariadb-dev libressl-dev libffi-dev curl-dev     && apk --no-cache add -U bash ruby-bundler ruby-dev nodejs tzdata     libxslt mariadb-libs mariadb-client libressl ruby-io-console     ruby-bigdecimal mariadb-client-libs libcurl     && echo 'gem: --verbose --no-document' > /etc/gemrc; cd /tmp     && git clone https://github.com/SUSE/Portus.git .     && git checkout ${PORTUS_VERSION} -b build; mkdir /portus     && git archive ${PORTUS_VERSION} | tar -xC /portus     && git rev-parse --short HEAD > /portus/VERSION; cd /portus     && sed -i 's/mysql2 (0.3.18)/mysql2 (0.4.4)/' Gemfile.lock     && gem update --no-document --quiet --system     && bundle install --retry=3 --no-cache --clean && gem cleanup     && apk del --purge dev; bash -c \"rm -rf /{tmp,root}/{*,.??*}\"     && rm -rf /usr/lib/ruby/gems/*/cache/* /var/cache/apk/*\n ---> Running in 86f308d89c61\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.5/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.5/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.5/community/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.5/community/x86_64/APKINDEX.tar.gz\n(1/39) Installing ca-certificates (20161130-r1)\n(2/39) Installing libssh2 (1.7.0-r2)\n(3/39) Installing libcurl (7.61.1-r1)\n(4/39) Installing expat (2.2.0-r1)\n(5/39) Installing pcre (8.39-r0)\n(6/39) Installing git (2.11.3-r2)\n(7/39) Installing binutils-libs (2.27-r1)\n(8/39) Installing binutils (2.27-r1)\n(9/39) Installing gmp (6.1.1-r0)\n(10/39) Installing isl (0.17.1-r0)\n(11/39) Installing libgomp (6.2.1-r1)\n(12/39) Installing libatomic (6.2.1-r1)\n(13/39) Installing pkgconf (1.0.2-r0)\n(14/39) Installing libgcc (6.2.1-r1)\n(15/39) Installing mpfr3 (3.1.5-r0)\n(16/39) Installing mpc1 (1.0.3-r0)\n(17/39) Installing libstdc++ (6.2.1-r1)\n(18/39) Installing gcc (6.2.1-r1)\n(19/39) Installing make (4.2.1-r0)\n(20/39) Installing musl-dev (1.1.15-r8)\n(21/39) Installing zlib-dev (1.2.11-r0)\n(22/39) Installing libxml2 (2.9.8-r1)\n(23/39) Installing libxml2-dev (2.9.8-r1)\n(24/39) Installing libgpg-error (1.24-r0)\n(25/39) Installing libgcrypt (1.7.10-r0)\n(26/39) Installing libxslt (1.1.29-r1)\n(27/39) Installing libxslt-dev (1.1.29-r1)\n(28/39) Installing libressl2.4-libtls (2.4.4-r0)\n(29/39) Installing libressl-dev (2.4.4-r0)\n(30/39) Installing mariadb-common (10.1.32-r0)\n(31/39) Installing mariadb-client-libs (10.1.32-r0)\n(32/39) Installing libaio (0.3.110-r0)\n(33/39) Installing mariadb-libs (10.1.32-r0)\n(34/39) Installing mariadb-dev (10.1.32-r0)\n(35/39) Installing libffi (3.2.1-r2)\n(36/39) Installing libffi-dev (3.2.1-r2)\n(37/39) Installing libssh2-dev (1.7.0-r2)\n(38/39) Installing curl-dev (7.61.1-r1)\n(39/39) Installing dev (0)\nExecuting busybox-1.25.1-r2.trigger\nExecuting ca-certificates-20161130-r1.trigger\nOK: 353 MiB in 50 packages\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.5/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.5/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.5/community/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.5/community/x86_64/APKINDEX.tar.gz\n(1/23) Installing ncurses-terminfo-base (6.0_p20171125-r1)\n(2/23) Installing ncurses-terminfo (6.0_p20171125-r1)\n(3/23) Installing ncurses-libs (6.0_p20171125-r1)\n(4/23) Installing readline (6.3.008-r4)\n(5/23) Installing bash (4.3.46-r5)\nExecuting bash-4.3.46-r5.post-install\n(6/23) Installing libressl (2.4.4-r0)\n(7/23) Installing mariadb-client (10.1.32-r0)\n(8/23) Installing libcrypto1.0 (1.0.2q-r0)\n(9/23) Installing http-parser (2.7.1-r0)\n(10/23) Installing libssl1.0 (1.0.2q-r0)\n(11/23) Installing libuv (1.9.1-r0)\n(12/23) Installing nodejs (6.9.5-r2)\n(13/23) Installing gdbm (1.12-r0)\n(14/23) Installing yaml (0.1.7-r0)\n(15/23) Installing ruby-libs (2.3.8-r0)\n(16/23) Installing ruby (2.3.8-r0)\n(17/23) Installing ruby-bigdecimal (2.3.8-r0)\n(18/23) Installing ruby-io-console (2.3.8-r0)\n(19/23) Installing ruby-bundler (1.13.4-r0)\n(20/23) Installing libgmpxx (6.1.1-r0)\n(21/23) Installing gmp-dev (6.1.1-r0)\n(22/23) Installing ruby-dev (2.3.8-r0)\n(23/23) Installing tzdata (2016i-r0)\nExecuting busybox-1.25.1-r2.trigger\nExecuting ca-certificates-20161130-r1.trigger\nOK: 451 MiB in 73 packages\n\u001b[91mCloning into '.'...\n\u001b[0m\u001b[91mSwitched to a new branch 'build'\n\u001b[0m\u001b[91mERROR:  Error installing rubygems-update:\n\trubygems-update requires Ruby version >= 2.6.0.\n\u001b[0m\u001b[91mERROR:  While executing gem ... (NoMethodError)\n    undefined method `version' for nil:NilClass\n\u001b[0mUpdating rubygems-update\nRemoving intermediate container 86f308d89c61\n ---> abb6d435482b\nStep 5/8 : ADD rootfs /\n ---> b07effba6333\nStep 6/8 : WORKDIR /portus\n ---> Running in 8f0c8e3acfcf\nRemoving intermediate container 8f0c8e3acfcf\n ---> 9b756be3fce6\nStep 7/8 : EXPOSE 80 443\n ---> Running in 212d14b1ce48\nRemoving intermediate container 212d14b1ce48\n ---> 4de5e6ba508b\nStep 8/8 : ENTRYPOINT [\"/init\"]\n ---> Running in 64c279002617\nRemoving intermediate container 64c279002617\n ---> 8305927085e2\nSuccessfully built 8305927085e2\nSuccessfully tagged portus:latest\n","stderr":"","imageSize":452471914},"repair":{"violations":[{"name":"gemUpdateSystemRmRootGem","position":{"start":29,"end":29,"columnStart":7,"columnEnd":48}}],"repairedDockerfile":"#------------------------------------------------------------------------------\n# Set the base image for subsequent instructions:\n#------------------------------------------------------------------------------\n\nFROM alpine:3.5\nMAINTAINER Marc Villacorta Morera <marc.villacorta@gmail.com>\n\n#------------------------------------------------------------------------------\n# Environment variables:\n#------------------------------------------------------------------------------\n\nENV PORTUS_VERSION=\"2.2.0\" \\\n    NOKOGIRI_USE_SYSTEM_LIBRARIES=\"1\"\n\n#------------------------------------------------------------------------------\n# Install:\n#------------------------------------------------------------------------------\n\nRUN apk --no-cache add -U -t dev git gcc make musl-dev libxml2-dev \\\n    libxslt-dev mariadb-dev libressl-dev libffi-dev curl-dev \\\n    && apk --no-cache add -U bash ruby-bundler ruby-dev nodejs tzdata \\\n    libxslt mariadb-libs mariadb-client libressl ruby-io-console \\\n    ruby-bigdecimal mariadb-client-libs libcurl \\\n    && echo 'gem: --verbose --no-document' > /etc/gemrc; cd /tmp \\\n    && git clone https://github.com/SUSE/Portus.git . \\\n    && git checkout ${PORTUS_VERSION} -b build; mkdir /portus \\\n    && git archive ${PORTUS_VERSION} | tar -xC /portus \\\n    && git rev-parse --short HEAD > /portus/VERSION; cd /portus \\\n    && sed -i 's/mysql2 (0.3.18)/mysql2 (0.4.4)/' Gemfile.lock \\\n    && gem update --no-document --quiet --system \\\n    && bundle install --retry=3 --no-cache --clean && gem cleanup \\\n    && apk del --purge dev; bash -c \"rm -rf /{tmp,root}/{*,.??*}\" \\\n    && rm -rf /usr/lib/ruby/gems/*/cache/* /var/cache/apk/*\n\n#------------------------------------------------------------------------------\n# Populate root file system:\n#------------------------------------------------------------------------------\n\nADD rootfs /\n\n#------------------------------------------------------------------------------\n# Expose ports and entrypoint:\n#------------------------------------------------------------------------------\n\nWORKDIR /portus\nEXPOSE 80 443\nENTRYPOINT [\"/init\"]\n"},"repairedBuild":{"startTimestamp":1672237698852,"endTimestamp":1672237773535,"error":null,"stdout":"Sending build context to Docker daemon  143.4kB\r\r\nStep 1/8 : FROM alpine:3.5\n ---> f80194ae2e0c\nStep 2/8 : MAINTAINER Marc Villacorta Morera <marc.villacorta@gmail.com>\n ---> Running in 380091c19912\nRemoving intermediate container 380091c19912\n ---> 3a83a1050e4a\nStep 3/8 : ENV PORTUS_VERSION=\"2.2.0\"     NOKOGIRI_USE_SYSTEM_LIBRARIES=\"1\"\n ---> Running in 8c0e755df794\nRemoving intermediate container 8c0e755df794\n ---> a2bdef966e73\nStep 4/8 : RUN apk --no-cache add -U -t dev git gcc make musl-dev libxml2-dev     libxslt-dev mariadb-dev libressl-dev libffi-dev curl-dev     && apk --no-cache add -U bash ruby-bundler ruby-dev nodejs tzdata     libxslt mariadb-libs mariadb-client libressl ruby-io-console     ruby-bigdecimal mariadb-client-libs libcurl     && echo 'gem: --verbose --no-document' > /etc/gemrc; cd /tmp     && git clone https://github.com/SUSE/Portus.git .     && git checkout ${PORTUS_VERSION} -b build; mkdir /portus     && git archive ${PORTUS_VERSION} | tar -xC /portus     && git rev-parse --short HEAD > /portus/VERSION; cd /portus     && sed -i 's/mysql2 (0.3.18)/mysql2 (0.4.4)/' Gemfile.lock     && gem update --no-document --quiet --system     && bundle install --retry=3 --no-cache --clean && gem cleanup     && apk del --purge dev; bash -c \"rm -rf /{tmp,root}/{*,.??*}\"     && rm -rf /usr/lib/ruby/gems/*/cache/* /var/cache/apk/*\n ---> Running in 75efc594b91f\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.5/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.5/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.5/community/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.5/community/x86_64/APKINDEX.tar.gz\n(1/39) Installing ca-certificates (20161130-r1)\n(2/39) Installing libssh2 (1.7.0-r2)\n(3/39) Installing libcurl (7.61.1-r1)\n(4/39) Installing expat (2.2.0-r1)\n(5/39) Installing pcre (8.39-r0)\n(6/39) Installing git (2.11.3-r2)\n(7/39) Installing binutils-libs (2.27-r1)\n(8/39) Installing binutils (2.27-r1)\n(9/39) Installing gmp (6.1.1-r0)\n(10/39) Installing isl (0.17.1-r0)\n(11/39) Installing libgomp (6.2.1-r1)\n(12/39) Installing libatomic (6.2.1-r1)\n(13/39) Installing pkgconf (1.0.2-r0)\n(14/39) Installing libgcc (6.2.1-r1)\n(15/39) Installing mpfr3 (3.1.5-r0)\n(16/39) Installing mpc1 (1.0.3-r0)\n(17/39) Installing libstdc++ (6.2.1-r1)\n(18/39) Installing gcc (6.2.1-r1)\n(19/39) Installing make (4.2.1-r0)\n(20/39) Installing musl-dev (1.1.15-r8)\n(21/39) Installing zlib-dev (1.2.11-r0)\n(22/39) Installing libxml2 (2.9.8-r1)\n(23/39) Installing libxml2-dev (2.9.8-r1)\n(24/39) Installing libgpg-error (1.24-r0)\n(25/39) Installing libgcrypt (1.7.10-r0)\n(26/39) Installing libxslt (1.1.29-r1)\n(27/39) Installing libxslt-dev (1.1.29-r1)\n(28/39) Installing libressl2.4-libtls (2.4.4-r0)\n(29/39) Installing libressl-dev (2.4.4-r0)\n(30/39) Installing mariadb-common (10.1.32-r0)\n(31/39) Installing mariadb-client-libs (10.1.32-r0)\n(32/39) Installing libaio (0.3.110-r0)\n(33/39) Installing mariadb-libs (10.1.32-r0)\n(34/39) Installing mariadb-dev (10.1.32-r0)\n(35/39) Installing libffi (3.2.1-r2)\n(36/39) Installing libffi-dev (3.2.1-r2)\n(37/39) Installing libssh2-dev (1.7.0-r2)\n(38/39) Installing curl-dev (7.61.1-r1)\n(39/39) Installing dev (0)\nExecuting busybox-1.25.1-r2.trigger\nExecuting ca-certificates-20161130-r1.trigger\nOK: 353 MiB in 50 packages\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.5/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.5/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.5/community/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.5/community/x86_64/APKINDEX.tar.gz\n(1/23) Installing ncurses-terminfo-base (6.0_p20171125-r1)\n(2/23) Installing ncurses-terminfo (6.0_p20171125-r1)\n(3/23) Installing ncurses-libs (6.0_p20171125-r1)\n(4/23) Installing readline (6.3.008-r4)\n(5/23) Installing bash (4.3.46-r5)\nExecuting bash-4.3.46-r5.post-install\n(6/23) Installing libressl (2.4.4-r0)\n(7/23) Installing mariadb-client (10.1.32-r0)\n(8/23) Installing libcrypto1.0 (1.0.2q-r0)\n(9/23) Installing http-parser (2.7.1-r0)\n(10/23) Installing libssl1.0 (1.0.2q-r0)\n(11/23) Installing libuv (1.9.1-r0)\n(12/23) Installing nodejs (6.9.5-r2)\n(13/23) Installing gdbm (1.12-r0)\n(14/23) Installing yaml (0.1.7-r0)\n(15/23) Installing ruby-libs (2.3.8-r0)\n(16/23) Installing ruby (2.3.8-r0)\n(17/23) Installing ruby-bigdecimal (2.3.8-r0)\n(18/23) Installing ruby-io-console (2.3.8-r0)\n(19/23) Installing ruby-bundler (1.13.4-r0)\n(20/23) Installing libgmpxx (6.1.1-r0)\n(21/23) Installing gmp-dev (6.1.1-r0)\n(22/23) Installing ruby-dev (2.3.8-r0)\n(23/23) Installing tzdata (2016i-r0)\nExecuting busybox-1.25.1-r2.trigger\nExecuting ca-certificates-20161130-r1.trigger\nOK: 451 MiB in 73 packages\n\u001b[91mCloning into '.'...\n\u001b[0m\u001b[91mSwitched to a new branch 'build'\n\u001b[0m\u001b[91mERROR:  Error installing rubygems-update:\n\trubygems-update requires Ruby version >= 2.6.0.\n\u001b[0m\u001b[91mERROR:  While executing gem ... (NoMethodError)\n    undefined method `version' for nil:NilClass\n\u001b[0mUpdating rubygems-update\nRemoving intermediate container 75efc594b91f\n ---> 68b52bab3240\nStep 5/8 : ADD rootfs /\n ---> b9a5b1131d32\nStep 6/8 : WORKDIR /portus\n ---> Running in e68a5bdaad5d\nRemoving intermediate container e68a5bdaad5d\n ---> b9d4c5a7c174\nStep 7/8 : EXPOSE 80 443\n ---> Running in f86264d4fb15\nRemoving intermediate container f86264d4fb15\n ---> b50ebbf30811\nStep 8/8 : ENTRYPOINT [\"/init\"]\n ---> Running in 69fa493f97b3\nRemoving intermediate container 69fa493f97b3\n ---> 2be4875a319f\nSuccessfully built 2be4875a319f\nSuccessfully tagged portus:latest\n","stderr":"","imageSize":452471914},"endTime":1672237774165}