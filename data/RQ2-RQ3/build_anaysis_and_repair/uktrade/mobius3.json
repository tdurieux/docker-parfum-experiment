{"repository":"https://github.com/uktrade/mobius3","dockerfilePath":"Dockerfile","startTime":1672434596847,"clone":{"stdout":"","stderr":"Cloning into '/tmp/dinghy-analysis/uktrade/mobius3'...\n","error":null,"commit":"2001dfea028f43a7eef581d2514e500ffad63535"},"originalBuild":{"startTimestamp":1672434597704,"endTimestamp":1672434620530,"error":null,"stdout":"Sending build context to Docker daemon  303.6kB\r\r\nStep 1/9 : FROM alpine:3.16\n3.16: Pulling from library/alpine\nca7dd9ec2225: Pulling fs layer\nca7dd9ec2225: Verifying Checksum\nca7dd9ec2225: Download complete\nca7dd9ec2225: Pull complete\nDigest: sha256:b95359c2505145f16c6aa384f9cc74eeff78eb36d308ca4fd902eeeb0a0b161b\nStatus: Downloaded newer image for alpine:3.16\n ---> bfe296a52501\nStep 2/9 : COPY requirements.txt /app/\n ---> 177f68af7da4\nStep 3/9 : RUN \tapk add --no-cache \t\tpy3-pip \t\tpython3 && \tpip install \t\t-r /app/requirements.txt\n ---> Running in 0cb514c31f69\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/community/x86_64/APKINDEX.tar.gz\n(1/25) Installing libbz2 (1.0.8-r1)\n(2/25) Installing expat (2.5.0-r0)\n(3/25) Installing libffi (3.4.2-r1)\n(4/25) Installing gdbm (1.23-r0)\n(5/25) Installing xz-libs (5.2.5-r1)\n(6/25) Installing libgcc (11.2.1_git20220219-r2)\n(7/25) Installing libstdc++ (11.2.1_git20220219-r2)\n(8/25) Installing mpdecimal (2.5.1-r1)\n(9/25) Installing ncurses-terminfo-base (6.3_p20220521-r0)\n(10/25) Installing ncurses-libs (6.3_p20220521-r0)\n(11/25) Installing readline (8.1.2-r0)\n(12/25) Installing sqlite-libs (3.38.5-r0)\n(13/25) Installing python3 (3.10.9-r0)\n(14/25) Installing py3-contextlib2 (21.6.0-r2)\n(15/25) Installing py3-tomli (2.0.1-r1)\n(16/25) Installing py3-pep517 (0.12.0-r2)\n(17/25) Installing py3-six (1.16.0-r1)\n(18/25) Installing py3-retrying (1.3.3-r3)\n(19/25) Installing py3-appdirs (1.4.4-r3)\n(20/25) Installing py3-more-itertools (8.13.0-r0)\n(21/25) Installing py3-ordered-set (4.0.2-r3)\n(22/25) Installing py3-parsing (2.4.7-r3)\n(23/25) Installing py3-packaging (21.3-r0)\n(24/25) Installing py3-setuptools (59.4.0-r0)\n(25/25) Installing py3-pip (22.1.1-r0)\nExecuting busybox-1.35.0-r17.trigger\nOK: 77 MiB in 39 packages\nCollecting fifolock==0.0.20\n  Downloading fifolock-0.0.20-py3-none-any.whl (3.8 kB)\nCollecting httpx==0.23.0\n  Downloading httpx-0.23.0-py3-none-any.whl (84 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 84.8/84.8 kB 7.4 MB/s eta 0:00:00\nCollecting sentry-sdk==1.11.1\n  Downloading sentry_sdk-1.11.1-py2.py3-none-any.whl (168 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 169.0/169.0 kB 14.6 MB/s eta 0:00:00\nCollecting httpcore<0.16.0,>=0.15.0\n  Downloading httpcore-0.15.0-py3-none-any.whl (68 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 68.4/68.4 kB 5.4 MB/s eta 0:00:00\nCollecting certifi\n  Downloading certifi-2022.12.7-py3-none-any.whl (155 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 155.3/155.3 kB 14.7 MB/s eta 0:00:00\nCollecting rfc3986[idna2008]<2,>=1.3\n  Downloading rfc3986-1.5.0-py2.py3-none-any.whl (31 kB)\nCollecting sniffio\n  Downloading sniffio-1.3.0-py3-none-any.whl (10 kB)\nCollecting urllib3>=1.26.11\n  Downloading urllib3-1.26.13-py2.py3-none-any.whl (140 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 140.6/140.6 kB 13.0 MB/s eta 0:00:00\nCollecting h11<0.13,>=0.11\n  Downloading h11-0.12.0-py3-none-any.whl (54 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 54.9/54.9 kB 4.1 MB/s eta 0:00:00\nCollecting anyio==3.*\n  Downloading anyio-3.6.2-py3-none-any.whl (80 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 80.6/80.6 kB 6.5 MB/s eta 0:00:00\nCollecting idna>=2.8\n  Downloading idna-3.4-py3-none-any.whl (61 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 61.5/61.5 kB 6.1 MB/s eta 0:00:00\nInstalling collected packages: rfc3986, urllib3, sniffio, idna, h11, fifolock, certifi, sentry-sdk, anyio, httpcore, httpx\nSuccessfully installed anyio-3.6.2 certifi-2022.12.7 fifolock-0.0.20 h11-0.12.0 httpcore-0.15.0 httpx-0.23.0 idna-3.4 rfc3986-1.5.0 sentry-sdk-1.11.1 sniffio-1.3.0 urllib3-1.26.13\n\u001b[91mWARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv\n\u001b[0mRemoving intermediate container 0cb514c31f69\n ---> ae408c6542c3\nStep 4/9 : COPY LICENSE README.md mobius3.py setup.py /app/\n ---> cd5aad987ca2\nStep 5/9 : RUN \tpip install /app && \tpip check\n ---> Running in bec018cdba10\nProcessing /app\n  Preparing metadata (setup.py): started\n  Preparing metadata (setup.py): finished with status 'done'\nRequirement already satisfied: fifolock>=0.0.20 in /usr/lib/python3.10/site-packages (from mobius3==0.0.39) (0.0.20)\nRequirement already satisfied: httpx>=0.23.0 in /usr/lib/python3.10/site-packages (from mobius3==0.0.39) (0.23.0)\nRequirement already satisfied: sentry-sdk>=1.11.1 in /usr/lib/python3.10/site-packages (from mobius3==0.0.39) (1.11.1)\nRequirement already satisfied: certifi in /usr/lib/python3.10/site-packages (from httpx>=0.23.0->mobius3==0.0.39) (2022.12.7)\nRequirement already satisfied: sniffio in /usr/lib/python3.10/site-packages (from httpx>=0.23.0->mobius3==0.0.39) (1.3.0)\nRequirement already satisfied: httpcore<0.16.0,>=0.15.0 in /usr/lib/python3.10/site-packages (from httpx>=0.23.0->mobius3==0.0.39) (0.15.0)\nRequirement already satisfied: rfc3986[idna2008]<2,>=1.3 in /usr/lib/python3.10/site-packages (from httpx>=0.23.0->mobius3==0.0.39) (1.5.0)\nRequirement already satisfied: urllib3>=1.26.11 in /usr/lib/python3.10/site-packages (from sentry-sdk>=1.11.1->mobius3==0.0.39) (1.26.13)\nRequirement already satisfied: anyio==3.* in /usr/lib/python3.10/site-packages (from httpcore<0.16.0,>=0.15.0->httpx>=0.23.0->mobius3==0.0.39) (3.6.2)\nRequirement already satisfied: h11<0.13,>=0.11 in /usr/lib/python3.10/site-packages (from httpcore<0.16.0,>=0.15.0->httpx>=0.23.0->mobius3==0.0.39) (0.12.0)\nRequirement already satisfied: idna>=2.8 in /usr/lib/python3.10/site-packages (from anyio==3.*->httpcore<0.16.0,>=0.15.0->httpx>=0.23.0->mobius3==0.0.39) (3.4)\nUsing legacy 'setup.py install' for mobius3, since package 'wheel' is not installed.\nInstalling collected packages: mobius3\n  Running setup.py install for mobius3: started\n  Running setup.py install for mobius3: finished with status 'done'\nSuccessfully installed mobius3-0.0.39\n\u001b[91mWARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv\n\u001b[0mNo broken requirements found.\nRemoving intermediate container bec018cdba10\n ---> 749510c2b4ba\nStep 6/9 : RUN \taddgroup -S mobius3 && \tadduser -S mobius3 -G mobius3\n ---> Running in b373dffde41a\nRemoving intermediate container b373dffde41a\n ---> 5a7d9e88f083\nStep 7/9 : USER mobius3\n ---> Running in 839602cdfa14\nRemoving intermediate container 839602cdfa14\n ---> adede06cc205\nStep 8/9 : RUN mkdir /home/mobius3/data\n ---> Running in 3751667fec28\nRemoving intermediate container 3751667fec28\n ---> 8bd8841e982f\nStep 9/9 : WORKDIR /home/mobius3\n ---> Running in d9027254931f\nRemoving intermediate container d9027254931f\n ---> 717ef4e51d6a\nSuccessfully built 717ef4e51d6a\nSuccessfully tagged mobius3:latest\n","stderr":"","imageSize":75834485},"repair":{"violations":[{"name":"pipUseNoCacheDir","position":{"start":7,"end":8,"columnStart":1,"columnEnd":26}},{"name":"pipUseNoCacheDir","position":{"start":12,"end":12,"columnStart":1,"columnEnd":17}}],"repairedDockerfile":"FROM alpine:3.16\n\nCOPY requirements.txt /app/\nRUN \\\n\tapk add --no-cache \\\n\t\tpy3-pip \\\n\t\tpython3 && \\\n\tpip install --no-cache-dir \\\n\t\t-r /app/requirements.txt\n\nCOPY LICENSE README.md mobius3.py setup.py /app/\nRUN \\\n\tpip install --no-cache-dir /app && \\\n\tpip check\n\nRUN \\\n\taddgroup -S mobius3 && \\\n\tadduser -S mobius3 -G mobius3\nUSER mobius3\n\nRUN mkdir /home/mobius3/data\n\nWORKDIR /home/mobius3\n"},"repairedBuild":{"startTimestamp":1672434621078,"endTimestamp":1672434644771,"error":null,"stdout":"Sending build context to Docker daemon  303.6kB\r\r\nStep 1/9 : FROM alpine:3.16\n ---> bfe296a52501\nStep 2/9 : COPY requirements.txt /app/\n ---> 75cce41468dc\nStep 3/9 : RUN \tapk add --no-cache \t\tpy3-pip \t\tpython3 && \tpip install --no-cache-dir \t\t-r /app/requirements.txt\n ---> Running in a65dc714e0b0\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/main/x86_64/APKINDEX.tar.gz\nfetch https://dl-cdn.alpinelinux.org/alpine/v3.16/community/x86_64/APKINDEX.tar.gz\n(1/25) Installing libbz2 (1.0.8-r1)\n(2/25) Installing expat (2.5.0-r0)\n(3/25) Installing libffi (3.4.2-r1)\n(4/25) Installing gdbm (1.23-r0)\n(5/25) Installing xz-libs (5.2.5-r1)\n(6/25) Installing libgcc (11.2.1_git20220219-r2)\n(7/25) Installing libstdc++ (11.2.1_git20220219-r2)\n(8/25) Installing mpdecimal (2.5.1-r1)\n(9/25) Installing ncurses-terminfo-base (6.3_p20220521-r0)\n(10/25) Installing ncurses-libs (6.3_p20220521-r0)\n(11/25) Installing readline (8.1.2-r0)\n(12/25) Installing sqlite-libs (3.38.5-r0)\n(13/25) Installing python3 (3.10.9-r0)\n(14/25) Installing py3-contextlib2 (21.6.0-r2)\n(15/25) Installing py3-tomli (2.0.1-r1)\n(16/25) Installing py3-pep517 (0.12.0-r2)\n(17/25) Installing py3-six (1.16.0-r1)\n(18/25) Installing py3-retrying (1.3.3-r3)\n(19/25) Installing py3-appdirs (1.4.4-r3)\n(20/25) Installing py3-more-itertools (8.13.0-r0)\n(21/25) Installing py3-ordered-set (4.0.2-r3)\n(22/25) Installing py3-parsing (2.4.7-r3)\n(23/25) Installing py3-packaging (21.3-r0)\n(24/25) Installing py3-setuptools (59.4.0-r0)\n(25/25) Installing py3-pip (22.1.1-r0)\nExecuting busybox-1.35.0-r17.trigger\nOK: 77 MiB in 39 packages\nCollecting fifolock==0.0.20\n  Downloading fifolock-0.0.20-py3-none-any.whl (3.8 kB)\nCollecting httpx==0.23.0\n  Downloading httpx-0.23.0-py3-none-any.whl (84 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 84.8/84.8 kB 23.8 MB/s eta 0:00:00\nCollecting sentry-sdk==1.11.1\n  Downloading sentry_sdk-1.11.1-py2.py3-none-any.whl (168 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 169.0/169.0 kB 139.9 MB/s eta 0:00:00\nCollecting httpcore<0.16.0,>=0.15.0\n  Downloading httpcore-0.15.0-py3-none-any.whl (68 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 68.4/68.4 kB 171.9 MB/s eta 0:00:00\nCollecting sniffio\n  Downloading sniffio-1.3.0-py3-none-any.whl (10 kB)\nCollecting rfc3986[idna2008]<2,>=1.3\n  Downloading rfc3986-1.5.0-py2.py3-none-any.whl (31 kB)\nCollecting certifi\n  Downloading certifi-2022.12.7-py3-none-any.whl (155 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 155.3/155.3 kB 75.7 MB/s eta 0:00:00\nCollecting urllib3>=1.26.11\n  Downloading urllib3-1.26.13-py2.py3-none-any.whl (140 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 140.6/140.6 kB 82.7 MB/s eta 0:00:00\nCollecting anyio==3.*\n  Downloading anyio-3.6.2-py3-none-any.whl (80 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 80.6/80.6 kB 230.3 MB/s eta 0:00:00\nCollecting h11<0.13,>=0.11\n  Downloading h11-0.12.0-py3-none-any.whl (54 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 54.9/54.9 kB 199.4 MB/s eta 0:00:00\nCollecting idna>=2.8\n  Downloading idna-3.4-py3-none-any.whl (61 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 61.5/61.5 kB 201.0 MB/s eta 0:00:00\nInstalling collected packages: rfc3986, urllib3, sniffio, idna, h11, fifolock, certifi, sentry-sdk, anyio, httpcore, httpx\nSuccessfully installed anyio-3.6.2 certifi-2022.12.7 fifolock-0.0.20 h11-0.12.0 httpcore-0.15.0 httpx-0.23.0 idna-3.4 rfc3986-1.5.0 sentry-sdk-1.11.1 sniffio-1.3.0 urllib3-1.26.13\n\u001b[91mWARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv\n\u001b[0mRemoving intermediate container a65dc714e0b0\n ---> c1d6795114ff\nStep 4/9 : COPY LICENSE README.md mobius3.py setup.py /app/\n ---> c79b4ffcacf3\nStep 5/9 : RUN \tpip install --no-cache-dir /app && \tpip check\n ---> Running in 228535481a65\nProcessing /app\n  Preparing metadata (setup.py): started\n  Preparing metadata (setup.py): finished with status 'done'\nRequirement already satisfied: fifolock>=0.0.20 in /usr/lib/python3.10/site-packages (from mobius3==0.0.39) (0.0.20)\nRequirement already satisfied: httpx>=0.23.0 in /usr/lib/python3.10/site-packages (from mobius3==0.0.39) (0.23.0)\nRequirement already satisfied: sentry-sdk>=1.11.1 in /usr/lib/python3.10/site-packages (from mobius3==0.0.39) (1.11.1)\nRequirement already satisfied: sniffio in /usr/lib/python3.10/site-packages (from httpx>=0.23.0->mobius3==0.0.39) (1.3.0)\nRequirement already satisfied: httpcore<0.16.0,>=0.15.0 in /usr/lib/python3.10/site-packages (from httpx>=0.23.0->mobius3==0.0.39) (0.15.0)\nRequirement already satisfied: certifi in /usr/lib/python3.10/site-packages (from httpx>=0.23.0->mobius3==0.0.39) (2022.12.7)\nRequirement already satisfied: rfc3986[idna2008]<2,>=1.3 in /usr/lib/python3.10/site-packages (from httpx>=0.23.0->mobius3==0.0.39) (1.5.0)\nRequirement already satisfied: urllib3>=1.26.11 in /usr/lib/python3.10/site-packages (from sentry-sdk>=1.11.1->mobius3==0.0.39) (1.26.13)\nRequirement already satisfied: h11<0.13,>=0.11 in /usr/lib/python3.10/site-packages (from httpcore<0.16.0,>=0.15.0->httpx>=0.23.0->mobius3==0.0.39) (0.12.0)\nRequirement already satisfied: anyio==3.* in /usr/lib/python3.10/site-packages (from httpcore<0.16.0,>=0.15.0->httpx>=0.23.0->mobius3==0.0.39) (3.6.2)\nRequirement already satisfied: idna>=2.8 in /usr/lib/python3.10/site-packages (from anyio==3.*->httpcore<0.16.0,>=0.15.0->httpx>=0.23.0->mobius3==0.0.39) (3.4)\nUsing legacy 'setup.py install' for mobius3, since package 'wheel' is not installed.\nInstalling collected packages: mobius3\n  Running setup.py install for mobius3: started\n  Running setup.py install for mobius3: finished with status 'done'\nSuccessfully installed mobius3-0.0.39\n\u001b[91mWARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv\n\u001b[0mNo broken requirements found.\nRemoving intermediate container 228535481a65\n ---> 091b377f28df\nStep 6/9 : RUN \taddgroup -S mobius3 && \tadduser -S mobius3 -G mobius3\n ---> Running in c94ec211b930\nRemoving intermediate container c94ec211b930\n ---> 3078f1b55750\nStep 7/9 : USER mobius3\n ---> Running in f8cefcf1cae3\nRemoving intermediate container f8cefcf1cae3\n ---> 74373c559990\nStep 8/9 : RUN mkdir /home/mobius3/data\n ---> Running in 9fc0b4b38cb0\nRemoving intermediate container 9fc0b4b38cb0\n ---> f87fe22d8ecd\nStep 9/9 : WORKDIR /home/mobius3\n ---> Running in 9c15ac202f38\nRemoving intermediate container 9c15ac202f38\n ---> 6536e8324d5d\nSuccessfully built 6536e8324d5d\nSuccessfully tagged mobius3:latest\n","stderr":"","imageSize":74837033},"endTime":1672434645070}