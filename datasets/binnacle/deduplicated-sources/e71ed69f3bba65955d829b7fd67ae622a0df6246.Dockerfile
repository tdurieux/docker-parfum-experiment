FROM leechcraft/ci_opensuse_factory:latest

RUN git clone https://github.com/0xd34df00d/leechcraft.git && \
	cd leechcraft && \
	mkdir build && \
	cd build && \
	cmake ../src \
		-DLIB_SUFFIX=64 \
		-DCMAKE_INSTALL_PREFIX=/usr \
		-DSTRICT_LICENSING=True \
		-DENABLE_ADVANCEDNOTIFICATIONS=True \
		-DENABLE_AGGREGATOR=True \
		-DENABLE_AGGREGATOR_WEBACCESS=True \
		-DENABLE_AUSCRIE=True \
		-DENABLE_AZOTH=True \
		-DENABLE_AZOTH_ACETAMIDE=True \
		-DENABLE_AZOTH_ASTRALITY=False \
		-DENABLE_AZOTH_OTROID=True \
		-DENABLE_AZOTH_SHX=True \
		-DENABLE_AZOTH_VELVETBIRD=True \
		-DENABLE_AZOTH_WOODPECKER=False \
		-DENABLE_AZOTH_ZHEET=False \
		-DENABLE_MEDIACALLS=False \
		-DENABLE_BLACKDASH=False \
		-DENABLE_BLASQ=True \
		-DENABLE_BLASQ_VANGOG=True \
		-DENABLE_BLASQ_SPEGNERSI=False \
		-DENABLE_BLOGIQUE=True \
		-DENABLE_CERTMGR=True \
		-DENABLE_CHOROID=False \
		-DENABLE_CPULOAD=True \
		-DENABLE_DEVMON=True \
		-DENABLE_DLNIWE=False \
		-DENABLE_DOLOZHEE=True \
		-DENABLE_DUMBEEP=True \
		-DENABLE_GACTS=True \
		-DENABLE_GLANCE=True \
		-DENABLE_GMAILNOTIFIER=True \
		-DENABLE_HARBINGER=False \
		-DENABLE_HOTSENSORS=True \
		-DENABLE_HOTSTREAMS=True \
		-DENABLE_HTTHARE=True \
		-DENABLE_IMGASTE=True \
		-DENABLE_KBSWITCH=True \
		-DENABLE_KNOWHOW=True \
		-DENABLE_KRIGSTASK=True \
		-DENABLE_LACKMAN=True \
		-DENABLE_LADS=False \
		-DENABLE_LASTFMSCROBBLE=True \
		-DENABLE_LAUGHTY=True \
		-DENABLE_LAUNCHY=True \
		-DENABLE_LEMON=True \
		-DENABLE_LHTR=True \
		-DWITH_LHTR_HTML=True \
		-DENABLE_LIZNOO=True \
		-DENABLE_LMP=True \
		-DENABLE_LMP_GRAFFITI=True \
		-DENABLE_LMP_LIBGUESS=True \
		-DENABLE_LMP_MPRIS=True \
		-DENABLE_LMP_MTPSYNC=True \
		-DENABLE_MELLONETRAY=True \
		-DENABLE_MONOCLE=True \
		-DENABLE_MONOCLE_MU=False \
		-DENABLE_MUSICZOMBIE=True \
		-DWITH_MUSICZOMBIE_CHROMAPRINT=True \
		-DENABLE_NACHEKU=False \
		-DENABLE_NETSTOREMANAGER=True \
		-DENABLE_NEWLIFE=True \
		-DENABLE_OORONEE=True \
		-DENABLE_OTLOZHU=True \
		-DENABLE_OTLOZHU_SYNC=False \
		-DENABLE_PINTAB=True \
		-DENABLE_POGOOGLUE=True \
		-DENABLE_POLEEMERY=False \
		-DENABLE_POPISHU=True \
		-DENABLE_POSHUKU_AUTOSEARCH=True \
		-DENABLE_QROSP=False \
		-DENABLE_SB2=True \
		-DENABLE_SCROBLIBRE=True \
		-DENABLE_SECMAN=True \
		-DENABLE_SNAILS=False \
		-DENABLE_SYNCER=False \
		-DENABLE_TABSESSMANAGER=True \
		-DENABLE_TABSLIST=True \
		-DENABLE_TEXTOGROOSE=True \
		-DENABLE_TORRENT=True \
		-DENABLE_BITTORRENT_GEOIP=True \
		-DENABLE_TOUCHSTREAMS=True \
		-DENABLE_TPI=True \
		-DENABLE_TWIFEE=False \
		-DENABLE_VROOBY=True \
		-DENABLE_ELEEMINATOR=True \
		-DENABLE_XPROXY=True \
		-DENABLE_FONTIAC=True \
		-DENABLE_AZOTH_MUCOMMANDS_TESTS=True \
		-DENABLE_POSHUKU_DCAC_TESTS=True \
		-DENABLE_UTIL_TESTS=True \
		&& \
	make -j$(nproc) -k
