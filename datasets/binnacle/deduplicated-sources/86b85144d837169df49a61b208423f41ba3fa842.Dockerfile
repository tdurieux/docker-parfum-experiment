FROM ubuntu:trusty

RUN \
        set -ex \
    && \
        apt-get update && apt-get install -y \
            build-essential \
            gcc-4.4 \
            g++-4.4 \
            git \
            cmake \
            pkg-config \
            libssl-dev \
            libcurl4-openssl-dev \
            libglib2.0-dev \
    && \
        update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-4.4 10 \
    && \
        update-alternatives --install /usr/bin/cc cc /usr/bin/gcc 20 \
    && \
        update-alternatives --set cc /usr/bin/gcc \
    && \
        update-alternatives --config gcc \
    && \
        update-alternatives --install /usr/bin/g++ g++ /usr/bin/g++-4.4 10 \
    && \
        update-alternatives --install /usr/bin/c++ c++ /usr/bin/g++ 20 \
    && \
        update-alternatives --set c++ /usr/bin/g++ \
    && \
        update-alternatives --config g++
