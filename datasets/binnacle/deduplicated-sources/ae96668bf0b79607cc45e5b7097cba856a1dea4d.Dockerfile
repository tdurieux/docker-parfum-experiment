FROM ansibleplaybookbundle/apb-base:canary  
MAINTAINER Ansible Playbook Bundle Community  
  
LABEL "com.redhat.apb.spec"=\  
"LS0tCgp2ZXJzaW9uOiAxLjAKbmFtZTogbWFyaWFkYi1hcGIKZGVzY3JpcHRpb246IE1hcmlhZGIg\  
YXBiIGltcGxlbWVudGF0aW9uCmJpbmRhYmxlOiB0cnVlCmFzeW5jOiBvcHRpb25hbAp0YWdzOgog\  
IC0gZGF0YWJhc2UKICAtIG1hcmlhZGIKbWV0YWRhdGE6CiAgZG9jdW1lbnRhdGlvblVybDogImh0\  
dHBzOi8vbWFyaWFkYi5jb20va2IvZW4vbWFyaWFkYi9kb2N1bWVudGF0aW9uLyIKICBsb25nRGVz\  
Y3JpcHRpb246ICJEZXBsb3lzIGEgYmluZGFibGUgbWFyaWFkYiBpbnN0YW5jZSIKICBkZXBlbmRl\  
bmNpZXM6CiAgICAtICdyZWdpc3RyeS5hY2Nlc3MucmVkaGF0LmNvbS9yaHNjbC9tYXJpYWRiLTEw\  
MC1yaGVsNycKICAgIC0gJ3JlZ2lzdHJ5LmFjY2Vzcy5yZWRoYXQuY29tL3Joc2NsL21hcmlhZGIt\  
MTAxLXJoZWw3JwogICAgLSAncmVnaXN0cnkuYWNjZXNzLnJlZGhhdC5jb20vcmhzY2wvbWFyaWFk\  
Yi0xMDItcmhlbDcnCiAgZGlzcGxheU5hbWU6ICJNYXJpYURCIChBUEIpIgogIGNvbnNvbGUub3Bl\  
bnNoaWZ0LmlvL2ljb25DbGFzczogaWNvbi1tYXJpYWRiCiAgcHJvdmlkZXJEaXNwbGF5TmFtZTog\  
IlJlZCBIYXQsIEluYy4iCnBsYW5zOgogIC0gbmFtZTogZGV2CiAgICBkZXNjcmlwdGlvbjoKICAg\  
ICAgVGhpcyBwbGFuIGRlcGxveXMgYSBzaW5nbGUgTWFyaWFEQiBpbnN0YW5jZSB3aXRoIGVwaGVt\  
ZXJhbCBzdG9yYWdlCiAgICBmcmVlOiB0cnVlCiAgICBkZWZhdWx0OiB0cnVlCiAgICBtZXRhZGF0\  
YToKICAgICAgZGlzcGxheU5hbWU6IERldmVsb3BtZW50CiAgICAgIGNvc3Q6ICQwLjAwCiAgICBw\  
YXJhbWV0ZXJzOgogICAgICAtIG5hbWU6IG1hcmlhZGJfZGF0YWJhc2UKICAgICAgICBkZWZhdWx0\  
OiBhZG1pbgogICAgICAgIHR5cGU6IHN0cmluZwogICAgICAgIGRlc2NyaXB0aW9uOiBNYXJpYURC\  
IGRlZmF1bHQgZGF0YWJhc2UgbmFtZQogICAgICAgIHRpdGxlOiBNYXJpYURCIERhdGFiYXNlIE5h\  
bWUKICAgICAgICBwYXR0ZXJuOiAiXlthLXpBLVowLTlfXSpbYS16QS1aX10rW2EtekEtWjAtOV9d\  
KiQiCiAgICAgICAgcmVxdWlyZWQ6IHRydWUKICAgICAgLSBuYW1lOiBtYXJpYWRiX3Jvb3RfcGFz\  
c3dvcmQKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICBkaXNwbGF5X3R5cGU6IHBhc3N3b3Jk\  
CiAgICAgICAgcmVxdWlyZWQ6IHRydWUKICAgICAgICB0aXRsZTogTWFyaWFEQiBSb290IFBhc3N3\  
b3JkCiAgICAgIC0gbmFtZTogbWFyaWFkYl91c2VyCiAgICAgICAgZGVmYXVsdDogYWRtaW4KICAg\  
ICAgICB0eXBlOiBzdHJpbmcKICAgICAgICBwYXR0ZXJuOiAiXlthLXpBLVowLTlfXSpbYS16QS1a\  
X10rW2EtekEtWjAtOV9dKiQiCiAgICAgICAgcmVxdWlyZWQ6IHRydWUKICAgICAgICB0aXRsZTog\  
TWFyaWFEQiBVc2VyCiAgICAgIC0gbmFtZTogbWFyaWFkYl9wYXNzd29yZAogICAgICAgIHR5cGU6\  
IHN0cmluZwogICAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICAgICAgZGlzcGxheV90eXBlOiBwYXNz\  
d29yZAogICAgICAgIHRpdGxlOiBNYXJpYURCIFBhc3N3b3JkCiAgICAgIC0gbmFtZTogbWFyaWFk\  
Yl92ZXJzaW9uCiAgICAgICAgZGVmYXVsdDogIjEwLjIiCiAgICAgICAgZW51bTogWycxMC4yJywg\  
JzEwLjEnLCAnMTAuMCddCiAgICAgICAgdHlwZTogZW51bQogICAgICAgIHRpdGxlOiBNYXJpYURC\  
IFZlcnNpb24KICAgICAgICByZXF1aXJlZDogdHJ1ZQogICAgICAgIHVwZGF0YWJsZTogdHJ1ZQog\  
ICAgdXBkYXRlc190bzoKICAgICAgLSBwcm9kCiAgLSBuYW1lOiBwcm9kCiAgICBkZXNjcmlwdGlv\  
bjoKICAgICAgVGhpcyBwbGFuIGRlcGxveXMgYSBzaW5nbGUgTWFyaWFEQiBpbnN0YW5jZSB3aXRo\  
IHBlcnNpc3RlbnQgc3RvcmFnZQogICAgZnJlZTogdHJ1ZQogICAgbWV0YWRhdGE6CiAgICAgIGRp\  
c3BsYXlOYW1lOiBQcm9kdWN0aW9uCiAgICAgIGNvc3Q6ICQwLjAwCiAgICBwYXJhbWV0ZXJzOgog\  
ICAgICAtIG5hbWU6IG1hcmlhZGJfZGF0YWJhc2UKICAgICAgICBkZWZhdWx0OiBhZG1pbgogICAg\  
ICAgIHR5cGU6IHN0cmluZwogICAgICAgIGRlc2NyaXB0aW9uOiBNYXJpYURCIGRlZmF1bHQgZGF0\  
YWJhc2UgbmFtZQogICAgICAgIHRpdGxlOiBNYXJpYURCIERhdGFiYXNlIE5hbWUKICAgICAgICBw\  
YXR0ZXJuOiAiXlthLXpBLVowLTlfXSpbYS16QS1aX10rW2EtekEtWjAtOV9dKiQiCiAgICAgICAg\  
cmVxdWlyZWQ6IHRydWUKICAgICAgLSBuYW1lOiBtYXJpYWRiX3Jvb3RfcGFzc3dvcmQKICAgICAg\  
ICB0eXBlOiBzdHJpbmcKICAgICAgICBkaXNwbGF5X3R5cGU6IHBhc3N3b3JkCiAgICAgICAgcmVx\  
dWlyZWQ6IHRydWUKICAgICAgICB0aXRsZTogTWFyaWFEQiBSb290IFBhc3N3b3JkCiAgICAgIC0g\  
bmFtZTogbWFyaWFkYl91c2VyCiAgICAgICAgZGVmYXVsdDogYWRtaW4KICAgICAgICB0eXBlOiBz\  
dHJpbmcKICAgICAgICBwYXR0ZXJuOiAiXlthLXpBLVowLTlfXSpbYS16QS1aX10rW2EtekEtWjAt\  
OV9dKiQiCiAgICAgICAgcmVxdWlyZWQ6IHRydWUKICAgICAgICB0aXRsZTogTWFyaWFEQiBVc2Vy\  
CiAgICAgIC0gbmFtZTogbWFyaWFkYl9wYXNzd29yZAogICAgICAgIHR5cGU6IHN0cmluZwogICAg\  
ICAgIHJlcXVpcmVkOiB0cnVlCiAgICAgICAgZGlzcGxheV90eXBlOiBwYXNzd29yZAogICAgICAg\  
IHRpdGxlOiBNYXJpYURCIFBhc3N3b3JkCiAgICAgIC0gbmFtZTogbWFyaWFkYl92ZXJzaW9uCiAg\  
ICAgICAgZGVmYXVsdDogIjEwLjIiCiAgICAgICAgZW51bTogWycxMC4yJywgJzEwLjEnLCAnMTAu\  
MCddCiAgICAgICAgdHlwZTogZW51bQogICAgICAgIHRpdGxlOiBNYXJpYURCIFZlcnNpb24KICAg\  
ICAgICByZXF1aXJlZDogdHJ1ZQogICAgICAgIHVwZGF0YWJsZTogdHJ1ZQogICAgICAtIG5hbWU6\  
IG1hcmlhZGJfdm9sdW1lX3NpemUKICAgICAgICB0eXBlOiBlbnVtCiAgICAgICAgZGVmYXVsdDog\  
JzFHaScKICAgICAgICBlbnVtOiBbJzFHaScsICc1R2knLCAnMTBHaSddCiAgICAgICAgdGl0bGU6\  
IE1hcmlhREIgVm9sdW1lIFNpemUKICAgICAgICByZXF1aXJlZDogdHJ1ZQogICAgdXBkYXRlc190\  
bzoKICAgICAgLSBkZXYK"  
  
  
ADD playbooks /opt/apb/actions  
  
# Add our role into the ansible roles dir  
ADD . /opt/ansible/roles/mariadb-apb  
  
RUN chmod -R g=u /opt/{ansible,apb}  
  
USER apb  

