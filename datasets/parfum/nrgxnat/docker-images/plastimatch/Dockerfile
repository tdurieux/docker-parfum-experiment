FROM ubuntu:18.04

RUN apt-get -y update && apt-get -y install plastimatch

LABEL org.nrg.commands="[{\"inputs\": [{\"required\": true, \"name\": \"SCAN_ID\", \"description\": \"Scan ID\"}], \"name\": \"dicomtonrrd\", \"command-line\": \"plastimatch convert --input /input --output-img /output/#SCAN_ID#.nrrd\", \"outputs\": [{\"mount\": \"out\", \"required\": true, \"name\": \"output\", \"description\": \"The nrrd file\"}], \"image\": \"xnat/plastimatch:1.0\", \"label\": \"dicom to nrrd\", \"version\": \"1.0\", \"schema-version\": \"1.0\", \"xnat\": [{\"derived-inputs\": [{\"provides-value-for-command-input\": \"SCAN_ID\", \"name\": \"scan-id\", \"derived-from-xnat-object-property\": \"id\", \"derived-from-wrapper-input\": \"scan\", \"type\": \"string\", \"description\": \"Scan id\"}, {\"name\": \"scan-dicoms\", \"matcher\": \"@.label == 'DICOM'\", \"provides-files-for-command-mount\": \"in\", \"derived-from-wrapper-input\": \"scan\", \"type\": \"Resource\", \"description\": \"The dicom resource on the scan\"}], \"contexts\": [\"xnat:imageScanData\"], \"description\": \"Run dcm2nrrd on a Scan\", \"label\": \"dicom to nrrd\", \"output-handlers\": [{\"accepts-command-output\": \"output\", \"type\": \"Resource\", \"name\": \"nrrd-resource\", \"as-a-child-of\": \"scan\", \"label\": \"NRRD\"}], \"external-inputs\": [{\"matcher\": \"'DICOM' in @.resources[*].label\", \"required\": true, \"type\": \"Scan\", \"name\": \"scan\", \"description\": \"Input scan\"}], \"name\": \"dicomtonrrd-scan\"}], \"mounts\": [{\"writable\": \"false\", \"path\": \"/input\", \"name\": \"in\"}, {\"writable\": \"true\", \"path\": \"/output\", \"name\": \"out\"}], \"info-url\": \"http://plastimatch.org\", \"type\": \"docker\", \"description\": \"Converts dicom to nrrd with plastimatch\"}, \
	{\"inputs\": [], \"name\": \"dicomtonrrd-rtstruct\", \"command-line\": \"plastimatch convert --input /input --output-prefix /output --prefix-format nrrd --output-ss-list /output/RTSS.txt\", \"outputs\": [{\"mount\": \"out\", \"required\": true, \"name\": \"output\", \"description\": \"The nrrd files\"}], \"image\": \"xnat/plastimatch:1.0\", \"label\": \"dicom to nrrd (rt-struct)\", \"version\": \"1.0\", \"schema-version\": \"1.0\", \"xnat\": [{\"derived-inputs\": [{\"matcher\": \"@.label == 'DICOM' || @.label == 'secondary'\", \"derived-from-wrapper-input\": \"scan\", \"type\": \"Resource\", \"name\": \"scan-dicom\", \"provides-files-for-command-mount\": \"in\"}], \"contexts\": [\"xnat:imageScanData\"], \"description\": \"Run dicomtonrrd-rtstruct on an RT-STRUCT Scan\", \"label\": \"dicom to nrrd (rt-struct)\", \"output-handlers\": [{\"accepts-command-output\": \"output\", \"type\": \"Resource\", \"name\": \"nrrd-resource\", \"as-a-child-of\": \"scan\", \"label\": \"NRRD\"}], \"external-inputs\": [{\"matcher\": \"'DICOM' in @.resources[*].label || 'secondary' in @.resources[*].label\", \"required\": true, \"type\": \"Scan\", \"name\": \"scan\", \"description\": \"RT-STRUCT scan\"}], \"name\": \"dicomtonrrd-rtstruct-scan\"}, {\"derived-inputs\": [{\"matcher\": \"@.label == 'RTSTRUCT'\", \"derived-from-wrapper-input\": \"assessor\", \"type\": \"Resource\", \"name\": \"rtstruct\", \"provides-files-for-command-mount\": \"in\"}], \"contexts\": [\"icr:roiCollectionData\"], \"description\": \"Run dicomtonrrd-rtstruct on an RT-STRUCT ROI Collection assessor\", \"label\": \"dicom to nrrd (rt-struct)\", \"output-handlers\": [{\"accepts-command-output\": \"output\", \"type\": \"Resource\", \"name\": \"nrrd-resource\", \"as-a-child-of\": \"assessor\", \"label\": \"NRRD\"}], \"external-inputs\": [{\"matcher\": \"'RTSTRUCT' in @.resources[*].label\", \"required\": true, \"type\": \"Assessor\", \"name\": \"assessor\", \"description\": \"ROI Collection assessor\"}], \"name\": \"dicomtonrrd-rtstruct-roi-collection\"}], \"mounts\": [{\"writable\": \"false\", \"path\": \"/input\", \"name\": \"in\"}, {\"writable\": \"true\", \"path\": \"/output\", \"name\": \"out\"}], \"info-url\": \"http://plastimatch.org\", \"type\": \"docker\", \"description\": \"Converts RT-STRUCT DICOM to NRRD with plastimatch\"}]"
