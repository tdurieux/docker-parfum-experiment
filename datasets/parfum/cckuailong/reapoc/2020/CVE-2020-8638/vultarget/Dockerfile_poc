FROM ubuntu:18.04

RUN mkdir /app
COPY ./requirements_poc.txt /app/requirements_poc.txt
COPY ./login.py /app/login.py
COPY ./entrypoint_poc.sh /sbin/entrypoint.sh
COPY ./temp /app/temp

WORKDIR /app
RUN sed -i s@/archive.ubuntu.com/@/mirrors.tuna.tsinghua.edu.cn/@g /etc/apt/sources.list
RUN apt-get update --fix-missing && apt-get install -y curl python3 python3-pip wget \
    && pip3 install -r requirements_poc.txt -i https://mirrors.aliyun.com/pypi/simple/ \
    && chmod 755 /sbin/entrypoint.sh

EXPOSE 80
CMD ["/sbin/entrypoint.sh"]