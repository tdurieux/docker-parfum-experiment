# Dataset creation

This folder contains the scripts that download the Dockerfiles from Github.

## Process

1. The list of considered repositories is stored in `/data/evaluation/repositories.csv`. This list has been generated by https://seart-ghs.si.usi.ch/ and contains Github repositories with more than 10 stars and 50 commits.
2. Download the list of files for those repositories using Github API (see `./1.download_file_list.ts`)
3. Filter repositories that contain a Dockerfile (a file contains `Dockerfile`) but outside `test` or `resources` folder.
4. Download the Dockerfile (see `./2.download_dockerfile.ts`)

## Usage

### 1.download_file_list.ts

```bash
Options:
      --help              Show help                                    [boolean]
      --version           Show version number                          [boolean]
      --repositoriesPath  [string] [default:"/data/evaluation/repositories.csv"]
  -o, --output                      [string] [default: "/data/evaluation/files"]
  -s, --skip-existing     Skip repositories that the file list have been already
                          downloaded                   [boolean] [default: true]
```

### 2.download_dockerfile.ts

```bash
Options:
      --help           Show help                                       [boolean]
      --version        Show version number                             [boolean]
      --fileListPath                [string] [default: "/data/evaluation/files"]
  -o, --output                [string] [default: "/data/evaluation/dockerfiles"]
  -s, --skip-existing  Skip repositories that have their Dockerfiles downloaded
                                                       [boolean] [default: true]
```

## Metric

| Metric                                     | Value   |
| ------------------------------------------ | ------- |
| # List of files                            | 500 023 |
| Size of the list of file                   | 49G     |
| # Organizations with Downloaded Dockerfile | 39 406  |
| # Repositories with Downloaded Dockerfile  | 100 656 |
| # Dockerfiles                              | 201 885 |
| Size of the Dockerfiles                    | 860M    |
